<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question on deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20on%20deferreds&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012121.html">
   <LINK REL="Next"  HREF="012118.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question on deferreds</H1>
    <B>Frank Millman</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20on%20deferreds&In-Reply-To="
       TITLE="[Twisted-Python] Question on deferreds">frank at chagford.com
       </A><BR>
    <I>Sun Dec  4 06:33:23 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012121.html">[Twisted-Python] Request for ideas
</A></li>
        <LI>Next message: <A HREF="012118.html">[Twisted-Python] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12117">[ date ]</a>
              <a href="thread.html#12117">[ thread ]</a>
              <a href="subject.html#12117">[ subject ]</a>
              <a href="author.html#12117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I am trying to convert my app to use Twisted. The original version handles a
gui, some business logic, and a database connection, all in one program. I
have split it into a 'client' program, that handles the gui; and a server
program, that handles the business logic and the database connection, and
communicates with the client using pb.

The original program has some logic to validate user input. The data to be
validated is passed up through 3 or 4 classes. Here is some very simplified
pseudo code -

    class1():
        def check1(data):
            perform test
            if test failed:
                return False
            if not class2.check2(data):
                return False
            return True

    class2():
        def check2(data):
            perform test
            if test failed:
                return False
            if not class3.check3(data):
                return False
            return True

    class3():
        def check3(data):
            perform test
            if test failed:
                return False
            if not class4.check4(data):
                return False
            return True

    class4():
        def check4(data):
            perform test
            if test failed:
                return False
            return True

In my new program, classes 1-3 run on the client, class4 runs on the server.
Therefore I tried to change class3 as follows -

    class3():
        def check3(data):
            avatar.callRemote(check4,data).addCallback(afterCheck)

        def afterCheck(result):
            return result

This does not work, as check1 and check2 never receive the result.

I would like to avoid going through my entire program and changing each
occurrence of check1 and check2 into a deferred and a callback. I do not
particularly mind if the client program blocks, as I do not want the user to
proceed until the result is known.

Is there any way to accomplish this?

Thanks for any advice

Frank Millman



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012121.html">[Twisted-Python] Request for ideas
</A></li>
	<LI>Next message: <A HREF="012118.html">[Twisted-Python] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12117">[ date ]</a>
              <a href="thread.html#12117">[ thread ]</a>
              <a href="subject.html#12117">[ subject ]</a>
              <a href="author.html#12117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
