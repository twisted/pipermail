<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Receiving a root from a pb client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Receiving%20a%20root%20from%20a%20pb%20client&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012244.html">
   <LINK REL="Next"  HREF="012246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Receiving a root from a pb client</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Receiving%20a%20root%20from%20a%20pb%20client&In-Reply-To="
       TITLE="[Twisted-Python] Receiving a root from a pb client">warner at lothar.com
       </A><BR>
    <I>Tue Dec 27 13:15:42 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012244.html">[Twisted-Python] Securing a custom protocol
</A></li>
        <LI>Next message: <A HREF="012246.html">[Twisted-Python] Allowing a type to be transmitted by jelly?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12245">[ date ]</a>
              <a href="thread.html#12245">[ thread ]</a>
              <a href="subject.html#12245">[ subject ]</a>
              <a href="author.html#12245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">william.lewis at uk.bnpparibas.com</A> writes:

&gt;<i> I am using pb to communicate in a client-server configuration. My client
</I>&gt;<i> inherits from PBClientFactory. My server has a remote_take_root() method
</I>&gt;<i> by which the client can connect to the server and pass in its root, thus
</I>&gt;<i> allowing two-way communication. Is there anyway for the server to
</I>&gt;<i> re-establish the connection (should it go down) in this setup, or is
</I>&gt;<i> this the sole responsibility of the client?
</I>
The other posters in this thread have it exactly right. The RemoteReference
that is received by your remote_take_root() method does not carry enough
information to allow anyone else (including your server) to initiate a new
connection to the Broker which hosts it. In this configuration, the &quot;client&quot;
side (specifically the side which initiates the PB connection with a
PBClientFactory) must be responsible for any sort of reconnection.

Incidentally, in newpb this won't necessarily be the case. Both ends can
listen on a TCP socket, and the RemoteReference that you receive may contain
enough information to connect to its source. It is still a good idea to make
exactly one side be responsible for things like reconnection, though, because
otherwise you get a bunch of ugly race conditions as both sides attempt to
connect at the same time. (newpb handles this for you, so you'll only get a
single connection between the two Tubs, but it's still ugly). Also, the
application level should be aware of the reconnection events, otherwise it
becomes more difficult to be sure about which methods have been successfully
invoked and which have not.

cheers,
 -Brian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012244.html">[Twisted-Python] Securing a custom protocol
</A></li>
	<LI>Next message: <A HREF="012246.html">[Twisted-Python] Allowing a type to be transmitted by jelly?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12245">[ date ]</a>
              <a href="thread.html#12245">[ thread ]</a>
              <a href="subject.html#12245">[ subject ]</a>
              <a href="author.html#12245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
