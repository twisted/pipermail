<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] ftpClient.py, retrieveFile, and line ending issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20ftpClient.py%2C%20retrieveFile%2C%20and%20line%20ending%20issues&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012119.html">
   <LINK REL="Next"  HREF="012123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] ftpClient.py, retrieveFile, and line ending issues</H1>
    <B>Keith.Gunderson at act.org</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20ftpClient.py%2C%20retrieveFile%2C%20and%20line%20ending%20issues&In-Reply-To="
       TITLE="[Twisted-Python] ftpClient.py, retrieveFile, and line ending issues">Keith.Gunderson at act.org
       </A><BR>
    <I>Tue Dec  6 17:41:07 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012119.html">[Twisted-Python] [patch] issue 630: timezone in twisted log
</A></li>
        <LI>Next message: <A HREF="012123.html">[Twisted-Python] ftpClient.py, retrieveFile, and line ending	issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12122">[ date ]</a>
              <a href="thread.html#12122">[ thread ]</a>
              <a href="subject.html#12122">[ subject ]</a>
              <a href="author.html#12122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

If any of you have a spare minute, I can't figure out else where I might
solve my present dilemma.  Its certainly likely that my only issues are
ignorance about Python's file operations or the features that are a part of
other FTP clients that I use.

I'm using the ftpclient.py code to write a script which downloads file via
FTP.  My example code shows the basics.  The file is transferred, but the
lines seem to have different line endings when I view them 'hexlified' in
xemacs.  My twisted-created files has hex 0D0D 0D0D 0D0D at the end of
lines while a file downloaded using SmartFTP has hex 0D0A 0D0A.

Is it clear, based on that information, if there is an issue in my code?
Or an easy way to fix it?

class FileWriterProtocol(Protocol):
    def __init__(self, filename):
        self.file = open(filename, 'w')

    def dataReceived(self, data):
        self.file.write(data)


def connectionMade(ftpClient):

    proto2 = FileWriterProtocol( 'c:/ftpfile1.txt' )

    # Get the file, and quit when done
    d = ftpClient.retrieveFile( 's1/s2/T2005C.processed' ,
      proto2)
    d.addCallback(lambda result: reactor.stop())


Thanks very much,

Keith Gunderson





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012119.html">[Twisted-Python] [patch] issue 630: timezone in twisted log
</A></li>
	<LI>Next message: <A HREF="012123.html">[Twisted-Python] ftpClient.py, retrieveFile, and line ending	issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12122">[ date ]</a>
              <a href="thread.html#12122">[ thread ]</a>
              <a href="subject.html#12122">[ subject ]</a>
              <a href="author.html#12122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
