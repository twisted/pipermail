<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Qtreactor problem on twisted 2.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Qtreactor%20problem%20on%20twisted%202.1&In-Reply-To=600A6501-4966-484E-B024-C26CEBA7B5A7%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012252.html">
   <LINK REL="Next"  HREF="012253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Qtreactor problem on twisted 2.1</H1>
    <B>Umit Oztosun</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Qtreactor%20problem%20on%20twisted%202.1&In-Reply-To=600A6501-4966-484E-B024-C26CEBA7B5A7%40fuhm.net"
       TITLE="[Twisted-Python] Qtreactor problem on twisted 2.1">umit at liqia.com
       </A><BR>
    <I>Sat Dec 31 06:37:44 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012252.html">[Twisted-Python] Qtreactor problem on twisted 2.1
</A></li>
        <LI>Next message: <A HREF="012253.html">[Twisted-Python] Twisted windows hackers - help the tests to pass!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12259">[ date ]</a>
              <a href="thread.html#12259">[ thread ]</a>
              <a href="subject.html#12259">[ subject ]</a>
              <a href="author.html#12259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 12/30/05, James Y Knight &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">foom at fuhm.net</A>&gt; wrote:
&gt;<i> For some reason, the stack trace looks truncated, since it starts
</I>&gt;<i> with defer.py:addCallbacks. But my guess is that read is getting
</I>&gt;<i> called re-entrantly. By calling exec_loop within a callback, you're
</I>&gt;<i> causing the reactor to loop within another reactor loop, and the
</I>&gt;<i> reactor isn't designed to ensure it's safe to do that. Is it possible
</I>&gt;<i> to change the code to show a dialog box without running a sub-loop?
</I>
Well, our dialog is a custom widget derived from QDialog. Displaying
the dialog without exec_loop is not a problem, but in order to receive
and process GUI events, one should somehow call qApp.processEvents()
or a similar call. Otherwise GUI basically locks up. I constructed a
dummy loop periodically calling qApp.processEvents() in order to
simulate the exec_loop behaviour. However, the problem still persists.
After a few seconds after the dialog is displayed, the &quot;Non-list
expression received&quot; exception is fired.

I even tried &quot;qApp.eventLoop().processEvents(QEventLoop.ExcludeSocketNotifiers)&quot;
in order to only process user input events, but this again didn't
work.

This does not always happen, but happens quite occasionally. To
emphasize again, problem does not exist when using twisted 1.3. I also
tried to connect a twisted 2.1 server with a twisted 1.3 client, and
it was still OK.

Regards,
Umit Oztosun


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012252.html">[Twisted-Python] Qtreactor problem on twisted 2.1
</A></li>
	<LI>Next message: <A HREF="012253.html">[Twisted-Python] Twisted windows hackers - help the tests to pass!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12259">[ date ]</a>
              <a href="thread.html#12259">[ thread ]</a>
              <a href="subject.html#12259">[ subject ]</a>
              <a href="author.html#12259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
