<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: plus mode was Re: how winnt fileops workand	what to do about it
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20plus%20mode%20was%20Re%3A%20how%20winnt%20fileops%20workand%0A%09what%20to%20do%20about%20it&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012280.html">
   <LINK REL="Next"  HREF="012281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: plus mode was Re: how winnt fileops workand	what to do about it</H1>
    <B>Paul G</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20plus%20mode%20was%20Re%3A%20how%20winnt%20fileops%20workand%0A%09what%20to%20do%20about%20it&In-Reply-To="
       TITLE="[Twisted-Python] Re: plus mode was Re: how winnt fileops workand	what to do about it">paul-lists at perforge.com
       </A><BR>
    <I>Sat Dec 31 18:04:16 EST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="012280.html">[Twisted-Python] Re: plus mode was Re: how winnt fileops work	and what to do about it
</A></li>
        <LI>Next message: <A HREF="012281.html">[Twisted-Python] Re: plus mode was Re: how winnt fileops work and	what to do about it
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12282">[ date ]</a>
              <a href="thread.html#12282">[ thread ]</a>
              <a href="subject.html#12282">[ subject ]</a>
              <a href="author.html#12282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
----- Original Message ----- 
From: &quot;Jean-Paul Calderone&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt;
To: &quot;Twisted general discussion&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
Sent: Saturday, December 31, 2005 5:27 PM
Subject: Re: [Twisted-Python] Re: plus mode was Re: how winnt fileops 
workand what to do about it


&gt;<i> This is definitely one of them.  Another is that trial's test_output and 
</I>&gt;<i> test_runner try to move a directory aside and fail for some &gt; reason.
</I>
they fail for the same reason it looks like. the crux of the issue is that 
you can't hold files open if you're going to be performing ops on an 
ancestor directory.


&gt;<i>  Another is that some tests assert things about the behavior of files 
</I>&gt;<i> opened in 'r+b' mode, which does not behave the same way &gt; on Win32 as on 
</I>&gt;<i> POSIX.
</I>
this has been resolved (as in cause found and confirmed). also, if you will 
excuse me for being pedantically retentive, there is no direct equivalent to 
ansi c file stream apis in either win32 or nt native. in fact, neither is 
there one on posix. nt/posix is syscalls, win32 is a libc-like layer on top 
of ntapi, but completely different. this weirdness is all in the libc. the 
issue lies, specifically, with the libc (aka c runtime as they call it) 
visual studio provides and its implementation of file streams. i'm willing 
to bet that if cpython can be built using something other than visual studio 
on windows, those builds do not suffer from the same issue (unless that 
product's authors decided to lemming microsoft when writing their libc).

-p 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012280.html">[Twisted-Python] Re: plus mode was Re: how winnt fileops work	and what to do about it
</A></li>
	<LI>Next message: <A HREF="012281.html">[Twisted-Python] Re: plus mode was Re: how winnt fileops work and	what to do about it
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12282">[ date ]</a>
              <a href="thread.html#12282">[ thread ]</a>
              <a href="subject.html#12282">[ subject ]</a>
              <a href="author.html#12282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
