<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reconnecting from the client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reconnecting%20from%20the%20client&In-Reply-To=%3C20040727004903.GC13599%40yosamite.tekno.house%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040682.html">
   <LINK REL="Next"  HREF="040684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reconnecting from the client</H1>
    <B>Sam Couter</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reconnecting%20from%20the%20client&In-Reply-To=%3C20040727004903.GC13599%40yosamite.tekno.house%3E"
       TITLE="[Twisted-Python] reconnecting from the client">sam at couter.dropbear.id.au
       </A><BR>
    <I>Mon Jul 26 18:49:03 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040682.html">[Twisted-Python] reconnecting from the client
</A></li>
        <LI>Next message (by thread): <A HREF="040684.html">[Twisted-Python] Wiring  a new reactor/Client into Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40688">[ date ]</a>
              <a href="thread.html#40688">[ thread ]</a>
              <a href="subject.html#40688">[ subject ]</a>
              <a href="author.html#40688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bosnjak Zoran    ITWEP &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Bosnjak at iskratel.si</A>&gt; wrote:
&gt;<i> 3. If the connection is active and no data can be transmited / received for X seconds (link down, router down),
</I>&gt;<i>    the client should try to reconnect as in the case (1.) (as if the client has never been connected)
</I>&gt;<i>    It should react in less then 10 seconds.
</I>&gt;<i> 
</I>&gt;<i> Unfortunately I can not detect the situation (3.). If I unplug the ethernet while connected, none of my methods is called (ever).
</I>&gt;<i> I couldn't find anything like this in the documentation or in the examples.
</I>
This isn't a Twisted thing, it's a TCP thing. When you unplug your
ethernet cable, packets start to silently fall on the floor. It's only
after the TCP layer times out without seeing expected ACK packets that
it'll consider the connection lost. Up until that point, it just thinks
the connection has high latency that's getting higher all the time.

The TCP timeout is often set at several minutes. If you want a ten
second response to lost packets, you should implement some kind of ping
and/or timeout mechanism yourself, on top of TCP.

A router busted in the appropriate way will send ICMP host unreachable
or network unreachable messages, and the TCP layer will be able to
immediately detect a connection broken in this way.

Your operating system may provide a way of tuning TCP connection
parameters, in which case you may be able to get the TCP timeout down to
ten seconds. Expect lots of broken connections. I'm not sure if that
would violate the various TCP RFCs either.
-- 
Sam &quot;Eddie&quot; Couter  |  mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sam at couter.dropbear.id.au</A>
Debian Developer    |  mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">eddie at debian.org</A>
                    |  jabber:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sam at teknohaus.dyndns.org</A>
OpenPGP fingerprint:  A46B 9BB5 3148 7BEA 1F05  5BD5 8530 03AE DE89 C75C
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: &lt;/pipermail/twisted-python/attachments/20040727/d4cfa354/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040682.html">[Twisted-Python] reconnecting from the client
</A></li>
	<LI>Next message (by thread): <A HREF="040684.html">[Twisted-Python] Wiring  a new reactor/Client into Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40688">[ date ]</a>
              <a href="thread.html#40688">[ thread ]</a>
              <a href="subject.html#40688">[ subject ]</a>
              <a href="author.html#40688">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
