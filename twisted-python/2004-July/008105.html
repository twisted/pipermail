<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.internet.abstract.FileDescription.write%0A%09vs%20unicode&In-Reply-To=20040712225312.GC3278%40titus.home.puzzling.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008102.html">
   <LINK REL="Next"  HREF="008110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode</H1>
    <B>Jeff Bowden</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.internet.abstract.FileDescription.write%0A%09vs%20unicode&In-Reply-To=20040712225312.GC3278%40titus.home.puzzling.org"
       TITLE="[Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode">jlb at houseofdistraction.com
       </A><BR>
    <I>Tue Jul 13 00:50:43 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008102.html">[Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode
</A></li>
        <LI>Next message: <A HREF="008110.html">[Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8105">[ date ]</a>
              <a href="thread.html#8105">[ thread ]</a>
              <a href="subject.html#8105">[ subject ]</a>
              <a href="author.html#8105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mary Gardiner wrote:

&gt;<i>On Mon, Jul 12, 2004, Jeff Bowden wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Is there a good reason for 
</I>&gt;&gt;<i>twisted.internet.abstract.FileDescription.write to require 
</I>&gt;&gt;<i>isinstance(data, str) rather than also allowing isinstance(type, unicode)??
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>This is one of those rare things, an FAQ that really is a &quot;Frequently
</I>&gt;<i>Asked Question&quot; not a &quot;Question We Wish You'd Ask&quot;.
</I>&gt;<i>
</I>&gt;<i>Unfortunately, I haven't actually added it to the FAQs yet :( See the
</I>&gt;<i>discussion at
</I>&gt;<i><A HREF="http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue617,">http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue617,</A> in
</I>&gt;<i>particular Glyph Lefkowitz's comment:
</I>&gt;<i>
</I>&gt;<i>    
</I>&gt;<i>    &quot;Q. Why doesn't {API X} accept both string objects and unicode
</I>&gt;<i>    objects?  Isn't it better to use unicode so you can support
</I>&gt;<i>    internationalization?
</I>&gt;<i>
</I>&gt;<i>    A. Unicode is for talking about strings of human-readable text.
</I>&gt;<i>    String objects can also be used for this purpose, and when they are,
</I>&gt;<i>    it is better to use unicode, you are correct.  However, {API X} is
</I>&gt;<i>    dealing with raw data, probably coming from a network connection,
</I>&gt;<i>    and is using String objects as containers of sequences of bytes.
</I>&gt;<i>    Unicode has no way of representing sequences of bytes and streams of
</I>&gt;<i>    'raw', unparsed data.  The data has to be translated at some level
</I>&gt;<i>    *above* that, in order to get things like unicode character
</I>&gt;<i>    alignment correct.
</I>&gt;<i>
</I>&gt;<i>    For more information and some idea of the complexity involved, read
</I>&gt;<i>    <A HREF="http://www.sidhe.org/~dan/blog/archives/000255.html">http://www.sidhe.org/~dan/blog/archives/000255.html</A> and
</I>&gt;<i>    <A HREF="http://www.joelonsoftware.com/articles/Unicode.html&quot;">http://www.joelonsoftware.com/articles/Unicode.html&quot;</A>
</I>&gt;<i>  
</I>&gt;<i>
</I>
Right, so I worked around this problem by calling .encode('utf8') in all 
the places where strings go out (after making appropriate changes to the 
content-encoding).

It wasn't that complicated but it was a PITA and it will be an ongoing 
maintenance headache.  It would be a lot nicer if the framework dealt 
with it transparently.

FileDescriptor.write does seem like the wrong place to handle it even 
though that's where the error message pops out.  Apparently what's 
needed is another layer on top of the http layer.   Has anyone attempted 
to write one?




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008102.html">[Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode
</A></li>
	<LI>Next message: <A HREF="008110.html">[Twisted-Python] twisted.internet.abstract.FileDescription.write	vs unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8105">[ date ]</a>
              <a href="thread.html#8105">[ thread ]</a>
              <a href="subject.html#8105">[ subject ]</a>
              <a href="author.html#8105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
