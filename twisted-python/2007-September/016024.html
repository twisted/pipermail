<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Transmit queue - how would I go at it?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Transmit%20queue%20-%20how%20would%20I%20go%20at%20it%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016023.html">
   <LINK REL="Next"  HREF="016025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Transmit queue - how would I go at it?</H1>
    <B>Nadav Aharony</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Transmit%20queue%20-%20how%20would%20I%20go%20at%20it%3F&In-Reply-To="
       TITLE="[Twisted-Python] Transmit queue - how would I go at it?">nadav at MIT.EDU
       </A><BR>
    <I>Fri Sep 14 00:58:12 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016023.html">[Twisted-Python] Multiple Twisted Application Plugins in the same	directory?
</A></li>
        <LI>Next message: <A HREF="016025.html">[Twisted-Python] Transmit queue - how would I go at it?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16024">[ date ]</a>
              <a href="thread.html#16024">[ thread ]</a>
              <a href="subject.html#16024">[ subject ]</a>
              <a href="author.html#16024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am working on an application where clients request files, and since 
each file is very large, the server ACKs the requests and then queues 
them to be served later, one at a time.
I am relatively new to Twisted and was wondering what would be the best 
way to approach this.

Here is what I came up with so far:

1) Use Deferred callbacks, and string together callbacks to a &quot;file 
sender&quot; function - once a file is sent, the function is called back with 
a pointer to the next file in line.
If I do so - is there some automatic garbage collection of the callbacks 
that have already been handled? (there may eventually be hundreds of 
files to be sent)
In this approach, would there be a natural way to check if a new request 
is actually a repeat of a previous request already queued?

2) Use some type of queue - where each new file request is queued, and 
some single function handles them one at at time (I guess with 
asynchronous callbacks to itself every time the transport layer is free 
to send another file and the queue is not empty).
Is there some queue structure like this in Twisted? I saw something 
called a DefferedQueue but could not find many examples or documentation 
about it and about its usage.

I mainly want to understand, from the &quot;Twisted mindset&quot;  which would be 
the the right way to go?
Also, say in the future I would want to implement priority queuing and 
handling of the requests rather than a FIFO - how would I do that in 
Twisted?

Any thoughts and/or code examples would be greatly appreciated
Thanks!
Nadav





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20070914/3ea09a9c/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20070914/3ea09a9c/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016023.html">[Twisted-Python] Multiple Twisted Application Plugins in the same	directory?
</A></li>
	<LI>Next message: <A HREF="016025.html">[Twisted-Python] Transmit queue - how would I go at it?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16024">[ date ]</a>
              <a href="thread.html#16024">[ thread ]</a>
              <a href="subject.html#16024">[ subject ]</a>
              <a href="author.html#16024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
