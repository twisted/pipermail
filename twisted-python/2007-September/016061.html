<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] 2006, 'MySQL server has gone away' 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%202006%2C%20%27MySQL%20server%20has%20gone%20away%27%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016058.html">
   <LINK REL="Next"  HREF="016064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] 2006, 'MySQL server has gone away' </H1>
    <B>Werner Thie</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%202006%2C%20%27MySQL%20server%20has%20gone%20away%27%20&In-Reply-To="
       TITLE="[Twisted-Python] 2006, 'MySQL server has gone away' ">wthie at thiengineering.ch
       </A><BR>
    <I>Thu Sep 20 07:39:58 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016058.html">[Twisted-Python] Control the number of parallel system calls
</A></li>
        <LI>Next message: <A HREF="016064.html">[Twisted-Python] 2006, 'MySQL server has gone away' 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16061">[ date ]</a>
              <a href="thread.html#16061">[ thread ]</a>
              <a href="subject.html#16061">[ subject ]</a>
              <a href="author.html#16061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all

While using mySQL V 5.0.33 and MySQL-python-1.2.2 with twisted/adbapi 
with the following connection params

DB_DRIVER = &quot;MySQLdb&quot;
DB_ARGS = {
     'host': 'xxx.xxx.xxx.xxx',
     'db': 'db',
     'user': 'dbuser',
     'passwd': 'dbpasswd'
     }

I noticed (2006, 'MySQL server has gone away') errors, which seem to be 
not recoverable from an adbapi standpoint.

Further analysis and reading the mySQL manual showed, that the mySQL 
server in versions &gt; 5 seems to close open connections after (default) 8 
hours. The reconnect feature of the db is disabled by default and there 
is no parameter to preset it via MySQL-python.

Further digging brought up this link

<A HREF="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1483074&amp;group_id=22307&amp;atid=374934">http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1483074&amp;group_id=22307&amp;atid=374934</A>

which patches the (also 1.2.2) version such, that a reconnect keyword is 
introduced in the DB_ARGS.

Questions:
- are there any adverse effects in applying this patch and setting 
reconnect: 1 in DB_ARGS?

- is there a better, safer way to avoid this nasty error?

Thxs, Werner


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016058.html">[Twisted-Python] Control the number of parallel system calls
</A></li>
	<LI>Next message: <A HREF="016064.html">[Twisted-Python] 2006, 'MySQL server has gone away' 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16061">[ date ]</a>
              <a href="thread.html#16061">[ thread ]</a>
              <a href="subject.html#16061">[ subject ]</a>
              <a href="author.html#16061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
