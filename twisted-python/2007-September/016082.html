<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reactor.stop() doesn't stop the select reactor?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20reactor.stop%28%29%20doesn%27t%20stop%20the%20select%20reactor%3F&In-Reply-To=F8D3784FE4E93C4AA66BE8C551EBB5D1B5534E%40ntxbeus12.exchange.xchg">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016081.html">
   <LINK REL="Next"  HREF="016083.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reactor.stop() doesn't stop the select reactor?</H1>
    <B>Sam Roberts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20reactor.stop%28%29%20doesn%27t%20stop%20the%20select%20reactor%3F&In-Reply-To=F8D3784FE4E93C4AA66BE8C551EBB5D1B5534E%40ntxbeus12.exchange.xchg"
       TITLE="[Twisted-Python] reactor.stop() doesn't stop the select reactor?">sroberts at uniserve.com
       </A><BR>
    <I>Tue Sep 25 17:11:47 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016081.html">[Twisted-Python] reactor.stop() doesn't stop the select reactor?
</A></li>
        <LI>Next message: <A HREF="016083.html">[Twisted-Python] reactor.stop() doesn't stop the select reactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16082">[ date ]</a>
              <a href="thread.html#16082">[ thread ]</a>
              <a href="subject.html#16082">[ subject ]</a>
              <a href="author.html#16082">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you both for your prompt help.

On Tue, Sep 25, 2007 at 03:51:24PM -0400, Jean-Paul Calderone wrote:
&gt;<i> On Tue, 25 Sep 2007 12:45:07 -0700, Sam Roberts &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sroberts at uniserve.com</A>&gt; 
</I>&gt;<i> None of the reactors implemented in Twisted are restartable.  You can call
</I>&gt;<i> each of start and stop at most once.
</I>
Ok. Sorry to gripe, but it would have saved me some time had this rather
significant and non-obvious limitation been mentioned in the docs.

&gt;<i> If you are writing unit tests which require the reactor to run, then you
</I>&gt;<i> can either use trial and twisted.trial.unittest.TestCase or you can write
</I>
Can you point me to any examples of using trial? The api is fairly
opaque, I'm baffled as to where to start, though the description sounds
like it was built to help with this problem.

&gt;<i> tests which cover smaller units of functionality (and hence do not require
</I>&gt;<i> the reactor to be running).  I'd suggest the latter as better general unit
</I>&gt;<i> testing practice.
</I>
I have unittests for the low-level code.  The purpose of these unit
tests is explicitly to ensure my implementation of the IWriteDescriptor
interfaces correctly interworks with the reactor.

For example, implementors of the IWriteDescriptor interface are required
to implement logPrefix(). This is not documented, and I am happy to have
discovered it now in my unit tests, rather than during later system tests
with the entire application.

On Tue, Sep 25, 2007 at 03:52:35PM -0400, Benjamin Henry wrote:
&gt;<i> So, is it necessary that you start and stop the reactor to run the tests
</I>&gt;<i> in your code?  Why not make each test a callback?
</I>
No, not necessary. I am manually chaining my tests together as you
suggest.

It works OK, but from unittest's perspective, I now have only one
testcase, with everything bundled into a single reactor.run(). There are
some nice things about having multiple tests inside a unittest.TestCase,
such as not having every test that uses the reactor coupled together,
but I can do without this niceties.

Cheers,
Sam



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016081.html">[Twisted-Python] reactor.stop() doesn't stop the select reactor?
</A></li>
	<LI>Next message: <A HREF="016083.html">[Twisted-Python] reactor.stop() doesn't stop the select reactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16082">[ date ]</a>
              <a href="thread.html#16082">[ thread ]</a>
              <a href="subject.html#16082">[ subject ]</a>
              <a href="author.html#16082">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
