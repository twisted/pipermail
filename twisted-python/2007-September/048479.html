<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Wrapping a Perspective Broker remote object	with a blocking API
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Wrapping%20a%20Perspective%20Broker%20remote%20object%0A%09with%20a%20blocking%20API&In-Reply-To=%3C20070904160828.8162.1303691561.divmod.quotient.3617%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048478.html">
   <LINK REL="Next"  HREF="048481.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Wrapping a Perspective Broker remote object	with a blocking API</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Wrapping%20a%20Perspective%20Broker%20remote%20object%0A%09with%20a%20blocking%20API&In-Reply-To=%3C20070904160828.8162.1303691561.divmod.quotient.3617%40ohm%3E"
       TITLE="[Twisted-Python] Wrapping a Perspective Broker remote object	with a blocking API">exarkun at divmod.com
       </A><BR>
    <I>Tue Sep  4 10:08:28 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048478.html">[Twisted-Python] Wrapping a Perspective Broker remote object with	a blocking API
</A></li>
        <LI>Next message (by thread): <A HREF="048481.html">[Twisted-Python] Wrapping a Perspective Broker remote object with	a blocking API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48479">[ date ]</a>
              <a href="thread.html#48479">[ thread ]</a>
              <a href="subject.html#48479">[ subject ]</a>
              <a href="author.html#48479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 4 Sep 2007 09:38:12 -0600, Brian Granger &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ellisonbg.net at gmail.com</A>&gt; wrote:
&gt;&gt;<i> I'm not sure why you're trying to do this at all, instead of just using
</I>&gt;&gt;<i> Twisted in a single-threaded manner.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>This is a usage case that we run into regularly.  We have a lot of PB
</I>&gt;<i>based servers, but sometimes people want to use a client to them from
</I>&gt;<i>an interactive Python or IPython prompt.  At that point you have to
</I>&gt;<i>run the reactor in a different thread.
</I>
Not true, in fact.  See twisted/conch/stdio.py, for example.  I don't know
what the Twisted/IPython integration code ended up looking like (or if it
was ever taken to a satisfactory &quot;completion&quot; point) but I don't think it
is necessary to have multiple threads for that use case, either.

&gt;<i>But, I have never seen a
</I>&gt;<i>method of putting a blocking API on top of such a client that was
</I>&gt;<i>_really_ thread safe.  I have seen a few approaches that seem to work,
</I>&gt;<i>but that are clearly non-thread safe.  I would love to see a robust
</I>&gt;<i>solution for this problem though - one that could be fully trusted.
</I>
Why isn't a solution based on Twisted's thread-safe event-posting API 
(reactor.callFromThread) and the thread-safe event-posting API of whatever
other thing is being integrated with &quot;really&quot; thread-safe?  Sure, you can
write programs which will deadlock as a result of application-level bugs
where one thread is blocked on a request and the other thread needs some
information from it before the request can be satisfied, but this is inherent
to wanting to drive an asynchronous API synchronously.  Aside from it, I
don't think there are any problems with what I described above.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048478.html">[Twisted-Python] Wrapping a Perspective Broker remote object with	a blocking API
</A></li>
	<LI>Next message (by thread): <A HREF="048481.html">[Twisted-Python] Wrapping a Perspective Broker remote object with	a blocking API
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48479">[ date ]</a>
              <a href="thread.html#48479">[ thread ]</a>
              <a href="subject.html#48479">[ subject ]</a>
              <a href="author.html#48479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
