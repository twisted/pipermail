<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Returning a DeferredList?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Returning%20a%20DeferredList%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017999.html">
   <LINK REL="Next"  HREF="018001.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Returning a DeferredList?</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Returning%20a%20DeferredList%3F&In-Reply-To="
       TITLE="[Twisted-Python] Returning a DeferredList?">terry at jon.es
       </A><BR>
    <I>Mon Jun 30 18:20:48 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017999.html">[Twisted-Python] Returning a DeferredList?
</A></li>
        <LI>Next message: <A HREF="018001.html">[Twisted-Python] Returning a DeferredList?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18000">[ date ]</a>
              <a href="thread.html#18000">[ thread ]</a>
              <a href="subject.html#18000">[ subject ]</a>
              <a href="author.html#18000">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;&gt;&gt;&gt;<i> &quot;Nathan&quot; == Nathan  &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">nathan.stocks at gmail.com</A>&gt; writes:
</I>
Nathan&gt; I regularly use the return values of deferreds to simulate
Nathan&gt; synchronous behaviour like this:

[snip]

Nathan&gt; So now I'm trying to do the same thing with DeferredList's, but
Nathan&gt; apparently the semantics aren't the same.  Here's some actual
Nathan&gt; runnable sample code trying to use the DeferredList:

Hi Nathan

You're not using deferreds properly. In the simple/typical case, when you
call a function that returns a deferred, you will want to add (at least) a
callback to that deferred. The callback then gets called with the value
that is being passed down the callback chain.

Change your code to the below and it works.

Your original code appears to work only because you're testing a deferred
result in a Boolean context, which takes you to the true part of your
if.  You need to add call/errbacks to the deferred there too.

Terry

---

from twisted.internet import reactor, defer

def callback_function(results):
   return &quot;(--&gt; This is the value that I want to get into retval! &lt;--)&quot;

def make_a_list():
   deferred1 = defer.Deferred()
   deferred2 = defer.Deferred()
   dl = defer.DeferredList([deferred1, deferred2])
   dl.addCallback(callback_function)
   deferred1.callback('one')
   deferred2.callback('two')
   return dl

def test():
    def cb(val):
        print &quot;retval is:&quot;, val
    make_a_list().addCallback(cb)

reactor.callWhenRunning(test)
reactor.callLater(2.0, reactor.stop)
reactor.run()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017999.html">[Twisted-Python] Returning a DeferredList?
</A></li>
	<LI>Next message: <A HREF="018001.html">[Twisted-Python] Returning a DeferredList?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18000">[ date ]</a>
              <a href="thread.html#18000">[ thread ]</a>
              <a href="subject.html#18000">[ subject ]</a>
              <a href="author.html#18000">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
