<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted, twistd and logging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%2C%20twistd%20and%20logging&In-Reply-To=20080619162120.5b0a781f%40ws35.commsecure.com.au">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017932.html">
   <LINK REL="Next"  HREF="017940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted, twistd and logging</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%2C%20twistd%20and%20logging&In-Reply-To=20080619162120.5b0a781f%40ws35.commsecure.com.au"
       TITLE="[Twisted-Python] Twisted, twistd and logging">phil at bubblehouse.org
       </A><BR>
    <I>Thu Jun 19 10:48:30 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017932.html">[Twisted-Python] Twisted, twistd and logging
</A></li>
        <LI>Next message: <A HREF="017940.html">[Twisted-Python] Twisted, twistd and logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17936">[ date ]</a>
              <a href="thread.html#17936">[ thread ]</a>
              <a href="subject.html#17936">[ subject ]</a>
              <a href="author.html#17936">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jun 19, 2008, at 2:21 AM, Tim Allen wrote:
&gt;<i> My second thought was to use twisted.python.log, but that brings its
</I>&gt;<i> own set of problems:
</I>&gt;<i>
</I>&gt;<i> 1. twisted.python.syslog isn't very... complete. For starters, it
</I>&gt;<i>    doesn't let you specify the syslog facility, and even if it did,
</I>&gt;<i>    twistd would need to be extended to support it.
</I>
It's true that the syslog support is very experimental at this point,  
but what would need to be changed about twistd to support the  
necessary development?

I think the most likely scenario is that the standard logging code  
assumes logging will return immediately, but I feel like this could be  
worked around by having some kind of log queue that gets sent to  
syslog by some background thread (or better yet, a callLater pattern).

&gt;<i> 2. As has been discussed in the list archives, t.p.log doesn't support
</I>&gt;<i>    log-levels. While I can see glyph's point about the arbitraryness
</I>&gt;<i>    of fixed log-levels, I really do want to distinguish between
</I>&gt;<i>    &quot;forensic record of ordinary operation&quot; and &quot;Danger, Will  
</I>&gt;<i> Robinson!&quot;
</I>
t.p.log doesn't implicitly support log levels, but you can add  
arbitrary keywords to your call to log.msg. Then your observer can  
take care of routing log messages to the right places.

&gt;<i> I think the best way of solving my problems would be to:
</I>&gt;<i>
</I>&gt;<i> a) update t.p.syslog so that it supports a 'facility' parameter.
</I>&gt;<i> b) update t.p.syslog so that log-messages with 'isError' true are
</I>&gt;<i>    logged with the LOG_ALERT priority rather than the default.
</I>&gt;<i> c) update the Unix version of twistd to support a 'syslogFacility'
</I>&gt;<i>    command-line parameter.
</I>&gt;<i>
</I>&gt;<i> Would such a patch be accepted? If necessary, I could replace (b) with
</I>&gt;<i> a syslog-based LogObserver in my own code, but I'm keen to have (a)  
</I>&gt;<i> and
</I>&gt;<i> (c) in the Twisted code-base.
</I>
I can't speak to whether such a patch would be accepted, but I know I  
have a couple of projects I've wanted to use syslogging for, and it  
would be great to have a stable solution in Twisted. However, the core  
dev team is fairly well inundated, so while you're working on a patch/ 
review, you might consider investigating another option in parallel.

If you package your code separately and join the Twisted Community  
Code project on Launchpad, you can get your code out there and in  
front of eyeballs while you work on getting a patch accepted into  
Twisted. If you can draw a reasonable amount of user attention, this  
may help with both testing and review, and make it easier to get your  
patch into Twisted proper.

-phil


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017932.html">[Twisted-Python] Twisted, twistd and logging
</A></li>
	<LI>Next message: <A HREF="017940.html">[Twisted-Python] Twisted, twistd and logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17936">[ date ]</a>
              <a href="thread.html#17936">[ thread ]</a>
              <a href="subject.html#17936">[ subject ]</a>
              <a href="author.html#17936">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
