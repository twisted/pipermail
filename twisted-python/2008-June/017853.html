<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] CLOSE_WAIT (debian)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20CLOSE_WAIT%20%28debian%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017852.html">
   <LINK REL="Next"  HREF="017854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] CLOSE_WAIT (debian)</H1>
    <B>Josef Novak</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20CLOSE_WAIT%20%28debian%29&In-Reply-To="
       TITLE="[Twisted-Python] CLOSE_WAIT (debian)">josef.robert.novak at gmail.com
       </A><BR>
    <I>Thu Jun  5 01:49:44 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017852.html">[Twisted-Python] Re: Twisted Community Code
</A></li>
        <LI>Next message: <A HREF="017854.html">[Twisted-Python] Re: CLOSE_WAIT (debian)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17853">[ date ]</a>
              <a href="thread.html#17853">[ thread ]</a>
              <a href="subject.html#17853">[ subject ]</a>
              <a href="author.html#17853">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
  I have a fairly simple twisted daemon based on the starpy protocol,
which I am running in combination with the asterisk pbx.  I sometimes
this daemon accumulates CLOSE_WAIT connections in a rather
unpredictable fashion, which when stacked up eventually cause the
daemon to stop responding to new connections.

My understanding is that there is no default timeout for the
CLOSE_WAIT socket state, as per the relevant rfc standard, and that in
any netstat declares that CLOSE_WAIT indicates that the remote end of
the connection has shut down, and that it is now up to the local
application to finish closing the socket.

The implication is that there is something wrong with my application
code, however before posting the whole thing I'd like to know if there
are any cannonical reasons for this kind of issue being raised in
twisted applications.  For instance is this likely to occur when one
uses defertothread for blocking third party code, and the child
process spawned to handle this returns to find the parent process
already gone? ( e.g. my twisted app spawns for a new call from
asterisk, but the call instance is destroyed for some reason before
the defertothread that it executes returns?)

I'm having trouble reliably causing the issue, but it continues to pop
up, so any general information about regarding debugging twisted
applications would be of help.

Thanks!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017852.html">[Twisted-Python] Re: Twisted Community Code
</A></li>
	<LI>Next message: <A HREF="017854.html">[Twisted-Python] Re: CLOSE_WAIT (debian)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17853">[ date ]</a>
              <a href="thread.html#17853">[ thread ]</a>
              <a href="subject.html#17853">[ subject ]</a>
              <a href="author.html#17853">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
