<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Idiom for database access within	iterator/generator?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Idiom%20for%20database%20access%20within%0A%09iterator/generator%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017830.html">
   <LINK REL="Next"  HREF="017834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Idiom for database access within	iterator/generator?</H1>
    <B>Justin Warren</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Idiom%20for%20database%20access%20within%0A%09iterator/generator%3F&In-Reply-To="
       TITLE="[Twisted-Python] Idiom for database access within	iterator/generator?">daedalus at eigenmagic.com
       </A><BR>
    <I>Tue Jun  3 03:03:57 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="017830.html">[Twisted-Python] exceptions.SystemError: unknown opcode
</A></li>
        <LI>Next message: <A HREF="017834.html">[Twisted-Python] Idiom for database access within	iterator/generator?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17832">[ date ]</a>
              <a href="thread.html#17832">[ thread ]</a>
              <a href="subject.html#17832">[ subject ]</a>
              <a href="author.html#17832">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings twisted gurus!

I'm hoping someone with a better algorithmic brain than I could offer
some advice on a good way to do something in a twisty/pythonic way.

The pseudocode for what I want to do is:

for item in generator_that_fetches_rows_from_database:
	...
	do_stuff()
	...

where generator_that_fetches_rows_from_database is an object that uses
enterprise.adbapi (or anything else) to fetch rows from a database and
return them to the for..in.. loop.

Now, I'm probably looking at this from too much of a blocking code
perspective, rather than setting up a Deferred() chain of some sort, but
rather than hacking something functional but ugly, it occurs to me that
someone is bound to have done this before.

It would be nice if the database accessing object could fetch rows as
required, via cursors or whatever, rather than sucking an entire table
into memory and then doling out one row at a time... which is what I've
got working at the moment.

The morbidly curious can recoil in horror at the current code in the
SQLIterator class here:
<A HREF="http://modipy.seafelt.com/browser/trunk/lib/modipy/iterator.py">http://modipy.seafelt.com/browser/trunk/lib/modipy/iterator.py</A>

Any free clues?

-- 
Justin Warren &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">daedalus at eigenmagic.com</A>&gt;



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017830.html">[Twisted-Python] exceptions.SystemError: unknown opcode
</A></li>
	<LI>Next message: <A HREF="017834.html">[Twisted-Python] Idiom for database access within	iterator/generator?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17832">[ date ]</a>
              <a href="thread.html#17832">[ thread ]</a>
              <a href="subject.html#17832">[ subject ]</a>
              <a href="author.html#17832">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
