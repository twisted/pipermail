<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Issue with TLS failure modes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Issue%20with%20TLS%20failure%20modes&In-Reply-To=%3C12D690E1-76E7-46E1-9884-3AF9E95FD7AD%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064519.html">
   <LINK REL="Next"  HREF="064515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Issue with TLS failure modes</H1>
    <B>Robert DiFalco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Issue%20with%20TLS%20failure%20modes&In-Reply-To=%3C12D690E1-76E7-46E1-9884-3AF9E95FD7AD%40gmail.com%3E"
       TITLE="[Twisted-Python] Issue with TLS failure modes">robert.difalco at gmail.com
       </A><BR>
    <I>Wed Sep  5 07:39:58 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064519.html">[Twisted-Python] Keeping logger from snatching stdout?
</A></li>
        <LI>Next message (by thread): <A HREF="064515.html">[Twisted-Python] Issue with TLS failure modes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32053">[ date ]</a>
              <a href="thread.html#32053">[ thread ]</a>
              <a href="subject.html#32053">[ subject ]</a>
              <a href="author.html#32053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is the timeout the only way to handle this kind of TLS handshake error?

Sent from my iPhone

&gt;<i> On Aug 30, 2018, at 10:14 AM, Robert DiFalco &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">robert.difalco at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I'm having an issue properly handling TLS failure modes. For example consider the EchoServer and EchoClient code. If I use a TLS client with a TCP4 server, I do not get a handshake exception until I abort the connection. But I don't want to abort the connection unless I get a handshake error. 
</I>&gt;<i> 
</I>&gt;<i> What I'd like to do is to check the handshake status in my protocol before my client sends bytes to the server. I'd like my send message to be able to raise the &lt;class 'OpenSSL.SSL.Error'&gt;: [('SSL routines', 'ssl23_read', 'ssl handshake failure'). But for some reason it seems to get lost until I abort the connection. Does this sound familiar to anyone?
</I>&gt;<i> 
</I>&gt;<i> What I've done for now is setup a Timeout mixin so that after my client.send, if I do not get an ACK back (which my particular protocol does) within two minutes, I just abort the connection. This then calls connectionLost with the correct SSL.Error. But if it's in the error queue (and found during the course of abortConnection then isn't there a way to find it sooner? Like before my timeout and before I call send on the client protocol?
</I>&gt;<i> 
</I>&gt;<i> Thanks!
</I>
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064519.html">[Twisted-Python] Keeping logger from snatching stdout?
</A></li>
	<LI>Next message (by thread): <A HREF="064515.html">[Twisted-Python] Issue with TLS failure modes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32053">[ date ]</a>
              <a href="thread.html#32053">[ thread ]</a>
              <a href="subject.html#32053">[ subject ]</a>
              <a href="author.html#32053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
