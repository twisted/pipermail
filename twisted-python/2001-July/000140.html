<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Configuration, Persistance and Version Control
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Configuration%2C%20Persistance%20and%20Version%20Control&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000139.html">
   <LINK REL="Next"  HREF="000141.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Configuration, Persistance and Version Control</H1>
    <B>Kevin Turner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Configuration%2C%20Persistance%20and%20Version%20Control&In-Reply-To="
       TITLE="[Twisted-Python] Configuration, Persistance and Version Control">acapnotic at twistedmatrix.com
       </A><BR>
    <I>Sat Jul 28 15:26:08 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000139.html">[Twisted-Python] tcp.Port
</A></li>
        <LI>Next message: <A HREF="000141.html">[Twisted-Python] Configuration, Persistance and Version Control
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#140">[ date ]</a>
              <a href="thread.html#140">[ thread ]</a>
              <a href="subject.html#140">[ subject ]</a>
              <a href="author.html#140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So, Tv and itamar were on channel today, asking about Twisted
philosophy, persistance, and configurability.  Lacking the
presence of anyone closer to the pure Twisted light, I tried
to be a good little minion and make the case...  But since
I'm the guy who doesn't quite believe in .spl files, I wasn't
able to be terribly convincing.

And now I could try to play his side of the argument with you guys,
but ya know, it'd be so much easier for me to just let his words do
the talking.  Scrollback excerpts:

&lt;itamar|home&gt; anyone who knows how twisted's config mechanism works?
&lt;itamar|home&gt; typically, glyph is on 24 hours a day unless I
          actually want to talk to a twisted developer
&lt;Acapnotic&gt; Wait, Twisted has a config mechanism?
&lt;itamar|home&gt; well, its server are persistent
&lt;Acapnotic&gt; right
&lt;itamar|home&gt; you coifgure them and then can pickle them to disk
&lt;Acapnotic&gt; right
&lt;itamar|home&gt; my question is: how do I configure them?
&lt;itamar|home&gt; can this mechanism be used with other software
          packages?
&lt;Acapnotic&gt; You load them up, set them, and re-pickle them.  You
          can also set them through the interactive python interface on the
          telnet server, say
&lt;Acapnotic&gt; Now somehow, Glyph claims that this is easier than
          having configuration files.
&lt;Acapnotic&gt; I am not yet convinced of that, however.
&lt;itamar|home&gt; I am
&lt;itamar|home&gt; my software right now needs either something like
          that or an XML config file
&lt;itamar|home&gt; which'll end up being a pickle equivalent anyway, so
          there's no point

[...]

&lt;Acapnotic&gt; itamar: Well, so far as I've been able to tell, there's
          not overmuch magic there.  'mkfooserver' just creates an instance
          of a server object and pickle.dumps it, twistd just pickle.loads it
          and invokes its the run() method.
&lt;itamar|home&gt; Acapnotic: well, my configs are pretty complex
&lt;Tv&gt; Acapnotic: But all that does is make your &quot;config settings&quot;
          into &quot;command line settings&quot;.
&lt;Tv&gt; I don't see it making things very easy.
&lt;Tv&gt; And think about version upgrades.

[...]

&lt;Tv&gt; I see trouble with the approach; mostly losing the unix
          ubiquitousness (sp?). I can grep my config files; I store them in
          CVS.
&lt;Tv&gt; DavidC_: You want every program to contain some UI or command
          mechanism to fully configure it.
&lt;Tv&gt; There's a lot of things I'd wish someone would spell out about
          twisted. One thing is &quot;how do I version control my configuration?&quot;
&lt;Tv&gt; And don't give a trivial example..
&lt;Tv&gt; I have multi-hundred-line config files here.
&lt;Tv&gt; Shared between n hosts, via CVS.
&lt;Tv&gt; I'd love to hear more of the twisted philosophy..

[...]

&lt;Tv&gt; Personally, I have _needed_ programmability in config files
          many times.

[...]

&lt;Tv&gt; Acapnotic: Oh, I like version control. I wish I could put more
          things into it.
&lt;Tv&gt; Have you ever screwed up a config file?
&lt;Tv&gt; Have you ever downgraded something, and found out it won't
          understand the new config file, and had to recreate the config to
          match the older version?
&lt;Tv&gt; The same reasons you version control source code.

&lt;Acapnotic&gt; tv: you should post to the list at
          <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
&lt;Tv&gt; Acapnotic: I'm not following any more lists until I have
          migrated my mail to another domain :)
&lt;Acapnotic&gt; tv: bah, you don't have to follow it, just post ;)

[...]

&lt;Acapnotic&gt; Tv: so if you want programmable config, is there a
          problem with just using python?  In which case your configuration
          process is a script that does &quot;app = pickle.load(...) app['web'].
          port = 8080 ; app.append(ChickenServer()) ; ... ; pickle.dump(app, 
          ...) ?
&lt;Tv&gt; Acapnotic: That may very well be what I'd do. But then the
          mechanism needs to support _both_ getting config programmatically
          and state from pickle, at the same time.
&lt;Acapnotic&gt; Well, if I follow this train, there is only the state
          of the application, since it is persistant.  That state may be
          changed or examined programmaticly.
&lt;Tv&gt; I see something beautiful there, but..
&lt;Tv&gt; noone has yet explained persistence to me well enough to
          convince me.
&lt;Acapnotic&gt; but what happens when you upgrade?  heh.
&lt;Tv&gt; What if a buggy program corrupts its state?
&lt;Tv&gt; Then you lose your config file also.
&lt;Tv&gt; There needs to be something else.
&lt;Tv&gt; Something that is less volatile.
&lt;DavidC_&gt; what do you mean? both config and state are the same
          thing.
&lt;Tv&gt; No.
&lt;Tv&gt; config changes when *I* say it changes.
&lt;itamar|home&gt; nah, config is parsed and then &quot;rendered&quot; into state
&lt;Tv&gt; program can change it's state as it wants.
&lt;Tv&gt; Any bug in program must never change the port to bind to.
&lt;Tv&gt; :)
&lt;Tv&gt; I see config as sort of a factory for initial program states,
          if you want to put it that way.
&lt;itamar|home&gt; lets say by mistake someone does &quot;del serverInstace.
          port&quot;
&lt;itamar|home&gt; and then shuts down the server
&lt;itamar|home&gt; the pickled state is now wrong
&lt;DavidC_&gt; well that would be a bug.
&lt;itamar|home&gt; the point is that if you have an external, version
          controleld config file
&lt;itamar|home&gt; these bugs don't bite you, or even if they do at
          least they don't effect the configuration




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000139.html">[Twisted-Python] tcp.Port
</A></li>
	<LI>Next message: <A HREF="000141.html">[Twisted-Python] Configuration, Persistance and Version Control
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#140">[ date ]</a>
              <a href="thread.html#140">[ thread ]</a>
              <a href="subject.html#140">[ subject ]</a>
              <a href="author.html#140">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
