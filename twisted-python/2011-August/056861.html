<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A problem with very long blocking thread in	Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20problem%20with%20very%20long%20blocking%20thread%20in%0A%09Twisted&In-Reply-To=%3CCAFPU7%3DtyOHyk9ugDeUexHcBJPoKk4e_HqJhYsXU4_2_RvE3m6Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056860.html">
   <LINK REL="Next"  HREF="056862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A problem with very long blocking thread in	Twisted</H1>
    <B>Thorne, Stephen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20problem%20with%20very%20long%20blocking%20thread%20in%0A%09Twisted&In-Reply-To=%3CCAFPU7%3DtyOHyk9ugDeUexHcBJPoKk4e_HqJhYsXU4_2_RvE3m6Q%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] A problem with very long blocking thread in	Twisted">stephen at thorne.id.au
       </A><BR>
    <I>Wed Aug 10 09:58:26 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056860.html">[Twisted-Python] A problem with very long blocking thread in Twisted
</A></li>
        <LI>Next message (by thread): <A HREF="056862.html">[Twisted-Python] Flush socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56861">[ date ]</a>
              <a href="thread.html#56861">[ thread ]</a>
              <a href="subject.html#56861">[ subject ]</a>
              <a href="author.html#56861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 10, 2011 at 15:35, Itamar Turner-Trauring
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
&gt;&gt;<i> To solve this problem, I'd like to set threads as daemon. So that all
</I>&gt;&gt;<i> related threads are terminated when main loop is interrupted. Any idea on
</I>&gt;&gt;<i> this problem will be appreciated.
</I>&gt;<i>
</I>&gt;<i> I've seen daemon threads causing core dumps on shutdown. Better to either
</I>&gt;<i> use a library that doesn't use threads (which as mentioned is possible in
</I>&gt;<i> this case), or have a timeout on your blocking wait.
</I>
When the choice is between aborting a thread and potentially dumping
core, and not exiting, I'll take dumping core.

In order to implement this in twisted, you need to subclass ThreadPool
and override the method that creates the Thread object, or
alternatively, don't use reactor.callInThread(). If you can substitute
a threadpool for txAMPQ then that will probably be the cleanest way.

Stephen.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056860.html">[Twisted-Python] A problem with very long blocking thread in Twisted
</A></li>
	<LI>Next message (by thread): <A HREF="056862.html">[Twisted-Python] Flush socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56861">[ date ]</a>
              <a href="thread.html#56861">[ thread ]</a>
              <a href="subject.html#56861">[ subject ]</a>
              <a href="author.html#56861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
