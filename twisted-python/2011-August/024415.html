<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [ANN] Turtl 0.1.1 throttler released
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%5BANN%5D%20Turtl%200.1.1%20throttler%20released&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024414.html">
   <LINK REL="Next"  HREF="024416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [ANN] Turtl 0.1.1 throttler released</H1>
    <B>Valentino Volonghi</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%5BANN%5D%20Turtl%200.1.1%20throttler%20released&In-Reply-To="
       TITLE="[Twisted-Python] [ANN] Turtl 0.1.1 throttler released">dialtone at gmail.com
       </A><BR>
    <I>Tue Aug 16 15:35:04 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024414.html">[Twisted-Python] 11.0 in PPA
</A></li>
        <LI>Next message: <A HREF="024416.html">[Twisted-Python] [ANN] Turtl 0.1.1 throttler released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24415">[ date ]</a>
              <a href="thread.html#24415">[ thread ]</a>
              <a href="subject.html#24415">[ subject ]</a>
              <a href="author.html#24415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Turtl is an HTTP proxy whose purpose is to throttle connections to
specific hostnames to avoid breaking terms of usage of those API
providers (like del.icio.us, technorati and so on).

At the core of turtl is a throttling deferred that works in a similar way as DeferredSemaphore() except that it will enforce also a rate (N calls every M seconds) at which deferreds added to it are fired.

In the past few weeks it's been improved a couple obscure bugs have been ironed out. It's been running as a proxy for a couple of years and recently we started using it as a crawler rate limiter.

Source code lives on bitbucket: <A HREF="https://bitbucket.org/adroll/turtl/overview">https://bitbucket.org/adroll/turtl/overview</A>

Here's a small example of its usage:

import time
from twisted.internet import reactor, defer
from twisted.protocols.policies import WrappingFactory
from twisted.web import client, server, resource
from turtl import engine

throttle = engine.ThrottlingDeferred(concurrency=1, calls=2, interval=1)

class FakeResource(resource.Resource):
    isLeaf = True
    def render(self, request):
        return &quot;hello&quot;

def setupServer():
    site = server.Site(FakeResource())
    wrapper = WrappingFactory(site)
    port = reactor.listenTCP(0, wrapper, interface=&quot;127.0.0.1&quot;)
    portno = port.getHost().port
    return portno

def stop(_):
    return reactor.stop()

def makeUrl(port):
    return &quot;<A HREF="http://localhost:%s/&quot;">http://localhost:%s/&quot;</A> % (port)

def prinl(page):
    print time.time(), page

port = setupServer()
url = makeUrl(port)
defer.DeferredList([throttle.run(client.getPage, url).addBoth(prinl) for i in xrange(1000)]).addBoth(stop)
reactor.run()


-- 
Valentino Volonghi
<A HREF="http://www.adroll.com">http://www.adroll.com</A>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024414.html">[Twisted-Python] 11.0 in PPA
</A></li>
	<LI>Next message: <A HREF="024416.html">[Twisted-Python] [ANN] Turtl 0.1.1 throttler released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24415">[ date ]</a>
              <a href="thread.html#24415">[ thread ]</a>
              <a href="subject.html#24415">[ subject ]</a>
              <a href="author.html#24415">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
