<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] RPC design questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RPC%20design%20questions&In-Reply-To=%3C634914A010D0B943A035D226786325D422C0D5D142%40EXVMBX020-12.exch020.serverdata.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056924.html">
   <LINK REL="Next"  HREF="056929.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] RPC design questions</H1>
    <B>Tobias Oberstein</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RPC%20design%20questions&In-Reply-To=%3C634914A010D0B943A035D226786325D422C0D5D142%40EXVMBX020-12.exch020.serverdata.net%3E"
       TITLE="[Twisted-Python] RPC design questions">tobias.oberstein at tavendo.de
       </A><BR>
    <I>Tue Aug 23 13:13:48 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056924.html">[Twisted-Python] RPC design questions
</A></li>
        <LI>Next message (by thread): <A HREF="056929.html">[Twisted-Python] Twisted vs jQuery Deferreds (was Re: RPC design questions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56925">[ date ]</a>
              <a href="thread.html#56925">[ thread ]</a>
              <a href="subject.html#56925">[ subject ]</a>
              <a href="author.html#56925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for your advice .. that's what I was looking for;)

Makes sense, I'll stick to your advice, kick the subclassing approach and the stuff with the reordering version rcall().

That leaves &quot;partial&quot; and &quot;lambda&quot;

      # Option 1 : prints 31
      d2 = self.call(&quot;square&quot;, 6).addCallback(lambda res: self.call(&quot;sub&quot;, res, 5)).addCallback(self.show)

      # Option 3 : prints -31
      d4 = self.call(&quot;square&quot;, 6).addCallback(partial(self.call, &quot;sub&quot;, 5)).addCallback(self.show)

Lambda is the most general, since it can insert the previous deferred's result anywhere in the next call.
Partial only simulates append result to end of args of next call.
But lambda is also most verbose.

I'll sleep one night and then see if I document and endorse both or only lambda.

Obviously, I can't hinder anyone using both. Built in stuff.

Thanks again,
Tobias



Von: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A> [mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>] Im Auftrag von Glyph Lefkowitz
Gesendet: Dienstag, 23. August 2011 20:30
An: Twisted general discussion
Betreff: Re: [Twisted-Python] RPC design questions


On Aug 23, 2011, at 10:37 AM, Tobias Oberstein wrote:


class AutobahnDeferred(Deferred):
  def call(self, *args):
     return self.addCallback(self.protocol.rcall, *args)

Pro:    most terse
Con:    only supports single callback no errback


Con: subclassing in general is a bad idea.  Subclassing Deferred is an even worse idea.  What if Deferred one day gets a new method called 'call' that does something different?  Your code would all break.

Anything why I shouldn't do?

Providing three different ways to do the same thing just so that you can use different syntax depending on your mood is a recipe for making your code hard to read.  Pick one style, stick to it as much as possible - consistency is more important than the benefits of any one particular style :).

(Except the subclassing one.  Don't do that.)

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20110823/bd07c6cd/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056924.html">[Twisted-Python] RPC design questions
</A></li>
	<LI>Next message (by thread): <A HREF="056929.html">[Twisted-Python] Twisted vs jQuery Deferreds (was Re: RPC design questions)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56925">[ date ]</a>
              <a href="thread.html#56925">[ thread ]</a>
              <a href="subject.html#56925">[ subject ]</a>
              <a href="author.html#56925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
