<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problem with XMLRPC resource wrapped with guard	basic auth
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20with%20XMLRPC%20resource%20wrapped%20with%20guard%0A%09basic%20auth&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020803.html">
   <LINK REL="Next"  HREF="020609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problem with XMLRPC resource wrapped with guard	basic auth</H1>
    <B>asset</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20with%20XMLRPC%20resource%20wrapped%20with%20guard%0A%09basic%20auth&In-Reply-To="
       TITLE="[Twisted-Python] Problem with XMLRPC resource wrapped with guard	basic auth">asset at impactdamage.com
       </A><BR>
    <I>Tue Oct  6 20:00:19 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020803.html">[Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link
</A></li>
        <LI>Next message: <A HREF="020609.html">[Twisted-Python] Problem with XMLRPC resource wrapped with	guard	basic auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20608">[ date ]</a>
              <a href="thread.html#20608">[ thread ]</a>
              <a href="subject.html#20608">[ subject ]</a>
              <a href="author.html#20608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Using the current trunk r27366 (which is after #4014 fixed a related 
issue), I am having trouble with an implementation of web.guard wrapped 
XMLRPC.  This is a new test implementation to expose both a soap and xmlrpc 
interface.  SOAP works, but xmlrpc throws UnsupportedMethod POST.

Here is my test code, can anybody tell me if im doing something wrong?  
Again, /soap works, but /rpc2 freaks on the POST method being unavailable.

###### test-script.py

from zope.interface import implements
from twisted.internet import reactor
from twisted.web.resource import IResource, Resource
from twisted.web import server, guard
from twisted.cred.portal import IRealm
from twisted.python import log

from zope.interface import implements

from twisted.python import log
from twisted.internet import reactor
from twisted.web import server, resource, guard, xmlrpc, soap
from twisted.cred.portal import IRealm, Portal
from twisted.cred.checkers import InMemoryUsernamePasswordDatabaseDontUse

import sys

def getQuote():
    return &quot;Victory to the burgeois, you capitalist swine!&quot;

class XMLRPCQuoter(xmlrpc.XMLRPC):
    def xmlrpc_quote(self):
        return getQuote()

class SOAPQuoter(soap.SOAPPublisher):
    def soap_quote(self):
        return getQuote()

class WebServicesRealm(object):
    implements(IRealm)

    def requestAvatar(self, avatarId, mind, *interfaces):
        if resource.IResource in interfaces:
            node = resource.Resource()
            node.putChild(&quot;rpc2&quot;, XMLRPCQuoter())
            node.putChild(&quot;soap&quot;, SOAPQuoter())
            return resource.IResource, node, lambda: None
        raise NotImplementedError()

if __name__ == &quot;__main__&quot;:
   log.startLogging(sys.stdout)

   checker = [InMemoryUsernamePasswordDatabaseDontUse(foo='bar')]
   webServicesWrapper = 
guard.HTTPAuthSessionWrapper(Portal(WebServicesRealm(), checker),
                                             
[guard.BasicCredentialFactory(&quot;test&quot;)])

   reactor.listenTCP(9999, server.Site(webServicesWrapper))
   reactor.run()

######

<A HREF="http://localhost:9999/soap">http://localhost:9999/soap</A> *good*
<A HREF="http://localhost:9999/rpc2">http://localhost:9999/rpc2</A> *bad; POST isnt an allowed method*

Thanks,

TWKiel

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20091006/091dc8b1/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20091006/091dc8b1/attachment.htm</A> 
</PRE>


























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020803.html">[Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link
</A></li>
	<LI>Next message: <A HREF="020609.html">[Twisted-Python] Problem with XMLRPC resource wrapped with	guard	basic auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20608">[ date ]</a>
              <a href="thread.html#20608">[ thread ]</a>
              <a href="subject.html#20608">[ subject ]</a>
              <a href="author.html#20608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
