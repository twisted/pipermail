<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to chain deferred calls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20chain%20deferred%20calls&In-Reply-To=20091022201540.42317d4b9h5b720w%40216.129.205.5">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020749.html">
   <LINK REL="Next"  HREF="020750.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to chain deferred calls</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20chain%20deferred%20calls&In-Reply-To=20091022201540.42317d4b9h5b720w%40216.129.205.5"
       TITLE="[Twisted-Python] How to chain deferred calls">andrew at bemusement.org
       </A><BR>
    <I>Thu Oct 22 21:37:19 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020749.html">[Twisted-Python] How to chain deferred calls
</A></li>
        <LI>Next message: <A HREF="020750.html">[Twisted-Python] How to chain deferred calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20748">[ date ]</a>
              <a href="thread.html#20748">[ thread ]</a>
              <a href="subject.html#20748">[ subject ]</a>
              <a href="author.html#20748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">vitaly at synapticvision.com</A> wrote:
[...]
&gt;<i> def abc1(self):
</I>&gt;<i>      if t.test() is None:
</I>&gt;<i>        raise Exception(&quot;Error11&quot;)
</I>&gt;<i>      else:
</I>&gt;<i>        d = defer.Deferred()
</I>&gt;<i>        d.callback(1)
</I>&gt;<i>        return d
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> and basically, I've expected in case of exception  
</I>&gt;<i> self.handleFailure1() to be called, but I don't see it happen.
</I>
This is a function that either returns a Deferred or raises an exception.  This
isn't a Twisted issue, it's simply a Python one: in &#8220;func1().func2()&#8221;, if func1
raises an exception then func2 will not be invoked.  That's fundamental to what
raising an exception in Python means.

If you want to convert this to something that always returns a Deferred, you can
either rewrite it, e.g. using &#8220;return defer.fail(Exception('Error11'))&#8221;, or use
maybeDeferred which will intercept exceptions for you, e.g.:

    return (
        maybeDeferred(self.abc1).
        addErrback(self.handleFailure1).
	# etc...
	)

You can find maybeDeferred in the twisted.internet.defer module.

-Andrew.


</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020749.html">[Twisted-Python] How to chain deferred calls
</A></li>
	<LI>Next message: <A HREF="020750.html">[Twisted-Python] How to chain deferred calls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20748">[ date ]</a>
              <a href="thread.html#20748">[ thread ]</a>
              <a href="subject.html#20748">[ subject ]</a>
              <a href="author.html#20748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
