<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Lots and lots and lots and lots... of deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Lots%20and%20lots%20and%20lots%20and%20lots...%20of%20deferreds&In-Reply-To=EEF62EFB-31D9-493C-BF0E-BEB2654CA246%40integrateddevcorp.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020610.html">
   <LINK REL="Next"  HREF="020618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Lots and lots and lots and lots... of deferreds</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Lots%20and%20lots%20and%20lots%20and%20lots...%20of%20deferreds&In-Reply-To=EEF62EFB-31D9-493C-BF0E-BEB2654CA246%40integrateddevcorp.com"
       TITLE="[Twisted-Python] Lots and lots and lots and lots... of deferreds">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Oct  6 22:57:42 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020610.html">[Twisted-Python] Lots and lots and lots and lots... of deferreds
</A></li>
        <LI>Next message: <A HREF="020618.html">[Twisted-Python] Lots and lots and lots and lots... of deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20611">[ date ]</a>
              <a href="thread.html#20611">[ thread ]</a>
              <a href="subject.html#20611">[ subject ]</a>
              <a href="author.html#20611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Oct 6, 2009 at 10:40 PM, Steve Steiner (listsin) &lt;
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">listsin at integrateddevcorp.com</A>&gt; wrote:


&gt;<i>        Should I limit the number of &quot;in-flight&quot; pages?
</I>&gt;<i>
</I>
I'm not going to comment on that, because I don't know what your app is
doing or why it appears to be dying.  As you said, you didn't post code :).

However, you can experiment with it pretty easily using DeferredSemaphore:
<A HREF="http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.DeferredSemaphore.html">http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.defer.DeferredSemaphore.html</A>


&gt;<i>        Currently, I'm scanning sites that have upwards of 5000 pages and it
</I>&gt;<i> seems that, when I get too many deferred's in flight, the app
</I>&gt;<i> *appears* to crash.
</I>&gt;<i>
</I>&gt;<i>        I'm not sure whether it's actually going out to lunch or just
</I>&gt;<i> appears
</I>&gt;<i> that way and, before I go instrumenting the app to death, can anyone
</I>&gt;<i> tell me whether there is some sort of practical limit to how many &quot;in-
</I>&gt;<i> flight&quot; deferreds might start to cause issues, just due to the sheer
</I>&gt;<i> number?
</I>&gt;<i>
</I>
If your app is doing something strange that you don't understand, you should
instrument it until you understand it.  Regardless of any practical advice
you may receive as a temporary stopgap, there's always a chance that
something *else* is going wrong, and by reducing the number of concurrent
requests you're just decreasing its likelihood rather than properly fixing
it.

It's highly unlikely that it's actually the number of Deferreds.  A Deferred
is just a Python object, so if you've got the RAM to store them and their
associated callbacks, you should be fine.  It's more likely that it has
something to do with long callback chains, or hitting some kind of
file-descriptor limit (what version of Twisted are you using?) or perhaps
that 5000 pages is just a lot of pages to request and you might need to wait
a while.

Good luck,

-Glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20091006/c81a2093/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20091006/c81a2093/attachment.htm</A> 
</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020610.html">[Twisted-Python] Lots and lots and lots and lots... of deferreds
</A></li>
	<LI>Next message: <A HREF="020618.html">[Twisted-Python] Lots and lots and lots and lots... of deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20611">[ date ]</a>
              <a href="thread.html#20611">[ thread ]</a>
              <a href="subject.html#20611">[ subject ]</a>
              <a href="author.html#20611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
