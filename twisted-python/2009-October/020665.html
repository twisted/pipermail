<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reactor.run() do not return after	reactor.stop()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20reactor.run%28%29%20do%20not%20return%20after%0A%09reactor.stop%28%29&In-Reply-To=cb137f960910100950h41eae4ackfbefd7332904ce52%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020664.html">
   <LINK REL="Next"  HREF="020666.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reactor.run() do not return after	reactor.stop()</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20reactor.run%28%29%20do%20not%20return%20after%0A%09reactor.stop%28%29&In-Reply-To=cb137f960910100950h41eae4ackfbefd7332904ce52%40mail.gmail.com"
       TITLE="[Twisted-Python] reactor.run() do not return after	reactor.stop()">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Oct 10 15:47:00 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020664.html">[Twisted-Python] reactor.run() do not return	after	reactor.stop()
</A></li>
        <LI>Next message: <A HREF="020666.html">[Twisted-Python] reactor.run() do not return after	reactor.stop()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20665">[ date ]</a>
              <a href="thread.html#20665">[ thread ]</a>
              <a href="subject.html#20665">[ subject ]</a>
              <a href="author.html#20665">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Oct 10, 2009 at 12:50 PM, Stanislav Yudin &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">decvar at gmail.com</A>&gt; wrote:

&gt;<i> Thanks, but how can I pass control back to calling code after starting the
</I>&gt;<i> reactor? Or the idea is to run it in separate thread? I understand that main
</I>&gt;<i> idea on twisted is async processing, but this time I need to block the
</I>&gt;<i> calling code until response is received.
</I>

The way that you want to do this is to run all of your Twisted code in a
thread, and make calls into it from a different thread using one of the
utility APIs for that purpose.  See, for example, &lt;
<A HREF="http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.threads.html#blockingCallFromThread">http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.threads.html#blockingCallFromThread</A>&gt;.
 Remember not to touch any Twisted APIs directly from the non-Twisted
thread.  Leave the Twisted I/O thread running for the entire lifetime of
your process; don't start and stop it repeatedly.

For what it's worth, you should really look into restructuring your
application so that this kind of hack is not necessary.  It will almost
certainly have hard-to-debug unforseen consequences.  There's nothing
fundamentally broken here, but it is much harder to keep track of and get
right than you think it will be, just based on the fact that many many
people who try this strategy end up giving up on it.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20091010/f73ec020/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20091010/f73ec020/attachment.htm</A> 
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020664.html">[Twisted-Python] reactor.run() do not return	after	reactor.stop()
</A></li>
	<LI>Next message: <A HREF="020666.html">[Twisted-Python] reactor.run() do not return after	reactor.stop()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20665">[ date ]</a>
              <a href="thread.html#20665">[ thread ]</a>
              <a href="subject.html#20665">[ subject ]</a>
              <a href="author.html#20665">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
