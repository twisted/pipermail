<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20HTTPClientFactory%27s%20deferred%20never%20finishing%0A%09download%20on%20.vcf%20%28vcard%20file%29%20link&In-Reply-To=95bb10690910100434y7808a2a4v1955b9f4e58efd83%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020658.html">
   <LINK REL="Next"  HREF="020668.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link</H1>
    <B>Steve Steiner (listsin)</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20HTTPClientFactory%27s%20deferred%20never%20finishing%0A%09download%20on%20.vcf%20%28vcard%20file%29%20link&In-Reply-To=95bb10690910100434y7808a2a4v1955b9f4e58efd83%40mail.gmail.com"
       TITLE="[Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link">listsin at integrateddevcorp.com
       </A><BR>
    <I>Sat Oct 10 16:09:10 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020658.html">[Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link
</A></li>
        <LI>Next message: <A HREF="020668.html">[Twisted-Python] HTTPClientFactory's deferred never	finishing	download on .vcf (vcard file) link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20667">[ date ]</a>
              <a href="thread.html#20667">[ thread ]</a>
              <a href="subject.html#20667">[ subject ]</a>
              <a href="author.html#20667">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 10, 2009, at 7:34 AM, Reza Lotun wrote:

&gt;&gt;<i> I'm not quite sure what you mean. Are you talking about web.client or
</I>&gt;<i> web.server?
</I>
Web client.  I was having trouble with a particular URL which happened  
to be a download URL and wanted to see what the request and response  
objects looked like and was trying to find where I could examine  
them.  In the code I posted before, we were creating an  
HTTPClientFactory, then snagging the deferred.  I've simplified that  
by just using client.getPage().  The advantage of the  
HTTPClientFactory approach is that you can get at the response_headers.

&gt;<i> There is a new twisted.web client implementation in the works which  
</I>&gt;<i> will hopefully be ready for trunk in the near future, and which  
</I>&gt;<i> should provide nearly the same functionality offered by urllib2 (or  
</I>&gt;<i> more).
</I>
Where might that be hiding?  I'd love to have something that does  
deferreds like Twisted and also implements all of urllib2.  I find the  
info() from urlopen() particularly helpful when debugging issues like  
this.

&gt;&gt;<i> I finally figured out that it was a stupid string formatting bug in  
</I>&gt;&gt;<i> the code
</I>&gt;&gt;<i> that was being echoed by Twisted but swallowed by the &quot;Grand  
</I>&gt;&gt;<i> Catcher of all
</I>&gt;&gt;<i> Things Exception&quot; in Twisted..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Once I found and fixed that, everything works fine -- until the  
</I>&gt;&gt;<i> next time.
</I>&gt;<i>
</I>&gt;<i> Exceptions shouldn't be swallowed by twisted. If you simply attach
</I>&gt;<i> errBacks then you'll get the exception and full traceback. It really
</I>&gt;<i> isn't that bad at all - I thought it looked crazy when I first
</I>&gt;<i> started, but all the information is there to debug, etc.
</I>
Yes, the problem was in my mis-reading of the info in my errback.   
Unfortunately, the way the logging is set up in this particular code,  
logging.debug() returns 10 zillion times too much repetitive  
information and it makes it hard to wade through to find the relevant  
info (like the errback's output I was missing).

Thanks again for your help with this and I'd love to know more about  
this new urllib2 type module for Twisted.

Thanks,

S



</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020658.html">[Twisted-Python] HTTPClientFactory's deferred never finishing	download on .vcf (vcard file) link
</A></li>
	<LI>Next message: <A HREF="020668.html">[Twisted-Python] HTTPClientFactory's deferred never	finishing	download on .vcf (vcard file) link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20667">[ date ]</a>
              <a href="thread.html#20667">[ thread ]</a>
              <a href="subject.html#20667">[ subject ]</a>
              <a href="author.html#20667">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
