<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Logging to both console and file (using	twisted logging API)?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Logging%20to%20both%20console%20and%20file%20%28using%0A%09twisted%20logging%20API%29%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020787.html">
   <LINK REL="Next"  HREF="020790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Logging to both console and file (using	twisted logging API)?</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Logging%20to%20both%20console%20and%20file%20%28using%0A%09twisted%20logging%20API%29%3F&In-Reply-To="
       TITLE="[Twisted-Python] Logging to both console and file (using	twisted logging API)?">db3l.net at gmail.com
       </A><BR>
    <I>Fri Oct 30 16:25:06 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020787.html">[Twisted-Python] Logging to both console and file (using twisted	logging API)?
</A></li>
        <LI>Next message: <A HREF="020790.html">[Twisted-Python] Can browse,	but getPage() fails on localhost address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20808">[ date ]</a>
              <a href="thread.html#20808">[ thread ]</a>
              <a href="subject.html#20808">[ subject ]</a>
              <a href="author.html#20808">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>naman jain &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">namanvit at gmail.com</A>&gt; writes:

&gt;<i> I wanted to log in a file and keep the console also going with it.
</I>
I can read this as either:

  * Keep file logs and stdout/console completely separate, or
  * File gets explicit logs and copies of stdout, but stdout also goes to
    console as well.

The latter is something I'd more commonly do, but the former is what
you explain further below with your rules.

&gt;<i> I am using
</I>&gt;<i> log.startLogging(open(logname, 'w'))
</I>&gt;<i>
</I>&gt;<i> whatever documentation I could find about this API, it suggested me to pass
</I>&gt;<i> setStdout=False(in order to keep stdout away from putting into log)
</I>&gt;<i> somewhere in the startlogging function.
</I>&gt;<i>
</I>&gt;<i> Something like this I tried:
</I>&gt;<i> log.startLogging(sys.stdout,setStdout=False)
</I>
Why did you switch to sys.stdout here?  While this will prevent
sys.stdout and sys.stderr from being redirected, it will use
sys.stdout for any log.msg() calls, so nothing would end up in your
log file.

&gt;<i> Doesnt help in solving the problem of getting both things:
</I>&gt;<i>
</I>&gt;<i> Requirement:
</I>&gt;<i> log.msg(&quot;messageforlog&quot;)    -&gt; goes to log
</I>&gt;<i> print &quot;message for console&quot; -&gt; goes to console
</I>&gt;<i>
</I>&gt;<i> Could anyone give some ideas on this?
</I>
I think you had the right idea with setStdout, but changed more than
just that when you tested it.  If you use a call like
log.startLogging(open(logname, 'w'), setStdout=False) I believe you'll
get what you want.  Only calls to log.msg() will go to the file, and
stdout/stderr will be left unchanged.

-- David


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020787.html">[Twisted-Python] Logging to both console and file (using twisted	logging API)?
</A></li>
	<LI>Next message: <A HREF="020790.html">[Twisted-Python] Can browse,	but getPage() fails on localhost address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20808">[ date ]</a>
              <a href="thread.html#20808">[ thread ]</a>
              <a href="subject.html#20808">[ subject ]</a>
              <a href="author.html#20808">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
