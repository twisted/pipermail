<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Regarding Twisted Matrix
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Regarding%20Twisted%20Matrix&In-Reply-To=%3CE76556F2CE4A41DAA8F218E2EA68D6F5%40valeriy%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053287.html">
   <LINK REL="Next"  HREF="053278.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Regarding Twisted Matrix</H1>
    <B>Valeriy Pogrebitskiy</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Regarding%20Twisted%20Matrix&In-Reply-To=%3CE76556F2CE4A41DAA8F218E2EA68D6F5%40valeriy%3E"
       TITLE="[Twisted-Python] Regarding Twisted Matrix">vpogrebi at verizon.net
       </A><BR>
    <I>Tue Oct 27 08:49:57 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053287.html">[Twisted-Python] Regarding Twisted Matrix
</A></li>
        <LI>Next message (by thread): <A HREF="053278.html">[Twisted-Python] You guys are my heroes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53283">[ date ]</a>
              <a href="thread.html#53283">[ thread ]</a>
              <a href="subject.html#53283">[ subject ]</a>
              <a href="author.html#53283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Naman,

 

Using threads - is not a good way of testing Twisted code. Instead, you can
implement unit test script (using twisted.trial.unittest) - implementing
test versions of your Twisted server and/or client class(es). This can be
done by extending original class(es) and overwriting appropriate methods
(like connectionMade(), connectionLost(), dataReceived(), etc.) - by adding
deferreds and executing callbacks when given event occurs. These callbacks
would be methods within your unittest script (these deferreds would be
instantiated and added to these classes by the test script) - thus allowing
you to test client's or server's behavior, or track progress

 

Kind regards,

 

Valeriy Pogrebitskiy

Email: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">vpogrebi at iname.com</A>

 

 

-----Original Message-----
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>
[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>] On Behalf Of naman jain
Sent: Tuesday, October 27, 2009 1:45 AM
To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
Subject: [Twisted-Python] Regarding Twisted Matrix

 

Hi,

I have a client server model in twisted, where the server spawns a thread (
basically a test script in python that runs for about 20 mins)
I want to track the progress of the thread, and send the progress to the
client back

So, I write something like this in my server:

parent_conn, child_conn = Pipe()
thread = Process(target = start_test.main_func, args=(SCRIPT_PATH,
TEMP_OUTPUT_PATH, self.output_name, child_conn))
thread.start()

response = parent_conn.recv()
print response //prints like: initialization done
self.transport.write(response)
                

response = parent_conn.recv()
print response // configuration done
self.transport.write(response)

.
.
.
                
thread.join()


But the transport.write calls don't send at the same time. instead they wait
for the thread to finish (coz of thread.join) and then append all the
response and send it back; like &quot;initialization doneconfiguration
done...done&quot;
thereby defeating the purpose of creating a thread.

How do I give the control to the reactor to write the data back, and still
keep the thread running?
or is there any other way these kinda of progress can be tracked ?
I am kinda stuck with this :(

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20091027/ebc6eede/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053287.html">[Twisted-Python] Regarding Twisted Matrix
</A></li>
	<LI>Next message (by thread): <A HREF="053278.html">[Twisted-Python] You guys are my heroes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53283">[ date ]</a>
              <a href="thread.html#53283">[ thread ]</a>
              <a href="subject.html#53283">[ subject ]</a>
              <a href="author.html#53283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
