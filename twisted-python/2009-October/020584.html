<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted python usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted%20python%20usage&In-Reply-To=20091002134718.168532kl1nwogfwg%40216.129.205.5">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020583.html">
   <LINK REL="Next"  HREF="020585.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted python usage</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted%20python%20usage&In-Reply-To=20091002134718.168532kl1nwogfwg%40216.129.205.5"
       TITLE="[Twisted-Python] twisted python usage">exarkun at twistedmatrix.com
       </A><BR>
    <I>Fri Oct  2 14:00:25 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020583.html">[Twisted-Python] twisted python usage
</A></li>
        <LI>Next message: <A HREF="020585.html">[Twisted-Python] twisted python usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20584">[ date ]</a>
              <a href="thread.html#20584">[ thread ]</a>
              <a href="subject.html#20584">[ subject ]</a>
              <a href="author.html#20584">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05:47 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">vitaly at synapticvision.com</A> wrote:
&gt;<i>Quoting &quot;Glyph Lefkowitz&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;:
</I>&gt;&gt;<i>On Fri, Oct 2, 2009 at 12:47 PM, &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">vitaly at synapticvision.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>hi,
</I>&gt;&gt;<i>Hi, Vitaly!
</I>&gt;&gt;&gt;<i>I'm trying to accomplish to work couple of CLI commands without luck.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i><A HREF="http://twistedmatrix.com/projects/core/documentation/howto/options.htmland">http://twistedmatrix.com/projects/core/documentation/howto/options.htmland</A>
</I>&gt;&gt;&gt;<i>test/test_usage.py were not really helpful.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Why weren't these helpful?  To me, they seem to clearly explain 
</I>&gt;&gt;<i>everything
</I>&gt;&gt;<i>you're trying to do.
</I>&gt;<i>
</I>&gt;<i>First of all - I'm sorry, I've succeed to accomplish first two
</I>&gt;<i>commands with previous doc link partially: I can't read value per key
</I>&gt;<i>...
</I>&gt;<i>
</I>&gt;<i>Trying to follow the following snip, how can I read for example value
</I>&gt;<i>of key -m?
</I>&gt;<i>CLI: python test.py import -m 'abc321'
</I>&gt;<i>
</I>&gt;<i>from twisted.python import usage
</I>&gt;<i>import sys
</I>&gt;<i>
</I>&gt;<i>class ImportOptions(usage.Options):
</I>&gt;<i>     optParameters = [
</I>&gt;<i>         ['module',  'm', 1, None],
</I>&gt;<i>         ['vendor',  'v', None, None],
</I>&gt;<i>         ['release', 'r', None]
</I>&gt;<i>     ]
</I>
I think the idiomatic approach would be to add another method to this 
class to replace the &quot;doImport&quot; function below:

    def execute(self):
        print &quot;My -m option was&quot;, repr(self['module'])
&gt;<i>
</I>&gt;<i>class CheckoutOptions(usage.Options):
</I>&gt;<i>     optParameters = [['module', 'm', None, None], ['tag', 'r', None, 
</I>&gt;<i>None]]
</I>
And again here, replacing &quot;doCheckout&quot;:

    def execute(self):
        print &quot;*My* -m option was&quot;, repr(self['module'])
&gt;<i>
</I>&gt;<i>class Options(usage.Options):
</I>&gt;<i>     subCommands = [['import', None, ImportOptions, &quot;Do an Import&quot;],
</I>&gt;<i>                    ['checkout', None, CheckoutOptions, &quot;Do a 
</I>&gt;<i>Checkout&quot;]]
</I>&gt;<i>
</I>&gt;<i>     optParameters = [
</I>&gt;<i>         ['compression', 'z', 0, 'Use compression'],
</I>&gt;<i>         ['repository', 'r', None, 'Specify an alternate repository']
</I>&gt;<i>     ]
</I>&gt;<i>
</I>&gt;<i>def doImport():
</I>&gt;<i>     print &quot;TODO: how can I now read the value of key, let's say of -m 
</I>&gt;<i>key?&quot;
</I>&gt;<i>
</I>&gt;<i>def doCheckout():
</I>&gt;<i>     print &quot;TODO: same as doImport()&quot;
</I>&gt;<i>
</I>&gt;<i>config = Options()
</I>&gt;<i>try:
</I>&gt;<i>     config.parseOptions()
</I>&gt;<i>except usage.UsageError, errortext:
</I>&gt;<i>     print '%s: %s' % (sys.argv[0], errortext)
</I>&gt;<i>     print '%s: Try --help for usage details.' % (sys.argv[0])
</I>&gt;<i>     sys.exit(1)
</I>&gt;<i>
</I>&gt;<i>if config.subCommand == 'import':
</I>&gt;<i>     doImport(config.subOptions)
</I>&gt;<i>elif config.subCommand == 'checkout':
</I>&gt;<i>     doCheckout(config.subOptions)
</I>
Then replace this thing with this:

    config.subOptions.execute()

But the answer to your original question seems to just be 
&quot;options[optionName]&quot;.

Jean-Paul

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020583.html">[Twisted-Python] twisted python usage
</A></li>
	<LI>Next message: <A HREF="020585.html">[Twisted-Python] twisted python usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20584">[ date ]</a>
              <a href="thread.html#20584">[ thread ]</a>
              <a href="subject.html#20584">[ subject ]</a>
              <a href="author.html#20584">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
