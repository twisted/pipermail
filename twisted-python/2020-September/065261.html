<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Request for new Twisted release?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request%20for%20new%20Twisted%20release%3F&In-Reply-To=%3C5C81EF38-BB7E-465F-A585-1FF069753536%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065260.html">
   <LINK REL="Next"  HREF="065262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Request for new Twisted release?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request%20for%20new%20Twisted%20release%3F&In-Reply-To=%3C5C81EF38-BB7E-465F-A585-1FF069753536%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Request for new Twisted release?">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Sep 28 11:48:39 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065260.html">[Twisted-Python] Request for new Twisted release?
</A></li>
        <LI>Next message (by thread): <A HREF="065262.html">[Twisted-Python] Request for new Twisted release?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65261">[ date ]</a>
              <a href="thread.html#65261">[ thread ]</a>
              <a href="subject.html#65261">[ subject ]</a>
              <a href="author.html#65261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, please, let's do this!  I have been trying to fix or enable automated releases for smaller Twisted-org projects as I have time, but Twisted itself is a bit too tricky for my level of capacity during the end times.

Kyle Altendorf has done quite a bit of work on this, so let's be sure to leverage that work and not to start over: <A HREF="https://twistedmatrix.com/trac/ticket/9531">https://twistedmatrix.com/trac/ticket/9531</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/9531">https://twistedmatrix.com/trac/ticket/9531</A>&gt;.

-g

&gt;<i> On Sep 28, 2020, at 9:25 AM, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Adi,
</I>&gt;<i> 
</I>&gt;<i> In this Twisted subproject, you implemented something which releases to Pypi upon creation of a tag:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://github.com/twisted/twistedchecker/blob/master/.travis.yml#L23">https://github.com/twisted/twistedchecker/blob/master/.travis.yml#L23</A> &lt;<A HREF="https://github.com/twisted/twistedchecker/blob/master/.travis.yml#L23">https://github.com/twisted/twistedchecker/blob/master/.travis.yml#L23</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Maybe we can do something similar for the main Twisted project.
</I>&gt;<i> 
</I>&gt;<i> GitHub Actions allows you to run a specific workflow in response to a GitHub Release event:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://github.com/actions/create-release">https://github.com/actions/create-release</A> &lt;<A HREF="https://github.com/actions/create-release">https://github.com/actions/create-release</A>&gt;
</I>&gt;<i> <A HREF="https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows#release">https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows#release</A> &lt;<A HREF="https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows#release">https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows#release</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> So maybe we can implement your suggested steps in a new GitHub Actions workflow specific to doing a release.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Craig
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Thu, Sep 24, 2020 at 4:32 PM Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Maybe the release can be simplified and automated:
</I>&gt;<i> 
</I>&gt;<i> * Build the source and binary wheel in GitHub actions as this can be done for Linux (Ubuntu), Windows and macOS.
</I>&gt;<i> * Host the download source and wheel files only on PyPi and publish them automatically from GitHub action on a new tag is created.
</I>&gt;<i> * Host the documentation only on the Read The Docs.
</I>&gt;<i> * Hos the API documentation on Read The Docs - might need some hacking, but at release we can create an API docs package as an artifact which is then pulled when Read The Docs documentation is created and copied as extra HTML files.
</I>&gt;<i> * Move Twisted blog to GitHub pages... or even read the docs with a separate theme like Crate [1] ... if the blog is still required.
</I>&gt;<i> 
</I>&gt;<i> ------
</I>&gt;<i> 
</I>&gt;<i> With the above implemented the release should look like:
</I>&gt;<i> 
</I>&gt;<i> * Each time the tests for a PR are executed, pydoctor will run and automatically create the API files as an artifact available for download.
</I>&gt;<i> * Manually create a new branch in which the version is updated and the changelog/news/release note is created and all the news fragment files are removed/ . Have the branch reviewed and approved with all the tests passed. When the pydoctor tests are executed, the API docs are created.
</I>&gt;<i> * The release branches can have a naming convention line 'release-20.0.0`. At first the release branch can have a release candidate version and a GitHub can automatically push the release to PyPi.
</I>&gt;<i> * Manually send an email to Twisted mailing list to announce the pre-release.
</I>&gt;<i> * Once the branch is merged, manually push a new tag
</I>&gt;<i> * The new tag should trigger the GitHub action for publishing the release on PyPi
</I>&gt;<i> * The new merge in master should trigger the Read The Docs build... which now will also include the static API docs pages.
</I>&gt;<i> * Once the release is done, manually send a new email to the mailing list.
</I>&gt;<i> 
</I>&gt;<i> There are still many manual steps, but the only permissions required is commit to the repo.
</I>&gt;<i> This will no longer use any of the Twisted own infrastructure.
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="https://sphinx-themes.org/html/crate-docs-theme/crate/basic.html">https://sphinx-themes.org/html/crate-docs-theme/crate/basic.html</A> &lt;<A HREF="https://sphinx-themes.org/html/crate-docs-theme/crate/basic.html">https://sphinx-themes.org/html/crate-docs-theme/crate/basic.html</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Adi Roiban
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>&gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20200928/bffed467/attachment.htm&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065260.html">[Twisted-Python] Request for new Twisted release?
</A></li>
	<LI>Next message (by thread): <A HREF="065262.html">[Twisted-Python] Request for new Twisted release?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65261">[ date ]</a>
              <a href="thread.html#65261">[ thread ]</a>
              <a href="subject.html#65261">[ subject ]</a>
              <a href="author.html#65261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
