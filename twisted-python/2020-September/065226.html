<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Black enabled in trunk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Black%20enabled%20in%20trunk&In-Reply-To=%3C3007212.5fSG56mABF%40fpbarry%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065231.html">
   <LINK REL="Next"  HREF="065228.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Black enabled in trunk</H1>
    <B>Barry Scott</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Black%20enabled%20in%20trunk&In-Reply-To=%3C3007212.5fSG56mABF%40fpbarry%3E"
       TITLE="[Twisted-Python] Black enabled in trunk">barry.scott at forcepoint.com
       </A><BR>
    <I>Tue Sep 15 11:08:17 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065231.html">[Twisted-Python] Black enabled in trunk
</A></li>
        <LI>Next message (by thread): <A HREF="065228.html">[Twisted-Python] Black enabled in trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65226">[ date ]</a>
              <a href="thread.html#65226">[ thread ]</a>
              <a href="subject.html#65226">[ subject ]</a>
              <a href="author.html#65226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday, 14 September 2020 07:45:43 BST Tom Most wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Craig and I have been working to land a switch to The *Black* Coding Style &lt;<A HREF="https://black.readthedocs.io/en/stable/the_black_code_style.html">https://black.readthedocs.io/en/stable/the_black_code_style.html</A>&gt;. It's in! The tree has been reformatted &lt;<A HREF="https://github.com/twisted/twisted/commit/bc96c774be6e307e8e3e4d39780d37b045d0973a">https://github.com/twisted/twisted/commit/bc96c774be6e307e8e3e4d39780d37b045d0973a</A>&gt;. Some notable changes:
</I>
How does this work with backwards compatibility?
There are lots of symbols are that not black right?

Barry

&gt;<i> 
</I>&gt;<i> * 3-2-1 blank lines are replaced by PEP 8 style 2-1-1.
</I>&gt;<i> * String syntax uses &quot;double quotes&quot;.
</I>&gt;<i> 
</I>&gt;<i> Run this command to exclude the formatting from git blame &lt;<A HREF="https://github.com/twisted/twisted/blob/trunk/.git-blame-ignore-revs">https://github.com/twisted/twisted/blob/trunk/.git-blame-ignore-revs</A>&gt;:
</I>&gt;<i> 
</I>&gt;<i>     git config blame.ignoreRevsFile .git-blame-ignore-revs
</I>&gt;<i> 
</I>&gt;<i> There are two new Tox testenvs. To check style:
</I>&gt;<i> 
</I>&gt;<i>     tox -e black
</I>&gt;<i> 
</I>&gt;<i> To adjust the formatting:
</I>&gt;<i> 
</I>&gt;<i>     tox -e black-reformat
</I>&gt;<i> 
</I>&gt;<i> The formatting is checked by a new GitHub Actions lint built.
</I>&gt;<i> 
</I>&gt;<i> There is some follow-up work planned:
</I>&gt;<i> 
</I>&gt;<i> * Many PRs have conflicts (more on this below).
</I>&gt;<i> * Various wiki pages need updates. I've done a few, but there are probably more.
</I>&gt;<i> * The coding standard should be updated &lt;<A HREF="https://twistedmatrix.com/trac/ticket/9957#ticket">https://twistedmatrix.com/trac/ticket/9957#ticket</A>&gt;.
</I>&gt;<i> * The PR template needs an update &lt;<A HREF="https://twistedmatrix.com/trac/ticket/9956#ticket">https://twistedmatrix.com/trac/ticket/9956#ticket</A>&gt;.
</I>&gt;<i> * A few examples need reformatting &lt;<A HREF="https://tm.tl/#9952">https://tm.tl/#9952</A>&gt; (they weren't formatted because they fail to lint).
</I>&gt;<i> 
</I>&gt;<i> Inevitably, changes like this cause conflicts. For small PRs it's easiest to merge forward and then run tox -e black-reformat. For larger ones it can help to apply formatting before merge. To do this:
</I>&gt;<i> 
</I>&gt;<i> * Run black on the files your branch changes (be sure to use Black 20.8b1, not an older version)
</I>&gt;<i> * Commit the result, like `git commit -am &quot;Fade to black&quot;`
</I>&gt;<i> * Add that commit to .git-blame-ignore-revs to avoid polluting git blame.
</I>&gt;<i> * Merge forward. You can ignore formatting while performing the merge.
</I>&gt;<i> * Then run `tox -e black-reformat` to ensure you are in sync. Commit any changes it generates.
</I>&gt;<i> 
</I>&gt;<i> A big thanks to Hawkowl for kicking this all off and Craig for quick review turnaround. May we all be mildly displeased with the formatting, yet never have to review it again!
</I>&gt;<i> 
</I>&gt;<i> ---Tom
</I>



</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065231.html">[Twisted-Python] Black enabled in trunk
</A></li>
	<LI>Next message (by thread): <A HREF="065228.html">[Twisted-Python] Black enabled in trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65226">[ date ]</a>
              <a href="thread.html#65226">[ thread ]</a>
              <a href="subject.html#65226">[ subject ]</a>
              <a href="author.html#65226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
