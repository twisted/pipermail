<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted with pypy3 on Ubuntu 20.4, SSL error: 'ee key too small'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20with%20pypy3%20on%20Ubuntu%2020.4%2C%0A%20SSL%20error%3A%20%27ee%20key%20too%20small%27&In-Reply-To=%3CCAG%3DrPVfYDwBXM76ohxX6O6KqVC1YnB-%3D-dsT_Rz%3DysTC45dzkQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065258.html">
   <LINK REL="Next"  HREF="065264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted with pypy3 on Ubuntu 20.4, SSL error: 'ee key too small'</H1>
    <B>Craig Rodrigues</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20with%20pypy3%20on%20Ubuntu%2020.4%2C%0A%20SSL%20error%3A%20%27ee%20key%20too%20small%27&In-Reply-To=%3CCAG%3DrPVfYDwBXM76ohxX6O6KqVC1YnB-%3D-dsT_Rz%3DysTC45dzkQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Twisted with pypy3 on Ubuntu 20.4, SSL error: 'ee key too small'">rodrigc at crodrigues.org
       </A><BR>
    <I>Tue Sep 29 16:24:46 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065258.html">[Twisted-Python] Retry: Conch Issues
</A></li>
        <LI>Next message (by thread): <A HREF="065264.html">[Twisted-Python] Twisted with pypy3 on Ubuntu 20.4, SSL error: 'ee key too small'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65263">[ date ]</a>
              <a href="thread.html#65263">[ thread ]</a>
              <a href="subject.html#65263">[ subject ]</a>
              <a href="author.html#65263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I ran an experiment to run the Twisted tests on Ubuntu 20.4 using this
version of using pypy3:

*Python 3.6.9 (2ad108f17bdb, Apr 07 2020, 02:29:05*
*Pypy 7.3.1 with GCC 7.3.1 20180303 (Red Hat 7.3.1-5)*


A bunch of the conch tests failed in this Ubuntu environment:
<A HREF="https://github.com/twisted/twisted/runs/1173397508">https://github.com/twisted/twisted/runs/1173397508</A>
like this:



























*===============================================================================Error:
Traceback (most recent call last):  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/test/test_sslverify.py&quot;,
line 1780, in test_ellipticCurveDiffieHellman    onData=onData,  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/test/test_sslverify.py&quot;,
line 716, in loopback    self.serverPort = reactor.listenSSL(0,
serverFactory, serverCertOpts)  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/internet/posixbase.py&quot;,
line 593, in listenSSL    tlsFactory =
tls.TLSMemoryBIOFactory(contextFactory, False, factory)  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/protocols/tls.py&quot;,
line 748, in __init__    contextFactory =
_ContextFactoryToConnectionFactory(contextFactory)  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/protocols/tls.py&quot;,
line 629, in __init__    oldStyleContextFactory.getContext()  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/internet/_sslverify.py&quot;,
line 1636, in getContext    self._context = self._makeContext()  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/twisted/internet/_sslverify.py&quot;,
line 1645, in _makeContext    ctx.use_certificate(self.certificate)  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/OpenSSL/SSL.py&quot;,
line 960, in use_certificate    _raise_current_error()  File
&quot;/opt/hostedtoolcache/PyPy/3.6.9/x64/lib_pypy/_functools.py&quot;, line 80, in
__call__    return self._func(*(self._args + fargs), **fkeywords)  File
&quot;/home/runner/work/twisted/twisted/build/alldeps-withcov-posix/site-packages/OpenSSL/_util.py&quot;,
line 54, in exception_from_error_queue    raise
exception_type(errors)OpenSSL.SSL.Error: [('SSL routines',
'SSL_CTX_use_certificate', 'ee key too
small')]twisted.test.test_sslverify.OpenSSLOptionsECDHIntegrationTests.test_ellipticCurveDiffieHellman===============================================================================*



I'm not sure what the root problem is, but my suspicion is that the SSL
library in this particular Ubuntu environment
does not permit keys smaller than 2048 bits.

Anyone have any other ideas as to the cause of this error?

Thanks.
--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20200929/bb045dc0/attachment.htm&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065258.html">[Twisted-Python] Retry: Conch Issues
</A></li>
	<LI>Next message (by thread): <A HREF="065264.html">[Twisted-Python] Twisted with pypy3 on Ubuntu 20.4, SSL error: 'ee key too small'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65263">[ date ]</a>
              <a href="thread.html#65263">[ thread ]</a>
              <a href="subject.html#65263">[ subject ]</a>
              <a href="author.html#65263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
