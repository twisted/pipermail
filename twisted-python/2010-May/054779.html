<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Shared resource manioulation example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Shared%20resource%20manioulation%20example&In-Reply-To=%3Cop.vdfickypz3pzfc%40nitrogenycs3%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054778.html">
   <LINK REL="Next"  HREF="054781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Shared resource manioulation example</H1>
    <B>Nitro</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Shared%20resource%20manioulation%20example&In-Reply-To=%3Cop.vdfickypz3pzfc%40nitrogenycs3%3E"
       TITLE="[Twisted-Python] Shared resource manioulation example">nitro at dr-code.org
       </A><BR>
    <I>Fri May 28 12:44:34 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054778.html">[Twisted-Python] Shared resource manioulation example
</A></li>
        <LI>Next message (by thread): <A HREF="054781.html">[Twisted-Python] Shared resource manioulation example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54779">[ date ]</a>
              <a href="thread.html#54779">[ thread ]</a>
              <a href="subject.html#54779">[ subject ]</a>
              <a href="author.html#54779">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 28.05.2010, 20:34 Uhr, schrieb &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">vitaly at synapticvision.com</A>&gt;:

&gt;<i> hi,
</I>&gt;<i>
</I>&gt;<i> Callbacks serialization is clear to me.
</I>&gt;<i>
</I>&gt;<i> I'll try to rephrase the question: two requests are incoming for  
</I>&gt;<i> reactor()
</I>&gt;<i> to handle. Each request has its own chain of callbacks.
</I>&gt;<i> At some point one of the requests need to update the same
</I>&gt;<i> global data structure, and another request need to delete from the same
</I>&gt;<i> global data structure.
</I>&gt;<i> So theoretically, correct me if I wrong, will be a data collision.
</I>&gt;<i> If it is, than how can I prevent it? Example please.
</I>
It will go like this:

reactor loop:

1) receive Event A
    - fire deferred callback
    - deferred callback does data[key] = value
2) receive Event B
     - fire deferred callback
     - del data[key]

So one event is processed after another. Determining if it's a data  
collision is up to you. E.g. you could use something like a revision  
number. Each time you change the dictionary, increase it by one. Then if  
you try to change the dictionary and the client gave a different revision  
id then the last one, you know there is a collision.
What you do sounds very much like database transactions. Those are not  
easy to do. One example is the ZODB which can do what you want. For  
example via BTrees. But I guess there are more lightweight systems which  
do what you want, too. It all depends where you want to go with your app.  
That's up to you though and not really a question in regards to twisted or  
networking.

-Matthias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054778.html">[Twisted-Python] Shared resource manioulation example
</A></li>
	<LI>Next message (by thread): <A HREF="054781.html">[Twisted-Python] Shared resource manioulation example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54779">[ date ]</a>
              <a href="thread.html#54779">[ thread ]</a>
              <a href="subject.html#54779">[ subject ]</a>
              <a href="author.html#54779">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
