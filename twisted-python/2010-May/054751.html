<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PB and unstable network
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PB%20and%20unstable%20network&In-Reply-To=%3CAANLkTikkt_ZBrYcXuU5nlH5WsP_CN-yZz9zFh4YYCOUX%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054743.html">
   <LINK REL="Next"  HREF="054753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PB and unstable network</H1>
    <B>Viktor Klimov</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PB%20and%20unstable%20network&In-Reply-To=%3CAANLkTikkt_ZBrYcXuU5nlH5WsP_CN-yZz9zFh4YYCOUX%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] PB and unstable network">ploutosss at gmail.com
       </A><BR>
    <I>Tue May 25 02:34:34 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054743.html">[Twisted-Python] PB and unstable network
</A></li>
        <LI>Next message (by thread): <A HREF="054753.html">[Twisted-Python] PB and unstable network
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54751">[ date ]</a>
              <a href="thread.html#54751">[ thread ]</a>
              <a href="subject.html#54751">[ subject ]</a>
              <a href="author.html#54751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Glyph, sorry for my english.

My server.py save last answer(see User.perspectiveMessageReceived).

Client when an error occurs(in callRemote) schedule reconnect. After
reconnect client call remote method which return last answer.

It works if disconnect happened when server send data to
client(_server-&gt;client_). (try set MyServer.crash_server_to_client to
True)

But it doesn't work if disconnect happened when client send data to
server(_client-&gt;server_). Becouse server after reconnect send previous
data. It can fix if client be known when error occurs(server-&gt;client
or client-&gt;server). (see comment in Client.net_error).

PS for emulate error client-&gt;server set Client.crash_client_to_server
to True, don't forget set MyServer.crash_server_to_client to False)

On Mon, May 24, 2010 at 5:19 AM, Glyph Lefkowitz
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
&gt;<i> On May 23, 2010, at 11:54 AM, Viktor Klimov wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I use PB in unstable network. The server remembers the last answer.
</I>&gt;&gt;<i> Client detection disconnected, connected again, makes entry into the
</I>&gt;&gt;<i> system and calls the function returns the last response
</I>&gt;&gt;<i> (get_last_response). The answer, it returns a deferred saved earlier.
</I>&gt;&gt;<i> If somewhere an error cycle repeats.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All of this works until the lost communication does not happen at a
</I>&gt;&gt;<i> time when Twisted sends data to a server. As the server in this
</I>&gt;&gt;<i> situation does not receive a first request, and when you call
</I>&gt;&gt;<i> get_last_response client receives the data that has already received.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How can I check if an error in the client arrived data to the server or not?
</I>&gt;<i>
</I>&gt;<i> Hi Viktor,
</I>&gt;<i>
</I>&gt;<i> I try not to give people a hard time about bad English, but I am having a hard time reading your message. Â There are a couple of different things I think you might mean and it would be confusing if I tried to explain them all.
</I>&gt;<i>
</I>&gt;<i> Perhaps you could attach some Python code that explains exactly what you mean?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: server.py
Type: application/octet-stream
Size: 1731 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20100525/78c1116e/attachment-0004.obj&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: client.py
Type: application/octet-stream
Size: 3495 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20100525/78c1116e/attachment-0005.obj&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054743.html">[Twisted-Python] PB and unstable network
</A></li>
	<LI>Next message (by thread): <A HREF="054753.html">[Twisted-Python] PB and unstable network
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54751">[ date ]</a>
              <a href="thread.html#54751">[ thread ]</a>
              <a href="subject.html#54751">[ subject ]</a>
              <a href="author.html#54751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
