<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] print unicode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20print%20unicode&In-Reply-To=q2yb460e9631005050715pa8b289e8p1dd91a61cc3e7818%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022160.html">
   <LINK REL="Next"  HREF="022165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] print unicode</H1>
    <B>Pet</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20print%20unicode&In-Reply-To=q2yb460e9631005050715pa8b289e8p1dd91a61cc3e7818%40mail.gmail.com"
       TITLE="[Twisted-Python] print unicode">petshmidt at googlemail.com
       </A><BR>
    <I>Wed May  5 10:29:16 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="022160.html">[Twisted-Python] print unicode
</A></li>
        <LI>Next message: <A HREF="022165.html">[Twisted-Python] print unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22163">[ date ]</a>
              <a href="thread.html#22163">[ thread ]</a>
              <a href="subject.html#22163">[ subject ]</a>
              <a href="author.html#22163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, May 5, 2010 at 4:15 PM, Pet &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">petshmidt at googlemail.com</A>&gt; wrote:
&gt;<i> On Wed, May 5, 2010 at 2:49 PM, Itamar Turner-Trauring
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
</I>&gt;&gt;<i> On Wed, 2010-05-05 at 13:45 +0200, Pet wrote:
</I>&gt;&gt;&gt;<i> Hello!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm using Twisted 10.0 and as usually sometime print debug infos with
</I>&gt;&gt;&gt;<i> myunicodestr.encode('UTF-8') which are saved to logfile, but since
</I>&gt;&gt;&gt;<i> using twisted 10 I'm getting
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> UnicodeEncodeError: 'ascii' codec can't encode characters...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> type(myunicodestr) returns &lt;type 'unicode'&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What is the problem here?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This works fine for me (Twisted trunk):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> $ python2.5 -c &quot;import sys; from twisted.python import log; \
</I>&gt;&gt;<i> log.startLogging(file('/tmp/log', 'w')); print \
</I>&gt;&gt;<i> u'\u1234'.encode('UTF-8')&quot;
</I>&gt;&gt;<i> $ cat /tmp/log
</I>&gt;&gt;<i> 2010-05-05 08:48:40-0400 [-] Log opened.
</I>&gt;&gt;<i> 2010-05-05 08:48:40-0400 [-] &#4660;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can you include a minimal reproducing example?
</I>&gt;<i>
</I>&gt;<i> If I print as you do it works, but my string is fetched from database
</I>&gt;<i> and only then it fails
</I>
It's pretty weird. I've send  as parameter {'s': u'c\u0142a'} to
twisted xml-rpc server after it was restarted and it has printed
param['s'].encode('UTF-8') without errors. Immidiately after that I've
send the same request again and it failed to print it. I've restarted
the server again and at the first request it prints without errors,
all other requests raise exceptions. So it has nothing to do with
database.

&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022160.html">[Twisted-Python] print unicode
</A></li>
	<LI>Next message: <A HREF="022165.html">[Twisted-Python] print unicode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22163">[ date ]</a>
              <a href="thread.html#22163">[ thread ]</a>
              <a href="subject.html#22163">[ subject ]</a>
              <a href="author.html#22163">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
