<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Reactor Spinning?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Reactor%20Spinning%3F&In-Reply-To=%3C4BE17EA5.8000606%40thoughtcrime.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054646.html">
   <LINK REL="Next"  HREF="054647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Reactor Spinning?</H1>
    <B>Moxie Marlinspike</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Reactor%20Spinning%3F&In-Reply-To=%3C4BE17EA5.8000606%40thoughtcrime.org%3E"
       TITLE="[Twisted-Python] Reactor Spinning?">moxie at thoughtcrime.org
       </A><BR>
    <I>Wed May  5 08:20:21 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054646.html">[Twisted-Python] Reactor Spinning?
</A></li>
        <LI>Next message (by thread): <A HREF="054647.html">[Twisted-Python] Reactor Spinning?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54657">[ date ]</a>
              <a href="thread.html#54657">[ thread ]</a>
              <a href="subject.html#54657">[ subject ]</a>
              <a href="author.html#54657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hey Itamar, the problem is that this only occurs under heavy load in a
production environment (of course!), so I don't really have any way of
testing a simplified version.

The code itself is fairly simple, however, and is almost identical to
the code that ships in twisted.web.proxy.

This is to say that I'm simply shuttling data between an HTTPClient
object and a Request object.  I never call transport.resumeProducing()
or startWriting() myself, and I only call transport.write() in exactly
one place (when sending POST data via HTTPClient).  The rest of the time
I'm writing to either the Request object (not its transport) when
communicating back to the clients, or availing myself of higher-level
methods like HTTPClient.sendHeader() when writing to the server side.

The code is available here:
<A HREF="http://www.googlesharing.net/server/googleshare-0.9.tar.gz">http://www.googlesharing.net/server/googleshare-0.9.tar.gz</A>

- moxie

-- 
<A HREF="http://www.thoughtcrime.org">http://www.thoughtcrime.org</A>


Itamar Turner-Trauring wrote:

&gt;<i> Can you produce a minimal reproducing example of a program that has this
</I>&gt;<i> issue? I can imagine a code bug where you're calling
</I>&gt;<i> transport.resumeProducing() or startWriting() sometime when you shouldn't,
</I>&gt;<i> except the empty write() does look wrong... a minimal code sample would
</I>&gt;<i> help.
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054646.html">[Twisted-Python] Reactor Spinning?
</A></li>
	<LI>Next message (by thread): <A HREF="054647.html">[Twisted-Python] Reactor Spinning?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54657">[ date ]</a>
              <a href="thread.html#54657">[ thread ]</a>
              <a href="subject.html#54657">[ subject ]</a>
              <a href="author.html#54657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
