<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PIRP for Twisted Python
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PIRP%20for%20Twisted%20Python&In-Reply-To=%3C200104180704.KAA15495%40jabotinsky.lerner.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="032538.html">
   <LINK REL="Next"  HREF="032544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PIRP for Twisted Python</H1>
    <B>Moshe Zadka</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PIRP%20for%20Twisted%20Python&In-Reply-To=%3C200104180704.KAA15495%40jabotinsky.lerner.co.il%3E"
       TITLE="[Twisted-Python] PIRP for Twisted Python">moshez at lerner.co.il
       </A><BR>
    <I>Wed Apr 18 01:04:00 MDT 2001</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="032538.html">[Twisted-Python] twisted.net refactoring
</A></li>
        <LI>Next message (by thread): <A HREF="032544.html">[Twisted-Python] twisted.protocols.http: RFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32543">[ date ]</a>
              <a href="thread.html#32543">[ thread ]</a>
              <a href="subject.html#32543">[ subject ]</a>
              <a href="author.html#32543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, dear Twisted developers!

Attached is a twisted.protocol for PIRP, DJB's publishing protocol.
I think it would be interesting to write an interface for twisted.web
so Resources would be publishable both by the web and by PIRP (and
possibly, later, other protocols?)
 
The big point would probably to think up an interface to the request
which is portable enough.

I think something like:
  - request.components(): return the requested path as a list of components
  - request.received_headers(): return the headers
  - request.write(packet): write a packet to the user

I'm still not sure how to signal failure: while in PIRP there's a single
form of failure, HTTP defines millions of them.
Anyway, I'll go off an implement a PIRP client now.
-- 
Moshe Zadka &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">moshez at lerner.co.il</A>&gt;
Web Developer, Python Developer

import NetstringReceiver

class PIRPHandler(NetstringReceiver.NetstringReceiver):

    __buffer = None

    def handleString(self, s):
        if s:
            if self.__buffer is None:
                self.__buffer = []
            self.__buffer.append(s)
        else:
            buffer, self.__buffer = self.__buffer, None
            self.handlePIRP(buffer)

    def sendError(self):
        self.write('!')

    def sendPacket(self, packet):
        self.write('%d:%s,' % (len(packet), packet)))

    def endPackets(self):
        self.sendPacket('')

    def sendPackets(self, packets):
        for packet in packets:
             self.sendPacket(packet)
        self.endPackets()
-- 
Moshe Zadka &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">moshez at lerner.co.il</A>&gt;
Web Developer, Python Developer



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="032538.html">[Twisted-Python] twisted.net refactoring
</A></li>
	<LI>Next message (by thread): <A HREF="032544.html">[Twisted-Python] twisted.protocols.http: RFC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32543">[ date ]</a>
              <a href="thread.html#32543">[ thread ]</a>
              <a href="subject.html#32543">[ subject ]</a>
              <a href="author.html#32543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
