<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.net refactoring
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.net%20refactoring&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000034.html">
   <LINK REL="Next"  HREF="000029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.net refactoring</H1>
    <B>Moshe Zadka</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.net%20refactoring&In-Reply-To="
       TITLE="[Twisted-Python] twisted.net refactoring">moshez at zadka.site.co.il
       </A><BR>
    <I>Mon Apr 16 17:07:08 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000034.html">[Twisted-Python] First Port to twisted.protocols
</A></li>
        <LI>Next message: <A HREF="000029.html">[Twisted-Python] twisted.net refactoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28">[ date ]</a>
              <a href="thread.html#28">[ thread ]</a>
              <a href="subject.html#28">[ subject ]</a>
              <a href="author.html#28">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!
I've started to work on refactoring twisted.net for minimal dependancies.
Currently, in the vein of &quot;research project&quot;, what interests me is how
layering of protocols in an event-oriented framework can be accomplished.
Please have a look at <A HREF="http://moshez.org/protocols.tgz">http://moshez.org/protocols.tgz</A>
I've written tests for all the protocol handlers I wrote, and I'd
be happy to work with anyone who wants to write tests for the irc client
and telnet server.

Basically, the idea is to turn low-level events (basically just handleData)
into high level events (like handleRequest, for HTTP, at the other end
of the spectrum). The idea is to reflect the layering of protocols (and 
only the layering of protocols -- read on) in the classes. 

So, inheritance happens when the spec references another spec -- e.g.,
XML-RPC is defined to be over HTTP, so it would be correct to have

class XMLRPCHandler(HTTPHandler):

    def handleRequest(self, command, selector, version, request):
        ...parse request into Python tuple...
        result = self.handleMethod(params)
        ....return HTTP response...

But, on the other hand, HTTP does not say anything about TCP/IP, so
HTTP should *not* be layered above any transport. This allows us to
use SSL, SOCKS or files just as well.

One big advantage I'm interested in is testability -- see the examples
already there to get my point -- you can bombard your handler hard-coded
strings and watch for the answers.
-- 
&quot;I'll be ex-DPL soon anyway so I'm        |LUKE: Is Perl better than Python?
looking for someplace else to grab power.&quot;|YODA: No...no... no. Quicker,
   -- Wichert Akkerman (on debian-private)|      easier, more seductive.
For public key, finger <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">moshez at debian.org</A>  |<A HREF="http://www.{python,debian,gnu}.org">http://www.{python,debian,gnu}.org</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000034.html">[Twisted-Python] First Port to twisted.protocols
</A></li>
	<LI>Next message: <A HREF="000029.html">[Twisted-Python] twisted.net refactoring
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28">[ date ]</a>
              <a href="thread.html#28">[ thread ]</a>
              <a href="subject.html#28">[ subject ]</a>
              <a href="author.html#28">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
