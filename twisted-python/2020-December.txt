From vlad at petric.cc  Thu Dec  3 19:11:07 2020
From: vlad at petric.cc (Vlad Petric)
Date: Thu, 3 Dec 2020 21:11:07 -0500
Subject: [Twisted-Python] Injecting 400 errors via HTTP Proxy
Message-ID: <CAJuH0wCSERSm1igrUA8gqs-WxsGPc0=dxWL0+tbk=QwJRSFo0g@mail.gmail.com>

Hi Everyone,

I'd like to randomly inject 400 errors via the HTTP Proxy.

I'm testing the robustness of an application that performs a lot of HTTP
GETs. I am using the basic http web proxy, and  I need to modify it to
randomly insert some errors.

Should I be using my own class derived from ProxyRequest, and override
process()? If that's the case, how would I be injecting 400s?

Thank you so much!
Vlad, a twisted n00b
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201203/0f8a3504/attachment.htm>

From kuchaspama at gmail.com  Fri Dec  4 18:37:33 2020
From: kuchaspama at gmail.com (spam tam)
Date: Sat, 5 Dec 2020 04:37:33 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
Message-ID: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>

Twisted provide ability to run dns client in the same thread as main
twisted application. But it just doesn't work.

I created pull request which fix the problem:
https://github.com/twisted/twisted/pull/1488

I would like to know if twisted community knows about it. This client
doesn't work for years. I think that we should fix the problem.

Twisted dns client should work. What do you think? I think we should
discuss the problem. DNS client protocol provide ANY, A, AAAA
requests. Current dns ANY request is not enough. My code add A dns
request after current ANY request.

Is this enough fix or anybody think it's not enough or may be we
should find another solution. I think twisted framework should work


From twm at freecog.net  Fri Dec  4 19:06:21 2020
From: twm at freecog.net (Tom Most)
Date: Fri, 04 Dec 2020 18:06:21 -0800
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
Message-ID: <30595bff-d0d3-41ec-91df-c480c0b73e35@www.fastmail.com>

Why do an ANY query at all? As Glyph noted[1] the correct solution is to query A and AAAA concurrently. If you want a temporary hack wouldn't the most straightforward thing be to query just A instead of ANY + A?

---Tom

[1]: https://twistedmatrix.com/trac/ticket/9691#comment:5

On Fri, Dec 4, 2020, at 5:37 PM, spam tam wrote:
> Twisted provide ability to run dns client in the same thread as main
> twisted application. But it just doesn't work.
> 
> I created pull request which fix the problem:
> https://github.com/twisted/twisted/pull/1488
> 
> I would like to know if twisted community knows about it. This client
> doesn't work for years. I think that we should fix the problem.
> 
> Twisted dns client should work. What do you think? I think we should
> discuss the problem. DNS client protocol provide ANY, A, AAAA
> requests. Current dns ANY request is not enough. My code add A dns
> request after current ANY request.
> 
> Is this enough fix or anybody think it's not enough or may be we
> should find another solution. I think twisted framework should work
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From adi at roiban.ro  Sat Dec  5 06:52:20 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sat, 5 Dec 2020 13:52:20 +0000
Subject: [Twisted-Python] Injecting 400 errors via HTTP Proxy
In-Reply-To: <CAJuH0wCSERSm1igrUA8gqs-WxsGPc0=dxWL0+tbk=QwJRSFo0g@mail.gmail.com>
References: <CAJuH0wCSERSm1igrUA8gqs-WxsGPc0=dxWL0+tbk=QwJRSFo0g@mail.gmail.com>
Message-ID: <CAFycZ9fiLUPxsgfQBSb_BBn5TQMrGNzt6X1FNODqMM=FjFO_dA@mail.gmail.com>

Hi Vlad

On Fri, 4 Dec 2020 at 02:11, Vlad Petric <vlad at petric.cc> wrote:

> Hi Everyone,
>
> I'd like to randomly inject 400 errors via the HTTP Proxy.
>
> I'm testing the robustness of an application that performs a lot of HTTP
> GETs. I am using the basic http web proxy, and  I need to modify it to
> randomly insert some errors.
>
> Should I be using my own class derived from ProxyRequest, and override
> process()? If that's the case, how would I be injecting 400s?
>
> Thank you so much!
> Vlad, a twisted n00b
> _______________________________________________
>

Is this a forward or reverse proxy?

ProxyRequest is just like any request... you can set headers, response
code, write content to it...

Here is an example:

https://gist.github.com/adiroiban/ef9dfd2cce5c59b70e1bc0600b58adeb

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201205/d7063484/attachment.htm>

From kuchaspama at gmail.com  Sat Dec  5 15:06:20 2020
From: kuchaspama at gmail.com (spam tam)
Date: Sun, 6 Dec 2020 01:06:20 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <30595bff-d0d3-41ec-91df-c480c0b73e35@www.fastmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <30595bff-d0d3-41ec-91df-c480c0b73e35@www.fastmail.com>
Message-ID: <CANUeS4QsVr24S3pB=-6+TTbh0SdfpKLkji=MV6RT9yUMRy+WLw@mail.gmail.com>

Ok. Instead ANY I can query A and if A doesn't provide IP then query AAAA

On Sat, Dec 5, 2020 at 5:07 AM Tom Most <twm at freecog.net> wrote:
>
> Why do an ANY query at all? As Glyph noted[1] the correct solution is to query A and AAAA concurrently. If you want a temporary hack wouldn't the most straightforward thing be to query just A instead of ANY + A?
>
> ---Tom
>
> [1]: https://twistedmatrix.com/trac/ticket/9691#comment:5
>
> On Fri, Dec 4, 2020, at 5:37 PM, spam tam wrote:
> > Twisted provide ability to run dns client in the same thread as main
> > twisted application. But it just doesn't work.
> >
> > I created pull request which fix the problem:
> > https://github.com/twisted/twisted/pull/1488
> >
> > I would like to know if twisted community knows about it. This client
> > doesn't work for years. I think that we should fix the problem.
> >
> > Twisted dns client should work. What do you think? I think we should
> > discuss the problem. DNS client protocol provide ANY, A, AAAA
> > requests. Current dns ANY request is not enough. My code add A dns
> > request after current ANY request.
> >
> > Is this enough fix or anybody think it's not enough or may be we
> > should find another solution. I think twisted framework should work
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From twm at freecog.net  Sat Dec  5 15:24:07 2020
From: twm at freecog.net (Tom Most)
Date: Sat, 05 Dec 2020 14:24:07 -0800
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4QsVr24S3pB=-6+TTbh0SdfpKLkji=MV6RT9yUMRy+WLw@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <30595bff-d0d3-41ec-91df-c480c0b73e35@www.fastmail.com>
 <CANUeS4QsVr24S3pB=-6+TTbh0SdfpKLkji=MV6RT9yUMRy+WLw@mail.gmail.com>
Message-ID: <b36d47a2-27d5-4e49-8ee7-c0c9a4d6543a@www.fastmail.com>

Yes, that would be an improvement on the current behavior, though the ideal behavior is to query both A and AAAA simultaneously, returning the union of their results.

---Tom

On Sat, Dec 5, 2020, at 2:06 PM, spam tam wrote:
> Ok. Instead ANY I can query A and if A doesn't provide IP then query AAAA
> 
> On Sat, Dec 5, 2020 at 5:07 AM Tom Most <twm at freecog.net> wrote:
> >
> > Why do an ANY query at all? As Glyph noted[1] the correct solution is to query A and AAAA concurrently. If you want a temporary hack wouldn't the most straightforward thing be to query just A instead of ANY + A?
> >
> > ---Tom
> >
> > [1]: https://twistedmatrix.com/trac/ticket/9691#comment:5
> >
> > On Fri, Dec 4, 2020, at 5:37 PM, spam tam wrote:
> > > Twisted provide ability to run dns client in the same thread as main
> > > twisted application. But it just doesn't work.
> > >
> > > I created pull request which fix the problem:
> > > https://github.com/twisted/twisted/pull/1488
> > >
> > > I would like to know if twisted community knows about it. This client
> > > doesn't work for years. I think that we should fix the problem.
> > >
> > > Twisted dns client should work. What do you think? I think we should
> > > discuss the problem. DNS client protocol provide ANY, A, AAAA
> > > requests. Current dns ANY request is not enough. My code add A dns
> > > request after current ANY request.
> > >
> > > Is this enough fix or anybody think it's not enough or may be we
> > > should find another solution. I think twisted framework should work
> > >
> > > _______________________________________________
> > > Twisted-Python mailing list
> > > Twisted-Python at twistedmatrix.com
> > > https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> > >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From trac at twistedmatrix.com  Sun Dec  6 00:05:23 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 06 Dec 2020 07:05:23 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1607238323.01.3284599355550054872@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201206/8b8aeca8/attachment.htm>

From barry.scott at forcepoint.com  Tue Dec  8 07:57:33 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Tue, 08 Dec 2020 14:57:33 +0000
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
Message-ID: <11652809.O9o76ZdvQC@fpbarry>

On Saturday, 5 December 2020 01:37:33 GMT spam tam wrote:
> Twisted provide ability to run dns client in the same thread as main
> twisted application. But it just doesn't work.

I will have to check the code we are using but I think I have this working in
production. I'll have to check for patches.

I recall that the DNS caching code cannot work and we replaced all the
logic.

I get back with details when I get a spare moment.

Barry

> 
> I created pull request which fix the problem:
> https://github.com/twisted/twisted/pull/1488
> 
> I would like to know if twisted community knows about it. This client
> doesn't work for years. I think that we should fix the problem.
> 
> Twisted dns client should work. What do you think? I think we should
> discuss the problem. DNS client protocol provide ANY, A, AAAA
> requests. Current dns ANY request is not enough. My code add A dns
> request after current ANY request.
> 
> Is this enough fix or anybody think it's not enough or may be we
> should find another solution. I think twisted framework should work
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 





From glyph at twistedmatrix.com  Tue Dec  8 13:08:09 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 8 Dec 2020 12:08:09 -0800
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <11652809.O9o76ZdvQC@fpbarry>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <11652809.O9o76ZdvQC@fpbarry>
Message-ID: <F1B078F1-8378-4602-9DA6-35E99444C805@twistedmatrix.com>

Hi Barry!

> On Dec 8, 2020, at 6:57 AM, Barry Scott <barry.scott at forcepoint.com> wrote:
> 
> I recall that the DNS caching code cannot work and we replaced all the
> logic.

Did you open a ticket for this?  I realize we're a bit bottlenecked on reviewer bandwidth and stuff isn't getting integrated quickly, but "cannot work" seems like something we should at least have written down :).

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201208/479a7775/attachment.htm>

From barry.scott at forcepoint.com  Wed Dec  9 02:00:43 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Wed, 09 Dec 2020 09:00:43 +0000
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <F1B078F1-8378-4602-9DA6-35E99444C805@twistedmatrix.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <11652809.O9o76ZdvQC@fpbarry>
 <F1B078F1-8378-4602-9DA6-35E99444C805@twistedmatrix.com>
Message-ID: <1773129.CQOukoFCf9@fpbarry>

On Tuesday, 8 December 2020 20:08:09 GMT Glyph wrote:
> Hi Barry!
> 
> > On Dec 8, 2020, at 6:57 AM, Barry Scott <barry.scott at forcepoint.com> wrote:
> > 
> > I recall that the DNS caching code cannot work and we replaced all the
> > logic.
> 
> Did you open a ticket for this?  I realize we're a bit bottlenecked on reviewer bandwidth and stuff isn't getting integrated quickly, but "cannot work" seems like something we should at least have written down :).

I don't remember - I will have to read the code again and remind my self of the specific reason the
cache does not work. I think one issue was not handling TTL so that short lived entries where not
refreshed.

I'll add to to my todo list for twisted.

Barry




From barry.scott at forcepoint.com  Thu Dec 10 10:30:05 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Thu, 10 Dec 2020 17:30:05 +0000
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4QRwjdcF4f_zzVuCazOxNrbKGYDZwv88rw14fLfkWsd6Q@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <CANUeS4S=ibcoWvw4-g=jUETmF=4oxhyM7M5aXfSSYj2iEKiKGQ@mail.gmail.com>
 <CANUeS4QRwjdcF4f_zzVuCazOxNrbKGYDZwv88rw14fLfkWsd6Q@mail.gmail.com>
Message-ID: <2901313.CbtlEUcBR6@fpbarry>

Answers to but your emails in line.

I've added the twisted list back in so others can comment.

On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> As additional information you can check how operation system works with dns.
> You can run
> 
> *sudo tcpdump -i lo -v port 53*
> as UDP local sniffer.

Agreed great tool to debug this stuff with.
And use wireshark to decode the output.

> And run
> 
> *dig google.com <http://google.com>*
> 
> And you will see that it makes A request. Not ANY

That is the dig default to use A. Use this to do a any query.

   dig google.com any

I checked the man page to see if anything extra can be printed but it looks like
the default is to print everything dig knows how to print. The options only
remove output it seems.

> On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com> wrote:
> 
> > Yes. You are correct. My local dns just is not stable. But try this:
> >
> > python3.8 dns_lookup6.py amazon.in
> >
> > It provides response:
> >
> > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN ttl=3599s
> > auth=False>], [], [])
> > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN ttl=3599s
> > auth=False> type 13 payload <HINFO cpu='RFC8482' os='' ttl=3599>
> >
> > There are not CNAME, A, AAAA or NS records. This means that current
> > twisted.names.common.extractRecord will not provide IP.
> > What do you think about this? May be we should replace dns ANY request
> > with A and AAAA?

Now that is interesting because dig returns 54 lines of output from:

   dig amazon.in any

(I won't paste the 54 lines).

I good question is why did twisted not see that huge set of records?

I'd want to understand why twisted is only seeing the HINFO and not all the other
records. Fixing that would, I'm guessing, fix a lot of things.

I'm not sure when I can look at this. Do you want to look at the packets that
twisted sends and receives and compared to dig?

Barry



> >
> > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <barry.scott at forcepoint.com>
> > wrote:
> > >
> > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > I continue to investigate the issue. I try to call your script like
> > this:
> > > >
> > > > python dns_lookup6.py www.washingtonexaminer.com
> > > >
> > > > And get response:
> > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > twisted.names.error.DNSServerError: <Message id=55958 rCode=2
> > > > maxSize=0 flags=answer,recDes,recAv
> > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
> > > > result.value.__dict__ {}
> > > >
> > > > Is that ok?
> > > >
> > > The output I get is this:
> > >
> > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
> > > Took: 0.029293
> > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com type=CNAME
> > class=IN ttl=37s auth=False>], [], [])
> > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com type=CNAME
> > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > 4067e1ed38.10005.sucurifirewall.com ttl=37>
> > >
> > > And this is the output of dig:
> > >
> > > $ dig www.washingtonexaminer.com
> > >
> > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>> www.washingtonexaminer.com
> > > ;; global options: +cmd
> > > ;; Got answer:
> > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1
> > >
> > > ;; OPT PSEUDOSECTION:
> > > ; EDNS: version: 0, flags:; udp: 4000
> > > ;; QUESTION SECTION:
> > > ;www.washingtonexaminer.com.    IN      A
> > >
> > > ;; ANSWER SECTION:
> > > www.washingtonexaminer.com. 599 IN      CNAME
> > 4067e1ed38.10005.sucurifirewall.com.
> > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A  192.124.249.5
> > >
> > > ;; Query time: 50 msec
> > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > ;; MSG SIZE  rcvd: 117
> > >
> > > Barry
> > >
> > >
> > >
> >
> 





From kuchaspama at gmail.com  Thu Dec 10 16:29:33 2020
From: kuchaspama at gmail.com (spam tam)
Date: Fri, 11 Dec 2020 02:29:33 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <2901313.CbtlEUcBR6@fpbarry>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <CANUeS4S=ibcoWvw4-g=jUETmF=4oxhyM7M5aXfSSYj2iEKiKGQ@mail.gmail.com>
 <CANUeS4QRwjdcF4f_zzVuCazOxNrbKGYDZwv88rw14fLfkWsd6Q@mail.gmail.com>
 <2901313.CbtlEUcBR6@fpbarry>
Message-ID: <CANUeS4QRUJi9rSyVR5Tn0iuP6Tqwqg8XJjttKwAV+ru0kpv_wA@mail.gmail.com>

I would like to find problems with ANY. But I think that there is no
problem.
DNS servers don't provide standard response for ANY request. My local
machine doesn't provide correct response for request:

$ dig amazon.in any

; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
;; global options: +cmd
;; connection timed out; no servers could be reached

My VPS server provide such response:

; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 512
;; QUESTION SECTION:
;amazon.in.                     IN      ANY

;; ANSWER SECTION:
amazon.in.              3599    IN      HINFO   "RFC8482" ""

;; Query time: 40 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: Thu Dec 10 22:10:39 UTC 2020
;; MSG SIZE  rcvd: 59

It sometimes provides another response. But the problem is that behaviour
with ANY is not stable.
The present and the future of ANY are hazy. Read more here:
https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/

If you don't see the problem please provide your opinion. I would like to
find solution with ANY but it seems it is impossible.

So what do you think?

On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <barry.scott at forcepoint.com>
wrote:

> Answers to but your emails in line.
>
> I've added the twisted list back in so others can comment.
>
> On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> > As additional information you can check how operation system works with
> dns.
> > You can run
> >
> > *sudo tcpdump -i lo -v port 53*
> > as UDP local sniffer.
>
> Agreed great tool to debug this stuff with.
> And use wireshark to decode the output.
>
> > And run
> >
> > *dig google.com <http://google.com>*
> >
> > And you will see that it makes A request. Not ANY
>
> That is the dig default to use A. Use this to do a any query.
>
>    dig google.com any
>
> I checked the man page to see if anything extra can be printed but it
> looks like
> the default is to print everything dig knows how to print. The options only
> remove output it seems.
>
> > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com> wrote:
> >
> > > Yes. You are correct. My local dns just is not stable. But try this:
> > >
> > > python3.8 dns_lookup6.py amazon.in
> > >
> > > It provides response:
> > >
> > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN ttl=3599s
> > > auth=False>], [], [])
> > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN ttl=3599s
> > > auth=False> type 13 payload <HINFO cpu='RFC8482' os='' ttl=3599>
> > >
> > > There are not CNAME, A, AAAA or NS records. This means that current
> > > twisted.names.common.extractRecord will not provide IP.
> > > What do you think about this? May be we should replace dns ANY request
> > > with A and AAAA?
>
> Now that is interesting because dig returns 54 lines of output from:
>
>    dig amazon.in any
>
> (I won't paste the 54 lines).
>
> I good question is why did twisted not see that huge set of records?
>
> I'd want to understand why twisted is only seeing the HINFO and not all
> the other
> records. Fixing that would, I'm guessing, fix a lot of things.
>
> I'm not sure when I can look at this. Do you want to look at the packets
> that
> twisted sends and receives and compared to dig?
>
> Barry
>
>
>
> > >
> > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
> barry.scott at forcepoint.com>
> > > wrote:
> > > >
> > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > > I continue to investigate the issue. I try to call your script like
> > > this:
> > > > >
> > > > > python dns_lookup6.py www.washingtonexaminer.com
> > > > >
> > > > > And get response:
> > > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > > twisted.names.error.DNSServerError: <Message id=55958 rCode=2
> > > > > maxSize=0 flags=answer,recDes,recAv
> > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
> > > > > result.value.__dict__ {}
> > > > >
> > > > > Is that ok?
> > > > >
> > > > The output I get is this:
> > > >
> > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
> > > > Took: 0.029293
> > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com type=CNAME
> > > class=IN ttl=37s auth=False>], [], [])
> > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com type=CNAME
> > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
> > > >
> > > > And this is the output of dig:
> > > >
> > > > $ dig www.washingtonexaminer.com
> > > >
> > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
> www.washingtonexaminer.com
> > > > ;; global options: +cmd
> > > > ;; Got answer:
> > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1
> > > >
> > > > ;; OPT PSEUDOSECTION:
> > > > ; EDNS: version: 0, flags:; udp: 4000
> > > > ;; QUESTION SECTION:
> > > > ;www.washingtonexaminer.com.    IN      A
> > > >
> > > > ;; ANSWER SECTION:
> > > > www.washingtonexaminer.com. 599 IN      CNAME
> > > 4067e1ed38.10005.sucurifirewall.com.
> > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A  192.124.249.5
> > > >
> > > > ;; Query time: 50 msec
> > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > > ;; MSG SIZE  rcvd: 117
> > > >
> > > > Barry
> > > >
> > > >
> > > >
> > >
> >
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/975a33ef/attachment.htm>

From barry.scott at forcepoint.com  Fri Dec 11 02:25:53 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Fri, 11 Dec 2020 09:25:53 +0000
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4QRUJi9rSyVR5Tn0iuP6Tqwqg8XJjttKwAV+ru0kpv_wA@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2901313.CbtlEUcBR6@fpbarry>
 <CANUeS4QRUJi9rSyVR5Tn0iuP6Tqwqg8XJjttKwAV+ru0kpv_wA@mail.gmail.com>
Message-ID: <2489518.k3LOHGUjKi@fpbarry>

On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
> I would like to find problems with ANY. But I think that there is no
> problem.
> DNS servers don't provide standard response for ANY request. My local
> machine doesn't provide correct response for request:

So you need to fix your network infra not twisted right?

Barry


> 
> $ dig amazon.in any
> 
> ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
> ;; global options: +cmd
> ;; connection timed out; no servers could be reached
> 
> My VPS server provide such response:
> 
> ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
> ;; global options: +cmd
> ;; Got answer:
> ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
> ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
> 
> ;; OPT PSEUDOSECTION:
> ; EDNS: version: 0, flags:; udp: 512
> ;; QUESTION SECTION:
> ;amazon.in.                     IN      ANY
> 
> ;; ANSWER SECTION:
> amazon.in.              3599    IN      HINFO   "RFC8482" ""
> 
> ;; Query time: 40 msec
> ;; SERVER: 8.8.8.8#53(8.8.8.8)
> ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
> ;; MSG SIZE  rcvd: 59
> 
> It sometimes provides another response. But the problem is that behaviour
> with ANY is not stable.
> The present and the future of ANY are hazy. Read more here:
> https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
> 
> If you don't see the problem please provide your opinion. I would like to
> find solution with ANY but it seems it is impossible.
> 
> So what do you think?
> 
> On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <barry.scott at forcepoint.com>
> wrote:
> 
> > Answers to but your emails in line.
> >
> > I've added the twisted list back in so others can comment.
> >
> > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> > > As additional information you can check how operation system works with
> > dns.
> > > You can run
> > >
> > > *sudo tcpdump -i lo -v port 53*
> > > as UDP local sniffer.
> >
> > Agreed great tool to debug this stuff with.
> > And use wireshark to decode the output.
> >
> > > And run
> > >
> > > *dig google.com <http://google.com>*
> > >
> > > And you will see that it makes A request. Not ANY
> >
> > That is the dig default to use A. Use this to do a any query.
> >
> >    dig google.com any
> >
> > I checked the man page to see if anything extra can be printed but it
> > looks like
> > the default is to print everything dig knows how to print. The options only
> > remove output it seems.
> >
> > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com> wrote:
> > >
> > > > Yes. You are correct. My local dns just is not stable. But try this:
> > > >
> > > > python3.8 dns_lookup6.py amazon.in
> > > >
> > > > It provides response:
> > > >
> > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN ttl=3599s
> > > > auth=False>], [], [])
> > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN ttl=3599s
> > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os='' ttl=3599>
> > > >
> > > > There are not CNAME, A, AAAA or NS records. This means that current
> > > > twisted.names.common.extractRecord will not provide IP.
> > > > What do you think about this? May be we should replace dns ANY request
> > > > with A and AAAA?
> >
> > Now that is interesting because dig returns 54 lines of output from:
> >
> >    dig amazon.in any
> >
> > (I won't paste the 54 lines).
> >
> > I good question is why did twisted not see that huge set of records?
> >
> > I'd want to understand why twisted is only seeing the HINFO and not all
> > the other
> > records. Fixing that would, I'm guessing, fix a lot of things.
> >
> > I'm not sure when I can look at this. Do you want to look at the packets
> > that
> > twisted sends and receives and compared to dig?
> >
> > Barry
> >
> >
> >
> > > >
> > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
> > barry.scott at forcepoint.com>
> > > > wrote:
> > > > >
> > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > > > I continue to investigate the issue. I try to call your script like
> > > > this:
> > > > > >
> > > > > > python dns_lookup6.py www.washingtonexaminer.com
> > > > > >
> > > > > > And get response:
> > > > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > > > twisted.names.error.DNSServerError: <Message id=55958 rCode=2
> > > > > > maxSize=0 flags=answer,recDes,recAv
> > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
> > > > > > result.value.__dict__ {}
> > > > > >
> > > > > > Is that ok?
> > > > > >
> > > > > The output I get is this:
> > > > >
> > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
> > > > > Took: 0.029293
> > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com type=CNAME
> > > > class=IN ttl=37s auth=False>], [], [])
> > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com type=CNAME
> > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
> > > > >
> > > > > And this is the output of dig:
> > > > >
> > > > > $ dig www.washingtonexaminer.com
> > > > >
> > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
> > www.washingtonexaminer.com
> > > > > ;; global options: +cmd
> > > > > ;; Got answer:
> > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1
> > > > >
> > > > > ;; OPT PSEUDOSECTION:
> > > > > ; EDNS: version: 0, flags:; udp: 4000
> > > > > ;; QUESTION SECTION:
> > > > > ;www.washingtonexaminer.com.    IN      A
> > > > >
> > > > > ;; ANSWER SECTION:
> > > > > www.washingtonexaminer.com. 599 IN      CNAME
> > > > 4067e1ed38.10005.sucurifirewall.com.
> > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A  192.124.249.5
> > > > >
> > > > > ;; Query time: 50 msec
> > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > > > ;; MSG SIZE  rcvd: 117
> > > > >
> > > > > Barry
> > > > >
> > > > >
> > > > >
> > > >
> > >
> >
> >
> >
> >
> >
> 





From jasperisjaded at gmail.com  Fri Dec 11 06:18:32 2020
From: jasperisjaded at gmail.com (Jasper Phillips)
Date: Fri, 11 Dec 2020 05:18:32 -0800
Subject: [Twisted-Python] Unjellying and circular references?
Message-ID: <CABoLKHAd0ZCXY9xr1q+heutmKwPEh5vShW0TGy+Rstbf-uNa3Q@mail.gmail.com>

I'm using perspective broker to transfer objects in a networked game, which
I'm having trouble unjellying -- the remote versions wind up with dangling
twisted.persisted.crefutil._Dereference instances, so don't match the
original objects.

I'm seeing this for objects that have circular references to each other.
I've refactored things to mostly avoid circular references and sidestep
this, but have one remaining case where I find circular references mean
clearer code that I'm reluctant to refactor.

Is there some trick I'm missing to avoid _Dereferences?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/2fb3f944/attachment.htm>

From exarkun at twistedmatrix.com  Fri Dec 11 07:04:49 2020
From: exarkun at twistedmatrix.com (Jean-Paul Calderone)
Date: Fri, 11 Dec 2020 09:04:49 -0500
Subject: [Twisted-Python] Unjellying and circular references?
In-Reply-To: <CABoLKHAd0ZCXY9xr1q+heutmKwPEh5vShW0TGy+Rstbf-uNa3Q@mail.gmail.com>
References: <CABoLKHAd0ZCXY9xr1q+heutmKwPEh5vShW0TGy+Rstbf-uNa3Q@mail.gmail.com>
Message-ID: <CAEeXt4PYmWDUzUOabviMw-OowbLHMMrfkgA4xV-ekdLp4AZCQQ@mail.gmail.com>

On Fri, Dec 11, 2020 at 8:19 AM Jasper Phillips <jasperisjaded at gmail.com>
wrote:

> I'm using perspective broker to transfer objects in a networked game,
> which I'm having trouble unjellying -- the remote versions wind up with
> dangling twisted.persisted.crefutil._Dereference instances, so don't match
> the original objects.
>

Hi!

I'd strongly suggest you switch to a different protocol.  HTTP is quite
capable.  It has some annoying corners but you can avoid them if you
control the client and the server.  If you really want a Twisted-originated
protocol, AMP is a much better choice than PB.  It offers a little bit more
functionality than HTTP without going to the extreme complexity of PB (I am
not going to try to explain those complexities here, I'm just offering my
personal conclusion based on 20 years of experience developing and/or using
Twisted).

This is not to say that PB is the wrong choice for all applications ... but
probably almost all.


> I'm seeing this for objects that have circular references to each other.
> I've refactored things to mostly avoid circular references and sidestep
> this, but have one remaining case where I find circular references mean
> clearer code that I'm reluctant to refactor.
>
> Is there some trick I'm missing to avoid _Dereferences?
>

No, it's supposed to Just Work™ so you've found a bug in some part of the
implementation.  If you can produce a minimal reproducing example then it
may be worth a bug report.  But after that, I'd suggest investigating HTTP
or AMP as a replacement for PB.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/5f253b6d/attachment.htm>

From kuchaspama at gmail.com  Fri Dec 11 07:23:49 2020
From: kuchaspama at gmail.com (spam tam)
Date: Fri, 11 Dec 2020 17:23:49 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <2489518.k3LOHGUjKi@fpbarry>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2901313.CbtlEUcBR6@fpbarry>
 <CANUeS4QRUJi9rSyVR5Tn0iuP6Tqwqg8XJjttKwAV+ru0kpv_wA@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
Message-ID: <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>

Dis you read the whole my email?
Did you read this:
https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/

ANY is not supported by internet. Sometime works sometime not

Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com>:

> On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
> > I would like to find problems with ANY. But I think that there is no
> > problem.
> > DNS servers don't provide standard response for ANY request. My local
> > machine doesn't provide correct response for request:
>
> So you need to fix your network infra not twisted right?
>
> Barry
>
>
> >
> > $ dig amazon.in any
> >
> > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
> > ;; global options: +cmd
> > ;; connection timed out; no servers could be reached
> >
> > My VPS server provide such response:
> >
> > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
> > ;; global options: +cmd
> > ;; Got answer:
> > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
> > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
> >
> > ;; OPT PSEUDOSECTION:
> > ; EDNS: version: 0, flags:; udp: 512
> > ;; QUESTION SECTION:
> > ;amazon.in.                     IN      ANY
> >
> > ;; ANSWER SECTION:
> > amazon.in.              3599    IN      HINFO   "RFC8482" ""
> >
> > ;; Query time: 40 msec
> > ;; SERVER: 8.8.8.8#53(8.8.8.8)
> > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
> > ;; MSG SIZE  rcvd: 59
> >
> > It sometimes provides another response. But the problem is that behaviour
> > with ANY is not stable.
> > The present and the future of ANY are hazy. Read more here:
> > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
> >
> > If you don't see the problem please provide your opinion. I would like to
> > find solution with ANY but it seems it is impossible.
> >
> > So what do you think?
> >
> > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <barry.scott at forcepoint.com>
> > wrote:
> >
> > > Answers to but your emails in line.
> > >
> > > I've added the twisted list back in so others can comment.
> > >
> > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> > > > As additional information you can check how operation system works
> with
> > > dns.
> > > > You can run
> > > >
> > > > *sudo tcpdump -i lo -v port 53*
> > > > as UDP local sniffer.
> > >
> > > Agreed great tool to debug this stuff with.
> > > And use wireshark to decode the output.
> > >
> > > > And run
> > > >
> > > > *dig google.com <http://google.com>*
> > > >
> > > > And you will see that it makes A request. Not ANY
> > >
> > > That is the dig default to use A. Use this to do a any query.
> > >
> > >    dig google.com any
> > >
> > > I checked the man page to see if anything extra can be printed but it
> > > looks like
> > > the default is to print everything dig knows how to print. The options
> only
> > > remove output it seems.
> > >
> > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com>
> wrote:
> > > >
> > > > > Yes. You are correct. My local dns just is not stable. But try
> this:
> > > > >
> > > > > python3.8 dns_lookup6.py amazon.in
> > > > >
> > > > > It provides response:
> > > > >
> > > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN
> ttl=3599s
> > > > > auth=False>], [], [])
> > > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN
> ttl=3599s
> > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os='' ttl=3599>
> > > > >
> > > > > There are not CNAME, A, AAAA or NS records. This means that current
> > > > > twisted.names.common.extractRecord will not provide IP.
> > > > > What do you think about this? May be we should replace dns ANY
> request
> > > > > with A and AAAA?
> > >
> > > Now that is interesting because dig returns 54 lines of output from:
> > >
> > >    dig amazon.in any
> > >
> > > (I won't paste the 54 lines).
> > >
> > > I good question is why did twisted not see that huge set of records?
> > >
> > > I'd want to understand why twisted is only seeing the HINFO and not all
> > > the other
> > > records. Fixing that would, I'm guessing, fix a lot of things.
> > >
> > > I'm not sure when I can look at this. Do you want to look at the
> packets
> > > that
> > > twisted sends and receives and compared to dig?
> > >
> > > Barry
> > >
> > >
> > >
> > > > >
> > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
> > > barry.scott at forcepoint.com>
> > > > > wrote:
> > > > > >
> > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > > > > I continue to investigate the issue. I try to call your script
> like
> > > > > this:
> > > > > > >
> > > > > > > python dns_lookup6.py www.washingtonexaminer.com
> > > > > > >
> > > > > > > And get response:
> > > > > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > > > > twisted.names.error.DNSServerError: <Message id=55958 rCode=2
> > > > > > > maxSize=0 flags=answer,recDes,recAv
> > > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
> > > > > > > result.value.__dict__ {}
> > > > > > >
> > > > > > > Is that ok?
> > > > > > >
> > > > > > The output I get is this:
> > > > > >
> > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
> > > > > > Took: 0.029293
> > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com
> type=CNAME
> > > > > class=IN ttl=37s auth=False>], [], [])
> > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com
> type=CNAME
> > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
> > > > > >
> > > > > > And this is the output of dig:
> > > > > >
> > > > > > $ dig www.washingtonexaminer.com
> > > > > >
> > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
> > > www.washingtonexaminer.com
> > > > > > ;; global options: +cmd
> > > > > > ;; Got answer:
> > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
> ADDITIONAL: 1
> > > > > >
> > > > > > ;; OPT PSEUDOSECTION:
> > > > > > ; EDNS: version: 0, flags:; udp: 4000
> > > > > > ;; QUESTION SECTION:
> > > > > > ;www.washingtonexaminer.com.    IN      A
> > > > > >
> > > > > > ;; ANSWER SECTION:
> > > > > > www.washingtonexaminer.com. 599 IN      CNAME
> > > > > 4067e1ed38.10005.sucurifirewall.com.
> > > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A  192.124.249.5
> > > > > >
> > > > > > ;; Query time: 50 msec
> > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > > > > ;; MSG SIZE  rcvd: 117
> > > > > >
> > > > > > Barry
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > >
> > >
> > >
> > >
> > >
> > >
> >
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/b99b8525/attachment-0001.htm>

From barry.scott at forcepoint.com  Fri Dec 11 08:03:14 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Fri, 11 Dec 2020 15:03:14 +0000
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
 <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
Message-ID: <36543311.10thIPus4b@fpbarry>

On Friday, 11 December 2020 14:23:49 GMT spam tam wrote:
> Dis you read the whole my email?
> Did you read this:
> https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
> 
> ANY is not supported by internet. Sometime works sometime not

Oh I missed that. That is very interesting.
Is that what you are trying to fix in twisted? The use of ANY?

Barry

> 
> Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com>:
> 
> > On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
> > > I would like to find problems with ANY. But I think that there is no
> > > problem.
> > > DNS servers don't provide standard response for ANY request. My local
> > > machine doesn't provide correct response for request:
> >
> > So you need to fix your network infra not twisted right?
> >
> > Barry
> >
> >
> > >
> > > $ dig amazon.in any
> > >
> > > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
> > > ;; global options: +cmd
> > > ;; connection timed out; no servers could be reached
> > >
> > > My VPS server provide such response:
> > >
> > > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
> > > ;; global options: +cmd
> > > ;; Got answer:
> > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
> > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
> > >
> > > ;; OPT PSEUDOSECTION:
> > > ; EDNS: version: 0, flags:; udp: 512
> > > ;; QUESTION SECTION:
> > > ;amazon.in.                     IN      ANY
> > >
> > > ;; ANSWER SECTION:
> > > amazon.in.              3599    IN      HINFO   "RFC8482" ""
> > >
> > > ;; Query time: 40 msec
> > > ;; SERVER: 8.8.8.8#53(8.8.8.8)
> > > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
> > > ;; MSG SIZE  rcvd: 59
> > >
> > > It sometimes provides another response. But the problem is that behaviour
> > > with ANY is not stable.
> > > The present and the future of ANY are hazy. Read more here:
> > > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
> > >
> > > If you don't see the problem please provide your opinion. I would like to
> > > find solution with ANY but it seems it is impossible.
> > >
> > > So what do you think?
> > >
> > > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <barry.scott at forcepoint.com>
> > > wrote:
> > >
> > > > Answers to but your emails in line.
> > > >
> > > > I've added the twisted list back in so others can comment.
> > > >
> > > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> > > > > As additional information you can check how operation system works
> > with
> > > > dns.
> > > > > You can run
> > > > >
> > > > > *sudo tcpdump -i lo -v port 53*
> > > > > as UDP local sniffer.
> > > >
> > > > Agreed great tool to debug this stuff with.
> > > > And use wireshark to decode the output.
> > > >
> > > > > And run
> > > > >
> > > > > *dig google.com <http://google.com>*
> > > > >
> > > > > And you will see that it makes A request. Not ANY
> > > >
> > > > That is the dig default to use A. Use this to do a any query.
> > > >
> > > >    dig google.com any
> > > >
> > > > I checked the man page to see if anything extra can be printed but it
> > > > looks like
> > > > the default is to print everything dig knows how to print. The options
> > only
> > > > remove output it seems.
> > > >
> > > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com>
> > wrote:
> > > > >
> > > > > > Yes. You are correct. My local dns just is not stable. But try
> > this:
> > > > > >
> > > > > > python3.8 dns_lookup6.py amazon.in
> > > > > >
> > > > > > It provides response:
> > > > > >
> > > > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN
> > ttl=3599s
> > > > > > auth=False>], [], [])
> > > > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN
> > ttl=3599s
> > > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os='' ttl=3599>
> > > > > >
> > > > > > There are not CNAME, A, AAAA or NS records. This means that current
> > > > > > twisted.names.common.extractRecord will not provide IP.
> > > > > > What do you think about this? May be we should replace dns ANY
> > request
> > > > > > with A and AAAA?
> > > >
> > > > Now that is interesting because dig returns 54 lines of output from:
> > > >
> > > >    dig amazon.in any
> > > >
> > > > (I won't paste the 54 lines).
> > > >
> > > > I good question is why did twisted not see that huge set of records?
> > > >
> > > > I'd want to understand why twisted is only seeing the HINFO and not all
> > > > the other
> > > > records. Fixing that would, I'm guessing, fix a lot of things.
> > > >
> > > > I'm not sure when I can look at this. Do you want to look at the
> > packets
> > > > that
> > > > twisted sends and receives and compared to dig?
> > > >
> > > > Barry
> > > >
> > > >
> > > >
> > > > > >
> > > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
> > > > barry.scott at forcepoint.com>
> > > > > > wrote:
> > > > > > >
> > > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > > > > > I continue to investigate the issue. I try to call your script
> > like
> > > > > > this:
> > > > > > > >
> > > > > > > > python dns_lookup6.py www.washingtonexaminer.com
> > > > > > > >
> > > > > > > > And get response:
> > > > > > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > > > > > twisted.names.error.DNSServerError: <Message id=55958 rCode=2
> > > > > > > > maxSize=0 flags=answer,recDes,recAv
> > > > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
> > > > > > > > result.value.__dict__ {}
> > > > > > > >
> > > > > > > > Is that ok?
> > > > > > > >
> > > > > > > The output I get is this:
> > > > > > >
> > > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
> > > > > > > Took: 0.029293
> > > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com
> > type=CNAME
> > > > > > class=IN ttl=37s auth=False>], [], [])
> > > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com
> > type=CNAME
> > > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > > > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
> > > > > > >
> > > > > > > And this is the output of dig:
> > > > > > >
> > > > > > > $ dig www.washingtonexaminer.com
> > > > > > >
> > > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
> > > > www.washingtonexaminer.com
> > > > > > > ;; global options: +cmd
> > > > > > > ;; Got answer:
> > > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
> > ADDITIONAL: 1
> > > > > > >
> > > > > > > ;; OPT PSEUDOSECTION:
> > > > > > > ; EDNS: version: 0, flags:; udp: 4000
> > > > > > > ;; QUESTION SECTION:
> > > > > > > ;www.washingtonexaminer.com.    IN      A
> > > > > > >
> > > > > > > ;; ANSWER SECTION:
> > > > > > > www.washingtonexaminer.com. 599 IN      CNAME
> > > > > > 4067e1ed38.10005.sucurifirewall.com.
> > > > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A  192.124.249.5
> > > > > > >
> > > > > > > ;; Query time: 50 msec
> > > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > > > > > ;; MSG SIZE  rcvd: 117
> > > > > > >
> > > > > > > Barry
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> >
> >
> >
> >
> >
> 





From kuchaspama at gmail.com  Fri Dec 11 08:30:30 2020
From: kuchaspama at gmail.com (spam tam)
Date: Fri, 11 Dec 2020 18:30:30 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <36543311.10thIPus4b@fpbarry>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
 <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
 <36543311.10thIPus4b@fpbarry>
Message-ID: <CANUeS4Tvp+mssLv7x0nmvrFgpDJptYEcYNz7pBPyEi+B1AQgXw@mail.gmail.com>

Yes. I would like to replace ANY with A and AAAA requests.
I created pull request: https://github.com/twisted/twisted/pull/1488
It's an easy solution. I just request for A records and if A doesn't
provide IP I create AAAA request.

On Fri, Dec 11, 2020 at 6:03 PM Barry Scott <barry.scott at forcepoint.com>
wrote:

> On Friday, 11 December 2020 14:23:49 GMT spam tam wrote:
> > Dis you read the whole my email?
> > Did you read this:
> > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
> >
> > ANY is not supported by internet. Sometime works sometime not
>
> Oh I missed that. That is very interesting.
> Is that what you are trying to fix in twisted? The use of ANY?
>
> Barry
>
> >
> > Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com>:
> >
> > > On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
> > > > I would like to find problems with ANY. But I think that there is no
> > > > problem.
> > > > DNS servers don't provide standard response for ANY request. My local
> > > > machine doesn't provide correct response for request:
> > >
> > > So you need to fix your network infra not twisted right?
> > >
> > > Barry
> > >
> > >
> > > >
> > > > $ dig amazon.in any
> > > >
> > > > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
> > > > ;; global options: +cmd
> > > > ;; connection timed out; no servers could be reached
> > > >
> > > > My VPS server provide such response:
> > > >
> > > > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
> > > > ;; global options: +cmd
> > > > ;; Got answer:
> > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
> > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
> > > >
> > > > ;; OPT PSEUDOSECTION:
> > > > ; EDNS: version: 0, flags:; udp: 512
> > > > ;; QUESTION SECTION:
> > > > ;amazon.in.                     IN      ANY
> > > >
> > > > ;; ANSWER SECTION:
> > > > amazon.in.              3599    IN      HINFO   "RFC8482" ""
> > > >
> > > > ;; Query time: 40 msec
> > > > ;; SERVER: 8.8.8.8#53(8.8.8.8)
> > > > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
> > > > ;; MSG SIZE  rcvd: 59
> > > >
> > > > It sometimes provides another response. But the problem is that
> behaviour
> > > > with ANY is not stable.
> > > > The present and the future of ANY are hazy. Read more here:
> > > > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
> > > >
> > > > If you don't see the problem please provide your opinion. I would
> like to
> > > > find solution with ANY but it seems it is impossible.
> > > >
> > > > So what do you think?
> > > >
> > > > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <
> barry.scott at forcepoint.com>
> > > > wrote:
> > > >
> > > > > Answers to but your emails in line.
> > > > >
> > > > > I've added the twisted list back in so others can comment.
> > > > >
> > > > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> > > > > > As additional information you can check how operation system
> works
> > > with
> > > > > dns.
> > > > > > You can run
> > > > > >
> > > > > > *sudo tcpdump -i lo -v port 53*
> > > > > > as UDP local sniffer.
> > > > >
> > > > > Agreed great tool to debug this stuff with.
> > > > > And use wireshark to decode the output.
> > > > >
> > > > > > And run
> > > > > >
> > > > > > *dig google.com <http://google.com>*
> > > > > >
> > > > > > And you will see that it makes A request. Not ANY
> > > > >
> > > > > That is the dig default to use A. Use this to do a any query.
> > > > >
> > > > >    dig google.com any
> > > > >
> > > > > I checked the man page to see if anything extra can be printed but
> it
> > > > > looks like
> > > > > the default is to print everything dig knows how to print. The
> options
> > > only
> > > > > remove output it seems.
> > > > >
> > > > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com>
> > > wrote:
> > > > > >
> > > > > > > Yes. You are correct. My local dns just is not stable. But try
> > > this:
> > > > > > >
> > > > > > > python3.8 dns_lookup6.py amazon.in
> > > > > > >
> > > > > > > It provides response:
> > > > > > >
> > > > > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN
> > > ttl=3599s
> > > > > > > auth=False>], [], [])
> > > > > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN
> > > ttl=3599s
> > > > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os=''
> ttl=3599>
> > > > > > >
> > > > > > > There are not CNAME, A, AAAA or NS records. This means that
> current
> > > > > > > twisted.names.common.extractRecord will not provide IP.
> > > > > > > What do you think about this? May be we should replace dns ANY
> > > request
> > > > > > > with A and AAAA?
> > > > >
> > > > > Now that is interesting because dig returns 54 lines of output
> from:
> > > > >
> > > > >    dig amazon.in any
> > > > >
> > > > > (I won't paste the 54 lines).
> > > > >
> > > > > I good question is why did twisted not see that huge set of
> records?
> > > > >
> > > > > I'd want to understand why twisted is only seeing the HINFO and
> not all
> > > > > the other
> > > > > records. Fixing that would, I'm guessing, fix a lot of things.
> > > > >
> > > > > I'm not sure when I can look at this. Do you want to look at the
> > > packets
> > > > > that
> > > > > twisted sends and receives and compared to dig?
> > > > >
> > > > > Barry
> > > > >
> > > > >
> > > > >
> > > > > > >
> > > > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
> > > > > barry.scott at forcepoint.com>
> > > > > > > wrote:
> > > > > > > >
> > > > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > > > > > > I continue to investigate the issue. I try to call your
> script
> > > like
> > > > > > > this:
> > > > > > > > >
> > > > > > > > > python dns_lookup6.py www.washingtonexaminer.com
> > > > > > > > >
> > > > > > > > > And get response:
> > > > > > > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > > > > > > twisted.names.error.DNSServerError: <Message id=55958
> rCode=2
> > > > > > > > > maxSize=0 flags=answer,recDes,recAv
> > > > > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
> > > > > > > > > result.value.__dict__ {}
> > > > > > > > >
> > > > > > > > > Is that ok?
> > > > > > > > >
> > > > > > > > The output I get is this:
> > > > > > > >
> > > > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
> > > > > > > > Took: 0.029293
> > > > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com
> > > type=CNAME
> > > > > > > class=IN ttl=37s auth=False>], [], [])
> > > > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com
> > > type=CNAME
> > > > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > > > > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
> > > > > > > >
> > > > > > > > And this is the output of dig:
> > > > > > > >
> > > > > > > > $ dig www.washingtonexaminer.com
> > > > > > > >
> > > > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
> > > > > www.washingtonexaminer.com
> > > > > > > > ;; global options: +cmd
> > > > > > > > ;; Got answer:
> > > > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
> > > ADDITIONAL: 1
> > > > > > > >
> > > > > > > > ;; OPT PSEUDOSECTION:
> > > > > > > > ; EDNS: version: 0, flags:; udp: 4000
> > > > > > > > ;; QUESTION SECTION:
> > > > > > > > ;www.washingtonexaminer.com.    IN      A
> > > > > > > >
> > > > > > > > ;; ANSWER SECTION:
> > > > > > > > www.washingtonexaminer.com. 599 IN      CNAME
> > > > > > > 4067e1ed38.10005.sucurifirewall.com.
> > > > > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A
> 192.124.249.5
> > > > > > > >
> > > > > > > > ;; Query time: 50 msec
> > > > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > > > > > > ;; MSG SIZE  rcvd: 117
> > > > > > > >
> > > > > > > > Barry
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > >
> > >
> > >
> > >
> > >
> >
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/de5bed61/attachment-0001.htm>

From exarkun at twistedmatrix.com  Fri Dec 11 08:43:52 2020
From: exarkun at twistedmatrix.com (Jean-Paul Calderone)
Date: Fri, 11 Dec 2020 10:43:52 -0500
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4Tvp+mssLv7x0nmvrFgpDJptYEcYNz7pBPyEi+B1AQgXw@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
 <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
 <36543311.10thIPus4b@fpbarry>
 <CANUeS4Tvp+mssLv7x0nmvrFgpDJptYEcYNz7pBPyEi+B1AQgXw@mail.gmail.com>
Message-ID: <CAEeXt4O=hA+c1j7FDXsT98Zka7YAPfFyO7pFHsOVXuTPgTZ0HQ@mail.gmail.com>

On Fri, Dec 11, 2020 at 10:31 AM spam tam <kuchaspama at gmail.com> wrote:

> Yes. I would like to replace ANY with A and AAAA requests.
> I created pull request: https://github.com/twisted/twisted/pull/1488
> It's an easy solution. I just request for A records and if A doesn't
> provide IP I create AAAA request.
>

Thanks for your work on this so far.  Are you interested in finishing up
the PR (at least go down the rest of the checklist)?  If so, wonderful.  If
not, it would be good to know and maybe someone else can pick up the task
from here.

Jean-Paul


>
> On Fri, Dec 11, 2020 at 6:03 PM Barry Scott <barry.scott at forcepoint.com>
> wrote:
>
>> On Friday, 11 December 2020 14:23:49 GMT spam tam wrote:
>> > Dis you read the whole my email?
>> > Did you read this:
>> > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
>> >
>> > ANY is not supported by internet. Sometime works sometime not
>>
>> Oh I missed that. That is very interesting.
>> Is that what you are trying to fix in twisted? The use of ANY?
>>
>> Barry
>>
>> >
>> > Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com>:
>> >
>> > > On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
>> > > > I would like to find problems with ANY. But I think that there is no
>> > > > problem.
>> > > > DNS servers don't provide standard response for ANY request. My
>> local
>> > > > machine doesn't provide correct response for request:
>> > >
>> > > So you need to fix your network infra not twisted right?
>> > >
>> > > Barry
>> > >
>> > >
>> > > >
>> > > > $ dig amazon.in any
>> > > >
>> > > > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
>> > > > ;; global options: +cmd
>> > > > ;; connection timed out; no servers could be reached
>> > > >
>> > > > My VPS server provide such response:
>> > > >
>> > > > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
>> > > > ;; global options: +cmd
>> > > > ;; Got answer:
>> > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
>> > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
>> > > >
>> > > > ;; OPT PSEUDOSECTION:
>> > > > ; EDNS: version: 0, flags:; udp: 512
>> > > > ;; QUESTION SECTION:
>> > > > ;amazon.in.                     IN      ANY
>> > > >
>> > > > ;; ANSWER SECTION:
>> > > > amazon.in.              3599    IN      HINFO   "RFC8482" ""
>> > > >
>> > > > ;; Query time: 40 msec
>> > > > ;; SERVER: 8.8.8.8#53(8.8.8.8)
>> > > > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
>> > > > ;; MSG SIZE  rcvd: 59
>> > > >
>> > > > It sometimes provides another response. But the problem is that
>> behaviour
>> > > > with ANY is not stable.
>> > > > The present and the future of ANY are hazy. Read more here:
>> > > > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
>> > > >
>> > > > If you don't see the problem please provide your opinion. I would
>> like to
>> > > > find solution with ANY but it seems it is impossible.
>> > > >
>> > > > So what do you think?
>> > > >
>> > > > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <
>> barry.scott at forcepoint.com>
>> > > > wrote:
>> > > >
>> > > > > Answers to but your emails in line.
>> > > > >
>> > > > > I've added the twisted list back in so others can comment.
>> > > > >
>> > > > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
>> > > > > > As additional information you can check how operation system
>> works
>> > > with
>> > > > > dns.
>> > > > > > You can run
>> > > > > >
>> > > > > > *sudo tcpdump -i lo -v port 53*
>> > > > > > as UDP local sniffer.
>> > > > >
>> > > > > Agreed great tool to debug this stuff with.
>> > > > > And use wireshark to decode the output.
>> > > > >
>> > > > > > And run
>> > > > > >
>> > > > > > *dig google.com <http://google.com>*
>> > > > > >
>> > > > > > And you will see that it makes A request. Not ANY
>> > > > >
>> > > > > That is the dig default to use A. Use this to do a any query.
>> > > > >
>> > > > >    dig google.com any
>> > > > >
>> > > > > I checked the man page to see if anything extra can be printed
>> but it
>> > > > > looks like
>> > > > > the default is to print everything dig knows how to print. The
>> options
>> > > only
>> > > > > remove output it seems.
>> > > > >
>> > > > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com>
>> > > wrote:
>> > > > > >
>> > > > > > > Yes. You are correct. My local dns just is not stable. But try
>> > > this:
>> > > > > > >
>> > > > > > > python3.8 dns_lookup6.py amazon.in
>> > > > > > >
>> > > > > > > It provides response:
>> > > > > > >
>> > > > > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN
>> > > ttl=3599s
>> > > > > > > auth=False>], [], [])
>> > > > > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN
>> > > ttl=3599s
>> > > > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os=''
>> ttl=3599>
>> > > > > > >
>> > > > > > > There are not CNAME, A, AAAA or NS records. This means that
>> current
>> > > > > > > twisted.names.common.extractRecord will not provide IP.
>> > > > > > > What do you think about this? May be we should replace dns ANY
>> > > request
>> > > > > > > with A and AAAA?
>> > > > >
>> > > > > Now that is interesting because dig returns 54 lines of output
>> from:
>> > > > >
>> > > > >    dig amazon.in any
>> > > > >
>> > > > > (I won't paste the 54 lines).
>> > > > >
>> > > > > I good question is why did twisted not see that huge set of
>> records?
>> > > > >
>> > > > > I'd want to understand why twisted is only seeing the HINFO and
>> not all
>> > > > > the other
>> > > > > records. Fixing that would, I'm guessing, fix a lot of things.
>> > > > >
>> > > > > I'm not sure when I can look at this. Do you want to look at the
>> > > packets
>> > > > > that
>> > > > > twisted sends and receives and compared to dig?
>> > > > >
>> > > > > Barry
>> > > > >
>> > > > >
>> > > > >
>> > > > > > >
>> > > > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
>> > > > > barry.scott at forcepoint.com>
>> > > > > > > wrote:
>> > > > > > > >
>> > > > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
>> > > > > > > > > I continue to investigate the issue. I try to call your
>> script
>> > > like
>> > > > > > > this:
>> > > > > > > > >
>> > > > > > > > > python dns_lookup6.py www.washingtonexaminer.com
>> > > > > > > > >
>> > > > > > > > > And get response:
>> > > > > > > > > dnsLookupFailed <twisted.python.failure.Failure
>> > > > > > > > > twisted.names.error.DNSServerError: <Message id=55958
>> rCode=2
>> > > > > > > > > maxSize=0 flags=answer,recDes,recAv
>> > > > > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
>> > > > > > > > > result.value.__dict__ {}
>> > > > > > > > >
>> > > > > > > > > Is that ok?
>> > > > > > > > >
>> > > > > > > > The output I get is this:
>> > > > > > > >
>> > > > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
>> > > > > > > > Took: 0.029293
>> > > > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com
>> > > type=CNAME
>> > > > > > > class=IN ttl=37s auth=False>], [], [])
>> > > > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com
>> > > type=CNAME
>> > > > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
>> > > > > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
>> > > > > > > >
>> > > > > > > > And this is the output of dig:
>> > > > > > > >
>> > > > > > > > $ dig www.washingtonexaminer.com
>> > > > > > > >
>> > > > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
>> > > > > www.washingtonexaminer.com
>> > > > > > > > ;; global options: +cmd
>> > > > > > > > ;; Got answer:
>> > > > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
>> > > > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
>> > > ADDITIONAL: 1
>> > > > > > > >
>> > > > > > > > ;; OPT PSEUDOSECTION:
>> > > > > > > > ; EDNS: version: 0, flags:; udp: 4000
>> > > > > > > > ;; QUESTION SECTION:
>> > > > > > > > ;www.washingtonexaminer.com.    IN      A
>> > > > > > > >
>> > > > > > > > ;; ANSWER SECTION:
>> > > > > > > > www.washingtonexaminer.com. 599 IN      CNAME
>> > > > > > > 4067e1ed38.10005.sucurifirewall.com.
>> > > > > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A
>> 192.124.249.5
>> > > > > > > >
>> > > > > > > > ;; Query time: 50 msec
>> > > > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
>> > > > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
>> > > > > > > > ;; MSG SIZE  rcvd: 117
>> > > > > > > >
>> > > > > > > > Barry
>> > > > > > > >
>> > > > > > > >
>> > > > > > > >
>> > > > > > >
>> > > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > > >
>> > > >
>> > >
>> > >
>> > >
>> > >
>> > >
>> >
>>
>>
>>
>>
>> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/ac54e1fa/attachment.htm>

From kuchaspama at gmail.com  Fri Dec 11 08:59:06 2020
From: kuchaspama at gmail.com (spam tam)
Date: Fri, 11 Dec 2020 18:59:06 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CAEeXt4O=hA+c1j7FDXsT98Zka7YAPfFyO7pFHsOVXuTPgTZ0HQ@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
 <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
 <36543311.10thIPus4b@fpbarry>
 <CANUeS4Tvp+mssLv7x0nmvrFgpDJptYEcYNz7pBPyEi+B1AQgXw@mail.gmail.com>
 <CAEeXt4O=hA+c1j7FDXsT98Zka7YAPfFyO7pFHsOVXuTPgTZ0HQ@mail.gmail.com>
Message-ID: <CANUeS4R7+GF-LdhVBa97QrXcsNJ2XqR2BXR7CSs78ApXg+s6xQ@mail.gmail.com>

I will try to pass the rest of the checklist

On Fri, Dec 11, 2020 at 6:45 PM Jean-Paul Calderone <
exarkun at twistedmatrix.com> wrote:

> On Fri, Dec 11, 2020 at 10:31 AM spam tam <kuchaspama at gmail.com> wrote:
>
>> Yes. I would like to replace ANY with A and AAAA requests.
>> I created pull request: https://github.com/twisted/twisted/pull/1488
>> It's an easy solution. I just request for A records and if A doesn't
>> provide IP I create AAAA request.
>>
>
> Thanks for your work on this so far.  Are you interested in finishing up
> the PR (at least go down the rest of the checklist)?  If so, wonderful.  If
> not, it would be good to know and maybe someone else can pick up the task
> from here.
>
> Jean-Paul
>
>
>>
>> On Fri, Dec 11, 2020 at 6:03 PM Barry Scott <barry.scott at forcepoint.com>
>> wrote:
>>
>>> On Friday, 11 December 2020 14:23:49 GMT spam tam wrote:
>>> > Dis you read the whole my email?
>>> > Did you read this:
>>> > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
>>> >
>>> > ANY is not supported by internet. Sometime works sometime not
>>>
>>> Oh I missed that. That is very interesting.
>>> Is that what you are trying to fix in twisted? The use of ANY?
>>>
>>> Barry
>>>
>>> >
>>> > Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com>:
>>> >
>>> > > On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
>>> > > > I would like to find problems with ANY. But I think that there is
>>> no
>>> > > > problem.
>>> > > > DNS servers don't provide standard response for ANY request. My
>>> local
>>> > > > machine doesn't provide correct response for request:
>>> > >
>>> > > So you need to fix your network infra not twisted right?
>>> > >
>>> > > Barry
>>> > >
>>> > >
>>> > > >
>>> > > > $ dig amazon.in any
>>> > > >
>>> > > > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
>>> > > > ;; global options: +cmd
>>> > > > ;; connection timed out; no servers could be reached
>>> > > >
>>> > > > My VPS server provide such response:
>>> > > >
>>> > > > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
>>> > > > ;; global options: +cmd
>>> > > > ;; Got answer:
>>> > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
>>> > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL:
>>> 1
>>> > > >
>>> > > > ;; OPT PSEUDOSECTION:
>>> > > > ; EDNS: version: 0, flags:; udp: 512
>>> > > > ;; QUESTION SECTION:
>>> > > > ;amazon.in.                     IN      ANY
>>> > > >
>>> > > > ;; ANSWER SECTION:
>>> > > > amazon.in.              3599    IN      HINFO   "RFC8482" ""
>>> > > >
>>> > > > ;; Query time: 40 msec
>>> > > > ;; SERVER: 8.8.8.8#53(8.8.8.8)
>>> > > > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
>>> > > > ;; MSG SIZE  rcvd: 59
>>> > > >
>>> > > > It sometimes provides another response. But the problem is that
>>> behaviour
>>> > > > with ANY is not stable.
>>> > > > The present and the future of ANY are hazy. Read more here:
>>> > > > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
>>> > > >
>>> > > > If you don't see the problem please provide your opinion. I would
>>> like to
>>> > > > find solution with ANY but it seems it is impossible.
>>> > > >
>>> > > > So what do you think?
>>> > > >
>>> > > > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <
>>> barry.scott at forcepoint.com>
>>> > > > wrote:
>>> > > >
>>> > > > > Answers to but your emails in line.
>>> > > > >
>>> > > > > I've added the twisted list back in so others can comment.
>>> > > > >
>>> > > > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
>>> > > > > > As additional information you can check how operation system
>>> works
>>> > > with
>>> > > > > dns.
>>> > > > > > You can run
>>> > > > > >
>>> > > > > > *sudo tcpdump -i lo -v port 53*
>>> > > > > > as UDP local sniffer.
>>> > > > >
>>> > > > > Agreed great tool to debug this stuff with.
>>> > > > > And use wireshark to decode the output.
>>> > > > >
>>> > > > > > And run
>>> > > > > >
>>> > > > > > *dig google.com <http://google.com>*
>>> > > > > >
>>> > > > > > And you will see that it makes A request. Not ANY
>>> > > > >
>>> > > > > That is the dig default to use A. Use this to do a any query.
>>> > > > >
>>> > > > >    dig google.com any
>>> > > > >
>>> > > > > I checked the man page to see if anything extra can be printed
>>> but it
>>> > > > > looks like
>>> > > > > the default is to print everything dig knows how to print. The
>>> options
>>> > > only
>>> > > > > remove output it seems.
>>> > > > >
>>> > > > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com
>>> >
>>> > > wrote:
>>> > > > > >
>>> > > > > > > Yes. You are correct. My local dns just is not stable. But
>>> try
>>> > > this:
>>> > > > > > >
>>> > > > > > > python3.8 dns_lookup6.py amazon.in
>>> > > > > > >
>>> > > > > > > It provides response:
>>> > > > > > >
>>> > > > > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN
>>> > > ttl=3599s
>>> > > > > > > auth=False>], [], [])
>>> > > > > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN
>>> > > ttl=3599s
>>> > > > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os=''
>>> ttl=3599>
>>> > > > > > >
>>> > > > > > > There are not CNAME, A, AAAA or NS records. This means that
>>> current
>>> > > > > > > twisted.names.common.extractRecord will not provide IP.
>>> > > > > > > What do you think about this? May be we should replace dns
>>> ANY
>>> > > request
>>> > > > > > > with A and AAAA?
>>> > > > >
>>> > > > > Now that is interesting because dig returns 54 lines of output
>>> from:
>>> > > > >
>>> > > > >    dig amazon.in any
>>> > > > >
>>> > > > > (I won't paste the 54 lines).
>>> > > > >
>>> > > > > I good question is why did twisted not see that huge set of
>>> records?
>>> > > > >
>>> > > > > I'd want to understand why twisted is only seeing the HINFO and
>>> not all
>>> > > > > the other
>>> > > > > records. Fixing that would, I'm guessing, fix a lot of things.
>>> > > > >
>>> > > > > I'm not sure when I can look at this. Do you want to look at the
>>> > > packets
>>> > > > > that
>>> > > > > twisted sends and receives and compared to dig?
>>> > > > >
>>> > > > > Barry
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > > > >
>>> > > > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
>>> > > > > barry.scott at forcepoint.com>
>>> > > > > > > wrote:
>>> > > > > > > >
>>> > > > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
>>> > > > > > > > > I continue to investigate the issue. I try to call your
>>> script
>>> > > like
>>> > > > > > > this:
>>> > > > > > > > >
>>> > > > > > > > > python dns_lookup6.py www.washingtonexaminer.com
>>> > > > > > > > >
>>> > > > > > > > > And get response:
>>> > > > > > > > > dnsLookupFailed <twisted.python.failure.Failure
>>> > > > > > > > > twisted.names.error.DNSServerError: <Message id=55958
>>> rCode=2
>>> > > > > > > > > maxSize=0 flags=answer,recDes,recAv
>>> > > > > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
>>> > > > > > > > > result.value.__dict__ {}
>>> > > > > > > > >
>>> > > > > > > > > Is that ok?
>>> > > > > > > > >
>>> > > > > > > > The output I get is this:
>>> > > > > > > >
>>> > > > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
>>> > > > > > > > Took: 0.029293
>>> > > > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com
>>> > > type=CNAME
>>> > > > > > > class=IN ttl=37s auth=False>], [], [])
>>> > > > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com
>>> > > type=CNAME
>>> > > > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
>>> > > > > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
>>> > > > > > > >
>>> > > > > > > > And this is the output of dig:
>>> > > > > > > >
>>> > > > > > > > $ dig www.washingtonexaminer.com
>>> > > > > > > >
>>> > > > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
>>> > > > > www.washingtonexaminer.com
>>> > > > > > > > ;; global options: +cmd
>>> > > > > > > > ;; Got answer:
>>> > > > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
>>> > > > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
>>> > > ADDITIONAL: 1
>>> > > > > > > >
>>> > > > > > > > ;; OPT PSEUDOSECTION:
>>> > > > > > > > ; EDNS: version: 0, flags:; udp: 4000
>>> > > > > > > > ;; QUESTION SECTION:
>>> > > > > > > > ;www.washingtonexaminer.com.    IN      A
>>> > > > > > > >
>>> > > > > > > > ;; ANSWER SECTION:
>>> > > > > > > > www.washingtonexaminer.com. 599 IN      CNAME
>>> > > > > > > 4067e1ed38.10005.sucurifirewall.com.
>>> > > > > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A
>>> 192.124.249.5
>>> > > > > > > >
>>> > > > > > > > ;; Query time: 50 msec
>>> > > > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
>>> > > > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
>>> > > > > > > > ;; MSG SIZE  rcvd: 117
>>> > > > > > > >
>>> > > > > > > > Barry
>>> > > > > > > >
>>> > > > > > > >
>>> > > > > > > >
>>> > > > > > >
>>> > > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > >
>>> > >
>>> > >
>>> > >
>>> > >
>>> > >
>>> >
>>>
>>>
>>>
>>>
>>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/ba666947/attachment-0001.htm>

From glyph at twistedmatrix.com  Fri Dec 11 14:48:41 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 11 Dec 2020 13:48:41 -0800
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CANUeS4R7+GF-LdhVBa97QrXcsNJ2XqR2BXR7CSs78ApXg+s6xQ@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
 <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
 <36543311.10thIPus4b@fpbarry>
 <CANUeS4Tvp+mssLv7x0nmvrFgpDJptYEcYNz7pBPyEi+B1AQgXw@mail.gmail.com>
 <CAEeXt4O=hA+c1j7FDXsT98Zka7YAPfFyO7pFHsOVXuTPgTZ0HQ@mail.gmail.com>
 <CANUeS4R7+GF-LdhVBa97QrXcsNJ2XqR2BXR7CSs78ApXg+s6xQ@mail.gmail.com>
Message-ID: <799D7E85-63F1-4894-8399-AEADAE9E3954@twistedmatrix.com>

Thank you for your contribution. I'm looking forward to getting this bug fixed!

-g

> On Dec 11, 2020, at 7:59 AM, spam tam <kuchaspama at gmail.com> wrote:
> 
> I will try to pass the rest of the checklist
> 
> On Fri, Dec 11, 2020 at 6:45 PM Jean-Paul Calderone <exarkun at twistedmatrix.com <mailto:exarkun at twistedmatrix.com>> wrote:
> On Fri, Dec 11, 2020 at 10:31 AM spam tam <kuchaspama at gmail.com <mailto:kuchaspama at gmail.com>> wrote:
> Yes. I would like to replace ANY with A and AAAA requests.
> I created pull request: https://github.com/twisted/twisted/pull/1488 <https://github.com/twisted/twisted/pull/1488>
> It's an easy solution. I just request for A records and if A doesn't provide IP I create AAAA request.
> 
> Thanks for your work on this so far.  Are you interested in finishing up the PR (at least go down the rest of the checklist)?  If so, wonderful.  If not, it would be good to know and maybe someone else can pick up the task from here.
> 
> Jean-Paul
>  
> 
> On Fri, Dec 11, 2020 at 6:03 PM Barry Scott <barry.scott at forcepoint.com <mailto:barry.scott at forcepoint.com>> wrote:
> On Friday, 11 December 2020 14:23:49 GMT spam tam wrote:
> > Dis you read the whole my email?
> > Did you read this:
> > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/ <https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/>
> > 
> > ANY is not supported by internet. Sometime works sometime not
> 
> Oh I missed that. That is very interesting.
> Is that what you are trying to fix in twisted? The use of ANY?
> 
> Barry
> 
> > 
> > Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com <mailto:barry.scott at forcepoint.com>>:
> > 
> > > On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
> > > > I would like to find problems with ANY. But I think that there is no
> > > > problem.
> > > > DNS servers don't provide standard response for ANY request. My local
> > > > machine doesn't provide correct response for request:
> > >
> > > So you need to fix your network infra not twisted right?
> > >
> > > Barry
> > >
> > >
> > > >
> > > > $ dig amazon.in <http://amazon.in/> any
> > > >
> > > > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in <http://amazon.in/> any
> > > > ;; global options: +cmd
> > > > ;; connection timed out; no servers could be reached
> > > >
> > > > My VPS server provide such response:
> > > >
> > > > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in <http://amazon.in/> any
> > > > ;; global options: +cmd
> > > > ;; Got answer:
> > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
> > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
> > > >
> > > > ;; OPT PSEUDOSECTION:
> > > > ; EDNS: version: 0, flags:; udp: 512
> > > > ;; QUESTION SECTION:
> > > > ;amazon.in <http://amazon.in/>.                     IN      ANY
> > > >
> > > > ;; ANSWER SECTION:
> > > > amazon.in <http://amazon.in/>.              3599    IN      HINFO   "RFC8482" ""
> > > >
> > > > ;; Query time: 40 msec
> > > > ;; SERVER: 8.8.8.8#53(8.8.8.8)
> > > > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
> > > > ;; MSG SIZE  rcvd: 59
> > > >
> > > > It sometimes provides another response. But the problem is that behaviour
> > > > with ANY is not stable.
> > > > The present and the future of ANY are hazy. Read more here:
> > > > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/ <https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/>
> > > >
> > > > If you don't see the problem please provide your opinion. I would like to
> > > > find solution with ANY but it seems it is impossible.
> > > >
> > > > So what do you think?
> > > >
> > > > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <barry.scott at forcepoint.com <mailto:barry.scott at forcepoint.com>>
> > > > wrote:
> > > >
> > > > > Answers to but your emails in line.
> > > > >
> > > > > I've added the twisted list back in so others can comment.
> > > > >
> > > > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
> > > > > > As additional information you can check how operation system works
> > > with
> > > > > dns.
> > > > > > You can run
> > > > > >
> > > > > > *sudo tcpdump -i lo -v port 53*
> > > > > > as UDP local sniffer.
> > > > >
> > > > > Agreed great tool to debug this stuff with.
> > > > > And use wireshark to decode the output.
> > > > >
> > > > > > And run
> > > > > >
> > > > > > *dig google.com <http://google.com/> <http://google.com <http://google.com/>>*
> > > > > >
> > > > > > And you will see that it makes A request. Not ANY
> > > > >
> > > > > That is the dig default to use A. Use this to do a any query.
> > > > >
> > > > >    dig google.com <http://google.com/> any
> > > > >
> > > > > I checked the man page to see if anything extra can be printed but it
> > > > > looks like
> > > > > the default is to print everything dig knows how to print. The options
> > > only
> > > > > remove output it seems.
> > > > >
> > > > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com <mailto:kuchaspama at gmail.com>>
> > > wrote:
> > > > > >
> > > > > > > Yes. You are correct. My local dns just is not stable. But try
> > > this:
> > > > > > >
> > > > > > > python3.8 dns_lookup6.py amazon.in <http://amazon.in/>
> > > > > > >
> > > > > > > It provides response:
> > > > > > >
> > > > > > > --- dnsLookupDone ([<RR name=amazon.in <http://amazon.in/> type=HINFO class=IN
> > > ttl=3599s
> > > > > > > auth=False>], [], [])
> > > > > > > --- dnsLookupDone RR <RR name=amazon.in <http://amazon.in/> type=HINFO class=IN
> > > ttl=3599s
> > > > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os='' ttl=3599>
> > > > > > >
> > > > > > > There are not CNAME, A, AAAA or NS records. This means that current
> > > > > > > twisted.names.common.extractRecord will not provide IP.
> > > > > > > What do you think about this? May be we should replace dns ANY
> > > request
> > > > > > > with A and AAAA?
> > > > >
> > > > > Now that is interesting because dig returns 54 lines of output from:
> > > > >
> > > > >    dig amazon.in <http://amazon.in/> any
> > > > >
> > > > > (I won't paste the 54 lines).
> > > > >
> > > > > I good question is why did twisted not see that huge set of records?
> > > > >
> > > > > I'd want to understand why twisted is only seeing the HINFO and not all
> > > > > the other
> > > > > records. Fixing that would, I'm guessing, fix a lot of things.
> > > > >
> > > > > I'm not sure when I can look at this. Do you want to look at the
> > > packets
> > > > > that
> > > > > twisted sends and receives and compared to dig?
> > > > >
> > > > > Barry
> > > > >
> > > > >
> > > > >
> > > > > > >
> > > > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
> > > > > barry.scott at forcepoint.com <mailto:barry.scott at forcepoint.com>>
> > > > > > > wrote:
> > > > > > > >
> > > > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
> > > > > > > > > I continue to investigate the issue. I try to call your script
> > > like
> > > > > > > this:
> > > > > > > > >
> > > > > > > > > python dns_lookup6.py www.washingtonexaminer.com <http://www.washingtonexaminer.com/>
> > > > > > > > >
> > > > > > > > > And get response:
> > > > > > > > > dnsLookupFailed <twisted.python.failure.Failure
> > > > > > > > > twisted.names.error.DNSServerError: <Message id=55958 rCode=2
> > > > > > > > > maxSize=0 flags=answer,recDes,recAv
> > > > > > > > > queries=[Query('www.washingtonexaminer.com <http://www.washingtonexaminer.com/>', 255, 1)]>>
> > > > > > > > > result.value.__dict__ {}
> > > > > > > > >
> > > > > > > > > Is that ok?
> > > > > > > > >
> > > > > > > > The output I get is this:
> > > > > > > >
> > > > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com <http://www.washingtonexaminer.com/>
> > > > > > > > Took: 0.029293
> > > > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com <http://www.washingtonexaminer.com/>
> > > type=CNAME
> > > > > > > class=IN ttl=37s auth=False>], [], [])
> > > > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com <http://www.washingtonexaminer.com/>
> > > type=CNAME
> > > > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
> > > > > > > 4067e1ed38.10005.sucurifirewall.com <http://4067e1ed38.10005.sucurifirewall.com/> ttl=37>
> > > > > > > >
> > > > > > > > And this is the output of dig:
> > > > > > > >
> > > > > > > > $ dig www.washingtonexaminer.com <http://www.washingtonexaminer.com/>
> > > > > > > >
> > > > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
> > > > > www.washingtonexaminer.com <http://www.washingtonexaminer.com/>
> > > > > > > > ;; global options: +cmd
> > > > > > > > ;; Got answer:
> > > > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
> > > > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
> > > ADDITIONAL: 1
> > > > > > > >
> > > > > > > > ;; OPT PSEUDOSECTION:
> > > > > > > > ; EDNS: version: 0, flags:; udp: 4000
> > > > > > > > ;; QUESTION SECTION:
> > > > > > > > ;www.washingtonexaminer.com <http://www.washingtonexaminer.com/>.    IN      A
> > > > > > > >
> > > > > > > > ;; ANSWER SECTION:
> > > > > > > > www.washingtonexaminer.com <http://www.washingtonexaminer.com/>. 599 IN      CNAME
> > > > > > > 4067e1ed38.10005.sucurifirewall.com <http://4067e1ed38.10005.sucurifirewall.com/>.
> > > > > > > > 4067e1ed38.10005.sucurifirewall.com <http://4067e1ed38.10005.sucurifirewall.com/>. 7199 IN A  192.124.249.5
> > > > > > > >
> > > > > > > > ;; Query time: 50 msec
> > > > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
> > > > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
> > > > > > > > ;; MSG SIZE  rcvd: 117
> > > > > > > >
> > > > > > > > Barry
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > >
> > >
> > >
> > >
> > >
> > 
> 
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201211/32eb2f4a/attachment-0001.htm>

From trac at twistedmatrix.com  Sun Dec 13 00:05:15 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 13 Dec 2020 07:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1607843115.91.942081319005457303@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201213/d5bcee87/attachment.htm>

From adi at roiban.ro  Tue Dec 15 17:56:21 2020
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 16 Dec 2020 00:56:21 +0000
Subject: [Twisted-Python] Participating to GitHub Sponsors
Message-ID: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>

Hi,

Does anyone have anything against applying so that Twisted can be on the
waitlist of the GitHub Sponsors ?

https://github.com/sponsors/twisted/waitlist

As far as I know, the money for the Twisted project is managed by the
Software Freedom Conservancy organization and they are already approved
hosts for GitHub Sponsors.

At this point, we only need to press the green button.
The bank account and other administrative issues are already sorted out.

------------

If there are no complaints , I plan to press the green button in 1 week.

We will then have to see how to access those funds via Software Freedom
Conservancy... but that is part 2.

Cheers
-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201216/8aaad180/attachment.htm>

From ian at haywood.id.au  Tue Dec 15 19:48:35 2020
From: ian at haywood.id.au (Ian Haywood)
Date: Wed, 16 Dec 2020 13:48:35 +1100
Subject: [Twisted-Python] Participating to GitHub Sponsors
In-Reply-To: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>
References: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>
Message-ID: <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>

No objection, but any plans for the money? I'd ask for more reviewers, 
I'd like to contribute more to twisted but there's little point without 
access to code review in a reasonable timeframe.

On 16/12/2020 11:56 am, Adi Roiban wrote:
> Hi,
>
> Does anyone have anything against applying so that Twisted can be on 
> the waitlist of the GitHub Sponsors ?
>
> https://github.com/sponsors/twisted/waitlist 
> <https://github.com/sponsors/twisted/waitlist>
>
> As far as I know, the money for the Twisted project is managed by the 
> Software Freedom Conservancy organization and they are already 
> approved hosts for GitHub Sponsors.
>
> At this point, we only need to press the green button.
> The bank account and other administrative issues are already sorted out.
>
> ------------
>
> If there are no complaints , I plan to press the green button in 1 week.
>
> We will then have to see how to access those funds via Software 
> Freedom Conservancy... but that is part 2.
>
> Cheers
> -- 
> Adi Roiban
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201216/723e8bdf/attachment.htm>

From glyph at twistedmatrix.com  Tue Dec 15 21:22:59 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 15 Dec 2020 20:22:59 -0800
Subject: [Twisted-Python] Participating to GitHub Sponsors
In-Reply-To: <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>
References: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>
 <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>
Message-ID: <B710E53B-6FC1-49E7-BF0A-5185DFB7AB03@twistedmatrix.com>

The money is first allocated to keeping the lights on (i.e.: paying for the infrastructure required to host twistedmatrix.com <http://twistedmatrix.com/>).

If we manage to raise enough to go beyond that, then if we can clear the procedural hurdles necessary to spend money (i.e.: the current "project leadership committee" is more than half made up of people who are a. no longer affiliated with the project and b. never answer their email at this point, so we need to sort out some way to resolve that with the Conservancy) we will likely run another Fellowship program - you can see the results of previous programs on https://labs.twistedmatrix.com <https://labs.twistedmatrix.com/>, and yes, it's mostly hiring someone to accelerate code review.

-g

> On Dec 15, 2020, at 6:48 PM, Ian Haywood <ian at haywood.id.au> wrote:
> 
> No objection, but any plans for the money? I'd ask for more reviewers, I'd like to contribute more to twisted but there's little point without access to code review in a reasonable timeframe. 
> 
> On 16/12/2020 11:56 am, Adi Roiban wrote:
>> Hi,
>> 
>> Does anyone have anything against applying so that Twisted can be on the waitlist of the GitHub Sponsors ?  
>> 
>> https://github.com/sponsors/twisted/waitlist <https://github.com/sponsors/twisted/waitlist>
>> 
>> As far as I know, the money for the Twisted project is managed by the Software Freedom Conservancy organization and they are already approved hosts for GitHub Sponsors.
>> 
>> At this point, we only need to press the green button.
>> The bank account and other administrative issues are already sorted out.
>> 
>> ------------
>> 
>> If there are no complaints , I plan to press the green button in 1 week.
>> 
>> We will then have to see how to access those funds via Software Freedom Conservancy... but that is part 2.
>> 
>> Cheers
>> -- 
>> Adi Roiban
>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201215/a62b5469/attachment.htm>

From jasperisjaded at gmail.com  Wed Dec 16 03:21:22 2020
From: jasperisjaded at gmail.com (Jasper Phillips)
Date: Wed, 16 Dec 2020 02:21:22 -0800
Subject: [Twisted-Python] Unjellying and circular references?
In-Reply-To: <CAEeXt4PYmWDUzUOabviMw-OowbLHMMrfkgA4xV-ekdLp4AZCQQ@mail.gmail.com>
References: <CABoLKHAd0ZCXY9xr1q+heutmKwPEh5vShW0TGy+Rstbf-uNa3Q@mail.gmail.com>
 <CAEeXt4PYmWDUzUOabviMw-OowbLHMMrfkgA4xV-ekdLp4AZCQQ@mail.gmail.com>
Message-ID: <CABoLKHAKWRxUbKNSoF+ramTSqjcKNmuQuhMfqs1aOn9e8A3=1A@mail.gmail.com>

On Fri, Dec 11, 2020 at 6:08 AM Jean-Paul Calderone <
exarkun at twistedmatrix.com> wrote:

> On Fri, Dec 11, 2020 at 8:19 AM Jasper Phillips <jasperisjaded at gmail.com>
> wrote:
>
>> I'm using perspective broker to transfer objects in a networked game,
>> which I'm having trouble unjellying -- the remote versions wind up with
>> dangling twisted.persisted.crefutil._Dereference instances, so don't match
>> the original objects.
>>
>
>> I'm seeing this for objects that have circular references to each other.
>> I've refactored things to mostly avoid circular references and sidestep
>> this, but have one remaining case where I find circular references mean
>> clearer code that I'm reluctant to refactor.
>>
>> Is there some trick I'm missing to avoid _Dereferences?
>>
>
> No, it's supposed to Just Work™ so you've found a bug in some part of the
> implementation.  If you can produce a minimal reproducing example then it
> may be worth a bug report.  But after that, I'd suggest investigating HTTP
> or AMP as a replacement for PB.
>

Here's a test case demonstrating the bug:

import sys
from twisted.persisted.crefutil import _Dereference
from twisted.spread             import pb, jelly

class RemoteCopyable( pb.Copyable, pb.RemoteCopy ):  pass
jelly.globalSecurity.allowInstancesOf( RemoteCopyable )
pb.setCopierForClassTree( sys.modules[__name__], pb.Copyable )

if __name__ == '__main__':
    # circular object ref
    cell           = RemoteCopyable()
    cell.link      = RemoteCopyable()
    cell.link.cell = cell

    # Mimic sending across network
    broker         = pb.Broker()
    serializedCell = broker.serialize( cell )
    remoteCell     = broker.unserialize( serializedCell )

    print( _Dereference is type(remoteCell.link.cell) )

This bug stems from twisted.spread.flavors.RemoteCopy.setCopyableState(),
which works fine for Python 2! But the UTF fix for Python 3 broke circular
references. It looks like this:

def setCopyableState(self, state):
    if _PY3:
        state = {x.decode('utf8') if isinstance(x, bytes)
                 else x:y for x,y in state.items()}
    self.__dict__ = state

Here is a simple tweak that fixes the problem:

def setCopyableState(self, state):
    if _PY3:
        for x, y in list(state.items()):
            if isinstance(x, bytes):
                del state[x]
                state[x.decode('utf8')] = y
    self.__dict__ = state


Basically the reference unwinding that takes place in
twisted.spread.jelly._Unjellier._unjelly_reference()'s
call to ref.resolveDependants() relies upon setCopyableStates()'s passed in
state being used directly, such that all matching references' __dict__
point to the same object.

Hope this helps clarify. Is there some more formal location than this list
that you'd like a bug report filed?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201216/d8cc8dd5/attachment-0001.htm>

From adi at roiban.ro  Wed Dec 16 04:17:06 2020
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 16 Dec 2020 11:17:06 +0000
Subject: [Twisted-Python] Participating to GitHub Sponsors
In-Reply-To: <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>
References: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>
 <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>
Message-ID: <CAFycZ9eq9JC2NzT=hDOciYKZtJrXGs7rFwYJfVSjUaOwdTCGWQ@mail.gmail.com>

Hi,

On Wed, 16 Dec 2020 at 02:49, Ian Haywood <ian at haywood.id.au> wrote:

> No objection, but any plans for the money? I'd ask for more reviewers, I'd
> like to contribute more to twisted but there's little point without access
> to code review in a reasonable timeframe.
>

First we need funds... I am sure that we will find a way to spend it well.

Trying to see if we can solve the reviewing queue with money is one
option... but is not that easy.

I am available to review one of your PR in exchange for another review :)

Regards

PS: If you have any conch-ssh PR, send me a message and I will review it
(for free... no reviewed asked in exchange)


> On 16/12/2020 11:56 am, Adi Roiban wrote:
>
> Hi,
>
> Does anyone have anything against applying so that Twisted can be on the
> waitlist of the GitHub Sponsors ?
>
> https://github.com/sponsors/twisted/waitlist
>
> As far as I know, the money for the Twisted project is managed by the
> Software Freedom Conservancy organization and they are already approved
> hosts for GitHub Sponsors.
>
> At this point, we only need to press the green button.
> The bank account and other administrative issues are already sorted out.
>
> ------------
>
> If there are no complaints , I plan to press the green button in 1 week.
>
> We will then have to see how to access those funds via Software Freedom
> Conservancy... but that is part 2.
>
> Cheers
> --
> Adi Roiban
>
> _______________________________________________
> Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttps://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201216/11d135fa/attachment.htm>

From adi at roiban.ro  Wed Dec 16 04:32:47 2020
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 16 Dec 2020 11:32:47 +0000
Subject: [Twisted-Python] Updating the project leadership committee
Message-ID: <CAFycZ9d3MF0Tio7pkkoR3=-Op8DJf4CiEZLJ9+WFzjJtfwNu1A@mail.gmail.com>

Hi,

Based on a comment from Glyph

> The current "project leadership committee" is more than half made up of
people who are a. no longer affiliated with the project and b. never answer
their email at this point,

I started this discussion to see if we can update / refresh the project
leadership committee.

I remember that in 2015 I read the same comment.

Glypy, do you know the required number of members for the committee?

My suggestion is to try to arrange for a committee that is updated every 2
years... or maybe every year.
I can organize the communication and project management stuff.

Here is the list of committers for the last to years

https://github.com/twisted/twisted/graphs/contributors?from=2018-12-16&to=2020-12-16&type=c

This is a quantitative approach... and does not imply quality or
dedication, but I think that is a good starting point for searching for
candidates for the committee.

I can also volunteer to be part of the committee.

Maybe we can create a new list of members for the commitee and then see if
this list will be accepted by theSoftware Freedom Conservancy.

I can also volunteer to do a bit of noise and see if we can raise more
money.

I will not apply for the fellowship, so I hope that in this way we will not
have any complaints about my intentions :)

PS: I have many patches for Twisted that are not commited. I could just
hire another person to "review" them, but I don't think that this is fair.
In fact, all the patches already passed an internal review, done by I
person paid by my company.
So, I hope that we can hire an independent reviewer

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201216/af138939/attachment.htm>

From barry.scott at forcepoint.com  Thu Dec 17 04:59:53 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Thu, 17 Dec 2020 11:59:53 +0000
Subject: [Twisted-Python] Participating to GitHub Sponsors
In-Reply-To: <CAFycZ9eq9JC2NzT=hDOciYKZtJrXGs7rFwYJfVSjUaOwdTCGWQ@mail.gmail.com>
References: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>
 <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>
 <CAFycZ9eq9JC2NzT=hDOciYKZtJrXGs7rFwYJfVSjUaOwdTCGWQ@mail.gmail.com>
Message-ID: <2126163.iZASKD2KPV@fpbarry>

On Wednesday, 16 December 2020 11:17:06 GMT Adi Roiban wrote:
> Hi,
> 
> On Wed, 16 Dec 2020 at 02:49, Ian Haywood <ian at haywood.id.au> wrote:
> 
> > No objection, but any plans for the money? I'd ask for more reviewers, I'd
> > like to contribute more to twisted but there's little point without access
> > to code review in a reasonable timeframe.
> >
> 
> First we need funds... I am sure that we will find a way to spend it well.

It usually for a sponsor to ask what the sponsorship will be used for.
I'd assume that twisted projects needs a plan for how to spend the money to share with the sponsor.

Barry


> 
> Trying to see if we can solve the reviewing queue with money is one
> option... but is not that easy.
> 
> I am available to review one of your PR in exchange for another review :)
> 
> Regards
> 
> PS: If you have any conch-ssh PR, send me a message and I will review it
> (for free... no reviewed asked in exchange)
> 
> 
> > On 16/12/2020 11:56 am, Adi Roiban wrote:
> >
> > Hi,
> >
> > Does anyone have anything against applying so that Twisted can be on the
> > waitlist of the GitHub Sponsors ?
> >
> > https://github.com/sponsors/twisted/waitlist
> >
> > As far as I know, the money for the Twisted project is managed by the
> > Software Freedom Conservancy organization and they are already approved
> > hosts for GitHub Sponsors.
> >
> > At this point, we only need to press the green button.
> > The bank account and other administrative issues are already sorted out.
> >
> > ------------
> >
> > If there are no complaints , I plan to press the green button in 1 week.
> >
> > We will then have to see how to access those funds via Software Freedom
> > Conservancy... but that is part 2.
> >
> > Cheers
> > --
> > Adi Roiban
> >
> > _______________________________________________
> > Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttps://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> 
> 
> 





From kuchaspama at gmail.com  Thu Dec 17 11:43:54 2020
From: kuchaspama at gmail.com (spam tam)
Date: Thu, 17 Dec 2020 21:43:54 +0300
Subject: [Twisted-Python] Current twisted dns client just doesn't work
In-Reply-To: <CAEeXt4O=hA+c1j7FDXsT98Zka7YAPfFyO7pFHsOVXuTPgTZ0HQ@mail.gmail.com>
References: <CANUeS4SwBrTX8U436J4QAt=OxK_sct+q65qcVE9is+Us12=w9g@mail.gmail.com>
 <2489518.k3LOHGUjKi@fpbarry>
 <CANUeS4SBts3cczgJapAA=5mZCnrHmqnvdLGmLTizqc0NS62juQ@mail.gmail.com>
 <36543311.10thIPus4b@fpbarry>
 <CANUeS4Tvp+mssLv7x0nmvrFgpDJptYEcYNz7pBPyEi+B1AQgXw@mail.gmail.com>
 <CAEeXt4O=hA+c1j7FDXsT98Zka7YAPfFyO7pFHsOVXuTPgTZ0HQ@mail.gmail.com>
Message-ID: <CANUeS4QSiReDvfngs71j=CyKT0Mv=-DtJmOKweuZ-OK11uwKrQ@mail.gmail.com>

I finished the PR checklist. If you need something else, please let me know

On Fri, Dec 11, 2020 at 6:45 PM Jean-Paul Calderone <
exarkun at twistedmatrix.com> wrote:

> On Fri, Dec 11, 2020 at 10:31 AM spam tam <kuchaspama at gmail.com> wrote:
>
>> Yes. I would like to replace ANY with A and AAAA requests.
>> I created pull request: https://github.com/twisted/twisted/pull/1488
>> It's an easy solution. I just request for A records and if A doesn't
>> provide IP I create AAAA request.
>>
>
> Thanks for your work on this so far.  Are you interested in finishing up
> the PR (at least go down the rest of the checklist)?  If so, wonderful.  If
> not, it would be good to know and maybe someone else can pick up the task
> from here.
>
> Jean-Paul
>
>
>>
>> On Fri, Dec 11, 2020 at 6:03 PM Barry Scott <barry.scott at forcepoint.com>
>> wrote:
>>
>>> On Friday, 11 December 2020 14:23:49 GMT spam tam wrote:
>>> > Dis you read the whole my email?
>>> > Did you read this:
>>> > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
>>> >
>>> > ANY is not supported by internet. Sometime works sometime not
>>>
>>> Oh I missed that. That is very interesting.
>>> Is that what you are trying to fix in twisted? The use of ANY?
>>>
>>> Barry
>>>
>>> >
>>> > Пт, 11 дек. 2020 г. в 12:26, Barry Scott <barry.scott at forcepoint.com>:
>>> >
>>> > > On Thursday, 10 December 2020 23:29:33 GMT spam tam wrote:
>>> > > > I would like to find problems with ANY. But I think that there is
>>> no
>>> > > > problem.
>>> > > > DNS servers don't provide standard response for ANY request. My
>>> local
>>> > > > machine doesn't provide correct response for request:
>>> > >
>>> > > So you need to fix your network infra not twisted right?
>>> > >
>>> > > Barry
>>> > >
>>> > >
>>> > > >
>>> > > > $ dig amazon.in any
>>> > > >
>>> > > > ; <<>> DiG 9.16.1-Ubuntu <<>> amazon.in any
>>> > > > ;; global options: +cmd
>>> > > > ;; connection timed out; no servers could be reached
>>> > > >
>>> > > > My VPS server provide such response:
>>> > > >
>>> > > > ; <<>> DiG 9.10.3-P4-Ubuntu <<>> amazon.in any
>>> > > > ;; global options: +cmd
>>> > > > ;; Got answer:
>>> > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54130
>>> > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL:
>>> 1
>>> > > >
>>> > > > ;; OPT PSEUDOSECTION:
>>> > > > ; EDNS: version: 0, flags:; udp: 512
>>> > > > ;; QUESTION SECTION:
>>> > > > ;amazon.in.                     IN      ANY
>>> > > >
>>> > > > ;; ANSWER SECTION:
>>> > > > amazon.in.              3599    IN      HINFO   "RFC8482" ""
>>> > > >
>>> > > > ;; Query time: 40 msec
>>> > > > ;; SERVER: 8.8.8.8#53(8.8.8.8)
>>> > > > ;; WHEN: Thu Dec 10 22:10:39 UTC 2020
>>> > > > ;; MSG SIZE  rcvd: 59
>>> > > >
>>> > > > It sometimes provides another response. But the problem is that
>>> behaviour
>>> > > > with ANY is not stable.
>>> > > > The present and the future of ANY are hazy. Read more here:
>>> > > > https://blog.cloudflare.com/rfc8482-saying-goodbye-to-any/
>>> > > >
>>> > > > If you don't see the problem please provide your opinion. I would
>>> like to
>>> > > > find solution with ANY but it seems it is impossible.
>>> > > >
>>> > > > So what do you think?
>>> > > >
>>> > > > On Thu, Dec 10, 2020 at 8:30 PM Barry Scott <
>>> barry.scott at forcepoint.com>
>>> > > > wrote:
>>> > > >
>>> > > > > Answers to but your emails in line.
>>> > > > >
>>> > > > > I've added the twisted list back in so others can comment.
>>> > > > >
>>> > > > > On Wednesday, 9 December 2020 21:17:51 GMT spam tam wrote:
>>> > > > > > As additional information you can check how operation system
>>> works
>>> > > with
>>> > > > > dns.
>>> > > > > > You can run
>>> > > > > >
>>> > > > > > *sudo tcpdump -i lo -v port 53*
>>> > > > > > as UDP local sniffer.
>>> > > > >
>>> > > > > Agreed great tool to debug this stuff with.
>>> > > > > And use wireshark to decode the output.
>>> > > > >
>>> > > > > > And run
>>> > > > > >
>>> > > > > > *dig google.com <http://google.com>*
>>> > > > > >
>>> > > > > > And you will see that it makes A request. Not ANY
>>> > > > >
>>> > > > > That is the dig default to use A. Use this to do a any query.
>>> > > > >
>>> > > > >    dig google.com any
>>> > > > >
>>> > > > > I checked the man page to see if anything extra can be printed
>>> but it
>>> > > > > looks like
>>> > > > > the default is to print everything dig knows how to print. The
>>> options
>>> > > only
>>> > > > > remove output it seems.
>>> > > > >
>>> > > > > > On Wed, Dec 9, 2020 at 11:42 PM spam tam <kuchaspama at gmail.com
>>> >
>>> > > wrote:
>>> > > > > >
>>> > > > > > > Yes. You are correct. My local dns just is not stable. But
>>> try
>>> > > this:
>>> > > > > > >
>>> > > > > > > python3.8 dns_lookup6.py amazon.in
>>> > > > > > >
>>> > > > > > > It provides response:
>>> > > > > > >
>>> > > > > > > --- dnsLookupDone ([<RR name=amazon.in type=HINFO class=IN
>>> > > ttl=3599s
>>> > > > > > > auth=False>], [], [])
>>> > > > > > > --- dnsLookupDone RR <RR name=amazon.in type=HINFO class=IN
>>> > > ttl=3599s
>>> > > > > > > auth=False> type 13 payload <HINFO cpu='RFC8482' os=''
>>> ttl=3599>
>>> > > > > > >
>>> > > > > > > There are not CNAME, A, AAAA or NS records. This means that
>>> current
>>> > > > > > > twisted.names.common.extractRecord will not provide IP.
>>> > > > > > > What do you think about this? May be we should replace dns
>>> ANY
>>> > > request
>>> > > > > > > with A and AAAA?
>>> > > > >
>>> > > > > Now that is interesting because dig returns 54 lines of output
>>> from:
>>> > > > >
>>> > > > >    dig amazon.in any
>>> > > > >
>>> > > > > (I won't paste the 54 lines).
>>> > > > >
>>> > > > > I good question is why did twisted not see that huge set of
>>> records?
>>> > > > >
>>> > > > > I'd want to understand why twisted is only seeing the HINFO and
>>> not all
>>> > > > > the other
>>> > > > > records. Fixing that would, I'm guessing, fix a lot of things.
>>> > > > >
>>> > > > > I'm not sure when I can look at this. Do you want to look at the
>>> > > packets
>>> > > > > that
>>> > > > > twisted sends and receives and compared to dig?
>>> > > > >
>>> > > > > Barry
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > > > >
>>> > > > > > > On Wed, Dec 9, 2020 at 12:16 PM Barry Scott <
>>> > > > > barry.scott at forcepoint.com>
>>> > > > > > > wrote:
>>> > > > > > > >
>>> > > > > > > > On Tuesday, 8 December 2020 21:01:56 GMT spam tam wrote:
>>> > > > > > > > > I continue to investigate the issue. I try to call your
>>> script
>>> > > like
>>> > > > > > > this:
>>> > > > > > > > >
>>> > > > > > > > > python dns_lookup6.py www.washingtonexaminer.com
>>> > > > > > > > >
>>> > > > > > > > > And get response:
>>> > > > > > > > > dnsLookupFailed <twisted.python.failure.Failure
>>> > > > > > > > > twisted.names.error.DNSServerError: <Message id=55958
>>> rCode=2
>>> > > > > > > > > maxSize=0 flags=answer,recDes,recAv
>>> > > > > > > > > queries=[Query('www.washingtonexaminer.com', 255, 1)]>>
>>> > > > > > > > > result.value.__dict__ {}
>>> > > > > > > > >
>>> > > > > > > > > Is that ok?
>>> > > > > > > > >
>>> > > > > > > > The output I get is this:
>>> > > > > > > >
>>> > > > > > > > $ python3.8 dns_lookup6.py www.washingtonexaminer.com
>>> > > > > > > > Took: 0.029293
>>> > > > > > > > --- dnsLookupDone ([<RR name=www.washingtonexaminer.com
>>> > > type=CNAME
>>> > > > > > > class=IN ttl=37s auth=False>], [], [])
>>> > > > > > > > --- dnsLookupDone RR <RR name=www.washingtonexaminer.com
>>> > > type=CNAME
>>> > > > > > > class=IN ttl=37s auth=False> type 5 payload <CNAME name=
>>> > > > > > > 4067e1ed38.10005.sucurifirewall.com ttl=37>
>>> > > > > > > >
>>> > > > > > > > And this is the output of dig:
>>> > > > > > > >
>>> > > > > > > > $ dig www.washingtonexaminer.com
>>> > > > > > > >
>>> > > > > > > > ; <<>> DiG 9.11.24-RedHat-9.11.24-2.fc32 <<>>
>>> > > > > www.washingtonexaminer.com
>>> > > > > > > > ;; global options: +cmd
>>> > > > > > > > ;; Got answer:
>>> > > > > > > > ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 61831
>>> > > > > > > > ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0,
>>> > > ADDITIONAL: 1
>>> > > > > > > >
>>> > > > > > > > ;; OPT PSEUDOSECTION:
>>> > > > > > > > ; EDNS: version: 0, flags:; udp: 4000
>>> > > > > > > > ;; QUESTION SECTION:
>>> > > > > > > > ;www.washingtonexaminer.com.    IN      A
>>> > > > > > > >
>>> > > > > > > > ;; ANSWER SECTION:
>>> > > > > > > > www.washingtonexaminer.com. 599 IN      CNAME
>>> > > > > > > 4067e1ed38.10005.sucurifirewall.com.
>>> > > > > > > > 4067e1ed38.10005.sucurifirewall.com. 7199 IN A
>>> 192.124.249.5
>>> > > > > > > >
>>> > > > > > > > ;; Query time: 50 msec
>>> > > > > > > > ;; SERVER: 10.5.10.11#53(10.5.10.11)
>>> > > > > > > > ;; WHEN: Wed Dec 09 09:13:54 GMT 2020
>>> > > > > > > > ;; MSG SIZE  rcvd: 117
>>> > > > > > > >
>>> > > > > > > > Barry
>>> > > > > > > >
>>> > > > > > > >
>>> > > > > > > >
>>> > > > > > >
>>> > > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > > >
>>> > > >
>>> > >
>>> > >
>>> > >
>>> > >
>>> > >
>>> >
>>>
>>>
>>>
>>>
>>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201217/c6807ea2/attachment-0001.htm>

From trac at twistedmatrix.com  Sun Dec 20 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 20 Dec 2020 07:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1608447917.19.6751034273288031348@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201220/0a363c58/attachment.htm>

From adi at roiban.ro  Wed Dec 23 14:19:34 2020
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 23 Dec 2020 21:19:34 +0000
Subject: [Twisted-Python] Participating to GitHub Sponsors
In-Reply-To: <2126163.iZASKD2KPV@fpbarry>
References: <CAFycZ9cSo4Peq+7jYURgQ9ONjFDNR=pp3immqAukw3w4PJC_9Q@mail.gmail.com>
 <b709e6d3-26be-3fdf-45f4-1187d88c3c69@haywood.id.au>
 <CAFycZ9eq9JC2NzT=hDOciYKZtJrXGs7rFwYJfVSjUaOwdTCGWQ@mail.gmail.com>
 <2126163.iZASKD2KPV@fpbarry>
Message-ID: <CAFycZ9cG=PnvPejVLqEsq5wSy2TMcvKQyJpgfi0jkSx_ni=OPA@mail.gmail.com>

Hi

Thanks Barry for the feedback,

I have pressed the green button... then then I was asked to enter more info
and press more green buttons :)

I wasn't aware that this is a clone of patreon.com ...

I ended up with this https://github.com/sponsors/twisted?preview=true

----

The page is not active as it asks for a Stripe payment API...but I think
that is for individuals and not organizations.
So we might need to get in touch the the Freedom Software Conservancy to
sort this out.

More info inline...

On Thu, 17 Dec 2020 at 12:00, Barry Scott <barry.scott at forcepoint.com>
wrote:

> On Wednesday, 16 December 2020 11:17:06 GMT Adi Roiban wrote:
> > Hi,
> >
> > On Wed, 16 Dec 2020 at 02:49, Ian Haywood <ian at haywood.id.au> wrote:
> >
> > > No objection, but any plans for the money? I'd ask for more reviewers,
> I'd
> > > like to contribute more to twisted but there's little point without
> access
> > > to code review in a reasonable timeframe.
> > >
> >
> > First we need funds... I am sure that we will find a way to spend it
> well.
>
> It usually for a sponsor to ask what the sponsorship will be used for.
> I'd assume that twisted projects needs a plan for how to spend the money
> to share with the sponsor.
>
>
I agree that this is backward.

At this point we are not asking for money ... but will do soon.

This is just a discussion for a future money raising effort.

First question was whether to enable future donations via GitHub and then
via Stripe and then via the Software Freedom Conservancy.
I think that this is answered.

I think that is worth exploring the fundraising option and also to check
that we have any luck in getting a plan approved.

There are a couple of issues that needs to be solved and the GitHub process
can act as a guide... but we need:

* 1. creating a plan
* 2. finding someone to approve it
* 3. finding a way to fund the plan

Cheers
Adi

Barry
>
>
> >
> > Trying to see if we can solve the reviewing queue with money is one
> > option... but is not that easy.
> >
> > I am available to review one of your PR in exchange for another review :)
> >
> > Regards
> >
> > PS: If you have any conch-ssh PR, send me a message and I will review it
> > (for free... no reviewed asked in exchange)
> >
> >
> > > On 16/12/2020 11:56 am, Adi Roiban wrote:
> > >
> > > Hi,
> > >
> > > Does anyone have anything against applying so that Twisted can be on
> the
> > > waitlist of the GitHub Sponsors ?
> > >
> > > https://github.com/sponsors/twisted/waitlist
> > >
> > > As far as I know, the money for the Twisted project is managed by the
> > > Software Freedom Conservancy organization and they are already approved
> > > hosts for GitHub Sponsors.
> > >
> > > At this point, we only need to press the green button.
> > > The bank account and other administrative issues are already sorted
> out.
> > >
> > > ------------
> > >
> > > If there are no complaints , I plan to press the green button in 1
> week.
> > >
> > > We will then have to see how to access those funds via Software Freedom
> > > Conservancy... but that is part 2.
> > >
> > > Cheers
> > > --
> > > Adi Roiban
> > >
> > > _______________________________________________
> > > Twisted-Python mailing listTwisted-Python at twistedmatrix.comhttps://
> twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> > >
> > > _______________________________________________
> > > Twisted-Python mailing list
> > > Twisted-Python at twistedmatrix.com
> > > https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> > >
> >
> >
> >
>
>
>
>
>

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201223/49b96e47/attachment.htm>

From adi at roiban.ro  Wed Dec 23 14:40:05 2020
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 23 Dec 2020 21:40:05 +0000
Subject: [Twisted-Python] Plan/Goal for GitHub Sponsors
Message-ID: <CAFycZ9cB4YBXqiBB+FB5-AybV1M=9H+snRty-re6dnbemXZcUQ@mail.gmail.com>

Hi,

I started a separate discussion to confirm the goal for a future
fundraising.

Top priority - Pay someone to help with the review queue
Nice to have - Move server/services to Azure VM -  We have at least $100
monthly allowance for Azure.... not sure if we still have the huge $2000
allowance on rackspace.
Nice to have - Migrate Trac wiki to GitHub Wiki
Nice to have - Migrate Trac Ticket to GitHub Issues

That is all..but first we should solve the release queue.
Cheers
-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201223/7ec14b37/attachment.htm>

From glyph at twistedmatrix.com  Sat Dec 26 13:57:33 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 26 Dec 2020 12:57:33 -0800
Subject: [Twisted-Python] Unjellying and circular references?
In-Reply-To: <CABoLKHAKWRxUbKNSoF+ramTSqjcKNmuQuhMfqs1aOn9e8A3=1A@mail.gmail.com>
References: <CABoLKHAKWRxUbKNSoF+ramTSqjcKNmuQuhMfqs1aOn9e8A3=1A@mail.gmail.com>
Message-ID: <C1BFD3CD-543C-489D-8282-FE53F63AEB6C@twistedmatrix.com>

Out official bug tracker is at https://twistedmatrix.com/trac/newticket — if you could file it there it would be great.  (Github login required.)

Thanks!

> On Dec 16, 2020, at 2:21 AM, Jasper Phillips <jasperisjaded at gmail.com> wrote:
> 
> ﻿
> 
> 
>> On Fri, Dec 11, 2020 at 6:08 AM Jean-Paul Calderone <exarkun at twistedmatrix.com> wrote:
>>> On Fri, Dec 11, 2020 at 8:19 AM Jasper Phillips <jasperisjaded at gmail.com> wrote:
>> 
>>> I'm using perspective broker to transfer objects in a networked game, which I'm having trouble unjellying -- the remote versions wind up with dangling twisted.persisted.crefutil._Dereference instances, so don't match the original objects.
>>> 
>>> I'm seeing this for objects that have circular references to each other. I've refactored things to mostly avoid circular references and sidestep this, but have one remaining case where I find circular references mean clearer code that I'm reluctant to refactor.
>>> 
>>> Is there some trick I'm missing to avoid _Dereferences?
>> 
>> No, it's supposed to Just Work™ so you've found a bug in some part of the implementation.  If you can produce a minimal reproducing example then it may be worth a bug report.  But after that, I'd suggest investigating HTTP or AMP as a replacement for PB.
> 
> Here's a test case demonstrating the bug:
> 
> import sys
> from twisted.persisted.crefutil import _Dereference
> from twisted.spread             import pb, jelly
> 
> class RemoteCopyable( pb.Copyable, pb.RemoteCopy ):  pass
> jelly.globalSecurity.allowInstancesOf( RemoteCopyable )
> pb.setCopierForClassTree( sys.modules[__name__], pb.Copyable )
> 
> if __name__ == '__main__':
>     # circular object ref
>     cell           = RemoteCopyable()
>     cell.link      = RemoteCopyable()
>     cell.link.cell = cell
> 
>     # Mimic sending across network
>     broker         = pb.Broker()
>     serializedCell = broker.serialize( cell )
>     remoteCell     = broker.unserialize( serializedCell )
> 
>     print( _Dereference is type(remoteCell.link.cell) )
> 
> This bug stems from twisted.spread.flavors.RemoteCopy.setCopyableState(), which works fine for Python 2! But the UTF fix for Python 3 broke circular references. It looks like this:
> 
> def setCopyableState(self, state):
>     if _PY3:
>         state = {x.decode('utf8') if isinstance(x, bytes)
>                  else x:y for x,y in state.items()}
>     self.__dict__ = state
> 
> Here is a simple tweak that fixes the problem:
> 
> def setCopyableState(self, state):
>     if _PY3:
>         for x, y in list(state.items()):
>             if isinstance(x, bytes):
>                 del state[x]
>                 state[x.decode('utf8')] = y
>     self.__dict__ = state
> 
> 
> Basically the reference unwinding that takes place in twisted.spread.jelly._Unjellier._unjelly_reference()'s call to ref.resolveDependants() relies upon setCopyableStates()'s passed in state being used directly, such that all matching references' __dict__ point to the same object.
> 
> Hope this helps clarify. Is there some more formal location than this list that you'd like a bug report filed?
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201226/fef651fc/attachment.htm>

From glyph at twistedmatrix.com  Sat Dec 26 15:00:53 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 26 Dec 2020 14:00:53 -0800
Subject: [Twisted-Python] Updating the project leadership committee
In-Reply-To: <CAFycZ9d3MF0Tio7pkkoR3=-Op8DJf4CiEZLJ9+WFzjJtfwNu1A@mail.gmail.com>
References: <CAFycZ9d3MF0Tio7pkkoR3=-Op8DJf4CiEZLJ9+WFzjJtfwNu1A@mail.gmail.com>
Message-ID: <CE156C6A-7FEF-4B52-A734-4FE2DFB8CEC2@twistedmatrix.com>

Hi Adi,

The best next step would be to reach out to Conservancy directly—probably Karen Sandler, based on what the website says now—and describe the situation we are in. The problem is that the process we currently have in place is that the old committee nominates the new one and as far as I’m aware it doesn’t support any other options. The folks at the conservancy are probably the only ones who can change this.

The plans you propose all sound pretty reasonable to me, I just don’t have the time or energy to do all the planning and coordinating required to make them happen.

If you did have a fully fleshed out, written up proposal for what to do next, volunteers ready to be the next PLC, and all we needed was a PLC up-or-down vote, I might be able to help by tracking down a majority of the existing PLC and needling them to vote just once; however a better solution would be to get a more sustainable process in place with the SFC that takes this situation into account.

I am extremely enthusiastic for your future reign on a new and improved project leadership committee :-). Thank you for working on this!

-g

> On Dec 16, 2020, at 3:33 AM, Adi Roiban <adi at roiban.ro> wrote:
> 
> ﻿
> Hi,
> 
> Based on a comment from Glyph
> 
> > The current "project leadership committee" is more than half made up of people who are a. no longer affiliated with the project and b. never answer their email at this point,
> 
> I started this discussion to see if we can update / refresh the project leadership committee.
> 
> I remember that in 2015 I read the same comment.
> 
> Glypy, do you know the required number of members for the committee?
> 
> My suggestion is to try to arrange for a committee that is updated every 2 years... or maybe every year.
> I can organize the communication and project management stuff.
> 
> Here is the list of committers for the last to years
> 
> https://github.com/twisted/twisted/graphs/contributors?from=2018-12-16&to=2020-12-16&type=c
> 
> This is a quantitative approach... and does not imply quality or dedication, but I think that is a good starting point for searching for candidates for the committee.
> 
> I can also volunteer to be part of the committee.
> 
> Maybe we can create a new list of members for the commitee and then see if this list will be accepted by theSoftware Freedom Conservancy.
> 
> I can also volunteer to do a bit of noise and see if we can raise more money.
> 
> I will not apply for the fellowship, so I hope that in this way we will not have any complaints about my intentions :)
> 
> PS: I have many patches for Twisted that are not commited. I could just hire another person to "review" them, but I don't think that this is fair.
> In fact, all the patches already passed an internal review, done by I person paid by my company.
> So, I hope that we can hire an independent reviewer 
> 
> -- 
> Adi Roiban
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201226/c8d99e92/attachment.htm>

From adi at roiban.ro  Sat Dec 26 16:34:45 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sat, 26 Dec 2020 23:34:45 +0000
Subject: [Twisted-Python] Updating the project leadership committee
In-Reply-To: <CE156C6A-7FEF-4B52-A734-4FE2DFB8CEC2@twistedmatrix.com>
References: <CAFycZ9d3MF0Tio7pkkoR3=-Op8DJf4CiEZLJ9+WFzjJtfwNu1A@mail.gmail.com>
 <CE156C6A-7FEF-4B52-A734-4FE2DFB8CEC2@twistedmatrix.com>
Message-ID: <CAFycZ9dMUvhL6t6e7Mttk0whhBVsNTnSXjTGu5cMO_yPBs0yNQ@mail.gmail.com>

Thanks, Glyph

The top posting worthy question is:

Why else volunteers to be a member of the refreshed Twisted project
leadership committee ?

---------------

I volunteer to be a member of the committee.

I can also take care of  writing the required text to be forwarded to the
existing committee for an up or down vote.

I hope we don't need to bypass the current committee.

Regards


On Sat, 26 Dec 2020 at 22:12, Glyph <glyph at twistedmatrix.com> wrote:

> Hi Adi,
>
> The best next step would be to reach out to Conservancy directly—probably
> Karen Sandler, based on what the website says now—and describe the
> situation we are in. The problem is that the process we currently have in
> place is that the old committee nominates the new one and as far as I’m
> aware it doesn’t support any other options. The folks at the conservancy
> are probably the only ones who can change this.
>
> The plans you propose all sound pretty reasonable to me, I just don’t have
> the time or energy to do all the planning and coordinating required to make
> them happen.
>
> If you did have a fully fleshed out, written up proposal for what to do
> next, volunteers ready to be the next PLC, and all we needed was a PLC
> up-or-down vote, I *might* be able to help by tracking down a majority of
> the existing PLC and needling them to vote just once; however a better
> solution would be to get a more sustainable process in place with the SFC
> that takes this situation into account.
>
> I am *extremely *enthusiastic for your future reign on a new and improved
> project leadership committee :-). Thank you for working on this!
>
> -g
>
> On Dec 16, 2020, at 3:33 AM, Adi Roiban <adi at roiban.ro> wrote:
>
> ﻿
> Hi,
>
> Based on a comment from Glyph
>
> > The current "project leadership committee" is more than half made up of
> people who are a. no longer affiliated with the project and b. never answer
> their email at this point,
>
> I started this discussion to see if we can update / refresh the project
> leadership committee.
>
> I remember that in 2015 I read the same comment.
>
> Glypy, do you know the required number of members for the committee?
>
> My suggestion is to try to arrange for a committee that is updated every 2
> years... or maybe every year.
> I can organize the communication and project management stuff.
>
> Here is the list of committers for the last to years
>
>
> https://github.com/twisted/twisted/graphs/contributors?from=2018-12-16&to=2020-12-16&type=c
>
> This is a quantitative approach... and does not imply quality or
> dedication, but I think that is a good starting point for searching for
> candidates for the committee.
>
> I can also volunteer to be part of the committee.
>
> Maybe we can create a new list of members for the commitee and then see if
> this list will be accepted by theSoftware Freedom Conservancy.
>
> I can also volunteer to do a bit of noise and see if we can raise more
> money.
>
> I will not apply for the fellowship, so I hope that in this way we will
> not have any complaints about my intentions :)
>
> PS: I have many patches for Twisted that are not commited. I could just
> hire another person to "review" them, but I don't think that this is fair.
> In fact, all the patches already passed an internal review, done by I
> person paid by my company.
> So, I hope that we can hire an independent reviewer
>
> --
> Adi Roiban
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201226/32f62d49/attachment-0001.htm>

From adi at roiban.ro  Sat Dec 26 16:49:39 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sat, 26 Dec 2020 23:49:39 +0000
Subject: [Twisted-Python] Upcoming Twisted Release
Message-ID: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>

Hi,

I plan to act as a release manager for the next release and follow the plan
documented at

https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html

---------

The plan is to push the release candidate only on PyPI and to host the
release candidate documentation (including pydoctor generated API docs)
only on Read the Docs site.

The Twisted Wiki Download page was updated to inform that PyPI is the only
server where we publish the latest versions.
So release candidates and final releases will be pushed only to PyPI.
https://twistedmatrix.com/trac/wiki/Downloads

While the release candidate documentation in only published on Read The
Docs,
at least for the next release I plan to also publish the documentation to:

* https://twistedmatrix.com/documents/current/
* https://twistedmatrix.com/documents/VERSION/

After the release we can see if we can redirect them to Read The Docs.

----------------

For now, the only release blocker are the missing intersphinx API links on
Read The Docs between the narrative docs and apidocs, but that is on track
to be solved by next week.

So no other tickets are in the blocker queue:
https://twistedmatrix.com/trac/report/26

------

Do you know any other release blocker issues?

Since we have good continuous testing, maybe we can stop doing release
candidates.

The only thing blocking a release would be a "release blocket" ticket and
truck CI checks not being green.

Cheers
-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201226/5d697d57/attachment.htm>

From trac at twistedmatrix.com  Sun Dec 27 00:05:16 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 27 Dec 2020 07:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1609052716.98.658441356340141134@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201227/a0bbe484/attachment.htm>

From rodrigc at crodrigues.org  Sun Dec 27 13:09:57 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Sun, 27 Dec 2020 12:09:57 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
Message-ID: <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>

On Sat, Dec 26, 2020 at 3:50 PM Adi Roiban <adi at roiban.ro> wrote:

> Hi,
>
> I plan to act as a release manager for the next release and follow the
> plan documented at
>
>
> https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html
>
>
I was previously working on releasing Twisted.  I was running into various
roadblocks, but was moving forward,
and got permission from Glyph to move forward with this.
Has this changed?
Unfortunately, Amber did not respond to any e-mails that I sent to her and
Glyph, so I tried to move forward the
best that I could.



>
>
> So no other tickets are in the blocker queue:
> https://twistedmatrix.com/trac/report/26
>
> ------
>
> Do you know any other release blocker issues?
>
>
I filed this:
https://twistedmatrix.com/trac/ticket/10070

which I found with Pierre Tardy's help by running buildbot's test suite
against Twisted trunk.
This looks like a problem on the Twisted side, and should be fixed before a
Twisted release is pushed out.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201227/4998c0ee/attachment.htm>

From adi at roiban.ro  Sun Dec 27 16:58:18 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 27 Dec 2020 23:58:18 +0000
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
Message-ID: <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>

Hi Craig,

On Sun, 27 Dec 2020 at 20:10, Craig Rodrigues <rodrigc at crodrigues.org>
wrote:

>
>
> On Sat, Dec 26, 2020 at 3:50 PM Adi Roiban <adi at roiban.ro> wrote:
>
>> Hi,
>>
>> I plan to act as a release manager for the next release and follow the
>> plan documented at
>>
>>
>> https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html
>>
>>
> I was previously working on releasing Twisted.  I was running into various
> roadblocks, but was moving forward,
> and got permission from Glyph to move forward with this.
> Has this changed?
>

If you want to do the release, I am more than happy to not have to do the
release myself :)


> Unfortunately, Amber did not respond to any e-mails that I sent to her and
> Glyph, so I tried to move forward the
> best that I could.
>

Is there anything still blocking you ?
Can I help?


>>
>> So no other tickets are in the blocker queue:
>> https://twistedmatrix.com/trac/report/26
>>
>> ------
>>
>> Do you know any other release blocker issues?
>>
>>
> I filed this:
> https://twistedmatrix.com/trac/ticket/10070
>
> which I found with Pierre Tardy's help by running buildbot's test suite
> against Twisted trunk.
> This looks like a problem on the Twisted side, and should be fixed before
> a Twisted release is pushed out.
>

OK. I closed https://twistedmatrix.com/trac/ticket/10069 as I think it's a
duplicate.

Do you or Pierre plan to fix that ticket?

I think that you should block the release only if someone is committed to
fixing the release blocker.

I plan to update the release documentation to make it clear that all
release blocker tichet
should have an owner and there are plans to fix the ticket in a maximum of
2 weeks.

Otherwise we risk to block the release forever... and if we delay forever
people will start using "trunk"
and if everybody is using trunk, what is the point of a release :) ?

------

For the future, maybe we can stop doing a release candidate wheel and
instead just announce that a release is coming
and people should test trunk and flag any release blocker ticket.

I think that with pip, is now very easy to install Twisted from trunk.

Cheers

--
> Craig
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201227/c5abc31c/attachment.htm>

From sda at fstab.net  Sun Dec 27 17:49:11 2020
From: sda at fstab.net (Kyle Altendorf)
Date: Sun, 27 Dec 2020 19:49:11 -0500
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
Message-ID: <25ca94949fd9453ce0250909b350c2ec@fstab.net>

On 2020-12-27 18:58, Adi Roiban wrote:

> For the future, maybe we can stop doing a release candidate wheel and 
> instead just announce that a release is coming 
> and people should test trunk and flag any release blocker ticket.

With all the work for automated releasing, isn't it easy to do an RC and
a week or two later do a regular release?  Admittedly, lots of people
(like myself) haven't made most of our CI setups run all of pinned
versions, latest release, latest pre-release, and latest trunk...  but
maybe having more projects actually doing release candidates is one
piece of encouraging that?  Or maybe, practically speaking, nobody is
going this route anyways so you are suggesting a better path. 

> I think that with pip, is now very easy to install Twisted from trunk.

In case anyone isn't super familiar... 

pip install git+https://github.com/twisted/twisted#egg=twisted 

The #egg=twisted is useful for misc corner cases but not always
required.  One not-so-corner case is when you want to specify an extra
then it is #egg=twisted[windows_platform], for example. 

Cheers, 

-kyle
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201227/00adc203/attachment.htm>

From exarkun at twistedmatrix.com  Sun Dec 27 17:50:30 2020
From: exarkun at twistedmatrix.com (Jean-Paul Calderone)
Date: Sun, 27 Dec 2020 19:50:30 -0500
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
Message-ID: <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>

On Sun, Dec 27, 2020 at 6:59 PM Adi Roiban <adi at roiban.ro> wrote:

> Hi Craig,
>
> On Sun, 27 Dec 2020 at 20:10, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
>>
>>
>> On Sat, Dec 26, 2020 at 3:50 PM Adi Roiban <adi at roiban.ro> wrote:
>>
>>> Hi,
>>>
>>> I plan to act as a release manager for the next release and follow the
>>> plan documented at
>>>
>>>
>>> https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html
>>>
>>>
>> I was previously working on releasing Twisted.  I was running into
>> various roadblocks, but was moving forward,
>> and got permission from Glyph to move forward with this.
>> Has this changed?
>>
>
> If you want to do the release, I am more than happy to not have to do the
> release myself :)
>
>
>> Unfortunately, Amber did not respond to any e-mails that I sent to her
>> and Glyph, so I tried to move forward the
>> best that I could.
>>
>
> Is there anything still blocking you ?
> Can I help?
>
>
>>>
>>> So no other tickets are in the blocker queue:
>>> https://twistedmatrix.com/trac/report/26
>>>
>>> ------
>>>
>>> Do you know any other release blocker issues?
>>>
>>>
>> I filed this:
>> https://twistedmatrix.com/trac/ticket/10070
>>
>> which I found with Pierre Tardy's help by running buildbot's test suite
>> against Twisted trunk.
>> This looks like a problem on the Twisted side, and should be fixed before
>> a Twisted release is pushed out.
>>
>
> OK. I closed https://twistedmatrix.com/trac/ticket/10069 as I think it's
> a duplicate.
>
> Do you or Pierre plan to fix that ticket?
>
> I think that you should block the release only if someone is committed to
> fixing the release blocker.
>
> I plan to update the release documentation to make it clear that all
> release blocker tichet
> should have an owner and there are plans to fix the ticket in a maximum of
> 2 weeks.
>
> Otherwise we risk to block the release forever... and if we delay forever
> people will start using "trunk"
> and if everybody is using trunk, what is the point of a release :) ?
>

Part of the point is that when someone runs `pip install ...` they get a
*working* version of Twisted, to the best of the project's ability to
provide one.

Fortunately many regressions aren't that difficult to resolve.  At worst,
find the merge that introduced them and revert it.  This works best when
regressions are found in a timely manner, of course.  Of course it's also
nice if the problem can be fixed without backing out whatever (presumably
desirable) set of changes it came along with.

Part of the release managers job is to motivate this kind of work to
happen.  A standing policy to revert the cause of a regression can also
serve as good motivation to get the other kind of fix in, too.

It's better if these known regressions don't linger for months, though.  It
looks like the Buildbot PR had a failing CI run in October.  I'd suggest
that not waiting until December is a good way to avoid having these kinds
of situations turn into a larger problem.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201227/ed1bda36/attachment-0001.htm>

From adi at roiban.ro  Mon Dec 28 04:11:46 2020
From: adi at roiban.ro (Adi Roiban)
Date: Mon, 28 Dec 2020 11:11:46 +0000
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
Message-ID: <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>

On Mon, 28 Dec 2020 at 01:00, Jean-Paul Calderone <exarkun at twistedmatrix.com>
wrote:

> On Sun, Dec 27, 2020 at 6:59 PM Adi Roiban <adi at roiban.ro> wrote:
>
>> Hi Craig,
>>
>> On Sun, 27 Dec 2020 at 20:10, Craig Rodrigues <rodrigc at crodrigues.org>
>> wrote:
>>
>>>
>>>
>>> On Sat, Dec 26, 2020 at 3:50 PM Adi Roiban <adi at roiban.ro> wrote:
>>>
>>>> Hi,
>>>>
>>>> I plan to act as a release manager for the next release and follow the
>>>> plan documented at
>>>>
>>>>
>>>> https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html
>>>>
>>>>
>>> I was previously working on releasing Twisted.  I was running into
>>> various roadblocks, but was moving forward,
>>> and got permission from Glyph to move forward with this.
>>> Has this changed?
>>>
>>
>> If you want to do the release, I am more than happy to not have to do the
>> release myself :)
>>
>>
>>> Unfortunately, Amber did not respond to any e-mails that I sent to her
>>> and Glyph, so I tried to move forward the
>>> best that I could.
>>>
>>
>> Is there anything still blocking you ?
>> Can I help?
>>
>>
>>>>
>>>> So no other tickets are in the blocker queue:
>>>> https://twistedmatrix.com/trac/report/26
>>>>
>>>> ------
>>>>
>>>> Do you know any other release blocker issues?
>>>>
>>>>
>>> I filed this:
>>> https://twistedmatrix.com/trac/ticket/10070
>>>
>>> which I found with Pierre Tardy's help by running buildbot's test suite
>>> against Twisted trunk.
>>> This looks like a problem on the Twisted side, and should be fixed
>>> before a Twisted release is pushed out.
>>>
>>
>> OK. I closed https://twistedmatrix.com/trac/ticket/10069 as I think it's
>> a duplicate.
>>
>> Do you or Pierre plan to fix that ticket?
>>
>> I think that you should block the release only if someone is committed to
>> fixing the release blocker.
>>
>> I plan to update the release documentation to make it clear that all
>> release blocker tichet
>> should have an owner and there are plans to fix the ticket in a maximum
>> of 2 weeks.
>>
>> Otherwise we risk to block the release forever... and if we delay forever
>> people will start using "trunk"
>> and if everybody is using trunk, what is the point of a release :) ?
>>
>
> Part of the point is that when someone runs `pip install ...` they get a
> *working* version of Twisted, to the best of the project's ability to
> provide one.
>
> Fortunately many regressions aren't that difficult to resolve.  At worst,
> find the merge that introduced them and revert it.  This works best when
> regressions are found in a timely manner, of course.  Of course it's also
> nice if the problem can be fixed without backing out whatever (presumably
> desirable) set of changes it came along with.
>
> Part of the release managers job is to motivate this kind of work to
> happen.  A standing policy to revert the cause of a regression can also
> serve as good motivation to get the other kind of fix in, too.
>
> It's better if these known regressions don't linger for months, though.
> It looks like the Buildbot PR had a failing CI run in October.  I'd suggest
> that not waiting until December is a good way to avoid having these kinds
> of situations turn into a larger problem.
>
> Jean-Paul
>
>
Thanks Kyle and Jean-Paul for your feedback.

With GitHub Actions is easy to have wheels and full docs published on PyPi
and Read The Docs.
We can do a release candidate and the release candidate might be a good way
to do one more release rehearsal before the final release :)

I was wrong to suggest installing based on trunk ... even when use pip to
install from git, it should have been installed based on the release branch
:)
But that issue is solved.

-----

I guess there are no comments against removing a ticket from the
release-blocking list if the ticket is not active for 1 or 2 weeks.

-----

Crag, if you have time, can you join the IRC channel ?


Cheers
-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/61d900d2/attachment.htm>

From exarkun at twistedmatrix.com  Mon Dec 28 04:38:55 2020
From: exarkun at twistedmatrix.com (Jean-Paul Calderone)
Date: Mon, 28 Dec 2020 06:38:55 -0500
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
 <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>
Message-ID: <CAEeXt4PEpCfNjcJkvaGodPHCk047abOd3h405fWvdHRBXoec+Q@mail.gmail.com>

On Mon, Dec 28, 2020 at 6:13 AM Adi Roiban <adi at roiban.ro> wrote:

>
>>> I plan to update the release documentation to make it clear that all
>>> release blocker tichet
>>> should have an owner and there are plans to fix the ticket in a maximum
>>> of 2 weeks.
>>>
>>> Otherwise we risk to block the release forever... and if we delay
>>> forever people will start using "trunk"
>>> and if everybody is using trunk, what is the point of a release :) ?
>>>
>>
>> Part of the point is that when someone runs `pip install ...` they get a
>> *working* version of Twisted, to the best of the project's ability to
>> provide one.
>>
>> Fortunately many regressions aren't that difficult to resolve.  At worst,
>> find the merge that introduced them and revert it.  This works best when
>> regressions are found in a timely manner, of course.  Of course it's also
>> nice if the problem can be fixed without backing out whatever (presumably
>> desirable) set of changes it came along with.
>>
>> Part of the release managers job is to motivate this kind of work to
>> happen.  A standing policy to revert the cause of a regression can also
>> serve as good motivation to get the other kind of fix in, too.
>>
>> It's better if these known regressions don't linger for months, though.
>> It looks like the Buildbot PR had a failing CI run in October.  I'd suggest
>> that not waiting until December is a good way to avoid having these kinds
>> of situations turn into a larger problem.
>>
>> Jean-Paul
>>
>>
> Thanks Kyle and Jean-Paul for your feedback.
>
> I guess there are no comments against removing a ticket from the
> release-blocking list if the ticket is not active for 1 or 2 weeks.
>
>
Commenting against this was the main reason for my earlier reply.  I've
left my quoted reply above.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/2b78e76c/attachment.htm>

From rodrigc at crodrigues.org  Mon Dec 28 08:45:17 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 28 Dec 2020 07:45:17 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
Message-ID: <CAG=rPVc23Pyy9JOyRXjN9csJS8jDsZh59Ven0kc0LDWxPvz38g@mail.gmail.com>

On Sun, Dec 27, 2020 at 3:59 PM Adi Roiban <adi at roiban.ro> wrote:

> Hi Craig,
>
> On Sun, 27 Dec 2020 at 20:10, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
>>
>>
>> On Sat, Dec 26, 2020 at 3:50 PM Adi Roiban <adi at roiban.ro> wrote:
>>
>>> Hi,
>>>
>>> I plan to act as a release manager for the next release and follow the
>>> plan documented at
>>>
>>>
>>> https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html
>>>
>>>
>> I was previously working on releasing Twisted.  I was running into
>> various roadblocks, but was moving forward,
>> and got permission from Glyph to move forward with this.
>> Has this changed?
>>
>
> If you want to do the release, I am more than happy to not have to do the
> release myself :)
>

Well since Glyph gave me permission to do this, I would like to complete
this.



> OK. I closed https://twistedmatrix.com/trac/ticket/10069 as I think it's
> a duplicate.
>
> Do you or Pierre plan to fix that ticket?
>
>

I'm working on this now.

It might take me a few days to complete this, since I am in the middle of
holidays now,
so won't be able to complete a release until the beginning of January.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/059c870f/attachment-0001.htm>

From glyph at twistedmatrix.com  Mon Dec 28 10:50:24 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 28 Dec 2020 09:50:24 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAEeXt4PEpCfNjcJkvaGodPHCk047abOd3h405fWvdHRBXoec+Q@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
 <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>
 <CAEeXt4PEpCfNjcJkvaGodPHCk047abOd3h405fWvdHRBXoec+Q@mail.gmail.com>
Message-ID: <34ADFCD9-8C23-4DC5-89A7-26BA1EEAB69B@twistedmatrix.com>


> On Dec 28, 2020, at 3:38 AM, Jean-Paul Calderone <exarkun at twistedmatrix.com> wrote:
> 
> I guess there are no comments against removing a ticket from the release-blocking list if the ticket is not active for 1 or 2 weeks.
> 
> Commenting against this was the main reason for my earlier reply.  I've left my quoted reply above.

I'm also against this.  Inactivity for a week or two is not enough reason to allow a known regression to be present in a release.

Is there a reason we can't identify the commit that caused the problem and simply revert before doing the release, then fix it afterwards?

If we're in a position where trunk has drifted so far between the regression and its identification that it is too labor-intensive to revert and we need to fix it forward, then the release is stuck - that's the whole point of the "release blocker" category.  This is a very unfortunate situation but less unfortunate than shipping buggy releases that are known to break big users of Twisted.

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/a9f10a29/attachment.htm>

From glyph at twistedmatrix.com  Mon Dec 28 10:53:57 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 28 Dec 2020 09:53:57 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAG=rPVc23Pyy9JOyRXjN9csJS8jDsZh59Ven0kc0LDWxPvz38g@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAG=rPVc23Pyy9JOyRXjN9csJS8jDsZh59Ven0kc0LDWxPvz38g@mail.gmail.com>
Message-ID: <099D757E-591B-49F0-BF85-92467667FB77@twistedmatrix.com>



> On Dec 28, 2020, at 7:45 AM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:
> 
> 
> 
> On Sun, Dec 27, 2020 at 3:59 PM Adi Roiban <adi at roiban.ro <mailto:adi at roiban.ro>> wrote:
> Hi Craig,
> 
> On Sun, 27 Dec 2020 at 20:10, Craig Rodrigues <rodrigc at crodrigues.org <mailto:rodrigc at crodrigues.org>> wrote:
> 
> 
> On Sat, Dec 26, 2020 at 3:50 PM Adi Roiban <adi at roiban.ro <mailto:adi at roiban.ro>> wrote:
> Hi,
> 
> I plan to act as a release manager for the next release and follow the plan documented at
> 
> https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html <https://docs.twistedmatrix.com/en/latest/core/development/policy/release-process.html>
> 
> 
> I was previously working on releasing Twisted.  I was running into various roadblocks, but was moving forward,
> and got permission from Glyph to move forward with this.
> Has this changed?
> 
> If you want to do the release, I am more than happy to not have to do the release myself :)
> 
> Well since Glyph gave me permission to do this, I would like to complete this.

I'm not clear why Adi could not pick up your work where you left off?
 
> OK. I closed https://twistedmatrix.com/trac/ticket/10069 <https://twistedmatrix.com/trac/ticket/10069> as I think it's a duplicate.
> 
> Do you or Pierre plan to fix that ticket?
> 
> 
> I'm working on this now.
> 
> It might take me a few days to complete this, since I am in the middle of holidays now, 
> so won't be able to complete a release until the beginning of January.

Everybody should be able to take a break on a holiday (or heck, whenever you want, for as long as you want, we're all volunteers here) but "please don't make progress while I'm gone" is a surefire recipe for the person asking to complete the thing themselves getting distracted and wandering away.  The release is stuck enough as it is with CI issues and regressions, so if someone has energy to make some forward progress let's please not hold it up.

-g


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/680ede0c/attachment.htm>

From glyph at twistedmatrix.com  Mon Dec 28 11:00:17 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 28 Dec 2020 10:00:17 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <34ADFCD9-8C23-4DC5-89A7-26BA1EEAB69B@twistedmatrix.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
 <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>
 <CAEeXt4PEpCfNjcJkvaGodPHCk047abOd3h405fWvdHRBXoec+Q@mail.gmail.com>
 <34ADFCD9-8C23-4DC5-89A7-26BA1EEAB69B@twistedmatrix.com>
Message-ID: <50FA161B-22E1-4D32-BEA5-A1E988396FA1@twistedmatrix.com>



> On Dec 28, 2020, at 9:50 AM, Glyph <glyph at twistedmatrix.com> wrote:
> 
> I'm also against this.  Inactivity for a week or two is not enough reason to allow a known regression to be present in a release.
> 
I should clarify that maybe I haven't processed the full context for this specific issue though.  I do think it's acceptable to time out on an issue where a release blocker is claimed to exist if e.g. we can't reproduce the problem, or if it's a request for an above-and-beyond compatibility thing (like "please restore this private API, its removal breaks our application").  As a courtesy we might block a release for a small amount of time while waiting for a reproducer or a short-term private-API compatibility shim but the onus there is really on the reporter.

From what I can see though, this one is a pretty straightforward case of us just introducing a bug into a perfectly valid configuration though, just not one we happen to have in our test matrix right now.

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/dc5cc6ee/attachment.htm>

From adi at roiban.ro  Mon Dec 28 14:50:47 2020
From: adi at roiban.ro (Adi Roiban)
Date: Mon, 28 Dec 2020 21:50:47 +0000
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <34ADFCD9-8C23-4DC5-89A7-26BA1EEAB69B@twistedmatrix.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
 <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>
 <CAEeXt4PEpCfNjcJkvaGodPHCk047abOd3h405fWvdHRBXoec+Q@mail.gmail.com>
 <34ADFCD9-8C23-4DC5-89A7-26BA1EEAB69B@twistedmatrix.com>
Message-ID: <CAFycZ9eXfFdYUMCp=dk1VwcWJsEjGxnXSumzm_sdRSxD1xzyfA@mail.gmail.com>

On Mon, 28 Dec 2020 at 18:17, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Dec 28, 2020, at 3:38 AM, Jean-Paul Calderone <
> exarkun at twistedmatrix.com> wrote:
>
> I guess there are no comments against removing a ticket from the
>> release-blocking list if the ticket is not active for 1 or 2 weeks.
>>
>
> Commenting against this was the main reason for my earlier reply.  I've
> left my quoted reply above.
>
>
> I'm also against this.  Inactivity for a week or two is not enough reason
> to allow a known regression to be present in a release.
>
> Is there a reason we can't identify the commit that caused the problem and
> simply revert before doing the release, then fix it afterwards?
>
> If we're in a position where trunk has drifted so far between the
> regression and its identification that it is too labor-intensive to revert
> and we need to fix it forward, then the release *is* stuck - that's the
> whole point of the "release blocker" category.  This is a very unfortunate
> situation but less unfortunate than shipping buggy releases that are known
> to break big users of Twisted.
>
>
Thanks for your feedback.

I have created https://twistedmatrix.com/trac/ticket/10073 to add extra
info to our release documentation.

So, we will continue to have release candidates and will block a release
for as long as it's needed.

I can continue to use Twisted from pinned trunk without any issue :)

--------

It looks like with enough noise we got 2 PRs for the release blocker ticket

https://github.com/twisted/twisted/pull/1499
https://github.com/twisted/twisted/pull/1501

:)

So I hope the release will no longer be blocked  for much longer :)

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/6a4e317b/attachment.htm>

From rodrigc at crodrigues.org  Mon Dec 28 16:22:18 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 28 Dec 2020 15:22:18 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <50FA161B-22E1-4D32-BEA5-A1E988396FA1@twistedmatrix.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
 <CAEeXt4OAtZnkp9MpADb2pNrcN+_aZz2R7SfM4h5i4kFDDpTK5g@mail.gmail.com>
 <CAFycZ9f8GyBx0TsQzXj0ztr2ZTOy2a_FBjuUTiJ2W6_FNMifuA@mail.gmail.com>
 <CAEeXt4PEpCfNjcJkvaGodPHCk047abOd3h405fWvdHRBXoec+Q@mail.gmail.com>
 <34ADFCD9-8C23-4DC5-89A7-26BA1EEAB69B@twistedmatrix.com>
 <50FA161B-22E1-4D32-BEA5-A1E988396FA1@twistedmatrix.com>
Message-ID: <CAG=rPVemo2oiObHZf1aNu86fSzpiM3+ty+ybh5tijEW8i-8GzQ@mail.gmail.com>

On Mon, Dec 28, 2020 at 10:04 AM Glyph <glyph at twistedmatrix.com> wrote:

>
> From what I can see though, this one is a pretty straightforward case of
> us just introducing a bug into a perfectly valid configuration though, just
> not one we happen to have in our test matrix right now.
>
>

I am working on this right now, and am taking my time with the release.
Since this is my first time doing a release,
I am erring on the side of caution, which is why I am working to make sure
that buildbot's tests pass, since they
are a good representative project of a heavy Twisted user.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/156922ae/attachment.htm>

From rodrigc at crodrigues.org  Mon Dec 28 18:52:08 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 28 Dec 2020 17:52:08 -0800
Subject: [Twisted-Python] Updating the project leadership committee
In-Reply-To: <CE156C6A-7FEF-4B52-A734-4FE2DFB8CEC2@twistedmatrix.com>
References: <CAFycZ9d3MF0Tio7pkkoR3=-Op8DJf4CiEZLJ9+WFzjJtfwNu1A@mail.gmail.com>
 <CE156C6A-7FEF-4B52-A734-4FE2DFB8CEC2@twistedmatrix.com>
Message-ID: <CAG=rPVf5C6T5nnQ4KmKrbSYW=75=hymSjYyJpgA78hCW+Etm-g@mail.gmail.com>

On Sat, Dec 26, 2020 at 2:01 PM Glyph <glyph at twistedmatrix.com> wrote:

>
> I am *extremely *enthusiastic for your future reign on a new and improved
> project leadership committee :-). Thank you for working on this!
>
>
Where is the documentation for the existing Twisted Project Leadership
Committee?  I couldn't find it on https://twistedmatrix.com.
Where are the members for the existing committee listed?

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/40bdfac5/attachment.htm>

From rodrigc at crodrigues.org  Mon Dec 28 18:54:38 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 28 Dec 2020 17:54:38 -0800
Subject: [Twisted-Python] Upcoming Twisted Release
In-Reply-To: <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
References: <CAFycZ9dQ04S6O1w4VhAv2z4=YX6VVT-Z5DEHNq6XzQ9nagKpMg@mail.gmail.com>
 <CAG=rPVfHNdcnFwuVN9zD6-oTizTQ2t8h3n++UoftnoQA+Ag_Hw@mail.gmail.com>
 <CAFycZ9cCn6+GJhbom5EwrYc-uizBpAkSFcQ6yidRL7vrn5tipQ@mail.gmail.com>
Message-ID: <CAG=rPVd5NxGZ4ScoUvZqRJQzFmk3DjPuTqMxs1gGEOnOP8UCMQ@mail.gmail.com>

On Sun, Dec 27, 2020 at 3:59 PM Adi Roiban <adi at roiban.ro> wrote:

>
> Is there anything still blocking you ?
> Can I help?
>


I do not need specific help from you at the moment, but when I do, I will
ask.
Thanks.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/b143f3d1/attachment.htm>

From glyph at twistedmatrix.com  Mon Dec 28 23:25:26 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 28 Dec 2020 22:25:26 -0800
Subject: [Twisted-Python] Updating the project leadership committee
In-Reply-To: <CAG=rPVf5C6T5nnQ4KmKrbSYW=75=hymSjYyJpgA78hCW+Etm-g@mail.gmail.com>
References: <CAG=rPVf5C6T5nnQ4KmKrbSYW=75=hymSjYyJpgA78hCW+Etm-g@mail.gmail.com>
Message-ID: <etPan.5feacc70.74b0dc51.7f5e@fastmail.com>

It’s never been publicly documented; it was originally an internal interface between the discussions on this list and the SFC when the project was much smaller, so it’s probably written down in some internal conservancy document, maybe. If we’re going to do something new, obviously it should be a bit more transparent.

On December 28, 2020 at 5:52:08 PM, Craig Rodrigues (rodrigc at crodrigues.org(mailto:rodrigc at crodrigues.org)) wrote:

>  
>  
> On Sat, Dec 26, 2020 at 2:01 PM Glyph <glyph at twistedmatrix.com(mailto:glyph at twistedmatrix.com)> wrote:
> >  
> > I am extremely enthusiastic for your future reign on a new and improved project leadership committee :-). Thank you for working on this!  
> >  
>  
> Where is the documentation for the existing Twisted Project Leadership Committee? I couldn't find it on https://twistedmatrix.com.  
> Where are the members for the existing committee listed?
>  
> --  
> Craig
>  
>  
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201228/4c965a6a/attachment-0001.htm>

From rodrigc at crodrigues.org  Tue Dec 29 09:49:38 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Tue, 29 Dec 2020 08:49:38 -0800
Subject: [Twisted-Python] Updating the project leadership committee
In-Reply-To: <etPan.5feacc70.74b0dc51.7f5e@fastmail.com>
References: <CAG=rPVf5C6T5nnQ4KmKrbSYW=75=hymSjYyJpgA78hCW+Etm-g@mail.gmail.com>
 <etPan.5feacc70.74b0dc51.7f5e@fastmail.com>
Message-ID: <CAG=rPVf+ugvkwEw3LhDvwJHd-1ABa2N1Gni5=KgZvrRAPiZ6BQ@mail.gmail.com>

Who are the current members of the committee?
What are the titles/roles/responsibilities of the current committee members?
Is there a mailing list, IRC channel, or some other entity which the
current committee members belong to
so that they can communicate amongst themselves, and also with the outside
world, such as the
Software Freedom Conservancy?

--
Craig


On Mon, Dec 28, 2020 at 10:28 PM Glyph <glyph at twistedmatrix.com> wrote:
>
> It’s never been publicly documented; it was originally an internal
interface between the discussions on this list and the SFC when the project
was much smaller, so it’s probably written down in some internal
conservancy document, maybe. If we’re going to do something new, obviously
it should be a bit more transparent.
>
> On December 28, 2020 at 5:52:08 PM, Craig Rodrigues (
rodrigc at crodrigues.org) wrote:
>>
>>
>>
>> On Sat, Dec 26, 2020 at 2:01 PM Glyph <glyph at twistedmatrix.com> wrote:
>>>
>>>
>>> I am extremely enthusiastic for your future reign on a new and improved
project leadership committee :-). Thank you for working on this!
>>>
>>
>> Where is the documentation for the existing Twisted Project Leadership
Committee?  I couldn't find it on https://twistedmatrix.com.
>> Where are the members for the existing committee listed?
>>
>> --
>> Craig
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201229/25ba4803/attachment.htm>

From robert.difalco at gmail.com  Wed Dec 30 12:38:09 2020
From: robert.difalco at gmail.com (Robert DiFalco)
Date: Wed, 30 Dec 2020 11:38:09 -0800
Subject: [Twisted-Python] Logging and SpawnProcess
Message-ID: <CAAXGW-xP3MKxS2Nf85nzZsSDYEeM7KfsiokqDf_DzS616M4G+A@mail.gmail.com>

Can anyone point me to some sample code for handling logging with
SpawnProcess? Right now I'm using an EchoProtocol that takes stdout and
resends it to the log. But it's kludgy because some sub-processes use
stdin/stderr for marshaling data. What I'd most like to do is separate data
transfer from log output in a clean way.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201230/4d7040a4/attachment.htm>

From twm at freecog.net  Wed Dec 30 22:12:00 2020
From: twm at freecog.net (Tom Most)
Date: Wed, 30 Dec 2020 21:12:00 -0800
Subject: [Twisted-Python] Logging and SpawnProcess
In-Reply-To: <CAAXGW-xP3MKxS2Nf85nzZsSDYEeM7KfsiokqDf_DzS616M4G+A@mail.gmail.com>
References: <CAAXGW-xP3MKxS2Nf85nzZsSDYEeM7KfsiokqDf_DzS616M4G+A@mail.gmail.com>
Message-ID: <7b416b73-84e8-4e12-9a68-586637053f74@www.fastmail.com>

I'm not entirely following the question (is the log output intermixed with other data on stdout?) but I think that you might find the implementation of twisted.internet.endpoints.ProcessEndpoint a useful example. It relays stderr to the logging stream: https://github.com/twisted/twisted/blob/c8064075a207af1fc9ce19d8f885a986bc5ab00c/src/twisted/internet/endpoints.py#L336-L479

---Tom

On Wed, Dec 30, 2020, at 11:38 AM, Robert DiFalco wrote:
> Can anyone point me to some sample code for handling logging with SpawnProcess? Right now I'm using an EchoProtocol that takes stdout and resends it to the log. But it's kludgy because some sub-processes use stdin/stderr for marshaling data. What I'd most like to do is separate data transfer from log output in a clean way. 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201230/60dcc9c4/attachment.htm>

From glyph at twistedmatrix.com  Wed Dec 30 23:03:15 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 30 Dec 2020 22:03:15 -0800
Subject: [Twisted-Python] Logging and SpawnProcess
In-Reply-To: <7b416b73-84e8-4e12-9a68-586637053f74@www.fastmail.com>
References: <CAAXGW-xP3MKxS2Nf85nzZsSDYEeM7KfsiokqDf_DzS616M4G+A@mail.gmail.com>
 <7b416b73-84e8-4e12-9a68-586637053f74@www.fastmail.com>
Message-ID: <6D12404C-4534-4DFA-B9B9-6EC41F8A7ED9@twistedmatrix.com>

One minor point, if this is within your power: don't marshal data over stdout; sometimes libraries scribble on it.  Open an arbitrary additional file descriptor - say, 7 - and put your marshalled data there.

Definitely never use stderr for marshaling anything but lines of text - you're not gonna get away with that :-).  Even well-behaved libraries sometimes dump random text to stderr, that's what it's there for, so you don't do it with stdout!

Subunit has some really interesting ideas here - it's not Twisted code, but it does deal with communicating structured data over stdio streams in such a way that random overzealous SSH MOTD messages won't ruin your day:

https://github.com/testing-cabal/subunit/tree/0e9f67b9683bf2c8c82edb4e511d9b2c7708d900#version-2 <https://github.com/testing-cabal/subunit/tree/0e9f67b9683bf2c8c82edb4e511d9b2c7708d900#version-2>

Hope this is helpful,

-g

> On Dec 30, 2020, at 9:12 PM, Tom Most <twm at freecog.net> wrote:
> 
> I'm not entirely following the question (is the log output intermixed with other data on stdout?) but I think that you might find the implementation of twisted.internet.endpoints.ProcessEndpoint a useful example. It relays stderr to the logging stream: https://github.com/twisted/twisted/blob/c8064075a207af1fc9ce19d8f885a986bc5ab00c/src/twisted/internet/endpoints.py#L336-L479 <https://github.com/twisted/twisted/blob/c8064075a207af1fc9ce19d8f885a986bc5ab00c/src/twisted/internet/endpoints.py#L336-L479>
> 
> ---Tom
> 
> On Wed, Dec 30, 2020, at 11:38 AM, Robert DiFalco wrote:
>> Can anyone point me to some sample code for handling logging with SpawnProcess? Right now I'm using an EchoProtocol that takes stdout and resends it to the log. But it's kludgy because some sub-processes use stdin/stderr for marshaling data. What I'd most like to do is separate data transfer from log output in a clean way. 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
>> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201230/44d59ee1/attachment.htm>

From robert.difalco at gmail.com  Wed Dec 30 23:20:34 2020
From: robert.difalco at gmail.com (Robert DiFalco)
Date: Wed, 30 Dec 2020 22:20:34 -0800
Subject: [Twisted-Python] Logging and SpawnProcess
In-Reply-To: <6D12404C-4534-4DFA-B9B9-6EC41F8A7ED9@twistedmatrix.com>
References: <CAAXGW-xP3MKxS2Nf85nzZsSDYEeM7KfsiokqDf_DzS616M4G+A@mail.gmail.com>
 <7b416b73-84e8-4e12-9a68-586637053f74@www.fastmail.com>
 <6D12404C-4534-4DFA-B9B9-6EC41F8A7ED9@twistedmatrix.com>
Message-ID: <CAAXGW-wFY7jX0RFr1gmyB9Wc6QWOPvvb9ZWd4op3ndC5OY3tVA@mail.gmail.com>

This was very helpful thanks!

On Wed, Dec 30, 2020 at 10:08 PM Glyph <glyph at twistedmatrix.com> wrote:

> One minor point, if this is within your power: don't marshal data over
> stdout; sometimes libraries scribble on it.  Open an arbitrary additional
> file descriptor - say, 7 - and put your marshalled data there.
>
> Definitely *never* use stderr for marshaling anything but lines of text -
> you're not gonna get away with that :-).  Even well-behaved libraries
> sometimes dump random text to stderr, that's what it's there for, so you
> don't do it with stdout!
>
> Subunit has some really interesting ideas here - it's not Twisted code,
> but it does deal with communicating structured data over stdio streams in
> such a way that random overzealous SSH MOTD messages won't ruin your day:
>
>
> https://github.com/testing-cabal/subunit/tree/0e9f67b9683bf2c8c82edb4e511d9b2c7708d900#version-2
>
> Hope this is helpful,
>
> -g
>
>
> On Dec 30, 2020, at 9:12 PM, Tom Most <twm at freecog.net> wrote:
>
> I'm not entirely following the question (is the log output intermixed with
> other data on stdout?) but I think that you might find the implementation
> of twisted.internet.endpoints.ProcessEndpoint a useful example. It relays
> stderr to the logging stream:
> https://github.com/twisted/twisted/blob/c8064075a207af1fc9ce19d8f885a986bc5ab00c/src/twisted/internet/endpoints.py#L336-L479
>
> ---Tom
>
> On Wed, Dec 30, 2020, at 11:38 AM, Robert DiFalco wrote:
>
> Can anyone point me to some sample code for handling logging with
> SpawnProcess? Right now I'm using an EchoProtocol that takes stdout and
> resends it to the log. But it's kludgy because some sub-processes use
> stdin/stderr for marshaling data. What I'd most like to do is separate data
> transfer from log output in a clean way.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20201230/f45bc77d/attachment-0001.htm>

