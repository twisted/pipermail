<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] dataReveived() buffer best practice?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20dataReveived%28%29%20buffer%20best%20practice%3F&In-Reply-To=%3C20111006232757.23178.1690096227.divmod.xquotient.16%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057084.html">
   <LINK REL="Next"  HREF="057087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] dataReveived() buffer best practice?</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20dataReveived%28%29%20buffer%20best%20practice%3F&In-Reply-To=%3C20111006232757.23178.1690096227.divmod.xquotient.16%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] dataReveived() buffer best practice?">exarkun at twistedmatrix.com
       </A><BR>
    <I>Thu Oct  6 17:27:57 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057084.html">[Twisted-Python] dataReveived() buffer best practice?
</A></li>
        <LI>Next message (by thread): <A HREF="057087.html">[Twisted-Python] dataReveived() buffer best practice?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57085">[ date ]</a>
              <a href="thread.html#57085">[ thread ]</a>
              <a href="subject.html#57085">[ subject ]</a>
              <a href="author.html#57085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11:04 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">fabian.rothfuchs at googlemail.com</A> wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On 10/6/11 11:06 PM, &quot;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&quot;
</I>&gt;<i>&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i>On 04:22 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">fabian.rothfuchs at googlemail.com</A> wrote:
</I>&gt;&gt;&gt;<i>Hey there,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I'm currently implementing a Telnet Client, which is actually talking
</I>&gt;&gt;&gt;<i>to a
</I>&gt;&gt;&gt;<i>Console Server mapping Telnet to an RS232 interface.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>[snip]
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>and this is the result:
</I>&gt;&gt;&gt;<i>#------
</I>&gt;&gt;&gt;<i>drudge:Desktop rothfuchs$ p s12.py
</I>&gt;&gt;&gt;<i>received:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>received: MM
</I>&gt;&gt;&gt;<i>USE
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>received: RID:
</I>&gt;&gt;&gt;<i>#------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I also ran a tcpdump to confirm &#255;FD The opposite server is obviously
</I>&gt;&gt;&gt;<i>pushing
</I>&gt;&gt;&gt;<i>content to the socket in arbitrary frequencies, ending up in my
</I>&gt;&gt;&gt;<i>dataReceived() method to get called arbitrarily as well.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This is not so obvious.  Any hop along the route may fragment the 
</I>&gt;&gt;<i>data.
</I>&gt;&gt;&gt;<i>My question: is there any best practice for buffer techniques here?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This question is too vague.  What problem are you trying to solve?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Jean-Paul
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>JP,
</I>&gt;<i>
</I>&gt;<i>What do you mean w/ 'any hop along the route' ?
</I>
Potentially many routers are involved in getting packets from your 
(client) machine to the console server.  Any one of them is allowed to 
fragment the data.  The console server could well be writing &quot;USERID:&quot;, 
but that's no guarantee that you'll receive &quot;USERID:&quot;.
&gt;<i>My problem is, that I need something similar to telnetlib's 
</I>&gt;<i>`read_until()`
</I>&gt;<i>method (in my case read_until('USERID:')), although 'USERID:' may be 
</I>&gt;<i>sent
</I>&gt;<i>in independent events.
</I>&gt;<i>I wonder if this is up to me to implement, or if there's any Twisted- 
</I>&gt;<i>style
</I>&gt;<i>best practice.
</I>
Take a look at twisted.conch.insults.helper.ExpectableBuffer.  You can 
hook it up to your telnet connection and then use its `expect&#180; method to 
wait for a particular string to show up.

ExpectableBuffer is an ITerminalTransport, so you actually have to hook 
it up via twisted.conch.insults.insults.ClientProtocol, a vt102 
implementation.  If the server is incompatible with vt102, then you 
might need to build your own thing like ExpectableBuffer but without the 
vt102 layer.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057084.html">[Twisted-Python] dataReveived() buffer best practice?
</A></li>
	<LI>Next message (by thread): <A HREF="057087.html">[Twisted-Python] dataReveived() buffer best practice?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57085">[ date ]</a>
              <a href="thread.html#57085">[ thread ]</a>
              <a href="subject.html#57085">[ subject ]</a>
              <a href="author.html#57085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
