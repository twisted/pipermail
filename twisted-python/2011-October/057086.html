<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Ticket #4519,	other possible spawnProcess enhancments
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ticket%20%234519%2C%0A%09other%20possible%20spawnProcess%20enhancments&In-Reply-To=%3CCAOUOUDw8huB75UtLNZSk0JWKEk9EqiOZEveV4-eseAXxWRZiZg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057088.html">
   <LINK REL="Next"  HREF="057103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Ticket #4519,	other possible spawnProcess enhancments</H1>
    <B>Andrew Mahone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ticket%20%234519%2C%0A%09other%20possible%20spawnProcess%20enhancments&In-Reply-To=%3CCAOUOUDw8huB75UtLNZSk0JWKEk9EqiOZEveV4-eseAXxWRZiZg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Ticket #4519,	other possible spawnProcess enhancments">andrew.mahone at gmail.com
       </A><BR>
    <I>Thu Oct  6 23:45:12 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057088.html">[Twisted-Python] dataReveived() buffer best practice?
</A></li>
        <LI>Next message (by thread): <A HREF="057103.html">[Twisted-Python] Ticket #4519,	other possible spawnProcess enhancments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57086">[ date ]</a>
              <a href="thread.html#57086">[ thread ]</a>
              <a href="subject.html#57086">[ subject ]</a>
              <a href="author.html#57086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've been working on <A HREF="http://twistedmatrix.com/trac/ticket/4159">http://twistedmatrix.com/trac/ticket/4159</A> and
there has been a bit of discussion on IRC regarding appropriate
interfaces for various things. I think in the long run, the only
python state that setupChild should be allowed to modify should be
args, environment, and the win32 StartupInfo object. This leaves my
own personal use case for it impossible, but I'm working out how to
handle that - special childFDs objects. My proposal so far is that
there be a ProcessFileDescriptor object that inherits from
FileDescriptor. It would add a setup method, which Process would call
in the parent, and separate finishChild and finishParent methods that
would handle things like closing the other end of any pipe-like
objects, and would return a file descriptor - the child would place
this fd in childFDs, the parent would use it for communications with
the child, in the case of objects that wrap pipes or PTYs. I would
also extend the win32 implementation to include some limited support
for childFDs - they could be used to allow the child to inherit
specific file handles as its stdin, stdout, and stderr, instead of
using these exclusively for communications with the parent, so that
redirection to a pipe, to a file, and the building of pipelines could
be accomplished on win32 (I have a project that uses twisted for this
purpose, and I don't use windows, but I would like support to at least
be possible).

I'm seeking comments on whether an extended childFDs interface is the
best way to manipulate the inherited files of the child process, and
whether, if so, fdmap ought to be visible in setupChild at all - in my
opinion, setupChild should be strictly for things like setting the
child PID in an environment variable or as a command line argument,
manipulating scheduler and other parameters external to twisted
itself, and other things of that nature, and the existing childFDs
mechanism should handle any manipulation of file redirection or
inheritance. If there are suggestions on what an extended childFD
object ought to look like, these are welcome as well - I think the
specified methods should handle trivial cases even on platforms
without fork, and should handle nearly anything that really is a file
descriptor on POSIX platforms, but maybe there is something I have
missed.
-- 
Andrew Mahone
andrew DOT mahone AT gmail DOT com


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057088.html">[Twisted-Python] dataReveived() buffer best practice?
</A></li>
	<LI>Next message (by thread): <A HREF="057103.html">[Twisted-Python] Ticket #4519,	other possible spawnProcess enhancments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57086">[ date ]</a>
              <a href="thread.html#57086">[ thread ]</a>
              <a href="subject.html#57086">[ subject ]</a>
              <a href="author.html#57086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
