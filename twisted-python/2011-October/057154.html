<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted enterprise deployment models
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20enterprise%20deployment%20models&In-Reply-To=%3CCAFJezo1v8Z%2BbS7wOZFSEBoM791GSQwXCbUwjFb2dFPqactDagA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057153.html">
   <LINK REL="Next"  HREF="057155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted enterprise deployment models</H1>
    <B>Reza Lotun</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20enterprise%20deployment%20models&In-Reply-To=%3CCAFJezo1v8Z%2BbS7wOZFSEBoM791GSQwXCbUwjFb2dFPqactDagA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Twisted enterprise deployment models">rlotun at gmail.com
       </A><BR>
    <I>Thu Oct 20 05:29:42 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057153.html">[Twisted-Python] Twisted enterprise deployment models
</A></li>
        <LI>Next message (by thread): <A HREF="057155.html">[Twisted-Python] Twisted enterprise deployment models
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57154">[ date ]</a>
              <a href="thread.html#57154">[ thread ]</a>
              <a href="subject.html#57154">[ subject ]</a>
              <a href="author.html#57154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Brad,

On Thu, Oct 20, 2011 at 11:50 AM, Brad Milne
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">brad.milne at devx.runthered.com</A>&gt;wrote:

&gt;<i> ...
</I>&gt;<i> So my questions:
</I>&gt;<i> 1) I'm right, right? Twisted doesn't have mechanisms or a library for hot
</I>&gt;<i> swapping code modules or similar solutions for low impact upgrades and high
</I>&gt;<i> availability? (I originally read about Twisted *plugins* hoping for this,
</I>&gt;<i> but was disappointed to find how basic they actually were)
</I>&gt;<i>
</I>
No, not a complete, first-class mechanism (at least as far as I know).

However, there are a few pieces in Twisted which can be used to build such a
solution. I've been meaning to piece them together for a while to do this,
but time-constraints and what-not have prohibited that so far:

1.
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.python.rebuild.html">http://twistedmatrix.com/documents/current/api/twisted.python.rebuild.html</A>
This a module that can be used to reload class definitions and instances,
etc. You can conceive of a system whereby you load a class that defines a
code loading module that can pick up modules in a directory and periodically
refresh their definitions, for example. One way to do it with RabbitMQ is
have a queue specifically for code-refreshes - when a code-reload service
receives a message it does one or more twisted.python.rebuilds to reload the
code definitions, or something. There is obviously still a lot you have to
do yourself, but it's something. (I'm aware that reloading modules in Python
is generally difficult because of all the stray references that can still
exist, but you can probably structure the code in such a way that a reload,
or series of reloads will do the job).

2.
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.runner.procmon.ProcessMonitor.html">http://twistedmatrix.com/documents/current/api/twisted.runner.procmon.ProcessMonitor.html</A>
A service to monitor processes. You can have other services running in
container processes, and use this functionality to monitor and control them.

3.
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.ProcessProtocol.html">http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.ProcessProtocol.html</A>
You can define process protocols that implement specific job types. Usually
this is used to spread process amongst cores, but you could also use it for
sanboxing functionality I suppose. Another project that uses this for
spreading working process amongst cores is Ampoule:
<A HREF="https://launchpad.net/ampoule">https://launchpad.net/ampoule</A>


2) Is RabbitMQ with txAMQP-empowered Twisted instances on the ends of the
&gt;<i> queues a sensible, compatible, best-practice approach as agreed by the
</I>&gt;<i> community?
</I>&gt;<i>
</I>
Sure. It's one approach. You can also use Redis and txRedis -
<A HREF="https://github.com/rlotun/txRedis.">https://github.com/rlotun/txRedis.</A> Redis has pub-sub functionality that's
much simpler than AMQP (but not as powerful - for example you can't do
something like ACK a task). But for basic pub-sub it's awesome.

We use both RabbitMQ and Redis, via txAMQP and txRedis.

Reza

-- 
Reza Lotun
mobile: +44 (0)7521 310 763
email:  <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rlotun at gmail.com</A>
work:   <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rlotun at twitter.com</A>
@rlotun
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20111020/6bc4608f/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057153.html">[Twisted-Python] Twisted enterprise deployment models
</A></li>
	<LI>Next message (by thread): <A HREF="057155.html">[Twisted-Python] Twisted enterprise deployment models
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57154">[ date ]</a>
              <a href="thread.html#57154">[ thread ]</a>
              <a href="subject.html#57154">[ subject ]</a>
              <a href="author.html#57154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
