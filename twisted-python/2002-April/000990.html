<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Component Architecture in coil
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Component%20Architecture%20in%20coil&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000989.html">
   <LINK REL="Next"  HREF="000991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Component Architecture in coil</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Component%20Architecture%20in%20coil&In-Reply-To="
       TITLE="[Twisted-Python] Component Architecture in coil">twisted at itamarst.org
       </A><BR>
    <I>Fri Apr  5 07:06:27 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000989.html">[Twisted-Python] Deferreds
</A></li>
        <LI>Next message: <A HREF="000991.html">[Twisted-Python] First pass of components/adapters stuff now in CVS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#990">[ date ]</a>
              <a href="thread.html#990">[ thread ]</a>
              <a href="subject.html#990">[ subject ]</a>
              <a href="author.html#990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is all based on Zope3 component architecture:
<A HREF="http://cvs.zope.org/Docs/ZopeComponentArchitecture/PythonProgrammerTutorial/Chapter1/">http://cvs.zope.org/Docs/ZopeComponentArchitecture/PythonProgrammerTutorial/Chapter1/</A>

Specificially the 5th part, but I recommend going through the whole thing.


Quick intro - classes can say they implement interfaces.

  class A:
       __implements__ == (IProducer, IBlarg)

Notice that interfaces are separate from inheritance.

Next, we have adapters. This is a registry of classes, kinda like the 
Configurator registry for coil.

getAdapter(o, IFoo) returns an object that wraps o, so that the wrapped 
object implements interface IFoo. If o already implements it, then o is 
returned, otherwise it is looked up in the registry, wrapped, and an 
object implementing IFoo is returned. (There's a PEP that talks about 
something in this vein - <A HREF="http://www.python.org/peps/pep-0246.html">http://www.python.org/peps/pep-0246.html</A>).

Now, on to coil. For coil, we really need two interfaces - 
IConfigurator, for properties, and IConfigCollection. So, where before 
hand we wanted configurable classes to inherit from Collection, now we 
have a much better system.

When we want a configurator we do:

    cfg = getAdapter(o, IConfigurator)

More or less like now. When we want a collection-like interface, we do:

    collection = getAdapter(o, IConfigCollection)

Now, note the benefits. We can write a configuration class that 
implements both IConfigurator and IConfigCollection for our class, and 
then it will be returned in both cases - regardless of what o's class 
inherits from. So, we don't have to worry about what our classes inherit 
from, classes can implement IConfigurator or IConfigCollection 
themselves if they want, etc..

In other words, we have a much more flexible system, and we solved the 
&quot;what if both Configurator and configurable inherit from Collection&quot; 
issue, and in general we got rid of all the horrible special cases in 
webcoil. And this is generally extendable.

I'm sure we will find other uses for this as well - we already are using 
a hard-coded system for this in Configurators, and I'm sure there are 
many more places where this is useful.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000989.html">[Twisted-Python] Deferreds
</A></li>
	<LI>Next message: <A HREF="000991.html">[Twisted-Python] First pass of components/adapters stuff now in CVS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#990">[ date ]</a>
              <a href="thread.html#990">[ thread ]</a>
              <a href="subject.html#990">[ subject ]</a>
              <a href="author.html#990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
