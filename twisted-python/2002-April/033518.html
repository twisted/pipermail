<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Yet another coil refactor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Yet%20another%20coil%20refactor&In-Reply-To=%3C3CB29142.9090601%40itamarst.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033516.html">
   <LINK REL="Next"  HREF="033502.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Yet another coil refactor</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Yet%20another%20coil%20refactor&In-Reply-To=%3C3CB29142.9090601%40itamarst.org%3E"
       TITLE="[Twisted-Python] Yet another coil refactor">twisted at itamarst.org
       </A><BR>
    <I>Tue Apr  9 00:59:14 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033516.html">[Twisted-Python] Yet another coil refactor
</A></li>
        <LI>Next message (by thread): <A HREF="033502.html">[Twisted-Python] How to setup a ftpserver, ftpclient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33518">[ date ]</a>
              <a href="thread.html#33518">[ thread ]</a>
              <a href="subject.html#33518">[ subject ]</a>
              <a href="author.html#33518">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Glyph Lefkowitz wrote:

&gt;<i> So I propose a compromise: I think that classes which implement
</I>&gt;<i> interfaces should be required to inherit from an Implementor class, in
</I>&gt;<i> order to facilitate evolution of interfaces.  This Implementor class
</I>&gt;<i> could even be a metaclass, ensuring at least trivial implementation
</I>&gt;<i> constraints at import-time, possibly spotting bugs early on.
</I>
First of all, runtime checking can only catch gross miscompliance of 
interfaces. However, since interfaces talk about external APIs, not internal 
representation, changes to the interface are much less likely, esp. once we 
hit a stable release.

That is, someone currently writing for Twisted has to say - &quot;this is for 
Twisted 0.15.5&quot; or whatever, because we do have occasional changes of 
underlying interfaces, e.g. coil ;). Once we hit 1.0 the interfaces will 
*not* change in the stable branch.

So, we really just need to list any changes to interfaces in the changelog - 
there's no real way we can fix other people's code. I don't see how this is 
any different than the previous way things worked where we had implicit 
interfaces that changed (e.g. addShutdown was removed from t.i.main).


Next, conside this - we add these two functions to components module:

def registerImplementor(klass):
     &quot;&quot;&quot;Register a class that implements interfaces.&quot;&quot;&quot;

def addInterface(klass, interface):
     &quot;&quot;&quot;Register that the class implements an interface not listed in
        its __implements__.&quot;&quot;&quot;

and we would require this for any methods that wants to work with the 
components thing.

Benefits:
1. Checking of interface compliance can be done in an easier fashion (and I 
  already have the code for it).

2. The ability to add interfaces without sticking them in __implements__ - 
this could help solve the issue where twisted.web.resource depends on coil.

3. No need to mess with meta-classes, and it'll work pre-2.2 (and if you 
want to use pre-2.2 meta-classes, you're even crazier than previously thought ;)

Disadvantages:
*Possibly* need to add an extra line for each class, not just inherit in 
super-classes. However, if we implement addInterface() so that it mutates 
the __implements__, this won't be necessary, you'll only need to register 
the superclass.

This implies that registerImplementor is basically only used for testing 
interface compliance and can't have other side effects.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033516.html">[Twisted-Python] Yet another coil refactor
</A></li>
	<LI>Next message (by thread): <A HREF="033502.html">[Twisted-Python] How to setup a ftpserver, ftpclient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33518">[ date ]</a>
              <a href="thread.html#33518">[ thread ]</a>
              <a href="subject.html#33518">[ subject ]</a>
              <a href="author.html#33518">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
