<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] dispensers for coil
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20dispensers%20for%20coil&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001013.html">
   <LINK REL="Next"  HREF="001017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] dispensers for coil</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20dispensers%20for%20coil&In-Reply-To="
       TITLE="[Twisted-Python] dispensers for coil">twisted at itamarst.org
       </A><BR>
    <I>Tue Apr  9 06:48:56 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001013.html">[Twisted-Python] What rough protocol, its hour come at last,	slouches towards Austin to be born?
</A></li>
        <LI>Next message: <A HREF="001017.html">[Twisted-Python] stopFactory() called twice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1011">[ date ]</a>
              <a href="thread.html#1011">[ thread ]</a>
              <a href="subject.html#1011">[ subject ]</a>
              <a href="author.html#1011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just took a look - config dispensers are totally broken.

The whole way they work for web coil is wrong (i.e. they are only available 
when an object is newly created, if you load in an existing tap you won't 
have dispensers.) This is because they are added only when a new object is 
first created.

The solution is scanning the whole heirarchy for dispensers when it's first 
loaded. Or rather each time a plugin is loaded.

This will probably create duplicate dispensers for each run the current way 
web stores dispensers. This can be fixed by having webcoil store, instead of 
the id(!!!!) of the method, a tuple of the configurator class, the dispenser 
name, and the instance from which the dispensers were gotten (dispensers are 
specific to an object.)

Summary:
We scan for dispensers every time a new plugin is loaded.
Add dispensers upon object creation.
Change how we store &quot;references&quot; to dispenser methods.
Move this functionality into coil.py where it belongs, maybe

Any comments?



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001013.html">[Twisted-Python] What rough protocol, its hour come at last,	slouches towards Austin to be born?
</A></li>
	<LI>Next message: <A HREF="001017.html">[Twisted-Python] stopFactory() called twice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1011">[ date ]</a>
              <a href="thread.html#1011">[ thread ]</a>
              <a href="subject.html#1011">[ subject ]</a>
              <a href="author.html#1011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
