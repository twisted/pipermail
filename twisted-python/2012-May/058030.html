<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Synchronous calls using Twisted?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Synchronous%20calls%20using%20Twisted%3F&In-Reply-To=%3C4FB43131.2030805%40gresille.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058029.html">
   <LINK REL="Next"  HREF="058032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Synchronous calls using Twisted?</H1>
    <B>Louis</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Synchronous%20calls%20using%20Twisted%3F&In-Reply-To=%3C4FB43131.2030805%40gresille.org%3E"
       TITLE="[Twisted-Python] Synchronous calls using Twisted?">spalax at gresille.org
       </A><BR>
    <I>Wed May 16 16:58:57 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058029.html">[Twisted-Python] Declaring AMP responders away from
</A></li>
        <LI>Next message (by thread): <A HREF="058032.html">[Twisted-Python] Synchronous calls using Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58030">[ date ]</a>
              <a href="thread.html#58030">[ thread ]</a>
              <a href="subject.html#58030">[ subject ]</a>
              <a href="author.html#58030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Hello,
  I am writing an application, which architecture is (I hope my
beautiful drawing is not messed up):

  +-------------+   +------------+   +-----------+
  | Core Server |---| Web Server |---| Web client|
  +-------------+   +------------+   +-----------+

  That is, I have a core server (itself interacting with a database, but
I think this is not important). I have a second piece of software, which
is both a client regarding the core server, and a web server. At last,
the web client is the web browser of your choice.
  The web server is a Django application, which means that (as far as I
know) I cannot (easily) make it use asynchronous calls.
  At last, for the communication between the core server and the web
server (which is, from this point of vue, a client), I was looking for
something that let me use remote objects as if they were local. That is
when I discovered Twisted.



  Twisted seems to be the kind of tool I want to use because it seems to
be powerful, can use SSL, authentication, transmits exceptions, is meant
to be used with Trial (I want to write tests), etc. The problem is that
one of the strength of Twisted is its ability to deal with asynchronous
tasks, which I am not interested in.  Using blockingCallFromThread()
[1], I managed to make a small package which looks (from my
Twisted-ignorant point of vue) promising for my application, where the
server is simply defined by (in a Twisted .tac  file):

    # Server() is the object to be exported to the client
    application = server.get_application(Server(),
                  &quot;tcp:8800:interface=localhost&quot;)

And the client can perform something like:

    remote = client.RemoteObject(&quot;localhost&quot;, 8800)
    # display() is a method executed on the server
    remote.display(&quot;Hello, world!&quot;)
    remote.disconnect()


  But then I noticed that I might have problem to test it using Trial
(because an deadlock happens when blockingCallFromThread() and the
reactor are waiting for each other in the same thread). I also had a
look at inlineCallbacks [2], but although code looks synchronous inside
the decorated function, the function itself still returns a deferred.  I
noticed quite a few other minor things. And I started to realize that
Twisted is not meant to be used that way (and I read a bunch of threads
of the Twisted mailing list with subjects containing &quot;synchronous&quot;,
including this long one [3]).

  My question is: What is your reaction?

a) &quot;Nice hack! Go on!&quot;
b) &quot;Go on if you like, but you won't be able to use advanced Trial stuff
(like timeouts), let alone Trial.&quot;
c) &quot;Go on if you wish, but you are missing the beauty of Twisted.&quot;
d) &quot;Stop it now. You have clearly misunderstood Twisted. You are wasting
your time and ours.&quot;
e) Any other...

  Do you think Twisted is the right tool for my use case, or am I doing
an ugly hack to do what I want, which means I should rather use another
tool?


  Sorry for the length of this post, and thanks in advance for your help.
  Louis

[1]
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.threads.html#blockingCallFromThread">http://twistedmatrix.com/documents/current/api/twisted.internet.threads.html#blockingCallFromThread</A>
[2]
<A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html#inlineCallbacks">http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html#inlineCallbacks</A>
[3]
<A HREF="http://twistedmatrix.com/pipermail/twisted-python/2005-October/thread.html#11831">http://twistedmatrix.com/pipermail/twisted-python/2005-October/thread.html#11831</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058029.html">[Twisted-Python] Declaring AMP responders away from
</A></li>
	<LI>Next message (by thread): <A HREF="058032.html">[Twisted-Python] Synchronous calls using Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58030">[ date ]</a>
              <a href="thread.html#58030">[ thread ]</a>
              <a href="subject.html#58030">[ subject ]</a>
              <a href="author.html#58030">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
