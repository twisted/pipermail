<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] feedback on next version of Fireshark using twisted framework....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20feedback%20on%20next%20version%20of%20Fireshark%20using%0A%20twisted%20framework....&In-Reply-To=CAA0H%2BQSmE6%2BU6nzhGxCLx%3D51DRU91FwmU0GUSVRRkZT-XLJUaw%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025531.html">
   <LINK REL="Next"  HREF="025533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] feedback on next version of Fireshark using twisted framework....</H1>
    <B>Stephan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20feedback%20on%20next%20version%20of%20Fireshark%20using%0A%20twisted%20framework....&In-Reply-To=CAA0H%2BQSmE6%2BU6nzhGxCLx%3D51DRU91FwmU0GUSVRRkZT-XLJUaw%40mail.gmail.com"
       TITLE="[Twisted-Python] feedback on next version of Fireshark using twisted framework....">schenette at gmail.com
       </A><BR>
    <I>Thu May  3 15:11:33 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025531.html">[Twisted-Python] feedback on next version of Fireshark using twisted framework....
</A></li>
        <LI>Next message: <A HREF="025533.html">[Twisted-Python] feedback on next version of Fireshark using	twisted framework....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25532">[ date ]</a>
              <a href="thread.html#25532">[ thread ]</a>
              <a href="subject.html#25532">[ subject ]</a>
              <a href="author.html#25532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>thanks for the feed back Jasper! More feedback welcome.
Yes the code def. needs to be cleaned up before public release, and I will
make more use of python libs for path concatenation.

The feedback I'm specifically looking for is anything related to how I'm
using twisted and process management.
The reason I have everything in there from timing out, to killing a
process, is because I'm dealing with malicious websites, so bad things
happen and so I need to take extreme measures to for resource monitoring.

Any suggestions on how I can do things better with the service in terms of
how i'm using Twisted is welcome! Jasper provided great comments and I'll
be working to make those changes.

Thanks,
Stephan

On Thu, May 3, 2012 at 11:12 AM, Jasper St. Pierre &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jstpierre at mecheye.net</A>&gt;wrote:

&gt;<i> You seem to have some indentation issues. You have a random assortment
</I>&gt;<i> of Python style issues (some lines end with a semicolon). You use
</I>&gt;<i> 'foo' + '/' + 'bar' to generate paths. While not evil (I think all
</I>&gt;<i> major platforms will support that and do the translation on their
</I>&gt;<i> own), you're better off using os.path.join. The &quot;~/.mozilla/firefox&quot;
</I>&gt;<i> won't work on certain platforms (and you could just use
</I>&gt;<i> os.path.expanduser if you don't want to support those platforms).
</I>&gt;<i>
</I>&gt;<i> Your process spawning code is ugly, and could be open to injection if
</I>&gt;<i> not handled properly. Do it the better way:
</I>&gt;<i>
</I>&gt;<i>    reactor.spawnProcess(self.processProtocol, 'xfvb-run',
</I>&gt;<i> ['xvfv-run', '--auto-servernum', 'firefox', '-p', profile_id], env =
</I>&gt;<i> os.environ, usePTY=1)
</I>&gt;<i>
</I>&gt;<i> Don't do 'foo == True'. Please use new-style classes (inherit from
</I>&gt;<i> 'object'). I don't know why the timeout stuff makes me a bit scared,
</I>&gt;<i> but it does. I don't really think timeouts are necessary here.
</I>&gt;<i>
</I>&gt;<i> I don't think you should be killing a process with os.kill. I'm quite
</I>&gt;<i> sure whatever you're trying to do has a better Twisted idiom.
</I>&gt;<i>
</I>&gt;<i> Google for PEP 8, ignore the ones that don't make sense (like foo_case
</I>&gt;<i> instead of camelCase in Twisted code), and try to follow the rest.
</I>&gt;<i> When using Twisted code, always look for things in Twisted that might
</I>&gt;<i> combat the standard library, and try to use Twisted's whenever
</I>&gt;<i> possible.
</I>&gt;<i>
</I>&gt;<i> On Thu, May 3, 2012 at 11:56 AM, Stephan &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">schenette at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi I have an open source project that is pretty well-known in the
</I>&gt;<i> security
</I>&gt;<i> &gt; community. <A HREF="http://www.fireshark.org">http://www.fireshark.org</A>
</I>&gt;<i> &gt; it's a service wrapper that runs a headless version of firefox to visit
</I>&gt;<i> &gt; malicious sites to store telemetry data.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The old service used PERL for threading (very painful), so a while ago I
</I>&gt;<i> &gt; changed everything to python using
</I>&gt;<i> &gt; the twisted framework. the service's job is to launch a choose a firefox
</I>&gt;<i> &gt; profile, launch the process and
</I>&gt;<i> &gt; handle closes and crashes approprietly.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; the launch of version 2.5 is next week but I sure could use some
</I>&gt;<i> feedback on
</I>&gt;<i> &gt; the service code before releasing it.
</I>&gt;<i> &gt; Keep in mind I haven't finishing commenting for public release.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; here are the files for the new service:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1)
</I>&gt;<i> &gt; fireshark.py <A HREF="http://pastebin.mozilla.org/1614427">http://pastebin.mozilla.org/1614427</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; this is the main service. opens up a port to listen on, and uses the
</I>&gt;<i> &gt; following two classes to manage profiles and launch
</I>&gt;<i> &gt; a firefox process.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2)
</I>&gt;<i> &gt; firesharkprofilemanager.py <A HREF="http://pastebin.mozilla.org/1614428">http://pastebin.mozilla.org/1614428</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; this is the firefox profile manager, it manages what firefox profiles are
</I>&gt;<i> &gt; available.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 3)
</I>&gt;<i> &gt; firefoxprocess.py <A HREF="http://pastebin.mozilla.org/1614431">http://pastebin.mozilla.org/1614431</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; this is the firefox process class, to check if  the launched process has
</I>&gt;<i> &gt; been killed as well, as check if the logging from
</I>&gt;<i> &gt; the internal plugin (another part of the fireshark project) has completed
</I>&gt;<i> &gt; logging.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks in advance! Twisted has been a great Framework!
</I>&gt;<i> &gt; Stephan
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Twisted-Python mailing list
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>   Jasper
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120503/f473e823/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120503/f473e823/attachment.htm</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025531.html">[Twisted-Python] feedback on next version of Fireshark using twisted framework....
</A></li>
	<LI>Next message: <A HREF="025533.html">[Twisted-Python] feedback on next version of Fireshark using	twisted framework....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25532">[ date ]</a>
              <a href="thread.html#25532">[ thread ]</a>
              <a href="subject.html#25532">[ subject ]</a>
              <a href="author.html#25532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
