<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] feedback on next version of Fireshark using twisted framework....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20feedback%20on%20next%20version%20of%20Fireshark%20using%0A%20twisted%20framework....&In-Reply-To=CADozHMVnYD5Oqwhq%2BR50zKCQP6zSdrrz8mCTqOMspNNTSSYDCQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025530.html">
   <LINK REL="Next"  HREF="025532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] feedback on next version of Fireshark using twisted framework....</H1>
    <B>Jasper St. Pierre</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20feedback%20on%20next%20version%20of%20Fireshark%20using%0A%20twisted%20framework....&In-Reply-To=CADozHMVnYD5Oqwhq%2BR50zKCQP6zSdrrz8mCTqOMspNNTSSYDCQ%40mail.gmail.com"
       TITLE="[Twisted-Python] feedback on next version of Fireshark using twisted framework....">jstpierre at mecheye.net
       </A><BR>
    <I>Thu May  3 14:12:01 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025530.html">[Twisted-Python] feedback on next version of Fireshark using	twisted framework....
</A></li>
        <LI>Next message: <A HREF="025532.html">[Twisted-Python] feedback on next version of Fireshark using twisted framework....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25531">[ date ]</a>
              <a href="thread.html#25531">[ thread ]</a>
              <a href="subject.html#25531">[ subject ]</a>
              <a href="author.html#25531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You seem to have some indentation issues. You have a random assortment
of Python style issues (some lines end with a semicolon). You use
'foo' + '/' + 'bar' to generate paths. While not evil (I think all
major platforms will support that and do the translation on their
own), you're better off using os.path.join. The &quot;~/.mozilla/firefox&quot;
won't work on certain platforms (and you could just use
os.path.expanduser if you don't want to support those platforms).

Your process spawning code is ugly, and could be open to injection if
not handled properly. Do it the better way:

    reactor.spawnProcess(self.processProtocol, 'xfvb-run',
['xvfv-run', '--auto-servernum', 'firefox', '-p', profile_id], env =
os.environ, usePTY=1)

Don't do 'foo == True'. Please use new-style classes (inherit from
'object'). I don't know why the timeout stuff makes me a bit scared,
but it does. I don't really think timeouts are necessary here.

I don't think you should be killing a process with os.kill. I'm quite
sure whatever you're trying to do has a better Twisted idiom.

Google for PEP 8, ignore the ones that don't make sense (like foo_case
instead of camelCase in Twisted code), and try to follow the rest.
When using Twisted code, always look for things in Twisted that might
combat the standard library, and try to use Twisted's whenever
possible.

On Thu, May 3, 2012 at 11:56 AM, Stephan &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">schenette at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi I have an open source project that is pretty well-known in the security
</I>&gt;<i> community. <A HREF="http://www.fireshark.org">http://www.fireshark.org</A>
</I>&gt;<i> it's a service wrapper that runs a headless version of firefox to visit
</I>&gt;<i> malicious sites to store telemetry data.
</I>&gt;<i>
</I>&gt;<i> The old service used PERL for threading (very painful), so a while ago I
</I>&gt;<i> changed everything to python using
</I>&gt;<i> the twisted framework. the service's job is to launch a choose a firefox
</I>&gt;<i> profile, launch the process and
</I>&gt;<i> handle closes and crashes approprietly.
</I>&gt;<i>
</I>&gt;<i> the launch of version 2.5 is next week but I sure could use some feedback on
</I>&gt;<i> the service code before releasing it.
</I>&gt;<i> Keep in mind I haven't finishing commenting for public release.
</I>&gt;<i>
</I>&gt;<i> here are the files for the new service:
</I>&gt;<i>
</I>&gt;<i> 1)
</I>&gt;<i> fireshark.py <A HREF="http://pastebin.mozilla.org/1614427">http://pastebin.mozilla.org/1614427</A>
</I>&gt;<i>
</I>&gt;<i> this is the main service. opens up a port to listen on, and uses the
</I>&gt;<i> following two classes to manage profiles and launch
</I>&gt;<i> a firefox process.
</I>&gt;<i>
</I>&gt;<i> 2)
</I>&gt;<i> firesharkprofilemanager.py <A HREF="http://pastebin.mozilla.org/1614428">http://pastebin.mozilla.org/1614428</A>
</I>&gt;<i>
</I>&gt;<i> this is the firefox profile manager, it manages what firefox profiles are
</I>&gt;<i> available.
</I>&gt;<i>
</I>&gt;<i> 3)
</I>&gt;<i> firefoxprocess.py <A HREF="http://pastebin.mozilla.org/1614431">http://pastebin.mozilla.org/1614431</A>
</I>&gt;<i>
</I>&gt;<i> this is the firefox process class, to check if &#160;the launched process has
</I>&gt;<i> been killed as well, as check if the logging from
</I>&gt;<i> the internal plugin (another part of the fireshark project) has completed
</I>&gt;<i> logging.
</I>&gt;<i>
</I>&gt;<i> Thanks in advance! Twisted has been a great Framework!
</I>&gt;<i> Stephan
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>


-- 
&#160; Jasper

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025530.html">[Twisted-Python] feedback on next version of Fireshark using	twisted framework....
</A></li>
	<LI>Next message: <A HREF="025532.html">[Twisted-Python] feedback on next version of Fireshark using twisted framework....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25531">[ date ]</a>
              <a href="thread.html#25531">[ thread ]</a>
              <a href="subject.html#25531">[ subject ]</a>
              <a href="author.html#25531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
