<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do you determine the buffer size of a transport - a use-case for not using back pressure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20you%20determine%20the%20buffer%20size%20of%20a%0A%20transport%20-%20a%20use-case%20for%20not%20using%20back%20pressure&In-Reply-To=%3C57BAFC8C.1080300%40imperial.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063205.html">
   <LINK REL="Next"  HREF="030740.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do you determine the buffer size of a transport - a use-case for not using back pressure</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20you%20determine%20the%20buffer%20size%20of%20a%0A%20transport%20-%20a%20use-case%20for%20not%20using%20back%20pressure&In-Reply-To=%3C57BAFC8C.1080300%40imperial.ac.uk%3E"
       TITLE="[Twisted-Python] How do you determine the buffer size of a transport - a use-case for not using back pressure">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Mon Aug 22 07:22:20 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063205.html">[Twisted-Python] How do you determine the buffer size of a transport - a use-case for not using back pressure
</A></li>
        <LI>Next message (by thread): <A HREF="030740.html">[Twisted-Python] Moving under a src directory,	or: Sorry But I Broke All Your Pull Requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63214">[ date ]</a>
              <a href="thread.html#63214">[ thread ]</a>
              <a href="subject.html#63214">[ subject ]</a>
              <a href="author.html#63214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/08/16 23:43, Steve Morin wrote:
&gt;<i> Twisted Community
</I>&gt;<i>
</I>&gt;<i> Problem: How do you determine the buffer size of a transport, to know
</I>&gt;<i> how much data is waiting to be transmitted from using transport.write?
</I>
You haven't received many responses, so I'll add a short note here:

The ideal way to do this IMO is to have the receiver send 
acknowledgements with a sequence number to the sender once a message has 
been received *and processed*. Keep track of these at the sender and 
adjust the sending rate accordingly.

Another complementary approach is for the client to keep track of the 
length (in space or in time/age) of it's local 
received-but-not-processed queue and report this. Keeping track of the 
queue in terms of delay is close to the CoDel approach for AQM.

Depending on the network portion of the implementation, the mere fact of 
a message having been received and TCP-ack'd doesn't tell you the client 
is keeping up - it might be receiving and buffering into RAM and getting 
more and more backlogged.

If you can't alter the protocol to include protocol-level ack messages 
then obviously you have to go the less satisfactory route and estimate 
it from the lower-layer transport. As JP has noted, you can get this 
from the kernel.

Flow control is hard ;o)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063205.html">[Twisted-Python] How do you determine the buffer size of a transport - a use-case for not using back pressure
</A></li>
	<LI>Next message (by thread): <A HREF="030740.html">[Twisted-Python] Moving under a src directory,	or: Sorry But I Broke All Your Pull Requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63214">[ date ]</a>
              <a href="thread.html#63214">[ thread ]</a>
              <a href="subject.html#63214">[ subject ]</a>
              <a href="author.html#63214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
