<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reading multipart/form-data headers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reading%20multipart/form-data%20headers&In-Reply-To=%3C8861561D-F7C8-41D5-80E3-79E216AD29D1%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030703.html">
   <LINK REL="Next"  HREF="030710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reading multipart/form-data headers</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reading%20multipart/form-data%20headers&In-Reply-To=%3C8861561D-F7C8-41D5-80E3-79E216AD29D1%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] reading multipart/form-data headers">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Aug 11 14:52:21 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030703.html">[Twisted-Python] reading multipart/form-data headers
</A></li>
        <LI>Next message: <A HREF="030710.html">[Twisted-Python] reading multipart/form-data headers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30706">[ date ]</a>
              <a href="thread.html#30706">[ thread ]</a>
              <a href="subject.html#30706">[ subject ]</a>
              <a href="author.html#30706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Aug 11, 2016, at 8:55 AM, Burak Arslan &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">burak.arslan at arskom.com.tr</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hello All,
</I>&gt;<i> 
</I>&gt;<i> You can find a sample HTTP POST request using HTTP multipart/form-data at the end of this message.
</I>&gt;<i> 
</I>&gt;<i> The server that handles this request is using twisted so I end up with a Request object. Is there a way I can extract the file name (&quot;image008.jpg&quot;) from this stream? I'm looking at the source of cgi.parse_multipart() and it seems to be ignored.
</I>&gt;<i> 
</I>Sadly Twisted just calls into cgi.parse_multipart and so it is in fact ignored.  You might be able to re-parse the request body (request.content.seek(0); request.content.read()) with something like &lt;<A HREF="https://docs.python.org/2.7/library/email.mime.html#email.mime.multipart.MIMEMultipart">https://docs.python.org/2.7/library/email.mime.html#email.mime.multipart.MIMEMultipart</A> &lt;<A HREF="https://docs.python.org/2.7/library/email.mime.html#email.mime.multipart.MIMEMultipart">https://docs.python.org/2.7/library/email.mime.html#email.mime.multipart.MIMEMultipart</A>&gt;&gt; or &lt;<A HREF="https://github.com/mailgun/flanker">https://github.com/mailgun/flanker</A> &lt;<A HREF="https://github.com/mailgun/flanker">https://github.com/mailgun/flanker</A>&gt;&gt; to extract more information about the MIME.

It would definitely be better for Twisted to have more robust facilities for dealing with request inputs, particularly to be able to process large uploads as a stream rather than an individual message (and such an API for form post uploads should obviously include the content disposition filename).  See &lt;<A HREF="https://twistedmatrix.com/trac/ticket/288">https://twistedmatrix.com/trac/ticket/288</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/288">https://twistedmatrix.com/trac/ticket/288</A>&gt;&gt; for more discussion :).

Thanks for using Twisted, and sorry about this shortcoming.

-g



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160811/d27c5c14/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160811/d27c5c14/attachment.html</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030703.html">[Twisted-Python] reading multipart/form-data headers
</A></li>
	<LI>Next message: <A HREF="030710.html">[Twisted-Python] reading multipart/form-data headers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30706">[ date ]</a>
              <a href="thread.html#30706">[ thread ]</a>
              <a href="subject.html#30706">[ subject ]</a>
              <a href="author.html#30706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
