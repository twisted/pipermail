<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Waiting%20time%20for%20tests%20running%20on%20Travis%20CI%0A%09and%20Buildbot&In-Reply-To=%3CCAEeXt4MEP5C20MSpa%3D7tikptS95wUz8vbKn9p4bKxZV5g%2BM-Lg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030730.html">
   <LINK REL="Next"  HREF="030737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Waiting%20time%20for%20tests%20running%20on%20Travis%20CI%0A%09and%20Buildbot&In-Reply-To=%3CCAEeXt4MEP5C20MSpa%3D7tikptS95wUz8vbKn9p4bKxZV5g%2BM-Lg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Aug 16 04:06:28 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030730.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
        <LI>Next message: <A HREF="030737.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30735">[ date ]</a>
              <a href="thread.html#30735">[ thread ]</a>
              <a href="subject.html#30735">[ subject ]</a>
              <a href="author.html#30735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 15, 2016 at 7:03 PM, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i> On Aug 15, 2016, at 2:11 PM, Jean-Paul Calderone &lt;
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> On Mon, Aug 15, 2016 at 4:38 PM, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> There's a lot that we can do to make Travis almost that fast, with
</I>&gt;<i> pre-built Docker images and cached dependencies.  We haven't done much in
</I>&gt;<i> the way of aggressive optimization yet.  As recently discussed we're still
</I>&gt;<i> doing twice as many builds as we need to just because we've misconfigured
</I>&gt;<i> branch / push builds :).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hm... pre-built dockers also takes effort to keep them updated... and
</I>&gt;<i> then we will have a KVM VM starting inside a docker in which we run
</I>&gt;<i> the tests...
</I>&gt;<i>
</I>&gt;<i> ...and we would not be able to test the inotify part.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Not true:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    1. We can have one non-containerized builder (sudo: true) for testing
</I>&gt;&gt;<i>    inotify; no need for KVM-in-Docker (also you can't do that without a
</I>&gt;&gt;<i>    privileged container, so, good thing)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm curious about the details of how such a configuration would work.
</I>&gt;<i> Since there is only one travis configuration per repository (well, per
</I>&gt;<i> branch, technically, don't think that makes a difference here) and the sudo
</I>&gt;<i> configuration is global (isn't it?), I always though either a project had
</I>&gt;<i> to pick sudo or not sudo and you couldn't have a mix of builds with each.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I had just assumed that it would be per-matrix-entry, and while it looks
</I>&gt;<i> like I'm correct, it's much less obvious than I had thought.  If you look
</I>&gt;<i> at the second example code block under this heading:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://docs.travis-ci.com/user/multi-os/#Example-Multi-OS-Build-Matrix">https://docs.travis-ci.com/user/multi-os/#Example-Multi-OS-Build-Matrix</A>
</I>&gt;<i>
</I>&gt;<i> you'll see that one of the matrix/include entries has a 'sudo: required'
</I>&gt;<i> tag, which means &quot;non-container-based&quot; please.  Presumably you can mix
</I>&gt;<i> those.
</I>&gt;<i>
</I>
Ah, neat.  I hope that works (and wish I'd noticed that example a couple
months ago).

Jean-Paul


&gt;<i>
</I>&gt;<i> The docs on &quot;migrating to the container-based infrastructure&quot; do make it
</I>&gt;<i> sound like this is impossible though, and this isn't nearly as clear as I'd
</I>&gt;<i> like, so it would be nice to actually experiment and see what happens...
</I>&gt;<i>
</I>&gt;<i> (Wonky quoting thanks to gmail's wonky web interface, sorry)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It wasn't too bad - certainly well-worth suffering through for your
</I>&gt;<i> contribution :).
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160816/5d15c2b8/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160816/5d15c2b8/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030730.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
	<LI>Next message: <A HREF="030737.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30735">[ date ]</a>
              <a href="thread.html#30735">[ thread ]</a>
              <a href="subject.html#30735">[ subject ]</a>
              <a href="author.html#30735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
