<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Waiting%20time%20for%20tests%20running%20on%20Travis%20CI%0A%09and%20Buildbot&In-Reply-To=%3CA0921386-5950-4D30-8C52-DA58BEC64AD1%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063190.html">
   <LINK REL="Next"  HREF="063196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Waiting%20time%20for%20tests%20running%20on%20Travis%20CI%0A%09and%20Buildbot&In-Reply-To=%3CA0921386-5950-4D30-8C52-DA58BEC64AD1%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Aug 15 17:03:12 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063190.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
        <LI>Next message (by thread): <A HREF="063196.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63191">[ date ]</a>
              <a href="thread.html#63191">[ thread ]</a>
              <a href="subject.html#63191">[ subject ]</a>
              <a href="author.html#63191">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Aug 15, 2016, at 2:11 PM, Jean-Paul Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On Mon, Aug 15, 2016 at 4:38 PM, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> There's a lot that we can do to make Travis almost that fast, with pre-built Docker images and cached dependencies.  We haven't done much in the way of aggressive optimization yet.  As recently discussed we're still doing twice as many builds as we need to just because we've misconfigured branch / push builds :).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hm... pre-built dockers also takes effort to keep them updated... and
</I>&gt;&gt;<i> then we will have a KVM VM starting inside a docker in which we run
</I>&gt;&gt;<i> the tests...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> ...and we would not be able to test the inotify part.
</I>&gt;<i> 
</I>&gt;<i> Not true:
</I>&gt;<i> 
</I>&gt;<i> We can have one non-containerized builder (sudo: true) for testing inotify; no need for KVM-in-Docker (also you can't do that without a privileged container, so, good thing)
</I>&gt;<i> I'm curious about the details of how such a configuration would work.  Since there is only one travis configuration per repository (well, per branch, technically, don't think that makes a difference here) and the sudo configuration is global (isn't it?), I always though either a project had to pick sudo or not sudo and you couldn't have a mix of builds with each.
</I>
I had just assumed that it would be per-matrix-entry, and while it looks like I'm correct, it's much less obvious than I had thought.  If you look at the second example code block under this heading:

<A HREF="https://docs.travis-ci.com/user/multi-os/#Example-Multi-OS-Build-Matrix">https://docs.travis-ci.com/user/multi-os/#Example-Multi-OS-Build-Matrix</A>

you'll see that one of the matrix/include entries has a 'sudo: required' tag, which means &quot;non-container-based&quot; please.  Presumably you can mix those.

The docs on &quot;migrating to the container-based infrastructure&quot; do make it sound like this is impossible though, and this isn't nearly as clear as I'd like, so it would be nice to actually experiment and see what happens...

&gt;<i> (Wonky quoting thanks to gmail's wonky web interface, sorry)
</I>
It wasn't too bad - certainly well-worth suffering through for your contribution :).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160815/3326994e/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063190.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
	<LI>Next message (by thread): <A HREF="063196.html">[Twisted-Python] Waiting time for tests running on Travis CI	and Buildbot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63191">[ date ]</a>
              <a href="thread.html#63191">[ thread ]</a>
              <a href="subject.html#63191">[ subject ]</a>
              <a href="author.html#63191">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
