<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2016.3.0%20Prerelease%202%20Announcement&In-Reply-To=%3CED8C29C3-D7A1-429A-AA06-081D031F917F%40lukasa.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030568.html">
   <LINK REL="Next"  HREF="030620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement</H1>
    <B>Cory Benfield</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2016.3.0%20Prerelease%202%20Announcement&In-Reply-To=%3CED8C29C3-D7A1-429A-AA06-081D031F917F%40lukasa.co.uk%3E"
       TITLE="[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement">cory at lukasa.co.uk
       </A><BR>
    <I>Wed Jul 13 04:39:27 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030568.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
        <LI>Next message: <A HREF="030620.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30569">[ date ]</a>
              <a href="thread.html#30569">[ thread ]</a>
              <a href="subject.html#30569">[ subject ]</a>
              <a href="author.html#30569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 13 Jul 2016, at 10:00, Pawe&#322; Miech &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pawelmhm at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Anyway, I&#8217;ll be spending my Twisted time on this for a while I suspect. This will delay HTTP/2 client support, unfortunately. =(
</I>&gt;<i> 
</I>&gt;<i> Isn't it better to get HTTP2 client support and just document things better for HTTP2? Or maybe even backport some features from CertificateOptions to factory? DefaultSSLContextFactory seems to work ok for cases outside HTTP2. It is not evidently broken. It is probably less secure than twisted.internet.ssl.CertificateOptions but is really broken beyond repair?
</I>
Generally speaking I&#8217;d say it isn&#8217;t better, for a couple of reasons.

Firstly, it rarely works well to document one&#8217;s way out of a usability problem. This is doubly-true when the *rest* of the documentation is contrary to what your new documentation would say. For example, the Twisted Web howto client documentation uses ClientContextFactory, which will be utterly unsuitable for HTTP/2.

More generally, having two different ways to do TLS, one of which is substantially less secure and powerful than the other, is a real problem. For example, DefaultSSLContextFactory literally only works for HTTP/2 servers by chance: it was never actually *designed* to work with ALPN and only managed to do so because we refactored the implementation to have the TLSMemoryBIOFactory apply the ALPN/NPN logic. In essence, by sheer bad luck we managed to change the HTTP/2 implementation to accidentally work with the old method, when it was never planned to do so.

Worse, though, is that while the ContextFactory isn&#8217;t that bad for servers, it&#8217;s *terrible* for clients. In particular, the ClientContextFactory does not use SNI, does not validate hostnames, and generally speaking does not produce secure TLS. That means I&#8217;d want to prevent the HTTP/2 client from using the ClientContextFactory *anyway*: it&#8217;s really genuinely terrible and needs to be burned with fire.

If you&#8217;re interested in speeding up the arrival of HTTP/2 client support, then, the best way to do that is to help out with the deprecation effort. I&#8217;ve got patches open for the majority of the docs problems, and will be starting to work on the code problems over the next few days. All of these patches will require review, and other people writing patches will also speed things up.

Basically, I&#8217;m disinclined to want to prolong the lifetime of something that was supposed to go away two years ago. Twisted has a lot of things in it that were *supposed* to be deprecated but were never *actually* deprecated, and that kind of soft deprecation ends up causing the kind of problem we&#8217;ve bumped into here, whereby a lot of people have code that &#8220;works&#8221; with current features, but new features are designed only with an eye to the best practice. On a personal level, I want to push for Twisted to *actually* deprecate things that are soft deprecated. That has the best long-term effect on the project, by reducing the amount of code that needs to be maintained and encouraging users to move towards features that function better.

Cory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160713/4e64882b/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160713/4e64882b/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160713/4e64882b/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160713/4e64882b/attachment.pgp</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030568.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
	<LI>Next message: <A HREF="030620.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30569">[ date ]</a>
              <a href="thread.html#30569">[ thread ]</a>
              <a href="subject.html#30569">[ subject ]</a>
              <a href="author.html#30569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
