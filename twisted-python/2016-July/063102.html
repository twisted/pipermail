<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Request for help with Twisted bindings in	M2Crypto
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request%20for%20help%20with%20Twisted%20bindings%20in%0A%09M2Crypto&In-Reply-To=%3C62C21C48-86AA-4270-A0BA-0BFC78275D09%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063100.html">
   <LINK REL="Next"  HREF="063106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Request for help with Twisted bindings in	M2Crypto</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request%20for%20help%20with%20Twisted%20bindings%20in%0A%09M2Crypto&In-Reply-To=%3C62C21C48-86AA-4270-A0BA-0BFC78275D09%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Request for help with Twisted bindings in	M2Crypto">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Jul 26 01:41:08 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063100.html">[Twisted-Python] Parameters of	twisted.internet.interfaces.ITLSTransport [Was: Re: Request	for help with Twisted bindings in M2Crypto]
</A></li>
        <LI>Next message (by thread): <A HREF="063106.html">[Twisted-Python] Request for help with Twisted bindings in	M2Crypto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63102">[ date ]</a>
              <a href="thread.html#63102">[ thread ]</a>
              <a href="subject.html#63102">[ subject ]</a>
              <a href="author.html#63102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Jul 25, 2016, at 02:03, MatÄ›j Cepl &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mcepl at cepl.eu</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 3) Moreover, I would like to know how much interest there is in
</I>&gt;<i> maintaining the M2Crypto module for Twisted. I got some hope from
</I>&gt;<i> <A HREF="http://twistedmatrix.com/trac/wiki/TransportLayerSecurity">http://twistedmatrix.com/trac/wiki/TransportLayerSecurity</A> &lt;<A HREF="http://twistedmatrix.com/trac/wiki/TransportLayerSecurity">http://twistedmatrix.com/trac/wiki/TransportLayerSecurity</A>&gt; which seems
</I>&gt;<i> like there is an interest in more complete OpenSSL bindings,
</I>
That is a very old wiki page.  I will delete it to avoid confusing people in the future!  Not only has pyOpenSSL had complete enough bindings to implement the feature described on that wiki page for several years now (a Twisted developer, Jean-Paul Calderone, actually took over maintenance of pyOpenSSL expressly for the purpose of adding those APIs), we actually implemented the TLS implementation based on those APIs &lt;<A HREF="https://github.com/twisted/twisted/blob/trunk/twisted/internet/_newtls.py">https://github.com/twisted/twisted/blob/trunk/twisted/internet/_newtls.py</A> &lt;<A HREF="https://github.com/twisted/twisted/blob/trunk/twisted/internet/_newtls.py">https://github.com/twisted/twisted/blob/trunk/twisted/internet/_newtls.py</A>&gt;&gt; in 2011, and fully finished transitioning to that new API in 2014 &lt;<A HREF="https://github.com/twisted/twisted/commit/ee2070fe9e3f539ff702d9ff133aafa33ea19ac5">https://github.com/twisted/twisted/commit/ee2070fe9e3f539ff702d9ff133aafa33ea19ac5</A>&gt; when we deleted the older, SSLSocket based API.

&gt;<i> but OTOH I see on the list that Twisted now seems to use more and more of
</I>&gt;<i> Cryptography (why in the world somebody made such confusing name of
</I>&gt;<i> their project ...).
</I>
The choice of name is intentional: it is designed to convey a sense of authoritativeness.  I.e. if you need cryptography in Python, you should 'import cryptography', and ignore everything else.  The Cryptography project specifically calls out M2Crypto, PyCrypto, and PyOpenSSL as having problems and lacking maintenance: &lt;<A HREF="https://cryptography.io/en/latest/#why-a-new-crypto-library-for-python">https://cryptography.io/en/latest/#why-a-new-crypto-library-for-python</A> &lt;<A HREF="https://cryptography.io/en/latest/#why-a-new-crypto-library-for-python">https://cryptography.io/en/latest/#why-a-new-crypto-library-for-python</A>&gt;&gt;.  pyOpenSSL is now just a thin wrapper over Cryptography itself, and PyCrypto's maintainer now generally suggests Cryptography &lt;<A HREF="https://github.com/dlitz/pycrypto/issues/158#issuecomment-140833926">https://github.com/dlitz/pycrypto/issues/158#issuecomment-140833926</A> &lt;<A HREF="https://github.com/dlitz/pycrypto/issues/158#issuecomment-140833926">https://github.com/dlitz/pycrypto/issues/158#issuecomment-140833926</A>&gt;&gt;.  So it is 2/3 of the way to achieving its goal of eliminating these libraries which duplicate so much effort - M2Crypto is all that remains :).

&gt;<i> Obviously the most simple way for me to be cutting
</I>&gt;<i> Twisted module from M2Crypto and let it be (although I am afraid I have
</I>&gt;<i> still some legacy users who would like to see it maintained, and given
</I>&gt;<i> that the legacy support is still the most important reason for
</I>&gt;<i> maintaining M2Crypto, I don't want to give up lightly).
</I>
I do not want to denigrate the work you've done maintaining a legacy library.  I think it's noble to take on this kind of work.  But if you don't have any particular reason for needing to maintain this library beyond &quot;legacy support&quot;, and it is not different from Cryptography in any meaningful way, the best thing that you could do for its existing users would be to do the same thing that was done with pyOpenSSL: make it a thin wrapper over the bindings layer in Cryptography, get rid of all of the SWIG code in M2Crypto, and start gently directing users in the direction of Cryptography for any new code.  This would get everyone onto a supported base platform for their security primitives, allow them to share code with other parts of large systems that already use Cryptography or pyOpenSSL, and provide a well-maintained path forward.

M2Crypto's main claim to superiority in past years was its higher degree of completeness of OpenSSL APIs, but Cryptography has since far surpassed it.  Even if there are some APIs that Cryptography's bindings layer doesn't export, it's easier and safer to add more bindings there than in M2Crypto.

Even if you're not going to get rid of M2Crypto entirely, M2Crypto's implementation of Twisted TLS copies the terrible no-security defaults it inherits from OpenSSL, the same ones that Twisted had 5 years ago, and Twisted has moved on to have actual security (certificate verification, service identity, and trust root configuration).  We also continue to improve that security regularly.  Given all that, this is a rare case where I would not mind seeing Twisted support disappear from a library.  Unless I were to get some new information I would have to very strongly discourage anyone who wanted to use the SSL backend in M2Crypto.  I realize you have users, but possibly the best thing you could do for their own good would be to force them to move to Twisted's much better native TLS support, which thankfully is easy to adopt at this point.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160726/303e9658/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063100.html">[Twisted-Python] Parameters of	twisted.internet.interfaces.ITLSTransport [Was: Re: Request	for help with Twisted bindings in M2Crypto]
</A></li>
	<LI>Next message (by thread): <A HREF="063106.html">[Twisted-Python] Request for help with Twisted bindings in	M2Crypto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63102">[ date ]</a>
              <a href="thread.html#63102">[ thread ]</a>
              <a href="subject.html#63102">[ subject ]</a>
              <a href="author.html#63102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
