<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] buildbot.twistedmatrix.com is down a lot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20buildbot.twistedmatrix.com%20is%20down%20a%20lot&In-Reply-To=%3CCAFycZ9fcvSEzZXfd-ezR7tADsYvViwQ%3D0DUnSR6qPMgx%3DDyMhg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063061.html">
   <LINK REL="Next"  HREF="063065.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] buildbot.twistedmatrix.com is down a lot</H1>
    <B>Adi Roiban</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20buildbot.twistedmatrix.com%20is%20down%20a%20lot&In-Reply-To=%3CCAFycZ9fcvSEzZXfd-ezR7tADsYvViwQ%3D0DUnSR6qPMgx%3DDyMhg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] buildbot.twistedmatrix.com is down a lot">adi at roiban.ro
       </A><BR>
    <I>Wed Jul 20 12:01:44 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063061.html">[Twisted-Python] buildbot.twistedmatrix.com is down a lot
</A></li>
        <LI>Next message (by thread): <A HREF="063065.html">[Twisted-Python] buildbot.twistedmatrix.com is down a lot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63062">[ date ]</a>
              <a href="thread.html#63062">[ thread ]</a>
              <a href="subject.html#63062">[ subject ]</a>
              <a href="author.html#63062">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20 July 2016 at 17:51, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Jul 20, 2016, at 6:31 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 18 July 2016 at 19:04, James Broadhead &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamesbroadhead at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 17 July 2016 at 07:21, Amber Brown &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hawkowl at atleastfornow.net</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It's OOMing  (...)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Have you considered something like monit[1] to detect &amp; restart in cases
</I>&gt;&gt;<i> like this?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> This might help, but will not help up understand what we are doing wrong :)
</I>&gt;<i>
</I>&gt;<i> After disabling the github webhooks, the buildbot look stable... so we
</I>&gt;<i> might have a clue about what goes wrong.
</I>&gt;<i>
</I>&gt;<i> Right now I don't have time to look into this issue, so github hooks are
</I>&gt;<i> disabled for now from the GitHub UI.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can someone who's had a direct look at the OOMing process (adi? amber?)
</I>&gt;<i> report this upstream?  It's a real pity that we won't get github statuses
</I>&gt;<i> for buildbot builds any more; that was a huge step in the right direction.
</I>&gt;<i>
</I>&gt;<i>
</I>I don't know how to grasp this.
By the time I was observing the issue, the buildbot process was already
dead.

I have recently discovered the Rackspace monitoring capabilities for VM...
and set up a memory notification... not sure who will receive the alerts.

I have re-enable to GitHub hooks and will start taking a closer look at the
buildmaster process.... but maybe 2GB is just not enough for a buildmaster.

I have triggered the creation of an image for the current buildbot machine
and will consider upgrading the buildbot to 4GB of memory to see if we
still hit the ceiling.

For my project I have a similar buildmaster based on number of builders and
slaves (without github hooks and without linter factories) and in 2 weeks
of uptime the virtual memory usage is 1.5GB
.... so mabybe 2GB is just not enough for buildbot.

-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160720/efb76a2a/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063061.html">[Twisted-Python] buildbot.twistedmatrix.com is down a lot
</A></li>
	<LI>Next message (by thread): <A HREF="063065.html">[Twisted-Python] buildbot.twistedmatrix.com is down a lot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63062">[ date ]</a>
              <a href="thread.html#63062">[ thread ]</a>
              <a href="subject.html#63062">[ subject ]</a>
              <a href="author.html#63062">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
