<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Request for help with Twisted bindings in	M2Crypto
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request%20for%20help%20with%20Twisted%20bindings%20in%0A%09M2Crypto&In-Reply-To=%3CCAKN9TD%2B_PCK7f90QPsVQp%2B8jy9HX3Q_TqarQKkmQHuuQ0LctFw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063093.html">
   <LINK REL="Next"  HREF="063095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Request for help with Twisted bindings in	M2Crypto</H1>
    <B>Daniel Sank</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request%20for%20help%20with%20Twisted%20bindings%20in%0A%09M2Crypto&In-Reply-To=%3CCAKN9TD%2B_PCK7f90QPsVQp%2B8jy9HX3Q_TqarQKkmQHuuQ0LctFw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Request for help with Twisted bindings in	M2Crypto">sank.daniel at gmail.com
       </A><BR>
    <I>Mon Jul 25 04:10:27 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063093.html">[Twisted-Python] Request for help with Twisted bindings in	M2Crypto
</A></li>
        <LI>Next message (by thread): <A HREF="063095.html">[Twisted-Python] Request for help with Twisted bindings in M2Crypto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63094">[ date ]</a>
              <a href="thread.html#63094">[ thread ]</a>
              <a href="subject.html#63094">[ subject ]</a>
              <a href="author.html#63094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I realize this is not the main point of this thread, but I'd like to make a
comment regarding Twisted being opaque.

&gt;<i> Twisted is open source, so none of the data types are opaque.
</I>
That's a non sequitur. A bunch of open source text in a language you don't
understand is opaque, or perhaps better called &quot;obscure&quot;. Among other
things, Twisted's use of interfaces makes the code very hard to understand.

&gt;<i> Twisted is probably the best open source project I have worked with
</I>&gt;<i> in terms of having documentation which is generated from the code
</I>
I agree that the documentation is generally excellent and that the tests
coverage is similarly excellent. However, I still find large fractions of
the code very hard to comprehend. A while ago I made a serious effort to
understand PB and fix some bugs, but the interface stuff combined with some
very odd contortions of python class innards eventually lead me to give up.
This is despite the friendly helpful attitude of the main developers both
here and in IRC (seriously, thanks everyone for your help back then!).

I just randomly clicked through the docs to this:
<A HREF="https://twistedmatrix.com/documents/current/api/twisted._threads.IWorker.html">https://twistedmatrix.com/documents/current/api/twisted._threads.IWorker.html</A>

Note that:

1. It is an interface, and I still don't _really_ understand what that
means in Twisted.

2. I have no idea what a &quot;task&quot; is. I realize this is python and yay
duck-typing but not specifying the expected behavior of an argument seems
like a big omission.

So, while the Twisted docs are great, consider not faulting people for
being confused/daunted.


On Mon, Jul 25, 2016 at 2:55 AM, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt;
wrote:

&gt;<i> On Mon, Jul 25, 2016 at 2:03 AM, MatÄ›j Cepl &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mcepl at cepl.eu</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2) Even more pressing is that the Twisted module breaks my tests when
</I>&gt;&gt;<i> porting to py3k (<A HREF="https://travis-ci.org/mcepl/M2Crypto/jobs/146633964">https://travis-ci.org/mcepl/M2Crypto/jobs/146633964</A>).
</I>&gt;&gt;<i> Given the opaque and complicated data types in Twisted, I see horribly
</I>&gt;&gt;<i> complicated task of diving into it in front of me and I am not eager.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I call shenanigans on you.
</I>&gt;<i>
</I>&gt;<i> Twisted is open source, so none of the data types are opaque.
</I>&gt;<i> Twisted is probably the best open source project I have worked with
</I>&gt;<i> in terms of having documentation which is generated from the code (
</I>&gt;<i> <A HREF="https://twistedmatrix.com/documents/current/api/">https://twistedmatrix.com/documents/current/api/</A> ).
</I>&gt;<i>
</I>&gt;<i> Twisted is also absolutely *the* best project I have worked with in terms
</I>&gt;<i> of having unit tests with very high coverage
</I>&gt;<i> of the code.
</I>&gt;<i>
</I>&gt;<i> If you are unfamiliar with Twisted's code and data types, and don't have
</I>&gt;<i> the energy to dig in,
</I>&gt;<i> then be honest about that, but don't accuse Twisted of being &quot;opaque&quot;,
</I>&gt;<i> because it isn't.
</I>&gt;<i>
</I>&gt;<i> Regarding your code example which is failing,
</I>&gt;<i> your code is failing because you are intermixing bytes and strings which
</I>&gt;<i> is a big no-no for Python 3.
</I>&gt;<i>
</I>&gt;<i> If I look at this line for example:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://gitlab.com/m2crypto/m2crypto/blob/master/M2Crypto/SSL/TwistedProtocolWrapper.py#L357">https://gitlab.com/m2crypto/m2crypto/blob/master/M2Crypto/SSL/TwistedProtocolWrapper.py#L357</A>
</I>&gt;<i>
</I>&gt;<i> I see the code is doing stuff like:
</I>&gt;<i>    data = ''
</I>&gt;<i>    encryptedData = ''
</I>&gt;<i>
</I>&gt;<i> Those are of type str, and need to be of type bytes:
</I>&gt;<i>
</I>&gt;<i>    data = b''
</I>&gt;<i>    encryptedData = b''
</I>&gt;<i>
</I>&gt;<i> You need to clean stuff like that up in your code so that you are only
</I>&gt;<i> using bytes.
</I>&gt;<i>
</I>&gt;<i> I've really learned this lesson very hard after contributing hundreds of
</I>&gt;<i> py3k fixes for Twisted:
</I>&gt;<i>
</I>&gt;<i>       Python 2:
</I>&gt;<i>               type(str) == type(bytes)
</I>&gt;<i>               type(str)  != type(unicode)
</I>&gt;<i>               b&quot;foo&quot; == &quot;foo&quot;
</I>&gt;<i>               &quot;foo&quot; != u&quot;foo&quot;
</I>&gt;<i>
</I>&gt;<i>       Python 3:
</I>&gt;<i>               type(str) != type(bytes)
</I>&gt;<i>               type(unicode) is Gone
</I>&gt;<i>               b&quot;foo&quot; != &quot;foo&quot;
</I>&gt;<i>               &quot;foo&quot; == u&quot;foo&quot;
</I>&gt;<i>
</I>&gt;<i> There is lots of code out there which uses Python strings and bytes
</I>&gt;<i> interchangeably
</I>&gt;<i> which &quot;works&quot; under Python2, but breaks big time on Python 3.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Craig
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Daniel Sank
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160725/5dfd61df/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063093.html">[Twisted-Python] Request for help with Twisted bindings in	M2Crypto
</A></li>
	<LI>Next message (by thread): <A HREF="063095.html">[Twisted-Python] Request for help with Twisted bindings in M2Crypto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63094">[ date ]</a>
              <a href="thread.html#63094">[ thread ]</a>
              <a href="subject.html#63094">[ subject ]</a>
              <a href="author.html#63094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
