<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted tests on public CI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20tests%20on%20public%20CI&In-Reply-To=%3CE31AEACE-2D7E-4C2C-A9A2-3E9C3E74DB61%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030609.html">
   <LINK REL="Next"  HREF="030610.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted tests on public CI</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20tests%20on%20public%20CI&In-Reply-To=%3CE31AEACE-2D7E-4C2C-A9A2-3E9C3E74DB61%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted tests on public CI">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Jul 20 17:18:37 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030609.html">[Twisted-Python] Twisted tests on public CI
</A></li>
        <LI>Next message: <A HREF="030610.html">[Twisted-Python] Windows buildbots and Appveyor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30611">[ date ]</a>
              <a href="thread.html#30611">[ thread ]</a>
              <a href="subject.html#30611">[ subject ]</a>
              <a href="author.html#30611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Jul 20, 2016, at 3:18 PM, Adi Roiban &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 20 July 2016 at 22:36, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Jul 20, 2016, at 11:59 AM, Adi Roiban &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A> &lt;mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> We now have Ubuntu / Windows Server and OS X running Twisted tests for each PR, using Travis-CI and Appveyor
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Non-`Twisted GitHub Team` members can now run a pretty extensive test suite for commits associated with a PR. 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The coverage report is 90.52% (+/- 0.01%) just by running tests on the public CI.
</I>&gt;&gt;<i> As far as I can tell this is better than what we get with Buildbot builders (since we no longer have BSD slaves and Win7 coverage reporter is broken and Win2012 slave was removed)
</I>&gt;<i> 
</I>&gt;<i> It seems like the only thing that Buildbot is now covering which this setup is not is alternate kernels, which have not diverged in behavior from Twisted's perspective for 7 or 8 years.  I am starting to wonder if we could get rid of the entire current buildbot environment with all its complicated trust issues and just start over with the parts that we actually want: on-demand, latent FreeBSD and Windows builders, for example.  This is a tricky problem, but if it's the *only* thing we're trying to get buildbot to do it's a lot simpler to start there.
</I>&gt;<i> 
</I>&gt;<i> Someone please correct me if I'm wrong though ;).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> +1 to Amber's remark ... different distro have different OpenSSL
</I>&gt;<i>  
</I>&gt;<i> I don't know which OpenSSL versions are supported by latest Twisted.
</I>&gt;<i> 
</I>&gt;<i> For the kernel, I don't think that there are big differences.... so maybe we can have docker based latent slaves to run all these distros and destroy them after each run.
</I>&gt;<i> 
</I>&gt;<i> The docker slaves should keep the Rackspace invoice under control.
</I>
This is exactly where I was going, with one important caveat - Travis-CI supports running arbitrary docker images: &lt;<A HREF="https://docs.travis-ci.com/user/docker/">https://docs.travis-ci.com/user/docker/</A>&gt; so we do not need buildbot for this :-).

&gt;<i> api-documentation is still executed on Buildbot ... but there is a ticket in the review queue to move it to Travis-CI
</I>&gt;<i> <A HREF="https://twistedmatrix.com/trac/ticket/8518">https://twistedmatrix.com/trac/ticket/8518</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/8518">https://twistedmatrix.com/trac/ticket/8518</A>&gt;
</I>Cool; that one seems pretty straightforward to move.

&gt;&gt;<i> Some tests on Appveyor are still failing. Help here is much appreciated.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> We also got some tests failing on OS X but Amber has already started working to fix them <A HREF="https://twistedmatrix.com/trac/ticket/8639">https://twistedmatrix.com/trac/ticket/8639</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/8639">https://twistedmatrix.com/trac/ticket/8639</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> OS X tests results will not block for now a merge, but you will have to wait for the OS X results. In this way we can see how much longer does a test run takes, now that we also have OS X.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Appveyor was pretty fast in the last days... after the move to Rackspace.
</I>&gt;<i> 
</I>&gt;<i> I'm a little confused - does Appveyor run on Rackspace now, or do we run some component of Appveyor on Twisted's Rackspace account?
</I>&gt;<i> 
</I>&gt;<i> I have received a message from AppVeyor saying that they have moved the open source projects to Rackspace ... and after that the time a build was waiting in the queue is much shorter
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://www.appveyor.com/blog/2016/07/16/migration-to-rackspace">https://www.appveyor.com/blog/2016/07/16/migration-to-rackspace</A> &lt;<A HREF="https://www.appveyor.com/blog/2016/07/16/migration-to-rackspace">https://www.appveyor.com/blog/2016/07/16/migration-to-rackspace</A>&gt;
</I>
Woot!  Go team Rackspace!  Thanks for that link.

&gt;&gt;<i> Travis-CI was a bit slow on the free queue... not sure how fast is the payed queue :)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Please report any issues here or on Twisted Infrastructure tracker <A HREF="https://github.com/twisted-infra/braid/issues">https://github.com/twisted-infra/braid/issues</A> &lt;<A HREF="https://github.com/twisted-infra/braid/issues">https://github.com/twisted-infra/braid/issues</A>&gt;
</I>&gt;<i> Thanks *again* for the sustained effort on improving the CI situation, Adi.  It seems like we're not quite there yet, but things are really starting to come together.
</I>&gt;<i> 
</I>&gt;<i> I would consider the Travis-CI / AppVeyor integrations still experimental. 
</I>&gt;<i> 
</I>&gt;<i> I am happy that we are moving to a command line driven CI design as it should make it easier to move between CI systems.
</I>
The one thing I wish we could do is extract our build information in some structured format we could actually parse, to make moving between CI executors even easier... but that's probably a few years out at least :).

&gt;<i> This can also help if we want to get latent buildslave as by that time we  get the latent slaves we should be familiar with running tests in a disposable VM/container.
</I>
Latent builders would certainly improve our ability to use buildbot considerably.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160720/b715c7e1/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160720/b715c7e1/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030609.html">[Twisted-Python] Twisted tests on public CI
</A></li>
	<LI>Next message: <A HREF="030610.html">[Twisted-Python] Windows buildbots and Appveyor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30611">[ date ]</a>
              <a href="thread.html#30611">[ thread ]</a>
              <a href="subject.html#30611">[ subject ]</a>
              <a href="author.html#30611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
