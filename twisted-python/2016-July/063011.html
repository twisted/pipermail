<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2016.3.0%20Prerelease%202%20Announcement&In-Reply-To=%3C21DE9FE1-4A6F-421B-941F-4C38C3B00015%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063010.html">
   <LINK REL="Next"  HREF="063012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2016.3.0%20Prerelease%202%20Announcement&In-Reply-To=%3C21DE9FE1-4A6F-421B-941F-4C38C3B00015%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Jul 11 13:22:45 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063010.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
        <LI>Next message (by thread): <A HREF="063012.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63011">[ date ]</a>
              <a href="thread.html#63011">[ thread ]</a>
              <a href="subject.html#63011">[ subject ]</a>
              <a href="author.html#63011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Jul 11, 2016, at 3:35 AM, Cory Benfield &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cory at lukasa.co.uk</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cory at lukasa.co.uk</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 11 Jul 2016, at 01:45, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Jul 9, 2016, at 10:30 AM, Paweł Miech &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pawelmhm at gmail.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pawelmhm at gmail.com</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> My question is: should user deal with this kind of stuff themselves? If some ciphers are blacklisted in HTTP2 shouldn't this be handled somewhere in Twisted?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> As others have already said, this should work out of the box, and I'm not sure why it isn't for you, especially that you've gone to the extra trouble of building a Docker image and retrieving recent enough versions of every relevant layer of the stack.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> However, to answer this question generally: this should absolutely be handled by Twisted.  In fact, even if we're doing the right thing already except in your one configuration, we should go a step beyond and provide tooling and logging to clearly explain to system operators why they won't get HTTP/2 if their dependencies are out of date.
</I>&gt;<i> 
</I>&gt;<i> This turns out to be trickier than you’d expect.
</I>&gt;<i> 
</I>&gt;<i> PyOpenSSL does not expose any of the APIs for us to programmatically detect what ciphers are available to the OpenSSL we have installed. Cryptography exposes only one: SSL_get_ciphers. This is not really the one we want, because it lists all *possible* ciphers, rather than the ones that are actually enabled for a given connection. This makes it very difficult for us to conclude that we’d want to use HTTP/2 but we cannot because of a lack of cipher support.
</I>
So pyOpenSSL/Cryptography doesn't have SSL_get_current_cipher anywhere?

&gt;<i> Now, Twisted *could* add code to introspect the HTTP/2 TLS configuration and optionally terminate the connection in the same manner that Chrome does. Currently I’ve not done that because it’s not been hugely needed, but we could do that. The reality is, though, that Twisted can’t unconditionally not use those ciphers because it needs to support HTTP/1.1 as well as HTTP/2, and HTTP/1.1 does not have those same restrictions.
</I>
The main interest I think we have is to placate Chrome, to ensure it can speak HTTP/2 if it's possible, and to explain why it's not possible, if it's not.

&gt;<i> What would be looking for here? Out of the box, Twisted should do the very best it can, but right now it seems like the only thing we could do is detect when HTTP/2 is literally impossible to support (e.g. when there is no TLS 1.2 support). With that said, those versions *completely* overlap with the versions where OpenSSL doesn’t support ALPN.
</I>
In the same way that we complain about service_identity perhaps we should complain about OpenSSL?

&gt;<i> Regardless, Twisted’s default cipher ordering is appropriate for HTTP/2 (it prefers ECDHE AES GCM, which is what is required). So I’m not sure what more we could do.
</I>
Yeah, I'm curious why the OP was having this problem.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160711/0244f07d/attachment-0002.html&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3707 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20160711/0244f07d/attachment-0002.bin&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063010.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
	<LI>Next message (by thread): <A HREF="063012.html">[Twisted-Python] Twisted 16.3.0 Prerelease 2 Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63011">[ date ]</a>
              <a href="thread.html#63011">[ thread ]</a>
              <a href="subject.html#63011">[ subject ]</a>
              <a href="author.html#63011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
