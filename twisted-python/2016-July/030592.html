<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IProtocolWithReactor%2C%0A%09or%20passing%20the%20reactor%20though%20to%20protocols&In-Reply-To=%3C4E29E141-F1DF-4CD9-AA25-82AFE56AB890%40atleastfornow.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030590.html">
   <LINK REL="Next"  HREF="030594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols</H1>
    <B>Amber &quot;Hawkie&quot; Brown</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IProtocolWithReactor%2C%0A%09or%20passing%20the%20reactor%20though%20to%20protocols&In-Reply-To=%3C4E29E141-F1DF-4CD9-AA25-82AFE56AB890%40atleastfornow.net%3E"
       TITLE="[Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols">hawkowl at atleastfornow.net
       </A><BR>
    <I>Mon Jul 18 01:53:59 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030590.html">[Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols
</A></li>
        <LI>Next message: <A HREF="030594.html">[Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30592">[ date ]</a>
              <a href="thread.html#30592">[ thread ]</a>
              <a href="subject.html#30592">[ subject ]</a>
              <a href="author.html#30592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 18 Jul 2016, at 09:15, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On Jul 16, 2016, at 06:01, Amber Hawkie Brown &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hawkowl at atleastfornow.net</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Yes, that ticket is almost what I want! That is a much better solution for Protocols.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> However, Factories still need the reactor given, and it seems really silly and very hard to explain why you both would need to create a Factory with a reference to a reactor, and then call reactor.listenTCP/endpoint.connect/listen, also with a reactor. I feel like one of these should really be able to tell the other.
</I>&gt;<i> 
</I>&gt;<i> Which factories need this reference given?  Some need a clock, for e.g. timeouts, but then... that's OK, give them a clock.  The fact that a parameter must sometimes be passed to two different places doesn't mean we shouldn't make it a parameter...
</I>
Yes, but it's a very big footgun. If we are using a custom reactor, we must pass it at every level of the stack, when the information can easily be got from other sources.

&gt;<i> Possibly the problem here is that 'doStart' and 'doStop' ought to receive the reactor passed to them as well.  And maybe something else, too, for that matter, like an address, or an endpoint - that interface has always been a bit annoyingly narrow.  But a concrete use-case would help here.
</I>
My use case is making it easier to write things that require the reactor not having to be given absolutely everywhere -- it's very very inpenetrable to look at every interface and see if it has a reactor parameter.

&gt;<i> 
</I>&gt;&gt;<i> This also doesn't fit the problem idnar raised on IRC -- that the reactor serving the connections may not be the one that the protocol wants to use, for whatever reason (gui reactor and a not gui reactor?)
</I>&gt;<i> 
</I>&gt;<i> This use-case doesn't make any sense, because if you want to have a GUI you need to use a GUI reactor for everything; the reference passed is the running reactor.
</I>&gt;<i> 
</I>
Different reactors in threads (e.g. gilectomy, STM).

&gt;&gt;<i> -- I can't say if #3205 has the same problems, but I believe it does. I guess then that's up to the protocol, but I kind of would like if all protocols had one consistent place for &quot;this is the reactor I should schedule things on&quot; -- and transport.reactor does not seem to be it, because that's still got the problem that idnar has raised.
</I>&gt;<i> 
</I>&gt;<i> Where did idnar raise this problem?  I am still not clear on exactly what we're talking about.
</I>
IRC, like I mentioned :)

&gt;<i> 
</I>&gt;<i> -glyph
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160718/67809a07/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160718/67809a07/attachment.pgp</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030590.html">[Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols
</A></li>
	<LI>Next message: <A HREF="030594.html">[Twisted-Python] IProtocolWithReactor,	or passing the reactor though to protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30592">[ date ]</a>
              <a href="thread.html#30592">[ thread ]</a>
              <a href="subject.html#30592">[ subject ]</a>
              <a href="author.html#30592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
