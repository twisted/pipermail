<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Getting a list of services and/or plugins are	currently running
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Getting%20a%20list%20of%20services%20and/or%20plugins%20are%0A%09currently%20running&In-Reply-To=%3C735A35E9-16BA-4C24-852C-47A16CA8EF74%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055539.html">
   <LINK REL="Next"  HREF="055541.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Getting a list of services and/or plugins are	currently running</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Getting%20a%20list%20of%20services%20and/or%20plugins%20are%0A%09currently%20running&In-Reply-To=%3C735A35E9-16BA-4C24-852C-47A16CA8EF74%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Getting a list of services and/or plugins are	currently running">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Oct 18 13:51:18 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055539.html">[Twisted-Python] Getting a list of services and/or plugins	are	currently running
</A></li>
        <LI>Next message (by thread): <A HREF="055541.html">[Twisted-Python] Getting a list of services and/or plugins	are currently running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55540">[ date ]</a>
              <a href="thread.html#55540">[ thread ]</a>
              <a href="subject.html#55540">[ subject ]</a>
              <a href="author.html#55540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 18, 2010, at 3:10 PM, Elizabeth Liao wrote:

&gt;<i> Sorry about that.  I just started using twisted so I'll try to be more specific.
</I>&gt;<i> 
</I>&gt;<i> We have 2 different twisted plugins that uses shared code.   Each of these plugins is run as a  TCPClient on separate machines.
</I>&gt;<i> 
</I>&gt;<i> What would like to do is to somehow identify what twisted services/plugins are running because different things happen depending on what plugin is currently in use.  We are running on Linux wanted to see if there was an easy way of doing that using the twisted libraries.  I suppose one solution is to get a list of processes running and parse that but I would rather not do that.
</I>&gt;<i> 
</I>&gt;<i> Thanks.
</I>&gt;<i> 
</I>&gt;<i> Liz
</I>
Sorry, but there is no easy API to do this using Twisted.  It's not really clear to me how such an API could be meaningful, either, given that any Twisted plugin could easily invoke any arbitrary python code that it wants to, including other Twisted plugins.  But if you have a detailed specification for how it might work, please feel free to file a ticket.

One way you could deal with this would be to have a dedicated UNIX socket at a well-known path for your particular application (e.g. /tmp/.your-app/global-socket), and connect to that socket to identify the current system's role.  This requires a little more work, but has the advantage that if you go with an extensible protocol such as AMP, you can extend this communication mechanism to allow arbitrarily detailed interrogation depending on your needs in the future.

If you wanted to go with the 'listing processes' route (it is definitely simpler), you don't have to parse it yourself.  Something like this with the 'psi' module (&lt;<A HREF="http://pypi.python.org/pypi/PSI">http://pypi.python.org/pypi/PSI</A>&gt;) might do what you want:

&gt;&gt;&gt;<i> from psi.process import ProcessTable
</I>&gt;&gt;&gt;<i> pt = ProcessTable()
</I>&gt;&gt;&gt;<i> for p in pt.values():
</I>...   if 'twistd your-app' in p.command:
...     print p.pid


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20101018/b341ebca/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055539.html">[Twisted-Python] Getting a list of services and/or plugins	are	currently running
</A></li>
	<LI>Next message (by thread): <A HREF="055541.html">[Twisted-Python] Getting a list of services and/or plugins	are currently running
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55540">[ date ]</a>
              <a href="thread.html#55540">[ thread ]</a>
              <a href="subject.html#55540">[ subject ]</a>
              <a href="author.html#55540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
