<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] patch for TLS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20patch%20for%20TLS&In-Reply-To=%3C078A2F8A-ADCD-4C00-AA47-A1B11713F67F%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055481.html">
   <LINK REL="Next"  HREF="055482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] patch for TLS</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20patch%20for%20TLS&In-Reply-To=%3C078A2F8A-ADCD-4C00-AA47-A1B11713F67F%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] patch for TLS">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Oct  7 21:39:58 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055481.html">[Twisted-Python] patch for TLS
</A></li>
        <LI>Next message (by thread): <A HREF="055482.html">[Twisted-Python] recommended starting point for http	debugging/logging proxy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55483">[ date ]</a>
              <a href="thread.html#55483">[ thread ]</a>
              <a href="subject.html#55483">[ subject ]</a>
              <a href="author.html#55483">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 7, 2010, at 2:53 PM, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jason-sage at creativetrax.com</A> wrote:

&gt;<i> (cc to both twisted and sage-devel lists)
</I>&gt;<i> 
</I>&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> In the Sage project (<A HREF="http://sagemath.org">http://sagemath.org</A>), we apply a patch to the 
</I>&gt;<i> Twisted version we distribute.  I'd like to clean out our custom patches 
</I>&gt;<i> and push them upstream, if possible.  So I have a couple of questions 
</I>&gt;<i> (I'm not terribly familiar with Twisted):
</I>&gt;<i> 
</I>&gt;<i> 1. Is the patch below generally useful?
</I>
Not really.

It's not really clear what the intent of the patch is.  Your subject line implies that you don't quite understand the relationship between &quot;SSL&quot; and &quot;TLS&quot;.  If you do, then you can disregard the following paragraph, but this may be useful to others following this thread even if you understand the distinction perfectly well already :).

SSL and TLS are different names for the same protocol, with subtly different implications.  &quot;TLS&quot; formally names a later version.  The fact that &quot;OpenSSL&quot; has &quot;SSL&quot; in its name and &quot;GnuTLS&quot; has &quot;TLS&quot; in the name is simply reflective of the fact that OpenSSL has been around for longer, and was created when &quot;SSL&quot; was still the name of the protocol.  See &lt;<A HREF="http://www.ietf.org/rfc/rfc2246.txt">http://www.ietf.org/rfc/rfc2246.txt</A>&gt;, section 3: &quot;This document and the TLS protocol itself are based on the SSL 3.0 Protocol Specification as published by Netscape.&quot;  &quot;TLS&quot; is sometimes informally used to mean &quot;start TLS after some plaintext communication&quot; as opposed to &quot;initiate TLS at the start of the connection&quot;, since &quot;STARTTLS&quot; is usually the name of the protocol command to initiate encryption over a previously-plaintext connection.  This is why Twisted has 'connectSSL' and 'listenSSL', but 'startTLS' method on a transport.

If all Sage wants is to use the later version of the protocol, the technique that Itamar suggested is the right way to go; just specify the 'method' argument in your strports description, and Twisted (via OpenSSL) will already do what you want.

Whereas if you actually want GnuTLS the library, rather than TLS the protocol...

&gt;<i> 2. Is there a better way to do this than to patch the file?
</I>
Yes.  As suggested on &lt;<A HREF="http://twistedmatrix.com/trac/ticket/4473">http://twistedmatrix.com/trac/ticket/4473</A>&gt;, there should be an extension mechanism for registering new endpoint types with a string name, just as there is a mechanism for registering new reactors and new credential factories.  #4473 itself has been repurposed to be the endpoint API rather than the plugin mechanism, so I need to file a new ticket once #4473 is done for the separate extensibility bit.  You could contribute a fix to that new ticket, or a review for it, if you were so inclined :).

&gt;<i> 3. What do we need to do to incorporate it upstream in Twisted?
</I>
Follow the instructions on &lt;<A HREF="http://twistedmatrix.com/trac/wiki/TwistedDevelopment">http://twistedmatrix.com/trac/wiki/TwistedDevelopment</A>&gt;.

I can tell you right now that we're unlikely to support GnuTLS directly within Twisted (it's been discussed in the past and we didn't see a good reason to do it), but then, even if we were, the extension mechanism would be a probable prerequisite so that we could have a cleaner internal factoring of strports parsing mechanisms.  The current mechanism (even in #4473) is not really scalable.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20101007/abf9fe44/attachment-0001.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055481.html">[Twisted-Python] patch for TLS
</A></li>
	<LI>Next message (by thread): <A HREF="055482.html">[Twisted-Python] recommended starting point for http	debugging/logging proxy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55483">[ date ]</a>
              <a href="thread.html#55483">[ thread ]</a>
              <a href="subject.html#55483">[ subject ]</a>
              <a href="author.html#55483">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
