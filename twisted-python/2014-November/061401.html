<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I debug this network problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1415889630.2363825.190570125.246E3B12%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061400.html">
   <LINK REL="Next"  HREF="061403.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I debug this network problem?</H1>
    <B>Peter Westlake</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1415889630.2363825.190570125.246E3B12%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] How do I debug this network problem?">peter.westlake at pobox.com
       </A><BR>
    <I>Thu Nov 13 07:40:30 MST 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061400.html">[Twisted-Python] How do I debug this network problem?
</A></li>
        <LI>Next message (by thread): <A HREF="061403.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61401">[ date ]</a>
              <a href="thread.html#61401">[ thread ]</a>
              <a href="subject.html#61401">[ subject ]</a>
              <a href="author.html#61401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Thu, 13 Nov 2014, at 13:17, Glyph wrote:
&gt;<i>
</I>&gt;&gt;<i> On Nov 13, 2014, at 1:15 PM, Peter Westlake
</I>&gt;&gt;<i> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">peter.westlake at pobox.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've had a look at the code, and got rather lost amongst the
</I>&gt;&gt;<i> interfaces and inheritance and protocols and transports. If someone
</I>&gt;&gt;<i> can help me narrow down the relevant bits of code, I can put in some
</I>&gt;&gt;<i> Python tracing.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I could describe all the interfaces and inheritance and protocols and
</I>&gt;<i> transports, but since you don't want to puzzle out all that code,
</I>&gt;<i> presumably such a description would be overly complex :).
</I>&gt;<i>
</I>&gt;<i> A good place to start would be to figure out if the data is getting to
</I>&gt;<i> Twisted at all, which means instrumenting your Protocol.
</I>&gt;<i>
</I>&gt;<i> If you've done the default thing, and just done class Something(AMP):,
</I>&gt;<i> this means you should override dataReceived, like so:
</I>&gt;<i>
</I>&gt;&gt;<i> *from* *__future__* *import* print_function
</I>&gt;&gt;<i> *from**twisted.protocols.amp**import* AMP *class**MyAMP*(AMP,
</I>&gt;&gt;<i> object): *def* dataReceived(self, data): *print*(&quot;Got some data&quot;,
</I>&gt;&gt;<i> repr(data)) *return* super(MyAMP, self).dataReceived(data)
</I>&gt;<i>
</I>&gt;<i> If you're not seeing anything, that will give you an idea of whether
</I>&gt;<i> your kernel is not actually delivering that data to Twisted.
</I>&gt;<i>
</I>&gt;<i> There are, of course, a plethora of other things that could be going
</I>&gt;<i> wrong - maybe your Twisted program is stuck in some blocking function
</I>&gt;<i> elsewhere and the reactor loop isn't running at all, maybe you're
</I>&gt;<i> using some policy wrapper which is buffering incorrectly... but that's
</I>&gt;<i> a good sanity check to start with.
</I>&gt;<i>
</I>
I'm certainly not averse to understanding the code, and if you had time
to describe it, that would be very kind, thank you!

I've put in the dataReceived, and the answer box does *not* make it into
the Protocol. There are two entries in protocol._outstandingRequests:
{'2189': &lt;Deferred...&gt;, '2188': &lt;Deferred...&gt;} and the log output shows
2186, 2187, 218a, 218b, ...

Peter.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20141113/01fd6de4/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061400.html">[Twisted-Python] How do I debug this network problem?
</A></li>
	<LI>Next message (by thread): <A HREF="061403.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61401">[ date ]</a>
              <a href="thread.html#61401">[ thread ]</a>
              <a href="subject.html#61401">[ subject ]</a>
              <a href="author.html#61401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
