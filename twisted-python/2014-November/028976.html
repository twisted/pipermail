<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I debug this network problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C20141118010910.27773.128714459.divmod.xquotient.34%40top%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028975.html">
   <LINK REL="Next"  HREF="028977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I debug this network problem?</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C20141118010910.27773.128714459.divmod.xquotient.34%40top%3E"
       TITLE="[Twisted-Python] How do I debug this network problem?">exarkun at twistedmatrix.com
       </A><BR>
    <I>Mon Nov 17 18:09:10 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028975.html">[Twisted-Python] How do I debug this network problem?
</A></li>
        <LI>Next message: <A HREF="028977.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28976">[ date ]</a>
              <a href="thread.html#28976">[ thread ]</a>
              <a href="subject.html#28976">[ subject ]</a>
              <a href="author.html#28976">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12:42 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">peter.westlake at pobox.com</A> wrote:
&gt;<i>
</I>&gt;<i>On Mon, 17 Nov 2014, at 20:25, Glyph wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>On Nov 17, 2014, at 19:32, Peter Westlake
</I>&gt;&gt;&gt;<i>&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">peter.westlake at pobox.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>It's a known bug in Python!<A HREF="http://bugs.python.org/issue1038591,">http://bugs.python.org/issue1038591,</A>
</I>&gt;&gt;&gt;<i>&quot;Python 2.3+ socket._fileobject handles EAGAIN with data loss&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This bug is in socket.makefile(), which Twisted never uses - not
</I>&gt;&gt;<i>socket.socket().
</I>&gt;<i>
</I>&gt;<i>Okay, how about <A HREF="http://bugs.python.org/issue9090,">http://bugs.python.org/issue9090,</A> &quot;Issue #9090 : Error
</I>&gt;<i>code 10035 calling socket.recv() on a socket with a timeout
</I>&gt;<i>(WSAEWOULDBLOCK - A non-blocking socket operation could not be 
</I>&gt;<i>completed
</I>&gt;<i>immediately)&quot;?
</I>
Twisted also doesn't use sockets with timeouts - although the way socket 
timeouts are implemented in Python, I could perhaps imagine some timeout 
configuration leaking into Twisted's sockets due to some other code 
running in the same process.

Can you check to see if your AMP connection's underlying socket has a 
timeout set?  It *shouldn't*.  Twisted doesn't set one.  If some other 
code is causing a timeout to be set, I guess this could be the culprit.

Jean-Paul
&gt;<i>I actually found that one first, but it appeared to be Windows-only.
</I>&gt;<i>Further down the comments it becomes clear that it's not, and the patch
</I>&gt;<i>at <A HREF="https://hg.python.org/cpython/rev/8ec39bfd1f01">https://hg.python.org/cpython/rev/8ec39bfd1f01</A> confirms that.
</I>&gt;<i>
</I>&gt;<i>It would be good news if it was 9090, because it's easier to switch to
</I>&gt;<i>Python 2.7.8 than 3.
</I>&gt;<i>
</I>&gt;<i>Peter.
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028975.html">[Twisted-Python] How do I debug this network problem?
</A></li>
	<LI>Next message: <A HREF="028977.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28976">[ date ]</a>
              <a href="thread.html#28976">[ thread ]</a>
              <a href="subject.html#28976">[ subject ]</a>
              <a href="author.html#28976">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
