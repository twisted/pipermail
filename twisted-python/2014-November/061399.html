<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I debug this network problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1415880928.2337535.190520061.270A9576%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I debug this network problem?</H1>
    <B>Peter Westlake</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1415880928.2337535.190520061.270A9576%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] How do I debug this network problem?">peter.westlake at pobox.com
       </A><BR>
    <I>Thu Nov 13 05:15:28 MST 2014</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61399">[ date ]</a>
              <a href="thread.html#61399">[ thread ]</a>
              <a href="subject.html#61399">[ subject ]</a>
              <a href="author.html#61399">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>TL;DR - how do I debug the sequence of events between an AMP answer box
arriving at a NIC, and AMP firing the callRemote Deferred?

I have an application with two processes, on separate machines,
communicating using AMP. One process does a callRemote, which returns a
Deferred, which is never fired. I know from tcpdump that the AMP answer
box arrives safely at the network interface card.

This isn't something which can easily be reproduced. Instead, I want to
ask the specific question: how do I debug the data path from the NIC to
AMP firing its Deferred?

I've had a look at the code, and got rather lost amongst the interfaces
and inheritance and protocols and transports. If someone can help me
narrow down the relevant bits of code, I can put in some Python tracing.

FWIW, this is happening on Debian Squeeze and Wheezy, on VMs hosted on
Xen 6.5. It only happens on some specific machines, and only sometimes.
The same code has run flawlessly for many years elsewhere, though this
same bug did happen there too some years ago. That time, it went away
after most of the software in the system was upgraded. I tried that this
time - Debian Squeeze to Wheezy, with associated kernel, Python and
Twisted versions - but the problem persists. Anyway, I don't want to
make the problem go away without understanding it, for fear that it will
come back a third time.

Peter.


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61399">[ date ]</a>
              <a href="thread.html#61399">[ thread ]</a>
              <a href="subject.html#61399">[ subject ]</a>
              <a href="author.html#61399">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
