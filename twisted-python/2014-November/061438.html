<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I debug this network problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1416315146.336523.192384153.1DD2B929%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061437.html">
   <LINK REL="Next"  HREF="061440.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I debug this network problem?</H1>
    <B>Peter Westlake</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1416315146.336523.192384153.1DD2B929%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] How do I debug this network problem?">peter.westlake at pobox.com
       </A><BR>
    <I>Tue Nov 18 05:52:26 MST 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061437.html">[Twisted-Python] How do I debug this network problem?
</A></li>
        <LI>Next message (by thread): <A HREF="061440.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61438">[ date ]</a>
              <a href="thread.html#61438">[ thread ]</a>
              <a href="subject.html#61438">[ subject ]</a>
              <a href="author.html#61438">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 18 Nov 2014, at 01:09, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
&gt;<i> On 12:42 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">peter.westlake at pobox.com</A> wrote:
</I>
&gt;<i> &gt;Okay, how about <A HREF="http://bugs.python.org/issue9090,">http://bugs.python.org/issue9090,</A> &quot;Issue #9090 : Error
</I>&gt;<i> &gt;code 10035 calling socket.recv() on a socket with a timeout
</I>&gt;<i> &gt;(WSAEWOULDBLOCK - A non-blocking socket operation could not be 
</I>&gt;<i> &gt;completed
</I>&gt;<i> &gt;immediately)&quot;?
</I>&gt;<i> 
</I>&gt;<i> Twisted also doesn't use sockets with timeouts - although the way socket 
</I>&gt;<i> timeouts are implemented in Python, I could perhaps imagine some timeout 
</I>&gt;<i> configuration leaking into Twisted's sockets due to some other code 
</I>&gt;<i> running in the same process.
</I>&gt;<i> 
</I>&gt;<i> Can you check to see if your AMP connection's underlying socket has a 
</I>&gt;<i> timeout set?  It *shouldn't*.  Twisted doesn't set one.  If some other 
</I>&gt;<i> code is causing a timeout to be set, I guess this could be the culprit.
</I>
socket.gettimeout() returns 0.0, which just means non-blocking, right?

Given that strace shows a recvfrom failing with an EAGAIN, followed by
a recvfrom reading the AMP reply after the missing one, I think this
must
be a kernel or hypervisor bug. In hindsight it could never have been
1038591
even if Twisted had used that bit of code, because that reads the data
in and
then loses it. So strace would have shown it being read.

I'll get some help from my local TCP experts, and let you know if I find
anything
out. In the meantime, thank you all for your patience and help.

Peter.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061437.html">[Twisted-Python] How do I debug this network problem?
</A></li>
	<LI>Next message (by thread): <A HREF="061440.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61438">[ date ]</a>
              <a href="thread.html#61438">[ thread ]</a>
              <a href="subject.html#61438">[ subject ]</a>
              <a href="author.html#61438">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
