<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I debug this network problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C83FBB24F-BBF4-4D94-9E16-B719BCEE792C%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028940.html">
   <LINK REL="Next"  HREF="028944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I debug this network problem?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C83FBB24F-BBF4-4D94-9E16-B719BCEE792C%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] How do I debug this network problem?">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Nov 13 09:23:15 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028940.html">[Twisted-Python] How do I debug this network problem?
</A></li>
        <LI>Next message: <A HREF="028944.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28942">[ date ]</a>
              <a href="thread.html#28942">[ thread ]</a>
              <a href="subject.html#28942">[ subject ]</a>
              <a href="author.html#28942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Nov 13, 2014, at 3:40 PM, Peter Westlake &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">peter.westlake at pobox.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I'm certainly not averse to understanding the code, and if you had time to describe it, that would be very kind, thank you!
</I>
Well if it's not even hitting dataReceived then a more subtle exploration is not necessary! ;-)

&gt;<i> I've put in the dataReceived, and the answer box does not make it into the Protocol. There are two entries in protocol._outstandingRequests: {'2189': &lt;Deferred...&gt;, '2188': &lt;Deferred...&gt;} and the log output shows 2186, 2187, 218a, 218b, ...
</I>
So, wait a second.

You said you're looking at tcpdump, and it's showing you that your outstanding requests - in this case, 2188 and 2189 - are in fact being answered. But then you say you're looking at the dump from dataReceived, and seeing that not only are 2188 and 2189 not being answered from that layer, but 218a and 218b are being answered?

Simply put: that should be impossible.  TCP is an ordered stream.  If you received answers to 2188 and 2189 on the wire in tcpdump, you should see those come back to dataReceived first.  What kind of transport is this hooked up to?  A regular socket?  Is there TLS involved?  Did you run tcpdump for that same session?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20141113/285ffe3c/attachment-0001.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20141113/285ffe3c/attachment-0001.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028940.html">[Twisted-Python] How do I debug this network problem?
</A></li>
	<LI>Next message: <A HREF="028944.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28942">[ date ]</a>
              <a href="thread.html#28942">[ thread ]</a>
              <a href="subject.html#28942">[ subject ]</a>
              <a href="author.html#28942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
