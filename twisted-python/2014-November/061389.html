<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted ssl server and client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20ssl%20server%20and%20client&In-Reply-To=%3CA0BF42BE-C144-4EFF-BBC1-4AA30A520099%40ox.cx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061387.html">
   <LINK REL="Next"  HREF="061390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted ssl server and client</H1>
    <B>Hynek Schlawack</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20ssl%20server%20and%20client&In-Reply-To=%3CA0BF42BE-C144-4EFF-BBC1-4AA30A520099%40ox.cx%3E"
       TITLE="[Twisted-Python] twisted ssl server and client">hs at ox.cx
       </A><BR>
    <I>Sun Nov  9 03:47:39 MST 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061387.html">[Twisted-Python] twisted ssl server and client
</A></li>
        <LI>Next message (by thread): <A HREF="061390.html">[Twisted-Python] twisted ssl server and client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61389">[ date ]</a>
              <a href="thread.html#61389">[ thread ]</a>
              <a href="subject.html#61389">[ subject ]</a>
              <a href="author.html#61389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John,

On 7 Nov 2014, at 14:14, John Aherne wrote:

&gt;<i> Thanks for the reply.
</I>&gt;<i>
</I>&gt;<i> In the end I took the examples in the docs and changed them to fit.
</I>&gt;<i>
</I>&gt;<i> So I have ended up with something that seems to work.
</I>&gt;<i>
</I>&gt;<i> But I wouldn't mind if someone can tell me if what I have done is 
</I>&gt;<i> miles
</I>&gt;<i> wrong or spot on or could do with improvement or you have missed the 
</I>&gt;<i> point
</I>&gt;<i> completely.
</I>
I’m a bit confused as for what you’re trying to achieve.  Let me 
give you general pointers and maybe you’ll ask more specific questions 
afterwards.

I understand you want to use TLS both from a server and a client.  
Servers and clients have very different duties when it comes to TLS (and 
if you want to hear/learn more about them, you may want to take some 
time and watch my PyCon talk about it: 
<A HREF="https://www.youtube.com/watch?v=SBQB_yS2K4M">https://www.youtube.com/watch?v=SBQB_yS2K4M</A> ).

The *server* needs to make sure that its certificate chain is 
trustworthy, for that you need to load the certificate and the chain 
file you got from GoDaddy.  FWIW, you may want to use 
<A HREF="https://warehouse.python.org/project/pem/">https://warehouse.python.org/project/pem/</A> for that because it takes some 
tediousness from it.

You should use some third-party application to verify you really got 
that right (don’t use the openssl CLI program, it’s confusing).

The *client* needs to verify the aforementioned certificate chain for 
its trustworthiness and whether it’s valid for the hostname you wanted 
to connect to.  In order to verify the trustworthiness, it requires a 
list of CAs it trusts.  One of them has to sign your final certificate 
in your chain file.

As glyph mentioned, loading CAs is a bit finicky and I have no 
experience on Windows unfortunately.  There is 
<A HREF="https://warehouse.python.org/project/wincertstore/">https://warehouse.python.org/project/wincertstore/</A> to extract them from 
the Windows store but I have no idea whether the output is useful with 
pyOpenSSL/Twisted.  A useful fallback is to use the bundle you get from 
<A HREF="https://warehouse.python.org/project/certifi/">https://warehouse.python.org/project/certifi/</A> .  If you’d like to help 
us to make this more friendly for Windows users we’d (and they!) would 
be eternally indebted. :)

It’s also worth noting, that you’re using the obsolete 
`DefaultOpenSSLContextFactory`, please use 
`twisted.internet.ssl.CertificateOptions` instead.  Is it possible, that 
you’re reading an older version of the TLS docs? Make sure to use 
<A HREF="http://twistedmatrix.com/documents/current/core/howto/ssl.html">http://twistedmatrix.com/documents/current/core/howto/ssl.html</A> and also 
run Twisted 14.0.2 if you’re serious about using TLS.

Let us know if there’s something else unclear.

—h


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061387.html">[Twisted-Python] twisted ssl server and client
</A></li>
	<LI>Next message (by thread): <A HREF="061390.html">[Twisted-Python] twisted ssl server and client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61389">[ date ]</a>
              <a href="thread.html#61389">[ thread ]</a>
              <a href="subject.html#61389">[ subject ]</a>
              <a href="author.html#61389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
