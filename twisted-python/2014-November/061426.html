<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I debug this network problem?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1416231984.3828632.191929321.72C806A9%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061411.html">
   <LINK REL="Next"  HREF="061432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I debug this network problem?</H1>
    <B>Peter Westlake</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20debug%20this%20network%20problem%3F&In-Reply-To=%3C1416231984.3828632.191929321.72C806A9%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] How do I debug this network problem?">peter.westlake at pobox.com
       </A><BR>
    <I>Mon Nov 17 06:46:24 MST 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061411.html">[Twisted-Python] How do I debug this network problem?
</A></li>
        <LI>Next message (by thread): <A HREF="061432.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61426">[ date ]</a>
              <a href="thread.html#61426">[ thread ]</a>
              <a href="subject.html#61426">[ subject ]</a>
              <a href="author.html#61426">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
My previous strace output didn't include the poll() calls. This one
does, with the list of file descriptors shortened for readability.
According to the man page, the last parameter to poll() is a timeout,
in milliseconds. Looking at these calls, there are some very odd
values indeed: 154538, 154331, 2999999, 8, 0, 0, 0. The last four
calls time out, which isn't surprising if that's how long they wait!
The full strace output shows descending runs of values, with some
omissions and duplicates. If this was C, it would be an uninitialised
variable for sure.

Peter.

poll([{fd=5, events=POLLIN|POLLOUT}], 7, 154538) = 1 ([{fd=5,
revents=POLLOUT}]) sendto(5,
&quot;\0\4_ask\0\004867c\0\10_command\0\tLogOutpu&quot;..., 343, 0, NULL, 0) = 343
poll([{fd=5, events=POLLIN}], 7, 154537) = 1 ([{fd=5, revents=POLLIN}])
recvfrom(5, &quot;\0\7_answer\0\004867c\0\6status\0\4True\0\0&quot;, 65536, 0,
NULL, NULL) = 31 poll([{fd=5, events=POLLIN|POLLOUT}], 7, 154331) = 1
([{fd=5, revents=POLLOUT}]) sendto(5,
&quot;\0\4_ask\0\004867d\0\10_command\0\tLogOutpu&quot;..., 183, 0, NULL, 0) = 183
poll([{fd=5, events=POLLIN}], 7, 3) = 0 (Timeout) poll([{fd=5,
events=POLLIN|POLLOUT}], 7, 299999) = 1 ([{fd=5, revents=POLLOUT}])
sendto(5, &quot;\0\4_ask\0\004867e\0\10_command\0\4Ping\0\0&quot;, 30, 0, NULL, 0)
= 30 poll([{fd=5, events=POLLIN}], 7, 299999) = 1 ([{fd=5,
revents=POLLIN}]) recvfrom(5, 0x7fec3005c6d4, 65536, 0, 0, 0) = -1
EAGAIN (Resource temporarily unavailable) poll([{fd=5, events=POLLIN}],
7, 8) = 0 (Timeout) poll([{fd=5, events=POLLIN}], 7, 0) = 0 (Timeout)
poll([{fd=5, events=POLLIN}], 7, 0) = 0 (Timeout) poll([{fd=5,
events=POLLIN}], 7, 0) = 0 (Timeout) poll([{fd=5,
events=POLLIN|POLLOUT}], 7, 299999) = 1 ([{fd=5, revents=POLLOUT}])
sendto(5, &quot;\0\4_ask\0\004867f\0\10_command\0\4Ping\0\0&quot;, 30, 0, NULL, 0)
= 30 poll([{fd=5, events=POLLIN}], 7, 299999) = 1 ([{fd=5,
revents=POLLIN}]) recvfrom(5,
&quot;\0\7_answer\0\004867f\0\3ack\0\4True\0\0&quot;, 65536, 0, NULL, NULL) = 28


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20141117/ff4b5a55/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061411.html">[Twisted-Python] How do I debug this network problem?
</A></li>
	<LI>Next message (by thread): <A HREF="061432.html">[Twisted-Python] How do I debug this network problem?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61426">[ date ]</a>
              <a href="thread.html#61426">[ thread ]</a>
              <a href="subject.html#61426">[ subject ]</a>
              <a href="author.html#61426">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
