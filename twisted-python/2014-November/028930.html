<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted ssl server and client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20ssl%20server%20and%20client&In-Reply-To=%3CCAKmUHjbg28KDVBKBWNfq5NwVWwJ_EAxsTcxZKP2HBi_q56OGmg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028929.html">
   <LINK REL="Next"  HREF="028931.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted ssl server and client</H1>
    <B>John Aherne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20ssl%20server%20and%20client&In-Reply-To=%3CCAKmUHjbg28KDVBKBWNfq5NwVWwJ_EAxsTcxZKP2HBi_q56OGmg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] twisted ssl server and client">johnaherne at rocs.co.uk
       </A><BR>
    <I>Mon Nov 10 03:32:01 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028929.html">[Twisted-Python] twisted ssl server and client
</A></li>
        <LI>Next message: <A HREF="028931.html">[Twisted-Python] twisted ssl server and client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28930">[ date ]</a>
              <a href="thread.html#28930">[ thread ]</a>
              <a href="subject.html#28930">[ subject ]</a>
              <a href="author.html#28930">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So I am now looking at CertificateOptions in more detail.

But I am stuck trying to figure out how to add my GoDaddy cert to trustRoot.

Here is what I am doing so far to see what is happening. Bu I think I am
getting further and further from what I should be doing.

If anyone can point out what must be the obvious thing to do, GREAT!


#!/usr/bin/env python
# Copyright (c) Twisted Matrix Laboratories.
# See LICENSE for details.

import sys

from twisted.internet import reactor, ssl, protocol, task, defer
from twisted.python import log

import echoserv

log.startLogging(sys.stdout)

ctx = ssl.CertificateOptions()

certData2 = open('d:\\openssl\\ibook\\ibook2.pem', 'rb').read()
certificate2 = ssl.PrivateCertificate.loadPEM(certData2)

print 'CERT2', certificate2.options
print 'CERT2', dir(certificate2)
print 'CERT2 OPTIONS', certificate2.options()
print 'CERT2OPTS', dir(certificate2.options)
certGD = open('d:\\openssl\\ibook\\gd_bundle-g2-g1.crt', 'rb').read()
#ctx.trustRoot = ssl.Certificate.loadPEM(certGD)
certificate3  = certificate2.options(ssl.Certificate.loadPEM(certGD))
print 'cERT3', certificate3.privateKey
print 'trustRoot2TROOT', certificate3.trustRoot
#certificate2.options().trustRoot = ssl.Certificate.loadPEM(certGD)
print 'trustRoot', certificate3
print 'trustRoot2type', type(certificate3.trustRoot)
print 'trustRoot2TROOT', certificate3.trustRoot
print 'trustRoot2PK', certificate3.privateKey
print 'trustRoot2CERT', certificate3.certificate
print 'trustRoot2VER', certificate3.verify
#print 'trustRoot2', ctx.trustRoot

factory = protocol.Factory.forProtocol(echoserv.Echo)
reactor.listenSSL(8000, factory, certificate2.options(certificate3))
#reactor.listenSSL(8000, factory, certificate3)


reactor.run()


Thanks for any pointers.



-- 
*John Aherne*




*www.rocs.co.uk &lt;<A HREF="http://www.rocs.co.uk">http://www.rocs.co.uk</A>&gt;*
020 7223 7567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20141110/d44bfef7/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20141110/d44bfef7/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028929.html">[Twisted-Python] twisted ssl server and client
</A></li>
	<LI>Next message: <A HREF="028931.html">[Twisted-Python] twisted ssl server and client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28930">[ date ]</a>
              <a href="thread.html#28930">[ thread ]</a>
              <a href="subject.html#28930">[ subject ]</a>
              <a href="author.html#28930">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
