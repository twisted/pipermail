<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problem with trial using the reactor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20with%20trial%20using%20the%20reactor&In-Reply-To=d06a5cd30706062158v546a811g7a077d4cf565d4a6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015480.html">
   <LINK REL="Next"  HREF="015482.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problem with trial using the reactor</H1>
    <B>Ben Artin</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20with%20trial%20using%20the%20reactor&In-Reply-To=d06a5cd30706062158v546a811g7a077d4cf565d4a6%40mail.gmail.com"
       TITLE="[Twisted-Python] Problem with trial using the reactor">ben at artins.org
       </A><BR>
    <I>Thu Jun  7 01:23:24 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015480.html">[Twisted-Python] Problem with trial using the reactor
</A></li>
        <LI>Next message: <A HREF="015482.html">[Twisted-Python] Problem with trial using the reactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15481">[ date ]</a>
              <a href="thread.html#15481">[ thread ]</a>
              <a href="subject.html#15481">[ subject ]</a>
              <a href="author.html#15481">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just spent some time tearing my hair out getting trial and  
ThreadedSelectReactor to cooperate.

Another possible solution to the trial/reactor impedance mismatch you  
commented on would be for trial spawn off a process for each test. By  
definition, that process would get its own reactor and could not  
taint any other tests. The test rig process could happily use  
Deferred semantics, while presenting a synchronous interface to trial.

This would also be easier to distribute IMO, because if IPC is  
already involved in communication between trial runner and tests,  
making that IPC go to another machine is easier.

I realize the cost of spawning processes, but I honestly think that  
it's easier to change unittest to fork, run a test on a separate  
reactor, and IPC the test results back to the parent, than it is to  
take one of the other three approaches, because of the API changes  
they would require. (Not that said API changes would be bad, but I  
don't think that the distributed runner should have to wait for them.)

Ben

--

&lt;<A HREF="http://artins.org/ben">http://artins.org/ben</A>&gt;

&quot;Computers! All they ever think of is hex!&quot;




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015480.html">[Twisted-Python] Problem with trial using the reactor
</A></li>
	<LI>Next message: <A HREF="015482.html">[Twisted-Python] Problem with trial using the reactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15481">[ date ]</a>
              <a href="thread.html#15481">[ thread ]</a>
              <a href="subject.html#15481">[ subject ]</a>
              <a href="author.html#15481">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
