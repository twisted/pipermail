<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Server/Client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Server/Client&In-Reply-To=%3C0C8FBA9C0F70E1479497B4DD7ED592233D7EA5%40naeapaxrez05.nadsusea.nads.navy.mil%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048091.html">
   <LINK REL="Next"  HREF="048097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Server/Client</H1>
    <B>Delgado, Edgardo  CIV NAVAIR 4.1.4.3</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Server/Client&In-Reply-To=%3C0C8FBA9C0F70E1479497B4DD7ED592233D7EA5%40naeapaxrez05.nadsusea.nads.navy.mil%3E"
       TITLE="[Twisted-Python] Server/Client">edgardo.delgado at navy.mil
       </A><BR>
    <I>Wed Jun 20 13:42:17 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048091.html">[Twisted-Python] Server/Client
</A></li>
        <LI>Next message (by thread): <A HREF="048097.html">[Twisted-Python] Server/Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48094">[ date ]</a>
              <a href="thread.html#48094">[ thread ]</a>
              <a href="subject.html#48094">[ subject ]</a>
              <a href="author.html#48094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here's the code:

from twisted.internet.protocol import ServerFactory, ClientFactory,
Protocol, ClientCreator
from twisted.protocols.basic import LineReceiver
from twisted.application.service import Service, Application,
IServiceCollection
from twisted.application.internet import TCPServer, TCPClient
from twisted.internet.stdio import StandardIO
from twisted.internet import reactor
import re

class DnLinkProtocol(LineReceiver):
    
    def connectionMade(self):
        self.sendLine(&quot;Connected from: &quot; + &quot;host &quot; +
                             str(self.transport.getPeer().host) + &quot; &quot; +
                             &quot;port &quot; +
                             str(self.transport.getPeer().port) + '\n')
        
    def lineReceived(self, line):
        self.sendLine(&quot;DnLink echo: &quot; + line + '\n')

class DSPEProtocol(LineReceiver):
    
    def connectionMade(self):
        self.sendLine(&quot;Connected from: &quot; + &quot;host &quot; +
                             str(self.transport.getPeer().host) + &quot; &quot; +
                             &quot;port &quot; +
                             str(self.transport.getPeer().port) + '\n')
    
    def lineReceived(self, line):
        self.sendLine(&quot;DSPE echo: &quot; + line + '\n')

class PAPSExecService(Service):
    
    def getDnLinkInFactory(self):
        f = ServerFactory()
        f.protocol = DnLinkProtocol
        f.startService = self.startService
        return f
    
    def getDSPEInFactory(self):
        f = ServerFactory()
        f.protocol = DSPEProtocol
        f.startService = self.startService
        return f
    
application = Application('PAPSExec')
f = PAPSExecService()
serviceCollection = IServiceCollection(application)
TCPServer(9595,
f.getDnLinkInFactory()).setServiceParent(serviceCollection)
TCPServer(8585,
f.getDSPEInFactory()).setServiceParent(serviceCollection) 


I would like that, for example, when data is received in port 9595 it
will forward the data to another server in port xxxx.
Where would I create a TPC Client connection?
Where would I send the message?

Edgar

-----Original Message-----
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>
[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>] On Behalf Of Christian
Simms
Sent: Wednesday, June 20, 2007 11:01 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] Server/Client

On 6/20/07, Delgado, Edgardo CIV NAVAIR 4.1.4.3
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">edgardo.delgado at navy.mil</A>&gt; wrote:

	I would like to build a server that when it gets a message on a
specific
	port it will &quot;forward&quot; that message to another port. 
	I.e. &quot;Server1&quot; listens on port 10000. When it gets data on port
10000 it
	will forward the data to &quot;Server2&quot; listening on port 15000.


Assuming you're using TCP, you could just create a server listening on a
port using reactor.listenTCP(port, factory) as detailed here
&lt;<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/servers.html">http://twistedmatrix.com/projects/core/documentation/howto/servers.html</A>
&gt;<i>  and when you receive a message you would create a client using
</I>reactor.connectTCP(host, port, factory) as detailed here
&lt;<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/clients.html">http://twistedmatrix.com/projects/core/documentation/howto/clients.html</A>
&gt;<i>  to then send the message.
</I>
Cheers,
Christian



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048091.html">[Twisted-Python] Server/Client
</A></li>
	<LI>Next message (by thread): <A HREF="048097.html">[Twisted-Python] Server/Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48094">[ date ]</a>
              <a href="thread.html#48094">[ thread ]</a>
              <a href="subject.html#48094">[ subject ]</a>
              <a href="author.html#48094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
