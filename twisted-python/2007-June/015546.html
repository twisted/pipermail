<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] About transport.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20About%20transport.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015548.html">
   <LINK REL="Next"  HREF="015554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] About transport.</H1>
    <B>Francisco Herrero</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20About%20transport.&In-Reply-To="
       TITLE="[Twisted-Python] About transport.">francisco.herrero at gmail.com
       </A><BR>
    <I>Thu Jun 14 15:51:34 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015548.html">[Twisted-Python] udp
</A></li>
        <LI>Next message: <A HREF="015554.html">[Twisted-Python] Weekly Bug Summary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15546">[ date ]</a>
              <a href="thread.html#15546">[ thread ]</a>
              <a href="subject.html#15546">[ subject ]</a>
              <a href="author.html#15546">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello community. At first excuse me for my poor english, I'm from Argentina.


I am building a abstraction layer for different protocols of communication
for microcontrolled components simulation on a PC. That is CAN, Mil-1553 and
RS422.
First I m building a model width serial port. The idea is to connect via tcp
to this channel. I choose as a model the class internet.serialport. This
works fine but I do not know how to redirect the protocol of serialport to
the protocol of TCP port:

-----------------------
from rs232 import RS232Connector
from twisted.internet import reactor, protocol
from twisted.application import service, internet

class RS232Channel(protocol.Protocol):
    def dataReceived(self, data):
        print &quot;CHAN:&quot; + data
        self.factory.port.transport.write(data)

class RS232Port(protocol.Protocol):
    def dataReceived(self, data):
        print &quot;PORT:&quot; + data
        self.factory.channel.protocol.transport.write(data)

class RS232Factory(protocol.Factory):
    protocol = RS232Port

    def __init__(self):
        conf = {}
        self.port = RS232Port()
        self.channel = RS232Connector(self.port, conf, reactor)

if __name__ == '__main__':
    factory = RS232Factory()
    reactor.listenTCP(5001, factory)
    reactor.run()
--------------
this works fine when data is received from the tcp port, but when come data
from the serial port the program can't find the factory for RS232Channel
protocol instance. That is logical. I try to switch the transport but I
can't go so far...
Anyone can tell me how to connect this 2 protocols

Thanks

Francisco

-- 
&quot;El hombre se descubre cuando se mide con un obst&#225;culo&quot;
(Saint Exup&#233;ry)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20070614/b01589ae/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20070614/b01589ae/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015548.html">[Twisted-Python] udp
</A></li>
	<LI>Next message: <A HREF="015554.html">[Twisted-Python] Weekly Bug Summary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15546">[ date ]</a>
              <a href="thread.html#15546">[ thread ]</a>
              <a href="subject.html#15546">[ subject ]</a>
              <a href="author.html#15546">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
