<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Taking a look at pending deferToThread	actions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Taking%20a%20look%20at%20pending%20deferToThread%0A%09actions&In-Reply-To=bea9869d0706071925l23f39e9bha519962fb60659f6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015489.html">
   <LINK REL="Next"  HREF="015468.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Taking a look at pending deferToThread	actions</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Taking%20a%20look%20at%20pending%20deferToThread%0A%09actions&In-Reply-To=bea9869d0706071925l23f39e9bha519962fb60659f6%40mail.gmail.com"
       TITLE="[Twisted-Python] Re: Taking a look at pending deferToThread	actions">general at eepatents.com
       </A><BR>
    <I>Fri Jun  8 12:26:24 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015489.html">[Twisted-Python] Re: Taking a look at pending deferToThread	actions
</A></li>
        <LI>Next message: <A HREF="015468.html">[Twisted-Python] Twisted TCP Server Maximum Simultaneous Connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15494">[ date ]</a>
              <a href="thread.html#15494">[ thread ]</a>
              <a href="subject.html#15494">[ subject ]</a>
              <a href="author.html#15494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Allen Bierbaum wrote:
&gt;&gt;<i> &gt; - Has anyone extended threadpool to allow code to remove queued
</I>&gt;&gt;<i> &gt; functions from the pending queue?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How about just having the functions themselves check to see if they
</I>&gt;&gt;<i> really should run their intended task? (Being careful about
</I>&gt;&gt;<i> thread-safety, of course).
</I>&gt;<i> 
</I>&gt;<i> Thanks for the idea.  I will give it a try.
</I>
You also might want to take a look at my taskqueue sub-package in
Twisted-Goodies, <A HREF="http://foss.eepatents.com/Twisted-Goodies.">http://foss.eepatents.com/Twisted-Goodies.</A> One feature
that might come in handy is the IWorker implementors' ability to resign
when they feel that they are no longer able to run jobs. Any jobs that
the resigning worker has queued up individually at that point are
returned to the main queue for dispatching to other workers, current or
future.

The whole thing revolves around a priority queue, which might be useful
to you, too. Also, a ProcessWorker implementation of IWorker is pending
that spawns a separate Python interpreter to run tasks. If the
ProcessWorker hangs, you'll be able to just kill it and move right
along, without hanging your main Python interpreter.

&gt;<i> I am using threads because the calls I am making are into a
</I>&gt;<i> non-blocking library.  I may see about rewriting it in the future to
</I>&gt;<i> be more twisted-friendly, but for now I have to live with it.
</I>
That was my original motivation for writing taskqueue, with its
ThreadWorker implementation of IWorker. It's used in sAsync, which makes
a wonderful but totally synchronous database API (SQLAlchemy) play very
nicely (IMHO) with Twisted.

Debian packages are in the works for both, by the way.

Best regards,
Ed Suominen



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015489.html">[Twisted-Python] Re: Taking a look at pending deferToThread	actions
</A></li>
	<LI>Next message: <A HREF="015468.html">[Twisted-Python] Twisted TCP Server Maximum Simultaneous Connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15494">[ date ]</a>
              <a href="thread.html#15494">[ thread ]</a>
              <a href="subject.html#15494">[ subject ]</a>
              <a href="author.html#15494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
