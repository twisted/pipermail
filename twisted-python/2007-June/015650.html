<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Implementing streaming (broadcast) TCP servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Implementing%20streaming%20%28broadcast%29%20TCP%20servers&In-Reply-To=2A5FBFDE-5B46-4CC7-A532-A7DF36E7FB42%40atlas.st">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015646.html">
   <LINK REL="Next"  HREF="015654.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Implementing streaming (broadcast) TCP servers</H1>
    <B>Adam Atlas</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Implementing%20streaming%20%28broadcast%29%20TCP%20servers&In-Reply-To=2A5FBFDE-5B46-4CC7-A532-A7DF36E7FB42%40atlas.st"
       TITLE="[Twisted-Python] Implementing streaming (broadcast) TCP servers">adam at atlas.st
       </A><BR>
    <I>Thu Jun 28 16:27:32 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015646.html">[Twisted-Python] Implementing streaming (broadcast) TCP servers
</A></li>
        <LI>Next message: <A HREF="015654.html">[Twisted-Python] Re: Implementing streaming (broadcast) TCP servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15650">[ date ]</a>
              <a href="thread.html#15650">[ thread ]</a>
              <a href="subject.html#15650">[ subject ]</a>
              <a href="author.html#15650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 28 Jun 2007, at 11.44, Adam Atlas wrote:
&gt;<i> I had similar thoughts... I was thinking, once I had the connection  
</I>&gt;<i> established, I could try to bypass web2's IByteStream stuff and try  
</I>&gt;<i> to use transport.write directly. Do you think that would help? It's  
</I>&gt;<i> less runloopy overhead, at least.
</I>
For the record, this seems to be working. I rewrote it to work like  
this, and I was able to pump it up to 64 clients again (me  
broadcasting to the remote server from my own computer, and then  
starting 64 clients on my own computer) but CPU and memory usage were  
much better. CPU was standing around 1.5% and memory around 3.6%. (I  
know these could still be considered SORT OF high, but this is  
actually a vserver where both of these resources are quite limited --  
only 480 MB of the real server's memory.)

However, once all the clients disconnect, the memory doesn't seem to  
go back down to the expected level. Any ideas on where I should start  
looking to solve this?


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015646.html">[Twisted-Python] Implementing streaming (broadcast) TCP servers
</A></li>
	<LI>Next message: <A HREF="015654.html">[Twisted-Python] Re: Implementing streaming (broadcast) TCP servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15650">[ date ]</a>
              <a href="thread.html#15650">[ thread ]</a>
              <a href="subject.html#15650">[ subject ]</a>
              <a href="author.html#15650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
