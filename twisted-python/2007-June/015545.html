<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] caching suggestions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20caching%20suggestions&In-Reply-To=BB643192-5115-4E2E-BB8D-C2D602B8E466%402xlp.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015542.html">
   <LINK REL="Next"  HREF="015551.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] caching suggestions</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20caching%20suggestions&In-Reply-To=BB643192-5115-4E2E-BB8D-C2D602B8E466%402xlp.com"
       TITLE="[Twisted-Python] caching suggestions">exarkun at divmod.com
       </A><BR>
    <I>Thu Jun 14 15:43:57 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015542.html">[Twisted-Python] caching suggestions
</A></li>
        <LI>Next message: <A HREF="015551.html">[Twisted-Python] caching suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15545">[ date ]</a>
              <a href="thread.html#15545">[ thread ]</a>
              <a href="subject.html#15545">[ subject ]</a>
              <a href="author.html#15545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 14 Jun 2007 15:29:08 -0400, Jonathan Vanasco &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at 2xlp.com</A>&gt; wrote:
&gt;<i>note: this is less about twisted than a project i've built on twisted  that 
</I>&gt;<i>is having some issues.  everyone here is smart, so i thought  this would be 
</I>&gt;<i>a good list to ask on.
</I>&gt;<i>
</I>&gt;<i>i've got a small twisted daemon that is working as a proxy for  hosting 
</I>&gt;<i>content that we store on amazon-s3
</I>&gt;<i>long story short: archive to s3 (redundancy, cheap storage), twisted  daemon 
</I>&gt;<i>on our network fetches to cache &amp; serve.  we have cheaper  bandwidth, plus 
</I>&gt;<i>do a lot of file monitoring / name abstraction that  amazon's network won't 
</I>&gt;<i>support.  currently there are 10k documents on  s3, which are accessible via 
</I>&gt;<i>150k+ 'keys'.   the cache basiscally  proxies the right doc for each key
</I>&gt;<i>
</I>&gt;<i>I'm running into 2 issues with it:
</I>&gt;<i>         short term- keys are mapped to s3 files via a ton of 'hints' that i 
</I>&gt;<i>store in bdb after fetching from postgresql.  the hints need to be 
</I>&gt;<i>refreshed every 1-5 minutes or so.  does anyone have a good  suggestion on 
</I>&gt;<i>how to do that?  i could do this really easily with  sqlite, but i need to 
</I>&gt;<i>use bdb -- as sqlite isn't nearly fast enough;  while bdb is.
</I>&gt;<i>
</I>&gt;<i>         long term-    everything is fine for now -- we only have about 3gb 
</I>&gt;<i>of data.  but thats going to be growing to about 20gb soon, and we  want to 
</I>&gt;<i>limit the cache to an active 10gb using an Adaptive  Replacement Cache 
</I>&gt;<i>algorithm with a bdb datastore.  has anyone done  something similar in 
</I>&gt;<i>twisted or python in general?
</I>&gt;<i>
</I>&gt;<i>any input would be appreciated.  thanks!
</I>
Sounds like an interesting project.  With regards to bdb, in my experience
the Python bindings are very flaky, and the bdb API isn't very friendly in
the first place.  It is probably possible to write something that works on
bdb with Python, but it's pretty hard.  bdb does handle that scale well enough
though - I have a Twisted-based server running against a 21GB bdb database
at the moment (although we're trying to phase it out in favor of something
based on SQLite ;P).

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015542.html">[Twisted-Python] caching suggestions
</A></li>
	<LI>Next message: <A HREF="015551.html">[Twisted-Python] caching suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15545">[ date ]</a>
              <a href="thread.html#15545">[ thread ]</a>
              <a href="subject.html#15545">[ subject ]</a>
              <a href="author.html#15545">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
