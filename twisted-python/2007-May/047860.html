<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] StdIO forwarding server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20StdIO%20forwarding%20server&In-Reply-To=%3C4DAEA848-BF12-4538-B646-2D62F48B5DBD%40zgroupplc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047859.html">
   <LINK REL="Next"  HREF="047861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] StdIO forwarding server</H1>
    <B>Matthew Glubb</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20StdIO%20forwarding%20server&In-Reply-To=%3C4DAEA848-BF12-4538-B646-2D62F48B5DBD%40zgroupplc.com%3E"
       TITLE="[Twisted-Python] StdIO forwarding server">matt at zgroupplc.com
       </A><BR>
    <I>Thu May 10 07:59:31 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047859.html">[Twisted-Python] StdIO forwarding server
</A></li>
        <LI>Next message (by thread): <A HREF="047861.html">[Twisted-Python] Hacking in Bazaar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47860">[ date ]</a>
              <a href="thread.html#47860">[ thread ]</a>
              <a href="subject.html#47860">[ subject ]</a>
              <a href="author.html#47860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Tomas,

If the clients are already connected, you should just be able send  
your data as you describe.

If your clients are not connected to the server, your server factory  
should be hosted by the client and it should listen for incoming  
requests by your actual server.

Remember, the server factory creates a Protocol instance for *every*  
client connected to it. What this means is that you will have one  
server factory instance that listens for incoming connections. When a  
connection occurs, ServerFactory.buildProtocol will be called,  
creating a Protocol instance for that connection. Your protocol class  
should take the form of a state machine that copes with being in a  
listening or transmitting state. The other alternative is to use two  
Protocol classes, one for the server and one for the client.

Having little experience of twisted and network programming in  
general, it took a while for that to dawn on me. Hopefully I have  
grasped it correctly, if not, I am sure that others on the list will  
correct me :)

Hope that helps,

Matt

On 10 May 2007, at 14:03, Tomas Neme wrote:

&gt;<i> I need to write a server that receives a command through stdIO and
</I>&gt;<i> forwards it to all of its clients. So far I've been able to create and
</I>&gt;<i> mantain a list of clients, but I can't send the message to all of
</I>&gt;<i> them.
</I>&gt;<i>
</I>&gt;<i> This might be confusing, I think I have a completely wrong approach. I
</I>&gt;<i> used the echoclient.py example from O'Reilly's Network Programming
</I>&gt;<i> Essentials, and simply changed the ClientFactory to a ServerFactory,
</I>&gt;<i> added a clients list and changed
</I>&gt;<i>
</I>&gt;<i> def dataReceived(self,data):
</I>&gt;<i>    self.output.write(data)
</I>&gt;<i>
</I>&gt;<i> to
</I>&gt;<i>
</I>&gt;<i> def dataReceived(self,data):
</I>&gt;<i>    for c in self.factory.clients:
</I>&gt;<i>        c.output.write(data)
</I>&gt;<i>
</I>&gt;<i> but for some reason this comes out to the server's StdIO instead of  
</I>&gt;<i> the client's
</I>&gt;<i>
</I>&gt;<i> can anyone give me some tip?
</I>&gt;<i>
</I>&gt;<i> -- 
</I>&gt;<i> |_|0|_|
</I>&gt;<i> |_|_|0|
</I>&gt;<i> |0|0|0|
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


m a t t h e w   g l u b b

________________________________________________________________________
Z Group PLC

Tel: +44 (0) 8700 111 173
Fax: +44 (0) 8707 051 393
Txt: +44 (0) 7800 140 877
Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;

This  email  and  any  files  transmitted  with it are  confidential and
intended solely for the use of the individual or entity to whom they are
addressed.  The opinions  expressed in this mail are those of the author
and do not necessarily  represent the views of the company.  If you have
received this email in error please notify &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGQyVGyI6MkdKPngkRAgl1AKCzWua9rxmOnryL0XVSdAuwQLsb/gCcDasa
eKcyhV01VDpBGBGuI4YVssE=
=G9nQ
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047859.html">[Twisted-Python] StdIO forwarding server
</A></li>
	<LI>Next message (by thread): <A HREF="047861.html">[Twisted-Python] Hacking in Bazaar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47860">[ date ]</a>
              <a href="thread.html#47860">[ thread ]</a>
              <a href="subject.html#47860">[ subject ]</a>
              <a href="author.html#47860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
