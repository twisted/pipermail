<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted &amp; ZSI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20%26%20ZSI&In-Reply-To=53F99A7A-89EE-462A-89FC-B499253941AB%40zgroupplc.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015416.html">
   <LINK REL="Next"  HREF="015422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted &amp; ZSI</H1>
    <B>Thomas Jacob</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20%26%20ZSI&In-Reply-To=53F99A7A-89EE-462A-89FC-B499253941AB%40zgroupplc.com"
       TITLE="[Twisted-Python] Twisted &amp; ZSI">jacob at internet24.de
       </A><BR>
    <I>Tue May 22 14:22:33 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015416.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
        <LI>Next message: <A HREF="015422.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15417">[ date ]</a>
              <a href="thread.html#15417">[ thread ]</a>
              <a href="subject.html#15417">[ subject ]</a>
              <a href="author.html#15417">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Actually, I'm not using the built-in twisted dispatching system
of ZSI myself, so you probably will have to read the source
to find out these things :-)

Alternatively you might just want to try to ask that question again on
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pywebsvcs-talk at lists.sourceforge.net</A> where the authors of ZSI post
regularly, they are generally very helpful....

But it's also pretty easy to build your own ZSI/twisted dispatcher,
that's
what I am doing (executing the method calls in separate threads, handing
deferred execution back the twisted reactor when I need deferreds,
waiting on a lock till the results come in) , I could mail you a rough
example if you like... 

On Tue, 2007-05-22 at 14:36 +0100, Matthew Glubb wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i> 
</I>&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> Thanks again Thomas for pointing me in the right direction with  
</I>&gt;<i> twisted and ZSI. I apologise if this is getting technically off-topic  
</I>&gt;<i> (ie. ZSI) but people seem to get more annoyed about cross posting.  
</I>&gt;<i> Berate me about that if it makes you feel better! If you still have  
</I>&gt;<i> the patience, I have one major problem that is bugging me:
</I>&gt;<i> 
</I>&gt;<i> At the moment, I have the following (test function) working fine  
</I>&gt;<i> within twisted and twistd:
</I>&gt;<i> 
</I>&gt;<i> def wsa_ProcessAip(self, ps, address, **kw):
</I>&gt;<i>      self.request, self.response = CPServiceWSRF.wsa_ProcessAip(self,  
</I>&gt;<i> ps, address, **kw)
</I>&gt;<i>      self.response._mode = False
</I>&gt;<i>      self.response._return = '127.0.0.1'
</I>&gt;<i>      return self.request, self.response
</I>&gt;<i> 
</I>&gt;<i> *However* I want to return a deferred from this method. I am not sure  
</I>&gt;<i> that this is easily possible as ZSI doesn't seem to be recognising a  
</I>&gt;<i> return value of either server.NOT_DONE_YET, or a deferred object. It  
</I>&gt;<i> is also forcing me to return a tuple containing the ZSI request and  
</I>&gt;<i> response objects which is confusing me as I want to return a  
</I>&gt;<i> deferred. My ideal would be:
</I>&gt;<i> 
</I>&gt;<i> def wsa_ProcessAip(self, ps, address, **kw):
</I>&gt;<i>      self.request, self.response = CPServiceWSRF.wsa_ProcessAip(self,  
</I>&gt;<i> ps, address, **kw)
</I>&gt;<i>      # Don't worry about there being nothing to call back this
</I>&gt;<i>      # In my reality it does get called back
</I>&gt;<i>      deferred = defer.Deferred()
</I>&gt;<i>      deferred.addBoth(self.aipBack)
</I>&gt;<i>      return deferred
</I>&gt;<i> 
</I>&gt;<i> def aipBack(self, result):
</I>&gt;<i>      ip, mode = result
</I>&gt;<i>      self.response._mode = mode
</I>&gt;<i>      self.response._return = ip
</I>&gt;<i>      return self.request, self.response
</I>&gt;<i> 
</I>&gt;<i> Is this possible? Scanning the ZSI twisted package, the only mention  
</I>&gt;<i> of a deferred object is in the client module. I am also puzzled with  
</I>&gt;<i> the 'Delayed Call Sweep' debug line. To me, this indicates some kind  
</I>&gt;<i> of deferred.
</I>&gt;<i> 
</I>&gt;<i> Thanks a lot for your time :)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Matt
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 21 May 2007, at 17:49, Thomas Jacob wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; ZSI 2.0 has built-in twisted support...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (see --twisted option for wsdl2py/dispatch)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Client side usage:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; from MyService_services import *
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; port = MyServiceLocator().getMyService(&quot;<A HREF="http://myhost/MyService&quot;">http://myhost/MyService&quot;</A>)
</I>&gt;<i> &gt; port.binding.defer = True
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; msg = myMethodRequest()
</I>&gt;<i> &gt; msg.value =...
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt; deferred = port.myMethod(msg)
</I>&gt;<i> &gt; deferred.addCallback(....)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Server side usage:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Use twisted.web and derive a service class from WSResource:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The following should get you started:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="http://proj.badc.rl.ac.uk/ndg/browser/TI12-security/trunk/python/">http://proj.badc.rl.ac.uk/ndg/browser/TI12-security/trunk/python/</A> 
</I>&gt;<i> &gt; ndg.security.server/ndg/security/server/SessionMgr/server-config.tac
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Mon, 2007-05-21 at 15:43 +0100, Matthew Glubb wrote:
</I>&gt;<i> &gt;&gt; -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> &gt;&gt; Hash: SHA1
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi All,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Apologies if this has been covered before but there seems to be a
</I>&gt;<i> &gt;&gt; dearth of documentation and examples on the net.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Does anyone have any tips for integrating ZSI with twisted? I am
</I>&gt;<i> &gt;&gt; struggling with the concept of the request / response objects and how
</I>&gt;<i> &gt;&gt; they relate to a twisted deferred object. Normally, under twisted, I
</I>&gt;<i> &gt;&gt; would return a deferred from the SOAP method call and let the reactor
</I>&gt;<i> &gt;&gt; take care of returning the response on callback/errback. How do I do
</I>&gt;<i> &gt;&gt; this using ZSI?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; If anyone has got some *simple* example code, I'd love to see it. I
</I>&gt;<i> &gt;&gt; am not particularly concerned with general inter-operability, I am
</I>&gt;<i> &gt;&gt; more concerned with getting a particular SOAP client working with my
</I>&gt;<i> &gt;&gt; application. SOAPpy doesn't seem to be cutting the mustard, hence the
</I>&gt;<i> &gt;&gt; need to try ZSI.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Any tips *gratefully* received :)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Matt
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; m a t t h e w   g l u b b
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _____________________________________________________________________ 
</I>&gt;<i> &gt;&gt; ___
</I>&gt;<i> &gt;&gt; Z Group PLC
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Tel: +44 (0) 8700 111 173
</I>&gt;<i> &gt;&gt; Fax: +44 (0) 8707 051 393
</I>&gt;<i> &gt;&gt; Txt: +44 (0) 7800 140 877
</I>&gt;<i> &gt;&gt; Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This  email  and  any  files  transmitted  with it are   
</I>&gt;<i> &gt;&gt; confidential and
</I>&gt;<i> &gt;&gt; intended solely for the use of the individual or entity to whom  
</I>&gt;<i> &gt;&gt; they are
</I>&gt;<i> &gt;&gt; addressed.  The opinions  expressed in this mail are those of the  
</I>&gt;<i> &gt;&gt; author
</I>&gt;<i> &gt;&gt; and do not necessarily  represent the views of the company.  If  
</I>&gt;<i> &gt;&gt; you have
</I>&gt;<i> &gt;&gt; received this email in error please notify &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> &gt;&gt; Version: GnuPG v1.4.1 (Darwin)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; iD8DBQFGUbALyI6MkdKPngkRAtB7AJ9uSOBnIDBIxHCAcsw9XGt7TLzWjgCfbnhw
</I>&gt;<i> &gt;&gt; QBvvjGEhKT2AtEfhckjliNs=
</I>&gt;<i> &gt;&gt; =AnFA
</I>&gt;<i> &gt;&gt; -----END PGP SIGNATURE-----
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Twisted-Python mailing list
</I>&gt;<i> &gt;&gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Twisted-Python mailing list
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> m a t t h e w   g l u b b
</I>&gt;<i> 
</I>&gt;<i> ________________________________________________________________________
</I>&gt;<i> Z Group PLC
</I>&gt;<i> 
</I>&gt;<i> Tel: +44 (0) 8700 111 173
</I>&gt;<i> Fax: +44 (0) 8707 051 393
</I>&gt;<i> Txt: +44 (0) 7800 140 877
</I>&gt;<i> Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> This  email  and  any  files  transmitted  with it are  confidential and
</I>&gt;<i> intended solely for the use of the individual or entity to whom they are
</I>&gt;<i> addressed.  The opinions  expressed in this mail are those of the author
</I>&gt;<i> and do not necessarily  represent the views of the company.  If you have
</I>&gt;<i> received this email in error please notify &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v1.4.1 (Darwin)
</I>&gt;<i> 
</I>&gt;<i> iD8DBQFGUvH4yI6MkdKPngkRAgKEAKCSaH+sOfF8M/DyqWCCz7Qy2YtYpQCgoZiH
</I>&gt;<i> zn42XMg+wNZvGsssTNr3tfg=
</I>&gt;<i> =WHLP
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20070522/c06e348f/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20070522/c06e348f/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015416.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
	<LI>Next message: <A HREF="015422.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15417">[ date ]</a>
              <a href="thread.html#15417">[ thread ]</a>
              <a href="subject.html#15417">[ subject ]</a>
              <a href="author.html#15417">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
