<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted &amp; ZSI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20%26%20ZSI&In-Reply-To=%3C53F99A7A-89EE-462A-89FC-B499253941AB%40zgroupplc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047922.html">
   <LINK REL="Next"  HREF="047925.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted &amp; ZSI</H1>
    <B>Matthew Glubb</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20%26%20ZSI&In-Reply-To=%3C53F99A7A-89EE-462A-89FC-B499253941AB%40zgroupplc.com%3E"
       TITLE="[Twisted-Python] Twisted &amp; ZSI">matt at zgroupplc.com
       </A><BR>
    <I>Tue May 22 07:36:53 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047922.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
        <LI>Next message (by thread): <A HREF="047925.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47924">[ date ]</a>
              <a href="thread.html#47924">[ thread ]</a>
              <a href="subject.html#47924">[ subject ]</a>
              <a href="author.html#47924">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi All,

Thanks again Thomas for pointing me in the right direction with  
twisted and ZSI. I apologise if this is getting technically off-topic  
(ie. ZSI) but people seem to get more annoyed about cross posting.  
Berate me about that if it makes you feel better! If you still have  
the patience, I have one major problem that is bugging me:

At the moment, I have the following (test function) working fine  
within twisted and twistd:

def wsa_ProcessAip(self, ps, address, **kw):
     self.request, self.response = CPServiceWSRF.wsa_ProcessAip(self,  
ps, address, **kw)
     self.response._mode = False
     self.response._return = '127.0.0.1'
     return self.request, self.response

*However* I want to return a deferred from this method. I am not sure  
that this is easily possible as ZSI doesn't seem to be recognising a  
return value of either server.NOT_DONE_YET, or a deferred object. It  
is also forcing me to return a tuple containing the ZSI request and  
response objects which is confusing me as I want to return a  
deferred. My ideal would be:

def wsa_ProcessAip(self, ps, address, **kw):
     self.request, self.response = CPServiceWSRF.wsa_ProcessAip(self,  
ps, address, **kw)
     # Don't worry about there being nothing to call back this
     # In my reality it does get called back
     deferred = defer.Deferred()
     deferred.addBoth(self.aipBack)
     return deferred

def aipBack(self, result):
     ip, mode = result
     self.response._mode = mode
     self.response._return = ip
     return self.request, self.response

Is this possible? Scanning the ZSI twisted package, the only mention  
of a deferred object is in the client module. I am also puzzled with  
the 'Delayed Call Sweep' debug line. To me, this indicates some kind  
of deferred.

Thanks a lot for your time :)


Matt


On 21 May 2007, at 17:49, Thomas Jacob wrote:

&gt;<i> ZSI 2.0 has built-in twisted support...
</I>&gt;<i>
</I>&gt;<i> (see --twisted option for wsdl2py/dispatch)
</I>&gt;<i>
</I>&gt;<i> Client side usage:
</I>&gt;<i>
</I>&gt;<i> from MyService_services import *
</I>&gt;<i>
</I>&gt;<i> port = MyServiceLocator().getMyService(&quot;<A HREF="http://myhost/MyService">http://myhost/MyService</A>&quot;)
</I>&gt;<i> port.binding.defer = True
</I>&gt;<i>
</I>&gt;<i> msg = myMethodRequest()
</I>&gt;<i> msg.value =...
</I>&gt;<i> ...
</I>&gt;<i> deferred = port.myMethod(msg)
</I>&gt;<i> deferred.addCallback(....)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Server side usage:
</I>&gt;<i>
</I>&gt;<i> Use twisted.web and derive a service class from WSResource:
</I>&gt;<i>
</I>&gt;<i> The following should get you started:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://proj.badc.rl.ac.uk/ndg/browser/TI12-security/trunk/python/">http://proj.badc.rl.ac.uk/ndg/browser/TI12-security/trunk/python/</A> 
</I>&gt;<i> ndg.security.server/ndg/security/server/SessionMgr/server-config.tac
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, 2007-05-21 at 15:43 +0100, Matthew Glubb wrote:
</I>&gt;&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;&gt;<i> Hash: SHA1
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Apologies if this has been covered before but there seems to be a
</I>&gt;&gt;<i> dearth of documentation and examples on the net.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Does anyone have any tips for integrating ZSI with twisted? I am
</I>&gt;&gt;<i> struggling with the concept of the request / response objects and how
</I>&gt;&gt;<i> they relate to a twisted deferred object. Normally, under twisted, I
</I>&gt;&gt;<i> would return a deferred from the SOAP method call and let the reactor
</I>&gt;&gt;<i> take care of returning the response on callback/errback. How do I do
</I>&gt;&gt;<i> this using ZSI?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If anyone has got some *simple* example code, I'd love to see it. I
</I>&gt;&gt;<i> am not particularly concerned with general inter-operability, I am
</I>&gt;&gt;<i> more concerned with getting a particular SOAP client working with my
</I>&gt;&gt;<i> application. SOAPpy doesn't seem to be cutting the mustard, hence the
</I>&gt;&gt;<i> need to try ZSI.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Any tips *gratefully* received :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> m a t t h e w   g l u b b
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _____________________________________________________________________ 
</I>&gt;&gt;<i> ___
</I>&gt;&gt;<i> Z Group PLC
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tel: +44 (0) 8700 111 173
</I>&gt;&gt;<i> Fax: +44 (0) 8707 051 393
</I>&gt;&gt;<i> Txt: +44 (0) 7800 140 877
</I>&gt;&gt;<i> Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This  email  and  any  files  transmitted  with it are   
</I>&gt;&gt;<i> confidential and
</I>&gt;&gt;<i> intended solely for the use of the individual or entity to whom  
</I>&gt;&gt;<i> they are
</I>&gt;&gt;<i> addressed.  The opinions  expressed in this mail are those of the  
</I>&gt;&gt;<i> author
</I>&gt;&gt;<i> and do not necessarily  represent the views of the company.  If  
</I>&gt;&gt;<i> you have
</I>&gt;&gt;<i> received this email in error please notify &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;&gt;<i> Version: GnuPG v1.4.1 (Darwin)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> iD8DBQFGUbALyI6MkdKPngkRAtB7AJ9uSOBnIDBIxHCAcsw9XGt7TLzWjgCfbnhw
</I>&gt;&gt;<i> QBvvjGEhKT2AtEfhckjliNs=
</I>&gt;&gt;<i> =AnFA
</I>&gt;&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


m a t t h e w   g l u b b

________________________________________________________________________
Z Group PLC

Tel: +44 (0) 8700 111 173
Fax: +44 (0) 8707 051 393
Txt: +44 (0) 7800 140 877
Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;

This  email  and  any  files  transmitted  with it are  confidential and
intended solely for the use of the individual or entity to whom they are
addressed.  The opinions  expressed in this mail are those of the author
and do not necessarily  represent the views of the company.  If you have
received this email in error please notify &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGUvH4yI6MkdKPngkRAgKEAKCSaH+sOfF8M/DyqWCCz7Qy2YtYpQCgoZiH
zn42XMg+wNZvGsssTNr3tfg=
=WHLP
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047922.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
	<LI>Next message (by thread): <A HREF="047925.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47924">[ date ]</a>
              <a href="thread.html#47924">[ thread ]</a>
              <a href="subject.html#47924">[ subject ]</a>
              <a href="author.html#47924">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
