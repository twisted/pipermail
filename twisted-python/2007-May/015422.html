<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted &amp; ZSI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20%26%20ZSI&In-Reply-To=1179858153.15084.19.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015417.html">
   <LINK REL="Next"  HREF="015408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted &amp; ZSI</H1>
    <B>Matthew Glubb</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20%26%20ZSI&In-Reply-To=1179858153.15084.19.camel%40localhost"
       TITLE="[Twisted-Python] Twisted &amp; ZSI">matt at zgroupplc.com
       </A><BR>
    <I>Wed May 23 09:55:14 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015417.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
        <LI>Next message: <A HREF="015408.html">[Twisted-Python] Re: Tell us how you're using Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15422">[ date ]</a>
              <a href="thread.html#15422">[ thread ]</a>
              <a href="subject.html#15422">[ subject ]</a>
              <a href="author.html#15422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Thomas,

Thanks for your reply.

On 22 May 2007, at 19:22, Thomas Jacob wrote:

&gt;<i> Actually, I'm not using the built-in twisted dispatching system
</I>&gt;<i> of ZSI myself, so you probably will have to read the source
</I>&gt;<i> to find out these things :-)
</I>
Yes, I have been. With reference to deferreds, its not that  
illuminating :( From my investigations, I am beginning to suspect  
that whoever wrote the ZSI.twisted package overlooked the fact that  
someone might want to defer a server's response to a SOAP call. The  
callback handlers and chains may be disguising the use of deferreds  
though as ZSI.twisted.WSresource.WSResource.render_POST does return  
server.NOT_DONE_YET.

&gt;<i> Alternatively you might just want to try to ask that question again on
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pywebsvcs-talk at lists.sourceforge.net</A> where the authors of ZSI post
</I>&gt;<i> regularly, they are generally very helpful....
</I>
I'll do just that :)

&gt;<i> But it's also pretty easy to build your own ZSI/twisted dispatcher,
</I>&gt;<i> that's
</I>&gt;<i> what I am doing (executing the method calls in separate threads,  
</I>&gt;<i> handing
</I>&gt;<i> deferred execution back the twisted reactor when I need deferreds,
</I>&gt;<i> waiting on a lock till the results come in) , I could mail you a rough
</I>&gt;<i> example if you like...
</I>
Yes, that makes sense. I'd really like to use twistd as the service  
container rather than ZSI (I am just more familiar with twisted) if I  
can but I might come sheepishly knocking at your door should I fail ;)

Regards


Matt

&gt;<i>
</I>&gt;<i> On Tue, 2007-05-22 at 14:36 +0100, Matthew Glubb wrote:
</I>&gt;&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;&gt;<i> Hash: SHA1
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks again Thomas for pointing me in the right direction with
</I>&gt;&gt;<i> twisted and ZSI. I apologise if this is getting technically off-topic
</I>&gt;&gt;<i> (ie. ZSI) but people seem to get more annoyed about cross posting.
</I>&gt;&gt;<i> Berate me about that if it makes you feel better! If you still have
</I>&gt;&gt;<i> the patience, I have one major problem that is bugging me:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> At the moment, I have the following (test function) working fine
</I>&gt;&gt;<i> within twisted and twistd:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def wsa_ProcessAip(self, ps, address, **kw):
</I>&gt;&gt;<i>      self.request, self.response = CPServiceWSRF.wsa_ProcessAip(self,
</I>&gt;&gt;<i> ps, address, **kw)
</I>&gt;&gt;<i>      self.response._mode = False
</I>&gt;&gt;<i>      self.response._return = '127.0.0.1'
</I>&gt;&gt;<i>      return self.request, self.response
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *However* I want to return a deferred from this method. I am not sure
</I>&gt;&gt;<i> that this is easily possible as ZSI doesn't seem to be recognising a
</I>&gt;&gt;<i> return value of either server.NOT_DONE_YET, or a deferred object. It
</I>&gt;&gt;<i> is also forcing me to return a tuple containing the ZSI request and
</I>&gt;&gt;<i> response objects which is confusing me as I want to return a
</I>&gt;&gt;<i> deferred. My ideal would be:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def wsa_ProcessAip(self, ps, address, **kw):
</I>&gt;&gt;<i>      self.request, self.response = CPServiceWSRF.wsa_ProcessAip(self,
</I>&gt;&gt;<i> ps, address, **kw)
</I>&gt;&gt;<i>      # Don't worry about there being nothing to call back this
</I>&gt;&gt;<i>      # In my reality it does get called back
</I>&gt;&gt;<i>      deferred = defer.Deferred()
</I>&gt;&gt;<i>      deferred.addBoth(self.aipBack)
</I>&gt;&gt;<i>      return deferred
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> def aipBack(self, result):
</I>&gt;&gt;<i>      ip, mode = result
</I>&gt;&gt;<i>      self.response._mode = mode
</I>&gt;&gt;<i>      self.response._return = ip
</I>&gt;&gt;<i>      return self.request, self.response
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is this possible? Scanning the ZSI twisted package, the only mention
</I>&gt;&gt;<i> of a deferred object is in the client module. I am also puzzled with
</I>&gt;&gt;<i> the 'Delayed Call Sweep' debug line. To me, this indicates some kind
</I>&gt;&gt;<i> of deferred.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks a lot for your time :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Matt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 21 May 2007, at 17:49, Thomas Jacob wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ZSI 2.0 has built-in twisted support...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> (see --twisted option for wsdl2py/dispatch)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Client side usage:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> from MyService_services import *
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> port = MyServiceLocator().getMyService(&quot;<A HREF="http://myhost/MyService&quot;">http://myhost/MyService&quot;</A>)
</I>&gt;&gt;&gt;<i> port.binding.defer = True
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> msg = myMethodRequest()
</I>&gt;&gt;&gt;<i> msg.value =...
</I>&gt;&gt;&gt;<i> ...
</I>&gt;&gt;&gt;<i> deferred = port.myMethod(msg)
</I>&gt;&gt;&gt;<i> deferred.addCallback(....)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Server side usage:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Use twisted.web and derive a service class from WSResource:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The following should get you started:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="http://proj.badc.rl.ac.uk/ndg/browser/TI12-security/trunk/python/">http://proj.badc.rl.ac.uk/ndg/browser/TI12-security/trunk/python/</A>
</I>&gt;&gt;&gt;<i> ndg.security.server/ndg/security/server/SessionMgr/server-config.tac
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Mon, 2007-05-21 at 15:43 +0100, Matthew Glubb wrote:
</I>&gt;&gt;&gt;&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;&gt;&gt;&gt;<i> Hash: SHA1
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi All,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Apologies if this has been covered before but there seems to be a
</I>&gt;&gt;&gt;&gt;<i> dearth of documentation and examples on the net.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Does anyone have any tips for integrating ZSI with twisted? I am
</I>&gt;&gt;&gt;&gt;<i> struggling with the concept of the request / response objects  
</I>&gt;&gt;&gt;&gt;<i> and how
</I>&gt;&gt;&gt;&gt;<i> they relate to a twisted deferred object. Normally, under  
</I>&gt;&gt;&gt;&gt;<i> twisted, I
</I>&gt;&gt;&gt;&gt;<i> would return a deferred from the SOAP method call and let the  
</I>&gt;&gt;&gt;&gt;<i> reactor
</I>&gt;&gt;&gt;&gt;<i> take care of returning the response on callback/errback. How do  
</I>&gt;&gt;&gt;&gt;<i> I do
</I>&gt;&gt;&gt;&gt;<i> this using ZSI?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If anyone has got some *simple* example code, I'd love to see it. I
</I>&gt;&gt;&gt;&gt;<i> am not particularly concerned with general inter-operability, I am
</I>&gt;&gt;&gt;&gt;<i> more concerned with getting a particular SOAP client working  
</I>&gt;&gt;&gt;&gt;<i> with my
</I>&gt;&gt;&gt;&gt;<i> application. SOAPpy doesn't seem to be cutting the mustard,  
</I>&gt;&gt;&gt;&gt;<i> hence the
</I>&gt;&gt;&gt;&gt;<i> need to try ZSI.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Any tips *gratefully* received :)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Matt
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> m a t t h e w   g l u b b
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> ___________________________________________________________________ 
</I>&gt;&gt;&gt;&gt;<i> __
</I>&gt;&gt;&gt;&gt;<i> ___
</I>&gt;&gt;&gt;&gt;<i> Z Group PLC
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Tel: +44 (0) 8700 111 173
</I>&gt;&gt;&gt;&gt;<i> Fax: +44 (0) 8707 051 393
</I>&gt;&gt;&gt;&gt;<i> Txt: +44 (0) 7800 140 877
</I>&gt;&gt;&gt;&gt;<i> Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This  email  and  any  files  transmitted  with it are
</I>&gt;&gt;&gt;&gt;<i> confidential and
</I>&gt;&gt;&gt;&gt;<i> intended solely for the use of the individual or entity to whom
</I>&gt;&gt;&gt;&gt;<i> they are
</I>&gt;&gt;&gt;&gt;<i> addressed.  The opinions  expressed in this mail are those of the
</I>&gt;&gt;&gt;&gt;<i> author
</I>&gt;&gt;&gt;&gt;<i> and do not necessarily  represent the views of the company.  If
</I>&gt;&gt;&gt;&gt;<i> you have
</I>&gt;&gt;&gt;&gt;<i> received this email in error please notify &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;&gt;&gt;&gt;<i> Version: GnuPG v1.4.1 (Darwin)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> iD8DBQFGUbALyI6MkdKPngkRAtB7AJ9uSOBnIDBIxHCAcsw9XGt7TLzWjgCfbnhw
</I>&gt;&gt;&gt;&gt;<i> QBvvjGEhKT2AtEfhckjliNs=
</I>&gt;&gt;&gt;&gt;<i> =AnFA
</I>&gt;&gt;&gt;&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> m a t t h e w   g l u b b
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _____________________________________________________________________ 
</I>&gt;&gt;<i> ___
</I>&gt;&gt;<i> Z Group PLC
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tel: +44 (0) 8700 111 173
</I>&gt;&gt;<i> Fax: +44 (0) 8707 051 393
</I>&gt;&gt;<i> Txt: +44 (0) 7800 140 877
</I>&gt;&gt;<i> Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This  email  and  any  files  transmitted  with it are   
</I>&gt;&gt;<i> confidential and
</I>&gt;&gt;<i> intended solely for the use of the individual or entity to whom  
</I>&gt;&gt;<i> they are
</I>&gt;&gt;<i> addressed.  The opinions  expressed in this mail are those of the  
</I>&gt;&gt;<i> author
</I>&gt;&gt;<i> and do not necessarily  represent the views of the company.  If  
</I>&gt;&gt;<i> you have
</I>&gt;&gt;<i> received this email in error please notify &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;&gt;<i> Version: GnuPG v1.4.1 (Darwin)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> iD8DBQFGUvH4yI6MkdKPngkRAgKEAKCSaH+sOfF8M/DyqWCCz7Qy2YtYpQCgoZiH
</I>&gt;&gt;<i> zn42XMg+wNZvGsssTNr3tfg=
</I>&gt;&gt;<i> =WHLP
</I>&gt;&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


m a t t h e w   g l u b b

________________________________________________________________________
Z Group PLC

Tel: +44 (0) 8700 111 173
Fax: +44 (0) 8707 051 393
Txt: +44 (0) 7800 140 877
Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;

This  email  and  any  files  transmitted  with it are  confidential and
intended solely for the use of the individual or entity to whom they are
addressed.  The opinions  expressed in this mail are those of the author
and do not necessarily  represent the views of the company.  If you have
received this email in error please notify &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGVEfCyI6MkdKPngkRAhOdAJ9E7Lo66q7Yr4lvyPaCvAlUt1GbgQCeNTDP
f3n+IuokHoymBVFlXwqJS2c=
=l/Xz
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015417.html">[Twisted-Python] Twisted &amp; ZSI
</A></li>
	<LI>Next message: <A HREF="015408.html">[Twisted-Python] Re: Tell us how you're using Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15422">[ date ]</a>
              <a href="thread.html#15422">[ thread ]</a>
              <a href="subject.html#15422">[ subject ]</a>
              <a href="author.html#15422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
