<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted server is 5 times SLOWER on Solaris	thanLinux?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20server%20is%205%20times%20SLOWER%20on%20Solaris%0A%09thanLinux%3F&In-Reply-To=%3C5AD9DC1AD1BC4241A8AB56D46DE5DFA80B5A88D6%40ehost011-6.exch011.intermedia.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047180.html">
   <LINK REL="Next"  HREF="047185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted server is 5 times SLOWER on Solaris	thanLinux?</H1>
    <B>Jacob Gabrielson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20server%20is%205%20times%20SLOWER%20on%20Solaris%0A%09thanLinux%3F&In-Reply-To=%3C5AD9DC1AD1BC4241A8AB56D46DE5DFA80B5A88D6%40ehost011-6.exch011.intermedia.net%3E"
       TITLE="[Twisted-Python] Twisted server is 5 times SLOWER on Solaris	thanLinux?">jacob at cozi.com
       </A><BR>
    <I>Thu Jan 18 17:20:52 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047180.html">[Twisted-Python] Twisted server is 5 times SLOWER on Solaris than	Linux?
</A></li>
        <LI>Next message (by thread): <A HREF="047185.html">[Twisted-Python] Twisted server is 5 times SLOWER on Solaris	thanLinux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47181">[ date ]</a>
              <a href="thread.html#47181">[ thread ]</a>
              <a href="subject.html#47181">[ subject ]</a>
              <a href="author.html#47181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It would be interesting to know where the CPU time is actually going.
&gt;<i>From what I've seen of this thread, performance is worst on the SPARC
</I>hardware, but that doesn't necessarily mean that it's the root cause.
It may be, e.g., the implementation of some service call for that
hardware is especially slow.  Do you have any profiling information that
shows whether the CPU time is spent in Twisted code itself, or in some
system call that it's making?
 
BTW, the fact that you get 1k+ connections/s on the x86 hardware is
still slow (if you're just running benchmarking code that isn't doing
any work per request).  With epoll you should be able to get way more
than that.
 
Just my $.02,
 
-- Jacob

________________________________

From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>
[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>] On Behalf Of Jarrod
Roberson
Sent: Thursday, January 18, 2007 2:11 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] Twisted server is 5 times SLOWER on
Solaris thanLinux?




On 1/18/07, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A>&gt; wrote: 

	On 01:59 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jarrod at vertigrated.com</A> wrote:
	
	&gt;We have LOTS and LOTS of test harness code and profiling code
to pinpoint 
	&gt;where bottlenecks are. We are going to have process a couple of
terabytes a
	&gt;day thru this system. Latency thru the system is a high
priority because of
	&gt;what kind of system it is.
	
	If you do manage to keep Twisted in the loop on this project,
please share what strategy you used.  It is unfortunately rare that
Twisted is itself a really performance-critical component of any system
(especially a highly parallel system), so information about optimization
is hard to find. 
	


It isn't really a failing of Twisted, on non-sparc hardware it preforms
awesome! The SPARC hardware is the problem, and the T1000 / T2000 we
have be benchmarking just doesn't place nice with single threaded CPU
bound apps. 

We are going to try and replace Twisted with Apache 2.2.x and create a
module that does raw connection handliing, and go with the threaded mpm
and see how that preforms with the same test client harness we are
benchmarking with now. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20070118/e47b97b4/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047180.html">[Twisted-Python] Twisted server is 5 times SLOWER on Solaris than	Linux?
</A></li>
	<LI>Next message (by thread): <A HREF="047185.html">[Twisted-Python] Twisted server is 5 times SLOWER on Solaris	thanLinux?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47181">[ date ]</a>
              <a href="thread.html#47181">[ thread ]</a>
              <a href="subject.html#47181">[ subject ]</a>
              <a href="author.html#47181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
