<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] trac / website woes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20trac%20/%20website%20woes&In-Reply-To=%3C20070113235545.11447.228742069.divmod.quotient.15750%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047139.html">
   <LINK REL="Next"  HREF="047182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] trac / website woes</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20trac%20/%20website%20woes&In-Reply-To=%3C20070113235545.11447.228742069.divmod.quotient.15750%40ohm%3E"
       TITLE="[Twisted-Python] trac / website woes">exarkun at divmod.com
       </A><BR>
    <I>Sat Jan 13 16:55:45 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047139.html">[Twisted-Python] trac / website woes
</A></li>
        <LI>Next message (by thread): <A HREF="047182.html">[Twisted-Python] trac / website woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47141">[ date ]</a>
              <a href="thread.html#47141">[ thread ]</a>
              <a href="subject.html#47141">[ subject ]</a>
              <a href="author.html#47141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 13 Jan 2007 18:09:45 +0000 (UTC), Matthias Urlichs &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">smurf at smurf.noris.de</A>&gt; wrote:
&gt;<i>I hate Trac. Especially the one on twistedmatrix.
</I>&gt;<i>
</I>&gt;<i>- My previous login (&quot;smurfix&quot;) seems to suffer from a lost password. The
</I>&gt;<i>website does not have an obvious place to request it.
</I>
It doesn't have a non-obvious way, either.

&gt;<i>
</I>&gt;<i>- I tried to create a new login. Reporting a bug with it requires an email
</I>&gt;<i>address. The page to enter the email address does not have a Submit button.
</I>
Coincidentally, I fixed both of these problems a couple hours ago.

&gt;<i>
</I>&gt;<i>- Not entering login data results in an empty page.
</I>&gt;<i>
</I>
I don't think we're going to do anything about that.

&gt;<i>On to the real bug; somebody else can enter it into Trac.
</I>&gt;<i>Or, even better, fix the source.
</I>&gt;<i>
</I>&gt;<i>It seems that Deferreds are tricky.
</I>
Heh. :)

&gt;<i>
</I>&gt;<i>--- /usr/lib/python2.4/site-packages/twisted/spread/pb.py	2006-05-12 15:50:13.000000000 +0200
</I>&gt;<i>+++ /tmp/pb.py	2007-01-13 18:48:50.508925924 +0100
</I>&gt;<i>@@ -651,6 +651,9 @@
</I>&gt;<i>     def notifyOnDisconnect(self, notifier):
</I>&gt;<i>         &quot;&quot;&quot;Call the given callback when the Broker disconnects.&quot;&quot;&quot;
</I>&gt;<i>         assert callable(notifier)
</I>&gt;<i>-        self.disconnects.append(notifier)
</I>&gt;<i>+        if self.disconnected:
</I>&gt;<i>+            notifier()
</I>&gt;<i>+        else:
</I>&gt;<i>+            self.disconnects.append(notifier)
</I>&gt;<i>
</I>&gt;<i>     def notifyOnFail(self, notifier):
</I>&gt;<i>
</I>&gt;<i>... as exemplified by this traceback:
</I>&gt;<i>
</I>&gt;<i>2007/01/13 18:26 CET [Broker,0,127.0.0.1] Error: &lt;twisted.python.failure.Failure twisted.spread.pb.PBConnectionLost&gt;
</I>&gt;<i>2007/01/13 18:26 CET [Broker,0,127.0.0.1] [Failure instance: Traceback (failure with no frames): twisted.spread.pb.PBConnectionLost: [Failure instance: Traceback (failure with no frames): twisted.internet.error.ConnectionDone: Connection was closed cleanly.
</I>&gt;<i>2007/01/13 18:26 CET [Broker,0,127.0.0.1] ]
</I>&gt;<i>2007/01/13 18:26 CET [Broker,0,127.0.0.1] ]
</I>&gt;<i>2007/01/13 18:27 CET [Broker,1,127.0.0.1] Looking for 00:11:d8:54:e6:2d
</I>&gt;<i>2007/01/13 18:27 CET [-] Peer will receive following PB traceback:
</I>&gt;<i>2007/01/13 18:27 CET [-] Traceback (most recent call last):
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/internet/posixbase.py&quot;, line 226, in mainLoop
</I>&gt;<i>            self.runUntilCurrent()
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/internet/base.py&quot;, line 534, in runUntilCurrent
</I>&gt;<i>            f(*a, **kw)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/internet/defer.py&quot;, line 229, in callback
</I>&gt;<i>            self._startRunCallbacks(result)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/internet/defer.py&quot;, line 294, in _startRunCallbacks
</I>&gt;<i>            self._runCallbacks()
</I>&gt;<i>        --- &lt;exception caught here&gt; ---
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/internet/defer.py&quot;, line 307, in _runCallbacks
</I>&gt;<i>            self.result = callback(self.result, *args, **kw)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/spread/pb.py&quot;, line 1747, in _loggedIn
</I>&gt;<i>            self.portalWrapper.broker.notifyOnDisconnect(logout)
</I>&gt;<i>          File &quot;/usr/lib/python2.4/site-packages/twisted/spread/pb.py&quot;, line 654, in notifyOnDisconnect
</I>&gt;<i>            self.disconnects.append(notifier)
</I>&gt;<i>        exceptions.AttributeError: 'NoneType' object has no attribute 'append'
</I>&gt;<i>
</I>
Can you clarify the misbehavior you're reporting?  It looks to me like this
can only occur when the connection is lost between when an avatar is received
and when it is passed to the client-side cred callback, which seems like a
vanishingly small window to me.  Not suggesting this isn't a problem, just
that perhaps I don't understand it. :)

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047139.html">[Twisted-Python] trac / website woes
</A></li>
	<LI>Next message (by thread): <A HREF="047182.html">[Twisted-Python] trac / website woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47141">[ date ]</a>
              <a href="thread.html#47141">[ thread ]</a>
              <a href="subject.html#47141">[ subject ]</a>
              <a href="author.html#47141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
