<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted and gprs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20and%20gprs&In-Reply-To=%3C45A2A7D6.3030403%40imperial.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047082.html">
   <LINK REL="Next"  HREF="047084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted and gprs</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20and%20gprs&In-Reply-To=%3C45A2A7D6.3030403%40imperial.ac.uk%3E"
       TITLE="[Twisted-Python] twisted and gprs">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Mon Jan  8 13:21:42 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047082.html">[Twisted-Python] twisted and gprs
</A></li>
        <LI>Next message (by thread): <A HREF="047084.html">[Twisted-Python] twisted and gprs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47083">[ date ]</a>
              <a href="thread.html#47083">[ thread ]</a>
              <a href="subject.html#47083">[ subject ]</a>
              <a href="author.html#47083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John Aherne wrote:
&gt;<i> Thanks to Phil, Carl and JPCalderone for the replies.
</I>&gt;<i> 
</I>&gt;<i> I'll try and answer them by explaining more clearly what I am trying to 
</I>&gt;<i> do. And explaining some terms that I were vague.
</I>&gt;<i> 
</I>&gt;<i> The sessions are a connection that I need to keep open -  a combination 
</I>&gt;<i> of IP address and source port no - so the server can use the source port 
</I>&gt;<i> number that the PDA used when making the initial connection. The PDA 
</I>
You only need to do this with UDP or other connection-less protocols. 
TCP will bind the connection and do the tracking for you.

&gt;<i> will need to block on the TCPIP socket waiting for messages to be sent 
</I>&gt;<i> to it. It will process the message and then wait again. Provided the PDA 
</I>&gt;<i> does not close the socket and lose the connection with the original port 
</I>&gt;<i> no, the firewall will let the conversation keep going.
</I>
You will need keepalives for this, but yes.

&gt;<i> 
</I>&gt;<i> The server will send on the initial source/destination port nos and not 
</I>
Again, TCP does this automatically

&gt;<i> close the connection. This way the PDA can still be contacted over a 
</I>&gt;<i> long period of time. Because the PDA is behind the network firewall, if 
</I>&gt;<i> the original port used by the PDA is lost, the server can no longer send 
</I>&gt;<i> data to the PDA, since the firewall will not let the traffic through 
</I>&gt;<i> even though the IP address had not changed.
</I>&gt;<i> 
</I>&gt;<i> As Carl pointed out I will need more than the IP address to identify the 
</I>&gt;<i> PDA. I will need an ID from the PDA that is unique so that if the PDA 
</I>&gt;<i> comes back in with a different IP address I can pick that up, drop the 
</I>&gt;<i> existing IP/port no if I still have it and register it with it's new IP 
</I>&gt;<i> address and source port no.
</I>&gt;<i> 
</I>&gt;<i> As i write this down, explaining it to myself as much as anyone else, I 
</I>&gt;<i> think to myself that the mechanics look very much like an irc 
</I>&gt;<i> connection. I might be wrong so please let me know.
</I>
I don't know why you're bringing up IRC. IRC uses TCP, so no port-number 
bookkeeping will be required.

&gt;<i> 
</I>&gt;<i> The server will need to ping the PDA to confirm the connection is still 
</I>
Again, TCP keepalives

&gt;<i> there. If lost it will deregister the PDA and wait for it to reconnect 
</I>&gt;<i> again. What I am not sure about with irc is whether I can keep hold of 
</I>&gt;<i> the port no used by the PDA as its source port and maintain the 
</I>&gt;<i> connection with the IP address/port no combination.
</I>
Again, IRC uses TCP which does this all automatically. Forget about the 
port numbers.

&gt;<i> 
</I>&gt;<i> What I would like is if I can find a framework that does most of the 
</I>&gt;<i> heavy work with the communications. I can then find a suitable point to 
</I>&gt;<i> make some not too difficult changes to accommodate my requirements.
</I>&gt;<i> 
</I>&gt;<i> I have done a very simple test using the socket library to confirm that 
</I>&gt;<i> the basics do work. The connection stays open and as long as I do not 
</I>&gt;<i> close the socket connection at either end and use the same 
</I>&gt;<i> source/destination port numbers the traffic flows.And I can push data 
</I>&gt;<i> without the PDA having to initiate new connections and requesting data.
</I>&gt;<i> 
</I>&gt;<i> I hope this a better explanation than my first post. I am sure there 
</I>&gt;<i> will still be bits that might not be clear so let me know and I will 
</I>&gt;<i> fill in any gaps.
</I>&gt;<i> 
</I>&gt;<i> If it is clear,  what I am looking to find out is which bits of twisted 
</I>&gt;<i> I would need to use and what parts would need changing and to what extent.
</I>&gt;<i> 
</I>&gt;<i> One final note, there could be around 100 of the PDAs to look after.
</I>
That's a tiny number.

Just have each PDA make a TCP connection to the server. Enable TCP 
keepalives on both the client and on the server ends of the connection. 
Have the first operation on a new TCP connection be a &quot;login&quot; i.e. PDA 
says here is my ID, server maps the ID to a TCP connection. Have your 
server message distribution look up the current TCP connection for a 
given ID and send the message.

It's a trivial application.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047082.html">[Twisted-Python] twisted and gprs
</A></li>
	<LI>Next message (by thread): <A HREF="047084.html">[Twisted-Python] twisted and gprs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47083">[ date ]</a>
              <a href="thread.html#47083">[ thread ]</a>
              <a href="subject.html#47083">[ subject ]</a>
              <a href="author.html#47083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
