<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: More on PB Copyable Errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20More%20on%20PB%20Copyable%20Errors&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009260.html">
   <LINK REL="Next"  HREF="009262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: More on PB Copyable Errors</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20More%20on%20PB%20Copyable%20Errors&In-Reply-To="
       TITLE="[Twisted-Python] Re: More on PB Copyable Errors">db3l at fitlinxx.com
       </A><BR>
    <I>Wed Dec 29 14:15:57 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009260.html">[Twisted-Python] Re: More on PB Copyable Errors
</A></li>
        <LI>Next message: <A HREF="009262.html">[Twisted-Python] Re: More on PB Copyable Errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9261">[ date ]</a>
              <a href="thread.html#9261">[ thread ]</a>
              <a href="subject.html#9261">[ subject ]</a>
              <a href="author.html#9261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Justin Johnson &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">justinjohnson at gmail.com</A>&gt; writes:

&gt;<i> Attached is a patch with modifications to pb.py and jelly.py.  With
</I>&gt;<i> the patch applied, CopyableFailure.getStateToCopy first checks to see
</I>&gt;<i> if the actual exception instance's class has an unjellyable registered
</I>&gt;<i> so it can be unjellied on the other side.  If it does, the actual
</I>&gt;<i> exception instance is passed back as failure.value.  Otherwise a
</I>&gt;<i> string representation is passed back as it is today.
</I>
I think the one big risk with this approach is that I'm not sure a
sender can ever know accurately whether a recipient will be able to
unjelly a particular instance.  In your case, you're assuming the two
sides are symmetrical and have imported the same definitions, but that
need not be the case.  At least in general, it's certainly possible
for the transmitting side to not have the unjellier registered (if it
never expects to receive such objects back, for example).  Or
conversely, the sender may have an unjellier registered but the
recipient won't.  In this latter case you'd get an exception on the
remote side which sending the string would have avoided.

One alternative approach to handle this is to transmit both the string
and instance representation, and then let the decoding side trap any
unjellier security exceptions and fall back to the string
representation.  The big question of course is whether such a fallback
should be automatic, silent, etc..

Another option would be to provide some sort of configurability
(perhaps something along the lines of how unsafe traceback support is
handled) so an application could make the choice of what mode to
operate in, either string names, or full instances (and the latter
just has to have unjelliers registered just as for any other remotes).

I'm sort of in the same state you are in, in that for me the simplest
approach is just transmit the instance because my two sides are in
fact symmetric.  So the short internal change to local source works
fine for me too.  But I think that any general addition to the twisted
base needs to take the more general proposition (and issues) into account.

-- David



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009260.html">[Twisted-Python] Re: More on PB Copyable Errors
</A></li>
	<LI>Next message: <A HREF="009262.html">[Twisted-Python] Re: More on PB Copyable Errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9261">[ date ]</a>
              <a href="thread.html#9261">[ thread ]</a>
              <a href="subject.html#9261">[ subject ]</a>
              <a href="author.html#9261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
