<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] More on PB Copyable Errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20More%20on%20PB%20Copyable%20Errors&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009253.html">
   <LINK REL="Next"  HREF="009256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] More on PB Copyable Errors</H1>
    <B>Justin Johnson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20More%20on%20PB%20Copyable%20Errors&In-Reply-To="
       TITLE="[Twisted-Python] More on PB Copyable Errors">justinjohnson at gmail.com
       </A><BR>
    <I>Tue Dec 28 15:32:04 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="009253.html">[Twisted-Python] microdom bug
</A></li>
        <LI>Next message: <A HREF="009256.html">[Twisted-Python] Re: More on PB Copyable Errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9255">[ date ]</a>
              <a href="thread.html#9255">[ thread ]</a>
              <a href="subject.html#9255">[ subject ]</a>
              <a href="author.html#9255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I would really like to be able to pass custom exceptions over the wire
in PB.  Previous discussion on this list ended with the conclusion
that it currently isn't possible without hacking a local copy of
Twisted.

I have done that to get the result I want, with minimal testing, and
would like to get some discussion going around this topic.  Attached
are 3 test files, s.py for the server, c.py for the client, and e.py
for the error definitions which are imported by both s.py and c.py. 
If I make the following modification to my local copy of
twisted/spread/pb.py in the CopyableFailure's getStateToCopy method,
the custom error is passed back as I want.

   #state['value'] = str(self.value) # Exception instance
   state['value'] = self.value # Exception instance

I was wondering if there is a reason we wouldn't want to change the
code to check for registered unjellyables for the exception, and
return them (or rather go through the jelly/unjelly process) if they
exist, but return the string representation otherwise.  Maybe that is
more complicated than I realize.

Any thoughts or suggestions on how we might make this possible?
Thanks.
-Justin


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009253.html">[Twisted-Python] microdom bug
</A></li>
	<LI>Next message: <A HREF="009256.html">[Twisted-Python] Re: More on PB Copyable Errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9255">[ date ]</a>
              <a href="thread.html#9255">[ thread ]</a>
              <a href="subject.html#9255">[ subject ]</a>
              <a href="author.html#9255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
