<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Request.getClient
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request.getClient&In-Reply-To=%3C20140702185524.6611.52220651.divmod.xquotient.171%40top%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028497.html">
   <LINK REL="Next"  HREF="028499.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Request.getClient</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Request.getClient&In-Reply-To=%3C20140702185524.6611.52220651.divmod.xquotient.171%40top%3E"
       TITLE="[Twisted-Python] Request.getClient">exarkun at twistedmatrix.com
       </A><BR>
    <I>Wed Jul  2 12:55:24 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028497.html">[Twisted-Python] Request.getClient
</A></li>
        <LI>Next message: <A HREF="028499.html">[Twisted-Python] Request.getClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28498">[ date ]</a>
              <a href="thread.html#28498">[ thread ]</a>
              <a href="subject.html#28498">[ subject ]</a>
              <a href="author.html#28498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06:26 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dustin at v.igoro.us</A> wrote:
&gt;<i>Actually, the apidocs say &quot;Undocumented&quot;, so I think you could make it
</I>&gt;<i>return u&quot;The &#127765; is made of green &#37226; &quot; and still be in spec.
</I>&gt;<i>
</I>&gt;<i><A HREF="http://twistedmatrix.com/documents/14.0.0/api/twisted.web.http.Request.html#getClient">http://twistedmatrix.com/documents/14.0.0/api/twisted.web.http.Request.html#getClient</A>
</I>
The interface is documented:

<A HREF="https://twistedmatrix.com/documents/14.0.0/api/twisted.web.iweb.IRequest.html#getClient">https://twistedmatrix.com/documents/14.0.0/api/twisted.web.iweb.IRequest.html#getClient</A>

(as deprecated, already).

Also, we generally give some weight to how an implementation actually 
behaves - even if the documentation is lacking or contradictory.

If you ignore incorrect docs and figure out how to use an API so it 
works, you could conceivably have working software.  Twisted tries not 
to break such code.

If you ignore how the implementation actually behaves and blindly trust 
the documentation (sorry, wish you could do that) then your software 
probably doesn't work.  Since it's probably already broken, Twisted 
isn't as concerned making changes that might break it more or 
differently.

Jean-Paul
&gt;<i>Dustin
</I>&gt;<i>
</I>&gt;<i>On Wed, Jul 2, 2014 at 12:26 PM,  &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i>Hello all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>twisted.web.http.Request.getClient has a terrible implementation.  It 
</I>&gt;&gt;<i>does
</I>&gt;&gt;<i>blocking network I/O (DNS).  Fortunately it is only used in one place 
</I>&gt;&gt;<i>in
</I>&gt;&gt;<i>Twisted - the CGI implementation.  Unfortunately this makes the CGI
</I>&gt;&gt;<i>implementation somewhat unsuited for real-world use.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>`Request.getClient` has always been allowed to return `None` under 
</I>&gt;&gt;<i>certain
</I>&gt;&gt;<i>circumstances.  I propose making it always return `None` and 
</I>&gt;&gt;<i>deprecating it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This is implemented in the branch linked to &lt;<A HREF="https://tm.tl/2252">https://tm.tl/2252</A>&gt;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Chris Armstrong suggested that this change might not be strictly 
</I>&gt;&gt;<i>keeping
</I>&gt;&gt;<i>with our backwards compatibility policy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I suggest that either it is - because `None` was always a possible 
</I>&gt;&gt;<i>return
</I>&gt;&gt;<i>value - or that removing the possibility of blocking I/O from 
</I>&gt;&gt;<i>applications
</I>&gt;&gt;<i>that are mistakenly using this API makes it worth the not-
</I>&gt;&gt;<i>strictly-compatible change.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>A minor adjustment might be to make it always return the IP address 
</I>&gt;&gt;<i>instead,
</I>&gt;&gt;<i>as this was another behavior it previously had.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Please comment.  Thanks.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Jean-Paul
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;<i>Twisted-Python mailing list
</I>&gt;&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-Python mailing list
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028497.html">[Twisted-Python] Request.getClient
</A></li>
	<LI>Next message: <A HREF="028499.html">[Twisted-Python] Request.getClient
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28498">[ date ]</a>
              <a href="thread.html#28498">[ thread ]</a>
              <a href="subject.html#28498">[ subject ]</a>
              <a href="author.html#28498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
