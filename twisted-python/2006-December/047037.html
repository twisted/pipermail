<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SSL problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SSL%20problem&In-Reply-To=%3C20061221160434.20948.209791580.divmod.quotient.85529%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047036.html">
   <LINK REL="Next"  HREF="047041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SSL problem</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SSL%20problem&In-Reply-To=%3C20061221160434.20948.209791580.divmod.quotient.85529%40ohm%3E"
       TITLE="[Twisted-Python] SSL problem">exarkun at divmod.com
       </A><BR>
    <I>Thu Dec 21 09:04:34 MST 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047036.html">[Twisted-Python] SSL problem
</A></li>
        <LI>Next message (by thread): <A HREF="047041.html">[Twisted-Python] SSL problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47037">[ date ]</a>
              <a href="thread.html#47037">[ thread ]</a>
              <a href="subject.html#47037">[ subject ]</a>
              <a href="author.html#47037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 21 Dec 2006 09:32:22 -0600, Steve Freitas &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sflist at ihonk.com</A>&gt; wrote:
&gt;<i>Thanks for the response, JP.
</I>&gt;<i>
</I>&gt;<i>On Thu, 2006-12-21 at 09:54 -0500, Jean-Paul Calderone wrote:
</I>&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;&gt;<i> I'd _guess_ your context object isn't configured
</I>&gt;&gt;<i> quite right.
</I>&gt;<i>
</I>&gt;<i>IOW, there's something wrong with the key/cert I'm feeding it? Calling
</I>&gt;<i>ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
</I>&gt;&gt;<i>SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
</I>&gt;<i>wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
</I>&gt;<i>stunnel as well.
</I>
It's possible (in fact, likely) you need to do something other than just
create the DefaultOpenSSLContextFactory, too.  There are a lot of dials
and knobs here - the context factory you're using works okay for a lot of
cases, but it isn't appropriate for all cases.

You have two pieces of data which are yours -  your private key and your
certificate (which is a csr signed by RapidSSL).  The client needs (at
least) one more piece of information, though - RapidSSL's certificate.

Try this.  Put RapidSSL's certificate into a file, subclass
DefaultOpenSSLContextFactory, override cacheContext, and on self._context,
call use_certificate_chain_file with the name of the file you put RapidSSL's
certificate into.

This causes the server to include it in the handshake which is often
required for clients to accept your certificate as valid.

&gt;<i>
</I>&gt;&gt;<i> At the very least, you
</I>&gt;&gt;<i> should share the SSL errors which are occurring.
</I>&gt;<i>
</I>&gt;<i>How do I get at these? I didn't see any tracebacks being tossed. I'm
</I>&gt;<i>using 2.4.0.
</I>
At some point, I think connectionLost for SSL connections was adjusted
so that the SSL exception would be available.  However, the important
information is going to be on the client side, so unless that is using
Twisted as well (it sounds to me as though it is not), this won't help
you.  How to extract the extra information will depend on what software
is acting as the client.  Hopefully the above suggestion will resolve the
problem, though.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047036.html">[Twisted-Python] SSL problem
</A></li>
	<LI>Next message (by thread): <A HREF="047041.html">[Twisted-Python] SSL problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47037">[ date ]</a>
              <a href="thread.html#47037">[ thread ]</a>
              <a href="subject.html#47037">[ subject ]</a>
              <a href="author.html#47037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
