<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] The Python 2.7 Plan
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20The%20Python%202.7%20Plan&In-Reply-To=%3C16AF9ADF-84D6-409F-8FE8-C0736ECFFF43%40wsanchez.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064974.html">
   <LINK REL="Next"  HREF="064976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] The Python 2.7 Plan</H1>
    <B>Wilfredo SÃ¡nchez Vega</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20The%20Python%202.7%20Plan&In-Reply-To=%3C16AF9ADF-84D6-409F-8FE8-C0736ECFFF43%40wsanchez.net%3E"
       TITLE="[Twisted-Python] The Python 2.7 Plan">wsanchez at wsanchez.net
       </A><BR>
    <I>Wed Dec 11 14:06:08 MST 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064974.html">[Twisted-Python] Status of: &quot;console support for stdio in Windows&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="064976.html">[Twisted-Python] The Python 2.7 Plan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64975">[ date ]</a>
              <a href="thread.html#64975">[ thread ]</a>
              <a href="subject.html#64975">[ subject ]</a>
              <a href="author.html#64975">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  With Python 2.7 support dropping in a matter of weeks, I'd like to pick up from hawkowl's thread back in March about Python 2.7 support for Twisted.

  hawkowl had shared a plan in a Google Docs document.  That URL has since gone stale but here's a new one (thanks, hawkowl):

  <A HREF="https://docs.google.com/document/d/1lIkg6mYVMxVhh3_U6uSJ1XjllPM92Nf8Zp7b7OZPbIw/edit">https://docs.google.com/document/d/1lIkg6mYVMxVhh3_U6uSJ1XjllPM92Nf8Zp7b7OZPbIw/edit</A>


  Here's what I got from the prior conversation:


Amber Brown (hawkowl):

&gt;<i> I personally find that Python 2 compat adds a huge amount of overhead 
</I>&gt;<i> when working on and maintaining Twisted, and think that with the current 
</I>&gt;<i> maintainer availability, dropping it sooner rather than later would have 
</I>&gt;<i> a beneficial effect on how much work we spend on shims/compat, 
</I>&gt;<i> complexity, and our ability to ship new features, as well as onboarding 
</I>&gt;<i> people who are interested in the project, but have no interest (or 
</I>&gt;<i> experience!) in Python 2.7.
</I>
  As an example here, I'd like us to start adopting type hints.  I find them incredibly valuable as documentation and for catching lots of bugs.

  The best way to adopt them is to use inline syntax supported by Python 3.6+, or slightly less ideal, Python 3.5+.  It looks like pydoctor may have support for this soon, which makes that an increasingly interesting avenue.

  To support Python 2.7, we'd have to use either:

  - the comments-based inline syntax, which is far uglier and leaves us with an extra project of converting those later when we finally do drop 2.7, or

  - stub files, which are considerably less easy to manage over time

  Doing this will also afford us an opportunity to better express the API (do we mean to return a &quot;mutable sequence&quot; or a specifically a list, etc.).

  There's a longer conversation to be had about type hints, and that should be on a separate thread; I only talk about it here to explain why Python 2.7 is in the way.

&gt;<i> One of my rationales is that from some analysis of PyPI download 
</I>&gt;<i> statistics, the vast majority of Python 2 users are using old versions 
</I>&gt;<i> of Twisted, while nearly all our Python 3 users are on the latest 
</I>&gt;<i> version.
</I>
  Can you share how you looked up these stats?  I don't see a way to do so with pypistats.


John Santos:

&gt;<i> I hope/expect that none of my code changes to make my source compatible 
</I>&gt;<i> with both 2.7 and 3 will break when Twisted support for 2.7 goes away!  
</I>&gt;<i> (It seems to me the Twisted compatibility policy would guarantee that.)
</I>
  To be clear, I would not expect this to be the case if you update Twisted to a version that no longer supports Python 2.7.  You would have to continue using a version that does support Python 2.7. You should have some runway, however, in which your app still works with either Py2.7 and Twisted 19 as well as Py3.8 using Twisted 20, for example.


Glyph, in reference to a maintenance branch for Python 2.7:

&gt;<i> Personally, I'm not willing to commit to this.  I know from experience both on Twisted and other projects that maintaining multiple release branches, even one that's &quot;maintenance only&quot;, requires at least one point-person for each branch at all times (usually a &quot;release manager&quot;).  And backporting fixes inevitably gets harder and harder as the &quot;maintenance&quot; branch diverges from top-of-tree.  If I have time to work on Twisted in my increasingly scarce spare time, I want it to be on something at least plausibly interesting, and manually backporting manual fixes to an unmaintained py2 branch that I don't even use doesn't qualify.
</I>
  I tend to agree.  I think the compromise would be that we could be willing to accept back-ports of certain fixes (presumably limited to security fixes?) to a maintenance branch, but not that we would commit to doing so for any period of time.

  Additionally, we've already supported Python 2.7 for the entirely supported lifetime of Python 2.7.

  Glyph also notes some infrastructure we use that is blocked on code fixes:

  - Trac: <A HREF="https://trac.edgewall.org/ticket/12130">https://trac.edgewall.org/ticket/12130</A>
    Looks like we can leave the Trac instance running in a Twisted 19 WCGI server until they fix that.

  - DNS: <A HREF="https://twistedmatrix.com/trac/ticket/9496">https://twistedmatrix.com/trac/ticket/9496</A>
    I'd suggest we do the same as with Trac until this is fixed, but Glyph disagrees.


  Back to hawkowl's document:

  - Part 1: I think we should drop the Py2.7 maintenance branch piece per Glyph's comment above.

  - Part 2: Re-introduced modules should go into separate repositories, not back into Twisted proper.

  As to the timeline, Option 1 would be to cut a 2.7 release in a couple of weeks.  I don't know that we need to do this in January, but I would suggest that our next release is the final release for 2.7.  This would require a fix to the DNS issue #9496.

	-wsv

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064974.html">[Twisted-Python] Status of: &quot;console support for stdio in Windows&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="064976.html">[Twisted-Python] The Python 2.7 Plan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64975">[ date ]</a>
              <a href="thread.html#64975">[ thread ]</a>
              <a href="subject.html#64975">[ subject ]</a>
              <a href="author.html#64975">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
