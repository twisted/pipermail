<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Weird epoller bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Weird%20epoller%20bug&In-Reply-To=%3CCAAXGW-x06MGZYMV8%2BJXZv-%2BAB97RdwPAeyhuYpgwGFm%3DxFVYPA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064986.html">
   <LINK REL="Next"  HREF="064988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Weird epoller bug</H1>
    <B>Robert DiFalco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Weird%20epoller%20bug&In-Reply-To=%3CCAAXGW-x06MGZYMV8%2BJXZv-%2BAB97RdwPAeyhuYpgwGFm%3DxFVYPA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Weird epoller bug">robert.difalco at gmail.com
       </A><BR>
    <I>Tue Dec 17 12:19:42 MST 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064986.html">[Twisted-Python] Weird epoller bug
</A></li>
        <LI>Next message (by thread): <A HREF="064988.html">[Twisted-Python] Weird epoller bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64987">[ date ]</a>
              <a href="thread.html#64987">[ thread ]</a>
              <a href="subject.html#64987">[ subject ]</a>
              <a href="author.html#64987">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a theory that since this runs every 20 seconds that it is falling
behind somehow. Ulimits is too low, twisted is maybe eating the too many
file handles exception and then trying to close a handle that doesn't
actually exist. Dunno.

On Tue, Dec 17, 2019 at 10:18 AM Robert DiFalco &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">robert.difalco at gmail.com</A>&gt;
wrote:

&gt;<i> We recently switched from these versions and recently our TLS health check
</I>&gt;<i> using treq seems to be using more and more file handles and getting this
</I>&gt;<i> exception. Additionally our health check gets response time outs at a much
</I>&gt;<i> higher frequency. Any tips on how I would go about debugging this? Or is
</I>&gt;<i> this perhaps a known issue in one of the versions below and I need to
</I>&gt;<i> either bump up or down a release version? Thanks!
</I>&gt;<i>
</I>&gt;<i> twisted 16.6.0 -&gt; 19.19.0
</I>&gt;<i> treq 15.1.0 -&gt; 18.6.0
</I>&gt;<i>
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/foo/foo/local/lib/python2.7/site-packages/twisted/internet/epollreactor.py&quot;,
</I>&gt;<i> line 183, in removeWriter
</I>&gt;<i>     EPOLLOUT, EPOLLIN)
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/foo/foo/local/lib/python2.7/site-packages/twisted/internet/epollreactor.py&quot;,
</I>&gt;<i> line 160, in _remove
</I>&gt;<i>     self._poller.unregister(fd)
</I>&gt;<i> exceptions.IOError: [Errno 2] No such file or directory
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20191217/5d45b88d/attachment.html&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064986.html">[Twisted-Python] Weird epoller bug
</A></li>
	<LI>Next message (by thread): <A HREF="064988.html">[Twisted-Python] Weird epoller bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64987">[ date ]</a>
              <a href="thread.html#64987">[ thread ]</a>
              <a href="subject.html#64987">[ subject ]</a>
              <a href="author.html#64987">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
