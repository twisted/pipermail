<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Speed of twisted on Amazon EC2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Speed%20of%20twisted%20on%20Amazon%20EC2&In-Reply-To=%3C634914A010D0B943A035D226786325D44229D49B0E%40EXVMBX020-12.exch020.serverdata.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059343.html">
   <LINK REL="Next"  HREF="059353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Speed of twisted on Amazon EC2</H1>
    <B>Tobias Oberstein</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Speed%20of%20twisted%20on%20Amazon%20EC2&In-Reply-To=%3C634914A010D0B943A035D226786325D44229D49B0E%40EXVMBX020-12.exch020.serverdata.net%3E"
       TITLE="[Twisted-Python] Speed of twisted on Amazon EC2">tobias.oberstein at tavendo.de
       </A><BR>
    <I>Mon Apr 22 01:12:55 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059343.html">[Twisted-Python] Speed of twisted on Amazon EC2
</A></li>
        <LI>Next message (by thread): <A HREF="059353.html">[Twisted-Python] Speed of twisted on Amazon EC2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59346">[ date ]</a>
              <a href="thread.html#59346">[ thread ]</a>
              <a href="subject.html#59346">[ subject ]</a>
              <a href="author.html#59346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Tom,

&gt;&gt;<i>which OS are you running on your EC2 instance? Amazon Linux?
</I>&gt;<i>I am running two m1.small Ubuntu 12.10 64bit in us-east-1, one for the web server and the other for the ab.
</I>&gt;&gt;<i>Which reactor are you running your Twisted test with? Epoll?
</I>&gt;<i>Default Linux reactor, so it's Epoll.
</I>
ok, thats good. just wanted to make sure you are aware of this and make sure epoll is actually used.

&gt;&gt;<i>Are you running on CPython or PyPy?
</I>&gt;<i>I am running on CPython with twisted 13.0.0 installed into a virtualenv, but please see my results for PyPy below, they're far more impressive.
</I>
thats also good (and I was somehow expecting this .. at least thats also my experience).

there is 1 thing to note when benchmarking networking stuff on PyPy vs CPython that I noticed in my testing:

both the throughput (bits/s or reqs/s) as well as the average (arithmetic mean) response times are far better with PyPy vs CPy

BUT (my testings - Twisted/Autobahn/WebSocket): e.g. the 95% quantile (and the worst case) response latencyÂ of PyPy is worse than CPy.

this was PyPy 1.6 on both Linux (epoll) and FreeBSD (kqueue).

the reason might be GC .. PyPy's GCs might be not as sophisticated as CPy's (likely) or V8's (definitely).

note: this might have changed with PyPy 2 (did not test that). Armin at least was planning for a generational/incremental GC in PyPy. dunno.

so: you might wanna test for latency also .. I'd be interested in results.

regarding GC, V8 and Erlang (and possibly that other VMs with the J at the beginning) have an edge ..

both LuaJIT and PyPy plan to improve on this though ..

Tobias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059343.html">[Twisted-Python] Speed of twisted on Amazon EC2
</A></li>
	<LI>Next message (by thread): <A HREF="059353.html">[Twisted-Python] Speed of twisted on Amazon EC2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59346">[ date ]</a>
              <a href="thread.html#59346">[ thread ]</a>
              <a href="subject.html#59346">[ subject ]</a>
              <a href="author.html#59346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
