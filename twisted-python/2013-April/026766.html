<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.cred interface deficiences
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.cred%20interface%20deficiences&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026780.html">
   <LINK REL="Next"  HREF="026767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.cred interface deficiences</H1>
    <B>Shell</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.cred%20interface%20deficiences&In-Reply-To="
       TITLE="[Twisted-Python] twisted.cred interface deficiences">cam.turn at gmail.com
       </A><BR>
    <I>Mon Apr  1 16:55:48 EDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026780.html">[Twisted-Python] How to determine whether transport.write()	succeed?
</A></li>
        <LI>Next message: <A HREF="026767.html">[Twisted-Python] twisted.cred interface deficiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26766">[ date ]</a>
              <a href="thread.html#26766">[ thread ]</a>
              <a href="subject.html#26766">[ subject ]</a>
              <a href="author.html#26766">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The twisted.cred.IUsernamePassword interface declares:

* IUsernamePassword.username - &quot;The username associated with these credentials.&quot;
* IUsernamePassword.password - &quot;The password associated with these credentials.&quot;
* IUsernamePassword.checkPassword(password) - &quot;Validate these
credentials against the correct password.&quot;

The issue is that the interface (according to exarkun) allows you to
implement checkPassword() to do things other than the obvious
&quot;password == self.password&quot;. Now, this is an issue because Twisted
then explicitly supports (again, according to exarkun) two different
uses of this interface by the credentials checker:

* Call the checkPassword() method, passing it the correct password
* Just take the password out and do whatever you want with it (which
is necessary in any secure system)

Now, imagine I write a version of checkPassword() in a library which
does something security-centric (what would this be? shouldn't it be
part of the checker?), assuming that it'll be used by a credentials
checker which calls checkPassword(). Except... then, a library user
uses it with a credentials checker which checks the password itself.
Now they're skipping over my security-centric code!

So I have to tell my library users that they have to use my library
with a credentials checker which makes sure to call checkPassword(),
not just one which accepts the correct interface.

IUsernamePassword's docstring claims that the stored password must be
reversible to plaintext to be compared with the password, which
implies that taking the password out and doing other things is
incorrect, unlike what exarkun suggests. In this case, exposing
password in the interface makes little sense. In addition,
twisted.cred.checkers.FilePasswordDB apparently ignores this docstring
entirely already
(<A HREF="http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/cred/checkers.py#L238">http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/cred/checkers.py#L238</A>).

I propose that IUsernamePassword should be split into at least two interfaces:

* IUsernamePassword, with only username and password, no methods,
which allows password to be used in any way
* Another interface, which only defines username and checkPassword() -
possibly just a rename of IUsernameHashedPassword, which declares a
similar interface

However, this has the issue that any credential checker which can use
the second interface would also be able to use an IUsernamePassword
here if there were an adapter between the two, but support for this
would have to go into every credential checker which supports the
second interface at present. Maybe the Portal could automatically
search for adapters if it can't find a direct match?

Thanks,
Cameron

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026780.html">[Twisted-Python] How to determine whether transport.write()	succeed?
</A></li>
	<LI>Next message: <A HREF="026767.html">[Twisted-Python] twisted.cred interface deficiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26766">[ date ]</a>
              <a href="thread.html#26766">[ thread ]</a>
              <a href="subject.html#26766">[ subject ]</a>
              <a href="author.html#26766">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
