<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.cred interface deficiences
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.cred%20interface%20deficiences&In-Reply-To=%3CCANmrDMUC_cWvFHVtVBz6ScMeXFOP2rrFpKnRLFKit0D0%2BMQSrg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059233.html">
   <LINK REL="Next"  HREF="059236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.cred interface deficiences</H1>
    <B>Shell</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.cred%20interface%20deficiences&In-Reply-To=%3CCANmrDMUC_cWvFHVtVBz6ScMeXFOP2rrFpKnRLFKit0D0%2BMQSrg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] twisted.cred interface deficiences">cam.turn at gmail.com
       </A><BR>
    <I>Mon Apr  1 15:34:36 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059233.html">[Twisted-Python] twisted.cred interface deficiences
</A></li>
        <LI>Next message (by thread): <A HREF="059236.html">[Twisted-Python] twisted.cred interface deficiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59234">[ date ]</a>
              <a href="thread.html#59234">[ thread ]</a>
              <a href="subject.html#59234">[ subject ]</a>
              <a href="author.html#59234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It actually might be the appropriate thing already. There's a couple
of possible reasons for renaming; one is that the password might not
be hashed but the credentials object wants to insert additional logic
(exarkun's statement in IRC) anyway, but technically that's just
hashing using the identity function, so it should be OK.

The other is that the credentials object might want to collect the
plaintext password, and perform some logic based on that *before*
collecting something which can be compared to something derived from
the plaintext password from the other end of a protocol. I don't know
of any protocols which do this off the top of my head, but I have a
suspicion that at least a couple exist, and they'd fit perfectly into
this interface. If none do, then keeping it with the same name sounds
fine to me.

Cameron

On 1 April 2013 22:12, Laurens Van Houtven &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">_ at lvh.cc</A>&gt; wrote:
&gt;<i> Why does IUsernameHashedPassword have to be renamed? It sounds like it's the
</I>&gt;<i> appropriate thing already.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Apr 1, 2013 at 10:55 PM, Shell &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cam.turn at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The twisted.cred.IUsernamePassword interface declares:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * IUsernamePassword.username - &quot;The username associated with these
</I>&gt;&gt;<i> credentials.&quot;
</I>&gt;&gt;<i> * IUsernamePassword.password - &quot;The password associated with these
</I>&gt;&gt;<i> credentials.&quot;
</I>&gt;&gt;<i> * IUsernamePassword.checkPassword(password) - &quot;Validate these
</I>&gt;&gt;<i> credentials against the correct password.&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The issue is that the interface (according to exarkun) allows you to
</I>&gt;&gt;<i> implement checkPassword() to do things other than the obvious
</I>&gt;&gt;<i> &quot;password == self.password&quot;. Now, this is an issue because Twisted
</I>&gt;&gt;<i> then explicitly supports (again, according to exarkun) two different
</I>&gt;&gt;<i> uses of this interface by the credentials checker:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Call the checkPassword() method, passing it the correct password
</I>&gt;&gt;<i> * Just take the password out and do whatever you want with it (which
</I>&gt;&gt;<i> is necessary in any secure system)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now, imagine I write a version of checkPassword() in a library which
</I>&gt;&gt;<i> does something security-centric (what would this be? shouldn't it be
</I>&gt;&gt;<i> part of the checker?), assuming that it'll be used by a credentials
</I>&gt;&gt;<i> checker which calls checkPassword(). Except... then, a library user
</I>&gt;&gt;<i> uses it with a credentials checker which checks the password itself.
</I>&gt;&gt;<i> Now they're skipping over my security-centric code!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So I have to tell my library users that they have to use my library
</I>&gt;&gt;<i> with a credentials checker which makes sure to call checkPassword(),
</I>&gt;&gt;<i> not just one which accepts the correct interface.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> IUsernamePassword's docstring claims that the stored password must be
</I>&gt;&gt;<i> reversible to plaintext to be compared with the password, which
</I>&gt;&gt;<i> implies that taking the password out and doing other things is
</I>&gt;&gt;<i> incorrect, unlike what exarkun suggests. In this case, exposing
</I>&gt;&gt;<i> password in the interface makes little sense. In addition,
</I>&gt;&gt;<i> twisted.cred.checkers.FilePasswordDB apparently ignores this docstring
</I>&gt;&gt;<i> entirely already
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> (<A HREF="http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/cred/checkers.py#L238">http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.3.0/twisted/cred/checkers.py#L238</A>).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I propose that IUsernamePassword should be split into at least two
</I>&gt;&gt;<i> interfaces:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * IUsernamePassword, with only username and password, no methods,
</I>&gt;&gt;<i> which allows password to be used in any way
</I>&gt;&gt;<i> * Another interface, which only defines username and checkPassword() -
</I>&gt;&gt;<i> possibly just a rename of IUsernameHashedPassword, which declares a
</I>&gt;&gt;<i> similar interface
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> However, this has the issue that any credential checker which can use
</I>&gt;&gt;<i> the second interface would also be able to use an IUsernamePassword
</I>&gt;&gt;<i> here if there were an adapter between the two, but support for this
</I>&gt;&gt;<i> would have to go into every credential checker which supports the
</I>&gt;&gt;<i> second interface at present. Maybe the Portal could automatically
</I>&gt;&gt;<i> search for adapters if it can't find a direct match?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> Cameron
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> cheers
</I>&gt;<i> lvh
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059233.html">[Twisted-Python] twisted.cred interface deficiences
</A></li>
	<LI>Next message (by thread): <A HREF="059236.html">[Twisted-Python] twisted.cred interface deficiences
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59234">[ date ]</a>
              <a href="thread.html#59234">[ thread ]</a>
              <a href="subject.html#59234">[ subject ]</a>
              <a href="author.html#59234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
