<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] accurate periodic call
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20accurate%20periodic%20call&In-Reply-To=9A4A540809FC414FB909E3C44D3A53C54AEF0FC4%40veles.kzps.si">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025250.html">
   <LINK REL="Next"  HREF="025253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] accurate periodic call</H1>
    <B>Itamar Turner-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20accurate%20periodic%20call&In-Reply-To=9A4A540809FC414FB909E3C44D3A53C54AEF0FC4%40veles.kzps.si"
       TITLE="[Twisted-Python] accurate periodic call">itamar at itamarst.org
       </A><BR>
    <I>Sun Feb 19 23:14:14 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025250.html">[Twisted-Python] accurate periodic call
</A></li>
        <LI>Next message: <A HREF="025253.html">[Twisted-Python] accurate periodic call
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25252">[ date ]</a>
              <a href="thread.html#25252">[ thread ]</a>
              <a href="subject.html#25252">[ subject ]</a>
              <a href="author.html#25252">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/19/2012 11:49 AM, Zoran Bo&#353;njak wrote:
&gt;<i> Hello all,
</I>&gt;<i> I was astonished to find out that looping call period depends on the system time by default. The periodic tick can even stall for a long time, if the system time jumps backwards during program execution. It turned out that this is in fact a python problem (not providing a monotonic time, at least not for posix).
</I>&gt;<i>
</I>&gt;<i> I urgently need accurate periodic call in my program and I've found the solution below that seems to be working. I kindly ask you for your comments:
</I>&gt;<i> - Is this monotonic_time implementation OK from python perspective?
</I>I didn't read it in detail, but it seems vaguely plausible; overriding 
reactor.seconds is the thing to do.
&gt;<i> - Is monkey patch to the reactor OK or is there any other solution more appropriate in this case (I do not want to patch each looping call, but once in the application)?
</I>That's probably the easiest in this situation.
&gt;<i> - Does this patch have any negative influence to the rest of the reactor?
</I>Everything is *supposed* to use reactor.seconds - grep for time.time and 
see if it shows up anywhere in twisted.internet.
&gt;<i> - How would you implement a periodic function call in twisted application (as accurate as possible)?
</I>LoopingCall if you had this patch.
&gt;<i> - Any chance to see something implemented inside twisted and/or python, so that applications don't need this kind of tricks?
</I>&gt;<i>
</I>See <A HREF="http://twistedmatrix.com/trac/ticket/2424">http://twistedmatrix.com/trac/ticket/2424</A> - using ctypes is probably 
easier than the C extension the included patch provides.

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025250.html">[Twisted-Python] accurate periodic call
</A></li>
	<LI>Next message: <A HREF="025253.html">[Twisted-Python] accurate periodic call
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25252">[ date ]</a>
              <a href="thread.html#25252">[ thread ]</a>
              <a href="subject.html#25252">[ subject ]</a>
              <a href="author.html#25252">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
