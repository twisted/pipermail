<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Running Twisted tests with testtools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Running%20Twisted%20tests%20with%20testtools&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025174.html">
   <LINK REL="Next"  HREF="025176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Running Twisted tests with testtools</H1>
    <B>Jonathan Lange</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Running%20Twisted%20tests%20with%20testtools&In-Reply-To="
       TITLE="[Twisted-Python] Running Twisted tests with testtools">jml at mumak.net
       </A><BR>
    <I>Mon Feb  6 10:48:01 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025174.html">[Twisted-Python] Weekly Bug Summary
</A></li>
        <LI>Next message: <A HREF="025176.html">[Twisted-Python] Running Twisted tests with testtools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25175">[ date ]</a>
              <a href="thread.html#25175">[ thread ]</a>
              <a href="subject.html#25175">[ subject ]</a>
              <a href="author.html#25175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm the nominal maintainer of Trial. I'm also an active maintainer of
testtools[1].

testtools is, roughly speaking, a base TestCase that works across a
bunch of Pythons and has a few nice features[2]. I started to prefer
it over Twisted's TestCase some time ago, and now use it pretty
consistently, even for my Twisted code.

testtools has a way of letting you run tests within the Twisted
reactor, without needing to use a particular base class. For example::

  class MyTests(TestCase):
    run_tests_with = AsynchronousDeferredRunTest

    def test_foo(self):
      ...
      return some_deferred

Or::

  class MyTests(TestCase):
    def test_ordinary_thing(self):
      ...
    @run_test_with(AsynchronousDeferredRunTest)
    def test_twisted_thing(self):
      ...
      return some_deferred

It doesn't behave exactly the way Trial does. Freed from backwards
compatibility constraints, I tightened up the implementation quite a
bit. There are options to make it emulate Trial's behaviour[3].

The documentation says that it's &quot;highly experimental&quot;. This is not
strictly true any more, as it has been used in numerous projects and
has been found to be quite robust.

The key source code is at::
  <A HREF="http://bazaar.launchpad.net/~testtools-committers/testtools/trunk/view/head:/testtools/deferredruntest.py">http://bazaar.launchpad.net/~testtools-committers/testtools/trunk/view/head:/testtools/deferredruntest.py</A>
  <A HREF="http://bazaar.launchpad.net/~testtools-committers/testtools/trunk/view/head:/testtools/_spinner.py">http://bazaar.launchpad.net/~testtools-committers/testtools/trunk/view/head:/testtools/_spinner.py</A>

And you can get the code from PyPI or Launchpad[4].

testtools has had this feature for some time now. It's past time that
I officially informed the Twisted community about it. That's the main
reason for this email.

In my ideal world, Twisted's TestCase would inherit from testtools's
TestCase and would continue to provide the same API it does today.
This might not be everyone else's ideal though, and the path from here
to there is unclear to me. I welcome your thoughts.

cheers,
jml


[1] <A HREF="http://testtools.rtfd.org">http://testtools.rtfd.org</A> ; <A HREF="http://pypi.python.org/pypi/testtools">http://pypi.python.org/pypi/testtools</A>
[2] <A HREF="http://testtools.readthedocs.org/en/latest/overview.html">http://testtools.readthedocs.org/en/latest/overview.html</A>
[3] <A HREF="http://testtools.readthedocs.org/en/latest/for-test-authors.html#twisted-support">http://testtools.readthedocs.org/en/latest/for-test-authors.html#twisted-support</A>
[4] bzr branch lp:testtools

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025174.html">[Twisted-Python] Weekly Bug Summary
</A></li>
	<LI>Next message: <A HREF="025176.html">[Twisted-Python] Running Twisted tests with testtools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25175">[ date ]</a>
              <a href="thread.html#25175">[ thread ]</a>
              <a href="subject.html#25175">[ subject ]</a>
              <a href="author.html#25175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
