<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Regression in Gtk2 support testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Regression%20in%20Gtk2%20support%20testing&In-Reply-To=4F41BAA9.5010709%40itamarst.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025251.html">
   <LINK REL="Next"  HREF="025259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Regression in Gtk2 support testing</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Regression%20in%20Gtk2%20support%20testing&In-Reply-To=4F41BAA9.5010709%40itamarst.org"
       TITLE="[Twisted-Python] Regression in Gtk2 support testing">exarkun at twistedmatrix.com
       </A><BR>
    <I>Mon Feb 20 10:10:05 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025251.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
        <LI>Next message: <A HREF="025259.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25257">[ date ]</a>
              <a href="thread.html#25257">[ thread ]</a>
              <a href="subject.html#25257">[ subject ]</a>
              <a href="author.html#25257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03:14 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A> wrote:
&gt;<i>On 02/18/2012 10:59 AM, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
</I>&gt;&gt;<i>Hello all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Since #4558 was merged, introducing &quot;gi reactor&quot; based on the new 
</I>&gt;&gt;<i>Python
</I>&gt;&gt;<i>bindings for gobject, all testing of the Gtk2 reactor has been 
</I>&gt;&gt;<i>disabled,
</I>&gt;&gt;<i>on all platforms.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>This is a two-part problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>The first part is the more damaging part, but fortunately also the 
</I>&gt;&gt;<i>more
</I>&gt;&gt;<i>easily fixed part.  #4558 made it impossible to import
</I>&gt;&gt;<i>`twisted.internet.gtk2reactor` if `sys.modules` contains a &quot;gi&quot; key.
</I>&gt;&gt;<i>This seems to overlook the fact that even a *failed* import of the 
</I>&gt;&gt;<i>`gi`
</I>&gt;&gt;<i>module adds such a key to that dictionary.  Since the test suite tries
</I>&gt;&gt;<i>to test `gireactor`, there will always be such a key, so `gtk2reactor`
</I>&gt;&gt;<i>can never be imported by the test suite.
</I>&gt;<i>However, if you run with &quot;trial -r gtk2&quot; you *do* get the gtk2 tests to
</I>&gt;<i>run...
</I>&gt;&gt;<i>The result is that gtk2reactor is no longer tested by buildbot on any
</I>&gt;&gt;<i>platform.
</I>&gt;<i>... and as a result the buildbot *would* be testing gtk2 except that,
</I>&gt;<i>unfortunately, the fedora32-py2.5-reactors buildslave is down. Which I
</I>&gt;<i>will follow up on if I can figure out who's running it.
</I>&gt;&gt;<i>The second part will show up once the first problem is fixed.  Once 
</I>&gt;&gt;<i>the
</I>&gt;&gt;<i>check correctly ignores `sys.modules[&quot;gi&quot;] == None`, it will still be
</I>&gt;&gt;<i>impossible to test both gireactor and gtk2reactor in our current
</I>&gt;&gt;<i>buildbot configuration.  One or the other will win, and the loser will
</I>&gt;&gt;<i>be quietly skipped (apparently too quietly for most people to notice).
</I>&gt;&gt;<i>Some new strategy is required so that we can test both of these 
</I>&gt;&gt;<i>reactors
</I>&gt;&gt;<i>on all our supported platforms.
</I>&gt;<i>
</I>&gt;<i>The reactors buildslave is a reasonable strategy: have multiple runs
</I>&gt;<i>with different reactors as the main trial reactor. Especially since,
</I>&gt;<i>even in the absence of this problem, we'd want to continue to have full
</I>&gt;<i>runs under the different reactors because the reactor mixin tests don't
</I>&gt;<i>cover everything yet.
</I>
... with the caveat that *eventually* the mixin tests should cover 
everything, and then we will want to stop running trial with different 
-r arguments.  And perhaps the further caveat that we won't test both of 
these reactors on Windows, because we've already overloaded our Windows 
slave capacity and we can't really add more trial steps with different 
-r arguments.

Jean-Paul

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025251.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
	<LI>Next message: <A HREF="025259.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25257">[ date ]</a>
              <a href="thread.html#25257">[ thread ]</a>
              <a href="subject.html#25257">[ subject ]</a>
              <a href="author.html#25257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
