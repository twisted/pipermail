<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Regression in Gtk2 support testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Regression%20in%20Gtk2%20support%20testing&In-Reply-To=%3CCAA0H%2BQRUyoh-6C7%3DwjktOQ%3DXTNw3oJKCS4v6J-XpSxi8vQ%3Dc3Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057721.html">
   <LINK REL="Next"  HREF="057725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Regression in Gtk2 support testing</H1>
    <B>Jasper St. Pierre</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Regression%20in%20Gtk2%20support%20testing&In-Reply-To=%3CCAA0H%2BQRUyoh-6C7%3DwjktOQ%3DXTNw3oJKCS4v6J-XpSxi8vQ%3Dc3Q%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Regression in Gtk2 support testing">jstpierre at mecheye.net
       </A><BR>
    <I>Sat Feb 18 14:51:33 MST 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057721.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
        <LI>Next message (by thread): <A HREF="057725.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57722">[ date ]</a>
              <a href="thread.html#57722">[ thread ]</a>
              <a href="subject.html#57722">[ subject ]</a>
              <a href="author.html#57722">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The problem is that both modules cannot be imported simultaneously,
and that's not easily fixable (there's several barriers in there). To
test both you would have to run each test in a subprocess. Maybe you
can have a decorator to run a test in a subprocess.

On Sat, Feb 18, 2012 at 3:19 PM, Itamar Turner-Trauring
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
&gt;<i> I'll see what I can do Monday, starting with reenabling gtk2.
</I>&gt;<i>
</I>&gt;&gt;<i> Hello all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Since #4558 was merged, introducing &quot;gi reactor&quot; based on the new Python
</I>&gt;&gt;<i> bindings for gobject, all testing of the Gtk2 reactor has been disabled,
</I>&gt;&gt;<i> on all platforms.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is a two-part problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The first part is the more damaging part, but fortunately also the more
</I>&gt;&gt;<i> easily fixed part.  #4558 made it impossible to import
</I>&gt;&gt;<i> `twisted.internet.gtk2reactor` if `sys.modules` contains a &quot;gi&quot; key.
</I>&gt;&gt;<i> This seems to overlook the fact that even a *failed* import of the `gi`
</I>&gt;&gt;<i> module adds such a key to that dictionary.  Since the test suite tries
</I>&gt;&gt;<i> to test `gireactor`, there will always be such a key, so `gtk2reactor`
</I>&gt;&gt;<i> can never be imported by the test suite.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The result is that gtk2reactor is no longer tested by buildbot on any
</I>&gt;&gt;<i> platform.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The second part will show up once the first problem is fixed.  Once the
</I>&gt;&gt;<i> check correctly ignores `sys.modules[&quot;gi&quot;] == None`, it will still be
</I>&gt;&gt;<i> impossible to test both gireactor and gtk2reactor in our current
</I>&gt;&gt;<i> buildbot configuration.  One or the other will win, and the loser will
</I>&gt;&gt;<i> be quietly skipped (apparently too quietly for most people to notice).
</I>&gt;&gt;<i> Some new strategy is required so that we can test both of these reactors
</I>&gt;&gt;<i> on all our supported platforms.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I hope someone will resolve the first issue quickly, perhaps this
</I>&gt;&gt;<i> weekend, so that we don't drift too far away from a working gtk2reactor.
</I>&gt;&gt;<i> If it isn't fixed soon, I suggest reverting the merge until the problem
</I>&gt;&gt;<i> can be fixed in the #4558 branch.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jean-Paul
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


-- 
  Jasper


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057721.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
	<LI>Next message (by thread): <A HREF="057725.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57722">[ date ]</a>
              <a href="thread.html#57722">[ thread ]</a>
              <a href="subject.html#57722">[ subject ]</a>
              <a href="author.html#57722">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
