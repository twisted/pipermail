<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Regression in Gtk2 support testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Regression%20in%20Gtk2%20support%20testing&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025245.html">
   <LINK REL="Next"  HREF="025247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Regression in Gtk2 support testing</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Regression%20in%20Gtk2%20support%20testing&In-Reply-To="
       TITLE="[Twisted-Python] Regression in Gtk2 support testing">exarkun at twistedmatrix.com
       </A><BR>
    <I>Sat Feb 18 10:59:31 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025245.html">[Twisted-Python] Use epoll reactor in pypy
</A></li>
        <LI>Next message: <A HREF="025247.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25246">[ date ]</a>
              <a href="thread.html#25246">[ thread ]</a>
              <a href="subject.html#25246">[ subject ]</a>
              <a href="author.html#25246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

Since #4558 was merged, introducing &quot;gi reactor&quot; based on the new Python 
bindings for gobject, all testing of the Gtk2 reactor has been disabled, 
on all platforms.

This is a two-part problem.

The first part is the more damaging part, but fortunately also the more 
easily fixed part.  #4558 made it impossible to import 
`twisted.internet.gtk2reactor` if `sys.modules` contains a &quot;gi&quot; key. 
This seems to overlook the fact that even a *failed* import of the `gi` 
module adds such a key to that dictionary.  Since the test suite tries 
to test `gireactor`, there will always be such a key, so `gtk2reactor` 
can never be imported by the test suite.

The result is that gtk2reactor is no longer tested by buildbot on any 
platform.

The second part will show up once the first problem is fixed.  Once the 
check correctly ignores `sys.modules[&quot;gi&quot;] == None`, it will still be 
impossible to test both gireactor and gtk2reactor in our current 
buildbot configuration.  One or the other will win, and the loser will 
be quietly skipped (apparently too quietly for most people to notice). 
Some new strategy is required so that we can test both of these reactors 
on all our supported platforms.

I hope someone will resolve the first issue quickly, perhaps this 
weekend, so that we don't drift too far away from a working gtk2reactor. 
If it isn't fixed soon, I suggest reverting the merge until the problem 
can be fixed in the #4558 branch.

Jean-Paul

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025245.html">[Twisted-Python] Use epoll reactor in pypy
</A></li>
	<LI>Next message: <A HREF="025247.html">[Twisted-Python] Regression in Gtk2 support testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25246">[ date ]</a>
              <a href="thread.html#25246">[ thread ]</a>
              <a href="subject.html#25246">[ subject ]</a>
              <a href="author.html#25246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
