<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Running Twisted tests with testtools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Running%20Twisted%20tests%20with%20testtools&In-Reply-To=%3CCAHZ8tnayYh%2BbUmRMU3E1WN2jPZWPNK9WoowmdKa9kXw2TDeSNQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057669.html">
   <LINK REL="Next"  HREF="057670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Running Twisted tests with testtools</H1>
    <B>Jonathan Lange</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Running%20Twisted%20tests%20with%20testtools&In-Reply-To=%3CCAHZ8tnayYh%2BbUmRMU3E1WN2jPZWPNK9WoowmdKa9kXw2TDeSNQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Running Twisted tests with testtools">jml at mumak.net
       </A><BR>
    <I>Wed Feb  8 15:15:18 MST 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057669.html">[Twisted-Python] Running Twisted tests with testtools
</A></li>
        <LI>Next message (by thread): <A HREF="057670.html">[Twisted-Python] Running Twisted tests with testtools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57668">[ date ]</a>
              <a href="thread.html#57668">[ thread ]</a>
              <a href="subject.html#57668">[ subject ]</a>
              <a href="author.html#57668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Feb 8, 2012 at 5:22 PM, Free Ekanayaka &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">free at 64studio.com</A>&gt; wrote:
&gt;<i> Hi Glyph,
</I>&gt;<i>
</I>&gt;<i> |--==&gt; On Wed, 8 Feb 2012 02:05:22 -0500, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; said:
</I>&gt;<i>
</I>...
&gt;<i>  G&gt; It's already compatible, as Jonathan said.  You can just use the
</I>&gt;<i>  G&gt; trial runner with testtools tests.
</I>&gt;<i>
</I>&gt;<i> Even those returning deferreds and using AsynchronousDeferredRunTest? I
</I>&gt;<i> presume so, just asking to be sure.
</I>&gt;<i>
</I>
Yes.

(Also, you don't get sure from asking, you get sure from trying).

&gt;<i> Also, testtools has an AsynchronousDeferredRunTestForBrokenTwisted class
</I>&gt;<i> too which I believe mimics more closely what trial currently does, so
</I>&gt;<i> I'm not sure what the difference between AsynchronousDeferredRunTest and
</I>&gt;<i> AsynchronousDeferredRunTestForBrokenTwisted would be when using trial to
</I>&gt;<i> run such tests.
</I>&gt;<i>
</I>
&gt;<i>From the documentation:
</I>
* Trial spins the reactor a couple of times before cleaning it up,
  ``AsynchronousDeferredRunTest`` does not.  If you rely on this behavior, use
  ``AsynchronousDeferredRunTestForBrokenTwisted``.

And the API documentation:

    &quot;&quot;&quot;Test runner that works around Twisted brokenness re reactor junk.

    There are many APIs within Twisted itself where a Deferred fires but
    leaves cleanup work scheduled for the reactor to do.  Arguably, many of
    these are bugs.  This runner iterates the reactor event loop a number of
    times after every test, in order to shake out these buggy-but-commonplace
    events.
    &quot;&quot;&quot;

&gt;<i>  &gt;&gt;However it'd be good if Twisted took a clear position on this,
</I>&gt;<i>
</I>&gt;<i>  G&gt; Nope.  We write software, not position papers :).
</I>&gt;<i>
</I>&gt;<i> Okay maybe I used the wrong wording. I was asking for a &quot;position&quot;
</I>&gt;<i> because I got the impression that Jonathan is considering testtools a
</I>&gt;<i> sort of trial2 that provides improvements over trial, but that was not
</I>&gt;<i> likely going to replace only it because of compatibility reasons. Please
</I>&gt;<i> Jonathan correct me if it's not the case.
</I>&gt;<i>
</I>&gt;<i> So *if* testtools is considered superior to trial for some reason, but
</I>&gt;<i> it's problematic for Twisted to internally drop trial in favor of
</I>&gt;<i> testtools, I was wondering if it was the case to (also) point people to
</I>&gt;<i> testtools from the Twisted website/documentaiton, or something along
</I>&gt;<i> those lines.
</I>&gt;<i>
</I>
The passive voice here is masking an ambiguity. I consider testtools
superior to trial in many ways. Some others disagree, or don't have
enough information to form an opinion.

Perhaps it's worth a mention in the Twisted documentation, but I
personally won't push too hard for that.

...
&gt;<i>  G&gt; I think that the main risks to &quot;languishing&quot; or &quot;not taking off&quot;
</I>&gt;<i>  G&gt; for both Trial and testtools are issues with their own
</I>&gt;<i>  G&gt; documentation and promotional materials, not in any conflict with
</I>&gt;<i>  G&gt; each other.  If you're worried about it, contribute code or
</I>&gt;<i>  G&gt; documentation or blog-posts or what have you to one or both
</I>&gt;<i>  G&gt; projects :).
</I>&gt;<i>
</I>&gt;<i> Probably a good addition to the documentation of the two projects would
</I>&gt;<i> be to describe the differences between the two and if there is any
</I>&gt;<i> reason one should use one or the other, beside bare taste. I can surely
</I>&gt;<i> help with that when I have better picture myself.
</I>&gt;<i>
</I>
For testtools, we'd also have to do that for nose, nose2, unittest2,
zope.testing and py.test for it to make any sense. Heck, just listing
all of those makes me regret ever writing any test framework code in
the first place.

I'm not sure I'd want that documentation, to be honest. I would only
ever do work towards it if it meant that one test framework could be
killed, even if that ended up being testtools.

cheers,
jml


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057669.html">[Twisted-Python] Running Twisted tests with testtools
</A></li>
	<LI>Next message (by thread): <A HREF="057670.html">[Twisted-Python] Running Twisted tests with testtools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57668">[ date ]</a>
              <a href="thread.html#57668">[ thread ]</a>
              <a href="subject.html#57668">[ subject ]</a>
              <a href="author.html#57668">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
