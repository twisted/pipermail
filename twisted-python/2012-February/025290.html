<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] connectionMade, TLS and DoS protection timeouts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20connectionMade%2C%20TLS%20and%20DoS%20protection%20timeouts&In-Reply-To=634914A010D0B943A035D226786325D42D5992F9EA%40EXVMBX020-12.exch020.serverdata.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025289.html">
   <LINK REL="Next"  HREF="025285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] connectionMade, TLS and DoS protection timeouts</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20connectionMade%2C%20TLS%20and%20DoS%20protection%20timeouts&In-Reply-To=634914A010D0B943A035D226786325D42D5992F9EA%40EXVMBX020-12.exch020.serverdata.net"
       TITLE="[Twisted-Python] connectionMade, TLS and DoS protection timeouts">exarkun at twistedmatrix.com
       </A><BR>
    <I>Wed Feb 29 09:12:47 EST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025289.html">[Twisted-Python] connectionMade, TLS and DoS protection timeouts
</A></li>
        <LI>Next message: <A HREF="025285.html">[Twisted-Python] Buildslave upgrades
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25290">[ date ]</a>
              <a href="thread.html#25290">[ thread ]</a>
              <a href="subject.html#25290">[ subject ]</a>
              <a href="author.html#25290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28 Feb, 11:42 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tobias.oberstein at tavendo.de</A> wrote:
&gt;<i>I was wondering how I could protect a Twisted server from evil clients 
</I>&gt;<i>initiating,
</I>&gt;<i>but never completing a TLS handshake.
</I>&gt;<i>
</I>&gt;<i>connectionMade is only called when the TLS handshake has completed, 
</I>&gt;<i>right?
</I>
Actually, this is not right.  It's sort of a wart, but connectionMade is 
called when the underlying TCP connection is established.  The TLS 
handshake will always complete at some later time.

One reason we (or at least I) have not yet really tried to change this 
is that doing so would make it harder to address just the problem you're 
talking about.

Jean-Paul
&gt;<i>When doing listenSSL, is there a hook which is fired right after the 
</I>&gt;<i>TCP handshake is
</I>&gt;<i>complete, before the TLS handshake begins, so that I can setup a 
</I>&gt;<i>callLater/dropConnection
</I>&gt;<i>timeout?
</I>&gt;<i>
</I>&gt;<i>This is the piece I am missing, since for TCP-level protection (Syn 
</I>&gt;<i>floods etc), I can
</I>&gt;<i>use kernel parameters / kernel packet filtering, and for app-level 
</I>&gt;<i>protection
</I>&gt;<i>(I do WebSockets .. which also has a handshake) I can timeout that.
</I>&gt;<i>
</I>&gt;<i>I like to do above without requiring a frontend TLS terminator / 
</I>&gt;<i>firewall ..
</I>&gt;<i>
</I>&gt;<i>Thanks!
</I>&gt;<i>
</I>&gt;<i>\Tobias
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025289.html">[Twisted-Python] connectionMade, TLS and DoS protection timeouts
</A></li>
	<LI>Next message: <A HREF="025285.html">[Twisted-Python] Buildslave upgrades
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25290">[ date ]</a>
              <a href="thread.html#25290">[ thread ]</a>
              <a href="subject.html#25290">[ subject ]</a>
              <a href="author.html#25290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
