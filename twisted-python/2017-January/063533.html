<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] suggestions sought on multi-service application	dealing with shared database issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20suggestions%20sought%20on%20multi-service%20application%0A%09dealing%20with%20shared%20database%20issue&In-Reply-To=%3C11779FC1-40B1-4CA3-AC28-382DE325E438%402xlp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] suggestions sought on multi-service application	dealing with shared database issue</H1>
    <B>Jonathan Vanasco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20suggestions%20sought%20on%20multi-service%20application%0A%09dealing%20with%20shared%20database%20issue&In-Reply-To=%3C11779FC1-40B1-4CA3-AC28-382DE325E438%402xlp.com%3E"
       TITLE="[Twisted-Python] suggestions sought on multi-service application	dealing with shared database issue">twisted-python at 2xlp.com
       </A><BR>
    <I>Mon Jan 16 17:16:12 MST 2017</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63533">[ date ]</a>
              <a href="thread.html#63533">[ thread ]</a>
              <a href="subject.html#63533">[ subject ]</a>
              <a href="author.html#63533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I have a few ideas on how to handle this, but wanted to see if anyone else has dealt with this and has a recommended approach:

I have a twisted daemon that I will loosely describe as this:

	* an application defined in a `.tac` file that is an instance of `twisted.application.service.Application`
	* multiple user-defined services (IIRC 8 or 9) that are subclasses as twisted.application.internet.TimeService
	* the services are added to the application via `setServiceParent`
	* the reactor is started via `twisted.internet.reactor.run()`

I've run into an annoying issue a few times, and need to temporarily suspend all/most of the services from running...  an internal backup script occasionally breaks (on a new edge case every time we fix it) and ends up consuming 100% of disk space.  This cascades into database failures in my application.

I've got an external service monitoring disk-space and alerting me.  It's presently shutting down the twisted daemon when the error happens, but I'd like to keep twisted running and just adapt to the server conditions.

The two ideas I had so far:

1. Create a new service that monitors server conditions and can call stopService/startService on registered services as needed
2. Keep all the services running, but put a conditional check in the timer service's callable

has anyone preferred one of these, or something different, in the past?



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63533">[ date ]</a>
              <a href="thread.html#63533">[ thread ]</a>
              <a href="subject.html#63533">[ subject ]</a>
              <a href="author.html#63533">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
