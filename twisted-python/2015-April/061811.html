<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] txaio: write code for both asyncio + twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20txaio%3A%20write%20code%20for%20both%20asyncio%20%2B%20twisted&In-Reply-To=%3C864mowq5av.fsf%40atlantis.meejah.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] txaio: write code for both asyncio + twisted</H1>
    <B>meejah</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20txaio%3A%20write%20code%20for%20both%20asyncio%20%2B%20twisted&In-Reply-To=%3C864mowq5av.fsf%40atlantis.meejah.ca%3E"
       TITLE="[Twisted-Python] txaio: write code for both asyncio + twisted">meejah at meejah.ca
       </A><BR>
    <I>Fri Apr  3 15:18:32 MDT 2015</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61811">[ date ]</a>
              <a href="thread.html#61811">[ thread ]</a>
              <a href="subject.html#61811">[ subject ]</a>
              <a href="author.html#61811">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I recently factored some Twisted/asyncio compatibility code out of
AutobahnPython (<A HREF="http://autobahn.ws/python/">http://autobahn.ws/python/</A>) and the result thus far is
&quot;txaio&quot;, available on GitHub: <A HREF="https://github.com/tavendo/txaio">https://github.com/tavendo/txaio</A>

Similar to &quot;six&quot; (but for event-based Python) this allows you to write
code (presumably for a library) that can work unmodified on either 
asyncio or Twisted. In other words, users of your library can choose 
whether they want a Twisted dependency or not (and, e.g., get plain
Deferreds or Futures as appropriate from any async methods your API
reveals).

Basically, it's just a thin wrapper over the appropriate calls into
asyncio or Twisted providing a &quot;lowest-common-denominator&quot; interface.
This does mean limiting yourself a little (e.g. many DeferredList
options aren't available). So you feel this pain as a library author,
but then give *users* of your library a choice as to whether they wish
to write asyncio (with no Twisted dependency) or Twisted.

What I mean is: txaio isn't trying to be full event-loop interop like
txtulip (<A HREF="https://github.com/itamarst/txtulip">https://github.com/itamarst/txtulip</A>)

This isn't &quot;released&quot; yet (e.g. not on PyPI) but I'm posting about it
because I'm interested in any early feedback.

Here's most of the API, using the example from the README:

    import txaio  # auto-selects twisted &gt; asyncio &gt; trollius
    f0 = txaio.create_future()
    f1 = txaio.as_future(some_func, 1, 2, key='word')
    txaio.add_callbacks(f0, callback, errback)  # either can be None
    txaio.add_callbacks(f1, callback, errback)
    # ...
    txaio.resolve(f0, &quot;value&quot;)
    txaio.reject(f1, RuntimeError(&quot;it failed&quot;))

-- 
meejah




</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61811">[ date ]</a>
              <a href="thread.html#61811">[ thread ]</a>
              <a href="subject.html#61811">[ subject ]</a>
              <a href="author.html#61811">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
