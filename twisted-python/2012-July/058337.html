<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] i want to update 1000 devices running as	servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20i%20want%20to%20update%201000%20devices%20running%20as%0A%09servers&In-Reply-To=%3CCAOHwv54mzMgUn4AAXFNJ%2B7FRXETGGLHQ2qfydp%3D1gjweZPgddg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058335.html">
   <LINK REL="Next"  HREF="058332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] i want to update 1000 devices running as	servers</H1>
    <B>Luka Rahne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20i%20want%20to%20update%201000%20devices%20running%20as%0A%09servers&In-Reply-To=%3CCAOHwv54mzMgUn4AAXFNJ%2B7FRXETGGLHQ2qfydp%3D1gjweZPgddg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] i want to update 1000 devices running as	servers">luka.rahne at gmail.com
       </A><BR>
    <I>Fri Jul 20 08:29:01 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058335.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
        <LI>Next message (by thread): <A HREF="058332.html">[Twisted-Python] AMPBox as an Argument?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58337">[ date ]</a>
              <a href="thread.html#58337">[ thread ]</a>
              <a href="subject.html#58337">[ subject ]</a>
              <a href="author.html#58337">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My current problem is, that i do not know how to stop protocol and
quit listening.

What should i call to stop protocol and told reactor to remove from
schedule at StopIteration exception?


About while 1: loop- that loop is there just to find first non empty
line in sx file, in most case it break just in fist condition, since
sx file, does not have empty lines.


2012/7/20  &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt;:
&gt;<i> On 07:01 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">luka.rahne at gmail.com</A> wrote:
</I>&gt;&gt;<i>I have like 1000 devices that need update that takes like 1 minute
</I>&gt;&gt;<i>each. I
</I>&gt;&gt;<i>want them to update as quick as possible, sending lines from sx file,
</I>&gt;&gt;<i>using
</I>&gt;&gt;<i>UDP and for each line i got reponse &quot;OK&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Here is code that works for up to 500 servers, but not so well when i
</I>&gt;&gt;<i>go
</I>&gt;&gt;<i>more (it just does not finish)
</I>&gt;<i>
</I>&gt;<i> One problem you need to consider is that all platforms limit the number
</I>&gt;<i> of simultaneous file descriptors (sockets) you may use at once.  On
</I>&gt;<i> Windows, this limit is around 500 by default.  You can raise it to a
</I>&gt;<i> much larger number (but I forget what) by using Twisted's IOCP reactor
</I>&gt;<i> instead of the default select reactor.
</I>&gt;<i>
</I>&gt;<i> See the reactor selection howto on the website for details.
</I>&gt;&gt;<i>my current  simplified client and server_emulator code is here:
</I>&gt;&gt;<i><A HREF="https://gist.github.com/3144857">https://gist.github.com/3144857</A>
</I>&gt;<i>
</I>&gt;<i> Another problem with this code is the while loop inside sendDatagram.
</I>&gt;<i> Twisted is a cooperative multitasking system.  You cannot execute large
</I>&gt;<i> loops like that and have everything work properly or well.
</I>&gt;<i>
</I>&gt;<i> Programs based on Twisted do a little bit of work, give up execution
</I>&gt;<i> control, then do a little bit more work when they regain execution
</I>&gt;<i> control.  The work is event-driven, so (for example) perhaps you want to
</I>&gt;<i> replace the while loop with code that sends the next datagram when the
</I>&gt;<i> previous datagram is acknowledged.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>currently i have only one server for simulation, but in real world it
</I>&gt;&gt;<i>will
</I>&gt;&gt;<i>be 1000 different IP-s.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I was trying to stop and run reactor but did not work (reactor is not
</I>&gt;&gt;<i>rerunnable exception or somthing like that).
</I>&gt;<i>
</I>&gt;<i> Yes.  You can only call reactor.run() once.  That shouldn't be a very
</I>&gt;<i> important limitation.  You can do as much networking as you want while
</I>&gt;<i> only running the reactor once.
</I>&gt;&gt;<i>I want to run lets say 100 updates at time and once some update
</I>&gt;&gt;<i>is finished i want to remove this protocol out of job and schedule new
</I>&gt;&gt;<i>one.
</I>&gt;<i>
</I>&gt;<i> Take a look at twisted.internet.task.cooperate.  Here's an example
</I>&gt;<i> demonstrating its use to do a limited amount of work concurrently:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://as.ynchrono.us/2006/05/limiting-parallelism_22.html">http://as.ynchrono.us/2006/05/limiting-parallelism_22.html</A>
</I>&gt;&gt;<i>Can somebody give some pointers?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I am running this on windows if that is an issue.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058335.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
	<LI>Next message (by thread): <A HREF="058332.html">[Twisted-Python] AMPBox as an Argument?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58337">[ date ]</a>
              <a href="thread.html#58337">[ thread ]</a>
              <a href="subject.html#58337">[ subject ]</a>
              <a href="author.html#58337">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
