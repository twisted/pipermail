<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] ANN: Twisted DBus 1.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20ANN%3A%20Twisted%20DBus%201.0&In-Reply-To=%3CCAFKh6jBoWccZWXxpmJVuunNVSjAePT3tocKSvMb4jwVaL9YyYg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058214.html">
   <LINK REL="Next"  HREF="058211.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] ANN: Twisted DBus 1.0</H1>
    <B>Tom Cocagne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20ANN%3A%20Twisted%20DBus%201.0&In-Reply-To=%3CCAFKh6jBoWccZWXxpmJVuunNVSjAePT3tocKSvMb4jwVaL9YyYg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] ANN: Twisted DBus 1.0">tom.cocagne at gmail.com
       </A><BR>
    <I>Tue Jul  3 14:36:41 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058214.html">[Twisted-Python] ANN: Twisted DBus 1.0
</A></li>
        <LI>Next message (by thread): <A HREF="058211.html">[Twisted-Python] ANN: Twisted DBus 1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58219">[ date ]</a>
              <a href="thread.html#58219">[ thread ]</a>
              <a href="subject.html#58219">[ subject ]</a>
              <a href="author.html#58219">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nevermind. Simply removing the explicit credential passing from the
client side of the implementation fixed the problem. txdbus 1.0.2
appears to run just fine on 12.1.

Tom

On Tue, Jul 3, 2012 at 10:14 AM, Tom Cocagne &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tom.cocagne at gmail.com</A>&gt; wrote:
&gt;<i> Unfortunately, it looks like 12.1 may be completely incompatible with
</I>&gt;<i> txdbus. The ancillary data support for Unix sockets appears to support
</I>&gt;<i> only file descriptor passing and breaks when credential passing is
</I>&gt;<i> attempted. The current implementation assumes and fails to check for
</I>&gt;<i> ancillary data sizes other than 4 (credentials are of length 12). I
</I>&gt;<i> believe it will be a relatively straight-forward task to add
</I>&gt;<i> credential passing support similar to how file descriptor passing is
</I>&gt;<i> done but it'll probably have to wait until the next Twisted release. A
</I>&gt;<i> straight-forward work-around eludes me.
</I>&gt;<i>
</I>&gt;<i> Tom
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Jul 3, 2012 at 8:16 AM, Tom Cocagne &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tom.cocagne at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> I believe credential passing over Unix sockets is a new feature in
</I>&gt;&gt;<i> Twisted 12.1. The older versions I used to develop this project didn't
</I>&gt;&gt;<i> support that feature so I had to implement it myself. From the
</I>&gt;&gt;<i> stacktrace, I'm guessing that my workaround for this is clashing with
</I>&gt;&gt;<i> Twisted's new build-in support. I'll try and take a look at this in
</I>&gt;&gt;<i> the near future.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tom
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, Jul 3, 2012 at 5:27 AM, Tobias Oberstein
</I>&gt;&gt;<i> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tobias.oberstein at tavendo.de</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> For anyone interested in taking a look, I've just released a native-Python
</I>&gt;&gt;&gt;&gt;<i> implementation of the DBus protocol for Twisted. The intent of the
</I>&gt;&gt;&gt;&gt;<i> implementation is to provide Twisted applications with a full-featured DBus API
</I>&gt;&gt;&gt;&gt;<i> that is consistent with the rest of the framework and does not require the use
</I>&gt;&gt;&gt;&gt;<i> of the glib reactor or libdbus Python bindings.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Cool! Also great work on the examples, tutorial and protocol overview!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I'm having problems with the desktop notification example though .. any hints?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">oberstet at ubuntu10bld_klon0</A>:~/scm/twisted_dbus/doc/tutorial_examples$ ~/python273/bin/python -V
</I>&gt;&gt;&gt;<i> Python 2.7.3
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">oberstet at ubuntu10bld_klon0</A>:~/scm/twisted_dbus/doc/tutorial_examples$ uname -a
</I>&gt;&gt;&gt;<i> Linux ubuntu10bld_klon0 2.6.32-41-generic #91-Ubuntu SMP Wed Jun 13 11:44:43 UTC 2012 i686 GNU/Linux
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">oberstet at ubuntu10bld_klon0</A>:~/scm/twisted_dbus/doc/tutorial_examples$ ~/python273/bin/python desktop_noficiation
</I>&gt;&gt;&gt;<i> Unhandled Error
</I>&gt;&gt;&gt;<i> Traceback (most recent call last):
</I>&gt;&gt;&gt;<i>   File &quot;/home/oberstet/python273/lib/python2.7/site-packages/twisted/python/log.py&quot;, line 84, in callWithLogger
</I>&gt;&gt;&gt;<i>     return callWithContext({&quot;system&quot;: lp}, func, *args, **kw)
</I>&gt;&gt;&gt;<i>   File &quot;/home/oberstet/python273/lib/python2.7/site-packages/twisted/python/log.py&quot;, line 69, in callWithContext
</I>&gt;&gt;&gt;<i>     return context.call({ILogContext: newCtx}, func, *args, **kw)
</I>&gt;&gt;&gt;<i>   File &quot;/home/oberstet/python273/lib/python2.7/site-packages/twisted/python/context.py&quot;, line 118, in callWithContext
</I>&gt;&gt;&gt;<i>     return self.currentContext().callWithContext(ctx, func, *args, **kw)
</I>&gt;&gt;&gt;<i>   File &quot;/home/oberstet/python273/lib/python2.7/site-packages/twisted/python/context.py&quot;, line 81, in callWithContext
</I>&gt;&gt;&gt;<i>     return func(*args,**kw)
</I>&gt;&gt;&gt;<i> --- &lt;exception caught here&gt; ---
</I>&gt;&gt;&gt;<i>   File &quot;/home/oberstet/python273/lib/python2.7/site-packages/twisted/internet/posixbase.py&quot;, line 614, in _doReadOrWrite
</I>&gt;&gt;&gt;<i>     why = selectable.doRead()
</I>&gt;&gt;&gt;<i>   File &quot;/home/oberstet/python273/lib/python2.7/site-packages/twisted/internet/unix.py&quot;, line 169, in doRead
</I>&gt;&gt;&gt;<i>     fd = struct.unpack('i', ancillary[0][2])[0]
</I>&gt;&gt;&gt;<i> struct.error: unpack requires a string argument of length 4
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This is on Twisted 12.1
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058214.html">[Twisted-Python] ANN: Twisted DBus 1.0
</A></li>
	<LI>Next message (by thread): <A HREF="058211.html">[Twisted-Python] ANN: Twisted DBus 1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58219">[ date ]</a>
              <a href="thread.html#58219">[ thread ]</a>
              <a href="subject.html#58219">[ subject ]</a>
              <a href="author.html#58219">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
