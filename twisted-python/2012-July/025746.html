<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Assigning%20AMP%20box%20senders%20%26%20receivers%20from%20the%0A%09responder&In-Reply-To=E971312A-D758-4EF4-9521-A5AA4DCDCA42%40lvh.cc">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025735.html">
   <LINK REL="Next"  HREF="025748.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Assigning%20AMP%20box%20senders%20%26%20receivers%20from%20the%0A%09responder&In-Reply-To=E971312A-D758-4EF4-9521-A5AA4DCDCA42%40lvh.cc"
       TITLE="[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Jul  3 17:53:28 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025735.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
        <LI>Next message: <A HREF="025748.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25746">[ date ]</a>
              <a href="thread.html#25746">[ thread ]</a>
              <a href="subject.html#25746">[ subject ]</a>
              <a href="author.html#25746">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 3, 2012, at 12:08 AM, Laurens Van Houtven &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">_ at lvh.cc</A>&gt; wrote:

&gt;<i> I'm trying to implement a command called &quot;Become&quot; that allows a staff member to work as if he was the user himself. The most obvious way (to me at least) to do that  to create the customer API (an IBoxReceiver/amp.BoxDispatcher subclass) for that customer (that'd normally be the Realm's job -- but since we're already logged in as an administrator, we don't go through Cred again), and hook up the current connection with that box receiver. Yay, code reuse!
</I>
Why not just go through cred again?  (If you look for 'Preauthenticated' in the Divmod code base you'll find that this is actually something of a design pattern.)

&gt;<i> I don't see an obvious way to get a reference to the boxReceiver/boxSender from the responder method using documented APIs. Does this just mean I have to leak a reference to them all the way down? Am I doing something stupid?
</I>
This is why the lowest level of argument parsing is fromString*Proto* rather than just fromString.  You can write an Argument that doesn't actually look at the box and gives you any necessary properties from the protocol (or from the transport).  It was originally written so you can ask for the host and peer addresses for P2P stuff, but this is another possible use.

Sorry I don't have time to be more expansive at the moment, I hope that's enough to get you un-stuck,

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120703/e6647265/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120703/e6647265/attachment.htm</A> 
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025735.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
	<LI>Next message: <A HREF="025748.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25746">[ date ]</a>
              <a href="thread.html#25746">[ thread ]</a>
              <a href="subject.html#25746">[ subject ]</a>
              <a href="author.html#25746">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
