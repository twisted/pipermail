<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] i want to update 1000 devices running as	servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20i%20want%20to%20update%201000%20devices%20running%20as%0A%09servers&In-Reply-To=CAOHwv5624yPBGQyJGr9cNjf8pWvz%3D-7xdcY8ouJ2ke%3DwHO86Sg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025857.html">
   <LINK REL="Next"  HREF="025860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] i want to update 1000 devices running as	servers</H1>
    <B>Laurens Van Houtven</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20i%20want%20to%20update%201000%20devices%20running%20as%0A%09servers&In-Reply-To=CAOHwv5624yPBGQyJGr9cNjf8pWvz%3D-7xdcY8ouJ2ke%3DwHO86Sg%40mail.gmail.com"
       TITLE="[Twisted-Python] i want to update 1000 devices running as	servers">_ at lvh.cc
       </A><BR>
    <I>Fri Jul 20 03:51:05 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025857.html">[Twisted-Python] i want to update 1000 devices running as servers
</A></li>
        <LI>Next message: <A HREF="025860.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25858">[ date ]</a>
              <a href="thread.html#25858">[ thread ]</a>
              <a href="subject.html#25858">[ subject ]</a>
              <a href="author.html#25858">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What version of twisted are you using and which reactor is it using? (You can tell from the logs)

Note that your process for getting data from the datasource is blocking. What sort of data source is it, and why are you stripping stuff off of it? You might want to consider something more cooperative, such as for example a file producer:

<A HREF="http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.FileSender.html">http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.FileSender.html</A>

I'm assuming you are aware of all of the issues involving UDP (specifically, that in the real world your file is probably not going to make it to the other side)

The basic pattern will probably be something like:
1) create 100 deferreds that will fire when you're done transferring
2) gatherResults/DeferredList to wait on all of them
3) do (1) again in a callback to that deferred list until you run out of clients

Twisted might have some standard tool somewhere to implement this, but I don't know about it.

cheers
lvh


On 20 Jul 2012, at 09:01, Luka Rahne wrote:

&gt;<i> I have like 1000 devices that need update that takes like 1 minute each. I want them to update as quick as possible, sending lines from sx file, using UDP and for each line i got reponse &quot;OK&quot;.
</I>&gt;<i> 
</I>&gt;<i> Here is code that works for up to 500 servers, but not so well when i go more (it just does not finish)
</I>&gt;<i> 
</I>&gt;<i> my current  simplified client and server_emulator code is here:
</I>&gt;<i> <A HREF="https://gist.github.com/3144857">https://gist.github.com/3144857</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> currently i have only one server for simulation, but in real world it will be 1000 different IP-s.
</I>&gt;<i> 
</I>&gt;<i> I was trying to stop and run reactor but did not work (reactor is not rerunnable exception or somthing like that).
</I>&gt;<i>  I want to run lets say 100 updates at time and once some update is finished i want to remove this protocol out of job and schedule new one.
</I>&gt;<i> 
</I>&gt;<i> Can somebody give some pointers?
</I>&gt;<i> 
</I>&gt;<i> I am running this on windows if that is an issue.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025857.html">[Twisted-Python] i want to update 1000 devices running as servers
</A></li>
	<LI>Next message: <A HREF="025860.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25858">[ date ]</a>
              <a href="thread.html#25858">[ thread ]</a>
              <a href="subject.html#25858">[ subject ]</a>
              <a href="author.html#25858">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
