<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Effects of backlog parameter on listenTCP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Effects%20of%20backlog%20parameter%20on%20listenTCP&In-Reply-To=634914A010D0B943A035D226786325D43379642D0E%40EXVMBX020-12.exch020.serverdata.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025851.html">
   <LINK REL="Next"  HREF="025854.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Effects of backlog parameter on listenTCP</H1>
    <B>Tim Allen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Effects%20of%20backlog%20parameter%20on%20listenTCP&In-Reply-To=634914A010D0B943A035D226786325D43379642D0E%40EXVMBX020-12.exch020.serverdata.net"
       TITLE="[Twisted-Python] Effects of backlog parameter on listenTCP">screwtape at froup.com
       </A><BR>
    <I>Wed Jul 18 21:26:26 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025851.html">[Twisted-Python] Effects of backlog parameter on listenTCP
</A></li>
        <LI>Next message: <A HREF="025854.html">[Twisted-Python] Effects of backlog parameter on listenTCP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25852">[ date ]</a>
              <a href="thread.html#25852">[ thread ]</a>
              <a href="subject.html#25852">[ subject ]</a>
              <a href="author.html#25852">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jul 18, 2012 at 04:43:01PM -0700, Tobias Oberstein wrote:
&gt;<i> Could someone shortly elaborate on the semantics / effect of the parameter &quot;backlog&quot; with listenTCP?
</I>
It exactly corresponds to the &quot;backlog&quot; parameter of the BSD socket API
function &quot;listen(int sockfd, int backlog)&quot;. On my Debian Testing
machine, the listen(2) manpage says:

    The backlog argument defines the maximum length to which the queue
    of pending connections for sockfd may grow. If a connection request
    arrives when the queue is full, the client may receive an error with
    an indication of ECONNREFUSED or, if the underlying protocol
    supports retransmission, the request may be ignored so that a later
    reattempt at connection succeeds.

..and later:

    The behavior of the backlog argument on TCP sockets changed with
    Linux 2.2. Now it specifies the queue length for completely
    established sockets waiting to be accepted, instead of the number of
    incomplete connection requests.  The maximum length of the queue for
    incomplete sockets can be set using
    /proc/sys/net/ipv4/tcp_max_syn_backlog.  When syncookies are enabled
    there is no logical maximum length and this setting is ignored. See
    tcp(7) for more information.

    If the backlog argument is greater than the value in
    /proc/sys/net/core/somaxconn, then it is silently truncated to that
    value; the default value in this file is 128. In kernels before
    2.4.25, this limit was a hard coded value, SOMAXCONN, with the value
    128.

Obviously the Twisted documentation can't go into all this detail
because Twisted runs on more operating systems than just Linux. Every OS
that supports the BSD socket API should have documentation explaining
the precise definition and meaning of the backlog parameter on that
platform. For example, here's the MSDN docs for the listen() function in
WinSock:

<A HREF="http://msdn.microsoft.com/en-us/library/windows/desktop/ms739168%28v=vs.85%29.aspx">http://msdn.microsoft.com/en-us/library/windows/desktop/ms739168%28v=vs.85%29.aspx</A>


</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025851.html">[Twisted-Python] Effects of backlog parameter on listenTCP
</A></li>
	<LI>Next message: <A HREF="025854.html">[Twisted-Python] Effects of backlog parameter on listenTCP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25852">[ date ]</a>
              <a href="thread.html#25852">[ thread ]</a>
              <a href="subject.html#25852">[ subject ]</a>
              <a href="author.html#25852">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
