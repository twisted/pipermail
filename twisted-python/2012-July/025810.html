<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to best log server/client interactions from a	test?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20best%20log%20server/client%20interactions%20from%20a%0A%09test%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025836.html">
   <LINK REL="Next"  HREF="025813.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to best log server/client interactions from a	test?</H1>
    <B>Dan Milstein</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20best%20log%20server/client%20interactions%20from%20a%0A%09test%3F&In-Reply-To="
       TITLE="[Twisted-Python] How to best log server/client interactions from a	test?">dan at wingu.com
       </A><BR>
    <I>Thu Jul 12 16:31:09 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025836.html">[Twisted-Python] A few simple questions
</A></li>
        <LI>Next message: <A HREF="025813.html">[Twisted-Python] How to best log server/client interactions	from a test?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25810">[ date ]</a>
              <a href="thread.html#25810">[ thread ]</a>
              <a href="subject.html#25810">[ subject ]</a>
              <a href="author.html#25810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>'lo all,

I've been doing some work with the twisted.mail.imap4 module, and its associated unit tests (in order to learn the code more, I'm tackling a few of the outstanding tickets).

When running those tests, I'd often like to log all the server/client interaction.  I managed to do so by way of hacking the code in twisted.protocols.loopback, but that feels pretty wrong.  What's a good way to get all the interaction logged?

To be more specific, the tests in question (e.g. test_imap.NewFetchTestCase), do a lot of:

    d = loopback.loopbackTCP(self.server, self.client, noisy=False)
    d.addCallback(lambda x : self.assertEqual(self.result, self.expected))
    return d

What's a Good Way to get all the traffic going over that loopback logged?  Setting noisy to True merely gets it to log some protocol startup/teardown-type messages.  

Or: given that I've figured out how to hack loopback.lookupbackTCP, if there's general utility, I can certainly add a keyword arg to trigger logging of all messages, e.g. logAll=False (I'm trying to find something which feels meaningfully different from 'noisy', because it would seem Very Wrong Indeed to make noisy suddenly produce vastly more log output).  Is that something people might be interested in?

Thanks,
-Dan
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025836.html">[Twisted-Python] A few simple questions
</A></li>
	<LI>Next message: <A HREF="025813.html">[Twisted-Python] How to best log server/client interactions	from a test?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25810">[ date ]</a>
              <a href="thread.html#25810">[ thread ]</a>
              <a href="subject.html#25810">[ subject ]</a>
              <a href="author.html#25810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
