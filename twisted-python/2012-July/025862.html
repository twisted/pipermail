<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] i want to update 1000 devices running as	servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20i%20want%20to%20update%201000%20devices%20running%20as%0A%09servers&In-Reply-To=CAOHwv5624yPBGQyJGr9cNjf8pWvz%3D-7xdcY8ouJ2ke%3DwHO86Sg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025865.html">
   <LINK REL="Next"  HREF="025864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] i want to update 1000 devices running as	servers</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20i%20want%20to%20update%201000%20devices%20running%20as%0A%09servers&In-Reply-To=CAOHwv5624yPBGQyJGr9cNjf8pWvz%3D-7xdcY8ouJ2ke%3DwHO86Sg%40mail.gmail.com"
       TITLE="[Twisted-Python] i want to update 1000 devices running as	servers">exarkun at twistedmatrix.com
       </A><BR>
    <I>Fri Jul 20 08:12:28 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025865.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
        <LI>Next message: <A HREF="025864.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25862">[ date ]</a>
              <a href="thread.html#25862">[ thread ]</a>
              <a href="subject.html#25862">[ subject ]</a>
              <a href="author.html#25862">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07:01 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">luka.rahne at gmail.com</A> wrote:
&gt;<i>I have like 1000 devices that need update that takes like 1 minute 
</I>&gt;<i>each. I
</I>&gt;<i>want them to update as quick as possible, sending lines from sx file, 
</I>&gt;<i>using
</I>&gt;<i>UDP and for each line i got reponse &quot;OK&quot;.
</I>&gt;<i>
</I>&gt;<i>Here is code that works for up to 500 servers, but not so well when i 
</I>&gt;<i>go
</I>&gt;<i>more (it just does not finish)
</I>
One problem you need to consider is that all platforms limit the number 
of simultaneous file descriptors (sockets) you may use at once.  On 
Windows, this limit is around 500 by default.  You can raise it to a 
much larger number (but I forget what) by using Twisted's IOCP reactor 
instead of the default select reactor.

See the reactor selection howto on the website for details.
&gt;<i>my current  simplified client and server_emulator code is here:
</I>&gt;<i><A HREF="https://gist.github.com/3144857">https://gist.github.com/3144857</A>
</I>
Another problem with this code is the while loop inside sendDatagram. 
Twisted is a cooperative multitasking system.  You cannot execute large 
loops like that and have everything work properly or well.

Programs based on Twisted do a little bit of work, give up execution 
control, then do a little bit more work when they regain execution 
control.  The work is event-driven, so (for example) perhaps you want to 
replace the while loop with code that sends the next datagram when the 
previous datagram is acknowledged.
&gt;<i>
</I>&gt;<i>currently i have only one server for simulation, but in real world it 
</I>&gt;<i>will
</I>&gt;<i>be 1000 different IP-s.
</I>&gt;<i>
</I>&gt;<i>I was trying to stop and run reactor but did not work (reactor is not
</I>&gt;<i>rerunnable exception or somthing like that).
</I>
Yes.  You can only call reactor.run() once.  That shouldn't be a very 
important limitation.  You can do as much networking as you want while 
only running the reactor once.
&gt;<i>I want to run lets say 100 updates at time and once some update
</I>&gt;<i>is finished i want to remove this protocol out of job and schedule new 
</I>&gt;<i>one.
</I>
Take a look at twisted.internet.task.cooperate.  Here's an example 
demonstrating its use to do a limited amount of work concurrently:

<A HREF="http://as.ynchrono.us/2006/05/limiting-parallelism_22.html">http://as.ynchrono.us/2006/05/limiting-parallelism_22.html</A>
&gt;<i>Can somebody give some pointers?
</I>&gt;<i>
</I>&gt;<i>I am running this on windows if that is an issue.
</I>
Jean-Paul

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025865.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
	<LI>Next message: <A HREF="025864.html">[Twisted-Python] i want to update 1000 devices running as	servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25862">[ date ]</a>
              <a href="thread.html#25862">[ thread ]</a>
              <a href="subject.html#25862">[ subject ]</a>
              <a href="author.html#25862">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
