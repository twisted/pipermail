<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A few simple questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20few%20simple%20questions&In-Reply-To=%3Crowen-09AE70.10313618072012%40news.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058305.html">
   <LINK REL="Next"  HREF="058317.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A few simple questions</H1>
    <B>Russell E. Owen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20few%20simple%20questions&In-Reply-To=%3Crowen-09AE70.10313618072012%40news.gmane.org%3E"
       TITLE="[Twisted-Python] A few simple questions">rowen at uw.edu
       </A><BR>
    <I>Wed Jul 18 11:31:36 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058305.html">[Twisted-Python] A few simple questions
</A></li>
        <LI>Next message (by thread): <A HREF="058317.html">[Twisted-Python] A few simple questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58315">[ date ]</a>
              <a href="thread.html#58315">[ thread ]</a>
              <a href="subject.html#58315">[ subject ]</a>
              <a href="author.html#58315">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In article &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">DB49C8B0-451D-46E4-9B3B-58519CDAA75A at twistedmatrix.com</A>&gt;,
 Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i> On Jul 17, 2012, at 9:25 AM, Russell E. Owen &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rowen at uw.edu</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; Can you elaborate on the case?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I've found that Twisted sometimes swallows errors unless I am extremely 
</I>&gt;<i> &gt; careful. I would like to be able to check a protocol to make sure it is 
</I>&gt;<i> &gt; operational (connected and happy) as a means of assuring that I've not 
</I>&gt;<i> &gt; missed an error.
</I>&gt;<i> 
</I>&gt;<i> This isn't really elaborating.
</I>&gt;<i> 
</I>&gt;<i> What error does Twisted swallow?  In what manner do you have to be &quot;careful&quot;? 
</I>&gt;<i>  What characterizes a protocol's &quot;happiness&quot; beyond its momentary 
</I>&gt;<i> connected-ness?  How would you &quot;miss&quot; an error?
</I>&gt;<i> 
</I>&gt;<i> Twisted is event-driven, so pretty much all the state changes you're 
</I>&gt;<i> interested in are delivered as events (method calls on your object).  If you 
</I>&gt;<i> are &quot;missing&quot; them because Twisted isn't calling them, that sounds like a 
</I>&gt;<i> really serious bug we should investigate.  If you're missing them for some 
</I>&gt;<i> other reason then you should just fix your code so it doesn't miss them any 
</I>&gt;<i> more :).
</I>
Regarding swallowing errors:

I'm not claiming Twisted has bugs in this area (though I found and 
reported one obscure case that may be a bug: errors in  tk command 
::<i>tk::Mac::quit are silently ignored).
</I>
However, I found it rather easy to make coding errors that cause Twisted 
to not report errors. I have heard the same complaint from colleagues.

At this point I think my code is robust, though I will be more confident 
once I finish my unit tests.

If there is a &quot;best practices for error handling&quot; document I'd love to 
read it. I found an overview of deferreds that was helpful. It pointed 
out that addCallbacks is not the same as addCallback followed by 
addErrback and I'm not sure I'm handling the difference correctly. Right 
now I use addCallbacks(callback, errback). This does not call the 
errback if the callback fails. I do this intentionally because I want 
the errback to focus on problems with the connection, not my reaction to 
it, and the default error handler seems to report errors in the 
callback, which is fine.

Regarding state:

I'm used to event-driven frameworks that both offer callbacks and the 
ability to query state. I find it helpful for reporting errors as soon 
as possible (e.g. before writing check if the socket is connected; raise 
an exception if not). For a TCP/IP socket, I view a socket as having 
these states:
- connecting
- connected
- disconnecting (with associated reason)
- disconnected (with associated reason)
TCP/IP Servers have a similar set of states, with connected -&gt; listening

However, it's certainly true that being able to query state is not 
essential; callbacks suffice.

-- Russell



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058305.html">[Twisted-Python] A few simple questions
</A></li>
	<LI>Next message (by thread): <A HREF="058317.html">[Twisted-Python] A few simple questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58315">[ date ]</a>
              <a href="thread.html#58315">[ thread ]</a>
              <a href="subject.html#58315">[ subject ]</a>
              <a href="author.html#58315">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
