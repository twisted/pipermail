<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] unit testing question: twisted with tk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unit%20testing%20question%3A%20twisted%20with%20tk&In-Reply-To=%3C5006FC68.8050307%40itamarst.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058316.html">
   <LINK REL="Next"  HREF="058320.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] unit testing question: twisted with tk</H1>
    <B>Itamar Turner-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unit%20testing%20question%3A%20twisted%20with%20tk&In-Reply-To=%3C5006FC68.8050307%40itamarst.org%3E"
       TITLE="[Twisted-Python] unit testing question: twisted with tk">itamar at itamarst.org
       </A><BR>
    <I>Wed Jul 18 12:11:52 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058316.html">[Twisted-Python] unit testing question: twisted with tk
</A></li>
        <LI>Next message (by thread): <A HREF="058320.html">[Twisted-Python] unit testing question: twisted with tk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58318">[ date ]</a>
              <a href="thread.html#58318">[ thread ]</a>
              <a href="subject.html#58318">[ subject ]</a>
              <a href="author.html#58318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/18/2012 01:01 PM, Russell E. Owen wrote:
&gt;<i> I have a bit of code that combines twisted with Tkinter
</I>&gt;<i> and now I'd like to write some unittests for it.
</I>&gt;<i>
</I>&gt;<i> I can't seem to figure out how to get TwistedTrial to handle this case.
</I>&gt;<i> I've written a unit test like this:
</I>&gt;<i>
</I>&gt;<i> from twisted.trial import unittest
</I>&gt;<i> from twisted.internet.defer import Deferred
</I>&gt;<i> import twisted.internet.tksupport
</I>&gt;<i> root = Tkinter.Tk()
</I>&gt;<i> twisted.internet.tksupport.install(root)
</I>&gt;<i> from twisted.internet import reactor
</I>&gt;<i>
</I>&gt;<i> class TestTkSocket(unittest.TestCase):
</I>&gt;<i>      def test...(...):
</I>&gt;<i>          ....
</I>&gt;<i>
</I>&gt;<i> the one test so far returns a deferred and calls errback on that
</I>&gt;<i> deferred if the test fails, and callback if it succeeds. When I run the
</I>&gt;<i> unit test with trial I get this error error:
</I>&gt;<i> twisted.trial.util.DirtyReactorAggregateError
</I>
The problem is that setting up tk support involves a repeatedly 
scheduled event, which means it's in the reactor causing that warning. 
Make sure you call tksupport.uninstall() at the end of each test, by 
either putting in tearDown or doing self.addCleanup(tksupport.uninstall).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058316.html">[Twisted-Python] unit testing question: twisted with tk
</A></li>
	<LI>Next message (by thread): <A HREF="058320.html">[Twisted-Python] unit testing question: twisted with tk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58318">[ date ]</a>
              <a href="thread.html#58318">[ thread ]</a>
              <a href="subject.html#58318">[ subject ]</a>
              <a href="author.html#58318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
