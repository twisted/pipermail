<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] deferred graph?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20deferred%20graph%3F&In-Reply-To=%3C87k3y0zc2a.fsf%40hermes.hocat.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058323.html">
   <LINK REL="Next"  HREF="058340.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] deferred graph?</H1>
    <B>Tom Prince</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20deferred%20graph%3F&In-Reply-To=%3C87k3y0zc2a.fsf%40hermes.hocat.ca%3E"
       TITLE="[Twisted-Python] deferred graph?">tom.prince at ualberta.net
       </A><BR>
    <I>Wed Jul 18 21:04:13 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058323.html">[Twisted-Python] deferred graph?
</A></li>
        <LI>Next message (by thread): <A HREF="058340.html">[Twisted-Python] deferred graph?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58326">[ date ]</a>
              <a href="thread.html#58326">[ thread ]</a>
              <a href="subject.html#58326">[ subject ]</a>
              <a href="author.html#58326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dan Stromberg &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">drsalists at gmail.com</A>&gt; writes:
&gt;<i> Strangely, this doesn't give the report until after the sleep finishes...
</I>
That is because the code you included doesn't actually print the
returned traceback. The reason that it gets printed at the end is
because it gets garbage collected then.

The following code prints out the traceback twice, with the first before
the first sleep and the second (prefixed with &quot;Unhandled error in
Deferred:&quot;) before the second sleep.

  Tom

#!/usr/bin/python

import time
from twisted.internet import defer

defer.setDebugging(True)

def functionReturningDeferred():
    return defer.succeed('Some value')

d = functionReturningDeferred()
def printValue(value):
    print 'Yay, I got %r' % value
    return value
def second_callback(value):
    print 'still %r' % value
    return gen_error()
def third_callback(value):
    print 'and still %r' % value
    return value

def gen_error():
    return defer.fail(AssertionError)

def got_error(value):
    print 'bad thing: %r' % value

d.addCallback(printValue)
d.addCallback(second_callback)
d.addCallback(third_callback)
print d._debugInfo._getDebugTracebacks()
time.sleep(2)
del d
time.sleep(2)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058323.html">[Twisted-Python] deferred graph?
</A></li>
	<LI>Next message (by thread): <A HREF="058340.html">[Twisted-Python] deferred graph?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58326">[ date ]</a>
              <a href="thread.html#58326">[ thread ]</a>
              <a href="subject.html#58326">[ subject ]</a>
              <a href="author.html#58326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
