<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Assigning%20AMP%20box%20senders%20%26%20receivers%20from%20the%0A%09responder&In-Reply-To=%3CFFB735D4-BF2F-4FB9-BC82-DDE7AADFE848%40lvh.cc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058220.html">
   <LINK REL="Next"  HREF="058223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder</H1>
    <B>Laurens Van Houtven</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Assigning%20AMP%20box%20senders%20%26%20receivers%20from%20the%0A%09responder&In-Reply-To=%3CFFB735D4-BF2F-4FB9-BC82-DDE7AADFE848%40lvh.cc%3E"
       TITLE="[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder">_ at lvh.cc
       </A><BR>
    <I>Wed Jul  4 01:39:43 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058220.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
        <LI>Next message (by thread): <A HREF="058223.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58222">[ date ]</a>
              <a href="thread.html#58222">[ thread ]</a>
              <a href="subject.html#58222">[ subject ]</a>
              <a href="author.html#58222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03 Jul 2012, at 23:53, Glyph wrote:

&gt;<i> 
</I>&gt;<i> On Jul 3, 2012, at 12:08 AM, Laurens Van Houtven &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">_ at lvh.cc</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I'm trying to implement a command called &quot;Become&quot; that allows a staff member to work as if he was the user himself. The most obvious way (to me at least) to do that  to create the customer API (an IBoxReceiver/amp.BoxDispatcher subclass) for that customer (that'd normally be the Realm's job -- but since we're already logged in as an administrator, we don't go through Cred again), and hook up the current connection with that box receiver. Yay, code reuse!
</I>&gt;<i> 
</I>&gt;<i> Why not just go through cred again?  (If you look for 'Preauthenticated' in the Divmod code base you'll find that this is actually something of a design pattern.)
</I>
I haven't seen that class, I'll take a look.

I didn't want to go through fred again because I don't see the benefit. I'm not trying to do any authentication (that part's already done), admins don't know the relevant password, so it'd pretty much be IRealm.requestAvatar. I don't understand why portal, credentials checkers... come into play.

&gt;&gt;<i> I don't see an obvious way to get a reference to the boxReceiver/boxSender from the responder method using documented APIs. Does this just mean I have to leak a reference to them all the way down? Am I doing something stupid?
</I>&gt;<i> 
</I>&gt;<i> This is why the lowest level of argument parsing is fromString*Proto* rather than just fromString.  You can write an Argument that doesn't actually look at the box and gives you any necessary properties from the protocol (or from the transport).  It was originally written so you can ask for the host and peer addresses for P2P stuff, but this is another possible use.
</I>
So what would this custom Argument be? Right now I take the user id of the user I'm trying to be.

&gt;<i> Sorry I don't have time to be more expansive at the moment, I hope that's enough to get you un-stuck,
</I>
Afraid not :( That's okay, I have different tests to go fix :)

&gt;<i> 
</I>&gt;<i> -glyph
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058220.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
	<LI>Next message (by thread): <A HREF="058223.html">[Twisted-Python] Assigning AMP box senders &amp; receivers from the	responder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58222">[ date ]</a>
              <a href="thread.html#58222">[ thread ]</a>
              <a href="subject.html#58222">[ subject ]</a>
              <a href="author.html#58222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
