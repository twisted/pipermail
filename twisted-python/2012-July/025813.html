<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to best log server/client interactions	from a test?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20best%20log%20server/client%20interactions%0A%09from%20a%20test%3F&In-Reply-To=EB454F67-CEBD-4137-9794-4EFA432A5774%40wingu.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025810.html">
   <LINK REL="Next"  HREF="025818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to best log server/client interactions	from a test?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20best%20log%20server/client%20interactions%0A%09from%20a%20test%3F&In-Reply-To=EB454F67-CEBD-4137-9794-4EFA432A5774%40wingu.com"
       TITLE="[Twisted-Python] How to best log server/client interactions	from a test?">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Jul 13 18:21:33 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025810.html">[Twisted-Python] How to best log server/client interactions from a	test?
</A></li>
        <LI>Next message: <A HREF="025818.html">[Twisted-Python] How to best log server/client interactions	from a test?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25813">[ date ]</a>
              <a href="thread.html#25813">[ thread ]</a>
              <a href="subject.html#25813">[ subject ]</a>
              <a href="author.html#25813">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 12, 2012, at 1:31 PM, Dan Milstein &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dan at wingu.com</A>&gt; wrote:

&gt;<i> 'lo all,
</I>&gt;<i> 
</I>&gt;<i> I've been doing some work with the twisted.mail.imap4 module, and its associated unit tests (in order to learn the code more, I'm tackling a few of the outstanding tickets).
</I>&gt;<i> 
</I>&gt;<i> When running those tests, I'd often like to log all the server/client interaction.  I managed to do so by way of hacking the code in twisted.protocols.loopback, but that feels pretty wrong.  What's a good way to get all the interaction logged?
</I>&gt;<i> 
</I>&gt;<i> To be more specific, the tests in question (e.g. test_imap.NewFetchTestCase), do a lot of:
</I>&gt;<i> 
</I>&gt;<i>    d = loopback.loopbackTCP(self.server, self.client, noisy=False)
</I>&gt;<i>    d.addCallback(lambda x : self.assertEqual(self.result, self.expected))
</I>&gt;<i>    return d
</I>&gt;<i> 
</I>&gt;<i> What's a Good Way to get all the traffic going over that loopback logged?  Setting noisy to True merely gets it to log some protocol startup/teardown-type messages.  
</I>&gt;<i> 
</I>&gt;<i> Or: given that I've figured out how to hack loopback.lookupbackTCP, if there's general utility, I can certainly add a keyword arg to trigger logging of all messages, e.g. logAll=False (I'm trying to find something which feels meaningfully different from 'noisy', because it would seem Very Wrong Indeed to make noisy suddenly produce vastly more log output).  Is that something people might be interested in?
</I>&gt;<i> 
</I>
If you're interested in logging at the TCP connection level, have you considered moving this out of your Twisted process entirely and using some tool like Wireshark?  You could build something yourself by interposing transport objects that dump their data, but you'd have to build your own toolchain (command line tools, GUIs, etc) for actually examining the output, whereas existing protocol analysis tools would just do that for you.

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120713/28d46f45/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120713/28d46f45/attachment.htm</A> 
</PRE>






























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025810.html">[Twisted-Python] How to best log server/client interactions from a	test?
</A></li>
	<LI>Next message: <A HREF="025818.html">[Twisted-Python] How to best log server/client interactions	from a test?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25813">[ date ]</a>
              <a href="thread.html#25813">[ thread ]</a>
              <a href="subject.html#25813">[ subject ]</a>
              <a href="author.html#25813">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
