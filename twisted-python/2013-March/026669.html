<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] logging in twisted based projects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20logging%20in%20twisted%20based%20projects&In-Reply-To=1b2001ce209b%2484b2e7a0%248e18b6e0%24%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026668.html">
   <LINK REL="Next"  HREF="026670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] logging in twisted based projects</H1>
    <B>Lucas Taylor</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20logging%20in%20twisted%20based%20projects&In-Reply-To=1b2001ce209b%2484b2e7a0%248e18b6e0%24%40gmail.com"
       TITLE="[Twisted-Python] logging in twisted based projects">ltaylor.volks at gmail.com
       </A><BR>
    <I>Thu Mar 14 09:37:03 EDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="026668.html">[Twisted-Python] logging in twisted based projects
</A></li>
        <LI>Next message: <A HREF="026670.html">[Twisted-Python] logging in twisted based projects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26669">[ date ]</a>
              <a href="thread.html#26669">[ thread ]</a>
              <a href="subject.html#26669">[ subject ]</a>
              <a href="author.html#26669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Mar 14, 2013, at 3:05 AM, Sergey Gerasimov wrote:

&gt;<i> I&#8217;m implementing some project based on twisted.
</I>&gt;<i>  
</I>&gt;<i> I would like to use some logging mechanism in my modules and see both twisted generated log records and log records from my modules
</I>&gt;<i> and be able to filter log records by level and  source (generated by twisted, or subset of my modules).
</I>&gt;<i>  
</I>&gt;<i> What should I do in this case?
</I>&gt;<i> Log with python logging module in my code and send log records generated by twisted to PythonLoggingObserver?
</I>&gt;<i> Or should I avoid using of python logging module and log only with twisted logging module? I didn&#8217;t find features like filtering logs in twisted logging.
</I>&gt;<i>  
</I>&gt;<i> Am I right that twisted based log observer uses blocking i/o? Example:
</I>&gt;<i> observer = log.FileLogObserver(sys.stdout) # sys.stdio.write used in implementation
</I>&gt;<i>  
</I>
FileLogObserver will honor a 'system' kwarg that can be used to log the source of a message, so that:

	log.msg('Important message', system='MY_MODULE')

yields:

	2012-11-12 18:53:55-0700 [MY_MODULE] Important message


Arbitrary message formatting can be accomplished by suppling a `format` kwarg in place of a message:

	log.msg(format='[%(level)s] %(msg)s', level='CATASTROPHIC', msg='Important Message', system='MY_MODULE')

yields:

	2012-11-12 18:53:55-0700 [MY_MODULE] [CATASTROPHIC] Important message


That's a bit verbose, so creating a partial wrapper is useful:

from functools import partial
alert = partial(log.msg, format='[%(level)s] %(msg)s', level='CATASTROPHIC', system='MY_MODULE')

alert(msg='Something terrible')
alert(msg='Not so bad', level='INFO')  # override the default level


More generally, calls to log.msg() accept keyword arguments that can be inspected by any registered observer. You may want to write your own log observer and take advantage of this if you have specific filtering requirements.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20130314/cac4a8b8/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20130314/cac4a8b8/attachment.htm</A> 
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026668.html">[Twisted-Python] logging in twisted based projects
</A></li>
	<LI>Next message: <A HREF="026670.html">[Twisted-Python] logging in twisted based projects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26669">[ date ]</a>
              <a href="thread.html#26669">[ thread ]</a>
              <a href="subject.html#26669">[ subject ]</a>
              <a href="author.html#26669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
