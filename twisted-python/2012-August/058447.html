<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted server config: command line, environment or Axiom?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20server%20config%3A%20command%20line%2C%0A%20environment%20or%20Axiom%3F&In-Reply-To=%3C20120808163142.GB10379%40ragnarok.teratorn.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058446.html">
   <LINK REL="Next"  HREF="058448.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted server config: command line, environment or Axiom?</H1>
    <B>Eric P. Mangold</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20server%20config%3A%20command%20line%2C%0A%20environment%20or%20Axiom%3F&In-Reply-To=%3C20120808163142.GB10379%40ragnarok.teratorn.org%3E"
       TITLE="[Twisted-Python] twisted server config: command line, environment or Axiom?">eric at teratorn.org
       </A><BR>
    <I>Wed Aug  8 10:31:42 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058446.html">[Twisted-Python] twisted server config: command line,	environment or Axiom?
</A></li>
        <LI>Next message (by thread): <A HREF="058448.html">[Twisted-Python] twisted server config: command line, environment or Axiom?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58447">[ date ]</a>
              <a href="thread.html#58447">[ thread ]</a>
              <a href="subject.html#58447">[ subject ]</a>
              <a href="author.html#58447">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Aug 08, 2012 at 03:58:27PM +0200, Laurens Van Houtven wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have a bunch of configuration for my service. Things like endpoints, location of the root axiom store? Right now I grab these from the environment. That means that my twistd IServiceMaker plugin's options is pretty much by definition empty.
</I>&gt;<i> 
</I>&gt;<i> I'm wondering if more mature twistd users have already learned the hard way what the best way to manage this is. I see three possible solutions:
</I>&gt;<i> 
</I>&gt;<i> 1. environment variables as I use them now: portable, simple.
</I>&gt;<i> 2. command line options: still pretty portable and simple. additional benefit: easy discoverability of options
</I>
Both, preferrably. Defining all of your configuration in terms of t.p.usage.Options is not a bad thing at all.
It's human readable, and scriptable. And it maps directly to ENV vars or INI files (etc). If you have strange configuration requirements, (like binary files), I think those belong in their own seperate file(s). E.g. SSL certificates, PW files, etc

&gt;<i> 3. axiom store: has the benefit that there's a single source of truth for everything, i.e. I copy a store and I can recreate the service based on that store exactly, using just the store
</I> 
Yeah, I hate that kind of configuration. Configuration is/should-be diffable with standard tools, if possible.

&gt;<i> Like I said, I currently use (1), it looks like (1) and (2) are more or less equivalent, I'm not sure if (3) is a good idea. I'm not really unhappy with (1), it's just that finally writing my ServiceMaker class made me contemplate the options.
</I>&gt;<i> 
</I>&gt;<i> (3) has the downside that it conflates user data with configuration data. I'm not sure that's a good thing or not. It sounds very similar to axiomatic, which I've heard of, seen, but never played with.
</I>
Well as indicated *I don't like it*, but really that is only due to lack of tooling support... :)
 
&gt;<i> I already use environment variables to decide whether or not to run certain tests (&quot;live&quot; functional high level tests, with real disk and network IO, that take way longer than the unit tests to run). I'm going to keep it that way, because there's no obvious way of passing configuration to the tests other than the environment.
</I>
Yeah. Plain ENV vars are probably the best bet there.
 
--
Cheers,
-E


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058446.html">[Twisted-Python] twisted server config: command line,	environment or Axiom?
</A></li>
	<LI>Next message (by thread): <A HREF="058448.html">[Twisted-Python] twisted server config: command line, environment or Axiom?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58447">[ date ]</a>
              <a href="thread.html#58447">[ thread ]</a>
              <a href="subject.html#58447">[ subject ]</a>
              <a href="author.html#58447">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
