From exarkun at twistedmatrix.com  Wed Dec  1 08:43:40 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 01 Dec 2010 13:43:40 -0000
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <20101129120148.GB11887@weiermayer.com>
References: <20101129120148.GB11887@weiermayer.com>
Message-ID: <20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>

On 29 Nov, 12:01 pm, albert.brandl at weiermayer.com wrote:
>Hi!
>
>We are working on a project that has to extract weather information 
>from
>an NMEA stream. There is a NMEAReceiver class, but it only extracts GPS
>information - as expected, since the class is defined in t.p.gps.nmea.
>
>We intend to add the NMEA-0183 messages necessary for my purposes. The
>question is: should we just extend the NMEAReceiver? Weather 
>information
>is not exactly what one would expect in a class below t.p.gps...
>
>On the other hand, it would be strange to create a different kind of
>NMEAReceiver which knows how to handle the messages dealing with
>weather data.

Perhaps the NMEA and GPS parts of NMEAReceiver can be separated from 
each other, so that your weather extractor can use just the former and 
ignore the latter.

You may also want to look at 
https://code.launchpad.net/~lvh/twisted/positioning and see if it 
influences your plans at all.  It would be nice if we eventually merged 
that code. :)

Jean-Paul


From albert.brandl at weiermayer.com  Wed Dec  1 09:33:02 2010
From: albert.brandl at weiermayer.com (Albert Brandl)
Date: Wed, 1 Dec 2010 15:33:02 +0100
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
References: <20101129120148.GB11887@weiermayer.com>
	<20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
Message-ID: <20101201143302.GA12389@weiermayer.com>

On Wed, Dec 01, 2010 at 01:43:40PM -0000, exarkun at twistedmatrix.com wrote:
> Perhaps the NMEA and GPS parts of NMEAReceiver can be separated from 
> each other, so that your weather extractor can use just the former and 
> ignore the latter.

That is not necessary, since I will also need GPS data. I just wondered 
if it would be a good idea to add NMEA messages that have nothing to do 
with GPS to the NMEAReceiver, which is in the package t.p.gps. This 
seems to be misleading. 

But tearing nmea.py apart and moving parts of it to different packages 
looks like much work - not something I'd like to tackle right now :-). 
Maybe I'll just create a subclass of NMEAReceiver and add the necessary 
messages there for now.
 
> You may also want to look at 
> https://code.launchpad.net/~lvh/twisted/positioning and see if it 
> influences your plans at all.  It would be nice if we eventually 
> merged that code. :)

It's kind of hard to understand what this repository is about. The 
README file looks like a copy of the README for Twisted 8.2.0 ;-).

Regards,

Albert
-- 
Albert Brandl
Weiermayer Solutions GmbH      | Abteistra?e 12, A-4813 Altm?nster
phone: +43 (0) 720 70 30 14    | fax: +43 (0) 7612 20 3 56
web: http://www.weiermayer.com


From foom at fuhm.net  Wed Dec  1 10:23:09 2010
From: foom at fuhm.net (James Y Knight)
Date: Wed, 1 Dec 2010 10:23:09 -0500
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <20101201143302.GA12389@weiermayer.com>
References: <20101129120148.GB11887@weiermayer.com>
	<20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
	<20101201143302.GA12389@weiermayer.com>
Message-ID: <83D273A9-7598-490F-8848-9E5104835EAB@fuhm.net>


On Dec 1, 2010, at 9:33 AM, Albert Brandl wrote:

>> You may also want to look at 
>> https://code.launchpad.net/~lvh/twisted/positioning and see if it 
>> influences your plans at all.  It would be nice if we eventually 
>> merged that code. :)
> 
> It's kind of hard to understand what this repository is about. The 
> README file looks like a copy of the README for Twisted 8.2.0 ;-).

Right: it's a branch of Twisted. You can look at the changelog and see what changed. The interesting parts of that branch are all in the twisted/positioning directory, though:
http://bazaar.launchpad.net/%7Elvh/twisted/positioning/files/head%3A/twisted/positioning/

James

From lvh at laurensvh.be  Wed Dec  1 11:26:02 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Wed, 1 Dec 2010 17:26:02 +0100
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <83D273A9-7598-490F-8848-9E5104835EAB@fuhm.net>
References: <20101129120148.GB11887@weiermayer.com>
	<20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
	<20101201143302.GA12389@weiermayer.com>
	<83D273A9-7598-490F-8848-9E5104835EAB@fuhm.net>
Message-ID: <AANLkTintayUFjyjn5u793d3XZD4SRXjM2wefCh_YBhpu@mail.gmail.com>

Hi

I'm the guy that wrote twisted-positioning. The NMEA parser should be
feature-complete, but you might have some difficulty doing the glue
code.

I should really get around to turning that into an actual deliverable...


lvh


From vitaly at synapticvision.com  Thu Dec  2 17:25:52 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 02 Dec 2010 17:25:52 -0500
Subject: [Twisted-Python] - SPAM!!!!!
In-Reply-To: <4cf7e8bb.948fcc0a.5118.34f4@mx.google.com>
References: <4cf7e8bb.948fcc0a.5118.34f4@mx.google.com>
Message-ID: <20101202172552.86462b3k9jy3fdhc@216.129.205.5>



twisted-python at twistedmatrix.com ADMINISTRATOR!!!!


BLOCK THIS RUSSIAN WHO IS SPAMMING OUT LIST PLEASE:
Vovan <sasmekoll at gmail.com>


regards,
subscriber.


Quoting Vovan <sasmekoll at gmail.com>:

> ?????? ???????? ??????? ????? ???????? ?? ?????, ????? ??? ????????  
> ???????? ?? ?? ?????????? ???????????? ??????? ?? ????????????  
> ????????? ???????? ????????? ?? ? ???????? ???????? ????????? ????  
> ????????????????? ? ?????????? ???????? ??? ??????.
> http://samec.org.ua/?p=202
> ?? ??????? ??????????, ??? ??????????. ????? ??? ??????? ??????? ???????.
>





From jaroslaw.fedewicz at gmail.com  Fri Dec  3 17:36:46 2010
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Sat, 4 Dec 2010 00:36:46 +0200
Subject: [Twisted-Python] - SPAM!!!!!
In-Reply-To: <20101202172552.86462b3k9jy3fdhc@216.129.205.5>
References: <4cf7e8bb.948fcc0a.5118.34f4@mx.google.com>
	<20101202172552.86462b3k9jy3fdhc@216.129.205.5>
Message-ID: <BCEEBB38-6E13-464A-9425-854D271C9378@gmail.com>


On Dec 3, 2010, at 12:25 AM, vitaly at synapticvision.com wrote:

> twisted-python at twistedmatrix.com ADMINISTRATOR!!!!
> 
> BLOCK THIS RUSSIAN WHO IS SPAMMING OUT LIST PLEASE:
> Vovan <sasmekoll at gmail.com>


I suspect this must be some new flavor of malware, hijacking email clients (or specifically Gmail) and sending out spam on their behalf. I've got an ol' good letter from a Nigerian princess a few weeks ago; the interesting bit being that it was sent as if by an old acquaintance of mine, with even his signature included.

However if it's not so, that must be a triple-brutal-facepalm way to spam.

?Never trust a human to do the machine's job.?

-- 
Yaroslav Fedevych
Software Developer and Consultant
jaroslaw.fedewicz at gmail.com
+380685061839, +380969783173

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101204/0ee935d3/attachment.htm 

From ndbecker2 at gmail.com  Sat Dec  4 10:47:16 2010
From: ndbecker2 at gmail.com (Neal Becker)
Date: Sat, 04 Dec 2010 10:47:16 -0500
Subject: [Twisted-Python] can I detect a child stopped?
Message-ID: <iddnq5$f1u$1@dough.gmane.org>

Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is there 
some way to detect this?



From exarkun at twistedmatrix.com  Sat Dec  4 11:17:27 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 04 Dec 2010 16:17:27 -0000
Subject: [Twisted-Python] can I detect a child stopped?
In-Reply-To: <iddnq5$f1u$1@dough.gmane.org>
References: <iddnq5$f1u$1@dough.gmane.org>
Message-ID: <20101204161727.2109.1082175532.divmod.xquotient.1813@localhost.localdomain>

On 03:47 pm, ndbecker2 at gmail.com wrote:
>Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is 
>there
>some way to detect this?

The parent will get a SIGCHLD when the child gets SIGSTOP or SIGCONT. 
Using sigaction, you can learn which process was affected, and in what 
way.  We don't have a sigaction wrapper that provides this 
functionality, though (the stdlib signal.signal actually wraps 
sigaction, but it doesn't expose any more functionality than you get 
from signal(2)).

Jean-Paul


From ndbecker2 at gmail.com  Sat Dec  4 14:10:46 2010
From: ndbecker2 at gmail.com (Neal Becker)
Date: Sat, 04 Dec 2010 14:10:46 -0500
Subject: [Twisted-Python] can I detect a child stopped?
References: <iddnq5$f1u$1@dough.gmane.org>
	<20101204161727.2109.1082175532.divmod.xquotient.1813@localhost.localdomain>
Message-ID: <ide3nm$ujv$1@dough.gmane.org>

exarkun at twistedmatrix.com wrote:

> On 03:47 pm, ndbecker2 at gmail.com wrote:
>>Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is
>>there
>>some way to detect this?
> 
> The parent will get a SIGCHLD when the child gets SIGSTOP or SIGCONT.
> Using sigaction, you can learn which process was affected, and in what
> way.  We don't have a sigaction wrapper that provides this
> functionality, though (the stdlib signal.signal actually wraps
> sigaction, but it doesn't expose any more functionality than you get
> from signal(2)).
> 
> Jean-Paul

Didn't twisted already install it's own signal handler for SIGCHLD?  So 
you're suggesting I can chain my own, which then calls the one installed by 
twisted?



From exarkun at twistedmatrix.com  Sun Dec  5 00:05:31 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Dec 2010 05:05:31 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1291525531.51.575622476@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101205/502cedd7/attachment.htm 

From exarkun at twistedmatrix.com  Sun Dec  5 02:29:05 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Dec 2010 07:29:05 -0000
Subject: [Twisted-Python] can I detect a child stopped?
In-Reply-To: <ide3nm$ujv$1@dough.gmane.org>
References: <iddnq5$f1u$1@dough.gmane.org>
	<20101204161727.2109.1082175532.divmod.xquotient.1813@localhost.localdomain>
	<ide3nm$ujv$1@dough.gmane.org>
Message-ID: <20101205072905.2109.1301903683.divmod.xquotient.1817@localhost.localdomain>

On 4 Dec, 07:10 pm, ndbecker2 at gmail.com wrote:
>exarkun at twistedmatrix.com wrote:
>>On 03:47 pm, ndbecker2 at gmail.com wrote:
>>>Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is
>>>there
>>>some way to detect this?
>>
>>The parent will get a SIGCHLD when the child gets SIGSTOP or SIGCONT.
>>Using sigaction, you can learn which process was affected, and in what
>>way.  We don't have a sigaction wrapper that provides this
>>functionality, though (the stdlib signal.signal actually wraps
>>sigaction, but it doesn't expose any more functionality than you get
>>from signal(2)).
>>
>>Jean-Paul
>
>Didn't twisted already install it's own signal handler for SIGCHLD?  So
>you're suggesting I can chain my own, which then calls the one 
>installed by
>twisted?

No, at least not with `signal.signal`, because the necessary information 
isn't exposed by Python.  You need to get the siginfo_t that 
sigaction(2) provides, but isn't exposed to Python.

If there were a module exposing that functionality, then you could 
perhaps work something out.  If such a module were generally available, 
Twisted could even try using it to provide this functionality out of the 
box.

Jean-Paul


From devnetwork at gmail.com  Sun Dec  5 05:37:54 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Sun, 5 Dec 2010 12:37:54 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
Message-ID: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>

Hello everybody. Hope you have a good weekend.

I'm trying to port my distributed job server project to twisted but I
have a few questions.

I just tested twisted with protocol.Protocol socket handler class and
it seems like that it creates a new instance for each connection. I
want to put those connection's ip addresses into an array. Where
should I do that exactly?

How can I get ip address and port information out of self.transport.getPeer()?

That's all for now.

Thank you.

-- 
Best Regards,

Umut AYDIN
Skype: umut-aydin
Blog: http://umut.mobi


From godson.g at gmail.com  Sun Dec  5 09:43:05 2010
From: godson.g at gmail.com (Godson Gera)
Date: Sun, 5 Dec 2010 20:13:05 +0530
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
Message-ID: <AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>

On Sun, Dec 5, 2010 at 4:07 PM, Umut Aydin <devnetwork at gmail.com> wrote:

> Hello everybody. Hope you have a good weekend.
>
> I'm trying to port my distributed job server project to twisted but I
> have a few questions.
>
> I just tested twisted with protocol.Protocol socket handler class and
> it seems like that it creates a new instance for each connection. I
> want to put those connection's ip addresses into an array. Where
> should I do that exactly?
>
> How can I get ip address and port information out of
> self.transport.getPeer()?
>

Each created protocol comes with a refrence to factory that is creating
them, which is a right place of doing all the inter protocol operations .
You can access it via factory attribute of protocol. So, in a typical
twisted program you can refer to the factory by doing self.factory in the
created protocol. You can define an array called peers in factory and access
it like self.factory.peers.

Check out buildProtocol() method of twisted factories to customize protcol
instantiation.

Yes, transport.getPeers() gives you the remote end host and port.

-- 
Thanks & Regards,
Godson Gera
Twisted Python India <http://blog.godson.in>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101205/15971d73/attachment.htm 

From devnetwork at gmail.com  Sun Dec  5 14:18:21 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Sun, 5 Dec 2010 21:18:21 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
Message-ID: <AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>

Thank you for your response.

I have another question. In my job server I collect worker connections
into a key/value structure by their categories which means jobs and I
send them some messages when a client connection made a request
suitable with one of worker connections. The problem is that worker
connection may not be available at the moment. I am looking for a
method (like isConnected in Apache Mina) to check if remote socket is
available.

By the way may be I store wrong object. Maybe I should store something
else instead of storing self.transport Any advice will be appreciated!

Hope I could explain myself clearly.

Thank you.

On Sun, Dec 5, 2010 at 4:43 PM, Godson Gera <godson.g at gmail.com> wrote:
>
> On Sun, Dec 5, 2010 at 4:07 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>>
>> Hello everybody. Hope you have a good weekend.
>>
>> I'm trying to port my distributed job server project to twisted but I
>> have a few questions.
>>
>> I just tested twisted with protocol.Protocol socket handler class and
>> it seems like that it creates a new instance for each connection. I
>> want to put those connection's ip addresses into an array. Where
>> should I do that exactly?
>>
>> How can I get ip address and port information out of
>> self.transport.getPeer()?
>
> Each created protocol comes with a refrence to factory that is creating
> them, which is a right place of doing all the inter protocol operations .
> You can access it via factory attribute of protocol. So, in a typical
> twisted program you can refer to the factory by doing self.factory in the
> created protocol. You can define an array called peers in factory and access
> it like self.factory.peers.
>
> Check out buildProtocol() method of twisted factories to customize protcol
> instantiation.
>
> Yes, transport.getPeers() gives you the remote end host and port.
>
> --
> Thanks & Regards,
> Godson Gera
> Twisted Python India
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi


From einar.twisted at norsk-esport.no  Mon Dec  6 04:21:57 2010
From: einar.twisted at norsk-esport.no (=?ISO-8859-1?Q?Einar_S=2E_Ids=F8?=)
Date: Mon, 6 Dec 2010 10:21:57 +0100
Subject: [Twisted-Python] Modifying the logstring
Message-ID: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>

Hi,

I have an application which logs activity on a number of servers by
two methods:
1. TCP-based queries (app is client)
2. UDP-based logging (app is server)

Each server that is being logged is represented by an instance of a
server class. TCP-queries are performed by each instance at set
intervals, while the UDP-logs are gathered by a global logging
instance which listens to a specific port. Events for a given server
can be triggered by both protocols, but are handled by the server
instance. In other words: An instance of a server class gathers events
by polling the server via TCP /and/ by receiving strings from a UDP
logging instance which passes received datagrams as strings to the
correct instance.

Whenever a loggable event results from the TCP queries, the name of
the protocol class, which is a subclass of
twisted.internet.protocol.Protocol), is used as the logstring. That is
fine, as it allows me to distinguish between different server classes,
although I cannot distinguish between individual servers.

However, when a loggable event occurs on the UDP logging instance, it
writes out a longish protocol name which is the same for all the
different server classes that are subscribing to events on that UDP
port. I have managed to modify the string by doing the following:

        self.udpLogger = reactor.listenUDP(myPort, UDPListener())
        self.udpLogger.logstr = "UDPLogger"

Yet when the logged string is passed, as a string, to a server
instance for processing, the logstring for any result remains
"UDPLogger" no matter how I pass it or what I do to it. I suppose it
is expected behaviour that the protocol should "follow" a result, no
matter how it is processed down the line, but is there any way in
which I can alter the logstring so that instead of "UDPLogger" or the
name of the protocol class, it instead uses the server id or any other
value that I specify?

What I am getting in my logs is:
2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
2010-11-30 10:23:09+0100 [UDPLogger] Something happened on UDP

What I would like is:
2010-11-30 10:23:09+0100 [CSS (TCP),12345] Something happened on TCP
2010-11-30 10:23:09+0100 [CSS (UDP),12345] Something happened on UDP

where 12345 is a unique identifier of the specific server. Or at least:
2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
2010-11-30 10:23:09+0100 [CSS] Something happened on UDP

so that I know the result from UDP concerns a CSS-server.

I hope this was possible to understand. Please let me know if anything
needs to be clarified. :)

Cheers,
Einar


From einar.twisted at norsk-esport.no  Mon Dec  6 05:51:55 2010
From: einar.twisted at norsk-esport.no (=?ISO-8859-1?Q?Einar_S=2E_Ids=F8?=)
Date: Mon, 6 Dec 2010 11:51:55 +0100
Subject: [Twisted-Python] Modifying the logstring
In-Reply-To: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>
References: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>
Message-ID: <AANLkTi=Qf688x5tZcC43M+-AQ0scSxKAYqcVA+7-XUSe@mail.gmail.com>

I was able to modify the logstring for the TCP query by following a
similar approach to what I did to the UDP logger:


    def logPrefix(self):
        return self.connection.transport.protocol.__class__.__name__ +
", " + str(self.id)

    def startClient(self):
        self.f = self.factory(self, password=self.queryPassword)
        self.connection = reactor.connectTCP(self.ip, self.queryPort, self.f)
        self.connection.transport.logPrefix = self.logPrefix

Perhaps not very elegant, but it does the job and allows me to get a
log prefix which not only tells me the protocol but also the exact
serverinstance.

But is it even possibly to do something similar for the UDP scenario
where I have one UDP-logger which calls bound functions from the
individual server-representing instances to do the actual parsing? The
UDP-listener class is defined like this:

class UDPListener(DatagramProtocol):
    _serverList = {}

    def addParser(self, ip, port, f):
        self._serverList[(str(ip), int(port))] = f

    def removeParser(self, ip, port):
        if (str(host), int(port)) in self._serverList:
            del self._serverList[(str(ip), int(port))]

    def datagramReceived(self, data, (host, port)):
        #print "received %r from %s:%d" % (data, host, port)
        if (host, port) in self._serverList:
            self._serverList[(host, port)](data)

Cheers,
Einar



On Mon, Dec 6, 2010 at 10:21 AM, Einar S. Ids?
<einar.twisted at norsk-esport.no> wrote:
> Hi,
>
> I have an application which logs activity on a number of servers by
> two methods:
> 1. TCP-based queries (app is client)
> 2. UDP-based logging (app is server)
>
> Each server that is being logged is represented by an instance of a
> server class. TCP-queries are performed by each instance at set
> intervals, while the UDP-logs are gathered by a global logging
> instance which listens to a specific port. Events for a given server
> can be triggered by both protocols, but are handled by the server
> instance. In other words: An instance of a server class gathers events
> by polling the server via TCP /and/ by receiving strings from a UDP
> logging instance which passes received datagrams as strings to the
> correct instance.
>
> Whenever a loggable event results from the TCP queries, the name of
> the protocol class, which is a subclass of
> twisted.internet.protocol.Protocol), is used as the logstring. That is
> fine, as it allows me to distinguish between different server classes,
> although I cannot distinguish between individual servers.
>
> However, when a loggable event occurs on the UDP logging instance, it
> writes out a longish protocol name which is the same for all the
> different server classes that are subscribing to events on that UDP
> port. I have managed to modify the string by doing the following:
>
> ? ? ? ?self.udpLogger = reactor.listenUDP(myPort, UDPListener())
> ? ? ? ?self.udpLogger.logstr = "UDPLogger"
>
> Yet when the logged string is passed, as a string, to a server
> instance for processing, the logstring for any result remains
> "UDPLogger" no matter how I pass it or what I do to it. I suppose it
> is expected behaviour that the protocol should "follow" a result, no
> matter how it is processed down the line, but is there any way in
> which I can alter the logstring so that instead of "UDPLogger" or the
> name of the protocol class, it instead uses the server id or any other
> value that I specify?
>
> What I am getting in my logs is:
> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
> 2010-11-30 10:23:09+0100 [UDPLogger] Something happened on UDP
>
> What I would like is:
> 2010-11-30 10:23:09+0100 [CSS (TCP),12345] Something happened on TCP
> 2010-11-30 10:23:09+0100 [CSS (UDP),12345] Something happened on UDP
>
> where 12345 is a unique identifier of the specific server. Or at least:
> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
> 2010-11-30 10:23:09+0100 [CSS] Something happened on UDP
>
> so that I know the result from UDP concerns a CSS-server.
>
> I hope this was possible to understand. Please let me know if anything
> needs to be clarified. :)
>
> Cheers,
> Einar
>


From devnetwork at gmail.com  Mon Dec  6 09:11:48 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Mon, 6 Dec 2010 16:11:48 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
Message-ID: <AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>

Hello again

I couldn't get any answer to my question and I think I couldn't point
my problem clearly.

https://github.com/naimon/Jobbar/blob/master/src/lib/server.py

On the line #130 I need to check if the socket is still connected.

That worker variable is a copy of self.transport actually. I have
found it's an instance of twisted.internet.tcp.Server
I also found getHandle method to reach the actual socket but I
couldn't find any method to check its availability.

Help please.

Thank you.


On Sun, Dec 5, 2010 at 9:18 PM, Umut Aydin <devnetwork at gmail.com> wrote:
> Thank you for your response.
>
> I have another question. In my job server I collect worker connections
> into a key/value structure by their categories which means jobs and I
> send them some messages when a client connection made a request
> suitable with one of worker connections. The problem is that worker
> connection may not be available at the moment. I am looking for a
> method (like isConnected in Apache Mina) to check if remote socket is
> available.
>
> By the way may be I store wrong object. Maybe I should store something
> else instead of storing self.transport Any advice will be appreciated!
>
> Hope I could explain myself clearly.
>
> Thank you.
>
> On Sun, Dec 5, 2010 at 4:43 PM, Godson Gera <godson.g at gmail.com> wrote:
>>
>> On Sun, Dec 5, 2010 at 4:07 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>>>
>>> Hello everybody. Hope you have a good weekend.
>>>
>>> I'm trying to port my distributed job server project to twisted but I
>>> have a few questions.
>>>
>>> I just tested twisted with protocol.Protocol socket handler class and
>>> it seems like that it creates a new instance for each connection. I
>>> want to put those connection's ip addresses into an array. Where
>>> should I do that exactly?
>>>
>>> How can I get ip address and port information out of
>>> self.transport.getPeer()?
>>
>> Each created protocol comes with a refrence to factory that is creating
>> them, which is a right place of doing all the inter protocol operations .
>> You can access it via factory attribute of protocol. So, in a typical
>> twisted program you can refer to the factory by doing self.factory in the
>> created protocol. You can define an array called peers in factory and access
>> it like self.factory.peers.
>>
>> Check out buildProtocol() method of twisted factories to customize protcol
>> instantiation.
>>
>> Yes, transport.getPeers() gives you the remote end host and port.
>>
>> --
>> Thanks & Regards,
>> Godson Gera
>> Twisted Python India
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
>
> --
> Best Regards,
>
> Umut AYDIN
> Email: me at umut.mobi
>
> Skype: umut-aydin
>
> Blog: http://umut.mobi
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi


From itamar at itamarst.org  Mon Dec  6 09:29:39 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 06 Dec 2010 09:29:39 -0500
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
Message-ID: <1291645779.1633.1.camel@blake>

On Mon, 2010-12-06 at 16:11 +0200, Umut Aydin wrote:
> Hello again
> 
> I couldn't get any answer to my question and I think I couldn't point
> my problem clearly.
> 
> https://github.com/naimon/Jobbar/blob/master/src/lib/server.py
> 
> On the line #130 I need to check if the socket is still connected.

Disconnection is an *event*: connectionLost will be called on the
protocol. Record the fact you're disconnected inside that method, rather
than checking the socket.



From godson.g at gmail.com  Mon Dec  6 10:16:34 2010
From: godson.g at gmail.com (Godson Gera)
Date: Mon, 6 Dec 2010 20:46:34 +0530
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
Message-ID: <AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>

On Mon, Dec 6, 2010 at 7:41 PM, Umut Aydin <devnetwork at gmail.com> wrote:

> Hello again
>
> I couldn't get any answer to my question and I think I couldn't point
> my problem clearly.
>
> https://github.com/naimon/Jobbar/blob/master/src/lib/server.py
>
> On the line #130 I need to check if the socket is still connected.
>
> That worker variable is a copy of self.transport actually. I have
> found it's an instance of twisted.internet.tcp.Server
> I also found getHandle method to reach the actual socket but I
> couldn't find any method to check its availability.
>


Store a reference to the protocol object it self instead of protcol's
transport.

Connectiong checking  can be done easily by simply adding a state attribute
to your protocol class. In your protocol define self.isConnected = False .
Set that attribute to True inside connectionMade() event method and set that
to False inside connectionLost() event.


-- 
Thanks & Regards,
Godson Gera.
Twisted Python Consultant
India<http://blog.godson.in/2008/10/starpy-100a13-released-asterisk.html>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101206/0f7e0cb3/attachment.htm 

From devnetwork at gmail.com  Mon Dec  6 18:00:44 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Tue, 7 Dec 2010 01:00:44 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
	<AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>
Message-ID: <AANLkTiknQek5OuFPHk7rt32D-5vxUtYo=LX7-tFQ+873@mail.gmail.com>

Thank you for your response.

Probably that works and also itamar's approach seems right.

If  connectionLost method is being called every disconnection (no
matter what reason is) my unregisterBySocket method handles that
situation already. I mean It s not possible to have disconnected
socket in my job pool(work).

Right?



On Mon, Dec 6, 2010 at 5:16 PM, Godson Gera <godson.g at gmail.com> wrote:
>
>
> On Mon, Dec 6, 2010 at 7:41 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>>
>> Hello again
>>
>> I couldn't get any answer to my question and I think I couldn't point
>> my problem clearly.
>>
>> https://github.com/naimon/Jobbar/blob/master/src/lib/server.py
>>
>> On the line #130 I need to check if the socket is still connected.
>>
>> That worker variable is a copy of self.transport actually. I have
>> found it's an instance of twisted.internet.tcp.Server
>> I also found getHandle method to reach the actual socket but I
>> couldn't find any method to check its availability.
>
>
> Store a reference to the protocol object it self instead of protcol's
> transport.
>
> Connectiong checking? can be done easily by simply adding a state attribute
> to your protocol class. In your protocol define self.isConnected = False .
> Set that attribute to True inside connectionMade() event method and set that
> to False inside connectionLost() event.
>
>
> --
> Thanks & Regards,
> Godson Gera.
> Twisted Python Consultant India
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi


From exarkun at twistedmatrix.com  Mon Dec  6 18:38:17 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 06 Dec 2010 23:38:17 -0000
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTiknQek5OuFPHk7rt32D-5vxUtYo=LX7-tFQ+873@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
	<AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>
	<AANLkTiknQek5OuFPHk7rt32D-5vxUtYo=LX7-tFQ+873@mail.gmail.com>
Message-ID: <20101206233817.2109.917351565.divmod.xquotient.1831@localhost.localdomain>

On 11:00 pm, devnetwork at gmail.com wrote:
>Thank you for your response.
>
>Probably that works and also itamar's approach seems right.
>
>If  connectionLost method is being called every disconnection (no
>matter what reason is) my unregisterBySocket method handles that
>situation already. I mean It s not possible to have disconnected
>socket in my job pool(work).
>
>Right?

Yep.

Jean-Paul


From einar.twisted at norsk-esport.no  Tue Dec  7 08:14:26 2010
From: einar.twisted at norsk-esport.no (=?ISO-8859-1?Q?Einar_S=2E_Ids=F8?=)
Date: Tue, 7 Dec 2010 14:14:26 +0100
Subject: [Twisted-Python] Modifying the logstring
In-Reply-To: <AANLkTi=Qf688x5tZcC43M+-AQ0scSxKAYqcVA+7-XUSe@mail.gmail.com>
References: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>
	<AANLkTi=Qf688x5tZcC43M+-AQ0scSxKAYqcVA+7-XUSe@mail.gmail.com>
Message-ID: <AANLkTik-eUxA5-aQh=TvhC9+=QT=5=kQvYmjngSs_vsk@mail.gmail.com>

To continue my monologue: For future reference, it is worth noting
that the code previously posted will not work for reconnecting clients
since only the first connection receives the modified logPrefix
method. A better approach is to bind logPrefix() in
onClientConnected() to ensure it is bound for each new connection.

def startClient(self):
    self.f = self.getFactory()
    reactor.connectTCP(self.ip, self.queryPort, self.f)

def f_onClientConnected(self, protocolInstance):
    def logPrefix():
        return "whateveryouwant"
    self.f.connection = protocolInstance
    self.f.connection.transport.logPrefix = logPrefix

def getFactory(self):
    f = ReconnectingClientFactory()
    f.protocol = whatever
    f.onClientConnected = self.f_onClientConnected
    return f

I am still in the dark when it comes to modifying the logstring in
other cases, though. I am sure I could transfer the results from my
UDP logger to my service using strings instead of bound methods, but
then the logstring would end up being simply [-], which is of no use
to me. Is there really no way in which I can tell Twisted that "All
log messages generated by this object shall be on the following
format"? It seems like such a simple task to accomplish, yet it
completely avoids me.

Also let me add that I am completely taken aback with the genius that
is Twisted Python. The more I work with it, the more I realise this.
Writing clients or servers for *anything* is so simple, and the
efficiency of the code, especially with respect to CPU-usage, is
wonderful. My application started by polling each server via an
external executable written in C, but now fetches info from the same
number of servers using protocols written in Python, and even gathers
a whole lot more info than before via event logs.CPU-usage has dropped
from 20% to 1%, and the memory footprint is only around 40 MB :)

Cheers,
Einar



On Mon, Dec 6, 2010 at 11:51 AM, Einar S. Ids?
<einar.twisted at norsk-esport.no> wrote:
> I was able to modify the logstring for the TCP query by following a
> similar approach to what I did to the UDP logger:
>
>
> ? ?def logPrefix(self):
> ? ? ? ?return self.connection.transport.protocol.__class__.__name__ +
> ", " + str(self.id)
>
> ? ?def startClient(self):
> ? ? ? ?self.f = self.factory(self, password=self.queryPassword)
> ? ? ? ?self.connection = reactor.connectTCP(self.ip, self.queryPort, self.f)
> ? ? ? ?self.connection.transport.logPrefix = self.logPrefix
>
> Perhaps not very elegant, but it does the job and allows me to get a
> log prefix which not only tells me the protocol but also the exact
> serverinstance.
>
> But is it even possibly to do something similar for the UDP scenario
> where I have one UDP-logger which calls bound functions from the
> individual server-representing instances to do the actual parsing? The
> UDP-listener class is defined like this:
>
> class UDPListener(DatagramProtocol):
> ? ?_serverList = {}
>
> ? ?def addParser(self, ip, port, f):
> ? ? ? ?self._serverList[(str(ip), int(port))] = f
>
> ? ?def removeParser(self, ip, port):
> ? ? ? ?if (str(host), int(port)) in self._serverList:
> ? ? ? ? ? ?del self._serverList[(str(ip), int(port))]
>
> ? ?def datagramReceived(self, data, (host, port)):
> ? ? ? ?#print "received %r from %s:%d" % (data, host, port)
> ? ? ? ?if (host, port) in self._serverList:
> ? ? ? ? ? ?self._serverList[(host, port)](data)
>
> Cheers,
> Einar
>
>
>
> On Mon, Dec 6, 2010 at 10:21 AM, Einar S. Ids?
> <einar.twisted at norsk-esport.no> wrote:
>> Hi,
>>
>> I have an application which logs activity on a number of servers by
>> two methods:
>> 1. TCP-based queries (app is client)
>> 2. UDP-based logging (app is server)
>>
>> Each server that is being logged is represented by an instance of a
>> server class. TCP-queries are performed by each instance at set
>> intervals, while the UDP-logs are gathered by a global logging
>> instance which listens to a specific port. Events for a given server
>> can be triggered by both protocols, but are handled by the server
>> instance. In other words: An instance of a server class gathers events
>> by polling the server via TCP /and/ by receiving strings from a UDP
>> logging instance which passes received datagrams as strings to the
>> correct instance.
>>
>> Whenever a loggable event results from the TCP queries, the name of
>> the protocol class, which is a subclass of
>> twisted.internet.protocol.Protocol), is used as the logstring. That is
>> fine, as it allows me to distinguish between different server classes,
>> although I cannot distinguish between individual servers.
>>
>> However, when a loggable event occurs on the UDP logging instance, it
>> writes out a longish protocol name which is the same for all the
>> different server classes that are subscribing to events on that UDP
>> port. I have managed to modify the string by doing the following:
>>
>> ? ? ? ?self.udpLogger = reactor.listenUDP(myPort, UDPListener())
>> ? ? ? ?self.udpLogger.logstr = "UDPLogger"
>>
>> Yet when the logged string is passed, as a string, to a server
>> instance for processing, the logstring for any result remains
>> "UDPLogger" no matter how I pass it or what I do to it. I suppose it
>> is expected behaviour that the protocol should "follow" a result, no
>> matter how it is processed down the line, but is there any way in
>> which I can alter the logstring so that instead of "UDPLogger" or the
>> name of the protocol class, it instead uses the server id or any other
>> value that I specify?
>>
>> What I am getting in my logs is:
>> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
>> 2010-11-30 10:23:09+0100 [UDPLogger] Something happened on UDP
>>
>> What I would like is:
>> 2010-11-30 10:23:09+0100 [CSS (TCP),12345] Something happened on TCP
>> 2010-11-30 10:23:09+0100 [CSS (UDP),12345] Something happened on UDP
>>
>> where 12345 is a unique identifier of the specific server. Or at least:
>> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
>> 2010-11-30 10:23:09+0100 [CSS] Something happened on UDP
>>
>> so that I know the result from UDP concerns a CSS-server.
>>
>> I hope this was possible to understand. Please let me know if anything
>> needs to be clarified. :)
>>
>> Cheers,
>> Einar
>>
>


From jack.bates at gmail.com  Sat Dec 11 22:05:08 2010
From: jack.bates at gmail.com (Jack Bates)
Date: Sat, 11 Dec 2010 19:05:08 -0800
Subject: [Twisted-Python] Mail content filter: How to avoid SMTP client
 finishing sending message before SMTP server finishes receiving it?
Message-ID: <1292123109.5341.51.camel@selene>

Struggling little bit to write a Postfix content filter [1] with Twisted
Mail. The content filter will eventually add a cookie to the "from"
address, identifying the address that the message was sent to

Here's my attempt so far [2]

The problem is that the SMTP client finishes sending the message before
the SMTP server finishes receiving it - i.e. Client.sentMail() is called
before Message.eomReceived()

To fix this, I want SMTPClient.smtpState_data() [3], which uses
FileSender [4], to wait for the server to finish receiving the message
before proceeding to smtpState_msgSent()

Is this possible?

The only alternative I can think of is to not start sending the message
until after the server finishes receiving it - i.e. start sending the
message after Message.eomReceived() is called. But this seems to me like
it would have worse performance than sending messages at the same time
as they're being received - especially for a message with a large
attachment

How can I avoid the client finishing sending the message before the
server finishes receiving it?

[1] http://www.postfix.org/SMTPD_PROXY_README.html
[2] https://github.com/jablko/cookie/blob/master/cookie
[3] http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/mail/smtp.py#L1126
[4] http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.FileSender.html


From exarkun at twistedmatrix.com  Sun Dec 12 00:05:26 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 12 Dec 2010 05:05:26 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1292130326.88.1916046899@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101212/27d12bf8/attachment.html 

From santoso.wijaya at gmail.com  Sun Dec 12 19:37:39 2010
From: santoso.wijaya at gmail.com (Santoso Wijaya)
Date: Sun, 12 Dec 2010 16:37:39 -0800
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for Windows
	2.7 AMD64
Message-ID: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>

Is there something crucial that I am missing?


C:\Users\santa>C:\Python27\Scripts\easy_install.exe Twisted
Searching for Twisted
Reading http://pypi.python.org/simple/Twisted/
Reading http://twistedmatrix.com/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/9.0/
Reading http://www.twistedmatrix.com
Reading http://twistedmatrix.com/products/download
Reading http://twistedmatrix.com/projects/core/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.1/
Best match: Twisted 10.2.0
Downloading
http://pypi.python.org/packages/source/T/Twisted/Twisted-10.2.0.tar.
bz2
Processing Twisted-10.2.0.tar.bz2
Running Twisted-10.2.0\setup.py -q bdist_egg --dist-dir
c:\users\santa\appdata\l
ocal\temp\easy_install-jcob9g\Twisted-10.2.0\egg-dist-tmp-nuaqjd
Traceback (most recent call last):
  File "C:\Python27\Scripts\easy_install-script.py", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts',
'easy_install')()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 1712, in main
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 1700, in with_ei_usage
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 1716, in <lambda>
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 211, in run
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 446, in easy_install
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 476, in install_item
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 655, in install_eggs
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 930, in build_and_install
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 919, in run_setup
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\san
dbox.py", line 62, in run_setup
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\san
dbox.py", line 105, in run
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\san
dbox.py", line 64, in <lambda>
  File "setup.py", line 97, in <module>
  File "setup.py", line 92, in main
  File ".\twisted\python\dist.py", line 47, in setup
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\bdist_egg.py", line 175, in run
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\bdist_egg.py", line 161, in call_command
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\install_lib.py", line 20, in run
  File "C:\Python27\lib\distutils\command\install_lib.py", line 111, in
build
    self.run_command('build_ext')
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build_ext.py", line 340, in run
    self.build_extensions()
  File ".\twisted\python\dist.py", line 327, in build_extensions
  File ".\twisted\python\dist.py", line 318, in prepare_extensions
  File "twisted\runner\topfiles\setup.py", line 14, in <lambda>
  File ".\twisted\python\dist.py", line 360, in _check_header
  File ".\twisted\python\dist.py", line 346, in _compile_helper
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 469, in compile
    self.initialize()
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 379, in initialize
    vc_env = query_vcvarsall(VERSION, plat_spec)
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 295, in
query_vcvarsal
l
    raise ValueError(str(list(result.keys())))
ValueError: [u'path']

C:\Users\santa>


~/santa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101212/cd740d83/attachment.html 

From zancarius at gmail.com  Sun Dec 12 20:26:13 2010
From: zancarius at gmail.com (Benjamin A. Shelton)
Date: Sun, 12 Dec 2010 18:26:13 -0700
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for
 Windows 2.7 AMD64
In-Reply-To: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
Message-ID: <4D057635.9010100@gmail.com>

On 12/12/2010 5:37 PM, Santoso Wijaya wrote:
> Is there something crucial that I am missing?
>
>

I don't typically develop on Windows with Python. I assume that this is 
the 64 bit version of setuptools as well and not an x86 version 
shoehorned into an existing Python install? I only ask the latter, 
because it is supposedly possible with some registry trickery to install 
the 32 bit version (I've never tried) which may exhibit weirdness.

There's an unofficial/unsupported build of setuptools for amd64 here 
that may work (it worked in my case): 
http://www.lfd.uci.edu/~gohlke/pythonlibs/ 
<http://www.lfd.uci.edu/%7Egohlke/pythonlibs/>

Be sure to read the warnings on that page as they do appear to be based 
off exceedingly new code taken directly from each project's repository, 
so there may be bugs--but it did work for me since I couldn't get the 
PyPI distro to install. :)

Hope this helps!

--
Benjamin


From exarkun at twistedmatrix.com  Sun Dec 12 20:47:11 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 13 Dec 2010 01:47:11 -0000
Subject: [Twisted-Python] `easy_install Twisted` fails on Python
	for	Windows 2.7 AMD64
In-Reply-To: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
Message-ID: <20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>

On 12:37 am, santoso.wijaya at gmail.com wrote:
>Is there something crucial that I am missing?

I recommend 
<http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.msi> 
or 
<http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.exe>.

Jean-Paul


From drken567 at gmail.com  Tue Dec 14 09:06:46 2010
From: drken567 at gmail.com (Ken MacDonald)
Date: Tue, 14 Dec 2010 09:06:46 -0500
Subject: [Twisted-Python] easy_install and twisted problems?
Message-ID: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>

I'm trying to use easy_install to load twisted, but I keep getting the
following error about not being able to find "vcvarsall.bat". As you can
see, I have the .bat and it's in the PATH. I have Visual Studio C++ Express
installed, and googled a bunch of references to similar easy_install
problems; several suggested installing MingW32's compiler. I tried that,
which got rid of the vcvarsall message, but came up with a stack of fatal
compile errors.

Any suggestions as to what I might be doing wrong with the installation most
welcome.
Thanks,
Ken
================================================================================
C:\Python26\Lib\distutils>vcvarsall.bat
Setting environment for using Microsoft Visual Studio 2010 x86 tools.

C:\Python26\Lib\distutils>easy_install twisted
install_dir c:\python26\Lib\site-packages\
Searching for twisted
Reading http://pypi.python.org/simple/twisted/
Reading http://twistedmatrix.com/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/9.0/
Reading http://www.twistedmatrix.com
Reading http://twistedmatrix.com/products/download
Reading http://twistedmatrix.com/projects/core/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.1/
Best match: Twisted 10.2.0
Downloading
http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.tar.b
z2#md5=73da62c793269eade8121da336b01ba5
Processing Twisted-10.2.0.tar.bz2
Running Twisted-10.2.0\setup.py -q bdist_egg --dist-dir
c:\users\kmacdo~1\appdat
a\local\temp\easy_install-dip2sj\Twisted-10.2.0\egg-dist-tmp-ctzrhl
*error: Setup script exited with error: Unable to find vcvarsall.bat
*
C:\Python26\Lib\distutils>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101214/023c851b/attachment.htm 

From exarkun at twistedmatrix.com  Tue Dec 14 09:44:12 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 14 Dec 2010 14:44:12 -0000
Subject: [Twisted-Python] easy_install and twisted problems?
In-Reply-To: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>
References: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>
Message-ID: <20101214144412.2058.358926685.divmod.xquotient.171@localhost.localdomain>

On 02:06 pm, drken567 at gmail.com wrote:
>I'm trying to use easy_install to load twisted, but I keep getting the
>following error about not being able to find "vcvarsall.bat". As you 
>can
>see, I have the .bat and it's in the PATH. I have Visual Studio C++ 
>Express
>installed, and googled a bunch of references to similar easy_install
>problems; several suggested installing MingW32's compiler. I tried 
>that,
>which got rid of the vcvarsall message, but came up with a stack of 
>fatal
>compile errors.
>
>Any suggestions as to what I might be doing wrong with the installation 
>most
>welcome.
>Thanks,
>Ken
>================================================================================
>C:\Python26\Lib\distutils>vcvarsall.bat
>Setting environment for using Microsoft Visual Studio 2010 x86 tools.

As I understand it, Python 2.6 requires Visual Studio 2008.

However, I recommend using one of the installers available for download 
from the website:

http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.msi

http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.exe

Jean-Paul


From drken567 at gmail.com  Tue Dec 14 11:03:30 2010
From: drken567 at gmail.com (Ken MacDonald)
Date: Tue, 14 Dec 2010 11:03:30 -0500
Subject: [Twisted-Python] easy_install and twisted problems?
In-Reply-To: <20101214144412.2058.358926685.divmod.xquotient.171@localhost.localdomain>
References: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>
	<20101214144412.2058.358926685.divmod.xquotient.171@localhost.localdomain>
Message-ID: <AANLkTikLzqn_Yk9+RiSmoAwwC9ZHTgCyrTGnzTAN6w2H@mail.gmail.com>

Thanks Jean-Paul,
This seems to work fine, and quickly, too.

Just before your message, I was able to get an apparently successful install
of twisted by installing ActiveState Python 2.6, and installing with their
package manager, so:

c:\>pypm install twisted

but the installers you mention are probably the best bet.
Thanks again,
Ken

As I understand it, Python 2.6 requires Visual Studio 2008.
>
> However, I recommend using one of the installers available for download
> from the website:
>
>
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.msi
>
>
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.exe
>
> Jean-Paul
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101214/a5010454/attachment.htm 

From ypercube at gmail.com  Wed Dec 15 11:07:28 2010
From: ypercube at gmail.com (Pandelis Theodosiou)
Date: Wed, 15 Dec 2010 18:07:28 +0200
Subject: [Twisted-Python] multicast
Message-ID: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>

I'm trying to make a Multicast client.

I've tried the simple script found in:
http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3

While it shows no errors, it doesn't receive any data. How can I check what
the problem is?
It runs on a Debian 64-bit machine where I've installed Python2.6 and
Twisted 10.0.2.0

Could it be some firewall setting?
Is it possible I've somehow screwed with the installation procedure?

Pandelis

from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer

class MulticastClientUDP(DatagramProtocol):

    def datagramReceived(self, datagram, address):
            print "Received:" + repr(datagram)

# Send multicast on 224.0.0.1:8005, on our dynamically allocated port
reactor.listenUDP(0, MulticastClientUDP()).write('UniqueID',
                                                 ('233.75.215.44', 60044))
reactor.run()



 <http://int.ask.com/web?siteid=10000861&webqsrc=999&l=dis&q=233.75.215.44>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101215/0c765199/attachment.htm 

From thomas.burguiere at c-s.fr  Wed Dec 15 12:13:45 2010
From: thomas.burguiere at c-s.fr (BURGUIERE Thomas)
Date: Wed, 15 Dec 2010 18:13:45 +0100
Subject: [Twisted-Python] twisted.words.protocols.jabber and XEP-0138 stream
	compression
Message-ID: <4D08F749.40907@c-s.fr>

Hey all,

I've search (in Twisted 10.2.0) for a reference to XEP-0138 (stream 
compression) in twisted.words.protocols.jabber but I don't see anything 
referring to it.

Is there a way to activate stream compression ? (I have a server which 
have a parameter for zlib stream compression)
And if so what do i need to do ?


Thanks,


From kevin.horn at gmail.com  Wed Dec 15 14:09:58 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 15 Dec 2010 13:09:58 -0600
Subject: [Twisted-Python] twisted.words.protocols.jabber and XEP-0138
 stream compression
In-Reply-To: <4D08F749.40907@c-s.fr>
References: <4D08F749.40907@c-s.fr>
Message-ID: <AANLkTik-D38-JmVNJeuyBZ8wHhipa+7wRh7dJpqPmyVo@mail.gmail.com>

On Wed, Dec 15, 2010 at 11:13 AM, BURGUIERE Thomas
<thomas.burguiere at c-s.fr>wrote:

> Hey all,
>
> I've search (in Twisted 10.2.0) for a reference to XEP-0138 (stream
> compression) in twisted.words.protocols.jabber but I don't see anything
> referring to it.
>
> Is there a way to activate stream compression ? (I have a server which
> have a parameter for zlib stream compression)
> And if so what do i need to do ?
>
>
> Thanks,
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

No idea, but you might ask on the Twisted-Jabber list as well:
https://mailman.ik.nu/mailman/listinfo/twisted-jabber

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101215/8bec2a59/attachment.htm 

From itamar at itamarst.org  Wed Dec 15 19:06:14 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 15 Dec 2010 19:06:14 -0500
Subject: [Twisted-Python] multicast
In-Reply-To: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
Message-ID: <1292457974.1779.0.camel@blake>

On Wed, 2010-12-15 at 18:07 +0200, Pandelis Theodosiou wrote:
> I'm trying to make a Multicast client.
> 
> I've tried the simple script found in:
> http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3
> 
> While it shows no errors, it doesn't receive any data. How can I check
> what the problem is?

You didn't do the necessary joinGroup() call, which is in the original
example.



From thomas.burguiere at c-s.fr  Thu Dec 16 04:09:08 2010
From: thomas.burguiere at c-s.fr (BURGUIERE Thomas)
Date: Thu, 16 Dec 2010 10:09:08 +0100
Subject: [Twisted-Python] twisted.words.protocols.jabber and XEP-0138
 stream compression
In-Reply-To: <AANLkTik-D38-JmVNJeuyBZ8wHhipa+7wRh7dJpqPmyVo@mail.gmail.com>
References: <4D08F749.40907@c-s.fr>
	<AANLkTik-D38-JmVNJeuyBZ8wHhipa+7wRh7dJpqPmyVo@mail.gmail.com>
Message-ID: <4D09D734.4010302@c-s.fr>



Le 15/12/2010 20:09, Kevin Horn a ?crit :
> On Wed, Dec 15, 2010 at 11:13 AM, BURGUIERE Thomas 
> <thomas.burguiere at c-s.fr <mailto:thomas.burguiere at c-s.fr>> wrote:
>
>     Hey all,
>
>     I've search (in Twisted 10.2.0) for a reference to XEP-0138 (stream
>     compression) in twisted.words.protocols.jabber but I don't see
>     anything
>     referring to it.
>
>     Is there a way to activate stream compression ? (I have a server which
>     have a parameter for zlib stream compression)
>     And if so what do i need to do ?
>
>
>     Thanks,
>
>     _______________________________________________
>     Twisted-Python mailing list
>     Twisted-Python at twistedmatrix.com
>     <mailto:Twisted-Python at twistedmatrix.com>
>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> No idea, but you might ask on the Twisted-Jabber list as well:
> https://mailman.ik.nu/mailman/listinfo/twisted-jabber
>
> Kevin Horn
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>    
Ok I'll do that.

Thanks for the information.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101216/7184d848/attachment.htm 

From ypercube at gmail.com  Thu Dec 16 05:09:46 2010
From: ypercube at gmail.com (Pandelis Theodosiou)
Date: Thu, 16 Dec 2010 12:09:46 +0200
Subject: [Twisted-Python] multicast
In-Reply-To: <1292457974.1779.0.camel@blake>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
Message-ID: <AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>

On Thu, Dec 16, 2010 at 2:06 AM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> On Wed, 2010-12-15 at 18:07 +0200, Pandelis Theodosiou wrote:
> > I'm trying to make a Multicast client.
> >
> > I've tried the simple script found in:
> > http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3
> >
> > While it shows no errors, it doesn't receive any data. How can I check
> > what the problem is?
>
> You didn't do the necessary joinGroup() call, which is in the original
> example.
>
>
I made many trials, and one was like this:

from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer


class MulticastClientUDP(DatagramProtocol):

    def startProtocol(self):
        self.transport.joinGroup('233.75.215.44')

    def datagramReceived(self, datagram, address):
            print "Received:" + repr(datagram)

# Trying to receive from 233.75.215.44, on our dynamically allocated port
reactor.listenUDP(60044, MulticastClientUDP())
reactor.run()

But datagramReceived is never called. Am I doing something wrong?
Is there any other method that should be called so I start listening on that
group?

I've also tried to use listenMulticast instead of listenUDP but then I
realized this is if I need more than one application to listen/write to the
multicast port and I don't need that.
pandelis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101216/8daa06e1/attachment.htm 

From exarkun at twistedmatrix.com  Thu Dec 16 10:31:01 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 16 Dec 2010 15:31:01 -0000
Subject: [Twisted-Python] multicast
In-Reply-To: <AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
Message-ID: <20101216153101.2058.2049547135.divmod.xquotient.272@localhost.localdomain>

On 10:09 am, ypercube at gmail.com wrote:
>On Thu, Dec 16, 2010 at 2:06 AM, Itamar Turner-Trauring 
><itamar at itamarst.org
>>wrote:
>
>>On Wed, 2010-12-15 at 18:07 +0200, Pandelis Theodosiou wrote:
>> > I'm trying to make a Multicast client.
>> >
>> > I've tried the simple script found in:
>> > http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3
>> >
>> > While it shows no errors, it doesn't receive any data. How can I 
>>check
>> > what the problem is?
>>
>>You didn't do the necessary joinGroup() call, which is in the original
>>example.
>I made many trials, and one was like this:
>
>from twisted.internet.protocol import DatagramProtocol
>from twisted.internet import reactor
>from twisted.application.internet import MulticastServer
>
>
>class MulticastClientUDP(DatagramProtocol):
>
>    def startProtocol(self):
>        self.transport.joinGroup('233.75.215.44')
>
>    def datagramReceived(self, datagram, address):
>            print "Received:" + repr(datagram)
>
># Trying to receive from 233.75.215.44, on our dynamically allocated 
>port
>reactor.listenUDP(60044, MulticastClientUDP())
>reactor.run()
>
>But datagramReceived is never called. Am I doing something wrong?
>Is there any other method that should be called so I start listening on 
>that
>group?
>
>I've also tried to use listenMulticast instead of listenUDP but then I
>realized this is if I need more than one application to listen/write to 
>the
>multicast port and I don't need that.
>pandelis

Then it may indeed be an issue with a routing device somewhere near your 
tests.  Dropping all multicast traffic is a common behavior to encounter 
in firewalls and home routers.

Maybe if you play with iptables or the equivalent on your system you'll 
be able to fix this.

Jean-Paul


From itamar at itamarst.org  Thu Dec 16 10:59:53 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 16 Dec 2010 10:59:53 -0500
Subject: [Twisted-Python] multicast
In-Reply-To: <AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
Message-ID: <1292515193.2033.1.camel@blake>

On Thu, 2010-12-16 at 12:09 +0200, Pandelis Theodosiou wrote:

> 
> I've also tried to use listenMulticast instead of listenUDP but then I
> realized this is if I need more than one application to listen/write
> to the multicast port and I don't need that.
> pandelis

You should use listenMulticast regardless if you want to use multicast.




From exarkun at twistedmatrix.com  Thu Dec 16 11:10:29 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 16 Dec 2010 16:10:29 -0000
Subject: [Twisted-Python] multicast
In-Reply-To: <1292515193.2033.1.camel@blake>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
	<1292515193.2033.1.camel@blake>
Message-ID: <20101216161029.2058.1592790811.divmod.xquotient.275@localhost.localdomain>

On 03:59 pm, itamar at itamarst.org wrote:
>On Thu, 2010-12-16 at 12:09 +0200, Pandelis Theodosiou wrote:
>>
>>I've also tried to use listenMulticast instead of listenUDP but then I
>>realized this is if I need more than one application to listen/write
>>to the multicast port and I don't need that.
>>pandelis
>
>You should use listenMulticast regardless if you want to use multicast.

Is that an error in the udp howto, then?  The second multicast example 
uses listenUDP.

Jean-Paul


From agasson at red-elvis.net  Thu Dec 16 11:47:41 2010
From: agasson at red-elvis.net (Andrew Gasson)
Date: Thu, 16 Dec 2010 17:47:41 +0100
Subject: [Twisted-Python] multicast
In-Reply-To: <20101216161029.2058.1592790811.divmod.xquotient.275@localhost.localdomain>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
	<1292515193.2033.1.camel@blake>
	<20101216161029.2058.1592790811.divmod.xquotient.275@localhost.localdomain>
Message-ID: <CB733F3E-9468-4416-8F86-09FF32FA202A@red-elvis.net>


On 16/12/2010, at 5:10 PM, exarkun at twistedmatrix.com wrote:

> On 03:59 pm, itamar at itamarst.org wrote:
>> On Thu, 2010-12-16 at 12:09 +0200, Pandelis Theodosiou wrote:
>>> 
>>> I've also tried to use listenMulticast instead of listenUDP but then I
>>> realized this is if I need more than one application to listen/write
>>> to the multicast port and I don't need that.
>>> pandelis
>> 
>> You should use listenMulticast regardless if you want to use multicast.
> 
> Is that an error in the udp howto, then?  The second multicast example 
> uses listenUDP.

check the ttl of your multicast source , they usually default to TTL=1 so wont pass a router hop, also with nix boxes check once you start listening
you are listening on right interface with netstat -g

Gas
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From santoso.wijaya at gmail.com  Thu Dec 16 14:06:15 2010
From: santoso.wijaya at gmail.com (Santoso Wijaya)
Date: Thu, 16 Dec 2010 11:06:15 -0800
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for
 Windows 2.7 AMD64
In-Reply-To: <20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
	<20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
Message-ID: <AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>

I tried the exe installer, but with only Python 2.7 AMD64 installed on my
system, the installer could not locate it, unfortunately.

    "Python version 2.7 required, which was not found in the registry."

HKLM\SOFTWARE\Python\PythonCore\2.7 exists but
HKLM\SOFTWARE\Wow6432Node\Python\PythonCore\2.7 does not, obviously, which
is what I assume the installer looks at.

~/santa


On Sun, Dec 12, 2010 at 5:47 PM, <exarkun at twistedmatrix.com> wrote:

> On 12:37 am, santoso.wijaya at gmail.com wrote:
> >Is there something crucial that I am missing?
>
> I recommend
> <
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.msi
> >
> or
> <
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.exe
> >.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101216/c0ee7c8b/attachment.htm 

From phil at bubblehouse.org  Fri Dec 17 13:13:45 2010
From: phil at bubblehouse.org (Phil Christensen)
Date: Fri, 17 Dec 2010 13:13:45 -0500
Subject: [Twisted-Python] ANN: antioch 1.0 developer preview released
Message-ID: <B3FB653A-2AC0-4E52-8166-5C25D4C36C77@bubblehouse.org>

Hey all,

So, I've recently made big strides with an old project that I've been kicking around ever since working on Divunal back in the Twisted Reality days. Since it uses several Twisted-community projects to solve some problems I've been tinkering with for years, the first place I hoped to recruit interest was among the Twisted community.

My goal has been to create a MUD-like environment, particularly one derived from the philosophies of LambdaMOO. However, I also wanted to use modern web technologies to create something that could be more than a text-based environment, though still probably less suited for an immersive 3D environment or some such. I wanted to allow "anyone" to safely develop in-game code using Python, without fear of accidentally creating an infinite loop and taking down the system. Finally, I wanted to ensure that if someone did create a virally popular game, it would be possible to scale the system in ways LambdaMOO never could.

Today I released what is best described as a developer preview of the 1.0 release of this software, antioch. It comes somewhat from the lineage of a predecessor named txSpace, but is pretty much a complete rewrite.

antioch approaches things with entirely different goals than Twisted Reality/Imaginary did. Like LambdaMOO, it makes very few assumptions about the attributes of your world, assuming it will all be implemented using game verb mechanics. It's primarily concerned with individual user rights, object ownership, and code isolation.

Using Twisted, community libraries (such as Nevow, txAMQP and ampoule), PostgreSQL and RabbitMQ, antioch implements a high-performance, scalable virtual world. There's more details on the features below (sorry for the execu-speak, a habit), but to jump right in, head over to:

	http://philchristensen.github.com/antioch

Or sign up for the discussion group/mailing list at:

	http://groups.google.com/group/antioch-dev

I've done my best to create tons of documentation and installation guides, but I'm always adding to the collection.

Any and all feedback is always appreciated,

- phil



antioch feature set
--------------------

* **Customizable AJAX-Enabled Client** ? 
  The antioch web client provides a standards-compliant interface based
  on the Nevow Athena AJAX framework, and is supported by all modern browsers.
  
  Although the default database provided is geared towards text-based games,
  the flexibility of the client interface and the power of the plugin system
  allows many different kinds of games to be developed on the antioch 
  platform.

* **Graphical Object Editors** ? 
  Programmers and authors alike will find the built-in authoring tools
  expedite world creation and verb programming.

* **Plugin System** ? 
  antioch 'modules' allow developers to create new client functionality.
  The module system was used to implement the built-in object and verb 
  editors, demonstrating the creation of new verb-environment functions,
  Web resources, and client-side JavaScript.

* **Isolated Verb Execution** ? 
  Database code is run in individual subprocesses, allowing for memory and
  runtime limits to be applied at the UNIX process level, and allowing for
  verb code to be written in a synchronous style.

* **Highly Scalable Messaging Layer** ? 
  antioch uses the RabbitMQ server to implement message passing support,
  allowing support of thousands of active clients with minimal latency.

* **Powerful Natural-Language Parser** ? 
  The built-in interpreter parses a large number of different imperative
  statements, making user-world interaction a more immersive experience.

* **Internal Scripting** ? 
  A Pure-Python scripting layer integrates tightly with the framework code,
  allowing a high degree of customization.
  
* **Robust Networking** ? 
  antioch relies on the Twisted Python and Nevow frameworks to implement
  client-server communication. This robust asynchronous networking library
  allows client counts to scale easily to hundreds of connections.




From rgacote at appropriatesolutions.com  Sat Dec 18 13:04:58 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Sat, 18 Dec 2010 13:04:58 -0500 (EST)
Subject: [Twisted-Python] py2exe cannot find zope.interface -- fixed
In-Reply-To: <1372179378.7581292695468837.JavaMail.rgacote@ip-237.corp.appropriatesolutions.com>
Message-ID: <1221659508.7601292695497337.JavaMail.rgacote@ip-237.corp.appropriatesolutions.com>

We're in the process of upgrading to all the latest Twisted goodness on Windows.
All went smoothly until we tried to build Twisted with py2exe. The final executable gave an error that zope.interface could not be found. 

When we tried adding 'zope.interface' to the includes in setup.py, py2exe threw an error that 'zope' could not be found during the build process.

The trick is go to into the installed zope module and add an empty __init__.py file in the zope directory. The build process now recognizes that as a valid module and all is happy. 

We found a number of people asking about this problem (not necessarily in regards to Twisted) but did not find a good thread with an answer. So, we're posting this in the hope it will save someone an hour or two of problem solving. 

--Ray

-- 
Ray Cote, President
Appropriate Solutions, Inc.
We Build Software
603.924.6079


From exarkun at twistedmatrix.com  Sun Dec 19 00:05:18 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 19 Dec 2010 05:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1292735118.43.1378530731@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101219/8f073ebe/attachment.htm 

From JOHN at egh.com  Mon Dec 20 17:26:32 2010
From: JOHN at egh.com (John Santos)
Date: Mon, 20 Dec 2010 17:26:32 -0500
Subject: [Twisted-Python] Obtaining connection information for SSH
	connections
In-Reply-To: <B3FB653A-2AC0-4E52-8166-5C25D4C36C77@bubblehouse.org>
Message-ID: <1101220170206.44893A-100000@Ives.egh.com>

Hi, everyone -

I have an application written in Twisted which allows clients to
connect using SSH (any SSH2 client that I've tried works), to send
it commands and to bridge through it to target devices (connected
via telnet on a LAN or via telnet through a terminal server to serial
ports on the target.)  It's sort of a console monitor/logger/remote
access controller for a random bunch of remote equipment.

For the remote access part, I started from the SSH server examples
in the Twisted book, but modified it to use public key authentication
instead of the username/password authentication in the example.

This part works fine.  The application keeps its own key directory;
if a remote user has a <user>.pub file in the key directory, and the
authentication works with that key, then the user gets remote access...

I'm cleaning up a couple of rough edges, and can't find the info
I need...

1) logging/status information:  I would like to grab the remote
host info so I can log connections/connection failures/disconnections
and include the host name and/or IP address.  I would also like to
be able to display the current list of open connections to the server
in a status display.

I know this info has to be there somewhere, but I can't find it.
Spent several days wandering through a twisted maze of little passages,
looking for anything with a working getPeer() method or likely data,
with no luck.  I know it has to be somewhere, because somewhere deep
down underneath there has to be a TCP socket!

One problem is I don't have a good mental picture of how the peices
all fit together to build an SSH connection.  I think part of the
problem is that not all the pieces are there yet as data elements
get added on the fly to various objects (due to the dynamic nature
of Python, which I am still getting used to.)

So I think it would be very valuable to find some documentation
that explains how all the SSH pieces (conn's, avatars, etc.) all
fit together.

2) Similarly, when authenticating a key (in requestAvatarID()
in the PublicKeyCredentialsChecker, it would be useful to see
the remote host name so I could provide different keys for the
same user coming from different hosts.

Most or all SSH2 servers have a mechanism where you can have
a default public key for a given user, and host-specific keys
for that same user.  Typically, stored in a key file or directory
with names (or tags) like <user>_<host>.pub for the host-specific
key, and with <user>.pub for the default key.  If user FOO is
connecting from host XXX, it looks for ./keys/FOO_XXX.pub, and if
that file is not found, it looks for ./keys/FOO.pub.

Obviously, the credentials checker needs to know the remote host
name for this to work.

Thanks to anyone who can point me in the right direction!


-- 
John Santos
Evans Griffiths & Hart, Inc.
781-861-0670 ext 539



From devnetwork at gmail.com  Tue Dec 21 06:40:39 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Tue, 21 Dec 2010 13:40:39 +0200
Subject: [Twisted-Python] Job server
Message-ID: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>

Hello everybody

My job server is on progress and maybe you want to check it out.
Distribution part is ready but I still work on remote calls. As soon
as I get it done I ll write an article about building a job server
with twisted framework. (I wrote an article about Apache Mina
framework while designing jobbar
http://umut.mobi/blog/2010/11/11/how-to-build-a-distributed-job-server-with-apache-mina-framework/)
I m pretty busy these days it'll take almost a week more. Here is
website of the project

http://jobbarserver.org/

By the way, my goal with this project is building a distributed job
server and useful extensions for needs of any kind of projects. Some
extensions in my mind:
Memory Cache, Document Storage, Multiple Job Handler for parallel
processing, Log Manager, Data Traffic  Analyser

If you have any idea please share with me.

Thanks
-Umut


From jaroslaw.fedewicz at gmail.com  Tue Dec 21 07:33:27 2010
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Tue, 21 Dec 2010 14:33:27 +0200
Subject: [Twisted-Python] Job server
In-Reply-To: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>
References: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>
Message-ID: <AANLkTimhR5whCYBDHb-=fLNkhZHKto494_FqrN4cPD+Z@mail.gmail.com>

On Tue, Dec 21, 2010 at 1:40 PM, Umut Aydin <devnetwork at gmail.com> wrote:
> Hello everybody
>
> My job server is on progress and maybe you want to check it out.
> Distribution part is ready but I still work on remote calls. As soon
> as I get it done I ll write an article about building a job server
> with twisted framework. (I wrote an article about Apache Mina
> framework while designing jobbar
> http://umut.mobi/blog/2010/11/11/how-to-build-a-distributed-job-server-with-apache-mina-framework/)
> I m pretty busy these days it'll take almost a week more. Here is
> website of the project
>
> http://jobbarserver.org/
>
> By the way, my goal with this project is building a distributed job
> server and useful extensions for needs of any kind of projects. Some
> extensions in my mind:
> Memory Cache, Document Storage, Multiple Job Handler for parallel
> processing, Log Manager, Data Traffic ?Analyser
>
> If you have any idea please share with me.
>

Before proceeding with any extensions, would be extremely nice to have:

a README with a description of what it is and what do I gain from
using it right now.
an INSTALL with a description of how to make it available systemwide,
how to ship it with my project or what might break if I install it.
a USAGE with a simple boilerplate with its bits explained: what do I
need this code for? What bad happens if I take this bit out? What
stuff can I customize and with what degree of freedom?
*.pyc in your .gitignore
docstrings for classes

Someone with more profound knowledge would surely tell you about unit tests.

And my question is, how do I migrate a job to another server? I always
thought that this is what "distributedness" is about...

-- 
Engineer : How do I do it?
Economist : How much will it cost?
Twisted Developer: But does it block?


From devnetwork at gmail.com  Tue Dec 21 08:48:12 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Tue, 21 Dec 2010 15:48:12 +0200
Subject: [Twisted-Python] Job server
In-Reply-To: <AANLkTimhR5whCYBDHb-=fLNkhZHKto494_FqrN4cPD+Z@mail.gmail.com>
References: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>
	<AANLkTimhR5whCYBDHb-=fLNkhZHKto494_FqrN4cPD+Z@mail.gmail.com>
Message-ID: <AANLkTimjpD0KzFPw36Hg33Ko6SiJropHB21hvwCdUzk8@mail.gmail.com>

Hello

I will write a README and INSTALL documents asap but I did not have
anything about USAGE document in my mind. I will take care of it also.
Thank you for your advice.

Migrating a job during processing is not available yet but I think I
can find a way to provide that within Multiple Job Handler but I dont
have any idea at the moment. Multiple Job Handler idea is based on
separating jobs into small pieces with a job wizard tool. I know that
sounds very limited but I will make it flexible as much as I can then
people will be available to add their own patterns. For example; lets
say we have an uploaded photo and we need to resize it and save into
our storage then we need to update database with this new information.
In that case, Multiple Job Handler sends this job to different workers
with related information and collects the answers for any necessary
response. If anything goes wrong with these workers Multiple Job
Handler sends broken part(s) of the main request to another server.
That s just came into my mind right now. That s not exactly a
migration process but could be work.

Actually for now, I want to create a job farm around a single jobbar
server and sync them with other farms. In that way all servers would
serve all jobs in whole platform. That s what I m trying to do first.
The missing part here is that pushing forward on wrong remote call
requests. That means if we couldnt find any worker connection when we
got a remote call, we should push it to another server with another
remote call. I ll add that asap. This is kind of a hobby for me and I
m pretty busy with my regular job these days :(

I hope I explain the idea in my mind clearly.

-Umut


On Tue, Dec 21, 2010 at 2:33 PM, Yaroslav Fedevych
<jaroslaw.fedewicz at gmail.com> wrote:
> On Tue, Dec 21, 2010 at 1:40 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>> Hello everybody
>>
>> My job server is on progress and maybe you want to check it out.
>> Distribution part is ready but I still work on remote calls. As soon
>> as I get it done I ll write an article about building a job server
>> with twisted framework. (I wrote an article about Apache Mina
>> framework while designing jobbar
>> http://umut.mobi/blog/2010/11/11/how-to-build-a-distributed-job-server-with-apache-mina-framework/)
>> I m pretty busy these days it'll take almost a week more. Here is
>> website of the project
>>
>> http://jobbarserver.org/
>>
>> By the way, my goal with this project is building a distributed job
>> server and useful extensions for needs of any kind of projects. Some
>> extensions in my mind:
>> Memory Cache, Document Storage, Multiple Job Handler for parallel
>> processing, Log Manager, Data Traffic ?Analyser
>>
>> If you have any idea please share with me.
>>
>
> Before proceeding with any extensions, would be extremely nice to have:
>
> a README with a description of what it is and what do I gain from
> using it right now.
> an INSTALL with a description of how to make it available systemwide,
> how to ship it with my project or what might break if I install it.
> a USAGE with a simple boilerplate with its bits explained: what do I
> need this code for? What bad happens if I take this bit out? What
> stuff can I customize and with what degree of freedom?
> *.pyc in your .gitignore
> docstrings for classes
>
> Someone with more profound knowledge would surely tell you about unit tests.
>
> And my question is, how do I migrate a job to another server? I always
> thought that this is what "distributedness" is about...
>
> --
> Engineer : How do I do it?
> Economist : How much will it cost?
> Twisted Developer: But does it block?
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi


From dvkeeney at gmail.com  Tue Dec 21 13:14:07 2010
From: dvkeeney at gmail.com (David)
Date: Tue, 21 Dec 2010 11:14:07 -0700
Subject: [Twisted-Python] process output modulation
Message-ID: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>

We are streaming a large amount of program output to the browser via a
twisted app, and we are seeing huge memory consumption.

We have a database process that generates large amounts of data to
stdout, and we are streaming that to the browser through a twisted
web2 app.  We are using web2 because it supports upload streaming as
well.

Our code looks like:

        env = {}
        input = stream.MemoryStream('')
        SQLDUMP = '/usr/bin/dump'

        pstream = stream.ProcessStreamer(input, SQLDUMP,
                             [SQLDUMP,'--format=p','--clean',
                              '--host='+cfg.SOCKET,
                              '--username='+self.role,dbname],
                             env)
        pstream.run()

        outstream = WatchedStream(pstream.outStream)

        response = http.Response( headers=headers, stream=outstream)


        class WatchedStream(object):

           def __init__(self,stream):
                self.stream = stream
           def split(self, point):
                ... some implementation
           def close(self):
                ... some implementation
           def read(self):
                d = self.stream.read()
                bufSize = sum( [len(b) for b in self.stream.buffer if b])
                log.msg('buffer size: %s'%bufSize)
                return d

Watching the log shows us that the stream (a web2.ProducerStream)
buffer is growing continuously to hundreds of MB.  Doesn't a stream
object have a bufferSize attribute and the ability to throttle the
flow of data based on buffer fullness?  Does that throttling behavior
have to be triggered explicitly?

Yes, I know that web2 is deprecated, but I don't know that the problem
is in the web2 components.  The reactor.spawnProcess documentation
does not seem to address the matter of modulating the read speed.  Any
assistance will be appreciated.


-- 
dkeeney at travelbyroad.net
Rdbhost -> SQL databases as a webservice [www.rdbhost.com]


From exarkun at twistedmatrix.com  Tue Dec 21 13:51:57 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 21 Dec 2010 18:51:57 -0000
Subject: [Twisted-Python] process output modulation
In-Reply-To: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>
References: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>
Message-ID: <20101221185157.5919.1706371542.divmod.xquotient.200@localhost.localdomain>

On 06:14 pm, dvkeeney at gmail.com wrote:
>We are streaming a large amount of program output to the browser via a
>twisted app, and we are seeing huge memory consumption.
>
>We have a database process that generates large amounts of data to
>stdout, and we are streaming that to the browser through a twisted
>web2 app.  We are using web2 because it supports upload streaming as
>well.
>
>Our code looks like:
>
>        env = {}
>        input = stream.MemoryStream('')
>        SQLDUMP = '/usr/bin/dump'
>
>        pstream = stream.ProcessStreamer(input, SQLDUMP,
>                             [SQLDUMP,'--format=p','--clean',
>                              '--host='+cfg.SOCKET,
>                              '--username='+self.role,dbname],
>                             env)
>        pstream.run()
>
>        outstream = WatchedStream(pstream.outStream)
>
>        response = http.Response( headers=headers, stream=outstream)
>
>
>        class WatchedStream(object):
>
>           def __init__(self,stream):
>                self.stream = stream
>           def split(self, point):
>                ... some implementation
>           def close(self):
>                ... some implementation
>           def read(self):
>                d = self.stream.read()
>                bufSize = sum( [len(b) for b in self.stream.buffer if 
>b])
>                log.msg('buffer size: %s'%bufSize)
>                return d
>
>Watching the log shows us that the stream (a web2.ProducerStream)
>buffer is growing continuously to hundreds of MB.  Doesn't a stream
>object have a bufferSize attribute and the ability to throttle the
>flow of data based on buffer fullness?  Does that throttling behavior
>have to be triggered explicitly?
>
>Yes, I know that web2 is deprecated, but I don't know that the problem
>is in the web2 components.  The reactor.spawnProcess documentation
>does not seem to address the matter of modulating the read speed.  Any
>assistance will be appreciated.

You probably want to pause Twisted's child process reader when you 
notice your buffer is getting too large.  Off hand, I can't say how you 
might translate this advice into specific stream API calls, but 
ultimately you want to call `pauseProducing` on something.

It's also possible you'll have to go through some not-quite-documented 
interfaces(/implementations) to get there.  IProcessTransport has no 
pauseProducing method, but the POSIX implementation of that interface 
has a `pipes` dictionary where the values are `IProducer` providers, so 
you can call `pauseProducing` on them (or just the one for, say, stdout, 
if that's where you're getting bytes from).

Later, of course, you'll want to undo the pause with a call to 
`resumeProducing`.

Jean-Paul


From dvkeeney at gmail.com  Tue Dec 21 15:51:04 2010
From: dvkeeney at gmail.com (David)
Date: Tue, 21 Dec 2010 13:51:04 -0700
Subject: [Twisted-Python] process output modulation
In-Reply-To: <20101221185157.5919.1706371542.divmod.xquotient.200@localhost.localdomain>
References: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>
	<20101221185157.5919.1706371542.divmod.xquotient.200@localhost.localdomain>
Message-ID: <AANLkTi=K5EMFTkpnrkw_wZtJFziNs12ZaJkFbgcfvnGz@mail.gmail.com>

Thank you.

I was thinking along those lines, but wasn't sure how the
producer/consumer methods related to the streams model.  I guess I
still don't know, but I now have more confidence that a solution is
there to find.

I was considering a klunky workaround, where the db output is piped to
a throttling program which pipes to the web app.  I still have the
problem of telling that filter how fast to go, but that is more of a
unix domain problem and less of a twisted domain problem.  Doable, but
yuck.

I guess it's time to dig into the reactor.spawnProcess code and find
where the producer-related method calls are.

David

On Tue, Dec 21, 2010 at 11:51 AM,  <exarkun at twistedmatrix.com> wrote:
> On 06:14 pm, dvkeeney at gmail.com wrote:
>>We are streaming a large amount of program output to the browser via a
>>twisted app, and we are seeing huge memory consumption.
>>
>>We have a database process that generates large amounts of data to
>>stdout, and we are streaming that to the browser through a twisted
>>web2 app. ?We are using web2 because it supports upload streaming as
>>well.
>>
>>Our code looks like:
>>
>> ? ? ? ?env = {}
>> ? ? ? ?input = stream.MemoryStream('')
>> ? ? ? ?SQLDUMP = '/usr/bin/dump'
>>
>> ? ? ? ?pstream = stream.ProcessStreamer(input, SQLDUMP,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? [SQLDUMP,'--format=p','--clean',
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?'--host='+cfg.SOCKET,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?'--username='+self.role,dbname],
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? env)
>> ? ? ? ?pstream.run()
>>
>> ? ? ? ?outstream = WatchedStream(pstream.outStream)
>>
>> ? ? ? ?response = http.Response( headers=headers, stream=outstream)
>>
>>
>> ? ? ? ?class WatchedStream(object):
>>
>> ? ? ? ? ? def __init__(self,stream):
>> ? ? ? ? ? ? ? ?self.stream = stream
>> ? ? ? ? ? def split(self, point):
>> ? ? ? ? ? ? ? ?... some implementation
>> ? ? ? ? ? def close(self):
>> ? ? ? ? ? ? ? ?... some implementation
>> ? ? ? ? ? def read(self):
>> ? ? ? ? ? ? ? ?d = self.stream.read()
>> ? ? ? ? ? ? ? ?bufSize = sum( [len(b) for b in self.stream.buffer if
>>b])
>> ? ? ? ? ? ? ? ?log.msg('buffer size: %s'%bufSize)
>> ? ? ? ? ? ? ? ?return d
>>
>>Watching the log shows us that the stream (a web2.ProducerStream)
>>buffer is growing continuously to hundreds of MB. ?Doesn't a stream
>>object have a bufferSize attribute and the ability to throttle the
>>flow of data based on buffer fullness? ?Does that throttling behavior
>>have to be triggered explicitly?
>>
>>Yes, I know that web2 is deprecated, but I don't know that the problem
>>is in the web2 components. ?The reactor.spawnProcess documentation
>>does not seem to address the matter of modulating the read speed. ?Any
>>assistance will be appreciated.
>
> You probably want to pause Twisted's child process reader when you
> notice your buffer is getting too large. ?Off hand, I can't say how you
> might translate this advice into specific stream API calls, but
> ultimately you want to call `pauseProducing` on something.
>
> It's also possible you'll have to go through some not-quite-documented
> interfaces(/implementations) to get there. ?IProcessTransport has no
> pauseProducing method, but the POSIX implementation of that interface
> has a `pipes` dictionary where the values are `IProducer` providers, so
> you can call `pauseProducing` on them (or just the one for, say, stdout,
> if that's where you're getting bytes from).
>
> Later, of course, you'll want to undo the pause with a call to
> `resumeProducing`.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
dkeeney at travelbyroad.net
Rdbhost -> SQL databases as a webservice [www.rdbhost.com]


From ericd at netdenizen.com  Thu Dec 23 08:53:46 2010
From: ericd at netdenizen.com (Eric Dennison)
Date: Thu, 23 Dec 2010 08:53:46 -0500
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
Message-ID: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>

I am planning to teach a Python/Pygame workshop in which students will be
(mostly) using Apple hardware and OSX in various flavors. The installation
of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
download/install Twisted because no dmg installers are being built now that
Twisted is pre-installed on the system Python. Since I don't wish to use the
(relatively old) system Python, I would like to figure out how to install
Twisted into my Python 2.6 installs.

I have had success with building and installing Twisted from sources, but
this is not a viable solution for installing to 20 different machines.

I have also had success with simply copying Twisted/Zope/SSL directories
from the system Python to Python2.6, but I can't help feeling like this is
going to come back to haunt me later :)

Does anyone have experience with this dilemma or any suggestions for me? I
am not experienced with OSX, so there may be some obvious things that I
simply don't know about.

TIA -Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101223/3823a0d6/attachment.htm 

From klrkdekira at gmail.com  Thu Dec 23 08:59:02 2010
From: klrkdekira at gmail.com (CL Chow)
Date: Thu, 23 Dec 2010 21:59:02 +0800
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
In-Reply-To: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
References: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
Message-ID: <AANLkTi=XVguWW9F_HPE-b5qW5V1CjW4WMXfWidG0+JmP@mail.gmail.com>

easy_install/pip?

Regards,
CL Chow
"Please do not send me Microsoft Office/Apple iWork documents. Send
OpenDocument instead! http://fsf.org/campaigns/opendocument/"




On Thu, Dec 23, 2010 at 9:53 PM, Eric Dennison <ericd at netdenizen.com> wrote:

> I am planning to teach a Python/Pygame workshop in which students will be
> (mostly) using Apple hardware and OSX in various flavors. The installation
> of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
> download/install Twisted because no dmg installers are being built now that
> Twisted is pre-installed on the system Python. Since I don't wish to use the
> (relatively old) system Python, I would like to figure out how to install
> Twisted into my Python 2.6 installs.
>
> I have had success with building and installing Twisted from sources, but
> this is not a viable solution for installing to 20 different machines.
>
> I have also had success with simply copying Twisted/Zope/SSL directories
> from the system Python to Python2.6, but I can't help feeling like this is
> going to come back to haunt me later :)
>
> Does anyone have experience with this dilemma or any suggestions for me? I
> am not experienced with OSX, so there may be some obvious things that I
> simply don't know about.
>
> TIA -Eric
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101223/96533d9c/attachment.htm 

From rowen at uw.edu  Thu Dec 23 15:53:58 2010
From: rowen at uw.edu (Russell E. Owen)
Date: Thu, 23 Dec 2010 12:53:58 -0800
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
References: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
Message-ID: <rowen-7F66FB.12535823122010@news.gmane.org>

In article 
<AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V at mail.gmail.com>,
 Eric Dennison <ericd at netdenizen.com> wrote:

> I am planning to teach a Python/Pygame workshop in which students will be
> (mostly) using Apple hardware and OSX in various flavors. The installation
> of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
> download/install Twisted because no dmg installers are being built now that
> Twisted is pre-installed on the system Python. Since I don't wish to use the
> (relatively old) system Python, I would like to figure out how to install
> Twisted into my Python 2.6 installs.
> 
> I have had success with building and installing Twisted from sources, but
> this is not a viable solution for installing to 20 different machines.
> 
> I have also had success with simply copying Twisted/Zope/SSL directories
> from the system Python to Python2.6, but I can't help feeling like this is
> going to come back to haunt me later :)
> 
> Does anyone have experience with this dilemma or any suggestions for me? I
> am not experienced with OSX, so there may be some obvious things that I
> simply don't know about.
> 
> TIA -Eric
> ---------------------------------------------------------------------
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

One option is to use bdist_mpkg to make your own binary installer. it is 
easy to use. Instead of the usual install-from-source sequend:
  python setup.py build
  python setup.py install
you do this:
  bdist_mpkg
the result is a binary installer. I have not tried it with Twisted but 
it's well worth a try.

bdist_mpkg can be installed using easy_install

-- Russell



From ericd at netdenizen.com  Thu Dec 23 17:40:18 2010
From: ericd at netdenizen.com (Eric Dennison)
Date: Thu, 23 Dec 2010 17:40:18 -0500
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
In-Reply-To: <rowen-7F66FB.12535823122010@news.gmane.org>
References: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
	<rowen-7F66FB.12535823122010@news.gmane.org>
Message-ID: <AANLkTi=xe=a-QQcAU_dqDKNr7efcNdrG+KR1nQy5fgx+@mail.gmail.com>

Thank you all! Now I feel foolish because it was so easy.

I'm used to the Ubuntu way of installing things so I didn't know I could
just do all of this by installing easy_install and using that to install
twisted (and whatever else strikes my fancy). It works like a charm :)

-Eric

On Thu, Dec 23, 2010 at 3:53 PM, Russell E. Owen <rowen at uw.edu> wrote:

> In article
> <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V at mail.gmail.com<AANLkTikqm8_dJ_PkK0%2BPY4uJnmgUtGAwX2XCwu_Gia3V at mail.gmail.com>
> >,
>  Eric Dennison <ericd at netdenizen.com> wrote:
>
> > I am planning to teach a Python/Pygame workshop in which students will be
> > (mostly) using Apple hardware and OSX in various flavors. The
> installation
> > of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
> > download/install Twisted because no dmg installers are being built now
> that
> > Twisted is pre-installed on the system Python. Since I don't wish to use
> the
> > (relatively old) system Python, I would like to figure out how to install
> > Twisted into my Python 2.6 installs.
> >
> > I have had success with building and installing Twisted from sources, but
> > this is not a viable solution for installing to 20 different machines.
> >
> > I have also had success with simply copying Twisted/Zope/SSL directories
> > from the system Python to Python2.6, but I can't help feeling like this
> is
> > going to come back to haunt me later :)
> >
> > Does anyone have experience with this dilemma or any suggestions for me?
> I
> > am not experienced with OSX, so there may be some obvious things that I
> > simply don't know about.
> >
> > TIA -Eric
> > ---------------------------------------------------------------------
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> One option is to use bdist_mpkg to make your own binary installer. it is
> easy to use. Instead of the usual install-from-source sequend:
>  python setup.py build
>  python setup.py install
> you do this:
>  bdist_mpkg
> the result is a binary installer. I have not tried it with Twisted but
> it's well worth a try.
>
> bdist_mpkg can be installed using easy_install
>
> -- Russell
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101223/b09016bc/attachment.htm 

From glyph at twistedmatrix.com  Fri Dec 24 01:13:40 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 24 Dec 2010 01:13:40 -0500
Subject: [Twisted-Python] [Twisted-web] render_GET and memory consumption
In-Reply-To: <20101223162219.5919.1951931351.divmod.xquotient.253@localhost.localdomain>
References: <4D1038D9.40406@fosstel.com>
	<20101221140031.5919.517938216.divmod.xquotient.184@localhost.localdomain>
	<4D10BB00.7090503@fosstel.com>
	<20101221155946.5919.440441679.divmod.xquotient.187@localhost.localdomain>
	<4D10D91F.80507@fosstel.com>
	<20101221174713.5919.1700330039.divmod.xquotient.191@localhost.localdomain>
	<4D10F9CB.5030502@fosstel.com>
	<20101221192420.5919.613974464.divmod.xquotient.214@localhost.localdomain>
	<290C6FDD-E5C8-4644-8CAE-A672C59D3207@twistedmatrix.com>
	<20101223162219.5919.1951931351.divmod.xquotient.253@localhost.localdomain>
Message-ID: <12CB770E-8539-4FAF-ABB6-798F362E9EA6@twistedmatrix.com>

Cross-posting to Twisted core list because this is starting to get into general non-web stuff.  Future replies about this fork of the thread should go there.

On Dec 23, 2010, at 11:22 AM, exarkun at twistedmatrix.com wrote:

> On 22 Dec, 06:51 am, glyph at twistedmatrix.com wrote:
>> 
>> On Dec 21, 2010, at 2:24 PM, exarkun at twistedmatrix.com wrote:
>>> Instead, you have to go all the way to producers/consumers, and only 
>>> write more data to the transport buffer when it has finished dealing 
>>> with what you previously gave it.
>> 
>> While everybody should of course use producers and consumers, I feel 
>> like there should be a twisted core ticket for this behavior of 
>> transport buffering, and a twisted web ticket for this behavior of the 
>> request buffering.  The naive implementation _could_ be much cheaper 
>> memory-wise; at the very least, twisted.web.static.Data ought to do the 
>> smart thing.
> 
> Fixing Data sounds like a good idea.  I don't know what improvement to 
> the transport buffering you're thinking of, though.  It doesn't seem 
> like there is an obvious, generally correct fix.

Right now, FileDescriptor.write appends its input data directly to _tempDataBuffer.  So far, so good: no string mangling.

So let's say we do fd.write(header); fd.write(veryBigBody).

Then we start writing.

FileDescriptor.doWrite comes along and notices that the dataBuffer is empty.  The first thing it does in this case: ''.join(_tempDataBuffer); which copies the entire veryBigBody.

FileDescriptor is kinda sorta trying to avoid this problem by maintaining an 'offset' so it doesn't need to re-copy dataBuffer; it could use a similar tactic and do write()s out of individual chunks which are greater than SEND_LIMIT directly, rather than coalescing them together.

Or maybe we could wrap writev() instead of copying stuff at all?



From glyph at twistedmatrix.com  Fri Dec 24 18:13:36 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 24 Dec 2010 18:13:36 -0500
Subject: [Twisted-Python] [Twisted-web] render_GET and memory consumption
In-Reply-To: <4CCBC416-3823-446B-9494-A2253FD4D642@fuhm.net>
References: <4D1038D9.40406@fosstel.com>
	<20101221140031.5919.517938216.divmod.xquotient.184@localhost.localdomain>
	<4D10BB00.7090503@fosstel.com>
	<20101221155946.5919.440441679.divmod.xquotient.187@localhost.localdomain>
	<4D10D91F.80507@fosstel.com>
	<20101221174713.5919.1700330039.divmod.xquotient.191@localhost.localdomain>
	<4D10F9CB.5030502@fosstel.com>
	<20101221192420.5919.613974464.divmod.xquotient.214@localhost.localdomain>
	<290C6FDD-E5C8-4644-8CAE-A672C59D3207@twistedmatrix.com>
	<20101223162219.5919.1951931351.divmod.xquotient.253@localhost.localdomain>
	<12CB770E-8539-4FAF-ABB6-798F362E9EA6@twistedmatrix.com>
	<4CCBC416-3823-446B-9494-A2253FD4D642@fuhm.net>
Message-ID: <4B63AAE3-D38D-4EC7-9661-FB8E410CA2C3@twistedmatrix.com>


On Dec 24, 2010, at 11:47 AM, James Y Knight wrote:

> On Dec 24, 2010, at 1:13 AM, Glyph Lefkowitz wrote:
>> Or maybe we could wrap writev() instead of copying stuff at all?
> 
> What an awesome idea!
> 
> http://twistedmatrix.com/trac/changeset/15847/branches/--omg-optimized-2#file0

Doesn't look like that branch has gotten some love in quite a while :).

Are each of the features there (crecv, iovec, cdefer) represented by a different ticket already?



From exarkun at twistedmatrix.com  Sun Dec 26 00:05:18 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 26 Dec 2010 05:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1293339918.51.915434618@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101226/7bcf3ee6/attachment.htm 

From santoso.wijaya at gmail.com  Mon Dec 27 14:23:14 2010
From: santoso.wijaya at gmail.com (Santoso Wijaya)
Date: Mon, 27 Dec 2010 11:23:14 -0800
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for
 Windows 2.7 AMD64
In-Reply-To: <AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
	<20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
	<AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>
Message-ID: <AANLkTi=NdxkV59QOOFYJ67RROviD4pOr0EmEEFCugEsA@mail.gmail.com>

Bump.

~/santa


On Thu, Dec 16, 2010 at 11:06 AM, Santoso Wijaya
<santoso.wijaya at gmail.com>wrote:

> I tried the exe installer, but with only Python 2.7 AMD64 installed on my
> system, the installer could not locate it, unfortunately.
>
>     "Python version 2.7 required, which was not found in the registry."
>
> HKLM\SOFTWARE\Python\PythonCore\2.7 exists but
> HKLM\SOFTWARE\Wow6432Node\Python\PythonCore\2.7 does not, obviously, which
> is what I assume the installer looks at.
>
> ~/santa
>
>
>
> On Sun, Dec 12, 2010 at 5:47 PM, <exarkun at twistedmatrix.com> wrote:
>
>> On 12:37 am, santoso.wijaya at gmail.com wrote:
>> >Is there something crucial that I am missing?
>>
>> I recommend
>> <
>> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.msi
>> >
>> or
>> <
>> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.exe
>> >.
>>
>> Jean-Paul
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101227/9a2c4d85/attachment.htm 

From exarkun at twistedmatrix.com  Mon Dec 27 14:55:59 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 27 Dec 2010 19:55:59 -0000
Subject: [Twisted-Python] `easy_install Twisted` fails on Python
	for	Windows 2.7 AMD64
In-Reply-To: <AANLkTi=NdxkV59QOOFYJ67RROviD4pOr0EmEEFCugEsA@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
	<20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
	<AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>
	<AANLkTi=NdxkV59QOOFYJ67RROviD4pOr0EmEEFCugEsA@mail.gmail.com>
Message-ID: <20101227195559.5919.1581091167.divmod.xquotient.370@localhost.localdomain>

On 07:23 pm, santoso.wijaya at gmail.com wrote:
>Bump.
>
>~/santa
>
>
>On Thu, Dec 16, 2010 at 11:06 AM, Santoso Wijaya
><santoso.wijaya at gmail.com>wrote:
>>I tried the exe installer, but with only Python 2.7 AMD64 installed on 
>>my
>>system, the installer could not locate it, unfortunately.
>>
>>     "Python version 2.7 required, which was not found in the 
>>registry."
>>
>>HKLM\SOFTWARE\Python\PythonCore\2.7 exists but
>>HKLM\SOFTWARE\Wow6432Node\Python\PythonCore\2.7 does not, obviously, 
>>which
>>is what I assume the installer looks at.

How about <http://www.lfd.uci.edu/~gohlke/pythonlibs/>?

Jean-Paul


From godson.g at gmail.com  Tue Dec 28 02:25:23 2010
From: godson.g at gmail.com (Godson Gera)
Date: Tue, 28 Dec 2010 12:55:23 +0530
Subject: [Twisted-Python] =?windows-1252?q?ANN_=3A_PySWITCH_Release_=96_0?=
	=?windows-1252?q?=2E1alpha?=
In-Reply-To: <AANLkTi=FDcobUchZZsq8uWzfSe99MgTHW5FvZV=d2kzM@mail.gmail.com>
References: <AANLkTi=FDcobUchZZsq8uWzfSe99MgTHW5FvZV=d2kzM@mail.gmail.com>
Message-ID: <AANLkTi=7RBfD1QUgmLGOdW42ShHP77tf1PGSMzMwmU==@mail.gmail.com>

Hi All,

I am glad to announce the first alpha release of PySWITCH.

http://pyswitch.sf.net


The idea of PySWITCH is to offer a complete library to Python and Twisted
programmers for interacting with FreeSWITCH using EventSocket interface. The
target is to cover all FreeSWITCH API commands and Dialplan tools. PySWITCH
handles all the low level details in executing FreeSWITCH commands, so the
programmer can easily concentrate on quickly building FreeSWITCH
applications. As an example, the API functions offered by PySWITCH often
executes many FreeSWITCH commands under the hood and finally returns the
desired result. Suppose you execute a background job, PySWITCH API will
automatically wait and catch the backgroundjob event parse the result and
will fire the deferred.

The current release covers good amount of API commands and a few Dialplan
tools. The protocol communication issues are ironed out. It has a nice event
call back interface. I?ll present its usage in couple of tutorials soon.


-- 
Thanks & Regards,
Godson Gera
http://godson.in
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20101228/d2f2bb2b/attachment.htm 

From devnetwork at gmail.com  Fri Dec 31 07:35:31 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Fri, 31 Dec 2010 14:35:31 +0200
Subject: [Twisted-Python] job server project
Message-ID: <AANLkTi=334Lsj8_zWBEpdj48xTnLiz=-zCV-M7PHO1N+@mail.gmail.com>

Hello everybody

I just completed an article about writing a job server with Twisted
Framework. It's also based on my job server project called Jobbar.

http://umut.mobi/blog/2010/12/31/jobbar-distributed-job-server/

I'm still working on it.

Happy new year.

- Umut


From lvh at laurensvh.be  Fri Dec 31 20:13:06 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 1 Jan 2011 02:13:06 +0100
Subject: [Twisted-Python] twcgi duplicate Content-Type
Message-ID: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>

Hi!


I'm using twcgi to serve a Fossil repository through CGI (it's that or
xinetd). For some reason, Chrome wasn't rendering the CSS. Looking at
the HTTP response headers for the GET request for the CSS file, I saw
this:

HTTP/1.1 200 OK
Date: Sat, 01 Jan 2011 00:14:58 GMT
Content-Length: 13484
Expires: Sat, 8 Jan 2011 00:14:58 GMT
Content-Type: text/html
Content-Type: text/css; charset=utf-8
Server: TwistedWeb/10.2.0

I'm pretty sure duplicate Content-Type headers aren't supposed to happen.

After some digging, I'm convinced the Server, Date and the first
Content-Type are the default values set in t.w.server [1]. Meanwhile,
twcgi [2] users self.request.responseHeaders.addRawHeader, so the
default header is never overwritten.

I'm pretty sure that's not supposed to happen, but I'm not sure what
the correct way to fix this is. Options:

1) Should a list of things that need setRawHeader be introduced?
2) Should setRawHeader be the default, and instead have a list of
things that need addRawHeader?
3) Should that twcgi code use request.setHeader instead, like the
t.w.server code?

I have a feeling it's the last option. but like I said, I'm not sure.

[1] http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/web/server.py#L118
[2] http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/web/twcgi.py#L308


cheers and happy new year,
lvh


From lvh at laurensvh.be  Fri Dec 31 21:33:07 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 1 Jan 2011 03:33:07 +0100
Subject: [Twisted-Python] twcgi duplicate Content-Type
In-Reply-To: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
References: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
Message-ID: <AANLkTi=9+hkywrY-GryyhGY5s7Hr17PZME=O5B8VyXQp@mail.gmail.com>

Aha!

For posterity, this is a known bug: http://twistedmatrix.com/trac/ticket/4742

Fixed in trunk but not yet released.


cheers
lvh


From lvh at laurensvh.be  Fri Dec 31 21:59:08 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 1 Jan 2011 03:59:08 +0100
Subject: [Twisted-Python] twcgi duplicate Content-Type
In-Reply-To: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
References: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
Message-ID: <AANLkTikRM8YhCjkJyOt+qmR72QNk3Qp=zh75Kg06_2bi@mail.gmail.com>

Apparently I was mistaken. That patch is already in the release I'm
running -- this is what *broke* it, apparently. The first ticket fixed
a bug, but introduced a new one. I made a ticket:
http://twistedmatrix.com/trac/ticket/4786

cheers
lvh


From exarkun at twistedmatrix.com  Wed Dec  1 06:43:40 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 01 Dec 2010 13:43:40 -0000
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <20101129120148.GB11887@weiermayer.com>
References: <20101129120148.GB11887@weiermayer.com>
Message-ID: <20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>

On 29 Nov, 12:01 pm, albert.brandl at weiermayer.com wrote:
>Hi!
>
>We are working on a project that has to extract weather information 
>from
>an NMEA stream. There is a NMEAReceiver class, but it only extracts GPS
>information - as expected, since the class is defined in t.p.gps.nmea.
>
>We intend to add the NMEA-0183 messages necessary for my purposes. The
>question is: should we just extend the NMEAReceiver? Weather 
>information
>is not exactly what one would expect in a class below t.p.gps...
>
>On the other hand, it would be strange to create a different kind of
>NMEAReceiver which knows how to handle the messages dealing with
>weather data.

Perhaps the NMEA and GPS parts of NMEAReceiver can be separated from 
each other, so that your weather extractor can use just the former and 
ignore the latter.

You may also want to look at 
https://code.launchpad.net/~lvh/twisted/positioning and see if it 
influences your plans at all.  It would be nice if we eventually merged 
that code. :)

Jean-Paul



From albert.brandl at weiermayer.com  Wed Dec  1 07:33:02 2010
From: albert.brandl at weiermayer.com (Albert Brandl)
Date: Wed, 1 Dec 2010 15:33:02 +0100
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
References: <20101129120148.GB11887@weiermayer.com>
	<20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
Message-ID: <20101201143302.GA12389@weiermayer.com>

On Wed, Dec 01, 2010 at 01:43:40PM -0000, exarkun at twistedmatrix.com wrote:
> Perhaps the NMEA and GPS parts of NMEAReceiver can be separated from 
> each other, so that your weather extractor can use just the former and 
> ignore the latter.

That is not necessary, since I will also need GPS data. I just wondered 
if it would be a good idea to add NMEA messages that have nothing to do 
with GPS to the NMEAReceiver, which is in the package t.p.gps. This 
seems to be misleading. 

But tearing nmea.py apart and moving parts of it to different packages 
looks like much work - not something I'd like to tackle right now :-). 
Maybe I'll just create a subclass of NMEAReceiver and add the necessary 
messages there for now.
 
> You may also want to look at 
> https://code.launchpad.net/~lvh/twisted/positioning and see if it 
> influences your plans at all.  It would be nice if we eventually 
> merged that code. :)

It's kind of hard to understand what this repository is about. The 
README file looks like a copy of the README for Twisted 8.2.0 ;-).

Regards,

Albert
-- 
Albert Brandl
Weiermayer Solutions GmbH      | Abteistraße 12, A-4813 Altmünster
phone: +43 (0) 720 70 30 14    | fax: +43 (0) 7612 20 3 56
web: http://www.weiermayer.com



From foom at fuhm.net  Wed Dec  1 08:23:09 2010
From: foom at fuhm.net (James Y Knight)
Date: Wed, 1 Dec 2010 10:23:09 -0500
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <20101201143302.GA12389@weiermayer.com>
References: <20101129120148.GB11887@weiermayer.com>
	<20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
	<20101201143302.GA12389@weiermayer.com>
Message-ID: <83D273A9-7598-490F-8848-9E5104835EAB@fuhm.net>


On Dec 1, 2010, at 9:33 AM, Albert Brandl wrote:

>> You may also want to look at 
>> https://code.launchpad.net/~lvh/twisted/positioning and see if it 
>> influences your plans at all.  It would be nice if we eventually 
>> merged that code. :)
> 
> It's kind of hard to understand what this repository is about. The 
> README file looks like a copy of the README for Twisted 8.2.0 ;-).

Right: it's a branch of Twisted. You can look at the changelog and see what changed. The interesting parts of that branch are all in the twisted/positioning directory, though:
http://bazaar.launchpad.net/%7Elvh/twisted/positioning/files/head%3A/twisted/positioning/

James


From lvh at laurensvh.be  Wed Dec  1 09:26:02 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Wed, 1 Dec 2010 17:26:02 +0100
Subject: [Twisted-Python] Handling of NMEA messages
In-Reply-To: <83D273A9-7598-490F-8848-9E5104835EAB@fuhm.net>
References: <20101129120148.GB11887@weiermayer.com>
	<20101201134340.2109.1932179904.divmod.xquotient.1799@localhost.localdomain>
	<20101201143302.GA12389@weiermayer.com>
	<83D273A9-7598-490F-8848-9E5104835EAB@fuhm.net>
Message-ID: <AANLkTintayUFjyjn5u793d3XZD4SRXjM2wefCh_YBhpu@mail.gmail.com>

Hi

I'm the guy that wrote twisted-positioning. The NMEA parser should be
feature-complete, but you might have some difficulty doing the glue
code.

I should really get around to turning that into an actual deliverable...


lvh



From bogus@does.not.exist.com  Thu Dec  2 11:36:13 2010
From: bogus@does.not.exist.com ()
Date: Thu, 02 Dec 2010 18:36:13 -0000
Subject: No subject
Message-ID: <mailman.12.1574573466.12674.twisted-python@twistedmatrix.com>




From bogus@does.not.exist.com  Thu Dec  2 11:43:55 2010
From: bogus@does.not.exist.com ()
Date: Thu, 02 Dec 2010 18:43:55 -0000
Subject: No subject
Message-ID: <mailman.13.1574573466.12674.twisted-python@twistedmatrix.com>




From bogus@does.not.exist.com  Thu Dec  2 15:23:23 2010
From: bogus@does.not.exist.com ()
Date: Thu, 02 Dec 2010 22:23:23 -0000
Subject: No subject
Message-ID: <mailman.14.1574573466.12674.twisted-python@twistedmatrix.com>




From vitaly at synapticvision.com  Thu Dec  2 15:25:52 2010
From: vitaly at synapticvision.com (vitaly at synapticvision.com)
Date: Thu, 02 Dec 2010 17:25:52 -0500
Subject: [Twisted-Python] - SPAM!!!!!
In-Reply-To: <4cf7e8bb.948fcc0a.5118.34f4@mx.google.com>
References: <4cf7e8bb.948fcc0a.5118.34f4@mx.google.com>
Message-ID: <20101202172552.86462b3k9jy3fdhc@216.129.205.5>



twisted-python at twistedmatrix.com ADMINISTRATOR!!!!


BLOCK THIS RUSSIAN WHO IS SPAMMING OUT LIST PLEASE:
Vovan <sasmekoll at gmail.com>


regards,
subscriber.


Quoting Vovan <sasmekoll at gmail.com>:

> ?????? ???????? ??????? ????? ???????? ?? ?????, ????? ??? ????????  
> ???????? ?? ?? ?????????? ???????????? ??????? ?? ????????????  
> ????????? ???????? ????????? ?? ? ???????? ???????? ????????? ????  
> ????????????????? ? ?????????? ???????? ??? ??????.
> http://samec.org.ua/?p=202
> ?? ??????? ??????????, ??? ??????????. ????? ??? ??????? ??????? ???????.
>






From jaroslaw.fedewicz at gmail.com  Fri Dec  3 15:36:46 2010
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Sat, 4 Dec 2010 00:36:46 +0200
Subject: [Twisted-Python] - SPAM!!!!!
In-Reply-To: <20101202172552.86462b3k9jy3fdhc@216.129.205.5>
References: <4cf7e8bb.948fcc0a.5118.34f4@mx.google.com>
	<20101202172552.86462b3k9jy3fdhc@216.129.205.5>
Message-ID: <BCEEBB38-6E13-464A-9425-854D271C9378@gmail.com>


On Dec 3, 2010, at 12:25 AM, vitaly at synapticvision.com wrote:

> twisted-python at twistedmatrix.com ADMINISTRATOR!!!!
> 
> BLOCK THIS RUSSIAN WHO IS SPAMMING OUT LIST PLEASE:
> Vovan <sasmekoll at gmail.com>


I suspect this must be some new flavor of malware, hijacking email clients (or specifically Gmail) and sending out spam on their behalf. I've got an ol' good letter from a Nigerian princess a few weeks ago; the interesting bit being that it was sent as if by an old acquaintance of mine, with even his signature included.

However if it's not so, that must be a triple-brutal-facepalm way to spam.

“Never trust a human to do the machine's job.”

-- 
Yaroslav Fedevych
Software Developer and Consultant
jaroslaw.fedewicz at gmail.com
+380685061839, +380969783173

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101204/0ee935d3/attachment-0001.html>

From ndbecker2 at gmail.com  Sat Dec  4 08:47:16 2010
From: ndbecker2 at gmail.com (Neal Becker)
Date: Sat, 04 Dec 2010 10:47:16 -0500
Subject: [Twisted-Python] can I detect a child stopped?
Message-ID: <iddnq5$f1u$1@dough.gmane.org>

Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is there 
some way to detect this?




From exarkun at twistedmatrix.com  Sat Dec  4 09:17:27 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 04 Dec 2010 16:17:27 -0000
Subject: [Twisted-Python] can I detect a child stopped?
In-Reply-To: <iddnq5$f1u$1@dough.gmane.org>
References: <iddnq5$f1u$1@dough.gmane.org>
Message-ID: <20101204161727.2109.1082175532.divmod.xquotient.1813@localhost.localdomain>

On 03:47 pm, ndbecker2 at gmail.com wrote:
>Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is 
>there
>some way to detect this?

The parent will get a SIGCHLD when the child gets SIGSTOP or SIGCONT. 
Using sigaction, you can learn which process was affected, and in what 
way.  We don't have a sigaction wrapper that provides this 
functionality, though (the stdlib signal.signal actually wraps 
sigaction, but it doesn't expose any more functionality than you get 
from signal(2)).

Jean-Paul



From ndbecker2 at gmail.com  Sat Dec  4 12:10:46 2010
From: ndbecker2 at gmail.com (Neal Becker)
Date: Sat, 04 Dec 2010 14:10:46 -0500
Subject: [Twisted-Python] can I detect a child stopped?
References: <iddnq5$f1u$1@dough.gmane.org>
	<20101204161727.2109.1082175532.divmod.xquotient.1813@localhost.localdomain>
Message-ID: <ide3nm$ujv$1@dough.gmane.org>

exarkun at twistedmatrix.com wrote:

> On 03:47 pm, ndbecker2 at gmail.com wrote:
>>Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is
>>there
>>some way to detect this?
> 
> The parent will get a SIGCHLD when the child gets SIGSTOP or SIGCONT.
> Using sigaction, you can learn which process was affected, and in what
> way.  We don't have a sigaction wrapper that provides this
> functionality, though (the stdlib signal.signal actually wraps
> sigaction, but it doesn't expose any more functionality than you get
> from signal(2)).
> 
> Jean-Paul

Didn't twisted already install it's own signal handler for SIGCHLD?  So 
you're suggesting I can chain my own, which then calls the one installed by 
twisted?




From exarkun at twistedmatrix.com  Sat Dec  4 22:05:31 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Dec 2010 05:05:31 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1291525531.51.575622476@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101205/502cedd7/attachment-0001.html>

From exarkun at twistedmatrix.com  Sun Dec  5 00:29:05 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Dec 2010 07:29:05 -0000
Subject: [Twisted-Python] can I detect a child stopped?
In-Reply-To: <ide3nm$ujv$1@dough.gmane.org>
References: <iddnq5$f1u$1@dough.gmane.org>
	<20101204161727.2109.1082175532.divmod.xquotient.1813@localhost.localdomain>
	<ide3nm$ujv$1@dough.gmane.org>
Message-ID: <20101205072905.2109.1301903683.divmod.xquotient.1817@localhost.localdomain>

On 4 Dec, 07:10 pm, ndbecker2 at gmail.com wrote:
>exarkun at twistedmatrix.com wrote:
>>On 03:47 pm, ndbecker2 at gmail.com wrote:
>>>Using processProtocol.  If a child is stopped (e.g., by SIGSTOP), is
>>>there
>>>some way to detect this?
>>
>>The parent will get a SIGCHLD when the child gets SIGSTOP or SIGCONT.
>>Using sigaction, you can learn which process was affected, and in what
>>way.  We don't have a sigaction wrapper that provides this
>>functionality, though (the stdlib signal.signal actually wraps
>>sigaction, but it doesn't expose any more functionality than you get
>>from signal(2)).
>>
>>Jean-Paul
>
>Didn't twisted already install it's own signal handler for SIGCHLD?  So
>you're suggesting I can chain my own, which then calls the one 
>installed by
>twisted?

No, at least not with `signal.signal`, because the necessary information 
isn't exposed by Python.  You need to get the siginfo_t that 
sigaction(2) provides, but isn't exposed to Python.

If there were a module exposing that functionality, then you could 
perhaps work something out.  If such a module were generally available, 
Twisted could even try using it to provide this functionality out of the 
box.

Jean-Paul



From devnetwork at gmail.com  Sun Dec  5 03:37:54 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Sun, 5 Dec 2010 12:37:54 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
Message-ID: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>

Hello everybody. Hope you have a good weekend.

I'm trying to port my distributed job server project to twisted but I
have a few questions.

I just tested twisted with protocol.Protocol socket handler class and
it seems like that it creates a new instance for each connection. I
want to put those connection's ip addresses into an array. Where
should I do that exactly?

How can I get ip address and port information out of self.transport.getPeer()?

That's all for now.

Thank you.

-- 
Best Regards,

Umut AYDIN
Skype: umut-aydin
Blog: http://umut.mobi



From godson.g at gmail.com  Sun Dec  5 07:43:05 2010
From: godson.g at gmail.com (Godson Gera)
Date: Sun, 5 Dec 2010 20:13:05 +0530
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
Message-ID: <AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>

On Sun, Dec 5, 2010 at 4:07 PM, Umut Aydin <devnetwork at gmail.com> wrote:

> Hello everybody. Hope you have a good weekend.
>
> I'm trying to port my distributed job server project to twisted but I
> have a few questions.
>
> I just tested twisted with protocol.Protocol socket handler class and
> it seems like that it creates a new instance for each connection. I
> want to put those connection's ip addresses into an array. Where
> should I do that exactly?
>
> How can I get ip address and port information out of
> self.transport.getPeer()?
>

Each created protocol comes with a refrence to factory that is creating
them, which is a right place of doing all the inter protocol operations .
You can access it via factory attribute of protocol. So, in a typical
twisted program you can refer to the factory by doing self.factory in the
created protocol. You can define an array called peers in factory and access
it like self.factory.peers.

Check out buildProtocol() method of twisted factories to customize protcol
instantiation.

Yes, transport.getPeers() gives you the remote end host and port.

-- 
Thanks & Regards,
Godson Gera
Twisted Python India <http://blog.godson.in>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101205/15971d73/attachment.html>

From devnetwork at gmail.com  Sun Dec  5 12:18:21 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Sun, 5 Dec 2010 21:18:21 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
Message-ID: <AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>

Thank you for your response.

I have another question. In my job server I collect worker connections
into a key/value structure by their categories which means jobs and I
send them some messages when a client connection made a request
suitable with one of worker connections. The problem is that worker
connection may not be available at the moment. I am looking for a
method (like isConnected in Apache Mina) to check if remote socket is
available.

By the way may be I store wrong object. Maybe I should store something
else instead of storing self.transport Any advice will be appreciated!

Hope I could explain myself clearly.

Thank you.

On Sun, Dec 5, 2010 at 4:43 PM, Godson Gera <godson.g at gmail.com> wrote:
>
> On Sun, Dec 5, 2010 at 4:07 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>>
>> Hello everybody. Hope you have a good weekend.
>>
>> I'm trying to port my distributed job server project to twisted but I
>> have a few questions.
>>
>> I just tested twisted with protocol.Protocol socket handler class and
>> it seems like that it creates a new instance for each connection. I
>> want to put those connection's ip addresses into an array. Where
>> should I do that exactly?
>>
>> How can I get ip address and port information out of
>> self.transport.getPeer()?
>
> Each created protocol comes with a refrence to factory that is creating
> them, which is a right place of doing all the inter protocol operations .
> You can access it via factory attribute of protocol. So, in a typical
> twisted program you can refer to the factory by doing self.factory in the
> created protocol. You can define an array called peers in factory and access
> it like self.factory.peers.
>
> Check out buildProtocol() method of twisted factories to customize protcol
> instantiation.
>
> Yes, transport.getPeers() gives you the remote end host and port.
>
> --
> Thanks & Regards,
> Godson Gera
> Twisted Python India
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi



From einar.twisted at norsk-esport.no  Mon Dec  6 02:21:57 2010
From: einar.twisted at norsk-esport.no (=?ISO-8859-1?Q?Einar_S=2E_Ids=F8?=)
Date: Mon, 6 Dec 2010 10:21:57 +0100
Subject: [Twisted-Python] Modifying the logstring
Message-ID: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>

Hi,

I have an application which logs activity on a number of servers by
two methods:
1. TCP-based queries (app is client)
2. UDP-based logging (app is server)

Each server that is being logged is represented by an instance of a
server class. TCP-queries are performed by each instance at set
intervals, while the UDP-logs are gathered by a global logging
instance which listens to a specific port. Events for a given server
can be triggered by both protocols, but are handled by the server
instance. In other words: An instance of a server class gathers events
by polling the server via TCP /and/ by receiving strings from a UDP
logging instance which passes received datagrams as strings to the
correct instance.

Whenever a loggable event results from the TCP queries, the name of
the protocol class, which is a subclass of
twisted.internet.protocol.Protocol), is used as the logstring. That is
fine, as it allows me to distinguish between different server classes,
although I cannot distinguish between individual servers.

However, when a loggable event occurs on the UDP logging instance, it
writes out a longish protocol name which is the same for all the
different server classes that are subscribing to events on that UDP
port. I have managed to modify the string by doing the following:

        self.udpLogger = reactor.listenUDP(myPort, UDPListener())
        self.udpLogger.logstr = "UDPLogger"

Yet when the logged string is passed, as a string, to a server
instance for processing, the logstring for any result remains
"UDPLogger" no matter how I pass it or what I do to it. I suppose it
is expected behaviour that the protocol should "follow" a result, no
matter how it is processed down the line, but is there any way in
which I can alter the logstring so that instead of "UDPLogger" or the
name of the protocol class, it instead uses the server id or any other
value that I specify?

What I am getting in my logs is:
2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
2010-11-30 10:23:09+0100 [UDPLogger] Something happened on UDP

What I would like is:
2010-11-30 10:23:09+0100 [CSS (TCP),12345] Something happened on TCP
2010-11-30 10:23:09+0100 [CSS (UDP),12345] Something happened on UDP

where 12345 is a unique identifier of the specific server. Or at least:
2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
2010-11-30 10:23:09+0100 [CSS] Something happened on UDP

so that I know the result from UDP concerns a CSS-server.

I hope this was possible to understand. Please let me know if anything
needs to be clarified. :)

Cheers,
Einar



From einar.twisted at norsk-esport.no  Mon Dec  6 03:51:55 2010
From: einar.twisted at norsk-esport.no (=?ISO-8859-1?Q?Einar_S=2E_Ids=F8?=)
Date: Mon, 6 Dec 2010 11:51:55 +0100
Subject: [Twisted-Python] Modifying the logstring
In-Reply-To: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>
References: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>
Message-ID: <AANLkTi=Qf688x5tZcC43M+-AQ0scSxKAYqcVA+7-XUSe@mail.gmail.com>

I was able to modify the logstring for the TCP query by following a
similar approach to what I did to the UDP logger:


    def logPrefix(self):
        return self.connection.transport.protocol.__class__.__name__ +
", " + str(self.id)

    def startClient(self):
        self.f = self.factory(self, password=self.queryPassword)
        self.connection = reactor.connectTCP(self.ip, self.queryPort, self.f)
        self.connection.transport.logPrefix = self.logPrefix

Perhaps not very elegant, but it does the job and allows me to get a
log prefix which not only tells me the protocol but also the exact
serverinstance.

But is it even possibly to do something similar for the UDP scenario
where I have one UDP-logger which calls bound functions from the
individual server-representing instances to do the actual parsing? The
UDP-listener class is defined like this:

class UDPListener(DatagramProtocol):
    _serverList = {}

    def addParser(self, ip, port, f):
        self._serverList[(str(ip), int(port))] = f

    def removeParser(self, ip, port):
        if (str(host), int(port)) in self._serverList:
            del self._serverList[(str(ip), int(port))]

    def datagramReceived(self, data, (host, port)):
        #print "received %r from %s:%d" % (data, host, port)
        if (host, port) in self._serverList:
            self._serverList[(host, port)](data)

Cheers,
Einar



On Mon, Dec 6, 2010 at 10:21 AM, Einar S. Idsø
<einar.twisted at norsk-esport.no> wrote:
> Hi,
>
> I have an application which logs activity on a number of servers by
> two methods:
> 1. TCP-based queries (app is client)
> 2. UDP-based logging (app is server)
>
> Each server that is being logged is represented by an instance of a
> server class. TCP-queries are performed by each instance at set
> intervals, while the UDP-logs are gathered by a global logging
> instance which listens to a specific port. Events for a given server
> can be triggered by both protocols, but are handled by the server
> instance. In other words: An instance of a server class gathers events
> by polling the server via TCP /and/ by receiving strings from a UDP
> logging instance which passes received datagrams as strings to the
> correct instance.
>
> Whenever a loggable event results from the TCP queries, the name of
> the protocol class, which is a subclass of
> twisted.internet.protocol.Protocol), is used as the logstring. That is
> fine, as it allows me to distinguish between different server classes,
> although I cannot distinguish between individual servers.
>
> However, when a loggable event occurs on the UDP logging instance, it
> writes out a longish protocol name which is the same for all the
> different server classes that are subscribing to events on that UDP
> port. I have managed to modify the string by doing the following:
>
>        self.udpLogger = reactor.listenUDP(myPort, UDPListener())
>        self.udpLogger.logstr = "UDPLogger"
>
> Yet when the logged string is passed, as a string, to a server
> instance for processing, the logstring for any result remains
> "UDPLogger" no matter how I pass it or what I do to it. I suppose it
> is expected behaviour that the protocol should "follow" a result, no
> matter how it is processed down the line, but is there any way in
> which I can alter the logstring so that instead of "UDPLogger" or the
> name of the protocol class, it instead uses the server id or any other
> value that I specify?
>
> What I am getting in my logs is:
> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
> 2010-11-30 10:23:09+0100 [UDPLogger] Something happened on UDP
>
> What I would like is:
> 2010-11-30 10:23:09+0100 [CSS (TCP),12345] Something happened on TCP
> 2010-11-30 10:23:09+0100 [CSS (UDP),12345] Something happened on UDP
>
> where 12345 is a unique identifier of the specific server. Or at least:
> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
> 2010-11-30 10:23:09+0100 [CSS] Something happened on UDP
>
> so that I know the result from UDP concerns a CSS-server.
>
> I hope this was possible to understand. Please let me know if anything
> needs to be clarified. :)
>
> Cheers,
> Einar
>



From devnetwork at gmail.com  Mon Dec  6 07:11:48 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Mon, 6 Dec 2010 16:11:48 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
Message-ID: <AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>

Hello again

I couldn't get any answer to my question and I think I couldn't point
my problem clearly.

https://github.com/naimon/Jobbar/blob/master/src/lib/server.py

On the line #130 I need to check if the socket is still connected.

That worker variable is a copy of self.transport actually. I have
found it's an instance of twisted.internet.tcp.Server
I also found getHandle method to reach the actual socket but I
couldn't find any method to check its availability.

Help please.

Thank you.


On Sun, Dec 5, 2010 at 9:18 PM, Umut Aydin <devnetwork at gmail.com> wrote:
> Thank you for your response.
>
> I have another question. In my job server I collect worker connections
> into a key/value structure by their categories which means jobs and I
> send them some messages when a client connection made a request
> suitable with one of worker connections. The problem is that worker
> connection may not be available at the moment. I am looking for a
> method (like isConnected in Apache Mina) to check if remote socket is
> available.
>
> By the way may be I store wrong object. Maybe I should store something
> else instead of storing self.transport Any advice will be appreciated!
>
> Hope I could explain myself clearly.
>
> Thank you.
>
> On Sun, Dec 5, 2010 at 4:43 PM, Godson Gera <godson.g at gmail.com> wrote:
>>
>> On Sun, Dec 5, 2010 at 4:07 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>>>
>>> Hello everybody. Hope you have a good weekend.
>>>
>>> I'm trying to port my distributed job server project to twisted but I
>>> have a few questions.
>>>
>>> I just tested twisted with protocol.Protocol socket handler class and
>>> it seems like that it creates a new instance for each connection. I
>>> want to put those connection's ip addresses into an array. Where
>>> should I do that exactly?
>>>
>>> How can I get ip address and port information out of
>>> self.transport.getPeer()?
>>
>> Each created protocol comes with a refrence to factory that is creating
>> them, which is a right place of doing all the inter protocol operations .
>> You can access it via factory attribute of protocol. So, in a typical
>> twisted program you can refer to the factory by doing self.factory in the
>> created protocol. You can define an array called peers in factory and access
>> it like self.factory.peers.
>>
>> Check out buildProtocol() method of twisted factories to customize protcol
>> instantiation.
>>
>> Yes, transport.getPeers() gives you the remote end host and port.
>>
>> --
>> Thanks & Regards,
>> Godson Gera
>> Twisted Python India
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
>
> --
> Best Regards,
>
> Umut AYDIN
> Email: me at umut.mobi
>
> Skype: umut-aydin
>
> Blog: http://umut.mobi
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi



From itamar at itamarst.org  Mon Dec  6 07:29:39 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 06 Dec 2010 09:29:39 -0500
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
Message-ID: <1291645779.1633.1.camel@blake>

On Mon, 2010-12-06 at 16:11 +0200, Umut Aydin wrote:
> Hello again
> 
> I couldn't get any answer to my question and I think I couldn't point
> my problem clearly.
> 
> https://github.com/naimon/Jobbar/blob/master/src/lib/server.py
> 
> On the line #130 I need to check if the socket is still connected.

Disconnection is an *event*: connectionLost will be called on the
protocol. Record the fact you're disconnected inside that method, rather
than checking the socket.




From godson.g at gmail.com  Mon Dec  6 08:16:34 2010
From: godson.g at gmail.com (Godson Gera)
Date: Mon, 6 Dec 2010 20:46:34 +0530
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
Message-ID: <AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>

On Mon, Dec 6, 2010 at 7:41 PM, Umut Aydin <devnetwork at gmail.com> wrote:

> Hello again
>
> I couldn't get any answer to my question and I think I couldn't point
> my problem clearly.
>
> https://github.com/naimon/Jobbar/blob/master/src/lib/server.py
>
> On the line #130 I need to check if the socket is still connected.
>
> That worker variable is a copy of self.transport actually. I have
> found it's an instance of twisted.internet.tcp.Server
> I also found getHandle method to reach the actual socket but I
> couldn't find any method to check its availability.
>


Store a reference to the protocol object it self instead of protcol's
transport.

Connectiong checking  can be done easily by simply adding a state attribute
to your protocol class. In your protocol define self.isConnected = False .
Set that attribute to True inside connectionMade() event method and set that
to False inside connectionLost() event.


-- 
Thanks & Regards,
Godson Gera.
Twisted Python Consultant
India<http://blog.godson.in/2008/10/starpy-100a13-released-asterisk.html>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101206/0f7e0cb3/attachment-0001.html>

From devnetwork at gmail.com  Mon Dec  6 16:00:44 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Tue, 7 Dec 2010 01:00:44 +0200
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
	<AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>
Message-ID: <AANLkTiknQek5OuFPHk7rt32D-5vxUtYo=LX7-tFQ+873@mail.gmail.com>

Thank you for your response.

Probably that works and also itamar's approach seems right.

If  connectionLost method is being called every disconnection (no
matter what reason is) my unregisterBySocket method handles that
situation already. I mean It s not possible to have disconnected
socket in my job pool(work).

Right?



On Mon, Dec 6, 2010 at 5:16 PM, Godson Gera <godson.g at gmail.com> wrote:
>
>
> On Mon, Dec 6, 2010 at 7:41 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>>
>> Hello again
>>
>> I couldn't get any answer to my question and I think I couldn't point
>> my problem clearly.
>>
>> https://github.com/naimon/Jobbar/blob/master/src/lib/server.py
>>
>> On the line #130 I need to check if the socket is still connected.
>>
>> That worker variable is a copy of self.transport actually. I have
>> found it's an instance of twisted.internet.tcp.Server
>> I also found getHandle method to reach the actual socket but I
>> couldn't find any method to check its availability.
>
>
> Store a reference to the protocol object it self instead of protcol's
> transport.
>
> Connectiong checking  can be done easily by simply adding a state attribute
> to your protocol class. In your protocol define self.isConnected = False .
> Set that attribute to True inside connectionMade() event method and set that
> to False inside connectionLost() event.
>
>
> --
> Thanks & Regards,
> Godson Gera.
> Twisted Python Consultant India
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi



From exarkun at twistedmatrix.com  Mon Dec  6 16:38:17 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 06 Dec 2010 23:38:17 -0000
Subject: [Twisted-Python] Porting Apache Mina to Twisted
In-Reply-To: <AANLkTiknQek5OuFPHk7rt32D-5vxUtYo=LX7-tFQ+873@mail.gmail.com>
References: <AANLkTi=_CJqqkpJYuY2dSZ9OmENzoXx-rpTUtFx+c+8d@mail.gmail.com>
	<AANLkTikbGY7iC7qe8WC_JGemH3EYnJf6df_A14k-h9DU@mail.gmail.com>
	<AANLkTikO9YucBefpjVgwvu6+PZvbHsH2MdtuA0Cu-hWm@mail.gmail.com>
	<AANLkTi=_0xGk+4eeudABWydbDiDj8c46ZgVvsXh2R7nB@mail.gmail.com>
	<AANLkTin9znYxYZtR9xHnXs_eHsjYMaCErkf8tS0o2uaH@mail.gmail.com>
	<AANLkTiknQek5OuFPHk7rt32D-5vxUtYo=LX7-tFQ+873@mail.gmail.com>
Message-ID: <20101206233817.2109.917351565.divmod.xquotient.1831@localhost.localdomain>

On 11:00 pm, devnetwork at gmail.com wrote:
>Thank you for your response.
>
>Probably that works and also itamar's approach seems right.
>
>If  connectionLost method is being called every disconnection (no
>matter what reason is) my unregisterBySocket method handles that
>situation already. I mean It s not possible to have disconnected
>socket in my job pool(work).
>
>Right?

Yep.

Jean-Paul



From einar.twisted at norsk-esport.no  Tue Dec  7 06:14:26 2010
From: einar.twisted at norsk-esport.no (=?ISO-8859-1?Q?Einar_S=2E_Ids=F8?=)
Date: Tue, 7 Dec 2010 14:14:26 +0100
Subject: [Twisted-Python] Modifying the logstring
In-Reply-To: <AANLkTi=Qf688x5tZcC43M+-AQ0scSxKAYqcVA+7-XUSe@mail.gmail.com>
References: <AANLkTin3uaOpnR0XsoaqKeUceF2b+Xkvv+Q-kwXrbgzZ@mail.gmail.com>
	<AANLkTi=Qf688x5tZcC43M+-AQ0scSxKAYqcVA+7-XUSe@mail.gmail.com>
Message-ID: <AANLkTik-eUxA5-aQh=TvhC9+=QT=5=kQvYmjngSs_vsk@mail.gmail.com>

To continue my monologue: For future reference, it is worth noting
that the code previously posted will not work for reconnecting clients
since only the first connection receives the modified logPrefix
method. A better approach is to bind logPrefix() in
onClientConnected() to ensure it is bound for each new connection.

def startClient(self):
    self.f = self.getFactory()
    reactor.connectTCP(self.ip, self.queryPort, self.f)

def f_onClientConnected(self, protocolInstance):
    def logPrefix():
        return "whateveryouwant"
    self.f.connection = protocolInstance
    self.f.connection.transport.logPrefix = logPrefix

def getFactory(self):
    f = ReconnectingClientFactory()
    f.protocol = whatever
    f.onClientConnected = self.f_onClientConnected
    return f

I am still in the dark when it comes to modifying the logstring in
other cases, though. I am sure I could transfer the results from my
UDP logger to my service using strings instead of bound methods, but
then the logstring would end up being simply [-], which is of no use
to me. Is there really no way in which I can tell Twisted that "All
log messages generated by this object shall be on the following
format"? It seems like such a simple task to accomplish, yet it
completely avoids me.

Also let me add that I am completely taken aback with the genius that
is Twisted Python. The more I work with it, the more I realise this.
Writing clients or servers for *anything* is so simple, and the
efficiency of the code, especially with respect to CPU-usage, is
wonderful. My application started by polling each server via an
external executable written in C, but now fetches info from the same
number of servers using protocols written in Python, and even gathers
a whole lot more info than before via event logs.CPU-usage has dropped
from 20% to 1%, and the memory footprint is only around 40 MB :)

Cheers,
Einar



On Mon, Dec 6, 2010 at 11:51 AM, Einar S. Idsø
<einar.twisted at norsk-esport.no> wrote:
> I was able to modify the logstring for the TCP query by following a
> similar approach to what I did to the UDP logger:
>
>
>    def logPrefix(self):
>        return self.connection.transport.protocol.__class__.__name__ +
> ", " + str(self.id)
>
>    def startClient(self):
>        self.f = self.factory(self, password=self.queryPassword)
>        self.connection = reactor.connectTCP(self.ip, self.queryPort, self.f)
>        self.connection.transport.logPrefix = self.logPrefix
>
> Perhaps not very elegant, but it does the job and allows me to get a
> log prefix which not only tells me the protocol but also the exact
> serverinstance.
>
> But is it even possibly to do something similar for the UDP scenario
> where I have one UDP-logger which calls bound functions from the
> individual server-representing instances to do the actual parsing? The
> UDP-listener class is defined like this:
>
> class UDPListener(DatagramProtocol):
>    _serverList = {}
>
>    def addParser(self, ip, port, f):
>        self._serverList[(str(ip), int(port))] = f
>
>    def removeParser(self, ip, port):
>        if (str(host), int(port)) in self._serverList:
>            del self._serverList[(str(ip), int(port))]
>
>    def datagramReceived(self, data, (host, port)):
>        #print "received %r from %s:%d" % (data, host, port)
>        if (host, port) in self._serverList:
>            self._serverList[(host, port)](data)
>
> Cheers,
> Einar
>
>
>
> On Mon, Dec 6, 2010 at 10:21 AM, Einar S. Idsø
> <einar.twisted at norsk-esport.no> wrote:
>> Hi,
>>
>> I have an application which logs activity on a number of servers by
>> two methods:
>> 1. TCP-based queries (app is client)
>> 2. UDP-based logging (app is server)
>>
>> Each server that is being logged is represented by an instance of a
>> server class. TCP-queries are performed by each instance at set
>> intervals, while the UDP-logs are gathered by a global logging
>> instance which listens to a specific port. Events for a given server
>> can be triggered by both protocols, but are handled by the server
>> instance. In other words: An instance of a server class gathers events
>> by polling the server via TCP /and/ by receiving strings from a UDP
>> logging instance which passes received datagrams as strings to the
>> correct instance.
>>
>> Whenever a loggable event results from the TCP queries, the name of
>> the protocol class, which is a subclass of
>> twisted.internet.protocol.Protocol), is used as the logstring. That is
>> fine, as it allows me to distinguish between different server classes,
>> although I cannot distinguish between individual servers.
>>
>> However, when a loggable event occurs on the UDP logging instance, it
>> writes out a longish protocol name which is the same for all the
>> different server classes that are subscribing to events on that UDP
>> port. I have managed to modify the string by doing the following:
>>
>>        self.udpLogger = reactor.listenUDP(myPort, UDPListener())
>>        self.udpLogger.logstr = "UDPLogger"
>>
>> Yet when the logged string is passed, as a string, to a server
>> instance for processing, the logstring for any result remains
>> "UDPLogger" no matter how I pass it or what I do to it. I suppose it
>> is expected behaviour that the protocol should "follow" a result, no
>> matter how it is processed down the line, but is there any way in
>> which I can alter the logstring so that instead of "UDPLogger" or the
>> name of the protocol class, it instead uses the server id or any other
>> value that I specify?
>>
>> What I am getting in my logs is:
>> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
>> 2010-11-30 10:23:09+0100 [UDPLogger] Something happened on UDP
>>
>> What I would like is:
>> 2010-11-30 10:23:09+0100 [CSS (TCP),12345] Something happened on TCP
>> 2010-11-30 10:23:09+0100 [CSS (UDP),12345] Something happened on UDP
>>
>> where 12345 is a unique identifier of the specific server. Or at least:
>> 2010-11-30 10:23:09+0100 [CSS,client] Something happened on TCP
>> 2010-11-30 10:23:09+0100 [CSS] Something happened on UDP
>>
>> so that I know the result from UDP concerns a CSS-server.
>>
>> I hope this was possible to understand. Please let me know if anything
>> needs to be clarified. :)
>>
>> Cheers,
>> Einar
>>
>



From jack.bates at gmail.com  Sat Dec 11 20:05:08 2010
From: jack.bates at gmail.com (Jack Bates)
Date: Sat, 11 Dec 2010 19:05:08 -0800
Subject: [Twisted-Python] Mail content filter: How to avoid SMTP client
 finishing sending message before SMTP server finishes receiving it?
Message-ID: <1292123109.5341.51.camel@selene>

Struggling little bit to write a Postfix content filter [1] with Twisted
Mail. The content filter will eventually add a cookie to the "from"
address, identifying the address that the message was sent to

Here's my attempt so far [2]

The problem is that the SMTP client finishes sending the message before
the SMTP server finishes receiving it - i.e. Client.sentMail() is called
before Message.eomReceived()

To fix this, I want SMTPClient.smtpState_data() [3], which uses
FileSender [4], to wait for the server to finish receiving the message
before proceeding to smtpState_msgSent()

Is this possible?

The only alternative I can think of is to not start sending the message
until after the server finishes receiving it - i.e. start sending the
message after Message.eomReceived() is called. But this seems to me like
it would have worse performance than sending messages at the same time
as they're being received - especially for a message with a large
attachment

How can I avoid the client finishing sending the message before the
server finishes receiving it?

[1] http://www.postfix.org/SMTPD_PROXY_README.html
[2] https://github.com/jablko/cookie/blob/master/cookie
[3] http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/mail/smtp.py#L1126
[4] http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.FileSender.html



From exarkun at twistedmatrix.com  Sat Dec 11 22:05:26 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 12 Dec 2010 05:05:26 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1292130326.88.1916046899@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101212/27d12bf8/attachment-0002.html>

From santoso.wijaya at gmail.com  Sun Dec 12 17:37:39 2010
From: santoso.wijaya at gmail.com (Santoso Wijaya)
Date: Sun, 12 Dec 2010 16:37:39 -0800
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for Windows
	2.7 AMD64
Message-ID: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>

Is there something crucial that I am missing?


C:\Users\santa>C:\Python27\Scripts\easy_install.exe Twisted
Searching for Twisted
Reading http://pypi.python.org/simple/Twisted/
Reading http://twistedmatrix.com/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/9.0/
Reading http://www.twistedmatrix.com
Reading http://twistedmatrix.com/products/download
Reading http://twistedmatrix.com/projects/core/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.1/
Best match: Twisted 10.2.0
Downloading
http://pypi.python.org/packages/source/T/Twisted/Twisted-10.2.0.tar.
bz2
Processing Twisted-10.2.0.tar.bz2
Running Twisted-10.2.0\setup.py -q bdist_egg --dist-dir
c:\users\santa\appdata\l
ocal\temp\easy_install-jcob9g\Twisted-10.2.0\egg-dist-tmp-nuaqjd
Traceback (most recent call last):
  File "C:\Python27\Scripts\easy_install-script.py", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts',
'easy_install')()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 1712, in main
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 1700, in with_ei_usage
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 1716, in <lambda>
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 211, in run
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 446, in easy_install
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 476, in install_item
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 655, in install_eggs
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 930, in build_and_install
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\easy_install.py", line 919, in run_setup
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\san
dbox.py", line 62, in run_setup
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\san
dbox.py", line 105, in run
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\san
dbox.py", line 64, in <lambda>
  File "setup.py", line 97, in <module>
  File "setup.py", line 92, in main
  File ".\twisted\python\dist.py", line 47, in setup
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\bdist_egg.py", line 175, in run
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\bdist_egg.py", line 161, in call_command
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File
"C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg\setuptools\com
mand\install_lib.py", line 20, in run
  File "C:\Python27\lib\distutils\command\install_lib.py", line 111, in
build
    self.run_command('build_ext')
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\Python27\lib\distutils\command\build_ext.py", line 340, in run
    self.build_extensions()
  File ".\twisted\python\dist.py", line 327, in build_extensions
  File ".\twisted\python\dist.py", line 318, in prepare_extensions
  File "twisted\runner\topfiles\setup.py", line 14, in <lambda>
  File ".\twisted\python\dist.py", line 360, in _check_header
  File ".\twisted\python\dist.py", line 346, in _compile_helper
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 469, in compile
    self.initialize()
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 379, in initialize
    vc_env = query_vcvarsall(VERSION, plat_spec)
  File "C:\Python27\lib\distutils\msvc9compiler.py", line 295, in
query_vcvarsal
l
    raise ValueError(str(list(result.keys())))
ValueError: [u'path']

C:\Users\santa>


~/santa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101212/cd740d83/attachment-0002.html>

From zancarius at gmail.com  Sun Dec 12 18:26:13 2010
From: zancarius at gmail.com (Benjamin A. Shelton)
Date: Sun, 12 Dec 2010 18:26:13 -0700
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for
 Windows 2.7 AMD64
In-Reply-To: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
Message-ID: <4D057635.9010100@gmail.com>

On 12/12/2010 5:37 PM, Santoso Wijaya wrote:
> Is there something crucial that I am missing?
>
>

I don't typically develop on Windows with Python. I assume that this is 
the 64 bit version of setuptools as well and not an x86 version 
shoehorned into an existing Python install? I only ask the latter, 
because it is supposedly possible with some registry trickery to install 
the 32 bit version (I've never tried) which may exhibit weirdness.

There's an unofficial/unsupported build of setuptools for amd64 here 
that may work (it worked in my case): 
http://www.lfd.uci.edu/~gohlke/pythonlibs/ 
<http://www.lfd.uci.edu/%7Egohlke/pythonlibs/>

Be sure to read the warnings on that page as they do appear to be based 
off exceedingly new code taken directly from each project's repository, 
so there may be bugs--but it did work for me since I couldn't get the 
PyPI distro to install. :)

Hope this helps!

--
Benjamin



From exarkun at twistedmatrix.com  Sun Dec 12 18:47:11 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 13 Dec 2010 01:47:11 -0000
Subject: [Twisted-Python] `easy_install Twisted` fails on Python
	for	Windows 2.7 AMD64
In-Reply-To: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
Message-ID: <20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>

On 12:37 am, santoso.wijaya at gmail.com wrote:
>Is there something crucial that I am missing?

I recommend 
<http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.msi> 
or 
<http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.exe>.

Jean-Paul



From drken567 at gmail.com  Tue Dec 14 07:06:46 2010
From: drken567 at gmail.com (Ken MacDonald)
Date: Tue, 14 Dec 2010 09:06:46 -0500
Subject: [Twisted-Python] easy_install and twisted problems?
Message-ID: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>

I'm trying to use easy_install to load twisted, but I keep getting the
following error about not being able to find "vcvarsall.bat". As you can
see, I have the .bat and it's in the PATH. I have Visual Studio C++ Express
installed, and googled a bunch of references to similar easy_install
problems; several suggested installing MingW32's compiler. I tried that,
which got rid of the vcvarsall message, but came up with a stack of fatal
compile errors.

Any suggestions as to what I might be doing wrong with the installation most
welcome.
Thanks,
Ken
================================================================================
C:\Python26\Lib\distutils>vcvarsall.bat
Setting environment for using Microsoft Visual Studio 2010 x86 tools.

C:\Python26\Lib\distutils>easy_install twisted
install_dir c:\python26\Lib\site-packages\
Searching for twisted
Reading http://pypi.python.org/simple/twisted/
Reading http://twistedmatrix.com/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/10.0/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/9.0/
Reading http://www.twistedmatrix.com
Reading http://twistedmatrix.com/products/download
Reading http://twistedmatrix.com/projects/core/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.2/
Reading http://tmrc.mit.edu/mirror/twisted/Twisted/8.1/
Best match: Twisted 10.2.0
Downloading
http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.tar.b
z2#md5=73da62c793269eade8121da336b01ba5
Processing Twisted-10.2.0.tar.bz2
Running Twisted-10.2.0\setup.py -q bdist_egg --dist-dir
c:\users\kmacdo~1\appdat
a\local\temp\easy_install-dip2sj\Twisted-10.2.0\egg-dist-tmp-ctzrhl
*error: Setup script exited with error: Unable to find vcvarsall.bat
*
C:\Python26\Lib\distutils>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101214/023c851b/attachment-0001.html>

From exarkun at twistedmatrix.com  Tue Dec 14 07:44:12 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 14 Dec 2010 14:44:12 -0000
Subject: [Twisted-Python] easy_install and twisted problems?
In-Reply-To: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>
References: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>
Message-ID: <20101214144412.2058.358926685.divmod.xquotient.171@localhost.localdomain>

On 02:06 pm, drken567 at gmail.com wrote:
>I'm trying to use easy_install to load twisted, but I keep getting the
>following error about not being able to find "vcvarsall.bat". As you 
>can
>see, I have the .bat and it's in the PATH. I have Visual Studio C++ 
>Express
>installed, and googled a bunch of references to similar easy_install
>problems; several suggested installing MingW32's compiler. I tried 
>that,
>which got rid of the vcvarsall message, but came up with a stack of 
>fatal
>compile errors.
>
>Any suggestions as to what I might be doing wrong with the installation 
>most
>welcome.
>Thanks,
>Ken
>================================================================================
>C:\Python26\Lib\distutils>vcvarsall.bat
>Setting environment for using Microsoft Visual Studio 2010 x86 tools.

As I understand it, Python 2.6 requires Visual Studio 2008.

However, I recommend using one of the installers available for download 
from the website:

http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.msi

http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.exe

Jean-Paul



From drken567 at gmail.com  Tue Dec 14 09:03:30 2010
From: drken567 at gmail.com (Ken MacDonald)
Date: Tue, 14 Dec 2010 11:03:30 -0500
Subject: [Twisted-Python] easy_install and twisted problems?
In-Reply-To: <20101214144412.2058.358926685.divmod.xquotient.171@localhost.localdomain>
References: <AANLkTimwbRWpPcc41qEMSam+i8e-H7YcZ=jweQsEam9S@mail.gmail.com>
	<20101214144412.2058.358926685.divmod.xquotient.171@localhost.localdomain>
Message-ID: <AANLkTikLzqn_Yk9+RiSmoAwwC9ZHTgCyrTGnzTAN6w2H@mail.gmail.com>

Thanks Jean-Paul,
This seems to work fine, and quickly, too.

Just before your message, I was able to get an apparently successful install
of twisted by installing ActiveState Python 2.6, and installing with their
package manager, so:

c:\>pypm install twisted

but the installers you mention are probably the best bet.
Thanks again,
Ken

As I understand it, Python 2.6 requires Visual Studio 2008.
>
> However, I recommend using one of the installers available for download
> from the website:
>
>
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.msi
>
>
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.6.exe
>
> Jean-Paul
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101214/a5010454/attachment.html>

From ypercube at gmail.com  Wed Dec 15 09:07:28 2010
From: ypercube at gmail.com (Pandelis Theodosiou)
Date: Wed, 15 Dec 2010 18:07:28 +0200
Subject: [Twisted-Python] multicast
Message-ID: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>

I'm trying to make a Multicast client.

I've tried the simple script found in:
http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3

While it shows no errors, it doesn't receive any data. How can I check what
the problem is?
It runs on a Debian 64-bit machine where I've installed Python2.6 and
Twisted 10.0.2.0

Could it be some firewall setting?
Is it possible I've somehow screwed with the installation procedure?

Pandelis

from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer

class MulticastClientUDP(DatagramProtocol):

    def datagramReceived(self, datagram, address):
            print "Received:" + repr(datagram)

# Send multicast on 224.0.0.1:8005, on our dynamically allocated port
reactor.listenUDP(0, MulticastClientUDP()).write('UniqueID',
                                                 ('233.75.215.44', 60044))
reactor.run()



 <http://int.ask.com/web?siteid=10000861&webqsrc=999&l=dis&q=233.75.215.44>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101215/0c765199/attachment-0001.html>

From thomas.burguiere at c-s.fr  Wed Dec 15 10:13:45 2010
From: thomas.burguiere at c-s.fr (BURGUIERE Thomas)
Date: Wed, 15 Dec 2010 18:13:45 +0100
Subject: [Twisted-Python] twisted.words.protocols.jabber and XEP-0138 stream
	compression
Message-ID: <4D08F749.40907@c-s.fr>

Hey all,

I've search (in Twisted 10.2.0) for a reference to XEP-0138 (stream 
compression) in twisted.words.protocols.jabber but I don't see anything 
referring to it.

Is there a way to activate stream compression ? (I have a server which 
have a parameter for zlib stream compression)
And if so what do i need to do ?


Thanks,



From kevin.horn at gmail.com  Wed Dec 15 12:09:58 2010
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 15 Dec 2010 13:09:58 -0600
Subject: [Twisted-Python] twisted.words.protocols.jabber and XEP-0138
 stream compression
In-Reply-To: <4D08F749.40907@c-s.fr>
References: <4D08F749.40907@c-s.fr>
Message-ID: <AANLkTik-D38-JmVNJeuyBZ8wHhipa+7wRh7dJpqPmyVo@mail.gmail.com>

On Wed, Dec 15, 2010 at 11:13 AM, BURGUIERE Thomas
<thomas.burguiere at c-s.fr>wrote:

> Hey all,
>
> I've search (in Twisted 10.2.0) for a reference to XEP-0138 (stream
> compression) in twisted.words.protocols.jabber but I don't see anything
> referring to it.
>
> Is there a way to activate stream compression ? (I have a server which
> have a parameter for zlib stream compression)
> And if so what do i need to do ?
>
>
> Thanks,
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

No idea, but you might ask on the Twisted-Jabber list as well:
https://mailman.ik.nu/mailman/listinfo/twisted-jabber

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101215/8bec2a59/attachment-0001.html>

From itamar at itamarst.org  Wed Dec 15 17:06:14 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 15 Dec 2010 19:06:14 -0500
Subject: [Twisted-Python] multicast
In-Reply-To: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
Message-ID: <1292457974.1779.0.camel@blake>

On Wed, 2010-12-15 at 18:07 +0200, Pandelis Theodosiou wrote:
> I'm trying to make a Multicast client.
> 
> I've tried the simple script found in:
> http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3
> 
> While it shows no errors, it doesn't receive any data. How can I check
> what the problem is?

You didn't do the necessary joinGroup() call, which is in the original
example.




From thomas.burguiere at c-s.fr  Thu Dec 16 02:09:08 2010
From: thomas.burguiere at c-s.fr (BURGUIERE Thomas)
Date: Thu, 16 Dec 2010 10:09:08 +0100
Subject: [Twisted-Python] twisted.words.protocols.jabber and XEP-0138
 stream compression
In-Reply-To: <AANLkTik-D38-JmVNJeuyBZ8wHhipa+7wRh7dJpqPmyVo@mail.gmail.com>
References: <4D08F749.40907@c-s.fr>
	<AANLkTik-D38-JmVNJeuyBZ8wHhipa+7wRh7dJpqPmyVo@mail.gmail.com>
Message-ID: <4D09D734.4010302@c-s.fr>



Le 15/12/2010 20:09, Kevin Horn a écrit :
> On Wed, Dec 15, 2010 at 11:13 AM, BURGUIERE Thomas 
> <thomas.burguiere at c-s.fr <mailto:thomas.burguiere at c-s.fr>> wrote:
>
>     Hey all,
>
>     I've search (in Twisted 10.2.0) for a reference to XEP-0138 (stream
>     compression) in twisted.words.protocols.jabber but I don't see
>     anything
>     referring to it.
>
>     Is there a way to activate stream compression ? (I have a server which
>     have a parameter for zlib stream compression)
>     And if so what do i need to do ?
>
>
>     Thanks,
>
>     _______________________________________________
>     Twisted-Python mailing list
>     Twisted-Python at twistedmatrix.com
>     <mailto:Twisted-Python at twistedmatrix.com>
>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> No idea, but you might ask on the Twisted-Jabber list as well:
> https://mailman.ik.nu/mailman/listinfo/twisted-jabber
>
> Kevin Horn
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>    
Ok I'll do that.

Thanks for the information.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101216/7184d848/attachment.html>

From ypercube at gmail.com  Thu Dec 16 03:09:46 2010
From: ypercube at gmail.com (Pandelis Theodosiou)
Date: Thu, 16 Dec 2010 12:09:46 +0200
Subject: [Twisted-Python] multicast
In-Reply-To: <1292457974.1779.0.camel@blake>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
Message-ID: <AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>

On Thu, Dec 16, 2010 at 2:06 AM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> On Wed, 2010-12-15 at 18:07 +0200, Pandelis Theodosiou wrote:
> > I'm trying to make a Multicast client.
> >
> > I've tried the simple script found in:
> > http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3
> >
> > While it shows no errors, it doesn't receive any data. How can I check
> > what the problem is?
>
> You didn't do the necessary joinGroup() call, which is in the original
> example.
>
>
I made many trials, and one was like this:

from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer


class MulticastClientUDP(DatagramProtocol):

    def startProtocol(self):
        self.transport.joinGroup('233.75.215.44')

    def datagramReceived(self, datagram, address):
            print "Received:" + repr(datagram)

# Trying to receive from 233.75.215.44, on our dynamically allocated port
reactor.listenUDP(60044, MulticastClientUDP())
reactor.run()

But datagramReceived is never called. Am I doing something wrong?
Is there any other method that should be called so I start listening on that
group?

I've also tried to use listenMulticast instead of listenUDP but then I
realized this is if I need more than one application to listen/write to the
multicast port and I don't need that.
pandelis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101216/8daa06e1/attachment.html>

From exarkun at twistedmatrix.com  Thu Dec 16 08:31:01 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 16 Dec 2010 15:31:01 -0000
Subject: [Twisted-Python] multicast
In-Reply-To: <AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
Message-ID: <20101216153101.2058.2049547135.divmod.xquotient.272@localhost.localdomain>

On 10:09 am, ypercube at gmail.com wrote:
>On Thu, Dec 16, 2010 at 2:06 AM, Itamar Turner-Trauring 
><itamar at itamarst.org
>>wrote:
>
>>On Wed, 2010-12-15 at 18:07 +0200, Pandelis Theodosiou wrote:
>> > I'm trying to make a Multicast client.
>> >
>> > I've tried the simple script found in:
>> > http://twistedmatrix.com/documents/10.1.0/core/howto/udp.html#auto3
>> >
>> > While it shows no errors, it doesn't receive any data. How can I 
>>check
>> > what the problem is?
>>
>>You didn't do the necessary joinGroup() call, which is in the original
>>example.
>I made many trials, and one was like this:
>
>from twisted.internet.protocol import DatagramProtocol
>from twisted.internet import reactor
>from twisted.application.internet import MulticastServer
>
>
>class MulticastClientUDP(DatagramProtocol):
>
>    def startProtocol(self):
>        self.transport.joinGroup('233.75.215.44')
>
>    def datagramReceived(self, datagram, address):
>            print "Received:" + repr(datagram)
>
># Trying to receive from 233.75.215.44, on our dynamically allocated 
>port
>reactor.listenUDP(60044, MulticastClientUDP())
>reactor.run()
>
>But datagramReceived is never called. Am I doing something wrong?
>Is there any other method that should be called so I start listening on 
>that
>group?
>
>I've also tried to use listenMulticast instead of listenUDP but then I
>realized this is if I need more than one application to listen/write to 
>the
>multicast port and I don't need that.
>pandelis

Then it may indeed be an issue with a routing device somewhere near your 
tests.  Dropping all multicast traffic is a common behavior to encounter 
in firewalls and home routers.

Maybe if you play with iptables or the equivalent on your system you'll 
be able to fix this.

Jean-Paul



From itamar at itamarst.org  Thu Dec 16 08:59:53 2010
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 16 Dec 2010 10:59:53 -0500
Subject: [Twisted-Python] multicast
In-Reply-To: <AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
Message-ID: <1292515193.2033.1.camel@blake>

On Thu, 2010-12-16 at 12:09 +0200, Pandelis Theodosiou wrote:

> 
> I've also tried to use listenMulticast instead of listenUDP but then I
> realized this is if I need more than one application to listen/write
> to the multicast port and I don't need that.
> pandelis

You should use listenMulticast regardless if you want to use multicast.





From exarkun at twistedmatrix.com  Thu Dec 16 09:10:29 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 16 Dec 2010 16:10:29 -0000
Subject: [Twisted-Python] multicast
In-Reply-To: <1292515193.2033.1.camel@blake>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
	<1292515193.2033.1.camel@blake>
Message-ID: <20101216161029.2058.1592790811.divmod.xquotient.275@localhost.localdomain>

On 03:59 pm, itamar at itamarst.org wrote:
>On Thu, 2010-12-16 at 12:09 +0200, Pandelis Theodosiou wrote:
>>
>>I've also tried to use listenMulticast instead of listenUDP but then I
>>realized this is if I need more than one application to listen/write
>>to the multicast port and I don't need that.
>>pandelis
>
>You should use listenMulticast regardless if you want to use multicast.

Is that an error in the udp howto, then?  The second multicast example 
uses listenUDP.

Jean-Paul



From agasson at red-elvis.net  Thu Dec 16 09:47:41 2010
From: agasson at red-elvis.net (Andrew Gasson)
Date: Thu, 16 Dec 2010 17:47:41 +0100
Subject: [Twisted-Python] multicast
In-Reply-To: <20101216161029.2058.1592790811.divmod.xquotient.275@localhost.localdomain>
References: <AANLkTimgGJPEhcifzaLd01LVTPbPyL2znz30n5RRaXj1@mail.gmail.com>
	<1292457974.1779.0.camel@blake>
	<AANLkTi=5GmOLqr-d0=Cnow6g6Uut3SZab8amSR8ZzNeJ@mail.gmail.com>
	<1292515193.2033.1.camel@blake>
	<20101216161029.2058.1592790811.divmod.xquotient.275@localhost.localdomain>
Message-ID: <CB733F3E-9468-4416-8F86-09FF32FA202A@red-elvis.net>


On 16/12/2010, at 5:10 PM, exarkun at twistedmatrix.com wrote:

> On 03:59 pm, itamar at itamarst.org wrote:
>> On Thu, 2010-12-16 at 12:09 +0200, Pandelis Theodosiou wrote:
>>> 
>>> I've also tried to use listenMulticast instead of listenUDP but then I
>>> realized this is if I need more than one application to listen/write
>>> to the multicast port and I don't need that.
>>> pandelis
>> 
>> You should use listenMulticast regardless if you want to use multicast.
> 
> Is that an error in the udp howto, then?  The second multicast example 
> uses listenUDP.

check the ttl of your multicast source , they usually default to TTL=1 so wont pass a router hop, also with nix boxes check once you start listening
you are listening on right interface with netstat -g

Gas
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From santoso.wijaya at gmail.com  Thu Dec 16 12:06:15 2010
From: santoso.wijaya at gmail.com (Santoso Wijaya)
Date: Thu, 16 Dec 2010 11:06:15 -0800
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for
 Windows 2.7 AMD64
In-Reply-To: <20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
	<20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
Message-ID: <AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>

I tried the exe installer, but with only Python 2.7 AMD64 installed on my
system, the installer could not locate it, unfortunately.

    "Python version 2.7 required, which was not found in the registry."

HKLM\SOFTWARE\Python\PythonCore\2.7 exists but
HKLM\SOFTWARE\Wow6432Node\Python\PythonCore\2.7 does not, obviously, which
is what I assume the installer looks at.

~/santa


On Sun, Dec 12, 2010 at 5:47 PM, <exarkun at twistedmatrix.com> wrote:

> On 12:37 am, santoso.wijaya at gmail.com wrote:
> >Is there something crucial that I am missing?
>
> I recommend
> <
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.msi
> >
> or
> <
> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.exe
> >.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101216/c0ee7c8b/attachment-0001.html>

From phil at bubblehouse.org  Fri Dec 17 11:13:45 2010
From: phil at bubblehouse.org (Phil Christensen)
Date: Fri, 17 Dec 2010 13:13:45 -0500
Subject: [Twisted-Python] ANN: antioch 1.0 developer preview released
Message-ID: <B3FB653A-2AC0-4E52-8166-5C25D4C36C77@bubblehouse.org>

Hey all,

So, I've recently made big strides with an old project that I've been kicking around ever since working on Divunal back in the Twisted Reality days. Since it uses several Twisted-community projects to solve some problems I've been tinkering with for years, the first place I hoped to recruit interest was among the Twisted community.

My goal has been to create a MUD-like environment, particularly one derived from the philosophies of LambdaMOO. However, I also wanted to use modern web technologies to create something that could be more than a text-based environment, though still probably less suited for an immersive 3D environment or some such. I wanted to allow "anyone" to safely develop in-game code using Python, without fear of accidentally creating an infinite loop and taking down the system. Finally, I wanted to ensure that if someone did create a virally popular game, it would be possible to scale the system in ways LambdaMOO never could.

Today I released what is best described as a developer preview of the 1.0 release of this software, antioch. It comes somewhat from the lineage of a predecessor named txSpace, but is pretty much a complete rewrite.

antioch approaches things with entirely different goals than Twisted Reality/Imaginary did. Like LambdaMOO, it makes very few assumptions about the attributes of your world, assuming it will all be implemented using game verb mechanics. It's primarily concerned with individual user rights, object ownership, and code isolation.

Using Twisted, community libraries (such as Nevow, txAMQP and ampoule), PostgreSQL and RabbitMQ, antioch implements a high-performance, scalable virtual world. There's more details on the features below (sorry for the execu-speak, a habit), but to jump right in, head over to:

	http://philchristensen.github.com/antioch

Or sign up for the discussion group/mailing list at:

	http://groups.google.com/group/antioch-dev

I've done my best to create tons of documentation and installation guides, but I'm always adding to the collection.

Any and all feedback is always appreciated,

- phil



antioch feature set
--------------------

* **Customizable AJAX-Enabled Client** — 
  The antioch web client provides a standards-compliant interface based
  on the Nevow Athena AJAX framework, and is supported by all modern browsers.
  
  Although the default database provided is geared towards text-based games,
  the flexibility of the client interface and the power of the plugin system
  allows many different kinds of games to be developed on the antioch 
  platform.

* **Graphical Object Editors** — 
  Programmers and authors alike will find the built-in authoring tools
  expedite world creation and verb programming.

* **Plugin System** — 
  antioch 'modules' allow developers to create new client functionality.
  The module system was used to implement the built-in object and verb 
  editors, demonstrating the creation of new verb-environment functions,
  Web resources, and client-side JavaScript.

* **Isolated Verb Execution** — 
  Database code is run in individual subprocesses, allowing for memory and
  runtime limits to be applied at the UNIX process level, and allowing for
  verb code to be written in a synchronous style.

* **Highly Scalable Messaging Layer** — 
  antioch uses the RabbitMQ server to implement message passing support,
  allowing support of thousands of active clients with minimal latency.

* **Powerful Natural-Language Parser** — 
  The built-in interpreter parses a large number of different imperative
  statements, making user-world interaction a more immersive experience.

* **Internal Scripting** — 
  A Pure-Python scripting layer integrates tightly with the framework code,
  allowing a high degree of customization.
  
* **Robust Networking** — 
  antioch relies on the Twisted Python and Nevow frameworks to implement
  client-server communication. This robust asynchronous networking library
  allows client counts to scale easily to hundreds of connections.





From rgacote at appropriatesolutions.com  Sat Dec 18 11:04:58 2010
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Sat, 18 Dec 2010 13:04:58 -0500 (EST)
Subject: [Twisted-Python] py2exe cannot find zope.interface -- fixed
In-Reply-To: <1372179378.7581292695468837.JavaMail.rgacote@ip-237.corp.appropriatesolutions.com>
Message-ID: <1221659508.7601292695497337.JavaMail.rgacote@ip-237.corp.appropriatesolutions.com>

We're in the process of upgrading to all the latest Twisted goodness on Windows.
All went smoothly until we tried to build Twisted with py2exe. The final executable gave an error that zope.interface could not be found. 

When we tried adding 'zope.interface' to the includes in setup.py, py2exe threw an error that 'zope' could not be found during the build process.

The trick is go to into the installed zope module and add an empty __init__.py file in the zope directory. The build process now recognizes that as a valid module and all is happy. 

We found a number of people asking about this problem (not necessarily in regards to Twisted) but did not find a good thread with an answer. So, we're posting this in the hope it will save someone an hour or two of problem solving. 

--Ray

-- 
Ray Cote, President
Appropriate Solutions, Inc.
We Build Software
603.924.6079



From exarkun at twistedmatrix.com  Sat Dec 18 22:05:18 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 19 Dec 2010 05:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1292735118.43.1378530731@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101219/8f073ebe/attachment-0001.html>

From JOHN at egh.com  Mon Dec 20 15:26:32 2010
From: JOHN at egh.com (John Santos)
Date: Mon, 20 Dec 2010 17:26:32 -0500
Subject: [Twisted-Python] Obtaining connection information for SSH
	connections
In-Reply-To: <B3FB653A-2AC0-4E52-8166-5C25D4C36C77@bubblehouse.org>
Message-ID: <1101220170206.44893A-100000@Ives.egh.com>

Hi, everyone -

I have an application written in Twisted which allows clients to
connect using SSH (any SSH2 client that I've tried works), to send
it commands and to bridge through it to target devices (connected
via telnet on a LAN or via telnet through a terminal server to serial
ports on the target.)  It's sort of a console monitor/logger/remote
access controller for a random bunch of remote equipment.

For the remote access part, I started from the SSH server examples
in the Twisted book, but modified it to use public key authentication
instead of the username/password authentication in the example.

This part works fine.  The application keeps its own key directory;
if a remote user has a <user>.pub file in the key directory, and the
authentication works with that key, then the user gets remote access...

I'm cleaning up a couple of rough edges, and can't find the info
I need...

1) logging/status information:  I would like to grab the remote
host info so I can log connections/connection failures/disconnections
and include the host name and/or IP address.  I would also like to
be able to display the current list of open connections to the server
in a status display.

I know this info has to be there somewhere, but I can't find it.
Spent several days wandering through a twisted maze of little passages,
looking for anything with a working getPeer() method or likely data,
with no luck.  I know it has to be somewhere, because somewhere deep
down underneath there has to be a TCP socket!

One problem is I don't have a good mental picture of how the peices
all fit together to build an SSH connection.  I think part of the
problem is that not all the pieces are there yet as data elements
get added on the fly to various objects (due to the dynamic nature
of Python, which I am still getting used to.)

So I think it would be very valuable to find some documentation
that explains how all the SSH pieces (conn's, avatars, etc.) all
fit together.

2) Similarly, when authenticating a key (in requestAvatarID()
in the PublicKeyCredentialsChecker, it would be useful to see
the remote host name so I could provide different keys for the
same user coming from different hosts.

Most or all SSH2 servers have a mechanism where you can have
a default public key for a given user, and host-specific keys
for that same user.  Typically, stored in a key file or directory
with names (or tags) like <user>_<host>.pub for the host-specific
key, and with <user>.pub for the default key.  If user FOO is
connecting from host XXX, it looks for ./keys/FOO_XXX.pub, and if
that file is not found, it looks for ./keys/FOO.pub.

Obviously, the credentials checker needs to know the remote host
name for this to work.

Thanks to anyone who can point me in the right direction!


-- 
John Santos
Evans Griffiths & Hart, Inc.
781-861-0670 ext 539




From devnetwork at gmail.com  Tue Dec 21 04:40:39 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Tue, 21 Dec 2010 13:40:39 +0200
Subject: [Twisted-Python] Job server
Message-ID: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>

Hello everybody

My job server is on progress and maybe you want to check it out.
Distribution part is ready but I still work on remote calls. As soon
as I get it done I ll write an article about building a job server
with twisted framework. (I wrote an article about Apache Mina
framework while designing jobbar
http://umut.mobi/blog/2010/11/11/how-to-build-a-distributed-job-server-with-apache-mina-framework/)
I m pretty busy these days it'll take almost a week more. Here is
website of the project

http://jobbarserver.org/

By the way, my goal with this project is building a distributed job
server and useful extensions for needs of any kind of projects. Some
extensions in my mind:
Memory Cache, Document Storage, Multiple Job Handler for parallel
processing, Log Manager, Data Traffic  Analyser

If you have any idea please share with me.

Thanks
-Umut



From jaroslaw.fedewicz at gmail.com  Tue Dec 21 05:33:27 2010
From: jaroslaw.fedewicz at gmail.com (Yaroslav Fedevych)
Date: Tue, 21 Dec 2010 14:33:27 +0200
Subject: [Twisted-Python] Job server
In-Reply-To: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>
References: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>
Message-ID: <AANLkTimhR5whCYBDHb-=fLNkhZHKto494_FqrN4cPD+Z@mail.gmail.com>

On Tue, Dec 21, 2010 at 1:40 PM, Umut Aydin <devnetwork at gmail.com> wrote:
> Hello everybody
>
> My job server is on progress and maybe you want to check it out.
> Distribution part is ready but I still work on remote calls. As soon
> as I get it done I ll write an article about building a job server
> with twisted framework. (I wrote an article about Apache Mina
> framework while designing jobbar
> http://umut.mobi/blog/2010/11/11/how-to-build-a-distributed-job-server-with-apache-mina-framework/)
> I m pretty busy these days it'll take almost a week more. Here is
> website of the project
>
> http://jobbarserver.org/
>
> By the way, my goal with this project is building a distributed job
> server and useful extensions for needs of any kind of projects. Some
> extensions in my mind:
> Memory Cache, Document Storage, Multiple Job Handler for parallel
> processing, Log Manager, Data Traffic  Analyser
>
> If you have any idea please share with me.
>

Before proceeding with any extensions, would be extremely nice to have:

a README with a description of what it is and what do I gain from
using it right now.
an INSTALL with a description of how to make it available systemwide,
how to ship it with my project or what might break if I install it.
a USAGE with a simple boilerplate with its bits explained: what do I
need this code for? What bad happens if I take this bit out? What
stuff can I customize and with what degree of freedom?
*.pyc in your .gitignore
docstrings for classes

Someone with more profound knowledge would surely tell you about unit tests.

And my question is, how do I migrate a job to another server? I always
thought that this is what "distributedness" is about...

-- 
Engineer : How do I do it?
Economist : How much will it cost?
Twisted Developer: But does it block?



From devnetwork at gmail.com  Tue Dec 21 06:48:12 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Tue, 21 Dec 2010 15:48:12 +0200
Subject: [Twisted-Python] Job server
In-Reply-To: <AANLkTimhR5whCYBDHb-=fLNkhZHKto494_FqrN4cPD+Z@mail.gmail.com>
References: <AANLkTikfxaAEGaf=cWbuo7QD3yygE21zi1Vid=OF_Q38@mail.gmail.com>
	<AANLkTimhR5whCYBDHb-=fLNkhZHKto494_FqrN4cPD+Z@mail.gmail.com>
Message-ID: <AANLkTimjpD0KzFPw36Hg33Ko6SiJropHB21hvwCdUzk8@mail.gmail.com>

Hello

I will write a README and INSTALL documents asap but I did not have
anything about USAGE document in my mind. I will take care of it also.
Thank you for your advice.

Migrating a job during processing is not available yet but I think I
can find a way to provide that within Multiple Job Handler but I dont
have any idea at the moment. Multiple Job Handler idea is based on
separating jobs into small pieces with a job wizard tool. I know that
sounds very limited but I will make it flexible as much as I can then
people will be available to add their own patterns. For example; lets
say we have an uploaded photo and we need to resize it and save into
our storage then we need to update database with this new information.
In that case, Multiple Job Handler sends this job to different workers
with related information and collects the answers for any necessary
response. If anything goes wrong with these workers Multiple Job
Handler sends broken part(s) of the main request to another server.
That s just came into my mind right now. That s not exactly a
migration process but could be work.

Actually for now, I want to create a job farm around a single jobbar
server and sync them with other farms. In that way all servers would
serve all jobs in whole platform. That s what I m trying to do first.
The missing part here is that pushing forward on wrong remote call
requests. That means if we couldnt find any worker connection when we
got a remote call, we should push it to another server with another
remote call. I ll add that asap. This is kind of a hobby for me and I
m pretty busy with my regular job these days :(

I hope I explain the idea in my mind clearly.

-Umut


On Tue, Dec 21, 2010 at 2:33 PM, Yaroslav Fedevych
<jaroslaw.fedewicz at gmail.com> wrote:
> On Tue, Dec 21, 2010 at 1:40 PM, Umut Aydin <devnetwork at gmail.com> wrote:
>> Hello everybody
>>
>> My job server is on progress and maybe you want to check it out.
>> Distribution part is ready but I still work on remote calls. As soon
>> as I get it done I ll write an article about building a job server
>> with twisted framework. (I wrote an article about Apache Mina
>> framework while designing jobbar
>> http://umut.mobi/blog/2010/11/11/how-to-build-a-distributed-job-server-with-apache-mina-framework/)
>> I m pretty busy these days it'll take almost a week more. Here is
>> website of the project
>>
>> http://jobbarserver.org/
>>
>> By the way, my goal with this project is building a distributed job
>> server and useful extensions for needs of any kind of projects. Some
>> extensions in my mind:
>> Memory Cache, Document Storage, Multiple Job Handler for parallel
>> processing, Log Manager, Data Traffic  Analyser
>>
>> If you have any idea please share with me.
>>
>
> Before proceeding with any extensions, would be extremely nice to have:
>
> a README with a description of what it is and what do I gain from
> using it right now.
> an INSTALL with a description of how to make it available systemwide,
> how to ship it with my project or what might break if I install it.
> a USAGE with a simple boilerplate with its bits explained: what do I
> need this code for? What bad happens if I take this bit out? What
> stuff can I customize and with what degree of freedom?
> *.pyc in your .gitignore
> docstrings for classes
>
> Someone with more profound knowledge would surely tell you about unit tests.
>
> And my question is, how do I migrate a job to another server? I always
> thought that this is what "distributedness" is about...
>
> --
> Engineer : How do I do it?
> Economist : How much will it cost?
> Twisted Developer: But does it block?
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Best Regards,

Umut AYDIN
Email: me at umut.mobi

Skype: umut-aydin

Blog: http://umut.mobi



From dvkeeney at gmail.com  Tue Dec 21 11:14:07 2010
From: dvkeeney at gmail.com (David)
Date: Tue, 21 Dec 2010 11:14:07 -0700
Subject: [Twisted-Python] process output modulation
Message-ID: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>

We are streaming a large amount of program output to the browser via a
twisted app, and we are seeing huge memory consumption.

We have a database process that generates large amounts of data to
stdout, and we are streaming that to the browser through a twisted
web2 app.  We are using web2 because it supports upload streaming as
well.

Our code looks like:

        env = {}
        input = stream.MemoryStream('')
        SQLDUMP = '/usr/bin/dump'

        pstream = stream.ProcessStreamer(input, SQLDUMP,
                             [SQLDUMP,'--format=p','--clean',
                              '--host='+cfg.SOCKET,
                              '--username='+self.role,dbname],
                             env)
        pstream.run()

        outstream = WatchedStream(pstream.outStream)

        response = http.Response( headers=headers, stream=outstream)


        class WatchedStream(object):

           def __init__(self,stream):
                self.stream = stream
           def split(self, point):
                ... some implementation
           def close(self):
                ... some implementation
           def read(self):
                d = self.stream.read()
                bufSize = sum( [len(b) for b in self.stream.buffer if b])
                log.msg('buffer size: %s'%bufSize)
                return d

Watching the log shows us that the stream (a web2.ProducerStream)
buffer is growing continuously to hundreds of MB.  Doesn't a stream
object have a bufferSize attribute and the ability to throttle the
flow of data based on buffer fullness?  Does that throttling behavior
have to be triggered explicitly?

Yes, I know that web2 is deprecated, but I don't know that the problem
is in the web2 components.  The reactor.spawnProcess documentation
does not seem to address the matter of modulating the read speed.  Any
assistance will be appreciated.


-- 
dkeeney at travelbyroad.net
Rdbhost -> SQL databases as a webservice [www.rdbhost.com]



From exarkun at twistedmatrix.com  Tue Dec 21 11:51:57 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 21 Dec 2010 18:51:57 -0000
Subject: [Twisted-Python] process output modulation
In-Reply-To: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>
References: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>
Message-ID: <20101221185157.5919.1706371542.divmod.xquotient.200@localhost.localdomain>

On 06:14 pm, dvkeeney at gmail.com wrote:
>We are streaming a large amount of program output to the browser via a
>twisted app, and we are seeing huge memory consumption.
>
>We have a database process that generates large amounts of data to
>stdout, and we are streaming that to the browser through a twisted
>web2 app.  We are using web2 because it supports upload streaming as
>well.
>
>Our code looks like:
>
>        env = {}
>        input = stream.MemoryStream('')
>        SQLDUMP = '/usr/bin/dump'
>
>        pstream = stream.ProcessStreamer(input, SQLDUMP,
>                             [SQLDUMP,'--format=p','--clean',
>                              '--host='+cfg.SOCKET,
>                              '--username='+self.role,dbname],
>                             env)
>        pstream.run()
>
>        outstream = WatchedStream(pstream.outStream)
>
>        response = http.Response( headers=headers, stream=outstream)
>
>
>        class WatchedStream(object):
>
>           def __init__(self,stream):
>                self.stream = stream
>           def split(self, point):
>                ... some implementation
>           def close(self):
>                ... some implementation
>           def read(self):
>                d = self.stream.read()
>                bufSize = sum( [len(b) for b in self.stream.buffer if 
>b])
>                log.msg('buffer size: %s'%bufSize)
>                return d
>
>Watching the log shows us that the stream (a web2.ProducerStream)
>buffer is growing continuously to hundreds of MB.  Doesn't a stream
>object have a bufferSize attribute and the ability to throttle the
>flow of data based on buffer fullness?  Does that throttling behavior
>have to be triggered explicitly?
>
>Yes, I know that web2 is deprecated, but I don't know that the problem
>is in the web2 components.  The reactor.spawnProcess documentation
>does not seem to address the matter of modulating the read speed.  Any
>assistance will be appreciated.

You probably want to pause Twisted's child process reader when you 
notice your buffer is getting too large.  Off hand, I can't say how you 
might translate this advice into specific stream API calls, but 
ultimately you want to call `pauseProducing` on something.

It's also possible you'll have to go through some not-quite-documented 
interfaces(/implementations) to get there.  IProcessTransport has no 
pauseProducing method, but the POSIX implementation of that interface 
has a `pipes` dictionary where the values are `IProducer` providers, so 
you can call `pauseProducing` on them (or just the one for, say, stdout, 
if that's where you're getting bytes from).

Later, of course, you'll want to undo the pause with a call to 
`resumeProducing`.

Jean-Paul



From dvkeeney at gmail.com  Tue Dec 21 13:51:04 2010
From: dvkeeney at gmail.com (David)
Date: Tue, 21 Dec 2010 13:51:04 -0700
Subject: [Twisted-Python] process output modulation
In-Reply-To: <20101221185157.5919.1706371542.divmod.xquotient.200@localhost.localdomain>
References: <AANLkTin9+S9==d0Yj=aSk7vHqBdaZfAxQoAuANtweb6n@mail.gmail.com>
	<20101221185157.5919.1706371542.divmod.xquotient.200@localhost.localdomain>
Message-ID: <AANLkTi=K5EMFTkpnrkw_wZtJFziNs12ZaJkFbgcfvnGz@mail.gmail.com>

Thank you.

I was thinking along those lines, but wasn't sure how the
producer/consumer methods related to the streams model.  I guess I
still don't know, but I now have more confidence that a solution is
there to find.

I was considering a klunky workaround, where the db output is piped to
a throttling program which pipes to the web app.  I still have the
problem of telling that filter how fast to go, but that is more of a
unix domain problem and less of a twisted domain problem.  Doable, but
yuck.

I guess it's time to dig into the reactor.spawnProcess code and find
where the producer-related method calls are.

David

On Tue, Dec 21, 2010 at 11:51 AM,  <exarkun at twistedmatrix.com> wrote:
> On 06:14 pm, dvkeeney at gmail.com wrote:
>>We are streaming a large amount of program output to the browser via a
>>twisted app, and we are seeing huge memory consumption.
>>
>>We have a database process that generates large amounts of data to
>>stdout, and we are streaming that to the browser through a twisted
>>web2 app.  We are using web2 because it supports upload streaming as
>>well.
>>
>>Our code looks like:
>>
>>        env = {}
>>        input = stream.MemoryStream('')
>>        SQLDUMP = '/usr/bin/dump'
>>
>>        pstream = stream.ProcessStreamer(input, SQLDUMP,
>>                             [SQLDUMP,'--format=p','--clean',
>>                              '--host='+cfg.SOCKET,
>>                              '--username='+self.role,dbname],
>>                             env)
>>        pstream.run()
>>
>>        outstream = WatchedStream(pstream.outStream)
>>
>>        response = http.Response( headers=headers, stream=outstream)
>>
>>
>>        class WatchedStream(object):
>>
>>           def __init__(self,stream):
>>                self.stream = stream
>>           def split(self, point):
>>                ... some implementation
>>           def close(self):
>>                ... some implementation
>>           def read(self):
>>                d = self.stream.read()
>>                bufSize = sum( [len(b) for b in self.stream.buffer if
>>b])
>>                log.msg('buffer size: %s'%bufSize)
>>                return d
>>
>>Watching the log shows us that the stream (a web2.ProducerStream)
>>buffer is growing continuously to hundreds of MB.  Doesn't a stream
>>object have a bufferSize attribute and the ability to throttle the
>>flow of data based on buffer fullness?  Does that throttling behavior
>>have to be triggered explicitly?
>>
>>Yes, I know that web2 is deprecated, but I don't know that the problem
>>is in the web2 components.  The reactor.spawnProcess documentation
>>does not seem to address the matter of modulating the read speed.  Any
>>assistance will be appreciated.
>
> You probably want to pause Twisted's child process reader when you
> notice your buffer is getting too large.  Off hand, I can't say how you
> might translate this advice into specific stream API calls, but
> ultimately you want to call `pauseProducing` on something.
>
> It's also possible you'll have to go through some not-quite-documented
> interfaces(/implementations) to get there.  IProcessTransport has no
> pauseProducing method, but the POSIX implementation of that interface
> has a `pipes` dictionary where the values are `IProducer` providers, so
> you can call `pauseProducing` on them (or just the one for, say, stdout,
> if that's where you're getting bytes from).
>
> Later, of course, you'll want to undo the pause with a call to
> `resumeProducing`.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
dkeeney at travelbyroad.net
Rdbhost -> SQL databases as a webservice [www.rdbhost.com]



From ericd at netdenizen.com  Thu Dec 23 06:53:46 2010
From: ericd at netdenizen.com (Eric Dennison)
Date: Thu, 23 Dec 2010 08:53:46 -0500
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
Message-ID: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>

I am planning to teach a Python/Pygame workshop in which students will be
(mostly) using Apple hardware and OSX in various flavors. The installation
of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
download/install Twisted because no dmg installers are being built now that
Twisted is pre-installed on the system Python. Since I don't wish to use the
(relatively old) system Python, I would like to figure out how to install
Twisted into my Python 2.6 installs.

I have had success with building and installing Twisted from sources, but
this is not a viable solution for installing to 20 different machines.

I have also had success with simply copying Twisted/Zope/SSL directories
from the system Python to Python2.6, but I can't help feeling like this is
going to come back to haunt me later :)

Does anyone have experience with this dilemma or any suggestions for me? I
am not experienced with OSX, so there may be some obvious things that I
simply don't know about.

TIA -Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101223/3823a0d6/attachment-0001.html>

From klrkdekira at gmail.com  Thu Dec 23 06:59:02 2010
From: klrkdekira at gmail.com (CL Chow)
Date: Thu, 23 Dec 2010 21:59:02 +0800
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
In-Reply-To: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
References: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
Message-ID: <AANLkTi=XVguWW9F_HPE-b5qW5V1CjW4WMXfWidG0+JmP@mail.gmail.com>

easy_install/pip?

Regards,
CL Chow
"Please do not send me Microsoft Office/Apple iWork documents. Send
OpenDocument instead! http://fsf.org/campaigns/opendocument/"




On Thu, Dec 23, 2010 at 9:53 PM, Eric Dennison <ericd at netdenizen.com> wrote:

> I am planning to teach a Python/Pygame workshop in which students will be
> (mostly) using Apple hardware and OSX in various flavors. The installation
> of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
> download/install Twisted because no dmg installers are being built now that
> Twisted is pre-installed on the system Python. Since I don't wish to use the
> (relatively old) system Python, I would like to figure out how to install
> Twisted into my Python 2.6 installs.
>
> I have had success with building and installing Twisted from sources, but
> this is not a viable solution for installing to 20 different machines.
>
> I have also had success with simply copying Twisted/Zope/SSL directories
> from the system Python to Python2.6, but I can't help feeling like this is
> going to come back to haunt me later :)
>
> Does anyone have experience with this dilemma or any suggestions for me? I
> am not experienced with OSX, so there may be some obvious things that I
> simply don't know about.
>
> TIA -Eric
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101223/96533d9c/attachment.html>

From rowen at uw.edu  Thu Dec 23 13:53:58 2010
From: rowen at uw.edu (Russell E. Owen)
Date: Thu, 23 Dec 2010 12:53:58 -0800
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
References: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
Message-ID: <rowen-7F66FB.12535823122010@news.gmane.org>

In article 
<AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V at mail.gmail.com>,
 Eric Dennison <ericd at netdenizen.com> wrote:

> I am planning to teach a Python/Pygame workshop in which students will be
> (mostly) using Apple hardware and OSX in various flavors. The installation
> of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
> download/install Twisted because no dmg installers are being built now that
> Twisted is pre-installed on the system Python. Since I don't wish to use the
> (relatively old) system Python, I would like to figure out how to install
> Twisted into my Python 2.6 installs.
> 
> I have had success with building and installing Twisted from sources, but
> this is not a viable solution for installing to 20 different machines.
> 
> I have also had success with simply copying Twisted/Zope/SSL directories
> from the system Python to Python2.6, but I can't help feeling like this is
> going to come back to haunt me later :)
> 
> Does anyone have experience with this dilemma or any suggestions for me? I
> am not experienced with OSX, so there may be some obvious things that I
> simply don't know about.
> 
> TIA -Eric
> ---------------------------------------------------------------------
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

One option is to use bdist_mpkg to make your own binary installer. it is 
easy to use. Instead of the usual install-from-source sequend:
  python setup.py build
  python setup.py install
you do this:
  bdist_mpkg
the result is a binary installer. I have not tried it with Twisted but 
it's well worth a try.

bdist_mpkg can be installed using easy_install

-- Russell




From ericd at netdenizen.com  Thu Dec 23 15:40:18 2010
From: ericd at netdenizen.com (Eric Dennison)
Date: Thu, 23 Dec 2010 17:40:18 -0500
Subject: [Twisted-Python] Python 2.6 with twisted on OSX
In-Reply-To: <rowen-7F66FB.12535823122010@news.gmane.org>
References: <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V@mail.gmail.com>
	<rowen-7F66FB.12535823122010@news.gmane.org>
Message-ID: <AANLkTi=xe=a-QQcAU_dqDKNr7efcNdrG+KR1nQy5fgx+@mail.gmail.com>

Thank you all! Now I feel foolish because it was so easy.

I'm used to the Ubuntu way of installing things so I didn't know I could
just do all of this by installing easy_install and using that to install
twisted (and whatever else strikes my fancy). It works like a charm :)

-Eric

On Thu, Dec 23, 2010 at 3:53 PM, Russell E. Owen <rowen at uw.edu> wrote:

> In article
> <AANLkTikqm8_dJ_PkK0+PY4uJnmgUtGAwX2XCwu_Gia3V at mail.gmail.com<AANLkTikqm8_dJ_PkK0%2BPY4uJnmgUtGAwX2XCwu_Gia3V at mail.gmail.com>
> >,
>  Eric Dennison <ericd at netdenizen.com> wrote:
>
> > I am planning to teach a Python/Pygame workshop in which students will be
> > (mostly) using Apple hardware and OSX in various flavors. The
> installation
> > of Python 2.6 and Pygame runs smoothly but I hit a wall when trying to
> > download/install Twisted because no dmg installers are being built now
> that
> > Twisted is pre-installed on the system Python. Since I don't wish to use
> the
> > (relatively old) system Python, I would like to figure out how to install
> > Twisted into my Python 2.6 installs.
> >
> > I have had success with building and installing Twisted from sources, but
> > this is not a viable solution for installing to 20 different machines.
> >
> > I have also had success with simply copying Twisted/Zope/SSL directories
> > from the system Python to Python2.6, but I can't help feeling like this
> is
> > going to come back to haunt me later :)
> >
> > Does anyone have experience with this dilemma or any suggestions for me?
> I
> > am not experienced with OSX, so there may be some obvious things that I
> > simply don't know about.
> >
> > TIA -Eric
> > ---------------------------------------------------------------------
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> One option is to use bdist_mpkg to make your own binary installer. it is
> easy to use. Instead of the usual install-from-source sequend:
>  python setup.py build
>  python setup.py install
> you do this:
>  bdist_mpkg
> the result is a binary installer. I have not tried it with Twisted but
> it's well worth a try.
>
> bdist_mpkg can be installed using easy_install
>
> -- Russell
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101223/b09016bc/attachment-0001.html>

From glyph at twistedmatrix.com  Thu Dec 23 23:13:40 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 24 Dec 2010 01:13:40 -0500
Subject: [Twisted-Python] [Twisted-web] render_GET and memory consumption
In-Reply-To: <20101223162219.5919.1951931351.divmod.xquotient.253@localhost.localdomain>
References: <4D1038D9.40406@fosstel.com>
	<20101221140031.5919.517938216.divmod.xquotient.184@localhost.localdomain>
	<4D10BB00.7090503@fosstel.com>
	<20101221155946.5919.440441679.divmod.xquotient.187@localhost.localdomain>
	<4D10D91F.80507@fosstel.com>
	<20101221174713.5919.1700330039.divmod.xquotient.191@localhost.localdomain>
	<4D10F9CB.5030502@fosstel.com>
	<20101221192420.5919.613974464.divmod.xquotient.214@localhost.localdomain>
	<290C6FDD-E5C8-4644-8CAE-A672C59D3207@twistedmatrix.com>
	<20101223162219.5919.1951931351.divmod.xquotient.253@localhost.localdomain>
Message-ID: <12CB770E-8539-4FAF-ABB6-798F362E9EA6@twistedmatrix.com>

Cross-posting to Twisted core list because this is starting to get into general non-web stuff.  Future replies about this fork of the thread should go there.

On Dec 23, 2010, at 11:22 AM, exarkun at twistedmatrix.com wrote:

> On 22 Dec, 06:51 am, glyph at twistedmatrix.com wrote:
>> 
>> On Dec 21, 2010, at 2:24 PM, exarkun at twistedmatrix.com wrote:
>>> Instead, you have to go all the way to producers/consumers, and only 
>>> write more data to the transport buffer when it has finished dealing 
>>> with what you previously gave it.
>> 
>> While everybody should of course use producers and consumers, I feel 
>> like there should be a twisted core ticket for this behavior of 
>> transport buffering, and a twisted web ticket for this behavior of the 
>> request buffering.  The naive implementation _could_ be much cheaper 
>> memory-wise; at the very least, twisted.web.static.Data ought to do the 
>> smart thing.
> 
> Fixing Data sounds like a good idea.  I don't know what improvement to 
> the transport buffering you're thinking of, though.  It doesn't seem 
> like there is an obvious, generally correct fix.

Right now, FileDescriptor.write appends its input data directly to _tempDataBuffer.  So far, so good: no string mangling.

So let's say we do fd.write(header); fd.write(veryBigBody).

Then we start writing.

FileDescriptor.doWrite comes along and notices that the dataBuffer is empty.  The first thing it does in this case: ''.join(_tempDataBuffer); which copies the entire veryBigBody.

FileDescriptor is kinda sorta trying to avoid this problem by maintaining an 'offset' so it doesn't need to re-copy dataBuffer; it could use a similar tactic and do write()s out of individual chunks which are greater than SEND_LIMIT directly, rather than coalescing them together.

Or maybe we could wrap writev() instead of copying stuff at all?




From glyph at twistedmatrix.com  Fri Dec 24 16:13:36 2010
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 24 Dec 2010 18:13:36 -0500
Subject: [Twisted-Python] [Twisted-web] render_GET and memory consumption
In-Reply-To: <4CCBC416-3823-446B-9494-A2253FD4D642@fuhm.net>
References: <4D1038D9.40406@fosstel.com>
	<20101221140031.5919.517938216.divmod.xquotient.184@localhost.localdomain>
	<4D10BB00.7090503@fosstel.com>
	<20101221155946.5919.440441679.divmod.xquotient.187@localhost.localdomain>
	<4D10D91F.80507@fosstel.com>
	<20101221174713.5919.1700330039.divmod.xquotient.191@localhost.localdomain>
	<4D10F9CB.5030502@fosstel.com>
	<20101221192420.5919.613974464.divmod.xquotient.214@localhost.localdomain>
	<290C6FDD-E5C8-4644-8CAE-A672C59D3207@twistedmatrix.com>
	<20101223162219.5919.1951931351.divmod.xquotient.253@localhost.localdomain>
	<12CB770E-8539-4FAF-ABB6-798F362E9EA6@twistedmatrix.com>
	<4CCBC416-3823-446B-9494-A2253FD4D642@fuhm.net>
Message-ID: <4B63AAE3-D38D-4EC7-9661-FB8E410CA2C3@twistedmatrix.com>


On Dec 24, 2010, at 11:47 AM, James Y Knight wrote:

> On Dec 24, 2010, at 1:13 AM, Glyph Lefkowitz wrote:
>> Or maybe we could wrap writev() instead of copying stuff at all?
> 
> What an awesome idea!
> 
> http://twistedmatrix.com/trac/changeset/15847/branches/--omg-optimized-2#file0

Doesn't look like that branch has gotten some love in quite a while :).

Are each of the features there (crecv, iovec, cdefer) represented by a different ticket already?




From exarkun at twistedmatrix.com  Sat Dec 25 22:05:18 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 26 Dec 2010 05:05:18 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1293339918.51.915434618@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101226/7bcf3ee6/attachment-0001.html>

From santoso.wijaya at gmail.com  Mon Dec 27 12:23:14 2010
From: santoso.wijaya at gmail.com (Santoso Wijaya)
Date: Mon, 27 Dec 2010 11:23:14 -0800
Subject: [Twisted-Python] `easy_install Twisted` fails on Python for
 Windows 2.7 AMD64
In-Reply-To: <AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
	<20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
	<AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>
Message-ID: <AANLkTi=NdxkV59QOOFYJ67RROviD4pOr0EmEEFCugEsA@mail.gmail.com>

Bump.

~/santa


On Thu, Dec 16, 2010 at 11:06 AM, Santoso Wijaya
<santoso.wijaya at gmail.com>wrote:

> I tried the exe installer, but with only Python 2.7 AMD64 installed on my
> system, the installer could not locate it, unfortunately.
>
>     "Python version 2.7 required, which was not found in the registry."
>
> HKLM\SOFTWARE\Python\PythonCore\2.7 exists but
> HKLM\SOFTWARE\Wow6432Node\Python\PythonCore\2.7 does not, obviously, which
> is what I assume the installer looks at.
>
> ~/santa
>
>
>
> On Sun, Dec 12, 2010 at 5:47 PM, <exarkun at twistedmatrix.com> wrote:
>
>> On 12:37 am, santoso.wijaya at gmail.com wrote:
>> >Is there something crucial that I am missing?
>>
>> I recommend
>> <
>> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.msi
>> >
>> or
>> <
>> http://tmrc.mit.edu/mirror/twisted/Twisted/10.2/Twisted-10.2.0.winxp32-py2.7.exe
>> >.
>>
>> Jean-Paul
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101227/9a2c4d85/attachment-0001.html>

From exarkun at twistedmatrix.com  Mon Dec 27 12:55:59 2010
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 27 Dec 2010 19:55:59 -0000
Subject: [Twisted-Python] `easy_install Twisted` fails on Python
	for	Windows 2.7 AMD64
In-Reply-To: <AANLkTi=NdxkV59QOOFYJ67RROviD4pOr0EmEEFCugEsA@mail.gmail.com>
References: <AANLkTim5be0CyPGNvg9wNYC0kpZgmxen8HuW6nyDZR6J@mail.gmail.com>
	<20101213014711.2058.1412315905.divmod.xquotient.73@localhost.localdomain>
	<AANLkTim0-LpmFBtWYt8OmcKurXfspWYy=05Yr77mPbzg@mail.gmail.com>
	<AANLkTi=NdxkV59QOOFYJ67RROviD4pOr0EmEEFCugEsA@mail.gmail.com>
Message-ID: <20101227195559.5919.1581091167.divmod.xquotient.370@localhost.localdomain>

On 07:23 pm, santoso.wijaya at gmail.com wrote:
>Bump.
>
>~/santa
>
>
>On Thu, Dec 16, 2010 at 11:06 AM, Santoso Wijaya
><santoso.wijaya at gmail.com>wrote:
>>I tried the exe installer, but with only Python 2.7 AMD64 installed on 
>>my
>>system, the installer could not locate it, unfortunately.
>>
>>     "Python version 2.7 required, which was not found in the 
>>registry."
>>
>>HKLM\SOFTWARE\Python\PythonCore\2.7 exists but
>>HKLM\SOFTWARE\Wow6432Node\Python\PythonCore\2.7 does not, obviously, 
>>which
>>is what I assume the installer looks at.

How about <http://www.lfd.uci.edu/~gohlke/pythonlibs/>?

Jean-Paul



From godson.g at gmail.com  Tue Dec 28 00:25:23 2010
From: godson.g at gmail.com (Godson Gera)
Date: Tue, 28 Dec 2010 12:55:23 +0530
Subject: [Twisted-Python] =?windows-1252?q?ANN_=3A_PySWITCH_Release_=96_0?=
	=?windows-1252?q?=2E1alpha?=
In-Reply-To: <AANLkTi=FDcobUchZZsq8uWzfSe99MgTHW5FvZV=d2kzM@mail.gmail.com>
References: <AANLkTi=FDcobUchZZsq8uWzfSe99MgTHW5FvZV=d2kzM@mail.gmail.com>
Message-ID: <AANLkTi=7RBfD1QUgmLGOdW42ShHP77tf1PGSMzMwmU==@mail.gmail.com>

Hi All,

I am glad to announce the first alpha release of PySWITCH.

http://pyswitch.sf.net


The idea of PySWITCH is to offer a complete library to Python and Twisted
programmers for interacting with FreeSWITCH using EventSocket interface. The
target is to cover all FreeSWITCH API commands and Dialplan tools. PySWITCH
handles all the low level details in executing FreeSWITCH commands, so the
programmer can easily concentrate on quickly building FreeSWITCH
applications. As an example, the API functions offered by PySWITCH often
executes many FreeSWITCH commands under the hood and finally returns the
desired result. Suppose you execute a background job, PySWITCH API will
automatically wait and catch the backgroundjob event parse the result and
will fire the deferred.

The current release covers good amount of API commands and a few Dialplan
tools. The protocol communication issues are ironed out. It has a nice event
call back interface. I’ll present its usage in couple of tutorials soon.


-- 
Thanks & Regards,
Godson Gera
http://godson.in
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20101228/d2f2bb2b/attachment.html>

From devnetwork at gmail.com  Fri Dec 31 05:35:31 2010
From: devnetwork at gmail.com (Umut Aydin)
Date: Fri, 31 Dec 2010 14:35:31 +0200
Subject: [Twisted-Python] job server project
Message-ID: <AANLkTi=334Lsj8_zWBEpdj48xTnLiz=-zCV-M7PHO1N+@mail.gmail.com>

Hello everybody

I just completed an article about writing a job server with Twisted
Framework. It's also based on my job server project called Jobbar.

http://umut.mobi/blog/2010/12/31/jobbar-distributed-job-server/

I'm still working on it.

Happy new year.

- Umut



From lvh at laurensvh.be  Fri Dec 31 18:13:06 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 1 Jan 2011 02:13:06 +0100
Subject: [Twisted-Python] twcgi duplicate Content-Type
Message-ID: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>

Hi!


I'm using twcgi to serve a Fossil repository through CGI (it's that or
xinetd). For some reason, Chrome wasn't rendering the CSS. Looking at
the HTTP response headers for the GET request for the CSS file, I saw
this:

HTTP/1.1 200 OK
Date: Sat, 01 Jan 2011 00:14:58 GMT
Content-Length: 13484
Expires: Sat, 8 Jan 2011 00:14:58 GMT
Content-Type: text/html
Content-Type: text/css; charset=utf-8
Server: TwistedWeb/10.2.0

I'm pretty sure duplicate Content-Type headers aren't supposed to happen.

After some digging, I'm convinced the Server, Date and the first
Content-Type are the default values set in t.w.server [1]. Meanwhile,
twcgi [2] users self.request.responseHeaders.addRawHeader, so the
default header is never overwritten.

I'm pretty sure that's not supposed to happen, but I'm not sure what
the correct way to fix this is. Options:

1) Should a list of things that need setRawHeader be introduced?
2) Should setRawHeader be the default, and instead have a list of
things that need addRawHeader?
3) Should that twcgi code use request.setHeader instead, like the
t.w.server code?

I have a feeling it's the last option. but like I said, I'm not sure.

[1] http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/web/server.py#L118
[2] http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/web/twcgi.py#L308


cheers and happy new year,
lvh



From lvh at laurensvh.be  Fri Dec 31 19:33:07 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 1 Jan 2011 03:33:07 +0100
Subject: [Twisted-Python] twcgi duplicate Content-Type
In-Reply-To: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
References: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
Message-ID: <AANLkTi=9+hkywrY-GryyhGY5s7Hr17PZME=O5B8VyXQp@mail.gmail.com>

Aha!

For posterity, this is a known bug: http://twistedmatrix.com/trac/ticket/4742

Fixed in trunk but not yet released.


cheers
lvh



From lvh at laurensvh.be  Fri Dec 31 19:59:08 2010
From: lvh at laurensvh.be (Laurens Van Houtven)
Date: Sat, 1 Jan 2011 03:59:08 +0100
Subject: [Twisted-Python] twcgi duplicate Content-Type
In-Reply-To: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
References: <AANLkTim_hk-eqjbK90U9fzUuV-UvyO61gDdUzHa0TbRa@mail.gmail.com>
Message-ID: <AANLkTikRM8YhCjkJyOt+qmR72QNk3Qp=zh75Kg06_2bi@mail.gmail.com>

Apparently I was mistaken. That patch is already in the release I'm
running -- this is what *broke* it, apparently. The first ticket fixed
a bug, but introduced a new one. I made a ticket:
http://twistedmatrix.com/trac/ticket/4786

cheers
lvh



