<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] GitHub Actions parallelism limit increase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20GitHub%20Actions%20parallelism%20limit%20increase&In-Reply-To=%3C97d4d10e3ae06ba7daa2f501dc112d1e%40fstab.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065578.html">
   <LINK REL="Next"  HREF="065585.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] GitHub Actions parallelism limit increase</H1>
    <B>Kyle Altendorf</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20GitHub%20Actions%20parallelism%20limit%20increase&In-Reply-To=%3C97d4d10e3ae06ba7daa2f501dc112d1e%40fstab.net%3E"
       TITLE="[Twisted-Python] GitHub Actions parallelism limit increase">sda at fstab.net
       </A><BR>
    <I>Tue Apr  6 12:58:35 MDT 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065578.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
        <LI>Next message (by thread): <A HREF="065585.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65582">[ date ]</a>
              <a href="thread.html#65582">[ thread ]</a>
              <a href="subject.html#65582">[ subject ]</a>
              <a href="author.html#65582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2021-04-01 09:36, Adi Roiban wrote:

&gt;<i> For example, I don't understand why you need to create an sdist and 
</I>&gt;<i> from sdist to create a wheel and then install that wheel inside tox for 
</I>&gt;<i> each tox test environment.
</I>&gt;<i> 
</I>&gt;<i> Why not create the wheel once and install the same wheel in all 
</I>&gt;<i> environments.
</I>
Are you referring to the use of tox-wheel?  Note that the workflow I 
setup in towncrier has a single build job that creates an sdist and from 
that a wheel one time, uploads those as artifacts in the workflow, and 
then every other test job and the publish job use those exact 
pre-created files.  So, I think we agree here.

I'll let Grainger weigh in on their present take on tox-wheel if they 
want.

&gt;&gt;&gt;<i> There is an extra 1 minute required for each job to generate the
</I>&gt;&gt;&gt;<i> coverage XML file. We can download all the coverage artifacts and
</I>&gt;&gt;&gt;<i> generate the XML only once.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I did coverage collection from all jobs for pymodbus.  Looks like I
</I>&gt;&gt;<i> still had the XML report generating in each job, but that could
</I>&gt;&gt;<i> presumably be shifted.  Anyways, I'm sure several of us could do this
</I>&gt;&gt;<i> off the top of our heads but in case it is of any interest here's what 
</I>&gt;&gt;<i> I
</I>&gt;&gt;<i> did.  Or maybe you just point out something silly I did there and 
</I>&gt;&gt;<i> should
</I>&gt;&gt;<i> learn from.  :]
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://github.com/riptideio/pymodbus/pull/592/files">https://github.com/riptideio/pymodbus/pull/592/files</A>
</I>&gt;<i> 
</I>&gt;<i> That is one big matrix :) ... I don't understand why you need test and 
</I>&gt;<i> check and coverage, each with a separate matrix.
</I>
I don't think it really is as big as you think.  The test and coverage 
matrix are separated (and the coverage matrix is kind of not a matrix, 
what with one job) because that's the level at which GitHub allows you 
to describe dependencies.  If you want to collect the coverage during 
test runs and then combine all the results together before uploading to 
codecov etc a single time, I think this is just a mandatory structure.  
The coverage job must be separated so it can depend on the test matrix.  
Having checks be a separate matrix is kind of neither here nor there on 
this topic, I think.  And the All job is compensation for a missing 
GitHub Actions feature.

&gt;<i> I am thinking of something like this:
</I>&gt;<i> 
</I>&gt;<i> * A matrix to run jobs with coverage on each environment (os + py 
</I>&gt;<i> combination + extra stuff noipv6, nodeps, etc)
</I>&gt;<i> * Each job from the matrix will run an initial combine to combine 
</I>&gt;<i> sub-process coverage
</I>&gt;<i> * Each job will upload once python coverage raw file.
</I>&gt;<i> * A single job will  download those coverage file, combine them once 
</I>&gt;<i> again to generate an XML file to be pushed to codecov.io
</I>
Sounds good.  Sounds like exactly what I suggested.  :]  Except for 
maybe misunderstanding about what level of separation is needed for the 
interjob dependencies.

Hopefully this clarifies a bit.  I think we actually intend the same 
thing.  Unless I've missed something else?

Cheers,
-kyle

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065578.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
	<LI>Next message (by thread): <A HREF="065585.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65582">[ date ]</a>
              <a href="thread.html#65582">[ thread ]</a>
              <a href="subject.html#65582">[ subject ]</a>
              <a href="author.html#65582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
