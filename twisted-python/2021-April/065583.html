<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IDNA problem in twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IDNA%20problem%20in%20twisted&In-Reply-To=%3C1856876.PYKUYFuaPT%40fpbarry%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065580.html">
   <LINK REL="Next"  HREF="065594.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IDNA problem in twisted</H1>
    <B>Barry Scott</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IDNA%20problem%20in%20twisted&In-Reply-To=%3C1856876.PYKUYFuaPT%40fpbarry%3E"
       TITLE="[Twisted-Python] IDNA problem in twisted">barry.scott at forcepoint.com
       </A><BR>
    <I>Thu Apr  8 09:43:35 MDT 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065580.html">[Twisted-Python] towncrier releases 19.9.0 and 21.3.0rc1
</A></li>
        <LI>Next message (by thread): <A HREF="065594.html">[Twisted-Python] IDNA problem in twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65583">[ date ]</a>
              <a href="thread.html#65583">[ thread ]</a>
              <a href="subject.html#65583">[ subject ]</a>
              <a href="author.html#65583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We just added a patch to our twisted to prevent twisted from doing idna validation.
_idnaBytes and _idnaText not convert from bytes to unicode based on the type of
the provided arg.

We had to do this because there are domain names that youtube.com uses that are
not valid under IDNA-2008 <A HREF="https://tools.ietf.org/html/rfc5891#section-4.2.3.1">https://tools.ietf.org/html/rfc5891#section-4.2.3.1</A>

For example this URL: <A HREF="https://r2---sn-aigzrn7e.googlevideo.com/generate_204">https://r2---sn-aigzrn7e.googlevideo.com/generate_204</A>
Firefox is happy to visit this URL and does not change it when its enter
in the address bar.

The comment in the _idna.py code that say this:

&quot;Convert some text typed by a human into some ASCII bytes.&quot; and
&quot;Convert some IDNA-encoded octets into some human-readable text&quot;

The key idea here is that its human input that will be converted.
But the code is used deep in the _sslverify.py where no human
input is entered.

I can see why a UI would need to do IDNA-2008 converts and validation
but I'm not clear why its of value deep in the guts of twisted.

Why is this code needed at all in twisted?
If its for a high level API then why isn't it being called at the
edge of the high level API calls?

Barry



</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065580.html">[Twisted-Python] towncrier releases 19.9.0 and 21.3.0rc1
</A></li>
	<LI>Next message (by thread): <A HREF="065594.html">[Twisted-Python] IDNA problem in twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65583">[ date ]</a>
              <a href="thread.html#65583">[ thread ]</a>
              <a href="subject.html#65583">[ subject ]</a>
              <a href="author.html#65583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
