<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] GitHub Actions parallelism limit increase
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20GitHub%20Actions%20parallelism%20limit%20increase&In-Reply-To=%3CCAFycZ9eiTjSHf6TiQYQyE5qn3nVTcDS9gg2%2BP2gKyfqqij%3DTAA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065582.html">
   <LINK REL="Next"  HREF="065581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] GitHub Actions parallelism limit increase</H1>
    <B>Adi Roiban</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20GitHub%20Actions%20parallelism%20limit%20increase&In-Reply-To=%3CCAFycZ9eiTjSHf6TiQYQyE5qn3nVTcDS9gg2%2BP2gKyfqqij%3DTAA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] GitHub Actions parallelism limit increase">adi at roiban.ro
       </A><BR>
    <I>Sat Apr 10 03:59:35 MDT 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065582.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
        <LI>Next message (by thread): <A HREF="065581.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65585">[ date ]</a>
              <a href="thread.html#65585">[ thread ]</a>
              <a href="subject.html#65585">[ subject ]</a>
              <a href="author.html#65585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 6 Apr 2021 at 19:58, Kyle Altendorf &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sda at fstab.net</A>&gt; wrote:

&gt;<i> On 2021-04-01 09:36, Adi Roiban wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>Thanks Kyle for the GitHub communication.

I have checked Twisted billing and we have GitHub Teams enabled.
So yes, 60x concurrent jobs on GitHub own VMs.

GitHub billing now shows $124.00 / month to cover our Team plan but we
don't have to pay.

For reference Twisted has 41 members [0]

Upgrading to enterprise will be  $903.00 / month :)

----------

We now use 13x jobs for a build - 10 - python + 3 lint/mypy/docs.
Python jobs now take a maximum of 8 minutes (on 2xCPU VMs with 4 parallel
jobs) [1] ... from the previous 30+ minutes

In the last month there were about 250 jobs so about 8 per day.

So I think that we are ok for now.

----------

We have 12 extra jobs on Azure.

I think that as an experiment we can move 1 Windows and 1 macOS job from
Azure to GitHub Actions.

I would still keep Azure pipelines jobs to use those extra VMs that are
available.
Azure allows retrying a single job on failure , or all failed jobs. This is
a bit nicery for flaky tests.
In GitHub, you have to re-run the whole workflow.

-----

We can get more jobs by hosting our own runners... but that is a different
story.

[snip]

Sounds good.  Sounds like exactly what I suggested.  :]  Except for
&gt;<i> maybe misunderstanding about what level of separation is needed for the
</I>&gt;<i> interjob dependencies.
</I>&gt;<i>
</I>&gt;<i> Hopefully this clarifies a bit.  I think we actually intend the same
</I>&gt;<i> thing.  Unless I've missed something else?
</I>&gt;<i>
</I>
I guess that is best to discuss directly on the change made for a PR and
see how the final matrix will look.

Top priority for me is enabling trial parallel runs on Windows (PR waiting
for review) to use the extra CPU available on the VM.
Next is enabling some kind of PR triage helper.

[0] <A HREF="https://github.com/orgs/twisted/people">https://github.com/orgs/twisted/people</A>
[1] <A HREF="https://github.com/twisted/twisted/actions/runs/735543893">https://github.com/twisted/twisted/actions/runs/735543893</A>
[2]
<A HREF="https://dev.azure.com/twistedmatrix/twisted/_build/results?buildId=3717&amp;view=results">https://dev.azure.com/twistedmatrix/twisted/_build/results?buildId=3717&amp;view=results</A>
-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20210410/a5d5c43d/attachment.htm&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065582.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
	<LI>Next message (by thread): <A HREF="065581.html">[Twisted-Python] GitHub Actions parallelism limit increase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65585">[ date ]</a>
              <a href="thread.html#65585">[ thread ]</a>
              <a href="subject.html#65585">[ subject ]</a>
              <a href="author.html#65585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
