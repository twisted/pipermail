From kevin.horn at gmail.com  Thu Nov  1 11:56:17 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 1 Nov 2012 10:56:17 -0500
Subject: [Twisted-Python] Create client in Server factory
In-Reply-To: <509192D9.4040408@imperial.ac.uk>
References: <201210311614.34673.gregoire.leroy@retenodus.net>
	<5090F42D.4050303@imperial.ac.uk>
	<CA+U=zK0YZ-CPmiJKPnH9YTes5BBuNt3AZCXm8h37xON=7yLyfA@mail.gmail.com>
	<509192D9.4040408@imperial.ac.uk>
Message-ID: <CA+U=zK1QGE22A0AD0Sr95ATdTC6pO7orWouzPK1t311OR-qkrw@mail.gmail.com>

On Wed, Oct 31, 2012 at 4:06 PM, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
> On 10/31/2012 02:31 PM, Kevin Horn wrote:
>
>> See also:
>> http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother
>>
>> That example only uses a single connection in place of your clients
>> A/B/C, but should be adaptable to your situation.
>>
>
> In fairness to the OP, he did say he'd seen that ;o)
>

Ah, so he did, Phil.  Sorry, Gregoire.

--
Kevin Horn


From exarkun at twistedmatrix.com  Thu Nov  1 18:03:31 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 01 Nov 2012 22:03:31 -0000
Subject: [Twisted-Python] deferToThread and reactor loop
In-Reply-To: <634914A010D0B943A035D226786325D433914E92BA@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D433914E92BA@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <20121101220331.4363.1308097384.divmod.xquotient.93@localhost6.localdomain6>

On 29 Oct, 05:58 pm, tobias.oberstein at tavendo.de wrote:
>Hi,
>
>I've got a question regarding
>
>deferToThread / runWithConnection
>
>I have a network server that accepts RPCs and forwards those to a 
>relational database calling stored procedures.
>
>The call of the stored procedures is happening via "runWithConnection" 
>.. that is on a background thread pool (since that DBs driver is 
>blocking).
>
>Now, when there is a large number of RPCs coming in roughly at once, 
>the latency of each call forwarded to the RDBMs increased into the 10's 
>of ms.
>
>I have created a self-contained test program without DB etc that I 
>think reproduces the "issue":
>
>https://github.com/oberstet/scratchbox/blob/master/python/twisted/threadpoollatency/test.py
>
>**************
>Am I correct that "deferToThread" does not immediately forward the call 
>to a background thread, but only the next time the reactor loop runs?
>**************

Hi Tobias,

Sorry, I haven't had a chance to read your minimal example in any 
detail.  However, I can direct you to the implementation of 
deferToThread:

http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L119

Notice the `self.q.put(o)`.  This matches up with the call to 
`self.q.get` in the same module:

http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L158

Together, these bits of source should demonstrate that there's no 
waiting for a reactor iteration before the work is enqueued.  The work 
goes into the Queue instance, and instantly any worker thread is free to 
grab it.

Jean-Paul


From poalman at gmail.com  Fri Nov  2 11:42:31 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 2 Nov 2012 15:42:31 +0000
Subject: [Twisted-Python] twisted thumbnail server
Message-ID: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>

I hope this will be an easy question for some of you guys :)

I'm trying to set up a simple server which will accept requests over GET to
create a thumbnail for an image, and server it back as the response.

The images are stored in two S3 buckets, the originals are in one bucket
(store), and the generated thumbnails are stored in another (thumb) as a
cache so that the work doesn't need to be repeated.

Currently I'm checking if the thumbnail already exists in the thumb bucket.
I'm redirecting the request if it is or if not I'm downloading the image
from store, generating the thumb using PIL, uploading the thumbnail to the
thumb bucket and then redirecting the request.

I'm very new to twisted and was wondering if anyone who is more experienced
would be able to take a look at what I have so far and let me know if
anything is wrong/not ideal/will cause problems etc. or just general style
pointers? The more critical the better, as I said I'm very new to this.

I've just chucked it up on github:
https://github.com/GP89/thumbs/blob/master/thumb.py

There's a definite memory leak right now which I believe is PIL, or
possibly StringIO objects not being disposed, hence all the random del
statements trying to cure it (unsuccessfully). Maybe there's something I'm
doing wrong in twisted that is causing things not to be cleaned up that I'm
not aware of as well.

I did try to use deferToThread, rather than my thread pool but the server
seemed to block up- I probably should have left it incase it was because I
was doing something obviously wrong. I think I'll make a branch quickly
with my deferToThread version.

Thanks very much for any time you can lend!

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121102/e8fa5d36/attachment.htm 

From _ at lvh.cc  Fri Nov  2 11:57:42 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 2 Nov 2012 16:57:42 +0100
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
Message-ID: <CAE_Hg6ZPU1cFYT0CXvXuktN64Y05hegzs-ShZFgCSsV5n+dSsA@mail.gmail.com>

Yeah, very big +1 to showing the deferToThread version. I feel bad even
trying to spot potential threading issues here... It could be because the
default thread pool isn't very large, but you're making many requests.

What functionality does boto have that txaws doesn't that you really need
here? Perhaps you can avoid blocking (and hence threads) at all.


On Fri, Nov 2, 2012 at 4:42 PM, Paul Wiseman <poalman at gmail.com> wrote:

> I hope this will be an easy question for some of you guys :)
>
> I'm trying to set up a simple server which will accept requests over GET
> to create a thumbnail for an image, and server it back as the response.
>
> The images are stored in two S3 buckets, the originals are in one bucket
> (store), and the generated thumbnails are stored in another (thumb) as a
> cache so that the work doesn't need to be repeated.
>
> Currently I'm checking if the thumbnail already exists in the thumb
> bucket. I'm redirecting the request if it is or if not I'm downloading the
> image from store, generating the thumb using PIL, uploading the thumbnail
> to the thumb bucket and then redirecting the request.
>
> I'm very new to twisted and was wondering if anyone who is more
> experienced would be able to take a look at what I have so far and let me
> know if anything is wrong/not ideal/will cause problems etc. or just
> general style pointers? The more critical the better, as I said I'm very
> new to this.
>
> I've just chucked it up on github:
> https://github.com/GP89/thumbs/blob/master/thumb.py
>
> There's a definite memory leak right now which I believe is PIL, or
> possibly StringIO objects not being disposed, hence all the random del
> statements trying to cure it (unsuccessfully). Maybe there's something I'm
> doing wrong in twisted that is causing things not to be cleaned up that I'm
> not aware of as well.
>
> I did try to use deferToThread, rather than my thread pool but the server
> seemed to block up- I probably should have left it incase it was because I
> was doing something obviously wrong. I think I'll make a branch quickly
> with my deferToThread version.
>
> Thanks very much for any time you can lend!
>
> Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121102/d9cb74f8/attachment.htm 

From p.mayers at imperial.ac.uk  Fri Nov  2 12:13:37 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Fri, 02 Nov 2012 16:13:37 +0000
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
Message-ID: <5093F131.8070000@imperial.ac.uk>

On 02/11/12 15:42, Paul Wiseman wrote:
> I hope this will be an easy question for some of you guys :)
>
> I'm trying to set up a simple server which will accept requests over GET
> to create a thumbnail for an image, and server it back as the response.
>
> The images are stored in two S3 buckets, the originals are in one bucket
> (store), and the generated thumbnails are stored in another (thumb) as a
> cache so that the work doesn't need to be repeated.
>
> Currently I'm checking if the thumbnail already exists in the thumb
> bucket. I'm redirecting the request if it is or if not I'm downloading
> the image from store, generating the thumb using PIL, uploading the
> thumbnail to the thumb bucket and then redirecting the request.

This isn't a criticism, but I trust you are aware of the implications 
and problems of doing work in threads?

FWIW we usually use a child process pool for intensive tasks; this has 
the advantage you can sensibly kill a long-lived child (just kill the 
process) and you side-step the lack of concurrency in the python 
interpreter.

[In this case, I'd just start up a bunch of python interpreters using a 
ProcessProtocol and use a simple request/response command protocol on 
stdin/stdout - the child interpreters can be non-Twisted processes able 
to block on PIL operations]

If you really do want threads, is there any reason to not use the 
Twisted threadpool stuff?

It's often a personal/style choice, but I don't use StringIO for large 
volumes of data personally (not Twisted-specific).

I'm sure someone will mention tests ;o)


From tobias.oberstein at tavendo.de  Fri Nov  2 12:15:33 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Fri, 2 Nov 2012 09:15:33 -0700
Subject: [Twisted-Python] deferToThread and reactor loop
In-Reply-To: <20121101220331.4363.1308097384.divmod.xquotient.93@localhost6.localdomain6>
References: <634914A010D0B943A035D226786325D433914E92BA@EXVMBX020-12.exch020.serverdata.net>
	<20121101220331.4363.1308097384.divmod.xquotient.93@localhost6.localdomain6>
Message-ID: <634914A010D0B943A035D226786325D4339248F7EE@EXVMBX020-12.exch020.serverdata.net>

Hi Jean-Paul,

> >**************
> >Am I correct that "deferToThread" does not immediately forward the call
> >to a background thread, but only the next time the reactor loop runs?
> >**************

> However, I can direct you to the implementation of
> deferToThread:
> 
> http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L1
> 19
> 
> Notice the `self.q.put(o)`.  This matches up with the call to `self.q.get` in the
> same module:
> 
> http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L1
> 58
> 
> Together, these bits of source should demonstrate that there's no waiting for a
> reactor iteration before the work is enqueued.  The work goes into the Queue
> instance, and instantly any worker thread is free to grab it.

Ok, I see.

There might be a mutex or something in the Queue implementation (if it's not
a lockless queue implementation) or the GIL might be involved.

I have no convinving explanation for the behavior I see (which also seems to be
platform agnostic).

Another wild guess (besides above) I have: maybe the OS does not immediately
schedule other process threads for execution if the current thread (the one
pushing to the Queue) is very busy ..

Thanks,
Tobias



From poalman at gmail.com  Fri Nov  2 12:32:42 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 2 Nov 2012 16:32:42 +0000
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <CAE_Hg6ZPU1cFYT0CXvXuktN64Y05hegzs-ShZFgCSsV5n+dSsA@mail.gmail.com>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
	<CAE_Hg6ZPU1cFYT0CXvXuktN64Y05hegzs-ShZFgCSsV5n+dSsA@mail.gmail.com>
Message-ID: <CACgdh2jqt_4xv25P4QTBX6341mC5Dm-tdRE=YjrL8LQ5vL7WKQ@mail.gmail.com>

On 2 November 2012 15:57, Laurens Van Houtven <_ at lvh.cc> wrote:

> Yeah, very big +1 to showing the deferToThread version. I feel bad even
> trying to spot potential threading issues here... It could be because the
> default thread pool isn't very large, but you're making many requests.
>
> What functionality does boto have that txaws doesn't that you really need
> here? Perhaps you can avoid blocking (and hence threads) at all.
>
>
This is the deferToThread version:
https://github.com/GP89/thumbs/blob/defertothread/thumb.py

The thread pool size was 60, pretty arbitrary but (ignoring the memory
leaks) it should only have at most n images in memory at once where n is
the number of threads. If there's more requests that it can process they'll
just build up in the queue and not cause memory to fill up with downloaded
images (this was an initial problem I had).

My understanding is that txaws would only work in a twisted way, but as the
work in the thread has blocking code (the PIL bits) I just used boto as I'm
more familiar with it. I'm not sure how I'd use txaws in a thread or what
benefit that would have?

I'd love to avoid blocking and keep it all in 1 thread, but I don't know of
anyway to do the image resizing/rotation etc. without blocking.


>
> On Fri, Nov 2, 2012 at 4:42 PM, Paul Wiseman <poalman at gmail.com> wrote:
>
>> I hope this will be an easy question for some of you guys :)
>>
>> I'm trying to set up a simple server which will accept requests over GET
>> to create a thumbnail for an image, and server it back as the response.
>>
>> The images are stored in two S3 buckets, the originals are in one bucket
>> (store), and the generated thumbnails are stored in another (thumb) as a
>> cache so that the work doesn't need to be repeated.
>>
>> Currently I'm checking if the thumbnail already exists in the thumb
>> bucket. I'm redirecting the request if it is or if not I'm downloading the
>> image from store, generating the thumb using PIL, uploading the thumbnail
>> to the thumb bucket and then redirecting the request.
>>
>> I'm very new to twisted and was wondering if anyone who is more
>> experienced would be able to take a look at what I have so far and let me
>> know if anything is wrong/not ideal/will cause problems etc. or just
>> general style pointers? The more critical the better, as I said I'm very
>> new to this.
>>
>> I've just chucked it up on github:
>> https://github.com/GP89/thumbs/blob/master/thumb.py
>>
>> There's a definite memory leak right now which I believe is PIL, or
>> possibly StringIO objects not being disposed, hence all the random del
>> statements trying to cure it (unsuccessfully). Maybe there's something I'm
>> doing wrong in twisted that is causing things not to be cleaned up that I'm
>> not aware of as well.
>>
>> I did try to use deferToThread, rather than my thread pool but the server
>> seemed to block up- I probably should have left it incase it was because I
>> was doing something obviously wrong. I think I'll make a branch quickly
>> with my deferToThread version.
>>
>> Thanks very much for any time you can lend!
>>
>> Paul
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
> --
> cheers
> lvh
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121102/245957f1/attachment.htm 

From poalman at gmail.com  Fri Nov  2 12:50:03 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 2 Nov 2012 16:50:03 +0000
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <5093F131.8070000@imperial.ac.uk>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
	<5093F131.8070000@imperial.ac.uk>
Message-ID: <CACgdh2g_B1-b6Cz8dwgR1A8CUAHoSL14TJEX2vXTwTFuW8uRKA@mail.gmail.com>

On 2 November 2012 16:13, Phil Mayers <p.mayers at imperial.ac.uk> wrote:

> On 02/11/12 15:42, Paul Wiseman wrote:
> > I hope this will be an easy question for some of you guys :)
> >
> > I'm trying to set up a simple server which will accept requests over GET
> > to create a thumbnail for an image, and server it back as the response.
> >
> > The images are stored in two S3 buckets, the originals are in one bucket
> > (store), and the generated thumbnails are stored in another (thumb) as a
> > cache so that the work doesn't need to be repeated.
> >
> > Currently I'm checking if the thumbnail already exists in the thumb
> > bucket. I'm redirecting the request if it is or if not I'm downloading
> > the image from store, generating the thumb using PIL, uploading the
> > thumbnail to the thumb bucket and then redirecting the request.
>
> This isn't a criticism, but I trust you are aware of the implications
> and problems of doing work in threads?




I think so. I understand the whole idea of twisted is to schedule tasks in
an async way in a single main thread. I usually use quite a lot of threads
in my code and I'm just learning about this new async style of coding. I've
tried to avoid using threads as much as I can here but didn't think I could
get away from them based on the fact that PIL is blocking.


> FWIW we usually use a child process pool for intensive tasks; this has
> the advantage you can sensibly kill a long-lived child (just kill the
> process) and you side-step the lack of concurrency in the python
> interpreter.
>

> [In this case, I'd just start up a bunch of python interpreters using a
> ProcessProtocol and use a simple request/response command protocol on
> stdin/stdout - the child interpreters can be non-Twisted processes able
> to block on PIL operations]
>
>
I'd love to get this working using a processes pool rather than a thread
pool (I spent quite a lot of time trying to figure out how to do it in
twisted but haven't yet worked out how). As this server will be CPU bound
this will hopefully get more throughput and also side-step the memory leak
in PIL that I believe I'm seeing (although on second thought maybe not, the
over head of starting a new python interpreter each time wouldn't be
viable).

Are there any examples of how to use a process pool?


> If you really do want threads, is there any reason to not use the
> Twisted threadpool stuff?
>
>
I wasn't aware of a twisted thread pool, I think I've only come across
deferToThead, which I imagined was using a threadpool. (if so if there a
way to control the size?)


> It's often a personal/style choice, but I don't use StringIO for large
> volumes of data personally (not Twisted-specific).
>
>
I rarely use it either, but I needed a way to get the data into a file type
object for PIL without putting the data to disk. How would you recommend I
get the data between download / PIL / upload?


> I'm sure someone will mention tests ;o)


>

tests are something I've often, guiltily, neglected- maybe I should start
:) I wouldn't really know where to start writing tests for anything more
than trivial functions. I guess just have images and thumbnails that I know
are correct for that request, send them to the server and see if they
return a thumbnail that matches? something along those lines?


> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121102/5ade186a/attachment.htm 

From exarkun at twistedmatrix.com  Sun Nov  4 00:05:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 04 Nov 2012 04:05:25 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1352001925.94.521971289@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121104/00d214be/attachment.htm 

From peter.inglesby at gmail.com  Mon Nov  5 16:12:27 2012
From: peter.inglesby at gmail.com (Peter Inglesby)
Date: Mon, 5 Nov 2012 21:12:27 +0000
Subject: [Twisted-Python] Request for help: throttling serving of static
	content
Message-ID: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>

Tomorrow I'm giving a talk to provide an introduction to asynchronous
programming.  I'll be mentioning Twisted in passing, but the meat of the
talk will be about writing a web crawler for finding broken links, first
using single-threaded blocking code, then multi-threaded blocking code,
before demonstrating a non-blocking solution using a select loop.  I can
make the code and slides available if there's interest.

For this to be effective, I was planning on writing a very slow webserver
to serve static content locally.  I'd expected I'd be able to simply wrap
an instance of twisted.web.static.Site in a ThrottlingFactory, and serve
away:

import sys

from twisted.internet import reactor
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.protocols.policies import ThrottlingFactory
from twisted.web.server import Site
from twisted.web.static import File
from twisted.python import log

if __name__ == '__main__':
    log.startLogging(sys.stdout)
    resource = File(sys.argv[1])
    factory = Site(resource)
    endpoint = TCP4ServerEndpoint(reactor, 4321)
    endpoint.listen(ThrottlingFactory(factory, maxConnectionCount=3,
readLimit=20, writeLimit=20))
    reactor.run()



However, this fails with the following error because I've not registered a
producer with my ThrottlingProtocol:

2012-11-05 21:01:34+0000 [-] Throttling writes on
<twisted.protocols.policies.ThrottlingFactory instance at 0x1016497e8>
2012-11-05 21:01:34+0000 [-] Unhandled Error
 Traceback (most recent call last):
  File "slow_server.py", line 16, in <module>
    reactor.run()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/base.py",
line 1169, in run
    self.mainLoop()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/base.py",
line 1178, in mainLoop
    self.runUntilCurrent()
--- <exception caught here> ---
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/base.py",
line 800, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/protocols/policies.py",
line 290, in checkWriteBandwidth
    self.throttleWrites()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/protocols/policies.py",
line 324, in throttleWrites
    p.throttleWrites()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/protocols/policies.py",
line 221, in throttleWrites
    self.producer.pauseProducing()
exceptions.AttributeError: 'NoneType' object has no attribute
'pauseProducing'



I'm sure it's not impossible to figure out what I need to do here, but I'd
appreciate any pointers.

Many thanks in advance!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121105/d5e70c4b/attachment.htm 

From exarkun at twistedmatrix.com  Mon Nov  5 17:06:12 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 05 Nov 2012 22:06:12 -0000
Subject: [Twisted-Python] Request for help: throttling serving of static
 content
In-Reply-To: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
Message-ID: <20121105220612.15367.1957099079.divmod.xquotient.2@localhost6.localdomain6>

On 09:12 pm, peter.inglesby at gmail.com wrote:
>Tomorrow I'm giving a talk to provide an introduction to asynchronous
>programming.  I'll be mentioning Twisted in passing, but the meat of 
>the
>talk will be about writing a web crawler for finding broken links, 
>first
>using single-threaded blocking code, then multi-threaded blocking code,
>before demonstrating a non-blocking solution using a select loop.  I 
>can
>make the code and slides available if there's interest.
>
>For this to be effective, I was planning on writing a very slow 
>webserver
>to serve static content locally.  I'd expected I'd be able to simply 
>wrap
>an instance of twisted.web.static.Site in a ThrottlingFactory, and 
>serve
>away:
>
>[snip]
>
>
>
>However, this fails with the following error because I've not 
>registered a
>producer with my ThrottlingProtocol:

I don't think you're meant to need to register any producer.  The 
producer is supposed to register itself.  So this seems to be a bug in 
something.  If you can track it down any further and contribute a fix, 
that'd be wonderful.

Also related, though - http://twistedmatrix.com/trac/ticket/601 - so 
even if the producer were registered I don't know if you'd actually 
achieve the desired behavior.

Jean-Paul


From itamar at itamarst.org  Mon Nov  5 17:26:11 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 05 Nov 2012 17:26:11 -0500
Subject: [Twisted-Python] Request for help: throttling serving of static
 content
In-Reply-To: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
Message-ID: <50983D03.7050304@itamarst.org>

On 11/05/2012 04:12 PM, Peter Inglesby wrote:
> Tomorrow I'm giving a talk to provide an introduction to asynchronous 
> programming.  I'll be mentioning Twisted in passing, but the meat of 
> the talk will be about writing a web crawler for finding broken links, 
> first using single-threaded blocking code, then multi-threaded 
> blocking code, before demonstrating a non-blocking solution using a 
> select loop.  I can make the code and slides available if there's 
> interest.
>
> For this to be effective, I was planning on writing a very slow 
> webserver to serve static content locally.  I'd expected I'd be able 
> to simply wrap an instance of twisted.web.static.Site in a 
> ThrottlingFactory, and serve away:
>
There's also twisted.protocols.htb, although again it's old and possibly 
buggy and may not work. For demo purposes something like 
https://github.com/rflynn/dragnet might do.


From peter.inglesby at gmail.com  Mon Nov  5 19:50:53 2012
From: peter.inglesby at gmail.com (Peter Inglesby)
Date: Tue, 6 Nov 2012 00:50:53 +0000
Subject: [Twisted-Python] Request for help: throttling serving of static
	content
In-Reply-To: <50983D03.7050304@itamarst.org>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
	<50983D03.7050304@itamarst.org>
Message-ID: <CAENJrP=Fg9N=oQDzrsL-MOQGGpmE4tpFXb2GSEU_CJNYAZwL1w@mail.gmail.com>

Thanks for the responses.  I'll see what I can do about tracking down the
problem.

In the meantime, I'll give dragnet a look.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121106/bd5a451b/attachment.htm 

From p.mayers at imperial.ac.uk  Tue Nov  6 07:32:42 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 06 Nov 2012 12:32:42 +0000
Subject: [Twisted-Python] Request for help: throttling serving of static
 content
In-Reply-To: <50983D03.7050304@itamarst.org>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
	<50983D03.7050304@itamarst.org>
Message-ID: <5099036A.7030003@imperial.ac.uk>

On 05/11/12 22:26, Itamar Turner-Trauring wrote:

> There's also twisted.protocols.htb, although again it's old and possibly
> buggy and may not work. For demo purposes something like
> https://github.com/rflynn/dragnet might do.

If you're on Linux, "netem" is also an option.

http://www.linuxfoundation.org/collaborate/workgroups/networking/netem


From gregoire.leroy at retenodus.net  Tue Nov  6 07:50:19 2012
From: gregoire.leroy at retenodus.net (=?iso-8859-1?q?Gr=E9goire_Leroy?=)
Date: Tue, 6 Nov 2012 21:50:19 +0900
Subject: [Twisted-Python] Create client in Server factory
In-Reply-To: <5090F42D.4050303@imperial.ac.uk>
References: <201210311614.34673.gregoire.leroy@retenodus.net>
	<5090F42D.4050303@imperial.ac.uk>
Message-ID: <201211062150.19388.gregoire.leroy@retenodus.net>

Hi,

Thank you, I've choosen the second solution, it works perfectly :)

Regards,
Gr?goire Leroy

Le Wednesday 31 October 2012 18:49:33, Phil Mayers a ?crit :
> On 10/31/2012 07:14 AM, Gr?goire Leroy wrote:
> > Hi,
> > 
> > I have a server who receive data from clients A/B/C (remote machines). I
> > want to use a client D (on the same machine than the server) to send
> > this data to another server (remote).
> > 
> > The difficulty is, I want to use the same client D connection for any
> > client. I don't want open an new connection each time.
> > 
> > First thing I would think is to create the connection in my server
> > factory, and use client's methods in my server protocol, for example
> > with [...]
> > 
> > class LocalProxyFactory(Factory):
> >          def __init__(self):
> >                  f = LocalProxyClientFactory()
> >                  reactor.connectTCP("retenodus.net", 4242, f)
> >                  reactor.run()
> 
> The "reactor.run" is just wrong - remove it.
> 
> You need to connect to a server, and share this connection amongst some
> protocols. But you can't control the order in which these connections
> complete, so A/B/C might connect before D is ready.
> 
> You've really got two choices - accept the connections from A/B/C but
> have your server protocol "wait" until D is ready - something like this:
> 
> from twisted.internet.protocol import ClientCreator
> 
> class Server(...):
>    def connectionMade(self):
>      if self.factory.connD is None:
>        self.factory.waitFor(self._ready)
>        self.transport.pauseProducing()
> 
>    def _ready(self):
>      self.transport.resumeProducing()
> 
> d_connect = ClientCreator(reactor, DProtocol)
> 
> class ServerFactory(...):
>    def __init__(self):
>      self.connD = None
>      self._wait = []
>      d_connect.connectTCP(Dhost, port).addCallback(self.dReady)
> 
>    def waitFor(self, _cb):
>      if self.connD:
>        _cb(self.connD)
>      else:
>        d = defer.Deferred()
>        d.addCallback(_cb)
>        self._wait.append(d)
> 
>    def dReady(self, proto):
>      self.connD = proto
>      cb = self._wait
>      self._wait = []
>      for c in cb:
>        c.callback(proto)
> 
> def main():
>    reactor.listenTCP(..., ServerFactory())
>    reactor.run()
> 
> ...or don't start listening until D has connected, like this:
> 
> class ServerFactory(...):
>    def __init__(self, dProto):
>      self.connD = dProto
> 
> def startListen(dProto):
>    reactor.listenTCP(..., ServerFactory(dProto))
> 
> def main():
>    d_connect.connectTCP(Dhost, port).addCallback(startListen)
>    reactor.run()
> 
> The latter is simpler, but which is appropriate depends on your needs.
> 
> Note that I've used ClientCreator to get a callback when the connection
> to D is ready - remember that doesn't happen immediately.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From matt at nonuby.com  Tue Nov  6 22:49:34 2012
From: matt at nonuby.com (Matt Freeman)
Date: Wed, 7 Nov 2012 10:49:34 +0700
Subject: [Twisted-Python] Twisted Conch - Flow control
Message-ID: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>

I asked this question on  Stackoverflow (even offered a bounty) and IRC:

http://stackoverflow.com/questions/13117502/twisted-conch-flow-control
--

I have a Twisted Conch SSH server and the typical scenario is this:

git via OpenSSH client >>--- WAN1 --->> Twisted conch svr >>--- WAN2 -->>
Git server

There will be occassions that the 'git push' is sending data faster over
WAN1 than I can proxy it over WAN2, so I need to tell the client to slow
down (well before any TCP packet loss causes adjustments the TCP window
size) to avoid buffering too much on the Twisted server. Reading the RFC
for SSH this is accomplished with not acknowledging via adj window this
will then cause the git push to block on syscall write to the pipe backed
by openssh.

Looking at conch/ssh/connection.py:L216 in the method def
ssh_CHANNEL_DATA(self, packet): I can accomplish this with setting
localWindowSize to 0, and inflight data will still land as the predicate on
230 should still pass (give localWindowLeft). I am wondering if this is the
correct approach or am I missing something blindly obvious with regards to
flow control with Twisted SSH Conch? *

Note: I acknowledge there are methods placeholders for stopWriting and
startWriting on (channel) that I can override so I have hooks to control
the other side of the transmission 'git pull', but Im interested in first
leg. Also IPush/IPull producer dont seem applicable at this level and I
cant see how I can tie in these higher abstraction without butchering
conch?
-- 
Matt Freeman - @nonuby - http://blog.nonuby.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121107/1b88b887/attachment.htm 

From lacrima.maxim at gmail.com  Wed Nov  7 06:11:02 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Wed, 7 Nov 2012 13:11:02 +0200
Subject: [Twisted-Python] defer.TimeoutError in tests
Message-ID: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>

Hi!

I have some tests that fail intermittently, i.e. sometimes they fail,
sometimes they don't. These tests  were written against real server.

When I run these tests, the following errors may or may not occur:
[ERROR]
Traceback (most recent call last):
Failure: twisted.internet.defer.TimeoutError: <...>  still running at 120.0
secs

[ERROR]
Traceback (most recent call last):
Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was unclean.
Selectables:
<<class 'twisted.internet.tcp.Client'> to ('localhost', 8081) at 1eb1750>

I don't understand these errors. The server is up and running, but for some
reason connections are timed out.

The code under test uses perspective broker to talk to the server. I can't
figure out where the problem is -- on the server or in the code under test
(the client).

I have found some information that can help me to tackle the problem --
http://twistedmatrix.com/trac/ticket/2869

But what can be the reason of such intermittent errors?

Sorry, right now I can't provide a self contained example that demonstrates
the problem, because testing code is rather complex. At first, I would like
to know if there is something I could pay attention to.

Thanks in advance.

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121107/f394e314/attachment.htm 

From itamar at futurefoundries.com  Wed Nov  7 07:16:42 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 7 Nov 2012 07:16:42 -0500
Subject: [Twisted-Python] defer.TimeoutError in tests
In-Reply-To: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>
References: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>
Message-ID: <CAOp9P3rCYbkrqd2guid-gCP-+8_8xf-EmY36JCW4urLqC4-TOQ@mail.gmail.com>

On Wed, Nov 7, 2012 at 6:11 AM, Maxim Lacrima <lacrima.maxim at gmail.com>wrote:


> When I run these tests, the following errors may or may not occur:
> [ERROR]
> Traceback (most recent call last):
> Failure: twisted.internet.defer.TimeoutError: <...>  still running at
> 120.0 secs
>
> [ERROR]
> Traceback (most recent call last):
> Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was
> unclean.
> Selectables:
> <<class 'twisted.internet.tcp.Client'> to ('localhost', 8081) at 1eb1750>
>
> I don't understand these errors. The server is up and running, but for
> some reason connections are timed out.
>

The connection isn't timing out, the *test* is timing out. The connection
may be working just fine.

Due to an unknown reason, presumably a bug in your code (or test code), the
Deferred you are returning from the test method isn't being fired. E.g.
you're not calling callback()/errback(), or a callback method you added is
returning a Deferred that is in turn not being fired.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121107/15d1a229/attachment.htm 

From itamar at futurefoundries.com  Wed Nov  7 07:30:49 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 7 Nov 2012 07:30:49 -0500
Subject: [Twisted-Python] Twisted Conch - Flow control
In-Reply-To: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>
References: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>
Message-ID: <CAOp9P3pk02ozo51QCgZkp4wsy14Nh-LgFL0N=gdhssj2-repNg@mail.gmail.com>

On Tue, Nov 6, 2012 at 10:49 PM, Matt Freeman <matt at nonuby.com> wrote:

> I asked this question on  Stackoverflow (even offered a bounty) and IRC:
>
> http://stackoverflow.com/questions/13117502/twisted-conch-flow-control
> --
>
> I have a Twisted Conch SSH server and the typical scenario is this:
>
> git via OpenSSH client >>--- WAN1 --->> Twisted conch svr >>--- WAN2 -->>
> Git server
>
> There will be occassions that the 'git push' is sending data faster over
> WAN1 than I can proxy it over WAN2, so I need to tell the client to slow
> down (well before any TCP packet loss causes adjustments the TCP window
> size) to avoid buffering too much on the Twisted server. Reading the RFC
> for SSH this is accomplished with not acknowledging via adj window this
> will then cause the git push to block on syscall write to the pipe backed
> by openssh.
>
> Looking at conch/ssh/connection.py:L216 in the method def
> ssh_CHANNEL_DATA(self, packet): I can accomplish this with setting
> localWindowSize to 0, and inflight data will still land as the predicate on
> 230 should still pass (give localWindowLeft). I am wondering if this is the
> correct approach or am I missing something blindly obvious with regards to
> flow control with Twisted SSH Conch? *
>
> Note: I acknowledge there are methods placeholders for stopWriting and
> startWriting on (channel) that I can override so I have hooks to control
> the other side of the transmission 'git pull', but Im interested in first
> leg. Also IPush/IPull producer dont seem applicable at this level and I
> cant see how I can tie in these higher abstraction without butchering conch?
>
The general non-SSH specific answer is to use the producer API. Something
like:

    wan2transport.registerProducer(wan1transport, True)

Assuming WAN2 is also over SSH (it wasn't quite clear), SSHChannel ideally
should implement the producer and consumer APIs so you could do:

    wan2channel.registerProducer(wan1channel, True)

But, as you say, it doesn't implement those APIs. Thus it looks like you'd
want to subclass SSHChannel, and have wan2's SSHChannel.stop/startWriting
call pause/resumeProducing on the WAN1 channel's *transport*
(SSHConnection). Unless you have multiple channels in your incoming SSH
connection that you want to pause/resume separately, and it doesn't sound
like you do, this should work.

twisted.conch.scripts.conch.SSHSession has an example of this, more or
less, except that it's pausing reading from stdin rather than another SSH
connection.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121107/55506829/attachment.htm 

From itamar at futurefoundries.com  Wed Nov  7 07:35:13 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 7 Nov 2012 07:35:13 -0500
Subject: [Twisted-Python] Twisted Conch - Flow control
In-Reply-To: <CAOp9P3pk02ozo51QCgZkp4wsy14Nh-LgFL0N=gdhssj2-repNg@mail.gmail.com>
References: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>
	<CAOp9P3pk02ozo51QCgZkp4wsy14Nh-LgFL0N=gdhssj2-repNg@mail.gmail.com>
Message-ID: <CAOp9P3q5GEyz-nts_4R=3bt3rm2JS+4hMBCM7fJpeJR1xAyiGA@mail.gmail.com>

On Wed, Nov 7, 2012 at 7:30 AM, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:


> SSHChannel.stop/startWriting call pause/resumeProducing on the WAN1
> channel's *transport* (SSHConnection).
>

Sorry, SSHServerTransport, not SSHConnection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121107/c95bafda/attachment.htm 

From lacrima.maxim at gmail.com  Fri Nov  9 02:34:31 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Fri, 9 Nov 2012 09:34:31 +0200
Subject: [Twisted-Python] defer.TimeoutError in tests
In-Reply-To: <CAOp9P3rCYbkrqd2guid-gCP-+8_8xf-EmY36JCW4urLqC4-TOQ@mail.gmail.com>
References: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>
	<CAOp9P3rCYbkrqd2guid-gCP-+8_8xf-EmY36JCW4urLqC4-TOQ@mail.gmail.com>
Message-ID: <CAKef57N7b3iHSr8YA6AT_vTdxf2NjdzQQuExyaDXWb6C1paC-A@mail.gmail.com>

> The connection isn't timing out, the *test* is timing out. The connection
> may be working just fine.
>
> Due to an unknown reason, presumably a bug in your code (or test code),
> the Deferred you are returning from the test method isn't being fired. E.g.
> you're not calling callback()/errback(), or a callback method you added is
> returning a Deferred that is in turn not being fired.
>
>
Hi, Itamar!

Thanks for your reply. Yes, this was a bug in my code, which caused
Deferred to never fire under some circumstances.

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121109/12f9a5a9/attachment.htm 

From exarkun at twistedmatrix.com  Sun Nov 11 00:05:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 11 Nov 2012 05:05:25 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1352610325.61.1030690699@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121111/7fe8ff1a/attachment.htm 

From _ at lvh.cc  Wed Nov 14 04:05:15 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 14 Nov 2012 10:05:15 +0100
Subject: [Twisted-Python] Getting my Cred interfaces right:
	IUsername(Hashed)?Password
Message-ID: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>

Hi,


I'm trying to make sure that I have my cred interfaces right.

Users log in using a username and password. They provide these credentials
in plaintext (over a TLSd connection). The user password is stored using a
secure key derivation function (in casu, scrypt).

Currently I have this gumongous User object (an Axiom Item), and I'm trying
to split it up into parts. IIUC, the checker's checked interface should be
IUsernamePassword (that's already the case). However, the thing I adapt a
User to to check it should be an IUsernameHashedPassword, right?

In the end, I doubt this matters an awful lot, unless somebody ends up
implementing a IUsernameHashedPassword checker that is smart enough to read
both scrypt/bcrypt headers and /etc/shadow-style $-delimited entries.

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121114/9ab3169d/attachment.htm 

From exarkun at twistedmatrix.com  Wed Nov 14 07:29:56 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 14 Nov 2012 12:29:56 -0000
Subject: [Twisted-Python] Getting my Cred interfaces right:
 IUsername(Hashed)?Password
In-Reply-To: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>
References: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>
Message-ID: <20121114122956.3320.1973062983.divmod.xquotient.4@localhost6.localdomain6>

On 09:05 am, _ at lvh.cc wrote:
>Hi,
>
>
>I'm trying to make sure that I have my cred interfaces right.
>
>Users log in using a username and password. They provide these 
>credentials
>in plaintext (over a TLSd connection). The user password is stored 
>using a
>secure key derivation function (in casu, scrypt).
>
>Currently I have this gumongous User object (an Axiom Item), and I'm 
>trying
>to split it up into parts. IIUC, the checker's checked interface should 
>be
>IUsernamePassword (that's already the case). However, the thing I adapt 
>a
>User to to check it should be an IUsernameHashedPassword, right?

This isn't right.  The point of declaring interfaces on the checker is 
so the system knows what kind of credentials it can check.  If your 
credentials object implements a different interface than your checker 
declares it can check, the system won't ever ask the checker to check 
the credentials.

It sounds like you might have something extra going on beyond the normal 
usage of cred, which perhaps makes the idea you've written about here 
work somehow - but I don't know what the extra something is, and it 
probably doesn't apply to cred usage in general (ie, perhaps it is a 
particularity of Axiom).

Jean-Paul
>In the end, I doubt this matters an awful lot, unless somebody ends up
>implementing a IUsernameHashedPassword checker that is smart enough to 
>read
>both scrypt/bcrypt headers and /etc/shadow-style $-delimited entries.
>
>cheers
>lvh


From _ at lvh.cc  Wed Nov 14 08:29:54 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 14 Nov 2012 14:29:54 +0100
Subject: [Twisted-Python] Getting my Cred interfaces right:
	IUsername(Hashed)?Password
In-Reply-To: <20121114122956.3320.1973062983.divmod.xquotient.4@localhost6.localdomain6>
References: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>
	<20121114122956.3320.1973062983.divmod.xquotient.4@localhost6.localdomain6>
Message-ID: <CAE_Hg6YvKRp7Y8=PaJHurd0DGtwL7Ww8G1+YAmFgONordFhQAg@mail.gmail.com>

On Wed, Nov 14, 2012 at 1:29 PM, <exarkun at twistedmatrix.com> wrote:

>  This isn't right.  The point of declaring interfaces on the checker is
> so the system knows what kind of credentials it can check.  If your
> credentials object implements a different interface than your checker
> declares it can check, the system won't ever ask the checker to check
> the credentials.
>

Just to be clear: the thing being checked, i.e. the thing being provided by
the user when logging in, is just an IUsernamePassword. Hence, the
credentialInterfaces list on the ICredentialsChecker is [IUsernamePassword].

The only place where IUsernameHashedPassword comes in to play is storage,
i.e. the thing I am checking the user-provided IUsernamePassword against.

Maybe code is better: https://gist.github.com/4072062 (old.py is what it is
now, new.py is what I'm proposing)

Jean-Paul


cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121114/23464cc8/attachment.htm 

From glyph at twistedmatrix.com  Thu Nov 15 03:03:39 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 15 Nov 2012 00:03:39 -0800
Subject: [Twisted-Python] doc suggestion
Message-ID: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>

A long time ago, we made an informal policy decision about redundancy between documentation of instance variables and constructor parameters.  Specifically we decided that if an initializer simply takes a bunch of parameters, then sets them as attributes on self under the same name, it would be redundant to document them both with @ivar and with @param.  Arbitrarily, we decided that @ivar is the one we would standardize on.

Later, we decided that too many attributes were public and we should default to making more things private.

The unfortunate confluence of these decisions has resulted in API documentation like this:

<http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>

Note that the public "__init__" is undocumented, but all the private, greyed-out attributes have documentation.

This is technically a violation of the original policy statement - although nobody can really be blamed for that, since as far as I can tell it's not actually written down anywhere - in that the @ivars have different names than the parameters to __init__, since they all start with _.

Of course, it would still be super redundant to document everything twice if the parameters and the attributes are in fact the same.

However, I think that going forward, this tendency should be amended so that, in the case where the attributes are private but the __init__ parameters are public, they should be documented with @param statements and not with @ivar statements.  More generally, if the same thing has to be documented twice, and it's public in one place and private in the other, the public documentation should always be preferred.

(And perhaps it should be officially documented in the coding standard.)

Thoughts, anyone?  Shall I file a ticket?

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121115/323b2e26/attachment.htm 

From akaradag at NETAS.com.tr  Thu Nov 15 04:27:09 2012
From: akaradag at NETAS.com.tr (Anil  KARADAG)
Date: Thu, 15 Nov 2012 11:27:09 +0200
Subject: [Twisted-Python] FW: No module names "twisted.names" due to confuse
	twisted-core library folder
Message-ID: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>

Hi all,

 

 

I have a problem about twisted-core library location. I downloaded and
installed twisted-10.2-core(TwistedCore-10.2.0.tar.bz2) and
names(TwistedNames-10.2.0.tar.bz2) from source code[1]. But python does
not find "names" plugin. Because twisted-core has been installed under
/usr/lib64/ but names is under /usr/lib/ defaultly.

 

 

 

[root at trhtlangley38 sylkserver]# ll
/usr/lib64/python2.6/site-packages/twisted/plugins/

total 124

-rw------- 1 root root  979 Jan  3  2008 cred_anonymous.py

-rw------- 1 root root 1451 Nov 13 18:02 cred_anonymous.pyc

-rw------- 1 root root 1837 Jan  3  2008 cred_file.py

-rw------- 1 root root 2222 Nov 13 18:02 cred_file.pyc

-rw------- 1 root root 2352 Jan  3  2008 cred_memory.py

-rw------- 1 root root 2673 Nov 13 18:02 cred_memory.pyc

-rw------- 1 root root 3804 Jan  3  2008 cred_unix.py

-rw------- 1 root root 4387 Nov 13 18:02 cred_unix.pyc

-rwx------ 1 root root 5868 Nov 13 13:42 dropin.cache

-rw------- 1 root root  549 Jul 29  2008 __init__.py

-rw------- 1 root root  533 Nov 13 18:02 __init__.pyc

-rw------- 1 root root  239 Apr  8  2008 twisted_ftp.py

-rw------- 1 root root  341 Nov 13 18:02 twisted_ftp.pyc

-rw------- 1 root root  270 Apr  8  2008 twisted_inet.py

-rw------- 1 root root  373 Nov 13 18:02 twisted_inet.pyc

-rw------- 1 root root  290 Apr  8  2008 twisted_manhole.py

-rw------- 1 root root  396 Nov 13 18:02 twisted_manhole.pyc

-rw------- 1 root root  285 Apr  8  2008 twisted_portforward.py

-rw------- 1 root root  395 Nov 13 18:02 twisted_portforward.pyc

-rw------- 1 root root 1417 Dec 23  2006 twisted_qtstub.py

-rw------- 1 root root 1996 Nov 13 18:02 twisted_qtstub.pyc

-rw------- 1 root root 1420 Nov 15  2006 twisted_reactors.py

-rw------- 1 root root 1645 Nov 13 18:02 twisted_reactors.pyc

-rw------- 1 root root  257 Apr  8  2008 twisted_socks.py

-rw------- 1 root root  361 Nov 13 18:02 twisted_socks.pyc

-rw------- 1 root root  298 Apr  8  2008 twisted_telnet.py

-rw------- 1 root root  403 Nov 13 18:02 twisted_telnet.pyc

-rw------- 1 root root 2034 Dec 25  2009 twisted_trial.py

-rw------- 1 root root 1876 Nov 13 18:02 twisted_trial.pyc

 

[root at trhtlangley38 sylkserver]# ll
/usr/lib/python2.6/site-packages/twisted/plugins/

total 16

-rw------- 1 root root  257 Apr  8  2008 twisted_names.py

-rw------- 1 root root  359 Nov 15 10:30 twisted_names.pyc

-rw------- 1 root root 1175 Nov  2  2008 twisted_words.py

-rw------- 1 root root 1973 Nov 15 10:29 twisted_words.pyc

[root at trhtlangley38 sylkserver]#

 

 

 

[root at example ]# python

Python 2.6.6 (r266:84292, Sep 12 2011, 14:03:14)

[GCC 4.4.5 20110214 (Red Hat 4.4.5-6)] on linux2

Type "help", "copyright", "credits" or "license" for more information.

>>> import twisted

>>> print twisted.__file__

/usr/lib64/python2.6/site-packages/twisted/__init__.pyc

>>> import twisted.names

Traceback (most recent call last):

  File "<stdin>", line 1, in <module>

ImportError: No module named names

>>> 

 

 

I tried --prefix options to install method but i cannot pass the
problem. Does anyone know how to fix the problem and why the names
module is not installed under twisted-core library path.  

 

 

 

OS: RHEL 6.2

 

 

 

Thanks 

 

[1] http://twistedmatrix.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121115/26ed0be8/attachment.htm 

From wangfuwen000 at 163.com  Thu Nov 15 05:26:27 2012
From: wangfuwen000 at 163.com (=?GBK?B?zfW4u87E?=)
Date: Thu, 15 Nov 2012 18:26:27 +0800 (CST)
Subject: [Twisted-Python] doc suggestion
In-Reply-To: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
References: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
Message-ID: <2765b43f.de7e.13b039afe02.Coremail.wangfuwen000@163.com>


I want to unsubscribe please;




At 2012-11-15 16:03:39,Glyph <glyph at twistedmatrix.com> wrote:
A long time ago, we made an informal policy decision about redundancy between documentation of instance variables and constructor parameters.  Specifically we decided that if an initializer simply takes a bunch of parameters, then sets them as attributes on self under the same name, it would be redundant to document them both with @ivar and with @param.  Arbitrarily, we decided that @ivar is the one we would standardize on.


Later, we decided that too many attributes were public and we should default to making more things private.


The unfortunate confluence of these decisions has resulted in API documentation like this:



<http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>


Note that the public "__init__" is undocumented, but all the private, greyed-out attributes have documentation.


This is technically a violation of the original policy statement - although nobody can really be blamed for that, since as far as I can tell it's not actually written down anywhere - in that the @ivars have different names than the parameters to __init__, since they all start with _.


Of course, it would still be super redundant to document everything twice if the parameters and the attributes are in fact the same.


However, I think that going forward, this tendency should be amended so that, in the case where the attributes are private but the __init__ parameters are public, they should be documented with @param statements and not with @ivar statements.  More generally, if the same thing has to be documented twice, and it's public in one place and private in the other, the public documentation should always be preferred.


(And perhaps it should be officially documented in the coding standard.)


Thoughts, anyone?  Shall I file a ticket?


-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121115/e0098dba/attachment-0001.htm 

From exarkun at twistedmatrix.com  Thu Nov 15 06:48:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 15 Nov 2012 11:48:25 -0000
Subject: [Twisted-Python] doc suggestion
In-Reply-To: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
References: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
Message-ID: <20121115114825.3320.1091679534.divmod.xquotient.9@localhost6.localdomain6>

On 08:03 am, glyph at twistedmatrix.com wrote:
>A long time ago, we made an informal policy decision about redundancy 
>between documentation of instance variables and constructor parameters. 
>Specifically we decided that if an initializer simply takes a bunch of 
>parameters, then sets them as attributes on self under the same name, 
>it would be redundant to document them both with @ivar and with @param. 
>Arbitrarily, we decided that @ivar is the one we would standardize on.
>
>Later, we decided that too many attributes were public and we should 
>default to making more things private.
>
>The unfortunate confluence of these decisions has resulted in API 
>documentation like this:
>
><http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>
>
>Note that the public "__init__" is undocumented, but all the private, 
>greyed-out attributes have documentation.
>
>This is technically a violation of the original policy statement - 
>although nobody can really be blamed for that, since as far as I can 
>tell it's not actually written down anywhere - in that the @ivars have 
>different names than the parameters to __init__, since they all start 
>with _.
>
>Of course, it would still be super redundant to document everything 
>twice if the parameters and the attributes are in fact the same.
>
>However, I think that going forward, this tendency should be amended so 
>that, in the case where the attributes are private but the __init__ 
>parameters are public, they should be documented with @param statements 
>and not with @ivar statements.  More generally, if the same thing has 
>to be documented twice, and it's public in one place and private in the 
>other, the public documentation should always be preferred.
>
>(And perhaps it should be officially documented in the coding 
>standard.)

I agree.  Actually, I think a few people have even started doing this 
already.  I suppose we should document it, although I bet I can count on 
one hand how many people have actually _read_ the coding standard in the 
last year.
>Thoughts, anyone?  Shall I file a ticket?

A ticket for updating the coding standard?  Yes.  I don't think there 
should be a ticket for correcting the existing documentation - perhaps a 
milestone, instead (clearly there's too much documentation to change to 
do it for a single ticket)?

Jean-Paul


From exarkun at twistedmatrix.com  Thu Nov 15 06:52:36 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 15 Nov 2012 11:52:36 -0000
Subject: [Twisted-Python] FW: No module names "twisted.names" due to
 confuse twisted-core library folder
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>
Message-ID: <20121115115236.3320.1179027065.divmod.xquotient.17@localhost6.localdomain6>

On 09:27 am, akaradag at netas.com.tr wrote:
>Hi all,
>
>I have a problem about twisted-core library location. I downloaded and
>installed twisted-10.2-core(TwistedCore-10.2.0.tar.bz2) and
>names(TwistedNames-10.2.0.tar.bz2) from source code[1]. But python does
>not find "names" plugin. Because twisted-core has been installed under
>/usr/lib64/ but names is under /usr/lib/ defaultly.

This is due to a bug in the local distutils configuration of your Linux 
distribution which causes it to select incorrect installation targets 
and does not let you override these choices.  You should report the bug 
to them.

Meanwhile, you can solve the problem by:

  1) Use the platform-supplied packages of Twisted instead of installing 
your own version from source

or

  2) Install Twisted instead of Twisted Core and Twisted Names

These are both good ideas anyway, disregarding your current particular 
installation problem.  If possible, do them both.

Jean-Paul


From akaradag at NETAS.com.tr  Thu Nov 15 07:17:55 2012
From: akaradag at NETAS.com.tr (Anil  KARADAG)
Date: Thu, 15 Nov 2012 14:17:55 +0200
Subject: [Twisted-Python] FW: No module names "twisted.names" due to
	confuse twisted-core library folder
In-Reply-To: <20121115115236.3320.1179027065.divmod.xquotient.17@localhost6.localdomain6>
References: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>
	<20121115115236.3320.1179027065.divmod.xquotient.17@localhost6.localdomain6>
Message-ID: <AFE3D52FC015A5408CD28098BD0439C6759B2E@netasmx.netas.lab.nortel.com>

Hi Jean,


Thanks for reply. I passed the problem with the below approach;



Why am I getting ImportErrors for Twisted subpackages on my 64bit
installation of RedHat/Fedora/CentOS?
      
  Red Hat and derived Linux distributions arrange to have certain Python
libraries installed in /usr/lib/ and 
  other parts installed in /usr/lib64/. 
  This is problematic for Twisted, since it results in some of Twisted
being installed in one directory and the rest installed in another. 
  Python will load a package from only one directory. 
  You can override this default behavior when you install Twisted by
supplying the --install-lib parameter when running Twisted's setup.py.
      

http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#WhyamIgettin
gImportErrorsforTwistedsubpackagesonmy64bitinstallationofRedHatFedoraCen
tOS


thanks


-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of
exarkun at twistedmatrix.com
Sent: Thursday, November 15, 2012 1:53 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] FW: No module names "twisted.names" due to
confuse twisted-core library folder

On 09:27 am, akaradag at netas.com.tr wrote:
>Hi all,
>
>I have a problem about twisted-core library location. I downloaded and
>installed twisted-10.2-core(TwistedCore-10.2.0.tar.bz2) and
>names(TwistedNames-10.2.0.tar.bz2) from source code[1]. But python does
>not find "names" plugin. Because twisted-core has been installed under
>/usr/lib64/ but names is under /usr/lib/ defaultly.

This is due to a bug in the local distutils configuration of your Linux 
distribution which causes it to select incorrect installation targets 
and does not let you override these choices.  You should report the bug 
to them.

Meanwhile, you can solve the problem by:

  1) Use the platform-supplied packages of Twisted instead of installing

your own version from source

or

  2) Install Twisted instead of Twisted Core and Twisted Names

These are both good ideas anyway, disregarding your current particular 
installation problem.  If possible, do them both.

Jean-Paul

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From poalman at gmail.com  Thu Nov 15 09:02:05 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 15 Nov 2012 14:02:05 +0000
Subject: [Twisted-Python] passing exception object to log.err doesn't log
	traceback?
Message-ID: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>

I was just looking at some logs and some of the errors logged without
tracebacks, I work out it was when I wasn't passing the error object to
log.err- Is this by design?

Here is some code which shows it logging and not logging the traceback

import os
from twisted.python import log
from twisted.python.logfile import DailyLogFile

logfile=
DailyLogFile.fromFullPath(os.path.join(os.path.dirname(__file__),"error.log"))
log.startLogging(logfile)

def zero_error():
    1/0

def stack(x):
    if not x:
        zero_error()
    else:
        stack(x-1)

def work(x,pass_exception):
    try:
        stack(x)
    except Exception as e:
        log.err(e if pass_exception else None)

if __name__ == "__main__":
    work(5,True) #Doesn't log traceback
    work(5,False) #Does log
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121115/cb165eb1/attachment.htm 

From itamar at futurefoundries.com  Thu Nov 15 09:56:44 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Thu, 15 Nov 2012 09:56:44 -0500
Subject: [Twisted-Python] passing exception object to log.err doesn't
	log traceback?
In-Reply-To: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>
References: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>
Message-ID: <CAOp9P3pJ=TZi_iw2XPGPCz7RweU38VROtJS5QP+HdeHV=2c-gg@mail.gmail.com>

On Thu, Nov 15, 2012 at 9:02 AM, Paul Wiseman <poalman at gmail.com> wrote:

> I was just looking at some logs and some of the errors logged without
> tracebacks, I work out it was when I wasn't passing the error object to
> log.err- Is this by design?
>

In Python 2.x, exception objects do not have any reference to their
traceback; this is one of the reasons Twisted has the Failure class, which
encapsulates both. (In Python 3 exceptions do have their tracebacks
attached.) Thus, if you want the traceback logged, you should do something
like:

from twisted.python import log

try:
    1/0
except Exception as e:
    # Log the last exception that occurred, including its traceback:
    log.err(None, "An error occurred.")

Or:

from twisted.python import log, failure

try:
    1/0
except Exception as e:
    f = failure.Failure()
    log.err(f, "An error occurred.")

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121115/def4111b/attachment.htm 

From poalman at gmail.com  Thu Nov 15 13:28:00 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 15 Nov 2012 18:28:00 +0000
Subject: [Twisted-Python] passing exception object to log.err doesn't
	log traceback?
In-Reply-To: <CAOp9P3pJ=TZi_iw2XPGPCz7RweU38VROtJS5QP+HdeHV=2c-gg@mail.gmail.com>
References: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>
	<CAOp9P3pJ=TZi_iw2XPGPCz7RweU38VROtJS5QP+HdeHV=2c-gg@mail.gmail.com>
Message-ID: <CACgdh2h7NdrPJXuB+x8uFENOfvB1xfwXHe_8XZfz6E++H0FwtQ@mail.gmail.com>

Ah I doubted it was a bug but the behaviour surprised me. Thanks for
explaining!

On 15 November 2012 14:56, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:

>
>
> On Thu, Nov 15, 2012 at 9:02 AM, Paul Wiseman <poalman at gmail.com> wrote:
>
>> I was just looking at some logs and some of the errors logged without
>> tracebacks, I work out it was when I wasn't passing the error object to
>> log.err- Is this by design?
>>
>
> In Python 2.x, exception objects do not have any reference to their
> traceback; this is one of the reasons Twisted has the Failure class, which
> encapsulates both. (In Python 3 exceptions do have their tracebacks
> attached.) Thus, if you want the traceback logged, you should do something
> like:
>
> from twisted.python import log
>
> try:
>     1/0
> except Exception as e:
>     # Log the last exception that occurred, including its traceback:
>     log.err(None, "An error occurred.")
>
> Or:
>
> from twisted.python import log, failure
>
> try:
>     1/0
> except Exception as e:
>     f = failure.Failure()
>     log.err(f, "An error occurred.")
>
> --
> Itamar Turner-Trauring, Future Foundries LLC
> http://futurefoundries.com/ ? Twisted consulting, training and support.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121115/6d10669f/attachment.htm 

From glyph at twistedmatrix.com  Thu Nov 15 20:09:30 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 15 Nov 2012 17:09:30 -0800
Subject: [Twisted-Python] doc suggestion
In-Reply-To: <20121115114825.3320.1091679534.divmod.xquotient.9@localhost6.localdomain6>
References: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
	<20121115114825.3320.1091679534.divmod.xquotient.9@localhost6.localdomain6>
Message-ID: <D066F4EA-3D56-46D3-B107-7272E9DBBE0D@twistedmatrix.com>


On Nov 15, 2012, at 3:48 AM, exarkun at twistedmatrix.com wrote:

> On 08:03 am, glyph at twistedmatrix.com wrote:
>> A long time ago, we made an informal policy decision about redundancy 
>> between documentation of instance variables and constructor parameters. 
>> Specifically we decided that if an initializer simply takes a bunch of 
>> parameters, then sets them as attributes on self under the same name, 
>> it would be redundant to document them both with @ivar and with @param. 
>> Arbitrarily, we decided that @ivar is the one we would standardize on.
>> 
>> Later, we decided that too many attributes were public and we should 
>> default to making more things private.
>> 
>> The unfortunate confluence of these decisions has resulted in API 
>> documentation like this:
>> 
>> <http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>
>> 
>> Note that the public "__init__" is undocumented, but all the private, 
>> greyed-out attributes have documentation.
>> 
>> This is technically a violation of the original policy statement - 
>> although nobody can really be blamed for that, since as far as I can 
>> tell it's not actually written down anywhere - in that the @ivars have 
>> different names than the parameters to __init__, since they all start 
>> with _.
>> 
>> Of course, it would still be super redundant to document everything 
>> twice if the parameters and the attributes are in fact the same.
>> 
>> However, I think that going forward, this tendency should be amended so 
>> that, in the case where the attributes are private but the __init__ 
>> parameters are public, they should be documented with @param statements 
>> and not with @ivar statements.  More generally, if the same thing has 
>> to be documented twice, and it's public in one place and private in the 
>> other, the public documentation should always be preferred.
>> 
>> (And perhaps it should be officially documented in the coding 
>> standard.)
> 
> I agree.  Actually, I think a few people have even started doing this 
> already.  I suppose we should document it, although I bet I can count on 
> one hand how many people have actually _read_ the coding standard in the 
> last year.
>> Thoughts, anyone?  Shall I file a ticket?
> 
> A ticket for updating the coding standard?  Yes.  I don't think there 
> should be a ticket for correcting the existing documentation - perhaps a 
> milestone, instead (clearly there's too much documentation to change to 
> do it for a single ticket)?

Done:

<http://tm.tl/6189>

-g



From lacrima.maxim at gmail.com  Fri Nov 16 09:46:23 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Fri, 16 Nov 2012 16:46:23 +0200
Subject: [Twisted-Python] Is Ampoule still maintained?
Message-ID: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>

Hi!

I would like to use Ampoule [1] package in my project.

However, from a look at a project page it seems that it is no longer
maintained. The latest release was about 2,5 years ago. Is it just bug
free, so new releases aren't required, or is it just unmaintained?

Does anyone use it?

Thank you

[1] https://launchpad.net/ampoule

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121116/9502ee4a/attachment.htm 

From flaviogrossi at ymail.com  Fri Nov 16 11:57:45 2012
From: flaviogrossi at ymail.com (Flavio Grossi)
Date: Fri, 16 Nov 2012 16:57:45 +0000 (UTC)
Subject: [Twisted-Python] Is Ampoule still maintained?
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
Message-ID: <loom.20121116T175022-334@post.gmane.org>

Maxim Lacrima <lacrima.maxim <at> gmail.com> writes:


> However, from a look at a project page it seems that it is no longer 
> maintained. The latest release was about 2,5 years ago. Is it just bug
> free, so new releases aren't required, or is it just unmaintained?

i'm using it in production and i couldn't find any major problem

however, i think you're right, it seems unmantained, i opened this bug
  https://bugs.launchpad.net/ampoule/+bug/710597
more than an year ago without any answer from the author (fortunately
the fix is trivial)

bye,
flavio




From exarkun at twistedmatrix.com  Sun Nov 18 00:05:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Nov 2012 05:05:25 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1353215125.82.77976035@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121118/822b0518/attachment.htm 

From adi at roiban.ro  Sun Nov 18 08:26:25 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 18 Nov 2012 15:26:25 +0200
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
Message-ID: <CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>

Hi,

What is the status of Twisted Checker?

I could not find anything related to TwistedChecker on the website:
http://twistedmatrix.com/trac/search?q=twistedchecker

----

Is there a bug report or web page discussing the
requirements/specifications for a Twisted Checker?

Cheers,
Adi


On 8 June 2012 10:47, Jonathan Lange <jml at mumak.net> wrote:
> On Fri, Jun 8, 2012 at 6:23 AM, Raphael Shu <raphael at uaca.com> wrote:
>> Hi everyone,
>>
>> I'm a student of GSoC 2012, from University of Tsukuba, Japan.
>>
>> I'm glad to be selected as a practicer in Twisted project this year.
>>
>> Then in these serveral months, my project is to create a code standard
>> checker for Twisted,
>>
>> Basically, I will follow "Twisted Coding Standard", it can be found at:
>>
>> http://twistedmatrix.com/trac/browser/trunk/doc/core/development/policy/coding-standard.xhtml?format=raw
>>
>> I hope finally this project could be integrated into our main ticket system,
>>
>> so it would automatically check patches or other things.
>>
>> Please let me know if you have any good advise or idea to this project.
>>
>> My name on IRC is zomux.
>>
>> ( This project is currently hosted on launchpad,
>> http://launchpad.net/twistedchecker )
>>
>
> Welcome Raphael! I'm really looking forward to having an automated
> Twisted coding standard checker.
>
> Thanks,
> jml
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
Adi Roiban


From itamar at futurefoundries.com  Sun Nov 18 16:54:15 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Sun, 18 Nov 2012 16:54:15 -0500
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
Message-ID: <CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>

On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
>
> What is the status of Twisted Checker?
>
> I could not find anything related to TwistedChecker on the website:
> http://twistedmatrix.com/trac/search?q=twistedchecker
>
> ----
>
> Is there a bug report or web page discussing the
> requirements/specifications for a Twisted Checker?
>

http://launchpad.net/twistedchecker has a bunch of tickets, and the code.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121118/5895e94b/attachment.htm 

From lacrima.maxim at gmail.com  Mon Nov 19 02:34:42 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Mon, 19 Nov 2012 09:34:42 +0200
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <loom.20121116T175022-334@post.gmane.org>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
Message-ID: <CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>

Thanks, Flavio!


On 16 November 2012 18:57, Flavio Grossi <flaviogrossi at ymail.com> wrote:

> Maxim Lacrima <lacrima.maxim <at> gmail.com> writes:
>
>
> > However, from a look at a project page it seems that it is no longer
> > maintained. The latest release was about 2,5 years ago. Is it just bug
> > free, so new releases aren't required, or is it just unmaintained?
>
> i'm using it in production and i couldn't find any major problem
>
> however, i think you're right, it seems unmantained, i opened this bug
>   https://bugs.launchpad.net/ampoule/+bug/710597
> more than an year ago without any answer from the author (fortunately
> the fix is trivial)
>
> bye,
> flavio
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121119/cd198404/attachment.htm 

From glyph at twistedmatrix.com  Mon Nov 19 23:39:47 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 19 Nov 2012 20:39:47 -0800
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
	<CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
Message-ID: <7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>

On Nov 18, 2012, at 11:34 PM, Maxim Lacrima <lacrima.maxim at gmail.com> wrote:

> On 16 November 2012 18:57, Flavio Grossi <flaviogrossi at ymail.com> wrote:
> Maxim Lacrima <lacrima.maxim <at> gmail.com> writes:
> 
> 
> > However, from a look at a project page it seems that it is no longer
> > maintained. The latest release was about 2,5 years ago. Is it just bug
> > free, so new releases aren't required, or is it just unmaintained?
> 
> i'm using it in production and i couldn't find any major problem
> 
> however, i think you're right, it seems unmantained, i opened this bug
>   https://bugs.launchpad.net/ampoule/+bug/710597
> more than an year ago without any answer from the author (fortunately
> the fix is trivial)
> 
> bye,
> flavio
> Thanks, Flavio!
> 
> -- 
> with regards,
> Maxim

Would anyone else like to step up to volunteer to maintain Ampoule?

Twisted eventually needs to grow its own simplified process pool, and my hope was that Ampoule could serve as a proving ground to get that implemented and tested well.  I can probably harass dialtone to give commit access to some more people if there were real interest.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121119/9d77074d/attachment.htm 

From glyph at twistedmatrix.com  Mon Nov 19 23:46:21 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 19 Nov 2012 20:46:21 -0800
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
Message-ID: <582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>


On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <itamar at futurefoundries.com> wrote:

> 
> 
> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
> Hi,
> 
> What is the status of Twisted Checker?
> 
> I could not find anything related to TwistedChecker on the website:
> http://twistedmatrix.com/trac/search?q=twistedchecker
> 
> ----
> 
> Is there a bug report or web page discussing the
> requirements/specifications for a Twisted Checker?
> 
> http://launchpad.net/twistedchecker has a bunch of tickets, and the code. 

It seems like the existence of this tool should be documented somewhere on our wiki (ReviewProcess, perhaps) as well as what to do with its output?

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121119/475b8463/attachment.htm 

From raphael at uaca.com  Tue Nov 20 00:47:39 2012
From: raphael at uaca.com (Raphael Shu)
Date: Tue, 20 Nov 2012 14:47:39 +0900
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
	<582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
Message-ID: <CAMf6tM=sgU=3B9ce3SfGyG2dzixRTh43awktRf0a1SPdYjUneQ@mail.gmail.com>

Yea,  may be create a page on Wiki to describe the usage of this tool ?

Im looking forward to make it available in buildbot.

--
Raphael Shu

On Tue, Nov 20, 2012 at 1:46 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <
> itamar at futurefoundries.com> wrote:
>
>
>
> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
>
>> Hi,
>>
>> What is the status of Twisted Checker?
>>
>> I could not find anything related to TwistedChecker on the website:
>> http://twistedmatrix.com/trac/search?q=twistedchecker
>>
>> ----
>>
>> Is there a bug report or web page discussing the
>> requirements/specifications for a Twisted Checker?
>>
>
> http://launchpad.net/twistedchecker has a bunch of tickets, and the code.
>
>
> It seems like the existence of this tool should be documented somewhere on
> our wiki (ReviewProcess, perhaps) as well as what to do with its output?
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
 *Raphael Shu , UACA 2012*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121120/1387e6d4/attachment.htm 

From lacrima.maxim at gmail.com  Tue Nov 20 03:41:32 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Tue, 20 Nov 2012 10:41:32 +0200
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
	<CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
	<7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>
Message-ID: <CAKef57MyhQwDsoxzoCWSYD+GwxRou4xW3-4fE0ZqKVNuF-jppg@mail.gmail.com>

Hi, glyph!


Would anyone else like to step up to volunteer to maintain Ampoule?
>
> Twisted eventually needs to grow its own simplified process pool, and my
> hope was that Ampoule could serve as a proving ground to get that
> implemented and tested well.  I can probably harass dialtone to give commit
> access to some more people if there were real interest.
>
>
I am experimenting with Ampoule right now, trying to find out how suitable
it is for a project I have been working on. It would be cool if Twisted had
its own process pool implementation. I would certainly like to contribute.
However, I am newbie, so many things aren't clear to me. I will try to get
a thorough understanding about how Ampoule works or maybe write my own
implementation. In any case I will write to this mailing list when I have
something to share.

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121120/f3a993ba/attachment.htm 

From dynamicgl at gmail.com  Tue Nov 20 10:28:53 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Tue, 20 Nov 2012 23:28:53 +0800
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <CAKef57MyhQwDsoxzoCWSYD+GwxRou4xW3-4fE0ZqKVNuF-jppg@mail.gmail.com>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
	<CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
	<7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>
	<CAKef57MyhQwDsoxzoCWSYD+GwxRou4xW3-4fE0ZqKVNuF-jppg@mail.gmail.com>
Message-ID: <CABkOF6R1HAOn7S9nWrFcddbEosSO=v3=STdHByE1Osv7YJtGzg@mail.gmail.com>

On Tue, Nov 20, 2012 at 4:41 PM, Maxim Lacrima <lacrima.maxim at gmail.com>wrote:

> Hi, glyph!
>
>
> Would anyone else like to step up to volunteer to maintain Ampoule?
>>
>> Twisted eventually needs to grow its own simplified process pool, and my
>> hope was that Ampoule could serve as a proving ground to get that
>> implemented and tested well.  I can probably harass dialtone to give commit
>> access to some more people if there were real interest.
>>
>>
> I am experimenting with Ampoule right now, trying to find out how suitable
> it is for a project I have been working on. It would be cool if Twisted had
> its own process pool implementation. I would certainly like to contribute.
> However, I am newbie, so many things aren't clear to me. I will try to get
> a thorough understanding about how Ampoule works or maybe write my own
> implementation. In any case I will write to this mailing list when I have
> something to share.
>
> --
> with regards,
> Maxim
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Hi

  Ampoule is a very good tool for parallel computing, The only drawback I
found is cx_freeze can't support it. I personally hope this "own simplified
process pool" eventually can work with cx_freeze flawlessly.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121120/a2b6a49d/attachment.htm 

From poalman at gmail.com  Tue Nov 20 15:47:08 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Tue, 20 Nov 2012 20:47:08 +0000
Subject: [Twisted-Python] ftp passive mode returning internal IP
Message-ID: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>

This possibly has nothing to do with twisted, but maybe if not someone may
be able to point me in the right direction!

Basically I've set up a twisted FTP server on ec2, and when a client tries
to enter passive mode I'm getting this:

Response: 227 Entering Passive Mode (x,x,x,x,159,122).
Status: Server sent passive reply with unroutable address. Using server
address instead.

the x.x.x.x is the boxes private IP, rather than its public IP.

It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0

Is there somehow I can change the way twisted is getting the IP, or is this
an issue with the server set up itself?

Any pointers or help on what to look/check for would be of huge help!

Thanks!

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121120/38727275/attachment.htm 

From adi at roiban.ro  Tue Nov 20 16:31:31 2012
From: adi at roiban.ro (Adi Roiban)
Date: Tue, 20 Nov 2012 23:31:31 +0200
Subject: [Twisted-Python] ftp passive mode returning internal IP
In-Reply-To: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
References: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
Message-ID: <CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>

Hi,

I don't think there is support for configuring the advertised IP address.
I don't know how EC2 ip forwarding works and how can you retrieve it.

To use another IP address, in FTP.ftp_PASV(), look for the following lines:

        self.dtpPort = self.getDTPPort(self.dtpFactory)

        host = self.transport.getHost().host
        port = self.dtpPort.getHost().port

Just replace 'self.transport.getHost().host' with your required IP or
another method for retrieving the IP address.

Cheers,
Adi

On 20 November 2012 22:47, Paul Wiseman <poalman at gmail.com> wrote:
> This possibly has nothing to do with twisted, but maybe if not someone may
> be able to point me in the right direction!
>
> Basically I've set up a twisted FTP server on ec2, and when a client tries
> to enter passive mode I'm getting this:
>
> Response: 227 Entering Passive Mode (x,x,x,x,159,122).
> Status: Server sent passive reply with unroutable address. Using server
> address instead.
>
> the x.x.x.x is the boxes private IP, rather than its public IP.
>
> It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0
>
> Is there somehow I can change the way twisted is getting the IP, or is this
> an issue with the server set up itself?
>
> Any pointers or help on what to look/check for would be of huge help!
>
> Thanks!
>
> Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Adi Roiban


From poalman at gmail.com  Tue Nov 20 17:02:02 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Tue, 20 Nov 2012 22:02:02 +0000
Subject: [Twisted-Python] ftp passive mode returning internal IP
In-Reply-To: <CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>
References: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
	<CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>
Message-ID: <CACgdh2jOnfMkVH+Yto7Lar+gxNZF_95LK5jdN6eYzQXdaAH+Uw@mail.gmail.com>

On 20 November 2012 21:31, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
>
> I don't think there is support for configuring the advertised IP address.
> I don't know how EC2 ip forwarding works and how can you retrieve it.
>
> To use another IP address, in FTP.ftp_PASV(), look for the following lines:
>
>         self.dtpPort = self.getDTPPort(self.dtpFactory)
>
>         host = self.transport.getHost().host
>         port = self.dtpPort.getHost().port
>
> Just replace 'self.transport.getHost().host' with your required IP or
> another method for retrieving the IP address.
>
> Cheers,
> Adi
>
>
Cheers Adi, I've made a function that launches 'curl ifconfig.me' through
subprocess, and I call that and save it when the server starts.

Is this definitely the only place where I need to override the host?

I'd rather wrap the transport object to be sure but twisted is still pretty
magic to me and I'm struggling to find out where this ProtocolWrapper
object is originating from.


> On 20 November 2012 22:47, Paul Wiseman <poalman at gmail.com> wrote:
> > This possibly has nothing to do with twisted, but maybe if not someone
> may
> > be able to point me in the right direction!
> >
> > Basically I've set up a twisted FTP server on ec2, and when a client
> tries
> > to enter passive mode I'm getting this:
> >
> > Response: 227 Entering Passive Mode (x,x,x,x,159,122).
> > Status: Server sent passive reply with unroutable address. Using server
> > address instead.
> >
> > the x.x.x.x is the boxes private IP, rather than its public IP.
> >
> > It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0
> >
> > Is there somehow I can change the way twisted is getting the IP, or is
> this
> > an issue with the server set up itself?
> >
> > Any pointers or help on what to look/check for would be of huge help!
> >
> > Thanks!
> >
> > Paul
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
>
>
> --
> Adi Roiban
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121120/abe48fe3/attachment.htm 

From poalman at gmail.com  Wed Nov 21 12:35:33 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Wed, 21 Nov 2012 17:35:33 +0000
Subject: [Twisted-Python] utf-8 support for ftp
Message-ID: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>

I know this has been asked before, I've found it in several trackers.

http://twistedmatrix.com/trac/ticket/5411
http://twistedmatrix.com/trac/ticket/4515
http://twistedmatrix.com/trac/ticket/5100

Some of these were created a while ago, some with patches. I wondered what
the current status was with regards to utf-8 in ftp? Is it currently
possible?

I'm trying to list a folder called 'Paul's Mac Pro', this gets returned as
'Paul?  s Mac Pro'. The client tries to list that folder, and the server
returns 'Paul??? ? s Mac Pro: No such file or directory.' I think the
client is interpreting the bytes that make up the unicode char as separate
ascii characters. (maybe a problem with the client? FileZilla 3.6.0.1)

This problem may be made worse by my implementation of IFTPShell, I can try
to make an example if this isn't the expected result.

I'm returning all names and paths back encoded in utf-8, but maybe the
problem is the client isn't expecting it because there's no FEAT command
(is the patch in 4515 ok to add?)

I just want to get an idea of how I can best go about getting this to work.
Will I need to build in support, or is it available in a newer version, or
by applying some patches?

Thanks very much!!

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121121/dfbdf04d/attachment.htm 

From poalman at gmail.com  Wed Nov 21 12:45:17 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Wed, 21 Nov 2012 17:45:17 +0000
Subject: [Twisted-Python] utf-8 support for ftp
In-Reply-To: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
References: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
Message-ID: <CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>

On 21 November 2012 17:35, Paul Wiseman <poalman at gmail.com> wrote:
>
> I know this has been asked before, I've found it in several trackers.
>
> http://twistedmatrix.com/trac/ticket/5411
> http://twistedmatrix.com/trac/ticket/4515
> http://twistedmatrix.com/trac/ticket/5100
>
> Some of these were created a while ago, some with patches. I wondered
what the current status was with regards to utf-8 in ftp? Is it currently
possible?
>
> I'm trying to list a folder called 'Paul's Mac Pro', this gets returned
as 'Paul? s Mac Pro'. The client tries to list that folder, and the server
returns 'Paul??? ? s Mac Pro: No such file or directory.' I think the
client is interpreting the bytes that make up the unicode char as separate
ascii characters. (maybe a problem with the client? FileZilla 3.6.0.1)
>
> This problem may be made worse by my implementation of IFTPShell, I can
try to make an example if this isn't the expected result.
>
> I'm returning all names and paths back encoded in utf-8, but maybe the
problem is the client isn't expecting it because there's no FEAT command
(is the patch in 4515 ok to add?)
>
> I just want to get an idea of how I can best go about getting this to
work. Will I need to build in support, or is it available in a newer
version, or by applying some patches?
>
> Thanks very much!!
>
> Paul

>>> a= "Paul?  s Mac Pro"  #This is what the client gets
>>>
>>> a
'Paul\xc3\xa2\xc2\x80\xc2\x99s Mac Pro'
>>> a.decode("utf-8")
u'Paul\xe2\x80\x99s Mac Pro' #utf-8 encoding in a unicode string???
>>>
>>> b= u"Paul's Mac Pro"
>>> b.encode("utf-8")
'Paul\xe2\x80\x99s Mac Pro'
>>>

So I'm not sure exactly what's happening here, but it's like path has been
encoded twice. Bit confused as to how this could be happening!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121121/fd1f84ab/attachment.htm 

From adi at roiban.ro  Wed Nov 21 13:11:17 2012
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 21 Nov 2012 20:11:17 +0200
Subject: [Twisted-Python] ftp passive mode returning internal IP
In-Reply-To: <CACgdh2jOnfMkVH+Yto7Lar+gxNZF_95LK5jdN6eYzQXdaAH+Uw@mail.gmail.com>
References: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
	<CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>
	<CACgdh2jOnfMkVH+Yto7Lar+gxNZF_95LK5jdN6eYzQXdaAH+Uw@mail.gmail.com>
Message-ID: <CAFycZ9fdx6CZH1Fr=X34GSr59o=DB6M6PiRPAjCmuXv+ETfsQg@mail.gmail.com>

On 21 November 2012 00:02, Paul Wiseman <poalman at gmail.com> wrote:
> On 20 November 2012 21:31, Adi Roiban <adi at roiban.ro> wrote:
>>
>> Hi,
>>
>> I don't think there is support for configuring the advertised IP address.
>> I don't know how EC2 ip forwarding works and how can you retrieve it.
>>
>> To use another IP address, in FTP.ftp_PASV(), look for the following
>> lines:
>>
>>         self.dtpPort = self.getDTPPort(self.dtpFactory)
>>
>>         host = self.transport.getHost().host
>>         port = self.dtpPort.getHost().port
>>
>> Just replace 'self.transport.getHost().host' with your required IP or
>> another method for retrieving the IP address.
>>
>> Cheers,
>> Adi
>>
>
> Cheers Adi, I've made a function that launches 'curl ifconfig.me' through
> subprocess, and I call that and save it when the server starts.

> Is this definitely the only place where I need to override the host?

I can not guarantee that, but I think it should be the only place.

> I'd rather wrap the transport object to be sure but twisted is still pretty
> magic to me and I'm struggling to find out where this ProtocolWrapper object
> is originating from.

ftp.FTPFactory.buildProtocol is where the protocol is created,
including the ProtocolWrapper.

----

I don't know how EC2 port forwarding works, but as long it does an one
to one port mapping, changing the IP address in PASV response should
do the job.

Cheers,
Adi

>>
>> On 20 November 2012 22:47, Paul Wiseman <poalman at gmail.com> wrote:
>> > This possibly has nothing to do with twisted, but maybe if not someone
>> > may
>> > be able to point me in the right direction!
>> >
>> > Basically I've set up a twisted FTP server on ec2, and when a client
>> > tries
>> > to enter passive mode I'm getting this:
>> >
>> > Response: 227 Entering Passive Mode (x,x,x,x,159,122).
>> > Status: Server sent passive reply with unroutable address. Using server
>> > address instead.
>> >
>> > the x.x.x.x is the boxes private IP, rather than its public IP.
>> >
>> > It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0
>> >
>> > Is there somehow I can change the way twisted is getting the IP, or is
>> > this
>> > an issue with the server set up itself?
>> >
>> > Any pointers or help on what to look/check for would be of huge help!
>> >
>> > Thanks!
>> >
>> > Paul
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>>
>>
>>
>> --
>> Adi Roiban
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Adi Roiban


From adi at roiban.ro  Thu Nov 22 06:35:28 2012
From: adi at roiban.ro (Adi Roiban)
Date: Thu, 22 Nov 2012 13:35:28 +0200
Subject: [Twisted-Python] utf-8 support for ftp
In-Reply-To: <CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>
References: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
	<CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>
Message-ID: <CAFycZ9fus22g47Fgxgt_6LDkaoKVPvUq4HEg486XW06H2_NGyg@mail.gmail.com>

On 21 November 2012 19:45, Paul Wiseman <poalman at gmail.com> wrote:
> On 21 November 2012 17:35, Paul Wiseman <poalman at gmail.com> wrote:
>>
>> I know this has been asked before, I've found it in several trackers.
>>
>> http://twistedmatrix.com/trac/ticket/5411
>> http://twistedmatrix.com/trac/ticket/4515
>> http://twistedmatrix.com/trac/ticket/5100
>>
>> Some of these were created a while ago, some with patches. I wondered what
>> the current status was with regards to utf-8 in ftp? Is it currently
>> possible?
>>
>> I'm trying to list a folder called 'Paul?s Mac Pro', this gets returned as
>> 'Paul? s Mac Pro'. The client tries to list that folder, and the server
>> returns 'Paul??? ? s Mac Pro: No such file or directory.' I think the client
>> is interpreting the bytes that make up the unicode char as separate ascii
>> characters. (maybe a problem with the client? FileZilla 3.6.0.1)
>>
>> This problem may be made worse by my implementation of IFTPShell, I can
>> try to make an example if this isn't the expected result.
>>
>> I'm returning all names and paths back encoded in utf-8, but maybe the
>> problem is the client isn't expecting it because there's no FEAT command (is
>> the patch in 4515 ok to add?)
>>
>> I just want to get an idea of how I can best go about getting this to
>> work. Will I need to build in support, or is it available in a newer
>> version, or by applying some patches?
>>
>> Thanks very much!!
>>
>> Paul

The patch from #4515 does little to provide a functional UTF-8 FTP
implementation.
It is there only to help advertise future implementation of UTF-8 support.

Thanks for reminding about #5411 . I have submitted a patch for review
together with required tests.

I have a few more FTP ticket in work/waiting for review. As soon as
they are done, I will look at UTF-8 support.

----

Patch #4515 is already in trunk, and together with patch for #5411 it
should be a good start for UTF-8 support.

Ticket #5100 is mainly about the default IFTPShell implementation, but
if you have your own IFTPShell implementation just make sure it
accepts input as str encoded utf-8 and that it output str encoded
utf-8

Cheers,

-- 
Adi Roiban


From poalman at gmail.com  Thu Nov 22 12:15:01 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 22 Nov 2012 17:15:01 +0000
Subject: [Twisted-Python] utf-8 support for ftp
In-Reply-To: <CAFycZ9fus22g47Fgxgt_6LDkaoKVPvUq4HEg486XW06H2_NGyg@mail.gmail.com>
References: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
	<CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>
	<CAFycZ9fus22g47Fgxgt_6LDkaoKVPvUq4HEg486XW06H2_NGyg@mail.gmail.com>
Message-ID: <CACgdh2gD5feDgFS7-yqeN-UMi1CJEvPzq2pSu=8KyMh4N=ANgg@mail.gmail.com>

On 22 November 2012 11:35, Adi Roiban <adi at roiban.ro> wrote:

> On 21 November 2012 19:45, Paul Wiseman <poalman at gmail.com> wrote:
> > On 21 November 2012 17:35, Paul Wiseman <poalman at gmail.com> wrote:
> >>
> >> I know this has been asked before, I've found it in several trackers.
> >>
> >> http://twistedmatrix.com/trac/ticket/5411
> >> http://twistedmatrix.com/trac/ticket/4515
> >> http://twistedmatrix.com/trac/ticket/5100
> >>
> >> Some of these were created a while ago, some with patches. I wondered
> what
> >> the current status was with regards to utf-8 in ftp? Is it currently
> >> possible?
> >>
> >> I'm trying to list a folder called 'Paul?s Mac Pro', this gets returned
> as
> >> 'Paul? s Mac Pro'. The client tries to list that folder, and the server
> >> returns 'Paul??? ? s Mac Pro: No such file or directory.' I think the
> client
> >> is interpreting the bytes that make up the unicode char as separate
> ascii
> >> characters. (maybe a problem with the client? FileZilla 3.6.0.1)
> >>
> >> This problem may be made worse by my implementation of IFTPShell, I can
> >> try to make an example if this isn't the expected result.
> >>
> >> I'm returning all names and paths back encoded in utf-8, but maybe the
> >> problem is the client isn't expecting it because there's no FEAT
> command (is
> >> the patch in 4515 ok to add?)
> >>
> >> I just want to get an idea of how I can best go about getting this to
> >> work. Will I need to build in support, or is it available in a newer
> >> version, or by applying some patches?
> >>
> >> Thanks very much!!
> >>
> >> Paul
>
> The patch from #4515 does little to provide a functional UTF-8 FTP
> implementation.
> It is there only to help advertise future implementation of UTF-8 support.
>
> Thanks for reminding about #5411 . I have submitted a patch for review
> together with required tests.
>
> I have a few more FTP ticket in work/waiting for review. As soon as
> they are done, I will look at UTF-8 support.
>
>
Awesome- sounds good! I'll keep an eye out for it! :)


> ----
>
> Patch #4515 is already in trunk, and together with patch for #5411 it
> should be a good start for UTF-8 support.
>
> Ticket #5100 is mainly about the default IFTPShell implementation, but
> if you have your own IFTPShell implementation just make sure it
> accepts input as str encoded utf-8 and that it output str encoded
> utf-8
>

My IFPShell does this, I have crudely added ftp_FEAT and ftp_OPT to a
subclass of FTP which returns UTF8 in the list of features and responds
with CMD_OK for "UTF8 ON" OPT. Which will hopefully get me by until there
is support.

I'd like to help add support, but I'm not sure how you'd do it. The FTP
protocol needs to know what to return if a client asks UTF8 ON in OPT, but
it's up to the shell which needs to make sure it complies with this option
and return things in the right encoding? unless everything is returned in
unicode and the FTP protocol encodes it if utf8 is on, or throws an error
if anything is outside an ascii range.

but there are certain parts of it sound quite tricky to get right:

   "Prior to transmitting response code 200 in response to the OPTS UTF-8

   command, the Server-FTP must not transmit UTF-8 encoded pathnames and
   should not accept them on commands: the Server-FTP should transmit
   either response code 501 or 553 in reply to any command which
   includes a pathname outside the range of 7-bit ASCII; and the Server-
   FTP should transmit response code 550 in reply to any command to
   which the server would otherwise have sent a UTF-8 encoded pathname."

     http://tools.ietf.org/html/draft-ietf-ftpext-utf-8-option-00#page-6



> Cheers,
>
> --
> Adi Roiban
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121122/1a9798b2/attachment.htm 

From exarkun at twistedmatrix.com  Sun Nov 25 00:05:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Nov 2012 05:05:24 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1353819924.09.1920233987@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121125/5aece506/attachment.htm 

From hs at ox.cx  Tue Nov 27 04:16:35 2012
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 27 Nov 2012 10:16:35 +0100
Subject: [Twisted-Python] Making ConnectionPool not pool
Message-ID: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>

Hi,

I have a really bad time with the combination of a low-volume service  and adbapi.ConnectionPool, pyodbc, FreeTDS and Sybase.

Basically my connections just time out and fail in weird, generic ways like:

Error: ('01000', '[01000] [FreeTDS][SQL Server]Unexpected EOF from the server (20017) (SQLEndTran)')

(but in many others too, there is no real pattern)

In my desperation, I?m employing for-loops for the SQL queries now. :(

Since there isn?t much traffic (yet) I would like to just make ConnectionPool close the connections and re-open fresh ones, as soon as they are necessary.

Is there some straight-forward way to do that? Or any better approach I?ve overlooked?

TIA,
Hynek

From itamar at futurefoundries.com  Tue Nov 27 06:38:53 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Tue, 27 Nov 2012 06:38:53 -0500
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
Message-ID: <CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>

On Tue, Nov 27, 2012 at 4:16 AM, Hynek Schlawack <hs at ox.cx> wrote:

> Hi,
>
> I have a really bad time with the combination of a low-volume service  and
> adbapi.ConnectionPool, pyodbc, FreeTDS and Sybase.
>
> Basically my connections just time out and fail in weird, generic ways
> like:
>
> Error: ('01000', '[01000] [FreeTDS][SQL Server]Unexpected EOF from the
> server (20017) (SQLEndTran)')
>
> (but in many others too, there is no real pattern)
>

Have you tried enabling reconnects (cp_reconnect=True)? If "select 1"
doesn't work with your database you may also have to pass in custom
cp_good_sql.


> In my desperation, I?m employing for-loops for the SQL queries now. :(
>
> Since there isn?t much traffic (yet) I would like to just make
> ConnectionPool close the connections and re-open fresh ones, as soon as
> they are necessary.
>
> Is there some straight-forward way to do that? Or any better approach I?ve
> overlooked?
>

Don't use ConnectionPool at all. Just have a function that does the SQL
connect etc usually normal DB-API, and call it with
twisted.internet.threads.deferToThread:

 def dbTxn(x):
    conn = db.connect(...)
    cursor = conn.cursor()
    cursor.execute()
    result = cursor.fetchall()
    conn.close()
    return result

deferredResult = deferToThread(dbtxn, argForX)

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121127/0db2c6d7/attachment.htm 

From hs at ox.cx  Tue Nov 27 07:49:11 2012
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 27 Nov 2012 13:49:11 +0100
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
Message-ID: <76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>

> I have a really bad time with the combination of a low-volume service  and adbapi.ConnectionPool, pyodbc, FreeTDS and Sybase.
> 
> Basically my connections just time out and fail in weird, generic ways like:
> 
> Error: ('01000', '[01000] [FreeTDS][SQL Server]Unexpected EOF from the server (20017) (SQLEndTran)')
> 
> (but in many others too, there is no real pattern)
> Have you tried enabling reconnects (cp_reconnect=True)? If "select 1" doesn't work with your database you may also have to pass in custom cp_good_sql.

Yep, and the connections *do* heal after dying. I don't have to restart twistd, it just takes a few failed requests to warm up again.

I tried to do a for loop like:

        succ = False
        for _ in range(self.dbpool.max + 1):
            try:
                yield self.dbpool.runOperation(self.dbpool.good_sql)
                succ = True
            except Exception:
                pass

        if not succ:
            raise pyodbc.Error(b'Found no healthy connection.')

?for new connections, but that helped only a bit. I presume once it finds a working connection, it keeps using it. But I still had failure within the session later.

> In my desperation, I?m employing for-loops for the SQL queries now. :(
> 
> Since there isn?t much traffic (yet) I would like to just make ConnectionPool close the connections and re-open fresh ones, as soon as they are necessary.
> 
> Is there some straight-forward way to do that? Or any better approach I?ve overlooked?
> Don't use ConnectionPool at all. Just have a function that does the SQL connect etc usually normal DB-API, and call it with twisted.internet.threads.deferToThread:
> 
>  def dbTxn(x):
>     conn = db.connect(...)
>     cursor = conn.cursor()
>     cursor.execute()
>     result = cursor.fetchall()
>     conn.close()
>     return result
> 
> deferredResult = deferToThread(dbtxn, argForX)

Sounds like a solid backup plan, thanks!

The only reason I?d prefer to stay with pooling is that I very much expect the traffic to rise and wouldn?t really want to change away and go back later. :(

Cheers,
Hynek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121127/67ad1260/attachment.htm 

From exarkun at twistedmatrix.com  Tue Nov 27 08:39:07 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 27 Nov 2012 13:39:07 -0000
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
	<76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
Message-ID: <20121127133907.3980.357279128.divmod.xquotient.22@localhost6.localdomain6>

On 12:49 pm, hs at ox.cx wrote:
>
>The only reason I?d prefer to stay with pooling is that I very much 
>expect the traffic to rise and wouldn?t really want to change away and 
>go back later. :(

Then I'd strongly recommend taking a look at twext.enterprise:

http://trac.calendarserver.org/browser/CalendarServer/trunk/twext/enterprise

There's a good chance this will become part of Twisted as a replacement 
for twisted.enterprise at some point.  So any experience you get with it 
now should serve you well in the future.  Plus, if you find it also 
can't deal with your situation, then it'd be nice if we knew that now. 
:)

Jean-Paul


From p.mayers at imperial.ac.uk  Tue Nov 27 08:41:54 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 27 Nov 2012 13:41:54 +0000
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
	<76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
Message-ID: <50B4C322.6060209@imperial.ac.uk>

On 27/11/12 12:49, Hynek Schlawack wrote:

> Yep, and the connections *do* heal after dying. I don't have to restart
> twistd, it just takes a few failed requests to warm up again.

Yes - one attempt per thread in the pool.

It is a pain. But as per recent discussions on the list, there's no 
consensus about how to handle this.


From hoooooosety at gmail.com  Tue Nov 27 09:04:13 2012
From: hoooooosety at gmail.com (holsety huang)
Date: Tue, 27 Nov 2012 22:04:13 +0800
Subject: [Twisted-Python] spawnProcess and kill the child process.
Message-ID: <CAL+MxDFC_cV0orLQjjS7=-x7j_5ysDOU+XGeMMQDdxZXzTLsBA@mail.gmail.com>

hi, all

I start a process using spawnProcess and want to kill when my certain
Factory stops.

something I wrote like these


----------

p = SomeProtocol(ProcessProtocol)

reactor.spawnProcess(p, 'twistd', ['twistd', '-y', 'anotherMain.py'], {})

----------

class Factory(ServerFactory):
...

def StopFactory(self):
 # which is the p above
 p.transport.signalProcess("KILL")

I thought the subprocess will be killed which is not.

I tried using p.transport.signalProcess("KILL") some other place, and it
works.

What's wrong with my code? Thanks!

P.S, which is the best way to shut down a twistd, I send the TERM to it
now. It just work fine.


Regards, Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121127/79d196da/attachment.htm 

From hs at ox.cx  Tue Nov 27 09:59:39 2012
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 27 Nov 2012 15:59:39 +0100
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <20121127133907.3980.357279128.divmod.xquotient.22@localhost6.localdomain6>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
	<76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
	<20121127133907.3980.357279128.divmod.xquotient.22@localhost6.localdomain6>
Message-ID: <A6F86628-7D82-4999-9ECE-65DC908C9B59@ox.cx>


Am 27.11.2012 um 14:39 schrieb exarkun at twistedmatrix.com:

>> The only reason I?d prefer to stay with pooling is that I very much 
>> expect the traffic to rise and wouldn?t really want to change away and 
>> go back later. :(
> Then I'd strongly recommend taking a look at twext.enterprise:
> 
> http://trac.calendarserver.org/browser/CalendarServer/trunk/twext/enterprise
> 
> There's a good chance this will become part of Twisted as a replacement 
> for twisted.enterprise at some point.  So any experience you get with it 
> now should serve you well in the future.  Plus, if you find it also 
> can't deal with your situation, then it'd be nice if we knew that now. 
> :)

Gladly! Do I see it correctly, that the current canonical way to use it, is to svn co it?

From hoooooosety at gmail.com  Tue Nov 27 08:59:31 2012
From: hoooooosety at gmail.com (=?GB2312?B?u8Yg6fPD9w==?=)
Date: Tue, 27 Nov 2012 21:59:31 +0800
Subject: [Twisted-Python] spawnProcess and when to kill
Message-ID: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>

hi, all

I start a process using spawnProcess and want to kill when my certain Factory stops.

something I wrote like these


----------

p = SomeProtocol(ProcessProtocol)

reactor.spawnProcess(p, 'twistd', ['twistd', '-y', 'anotherMain.py'], {})

----------

class Factory(ServerFactory):
...

	def StopFactory(self):
		# which is the p above
		p.transport.signalProcess("KILL")

I thought the subprocess will be killed which is not.


What's wrong with my code? Thanks!


Regards, Huang

? ??
mail: hoooooosety at gmail.com
phone: 18620129285

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121127/fdb0ba48/attachment.htm 

From exarkun at twistedmatrix.com  Tue Nov 27 20:52:35 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 28 Nov 2012 01:52:35 -0000
Subject: [Twisted-Python] spawnProcess and when to kill
In-Reply-To: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
References: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
Message-ID: <20121128015235.3980.567482501.divmod.xquotient.88@localhost6.localdomain6>

On 27 Nov, 01:59 pm, hoooooosety at gmail.com wrote:
>hi, all
>
>I start a process using spawnProcess and want to kill when my certain 
>Factory stops.
>
>something I wrote like these

Hi,

Please don't double-post and please don't reply to another message when 
starting a new topic.

Thanks.

Jean-Paul


From hoooooosety at gmail.com  Tue Nov 27 20:57:45 2012
From: hoooooosety at gmail.com (=?GB2312?B?u8Yg6fPD9w==?=)
Date: Wed, 28 Nov 2012 09:57:45 +0800
Subject: [Twisted-Python] spawnProcess and when to kill
In-Reply-To: <20121128015235.3980.567482501.divmod.xquotient.88@localhost6.localdomain6>
References: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
	<20121128015235.3980.567482501.divmod.xquotient.88@localhost6.localdomain6>
Message-ID: <31966440-582D-4900-BFAE-1E6834B58090@gmail.com>

hi, JP

I post the same question on stackoverflow, and my network has some problem yesterday, so I don't know if I send the email
success or not.

Please accept my pologize.
? ??
mail: hoooooosety at gmail.com
phone: 18620129285

? 2012-11-28???9:52?exarkun at twistedmatrix.com ???

> On 27 Nov, 01:59 pm, hoooooosety at gmail.com wrote:
>> hi, all
>> 
>> I start a process using spawnProcess and want to kill when my certain 
>> Factory stops.
>> 
>> something I wrote like these
> 
> Hi,
> 
> Please don't double-post and please don't reply to another message when 
> starting a new topic.
> 
> Thanks.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From itamar at futurefoundries.com  Wed Nov 28 02:04:29 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 28 Nov 2012 02:04:29 -0500
Subject: [Twisted-Python] spawnProcess and when to kill
In-Reply-To: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
References: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
Message-ID: <CAOp9P3rHT1QeTO8BQiUWU1J5v5sN3Bmpd5dpFetSh+qk_fz33A@mail.gmail.com>

On Tue, Nov 27, 2012 at 8:59 AM, ? ?? <hoooooosety at gmail.com> wrote:

>
> class Factory(ServerFactory):
> ...
>
> def StopFactory(self):
>  # which is the p above
>  p.transport.signalProcess("KILL")
>
> I thought the subprocess will be killed which is not.
>
>
> What's wrong with my code? Thanks!
>

Perhaps StopFactory is not being called? Are you calling it? If not, and
you expected the reactor to call it when you stopped listening, it should
be stopFactory, rather than StopFactory.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121128/c5987b31/attachment.htm 

From raphael at uaca.com  Thu Nov 29 10:43:49 2012
From: raphael at uaca.com (Raphael Shu)
Date: Fri, 30 Nov 2012 00:43:49 +0900
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
	<582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
Message-ID: <CAMf6tMndyX89TMLBce2ueXaQHVAUJnGpath+zaCCvZFia1egzg@mail.gmail.com>

Err... how could I create a page on our wiki to describe usage and
dependencies for twistedchecker?

On Tue, Nov 20, 2012 at 1:46 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <
> itamar at futurefoundries.com> wrote:
>
>
>
> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
>
>> Hi,
>>
>> What is the status of Twisted Checker?
>>
>> I could not find anything related to TwistedChecker on the website:
>> http://twistedmatrix.com/trac/search?q=twistedchecker
>>
>> ----
>>
>> Is there a bug report or web page discussing the
>> requirements/specifications for a Twisted Checker?
>>
>
> http://launchpad.net/twistedchecker has a bunch of tickets, and the code.
>
>
> It seems like the existence of this tool should be documented somewhere on
> our wiki (ReviewProcess, perhaps) as well as what to do with its output?
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
 *Raphael Shu , UACA 2012*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121130/8a1e2a7a/attachment.htm 

From glyph at twistedmatrix.com  Thu Nov 29 11:55:19 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 29 Nov 2012 11:55:19 -0500
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAMf6tMndyX89TMLBce2ueXaQHVAUJnGpath+zaCCvZFia1egzg@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
	<582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
	<CAMf6tMndyX89TMLBce2ueXaQHVAUJnGpath+zaCCvZFia1egzg@mail.gmail.com>
Message-ID: <717CC007-19B7-4A59-B026-57032A3F0DDD@twistedmatrix.com>

On Nov 29, 2012, at 10:43 AM, Raphael Shu <raphael at uaca.com> wrote:

> On Tue, Nov 20, 2012 at 1:46 PM, Glyph <glyph at twistedmatrix.com> wrote:
> On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <itamar at futurefoundries.com> wrote:
>> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
>> Hi,
>> 
>> What is the status of Twisted Checker?
>> 
>> I could not find anything related to TwistedChecker on the website:
>> http://twistedmatrix.com/trac/search?q=twistedchecker
>> 
>> ----
>> 
>> Is there a bug report or web page discussing the
>> requirements/specifications for a Twisted Checker?
>> 
>> http://launchpad.net/twistedchecker has a bunch of tickets, and the code. 
> 
> It seems like the existence of this tool should be documented somewhere on our wiki (ReviewProcess, perhaps) as well as what to do with its output?
> 
> -glyph
> 
> Err... how could I create a page on our wiki to describe usage and dependencies for twistedchecker?

You do need wiki-edit permission to do this.  I have just granted it to you - assuming I properly remembered that your trac handle is "zomux".  Now you can simply log in to twistedmatrix.com, and go to, for example, <http://twistedmatrix.com/trac/wiki/TwistedChecker> and click the "create this page" button.  Most other pages should have a button at the bottom now saying "Edit this page".

Thank you, and please let us know when you have written something!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121129/810477cd/attachment.htm 

From rodrigc at crodrigues.org  Thu Nov 29 15:08:39 2012
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Thu, 29 Nov 2012 12:08:39 -0800
Subject: [Twisted-Python] Download instructions for twisted and ActiveState
	Python
Message-ID: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>

Hi,

At some of the Twisted Sprints in San Francisco,
I found that on my Windows laptop, it was
easy to set things up Twisted quickly by using the
ActiveState Python package manager (pypm).

I wrote some notes for doing this at:
http://home.comcast.net/~rodrigc/python/twisted_install.html

Rather than keep that info on my own web page, I thought
it would be nice to contribute the information back to the Twisted wiki.
This would not be the official way of installing Twisted on
Windows, but would be some helpful information for
an alternative way to install things on Windows.

Since I do not have wiki edit permissions, I made a patch
to http://twistedmatrix.com/trac/wiki/Downloads .
If someone could help get this info on the wiki that would
be great.

-- 
Craig Rodrigues
rodrigc at crodrigues.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121129/fd8a98d5/attachment.htm 
-------------- next part --------------
--- Downloads.html.orig	2012-11-24 18:49:35.000000000 -0800
+++ Downloads.html	2012-11-24 20:01:20.000000000 -0800
@@ -101,7 +101,27 @@
 </li><li><a class="ext-link" href="http://pypi.python.org/pypi/zope.interface#download"><span class="icon">&nbsp;</span>Zope.Interface</a> (required)
 </li><li><a class="ext-link" href="http://twistedmatrix.com/Releases/Dependencies/Win/pycrypto-2.0.1.win32-py2.5.exe"><span class="icon">&nbsp;</span>PyCrypto 2.0.1 for Python 2.5</a> (needed for Conch)
 </li><li><a class="ext-link" href="http://pypi.python.org/pypi/pyOpenSSL"><span class="icon">&nbsp;</span>PyOpenSSL</a> (needed for SSL)
-</li></ul><h2 id="MacOSX">Mac OS X<a title="Link to this section" href="#MacOSX" class="anchor"> ?</a></h2>
+</li></ul>
+<h2 id="Windows - ActivePython">Windows - ActivePython<a title="Link to this section" href="#Windows_ActivePython" class="anchor"> ?</a></h2>
+<p>
+Alternatively, Windows users may wish to install Twisted by using the
+<a class="ext-link" href="http://www.activestate.com/activepython">ActivePython distribution of Python</a>,
+which includes the 
+<a class="ext-link" href="http://docs.activestate.com/activepython/2.7/pypm.html">pypm</a>
+package manager.
+</p>
+<ol>
+<li>Download the ActivePython distribution.</li>
+<li>Open a Windows Command Prompt, and run this command:  <b>pypm install twisted</b></li>
+<li>Verify that Twisted was installed with this command: <b>pypm ls</b></li>
+</ol>
+<p>
+Additional help for pypm is available by running: <b>pypm help</b> and by
+reading the <a class="ext-link" href="http://docs.activestate.com/activepython/2.7/pypm.html">PyPM Tutorial</a>.
+Many other Python packages which are listed at the <a class="ext-link" href="http://code.activestate.com/pypm/">PyPM Index</a>
+can be installed with pypm.
+</p>
+<h2 id="MacOSX">Mac OS X<a title="Link to this section" href="#MacOSX" class="anchor"> ?</a></h2>
 <p>
 Twisted is no longer making a .dmg which creates a system installation 
 for OS X because OS X versions 10.5 and greater ship with Twisted 
@@ -223,4 +243,4 @@
         </div>
     </div>
   
-</body></html>
\ No newline at end of file
+</body></html>

From rodrigc at crodrigues.org  Thu Nov 29 15:27:47 2012
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Thu, 29 Nov 2012 12:27:47 -0800
Subject: [Twisted-Python] Free Coursera course on network software design
	patterns
Message-ID: <CAG=rPVdEKk0qBfu3MePhVPOA2E4mMf=X-mDLTCTdgvBeAHmVNg@mail.gmail.com>

Hi,

I saw a new free course being offered by Coursera and
thought it might be interesting to Twisted developers.

Professor Douglas C. Schmidt of Vanderbilt University
is teaching a free Coursera course over the Internet for 6 weeks:

"Pattern-Oriented Software Architectures for Concurrent
 and Networked Software"
https://www.coursera.org/course/posa

Prof. Schmidt has been working in distributed systems
and middleware for quite a while, and has written many
papers in this area, including some papers in the 1990's on the Reactor and
Proactor patterns:

http://www.cs.wustl.edu/~schmidt/PDF/reactor-siemens.pdf
http://www.cs.wustl.edu/~schmidt/PDF/proactor.pdf

Prof. Schmidt also implemented these patterns in the
ACE C++ framework.  As someone who in the past has worked
on ACE, I see a lot of similar ideas and concepts
in Twisted.  However, working with Python and Twisted is much
more fun than C++. :)

It might be interesting to follow along the Coursera course, and
implement the problem sets in Twisted.

-- 
Craig Rodrigues
rodrigc at crodrigues.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121129/b8fbebd2/attachment.htm 

From glyph at twistedmatrix.com  Thu Nov 29 15:45:02 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 29 Nov 2012 15:45:02 -0500
Subject: [Twisted-Python] Download instructions for twisted and
	ActiveState Python
In-Reply-To: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
References: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
Message-ID: <E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>


On Nov 29, 2012, at 3:08 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> Hi,
> 
> At some of the Twisted Sprints in San Francisco,
> I found that on my Windows laptop, it was
> easy to set things up Twisted quickly by using the
> ActiveState Python package manager (pypm).
> 
> I wrote some notes for doing this at:
> http://home.comcast.net/~rodrigc/python/twisted_install.html
> 
> Rather than keep that info on my own web page, I thought
> it would be nice to contribute the information back to the Twisted wiki.
> This would not be the official way of installing Twisted on
> Windows, but would be some helpful information for
> an alternative way to install things on Windows.
> 
> Since I do not have wiki edit permissions, I made a patch
> to http://twistedmatrix.com/trac/wiki/Downloads .
> If someone could help get this info on the wiki that would
> be great.

Thanks for doing this; but, we mostly have wiki edit permissions just to keep out the spammers.  If you'd like to edit the wiki, just ask!  (with your trac username).

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121129/0de330a1/attachment.htm 

From glyph at twistedmatrix.com  Thu Nov 29 15:49:49 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 29 Nov 2012 15:49:49 -0500
Subject: [Twisted-Python] Free Coursera course on network software
	design patterns
In-Reply-To: <CAG=rPVdEKk0qBfu3MePhVPOA2E4mMf=X-mDLTCTdgvBeAHmVNg@mail.gmail.com>
References: <CAG=rPVdEKk0qBfu3MePhVPOA2E4mMf=X-mDLTCTdgvBeAHmVNg@mail.gmail.com>
Message-ID: <AA199BE8-0EFC-43BF-9CC4-FA6FCFD90303@twistedmatrix.com>


On Nov 29, 2012, at 3:27 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> Prof. Schmidt has been working in distributed systems
> and middleware for quite a while, and has written many
> papers in this area, including some papers in the 1990's on the Reactor and Proactor patterns:

In the interest of giving credit where credit is due, I should say that I'm a big fan of Prof. Schmidt and I read both of those papers when first implementing Twisted.  They were very educational.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20121129/7c23c3b4/attachment.htm 

From kevin.horn at gmail.com  Thu Nov  1 09:56:17 2012
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 1 Nov 2012 10:56:17 -0500
Subject: [Twisted-Python] Create client in Server factory
In-Reply-To: <509192D9.4040408@imperial.ac.uk>
References: <201210311614.34673.gregoire.leroy@retenodus.net>
	<5090F42D.4050303@imperial.ac.uk>
	<CA+U=zK0YZ-CPmiJKPnH9YTes5BBuNt3AZCXm8h37xON=7yLyfA@mail.gmail.com>
	<509192D9.4040408@imperial.ac.uk>
Message-ID: <CA+U=zK1QGE22A0AD0Sr95ATdTC6pO7orWouzPK1t311OR-qkrw@mail.gmail.com>

On Wed, Oct 31, 2012 at 4:06 PM, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
> On 10/31/2012 02:31 PM, Kevin Horn wrote:
>
>> See also:
>> http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother
>>
>> That example only uses a single connection in place of your clients
>> A/B/C, but should be adaptable to your situation.
>>
>
> In fairness to the OP, he did say he'd seen that ;o)
>

Ah, so he did, Phil.  Sorry, Gregoire.

--
Kevin Horn



From exarkun at twistedmatrix.com  Thu Nov  1 16:03:31 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 01 Nov 2012 22:03:31 -0000
Subject: [Twisted-Python] deferToThread and reactor loop
In-Reply-To: <634914A010D0B943A035D226786325D433914E92BA@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D433914E92BA@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <20121101220331.4363.1308097384.divmod.xquotient.93@localhost6.localdomain6>

On 29 Oct, 05:58 pm, tobias.oberstein at tavendo.de wrote:
>Hi,
>
>I've got a question regarding
>
>deferToThread / runWithConnection
>
>I have a network server that accepts RPCs and forwards those to a 
>relational database calling stored procedures.
>
>The call of the stored procedures is happening via "runWithConnection" 
>.. that is on a background thread pool (since that DBs driver is 
>blocking).
>
>Now, when there is a large number of RPCs coming in roughly at once, 
>the latency of each call forwarded to the RDBMs increased into the 10's 
>of ms.
>
>I have created a self-contained test program without DB etc that I 
>think reproduces the "issue":
>
>https://github.com/oberstet/scratchbox/blob/master/python/twisted/threadpoollatency/test.py
>
>**************
>Am I correct that "deferToThread" does not immediately forward the call 
>to a background thread, but only the next time the reactor loop runs?
>**************

Hi Tobias,

Sorry, I haven't had a chance to read your minimal example in any 
detail.  However, I can direct you to the implementation of 
deferToThread:

http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L119

Notice the `self.q.put(o)`.  This matches up with the call to 
`self.q.get` in the same module:

http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L158

Together, these bits of source should demonstrate that there's no 
waiting for a reactor iteration before the work is enqueued.  The work 
goes into the Queue instance, and instantly any worker thread is free to 
grab it.

Jean-Paul



From poalman at gmail.com  Fri Nov  2 09:42:31 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 2 Nov 2012 15:42:31 +0000
Subject: [Twisted-Python] twisted thumbnail server
Message-ID: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>

I hope this will be an easy question for some of you guys :)

I'm trying to set up a simple server which will accept requests over GET to
create a thumbnail for an image, and server it back as the response.

The images are stored in two S3 buckets, the originals are in one bucket
(store), and the generated thumbnails are stored in another (thumb) as a
cache so that the work doesn't need to be repeated.

Currently I'm checking if the thumbnail already exists in the thumb bucket.
I'm redirecting the request if it is or if not I'm downloading the image
from store, generating the thumb using PIL, uploading the thumbnail to the
thumb bucket and then redirecting the request.

I'm very new to twisted and was wondering if anyone who is more experienced
would be able to take a look at what I have so far and let me know if
anything is wrong/not ideal/will cause problems etc. or just general style
pointers? The more critical the better, as I said I'm very new to this.

I've just chucked it up on github:
https://github.com/GP89/thumbs/blob/master/thumb.py

There's a definite memory leak right now which I believe is PIL, or
possibly StringIO objects not being disposed, hence all the random del
statements trying to cure it (unsuccessfully). Maybe there's something I'm
doing wrong in twisted that is causing things not to be cleaned up that I'm
not aware of as well.

I did try to use deferToThread, rather than my thread pool but the server
seemed to block up- I probably should have left it incase it was because I
was doing something obviously wrong. I think I'll make a branch quickly
with my deferToThread version.

Thanks very much for any time you can lend!

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121102/e8fa5d36/attachment-0001.html>

From _ at lvh.cc  Fri Nov  2 09:57:42 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 2 Nov 2012 16:57:42 +0100
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
Message-ID: <CAE_Hg6ZPU1cFYT0CXvXuktN64Y05hegzs-ShZFgCSsV5n+dSsA@mail.gmail.com>

Yeah, very big +1 to showing the deferToThread version. I feel bad even
trying to spot potential threading issues here... It could be because the
default thread pool isn't very large, but you're making many requests.

What functionality does boto have that txaws doesn't that you really need
here? Perhaps you can avoid blocking (and hence threads) at all.


On Fri, Nov 2, 2012 at 4:42 PM, Paul Wiseman <poalman at gmail.com> wrote:

> I hope this will be an easy question for some of you guys :)
>
> I'm trying to set up a simple server which will accept requests over GET
> to create a thumbnail for an image, and server it back as the response.
>
> The images are stored in two S3 buckets, the originals are in one bucket
> (store), and the generated thumbnails are stored in another (thumb) as a
> cache so that the work doesn't need to be repeated.
>
> Currently I'm checking if the thumbnail already exists in the thumb
> bucket. I'm redirecting the request if it is or if not I'm downloading the
> image from store, generating the thumb using PIL, uploading the thumbnail
> to the thumb bucket and then redirecting the request.
>
> I'm very new to twisted and was wondering if anyone who is more
> experienced would be able to take a look at what I have so far and let me
> know if anything is wrong/not ideal/will cause problems etc. or just
> general style pointers? The more critical the better, as I said I'm very
> new to this.
>
> I've just chucked it up on github:
> https://github.com/GP89/thumbs/blob/master/thumb.py
>
> There's a definite memory leak right now which I believe is PIL, or
> possibly StringIO objects not being disposed, hence all the random del
> statements trying to cure it (unsuccessfully). Maybe there's something I'm
> doing wrong in twisted that is causing things not to be cleaned up that I'm
> not aware of as well.
>
> I did try to use deferToThread, rather than my thread pool but the server
> seemed to block up- I probably should have left it incase it was because I
> was doing something obviously wrong. I think I'll make a branch quickly
> with my deferToThread version.
>
> Thanks very much for any time you can lend!
>
> Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121102/d9cb74f8/attachment.html>

From p.mayers at imperial.ac.uk  Fri Nov  2 10:13:37 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Fri, 02 Nov 2012 16:13:37 +0000
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
Message-ID: <5093F131.8070000@imperial.ac.uk>

On 02/11/12 15:42, Paul Wiseman wrote:
> I hope this will be an easy question for some of you guys :)
>
> I'm trying to set up a simple server which will accept requests over GET
> to create a thumbnail for an image, and server it back as the response.
>
> The images are stored in two S3 buckets, the originals are in one bucket
> (store), and the generated thumbnails are stored in another (thumb) as a
> cache so that the work doesn't need to be repeated.
>
> Currently I'm checking if the thumbnail already exists in the thumb
> bucket. I'm redirecting the request if it is or if not I'm downloading
> the image from store, generating the thumb using PIL, uploading the
> thumbnail to the thumb bucket and then redirecting the request.

This isn't a criticism, but I trust you are aware of the implications 
and problems of doing work in threads?

FWIW we usually use a child process pool for intensive tasks; this has 
the advantage you can sensibly kill a long-lived child (just kill the 
process) and you side-step the lack of concurrency in the python 
interpreter.

[In this case, I'd just start up a bunch of python interpreters using a 
ProcessProtocol and use a simple request/response command protocol on 
stdin/stdout - the child interpreters can be non-Twisted processes able 
to block on PIL operations]

If you really do want threads, is there any reason to not use the 
Twisted threadpool stuff?

It's often a personal/style choice, but I don't use StringIO for large 
volumes of data personally (not Twisted-specific).

I'm sure someone will mention tests ;o)



From tobias.oberstein at tavendo.de  Fri Nov  2 10:15:33 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Fri, 2 Nov 2012 09:15:33 -0700
Subject: [Twisted-Python] deferToThread and reactor loop
In-Reply-To: <20121101220331.4363.1308097384.divmod.xquotient.93@localhost6.localdomain6>
References: <634914A010D0B943A035D226786325D433914E92BA@EXVMBX020-12.exch020.serverdata.net>
	<20121101220331.4363.1308097384.divmod.xquotient.93@localhost6.localdomain6>
Message-ID: <634914A010D0B943A035D226786325D4339248F7EE@EXVMBX020-12.exch020.serverdata.net>

Hi Jean-Paul,

> >**************
> >Am I correct that "deferToThread" does not immediately forward the call
> >to a background thread, but only the next time the reactor loop runs?
> >**************

> However, I can direct you to the implementation of
> deferToThread:
> 
> http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L1
> 19
> 
> Notice the `self.q.put(o)`.  This matches up with the call to `self.q.get` in the
> same module:
> 
> http://twistedmatrix.com/trac/browser/trunk/twisted/python/threadpool.py#L1
> 58
> 
> Together, these bits of source should demonstrate that there's no waiting for a
> reactor iteration before the work is enqueued.  The work goes into the Queue
> instance, and instantly any worker thread is free to grab it.

Ok, I see.

There might be a mutex or something in the Queue implementation (if it's not
a lockless queue implementation) or the GIL might be involved.

I have no convinving explanation for the behavior I see (which also seems to be
platform agnostic).

Another wild guess (besides above) I have: maybe the OS does not immediately
schedule other process threads for execution if the current thread (the one
pushing to the Queue) is very busy ..

Thanks,
Tobias




From poalman at gmail.com  Fri Nov  2 10:32:42 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 2 Nov 2012 16:32:42 +0000
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <CAE_Hg6ZPU1cFYT0CXvXuktN64Y05hegzs-ShZFgCSsV5n+dSsA@mail.gmail.com>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
	<CAE_Hg6ZPU1cFYT0CXvXuktN64Y05hegzs-ShZFgCSsV5n+dSsA@mail.gmail.com>
Message-ID: <CACgdh2jqt_4xv25P4QTBX6341mC5Dm-tdRE=YjrL8LQ5vL7WKQ@mail.gmail.com>

On 2 November 2012 15:57, Laurens Van Houtven <_ at lvh.cc> wrote:

> Yeah, very big +1 to showing the deferToThread version. I feel bad even
> trying to spot potential threading issues here... It could be because the
> default thread pool isn't very large, but you're making many requests.
>
> What functionality does boto have that txaws doesn't that you really need
> here? Perhaps you can avoid blocking (and hence threads) at all.
>
>
This is the deferToThread version:
https://github.com/GP89/thumbs/blob/defertothread/thumb.py

The thread pool size was 60, pretty arbitrary but (ignoring the memory
leaks) it should only have at most n images in memory at once where n is
the number of threads. If there's more requests that it can process they'll
just build up in the queue and not cause memory to fill up with downloaded
images (this was an initial problem I had).

My understanding is that txaws would only work in a twisted way, but as the
work in the thread has blocking code (the PIL bits) I just used boto as I'm
more familiar with it. I'm not sure how I'd use txaws in a thread or what
benefit that would have?

I'd love to avoid blocking and keep it all in 1 thread, but I don't know of
anyway to do the image resizing/rotation etc. without blocking.


>
> On Fri, Nov 2, 2012 at 4:42 PM, Paul Wiseman <poalman at gmail.com> wrote:
>
>> I hope this will be an easy question for some of you guys :)
>>
>> I'm trying to set up a simple server which will accept requests over GET
>> to create a thumbnail for an image, and server it back as the response.
>>
>> The images are stored in two S3 buckets, the originals are in one bucket
>> (store), and the generated thumbnails are stored in another (thumb) as a
>> cache so that the work doesn't need to be repeated.
>>
>> Currently I'm checking if the thumbnail already exists in the thumb
>> bucket. I'm redirecting the request if it is or if not I'm downloading the
>> image from store, generating the thumb using PIL, uploading the thumbnail
>> to the thumb bucket and then redirecting the request.
>>
>> I'm very new to twisted and was wondering if anyone who is more
>> experienced would be able to take a look at what I have so far and let me
>> know if anything is wrong/not ideal/will cause problems etc. or just
>> general style pointers? The more critical the better, as I said I'm very
>> new to this.
>>
>> I've just chucked it up on github:
>> https://github.com/GP89/thumbs/blob/master/thumb.py
>>
>> There's a definite memory leak right now which I believe is PIL, or
>> possibly StringIO objects not being disposed, hence all the random del
>> statements trying to cure it (unsuccessfully). Maybe there's something I'm
>> doing wrong in twisted that is causing things not to be cleaned up that I'm
>> not aware of as well.
>>
>> I did try to use deferToThread, rather than my thread pool but the server
>> seemed to block up- I probably should have left it incase it was because I
>> was doing something obviously wrong. I think I'll make a branch quickly
>> with my deferToThread version.
>>
>> Thanks very much for any time you can lend!
>>
>> Paul
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
> --
> cheers
> lvh
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121102/245957f1/attachment-0001.html>

From poalman at gmail.com  Fri Nov  2 10:50:03 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Fri, 2 Nov 2012 16:50:03 +0000
Subject: [Twisted-Python] twisted thumbnail server
In-Reply-To: <5093F131.8070000@imperial.ac.uk>
References: <CACgdh2iR+fiQqb0iERB5A=Ukp=0OuK4gMsSY2d07Cif8xkOhqg@mail.gmail.com>
	<5093F131.8070000@imperial.ac.uk>
Message-ID: <CACgdh2g_B1-b6Cz8dwgR1A8CUAHoSL14TJEX2vXTwTFuW8uRKA@mail.gmail.com>

On 2 November 2012 16:13, Phil Mayers <p.mayers at imperial.ac.uk> wrote:

> On 02/11/12 15:42, Paul Wiseman wrote:
> > I hope this will be an easy question for some of you guys :)
> >
> > I'm trying to set up a simple server which will accept requests over GET
> > to create a thumbnail for an image, and server it back as the response.
> >
> > The images are stored in two S3 buckets, the originals are in one bucket
> > (store), and the generated thumbnails are stored in another (thumb) as a
> > cache so that the work doesn't need to be repeated.
> >
> > Currently I'm checking if the thumbnail already exists in the thumb
> > bucket. I'm redirecting the request if it is or if not I'm downloading
> > the image from store, generating the thumb using PIL, uploading the
> > thumbnail to the thumb bucket and then redirecting the request.
>
> This isn't a criticism, but I trust you are aware of the implications
> and problems of doing work in threads?




I think so. I understand the whole idea of twisted is to schedule tasks in
an async way in a single main thread. I usually use quite a lot of threads
in my code and I'm just learning about this new async style of coding. I've
tried to avoid using threads as much as I can here but didn't think I could
get away from them based on the fact that PIL is blocking.


> FWIW we usually use a child process pool for intensive tasks; this has
> the advantage you can sensibly kill a long-lived child (just kill the
> process) and you side-step the lack of concurrency in the python
> interpreter.
>

> [In this case, I'd just start up a bunch of python interpreters using a
> ProcessProtocol and use a simple request/response command protocol on
> stdin/stdout - the child interpreters can be non-Twisted processes able
> to block on PIL operations]
>
>
I'd love to get this working using a processes pool rather than a thread
pool (I spent quite a lot of time trying to figure out how to do it in
twisted but haven't yet worked out how). As this server will be CPU bound
this will hopefully get more throughput and also side-step the memory leak
in PIL that I believe I'm seeing (although on second thought maybe not, the
over head of starting a new python interpreter each time wouldn't be
viable).

Are there any examples of how to use a process pool?


> If you really do want threads, is there any reason to not use the
> Twisted threadpool stuff?
>
>
I wasn't aware of a twisted thread pool, I think I've only come across
deferToThead, which I imagined was using a threadpool. (if so if there a
way to control the size?)


> It's often a personal/style choice, but I don't use StringIO for large
> volumes of data personally (not Twisted-specific).
>
>
I rarely use it either, but I needed a way to get the data into a file type
object for PIL without putting the data to disk. How would you recommend I
get the data between download / PIL / upload?


> I'm sure someone will mention tests ;o)


>

tests are something I've often, guiltily, neglected- maybe I should start
:) I wouldn't really know where to start writing tests for anything more
than trivial functions. I guess just have images and thumbnails that I know
are correct for that request, send them to the server and see if they
return a thumbnail that matches? something along those lines?


> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121102/5ade186a/attachment.html>

From exarkun at twistedmatrix.com  Sat Nov  3 22:05:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 04 Nov 2012 04:05:25 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1352001925.94.521971289@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121104/00d214be/attachment-0001.html>

From peter.inglesby at gmail.com  Mon Nov  5 14:12:27 2012
From: peter.inglesby at gmail.com (Peter Inglesby)
Date: Mon, 5 Nov 2012 21:12:27 +0000
Subject: [Twisted-Python] Request for help: throttling serving of static
	content
Message-ID: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>

Tomorrow I'm giving a talk to provide an introduction to asynchronous
programming.  I'll be mentioning Twisted in passing, but the meat of the
talk will be about writing a web crawler for finding broken links, first
using single-threaded blocking code, then multi-threaded blocking code,
before demonstrating a non-blocking solution using a select loop.  I can
make the code and slides available if there's interest.

For this to be effective, I was planning on writing a very slow webserver
to serve static content locally.  I'd expected I'd be able to simply wrap
an instance of twisted.web.static.Site in a ThrottlingFactory, and serve
away:

import sys

from twisted.internet import reactor
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.protocols.policies import ThrottlingFactory
from twisted.web.server import Site
from twisted.web.static import File
from twisted.python import log

if __name__ == '__main__':
    log.startLogging(sys.stdout)
    resource = File(sys.argv[1])
    factory = Site(resource)
    endpoint = TCP4ServerEndpoint(reactor, 4321)
    endpoint.listen(ThrottlingFactory(factory, maxConnectionCount=3,
readLimit=20, writeLimit=20))
    reactor.run()



However, this fails with the following error because I've not registered a
producer with my ThrottlingProtocol:

2012-11-05 21:01:34+0000 [-] Throttling writes on
<twisted.protocols.policies.ThrottlingFactory instance at 0x1016497e8>
2012-11-05 21:01:34+0000 [-] Unhandled Error
 Traceback (most recent call last):
  File "slow_server.py", line 16, in <module>
    reactor.run()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/base.py",
line 1169, in run
    self.mainLoop()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/base.py",
line 1178, in mainLoop
    self.runUntilCurrent()
--- <exception caught here> ---
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/internet/base.py",
line 800, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/protocols/policies.py",
line 290, in checkWriteBandwidth
    self.throttleWrites()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/protocols/policies.py",
line 324, in throttleWrites
    p.throttleWrites()
  File
"/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/twisted/protocols/policies.py",
line 221, in throttleWrites
    self.producer.pauseProducing()
exceptions.AttributeError: 'NoneType' object has no attribute
'pauseProducing'



I'm sure it's not impossible to figure out what I need to do here, but I'd
appreciate any pointers.

Many thanks in advance!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121105/d5e70c4b/attachment-0001.html>

From exarkun at twistedmatrix.com  Mon Nov  5 15:06:12 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 05 Nov 2012 22:06:12 -0000
Subject: [Twisted-Python] Request for help: throttling serving of static
 content
In-Reply-To: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
Message-ID: <20121105220612.15367.1957099079.divmod.xquotient.2@localhost6.localdomain6>

On 09:12 pm, peter.inglesby at gmail.com wrote:
>Tomorrow I'm giving a talk to provide an introduction to asynchronous
>programming.  I'll be mentioning Twisted in passing, but the meat of 
>the
>talk will be about writing a web crawler for finding broken links, 
>first
>using single-threaded blocking code, then multi-threaded blocking code,
>before demonstrating a non-blocking solution using a select loop.  I 
>can
>make the code and slides available if there's interest.
>
>For this to be effective, I was planning on writing a very slow 
>webserver
>to serve static content locally.  I'd expected I'd be able to simply 
>wrap
>an instance of twisted.web.static.Site in a ThrottlingFactory, and 
>serve
>away:
>
>[snip]
>
>
>
>However, this fails with the following error because I've not 
>registered a
>producer with my ThrottlingProtocol:

I don't think you're meant to need to register any producer.  The 
producer is supposed to register itself.  So this seems to be a bug in 
something.  If you can track it down any further and contribute a fix, 
that'd be wonderful.

Also related, though - http://twistedmatrix.com/trac/ticket/601 - so 
even if the producer were registered I don't know if you'd actually 
achieve the desired behavior.

Jean-Paul



From itamar at itamarst.org  Mon Nov  5 15:26:11 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 05 Nov 2012 17:26:11 -0500
Subject: [Twisted-Python] Request for help: throttling serving of static
 content
In-Reply-To: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
Message-ID: <50983D03.7050304@itamarst.org>

On 11/05/2012 04:12 PM, Peter Inglesby wrote:
> Tomorrow I'm giving a talk to provide an introduction to asynchronous 
> programming.  I'll be mentioning Twisted in passing, but the meat of 
> the talk will be about writing a web crawler for finding broken links, 
> first using single-threaded blocking code, then multi-threaded 
> blocking code, before demonstrating a non-blocking solution using a 
> select loop.  I can make the code and slides available if there's 
> interest.
>
> For this to be effective, I was planning on writing a very slow 
> webserver to serve static content locally.  I'd expected I'd be able 
> to simply wrap an instance of twisted.web.static.Site in a 
> ThrottlingFactory, and serve away:
>
There's also twisted.protocols.htb, although again it's old and possibly 
buggy and may not work. For demo purposes something like 
https://github.com/rflynn/dragnet might do.



From peter.inglesby at gmail.com  Mon Nov  5 17:50:53 2012
From: peter.inglesby at gmail.com (Peter Inglesby)
Date: Tue, 6 Nov 2012 00:50:53 +0000
Subject: [Twisted-Python] Request for help: throttling serving of static
	content
In-Reply-To: <50983D03.7050304@itamarst.org>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
	<50983D03.7050304@itamarst.org>
Message-ID: <CAENJrP=Fg9N=oQDzrsL-MOQGGpmE4tpFXb2GSEU_CJNYAZwL1w@mail.gmail.com>

Thanks for the responses.  I'll see what I can do about tracking down the
problem.

In the meantime, I'll give dragnet a look.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121106/bd5a451b/attachment.html>

From p.mayers at imperial.ac.uk  Tue Nov  6 05:32:42 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 06 Nov 2012 12:32:42 +0000
Subject: [Twisted-Python] Request for help: throttling serving of static
 content
In-Reply-To: <50983D03.7050304@itamarst.org>
References: <CAENJrPm3F1=E7B3Ndi0buD=PECCDNGWuypJRgXGKyuba6+nfmg@mail.gmail.com>
	<50983D03.7050304@itamarst.org>
Message-ID: <5099036A.7030003@imperial.ac.uk>

On 05/11/12 22:26, Itamar Turner-Trauring wrote:

> There's also twisted.protocols.htb, although again it's old and possibly
> buggy and may not work. For demo purposes something like
> https://github.com/rflynn/dragnet might do.

If you're on Linux, "netem" is also an option.

http://www.linuxfoundation.org/collaborate/workgroups/networking/netem



From gregoire.leroy at retenodus.net  Tue Nov  6 05:50:19 2012
From: gregoire.leroy at retenodus.net (=?iso-8859-1?q?Gr=E9goire_Leroy?=)
Date: Tue, 6 Nov 2012 21:50:19 +0900
Subject: [Twisted-Python] Create client in Server factory
In-Reply-To: <5090F42D.4050303@imperial.ac.uk>
References: <201210311614.34673.gregoire.leroy@retenodus.net>
	<5090F42D.4050303@imperial.ac.uk>
Message-ID: <201211062150.19388.gregoire.leroy@retenodus.net>

Hi,

Thank you, I've choosen the second solution, it works perfectly :)

Regards,
Grégoire Leroy

Le Wednesday 31 October 2012 18:49:33, Phil Mayers a écrit :
> On 10/31/2012 07:14 AM, Grégoire Leroy wrote:
> > Hi,
> > 
> > I have a server who receive data from clients A/B/C (remote machines). I
> > want to use a client D (on the same machine than the server) to send
> > this data to another server (remote).
> > 
> > The difficulty is, I want to use the same client D connection for any
> > client. I don't want open an new connection each time.
> > 
> > First thing I would think is to create the connection in my server
> > factory, and use client's methods in my server protocol, for example
> > with [...]
> > 
> > class LocalProxyFactory(Factory):
> >          def __init__(self):
> >                  f = LocalProxyClientFactory()
> >                  reactor.connectTCP("retenodus.net", 4242, f)
> >                  reactor.run()
> 
> The "reactor.run" is just wrong - remove it.
> 
> You need to connect to a server, and share this connection amongst some
> protocols. But you can't control the order in which these connections
> complete, so A/B/C might connect before D is ready.
> 
> You've really got two choices - accept the connections from A/B/C but
> have your server protocol "wait" until D is ready - something like this:
> 
> from twisted.internet.protocol import ClientCreator
> 
> class Server(...):
>    def connectionMade(self):
>      if self.factory.connD is None:
>        self.factory.waitFor(self._ready)
>        self.transport.pauseProducing()
> 
>    def _ready(self):
>      self.transport.resumeProducing()
> 
> d_connect = ClientCreator(reactor, DProtocol)
> 
> class ServerFactory(...):
>    def __init__(self):
>      self.connD = None
>      self._wait = []
>      d_connect.connectTCP(Dhost, port).addCallback(self.dReady)
> 
>    def waitFor(self, _cb):
>      if self.connD:
>        _cb(self.connD)
>      else:
>        d = defer.Deferred()
>        d.addCallback(_cb)
>        self._wait.append(d)
> 
>    def dReady(self, proto):
>      self.connD = proto
>      cb = self._wait
>      self._wait = []
>      for c in cb:
>        c.callback(proto)
> 
> def main():
>    reactor.listenTCP(..., ServerFactory())
>    reactor.run()
> 
> ...or don't start listening until D has connected, like this:
> 
> class ServerFactory(...):
>    def __init__(self, dProto):
>      self.connD = dProto
> 
> def startListen(dProto):
>    reactor.listenTCP(..., ServerFactory(dProto))
> 
> def main():
>    d_connect.connectTCP(Dhost, port).addCallback(startListen)
>    reactor.run()
> 
> The latter is simpler, but which is appropriate depends on your needs.
> 
> Note that I've used ClientCreator to get a callback when the connection
> to D is ready - remember that doesn't happen immediately.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python





From matt at nonuby.com  Tue Nov  6 20:49:34 2012
From: matt at nonuby.com (Matt Freeman)
Date: Wed, 7 Nov 2012 10:49:34 +0700
Subject: [Twisted-Python] Twisted Conch - Flow control
Message-ID: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>

I asked this question on  Stackoverflow (even offered a bounty) and IRC:

http://stackoverflow.com/questions/13117502/twisted-conch-flow-control
--

I have a Twisted Conch SSH server and the typical scenario is this:

git via OpenSSH client >>--- WAN1 --->> Twisted conch svr >>--- WAN2 -->>
Git server

There will be occassions that the 'git push' is sending data faster over
WAN1 than I can proxy it over WAN2, so I need to tell the client to slow
down (well before any TCP packet loss causes adjustments the TCP window
size) to avoid buffering too much on the Twisted server. Reading the RFC
for SSH this is accomplished with not acknowledging via adj window this
will then cause the git push to block on syscall write to the pipe backed
by openssh.

Looking at conch/ssh/connection.py:L216 in the method def
ssh_CHANNEL_DATA(self, packet): I can accomplish this with setting
localWindowSize to 0, and inflight data will still land as the predicate on
230 should still pass (give localWindowLeft). I am wondering if this is the
correct approach or am I missing something blindly obvious with regards to
flow control with Twisted SSH Conch? *

Note: I acknowledge there are methods placeholders for stopWriting and
startWriting on (channel) that I can override so I have hooks to control
the other side of the transmission 'git pull', but Im interested in first
leg. Also IPush/IPull producer dont seem applicable at this level and I
cant see how I can tie in these higher abstraction without butchering
conch?
-- 
Matt Freeman - @nonuby - http://blog.nonuby.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121107/1b88b887/attachment-0001.html>

From lacrima.maxim at gmail.com  Wed Nov  7 04:11:02 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Wed, 7 Nov 2012 13:11:02 +0200
Subject: [Twisted-Python] defer.TimeoutError in tests
Message-ID: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>

Hi!

I have some tests that fail intermittently, i.e. sometimes they fail,
sometimes they don't. These tests  were written against real server.

When I run these tests, the following errors may or may not occur:
[ERROR]
Traceback (most recent call last):
Failure: twisted.internet.defer.TimeoutError: <...>  still running at 120.0
secs

[ERROR]
Traceback (most recent call last):
Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was unclean.
Selectables:
<<class 'twisted.internet.tcp.Client'> to ('localhost', 8081) at 1eb1750>

I don't understand these errors. The server is up and running, but for some
reason connections are timed out.

The code under test uses perspective broker to talk to the server. I can't
figure out where the problem is -- on the server or in the code under test
(the client).

I have found some information that can help me to tackle the problem --
http://twistedmatrix.com/trac/ticket/2869

But what can be the reason of such intermittent errors?

Sorry, right now I can't provide a self contained example that demonstrates
the problem, because testing code is rather complex. At first, I would like
to know if there is something I could pay attention to.

Thanks in advance.

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121107/f394e314/attachment.html>

From itamar at futurefoundries.com  Wed Nov  7 05:16:42 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 7 Nov 2012 07:16:42 -0500
Subject: [Twisted-Python] defer.TimeoutError in tests
In-Reply-To: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>
References: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>
Message-ID: <CAOp9P3rCYbkrqd2guid-gCP-+8_8xf-EmY36JCW4urLqC4-TOQ@mail.gmail.com>

On Wed, Nov 7, 2012 at 6:11 AM, Maxim Lacrima <lacrima.maxim at gmail.com>wrote:


> When I run these tests, the following errors may or may not occur:
> [ERROR]
> Traceback (most recent call last):
> Failure: twisted.internet.defer.TimeoutError: <...>  still running at
> 120.0 secs
>
> [ERROR]
> Traceback (most recent call last):
> Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was
> unclean.
> Selectables:
> <<class 'twisted.internet.tcp.Client'> to ('localhost', 8081) at 1eb1750>
>
> I don't understand these errors. The server is up and running, but for
> some reason connections are timed out.
>

The connection isn't timing out, the *test* is timing out. The connection
may be working just fine.

Due to an unknown reason, presumably a bug in your code (or test code), the
Deferred you are returning from the test method isn't being fired. E.g.
you're not calling callback()/errback(), or a callback method you added is
returning a Deferred that is in turn not being fired.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121107/15d1a229/attachment.html>

From itamar at futurefoundries.com  Wed Nov  7 05:30:49 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 7 Nov 2012 07:30:49 -0500
Subject: [Twisted-Python] Twisted Conch - Flow control
In-Reply-To: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>
References: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>
Message-ID: <CAOp9P3pk02ozo51QCgZkp4wsy14Nh-LgFL0N=gdhssj2-repNg@mail.gmail.com>

On Tue, Nov 6, 2012 at 10:49 PM, Matt Freeman <matt at nonuby.com> wrote:

> I asked this question on  Stackoverflow (even offered a bounty) and IRC:
>
> http://stackoverflow.com/questions/13117502/twisted-conch-flow-control
> --
>
> I have a Twisted Conch SSH server and the typical scenario is this:
>
> git via OpenSSH client >>--- WAN1 --->> Twisted conch svr >>--- WAN2 -->>
> Git server
>
> There will be occassions that the 'git push' is sending data faster over
> WAN1 than I can proxy it over WAN2, so I need to tell the client to slow
> down (well before any TCP packet loss causes adjustments the TCP window
> size) to avoid buffering too much on the Twisted server. Reading the RFC
> for SSH this is accomplished with not acknowledging via adj window this
> will then cause the git push to block on syscall write to the pipe backed
> by openssh.
>
> Looking at conch/ssh/connection.py:L216 in the method def
> ssh_CHANNEL_DATA(self, packet): I can accomplish this with setting
> localWindowSize to 0, and inflight data will still land as the predicate on
> 230 should still pass (give localWindowLeft). I am wondering if this is the
> correct approach or am I missing something blindly obvious with regards to
> flow control with Twisted SSH Conch? *
>
> Note: I acknowledge there are methods placeholders for stopWriting and
> startWriting on (channel) that I can override so I have hooks to control
> the other side of the transmission 'git pull', but Im interested in first
> leg. Also IPush/IPull producer dont seem applicable at this level and I
> cant see how I can tie in these higher abstraction without butchering conch?
>
The general non-SSH specific answer is to use the producer API. Something
like:

    wan2transport.registerProducer(wan1transport, True)

Assuming WAN2 is also over SSH (it wasn't quite clear), SSHChannel ideally
should implement the producer and consumer APIs so you could do:

    wan2channel.registerProducer(wan1channel, True)

But, as you say, it doesn't implement those APIs. Thus it looks like you'd
want to subclass SSHChannel, and have wan2's SSHChannel.stop/startWriting
call pause/resumeProducing on the WAN1 channel's *transport*
(SSHConnection). Unless you have multiple channels in your incoming SSH
connection that you want to pause/resume separately, and it doesn't sound
like you do, this should work.

twisted.conch.scripts.conch.SSHSession has an example of this, more or
less, except that it's pausing reading from stdin rather than another SSH
connection.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121107/55506829/attachment.html>

From itamar at futurefoundries.com  Wed Nov  7 05:35:13 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 7 Nov 2012 07:35:13 -0500
Subject: [Twisted-Python] Twisted Conch - Flow control
In-Reply-To: <CAOp9P3pk02ozo51QCgZkp4wsy14Nh-LgFL0N=gdhssj2-repNg@mail.gmail.com>
References: <CAHEc+CCcntOqFw5eq5OQbXgpQCSU+VVsdKN63sQXWK+Gz-gbbg@mail.gmail.com>
	<CAOp9P3pk02ozo51QCgZkp4wsy14Nh-LgFL0N=gdhssj2-repNg@mail.gmail.com>
Message-ID: <CAOp9P3q5GEyz-nts_4R=3bt3rm2JS+4hMBCM7fJpeJR1xAyiGA@mail.gmail.com>

On Wed, Nov 7, 2012 at 7:30 AM, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:


> SSHChannel.stop/startWriting call pause/resumeProducing on the WAN1
> channel's *transport* (SSHConnection).
>

Sorry, SSHServerTransport, not SSHConnection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121107/c95bafda/attachment.html>

From lacrima.maxim at gmail.com  Fri Nov  9 00:34:31 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Fri, 9 Nov 2012 09:34:31 +0200
Subject: [Twisted-Python] defer.TimeoutError in tests
In-Reply-To: <CAOp9P3rCYbkrqd2guid-gCP-+8_8xf-EmY36JCW4urLqC4-TOQ@mail.gmail.com>
References: <CAKef57Nf4xd1oPkbqjeFwtnM12p4b_daGrxmrm=Xouvfb2CS8Q@mail.gmail.com>
	<CAOp9P3rCYbkrqd2guid-gCP-+8_8xf-EmY36JCW4urLqC4-TOQ@mail.gmail.com>
Message-ID: <CAKef57N7b3iHSr8YA6AT_vTdxf2NjdzQQuExyaDXWb6C1paC-A@mail.gmail.com>

> The connection isn't timing out, the *test* is timing out. The connection
> may be working just fine.
>
> Due to an unknown reason, presumably a bug in your code (or test code),
> the Deferred you are returning from the test method isn't being fired. E.g.
> you're not calling callback()/errback(), or a callback method you added is
> returning a Deferred that is in turn not being fired.
>
>
Hi, Itamar!

Thanks for your reply. Yes, this was a bug in my code, which caused
Deferred to never fire under some circumstances.

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121109/12f9a5a9/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat Nov 10 22:05:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 11 Nov 2012 05:05:25 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1352610325.61.1030690699@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121111/7fe8ff1a/attachment-0001.html>

From _ at lvh.cc  Wed Nov 14 02:05:15 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 14 Nov 2012 10:05:15 +0100
Subject: [Twisted-Python] Getting my Cred interfaces right:
	IUsername(Hashed)?Password
Message-ID: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>

Hi,


I'm trying to make sure that I have my cred interfaces right.

Users log in using a username and password. They provide these credentials
in plaintext (over a TLSd connection). The user password is stored using a
secure key derivation function (in casu, scrypt).

Currently I have this gumongous User object (an Axiom Item), and I'm trying
to split it up into parts. IIUC, the checker's checked interface should be
IUsernamePassword (that's already the case). However, the thing I adapt a
User to to check it should be an IUsernameHashedPassword, right?

In the end, I doubt this matters an awful lot, unless somebody ends up
implementing a IUsernameHashedPassword checker that is smart enough to read
both scrypt/bcrypt headers and /etc/shadow-style $-delimited entries.

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121114/9ab3169d/attachment-0001.html>

From exarkun at twistedmatrix.com  Wed Nov 14 05:29:56 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 14 Nov 2012 12:29:56 -0000
Subject: [Twisted-Python] Getting my Cred interfaces right:
 IUsername(Hashed)?Password
In-Reply-To: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>
References: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>
Message-ID: <20121114122956.3320.1973062983.divmod.xquotient.4@localhost6.localdomain6>

On 09:05 am, _ at lvh.cc wrote:
>Hi,
>
>
>I'm trying to make sure that I have my cred interfaces right.
>
>Users log in using a username and password. They provide these 
>credentials
>in plaintext (over a TLSd connection). The user password is stored 
>using a
>secure key derivation function (in casu, scrypt).
>
>Currently I have this gumongous User object (an Axiom Item), and I'm 
>trying
>to split it up into parts. IIUC, the checker's checked interface should 
>be
>IUsernamePassword (that's already the case). However, the thing I adapt 
>a
>User to to check it should be an IUsernameHashedPassword, right?

This isn't right.  The point of declaring interfaces on the checker is 
so the system knows what kind of credentials it can check.  If your 
credentials object implements a different interface than your checker 
declares it can check, the system won't ever ask the checker to check 
the credentials.

It sounds like you might have something extra going on beyond the normal 
usage of cred, which perhaps makes the idea you've written about here 
work somehow - but I don't know what the extra something is, and it 
probably doesn't apply to cred usage in general (ie, perhaps it is a 
particularity of Axiom).

Jean-Paul
>In the end, I doubt this matters an awful lot, unless somebody ends up
>implementing a IUsernameHashedPassword checker that is smart enough to 
>read
>both scrypt/bcrypt headers and /etc/shadow-style $-delimited entries.
>
>cheers
>lvh



From _ at lvh.cc  Wed Nov 14 06:29:54 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Wed, 14 Nov 2012 14:29:54 +0100
Subject: [Twisted-Python] Getting my Cred interfaces right:
	IUsername(Hashed)?Password
In-Reply-To: <20121114122956.3320.1973062983.divmod.xquotient.4@localhost6.localdomain6>
References: <CAE_Hg6as4oNK9GFMV6+R5NYr6k_ocymWFtXgOkJDC_E-K=aMbA@mail.gmail.com>
	<20121114122956.3320.1973062983.divmod.xquotient.4@localhost6.localdomain6>
Message-ID: <CAE_Hg6YvKRp7Y8=PaJHurd0DGtwL7Ww8G1+YAmFgONordFhQAg@mail.gmail.com>

On Wed, Nov 14, 2012 at 1:29 PM, <exarkun at twistedmatrix.com> wrote:

>  This isn't right.  The point of declaring interfaces on the checker is
> so the system knows what kind of credentials it can check.  If your
> credentials object implements a different interface than your checker
> declares it can check, the system won't ever ask the checker to check
> the credentials.
>

Just to be clear: the thing being checked, i.e. the thing being provided by
the user when logging in, is just an IUsernamePassword. Hence, the
credentialInterfaces list on the ICredentialsChecker is [IUsernamePassword].

The only place where IUsernameHashedPassword comes in to play is storage,
i.e. the thing I am checking the user-provided IUsernamePassword against.

Maybe code is better: https://gist.github.com/4072062 (old.py is what it is
now, new.py is what I'm proposing)

Jean-Paul


cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121114/23464cc8/attachment.html>

From glyph at twistedmatrix.com  Thu Nov 15 01:03:39 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 15 Nov 2012 00:03:39 -0800
Subject: [Twisted-Python] doc suggestion
Message-ID: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>

A long time ago, we made an informal policy decision about redundancy between documentation of instance variables and constructor parameters.  Specifically we decided that if an initializer simply takes a bunch of parameters, then sets them as attributes on self under the same name, it would be redundant to document them both with @ivar and with @param.  Arbitrarily, we decided that @ivar is the one we would standardize on.

Later, we decided that too many attributes were public and we should default to making more things private.

The unfortunate confluence of these decisions has resulted in API documentation like this:

<http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>

Note that the public "__init__" is undocumented, but all the private, greyed-out attributes have documentation.

This is technically a violation of the original policy statement - although nobody can really be blamed for that, since as far as I can tell it's not actually written down anywhere - in that the @ivars have different names than the parameters to __init__, since they all start with _.

Of course, it would still be super redundant to document everything twice if the parameters and the attributes are in fact the same.

However, I think that going forward, this tendency should be amended so that, in the case where the attributes are private but the __init__ parameters are public, they should be documented with @param statements and not with @ivar statements.  More generally, if the same thing has to be documented twice, and it's public in one place and private in the other, the public documentation should always be preferred.

(And perhaps it should be officially documented in the coding standard.)

Thoughts, anyone?  Shall I file a ticket?

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121115/323b2e26/attachment.html>

From akaradag at NETAS.com.tr  Thu Nov 15 02:27:09 2012
From: akaradag at NETAS.com.tr (Anil  KARADAG)
Date: Thu, 15 Nov 2012 11:27:09 +0200
Subject: [Twisted-Python] FW: No module names "twisted.names" due to confuse
	twisted-core library folder
Message-ID: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>

Hi all,

 

 

I have a problem about twisted-core library location. I downloaded and
installed twisted-10.2-core(TwistedCore-10.2.0.tar.bz2) and
names(TwistedNames-10.2.0.tar.bz2) from source code[1]. But python does
not find "names" plugin. Because twisted-core has been installed under
/usr/lib64/ but names is under /usr/lib/ defaultly.

 

 

 

[root at trhtlangley38 sylkserver]# ll
/usr/lib64/python2.6/site-packages/twisted/plugins/

total 124

-rw------- 1 root root  979 Jan  3  2008 cred_anonymous.py

-rw------- 1 root root 1451 Nov 13 18:02 cred_anonymous.pyc

-rw------- 1 root root 1837 Jan  3  2008 cred_file.py

-rw------- 1 root root 2222 Nov 13 18:02 cred_file.pyc

-rw------- 1 root root 2352 Jan  3  2008 cred_memory.py

-rw------- 1 root root 2673 Nov 13 18:02 cred_memory.pyc

-rw------- 1 root root 3804 Jan  3  2008 cred_unix.py

-rw------- 1 root root 4387 Nov 13 18:02 cred_unix.pyc

-rwx------ 1 root root 5868 Nov 13 13:42 dropin.cache

-rw------- 1 root root  549 Jul 29  2008 __init__.py

-rw------- 1 root root  533 Nov 13 18:02 __init__.pyc

-rw------- 1 root root  239 Apr  8  2008 twisted_ftp.py

-rw------- 1 root root  341 Nov 13 18:02 twisted_ftp.pyc

-rw------- 1 root root  270 Apr  8  2008 twisted_inet.py

-rw------- 1 root root  373 Nov 13 18:02 twisted_inet.pyc

-rw------- 1 root root  290 Apr  8  2008 twisted_manhole.py

-rw------- 1 root root  396 Nov 13 18:02 twisted_manhole.pyc

-rw------- 1 root root  285 Apr  8  2008 twisted_portforward.py

-rw------- 1 root root  395 Nov 13 18:02 twisted_portforward.pyc

-rw------- 1 root root 1417 Dec 23  2006 twisted_qtstub.py

-rw------- 1 root root 1996 Nov 13 18:02 twisted_qtstub.pyc

-rw------- 1 root root 1420 Nov 15  2006 twisted_reactors.py

-rw------- 1 root root 1645 Nov 13 18:02 twisted_reactors.pyc

-rw------- 1 root root  257 Apr  8  2008 twisted_socks.py

-rw------- 1 root root  361 Nov 13 18:02 twisted_socks.pyc

-rw------- 1 root root  298 Apr  8  2008 twisted_telnet.py

-rw------- 1 root root  403 Nov 13 18:02 twisted_telnet.pyc

-rw------- 1 root root 2034 Dec 25  2009 twisted_trial.py

-rw------- 1 root root 1876 Nov 13 18:02 twisted_trial.pyc

 

[root at trhtlangley38 sylkserver]# ll
/usr/lib/python2.6/site-packages/twisted/plugins/

total 16

-rw------- 1 root root  257 Apr  8  2008 twisted_names.py

-rw------- 1 root root  359 Nov 15 10:30 twisted_names.pyc

-rw------- 1 root root 1175 Nov  2  2008 twisted_words.py

-rw------- 1 root root 1973 Nov 15 10:29 twisted_words.pyc

[root at trhtlangley38 sylkserver]#

 

 

 

[root at example ]# python

Python 2.6.6 (r266:84292, Sep 12 2011, 14:03:14)

[GCC 4.4.5 20110214 (Red Hat 4.4.5-6)] on linux2

Type "help", "copyright", "credits" or "license" for more information.

>>> import twisted

>>> print twisted.__file__

/usr/lib64/python2.6/site-packages/twisted/__init__.pyc

>>> import twisted.names

Traceback (most recent call last):

  File "<stdin>", line 1, in <module>

ImportError: No module named names

>>> 

 

 

I tried --prefix options to install method but i cannot pass the
problem. Does anyone know how to fix the problem and why the names
module is not installed under twisted-core library path.  

 

 

 

OS: RHEL 6.2

 

 

 

Thanks 

 

[1] http://twistedmatrix.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121115/26ed0be8/attachment.html>

From wangfuwen000 at 163.com  Thu Nov 15 03:26:27 2012
From: wangfuwen000 at 163.com (=?GBK?B?zfW4u87E?=)
Date: Thu, 15 Nov 2012 18:26:27 +0800 (CST)
Subject: [Twisted-Python] doc suggestion
In-Reply-To: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
References: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
Message-ID: <2765b43f.de7e.13b039afe02.Coremail.wangfuwen000@163.com>


I want to unsubscribe please;




At 2012-11-15 16:03:39,Glyph <glyph at twistedmatrix.com> wrote:
A long time ago, we made an informal policy decision about redundancy between documentation of instance variables and constructor parameters.  Specifically we decided that if an initializer simply takes a bunch of parameters, then sets them as attributes on self under the same name, it would be redundant to document them both with @ivar and with @param.  Arbitrarily, we decided that @ivar is the one we would standardize on.


Later, we decided that too many attributes were public and we should default to making more things private.


The unfortunate confluence of these decisions has resulted in API documentation like this:



<http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>


Note that the public "__init__" is undocumented, but all the private, greyed-out attributes have documentation.


This is technically a violation of the original policy statement - although nobody can really be blamed for that, since as far as I can tell it's not actually written down anywhere - in that the @ivars have different names than the parameters to __init__, since they all start with _.


Of course, it would still be super redundant to document everything twice if the parameters and the attributes are in fact the same.


However, I think that going forward, this tendency should be amended so that, in the case where the attributes are private but the __init__ parameters are public, they should be documented with @param statements and not with @ivar statements.  More generally, if the same thing has to be documented twice, and it's public in one place and private in the other, the public documentation should always be preferred.


(And perhaps it should be officially documented in the coding standard.)


Thoughts, anyone?  Shall I file a ticket?


-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121115/e0098dba/attachment.html>

From exarkun at twistedmatrix.com  Thu Nov 15 04:48:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 15 Nov 2012 11:48:25 -0000
Subject: [Twisted-Python] doc suggestion
In-Reply-To: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
References: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
Message-ID: <20121115114825.3320.1091679534.divmod.xquotient.9@localhost6.localdomain6>

On 08:03 am, glyph at twistedmatrix.com wrote:
>A long time ago, we made an informal policy decision about redundancy 
>between documentation of instance variables and constructor parameters. 
>Specifically we decided that if an initializer simply takes a bunch of 
>parameters, then sets them as attributes on self under the same name, 
>it would be redundant to document them both with @ivar and with @param. 
>Arbitrarily, we decided that @ivar is the one we would standardize on.
>
>Later, we decided that too many attributes were public and we should 
>default to making more things private.
>
>The unfortunate confluence of these decisions has resulted in API 
>documentation like this:
>
><http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>
>
>Note that the public "__init__" is undocumented, but all the private, 
>greyed-out attributes have documentation.
>
>This is technically a violation of the original policy statement - 
>although nobody can really be blamed for that, since as far as I can 
>tell it's not actually written down anywhere - in that the @ivars have 
>different names than the parameters to __init__, since they all start 
>with _.
>
>Of course, it would still be super redundant to document everything 
>twice if the parameters and the attributes are in fact the same.
>
>However, I think that going forward, this tendency should be amended so 
>that, in the case where the attributes are private but the __init__ 
>parameters are public, they should be documented with @param statements 
>and not with @ivar statements.  More generally, if the same thing has 
>to be documented twice, and it's public in one place and private in the 
>other, the public documentation should always be preferred.
>
>(And perhaps it should be officially documented in the coding 
>standard.)

I agree.  Actually, I think a few people have even started doing this 
already.  I suppose we should document it, although I bet I can count on 
one hand how many people have actually _read_ the coding standard in the 
last year.
>Thoughts, anyone?  Shall I file a ticket?

A ticket for updating the coding standard?  Yes.  I don't think there 
should be a ticket for correcting the existing documentation - perhaps a 
milestone, instead (clearly there's too much documentation to change to 
do it for a single ticket)?

Jean-Paul



From exarkun at twistedmatrix.com  Thu Nov 15 04:52:36 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 15 Nov 2012 11:52:36 -0000
Subject: [Twisted-Python] FW: No module names "twisted.names" due to
 confuse twisted-core library folder
In-Reply-To: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>
References: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>
Message-ID: <20121115115236.3320.1179027065.divmod.xquotient.17@localhost6.localdomain6>

On 09:27 am, akaradag at netas.com.tr wrote:
>Hi all,
>
>I have a problem about twisted-core library location. I downloaded and
>installed twisted-10.2-core(TwistedCore-10.2.0.tar.bz2) and
>names(TwistedNames-10.2.0.tar.bz2) from source code[1]. But python does
>not find "names" plugin. Because twisted-core has been installed under
>/usr/lib64/ but names is under /usr/lib/ defaultly.

This is due to a bug in the local distutils configuration of your Linux 
distribution which causes it to select incorrect installation targets 
and does not let you override these choices.  You should report the bug 
to them.

Meanwhile, you can solve the problem by:

  1) Use the platform-supplied packages of Twisted instead of installing 
your own version from source

or

  2) Install Twisted instead of Twisted Core and Twisted Names

These are both good ideas anyway, disregarding your current particular 
installation problem.  If possible, do them both.

Jean-Paul



From akaradag at NETAS.com.tr  Thu Nov 15 05:17:55 2012
From: akaradag at NETAS.com.tr (Anil  KARADAG)
Date: Thu, 15 Nov 2012 14:17:55 +0200
Subject: [Twisted-Python] FW: No module names "twisted.names" due to
	confuse twisted-core library folder
In-Reply-To: <20121115115236.3320.1179027065.divmod.xquotient.17@localhost6.localdomain6>
References: <AFE3D52FC015A5408CD28098BD0439C6759904@netasmx.netas.lab.nortel.com>
	<20121115115236.3320.1179027065.divmod.xquotient.17@localhost6.localdomain6>
Message-ID: <AFE3D52FC015A5408CD28098BD0439C6759B2E@netasmx.netas.lab.nortel.com>

Hi Jean,


Thanks for reply. I passed the problem with the below approach;



Why am I getting ImportErrors for Twisted subpackages on my 64bit
installation of RedHat/Fedora/CentOS?
      
  Red Hat and derived Linux distributions arrange to have certain Python
libraries installed in /usr/lib/ and 
  other parts installed in /usr/lib64/. 
  This is problematic for Twisted, since it results in some of Twisted
being installed in one directory and the rest installed in another. 
  Python will load a package from only one directory. 
  You can override this default behavior when you install Twisted by
supplying the --install-lib parameter when running Twisted's setup.py.
      

http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#WhyamIgettin
gImportErrorsforTwistedsubpackagesonmy64bitinstallationofRedHatFedoraCen
tOS


thanks


-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of
exarkun at twistedmatrix.com
Sent: Thursday, November 15, 2012 1:53 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] FW: No module names "twisted.names" due to
confuse twisted-core library folder

On 09:27 am, akaradag at netas.com.tr wrote:
>Hi all,
>
>I have a problem about twisted-core library location. I downloaded and
>installed twisted-10.2-core(TwistedCore-10.2.0.tar.bz2) and
>names(TwistedNames-10.2.0.tar.bz2) from source code[1]. But python does
>not find "names" plugin. Because twisted-core has been installed under
>/usr/lib64/ but names is under /usr/lib/ defaultly.

This is due to a bug in the local distutils configuration of your Linux 
distribution which causes it to select incorrect installation targets 
and does not let you override these choices.  You should report the bug 
to them.

Meanwhile, you can solve the problem by:

  1) Use the platform-supplied packages of Twisted instead of installing

your own version from source

or

  2) Install Twisted instead of Twisted Core and Twisted Names

These are both good ideas anyway, disregarding your current particular 
installation problem.  If possible, do them both.

Jean-Paul

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From poalman at gmail.com  Thu Nov 15 07:02:05 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 15 Nov 2012 14:02:05 +0000
Subject: [Twisted-Python] passing exception object to log.err doesn't log
	traceback?
Message-ID: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>

I was just looking at some logs and some of the errors logged without
tracebacks, I work out it was when I wasn't passing the error object to
log.err- Is this by design?

Here is some code which shows it logging and not logging the traceback

import os
from twisted.python import log
from twisted.python.logfile import DailyLogFile

logfile=
DailyLogFile.fromFullPath(os.path.join(os.path.dirname(__file__),"error.log"))
log.startLogging(logfile)

def zero_error():
    1/0

def stack(x):
    if not x:
        zero_error()
    else:
        stack(x-1)

def work(x,pass_exception):
    try:
        stack(x)
    except Exception as e:
        log.err(e if pass_exception else None)

if __name__ == "__main__":
    work(5,True) #Doesn't log traceback
    work(5,False) #Does log
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121115/cb165eb1/attachment-0001.html>

From itamar at futurefoundries.com  Thu Nov 15 07:56:44 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Thu, 15 Nov 2012 09:56:44 -0500
Subject: [Twisted-Python] passing exception object to log.err doesn't
	log traceback?
In-Reply-To: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>
References: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>
Message-ID: <CAOp9P3pJ=TZi_iw2XPGPCz7RweU38VROtJS5QP+HdeHV=2c-gg@mail.gmail.com>

On Thu, Nov 15, 2012 at 9:02 AM, Paul Wiseman <poalman at gmail.com> wrote:

> I was just looking at some logs and some of the errors logged without
> tracebacks, I work out it was when I wasn't passing the error object to
> log.err- Is this by design?
>

In Python 2.x, exception objects do not have any reference to their
traceback; this is one of the reasons Twisted has the Failure class, which
encapsulates both. (In Python 3 exceptions do have their tracebacks
attached.) Thus, if you want the traceback logged, you should do something
like:

from twisted.python import log

try:
    1/0
except Exception as e:
    # Log the last exception that occurred, including its traceback:
    log.err(None, "An error occurred.")

Or:

from twisted.python import log, failure

try:
    1/0
except Exception as e:
    f = failure.Failure()
    log.err(f, "An error occurred.")

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121115/def4111b/attachment.html>

From poalman at gmail.com  Thu Nov 15 11:28:00 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 15 Nov 2012 18:28:00 +0000
Subject: [Twisted-Python] passing exception object to log.err doesn't
	log traceback?
In-Reply-To: <CAOp9P3pJ=TZi_iw2XPGPCz7RweU38VROtJS5QP+HdeHV=2c-gg@mail.gmail.com>
References: <CACgdh2ioLXfC-wZ3jP8hjY1_kBBWnHmmK223uj_QJLPsJJXpig@mail.gmail.com>
	<CAOp9P3pJ=TZi_iw2XPGPCz7RweU38VROtJS5QP+HdeHV=2c-gg@mail.gmail.com>
Message-ID: <CACgdh2h7NdrPJXuB+x8uFENOfvB1xfwXHe_8XZfz6E++H0FwtQ@mail.gmail.com>

Ah I doubted it was a bug but the behaviour surprised me. Thanks for
explaining!

On 15 November 2012 14:56, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:

>
>
> On Thu, Nov 15, 2012 at 9:02 AM, Paul Wiseman <poalman at gmail.com> wrote:
>
>> I was just looking at some logs and some of the errors logged without
>> tracebacks, I work out it was when I wasn't passing the error object to
>> log.err- Is this by design?
>>
>
> In Python 2.x, exception objects do not have any reference to their
> traceback; this is one of the reasons Twisted has the Failure class, which
> encapsulates both. (In Python 3 exceptions do have their tracebacks
> attached.) Thus, if you want the traceback logged, you should do something
> like:
>
> from twisted.python import log
>
> try:
>     1/0
> except Exception as e:
>     # Log the last exception that occurred, including its traceback:
>     log.err(None, "An error occurred.")
>
> Or:
>
> from twisted.python import log, failure
>
> try:
>     1/0
> except Exception as e:
>     f = failure.Failure()
>     log.err(f, "An error occurred.")
>
> --
> Itamar Turner-Trauring, Future Foundries LLC
> http://futurefoundries.com/ — Twisted consulting, training and support.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121115/6d10669f/attachment-0001.html>

From glyph at twistedmatrix.com  Thu Nov 15 18:09:30 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 15 Nov 2012 17:09:30 -0800
Subject: [Twisted-Python] doc suggestion
In-Reply-To: <20121115114825.3320.1091679534.divmod.xquotient.9@localhost6.localdomain6>
References: <06AE1099-7813-44BE-917A-D06F29EEDFE8@twistedmatrix.com>
	<20121115114825.3320.1091679534.divmod.xquotient.9@localhost6.localdomain6>
Message-ID: <D066F4EA-3D56-46D3-B107-7272E9DBBE0D@twistedmatrix.com>


On Nov 15, 2012, at 3:48 AM, exarkun at twistedmatrix.com wrote:

> On 08:03 am, glyph at twistedmatrix.com wrote:
>> A long time ago, we made an informal policy decision about redundancy 
>> between documentation of instance variables and constructor parameters. 
>> Specifically we decided that if an initializer simply takes a bunch of 
>> parameters, then sets them as attributes on self under the same name, 
>> it would be redundant to document them both with @ivar and with @param. 
>> Arbitrarily, we decided that @ivar is the one we would standardize on.
>> 
>> Later, we decided that too many attributes were public and we should 
>> default to making more things private.
>> 
>> The unfortunate confluence of these decisions has resulted in API 
>> documentation like this:
>> 
>> <http://twistedmatrix.com/documents/12.2.0/api/twisted.web.client.Agent.html>
>> 
>> Note that the public "__init__" is undocumented, but all the private, 
>> greyed-out attributes have documentation.
>> 
>> This is technically a violation of the original policy statement - 
>> although nobody can really be blamed for that, since as far as I can 
>> tell it's not actually written down anywhere - in that the @ivars have 
>> different names than the parameters to __init__, since they all start 
>> with _.
>> 
>> Of course, it would still be super redundant to document everything 
>> twice if the parameters and the attributes are in fact the same.
>> 
>> However, I think that going forward, this tendency should be amended so 
>> that, in the case where the attributes are private but the __init__ 
>> parameters are public, they should be documented with @param statements 
>> and not with @ivar statements.  More generally, if the same thing has 
>> to be documented twice, and it's public in one place and private in the 
>> other, the public documentation should always be preferred.
>> 
>> (And perhaps it should be officially documented in the coding 
>> standard.)
> 
> I agree.  Actually, I think a few people have even started doing this 
> already.  I suppose we should document it, although I bet I can count on 
> one hand how many people have actually _read_ the coding standard in the 
> last year.
>> Thoughts, anyone?  Shall I file a ticket?
> 
> A ticket for updating the coding standard?  Yes.  I don't think there 
> should be a ticket for correcting the existing documentation - perhaps a 
> milestone, instead (clearly there's too much documentation to change to 
> do it for a single ticket)?

Done:

<http://tm.tl/6189>

-g




From lacrima.maxim at gmail.com  Fri Nov 16 07:46:23 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Fri, 16 Nov 2012 16:46:23 +0200
Subject: [Twisted-Python] Is Ampoule still maintained?
Message-ID: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>

Hi!

I would like to use Ampoule [1] package in my project.

However, from a look at a project page it seems that it is no longer
maintained. The latest release was about 2,5 years ago. Is it just bug
free, so new releases aren't required, or is it just unmaintained?

Does anyone use it?

Thank you

[1] https://launchpad.net/ampoule

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121116/9502ee4a/attachment.html>

From flaviogrossi at ymail.com  Fri Nov 16 09:57:45 2012
From: flaviogrossi at ymail.com (Flavio Grossi)
Date: Fri, 16 Nov 2012 16:57:45 +0000 (UTC)
Subject: [Twisted-Python] Is Ampoule still maintained?
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
Message-ID: <loom.20121116T175022-334@post.gmane.org>

Maxim Lacrima <lacrima.maxim <at> gmail.com> writes:


> However, from a look at a project page it seems that it is no longer 
> maintained. The latest release was about 2,5 years ago. Is it just bug
> free, so new releases aren't required, or is it just unmaintained?

i'm using it in production and i couldn't find any major problem

however, i think you're right, it seems unmantained, i opened this bug
  https://bugs.launchpad.net/ampoule/+bug/710597
more than an year ago without any answer from the author (fortunately
the fix is trivial)

bye,
flavio





From exarkun at twistedmatrix.com  Sat Nov 17 22:05:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 18 Nov 2012 05:05:25 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1353215125.82.77976035@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121118/822b0518/attachment-0001.html>

From adi at roiban.ro  Sun Nov 18 06:26:25 2012
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 18 Nov 2012 15:26:25 +0200
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
Message-ID: <CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>

Hi,

What is the status of Twisted Checker?

I could not find anything related to TwistedChecker on the website:
http://twistedmatrix.com/trac/search?q=twistedchecker

----

Is there a bug report or web page discussing the
requirements/specifications for a Twisted Checker?

Cheers,
Adi


On 8 June 2012 10:47, Jonathan Lange <jml at mumak.net> wrote:
> On Fri, Jun 8, 2012 at 6:23 AM, Raphael Shu <raphael at uaca.com> wrote:
>> Hi everyone,
>>
>> I'm a student of GSoC 2012, from University of Tsukuba, Japan.
>>
>> I'm glad to be selected as a practicer in Twisted project this year.
>>
>> Then in these serveral months, my project is to create a code standard
>> checker for Twisted,
>>
>> Basically, I will follow "Twisted Coding Standard", it can be found at:
>>
>> http://twistedmatrix.com/trac/browser/trunk/doc/core/development/policy/coding-standard.xhtml?format=raw
>>
>> I hope finally this project could be integrated into our main ticket system,
>>
>> so it would automatically check patches or other things.
>>
>> Please let me know if you have any good advise or idea to this project.
>>
>> My name on IRC is zomux.
>>
>> ( This project is currently hosted on launchpad,
>> http://launchpad.net/twistedchecker )
>>
>
> Welcome Raphael! I'm really looking forward to having an automated
> Twisted coding standard checker.
>
> Thanks,
> jml
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
Adi Roiban



From itamar at futurefoundries.com  Sun Nov 18 14:54:15 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Sun, 18 Nov 2012 16:54:15 -0500
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
Message-ID: <CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>

On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
>
> What is the status of Twisted Checker?
>
> I could not find anything related to TwistedChecker on the website:
> http://twistedmatrix.com/trac/search?q=twistedchecker
>
> ----
>
> Is there a bug report or web page discussing the
> requirements/specifications for a Twisted Checker?
>

http://launchpad.net/twistedchecker has a bunch of tickets, and the code.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121118/5895e94b/attachment-0001.html>

From lacrima.maxim at gmail.com  Mon Nov 19 00:34:42 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Mon, 19 Nov 2012 09:34:42 +0200
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <loom.20121116T175022-334@post.gmane.org>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
Message-ID: <CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>

Thanks, Flavio!


On 16 November 2012 18:57, Flavio Grossi <flaviogrossi at ymail.com> wrote:

> Maxim Lacrima <lacrima.maxim <at> gmail.com> writes:
>
>
> > However, from a look at a project page it seems that it is no longer
> > maintained. The latest release was about 2,5 years ago. Is it just bug
> > free, so new releases aren't required, or is it just unmaintained?
>
> i'm using it in production and i couldn't find any major problem
>
> however, i think you're right, it seems unmantained, i opened this bug
>   https://bugs.launchpad.net/ampoule/+bug/710597
> more than an year ago without any answer from the author (fortunately
> the fix is trivial)
>
> bye,
> flavio
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121119/cd198404/attachment.html>

From glyph at twistedmatrix.com  Mon Nov 19 21:39:47 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 19 Nov 2012 20:39:47 -0800
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
	<CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
Message-ID: <7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>

On Nov 18, 2012, at 11:34 PM, Maxim Lacrima <lacrima.maxim at gmail.com> wrote:

> On 16 November 2012 18:57, Flavio Grossi <flaviogrossi at ymail.com> wrote:
> Maxim Lacrima <lacrima.maxim <at> gmail.com> writes:
> 
> 
> > However, from a look at a project page it seems that it is no longer
> > maintained. The latest release was about 2,5 years ago. Is it just bug
> > free, so new releases aren't required, or is it just unmaintained?
> 
> i'm using it in production and i couldn't find any major problem
> 
> however, i think you're right, it seems unmantained, i opened this bug
>   https://bugs.launchpad.net/ampoule/+bug/710597
> more than an year ago without any answer from the author (fortunately
> the fix is trivial)
> 
> bye,
> flavio
> Thanks, Flavio!
> 
> -- 
> with regards,
> Maxim

Would anyone else like to step up to volunteer to maintain Ampoule?

Twisted eventually needs to grow its own simplified process pool, and my hope was that Ampoule could serve as a proving ground to get that implemented and tested well.  I can probably harass dialtone to give commit access to some more people if there were real interest.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121119/9d77074d/attachment-0001.html>

From glyph at twistedmatrix.com  Mon Nov 19 21:46:21 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 19 Nov 2012 20:46:21 -0800
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
Message-ID: <582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>


On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <itamar at futurefoundries.com> wrote:

> 
> 
> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
> Hi,
> 
> What is the status of Twisted Checker?
> 
> I could not find anything related to TwistedChecker on the website:
> http://twistedmatrix.com/trac/search?q=twistedchecker
> 
> ----
> 
> Is there a bug report or web page discussing the
> requirements/specifications for a Twisted Checker?
> 
> http://launchpad.net/twistedchecker has a bunch of tickets, and the code. 

It seems like the existence of this tool should be documented somewhere on our wiki (ReviewProcess, perhaps) as well as what to do with its output?

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121119/475b8463/attachment.html>

From raphael at uaca.com  Mon Nov 19 22:47:39 2012
From: raphael at uaca.com (Raphael Shu)
Date: Tue, 20 Nov 2012 14:47:39 +0900
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
	<582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
Message-ID: <CAMf6tM=sgU=3B9ce3SfGyG2dzixRTh43awktRf0a1SPdYjUneQ@mail.gmail.com>

Yea,  may be create a page on Wiki to describe the usage of this tool ?

Im looking forward to make it available in buildbot.

--
Raphael Shu

On Tue, Nov 20, 2012 at 1:46 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <
> itamar at futurefoundries.com> wrote:
>
>
>
> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
>
>> Hi,
>>
>> What is the status of Twisted Checker?
>>
>> I could not find anything related to TwistedChecker on the website:
>> http://twistedmatrix.com/trac/search?q=twistedchecker
>>
>> ----
>>
>> Is there a bug report or web page discussing the
>> requirements/specifications for a Twisted Checker?
>>
>
> http://launchpad.net/twistedchecker has a bunch of tickets, and the code.
>
>
> It seems like the existence of this tool should be documented somewhere on
> our wiki (ReviewProcess, perhaps) as well as what to do with its output?
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
 *Raphael Shu , UACA 2012*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121120/1387e6d4/attachment.html>

From lacrima.maxim at gmail.com  Tue Nov 20 01:41:32 2012
From: lacrima.maxim at gmail.com (Maxim Lacrima)
Date: Tue, 20 Nov 2012 10:41:32 +0200
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
	<CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
	<7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>
Message-ID: <CAKef57MyhQwDsoxzoCWSYD+GwxRou4xW3-4fE0ZqKVNuF-jppg@mail.gmail.com>

Hi, glyph!


Would anyone else like to step up to volunteer to maintain Ampoule?
>
> Twisted eventually needs to grow its own simplified process pool, and my
> hope was that Ampoule could serve as a proving ground to get that
> implemented and tested well.  I can probably harass dialtone to give commit
> access to some more people if there were real interest.
>
>
I am experimenting with Ampoule right now, trying to find out how suitable
it is for a project I have been working on. It would be cool if Twisted had
its own process pool implementation. I would certainly like to contribute.
However, I am newbie, so many things aren't clear to me. I will try to get
a thorough understanding about how Ampoule works or maybe write my own
implementation. In any case I will write to this mailing list when I have
something to share.

-- 
with regards,
Maxim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121120/f3a993ba/attachment.html>

From dynamicgl at gmail.com  Tue Nov 20 08:28:53 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Tue, 20 Nov 2012 23:28:53 +0800
Subject: [Twisted-Python] Is Ampoule still maintained?
In-Reply-To: <CAKef57MyhQwDsoxzoCWSYD+GwxRou4xW3-4fE0ZqKVNuF-jppg@mail.gmail.com>
References: <CAKef57OogFf9p1cCsM6Kbbg6bComV6OYY_2mbpDvJifBSUzb2g@mail.gmail.com>
	<loom.20121116T175022-334@post.gmane.org>
	<CAKef57Pc7k7VOZtw6X4QNrJyeCasKuHO-WqY2N=Z2Px2LcCD0Q@mail.gmail.com>
	<7E068CF7-F23C-46B5-B13C-6975F58F923B@twistedmatrix.com>
	<CAKef57MyhQwDsoxzoCWSYD+GwxRou4xW3-4fE0ZqKVNuF-jppg@mail.gmail.com>
Message-ID: <CABkOF6R1HAOn7S9nWrFcddbEosSO=v3=STdHByE1Osv7YJtGzg@mail.gmail.com>

On Tue, Nov 20, 2012 at 4:41 PM, Maxim Lacrima <lacrima.maxim at gmail.com>wrote:

> Hi, glyph!
>
>
> Would anyone else like to step up to volunteer to maintain Ampoule?
>>
>> Twisted eventually needs to grow its own simplified process pool, and my
>> hope was that Ampoule could serve as a proving ground to get that
>> implemented and tested well.  I can probably harass dialtone to give commit
>> access to some more people if there were real interest.
>>
>>
> I am experimenting with Ampoule right now, trying to find out how suitable
> it is for a project I have been working on. It would be cool if Twisted had
> its own process pool implementation. I would certainly like to contribute.
> However, I am newbie, so many things aren't clear to me. I will try to get
> a thorough understanding about how Ampoule works or maybe write my own
> implementation. In any case I will write to this mailing list when I have
> something to share.
>
> --
> with regards,
> Maxim
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Hi

  Ampoule is a very good tool for parallel computing, The only drawback I
found is cx_freeze can't support it. I personally hope this "own simplified
process pool" eventually can work with cx_freeze flawlessly.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121120/a2b6a49d/attachment.html>

From poalman at gmail.com  Tue Nov 20 13:47:08 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Tue, 20 Nov 2012 20:47:08 +0000
Subject: [Twisted-Python] ftp passive mode returning internal IP
Message-ID: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>

This possibly has nothing to do with twisted, but maybe if not someone may
be able to point me in the right direction!

Basically I've set up a twisted FTP server on ec2, and when a client tries
to enter passive mode I'm getting this:

Response: 227 Entering Passive Mode (x,x,x,x,159,122).
Status: Server sent passive reply with unroutable address. Using server
address instead.

the x.x.x.x is the boxes private IP, rather than its public IP.

It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0

Is there somehow I can change the way twisted is getting the IP, or is this
an issue with the server set up itself?

Any pointers or help on what to look/check for would be of huge help!

Thanks!

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121120/38727275/attachment-0001.html>

From adi at roiban.ro  Tue Nov 20 14:31:31 2012
From: adi at roiban.ro (Adi Roiban)
Date: Tue, 20 Nov 2012 23:31:31 +0200
Subject: [Twisted-Python] ftp passive mode returning internal IP
In-Reply-To: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
References: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
Message-ID: <CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>

Hi,

I don't think there is support for configuring the advertised IP address.
I don't know how EC2 ip forwarding works and how can you retrieve it.

To use another IP address, in FTP.ftp_PASV(), look for the following lines:

        self.dtpPort = self.getDTPPort(self.dtpFactory)

        host = self.transport.getHost().host
        port = self.dtpPort.getHost().port

Just replace 'self.transport.getHost().host' with your required IP or
another method for retrieving the IP address.

Cheers,
Adi

On 20 November 2012 22:47, Paul Wiseman <poalman at gmail.com> wrote:
> This possibly has nothing to do with twisted, but maybe if not someone may
> be able to point me in the right direction!
>
> Basically I've set up a twisted FTP server on ec2, and when a client tries
> to enter passive mode I'm getting this:
>
> Response: 227 Entering Passive Mode (x,x,x,x,159,122).
> Status: Server sent passive reply with unroutable address. Using server
> address instead.
>
> the x.x.x.x is the boxes private IP, rather than its public IP.
>
> It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0
>
> Is there somehow I can change the way twisted is getting the IP, or is this
> an issue with the server set up itself?
>
> Any pointers or help on what to look/check for would be of huge help!
>
> Thanks!
>
> Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Adi Roiban



From poalman at gmail.com  Tue Nov 20 15:02:02 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Tue, 20 Nov 2012 22:02:02 +0000
Subject: [Twisted-Python] ftp passive mode returning internal IP
In-Reply-To: <CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>
References: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
	<CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>
Message-ID: <CACgdh2jOnfMkVH+Yto7Lar+gxNZF_95LK5jdN6eYzQXdaAH+Uw@mail.gmail.com>

On 20 November 2012 21:31, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
>
> I don't think there is support for configuring the advertised IP address.
> I don't know how EC2 ip forwarding works and how can you retrieve it.
>
> To use another IP address, in FTP.ftp_PASV(), look for the following lines:
>
>         self.dtpPort = self.getDTPPort(self.dtpFactory)
>
>         host = self.transport.getHost().host
>         port = self.dtpPort.getHost().port
>
> Just replace 'self.transport.getHost().host' with your required IP or
> another method for retrieving the IP address.
>
> Cheers,
> Adi
>
>
Cheers Adi, I've made a function that launches 'curl ifconfig.me' through
subprocess, and I call that and save it when the server starts.

Is this definitely the only place where I need to override the host?

I'd rather wrap the transport object to be sure but twisted is still pretty
magic to me and I'm struggling to find out where this ProtocolWrapper
object is originating from.


> On 20 November 2012 22:47, Paul Wiseman <poalman at gmail.com> wrote:
> > This possibly has nothing to do with twisted, but maybe if not someone
> may
> > be able to point me in the right direction!
> >
> > Basically I've set up a twisted FTP server on ec2, and when a client
> tries
> > to enter passive mode I'm getting this:
> >
> > Response: 227 Entering Passive Mode (x,x,x,x,159,122).
> > Status: Server sent passive reply with unroutable address. Using server
> > address instead.
> >
> > the x.x.x.x is the boxes private IP, rather than its public IP.
> >
> > It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0
> >
> > Is there somehow I can change the way twisted is getting the IP, or is
> this
> > an issue with the server set up itself?
> >
> > Any pointers or help on what to look/check for would be of huge help!
> >
> > Thanks!
> >
> > Paul
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
>
>
>
> --
> Adi Roiban
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121120/abe48fe3/attachment.html>

From poalman at gmail.com  Wed Nov 21 10:35:33 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Wed, 21 Nov 2012 17:35:33 +0000
Subject: [Twisted-Python] utf-8 support for ftp
Message-ID: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>

I know this has been asked before, I've found it in several trackers.

http://twistedmatrix.com/trac/ticket/5411
http://twistedmatrix.com/trac/ticket/4515
http://twistedmatrix.com/trac/ticket/5100

Some of these were created a while ago, some with patches. I wondered what
the current status was with regards to utf-8 in ftp? Is it currently
possible?

I'm trying to list a folder called 'Paul's Mac Pro', this gets returned as
'Paulâ  s Mac Pro'. The client tries to list that folder, and the server
returns 'PaulÃ¢Â Â s Mac Pro: No such file or directory.' I think the
client is interpreting the bytes that make up the unicode char as separate
ascii characters. (maybe a problem with the client? FileZilla 3.6.0.1)

This problem may be made worse by my implementation of IFTPShell, I can try
to make an example if this isn't the expected result.

I'm returning all names and paths back encoded in utf-8, but maybe the
problem is the client isn't expecting it because there's no FEAT command
(is the patch in 4515 ok to add?)

I just want to get an idea of how I can best go about getting this to work.
Will I need to build in support, or is it available in a newer version, or
by applying some patches?

Thanks very much!!

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121121/dfbdf04d/attachment-0001.html>

From poalman at gmail.com  Wed Nov 21 10:45:17 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Wed, 21 Nov 2012 17:45:17 +0000
Subject: [Twisted-Python] utf-8 support for ftp
In-Reply-To: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
References: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
Message-ID: <CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>

On 21 November 2012 17:35, Paul Wiseman <poalman at gmail.com> wrote:
>
> I know this has been asked before, I've found it in several trackers.
>
> http://twistedmatrix.com/trac/ticket/5411
> http://twistedmatrix.com/trac/ticket/4515
> http://twistedmatrix.com/trac/ticket/5100
>
> Some of these were created a while ago, some with patches. I wondered
what the current status was with regards to utf-8 in ftp? Is it currently
possible?
>
> I'm trying to list a folder called 'Paul's Mac Pro', this gets returned
as 'Paulâ s Mac Pro'. The client tries to list that folder, and the server
returns 'PaulÃ¢Â Â s Mac Pro: No such file or directory.' I think the
client is interpreting the bytes that make up the unicode char as separate
ascii characters. (maybe a problem with the client? FileZilla 3.6.0.1)
>
> This problem may be made worse by my implementation of IFTPShell, I can
try to make an example if this isn't the expected result.
>
> I'm returning all names and paths back encoded in utf-8, but maybe the
problem is the client isn't expecting it because there's no FEAT command
(is the patch in 4515 ok to add?)
>
> I just want to get an idea of how I can best go about getting this to
work. Will I need to build in support, or is it available in a newer
version, or by applying some patches?
>
> Thanks very much!!
>
> Paul

>>> a= "Paulâ  s Mac Pro"  #This is what the client gets
>>>
>>> a
'Paul\xc3\xa2\xc2\x80\xc2\x99s Mac Pro'
>>> a.decode("utf-8")
u'Paul\xe2\x80\x99s Mac Pro' #utf-8 encoding in a unicode string???
>>>
>>> b= u"Paul's Mac Pro"
>>> b.encode("utf-8")
'Paul\xe2\x80\x99s Mac Pro'
>>>

So I'm not sure exactly what's happening here, but it's like path has been
encoded twice. Bit confused as to how this could be happening!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121121/fd1f84ab/attachment.html>

From adi at roiban.ro  Wed Nov 21 11:11:17 2012
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 21 Nov 2012 20:11:17 +0200
Subject: [Twisted-Python] ftp passive mode returning internal IP
In-Reply-To: <CACgdh2jOnfMkVH+Yto7Lar+gxNZF_95LK5jdN6eYzQXdaAH+Uw@mail.gmail.com>
References: <CACgdh2j2jr7RZ8T4rwyBqsYGp2f7SzGWfYBXj9HvugX2ZQLuMQ@mail.gmail.com>
	<CAFycZ9dkbgxKNm=OKVcrtsB5Sy4kKt5GWqfPwhz-rRAik_aetQ@mail.gmail.com>
	<CACgdh2jOnfMkVH+Yto7Lar+gxNZF_95LK5jdN6eYzQXdaAH+Uw@mail.gmail.com>
Message-ID: <CAFycZ9fdx6CZH1Fr=X34GSr59o=DB6M6PiRPAjCmuXv+ETfsQg@mail.gmail.com>

On 21 November 2012 00:02, Paul Wiseman <poalman at gmail.com> wrote:
> On 20 November 2012 21:31, Adi Roiban <adi at roiban.ro> wrote:
>>
>> Hi,
>>
>> I don't think there is support for configuring the advertised IP address.
>> I don't know how EC2 ip forwarding works and how can you retrieve it.
>>
>> To use another IP address, in FTP.ftp_PASV(), look for the following
>> lines:
>>
>>         self.dtpPort = self.getDTPPort(self.dtpFactory)
>>
>>         host = self.transport.getHost().host
>>         port = self.dtpPort.getHost().port
>>
>> Just replace 'self.transport.getHost().host' with your required IP or
>> another method for retrieving the IP address.
>>
>> Cheers,
>> Adi
>>
>
> Cheers Adi, I've made a function that launches 'curl ifconfig.me' through
> subprocess, and I call that and save it when the server starts.

> Is this definitely the only place where I need to override the host?

I can not guarantee that, but I think it should be the only place.

> I'd rather wrap the transport object to be sure but twisted is still pretty
> magic to me and I'm struggling to find out where this ProtocolWrapper object
> is originating from.

ftp.FTPFactory.buildProtocol is where the protocol is created,
including the ProtocolWrapper.

----

I don't know how EC2 port forwarding works, but as long it does an one
to one port mapping, changing the IP address in PASV response should
do the job.

Cheers,
Adi

>>
>> On 20 November 2012 22:47, Paul Wiseman <poalman at gmail.com> wrote:
>> > This possibly has nothing to do with twisted, but maybe if not someone
>> > may
>> > be able to point me in the right direction!
>> >
>> > Basically I've set up a twisted FTP server on ec2, and when a client
>> > tries
>> > to enter passive mode I'm getting this:
>> >
>> > Response: 227 Entering Passive Mode (x,x,x,x,159,122).
>> > Status: Server sent passive reply with unroutable address. Using server
>> > address instead.
>> >
>> > the x.x.x.x is the boxes private IP, rather than its public IP.
>> >
>> > It's getting this from ln. 851 in twisted/protocols/ftp.py v12.2.0
>> >
>> > Is there somehow I can change the way twisted is getting the IP, or is
>> > this
>> > an issue with the server set up itself?
>> >
>> > Any pointers or help on what to look/check for would be of huge help!
>> >
>> > Thanks!
>> >
>> > Paul
>> >
>> > _______________________________________________
>> > Twisted-Python mailing list
>> > Twisted-Python at twistedmatrix.com
>> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >
>>
>>
>>
>> --
>> Adi Roiban
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
Adi Roiban



From adi at roiban.ro  Thu Nov 22 04:35:28 2012
From: adi at roiban.ro (Adi Roiban)
Date: Thu, 22 Nov 2012 13:35:28 +0200
Subject: [Twisted-Python] utf-8 support for ftp
In-Reply-To: <CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>
References: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
	<CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>
Message-ID: <CAFycZ9fus22g47Fgxgt_6LDkaoKVPvUq4HEg486XW06H2_NGyg@mail.gmail.com>

On 21 November 2012 19:45, Paul Wiseman <poalman at gmail.com> wrote:
> On 21 November 2012 17:35, Paul Wiseman <poalman at gmail.com> wrote:
>>
>> I know this has been asked before, I've found it in several trackers.
>>
>> http://twistedmatrix.com/trac/ticket/5411
>> http://twistedmatrix.com/trac/ticket/4515
>> http://twistedmatrix.com/trac/ticket/5100
>>
>> Some of these were created a while ago, some with patches. I wondered what
>> the current status was with regards to utf-8 in ftp? Is it currently
>> possible?
>>
>> I'm trying to list a folder called 'Paul’s Mac Pro', this gets returned as
>> 'Paulâ s Mac Pro'. The client tries to list that folder, and the server
>> returns 'PaulÃ¢Â Â s Mac Pro: No such file or directory.' I think the client
>> is interpreting the bytes that make up the unicode char as separate ascii
>> characters. (maybe a problem with the client? FileZilla 3.6.0.1)
>>
>> This problem may be made worse by my implementation of IFTPShell, I can
>> try to make an example if this isn't the expected result.
>>
>> I'm returning all names and paths back encoded in utf-8, but maybe the
>> problem is the client isn't expecting it because there's no FEAT command (is
>> the patch in 4515 ok to add?)
>>
>> I just want to get an idea of how I can best go about getting this to
>> work. Will I need to build in support, or is it available in a newer
>> version, or by applying some patches?
>>
>> Thanks very much!!
>>
>> Paul

The patch from #4515 does little to provide a functional UTF-8 FTP
implementation.
It is there only to help advertise future implementation of UTF-8 support.

Thanks for reminding about #5411 . I have submitted a patch for review
together with required tests.

I have a few more FTP ticket in work/waiting for review. As soon as
they are done, I will look at UTF-8 support.

----

Patch #4515 is already in trunk, and together with patch for #5411 it
should be a good start for UTF-8 support.

Ticket #5100 is mainly about the default IFTPShell implementation, but
if you have your own IFTPShell implementation just make sure it
accepts input as str encoded utf-8 and that it output str encoded
utf-8

Cheers,

-- 
Adi Roiban



From poalman at gmail.com  Thu Nov 22 10:15:01 2012
From: poalman at gmail.com (Paul Wiseman)
Date: Thu, 22 Nov 2012 17:15:01 +0000
Subject: [Twisted-Python] utf-8 support for ftp
In-Reply-To: <CAFycZ9fus22g47Fgxgt_6LDkaoKVPvUq4HEg486XW06H2_NGyg@mail.gmail.com>
References: <CACgdh2jKgE5DDpnS9krvGizOOW8Zci06LQDXn1wG1tyiCgE=3Q@mail.gmail.com>
	<CACgdh2iCK6i91MLxP+frOK0eBTKLQ3Hy2oSyWXaWz1gqqryGcw@mail.gmail.com>
	<CAFycZ9fus22g47Fgxgt_6LDkaoKVPvUq4HEg486XW06H2_NGyg@mail.gmail.com>
Message-ID: <CACgdh2gD5feDgFS7-yqeN-UMi1CJEvPzq2pSu=8KyMh4N=ANgg@mail.gmail.com>

On 22 November 2012 11:35, Adi Roiban <adi at roiban.ro> wrote:

> On 21 November 2012 19:45, Paul Wiseman <poalman at gmail.com> wrote:
> > On 21 November 2012 17:35, Paul Wiseman <poalman at gmail.com> wrote:
> >>
> >> I know this has been asked before, I've found it in several trackers.
> >>
> >> http://twistedmatrix.com/trac/ticket/5411
> >> http://twistedmatrix.com/trac/ticket/4515
> >> http://twistedmatrix.com/trac/ticket/5100
> >>
> >> Some of these were created a while ago, some with patches. I wondered
> what
> >> the current status was with regards to utf-8 in ftp? Is it currently
> >> possible?
> >>
> >> I'm trying to list a folder called 'Paul’s Mac Pro', this gets returned
> as
> >> 'Paulâ s Mac Pro'. The client tries to list that folder, and the server
> >> returns 'PaulÃ¢Â Â s Mac Pro: No such file or directory.' I think the
> client
> >> is interpreting the bytes that make up the unicode char as separate
> ascii
> >> characters. (maybe a problem with the client? FileZilla 3.6.0.1)
> >>
> >> This problem may be made worse by my implementation of IFTPShell, I can
> >> try to make an example if this isn't the expected result.
> >>
> >> I'm returning all names and paths back encoded in utf-8, but maybe the
> >> problem is the client isn't expecting it because there's no FEAT
> command (is
> >> the patch in 4515 ok to add?)
> >>
> >> I just want to get an idea of how I can best go about getting this to
> >> work. Will I need to build in support, or is it available in a newer
> >> version, or by applying some patches?
> >>
> >> Thanks very much!!
> >>
> >> Paul
>
> The patch from #4515 does little to provide a functional UTF-8 FTP
> implementation.
> It is there only to help advertise future implementation of UTF-8 support.
>
> Thanks for reminding about #5411 . I have submitted a patch for review
> together with required tests.
>
> I have a few more FTP ticket in work/waiting for review. As soon as
> they are done, I will look at UTF-8 support.
>
>
Awesome- sounds good! I'll keep an eye out for it! :)


> ----
>
> Patch #4515 is already in trunk, and together with patch for #5411 it
> should be a good start for UTF-8 support.
>
> Ticket #5100 is mainly about the default IFTPShell implementation, but
> if you have your own IFTPShell implementation just make sure it
> accepts input as str encoded utf-8 and that it output str encoded
> utf-8
>

My IFPShell does this, I have crudely added ftp_FEAT and ftp_OPT to a
subclass of FTP which returns UTF8 in the list of features and responds
with CMD_OK for "UTF8 ON" OPT. Which will hopefully get me by until there
is support.

I'd like to help add support, but I'm not sure how you'd do it. The FTP
protocol needs to know what to return if a client asks UTF8 ON in OPT, but
it's up to the shell which needs to make sure it complies with this option
and return things in the right encoding? unless everything is returned in
unicode and the FTP protocol encodes it if utf8 is on, or throws an error
if anything is outside an ascii range.

but there are certain parts of it sound quite tricky to get right:

   "Prior to transmitting response code 200 in response to the OPTS UTF-8

   command, the Server-FTP must not transmit UTF-8 encoded pathnames and
   should not accept them on commands: the Server-FTP should transmit
   either response code 501 or 553 in reply to any command which
   includes a pathname outside the range of 7-bit ASCII; and the Server-
   FTP should transmit response code 550 in reply to any command to
   which the server would otherwise have sent a UTF-8 encoded pathname."

     http://tools.ietf.org/html/draft-ietf-ftpext-utf-8-option-00#page-6



> Cheers,
>
> --
> Adi Roiban
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121122/1a9798b2/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat Nov 24 22:05:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 25 Nov 2012 05:05:24 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1353819924.09.1920233987@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121125/5aece506/attachment-0001.html>

From hs at ox.cx  Tue Nov 27 02:16:35 2012
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 27 Nov 2012 10:16:35 +0100
Subject: [Twisted-Python] Making ConnectionPool not pool
Message-ID: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>

Hi,

I have a really bad time with the combination of a low-volume service  and adbapi.ConnectionPool, pyodbc, FreeTDS and Sybase.

Basically my connections just time out and fail in weird, generic ways like:

Error: ('01000', '[01000] [FreeTDS][SQL Server]Unexpected EOF from the server (20017) (SQLEndTran)')

(but in many others too, there is no real pattern)

In my desperation, I’m employing for-loops for the SQL queries now. :(

Since there isn’t much traffic (yet) I would like to just make ConnectionPool close the connections and re-open fresh ones, as soon as they are necessary.

Is there some straight-forward way to do that? Or any better approach I’ve overlooked?

TIA,
Hynek


From itamar at futurefoundries.com  Tue Nov 27 04:38:53 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Tue, 27 Nov 2012 06:38:53 -0500
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
Message-ID: <CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>

On Tue, Nov 27, 2012 at 4:16 AM, Hynek Schlawack <hs at ox.cx> wrote:

> Hi,
>
> I have a really bad time with the combination of a low-volume service  and
> adbapi.ConnectionPool, pyodbc, FreeTDS and Sybase.
>
> Basically my connections just time out and fail in weird, generic ways
> like:
>
> Error: ('01000', '[01000] [FreeTDS][SQL Server]Unexpected EOF from the
> server (20017) (SQLEndTran)')
>
> (but in many others too, there is no real pattern)
>

Have you tried enabling reconnects (cp_reconnect=True)? If "select 1"
doesn't work with your database you may also have to pass in custom
cp_good_sql.


> In my desperation, I’m employing for-loops for the SQL queries now. :(
>
> Since there isn’t much traffic (yet) I would like to just make
> ConnectionPool close the connections and re-open fresh ones, as soon as
> they are necessary.
>
> Is there some straight-forward way to do that? Or any better approach I’ve
> overlooked?
>

Don't use ConnectionPool at all. Just have a function that does the SQL
connect etc usually normal DB-API, and call it with
twisted.internet.threads.deferToThread:

 def dbTxn(x):
    conn = db.connect(...)
    cursor = conn.cursor()
    cursor.execute()
    result = cursor.fetchall()
    conn.close()
    return result

deferredResult = deferToThread(dbtxn, argForX)

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121127/0db2c6d7/attachment.html>

From hs at ox.cx  Tue Nov 27 05:49:11 2012
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 27 Nov 2012 13:49:11 +0100
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
Message-ID: <76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>

> I have a really bad time with the combination of a low-volume service  and adbapi.ConnectionPool, pyodbc, FreeTDS and Sybase.
> 
> Basically my connections just time out and fail in weird, generic ways like:
> 
> Error: ('01000', '[01000] [FreeTDS][SQL Server]Unexpected EOF from the server (20017) (SQLEndTran)')
> 
> (but in many others too, there is no real pattern)
> Have you tried enabling reconnects (cp_reconnect=True)? If "select 1" doesn't work with your database you may also have to pass in custom cp_good_sql.

Yep, and the connections *do* heal after dying. I don't have to restart twistd, it just takes a few failed requests to warm up again.

I tried to do a for loop like:

        succ = False
        for _ in range(self.dbpool.max + 1):
            try:
                yield self.dbpool.runOperation(self.dbpool.good_sql)
                succ = True
            except Exception:
                pass

        if not succ:
            raise pyodbc.Error(b'Found no healthy connection.')

…for new connections, but that helped only a bit. I presume once it finds a working connection, it keeps using it. But I still had failure within the session later.

> In my desperation, I’m employing for-loops for the SQL queries now. :(
> 
> Since there isn’t much traffic (yet) I would like to just make ConnectionPool close the connections and re-open fresh ones, as soon as they are necessary.
> 
> Is there some straight-forward way to do that? Or any better approach I’ve overlooked?
> Don't use ConnectionPool at all. Just have a function that does the SQL connect etc usually normal DB-API, and call it with twisted.internet.threads.deferToThread:
> 
>  def dbTxn(x):
>     conn = db.connect(...)
>     cursor = conn.cursor()
>     cursor.execute()
>     result = cursor.fetchall()
>     conn.close()
>     return result
> 
> deferredResult = deferToThread(dbtxn, argForX)

Sounds like a solid backup plan, thanks!

The only reason I’d prefer to stay with pooling is that I very much expect the traffic to rise and wouldn’t really want to change away and go back later. :(

Cheers,
Hynek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121127/67ad1260/attachment.html>

From exarkun at twistedmatrix.com  Tue Nov 27 06:39:07 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 27 Nov 2012 13:39:07 -0000
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
	<76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
Message-ID: <20121127133907.3980.357279128.divmod.xquotient.22@localhost6.localdomain6>

On 12:49 pm, hs at ox.cx wrote:
>
>The only reason I’d prefer to stay with pooling is that I very much 
>expect the traffic to rise and wouldn’t really want to change away and 
>go back later. :(

Then I'd strongly recommend taking a look at twext.enterprise:

http://trac.calendarserver.org/browser/CalendarServer/trunk/twext/enterprise

There's a good chance this will become part of Twisted as a replacement 
for twisted.enterprise at some point.  So any experience you get with it 
now should serve you well in the future.  Plus, if you find it also 
can't deal with your situation, then it'd be nice if we knew that now. 
:)

Jean-Paul



From p.mayers at imperial.ac.uk  Tue Nov 27 06:41:54 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 27 Nov 2012 13:41:54 +0000
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
	<76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
Message-ID: <50B4C322.6060209@imperial.ac.uk>

On 27/11/12 12:49, Hynek Schlawack wrote:

> Yep, and the connections *do* heal after dying. I don't have to restart
> twistd, it just takes a few failed requests to warm up again.

Yes - one attempt per thread in the pool.

It is a pain. But as per recent discussions on the list, there's no 
consensus about how to handle this.



From hoooooosety at gmail.com  Tue Nov 27 07:04:13 2012
From: hoooooosety at gmail.com (holsety huang)
Date: Tue, 27 Nov 2012 22:04:13 +0800
Subject: [Twisted-Python] spawnProcess and kill the child process.
Message-ID: <CAL+MxDFC_cV0orLQjjS7=-x7j_5ysDOU+XGeMMQDdxZXzTLsBA@mail.gmail.com>

hi, all

I start a process using spawnProcess and want to kill when my certain
Factory stops.

something I wrote like these


----------

p = SomeProtocol(ProcessProtocol)

reactor.spawnProcess(p, 'twistd', ['twistd', '-y', 'anotherMain.py'], {})

----------

class Factory(ServerFactory):
...

def StopFactory(self):
 # which is the p above
 p.transport.signalProcess("KILL")

I thought the subprocess will be killed which is not.

I tried using p.transport.signalProcess("KILL") some other place, and it
works.

What's wrong with my code? Thanks!

P.S, which is the best way to shut down a twistd, I send the TERM to it
now. It just work fine.


Regards, Huang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121127/79d196da/attachment.html>

From hs at ox.cx  Tue Nov 27 07:59:39 2012
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 27 Nov 2012 15:59:39 +0100
Subject: [Twisted-Python] Making ConnectionPool not pool
In-Reply-To: <20121127133907.3980.357279128.divmod.xquotient.22@localhost6.localdomain6>
References: <FF04626F-3CDA-46A4-8A18-E3A4885EBCF7@ox.cx>
	<CAOp9P3pY8E=aHyKe=jFc2VbXznxrT3W37wZz80UBi3pVv9N00g@mail.gmail.com>
	<76D28871-F2A9-4649-971C-907FA81FC5BD@ox.cx>
	<20121127133907.3980.357279128.divmod.xquotient.22@localhost6.localdomain6>
Message-ID: <A6F86628-7D82-4999-9ECE-65DC908C9B59@ox.cx>


Am 27.11.2012 um 14:39 schrieb exarkun at twistedmatrix.com:

>> The only reason I’d prefer to stay with pooling is that I very much 
>> expect the traffic to rise and wouldn’t really want to change away and 
>> go back later. :(
> Then I'd strongly recommend taking a look at twext.enterprise:
> 
> http://trac.calendarserver.org/browser/CalendarServer/trunk/twext/enterprise
> 
> There's a good chance this will become part of Twisted as a replacement 
> for twisted.enterprise at some point.  So any experience you get with it 
> now should serve you well in the future.  Plus, if you find it also 
> can't deal with your situation, then it'd be nice if we knew that now. 
> :)

Gladly! Do I see it correctly, that the current canonical way to use it, is to svn co it?


From hoooooosety at gmail.com  Tue Nov 27 06:59:31 2012
From: hoooooosety at gmail.com (=?GB2312?B?u8Yg6fPD9w==?=)
Date: Tue, 27 Nov 2012 21:59:31 +0800
Subject: [Twisted-Python] spawnProcess and when to kill
Message-ID: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>

hi, all

I start a process using spawnProcess and want to kill when my certain Factory stops.

something I wrote like these


----------

p = SomeProtocol(ProcessProtocol)

reactor.spawnProcess(p, 'twistd', ['twistd', '-y', 'anotherMain.py'], {})

----------

class Factory(ServerFactory):
...

	def StopFactory(self):
		# which is the p above
		p.transport.signalProcess("KILL")

I thought the subprocess will be killed which is not.


What's wrong with my code? Thanks!


Regards, Huang

黄 轶明
mail: hoooooosety at gmail.com
phone: 18620129285

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121127/fdb0ba48/attachment-0001.html>

From exarkun at twistedmatrix.com  Tue Nov 27 18:52:35 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 28 Nov 2012 01:52:35 -0000
Subject: [Twisted-Python] spawnProcess and when to kill
In-Reply-To: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
References: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
Message-ID: <20121128015235.3980.567482501.divmod.xquotient.88@localhost6.localdomain6>

On 27 Nov, 01:59 pm, hoooooosety at gmail.com wrote:
>hi, all
>
>I start a process using spawnProcess and want to kill when my certain 
>Factory stops.
>
>something I wrote like these

Hi,

Please don't double-post and please don't reply to another message when 
starting a new topic.

Thanks.

Jean-Paul



From hoooooosety at gmail.com  Tue Nov 27 18:57:45 2012
From: hoooooosety at gmail.com (=?GB2312?B?u8Yg6fPD9w==?=)
Date: Wed, 28 Nov 2012 09:57:45 +0800
Subject: [Twisted-Python] spawnProcess and when to kill
In-Reply-To: <20121128015235.3980.567482501.divmod.xquotient.88@localhost6.localdomain6>
References: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
	<20121128015235.3980.567482501.divmod.xquotient.88@localhost6.localdomain6>
Message-ID: <31966440-582D-4900-BFAE-1E6834B58090@gmail.com>

hi, JP

I post the same question on stackoverflow, and my network has some problem yesterday, so I don't know if I send the email
success or not.

Please accept my pologize.
黄 轶明
mail: hoooooosety at gmail.com
phone: 18620129285

在 2012-11-28，上午9:52，exarkun at twistedmatrix.com 写道：

> On 27 Nov, 01:59 pm, hoooooosety at gmail.com wrote:
>> hi, all
>> 
>> I start a process using spawnProcess and want to kill when my certain 
>> Factory stops.
>> 
>> something I wrote like these
> 
> Hi,
> 
> Please don't double-post and please don't reply to another message when 
> starting a new topic.
> 
> Thanks.
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From itamar at futurefoundries.com  Wed Nov 28 00:04:29 2012
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Wed, 28 Nov 2012 02:04:29 -0500
Subject: [Twisted-Python] spawnProcess and when to kill
In-Reply-To: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
References: <406784E0-B070-4DE3-AA19-F1ADB6D5AF4B@gmail.com>
Message-ID: <CAOp9P3rHT1QeTO8BQiUWU1J5v5sN3Bmpd5dpFetSh+qk_fz33A@mail.gmail.com>

On Tue, Nov 27, 2012 at 8:59 AM, 黄 轶明 <hoooooosety at gmail.com> wrote:

>
> class Factory(ServerFactory):
> ...
>
> def StopFactory(self):
>  # which is the p above
>  p.transport.signalProcess("KILL")
>
> I thought the subprocess will be killed which is not.
>
>
> What's wrong with my code? Thanks!
>

Perhaps StopFactory is not being called? Are you calling it? If not, and
you expected the reactor to call it when you stopped listening, it should
be stopFactory, rather than StopFactory.

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121128/c5987b31/attachment.html>

From raphael at uaca.com  Thu Nov 29 08:43:49 2012
From: raphael at uaca.com (Raphael Shu)
Date: Fri, 30 Nov 2012 00:43:49 +0900
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
	<582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
Message-ID: <CAMf6tMndyX89TMLBce2ueXaQHVAUJnGpath+zaCCvZFia1egzg@mail.gmail.com>

Err... how could I create a page on our wiki to describe usage and
dependencies for twistedchecker?

On Tue, Nov 20, 2012 at 1:46 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <
> itamar at futurefoundries.com> wrote:
>
>
>
> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
>
>> Hi,
>>
>> What is the status of Twisted Checker?
>>
>> I could not find anything related to TwistedChecker on the website:
>> http://twistedmatrix.com/trac/search?q=twistedchecker
>>
>> ----
>>
>> Is there a bug report or web page discussing the
>> requirements/specifications for a Twisted Checker?
>>
>
> http://launchpad.net/twistedchecker has a bunch of tickets, and the code.
>
>
> It seems like the existence of this tool should be documented somewhere on
> our wiki (ReviewProcess, perhaps) as well as what to do with its output?
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
 *Raphael Shu , UACA 2012*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121130/8a1e2a7a/attachment-0001.html>

From glyph at twistedmatrix.com  Thu Nov 29 09:55:19 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 29 Nov 2012 11:55:19 -0500
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAMf6tMndyX89TMLBce2ueXaQHVAUJnGpath+zaCCvZFia1egzg@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
	<CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>
	<CAFycZ9c+CETq4HDmEnipzRiwa5r1Q-PTLQ+e9HgmxrgQj+zgEQ@mail.gmail.com>
	<CAOp9P3rcD+x74GtoDmSBg2fEE7aVWxVginFKYdRmQ06q8fWtsA@mail.gmail.com>
	<582BC866-724B-4A81-8783-691B10025363@twistedmatrix.com>
	<CAMf6tMndyX89TMLBce2ueXaQHVAUJnGpath+zaCCvZFia1egzg@mail.gmail.com>
Message-ID: <717CC007-19B7-4A59-B026-57032A3F0DDD@twistedmatrix.com>

On Nov 29, 2012, at 10:43 AM, Raphael Shu <raphael at uaca.com> wrote:

> On Tue, Nov 20, 2012 at 1:46 PM, Glyph <glyph at twistedmatrix.com> wrote:
> On Nov 18, 2012, at 1:54 PM, Itamar Turner-Trauring <itamar at futurefoundries.com> wrote:
>> On Sun, Nov 18, 2012 at 8:26 AM, Adi Roiban <adi at roiban.ro> wrote:
>> Hi,
>> 
>> What is the status of Twisted Checker?
>> 
>> I could not find anything related to TwistedChecker on the website:
>> http://twistedmatrix.com/trac/search?q=twistedchecker
>> 
>> ----
>> 
>> Is there a bug report or web page discussing the
>> requirements/specifications for a Twisted Checker?
>> 
>> http://launchpad.net/twistedchecker has a bunch of tickets, and the code. 
> 
> It seems like the existence of this tool should be documented somewhere on our wiki (ReviewProcess, perhaps) as well as what to do with its output?
> 
> -glyph
> 
> Err... how could I create a page on our wiki to describe usage and dependencies for twistedchecker?

You do need wiki-edit permission to do this.  I have just granted it to you - assuming I properly remembered that your trac handle is "zomux".  Now you can simply log in to twistedmatrix.com, and go to, for example, <http://twistedmatrix.com/trac/wiki/TwistedChecker> and click the "create this page" button.  Most other pages should have a button at the bottom now saying "Edit this page".

Thank you, and please let us know when you have written something!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121129/810477cd/attachment.html>

From rodrigc at crodrigues.org  Thu Nov 29 13:08:39 2012
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Thu, 29 Nov 2012 12:08:39 -0800
Subject: [Twisted-Python] Download instructions for twisted and ActiveState
	Python
Message-ID: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>

Hi,

At some of the Twisted Sprints in San Francisco,
I found that on my Windows laptop, it was
easy to set things up Twisted quickly by using the
ActiveState Python package manager (pypm).

I wrote some notes for doing this at:
http://home.comcast.net/~rodrigc/python/twisted_install.html

Rather than keep that info on my own web page, I thought
it would be nice to contribute the information back to the Twisted wiki.
This would not be the official way of installing Twisted on
Windows, but would be some helpful information for
an alternative way to install things on Windows.

Since I do not have wiki edit permissions, I made a patch
to http://twistedmatrix.com/trac/wiki/Downloads .
If someone could help get this info on the wiki that would
be great.

-- 
Craig Rodrigues
rodrigc at crodrigues.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121129/fd8a98d5/attachment-0001.html>
-------------- next part --------------
--- Downloads.html.orig	2012-11-24 18:49:35.000000000 -0800
+++ Downloads.html	2012-11-24 20:01:20.000000000 -0800
@@ -101,7 +101,27 @@
 </li><li><a class="ext-link" href="http://pypi.python.org/pypi/zope.interface#download"><span class="icon">&nbsp;</span>Zope.Interface</a> (required)
 </li><li><a class="ext-link" href="http://twistedmatrix.com/Releases/Dependencies/Win/pycrypto-2.0.1.win32-py2.5.exe"><span class="icon">&nbsp;</span>PyCrypto 2.0.1 for Python 2.5</a> (needed for Conch)
 </li><li><a class="ext-link" href="http://pypi.python.org/pypi/pyOpenSSL"><span class="icon">&nbsp;</span>PyOpenSSL</a> (needed for SSL)
-</li></ul><h2 id="MacOSX">Mac OS X<a title="Link to this section" href="#MacOSX" class="anchor"> ¶</a></h2>
+</li></ul>
+<h2 id="Windows - ActivePython">Windows - ActivePython<a title="Link to this section" href="#Windows_ActivePython" class="anchor"> ¶</a></h2>
+<p>
+Alternatively, Windows users may wish to install Twisted by using the
+<a class="ext-link" href="http://www.activestate.com/activepython">ActivePython distribution of Python</a>,
+which includes the 
+<a class="ext-link" href="http://docs.activestate.com/activepython/2.7/pypm.html">pypm</a>
+package manager.
+</p>
+<ol>
+<li>Download the ActivePython distribution.</li>
+<li>Open a Windows Command Prompt, and run this command:  <b>pypm install twisted</b></li>
+<li>Verify that Twisted was installed with this command: <b>pypm ls</b></li>
+</ol>
+<p>
+Additional help for pypm is available by running: <b>pypm help</b> and by
+reading the <a class="ext-link" href="http://docs.activestate.com/activepython/2.7/pypm.html">PyPM Tutorial</a>.
+Many other Python packages which are listed at the <a class="ext-link" href="http://code.activestate.com/pypm/">PyPM Index</a>
+can be installed with pypm.
+</p>
+<h2 id="MacOSX">Mac OS X<a title="Link to this section" href="#MacOSX" class="anchor"> ¶</a></h2>
 <p>
 Twisted is no longer making a .dmg which creates a system installation 
 for OS X because OS X versions 10.5 and greater ship with Twisted 
@@ -223,4 +243,4 @@
         </div>
     </div>
   
-</body></html>
\ No newline at end of file
+</body></html>

From rodrigc at crodrigues.org  Thu Nov 29 13:27:47 2012
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Thu, 29 Nov 2012 12:27:47 -0800
Subject: [Twisted-Python] Free Coursera course on network software design
	patterns
Message-ID: <CAG=rPVdEKk0qBfu3MePhVPOA2E4mMf=X-mDLTCTdgvBeAHmVNg@mail.gmail.com>

Hi,

I saw a new free course being offered by Coursera and
thought it might be interesting to Twisted developers.

Professor Douglas C. Schmidt of Vanderbilt University
is teaching a free Coursera course over the Internet for 6 weeks:

"Pattern-Oriented Software Architectures for Concurrent
 and Networked Software"
https://www.coursera.org/course/posa

Prof. Schmidt has been working in distributed systems
and middleware for quite a while, and has written many
papers in this area, including some papers in the 1990's on the Reactor and
Proactor patterns:

http://www.cs.wustl.edu/~schmidt/PDF/reactor-siemens.pdf
http://www.cs.wustl.edu/~schmidt/PDF/proactor.pdf

Prof. Schmidt also implemented these patterns in the
ACE C++ framework.  As someone who in the past has worked
on ACE, I see a lot of similar ideas and concepts
in Twisted.  However, working with Python and Twisted is much
more fun than C++. :)

It might be interesting to follow along the Coursera course, and
implement the problem sets in Twisted.

-- 
Craig Rodrigues
rodrigc at crodrigues.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121129/b8fbebd2/attachment.html>

From glyph at twistedmatrix.com  Thu Nov 29 13:45:02 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 29 Nov 2012 15:45:02 -0500
Subject: [Twisted-Python] Download instructions for twisted and
	ActiveState Python
In-Reply-To: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
References: <CAG=rPVcAObwspoMpg8T7P-TVgyeFsepx7XZ6VeXpjJ881mc4_g@mail.gmail.com>
Message-ID: <E10AEED1-CD54-4CA4-A2AF-577F8EE62A70@twistedmatrix.com>


On Nov 29, 2012, at 3:08 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> Hi,
> 
> At some of the Twisted Sprints in San Francisco,
> I found that on my Windows laptop, it was
> easy to set things up Twisted quickly by using the
> ActiveState Python package manager (pypm).
> 
> I wrote some notes for doing this at:
> http://home.comcast.net/~rodrigc/python/twisted_install.html
> 
> Rather than keep that info on my own web page, I thought
> it would be nice to contribute the information back to the Twisted wiki.
> This would not be the official way of installing Twisted on
> Windows, but would be some helpful information for
> an alternative way to install things on Windows.
> 
> Since I do not have wiki edit permissions, I made a patch
> to http://twistedmatrix.com/trac/wiki/Downloads .
> If someone could help get this info on the wiki that would
> be great.

Thanks for doing this; but, we mostly have wiki edit permissions just to keep out the spammers.  If you'd like to edit the wiki, just ask!  (with your trac username).

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121129/0de330a1/attachment.html>

From glyph at twistedmatrix.com  Thu Nov 29 13:49:49 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 29 Nov 2012 15:49:49 -0500
Subject: [Twisted-Python] Free Coursera course on network software
	design patterns
In-Reply-To: <CAG=rPVdEKk0qBfu3MePhVPOA2E4mMf=X-mDLTCTdgvBeAHmVNg@mail.gmail.com>
References: <CAG=rPVdEKk0qBfu3MePhVPOA2E4mMf=X-mDLTCTdgvBeAHmVNg@mail.gmail.com>
Message-ID: <AA199BE8-0EFC-43BF-9CC4-FA6FCFD90303@twistedmatrix.com>


On Nov 29, 2012, at 3:27 PM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:

> Prof. Schmidt has been working in distributed systems
> and middleware for quite a while, and has written many
> papers in this area, including some papers in the 1990's on the Reactor and Proactor patterns:

In the interest of giving credit where credit is due, I should say that I'm a big fan of Prof. Schmidt and I read both of those papers when first implementing Twisted.  They were very educational.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20121129/7c23c3b4/attachment.html>

