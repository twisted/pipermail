<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Gc of deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Gc%20of%20deferreds&In-Reply-To=C8853DE689283B47B5D348BC33E0619311D00E76%40gsmbnmp04es.firmwide.corp.gs.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018071.html">
   <LINK REL="Next"  HREF="018072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Gc of deferreds</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Gc%20of%20deferreds&In-Reply-To=C8853DE689283B47B5D348BC33E0619311D00E76%40gsmbnmp04es.firmwide.corp.gs.com"
       TITLE="[Twisted-Python] Gc of deferreds">glyph at divmod.com
       </A><BR>
    <I>Tue Jul  8 16:39:10 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018071.html">[Twisted-Python] Gc of deferreds
</A></li>
        <LI>Next message: <A HREF="018072.html">[Twisted-Python] Re: [Twisted-bugs] pydoctor should put the module name at the beginning of the document title
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18070">[ date ]</a>
              <a href="thread.html#18070">[ thread ]</a>
              <a href="subject.html#18070">[ subject ]</a>
              <a href="author.html#18070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 08:11 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">benjamin.rutt at gs.com</A> wrote:
&gt;<i>In the following program, what prevents the deferred &quot;d&quot; from being
</I>&gt;<i>gc'd?  (nothing saves the return of foo() in any variable).  Do I need
</I>&gt;<i>to keep a reference to it around to ensure the callbacks will run?
</I>
The reactor has a reference to a process transport.

The process transport has a reference to its process protocol, 
specifically a twisted.internet.utils._BackRelay.

The process protocol has a reference to the Deferred.

When the reactor learns that there is some information available for the 
process transport, it relays it to the transport which relays it to the 
protocol which may deliver it to the Deferred.

When the event fires which causes the Deferred to be called back, some 
of these references are broken, and it can generally be GC'd (unless 
there are more references or more callbacks).
&gt;<i>I am just questioning the need to keep deferreds in memory somewhere, 
</I>&gt;<i>if
</I>&gt;<i>they haven't fired their callbacks yet.  Thanks.
</I>
I don't understand this question.  If the Deferred isn't in memory, then 
the callback will never be called.  All Deferreds which have interesting 
effects hang around for a while until those callbacks are called.  Are 
you suggesting that the Deferred get written out to disk or something, 
so it can be removed from memory?  There are a whole lot of reasons why 
*that* doesn't make any sense :).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018071.html">[Twisted-Python] Gc of deferreds
</A></li>
	<LI>Next message: <A HREF="018072.html">[Twisted-Python] Re: [Twisted-bugs] pydoctor should put the module name at the beginning of the document title
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18070">[ date ]</a>
              <a href="thread.html#18070">[ thread ]</a>
              <a href="subject.html#18070">[ subject ]</a>
              <a href="author.html#18070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
