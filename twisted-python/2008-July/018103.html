<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deferred.setTimeout is deprecated,	replacement ideas?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferred.setTimeout%20is%20deprecated%2C%0A%09replacement%20ideas%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018102.html">
   <LINK REL="Next"  HREF="018105.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deferred.setTimeout is deprecated,	replacement ideas?</H1>
    <B>Gabriel Rossetti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferred.setTimeout%20is%20deprecated%2C%0A%09replacement%20ideas%3F&In-Reply-To="
       TITLE="[Twisted-Python] Deferred.setTimeout is deprecated,	replacement ideas?">gabriel.rossetti at arimaz.com
       </A><BR>
    <I>Wed Jul 16 05:00:11 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018102.html">[Twisted-Python] twisted adbapi question
</A></li>
        <LI>Next message: <A HREF="018105.html">[Twisted-Python] Deferred.setTimeout is deprecated,	replacement	ideas?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18103">[ date ]</a>
              <a href="thread.html#18103">[ thread ]</a>
              <a href="subject.html#18103">[ subject ]</a>
              <a href="author.html#18103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

I was going to use Deferred.setTimeout until I saw that it was 
deprecated. Does anyone know why? I found it handy and I find that 
case-per-case replacements tend to be complicated. Does anyone have any 
ideas on how to replace it?

 I have a queue containing read results from I/O, the get() method 
returns a deferred fired when the data arrives (sort of like 
defer.DeferredQueue). Since I need to be able to set a read timeout, 
i.e. if the data doesn't arrive after a certain time, I need to raise an 
exception and remove the deferred from the internal list; the defer's 
timeout would have been handy here :-(.

I was thinking of doing something like this, if data isn't present in 
the data internal list:

d = Deferred()
dc = reactor.callLater(self.timeout, self.__timeoutCallback, d)
d.addCallback(self.__timeoutCanceller)

Then a tuple containing the Deferred (&quot;d&quot;), the DelayedCall (&quot;dc&quot;) is 
then put in the internal waiting list. If the timeout doesn't expire 
before the data arrives, then the DelayedCall is canceled, if it does 
expire then the tuple is removed from the queue (potentially slow) and 
an exception is raised.

Is there a better way of doing this? Any ideas?

Thank you,
Gabriel


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018102.html">[Twisted-Python] twisted adbapi question
</A></li>
	<LI>Next message: <A HREF="018105.html">[Twisted-Python] Deferred.setTimeout is deprecated,	replacement	ideas?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18103">[ date ]</a>
              <a href="thread.html#18103">[ thread ]</a>
              <a href="subject.html#18103">[ subject ]</a>
              <a href="author.html#18103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
