<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Tie two event loops
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Tie%20two%20event%20loops&In-Reply-To=3c3d11cf0807020746k3615323esfa4f049c97216ffb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018022.html">
   <LINK REL="Next"  HREF="018018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Tie two event loops</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Tie%20two%20event%20loops&In-Reply-To=3c3d11cf0807020746k3615323esfa4f049c97216ffb%40mail.gmail.com"
       TITLE="[Twisted-Python] Tie two event loops">glyph at divmod.com
       </A><BR>
    <I>Wed Jul  2 15:18:05 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018022.html">[Twisted-Python] Tie two event loops
</A></li>
        <LI>Next message: <A HREF="018018.html">[Twisted-Python] Re: Twisted Hosting and Twisted in the Cloud 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18023">[ date ]</a>
              <a href="thread.html#18023">[ thread ]</a>
              <a href="subject.html#18023">[ subject ]</a>
              <a href="author.html#18023">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02:46 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">paulalexwilson at gmail.com</A> wrote:
&gt;<i>I'm creating a server that accepts client connections and then drives
</I>&gt;<i>the client according to a simple, line-oriented protocol. The server
</I>&gt;<i>sends the request (1 line), and receives a single lined result. I'd
</I>&gt;<i>like the server to offer an API to generate the correct request lines
</I>&gt;<i>to the client, and return the results (either blocking or
</I>&gt;<i>asynchronously). So in effect, I have two event loops, one from the
</I>&gt;<i>Network and one from whatever's sending the API requests (command
</I>&gt;<i>line?).
</I>
&gt;<i>Can anyone offer any guidance on how to tie these two parts together?
</I>
As you are new to Twisted, I would strongly recommend ignoring the 
&quot;either blocking or asynchronously&quot; part, and simply return the results 
asynchronously, in a Deferred.  It's *possible* to do what you want, but 
to really understand what's going on well enough to pull it off you need 
to be pretty well-versed in the event-driven programming model, as well 
as gnarly implementation specifics of Twisted itself.  In my experience, 
most places that people think that they want async+sync interfaces to 
something, they actually just want async+convenient.  Here are some ways 
you could get some benefits of a synchronous API without actually having 
one:

If you are talking about generating requests from an interactive Python 
interpreter, you might consider using the interpreter bundled with 
Conch.  Try invoking it with 'python -m twisted/conch/stdio'.  This 
command line will notice when it receives a Deferred and display a 
result when it arrives.

If you are talking about your *own* command line, consider using 
twisted.internet.stdio.StandardIO to get it to communicate with the main 
event loop.

If this isn't really about command-lines but you want to write little 
&quot;scripts&quot; that have extended conversations with a client and process 
lots of different results, consider using the 
twisted.internet.defer.inlineCallbacks decorator with Python 2.5 
generators.  This syntactic convenience will let you avoid defining 
functions to handle callbacks, and will therefore shorten certain kinds 
of code.

I hope one of those solutions helps!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018022.html">[Twisted-Python] Tie two event loops
</A></li>
	<LI>Next message: <A HREF="018018.html">[Twisted-Python] Re: Twisted Hosting and Twisted in the Cloud 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18023">[ date ]</a>
              <a href="thread.html#18023">[ thread ]</a>
              <a href="subject.html#18023">[ subject ]</a>
              <a href="author.html#18023">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
