<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Waiting for transports to close
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Waiting%20for%20transports%20to%20close&In-Reply-To=%3C56719E9F.8090301%40googlemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="062521.html">
   <LINK REL="Next"  HREF="062530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Waiting for transports to close</H1>
    <B>Chris Norman</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Waiting%20for%20transports%20to%20close&In-Reply-To=%3C56719E9F.8090301%40googlemail.com%3E"
       TITLE="[Twisted-Python] Waiting for transports to close">chris.norman2 at googlemail.com
       </A><BR>
    <I>Wed Dec 16 10:25:51 MST 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="062521.html">[Twisted-Python] Python 2.7 on CentOS 6
</A></li>
        <LI>Next message (by thread): <A HREF="062530.html">[Twisted-Python] Waiting for transports to close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30061">[ date ]</a>
              <a href="thread.html#30061">[ thread ]</a>
              <a href="subject.html#30061">[ subject ]</a>
              <a href="author.html#30061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,
I'm writing a MUD server, and I want a way for transports to be notified 
ofa shutdown before being disconnected, and the reactor being stopped.

I've tried:

for t in transports:
  t.write('Shutting down.\r\n')
  t.loseConnection()
reactor.stop()

This doesn't seem to notify the transports.

I also tried:
for t in transports:
  t.write('Shutting down.\r\n')
  t.loseConnection()
  while t.connected:
   pass
reactor.stop()

That just blocked and did nothing, presumably something do with my while 
loop.

Is there a stopWhenEmpty function on the somewhere? I did look over the 
methods, and I couldn't find anything promising.

I'm just using the standard from twisted.internet import reactor 
reactor, so no special cases here. In case it matters the transports I'm 
using are twisted.protocols.basic.LineReceiver, and everything else 
works with them.

Cheers in advance for the help.

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="062521.html">[Twisted-Python] Python 2.7 on CentOS 6
</A></li>
	<LI>Next message (by thread): <A HREF="062530.html">[Twisted-Python] Waiting for transports to close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30061">[ date ]</a>
              <a href="thread.html#30061">[ thread ]</a>
              <a href="subject.html#30061">[ subject ]</a>
              <a href="author.html#30061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
