<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] What are the relationships between twisted.cred.portal.IRealm, Portal and avatar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20What%20are%20the%20relationships%20between%0A%20twisted.cred.portal.IRealm%2C%20Portal%20and%20avatar&In-Reply-To=%3C53a7c409.c7e8.1519c098ce7.Coremail.snailcoder%40163.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] What are the relationships between twisted.cred.portal.IRealm, Portal and avatar</H1>
    <B>Wang Yan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20What%20are%20the%20relationships%20between%0A%20twisted.cred.portal.IRealm%2C%20Portal%20and%20avatar&In-Reply-To=%3C53a7c409.c7e8.1519c098ce7.Coremail.snailcoder%40163.com%3E"
       TITLE="[Twisted-Python] What are the relationships between twisted.cred.portal.IRealm, Portal and avatar">snailcoder at 163.com
       </A><BR>
    <I>Sun Dec 13 08:50:50 MST 2015</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62503">[ date ]</a>
              <a href="thread.html#62503">[ thread ]</a>
              <a href="subject.html#62503">[ subject ]</a>
              <a href="author.html#62503">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to use Twisted's HTTP basic authentication to control access to some protected resources.


According to some articles, it is necessary to use three important concepts: Realm, Portal and avatar. Now I'm wondering if the Realm and avatar is one to one correspondence.


Let's look at an example(<A HREF="http://www.red-bean.com/doc/python-twisted-web/examples/webguard.py">http://www.red-bean.com/doc/python-twisted-web/examples/webguard.py</A>):


import sys

from zope.interface import implements

from twisted.python import log
from twisted.internet import reactor
from twisted.web import server, resource, guard
from twisted.cred.portal import IRealm, Portal
from twisted.cred.checkers import InMemoryUsernamePasswordDatabaseDontUse


class GuardedResource(resource.Resource):
    &quot;&quot;&quot;
    A resource which is protected by guard and requires authentication in order
    to access.
    &quot;&quot;&quot;
    def getChild(self, path, request):
        return self


    def render(self, request):
        return &quot;Authorized!&quot;



class SimpleRealm(object):
    &quot;&quot;&quot;
    A realm which gives out L{GuardedResource} instances for authenticated
    users.
    &quot;&quot;&quot;
    implements(IRealm)

    def requestAvatar(self, avatarId, mind, *interfaces):
        if resource.IResource in interfaces:
            return resource.IResource, GuardedResource(), lambda: None
        raise NotImplementedError()



def main():
    log.startLogging(sys.stdout)
    checkers = [InMemoryUsernamePasswordDatabaseDontUse(joe='blow')]
    wrapper = guard.HTTPAuthSessionWrapper(
        Portal(SimpleRealm(), checkers),
        [guard.DigestCredentialFactory('md5', 'example.com')])
    reactor.listenTCP(8889, server.Site(
          resource = wrapper))
    reactor.run()

if __name__ == '__main__':
    main()


Of course I know the SimpleRealm is used to return the corresponding resource, e.g. GuardedResource in above example. However, I don't know what to do when there lots of resources to be guarded. For example, I have GuardedResource1, GuardedResource2 and GuardedResource3, maybe they need the same or different number of parameters when they are initialized; If so, is it necessary to implement SimpleRealm1, SimpleRealm2 and SimpleRealm3, respectively? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20151213/66fa0e79/attachment-0002.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62503">[ date ]</a>
              <a href="thread.html#62503">[ thread ]</a>
              <a href="subject.html#62503">[ subject ]</a>
              <a href="author.html#62503">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
