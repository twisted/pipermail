<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.web response.py questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.web%20response.py%20questions&In-Reply-To=%3C91133F64-BB36-4F28-8C21-47EA9DB4A076%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="030021.html">
   <LINK REL="Next"  HREF="030020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.web response.py questions</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.web%20response.py%20questions&In-Reply-To=%3C91133F64-BB36-4F28-8C21-47EA9DB4A076%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] twisted.web response.py questions">glyph at twistedmatrix.com
       </A><BR>
    <I>Sun Dec  6 23:52:23 MST 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="030021.html">[Twisted-Python]  twisted.web response.py questions
</A></li>
        <LI>Next message (by thread): <A HREF="030020.html">[Twisted-Python] Attaching the release number to a closed/merged	ticket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62491">[ date ]</a>
              <a href="thread.html#62491">[ thread ]</a>
              <a href="subject.html#62491">[ subject ]</a>
              <a href="author.html#62491">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Dec 4, 2015, at 4:42 AM, peter &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">commercials24 at yahoo.de</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> hi,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> looking over:
</I>&gt;<i> <A HREF="https://twistedmatrix.com/documents/14.0.2/_downloads/response.py">https://twistedmatrix.com/documents/14.0.2/_downloads/response.py</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> im not really sure why one would use the line:
</I>&gt;<i> 
</I>&gt;<i> self.remaining  =  1024  *  10
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> this suggest to me that one knew what kind of page size was expected...but what if you dont?
</I>
Then you'd have to read this expected size out of the content-length header or similar.  This file is just an example.

&gt;<i> wouldnt it make more sense to use someting like this:
</I>&gt;<i> 
</I>&gt;<i> def dataReceived(self, bytes):
</I>&gt;<i>        self.page_content = self.page_content + bytes
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> this would sum up all the data until connectionLost is called.
</I>&gt;<i> and in connectionLost():
</I>&gt;<i> 
</I>&gt;<i> def  connectionLost(self,  reason):
</I>&gt;<i>        print  'Finished receiving body:',  reason.getErrorMessage()
</I>&gt;<i>        self.finished.callback(self.page_content)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> and then print it?
</I>
This might be a better example to start with, yes.  Please feel free to submit a doc patch doing just that.

&gt;<i> also i dont get why one would use
</I>&gt;<i> 
</I>&gt;<i> return  finished
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> in cbRequest. where is this finished returned to?
</I>
It's a Deferred, which means that the next callback in the chain waits for it to fire.  This is there so that cbShutdown doesn't fire (and shutdown the reactor) until the response is fully received.

&gt;<i> its called via:
</I>&gt;<i> 
</I>&gt;<i> d.addCallback(cbRequest)
</I>&gt;<i> 
</I>&gt;<i> isnt the result from cbRequest thrown away?
</I>&gt;<i> i would expect the line to read:
</I>&gt;<i> new_deferred = d.addCallback(cbRequest)
</I>
It's not a new Deferred, it's the same Deferred; addCallback mutates the Deferred and then returns it.

&gt;<i> thx for your answers
</I>
Thanks for using Twisted :).

Hope this helps!

-glyph



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="030021.html">[Twisted-Python]  twisted.web response.py questions
</A></li>
	<LI>Next message (by thread): <A HREF="030020.html">[Twisted-Python] Attaching the release number to a closed/merged	ticket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62491">[ date ]</a>
              <a href="thread.html#62491">[ thread ]</a>
              <a href="subject.html#62491">[ subject ]</a>
              <a href="author.html#62491">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
