From glyph at twistedmatrix.com  Tue Apr  1 01:21:22 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 1 Apr 2014 00:21:22 -0700
Subject: [Twisted-Python] enabling spam filtering on trac
Message-ID: <2177E033-7CB8-46A8-AC87-7E0F56A8EEE5@twistedmatrix.com>

Hi all,

We've been having a spate of spammy comments on twistedmatrix.com lately.

To my pleasant surprise I discovered that someone had installed, and even configured, a spam filtering plugin, but it was configured to do absolutely nothing.

I think I've got it set up right now, but the UI to do so is a bit confusing (there are point values for things and it's not clear how scoring works); if anyone gets a comment rejected for spamming, I'd like to know about it so I can adjust things.

Thanks,

-glyph

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140401/0e58e4f2/attachment.bin>

From glyph at twistedmatrix.com  Tue Apr  1 02:56:37 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 1 Apr 2014 01:56:37 -0700
Subject: [Twisted-Python] Using  cred,
	how to prevent the user repeat-login?
In-Reply-To: <2014040109441449639711@gmail.com>
References: <2014040109441449639711@gmail.com>
Message-ID: <F0F3A4F1-86EA-413E-85E0-7C8E0B423FB0@twistedmatrix.com>


On Mar 31, 2014, at 6:45 PM, yangyouxiu <yangyouxiu at gmail.com> wrote:

> In my Client-Server Application,I do not want two user login with the same login name.
>  
> For example, user1 logined with name "test1",then user2 try to login with "test1" too, the login of user2 should be denied. At now, my code could not achieve this goal,so what's the method.
> Thanks all!

This is more of a basic Python programming question than a Twisted question; however, I'm sure you'd find some people willing to help, except...:

> The following is server code:

When I run this code, nothing happens.  Which is not surprising, because it simply defines some classes.

Please consider attaching a http://www.sscce.org/ so that those of us who might help you out can start from a position where your whole program is working rather than having to guess about what the rest of your code looks like.

Thanks!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140401/de3cb9af/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140401/de3cb9af/attachment-0001.bin>

From dustin at v.igoro.us  Tue Apr  1 07:03:54 2014
From: dustin at v.igoro.us (Dustin J. Mitchell)
Date: Tue, 1 Apr 2014 09:03:54 -0400
Subject: [Twisted-Python] enabling spam filtering on trac
In-Reply-To: <2177E033-7CB8-46A8-AC87-7E0F56A8EEE5@twistedmatrix.com>
References: <2177E033-7CB8-46A8-AC87-7E0F56A8EEE5@twistedmatrix.com>
Message-ID: <CAJtE5vTW+45+1-EctYsuCYaE+0pW2aPqMiiLdiL=BueaAh8U5Q@mail.gmail.com>

Good luck :(

Buildbot's been having a heck of a time keeping spam at bay while not
preventing legitimate posts.  We're hoping to upgrade to Trac-1.0
which promises to be all roses and sunshine.. we'll see.

Dustin


From yangyouxiu at gmail.com  Tue Apr  1 19:26:36 2014
From: yangyouxiu at gmail.com (yangyouxiu)
Date: Wed, 2 Apr 2014 09:26:36 +0800
Subject: [Twisted-Python] =?gb2312?b?u9i4tDogUmU6ICBVc2luZyAgY3JlZCwgaG93?=
	=?gb2312?b?IHRvIHByZXZlbnQgdGhlIHVzZXIgcmVwZWF0LWxvZ2luPw==?=
References: <2014040109441449639711@gmail.com>, 
 <F0F3A4F1-86EA-413E-85E0-7C8E0B423FB0@twistedmatrix.com>
Message-ID: <201404020918187346013@gmail.com>

Thank you very much.
I'll study sscce.
And i have figure out my problem by change my logic process,^_^.
???? Glyph
????? 2014-04-01 16:56
???? Twisted general discussion
??? Re: [Twisted-Python] Using cred, how to prevent the user repeat-login?


On Mar 31, 2014, at 6:45 PM, yangyouxiu <yangyouxiu at gmail.com> wrote:


In my Client-Server Application,I do not want two user login with the same login name.

For example, user1 logined with name "test1",then user2 try to login with "test1" too, the login of user2 should be denied. At now, my code could not achieve this goal,so what's the method.
Thanks all!


This is more of a basic Python programming question than a Twisted question; however, I'm sure you'd find some people willing to help, except...:


The following is server code:


When I run this code, nothing happens.  Which is not surprising, because it simply defines some classes.


Please consider attaching a http://www.sscce.org/ so that those of us who might help you out can start from a position where your whole program is working rather than having to guess about what the rest of your code looks like.


Thanks!


-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140402/bc6ecb79/attachment.html>

From grigorescu_ciprian at yahoo.com  Wed Apr  2 10:03:58 2014
From: grigorescu_ciprian at yahoo.com (Grigorescu Ciprian)
Date: Wed, 2 Apr 2014 09:03:58 -0700 (PDT)
Subject: [Twisted-Python] Using twisted for a smtp dialog
Message-ID: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>

Hello,

I am new in twisted world and I am struggle to understand it.
I am trying to create a smtp connection and initiate a smtp dialog: helo, mail from, rcpt, for a list of address, and catch the answer from the smtp server

Can anyone point me the right direction, where to start?

Thanks a lot,
Grig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140402/8870731d/attachment.html>

From kebin70 at gmail.com  Wed Apr  2 10:37:29 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Wed, 2 Apr 2014 09:37:29 -0700
Subject: [Twisted-Python] Using twisted for a smtp dialog
In-Reply-To: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>
References: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>
Message-ID: <CAA-sNEYm0uaoOQh0yZqPGRcMYnP=vN0a=LdvuNukv6TSNV0C+Q@mail.gmail.com>

I've been working a lot with smtp and twisted is great for easily doing
what you're describing.

Have a look at the smtpclient docs...that should get you most of the way
there.

http://twistedmatrix.com/documents/current/mail/tutorial/smtpclient/smtpclient.html


On Wed, Apr 2, 2014 at 9:03 AM, Grigorescu Ciprian <
grigorescu_ciprian at yahoo.com> wrote:

> Hello,
>
> I am new in twisted world and I am struggle to understand it.
> I am trying to create a smtp connection and initiate a smtp dialog: helo,
> mail from, rcpt, for a list of address, and catch the answer from the smtp
> server
>
> Can anyone point me the right direction, where to start?
>
> Thanks a lot,
> Grig
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140402/1cf167e2/attachment.html>

From grigorescu_ciprian at yahoo.com  Wed Apr  2 10:49:00 2014
From: grigorescu_ciprian at yahoo.com (Grigorescu Ciprian)
Date: Wed, 2 Apr 2014 09:49:00 -0700 (PDT)
Subject: [Twisted-Python] Using twisted for a smtp dialog
In-Reply-To: <CAA-sNEYm0uaoOQh0yZqPGRcMYnP=vN0a=LdvuNukv6TSNV0C+Q@mail.gmail.com>
References: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>
 <CAA-sNEYm0uaoOQh0yZqPGRcMYnP=vN0a=LdvuNukv6TSNV0C+Q@mail.gmail.com>
Message-ID: <1396457340.703.YahooMailNeo@web141702.mail.bf1.yahoo.com>

Hi,

I have seen that example and I have read the docs(what I found about it) but I am still confused.
Is not so easy :)


On Wednesday, April 2, 2014 7:37 PM, Kevin Mcintyre <kebin70 at gmail.com> wrote:
 
I've been working a lot with smtp and twisted is great for easily doing what you're describing.? 

Have a look at the smtpclient docs...that should get you most of the way there.? 


http://twistedmatrix.com/documents/current/mail/tutorial/smtpclient/smtpclient.html




On Wed, Apr 2, 2014 at 9:03 AM, Grigorescu Ciprian <grigorescu_ciprian at yahoo.com> wrote:

Hello,
>
>I am new in twisted world and I am struggle to understand it.
>I am trying to create a smtp connection and initiate a smtp dialog: helo, mail from, rcpt, for a list of address, and catch the answer from the smtp server
>
>Can anyone point me the right direction, where to start?
>
>Thanks a lot,
>Grig
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140402/a75a0f53/attachment.html>

From adi at roiban.ro  Thu Apr  3 02:13:04 2014
From: adi at roiban.ro (Adi Roiban)
Date: Thu, 3 Apr 2014 11:13:04 +0300
Subject: [Twisted-Python] IFinishableConsumer in
	twisted.protocols.ftp.IFinishableConsumer
Message-ID: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>

Hi,

Reading the producer/consumer docs I first found out that

IFinishableConsumer api link is broken (link to twisted.internet.interfaces):
http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7

Then I found out that IFinishableConsumer is defined in
twisted.protocols.ftp.IFinishableConsumer

I was expecting to see the interface defined in twisted.internet.interfaces .

Should the broken link be fixed or interfaced moved ?

I think that moving the interface should be safe, as old imports will
still work.

Thanks!
-- 
Adi Roiban


From glyph at twistedmatrix.com  Thu Apr  3 03:59:36 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 3 Apr 2014 02:59:36 -0700
Subject: [Twisted-Python] IFinishableConsumer in
	twisted.protocols.ftp.IFinishableConsumer
In-Reply-To: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>
References: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>
Message-ID: <A1A416A8-4553-4200-ACCA-B85D423F4B5D@twistedmatrix.com>

On Apr 3, 2014, at 1:13 AM, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
> 
> Reading the producer/consumer docs I first found out that
> 
> IFinishableConsumer api link is broken (link to twisted.internet.interfaces):
> http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7
> 
> Then I found out that IFinishableConsumer is defined in
> twisted.protocols.ftp.IFinishableConsumer
> 
> I was expecting to see the interface defined in twisted.internet.interfaces .
> 
> Should the broken link be fixed or interfaced moved ?
> 
> I think that moving the interface should be safe, as old imports will
> still work.

Given that:

  1. this interface has apparently worked this way for a long time,
  2. work to overhaul these interfaces is ongoing in the 'tubes' branch 
  3. apparently nobody was using that method anyway since this is the first complaint I'm aware of

I think the docs should be changed to reflect reality rather than the other way around.  We can just remove the mention of IFinishableConsumer and document that in FTP.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140403/fb133c4c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140403/fb133c4c/attachment.bin>

From exarkun at twistedmatrix.com  Thu Apr  3 05:29:47 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 03 Apr 2014 11:29:47 -0000
Subject: [Twisted-Python] IFinishableConsumer in
 twisted.protocols.ftp.IFinishableConsumer
In-Reply-To: <A1A416A8-4553-4200-ACCA-B85D423F4B5D@twistedmatrix.com>
References: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>
 <A1A416A8-4553-4200-ACCA-B85D423F4B5D@twistedmatrix.com>
Message-ID: <20140403112947.6123.866718740.divmod.xquotient.52@top>

On 09:59 am, glyph at twistedmatrix.com wrote:
>On Apr 3, 2014, at 1:13 AM, Adi Roiban <adi at roiban.ro> wrote:
>>Hi,
>>
>>Reading the producer/consumer docs I first found out that
>>
>>IFinishableConsumer api link is broken (link to 
>>twisted.internet.interfaces):
>>http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7
>>
>>Then I found out that IFinishableConsumer is defined in
>>twisted.protocols.ftp.IFinishableConsumer
>>
>>I was expecting to see the interface defined in 
>>twisted.internet.interfaces .
>>
>>Should the broken link be fixed or interfaced moved ?
>>
>>I think that moving the interface should be safe, as old imports will
>>still work.
>
>Given that:
>
>  1. this interface has apparently worked this way for a long time,
>  2. work to overhaul these interfaces is ongoing in the 'tubes' branch
>  3. apparently nobody was using that method anyway since this is the 
>first complaint I'm aware of

Furthermore, if you inspect the history of this interface, it *was* part 
of twisted.internet.interfaces.  It was moved to twisted.protocols.ftp 
to reflect the fact that it is not a good interface in general and only 
ftp-related uses of it should persist (and those only because ftp was 
already using it and it was more trouble than someone felt like going to 
to remove ftp's use of it altogether).

I am looking forward to the day when tubes will let us eliminate this 
interface entirely.

See https://tm.tl/4580 and https://tm.tl/5942 for the history.

Jean-Paul


From croepha at gmail.com  Thu Apr  3 10:36:09 2014
From: croepha at gmail.com (Croepha)
Date: Thu, 3 Apr 2014 11:36:09 -0500
Subject: [Twisted-Python] inlineCallbacks + raise exception behavior is
	different than deferred.errback
Message-ID: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>

Hello:

Please refer to the following script:

import sys
import twisted.internet.defer
import twisted.internet.reactor
import twisted.python.log

print "Twisted version", twisted.version
print "Python version", sys.version

class ExceptionToRaise(Exception):
pass

exception_to_raise = ExceptionToRaise()

@twisted.internet.defer.inlineCallbacks
def icb_error_maker():
"""
Raises an exception implemented as an inline inlineCallbacks
"""
raise exception_to_raise

def pod_error_maker():
"""
Raises an exception implemented as a plain old deferred
"""
deferred = twisted.internet.defer.Deferred()
deferred.errback(exception_to_raise)
return deferred

#ERROR_MAKER_TO_USE = icb_error_maker
ERROR_MAKER_TO_USE = pod_error_maker

@twisted.internet.defer.inlineCallbacks
def intermediate_function3():
 print 'intermediate_function3 1'
try:
 yield ERROR_MAKER_TO_USE()
 except BaseException as exception:
print 'intermediate_function3 exception', repr(exception)
raise
 print 'intermediate_function3 2'


@twisted.internet.defer.inlineCallbacks
def intermediate_function2():
 print 'intermediate_function2 1'
try:
 yield intermediate_function3()
 except BaseException as exception:
print 'intermediate_function2 exception', repr(exception)
raise
 print 'intermediate_function2 2'


@twisted.internet.defer.inlineCallbacks
def intermediate_function1():
 print 'intermediate_function1 1'
try:
 yield intermediate_function2()
 except BaseException as exception:
print 'intermediate_function1 exception', repr(exception)
raise
 print 'intermediate_function1 2'

def run():
d = intermediate_function1()
d.addErrback(twisted.python.log.err)
d.addBoth(lambda n: twisted.internet.reactor.stop())
twisted.internet.reactor.callWhenRunning(run)
twisted.internet.reactor.run()


When ERROR_MAKER_TO_USE = icb_error_maker The output is as follows:

Twisted version [twisted, version 13.2.0]
Python version 2.7.3 (default, Feb 27 2014, 20:00:17)
[GCC 4.6.3]
intermediate_function1 1
intermediate_function2 1
intermediate_function3 1
intermediate_function3 exception ExceptionToRaise()
intermediate_function2 exception ExceptionToRaise()
intermediate_function1 exception ExceptionToRaise()
Unhandled Error
Traceback (most recent call last):
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1237, in unwindGenerator
    return _inlineCallbacks(None, gen, Deferred())
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1099, in _inlineCallbacks
    result = g.send(result)
  File "icb_error_test1.py", line 52, in intermediate_function2
    yield intermediate_function3()
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1237, in unwindGenerator
    return _inlineCallbacks(None, gen, Deferred())
--- <exception caught here> ---
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1099, in _inlineCallbacks
    result = g.send(result)
  File "icb_error_test1.py", line 37, in intermediate_function3
    yield ERROR_MAKER_TO_USE()
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1228, in unwindGenerator
    gen = f(*args, **kwargs)
  File "icb_error_test1.py", line 19, in icb_error_maker
    raise exception_to_raise
__main__.ExceptionToRaise:

However when ERROR_MAKER_TO_USE = pod_error_maker The output is as follows:

Twisted version [twisted, version 13.2.0]
Python version 2.7.3 (default, Feb 27 2014, 20:00:17)
[GCC 4.6.3]
intermediate_function1 1
intermediate_function2 1
intermediate_function3 1
intermediate_function3 exception ExceptionToRaise()
intermediate_function2 exception ExceptionToRaise()
intermediate_function1 exception ExceptionToRaise()
Unhandled Error
Traceback (most recent call last):
Failure: __main__.ExceptionToRaise:

Questions:

1. Why is it that icb_error_maker raises an exception that retains its
traceback while pod_error_maker does not?
2. How might one retain the inlineCallback trace when handling
Exceptions/Failures from deferreds? (I would prefer a universal method, ie
not doing a Try/Reraise at every yield point) ?
3. I have taken a look at the code in twisted/internet/defer.py and I am
not sure where the distinction between inlineCallback exceptions and
deferred errors are being made.  Would someone please elaborate on this
process.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140403/3bc10f7b/attachment-0001.html>

From exarkun at twistedmatrix.com  Thu Apr  3 10:54:15 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 03 Apr 2014 16:54:15 -0000
Subject: [Twisted-Python] inlineCallbacks + raise exception behavior is
 different than deferred.errback
In-Reply-To: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>
References: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>
Message-ID: <20140403165415.6123.216175657.divmod.xquotient.54@top>

On 04:36 pm, croepha at gmail.com wrote:
>Hello:

Hi,

I don't know about anyone else but in my email client all of the 
indentation in this example has been destroyed making it impractical to 
try to understand the specifics of your question.

I can at least say that yes, traceback mangling by inlineCallbacks is a 
known issue.

Jean-Paul


From croepha at gmail.com  Thu Apr  3 11:30:02 2014
From: croepha at gmail.com (Croepha)
Date: Thu, 3 Apr 2014 12:30:02 -0500
Subject: [Twisted-Python] inlineCallbacks + raise exception behavior is
 different than deferred.errback
In-Reply-To: <20140403165415.6123.216175657.divmod.xquotient.54@top>
References: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>
 <20140403165415.6123.216175657.divmod.xquotient.54@top>
Message-ID: <CANm61jfW+_v6LaRe9pUhgGHUQeH0jFua5QdkdP_Y8+SqHOezjQ@mail.gmail.com>

Apologies, here is the example, pasted on pound-python

http://paste.pound-python.org/show/t4MsnEHFYAQrJ0pv6gsY/


On Thu, Apr 3, 2014 at 11:54 AM, <exarkun at twistedmatrix.com> wrote:

> On 04:36 pm, croepha at gmail.com wrote:
>
>> Hello:
>>
>
> Hi,
>
> I don't know about anyone else but in my email client all of the
> indentation in this example has been destroyed making it impractical to try
> to understand the specifics of your question.
>
> I can at least say that yes, traceback mangling by inlineCallbacks is a
> known issue.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140403/b9098048/attachment.html>

From trac at twistedmatrix.com  Sun Apr  6 00:05:15 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 06 Apr 2014 06:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1396764315.66.2026009551659536648@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140406/6d9ba8c2/attachment.html>

From alex.gaynor at gmail.com  Mon Apr  7 17:44:25 2014
From: alex.gaynor at gmail.com (Alex Gaynor)
Date: Mon, 7 Apr 2014 23:44:25 +0000 (UTC)
Subject: [Twisted-Python] Security Advisory: OpenSSL 1.0.1g
Message-ID: <loom.20140408T014312-935@post.gmane.org>

Today a `security release of OpenSSL`_ was issued, fixing a critical
vulnerability. This vulnerability allows a malicious client or server to read
up to 64KB of memory out of the remote machine, potentially compromising any
secrets within the process, including things like TLS private certificates.

This issue does not affect Twisted directly, but will affect many users of
Twisted.

Any machine which is serving traffic over TLS, or which is making outgoing TLS
connections should upgrade it's version of OpenSSL immediately.

This issue has been assigned CVE-2014-0160.

A `complete description of the bug is also available`_.

New packages have been issued for the following operating systems:

* `Debian`_
* `Ubuntu`_

.. _`security release of OpenSSL`:
    https://www.openssl.org/news/secadv_20140407.txt
.. _`complete description of the bug is also available`: http://heartbleed.com
.. _`Debian`: https://www.debian.org/security/2014/dsa-2896
.. _`Ubuntu`: http://www.ubuntu.com/usn/usn-2165-1/



From tobias.oberstein at tavendo.de  Tue Apr  8 03:40:57 2014
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Tue, 8 Apr 2014 02:40:57 -0700
Subject: [Twisted-Python] Security Advisory: OpenSSL 1.0.1g
In-Reply-To: <loom.20140408T014312-935@post.gmane.org>
References: <loom.20140408T014312-935@post.gmane.org>
Message-ID: <634914A010D0B943A035D226786325D444751FEA44@EXVMBX020-12.exch020.serverdata.net>

> Any machine which is serving traffic over TLS, or which is making outgoing TLS
> connections should upgrade it's version of OpenSSL immediately.
> 
> This issue has been assigned CVE-2014-0160.

Thanks for bringing this to attention!

Here is a test tool that checks for the vuln.

https://github.com/titanous/heartbleeder

I could see it work on at least 1 machine: before upgrade it detected the vuln., after upgrade, clean.

/Tobias


From kebin70 at gmail.com  Tue Apr  8 13:34:00 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Tue, 8 Apr 2014 12:34:00 -0700
Subject: [Twisted-Python] XMLString clarification
Message-ID: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>

I'm still having trouble getting my multipart text/html from an email into
XMLString.

I run the html through beautifulsoup then remove the doctype, but if
there's anything at all off about the resulting xml it still craps out.  Is
there anyway to stick an arbitrary string into a template?  Or should I add
a callback to flatten and add the placeholder in the flatten stage and
replace the placeholder with the actually html.

Any guidance appreciated,
Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140408/9e32c768/attachment.html>

From werner at thieprojects.ch  Tue Apr  8 17:19:42 2014
From: werner at thieprojects.ch (Werner Thie)
Date: Tue, 08 Apr 2014 13:19:42 -1000
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
Message-ID: <5344840E.6060109@thieprojects.ch>

Hi Kevin

On 4/8/14 9:34 AM, Kevin Mcintyre wrote:
> I'm still having trouble getting my multipart text/html from an email
> into XMLString.
>
> I run the html through beautifulsoup then remove the doctype, but if
> there's anything at all off about the resulting xml it still craps out.

How? Traceback?

> Is there anyway to stick an arbitrary string into a template?  Or should
> I add a callback to flatten and add the placeholder in the flatten stage
> and replace the placeholder with the actually html.

Werner



From kebin70 at gmail.com  Tue Apr  8 17:38:09 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Tue, 8 Apr 2014 16:38:09 -0700
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <5344840E.6060109@thieprojects.ch>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
 <5344840E.6060109@thieprojects.ch>
Message-ID: <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>

I've opted for placeholder and added callback to flatten.

I'm a hack, and it was holding up delivery of email.


On Tue, Apr 8, 2014 at 4:19 PM, Werner Thie <werner at thieprojects.ch> wrote:

> Hi Kevin
>
>
> On 4/8/14 9:34 AM, Kevin Mcintyre wrote:
>
>> I'm still having trouble getting my multipart text/html from an email
>> into XMLString.
>>
>> I run the html through beautifulsoup then remove the doctype, but if
>> there's anything at all off about the resulting xml it still craps out.
>>
>
> How? Traceback?
>
>
>  Is there anyway to stick an arbitrary string into a template?  Or should
>> I add a callback to flatten and add the placeholder in the flatten stage
>> and replace the placeholder with the actually html.
>>
>
> Werner
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140408/1c477889/attachment.html>

From kebin70 at gmail.com  Tue Apr  8 17:39:46 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Tue, 8 Apr 2014 16:39:46 -0700
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
 <5344840E.6060109@thieprojects.ch>
 <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
Message-ID: <CAA-sNEak=zf73d147n_JBDtd4SVJF-D0qQ9QcucTbcogt4c_8w@mail.gmail.com>

I will try to get a test class together to demonstrate.


On Tue, Apr 8, 2014 at 4:38 PM, Kevin Mcintyre <kebin70 at gmail.com> wrote:

> I've opted for placeholder and added callback to flatten.
>
> I'm a hack, and it was holding up delivery of email.
>
>
> On Tue, Apr 8, 2014 at 4:19 PM, Werner Thie <werner at thieprojects.ch>wrote:
>
>> Hi Kevin
>>
>>
>> On 4/8/14 9:34 AM, Kevin Mcintyre wrote:
>>
>>> I'm still having trouble getting my multipart text/html from an email
>>> into XMLString.
>>>
>>> I run the html through beautifulsoup then remove the doctype, but if
>>> there's anything at all off about the resulting xml it still craps out.
>>>
>>
>> How? Traceback?
>>
>>
>>  Is there anyway to stick an arbitrary string into a template?  Or should
>>> I add a callback to flatten and add the placeholder in the flatten stage
>>> and replace the placeholder with the actually html.
>>>
>>
>> Werner
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140408/705ef56b/attachment.html>

From hawkowl at atleastfornow.net  Wed Apr  9 01:34:53 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Wed, 9 Apr 2014 15:34:53 +0800
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
Message-ID: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>

Just in time for PyCon, the second prerelease is hot off the presses.

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre2>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre2/NEWS.txt>.

Changes from the previous prerelease include:

	- Dropping support for Windows XP, due to XP being EOL.

	- Dropping support for PyOpenSSL older than 0.10.

	- Support for TLS Service Identity, in conjunction with the service_identity library on PyPI. 

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we?re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/5da96af0/attachment.pgp>

From itamar at itamarst.org  Wed Apr  9 04:42:12 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 09 Apr 2014 06:42:12 -0400
Subject: [Twisted-Python] Twisted at PyCon 2014
Message-ID: <53452404.2040909@itamarst.org>

PyCon is upon us; here's some of the Twisted-related talks and events 
this year (I may be missing a few, and this year I'm only mentioning 
stuff that will specifically mentions Twisted):


      Tutorials

Aurynn Shaw will be teaching a Twisted tutorial today - 
https://us.pycon.org/2014/schedule/presentation/58/


      Talks

Ashwini Oruganti will be talking about how she implemented the happy 
eyeballs algorithm (really! aka RFC 6555) - 
https://us.pycon.org/2014/schedule/presentation/156/

Stacey Sern will present an introduction to Twisted - 
https://us.pycon.org/2014/schedule/presentation/189/

Laurens van Houtven will be talking about ways to use Twisted from other 
frameworks and concurrency models - 
https://us.pycon.org/2014/schedule/presentation/138/

Hynek Schlawack will tell you that SSL in Twisted has some issues (but 
getting better literally by the day) - 
https://us.pycon.org/2014/schedule/presentation/144/

Narahari Allamraju will be reviewing different options for messaging 
layers, from low-level systems like Twisted to high-level systems like 
RabbitMQ - https://us.pycon.org/2014/schedule/presentation/282/


      Other

We'll be sprinting after the conference, please join in!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/a37dcc54/attachment.html>

From exarkun at twistedmatrix.com  Wed Apr  9 07:42:31 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 13:42:31 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
Message-ID: <20140409134231.6674.1133387165.divmod.xquotient.93@top>

On 07:34 am, hawkowl at atleastfornow.net wrote:
>Just in time for PyCon, the second prerelease is hot off the presses.
>
>Tarballs for this prerelease can be found at 
><http://twistedmatrix.com/Releases/pre/14.0.0pre2>, with the changelog 
>at <http://twistedmatrix.com/Releases/pre/14.0.0pre2/NEWS.txt>.
>
>Changes from the previous prerelease include:
>
>         - Dropping support for Windows XP, due to XP being EOL.
>
>         - Dropping support for PyOpenSSL older than 0.10.
>
>         - Support for TLS Service Identity, in conjunction with the 
>service_identity library on PyPI.

Thanks!

I haven't yet done any serious testing of this prerelease but I did 
import some modules from it and I think this is pretty embarassing:
>>>import twisted.internet.ssl
/home/exarkun/Projects/Twisted/trunk/twisted/internet/_sslverify.py:119: 
UserWarning: You do not have the service_identity module installed. 
Please install it from <https://pypi.python.org/pypi/service_identity>. 
Without the service_identity module and a recent enough pyOpenSSL 
tosupport it, Twisted can perform only rudimentary TLS client 
hostnameverification.  Many valid certificate/hostname mappings may be 
rejected.
  verifyHostname, VerificationError = _selectVerifyImplementation()

This is a warning that just about every Twisted user is going to see and 
it's confusing (_sslverify.py?  what?) and poorly formatted.

Jean-Paul
>For more information and a full list of changes, check the NEWS.txt 
>file.
>
>Please download the tarballs and test them with your applications, so 
>we can make sure we?re all ready for release!
>
>-hawkowl


From _ at lvh.io  Wed Apr  9 10:42:23 2014
From: _ at lvh.io (Laurens Van Houtven)
Date: Wed, 9 Apr 2014 12:42:23 -0400
Subject: [Twisted-Python] Twisted at PyCon 2014
In-Reply-To: <53452404.2040909@itamarst.org>
References: <53452404.2040909@itamarst.org>
Message-ID: <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>

I've tentatively put an open space down: 1900 - 2100 522A on Friday. If
that screws up some people's schedules lemme know.


On Wed, Apr 9, 2014 at 6:42 AM, Itamar Turner-Trauring
<itamar at itamarst.org>wrote:

>  PyCon is upon us; here's some of the Twisted-related talks and events
> this year (I may be missing a few, and this year I'm only mentioning stuff
> that will specifically mentions Twisted):
>
> Tutorials
>
> Aurynn Shaw will be teaching a Twisted tutorial today -
> https://us.pycon.org/2014/schedule/presentation/58/
>
>
>  Talks
>
> Ashwini Oruganti will be talking about how she implemented the happy
> eyeballs algorithm (really! aka RFC 6555) -
> https://us.pycon.org/2014/schedule/presentation/156/
>
> Stacey Sern will present an introduction to Twisted -
> https://us.pycon.org/2014/schedule/presentation/189/
>
> Laurens van Houtven will be talking about ways to use Twisted from other
> frameworks and concurrency models -
> https://us.pycon.org/2014/schedule/presentation/138/
>
> Hynek Schlawack will tell you that SSL in Twisted has some issues (but
> getting better literally by the day) -
> https://us.pycon.org/2014/schedule/presentation/144/
>  Narahari Allamraju will be reviewing different options for messaging
> layers, from low-level systems like Twisted to high-level systems like
> RabbitMQ - https://us.pycon.org/2014/schedule/presentation/282/
>
>
> Other
>
> We'll be sprinting after the conference, please join in!
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/aa656071/attachment.html>

From exarkun at twistedmatrix.com  Wed Apr  9 11:26:44 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 17:26:44 -0000
Subject: [Twisted-Python] Twisted at PyCon 2014
In-Reply-To: <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
References: <53452404.2040909@itamarst.org>
 <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
Message-ID: <20140409172644.6674.879439284.divmod.xquotient.95@top>

On 04:42 pm, _ at lvh.io wrote:
>I've tentatively put an open space down: 1900 - 2100 522A on Friday. If
>that screws up some people's schedules lemme know.

I booked Friday night already (and I have a hunch a couple other core 
team members have as well).

Jean-Paul


From glyph at twistedmatrix.com  Wed Apr  9 11:45:06 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 9 Apr 2014 13:45:06 -0400
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
 <5344840E.6060109@thieprojects.ch>
 <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
Message-ID: <512A4809-8719-48E9-B95C-5E491F41E25B@twistedmatrix.com>


On Apr 8, 2014, at 7:38 PM, Kevin Mcintyre <kebin70 at gmail.com> wrote:

> I've opted for placeholder and added callback to flatten.
> 
> I'm a hack, and it was holding up delivery of email.

What I would do is use html5lib to parse the HTML, then emit it as HTML before re-parsing it as XML.

XMLString is designed to read templates written by a programmer, not arbitrary garbage HTML off the internet.  There are other libraries for that :-).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/f628c331/attachment.html>

From glyph at twistedmatrix.com  Wed Apr  9 11:47:56 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 9 Apr 2014 13:47:56 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <20140409134231.6674.1133387165.divmod.xquotient.93@top>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
Message-ID: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>


On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com wrote:

> This is a warning that just about every Twisted user is going to see and it's confusing (_sslverify.py? what?) and poorly formatted.

I can definitely fix the formatting (and maybe a few other things in this area...) for a new prerelease.

But how would you recommend we make the warning come from a more sensible location that doesn't mention _sslverify.py?  I'd really like this to look specific, comprehensible, and actionable to users.  Should it not be using the warnings module?

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/43f516a8/attachment.html>

From donald at stufft.io  Wed Apr  9 12:10:05 2014
From: donald at stufft.io (Donald Stufft)
Date: Wed, 9 Apr 2014 14:10:05 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
Message-ID: <A9957D30-A2C5-475E-A37E-365D8341E394@stufft.io>


On Apr 9, 2014, at 1:47 PM, Glyph <glyph at twistedmatrix.com> wrote:

> 
> On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com wrote:
> 
>> This is a warning that just about every Twisted user is going to see and it's confusing (_sslverify.py? what?) and poorly formatted.
> 
> I can definitely fix the formatting (and maybe a few other things in this area...) for a new prerelease.
> 
> But how would you recommend we make the warning come from a more sensible location that doesn't mention _sslverify.py?  I'd really like this to look specific, comprehensible, and actionable to users.  Should it not be using the warnings module?
> 
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

You can use the level kwarg to warnings to make it look like the warning is coming from high up in the stack if that?s useful at all.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/ed733a69/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/ed733a69/attachment.pgp>

From p.mayers at imperial.ac.uk  Wed Apr  9 12:19:12 2014
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 09 Apr 2014 19:19:12 +0100
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
Message-ID: <53458F20.2050400@imperial.ac.uk>

On 09/04/14 18:47, Glyph wrote:
>
> On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com
> <mailto:exarkun at twistedmatrix.com> wrote:
>
>> This is a warning that just about every Twisted user is going to see
>> and it's confusing (_sslverify.py? what?) and poorly formatted.
>
> I can definitely fix the formatting (and maybe a few other things in
> this area...) for a new prerelease.
>
> But how would you recommend we make the warning come from a more

How is the library used?

If it's used under new APIs, then just fail if it's not installed.

If it's used under old APIs, then don't warn at all; either deprecate 
those APIs because you think they're unsafe, or keep quiet ;o)

If you must warn, warn at runtime not import time.

Just my ?0.03 (inflation).


From exarkun at twistedmatrix.com  Wed Apr  9 13:34:08 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 19:34:08 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
Message-ID: <20140409193408.6674.1861176011.divmod.xquotient.105@top>

On 05:47 pm, glyph at twistedmatrix.com wrote:
>
>On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com wrote:
>>This is a warning that just about every Twisted user is going to see 
>>and it's confusing (_sslverify.py? what?) and poorly formatted.
>
>I can definitely fix the formatting (and maybe a few other things in 
>this area...) for a new prerelease.
>
>But how would you recommend we make the warning come from a more 
>sensible location that doesn't mention _sslverify.py?  I'd really like 
>this to look specific, comprehensible, and actionable to users.  Should 
>it not be using the warnings module?

I added one suggestion to the ticket <https://tm.tl/7097>: 
`warnings.showwarning(..., "", "")` will produce a message like ":: 
UserWarning: ..." (at least one the one version of Python I tested on, 
who knows if it's the same across all the versions we care about) which 
is still weird but less so.

Off the top of my head I don't have any better suggestions than that.  I 
guess there is the other obvious approach of just writing some bytes to 
stderr...

Considering my various experiences with the warnings module I'm even a 
little tempted to go that way.  It does seem like the choice is between 
really bad and only sort of bad, though.

(Oops, didn't click send fast enough, now I'm imagining other things 
like passing some other string to `showwarning` as the file name - like 
"Twisted TLS Support" or whatever else you want to make the resulting 
message look pretty.)

Jean-Paul


From exarkun at twistedmatrix.com  Wed Apr  9 13:48:00 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 19:48:00 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <53458F20.2050400@imperial.ac.uk>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
Message-ID: <20140409194800.6674.1470609324.divmod.xquotient.122@top>

On 06:19 pm, p.mayers at imperial.ac.uk wrote:
>On 09/04/14 18:47, Glyph wrote:
>>
>>On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com
>><mailto:exarkun at twistedmatrix.com> wrote:
>>>This is a warning that just about every Twisted user is going to see
>>>and it's confusing (_sslverify.py? what?) and poorly formatted.
>>
>>I can definitely fix the formatting (and maybe a few other things in
>>this area...) for a new prerelease.
>>
>>But how would you recommend we make the warning come from a more
>
>How is the library used?
>
>If it's used under new APIs, then just fail if it's not installed.
>
>If it's used under old APIs, then don't warn at all; either deprecate 
>those APIs because you think they're unsafe, or keep quiet ;o)
>
>If you must warn, warn at runtime not import time.

This may be a good idea.  If you warn at runtime then there actually 
*may* be something above you on the stack, somewhere, which you can 
blame the warning on.

I think in this case that's possible (if you emitted the warning from 
`simpleVerifyHostname`).

The trade-off of this approach is that users might not notice a warning 
that only shows up later after the program has been running for a while. 
Of course they might not notice a warning that shows up early either - 
who even says the program is running in a terminal or that anyone is 
reading stdio?  But those are general problems with the warnings 
module...

And that shortcoming could be mitigated by documenting (or even formally 
declaring) this dependency more prominently (I see it's in the NEWS file 
and the SSL howto but not, for example, in the INSTALL file).

Jean-Paul


From itamar at itamarst.org  Wed Apr  9 16:55:32 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 09 Apr 2014 18:55:32 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <20140409194800.6674.1470609324.divmod.xquotient.122@top>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
Message-ID: <5345CFE4.9040403@itamarst.org>

On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>
> And that shortcoming could be mitigated by documenting (or even 
> formally declaring) this dependency more prominently (I see it's in 
> the NEWS file and the SSL howto but not, for example, in the INSTALL 
> file).
A ssl-requirements.txt file seems like a good idea; we're going to be 
adding the pem package as well, it looks like, and having one thing 
people can install automatically is a lot better than having all our 
users manually type stuff in.


From donald at stufft.io  Wed Apr  9 16:59:33 2014
From: donald at stufft.io (Donald Stufft)
Date: Wed, 9 Apr 2014 18:59:33 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <5345CFE4.9040403@itamarst.org>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
Message-ID: <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>


On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:

> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>> 
>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

extras!

Then people can do:

install_requires=[?Twisted[ssl]?]

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140409/0d82e588/attachment.pgp>

From exarkun at twistedmatrix.com  Thu Apr 10 04:56:53 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Apr 2014 10:56:53 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
Message-ID: <20140410105653.6674.1294556454.divmod.xquotient.129@top>

On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>
>On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring 
><itamar at itamarst.org> wrote:
>>On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>
>>>And that shortcoming could be mitigated by documenting (or even 
>>>formally declaring) this dependency more prominently (I see it's in 
>>>the NEWS file and the SSL howto but not, for example, in the INSTALL 
>>>file).
>>A ssl-requirements.txt file seems like a good idea; we're going to be 
>>adding the pem package as well, it looks like, and having one thing 
>>people can install automatically is a lot better than having all our 
>>users manually type stuff in.
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>extras!
>
>Then people can do:
>
>install_requires=[?Twisted[ssl]?]

This would be great.  What do people who want to use pip to set up a 
Twisted development environment do?

Jean-Paul


From donald at stufft.io  Thu Apr 10 05:06:09 2014
From: donald at stufft.io (Donald Stufft)
Date: Thu, 10 Apr 2014 07:06:09 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <20140410105653.6674.1294556454.divmod.xquotient.129@top>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
Message-ID: <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>


On Apr 10, 2014, at 6:56 AM, exarkun at twistedmatrix.com wrote:

> On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>> 
>> On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>>> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>> 
>>>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
>>> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> extras!
>> 
>> Then people can do:
>> 
>> install_requires=[?Twisted[ssl]?]
> 
> This would be great.  What do people who want to use pip to set up a Twisted development environment do?
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

Well you can do ``pip install Twisted[ssl]`` too. I don?t have a better solution that that up my sleeve though :(

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140410/3a5c173d/attachment-0001.pgp>

From dustin at v.igoro.us  Thu Apr 10 06:35:50 2014
From: dustin at v.igoro.us (Dustin J. Mitchell)
Date: Thu, 10 Apr 2014 08:35:50 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
 <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
Message-ID: <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>

Use

  pip install -e .[ssl]

in the dir with the twisted setup.py.  Works like a charm.

Dustin

On Thu, Apr 10, 2014 at 7:06 AM, Donald Stufft <donald at stufft.io> wrote:
>
> On Apr 10, 2014, at 6:56 AM, exarkun at twistedmatrix.com wrote:
>
>> On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>>>
>>> On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>>>> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>>>
>>>>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
>>>> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>> extras!
>>>
>>> Then people can do:
>>>
>>> install_requires=[?Twisted[ssl]?]
>>
>> This would be great.  What do people who want to use pip to set up a Twisted development environment do?
>>
>> Jean-Paul
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> Well you can do ``pip install Twisted[ssl]`` too. I don?t have a better solution that that up my sleeve though :(
>
> -----------------
> Donald Stufft
> PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From donald at stufft.io  Thu Apr 10 11:02:40 2014
From: donald at stufft.io (Donald Stufft)
Date: Thu, 10 Apr 2014 13:02:40 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
 <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
 <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
Message-ID: <C0652092-F42E-4699-815B-C13CD9573429@stufft.io>

Oh whoops, I misread what Jean-Paul said. Yes you can do that, either directly or in a requirements file.

On Apr 10, 2014, at 8:35 AM, Dustin J. Mitchell <dustin at v.igoro.us> wrote:

> Use
> 
>  pip install -e .[ssl]
> 
> in the dir with the twisted setup.py.  Works like a charm.
> 
> Dustin
> 
> On Thu, Apr 10, 2014 at 7:06 AM, Donald Stufft <donald at stufft.io> wrote:
>> 
>> On Apr 10, 2014, at 6:56 AM, exarkun at twistedmatrix.com wrote:
>> 
>>> On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>>>> 
>>>> On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>>>>> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>>>> 
>>>>>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
>>>>> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
>>>>> 
>>>>> _______________________________________________
>>>>> Twisted-Python mailing list
>>>>> Twisted-Python at twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>> 
>>>> extras!
>>>> 
>>>> Then people can do:
>>>> 
>>>> install_requires=[?Twisted[ssl]?]
>>> 
>>> This would be great.  What do people who want to use pip to set up a Twisted development environment do?
>>> 
>>> Jean-Paul
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> Well you can do ``pip install Twisted[ssl]`` too. I don?t have a better solution that that up my sleeve though :(
>> 
>> -----------------
>> Donald Stufft
>> PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA
>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140410/434a54b4/attachment.pgp>

From thughes at thegoldfish.org  Thu Apr 10 15:02:13 2014
From: thughes at thegoldfish.org (Tim Hughes)
Date: Thu, 10 Apr 2014 22:02:13 +0100
Subject: [Twisted-Python] which async framework?
In-Reply-To: <53200C97.40908@simplistix.co.uk>
References: <53200C97.40908@simplistix.co.uk>
Message-ID: <CALQL5_Jff6ynduYzVeYOv073e=CS2b3AkOCPY9sE3JYPygv9nQ@mail.gmail.com>

> The protocols are all financial (do we really not have a pure-python FIX library?!) but none are likely to have existing python implementations.
>
> How should I pick between the options? What would people recommend and why?
>

This might be a starting point for the FIX stuff

https://pypi.python.org/pypi/fixlib/0.5

Tim Hughes
mailto:thughes at thegoldfish.org


From exarkun at twistedmatrix.com  Fri Apr 11 20:41:40 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 12 Apr 2014 02:41:40 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
 <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
 <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
Message-ID: <20140412024140.5692.118987739.divmod.xquotient.2@top>

On 10 Apr, 12:35 pm, dustin at v.igoro.us wrote:
>Use
>
>  pip install -e .[ssl]
>
>in the dir with the twisted setup.py.  Works like a charm.

It seems like this would completely replace the need for any kind of 
requirements.txt files.  Is there a compelling reason to make both of 
these work?

Jean-Paul


From tom.prince at ualberta.net  Sat Apr 12 12:39:08 2014
From: tom.prince at ualberta.net (Tom Prince)
Date: Sat, 12 Apr 2014 14:39:08 -0400
Subject: [Twisted-Python] Twisted at PyCon 2014
In-Reply-To: <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
References: <53452404.2040909@itamarst.org>
 <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
Message-ID: <87d2gms88j.fsf@loki.hocat.ca>

The twisted open space will be at 19h00 today in 515bc.


From trac at twistedmatrix.com  Sun Apr 13 00:05:16 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 13 Apr 2014 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1397369116.17.3227748426009236541@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140413/b357521e/attachment.html>

From itamar at itamarst.org  Mon Apr 14 08:29:43 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 14 Apr 2014 10:29:43 -0400
Subject: [Twisted-Python] ANN: Crochet 1.2.0 - Use Twisted Anywhere!
Message-ID: <e63b31d91b90cf34f257b606bc24de27@itamarst.org>

 

Crochet is an MIT-licensed library that makes it easier to use Twisted
from regular blocking code. Some use cases include: 

 	* Easily use Twisted from a blocking framework like Django or Flask.
 	* Write a library that provides a blocking API, but uses Twisted for
its implementation.
 	* Port blocking code to Twisted more easily, by keeping a backwards
compatibility layer.
 	* Allow normal Twisted programs that use threads to interact with
Twisted more cleanly from their threaded parts. For example this can be
useful when using Twisted as a WSGI container.

New in this release: 

 	* crochet.wait_for implements the timeout/cancellation pattern
documented in previous versions of Crochet.
 	* Functions wrapped with wait_for and run_in_reactor can now be
accessed via the wrapped_function attribute, to ease unit testing of the
underlying Twisted code.
 	* Bug fixes, documentation improvements and more - for a full list see
the

Documentation can be found at http://crochet.readthedocs.org [1] 

Bugs and feature requests should be filed at the project
https://github.com/itamarst/crochet [2] 

Here's an example of a program using Crochet. Notice that you get a
completely blocking interface to Twisted and do not need to run the
Twisted reactor, the event loop, yourself. 

#!/usr/bin/python
"""
Do a DNS lookup using Twisted's APIs.
"""
from __future__ import print_function

# The Twisted code we'll be using:
from twisted.names import client

from crochet import setup, wait_for
setup()

# Crochet layer, wrapping Twisted's DNS library in a blocking call.
@wait_for(timeout=5.0)
def gethostbyname(name):
 """Lookup the IP of a given hostname.

 Unlike socket.gethostbyname() which can take an arbitrary amount of
time
 to finish, this function will raise crochet.TimeoutError if more than 5
 seconds elapse without an answer being received.
 """
 d = client.lookupAddress(name)
 d.addCallback(lambda result: result[0][0].payload.dottedQuad())
 return d

if __name__ == '__main__':
 # Application code using the public API - notice it works in a normal
 # blocking manner, with no event loop visible:
 import sys
 name = sys.argv[1]
 ip = gethostbyname(name)
 print(name, "->", ip)

Run on the command line: 

> $ python blockingdns.py twistedmatrix.com
> twistedmatrix.com -> 66.35.39.66

 

Links:
------
[1] https://crochet.readthedocs.org/
[2] https://github.com/itamarst/crochet
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140414/2783ac8b/attachment.html>

From nicholas at alienretro.com  Tue Apr 15 16:09:37 2014
From: nicholas at alienretro.com (Nicholas)
Date: Tue, 15 Apr 2014 23:09:37 +0100
Subject: [Twisted-Python] Manhole but no SSH
Message-ID: <CAGrCNobGohrvBBUJO8BKvz=5976u-WsyQys18D+5OSFQz14a3Q@mail.gmail.com>

Hello, everyone.

Is it possible to implement the Manhole but without using SSH (or telnet,
for that matter) ?

Say I start a service and I want to be thrown straight in a console, much
like Manhole does with SSH, but without having to actually listen on a port
and having to connect to it with an user and password.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140415/575d2042/attachment.html>

From mithrandi at mithrandi.net  Tue Apr 15 16:21:54 2014
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Wed, 16 Apr 2014 00:21:54 +0200
Subject: [Twisted-Python] Manhole but no SSH
In-Reply-To: <CAGrCNobGohrvBBUJO8BKvz=5976u-WsyQys18D+5OSFQz14a3Q@mail.gmail.com>
References: <CAGrCNobGohrvBBUJO8BKvz=5976u-WsyQys18D+5OSFQz14a3Q@mail.gmail.com>
Message-ID: <CAMcKhMRPOtXcxG1NQ_DOAO-Mwx+a4PBHvxZ3t8vEUUMC_3r1RQ@mail.gmail.com>

On 16 April 2014 00:09, Nicholas <nicholas at alienretro.com> wrote:
> Hello, everyone.
>
> Is it possible to implement the Manhole but without using SSH (or telnet,
> for that matter) ?
>
> Say I start a service and I want to be thrown straight in a console, much
> like Manhole does with SSH, but without having to actually listen on a port
> and having to connect to it with an user and password.

This sounds a lot like `python -m twisted.conch.stdio`; I'm not sure
how easily reusable that code is, but hopefully it shouldn't be too
hard to use from an existing application!
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar


From grigorescu_ciprian at yahoo.com  Wed Apr 16 03:48:23 2014
From: grigorescu_ciprian at yahoo.com (Grigorescu Ciprian)
Date: Wed, 16 Apr 2014 02:48:23 -0700 (PDT)
Subject: [Twisted-Python] Create a NAT rule from twsited
Message-ID: <1397641703.7937.YahooMailNeo@web141704.mail.bf1.yahoo.com>

Hello,

Is there a way to create a NAT rule from twisted? 

I need to route a private ip to a public ip from a twisted script.



Thank You,
Ciprian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140416/2093d829/attachment.html>

From trac at twistedmatrix.com  Sun Apr 20 00:05:16 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 20 Apr 2014 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1397973916.13.4317360187394084537@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140420/2a63e1a2/attachment.html>

From i at introo.me  Sun Apr 20 00:15:29 2014
From: i at introo.me (Shiyao Ma)
Date: Sun, 20 Apr 2014 14:15:29 +0800
Subject: [Twisted-Python] What's the difference between Port and Interface
Message-ID: <CAJQX3Dwb9tDXq3kt5H4POcvQBtUpQjV64V0sRuYiqy3eZUc27g@mail.gmail.com>

Hi.
It seems a port can contain multiple interface. In real network, is there a
Port?
What is port for and what's the corresponding object in real switch?


Thanks.

-- 

????????????????http://introo.me?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140420/05016966/attachment.html>

From i at introo.me  Sun Apr 20 00:53:01 2014
From: i at introo.me (Shiyao Ma)
Date: Sun, 20 Apr 2014 14:53:01 +0800
Subject: [Twisted-Python] What's the difference between Port and
	Interface
In-Reply-To: <CAJQX3Dwb9tDXq3kt5H4POcvQBtUpQjV64V0sRuYiqy3eZUc27g@mail.gmail.com>
References: <CAJQX3Dwb9tDXq3kt5H4POcvQBtUpQjV64V0sRuYiqy3eZUc27g@mail.gmail.com>
Message-ID: <CAJQX3Dx9Tr7gFCo0oAKwCaW+ynJMXRe4R9+yb_y1egSE5NxUBw@mail.gmail.com>

Oops. My bad. Sorry for posting here.


2014-04-20 14:15 GMT+08:00 Shiyao Ma <i at introo.me>:

> Hi.
> It seems a port can contain multiple interface. In real network, is there
> a Port?
> What is port for and what's the corresponding object in real switch?
>
>
> Thanks.
>
> --
>
> ????????????????http://introo.me?
>



-- 

????????????????http://introo.me?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140420/ab094702/attachment.html>

From keturn at keturn.net  Sun Apr 20 15:38:11 2014
From: keturn at keturn.net (Kevin Turner)
Date: Sun, 20 Apr 2014 14:38:11 -0700
Subject: [Twisted-Python] =?utf-8?q?What_happens_in_Montr=C3=A9al=E2=80=A6?=
 =?utf-8?q?_PyCon_2014_Sprint_Report?=
Message-ID: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>

Hi folks,

I didn't attend PyCon or the accompanying sprints this year, but judging
from the commit traffic, many of you did. And I want to know what you
worked on! Partly so I can live vicariously through your experiences,
but I know a lot of other people are curious too. Events like this are a
great way to show our followers and sponsors what happens when a bunch
of people have a chance to get together and focus on the project.

I've started a sprint report page on the wiki:
https://twistedmatrix.com/trac/wiki/PyconSprint2014

Feel free to contribute directly to that page, or reply to this email
(either on or off-list) and I'll see if I can summarize the responses.

For those of you who were at the sprints this year:

* Was this your first time at a development sprint?

* Was it your first time contributing to Twisted?

* What did you work on?

* Did you work on something outside Twisted core? I especially want to
hear about these! For Twisted I can look at the commit logs, but if
there was activity on related projects, I might not know where to look
unless you tell me about it.

* Any other lasting impressions? Is there something you'll do
differently now as a result of some conversation or experience you had
at PyCon?

I know now that you're starting to get caught up on sleep and the
poutine is leaving your system, you may have reservations about sharing
certain things you worked on. Maybe you feel like it's not "ready" yet,
or it feels out-of-place next to that ticket Glyph worked on where there
were eight or nine thousand words in the ticket comments alone. Maybe
some things that happen in Montr?al really should stay in Montr?al.

But if you had a good experience at the sprints, and it's something
you'd encourage others to join next time they have the opportunity,
please share!

If you didn't have the experience you were hoping for, but you learned
something that will make it better for next time, share that too.
Whether it's something for the sprint organizers or something you wish
you could tell your earlier self, help us make next time better.

Think nobody else wants to hear about the weird thing you were working
on? Might there be a *small* chance? Like one-in-a-million? Then share
that too. There are at least a million Python programmers out there.
Even if your thing isn't "done," sometimes just knowing someone has
_made an attempt_ is important.

Lastly, if you have any photos, vines, blender models, artist's
renditions of the porting process, or any other media from the sprint,
please do email me. From time to time the Software Freedom Conservancy
(which supports the Twisted Software Foundation) asks us if we have
anything to share that isn't a wall of text, and I'd love to have more
things to *show* people.

Thanks,

 - Kevin


From glyph at twistedmatrix.com  Wed Apr 23 17:29:05 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 23 Apr 2014 16:29:05 -0700
Subject: [Twisted-Python]
 =?windows-1252?q?What_happens_in_Montr=E9al=85_P?=
 =?windows-1252?q?yCon_2014_Sprint_Report?=
In-Reply-To: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
References: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
Message-ID: <AF01E1E3-5A35-4565-8D9B-8C52F96E09CE@twistedmatrix.com>


On Apr 20, 2014, at 2:38 PM, Kevin Turner <keturn at keturn.net> wrote:

> Hi folks,
> 
> I didn't attend PyCon or the accompanying sprints this year, but judging
> from the commit traffic, many of you did. And I want to know what you
> worked on! Partly so I can live vicariously through your experiences,
> but I know a lot of other people are curious too. Events like this are a
> great way to show our followers and sponsors what happens when a bunch
> of people have a chance to get together and focus on the project.
> 
> I've started a sprint report page on the wiki:
> https://twistedmatrix.com/trac/wiki/PyconSprint2014

Thanks for putting this there!

> Feel free to contribute directly to that page, or reply to this email
> (either on or off-list) and I'll see if I can summarize the responses.

Everybody else should really reply; I'm a little surprised to not see 

> For those of you who were at the sprints this year:
> 
> * Was this your first time at a development sprint?

Nope.

> * Was it your first time contributing to Twisted?

Not really, no.

> * What did you work on?

I worked primarily on TLS, particularly client-side TLS.  The relevant tickets are <https://twistedmatrix.com/trac/ticket/7098> and <https://twistedmatrix.com/trac/ticket/4888>; I just put 4888 into what I hope will be its final review, which is why it took me so long to get to replying here!

I also helped out a little with some questions on <https://twistedmatrix.com/trac/ticket/6750> which wsanchez and ralphm put through several review/response cycles and will, I hope, be ready to land shortly after 14.0.

> * Did you work on something outside Twisted core? I especially want to
> hear about these! For Twisted I can look at the commit logs, but if
> there was activity on related projects, I might not know where to look
> unless you tell me about it.

I worked on <https://github.com/hynek/pem>, and added chain-construction logic so you don't have to put your keys/certs/chain certs in any particular order.  I also put together <https://pip2014.com/> a little bit before the sprints and ended up discussing it there a fair amount.  I'm trying to participate a bit more in the wider ecosystem so that we don't have so much code locked up inside Twisted that people are not aware of.

> * Any other lasting impressions?

As usual, the sprints were amazing, and it was great to have so many people working on Twisted and moving things forward, many of which had been stuck or stalled for months.

> Is there something you'll do
> differently now as a result of some conversation or experience you had
> at PyCon?

I'm planning to stop working on TLS soon, I hope ;-).

> I know now that you're starting to get caught up on sleep and the
> poutine is leaving your system, you may have reservations about sharing
> certain things you worked on. Maybe you feel like it's not "ready" yet,
> or it feels out-of-place next to that ticket Glyph worked on where there
> were eight or nine thousand words in the ticket comments alone. Maybe
> some things that happen in Montr?al really should stay in Montr?al.

You should never feel like it's not "ready".  Any contribution is totally worthwhile!

> But if you had a good experience at the sprints, and it's something
> you'd encourage others to join next time they have the opportunity,
> please share!

Yes, please do!

> If you didn't have the experience you were hoping for, but you learned
> something that will make it better for next time, share that too.
> Whether it's something for the sprint organizers or something you wish
> you could tell your earlier self, help us make next time better.

This PyCon was a little weird in the way that we set up the space; it ended up being more old hands and fewer new people, since there weren't many opportunities to attract new folks wandering by to the project (since we were in a corner of the building and nobody ever wandered by).  That also meant that there was a bit less opportunity for cross-pollenation with other projects.  On the plus side, it meant that the sprint was pretty focused and we made a lot of progress on some very big, challenging issues that required a lot of continuous focused attention from advanced contributors.

We seem to alternate years, with every other year being very new-contributor focused, which is sort of okay, but I'd like to see a sprint with two halves, where one part of the room is onboarding new people and the other half is more advanced development.

Also, there should be some small incentive for people to stay for the entire duration of the sprints.  If PyCon itself doesn't do this, then perhaps we should.  The fact that people are gradually trickling out starting on the afternoon of the first day until almost nobody is left on the last day does lower the energy level just a little bit.

> Think nobody else wants to hear about the weird thing you were working
> on? Might there be a *small* chance? Like one-in-a-million? Then share
> that too. There are at least a million Python programmers out there.
> Even if your thing isn't "done," sometimes just knowing someone has
> _made an attempt_ is important.

Learning that someone has made an attempt is often the first step towards prompting someone _else_ to actually finish the work :).


-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140423/8a6c2357/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140423/8a6c2357/attachment.bin>

From meejah at meejah.ca  Thu Apr 24 13:27:35 2014
From: meejah at meejah.ca (meejah)
Date: Thu, 24 Apr 2014 23:27:35 +0400
Subject: [Twisted-Python] txtorcon v0.9.2
Message-ID: <861twm34uw.fsf@atlantis.meejah.ca>


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I am happy to announce that txtorcon v0.9.2 is now available.

This release adds a few minor bug-fixes and a few API
enhancements. Full details:

 * add on_disconnect callback for TorControlProtocol (no more monkey-patching Protocol API)
 * add age() method to Circuit
 * add time_created property to Circuit
 * don't incorrectly listen for NEWDESC events in TorState
 * add .flags dict to track flags in Circuit, Stream
 * build_circuit() can now take hex IDs (as well as Router instances)
 * add unique_name property to Router (returns the hex id, unless Named then return name)
 * add location property to Router
 * TorState.close_circuit now takes either a Circuit ID or Circuit instance
 * TorState.close_stream now takes either a Stream ID or Stream instance
 * support both GeoIP API versions
 * more test-coverage
 * small patch from enriquefynn improving tor binary locating
 * strip OK lines in TorControlProtocol (https://github.com/meejah/txtorcon/issues/8)
 * use TERM not KILL when Tor launch times out (https://github.com/meejah/txtorcon/pull/68>) from hellais
 * Unit-test coverage now at 98%

sha256 sums for the distribution files:

93e934f83e3fc6fcf40e76f7c9c28459af04205fb912d384aaacb7ac5269bb8f  dist/txtorcon-0.9.2-py2-none-any.whl
fe90743cdc453002ad046aa6556b611b4e85b813ff92865769d3d27712c2ca47  dist/txtorcon-0.9.2.tar.gz

There are also signatures on github and txtorcon.readthedocs.org
You may download from github or the hidden service:

   https://github.com/meejah/txtorcon/releases/tag/v0.9.2
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl.asc
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz.asc

   http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz
   http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz.asc

Source code:

   https://github.com/meejah/txtorcon/archive/v0.9.2.tar.gz

Thanks,
meejah
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEcBAEBAgAGBQJTWVf5AAoJEMJgKAMSgGmn07kIAKSwjBck76dyN1lWJj0fRl/f
BevLpnp+rb+ge5hBAeKfsVTYciDBZeSo8/fE44wTNh5Qj9HEhFopVC4WF61rIFU+
4IkpnFvfmVEd8Iu1vqQ/hFmP1jrvT8T+nTbaTGkcoCSPI+GyXkbxLqcl0Fncq51M
M0OIRphyWA7EK3YoZ2Q1BOEIwsN0pwERYUhU0CGS45L7OZmyw86RXTMBZpBnNXrD
5VjQdpx8fvrV2iCRXi/k/e2Jy/xqs8o0I2+o9M6WrBiGCs5S9YbjsAKzRb7dsaBZ
RlRAdKUjyzkquPl4K8E5ocDToB1hIGvqCSp7s11a5rq5T/jUiDMYrjkxIXH1Yg4=
=W7+f
-----END PGP SIGNATURE-----



From _ at lvh.io  Thu Apr 24 13:52:14 2014
From: _ at lvh.io (Laurens Van Houtven)
Date: Thu, 24 Apr 2014 14:52:14 -0500
Subject: [Twisted-Python] txtorcon v0.9.2
In-Reply-To: <861twm34uw.fsf@atlantis.meejah.ca>
References: <861twm34uw.fsf@atlantis.meejah.ca>
Message-ID: <CAE_Hg6bpdKD9rVddL_1FRsNoiEkWKg_c-a4Nm6HvSZJyNyUkjQ@mail.gmail.com>

Thank you for all your work on this project :)


On Thu, Apr 24, 2014 at 2:27 PM, meejah <meejah at meejah.ca> wrote:

>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> I am happy to announce that txtorcon v0.9.2 is now available.
>
> This release adds a few minor bug-fixes and a few API
> enhancements. Full details:
>
>  * add on_disconnect callback for TorControlProtocol (no more
> monkey-patching Protocol API)
>  * add age() method to Circuit
>  * add time_created property to Circuit
>  * don't incorrectly listen for NEWDESC events in TorState
>  * add .flags dict to track flags in Circuit, Stream
>  * build_circuit() can now take hex IDs (as well as Router instances)
>  * add unique_name property to Router (returns the hex id, unless Named
> then return name)
>  * add location property to Router
>  * TorState.close_circuit now takes either a Circuit ID or Circuit instance
>  * TorState.close_stream now takes either a Stream ID or Stream instance
>  * support both GeoIP API versions
>  * more test-coverage
>  * small patch from enriquefynn improving tor binary locating
>  * strip OK lines in TorControlProtocol (
> https://github.com/meejah/txtorcon/issues/8)
>  * use TERM not KILL when Tor launch times out (
> https://github.com/meejah/txtorcon/pull/68>) from hellais
>  * Unit-test coverage now at 98%
>
> sha256 sums for the distribution files:
>
> 93e934f83e3fc6fcf40e76f7c9c28459af04205fb912d384aaacb7ac5269bb8f
>  dist/txtorcon-0.9.2-py2-none-any.whl
> fe90743cdc453002ad046aa6556b611b4e85b813ff92865769d3d27712c2ca47
>  dist/txtorcon-0.9.2.tar.gz
>
> There are also signatures on github and txtorcon.readthedocs.org
> You may download from github or the hidden service:
>
>    https://github.com/meejah/txtorcon/releases/tag/v0.9.2
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl.asc
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz.asc
>
>    http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz
>    http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz.asc
>
> Source code:
>
>    https://github.com/meejah/txtorcon/archive/v0.9.2.tar.gz
>
> Thanks,
> meejah
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
>
> iQEcBAEBAgAGBQJTWVf5AAoJEMJgKAMSgGmn07kIAKSwjBck76dyN1lWJj0fRl/f
> BevLpnp+rb+ge5hBAeKfsVTYciDBZeSo8/fE44wTNh5Qj9HEhFopVC4WF61rIFU+
> 4IkpnFvfmVEd8Iu1vqQ/hFmP1jrvT8T+nTbaTGkcoCSPI+GyXkbxLqcl0Fncq51M
> M0OIRphyWA7EK3YoZ2Q1BOEIwsN0pwERYUhU0CGS45L7OZmyw86RXTMBZpBnNXrD
> 5VjQdpx8fvrV2iCRXi/k/e2Jy/xqs8o0I2+o9M6WrBiGCs5S9YbjsAKzRb7dsaBZ
> RlRAdKUjyzkquPl4K8E5ocDToB1hIGvqCSp7s11a5rq5T/jUiDMYrjkxIXH1Yg4=
> =W7+f
> -----END PGP SIGNATURE-----
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140424/28096154/attachment.html>

From glyph at twistedmatrix.com  Thu Apr 24 14:33:26 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 24 Apr 2014 13:33:26 -0700
Subject: [Twisted-Python] txtorcon v0.9.2
In-Reply-To: <861twm34uw.fsf@atlantis.meejah.ca>
References: <861twm34uw.fsf@atlantis.meejah.ca>
Message-ID: <2DA46727-CF3C-41FA-A4F8-F608891DDA4C@twistedmatrix.com>


On Apr 24, 2014, at 12:27 PM, meejah <meejah at meejah.ca> wrote:

> I am happy to announce that txtorcon v0.9.2 is now available.

Sadly I still don't know a whole ton about Tor, but this looks really full-featured!  Thanks for sharing the release with us.

I particularly liked:

> no more monkey-patching Protocol API

and

> Unit-test coverage now at 98%


;-).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140424/74278503/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140424/74278503/attachment.bin>

From clayton.daley at gmail.com  Thu Apr 24 17:45:03 2014
From: clayton.daley at gmail.com (Clayton Daley)
Date: Thu, 24 Apr 2014 19:45:03 -0400
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
Message-ID: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>

I have a modular application that communicates over RPC connections (with
both sync and async server/clients available).  I want to migrate some of
the modules over to Twisted. Currently, all modules inherit important
utility functions from a parent class.  On paper, I now need two versions
of this parent class (synchronous & asynchronous) to be inherited by
modules of the respective types.

I'm looking for ways to maximize the common code between the two versions
of the parent object. One that comes to mind (motivating the subject of
this post) would be to write a synchronous interpreter for @inlineCallback
calls.  For example, here's a synchronous factory function from the parent
class (already partly reconfigured to be friendly to my idea):

    @classmethod
    def from_id(cls, id):
        doc = db.get_document(id) # blocking db call
        self = cls._new_document(doc) # synchronous initialization stuff
        self.__init__() # module init code is custom and may block
        return self

I imagine rewriting this to the following:

    @classmethod
    @inlineCallbacks
    def from_id(cls, id):
        doc = yield db.get_document(id) # blocking/async db call
        self = cls._new_document(doc) # always synchronous
        yield self.__init__() # blocking/async call
        returnValue(self)

Assuming the db connector and init function are appropriate to the
environment, my gut reaction is that this could (when combined with a
synchronous implementation of the decorator) run correctly in both places.
I've read that the @inlineCallback code is complicated so I figured I'd run
the idea by the experts before diving down that rabbit hole. Does anyone
see any obvious pitfall? I'm happy to do the legwork to try and build it,
but I'd also welcome any pointers from your (no doubt extensive) experience
writing the twisted version.

Thanks in advance!

Clayton Daley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140424/f5ec2261/attachment-0001.html>

From pierre at jaury.eu  Thu Apr 24 18:14:22 2014
From: pierre at jaury.eu (pierre at jaury.eu)
Date: Fri, 25 Apr 2014 02:14:22 +0200
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
In-Reply-To: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
References: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
Message-ID: <91ea4973fcda4dd6b496db23a09a91e7@jaury.eu>

Le 2014-04-25 01:45, Clayton Daley a ?crit?:
> I imagine rewriting this to the following:
> 
> ? ? @classmethod
> ? ? @inlineCallbacks
> ? ? def from_id(cls, id):
> ? ? ? ? doc = yield db.get_document(id) # blocking/async db call
> 
> ? ? ? ? self = cls._new_document(doc) # always synchronous
>  ? ? ? ? yield self.__init__() # blocking/async call
> ? ? ? ? returnValue(self)
> 
> places. I've read that the @inlineCallback code is complicated so I
> figured I'd run the idea by the experts before diving down that rabbit
> hole.

I am no expert, but the code for inlineCallbacks looks pretty
straightforward, except some special cases handled down the way.

> Does anyone see any obvious pitfall? I'm happy to do the legwork
> to try and build it, but I'd also welcome any pointers from your (no
> doubt extensive) experience writing the twisted version.

I would mostly argue about a semantic problem. inlineCallbacks help
asynchronous code *look* like synchronous code thanks to the sequential
writing. It is however essentially asynchronous and does return a
Deferred.

I do not see any immediate technical pitfall here. I would however be
very careful and double think my design if I were to use Deferred
objects as part of a blocking process.

kaiyou.


From exarkun at twistedmatrix.com  Thu Apr 24 20:27:20 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 25 Apr 2014 02:27:20 -0000
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
In-Reply-To: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
References: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
Message-ID: <20140425022720.6354.7331338.divmod.xquotient.13@top>

On 24 Apr, 11:45 pm, clayton.daley at gmail.com wrote:
>I have a modular application that communicates over RPC connections 
>(with
>both sync and async server/clients available).  I want to migrate some 
>of
>the modules over to Twisted. Currently, all modules inherit important
>utility functions from a parent class.  On paper, I now need two 
>versions
>of this parent class (synchronous & asynchronous) to be inherited by
>modules of the respective types.

You might find that replacing the subclassing with composition helps 
simplify the code re-use problem.

You may also be interested in https://github.com/radix/synchronous- 
deferred

Jean-Paul


From clayton.daley at gmail.com  Thu Apr 24 20:28:04 2014
From: clayton.daley at gmail.com (Clayton Daley)
Date: Thu, 24 Apr 2014 22:28:04 -0400
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
Message-ID: <CACKEAnXvjggutstq5NXqFjL1-WqKdbC3a0DHa3p54eEOh=jPxA@mail.gmail.com>

[apologize in advance if this creates threading issues as I picked digests
when I signed up not realizing it would make it difficult to reply to
threads]

Sorry I wasn't more clear.  My thought is to write a version that uses the
same @inlineCallback name and supports the same syntax (to eliminate the
need to rewrite code).  However, I don't mean the synchronous version to
actually use deferreds at all.  All I want the synchronous version to do is
"ignore" the yields (likely by sending the output right back in after the
block clears)... and treat the returnValue() as a return.

That way code written in the @inlineCallback syntax can be used by a
synchronous or asynchronous consumer.

Clayton Daley


On Thu, Apr 24, 2014 at 8:14 PM, pierre at jaury.eu wrote:

>
Le 2014-04-25 01:45, Clayton Daley a ?crit :
>* I imagine rewriting this to the following:
*> >*     @classmethod
*>*     @inlineCallbacks
*>*     def from_id(cls, id):
*>*         doc = yield db.get_document(id) # blocking/async db call
*> >*         self = cls._new_document(doc) # always synchronous
*>*          yield self.__init__() # blocking/async call
*>*         returnValue(self)
*> >* places. I've read that the @inlineCallback code is complicated so I
*>* figured I'd run the idea by the experts before diving down that rabbit
*>* hole.
*
I am no expert, but the code for inlineCallbacks looks pretty
straightforward, except some special cases handled down the way.

>* Does anyone see any obvious pitfall? I'm happy to do the legwork
*>* to try and build it, but I'd also welcome any pointers from your (no
*>* doubt extensive) experience writing the twisted version.
*
I would mostly argue about a semantic problem. inlineCallbacks help
asynchronous code *look* like synchronous code thanks to the sequential
writing. It is however essentially asynchronous and does return a
Deferred.

I do not see any immediate technical pitfall here. I would however be
very careful and double think my design if I were to use Deferred
objects as part of a blocking process.

kaiyou.


On Thu, Apr 24, 2014 at 7:45 PM, Clayton Daley <clayton.daley at gmail.com>wrote:

> I have a modular application that communicates over RPC connections (with
> both sync and async server/clients available).  I want to migrate some of
> the modules over to Twisted. Currently, all modules inherit important
> utility functions from a parent class.  On paper, I now need two versions
> of this parent class (synchronous & asynchronous) to be inherited by
> modules of the respective types.
>
> I'm looking for ways to maximize the common code between the two versions
> of the parent object. One that comes to mind (motivating the subject of
> this post) would be to write a synchronous interpreter for @inlineCallback
> calls.  For example, here's a synchronous factory function from the parent
> class (already partly reconfigured to be friendly to my idea):
>
>     @classmethod
>     def from_id(cls, id):
>         doc = db.get_document(id) # blocking db call
>         self = cls._new_document(doc) # synchronous initialization stuff
>         self.__init__() # module init code is custom and may block
>         return self
>
> I imagine rewriting this to the following:
>
>     @classmethod
>     @inlineCallbacks
>     def from_id(cls, id):
>         doc = yield db.get_document(id) # blocking/async db call
>         self = cls._new_document(doc) # always synchronous
>         yield self.__init__() # blocking/async call
>         returnValue(self)
>
> Assuming the db connector and init function are appropriate to the
> environment, my gut reaction is that this could (when combined with a
> synchronous implementation of the decorator) run correctly in both places.
> I've read that the @inlineCallback code is complicated so I figured I'd run
> the idea by the experts before diving down that rabbit hole. Does anyone
> see any obvious pitfall? I'm happy to do the legwork to try and build it,
> but I'd also welcome any pointers from your (no doubt extensive) experience
> writing the twisted version.
>
> Thanks in advance!
>
> Clayton Daley
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140424/669f4e3e/attachment.html>

From hawkowl at atleastfornow.net  Fri Apr 25 21:40:41 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Sat, 26 Apr 2014 11:40:41 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre3 Announcement
Message-ID: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>

Hi everyone, here?s a new Twisted 14.0 prerelease for you!

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre3>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre3/NEWS.txt>.

Changes from the previous prerelease include:

	- Making Twisted Agent do HTTPS hostname verification.

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we?re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140426/8e4239e9/attachment.pgp>

From hawkowl at atleastfornow.net  Sat Apr 26 02:03:35 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Sat, 26 Apr 2014 16:03:35 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre4 Announcement
In-Reply-To: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
Message-ID: <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>

Hello everyone, due to a silly mistake on my part, I had to merge in a dependency of the ticket I merged in last prerelease.

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre4>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre4/NEWS.txt>.

Changes from the previous prerelease include:

	- Making Twisted Agent do HTTPS hostname verification. (Properly this time)

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we?re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140426/3da50698/attachment.pgp>

From hawkowl at atleastfornow.net  Sat Apr 26 02:35:39 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Sat, 26 Apr 2014 16:35:39 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
Message-ID: <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>

Hi everyone, just a few changed bytes to fix some news file entries.

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.

Changes from the previous prerelease include:

	- Newsfile fixes.

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we?re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140426/cc9e97d7/attachment.pgp>

From rgacote at appropriatesolutions.com  Sat Apr 26 08:27:46 2014
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Sat, 26 Apr 2014 10:27:46 -0400 (EDT)
Subject: [Twisted-Python] Twisted 14.0.0pre3 Announcement
In-Reply-To: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
Message-ID: <11720544.4557.1398522466400.JavaMail.rgacote@raymac.appropriatesolutions.com>

I'm very excited to see the HTTPS hostname verification. 
Excellent news! (off to download...)
--Ray

----- Original Message -----
> From: "HawkOwl" <hawkowl at atleastfornow.net>
> To: "Twisted-Python" <twisted-python at twistedmatrix.com>
> Sent: Friday, April 25, 2014 11:40:41 PM
> Subject: [Twisted-Python] Twisted 14.0.0pre3 Announcement
> 
> Hi everyone, here?s a new Twisted 14.0 prerelease for you!
> 
> Tarballs for this prerelease can be found at
> <http://twistedmatrix.com/Releases/pre/14.0.0pre3>, with the
> changelog at
> <http://twistedmatrix.com/Releases/pre/14.0.0pre3/NEWS.txt>.
> 
> Changes from the previous prerelease include:
> 
> 	- Making Twisted Agent do HTTPS hostname verification.
> 
> For more information and a full list of changes, check the NEWS.txt
> file.
> 
> Please download the tarballs and test them with your applications, so
> we can make sure we?re all ready for release!
> 
> -hawkowl
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 

-- 
Ray Cote, President Appropriate Solutions, Inc. 
We Build Software 
www.AppropriateSolutions.com 603.924.6079 


From trac at twistedmatrix.com  Sun Apr 27 00:05:16 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 27 Apr 2014 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1398578716.08.9176844903609721166@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140427/75388955/attachment.html>

From dreid at dreid.org  Mon Apr 28 12:33:22 2014
From: dreid at dreid.org (David Reid)
Date: Mon, 28 Apr 2014 11:33:22 -0700
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
Message-ID: <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>

Sorry for the delay, I've tested that treq works with pre5 in the following
scenarios.

Python 2.7, no pyopenssl
Python 2.7, pyopenssl==0.14

PyPy 2.2.1, no pyopenssl
PyPy 2.2.1, pyopenssl==0.14

This is in addition to the testing that treq regularly receives on Twisted
Trunk, which has a build currently running:

https://travis-ci.org/dreid/treq/builds/23955777

-David


On Sat, Apr 26, 2014 at 1:35 AM, HawkOwl <hawkowl at atleastfornow.net> wrote:

> Hi everyone, just a few changed bytes to fix some news file entries.
>
> Tarballs for this prerelease can be found at <
> http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <
> http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.
>
> Changes from the previous prerelease include:
>
>         - Newsfile fixes.
>
> For more information and a full list of changes, check the NEWS.txt file.
>
> Please download the tarballs and test them with your applications, so we
> can make sure we?re all ready for release!
>
> -hawkowl
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140428/d6e1a4df/attachment.html>

From hawkowl at atleastfornow.net  Tue Apr 29 04:16:45 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Tue, 29 Apr 2014 18:16:45 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
Message-ID: <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>

Excellent!

If anyone else has some applications they run, please try out pre5!

-hawkowl

On 29 Apr 2014, at 2:33, David Reid <dreid at dreid.org> wrote:

> Sorry for the delay, I've tested that treq works with pre5 in the following scenarios.
> 
> Python 2.7, no pyopenssl
> Python 2.7, pyopenssl==0.14
> 
> PyPy 2.2.1, no pyopenssl
> PyPy 2.2.1, pyopenssl==0.14
> 
> This is in addition to the testing that treq regularly receives on Twisted Trunk, which has a build currently running:
> 
> https://travis-ci.org/dreid/treq/builds/23955777
> 
> -David
> 
> 
> On Sat, Apr 26, 2014 at 1:35 AM, HawkOwl <hawkowl at atleastfornow.net> wrote:
> Hi everyone, just a few changed bytes to fix some news file entries.
> 
> Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.
> 
> Changes from the previous prerelease include:
> 
>         - Newsfile fixes.
> 
> For more information and a full list of changes, check the NEWS.txt file.
> 
> Please download the tarballs and test them with your applications, so we can make sure we?re all ready for release!
> 
> -hawkowl
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140429/17251206/attachment.pgp>

From hs at ox.cx  Tue Apr 29 04:44:37 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 29 Apr 2014 12:44:37 +0200
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
 <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
Message-ID: <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>


On 29 Apr 2014, at 12:16, HawkOwl wrote:

> If anyone else has some applications they run, please try out pre5!

Look at all the ECDHEHEHE: ?gnutls-cli -s --crlf  imap.variomedia.de -p 4190?  (and DHEHEHEHE too if you add ?--priority='PFS:!ECDHE-RSA'?).

Tests are passing everywhere too.

> On 29 Apr 2014, at 2:33, David Reid <dreid at dreid.org> wrote:
>
>> Sorry for the delay, I've tested that treq works with pre5 in the following scenarios.
>>
>> Python 2.7, no pyopenssl
>> Python 2.7, pyopenssl==0.14
>>
>> PyPy 2.2.1, no pyopenssl
>> PyPy 2.2.1, pyopenssl==0.14
>>
>> This is in addition to the testing that treq regularly receives on Twisted Trunk, which has a build currently running:
>>
>> https://travis-ci.org/dreid/treq/builds/23955777
>>
>> -David
>>
>>
>> On Sat, Apr 26, 2014 at 1:35 AM, HawkOwl <hawkowl at atleastfornow.net> wrote:
>> Hi everyone, just a few changed bytes to fix some news file entries.
>>
>> Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.
>>
>> Changes from the previous prerelease include:
>>
>>      - Newsfile fixes.
>>
>> For more information and a full list of changes, check the NEWS.txt file.
>>
>> Please download the tarballs and test them with your applications, so we can make sure we?re all ready for release!
>>
>> -hawkowl
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: OpenPGP digital signature
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140429/bafdbc9b/attachment.pgp>

From glyph at twistedmatrix.com  Tue Apr 29 11:43:14 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 29 Apr 2014 10:43:14 -0700
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
 <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
 <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>
Message-ID: <C834781F-755A-45B9-B1B7-F26EFF9ABAE0@twistedmatrix.com>


On Apr 29, 2014, at 3:44 AM, Hynek Schlawack <hs at ox.cx> wrote:

>> If anyone else has some applications they run, please try out pre5!
> 
> Look at all the ECDHEHEHE: ?gnutls-cli -s --crlf  imap.variomedia.de -p 4190?  (and DHEHEHEHE too if you add ?--priority='PFS:!ECDHE-RSA'?).

Okay I can't even tell when TLS things are a joke any more.

Is 'ECDHEHEHE' a real cipher suite or are you just laughing? ;-)

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140429/8d625f9d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140429/8d625f9d/attachment-0001.bin>

From hs at ox.cx  Tue Apr 29 12:11:51 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 29 Apr 2014 20:11:51 +0200
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <C834781F-755A-45B9-B1B7-F26EFF9ABAE0@twistedmatrix.com>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
 <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
 <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>
 <C834781F-755A-45B9-B1B7-F26EFF9ABAE0@twistedmatrix.com>
Message-ID: <097356BF-3190-45BA-84B1-0DFC3E721DE9@ox.cx>

That's a Hawkowlism. :)

Sent from my phone.

> Am 29.04.2014 um 19:43 schrieb Glyph <glyph at twistedmatrix.com>:
> 
> 
> On Apr 29, 2014, at 3:44 AM, Hynek Schlawack <hs at ox.cx> wrote:
> 
>>> If anyone else has some applications they run, please try out pre5!
>> 
>> Look at all the ECDHEHEHE: ?gnutls-cli -s --crlf  imap.variomedia.de -p 4190?  (and DHEHEHEHE too if you add ?--priority='PFS:!ECDHE-RSA'?).
> 
> Okay I can't even tell when TLS things are a joke any more.
> 
> Is 'ECDHEHEHE' a real cipher suite or are you just laughing? ;-)
> 
> -g
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140429/2a6f50b6/attachment.html>

From juanito1982 at gmail.com  Wed Apr 30 02:57:27 2014
From: juanito1982 at gmail.com (=?UTF-8?Q?Juan_Antonio_Iba=C3=B1ez_Santorum?=)
Date: Wed, 30 Apr 2014 10:57:27 +0200
Subject: [Twisted-Python] Log level using Twistd
Message-ID: <CAHLYDCuJevGZu=yTZhfjYU8SjVcxasqLkk7w2TrtUt9B9QwxJw@mail.gmail.com>

Hello,

  I am trying to modify loglevel withou result. I configure my app logging
inside the tac file as:

logging.basicConfig(level=logging.ERROR, format="%(asctime)s --- %(name)s -
%(levelname)s - %(message)s")
logfile = DailyLogFile("gdumper.log", "/var/log")
application.setComponent(ILogObserver, FileLogObserver(logfile).emit)

logging.basicConfig call seems do not apply as I get both log.msg and
log.err messages into the log. Is there any other way to set up log level?

Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/a4b3c7d0/attachment.html>

From exarkun at twistedmatrix.com  Wed Apr 30 05:55:23 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 11:55:23 -0000
Subject: [Twisted-Python] Log level using Twistd
In-Reply-To: <CAHLYDCuJevGZu=yTZhfjYU8SjVcxasqLkk7w2TrtUt9B9QwxJw@mail.gmail.com>
References: <CAHLYDCuJevGZu=yTZhfjYU8SjVcxasqLkk7w2TrtUt9B9QwxJw@mail.gmail.com>
Message-ID: <20140430115523.6354.1752102256.divmod.xquotient.43@top>

On 08:57 am, juanito1982 at gmail.com wrote:
>Hello,
>
>  I am trying to modify loglevel withou result. I configure my app 
>logging
>inside the tac file as:

You omitted the imports necessary to interpret the example code with 
certainty but I'll make some guesses.  Next time post a complete, self- 
contained example.

This line:
>
>logging.basicConfig(level=logging.ERROR, format="%(asctime)s --- 
>%(name)s -
>%(levelname)s - %(message)s")

configures the standard library logging module.

This line:
>
>logfile = DailyLogFile("gdumper.log", "/var/log")

creates a log writer from the Twisted logging system that will write to 
a file.

And this line:
>
>application.setComponent(ILogObserver, FileLogObserver(logfile).emit)

makes `twistd` configure Twisted's logging system with a log observer 
that will use that log writer to record log events.

Twisted's logging system and the standard library logging system are 
separate things, though.  Configuring the standard library logging 
system will not make any difference to Twisted's logging system.

If you want log messages emitted by `log.msg` and `log.err` to traverse 
the standard library logging system then the minimum you need to do is 
use `twisted.python.log.PythonLoggingObserver` instead of 
`FileLogObserver`.

`PythonLoggingObserver` observes log events in the Twisted logging 
system and sends them to the standard library logging system.

Once you do that you may be able to configure the standard library 
logging system to behave as you desire.

Jean-Paul
>logging.basicConfig call seems do not apply as I get both log.msg and
>log.err messages into the log. Is there any other way to set up log 
>level?
>
>Regards


From ashfall at twistedmatrix.com  Wed Apr 30 06:19:10 2014
From: ashfall at twistedmatrix.com (Ashwini Oruganti)
Date: Wed, 30 Apr 2014 17:49:10 +0530
Subject: [Twisted-Python]
	=?utf-8?q?What_happens_in_Montr=C3=A9al=E2=80=A6?=
	=?utf-8?q?_PyCon_2014_Sprint_Report?=
In-Reply-To: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
References: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
Message-ID: <CAMFCZ-0dKYyzYPUAt5b=_nDDQ5q65pufGef_Nt5MBv7-_x6MWQ@mail.gmail.com>

On Mon, Apr 21, 2014 at 3:08 AM, Kevin Turner <keturn at keturn.net> wrote:

> Hi folks,
>
> I didn't attend PyCon or the accompanying sprints this year, but judging
> from the commit traffic, many of you did. And I want to know what you
> worked on! Partly so I can live vicariously through your experiences,
> but I know a lot of other people are curious too. Events like this are a
> great way to show our followers and sponsors what happens when a bunch
> of people have a chance to get together and focus on the project.
>
> I've started a sprint report page on the wiki:
> https://twistedmatrix.com/trac/wiki/PyconSprint2014
>
> Feel free to contribute directly to that page, or reply to this email
> (either on or off-list) and I'll see if I can summarize the responses.
>
> For those of you who were at the sprints this year:
>
> * Was this your first time at a development sprint?
>

Yes and no. - Yes, because this was the first time I did any "development"
at a sprint. No, because I just hung out at PyCon sprints last year for a
little while - without actually "sprinting".


>
> * Was it your first time contributing to Twisted?
>

Nope.


>
> * What did you work on?
>
>
I sort of paired with itamar and glyph on the things they were working on.
By "sort of", I mean I just sat there following what they were doing and
asked questions, and as glyph put it - "made sure they don't get
distracted".

I made exarkun release Machinist - and by that I mean I kept poking at him
until he finished the setup.py and frowned and screamed at anyone who
wanted him to work on anything else.

Now the "real" contribution I made -  worked on <
https://twistedmatrix.com/trac/ticket/6698>: designed a state machine for
HostnameEndpoint using Machinist with exarkun. It's nowhere close to being
ready yet, but it's a start.


> * Did you work on something outside Twisted core? I especially want to
> hear about these! For Twisted I can look at the commit logs, but if
> there was activity on related projects, I might not know where to look
> unless you tell me about it.
>

Well, I requested a release of Machinist <
https://github.com/hybridcluster/machinist>. And to release Machinist, we
needed Eliot <https://github.com/hybridcluster/eliot>, and upon my asking,
itamar released it on the first day of the sprints. (It might look like I
am taking all the credits for these, but please note that all I did was
*ask* for the releases, and that too for purely selfish reasons - so I
could work on tm.tl/#6698)


>
> * Any other lasting impressions? Is there something you'll do
> differently now as a result of some conversation or experience you had
> at PyCon?
>

During the sprints, there were numerous discussions about a new TLS API in
Cryptography <
https://mail.python.org/pipermail/cryptography-dev/2014-April/000227.html>.
Although I spent more time frowning at those discussions because they
demanded that time of the people that I wanted to use for designing my FSM,
I now find it interesting. As a result of people screaming TLS all the
time, I might look into working on this in my free time.


>
> I know now that you're starting to get caught up on sleep and the
> poutine is leaving your system, you may have reservations about sharing
> certain things you worked on. Maybe you feel like it's not "ready" yet,
> or it feels out-of-place next to that ticket Glyph worked on where there
> were eight or nine thousand words in the ticket comments alone. Maybe
> some things that happen in Montr?al really should stay in Montr?al.
>
> But if you had a good experience at the sprints, and it's something
> you'd encourage others to join next time they have the opportunity,
> please share!
>
>
Right so, I was wary of sprinting initially, since it involves trying to
write useful code in a room full of people, with lots of noise and
distractions. I could only attend this one because people insisted I do. It
started with a logical discussion in an attempt to highlight the benefits
of sprints and why people liked sprinting (I should perhaps document it
sometime - maybe a blog post soon), but when I was still scared, people
resorted to: "Just come and sit with us", "there is lots of room,
internets, and powers!", and "you should [just] come over" (and even a
"just try and avoid it. I dare you" :).

And I went over. And it was fun! People threw forks at others for writing
bad code, people signed keys, people talked about writing software, people
talked about snow (okay, that was mostly just me), people talked about
food, about climbing mountains, and people talked about meeting more people.

So yes, if you have the opportunity, you should attend the sprints - if not
to write software, maybe just to hang out with friends, it can be a lot of
fun!


> If you didn't have the experience you were hoping for, but you learned
> something that will make it better for next time, share that too.
> Whether it's something for the sprint organizers or something you wish
> you could tell your earlier self, help us make next time better.
>

Uhm yes, there's this one thing. During the sprints, I worked with exarkun
on designing a Finite State Machine, and once we were done with an initial
design, we checked it into a branch for me to continue working on it later.
When I did look at it later, working on it alone seemed dull and boring as
compared to pairing with people. And well, I think I'm going to have to
take a break from the branch until I forget how much fun the sprints were,
so that I can continue happily working on it alone.

It's not something that can (or should, for that matter) be fixed. It's
just a side-effect of a successful sprint you can't avoid. :)

-Ashwini
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/4e63f720/attachment-0001.html>

From exarkun at twistedmatrix.com  Wed Apr 30 06:21:30 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 12:21:30 -0000
Subject: [Twisted-Python] =?utf-8?q?Some_comments_regarding_=235190_-_=60?=
 =?utf-8?q?=60RFC_6125_=28=22Service_Identity=22=29_implementation=C2=B4?=
 =?utf-8?b?wrQ=?=
Message-ID: <20140430122130.6354.1569482577.divmod.xquotient.52@top>

Hello,

I've just noticed that the changeset for #5190 included some untested 
code.  Specifically, there are no tests for the code which detects 
missing dependencies and emits warnings about them.

I'd previously noticed that this code was broken but hadn't realized 
this was because it was untested.

I don't think there's any disagreement whatsoever over Twisted's testing 
requirements.  All code must have full line and branch coverage (as 
reported by the coverage.py tool).  Developers, please write tests for 
all of your code (and please learn to do test-driven development - it 
will make this task easier, I promise).  Reviewers, please don't accept 
proposed changes that include untested code.

Thanks,
Jean-Paul


From exarkun at twistedmatrix.com  Wed Apr 30 07:03:04 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 13:03:04 -0000
Subject: [Twisted-Python]
 =?utf-8?q?What_happens_in_Montr=C3=A9al=E2=80=A6?=
 =?utf-8?q?_PyCon_2014_Sprint_Report?=
In-Reply-To: <CAMFCZ-0dKYyzYPUAt5b=_nDDQ5q65pufGef_Nt5MBv7-_x6MWQ@mail.gmail.com>
References: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
 <CAMFCZ-0dKYyzYPUAt5b=_nDDQ5q65pufGef_Nt5MBv7-_x6MWQ@mail.gmail.com>
Message-ID: <20140430130304.6354.138533116.divmod.xquotient.58@top>

On 12:19 pm, ashfall at twistedmatrix.com wrote:
>
>And I went over. And it was fun! People threw forks at others for 
>writing
>bad code, [snip]

Possibly the notion of having cutlery thrown at you doesn't sound as 
appealing to people who weren't there (possibly it wasn't terribly 
appealing to the people who *were* there, either).  So I'll just add 
that as far as I know it was only one fork, it was plastic, and I don't 
think this is a common occurrence at Twisted sprints (nor should it be, 
it's all good fun 'til someone loses an eye).  Sorry Glyph!  (But 
seriously don't write code like that ;)

Jean-Paul


From dstainton415 at gmail.com  Wed Apr 30 07:42:30 2014
From: dstainton415 at gmail.com (David Stainton)
Date: Wed, 30 Apr 2014 13:42:30 +0000
Subject: [Twisted-Python] adding endpoint plugins
Message-ID: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>

Greetings,

I wrote a simple IStreamClientEndpointStringParser for using the
SOCKS5ClientEndpoint with Tor:
https://gist.github.com/david415/26a4ed59078d2e27376f

I modified a txsocksx code example for testing the new endpoint descriptor:
https://gist.github.com/david415/7c6040117319cc3b0230

...but I am not sure how to "register" it such that calls to
clientFromString can return this endpoint when the descriptor prefix
matches.

This doc:
https://twistedmatrix.com/documents/13.2.0/api/twisted.internet.interfaces.IStreamClientEndpointStringParser.html
mentions placing the plugin in the twisted.plugins package... however this doc:
http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
suggests that I can also set the PYTHONPATH to a directory:

"""if a directory which has been added to sys.path (typically by
adding it to the PYTHONPATH environment variable) contains a directory
named twisted/plugins/ , each .py file in that directory will be
loaded as a source of plugins."""

I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
something wrong here but after scouring the docs and twisted source
code... I'm just not sure.

This effort is part of solving for Tahoe-LAFS trac ticket 517:
"make tahoe Tor- and I2P-friendly"
https://tahoe-lafs.org/trac/tahoe-lafs/ticket/517

Thanks to Glyph and JP's help I was able to write a foolscap client
side patch to use twisted endpoints. See foolscap trac ticket 203:
http://foolscap.lothar.com/trac/ticket/203#comment:36

str4d has already written the foolscap server side endpoint patch...
Therefore it seems to me the next steps are to create parsers for
endpoints we are interested in supporting... and get Tahoe-LAFS to
register them so that serverFromString and clientFromString will
return the expected endpoint objects.

Cheers!

David


From exarkun at twistedmatrix.com  Wed Apr 30 08:14:16 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 14:14:16 -0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
Message-ID: <20140430141416.6354.407951741.divmod.xquotient.68@top>

On 01:42 pm, dstainton415 at gmail.com wrote:
>Greetings,
>
>
>http://twistedsphinx.funsize.net/projects/core/howto/plugin.html

Note that's a random version of the documentation from who knows how 
long ago.  If you want a random version of the documentation then I 
suggest using http://twisted.readthedocs.org/en/latest/ instead.
>
>suggests that I can also set the PYTHONPATH to a directory:

Sure.  As a development environment trick.  Putting the module defining 
your plugin into *the* twisted/plugins/ directory will reduce your 
runtime cost.  This is purely a deployment decision, though, so if you'd 
rather expand PYTHONPATH then you can.
>
>"""if a directory which has been added to sys.path (typically by
>adding it to the PYTHONPATH environment variable) contains a directory
>named twisted/plugins/ , each .py file in that directory will be
>loaded as a source of plugins."""
>
>I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>something wrong here but after scouring the docs and twisted source
>code... I'm just not sure.

I don't think there's enough information here to debug your problem. 
Try coming up with an http://sscce.org/ or at least providing all of the 
details about your setup - the exact value of PYTHONPATH, the command 
you use to launch the program, the working directory you use, the 
complete, exact filesystem hierarchy starting at the top-most directory 
containing any code you wrote or expect to be in use, etc.

Some random suggestions that have helped other people and might help you 
but who knows:

  * delete all the dropin.cache files you can find and try again
  * delete all the .pyc files you can find and try again
  * put absolute paths into PYTHONPATH, not relative paths
  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put "/foo/bar"
  * Make sure your plugin *provides* the plugin interface and IPlugin. 
This is not the same *implementing* those interfaces.

Good luck,
Jean-Paul


From dstainton415 at gmail.com  Wed Apr 30 09:50:31 2014
From: dstainton415 at gmail.com (David Stainton)
Date: Wed, 30 Apr 2014 15:50:31 +0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430141416.6354.407951741.divmod.xquotient.68@top>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
Message-ID: <CAFN1edo5S3j-TEut96vEhdRonGSvuexeSA5H0+YizpxQqBck2g@mail.gmail.com>

Hi Jean-Paul,

Thanks for the suggestions.
OK... here's my SSCCE:

cd projects/virtualenv-1.11.1/
./virtualenv.py ~/virtenv-endpoints-test
. ~/virtenv-endpoints-test/bin/activate
usewithtor pip install twisted
cd ~/projects
git clone https://github.com/david415/txsocksx.git
cd txsocksx
git checkout endpoint_parsers
usewithtor python setup.py install
cd examples # CWD is now /home/human/projects/txsocksx/examples
cp tor_client_endpoint_parser.py
/home/human/virtenv-endpoints-test/lib/python2.7/site-packages/twisted/plugins
find /home/human/virtenv-endpoints-test/ -name "*.pyc" | xargs rm
find /home/human/virtenv-endpoints-test/ -name "dropin.cache" | xargs rm
python tor-http.py
Traceback (most recent call last):
  File "tor-http.py", line 32, in <module>
    torEndpoint = clientFromString(reactor,
"tor:host=timaq4ygg2iegci7.onion:port=80")
  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-packages/twisted/internet/endpoints.py",
line 1737, in clientFromString
    raise ValueError("Unknown endpoint type: %r" % (aname,))
ValueError: Unknown endpoint type: 'tor'


I also tried the PYTHONPATH trick:

mkdir -p fu/twisted/plugins
cp tor_client_endpoint_parser.py fu/twisted/plugins
PYTHONPATH=/home/projects/txsocks/examples/fu python tor-http.py
Traceback (most recent call last):
  File "tor-http.py", line 32, in <module>
    torEndpoint = clientFromString(reactor,
"tor:host=timaq4ygg2iegci7.onion:port=80")
  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-packages/twisted/internet/endpoints.py",
line 1737, in clientFromString
    raise ValueError("Unknown endpoint type: %r" % (aname,))
ValueError: Unknown endpoint type: 'tor'


I wonder if I am having a deployment problem here or if my code has
got problems.
https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor_client_endpoint_parser.py
https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor-http.py


Cheers!

David

On Wed, Apr 30, 2014 at 2:14 PM,  <exarkun at twistedmatrix.com> wrote:
> On 01:42 pm, dstainton415 at gmail.com wrote:
>>
>> Greetings,
>>
>>
>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>
>
> Note that's a random version of the documentation from who knows how long
> ago.  If you want a random version of the documentation then I suggest using
> http://twisted.readthedocs.org/en/latest/ instead.
>
>>
>> suggests that I can also set the PYTHONPATH to a directory:
>
>
> Sure.  As a development environment trick.  Putting the module defining your
> plugin into *the* twisted/plugins/ directory will reduce your runtime cost.
> This is purely a deployment decision, though, so if you'd rather expand
> PYTHONPATH then you can.
>
>>
>> """if a directory which has been added to sys.path (typically by
>> adding it to the PYTHONPATH environment variable) contains a directory
>> named twisted/plugins/ , each .py file in that directory will be
>> loaded as a source of plugins."""
>>
>> I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>> PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>> something wrong here but after scouring the docs and twisted source
>> code... I'm just not sure.
>
>
> I don't think there's enough information here to debug your problem. Try
> coming up with an http://sscce.org/ or at least providing all of the details
> about your setup - the exact value of PYTHONPATH, the command you use to
> launch the program, the working directory you use, the complete, exact
> filesystem hierarchy starting at the top-most directory containing any code
> you wrote or expect to be in use, etc.
>
> Some random suggestions that have helped other people and might help you but
> who knows:
>
>  * delete all the dropin.cache files you can find and try again
>  * delete all the .pyc files you can find and try again
>  * put absolute paths into PYTHONPATH, not relative paths
>  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put "/foo/bar"
>  * Make sure your plugin *provides* the plugin interface and IPlugin. This
> is not the same *implementing* those interfaces.
>
> Good luck,
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From thostrup at gmail.com  Wed Apr 30 10:43:09 2014
From: thostrup at gmail.com (Henrik Thostrup Jensen)
Date: Wed, 30 Apr 2014 18:43:09 +0200
Subject: [Twisted-Python] Fwd: Trouble with session id reuse/disabling with
	twisted TLS
In-Reply-To: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
References: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
Message-ID: <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>

Hi

I have a twisted service, which uses TLS and I seeing some odd behaviour.

New connections are accepted fine, but if a client tries to re-use a
TLS session id with a new connection, the services rejects the
connection.

Poking at the TLS module I added the following line to help me figure
out what was wrong:

@@ -363,11 +365,13 @@
             except ZeroReturnError:
                 # TLS has shut down and no more TLS data will be received over
                 # this connection.
                 self._shutdownTLS()
                 # Passing in None means the user protocol's connnectionLost
                 # will get called with reason from underlying transport:
                 self._tlsShutdownFinished(None)
             except Error as e:
+                log.msg('_flushReceiveBIO Error: %s' % str(e),
system='protocols.TLS')
                 # Something went pretty wrong.  For example, this might be a
                 # handshake failure (because there were no shared
ciphers, because
                 # a certificate failed to verify, etc).  TLS can no
longer proceed.

(I think the above patch would be a nice addition to twisted as
figuring out what goes wrong in the TLS stack is currently quite
difficult).

This gives me the following:

2014-04-30 15:02:08+0200 [protocols.TLS] _flushReceiveBIO Error:
[('SSL routines', 'SSL_GET_PREV_SESSION', 'session id context
uninitialized')]

I am using the same (cached) context for all incoming connections.

Using openssl s_client -connect host:port I can see that the service
returns a session id and master key.

If I disable session cache with:

ctx.set_session_cache_mode(SSL.SESS_CACHE_OFF)

The s_client command still returns session-id and master-key. Which is
rather unexpected.
(I am not using the CertificateOptions class, just SSL.Context)

Code for context creation can be seen here:
https://github.com/NORDUnet/opennsa/blob/master/opennsa/ctxfactory.py
Without the disabling of session id.

Any idea to what I am doing wrong here?

This is with openssl 1.0.1-4ubuntu5.12, pyOpenSSL 14.1 and Twisted 13.1


  regards, Henrik


From kevin.horn at gmail.com  Wed Apr 30 10:53:02 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 30 Apr 2014 11:53:02 -0500
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430141416.6354.407951741.divmod.xquotient.68@top>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
Message-ID: <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>

On Wed, Apr 30, 2014 at 9:14 AM, <exarkun at twistedmatrix.com> wrote:

> On 01:42 pm, dstainton415 at gmail.com wrote:
>
>> Greetings,
>>
>>
>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>>
>
> Note that's a random version of the documentation from who knows how long
> ago.  If you want a random version of the documentation then I suggest
> using http://twisted.readthedocs.org/en/latest/ instead.
>
>>
>>
Probably from 2011 or so... yup, looks like end of 2011.

Now that the Sphinx transition has actually happened, I suppose I should
probably take that down and perhaps replace it with a pointer to the RTD
version.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/62e18b97/attachment.html>

From exarkun at twistedmatrix.com  Wed Apr 30 11:00:04 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 17:00:04 -0000
Subject: [Twisted-Python] adding endpoint plugins
Message-ID: <20140430170004.6354.1698229865.divmod.xquotient.120@top>

On 03:50 pm, dstainton415 at gmail.com wrote:
>Hi Jean-Paul,
>
>Thanks for the suggestions.
>OK... here's my SSCCE:

It looks like you need to make an instance of 
`TorClientEndpointStringParser`.  If a class `implements? an interface 
then instances of that class `provide? the interface.

The plugin system searches for objects that `project? the requested 
interface.

Jean-Paul
>cd projects/virtualenv-1.11.1/
>./virtualenv.py ~/virtenv-endpoints-test
>. ~/virtenv-endpoints-test/bin/activate
>usewithtor pip install twisted
>cd ~/projects
>git clone https://github.com/david415/txsocksx.git
>cd txsocksx
>git checkout endpoint_parsers
>usewithtor python setup.py install
>cd examples # CWD is now /home/human/projects/txsocksx/examples
>cp tor_client_endpoint_parser.py
>/home/human/virtenv-endpoints-test/lib/python2.7/site- 
>packages/twisted/plugins
>find /home/human/virtenv-endpoints-test/ -name "*.pyc" | xargs rm
>find /home/human/virtenv-endpoints-test/ -name "dropin.cache" | xargs 
>rm
>python tor-http.py
>Traceback (most recent call last):
>  File "tor-http.py", line 32, in <module>
>    torEndpoint = clientFromString(reactor,
>"tor:host=timaq4ygg2iegci7.onion:port=80")
>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site- 
>packages/twisted/internet/endpoints.py",
>line 1737, in clientFromString
>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>ValueError: Unknown endpoint type: 'tor'
>
>
>I also tried the PYTHONPATH trick:
>
>mkdir -p fu/twisted/plugins
>cp tor_client_endpoint_parser.py fu/twisted/plugins
>PYTHONPATH=/home/projects/txsocks/examples/fu python tor-http.py
>Traceback (most recent call last):
>  File "tor-http.py", line 32, in <module>
>    torEndpoint = clientFromString(reactor,
>"tor:host=timaq4ygg2iegci7.onion:port=80")
>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site- 
>packages/twisted/internet/endpoints.py",
>line 1737, in clientFromString
>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>ValueError: Unknown endpoint type: 'tor'
>
>
>I wonder if I am having a deployment problem here or if my code has
>got problems.
>https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor_client_endpoint_parser.py
>https://github.com/david415/txsocksx/blob/endpoint_parsers/examples 
>/tor-http.py
>
>
>Cheers!
>
>David
>
>On Wed, Apr 30, 2014 at 2:14 PM,  <exarkun at twistedmatrix.com> wrote:
>>On 01:42 pm, dstainton415 at gmail.com wrote:
>>>
>>>Greetings,
>>>
>>>
>>>http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>>
>>
>>Note that's a random version of the documentation from who knows how 
>>long
>>ago.  If you want a random version of the documentation then I suggest 
>>using
>>http://twisted.readthedocs.org/en/latest/ instead.
>>>
>>>suggests that I can also set the PYTHONPATH to a directory:
>>
>>
>>Sure.  As a development environment trick.  Putting the module 
>>defining your
>>plugin into *the* twisted/plugins/ directory will reduce your runtime 
>>cost.
>>This is purely a deployment decision, though, so if you'd rather 
>>expand
>>PYTHONPATH then you can.
>>>
>>>"""if a directory which has been added to sys.path (typically by
>>>adding it to the PYTHONPATH environment variable) contains a 
>>>directory
>>>named twisted/plugins/ , each .py file in that directory will be
>>>loaded as a source of plugins."""
>>>
>>>I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>>>PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>>>something wrong here but after scouring the docs and twisted source
>>>code... I'm just not sure.
>>
>>
>>I don't think there's enough information here to debug your problem. 
>>Try
>>coming up with an http://sscce.org/ or at least providing all of the 
>>details
>>about your setup - the exact value of PYTHONPATH, the command you use 
>>to
>>launch the program, the working directory you use, the complete, exact
>>filesystem hierarchy starting at the top-most directory containing any 
>>code
>>you wrote or expect to be in use, etc.
>>
>>Some random suggestions that have helped other people and might help 
>>you but
>>who knows:
>>
>>  * delete all the dropin.cache files you can find and try again
>>  * delete all the .pyc files you can find and try again
>>  * put absolute paths into PYTHONPATH, not relative paths
>>  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put 
>>"/foo/bar"
>>  * Make sure your plugin *provides* the plugin interface and IPlugin. 
>>This
>>is not the same *implementing* those interfaces.
>>
>>Good luck,
>>Jean-Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From p.mayers at imperial.ac.uk  Wed Apr 30 11:26:11 2014
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 30 Apr 2014 18:26:11 +0100
Subject: [Twisted-Python] Fwd: Trouble with session id reuse/disabling
 with twisted TLS
In-Reply-To: <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>
References: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
 <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>
Message-ID: <53613233.2080908@imperial.ac.uk>

On 30/04/14 17:43, Henrik Thostrup Jensen wrote:
> Hi
>
> I have a twisted service, which uses TLS and I seeing some odd behaviour.
>
> New connections are accepted fine, but if a client tries to re-use a
> TLS session id with a new connection, the services rejects the
> connection.

This example:

https://twistedmatrix.com/documents/12.0.0/core/howto/ssl.html#auto2

...seems to work fine for me on both Twisted 12.1.0 / pyOpenSSL 0.13.1 
and Twisted 13.2.0 / pyOpenSSL 0.14. I'm testing using:

openssl s_client -connect host:port -reconnect

...and seeing:

drop connection and then reconnect
CONNECTED(00000003)
---
Reused, TLSv1/SSLv3, Cipher is AES256-GCM-SHA384

^^^^^^ looks ok.

What do you see if you use that openssl command to test? Can you reduce 
it to a sscce with a fake self-signed cert?


From dstainton415 at gmail.com  Wed Apr 30 11:29:27 2014
From: dstainton415 at gmail.com (David Stainton)
Date: Wed, 30 Apr 2014 17:29:27 +0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
References: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
Message-ID: <CAFN1edow42cFsmrTGbTGD4N8DAEaCKmsYH9CHKg0BvBp8Gk5Lw@mail.gmail.com>

ah ok... i made it work. Thanks!

On Wed, Apr 30, 2014 at 5:00 PM,  <exarkun at twistedmatrix.com> wrote:
> On 03:50 pm, dstainton415 at gmail.com wrote:
>>
>> Hi Jean-Paul,
>>
>> Thanks for the suggestions.
>> OK... here's my SSCCE:
>
>
> It looks like you need to make an instance of
> `TorClientEndpointStringParser`.  If a class `implements? an interface then
> instances of that class `provide? the interface.
>
> The plugin system searches for objects that `project? the requested
> interface.
>
> Jean-Paul
>>
>> cd projects/virtualenv-1.11.1/
>> ./virtualenv.py ~/virtenv-endpoints-test
>> . ~/virtenv-endpoints-test/bin/activate
>> usewithtor pip install twisted
>> cd ~/projects
>> git clone https://github.com/david415/txsocksx.git
>> cd txsocksx
>> git checkout endpoint_parsers
>> usewithtor python setup.py install
>> cd examples # CWD is now /home/human/projects/txsocksx/examples
>> cp tor_client_endpoint_parser.py
>> /home/human/virtenv-endpoints-test/lib/python2.7/site-
>> packages/twisted/plugins
>> find /home/human/virtenv-endpoints-test/ -name "*.pyc" | xargs rm
>> find /home/human/virtenv-endpoints-test/ -name "dropin.cache" | xargs rm
>> python tor-http.py
>> Traceback (most recent call last):
>>  File "tor-http.py", line 32, in <module>
>>    torEndpoint = clientFromString(reactor,
>> "tor:host=timaq4ygg2iegci7.onion:port=80")
>>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-
>> packages/twisted/internet/endpoints.py",
>>
>> line 1737, in clientFromString
>>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>> ValueError: Unknown endpoint type: 'tor'
>>
>>
>> I also tried the PYTHONPATH trick:
>>
>> mkdir -p fu/twisted/plugins
>> cp tor_client_endpoint_parser.py fu/twisted/plugins
>> PYTHONPATH=/home/projects/txsocks/examples/fu python tor-http.py
>> Traceback (most recent call last):
>>  File "tor-http.py", line 32, in <module>
>>    torEndpoint = clientFromString(reactor,
>> "tor:host=timaq4ygg2iegci7.onion:port=80")
>>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-
>> packages/twisted/internet/endpoints.py",
>>
>> line 1737, in clientFromString
>>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>> ValueError: Unknown endpoint type: 'tor'
>>
>>
>> I wonder if I am having a deployment problem here or if my code has
>> got problems.
>>
>> https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor_client_endpoint_parser.py
>> https://github.com/david415/txsocksx/blob/endpoint_parsers/examples
>> /tor-http.py
>>
>>
>> Cheers!
>>
>> David
>>
>> On Wed, Apr 30, 2014 at 2:14 PM,  <exarkun at twistedmatrix.com> wrote:
>>>
>>> On 01:42 pm, dstainton415 at gmail.com wrote:
>>>>
>>>>
>>>> Greetings,
>>>>
>>>>
>>>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>>>
>>>
>>>
>>> Note that's a random version of the documentation from who knows how long
>>> ago.  If you want a random version of the documentation then I suggest
>>> using
>>> http://twisted.readthedocs.org/en/latest/ instead.
>>>>
>>>>
>>>> suggests that I can also set the PYTHONPATH to a directory:
>>>
>>>
>>>
>>> Sure.  As a development environment trick.  Putting the module defining
>>> your
>>> plugin into *the* twisted/plugins/ directory will reduce your runtime
>>> cost.
>>> This is purely a deployment decision, though, so if you'd rather expand
>>> PYTHONPATH then you can.
>>>>
>>>>
>>>> """if a directory which has been added to sys.path (typically by
>>>> adding it to the PYTHONPATH environment variable) contains a directory
>>>> named twisted/plugins/ , each .py file in that directory will be
>>>> loaded as a source of plugins."""
>>>>
>>>> I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>>>> PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>>>> something wrong here but after scouring the docs and twisted source
>>>> code... I'm just not sure.
>>>
>>>
>>>
>>> I don't think there's enough information here to debug your problem. Try
>>> coming up with an http://sscce.org/ or at least providing all of the
>>> details
>>> about your setup - the exact value of PYTHONPATH, the command you use to
>>> launch the program, the working directory you use, the complete, exact
>>> filesystem hierarchy starting at the top-most directory containing any
>>> code
>>> you wrote or expect to be in use, etc.
>>>
>>> Some random suggestions that have helped other people and might help you
>>> but
>>> who knows:
>>>
>>>  * delete all the dropin.cache files you can find and try again
>>>  * delete all the .pyc files you can find and try again
>>>  * put absolute paths into PYTHONPATH, not relative paths
>>>  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put "/foo/bar"
>>>  * Make sure your plugin *provides* the plugin interface and IPlugin.
>>> This
>>> is not the same *implementing* those interfaces.
>>>
>>> Good luck,
>>> Jean-Paul
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From exarkun at twistedmatrix.com  Wed Apr 30 11:35:26 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 17:35:26 -0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
References: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
Message-ID: <20140430173526.6354.1069875400.divmod.xquotient.121@top>

On 05:00 pm, exarkun at twistedmatrix.com wrote:
>
>The plugin system searches for objects that `project? the requested 
>interface.

Bah.  That `provide? the requested interface.

Jean-Paul


From nicola.cesca at mail.com  Wed Apr 30 11:48:27 2014
From: nicola.cesca at mail.com (Nicola Cesca)
Date: Wed, 30 Apr 2014 19:48:27 +0200
Subject: [Twisted-Python] problem with numpy and twisted xmlrpc
Message-ID: <5361376B.1010207@mail.com>

Hi all,
I'm newbie. I got a lot of problem using xmlrpc and numpy

I'm using numpy to to some staff and then serve the results via a 
twisted/XMLRPC server. If the result is a numpy float 64, I get an 
exception cause probably twisted can't handle this type. Infact is I 
downgrade the result to float32 with x=float(x), everything is ok. This 
is not so good cause if I forget this workaroud somewhere, it's a pain. 
Have you any better solution?

server:

|from  twisted.webimport  xmlrpc,  server
import  numpyas  np

class  MioServer(xmlrpc.XMLRPC):
     """
     An example object to be published.
     """

     def  xmlrpc_test_np(self):
         return  np.sqrt(2)

if  __name__==  '__main__':
     from  twisted.internetimport  reactor
     r=  MioServer()
     reactor.listenTCP(7080,  server.Site(r))
     reactor.run()|

client:

|import  xmlrpclib

if  __name__=='__main__':
     x=xmlrpclib.ServerProxy('http://localhost:7080/')
     print  x.test_np()|

Exception:

|Traceback  (most recent call last):
   File  "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py",  line1446,  in  <module>
     debugger.run(setup['file'],  None,  None)
   File  "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py",  line1092,  in  run
     pydev_imports.execfile(file,  globals,  locals)  #execute the script
   File  "C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py",  line28,  in  <module>
     print  x.test_np()
   File  "C:\Python27\lib\xmlrpclib.py",  line1224,  in  __call__
     return  self.__send(self.__name,  args)
   File  "C:\Python27\lib\xmlrpclib.py",  line1578,  in  __request
     verbose=self.__verbose
   File  "C:\Python27\lib\xmlrpclib.py",  line1264,  in  request
     return  self.single_request(host,  handler,  request_body,  verbose)
   File  "C:\Python27\lib\xmlrpclib.py",  line1297,  in  single_request
     return  self.parse_response(response)
   File  "C:\Python27\lib\xmlrpclib.py",  line1473,  in  parse_response
     return  u.close()
   File  "C:\Python27\lib\xmlrpclib.py",  line793,  in  close
     raise  Fault(**self._stack[0])
xmlrpclib.Fault:  <Fault  8002:  "Can't serialize output: cannot marshal <type 'numpy.float64'> objects">|


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/78a51e82/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nicola_cesca.vcf
Type: text/x-vcard
Size: 174 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/78a51e82/attachment.vcf>

From sank.daniel at gmail.com  Wed Apr 30 12:00:36 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 11:00:36 -0700
Subject: [Twisted-Python] pb objects unexpectedly change identity
Message-ID: <CAKN9TD+BDk_00uNfw=PecB3PLN6bS7UcvqotBP6qxp0cMbHavA@mail.gmail.com>

Dear twisted users,

I think I have found some surprising behavior in perspective broker. I
define a subclass of pb.RemoteCache which has a method managed by a
descriptor. The descriptor keeps track of the instances it manages in a set.

When the RemoteCache is first received by the client, it accesses the
descriptor-ified method inside setCopyableState. At that time the
RemoteCache's id is a certain value X. Then later when the RemoteCache is
notified of a change by the server side Cacheable, it again accesses the
descriptor-ified method, but at this time it's id is Y, and Y!=X.

I attach to this post a simple working example which displays the behavior
described above. To run, first run server.py and then run client.py. You
will see a little bit of output, the most important part being

===
Client received RemoteCache: id=45952496

Asking server to update
TD 45921680 (test.RemoteCache.add) accessed by <test.RemoteCache instance
at 2BD2DC8>: id=45952456
RemoteCache id=45952496
===

To understand the details of the output please see descriptor.py. The id of
the RemoteCache is first reported as 45952496 when the client receives it.
Then, when the descriptor is accessed, the id of the accessing instance is
reported as 45952456, which is different. Then, when in the last line we
print out the id of the RemoteCache we're back to 45952496.

Is there some reason that a RemoteCache's id can change during its life
time?

-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/a30c95f0/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: server.py
Type: text/x-python
Size: 442 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/a30c95f0/attachment.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: resources.py
Type: text/x-python
Size: 3455 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0001.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: client.py
Type: text/x-python
Size: 202 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0002.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: descriptor.py
Type: text/x-python
Size: 553 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0003.py>

From sank.daniel at gmail.com  Wed Apr 30 12:13:18 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 11:13:18 -0700
Subject: [Twisted-Python] problem with numpy and twisted xmlrpc
In-Reply-To: <5361376B.1010207@mail.com>
References: <5361376B.1010207@mail.com>
Message-ID: <CAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA@mail.gmail.com>

Nicola,

I don't know whether this makes sense in the context of xmlrpc, but perhaps
you can use numpy's tostring and fromstring functions. If you do this you
have to also send the datatype so that fromstring knows how to unpack
(that's the part where I'm not sure if this strategy is xmlrpc-ish).

-Daniel



On Wed, Apr 30, 2014 at 10:48 AM, Nicola Cesca <nicola.cesca at mail.com>wrote:

>  Hi all,
> I'm newbie. I got a lot of problem using xmlrpc and numpy
>
>  I'm using numpy to to some staff and then serve the results via a
> twisted/XMLRPC server. If the result is a numpy float 64, I get an
> exception cause probably twisted can't handle this type. Infact is I
> downgrade the result to float32 with x=float(x), everything is ok. This is
> not so good cause if I forget this workaroud somewhere, it's a pain. Have
> you any better solution?
>
> server:
>
> from twisted.web import xmlrpc, serverimport numpy as np
> class MioServer(xmlrpc.XMLRPC):
>     """
>     An example object to be published.
>     """
>
>     def xmlrpc_test_np(self):
>         return np.sqrt(2)
> if __name__ == '__main__':
>     from twisted.internet import reactor
>     r = MioServer()
>     reactor.listenTCP(7080, server.Site(r))
>     reactor.run()
>
> client:
>
> import xmlrpclib
> if __name__=='__main__':
>     x=xmlrpclib.ServerProxy('http://localhost:7080/')
>     print x.test_np()
>
> Exception:
>
> Traceback (most recent call last):
>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1446, in <module>
>     debugger.run(setup['file'], None, None)
>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1092, in run
>     pydev_imports.execfile(file, globals, locals) #execute the script
>   File "C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py", line 28, in <module>
>     print x.test_np()
>   File "C:\Python27\lib\xmlrpclib.py", line 1224, in __call__
>     return self.__send(self.__name, args)
>   File "C:\Python27\lib\xmlrpclib.py", line 1578, in __request
>     verbose=self.__verbose
>   File "C:\Python27\lib\xmlrpclib.py", line 1264, in request
>     return self.single_request(host, handler, request_body, verbose)
>   File "C:\Python27\lib\xmlrpclib.py", line 1297, in single_request
>     return self.parse_response(response)
>   File "C:\Python27\lib\xmlrpclib.py", line 1473, in parse_response
>     return u.close()
>   File "C:\Python27\lib\xmlrpclib.py", line 793, in close
>     raise Fault(**self._stack[0])
> xmlrpclib.Fault: <Fault 8002: "Can't serialize output: cannot marshal <type 'numpy.float64'> objects">
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/7c833b88/attachment.html>

From glyph at twistedmatrix.com  Wed Apr 30 12:56:48 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 30 Apr 2014 11:56:48 -0700
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
 <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>
Message-ID: <D2C6DAF1-E7B0-4DEE-9CED-99758536D2A5@twistedmatrix.com>


On Apr 30, 2014, at 9:53 AM, Kevin Horn <kevin.horn at gmail.com> wrote:

> On Wed, Apr 30, 2014 at 9:14 AM, <exarkun at twistedmatrix.com> wrote:
> On 01:42 pm, dstainton415 at gmail.com wrote:
> Greetings,
> 
> 
> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
> 
> Note that's a random version of the documentation from who knows how long ago.  If you want a random version of the documentation then I suggest using http://twisted.readthedocs.org/en/latest/ instead.
> 
> 
> Probably from 2011 or so... yup, looks like end of 2011.
> 
> Now that the Sphinx transition has actually happened, I suppose I should probably take that down and perhaps replace it with a pointer to the RTD version.

Yes, that would be good.

Speaking of which, does anyone know how to get the default RTD version to point to an actual release?  Since 14.0 is imminent we should probably turn the appropriate knob there.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/9ef356a9/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/9ef356a9/attachment-0001.bin>

From donald at stufft.io  Wed Apr 30 13:09:16 2014
From: donald at stufft.io (Donald Stufft)
Date: Wed, 30 Apr 2014 15:09:16 -0400
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <D2C6DAF1-E7B0-4DEE-9CED-99758536D2A5@twistedmatrix.com>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
 <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>
 <D2C6DAF1-E7B0-4DEE-9CED-99758536D2A5@twistedmatrix.com>
Message-ID: <74CA910F-B09C-4017-A7C3-A1FF4729B946@stufft.io>


On Apr 30, 2014, at 2:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> 
> On Apr 30, 2014, at 9:53 AM, Kevin Horn <kevin.horn at gmail.com> wrote:
> 
>> On Wed, Apr 30, 2014 at 9:14 AM, <exarkun at twistedmatrix.com> wrote:
>> On 01:42 pm, dstainton415 at gmail.com wrote:
>> Greetings,
>> 
>> 
>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>> 
>> Note that's a random version of the documentation from who knows how long ago.  If you want a random version of the documentation then I suggest using http://twisted.readthedocs.org/en/latest/ instead.
>> 
>> 
>> Probably from 2011 or so... yup, looks like end of 2011.
>> 
>> Now that the Sphinx transition has actually happened, I suppose I should probably take that down and perhaps replace it with a pointer to the RTD version.
> 
> Yes, that would be good.
> 
> Speaking of which, does anyone know how to get the default RTD version to point to an actual release?  Since 14.0 is imminent we should probably turn the appropriate knob there.
> 
> -glyph
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

There is a drop down for default release in the RTD admin panel.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/34219e43/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/34219e43/attachment.pgp>

From thostrup at gmail.com  Wed Apr 30 15:16:23 2014
From: thostrup at gmail.com (Henrik Thostrup Jensen)
Date: Wed, 30 Apr 2014 23:16:23 +0200
Subject: [Twisted-Python] Fwd: Trouble with session id reuse/disabling
 with twisted TLS
In-Reply-To: <53613233.2080908@imperial.ac.uk>
References: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
 <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>
 <53613233.2080908@imperial.ac.uk>
Message-ID: <CADB1_gTjWxoEvxYu-ZfMOjFGnDZneq9+aE=TbAjMZrhjLNYE1g@mail.gmail.com>

Hi

On 30 April 2014 19:26, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
>
> https://twistedmatrix.com/documents/12.0.0/core/howto/ssl.html#auto2
>
> ...seems to work fine for me on both Twisted 12.1.0 / pyOpenSSL 0.13.1 and
> Twisted 13.2.0 / pyOpenSSL 0.14. I'm testing using:
>
> openssl s_client -connect host:port -reconnect
>
> ...and seeing:
>
> drop connection and then reconnect
> CONNECTED(00000003)
> ---
> Reused, TLSv1/SSLv3, Cipher is AES256-GCM-SHA384
>
> ^^^^^^ looks ok.
>
> What do you see if you use that openssl command to test?

...
drop connection and then reconnect
CONNECTED(00000003)
3074107592:error:1409E0E5:SSL routines:SSL3_WRITE_BYTES:ssl handshake
failure:s3_pkt.c:596:

Same error mesage on the service side.

However, someone pointed me to this:

https://stackoverflow.com/questions/22378442/how-to-disable-session-resumption-in-pyopenssl

Adding in:
ctx.set_options(OP_NO_TICKET)
Fixes the issue (well, the client no longer attemps to reuse the session).
Since there is absolutely nothing performance sensitive about this,
that is good enough for me.

> Can you reduce it to a sscce with a fake self-signed cert?

Might try tomorrow.


-- 
   - Henrik


From sank.daniel at gmail.com  Wed Apr 30 16:40:26 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 15:40:26 -0700
Subject: [Twisted-Python] problem with numpy and twisted xmlrpc
In-Reply-To: <CAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA@mail.gmail.com>
References: <5361376B.1010207@mail.com>
 <CAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA@mail.gmail.com>
Message-ID: <CAKN9TDJ71LA2EFugAGt9vuhyX=QHmJ=DFyFWs=8Y97+hu3e3Uw@mail.gmail.com>

Nicola,

Since you responded to my last message directly rather than to the list, I
am putting our conversation here for clarity. Please respond to the list
rather than to single users.

>>> I don't know whether this makes sense in the context of xmlrpc, but
perhaps
>>> you can use numpy's tostring and fromstring functions.
>>>

>> I dont know what is from/tostring. But this is another workaround that
add a
>> bug source. Infact it's probably that I'll forget some conversion
somewhere and
>> this will cause a time-expensive task searching where is the problem.
I'd like
>> to make twisted xmlrpc compatible with numpy without converting back and
forth
>> the data.
>> Thankyou
>>

> I get an exception cause probably twisted can't handle this type.

This is not a twisted problem. If you read the error message you put in
your original email you'll see near the end that it says

File "C:\Python27\lib\xmlrpclib.py", line 793, in close raise
Fault(**self._stack[0]) xmlrpclib.Fault: <Fault 8002: "Can't serialize
output: cannot marshal <type 'numpy.float64'> objects">

So you can see that the error is in xmlrpclib, and that the problem is that
marshal does not support numpy arrays.

> I dont know what is from/tostring.

Ok, are you only interested in solutions that use functions you already
know about?

I was going to explain how to deal with this, but since I see you posted an
identical question on stackoverflow I guess I'll go answer it there (since
this isn't a twisted problem after all).

Daniel

On Wed, Apr 30, 2014 at 11:13 AM, Daniel Sank <sank.daniel at gmail.com> wrote:

> Nicola,
>
> I don't know whether this makes sense in the context of xmlrpc, but
> perhaps you can use numpy's tostring and fromstring functions. If you do
> this you have to also send the datatype so that fromstring knows how to
> unpack (that's the part where I'm not sure if this strategy is xmlrpc-ish).
>
> -Daniel
>
>
>
> On Wed, Apr 30, 2014 at 10:48 AM, Nicola Cesca <nicola.cesca at mail.com>wrote:
>
>>  Hi all,
>> I'm newbie. I got a lot of problem using xmlrpc and numpy
>>
>>  I'm using numpy to to some staff and then serve the results via a
>> twisted/XMLRPC server. If the result is a numpy float 64, I get an
>> exception cause probably twisted can't handle this type. Infact is I
>> downgrade the result to float32 with x=float(x), everything is ok. This is
>> not so good cause if I forget this workaroud somewhere, it's a pain. Have
>> you any better solution?
>>
>> server:
>>
>> from twisted.web import xmlrpc, serverimport numpy as np
>> class MioServer(xmlrpc.XMLRPC):
>>     """
>>     An example object to be published.
>>     """
>>
>>     def xmlrpc_test_np(self):
>>         return np.sqrt(2)
>> if __name__ == '__main__':
>>     from twisted.internet import reactor
>>     r = MioServer()
>>     reactor.listenTCP(7080, server.Site(r))
>>     reactor.run()
>>
>> client:
>>
>> import xmlrpclib
>> if __name__=='__main__':
>>     x=xmlrpclib.ServerProxy('http://localhost:7080/')
>>     print x.test_np()
>>
>> Exception:
>>
>> Traceback (most recent call last):
>>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1446, in <module>
>>     debugger.run(setup['file'], None, None)
>>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1092, in run
>>     pydev_imports.execfile(file, globals, locals) #execute the script
>>   File "C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py", line 28, in <module>
>>     print x.test_np()
>>   File "C:\Python27\lib\xmlrpclib.py", line 1224, in __call__
>>     return self.__send(self.__name, args)
>>   File "C:\Python27\lib\xmlrpclib.py", line 1578, in __request
>>     verbose=self.__verbose
>>   File "C:\Python27\lib\xmlrpclib.py", line 1264, in request
>>     return self.single_request(host, handler, request_body, verbose)
>>   File "C:\Python27\lib\xmlrpclib.py", line 1297, in single_request
>>     return self.parse_response(response)
>>   File "C:\Python27\lib\xmlrpclib.py", line 1473, in parse_response
>>     return u.close()
>>   File "C:\Python27\lib\xmlrpclib.py", line 793, in close
>>     raise Fault(**self._stack[0])
>> xmlrpclib.Fault: <Fault 8002: "Can't serialize output: cannot marshal <type 'numpy.float64'> objects">
>>
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
> --
> Daniel Sank
> Department of Physics
> Broida Hall
> University of California
> Santa Barbara, CA 93117
> (805)893-3899
>



-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/974579ae/attachment-0001.html>

From sank.daniel at gmail.com  Wed Apr 30 21:09:32 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 20:09:32 -0700
Subject: [Twisted-Python] pb objects unexpectedly change identity
In-Reply-To: <CAKN9TD+BDk_00uNfw=PecB3PLN6bS7UcvqotBP6qxp0cMbHavA@mail.gmail.com>
References: <CAKN9TD+BDk_00uNfw=PecB3PLN6bS7UcvqotBP6qxp0cMbHavA@mail.gmail.com>
Message-ID: <CAKN9TDJ02ayP-XsxTfyeU5ONn8tFFyHHT1RRyDdD=-FN8G2fqQ@mail.gmail.com>

Dear Twisted users,

To my amazement I have reproduced this strange behaviour in an even simpler
program. Attached are a pb client/server which illustrate unexpected
behaviour of the id of a pb.RemoteCache. To run the example, run server.py
and then client.py (with resources.py in the same working directory).

You will see output like this (line numbers added by me)

====
1. RemoteCache 29403544 initialized
2. Client received RemoteCache: id=29403544
3. RemoteCache: while responding to observe_add I think my id is 29403760
4. Client: The RemoteCache's ide is 29403544
...
====

1. When the RemoteCache is initialized it thinks its id is 29403544.
2. The client agrees that it has received a RemoteCache with id 29403544.
3. When the RemoteCache is inside observe_add it thinks its id is 29403760.
4. The client still thinks the RemoteCache's id is 29403544.

If you let the program run it will continue to loop between the RemoteCache
reporting its id while in observe_add, and the client reporting the id of
the RemoteCache. The two reported ids are always the same unequal numbers.

The question appears to be "Why does the id reported by a RemoteCache's
while inside an observe_* method differ the id reported by objects owning
references to that RemoteCache?"

Thank you for your time,
Daniel




On Wed, Apr 30, 2014 at 11:00 AM, Daniel Sank <sank.daniel at gmail.com> wrote:

> Dear twisted users,
>
> I think I have found some surprising behavior in perspective broker. I
> define a subclass of pb.RemoteCache which has a method managed by a
> descriptor. The descriptor keeps track of the instances it manages in a set.
>
> When the RemoteCache is first received by the client, it accesses the
> descriptor-ified method inside setCopyableState. At that time the
> RemoteCache's id is a certain value X. Then later when the RemoteCache is
> notified of a change by the server side Cacheable, it again accesses the
> descriptor-ified method, but at this time it's id is Y, and Y!=X.
>
> I attach to this post a simple working example which displays the behavior
> described above. To run, first run server.py and then run client.py. You
> will see a little bit of output, the most important part being
>
> ===
> Client received RemoteCache: id=45952496
>
> Asking server to update
> TD 45921680 (test.RemoteCache.add) accessed by <test.RemoteCache instance
> at 2BD2DC8>: id=45952456
> RemoteCache id=45952496
> ===
>
> To understand the details of the output please see descriptor.py. The id
> of the RemoteCache is first reported as 45952496 when the client receives
> it. Then, when the descriptor is accessed, the id of the accessing instance
> is reported as 45952456, which is different. Then, when in the last line we
> print out the id of the RemoteCache we're back to 45952496.
>
> Is there some reason that a RemoteCache's id can change during its life
> time?
>
> --
> Daniel Sank
> Department of Physics
> Broida Hall
> University of California
> Santa Barbara, CA 93117
> (805)893-3899
>



-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/e55ac54b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: client.py
Type: text/x-python
Size: 190 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/e55ac54b/attachment.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: resources.py
Type: text/x-python
Size: 2994 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/e55ac54b/attachment-0001.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: server.py
Type: text/x-python
Size: 428 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20140430/e55ac54b/attachment-0002.py>

From glyph at twistedmatrix.com  Tue Apr  1 01:21:22 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 1 Apr 2014 00:21:22 -0700
Subject: [Twisted-Python] enabling spam filtering on trac
Message-ID: <2177E033-7CB8-46A8-AC87-7E0F56A8EEE5@twistedmatrix.com>

Hi all,

We've been having a spate of spammy comments on twistedmatrix.com lately.

To my pleasant surprise I discovered that someone had installed, and even configured, a spam filtering plugin, but it was configured to do absolutely nothing.

I think I've got it set up right now, but the UI to do so is a bit confusing (there are point values for things and it's not clear how scoring works); if anyone gets a comment rejected for spamming, I'd like to know about it so I can adjust things.

Thanks,

-glyph

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140401/0e58e4f2/attachment-0002.bin>

From glyph at twistedmatrix.com  Tue Apr  1 02:56:37 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 1 Apr 2014 01:56:37 -0700
Subject: [Twisted-Python] Using  cred,
	how to prevent the user repeat-login?
In-Reply-To: <2014040109441449639711@gmail.com>
References: <2014040109441449639711@gmail.com>
Message-ID: <F0F3A4F1-86EA-413E-85E0-7C8E0B423FB0@twistedmatrix.com>


On Mar 31, 2014, at 6:45 PM, yangyouxiu <yangyouxiu at gmail.com> wrote:

> In my Client-Server Application,I do not want two user login with the same login name.
>  
> For example, user1 logined with name "test1",then user2 try to login with "test1" too, the login of user2 should be denied. At now, my code could not achieve this goal,so what's the method.
> Thanks all!

This is more of a basic Python programming question than a Twisted question; however, I'm sure you'd find some people willing to help, except...:

> The following is server code:

When I run this code, nothing happens.  Which is not surprising, because it simply defines some classes.

Please consider attaching a http://www.sscce.org/ so that those of us who might help you out can start from a position where your whole program is working rather than having to guess about what the rest of your code looks like.

Thanks!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140401/de3cb9af/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140401/de3cb9af/attachment-0002.bin>

From dustin at v.igoro.us  Tue Apr  1 07:03:54 2014
From: dustin at v.igoro.us (Dustin J. Mitchell)
Date: Tue, 1 Apr 2014 09:03:54 -0400
Subject: [Twisted-Python] enabling spam filtering on trac
In-Reply-To: <2177E033-7CB8-46A8-AC87-7E0F56A8EEE5@twistedmatrix.com>
References: <2177E033-7CB8-46A8-AC87-7E0F56A8EEE5@twistedmatrix.com>
Message-ID: <CAJtE5vTW+45+1-EctYsuCYaE+0pW2aPqMiiLdiL=BueaAh8U5Q@mail.gmail.com>

Good luck :(

Buildbot's been having a heck of a time keeping spam at bay while not
preventing legitimate posts.  We're hoping to upgrade to Trac-1.0
which promises to be all roses and sunshine.. we'll see.

Dustin



From yangyouxiu at gmail.com  Tue Apr  1 19:26:36 2014
From: yangyouxiu at gmail.com (yangyouxiu)
Date: Wed, 2 Apr 2014 09:26:36 +0800
Subject: [Twisted-Python] =?gb2312?b?u9i4tDogUmU6ICBVc2luZyAgY3JlZCwgaG93?=
	=?gb2312?b?IHRvIHByZXZlbnQgdGhlIHVzZXIgcmVwZWF0LWxvZ2luPw==?=
References: <2014040109441449639711@gmail.com>, 
 <F0F3A4F1-86EA-413E-85E0-7C8E0B423FB0@twistedmatrix.com>
Message-ID: <201404020918187346013@gmail.com>

Thank you very much.
I'll study sscce.
And i have figure out my problem by change my logic process,^_^.
发件人： Glyph
发送时间： 2014-04-01 16:56
收件人： Twisted general discussion
主题： Re: [Twisted-Python] Using cred, how to prevent the user repeat-login?


On Mar 31, 2014, at 6:45 PM, yangyouxiu <yangyouxiu at gmail.com> wrote:


In my Client-Server Application,I do not want two user login with the same login name.

For example, user1 logined with name "test1",then user2 try to login with "test1" too, the login of user2 should be denied. At now, my code could not achieve this goal,so what's the method.
Thanks all!


This is more of a basic Python programming question than a Twisted question; however, I'm sure you'd find some people willing to help, except...:


The following is server code:


When I run this code, nothing happens.  Which is not surprising, because it simply defines some classes.


Please consider attaching a http://www.sscce.org/ so that those of us who might help you out can start from a position where your whole program is working rather than having to guess about what the rest of your code looks like.


Thanks!


-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140402/bc6ecb79/attachment-0002.html>

From grigorescu_ciprian at yahoo.com  Wed Apr  2 10:03:58 2014
From: grigorescu_ciprian at yahoo.com (Grigorescu Ciprian)
Date: Wed, 2 Apr 2014 09:03:58 -0700 (PDT)
Subject: [Twisted-Python] Using twisted for a smtp dialog
Message-ID: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>

Hello,

I am new in twisted world and I am struggle to understand it.
I am trying to create a smtp connection and initiate a smtp dialog: helo, mail from, rcpt, for a list of address, and catch the answer from the smtp server

Can anyone point me the right direction, where to start?

Thanks a lot,
Grig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140402/8870731d/attachment-0002.html>

From kebin70 at gmail.com  Wed Apr  2 10:37:29 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Wed, 2 Apr 2014 09:37:29 -0700
Subject: [Twisted-Python] Using twisted for a smtp dialog
In-Reply-To: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>
References: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>
Message-ID: <CAA-sNEYm0uaoOQh0yZqPGRcMYnP=vN0a=LdvuNukv6TSNV0C+Q@mail.gmail.com>

I've been working a lot with smtp and twisted is great for easily doing
what you're describing.

Have a look at the smtpclient docs...that should get you most of the way
there.

http://twistedmatrix.com/documents/current/mail/tutorial/smtpclient/smtpclient.html


On Wed, Apr 2, 2014 at 9:03 AM, Grigorescu Ciprian <
grigorescu_ciprian at yahoo.com> wrote:

> Hello,
>
> I am new in twisted world and I am struggle to understand it.
> I am trying to create a smtp connection and initiate a smtp dialog: helo,
> mail from, rcpt, for a list of address, and catch the answer from the smtp
> server
>
> Can anyone point me the right direction, where to start?
>
> Thanks a lot,
> Grig
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140402/1cf167e2/attachment-0002.html>

From grigorescu_ciprian at yahoo.com  Wed Apr  2 10:49:00 2014
From: grigorescu_ciprian at yahoo.com (Grigorescu Ciprian)
Date: Wed, 2 Apr 2014 09:49:00 -0700 (PDT)
Subject: [Twisted-Python] Using twisted for a smtp dialog
In-Reply-To: <CAA-sNEYm0uaoOQh0yZqPGRcMYnP=vN0a=LdvuNukv6TSNV0C+Q@mail.gmail.com>
References: <1396454638.98791.YahooMailNeo@web141703.mail.bf1.yahoo.com>
 <CAA-sNEYm0uaoOQh0yZqPGRcMYnP=vN0a=LdvuNukv6TSNV0C+Q@mail.gmail.com>
Message-ID: <1396457340.703.YahooMailNeo@web141702.mail.bf1.yahoo.com>

Hi,

I have seen that example and I have read the docs(what I found about it) but I am still confused.
Is not so easy :)


On Wednesday, April 2, 2014 7:37 PM, Kevin Mcintyre <kebin70 at gmail.com> wrote:
 
I've been working a lot with smtp and twisted is great for easily doing what you're describing.  

Have a look at the smtpclient docs...that should get you most of the way there.  


http://twistedmatrix.com/documents/current/mail/tutorial/smtpclient/smtpclient.html




On Wed, Apr 2, 2014 at 9:03 AM, Grigorescu Ciprian <grigorescu_ciprian at yahoo.com> wrote:

Hello,
>
>I am new in twisted world and I am struggle to understand it.
>I am trying to create a smtp connection and initiate a smtp dialog: helo, mail from, rcpt, for a list of address, and catch the answer from the smtp server
>
>Can anyone point me the right direction, where to start?
>
>Thanks a lot,
>Grig
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140402/a75a0f53/attachment-0002.html>

From adi at roiban.ro  Thu Apr  3 02:13:04 2014
From: adi at roiban.ro (Adi Roiban)
Date: Thu, 3 Apr 2014 11:13:04 +0300
Subject: [Twisted-Python] IFinishableConsumer in
	twisted.protocols.ftp.IFinishableConsumer
Message-ID: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>

Hi,

Reading the producer/consumer docs I first found out that

IFinishableConsumer api link is broken (link to twisted.internet.interfaces):
http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7

Then I found out that IFinishableConsumer is defined in
twisted.protocols.ftp.IFinishableConsumer

I was expecting to see the interface defined in twisted.internet.interfaces .

Should the broken link be fixed or interfaced moved ?

I think that moving the interface should be safe, as old imports will
still work.

Thanks!
-- 
Adi Roiban



From glyph at twistedmatrix.com  Thu Apr  3 03:59:36 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 3 Apr 2014 02:59:36 -0700
Subject: [Twisted-Python] IFinishableConsumer in
	twisted.protocols.ftp.IFinishableConsumer
In-Reply-To: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>
References: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>
Message-ID: <A1A416A8-4553-4200-ACCA-B85D423F4B5D@twistedmatrix.com>

On Apr 3, 2014, at 1:13 AM, Adi Roiban <adi at roiban.ro> wrote:

> Hi,
> 
> Reading the producer/consumer docs I first found out that
> 
> IFinishableConsumer api link is broken (link to twisted.internet.interfaces):
> http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7
> 
> Then I found out that IFinishableConsumer is defined in
> twisted.protocols.ftp.IFinishableConsumer
> 
> I was expecting to see the interface defined in twisted.internet.interfaces .
> 
> Should the broken link be fixed or interfaced moved ?
> 
> I think that moving the interface should be safe, as old imports will
> still work.

Given that:

  1. this interface has apparently worked this way for a long time,
  2. work to overhaul these interfaces is ongoing in the 'tubes' branch 
  3. apparently nobody was using that method anyway since this is the first complaint I'm aware of

I think the docs should be changed to reflect reality rather than the other way around.  We can just remove the mention of IFinishableConsumer and document that in FTP.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140403/fb133c4c/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140403/fb133c4c/attachment-0002.bin>

From exarkun at twistedmatrix.com  Thu Apr  3 05:29:47 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 03 Apr 2014 11:29:47 -0000
Subject: [Twisted-Python] IFinishableConsumer in
 twisted.protocols.ftp.IFinishableConsumer
In-Reply-To: <A1A416A8-4553-4200-ACCA-B85D423F4B5D@twistedmatrix.com>
References: <CAFycZ9fj7bGdSMAmQd6J1+1sS5hJ2sb9NNEE2pGGisSEhxbVcw@mail.gmail.com>
 <A1A416A8-4553-4200-ACCA-B85D423F4B5D@twistedmatrix.com>
Message-ID: <20140403112947.6123.866718740.divmod.xquotient.52@top>

On 09:59 am, glyph at twistedmatrix.com wrote:
>On Apr 3, 2014, at 1:13 AM, Adi Roiban <adi at roiban.ro> wrote:
>>Hi,
>>
>>Reading the producer/consumer docs I first found out that
>>
>>IFinishableConsumer api link is broken (link to 
>>twisted.internet.interfaces):
>>http://twistedmatrix.com/documents/current/core/howto/producers.html#auto7
>>
>>Then I found out that IFinishableConsumer is defined in
>>twisted.protocols.ftp.IFinishableConsumer
>>
>>I was expecting to see the interface defined in 
>>twisted.internet.interfaces .
>>
>>Should the broken link be fixed or interfaced moved ?
>>
>>I think that moving the interface should be safe, as old imports will
>>still work.
>
>Given that:
>
>  1. this interface has apparently worked this way for a long time,
>  2. work to overhaul these interfaces is ongoing in the 'tubes' branch
>  3. apparently nobody was using that method anyway since this is the 
>first complaint I'm aware of

Furthermore, if you inspect the history of this interface, it *was* part 
of twisted.internet.interfaces.  It was moved to twisted.protocols.ftp 
to reflect the fact that it is not a good interface in general and only 
ftp-related uses of it should persist (and those only because ftp was 
already using it and it was more trouble than someone felt like going to 
to remove ftp's use of it altogether).

I am looking forward to the day when tubes will let us eliminate this 
interface entirely.

See https://tm.tl/4580 and https://tm.tl/5942 for the history.

Jean-Paul



From croepha at gmail.com  Thu Apr  3 10:36:09 2014
From: croepha at gmail.com (Croepha)
Date: Thu, 3 Apr 2014 11:36:09 -0500
Subject: [Twisted-Python] inlineCallbacks + raise exception behavior is
	different than deferred.errback
Message-ID: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>

Hello:

Please refer to the following script:

import sys
import twisted.internet.defer
import twisted.internet.reactor
import twisted.python.log

print "Twisted version", twisted.version
print "Python version", sys.version

class ExceptionToRaise(Exception):
pass

exception_to_raise = ExceptionToRaise()

@twisted.internet.defer.inlineCallbacks
def icb_error_maker():
"""
Raises an exception implemented as an inline inlineCallbacks
"""
raise exception_to_raise

def pod_error_maker():
"""
Raises an exception implemented as a plain old deferred
"""
deferred = twisted.internet.defer.Deferred()
deferred.errback(exception_to_raise)
return deferred

#ERROR_MAKER_TO_USE = icb_error_maker
ERROR_MAKER_TO_USE = pod_error_maker

@twisted.internet.defer.inlineCallbacks
def intermediate_function3():
 print 'intermediate_function3 1'
try:
 yield ERROR_MAKER_TO_USE()
 except BaseException as exception:
print 'intermediate_function3 exception', repr(exception)
raise
 print 'intermediate_function3 2'


@twisted.internet.defer.inlineCallbacks
def intermediate_function2():
 print 'intermediate_function2 1'
try:
 yield intermediate_function3()
 except BaseException as exception:
print 'intermediate_function2 exception', repr(exception)
raise
 print 'intermediate_function2 2'


@twisted.internet.defer.inlineCallbacks
def intermediate_function1():
 print 'intermediate_function1 1'
try:
 yield intermediate_function2()
 except BaseException as exception:
print 'intermediate_function1 exception', repr(exception)
raise
 print 'intermediate_function1 2'

def run():
d = intermediate_function1()
d.addErrback(twisted.python.log.err)
d.addBoth(lambda n: twisted.internet.reactor.stop())
twisted.internet.reactor.callWhenRunning(run)
twisted.internet.reactor.run()


When ERROR_MAKER_TO_USE = icb_error_maker The output is as follows:

Twisted version [twisted, version 13.2.0]
Python version 2.7.3 (default, Feb 27 2014, 20:00:17)
[GCC 4.6.3]
intermediate_function1 1
intermediate_function2 1
intermediate_function3 1
intermediate_function3 exception ExceptionToRaise()
intermediate_function2 exception ExceptionToRaise()
intermediate_function1 exception ExceptionToRaise()
Unhandled Error
Traceback (most recent call last):
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1237, in unwindGenerator
    return _inlineCallbacks(None, gen, Deferred())
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1099, in _inlineCallbacks
    result = g.send(result)
  File "icb_error_test1.py", line 52, in intermediate_function2
    yield intermediate_function3()
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1237, in unwindGenerator
    return _inlineCallbacks(None, gen, Deferred())
--- <exception caught here> ---
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1099, in _inlineCallbacks
    result = g.send(result)
  File "icb_error_test1.py", line 37, in intermediate_function3
    yield ERROR_MAKER_TO_USE()
  File
"/home/daveb/bzr_repo/player_rm2/test2/local/lib/python2.7/site-packages/twisted/internet/defer.py",
line 1228, in unwindGenerator
    gen = f(*args, **kwargs)
  File "icb_error_test1.py", line 19, in icb_error_maker
    raise exception_to_raise
__main__.ExceptionToRaise:

However when ERROR_MAKER_TO_USE = pod_error_maker The output is as follows:

Twisted version [twisted, version 13.2.0]
Python version 2.7.3 (default, Feb 27 2014, 20:00:17)
[GCC 4.6.3]
intermediate_function1 1
intermediate_function2 1
intermediate_function3 1
intermediate_function3 exception ExceptionToRaise()
intermediate_function2 exception ExceptionToRaise()
intermediate_function1 exception ExceptionToRaise()
Unhandled Error
Traceback (most recent call last):
Failure: __main__.ExceptionToRaise:

Questions:

1. Why is it that icb_error_maker raises an exception that retains its
traceback while pod_error_maker does not?
2. How might one retain the inlineCallback trace when handling
Exceptions/Failures from deferreds? (I would prefer a universal method, ie
not doing a Try/Reraise at every yield point) ?
3. I have taken a look at the code in twisted/internet/defer.py and I am
not sure where the distinction between inlineCallback exceptions and
deferred errors are being made.  Would someone please elaborate on this
process.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140403/3bc10f7b/attachment-0002.html>

From exarkun at twistedmatrix.com  Thu Apr  3 10:54:15 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 03 Apr 2014 16:54:15 -0000
Subject: [Twisted-Python] inlineCallbacks + raise exception behavior is
 different than deferred.errback
In-Reply-To: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>
References: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>
Message-ID: <20140403165415.6123.216175657.divmod.xquotient.54@top>

On 04:36 pm, croepha at gmail.com wrote:
>Hello:

Hi,

I don't know about anyone else but in my email client all of the 
indentation in this example has been destroyed making it impractical to 
try to understand the specifics of your question.

I can at least say that yes, traceback mangling by inlineCallbacks is a 
known issue.

Jean-Paul



From croepha at gmail.com  Thu Apr  3 11:30:02 2014
From: croepha at gmail.com (Croepha)
Date: Thu, 3 Apr 2014 12:30:02 -0500
Subject: [Twisted-Python] inlineCallbacks + raise exception behavior is
 different than deferred.errback
In-Reply-To: <20140403165415.6123.216175657.divmod.xquotient.54@top>
References: <CANm61jc=ndhg8iVDtKn5KyJA5k5jYoTk5VxoGaxcbbepcXyqmQ@mail.gmail.com>
 <20140403165415.6123.216175657.divmod.xquotient.54@top>
Message-ID: <CANm61jfW+_v6LaRe9pUhgGHUQeH0jFua5QdkdP_Y8+SqHOezjQ@mail.gmail.com>

Apologies, here is the example, pasted on pound-python

http://paste.pound-python.org/show/t4MsnEHFYAQrJ0pv6gsY/


On Thu, Apr 3, 2014 at 11:54 AM, <exarkun at twistedmatrix.com> wrote:

> On 04:36 pm, croepha at gmail.com wrote:
>
>> Hello:
>>
>
> Hi,
>
> I don't know about anyone else but in my email client all of the
> indentation in this example has been destroyed making it impractical to try
> to understand the specifics of your question.
>
> I can at least say that yes, traceback mangling by inlineCallbacks is a
> known issue.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140403/b9098048/attachment-0002.html>

From trac at twistedmatrix.com  Sun Apr  6 00:05:15 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 06 Apr 2014 06:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1396764315.66.2026009551659536648@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140406/6d9ba8c2/attachment-0002.html>

From alex.gaynor at gmail.com  Mon Apr  7 17:44:25 2014
From: alex.gaynor at gmail.com (Alex Gaynor)
Date: Mon, 7 Apr 2014 23:44:25 +0000 (UTC)
Subject: [Twisted-Python] Security Advisory: OpenSSL 1.0.1g
Message-ID: <loom.20140408T014312-935@post.gmane.org>

Today a `security release of OpenSSL`_ was issued, fixing a critical
vulnerability. This vulnerability allows a malicious client or server to read
up to 64KB of memory out of the remote machine, potentially compromising any
secrets within the process, including things like TLS private certificates.

This issue does not affect Twisted directly, but will affect many users of
Twisted.

Any machine which is serving traffic over TLS, or which is making outgoing TLS
connections should upgrade it's version of OpenSSL immediately.

This issue has been assigned CVE-2014-0160.

A `complete description of the bug is also available`_.

New packages have been issued for the following operating systems:

* `Debian`_
* `Ubuntu`_

.. _`security release of OpenSSL`:
    https://www.openssl.org/news/secadv_20140407.txt
.. _`complete description of the bug is also available`: http://heartbleed.com
.. _`Debian`: https://www.debian.org/security/2014/dsa-2896
.. _`Ubuntu`: http://www.ubuntu.com/usn/usn-2165-1/




From tobias.oberstein at tavendo.de  Tue Apr  8 03:40:57 2014
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Tue, 8 Apr 2014 02:40:57 -0700
Subject: [Twisted-Python] Security Advisory: OpenSSL 1.0.1g
In-Reply-To: <loom.20140408T014312-935@post.gmane.org>
References: <loom.20140408T014312-935@post.gmane.org>
Message-ID: <634914A010D0B943A035D226786325D444751FEA44@EXVMBX020-12.exch020.serverdata.net>

> Any machine which is serving traffic over TLS, or which is making outgoing TLS
> connections should upgrade it's version of OpenSSL immediately.
> 
> This issue has been assigned CVE-2014-0160.

Thanks for bringing this to attention!

Here is a test tool that checks for the vuln.

https://github.com/titanous/heartbleeder

I could see it work on at least 1 machine: before upgrade it detected the vuln., after upgrade, clean.

/Tobias



From kebin70 at gmail.com  Tue Apr  8 13:34:00 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Tue, 8 Apr 2014 12:34:00 -0700
Subject: [Twisted-Python] XMLString clarification
Message-ID: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>

I'm still having trouble getting my multipart text/html from an email into
XMLString.

I run the html through beautifulsoup then remove the doctype, but if
there's anything at all off about the resulting xml it still craps out.  Is
there anyway to stick an arbitrary string into a template?  Or should I add
a callback to flatten and add the placeholder in the flatten stage and
replace the placeholder with the actually html.

Any guidance appreciated,
Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140408/9e32c768/attachment-0002.html>

From werner at thieprojects.ch  Tue Apr  8 17:19:42 2014
From: werner at thieprojects.ch (Werner Thie)
Date: Tue, 08 Apr 2014 13:19:42 -1000
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
Message-ID: <5344840E.6060109@thieprojects.ch>

Hi Kevin

On 4/8/14 9:34 AM, Kevin Mcintyre wrote:
> I'm still having trouble getting my multipart text/html from an email
> into XMLString.
>
> I run the html through beautifulsoup then remove the doctype, but if
> there's anything at all off about the resulting xml it still craps out.

How? Traceback?

> Is there anyway to stick an arbitrary string into a template?  Or should
> I add a callback to flatten and add the placeholder in the flatten stage
> and replace the placeholder with the actually html.

Werner




From kebin70 at gmail.com  Tue Apr  8 17:38:09 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Tue, 8 Apr 2014 16:38:09 -0700
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <5344840E.6060109@thieprojects.ch>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
 <5344840E.6060109@thieprojects.ch>
Message-ID: <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>

I've opted for placeholder and added callback to flatten.

I'm a hack, and it was holding up delivery of email.


On Tue, Apr 8, 2014 at 4:19 PM, Werner Thie <werner at thieprojects.ch> wrote:

> Hi Kevin
>
>
> On 4/8/14 9:34 AM, Kevin Mcintyre wrote:
>
>> I'm still having trouble getting my multipart text/html from an email
>> into XMLString.
>>
>> I run the html through beautifulsoup then remove the doctype, but if
>> there's anything at all off about the resulting xml it still craps out.
>>
>
> How? Traceback?
>
>
>  Is there anyway to stick an arbitrary string into a template?  Or should
>> I add a callback to flatten and add the placeholder in the flatten stage
>> and replace the placeholder with the actually html.
>>
>
> Werner
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140408/1c477889/attachment-0002.html>

From kebin70 at gmail.com  Tue Apr  8 17:39:46 2014
From: kebin70 at gmail.com (Kevin Mcintyre)
Date: Tue, 8 Apr 2014 16:39:46 -0700
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
 <5344840E.6060109@thieprojects.ch>
 <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
Message-ID: <CAA-sNEak=zf73d147n_JBDtd4SVJF-D0qQ9QcucTbcogt4c_8w@mail.gmail.com>

I will try to get a test class together to demonstrate.


On Tue, Apr 8, 2014 at 4:38 PM, Kevin Mcintyre <kebin70 at gmail.com> wrote:

> I've opted for placeholder and added callback to flatten.
>
> I'm a hack, and it was holding up delivery of email.
>
>
> On Tue, Apr 8, 2014 at 4:19 PM, Werner Thie <werner at thieprojects.ch>wrote:
>
>> Hi Kevin
>>
>>
>> On 4/8/14 9:34 AM, Kevin Mcintyre wrote:
>>
>>> I'm still having trouble getting my multipart text/html from an email
>>> into XMLString.
>>>
>>> I run the html through beautifulsoup then remove the doctype, but if
>>> there's anything at all off about the resulting xml it still craps out.
>>>
>>
>> How? Traceback?
>>
>>
>>  Is there anyway to stick an arbitrary string into a template?  Or should
>>> I add a callback to flatten and add the placeholder in the flatten stage
>>> and replace the placeholder with the actually html.
>>>
>>
>> Werner
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140408/705ef56b/attachment-0002.html>

From hawkowl at atleastfornow.net  Wed Apr  9 01:34:53 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Wed, 9 Apr 2014 15:34:53 +0800
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
Message-ID: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>

Just in time for PyCon, the second prerelease is hot off the presses.

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre2>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre2/NEWS.txt>.

Changes from the previous prerelease include:

	- Dropping support for Windows XP, due to XP being EOL.

	- Dropping support for PyOpenSSL older than 0.10.

	- Support for TLS Service Identity, in conjunction with the service_identity library on PyPI. 

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we’re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140409/5da96af0/attachment.sig>

From itamar at itamarst.org  Wed Apr  9 04:42:12 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 09 Apr 2014 06:42:12 -0400
Subject: [Twisted-Python] Twisted at PyCon 2014
Message-ID: <53452404.2040909@itamarst.org>

PyCon is upon us; here's some of the Twisted-related talks and events 
this year (I may be missing a few, and this year I'm only mentioning 
stuff that will specifically mentions Twisted):


      Tutorials

Aurynn Shaw will be teaching a Twisted tutorial today - 
https://us.pycon.org/2014/schedule/presentation/58/


      Talks

Ashwini Oruganti will be talking about how she implemented the happy 
eyeballs algorithm (really! aka RFC 6555) - 
https://us.pycon.org/2014/schedule/presentation/156/

Stacey Sern will present an introduction to Twisted - 
https://us.pycon.org/2014/schedule/presentation/189/

Laurens van Houtven will be talking about ways to use Twisted from other 
frameworks and concurrency models - 
https://us.pycon.org/2014/schedule/presentation/138/

Hynek Schlawack will tell you that SSL in Twisted has some issues (but 
getting better literally by the day) - 
https://us.pycon.org/2014/schedule/presentation/144/

Narahari Allamraju will be reviewing different options for messaging 
layers, from low-level systems like Twisted to high-level systems like 
RabbitMQ - https://us.pycon.org/2014/schedule/presentation/282/


      Other

We'll be sprinting after the conference, please join in!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140409/a37dcc54/attachment-0002.html>

From exarkun at twistedmatrix.com  Wed Apr  9 07:42:31 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 13:42:31 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
Message-ID: <20140409134231.6674.1133387165.divmod.xquotient.93@top>

On 07:34 am, hawkowl at atleastfornow.net wrote:
>Just in time for PyCon, the second prerelease is hot off the presses.
>
>Tarballs for this prerelease can be found at 
><http://twistedmatrix.com/Releases/pre/14.0.0pre2>, with the changelog 
>at <http://twistedmatrix.com/Releases/pre/14.0.0pre2/NEWS.txt>.
>
>Changes from the previous prerelease include:
>
>         - Dropping support for Windows XP, due to XP being EOL.
>
>         - Dropping support for PyOpenSSL older than 0.10.
>
>         - Support for TLS Service Identity, in conjunction with the 
>service_identity library on PyPI.

Thanks!

I haven't yet done any serious testing of this prerelease but I did 
import some modules from it and I think this is pretty embarassing:
>>>import twisted.internet.ssl
/home/exarkun/Projects/Twisted/trunk/twisted/internet/_sslverify.py:119: 
UserWarning: You do not have the service_identity module installed. 
Please install it from <https://pypi.python.org/pypi/service_identity>. 
Without the service_identity module and a recent enough pyOpenSSL 
tosupport it, Twisted can perform only rudimentary TLS client 
hostnameverification.  Many valid certificate/hostname mappings may be 
rejected.
  verifyHostname, VerificationError = _selectVerifyImplementation()

This is a warning that just about every Twisted user is going to see and 
it's confusing (_sslverify.py?  what?) and poorly formatted.

Jean-Paul
>For more information and a full list of changes, check the NEWS.txt 
>file.
>
>Please download the tarballs and test them with your applications, so 
>we can make sure we’re all ready for release!
>
>-hawkowl



From _ at lvh.io  Wed Apr  9 10:42:23 2014
From: _ at lvh.io (Laurens Van Houtven)
Date: Wed, 9 Apr 2014 12:42:23 -0400
Subject: [Twisted-Python] Twisted at PyCon 2014
In-Reply-To: <53452404.2040909@itamarst.org>
References: <53452404.2040909@itamarst.org>
Message-ID: <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>

I've tentatively put an open space down: 1900 - 2100 522A on Friday. If
that screws up some people's schedules lemme know.


On Wed, Apr 9, 2014 at 6:42 AM, Itamar Turner-Trauring
<itamar at itamarst.org>wrote:

>  PyCon is upon us; here's some of the Twisted-related talks and events
> this year (I may be missing a few, and this year I'm only mentioning stuff
> that will specifically mentions Twisted):
>
> Tutorials
>
> Aurynn Shaw will be teaching a Twisted tutorial today -
> https://us.pycon.org/2014/schedule/presentation/58/
>
>
>  Talks
>
> Ashwini Oruganti will be talking about how she implemented the happy
> eyeballs algorithm (really! aka RFC 6555) -
> https://us.pycon.org/2014/schedule/presentation/156/
>
> Stacey Sern will present an introduction to Twisted -
> https://us.pycon.org/2014/schedule/presentation/189/
>
> Laurens van Houtven will be talking about ways to use Twisted from other
> frameworks and concurrency models -
> https://us.pycon.org/2014/schedule/presentation/138/
>
> Hynek Schlawack will tell you that SSL in Twisted has some issues (but
> getting better literally by the day) -
> https://us.pycon.org/2014/schedule/presentation/144/
>  Narahari Allamraju will be reviewing different options for messaging
> layers, from low-level systems like Twisted to high-level systems like
> RabbitMQ - https://us.pycon.org/2014/schedule/presentation/282/
>
>
> Other
>
> We'll be sprinting after the conference, please join in!
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140409/aa656071/attachment-0002.html>

From exarkun at twistedmatrix.com  Wed Apr  9 11:26:44 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 17:26:44 -0000
Subject: [Twisted-Python] Twisted at PyCon 2014
In-Reply-To: <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
References: <53452404.2040909@itamarst.org>
 <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
Message-ID: <20140409172644.6674.879439284.divmod.xquotient.95@top>

On 04:42 pm, _ at lvh.io wrote:
>I've tentatively put an open space down: 1900 - 2100 522A on Friday. If
>that screws up some people's schedules lemme know.

I booked Friday night already (and I have a hunch a couple other core 
team members have as well).

Jean-Paul



From glyph at twistedmatrix.com  Wed Apr  9 11:45:06 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 9 Apr 2014 13:45:06 -0400
Subject: [Twisted-Python] XMLString clarification
In-Reply-To: <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
References: <CAA-sNEYhXOX38upYK8SqermQGa8Ou6Bn3xBhE=bto6bvOXEHsQ@mail.gmail.com>
 <5344840E.6060109@thieprojects.ch>
 <CAA-sNEZibJcpa=WmYLr0z01B9YbHUFPA671pkS-qzVr7hRU3Yg@mail.gmail.com>
Message-ID: <512A4809-8719-48E9-B95C-5E491F41E25B@twistedmatrix.com>


On Apr 8, 2014, at 7:38 PM, Kevin Mcintyre <kebin70 at gmail.com> wrote:

> I've opted for placeholder and added callback to flatten.
> 
> I'm a hack, and it was holding up delivery of email.

What I would do is use html5lib to parse the HTML, then emit it as HTML before re-parsing it as XML.

XMLString is designed to read templates written by a programmer, not arbitrary garbage HTML off the internet.  There are other libraries for that :-).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140409/f628c331/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Apr  9 11:47:56 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 9 Apr 2014 13:47:56 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <20140409134231.6674.1133387165.divmod.xquotient.93@top>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
Message-ID: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>


On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com wrote:

> This is a warning that just about every Twisted user is going to see and it's confusing (_sslverify.py? what?) and poorly formatted.

I can definitely fix the formatting (and maybe a few other things in this area...) for a new prerelease.

But how would you recommend we make the warning come from a more sensible location that doesn't mention _sslverify.py?  I'd really like this to look specific, comprehensible, and actionable to users.  Should it not be using the warnings module?

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140409/43f516a8/attachment-0002.html>

From donald at stufft.io  Wed Apr  9 12:10:05 2014
From: donald at stufft.io (Donald Stufft)
Date: Wed, 9 Apr 2014 14:10:05 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
Message-ID: <A9957D30-A2C5-475E-A37E-365D8341E394@stufft.io>


On Apr 9, 2014, at 1:47 PM, Glyph <glyph at twistedmatrix.com> wrote:

> 
> On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com wrote:
> 
>> This is a warning that just about every Twisted user is going to see and it's confusing (_sslverify.py? what?) and poorly formatted.
> 
> I can definitely fix the formatting (and maybe a few other things in this area...) for a new prerelease.
> 
> But how would you recommend we make the warning come from a more sensible location that doesn't mention _sslverify.py?  I'd really like this to look specific, comprehensible, and actionable to users.  Should it not be using the warnings module?
> 
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

You can use the level kwarg to warnings to make it look like the warning is coming from high up in the stack if that’s useful at all.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140409/ed733a69/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140409/ed733a69/attachment.sig>

From p.mayers at imperial.ac.uk  Wed Apr  9 12:19:12 2014
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 09 Apr 2014 19:19:12 +0100
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
Message-ID: <53458F20.2050400@imperial.ac.uk>

On 09/04/14 18:47, Glyph wrote:
>
> On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com
> <mailto:exarkun at twistedmatrix.com> wrote:
>
>> This is a warning that just about every Twisted user is going to see
>> and it's confusing (_sslverify.py? what?) and poorly formatted.
>
> I can definitely fix the formatting (and maybe a few other things in
> this area...) for a new prerelease.
>
> But how would you recommend we make the warning come from a more

How is the library used?

If it's used under new APIs, then just fail if it's not installed.

If it's used under old APIs, then don't warn at all; either deprecate 
those APIs because you think they're unsafe, or keep quiet ;o)

If you must warn, warn at runtime not import time.

Just my £0.03 (inflation).



From exarkun at twistedmatrix.com  Wed Apr  9 13:34:08 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 19:34:08 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
Message-ID: <20140409193408.6674.1861176011.divmod.xquotient.105@top>

On 05:47 pm, glyph at twistedmatrix.com wrote:
>
>On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com wrote:
>>This is a warning that just about every Twisted user is going to see 
>>and it's confusing (_sslverify.py? what?) and poorly formatted.
>
>I can definitely fix the formatting (and maybe a few other things in 
>this area...) for a new prerelease.
>
>But how would you recommend we make the warning come from a more 
>sensible location that doesn't mention _sslverify.py?  I'd really like 
>this to look specific, comprehensible, and actionable to users.  Should 
>it not be using the warnings module?

I added one suggestion to the ticket <https://tm.tl/7097>: 
`warnings.showwarning(..., "", "")` will produce a message like ":: 
UserWarning: ..." (at least one the one version of Python I tested on, 
who knows if it's the same across all the versions we care about) which 
is still weird but less so.

Off the top of my head I don't have any better suggestions than that.  I 
guess there is the other obvious approach of just writing some bytes to 
stderr...

Considering my various experiences with the warnings module I'm even a 
little tempted to go that way.  It does seem like the choice is between 
really bad and only sort of bad, though.

(Oops, didn't click send fast enough, now I'm imagining other things 
like passing some other string to `showwarning` as the file name - like 
"Twisted TLS Support" or whatever else you want to make the resulting 
message look pretty.)

Jean-Paul



From exarkun at twistedmatrix.com  Wed Apr  9 13:48:00 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 09 Apr 2014 19:48:00 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <53458F20.2050400@imperial.ac.uk>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
Message-ID: <20140409194800.6674.1470609324.divmod.xquotient.122@top>

On 06:19 pm, p.mayers at imperial.ac.uk wrote:
>On 09/04/14 18:47, Glyph wrote:
>>
>>On Apr 9, 2014, at 9:42 AM, exarkun at twistedmatrix.com
>><mailto:exarkun at twistedmatrix.com> wrote:
>>>This is a warning that just about every Twisted user is going to see
>>>and it's confusing (_sslverify.py? what?) and poorly formatted.
>>
>>I can definitely fix the formatting (and maybe a few other things in
>>this area...) for a new prerelease.
>>
>>But how would you recommend we make the warning come from a more
>
>How is the library used?
>
>If it's used under new APIs, then just fail if it's not installed.
>
>If it's used under old APIs, then don't warn at all; either deprecate 
>those APIs because you think they're unsafe, or keep quiet ;o)
>
>If you must warn, warn at runtime not import time.

This may be a good idea.  If you warn at runtime then there actually 
*may* be something above you on the stack, somewhere, which you can 
blame the warning on.

I think in this case that's possible (if you emitted the warning from 
`simpleVerifyHostname`).

The trade-off of this approach is that users might not notice a warning 
that only shows up later after the program has been running for a while. 
Of course they might not notice a warning that shows up early either - 
who even says the program is running in a terminal or that anyone is 
reading stdio?  But those are general problems with the warnings 
module...

And that shortcoming could be mitigated by documenting (or even formally 
declaring) this dependency more prominently (I see it's in the NEWS file 
and the SSL howto but not, for example, in the INSTALL file).

Jean-Paul



From itamar at itamarst.org  Wed Apr  9 16:55:32 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 09 Apr 2014 18:55:32 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <20140409194800.6674.1470609324.divmod.xquotient.122@top>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
Message-ID: <5345CFE4.9040403@itamarst.org>

On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>
> And that shortcoming could be mitigated by documenting (or even 
> formally declaring) this dependency more prominently (I see it's in 
> the NEWS file and the SSL howto but not, for example, in the INSTALL 
> file).
A ssl-requirements.txt file seems like a good idea; we're going to be 
adding the pem package as well, it looks like, and having one thing 
people can install automatically is a lot better than having all our 
users manually type stuff in.



From donald at stufft.io  Wed Apr  9 16:59:33 2014
From: donald at stufft.io (Donald Stufft)
Date: Wed, 9 Apr 2014 18:59:33 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <5345CFE4.9040403@itamarst.org>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
Message-ID: <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>


On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:

> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>> 
>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

extras!

Then people can do:

install_requires=[“Twisted[ssl]”]

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140409/0d82e588/attachment.sig>

From exarkun at twistedmatrix.com  Thu Apr 10 04:56:53 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 10 Apr 2014 10:56:53 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
Message-ID: <20140410105653.6674.1294556454.divmod.xquotient.129@top>

On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>
>On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring 
><itamar at itamarst.org> wrote:
>>On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>
>>>And that shortcoming could be mitigated by documenting (or even 
>>>formally declaring) this dependency more prominently (I see it's in 
>>>the NEWS file and the SSL howto but not, for example, in the INSTALL 
>>>file).
>>A ssl-requirements.txt file seems like a good idea; we're going to be 
>>adding the pem package as well, it looks like, and having one thing 
>>people can install automatically is a lot better than having all our 
>>users manually type stuff in.
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>extras!
>
>Then people can do:
>
>install_requires=[“Twisted[ssl]”]

This would be great.  What do people who want to use pip to set up a 
Twisted development environment do?

Jean-Paul



From donald at stufft.io  Thu Apr 10 05:06:09 2014
From: donald at stufft.io (Donald Stufft)
Date: Thu, 10 Apr 2014 07:06:09 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <20140410105653.6674.1294556454.divmod.xquotient.129@top>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
Message-ID: <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>


On Apr 10, 2014, at 6:56 AM, exarkun at twistedmatrix.com wrote:

> On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>> 
>> On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>>> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>> 
>>>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
>>> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> extras!
>> 
>> Then people can do:
>> 
>> install_requires=[“Twisted[ssl]”]
> 
> This would be great.  What do people who want to use pip to set up a Twisted development environment do?
> 
> Jean-Paul
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

Well you can do ``pip install Twisted[ssl]`` too. I don’t have a better solution that that up my sleeve though :(

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140410/3a5c173d/attachment.sig>

From dustin at v.igoro.us  Thu Apr 10 06:35:50 2014
From: dustin at v.igoro.us (Dustin J. Mitchell)
Date: Thu, 10 Apr 2014 08:35:50 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
 <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
Message-ID: <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>

Use

  pip install -e .[ssl]

in the dir with the twisted setup.py.  Works like a charm.

Dustin

On Thu, Apr 10, 2014 at 7:06 AM, Donald Stufft <donald at stufft.io> wrote:
>
> On Apr 10, 2014, at 6:56 AM, exarkun at twistedmatrix.com wrote:
>
>> On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>>>
>>> On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>>>> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>>>
>>>>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
>>>> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>> extras!
>>>
>>> Then people can do:
>>>
>>> install_requires=[“Twisted[ssl]”]
>>
>> This would be great.  What do people who want to use pip to set up a Twisted development environment do?
>>
>> Jean-Paul
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> Well you can do ``pip install Twisted[ssl]`` too. I don’t have a better solution that that up my sleeve though :(
>
> -----------------
> Donald Stufft
> PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From donald at stufft.io  Thu Apr 10 11:02:40 2014
From: donald at stufft.io (Donald Stufft)
Date: Thu, 10 Apr 2014 13:02:40 -0400
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
 <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
 <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
Message-ID: <C0652092-F42E-4699-815B-C13CD9573429@stufft.io>

Oh whoops, I misread what Jean-Paul said. Yes you can do that, either directly or in a requirements file.

On Apr 10, 2014, at 8:35 AM, Dustin J. Mitchell <dustin at v.igoro.us> wrote:

> Use
> 
>  pip install -e .[ssl]
> 
> in the dir with the twisted setup.py.  Works like a charm.
> 
> Dustin
> 
> On Thu, Apr 10, 2014 at 7:06 AM, Donald Stufft <donald at stufft.io> wrote:
>> 
>> On Apr 10, 2014, at 6:56 AM, exarkun at twistedmatrix.com wrote:
>> 
>>> On 9 Apr, 10:59 pm, donald at stufft.io wrote:
>>>> 
>>>> On Apr 9, 2014, at 6:55 PM, Itamar Turner-Trauring <itamar at itamarst.org> wrote:
>>>>> On 04/09/2014 03:48 PM, exarkun at twistedmatrix.com wrote:
>>>>>> 
>>>>>> And that shortcoming could be mitigated by documenting (or even formally declaring) this dependency more prominently (I see it's in the NEWS file and the SSL howto but not, for example, in the INSTALL file).
>>>>> A ssl-requirements.txt file seems like a good idea; we're going to be adding the pem package as well, it looks like, and having one thing people can install automatically is a lot better than having all our users manually type stuff in.
>>>>> 
>>>>> _______________________________________________
>>>>> Twisted-Python mailing list
>>>>> Twisted-Python at twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>> 
>>>> extras!
>>>> 
>>>> Then people can do:
>>>> 
>>>> install_requires=[“Twisted[ssl]”]
>>> 
>>> This would be great.  What do people who want to use pip to set up a Twisted development environment do?
>>> 
>>> Jean-Paul
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> Well you can do ``pip install Twisted[ssl]`` too. I don’t have a better solution that that up my sleeve though :(
>> 
>> -----------------
>> Donald Stufft
>> PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA
>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140410/434a54b4/attachment.sig>

From thughes at thegoldfish.org  Thu Apr 10 15:02:13 2014
From: thughes at thegoldfish.org (Tim Hughes)
Date: Thu, 10 Apr 2014 22:02:13 +0100
Subject: [Twisted-Python] which async framework?
In-Reply-To: <53200C97.40908@simplistix.co.uk>
References: <53200C97.40908@simplistix.co.uk>
Message-ID: <CALQL5_Jff6ynduYzVeYOv073e=CS2b3AkOCPY9sE3JYPygv9nQ@mail.gmail.com>

> The protocols are all financial (do we really not have a pure-python FIX library?!) but none are likely to have existing python implementations.
>
> How should I pick between the options? What would people recommend and why?
>

This might be a starting point for the FIX stuff

https://pypi.python.org/pypi/fixlib/0.5

Tim Hughes
mailto:thughes at thegoldfish.org



From exarkun at twistedmatrix.com  Fri Apr 11 20:41:40 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sat, 12 Apr 2014 02:41:40 -0000
Subject: [Twisted-Python] Twisted 14.0.0-pre2 Announcement
In-Reply-To: <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
References: <E23D2BBC-E6F5-4AD2-83AF-29D9CC1358B8@atleastfornow.net>
 <20140409134231.6674.1133387165.divmod.xquotient.93@top>
 <CB4A906D-EC38-4C21-8E45-D385646909A0@twistedmatrix.com>
 <53458F20.2050400@imperial.ac.uk>
 <20140409194800.6674.1470609324.divmod.xquotient.122@top>
 <5345CFE4.9040403@itamarst.org>
 <CE6DF6AD-37ED-4A0D-9EC6-B0FDDD257CFF@stufft.io>
 <20140410105653.6674.1294556454.divmod.xquotient.129@top>
 <213F663A-EA10-4831-A0EF-70C30003A440@stufft.io>
 <CAJtE5vT3uCVTT20Hav0K4iY+u28=1fWUbpPsUZ9eSHPPmM-XXg@mail.gmail.com>
Message-ID: <20140412024140.5692.118987739.divmod.xquotient.2@top>

On 10 Apr, 12:35 pm, dustin at v.igoro.us wrote:
>Use
>
>  pip install -e .[ssl]
>
>in the dir with the twisted setup.py.  Works like a charm.

It seems like this would completely replace the need for any kind of 
requirements.txt files.  Is there a compelling reason to make both of 
these work?

Jean-Paul



From tom.prince at ualberta.net  Sat Apr 12 12:39:08 2014
From: tom.prince at ualberta.net (Tom Prince)
Date: Sat, 12 Apr 2014 14:39:08 -0400
Subject: [Twisted-Python] Twisted at PyCon 2014
In-Reply-To: <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
References: <53452404.2040909@itamarst.org>
 <CAE_Hg6avLCxeSRfSBnAzgD3h1zvfA2j7HFEhF-YYAyQ9MCsiwA@mail.gmail.com>
Message-ID: <87d2gms88j.fsf@loki.hocat.ca>

The twisted open space will be at 19h00 today in 515bc.



From trac at twistedmatrix.com  Sun Apr 13 00:05:16 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 13 Apr 2014 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1397369116.17.3227748426009236541@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140413/b357521e/attachment-0002.html>

From itamar at itamarst.org  Mon Apr 14 08:29:43 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Mon, 14 Apr 2014 10:29:43 -0400
Subject: [Twisted-Python] ANN: Crochet 1.2.0 - Use Twisted Anywhere!
Message-ID: <e63b31d91b90cf34f257b606bc24de27@itamarst.org>

 

Crochet is an MIT-licensed library that makes it easier to use Twisted
from regular blocking code. Some use cases include: 

 	* Easily use Twisted from a blocking framework like Django or Flask.
 	* Write a library that provides a blocking API, but uses Twisted for
its implementation.
 	* Port blocking code to Twisted more easily, by keeping a backwards
compatibility layer.
 	* Allow normal Twisted programs that use threads to interact with
Twisted more cleanly from their threaded parts. For example this can be
useful when using Twisted as a WSGI container.

New in this release: 

 	* crochet.wait_for implements the timeout/cancellation pattern
documented in previous versions of Crochet.
 	* Functions wrapped with wait_for and run_in_reactor can now be
accessed via the wrapped_function attribute, to ease unit testing of the
underlying Twisted code.
 	* Bug fixes, documentation improvements and more - for a full list see
the

Documentation can be found at http://crochet.readthedocs.org [1] 

Bugs and feature requests should be filed at the project
https://github.com/itamarst/crochet [2] 

Here's an example of a program using Crochet. Notice that you get a
completely blocking interface to Twisted and do not need to run the
Twisted reactor, the event loop, yourself. 

#!/usr/bin/python
"""
Do a DNS lookup using Twisted's APIs.
"""
from __future__ import print_function

# The Twisted code we'll be using:
from twisted.names import client

from crochet import setup, wait_for
setup()

# Crochet layer, wrapping Twisted's DNS library in a blocking call.
@wait_for(timeout=5.0)
def gethostbyname(name):
 """Lookup the IP of a given hostname.

 Unlike socket.gethostbyname() which can take an arbitrary amount of
time
 to finish, this function will raise crochet.TimeoutError if more than 5
 seconds elapse without an answer being received.
 """
 d = client.lookupAddress(name)
 d.addCallback(lambda result: result[0][0].payload.dottedQuad())
 return d

if __name__ == '__main__':
 # Application code using the public API - notice it works in a normal
 # blocking manner, with no event loop visible:
 import sys
 name = sys.argv[1]
 ip = gethostbyname(name)
 print(name, "->", ip)

Run on the command line: 

> $ python blockingdns.py twistedmatrix.com
> twistedmatrix.com -> 66.35.39.66

 

Links:
------
[1] https://crochet.readthedocs.org/
[2] https://github.com/itamarst/crochet
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140414/2783ac8b/attachment-0002.html>

From nicholas at alienretro.com  Tue Apr 15 16:09:37 2014
From: nicholas at alienretro.com (Nicholas)
Date: Tue, 15 Apr 2014 23:09:37 +0100
Subject: [Twisted-Python] Manhole but no SSH
Message-ID: <CAGrCNobGohrvBBUJO8BKvz=5976u-WsyQys18D+5OSFQz14a3Q@mail.gmail.com>

Hello, everyone.

Is it possible to implement the Manhole but without using SSH (or telnet,
for that matter) ?

Say I start a service and I want to be thrown straight in a console, much
like Manhole does with SSH, but without having to actually listen on a port
and having to connect to it with an user and password.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140415/575d2042/attachment-0002.html>

From mithrandi at mithrandi.net  Tue Apr 15 16:21:54 2014
From: mithrandi at mithrandi.net (Tristan Seligmann)
Date: Wed, 16 Apr 2014 00:21:54 +0200
Subject: [Twisted-Python] Manhole but no SSH
In-Reply-To: <CAGrCNobGohrvBBUJO8BKvz=5976u-WsyQys18D+5OSFQz14a3Q@mail.gmail.com>
References: <CAGrCNobGohrvBBUJO8BKvz=5976u-WsyQys18D+5OSFQz14a3Q@mail.gmail.com>
Message-ID: <CAMcKhMRPOtXcxG1NQ_DOAO-Mwx+a4PBHvxZ3t8vEUUMC_3r1RQ@mail.gmail.com>

On 16 April 2014 00:09, Nicholas <nicholas at alienretro.com> wrote:
> Hello, everyone.
>
> Is it possible to implement the Manhole but without using SSH (or telnet,
> for that matter) ?
>
> Say I start a service and I want to be thrown straight in a console, much
> like Manhole does with SSH, but without having to actually listen on a port
> and having to connect to it with an user and password.

This sounds a lot like `python -m twisted.conch.stdio`; I'm not sure
how easily reusable that code is, but hopefully it shouldn't be too
hard to use from an existing application!
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar



From grigorescu_ciprian at yahoo.com  Wed Apr 16 03:48:23 2014
From: grigorescu_ciprian at yahoo.com (Grigorescu Ciprian)
Date: Wed, 16 Apr 2014 02:48:23 -0700 (PDT)
Subject: [Twisted-Python] Create a NAT rule from twsited
Message-ID: <1397641703.7937.YahooMailNeo@web141704.mail.bf1.yahoo.com>

Hello,

Is there a way to create a NAT rule from twisted? 

I need to route a private ip to a public ip from a twisted script.



Thank You,
Ciprian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140416/2093d829/attachment-0002.html>

From trac at twistedmatrix.com  Sun Apr 20 00:05:16 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 20 Apr 2014 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1397973916.13.4317360187394084537@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140420/2a63e1a2/attachment-0002.html>

From i at introo.me  Sun Apr 20 00:15:29 2014
From: i at introo.me (Shiyao Ma)
Date: Sun, 20 Apr 2014 14:15:29 +0800
Subject: [Twisted-Python] What's the difference between Port and Interface
Message-ID: <CAJQX3Dwb9tDXq3kt5H4POcvQBtUpQjV64V0sRuYiqy3eZUc27g@mail.gmail.com>

Hi.
It seems a port can contain multiple interface. In real network, is there a
Port?
What is port for and what's the corresponding object in real switch?


Thanks.

-- 

吾輩は猫である。ホームーページはhttp://introo.me。
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140420/05016966/attachment-0002.html>

From i at introo.me  Sun Apr 20 00:53:01 2014
From: i at introo.me (Shiyao Ma)
Date: Sun, 20 Apr 2014 14:53:01 +0800
Subject: [Twisted-Python] What's the difference between Port and
	Interface
In-Reply-To: <CAJQX3Dwb9tDXq3kt5H4POcvQBtUpQjV64V0sRuYiqy3eZUc27g@mail.gmail.com>
References: <CAJQX3Dwb9tDXq3kt5H4POcvQBtUpQjV64V0sRuYiqy3eZUc27g@mail.gmail.com>
Message-ID: <CAJQX3Dx9Tr7gFCo0oAKwCaW+ynJMXRe4R9+yb_y1egSE5NxUBw@mail.gmail.com>

Oops. My bad. Sorry for posting here.


2014-04-20 14:15 GMT+08:00 Shiyao Ma <i at introo.me>:

> Hi.
> It seems a port can contain multiple interface. In real network, is there
> a Port?
> What is port for and what's the corresponding object in real switch?
>
>
> Thanks.
>
> --
>
> 吾輩は猫である。ホームーページはhttp://introo.me。
>



-- 

吾輩は猫である。ホームーページはhttp://introo.me。
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140420/ab094702/attachment-0002.html>

From keturn at keturn.net  Sun Apr 20 15:38:11 2014
From: keturn at keturn.net (Kevin Turner)
Date: Sun, 20 Apr 2014 14:38:11 -0700
Subject: [Twisted-Python] =?utf-8?q?What_happens_in_Montr=C3=A9al=E2=80=A6?=
 =?utf-8?q?_PyCon_2014_Sprint_Report?=
Message-ID: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>

Hi folks,

I didn't attend PyCon or the accompanying sprints this year, but judging
from the commit traffic, many of you did. And I want to know what you
worked on! Partly so I can live vicariously through your experiences,
but I know a lot of other people are curious too. Events like this are a
great way to show our followers and sponsors what happens when a bunch
of people have a chance to get together and focus on the project.

I've started a sprint report page on the wiki:
https://twistedmatrix.com/trac/wiki/PyconSprint2014

Feel free to contribute directly to that page, or reply to this email
(either on or off-list) and I'll see if I can summarize the responses.

For those of you who were at the sprints this year:

* Was this your first time at a development sprint?

* Was it your first time contributing to Twisted?

* What did you work on?

* Did you work on something outside Twisted core? I especially want to
hear about these! For Twisted I can look at the commit logs, but if
there was activity on related projects, I might not know where to look
unless you tell me about it.

* Any other lasting impressions? Is there something you'll do
differently now as a result of some conversation or experience you had
at PyCon?

I know now that you're starting to get caught up on sleep and the
poutine is leaving your system, you may have reservations about sharing
certain things you worked on. Maybe you feel like it's not "ready" yet,
or it feels out-of-place next to that ticket Glyph worked on where there
were eight or nine thousand words in the ticket comments alone. Maybe
some things that happen in Montréal really should stay in Montréal.

But if you had a good experience at the sprints, and it's something
you'd encourage others to join next time they have the opportunity,
please share!

If you didn't have the experience you were hoping for, but you learned
something that will make it better for next time, share that too.
Whether it's something for the sprint organizers or something you wish
you could tell your earlier self, help us make next time better.

Think nobody else wants to hear about the weird thing you were working
on? Might there be a *small* chance? Like one-in-a-million? Then share
that too. There are at least a million Python programmers out there.
Even if your thing isn't "done," sometimes just knowing someone has
_made an attempt_ is important.

Lastly, if you have any photos, vines, blender models, artist's
renditions of the porting process, or any other media from the sprint,
please do email me. From time to time the Software Freedom Conservancy
(which supports the Twisted Software Foundation) asks us if we have
anything to share that isn't a wall of text, and I'd love to have more
things to *show* people.

Thanks,

 - Kevin



From glyph at twistedmatrix.com  Wed Apr 23 17:29:05 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 23 Apr 2014 16:29:05 -0700
Subject: [Twisted-Python]
 =?windows-1252?q?What_happens_in_Montr=E9al=85_P?=
 =?windows-1252?q?yCon_2014_Sprint_Report?=
In-Reply-To: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
References: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
Message-ID: <AF01E1E3-5A35-4565-8D9B-8C52F96E09CE@twistedmatrix.com>


On Apr 20, 2014, at 2:38 PM, Kevin Turner <keturn at keturn.net> wrote:

> Hi folks,
> 
> I didn't attend PyCon or the accompanying sprints this year, but judging
> from the commit traffic, many of you did. And I want to know what you
> worked on! Partly so I can live vicariously through your experiences,
> but I know a lot of other people are curious too. Events like this are a
> great way to show our followers and sponsors what happens when a bunch
> of people have a chance to get together and focus on the project.
> 
> I've started a sprint report page on the wiki:
> https://twistedmatrix.com/trac/wiki/PyconSprint2014

Thanks for putting this there!

> Feel free to contribute directly to that page, or reply to this email
> (either on or off-list) and I'll see if I can summarize the responses.

Everybody else should really reply; I'm a little surprised to not see 

> For those of you who were at the sprints this year:
> 
> * Was this your first time at a development sprint?

Nope.

> * Was it your first time contributing to Twisted?

Not really, no.

> * What did you work on?

I worked primarily on TLS, particularly client-side TLS.  The relevant tickets are <https://twistedmatrix.com/trac/ticket/7098> and <https://twistedmatrix.com/trac/ticket/4888>; I just put 4888 into what I hope will be its final review, which is why it took me so long to get to replying here!

I also helped out a little with some questions on <https://twistedmatrix.com/trac/ticket/6750> which wsanchez and ralphm put through several review/response cycles and will, I hope, be ready to land shortly after 14.0.

> * Did you work on something outside Twisted core? I especially want to
> hear about these! For Twisted I can look at the commit logs, but if
> there was activity on related projects, I might not know where to look
> unless you tell me about it.

I worked on <https://github.com/hynek/pem>, and added chain-construction logic so you don't have to put your keys/certs/chain certs in any particular order.  I also put together <https://pip2014.com/> a little bit before the sprints and ended up discussing it there a fair amount.  I'm trying to participate a bit more in the wider ecosystem so that we don't have so much code locked up inside Twisted that people are not aware of.

> * Any other lasting impressions?

As usual, the sprints were amazing, and it was great to have so many people working on Twisted and moving things forward, many of which had been stuck or stalled for months.

> Is there something you'll do
> differently now as a result of some conversation or experience you had
> at PyCon?

I'm planning to stop working on TLS soon, I hope ;-).

> I know now that you're starting to get caught up on sleep and the
> poutine is leaving your system, you may have reservations about sharing
> certain things you worked on. Maybe you feel like it's not "ready" yet,
> or it feels out-of-place next to that ticket Glyph worked on where there
> were eight or nine thousand words in the ticket comments alone. Maybe
> some things that happen in Montréal really should stay in Montréal.

You should never feel like it's not "ready".  Any contribution is totally worthwhile!

> But if you had a good experience at the sprints, and it's something
> you'd encourage others to join next time they have the opportunity,
> please share!

Yes, please do!

> If you didn't have the experience you were hoping for, but you learned
> something that will make it better for next time, share that too.
> Whether it's something for the sprint organizers or something you wish
> you could tell your earlier self, help us make next time better.

This PyCon was a little weird in the way that we set up the space; it ended up being more old hands and fewer new people, since there weren't many opportunities to attract new folks wandering by to the project (since we were in a corner of the building and nobody ever wandered by).  That also meant that there was a bit less opportunity for cross-pollenation with other projects.  On the plus side, it meant that the sprint was pretty focused and we made a lot of progress on some very big, challenging issues that required a lot of continuous focused attention from advanced contributors.

We seem to alternate years, with every other year being very new-contributor focused, which is sort of okay, but I'd like to see a sprint with two halves, where one part of the room is onboarding new people and the other half is more advanced development.

Also, there should be some small incentive for people to stay for the entire duration of the sprints.  If PyCon itself doesn't do this, then perhaps we should.  The fact that people are gradually trickling out starting on the afternoon of the first day until almost nobody is left on the last day does lower the energy level just a little bit.

> Think nobody else wants to hear about the weird thing you were working
> on? Might there be a *small* chance? Like one-in-a-million? Then share
> that too. There are at least a million Python programmers out there.
> Even if your thing isn't "done," sometimes just knowing someone has
> _made an attempt_ is important.

Learning that someone has made an attempt is often the first step towards prompting someone _else_ to actually finish the work :).


-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140423/8a6c2357/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140423/8a6c2357/attachment-0002.bin>

From meejah at meejah.ca  Thu Apr 24 13:27:35 2014
From: meejah at meejah.ca (meejah)
Date: Thu, 24 Apr 2014 23:27:35 +0400
Subject: [Twisted-Python] txtorcon v0.9.2
Message-ID: <861twm34uw.fsf@atlantis.meejah.ca>


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I am happy to announce that txtorcon v0.9.2 is now available.

This release adds a few minor bug-fixes and a few API
enhancements. Full details:

 * add on_disconnect callback for TorControlProtocol (no more monkey-patching Protocol API)
 * add age() method to Circuit
 * add time_created property to Circuit
 * don't incorrectly listen for NEWDESC events in TorState
 * add .flags dict to track flags in Circuit, Stream
 * build_circuit() can now take hex IDs (as well as Router instances)
 * add unique_name property to Router (returns the hex id, unless Named then return name)
 * add location property to Router
 * TorState.close_circuit now takes either a Circuit ID or Circuit instance
 * TorState.close_stream now takes either a Stream ID or Stream instance
 * support both GeoIP API versions
 * more test-coverage
 * small patch from enriquefynn improving tor binary locating
 * strip OK lines in TorControlProtocol (https://github.com/meejah/txtorcon/issues/8)
 * use TERM not KILL when Tor launch times out (https://github.com/meejah/txtorcon/pull/68>) from hellais
 * Unit-test coverage now at 98%

sha256 sums for the distribution files:

93e934f83e3fc6fcf40e76f7c9c28459af04205fb912d384aaacb7ac5269bb8f  dist/txtorcon-0.9.2-py2-none-any.whl
fe90743cdc453002ad046aa6556b611b4e85b813ff92865769d3d27712c2ca47  dist/txtorcon-0.9.2.tar.gz

There are also signatures on github and txtorcon.readthedocs.org
You may download from github or the hidden service:

   https://github.com/meejah/txtorcon/releases/tag/v0.9.2
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl.asc
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz
   https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz.asc

   http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz
   http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz.asc

Source code:

   https://github.com/meejah/txtorcon/archive/v0.9.2.tar.gz

Thanks,
meejah
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEcBAEBAgAGBQJTWVf5AAoJEMJgKAMSgGmn07kIAKSwjBck76dyN1lWJj0fRl/f
BevLpnp+rb+ge5hBAeKfsVTYciDBZeSo8/fE44wTNh5Qj9HEhFopVC4WF61rIFU+
4IkpnFvfmVEd8Iu1vqQ/hFmP1jrvT8T+nTbaTGkcoCSPI+GyXkbxLqcl0Fncq51M
M0OIRphyWA7EK3YoZ2Q1BOEIwsN0pwERYUhU0CGS45L7OZmyw86RXTMBZpBnNXrD
5VjQdpx8fvrV2iCRXi/k/e2Jy/xqs8o0I2+o9M6WrBiGCs5S9YbjsAKzRb7dsaBZ
RlRAdKUjyzkquPl4K8E5ocDToB1hIGvqCSp7s11a5rq5T/jUiDMYrjkxIXH1Yg4=
=W7+f
-----END PGP SIGNATURE-----




From _ at lvh.io  Thu Apr 24 13:52:14 2014
From: _ at lvh.io (Laurens Van Houtven)
Date: Thu, 24 Apr 2014 14:52:14 -0500
Subject: [Twisted-Python] txtorcon v0.9.2
In-Reply-To: <861twm34uw.fsf@atlantis.meejah.ca>
References: <861twm34uw.fsf@atlantis.meejah.ca>
Message-ID: <CAE_Hg6bpdKD9rVddL_1FRsNoiEkWKg_c-a4Nm6HvSZJyNyUkjQ@mail.gmail.com>

Thank you for all your work on this project :)


On Thu, Apr 24, 2014 at 2:27 PM, meejah <meejah at meejah.ca> wrote:

>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> I am happy to announce that txtorcon v0.9.2 is now available.
>
> This release adds a few minor bug-fixes and a few API
> enhancements. Full details:
>
>  * add on_disconnect callback for TorControlProtocol (no more
> monkey-patching Protocol API)
>  * add age() method to Circuit
>  * add time_created property to Circuit
>  * don't incorrectly listen for NEWDESC events in TorState
>  * add .flags dict to track flags in Circuit, Stream
>  * build_circuit() can now take hex IDs (as well as Router instances)
>  * add unique_name property to Router (returns the hex id, unless Named
> then return name)
>  * add location property to Router
>  * TorState.close_circuit now takes either a Circuit ID or Circuit instance
>  * TorState.close_stream now takes either a Stream ID or Stream instance
>  * support both GeoIP API versions
>  * more test-coverage
>  * small patch from enriquefynn improving tor binary locating
>  * strip OK lines in TorControlProtocol (
> https://github.com/meejah/txtorcon/issues/8)
>  * use TERM not KILL when Tor launch times out (
> https://github.com/meejah/txtorcon/pull/68>) from hellais
>  * Unit-test coverage now at 98%
>
> sha256 sums for the distribution files:
>
> 93e934f83e3fc6fcf40e76f7c9c28459af04205fb912d384aaacb7ac5269bb8f
>  dist/txtorcon-0.9.2-py2-none-any.whl
> fe90743cdc453002ad046aa6556b611b4e85b813ff92865769d3d27712c2ca47
>  dist/txtorcon-0.9.2.tar.gz
>
> There are also signatures on github and txtorcon.readthedocs.org
> You may download from github or the hidden service:
>
>    https://github.com/meejah/txtorcon/releases/tag/v0.9.2
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2-py2-none-any.whl.asc
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz
>
> https://github.com/meejah/txtorcon/releases/download/v0.9.2/txtorcon-0.9.2.tar.gz.asc
>
>    http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz
>    http://timaq4ygg2iegci7.onion/txtorcon-0.9.2.tar.gz.asc
>
> Source code:
>
>    https://github.com/meejah/txtorcon/archive/v0.9.2.tar.gz
>
> Thanks,
> meejah
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
>
> iQEcBAEBAgAGBQJTWVf5AAoJEMJgKAMSgGmn07kIAKSwjBck76dyN1lWJj0fRl/f
> BevLpnp+rb+ge5hBAeKfsVTYciDBZeSo8/fE44wTNh5Qj9HEhFopVC4WF61rIFU+
> 4IkpnFvfmVEd8Iu1vqQ/hFmP1jrvT8T+nTbaTGkcoCSPI+GyXkbxLqcl0Fncq51M
> M0OIRphyWA7EK3YoZ2Q1BOEIwsN0pwERYUhU0CGS45L7OZmyw86RXTMBZpBnNXrD
> 5VjQdpx8fvrV2iCRXi/k/e2Jy/xqs8o0I2+o9M6WrBiGCs5S9YbjsAKzRb7dsaBZ
> RlRAdKUjyzkquPl4K8E5ocDToB1hIGvqCSp7s11a5rq5T/jUiDMYrjkxIXH1Yg4=
> =W7+f
> -----END PGP SIGNATURE-----
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140424/28096154/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Apr 24 14:33:26 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 24 Apr 2014 13:33:26 -0700
Subject: [Twisted-Python] txtorcon v0.9.2
In-Reply-To: <861twm34uw.fsf@atlantis.meejah.ca>
References: <861twm34uw.fsf@atlantis.meejah.ca>
Message-ID: <2DA46727-CF3C-41FA-A4F8-F608891DDA4C@twistedmatrix.com>


On Apr 24, 2014, at 12:27 PM, meejah <meejah at meejah.ca> wrote:

> I am happy to announce that txtorcon v0.9.2 is now available.

Sadly I still don't know a whole ton about Tor, but this looks really full-featured!  Thanks for sharing the release with us.

I particularly liked:

> no more monkey-patching Protocol API

and

> Unit-test coverage now at 98%


;-).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140424/74278503/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140424/74278503/attachment-0002.bin>

From clayton.daley at gmail.com  Thu Apr 24 17:45:03 2014
From: clayton.daley at gmail.com (Clayton Daley)
Date: Thu, 24 Apr 2014 19:45:03 -0400
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
Message-ID: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>

I have a modular application that communicates over RPC connections (with
both sync and async server/clients available).  I want to migrate some of
the modules over to Twisted. Currently, all modules inherit important
utility functions from a parent class.  On paper, I now need two versions
of this parent class (synchronous & asynchronous) to be inherited by
modules of the respective types.

I'm looking for ways to maximize the common code between the two versions
of the parent object. One that comes to mind (motivating the subject of
this post) would be to write a synchronous interpreter for @inlineCallback
calls.  For example, here's a synchronous factory function from the parent
class (already partly reconfigured to be friendly to my idea):

    @classmethod
    def from_id(cls, id):
        doc = db.get_document(id) # blocking db call
        self = cls._new_document(doc) # synchronous initialization stuff
        self.__init__() # module init code is custom and may block
        return self

I imagine rewriting this to the following:

    @classmethod
    @inlineCallbacks
    def from_id(cls, id):
        doc = yield db.get_document(id) # blocking/async db call
        self = cls._new_document(doc) # always synchronous
        yield self.__init__() # blocking/async call
        returnValue(self)

Assuming the db connector and init function are appropriate to the
environment, my gut reaction is that this could (when combined with a
synchronous implementation of the decorator) run correctly in both places.
I've read that the @inlineCallback code is complicated so I figured I'd run
the idea by the experts before diving down that rabbit hole. Does anyone
see any obvious pitfall? I'm happy to do the legwork to try and build it,
but I'd also welcome any pointers from your (no doubt extensive) experience
writing the twisted version.

Thanks in advance!

Clayton Daley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140424/f5ec2261/attachment-0002.html>

From pierre at jaury.eu  Thu Apr 24 18:14:22 2014
From: pierre at jaury.eu (pierre at jaury.eu)
Date: Fri, 25 Apr 2014 02:14:22 +0200
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
In-Reply-To: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
References: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
Message-ID: <91ea4973fcda4dd6b496db23a09a91e7@jaury.eu>

Le 2014-04-25 01:45, Clayton Daley a écrit :
> I imagine rewriting this to the following:
> 
>     @classmethod
>     @inlineCallbacks
>     def from_id(cls, id):
>         doc = yield db.get_document(id) # blocking/async db call
> 
>         self = cls._new_document(doc) # always synchronous
>          yield self.__init__() # blocking/async call
>         returnValue(self)
> 
> places. I've read that the @inlineCallback code is complicated so I
> figured I'd run the idea by the experts before diving down that rabbit
> hole.

I am no expert, but the code for inlineCallbacks looks pretty
straightforward, except some special cases handled down the way.

> Does anyone see any obvious pitfall? I'm happy to do the legwork
> to try and build it, but I'd also welcome any pointers from your (no
> doubt extensive) experience writing the twisted version.

I would mostly argue about a semantic problem. inlineCallbacks help
asynchronous code *look* like synchronous code thanks to the sequential
writing. It is however essentially asynchronous and does return a
Deferred.

I do not see any immediate technical pitfall here. I would however be
very careful and double think my design if I were to use Deferred
objects as part of a blocking process.

kaiyou.



From exarkun at twistedmatrix.com  Thu Apr 24 20:27:20 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 25 Apr 2014 02:27:20 -0000
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
In-Reply-To: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
References: <CACKEAnW2B3gyg4CAB-1Y4+tA+qEWVuoLhhYkgSbGQzfv6P-wCQ@mail.gmail.com>
Message-ID: <20140425022720.6354.7331338.divmod.xquotient.13@top>

On 24 Apr, 11:45 pm, clayton.daley at gmail.com wrote:
>I have a modular application that communicates over RPC connections 
>(with
>both sync and async server/clients available).  I want to migrate some 
>of
>the modules over to Twisted. Currently, all modules inherit important
>utility functions from a parent class.  On paper, I now need two 
>versions
>of this parent class (synchronous & asynchronous) to be inherited by
>modules of the respective types.

You might find that replacing the subclassing with composition helps 
simplify the code re-use problem.

You may also be interested in https://github.com/radix/synchronous- 
deferred

Jean-Paul



From clayton.daley at gmail.com  Thu Apr 24 20:28:04 2014
From: clayton.daley at gmail.com (Clayton Daley)
Date: Thu, 24 Apr 2014 22:28:04 -0400
Subject: [Twisted-Python] Synchronous @inlineCallback interpreter
Message-ID: <CACKEAnXvjggutstq5NXqFjL1-WqKdbC3a0DHa3p54eEOh=jPxA@mail.gmail.com>

[apologize in advance if this creates threading issues as I picked digests
when I signed up not realizing it would make it difficult to reply to
threads]

Sorry I wasn't more clear.  My thought is to write a version that uses the
same @inlineCallback name and supports the same syntax (to eliminate the
need to rewrite code).  However, I don't mean the synchronous version to
actually use deferreds at all.  All I want the synchronous version to do is
"ignore" the yields (likely by sending the output right back in after the
block clears)... and treat the returnValue() as a return.

That way code written in the @inlineCallback syntax can be used by a
synchronous or asynchronous consumer.

Clayton Daley


On Thu, Apr 24, 2014 at 8:14 PM, pierre at jaury.eu wrote:

>
Le 2014-04-25 01:45, Clayton Daley a écrit :
>* I imagine rewriting this to the following:
*> >*     @classmethod
*>*     @inlineCallbacks
*>*     def from_id(cls, id):
*>*         doc = yield db.get_document(id) # blocking/async db call
*> >*         self = cls._new_document(doc) # always synchronous
*>*          yield self.__init__() # blocking/async call
*>*         returnValue(self)
*> >* places. I've read that the @inlineCallback code is complicated so I
*>* figured I'd run the idea by the experts before diving down that rabbit
*>* hole.
*
I am no expert, but the code for inlineCallbacks looks pretty
straightforward, except some special cases handled down the way.

>* Does anyone see any obvious pitfall? I'm happy to do the legwork
*>* to try and build it, but I'd also welcome any pointers from your (no
*>* doubt extensive) experience writing the twisted version.
*
I would mostly argue about a semantic problem. inlineCallbacks help
asynchronous code *look* like synchronous code thanks to the sequential
writing. It is however essentially asynchronous and does return a
Deferred.

I do not see any immediate technical pitfall here. I would however be
very careful and double think my design if I were to use Deferred
objects as part of a blocking process.

kaiyou.


On Thu, Apr 24, 2014 at 7:45 PM, Clayton Daley <clayton.daley at gmail.com>wrote:

> I have a modular application that communicates over RPC connections (with
> both sync and async server/clients available).  I want to migrate some of
> the modules over to Twisted. Currently, all modules inherit important
> utility functions from a parent class.  On paper, I now need two versions
> of this parent class (synchronous & asynchronous) to be inherited by
> modules of the respective types.
>
> I'm looking for ways to maximize the common code between the two versions
> of the parent object. One that comes to mind (motivating the subject of
> this post) would be to write a synchronous interpreter for @inlineCallback
> calls.  For example, here's a synchronous factory function from the parent
> class (already partly reconfigured to be friendly to my idea):
>
>     @classmethod
>     def from_id(cls, id):
>         doc = db.get_document(id) # blocking db call
>         self = cls._new_document(doc) # synchronous initialization stuff
>         self.__init__() # module init code is custom and may block
>         return self
>
> I imagine rewriting this to the following:
>
>     @classmethod
>     @inlineCallbacks
>     def from_id(cls, id):
>         doc = yield db.get_document(id) # blocking/async db call
>         self = cls._new_document(doc) # always synchronous
>         yield self.__init__() # blocking/async call
>         returnValue(self)
>
> Assuming the db connector and init function are appropriate to the
> environment, my gut reaction is that this could (when combined with a
> synchronous implementation of the decorator) run correctly in both places.
> I've read that the @inlineCallback code is complicated so I figured I'd run
> the idea by the experts before diving down that rabbit hole. Does anyone
> see any obvious pitfall? I'm happy to do the legwork to try and build it,
> but I'd also welcome any pointers from your (no doubt extensive) experience
> writing the twisted version.
>
> Thanks in advance!
>
> Clayton Daley
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140424/669f4e3e/attachment-0002.html>

From hawkowl at atleastfornow.net  Fri Apr 25 21:40:41 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Sat, 26 Apr 2014 11:40:41 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre3 Announcement
Message-ID: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>

Hi everyone, here’s a new Twisted 14.0 prerelease for you!

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre3>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre3/NEWS.txt>.

Changes from the previous prerelease include:

	- Making Twisted Agent do HTTPS hostname verification.

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we’re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140426/8e4239e9/attachment.sig>

From hawkowl at atleastfornow.net  Sat Apr 26 02:03:35 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Sat, 26 Apr 2014 16:03:35 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre4 Announcement
In-Reply-To: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
Message-ID: <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>

Hello everyone, due to a silly mistake on my part, I had to merge in a dependency of the ticket I merged in last prerelease.

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre4>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre4/NEWS.txt>.

Changes from the previous prerelease include:

	- Making Twisted Agent do HTTPS hostname verification. (Properly this time)

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we’re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140426/3da50698/attachment.sig>

From hawkowl at atleastfornow.net  Sat Apr 26 02:35:39 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Sat, 26 Apr 2014 16:35:39 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
Message-ID: <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>

Hi everyone, just a few changed bytes to fix some news file entries.

Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.

Changes from the previous prerelease include:

	- Newsfile fixes.

For more information and a full list of changes, check the NEWS.txt file.

Please download the tarballs and test them with your applications, so we can make sure we’re all ready for release!

-hawkowl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140426/cc9e97d7/attachment.sig>

From rgacote at appropriatesolutions.com  Sat Apr 26 08:27:46 2014
From: rgacote at appropriatesolutions.com (Ray Cote)
Date: Sat, 26 Apr 2014 10:27:46 -0400 (EDT)
Subject: [Twisted-Python] Twisted 14.0.0pre3 Announcement
In-Reply-To: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
Message-ID: <11720544.4557.1398522466400.JavaMail.rgacote@raymac.appropriatesolutions.com>

I'm very excited to see the HTTPS hostname verification. 
Excellent news! (off to download...)
--Ray

----- Original Message -----
> From: "HawkOwl" <hawkowl at atleastfornow.net>
> To: "Twisted-Python" <twisted-python at twistedmatrix.com>
> Sent: Friday, April 25, 2014 11:40:41 PM
> Subject: [Twisted-Python] Twisted 14.0.0pre3 Announcement
> 
> Hi everyone, here’s a new Twisted 14.0 prerelease for you!
> 
> Tarballs for this prerelease can be found at
> <http://twistedmatrix.com/Releases/pre/14.0.0pre3>, with the
> changelog at
> <http://twistedmatrix.com/Releases/pre/14.0.0pre3/NEWS.txt>.
> 
> Changes from the previous prerelease include:
> 
> 	- Making Twisted Agent do HTTPS hostname verification.
> 
> For more information and a full list of changes, check the NEWS.txt
> file.
> 
> Please download the tarballs and test them with your applications, so
> we can make sure we’re all ready for release!
> 
> -hawkowl
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 

-- 
Ray Cote, President Appropriate Solutions, Inc. 
We Build Software 
www.AppropriateSolutions.com 603.924.6079 



From trac at twistedmatrix.com  Sun Apr 27 00:05:16 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 27 Apr 2014 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1398578716.08.9176844903609721166@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140427/75388955/attachment-0002.html>

From dreid at dreid.org  Mon Apr 28 12:33:22 2014
From: dreid at dreid.org (David Reid)
Date: Mon, 28 Apr 2014 11:33:22 -0700
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
Message-ID: <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>

Sorry for the delay, I've tested that treq works with pre5 in the following
scenarios.

Python 2.7, no pyopenssl
Python 2.7, pyopenssl==0.14

PyPy 2.2.1, no pyopenssl
PyPy 2.2.1, pyopenssl==0.14

This is in addition to the testing that treq regularly receives on Twisted
Trunk, which has a build currently running:

https://travis-ci.org/dreid/treq/builds/23955777

-David


On Sat, Apr 26, 2014 at 1:35 AM, HawkOwl <hawkowl at atleastfornow.net> wrote:

> Hi everyone, just a few changed bytes to fix some news file entries.
>
> Tarballs for this prerelease can be found at <
> http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <
> http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.
>
> Changes from the previous prerelease include:
>
>         - Newsfile fixes.
>
> For more information and a full list of changes, check the NEWS.txt file.
>
> Please download the tarballs and test them with your applications, so we
> can make sure we’re all ready for release!
>
> -hawkowl
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140428/d6e1a4df/attachment-0002.html>

From hawkowl at atleastfornow.net  Tue Apr 29 04:16:45 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Tue, 29 Apr 2014 18:16:45 +0800
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
Message-ID: <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>

Excellent!

If anyone else has some applications they run, please try out pre5!

-hawkowl

On 29 Apr 2014, at 2:33, David Reid <dreid at dreid.org> wrote:

> Sorry for the delay, I've tested that treq works with pre5 in the following scenarios.
> 
> Python 2.7, no pyopenssl
> Python 2.7, pyopenssl==0.14
> 
> PyPy 2.2.1, no pyopenssl
> PyPy 2.2.1, pyopenssl==0.14
> 
> This is in addition to the testing that treq regularly receives on Twisted Trunk, which has a build currently running:
> 
> https://travis-ci.org/dreid/treq/builds/23955777
> 
> -David
> 
> 
> On Sat, Apr 26, 2014 at 1:35 AM, HawkOwl <hawkowl at atleastfornow.net> wrote:
> Hi everyone, just a few changed bytes to fix some news file entries.
> 
> Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.
> 
> Changes from the previous prerelease include:
> 
>         - Newsfile fixes.
> 
> For more information and a full list of changes, check the NEWS.txt file.
> 
> Please download the tarballs and test them with your applications, so we can make sure we’re all ready for release!
> 
> -hawkowl
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140429/17251206/attachment.sig>

From hs at ox.cx  Tue Apr 29 04:44:37 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 29 Apr 2014 12:44:37 +0200
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
 <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
Message-ID: <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>


On 29 Apr 2014, at 12:16, HawkOwl wrote:

> If anyone else has some applications they run, please try out pre5!

Look at all the ECDHEHEHE: “gnutls-cli -s --crlf  imap.variomedia.de -p 4190”  (and DHEHEHEHE too if you add “--priority='PFS:!ECDHE-RSA'”).

Tests are passing everywhere too.

> On 29 Apr 2014, at 2:33, David Reid <dreid at dreid.org> wrote:
>
>> Sorry for the delay, I've tested that treq works with pre5 in the following scenarios.
>>
>> Python 2.7, no pyopenssl
>> Python 2.7, pyopenssl==0.14
>>
>> PyPy 2.2.1, no pyopenssl
>> PyPy 2.2.1, pyopenssl==0.14
>>
>> This is in addition to the testing that treq regularly receives on Twisted Trunk, which has a build currently running:
>>
>> https://travis-ci.org/dreid/treq/builds/23955777
>>
>> -David
>>
>>
>> On Sat, Apr 26, 2014 at 1:35 AM, HawkOwl <hawkowl at atleastfornow.net> wrote:
>> Hi everyone, just a few changed bytes to fix some news file entries.
>>
>> Tarballs for this prerelease can be found at <http://twistedmatrix.com/Releases/pre/14.0.0pre5>, with the changelog at <http://twistedmatrix.com/Releases/pre/14.0.0pre5/NEWS.txt>.
>>
>> Changes from the previous prerelease include:
>>
>>      - Newsfile fixes.
>>
>> For more information and a full list of changes, check the NEWS.txt file.
>>
>> Please download the tarballs and test them with your applications, so we can make sure we’re all ready for release!
>>
>> -hawkowl
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20140429/bafdbc9b/attachment.sig>

From glyph at twistedmatrix.com  Tue Apr 29 11:43:14 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 29 Apr 2014 10:43:14 -0700
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
 <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
 <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>
Message-ID: <C834781F-755A-45B9-B1B7-F26EFF9ABAE0@twistedmatrix.com>


On Apr 29, 2014, at 3:44 AM, Hynek Schlawack <hs at ox.cx> wrote:

>> If anyone else has some applications they run, please try out pre5!
> 
> Look at all the ECDHEHEHE: “gnutls-cli -s --crlf  imap.variomedia.de -p 4190”  (and DHEHEHEHE too if you add “--priority='PFS:!ECDHE-RSA'”).

Okay I can't even tell when TLS things are a joke any more.

Is 'ECDHEHEHE' a real cipher suite or are you just laughing? ;-)

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140429/8d625f9d/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140429/8d625f9d/attachment-0002.bin>

From hs at ox.cx  Tue Apr 29 12:11:51 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Tue, 29 Apr 2014 20:11:51 +0200
Subject: [Twisted-Python] Twisted 14.0.0pre5 Announcement
In-Reply-To: <C834781F-755A-45B9-B1B7-F26EFF9ABAE0@twistedmatrix.com>
References: <71A8C978-FA2F-4DD3-9E7B-14F6EA923953@atleastfornow.net>
 <5545EFD0-9DED-4BCF-91AA-C218DA62C393@atleastfornow.net>
 <89F32CDC-62ED-4C94-92A6-314647D7DA74@atleastfornow.net>
 <CA+t4pawt3xoebz3rmx90GgLyCXnngHmU90fk9CcmV8PLifdCug@mail.gmail.com>
 <1BD5EB67-705D-47D2-B3BB-57DAE5FD0C01@atleastfornow.net>
 <712C0269-7D7F-422D-B433-0B21C6FC4B07@ox.cx>
 <C834781F-755A-45B9-B1B7-F26EFF9ABAE0@twistedmatrix.com>
Message-ID: <097356BF-3190-45BA-84B1-0DFC3E721DE9@ox.cx>

That's a Hawkowlism. :)

Sent from my phone.

> Am 29.04.2014 um 19:43 schrieb Glyph <glyph at twistedmatrix.com>:
> 
> 
> On Apr 29, 2014, at 3:44 AM, Hynek Schlawack <hs at ox.cx> wrote:
> 
>>> If anyone else has some applications they run, please try out pre5!
>> 
>> Look at all the ECDHEHEHE: “gnutls-cli -s --crlf  imap.variomedia.de -p 4190”  (and DHEHEHEHE too if you add “--priority='PFS:!ECDHE-RSA'”).
> 
> Okay I can't even tell when TLS things are a joke any more.
> 
> Is 'ECDHEHEHE' a real cipher suite or are you just laughing? ;-)
> 
> -g
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140429/2a6f50b6/attachment-0002.html>

From juanito1982 at gmail.com  Wed Apr 30 02:57:27 2014
From: juanito1982 at gmail.com (=?UTF-8?Q?Juan_Antonio_Iba=C3=B1ez_Santorum?=)
Date: Wed, 30 Apr 2014 10:57:27 +0200
Subject: [Twisted-Python] Log level using Twistd
Message-ID: <CAHLYDCuJevGZu=yTZhfjYU8SjVcxasqLkk7w2TrtUt9B9QwxJw@mail.gmail.com>

Hello,

  I am trying to modify loglevel withou result. I configure my app logging
inside the tac file as:

logging.basicConfig(level=logging.ERROR, format="%(asctime)s --- %(name)s -
%(levelname)s - %(message)s")
logfile = DailyLogFile("gdumper.log", "/var/log")
application.setComponent(ILogObserver, FileLogObserver(logfile).emit)

logging.basicConfig call seems do not apply as I get both log.msg and
log.err messages into the log. Is there any other way to set up log level?

Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/a4b3c7d0/attachment-0002.html>

From exarkun at twistedmatrix.com  Wed Apr 30 05:55:23 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 11:55:23 -0000
Subject: [Twisted-Python] Log level using Twistd
In-Reply-To: <CAHLYDCuJevGZu=yTZhfjYU8SjVcxasqLkk7w2TrtUt9B9QwxJw@mail.gmail.com>
References: <CAHLYDCuJevGZu=yTZhfjYU8SjVcxasqLkk7w2TrtUt9B9QwxJw@mail.gmail.com>
Message-ID: <20140430115523.6354.1752102256.divmod.xquotient.43@top>

On 08:57 am, juanito1982 at gmail.com wrote:
>Hello,
>
>  I am trying to modify loglevel withou result. I configure my app 
>logging
>inside the tac file as:

You omitted the imports necessary to interpret the example code with 
certainty but I'll make some guesses.  Next time post a complete, self- 
contained example.

This line:
>
>logging.basicConfig(level=logging.ERROR, format="%(asctime)s --- 
>%(name)s -
>%(levelname)s - %(message)s")

configures the standard library logging module.

This line:
>
>logfile = DailyLogFile("gdumper.log", "/var/log")

creates a log writer from the Twisted logging system that will write to 
a file.

And this line:
>
>application.setComponent(ILogObserver, FileLogObserver(logfile).emit)

makes `twistd` configure Twisted's logging system with a log observer 
that will use that log writer to record log events.

Twisted's logging system and the standard library logging system are 
separate things, though.  Configuring the standard library logging 
system will not make any difference to Twisted's logging system.

If you want log messages emitted by `log.msg` and `log.err` to traverse 
the standard library logging system then the minimum you need to do is 
use `twisted.python.log.PythonLoggingObserver` instead of 
`FileLogObserver`.

`PythonLoggingObserver` observes log events in the Twisted logging 
system and sends them to the standard library logging system.

Once you do that you may be able to configure the standard library 
logging system to behave as you desire.

Jean-Paul
>logging.basicConfig call seems do not apply as I get both log.msg and
>log.err messages into the log. Is there any other way to set up log 
>level?
>
>Regards



From ashfall at twistedmatrix.com  Wed Apr 30 06:19:10 2014
From: ashfall at twistedmatrix.com (Ashwini Oruganti)
Date: Wed, 30 Apr 2014 17:49:10 +0530
Subject: [Twisted-Python]
	=?utf-8?q?What_happens_in_Montr=C3=A9al=E2=80=A6?=
	=?utf-8?q?_PyCon_2014_Sprint_Report?=
In-Reply-To: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
References: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
Message-ID: <CAMFCZ-0dKYyzYPUAt5b=_nDDQ5q65pufGef_Nt5MBv7-_x6MWQ@mail.gmail.com>

On Mon, Apr 21, 2014 at 3:08 AM, Kevin Turner <keturn at keturn.net> wrote:

> Hi folks,
>
> I didn't attend PyCon or the accompanying sprints this year, but judging
> from the commit traffic, many of you did. And I want to know what you
> worked on! Partly so I can live vicariously through your experiences,
> but I know a lot of other people are curious too. Events like this are a
> great way to show our followers and sponsors what happens when a bunch
> of people have a chance to get together and focus on the project.
>
> I've started a sprint report page on the wiki:
> https://twistedmatrix.com/trac/wiki/PyconSprint2014
>
> Feel free to contribute directly to that page, or reply to this email
> (either on or off-list) and I'll see if I can summarize the responses.
>
> For those of you who were at the sprints this year:
>
> * Was this your first time at a development sprint?
>

Yes and no. - Yes, because this was the first time I did any "development"
at a sprint. No, because I just hung out at PyCon sprints last year for a
little while - without actually "sprinting".


>
> * Was it your first time contributing to Twisted?
>

Nope.


>
> * What did you work on?
>
>
I sort of paired with itamar and glyph on the things they were working on.
By "sort of", I mean I just sat there following what they were doing and
asked questions, and as glyph put it - "made sure they don't get
distracted".

I made exarkun release Machinist - and by that I mean I kept poking at him
until he finished the setup.py and frowned and screamed at anyone who
wanted him to work on anything else.

Now the "real" contribution I made -  worked on <
https://twistedmatrix.com/trac/ticket/6698>: designed a state machine for
HostnameEndpoint using Machinist with exarkun. It's nowhere close to being
ready yet, but it's a start.


> * Did you work on something outside Twisted core? I especially want to
> hear about these! For Twisted I can look at the commit logs, but if
> there was activity on related projects, I might not know where to look
> unless you tell me about it.
>

Well, I requested a release of Machinist <
https://github.com/hybridcluster/machinist>. And to release Machinist, we
needed Eliot <https://github.com/hybridcluster/eliot>, and upon my asking,
itamar released it on the first day of the sprints. (It might look like I
am taking all the credits for these, but please note that all I did was
*ask* for the releases, and that too for purely selfish reasons - so I
could work on tm.tl/#6698)


>
> * Any other lasting impressions? Is there something you'll do
> differently now as a result of some conversation or experience you had
> at PyCon?
>

During the sprints, there were numerous discussions about a new TLS API in
Cryptography <
https://mail.python.org/pipermail/cryptography-dev/2014-April/000227.html>.
Although I spent more time frowning at those discussions because they
demanded that time of the people that I wanted to use for designing my FSM,
I now find it interesting. As a result of people screaming TLS all the
time, I might look into working on this in my free time.


>
> I know now that you're starting to get caught up on sleep and the
> poutine is leaving your system, you may have reservations about sharing
> certain things you worked on. Maybe you feel like it's not "ready" yet,
> or it feels out-of-place next to that ticket Glyph worked on where there
> were eight or nine thousand words in the ticket comments alone. Maybe
> some things that happen in Montréal really should stay in Montréal.
>
> But if you had a good experience at the sprints, and it's something
> you'd encourage others to join next time they have the opportunity,
> please share!
>
>
Right so, I was wary of sprinting initially, since it involves trying to
write useful code in a room full of people, with lots of noise and
distractions. I could only attend this one because people insisted I do. It
started with a logical discussion in an attempt to highlight the benefits
of sprints and why people liked sprinting (I should perhaps document it
sometime - maybe a blog post soon), but when I was still scared, people
resorted to: "Just come and sit with us", "there is lots of room,
internets, and powers!", and "you should [just] come over" (and even a
"just try and avoid it. I dare you" :).

And I went over. And it was fun! People threw forks at others for writing
bad code, people signed keys, people talked about writing software, people
talked about snow (okay, that was mostly just me), people talked about
food, about climbing mountains, and people talked about meeting more people.

So yes, if you have the opportunity, you should attend the sprints - if not
to write software, maybe just to hang out with friends, it can be a lot of
fun!


> If you didn't have the experience you were hoping for, but you learned
> something that will make it better for next time, share that too.
> Whether it's something for the sprint organizers or something you wish
> you could tell your earlier self, help us make next time better.
>

Uhm yes, there's this one thing. During the sprints, I worked with exarkun
on designing a Finite State Machine, and once we were done with an initial
design, we checked it into a branch for me to continue working on it later.
When I did look at it later, working on it alone seemed dull and boring as
compared to pairing with people. And well, I think I'm going to have to
take a break from the branch until I forget how much fun the sprints were,
so that I can continue happily working on it alone.

It's not something that can (or should, for that matter) be fixed. It's
just a side-effect of a successful sprint you can't avoid. :)

-Ashwini
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/4e63f720/attachment-0002.html>

From exarkun at twistedmatrix.com  Wed Apr 30 06:21:30 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 12:21:30 -0000
Subject: [Twisted-Python] =?utf-8?q?Some_comments_regarding_=235190_-_=60?=
 =?utf-8?q?=60RFC_6125_=28=22Service_Identity=22=29_implementation=C2=B4?=
 =?utf-8?b?wrQ=?=
Message-ID: <20140430122130.6354.1569482577.divmod.xquotient.52@top>

Hello,

I've just noticed that the changeset for #5190 included some untested 
code.  Specifically, there are no tests for the code which detects 
missing dependencies and emits warnings about them.

I'd previously noticed that this code was broken but hadn't realized 
this was because it was untested.

I don't think there's any disagreement whatsoever over Twisted's testing 
requirements.  All code must have full line and branch coverage (as 
reported by the coverage.py tool).  Developers, please write tests for 
all of your code (and please learn to do test-driven development - it 
will make this task easier, I promise).  Reviewers, please don't accept 
proposed changes that include untested code.

Thanks,
Jean-Paul



From exarkun at twistedmatrix.com  Wed Apr 30 07:03:04 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 13:03:04 -0000
Subject: [Twisted-Python]
 =?utf-8?q?What_happens_in_Montr=C3=A9al=E2=80=A6?=
 =?utf-8?q?_PyCon_2014_Sprint_Report?=
In-Reply-To: <CAMFCZ-0dKYyzYPUAt5b=_nDDQ5q65pufGef_Nt5MBv7-_x6MWQ@mail.gmail.com>
References: <1398029891.28783.108450453.14C118F0@webmail.messagingengine.com>
 <CAMFCZ-0dKYyzYPUAt5b=_nDDQ5q65pufGef_Nt5MBv7-_x6MWQ@mail.gmail.com>
Message-ID: <20140430130304.6354.138533116.divmod.xquotient.58@top>

On 12:19 pm, ashfall at twistedmatrix.com wrote:
>
>And I went over. And it was fun! People threw forks at others for 
>writing
>bad code, [snip]

Possibly the notion of having cutlery thrown at you doesn't sound as 
appealing to people who weren't there (possibly it wasn't terribly 
appealing to the people who *were* there, either).  So I'll just add 
that as far as I know it was only one fork, it was plastic, and I don't 
think this is a common occurrence at Twisted sprints (nor should it be, 
it's all good fun 'til someone loses an eye).  Sorry Glyph!  (But 
seriously don't write code like that ;)

Jean-Paul



From dstainton415 at gmail.com  Wed Apr 30 07:42:30 2014
From: dstainton415 at gmail.com (David Stainton)
Date: Wed, 30 Apr 2014 13:42:30 +0000
Subject: [Twisted-Python] adding endpoint plugins
Message-ID: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>

Greetings,

I wrote a simple IStreamClientEndpointStringParser for using the
SOCKS5ClientEndpoint with Tor:
https://gist.github.com/david415/26a4ed59078d2e27376f

I modified a txsocksx code example for testing the new endpoint descriptor:
https://gist.github.com/david415/7c6040117319cc3b0230

...but I am not sure how to "register" it such that calls to
clientFromString can return this endpoint when the descriptor prefix
matches.

This doc:
https://twistedmatrix.com/documents/13.2.0/api/twisted.internet.interfaces.IStreamClientEndpointStringParser.html
mentions placing the plugin in the twisted.plugins package... however this doc:
http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
suggests that I can also set the PYTHONPATH to a directory:

"""if a directory which has been added to sys.path (typically by
adding it to the PYTHONPATH environment variable) contains a directory
named twisted/plugins/ , each .py file in that directory will be
loaded as a source of plugins."""

I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
something wrong here but after scouring the docs and twisted source
code... I'm just not sure.

This effort is part of solving for Tahoe-LAFS trac ticket 517:
"make tahoe Tor- and I2P-friendly"
https://tahoe-lafs.org/trac/tahoe-lafs/ticket/517

Thanks to Glyph and JP's help I was able to write a foolscap client
side patch to use twisted endpoints. See foolscap trac ticket 203:
http://foolscap.lothar.com/trac/ticket/203#comment:36

str4d has already written the foolscap server side endpoint patch...
Therefore it seems to me the next steps are to create parsers for
endpoints we are interested in supporting... and get Tahoe-LAFS to
register them so that serverFromString and clientFromString will
return the expected endpoint objects.

Cheers!

David



From exarkun at twistedmatrix.com  Wed Apr 30 08:14:16 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 14:14:16 -0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
Message-ID: <20140430141416.6354.407951741.divmod.xquotient.68@top>

On 01:42 pm, dstainton415 at gmail.com wrote:
>Greetings,
>
>
>http://twistedsphinx.funsize.net/projects/core/howto/plugin.html

Note that's a random version of the documentation from who knows how 
long ago.  If you want a random version of the documentation then I 
suggest using http://twisted.readthedocs.org/en/latest/ instead.
>
>suggests that I can also set the PYTHONPATH to a directory:

Sure.  As a development environment trick.  Putting the module defining 
your plugin into *the* twisted/plugins/ directory will reduce your 
runtime cost.  This is purely a deployment decision, though, so if you'd 
rather expand PYTHONPATH then you can.
>
>"""if a directory which has been added to sys.path (typically by
>adding it to the PYTHONPATH environment variable) contains a directory
>named twisted/plugins/ , each .py file in that directory will be
>loaded as a source of plugins."""
>
>I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>something wrong here but after scouring the docs and twisted source
>code... I'm just not sure.

I don't think there's enough information here to debug your problem. 
Try coming up with an http://sscce.org/ or at least providing all of the 
details about your setup - the exact value of PYTHONPATH, the command 
you use to launch the program, the working directory you use, the 
complete, exact filesystem hierarchy starting at the top-most directory 
containing any code you wrote or expect to be in use, etc.

Some random suggestions that have helped other people and might help you 
but who knows:

  * delete all the dropin.cache files you can find and try again
  * delete all the .pyc files you can find and try again
  * put absolute paths into PYTHONPATH, not relative paths
  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put "/foo/bar"
  * Make sure your plugin *provides* the plugin interface and IPlugin. 
This is not the same *implementing* those interfaces.

Good luck,
Jean-Paul



From dstainton415 at gmail.com  Wed Apr 30 09:50:31 2014
From: dstainton415 at gmail.com (David Stainton)
Date: Wed, 30 Apr 2014 15:50:31 +0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430141416.6354.407951741.divmod.xquotient.68@top>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
Message-ID: <CAFN1edo5S3j-TEut96vEhdRonGSvuexeSA5H0+YizpxQqBck2g@mail.gmail.com>

Hi Jean-Paul,

Thanks for the suggestions.
OK... here's my SSCCE:

cd projects/virtualenv-1.11.1/
./virtualenv.py ~/virtenv-endpoints-test
. ~/virtenv-endpoints-test/bin/activate
usewithtor pip install twisted
cd ~/projects
git clone https://github.com/david415/txsocksx.git
cd txsocksx
git checkout endpoint_parsers
usewithtor python setup.py install
cd examples # CWD is now /home/human/projects/txsocksx/examples
cp tor_client_endpoint_parser.py
/home/human/virtenv-endpoints-test/lib/python2.7/site-packages/twisted/plugins
find /home/human/virtenv-endpoints-test/ -name "*.pyc" | xargs rm
find /home/human/virtenv-endpoints-test/ -name "dropin.cache" | xargs rm
python tor-http.py
Traceback (most recent call last):
  File "tor-http.py", line 32, in <module>
    torEndpoint = clientFromString(reactor,
"tor:host=timaq4ygg2iegci7.onion:port=80")
  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-packages/twisted/internet/endpoints.py",
line 1737, in clientFromString
    raise ValueError("Unknown endpoint type: %r" % (aname,))
ValueError: Unknown endpoint type: 'tor'


I also tried the PYTHONPATH trick:

mkdir -p fu/twisted/plugins
cp tor_client_endpoint_parser.py fu/twisted/plugins
PYTHONPATH=/home/projects/txsocks/examples/fu python tor-http.py
Traceback (most recent call last):
  File "tor-http.py", line 32, in <module>
    torEndpoint = clientFromString(reactor,
"tor:host=timaq4ygg2iegci7.onion:port=80")
  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-packages/twisted/internet/endpoints.py",
line 1737, in clientFromString
    raise ValueError("Unknown endpoint type: %r" % (aname,))
ValueError: Unknown endpoint type: 'tor'


I wonder if I am having a deployment problem here or if my code has
got problems.
https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor_client_endpoint_parser.py
https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor-http.py


Cheers!

David

On Wed, Apr 30, 2014 at 2:14 PM,  <exarkun at twistedmatrix.com> wrote:
> On 01:42 pm, dstainton415 at gmail.com wrote:
>>
>> Greetings,
>>
>>
>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>
>
> Note that's a random version of the documentation from who knows how long
> ago.  If you want a random version of the documentation then I suggest using
> http://twisted.readthedocs.org/en/latest/ instead.
>
>>
>> suggests that I can also set the PYTHONPATH to a directory:
>
>
> Sure.  As a development environment trick.  Putting the module defining your
> plugin into *the* twisted/plugins/ directory will reduce your runtime cost.
> This is purely a deployment decision, though, so if you'd rather expand
> PYTHONPATH then you can.
>
>>
>> """if a directory which has been added to sys.path (typically by
>> adding it to the PYTHONPATH environment variable) contains a directory
>> named twisted/plugins/ , each .py file in that directory will be
>> loaded as a source of plugins."""
>>
>> I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>> PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>> something wrong here but after scouring the docs and twisted source
>> code... I'm just not sure.
>
>
> I don't think there's enough information here to debug your problem. Try
> coming up with an http://sscce.org/ or at least providing all of the details
> about your setup - the exact value of PYTHONPATH, the command you use to
> launch the program, the working directory you use, the complete, exact
> filesystem hierarchy starting at the top-most directory containing any code
> you wrote or expect to be in use, etc.
>
> Some random suggestions that have helped other people and might help you but
> who knows:
>
>  * delete all the dropin.cache files you can find and try again
>  * delete all the .pyc files you can find and try again
>  * put absolute paths into PYTHONPATH, not relative paths
>  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put "/foo/bar"
>  * Make sure your plugin *provides* the plugin interface and IPlugin. This
> is not the same *implementing* those interfaces.
>
> Good luck,
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From thostrup at gmail.com  Wed Apr 30 10:43:09 2014
From: thostrup at gmail.com (Henrik Thostrup Jensen)
Date: Wed, 30 Apr 2014 18:43:09 +0200
Subject: [Twisted-Python] Fwd: Trouble with session id reuse/disabling with
	twisted TLS
In-Reply-To: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
References: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
Message-ID: <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>

Hi

I have a twisted service, which uses TLS and I seeing some odd behaviour.

New connections are accepted fine, but if a client tries to re-use a
TLS session id with a new connection, the services rejects the
connection.

Poking at the TLS module I added the following line to help me figure
out what was wrong:

@@ -363,11 +365,13 @@
             except ZeroReturnError:
                 # TLS has shut down and no more TLS data will be received over
                 # this connection.
                 self._shutdownTLS()
                 # Passing in None means the user protocol's connnectionLost
                 # will get called with reason from underlying transport:
                 self._tlsShutdownFinished(None)
             except Error as e:
+                log.msg('_flushReceiveBIO Error: %s' % str(e),
system='protocols.TLS')
                 # Something went pretty wrong.  For example, this might be a
                 # handshake failure (because there were no shared
ciphers, because
                 # a certificate failed to verify, etc).  TLS can no
longer proceed.

(I think the above patch would be a nice addition to twisted as
figuring out what goes wrong in the TLS stack is currently quite
difficult).

This gives me the following:

2014-04-30 15:02:08+0200 [protocols.TLS] _flushReceiveBIO Error:
[('SSL routines', 'SSL_GET_PREV_SESSION', 'session id context
uninitialized')]

I am using the same (cached) context for all incoming connections.

Using openssl s_client -connect host:port I can see that the service
returns a session id and master key.

If I disable session cache with:

ctx.set_session_cache_mode(SSL.SESS_CACHE_OFF)

The s_client command still returns session-id and master-key. Which is
rather unexpected.
(I am not using the CertificateOptions class, just SSL.Context)

Code for context creation can be seen here:
https://github.com/NORDUnet/opennsa/blob/master/opennsa/ctxfactory.py
Without the disabling of session id.

Any idea to what I am doing wrong here?

This is with openssl 1.0.1-4ubuntu5.12, pyOpenSSL 14.1 and Twisted 13.1


  regards, Henrik



From kevin.horn at gmail.com  Wed Apr 30 10:53:02 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 30 Apr 2014 11:53:02 -0500
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430141416.6354.407951741.divmod.xquotient.68@top>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
Message-ID: <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>

On Wed, Apr 30, 2014 at 9:14 AM, <exarkun at twistedmatrix.com> wrote:

> On 01:42 pm, dstainton415 at gmail.com wrote:
>
>> Greetings,
>>
>>
>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>>
>
> Note that's a random version of the documentation from who knows how long
> ago.  If you want a random version of the documentation then I suggest
> using http://twisted.readthedocs.org/en/latest/ instead.
>
>>
>>
Probably from 2011 or so... yup, looks like end of 2011.

Now that the Sphinx transition has actually happened, I suppose I should
probably take that down and perhaps replace it with a pointer to the RTD
version.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/62e18b97/attachment-0002.html>

From exarkun at twistedmatrix.com  Wed Apr 30 11:00:04 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 17:00:04 -0000
Subject: [Twisted-Python] adding endpoint plugins
Message-ID: <20140430170004.6354.1698229865.divmod.xquotient.120@top>

On 03:50 pm, dstainton415 at gmail.com wrote:
>Hi Jean-Paul,
>
>Thanks for the suggestions.
>OK... here's my SSCCE:

It looks like you need to make an instance of 
`TorClientEndpointStringParser`.  If a class `implements´ an interface 
then instances of that class `provide´ the interface.

The plugin system searches for objects that `project´ the requested 
interface.

Jean-Paul
>cd projects/virtualenv-1.11.1/
>./virtualenv.py ~/virtenv-endpoints-test
>. ~/virtenv-endpoints-test/bin/activate
>usewithtor pip install twisted
>cd ~/projects
>git clone https://github.com/david415/txsocksx.git
>cd txsocksx
>git checkout endpoint_parsers
>usewithtor python setup.py install
>cd examples # CWD is now /home/human/projects/txsocksx/examples
>cp tor_client_endpoint_parser.py
>/home/human/virtenv-endpoints-test/lib/python2.7/site- 
>packages/twisted/plugins
>find /home/human/virtenv-endpoints-test/ -name "*.pyc" | xargs rm
>find /home/human/virtenv-endpoints-test/ -name "dropin.cache" | xargs 
>rm
>python tor-http.py
>Traceback (most recent call last):
>  File "tor-http.py", line 32, in <module>
>    torEndpoint = clientFromString(reactor,
>"tor:host=timaq4ygg2iegci7.onion:port=80")
>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site- 
>packages/twisted/internet/endpoints.py",
>line 1737, in clientFromString
>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>ValueError: Unknown endpoint type: 'tor'
>
>
>I also tried the PYTHONPATH trick:
>
>mkdir -p fu/twisted/plugins
>cp tor_client_endpoint_parser.py fu/twisted/plugins
>PYTHONPATH=/home/projects/txsocks/examples/fu python tor-http.py
>Traceback (most recent call last):
>  File "tor-http.py", line 32, in <module>
>    torEndpoint = clientFromString(reactor,
>"tor:host=timaq4ygg2iegci7.onion:port=80")
>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site- 
>packages/twisted/internet/endpoints.py",
>line 1737, in clientFromString
>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>ValueError: Unknown endpoint type: 'tor'
>
>
>I wonder if I am having a deployment problem here or if my code has
>got problems.
>https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor_client_endpoint_parser.py
>https://github.com/david415/txsocksx/blob/endpoint_parsers/examples 
>/tor-http.py
>
>
>Cheers!
>
>David
>
>On Wed, Apr 30, 2014 at 2:14 PM,  <exarkun at twistedmatrix.com> wrote:
>>On 01:42 pm, dstainton415 at gmail.com wrote:
>>>
>>>Greetings,
>>>
>>>
>>>http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>>
>>
>>Note that's a random version of the documentation from who knows how 
>>long
>>ago.  If you want a random version of the documentation then I suggest 
>>using
>>http://twisted.readthedocs.org/en/latest/ instead.
>>>
>>>suggests that I can also set the PYTHONPATH to a directory:
>>
>>
>>Sure.  As a development environment trick.  Putting the module 
>>defining your
>>plugin into *the* twisted/plugins/ directory will reduce your runtime 
>>cost.
>>This is purely a deployment decision, though, so if you'd rather 
>>expand
>>PYTHONPATH then you can.
>>>
>>>"""if a directory which has been added to sys.path (typically by
>>>adding it to the PYTHONPATH environment variable) contains a 
>>>directory
>>>named twisted/plugins/ , each .py file in that directory will be
>>>loaded as a source of plugins."""
>>>
>>>I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>>>PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>>>something wrong here but after scouring the docs and twisted source
>>>code... I'm just not sure.
>>
>>
>>I don't think there's enough information here to debug your problem. 
>>Try
>>coming up with an http://sscce.org/ or at least providing all of the 
>>details
>>about your setup - the exact value of PYTHONPATH, the command you use 
>>to
>>launch the program, the working directory you use, the complete, exact
>>filesystem hierarchy starting at the top-most directory containing any 
>>code
>>you wrote or expect to be in use, etc.
>>
>>Some random suggestions that have helped other people and might help 
>>you but
>>who knows:
>>
>>  * delete all the dropin.cache files you can find and try again
>>  * delete all the .pyc files you can find and try again
>>  * put absolute paths into PYTHONPATH, not relative paths
>>  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put 
>>"/foo/bar"
>>  * Make sure your plugin *provides* the plugin interface and IPlugin. 
>>This
>>is not the same *implementing* those interfaces.
>>
>>Good luck,
>>Jean-Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From p.mayers at imperial.ac.uk  Wed Apr 30 11:26:11 2014
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 30 Apr 2014 18:26:11 +0100
Subject: [Twisted-Python] Fwd: Trouble with session id reuse/disabling
 with twisted TLS
In-Reply-To: <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>
References: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
 <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>
Message-ID: <53613233.2080908@imperial.ac.uk>

On 30/04/14 17:43, Henrik Thostrup Jensen wrote:
> Hi
>
> I have a twisted service, which uses TLS and I seeing some odd behaviour.
>
> New connections are accepted fine, but if a client tries to re-use a
> TLS session id with a new connection, the services rejects the
> connection.

This example:

https://twistedmatrix.com/documents/12.0.0/core/howto/ssl.html#auto2

...seems to work fine for me on both Twisted 12.1.0 / pyOpenSSL 0.13.1 
and Twisted 13.2.0 / pyOpenSSL 0.14. I'm testing using:

openssl s_client -connect host:port -reconnect

...and seeing:

drop connection and then reconnect
CONNECTED(00000003)
---
Reused, TLSv1/SSLv3, Cipher is AES256-GCM-SHA384

^^^^^^ looks ok.

What do you see if you use that openssl command to test? Can you reduce 
it to a sscce with a fake self-signed cert?



From dstainton415 at gmail.com  Wed Apr 30 11:29:27 2014
From: dstainton415 at gmail.com (David Stainton)
Date: Wed, 30 Apr 2014 17:29:27 +0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
References: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
Message-ID: <CAFN1edow42cFsmrTGbTGD4N8DAEaCKmsYH9CHKg0BvBp8Gk5Lw@mail.gmail.com>

ah ok... i made it work. Thanks!

On Wed, Apr 30, 2014 at 5:00 PM,  <exarkun at twistedmatrix.com> wrote:
> On 03:50 pm, dstainton415 at gmail.com wrote:
>>
>> Hi Jean-Paul,
>>
>> Thanks for the suggestions.
>> OK... here's my SSCCE:
>
>
> It looks like you need to make an instance of
> `TorClientEndpointStringParser`.  If a class `implements´ an interface then
> instances of that class `provide´ the interface.
>
> The plugin system searches for objects that `project´ the requested
> interface.
>
> Jean-Paul
>>
>> cd projects/virtualenv-1.11.1/
>> ./virtualenv.py ~/virtenv-endpoints-test
>> . ~/virtenv-endpoints-test/bin/activate
>> usewithtor pip install twisted
>> cd ~/projects
>> git clone https://github.com/david415/txsocksx.git
>> cd txsocksx
>> git checkout endpoint_parsers
>> usewithtor python setup.py install
>> cd examples # CWD is now /home/human/projects/txsocksx/examples
>> cp tor_client_endpoint_parser.py
>> /home/human/virtenv-endpoints-test/lib/python2.7/site-
>> packages/twisted/plugins
>> find /home/human/virtenv-endpoints-test/ -name "*.pyc" | xargs rm
>> find /home/human/virtenv-endpoints-test/ -name "dropin.cache" | xargs rm
>> python tor-http.py
>> Traceback (most recent call last):
>>  File "tor-http.py", line 32, in <module>
>>    torEndpoint = clientFromString(reactor,
>> "tor:host=timaq4ygg2iegci7.onion:port=80")
>>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-
>> packages/twisted/internet/endpoints.py",
>>
>> line 1737, in clientFromString
>>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>> ValueError: Unknown endpoint type: 'tor'
>>
>>
>> I also tried the PYTHONPATH trick:
>>
>> mkdir -p fu/twisted/plugins
>> cp tor_client_endpoint_parser.py fu/twisted/plugins
>> PYTHONPATH=/home/projects/txsocks/examples/fu python tor-http.py
>> Traceback (most recent call last):
>>  File "tor-http.py", line 32, in <module>
>>    torEndpoint = clientFromString(reactor,
>> "tor:host=timaq4ygg2iegci7.onion:port=80")
>>  File "/home/human/virtenv-endpoints-test/local/lib/python2.7/site-
>> packages/twisted/internet/endpoints.py",
>>
>> line 1737, in clientFromString
>>    raise ValueError("Unknown endpoint type: %r" % (aname,))
>> ValueError: Unknown endpoint type: 'tor'
>>
>>
>> I wonder if I am having a deployment problem here or if my code has
>> got problems.
>>
>> https://github.com/david415/txsocksx/blob/endpoint_parsers/examples/tor_client_endpoint_parser.py
>> https://github.com/david415/txsocksx/blob/endpoint_parsers/examples
>> /tor-http.py
>>
>>
>> Cheers!
>>
>> David
>>
>> On Wed, Apr 30, 2014 at 2:14 PM,  <exarkun at twistedmatrix.com> wrote:
>>>
>>> On 01:42 pm, dstainton415 at gmail.com wrote:
>>>>
>>>>
>>>> Greetings,
>>>>
>>>>
>>>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>>>
>>>
>>>
>>> Note that's a random version of the documentation from who knows how long
>>> ago.  If you want a random version of the documentation then I suggest
>>> using
>>> http://twisted.readthedocs.org/en/latest/ instead.
>>>>
>>>>
>>>> suggests that I can also set the PYTHONPATH to a directory:
>>>
>>>
>>>
>>> Sure.  As a development environment trick.  Putting the module defining
>>> your
>>> plugin into *the* twisted/plugins/ directory will reduce your runtime
>>> cost.
>>> This is purely a deployment decision, though, so if you'd rather expand
>>> PYTHONPATH then you can.
>>>>
>>>>
>>>> """if a directory which has been added to sys.path (typically by
>>>> adding it to the PYTHONPATH environment variable) contains a directory
>>>> named twisted/plugins/ , each .py file in that directory will be
>>>> loaded as a source of plugins."""
>>>>
>>>> I'm using twisted 13.2.0 in a virtualenv... and I've tried setting
>>>> PYTHONPATH to a "twisted/plugins" directory no avail. I must be doing
>>>> something wrong here but after scouring the docs and twisted source
>>>> code... I'm just not sure.
>>>
>>>
>>>
>>> I don't think there's enough information here to debug your problem. Try
>>> coming up with an http://sscce.org/ or at least providing all of the
>>> details
>>> about your setup - the exact value of PYTHONPATH, the command you use to
>>> launch the program, the working directory you use, the complete, exact
>>> filesystem hierarchy starting at the top-most directory containing any
>>> code
>>> you wrote or expect to be in use, etc.
>>>
>>> Some random suggestions that have helped other people and might help you
>>> but
>>> who knows:
>>>
>>>  * delete all the dropin.cache files you can find and try again
>>>  * delete all the .pyc files you can find and try again
>>>  * put absolute paths into PYTHONPATH, not relative paths
>>>  * don't put "/foo/bar/twisted/plugins" into PYTHONPATH, put "/foo/bar"
>>>  * Make sure your plugin *provides* the plugin interface and IPlugin.
>>> This
>>> is not the same *implementing* those interfaces.
>>>
>>> Good luck,
>>> Jean-Paul
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From exarkun at twistedmatrix.com  Wed Apr 30 11:35:26 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 30 Apr 2014 17:35:26 -0000
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
References: <20140430170004.6354.1698229865.divmod.xquotient.120@top>
Message-ID: <20140430173526.6354.1069875400.divmod.xquotient.121@top>

On 05:00 pm, exarkun at twistedmatrix.com wrote:
>
>The plugin system searches for objects that `project´ the requested 
>interface.

Bah.  That `provide´ the requested interface.

Jean-Paul



From nicola.cesca at mail.com  Wed Apr 30 11:48:27 2014
From: nicola.cesca at mail.com (Nicola Cesca)
Date: Wed, 30 Apr 2014 19:48:27 +0200
Subject: [Twisted-Python] problem with numpy and twisted xmlrpc
Message-ID: <5361376B.1010207@mail.com>

Hi all,
I'm newbie. I got a lot of problem using xmlrpc and numpy

I'm using numpy to to some staff and then serve the results via a 
twisted/XMLRPC server. If the result is a numpy float 64, I get an 
exception cause probably twisted can't handle this type. Infact is I 
downgrade the result to float32 with x=float(x), everything is ok. This 
is not so good cause if I forget this workaroud somewhere, it's a pain. 
Have you any better solution?

server:

|from  twisted.webimport  xmlrpc,  server
import  numpyas  np

class  MioServer(xmlrpc.XMLRPC):
     """
     An example object to be published.
     """

     def  xmlrpc_test_np(self):
         return  np.sqrt(2)

if  __name__==  '__main__':
     from  twisted.internetimport  reactor
     r=  MioServer()
     reactor.listenTCP(7080,  server.Site(r))
     reactor.run()|

client:

|import  xmlrpclib

if  __name__=='__main__':
     x=xmlrpclib.ServerProxy('http://localhost:7080/')
     print  x.test_np()|

Exception:

|Traceback  (most recent call last):
   File  "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py",  line1446,  in  <module>
     debugger.run(setup['file'],  None,  None)
   File  "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py",  line1092,  in  run
     pydev_imports.execfile(file,  globals,  locals)  #execute the script
   File  "C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py",  line28,  in  <module>
     print  x.test_np()
   File  "C:\Python27\lib\xmlrpclib.py",  line1224,  in  __call__
     return  self.__send(self.__name,  args)
   File  "C:\Python27\lib\xmlrpclib.py",  line1578,  in  __request
     verbose=self.__verbose
   File  "C:\Python27\lib\xmlrpclib.py",  line1264,  in  request
     return  self.single_request(host,  handler,  request_body,  verbose)
   File  "C:\Python27\lib\xmlrpclib.py",  line1297,  in  single_request
     return  self.parse_response(response)
   File  "C:\Python27\lib\xmlrpclib.py",  line1473,  in  parse_response
     return  u.close()
   File  "C:\Python27\lib\xmlrpclib.py",  line793,  in  close
     raise  Fault(**self._stack[0])
xmlrpclib.Fault:  <Fault  8002:  "Can't serialize output: cannot marshal <type 'numpy.float64'> objects">|


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/78a51e82/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nicola_cesca.vcf
Type: text/x-vcard
Size: 174 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/78a51e82/attachment-0002.vcf>

From sank.daniel at gmail.com  Wed Apr 30 12:00:36 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 11:00:36 -0700
Subject: [Twisted-Python] pb objects unexpectedly change identity
Message-ID: <CAKN9TD+BDk_00uNfw=PecB3PLN6bS7UcvqotBP6qxp0cMbHavA@mail.gmail.com>

Dear twisted users,

I think I have found some surprising behavior in perspective broker. I
define a subclass of pb.RemoteCache which has a method managed by a
descriptor. The descriptor keeps track of the instances it manages in a set.

When the RemoteCache is first received by the client, it accesses the
descriptor-ified method inside setCopyableState. At that time the
RemoteCache's id is a certain value X. Then later when the RemoteCache is
notified of a change by the server side Cacheable, it again accesses the
descriptor-ified method, but at this time it's id is Y, and Y!=X.

I attach to this post a simple working example which displays the behavior
described above. To run, first run server.py and then run client.py. You
will see a little bit of output, the most important part being

===
Client received RemoteCache: id=45952496

Asking server to update
TD 45921680 (test.RemoteCache.add) accessed by <test.RemoteCache instance
at 2BD2DC8>: id=45952456
RemoteCache id=45952496
===

To understand the details of the output please see descriptor.py. The id of
the RemoteCache is first reported as 45952496 when the client receives it.
Then, when the descriptor is accessed, the id of the accessing instance is
reported as 45952456, which is different. Then, when in the last line we
print out the id of the RemoteCache we're back to 45952496.

Is there some reason that a RemoteCache's id can change during its life
time?

-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: server.py
Type: text/x-python
Size: 442 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0008.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: resources.py
Type: text/x-python
Size: 3455 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0009.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: client.py
Type: text/x-python
Size: 202 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0010.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: descriptor.py
Type: text/x-python
Size: 553 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/a30c95f0/attachment-0011.py>

From sank.daniel at gmail.com  Wed Apr 30 12:13:18 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 11:13:18 -0700
Subject: [Twisted-Python] problem with numpy and twisted xmlrpc
In-Reply-To: <5361376B.1010207@mail.com>
References: <5361376B.1010207@mail.com>
Message-ID: <CAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA@mail.gmail.com>

Nicola,

I don't know whether this makes sense in the context of xmlrpc, but perhaps
you can use numpy's tostring and fromstring functions. If you do this you
have to also send the datatype so that fromstring knows how to unpack
(that's the part where I'm not sure if this strategy is xmlrpc-ish).

-Daniel



On Wed, Apr 30, 2014 at 10:48 AM, Nicola Cesca <nicola.cesca at mail.com>wrote:

>  Hi all,
> I'm newbie. I got a lot of problem using xmlrpc and numpy
>
>  I'm using numpy to to some staff and then serve the results via a
> twisted/XMLRPC server. If the result is a numpy float 64, I get an
> exception cause probably twisted can't handle this type. Infact is I
> downgrade the result to float32 with x=float(x), everything is ok. This is
> not so good cause if I forget this workaroud somewhere, it's a pain. Have
> you any better solution?
>
> server:
>
> from twisted.web import xmlrpc, serverimport numpy as np
> class MioServer(xmlrpc.XMLRPC):
>     """
>     An example object to be published.
>     """
>
>     def xmlrpc_test_np(self):
>         return np.sqrt(2)
> if __name__ == '__main__':
>     from twisted.internet import reactor
>     r = MioServer()
>     reactor.listenTCP(7080, server.Site(r))
>     reactor.run()
>
> client:
>
> import xmlrpclib
> if __name__=='__main__':
>     x=xmlrpclib.ServerProxy('http://localhost:7080/')
>     print x.test_np()
>
> Exception:
>
> Traceback (most recent call last):
>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1446, in <module>
>     debugger.run(setup['file'], None, None)
>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1092, in run
>     pydev_imports.execfile(file, globals, locals) #execute the script
>   File "C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py", line 28, in <module>
>     print x.test_np()
>   File "C:\Python27\lib\xmlrpclib.py", line 1224, in __call__
>     return self.__send(self.__name, args)
>   File "C:\Python27\lib\xmlrpclib.py", line 1578, in __request
>     verbose=self.__verbose
>   File "C:\Python27\lib\xmlrpclib.py", line 1264, in request
>     return self.single_request(host, handler, request_body, verbose)
>   File "C:\Python27\lib\xmlrpclib.py", line 1297, in single_request
>     return self.parse_response(response)
>   File "C:\Python27\lib\xmlrpclib.py", line 1473, in parse_response
>     return u.close()
>   File "C:\Python27\lib\xmlrpclib.py", line 793, in close
>     raise Fault(**self._stack[0])
> xmlrpclib.Fault: <Fault 8002: "Can't serialize output: cannot marshal <type 'numpy.float64'> objects">
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/7c833b88/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Apr 30 12:56:48 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 30 Apr 2014 11:56:48 -0700
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
 <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>
Message-ID: <D2C6DAF1-E7B0-4DEE-9CED-99758536D2A5@twistedmatrix.com>


On Apr 30, 2014, at 9:53 AM, Kevin Horn <kevin.horn at gmail.com> wrote:

> On Wed, Apr 30, 2014 at 9:14 AM, <exarkun at twistedmatrix.com> wrote:
> On 01:42 pm, dstainton415 at gmail.com wrote:
> Greetings,
> 
> 
> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
> 
> Note that's a random version of the documentation from who knows how long ago.  If you want a random version of the documentation then I suggest using http://twisted.readthedocs.org/en/latest/ instead.
> 
> 
> Probably from 2011 or so... yup, looks like end of 2011.
> 
> Now that the Sphinx transition has actually happened, I suppose I should probably take that down and perhaps replace it with a pointer to the RTD version.

Yes, that would be good.

Speaking of which, does anyone know how to get the default RTD version to point to an actual release?  Since 14.0 is imminent we should probably turn the appropriate knob there.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/9ef356a9/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/9ef356a9/attachment-0002.bin>

From donald at stufft.io  Wed Apr 30 13:09:16 2014
From: donald at stufft.io (Donald Stufft)
Date: Wed, 30 Apr 2014 15:09:16 -0400
Subject: [Twisted-Python] adding endpoint plugins
In-Reply-To: <D2C6DAF1-E7B0-4DEE-9CED-99758536D2A5@twistedmatrix.com>
References: <CAFN1edq3opwu37tSmad-aYG7K_AwTjik-HmzA_YejtAd1LHBrw@mail.gmail.com>
 <20140430141416.6354.407951741.divmod.xquotient.68@top>
 <CA+U=zK2dQbq2V864_=xFQbV4Znag6WHZzahB_SvDDbHLjcCVjg@mail.gmail.com>
 <D2C6DAF1-E7B0-4DEE-9CED-99758536D2A5@twistedmatrix.com>
Message-ID: <74CA910F-B09C-4017-A7C3-A1FF4729B946@stufft.io>


On Apr 30, 2014, at 2:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> 
> On Apr 30, 2014, at 9:53 AM, Kevin Horn <kevin.horn at gmail.com> wrote:
> 
>> On Wed, Apr 30, 2014 at 9:14 AM, <exarkun at twistedmatrix.com> wrote:
>> On 01:42 pm, dstainton415 at gmail.com wrote:
>> Greetings,
>> 
>> 
>> http://twistedsphinx.funsize.net/projects/core/howto/plugin.html
>> 
>> Note that's a random version of the documentation from who knows how long ago.  If you want a random version of the documentation then I suggest using http://twisted.readthedocs.org/en/latest/ instead.
>> 
>> 
>> Probably from 2011 or so... yup, looks like end of 2011.
>> 
>> Now that the Sphinx transition has actually happened, I suppose I should probably take that down and perhaps replace it with a pointer to the RTD version.
> 
> Yes, that would be good.
> 
> Speaking of which, does anyone know how to get the default RTD version to point to an actual release?  Since 14.0 is imminent we should probably turn the appropriate knob there.
> 
> -glyph
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

There is a drop down for default release in the RTD admin panel.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/34219e43/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20140430/34219e43/attachment.sig>

From thostrup at gmail.com  Wed Apr 30 15:16:23 2014
From: thostrup at gmail.com (Henrik Thostrup Jensen)
Date: Wed, 30 Apr 2014 23:16:23 +0200
Subject: [Twisted-Python] Fwd: Trouble with session id reuse/disabling
 with twisted TLS
In-Reply-To: <53613233.2080908@imperial.ac.uk>
References: <CADB1_gSNVbU=NYPvhXdmeJwfoGhMQU3v7_A_oL7P3oY_a2EPYQ@mail.gmail.com>
 <CADB1_gSG9Pqqb0jveS8GbmONiLBsCknONL4wo6fpw-5kGj9F_g@mail.gmail.com>
 <53613233.2080908@imperial.ac.uk>
Message-ID: <CADB1_gTjWxoEvxYu-ZfMOjFGnDZneq9+aE=TbAjMZrhjLNYE1g@mail.gmail.com>

Hi

On 30 April 2014 19:26, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
>
> https://twistedmatrix.com/documents/12.0.0/core/howto/ssl.html#auto2
>
> ...seems to work fine for me on both Twisted 12.1.0 / pyOpenSSL 0.13.1 and
> Twisted 13.2.0 / pyOpenSSL 0.14. I'm testing using:
>
> openssl s_client -connect host:port -reconnect
>
> ...and seeing:
>
> drop connection and then reconnect
> CONNECTED(00000003)
> ---
> Reused, TLSv1/SSLv3, Cipher is AES256-GCM-SHA384
>
> ^^^^^^ looks ok.
>
> What do you see if you use that openssl command to test?

...
drop connection and then reconnect
CONNECTED(00000003)
3074107592:error:1409E0E5:SSL routines:SSL3_WRITE_BYTES:ssl handshake
failure:s3_pkt.c:596:

Same error mesage on the service side.

However, someone pointed me to this:

https://stackoverflow.com/questions/22378442/how-to-disable-session-resumption-in-pyopenssl

Adding in:
ctx.set_options(OP_NO_TICKET)
Fixes the issue (well, the client no longer attemps to reuse the session).
Since there is absolutely nothing performance sensitive about this,
that is good enough for me.

> Can you reduce it to a sscce with a fake self-signed cert?

Might try tomorrow.


-- 
   - Henrik



From sank.daniel at gmail.com  Wed Apr 30 16:40:26 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 15:40:26 -0700
Subject: [Twisted-Python] problem with numpy and twisted xmlrpc
In-Reply-To: <CAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA@mail.gmail.com>
References: <5361376B.1010207@mail.com>
 <CAKN9TDJVEAMU9Z-kWnRB-AyV2XRDDCEwidW4kJd5bH2yw7brjA@mail.gmail.com>
Message-ID: <CAKN9TDJ71LA2EFugAGt9vuhyX=QHmJ=DFyFWs=8Y97+hu3e3Uw@mail.gmail.com>

Nicola,

Since you responded to my last message directly rather than to the list, I
am putting our conversation here for clarity. Please respond to the list
rather than to single users.

>>> I don't know whether this makes sense in the context of xmlrpc, but
perhaps
>>> you can use numpy's tostring and fromstring functions.
>>>

>> I dont know what is from/tostring. But this is another workaround that
add a
>> bug source. Infact it's probably that I'll forget some conversion
somewhere and
>> this will cause a time-expensive task searching where is the problem.
I'd like
>> to make twisted xmlrpc compatible with numpy without converting back and
forth
>> the data.
>> Thankyou
>>

> I get an exception cause probably twisted can't handle this type.

This is not a twisted problem. If you read the error message you put in
your original email you'll see near the end that it says

File "C:\Python27\lib\xmlrpclib.py", line 793, in close raise
Fault(**self._stack[0]) xmlrpclib.Fault: <Fault 8002: "Can't serialize
output: cannot marshal <type 'numpy.float64'> objects">

So you can see that the error is in xmlrpclib, and that the problem is that
marshal does not support numpy arrays.

> I dont know what is from/tostring.

Ok, are you only interested in solutions that use functions you already
know about?

I was going to explain how to deal with this, but since I see you posted an
identical question on stackoverflow I guess I'll go answer it there (since
this isn't a twisted problem after all).

Daniel

On Wed, Apr 30, 2014 at 11:13 AM, Daniel Sank <sank.daniel at gmail.com> wrote:

> Nicola,
>
> I don't know whether this makes sense in the context of xmlrpc, but
> perhaps you can use numpy's tostring and fromstring functions. If you do
> this you have to also send the datatype so that fromstring knows how to
> unpack (that's the part where I'm not sure if this strategy is xmlrpc-ish).
>
> -Daniel
>
>
>
> On Wed, Apr 30, 2014 at 10:48 AM, Nicola Cesca <nicola.cesca at mail.com>wrote:
>
>>  Hi all,
>> I'm newbie. I got a lot of problem using xmlrpc and numpy
>>
>>  I'm using numpy to to some staff and then serve the results via a
>> twisted/XMLRPC server. If the result is a numpy float 64, I get an
>> exception cause probably twisted can't handle this type. Infact is I
>> downgrade the result to float32 with x=float(x), everything is ok. This is
>> not so good cause if I forget this workaroud somewhere, it's a pain. Have
>> you any better solution?
>>
>> server:
>>
>> from twisted.web import xmlrpc, serverimport numpy as np
>> class MioServer(xmlrpc.XMLRPC):
>>     """
>>     An example object to be published.
>>     """
>>
>>     def xmlrpc_test_np(self):
>>         return np.sqrt(2)
>> if __name__ == '__main__':
>>     from twisted.internet import reactor
>>     r = MioServer()
>>     reactor.listenTCP(7080, server.Site(r))
>>     reactor.run()
>>
>> client:
>>
>> import xmlrpclib
>> if __name__=='__main__':
>>     x=xmlrpclib.ServerProxy('http://localhost:7080/')
>>     print x.test_np()
>>
>> Exception:
>>
>> Traceback (most recent call last):
>>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1446, in <module>
>>     debugger.run(setup['file'], None, None)
>>   File "C:\Users\Stone\.eclipse\org.eclipse.platform_4.3.0_1709980481_win32_win32_x86\plugins\org.python.pydev_2.8.2.2013090511\pysrc\pydevd.py", line 1092, in run
>>     pydev_imports.execfile(file, globals, locals) #execute the script
>>   File "C:\Users\Stone\Documents\FastDose\src\Beagle\Prove e test\xmlrpc_client.py", line 28, in <module>
>>     print x.test_np()
>>   File "C:\Python27\lib\xmlrpclib.py", line 1224, in __call__
>>     return self.__send(self.__name, args)
>>   File "C:\Python27\lib\xmlrpclib.py", line 1578, in __request
>>     verbose=self.__verbose
>>   File "C:\Python27\lib\xmlrpclib.py", line 1264, in request
>>     return self.single_request(host, handler, request_body, verbose)
>>   File "C:\Python27\lib\xmlrpclib.py", line 1297, in single_request
>>     return self.parse_response(response)
>>   File "C:\Python27\lib\xmlrpclib.py", line 1473, in parse_response
>>     return u.close()
>>   File "C:\Python27\lib\xmlrpclib.py", line 793, in close
>>     raise Fault(**self._stack[0])
>> xmlrpclib.Fault: <Fault 8002: "Can't serialize output: cannot marshal <type 'numpy.float64'> objects">
>>
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
>
> --
> Daniel Sank
> Department of Physics
> Broida Hall
> University of California
> Santa Barbara, CA 93117
> (805)893-3899
>



-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/974579ae/attachment-0002.html>

From sank.daniel at gmail.com  Wed Apr 30 21:09:32 2014
From: sank.daniel at gmail.com (Daniel Sank)
Date: Wed, 30 Apr 2014 20:09:32 -0700
Subject: [Twisted-Python] pb objects unexpectedly change identity
In-Reply-To: <CAKN9TD+BDk_00uNfw=PecB3PLN6bS7UcvqotBP6qxp0cMbHavA@mail.gmail.com>
References: <CAKN9TD+BDk_00uNfw=PecB3PLN6bS7UcvqotBP6qxp0cMbHavA@mail.gmail.com>
Message-ID: <CAKN9TDJ02ayP-XsxTfyeU5ONn8tFFyHHT1RRyDdD=-FN8G2fqQ@mail.gmail.com>

Dear Twisted users,

To my amazement I have reproduced this strange behaviour in an even simpler
program. Attached are a pb client/server which illustrate unexpected
behaviour of the id of a pb.RemoteCache. To run the example, run server.py
and then client.py (with resources.py in the same working directory).

You will see output like this (line numbers added by me)

====
1. RemoteCache 29403544 initialized
2. Client received RemoteCache: id=29403544
3. RemoteCache: while responding to observe_add I think my id is 29403760
4. Client: The RemoteCache's ide is 29403544
...
====

1. When the RemoteCache is initialized it thinks its id is 29403544.
2. The client agrees that it has received a RemoteCache with id 29403544.
3. When the RemoteCache is inside observe_add it thinks its id is 29403760.
4. The client still thinks the RemoteCache's id is 29403544.

If you let the program run it will continue to loop between the RemoteCache
reporting its id while in observe_add, and the client reporting the id of
the RemoteCache. The two reported ids are always the same unequal numbers.

The question appears to be "Why does the id reported by a RemoteCache's
while inside an observe_* method differ the id reported by objects owning
references to that RemoteCache?"

Thank you for your time,
Daniel




On Wed, Apr 30, 2014 at 11:00 AM, Daniel Sank <sank.daniel at gmail.com> wrote:

> Dear twisted users,
>
> I think I have found some surprising behavior in perspective broker. I
> define a subclass of pb.RemoteCache which has a method managed by a
> descriptor. The descriptor keeps track of the instances it manages in a set.
>
> When the RemoteCache is first received by the client, it accesses the
> descriptor-ified method inside setCopyableState. At that time the
> RemoteCache's id is a certain value X. Then later when the RemoteCache is
> notified of a change by the server side Cacheable, it again accesses the
> descriptor-ified method, but at this time it's id is Y, and Y!=X.
>
> I attach to this post a simple working example which displays the behavior
> described above. To run, first run server.py and then run client.py. You
> will see a little bit of output, the most important part being
>
> ===
> Client received RemoteCache: id=45952496
>
> Asking server to update
> TD 45921680 (test.RemoteCache.add) accessed by <test.RemoteCache instance
> at 2BD2DC8>: id=45952456
> RemoteCache id=45952496
> ===
>
> To understand the details of the output please see descriptor.py. The id
> of the RemoteCache is first reported as 45952496 when the client receives
> it. Then, when the descriptor is accessed, the id of the accessing instance
> is reported as 45952456, which is different. Then, when in the last line we
> print out the id of the RemoteCache we're back to 45952496.
>
> Is there some reason that a RemoteCache's id can change during its life
> time?
>
> --
> Daniel Sank
> Department of Physics
> Broida Hall
> University of California
> Santa Barbara, CA 93117
> (805)893-3899
>



-- 
Daniel Sank
Department of Physics
Broida Hall
University of California
Santa Barbara, CA 93117
(805)893-3899
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20140430/e55ac54b/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: client.py
Type: text/x-python
Size: 190 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/e55ac54b/attachment-0006.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: resources.py
Type: text/x-python
Size: 2994 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/e55ac54b/attachment-0007.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: server.py
Type: text/x-python
Size: 428 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20140430/e55ac54b/attachment-0008.py>

