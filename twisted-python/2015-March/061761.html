<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] __nonzero__ for Deferred
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20__nonzero__%20for%20Deferred&In-Reply-To=%3C6C7CDA4C-FEA6-4AA1-BD09-FA05BCD33E1B%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061756.html">
   <LINK REL="Next"  HREF="029277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] __nonzero__ for Deferred</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20__nonzero__%20for%20Deferred&In-Reply-To=%3C6C7CDA4C-FEA6-4AA1-BD09-FA05BCD33E1B%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] __nonzero__ for Deferred">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Mar 20 16:49:58 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061756.html">[Twisted-Python] __nonzero__ for Deferred
</A></li>
        <LI>Next message (by thread): <A HREF="029277.html">[Twisted-Python] twisted echo ssl client with .p12
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61761">[ date ]</a>
              <a href="thread.html#61761">[ thread ]</a>
              <a href="subject.html#61761">[ subject ]</a>
              <a href="author.html#61761">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Mar 20, 2015, at 4:05 AM, Justin Mazzola Paluska &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jmp at justinmp.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On 03/18/2015 06:03 PM, Glyph Lefkowitz wrote:
</I>&gt;&gt;<i> I'd like to deprecate and remove __nonzero__ on Deferreds.  Occasionally I see code where someone (maybe even me) does &quot;if d:&quot; where they should have been doing &quot;@d.addCallback def cb(result): if result: ...&quot;.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Anybody else have this issue?  Objections?
</I>&gt;<i> 
</I>&gt;<i> How does this interact with code that uses None as a sentinel?
</I>&gt;<i> 
</I>&gt;<i> I have code where I shoot off a recurring process, but want to wait when the first run completes.  I do something along the lines of:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> d = Deferred()
</I>&gt;<i> 
</I>&gt;<i> ... setup everything so it calls my callback every time the loop completes ...
</I>&gt;<i> 
</I>&gt;<i> if d:
</I>&gt;<i>    d.callback(&quot;first time completed!&quot;)
</I>&gt;<i>    d = None
</I>&gt;<i> 
</I>&gt;<i> while most of my code uses the check &quot;if d is not None&quot;, not all of it does (especially the older code).
</I>&gt;<i>    --Justin
</I>
That's why we would have a warning first, so you'd have an opportunity to fix it.  Given that Deferred is so central and widely used, we might want to wait more than the required minimum of one release before turning that warning into an exception.

The &quot;right&quot; way to check against None is always to use &quot;if x is not None&quot;, not &quot;if x&quot;; there are lots of other reasons.

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20150320/be5cf887/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061756.html">[Twisted-Python] __nonzero__ for Deferred
</A></li>
	<LI>Next message (by thread): <A HREF="029277.html">[Twisted-Python] twisted echo ssl client with .p12
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61761">[ date ]</a>
              <a href="thread.html#61761">[ thread ]</a>
              <a href="subject.html#61761">[ subject ]</a>
              <a href="author.html#61761">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
