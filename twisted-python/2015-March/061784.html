<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] LoopingCall.withCount countCallable called	with 0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20LoopingCall.withCount%20countCallable%20called%0A%09with%200&In-Reply-To=%3CCALTAbWn8LqUnkpLcMVb50jo5Nv0XweOWkrdfDaK4HQxDSXOn%2BA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061779.html">
   <LINK REL="Next"  HREF="029319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] LoopingCall.withCount countCallable called	with 0</H1>
    <B>Dario Vinella</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20LoopingCall.withCount%20countCallable%20called%0A%09with%200&In-Reply-To=%3CCALTAbWn8LqUnkpLcMVb50jo5Nv0XweOWkrdfDaK4HQxDSXOn%2BA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] LoopingCall.withCount countCallable called	with 0">d.vinella at gmail.com
       </A><BR>
    <I>Thu Mar 26 03:06:38 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061779.html">[Twisted-Python] LoopingCall.withCount countCallable called	with 0
</A></li>
        <LI>Next message (by thread): <A HREF="029319.html">[Twisted-Python] Reporting total traffic that goes through an SSL	socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61784">[ date ]</a>
              <a href="thread.html#61784">[ thread ]</a>
              <a href="subject.html#61784">[ subject ]</a>
              <a href="author.html#61784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2015-03-24 23:18 GMT+01:00 Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;:

&gt;<i> It would be good to look at how many of these numbers are negative.
</I>&gt;<i>
</I>
Not a single one, running the script for a couple of hours, under any
condition


&gt;<i>
</I>&gt;<i> That seems right.  I think there's a real problem here, since physical
</I>&gt;<i> clocks do just fail, and sometimes NTP slew has to happen.
</I>&gt;<i> LoopingCall.withCount has a clear opportunity to notice that time has gone
</I>&gt;<i> backwards, and can just skip that call.  This is assuming that time has
</I>&gt;<i> gone backwards by a tiny amount for a brief period of time, though, and
</I>&gt;<i> does not address the more complex issue of &quot;the clock was set some
</I>&gt;<i> significant distance into the past&quot;.  LoopingCall still isn't going to be
</I>&gt;<i> able to deal with large amounts of clock drift, we'd need a monotonic
</I>&gt;<i> version for that :).
</I>&gt;<i>
</I>&gt;<i> I must add that the anomaly doesn't appear right at the start, but after
</I>&gt;<i> tens of seconds, mostly when the system is under medium/heavy load.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Even seriously broken clocks don't go backwards a *lot*. ;-)
</I>&gt;<i>
</I>&gt;<i>
</I>I can reproduce the anomaly with my previous script on my linux machine
with or without ntp (systemd-timesyncd) enabled and on a macbook (with
kqreactor).
The only difference is that since the mac is beefier than the linux box I
need to stress it more to trigger the anomaly (a couple of vms + some heavy
apps)
I think the ntp cause can be excluded since the issue is reproducible
without it and furthermore because once triggered the anomaly happens too
frequently to think the ntpd applies so many (negative) fixes in such short
time.
Here it is a log where I print a dot when the calls arg is 1, the value if
not 1, each dot is separated by 0.02s

<A HREF="https://gist.github.com/dvinella/73e5e45a04c428f037bf">https://gist.github.com/dvinella/73e5e45a04c428f037bf</A>


&gt;<i> Thanks for reporting!  Can you open a ticket?
</I>&gt;<i>
</I>
Sure, I'll open it!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20150326/b323bfab/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061779.html">[Twisted-Python] LoopingCall.withCount countCallable called	with 0
</A></li>
	<LI>Next message (by thread): <A HREF="029319.html">[Twisted-Python] Reporting total traffic that goes through an SSL	socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61784">[ date ]</a>
              <a href="thread.html#61784">[ thread ]</a>
              <a href="subject.html#61784">[ subject ]</a>
              <a href="author.html#61784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
