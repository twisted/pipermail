<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Reporting total traffic that goes through an	SSL socket
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Reporting%20total%20traffic%20that%20goes%20through%20an%0A%09SSL%20socket&In-Reply-To=%3CD26A0921-0A48-4711-BAC1-5D9ABA49A9BE%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="029319.html">
   <LINK REL="Next"  HREF="061786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Reporting total traffic that goes through an	SSL socket</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Reporting%20total%20traffic%20that%20goes%20through%20an%0A%09SSL%20socket&In-Reply-To=%3CD26A0921-0A48-4711-BAC1-5D9ABA49A9BE%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Reporting total traffic that goes through an	SSL socket">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Mar 25 14:20:30 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="029319.html">[Twisted-Python] Reporting total traffic that goes through an SSL	socket
</A></li>
        <LI>Next message (by thread): <A HREF="061786.html">[Twisted-Python] Reporting total traffic that goes through an SSL socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61783">[ date ]</a>
              <a href="thread.html#61783">[ thread ]</a>
              <a href="subject.html#61783">[ subject ]</a>
              <a href="author.html#61783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Mar 25, 2015, at 1:35 AM, Burak Arslan &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">burak.arslan at arskom.com.tr</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hello All,
</I>&gt;<i> 
</I>&gt;<i> I'm using twisted for implementing a custom protocol via SSL.
</I>&gt;<i> 
</I>&gt;<i> I've been wondering though, is there an easy way of counting the number
</I>&gt;<i> of bytes that go in and out of the socket, including SSL overhead?
</I>
Well, &quot;easy&quot; is relative :).

Internally in Twisted, TLS is implemented as a wrapper protocol that sits on a low-level transport, and acts as a transport for your protocol, and a protocol for the TCP (or other stream-based) transport.  Older APIs like connectSSL, listenSSL, and .startTLS on a protocol somewhat obscure this, and there's no nice way to expose it.

However, there is a ticket in progress: <A HREF="https://twistedmatrix.com/trac/ticket/5642">https://twistedmatrix.com/trac/ticket/5642</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/5642">https://twistedmatrix.com/trac/ticket/5642</A>&gt; which has some code that demonstrates how to make the TLS stuff &quot;purely&quot; a wrapper all the way from the endpoint to your application code.

What you need to do is write your own wrapper protocol and interpose it below the TLS transport (act as the transport for the TLS protocol, and the protocol for the TCP transport).

If it is not obvious how to do this from the documentation for twisted.protocols.policies.ProtocolWrapper and the code in the aforementioned ticket, I (or someone else) can elaborate.

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20150325/2070885d/attachment-0005.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="029319.html">[Twisted-Python] Reporting total traffic that goes through an SSL	socket
</A></li>
	<LI>Next message (by thread): <A HREF="061786.html">[Twisted-Python] Reporting total traffic that goes through an SSL socket
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61783">[ date ]</a>
              <a href="thread.html#61783">[ thread ]</a>
              <a href="subject.html#61783">[ subject ]</a>
              <a href="author.html#61783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
