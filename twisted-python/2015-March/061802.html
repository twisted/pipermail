<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IRCClient (ircLogBot.py) send a message every	5 minutes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IRCClient%20%28ircLogBot.py%29%20send%20a%20message%20every%0A%095%20minutes&In-Reply-To=%3CD1E697BE-4C22-4FD6-B41B-42D4A7B78749%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="029324.html">
   <LINK REL="Next"  HREF="029328.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IRCClient (ircLogBot.py) send a message every	5 minutes</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IRCClient%20%28ircLogBot.py%29%20send%20a%20message%20every%0A%095%20minutes&In-Reply-To=%3CD1E697BE-4C22-4FD6-B41B-42D4A7B78749%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] IRCClient (ircLogBot.py) send a message every	5 minutes">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Mar 30 14:39:15 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="029324.html">[Twisted-Python] IRCClient (ircLogBot.py) send a message every 5	minutes
</A></li>
        <LI>Next message (by thread): <A HREF="029328.html">[Twisted-Python] Twisted Project Job Posting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61802">[ date ]</a>
              <a href="thread.html#61802">[ thread ]</a>
              <a href="subject.html#61802">[ subject ]</a>
              <a href="author.html#61802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Mar 26, 2015, at 11:18 AM, Laurens Vets &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">laurens at daemon.be</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to get to know the Twisted framework by extending the ircLogBot.py example. I want to be able to get a list of all names in a channel (by sending NAMES) and I want to rerun this every 5 minutes.
</I>&gt;<i> 
</I>&gt;<i> I've been able to get the NAMES on a channel join by doing this in LogBot:
</I>&gt;<i> 
</I>&gt;<i> def joined(self, channel):
</I>&gt;<i>    self.names(channel)
</I>&gt;<i> 
</I>&gt;<i> def names(self, channel):
</I>&gt;<i>    self.sendLine(&quot;NAMES %s&quot; % channel)
</I>&gt;<i> 
</I>&gt;<i> def irc_unknown(self, prefix, command, params):
</I>&gt;<i>    if command == 'RPL_NAMREPLY':
</I>&gt;<i>        self.handle_namereply(*params)
</I>&gt;<i> 
</I>&gt;<i> def handle_namereply(self, myname, channeltype, channelname, users):
</I>&gt;<i>    self.logger.log(&quot;Handling namereply %r %r %r %r&quot; % (myname, channeltype, channelname, users))
</I>&gt;<i> 
</I>&gt;<i> The problem I face is that I have no idea where to put a LoopingCall to run this same command every 5 minutes. Where would be the best place to place this?
</I>
I would probably start such a LoopingCall in LogBot.connectionMade, and make sure to stop it in LogBot.connectionLost.  That way only an active connection will attempt to send NAMES to itself.

Does that make sense for your application?

Thanks for using Twisted,

-glyph

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="029324.html">[Twisted-Python] IRCClient (ircLogBot.py) send a message every 5	minutes
</A></li>
	<LI>Next message (by thread): <A HREF="029328.html">[Twisted-Python] Twisted Project Job Posting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61802">[ date ]</a>
              <a href="thread.html#61802">[ thread ]</a>
              <a href="subject.html#61802">[ subject ]</a>
              <a href="author.html#61802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
