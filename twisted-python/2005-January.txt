From sese at 263.net  Sun Jan  2 23:42:34 2005
From: sese at 263.net (SeSe)
Date: Mon, 03 Jan 2005 12:42:34 +0800
Subject: [Twisted-Python] Problem with Echoserver (TCP), Help!
Message-ID: <41D8CD3A.6030802@263.net>

Hi, I am new to Twisted. I use a Twisted 1.3.0 on MS Windows XP Home 
Edition, my python version is 2.3

I try the TCP echoserv.py and echoclient.py example. But the client 
always fail with following message:

Unhandled error in Deferred:
Traceback (most recent call last):
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\default.py", line 134, in
 mainLoop
    self.runUntilCurrent()
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\base.py", line 423, in ru
nUntilCurrent
    call.func(*call.args, **call.kw)
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 384, in res
olveAddress
    d.addCallbacks(self._setRealAddress, self.failIfNotConnected)
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\defer.py", line 205, in a
ddCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\defer.py", line 338, in _
runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 388, in _se
tRealAddress
    self.doConnect()
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 403, in doConnect
    r, w, e = select.select([], [], [self.fileno()], 0.0)
select.error: (10022, '')


What is the matter? Thanks.

-SeSe







From foom at fuhm.net  Mon Jan  3 09:42:32 2005
From: foom at fuhm.net (James Y Knight)
Date: Mon, 3 Jan 2005 09:42:32 -0500
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <B3565CB4-5D95-11D9-8D68-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2004-12-26 03:34:27.400000:
  Bugs opened: 12   Bugs closed: 3   Total open bugs: 328 (+9)
   Urgent: 13 (+0)
   Bug: 127 (+4)
   Feature: 123 (+2)
   Wish: 65 (+3)

New / Reopened Bugs
______________________
                     ==== Bug ====
[PATCH] Real-world Shoutcast servers require user-agent header  (9 
hours ago)
        http://twistedmatrix.com/bugs/issue851 opened by miket

at least one egrep option in twisted-dev.el (CVS) not supported on Mac 
OS X 10.3.7  (10 hours ago)
        http://twistedmatrix.com/bugs/issue849 opened by ytrewq1

[CHAT] IRCClient userQuit is missing a parameter  (yesterday)
CLOSED http://twistedmatrix.com/bugs/issue848 opened by orbitz

[CONCH] Bare except in twisted/conch/checkers.py line 87  (3 days ago)
        http://twistedmatrix.com/bugs/issue846 opened by spiv

[PATCH] locating urlencoded files in filepath  (6 days ago)
CLOSED http://twistedmatrix.com/bugs/issue841 opened by nik

callRemote raises AttributeError when remote method does not exist, 
conflicts with possible AttributeError inside method  (5 days ago)
        http://twistedmatrix.com/bugs/issue843 opened by thomasvs

[CONCH, DOCUMENTATION] sshsimpleserver raises AttributeError (no 
attribute 'closed')  (5 days ago)
CLOSED http://twistedmatrix.com/bugs/issue842 opened by spiv

                     ==== Feature ====
[CONCH] [PATCH] Allow deferred retrieval of authorized keys  (3 days 
ago)
        http://twistedmatrix.com/bugs/issue847 opened by spiv

[TRIAL] twisted.enterprise.adbapi.ConnectionPool() shouldn't require 
.start()  (6 days ago)
        http://twistedmatrix.com/bugs/issue840 opened by edsuom

                     ==== Wish ====
Return PB Exceptions that have registered unjellyable  (4 days ago)
        http://twistedmatrix.com/bugs/issue844 opened by justinj

default search string for twisted-dev-grep (twisted-dev.el)?  (10 hours 
ago)
        http://twistedmatrix.com/bugs/issue850 opened by ytrewq1

TAGS table creation for Twisted source  (4 days ago)
        http://twistedmatrix.com/bugs/issue845 opened by ytrewq1

Bugs Closed
______________________
                     ==== Bug ====
[CHAT] IRCClient userQuit is missing a parameter  (yesterday)
        http://twistedmatrix.com/bugs/issue848 opened by orbitz, closed 
by exarkun

[PATCH] locating urlencoded files in filepath  (6 days ago)
        http://twistedmatrix.com/bugs/issue841 opened by nik, closed by 
spiv

[CONCH, DOCUMENTATION] sshsimpleserver raises AttributeError (no 
attribute 'closed')  (5 days ago)
        http://twistedmatrix.com/bugs/issue842 opened by spiv, closed by 
z3p




From jdb at mail.nerc-essc.ac.uk  Mon Jan  3 18:00:01 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Mon,  3 Jan 2005 23:00:01 +0000
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
Message-ID: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>

Hi all,

I'm new to Twisted, and I'm trying to create an implementation of a client
program that communicates over a network with a server using a protocol called
Styx.  (In case you're interested, Styx is a protocol for distributed systems,
as used by the Inferno operating system:
http://www.vitanuova.com/inferno/papers/styx.html.)  In short, Styx is a pretty
simple call-response type of protocol, in which the client sends a T-message
and waits for the corresponding R-message from the server.  There is a
one-to-one correspondence between T- and R-messages.

I understand that Twisted is an event-driven framework and I have written a
basic client program.  My initial attempt has involved creating a StyxProtocol
class that inherits from protocol.Protocol, in which I override key methods
such as dataReceived() and connectionMade().  Having created this protocol and
told it how to respond to messages that arrive, I created a simple Factory
class, then set the whole thing running with reactor.run().  It works fine, but
it's not quite in the form I'd like.  In my current attempt, what I've done is
essentially to create a load of callbacks and "press GO".  Once I've set the
program running I can't interact with it until one of the methods calls
reactor.stop().

What I'd like to be able to do is illustrated by the following pseudo-Python. 
This could be a script or could be typed into an interactive Python shell:

conn = StyxConnection("myserver.remotehost.com", 6666)
conn.connect() # Starts the reactor going and performs handshakes
# The connection is now open and I can interact with it
myRemoteFile = conn.openFile("/path/to/myfile") # Gets handle to file on remote
server, by exchange of a few messages
data = myRemoteFile.read() # Reads data from the remote file, again by exchange
of some messages
conn.close() # Closes the connection to the remote server and stops the reactor

How can I do this with the Twisted framework?  As far as I can tell,
reactor.run() will not return until something calls reactor.stop().  I could
achieve what I want using threads (I think), but I'd like to avoid this if
possible.

I'm sure I'm not the first to ask this sort of question, but I've looked through
the docs and example code and haven't been able to track down an answer.  I'd
be very grateful for any pointers that anyone could offer.

Regards,
Jon

-- 
--------------------------------------------------------------
Dr Jon Blower              Tel: +44 118 378 5213 (direct line)
Technical Director         Tel: +44 118 378 8741 (ESSC)
Reading e-Science Centre   Fax: +44 118 378 6413
ESSC                       Email: jdb at mail.nerc-essc.ac.uk
University of Reading
3 Earley Gate
Reading RG6 6AL, UK
--------------------------------------------------------------

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.



From itamar at itamarst.org  Mon Jan  3 21:41:42 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 03 Jan 2005 21:41:42 -0500
Subject: [Twisted-Python] Problem with Echoserver (TCP), Help!
In-Reply-To: <41D8CD3A.6030802@263.net>
References: <41D8CD3A.6030802@263.net>
Message-ID: <1104806503.8384.346.camel@sheriffpony>

On Mon, 2005-01-03 at 12:42 +0800, SeSe wrote:


>   File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 403, in doConnect
>     r, w, e = select.select([], [], [self.fileno()], 0.0)
> select.error: (10022, '')

Could you file a bug in twistedmatrix.com/bugs/? Unless someone has a
suggestion.





From prabaharpython at yahoo.co.in  Tue Jan  4 03:27:47 2005
From: prabaharpython at yahoo.co.in (praba mosas)
Date: Tue, 4 Jan 2005 08:27:47 +0000 (GMT)
Subject: [Twisted-Python] which twisted version is compatible for Linux
	machine
In-Reply-To: <1104806503.8384.346.camel@sheriffpony>
Message-ID: <20050104082747.88798.qmail@web8204.mail.in.yahoo.com>

Dear All,
   I want to install twisted  in my machine which have
gobolinux.  I want to  know which version of twisted
is
compatible for this gobolinux.  If anyone know
regarding
this mail me.

regards
Prabahar


________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From andrew-twisted at puzzling.org  Tue Jan  4 04:30:27 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 4 Jan 2005 20:30:27 +1100
Subject: [Twisted-Python] which twisted version is compatible for Linux
	machine
In-Reply-To: <20050104082747.88798.qmail@web8204.mail.in.yahoo.com>
References: <1104806503.8384.346.camel@sheriffpony>
	<20050104082747.88798.qmail@web8204.mail.in.yahoo.com>
Message-ID: <20050104093027.GC5034@localhost.localdomain>

On Tue, Jan 04, 2005 at 08:27:47AM +0000, praba mosas wrote:
> Dear All,
>    I want to install twisted  in my machine which have
> gobolinux.  I want to  know which version of twisted
> is
> compatible for this gobolinux.  If anyone know
> regarding
> this mail me.

According to distrowatch.com, all recent releases of gobolinux have at least
Python 2.2, so any version of Twisted should work just fine.  I'd recommend
the current release, 1.3.0.

-Andrew.




From prabaharpython at yahoo.co.in  Tue Jan  4 09:23:52 2005
From: prabaharpython at yahoo.co.in (praba mosas)
Date: Tue, 4 Jan 2005 14:23:52 +0000 (GMT)
Subject: [Twisted-Python] How to install twisted in gobolinux using Receipes
In-Reply-To: <20050104082747.88798.qmail@web8204.mail.in.yahoo.com>
Message-ID: <20050104142352.75141.qmail@web8207.mail.in.yahoo.com>

Dear All,
     If anybody using twisted in Gobolinux please
clear
my doubt.  How to install twisted in Gobolinux using
Receipes?. Here two ways to install Twisted one is
Using Receipes another Using Install Package command
but I want to know only how to install Twisted using
Receipes. The main problem is Receipes not available
for twisted in Gobolinux
    Please ignore this message other platform using 
People because only gobolinux using community can
clear
this.

BY
Prabahar

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From orbitz at ezabel.com  Tue Jan  4 12:16:09 2005
From: orbitz at ezabel.com (orbitz)
Date: Tue, 04 Jan 2005 12:16:09 -0500
Subject: [Twisted-Python] How to install twisted in gobolinux using
	Receipes
In-Reply-To: <20050104142352.75141.qmail@web8207.mail.in.yahoo.com>
References: <20050104142352.75141.qmail@web8207.mail.in.yahoo.com>
Message-ID: <41DACF59.4050405@ezabel.com>

A Gobolinux mailing list sounds like a better place to ask such a question.

praba mosas wrote:

>Dear All,
>     If anybody using twisted in Gobolinux please
>clear
>my doubt.  How to install twisted in Gobolinux using
>Receipes?. Here two ways to install Twisted one is
>Using Receipes another Using Install Package command
>but I want to know only how to install Twisted using
>Receipes. The main problem is Receipes not available
>for twisted in Gobolinux
>    Please ignore this message other platform using 
>People because only gobolinux using community can
>clear
>this.
>
>BY
>Prabahar
>
>________________________________________________________________________
>Yahoo! India Matrimony: Find your life partner online
>Go to: http://yahoo.shaadi.com/india-matrimony
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
>  
>





From mohamed at your-site.com  Tue Jan  4 16:37:23 2005
From: mohamed at your-site.com (Mohamed Lrhazi)
Date: Tue, 04 Jan 2005 16:37:23 -0500
Subject: [Twisted-Python] nevow.compy.CannotAdapt: WovenContext...
Message-ID: <1104874643.31904.249.camel@6 webmail.nil8r.net 

I copied some code from an existing site of mine to a new machine and
boom.... does not work anymore :) the code is based on the guard
example... I actually went on to remove more and more of my code till I
realized that even with the basic example itself it fails after the user
logged in :

It seems the code that fails is:

def render_sessionId(self, context, data):
		sess = inevow.ISession(context)
		return context.tag[sess.uid]

The complete trace follows. Any ideas? I probably forget to install
something... did I?

this is gentoo standard ebuilds for python, twisted and nevow:


2005/01/04 16:31 EST [HTTPChannel,0,127.0.0.1] Traceback (most recent
call last):
          File
"/usr/lib/python2.3/site-packages/twisted/protocols/http.py", line 557,
in requestReceived
            self.process()
          File "/usr/lib/python2.3/site-packages/nevow/appserver.py",
line 129, in process
            return self.site.getResourceFor(
          File
"/usr/lib/python2.3/site-packages/twisted/internet/defer.py", line 214,
in addCallback
            callbackKeywords=kw)
          File
"/usr/lib/python2.3/site-packages/twisted/internet/defer.py", line 205,
in addCallbacks
            self._runCallbacks()
        --- <exception caught here> ---
          File
"/usr/lib/python2.3/site-packages/twisted/internet/defer.py", line 338,
in _runCallbacks
            self.result = callback(self.result, *args, **kw)
          File "/usr/lib/python2.3/site-packages/nevow/appserver.py",
line 132, in <lambda>
            lambda resource: inevow.IResource(resource).renderHTTP(self)
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
363, in renderHTTP
            return self.flattenFactory(doc, ctx, writer, finisher)
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
227, in deferFlattenFactory
            return deferflatten(stan, ctx, writer).addCallback(finisher)
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
223, in deferflatten
            drive()
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
207, in drive
            deferred, returner = iterable.next()
          File "/usr/lib/python2.3/site-packages/nevow/flat/ten.py",
line 71, in iterflatten
            for item in gen:
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 89, in
TagSerializer
            yield serialize(toBeRenderedBy,context)
          File "/usr/lib/python2.3/site-packages/nevow/flat/ten.py",
line 53, in serialize
            return serializer(obj, context)
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 215, in
DirectiveSerializer
            return serialize(renderer, context)
          File "/usr/lib/python2.3/site-packages/nevow/flat/ten.py",
line 53, in serialize
            return serializer(obj, context)
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 199, in
MethodSerializer
            return FunctionSerializer(original, context, nocontext)
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 184, in
FunctionSerializer
            result = original(context, data)
          File "<string>", line 209, in render_sessionId

          File "/usr/lib/python2.3/site-packages/nevow/compy.py", line
73, in __call__
            raise CannotAdapt("%s (type %s) cannot be adapted to %s." %
        nevow.compy.CannotAdapt: WovenContext(tag=Tag('',
specials={'render': Unset}, children=[''])) (type
nevow.context.WovenContext) cannot be adapted to <class
'nevow.inevow.ISession'>.






From michi+twisted at relay3.jackal-net.at  Tue Jan  4 17:04:20 2005
From: michi+twisted at relay3.jackal-net.at (Michael Lang)
Date: Tue, 04 Jan 2005 23:04:20 +0100
Subject: [Twisted-Python] Beginners confusion on components tutorial
Message-ID: <1104876260.22279.11.camel@flocke.chester.at>

Hi TwistedListUsers,

ive started to work with twisted, and learned from the howtos/docs on
the webpage.

I got a little bit confused on trying to understand how components work
in twisted as describe on
"http://twistedmatrix.com/documents/current/howto/components"

ive tryed the HairDryer Example and got wrong as the expected 
"AdaptToAmericanSocket" didnt work as described in the example.

as my understanding of this the example code of the HairDryer Class
is wrong, as it should call
"assert socket.voltage() == 110, 'BOOM'" 
as
"assert adapted.voltage() == 110, 'BOOM'"

which makes the example work as expected.

if im wrong please correct me and point me to my miss understanding of
the example and components.

thanks,
kind regards
Michael Lang

-- 
Michael Lang <michi+twisted at relay3.jackal-net.at>




From andrew-twisted at puzzling.org  Tue Jan  4 17:20:40 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 5 Jan 2005 09:20:40 +1100
Subject: [Twisted-Python] Beginners confusion on components tutorial
In-Reply-To: <1104876260.22279.11.camel@flocke.chester.at>
References: <1104876260.22279.11.camel@flocke.chester.at>
Message-ID: <20050104222039.GD5034@localhost.localdomain>

On Tue, Jan 04, 2005 at 11:04:20PM +0100, Michael Lang wrote:
[...]
> 
> as my understanding of this the example code of the HairDryer Class
> is wrong, as it should call
> "assert socket.voltage() == 110, 'BOOM'" 
> as
> "assert adapted.voltage() == 110, 'BOOM'"
> 
> which makes the example work as expected.

Known bug, fixed in SVN:
    http://twistedmatrix.com/users/warner/doc-latest/core/howto/components.html

Now's probably a good time to remind people that you can see the development
version of the howtos here, updated after every commit:
    http://twistedmatrix.com/users/warner/doc-latest/

-Andrew.




From glyph at divmod.com  Wed Jan  5 10:18:13 2005
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Wed, 05 Jan 2005 10:18:13 -0500
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
Message-ID: <1104938293.5854.17.camel@localhost>

On Mon, 2005-01-03 at 23:00 +0000, Jon Blower wrote:

> I'm sure I'm not the first to ask this sort of question, but I've looked through
> the docs and example code and haven't been able to track down an answer.  I'd
> be very grateful for any pointers that anyone could offer.

This is why I often suggest the use of 'twistd' for running your Twisted
code - the reactor.run() call is confusing, because it makes it seem as
though it's your code's responsibility to start and stop the reactor,
and possibly to do things before or after that has happened.

Even if you need to start the reactor yourself - for example, if you are
writing a GUI program - it is best to abstract out the reactor
start/stop far from your application code.

If I understand the core of your question correctly, it's "How do I use
Twisted at the interactive Python interpreter?"

There is no easy answer.  Twisted is not well-suited towards use at a
normal Python prompt, because the normal Python prompt is not
event-driven.  There have been a few different forays into interactive
Python/Twisted integration.  The 1.3.0 release includes a 'manhole'
client/server pair which will allow you to log in and run python code
inside a running Twisted process.  JP Calderone has recently done quite
a bit of work on a new, better interactive interpreter (including SSH
access and command-line editing) which looks more like a regular Python
prompt.

Although there are several different avenues you can take to get there,
what you probably want to arrive at is a Twisted server that is
listening on one port for Python commands, and on another for whatever
protocol it is you are trying to implement.  For convenience, it may be
useful for the "port" that it's listening on to actually be standard
I/O.  This is possible using twisted.internet.stdio.





From jdb at mail.nerc-essc.ac.uk  Wed Jan  5 10:44:33 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Wed,  5 Jan 2005 15:44:33 +0000
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104938293.5854.17.camel@localhost>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<1104938293.5854.17.camel@localhost>
Message-ID: <1104939873.41dc0b61b1ca7@www.nerc-essc.ac.uk>

Hi Glyph,

Thanks very much for your reply, very useful.  I've had another think about my
problem and I guess it boils down to this question: when I'm writing a client
program, how can I simulate a synchronous function call (avoiding callbacks)
like this pseudo-Python, which sends a message then returns its reply:

def sendMessage(message):
   transport.send(message)
   # Wait for reply to arrive
   reply = getReplySomehow()
   return reply

In the protocol I am implementing, I expect most messages to be replied to
immediately by the server so this function would not block for long (I'm only
writing a simple, naive client at the moment).  The event-driven model seems to
me to be great for implementing servers, but a little more awkward for
implementing simple client programs.  Is this comment fair?

I can see how I would implement the above pseudo-function using threads (indeed
I have done so in Java) - perhaps this is my only option to avoid blocking?

Thanks,
Jon

Quoting Glyph Lefkowitz <glyph at divmod.com>:

> On Mon, 2005-01-03 at 23:00 +0000, Jon Blower wrote:
> 
> > I'm sure I'm not the first to ask this sort of question, but I've looked
> through
> > the docs and example code and haven't been able to track down an answer. 
> I'd
> > be very grateful for any pointers that anyone could offer.
> 
> This is why I often suggest the use of 'twistd' for running your Twisted
> code - the reactor.run() call is confusing, because it makes it seem as
> though it's your code's responsibility to start and stop the reactor,
> and possibly to do things before or after that has happened.
> 
> Even if you need to start the reactor yourself - for example, if you are
> writing a GUI program - it is best to abstract out the reactor
> start/stop far from your application code.
> 
> If I understand the core of your question correctly, it's "How do I use
> Twisted at the interactive Python interpreter?"
> 
> There is no easy answer.  Twisted is not well-suited towards use at a
> normal Python prompt, because the normal Python prompt is not
> event-driven.  There have been a few different forays into interactive
> Python/Twisted integration.  The 1.3.0 release includes a 'manhole'
> client/server pair which will allow you to log in and run python code
> inside a running Twisted process.  JP Calderone has recently done quite
> a bit of work on a new, better interactive interpreter (including SSH
> access and command-line editing) which looks more like a regular Python
> prompt.
> 
> Although there are several different avenues you can take to get there,
> what you probably want to arrive at is a Twisted server that is
> listening on one port for Python commands, and on another for whatever
> protocol it is you are trying to implement.  For convenience, it may be
> useful for the "port" that it's listening on to actually be standard
> I/O.  This is possible using twisted.internet.stdio.
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 


-- 
--------------------------------------------------------------
Dr Jon Blower              Tel: +44 118 378 5213 (direct line)
Technical Director         Tel: +44 118 378 8741 (ESSC)
Reading e-Science Centre   Fax: +44 118 378 6413
ESSC                       Email: jdb at mail.nerc-essc.ac.uk
University of Reading
3 Earley Gate
Reading RG6 6AL, UK
--------------------------------------------------------------

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.



From exarkun at divmod.com  Wed Jan  5 11:15:04 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Wed, 05 Jan 2005 16:15:04 GMT
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104939873.41dc0b61b1ca7@www.nerc-essc.ac.uk>
Message-ID: <20050105161504.25734.1225399961.divmod.quotient.2147@ohm>

On Wed,  5 Jan 2005 15:44:33 +0000, Jon Blower <jdb at mail.nerc-essc.ac.uk> wrote:
>Hi Glyph,
> 
> Thanks very much for your reply, very useful.  I've had another think about my
> problem and I guess it boils down to this question: when I'm writing a client
> program, how can I simulate a synchronous function call (avoiding callbacks)
> like this pseudo-Python, which sends a message then returns its reply:
> 
> def sendMessage(message):
>    transport.send(message)
>    # Wait for reply to arrive
>    reply = getReplySomehow()
>    return reply

  One way is to have getReplySomehow() context switch out of sendMessage() 
and into something capable of constructing getReplySomehow()'s return 
value, then switching back and returning it to be bound to the name reply.

  Twisted has ignore this rather successfully up until recently.  It is,
after all, a basic language feature, and should be provided by the runtime.
Nothing about it is Twisted specific, and it is perfectly possible to write
a Twisted program without this trick.

  Recently Chris Armstrong's "deferred generator" support was added to 
t.i.defer, though.  With it, you write code something like this:

    from twisted.internet import defer

    def sendMessage(message):
        transport.send(message)
        intermediate = defer.waitForDeferred(getReplySomehow())
        yield intermediate
        reply = intermediate.getResult()
        yield reply
    sendMessage = deferredGenerator(sendMessage)

  This supposes that getReplySomehow() returns a Deferred, and causes
sendMessage to also return a Deferred (one which fires with reply 
eventually).  The benefit is not immediately obvious here, since you 
are handing reply back to your caller, rather than using it.  The exact
equivalent code without this technique is:

    def sendMessage(message):
        transport.send(message)
        return getReplySomehow()

  However, there is some benefit if, instead of returning reply, sendMessage
uses it locally a bit.

  There are other solutions, of course.  You can use pre-emptive threads,
as provided by Python's threading module (or Twisted's thin layer on top
of it).  Keep in mind that there is pretty much only one threadsafe API in
Twisted (callInThread).  If you do this, you will have to be extremely 
careful not to call Twisted APIs from the wrong place.  There is an example 
of a somewhat generic implementation of this solution in my sandbox.  
It gives the appearance of working (and may even do so), but consider it 
untested and loaded with bugs (I'm certainly not using it in any of my 
software).

  Greenlets are another solution along these lines.  They simply replace
pre-emptive kernel threads with cooperative user-space threads.  As such,
you do not need to worry about calling Twisted APIs from the wrong thread,
since there is no wrong thread.  Greenlets are implemented with some tricky
voodoo, so once again, while I know of no bugs, I also wouldn't be surprised
if using them caused a rift in space/time to open up and eat your head.

  So what's a Python programmer to do?  Well, the technique I'll actually 
recommend is the simplest: callbacks.  Oh, they're a pain to write sometimes,
but they're much less magic than the other solutions described, often perform
better, and all the bugs you'll get when using them are the simple to fix kind,
rather than the my-stack-just-got-swizzled-time-to-segv or the 
oh-there's-a-race-that-only-triggers-under-load-on-someone-else's-machine kind.
They also lead to rather more modular code than the synchronous-style equivalents.
You can unit test a callback by itself.  How do you unit test lines 7 - 11 of a
single function?

  As to your wondering about Twisted's utility for clients versus servers, I 
think you are close to the truth.  The actual divide, though, is concurrency.
If your program only needs to do one thing at a time, Twisted doesn't simplify
much.  If your program needs to do two or more things at once, then it does.
Keep in mind that, even for a client, there are often at least two things that
need to be happening: talking to the network and updating the user interface.

  Hope this helps,

  Jp



From mailinglist.account at gmail.com  Wed Jan  5 13:19:23 2005
From: mailinglist.account at gmail.com (Anthony Tarlano)
Date: Wed, 5 Jan 2005 19:19:23 +0100
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
Message-ID: <f2b573190501051019613f3791@mail.gmail.com>

Hi Jon,

Interesting that you are implementing Styx with Twisted, I used to
work with Inferno and its father 9P (plan9) back during my Lucent
days.

Are you creating just creating a twisted Styx protocol client to use
with the vitanuova styx server or are you looking to do a server in
twisted as well? Let me know if you are redoing the styx server as
well in twisted, but back to your original problem question...

Keeping thing nice an simple, the pythonic way, I did a similar thing
in Twisted, but using a different method.. From what I can tell from
your post is you *really* want is a twisted styx client that sends
T-messages to a styx server to serve its namespace with R-messages,
and *you* want to interact with the client synchronously.. You also
asked for a better way to implement the client not using callbacks,
but that was not the real issue. For _you_ the real issue is
synchronously communicating _with_the_styx_client from a command
line..

If this assumption is correct then all you have to do is make the styx
client a server as well, for let's say the telnet protocol. Then you
can use a telnet client to connect to the telnet server (which is also
the styx client) and bingo issue commands to the styx server (via the
styx client that is also the telnet server)... Of course you will have
to pass the styx server messages back to the telnet client

Let me know if that answers you problem..

There is even an example in the howto's to setup both a client and
server from one factory

Cheers,

Anthony


On Mon,  3 Jan 2005 23:00:01 +0000, Jon Blower <jdb at mail.nerc-essc.ac.uk> wrote:
> Hi all,
> 
> I'm new to Twisted, and I'm trying to create an implementation of a client
> program that communicates over a network with a server using a protocol called
> Styx.  (In case you're interested, Styx is a protocol for distributed systems,
> as used by the Inferno operating system:
> http://www.vitanuova.com/inferno/papers/styx.html.)  In short, Styx is a pretty
> simple call-response type of protocol, in which the client sends a T-message
> and waits for the corresponding R-message from the server.  There is a
> one-to-one correspondence between T- and R-messages.
> 
> I understand that Twisted is an event-driven framework and I have written a
> basic client program.  My initial attempt has involved creating a StyxProtocol
> class that inherits from protocol.Protocol, in which I override key methods
> such as dataReceived() and connectionMade().  Having created this protocol and
> told it how to respond to messages that arrive, I created a simple Factory
> class, then set the whole thing running with reactor.run().  It works fine, but
> it's not quite in the form I'd like.  In my current attempt, what I've done is
> essentially to create a load of callbacks and "press GO".  Once I've set the
> program running I can't interact with it until one of the methods calls
> reactor.stop().
> 
> What I'd like to be able to do is illustrated by the following pseudo-Python.
> This could be a script or could be typed into an interactive Python shell:
> 
> conn = StyxConnection("myserver.remotehost.com", 6666)
> conn.connect() # Starts the reactor going and performs handshakes
> # The connection is now open and I can interact with it
> myRemoteFile = conn.openFile("/path/to/myfile") # Gets handle to file on remote
> server, by exchange of a few messages
> data = myRemoteFile.read() # Reads data from the remote file, again by exchange
> of some messages
> conn.close() # Closes the connection to the remote server and stops the reactor
> 
> How can I do this with the Twisted framework?  As far as I can tell,
> reactor.run() will not return until something calls reactor.stop().  I could
> achieve what I want using threads (I think), but I'd like to avoid this if
> possible.
> 
> I'm sure I'm not the first to ask this sort of question, but I've looked through
> the docs and example code and haven't been able to track down an answer.  I'd
> be very grateful for any pointers that anyone could offer.
> 
> Regards,
> Jon
> 
> --
> --------------------------------------------------------------
> Dr Jon Blower              Tel: +44 118 378 5213 (direct line)
> Technical Director         Tel: +44 118 378 8741 (ESSC)
> Reading e-Science Centre   Fax: +44 118 378 6413
> ESSC                       Email: jdb at mail.nerc-essc.ac.uk
> University of Reading
> 3 Earley Gate
> Reading RG6 6AL, UK
> --------------------------------------------------------------
> 
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From abe at fettig.net  Wed Jan  5 13:48:37 2005
From: abe at fettig.net (Abe Fettig)
Date: Wed, 05 Jan 2005 13:48:37 -0500
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <f2b573190501051019613f3791@mail.gmail.com>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<f2b573190501051019613f3791@mail.gmail.com>
Message-ID: <41DC3685.5070005@fettig.net>

Anthony Tarlano wrote:

> From what I can tell from
> your post is you *really* want is a twisted styx client that sends
> T-messages to a styx server to serve its namespace with R-messages,
> and *you* want to interact with the client synchronously.. You also
> asked for a better way to implement the client not using callbacks,
> but that was not the real issue. For _you_ the real issue is
> synchronously communicating _with_the_styx_client from a command
> line..
> 
> If this assumption is correct then all you have to do is make the styx
> client a server as well, for let's say the telnet protocol. Then you
> can use a telnet client to connect to the telnet server (which is also
> the styx client) and bingo issue commands to the styx server (via the
> styx client that is also the telnet server)... Of course you will have
> to pass the styx server messages back to the telnet client

As JP mentioned, you can also use twisted.internet.stdio to provide a 
command line interface to your running Twisted application.  I'm 
attaching a simple app that illustrates the point.  Here's an example 
session:

$ python stdiodemo.py
Web checker console. Type 'help' for help.
help
Valid commands: check help quit
help check
check <url>: Attempt to download the given web page
check http://www.fettig.net/
Success: got 26072 bytes.
check http://www.fettig.net/nonexistant_page
Failure: 404 Not Found
check http://not.a.real.site/
Failure: DNS lookup failed: address 'not.a.real.site' not found.
quit
Goodbye.

stdiodemo.py takes commands from standard input while the reactor is 
running. When you type "check <url>", it kicks off an asyncronous task 
(downloading the web page), and prints the result when it is finished.

Anthony's suggestion of using a Telnet server could work here too - 
there are only a couple minor changes you'd need to make to run this as 
a telnet server.

Is that helpful?

Abe
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: stdiodemo.py
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050105/df154a08/attachment.txt 

From andrew-twisted at puzzling.org  Wed Jan  5 19:35:05 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 6 Jan 2005 11:35:05 +1100
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <41DC3685.5070005@fettig.net>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<f2b573190501051019613f3791@mail.gmail.com>
	<41DC3685.5070005@fettig.net>
Message-ID: <20050106003505.GH7521@localhost.localdomain>

On Wed, Jan 05, 2005 at 01:48:37PM -0500, Abe Fettig wrote:
[...]
> 
> As JP mentioned, you can also use twisted.internet.stdio to provide a 
> command line interface to your running Twisted application.  I'm 
> attaching a simple app that illustrates the point.  Here's an example 
> session:

Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
include this example in Twisted?

-Andrew.




From anthony at interlink.com.au  Thu Jan  6 06:38:14 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Thu, 6 Jan 2005 22:38:14 +1100
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <20050106003505.GH7521@localhost.localdomain>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<41DC3685.5070005@fettig.net>
	<20050106003505.GH7521@localhost.localdomain>
Message-ID: <200501062238.15902.anthony@interlink.com.au>

On Thursday 06 January 2005 11:35, Andrew Bennetts wrote:
> On Wed, Jan 05, 2005 at 01:48:37PM -0500, Abe Fettig wrote:
> [...]
>
> > As JP mentioned, you can also use twisted.internet.stdio to provide a
> > command line interface to your running Twisted application.  I'm
> > attaching a simple app that illustrates the point.  Here's an example
> > session:
>
> Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
> include this example in Twisted?

It's very similar the the standard Python 'cmd' module - it might be worth
mentioning this as part of the example.

-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.



From abe at fettig.net  Thu Jan  6 11:58:22 2005
From: abe at fettig.net (Abe Fettig)
Date: Thu, 06 Jan 2005 11:58:22 -0500
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <20050106003505.GH7521@localhost.localdomain>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>	<f2b573190501051019613f3791@mail.gmail.com>	<41DC3685.5070005@fettig.net>
	<20050106003505.GH7521@localhost.localdomain>
Message-ID: <41DD6E2E.9020500@fettig.net>

Andrew Bennetts wrote:

> Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
> include this example in Twisted?

Thanks, I'm glad you like it!  You're certainly welcome to include it 
(or a modified version) in Twisted.

One potential addition would be a command line flag to have it run as a 
  server instead of using stdio.  That might be a nice way to 
demonstrate how the same protocol can be used on stdio or in a server.

Abe



From jml at mumak.net  Thu Jan  6 19:13:29 2005
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 07 Jan 2005 00:13:29 GMT
Subject: [Twisted-Python] msg() wrapping in t.words.protocols.irc
In-Reply-To: 0
Message-ID: <20050107001329.32125.1439838537.divmod.quotient.101@ohm>

Hello,

I just committed code that fixed issue827. I think I also fixed another bug in the wrapping, but I'm not certain.

Here's the story. msg() split the privmsg text into chunks the size of (max_octets_per_line - len(fmt) - 2); fmt = 'PRIVMSG username :%s'. This means that ignoring line endings, each line sent will be at least 4 characters shorter than max_octets_per_line -- 2 for '%s', 2 for the '-2'. I don't know why the '- 2' was there.

In my commit, I took the '%s' into account, and still subtract 2 from the message chunk size. This means that the (undocumented) behaviour has changed. 

I don't really know the IRC protocol, so I don't know what line endings are sent, or whether they are relevant in the protocol API. If someone will enlighten me, I will correct code, docstrings, tests and comments accordingly.

jml



From anthony at interlink.com.au  Fri Jan  7 04:40:27 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Fri, 7 Jan 2005 20:40:27 +1100
Subject: [Twisted-Python] Deferred style question.
Message-ID: <200501072040.29199.anthony@interlink.com.au>

Say I have an operation that takes a certain amount of time, and so I 
return a deferred. While the operation is still in progress, another call is 
made for the same operation.

The operation is one of those only-do-once-and-cache-the-results sort of 
things. If an operation is called a second time after the first one is done, 
defer.succeed(previousResult) is returned. If it's called a second time 
while it's still in progress, it returns a deferred that's also triggered with
the result when the operation completes.

Should I just return the same deferred?

Initially I thought 'yes, return the same deferred', but that then relies on 
the user-written callback returning the result that it was passed.

Second thought was 'no, return a new deferred', and return a new deferred and 
install a callback on the original deferred that triggers a new deferred

But then if the user's callback on the original deferred raises an error, the 
second deferred will never be triggered. Or it could simply return another
deferred, and delay the triggering of the second one.

So now I'm leaning towards (on the first call) making two deferreds - one for 
the operation, and one to be returned to the user. Then the operation 
deferred gets a callback that triggers the user's deferred. Then a second 
user call can simply add a new callback to the operation deferred. Any later
calls simply add a callback to the (cached) operation deferred, they'll be 
triggered immediately.

Does this make sense? Sample code to demonstrate what I mean is attached.

Anthony
-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.
-------------- next part --------------

from twisted.internet import defer, reactor

# Cache of operations
_cache = {}

def longRunningOperation(value):
    # Stub pointless operation - returns the value passed, after a 2s delay
    opdef = defer.Deferred()
    print "Operation called for", value
    reactor.callLater(2, lambda :opdef.callback(value))
    return opdef

def triggerUserCallback(res, deferred):
    deferred.callback(res)
    return res

def callOperation(value):
    # Currently not in progress - start it
    if not _cache.has_key(value):
        opdef = longRunningOperation(value)
        _cache[value] = opdef

    userdef = defer.Deferred()
    _cache[value].addCallback(lambda x: triggerUserCallback(x, userdef))
    return userdef

def gotAResult(res):
    print "I got a result!", res

def makeACall():
    print "making a call for 'x'"
    d = callOperation('x')
    d.addCallback(gotAResult)

def startTheFun():
    makeACall()
    reactor.callLater(1, makeACall)
    reactor.callLater(4, makeACall)
    reactor.callLater(5, makeACall)

if __name__ == "__main__":
    reactor.callLater(0, startTheFun)
    reactor.run()

From anthony at interlink.com.au  Fri Jan  7 05:13:15 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Fri, 7 Jan 2005 21:13:15 +1100
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <200501072040.29199.anthony@interlink.com.au>
References: <200501072040.29199.anthony@interlink.com.au>
Message-ID: <200501072113.15988.anthony@interlink.com.au>

After I posted the previous, two obvious points occurred to me:

  1. This is easy enough to modify to a generally useful 'DeferredCache'
      class
  2. Said class is a nice example of a decorator <wink>

So, see the attached for a DeferredCache decorator. It's not perfect,
because it currently doesn't do keyword arguments, and all arguments
to the operation must be hashable. This could be fixed, although it 
would make the code a bit nastier.

-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.
-------------- next part --------------

# XXX To be done: 
#     Caching relies on all arguments to the operation being cachable.
#     Caching doesn't handle keyword arguments.

from twisted.internet import defer


class DeferredCache:
    """ Wraps a call that returns a deferred in a cache. Any subsequent
        calls with the same argument will wait for the first call to 
        finish.
    """

    def __init__(self, op):
        self.op = op
        self.cache = {}

    def cb_triggerUserCallback(self, res, deferred):
        deferred.callback(res)
        return res

    def __call__(self, *args):
        # Currently not in progress - start it
        if not self.cache.has_key(args):
            # XXX check it returns a deferred?
            opdef = self.op(*args)
            self.cache[args] = opdef

        userdef = defer.Deferred()
        self.cache[args].addCallback(lambda x: 
                                    self.cb_triggerUserCallback(x, userdef))
        return userdef


@DeferredCache
def longRunningOperation(value):
    # Stub pointless operation - returns the value passed, after a 2s delay
    opdef = defer.Deferred()
    print "Operation called for", value
    reactor.callLater(2, lambda :opdef.callback(value))
    return opdef

# Alternatively, if you don't like decorators or are on < Python 2.4
#longRunningOperation = DeferredCache(longRunningOperation)


# Testing stuff


def gotAResult(res):
    print "I got a result!", res

def makeACall():
    print "making a call for 'x'"
    d = longRunningOperation('x')
    d.addCallback(gotAResult)

def startTheFun():
    makeACall()
    reactor.callLater(1, makeACall)
    reactor.callLater(4, makeACall)
    reactor.callLater(5, makeACall)

if __name__ == "__main__":
    from twisted.internet import reactor
    reactor.callLater(0, startTheFun)
    reactor.run()

From bob at redivi.com  Fri Jan  7 05:24:18 2005
From: bob at redivi.com (Bob Ippolito)
Date: Fri, 7 Jan 2005 05:24:18 -0500
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <200501072113.15988.anthony@interlink.com.au>
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
Message-ID: <49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>


On Jan 7, 2005, at 5:13, Anthony Baxter wrote:

> class DeferredCache:
...
>         if not self.cache.has_key(args):
>
> @DeferredCache
> def longRunningOperation(value):
...
> # Alternatively, if you don't like decorators or are on < Python 2.4
> #longRunningOperation = DeferredCache(longRunningOperation)

It's funny that you are using a decorator, but not the __contains__ 
operator ;)

-bob




From anthony at interlink.com.au  Fri Jan  7 06:51:18 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Fri, 7 Jan 2005 22:51:18 +1100
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
	<49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
Message-ID: <200501072251.19680.anthony@interlink.com.au>

On Friday 07 January 2005 21:24, Bob Ippolito wrote:
> It's funny that you are using a decorator, but not the __contains__
> operator ;)

Pah! Here's a final version for now, fixed to work for methods and 
also supporting errbacks, as well as kwargs and unhashable arguments. 
The previous version didn't work for methods, because I was trying to be 
too clever. 

This is checked into shtoom (on a branch at the moment, since that's where 
I need it). If people like, I can check it into the twisted sandbox somewhere 
as well...

If it's considered a good idea, I'm happy for this to go into twisted proper.
Now that I've got it, there's going to be a whole pile of places I can use
this.

-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.
-------------- next part --------------
from twisted.internet import defer

class _DeferredCache:
    """ Wraps a call that returns a deferred in a cache. Any subsequent
        calls with the same argument will wait for the first call to 
        finish and return the same result (or errback).
    """

    allowUnhashableArgs = True

    def __init__(self, op, allowUnhashableArgs=None):
        self.op = op
        self.cache = {}
        if allowUnhashableArgs is not None:
            self.allowUnhashableArgs = allowUnhashableArgs

    def cb_triggerUserCallback(self, res, deferred):
        deferred.callback(res)
        return res

    def cb_triggerUserErrback(self, failure, deferred):
        deferred.errback(res)
        return res

    def _genCache(self, args, kwargs):
        # This could be better, probably
        try:
            arghash = hash(args)
        except TypeError:
            return None
        kwit = kwargs.items()
        kwit.sort()
        try:
            kwhash = hash(tuple(kwit))
        except TypeError:
            return None
        return (arghash, kwhash)

    def call(self, *args, **kwargs):
        # Currently not in progress - start it
        cacheVal = self._genCache(args, kwargs)
        if cacheVal is None and not self.allowUnhashableArgs:
            raise TypeError('DeferredCache(%s) arguments must be hashable'%(
                                self.op.func_name))

        opdef = self.cache.get(cacheVal)
        if not opdef:
            # XXX check it returns a deferred?
            opdef = self.op(*args, **kwargs)

            if cacheVal is not None:
                self.cache[cacheVal] = opdef

        userdef = defer.Deferred()
        opdef.addCallbacks(lambda x: self.cb_triggerUserCallback(x, userdef),
                           lambda x: self.cb_triggerUserErrback(x, userdef))
        return userdef

class _DeferredCacheHashableArgs(_DeferredCache):
    allowUnhashableArgs = False

def DeferredCache(op, allowUnhashableArgs=None):
    c = _DeferredCache(op, allowUnhashableArgs)
    def func(*args, **kwargs):
        return c.call(*args, **kwargs)
    return func

def DeferredCacheHashableArgs(op, allowUnhashableArgs=None):
    c = _DeferredCacheHashableArgs(op, allowUnhashableArgs)
    def func(*args, **kwargs):
        return c.call(*args, **kwargs)
    return func

-------------- next part --------------
# Copyright (C) 2004 Anthony Baxter

"""Tests for shtoom.defcache.
"""

from twisted.trial import unittest
from shtoom.defcache import DeferredCache, DeferredCacheHashableArgs
from twisted.internet import defer, reactor

class TestBlobby:
    def __init__(self):
        self.calls = []

    def _operation(self, *args, **kwargs):
        # Stub pointless operation - returns the first value passed, 
        # after a small delay
        self.calls.append((args,kwargs))
        opdef = defer.Deferred()
        reactor.callLater(0.2, lambda :opdef.callback(args[0]))
        return opdef
    operation = DeferredCache(_operation)
    operation2 = DeferredCacheHashableArgs(_operation)

class Saver:
    def __init__(self):
        self.val = None

    def save(self, arg):
        self.val = arg


class DefcacheTests(unittest.TestCase):

    def test_defcache(self):
        from twisted.trial import util
        ae = self.assertEquals
        ar = self.assertRaises

        t = TestBlobby()
        s = Saver()
        d = t.operation('foo')
        d.addCallback(s.save)
        util.wait(d)
        ae(s.val, 'foo')

        t = TestBlobby()
        s1 = Saver()
        s2 = Saver()
        d1 = t.operation('foo')
        d2 = t.operation('foo')
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        util.wait(d1)
        util.wait(d2)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        # Check it was only called once, as expected
        ae(t.calls, [(('foo',),{})])

        # Check for the cache of completed calls
        d3 = t.operation('foo')
        s3 = Saver()
        d3.addCallback(s3.save)
        util.wait(d3)
        ae(s3.val, 'foo')
        ae(t.calls, [(('foo',),{})])
        
        # Now test kwargs
        t = TestBlobby()
        s1 = Saver()
        s2 = Saver()
        s3 = Saver()
        d1 = t.operation('foo', kw=True)
        d2 = t.operation('foo', kw=True)
        d3 = t.operation('foo', kw=False)
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        d3.addCallback(s3.save)
        util.wait(d1)
        util.wait(d2)
        util.wait(d3)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        ae(s3.val, 'foo')
        # Check it was called twice only
        ae(len(t.calls), 2)

        t = TestBlobby()
        ar(TypeError, t.operation2, 'foo', {})

        s1 = Saver()
        s2 = Saver()
        d1 = t.operation2('foo', kw=True)
        d2 = t.operation('foo', kw=True)
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        util.wait(d1)
        util.wait(d2)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        # Check it was called twice only
        ae(len(t.calls), 2)

        t = TestBlobby()

        s1 = Saver()
        s2 = Saver()
        d1 = t.operation('foo', kw={})
        d2 = t.operation('foo', kw={})
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        util.wait(d1)
        util.wait(d2)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        # Check it was called both times
        ae(len(t.calls), 2)




From bob at redivi.com  Fri Jan  7 11:55:01 2005
From: bob at redivi.com (Bob Ippolito)
Date: Fri, 7 Jan 2005 11:55:01 -0500
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <200501072251.19680.anthony@interlink.com.au>
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
	<49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
	<200501072251.19680.anthony@interlink.com.au>
Message-ID: <DED450B8-60CC-11D9-B917-000A95BA5446@redivi.com>


On Jan 7, 2005, at 6:51, Anthony Baxter wrote:

> On Friday 07 January 2005 21:24, Bob Ippolito wrote:
>> It's funny that you are using a decorator, but not the __contains__
>> operator ;)
>
> Pah! Here's a final version for now, fixed to work for methods and
> also supporting errbacks, as well as kwargs and unhashable arguments.
> The previous version didn't work for methods, because I was trying to 
> be
> too clever.

I would change the "if not opdef" to "if opdef is None", because it's a 
little faster and more precise.

> This is checked into shtoom (on a branch at the moment, since that's 
> where
> I need it). If people like, I can check it into the twisted sandbox 
> somewhere
> as well...
>
> If it's considered a good idea, I'm happy for this to go into twisted 
> proper.
> Now that I've got it, there's going to be a whole pile of places I can 
> use
> this.

Well, I think this or something like it should go in.  I've been using 
this idiom for years, actually.

-bob




From kurtschwehr at yahoo.com  Fri Jan  7 14:33:19 2005
From: kurtschwehr at yahoo.com (Kurt Schwehr)
Date: Fri, 7 Jan 2005 11:33:19 -0800 (PST)
Subject: [Twisted-Python] twisted & buildbot for fink/macosx
In-Reply-To: <E1CmzLC-0005bW-02@pyramid.twistedmatrix.com>
Message-ID: <20050107193319.11765.qmail@web51403.mail.yahoo.com>

Hey All,

When reading this know that I'm not really a python
programmer (last time was too long ago)

I posted fink info file for twisted, buildbot, and a
couple others here:

http://schwehr.org/software/fink/

No one has expressed any interest and since I do not
have the time to figure out buildbot for my project
(density), I am going to drop the info files.

If you do have interest in these files, please let me
know and if they work for you, I can easily add them
to the fink cvs tree.  I don't really know if they are
ok or not.  Otherwise, I will just leave them on my
web page and not put them into fink.

Or, if someone has a simple tutorial of setting up
buildbot (for the clueless) with only one machine that
has local only cvs and does the builds too with just a
simple make command, then if I can get buildbot
working pretty quickly then I would add these fink
packages.

-kurt


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - Helps protect you from nasty viruses. 
http://promotions.yahoo.com/new_mail



From db3l at fitlinxx.com  Fri Jan  7 15:55:09 2005
From: db3l at fitlinxx.com (David Bolen)
Date: 07 Jan 2005 15:55:09 -0500
Subject: [Twisted-Python] Re: Deferred style question.
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
	<49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
	<200501072251.19680.anthony@interlink.com.au>
	<DED450B8-60CC-11D9-B917-000A95BA5446@redivi.com>
Message-ID: <uzmzlklhu.fsf@fitlinxx.com>

Bob Ippolito <bob at redivi.com> writes:

(...)
> Well, I think this or something like it should go in.  I've been using
> this idiom for years, actually.

I'd agree - we have similar scenarios and this is the same approach
we've been taking.

-- David




From db3l at fitlinxx.com  Fri Jan  7 16:20:08 2005
From: db3l at fitlinxx.com (David Bolen)
Date: 07 Jan 2005 16:20:08 -0500
Subject: [Twisted-Python] Re: More on PB Copyable Errors
References: <94a776e704122812321c78389@mail.gmail.com>
	<94a776e70412281234522aa53d@mail.gmail.com>
	<94a776e70412290656149280cd@mail.gmail.com>
	<uzmzwex02.fsf@fitlinxx.com>
	<94a776e704122911477e36fb72@mail.gmail.com>
	<uis6kecui.fsf@fitlinxx.com>
	<94a776e7041230074867d17cc6@mail.gmail.com>
	<94a776e704123007572b3dc57b@mail.gmail.com>
	<94a776e70412300827a0ec69d@mail.gmail.com>
	<uekh7hgou.fsf@fitlinxx.com>
	<94a776e704123010255c184077@mail.gmail.com>
Message-ID: <uvfa9kkc7.fsf@fitlinxx.com>

Justin Johnson <justinjohnson at gmail.com> writes:

> Oh yeah, right.  I managed to entirely skip your comments on the
> security options.
> 
> How about the attached patch?

Sorry on the delay - holidays and then I forgot about it :-(

I'm still on the fence with respect to having independent "jellyable"
checks.  My concern would be that having the independent checks of
what is suitable for jellying can be fragile with respect to coupling
with the actual jelly operation.  Even with the jellyable and security
checks there are some paths in the jellier code that could still fail
the operation.

I also think I liked your earlier attempts at keeping the change
within the CopyableFailure class (I may have missed why that changed),
although even there you'd have a double jelly since you'd have to
check the jelly attempt in getStateToCopy.  Although alternatively,
CopyableFailure could just implement its own jellyFor (rather than
getStateToCopy) which handled that more gracefully and with a single
jelly attempt on the value.

-- David




From hoxide_dirac at yahoo.com.cn  Sat Jan  8 03:46:30 2005
From: hoxide_dirac at yahoo.com.cn (Hoxide Ma)
Date: Sat, 8 Jan 2005 16:46:30 +0800 (CST)
Subject: [Twisted-Python] how to create a http proxy client in twisted?
Message-ID: <20050108084630.6566.qmail@web15705.mail.cnb.yahoo.com>

is there any example?

which example in TwistedDocs\examples\Proxy.py just
like that:

from twisted.internet import reactor
from twisted.web import proxy, server

site =
server.Site(proxy.ReverseProxyResource('www.yahoo.com',
80, '/'))
reactor.listenTCP(8080, site)
reactor.run()

what's that means?

_________________________________________________________
Do You Yahoo!?
150??MP3????????????
http://music.yisou.com/
???????????????????
http://image.yisou.com
1G??1000???????????
http://cn.rd.yahoo.com/mail_cn/tag/1g/*http://cn.mail.yahoo.com/event/mail_1g/



From anthony at interlink.com.au  Sat Jan  8 07:21:07 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Sat, 8 Jan 2005 23:21:07 +1100
Subject: [Twisted-Python] Re: Deferred style question.
In-Reply-To: <uzmzlklhu.fsf@fitlinxx.com>
References: <200501072040.29199.anthony@interlink.com.au>
	<DED450B8-60CC-11D9-B917-000A95BA5446@redivi.com>
	<uzmzlklhu.fsf@fitlinxx.com>
Message-ID: <200501082321.08008.anthony@interlink.com.au>

On Saturday 08 January 2005 07:55, David Bolen wrote:
> Bob Ippolito <bob at redivi.com> writes:
>
> (...)
>
> > Well, I think this or something like it should go in.  I've been using
> > this idiom for years, actually.
>
> I'd agree - we have similar scenarios and this is the same approach
> we've been taking.

Once I'd written it down, I went back and found I'd done something 
similar, but not quite as general, on any number of previous occasions.

I think it really should go in - so, the obvious question is: what else 
needs to be done to put it in? The current version in shtoom svn 
supports a couple of different options - whether to allow unhashable
arguments (in which case no caching is done), whether to cache only
operations in progress, or cache all operations. It also supports a 
cache clearing method, and works nicely as either a 2.4-style 
decorator, or an older style decorator. There's unittests (although it
still needs tests for the .errback handling, will be added shortly).

Current code is at 
http://divmod.org/cvs/branches/improved-stun/shtoom/defcache.py?root=Shtoom&view=markup

Anthony
-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.



From foom at fuhm.net  Sat Jan  8 13:16:35 2005
From: foom at fuhm.net (James Y Knight)
Date: Sat, 8 Jan 2005 13:16:35 -0500
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <6E4E6156-61A1-11D9-86E3-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2005-01-03 14:40:06.260000:
  Bugs opened: 7   Bugs closed: 3   Total open bugs: 332 (+4)
   Urgent: 14 (+1)
   Bug: 130 (+3)
   Feature: 123 (+0)
   Wish: 65 (+0)

New / Reopened Bugs
______________________
                     ==== Urgent ====
make epydoc stop ignoring zope interfaces  (1 month ago)
        http://twistedmatrix.com/bugs/issue794 opened by radix

                     ==== Bug ====
[CONCH] bug in examples/sshsimpleclient.py  (yesterday)
        http://twistedmatrix.com/bugs/issue857 opened by subterrific

Importing twisted.protocols.dns blocks for /dev/random  (yesterday)
        http://twistedmatrix.com/bugs/issue856 opened by ben

[PATCH] t.conch.insults.insults doesn't recover from an unimplemented 
escape sequence  (2 days ago)
        http://twistedmatrix.com/bugs/issue854 opened by marienz

conch won't allow logins  (yesterday)
CLOSED http://twistedmatrix.com/bugs/issue855 opened by REdOG

twisted.names can't look up information if a domain has AAAA or A6 
records and the system doesn't support ipv6  (4 days ago)
        http://twistedmatrix.com/bugs/issue852 opened by marienz

                     ==== Feature ====
Cannot run a Multicast server under Windows  (2 days ago)
        http://twistedmatrix.com/bugs/issue853 opened by lstep

Bugs Closed
______________________
                     ==== Bug ====
wrapping code in IRCClient can cause infinite loops  (3 weeks ago)
        http://twistedmatrix.com/bugs/issue827 opened by edmundd, closed 
by jml

conch won't allow logins  (yesterday)
        http://twistedmatrix.com/bugs/issue855 opened by REdOG, closed 
by REdOG

                     ==== Feature ====
[TRIAL] Trial dry-run  (2 weeks ago)
        http://twistedmatrix.com/bugs/issue835 opened by jml, closed by 
jml




From jdb at mail.nerc-essc.ac.uk  Mon Jan 10 08:50:51 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Mon, 10 Jan 2005 13:50:51 -0000
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <20050106003505.GH7521@localhost.localdomain>
Message-ID: <000e01c4f71b$65d6a540$76a6abc0@marlow>

Hi all,

Thanks for everyone who replied with help on this issue.  After much
head-scratching I decided that Twisted was not the right framework for my
particular app and I solved my problem another way.  The idea of running a
Twisted app with a Telnet or stdio interface is a great idea though; I'll
bear this in mind for the future.

In case anyone's interested, the approach I took (for implementing a client
program that speaks the Styx protocol) was to create a client class that
implements a sendMessage() method.  When the client class connects to the
remote server, it fires off a background thread that continually listens for
received messages, firing an event when a whole message arrives.  A user can
send a message, then wait for the corresponding reply, or the user can send
a message and arrange for a callback method to be called when the reply
arrives.  (in Styx, a user can send several messages without waiting for
replies)  This allows both synchronous and asynchronous approaches and means
that I can use the client classes at the Python prompt, e.g:

from styx import *
conn = StyxConnection("aserver.com", 6666) # connect to the server
f = conn.open("afile", "r") # open a file for reading
f.read() # read the contents of the file

(In Styx, all remote resources are virtualised as files, so you interact
with a remote resource by reading from and writing to file-like objects.)

Thanks again,
Jon

-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com]On Behalf Of Andrew
Bennetts
Sent: 06 January 2005 00:35
To: Twisted general discussion
Subject: Re: [Twisted-Python] Interactive Twisted client (newbie
question?)


On Wed, Jan 05, 2005 at 01:48:37PM -0500, Abe Fettig wrote:
[...]
>
> As JP mentioned, you can also use twisted.internet.stdio to provide a
> command line interface to your running Twisted application.  I'm
> attaching a simple app that illustrates the point.  Here's an example
> session:

Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
include this example in Twisted?

-Andrew.


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From justinjohnson at gmail.com  Mon Jan 10 22:15:08 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Mon, 10 Jan 2005 21:15:08 -0600
Subject: [Twisted-Python] Re: More on PB Copyable Errors
In-Reply-To: <uvfa9kkc7.fsf@fitlinxx.com>
References: <94a776e704122812321c78389@mail.gmail.com>
	<uzmzwex02.fsf@fitlinxx.com>
	<94a776e704122911477e36fb72@mail.gmail.com>
	<uis6kecui.fsf@fitlinxx.com>
	<94a776e7041230074867d17cc6@mail.gmail.com>
	<94a776e704123007572b3dc57b@mail.gmail.com>
	<94a776e70412300827a0ec69d@mail.gmail.com>
	<uekh7hgou.fsf@fitlinxx.com>
	<94a776e704123010255c184077@mail.gmail.com>
	<uvfa9kkc7.fsf@fitlinxx.com>
Message-ID: <94a776e7050110191537664713@mail.gmail.com>

See comments below.

On 07 Jan 2005 16:20:08 -0500, David Bolen <db3l at fitlinxx.com> wrote:
[snip]
> 
> Sorry on the delay - holidays and then I forgot about it :-(
> 
> I'm still on the fence with respect to having independent "jellyable"
> checks.  My concern would be that having the independent checks of
> what is suitable for jellying can be fragile with respect to coupling
> with the actual jelly operation.  Even with the jellyable and security
> checks there are some paths in the jellier code that could still fail
> the operation.

Can you clarify here?  What paths are you referring to?  I'd prefer to
not duplicate those checks as well, but it seemed like the simplist
way to accomplish my goal.  It does sound like your understanding of
the code is better than mine though.

> I also think I liked your earlier attempts at keeping the change
> within the CopyableFailure class (I may have missed why that changed),
> although even there you'd have a double jelly since you'd have to
> check the jelly attempt in getStateToCopy.  Although alternatively,
> CopyableFailure could just implement its own jellyFor (rather than
> getStateToCopy) which handled that more gracefully and with a single
> jelly attempt on the value.
> 
> -- David
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From bbrelin at openapp.biz  Tue Jan 11 13:58:16 2005
From: bbrelin at openapp.biz (Braun Brelin)
Date: Tue, 11 Jan 2005 18:58:16 +0000
Subject: [Twisted-Python] TCP test harness
Message-ID: <1105469896.1250.25.camel@localhost.localdomain>

Has anyone written a TCP test harness in Twisted/Python? 
Someone has asked me to write one, but I'm fairly new to twisted (less
new to Python) and it seems that it would be silly for me to write
something if someone else has already written and/or posted one. 

Basically, I'm looking for a TCP test harness that will support up to a
thousand concurrent TCP connections at a time sending data to a remote
device. 

Thanks,

Braun Brelin





From orbitz at ezabel.com  Tue Jan 11 18:50:48 2005
From: orbitz at ezabel.com (orbitz)
Date: Tue, 11 Jan 2005 18:50:48 -0500
Subject: [Twisted-Python] TCP test harness
In-Reply-To: <1105469896.1250.25.camel@localhost.localdomain>
References: <1105469896.1250.25.camel@localhost.localdomain>
Message-ID: <41E46658.8030900@ezabel.com>

Sounds like a loop that calls reactor.connectTCP a bunch.  Do you need 
something more specific? Some more information might help.


Braun Brelin wrote:

>Has anyone written a TCP test harness in Twisted/Python? 
>Someone has asked me to write one, but I'm fairly new to twisted (less
>new to Python) and it seems that it would be silly for me to write
>something if someone else has already written and/or posted one. 
>
>Basically, I'm looking for a TCP test harness that will support up to a
>thousand concurrent TCP connections at a time sending data to a remote
>device. 
>
>Thanks,
>
>Braun Brelin
>
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
>  
>





From andrew-twisted at puzzling.org  Wed Jan 12 19:56:18 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 13 Jan 2005 11:56:18 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r12864 - Temporarily
	workaround z.i bug.
In-Reply-To: <E1Copxq-00085X-00@wolfwood>
References: <E1Copxq-00085X-00@wolfwood>
Message-ID: <20050113005618.GD5076@localhost.localdomain>

On Wed, Jan 12, 2005 at 02:23:38PM -0700, James Knight wrote:
[...]
> +    # Until this is fixed, make *sure* fixClassImplements was
> +    # called before looking anything up in AdapterRegistry.
> +    # http://collector.zope.org/Zope3-dev/349
> +    if hasattr(ob, '__class__'):
> +        fixClassImplements(ob.__class__)
> +    fixClassImplements

This last line looks a bit dubious :)

-Andrew.




From justinjohnson at gmail.com  Thu Jan 13 14:47:05 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 13 Jan 2005 13:47:05 -0600
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
Message-ID: <94a776e70501131147496f4e2d@mail.gmail.com>

I recently started running into a problem where my process protocol
isn't extracting stdout accurately in all cases.  I have a method on a
service that loops through a list and runs a command, passing in each
item on the list one at a time.  Out of ~50 items in the list, and
thus ~50 invocations of the command, one or two will fail to extract
all of stdout from the command.  Instead the first character of stdout
is extracted and that is it.

The process protocol I'm using is below.  Does anyone see anything
wrong with the code?  I am using the win32event reactor and Twisted
1.3.0.


from twisted.internet import reactor
from twisted.internet import protocol, error, defer
from twisted.python import log

from ratcontrol import errors, config

import os, sys

class BasicProcessProtocol(protocol.ProcessProtocol):
    def __init__(self):
        self.deferred = defer.Deferred()
        self.stdout = ""
        self.stderr = ""
        self.status = 0

    def connectionMade(self):
        self.transport.closeStdin()

    def outReceived(self, data):
        self.stdout += data

    def errReceived(self, data):
        self.stderr += data

    def processEnded(self, reason):
        if reason.check(error.ProcessDone):
            self.status = 0
            # pass the items we want down the callback chain
            self.deferred.callback((self.status, self.stdout, self.stderr))
        else:
            self.status = 1
            theError = errors.CmdError(self.cmd, self.status,
self.stdout, self.stderr)
            log.msg(theError)
            self.deferred.errback(theError)

def openProcess(cmd_and_args):
        cmd = cmd_and_args[0]
        args = cmd_and_args[1:]

        # Spawn the process using the reactor so we don't block
        proto = BasicProcessProtocol()
        proto.cmd = cmd_and_args
        reactor.spawnProcess(proto, cmd, cmd_and_args, env=os.environ)
        return proto.deferred



From itamar at itamarst.org  Thu Jan 13 15:07:37 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 15:07:37 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <94a776e70501131147496f4e2d@mail.gmail.com>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
Message-ID: <1105646857.1389.48.camel@sheriffpony>

On Thu, 2005-01-13 at 13:47 -0600, Justin Johnson wrote:

> The process protocol I'm using is below.  Does anyone see anything
> wrong with the code?  I am using the win32event reactor and Twisted
> 1.3.0.

The win32event process support is known to be buggy. On Windows, popen
with a thread may be a better choice.




From justinjohnson at gmail.com  Thu Jan 13 15:11:41 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 13 Jan 2005 14:11:41 -0600
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105646857.1389.48.camel@sheriffpony>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
Message-ID: <94a776e7050113121115db8446@mail.gmail.com>

Crud!  It's been working for me for most everything else.

Did you add support to the default reactor to spawn threads on
Windows?  I thought I saw a closed bug related to this, but was
waiting for the next release to try it out.

On Thu, 13 Jan 2005 15:07:37 -0500, Itamar Shtull-Trauring
<itamar at itamarst.org> wrote:
> On Thu, 2005-01-13 at 13:47 -0600, Justin Johnson wrote:
> 
> > The process protocol I'm using is below.  Does anyone see anything
> > wrong with the code?  I am using the win32event reactor and Twisted
> > 1.3.0.
> 
> The win32event process support is known to be buggy. On Windows, popen
> with a thread may be a better choice.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From wolfgang.keller.nospam at gmx.de  Thu Jan 13 15:40:41 2005
From: wolfgang.keller.nospam at gmx.de (Wolfgang Keller)
Date: Thu, 13 Jan 2005 21:40:41 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
Message-ID: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>

Hello,

recently I read something about the "kqueue" event notification mechanism
built into FreeBSD and that it would allow to receive notification when
filesystem contents change. Would this mechanism allow to implement a
similar function as database triggers for a filesystem, i.e. write a script
that does something with files that are added to, modified in or deleted
from a certain directory without having to poll the filesystem all the
time? Folder actions allow such things on MacOS X, but Applescript is slow
and I would prefer Python anyway. ;-) If so, is there a way to write such
scripts in Python using Twisted?

TIA,

Best regards

Wolfgang Keller




From bob at redivi.com  Thu Jan 13 15:51:30 2005
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jan 2005 15:51:30 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
Message-ID: <E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>

On Jan 13, 2005, at 15:40, Wolfgang Keller wrote:

> recently I read something about the "kqueue" event notification 
> mechanism
> built into FreeBSD and that it would allow to receive notification when
> filesystem contents change. Would this mechanism allow to implement a
> similar function as database triggers for a filesystem, i.e. write a 
> script
> that does something with files that are added to, modified in or 
> deleted
> from a certain directory without having to poll the filesystem all the
> time? Folder actions allow such things on MacOS X, but Applescript is 
> slow
> and I would prefer Python anyway. ;-) If so, is there a way to write 
> such
> scripts in Python using Twisted?

Actually Folder Actions don't allow this.  I am relatively certain that 
they are implemented entirely in Finder.  They *might* be hooked into 
at the CoreServices/Carbon APIs, but DEFINITELY NOT the BSD level APIs 
(in Mac OS X 10.3 and earlier anyway).

The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for 
this sort of thing -- but Finder still polls.  I do not know what is 
necessary to integrate this with Twisted, though.  There is some 
support for kqueue in Twisted, but last I remember you need to download 
and patch some years-old extension and compile it in order to get that 
to work.

Another thing of interest to you might be FAM 
<http://oss.sgi.com/projects/fam/>.

-bob




From itamar at itamarst.org  Thu Jan 13 16:19:37 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:19:37 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <94a776e7050113121115db8446@mail.gmail.com>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<94a776e7050113121115db8446@mail.gmail.com>
Message-ID: <1105651178.1385.52.camel@sheriffpony>

On Thu, 2005-01-13 at 14:11 -0600, Justin Johnson wrote:
> Crud!  It's been working for me for most everything else.
> 
> Did you add support to the default reactor to spawn threads on
> Windows?  I thought I saw a closed bug related to this, but was
> waiting for the next release to try it out.

Thread support has always been fine on Windows.




From itamar at itamarst.org  Thu Jan 13 16:20:26 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:20:26 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
Message-ID: <1105651226.1383.54.camel@sheriffpony>

On Thu, 2005-01-13 at 15:51 -0500, Bob Ippolito wrote:

> The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for 
> this sort of thing -- but Finder still polls. 

James was showing some docs that said it doesn't actually support the
file notification stuff currently.




From glyph at divmod.com  Thu Jan 13 16:23:30 2005
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Thu, 13 Jan 2005 16:23:30 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105646857.1389.48.camel@sheriffpony>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
Message-ID: <1105651410.11487.0.camel@localhost>

On Thu, 2005-01-13 at 15:07 -0500, Itamar Shtull-Trauring wrote:
> 
> The win32event process support is known to be buggy. On Windows, popen
> with a thread may be a better choice.

Is this still true in trunk?  I keep thinking that we've fixed this
issue and it keeps not being fixed.  What issue number is it?

If popen with a thread is a better choice, can we provide an
implementation of that that comes with the reactor so that at least
people don't have to rewrite their code?




From bob at redivi.com  Thu Jan 13 16:32:25 2005
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jan 2005 16:32:25 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <1105651226.1383.54.camel@sheriffpony>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
Message-ID: <9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>


On Jan 13, 2005, at 16:20, Itamar Shtull-Trauring wrote:

> On Thu, 2005-01-13 at 15:51 -0500, Bob Ippolito wrote:
>
>> The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for
>> this sort of thing -- but Finder still polls.
>
> James was showing some docs that said it doesn't actually support the
> file notification stuff currently.

I've seen it used in GraphViz and ReSTedit, so that's simply not true 
(for files anyway, not sure about directories).

-bob




From itamar at itamarst.org  Thu Jan 13 16:34:22 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:34:22 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105651410.11487.0.camel@localhost>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<1105651410.11487.0.camel@localhost>
Message-ID: <1105652062.1391.56.camel@sheriffpony>

On Thu, 2005-01-13 at 16:23 -0500, Glyph Lefkowitz wrote:

> > The win32event process support is known to be buggy. On Windows, popen
> > with a thread may be a better choice.
> 
> Is this still true in trunk?  I keep thinking that we've fixed this
> issue and it keeps not being fixed.  What issue number is it?

Cory checked in fixed code and then backed it out.

> If popen with a thread is a better choice, can we provide an
> implementation of that that comes with the reactor so that at least
> people don't have to rewrite their code?

Cory's code may have been similar to doing this.




From bob at redivi.com  Thu Jan 13 16:36:46 2005
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jan 2005 16:36:46 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
Message-ID: <39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>


On Jan 13, 2005, at 16:32, Bob Ippolito wrote:

>
> On Jan 13, 2005, at 16:20, Itamar Shtull-Trauring wrote:
>
>> On Thu, 2005-01-13 at 15:51 -0500, Bob Ippolito wrote:
>>
>>> The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for
>>> this sort of thing -- but Finder still polls.
>>
>> James was showing some docs that said it doesn't actually support the
>> file notification stuff currently.
>
> I've seen it used in GraphViz and ReSTedit, so that's simply not true  
> (for files anyway, not sure about directories).

Additionally, Apple has sample code that demonstrates this feature:  
http://developer.apple.com/samplecode/FileNotification/ 
FileNotification.html

-bob




From justinjohnson at gmail.com  Thu Jan 13 16:49:07 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 13 Jan 2005 15:49:07 -0600
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105652062.1391.56.camel@sheriffpony>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<1105651410.11487.0.camel@localhost>
	<1105652062.1391.56.camel@sheriffpony>
Message-ID: <94a776e7050113134916fa4493@mail.gmail.com>

I was referring to Issue591, which based on the comments is done.  Can
anyone verify that?  Maybe I'll have to do a windows build instead of
wait for the next release.


On Thu, 13 Jan 2005 16:34:22 -0500, Itamar Shtull-Trauring
<itamar at itamarst.org> wrote:
> On Thu, 2005-01-13 at 16:23 -0500, Glyph Lefkowitz wrote:
> 
> > > The win32event process support is known to be buggy. On Windows, popen
> > > with a thread may be a better choice.
> >
> > Is this still true in trunk?  I keep thinking that we've fixed this
> > issue and it keeps not being fixed.  What issue number is it?
> 
> Cory checked in fixed code and then backed it out.
> 
> > If popen with a thread is a better choice, can we provide an
> > implementation of that that comes with the reactor so that at least
> > people don't have to rewrite their code?
> 
> Cory's code may have been similar to doing this.
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From itamar at itamarst.org  Thu Jan 13 16:56:10 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:56:10 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
Message-ID: <1105653370.1383.60.camel@sheriffpony>

On Thu, 2005-01-13 at 16:36 -0500, Bob Ippolito wrote:

> Additionally, Apple has sample code that demonstrates this feature:  
> http://developer.apple.com/samplecode/FileNotification/ 
> FileNotification.html

Neato. Who wants to fix up kqreactor, and then write a cross-platform
file notification API that  uses kqueue when available?




From itamar at itamarst.org  Thu Jan 13 17:18:50 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 17:18:50 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <94a776e7050113134916fa4493@mail.gmail.com>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<1105651410.11487.0.camel@localhost>
	<1105652062.1391.56.camel@sheriffpony>
	<94a776e7050113134916fa4493@mail.gmail.com>
Message-ID: <1105654730.1417.62.camel@sheriffpony>

On Thu, 2005-01-13 at 15:49 -0600, Justin Johnson wrote:
> I was referring to Issue591, which based on the comments is done.  Can
> anyone verify that?  Maybe I'll have to do a windows build instead of
> wait for the next release.

I think Cory then backed the code out, so the bug ought to be reopened.




From glyph at divmod.com  Thu Jan 13 17:22:52 2005
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Thu, 13 Jan 2005 17:22:52 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <1105653370.1383.60.camel@sheriffpony>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
Message-ID: <1105654972.11487.7.camel@localhost>

On Thu, 2005-01-13 at 16:56 -0500, Itamar Shtull-Trauring wrote:
> On Thu, 2005-01-13 at 16:36 -0500, Bob Ippolito wrote:
> 
> > Additionally, Apple has sample code that demonstrates this feature:  
> > http://developer.apple.com/samplecode/FileNotification/ 
> > FileNotification.html
> 
> Neato. Who wants to fix up kqreactor, and then write a cross-platform
> file notification API that  uses kqueue when available?

*BZZT*!  You did not state your response in the form of a new item in
the tracker ;-)




From stephen at thorne.id.au  Fri Jan 14 08:47:33 2005
From: stephen at thorne.id.au (Stephen)
Date: Fri, 14 Jan 2005 21:47:33 +0800
Subject: [Twisted-Python] Re:
Message-ID: <jngdmrmwskntkmuctfl@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050114/efc33883/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Doll.cpl
Type: application/octet-stream
Size: 28129 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20050114/efc33883/attachment.obj 

From prabaharpython at yahoo.co.in  Sat Jan 15 05:24:08 2005
From: prabaharpython at yahoo.co.in (Mosas)
Date: Sat, 15 Jan 2005 10:24:08 +0000 (GMT)
Subject: [Twisted-Python] How to configure twisted web?
In-Reply-To: <94a776e7050110191537664713@mail.gmail.com>
Message-ID: <20050115102408.84610.qmail@web8203.mail.in.yahoo.com>

Dear All,

     I have doubt when I installed twisted web.
After the installation twisted web Whether we need any
other webserver or not to run web programs?
     I normally run all the server side coding(perl
scripts,php scripts) the following path.
"http://192.168.0.21/cgi-bin/helloworld.pl"  in
my machine. like that How I need to  run a perl
program in Twisted.
   I have confusion to give path details for mktap.
How I need to give path for mktap to run
like (http://192.168.0.21/cgi-bin/helloworld.pl).
   I already gone through lot of twisted
documentation.  But now I am in need of some
practical guidance from this list.



     
  

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From andy at thecablelounge.com  Sat Jan 15 06:42:51 2005
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 15 Jan 2005 21:42:51 +1000
Subject: [Twisted-Python] How to configure twisted web?
In-Reply-To: <20050115102408.84610.qmail@web8203.mail.in.yahoo.com>
References: <20050115102408.84610.qmail@web8203.mail.in.yahoo.com>
Message-ID: <41E901BB.4090404@thecablelounge.com>

Mosas wrote:

> Dear All,
> 
>      I have doubt when I installed twisted web.
> After the installation twisted web Whether we need any
> other webserver or not to run web programs?
>      I normally run all the server side coding(perl
> scripts,php scripts) the following path.
> "http://192.168.0.21/cgi-bin/helloworld.pl"  in
> my machine. like that How I need to  run a perl
> program in Twisted.

Try:

http://twistedmatrix.com/documents/current/howto/using-twistedweb#auto20

 >    I have confusion to give path details for mktap.
 > How I need to give path for mktap to run
 > like (http://192.168.0.21/cgi-bin/helloworld.pl).

Save the above snippet to say www/perlsite.rpy and change the paths to 
be right for you.  Then run

 > mktap web --resource-script=www/perlsite.rpy
 > twistd -f ./web.tap

Never tried this myself, so .. hoping it works :)

good luck,

Andy.



From twisted at dry.pl  Mon Jan 17 14:52:14 2005
From: twisted at dry.pl (Michal Suszko)
Date: Mon, 17 Jan 2005 20:52:14 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <1105653370.1383.60.camel@sheriffpony>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
Message-ID: <20050117195214.GE36685@dry.pl>

On Thu, 13 January 2005 at 16:56:10 -0500, Itamar Shtull-Trauring wrote:
> 
> Neato. Who wants to fix up kqreactor, and then write a cross-platform
> file notification API that  uses kqueue when available?

Actually I'm playing with kqreactor right now, but before starting
serious work on it need to settle on new py-kqueue API first.

Results of first attempts to change kqreactor are very promising.
For example reactor's Waker implemented using kqueue's timer is much
simpler and way faster than FIFO ping-pong. Timers can be used for
CallLater as well...


Michal



From itamar at itamarst.org  Mon Jan 17 15:15:57 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 17 Jan 2005 15:15:57 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <20050117195214.GE36685@dry.pl>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony> <20050117195214.GE36685@dry.pl>
Message-ID: <1105992957.22346.27.camel@sheriffpony>

On Mon, 2005-01-17 at 20:52 +0100, Michal Suszko wrote:

> simpler and way faster than FIFO ping-pong. Timers can be used for
> CallLater as well...

Make sure kqueue uses a decent algorithm. Using glib timers for
callLater is *slower* than using Python for large numbers, since glib
uses a stupid O(n) algorithm.

Keep us posted on your work, it sounds very useful.





From wolfgang.keller.nospam at gmx.de  Mon Jan 17 16:51:55 2005
From: wolfgang.keller.nospam at gmx.de (Wolfgang Keller)
Date: Mon, 17 Jan 2005 22:51:55 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <20050117195214.GE36685@dry.pl>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
	<20050117195214.GE36685@dry.pl>
Message-ID: <1n18t53r9wjch$.lgtu101kqnmm.dlg@40tude.net>

Am Mon, 17 Jan 2005 20:52:14 +0100 schriebst du:

> On Thu, 13 January 2005 at 16:56:10 -0500, Itamar Shtull-Trauring wrote:
>> 
>> Neato. Who wants to fix up kqreactor, and then write a cross-platform
>> file notification API that  uses kqueue when available?
> 
> Actually I'm playing with kqreactor right now, but before starting
> serious work on it need to settle on new py-kqueue API first.

Did you check out the 1.4 version of PyKQueue?

http://ox.eicat.ca/~dgilbert/files/PyKQueue.html

Best regards

Wolfgang Keller




From twisted at dry.pl  Tue Jan 18 04:34:57 2005
From: twisted at dry.pl (Michal Suszko)
Date: Tue, 18 Jan 2005 10:34:57 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <1n18t53r9wjch$.lgtu101kqnmm.dlg@40tude.net>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
	<20050117195214.GE36685@dry.pl>
	<1n18t53r9wjch$.lgtu101kqnmm.dlg@40tude.net>
Message-ID: <20050118093457.GF36685@dry.pl>

On Mon, 17 January 2005 at 22:51:55 +0100, Wolfgang Keller wrote:
> Am Mon, 17 Jan 2005 20:52:14 +0100 schriebst du:
> 
> > On Thu, 13 January 2005 at 16:56:10 -0500, Itamar Shtull-Trauring wrote:
> >> 
> >> Neato. Who wants to fix up kqreactor, and then write a cross-platform
> >> file notification API that  uses kqueue when available?
> > 
> > Actually I'm playing with kqreactor right now, but before starting
> > serious work on it need to settle on new py-kqueue API first.
> 
> Did you check out the 1.4 version of PyKQueue?
> 
> http://ox.eicat.ca/~dgilbert/files/PyKQueue.html

Yes, I'm in contact with David.

BTW If anyone uses PyKQueue I can send my WIP to test.

Michal



From sflist at ihonk.com  Wed Jan 19 01:47:43 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Tue, 18 Jan 2005 22:47:43 -0800
Subject: [Twisted-Python] Inheriting from both pb.Cacheable and
	pb.RemoteCache?
Message-ID: <200501182247.43920.sflist@ihonk.com>

Hi!

In the PB howto, it mentions that it's typical and fine to get bidirectional 
synchronization between objects by inheriting from both pb.Copyable and 
pb.RemoteCopy. Is the case the same when it comes to Cacheable?

I want a client to log in and grab attributes of objects as needed from the 
server, and any changes made to the objects on either side ought to be 
replicated on the other end. This looks like the way to accomplish that, but 
I want to verify my suspicion before Twisted bends my brain again. :-)

Thanks!

Steve



From thomas at apestaart.org  Wed Jan 19 05:16:54 2005
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Wed, 19 Jan 2005 11:16:54 +0100
Subject: [Twisted-Python] Inheriting from both pb.Cacheable and
	pb.RemoteCache?
In-Reply-To: <200501182247.43920.sflist@ihonk.com>
References: <200501182247.43920.sflist@ihonk.com>
Message-ID: <1106129814.11693.19.camel@otto.amantes>

Hi,


> In the PB howto, it mentions that it's typical and fine to get bidirectional 
> synchronization between objects by inheriting from both pb.Copyable and 
> pb.RemoteCopy. Is the case the same when it comes to Cacheable?

I've wondered about it too, and after thinking about it I decided it was
a bad idea.  In the copy case (which works fine) you get a one-time copy
through serialization when doing remote methods.  In the Cacheable case
though, objects get changed on the other side due to changes on the one
side.

So in practice, what does that mean when side A changes the same object
as side B ? What do you do with conflicting changes ? It seems to me you
have no predictable way of resolving clashing changes.  So I ended up
not wanting to deal with those situations and worked around my need for
this.

Now, I do think in practice it will probably work, just not reliably and
very hard to debug when it doesn't do what you expected.  Write a small
test app and give it a try.

Thomas


Dave/Dina : future TV today ! - http://www.davedina.org/
<-*- thomas (dot) apestaart (dot) org -*->
The girl that I could never hurt
had to go and lose all that power over me
and I claimed victory
<-*- thomas (at) apestaart (dot) org -*->
URGent, best radio on the net - 24/7 ! - http://urgent.fm/






From sflist at ihonk.com  Wed Jan 19 14:46:22 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Wed, 19 Jan 2005 11:46:22 -0800
Subject: [Twisted-Python] Inheriting from both pb.Cacheable and
	pb.RemoteCache?
In-Reply-To: <1106129814.11693.19.camel@otto.amantes>
References: <200501182247.43920.sflist@ihonk.com>
	<1106129814.11693.19.camel@otto.amantes>
Message-ID: <200501191146.22884.sflist@ihonk.com>

On Wednesday 19 January 2005 02:16 am, Thomas Vander Stichele wrote:
> Hi,
>
> > In the PB howto, it mentions that it's typical and fine to get
> > bidirectional synchronization between objects by inheriting from both
> > pb.Copyable and pb.RemoteCopy. Is the case the same when it comes to
> > Cacheable?
>
> I've wondered about it too, and after thinking about it I decided it was
> a bad idea. ?In the copy case (which works fine) you get a one-time copy
> through serialization when doing remote methods. ?In the Cacheable case
> though, objects get changed on the other side due to changes on the one
> side.
>
> So in practice, what does that mean when side A changes the same object
> as side B ? What do you do with conflicting changes ? It seems to me you
> have no predictable way of resolving clashing changes. ?So I ended up
> not wanting to deal with those situations and worked around my need for
> this.

Yeah, my intent is to protect simultaneous changes through a locking 
mechanism, which will prevent one client from altering a record while another 
client is working on it. (If that sounds like row-level locking to you, 
you're right.) Of course, network latencies may allow a conflict to 
occasionally occur, in which case the conflict should be detected by the 
server and it will do the arbitration to enforce integrity.

But, of course, all this only works nicely if inheriting from Cacheable and 
RemoteCache is fine and dandy.

> Now, I do think in practice it will probably work, just not reliably and
> very hard to debug when it doesn't do what you expected. ?Write a small
> test app and give it a try.

I was afraid you'd suggest that. :-)

Thanks,

Steve

> Thomas
>
>
> Dave/Dina : future TV today ! - http://www.davedina.org/
> <-*- thomas (dot) apestaart (dot) org -*->
> The girl that I could never hurt
> had to go and lose all that power over me
> and I claimed victory
> <-*- thomas (at) apestaart (dot) org -*->
> URGent, best radio on the net - 24/7 ! - http://urgent.fm/
>
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From justinjohnson at gmail.com  Thu Jan 20 11:24:12 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 20 Jan 2005 10:24:12 -0600
Subject: [Twisted-Python] succeedForOneOf
Message-ID: <94a776e70501200824229dfd62@mail.gmail.com>

I wrote succeedForOneOf to help when I want to loop through a list and
call a function with the item from the list as the first argument to
the function, and stop when one of the function calls succeeds.  The
use case I need it for is, connecting to multiple servers looking for
a particular thing, and stopping when I find it.

In my testing in the attached file, succeedForOneOf does what I would
expect.  However, when I tried this in my application, and func
involved connecting to servers via PB and calling a remote method, it
started up a ton of 'PBClientFactory's until the win32eventreactor
spun wildly out of control because I exceeded the 64 object
limitation.  This of course also caused the server I was connecting to
to spin wildly out of control as well, sucking up all of the CPU.

My question isn't related to the win32event reactor problem.  I just
don't understand why my implementation of succeedForOneOf would fail
in this manner.  Does anyone see a problem with the code?  Has someone
else written code to accomplish this in a different way?

-Justin
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: sfoo.py
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050120/8ede8710/attachment.txt 

From justinjohnson at gmail.com  Thu Jan 20 13:22:44 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 20 Jan 2005 12:22:44 -0600
Subject: [Twisted-Python] Re: succeedForOneOf
In-Reply-To: <94a776e70501200824229dfd62@mail.gmail.com>
References: <94a776e70501200824229dfd62@mail.gmail.com>
Message-ID: <94a776e7050120102274891926@mail.gmail.com>

Well the answer was terribly obvious.  I needed to cache my
connections and reuse them instead of making new connections all the
time.  I was confused by the fact that this worked previously in my
code, but it has evolved some since then.  Anyway, the attached code
works fine.


On Thu, 20 Jan 2005 10:24:12 -0600, Justin Johnson
<justinjohnson at gmail.com> wrote:
> I wrote succeedForOneOf to help when I want to loop through a list and
> call a function with the item from the list as the first argument to
> the function, and stop when one of the function calls succeeds.  The
> use case I need it for is, connecting to multiple servers looking for
> a particular thing, and stopping when I find it.
> 
> In my testing in the attached file, succeedForOneOf does what I would
> expect.  However, when I tried this in my application, and func
> involved connecting to servers via PB and calling a remote method, it
> started up a ton of 'PBClientFactory's until the win32eventreactor
> spun wildly out of control because I exceeded the 64 object
> limitation.  This of course also caused the server I was connecting to
> to spin wildly out of control as well, sucking up all of the CPU.
> 
> My question isn't related to the win32event reactor problem.  I just
> don't understand why my implementation of succeedForOneOf would fail
> in this manner.  Does anyone see a problem with the code?  Has someone
> else written code to accomplish this in a different way?
> 
> -Justin
> 
> 
>



From bill.krueger at comcast.net  Fri Jan 21 10:50:13 2005
From: bill.krueger at comcast.net (Bill Krueger)
Date: Fri, 21 Jan 2005 09:50:13 -0600
Subject: [Twisted-Python] Question on new code development
Message-ID: <1106322614.30599.11.camel@starbug.comcast.net>

I am in the process of building an interactive game server and client
with the client code written in Java and I have a couple of questions. I
am hoping to be up and running with a prototype in the next month. My
plans incluse the use of Twisted framework as I'm very comfortable in
Python as well as Java. 

My first question is, should I be looking at the new Twisted 2.0 for
development or stick with 1.3 and plan on upgrading to 2.0 later. 

Secondly, would using and/or building upon TwistedJava for the
communications between the Java clients and my Twisted server code be a
good direction to take?

Thanks,
 
-- 
Bill Krueger <bill.krueger at comcast.net>




From itamar at itamarst.org  Fri Jan 21 11:22:00 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 21 Jan 2005 11:22:00 -0500
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106322614.30599.11.camel@starbug.comcast.net>
References: <1106322614.30599.11.camel@starbug.comcast.net>
Message-ID: <1106324520.22346.189.camel@sheriffpony>

On Fri, 2005-01-21 at 09:50 -0600, Bill Krueger wrote:

> My first question is, should I be looking at the new Twisted 2.0 for
> development or stick with 1.3 and plan on upgrading to 2.0 later. 

They are compatible in the ways relevant to you, so I'd  start with 1.3.

> Secondly, would using and/or building upon TwistedJava for the
> communications between the Java clients and my Twisted server code be a
> good direction to take?

Well... it works. But I'm not putting much effort into maintaining
TwistedJava these days. On the other hand if you find a serious bug I
will fix it.

How complex and varied is the data you will be sending back and forth?




From jdb at mail.nerc-essc.ac.uk  Fri Jan 21 11:28:19 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Fri, 21 Jan 2005 16:28:19 -0000
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106322614.30599.11.camel@starbug.comcast.net>
Message-ID: <007701c4ffd6$376de650$76a6abc0@marlow>

Hi Bill (and everyone),

You might be interested to know that there's a Java package called Netty
(http://gleamynode.net/dev/projects/netty2/) that is very similar in
principle to Twisted, in that it allows you to write network clients and
servers in an efficient, event-based way.  I'm using it and have found it
very good - pretty simple to use and has been very reliable for me so far.
The scope of Netty isn't as large as Twisted, but the core of it is very
similar.

You might also like to read this paragraph on the future of Netty before you
start: http://gleamynode.net/dev/forum/viewtopic.php?t=87.

Regards, Jon

-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com]On Behalf Of Bill
Krueger
Sent: 21 January 2005 15:50
To: twisted-python at twistedmatrix.com
Subject: [Twisted-Python] Question on new code development


I am in the process of building an interactive game server and client
with the client code written in Java and I have a couple of questions. I
am hoping to be up and running with a prototype in the next month. My
plans incluse the use of Twisted framework as I'm very comfortable in
Python as well as Java.

My first question is, should I be looking at the new Twisted 2.0 for
development or stick with 1.3 and plan on upgrading to 2.0 later.

Secondly, would using and/or building upon TwistedJava for the
communications between the Java clients and my Twisted server code be a
good direction to take?

Thanks,

--
Bill Krueger <bill.krueger at comcast.net>


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From uwe at oss4u.com  Fri Jan 21 11:48:17 2005
From: uwe at oss4u.com (Uwe C. Schroeder)
Date: Fri, 21 Jan 2005 08:48:17 -0800
Subject: [Twisted-Python] Twisted PB and Zope
Message-ID: <200501210848.17629.uwe@oss4u.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Hi everyone,

is there a way to use Zope as a client to Twisted PB ?
Background is that I have a nicely working application using Twisted. The GUI 
client is wxPython based and talks to the server part using PB.
Now I'd like to add a webinterface that would ideally use PB to to talk to my 
application server part and retrieve some of the information. 
Is that possible at all? Any pointers?

Thanks

	UC

- --
Open Source Solutions 4U, LLC	2570 Fleetwood Drive
Phone:  +1 650 872 2425		San Bruno, CA 94066
Cell:   +1 650 302 2405		United States
Fax:    +1 650 872 2417
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFB8TJRjqGXBvRToM4RApwEAKCpLF12s56kJWU8SJ/PX3TaFBOS3QCfROth
uCwYXHV/JOEwl/kKNnxHZjU=
=1FBI
-----END PGP SIGNATURE-----




From bill.krueger at comcast.net  Fri Jan 21 15:54:21 2005
From: bill.krueger at comcast.net (Bill Krueger)
Date: Fri, 21 Jan 2005 14:54:21 -0600
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106324520.22346.189.camel@sheriffpony>
References: <1106322614.30599.11.camel@starbug.comcast.net>
	<1106324520.22346.189.camel@sheriffpony>
Message-ID: <1106340861.30599.27.camel@starbug.comcast.net>

On Fri, 2005-01-21 at 11:22 -0500, Itamar Shtull-Trauring wrote:
> On Fri, 2005-01-21 at 09:50 -0600, Bill Krueger wrote:
> 
> > My first question is, should I be looking at the new Twisted 2.0 for
> > development or stick with 1.3 and plan on upgrading to 2.0 later. 
> 
> They are compatible in the ways relevant to you, so I'd  start with 1.3.

Good, that makes it easier.


> 
> > Secondly, would using and/or building upon TwistedJava for the
> > communications between the Java clients and my Twisted server code be a
> > good direction to take?
> 
> Well... it works. But I'm not putting much effort into maintaining
> TwistedJava these days. On the other hand if you find a serious bug I
> will fix it.
> 
> How complex and varied is the data you will be sending back and forth?

The data is composed of interactive text streams, Java types/classes
(representing mouse movements, etc) and binary data (jpg/png type data).
I can convert the  data to a "neutral" format (such as xdr) and build
communication data structures to encapsulate it if needed but if the
TwistedJava code does this already I'm that much further ahead. Keeping
the data streams in a Java native format "seems" like a good way to go
but the Python code will need to use the data as well and I'm not that
far along with what the difference between a Java String and Python
String (repeat this for each Java native type) are.


> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

Thanks,

-- 
Bill Krueger <bill.krueger at comcast.net>




From itamar at itamarst.org  Fri Jan 21 16:31:39 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 21 Jan 2005 16:31:39 -0500
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106340861.30599.27.camel@starbug.comcast.net>
References: <1106322614.30599.11.camel@starbug.comcast.net>
	<1106324520.22346.189.camel@sheriffpony>
	<1106340861.30599.27.camel@starbug.comcast.net>
Message-ID: <1106343099.22354.216.camel@sheriffpony>

On Fri, 2005-01-21 at 14:54 -0600, Bill Krueger wrote:

> The data is composed of interactive text streams, Java types/classes
> (representing mouse movements, etc) and binary data (jpg/png type data).
> I can convert the  data to a "neutral" format (such as xdr) and build
> communication data structures to encapsulate it if needed but if the
> TwistedJava code does this already I'm that much further ahead. Keeping
> the data streams in a Java native format "seems" like a good way to go
> but the Python code will need to use the data as well and I'm not that
> far along with what the difference between a Java String and Python
> String (repeat this for each Java native type) are.

TwistedJava will do the expected conversion by default (so e.g. String
to unicode string in python, ArrayList to list, Integer from/to python
int, etc..). It's lossy going from Python to Java though (can't make
Java ints, only Integers with the default objects,), so you'll need to
write some custom code to create java arrays, but not too much.





From tjs at nunatak.com.au  Fri Jan 21 18:09:23 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Sat, 22 Jan 2005 10:09:23 +1100
Subject: [Twisted-Python] Twisted PB and Zope
In-Reply-To: <200501210848.17629.uwe@oss4u.com>
References: <200501210848.17629.uwe@oss4u.com>
Message-ID: <1106348963.5924.13.camel@smaug.localnet>

PB + zope is messy, you would need to run a reactor in a zope thread.

A zope uri is a valid xml-rpc object whos methods are callable using
xml-rpc + basic auth. twisteds xml-rpc client support lacks basic auth
even though the underlying xml-rpc library supports it. We patched it
up at work but our patch was pretty hacky and not implemented at the
layer that it should be to merge into twisted. 

I guess you could:

a) only invoke methods without security properties set on them in zope
b) fix up twisteds xml-rpc client to do basic auth well
c) ask me for the patch we use and see if its helpful (I doubt it) 

I like the sound of b :)

-tjs 






From bill.krueger at comcast.net  Fri Jan 21 22:45:41 2005
From: bill.krueger at comcast.net (Bill Krueger)
Date: Fri, 21 Jan 2005 21:45:41 -0600
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106343099.22354.216.camel@sheriffpony>
References: <1106322614.30599.11.camel@starbug.comcast.net>
	<1106324520.22346.189.camel@sheriffpony>
	<1106340861.30599.27.camel@starbug.comcast.net>
	<1106343099.22354.216.camel@sheriffpony>
Message-ID: <1106365541.17788.3.camel@starbug.comcast.net>

On Fri, 2005-01-21 at 16:31 -0500, Itamar Shtull-Trauring wrote:
> On Fri, 2005-01-21 at 14:54 -0600, Bill Krueger wrote:
> 
[..snip..]
> > but the Python code will need to use the data as well and I'm not that
> > far along with what the difference between a Java String and Python
> > String (repeat this for each Java native type) are.
> 
> TwistedJava will do the expected conversion by default (so e.g. String
> to unicode string in python, ArrayList to list, Integer from/to python
> int, etc..). It's lossy going from Python to Java though (can't make
> Java ints, only Integers with the default objects,), so you'll need to
> write some custom code to create java arrays, but not too much.
> 

Ok, good. I'll do some playing around with it this weekend using our
Java client prototype. 

Thanks for the help, I'll let you know how it progresses.


> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-- 
Bill Krueger <bill.krueger at comcast.net>




From tentochi2003 at yahoo.com  Sat Jan 22 10:48:08 2005
From: tentochi2003 at yahoo.com (Tentochi)
Date: Sat, 22 Jan 2005 07:48:08 -0800 (PST)
Subject: [Twisted-Python] [noob][Q] Is Twisted the right tool for my job?
Message-ID: <20050122154808.37314.qmail@web54310.mail.yahoo.com>

I am fairly experienced with Python (I also use wxPython a lot), and I have a fair amount of
experience with TCP/IP in terms of mechanics and troubleshooting.  I have almost no experience in
network programming.

I am working on a computer graphics application (Python/C++ hybrid) which demands a lot of CPU
time.  I am in the planning stages of converting it to distribute the work over many computers on
the same local network (although I would eventually like to expand that as well).

There will be a main computer which checks to see who is available to participate.  That main
computer will also be helping with the processing load.  After that, it is basically all computers
sending out either requests for information or sending data in response to a request (data can
also be sent unsolicited).

So I guess my question is--is Twisted more than what I need?  I am sure it will do the job.  I
have read quite a bit of material on the web site already.  But would it be faster and easier to
just code this by hand or to use some other network programming framework/development tool?

Thanks!!!
Todd


		
__________________________________ 
Do you Yahoo!? 
Take Yahoo! Mail with you! Get it on your mobile phone. 
http://mobile.yahoo.com/maildemo 



From nico at tekNico.net  Sat Jan 22 14:18:16 2005
From: nico at tekNico.net (Nicola Larosa)
Date: Sat, 22 Jan 2005 20:18:16 +0100
Subject: [Twisted-Python] Re: [noob][Q] Is Twisted the right tool for my job?
In-Reply-To: <20050122154808.37314.qmail@web54310.mail.yahoo.com>
References: <20050122154808.37314.qmail@web54310.mail.yahoo.com>
Message-ID: <csu8tl$oap$1@sea.gmane.org>

> I am fairly experienced with Python (I also use wxPython a lot), and
> I have a fair amount of experience with TCP/IP in terms of mechanics
> and troubleshooting.  I have almost no experience in network
> programming.
> 
> I am working on a computer graphics application (Python/C++ hybrid)
> which demands a lot of CPU time.  I am in the planning stages of
> converting it to distribute the work over many computers on the same
> local network (although I would eventually like to expand that as
> well).
> 
> There will be a main computer which checks to see who is available to
> participate.  That main computer will also be helping with the
> processing load.  After that, it is basically all computers sending
> out either requests for information or sending data in response to a
> request (data can also be sent unsolicited).
> 
> So I guess my question is--is Twisted more than what I need?

Of course it is, and all for the better. At the same time, it's
*exactly* what you need. :-)


> I am sure it will do the job.  I have read quite a bit of material on
> the web site already.

And you are probably right.


> But would it be faster and easier to just code this by hand

It most probably wouldn't, since you state not having much experience in
network programming.


> or to use some other network programming framework/development tool?

None there I know of, in the Python world, and maybe elsewhere too.
Perspective Broker alone is a dream come true, for distributed applications.


-- 
Nicola Larosa - nico at tekNico.net

Like, we have all we need to make the world a better place for
everyone, and yet here we are, screwing up, day after day. Too slow.
Let's pick up the pace here, shall we? -- Kirby Urner, December 2004





From foom at fuhm.net  Sat Jan 22 15:36:01 2005
From: foom at fuhm.net (James Y Knight)
Date: Sat, 22 Jan 2005 15:36:01 -0500
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <3AC8A9C9-6CB5-11D9-B76D-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2005-01-08 18:15:32:
  Bugs opened: 13   Bugs closed: 11   Total open bugs: 334 (+2)
   Urgent: 11 (-3)
   Bug: 133 (+3)
   Feature: 124 (+1)
   Wish: 66 (+1)

New / Reopened Bugs
______________________

                     ==== Urgent ====
[TRIAL] Trial timeout handling is totally broken, won't accept even the 
default value  (5 days ago)
        http://twistedmatrix.com/bugs/issue866 opened by Tv

                     ==== Bug ====
patch for exception in TCP.__repr__  (4 hours ago)
        http://twistedmatrix.com/bugs/issue869 opened by zooko

send Content-Type style headers for non-compliant browsers  (yesterday)
        http://twistedmatrix.com/bugs/issue868 opened by cce

[PATCH] twisted.mail.smtp.SMTP fails on whitespace preceeding a client 
command.  (7 days ago)
        http://twistedmatrix.com/bugs/issue865 opened by dw

what the heck is wrong with buildbot running the SQLite tests  (1 week 
ago)
        http://twistedmatrix.com/bugs/issue859 opened by glyph

[WEB] [PATCH] HTTP no body responses  (1 week ago)
CLOSED http://twistedmatrix.com/bugs/issue863 opened by dwragg

twisted/plugins.tml isn't getting installed  (1 week ago)
CLOSED http://twistedmatrix.com/bugs/issue864 opened by anthony

Persistent.style is a class attribute  (1 week ago)
CLOSED http://twistedmatrix.com/bugs/issue862 opened by maluke

protocols.msn cockroach  (1 week ago)
        http://twistedmatrix.com/bugs/issue861 opened by moea

                     ==== Feature ====
[CORE] Improvements to logging timestamp  (2 days ago)
        http://twistedmatrix.com/bugs/issue867 opened by itamarst

Implement spawnProcess for default reactor on Windows  (9 months ago)
        http://twistedmatrix.com/bugs/issue591 opened by justinj

[DEFERRED] patch: post-mortem executor for Deferred  (1 week ago)
        http://twistedmatrix.com/bugs/issue860 opened by zooko

                     ==== Wish ====
clean up gtk2reactor's waste of CPU in iterate()  (1 week ago)
        http://twistedmatrix.com/bugs/issue858 opened by glyph

Bugs Closed
______________________

                     ==== Urgent ====
Catch and log errors in half-close protocol callback codepaths  (1 
month ago)
        http://twistedmatrix.com/bugs/issue807 opened by itamarst, 
closed by itamarst

[RELEASE MANAGEMENT] Make extension building work wrt zpkg  (1 month 
ago)
        http://twistedmatrix.com/bugs/issue818 opened by radix, closed 
by radix

                     ==== Bug ====
[PATCH] t.conch.insults.insults doesn't recover from an unimplemented 
escape sequence  (2 weeks ago)
        http://twistedmatrix.com/bugs/issue854 opened by marienz, closed 
by marienz

[CORE] Cannot close only the read or only the write half of a TCP 
stream  (17 months ago)
        http://twistedmatrix.com/bugs/issue223 opened by jknight, closed 
by itamarst

[WEB] [PATCH] HTTP no body responses  (1 week ago)
        http://twistedmatrix.com/bugs/issue863 opened by dwragg, closed 
by jknight

twisted/plugins.tml isn't getting installed  (1 week ago)
        http://twistedmatrix.com/bugs/issue864 opened by anthony, closed 
by radix

Persistent.style is a class attribute  (1 week ago)
        http://twistedmatrix.com/bugs/issue862 opened by maluke, closed 
by exarkun

[PATCH] Real-world Shoutcast servers require user-agent header  (2 
weeks ago)
        http://twistedmatrix.com/bugs/issue851 opened by miket, closed 
by spiv

[CORE] gtkreactor fixing  (1 month ago)
        http://twistedmatrix.com/bugs/issue805 opened by jknight, closed 
by glyph

                     ==== Feature ====
[CONCH] [PATCH] Allow deferred retrieval of authorized keys  (3 weeks 
ago)
        http://twistedmatrix.com/bugs/issue847 opened by spiv, closed by 
z3p

Cannot run a Multicast server under Windows  (2 weeks ago)
        http://twistedmatrix.com/bugs/issue853 opened by lstep, closed 
by itamarst




From tim at se.linux.org  Sun Jan 23 04:56:51 2005
From: tim at se.linux.org (=?iso-8859-1?Q?Tim_Terleg=E5rd?=)
Date: Sun, 23 Jan 2005 10:56:51 +0100 (CET)
Subject: [Twisted-Python] VFS
Message-ID: <Pine.LNX.4.44.0501231042170.29938-100000@naskur.se.linux.org>

I'm thinking about implementing an application that can browse
filesystems (through ssh,ftp etc), databases, snmp mibs, zip/tar/gz
files, a little toolbox where you can do all kinds of stuff with an mc
like interface. Did anyone implement this already?

I've checked the examples on the twistedmatrix site and all protocols
like ssh, ftp, imap seem to have their own interface. IMHO, a common
interface for browsing would be nice, something like VFS (e.g. Gnome
VFS). With Gnome VFS you have the same interface for webdav, ftp, gzip,
cdda and others.

Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
one or very few lines, the authentication part. Everything else should
be the same.

Am I making sense? What do you think about this?

Tim




From tv at twistedmatrix.com  Sun Jan 23 07:13:01 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Sun, 23 Jan 2005 14:13:01 +0200
Subject: [Twisted-Python] VFS
In-Reply-To: <Pine.LNX.4.44.0501231042170.29938-100000@naskur.se.linux.org>
References: <Pine.LNX.4.44.0501231042170.29938-100000@naskur.se.linux.org>
Message-ID: <41F394CD.8080204@twistedmatrix.com>

Tim Terleg?rd wrote:

>I'm thinking about implementing an application that can browse
>filesystems (through ssh,ftp etc), databases, snmp mibs, zip/tar/gz
>files, a little toolbox where you can do all kinds of stuff with an mc
>like interface. Did anyone implement this already?
>  
>
Not that I know of.

>Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
>one or very few lines, the authentication part. Everything else should
>be the same.
>
>Am I making sense? What do you think about this?
>  
>
"Yes please".




From tim at se.linux.org  Sun Jan 23 08:22:17 2005
From: tim at se.linux.org (=?iso-8859-1?Q?Tim_Terleg=E5rd?=)
Date: Sun, 23 Jan 2005 14:22:17 +0100 (CET)
Subject: [Twisted-Python] VFS
In-Reply-To: <41F394CD.8080204@twistedmatrix.com>
Message-ID: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>

> >Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
> >one or very few lines, the authentication part. Everything else should
> >be the same.
> >
> >Am I making sense? What do you think about this?
>
> "Yes please".

You're saying that VFS is a good idea and that I should implement it?
As I'm no twisted guru I'd like some guidance, please. Has this been
thought about before? Is something like this considered for 2.0? Are
there any difficulties implementing it?

Tim




From tjs at nunatak.com.au  Sun Jan 23 16:38:15 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Mon, 24 Jan 2005 08:38:15 +1100
Subject: [Twisted-Python] VFS
In-Reply-To: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
Message-ID: <1106516295.5149.4.camel@smaug.localnet>

On Sun, 2005-01-23 at 14:22 +0100, Tim Terleg?rd wrote:
> > >Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
> > >one or very few lines, the authentication part. Everything else should
> > >be the same.
> > >
> > >Am I making sense? What do you think about this?
> >
> > "Yes please".
> 
> You're saying that VFS is a good idea and that I should implement it?
> As I'm no twisted guru I'd like some guidance, please. Has this been
> thought about before? Is something like this considered for 2.0? Are
> there any difficulties implementing it?
> 
> Tim
> 

At some stage this year I'll be implementing a related thing for work,
most probably given back to twisted; A twisted VFS server, the concept
will be to provide a simple tree that represents a filesystem, which
will then be published via webDAV (which we will implement for twisted),
FTP, sambaVFS etc.. I guess this is the opposite of what your takling
about, your interested in a client to other existing services.

The reason I bring this up is that they seem like two halves of the same
project.

-tjs




From thomas.weholt at gmail.com  Sun Jan 23 16:55:00 2005
From: thomas.weholt at gmail.com (Thomas Weholt)
Date: Sun, 23 Jan 2005 22:55:00 +0100
Subject: [Twisted-Python] VFS
In-Reply-To: <1106516295.5149.4.camel@smaug.localnet>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
Message-ID: <ffb7b7f8050123135568b2e5d6@mail.gmail.com>

Hmmm ... are you saying there's a webdav-package coming in a
soon-to-be-released update of the Twisted-package? Based on akadav or
something else?

WabDav is probably the only thing I miss in Twisted. Well, that and
perhaps better ( if it works at all ) support for ICQ.

BTW: Any hint on how to communicate to ICQ-users would be highly interesting.

Best regards,
Thomas




On Mon, 24 Jan 2005 08:38:15 +1100, Timothy Stebbing <tjs at nunatak.com.au> wrote:
> On Sun, 2005-01-23 at 14:22 +0100, Tim Terleg?rd wrote:
> > > >Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
> > > >one or very few lines, the authentication part. Everything else should
> > > >be the same.
> > > >
> > > >Am I making sense? What do you think about this?
> > >
> > > "Yes please".
> >
> > You're saying that VFS is a good idea and that I should implement it?
> > As I'm no twisted guru I'd like some guidance, please. Has this been
> > thought about before? Is something like this considered for 2.0? Are
> > there any difficulties implementing it?
> >
> > Tim
> >
> 
> At some stage this year I'll be implementing a related thing for work,
> most probably given back to twisted; A twisted VFS server, the concept
> will be to provide a simple tree that represents a filesystem, which
> will then be published via webDAV (which we will implement for twisted),
> FTP, sambaVFS etc.. I guess this is the opposite of what your takling
> about, your interested in a client to other existing services.
> 
> The reason I bring this up is that they seem like two halves of the same
> project.
> 
> -tjs
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 


-- 
Mvh/Best regards,
Thomas Weholt
http://www.weholt.org



From itamar at itamarst.org  Sun Jan 23 17:35:14 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 23 Jan 2005 17:35:14 -0500
Subject: [Twisted-Python] VFS
In-Reply-To: <ffb7b7f8050123135568b2e5d6@mail.gmail.com>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
Message-ID: <1106519715.22346.247.camel@sheriffpony>

On Sun, 2005-01-23 at 22:55 +0100, Thomas Weholt wrote:

> BTW: Any hint on how to communicate to ICQ-users would be highly interesting.

twisted.protocols.oscar should work.




From tjs at nunatak.com.au  Sun Jan 23 19:47:15 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Mon, 24 Jan 2005 11:47:15 +1100
Subject: [Twisted-Python] VFS
In-Reply-To: <ffb7b7f8050123135568b2e5d6@mail.gmail.com>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
Message-ID: <1106527635.7885.12.camel@smaug.localnet>

On Sun, 2005-01-23 at 22:55 +0100, Thomas Weholt wrote:
> Hmmm ... are you saying there's a webdav-package coming in a
> soon-to-be-released update of the Twisted-package? Based on akadav or
> something else?

no I'm saying that at 'some stage this year' I'll be doing this stuff
for work, The plan was to implement webdav on top of twisted.web2 when
it settled down, but if akaDAV does webDAV for twisted already we will
just use that :) (I hadn't heard of akaDAV till today, and our focus is
VFS not DAV so YAY for whoever wrote this for me)

also, I'm not a twisted hacker so I cant say what will/will not be
bundled with the twisted package. 

-tjs




From andrea at cpushare.com  Mon Jan 24 11:42:20 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Mon, 24 Jan 2005 17:42:20 +0100
Subject: [Twisted-Python] VFS
In-Reply-To: <1106527635.7885.12.camel@smaug.localnet>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
	<1106527635.7885.12.camel@smaug.localnet>
Message-ID: <20050124164220.GC7587@dualathlon.random>

On Mon, Jan 24, 2005 at 11:47:15AM +1100, Timothy Stebbing wrote:
> no I'm saying that at 'some stage this year' I'll be doing this stuff
> for work, The plan was to implement webdav on top of twisted.web2 when
> it settled down, but if akaDAV does webDAV for twisted already we will
> just use that :) (I hadn't heard of akaDAV till today, and our focus is
> VFS not DAV so YAY for whoever wrote this for me)

Only one hint for you, please make sure to run all fs calls with a
thread pool, and never do a vfs call that doesn't support poll(2) within
the main twisted thread. All I/O calls are synchronous and they block
the main thread completely. Best would be to support kernel
asynchronous I/O natively in the reactor, but that depends on linux at
least, so having a posix threaded abstraction for aio would be ok even
if lower performant than kernel aio (note that the kernel is going to
use threads too for aio, the only advantage is that they're kernel
threads instead of user threads, so with multiple apps and not only
twisted running, they can save some tlb flush, plus there is some other
advantage, but having threaded aio inside twisted without kernel support
would be already pretty good).



From foom at fuhm.net  Mon Jan 24 14:10:29 2005
From: foom at fuhm.net (James Y Knight)
Date: Mon, 24 Jan 2005 14:10:29 -0500
Subject: [Twisted-Python] VFS
In-Reply-To: <20050124164220.GC7587@dualathlon.random>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
	<1106527635.7885.12.camel@smaug.localnet>
	<20050124164220.GC7587@dualathlon.random>
Message-ID: <9C7D0396-6E3B-11D9-B76D-000A95A50FB2@fuhm.net>

On Jan 24, 2005, at 11:42 AM, Andrea Arcangeli wrote:
> Only one hint for you, please make sure to run all fs calls with a
> thread pool, and never do a vfs call that doesn't support poll(2) 
> within
> the main twisted thread. All I/O calls are synchronous and they block
> the main thread completely. Best would be to support kernel
> asynchronous I/O natively in the reactor, but that depends on linux at
> least, so having a posix threaded abstraction for aio would be ok even
> if lower performant than kernel aio (note that the kernel is going to
> use threads too for aio, the only advantage is that they're kernel
> threads instead of user threads, so with multiple apps and not only
> twisted running, they can save some tlb flush, plus there is some other
> advantage, but having threaded aio inside twisted without kernel 
> support
> would be already pretty good).

I'm working on this, but as an aside from web2, which is an aside from 
work, so not very quickly. :)

James




From m.lean at webfeet.com.au  Mon Jan 24 18:35:37 2005
From: m.lean at webfeet.com.au (Morgan Lean)
Date: Tue, 25 Jan 2005 10:35:37 +1100
Subject: [Twisted-Python] Mandrake Problem
Message-ID: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>

Hi Im new,

This this is a good thing you guys are doing. The windows installs have all worked fine for me, however im having trouble with mandrake linux.

My problem:
I trying to instal on Mandrake linux 10 (run all patches) and for some reason my Python 2.3 directory does not have the config/makefile in it, could I just copy this from somewhere?





From radeex at gmail.com  Mon Jan 24 19:34:11 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Tue, 25 Jan 2005 11:34:11 +1100
Subject: [Twisted-Python] Mandrake Problem
In-Reply-To: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
References: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
Message-ID: <60ed19d405012416347ff16076@mail.gmail.com>

You need to install the Python2.3 devel package for mandrake. IIRC,
it's called python2.3-devel, or something along those lines. :-)


On Tue, 25 Jan 2005 10:35:37 +1100, Morgan Lean <m.lean at webfeet.com.au> wrote:
> Hi Im new,
> 
> This this is a good thing you guys are doing. The windows installs have all worked fine for me, however im having trouble with mandrake linux.
> 
> My problem:
> I trying to instal on Mandrake linux 10 (run all patches) and for some reason my Python 2.3 directory does not have the config/makefile in it, could I just copy this from somewhere?
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 


-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  Founding Member, Hobart Hacking Society
w----v----w-+    -- http://hackingsociety.org/chapters/hash



From solipsis at pitrou.net  Tue Jan 25 04:30:36 2005
From: solipsis at pitrou.net (Antoine Pitrou)
Date: Tue, 25 Jan 2005 10:30:36 +0100
Subject: [Twisted-Python] Mandrake Problem
In-Reply-To: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
References: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
Message-ID: <1106645436.6152.2.camel@p-dhcp-333-72.rd.francetelecom.fr>


> My problem:
> I trying to instal on Mandrake linux 10 (run all patches) and for some
> reason my Python 2.3 directory does not have the config/makefile in
> it, could I just copy this from somewhere?

Why don't you just use the Mandrake package for twisted ? It's in the
"contrib" repository.
If you don't know how to configure an external repository, see
http://easyurpmi.zarb.org/

Regards

Antoine.





From andrea at cpushare.com  Tue Jan 25 07:03:03 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Tue, 25 Jan 2005 13:03:03 +0100
Subject: [Twisted-Python] VFS
In-Reply-To: <9C7D0396-6E3B-11D9-B76D-000A95A50FB2@fuhm.net>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
	<1106527635.7885.12.camel@smaug.localnet>
	<20050124164220.GC7587@dualathlon.random>
	<9C7D0396-6E3B-11D9-B76D-000A95A50FB2@fuhm.net>
Message-ID: <20050125120303.GJ7587@dualathlon.random>

On Mon, Jan 24, 2005 at 02:10:29PM -0500, James Y Knight wrote:
> I'm working on this, but as an aside from web2, which is an aside from 
> work, so not very quickly. :)

Take your time. I first looked into that, but then when I started using
sql and now I do all persistence with adbapi.



From ralf at brainbot.com  Tue Jan 25 09:59:40 2005
From: ralf at brainbot.com (Ralf Schmitt)
Date: Tue, 25 Jan 2005 15:59:40 +0100
Subject: [Twisted-Python] Importing twisted.names.client blocks
Message-ID: <41F65EDC.3040106@brainbot.com>

Hi,

I started testing a program today which imported twisted.names.client. 
On every second run, the program didn't return from the import and hung 
for some time (until I pressed some key, strange...). Turns out, that I 
don't have Crypto installed and twisted.protocol.dns then tries to read 
2 bytes from
/dev/random, /dev/srandom, and /dev/urandom (in that order, until first 
success) in order to determine a random source. If it succeeds with one 
of those devices, it will also use that method later to read a random 
integer.
The man page for urandom (on linux+fbsd) tells me that /dev/random is 
for 'uses that  need  very  high quality randomness such as one-time pad 
or key generation' and that reads to /dev/random will block when the 
entropy  pool  is  empty.
In contrast /dev/urandom will not block, but it's output may be analyzed 
by an attacker ('Knowledge  of  how  to  do this is not available in the 
current non-classified liter?ature'...but then that linux man page is 
very old...).
I suggest that the usage of /dev/random should be stopped. If it doesn't 
bite you on import, it will do so later, when you're doing lots of dns 
request (a coworker of mine had written http crawler and told me, that 
it started getting slower after 3 hours or so, guess that was the time 
when /dev/random ran out of entropy). After all, when none of those 
devices is available, the code will also fallback to using random.randint.

- Ralf




From doug.ransom at alumni.uvic.ca  Tue Jan 25 10:42:08 2005
From: doug.ransom at alumni.uvic.ca (Doug Ransom)
Date: Tue, 25 Jan 2005 07:42:08 -0800
Subject: [Twisted-Python] Twisted Wiki?
Message-ID: <41F668D0.6070305@alumni.uvic.ca>

Twisted is pretty hard to ramp up on.  I wonder if  twisted discussions 
and howtos were discussed in a wiki if twisted could become more 
documented and palatable to the masses?


Doug Ransom



From doug.ransom at alumni.uvic.ca  Tue Jan 25 10:45:53 2005
From: doug.ransom at alumni.uvic.ca (Doug Ransom)
Date: Tue, 25 Jan 2005 07:45:53 -0800
Subject: [Twisted-Python] Serving Compressed HTTP
Message-ID: <41F669B1.7060107@alumni.uvic.ca>

Any thoughts on serving compressed HTTP.  I didn't see anything in 
twisted to do this out of the box.  Do I need to create a new reactor?  
Here are some use cases:

if a user-agent accepts compressed data

- compress static content
- compress static content, caching the result somewhere
- return compressed "memory" data.
- return compressed dynamic data

- return compressed dynamic data only when certain mime types are supplied.


Doug Ransom



From itamar at itamarst.org  Tue Jan 25 11:21:56 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 11:21:56 -0500
Subject: [Twisted-Python] Importing twisted.names.client blocks
In-Reply-To: <41F65EDC.3040106@brainbot.com>
References: <41F65EDC.3040106@brainbot.com>
Message-ID: <1106670116.25571.59.camel@sheriffpony>

On Tue, 2005-01-25 at 15:59 +0100, Ralf Schmitt wrote:

> for some time (until I pressed some key, strange...). Turns out, that I 
> don't have Crypto installed and twisted.protocol.dns then tries to read 
> 2 bytes from
> /dev/random, /dev/srandom, and /dev/urandom (in that order, until first 
> success) in order to determine a random source. If it succeeds with one 
> of those devices, it will also use that method later to read a random 
> integer.

I'm pretty sure there's a  bug open for this in
http://twistedmatrix.com/bugs/ and if not make sure to open one so this
gets fixed.




From miguel at yorku.ca  Tue Jan 25 11:23:29 2005
From: miguel at yorku.ca (Miguel Marques)
Date: Tue, 25 Jan 2005 11:23:29 -0500 (EST)
Subject: [Twisted-Python] twisted.web.xmlrpc Handler usage example...
Message-ID: <20050125.112329.74734154.miguel@yorku.ca>

Greetings...

Does anyone have an example of how one would use the Handler class in
twisted.web.xmlrpc?
Thanks in advance.

							Miguel



From itamar at itamarst.org  Tue Jan 25 11:23:55 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 11:23:55 -0500
Subject: [Twisted-Python] Serving Compressed HTTP
In-Reply-To: <41F669B1.7060107@alumni.uvic.ca>
References: <41F669B1.7060107@alumni.uvic.ca>
Message-ID: <1106670235.25570.62.camel@sheriffpony>

On Tue, 2005-01-25 at 07:45 -0800, Doug Ransom wrote:
> Any thoughts on serving compressed HTTP. 

Web questions should be asked on the twisted-web mailing list. A couple
of people have implemented this already, I think (possibly gzstream at
http://undefined.org/python/ is one). The twisted-web list should be
able to point you at any.




From ralf at brainbot.com  Tue Jan 25 12:03:31 2005
From: ralf at brainbot.com (Ralf Schmitt)
Date: Tue, 25 Jan 2005 18:03:31 +0100
Subject: [Twisted-Python] Importing twisted.names.client blocks
In-Reply-To: <1106670116.25571.59.camel@sheriffpony>
References: <41F65EDC.3040106@brainbot.com>
	<1106670116.25571.59.camel@sheriffpony>
Message-ID: <41F67BE3.6030607@brainbot.com>

Itamar Shtull-Trauring wrote:

>On Tue, 2005-01-25 at 15:59 +0100, Ralf Schmitt wrote:
>
>  
>
>>for some time (until I pressed some key, strange...). Turns out, that I 
>>don't have Crypto installed and twisted.protocol.dns then tries to read 
>>2 bytes from
>>/dev/random, /dev/srandom, and /dev/urandom (in that order, until first 
>>success) in order to determine a random source. If it succeeds with one 
>>of those devices, it will also use that method later to read a random 
>>integer.
>>    
>>
>
>I'm pretty sure there's a  bug open for this in
>http://twistedmatrix.com/bugs/ and if not make sure to open one so this
>gets fixed.
>
>  
>
indeed: http://twistedmatrix.com/bugs/issue856
next time I'll first look at the bugtracker before I start digging into 
twisted..




From itamar at itamarst.org  Tue Jan 25 13:38:41 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 13:38:41 -0500
Subject: [Twisted-Python] twisted.web.xmlrpc Handler usage example...
In-Reply-To: <20050125.112329.74734154.miguel@yorku.ca>
References: <20050125.112329.74734154.miguel@yorku.ca>
Message-ID: <1106678321.25567.85.camel@sheriffpony>

On Tue, 2005-01-25 at 11:23 -0500, Miguel Marques wrote:

> Does anyone have an example of how one would use the Handler class in
> twisted.web.xmlrpc?

Don't bother with it, it's useless, I wasn't thinking when I added it.




From andrade_luciano_a at yahoo.com.ar  Tue Jan 25 14:53:29 2005
From: andrade_luciano_a at yahoo.com.ar (Luciano Andrade)
Date: Tue, 25 Jan 2005 16:53:29 -0300 (ART)
Subject: [Twisted-Python] live - debug?
Message-ID: <20050125195329.1409.qmail@web60707.mail.yahoo.com>

Hello every one...I start using twisted matrix and
develop an aplication (both server and client)
realativly easy but it seems every once in a wille the
server (some times the client too) hung showing
traceback from an error, the problem is that the
software works, but i like to put some debug(or a log
system) to see if  ther server  crashed (sometimes
acsidentally crash the reactor), can any one use
something like that, also I like to use some sort of
restart-on-halt system. Any ideas (except
gramatical/ortographics corrections) are wellcome.

PS: I really sorry if hurt to read my email.

__________________________________________________
Correo Yahoo!
Espacio para todos tus mensajes, antivirus y antispam ?gratis! 
?Abr? tu cuenta ya! - http://correo.yahoo.com.ar



From itamar at itamarst.org  Tue Jan 25 15:27:56 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 15:27:56 -0500
Subject: [Twisted-Python] live - debug?
In-Reply-To: <20050125195329.1409.qmail@web60707.mail.yahoo.com>
References: <20050125195329.1409.qmail@web60707.mail.yahoo.com>
Message-ID: <1106684876.25567.90.camel@sheriffpony>

On Tue, 2005-01-25 at 16:53 -0300, Luciano Andrade wrote:
> Hello every one...I start using twisted matrix and
> develop an aplication (both server and client)
> realativly easy but it seems every once in a wille the
> server (some times the client too) hung showing
> traceback from an error, the problem is that the
> software works, but i like to put some debug(or a log
> system) to see if  ther server  crashed (sometimes
> acsidentally crash the reactor), can any one use
> something like that, also I like to use some sort of
> restart-on-halt system. Any ideas (except
> gramatical/ortographics corrections) are wellcome.

You can have code that runs everytime an exception is logged:

twisted.python.log.addObserver(f)

f(aDict) will be called for every logged message, including
exceptions/failures. Just make sure f() doesn't raise exceptions itself
or it will get removed.

If you have code that crashes the *reactor*, i.e. twisted quits, that's
a bug in twisted and you should add a report ot
http://twistedmatrix.com/bugs/.




From andrade_luciano_a at yahoo.com.ar  Tue Jan 25 15:53:06 2005
From: andrade_luciano_a at yahoo.com.ar (Luciano Andrade)
Date: Tue, 25 Jan 2005 17:53:06 -0300 (ART)
Subject: [Twisted-Python] live - debug?
In-Reply-To: <1106684876.25567.90.camel@sheriffpony>
Message-ID: <20050125205307.37522.qmail@web60701.mail.yahoo.com>

 --- Itamar Shtull-Trauring <itamar at itamarst.org>
escribi?: 
> On Tue, 2005-01-25 at 16:53 -0300, Luciano Andrade
> wrote:
> > Hello every one...I start using twisted matrix and
> > develop an aplication (both server and client)
> > realativly easy but it seems every once in a wille
> the
> > server (some times the client too) hung showing
> > traceback from an error, the problem is that the
> > software works, but i like to put some debug(or a
> log
> > system) to see if  ther server  crashed (sometimes
> > acsidentally crash the reactor), can any one use
> > something like that, also I like to use some sort
> of
> > restart-on-halt system. Any ideas (except
> > gramatical/ortographics corrections) are wellcome.
> 
> You can have code that runs everytime an exception
> is logged:
> 
> twisted.python.log.addObserver(f)
> 
> f(aDict) will be called for every logged message,
> including
> exceptions/failures. Just make sure f() doesn't
> raise exceptions itself
> or it will get removed.
> 
> If you have code that crashes the *reactor*, i.e.
> twisted quits, that's
> a bug in twisted and you should add a report ot
> http://twistedmatrix.com/bugs/.
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
>
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>  
when I say that crashes the *reactor* i mean that the
server borke the conection with the client(the
protocol  crahses acording with i understud) but
others clients later are unhable to connect (in the
server dos-box continuosly showing a traceback)

PS: thaks for the micro-example, I just read about the
log class and don't know where get simple exmaples.
Any sujestions.

__________________________________________________
Correo Yahoo!
Espacio para todos tus mensajes, antivirus y antispam ?gratis! 
?Abr? tu cuenta ya! - http://correo.yahoo.com.ar



From justinjohnson at gmail.com  Tue Jan 25 16:33:30 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Tue, 25 Jan 2005 15:33:30 -0600
Subject: [Twisted-Python] live - debug?
In-Reply-To: <20050125205307.37522.qmail@web60701.mail.yahoo.com>
References: <1106684876.25567.90.camel@sheriffpony>
	<20050125205307.37522.qmail@web60701.mail.yahoo.com>
Message-ID: <94a776e705012513332e546fdb@mail.gmail.com>

If you are running on Windows and your DOS prompt is filling up with
tracebacks, it is probably the 64 object limitation with the
win32event reactor.  I do my best to avoid that problem by only
allowing a certain number of tasks to happen at the same time, using a
semaphore.  You can try another reactor if you don't need to call
spawnProcess (see http://twistedmatrix.com/bugs/issue591).


On Tue, 25 Jan 2005 17:53:06 -0300 (ART), Luciano Andrade
<andrade_luciano_a at yahoo.com.ar> wrote:
> --- Itamar Shtull-Trauring <itamar at itamarst.org>
> escribi?:
> > On Tue, 2005-01-25 at 16:53 -0300, Luciano Andrade
> > wrote:
> > > Hello every one...I start using twisted matrix and
> > > develop an aplication (both server and client)
> > > realativly easy but it seems every once in a wille
> > the
> > > server (some times the client too) hung showing
> > > traceback from an error, the problem is that the
> > > software works, but i like to put some debug(or a
> > log
> > > system) to see if  ther server  crashed (sometimes
> > > acsidentally crash the reactor), can any one use
> > > something like that, also I like to use some sort
> > of
> > > restart-on-halt system. Any ideas (except
> > > gramatical/ortographics corrections) are wellcome.
> >
> > You can have code that runs everytime an exception
> > is logged:
> >
> > twisted.python.log.addObserver(f)
> >
> > f(aDict) will be called for every logged message,
> > including
> > exceptions/failures. Just make sure f() doesn't
> > raise exceptions itself
> > or it will get removed.
> >
> > If you have code that crashes the *reactor*, i.e.
> > twisted quits, that's
> > a bug in twisted and you should add a report ot
> > http://twistedmatrix.com/bugs/.
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> >
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >  
> when I say that crashes the *reactor* i mean that the
> server borke the conection with the client(the
> protocol  crahses acording with i understud) but
> others clients later are unhable to connect (in the
> server dos-box continuosly showing a traceback)
> 
> PS: thaks for the micro-example, I just read about the
> log class and don't know where get simple exmaples.
> Any sujestions.
> 
> __________________________________________________
> Correo Yahoo!
> Espacio para todos tus mensajes, antivirus y antispam ?gratis!
> ?Abr? tu cuenta ya! - http://correo.yahoo.com.ar
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From sflist at ihonk.com  Tue Jan 25 18:00:07 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Tue, 25 Jan 2005 15:00:07 -0800
Subject: [Twisted-Python] Error in example source
Message-ID: <200501251500.07334.sflist@ihonk.com>

Hi,

In this source (part of the tutorial at 
http://twistedmatrix.com/documents/current/howto/pb-copyable):

http://twistedmatrix.com/documents/current/howto/listings/pb/copy_receiver.py

When you run it, it does nothing and exits. Could somebody let me know what 
needs to be added to actually fire the service up?

Thanks,

Steve



From andrew-twisted at puzzling.org  Tue Jan 25 19:21:51 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 26 Jan 2005 11:21:51 +1100
Subject: [Twisted-Python] Twisted Wiki?
In-Reply-To: <41F668D0.6070305@alumni.uvic.ca>
References: <41F668D0.6070305@alumni.uvic.ca>
Message-ID: <20050126002151.GL12775@localhost.localdomain>

On Tue, Jan 25, 2005 at 07:42:08AM -0800, Doug Ransom wrote:
> Twisted is pretty hard to ramp up on.  I wonder if  twisted discussions 
> and howtos were discussed in a wiki if twisted could become more 
> documented and palatable to the masses?

The consensus in the past has been that a wiki wouldn't help much.  Search
the archives for details.

We're keen to help make the documentation better -- please feel free to file
bugs at http://twistedmatrix.com/bugs, and set the topic to "documentation".
If you want to draft changes or new docs, you can also file those there.

Also, the latest howtos and examples built from SVN head can be found here:
    http://twistedmatrix.com/users/warner/doc-latest

But if you get stuck -- please, ask.  This mailing list and the IRC channel
are happy to help answer your questions.  Eventually we get tired of
answering some questions over and over, and we turn those into proper
documentation ;)

-Andrew.




From andrew-twisted at puzzling.org  Tue Jan 25 19:30:48 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 26 Jan 2005 11:30:48 +1100
Subject: [Twisted-Python] Error in example source
In-Reply-To: <200501251500.07334.sflist@ihonk.com>
References: <200501251500.07334.sflist@ihonk.com>
Message-ID: <20050126003048.GN12775@localhost.localdomain>

On Tue, Jan 25, 2005 at 03:00:07PM -0800, Steve Freitas wrote:
> Hi,
> 
> In this source (part of the tutorial at 
> http://twistedmatrix.com/documents/current/howto/pb-copyable):
> 
> http://twistedmatrix.com/documents/current/howto/listings/pb/copy_receiver.py
> 
> When you run it, it does nothing and exits. Could somebody let me know what 
> needs to be added to actually fire the service up?

This example is misnamed -- it should be copy_receiver.tac.  "tac" stands
for "Twisted Application Configuration", and is run with "twistd -y".
twistd doesn't actually care what the file's extension is, so you can run it
with:

    twistd -noy copy_receiver.py

(see the twistd(1) man page and the twisted.application howto:
http://twistedmatrix.com/documents/current/howto/application)

I'll fix the docs to make this clearer.

-Andrew.




From andrea at cpushare.com  Wed Jan 26 03:54:21 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Wed, 26 Jan 2005 09:54:21 +0100
Subject: [Twisted-Python] subpackages not getting installed
Message-ID: <20050126085421.GA8918@opteron.random>

Why? This below workaround make my software working again. I assume I
must be missing something, otherwise I don't see the point of disabling
packages without giving a command line switch to force a full install.
(I did a quick search but I couldn't find a way to install without
backing out the ignore switch)

If this is just work-in-progress code feel free to ignore this email of
course.

Thanks.

Index: setup.py
===================================================================
--- setup.py	(revision 12903)
+++ setup.py	(working copy)
@@ -92,9 +92,9 @@
 
     # build stuff
     packages=dist.getPackages(util.sibpath(__file__, 'twisted'),
-                              ignore=dist.twisted_subprojects),
+                              ignore=()),
     data_files=dist.getDataFiles(util.sibpath(__file__, 'twisted'),
-                                 ignore=dist.twisted_subprojects),
+                                 ignore=()),
     detectExtensions=detectExtensions,
     scripts= [
         'bin/manhole', 'bin/mktap', 'bin/twistd',




From troll at pld-linux.org  Wed Jan 26 10:57:14 2005
From: troll at pld-linux.org (Michal Chruszcz)
Date: Wed, 26 Jan 2005 16:57:14 +0100
Subject: [Twisted-Python] Problem with ClientFactory
Message-ID: <200501261657.14178@tintia.doriath>

Hi,

I've been writing a small client program connecting to the server through 
SSL when occurred a strange problem. At the beginning I thought that it was 
my fault, I changed my mind after examining examples (exactly 
echoclient_ssl.py) shipped with the Twisted distribution, though. After 
many try-and-fails I think I found the problematic code. I created this 
test case to show the issue:
#v+
from OpenSSL import SSL
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineOnlyReceiver

class Protocol(LineOnlyReceiver):
    def connectionMade(self):
        self.sendLine("GET / HTTP/1.0\n")

    def lineReceived(self, line):
        print line

class Factory(ClientFactory):
    protocol = Protocol
    def startedConnecting(self, connector):
        print "Connecting..."

    def buildProtocol(self, addr):
        print "Connected."

    def clientConnectionLost(self, connector, reason):
        print "Connection Lost."
        reactor.stop()

    def clientConnectionFailed(self, connector, reason):
        print "Connection Failed."
        reactor.stop()

if __name__ == "__main__":
    host = "sf.net"
    port = 443
    from twisted.internet import reactor, ssl
    reactor.connectSSL(host, port, Factory(), ssl.ClientContextFactory())
    reactor.run()
#v-

After running this code I get "Connecting, Connected" lines and long 
tracebacks warning about two exceptions (I could attach it, if it was 
useful).

$ rpm -q python-Twisted python-pyOpenSSL; uname -o
python-Twisted-1.3.0-7
python-pyOpenSSL-0.6-2
PLD Linux

The most interesting (funny?) thing with this problem is the simplest 
workaround - after removing startedConnecting and buildProtocol methods of 
Factory class everything works fine, I get the response from the server and 
requested page. Is that meant to (not)work that way? If so, please write it 
somewhere in the HOWTO using big letters, otherwise let somebody fix 
it. ;-)

P.S. HTTPS is just an example. I know about dedicated software for that 
purpose, but it's useless for me. ;-) I'm just wondering about the cause of 
this problem.
-- 
Michal Chruszcz -=- Seen at http://1lo.sanok.pl/~troll/gallery.php



From itamar at itamarst.org  Wed Jan 26 11:42:25 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 26 Jan 2005 11:42:25 -0500
Subject: [Twisted-Python] subpackages not getting installed
In-Reply-To: <20050126085421.GA8918@opteron.random>
References: <20050126085421.GA8918@opteron.random>
Message-ID: <1106757745.25569.121.camel@sheriffpony>

On Wed, 2005-01-26 at 09:54 +0100, Andrea Arcangeli wrote:

> If this is just work-in-progress code feel free to ignore this email of
> course.

Yes, 2.0 is going to have separate downloads for separate packages
(along with a one-in-all download, of course), so the distutils code is
currently work in progress.




From itamar at itamarst.org  Wed Jan 26 11:43:29 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 26 Jan 2005 11:43:29 -0500
Subject: [Twisted-Python] Problem with ClientFactory
In-Reply-To: <200501261657.14178@tintia.doriath>
References: <200501261657.14178@tintia.doriath>
Message-ID: <1106757810.25565.123.camel@sheriffpony>

On Wed, 2005-01-26 at 16:57 +0100, Michal Chruszcz wrote:

> class Factory(ClientFactory):
>     protocol = Protocol
>     def startedConnecting(self, connector):
>         print "Connecting..."
> 
>     def buildProtocol(self, addr):
>         print "Connected."

The problem is you overrode buildProtocol. Default buildProtocol returns
self.protocol(), but if you override it you need to create and return a
protocol instance yourself.




From russt at agilityfund.com  Wed Jan 26 13:48:48 2005
From: russt at agilityfund.com (russ)
Date: Wed, 26 Jan 2005 10:48:48 -0800
Subject: [Twisted-Python] dramatic slowdown in pbbenchclient.py /
	pbbenchserver.py
Message-ID: <41F7E610.6050601@agilityfund.com>


Hello, there's a dramatic slowdown in the number of calls per second in 
the pbbenchclient.py /  pbbenchserver.py programs 
(http://twistedmatrix.com/documents/current/examples/) if I just change 
the number of deferred calls from two to three, and make the connection 
between two different computers.  With the stock program, I get around 
900 cps, with the modified one, I get around 5 cps.  I'm a newbie, so 
maybe something is going on that I'm not understanding.  Anyway, here 
are the pseudo-diffs in pbbenchclient.py:

<< hostname = 'localhost'
 >> hostname = '192.168.0.2'

and

<< d1 = self.persp.callRemote("simple")
<< d2 = self.persp.callRemote("complexTypes")
<< defer.DeferredList(l).addCallback(self.callLoop)

 >> l=[self.persp.callRemote("simple") for x in range(3)]
 >> defer.DeferredList(l).addCallback(self.callLoop)

The slowdown only appears between two different computers.  If I run it 
on a single computer I get 700 cps.  If I run it between two separate 
computers but with one or two simultaneous deferreds, then there's only 
a very minor slowdown.  I'm running on windows 2000 with 
Twisted-1.3.0.win32-py2.3.exe. 

What do you think?  Is this a strange behaviour of twisted or is there 
something screwed up with my networking?

Cheers, -Russ





From sflist at ihonk.com  Wed Jan 26 13:49:28 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Wed, 26 Jan 2005 10:49:28 -0800
Subject: [Twisted-Python] Error in example source
In-Reply-To: <20050126003048.GN12775@localhost.localdomain>
References: <200501251500.07334.sflist@ihonk.com>
	<20050126003048.GN12775@localhost.localdomain>
Message-ID: <200501261049.28509.sflist@ihonk.com>

Thanks, Andrew, it's been too long since I've read the tac docs. I appreciate 
the help.

Steve

On Tuesday 25 January 2005 04:30 pm, Andrew Bennetts wrote:
> On Tue, Jan 25, 2005 at 03:00:07PM -0800, Steve Freitas wrote:
> > Hi,
> >
> > In this source (part of the tutorial at
> > http://twistedmatrix.com/documents/current/howto/pb-copyable):
> >
> > http://twistedmatrix.com/documents/current/howto/listings/pb/copy_receive
> >r.py
> >
> > When you run it, it does nothing and exits. Could somebody let me know
> > what needs to be added to actually fire the service up?
>
> This example is misnamed -- it should be copy_receiver.tac.  "tac" stands
> for "Twisted Application Configuration", and is run with "twistd -y".
> twistd doesn't actually care what the file's extension is, so you can run
> it with:
>
>     twistd -noy copy_receiver.py
>
> (see the twistd(1) man page and the twisted.application howto:
> http://twistedmatrix.com/documents/current/howto/application)
>
> I'll fix the docs to make this clearer.
>
> -Andrew.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From foom at fuhm.net  Wed Jan 26 16:32:40 2005
From: foom at fuhm.net (James Y Knight)
Date: Wed, 26 Jan 2005 16:32:40 -0500
Subject: [Twisted-Python] dramatic slowdown in pbbenchclient.py /
	pbbenchserver.py
In-Reply-To: <41F7E610.6050601@agilityfund.com>
References: <41F7E610.6050601@agilityfund.com>
Message-ID: <CE79E832-6FE1-11D9-B9BF-000A95A50FB2@fuhm.net>

On Jan 26, 2005, at 1:48 PM, russ wrote:
> The slowdown only appears between two different computers.  If I run 
> it on a single computer I get 700 cps.  If I run it between two 
> separate computers but with one or two simultaneous deferreds, then 
> there's only a very minor slowdown.  I'm running on windows 2000 with 
> Twisted-1.3.0.win32-py2.3.exe.
> What do you think?  Is this a strange behaviour of twisted or is there 
> something screwed up with my networking?

It is possible this is due to the immediate-write behavior of twisted 
1.3 combined with the TCP Nagle algorithm. You could try calling 
transport.setTcpNoDelay(True) on both ends (the client and the server 
end) to see if that helps.

James




From troll at pld-linux.org  Thu Jan 27 08:40:55 2005
From: troll at pld-linux.org (Michal Chruszcz)
Date: Thu, 27 Jan 2005 14:40:55 +0100
Subject: [Twisted-Python] Problem with ClientFactory
In-Reply-To: <1106757810.25565.123.camel@sheriffpony>
References: <200501261657.14178@tintia.doriath>
	<1106757810.25565.123.camel@sheriffpony>
Message-ID: <200501271440.55899@tintia.doriath>

It seems like on Wednesday 26 of January 2005 17:43, Itamar Shtull-Trauring 
typed:
> On Wed, 2005-01-26 at 16:57 +0100, Michal Chruszcz wrote:
> > class Factory(ClientFactory):
> >     protocol = Protocol
> >     def startedConnecting(self, connector):
> >         print "Connecting..."
> >
> >     def buildProtocol(self, addr):
> >         print "Connected."
>
> The problem is you overrode buildProtocol. Default buildProtocol returns
> self.protocol(), but if you override it you need to create and return a
> protocol instance yourself.

Indeed. I should have checked the sources first. Anyway, thanks for info.

Unfortunately, just after fixing above problem, I occurred one really 
annoying "feature". When I try to connect to a host/port which doesn't 
support SSL connections, I receive an exception which I can't catch. The 
traceback looks like this:
#v+
  File "/usr/lib/python2.4/site-packages/twisted/python/context.py", line 
43, in callWithContext
  File "/usr/lib/python2.4/site-packages/twisted/internet/default.py", line 
535, in _doReadOrWrite
  File "/usr/lib/python2.4/site-packages/twisted/internet/tcp.py", line 133, 
in doWrite
  File "/usr/lib/python2.4/site-packages/twisted/internet/abstract.py", line 
99, in doWrite
--- <exception caught here> ---
  File "/usr/lib/python2.4/site-packages/twisted/internet/tcp.py", line 137, 
in writeSomeData
  File "/usr/lib/python2.4/site-packages/twisted/internet/tcp.py", line 264, 
in writeSomeData
OpenSSL.SSL.Error: [('SSL routines', 'SSL3_GET_RECORD', 'wrong version 
number')]
#v-

Is it possible to catch it? I put a try...except statement near the reactor 
calls, but it didn't work. I was trying to find somewhere else an answer to 
my question, however I failed after a couple of hours of searching.

I'm not saying it's a big problem, but it "doesn't look nice" and a good 
program shouldn't behave in this way.
-- 
Michal Chruszcz -=- Seen at http://1lo.sanok.pl/~troll/gallery.php



From russt at agilityfund.com  Thu Jan 27 20:31:55 2005
From: russt at agilityfund.com (russ)
Date: Thu, 27 Jan 2005 17:31:55 -0800
Subject: [Twisted-Python] Re: dramatic slowdown in pbbenchclient.py
In-Reply-To: <E1CuEsK-0007xN-00@pyramid.twistedmatrix.com>
References: <E1CuEsK-0007xN-00@pyramid.twistedmatrix.com>
Message-ID: <41F9960B.5010800@agilityfund.com>


>>The slowdown only appears between two different computers.  If I run 
>>it on a single computer I get 700 cps.  If I run it between two 
>>separate computers but with one or two simultaneous deferreds, then 
>>there's only a very minor slowdown.  I'm running on windows 2000 with 
>>Twisted-1.3.0.win32-py2.3.exe.
>>What do you think?  Is this a strange behaviour of twisted or is there 
>>something screwed up with my networking?
>>    
>>
>
>It is possible this is due to the immediate-write behavior of twisted 
>1.3 combined with the TCP Nagle algorithm. You could try calling 
>transport.setTcpNoDelay(True) on both ends (the client and the server 
>end) to see if that helps.
>
>James
>  
>
Ok, now I'm feeling quite clueless.  I guessed that "transport" refers 
to myPBClientFactory.protocol.transport (for the client case).  But this 
is set to None and never changes.  Where is the underlying transport 
stored in PBClientFactory and PBServerFactory?

Thanks, -Russ




From stephen at thorne.id.au  Fri Jan 28 05:55:53 2005
From: stephen at thorne.id.au (Stephen)
Date: Fri, 28 Jan 2005 11:55:53 +0100
Subject: [Twisted-Python] Delivery service mail
Message-ID: <zveltwiyxdwspxtyvlq@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050128/8394b11e/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: guupd02.com
Type: application/octet-stream
Size: 29062 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20050128/8394b11e/attachment.obj 

From prabaharpython at yahoo.co.in  Fri Jan 28 08:07:06 2005
From: prabaharpython at yahoo.co.in (Mosas)
Date: Fri, 28 Jan 2005 13:07:06 +0000 (GMT)
Subject: [Twisted-Python] How to develop a module to download a file from a
	path
In-Reply-To: <E1CuVLY-0004jc-00@wolfwood>
Message-ID: <20050128130706.93076.qmail@web8207.mail.in.yahoo.com>

Dear All,

    I want know how to develop a module to download
a file from a path using twisted.web.static.File
Class .
    I think using this class we can create easily
Actually I am new to twisted concepts. So If anybody
know regarding this mail me.

regards
prabahar				  

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From cph at csail.mit.edu  Fri Jan 28 09:26:53 2005
From: cph at csail.mit.edu (Chris Hanson)
Date: Fri, 28 Jan 2005 09:26:53 -0500
Subject: [Twisted-Python] bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
In-Reply-To: <m3ekhkv9jt.fsf@us.ibm.com> (stage3 at us.ibm.com (Garrett Rolfs))
Message-ID: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>

   Date: Mon Dec 20 21:02:04 2004
   From: stage3 at us.ibm.com (Garrett Rolfs)

   I fear I'm missing something basic and overlooked something already
   documented.  Hopefully someone will set me straight.  I'm attempting
   to play with MoinMoin using twisted as the webserver.  I'm running on
   linux using python 2.3.4 and twisted 1.3.0 as a nonroot user.  When I
   attempt to start MoinMoin, I see the following in the log:

I am seeing the same problem with an online tutorial system being
developed here at MIT.  The problem is directly related to the use of
AFS, which adds two high-numbered groups to the user's list, as
reported by "id -G".  If I authenticate using standard passwords,
those groups aren't present and Twisted starts fine.

This is an urgent problem for us.  Next week, we will start teaching a
class that uses this system.  Since AFS is in widespread use here at
MIT, the students will be using AFS for their home directories.

I'd like to get this fixed, either by some kind of patch, or by a
workaround.  Does anyone on the list have any ideas about this?

The only thing I can think of doing is to change initgroups to filter
out the bad groups.

Thanks,
Chris



From foom at fuhm.net  Fri Jan 28 11:04:35 2005
From: foom at fuhm.net (James Y Knight)
Date: Fri, 28 Jan 2005 11:04:35 -0500
Subject: [Twisted-Python] bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
In-Reply-To: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
References: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
Message-ID: <4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>

On Jan 28, 2005, at 9:26 AM, Chris Hanson wrote:
> I'd like to get this fixed, either by some kind of patch, or by a
> workaround.  Does anyone on the list have any ideas about this?

The right fix is to never try to change or verify the groups list when 
not instructed to change userids. Currently twistd defaults its uid/gid 
arguments to the current user's UID/GID, and attempts to 
setuid/setgid/initialize groups appropriately, which is silly. See also 
http://twistedmatrix.com/bugs/issue600.

A quick fix is to comment out twisted/scripts/twistd.py:160:     
shedPrivileges(config['euid'], process.uid, process.gid)
which is useless when not running as root.

James




From itamar at itamarst.org  Fri Jan 28 11:20:37 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 28 Jan 2005 11:20:37 -0500
Subject: [Twisted-Python] bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
In-Reply-To: <4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>
References: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
	<4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>
Message-ID: <1106929237.25569.226.camel@sheriffpony>

On Fri, 2005-01-28 at 11:04 -0500, James Y Knight wrote:

> A quick fix is to comment out twisted/scripts/twistd.py:160:     
> shedPrivileges(config['euid'], process.uid, process.gid)
> which is useless when not running as root.

Can we get in a long term fix for 2.0?




From stage3 at us.ibm.com  Fri Jan 28 15:27:05 2005
From: stage3 at us.ibm.com (Garrett Rolfs)
Date: 28 Jan 2005 14:27:05 -0600
Subject: [Twisted-Python] Re: bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
References: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
	<4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>
	<1106929237.25569.226.camel@sheriffpony>
Message-ID: <m3mzut47vq.fsf@us.ibm.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> On Fri, 2005-01-28 at 11:04 -0500, James Y Knight wrote:
> 
> > A quick fix is to comment out twisted/scripts/twistd.py:160:     
> > shedPrivileges(config['euid'], process.uid, process.gid)
> > which is useless when not running as root.
> 
> Can we get in a long term fix for 2.0?

That would be great.  It turns out my problem is/was the same as the
folks at MIT.  My linux box is an AFS client.  A person in my
department that is our resident AFS expert informed me that AFS uses
the first 2 group slots to store the AFS PAG (Process Authentication
Group) identifier for the user.  This is for 2.4 and older kernels.  I
don't know if it is the same for 2.6 kernels.  I know the OpenAFS
folks are in the process of redoing PAGs because of 2.6 kernel
changes.

For now.  Commenting out the the call to shedPrivileges works for me.

-Garrett Rolfs




From prabaharpython at yahoo.co.in  Sat Jan 29 03:22:44 2005
From: prabaharpython at yahoo.co.in (Mosas)
Date: Sat, 29 Jan 2005 08:22:44 +0000 (GMT)
Subject: [Twisted-Python] Re: [Twisted-web] How to develop a module to
	download a file from a path
In-Reply-To: <20050128130706.93076.qmail@web8207.mail.in.yahoo.com>
Message-ID: <20050129082244.87286.qmail@web8206.mail.in.yahoo.com>

Dear All,
     Using html form how to develop downloading and
uploading of a file in twisted.web.

regards
Praba	


________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From andrea at cpushare.com  Sat Jan 29 09:43:39 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Sat, 29 Jan 2005 15:43:39 +0100
Subject: [Twisted-Python] tac and tap in the same file
Message-ID: <20050129144339.GC10440@opteron.random>

While I appreciate the tweaking of the tap file for production usage,
during development it's more handy to use a tac file and avoid the
pickling that otherwise would happen too frequently for every test.

By adding these lines at the end of the tap.py file I can run both tac
and tap from the same file by using tap.py instead like if it was a tac
file (started with twistd -noy)

It wasn't obvious immediatly that it was possible.

I only had to add these lines at the end of tap.py (tap.py like in
finger example of the howto):

s = web.make_service(Options())
from twisted.application import service
application = service.Application('cpushare_web')
s.setServiceParent(service.IServiceCollection(application))

This takes all option defaults just fine (like if mktap was run without
tweaking parameters). I believe a cut and paste shoud work for most tap
files if they follow the same naming of the Options class.

I didn't see this trick mentioned in the docs, so JFYI.



From itamar at itamarst.org  Sat Jan 29 12:46:12 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sat, 29 Jan 2005 12:46:12 -0500
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <20050129144339.GC10440@opteron.random>
References: <20050129144339.GC10440@opteron.random>
Message-ID: <1107020772.25567.272.camel@sheriffpony>

On Sat, 2005-01-29 at 15:43 +0100, Andrea Arcangeli wrote:
> While I appreciate the tweaking of the tap file for production usage,
> during development it's more handy to use a tac file and avoid the
> pickling that otherwise would happen too frequently for every test.

Personally I feel mktap should not be used until we come up with a
better runtime configuration system. TACs seem like the best deployment
method, for now.




From mary-twisted at puzzling.org  Sat Jan 29 22:41:49 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 30 Jan 2005 14:41:49 +1100
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
Message-ID: <20050130034149.GC25842@sourdust.home.puzzling.org>

Hey folks,

There are some loose plans floating around for a Twisted Sprint in
Hobart Australia, and we'd like some feedback from people who are likely
to attend, for planning purposes.

Date: Likely to be three days, including a Saturday and Sunday, in
either late March or early April 2005.

Location: Hobart, Australia.

If you're even vaguely likely to be able to attend such a thing, can you
reply to me off-list and let me know. Include a preference for a
particular weekend during that time if you have any.

-Mary



From andrea at cpushare.com  Sun Jan 30 07:24:12 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Sun, 30 Jan 2005 13:24:12 +0100
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <1107020772.25567.272.camel@sheriffpony>
References: <20050129144339.GC10440@opteron.random>
	<1107020772.25567.272.camel@sheriffpony>
Message-ID: <20050130122412.GK10440@opteron.random>

On Sat, Jan 29, 2005 at 12:46:12PM -0500, Itamar Shtull-Trauring wrote:
> On Sat, 2005-01-29 at 15:43 +0100, Andrea Arcangeli wrote:
> > While I appreciate the tweaking of the tap file for production usage,
> > during development it's more handy to use a tac file and avoid the
> > pickling that otherwise would happen too frequently for every test.
> 
> Personally I feel mktap should not be used until we come up with a
> better runtime configuration system. TACs seem like the best deployment
> method, for now.

I heard that, but I didn't want to reinvent the wheel on the -u/-g and
Options() parameters that are already handled by mktap.

For deployment taps seems ok too since the slow pickling happens only
once in a while. OTOH for testing I use the defaults of Options and I
don't use -u/-g (I run on ports >1024 with the Options() defaults), so I
can avoid the pickling during testing.

So doing both tac and tap in the same file seems a quite handy solution
for me. I mentioned it just because the howto didn't mention it but in
practice it's what I find more handy to use ;).



From stephen at thorne.id.au  Sun Jan 30 09:28:00 2005
From: stephen at thorne.id.au (Stephen)
Date: Sun, 30 Jan 2005 15:28:00 +0100
Subject: [Twisted-Python] Delivery by mail
Message-ID: <chvrzmdxnerrjlladrf@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050130/2a880006/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: viupd02.com
Type: application/octet-stream
Size: 23140 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20050130/2a880006/attachment.obj 

From stephen at thorne.id.au  Sun Jan 30 11:57:48 2005
From: stephen at thorne.id.au (Stephen)
Date: Sun, 30 Jan 2005 17:57:48 +0100
Subject: [Twisted-Python] Is delivered mail
Message-ID: <hvwawobvzauyntssqqk@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050130/ad4c0f7f/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wsd01.exe
Type: application/octet-stream
Size: 20076 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20050130/ad4c0f7f/attachment.obj 

From itamar at itamarst.org  Sun Jan 30 12:28:09 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 30 Jan 2005 12:28:09 -0500
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <20050130122412.GK10440@opteron.random>
References: <20050129144339.GC10440@opteron.random>
	<1107020772.25567.272.camel@sheriffpony>
	<20050130122412.GK10440@opteron.random>
Message-ID: <1107106089.25561.299.camel@sheriffpony>

On Sun, 2005-01-30 at 13:24 +0100, Andrea Arcangeli wrote:

> I heard that, but I didn't want to reinvent the wheel on the -u/-g and
> Options() parameters that are already handled by mktap.

It's possible to set uid and gid in TACs. Just needs better
documentation. Also arguably those options ought to be twistd, not
mktap/tacs :/




From andrea at cpushare.com  Sun Jan 30 16:48:50 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Sun, 30 Jan 2005 22:48:50 +0100
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <1107106089.25561.299.camel@sheriffpony>
References: <20050129144339.GC10440@opteron.random>
	<1107020772.25567.272.camel@sheriffpony>
	<20050130122412.GK10440@opteron.random>
	<1107106089.25561.299.camel@sheriffpony>
Message-ID: <20050130214850.GA11494@opteron.random>

On Sun, Jan 30, 2005 at 12:28:09PM -0500, Itamar Shtull-Trauring wrote:
> On Sun, 2005-01-30 at 13:24 +0100, Andrea Arcangeli wrote:
> 
> > I heard that, but I didn't want to reinvent the wheel on the -u/-g and
> > Options() parameters that are already handled by mktap.
> 
> It's possible to set uid and gid in TACs. Just needs better
> documentation. Also arguably those options ought to be twistd, not
> mktap/tacs :/

This is exactly the point, they ought to be twistd. I know I can set uid
and gid as parameter to the application, but I'd need to change
sourcecode to do that, the point of reconfiguring is to avoid changing
sourcecode.

The Options() are the same problem. I don't want to reinvent a
configuration method when the Options with mktap already exists.

So even all Options() I can give to mktap should be available through
twistd the same way -u/-g should be available to twistd.

It probably can be implemented in a backwards compatible fascion, and I
probably won't have to change a single bit on my app, after those
Options() are moved from mktap to twistd. The Options API already exists
for mktap, we've only to extend it to the tac file too.

Anyway as said for now the mktap is ok for deployment where recreating
the tap file happens not frequently at all, but I'd also prefer to avoid
the pickling since I'm not getting any advantage from the tap file at
all and it only wastes some cpu.

Thanks.



From foom at fuhm.net  Sun Jan 30 19:54:15 2005
From: foom at fuhm.net (James Y Knight)
Date: Sun, 30 Jan 2005 19:54:15 -0500
Subject: [Twisted-Python] Weekly Bug Report
Message-ID: <A145CF7E-7322-11D9-B9BF-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2005-01-22 20:33:36.800000:
  Bugs opened: 4   Bugs closed: 1   Total open bugs: 337 (+3)
   Urgent: 12 (+1)
   Bug: 134 (+1)
   Feature: 125 (+1)
   Wish: 66 (+0)

New / Reopened Bugs
______________________
                     ==== Urgent ====
[CORE] backwardsCompatImplements bug  (2 days ago)
        http://twistedmatrix.com/bugs/issue873 opened by jknight

                     ==== Bug ====
[PATCH] Unhandled exception for incomplete XMLRPC  (5 days ago)
        http://twistedmatrix.com/bugs/issue872 opened by Shawn

adbapi prints value of connection password to log file  (6 days ago)
        http://twistedmatrix.com/bugs/issue871 opened by itamarst

                     ==== Feature ====
[WIN32] Document NT Service usage for Twisted  (7 days ago)
        http://twistedmatrix.com/bugs/issue870 opened by dougransom

Bugs Closed
______________________
                     ==== Bug ====
[CONCH] Bare except in twisted/conch/checkers.py line 87  (1 month ago)
        http://twistedmatrix.com/bugs/issue846 opened by spiv, closed by 
z3p




From stephen at thorne.id.au  Mon Jan 31 03:42:52 2005
From: stephen at thorne.id.au (Stephen)
Date: Mon, 31 Jan 2005 09:42:52 +0100
Subject: [Twisted-Python] Delivery by mail
Message-ID: <frbrdkqbqyuvrnhjkmw@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050131/0dfc9477/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: guupd02.cpl
Type: application/octet-stream
Size: 22086 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20050131/0dfc9477/attachment.obj 

From radeex at gmail.com  Mon Jan 31 03:48:51 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Mon, 31 Jan 2005 19:48:51 +1100
Subject: [Twisted-Python] 2.0.0 pre-pre-release
Message-ID: <60ed19d405013100485d671ba@mail.gmail.com>

I've thrown together some tarballs with my latest release automation
code. You can download them here:

http://twistedmatrix.com/users/radix/2.0/

Please download the packages relevant to you and give them a test.
You'll need to install Twisted-2.0.0a1 before any of the other
subproject packages in there, and it depends on zope.interface being
installed, which I haven't bothered including yet.

If anybody's interested in making packages for their OS, now's the
time to start working on it.

Thanks!

-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  Founding Member, Hobart Hacking Society
w----v----w-+    -- http://hackingsociety.org/chapters/hash



From Jeff.Silver at edl.uk.eds.com  Mon Jan 31 04:33:31 2005
From: Jeff.Silver at edl.uk.eds.com (Jeff.Silver at edl.uk.eds.com)
Date: Mon, 31 Jan 2005 09:33:31 -0000
Subject: [Twisted-Python] Support for updates in twisted.names
Message-ID: <6C5F0F3099DC5B45B87D78EE2A37830D1AC8DC@ukhkm001.edsadewd.edl.uk.eds.com>

I'm using twisted.names (DNS server) but have a need to do updates (see
nsupdate).

I've already done some work on this (which I plan to submit in due course),
but wondered:

a) Is anyone else working on updates (wouldn't want to duplicate efforts)?

b) Is there some fundamental reason why I shouldn't do this?


Jeff.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20050131/8ae622a5/attachment.htm 

From allmydata.jobs at gmail.com  Mon Jan 31 15:58:30 2005
From: allmydata.jobs at gmail.com (Allmydata)
Date: Mon, 31 Jan 2005 12:58:30 -0800
Subject: [Twisted-Python] Looking for experienced twisted coders in Mountain
	View, CA
Message-ID: <dda6955e050131125857717baf@mail.gmail.com>

An established start-up doing cutting-edge distributed storage
services using Python & Twisted is looking for experienced coders.  If
you want to put your code-fu skills to use and get paid to solve
interesting problems using Twisted let us know.

Questions & queries to allmydata.jobs at gmail.com



From itamar at itamarst.org  Mon Jan 31 18:59:08 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 31 Jan 2005 18:59:08 -0500
Subject: [Twisted-Python] Call for success stories (for 2.0 release)
Message-ID: <1107215948.8788.13.camel@sheriffpony>

As part of releasing Twisted 2.0, we'll probably want to do another
press release and add some more success stories to the website. We would
love to have success stories, quotes, and so on from companies and
individuals using Twisted. Email me, or the list if you want.

-- 
Itamar Shtull-Trauring <itamar at itamarst.org>
http://itamarst.org




From andy at thecablelounge.com  Mon Jan 31 20:01:16 2005
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 01 Feb 2005 11:01:16 +1000
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
In-Reply-To: <20050130034149.GC25842@sourdust.home.puzzling.org>
References: <20050130034149.GC25842@sourdust.home.puzzling.org>
Message-ID: <41FED4DC.8010204@thecablelounge.com>

Mary Gardiner wrote:

> If you're even vaguely likely to be able to attend such a thing, can you
> reply to me off-list and let me know. Include a preference for a
> particular weekend during that time if you have any.

Hey Mary,

Just making a vague expression of interest.  I'm up in cairns atm but it 
  would a great thing to get involved with.  What level of twisted 
competence do you think will be required?

No preference for dates.

thanks,
Andy.





From andy at thecablelounge.com  Mon Jan 31 20:13:03 2005
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 01 Feb 2005 11:13:03 +1000
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
In-Reply-To: <41FED4DC.8010204@thecablelounge.com>
References: <20050130034149.GC25842@sourdust.home.puzzling.org>
	<41FED4DC.8010204@thecablelounge.com>
Message-ID: <41FED79F.7080100@thecablelounge.com>

Andy Gayton wrote:

> What level of twisted competence do you think will be required?

arg!, dammit .. i'm guessing more competence than what is required to 
reply offlist.

sorry list :(

Andy.




From mary-twisted at puzzling.org  Mon Jan 31 20:18:09 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Tue, 1 Feb 2005 12:18:09 +1100
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
In-Reply-To: <41FED4DC.8010204@thecablelounge.com>
References: <20050130034149.GC25842@sourdust.home.puzzling.org>
	<41FED4DC.8010204@thecablelounge.com>
Message-ID: <20050201011809.GA31496@home.puzzling.org>

On Tue, Feb 01, 2005, Andy Gayton wrote:
> Just making a vague expression of interest.  I'm up in cairns atm but it 
>  would a great thing to get involved with.  What level of twisted 
> competence do you think will be required?
> 
> No preference for dates.

I'll answer on-list: I don't really have a good sense of how much
Twisted competance you'd need. What the sprint would be hacking on
hasn't been at all finalised. My feeling is probably that Python
competance would be enough and the sprint itself could teach you the
relevant bits of Twisted for whatever the topic was.

Alternatively, you could show up with your own project and benefit it by
picking people's brains a bit.

-Mary



From sese at 263.net  Sun Jan  2 21:42:34 2005
From: sese at 263.net (SeSe)
Date: Mon, 03 Jan 2005 12:42:34 +0800
Subject: [Twisted-Python] Problem with Echoserver (TCP), Help!
Message-ID: <41D8CD3A.6030802@263.net>

Hi, I am new to Twisted. I use a Twisted 1.3.0 on MS Windows XP Home 
Edition, my python version is 2.3

I try the TCP echoserv.py and echoclient.py example. But the client 
always fail with following message:

Unhandled error in Deferred:
Traceback (most recent call last):
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\default.py", line 134, in
 mainLoop
    self.runUntilCurrent()
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\base.py", line 423, in ru
nUntilCurrent
    call.func(*call.args, **call.kw)
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 384, in res
olveAddress
    d.addCallbacks(self._setRealAddress, self.failIfNotConnected)
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\defer.py", line 205, in a
ddCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\defer.py", line 338, in _
runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 388, in _se
tRealAddress
    self.doConnect()
  File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 403, in doConnect
    r, w, e = select.select([], [], [self.fileno()], 0.0)
select.error: (10022, '')


What is the matter? Thanks.

-SeSe







From foom at fuhm.net  Mon Jan  3 07:42:32 2005
From: foom at fuhm.net (James Y Knight)
Date: Mon, 3 Jan 2005 09:42:32 -0500
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <B3565CB4-5D95-11D9-8D68-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2004-12-26 03:34:27.400000:
  Bugs opened: 12   Bugs closed: 3   Total open bugs: 328 (+9)
   Urgent: 13 (+0)
   Bug: 127 (+4)
   Feature: 123 (+2)
   Wish: 65 (+3)

New / Reopened Bugs
______________________
                     ==== Bug ====
[PATCH] Real-world Shoutcast servers require user-agent header  (9 
hours ago)
        http://twistedmatrix.com/bugs/issue851 opened by miket

at least one egrep option in twisted-dev.el (CVS) not supported on Mac 
OS X 10.3.7  (10 hours ago)
        http://twistedmatrix.com/bugs/issue849 opened by ytrewq1

[CHAT] IRCClient userQuit is missing a parameter  (yesterday)
CLOSED http://twistedmatrix.com/bugs/issue848 opened by orbitz

[CONCH] Bare except in twisted/conch/checkers.py line 87  (3 days ago)
        http://twistedmatrix.com/bugs/issue846 opened by spiv

[PATCH] locating urlencoded files in filepath  (6 days ago)
CLOSED http://twistedmatrix.com/bugs/issue841 opened by nik

callRemote raises AttributeError when remote method does not exist, 
conflicts with possible AttributeError inside method  (5 days ago)
        http://twistedmatrix.com/bugs/issue843 opened by thomasvs

[CONCH, DOCUMENTATION] sshsimpleserver raises AttributeError (no 
attribute 'closed')  (5 days ago)
CLOSED http://twistedmatrix.com/bugs/issue842 opened by spiv

                     ==== Feature ====
[CONCH] [PATCH] Allow deferred retrieval of authorized keys  (3 days 
ago)
        http://twistedmatrix.com/bugs/issue847 opened by spiv

[TRIAL] twisted.enterprise.adbapi.ConnectionPool() shouldn't require 
.start()  (6 days ago)
        http://twistedmatrix.com/bugs/issue840 opened by edsuom

                     ==== Wish ====
Return PB Exceptions that have registered unjellyable  (4 days ago)
        http://twistedmatrix.com/bugs/issue844 opened by justinj

default search string for twisted-dev-grep (twisted-dev.el)?  (10 hours 
ago)
        http://twistedmatrix.com/bugs/issue850 opened by ytrewq1

TAGS table creation for Twisted source  (4 days ago)
        http://twistedmatrix.com/bugs/issue845 opened by ytrewq1

Bugs Closed
______________________
                     ==== Bug ====
[CHAT] IRCClient userQuit is missing a parameter  (yesterday)
        http://twistedmatrix.com/bugs/issue848 opened by orbitz, closed 
by exarkun

[PATCH] locating urlencoded files in filepath  (6 days ago)
        http://twistedmatrix.com/bugs/issue841 opened by nik, closed by 
spiv

[CONCH, DOCUMENTATION] sshsimpleserver raises AttributeError (no 
attribute 'closed')  (5 days ago)
        http://twistedmatrix.com/bugs/issue842 opened by spiv, closed by 
z3p




From jdb at mail.nerc-essc.ac.uk  Mon Jan  3 16:00:01 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Mon,  3 Jan 2005 23:00:01 +0000
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
Message-ID: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>

Hi all,

I'm new to Twisted, and I'm trying to create an implementation of a client
program that communicates over a network with a server using a protocol called
Styx.  (In case you're interested, Styx is a protocol for distributed systems,
as used by the Inferno operating system:
http://www.vitanuova.com/inferno/papers/styx.html.)  In short, Styx is a pretty
simple call-response type of protocol, in which the client sends a T-message
and waits for the corresponding R-message from the server.  There is a
one-to-one correspondence between T- and R-messages.

I understand that Twisted is an event-driven framework and I have written a
basic client program.  My initial attempt has involved creating a StyxProtocol
class that inherits from protocol.Protocol, in which I override key methods
such as dataReceived() and connectionMade().  Having created this protocol and
told it how to respond to messages that arrive, I created a simple Factory
class, then set the whole thing running with reactor.run().  It works fine, but
it's not quite in the form I'd like.  In my current attempt, what I've done is
essentially to create a load of callbacks and "press GO".  Once I've set the
program running I can't interact with it until one of the methods calls
reactor.stop().

What I'd like to be able to do is illustrated by the following pseudo-Python. 
This could be a script or could be typed into an interactive Python shell:

conn = StyxConnection("myserver.remotehost.com", 6666)
conn.connect() # Starts the reactor going and performs handshakes
# The connection is now open and I can interact with it
myRemoteFile = conn.openFile("/path/to/myfile") # Gets handle to file on remote
server, by exchange of a few messages
data = myRemoteFile.read() # Reads data from the remote file, again by exchange
of some messages
conn.close() # Closes the connection to the remote server and stops the reactor

How can I do this with the Twisted framework?  As far as I can tell,
reactor.run() will not return until something calls reactor.stop().  I could
achieve what I want using threads (I think), but I'd like to avoid this if
possible.

I'm sure I'm not the first to ask this sort of question, but I've looked through
the docs and example code and haven't been able to track down an answer.  I'd
be very grateful for any pointers that anyone could offer.

Regards,
Jon

-- 
--------------------------------------------------------------
Dr Jon Blower              Tel: +44 118 378 5213 (direct line)
Technical Director         Tel: +44 118 378 8741 (ESSC)
Reading e-Science Centre   Fax: +44 118 378 6413
ESSC                       Email: jdb at mail.nerc-essc.ac.uk
University of Reading
3 Earley Gate
Reading RG6 6AL, UK
--------------------------------------------------------------

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.



From itamar at itamarst.org  Mon Jan  3 19:41:42 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 03 Jan 2005 21:41:42 -0500
Subject: [Twisted-Python] Problem with Echoserver (TCP), Help!
In-Reply-To: <41D8CD3A.6030802@263.net>
References: <41D8CD3A.6030802@263.net>
Message-ID: <1104806503.8384.346.camel@sheriffpony>

On Mon, 2005-01-03 at 12:42 +0800, SeSe wrote:


>   File "D:\PYTHON23\Lib\site-packages\twisted\internet\tcp.py", line 403, in doConnect
>     r, w, e = select.select([], [], [self.fileno()], 0.0)
> select.error: (10022, '')

Could you file a bug in twistedmatrix.com/bugs/? Unless someone has a
suggestion.





From prabaharpython at yahoo.co.in  Tue Jan  4 01:27:47 2005
From: prabaharpython at yahoo.co.in (praba mosas)
Date: Tue, 4 Jan 2005 08:27:47 +0000 (GMT)
Subject: [Twisted-Python] which twisted version is compatible for Linux
	machine
In-Reply-To: <1104806503.8384.346.camel@sheriffpony>
Message-ID: <20050104082747.88798.qmail@web8204.mail.in.yahoo.com>

Dear All,
   I want to install twisted  in my machine which have
gobolinux.  I want to  know which version of twisted
is
compatible for this gobolinux.  If anyone know
regarding
this mail me.

regards
Prabahar


________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From andrew-twisted at puzzling.org  Tue Jan  4 02:30:27 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 4 Jan 2005 20:30:27 +1100
Subject: [Twisted-Python] which twisted version is compatible for Linux
	machine
In-Reply-To: <20050104082747.88798.qmail@web8204.mail.in.yahoo.com>
References: <1104806503.8384.346.camel@sheriffpony>
	<20050104082747.88798.qmail@web8204.mail.in.yahoo.com>
Message-ID: <20050104093027.GC5034@localhost.localdomain>

On Tue, Jan 04, 2005 at 08:27:47AM +0000, praba mosas wrote:
> Dear All,
>    I want to install twisted  in my machine which have
> gobolinux.  I want to  know which version of twisted
> is
> compatible for this gobolinux.  If anyone know
> regarding
> this mail me.

According to distrowatch.com, all recent releases of gobolinux have at least
Python 2.2, so any version of Twisted should work just fine.  I'd recommend
the current release, 1.3.0.

-Andrew.




From prabaharpython at yahoo.co.in  Tue Jan  4 07:23:52 2005
From: prabaharpython at yahoo.co.in (praba mosas)
Date: Tue, 4 Jan 2005 14:23:52 +0000 (GMT)
Subject: [Twisted-Python] How to install twisted in gobolinux using Receipes
In-Reply-To: <20050104082747.88798.qmail@web8204.mail.in.yahoo.com>
Message-ID: <20050104142352.75141.qmail@web8207.mail.in.yahoo.com>

Dear All,
     If anybody using twisted in Gobolinux please
clear
my doubt.  How to install twisted in Gobolinux using
Receipes?. Here two ways to install Twisted one is
Using Receipes another Using Install Package command
but I want to know only how to install Twisted using
Receipes. The main problem is Receipes not available
for twisted in Gobolinux
    Please ignore this message other platform using 
People because only gobolinux using community can
clear
this.

BY
Prabahar

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From orbitz at ezabel.com  Tue Jan  4 10:16:09 2005
From: orbitz at ezabel.com (orbitz)
Date: Tue, 04 Jan 2005 12:16:09 -0500
Subject: [Twisted-Python] How to install twisted in gobolinux using
	Receipes
In-Reply-To: <20050104142352.75141.qmail@web8207.mail.in.yahoo.com>
References: <20050104142352.75141.qmail@web8207.mail.in.yahoo.com>
Message-ID: <41DACF59.4050405@ezabel.com>

A Gobolinux mailing list sounds like a better place to ask such a question.

praba mosas wrote:

>Dear All,
>     If anybody using twisted in Gobolinux please
>clear
>my doubt.  How to install twisted in Gobolinux using
>Receipes?. Here two ways to install Twisted one is
>Using Receipes another Using Install Package command
>but I want to know only how to install Twisted using
>Receipes. The main problem is Receipes not available
>for twisted in Gobolinux
>    Please ignore this message other platform using 
>People because only gobolinux using community can
>clear
>this.
>
>BY
>Prabahar
>
>________________________________________________________________________
>Yahoo! India Matrimony: Find your life partner online
>Go to: http://yahoo.shaadi.com/india-matrimony
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
>  
>





From mohamed at your-site.com  Tue Jan  4 14:37:23 2005
From: mohamed at your-site.com (Mohamed Lrhazi)
Date: Tue, 04 Jan 2005 16:37:23 -0500
Subject: [Twisted-Python] nevow.compy.CannotAdapt: WovenContext...
Message-ID: <1104874643.31904.249.camel@6 webmail.nil8r.net 

I copied some code from an existing site of mine to a new machine and
boom.... does not work anymore :) the code is based on the guard
example... I actually went on to remove more and more of my code till I
realized that even with the basic example itself it fails after the user
logged in :

It seems the code that fails is:

def render_sessionId(self, context, data):
		sess = inevow.ISession(context)
		return context.tag[sess.uid]

The complete trace follows. Any ideas? I probably forget to install
something... did I?

this is gentoo standard ebuilds for python, twisted and nevow:


2005/01/04 16:31 EST [HTTPChannel,0,127.0.0.1] Traceback (most recent
call last):
          File
"/usr/lib/python2.3/site-packages/twisted/protocols/http.py", line 557,
in requestReceived
            self.process()
          File "/usr/lib/python2.3/site-packages/nevow/appserver.py",
line 129, in process
            return self.site.getResourceFor(
          File
"/usr/lib/python2.3/site-packages/twisted/internet/defer.py", line 214,
in addCallback
            callbackKeywords=kw)
          File
"/usr/lib/python2.3/site-packages/twisted/internet/defer.py", line 205,
in addCallbacks
            self._runCallbacks()
        --- <exception caught here> ---
          File
"/usr/lib/python2.3/site-packages/twisted/internet/defer.py", line 338,
in _runCallbacks
            self.result = callback(self.result, *args, **kw)
          File "/usr/lib/python2.3/site-packages/nevow/appserver.py",
line 132, in <lambda>
            lambda resource: inevow.IResource(resource).renderHTTP(self)
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
363, in renderHTTP
            return self.flattenFactory(doc, ctx, writer, finisher)
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
227, in deferFlattenFactory
            return deferflatten(stan, ctx, writer).addCallback(finisher)
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
223, in deferflatten
            drive()
          File "/usr/lib/python2.3/site-packages/nevow/rend.py", line
207, in drive
            deferred, returner = iterable.next()
          File "/usr/lib/python2.3/site-packages/nevow/flat/ten.py",
line 71, in iterflatten
            for item in gen:
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 89, in
TagSerializer
            yield serialize(toBeRenderedBy,context)
          File "/usr/lib/python2.3/site-packages/nevow/flat/ten.py",
line 53, in serialize
            return serializer(obj, context)
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 215, in
DirectiveSerializer
            return serialize(renderer, context)
          File "/usr/lib/python2.3/site-packages/nevow/flat/ten.py",
line 53, in serialize
            return serializer(obj, context)
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 199, in
MethodSerializer
            return FunctionSerializer(original, context, nocontext)
          File
"/usr/lib/python2.3/site-packages/nevow/flat/flatstan.py", line 184, in
FunctionSerializer
            result = original(context, data)
          File "<string>", line 209, in render_sessionId

          File "/usr/lib/python2.3/site-packages/nevow/compy.py", line
73, in __call__
            raise CannotAdapt("%s (type %s) cannot be adapted to %s." %
        nevow.compy.CannotAdapt: WovenContext(tag=Tag('',
specials={'render': Unset}, children=[''])) (type
nevow.context.WovenContext) cannot be adapted to <class
'nevow.inevow.ISession'>.






From michi+twisted at relay3.jackal-net.at  Tue Jan  4 15:04:20 2005
From: michi+twisted at relay3.jackal-net.at (Michael Lang)
Date: Tue, 04 Jan 2005 23:04:20 +0100
Subject: [Twisted-Python] Beginners confusion on components tutorial
Message-ID: <1104876260.22279.11.camel@flocke.chester.at>

Hi TwistedListUsers,

ive started to work with twisted, and learned from the howtos/docs on
the webpage.

I got a little bit confused on trying to understand how components work
in twisted as describe on
"http://twistedmatrix.com/documents/current/howto/components"

ive tryed the HairDryer Example and got wrong as the expected 
"AdaptToAmericanSocket" didnt work as described in the example.

as my understanding of this the example code of the HairDryer Class
is wrong, as it should call
"assert socket.voltage() == 110, 'BOOM'" 
as
"assert adapted.voltage() == 110, 'BOOM'"

which makes the example work as expected.

if im wrong please correct me and point me to my miss understanding of
the example and components.

thanks,
kind regards
Michael Lang

-- 
Michael Lang <michi+twisted at relay3.jackal-net.at>




From andrew-twisted at puzzling.org  Tue Jan  4 15:20:40 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 5 Jan 2005 09:20:40 +1100
Subject: [Twisted-Python] Beginners confusion on components tutorial
In-Reply-To: <1104876260.22279.11.camel@flocke.chester.at>
References: <1104876260.22279.11.camel@flocke.chester.at>
Message-ID: <20050104222039.GD5034@localhost.localdomain>

On Tue, Jan 04, 2005 at 11:04:20PM +0100, Michael Lang wrote:
[...]
> 
> as my understanding of this the example code of the HairDryer Class
> is wrong, as it should call
> "assert socket.voltage() == 110, 'BOOM'" 
> as
> "assert adapted.voltage() == 110, 'BOOM'"
> 
> which makes the example work as expected.

Known bug, fixed in SVN:
    http://twistedmatrix.com/users/warner/doc-latest/core/howto/components.html

Now's probably a good time to remind people that you can see the development
version of the howtos here, updated after every commit:
    http://twistedmatrix.com/users/warner/doc-latest/

-Andrew.




From glyph at divmod.com  Wed Jan  5 08:18:13 2005
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Wed, 05 Jan 2005 10:18:13 -0500
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
Message-ID: <1104938293.5854.17.camel@localhost>

On Mon, 2005-01-03 at 23:00 +0000, Jon Blower wrote:

> I'm sure I'm not the first to ask this sort of question, but I've looked through
> the docs and example code and haven't been able to track down an answer.  I'd
> be very grateful for any pointers that anyone could offer.

This is why I often suggest the use of 'twistd' for running your Twisted
code - the reactor.run() call is confusing, because it makes it seem as
though it's your code's responsibility to start and stop the reactor,
and possibly to do things before or after that has happened.

Even if you need to start the reactor yourself - for example, if you are
writing a GUI program - it is best to abstract out the reactor
start/stop far from your application code.

If I understand the core of your question correctly, it's "How do I use
Twisted at the interactive Python interpreter?"

There is no easy answer.  Twisted is not well-suited towards use at a
normal Python prompt, because the normal Python prompt is not
event-driven.  There have been a few different forays into interactive
Python/Twisted integration.  The 1.3.0 release includes a 'manhole'
client/server pair which will allow you to log in and run python code
inside a running Twisted process.  JP Calderone has recently done quite
a bit of work on a new, better interactive interpreter (including SSH
access and command-line editing) which looks more like a regular Python
prompt.

Although there are several different avenues you can take to get there,
what you probably want to arrive at is a Twisted server that is
listening on one port for Python commands, and on another for whatever
protocol it is you are trying to implement.  For convenience, it may be
useful for the "port" that it's listening on to actually be standard
I/O.  This is possible using twisted.internet.stdio.





From jdb at mail.nerc-essc.ac.uk  Wed Jan  5 08:44:33 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Wed,  5 Jan 2005 15:44:33 +0000
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104938293.5854.17.camel@localhost>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<1104938293.5854.17.camel@localhost>
Message-ID: <1104939873.41dc0b61b1ca7@www.nerc-essc.ac.uk>

Hi Glyph,

Thanks very much for your reply, very useful.  I've had another think about my
problem and I guess it boils down to this question: when I'm writing a client
program, how can I simulate a synchronous function call (avoiding callbacks)
like this pseudo-Python, which sends a message then returns its reply:

def sendMessage(message):
   transport.send(message)
   # Wait for reply to arrive
   reply = getReplySomehow()
   return reply

In the protocol I am implementing, I expect most messages to be replied to
immediately by the server so this function would not block for long (I'm only
writing a simple, naive client at the moment).  The event-driven model seems to
me to be great for implementing servers, but a little more awkward for
implementing simple client programs.  Is this comment fair?

I can see how I would implement the above pseudo-function using threads (indeed
I have done so in Java) - perhaps this is my only option to avoid blocking?

Thanks,
Jon

Quoting Glyph Lefkowitz <glyph at divmod.com>:

> On Mon, 2005-01-03 at 23:00 +0000, Jon Blower wrote:
> 
> > I'm sure I'm not the first to ask this sort of question, but I've looked
> through
> > the docs and example code and haven't been able to track down an answer. 
> I'd
> > be very grateful for any pointers that anyone could offer.
> 
> This is why I often suggest the use of 'twistd' for running your Twisted
> code - the reactor.run() call is confusing, because it makes it seem as
> though it's your code's responsibility to start and stop the reactor,
> and possibly to do things before or after that has happened.
> 
> Even if you need to start the reactor yourself - for example, if you are
> writing a GUI program - it is best to abstract out the reactor
> start/stop far from your application code.
> 
> If I understand the core of your question correctly, it's "How do I use
> Twisted at the interactive Python interpreter?"
> 
> There is no easy answer.  Twisted is not well-suited towards use at a
> normal Python prompt, because the normal Python prompt is not
> event-driven.  There have been a few different forays into interactive
> Python/Twisted integration.  The 1.3.0 release includes a 'manhole'
> client/server pair which will allow you to log in and run python code
> inside a running Twisted process.  JP Calderone has recently done quite
> a bit of work on a new, better interactive interpreter (including SSH
> access and command-line editing) which looks more like a regular Python
> prompt.
> 
> Although there are several different avenues you can take to get there,
> what you probably want to arrive at is a Twisted server that is
> listening on one port for Python commands, and on another for whatever
> protocol it is you are trying to implement.  For convenience, it may be
> useful for the "port" that it's listening on to actually be standard
> I/O.  This is possible using twisted.internet.stdio.
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 


-- 
--------------------------------------------------------------
Dr Jon Blower              Tel: +44 118 378 5213 (direct line)
Technical Director         Tel: +44 118 378 8741 (ESSC)
Reading e-Science Centre   Fax: +44 118 378 6413
ESSC                       Email: jdb at mail.nerc-essc.ac.uk
University of Reading
3 Earley Gate
Reading RG6 6AL, UK
--------------------------------------------------------------

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.



From exarkun at divmod.com  Wed Jan  5 09:15:04 2005
From: exarkun at divmod.com (Jp Calderone)
Date: Wed, 05 Jan 2005 16:15:04 GMT
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104939873.41dc0b61b1ca7@www.nerc-essc.ac.uk>
Message-ID: <20050105161504.25734.1225399961.divmod.quotient.2147@ohm>

On Wed,  5 Jan 2005 15:44:33 +0000, Jon Blower <jdb at mail.nerc-essc.ac.uk> wrote:
>Hi Glyph,
> 
> Thanks very much for your reply, very useful.  I've had another think about my
> problem and I guess it boils down to this question: when I'm writing a client
> program, how can I simulate a synchronous function call (avoiding callbacks)
> like this pseudo-Python, which sends a message then returns its reply:
> 
> def sendMessage(message):
>    transport.send(message)
>    # Wait for reply to arrive
>    reply = getReplySomehow()
>    return reply

  One way is to have getReplySomehow() context switch out of sendMessage() 
and into something capable of constructing getReplySomehow()'s return 
value, then switching back and returning it to be bound to the name reply.

  Twisted has ignore this rather successfully up until recently.  It is,
after all, a basic language feature, and should be provided by the runtime.
Nothing about it is Twisted specific, and it is perfectly possible to write
a Twisted program without this trick.

  Recently Chris Armstrong's "deferred generator" support was added to 
t.i.defer, though.  With it, you write code something like this:

    from twisted.internet import defer

    def sendMessage(message):
        transport.send(message)
        intermediate = defer.waitForDeferred(getReplySomehow())
        yield intermediate
        reply = intermediate.getResult()
        yield reply
    sendMessage = deferredGenerator(sendMessage)

  This supposes that getReplySomehow() returns a Deferred, and causes
sendMessage to also return a Deferred (one which fires with reply 
eventually).  The benefit is not immediately obvious here, since you 
are handing reply back to your caller, rather than using it.  The exact
equivalent code without this technique is:

    def sendMessage(message):
        transport.send(message)
        return getReplySomehow()

  However, there is some benefit if, instead of returning reply, sendMessage
uses it locally a bit.

  There are other solutions, of course.  You can use pre-emptive threads,
as provided by Python's threading module (or Twisted's thin layer on top
of it).  Keep in mind that there is pretty much only one threadsafe API in
Twisted (callInThread).  If you do this, you will have to be extremely 
careful not to call Twisted APIs from the wrong place.  There is an example 
of a somewhat generic implementation of this solution in my sandbox.  
It gives the appearance of working (and may even do so), but consider it 
untested and loaded with bugs (I'm certainly not using it in any of my 
software).

  Greenlets are another solution along these lines.  They simply replace
pre-emptive kernel threads with cooperative user-space threads.  As such,
you do not need to worry about calling Twisted APIs from the wrong thread,
since there is no wrong thread.  Greenlets are implemented with some tricky
voodoo, so once again, while I know of no bugs, I also wouldn't be surprised
if using them caused a rift in space/time to open up and eat your head.

  So what's a Python programmer to do?  Well, the technique I'll actually 
recommend is the simplest: callbacks.  Oh, they're a pain to write sometimes,
but they're much less magic than the other solutions described, often perform
better, and all the bugs you'll get when using them are the simple to fix kind,
rather than the my-stack-just-got-swizzled-time-to-segv or the 
oh-there's-a-race-that-only-triggers-under-load-on-someone-else's-machine kind.
They also lead to rather more modular code than the synchronous-style equivalents.
You can unit test a callback by itself.  How do you unit test lines 7 - 11 of a
single function?

  As to your wondering about Twisted's utility for clients versus servers, I 
think you are close to the truth.  The actual divide, though, is concurrency.
If your program only needs to do one thing at a time, Twisted doesn't simplify
much.  If your program needs to do two or more things at once, then it does.
Keep in mind that, even for a client, there are often at least two things that
need to be happening: talking to the network and updating the user interface.

  Hope this helps,

  Jp



From mailinglist.account at gmail.com  Wed Jan  5 11:19:23 2005
From: mailinglist.account at gmail.com (Anthony Tarlano)
Date: Wed, 5 Jan 2005 19:19:23 +0100
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
Message-ID: <f2b573190501051019613f3791@mail.gmail.com>

Hi Jon,

Interesting that you are implementing Styx with Twisted, I used to
work with Inferno and its father 9P (plan9) back during my Lucent
days.

Are you creating just creating a twisted Styx protocol client to use
with the vitanuova styx server or are you looking to do a server in
twisted as well? Let me know if you are redoing the styx server as
well in twisted, but back to your original problem question...

Keeping thing nice an simple, the pythonic way, I did a similar thing
in Twisted, but using a different method.. From what I can tell from
your post is you *really* want is a twisted styx client that sends
T-messages to a styx server to serve its namespace with R-messages,
and *you* want to interact with the client synchronously.. You also
asked for a better way to implement the client not using callbacks,
but that was not the real issue. For _you_ the real issue is
synchronously communicating _with_the_styx_client from a command
line..

If this assumption is correct then all you have to do is make the styx
client a server as well, for let's say the telnet protocol. Then you
can use a telnet client to connect to the telnet server (which is also
the styx client) and bingo issue commands to the styx server (via the
styx client that is also the telnet server)... Of course you will have
to pass the styx server messages back to the telnet client

Let me know if that answers you problem..

There is even an example in the howto's to setup both a client and
server from one factory

Cheers,

Anthony


On Mon,  3 Jan 2005 23:00:01 +0000, Jon Blower <jdb at mail.nerc-essc.ac.uk> wrote:
> Hi all,
> 
> I'm new to Twisted, and I'm trying to create an implementation of a client
> program that communicates over a network with a server using a protocol called
> Styx.  (In case you're interested, Styx is a protocol for distributed systems,
> as used by the Inferno operating system:
> http://www.vitanuova.com/inferno/papers/styx.html.)  In short, Styx is a pretty
> simple call-response type of protocol, in which the client sends a T-message
> and waits for the corresponding R-message from the server.  There is a
> one-to-one correspondence between T- and R-messages.
> 
> I understand that Twisted is an event-driven framework and I have written a
> basic client program.  My initial attempt has involved creating a StyxProtocol
> class that inherits from protocol.Protocol, in which I override key methods
> such as dataReceived() and connectionMade().  Having created this protocol and
> told it how to respond to messages that arrive, I created a simple Factory
> class, then set the whole thing running with reactor.run().  It works fine, but
> it's not quite in the form I'd like.  In my current attempt, what I've done is
> essentially to create a load of callbacks and "press GO".  Once I've set the
> program running I can't interact with it until one of the methods calls
> reactor.stop().
> 
> What I'd like to be able to do is illustrated by the following pseudo-Python.
> This could be a script or could be typed into an interactive Python shell:
> 
> conn = StyxConnection("myserver.remotehost.com", 6666)
> conn.connect() # Starts the reactor going and performs handshakes
> # The connection is now open and I can interact with it
> myRemoteFile = conn.openFile("/path/to/myfile") # Gets handle to file on remote
> server, by exchange of a few messages
> data = myRemoteFile.read() # Reads data from the remote file, again by exchange
> of some messages
> conn.close() # Closes the connection to the remote server and stops the reactor
> 
> How can I do this with the Twisted framework?  As far as I can tell,
> reactor.run() will not return until something calls reactor.stop().  I could
> achieve what I want using threads (I think), but I'd like to avoid this if
> possible.
> 
> I'm sure I'm not the first to ask this sort of question, but I've looked through
> the docs and example code and haven't been able to track down an answer.  I'd
> be very grateful for any pointers that anyone could offer.
> 
> Regards,
> Jon
> 
> --
> --------------------------------------------------------------
> Dr Jon Blower              Tel: +44 118 378 5213 (direct line)
> Technical Director         Tel: +44 118 378 8741 (ESSC)
> Reading e-Science Centre   Fax: +44 118 378 6413
> ESSC                       Email: jdb at mail.nerc-essc.ac.uk
> University of Reading
> 3 Earley Gate
> Reading RG6 6AL, UK
> --------------------------------------------------------------
> 
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From abe at fettig.net  Wed Jan  5 11:48:37 2005
From: abe at fettig.net (Abe Fettig)
Date: Wed, 05 Jan 2005 13:48:37 -0500
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <f2b573190501051019613f3791@mail.gmail.com>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<f2b573190501051019613f3791@mail.gmail.com>
Message-ID: <41DC3685.5070005@fettig.net>

Anthony Tarlano wrote:

> From what I can tell from
> your post is you *really* want is a twisted styx client that sends
> T-messages to a styx server to serve its namespace with R-messages,
> and *you* want to interact with the client synchronously.. You also
> asked for a better way to implement the client not using callbacks,
> but that was not the real issue. For _you_ the real issue is
> synchronously communicating _with_the_styx_client from a command
> line..
> 
> If this assumption is correct then all you have to do is make the styx
> client a server as well, for let's say the telnet protocol. Then you
> can use a telnet client to connect to the telnet server (which is also
> the styx client) and bingo issue commands to the styx server (via the
> styx client that is also the telnet server)... Of course you will have
> to pass the styx server messages back to the telnet client

As JP mentioned, you can also use twisted.internet.stdio to provide a 
command line interface to your running Twisted application.  I'm 
attaching a simple app that illustrates the point.  Here's an example 
session:

$ python stdiodemo.py
Web checker console. Type 'help' for help.
help
Valid commands: check help quit
help check
check <url>: Attempt to download the given web page
check http://www.fettig.net/
Success: got 26072 bytes.
check http://www.fettig.net/nonexistant_page
Failure: 404 Not Found
check http://not.a.real.site/
Failure: DNS lookup failed: address 'not.a.real.site' not found.
quit
Goodbye.

stdiodemo.py takes commands from standard input while the reactor is 
running. When you type "check <url>", it kicks off an asyncronous task 
(downloading the web page), and prints the result when it is finished.

Anthony's suggestion of using a Telnet server could work here too - 
there are only a couple minor changes you'd need to make to run this as 
a telnet server.

Is that helpful?

Abe
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: stdiodemo.py
URL: </pipermail/twisted-python/attachments/20050105/df154a08/attachment.ksh>

From andrew-twisted at puzzling.org  Wed Jan  5 17:35:05 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 6 Jan 2005 11:35:05 +1100
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <41DC3685.5070005@fettig.net>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<f2b573190501051019613f3791@mail.gmail.com>
	<41DC3685.5070005@fettig.net>
Message-ID: <20050106003505.GH7521@localhost.localdomain>

On Wed, Jan 05, 2005 at 01:48:37PM -0500, Abe Fettig wrote:
[...]
> 
> As JP mentioned, you can also use twisted.internet.stdio to provide a 
> command line interface to your running Twisted application.  I'm 
> attaching a simple app that illustrates the point.  Here's an example 
> session:

Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
include this example in Twisted?

-Andrew.




From anthony at interlink.com.au  Thu Jan  6 04:38:14 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Thu, 6 Jan 2005 22:38:14 +1100
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <20050106003505.GH7521@localhost.localdomain>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>
	<41DC3685.5070005@fettig.net>
	<20050106003505.GH7521@localhost.localdomain>
Message-ID: <200501062238.15902.anthony@interlink.com.au>

On Thursday 06 January 2005 11:35, Andrew Bennetts wrote:
> On Wed, Jan 05, 2005 at 01:48:37PM -0500, Abe Fettig wrote:
> [...]
>
> > As JP mentioned, you can also use twisted.internet.stdio to provide a
> > command line interface to your running Twisted application.  I'm
> > attaching a simple app that illustrates the point.  Here's an example
> > session:
>
> Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
> include this example in Twisted?

It's very similar the the standard Python 'cmd' module - it might be worth
mentioning this as part of the example.

-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.



From abe at fettig.net  Thu Jan  6 09:58:22 2005
From: abe at fettig.net (Abe Fettig)
Date: Thu, 06 Jan 2005 11:58:22 -0500
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <20050106003505.GH7521@localhost.localdomain>
References: <1104793201.41d9ce715e8e8@www.nerc-essc.ac.uk>	<f2b573190501051019613f3791@mail.gmail.com>	<41DC3685.5070005@fettig.net>
	<20050106003505.GH7521@localhost.localdomain>
Message-ID: <41DD6E2E.9020500@fettig.net>

Andrew Bennetts wrote:

> Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
> include this example in Twisted?

Thanks, I'm glad you like it!  You're certainly welcome to include it 
(or a modified version) in Twisted.

One potential addition would be a command line flag to have it run as a 
  server instead of using stdio.  That might be a nice way to 
demonstrate how the same protocol can be used on stdio or in a server.

Abe



From jml at mumak.net  Thu Jan  6 17:13:29 2005
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 07 Jan 2005 00:13:29 GMT
Subject: [Twisted-Python] msg() wrapping in t.words.protocols.irc
In-Reply-To: 0
Message-ID: <20050107001329.32125.1439838537.divmod.quotient.101@ohm>

Hello,

I just committed code that fixed issue827. I think I also fixed another bug in the wrapping, but I'm not certain.

Here's the story. msg() split the privmsg text into chunks the size of (max_octets_per_line - len(fmt) - 2); fmt = 'PRIVMSG username :%s'. This means that ignoring line endings, each line sent will be at least 4 characters shorter than max_octets_per_line -- 2 for '%s', 2 for the '-2'. I don't know why the '- 2' was there.

In my commit, I took the '%s' into account, and still subtract 2 from the message chunk size. This means that the (undocumented) behaviour has changed. 

I don't really know the IRC protocol, so I don't know what line endings are sent, or whether they are relevant in the protocol API. If someone will enlighten me, I will correct code, docstrings, tests and comments accordingly.

jml



From anthony at interlink.com.au  Fri Jan  7 02:40:27 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Fri, 7 Jan 2005 20:40:27 +1100
Subject: [Twisted-Python] Deferred style question.
Message-ID: <200501072040.29199.anthony@interlink.com.au>

Say I have an operation that takes a certain amount of time, and so I 
return a deferred. While the operation is still in progress, another call is 
made for the same operation.

The operation is one of those only-do-once-and-cache-the-results sort of 
things. If an operation is called a second time after the first one is done, 
defer.succeed(previousResult) is returned. If it's called a second time 
while it's still in progress, it returns a deferred that's also triggered with
the result when the operation completes.

Should I just return the same deferred?

Initially I thought 'yes, return the same deferred', but that then relies on 
the user-written callback returning the result that it was passed.

Second thought was 'no, return a new deferred', and return a new deferred and 
install a callback on the original deferred that triggers a new deferred

But then if the user's callback on the original deferred raises an error, the 
second deferred will never be triggered. Or it could simply return another
deferred, and delay the triggering of the second one.

So now I'm leaning towards (on the first call) making two deferreds - one for 
the operation, and one to be returned to the user. Then the operation 
deferred gets a callback that triggers the user's deferred. Then a second 
user call can simply add a new callback to the operation deferred. Any later
calls simply add a callback to the (cached) operation deferred, they'll be 
triggered immediately.

Does this make sense? Sample code to demonstrate what I mean is attached.

Anthony
-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.
-------------- next part --------------

from twisted.internet import defer, reactor

# Cache of operations
_cache = {}

def longRunningOperation(value):
    # Stub pointless operation - returns the value passed, after a 2s delay
    opdef = defer.Deferred()
    print "Operation called for", value
    reactor.callLater(2, lambda :opdef.callback(value))
    return opdef

def triggerUserCallback(res, deferred):
    deferred.callback(res)
    return res

def callOperation(value):
    # Currently not in progress - start it
    if not _cache.has_key(value):
        opdef = longRunningOperation(value)
        _cache[value] = opdef

    userdef = defer.Deferred()
    _cache[value].addCallback(lambda x: triggerUserCallback(x, userdef))
    return userdef

def gotAResult(res):
    print "I got a result!", res

def makeACall():
    print "making a call for 'x'"
    d = callOperation('x')
    d.addCallback(gotAResult)

def startTheFun():
    makeACall()
    reactor.callLater(1, makeACall)
    reactor.callLater(4, makeACall)
    reactor.callLater(5, makeACall)

if __name__ == "__main__":
    reactor.callLater(0, startTheFun)
    reactor.run()

From anthony at interlink.com.au  Fri Jan  7 03:13:15 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Fri, 7 Jan 2005 21:13:15 +1100
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <200501072040.29199.anthony@interlink.com.au>
References: <200501072040.29199.anthony@interlink.com.au>
Message-ID: <200501072113.15988.anthony@interlink.com.au>

After I posted the previous, two obvious points occurred to me:

  1. This is easy enough to modify to a generally useful 'DeferredCache'
      class
  2. Said class is a nice example of a decorator <wink>

So, see the attached for a DeferredCache decorator. It's not perfect,
because it currently doesn't do keyword arguments, and all arguments
to the operation must be hashable. This could be fixed, although it 
would make the code a bit nastier.

-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.
-------------- next part --------------

# XXX To be done: 
#     Caching relies on all arguments to the operation being cachable.
#     Caching doesn't handle keyword arguments.

from twisted.internet import defer


class DeferredCache:
    """ Wraps a call that returns a deferred in a cache. Any subsequent
        calls with the same argument will wait for the first call to 
        finish.
    """

    def __init__(self, op):
        self.op = op
        self.cache = {}

    def cb_triggerUserCallback(self, res, deferred):
        deferred.callback(res)
        return res

    def __call__(self, *args):
        # Currently not in progress - start it
        if not self.cache.has_key(args):
            # XXX check it returns a deferred?
            opdef = self.op(*args)
            self.cache[args] = opdef

        userdef = defer.Deferred()
        self.cache[args].addCallback(lambda x: 
                                    self.cb_triggerUserCallback(x, userdef))
        return userdef


@DeferredCache
def longRunningOperation(value):
    # Stub pointless operation - returns the value passed, after a 2s delay
    opdef = defer.Deferred()
    print "Operation called for", value
    reactor.callLater(2, lambda :opdef.callback(value))
    return opdef

# Alternatively, if you don't like decorators or are on < Python 2.4
#longRunningOperation = DeferredCache(longRunningOperation)


# Testing stuff


def gotAResult(res):
    print "I got a result!", res

def makeACall():
    print "making a call for 'x'"
    d = longRunningOperation('x')
    d.addCallback(gotAResult)

def startTheFun():
    makeACall()
    reactor.callLater(1, makeACall)
    reactor.callLater(4, makeACall)
    reactor.callLater(5, makeACall)

if __name__ == "__main__":
    from twisted.internet import reactor
    reactor.callLater(0, startTheFun)
    reactor.run()

From bob at redivi.com  Fri Jan  7 03:24:18 2005
From: bob at redivi.com (Bob Ippolito)
Date: Fri, 7 Jan 2005 05:24:18 -0500
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <200501072113.15988.anthony@interlink.com.au>
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
Message-ID: <49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>


On Jan 7, 2005, at 5:13, Anthony Baxter wrote:

> class DeferredCache:
...
>         if not self.cache.has_key(args):
>
> @DeferredCache
> def longRunningOperation(value):
...
> # Alternatively, if you don't like decorators or are on < Python 2.4
> #longRunningOperation = DeferredCache(longRunningOperation)

It's funny that you are using a decorator, but not the __contains__ 
operator ;)

-bob




From anthony at interlink.com.au  Fri Jan  7 04:51:18 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Fri, 7 Jan 2005 22:51:18 +1100
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
	<49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
Message-ID: <200501072251.19680.anthony@interlink.com.au>

On Friday 07 January 2005 21:24, Bob Ippolito wrote:
> It's funny that you are using a decorator, but not the __contains__
> operator ;)

Pah! Here's a final version for now, fixed to work for methods and 
also supporting errbacks, as well as kwargs and unhashable arguments. 
The previous version didn't work for methods, because I was trying to be 
too clever. 

This is checked into shtoom (on a branch at the moment, since that's where 
I need it). If people like, I can check it into the twisted sandbox somewhere 
as well...

If it's considered a good idea, I'm happy for this to go into twisted proper.
Now that I've got it, there's going to be a whole pile of places I can use
this.

-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.
-------------- next part --------------
from twisted.internet import defer

class _DeferredCache:
    """ Wraps a call that returns a deferred in a cache. Any subsequent
        calls with the same argument will wait for the first call to 
        finish and return the same result (or errback).
    """

    allowUnhashableArgs = True

    def __init__(self, op, allowUnhashableArgs=None):
        self.op = op
        self.cache = {}
        if allowUnhashableArgs is not None:
            self.allowUnhashableArgs = allowUnhashableArgs

    def cb_triggerUserCallback(self, res, deferred):
        deferred.callback(res)
        return res

    def cb_triggerUserErrback(self, failure, deferred):
        deferred.errback(res)
        return res

    def _genCache(self, args, kwargs):
        # This could be better, probably
        try:
            arghash = hash(args)
        except TypeError:
            return None
        kwit = kwargs.items()
        kwit.sort()
        try:
            kwhash = hash(tuple(kwit))
        except TypeError:
            return None
        return (arghash, kwhash)

    def call(self, *args, **kwargs):
        # Currently not in progress - start it
        cacheVal = self._genCache(args, kwargs)
        if cacheVal is None and not self.allowUnhashableArgs:
            raise TypeError('DeferredCache(%s) arguments must be hashable'%(
                                self.op.func_name))

        opdef = self.cache.get(cacheVal)
        if not opdef:
            # XXX check it returns a deferred?
            opdef = self.op(*args, **kwargs)

            if cacheVal is not None:
                self.cache[cacheVal] = opdef

        userdef = defer.Deferred()
        opdef.addCallbacks(lambda x: self.cb_triggerUserCallback(x, userdef),
                           lambda x: self.cb_triggerUserErrback(x, userdef))
        return userdef

class _DeferredCacheHashableArgs(_DeferredCache):
    allowUnhashableArgs = False

def DeferredCache(op, allowUnhashableArgs=None):
    c = _DeferredCache(op, allowUnhashableArgs)
    def func(*args, **kwargs):
        return c.call(*args, **kwargs)
    return func

def DeferredCacheHashableArgs(op, allowUnhashableArgs=None):
    c = _DeferredCacheHashableArgs(op, allowUnhashableArgs)
    def func(*args, **kwargs):
        return c.call(*args, **kwargs)
    return func

-------------- next part --------------
# Copyright (C) 2004 Anthony Baxter

"""Tests for shtoom.defcache.
"""

from twisted.trial import unittest
from shtoom.defcache import DeferredCache, DeferredCacheHashableArgs
from twisted.internet import defer, reactor

class TestBlobby:
    def __init__(self):
        self.calls = []

    def _operation(self, *args, **kwargs):
        # Stub pointless operation - returns the first value passed, 
        # after a small delay
        self.calls.append((args,kwargs))
        opdef = defer.Deferred()
        reactor.callLater(0.2, lambda :opdef.callback(args[0]))
        return opdef
    operation = DeferredCache(_operation)
    operation2 = DeferredCacheHashableArgs(_operation)

class Saver:
    def __init__(self):
        self.val = None

    def save(self, arg):
        self.val = arg


class DefcacheTests(unittest.TestCase):

    def test_defcache(self):
        from twisted.trial import util
        ae = self.assertEquals
        ar = self.assertRaises

        t = TestBlobby()
        s = Saver()
        d = t.operation('foo')
        d.addCallback(s.save)
        util.wait(d)
        ae(s.val, 'foo')

        t = TestBlobby()
        s1 = Saver()
        s2 = Saver()
        d1 = t.operation('foo')
        d2 = t.operation('foo')
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        util.wait(d1)
        util.wait(d2)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        # Check it was only called once, as expected
        ae(t.calls, [(('foo',),{})])

        # Check for the cache of completed calls
        d3 = t.operation('foo')
        s3 = Saver()
        d3.addCallback(s3.save)
        util.wait(d3)
        ae(s3.val, 'foo')
        ae(t.calls, [(('foo',),{})])
        
        # Now test kwargs
        t = TestBlobby()
        s1 = Saver()
        s2 = Saver()
        s3 = Saver()
        d1 = t.operation('foo', kw=True)
        d2 = t.operation('foo', kw=True)
        d3 = t.operation('foo', kw=False)
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        d3.addCallback(s3.save)
        util.wait(d1)
        util.wait(d2)
        util.wait(d3)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        ae(s3.val, 'foo')
        # Check it was called twice only
        ae(len(t.calls), 2)

        t = TestBlobby()
        ar(TypeError, t.operation2, 'foo', {})

        s1 = Saver()
        s2 = Saver()
        d1 = t.operation2('foo', kw=True)
        d2 = t.operation('foo', kw=True)
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        util.wait(d1)
        util.wait(d2)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        # Check it was called twice only
        ae(len(t.calls), 2)

        t = TestBlobby()

        s1 = Saver()
        s2 = Saver()
        d1 = t.operation('foo', kw={})
        d2 = t.operation('foo', kw={})
        d1.addCallback(s1.save)
        d2.addCallback(s2.save)
        util.wait(d1)
        util.wait(d2)
        ae(s1.val, 'foo')
        ae(s2.val, 'foo')
        # Check it was called both times
        ae(len(t.calls), 2)




From bob at redivi.com  Fri Jan  7 09:55:01 2005
From: bob at redivi.com (Bob Ippolito)
Date: Fri, 7 Jan 2005 11:55:01 -0500
Subject: [Twisted-Python] Deferred style question.
In-Reply-To: <200501072251.19680.anthony@interlink.com.au>
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
	<49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
	<200501072251.19680.anthony@interlink.com.au>
Message-ID: <DED450B8-60CC-11D9-B917-000A95BA5446@redivi.com>


On Jan 7, 2005, at 6:51, Anthony Baxter wrote:

> On Friday 07 January 2005 21:24, Bob Ippolito wrote:
>> It's funny that you are using a decorator, but not the __contains__
>> operator ;)
>
> Pah! Here's a final version for now, fixed to work for methods and
> also supporting errbacks, as well as kwargs and unhashable arguments.
> The previous version didn't work for methods, because I was trying to 
> be
> too clever.

I would change the "if not opdef" to "if opdef is None", because it's a 
little faster and more precise.

> This is checked into shtoom (on a branch at the moment, since that's 
> where
> I need it). If people like, I can check it into the twisted sandbox 
> somewhere
> as well...
>
> If it's considered a good idea, I'm happy for this to go into twisted 
> proper.
> Now that I've got it, there's going to be a whole pile of places I can 
> use
> this.

Well, I think this or something like it should go in.  I've been using 
this idiom for years, actually.

-bob




From kurtschwehr at yahoo.com  Fri Jan  7 12:33:19 2005
From: kurtschwehr at yahoo.com (Kurt Schwehr)
Date: Fri, 7 Jan 2005 11:33:19 -0800 (PST)
Subject: [Twisted-Python] twisted & buildbot for fink/macosx
In-Reply-To: <E1CmzLC-0005bW-02@pyramid.twistedmatrix.com>
Message-ID: <20050107193319.11765.qmail@web51403.mail.yahoo.com>

Hey All,

When reading this know that I'm not really a python
programmer (last time was too long ago)

I posted fink info file for twisted, buildbot, and a
couple others here:

http://schwehr.org/software/fink/

No one has expressed any interest and since I do not
have the time to figure out buildbot for my project
(density), I am going to drop the info files.

If you do have interest in these files, please let me
know and if they work for you, I can easily add them
to the fink cvs tree.  I don't really know if they are
ok or not.  Otherwise, I will just leave them on my
web page and not put them into fink.

Or, if someone has a simple tutorial of setting up
buildbot (for the clueless) with only one machine that
has local only cvs and does the builds too with just a
simple make command, then if I can get buildbot
working pretty quickly then I would add these fink
packages.

-kurt


		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - Helps protect you from nasty viruses. 
http://promotions.yahoo.com/new_mail



From db3l at fitlinxx.com  Fri Jan  7 13:55:09 2005
From: db3l at fitlinxx.com (David Bolen)
Date: 07 Jan 2005 15:55:09 -0500
Subject: [Twisted-Python] Re: Deferred style question.
References: <200501072040.29199.anthony@interlink.com.au>
	<200501072113.15988.anthony@interlink.com.au>
	<49DE5CC9-6096-11D9-922D-000A95BA5446@redivi.com>
	<200501072251.19680.anthony@interlink.com.au>
	<DED450B8-60CC-11D9-B917-000A95BA5446@redivi.com>
Message-ID: <uzmzlklhu.fsf@fitlinxx.com>

Bob Ippolito <bob at redivi.com> writes:

(...)
> Well, I think this or something like it should go in.  I've been using
> this idiom for years, actually.

I'd agree - we have similar scenarios and this is the same approach
we've been taking.

-- David




From db3l at fitlinxx.com  Fri Jan  7 14:20:08 2005
From: db3l at fitlinxx.com (David Bolen)
Date: 07 Jan 2005 16:20:08 -0500
Subject: [Twisted-Python] Re: More on PB Copyable Errors
References: <94a776e704122812321c78389@mail.gmail.com>
	<94a776e70412281234522aa53d@mail.gmail.com>
	<94a776e70412290656149280cd@mail.gmail.com>
	<uzmzwex02.fsf@fitlinxx.com>
	<94a776e704122911477e36fb72@mail.gmail.com>
	<uis6kecui.fsf@fitlinxx.com>
	<94a776e7041230074867d17cc6@mail.gmail.com>
	<94a776e704123007572b3dc57b@mail.gmail.com>
	<94a776e70412300827a0ec69d@mail.gmail.com>
	<uekh7hgou.fsf@fitlinxx.com>
	<94a776e704123010255c184077@mail.gmail.com>
Message-ID: <uvfa9kkc7.fsf@fitlinxx.com>

Justin Johnson <justinjohnson at gmail.com> writes:

> Oh yeah, right.  I managed to entirely skip your comments on the
> security options.
> 
> How about the attached patch?

Sorry on the delay - holidays and then I forgot about it :-(

I'm still on the fence with respect to having independent "jellyable"
checks.  My concern would be that having the independent checks of
what is suitable for jellying can be fragile with respect to coupling
with the actual jelly operation.  Even with the jellyable and security
checks there are some paths in the jellier code that could still fail
the operation.

I also think I liked your earlier attempts at keeping the change
within the CopyableFailure class (I may have missed why that changed),
although even there you'd have a double jelly since you'd have to
check the jelly attempt in getStateToCopy.  Although alternatively,
CopyableFailure could just implement its own jellyFor (rather than
getStateToCopy) which handled that more gracefully and with a single
jelly attempt on the value.

-- David




From hoxide_dirac at yahoo.com.cn  Sat Jan  8 01:46:30 2005
From: hoxide_dirac at yahoo.com.cn (Hoxide Ma)
Date: Sat, 8 Jan 2005 16:46:30 +0800 (CST)
Subject: [Twisted-Python] how to create a http proxy client in twisted?
Message-ID: <20050108084630.6566.qmail@web15705.mail.cnb.yahoo.com>

is there any example?

which example in TwistedDocs\examples\Proxy.py just
like that:

from twisted.internet import reactor
from twisted.web import proxy, server

site =
server.Site(proxy.ReverseProxyResource('www.yahoo.com',
80, '/'))
reactor.listenTCP(8080, site)
reactor.run()

what's that means?

_________________________________________________________
Do You Yahoo!?
150MP3
http://music.yisou.com/

http://image.yisou.com
1G1000
http://cn.rd.yahoo.com/mail_cn/tag/1g/*http://cn.mail.yahoo.com/event/mail_1g/



From anthony at interlink.com.au  Sat Jan  8 05:21:07 2005
From: anthony at interlink.com.au (Anthony Baxter)
Date: Sat, 8 Jan 2005 23:21:07 +1100
Subject: [Twisted-Python] Re: Deferred style question.
In-Reply-To: <uzmzlklhu.fsf@fitlinxx.com>
References: <200501072040.29199.anthony@interlink.com.au>
	<DED450B8-60CC-11D9-B917-000A95BA5446@redivi.com>
	<uzmzlklhu.fsf@fitlinxx.com>
Message-ID: <200501082321.08008.anthony@interlink.com.au>

On Saturday 08 January 2005 07:55, David Bolen wrote:
> Bob Ippolito <bob at redivi.com> writes:
>
> (...)
>
> > Well, I think this or something like it should go in.  I've been using
> > this idiom for years, actually.
>
> I'd agree - we have similar scenarios and this is the same approach
> we've been taking.

Once I'd written it down, I went back and found I'd done something 
similar, but not quite as general, on any number of previous occasions.

I think it really should go in - so, the obvious question is: what else 
needs to be done to put it in? The current version in shtoom svn 
supports a couple of different options - whether to allow unhashable
arguments (in which case no caching is done), whether to cache only
operations in progress, or cache all operations. It also supports a 
cache clearing method, and works nicely as either a 2.4-style 
decorator, or an older style decorator. There's unittests (although it
still needs tests for the .errback handling, will be added shortly).

Current code is at 
http://divmod.org/cvs/branches/improved-stun/shtoom/defcache.py?root=Shtoom&view=markup

Anthony
-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.



From foom at fuhm.net  Sat Jan  8 11:16:35 2005
From: foom at fuhm.net (James Y Knight)
Date: Sat, 8 Jan 2005 13:16:35 -0500
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <6E4E6156-61A1-11D9-86E3-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2005-01-03 14:40:06.260000:
  Bugs opened: 7   Bugs closed: 3   Total open bugs: 332 (+4)
   Urgent: 14 (+1)
   Bug: 130 (+3)
   Feature: 123 (+0)
   Wish: 65 (+0)

New / Reopened Bugs
______________________
                     ==== Urgent ====
make epydoc stop ignoring zope interfaces  (1 month ago)
        http://twistedmatrix.com/bugs/issue794 opened by radix

                     ==== Bug ====
[CONCH] bug in examples/sshsimpleclient.py  (yesterday)
        http://twistedmatrix.com/bugs/issue857 opened by subterrific

Importing twisted.protocols.dns blocks for /dev/random  (yesterday)
        http://twistedmatrix.com/bugs/issue856 opened by ben

[PATCH] t.conch.insults.insults doesn't recover from an unimplemented 
escape sequence  (2 days ago)
        http://twistedmatrix.com/bugs/issue854 opened by marienz

conch won't allow logins  (yesterday)
CLOSED http://twistedmatrix.com/bugs/issue855 opened by REdOG

twisted.names can't look up information if a domain has AAAA or A6 
records and the system doesn't support ipv6  (4 days ago)
        http://twistedmatrix.com/bugs/issue852 opened by marienz

                     ==== Feature ====
Cannot run a Multicast server under Windows  (2 days ago)
        http://twistedmatrix.com/bugs/issue853 opened by lstep

Bugs Closed
______________________
                     ==== Bug ====
wrapping code in IRCClient can cause infinite loops  (3 weeks ago)
        http://twistedmatrix.com/bugs/issue827 opened by edmundd, closed 
by jml

conch won't allow logins  (yesterday)
        http://twistedmatrix.com/bugs/issue855 opened by REdOG, closed 
by REdOG

                     ==== Feature ====
[TRIAL] Trial dry-run  (2 weeks ago)
        http://twistedmatrix.com/bugs/issue835 opened by jml, closed by 
jml




From jdb at mail.nerc-essc.ac.uk  Mon Jan 10 06:50:51 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Mon, 10 Jan 2005 13:50:51 -0000
Subject: [Twisted-Python] Interactive Twisted client (newbie question?)
In-Reply-To: <20050106003505.GH7521@localhost.localdomain>
Message-ID: <000e01c4f71b$65d6a540$76a6abc0@marlow>

Hi all,

Thanks for everyone who replied with help on this issue.  After much
head-scratching I decided that Twisted was not the right framework for my
particular app and I solved my problem another way.  The idea of running a
Twisted app with a Telnet or stdio interface is a great idea though; I'll
bear this in mind for the future.

In case anyone's interested, the approach I took (for implementing a client
program that speaks the Styx protocol) was to create a client class that
implements a sendMessage() method.  When the client class connects to the
remote server, it fires off a background thread that continually listens for
received messages, firing an event when a whole message arrives.  A user can
send a message, then wait for the corresponding reply, or the user can send
a message and arrange for a callback method to be called when the reply
arrives.  (in Styx, a user can send several messages without waiting for
replies)  This allows both synchronous and asynchronous approaches and means
that I can use the client classes at the Python prompt, e.g:

from styx import *
conn = StyxConnection("aserver.com", 6666) # connect to the server
f = conn.open("afile", "r") # open a file for reading
f.read() # read the contents of the file

(In Styx, all remote resources are virtualised as files, so you interact
with a remote resource by reading from and writing to file-like objects.)

Thanks again,
Jon

-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com]On Behalf Of Andrew
Bennetts
Sent: 06 January 2005 00:35
To: Twisted general discussion
Subject: Re: [Twisted-Python] Interactive Twisted client (newbie
question?)


On Wed, Jan 05, 2005 at 01:48:37PM -0500, Abe Fettig wrote:
[...]
>
> As JP mentioned, you can also use twisted.internet.stdio to provide a
> command line interface to your running Twisted application.  I'm
> attaching a simple app that illustrates the point.  Here's an example
> session:

Nice example of stdio, LineReceived, and using deferreds!  Abe, can we
include this example in Twisted?

-Andrew.


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From justinjohnson at gmail.com  Mon Jan 10 20:15:08 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Mon, 10 Jan 2005 21:15:08 -0600
Subject: [Twisted-Python] Re: More on PB Copyable Errors
In-Reply-To: <uvfa9kkc7.fsf@fitlinxx.com>
References: <94a776e704122812321c78389@mail.gmail.com>
	<uzmzwex02.fsf@fitlinxx.com>
	<94a776e704122911477e36fb72@mail.gmail.com>
	<uis6kecui.fsf@fitlinxx.com>
	<94a776e7041230074867d17cc6@mail.gmail.com>
	<94a776e704123007572b3dc57b@mail.gmail.com>
	<94a776e70412300827a0ec69d@mail.gmail.com>
	<uekh7hgou.fsf@fitlinxx.com>
	<94a776e704123010255c184077@mail.gmail.com>
	<uvfa9kkc7.fsf@fitlinxx.com>
Message-ID: <94a776e7050110191537664713@mail.gmail.com>

See comments below.

On 07 Jan 2005 16:20:08 -0500, David Bolen <db3l at fitlinxx.com> wrote:
[snip]
> 
> Sorry on the delay - holidays and then I forgot about it :-(
> 
> I'm still on the fence with respect to having independent "jellyable"
> checks.  My concern would be that having the independent checks of
> what is suitable for jellying can be fragile with respect to coupling
> with the actual jelly operation.  Even with the jellyable and security
> checks there are some paths in the jellier code that could still fail
> the operation.

Can you clarify here?  What paths are you referring to?  I'd prefer to
not duplicate those checks as well, but it seemed like the simplist
way to accomplish my goal.  It does sound like your understanding of
the code is better than mine though.

> I also think I liked your earlier attempts at keeping the change
> within the CopyableFailure class (I may have missed why that changed),
> although even there you'd have a double jelly since you'd have to
> check the jelly attempt in getStateToCopy.  Although alternatively,
> CopyableFailure could just implement its own jellyFor (rather than
> getStateToCopy) which handled that more gracefully and with a single
> jelly attempt on the value.
> 
> -- David
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From bbrelin at openapp.biz  Tue Jan 11 11:58:16 2005
From: bbrelin at openapp.biz (Braun Brelin)
Date: Tue, 11 Jan 2005 18:58:16 +0000
Subject: [Twisted-Python] TCP test harness
Message-ID: <1105469896.1250.25.camel@localhost.localdomain>

Has anyone written a TCP test harness in Twisted/Python? 
Someone has asked me to write one, but I'm fairly new to twisted (less
new to Python) and it seems that it would be silly for me to write
something if someone else has already written and/or posted one. 

Basically, I'm looking for a TCP test harness that will support up to a
thousand concurrent TCP connections at a time sending data to a remote
device. 

Thanks,

Braun Brelin





From orbitz at ezabel.com  Tue Jan 11 16:50:48 2005
From: orbitz at ezabel.com (orbitz)
Date: Tue, 11 Jan 2005 18:50:48 -0500
Subject: [Twisted-Python] TCP test harness
In-Reply-To: <1105469896.1250.25.camel@localhost.localdomain>
References: <1105469896.1250.25.camel@localhost.localdomain>
Message-ID: <41E46658.8030900@ezabel.com>

Sounds like a loop that calls reactor.connectTCP a bunch.  Do you need 
something more specific? Some more information might help.


Braun Brelin wrote:

>Has anyone written a TCP test harness in Twisted/Python? 
>Someone has asked me to write one, but I'm fairly new to twisted (less
>new to Python) and it seems that it would be silly for me to write
>something if someone else has already written and/or posted one. 
>
>Basically, I'm looking for a TCP test harness that will support up to a
>thousand concurrent TCP connections at a time sending data to a remote
>device. 
>
>Thanks,
>
>Braun Brelin
>
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
>  
>





From andrew-twisted at puzzling.org  Wed Jan 12 17:56:18 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 13 Jan 2005 11:56:18 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r12864 - Temporarily
	workaround z.i bug.
In-Reply-To: <E1Copxq-00085X-00@wolfwood>
References: <E1Copxq-00085X-00@wolfwood>
Message-ID: <20050113005618.GD5076@localhost.localdomain>

On Wed, Jan 12, 2005 at 02:23:38PM -0700, James Knight wrote:
[...]
> +    # Until this is fixed, make *sure* fixClassImplements was
> +    # called before looking anything up in AdapterRegistry.
> +    # http://collector.zope.org/Zope3-dev/349
> +    if hasattr(ob, '__class__'):
> +        fixClassImplements(ob.__class__)
> +    fixClassImplements

This last line looks a bit dubious :)

-Andrew.




From justinjohnson at gmail.com  Thu Jan 13 12:47:05 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 13 Jan 2005 13:47:05 -0600
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
Message-ID: <94a776e70501131147496f4e2d@mail.gmail.com>

I recently started running into a problem where my process protocol
isn't extracting stdout accurately in all cases.  I have a method on a
service that loops through a list and runs a command, passing in each
item on the list one at a time.  Out of ~50 items in the list, and
thus ~50 invocations of the command, one or two will fail to extract
all of stdout from the command.  Instead the first character of stdout
is extracted and that is it.

The process protocol I'm using is below.  Does anyone see anything
wrong with the code?  I am using the win32event reactor and Twisted
1.3.0.


from twisted.internet import reactor
from twisted.internet import protocol, error, defer
from twisted.python import log

from ratcontrol import errors, config

import os, sys

class BasicProcessProtocol(protocol.ProcessProtocol):
    def __init__(self):
        self.deferred = defer.Deferred()
        self.stdout = ""
        self.stderr = ""
        self.status = 0

    def connectionMade(self):
        self.transport.closeStdin()

    def outReceived(self, data):
        self.stdout += data

    def errReceived(self, data):
        self.stderr += data

    def processEnded(self, reason):
        if reason.check(error.ProcessDone):
            self.status = 0
            # pass the items we want down the callback chain
            self.deferred.callback((self.status, self.stdout, self.stderr))
        else:
            self.status = 1
            theError = errors.CmdError(self.cmd, self.status,
self.stdout, self.stderr)
            log.msg(theError)
            self.deferred.errback(theError)

def openProcess(cmd_and_args):
        cmd = cmd_and_args[0]
        args = cmd_and_args[1:]

        # Spawn the process using the reactor so we don't block
        proto = BasicProcessProtocol()
        proto.cmd = cmd_and_args
        reactor.spawnProcess(proto, cmd, cmd_and_args, env=os.environ)
        return proto.deferred



From itamar at itamarst.org  Thu Jan 13 13:07:37 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 15:07:37 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <94a776e70501131147496f4e2d@mail.gmail.com>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
Message-ID: <1105646857.1389.48.camel@sheriffpony>

On Thu, 2005-01-13 at 13:47 -0600, Justin Johnson wrote:

> The process protocol I'm using is below.  Does anyone see anything
> wrong with the code?  I am using the win32event reactor and Twisted
> 1.3.0.

The win32event process support is known to be buggy. On Windows, popen
with a thread may be a better choice.




From justinjohnson at gmail.com  Thu Jan 13 13:11:41 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 13 Jan 2005 14:11:41 -0600
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105646857.1389.48.camel@sheriffpony>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
Message-ID: <94a776e7050113121115db8446@mail.gmail.com>

Crud!  It's been working for me for most everything else.

Did you add support to the default reactor to spawn threads on
Windows?  I thought I saw a closed bug related to this, but was
waiting for the next release to try it out.

On Thu, 13 Jan 2005 15:07:37 -0500, Itamar Shtull-Trauring
<itamar at itamarst.org> wrote:
> On Thu, 2005-01-13 at 13:47 -0600, Justin Johnson wrote:
> 
> > The process protocol I'm using is below.  Does anyone see anything
> > wrong with the code?  I am using the win32event reactor and Twisted
> > 1.3.0.
> 
> The win32event process support is known to be buggy. On Windows, popen
> with a thread may be a better choice.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From wolfgang.keller.nospam at gmx.de  Thu Jan 13 13:40:41 2005
From: wolfgang.keller.nospam at gmx.de (Wolfgang Keller)
Date: Thu, 13 Jan 2005 21:40:41 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
Message-ID: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>

Hello,

recently I read something about the "kqueue" event notification mechanism
built into FreeBSD and that it would allow to receive notification when
filesystem contents change. Would this mechanism allow to implement a
similar function as database triggers for a filesystem, i.e. write a script
that does something with files that are added to, modified in or deleted
from a certain directory without having to poll the filesystem all the
time? Folder actions allow such things on MacOS X, but Applescript is slow
and I would prefer Python anyway. ;-) If so, is there a way to write such
scripts in Python using Twisted?

TIA,

Best regards

Wolfgang Keller




From bob at redivi.com  Thu Jan 13 13:51:30 2005
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jan 2005 15:51:30 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
Message-ID: <E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>

On Jan 13, 2005, at 15:40, Wolfgang Keller wrote:

> recently I read something about the "kqueue" event notification 
> mechanism
> built into FreeBSD and that it would allow to receive notification when
> filesystem contents change. Would this mechanism allow to implement a
> similar function as database triggers for a filesystem, i.e. write a 
> script
> that does something with files that are added to, modified in or 
> deleted
> from a certain directory without having to poll the filesystem all the
> time? Folder actions allow such things on MacOS X, but Applescript is 
> slow
> and I would prefer Python anyway. ;-) If so, is there a way to write 
> such
> scripts in Python using Twisted?

Actually Folder Actions don't allow this.  I am relatively certain that 
they are implemented entirely in Finder.  They *might* be hooked into 
at the CoreServices/Carbon APIs, but DEFINITELY NOT the BSD level APIs 
(in Mac OS X 10.3 and earlier anyway).

The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for 
this sort of thing -- but Finder still polls.  I do not know what is 
necessary to integrate this with Twisted, though.  There is some 
support for kqueue in Twisted, but last I remember you need to download 
and patch some years-old extension and compile it in order to get that 
to work.

Another thing of interest to you might be FAM 
<http://oss.sgi.com/projects/fam/>.

-bob




From itamar at itamarst.org  Thu Jan 13 14:19:37 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:19:37 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <94a776e7050113121115db8446@mail.gmail.com>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<94a776e7050113121115db8446@mail.gmail.com>
Message-ID: <1105651178.1385.52.camel@sheriffpony>

On Thu, 2005-01-13 at 14:11 -0600, Justin Johnson wrote:
> Crud!  It's been working for me for most everything else.
> 
> Did you add support to the default reactor to spawn threads on
> Windows?  I thought I saw a closed bug related to this, but was
> waiting for the next release to try it out.

Thread support has always been fine on Windows.




From itamar at itamarst.org  Thu Jan 13 14:20:26 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:20:26 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
Message-ID: <1105651226.1383.54.camel@sheriffpony>

On Thu, 2005-01-13 at 15:51 -0500, Bob Ippolito wrote:

> The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for 
> this sort of thing -- but Finder still polls. 

James was showing some docs that said it doesn't actually support the
file notification stuff currently.




From glyph at divmod.com  Thu Jan 13 14:23:30 2005
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Thu, 13 Jan 2005 16:23:30 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105646857.1389.48.camel@sheriffpony>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
Message-ID: <1105651410.11487.0.camel@localhost>

On Thu, 2005-01-13 at 15:07 -0500, Itamar Shtull-Trauring wrote:
> 
> The win32event process support is known to be buggy. On Windows, popen
> with a thread may be a better choice.

Is this still true in trunk?  I keep thinking that we've fixed this
issue and it keeps not being fixed.  What issue number is it?

If popen with a thread is a better choice, can we provide an
implementation of that that comes with the reactor so that at least
people don't have to rewrite their code?




From bob at redivi.com  Thu Jan 13 14:32:25 2005
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jan 2005 16:32:25 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <1105651226.1383.54.camel@sheriffpony>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
Message-ID: <9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>


On Jan 13, 2005, at 16:20, Itamar Shtull-Trauring wrote:

> On Thu, 2005-01-13 at 15:51 -0500, Bob Ippolito wrote:
>
>> The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for
>> this sort of thing -- but Finder still polls.
>
> James was showing some docs that said it doesn't actually support the
> file notification stuff currently.

I've seen it used in GraphViz and ReSTedit, so that's simply not true 
(for files anyway, not sure about directories).

-bob




From itamar at itamarst.org  Thu Jan 13 14:34:22 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:34:22 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105651410.11487.0.camel@localhost>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<1105651410.11487.0.camel@localhost>
Message-ID: <1105652062.1391.56.camel@sheriffpony>

On Thu, 2005-01-13 at 16:23 -0500, Glyph Lefkowitz wrote:

> > The win32event process support is known to be buggy. On Windows, popen
> > with a thread may be a better choice.
> 
> Is this still true in trunk?  I keep thinking that we've fixed this
> issue and it keeps not being fixed.  What issue number is it?

Cory checked in fixed code and then backed it out.

> If popen with a thread is a better choice, can we provide an
> implementation of that that comes with the reactor so that at least
> people don't have to rewrite their code?

Cory's code may have been similar to doing this.




From bob at redivi.com  Thu Jan 13 14:36:46 2005
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jan 2005 16:36:46 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
Message-ID: <39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>


On Jan 13, 2005, at 16:32, Bob Ippolito wrote:

>
> On Jan 13, 2005, at 16:20, Itamar Shtull-Trauring wrote:
>
>> On Thu, 2005-01-13 at 15:51 -0500, Bob Ippolito wrote:
>>
>>> The kernel in Mac OS X 10.3.0 supports kqueue, so you can use it for
>>> this sort of thing -- but Finder still polls.
>>
>> James was showing some docs that said it doesn't actually support the
>> file notification stuff currently.
>
> I've seen it used in GraphViz and ReSTedit, so that's simply not true  
> (for files anyway, not sure about directories).

Additionally, Apple has sample code that demonstrates this feature:  
http://developer.apple.com/samplecode/FileNotification/ 
FileNotification.html

-bob




From justinjohnson at gmail.com  Thu Jan 13 14:49:07 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 13 Jan 2005 15:49:07 -0600
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <1105652062.1391.56.camel@sheriffpony>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<1105651410.11487.0.camel@localhost>
	<1105652062.1391.56.camel@sheriffpony>
Message-ID: <94a776e7050113134916fa4493@mail.gmail.com>

I was referring to Issue591, which based on the comments is done.  Can
anyone verify that?  Maybe I'll have to do a windows build instead of
wait for the next release.


On Thu, 13 Jan 2005 16:34:22 -0500, Itamar Shtull-Trauring
<itamar at itamarst.org> wrote:
> On Thu, 2005-01-13 at 16:23 -0500, Glyph Lefkowitz wrote:
> 
> > > The win32event process support is known to be buggy. On Windows, popen
> > > with a thread may be a better choice.
> >
> > Is this still true in trunk?  I keep thinking that we've fixed this
> > issue and it keeps not being fixed.  What issue number is it?
> 
> Cory checked in fixed code and then backed it out.
> 
> > If popen with a thread is a better choice, can we provide an
> > implementation of that that comes with the reactor so that at least
> > people don't have to rewrite their code?
> 
> Cory's code may have been similar to doing this.
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From itamar at itamarst.org  Thu Jan 13 14:56:10 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 16:56:10 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
Message-ID: <1105653370.1383.60.camel@sheriffpony>

On Thu, 2005-01-13 at 16:36 -0500, Bob Ippolito wrote:

> Additionally, Apple has sample code that demonstrates this feature:  
> http://developer.apple.com/samplecode/FileNotification/ 
> FileNotification.html

Neato. Who wants to fix up kqreactor, and then write a cross-platform
file notification API that  uses kqueue when available?




From itamar at itamarst.org  Thu Jan 13 15:18:50 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 13 Jan 2005 17:18:50 -0500
Subject: [Twisted-Python] ProcessProtocol randomly not returning all of
	stdout
In-Reply-To: <94a776e7050113134916fa4493@mail.gmail.com>
References: <94a776e70501131147496f4e2d@mail.gmail.com>
	<1105646857.1389.48.camel@sheriffpony>
	<1105651410.11487.0.camel@localhost>
	<1105652062.1391.56.camel@sheriffpony>
	<94a776e7050113134916fa4493@mail.gmail.com>
Message-ID: <1105654730.1417.62.camel@sheriffpony>

On Thu, 2005-01-13 at 15:49 -0600, Justin Johnson wrote:
> I was referring to Issue591, which based on the comments is done.  Can
> anyone verify that?  Maybe I'll have to do a windows build instead of
> wait for the next release.

I think Cory then backed the code out, so the bug ought to be reopened.




From glyph at divmod.com  Thu Jan 13 15:22:52 2005
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Thu, 13 Jan 2005 17:22:52 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <1105653370.1383.60.camel@sheriffpony>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
Message-ID: <1105654972.11487.7.camel@localhost>

On Thu, 2005-01-13 at 16:56 -0500, Itamar Shtull-Trauring wrote:
> On Thu, 2005-01-13 at 16:36 -0500, Bob Ippolito wrote:
> 
> > Additionally, Apple has sample code that demonstrates this feature:  
> > http://developer.apple.com/samplecode/FileNotification/ 
> > FileNotification.html
> 
> Neato. Who wants to fix up kqreactor, and then write a cross-platform
> file notification API that  uses kqueue when available?

*BZZT*!  You did not state your response in the form of a new item in
the tracker ;-)




From stephen at thorne.id.au  Fri Jan 14 06:47:33 2005
From: stephen at thorne.id.au (Stephen)
Date: Fri, 14 Jan 2005 21:47:33 +0800
Subject: [Twisted-Python] Re:
Message-ID: <jngdmrmwskntkmuctfl@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20050114/efc33883/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Doll.cpl
Type: application/octet-stream
Size: 28129 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20050114/efc33883/attachment-0002.obj>

From prabaharpython at yahoo.co.in  Sat Jan 15 03:24:08 2005
From: prabaharpython at yahoo.co.in (Mosas)
Date: Sat, 15 Jan 2005 10:24:08 +0000 (GMT)
Subject: [Twisted-Python] How to configure twisted web?
In-Reply-To: <94a776e7050110191537664713@mail.gmail.com>
Message-ID: <20050115102408.84610.qmail@web8203.mail.in.yahoo.com>

Dear All,

     I have doubt when I installed twisted web.
After the installation twisted web Whether we need any
other webserver or not to run web programs?
     I normally run all the server side coding(perl
scripts,php scripts) the following path.
"http://192.168.0.21/cgi-bin/helloworld.pl"  in
my machine. like that How I need to  run a perl
program in Twisted.
   I have confusion to give path details for mktap.
How I need to give path for mktap to run
like (http://192.168.0.21/cgi-bin/helloworld.pl).
   I already gone through lot of twisted
documentation.  But now I am in need of some
practical guidance from this list.



     
  

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From andy at thecablelounge.com  Sat Jan 15 04:42:51 2005
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 15 Jan 2005 21:42:51 +1000
Subject: [Twisted-Python] How to configure twisted web?
In-Reply-To: <20050115102408.84610.qmail@web8203.mail.in.yahoo.com>
References: <20050115102408.84610.qmail@web8203.mail.in.yahoo.com>
Message-ID: <41E901BB.4090404@thecablelounge.com>

Mosas wrote:

> Dear All,
> 
>      I have doubt when I installed twisted web.
> After the installation twisted web Whether we need any
> other webserver or not to run web programs?
>      I normally run all the server side coding(perl
> scripts,php scripts) the following path.
> "http://192.168.0.21/cgi-bin/helloworld.pl"  in
> my machine. like that How I need to  run a perl
> program in Twisted.

Try:

http://twistedmatrix.com/documents/current/howto/using-twistedweb#auto20

 >    I have confusion to give path details for mktap.
 > How I need to give path for mktap to run
 > like (http://192.168.0.21/cgi-bin/helloworld.pl).

Save the above snippet to say www/perlsite.rpy and change the paths to 
be right for you.  Then run

 > mktap web --resource-script=www/perlsite.rpy
 > twistd -f ./web.tap

Never tried this myself, so .. hoping it works :)

good luck,

Andy.



From twisted at dry.pl  Mon Jan 17 12:52:14 2005
From: twisted at dry.pl (Michal Suszko)
Date: Mon, 17 Jan 2005 20:52:14 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <1105653370.1383.60.camel@sheriffpony>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
Message-ID: <20050117195214.GE36685@dry.pl>

On Thu, 13 January 2005 at 16:56:10 -0500, Itamar Shtull-Trauring wrote:
> 
> Neato. Who wants to fix up kqreactor, and then write a cross-platform
> file notification API that  uses kqueue when available?

Actually I'm playing with kqreactor right now, but before starting
serious work on it need to settle on new py-kqueue API first.

Results of first attempts to change kqreactor are very promising.
For example reactor's Waker implemented using kqueue's timer is much
simpler and way faster than FIFO ping-pong. Timers can be used for
CallLater as well...


Michal



From itamar at itamarst.org  Mon Jan 17 13:15:57 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 17 Jan 2005 15:15:57 -0500
Subject: [Twisted-Python] "Directory triggers" with kqueue using
	Twisted? (on MacOS X / FreeBSD)
In-Reply-To: <20050117195214.GE36685@dry.pl>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony> <20050117195214.GE36685@dry.pl>
Message-ID: <1105992957.22346.27.camel@sheriffpony>

On Mon, 2005-01-17 at 20:52 +0100, Michal Suszko wrote:

> simpler and way faster than FIFO ping-pong. Timers can be used for
> CallLater as well...

Make sure kqueue uses a decent algorithm. Using glib timers for
callLater is *slower* than using Python for large numbers, since glib
uses a stupid O(n) algorithm.

Keep us posted on your work, it sounds very useful.





From wolfgang.keller.nospam at gmx.de  Mon Jan 17 14:51:55 2005
From: wolfgang.keller.nospam at gmx.de (Wolfgang Keller)
Date: Mon, 17 Jan 2005 22:51:55 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <20050117195214.GE36685@dry.pl>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
	<20050117195214.GE36685@dry.pl>
Message-ID: <1n18t53r9wjch$.lgtu101kqnmm.dlg@40tude.net>

Am Mon, 17 Jan 2005 20:52:14 +0100 schriebst du:

> On Thu, 13 January 2005 at 16:56:10 -0500, Itamar Shtull-Trauring wrote:
>> 
>> Neato. Who wants to fix up kqreactor, and then write a cross-platform
>> file notification API that  uses kqueue when available?
> 
> Actually I'm playing with kqreactor right now, but before starting
> serious work on it need to settle on new py-kqueue API first.

Did you check out the 1.4 version of PyKQueue?

http://ox.eicat.ca/~dgilbert/files/PyKQueue.html

Best regards

Wolfgang Keller




From twisted at dry.pl  Tue Jan 18 02:34:57 2005
From: twisted at dry.pl (Michal Suszko)
Date: Tue, 18 Jan 2005 10:34:57 +0100
Subject: [Twisted-Python] "Directory triggers" with kqueue using Twisted?
	(on MacOS X / FreeBSD)
In-Reply-To: <1n18t53r9wjch$.lgtu101kqnmm.dlg@40tude.net>
References: <jm9g11k2edf1.sh9smuf4bnrz.dlg@40tude.net>
	<E6843D38-65A4-11D9-9A68-000A95BA5446@redivi.com>
	<1105651226.1383.54.camel@sheriffpony>
	<9E04D39A-65AA-11D9-9A68-000A95BA5446@redivi.com>
	<39E38754-65AB-11D9-9A68-000A95BA5446@redivi.com>
	<1105653370.1383.60.camel@sheriffpony>
	<20050117195214.GE36685@dry.pl>
	<1n18t53r9wjch$.lgtu101kqnmm.dlg@40tude.net>
Message-ID: <20050118093457.GF36685@dry.pl>

On Mon, 17 January 2005 at 22:51:55 +0100, Wolfgang Keller wrote:
> Am Mon, 17 Jan 2005 20:52:14 +0100 schriebst du:
> 
> > On Thu, 13 January 2005 at 16:56:10 -0500, Itamar Shtull-Trauring wrote:
> >> 
> >> Neato. Who wants to fix up kqreactor, and then write a cross-platform
> >> file notification API that  uses kqueue when available?
> > 
> > Actually I'm playing with kqreactor right now, but before starting
> > serious work on it need to settle on new py-kqueue API first.
> 
> Did you check out the 1.4 version of PyKQueue?
> 
> http://ox.eicat.ca/~dgilbert/files/PyKQueue.html

Yes, I'm in contact with David.

BTW If anyone uses PyKQueue I can send my WIP to test.

Michal



From sflist at ihonk.com  Tue Jan 18 23:47:43 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Tue, 18 Jan 2005 22:47:43 -0800
Subject: [Twisted-Python] Inheriting from both pb.Cacheable and
	pb.RemoteCache?
Message-ID: <200501182247.43920.sflist@ihonk.com>

Hi!

In the PB howto, it mentions that it's typical and fine to get bidirectional 
synchronization between objects by inheriting from both pb.Copyable and 
pb.RemoteCopy. Is the case the same when it comes to Cacheable?

I want a client to log in and grab attributes of objects as needed from the 
server, and any changes made to the objects on either side ought to be 
replicated on the other end. This looks like the way to accomplish that, but 
I want to verify my suspicion before Twisted bends my brain again. :-)

Thanks!

Steve



From thomas at apestaart.org  Wed Jan 19 03:16:54 2005
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Wed, 19 Jan 2005 11:16:54 +0100
Subject: [Twisted-Python] Inheriting from both pb.Cacheable and
	pb.RemoteCache?
In-Reply-To: <200501182247.43920.sflist@ihonk.com>
References: <200501182247.43920.sflist@ihonk.com>
Message-ID: <1106129814.11693.19.camel@otto.amantes>

Hi,


> In the PB howto, it mentions that it's typical and fine to get bidirectional 
> synchronization between objects by inheriting from both pb.Copyable and 
> pb.RemoteCopy. Is the case the same when it comes to Cacheable?

I've wondered about it too, and after thinking about it I decided it was
a bad idea.  In the copy case (which works fine) you get a one-time copy
through serialization when doing remote methods.  In the Cacheable case
though, objects get changed on the other side due to changes on the one
side.

So in practice, what does that mean when side A changes the same object
as side B ? What do you do with conflicting changes ? It seems to me you
have no predictable way of resolving clashing changes.  So I ended up
not wanting to deal with those situations and worked around my need for
this.

Now, I do think in practice it will probably work, just not reliably and
very hard to debug when it doesn't do what you expected.  Write a small
test app and give it a try.

Thomas


Dave/Dina : future TV today ! - http://www.davedina.org/
<-*- thomas (dot) apestaart (dot) org -*->
The girl that I could never hurt
had to go and lose all that power over me
and I claimed victory
<-*- thomas (at) apestaart (dot) org -*->
URGent, best radio on the net - 24/7 ! - http://urgent.fm/






From sflist at ihonk.com  Wed Jan 19 12:46:22 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Wed, 19 Jan 2005 11:46:22 -0800
Subject: [Twisted-Python] Inheriting from both pb.Cacheable and
	pb.RemoteCache?
In-Reply-To: <1106129814.11693.19.camel@otto.amantes>
References: <200501182247.43920.sflist@ihonk.com>
	<1106129814.11693.19.camel@otto.amantes>
Message-ID: <200501191146.22884.sflist@ihonk.com>

On Wednesday 19 January 2005 02:16 am, Thomas Vander Stichele wrote:
> Hi,
>
> > In the PB howto, it mentions that it's typical and fine to get
> > bidirectional synchronization between objects by inheriting from both
> > pb.Copyable and pb.RemoteCopy. Is the case the same when it comes to
> > Cacheable?
>
> I've wondered about it too, and after thinking about it I decided it was
> a bad idea. In the copy case (which works fine) you get a one-time copy
> through serialization when doing remote methods. In the Cacheable case
> though, objects get changed on the other side due to changes on the one
> side.
>
> So in practice, what does that mean when side A changes the same object
> as side B ? What do you do with conflicting changes ? It seems to me you
> have no predictable way of resolving clashing changes. So I ended up
> not wanting to deal with those situations and worked around my need for
> this.

Yeah, my intent is to protect simultaneous changes through a locking 
mechanism, which will prevent one client from altering a record while another 
client is working on it. (If that sounds like row-level locking to you, 
you're right.) Of course, network latencies may allow a conflict to 
occasionally occur, in which case the conflict should be detected by the 
server and it will do the arbitration to enforce integrity.

But, of course, all this only works nicely if inheriting from Cacheable and 
RemoteCache is fine and dandy.

> Now, I do think in practice it will probably work, just not reliably and
> very hard to debug when it doesn't do what you expected. Write a small
> test app and give it a try.

I was afraid you'd suggest that. :-)

Thanks,

Steve

> Thomas
>
>
> Dave/Dina : future TV today ! - http://www.davedina.org/
> <-*- thomas (dot) apestaart (dot) org -*->
> The girl that I could never hurt
> had to go and lose all that power over me
> and I claimed victory
> <-*- thomas (at) apestaart (dot) org -*->
> URGent, best radio on the net - 24/7 ! - http://urgent.fm/
>
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From justinjohnson at gmail.com  Thu Jan 20 09:24:12 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 20 Jan 2005 10:24:12 -0600
Subject: [Twisted-Python] succeedForOneOf
Message-ID: <94a776e70501200824229dfd62@mail.gmail.com>

I wrote succeedForOneOf to help when I want to loop through a list and
call a function with the item from the list as the first argument to
the function, and stop when one of the function calls succeeds.  The
use case I need it for is, connecting to multiple servers looking for
a particular thing, and stopping when I find it.

In my testing in the attached file, succeedForOneOf does what I would
expect.  However, when I tried this in my application, and func
involved connecting to servers via PB and calling a remote method, it
started up a ton of 'PBClientFactory's until the win32eventreactor
spun wildly out of control because I exceeded the 64 object
limitation.  This of course also caused the server I was connecting to
to spin wildly out of control as well, sucking up all of the CPU.

My question isn't related to the win32event reactor problem.  I just
don't understand why my implementation of succeedForOneOf would fail
in this manner.  Does anyone see a problem with the code?  Has someone
else written code to accomplish this in a different way?

-Justin
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: sfoo.py
URL: </pipermail/twisted-python/attachments/20050120/8ede8710/attachment.ksh>

From justinjohnson at gmail.com  Thu Jan 20 11:22:44 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Thu, 20 Jan 2005 12:22:44 -0600
Subject: [Twisted-Python] Re: succeedForOneOf
In-Reply-To: <94a776e70501200824229dfd62@mail.gmail.com>
References: <94a776e70501200824229dfd62@mail.gmail.com>
Message-ID: <94a776e7050120102274891926@mail.gmail.com>

Well the answer was terribly obvious.  I needed to cache my
connections and reuse them instead of making new connections all the
time.  I was confused by the fact that this worked previously in my
code, but it has evolved some since then.  Anyway, the attached code
works fine.


On Thu, 20 Jan 2005 10:24:12 -0600, Justin Johnson
<justinjohnson at gmail.com> wrote:
> I wrote succeedForOneOf to help when I want to loop through a list and
> call a function with the item from the list as the first argument to
> the function, and stop when one of the function calls succeeds.  The
> use case I need it for is, connecting to multiple servers looking for
> a particular thing, and stopping when I find it.
> 
> In my testing in the attached file, succeedForOneOf does what I would
> expect.  However, when I tried this in my application, and func
> involved connecting to servers via PB and calling a remote method, it
> started up a ton of 'PBClientFactory's until the win32eventreactor
> spun wildly out of control because I exceeded the 64 object
> limitation.  This of course also caused the server I was connecting to
> to spin wildly out of control as well, sucking up all of the CPU.
> 
> My question isn't related to the win32event reactor problem.  I just
> don't understand why my implementation of succeedForOneOf would fail
> in this manner.  Does anyone see a problem with the code?  Has someone
> else written code to accomplish this in a different way?
> 
> -Justin
> 
> 
>



From bill.krueger at comcast.net  Fri Jan 21 08:50:13 2005
From: bill.krueger at comcast.net (Bill Krueger)
Date: Fri, 21 Jan 2005 09:50:13 -0600
Subject: [Twisted-Python] Question on new code development
Message-ID: <1106322614.30599.11.camel@starbug.comcast.net>

I am in the process of building an interactive game server and client
with the client code written in Java and I have a couple of questions. I
am hoping to be up and running with a prototype in the next month. My
plans incluse the use of Twisted framework as I'm very comfortable in
Python as well as Java. 

My first question is, should I be looking at the new Twisted 2.0 for
development or stick with 1.3 and plan on upgrading to 2.0 later. 

Secondly, would using and/or building upon TwistedJava for the
communications between the Java clients and my Twisted server code be a
good direction to take?

Thanks,
 
-- 
Bill Krueger <bill.krueger at comcast.net>




From itamar at itamarst.org  Fri Jan 21 09:22:00 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 21 Jan 2005 11:22:00 -0500
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106322614.30599.11.camel@starbug.comcast.net>
References: <1106322614.30599.11.camel@starbug.comcast.net>
Message-ID: <1106324520.22346.189.camel@sheriffpony>

On Fri, 2005-01-21 at 09:50 -0600, Bill Krueger wrote:

> My first question is, should I be looking at the new Twisted 2.0 for
> development or stick with 1.3 and plan on upgrading to 2.0 later. 

They are compatible in the ways relevant to you, so I'd  start with 1.3.

> Secondly, would using and/or building upon TwistedJava for the
> communications between the Java clients and my Twisted server code be a
> good direction to take?

Well... it works. But I'm not putting much effort into maintaining
TwistedJava these days. On the other hand if you find a serious bug I
will fix it.

How complex and varied is the data you will be sending back and forth?




From jdb at mail.nerc-essc.ac.uk  Fri Jan 21 09:28:19 2005
From: jdb at mail.nerc-essc.ac.uk (Jon Blower)
Date: Fri, 21 Jan 2005 16:28:19 -0000
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106322614.30599.11.camel@starbug.comcast.net>
Message-ID: <007701c4ffd6$376de650$76a6abc0@marlow>

Hi Bill (and everyone),

You might be interested to know that there's a Java package called Netty
(http://gleamynode.net/dev/projects/netty2/) that is very similar in
principle to Twisted, in that it allows you to write network clients and
servers in an efficient, event-based way.  I'm using it and have found it
very good - pretty simple to use and has been very reliable for me so far.
The scope of Netty isn't as large as Twisted, but the core of it is very
similar.

You might also like to read this paragraph on the future of Netty before you
start: http://gleamynode.net/dev/forum/viewtopic.php?t=87.

Regards, Jon

-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com]On Behalf Of Bill
Krueger
Sent: 21 January 2005 15:50
To: twisted-python at twistedmatrix.com
Subject: [Twisted-Python] Question on new code development


I am in the process of building an interactive game server and client
with the client code written in Java and I have a couple of questions. I
am hoping to be up and running with a prototype in the next month. My
plans incluse the use of Twisted framework as I'm very comfortable in
Python as well as Java.

My first question is, should I be looking at the new Twisted 2.0 for
development or stick with 1.3 and plan on upgrading to 2.0 later.

Secondly, would using and/or building upon TwistedJava for the
communications between the Java clients and my Twisted server code be a
good direction to take?

Thanks,

--
Bill Krueger <bill.krueger at comcast.net>


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From uwe at oss4u.com  Fri Jan 21 09:48:17 2005
From: uwe at oss4u.com (Uwe C. Schroeder)
Date: Fri, 21 Jan 2005 08:48:17 -0800
Subject: [Twisted-Python] Twisted PB and Zope
Message-ID: <200501210848.17629.uwe@oss4u.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Hi everyone,

is there a way to use Zope as a client to Twisted PB ?
Background is that I have a nicely working application using Twisted. The GUI 
client is wxPython based and talks to the server part using PB.
Now I'd like to add a webinterface that would ideally use PB to to talk to my 
application server part and retrieve some of the information. 
Is that possible at all? Any pointers?

Thanks

	UC

- --
Open Source Solutions 4U, LLC	2570 Fleetwood Drive
Phone:  +1 650 872 2425		San Bruno, CA 94066
Cell:   +1 650 302 2405		United States
Fax:    +1 650 872 2417
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFB8TJRjqGXBvRToM4RApwEAKCpLF12s56kJWU8SJ/PX3TaFBOS3QCfROth
uCwYXHV/JOEwl/kKNnxHZjU=
=1FBI
-----END PGP SIGNATURE-----




From bill.krueger at comcast.net  Fri Jan 21 13:54:21 2005
From: bill.krueger at comcast.net (Bill Krueger)
Date: Fri, 21 Jan 2005 14:54:21 -0600
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106324520.22346.189.camel@sheriffpony>
References: <1106322614.30599.11.camel@starbug.comcast.net>
	<1106324520.22346.189.camel@sheriffpony>
Message-ID: <1106340861.30599.27.camel@starbug.comcast.net>

On Fri, 2005-01-21 at 11:22 -0500, Itamar Shtull-Trauring wrote:
> On Fri, 2005-01-21 at 09:50 -0600, Bill Krueger wrote:
> 
> > My first question is, should I be looking at the new Twisted 2.0 for
> > development or stick with 1.3 and plan on upgrading to 2.0 later. 
> 
> They are compatible in the ways relevant to you, so I'd  start with 1.3.

Good, that makes it easier.


> 
> > Secondly, would using and/or building upon TwistedJava for the
> > communications between the Java clients and my Twisted server code be a
> > good direction to take?
> 
> Well... it works. But I'm not putting much effort into maintaining
> TwistedJava these days. On the other hand if you find a serious bug I
> will fix it.
> 
> How complex and varied is the data you will be sending back and forth?

The data is composed of interactive text streams, Java types/classes
(representing mouse movements, etc) and binary data (jpg/png type data).
I can convert the  data to a "neutral" format (such as xdr) and build
communication data structures to encapsulate it if needed but if the
TwistedJava code does this already I'm that much further ahead. Keeping
the data streams in a Java native format "seems" like a good way to go
but the Python code will need to use the data as well and I'm not that
far along with what the difference between a Java String and Python
String (repeat this for each Java native type) are.


> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

Thanks,

-- 
Bill Krueger <bill.krueger at comcast.net>




From itamar at itamarst.org  Fri Jan 21 14:31:39 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 21 Jan 2005 16:31:39 -0500
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106340861.30599.27.camel@starbug.comcast.net>
References: <1106322614.30599.11.camel@starbug.comcast.net>
	<1106324520.22346.189.camel@sheriffpony>
	<1106340861.30599.27.camel@starbug.comcast.net>
Message-ID: <1106343099.22354.216.camel@sheriffpony>

On Fri, 2005-01-21 at 14:54 -0600, Bill Krueger wrote:

> The data is composed of interactive text streams, Java types/classes
> (representing mouse movements, etc) and binary data (jpg/png type data).
> I can convert the  data to a "neutral" format (such as xdr) and build
> communication data structures to encapsulate it if needed but if the
> TwistedJava code does this already I'm that much further ahead. Keeping
> the data streams in a Java native format "seems" like a good way to go
> but the Python code will need to use the data as well and I'm not that
> far along with what the difference between a Java String and Python
> String (repeat this for each Java native type) are.

TwistedJava will do the expected conversion by default (so e.g. String
to unicode string in python, ArrayList to list, Integer from/to python
int, etc..). It's lossy going from Python to Java though (can't make
Java ints, only Integers with the default objects,), so you'll need to
write some custom code to create java arrays, but not too much.





From tjs at nunatak.com.au  Fri Jan 21 16:09:23 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Sat, 22 Jan 2005 10:09:23 +1100
Subject: [Twisted-Python] Twisted PB and Zope
In-Reply-To: <200501210848.17629.uwe@oss4u.com>
References: <200501210848.17629.uwe@oss4u.com>
Message-ID: <1106348963.5924.13.camel@smaug.localnet>

PB + zope is messy, you would need to run a reactor in a zope thread.

A zope uri is a valid xml-rpc object whos methods are callable using
xml-rpc + basic auth. twisteds xml-rpc client support lacks basic auth
even though the underlying xml-rpc library supports it. We patched it
up at work but our patch was pretty hacky and not implemented at the
layer that it should be to merge into twisted. 

I guess you could:

a) only invoke methods without security properties set on them in zope
b) fix up twisteds xml-rpc client to do basic auth well
c) ask me for the patch we use and see if its helpful (I doubt it) 

I like the sound of b :)

-tjs 






From bill.krueger at comcast.net  Fri Jan 21 20:45:41 2005
From: bill.krueger at comcast.net (Bill Krueger)
Date: Fri, 21 Jan 2005 21:45:41 -0600
Subject: [Twisted-Python] Question on new code development
In-Reply-To: <1106343099.22354.216.camel@sheriffpony>
References: <1106322614.30599.11.camel@starbug.comcast.net>
	<1106324520.22346.189.camel@sheriffpony>
	<1106340861.30599.27.camel@starbug.comcast.net>
	<1106343099.22354.216.camel@sheriffpony>
Message-ID: <1106365541.17788.3.camel@starbug.comcast.net>

On Fri, 2005-01-21 at 16:31 -0500, Itamar Shtull-Trauring wrote:
> On Fri, 2005-01-21 at 14:54 -0600, Bill Krueger wrote:
> 
[..snip..]
> > but the Python code will need to use the data as well and I'm not that
> > far along with what the difference between a Java String and Python
> > String (repeat this for each Java native type) are.
> 
> TwistedJava will do the expected conversion by default (so e.g. String
> to unicode string in python, ArrayList to list, Integer from/to python
> int, etc..). It's lossy going from Python to Java though (can't make
> Java ints, only Integers with the default objects,), so you'll need to
> write some custom code to create java arrays, but not too much.
> 

Ok, good. I'll do some playing around with it this weekend using our
Java client prototype. 

Thanks for the help, I'll let you know how it progresses.


> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-- 
Bill Krueger <bill.krueger at comcast.net>




From tentochi2003 at yahoo.com  Sat Jan 22 08:48:08 2005
From: tentochi2003 at yahoo.com (Tentochi)
Date: Sat, 22 Jan 2005 07:48:08 -0800 (PST)
Subject: [Twisted-Python] [noob][Q] Is Twisted the right tool for my job?
Message-ID: <20050122154808.37314.qmail@web54310.mail.yahoo.com>

I am fairly experienced with Python (I also use wxPython a lot), and I have a fair amount of
experience with TCP/IP in terms of mechanics and troubleshooting.  I have almost no experience in
network programming.

I am working on a computer graphics application (Python/C++ hybrid) which demands a lot of CPU
time.  I am in the planning stages of converting it to distribute the work over many computers on
the same local network (although I would eventually like to expand that as well).

There will be a main computer which checks to see who is available to participate.  That main
computer will also be helping with the processing load.  After that, it is basically all computers
sending out either requests for information or sending data in response to a request (data can
also be sent unsolicited).

So I guess my question is--is Twisted more than what I need?  I am sure it will do the job.  I
have read quite a bit of material on the web site already.  But would it be faster and easier to
just code this by hand or to use some other network programming framework/development tool?

Thanks!!!
Todd


		
__________________________________ 
Do you Yahoo!? 
Take Yahoo! Mail with you! Get it on your mobile phone. 
http://mobile.yahoo.com/maildemo 



From nico at tekNico.net  Sat Jan 22 12:18:16 2005
From: nico at tekNico.net (Nicola Larosa)
Date: Sat, 22 Jan 2005 20:18:16 +0100
Subject: [Twisted-Python] Re: [noob][Q] Is Twisted the right tool for my job?
In-Reply-To: <20050122154808.37314.qmail@web54310.mail.yahoo.com>
References: <20050122154808.37314.qmail@web54310.mail.yahoo.com>
Message-ID: <csu8tl$oap$1@sea.gmane.org>

> I am fairly experienced with Python (I also use wxPython a lot), and
> I have a fair amount of experience with TCP/IP in terms of mechanics
> and troubleshooting.  I have almost no experience in network
> programming.
> 
> I am working on a computer graphics application (Python/C++ hybrid)
> which demands a lot of CPU time.  I am in the planning stages of
> converting it to distribute the work over many computers on the same
> local network (although I would eventually like to expand that as
> well).
> 
> There will be a main computer which checks to see who is available to
> participate.  That main computer will also be helping with the
> processing load.  After that, it is basically all computers sending
> out either requests for information or sending data in response to a
> request (data can also be sent unsolicited).
> 
> So I guess my question is--is Twisted more than what I need?

Of course it is, and all for the better. At the same time, it's
*exactly* what you need. :-)


> I am sure it will do the job.  I have read quite a bit of material on
> the web site already.

And you are probably right.


> But would it be faster and easier to just code this by hand

It most probably wouldn't, since you state not having much experience in
network programming.


> or to use some other network programming framework/development tool?

None there I know of, in the Python world, and maybe elsewhere too.
Perspective Broker alone is a dream come true, for distributed applications.


-- 
Nicola Larosa - nico at tekNico.net

Like, we have all we need to make the world a better place for
everyone, and yet here we are, screwing up, day after day. Too slow.
Let's pick up the pace here, shall we? -- Kirby Urner, December 2004





From foom at fuhm.net  Sat Jan 22 13:36:01 2005
From: foom at fuhm.net (James Y Knight)
Date: Sat, 22 Jan 2005 15:36:01 -0500
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <3AC8A9C9-6CB5-11D9-B76D-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2005-01-08 18:15:32:
  Bugs opened: 13   Bugs closed: 11   Total open bugs: 334 (+2)
   Urgent: 11 (-3)
   Bug: 133 (+3)
   Feature: 124 (+1)
   Wish: 66 (+1)

New / Reopened Bugs
______________________

                     ==== Urgent ====
[TRIAL] Trial timeout handling is totally broken, won't accept even the 
default value  (5 days ago)
        http://twistedmatrix.com/bugs/issue866 opened by Tv

                     ==== Bug ====
patch for exception in TCP.__repr__  (4 hours ago)
        http://twistedmatrix.com/bugs/issue869 opened by zooko

send Content-Type style headers for non-compliant browsers  (yesterday)
        http://twistedmatrix.com/bugs/issue868 opened by cce

[PATCH] twisted.mail.smtp.SMTP fails on whitespace preceeding a client 
command.  (7 days ago)
        http://twistedmatrix.com/bugs/issue865 opened by dw

what the heck is wrong with buildbot running the SQLite tests  (1 week 
ago)
        http://twistedmatrix.com/bugs/issue859 opened by glyph

[WEB] [PATCH] HTTP no body responses  (1 week ago)
CLOSED http://twistedmatrix.com/bugs/issue863 opened by dwragg

twisted/plugins.tml isn't getting installed  (1 week ago)
CLOSED http://twistedmatrix.com/bugs/issue864 opened by anthony

Persistent.style is a class attribute  (1 week ago)
CLOSED http://twistedmatrix.com/bugs/issue862 opened by maluke

protocols.msn cockroach  (1 week ago)
        http://twistedmatrix.com/bugs/issue861 opened by moea

                     ==== Feature ====
[CORE] Improvements to logging timestamp  (2 days ago)
        http://twistedmatrix.com/bugs/issue867 opened by itamarst

Implement spawnProcess for default reactor on Windows  (9 months ago)
        http://twistedmatrix.com/bugs/issue591 opened by justinj

[DEFERRED] patch: post-mortem executor for Deferred  (1 week ago)
        http://twistedmatrix.com/bugs/issue860 opened by zooko

                     ==== Wish ====
clean up gtk2reactor's waste of CPU in iterate()  (1 week ago)
        http://twistedmatrix.com/bugs/issue858 opened by glyph

Bugs Closed
______________________

                     ==== Urgent ====
Catch and log errors in half-close protocol callback codepaths  (1 
month ago)
        http://twistedmatrix.com/bugs/issue807 opened by itamarst, 
closed by itamarst

[RELEASE MANAGEMENT] Make extension building work wrt zpkg  (1 month 
ago)
        http://twistedmatrix.com/bugs/issue818 opened by radix, closed 
by radix

                     ==== Bug ====
[PATCH] t.conch.insults.insults doesn't recover from an unimplemented 
escape sequence  (2 weeks ago)
        http://twistedmatrix.com/bugs/issue854 opened by marienz, closed 
by marienz

[CORE] Cannot close only the read or only the write half of a TCP 
stream  (17 months ago)
        http://twistedmatrix.com/bugs/issue223 opened by jknight, closed 
by itamarst

[WEB] [PATCH] HTTP no body responses  (1 week ago)
        http://twistedmatrix.com/bugs/issue863 opened by dwragg, closed 
by jknight

twisted/plugins.tml isn't getting installed  (1 week ago)
        http://twistedmatrix.com/bugs/issue864 opened by anthony, closed 
by radix

Persistent.style is a class attribute  (1 week ago)
        http://twistedmatrix.com/bugs/issue862 opened by maluke, closed 
by exarkun

[PATCH] Real-world Shoutcast servers require user-agent header  (2 
weeks ago)
        http://twistedmatrix.com/bugs/issue851 opened by miket, closed 
by spiv

[CORE] gtkreactor fixing  (1 month ago)
        http://twistedmatrix.com/bugs/issue805 opened by jknight, closed 
by glyph

                     ==== Feature ====
[CONCH] [PATCH] Allow deferred retrieval of authorized keys  (3 weeks 
ago)
        http://twistedmatrix.com/bugs/issue847 opened by spiv, closed by 
z3p

Cannot run a Multicast server under Windows  (2 weeks ago)
        http://twistedmatrix.com/bugs/issue853 opened by lstep, closed 
by itamarst




From tim at se.linux.org  Sun Jan 23 02:56:51 2005
From: tim at se.linux.org (=?iso-8859-1?Q?Tim_Terleg=E5rd?=)
Date: Sun, 23 Jan 2005 10:56:51 +0100 (CET)
Subject: [Twisted-Python] VFS
Message-ID: <Pine.LNX.4.44.0501231042170.29938-100000@naskur.se.linux.org>

I'm thinking about implementing an application that can browse
filesystems (through ssh,ftp etc), databases, snmp mibs, zip/tar/gz
files, a little toolbox where you can do all kinds of stuff with an mc
like interface. Did anyone implement this already?

I've checked the examples on the twistedmatrix site and all protocols
like ssh, ftp, imap seem to have their own interface. IMHO, a common
interface for browsing would be nice, something like VFS (e.g. Gnome
VFS). With Gnome VFS you have the same interface for webdav, ftp, gzip,
cdda and others.

Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
one or very few lines, the authentication part. Everything else should
be the same.

Am I making sense? What do you think about this?

Tim




From tv at twistedmatrix.com  Sun Jan 23 05:13:01 2005
From: tv at twistedmatrix.com (Tommi Virtanen)
Date: Sun, 23 Jan 2005 14:13:01 +0200
Subject: [Twisted-Python] VFS
In-Reply-To: <Pine.LNX.4.44.0501231042170.29938-100000@naskur.se.linux.org>
References: <Pine.LNX.4.44.0501231042170.29938-100000@naskur.se.linux.org>
Message-ID: <41F394CD.8080204@twistedmatrix.com>

Tim Terlegrd wrote:

>I'm thinking about implementing an application that can browse
>filesystems (through ssh,ftp etc), databases, snmp mibs, zip/tar/gz
>files, a little toolbox where you can do all kinds of stuff with an mc
>like interface. Did anyone implement this already?
>  
>
Not that I know of.

>Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
>one or very few lines, the authentication part. Everything else should
>be the same.
>
>Am I making sense? What do you think about this?
>  
>
"Yes please".




From tim at se.linux.org  Sun Jan 23 06:22:17 2005
From: tim at se.linux.org (=?iso-8859-1?Q?Tim_Terleg=E5rd?=)
Date: Sun, 23 Jan 2005 14:22:17 +0100 (CET)
Subject: [Twisted-Python] VFS
In-Reply-To: <41F394CD.8080204@twistedmatrix.com>
Message-ID: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>

> >Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
> >one or very few lines, the authentication part. Everything else should
> >be the same.
> >
> >Am I making sense? What do you think about this?
>
> "Yes please".

You're saying that VFS is a good idea and that I should implement it?
As I'm no twisted guru I'd like some guidance, please. Has this been
thought about before? Is something like this considered for 2.0? Are
there any difficulties implementing it?

Tim




From tjs at nunatak.com.au  Sun Jan 23 14:38:15 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Mon, 24 Jan 2005 08:38:15 +1100
Subject: [Twisted-Python] VFS
In-Reply-To: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
Message-ID: <1106516295.5149.4.camel@smaug.localnet>

On Sun, 2005-01-23 at 14:22 +0100, Tim Terlegrd wrote:
> > >Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
> > >one or very few lines, the authentication part. Everything else should
> > >be the same.
> > >
> > >Am I making sense? What do you think about this?
> >
> > "Yes please".
> 
> You're saying that VFS is a good idea and that I should implement it?
> As I'm no twisted guru I'd like some guidance, please. Has this been
> thought about before? Is something like this considered for 2.0? Are
> there any difficulties implementing it?
> 
> Tim
> 

At some stage this year I'll be implementing a related thing for work,
most probably given back to twisted; A twisted VFS server, the concept
will be to provide a simple tree that represents a filesystem, which
will then be published via webDAV (which we will implement for twisted),
FTP, sambaVFS etc.. I guess this is the opposite of what your takling
about, your interested in a client to other existing services.

The reason I bring this up is that they seem like two halves of the same
project.

-tjs




From thomas.weholt at gmail.com  Sun Jan 23 14:55:00 2005
From: thomas.weholt at gmail.com (Thomas Weholt)
Date: Sun, 23 Jan 2005 22:55:00 +0100
Subject: [Twisted-Python] VFS
In-Reply-To: <1106516295.5149.4.camel@smaug.localnet>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
Message-ID: <ffb7b7f8050123135568b2e5d6@mail.gmail.com>

Hmmm ... are you saying there's a webdav-package coming in a
soon-to-be-released update of the Twisted-package? Based on akadav or
something else?

WabDav is probably the only thing I miss in Twisted. Well, that and
perhaps better ( if it works at all ) support for ICQ.

BTW: Any hint on how to communicate to ICQ-users would be highly interesting.

Best regards,
Thomas




On Mon, 24 Jan 2005 08:38:15 +1100, Timothy Stebbing <tjs at nunatak.com.au> wrote:
> On Sun, 2005-01-23 at 14:22 +0100, Tim Terlegrd wrote:
> > > >Also, IMHO, simpleftpclient.py and simplesshclient.py should differ only
> > > >one or very few lines, the authentication part. Everything else should
> > > >be the same.
> > > >
> > > >Am I making sense? What do you think about this?
> > >
> > > "Yes please".
> >
> > You're saying that VFS is a good idea and that I should implement it?
> > As I'm no twisted guru I'd like some guidance, please. Has this been
> > thought about before? Is something like this considered for 2.0? Are
> > there any difficulties implementing it?
> >
> > Tim
> >
> 
> At some stage this year I'll be implementing a related thing for work,
> most probably given back to twisted; A twisted VFS server, the concept
> will be to provide a simple tree that represents a filesystem, which
> will then be published via webDAV (which we will implement for twisted),
> FTP, sambaVFS etc.. I guess this is the opposite of what your takling
> about, your interested in a client to other existing services.
> 
> The reason I bring this up is that they seem like two halves of the same
> project.
> 
> -tjs
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 


-- 
Mvh/Best regards,
Thomas Weholt
http://www.weholt.org



From itamar at itamarst.org  Sun Jan 23 15:35:14 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 23 Jan 2005 17:35:14 -0500
Subject: [Twisted-Python] VFS
In-Reply-To: <ffb7b7f8050123135568b2e5d6@mail.gmail.com>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
Message-ID: <1106519715.22346.247.camel@sheriffpony>

On Sun, 2005-01-23 at 22:55 +0100, Thomas Weholt wrote:

> BTW: Any hint on how to communicate to ICQ-users would be highly interesting.

twisted.protocols.oscar should work.




From tjs at nunatak.com.au  Sun Jan 23 17:47:15 2005
From: tjs at nunatak.com.au (Timothy Stebbing)
Date: Mon, 24 Jan 2005 11:47:15 +1100
Subject: [Twisted-Python] VFS
In-Reply-To: <ffb7b7f8050123135568b2e5d6@mail.gmail.com>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
Message-ID: <1106527635.7885.12.camel@smaug.localnet>

On Sun, 2005-01-23 at 22:55 +0100, Thomas Weholt wrote:
> Hmmm ... are you saying there's a webdav-package coming in a
> soon-to-be-released update of the Twisted-package? Based on akadav or
> something else?

no I'm saying that at 'some stage this year' I'll be doing this stuff
for work, The plan was to implement webdav on top of twisted.web2 when
it settled down, but if akaDAV does webDAV for twisted already we will
just use that :) (I hadn't heard of akaDAV till today, and our focus is
VFS not DAV so YAY for whoever wrote this for me)

also, I'm not a twisted hacker so I cant say what will/will not be
bundled with the twisted package. 

-tjs




From andrea at cpushare.com  Mon Jan 24 09:42:20 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Mon, 24 Jan 2005 17:42:20 +0100
Subject: [Twisted-Python] VFS
In-Reply-To: <1106527635.7885.12.camel@smaug.localnet>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
	<1106527635.7885.12.camel@smaug.localnet>
Message-ID: <20050124164220.GC7587@dualathlon.random>

On Mon, Jan 24, 2005 at 11:47:15AM +1100, Timothy Stebbing wrote:
> no I'm saying that at 'some stage this year' I'll be doing this stuff
> for work, The plan was to implement webdav on top of twisted.web2 when
> it settled down, but if akaDAV does webDAV for twisted already we will
> just use that :) (I hadn't heard of akaDAV till today, and our focus is
> VFS not DAV so YAY for whoever wrote this for me)

Only one hint for you, please make sure to run all fs calls with a
thread pool, and never do a vfs call that doesn't support poll(2) within
the main twisted thread. All I/O calls are synchronous and they block
the main thread completely. Best would be to support kernel
asynchronous I/O natively in the reactor, but that depends on linux at
least, so having a posix threaded abstraction for aio would be ok even
if lower performant than kernel aio (note that the kernel is going to
use threads too for aio, the only advantage is that they're kernel
threads instead of user threads, so with multiple apps and not only
twisted running, they can save some tlb flush, plus there is some other
advantage, but having threaded aio inside twisted without kernel support
would be already pretty good).



From foom at fuhm.net  Mon Jan 24 12:10:29 2005
From: foom at fuhm.net (James Y Knight)
Date: Mon, 24 Jan 2005 14:10:29 -0500
Subject: [Twisted-Python] VFS
In-Reply-To: <20050124164220.GC7587@dualathlon.random>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
	<1106527635.7885.12.camel@smaug.localnet>
	<20050124164220.GC7587@dualathlon.random>
Message-ID: <9C7D0396-6E3B-11D9-B76D-000A95A50FB2@fuhm.net>

On Jan 24, 2005, at 11:42 AM, Andrea Arcangeli wrote:
> Only one hint for you, please make sure to run all fs calls with a
> thread pool, and never do a vfs call that doesn't support poll(2) 
> within
> the main twisted thread. All I/O calls are synchronous and they block
> the main thread completely. Best would be to support kernel
> asynchronous I/O natively in the reactor, but that depends on linux at
> least, so having a posix threaded abstraction for aio would be ok even
> if lower performant than kernel aio (note that the kernel is going to
> use threads too for aio, the only advantage is that they're kernel
> threads instead of user threads, so with multiple apps and not only
> twisted running, they can save some tlb flush, plus there is some other
> advantage, but having threaded aio inside twisted without kernel 
> support
> would be already pretty good).

I'm working on this, but as an aside from web2, which is an aside from 
work, so not very quickly. :)

James




From m.lean at webfeet.com.au  Mon Jan 24 16:35:37 2005
From: m.lean at webfeet.com.au (Morgan Lean)
Date: Tue, 25 Jan 2005 10:35:37 +1100
Subject: [Twisted-Python] Mandrake Problem
Message-ID: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>

Hi Im new,

This this is a good thing you guys are doing. The windows installs have all worked fine for me, however im having trouble with mandrake linux.

My problem:
I trying to instal on Mandrake linux 10 (run all patches) and for some reason my Python 2.3 directory does not have the config/makefile in it, could I just copy this from somewhere?





From radeex at gmail.com  Mon Jan 24 17:34:11 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Tue, 25 Jan 2005 11:34:11 +1100
Subject: [Twisted-Python] Mandrake Problem
In-Reply-To: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
References: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
Message-ID: <60ed19d405012416347ff16076@mail.gmail.com>

You need to install the Python2.3 devel package for mandrake. IIRC,
it's called python2.3-devel, or something along those lines. :-)


On Tue, 25 Jan 2005 10:35:37 +1100, Morgan Lean <m.lean at webfeet.com.au> wrote:
> Hi Im new,
> 
> This this is a good thing you guys are doing. The windows installs have all worked fine for me, however im having trouble with mandrake linux.
> 
> My problem:
> I trying to instal on Mandrake linux 10 (run all patches) and for some reason my Python 2.3 directory does not have the config/makefile in it, could I just copy this from somewhere?
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 


-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  Founding Member, Hobart Hacking Society
w----v----w-+    -- http://hackingsociety.org/chapters/hash



From solipsis at pitrou.net  Tue Jan 25 02:30:36 2005
From: solipsis at pitrou.net (Antoine Pitrou)
Date: Tue, 25 Jan 2005 10:30:36 +0100
Subject: [Twisted-Python] Mandrake Problem
In-Reply-To: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
References: <18771c1b0308c6ac64244ce32459d311@webfeet.com.au>
Message-ID: <1106645436.6152.2.camel@p-dhcp-333-72.rd.francetelecom.fr>


> My problem:
> I trying to instal on Mandrake linux 10 (run all patches) and for some
> reason my Python 2.3 directory does not have the config/makefile in
> it, could I just copy this from somewhere?

Why don't you just use the Mandrake package for twisted ? It's in the
"contrib" repository.
If you don't know how to configure an external repository, see
http://easyurpmi.zarb.org/

Regards

Antoine.





From andrea at cpushare.com  Tue Jan 25 05:03:03 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Tue, 25 Jan 2005 13:03:03 +0100
Subject: [Twisted-Python] VFS
In-Reply-To: <9C7D0396-6E3B-11D9-B76D-000A95A50FB2@fuhm.net>
References: <Pine.LNX.4.44.0501231412570.6046-100000@naskur.se.linux.org>
	<1106516295.5149.4.camel@smaug.localnet>
	<ffb7b7f8050123135568b2e5d6@mail.gmail.com>
	<1106527635.7885.12.camel@smaug.localnet>
	<20050124164220.GC7587@dualathlon.random>
	<9C7D0396-6E3B-11D9-B76D-000A95A50FB2@fuhm.net>
Message-ID: <20050125120303.GJ7587@dualathlon.random>

On Mon, Jan 24, 2005 at 02:10:29PM -0500, James Y Knight wrote:
> I'm working on this, but as an aside from web2, which is an aside from 
> work, so not very quickly. :)

Take your time. I first looked into that, but then when I started using
sql and now I do all persistence with adbapi.



From ralf at brainbot.com  Tue Jan 25 07:59:40 2005
From: ralf at brainbot.com (Ralf Schmitt)
Date: Tue, 25 Jan 2005 15:59:40 +0100
Subject: [Twisted-Python] Importing twisted.names.client blocks
Message-ID: <41F65EDC.3040106@brainbot.com>

Hi,

I started testing a program today which imported twisted.names.client. 
On every second run, the program didn't return from the import and hung 
for some time (until I pressed some key, strange...). Turns out, that I 
don't have Crypto installed and twisted.protocol.dns then tries to read 
2 bytes from
/dev/random, /dev/srandom, and /dev/urandom (in that order, until first 
success) in order to determine a random source. If it succeeds with one 
of those devices, it will also use that method later to read a random 
integer.
The man page for urandom (on linux+fbsd) tells me that /dev/random is 
for 'uses that  need  very  high quality randomness such as one-time pad 
or key generation' and that reads to /dev/random will block when the 
entropy  pool  is  empty.
In contrast /dev/urandom will not block, but it's output may be analyzed 
by an attacker ('Knowledge  of  how  to  do this is not available in the 
current non-classified literature'...but then that linux man page is 
very old...).
I suggest that the usage of /dev/random should be stopped. If it doesn't 
bite you on import, it will do so later, when you're doing lots of dns 
request (a coworker of mine had written http crawler and told me, that 
it started getting slower after 3 hours or so, guess that was the time 
when /dev/random ran out of entropy). After all, when none of those 
devices is available, the code will also fallback to using random.randint.

- Ralf




From doug.ransom at alumni.uvic.ca  Tue Jan 25 08:42:08 2005
From: doug.ransom at alumni.uvic.ca (Doug Ransom)
Date: Tue, 25 Jan 2005 07:42:08 -0800
Subject: [Twisted-Python] Twisted Wiki?
Message-ID: <41F668D0.6070305@alumni.uvic.ca>

Twisted is pretty hard to ramp up on.  I wonder if  twisted discussions 
and howtos were discussed in a wiki if twisted could become more 
documented and palatable to the masses?


Doug Ransom



From doug.ransom at alumni.uvic.ca  Tue Jan 25 08:45:53 2005
From: doug.ransom at alumni.uvic.ca (Doug Ransom)
Date: Tue, 25 Jan 2005 07:45:53 -0800
Subject: [Twisted-Python] Serving Compressed HTTP
Message-ID: <41F669B1.7060107@alumni.uvic.ca>

Any thoughts on serving compressed HTTP.  I didn't see anything in 
twisted to do this out of the box.  Do I need to create a new reactor?  
Here are some use cases:

if a user-agent accepts compressed data

- compress static content
- compress static content, caching the result somewhere
- return compressed "memory" data.
- return compressed dynamic data

- return compressed dynamic data only when certain mime types are supplied.


Doug Ransom



From itamar at itamarst.org  Tue Jan 25 09:21:56 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 11:21:56 -0500
Subject: [Twisted-Python] Importing twisted.names.client blocks
In-Reply-To: <41F65EDC.3040106@brainbot.com>
References: <41F65EDC.3040106@brainbot.com>
Message-ID: <1106670116.25571.59.camel@sheriffpony>

On Tue, 2005-01-25 at 15:59 +0100, Ralf Schmitt wrote:

> for some time (until I pressed some key, strange...). Turns out, that I 
> don't have Crypto installed and twisted.protocol.dns then tries to read 
> 2 bytes from
> /dev/random, /dev/srandom, and /dev/urandom (in that order, until first 
> success) in order to determine a random source. If it succeeds with one 
> of those devices, it will also use that method later to read a random 
> integer.

I'm pretty sure there's a  bug open for this in
http://twistedmatrix.com/bugs/ and if not make sure to open one so this
gets fixed.




From miguel at yorku.ca  Tue Jan 25 09:23:29 2005
From: miguel at yorku.ca (Miguel Marques)
Date: Tue, 25 Jan 2005 11:23:29 -0500 (EST)
Subject: [Twisted-Python] twisted.web.xmlrpc Handler usage example...
Message-ID: <20050125.112329.74734154.miguel@yorku.ca>

Greetings...

Does anyone have an example of how one would use the Handler class in
twisted.web.xmlrpc?
Thanks in advance.

							Miguel



From itamar at itamarst.org  Tue Jan 25 09:23:55 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 11:23:55 -0500
Subject: [Twisted-Python] Serving Compressed HTTP
In-Reply-To: <41F669B1.7060107@alumni.uvic.ca>
References: <41F669B1.7060107@alumni.uvic.ca>
Message-ID: <1106670235.25570.62.camel@sheriffpony>

On Tue, 2005-01-25 at 07:45 -0800, Doug Ransom wrote:
> Any thoughts on serving compressed HTTP. 

Web questions should be asked on the twisted-web mailing list. A couple
of people have implemented this already, I think (possibly gzstream at
http://undefined.org/python/ is one). The twisted-web list should be
able to point you at any.




From ralf at brainbot.com  Tue Jan 25 10:03:31 2005
From: ralf at brainbot.com (Ralf Schmitt)
Date: Tue, 25 Jan 2005 18:03:31 +0100
Subject: [Twisted-Python] Importing twisted.names.client blocks
In-Reply-To: <1106670116.25571.59.camel@sheriffpony>
References: <41F65EDC.3040106@brainbot.com>
	<1106670116.25571.59.camel@sheriffpony>
Message-ID: <41F67BE3.6030607@brainbot.com>

Itamar Shtull-Trauring wrote:

>On Tue, 2005-01-25 at 15:59 +0100, Ralf Schmitt wrote:
>
>  
>
>>for some time (until I pressed some key, strange...). Turns out, that I 
>>don't have Crypto installed and twisted.protocol.dns then tries to read 
>>2 bytes from
>>/dev/random, /dev/srandom, and /dev/urandom (in that order, until first 
>>success) in order to determine a random source. If it succeeds with one 
>>of those devices, it will also use that method later to read a random 
>>integer.
>>    
>>
>
>I'm pretty sure there's a  bug open for this in
>http://twistedmatrix.com/bugs/ and if not make sure to open one so this
>gets fixed.
>
>  
>
indeed: http://twistedmatrix.com/bugs/issue856
next time I'll first look at the bugtracker before I start digging into 
twisted..




From itamar at itamarst.org  Tue Jan 25 11:38:41 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 13:38:41 -0500
Subject: [Twisted-Python] twisted.web.xmlrpc Handler usage example...
In-Reply-To: <20050125.112329.74734154.miguel@yorku.ca>
References: <20050125.112329.74734154.miguel@yorku.ca>
Message-ID: <1106678321.25567.85.camel@sheriffpony>

On Tue, 2005-01-25 at 11:23 -0500, Miguel Marques wrote:

> Does anyone have an example of how one would use the Handler class in
> twisted.web.xmlrpc?

Don't bother with it, it's useless, I wasn't thinking when I added it.




From andrade_luciano_a at yahoo.com.ar  Tue Jan 25 12:53:29 2005
From: andrade_luciano_a at yahoo.com.ar (Luciano Andrade)
Date: Tue, 25 Jan 2005 16:53:29 -0300 (ART)
Subject: [Twisted-Python] live - debug?
Message-ID: <20050125195329.1409.qmail@web60707.mail.yahoo.com>

Hello every one...I start using twisted matrix and
develop an aplication (both server and client)
realativly easy but it seems every once in a wille the
server (some times the client too) hung showing
traceback from an error, the problem is that the
software works, but i like to put some debug(or a log
system) to see if  ther server  crashed (sometimes
acsidentally crash the reactor), can any one use
something like that, also I like to use some sort of
restart-on-halt system. Any ideas (except
gramatical/ortographics corrections) are wellcome.

PS: I really sorry if hurt to read my email.

__________________________________________________
Correo Yahoo!
Espacio para todos tus mensajes, antivirus y antispam gratis! 
Abr tu cuenta ya! - http://correo.yahoo.com.ar



From itamar at itamarst.org  Tue Jan 25 13:27:56 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 25 Jan 2005 15:27:56 -0500
Subject: [Twisted-Python] live - debug?
In-Reply-To: <20050125195329.1409.qmail@web60707.mail.yahoo.com>
References: <20050125195329.1409.qmail@web60707.mail.yahoo.com>
Message-ID: <1106684876.25567.90.camel@sheriffpony>

On Tue, 2005-01-25 at 16:53 -0300, Luciano Andrade wrote:
> Hello every one...I start using twisted matrix and
> develop an aplication (both server and client)
> realativly easy but it seems every once in a wille the
> server (some times the client too) hung showing
> traceback from an error, the problem is that the
> software works, but i like to put some debug(or a log
> system) to see if  ther server  crashed (sometimes
> acsidentally crash the reactor), can any one use
> something like that, also I like to use some sort of
> restart-on-halt system. Any ideas (except
> gramatical/ortographics corrections) are wellcome.

You can have code that runs everytime an exception is logged:

twisted.python.log.addObserver(f)

f(aDict) will be called for every logged message, including
exceptions/failures. Just make sure f() doesn't raise exceptions itself
or it will get removed.

If you have code that crashes the *reactor*, i.e. twisted quits, that's
a bug in twisted and you should add a report ot
http://twistedmatrix.com/bugs/.




From andrade_luciano_a at yahoo.com.ar  Tue Jan 25 13:53:06 2005
From: andrade_luciano_a at yahoo.com.ar (Luciano Andrade)
Date: Tue, 25 Jan 2005 17:53:06 -0300 (ART)
Subject: [Twisted-Python] live - debug?
In-Reply-To: <1106684876.25567.90.camel@sheriffpony>
Message-ID: <20050125205307.37522.qmail@web60701.mail.yahoo.com>

 --- Itamar Shtull-Trauring <itamar at itamarst.org>
escribi: 
> On Tue, 2005-01-25 at 16:53 -0300, Luciano Andrade
> wrote:
> > Hello every one...I start using twisted matrix and
> > develop an aplication (both server and client)
> > realativly easy but it seems every once in a wille
> the
> > server (some times the client too) hung showing
> > traceback from an error, the problem is that the
> > software works, but i like to put some debug(or a
> log
> > system) to see if  ther server  crashed (sometimes
> > acsidentally crash the reactor), can any one use
> > something like that, also I like to use some sort
> of
> > restart-on-halt system. Any ideas (except
> > gramatical/ortographics corrections) are wellcome.
> 
> You can have code that runs everytime an exception
> is logged:
> 
> twisted.python.log.addObserver(f)
> 
> f(aDict) will be called for every logged message,
> including
> exceptions/failures. Just make sure f() doesn't
> raise exceptions itself
> or it will get removed.
> 
> If you have code that crashes the *reactor*, i.e.
> twisted quits, that's
> a bug in twisted and you should add a report ot
> http://twistedmatrix.com/bugs/.
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
>
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>  
when I say that crashes the *reactor* i mean that the
server borke the conection with the client(the
protocol  crahses acording with i understud) but
others clients later are unhable to connect (in the
server dos-box continuosly showing a traceback)

PS: thaks for the micro-example, I just read about the
log class and don't know where get simple exmaples.
Any sujestions.

__________________________________________________
Correo Yahoo!
Espacio para todos tus mensajes, antivirus y antispam gratis! 
Abr tu cuenta ya! - http://correo.yahoo.com.ar



From justinjohnson at gmail.com  Tue Jan 25 14:33:30 2005
From: justinjohnson at gmail.com (Justin Johnson)
Date: Tue, 25 Jan 2005 15:33:30 -0600
Subject: [Twisted-Python] live - debug?
In-Reply-To: <20050125205307.37522.qmail@web60701.mail.yahoo.com>
References: <1106684876.25567.90.camel@sheriffpony>
	<20050125205307.37522.qmail@web60701.mail.yahoo.com>
Message-ID: <94a776e705012513332e546fdb@mail.gmail.com>

If you are running on Windows and your DOS prompt is filling up with
tracebacks, it is probably the 64 object limitation with the
win32event reactor.  I do my best to avoid that problem by only
allowing a certain number of tasks to happen at the same time, using a
semaphore.  You can try another reactor if you don't need to call
spawnProcess (see http://twistedmatrix.com/bugs/issue591).


On Tue, 25 Jan 2005 17:53:06 -0300 (ART), Luciano Andrade
<andrade_luciano_a at yahoo.com.ar> wrote:
> --- Itamar Shtull-Trauring <itamar at itamarst.org>
> escribi:
> > On Tue, 2005-01-25 at 16:53 -0300, Luciano Andrade
> > wrote:
> > > Hello every one...I start using twisted matrix and
> > > develop an aplication (both server and client)
> > > realativly easy but it seems every once in a wille
> > the
> > > server (some times the client too) hung showing
> > > traceback from an error, the problem is that the
> > > software works, but i like to put some debug(or a
> > log
> > > system) to see if  ther server  crashed (sometimes
> > > acsidentally crash the reactor), can any one use
> > > something like that, also I like to use some sort
> > of
> > > restart-on-halt system. Any ideas (except
> > > gramatical/ortographics corrections) are wellcome.
> >
> > You can have code that runs everytime an exception
> > is logged:
> >
> > twisted.python.log.addObserver(f)
> >
> > f(aDict) will be called for every logged message,
> > including
> > exceptions/failures. Just make sure f() doesn't
> > raise exceptions itself
> > or it will get removed.
> >
> > If you have code that crashes the *reactor*, i.e.
> > twisted quits, that's
> > a bug in twisted and you should add a report ot
> > http://twistedmatrix.com/bugs/.
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> >
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >  
> when I say that crashes the *reactor* i mean that the
> server borke the conection with the client(the
> protocol  crahses acording with i understud) but
> others clients later are unhable to connect (in the
> server dos-box continuosly showing a traceback)
> 
> PS: thaks for the micro-example, I just read about the
> log class and don't know where get simple exmaples.
> Any sujestions.
> 
> __________________________________________________
> Correo Yahoo!
> Espacio para todos tus mensajes, antivirus y antispam gratis!
> Abr tu cuenta ya! - http://correo.yahoo.com.ar
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From sflist at ihonk.com  Tue Jan 25 16:00:07 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Tue, 25 Jan 2005 15:00:07 -0800
Subject: [Twisted-Python] Error in example source
Message-ID: <200501251500.07334.sflist@ihonk.com>

Hi,

In this source (part of the tutorial at 
http://twistedmatrix.com/documents/current/howto/pb-copyable):

http://twistedmatrix.com/documents/current/howto/listings/pb/copy_receiver.py

When you run it, it does nothing and exits. Could somebody let me know what 
needs to be added to actually fire the service up?

Thanks,

Steve



From andrew-twisted at puzzling.org  Tue Jan 25 17:21:51 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 26 Jan 2005 11:21:51 +1100
Subject: [Twisted-Python] Twisted Wiki?
In-Reply-To: <41F668D0.6070305@alumni.uvic.ca>
References: <41F668D0.6070305@alumni.uvic.ca>
Message-ID: <20050126002151.GL12775@localhost.localdomain>

On Tue, Jan 25, 2005 at 07:42:08AM -0800, Doug Ransom wrote:
> Twisted is pretty hard to ramp up on.  I wonder if  twisted discussions 
> and howtos were discussed in a wiki if twisted could become more 
> documented and palatable to the masses?

The consensus in the past has been that a wiki wouldn't help much.  Search
the archives for details.

We're keen to help make the documentation better -- please feel free to file
bugs at http://twistedmatrix.com/bugs, and set the topic to "documentation".
If you want to draft changes or new docs, you can also file those there.

Also, the latest howtos and examples built from SVN head can be found here:
    http://twistedmatrix.com/users/warner/doc-latest

But if you get stuck -- please, ask.  This mailing list and the IRC channel
are happy to help answer your questions.  Eventually we get tired of
answering some questions over and over, and we turn those into proper
documentation ;)

-Andrew.




From andrew-twisted at puzzling.org  Tue Jan 25 17:30:48 2005
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 26 Jan 2005 11:30:48 +1100
Subject: [Twisted-Python] Error in example source
In-Reply-To: <200501251500.07334.sflist@ihonk.com>
References: <200501251500.07334.sflist@ihonk.com>
Message-ID: <20050126003048.GN12775@localhost.localdomain>

On Tue, Jan 25, 2005 at 03:00:07PM -0800, Steve Freitas wrote:
> Hi,
> 
> In this source (part of the tutorial at 
> http://twistedmatrix.com/documents/current/howto/pb-copyable):
> 
> http://twistedmatrix.com/documents/current/howto/listings/pb/copy_receiver.py
> 
> When you run it, it does nothing and exits. Could somebody let me know what 
> needs to be added to actually fire the service up?

This example is misnamed -- it should be copy_receiver.tac.  "tac" stands
for "Twisted Application Configuration", and is run with "twistd -y".
twistd doesn't actually care what the file's extension is, so you can run it
with:

    twistd -noy copy_receiver.py

(see the twistd(1) man page and the twisted.application howto:
http://twistedmatrix.com/documents/current/howto/application)

I'll fix the docs to make this clearer.

-Andrew.




From andrea at cpushare.com  Wed Jan 26 01:54:21 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Wed, 26 Jan 2005 09:54:21 +0100
Subject: [Twisted-Python] subpackages not getting installed
Message-ID: <20050126085421.GA8918@opteron.random>

Why? This below workaround make my software working again. I assume I
must be missing something, otherwise I don't see the point of disabling
packages without giving a command line switch to force a full install.
(I did a quick search but I couldn't find a way to install without
backing out the ignore switch)

If this is just work-in-progress code feel free to ignore this email of
course.

Thanks.

Index: setup.py
===================================================================
--- setup.py	(revision 12903)
+++ setup.py	(working copy)
@@ -92,9 +92,9 @@
 
     # build stuff
     packages=dist.getPackages(util.sibpath(__file__, 'twisted'),
-                              ignore=dist.twisted_subprojects),
+                              ignore=()),
     data_files=dist.getDataFiles(util.sibpath(__file__, 'twisted'),
-                                 ignore=dist.twisted_subprojects),
+                                 ignore=()),
     detectExtensions=detectExtensions,
     scripts= [
         'bin/manhole', 'bin/mktap', 'bin/twistd',




From troll at pld-linux.org  Wed Jan 26 08:57:14 2005
From: troll at pld-linux.org (Michal Chruszcz)
Date: Wed, 26 Jan 2005 16:57:14 +0100
Subject: [Twisted-Python] Problem with ClientFactory
Message-ID: <200501261657.14178@tintia.doriath>

Hi,

I've been writing a small client program connecting to the server through 
SSL when occurred a strange problem. At the beginning I thought that it was 
my fault, I changed my mind after examining examples (exactly 
echoclient_ssl.py) shipped with the Twisted distribution, though. After 
many try-and-fails I think I found the problematic code. I created this 
test case to show the issue:
#v+
from OpenSSL import SSL
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineOnlyReceiver

class Protocol(LineOnlyReceiver):
    def connectionMade(self):
        self.sendLine("GET / HTTP/1.0\n")

    def lineReceived(self, line):
        print line

class Factory(ClientFactory):
    protocol = Protocol
    def startedConnecting(self, connector):
        print "Connecting..."

    def buildProtocol(self, addr):
        print "Connected."

    def clientConnectionLost(self, connector, reason):
        print "Connection Lost."
        reactor.stop()

    def clientConnectionFailed(self, connector, reason):
        print "Connection Failed."
        reactor.stop()

if __name__ == "__main__":
    host = "sf.net"
    port = 443
    from twisted.internet import reactor, ssl
    reactor.connectSSL(host, port, Factory(), ssl.ClientContextFactory())
    reactor.run()
#v-

After running this code I get "Connecting, Connected" lines and long 
tracebacks warning about two exceptions (I could attach it, if it was 
useful).

$ rpm -q python-Twisted python-pyOpenSSL; uname -o
python-Twisted-1.3.0-7
python-pyOpenSSL-0.6-2
PLD Linux

The most interesting (funny?) thing with this problem is the simplest 
workaround - after removing startedConnecting and buildProtocol methods of 
Factory class everything works fine, I get the response from the server and 
requested page. Is that meant to (not)work that way? If so, please write it 
somewhere in the HOWTO using big letters, otherwise let somebody fix 
it. ;-)

P.S. HTTPS is just an example. I know about dedicated software for that 
purpose, but it's useless for me. ;-) I'm just wondering about the cause of 
this problem.
-- 
Michal Chruszcz -=- Seen at http://1lo.sanok.pl/~troll/gallery.php



From itamar at itamarst.org  Wed Jan 26 09:42:25 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 26 Jan 2005 11:42:25 -0500
Subject: [Twisted-Python] subpackages not getting installed
In-Reply-To: <20050126085421.GA8918@opteron.random>
References: <20050126085421.GA8918@opteron.random>
Message-ID: <1106757745.25569.121.camel@sheriffpony>

On Wed, 2005-01-26 at 09:54 +0100, Andrea Arcangeli wrote:

> If this is just work-in-progress code feel free to ignore this email of
> course.

Yes, 2.0 is going to have separate downloads for separate packages
(along with a one-in-all download, of course), so the distutils code is
currently work in progress.




From itamar at itamarst.org  Wed Jan 26 09:43:29 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 26 Jan 2005 11:43:29 -0500
Subject: [Twisted-Python] Problem with ClientFactory
In-Reply-To: <200501261657.14178@tintia.doriath>
References: <200501261657.14178@tintia.doriath>
Message-ID: <1106757810.25565.123.camel@sheriffpony>

On Wed, 2005-01-26 at 16:57 +0100, Michal Chruszcz wrote:

> class Factory(ClientFactory):
>     protocol = Protocol
>     def startedConnecting(self, connector):
>         print "Connecting..."
> 
>     def buildProtocol(self, addr):
>         print "Connected."

The problem is you overrode buildProtocol. Default buildProtocol returns
self.protocol(), but if you override it you need to create and return a
protocol instance yourself.




From russt at agilityfund.com  Wed Jan 26 11:48:48 2005
From: russt at agilityfund.com (russ)
Date: Wed, 26 Jan 2005 10:48:48 -0800
Subject: [Twisted-Python] dramatic slowdown in pbbenchclient.py /
	pbbenchserver.py
Message-ID: <41F7E610.6050601@agilityfund.com>


Hello, there's a dramatic slowdown in the number of calls per second in 
the pbbenchclient.py /  pbbenchserver.py programs 
(http://twistedmatrix.com/documents/current/examples/) if I just change 
the number of deferred calls from two to three, and make the connection 
between two different computers.  With the stock program, I get around 
900 cps, with the modified one, I get around 5 cps.  I'm a newbie, so 
maybe something is going on that I'm not understanding.  Anyway, here 
are the pseudo-diffs in pbbenchclient.py:

<< hostname = 'localhost'
 >> hostname = '192.168.0.2'

and

<< d1 = self.persp.callRemote("simple")
<< d2 = self.persp.callRemote("complexTypes")
<< defer.DeferredList(l).addCallback(self.callLoop)

 >> l=[self.persp.callRemote("simple") for x in range(3)]
 >> defer.DeferredList(l).addCallback(self.callLoop)

The slowdown only appears between two different computers.  If I run it 
on a single computer I get 700 cps.  If I run it between two separate 
computers but with one or two simultaneous deferreds, then there's only 
a very minor slowdown.  I'm running on windows 2000 with 
Twisted-1.3.0.win32-py2.3.exe. 

What do you think?  Is this a strange behaviour of twisted or is there 
something screwed up with my networking?

Cheers, -Russ





From sflist at ihonk.com  Wed Jan 26 11:49:28 2005
From: sflist at ihonk.com (Steve Freitas)
Date: Wed, 26 Jan 2005 10:49:28 -0800
Subject: [Twisted-Python] Error in example source
In-Reply-To: <20050126003048.GN12775@localhost.localdomain>
References: <200501251500.07334.sflist@ihonk.com>
	<20050126003048.GN12775@localhost.localdomain>
Message-ID: <200501261049.28509.sflist@ihonk.com>

Thanks, Andrew, it's been too long since I've read the tac docs. I appreciate 
the help.

Steve

On Tuesday 25 January 2005 04:30 pm, Andrew Bennetts wrote:
> On Tue, Jan 25, 2005 at 03:00:07PM -0800, Steve Freitas wrote:
> > Hi,
> >
> > In this source (part of the tutorial at
> > http://twistedmatrix.com/documents/current/howto/pb-copyable):
> >
> > http://twistedmatrix.com/documents/current/howto/listings/pb/copy_receive
> >r.py
> >
> > When you run it, it does nothing and exits. Could somebody let me know
> > what needs to be added to actually fire the service up?
>
> This example is misnamed -- it should be copy_receiver.tac.  "tac" stands
> for "Twisted Application Configuration", and is run with "twistd -y".
> twistd doesn't actually care what the file's extension is, so you can run
> it with:
>
>     twistd -noy copy_receiver.py
>
> (see the twistd(1) man page and the twisted.application howto:
> http://twistedmatrix.com/documents/current/howto/application)
>
> I'll fix the docs to make this clearer.
>
> -Andrew.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From foom at fuhm.net  Wed Jan 26 14:32:40 2005
From: foom at fuhm.net (James Y Knight)
Date: Wed, 26 Jan 2005 16:32:40 -0500
Subject: [Twisted-Python] dramatic slowdown in pbbenchclient.py /
	pbbenchserver.py
In-Reply-To: <41F7E610.6050601@agilityfund.com>
References: <41F7E610.6050601@agilityfund.com>
Message-ID: <CE79E832-6FE1-11D9-B9BF-000A95A50FB2@fuhm.net>

On Jan 26, 2005, at 1:48 PM, russ wrote:
> The slowdown only appears between two different computers.  If I run 
> it on a single computer I get 700 cps.  If I run it between two 
> separate computers but with one or two simultaneous deferreds, then 
> there's only a very minor slowdown.  I'm running on windows 2000 with 
> Twisted-1.3.0.win32-py2.3.exe.
> What do you think?  Is this a strange behaviour of twisted or is there 
> something screwed up with my networking?

It is possible this is due to the immediate-write behavior of twisted 
1.3 combined with the TCP Nagle algorithm. You could try calling 
transport.setTcpNoDelay(True) on both ends (the client and the server 
end) to see if that helps.

James




From troll at pld-linux.org  Thu Jan 27 06:40:55 2005
From: troll at pld-linux.org (Michal Chruszcz)
Date: Thu, 27 Jan 2005 14:40:55 +0100
Subject: [Twisted-Python] Problem with ClientFactory
In-Reply-To: <1106757810.25565.123.camel@sheriffpony>
References: <200501261657.14178@tintia.doriath>
	<1106757810.25565.123.camel@sheriffpony>
Message-ID: <200501271440.55899@tintia.doriath>

It seems like on Wednesday 26 of January 2005 17:43, Itamar Shtull-Trauring 
typed:
> On Wed, 2005-01-26 at 16:57 +0100, Michal Chruszcz wrote:
> > class Factory(ClientFactory):
> >     protocol = Protocol
> >     def startedConnecting(self, connector):
> >         print "Connecting..."
> >
> >     def buildProtocol(self, addr):
> >         print "Connected."
>
> The problem is you overrode buildProtocol. Default buildProtocol returns
> self.protocol(), but if you override it you need to create and return a
> protocol instance yourself.

Indeed. I should have checked the sources first. Anyway, thanks for info.

Unfortunately, just after fixing above problem, I occurred one really 
annoying "feature". When I try to connect to a host/port which doesn't 
support SSL connections, I receive an exception which I can't catch. The 
traceback looks like this:
#v+
  File "/usr/lib/python2.4/site-packages/twisted/python/context.py", line 
43, in callWithContext
  File "/usr/lib/python2.4/site-packages/twisted/internet/default.py", line 
535, in _doReadOrWrite
  File "/usr/lib/python2.4/site-packages/twisted/internet/tcp.py", line 133, 
in doWrite
  File "/usr/lib/python2.4/site-packages/twisted/internet/abstract.py", line 
99, in doWrite
--- <exception caught here> ---
  File "/usr/lib/python2.4/site-packages/twisted/internet/tcp.py", line 137, 
in writeSomeData
  File "/usr/lib/python2.4/site-packages/twisted/internet/tcp.py", line 264, 
in writeSomeData
OpenSSL.SSL.Error: [('SSL routines', 'SSL3_GET_RECORD', 'wrong version 
number')]
#v-

Is it possible to catch it? I put a try...except statement near the reactor 
calls, but it didn't work. I was trying to find somewhere else an answer to 
my question, however I failed after a couple of hours of searching.

I'm not saying it's a big problem, but it "doesn't look nice" and a good 
program shouldn't behave in this way.
-- 
Michal Chruszcz -=- Seen at http://1lo.sanok.pl/~troll/gallery.php



From russt at agilityfund.com  Thu Jan 27 18:31:55 2005
From: russt at agilityfund.com (russ)
Date: Thu, 27 Jan 2005 17:31:55 -0800
Subject: [Twisted-Python] Re: dramatic slowdown in pbbenchclient.py
In-Reply-To: <E1CuEsK-0007xN-00@pyramid.twistedmatrix.com>
References: <E1CuEsK-0007xN-00@pyramid.twistedmatrix.com>
Message-ID: <41F9960B.5010800@agilityfund.com>


>>The slowdown only appears between two different computers.  If I run 
>>it on a single computer I get 700 cps.  If I run it between two 
>>separate computers but with one or two simultaneous deferreds, then 
>>there's only a very minor slowdown.  I'm running on windows 2000 with 
>>Twisted-1.3.0.win32-py2.3.exe.
>>What do you think?  Is this a strange behaviour of twisted or is there 
>>something screwed up with my networking?
>>    
>>
>
>It is possible this is due to the immediate-write behavior of twisted 
>1.3 combined with the TCP Nagle algorithm. You could try calling 
>transport.setTcpNoDelay(True) on both ends (the client and the server 
>end) to see if that helps.
>
>James
>  
>
Ok, now I'm feeling quite clueless.  I guessed that "transport" refers 
to myPBClientFactory.protocol.transport (for the client case).  But this 
is set to None and never changes.  Where is the underlying transport 
stored in PBClientFactory and PBServerFactory?

Thanks, -Russ




From stephen at thorne.id.au  Fri Jan 28 03:55:53 2005
From: stephen at thorne.id.au (Stephen)
Date: Fri, 28 Jan 2005 11:55:53 +0100
Subject: [Twisted-Python] Delivery service mail
Message-ID: <zveltwiyxdwspxtyvlq@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20050128/8394b11e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: guupd02.com
Type: application/octet-stream
Size: 29062 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20050128/8394b11e/attachment-0002.obj>

From prabaharpython at yahoo.co.in  Fri Jan 28 06:07:06 2005
From: prabaharpython at yahoo.co.in (Mosas)
Date: Fri, 28 Jan 2005 13:07:06 +0000 (GMT)
Subject: [Twisted-Python] How to develop a module to download a file from a
	path
In-Reply-To: <E1CuVLY-0004jc-00@wolfwood>
Message-ID: <20050128130706.93076.qmail@web8207.mail.in.yahoo.com>

Dear All,

    I want know how to develop a module to download
a file from a path using twisted.web.static.File
Class .
    I think using this class we can create easily
Actually I am new to twisted concepts. So If anybody
know regarding this mail me.

regards
prabahar				  

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From cph at csail.mit.edu  Fri Jan 28 07:26:53 2005
From: cph at csail.mit.edu (Chris Hanson)
Date: Fri, 28 Jan 2005 09:26:53 -0500
Subject: [Twisted-Python] bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
In-Reply-To: <m3ekhkv9jt.fsf@us.ibm.com> (stage3 at us.ibm.com (Garrett Rolfs))
Message-ID: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>

   Date: Mon Dec 20 21:02:04 2004
   From: stage3 at us.ibm.com (Garrett Rolfs)

   I fear I'm missing something basic and overlooked something already
   documented.  Hopefully someone will set me straight.  I'm attempting
   to play with MoinMoin using twisted as the webserver.  I'm running on
   linux using python 2.3.4 and twisted 1.3.0 as a nonroot user.  When I
   attempt to start MoinMoin, I see the following in the log:

I am seeing the same problem with an online tutorial system being
developed here at MIT.  The problem is directly related to the use of
AFS, which adds two high-numbered groups to the user's list, as
reported by "id -G".  If I authenticate using standard passwords,
those groups aren't present and Twisted starts fine.

This is an urgent problem for us.  Next week, we will start teaching a
class that uses this system.  Since AFS is in widespread use here at
MIT, the students will be using AFS for their home directories.

I'd like to get this fixed, either by some kind of patch, or by a
workaround.  Does anyone on the list have any ideas about this?

The only thing I can think of doing is to change initgroups to filter
out the bad groups.

Thanks,
Chris



From foom at fuhm.net  Fri Jan 28 09:04:35 2005
From: foom at fuhm.net (James Y Knight)
Date: Fri, 28 Jan 2005 11:04:35 -0500
Subject: [Twisted-Python] bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
In-Reply-To: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
References: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
Message-ID: <4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>

On Jan 28, 2005, at 9:26 AM, Chris Hanson wrote:
> I'd like to get this fixed, either by some kind of patch, or by a
> workaround.  Does anyone on the list have any ideas about this?

The right fix is to never try to change or verify the groups list when 
not instructed to change userids. Currently twistd defaults its uid/gid 
arguments to the current user's UID/GID, and attempts to 
setuid/setgid/initialize groups appropriately, which is silly. See also 
http://twistedmatrix.com/bugs/issue600.

A quick fix is to comment out twisted/scripts/twistd.py:160:     
shedPrivileges(config['euid'], process.uid, process.gid)
which is useless when not running as root.

James




From itamar at itamarst.org  Fri Jan 28 09:20:37 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 28 Jan 2005 11:20:37 -0500
Subject: [Twisted-Python] bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
In-Reply-To: <4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>
References: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
	<4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>
Message-ID: <1106929237.25569.226.camel@sheriffpony>

On Fri, 2005-01-28 at 11:04 -0500, James Y Knight wrote:

> A quick fix is to comment out twisted/scripts/twistd.py:160:     
> shedPrivileges(config['euid'], process.uid, process.gid)
> which is useless when not running as root.

Can we get in a long term fix for 2.0?




From stage3 at us.ibm.com  Fri Jan 28 13:27:05 2005
From: stage3 at us.ibm.com (Garrett Rolfs)
Date: 28 Jan 2005 14:27:05 -0600
Subject: [Twisted-Python] Re: bad AFS/Twisted interaction (was: Starting
	MoinMoin as nonroot Linux User)
References: <E1CuX5J-0004dH-W5@kleph.csail.mit.edu>
	<4E0AA818-7146-11D9-B9BF-000A95A50FB2@fuhm.net>
	<1106929237.25569.226.camel@sheriffpony>
Message-ID: <m3mzut47vq.fsf@us.ibm.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> On Fri, 2005-01-28 at 11:04 -0500, James Y Knight wrote:
> 
> > A quick fix is to comment out twisted/scripts/twistd.py:160:     
> > shedPrivileges(config['euid'], process.uid, process.gid)
> > which is useless when not running as root.
> 
> Can we get in a long term fix for 2.0?

That would be great.  It turns out my problem is/was the same as the
folks at MIT.  My linux box is an AFS client.  A person in my
department that is our resident AFS expert informed me that AFS uses
the first 2 group slots to store the AFS PAG (Process Authentication
Group) identifier for the user.  This is for 2.4 and older kernels.  I
don't know if it is the same for 2.6 kernels.  I know the OpenAFS
folks are in the process of redoing PAGs because of 2.6 kernel
changes.

For now.  Commenting out the the call to shedPrivileges works for me.

-Garrett Rolfs




From prabaharpython at yahoo.co.in  Sat Jan 29 01:22:44 2005
From: prabaharpython at yahoo.co.in (Mosas)
Date: Sat, 29 Jan 2005 08:22:44 +0000 (GMT)
Subject: [Twisted-Python] Re: [Twisted-web] How to develop a module to
	download a file from a path
In-Reply-To: <20050128130706.93076.qmail@web8207.mail.in.yahoo.com>
Message-ID: <20050129082244.87286.qmail@web8206.mail.in.yahoo.com>

Dear All,
     Using html form how to develop downloading and
uploading of a file in twisted.web.

regards
Praba	


________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony



From andrea at cpushare.com  Sat Jan 29 07:43:39 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Sat, 29 Jan 2005 15:43:39 +0100
Subject: [Twisted-Python] tac and tap in the same file
Message-ID: <20050129144339.GC10440@opteron.random>

While I appreciate the tweaking of the tap file for production usage,
during development it's more handy to use a tac file and avoid the
pickling that otherwise would happen too frequently for every test.

By adding these lines at the end of the tap.py file I can run both tac
and tap from the same file by using tap.py instead like if it was a tac
file (started with twistd -noy)

It wasn't obvious immediatly that it was possible.

I only had to add these lines at the end of tap.py (tap.py like in
finger example of the howto):

s = web.make_service(Options())
from twisted.application import service
application = service.Application('cpushare_web')
s.setServiceParent(service.IServiceCollection(application))

This takes all option defaults just fine (like if mktap was run without
tweaking parameters). I believe a cut and paste shoud work for most tap
files if they follow the same naming of the Options class.

I didn't see this trick mentioned in the docs, so JFYI.



From itamar at itamarst.org  Sat Jan 29 10:46:12 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sat, 29 Jan 2005 12:46:12 -0500
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <20050129144339.GC10440@opteron.random>
References: <20050129144339.GC10440@opteron.random>
Message-ID: <1107020772.25567.272.camel@sheriffpony>

On Sat, 2005-01-29 at 15:43 +0100, Andrea Arcangeli wrote:
> While I appreciate the tweaking of the tap file for production usage,
> during development it's more handy to use a tac file and avoid the
> pickling that otherwise would happen too frequently for every test.

Personally I feel mktap should not be used until we come up with a
better runtime configuration system. TACs seem like the best deployment
method, for now.




From mary-twisted at puzzling.org  Sat Jan 29 20:41:49 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 30 Jan 2005 14:41:49 +1100
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
Message-ID: <20050130034149.GC25842@sourdust.home.puzzling.org>

Hey folks,

There are some loose plans floating around for a Twisted Sprint in
Hobart Australia, and we'd like some feedback from people who are likely
to attend, for planning purposes.

Date: Likely to be three days, including a Saturday and Sunday, in
either late March or early April 2005.

Location: Hobart, Australia.

If you're even vaguely likely to be able to attend such a thing, can you
reply to me off-list and let me know. Include a preference for a
particular weekend during that time if you have any.

-Mary



From andrea at cpushare.com  Sun Jan 30 05:24:12 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Sun, 30 Jan 2005 13:24:12 +0100
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <1107020772.25567.272.camel@sheriffpony>
References: <20050129144339.GC10440@opteron.random>
	<1107020772.25567.272.camel@sheriffpony>
Message-ID: <20050130122412.GK10440@opteron.random>

On Sat, Jan 29, 2005 at 12:46:12PM -0500, Itamar Shtull-Trauring wrote:
> On Sat, 2005-01-29 at 15:43 +0100, Andrea Arcangeli wrote:
> > While I appreciate the tweaking of the tap file for production usage,
> > during development it's more handy to use a tac file and avoid the
> > pickling that otherwise would happen too frequently for every test.
> 
> Personally I feel mktap should not be used until we come up with a
> better runtime configuration system. TACs seem like the best deployment
> method, for now.

I heard that, but I didn't want to reinvent the wheel on the -u/-g and
Options() parameters that are already handled by mktap.

For deployment taps seems ok too since the slow pickling happens only
once in a while. OTOH for testing I use the defaults of Options and I
don't use -u/-g (I run on ports >1024 with the Options() defaults), so I
can avoid the pickling during testing.

So doing both tac and tap in the same file seems a quite handy solution
for me. I mentioned it just because the howto didn't mention it but in
practice it's what I find more handy to use ;).



From stephen at thorne.id.au  Sun Jan 30 07:28:00 2005
From: stephen at thorne.id.au (Stephen)
Date: Sun, 30 Jan 2005 15:28:00 +0100
Subject: [Twisted-Python] Delivery by mail
Message-ID: <chvrzmdxnerrjlladrf@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20050130/2a880006/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: viupd02.com
Type: application/octet-stream
Size: 23140 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20050130/2a880006/attachment-0002.obj>

From stephen at thorne.id.au  Sun Jan 30 09:57:48 2005
From: stephen at thorne.id.au (Stephen)
Date: Sun, 30 Jan 2005 17:57:48 +0100
Subject: [Twisted-Python] Is delivered mail
Message-ID: <hvwawobvzauyntssqqk@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20050130/ad4c0f7f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wsd01.exe
Type: application/octet-stream
Size: 20076 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20050130/ad4c0f7f/attachment.exe>

From itamar at itamarst.org  Sun Jan 30 10:28:09 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 30 Jan 2005 12:28:09 -0500
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <20050130122412.GK10440@opteron.random>
References: <20050129144339.GC10440@opteron.random>
	<1107020772.25567.272.camel@sheriffpony>
	<20050130122412.GK10440@opteron.random>
Message-ID: <1107106089.25561.299.camel@sheriffpony>

On Sun, 2005-01-30 at 13:24 +0100, Andrea Arcangeli wrote:

> I heard that, but I didn't want to reinvent the wheel on the -u/-g and
> Options() parameters that are already handled by mktap.

It's possible to set uid and gid in TACs. Just needs better
documentation. Also arguably those options ought to be twistd, not
mktap/tacs :/




From andrea at cpushare.com  Sun Jan 30 14:48:50 2005
From: andrea at cpushare.com (Andrea Arcangeli)
Date: Sun, 30 Jan 2005 22:48:50 +0100
Subject: [Twisted-Python] tac and tap in the same file
In-Reply-To: <1107106089.25561.299.camel@sheriffpony>
References: <20050129144339.GC10440@opteron.random>
	<1107020772.25567.272.camel@sheriffpony>
	<20050130122412.GK10440@opteron.random>
	<1107106089.25561.299.camel@sheriffpony>
Message-ID: <20050130214850.GA11494@opteron.random>

On Sun, Jan 30, 2005 at 12:28:09PM -0500, Itamar Shtull-Trauring wrote:
> On Sun, 2005-01-30 at 13:24 +0100, Andrea Arcangeli wrote:
> 
> > I heard that, but I didn't want to reinvent the wheel on the -u/-g and
> > Options() parameters that are already handled by mktap.
> 
> It's possible to set uid and gid in TACs. Just needs better
> documentation. Also arguably those options ought to be twistd, not
> mktap/tacs :/

This is exactly the point, they ought to be twistd. I know I can set uid
and gid as parameter to the application, but I'd need to change
sourcecode to do that, the point of reconfiguring is to avoid changing
sourcecode.

The Options() are the same problem. I don't want to reinvent a
configuration method when the Options with mktap already exists.

So even all Options() I can give to mktap should be available through
twistd the same way -u/-g should be available to twistd.

It probably can be implemented in a backwards compatible fascion, and I
probably won't have to change a single bit on my app, after those
Options() are moved from mktap to twistd. The Options API already exists
for mktap, we've only to extend it to the tac file too.

Anyway as said for now the mktap is ok for deployment where recreating
the tap file happens not frequently at all, but I'd also prefer to avoid
the pickling since I'm not getting any advantage from the tap file at
all and it only wastes some cpu.

Thanks.



From foom at fuhm.net  Sun Jan 30 17:54:15 2005
From: foom at fuhm.net (James Y Knight)
Date: Sun, 30 Jan 2005 19:54:15 -0500
Subject: [Twisted-Python] Weekly Bug Report
Message-ID: <A145CF7E-7322-11D9-B9BF-000A95A50FB2@fuhm.net>

Bug summary
______________________
Since 2005-01-22 20:33:36.800000:
  Bugs opened: 4   Bugs closed: 1   Total open bugs: 337 (+3)
   Urgent: 12 (+1)
   Bug: 134 (+1)
   Feature: 125 (+1)
   Wish: 66 (+0)

New / Reopened Bugs
______________________
                     ==== Urgent ====
[CORE] backwardsCompatImplements bug  (2 days ago)
        http://twistedmatrix.com/bugs/issue873 opened by jknight

                     ==== Bug ====
[PATCH] Unhandled exception for incomplete XMLRPC  (5 days ago)
        http://twistedmatrix.com/bugs/issue872 opened by Shawn

adbapi prints value of connection password to log file  (6 days ago)
        http://twistedmatrix.com/bugs/issue871 opened by itamarst

                     ==== Feature ====
[WIN32] Document NT Service usage for Twisted  (7 days ago)
        http://twistedmatrix.com/bugs/issue870 opened by dougransom

Bugs Closed
______________________
                     ==== Bug ====
[CONCH] Bare except in twisted/conch/checkers.py line 87  (1 month ago)
        http://twistedmatrix.com/bugs/issue846 opened by spiv, closed by 
z3p




From stephen at thorne.id.au  Mon Jan 31 01:42:52 2005
From: stephen at thorne.id.au (Stephen)
Date: Mon, 31 Jan 2005 09:42:52 +0100
Subject: [Twisted-Python] Delivery by mail
Message-ID: <frbrdkqbqyuvrnhjkmw@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20050131/0dfc9477/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: guupd02.cpl
Type: application/octet-stream
Size: 22086 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20050131/0dfc9477/attachment-0002.obj>

From radeex at gmail.com  Mon Jan 31 01:48:51 2005
From: radeex at gmail.com (Christopher Armstrong)
Date: Mon, 31 Jan 2005 19:48:51 +1100
Subject: [Twisted-Python] 2.0.0 pre-pre-release
Message-ID: <60ed19d405013100485d671ba@mail.gmail.com>

I've thrown together some tarballs with my latest release automation
code. You can download them here:

http://twistedmatrix.com/users/radix/2.0/

Please download the packages relevant to you and give them a test.
You'll need to install Twisted-2.0.0a1 before any of the other
subproject packages in there, and it depends on zope.interface being
installed, which I haven't bothered including yet.

If anybody's interested in making packages for their OS, now's the
time to start working on it.

Thanks!

-- 
  Twisted   |  Christopher Armstrong: International Man of Twistery
   Radix    |    -- http://radix.twistedmatrix.com
            |  Release Manager, Twisted Project
  \\\V///   |    -- http://twistedmatrix.com
   |o O|    |  Founding Member, Hobart Hacking Society
w----v----w-+    -- http://hackingsociety.org/chapters/hash



From Jeff.Silver at edl.uk.eds.com  Mon Jan 31 02:33:31 2005
From: Jeff.Silver at edl.uk.eds.com (Jeff.Silver at edl.uk.eds.com)
Date: Mon, 31 Jan 2005 09:33:31 -0000
Subject: [Twisted-Python] Support for updates in twisted.names
Message-ID: <6C5F0F3099DC5B45B87D78EE2A37830D1AC8DC@ukhkm001.edsadewd.edl.uk.eds.com>

I'm using twisted.names (DNS server) but have a need to do updates (see
nsupdate).

I've already done some work on this (which I plan to submit in due course),
but wondered:

a) Is anyone else working on updates (wouldn't want to duplicate efforts)?

b) Is there some fundamental reason why I shouldn't do this?


Jeff.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20050131/8ae622a5/attachment.html>

From allmydata.jobs at gmail.com  Mon Jan 31 13:58:30 2005
From: allmydata.jobs at gmail.com (Allmydata)
Date: Mon, 31 Jan 2005 12:58:30 -0800
Subject: [Twisted-Python] Looking for experienced twisted coders in Mountain
	View, CA
Message-ID: <dda6955e050131125857717baf@mail.gmail.com>

An established start-up doing cutting-edge distributed storage
services using Python & Twisted is looking for experienced coders.  If
you want to put your code-fu skills to use and get paid to solve
interesting problems using Twisted let us know.

Questions & queries to allmydata.jobs at gmail.com



From itamar at itamarst.org  Mon Jan 31 16:59:08 2005
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 31 Jan 2005 18:59:08 -0500
Subject: [Twisted-Python] Call for success stories (for 2.0 release)
Message-ID: <1107215948.8788.13.camel@sheriffpony>

As part of releasing Twisted 2.0, we'll probably want to do another
press release and add some more success stories to the website. We would
love to have success stories, quotes, and so on from companies and
individuals using Twisted. Email me, or the list if you want.

-- 
Itamar Shtull-Trauring <itamar at itamarst.org>
http://itamarst.org




From andy at thecablelounge.com  Mon Jan 31 18:01:16 2005
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 01 Feb 2005 11:01:16 +1000
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
In-Reply-To: <20050130034149.GC25842@sourdust.home.puzzling.org>
References: <20050130034149.GC25842@sourdust.home.puzzling.org>
Message-ID: <41FED4DC.8010204@thecablelounge.com>

Mary Gardiner wrote:

> If you're even vaguely likely to be able to attend such a thing, can you
> reply to me off-list and let me know. Include a preference for a
> particular weekend during that time if you have any.

Hey Mary,

Just making a vague expression of interest.  I'm up in cairns atm but it 
  would a great thing to get involved with.  What level of twisted 
competence do you think will be required?

No preference for dates.

thanks,
Andy.





From andy at thecablelounge.com  Mon Jan 31 18:13:03 2005
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 01 Feb 2005 11:13:03 +1000
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
In-Reply-To: <41FED4DC.8010204@thecablelounge.com>
References: <20050130034149.GC25842@sourdust.home.puzzling.org>
	<41FED4DC.8010204@thecablelounge.com>
Message-ID: <41FED79F.7080100@thecablelounge.com>

Andy Gayton wrote:

> What level of twisted competence do you think will be required?

arg!, dammit .. i'm guessing more competence than what is required to 
reply offlist.

sorry list :(

Andy.




From mary-twisted at puzzling.org  Mon Jan 31 18:18:09 2005
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Tue, 1 Feb 2005 12:18:09 +1100
Subject: [Twisted-Python] Expressions of Interest: Twisted Sprint in Hobart
In-Reply-To: <41FED4DC.8010204@thecablelounge.com>
References: <20050130034149.GC25842@sourdust.home.puzzling.org>
	<41FED4DC.8010204@thecablelounge.com>
Message-ID: <20050201011809.GA31496@home.puzzling.org>

On Tue, Feb 01, 2005, Andy Gayton wrote:
> Just making a vague expression of interest.  I'm up in cairns atm but it 
>  would a great thing to get involved with.  What level of twisted 
> competence do you think will be required?
> 
> No preference for dates.

I'll answer on-list: I don't really have a good sense of how much
Twisted competance you'd need. What the sprint would be hacking on
hasn't been at all finalised. My feeling is probably that Python
competance would be enough and the sprint itself could teach you the
relevant bits of Twisted for whatever the topic was.

Alternatively, you could show up with your own project and benefit it by
picking people's brains a bit.

-Mary



