<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to write (network) integration tests with 	Twisted?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20write%20%28network%29%20integration%20tests%20with%20%0A%09Twisted%3F&In-Reply-To=368574aa0901260309j7e0bf9edk2cc440ae96d534cb%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019082.html">
   <LINK REL="Next"  HREF="019086.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to write (network) integration tests with 	Twisted?</H1>
    <B>Alessio Pace</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20write%20%28network%29%20integration%20tests%20with%20%0A%09Twisted%3F&In-Reply-To=368574aa0901260309j7e0bf9edk2cc440ae96d534cb%40mail.gmail.com"
       TITLE="[Twisted-Python] How to write (network) integration tests with 	Twisted?">alessio.pace at gmail.com
       </A><BR>
    <I>Mon Jan 26 08:00:18 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019082.html">[Twisted-Python] How to write (network) integration tests with 	Twisted?
</A></li>
        <LI>Next message: <A HREF="019086.html">[Twisted-Python] How to write (network) integration tests with	Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19083">[ date ]</a>
              <a href="thread.html#19083">[ thread ]</a>
              <a href="subject.html#19083">[ subject ]</a>
              <a href="author.html#19083">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 26, 2009 at 12:09 PM, Drew Smathers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">drew.smathers at gmail.com</A>&gt;wrote:

&gt;<i> On Mon, Jan 26, 2009 at 4:02 PM, Alessio Pace &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alessio.pace at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would like to put in my suite of tests some integration tests which
</I>&gt;<i> deal
</I>&gt;<i> &gt; with running some exchange of messages among 2 endpoints (bound locally
</I>&gt;<i> on
</I>&gt;<i> &gt; the same machine on 2 different ports).
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Trial allows you to return a Deferred, which in you case is something
</I>&gt;<i> you would call after your endpoints close their connections.  You can
</I>&gt;<i> grep through twisted sources though to see how this can be done
</I>&gt;<i> without network connections in unit tests - look for test cases using
</I>&gt;<i> the module simio.
</I>&gt;<i>
</I>&gt;<i> &gt; I noticed (and read afterwards..) that I can't run()/stop() the reactor
</I>&gt;<i> &gt; multiple times, so I was wondering what's the suggested way to deal with
</I>&gt;<i> &gt; this kind of situation.
</I>&gt;<i>
</I>&gt;<i> You can close connections and reconnect etc. without &quot;restarting&quot; the
</I>&gt;<i> reactor - so I don't see how this is an obstacle.
</I>

The point is that I must assure multiple test classes have their test
methods run within an active reactor. So somewhere a reactor.run() has to be
called.. Necessarily, if I want that my tests battery to terminate, a
reactor.stop() must be invoked by somebody, otherwise the main loop remains
running...

The trivial -and not working- idea was to do reactor.run() / reactor.stop()
in setUp() / tearDown() methods.

I believe extening Trial TestCase is the good way to go, but as you are
mentioning, there is not so much documentation... I'm trying to understand
how to do from the UDP test case in Twisted trunk..

Thanks. Regards,
Alessio Pace.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20090126/e9d77cab/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20090126/e9d77cab/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019082.html">[Twisted-Python] How to write (network) integration tests with 	Twisted?
</A></li>
	<LI>Next message: <A HREF="019086.html">[Twisted-Python] How to write (network) integration tests with	Twisted?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19083">[ date ]</a>
              <a href="thread.html#19083">[ thread ]</a>
              <a href="subject.html#19083">[ subject ]</a>
              <a href="author.html#19083">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
