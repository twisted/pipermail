<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reactor.stop() and thread and wxPython problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reactor.stop%28%29%20and%20thread%20and%20wxPython%20problem&In-Reply-To=%3C49708158.6020300%40arimaz.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051545.html">
   <LINK REL="Next"  HREF="051549.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reactor.stop() and thread and wxPython problem</H1>
    <B>Gabriel Rossetti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20reactor.stop%28%29%20and%20thread%20and%20wxPython%20problem&In-Reply-To=%3C49708158.6020300%40arimaz.com%3E"
       TITLE="[Twisted-Python] reactor.stop() and thread and wxPython problem">gabriel.rossetti at arimaz.com
       </A><BR>
    <I>Fri Jan 16 05:45:12 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051545.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
        <LI>Next message (by thread): <A HREF="051549.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51547">[ date ]</a>
              <a href="thread.html#51547">[ thread ]</a>
              <a href="subject.html#51547">[ subject ]</a>
              <a href="author.html#51547">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Reza Lotun wrote:
&gt;<i> Hi Gabriel,
</I>&gt;<i>
</I>&gt;<i> I don't quite understand your question. Do you mean to say that you
</I>&gt;<i> have written some code with wx and Twisted in an integrated event
</I>&gt;<i> loop, and are doing something like reactor.callInThread(someCall), and
</I>&gt;<i> when you call reactor.stop the app doesn't exit? AFAIK, any thread
</I>&gt;<i> spawning goes through Twisted's internal thread pool and thread
</I>&gt;<i> joining should be handled by reactor.stop - I suppose it depends on
</I>&gt;<i> what those threads are doing.
</I>&gt;<i>
</I>&gt;<i>   
</I>
Almost :-) I have 2 programs, one is Twisted + wx using the integrated 
event loop, as described in the Twisted documentation. This program has 
no threads, but I use reactor.callFromThread sometimes from the wx part.

The other program is Twisted with no wx but it uses threads 
(threads.deferToThread).

They both have trouble sometimes closing when reactor.stop() is called, 
not always though.


&gt;<i> Based on my experience with wx and Twisted, I found the following
</I>&gt;<i> works quite well:
</I>&gt;<i>
</I>&gt;<i> * Have the reactor run in a seperate thread from wx (making sure to
</I>&gt;<i> use reactor.run(installSignalHandlers=False))
</I>&gt;<i> * Spawn threads from wx-&gt;Twisted in the proper way: use
</I>&gt;<i> reactor.callFromThread(reactor.callInThread(someCall))
</I>&gt;<i>
</I>&gt;<i>   
</I>
Hmmm, I'll give that a try later on, does it work better than the 
official way of doing it? Has anyone else tried this?

&gt;<i> Hope this helped,
</I>&gt;<i> Reza
</I>&gt;<i>
</I>&gt;<i>   
</I>Thanks Reza
&gt;<i> On Fri, Jan 16, 2009 at 7:37 AM, Gabriel Rossetti
</I>&gt;<i> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">gabriel.rossetti at arimaz.com</A>&gt; wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Hello everyone,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have written some code using Twisted that spawns threads and another using
</I>&gt;&gt;<i> wxPython integration. For some reason when reactor.stop() is called they
</I>&gt;&gt;<i> don't always exit. I suspect that the reactor is waiting on the threads to
</I>&gt;&gt;<i> finish, which they apparently don't do, and as for the wx integration, I
</I>&gt;&gt;<i> don't know, maybe wx's main loop is in a separate thread and it would be the
</I>&gt;&gt;<i> same problem. Does anyone know/have an idea or has anyone else experienced
</I>&gt;&gt;<i> this?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you,
</I>&gt;&gt;<i> Gabriel
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051545.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
	<LI>Next message (by thread): <A HREF="051549.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51547">[ date ]</a>
              <a href="thread.html#51547">[ thread ]</a>
              <a href="subject.html#51547">[ subject ]</a>
              <a href="author.html#51547">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
