<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [Q] multi-process chat client and poller
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BQ%5D%20multi-process%20chat%20client%20and%20poller&In-Reply-To=%3C1231881069.16735.1294598841%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051502.html">
   <LINK REL="Next"  HREF="051521.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [Q] multi-process chat client and poller</H1>
    <B>V S P</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BQ%5D%20multi-process%20chat%20client%20and%20poller&In-Reply-To=%3C1231881069.16735.1294598841%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] [Q] multi-process chat client and poller">toreason at fastmail.fm
       </A><BR>
    <I>Tue Jan 13 14:11:09 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051502.html">[Twisted-Python] [Q] multi-process chat client and poller
</A></li>
        <LI>Next message (by thread): <A HREF="051521.html">[Twisted-Python] [Q] multi-process chat client and poller
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51519">[ date ]</a>
              <a href="thread.html#51519">[ thread ]</a>
              <a href="subject.html#51519">[ subject ]</a>
              <a href="author.html#51519">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, thank you for the correction on how to use Ampula.

Naming service serves
really as a 'discovery' tool -- and then the participating
components talk to each other.  When new component comes
on online, it registers, and the Naming Service broadcasts
the new updates to all the subscribed components.  It also
can 'ping' the components to see if they are alive and if not
it deletes an entry and broadcasts the updates to the remaning 
components.

This way the message dispatchers (or components themselves) have
almost up-to-date information about their peers on the network (the  is
a delay controlled by ping interval).

The naming service data is sometimes stored on a file system
(in case it crashes and needs to restart -- sort of like a
'session') with Python's serialization it has to be easy to do.

But yes, a naming service while not a bottleneck --  can be
a single point of failure in a distributed env, and that's why
for 'fault safety' it is typically ran on fail-over hardware
(although since it is not doing much, it rarely crashes :-))

I certainly agree that using a naming service as a mechanism
to get a 'context' of a remote process to invoke its methods 
(sort of get a Prospective Broker object from a naming service)
every time a call is made -- would be inefficient and not correct.

But if each component has the table of the registered components,
then simply using that table to insanciate a Prospective Broker's
RemoteReference for the needed remote component -- would be nice.  


Few people pointed out that a more generic service discovery
systems exist and they use Dbus protocol (they are used to discover
printers on the network, fileshares, etc) -- I have to study those.

As far as XAMPP, I meant to ask: in twisted, does it run distributed
on multiple machines (that is multiple xampp servers each on its own
machine) -- if yes -- I thought it would have to have some kind of a
naming service built in (I did not mean that XA (AMP) in the naming
suggested that it is derived from Ampula :-)).  But may be it is
single-machine/single-thread process only (I just did not know).


thanks,
Vlad




On Sun, 11 Jan 2009 22:56:48 -0800, &quot;Valentino Volonghi&quot;
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dialtone at gmail.com</A>&gt; said:
&gt;<i> 
</I>&gt;<i> On Jan 3, 2009, at 2:32 PM, V S P wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Thank you so much
</I>&gt;<i> &gt; Yes, this plugin is what I am looking for process pool
</I>&gt;<i> &gt; &quot;
</I>&gt;<i> &gt;    &quot;&quot;&quot;
</I>&gt;<i> &gt;    This plugin provides ways to create a process pool service in your
</I>&gt;<i> &gt;    system listening on a given port and interface and answering to a
</I>&gt;<i> &gt;    given set of commands.
</I>&gt;<i> &gt;    &quot;&quot;&quot;
</I>&gt;<i> &gt; &quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So I just need to inherit from
</I>&gt;<i> &gt; AMPConnector and have a trully scalable server!
</I>&gt;<i> 
</I>&gt;<i> No. Wait there... AMPConnector is only a frontend and it's not
</I>&gt;<i> made to be inherited. You might want to inherit it only to add some
</I>&gt;<i> weird functionality to it. Another option is to not use it but create
</I>&gt;<i> a new one to avoid using AMP as a child-parent protocol.
</I>&gt;<i> 
</I>&gt;<i> You really want to subclass AMPChild and create a good AMPParent
</I>&gt;<i> by subclassing amp.AMP.
</I>&gt;<i> 
</I>&gt;<i> There are some examples in the code and to expose a process pool
</I>&gt;<i> on the net you shouldn't do anything more than adding the right argument
</I>&gt;<i> to the command line twistd plugin.
</I>&gt;<i> 
</I>&gt;<i> &gt; Two more questions:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What's the mechanism of 'registring' multiple twisted servers
</I>&gt;<i> &gt; (something similar to a Name server in Corba) -- so an event
</I>&gt;<i> &gt; dispatching client can 'discover' the servers running on
</I>&gt;<i> &gt; multiple machines
</I>&gt;<i> 
</I>&gt;<i> I haven't written such a mechanism yet. It shouldn't be too hard to have
</I>&gt;<i> a simple version but having everything go through the same master node
</I>&gt;<i> is kind of problematic from a scalability point of view. It would be  
</I>&gt;<i> better to
</I>&gt;<i> have a routing system where each system knows each other but probably
</I>&gt;<i> this has a lot of memory overhead to keep in memory the list of nearby
</I>&gt;<i> servers... If anyone is willing to spend some time to design some kind  
</I>&gt;<i> of
</I>&gt;<i> solution for this I'd be happy to implement it in ampoule. I'm pretty  
</I>&gt;<i> sure that
</I>&gt;<i> this was done in other projects already.
</I>&gt;<i> 
</I>&gt;<i> &gt; And how does one run multiple XAMPP servers in twisted -- such
</I>&gt;<i> &gt; that work to each server is distributed either by a hash on a user
</I>&gt;<i> &gt; name or some other way (or does such mechanism exist).
</I>&gt;<i> 
</I>&gt;<i> It's just AMP, XMPP is another protocol.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Valentino Volonghi aka Dialtone
</I>&gt;<i> Now running MacOS X 10.5
</I>&gt;<i> Home Page: <A HREF="http://www.twisted.it">http://www.twisted.it</A>
</I>&gt;<i> <A HREF="http://www.adroll.com">http://www.adroll.com</A>
</I>&gt;<i> 
</I>-- 
  V S P
  <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">toreason at fastmail.fm</A>

-- 
<A HREF="http://www.fastmail.fm">http://www.fastmail.fm</A> - The way an email service should be



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051502.html">[Twisted-Python] [Q] multi-process chat client and poller
</A></li>
	<LI>Next message (by thread): <A HREF="051521.html">[Twisted-Python] [Q] multi-process chat client and poller
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51519">[ date ]</a>
              <a href="thread.html#51519">[ thread ]</a>
              <a href="subject.html#51519">[ subject ]</a>
              <a href="author.html#51519">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
