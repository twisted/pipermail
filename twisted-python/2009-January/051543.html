<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] django with twisted 8.2.x: 2009
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20django%20with%20twisted%208.2.x%3A%202009&In-Reply-To=%3C1232048364.25572.1295000789%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051534.html">
   <LINK REL="Next"  HREF="051550.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] django with twisted 8.2.x: 2009</H1>
    <B>V S P</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20django%20with%20twisted%208.2.x%3A%202009&In-Reply-To=%3C1232048364.25572.1295000789%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] django with twisted 8.2.x: 2009">toreason at fastmail.fm
       </A><BR>
    <I>Thu Jan 15 12:39:24 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051534.html">[Twisted-Python] django with twisted 8.2.x: 2009
</A></li>
        <LI>Next message (by thread): <A HREF="051550.html">[Twisted-Python] django with twisted 8.2.x: 2009
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51543">[ date ]</a>
              <a href="thread.html#51543">[ thread ]</a>
              <a href="subject.html#51543">[ subject ]</a>
              <a href="author.html#51543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alex,
This is just a plan sofar (not implemented yet)

But I plan use twisted for Reports that join
file data and database data.  I also plan to use Twisted
to 'serv' those reports up to the requestor.

Therefore The wisted web server will be used to serve up
the reports,

and twisted Processes that will be pre-spawned using Ampoule
would be the ones that creating the reports.


Some of the reports will be just Excel, some other will be
a more sophisticated web page with bunch of data associated
with it in JSON.  So Django will be used to create a UI
for these report (because I am using Dojo Javascript framework
for the report gui).


Most likely that the serving of the reports will be just one or
two twisted servers, and the 'report workers' will be distributed
across multiple machines.  But in the beginning, or for small
implementations, one server will be doing everything -- it is just
going to be one 'Report Server'.

I still do not have a decision on what to use to 'register' all
the twisted servers on the network, and how to distribute the report
requests to non-busy 'report worker' servers.  Twisted does not
have  a prebuilt solution for this so I have solicited enough input
from the members of the list here to continue my investigation.

I do not plan to use 'twisted defferred' in my viewes -- because
I separate the 'really long-running' tasks out.  In that
sense I will not make the view available at all -- before
the long running task is complete.  After all -- If I want
the user to see something -- I should not expect him to be glued
to the monitor for a couple of hours waiting for something.
Other than that, of course my views are all AJAX -- so they will
be 'asynchronious' from the user prospective.

Since database and file system calls are implemented in C 
even the poorly scalable Python's threading model should be sufficiently
usefull on
multicore system. As long as the file sytem calls and the
DB calls are started from within separate threads (because the GIL
blocking would take effect only when the IO calls return -- and it is
unlikely that they all return at the same time).
But just in case, I personally will still use Ampoule's process model
(it mimics Twisted's thread interface)

My DB is postgres and psycopg2 database access module is specifically
designed for non-blocking multithreaded access.


If yo have a really long running tasks, I suggest you donot
'bind' gui into those -- and instead do what I am doing -- just
submit requests to the database, have background servers process them
and then change the status of the request to 'Done' so that the GUI
can either poll it or the user will see the task is completed.
Because during those tasks you can have user logoff, DB shutdown, etc.

Vlad

On Wed, 14 Jan 2009 20:45:39 -0800, &quot;Alex Clemesha&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">clemesha at gmail.com</A>&gt;
said:
&gt;<i> &gt; It ended up pretty painless (sofar)
</I>&gt;<i> 
</I>&gt;<i> Hey Vlad,
</I>&gt;<i> 
</I>&gt;<i> Thanks for posting your solution!
</I>&gt;<i> 
</I>&gt;<i> Care to discuss your use case for mixing Django and Twisted?
</I>&gt;<i> 
</I>&gt;<i> I have considered mixing the two for a project that combines
</I>&gt;<i> a web interface and some XMPP functionality, but I have not yet
</I>&gt;<i> gone down this route ...
</I>&gt;<i> 
</I>&gt;<i> What about using deferreds in your views? (is that even a useful/good
</I>&gt;<i> idea ?)
</I>&gt;<i> and what about blocking model calls, have you consider these scenarios?
</I>&gt;<i> 
</I>&gt;<i> Thanks for any feedback on this interesting topic.
</I>&gt;<i> -Alex
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Alex Clemesha
</I>&gt;<i> clemesha.org
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>-- 
  V S P
  <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">toreason at fastmail.fm</A>

-- 
<A HREF="http://www.fastmail.fm">http://www.fastmail.fm</A> - Access all of your messages and folders
                          wherever you are



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051534.html">[Twisted-Python] django with twisted 8.2.x: 2009
</A></li>
	<LI>Next message (by thread): <A HREF="051550.html">[Twisted-Python] django with twisted 8.2.x: 2009
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51543">[ date ]</a>
              <a href="thread.html#51543">[ thread ]</a>
              <a href="subject.html#51543">[ subject ]</a>
              <a href="author.html#51543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
