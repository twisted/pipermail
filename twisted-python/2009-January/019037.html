<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] reactor.stop() and thread and wxPython problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20reactor.stop%28%29%20and%20thread%20and%20wxPython%20problem&In-Reply-To=49703952.20003%40arimaz.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019036.html">
   <LINK REL="Next"  HREF="019039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] reactor.stop() and thread and wxPython problem</H1>
    <B>Reza Lotun</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20reactor.stop%28%29%20and%20thread%20and%20wxPython%20problem&In-Reply-To=49703952.20003%40arimaz.com"
       TITLE="[Twisted-Python] reactor.stop() and thread and wxPython problem">reza at getpeer.com
       </A><BR>
    <I>Fri Jan 16 04:08:24 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019036.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
        <LI>Next message: <A HREF="019039.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19037">[ date ]</a>
              <a href="thread.html#19037">[ thread ]</a>
              <a href="subject.html#19037">[ subject ]</a>
              <a href="author.html#19037">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Gabriel,

I don't quite understand your question. Do you mean to say that you
have written some code with wx and Twisted in an integrated event
loop, and are doing something like reactor.callInThread(someCall), and
when you call reactor.stop the app doesn't exit? AFAIK, any thread
spawning goes through Twisted's internal thread pool and thread
joining should be handled by reactor.stop - I suppose it depends on
what those threads are doing.

Based on my experience with wx and Twisted, I found the following
works quite well:

* Have the reactor run in a seperate thread from wx (making sure to
use reactor.run(installSignalHandlers=False))
* Spawn threads from wx-&gt;Twisted in the proper way: use
reactor.callFromThread(reactor.callInThread(someCall))

Hope this helped,
Reza

On Fri, Jan 16, 2009 at 7:37 AM, Gabriel Rossetti
&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">gabriel.rossetti at arimaz.com</A>&gt; wrote:
&gt;<i> Hello everyone,
</I>&gt;<i>
</I>&gt;<i> I have written some code using Twisted that spawns threads and another using
</I>&gt;<i> wxPython integration. For some reason when reactor.stop() is called they
</I>&gt;<i> don't always exit. I suspect that the reactor is waiting on the threads to
</I>&gt;<i> finish, which they apparently don't do, and as for the wx integration, I
</I>&gt;<i> don't know, maybe wx's main loop is in a separate thread and it would be the
</I>&gt;<i> same problem. Does anyone know/have an idea or has anyone else experienced
</I>&gt;<i> this?
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i> Gabriel
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>


-- 
Reza Lotun
Senior Software Engineer
Peer Technologies Limited
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">reza at getpeer.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019036.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
	<LI>Next message: <A HREF="019039.html">[Twisted-Python] reactor.stop() and thread and wxPython problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19037">[ date ]</a>
              <a href="thread.html#19037">[ thread ]</a>
              <a href="subject.html#19037">[ subject ]</a>
              <a href="author.html#19037">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
