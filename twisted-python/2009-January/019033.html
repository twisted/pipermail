<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: adbapi and ConnectionLost.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20adbapi%20and%20ConnectionLost.&In-Reply-To=496CFA6D.2040800%402le.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019010.html">
   <LINK REL="Next"  HREF="019016.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: adbapi and ConnectionLost.</H1>
    <B>Don Dwiggins</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20adbapi%20and%20ConnectionLost.&In-Reply-To=496CFA6D.2040800%402le.net"
       TITLE="[Twisted-Python] Re: adbapi and ConnectionLost.">ddwiggins at advpubtech.com
       </A><BR>
    <I>Thu Jan 15 12:28:22 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019010.html">[Twisted-Python] adbapi and ConnectionLost.
</A></li>
        <LI>Next message: <A HREF="019016.html">[Twisted-Python] Software that uses Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19033">[ date ]</a>
              <a href="thread.html#19033">[ thread ]</a>
              <a href="subject.html#19033">[ subject ]</a>
              <a href="author.html#19033">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>S&#233;bastien HEITZMANN wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> for a couple of week i search how i should handle mysql disconnection on
</I>&gt;<i> my twisted web service. When I restart the database without restarting
</I>&gt;<i> my service i got some ConnectionLost fired. I have used the cp_reconnect
</I>&gt;<i> on the connection pool and it seem to work ( the lost connection is
</I>&gt;<i> restarted ) but the current query isn't executed.
</I>
I ran into a similar thing using mssql with adbapi (through pyodbc). 
The adbapi connection pool holds connections open and uses them to do 
the access, which was causing problems when the database (or the network 
connection between my server and the database) was reset between 
accesses to my service.  I hacked a workaround by creating a thin 
wrapper around adbapi that closes each connection when I'm through with it.

FWIW,
-- 
Don Dwiggins
Advanced Publishing Technology



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019010.html">[Twisted-Python] adbapi and ConnectionLost.
</A></li>
	<LI>Next message: <A HREF="019016.html">[Twisted-Python] Software that uses Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19033">[ date ]</a>
              <a href="thread.html#19033">[ thread ]</a>
              <a href="subject.html#19033">[ subject ]</a>
              <a href="author.html#19033">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
