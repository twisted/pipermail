<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] RE: Write into a persistent connection befor	estopping
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RE%3A%20Write%20into%20a%20persistent%20connection%20befor%0A%09estopping&In-Reply-To=%3C20090126161522.24460.1213857364.divmod.quotient.2161%40henry.divmod.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051597.html">
   <LINK REL="Next"  HREF="051553.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] RE: Write into a persistent connection befor	estopping</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RE%3A%20Write%20into%20a%20persistent%20connection%20befor%0A%09estopping&In-Reply-To=%3C20090126161522.24460.1213857364.divmod.quotient.2161%40henry.divmod.com%3E"
       TITLE="[Twisted-Python] RE: Write into a persistent connection befor	estopping">exarkun at divmod.com
       </A><BR>
    <I>Mon Jan 26 09:15:22 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051597.html">[Twisted-Python] RE: Write into a persistent connection befor	estopping
</A></li>
        <LI>Next message (by thread): <A HREF="051553.html">[Twisted-Python] getProcessOutput on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51598">[ date ]</a>
              <a href="thread.html#51598">[ thread ]</a>
              <a href="subject.html#51598">[ subject ]</a>
              <a href="author.html#51598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 26 Jan 2009 17:07:23 +0100, &quot;Boeuf, Jean-Francois&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jean-francois.boeuf at eads.com</A>&gt; wrote:
&gt;&gt;<i> [snip]
</I>&gt;&gt;<i>
</I>&gt;<i>I'm Ok with that but it is no more than test sample code. The server does
</I>&gt;<i>write periodically the connection but doesn't send &quot;&lt;strong&gt;Connection
</I>&gt;<i>closed because of server shutdown&lt;/strong&gt;&quot; whereas the onStop method is
</I>&gt;<i>correctly called!
</I>&gt;<i>
</I>&gt;<i>Jean-Fran√ßois
</I>&gt;<i>
</I>
This is probably because the reactor stops before the bytes are actually
sent.  You may need to delay reactor shutdown until you know the bytes
have been sent.  This may mean waiting for the connections to close or
it may mean waiting for a timeout to expire or it may mean something
else - it depends on which precise behavior you want.

&quot;before&quot; &quot;shutdown&quot; hooks can return a Deferred.  The shutdown process
will pause until that Deferred fires.  This lets you make the reactor
wait for whatever extra events you want it to wait for.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051597.html">[Twisted-Python] RE: Write into a persistent connection befor	estopping
</A></li>
	<LI>Next message (by thread): <A HREF="051553.html">[Twisted-Python] getProcessOutput on windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51598">[ date ]</a>
              <a href="thread.html#51598">[ thread ]</a>
              <a href="subject.html#51598">[ subject ]</a>
              <a href="author.html#51598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
