<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Beginner's question about names and callbacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Beginner%27s%20question%20about%20names%20and%20callbacks&In-Reply-To=%3Ced9894e50901252206p2e5a7fedlc6dc93f95ae648dc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051596.html">
   <LINK REL="Next"  HREF="051587.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Beginner's question about names and callbacks</H1>
    <B>Adan Broderick</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Beginner%27s%20question%20about%20names%20and%20callbacks&In-Reply-To=%3Ced9894e50901252206p2e5a7fedlc6dc93f95ae648dc%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Beginner's question about names and callbacks">broder79 at gmail.com
       </A><BR>
    <I>Sun Jan 25 23:06:37 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051596.html">[Twisted-Python] Truncated exception message for reactor instance 
</A></li>
        <LI>Next message (by thread): <A HREF="051587.html">[Twisted-Python] Beginner's question about names and callbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51586">[ date ]</a>
              <a href="thread.html#51586">[ thread ]</a>
              <a href="subject.html#51586">[ subject ]</a>
              <a href="author.html#51586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to write a program that will call my own function whenever a
query to a nameserver times out. I have figured out how to run the DNS
server. And I also know how to use filterAnswers(). But how do I catch the
&quot;Failure: twisted.names.error.DNSQueryTimeoutError:&quot; messages by adding code
to the resolver I've constructed?
I've got something like this:

class myResolver(client.Resolver):
    def filterAnswers(self, message):
        print &quot;answer:&quot;,message
        [snipped code]

resolver = myResolver(servers=[('10.0.1.1', 53)])
f = server.DNSServerFactory(clients=[resolver])
reactor.listenTCP(4053, f)
reactor.run()

But I don't see where to add an addErrback call. The important thing here is
that I'm not getting the  domains to look up on the command line or from the
user. They are coming in over a socket from, say, dig. So I'm trying to
avoid parsing those queries myself since the full DNS query protocol is
hefty; that is, I want twisted to do the work of the parsing the input.
Thanks for your help.

-Broder
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20090126/8a05b0c0/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051596.html">[Twisted-Python] Truncated exception message for reactor instance 
</A></li>
	<LI>Next message (by thread): <A HREF="051587.html">[Twisted-Python] Beginner's question about names and callbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51586">[ date ]</a>
              <a href="thread.html#51586">[ thread ]</a>
              <a href="subject.html#51586">[ subject ]</a>
              <a href="author.html#51586">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
