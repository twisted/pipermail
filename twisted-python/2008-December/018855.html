<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.mail.relaymanager.MXCalculator.getMX in	Win32 got problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.mail.relaymanager.MXCalculator.getMX%20in%0A%09Win32%20got%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018854.html">
   <LINK REL="Next"  HREF="018859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.mail.relaymanager.MXCalculator.getMX in	Win32 got problem</H1>
    <B>biziap biziap</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.mail.relaymanager.MXCalculator.getMX%20in%0A%09Win32%20got%20problem&In-Reply-To="
       TITLE="[Twisted-Python] twisted.mail.relaymanager.MXCalculator.getMX in	Win32 got problem">fetbiz at gmail.com
       </A><BR>
    <I>Fri Dec 12 19:46:07 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018854.html">[Twisted-Python] Re: PDF I thought may be of interest
</A></li>
        <LI>Next message: <A HREF="018859.html">[Twisted-Python] twisted.mail.relaymanager.MXCalculator.getMX	in Win32 got problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18855">[ date ]</a>
              <a href="thread.html#18855">[ thread ]</a>
              <a href="subject.html#18855">[ subject ]</a>
              <a href="author.html#18855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The problem is that: the UDP listening ports increase rapidly and eventually
come to the end: too many open file in selector.
As many as the hosts you lookup, those UDP ports are still alive. It is very
different from running this script in Linux (gentoo 2.6).
In Linux, the listening UDP port keep only 1 instance no matter how many
lookups .
Try the script below:
------------------------------
from twisted.mail import relaymanager
from twisted.internet import reactor,defer

global MXC
MXC = relaymanager.MXCalculator()
def getMailExchange(host):
    global MXC
    def cbMX(mxRecord):
        print 'Got mxRecord: %s' % mxRecord.name
    return MXC.getMX(host).addCallback(cbMX)

def run():
    d = getMailExchange('gmail.com')
    def next(mxRecord):
        d = getMailExchange('yahoo.com')

    #d.addCallback(next)     ## uncomment the line to increase your UDP
listening ports as many as you want
reactor.callWhenRunning(run)
reactor.run()
--------------------------------------------------

Any hints?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20081213/1e6e985e/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20081213/1e6e985e/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018854.html">[Twisted-Python] Re: PDF I thought may be of interest
</A></li>
	<LI>Next message: <A HREF="018859.html">[Twisted-Python] twisted.mail.relaymanager.MXCalculator.getMX	in Win32 got problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18855">[ date ]</a>
              <a href="thread.html#18855">[ thread ]</a>
              <a href="subject.html#18855">[ subject ]</a>
              <a href="author.html#18855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
