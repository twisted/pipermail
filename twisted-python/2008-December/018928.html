<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A question about ITransport.write()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20A%20question%20about%20ITransport.write%28%29&In-Reply-To=gj5a53%24mqj%241%40ger.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018925.html">
   <LINK REL="Next"  HREF="018929.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A question about ITransport.write()</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20A%20question%20about%20ITransport.write%28%29&In-Reply-To=gj5a53%24mqj%241%40ger.gmane.org"
       TITLE="[Twisted-Python] A question about ITransport.write()">andrew-twisted at puzzling.org
       </A><BR>
    <I>Sun Dec 28 02:13:17 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018925.html">[Twisted-Python] A question about ITransport.write()
</A></li>
        <LI>Next message: <A HREF="018929.html">[Twisted-Python] Re: A question about ITransport.write()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18928">[ date ]</a>
              <a href="thread.html#18928">[ thread ]</a>
              <a href="subject.html#18928">[ subject ]</a>
              <a href="author.html#18928">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lian Cheng wrote:
&gt;<i> Hi, all
</I>&gt;<i>
</I>&gt;<i> As a Twisted newbie, I read the Twisted documentation, and found that:
</I>&gt;<i>
</I>&gt;<i>   1. ITransport.write() doesn't return a deferred.
</I>&gt;<i>   2. IProtocol doesn't have a dataSent() callback or something alike.
</I>&gt;<i>
</I>&gt;<i> Since ITransport.write() is a non-blocking call, how can I be informed  
</I>&gt;<i> when data sent by ITransport.write() is actually sent successfully?
</I>
It depends on what exactly you mean by &quot;successfully&quot;.  Just because Twisted
has delivered the bytes to the OS for delivery (e.g. via the send(2)
syscall) doesn't mean they'll actually arrive at your intended destination.

So,

If you want to know if the bytes have arrived, get the remote side to send
back an explicit ACK of some sort.

If you want to know when the send buffer[1] isn't full anymore, so that you
can start working to fill it again, implement a pull producer
&lt;<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/producers.html#auto4">http://twistedmatrix.com/projects/core/documentation/howto/producers.html#auto4</A>&gt;
and call the transport's registerProducer method with it.

If you want something else, reply and tell us what :)

-Andrew.

[1] &#8220;send buffer&#8221; is fairly loose terminology, but it'll do.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018925.html">[Twisted-Python] A question about ITransport.write()
</A></li>
	<LI>Next message: <A HREF="018929.html">[Twisted-Python] Re: A question about ITransport.write()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18928">[ date ]</a>
              <a href="thread.html#18928">[ thread ]</a>
              <a href="subject.html#18928">[ subject ]</a>
              <a href="author.html#18928">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
