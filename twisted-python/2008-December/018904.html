<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] how to get an idle callback while running a	reactor?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20get%20an%20idle%20callback%20while%20running%20a%0A%09reactor%3F&In-Reply-To=494D0F14.3000105%40strout.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018903.html">
   <LINK REL="Next"  HREF="018905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] how to get an idle callback while running a	reactor?</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20get%20an%20idle%20callback%20while%20running%20a%0A%09reactor%3F&In-Reply-To=494D0F14.3000105%40strout.net"
       TITLE="[Twisted-Python] how to get an idle callback while running a	reactor?">radix at twistedmatrix.com
       </A><BR>
    <I>Sat Dec 20 11:35:56 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018903.html">[Twisted-Python] how to get an idle callback while running a	reactor?
</A></li>
        <LI>Next message: <A HREF="018905.html">[Twisted-Python] how to get an idle callback while running a	reactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18904">[ date ]</a>
              <a href="thread.html#18904">[ thread ]</a>
              <a href="subject.html#18904">[ subject ]</a>
              <a href="author.html#18904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Dec 20, 2008 at 10:28 AM, Joe Strout &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">joe at strout.net</A>&gt; wrote:
&gt;<i> Jean-Paul Calderone wrote:
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> So I'm at a loss as to how to add an &quot;idle&quot; function that will allow my
</I>&gt;&gt;&gt;<i> bot to periodically see whether it has something new to say to the user.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> While this sometimes makes sense, it's usually *not* the approach you want
</I>&gt;&gt;<i> to take.  You're describing a solution which is essentially polling.  And
</I>&gt;&gt;<i> polling is not as good as responding to events.  You *could* run a
</I>&gt;&gt;<i> function
</I>&gt;&gt;<i> ten times a second that looks around for a message to send and sends it if
</I>&gt;&gt;<i> it finds one.  Or, whatever event occurs which creates those messages
</I>&gt;&gt;<i> could
</I>&gt;&gt;<i> just send the message instead of putting it in a pile and waiting for your
</I>&gt;&gt;<i> poller to find it.
</I>&gt;<i>
</I>&gt;<i> Well, the thing is that there will actually be a great many things that
</I>&gt;<i> could cause it to need to send a message, such as the time, a change in the
</I>&gt;<i> outside temperature, a certain change in the value of a stock fund, etc.
</I>&gt;<i>  And the AIM interface isn't the only interface to this bot.  So I really do
</I>&gt;<i> think I need a way to call a function once every few seconds.
</I>
Just because you have a number of sources doesn't mean you
intrinsically can't use them in an efficient, event-oriented manner.
And you don't need a time-based call *just* because you have more than
one interface to the bot.

A timed poll may end up the easiest solution for you, but I want to
make sure you understand the way events work, because there may be a
much better solution. Let's go over your example event sources:

Time - Easy: your event source there is reactor.callLater itself.
Change in the temperature - How does your thermostat communicate this
information? A serial connection? a TCP socket? in any case, you can
probably hook up to that event source with Twisted directly.
Stock price - same question.

The point is that you can hook into these event sources with some code
that will immediately send the message out over your AIM (or IRC, or
whatever other) interface to the bot. That means communication will be
instantaneous *and* efficient.

-- 
Christopher Armstrong
<A HREF="http://radix.twistedmatrix.com/">http://radix.twistedmatrix.com/</A>
<A HREF="http://planet-if.com/">http://planet-if.com/</A>
<A HREF="http://canonical.com/">http://canonical.com/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018903.html">[Twisted-Python] how to get an idle callback while running a	reactor?
</A></li>
	<LI>Next message: <A HREF="018905.html">[Twisted-Python] how to get an idle callback while running a	reactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18904">[ date ]</a>
              <a href="thread.html#18904">[ thread ]</a>
              <a href="subject.html#18904">[ subject ]</a>
              <a href="author.html#18904">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
