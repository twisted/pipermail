<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] When would you considering split a server	application to some physical instance with different logic function?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20When%20would%20you%20considering%20split%20a%20server%0A%09application%20to%20some%20physical%20instance%20with%20different%20logic%20function%3F&In-Reply-To=befee6d80812010745r41da8efm8da141cd21898c%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018784.html">
   <LINK REL="Next"  HREF="018786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] When would you considering split a server	application to some physical instance with different logic function?</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20When%20would%20you%20considering%20split%20a%20server%0A%09application%20to%20some%20physical%20instance%20with%20different%20logic%20function%3F&In-Reply-To=befee6d80812010745r41da8efm8da141cd21898c%40mail.gmail.com"
       TITLE="[Twisted-Python] When would you considering split a server	application to some physical instance with different logic function?">maarten at treewalker.org
       </A><BR>
    <I>Mon Dec  1 18:22:13 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018784.html">[Twisted-Python] When would you considering split a server	application to some physical instance with different logic function?
</A></li>
        <LI>Next message: <A HREF="018786.html">[Twisted-Python] /CTCP user VERSION with twisted ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18787">[ date ]</a>
              <a href="thread.html#18787">[ thread ]</a>
              <a href="subject.html#18787">[ subject ]</a>
              <a href="author.html#18787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 01 December 2008, Peter Cai wrote:

&gt;<i> As far as I know, some networking device manufactures use this model to
</I>&gt;<i> implement their routers or switches.
</I>&gt;<i> but I have never heard any examples besides that.
</I>
The Postfix mail server uses an architecture of many small processes working 
together:
  <A HREF="http://www.postfix.org/OVERVIEW.html">http://www.postfix.org/OVERVIEW.html</A>

One of the big motivations for this architecture is security: each process 
only needs to run with the minimum privileges it needs to do its work. Just 
because SMTP has to listen to port 25 does not mean the entire mail server 
has to run as root.

&gt;<i> As twisted book says, most networking application use one of these 3
</I>&gt;<i> modes:
</I>&gt;<i>
</I>&gt;<i> 1. handle each connection in a separate operating system process, in
</I>&gt;<i> which case the operating system will take care
</I>&gt;<i> of letting other processes run while one is waiting;
</I>&gt;<i>
</I>&gt;<i> 2. handle each connection in a separate thread1 in which the threading
</I>&gt;<i> framework takes care of letting other threads
</I>&gt;<i> run while one is waiting; or
</I>&gt;<i>
</I>&gt;<i> 3. use non-blocking system calls to handle all connections in one thread.
</I>&gt;<i> (Like twisted or lib-event or just select)
</I>
This describes how multiple connections can be handled (for example Apache 
has several different approaches for this), which is a different issue from 
spreading functionality over different processes (like Postfix does).

Where do you expect the bottleneck to be in your application? Does it have 
to serve a large number of clients? Does it have to send or receive large 
amounts of data? Does it have to do heavy computations? Does it have to get 
data to or from external servers like a DB server or a web service?

&gt;<i> After considering for a while,  I thought there are some faults in the
</I>&gt;<i> multiple parts model:
</I>&gt;<i>
</I>&gt;<i> 1. Writing code to handle message is much more tedious than just doing
</I>&gt;<i> function calls
</I>&gt;<i> 2. It's not very easy to make a pipe line works fine.
</I>
It depends a lot on what you are trying to build and where and how you make 
the splits between differents parts of your application.

For example a function call is simple in the case there is only one thread 
and the called operation will not block. If it does block, you need to add a 
callback mechanism like Twisted's Deferred. Or if there are multiple 
threads, you have to be very careful about which functions you are allowed 
to call while your thread is holding one or more locks. So a function call 
is not so simple anymore when it's part of a complex application...

There are libraries that make communication over a pipe more friendly, such 
as Perspective Broker or Foolscap. This does not mean you can replace any 
arbitrary function call by a remote method call, but it does mean you can 
skip writing (de)serialization code again and again.

No matter which model you choose, dividing your application into 
communicating blocks is a good idea: it is absolutely necessary when using 
multiple processes, if avoids a lot of locking issues when using threads and 
it makes your application easier to test in all three models.

Bye,
		Maarten



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018784.html">[Twisted-Python] When would you considering split a server	application to some physical instance with different logic function?
</A></li>
	<LI>Next message: <A HREF="018786.html">[Twisted-Python] /CTCP user VERSION with twisted ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18787">[ date ]</a>
              <a href="thread.html#18787">[ thread ]</a>
              <a href="subject.html#18787">[ subject ]</a>
              <a href="author.html#18787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
