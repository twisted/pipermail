<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Writing onto txWS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20onto%20txWS&In-Reply-To=CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025723.html">
   <LINK REL="Next"  HREF="025725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Writing onto txWS</H1>
    <B>vinod kumar</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20onto%20txWS&In-Reply-To=CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q%40mail.gmail.com"
       TITLE="[Twisted-Python] Writing onto txWS">vk.86.811 at gmail.com
       </A><BR>
    <I>Fri Jun 29 10:52:06 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="025723.html">[Twisted-Python] deferred graph?
</A></li>
        <LI>Next message: <A HREF="025725.html">[Twisted-Python] Writing onto txWS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25724">[ date ]</a>
              <a href="thread.html#25724">[ thread ]</a>
              <a href="subject.html#25724">[ subject ]</a>
              <a href="author.html#25724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

   I have run and edited the example provided for txWS. The writing part
from server to client browser is shown only as self.transport.write()
inside dataReceived function in websockets.py. how do I write on to the
socket i.e. on to the browser, from a different function inside server
code(server.tac). I'm just starting another xmlrpc server on a thread where
I receive some notifications. I need to forward the same to socket. The
bold point below  is where I want to write on to socket. How can we do
that? Please help me out.
-------------------------------------------------------
import time

from twisted.internet import reactor
from twisted.application import internet
from twisted.application.service import Application, Service
import xmlrpclib
from txws import WebSocketFactory

from src.protocols.websockets import WebSocketServerFactory
from constants import *

class WebSocketService(Service):
    &quot;&quot;&quot;
    A simple service that listens on port 8077 for WebSockets traffic.
    &quot;&quot;&quot;
    def __init__(self):
        self.start_time = time.time()

    def start_service(self, application):
        &quot;&quot;&quot;
        Gets the show on the road. Fires up a factory, binds the port.
        &quot;&quot;&quot;
        echofactory = WebSocketServerFactory(self)
        factory = WebSocketFactory(echofactory)
        ws_server = internet.TCPServer(8077, factory)
        ws_server.setName('ws-tcp')
        ws_server.setServiceParent(application)

    def shutdown(self):
        &quot;&quot;&quot;
        Gracefully shuts down the service.
        &quot;&quot;&quot;
        reactor.callLater(0, reactor.stop)

def listDevices(id):
print &quot;listDevice: %(id)s&quot; % {&quot;id&quot;: str(id)}
 return None

def event(id, address, key, value):
        #websocket.send(&quot;ufffffffffuuuuuu&quot;)
*        #I need to write the below print statement on to browser *
        print &quot;event: %(id)s: %(address)s: %(key)s = %(value)s&quot; % {&quot;id&quot;:
str(id),
&quot;address&quot;: str(address), &quot;key&quot;: str(key), &quot;value&quot;: str(value)}

def aSillyBlockingMethod(x):
    import time
    import xmlrpclib
    time.sleep(2)
    from SimpleXMLRPCServer import SimpleXMLRPCServer
    from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
    from constants import *
    server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT), logRequests=True,
allow_none=True)
    server.register_introspection_functions()
    server.register_multicall_functions()
    print &quot;server started at %s&quot; % str(SERVER_URL)
    server.register_function(listDevices)
    server.register_function(event)
    print 'function also got registered'
    server.serve_forever()
    .............................continues

Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120629/f2581a71/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120629/f2581a71/attachment-0001.htm</A> 
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025723.html">[Twisted-Python] deferred graph?
</A></li>
	<LI>Next message: <A HREF="025725.html">[Twisted-Python] Writing onto txWS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25724">[ date ]</a>
              <a href="thread.html#25724">[ thread ]</a>
              <a href="subject.html#25724">[ subject ]</a>
              <a href="author.html#25724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
