<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] patch for background processing (delay 0)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20patch%20for%20background%20processing%20%28delay%200%29&In-Reply-To=E9DE8A67-A952-11D8-A675-000A95686CD8%40redivi.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007826.html">
   <LINK REL="Next"  HREF="007828.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] patch for background processing (delay 0)</H1>
    <B>Bill la Forge</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20patch%20for%20background%20processing%20%28delay%200%29&In-Reply-To=E9DE8A67-A952-11D8-A675-000A95686CD8%40redivi.com"
       TITLE="[Twisted-Python] patch for background processing (delay 0)">laforge49 at yahoo.co.in
       </A><BR>
    <I>Wed May 19 01:44:06 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007826.html">[Twisted-Python] patch for background processing (delay 0)
</A></li>
        <LI>Next message: <A HREF="007828.html">[Twisted-Python] patch attached--for 0 delay callLater
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7827">[ date ]</a>
              <a href="thread.html#7827">[ thread ]</a>
              <a href="subject.html#7827">[ subject ]</a>
              <a href="author.html#7827">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, we're in the process of doing your third item, at least--making it two-phase.
 
Bill

Bob Ippolito &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">bob at redivi.com</A>&gt; wrote:
In my heapq implementation of a similar timer mechanism (outside of 
Twisted), I did three things that twisted doesn't:
- cancelling a timer doesn't try and remove it from the heapq, instead 
it just marks the timer as dead.
- the time when it's supposed to fire is passed to the fire method so 
that the timer can determine whether it's supposed to actually fire or 
not (in the case of a time change it is actually added to the queue a 
second time without being removed so that I don't have to disrupt the 
heapq).
- it's two phase.. I have a list of newly added timers, and a heapq of 
waiting-to-fire timers. At the end of the iteration I shove the list 
into the heapq and clear the list. This prevents infinite callLater(0, 
...) situations.

-bob


Yahoo! India Matrimony: Find your partner online.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20040519/f9032141/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20040519/f9032141/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007826.html">[Twisted-Python] patch for background processing (delay 0)
</A></li>
	<LI>Next message: <A HREF="007828.html">[Twisted-Python] patch attached--for 0 delay callLater
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7827">[ date ]</a>
              <a href="thread.html#7827">[ thread ]</a>
              <a href="subject.html#7827">[ subject ]</a>
              <a href="author.html#7827">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
