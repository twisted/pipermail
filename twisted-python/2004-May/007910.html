<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Nevow and twisted.enterprise and deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Nevow%20and%20twisted.enterprise%20and%20deferreds&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007908.html">
   <LINK REL="Next"  HREF="007912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Nevow and twisted.enterprise and deferreds</H1>
    <B>Alexander May</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Nevow%20and%20twisted.enterprise%20and%20deferreds&In-Reply-To="
       TITLE="[Twisted-Python] Nevow and twisted.enterprise and deferreds">alex-news at comcast.net
       </A><BR>
    <I>Tue May 25 02:19:13 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007908.html">[Twisted-Python] Writing a Jabber client
</A></li>
        <LI>Next message: <A HREF="007912.html">[Twisted-Python] Nevow and twisted.enterprise and deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7910">[ date ]</a>
              <a href="thread.html#7910">[ thread ]</a>
              <a href="subject.html#7910">[ subject ]</a>
              <a href="author.html#7910">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am using nevow and twisted enterprise and have a situation like this:

dbPool = adbapi.ConnectionPool('myDB')
...
class MyPage(rend.Page):
    ...
    def data_mydata(self, context, data):
        return dbPool.runQuery(&quot;select * from table&quot;)

    def render_myrender(self, context, data):
        ...

Happily, and a bit unexpectedly, it worked and the page rendered correctly.

My issue is if the sql statement fails for some reason the page rendering
just hangs.  Is there an endorsed way to capture the error and render some
html from it?  Right now I'd be happy to see the call stack, as I often do
when an exception occurs.

I traced through the call stack and found this in renderer.py

def _error(failure):
    # FIXME: this should *definitely* do something better
    # doing this leaves the connection hanging, but it's better
    # than nothing.
    print &quot;FAILURE !&quot;,failure 

It looks like the errback is just set to _error.  I don't know if there is a
way to work around this.  I attempted a few things with my own errbacks to
no avail.  I'm sure much of this is due to my less than perfect
understanding of deferreds, and my current bleary eyed state.

I could have sworn that I read something about defereds and nevow, but I
can't seem to find it anymore.

Any help is appreciated.

Thanks,
Alex

PS: I'm using nevow 0.1 and twisted 1.2.









</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007908.html">[Twisted-Python] Writing a Jabber client
</A></li>
	<LI>Next message: <A HREF="007912.html">[Twisted-Python] Nevow and twisted.enterprise and deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7910">[ date ]</a>
              <a href="thread.html#7910">[ thread ]</a>
              <a href="subject.html#7910">[ subject ]</a>
              <a href="author.html#7910">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
