<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A problem with runUntilCurrent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20problem%20with%20runUntilCurrent&In-Reply-To=%3C20040517141457.36366.qmail%40web8310.mail.in.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040306.html">
   <LINK REL="Next"  HREF="040308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A problem with runUntilCurrent</H1>
    <B>Bill la Forge</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20problem%20with%20runUntilCurrent&In-Reply-To=%3C20040517141457.36366.qmail%40web8310.mail.in.yahoo.com%3E"
       TITLE="[Twisted-Python] A problem with runUntilCurrent">laforge49 at yahoo.co.in
       </A><BR>
    <I>Mon May 17 08:14:57 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040306.html">[Twisted-Python] integrating CompStrm//adding background	processing
</A></li>
        <LI>Next message (by thread): <A HREF="040308.html">[Twisted-Python] A problem with runUntilCurrent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40307">[ date ]</a>
              <a href="thread.html#40307">[ thread ]</a>
              <a href="subject.html#40307">[ subject ]</a>
              <a href="author.html#40307">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Glyph,
 
I couldn't resist digging into the code you sent. I noticed that you 
changed the code to use callLater. But there's a problem with that,
I suspect...
 
In base.runUntilCurrent, there's this while loop...
 
        while self._pendingTimedCalls and (self._pendingTimedCalls[-1].time &lt;= now):
            call = self._pendingTimedCalls.pop()
.
.
.
 
This means that when you do a callLater with a delay of 0, 
runUntilCurrent will immediately call the delayed function, which then
calls callLater, and again the delayed function is immediately called, etc.
 
So the net result of the timing test you ran was that the reactor
main loop just hung until the test was completed.
 
So it ran fast. But it really didn't run at all. ;-(
 


Bill la Forge
<A HREF="http://www.geocities.com/laforge49/">http://www.geocities.com/laforge49/</A>
Yahoo! India Matrimony: Find your partner online.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20040517/c8b497e5/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040306.html">[Twisted-Python] integrating CompStrm//adding background	processing
</A></li>
	<LI>Next message (by thread): <A HREF="040308.html">[Twisted-Python] A problem with runUntilCurrent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40307">[ date ]</a>
              <a href="thread.html#40307">[ thread ]</a>
              <a href="subject.html#40307">[ subject ]</a>
              <a href="author.html#40307">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
