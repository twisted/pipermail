<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] (Un)Twisted Clients and Servers (newbie)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%28Un%29Twisted%20Clients%20and%20Servers%20%28newbie%29&In-Reply-To=%3C552CDE24-AF1C-11D8-9DC7-000A95686CD8%40redivi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040434.html">
   <LINK REL="Next"  HREF="040436.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] (Un)Twisted Clients and Servers (newbie)</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%28Un%29Twisted%20Clients%20and%20Servers%20%28newbie%29&In-Reply-To=%3C552CDE24-AF1C-11D8-9DC7-000A95686CD8%40redivi.com%3E"
       TITLE="[Twisted-Python] (Un)Twisted Clients and Servers (newbie)">bob at redivi.com
       </A><BR>
    <I>Wed May 26 07:55:22 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040434.html">[Twisted-Python] (Un)Twisted Clients and Servers (newbie)
</A></li>
        <LI>Next message (by thread): <A HREF="040436.html">[Twisted-Python] (Un)Twisted Clients and Servers (newbie)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40435">[ date ]</a>
              <a href="thread.html#40435">[ thread ]</a>
              <a href="subject.html#40435">[ subject ]</a>
              <a href="author.html#40435">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On May 26, 2004, at 8:26 AM, Bill la Forge wrote:

&gt;<i> Finally wrote my first Twisted-based client and
</I>&gt;<i> server:
</I>&gt;<i> <A HREF="http://compstrm.sourceforge.net/twcs/csprotocol.html">http://compstrm.sourceforge.net/twcs/csprotocol.html</A>
</I>&gt;<i>
</I>&gt;<i> Both the client and server are implemented as light-
</I>&gt;<i> weight processes, where pipes are used for reading
</I>&gt;<i> and writing to remote processes. This allows the
</I>&gt;<i> logic flow to be more straight-line.
</I>&gt;<i>
</I>&gt;<i> I'm also &quot;translucently&quot; switching threads in the
</I>&gt;<i> client, using in-line method calls, so that reads
</I>&gt;<i> and writes to the client do not block the main thread.
</I>&gt;<i>
</I>&gt;<i> (I'm trying to show how much clearer asynchronous
</I>&gt;<i> programming can be using Computational Streams.)
</I>
You really need to take a look at Stackless Python.  It's a much better 
fit for the programming paradigm you want, and tasklet communication is 
WAY faster than thread communication in Python.  I also think that the 
Communicating Sequential Processes model is much nicer than your 
Computational Streams model.

As far as switching between &quot;async&quot; and 'blocking&quot;, why don't you just 
yield BlockingMode and yield AsyncMode?  That would kill two birds with 
one stone.  What's the difference between yielding True, False, and 
None (that is rhetorical, I read the implementation)?  Personally I 
think you should use useful names, even if they are just aliases for 
built-in python datatypes.  For example, the following lines are much 
more self-documenting:

yield Cooperate
yield Stop
yield BlockingMode
yield AsyncMode

When I did a framework very similar to but much more simple than yours, 
I also made it possible to integrate with Deferred (to block on it and 
resume on success/err, and also to return a deferred instead of a 
generator using a function wrapper).

Translucent thread migration isn't the greatest idea, sometimes you 
need to tie data structures to the a threadstate (for C level code.. 
something like database cursors, or whatever).  It's usually better to 
keep the same code on the same thread whenever possible.  But of 
course, it's better just to not use them at all unless you are calling 
some blocking C code, because it doesn't do anything for you with 
Python bytecode.

-bob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2357 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20040526/8720e89e/attachment-0002.bin&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040434.html">[Twisted-Python] (Un)Twisted Clients and Servers (newbie)
</A></li>
	<LI>Next message (by thread): <A HREF="040436.html">[Twisted-Python] (Un)Twisted Clients and Servers (newbie)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40435">[ date ]</a>
              <a href="thread.html#40435">[ thread ]</a>
              <a href="subject.html#40435">[ subject ]</a>
              <a href="author.html#40435">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
