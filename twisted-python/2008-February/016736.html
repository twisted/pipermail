<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] using conch to create a &quot;chrooted&quot; sftp server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20using%20conch%20to%20create%20a%20%22chrooted%22%20sftp%20server&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016735.html">
   <LINK REL="Next"  HREF="016759.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] using conch to create a &quot;chrooted&quot; sftp server</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20using%20conch%20to%20create%20a%20%22chrooted%22%20sftp%20server&In-Reply-To="
       TITLE="[Twisted-Python] using conch to create a &quot;chrooted&quot; sftp server">glyph at divmod.com
       </A><BR>
    <I>Mon Feb  4 22:19:17 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016735.html">[Twisted-Python] Re: wired problem with deferreds
</A></li>
        <LI>Next message: <A HREF="016759.html">[Twisted-Python] using conch to create a &quot;chrooted&quot; sftp server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16736">[ date ]</a>
              <a href="thread.html#16736">[ thread ]</a>
              <a href="subject.html#16736">[ subject ]</a>
              <a href="author.html#16736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'd like to provide file-server access on my home network to a machine 
which hosts a variety of media, without exposing its entire filesystem. 
OpenSSH's sftp-server doesn't allow this, so of course I thought, I 
should use conch.

Completely replacing OpenSSH with Conch is inconvenient, however, and it 
is my only means to administer these machines, so both for the sake of 
easy packaging and making sure I don't make a mistake, I'd really like 
to keep the main SSH daemon in place but replace the sftp channel.

I *think* that means I'd need to do something with sshd_config, 
twisted.conch.ssh.filetransfer, and twisted.internet.stdio.  However, 
I'm a bit at a loss what that thing would be.

Can someone with stronger conch-fu than I give a brief description of 
how this could be done?  Ideally, I'd like some users (myself) to be 
able to access the entire filesystem, but others (the &quot;storage&quot; user, 
who has no shell) to only be able to access /public.  Finally I'd like 
the &quot;guest&quot; user to be able to access /public, but read-only, and 
/public/drop-box read-write.  I don't mind setting up UNIX permissions 
to enforce that last bit.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016735.html">[Twisted-Python] Re: wired problem with deferreds
</A></li>
	<LI>Next message: <A HREF="016759.html">[Twisted-Python] using conch to create a &quot;chrooted&quot; sftp server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16736">[ date ]</a>
              <a href="thread.html#16736">[ thread ]</a>
              <a href="subject.html#16736">[ subject ]</a>
              <a href="author.html#16736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
