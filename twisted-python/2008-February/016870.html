<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Throttling a web2 server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Throttling%20a%20web2%20server&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016868.html">
   <LINK REL="Next"  HREF="016872.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Throttling a web2 server</H1>
    <B>Cameron Dale</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Throttling%20a%20web2%20server&In-Reply-To="
       TITLE="[Twisted-Python] Throttling a web2 server">camrdale at gmail.com
       </A><BR>
    <I>Tue Feb 26 15:12:22 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016868.html">[Twisted-Python] Re: Reactor is left dirty after calling	twisted.mail.smtp.sendmail via trial
</A></li>
        <LI>Next message: <A HREF="016872.html">[Twisted-Python] Throttling a web2 server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16870">[ date ]</a>
              <a href="thread.html#16870">[ thread ]</a>
              <a href="subject.html#16870">[ subject ]</a>
              <a href="author.html#16870">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm relatively new to Twisted, and I was wondering if anyone has had
success with the ThrottlingFactory, or any other methods for
throttling push producers.

I'm attempting to throttle the bandwidth of the web2 server using the
twisted.protocols.policies.ThrottlingFactory. I know this isn't
possible with web1 (see Ticket #601), but it should be possible with
web2 since web2 uses a streaming (push) producer.

The trouble I'm having is that the ThrottlingFactory doesn't throttle
the server at all. I've traced the output, and it seems to be due to
the twisted.internet.tcp.Server also calling the pauseProducing() and
resumeProducing() methods of the producer.

The way the ThrottlingFactory works, is that it schedules periodic
checks of the number of bytes written using reactor.callLater. If too
many bytes have been written, then the producer is paused. However,
these periodic checks always occur when the producer is already paused
by the twisted.internet.tcp.Server, and so have no effect. Later the
producer is resumed by the twisted.internet.tcp.Server, and so the
throttling is non-existent.

Thanks,
Cameron


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016868.html">[Twisted-Python] Re: Reactor is left dirty after calling	twisted.mail.smtp.sendmail via trial
</A></li>
	<LI>Next message: <A HREF="016872.html">[Twisted-Python] Throttling a web2 server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16870">[ date ]</a>
              <a href="thread.html#16870">[ thread ]</a>
              <a href="subject.html#16870">[ subject ]</a>
              <a href="author.html#16870">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
