<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted and python-ogre
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20and%20python-ogre&In-Reply-To=1045831b0802150731l5182b557q6947dd48d54501cf%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016778.html">
   <LINK REL="Next"  HREF="016780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted and python-ogre</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20and%20python-ogre&In-Reply-To=1045831b0802150731l5182b557q6947dd48d54501cf%40mail.gmail.com"
       TITLE="[Twisted-Python] Twisted and python-ogre">exarkun at divmod.com
       </A><BR>
    <I>Fri Feb 15 10:51:27 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016778.html">[Twisted-Python] Twisted and python-ogre
</A></li>
        <LI>Next message: <A HREF="016780.html">[Twisted-Python] Twisted and python-ogre
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16779">[ date ]</a>
              <a href="thread.html#16779">[ thread ]</a>
              <a href="subject.html#16779">[ subject ]</a>
              <a href="author.html#16779">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 15 Feb 2008 10:31:14 -0500, Bernie Roehl &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">broehl at gmail.com</A>&gt; wrote:
&gt;<i>On Thu, Feb 14, 2008 at 1:30 PM, Bernie Roehl &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">broehl at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I'm also wondering what would be the advantages of using a coiterator...?
</I>&gt;<i>
</I>&gt;<i>As an experiment, I tried switching to using a coiterator.  I got a 30%
</I>&gt;<i>increase in framerate!
</I>
Hmmm. :)

&gt;<i>
</I>&gt;<i>My code now looks like this:
</I>&gt;<i>
</I>&gt;<i>class RendererIterator:  # used if usingCoiterator is True
</I>&gt;<i>    def __iter__(self):
</I>&gt;<i>        return self
</I>&gt;<i>    def next(self):
</I>&gt;<i>        ogre.WindowEventUtilities.messagePump()
</I>&gt;<i>        root.renderOneFrame()
</I>&gt;<i>
</I>&gt;<i>from twisted.internet.task import coiterate
</I>&gt;<i>
</I>&gt;<i>renderSystem._initRenderTargets()
</I>&gt;<i>root.clearEventTimes()
</I>&gt;<i>coiterate(RendererIterator())
</I>&gt;<i>reactor.run()
</I>&gt;<i>
</I>&gt;<i>Seems to work okay, but haven't tested it extensively.
</I>&gt;<i>
</I>&gt;<i>Any Twisted-gurus have any comments/suggestions/cautions?
</I>&gt;<i>
</I>
There shouldn't really be any performance difference between using
coiterate and using LoopingCall.  The significant behavioral difference
is that coiterate will call your code (RendererIterator.next in this
case) as fast as it can (with some constraints).  LoopingCall will call
your code no faster than you specify.

So my guess is that the 30% increase in FPS is because your system is
capable of doing that much additional work above what you asked to do
when you used LoopingCall.  If you make a corresponding decrease in the
interval you use with LoopingCall, do you not see any increase in FPS?
If not, then you may be getting a bit of extra performance from coiterate
from its behavior of sometimes calling your code multiple times without
letting the reactor run.  It will do this if it notices your code runs
very quickly and so decides that it can afford to call it again before
giving control back to the reactor to let network events be processed.
This may give you a somewhat unevent frame rate, as compared to LoopingCall,
but that might be suitable for your application.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016778.html">[Twisted-Python] Twisted and python-ogre
</A></li>
	<LI>Next message: <A HREF="016780.html">[Twisted-Python] Twisted and python-ogre
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16779">[ date ]</a>
              <a href="thread.html#16779">[ thread ]</a>
              <a href="subject.html#16779">[ subject ]</a>
              <a href="author.html#16779">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
