<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20things%20I%27ve%20learned%3A%20safer%20callbacks%2C%0A%09better%20t.p.context&In-Reply-To=%3C47251D59-6C53-47E7-BCAE-E5BA1A47670B%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030853.html">
   <LINK REL="Next"  HREF="030855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20things%20I%27ve%20learned%3A%20safer%20callbacks%2C%0A%09better%20t.p.context&In-Reply-To=%3C47251D59-6C53-47E7-BCAE-E5BA1A47670B%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Oct 19 15:54:43 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030853.html">[Twisted-Python] Some things I've learned: safer callbacks, better t.p.context
</A></li>
        <LI>Next message: <A HREF="030855.html">[Twisted-Python] Some things I've learned: safer callbacks, better t.p.context
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30854">[ date ]</a>
              <a href="thread.html#30854">[ thread ]</a>
              <a href="subject.html#30854">[ subject ]</a>
              <a href="author.html#30854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Oct 19, 2016, at 2:47 PM, Itamar Turner-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On Wed, Oct 19, 2016, at 05:45 PM, Itamar Turner-Trauring wrote:
</I>&gt;&gt;<i> Well... I had a test that went through synchronous Deferred path. And yeah, it was easier to write than async test. But it failed to catch a bug that was only in async case. So the problem I see is that supporting both in Deferred means you need twice the number of tests each time you use Deferreds.
</I>&gt;<i> 
</I>&gt;<i> Er, that was unclear. I had a bug that wasn't caught by tests because it passed with sync Deferred and failed with async Deferred callback, and I didn't have tests for latter.
</I>

To be clear: I do see this as a downside to Deferred's architecture; it's a tradeoff.  I see the loose coupling with the event loop as a worthwhile upside.

However, it's totally possible to write the async Deferred callback case as well, just by having the test fire the Deferred after returning to the test body instead of firing it before :-).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20161019/5888a860/attachment-0001.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20161019/5888a860/attachment-0001.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030853.html">[Twisted-Python] Some things I've learned: safer callbacks, better t.p.context
</A></li>
	<LI>Next message: <A HREF="030855.html">[Twisted-Python] Some things I've learned: safer callbacks, better t.p.context
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30854">[ date ]</a>
              <a href="thread.html#30854">[ thread ]</a>
              <a href="subject.html#30854">[ subject ]</a>
              <a href="author.html#30854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
