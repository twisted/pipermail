<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Some things I've learned: safer callbacks, better t.p.context
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20things%20I%27ve%20learned%3A%20safer%20callbacks%2C%0A%20better%20t.p.context&In-Reply-To=%3CCAEeXt4MLmpJ4Z1%3DtDJWva2W_T67U%2BEGk2ZbAJGP1_JUTPJ-9%2BQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030854.html">
   <LINK REL="Next"  HREF="030857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Some things I've learned: safer callbacks, better t.p.context</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20things%20I%27ve%20learned%3A%20safer%20callbacks%2C%0A%20better%20t.p.context&In-Reply-To=%3CCAEeXt4MLmpJ4Z1%3DtDJWva2W_T67U%2BEGk2ZbAJGP1_JUTPJ-9%2BQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Some things I've learned: safer callbacks, better t.p.context">exarkun at twistedmatrix.com
       </A><BR>
    <I>Wed Oct 19 17:25:20 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030854.html">[Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context
</A></li>
        <LI>Next message: <A HREF="030857.html">[Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30855">[ date ]</a>
              <a href="thread.html#30855">[ thread ]</a>
              <a href="subject.html#30855">[ subject ]</a>
              <a href="author.html#30855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It's also possible to write a little bit of testing library code and get
both versions of the test nearly for free.  Unfortunately, I very rarely
see test suites written that way.  I think many people don't realize there
are two cases to handle or believe testing both cases is too expensive for
them (perhaps because they don't realize you can reuse the code for doing
so to save on the cost).

Jean-Paul

On Wed, Oct 19, 2016 at 5:54 PM, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i> On Oct 19, 2016, at 2:47 PM, Itamar Turner-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> On Wed, Oct 19, 2016, at 05:45 PM, Itamar Turner-Trauring wrote:
</I>&gt;<i>
</I>&gt;<i> Well... I had a test that went through synchronous Deferred path. And
</I>&gt;<i> yeah, it was easier to write than async test. But it failed to catch a bug
</I>&gt;<i> that was only in async case. So the problem I see is that supporting both
</I>&gt;<i> in Deferred means you need twice the number of tests each time you use
</I>&gt;<i> Deferreds.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Er, that was unclear. I had a bug that wasn't caught by tests because it
</I>&gt;<i> passed with sync Deferred and failed with async Deferred callback, and I
</I>&gt;<i> didn't have tests for latter.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To be clear: I do see this as a *downside* to Deferred's architecture;
</I>&gt;<i> it's a tradeoff.  I see the loose coupling with the event loop as a
</I>&gt;<i> worthwhile upside.
</I>&gt;<i>
</I>&gt;<i> However, it's totally possible to write the async Deferred callback case
</I>&gt;<i> as well, just by having the test fire the Deferred after returning to the
</I>&gt;<i> test body instead of firing it before :-).
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20161019/b1b750a2/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20161019/b1b750a2/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030854.html">[Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context
</A></li>
	<LI>Next message: <A HREF="030857.html">[Twisted-Python] Some things I've learned: safer callbacks,	better t.p.context
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30855">[ date ]</a>
              <a href="thread.html#30855">[ thread ]</a>
              <a href="subject.html#30855">[ subject ]</a>
              <a href="author.html#30855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
