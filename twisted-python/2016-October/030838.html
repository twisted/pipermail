<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] notifyFinish not being called on Windows 10	Twisted 16.4.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20notifyFinish%20not%20being%20called%20on%20Windows%2010%0A%09Twisted%2016.4.1&In-Reply-To=%3CCAKmUHjZgmhcdwHxjUcePBUO6Lf_tPicMBWTS7c6hTGtmGrpqaw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063297.html">
   <LINK REL="Next"  HREF="063300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] notifyFinish not being called on Windows 10	Twisted 16.4.1</H1>
    <B>John Aherne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20notifyFinish%20not%20being%20called%20on%20Windows%2010%0A%09Twisted%2016.4.1&In-Reply-To=%3CCAKmUHjZgmhcdwHxjUcePBUO6Lf_tPicMBWTS7c6hTGtmGrpqaw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] notifyFinish not being called on Windows 10	Twisted 16.4.1">johnaherne at rocs.co.uk
       </A><BR>
    <I>Mon Oct 17 01:46:56 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063297.html">[Twisted-Python] Endpoint composition syntax
</A></li>
        <LI>Next message (by thread): <A HREF="063300.html">[Twisted-Python] notifyFinish not being called on Windows 10	Twisted 16.4.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30838">[ date ]</a>
              <a href="thread.html#30838">[ thread ]</a>
              <a href="subject.html#30838">[ subject ]</a>
              <a href="author.html#30838">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been running some tests to check some issue and have seen that
notifyFinish is not being called in 16.4.1

This is on Windows 10 using python 2.7.12

Checking back it  is not called 16.3.0 but is in 16.2.0

The test uses some sample code from Twisted web in 60 seconds that sets a
timer to allow the browser to halt the request by using Escape and make
notifyFinish  get called.

Before I did anything else I thought I would check and see if anyone else
was seeing this behaviour.

The code I am using is below:

from twisted.web.resource import Resource
from twisted.web.server import  Site, NOT_DONE_YET
from twisted.internet import reactor


class DelayedResource(Resource):
    def _delayedRender(self, request):
        print 'SEND RESPONSE'
        request.write(&quot;Sorry to keep you waiting.&quot;)
        request.finish()

    def _responseFailed(self, failure, call):
        print 'RESPONSE FAILED', failure
        call.cancel()


    def render_GET(self, request):
        call = reactor.callLater(10, self._delayedRender, request)
        request.notifyFinish().addErrback(self._responseFailed, call)
        return NOT_DONE_YET



resource = Resource()
print 'RESOURCE', resource
resource.putChild(&quot;logme&quot;, DelayedResource())
factory = Site(resource)

print 'FACTORY', factory
reactor.listenTCP(8080, factory)
reactor.run()



-- 
*John Aherne*




*www.rocs.co.uk &lt;<A HREF="http://www.rocs.co.uk">http://www.rocs.co.uk</A>&gt;*
020 7223 7567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20161017/d2717d42/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20161017/d2717d42/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063297.html">[Twisted-Python] Endpoint composition syntax
</A></li>
	<LI>Next message (by thread): <A HREF="063300.html">[Twisted-Python] notifyFinish not being called on Windows 10	Twisted 16.4.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30838">[ date ]</a>
              <a href="thread.html#30838">[ thread ]</a>
              <a href="subject.html#30838">[ subject ]</a>
              <a href="author.html#30838">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
