<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Two main loops, revisited
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Two%20main%20loops%2C%20revisited&In-Reply-To=%3Cop.t2hhzcxpz3pzfc%40nitrogenycs2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048870.html">
   <LINK REL="Next"  HREF="048873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Two main loops, revisited</H1>
    <B>Nitro</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Two%20main%20loops%2C%20revisited&In-Reply-To=%3Cop.t2hhzcxpz3pzfc%40nitrogenycs2%3E"
       TITLE="[Twisted-Python] Two main loops, revisited">nitro at dr-code.org
       </A><BR>
    <I>Tue Nov 27 21:12:37 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048870.html">[Twisted-Python] Two main loops, revisited
</A></li>
        <LI>Next message (by thread): <A HREF="048873.html">[Twisted-Python] Two main loops, revisited
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48871">[ date ]</a>
              <a href="thread.html#48871">[ thread ]</a>
              <a href="subject.html#48871">[ subject ]</a>
              <a href="author.html#48871">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 28.11.2007, 04:56 Uhr, schrieb Bernie Roehl &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">broehl at gmail.com</A>&gt;:

&gt;<i> Hi everyone
</I>&gt;<i>
</I>&gt;<i> So, I've been trying the suggestion that was put forward when I asked my
</I>&gt;<i> earlier question about having two main loops in my game (one for the
</I>&gt;<i> rendering engine, one for Twisted).
</I>&gt;<i>
</I>&gt;<i> Basically, what I'm doing is this:
</I>&gt;<i>
</I>&gt;<i> def renderFrame():
</I>&gt;<i>     ogreLock.acquire()
</I>&gt;<i>     ogre.WindowEventUtilities.messagePump()
</I>&gt;<i>     root.renderOneFrame()
</I>&gt;<i>     ogreLock.release()
</I>&gt;<i>
</I>&gt;<i> renderTask = task.LoopingCall(renderFrame)
</I>&gt;<i> renderTask.start(0.01, False)
</I>&gt;<i> reactor.run()
</I>&gt;<i>
</I>&gt;<i> I'm using the Python implementation of the Project Darkstar client,  
</I>&gt;<i> which is
</I>&gt;<i> built around Twisted.
</I>&gt;<i>
</I>&gt;<i> Unfortunately, I'm running into two problems.
</I>&gt;<i>
</I>&gt;<i> The first is that I appear to be losing messages, which makes me wonder  
</I>&gt;<i> if
</I>&gt;<i> Twisted isn't getting enough cycles and is somehow missing incoming data.
</I>&gt;<i>
</I>&gt;<i> The second is that my application hangs randomly.  When I call  
</I>&gt;<i> renderFrame()
</I>&gt;<i> in a simple loop (no Twisted), everything is rock-solid.
</I>&gt;<i>
</I>&gt;<i> Has anyone done anything like this before (realitime 3D application with
</I>&gt;<i> Twisted), or am I breaking new ground here?
</I>
No new ground here, it works with my 3d engine.

&gt;<i> Any suggestions would be much appreciated...
</I>
You could try to increase 0.01 to something like 0.5 and see if this helps  
the losing messages. I am not really sure how the default twisted reactor  
(i guess on win it's threadedselect) works, but what might be happening is  
that twisted receives some incoming data during your rendering and does  
some kind of processing or whatever. Maybe this is causing random trouble?

-Matthias


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048870.html">[Twisted-Python] Two main loops, revisited
</A></li>
	<LI>Next message (by thread): <A HREF="048873.html">[Twisted-Python] Two main loops, revisited
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48871">[ date ]</a>
              <a href="thread.html#48871">[ thread ]</a>
              <a href="subject.html#48871">[ subject ]</a>
              <a href="author.html#48871">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
