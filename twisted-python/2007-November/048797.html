<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Two main loops
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Two%20main%20loops&In-Reply-To=%3C20071111222758.21558.1359870515.divmod.xquotient.192%40joule.divmod.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048795.html">
   <LINK REL="Next"  HREF="048803.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Two main loops</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Two%20main%20loops&In-Reply-To=%3C20071111222758.21558.1359870515.divmod.xquotient.192%40joule.divmod.com%3E"
       TITLE="[Twisted-Python] Two main loops">glyph at divmod.com
       </A><BR>
    <I>Sun Nov 11 15:27:58 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048795.html">[Twisted-Python] Two main loops
</A></li>
        <LI>Next message (by thread): <A HREF="048803.html">[Twisted-Python] Two main loops
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48797">[ date ]</a>
              <a href="thread.html#48797">[ thread ]</a>
              <a href="subject.html#48797">[ subject ]</a>
              <a href="author.html#48797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 09:06 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jasper at peak.org</A> wrote:
&gt;<i>That depends.  When I send moderately sized objects over Twisted, this 
</I>&gt;<i>approach causes my frame rate to stop while Twisted is busy, and worse 
</I>&gt;<i>makes my GUI non-interactive.  For a game, this is generally 
</I>&gt;<i>unacceptable...
</I>
You can't send &quot;objects&quot; over &quot;Twisted&quot;.

Are you talking about a particular protocol in Twisted?  Serializing 
large objects through PB might take a long time.  In that case, it's not 
&quot;Twisted&quot; that is busy, but your program which is busy serializing that 
object.
&gt;<i>I'm not sure of a good/nice way to deal with this.  Slicing 
</I>&gt;<i>transmissions into a sequence of smaller chunks seems like a fair pain 
</I>&gt;<i>in the ass, but then again the alternatives are punting to another 
</I>&gt;<i>thread/process. :-/
</I>
Actually, punting to another thread or process is still going to slow 
down your rendering, but in a much less deterministic way.  The OS 
scheduler is going to be interrupting the rendering rather than the 
long-running serialization function.  Breaking down the serialization 
work into smaller chunks will allow you to better control what's going 
on.

Sending the work of serializing a large object to another process won't 
work anyway: how are you going to get that large object to the other 
process to serialize in the first place, without serializing it? 
Sending it to another thread probably won't work either, since if the 
object is large it is likely shared (and therefore will involve locking 
large portions of the data structure for long periods of time) and 
Python's GIL will introduce deleterious effects for your framerate 
anyway.

Fundamentally what you are doing here is optimizing your program.  Your 
serialization is slow and it needs to be faster so that it does not 
impact your framerate.  This is a difficult problem, one which is made 
worse by the fact that Python does not have a particularly fast runtime. 
There's no quick answer: you don't need to restructure your main loop, 
you need to think about what your program is spending its time doing.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048795.html">[Twisted-Python] Two main loops
</A></li>
	<LI>Next message (by thread): <A HREF="048803.html">[Twisted-Python] Two main loops
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48797">[ date ]</a>
              <a href="thread.html#48797">[ thread ]</a>
              <a href="subject.html#48797">[ subject ]</a>
              <a href="author.html#48797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
