<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Two main loops
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Two%20main%20loops&In-Reply-To=47389A0A.6080504%40peak.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016295.html">
   <LINK REL="Next"  HREF="016301.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Two main loops</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Two%20main%20loops&In-Reply-To=47389A0A.6080504%40peak.org"
       TITLE="[Twisted-Python] Two main loops">glyph at divmod.com
       </A><BR>
    <I>Mon Nov 12 16:17:47 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="016295.html">[Twisted-Python] Two main loops
</A></li>
        <LI>Next message: <A HREF="016301.html">[Twisted-Python] Two main loops
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16300">[ date ]</a>
              <a href="thread.html#16300">[ thread ]</a>
              <a href="subject.html#16300">[ subject ]</a>
              <a href="author.html#16300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06:23 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jasper at peak.org</A> wrote:
&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>On 09:06 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jasper at peak.org</A> wrote:
</I>
&gt;&gt;<i>You can't send &quot;objects&quot; over &quot;Twisted&quot;.
</I>&gt;<i>
</I>&gt;<i>Sure, not per se.
</I>
&gt;<i>It comes in the twisted installation package, in the module 
</I>&gt;<i>&quot;twisted.spread.pb&quot; ;-)
</I>
There are a number of other ways to communicate with other programs 
using Twisted, some of which involve &quot;sending objects&quot; through other 
protocols.  Obviously PB is a part of Twisted :).
&gt;<i>In hindsight I see a separate process won't work (duh!)  However, I was 
</I>&gt;<i>thinking a thread might work, since the data I'm sending (players get a 
</I>&gt;<i>filtered view of the game's true state) isn't used by anything else, 
</I>&gt;<i>and the data isn't /that/ large. ;-)  Am I missing something low level 
</I>&gt;<i>here?  Would this end up locking bits other than those being 
</I>&gt;<i>serialized?
</I>&gt;<i>
</I>&gt;<i>I suppose it's a bit moot, as I'm reluctant to fiddle with threading.
</I>
If you've got a large object, let's say the state of the game world, and 
you need to lock it for use within a thread, it is likely that other 
things in your program will want to access it before long.  You can only 
have so many &quot;large&quot; objects in a program, after all, and they tend to 
be shared.  The one you referred to, &quot;the game's true state&quot;, is 
obviously going to be accessed by a lot of code unless you have a very 
strange game indeed.
&gt;<i>Optimizing my program (e.g. by sending a bunch of smaller data chunks) 
</I>&gt;<i>feels like the wrong way to go...  Wouldn't it make more sense to hack 
</I>&gt;<i>PB's callRemote() to do this in a more general manner?  I'm thinking 
</I>&gt;<i>somewhere around jelly._Jellier.jelly()'s recursive calls to itself; 
</I>&gt;<i>perhaps using generators, although I'm fuzzy on the implications of 
</I>&gt;<i>recursion + generators...
</I>
callRemote *can't* do this in a general manner and remain compatible 
with PB's existing semantics.  It would be extraordinarily difficult to 
come up with semantics that would make sense for this.  Consider:

  bob = Mob(hitPoints=3)
  jethro = Player()
  jethro.callRemote(&quot;enterSensoryRange&quot;, bob)
  bob.hitPoints += 1

How many hit points does Jethro think Bob has?  Probably 3, but if PB 
might be breaking up serialization work into separate reactor turns for 
you behind your back, then maybe 4.  Given that there's no way to know, 
you don't know whether you have to send Jethro an update to bob's hit 
points or not.

If you can figure out how to answer this question in a way that makes 
sense (i.e. never uses the word &quot;maybe&quot;) then you might be able to 
implement something very cool and useful.  I certainly can't think of a 
way to do it, though.  Good luck!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016295.html">[Twisted-Python] Two main loops
</A></li>
	<LI>Next message: <A HREF="016301.html">[Twisted-Python] Two main loops
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16300">[ date ]</a>
              <a href="thread.html#16300">[ thread ]</a>
              <a href="subject.html#16300">[ subject ]</a>
              <a href="author.html#16300">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
