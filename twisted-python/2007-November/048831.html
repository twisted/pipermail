<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Timing problem with PB Broker's connectionReady
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Timing%20problem%20with%20PB%20Broker%27s%20connectionReady&In-Reply-To=%3Caf7fad5b0711140735p4eb369f7x10fba00f77c6082a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048835.html">
   <LINK REL="Next"  HREF="048834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Timing problem with PB Broker's connectionReady</H1>
    <B>Alan Franzoni</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Timing%20problem%20with%20PB%20Broker%27s%20connectionReady&In-Reply-To=%3Caf7fad5b0711140735p4eb369f7x10fba00f77c6082a%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Timing problem with PB Broker's connectionReady">alan.franzoni.xyz at gmail.com
       </A><BR>
    <I>Wed Nov 14 08:35:09 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048835.html">[Twisted-Python] Re: Porting my Win32 Twisted to Linux Twisted	[SOLVED]
</A></li>
        <LI>Next message (by thread): <A HREF="048834.html">[Twisted-Python] Timing problem with PB Broker's connectionReady
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48831">[ date ]</a>
              <a href="thread.html#48831">[ thread ]</a>
              <a href="subject.html#48831">[ subject ]</a>
              <a href="author.html#48831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everybody,
I'm running Twisted 2.5 on 32-bit Ubuntu Linux (tested with both Feisty and
Gutsy) and python2.5. All packages are the distro's own ones.

I'm experiencing a small problem with the broker's connectionReady method on
the server side of the PB connection. It's not huge and doesn't cause
problems in real-world applications, but it's making more difficult for me
to write a proper unit test.

 According to the docs, connectionReady is called as soon as Banana
negotiation is done. This is true on the client side; connectionReady gets
called before the client can get the root object from the server.

But this is not true on the server side; as you can see from the printout of
the attached file, the client says it already has got the server's root
object but the connectionready hasn't been called on the server yet.

In order to be sure connectionReady has been called on the server side, I
must trigger an additional callRemote.

I suppose there's some sort of caching or lazy behaviour implied here. Did I
do something wrong? How can I force connectionReady to be called on the
server side *before* the client can actually fetch the root object's
remotereference?

Thanks.

-- 
Alan Franzoni &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alan.franzoni.xyz at gmail.com</A>&gt;
-
Togli .xyz dalla mia email per contattarmi.
Remove .xyz from my address in order to contact me.
-
GPG Key Fingerprint (Key ID = FE068F3E):
5C77 9DC3 BD5B 3A28 E7BC 921A 0255 42AA FE06 8F3E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20071114/af325a7c/attachment.html&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testpbserv.py
Type: text/x-python
Size: 2055 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20071114/af325a7c/attachment-0002.py&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048835.html">[Twisted-Python] Re: Porting my Win32 Twisted to Linux Twisted	[SOLVED]
</A></li>
	<LI>Next message (by thread): <A HREF="048834.html">[Twisted-Python] Timing problem with PB Broker's connectionReady
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48831">[ date ]</a>
              <a href="thread.html#48831">[ thread ]</a>
              <a href="subject.html#48831">[ subject ]</a>
              <a href="author.html#48831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
