<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;5.00.2920.0&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;I&nbsp;need&nbsp;to&nbsp;serve&nbsp;a&nbsp;binary&nbsp;file&nbsp;from&nbsp;disk,&nbsp;not&nbsp;<br>
available&nbsp;in&nbsp;the&nbsp;normal&nbsp;folder&nbsp;for&nbsp;static&nbsp;content.&nbsp;In&nbsp;my&nbsp;code&nbsp;so&nbsp;far&nbsp;I've&nbsp;done&nbsp;<br>
something&nbsp;like&nbsp;this&nbsp;in&nbsp;the&nbsp;render-method&nbsp;:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;request.setContentType(&nbsp;....&nbsp;content-type&nbsp;set&nbsp;based&nbsp;<br>
on&nbsp;extension&nbsp;of&nbsp;file&nbsp;to&nbsp;serve&nbsp;)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;f&nbsp;=&nbsp;open(somefile)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;while&nbsp;1:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;f.read(2048)&nbsp;#&nbsp;what's&nbsp;the&nbsp;<br>
correct&nbsp;size&nbsp;to&nbsp;read&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;d:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
break&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;request.write(d)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;request.finish()&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;return&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;It&nbsp;seem&nbsp;to&nbsp;return&nbsp;the&nbsp;data&nbsp;OK,&nbsp;it's&nbsp;visible&nbsp;in&nbsp;the&nbsp;<br>
browser,&nbsp;but&nbsp;exceptions&nbsp;are&nbsp;raised&nbsp;in&nbsp;the&nbsp;server.&nbsp;How&nbsp;do&nbsp;I&nbsp;close&nbsp;this&nbsp;connection&nbsp;<br>
the&nbsp;right&nbsp;way?&nbsp;Should&nbsp;this&nbsp;be&nbsp;used&nbsp;with&nbsp;deferred&nbsp;or&nbsp;something&nbsp;like&nbsp;that?&nbsp;The&nbsp;<br>
files&nbsp;can&nbsp;be&nbsp;huge&nbsp;in&nbsp;size.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;PS!&nbsp;From&nbsp;recent&nbsp;postings&nbsp;in&nbsp;this&nbsp;list&nbsp;is&nbsp;seems&nbsp;as&nbsp;<br>
if&nbsp;Twisted&nbsp;doesn't&nbsp;support&nbsp;compression&nbsp;of&nbsp;content,&nbsp;using&nbsp;gzip&nbsp;etc.&nbsp;Is&nbsp;this&nbsp;true?&nbsp;<br>
This&nbsp;would&nbsp;speed&nbsp;up&nbsp;things&nbsp;considerably.&nbsp;I&nbsp;implemented&nbsp;this&nbsp;in&nbsp;my&nbsp;previous&nbsp;<br>
webserver-project&nbsp;using&nbsp;BaseHTTPServer&nbsp;and&nbsp;on&nbsp;big&nbsp;files&nbsp;the&nbsp;increase&nbsp;in&nbsp;speed&nbsp;<br>
was&nbsp;impressive.&nbsp;Compressing&nbsp;HTML/Plain&nbsp;text/XML&nbsp;etc.,&nbsp;just&nbsp;files&nbsp;known&nbsp;to&nbsp;be&nbsp;<br>
based&nbsp;in&nbsp;plain&nbsp;text,&nbsp;would&nbsp;be&nbsp;a&nbsp;great&nbsp;start.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Best&nbsp;regards,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Thomas&nbsp;Weholt&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
