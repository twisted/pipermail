<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Nov&nbsp;18,&nbsp;2016,&nbsp;at&nbsp;12:13&nbsp;AM,&nbsp;Mark&nbsp;Williams&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:markrwilliams@gmail.com&quot;&nbsp;class=&quot;&quot;&gt;markrwilliams@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Thu,&nbsp;Nov&nbsp;17,&nbsp;2016&nbsp;at&nbsp;11:00:13AM&nbsp;-0800,&nbsp;Glyph&nbsp;Lefkowitz&nbsp;wrote:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;This&nbsp;doesn't&nbsp;appear&nbsp;to&nbsp;be&nbsp;an&nbsp;answer&nbsp;to&nbsp;the&nbsp;&quot;is&nbsp;it&nbsp;a&nbsp;regression&quot;&nbsp;question&nbsp;though&nbsp;;-).&nbsp;&nbsp;I'm&nbsp;still&nbsp;curious&nbsp;what&nbsp;you&nbsp;think&nbsp;there.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;It's&nbsp;not&nbsp;a&nbsp;shipped&nbsp;feature&nbsp;so&nbsp;it&nbsp;can't&nbsp;be&nbsp;a&nbsp;regression.&nbsp;&nbsp;But&nbsp;if&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;feature&nbsp;doesn't&nbsp;work&nbsp;it&nbsp;shouldn't&nbsp;be&nbsp;shipped.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;&quot;doesn't&nbsp;work&quot;&nbsp;is&nbsp;a&nbsp;pretty&nbsp;black-and-white&nbsp;assessment.&nbsp;&nbsp;Are&nbsp;you&nbsp;anticipating&nbsp;a&nbsp;problem&nbsp;with&nbsp;the&nbsp;way&nbsp;the&nbsp;interface&nbsp;is&nbsp;specified&nbsp;that&nbsp;it&nbsp;can't&nbsp;be&nbsp;easily&nbsp;changed?&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;should&nbsp;say&nbsp;up&nbsp;front&nbsp;here&nbsp;that&nbsp;I&nbsp;think&nbsp;I&nbsp;was&nbsp;being&nbsp;too&nbsp;emphatic&nbsp;in&nbsp;my&nbsp;support&nbsp;for&nbsp;UTF-8.&nbsp;&nbsp;We&nbsp;absolutely&nbsp;must&nbsp;support&nbsp;the&nbsp;ability&nbsp;to&nbsp;decode&nbsp;other&nbsp;encodings.&nbsp;&nbsp;I&nbsp;don't&nbsp;think&nbsp;that&nbsp;means&nbsp;we&nbsp;need&nbsp;support&nbsp;for&nbsp;access&nbsp;to&nbsp;raw&nbsp;bytes.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;did&nbsp;consult&nbsp;the&nbsp;policy&nbsp;manual&nbsp;before&nbsp;opening&nbsp;revert&nbsp;PR.&nbsp;&nbsp;Here's&nbsp;what&lt;br&nbsp;class=&quot;&quot;&gt;seemed&nbsp;most&nbsp;relevant:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/trac/wiki/ReviewProcess#Revertingachange&quot;&nbsp;class=&quot;&quot;&gt;https://twistedmatrix.com/trac/wiki/ReviewProcess#Revertingachange&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;This,&nbsp;and&nbsp;the&nbsp;other&nbsp;revert&nbsp;documents,&nbsp;focus&nbsp;on&nbsp;test&nbsp;regressions.&nbsp;&nbsp;But&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;opened&nbsp;the&nbsp;PR&nbsp;because&nbsp;of&nbsp;the&nbsp;above&nbsp;link's&nbsp;mention&nbsp;of&nbsp;&quot;undesirable.&quot;&lt;br&nbsp;class=&quot;&quot;&gt;Is&nbsp;there&nbsp;a&nbsp;better&nbsp;resource&nbsp;that&nbsp;explains&nbsp;when&nbsp;a&nbsp;revert&nbsp;is&nbsp;appropriate?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Test&nbsp;regressions&nbsp;are&nbsp;listed&nbsp;because&nbsp;they're&nbsp;unambiguously&nbsp;cause&nbsp;for&nbsp;a&nbsp;revert;&nbsp;&quot;undesirable&quot;&nbsp;is&nbsp;intentionally&nbsp;vague&nbsp;because&nbsp;we&nbsp;might&nbsp;decide&nbsp;to&nbsp;revert&nbsp;a&nbsp;thing&nbsp;for&nbsp;no&nbsp;reason.&nbsp;&nbsp;I&nbsp;guess&nbsp;opening&nbsp;a&nbsp;PR&nbsp;for&nbsp;a&nbsp;discussion&nbsp;like&nbsp;this&nbsp;is&nbsp;reasonable.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;could&lt;/i&gt;&nbsp;be&nbsp;considered&nbsp;an&nbsp;incompatible&nbsp;interface&nbsp;change;&nbsp;I'm&nbsp;honestly&nbsp;not&nbsp;sure&nbsp;about&nbsp;the&nbsp;exact&nbsp;type&nbsp;signatures&nbsp;of&nbsp;various&nbsp;methods&nbsp;to&nbsp;say&nbsp;whether&nbsp;it&nbsp;is&nbsp;or&nbsp;not.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;The&nbsp;_general_&nbsp;issue&nbsp;is&nbsp;unfixable,&nbsp;except&nbsp;to&nbsp;use&nbsp;chardet&nbsp;upon&nbsp;encoding&nbsp;errors.&nbsp;&nbsp;As&nbsp;far&nbsp;as&nbsp;I'm&nbsp;aware,&nbsp;IRC&nbsp;simply&nbsp;doesn't&nbsp;have&nbsp;the&nbsp;ability&nbsp;to&nbsp;specify&nbsp;an&nbsp;encoding.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;IRCv3&nbsp;(&lt;a&nbsp;href=&quot;http://ircv3.net/&quot;&nbsp;class=&quot;&quot;&gt;http://ircv3.net/&lt;/a&gt;)&nbsp;is&nbsp;attempting&nbsp;to&nbsp;mandate&nbsp;utf-8&nbsp;for&nbsp;certain&lt;br&nbsp;class=&quot;&quot;&gt;protocol&nbsp;elements&nbsp;(usernames&nbsp;and&nbsp;metadata).&nbsp;&nbsp;But&nbsp;it&nbsp;needs&nbsp;to&nbsp;be&lt;br&nbsp;class=&quot;&quot;&gt;backwards&nbsp;compatible,&nbsp;so&nbsp;it&nbsp;can't&nbsp;mandate&nbsp;it&nbsp;for&nbsp;all&nbsp;messages.&nbsp;&nbsp;And&nbsp;it&lt;br&nbsp;class=&quot;&quot;&gt;is&nbsp;not&nbsp;IRC&nbsp;as&nbsp;specified&nbsp;by&nbsp;RFC1459.&nbsp;&nbsp;So&nbsp;no,&nbsp;no&nbsp;defined&nbsp;encoding.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;Not&nbsp;only&nbsp;&quot;no&nbsp;defined&nbsp;encoding&quot;&nbsp;but&nbsp;also&nbsp;no&nbsp;mechanism&nbsp;like&nbsp;HTTP&nbsp;headers&nbsp;to&nbsp;say&nbsp;what&nbsp;the&nbsp;encoding&nbsp;is.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;More&nbsp;importantly,&nbsp;IRC&nbsp;doesn't&nbsp;specify&nbsp;an&nbsp;encoding&nbsp;and&nbsp;it&nbsp;is&nbsp;also&nbsp;responsible&nbsp;for&nbsp;transmitting&nbsp;textual&nbsp;data&nbsp;intended&nbsp;to&nbsp;be&nbsp;input&nbsp;and&nbsp;consumed&nbsp;by&nbsp;humans.&nbsp;&nbsp;If&nbsp;you&nbsp;can't&nbsp;decode&nbsp;it,&nbsp;faithfully&nbsp;replicating&nbsp;the&nbsp;on-the-wire&nbsp;encoding&nbsp;is&nbsp;of&nbsp;limited&nbsp;utility.&nbsp;&nbsp;You&nbsp;can't&nbsp;write&nbsp;any&nbsp;code&nbsp;to&nbsp;process&nbsp;the&nbsp;data.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;can&nbsp;write&nbsp;code&nbsp;that&nbsp;uses&nbsp;the&nbsp;encoding&nbsp;that&nbsp;makes&nbsp;sense&nbsp;for&nbsp;my&nbsp;use&lt;br&nbsp;class=&quot;&quot;&gt;case.&nbsp;&nbsp;I&nbsp;can't&nbsp;if&nbsp;we&nbsp;mandate&nbsp;utf-8,&nbsp;even&nbsp;when&nbsp;I&nbsp;receive&nbsp;perfectly&lt;br&nbsp;class=&quot;&quot;&gt;valid&nbsp;IRC&nbsp;messages.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Sorry,&nbsp;I&nbsp;haven't&nbsp;been&nbsp;separating&nbsp;out&nbsp;my&nbsp;lines&nbsp;of&nbsp;reasoning&nbsp;clearly&nbsp;enough&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;points&nbsp;are,&nbsp;separately:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&nbsp;class=&quot;MailOutline&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;IRC&nbsp;is&nbsp;text.&nbsp;It's&nbsp;nonsensical&nbsp;to&nbsp;process&nbsp;it&nbsp;as&nbsp;bytes,&nbsp;because&nbsp;you&nbsp;can't&nbsp;process&nbsp;it&nbsp;as&nbsp;bytes.&nbsp;&nbsp;This&nbsp;is&nbsp;separate&nbsp;from&nbsp;the&nbsp;question&nbsp;of&nbsp;&quot;what&nbsp;encoding&nbsp;is&nbsp;IRC&quot;.&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;UTF-8&nbsp;is&nbsp;good.&nbsp;There&nbsp;should&nbsp;be&nbsp;gradual&nbsp;social&nbsp;pressure&nbsp;to&nbsp;use&nbsp;UTF-8&nbsp;everywhere&nbsp;(I'm&nbsp;a&nbsp;fan&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://utf8everywhere.org&quot;&nbsp;class=&quot;&quot;&gt;http://utf8everywhere.org&lt;/a&gt;).&nbsp;&nbsp;This&nbsp;is&nbsp;especially&nbsp;true&nbsp;in&nbsp;protocols&nbsp;like&nbsp;IRC&nbsp;and&nbsp;filenames&nbsp;where&nbsp;there's&nbsp;no&nbsp;mechanism&nbsp;to&nbsp;specify&nbsp;an&nbsp;encoding&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;correctly&nbsp;decoded.&nbsp;&nbsp;Therefore:&lt;/li&gt;&lt;ol&nbsp;class=&quot;&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;an&nbsp;initial&nbsp;release&lt;/i&gt;&nbsp;which&nbsp;features&nbsp;UTF-8&nbsp;only&nbsp;is&nbsp;fine;&nbsp;therefore&nbsp;there's&nbsp;no&nbsp;need&nbsp;to&nbsp;do&nbsp;a&nbsp;revert.&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;defaulting&lt;/i&gt;&nbsp;to&nbsp;UTF-8&nbsp;is&nbsp;reasonable&nbsp;for&nbsp;the&nbsp;forseeable&nbsp;future;&nbsp;users&nbsp;should&nbsp;only&nbsp;change&nbsp;this&nbsp;if&nbsp;they&nbsp;know&nbsp;that&nbsp;they&nbsp;want&nbsp;something&nbsp;unusual.&lt;/li&gt;&lt;/ol&gt;&lt;li&nbsp;class=&quot;&quot;&gt;IRC&nbsp;is&nbsp;an&nbsp;incompatible&nbsp;and&nbsp;broken&nbsp;wasteland;&nbsp;thanks&nbsp;to&nbsp;your&nbsp;quantitative&nbsp;research&nbsp;we&nbsp;know&nbsp;exactly&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;how&lt;/i&gt;&nbsp;broken.&nbsp;&nbsp;Therefore:&lt;/li&gt;&lt;ol&nbsp;class=&quot;&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;&quot;support&nbsp;alternate&nbsp;encodings&quot;&nbsp;is&nbsp;a&nbsp;valuable&nbsp;feature.&nbsp;&nbsp;Supporting&nbsp;point&nbsp;2.1,&nbsp;this&nbsp;feature&nbsp;can&nbsp;be&nbsp;added&nbsp;on&nbsp;at&nbsp;any&nbsp;later&nbsp;point,&nbsp;making&nbsp;a&nbsp;revert&nbsp;of&nbsp;the&nbsp;present&nbsp;implementation&nbsp;unnecessary.&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;We&nbsp;can,&nbsp;and&nbsp;should,&nbsp;just&nbsp;go&nbsp;ahead&nbsp;and&nbsp;add&nbsp;support&nbsp;for&nbsp;alternate&nbsp;(per-server,&nbsp;per-channel,&nbsp;per-user)&nbsp;default&nbsp;and&nbsp;fallback&nbsp;encodings.&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;We&nbsp;should&nbsp;always&nbsp;have&nbsp;a&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;fallback&nbsp;encoding&lt;/i&gt;,&nbsp;since&nbsp;blowing&nbsp;up&nbsp;on&nbsp;&quot;invalid&quot;&nbsp;data&nbsp;on&nbsp;a&nbsp;protocol&nbsp;where&nbsp;there's&nbsp;no&nbsp;standard&nbsp;to&nbsp;say&nbsp;what&nbsp;is&nbsp;or&nbsp;isn't&nbsp;valid&nbsp;doesn't&nbsp;seem&nbsp;very&nbsp;helpful.&lt;/li&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;If&nbsp;chardet&nbsp;is&nbsp;installed,&nbsp;can&nbsp;it&nbsp;be&nbsp;specified&nbsp;as&nbsp;an&nbsp;encoding&nbsp;itself?&nbsp;&nbsp;Like,&nbsp;b&quot;garbage&nbsp;garbage&quot;.decode(&quot;chardet&quot;)?&nbsp;&nbsp;This&nbsp;would&nbsp;make&nbsp;it&nbsp;possible&nbsp;to&nbsp;use&nbsp;without&nbsp;binding&nbsp;to&nbsp;the&nbsp;library;&nbsp;you&nbsp;just&nbsp;specify&nbsp;an&nbsp;encoding.&nbsp;&nbsp;(The&nbsp;library&nbsp;is&nbsp;LGPL2.1&nbsp;which&nbsp;makes&nbsp;it&nbsp;a&nbsp;problematic&nbsp;dependency&nbsp;for&nbsp;Twisted,&nbsp;even&nbsp;optionally.)&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;It&nbsp;does&nbsp;not,&nbsp;but&nbsp;if&nbsp;that&nbsp;makes&nbsp;it&nbsp;more&nbsp;generally&nbsp;usable&nbsp;you've&nbsp;given&nbsp;a&lt;br&nbsp;class=&quot;&quot;&gt;great&nbsp;idea&nbsp;for&nbsp;my&nbsp;next&nbsp;PyPI&nbsp;package&nbsp;:)&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Let&nbsp;me&nbsp;know&nbsp;:).&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;POSIX&nbsp;has&nbsp;an&nbsp;internally&nbsp;inconsistent&nbsp;model&nbsp;of&nbsp;how&nbsp;encodings&nbsp;work;&nbsp;they&nbsp;cannot&nbsp;possibly&nbsp;function&nbsp;correctly.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;First&nbsp;off,&nbsp;let&nbsp;me&nbsp;put&nbsp;to&nbsp;rest&nbsp;the&nbsp;lie&nbsp;that&nbsp;paths&nbsp;are&nbsp;&quot;really&quot;&nbsp;bytes.&nbsp;&nbsp;Paths&nbsp;are&nbsp;text.&nbsp;&nbsp;They&nbsp;must&nbsp;be&nbsp;text&nbsp;because&nbsp;they&nbsp;have&nbsp;to&nbsp;transit&nbsp;through&nbsp;text-processing&nbsp;systems,&nbsp;such&nbsp;pas&nbsp;windowing&nbsp;systems&nbsp;and&nbsp;and&nbsp;terminal&nbsp;programs.&nbsp;&nbsp;Users&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;visually&nbsp;identify&nbsp;and&nbsp;select&nbsp;them,&nbsp;as&nbsp;text.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;This&nbsp;is&nbsp;significant&nbsp;because&nbsp;certain&nbsp;operations&nbsp;on&nbsp;paths-as-bytes&nbsp;will&nbsp;inevitably&nbsp;fail.&nbsp;&nbsp;You&nbsp;can't&nbsp;type&nbsp;an&nbsp;invalidly-encoded&nbsp;pathname&nbsp;in&nbsp;your&nbsp;shell.&nbsp;&nbsp;If&nbsp;two&nbsp;paths&nbsp;differ&nbsp;by&nbsp;an&nbsp;incorrectly-encoded&nbsp;character&nbsp;you&nbsp;won't&nbsp;be&nbsp;able&nbsp;to&nbsp;visually&nbsp;distinguish&nbsp;between&nbsp;them&nbsp;without&nbsp;inspecting&nbsp;their&nbsp;contents.&nbsp;&nbsp;This&nbsp;is&nbsp;why&nbsp;OS&nbsp;X&nbsp;forces&nbsp;all&nbsp;paths&nbsp;to&nbsp;be&nbsp;UTF-8,&nbsp;and&nbsp;why&nbsp;paths&nbsp;are&nbsp;&quot;really&quot;&nbsp;unicode&nbsp;(UCS-2,&nbsp;precisely)&nbsp;on&nbsp;Windows.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;There's&nbsp;POSIX&nbsp;metadata&nbsp;which&nbsp;allows&nbsp;you&nbsp;to&nbsp;select&nbsp;an&nbsp;encoding;&nbsp;locale.&nbsp;&nbsp;But,&nbsp;locale&nbsp;is&nbsp;per-process&nbsp;state,&nbsp;and,&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;you&nbsp;can&nbsp;have&nbsp;multiple&nbsp;filesystems&nbsp;mounted&nbsp;simultaneously,&nbsp;it's&nbsp;impossible&nbsp;for&nbsp;this&nbsp;metadata&nbsp;to&nbsp;fully&nbsp;describe&nbsp;the&nbsp;state&nbsp;of&nbsp;any&nbsp;arbitrary&nbsp;path.&nbsp;&nbsp;The&nbsp;standard&nbsp;metadata&nbsp;is&nbsp;insufficient.&nbsp;&nbsp;This&nbsp;is&nbsp;why&nbsp;UI&nbsp;toolkits&nbsp;like&nbsp;GTK+&nbsp;have&nbsp;adopted&nbsp;the&nbsp;policy&nbsp;of&nbsp;&quot;ignore&nbsp;the&nbsp;locale,&nbsp;paths&nbsp;are&nbsp;UTF-8,&nbsp;deal&nbsp;with&nbsp;it&nbsp;🕶&quot;.&nbsp;&nbsp;As&nbsp;far&nbsp;back&nbsp;as&nbsp;GTK2,&nbsp;non-utf-8&nbsp;path&nbsp;selection&nbsp;has&nbsp;been&nbsp;deprecated:&nbsp;&lt;&lt;a&nbsp;href=&quot;https://developer.gnome.org/gtk2/stable/GtkFileSelection.html#gtk-file-selection-set-filename&quot;&nbsp;class=&quot;&quot;&gt;https://developer.gnome.org/gtk2/stable/GtkFileSelection.html#gtk-file-selection-set-filename&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;https://developer.gnome.org/gtk2/stable/GtkFileSelection.html#gtk-file-selection-set-filename&quot;&nbsp;class=&quot;&quot;&gt;https://developer.gnome.org/gtk2/stable/GtkFileSelection.html#gtk-file-selection-set-filename&lt;/a&gt;&gt;&gt;.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;When&nbsp;I&nbsp;received&nbsp;Arabic&nbsp;PDFs&nbsp;on&nbsp;a&nbsp;FAT16&nbsp;USB&nbsp;drive&nbsp;with&nbsp;filenames&nbsp;in&lt;br&nbsp;class=&quot;&quot;&gt;CP1256,&nbsp;I&nbsp;had&nbsp;to&nbsp;switch&nbsp;mlterm&nbsp;to&nbsp;that&nbsp;particular&nbsp;code&nbsp;page&nbsp;to&nbsp;read&lt;br&nbsp;class=&quot;&quot;&gt;the&nbsp;directory&nbsp;listings&nbsp;so&nbsp;I&nbsp;could&nbsp;use&nbsp;convmv&nbsp;to&nbsp;convert&nbsp;them&nbsp;to&nbsp;UTF-8.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;no&nbsp;question&nbsp;that&nbsp;your&nbsp;life&nbsp;has&nbsp;been&nbsp;hard,&nbsp;and&nbsp;that&nbsp;a&nbsp;wide&nbsp;array&nbsp;of&nbsp;people&nbsp;have&nbsp;made&nbsp;bad&nbsp;decisions&nbsp;that&nbsp;contribute&nbsp;to&nbsp;your&nbsp;difficulties.&nbsp;:-)&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I'll&nbsp;note&nbsp;that&nbsp;this&nbsp;was&nbsp;impossible&nbsp;to&nbsp;do&nbsp;with&nbsp;a&nbsp;GTK-based&nbsp;tool.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Opinionated&nbsp;software&nbsp;is&nbsp;fine&nbsp;when&nbsp;it&nbsp;operates&nbsp;at&nbsp;the&nbsp;point&nbsp;of&nbsp;user&lt;br&nbsp;class=&quot;&quot;&gt;interpretation.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;mlterm&nbsp;had&nbsp;to&nbsp;decode&nbsp;the&nbsp;stuff&nbsp;as&nbsp;unicode&nbsp;so&nbsp;X&nbsp;could&nbsp;display&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;graphemes.&nbsp;&nbsp;But&nbsp;if&nbsp;Linux's&nbsp;FAT16&nbsp;implementation&nbsp;decided&nbsp;that&nbsp;we&nbsp;should&lt;br&nbsp;class=&quot;&quot;&gt;all&nbsp;quit&nbsp;whining&nbsp;and&nbsp;use&nbsp;UTF-8,&nbsp;even&nbsp;though&nbsp;no&nbsp;other&nbsp;FAT16&lt;br&nbsp;class=&quot;&quot;&gt;implementation&nbsp;requires&nbsp;this,&nbsp;it&nbsp;wouldn't&nbsp;have&nbsp;mattered&nbsp;what&nbsp;mlterm&lt;br&nbsp;class=&quot;&quot;&gt;could&nbsp;or&nbsp;couldn't&nbsp;do&nbsp;and&nbsp;I&nbsp;would&nbsp;have&nbsp;lost&nbsp;those&nbsp;files.&nbsp;&nbsp;And&nbsp;it&nbsp;would&lt;br&nbsp;class=&quot;&quot;&gt;have&nbsp;been&nbsp;incredibly&nbsp;confounding&nbsp;to&nbsp;me,&nbsp;because&nbsp;everything&nbsp;would&nbsp;have&lt;br&nbsp;class=&quot;&quot;&gt;agreed&nbsp;that&nbsp;I&nbsp;had&nbsp;a&nbsp;FAT16&nbsp;partition,&nbsp;but&nbsp;only&nbsp;Linux&nbsp;would&nbsp;have&lt;br&nbsp;class=&quot;&quot;&gt;mysteriously&nbsp;failed&nbsp;to&nbsp;read&nbsp;it.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;But,&nbsp;Linux's&nbsp;FAT16&nbsp;driver&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;has&lt;/i&gt;&nbsp;decided&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;correct&nbsp;way&nbsp;to&nbsp;solve&nbsp;your&nbsp;problem&nbsp;with&nbsp;current&nbsp;Linux&nbsp;(I&nbsp;don't&nbsp;know&nbsp;if&nbsp;this&nbsp;was&nbsp;possible&nbsp;at&nbsp;the&nbsp;time)&nbsp;would&nbsp;be&nbsp;to&nbsp;address&nbsp;it&nbsp;with&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;mount&lt;/i&gt;,&nbsp;not&nbsp;special&nbsp;user-space&nbsp;software.&nbsp;&nbsp;Specifically,&nbsp;I&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;think&lt;/i&gt;&nbsp;it&nbsp;would&nbsp;be&nbsp;something&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;div&gt;mount&nbsp;-t&nbsp;fat&nbsp;-o&nbsp;fat=16,iocharset=utf-8,codepage=1256&nbsp;/dev/disk/by-label/arabic.msdos&nbsp;/media/arabic.msdos&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;Now&nbsp;all&nbsp;your&nbsp;GTK+&nbsp;software&nbsp;works,&nbsp;too,&nbsp;because&nbsp;you're&nbsp;not&nbsp;trying&nbsp;to&nbsp;reconcile&nbsp;your&nbsp;legacy&nbsp;format&nbsp;support&nbsp;at&nbsp;the&nbsp;application&nbsp;level.&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;In&nbsp;other&nbsp;words,&nbsp;the&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;thing&lt;/i&gt;&nbsp;those&nbsp;pathnames&nbsp;are&nbsp;encoding&nbsp;is&nbsp;text;&nbsp;the&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;way&lt;/i&gt;&nbsp;they're&nbsp;being&nbsp;encoded&nbsp;is&nbsp;codepage&nbsp;1256&nbsp;on&nbsp;the&nbsp;platter.&nbsp;&nbsp;However,&nbsp;the&nbsp;interface&nbsp;between&nbsp;the&nbsp;OS&nbsp;and&nbsp;the&nbsp;application&nbsp;can&nbsp;still&nbsp;be&nbsp;&quot;text&quot;&nbsp;(i.e.&nbsp;UTF-8)&nbsp;without&nbsp;breaking&nbsp;the&nbsp;on-disk&nbsp;&quot;bytes&quot;&nbsp;(cp1256).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Similarly,&nbsp;Twisted&nbsp;provides&nbsp;an&nbsp;IRC&nbsp;*library*.&nbsp;&nbsp;It's&nbsp;a&nbsp;Python&nbsp;API,&nbsp;not&lt;br&nbsp;class=&quot;&quot;&gt;irssi&nbsp;or&nbsp;Textual.&nbsp;&nbsp;The&nbsp;ultimate&nbsp;consumer&nbsp;of&nbsp;what&nbsp;passes&nbsp;through&nbsp;it&nbsp;may&lt;br&nbsp;class=&quot;&quot;&gt;be&nbsp;a&nbsp;human,&nbsp;but&nbsp;the&nbsp;next&nbsp;consumer&nbsp;might&nbsp;not&nbsp;be.&nbsp;&nbsp;What&nbsp;if&nbsp;I&nbsp;want&nbsp;to&lt;br&nbsp;class=&quot;&quot;&gt;write&nbsp;write&nbsp;a&nbsp;bot&nbsp;that&nbsp;bridges&nbsp;two&nbsp;IRC&nbsp;networks?&nbsp;&nbsp;What&nbsp;if&nbsp;I&nbsp;want&nbsp;to&lt;br&nbsp;class=&quot;&quot;&gt;dump&nbsp;the&nbsp;raw&nbsp;IRC&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;so&nbsp;I&nbsp;can&nbsp;train&nbsp;a&nbsp;tensorflow&nbsp;version&nbsp;of&lt;br&nbsp;class=&quot;&quot;&gt;chardet?&nbsp;&nbsp;There's&nbsp;nothing&nbsp;in&nbsp;the&nbsp;IRC&nbsp;specification&nbsp;that&nbsp;prevents&nbsp;me&lt;br&nbsp;class=&quot;&quot;&gt;from&nbsp;doing&nbsp;this,&nbsp;but&nbsp;there&nbsp;will&nbsp;be&nbsp;something&nbsp;in&nbsp;Twisted's&lt;br&nbsp;class=&quot;&quot;&gt;implementation&nbsp;that&nbsp;does.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;current&nbsp;release,&nbsp;yes.&nbsp;&nbsp;But&nbsp;in&nbsp;a&nbsp;future&nbsp;release:&nbsp;no,&nbsp;you&nbsp;can't&nbsp;just&nbsp;bridge&nbsp;arbitrary&nbsp;bytes&nbsp;between&nbsp;two&nbsp;networks&nbsp;and&nbsp;expect&nbsp;them&nbsp;to&nbsp;work.&nbsp;&nbsp;Those&nbsp;networks&nbsp;(or&nbsp;channels,&nbsp;or&nbsp;users)&nbsp;might&nbsp;have&nbsp;different&nbsp;implicit&nbsp;encoding&nbsp;rules;&nbsp;which,&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;by&nbsp;default&nbsp;and&nbsp;only&nbsp;by&nbsp;default&lt;/i&gt;,&nbsp;should&nbsp;be&nbsp;utf-8.&nbsp;&nbsp;In&nbsp;a&nbsp;multi-encoding&nbsp;world,&nbsp;you&nbsp;may&nbsp;need&nbsp;to&nbsp;transcode&nbsp;between&nbsp;them&nbsp;to&nbsp;properly&nbsp;bridge;&nbsp;this&nbsp;is&nbsp;a&nbsp;consequence&nbsp;of&nbsp;the&nbsp;fact&nbsp;that&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;eventually&lt;/i&gt;&nbsp;you're&nbsp;presenting&nbsp;this&nbsp;data&nbsp;as&nbsp;text&nbsp;to&nbsp;human&nbsp;eyeballs.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;While&nbsp;a&nbsp;mis-encoded&nbsp;path&nbsp;is&nbsp;a&nbsp;failure,&nbsp;there&nbsp;are&nbsp;ways&nbsp;to&nbsp;treat&nbsp;paths&nbsp;as&nbsp;a&nbsp;data&nbsp;structure&nbsp;to&nbsp;allow&nbsp;for&nbsp;only&nbsp;partial&nbsp;failure.&nbsp;&nbsp;They're&nbsp;a&nbsp;data&nbsp;structure&nbsp;because&nbsp;they&nbsp;must&nbsp;be&nbsp;in&nbsp;an&nbsp;encoding&nbsp;with&nbsp;no&nbsp;NULLs,&nbsp;which&nbsp;encode&nbsp;SOLIDUS&nbsp;as&nbsp;the&nbsp;octet&nbsp;0x2F,&nbsp;and&nbsp;so&nbsp;you&nbsp;can&nbsp;fail&nbsp;on&nbsp;each&nbsp;individual&nbsp;path&nbsp;component;&nbsp;if&nbsp;you're&nbsp;lucky&nbsp;you&nbsp;don't&nbsp;need&nbsp;to&nbsp;present&nbsp;all&nbsp;the&nbsp;components&nbsp;in&nbsp;the&nbsp;path&nbsp;to&nbsp;manipulate&nbsp;it.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;We&nbsp;don't&nbsp;do&nbsp;this&nbsp;in&nbsp;Twisted&nbsp;right&nbsp;now&nbsp;(as&nbsp;I&nbsp;was&nbsp;somewhat&nbsp;disappointed&nbsp;to&nbsp;discover&nbsp;while&nbsp;writing&nbsp;this),&nbsp;but&nbsp;we&nbsp;should,&nbsp;and&nbsp;more&nbsp;importantly&nbsp;we&nbsp;could;&nbsp;FilePath(b&quot;\xff&quot;).child(&quot;valid&quot;).asTextMode().basename()&nbsp;could&nbsp;return&nbsp;u&quot;valid&quot;&nbsp;rather&nbsp;than&nbsp;returning&nbsp;an&nbsp;encoding&nbsp;error.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/trac/ticket/8908&quot;&nbsp;class=&quot;&quot;&gt;https://twistedmatrix.com/trac/ticket/8908&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;filing&nbsp;that!&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;To&nbsp;bring&nbsp;all&nbsp;this&nbsp;back&nbsp;to&nbsp;IRC&nbsp;though:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Mis-encoded&nbsp;IRC&nbsp;messages&nbsp;are&nbsp;not&nbsp;data&nbsp;structures;&nbsp;they're&nbsp;just&nbsp;strings.&nbsp;&nbsp;There's&nbsp;no&nbsp;opportunity&nbsp;for&nbsp;partial&nbsp;recovery&nbsp;beyond&nbsp;chardet&nbsp;and&nbsp;mojibake.&nbsp;&nbsp;In&nbsp;most&nbsp;cases,&nbsp;partial&nbsp;recovery&nbsp;requires&nbsp;configuration.&nbsp;&nbsp;Per-channel&nbsp;encodings,&nbsp;for&nbsp;example,&nbsp;or&nbsp;per-user,&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;agreed&nbsp;upon&nbsp;out&nbsp;of&nbsp;band,&nbsp;in&nbsp;ways&nbsp;that&nbsp;IRC&nbsp;does&nbsp;not&nbsp;expose&nbsp;as&nbsp;metadata.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;It&nbsp;would&nbsp;also&nbsp;have&nbsp;to&nbsp;be&nbsp;per&nbsp;server,&nbsp;since&nbsp;any&nbsp;two&nbsp;channels&nbsp;might&lt;br&nbsp;class=&quot;&quot;&gt;disagree&nbsp;on&nbsp;the&nbsp;encoding&nbsp;of&nbsp;their&nbsp;topics.&nbsp;&nbsp;And&nbsp;the&nbsp;welcome&nbsp;message&lt;br&nbsp;class=&quot;&quot;&gt;might&nbsp;be&nbsp;in&nbsp;its&nbsp;own&nbsp;encoding.&nbsp;And,&nbsp;and,&nbsp;and...&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Right.&nbsp;&nbsp;Per-server&nbsp;default,&nbsp;and&nbsp;then&nbsp;per-channel&nbsp;and&nbsp;per-(privmsg)-user&nbsp;is&nbsp;about&nbsp;as&nbsp;precise&nbsp;as&nbsp;you&nbsp;can&nbsp;get&nbsp;though.&nbsp;&nbsp;In&nbsp;principle,&nbsp;it's&nbsp;possible&nbsp;that&nbsp;different&nbsp;segments&nbsp;of&nbsp;the&nbsp;same&nbsp;topic&nbsp;could&nbsp;be&nbsp;in&nbsp;different&nbsp;encodings,&nbsp;different&nbsp;words&nbsp;in&nbsp;the&nbsp;same&nbsp;sentence!&nbsp;&nbsp;In&nbsp;practice&nbsp;though&nbsp;that&nbsp;just&nbsp;means&nbsp;somebody&nbsp;screwed&nbsp;up&nbsp;and&nbsp;the&nbsp;topic&nbsp;is&nbsp;now&nbsp;unreadable&nbsp;garbage&nbsp;in&nbsp;all&nbsp;clients.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;But&nbsp;none&nbsp;of&nbsp;this&nbsp;is&nbsp;actually&nbsp;true.&nbsp;&nbsp;What&nbsp;seems&nbsp;to&nbsp;be&nbsp;true&nbsp;is&nbsp;that&lt;br&nbsp;class=&quot;&quot;&gt;non-utf-8&nbsp;encodings&nbsp;are&nbsp;rarely&nbsp;if&nbsp;ever&nbsp;seen&nbsp;on&nbsp;Freenode,&nbsp;and&nbsp;sometimes&lt;br&nbsp;class=&quot;&quot;&gt;to&nbsp;regularly&nbsp;seen&nbsp;on&nbsp;many&nbsp;other&nbsp;IRC&nbsp;servers.&nbsp;&nbsp;These&nbsp;encodings&nbsp;are&lt;br&nbsp;class=&quot;&quot;&gt;certainly&nbsp;used.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;can't&nbsp;really&nbsp;parse&nbsp;you&nbsp;here&nbsp;-&nbsp;are&nbsp;you&nbsp;saying&nbsp;that&nbsp;each&nbsp;network&nbsp;more&nbsp;or&nbsp;less&nbsp;sticks&nbsp;to&nbsp;one&nbsp;encoding?&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;Given&nbsp;this&nbsp;situation,&nbsp;the&nbsp;only&nbsp;reasonable&nbsp;way&nbsp;forward&nbsp;as&nbsp;a&nbsp;community&nbsp;is&nbsp;to&nbsp;tell&nbsp;users&nbsp;that&nbsp;using&nbsp;anything&nbsp;other&nbsp;than&nbsp;UTF-8&nbsp;is&nbsp;a&nbsp;misconfiguration&nbsp;and&nbsp;we&nbsp;need&nbsp;to&nbsp;be&nbsp;getting&nbsp;all&nbsp;those&nbsp;out-of-band&nbsp;agreements&nbsp;to&nbsp;switch&nbsp;to&nbsp;it.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Doing&nbsp;this&nbsp;ensures&nbsp;Twisted's&nbsp;IRC&nbsp;implementation&nbsp;will&nbsp;be&nbsp;unable&nbsp;to&lt;br&nbsp;class=&quot;&quot;&gt;communicate&nbsp;with&nbsp;a&nbsp;significant&nbsp;minority&nbsp;of&nbsp;users,&nbsp;and&nbsp;will&nbsp;be&nbsp;a&nbsp;less&lt;br&nbsp;class=&quot;&quot;&gt;useful&nbsp;programming&nbsp;tool.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Sorry,&nbsp;my&nbsp;statement&nbsp;you&nbsp;were&nbsp;responding&nbsp;to&nbsp;here&nbsp;was&nbsp;way&nbsp;too&nbsp;strong.&nbsp;&nbsp;What&nbsp;I&nbsp;meant&nbsp;to&nbsp;say&nbsp;here&nbsp;is&nbsp;that&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;long&nbsp;term&lt;/i&gt;&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;get&nbsp;a&nbsp;&quot;right&quot;&nbsp;answer&nbsp;in&nbsp;this&nbsp;ecosystem,&nbsp;so&nbsp;&quot;UTF-8&nbsp;is&nbsp;the&nbsp;only&nbsp;correct&nbsp;answer&quot;&nbsp;is&nbsp;the&nbsp;only&nbsp;direction&nbsp;we&nbsp;can&nbsp;push&nbsp;in&nbsp;to&nbsp;actually&nbsp;make&nbsp;things&nbsp;work&nbsp;reasonably&nbsp;by&nbsp;default&nbsp;an&nbsp;increasing&nbsp;proportion&nbsp;of&nbsp;the&nbsp;time.&nbsp;&nbsp;For&nbsp;the&nbsp;forseeable&nbsp;future,&nbsp;adding&nbsp;the&nbsp;ability&nbsp;to&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;cope&lt;/i&gt;&nbsp;with&nbsp;other&nbsp;encodings&nbsp;(encoding&nbsp;a&nbsp;fallback&nbsp;to&nbsp;latin-1&nbsp;so&nbsp;that&nbsp;you&nbsp;can&nbsp;at&nbsp;least&nbsp;do&nbsp;demojibakefication&nbsp;manually&nbsp;after&nbsp;copy/pasting)&nbsp;is&nbsp;something&nbsp;a&nbsp;general-purpose&nbsp;IRC&nbsp;library&nbsp;absolutely&nbsp;needs.&nbsp;&nbsp;This&nbsp;is&nbsp;why&nbsp;every&nbsp;client&nbsp;has&nbsp;an&nbsp;&quot;encoding&quot;&nbsp;selection&nbsp;menu,&nbsp;too.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;It&nbsp;makes&nbsp;more&nbsp;sense&nbsp;to&nbsp;have&nbsp;an&nbsp;implementation&nbsp;that&nbsp;parses&nbsp;protocol&lt;br&nbsp;class=&quot;&quot;&gt;elements&nbsp;as&nbsp;bytes&nbsp;and&nbsp;provides&nbsp;a&nbsp;bytes&nbsp;API.&nbsp;&nbsp;It's&nbsp;fine&nbsp;to&nbsp;also&nbsp;provide&lt;br&nbsp;class=&quot;&quot;&gt;a&nbsp;decoded&nbsp;text&nbsp;API,&nbsp;but&nbsp;not&nbsp;to&nbsp;the&nbsp;exclusion&nbsp;of&nbsp;bytes.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;This&nbsp;is&nbsp;the&nbsp;point&nbsp;where&nbsp;I&nbsp;think&nbsp;we&nbsp;diverge.&nbsp;&nbsp;I&nbsp;don't&nbsp;think&nbsp;adding&nbsp;a&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;bytes&nbsp;API&lt;/i&gt;&nbsp;actually&nbsp;adds&nbsp;any&nbsp;value.&nbsp;&nbsp;Trying&nbsp;to&nbsp;process&nbsp;the&nbsp;contents&nbsp;of&nbsp;IRC&nbsp;as&nbsp;bytes&nbsp;as&nbsp;any&nbsp;way&nbsp;leads&nbsp;to&nbsp;inevitable&nbsp;failures&nbsp;(&quot;line&quot;&nbsp;truncation&nbsp;midway&nbsp;through&nbsp;a&nbsp;UTF-8&nbsp;escape&nbsp;sequence&nbsp;for&nbsp;example).&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;So,&nbsp;the&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;thing&lt;/i&gt;&nbsp;IRC&nbsp;is&nbsp;transmitting&nbsp;is&nbsp;text.&nbsp;&nbsp;The&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;way&lt;/i&gt;&nbsp;it's&nbsp;transmitting&nbsp;it&nbsp;is&nbsp;poorly&nbsp;specified&nbsp;and&nbsp;will&nbsp;need&nbsp;manual&nbsp;configurability&nbsp;hooks&nbsp;to&nbsp;specify&nbsp;encoding&nbsp;information,&nbsp;probably&nbsp;forever,&nbsp;and&nbsp;perhaps&nbsp;even&nbsp;to&nbsp;guess&nbsp;it&nbsp;(although&nbsp;&quot;encoding=chardet&quot;&nbsp;would&nbsp;be&nbsp;nice).&nbsp;&nbsp;I&nbsp;agree&nbsp;that&nbsp;just&nbsp;saying&nbsp;&quot;UTF-8&nbsp;or&nbsp;GTFO&quot;&nbsp;is&nbsp;not&nbsp;a&nbsp;sustainable&nbsp;approach&nbsp;at&nbsp;all.&nbsp;&nbsp;&quot;UTF-8&nbsp;or&nbsp;have&nbsp;a&nbsp;bad&nbsp;time&nbsp;with&nbsp;this&nbsp;fiddly&nbsp;customization&nbsp;API&nbsp;and&nbsp;config&nbsp;file&quot;&nbsp;is&nbsp;fine,&nbsp;because&nbsp;anyone&nbsp;wanting&nbsp;something&nbsp;else&nbsp;is&nbsp;probably&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;already&lt;/i&gt;&nbsp;having&nbsp;a&nbsp;bad&nbsp;time.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;If&nbsp;you&nbsp;are&nbsp;engaging&nbsp;in&nbsp;a&nbsp;real&nbsp;abuse&nbsp;of&nbsp;the&nbsp;IRC&nbsp;protocol&nbsp;and&nbsp;you're&nbsp;treating&nbsp;it&nbsp;as&nbsp;an&nbsp;8-bit&nbsp;clean&nbsp;stream&nbsp;to&nbsp;send&nbsp;some&nbsp;escaped&nbsp;binary&nbsp;data&nbsp;through&nbsp;(like&nbsp;a&nbsp;video&nbsp;stream,&nbsp;something&nbsp;like&nbsp;that),&nbsp;well,&nbsp;that's&nbsp;what&nbsp;the&nbsp;'charmap'&nbsp;alias&nbsp;of&nbsp;'latin-1'&nbsp;is&nbsp;for&nbsp;:-).&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;So...&nbsp;have&nbsp;I&nbsp;sold&nbsp;you?&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;-glyph&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
