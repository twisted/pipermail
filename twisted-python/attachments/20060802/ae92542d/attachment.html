<tt>
Hi&nbsp;Ian&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;ran&nbsp;into&nbsp;this&nbsp;just&nbsp;recently,&nbsp;but&nbsp;am&nbsp;not&nbsp;entirely&nbsp;certain&nbsp;I<br>
found&nbsp;the&nbsp;best&nbsp;solution.&nbsp;I&nbsp;needed&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;switch&nbsp;the&nbsp;port&nbsp;the<br>
reactor&nbsp;was&nbsp;listening&nbsp;on&nbsp;without&nbsp;restarting&nbsp;the&nbsp;reactor.&nbsp;Here's&nbsp;how&nbsp;I<br>
did&nbsp;it:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;tt&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;startListener(self,&nbsp;port,&nbsp;interface=&quot;&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;&quot;):&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.iListeningPort&nbsp;=&nbsp;reactor.listenTCP(&lt;br&gt;<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port,&nbsp;&lt;br&gt;<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.factory,&lt;br&gt;<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interface=interface&lt;br&gt;<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;restartListener(self,&nbsp;port,&nbsp;interface=&quot;&lt;a&nbsp;href=&quot;http://127.0.0.1&quot;&gt;127.0.0.1&lt;/a&gt;&quot;):&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.iListeningPort.stopListening()&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.startListener(port,&nbsp;interface)&lt;/tt&gt;<br>
<br>
&nbsp;&nbsp;&lt;br&gt;<br>
<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
I'm&nbsp;not&nbsp;sure&nbsp;if&nbsp;doing&nbsp;this&nbsp;will&nbsp;have&nbsp;any&nbsp;unintended&nbsp;side-effects,&nbsp;but<br>
so&nbsp;far&nbsp;it&nbsp;seems&nbsp;to&nbsp;have&nbsp;done&nbsp;the&nbsp;trick.&nbsp;If&nbsp;someone&nbsp;else&nbsp;on&nbsp;the&nbsp;list<br>
could&nbsp;confirm&nbsp;this&nbsp;does&nbsp;what&nbsp;I&nbsp;think&nbsp;it&nbsp;does&nbsp;(and&nbsp;what&nbsp;Ian&nbsp;is&nbsp;looking<br>
for)&nbsp;that&nbsp;would&nbsp;be&nbsp;great.&lt;br&gt;<br>
&lt;br&gt;<br>
Best,&lt;br&gt;<br>
&lt;br&gt;<br>
Travis&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;8/1/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;&lt;a&nbsp;href=&quot;mailto:ian.parker@facilita.co.uk&quot;&gt;ian.parker@facilita.co.uk&lt;/a&gt;&lt;/b&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ian.parker@facilita.co.uk&quot;&gt;ian.parker@facilita.co.uk<br>
&lt;/a&gt;&gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;I&nbsp;have&nbsp;created&nbsp;an&nbsp;internet&nbsp;server&nbsp;that&nbsp;is&nbsp;started&nbsp;in&nbsp;a&nbsp;thread&nbsp;from&nbsp;a&nbsp;Python&nbsp;QT&nbsp;GUI.<br>
&lt;br&gt;&lt;br&gt;I&nbsp;can&nbsp;call&nbsp;reactor.stop()&nbsp;and&nbsp;sucessfully&nbsp;get&nbsp;notified&nbsp;of&nbsp;shutdown&nbsp;and&nbsp;the&nbsp;run&nbsp;thread&nbsp;terminates,&nbsp;the&nbsp;TCP/IP&nbsp;listen&nbsp;port&nbsp;is&nbsp;closed.&lt;br&gt;&lt;br&gt;When&nbsp;I&nbsp;restart&nbsp;it&nbsp;by&nbsp;calling&nbsp;reactor.listenTCP()&nbsp;and&nbsp;&nbsp;reactor.run(installSignalHandlers=0)&nbsp;a&nbsp;second&nbsp;time&nbsp;I&nbsp;find&nbsp;that&nbsp;things&nbsp;don't&nbsp;work&nbsp;correctly.&nbsp;<br>
e.g.&nbsp;TCP&nbsp;calls&nbsp;are&nbsp;accepted&nbsp;and&nbsp;my&nbsp;protocol.dataReceived()&nbsp;is&nbsp;called&nbsp;but&nbsp;then&nbsp;calling&nbsp;reactor.callInThread(self.blockingMethod,&nbsp;data)&nbsp;does&nbsp;nothing.&nbsp;Also&nbsp;calling&nbsp;stop()&nbsp;a&nbsp;second&nbsp;time&nbsp;does&nbsp;not&nbsp;stop&nbsp;the&nbsp;&nbsp;running&nbsp;reactor&nbsp;thread&nbsp;or&nbsp;terminate&nbsp;the&nbsp;TCP&nbsp;listener.<br>
&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;tried&nbsp;numerous&nbsp;options,&nbsp;and&nbsp;have&nbsp;been&nbsp;careful&nbsp;to&nbsp;avoid&nbsp;any&nbsp;conflicts&nbsp;with&nbsp;the&nbsp;GUI&nbsp;threads.&nbsp;It&nbsp;appears&nbsp;that&nbsp;the&nbsp;reactor&nbsp;is&nbsp;not&nbsp;being&nbsp;restarted&nbsp;correctly&nbsp;after&nbsp;stop()&nbsp;and&nbsp;a&nbsp;second&nbsp;run().&lt;br&gt;&lt;br&gt;What&nbsp;I&nbsp;need&nbsp;is&nbsp;to&nbsp;stop&nbsp;and&nbsp;re-start&nbsp;the&nbsp;listenTCP.&nbsp;&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;do&nbsp;this?<br>
&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Ian&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;<br>
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
