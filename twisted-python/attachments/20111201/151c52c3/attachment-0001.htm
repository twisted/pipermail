<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Nov&nbsp;30,&nbsp;2011,&nbsp;at&nbsp;9:57&nbsp;PM,&nbsp;Tim&nbsp;Allen&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Wed,&nbsp;Nov&nbsp;30,&nbsp;2011&nbsp;at&nbsp;01:04:27PM&nbsp;-0000,&nbsp;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;04:07&nbsp;am,&nbsp;&lt;a&nbsp;href=&quot;mailto:screwtape@froup.com&quot;&gt;screwtape@froup.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;If&nbsp;the&nbsp;standard&nbsp;Twisted&nbsp;logging&nbsp;functions&nbsp;automatically&nbsp;constructed&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;LogMessage&nbsp;instances&nbsp;from&nbsp;dict&nbsp;instances,&nbsp;it&nbsp;should&nbsp;be&nbsp;easy&nbsp;enough&nbsp;for&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;future&nbsp;ILogObserver&nbsp;implementations&nbsp;to&nbsp;do&nbsp;the&nbsp;right&nbsp;thing&nbsp;(by&nbsp;just&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;calling&nbsp;str(msg)).&nbsp;Of&nbsp;course,&nbsp;they&nbsp;could&nbsp;also&nbsp;do&nbsp;more&nbsp;sophisticated&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;things&nbsp;like&nbsp;pulling&nbsp;particular&nbsp;keys&nbsp;out&nbsp;of&nbsp;the&nbsp;message&nbsp;to&nbsp;set&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;observer-specific&nbsp;message&nbsp;properties&nbsp;(like&nbsp;syslog&nbsp;channel&nbsp;and&nbsp;severity,&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;etc.)&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Oooorrrr&nbsp;there&nbsp;could&nbsp;be&nbsp;a&nbsp;function&nbsp;that&nbsp;takes&nbsp;a&nbsp;dict&nbsp;intended&nbsp;to&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;represent&nbsp;a&nbsp;text&nbsp;message&nbsp;and&nbsp;returns&nbsp;that&nbsp;message&nbsp;as&nbsp;a&nbsp;string.&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;As&nbsp;mentioned,&nbsp;we&nbsp;already&nbsp;have&nbsp;one&nbsp;of&nbsp;those&nbsp;in&nbsp;the&nbsp;form&nbsp;of&lt;br&gt;textFromEventDict().&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Right,&nbsp;I&nbsp;think&nbsp;that's&nbsp;the&nbsp;tone&nbsp;all&nbsp;those&nbsp;extra&nbsp;letters&nbsp;are&nbsp;meant&nbsp;to&nbsp;suggest&nbsp;:).&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;The&nbsp;trouble&nbsp;is&nbsp;that&nbsp;everybody&nbsp;who&nbsp;writes&lt;br&gt;a&nbsp;LogObserver&nbsp;needs&nbsp;to&nbsp;know&nbsp;that&nbsp;it&nbsp;exists,&nbsp;and&nbsp;remember&nbsp;to&nbsp;call&nbsp;it.&nbsp;If&lt;br&gt;it&nbsp;were&nbsp;the&nbsp;__str__()&nbsp;method&nbsp;of&nbsp;a&nbsp;LogMessage&nbsp;object,&nbsp;they'd&nbsp;have&nbsp;to&nbsp;go&lt;br&gt;out&nbsp;of&nbsp;their&nbsp;way&nbsp;to&nbsp;*not*&nbsp;do&nbsp;the&nbsp;right&nbsp;thing.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;I&nbsp;really&nbsp;don't&nbsp;like&nbsp;using&nbsp;__str__&nbsp;for&nbsp;structured&nbsp;conversions.&nbsp;&amp;nbsp;For&nbsp;example,&nbsp;textFromEventDict&nbsp;has&nbsp;very&nbsp;strict&nbsp;error-handling&nbsp;behavior:&nbsp;it&nbsp;will&nbsp;try&nbsp;as&nbsp;hard&nbsp;as&nbsp;it&nbsp;can&nbsp;to&nbsp;give&nbsp;you&nbsp;&lt;i&gt;something&lt;/i&gt;&amp;nbsp;so&nbsp;that&nbsp;you&nbsp;don't&nbsp;need&nbsp;to&nbsp;do&nbsp;extra&nbsp;error&nbsp;handling&nbsp;in&nbsp;your&nbsp;log&nbsp;observer.&nbsp;&amp;nbsp;But&nbsp;if&nbsp;you&nbsp;can&nbsp;get&nbsp;instances&nbsp;of&nbsp;LogMessage&nbsp;or&nbsp;some&nbsp;derived&nbsp;message&nbsp;type&nbsp;or&nbsp;possibly&nbsp;application-derived&nbsp;message&nbsp;types,&nbsp;the&nbsp;behavior&nbsp;might&nbsp;change&nbsp;and&nbsp;the&nbsp;error-handling&nbsp;would&nbsp;be&nbsp;less&nbsp;strict&nbsp;and&nbsp;now&nbsp;the&nbsp;default&nbsp;log&nbsp;observers&nbsp;need&nbsp;to&nbsp;be&nbsp;double-careful;&nbsp;once&nbsp;in&nbsp;LogMessage.__str__,&nbsp;once&nbsp;in&nbsp;the&nbsp;thing&nbsp;that&nbsp;calls&nbsp;it&nbsp;because&nbsp;you&nbsp;can&nbsp;never&nbsp;really&nbsp;know&nbsp;what&nbsp;str(x)&nbsp;is&nbsp;going&nbsp;to&nbsp;do.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;another&nbsp;there's&nbsp;a&nbsp;whole&nbsp;nasty&nbsp;battery&nbsp;of&nbsp;unicode-or-bytes&nbsp;issues&nbsp;that&nbsp;crop&nbsp;up&nbsp;when&nbsp;you&nbsp;start&nbsp;using&nbsp;__str__.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Finally,&nbsp;and&nbsp;I'm&nbsp;leaving&nbsp;it&nbsp;for&nbsp;last&nbsp;because&nbsp;this&nbsp;concern&nbsp;is&nbsp;rather&nbsp;silly,&nbsp;right&nbsp;now&nbsp;log&nbsp;events&nbsp;are&nbsp;constructed&nbsp;and&nbsp;propagated&nbsp;with&nbsp;extremely&nbsp;little&nbsp;copying,&nbsp;and&nbsp;the&nbsp;copying&nbsp;that&nbsp;does&nbsp;happen&nbsp;(ahem,&nbsp;log&nbsp;contexts)&nbsp;needs&nbsp;to&nbsp;be&nbsp;reduced.&nbsp;&amp;nbsp;Adding&nbsp;a&nbsp;LogMessage&nbsp;object&nbsp;into&nbsp;the&nbsp;mix,&nbsp;even&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;subclass&nbsp;of&nbsp;dict,&nbsp;means&nbsp;we&nbsp;have&nbsp;to,&nbsp;at&nbsp;the&nbsp;very&nbsp;least,&nbsp;copy&nbsp;all&nbsp;the&nbsp;values&nbsp;from&nbsp;msg()'s&nbsp;keyword&nbsp;arguments&nbsp;into&nbsp;a&nbsp;new&nbsp;object,&nbsp;rather&nbsp;than&nbsp;just&nbsp;propagating&nbsp;them&nbsp;to&nbsp;log&nbsp;observers.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
