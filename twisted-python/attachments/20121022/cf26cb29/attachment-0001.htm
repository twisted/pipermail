<tt>
On&nbsp;Sun,&nbsp;Oct&nbsp;21,&nbsp;2012&nbsp;at&nbsp;9:45&nbsp;PM,&nbsp;Julian&nbsp;Berman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:julian@grayvines.com&quot;&nbsp;target=&quot;_blank&quot;&gt;julian@grayvines.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi.&lt;br&gt;<br>
&lt;br&gt;<br>
I&amp;#39;d&nbsp;like&nbsp;to&nbsp;gauge&nbsp;any&nbsp;interest&nbsp;in&nbsp;(or&nbsp;resistance&nbsp;towards)&nbsp;adding&nbsp;mock&lt;br&gt;<br>
(&lt;a&nbsp;href=&quot;http://www.voidspace.org.uk/python/mock/mock.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.voidspace.org.uk/python/mock/mock.html&lt;/a&gt;)&nbsp;as&nbsp;a&nbsp;dependency&nbsp;for&nbsp;the&lt;br&gt;<br>
test&nbsp;suite.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;short,&nbsp;while&nbsp;I&nbsp;don&amp;#39;t&nbsp;necessarily&nbsp;feel&nbsp;strongly&nbsp;about&nbsp;behavior&nbsp;vs.&nbsp;state&lt;br&gt;<br>
based&nbsp;verification&nbsp;being&nbsp;preferred&nbsp;in&nbsp;a&nbsp;general&nbsp;sense,&nbsp;I&nbsp;think&nbsp;both&nbsp;have&nbsp;their&lt;br&gt;<br>
place&nbsp;when&nbsp;used&nbsp;with&nbsp;sensibility.&nbsp;(Sorry,&nbsp;I&nbsp;know&nbsp;that&amp;#39;s&nbsp;not&nbsp;saying&nbsp;too&nbsp;much&nbsp;of&lt;br&gt;<br>
substance,&nbsp;but&nbsp;I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;ward&nbsp;off&nbsp;a&nbsp;discussion&nbsp;on&nbsp;whether&nbsp;or&nbsp;not&nbsp;it&nbsp;has&nbsp;a&lt;br&gt;<br>
place&nbsp;at&nbsp;all&nbsp;if&nbsp;possible).&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;*benefit*&nbsp;though&nbsp;for&nbsp;me&nbsp;in&nbsp;having&nbsp;mock&nbsp;present&nbsp;is&nbsp;that&nbsp;it&nbsp;decreases&nbsp;the&lt;br&gt;<br>
lines&nbsp;of&nbsp;code&nbsp;necessary&nbsp;to&nbsp;write&nbsp;stubs&nbsp;and&nbsp;mocks.&nbsp;While&nbsp;doing&nbsp;so&nbsp;is&nbsp;not&nbsp;really&lt;br&gt;<br>
that&nbsp;difficult&nbsp;anyhow,&nbsp;it&nbsp;*is*&nbsp;just&nbsp;a&nbsp;bit&nbsp;more&nbsp;clutter&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;mock,&lt;br&gt;<br>
and&nbsp;the&nbsp;extra&nbsp;3&nbsp;or&nbsp;4&nbsp;lines&nbsp;mean&nbsp;that&nbsp;in&nbsp;more&nbsp;than&nbsp;one&nbsp;instance&nbsp;I&nbsp;have&nbsp;found&lt;br&gt;<br>
myself&nbsp;pick&nbsp;a&nbsp;different&nbsp;strategy&nbsp;than&nbsp;I&nbsp;would&nbsp;have&nbsp;because&nbsp;of&nbsp;the&nbsp;extra&nbsp;lines&lt;br&gt;<br>
of&nbsp;code&nbsp;that&nbsp;clutter&nbsp;the&nbsp;test&nbsp;method.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;give&nbsp;a&nbsp;specific&nbsp;example,&nbsp;as&nbsp;I&nbsp;write&nbsp;this&nbsp;I&amp;#39;m&nbsp;writing&nbsp;tests&nbsp;for&nbsp;#6143&nbsp;(which&lt;br&gt;<br>
will&nbsp;hopefully&nbsp;let&nbsp;trial&nbsp;drop&nbsp;into&nbsp;a&nbsp;debugger&nbsp;on&nbsp;an&nbsp;error&nbsp;or&nbsp;failure&nbsp;rather&lt;br&gt;<br>
than&nbsp;at&nbsp;the&nbsp;outset&nbsp;of&nbsp;a&nbsp;test&nbsp;run).&nbsp;To&nbsp;do&nbsp;so&nbsp;I&nbsp;want&nbsp;to&nbsp;write&nbsp;tests&nbsp;that&nbsp;look&lt;br&gt;<br>
like:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;def&nbsp;test_itDebugsOnError(self):&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;result&nbsp;=&nbsp;mock.Mock()&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;exc_type,&nbsp;exc_value,&nbsp;tb&nbsp;=&nbsp;mock.Mock(),&nbsp;mock.Mock(),&nbsp;mock.Mock()&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;decorated&nbsp;=&nbsp;DebugDecorator(result)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;with&nbsp;mock.patch.object(decorated,&nbsp;&amp;quot;debug&amp;quot;)&nbsp;as&nbsp;debug:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;decorated.addError(exc_type,&nbsp;exc_value,&nbsp;tb)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;debug.assert_called_once_with(tb)&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;result.addError.assert_called_once_with(exc_type,&nbsp;exc_value,&nbsp;tb)&lt;br&gt;<br>
&lt;br&gt;<br>
where&nbsp;I&nbsp;want&nbsp;to&nbsp;test&nbsp;that&nbsp;the&nbsp;decorated&nbsp;test&nbsp;result&nbsp;is&nbsp;being&nbsp;used&nbsp;as&nbsp;I&nbsp;expect&lt;br&gt;<br>
it&nbsp;to,&nbsp;and&nbsp;that&nbsp;debug&nbsp;is&nbsp;being&nbsp;called.&nbsp;Another&nbsp;test&nbsp;will&nbsp;test&nbsp;that&nbsp;debug&nbsp;does&lt;br&gt;<br>
what&nbsp;it&amp;#39;s&nbsp;supposed&nbsp;to,&nbsp;also&nbsp;in&nbsp;isolation.&lt;br&gt;<br>
&lt;br&gt;<br>
Of&nbsp;course&nbsp;none&nbsp;of&nbsp;the&nbsp;objects&nbsp;I&nbsp;used&nbsp;there&nbsp;were&nbsp;very&nbsp;interesting,&nbsp;but&nbsp;mock&nbsp;has&lt;br&gt;<br>
similarly&nbsp;terse&nbsp;syntax&nbsp;for&nbsp;creating&nbsp;mocks&nbsp;with&nbsp;attributes,&nbsp;return&nbsp;values,&nbsp;etc.&lt;br&gt;<br>
amongst&nbsp;a&nbsp;bunch&nbsp;of&nbsp;other&nbsp;useful&nbsp;features&nbsp;which&nbsp;I&amp;#39;ll&nbsp;be&nbsp;happy&nbsp;to&nbsp;elaborate&nbsp;on&nbsp;if&lt;br&gt;<br>
anyone&nbsp;would&nbsp;like,&nbsp;I&nbsp;just&nbsp;had&nbsp;the&nbsp;above&nbsp;example&nbsp;at&nbsp;hand.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;add&nbsp;a&nbsp;few&nbsp;more&nbsp;notes:&lt;br&gt;<br>
&lt;br&gt;<br>
 -&nbsp;mock&nbsp;is&nbsp;in&nbsp;the&nbsp;stdlib&nbsp;starting&nbsp;with&nbsp;3.3&nbsp;as&nbsp;unittest.mock,&nbsp;which&nbsp;as&nbsp;I&lt;br&gt;<br>
 &nbsp; understand&nbsp;it&nbsp;is&nbsp;the&nbsp;first&nbsp;version&nbsp;of&nbsp;Py3&nbsp;for&nbsp;which&nbsp;support&nbsp;is&nbsp;planned.&nbsp;So&lt;br&gt;<br>
 &nbsp; really&nbsp;all&nbsp;that&amp;#39;d&nbsp;be&nbsp;needed&nbsp;would&nbsp;be&nbsp;to&nbsp;add&nbsp;mock&nbsp;as&nbsp;a&nbsp;dependency&nbsp;on&nbsp;2.X.&lt;br&gt;<br>
&lt;br&gt;<br>
 -&nbsp;it&amp;#39;s&nbsp;a&nbsp;single&nbsp;file&nbsp;with&nbsp;no&nbsp;external&nbsp;deps,&nbsp;so&nbsp;installation&nbsp;is&nbsp;not&nbsp;difficult,&lt;br&gt;<br>
 &nbsp; and&nbsp;it&amp;#39;d&nbsp;only&nbsp;be&nbsp;a&nbsp;dep&nbsp;for&nbsp;running&nbsp;the&nbsp;tests&nbsp;(and&nbsp;presumably&nbsp;only&nbsp;a&nbsp;subset&lt;br&gt;<br>
 &nbsp; thereof&nbsp;that&nbsp;chose&nbsp;to&nbsp;use&nbsp;it)&lt;br&gt;<br>
&lt;br&gt;<br>
 -&nbsp;there&nbsp;are&nbsp;other&nbsp;mocking&nbsp;libraries,&nbsp;but&nbsp;I&nbsp;don&amp;#39;t&nbsp;like&nbsp;any&nbsp;of&nbsp;the&nbsp;others&nbsp;as&lt;br&gt;<br>
 &nbsp; much&nbsp;personally&nbsp;for&nbsp;various&nbsp;reasons.&lt;br&gt;<br>
&lt;br&gt;<br>
 -&nbsp;I&amp;#39;d&nbsp;be&nbsp;willing&nbsp;to&nbsp;do&nbsp;the&nbsp;small&nbsp;amount&nbsp;of&nbsp;work&nbsp;to&nbsp;add&nbsp;it&nbsp;if&nbsp;there&amp;#39;d&nbsp;be&lt;br&gt;<br>
 &nbsp; interest&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Julian&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;like&nbsp;mock,&nbsp;but&nbsp;for&nbsp;me,&nbsp;using&nbsp;mocks&nbsp;is&nbsp;a&nbsp;method&nbsp;of&nbsp;last&nbsp;resort.&nbsp; I&nbsp;don&amp;#39;t&nbsp;see&nbsp;a&nbsp;lot&nbsp;of&nbsp;need&nbsp;for&nbsp;it&nbsp;in&nbsp;internal&nbsp;Twisted&nbsp;tests&nbsp;(except&nbsp;maybe&nbsp;in&nbsp;adbapi?&nbsp; I&nbsp;don&amp;#39;t&nbsp;know&nbsp;what&nbsp;the&nbsp;tests&nbsp;for&nbsp;that&nbsp;currently&nbsp;look&nbsp;like,&nbsp;but&nbsp;it&nbsp;seems&nbsp;a&nbsp;logical&nbsp;place).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kevin&nbsp;Horn&lt;/div&gt;&lt;/div&gt;<br>

</tt>
