<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;5.00.3013.2600&quot;&nbsp;name=GENERATOR&gt;<br>
&lt;STYLE&gt;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;bgColor=#ffffff&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Hello,&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;I&nbsp;have&nbsp;been&nbsp;taking&nbsp;a&nbsp;look&nbsp;on&nbsp;WebDAV,&nbsp;especially&nbsp;RFC&nbsp;2518,&nbsp;<br>
&quot;HTTP&nbsp;Extension&nbsp;for&nbsp;Distributed&nbsp;Authoring&nbsp;--&nbsp;WEBDAV&quot;.&nbsp;The&nbsp;extension&nbsp;<br>
concerns&nbsp;four&nbsp;areas,&nbsp;queries&nbsp;and&nbsp;manipulation&nbsp;of&nbsp;properties,&nbsp;handling&nbsp;of&nbsp;<br>
collections,&nbsp;locking&nbsp;and&nbsp;namespace&nbsp;operations.&nbsp;The&nbsp;two&nbsp;last&nbsp;areas&nbsp;are&nbsp;not&nbsp;<br>
crucial.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Each&nbsp;of&nbsp;these&nbsp;areas&nbsp;has&nbsp;its&nbsp;set&nbsp;of&nbsp;methods,&nbsp;which&nbsp;is&nbsp;<br>
dispatched&nbsp;the&nbsp;same&nbsp;way&nbsp;as&nbsp;'GET'&nbsp;and&nbsp;'PUT',&nbsp;but&nbsp;usually&nbsp;with&nbsp;a&nbsp;XML-file&nbsp;appended&nbsp;<br>
to&nbsp;the&nbsp;request.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;twisted.web&nbsp;architecture&nbsp;of&nbsp;resources&nbsp;is&nbsp;well&nbsp;suited&nbsp;<br>
for&nbsp;adding&nbsp;WebDAV.&nbsp;resource.Resource&nbsp;is&nbsp;fitting&nbsp;the&nbsp;term&nbsp;Resource&nbsp;as&nbsp;it&nbsp;is&nbsp;used&nbsp;<br>
in&nbsp;the&nbsp;RFC.&nbsp;And&nbsp;twisted.web&lt;/FONT&gt;&lt;FONT&nbsp;size=2&gt;.server.Request's&nbsp;way&nbsp;of&nbsp;<br>
handling&nbsp;requests/responses&nbsp;seems&nbsp;open-ended&nbsp;enough&nbsp;too&nbsp;add&nbsp;a&nbsp;<br>
xml-reader/writer&nbsp;that&nbsp;concates&nbsp;the&nbsp;reply&nbsp;with&nbsp;XML&nbsp;(mimed).&nbsp;I&nbsp;will&nbsp;here&nbsp;try&nbsp;to&nbsp;<br>
examine&nbsp;the&nbsp;changes&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;done&nbsp;to&nbsp;twisted.web.server&nbsp;(and&nbsp;<br>
protocols.http).&nbsp;Barely&nbsp;nothing&nbsp;else&nbsp;is&nbsp;examined,&nbsp;or&nbsp;needed.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;I&nbsp;will&nbsp;blend&nbsp;some&nbsp;explanations&nbsp;into&nbsp;my&nbsp;proposal&nbsp;in&nbsp;case&nbsp;my&nbsp;<br>
understanding&nbsp;of&nbsp;twisted.*&nbsp;is&nbsp;wrong&nbsp;:).&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;methods&nbsp;'GET',&nbsp;'PUT',&nbsp;'HEAD',&nbsp;etc,&nbsp;is&nbsp;not&nbsp;touched&nbsp;by&nbsp;<br>
WebDAV.&nbsp;These&nbsp;methods&nbsp;by&nbsp;definitions&nbsp;only&nbsp;concern&nbsp;'files'&nbsp;(eg.&nbsp;GET&nbsp;<br>
retrieves&nbsp;the&nbsp;entity&nbsp;described&nbsp;by&nbsp;the&nbsp;URI).&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;WebDAV-Resource&nbsp;'/foo/'&nbsp;is&nbsp;a&nbsp;Resource&nbsp;Collection,&nbsp;and&nbsp;<br>
'/foo/file'&nbsp;is&nbsp;a&nbsp;member&nbsp;of&nbsp;the&nbsp;collection.&nbsp;If&nbsp;'/foo/faa/file'&nbsp;exists,&nbsp;then&nbsp;the&nbsp;<br>
'faa'-collection&nbsp;needs&nbsp;to&nbsp;exist&nbsp;because&nbsp;the&nbsp;resource-tree&nbsp;has&nbsp;to&nbsp;be&nbsp;consistent.&nbsp;<br>
The&nbsp;trailing&nbsp;slash&nbsp;tells&nbsp;if&nbsp;the&nbsp;files&nbsp;is&nbsp;a&nbsp;collection&nbsp;or&nbsp;not;&nbsp;this&nbsp;is&nbsp;not&nbsp;a&nbsp;rule&nbsp;<br>
so&nbsp;the&nbsp;server&nbsp;may&nbsp;correct&nbsp;the&nbsp;client&nbsp;with&nbsp;a&nbsp;MOVED_PERMANENTLY&nbsp;in&nbsp;the&nbsp;same&nbsp;way&nbsp;<br>
web.static&nbsp;does.&nbsp;The&nbsp;tree&nbsp;may&nbsp;however&nbsp;contain&nbsp;non-DAV-compliant&nbsp;resources,&nbsp;so&nbsp;<br>
there&nbsp;won't&nbsp;be&nbsp;a&nbsp;need&nbsp;to&nbsp;force&nbsp;DAV&nbsp;onto&nbsp;everything.&nbsp;If&nbsp;a&nbsp;putChild&nbsp;should&nbsp;be&nbsp;put&nbsp;<br>
into&nbsp;a&nbsp;collection&nbsp;is&nbsp;a&nbsp;discussion&nbsp;on&nbsp;its&nbsp;own&nbsp;:)&nbsp;(I&nbsp;will&nbsp;however&nbsp;mean&nbsp;that&nbsp;a&nbsp;<br>
DAVResource&nbsp;should&nbsp;be&nbsp;a&nbsp;good&nbsp;starting&nbsp;point&nbsp;for&nbsp;making&nbsp;everything&nbsp;DAV,&nbsp;by&nbsp;<br>
letting&nbsp;the&nbsp;stuff&nbsp;to&nbsp;go&nbsp;DAV&nbsp;inherit&nbsp;DAVResource)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Since&nbsp;resource&nbsp;is&nbsp;the&nbsp;dispatcher&nbsp;of&nbsp;methods,&nbsp;then&nbsp;<br>
WebDAV&nbsp;can&nbsp;be&nbsp;a&nbsp;simple&nbsp;twisted.web.resource.&nbsp;The&nbsp;request&nbsp;has&nbsp;arguments&nbsp;in&nbsp;<br>
the&nbsp;Header&nbsp;and&nbsp;this&nbsp;gets&nbsp;conviently&nbsp;passed&nbsp;to&nbsp;the&nbsp;assigned&nbsp;resource.&nbsp;The&nbsp;<br>
request&nbsp;may&nbsp;contain&nbsp;an&nbsp;XML&nbsp;with&nbsp;additional&nbsp;arguments&nbsp;as&nbsp;well.&nbsp;<br>
Request.process&nbsp;seems&nbsp;to&nbsp;handle&nbsp;the&nbsp;task&nbsp;well,&nbsp;except&nbsp;that&nbsp;its&nbsp;'POST'-handler&nbsp;<br>
may&nbsp;be&nbsp;rewritten&nbsp;to&nbsp;collect&nbsp;the&nbsp;XML&nbsp;for&nbsp;most&nbsp;methods.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;'GET'&nbsp;is&nbsp;done&nbsp;in&nbsp;the&nbsp;regular&nbsp;way,&nbsp;no&nbsp;XML,&nbsp;just&nbsp;send&nbsp;the&nbsp;<br>
entity&nbsp;the&nbsp;URI&nbsp;point&nbsp;at&nbsp;(for&nbsp;collections,&nbsp;send&nbsp;eg.&nbsp;the&nbsp;index.html.&nbsp;I&nbsp;don't&nbsp;know&nbsp;<br>
the&nbsp;case&nbsp;here,&nbsp;really).&nbsp;This&nbsp;is&nbsp;resource-stuff.&nbsp;All&nbsp;the&nbsp;action&nbsp;will&nbsp;be&nbsp;in&nbsp;<br>
resource.render&nbsp;(it&nbsp;will&nbsp;render&nbsp;the&nbsp;response&nbsp;XML,&nbsp;I&nbsp;guess).&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Minor&nbsp;thing,&nbsp;yet:&nbsp;If&nbsp;a&nbsp;request&nbsp;take&nbsp;long&nbsp;time&nbsp;to&nbsp;accomplish&nbsp;<br>
(eg.&nbsp;MOVE&nbsp;100M&nbsp;of&nbsp;data&nbsp;over&nbsp;wire)&nbsp;there&nbsp;is&nbsp;a&nbsp;reply&nbsp;102&nbsp;PROCESSING&nbsp;which&nbsp;tells&nbsp;<br>
the&nbsp;client&nbsp;to&nbsp;keep&nbsp;the&nbsp;line&nbsp;open&nbsp;and&nbsp;wait.&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;the&nbsp;details,&nbsp;but&nbsp;I&nbsp;<br>
guess&nbsp;a&nbsp;NOT_DONE_YET&nbsp;may&nbsp;stop&nbsp;the&nbsp;block&nbsp;:)&nbsp;The&nbsp;problems&nbsp;with&nbsp;this&nbsp;is&nbsp;that&nbsp;it&nbsp;<br>
will&nbsp;send&nbsp;a&nbsp;response&nbsp;later&nbsp;on,&nbsp;I&nbsp;guess&nbsp;this&nbsp;can&nbsp;be&nbsp;hacked&nbsp;in.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;changes&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;done&nbsp;to&nbsp;protocols.http&nbsp;is&nbsp;simply&nbsp;<br>
adding&nbsp;the&nbsp;new&nbsp;error-codes,&nbsp;since&nbsp;that&nbsp;is&nbsp;all&nbsp;that&nbsp;is&nbsp;in&nbsp;it&nbsp;:)&nbsp;If&nbsp;we&nbsp;want&nbsp;to&nbsp;add&nbsp;<br>
namespace&nbsp;operations&nbsp;(MOVE,&nbsp;COPY)&nbsp;the&nbsp;http-client&nbsp;needs&nbsp;to&nbsp;be&nbsp;made&nbsp;<br>
DAV-compliant.&nbsp;Note&nbsp;that&nbsp;COPY/MOVE&nbsp;also&nbsp;can&nbsp;be&nbsp;done&nbsp;by&nbsp;FTP&nbsp;too&nbsp;<br>
;)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;changes:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Request.resource:&nbsp;retrieve&nbsp;the&nbsp;XML&nbsp;in&nbsp;the&nbsp;<br>
request.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Handle&nbsp;the&nbsp;response&nbsp;102&nbsp;PROCESSING&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;protocols.http:&nbsp;Errorcodes&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;conclusion:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;size=2&gt;Everything&nbsp;will&nbsp;happen&nbsp;in&nbsp;the&nbsp;DAV-Resource.&nbsp;<br>
:)&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
