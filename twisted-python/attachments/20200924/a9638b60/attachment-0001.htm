<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Here&#39;s&nbsp;a&nbsp;gist&nbsp;and&nbsp;here&nbsp;are&nbsp;my&nbsp;high&nbsp;level&nbsp;questions,&nbsp;I&nbsp;hope&nbsp;they&nbsp;make&nbsp;sense&nbsp;and&nbsp;this&nbsp;is&nbsp;enough&nbsp;context. &lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://gist.github.com/radifalco/5a5cca4bf8d49d5c61113e36f9be7553&quot;&gt;https://gist.github.com/radifalco/5a5cca4bf8d49d5c61113e36f9be7553&lt;/a&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;1.&nbsp;I&nbsp;would&nbsp;expect&nbsp;a&nbsp;`makeDirectory`&nbsp;to&nbsp;raise&nbsp;an&nbsp;exception&nbsp;when&nbsp;the&nbsp;SSH&nbsp;server&nbsp;closes&nbsp;a&nbsp;connection&nbsp;that&nbsp;is&nbsp;idle&nbsp;for&nbsp;too&nbsp;long&nbsp;(or&nbsp;any&nbsp;connection&nbsp;error/issue).&nbsp;However,&nbsp;it&nbsp;appears&nbsp;like&nbsp;`makeConnection`&nbsp;never&nbsp;fires&nbsp;any&nbsp;callbacks&nbsp;OR&nbsp;errbacks?&nbsp;In&nbsp;fact&nbsp;it&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;yield&nbsp;at&nbsp;all.&nbsp;It&nbsp;detects&nbsp;the&nbsp;connection&nbsp;is&nbsp;closed,&nbsp;calls&nbsp;closed,&nbsp;but&nbsp;`makeDirectory`&nbsp;never&nbsp;has&nbsp;any&nbsp;callbacks&nbsp;triggered.&nbsp;What&nbsp;am&nbsp;I&nbsp;missing?&nbsp;Is&nbsp;there&nbsp;a&nbsp;timeout&nbsp;I&#39;m&nbsp;not&nbsp;setting?&nbsp;I&nbsp;wouldn&#39;t&nbsp;think&nbsp;so&nbsp;since&nbsp;the&nbsp;FileTransferClient&nbsp;and&nbsp;underlying&nbsp;transport&nbsp;already&nbsp;know&nbsp;the&nbsp;connection&nbsp;is&nbsp;no&nbsp;good.  &lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;https://gist.github.com/radifalco/5a5cca4bf8d49d5c61113e36f9be7553#file-sftp-py-L280-L297&quot;&gt;https://gist.github.com/radifalco/5a5cca4bf8d49d5c61113e36f9be7553#file-sftp-py-L280-L297&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2.&nbsp;I&nbsp;can&#39;t&nbsp;quite&nbsp;figure&nbsp;out&nbsp;the&nbsp;reconnect/retry&nbsp;logic&nbsp;when&nbsp;the&nbsp;server&nbsp;closes&nbsp;the&nbsp;connection.&nbsp;Because&nbsp;when&nbsp;it&nbsp;recreates&nbsp;the&nbsp;connection&nbsp;the&nbsp;SFTPFileTransferClient&nbsp;has&nbsp;already&nbsp;been&nbsp;sent&nbsp;to&nbsp;the&nbsp;deferred.&nbsp;Maybe&nbsp;I&nbsp;need&nbsp;to&nbsp;retain&nbsp;that&nbsp;instance&nbsp;and&nbsp;call&nbsp;makeConnection&nbsp;on&nbsp;it&nbsp;again&nbsp;and&nbsp;not&nbsp;fire&nbsp;the&nbsp;deferred?&nbsp;As&nbsp;you&nbsp;can&nbsp;see&nbsp;I&nbsp;tried&nbsp;that&nbsp;but&nbsp;it&nbsp;doesn&#39;t&nbsp;work. &lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Wed,&nbsp;Sep&nbsp;23,&nbsp;2020&nbsp;at&nbsp;9:43&nbsp;AM&nbsp;Glyph&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;overflow-wrap:&nbsp;break-word;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Sep&nbsp;22,&nbsp;2020,&nbsp;at&nbsp;3:47&nbsp;PM,&nbsp;Robert&nbsp;DiFalco&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robert.difalco@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robert.difalco@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:Menlo-Regular;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;text-decoration:none;float:none;display:inline&quot;&gt;Thanks!&nbsp;That&nbsp;is&nbsp;the&nbsp;full&nbsp;code.&nbsp;`connect`&nbsp;is&nbsp;from&nbsp;the&nbsp;conch&nbsp;library. &lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;clarify&nbsp;Adi&#39;s&nbsp;comment&nbsp;somewhat,&nbsp;the&nbsp;&quot;full&quot;&nbsp;code&nbsp;would&nbsp;mean&nbsp;following&nbsp;the&nbsp;rules&nbsp;of &lt;a&nbsp;href=&quot;http://sscce.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://sscce.org&lt;/a&gt; here;&nbsp;i.e.&nbsp;minimize&nbsp;the&nbsp;example&nbsp;to&nbsp;be&nbsp;runnable&nbsp;on&nbsp;its&nbsp;own,&nbsp;then&nbsp;attach&nbsp;the&nbsp;code&nbsp;as&nbsp;you&nbsp;actually&nbsp;run&nbsp;it&nbsp;(as&nbsp;a&nbsp;.py&nbsp;file,&nbsp;or&nbsp;in&nbsp;a&nbsp;link&nbsp;to&nbsp;a&nbsp;gist&nbsp;or&nbsp;a&nbsp;repo),&nbsp;rather&nbsp;than&nbsp;pasted&nbsp;into&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;email&nbsp;which&nbsp;can&nbsp;easily&nbsp;lead&nbsp;to&nbsp;transcription&nbsp;errors.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;example,&nbsp;when&nbsp;I&nbsp;do&nbsp;paste&nbsp;your&nbsp;code&nbsp;into&nbsp;a&nbsp;file&nbsp;and&nbsp;run&nbsp;it,&nbsp;what&nbsp;I&nbsp;get&nbsp;is:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;div&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp;File&nbsp;&quot;stuff.py&quot;,&nbsp;line&nbsp;1,&nbsp;in&nbsp;&lt;module&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp;@attr.s(frozen=True)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;NameError:&nbsp;name&nbsp;&#39;attr&#39;&nbsp;is&nbsp;not&nbsp;defined&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;yeah,&nbsp;one&nbsp;could&nbsp;guess&nbsp;as&nbsp;to&nbsp;where&nbsp;to&nbsp;get&nbsp;`import&nbsp;attr`,&nbsp;from&nbsp;—&nbsp;me&nbsp;especially&nbsp;;-)&nbsp;-&nbsp;but&nbsp;then&nbsp;we&nbsp;have&nbsp;to&nbsp;repeat&nbsp;that&nbsp;process&nbsp;for&nbsp;dozens&nbsp;of&nbsp;names,&nbsp;one&nbsp;at&nbsp;a&nbsp;time,&nbsp;gradually&nbsp;reassembling&nbsp;your&nbsp;code&nbsp;into&nbsp;something&nbsp;that&nbsp;approximates&nbsp;what&nbsp;it&nbsp;looked&nbsp;like&nbsp;to&nbsp;you;&nbsp;then&nbsp;we&nbsp;have&nbsp;to&nbsp;hook&nbsp;up&nbsp;your&nbsp;connection&nbsp;example&nbsp;to&nbsp;be&nbsp;runnable&nbsp;on&nbsp;its&nbsp;own,&nbsp;and&nbsp;after&nbsp;we&#39;re&nbsp;done&nbsp;guessing&nbsp;at&nbsp;all&nbsp;the&nbsp;imports&nbsp;we&nbsp;have&nbsp;to&nbsp;guess&nbsp;at&nbsp;the&nbsp;versions&nbsp;of&nbsp;things&nbsp;in&nbsp;your&nbsp;environment. &nbsp;So&nbsp;a&nbsp;`requires.txt`&nbsp;generated&nbsp;by&nbsp;`pip&nbsp;freeze`&nbsp;or&nbsp;similar&nbsp;would&nbsp;also&nbsp;be&nbsp;a&nbsp;helpful&nbsp;addition&nbsp;here,&nbsp;just&nbsp;so&nbsp;someone&nbsp;attempting&nbsp;to&nbsp;tinker&nbsp;with&nbsp;your&nbsp;code&nbsp;can&nbsp;quickly&nbsp;get&nbsp;to&nbsp;the&nbsp;point&nbsp;rather&nbsp;than&nbsp;spending&nbsp;lots&nbsp;of&nbsp;time&nbsp;setting&nbsp;up&nbsp;things&nbsp;you&#39;ve&nbsp;already&nbsp;done.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;using&nbsp;Twisted,&nbsp;and&nbsp;good&nbsp;luck&nbsp;with&nbsp;Conch!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
