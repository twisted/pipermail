<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7651.59&quot;&gt;<br>
&lt;TITLE&gt;How&nbsp;does&nbsp;the&nbsp;pollreactor&nbsp;work?&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Hi,&nbsp;there.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I&nbsp;have&nbsp;been&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;use&nbsp;the&nbsp;twisted.internet.pollreactor&nbsp;so&nbsp;that&nbsp;I&nbsp;can&nbsp;use&nbsp;it&nbsp;to&nbsp;monitor&nbsp;a&nbsp;Linux&nbsp;named&nbsp;PIPE&nbsp;(i.e.&nbsp;a&nbsp;FIFO&nbsp;created&nbsp;using&nbsp;mkfifo()).&nbsp;&nbsp;I&nbsp;tried&nbsp;without&nbsp;success&nbsp;to&nbsp;Google&nbsp;some&nbsp;examples&nbsp;but&nbsp;I&nbsp;couldn't&nbsp;find&nbsp;anything.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Now,&nbsp;for&nbsp;a&nbsp;simple&nbsp;TCP&nbsp;server,&nbsp;the&nbsp;setup&nbsp;looks&nbsp;something&nbsp;like&nbsp;this&nbsp;(i.e.&nbsp;like&nbsp;the&nbsp;QOTD&nbsp;example&nbsp;in&nbsp;the&nbsp;documentation):&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;Protocol,&nbsp;Factory&lt;BR&gt;<br>
from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;BR&gt;<br>
&lt;BR&gt;<br>
class&nbsp;QOTD(Protocol):&lt;BR&gt;<br>
&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.transport.write(&quot;An&nbsp;apple&nbsp;a&nbsp;day&nbsp;keeps&nbsp;the&nbsp;doctor&nbsp;away\r\n&quot;)&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.transport.loseConnection()&lt;BR&gt;<br>
&lt;BR&gt;<br>
#&nbsp;Next&nbsp;lines&nbsp;are&nbsp;magic:&lt;BR&gt;<br>
factory&nbsp;=&nbsp;Factory()&lt;BR&gt;<br>
factory.protocol&nbsp;=&nbsp;QOTD&lt;BR&gt;<br>
&lt;BR&gt;<br>
#&nbsp;8007&nbsp;is&nbsp;the&nbsp;port&nbsp;you&nbsp;want&nbsp;to&nbsp;run&nbsp;under.&nbsp;Choose&nbsp;something&nbsp;&gt;1024&lt;BR&gt;<br>
reactor.listenTCP(8007,&nbsp;factory)&lt;BR&gt;<br>
reactor.run()&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;/UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;So,&nbsp;the&nbsp;TCP&nbsp;type&nbsp;of&nbsp;reactor&nbsp;has&nbsp;something&nbsp;that&nbsp;tells&nbsp;it&nbsp;to&nbsp;listen&nbsp;to&nbsp;port&nbsp;8007&nbsp;and&nbsp;use&nbsp;some&nbsp;form&nbsp;of&nbsp;factory&nbsp;or&nbsp;object&nbsp;to&nbsp;take&nbsp;care&nbsp;of&nbsp;things&nbsp;when&nbsp;a&nbsp;connection&nbsp;occurs.&nbsp;&nbsp;As&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;guess,&nbsp;I&nbsp;would&nbsp;need&nbsp;to&nbsp;do&nbsp;some&nbsp;steps&nbsp;like&nbsp;this&nbsp;(NOTE:&nbsp;using&nbsp;mixture&nbsp;of&nbsp;real&nbsp;and&nbsp;pseudo&nbsp;code):&lt;/FONT&gt;&lt;/P&gt;<br>
&lt;UL&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;pollreactor&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;pollreactor.install()&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&lt;create&nbsp;a&nbsp;FileDescriptor&nbsp;object&nbsp;using&nbsp;/tmp/myfifo,&nbsp;maybe&nbsp;a&nbsp;class?&gt;&lt;/FONT&gt;&lt;/SPAN&gt;<br>
<br>
&lt;BR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&lt;use&nbsp;the&nbsp;reactor.addReader()&nbsp;call&nbsp;to&nbsp;register&nbsp;the&nbsp;FileDescriptor&nbsp;object&nbsp;with&nbsp;the&nbsp;reactor&gt;&lt;/FONT&gt;&lt;/SPAN&gt;<br>
<br>
&lt;BR&gt;&lt;SPAN&nbsp;LANG=&quot;en-us&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Courier&nbsp;New&quot;&gt;&lt;call&nbsp;reactor.run()&nbsp;(no&nbsp;loop)&nbsp;or&nbsp;call&nbsp;reactor.doPoll()&nbsp;(in&nbsp;a&nbsp;loop,&nbsp;processing&nbsp;returned&nbsp;events)?&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;/SPAN&gt;<br>
&lt;/P&gt;<br>
&lt;/UL&gt;<br>
&lt;P&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Anyways,&nbsp;if&nbsp;anyone&nbsp;can&nbsp;give&nbsp;me&nbsp;some&nbsp;direction&nbsp;on&nbsp;how&nbsp;this&nbsp;reactor&nbsp;works.&nbsp;&nbsp;Ideally,&nbsp;I&nbsp;would&nbsp;assume&nbsp;that&nbsp;the&nbsp;relationships&nbsp;would&nbsp;be&nbsp;somewhat&nbsp;like&nbsp;this:&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;UL&gt;<br>
&lt;P&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Protocol&nbsp;analogous&nbsp;to&nbsp;FileDescriptor&lt;/FONT&gt;&lt;/SPAN&gt;<br>
<br>
&lt;BR&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;reactor.listenTCP&nbsp;analogous&nbsp;to&nbsp;reactor.addReader()&lt;/FONT&gt;&lt;/SPAN&gt;<br>
<br>
&lt;BR&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;reactor.run()&nbsp;would&nbsp;invoke&nbsp;the&nbsp;appropriate&nbsp;call&nbsp;in&nbsp;my&nbsp;FileDescriptor-based&nbsp;class&nbsp;to&nbsp;handle&nbsp;any&nbsp;read&nbsp;events&nbsp;on&nbsp;/tmp/myfifo&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;/UL&gt;<br>
&lt;P&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Thanks&nbsp;in&nbsp;advance.&lt;/FONT&gt;&lt;/SPAN&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;SPAN&nbsp;LANG=&quot;en-ca&quot;&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;-Rodney&lt;/FONT&gt;&lt;/SPAN&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
