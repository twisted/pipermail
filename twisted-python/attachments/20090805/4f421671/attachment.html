<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;5,&nbsp;2009&nbsp;at&nbsp;6:04&nbsp;PM,&nbsp;John&nbsp;Aherne&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:johnaherne@rocs.co.uk&quot;&gt;johnaherne@rocs.co.uk&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2.&nbsp;If&nbsp;you&nbsp;have&nbsp;blocking&nbsp;code&nbsp;-&nbsp;&lt;i&gt;please&nbsp;define&nbsp;blocking&lt;/i&gt;&nbsp;:),&nbsp;then&nbsp;first&nbsp;think&nbsp;about&nbsp; putting&nbsp;it&nbsp;into&nbsp;deferToThread&nbsp;with&nbsp;appropriate&nbsp;callbacks&nbsp;and&nbsp;return&nbsp;the&nbsp;deferred.&nbsp;As&nbsp;suggested&nbsp;by&nbsp;Jarrod&nbsp;in&nbsp;his&nbsp;response.&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;blocking&nbsp;code&nbsp;is&nbsp;code&nbsp;that&nbsp;will&nbsp;block&nbsp;or&nbsp;may&nbsp;potentially&nbsp;block&nbsp;the&nbsp;continued&nbsp;execution&nbsp;of&nbsp;the&nbsp;main&nbsp;reactor&nbsp;thread.&lt;br&gt;think&nbsp;for&nbsp;the&nbsp;most&nbsp;part&nbsp;long&nbsp;running&nbsp;processes&nbsp;or&nbsp;operations&nbsp;that&nbsp;may&nbsp;be&nbsp;long&nbsp;running.&lt;br&gt;<br>
doing&nbsp;file&nbsp;or&nbsp;network&nbsp;i/o,&nbsp;calculating&nbsp;cpu&nbsp;intensive&nbsp;work,&nbsp;operations&nbsp;that&nbsp;may&nbsp;timeout&nbsp;like&nbsp;doing&nbsp;a&nbsp;remote&nbsp;call&nbsp;to&nbsp;another&nbsp;process&nbsp;or&nbsp;host&nbsp;machine,&nbsp;database&nbsp;operations&nbsp;are&nbsp;usually&nbsp;a&nbsp;culprit,&nbsp;that&nbsp;may&nbsp;be&nbsp;flooded&nbsp;with&nbsp;work&nbsp;or&nbsp;crashed,&nbsp;the&nbsp;examples&nbsp;go&nbsp;on&nbsp;but&nbsp;are&nbsp;mainly&nbsp;about&nbsp;i/o&nbsp;and&nbsp;cpu&nbsp;intensive&nbsp;operations.&lt;br&gt;<br>
when&nbsp;these&nbsp;things&nbsp;happen&nbsp;on&nbsp;the&nbsp;reactor&nbsp;/&nbsp;main&nbsp;thread&nbsp;they&nbsp;block&nbsp;the&nbsp;server&nbsp;from&nbsp;doing&nbsp;anything&nbsp;else,&nbsp;it&nbsp;can&#39;t&nbsp;accept&nbsp;new&nbsp;connections,&nbsp;it&nbsp;can&#39;t&nbsp;do&nbsp;anything&nbsp;else&nbsp;until&nbsp;this&nbsp;blocking&nbsp;activity&nbsp;has&nbsp;completed&nbsp;and&nbsp;returned&nbsp;control&nbsp;to&nbsp;the&nbsp;reactor&nbsp;thread.&lt;br&gt;<br>
&lt;br&gt;you&nbsp;can&nbsp;handle&nbsp;this&nbsp;without&nbsp;deferToThread&nbsp;by&nbsp;breaking&nbsp;the&nbsp;blocking&nbsp;code&nbsp;up&nbsp;into&nbsp;smaller&nbsp;pieces&nbsp;sometimes.&nbsp;need&nbsp;to&nbsp;transfer&nbsp;a&nbsp;large&nbsp;file&nbsp;to&nbsp;a&nbsp;socket,&nbsp;instead&nbsp;of&nbsp;trying&nbsp;to&nbsp;send&nbsp;it&nbsp;all&nbsp;at&nbsp;once&nbsp;send&nbsp;10KB&nbsp;at&nbsp;a&nbsp;time&nbsp;and&nbsp;yield&nbsp;back&nbsp;to&nbsp;the&nbsp;reactor&nbsp;and&nbsp;reschedule&nbsp;the&nbsp;next&nbsp;10KB&nbsp;until&nbsp;finished,&nbsp;this&nbsp;will&nbsp;work,&nbsp;it&nbsp;might&nbsp;not&nbsp;be&nbsp;the&nbsp;fastest&nbsp;way&nbsp;and&nbsp;still&nbsp;may&nbsp;block&nbsp;for&nbsp;an&nbsp;unacceptable&nbsp;amount&nbsp;of&nbsp;time&nbsp;on&nbsp;just&nbsp;10KB,&nbsp;depending&nbsp;on&nbsp;how&nbsp;heavily&nbsp;taxed&nbsp;the&nbsp;i/o&nbsp;system&nbsp;is&nbsp;at&nbsp;the&nbsp;moment.&nbsp;Usually&nbsp;deferToThread&nbsp;is&nbsp;just&nbsp;easier&nbsp;to&nbsp;implement.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>

</tt>
