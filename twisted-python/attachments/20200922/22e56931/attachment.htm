<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hey&nbsp;folks,&nbsp;I&#39;ve&nbsp;cobbled&nbsp;together&nbsp;an&nbsp;SFTP&nbsp;client&nbsp;based&nbsp;on&nbsp;bits&nbsp;and&nbsp;pieces&nbsp;I&#39;ve&nbsp;found&nbsp;around&nbsp;the&nbsp;web.&nbsp;The&nbsp;issue&nbsp;is&nbsp;that&nbsp;it&nbsp;appears&nbsp;to&nbsp;be&nbsp;almost&nbsp;one&nbsp;shot.&nbsp;I&nbsp;will&nbsp;need&nbsp;to&nbsp;send&nbsp;many&nbsp;files&nbsp;(the&nbsp;number&nbsp;not&nbsp;known&nbsp;ahead&nbsp;of&nbsp;time).&nbsp;It&#39;s&nbsp;not&nbsp;clear&nbsp;to&nbsp;me&nbsp;when&nbsp;the&nbsp;connection&nbsp;is&nbsp;closed&nbsp;or&nbsp;how&nbsp;many&nbsp;factories&nbsp;I&#39;m&nbsp;creating.&nbsp;All&nbsp;the&nbsp;code&nbsp;I&#39;ve&nbsp;grabbed&nbsp;looks&nbsp;like&nbsp;it&#39;s&nbsp;creating&nbsp;a&nbsp;new&nbsp;factory&nbsp;for&nbsp;every&nbsp;SFTP&nbsp;file&nbsp;I&nbsp;send.&nbsp;Here&#39;s&nbsp;some&nbsp;of&nbsp;the&nbsp;code&nbsp;I&nbsp;have.&nbsp;It&#39;s&nbsp;fairly&nbsp;straight forward&nbsp;in&nbsp;that&nbsp;it&nbsp;creates&nbsp;a&nbsp;directory&nbsp;if&nbsp;it&nbsp;doesn&#39;t&nbsp;exist&nbsp;and&nbsp;then&nbsp;writes&nbsp;a&nbsp;file. &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;background-color:rgb(43,43,43);color:rgb(169,183,198);font-family:Menlo;font-size:9pt&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;@attr.s&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;frozen&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;True&lt;/span&gt;)&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;class&nbsp;&lt;/span&gt;FileInfo(&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;object&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Class&nbsp;that&nbsp;tells&nbsp;SFTP&nbsp;details&nbsp;about&nbsp;the&nbsp;file&nbsp;to&nbsp;send.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;directory&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;name&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;data&nbsp;=&nbsp;attr.ib()&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;chunk_size&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;int&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;default&lt;/span&gt;=CHUNK_SIZE)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;int&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;to_path&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Turns&nbsp;the&nbsp;folder&nbsp;and&nbsp;file&nbsp;name&nbsp;into&nbsp;a&nbsp;file&nbsp;path.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.directory&nbsp;+&nbsp;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;/&quot;&nbsp;&lt;/span&gt;+&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.name&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;@attr.s&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;frozen&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;True&lt;/span&gt;)&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;class&nbsp;&lt;/span&gt;SFTPClientOptions(&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;object&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Client&nbsp;options&nbsp;for&nbsp;sending&nbsp;SFTP&nbsp;files.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;host:&nbsp;the&nbsp;host&nbsp;of&nbsp;the&nbsp;SFTP&nbsp;server&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;port:&nbsp;the&nbsp;port&nbsp;ofo&nbsp;the&nbsp;SFTP&nbsp;server&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;fingerprint:&nbsp;the&nbsp;expected&nbsp;fingerprint&nbsp;of&nbsp;the&nbsp;host&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;user:&nbsp;the&nbsp;user&nbsp;to&nbsp;login&nbsp;as&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;identity:&nbsp;the&nbsp;identity&nbsp;file,&nbsp;optional&nbsp;and&nbsp;like&nbsp;the&nbsp;&quot;-i&quot;&nbsp;command&nbsp;line&nbsp;option&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;password:&nbsp;an&nbsp;optional&nbsp;password&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;host&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;port&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;int&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;int&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;fingerprint&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;user&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;identity&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=optional(&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;default&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;None&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;Optional[&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;]&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;password&nbsp;=&nbsp;attr.ib(&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;converter&lt;/span&gt;=optional(&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;)&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;default&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;None&lt;/span&gt;)&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;Optional[&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;]&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;@inlineCallbacks&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;sftp_send&lt;/span&gt;(client_options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;file_info):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;(SFTPClientOptions,&nbsp;FileInfo)-&gt;Deferred&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Primary&nbsp;function&nbsp;to&nbsp;send&nbsp;an&nbsp;file&nbsp;over&nbsp;SFTP.&nbsp;You&nbsp;can&nbsp;send&nbsp;a&nbsp;password,&nbsp;identity,&nbsp;or&nbsp;both.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;client_options:&nbsp;the&nbsp;client&nbsp;connection&nbsp;options&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;file_info:&nbsp;contains&nbsp;the&nbsp;file&nbsp;info&nbsp;to&nbsp;write&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:return&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;:&nbsp;A&nbsp;deferred&nbsp;that&nbsp;signals&nbsp;&quot;OK&quot;&nbsp;if&nbsp;successful.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;options&nbsp;=&nbsp;ClientOptions()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;options[&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;host&quot;&lt;/span&gt;]&nbsp;=&nbsp;client_options.host&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;options[&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;port&quot;&lt;/span&gt;]&nbsp;=&nbsp;client_options.port&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;options[&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;password&quot;&lt;/span&gt;]&nbsp;=&nbsp;client_options.password&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;options[&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;fingerprint&quot;&lt;/span&gt;]&nbsp;=&nbsp;client_options.fingerprint&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;if&nbsp;&lt;/span&gt;client_options.identity:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options.identitys&nbsp;=&nbsp;[client_options.identity]&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;=&nbsp;SFTPConnection()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;auth&nbsp;=&nbsp;SFTPUserAuthClient(client_options.user&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;conn)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;connect(client_options.host&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;client_options.port&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;_verify_host_key&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;auth)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;sftpClient&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;conn.getSftpClientDeferred()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;_send_file(sftpClient&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;file_info)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;returnValue(&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;OK&quot;&lt;/span&gt;)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;_verify_host_key&lt;/span&gt;(transport&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;host&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;pubKey&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;fingerprint):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Verify&nbsp;a&nbsp;host&#39;s&nbsp;key.&nbsp;Based&nbsp;on&nbsp;what&nbsp;is&nbsp;specified&nbsp;in&nbsp;options.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@param&nbsp;host:&nbsp;Due&nbsp;to&nbsp;a&nbsp;bug&nbsp;in&nbsp;L{SSHClientTransport.verifyHostKey},&nbsp;this&nbsp;is&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;always&nbsp;the&nbsp;dotted-quad&nbsp;IP&nbsp;address&nbsp;of&nbsp;the&nbsp;host&nbsp;being&nbsp;connected&nbsp;to.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@type&nbsp;host:&nbsp;L{str}&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@param&nbsp;transport:&nbsp;the&nbsp;client&nbsp;transport&nbsp;which&nbsp;is&nbsp;attempting&nbsp;to&nbsp;connect&nbsp;to&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;host.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@type&nbsp;transport:&nbsp;L{SSHClientTransport}&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@param&nbsp;fingerprint:&nbsp;the&nbsp;fingerprint&nbsp;of&nbsp;the&nbsp;given&nbsp;public&nbsp;key,&nbsp;in&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;xx:xx:xx:...&nbsp;format.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@param&nbsp;pubKey:&nbsp;The&nbsp;public&nbsp;key&nbsp;of&nbsp;the&nbsp;server&nbsp;being&nbsp;connected&nbsp;to.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@type&nbsp;pubKey:&nbsp;L{str}&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;@return:&nbsp;a&nbsp;L{Deferred}&nbsp;which&nbsp;is&nbsp;success&nbsp;or&nbsp;error&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;expected&nbsp;=&nbsp;transport.factory.options.get(&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;fingerprint&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;no_fingerprint&quot;&lt;/span&gt;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;if&nbsp;&lt;/span&gt;fingerprint&nbsp;==&nbsp;expected:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;succeed(&lt;span&nbsp;style=&quot;color:rgb(104,151,187)&quot;&gt;1&lt;/span&gt;)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;log.error(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;SSH&nbsp;Host&nbsp;Key&nbsp;fingerprint&nbsp;of&nbsp;({fp})&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;expected&nbsp;value&nbsp;of&nbsp;({expected}).&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;fp&lt;/span&gt;=fingerprint&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;expected&lt;/span&gt;=expected)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;fail(ConchError(&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;Host&nbsp;fingerprint&nbsp;is&nbsp;unexpected.&quot;&lt;/span&gt;))&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;class&nbsp;&lt;/span&gt;SFTPSession(SSHChannel):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Creates&nbsp;an&nbsp;SFTP&nbsp;session.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;name&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;session&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;@inlineCallbacks&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;channelOpen&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;whatever):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called&nbsp;when&nbsp;the&nbsp;channel&nbsp;is&nbsp;opened.&nbsp;&nbsp;&quot;whatever&quot;&nbsp;is&nbsp;any&nbsp;data&nbsp;that&nbsp;the&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;side&nbsp;sent&nbsp;us&nbsp;when&nbsp;opening&nbsp;the&nbsp;channel.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@type&nbsp;whatever:&nbsp;L{bytes}&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.conn.sendRequest(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;subsystem&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;NS(&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;sftp&quot;&lt;/span&gt;)&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;wantReply&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;True&lt;/span&gt;)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;=&nbsp;FileTransferClient()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client.makeConnection(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.dataReceived&nbsp;=&nbsp;client.dataReceived&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.conn.notifyClientIsReady(client)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;class&nbsp;&lt;/span&gt;SFTPConnection(SSHConnection):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(178,0,178)&quot;&gt;__init__&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds&nbsp;a&nbsp;deferred&nbsp;here&nbsp;so&nbsp;client&nbsp;can&nbsp;add&nbsp;a&nbsp;callback&nbsp;when&nbsp;the&nbsp;SFTP&nbsp;client&nbsp;is&nbsp;ready.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;SSHConnection.&lt;span&nbsp;style=&quot;color:rgb(178,0,178)&quot;&gt;__init__&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;._sftpClient&nbsp;=&nbsp;Deferred()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;serviceStarted&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Opens&nbsp;an&nbsp;SFTP&nbsp;session&nbsp;when&nbsp;the&nbsp;SSH&nbsp;connection&nbsp;has&nbsp;been&nbsp;started.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.openChannel(SFTPSession())&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;notifyClientIsReady&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;client):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Trigger&nbsp;callbacks&nbsp;associated&nbsp;with&nbsp;our&nbsp;SFTP&nbsp;client&nbsp;deferred.&nbsp;It&#39;s&nbsp;ready!&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;._sftpClient.callback(client)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;getSftpClientDeferred&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;._sftpClient&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;class&nbsp;&lt;/span&gt;SFTPUserAuthClient(SSHUserAuthClient):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Twisted&nbsp;Conch&nbsp;doesn&#39;t&nbsp;have&nbsp;a&nbsp;way&nbsp;of&nbsp;getting&nbsp;a&nbsp;password.&nbsp;By&nbsp;default&nbsp;it&nbsp;gets&nbsp;it&nbsp;from&nbsp;stdin.&nbsp;This&nbsp;allows&nbsp;it&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;retrieved&nbsp;from&nbsp;options&nbsp;instead.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;getPassword&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;prompt&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;None&lt;/span&gt;):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get&nbsp;the&nbsp;password&nbsp;from&nbsp;the&nbsp;client&nbsp;options,&nbsp;is&nbsp;specified.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;if&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;password&quot;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;in&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;succeed(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options[&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;password&quot;&lt;/span&gt;])&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;SSHUserAuthClient.getPassword(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;prompt)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;@inlineCallbacks&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;_send_file&lt;/span&gt;(client&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;file_info):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;(FileTransferClient,&nbsp;FileInfo)&nbsp;-&gt;&nbsp;Deferred&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Creates&nbsp;a&nbsp;directory&nbsp;if&nbsp;required&nbsp;and&nbsp;then&nbsp;creates&nbsp;the&nbsp;file.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;client:&nbsp;the&nbsp;SFTP&nbsp;client&nbsp;to&nbsp;use&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;file_info:&nbsp;contains&nbsp;file&nbsp;name,&nbsp;directory,&nbsp;and&nbsp;data&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;try&lt;/span&gt;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;client.makeDirectory(file_info.directory&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;{})&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;except&nbsp;&lt;/span&gt;SFTPError&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;as&nbsp;&lt;/span&gt;e:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;In&nbsp;testing&nbsp;on&nbsp;various&nbsp;system,&nbsp;either&nbsp;a&nbsp;4&nbsp;or&nbsp;an&nbsp;11&nbsp;will&nbsp;indicate&nbsp;the&nbsp;directory&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;already&nbsp;exist.&nbsp;We&nbsp;are&nbsp;fine&nbsp;with&nbsp;that&nbsp;and&nbsp;want&nbsp;to&nbsp;continue&nbsp;if&nbsp;it&nbsp;does.&nbsp;If&nbsp;we&nbsp;misinterpreted&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;error&nbsp;code&nbsp;here&nbsp;we&nbsp;are&nbsp;probably&nbsp;still&nbsp;ok&nbsp;since&nbsp;we&nbsp;will&nbsp;just&nbsp;get&nbsp;the&nbsp;more&nbsp;systemic&nbsp;error&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;again&nbsp;on&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;openFile.&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;if&nbsp;&lt;/span&gt;e.code&nbsp;!=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(104,151,187)&quot;&gt;4&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;and&nbsp;&lt;/span&gt;e.code&nbsp;!=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(104,151,187)&quot;&gt;11&lt;/span&gt;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;raise&nbsp;&lt;/span&gt;e&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;f&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;client.openFile(file_info.to_path()&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;FXF_WRITE&nbsp;|&nbsp;FXF_CREAT&nbsp;|&nbsp;FXF_TRUNC&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;{})&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;try&lt;/span&gt;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;_write_chunks(f&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;file_info.data&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;file_info.chunk_size)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;finally&lt;/span&gt;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;f.close()&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(187,181,41)&quot;&gt;@inlineCallbacks&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;_write_chunks&lt;/span&gt;(f&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;data&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;chunk_size):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;type:&nbsp;(ClientFile,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;str&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;int&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;)&nbsp;-&gt;&nbsp;Deferred&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;Convenience&nbsp;function&nbsp;to&nbsp;write&nbsp;data&nbsp;in&nbsp;chunks&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;f:&nbsp;the&nbsp;file&nbsp;to&nbsp;write&nbsp;to&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;data:&nbsp;the&nbsp;data&nbsp;to&nbsp;write&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-weight:bold;font-style:italic&quot;&gt;:param&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;chunk_size:&nbsp;the&nbsp;chunk&nbsp;size&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(98,151,85);font-style:italic&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;for&nbsp;&lt;/span&gt;offset&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;in&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;range&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(104,151,187)&quot;&gt;0&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;len&lt;/span&gt;(data)&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;chunk_size):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chunk&nbsp;=&nbsp;data[offset:&nbsp;offset&nbsp;+&nbsp;chunk_size]&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;yield&nbsp;&lt;/span&gt;f.writeChunk(offset&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;chunk)&lt;br&gt;&lt;/pre&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;gets&nbsp;called&nbsp;like&nbsp;this:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;background-color:rgb(43,43,43);color:rgb(169,183,198);font-family:Menlo;font-size:9pt&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;sftp.sftp_send(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;client_options&lt;/span&gt;=SFTPClientOptions(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;host&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.host&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;port&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.port&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;user&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.user&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;fingerprint&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.fingerprint&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;identity&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;getattr&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;identity&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;None&lt;/span&gt;)&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;password&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;._getPassword())&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;file_info&lt;/span&gt;=sftp.FileInfo(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;directory&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.directory&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;name&lt;/span&gt;=fileName&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;data&lt;/span&gt;=data&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;chunk_size&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;getattr&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;chunkSize&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;sftp.CHUNK_SIZE)))&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;I&nbsp;supposed&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;see&nbsp;something&nbsp;more&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;background-color:rgb(43,43,43);color:rgb(169,183,198);font-family:Menlo;font-size:9pt&quot;&gt;sftpClient&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.getSftpClient(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;client_options&lt;/span&gt;=SFTPClientOptions(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;host&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.host&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;port&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.port&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;user&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.user&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;fingerprint&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.fingerprint&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;identity&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;getattr&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;identity&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;None&lt;/span&gt;)&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;password&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;._getPassword()))&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;sftpClient.send(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;file_info&lt;/span&gt;=sftp.FileInfo(&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;directory&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options.directory&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;name&lt;/span&gt;=fileName&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;data&lt;/span&gt;=data&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(170,73,38)&quot;&gt;chunk_size&lt;/span&gt;=&lt;span&nbsp;style=&quot;color:rgb(136,136,198)&quot;&gt;getattr&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.options&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(165,194,97)&quot;&gt;&quot;chunkSize&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;sftp.CHUNK_SIZE)))&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;Where&nbsp;sftpClient&nbsp;reuses&nbsp;the&nbsp;existing&nbsp;SSH&nbsp;connection&nbsp;if&nbsp;it&nbsp;is&nbsp;active&nbsp;(rather&nbsp;than&nbsp;logging&nbsp;in&nbsp;each&nbsp;time).&nbsp;But&nbsp;maybe&nbsp;the&nbsp;sftp&nbsp;service&nbsp;doesn&#39;t&nbsp;multiplex&nbsp;so&nbsp;I&nbsp;have&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;SSHClientFactory&nbsp;every&nbsp;time&nbsp;I&nbsp;want&nbsp;to&nbsp;send&nbsp;a&nbsp;distinct&nbsp;file? &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;for&nbsp;all&nbsp;the&nbsp;questions,&nbsp;new&nbsp;to&nbsp;twisted&nbsp;and&nbsp;a&nbsp;bit&nbsp;confused.&nbsp;Thanks!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
