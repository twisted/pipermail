<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Dec&nbsp;10,&nbsp;2013&nbsp;at&nbsp;9:41&nbsp;AM,&nbsp;Phil&nbsp;Mayers&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:p.mayers@imperial.ac.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;p.mayers@imperial.ac.uk&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
Unless&nbsp;you&nbsp;set&nbsp;the&nbsp;appropriate&nbsp;verify&nbsp;options&nbsp;on&nbsp;the&nbsp;server&nbsp;side&nbsp;too,&nbsp;the&nbsp;client&nbsp;cert&nbsp;isn&#39;t&nbsp;available&nbsp;for&nbsp;inspection.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A-ha!&nbsp;But&nbsp;I&nbsp;want&nbsp;to&nbsp;do&nbsp;TOFU-POP;&nbsp;the&nbsp;certs&nbsp;are&nbsp;generated&nbsp;by&nbsp;the&nbsp;client,&nbsp;and&nbsp;there&#39;s&nbsp;little&nbsp;point&nbsp;in&nbsp;me&nbsp;signing&nbsp;them&nbsp;(I&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;verify&nbsp;that&nbsp;I&nbsp;ever&nbsp;signed&nbsp;them&nbsp;somewhere&nbsp;else).&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;context&nbsp;factory&nbsp;I&nbsp;got&nbsp;from&nbsp;PrivateCertificate.options()&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;do&nbsp;what&nbsp;I&nbsp;want,&nbsp;so&nbsp;I&nbsp;wrote&nbsp;my&nbsp;own&nbsp;SSL&nbsp;ContextFactory&nbsp;like&nbsp;it&#39;s&nbsp;1999;&nbsp;I&nbsp;used&nbsp;VERIFY_PEER&nbsp;with&nbsp;a&nbsp;callback&nbsp;that&nbsp;always&nbsp;claims&nbsp;it&nbsp;validated:&lt;br&gt;<br>
<br>
&lt;br&gt;class&nbsp;ContextFactory(object):&lt;br&gt;   &nbsp;def&nbsp;getContext(self):&lt;br&gt;       &nbsp;ctx&nbsp;=&nbsp;Context(TLSv1_METHOD)&lt;br&gt;       &nbsp;ctx.use_certificate_file(&quot;cert.pem&quot;)&lt;br&gt;       &nbsp;ctx.use_privatekey_file(&quot;key.pem&quot;)&lt;br&gt;       &nbsp;ctx.set_verify(VERIFY_PEER,&nbsp;_verify)&lt;br&gt;<br>
<br>
       &nbsp;return&nbsp;ctx&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;_verify(connection,&nbsp;x509,&nbsp;errorNumber,&nbsp;errorDepth,&nbsp;returnCode):&lt;br&gt;   &nbsp;&quot;&quot;&quot;Always&nbsp;pretend&nbsp;the&nbsp;certificate&nbsp;verified.&lt;br&gt;&lt;br&gt;   &nbsp;&quot;&quot;&quot;&lt;br&gt;   &nbsp;return&nbsp;True&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Does&nbsp;that&nbsp;sound&nbsp;about&nbsp;right,&nbsp;or&nbsp;is&nbsp;there&nbsp;an&nbsp;easier&nbsp;way&nbsp;to&nbsp;do&nbsp;this?&nbsp;(Yeah,&nbsp;yeah,&nbsp;don&#39;t&nbsp;hardcode&nbsp;paths&nbsp;etc&nbsp;:))&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cheers&lt;br&gt;lvh&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
