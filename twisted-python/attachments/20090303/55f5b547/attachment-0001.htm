<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;3,&nbsp;2009&nbsp;at&nbsp;2:04&nbsp;PM,&nbsp;Tim&nbsp;Allen&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:screwtape@froup.com&quot;&gt;screwtape@froup.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;03,&nbsp;2009&nbsp;at&nbsp;01:17:48PM&nbsp;+0100,&nbsp;Pet&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;what&nbsp;is&nbsp;a&nbsp;proper&nbsp;way&nbsp;to&nbsp;escape&nbsp;user&nbsp;input&nbsp;in&nbsp;database&nbsp;query&nbsp;strings?&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;ve&nbsp;used&nbsp;quote&nbsp;from&nbsp;twisted.enterprise.util,&nbsp;but&nbsp;it&nbsp;is&nbsp;deprecated&nbsp;now.&lt;br&gt;<br>
&amp;gt;&nbsp;Is&nbsp;there&nbsp;any&nbsp;other&nbsp;module&nbsp;for&nbsp;this&nbsp;purpose?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;The&nbsp;correct&nbsp;way&nbsp;to&nbsp;escape&nbsp;user&nbsp;input&nbsp;is&nbsp;not&nbsp;to&nbsp;do&nbsp;it&nbsp;at&nbsp;all,&nbsp;but&nbsp;rather&lt;br&gt;<br>
to&nbsp;leave&nbsp;it&nbsp;up&nbsp;to&nbsp;the&nbsp;DB-API&nbsp;module&nbsp;you&amp;#39;re&nbsp;using:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; from&nbsp;twisted.enterprise.adbapi&nbsp;import&nbsp;ConnectionPool&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; pool&nbsp;=&nbsp;ConnectionPool(&amp;quot;psycopg2&amp;quot;)&lt;br&gt;<br>
&nbsp; &nbsp; d&nbsp;=&nbsp;pool.runQuery(&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; SELECT&nbsp;*&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; FROM&nbsp;students&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; WHERE&nbsp;name&nbsp;=&nbsp;%s&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &amp;quot;&amp;quot;&amp;quot;,&nbsp;&amp;quot;Robert&nbsp;&amp;#39;);&nbsp;DROP&nbsp;TABLE&nbsp;students;--&amp;quot;)&lt;br&gt;<br>
&lt;br&gt;<br>
Note&nbsp;that&nbsp;although&nbsp;I&amp;#39;ve&nbsp;used&nbsp;&amp;quot;%s&amp;quot;&nbsp;in&nbsp;the&nbsp;query,&nbsp;this&nbsp;is&nbsp;not&nbsp;normal&lt;br&gt;<br>
Python&nbsp;string-formatting,&nbsp;the&nbsp;&amp;quot;%s&amp;quot;&nbsp;is&nbsp;just&nbsp;tells&nbsp;the&nbsp;DB-API&nbsp;module&nbsp;I&amp;#39;m&lt;br&gt;<br>
using&nbsp;(in&nbsp;this&nbsp;case,&nbsp;psycopg2&nbsp;for&nbsp;PostgreSQL)&nbsp;to&nbsp;quote&nbsp;one&nbsp;of&nbsp;the&nbsp;extra&lt;br&gt;<br>
parameters&nbsp;and&nbsp;insert&nbsp;in&nbsp;that&nbsp;spot.&nbsp;Look&nbsp;up&nbsp;&amp;quot;paramstyle&amp;quot;&nbsp;in&nbsp;the&nbsp;DB-API&lt;br&gt;<br>
spec[1]&nbsp;and&nbsp;the&nbsp;documentation&nbsp;for&nbsp;the&nbsp;DB-API&nbsp;module&nbsp;you&amp;#39;re&nbsp;using&nbsp;for&lt;br&gt;<br>
more&nbsp;details.&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&nbsp;&lt;a&nbsp;href=&quot;http://www.python.org/dev/peps/pep-0249/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.python.org/dev/peps/pep-0249/&lt;/a&gt;&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;all&nbsp;your&nbsp;answers!&nbsp;It&nbsp;works&nbsp;fine&nbsp;in&nbsp;that&nbsp;way.&nbsp;But&nbsp;what,&nbsp;if&nbsp;I&nbsp;compose&nbsp;my&nbsp;query?&nbsp;For&nbsp;example:&lt;br&gt;&lt;br&gt;def&nbsp;getData(self,&nbsp;type=&amp;#39;&amp;#39;):&lt;br&gt;   &nbsp;id&nbsp;=&nbsp;1&lt;br&gt;   &nbsp;if&nbsp;type:&lt;br&gt;       &nbsp;str&nbsp;=&nbsp;&amp;quot;&nbsp;AND&nbsp;mytype&nbsp;=&nbsp;%s&nbsp;&amp;quot;&nbsp;%&nbsp;type&lt;br&gt;<br>
   &nbsp;str&nbsp;=&nbsp;&amp;#39;&amp;#39;&lt;br&gt;   &nbsp;query&nbsp;=&nbsp;&amp;quot;SELECT&nbsp;*&nbsp;FROM&nbsp;table&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;%s&nbsp;%s&nbsp;&amp;quot;&nbsp;%&nbsp;(id,str)&lt;br&gt;   &nbsp;cur.execute(query)&lt;br&gt;&lt;br&gt;I&nbsp;mean,&nbsp;str&nbsp;part&nbsp;is&nbsp;not&nbsp;always&nbsp;there&nbsp;and&nbsp;I&nbsp;need&nbsp;escape&nbsp;it&nbsp;only&nbsp;if&nbsp;type&nbsp;is&nbsp;passed&nbsp;to&nbsp;function&lt;br&gt;<br>
&lt;br&gt;Thanks,&nbsp;Pet&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
