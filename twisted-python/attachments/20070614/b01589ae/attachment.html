<tt>
Hello&nbsp;community.&nbsp;At&nbsp;first&nbsp;excuse&nbsp;me&nbsp;for&nbsp;my&nbsp;poor&nbsp;english,&nbsp;I&#39;m&nbsp;from&nbsp;Argentina.&nbsp;&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;building&nbsp;a&nbsp;abstraction&nbsp;layer&nbsp;for&nbsp;different&nbsp;protocols&nbsp;of&nbsp;communication&nbsp;for&nbsp;microcontrolled&nbsp;components&nbsp;simulation&nbsp;on&nbsp;a&nbsp;PC.&nbsp;That&nbsp;is&nbsp;CAN,&nbsp;Mil-1553&nbsp;and&nbsp;RS422.&nbsp;<br>
&lt;br&gt;First&nbsp;I&nbsp;m&nbsp;building&nbsp;a&nbsp;model&nbsp;width&nbsp;serial&nbsp;port.&nbsp;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;connect&nbsp;via&nbsp;tcp&nbsp;to&nbsp;this&nbsp;channel.&nbsp;I&nbsp;choose&nbsp;as&nbsp;a&nbsp;model&nbsp;the&nbsp;class&nbsp;internet.serialport.&nbsp;This&nbsp;works&nbsp;fine&nbsp;but&nbsp;I&nbsp;do&nbsp;not&nbsp;know&nbsp;how&nbsp;to&nbsp;redirect&nbsp;the&nbsp;protocol&nbsp;of&nbsp;serialport&nbsp;to&nbsp;the&nbsp;protocol&nbsp;of&nbsp;TCP&nbsp;port:<br>
&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;-----------------------&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;from&nbsp;rs232&nbsp;import&nbsp;RS232Connector&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor,&nbsp;protocol&lt;br&gt;from&nbsp;twisted.application&nbsp;import&nbsp;service,&nbsp;internet&lt;br&gt;&lt;br&gt;class&nbsp;RS232Channel(<br>
protocol.Protocol):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;CHAN:&quot;&nbsp;+&nbsp;data&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.factory.port.transport.write(data)&lt;br&gt;&lt;br&gt;class&nbsp;RS232Port(protocol.Protocol):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;PORT:&quot;&nbsp;+&nbsp;data&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.factory.channel.protocol.transport.write(data)&lt;br&gt;&lt;br&gt;class&nbsp;RS232Factory(protocol.Factory):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;protocol&nbsp;=&nbsp;RS232Port&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conf&nbsp;=&nbsp;{}<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.port&nbsp;=&nbsp;RS232Port()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channel&nbsp;=&nbsp;RS232Connector(self.port,&nbsp;conf,&nbsp;reactor)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;&#39;__main__&#39;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;factory&nbsp;=&nbsp;RS232Factory()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;reactor.listenTCP(5001,&nbsp;factory)<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;reactor.run()&lt;br&gt;--------------&lt;br&gt;this&nbsp;works&nbsp;fine&nbsp;when&nbsp;data&nbsp;is&nbsp;received&nbsp;from&nbsp;the&nbsp;tcp&nbsp;port,&nbsp;but&nbsp;when&nbsp;come&nbsp;data&nbsp;from&nbsp;the&nbsp;serial&nbsp;port&nbsp;the&nbsp;program&nbsp;can&#39;t&nbsp;find&nbsp;the&nbsp;factory&nbsp;for&nbsp;RS232Channel&nbsp;protocol&nbsp;instance.&nbsp;That&nbsp;is&nbsp;logical.&nbsp;I&nbsp;try&nbsp;to&nbsp;switch&nbsp;the&nbsp;transport&nbsp;but&nbsp;I&nbsp;can&#39;t&nbsp;go&nbsp;so&nbsp;far...&nbsp;<br>
&lt;br&gt;Anyone&nbsp;can&nbsp;tell&nbsp;me&nbsp;how&nbsp;to&nbsp;connect&nbsp;this&nbsp;2&nbsp;protocols&nbsp;&lt;br&gt;&lt;br&gt;Thanks&nbsp;&lt;br&gt;&lt;br&gt;Francisco&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&quot;El&nbsp;hombre&nbsp;se&nbsp;descubre&nbsp;cuando&nbsp;se&nbsp;mide&nbsp;con&nbsp;un&nbsp;obstáculo&quot;&nbsp;&lt;br&gt;(Saint&nbsp;Exupéry)<br>

</tt>
