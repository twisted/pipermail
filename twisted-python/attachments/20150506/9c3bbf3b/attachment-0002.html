<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;folks,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;was&nbsp;going&nbsp;to&nbsp;ask&nbsp;a&nbsp;question,&nbsp;but&nbsp;a&nbsp;colleague&nbsp;resolved&nbsp;it&nbsp;for&nbsp;me.&nbsp;I&nbsp;thought&nbsp;I&#39;d&nbsp;share&nbsp;the&nbsp;result!&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;often&nbsp;end&nbsp;up&nbsp;using&nbsp;lambda&nbsp;to&nbsp;add&nbsp;callbacks,&nbsp;especially&nbsp;where&nbsp;we&nbsp;want&nbsp;to&nbsp;pass&nbsp;the&nbsp;response&nbsp;to&nbsp;a&nbsp;deferred&nbsp;into&nbsp;a&nbsp;function&nbsp;and&nbsp;it&#39;s&nbsp;not&nbsp;the&nbsp;first&nbsp;parameter.&nbsp;However,&nbsp;if&nbsp;you&nbsp;do&nbsp;that&nbsp;inside&nbsp;a&nbsp;loop&nbsp;and&nbsp;one&nbsp;of&nbsp;the&nbsp;variables&nbsp;you&#39;re&nbsp;passing&nbsp;is&nbsp;a&nbsp;loop&nbsp;variable,&nbsp;you&#39;re&nbsp;going&nbsp;to&nbsp;get&nbsp;the&nbsp;same&nbsp;value&nbsp;for&nbsp;that&nbsp;loop&nbsp;variable&nbsp;in&nbsp;all&nbsp;of&nbsp;your&nbsp;callbacks&nbsp;(the&nbsp;last&nbsp;one).&nbsp;The&nbsp;solution&nbsp;is&nbsp;to&nbsp;avoid&nbsp;calling&nbsp;lambda,&nbsp;either&nbsp;by&nbsp;reordering&nbsp;the&nbsp;expected&nbsp;params&nbsp;in&nbsp;function&nbsp;you&#39;re&nbsp;calling,&nbsp;or&nbsp;by&nbsp;creating&nbsp;a&nbsp;small&nbsp;function&nbsp;that&nbsp;just&nbsp;reorders&nbsp;what&#39;s&nbsp;passed&nbsp;to&nbsp;it&nbsp;and&nbsp;sends&nbsp;them&nbsp;to&nbsp;that&nbsp;function&nbsp;in&nbsp;the&nbsp;right&nbsp;order.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hopefully&nbsp;that&#39;s&nbsp;useful&nbsp;to&nbsp;someone.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;Sorcha&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Eg.&nbsp;code&nbsp;BEFORE&nbsp;          &nbsp;&lt;br&gt;           &nbsp;for&nbsp;loop_var&nbsp;in&nbsp;a_dict[&#39;loop_vars&#39;]:&lt;br&gt;               &nbsp;d&nbsp;=&nbsp;self.returns_a_deferred(loop_var[&quot;x&quot;])&lt;br&gt;               &nbsp;d.addCallback(&lt;br&gt;                   &nbsp;lambda&nbsp;ret_val:&nbsp;self.do_another_thing(&lt;br&gt;                       &nbsp;other_param,&nbsp;loop_var.copy(),&nbsp;ret_val&lt;br&gt;                   &nbsp;)&lt;br&gt;               &nbsp;)&lt;br&gt;               &nbsp;_dlist.append(d)&lt;br&gt;           &nbsp;return&nbsp;defer.DeferredList(_dlist)&lt;br&gt;&lt;br&gt;Eg.&nbsp;code&nbsp;AFTER&lt;br&gt;&lt;/div&gt;           &nbsp;def&nbsp;other_func(ret_val,&nbsp;other_param,&nbsp;loop_var):&lt;br&gt;&lt;/div&gt;               &nbsp;return&nbsp;self.do_other_thing(&lt;br&gt;&lt;/div&gt;                   &nbsp;other_param,&nbsp;loop_var,&nbsp;ret_val&lt;br&gt;&lt;div&gt;&lt;div&gt;               &nbsp;)&lt;br&gt;&lt;div&gt;&lt;div&gt;           &nbsp;&lt;br&gt;           &nbsp;for&nbsp;loop_var&nbsp;in&nbsp;a_dict[&#39;loop_vars&#39;]:&lt;br&gt;               &nbsp;d&nbsp;=&nbsp;self.returns_a_deferred(loop_var[&quot;x&quot;])&lt;br&gt;               &nbsp;d.addCallback(other_func,&nbsp;other_param,&nbsp;loop_var)&lt;br&gt;               &nbsp;_dlist.append(d)&lt;br&gt;           &nbsp;return&nbsp;defer.DeferredList(_dlist)&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
