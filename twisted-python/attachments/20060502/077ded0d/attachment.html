<tt>
Twisted&nbsp;Sumo&nbsp;2006-02-12&lt;br&gt;&lt;br&gt;xapian&nbsp;and&nbsp;xapian&nbsp;bindings&nbsp;0.9.2&nbsp;svn&nbsp;6532&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;I&nbsp;have&nbsp;written&nbsp;a&nbsp;Twisted&nbsp;service&nbsp;to&nbsp;write&nbsp;to&nbsp;a&nbsp;xapian&nbsp;database.&lt;br&gt;I&nbsp;am&nbsp;using&nbsp;WriteableDatabase&nbsp;using&nbsp;DB_CREATE_OR_OPEN.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;also&nbsp;using&nbsp;twistd&nbsp;and&nbsp;the&nbsp;application&nbsp;plumbing&nbsp;to&nbsp;start&nbsp;the&nbsp;server.<br>
&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;tried&nbsp;everything&nbsp;but&nbsp;no&nbsp;matter&nbsp;how&nbsp;I&nbsp;stop&nbsp;the&nbsp;server&nbsp;I&nbsp;can't&nbsp;get&nbsp;it&nbsp;to&nbsp;shutdown&nbsp;xapian&nbsp;cleanly.&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;implemented&nbsp;stopService()&nbsp;on&nbsp;my&nbsp;service&nbsp;and&nbsp;do&nbsp;a&nbsp;.flush()&nbsp;and&nbsp;have&nbsp;even&nbsp;tried&nbsp;setting&nbsp;the&nbsp;db&nbsp;instance&nbsp;to&nbsp;None<br>
&lt;br&gt;and&nbsp;tried&nbsp;using&nbsp;del&nbsp;self.db&nbsp;as&nbsp;well.&lt;br&gt;&lt;br&gt;I&nbsp;even&nbsp;added&nbsp;a&nbsp;reactor.addSystemEventTrigger()&nbsp;and&nbsp;tried&nbsp;&quot;before&quot;,&nbsp;&quot;during&quot;&nbsp;and&nbsp;&quot;after&quot;&nbsp;&quot;shutdown&quot;&nbsp;and&nbsp;nothing&lt;br&gt;seems&nbsp;to&nbsp;work.&lt;br&gt;&lt;br&gt;<br>
I&nbsp;stop&nbsp;the&nbsp;service&nbsp;with&nbsp;CTRL-C,&nbsp;kill&nbsp;-TERM&nbsp;`cat&nbsp;twistd.pid'&nbsp;and&nbsp;just&nbsp;plain&nbsp;kill&nbsp;'cat&nbsp;twistd.pid'&lt;br&gt;&lt;br&gt;It&nbsp;leaves&nbsp;the&nbsp;db_lock&nbsp;file&nbsp;everytime&nbsp;and&nbsp;I&nbsp;don't&nbsp;know&nbsp;what&nbsp;else&nbsp;it&nbsp;might&nbsp;not&nbsp;be&nbsp;cleaning&nbsp;up&nbsp;correctly&nbsp;either.&lt;br&gt;<br>
&lt;br&gt;Has&nbsp;anyone&nbsp;gotten&nbsp;a&nbsp;WritableDatabase&nbsp;to&nbsp;work&nbsp;with&nbsp;Twisted?&nbsp;&lt;br&gt;If&nbsp;so,&nbsp;how&nbsp;do&nbsp;I&nbsp;stop&nbsp;Twisted&nbsp;so&nbsp;it&nbsp;will&nbsp;shutdown&nbsp;xapian&nbsp;cleanly?&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
