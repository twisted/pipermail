<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&nbsp;dir=&quot;auto&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Hi&nbsp;Benjamin,&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I’m&nbsp;sorry&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;duplicate?&nbsp; I&nbsp;sent&nbsp;this&nbsp;earlier,&nbsp;but&nbsp;I&nbsp;don’t&nbsp;see&nbsp;it&nbsp;in&nbsp;the&nbsp;archives?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;/&gt;I&nbsp;can&nbsp;see&nbsp;it&nbsp;in&nbsp;the&nbsp;archives&nbsp;along&nbsp;with&nbsp;this&nbsp;reply&nbsp;by&nbsp;glyph:&nbsp;http://twistedmatrix.com/pipermail/twisted-python/2014-October/028841.html&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;—h&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&nbsp;/&gt;<br>
<br>
Am&nbsp;10.10.2014&nbsp;03:33,&nbsp;schrieb&nbsp;Benjamin&nbsp;Schollnick:<br>
<br>
&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=windows-1252&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;<br>
<br>
&lt;div&gt;I’m&nbsp;sorry&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;duplicate?&nbsp; I&nbsp;sent&nbsp;this&nbsp;earlier,<br>
but&nbsp;I&nbsp;don’t&nbsp;see&nbsp;it&nbsp;in&nbsp;the&nbsp;archives?&lt;/div&gt;<br>
&lt;div&gt;&lt;br/&gt;&lt;/div&gt;<br>
Folks,&lt;br/&gt;<br>
&lt;br/&gt;<br>
I’m&nbsp;writing&nbsp;an&nbsp;client&nbsp;using&nbsp;twisted,&nbsp;and&nbsp;I’m&nbsp;basing&nbsp;it&nbsp;off&nbsp;the<br>
Poetry&nbsp;client&nbsp;from &lt;a&nbsp;href=&quot;http://krondo.com/wp-content/uploads/2009/08/twisted-intro.html&quot;&gt;http://krondo.com/wp-content/uploads/2009/08/twisted-intro.html&lt;/a&gt;.&lt;br/&gt;<br>
<br>
I&nbsp;am&nbsp;porting&nbsp;a&nbsp;previous&nbsp;pyserial&nbsp;based&nbsp;client,&nbsp;so&nbsp;I’m&nbsp;running&nbsp;into<br>
new&nbsp;territory&nbsp;here.&lt;br/&gt;<br>
&lt;br/&gt;<br>
And&nbsp;it’s&nbsp;working&nbsp;fine,&nbsp;there&nbsp;are&nbsp;two&nbsp;“issues&quot;&nbsp;that&nbsp;I&nbsp;am&nbsp;running<br>
into.&lt;br/&gt;<br>
&lt;br/&gt;<br>
class&nbsp;WT_Protocol(Protocol):&lt;br/&gt;<br>
&lt;br/&gt;<br>
   tag&nbsp;=&nbsp;''&lt;br/&gt;<br>
&lt;br/&gt;<br>
   def&nbsp;to_bytes(self,&nbsp;seq):&lt;br/&gt;<br>
       &quot;&quot;&quot;convert&nbsp;a&nbsp;sequence&nbsp;to<br>
a&nbsp;bytes&nbsp;type&quot;&quot;&quot;&lt;br/&gt;<br>
       #&lt;br/&gt;<br>
       #&nbsp;  from<br>
pyserial.util&lt;br/&gt;<br>
       if&nbsp;isinstance(seq,<br>
bytes):&lt;br/&gt;<br>
           return<br>
seq&lt;br/&gt;<br>
       elif&nbsp;isinstance(seq,<br>
bytearray):&lt;br/&gt;<br>
           return<br>
bytes(seq)&lt;br/&gt;<br>
       elif&nbsp;isinstance(seq,<br>
memoryview):&lt;br/&gt;<br>
           return<br>
seq.tobytes()&lt;br/&gt;<br>
       else:&lt;br/&gt;<br>
           b<br>
=&nbsp;bytearray()&lt;br/&gt;<br>
           for<br>
item&nbsp;in&nbsp;seq:&lt;br/&gt;<br>
               b.append(item)<br>
 #&nbsp;this&nbsp;one&nbsp;handles&nbsp;int&nbsp;and&nbsp;str&nbsp;for&nbsp;our&nbsp;emulation&nbsp;and&nbsp;ints&nbsp;for<br>
Python&nbsp;3.x&lt;br/&gt;<br>
           return<br>
bytes(b)&lt;br/&gt;<br>
&lt;br/&gt;<br>
   def&nbsp;connectionMade(self):&lt;br/&gt;<br>
       print&nbsp;&quot;Reseting&nbsp;the<br>
network&quot;&lt;br/&gt;<br>
       reset&nbsp;=<br>
self.to_bytes(packets.network_reset()&nbsp;)&lt;br/&gt;<br>
       self.transport.write&nbsp;(<br>
reset&nbsp;)&lt;br/&gt;<br>
       self.transport.write&nbsp;(<br>
self.to_bytes(packets.Set_SiteCode(NodeID=255,&nbsp;SC1=0,&nbsp;SC2=0,&nbsp;SC3=0)<br>
))&lt;br/&gt;<br>
       self.transport.write&nbsp;(<br>
self.to_bytes(packets.Set_Gain_Packet(NodeID=255,&nbsp;Gain=1)&nbsp;))<br>
   #&nbsp;high&nbsp;gain&lt;br/&gt;<br>
       self.transport.write&nbsp;(<br>
self.to_bytes(packets.Set_Protocol_No_Nulls&nbsp;(NetworkID=0,<br>
ReceiverID=0,&nbsp;NodeID=1)&nbsp;))&nbsp;   #&nbsp;high&nbsp;gain&lt;br/&gt;<br>
       time.sleep&nbsp;(.5)&lt;br/&gt;<br>
&lt;br/&gt;<br>
Now&nbsp;the&nbsp;client&nbsp;works&nbsp;right&nbsp;now,&nbsp;but&nbsp;I’m&nbsp;concerned&nbsp;that&nbsp;I&nbsp;can’t<br>
figure&nbsp;out&nbsp;how&nbsp;to&nbsp;immediately&nbsp;read&nbsp;for&nbsp;a&nbsp;reply&nbsp;packet&nbsp;from&nbsp;the<br>
server.&lt;br/&gt;<br>
&lt;br/&gt;<br>
For&nbsp;example,&nbsp;when&nbsp;I&nbsp;send&nbsp;the&nbsp;Set_SiteCode&nbsp;packet,&nbsp;I&nbsp;may&nbsp;receive&nbsp;a<br>
reply.&nbsp; &lt;br/&gt;<br>
&lt;br/&gt;<br>
But&nbsp;how&nbsp;would&nbsp;that&nbsp;occur&nbsp;in&nbsp;the&nbsp;Twisted&nbsp;framework?&nbsp; In&nbsp;my<br>
testing&nbsp;the&nbsp;dataReceived&nbsp;function&nbsp;is&nbsp;not&nbsp;being&nbsp;called,&nbsp;so&nbsp;I&nbsp;can’t<br>
trap&nbsp;it&nbsp;there,&nbsp;plus&nbsp;I’m&nbsp;not&nbsp;sure&nbsp;how&nbsp;I&nbsp;would&nbsp;figure&nbsp;that<br>
logic.&lt;br/&gt;<br>
&lt;br/&gt;<br>
Can&nbsp;anyone&nbsp;suggest&nbsp;a&nbsp;method&nbsp;to&nbsp;do&nbsp;this?&lt;br/&gt;<br>
&lt;br/&gt;<br>
The&nbsp;second&nbsp;question,&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;tell,&nbsp;isn’t&nbsp;very&nbsp;solvable.<br>
 I’d&nbsp;like&nbsp;to&nbsp;add&nbsp;a&nbsp;“Press&nbsp;Q&nbsp;to&nbsp;quit”&nbsp;type&nbsp;logic&nbsp;to&nbsp;the&nbsp;code.<br>
 But&nbsp;I&nbsp;don’t&nbsp;see&nbsp;a&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;easily&nbsp;in&nbsp;twisted?<br>
 (platform&nbsp;unspecific,&nbsp;but&nbsp;it’s&nbsp;running&nbsp;Mac&nbsp;OS&nbsp;X&nbsp;/&nbsp;Unix&nbsp;right<br>
now).&lt;br/&gt;<br>
&lt;br/&gt;<br>
&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&quot;/&gt;<br>
&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:&nbsp;pre;&quot;/&gt;-&nbsp;Ben<br>
&lt;/body&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
