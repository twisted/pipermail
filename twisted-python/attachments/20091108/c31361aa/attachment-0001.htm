<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Thanks&nbsp;for&nbsp;the&nbsp;link&nbsp;info.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;literally&nbsp;just&nbsp;set&nbsp;up&nbsp;Varnish&nbsp;for&nbsp;the&nbsp;first&nbsp;time&nbsp;on&nbsp;my&nbsp;web&nbsp;host,&nbsp;so&nbsp;I<br>
am&nbsp;no&nbsp;pro.&nbsp;However,&nbsp;varnish&nbsp;uses&nbsp;a&nbsp;c&nbsp;like&nbsp;scripting&nbsp;language&nbsp;that&nbsp;can<br>
run&nbsp;regexps&nbsp;on&nbsp;the&nbsp;incoming&nbsp;urls&nbsp;and&nbsp;apply&nbsp;rules&nbsp;to&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;this&nbsp;means&nbsp;is&nbsp;that&nbsp;we&nbsp;can&nbsp;(as&nbsp;a&nbsp;starting&nbsp;point)&nbsp;choose&nbsp;caching<br>
times&nbsp;for&nbsp;each&nbsp;of&nbsp;those&nbsp;high&nbsp;traffic&nbsp;urls&nbsp;in&nbsp;the&nbsp;varnish&nbsp;script&nbsp;without<br>
touching&nbsp;trac.&nbsp;In&nbsp;the&nbsp;script,&nbsp;we&nbsp;match&nbsp;the&nbsp;front&nbsp;page&nbsp;(with&nbsp;a&nbsp;regexp)<br>
and&nbsp;add&nbsp;a&nbsp;max-cache&nbsp;time&nbsp;to&nbsp;86400,&nbsp;cache&nbsp;it,&nbsp;etc.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
See&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.catalystframework.org/calendar/2008/14&quot;&gt;http://www.catalystframework.org/calendar/2008/14&lt;/a&gt;&nbsp;&lt;br&gt;<br>
for&nbsp;a&nbsp;great&nbsp;varnish&nbsp;tutorial&lt;br&gt;<br>
&lt;br&gt;<br>
By&nbsp;doing&nbsp;that&nbsp;for&nbsp;each&nbsp;of&nbsp;the&nbsp;urls&nbsp;you&nbsp;listed&nbsp;(bar&nbsp;the&nbsp;timeline,&nbsp;which<br>
should&nbsp;be&nbsp;cached&nbsp;for&nbsp;1&nbsp;hour&nbsp;or&nbsp;perhaps&nbsp;30&nbsp;minutes&nbsp;instead)&nbsp;we&nbsp;will<br>
seriously&nbsp;lighten&nbsp;the&nbsp;load&nbsp;on&nbsp;the&nbsp;database&nbsp;and&nbsp;the&nbsp;webserver,&nbsp;even&nbsp;if<br>
varnish&nbsp;runs&nbsp;on&nbsp;the&nbsp;same&nbsp;machine&nbsp;(as&nbsp;a&nbsp;start).&lt;br&gt;<br>
&lt;br&gt;<br>
Every&nbsp;other&nbsp;url&nbsp;(which&nbsp;doesn't&nbsp;have&nbsp;caching&nbsp;set)&nbsp;we&nbsp;could&nbsp;just&nbsp;cache<br>
for&nbsp;30&nbsp;minutes&nbsp;(perhaps&nbsp;even&nbsp;a&nbsp;day),&nbsp;but&nbsp;only&nbsp;for&nbsp;anon&nbsp;users&nbsp;(no<br>
cookies&nbsp;set&nbsp;in&nbsp;browser)&lt;br&gt;<br>
&lt;br&gt;<br>
-Tom&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:mailman.97597.1257647916.23374.twisted-python@twistedmatrix.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;10:41&nbsp;pm,&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:leyssw@ihug.co.nz&quot;&gt;leyssw@ihug.co.nz&lt;/a&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Isn't&nbsp;the&nbsp;simplest&nbsp;option&nbsp;to&nbsp;place&nbsp;a&nbsp;decent&nbsp;reverse&nbsp;proxy&nbsp;between&nbsp;the<br>
webserver&nbsp;and&nbsp;our&nbsp;clients?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Possibly&nbsp;so!&nbsp;&nbsp;I&nbsp;gave&nbsp;this&nbsp;a&nbsp;half-hearted&nbsp;attempted&nbsp;a&nbsp;few&nbsp;weeks&nbsp;ago&nbsp;but<br>
quickly&nbsp;gave&nbsp;up.&nbsp;&nbsp;If&nbsp;someone&nbsp;who&nbsp;is&nbsp;familiar&nbsp;with&nbsp;configuring&nbsp;such&nbsp;a<br>
proxy&nbsp;would&nbsp;like&nbsp;to&nbsp;help&nbsp;out,&nbsp;perhaps&nbsp;we&nbsp;can&nbsp;get&nbsp;something&nbsp;useful&nbsp;up&nbsp;<br>
and<br>
running.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;&lt;!----&gt;<br>
Actually,&nbsp;I&nbsp;just&nbsp;looked&nbsp;at&nbsp;Varnish&nbsp;again&nbsp;and&nbsp;remembered&nbsp;that&nbsp;because&nbsp;of&nbsp;<br>
the&nbsp;way&nbsp;trac&nbsp;sessions&nbsp;work,&nbsp;it's&nbsp;really&nbsp;hard&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;may&nbsp;and&nbsp;<br>
may&nbsp;not&nbsp;be&nbsp;correctly&nbsp;cached.&nbsp;&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;resolve&nbsp;this&nbsp;without&nbsp;<br>
serious&nbsp;changes&nbsp;to&nbsp;trac&nbsp;itself.<br>
<br>
Jean-Paul<br>
<br>
<br>
<br>
------------------------------<br>
<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
<br>
<br>
End&nbsp;of&nbsp;Twisted-Python&nbsp;Digest,&nbsp;Vol&nbsp;68,&nbsp;Issue&nbsp;13<br>
**********************************************<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
