<tt>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Dec&nbsp;16,&nbsp;2009&nbsp;at&nbsp;2:34&nbsp;PM,&nbsp;MārisR&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:maris@chown.lv&quot;&gt;maris@chown.lv&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
Hello!&lt;br&gt;<br>
I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;write&nbsp;small&nbsp;tcp&nbsp;server,&nbsp;which&nbsp;doing&nbsp;some&nbsp;stuff&nbsp;with&nbsp;memcache.&nbsp;Everything&nbsp;was&nbsp;fine&nbsp;until&nbsp;I&nbsp;start&nbsp;it&nbsp;on&nbsp;production,&nbsp;after&nbsp;few&nbsp;minutes&nbsp;I&nbsp;got&nbsp;to&nbsp;rollback&nbsp;to&nbsp;old&nbsp;one.&nbsp;My&nbsp;script&nbsp;got&nbsp;max&nbsp;open&nbsp;files&nbsp;limit&nbsp;:(&nbsp;After&nbsp; liitle&nbsp;inspection,&nbsp;I&nbsp;saw&nbsp;that,&nbsp;new&nbsp;connection&nbsp;to&nbsp;my&nbsp;daemon&nbsp;opens&nbsp;new&nbsp;connection&nbsp;to&nbsp;memcache&nbsp;and&nbsp;after&nbsp;disconnect&nbsp;its&nbsp;not&nbsp;closed&nbsp;and&nbsp;on&nbsp;new&nbsp;connections&nbsp;is&nbsp;not&nbsp;reused.&nbsp;I&nbsp;could&nbsp;not&nbsp;find&nbsp;how&nbsp;to&nbsp;disconnect&nbsp;form&nbsp;memcache&nbsp;after&nbsp;processing&nbsp;is&nbsp;done,&nbsp;or&nbsp;how&nbsp;to&nbsp;reuse&nbsp;open&nbsp;connections.&nbsp;Maybe&nbsp;someone&nbsp;has&nbsp;some&nbsp;good&nbsp;example&nbsp;of&nbsp;this?&nbsp;Thanks!&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;to&nbsp;post&nbsp;twice&nbsp;on&nbsp;this,&nbsp;but&nbsp;setting&nbsp;aside&nbsp;tx.memcache&nbsp;or&nbsp;other&nbsp;abstractions&nbsp;over&nbsp;the&nbsp;memcache&nbsp;client,&nbsp;I&nbsp;never&nbsp;had&nbsp;any&nbsp;problems&nbsp;with&nbsp;leaking&nbsp;connections;&nbsp;that&nbsp;is&nbsp;tx.memcache&nbsp;wasn&amp;#39;t&nbsp;written&nbsp;to&nbsp;address&nbsp;such&nbsp;a&nbsp;problem,&nbsp;so&nbsp;I&nbsp;don&amp;#39;t&nbsp;think&nbsp;using&nbsp;it&nbsp;would&nbsp;necessarily&nbsp;solve&nbsp;your&nbsp;issues.&nbsp; Can&nbsp;you&nbsp;post&nbsp;some&nbsp;code&nbsp;for&nbsp;a&nbsp;short&nbsp;program&nbsp;that&nbsp;reproduces&nbsp;the&nbsp;problem&nbsp;you&amp;#39;re&nbsp;describing?&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;/div&gt;-Drew<br>

</tt>
