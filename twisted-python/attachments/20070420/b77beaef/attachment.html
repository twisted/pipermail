<tt>
Hello,&lt;br&gt;&lt;br&gt;I&#39;m&nbsp;building&nbsp;a&nbsp;new&nbsp;specialized&nbsp;mail&nbsp;server&nbsp;using&nbsp;twisted.mail&nbsp;and&nbsp;wanted&nbsp;to&nbsp;get&nbsp;some&nbsp;feedback&nbsp;from&nbsp;the&nbsp;twisted&nbsp;community.&lt;br&gt;&lt;br&gt;Some&nbsp;background:&lt;br&gt;&lt;br&gt;The&nbsp;goal&nbsp;of&nbsp;the&nbsp;mail&nbsp;server&nbsp;is&nbsp;to&nbsp;answer&nbsp;and&nbsp;categorize&nbsp;all&nbsp;our&nbsp;bounces.&nbsp;&nbsp;This&nbsp;includes&nbsp;bounces&nbsp;from&nbsp;our&nbsp;outbound&nbsp;mail&nbsp;servers&nbsp;that&nbsp;never&nbsp;make&nbsp;it&nbsp;to&nbsp;a&nbsp;remote&nbsp;server&nbsp;or&nbsp;queue&nbsp;timeouts&nbsp;(i&nbsp;call&nbsp;these&nbsp;conversational&nbsp;bounces)&nbsp;and&nbsp;bounces&nbsp;via&nbsp;the&nbsp;return-path&nbsp;(non-conversational&nbsp;bounces)&nbsp;that&nbsp;made&nbsp;it&nbsp;to&nbsp;the&nbsp;remote&nbsp;mailserver&nbsp;but&nbsp;get&nbsp;bounced&nbsp;after&nbsp;remote&nbsp;mailserver&nbsp;acceptance.<br>
&lt;br&gt;&lt;br&gt;If&nbsp;you&nbsp;are&nbsp;familiar&nbsp;with&nbsp;non-conversational&nbsp;bounces&nbsp;you&#39;ll&nbsp;know&nbsp;that&nbsp;you&nbsp;are&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;get&nbsp;a&nbsp;bounce&nbsp;email&nbsp;in&nbsp;a&nbsp;standard&nbsp;format.&nbsp;&nbsp;It&nbsp;all&nbsp;depends&nbsp;on&nbsp;the&nbsp;foreign&nbsp;mailserver&nbsp;software&nbsp;and&nbsp;policies.&lt;br&gt;&lt;br&gt;To&nbsp;handle&nbsp;the&nbsp;variations&nbsp;in&nbsp;bounce&nbsp;messages,&nbsp;I&#39;m&nbsp;going&nbsp;to&nbsp;make&nbsp;a&nbsp;bounce&nbsp;server&nbsp;that&nbsp;is&nbsp;configurable&nbsp;via&nbsp;addition&nbsp;of&nbsp;new&nbsp;rules&nbsp;similar&nbsp;to&nbsp;the&nbsp;ipchains.&nbsp;&nbsp;Each&nbsp;rule&nbsp;is&nbsp;a&nbsp;regex&nbsp;and&nbsp;the&nbsp;rules&nbsp;will&nbsp;look&nbsp;similar&nbsp;to&nbsp;the&nbsp;Mailman&nbsp;bounce&nbsp;code&nbsp;regex&#39;s.&nbsp;&nbsp;These&nbsp;rules&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;db&nbsp;with&nbsp;a&nbsp;whole&nbsp;test&nbsp;system&nbsp;written&nbsp;around&nbsp;the&nbsp;rules&nbsp;to&nbsp;protect&nbsp;against&nbsp;bad&nbsp;rule&nbsp;entry&nbsp;and&nbsp;fallback&nbsp;points&nbsp;to&nbsp;previous&nbsp;rule&nbsp;sets.&nbsp;&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;the&nbsp;server,&nbsp;the&nbsp;idea&nbsp;is&nbsp;to&nbsp;start&nbsp;at&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;rule&nbsp;chain&nbsp;and&nbsp;work&nbsp;your&nbsp;way&nbsp;down.&nbsp;&nbsp;So&nbsp;really,&nbsp;I&#39;m&nbsp;just&nbsp;talking&nbsp;about&nbsp;a&nbsp;bunch&nbsp;of&nbsp;regex&#39;s&nbsp;w/processing&nbsp;if&nbsp;a&nbsp;regex&nbsp;is&nbsp;hit&nbsp;or&nbsp;a&nbsp;final&nbsp;action&nbsp;if&nbsp;the&nbsp;none&nbsp;of&nbsp;the&nbsp;regex&#39;s&nbsp;are&nbsp;hit.&nbsp;&nbsp;&nbsp;<br>
&lt;br&gt;&lt;br&gt;I&#39;ve&nbsp;already&nbsp;built&nbsp;a&nbsp;specialized&nbsp;twisted&nbsp;mail&nbsp;server&nbsp;with&nbsp;a&nbsp;db&nbsp;lookup&nbsp;on&nbsp;incoming&nbsp;mail&nbsp;that&nbsp;handles&nbsp;some&nbsp;of&nbsp;our&nbsp;other&nbsp;email&nbsp;(roughly&nbsp;7-10K&nbsp;emails&nbsp;per&nbsp;day)&nbsp;so&nbsp;I&#39;m&nbsp;pretty&nbsp;familiar&nbsp;with&nbsp;the&nbsp;way&nbsp;twisted.mail&nbsp;works.&nbsp;&nbsp;Where&nbsp;I&nbsp;need&nbsp;some&nbsp;help&nbsp;is&nbsp;in&nbsp;the&nbsp;area&nbsp;of&nbsp;higher-volume&nbsp;matters.&nbsp;&nbsp;I&nbsp;anticipate&nbsp;this&nbsp;mailserver&nbsp;could&nbsp;get&nbsp;between&nbsp;40-80K&nbsp;emails&nbsp;per&nbsp;day.&nbsp;&nbsp;(&nbsp;I&nbsp;work&nbsp;for&nbsp;a&nbsp;Email&nbsp;Service&nbsp;Provider,&nbsp;our&nbsp;bounce&nbsp;percentage&nbsp;rates&nbsp;are&nbsp;low&nbsp;).&nbsp;&nbsp;<br>
&lt;br&gt;&lt;br&gt;My&nbsp;questions&nbsp;are&nbsp;as&nbsp;follows:&lt;br&gt;&lt;br&gt;1)&nbsp;I&#39;ve&nbsp;used&nbsp;qmail&nbsp;in&nbsp;the&nbsp;past.&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;familiar&nbsp;with&nbsp;qmail,&nbsp;you&nbsp;configure&nbsp;a&nbsp;locals&nbsp;number&nbsp;which&nbsp;tells&nbsp;you&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;emails&nbsp;qmail&nbsp;can&nbsp;process&nbsp;locally.&nbsp;&nbsp;This&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;number&nbsp;of&nbsp;smtp&nbsp;connections&nbsp;(&nbsp;I&#39;m&nbsp;not&nbsp;so&nbsp;much&nbsp;worried&nbsp;about&nbsp;that&nbsp;).&nbsp;&nbsp;qmail&nbsp;just&nbsp;forks&nbsp;a&nbsp;new&nbsp;process&nbsp;up&nbsp;to&nbsp;the&nbsp;locals&nbsp;number&nbsp;and&nbsp;queues&nbsp;up&nbsp;other&nbsp;mail.<br>
&lt;br&gt;&lt;br&gt;in&nbsp;eomRecieved&nbsp;what&nbsp;is&nbsp;the&nbsp;best&nbsp;manner&nbsp;to&nbsp;safeguard&nbsp;that&nbsp;I&nbsp;don&#39;t&nbsp;knock&nbsp;over&nbsp;the&nbsp;server&nbsp;by&nbsp;processing&nbsp;100&nbsp;emails&nbsp;in&nbsp;short&nbsp;succession&nbsp;with&nbsp;the&nbsp;regex&#39;s?&lt;br&gt;&lt;br&gt;2)&nbsp;Are&nbsp;there&nbsp;any&nbsp;examples&nbsp;of&nbsp;a&nbsp;high&nbsp;volume&nbsp;email&nbsp;server&nbsp;that&nbsp;somewhat&nbsp;follows&nbsp;my&nbsp;processing&nbsp;requirements?&nbsp;I&#39;ve&nbsp;googled&nbsp;around&nbsp;and&nbsp;not&nbsp;found&nbsp;any&nbsp;examples.&nbsp;&nbsp;It&nbsp;feels&nbsp;like&nbsp;I&nbsp;should&nbsp;be&nbsp;looking&nbsp;for&nbsp;a&nbsp;queue&nbsp;implementation&nbsp;within&nbsp;a&nbsp;<br>
twisted.mail&nbsp;server.&nbsp;&nbsp;I&#39;ve&nbsp;looked&nbsp;at&nbsp;some&nbsp;of&nbsp;the&nbsp;Queue&nbsp;classes&nbsp;within&nbsp;the&nbsp;twisted.mail&nbsp;code&nbsp;and&nbsp;I&nbsp;wanted&nbsp;to&nbsp;know&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;right&nbsp;direction?&lt;br&gt;&lt;br&gt;3)&nbsp;If&nbsp;you&nbsp;have&nbsp;experience&nbsp;using&nbsp;twisted.mail&nbsp;have&nbsp;you&nbsp;had&nbsp;any&nbsp;problems&nbsp;with&nbsp;this&nbsp;volume&nbsp;of&nbsp;mail&nbsp;with&nbsp;some&nbsp;sort&nbsp;of&nbsp;minor/major&nbsp;processing&nbsp;on&nbsp;each&nbsp;incoming&nbsp;mail.&nbsp;&nbsp;If&nbsp;you&#39;ve&nbsp;just&nbsp;saved&nbsp;to&nbsp;disk&nbsp;have&nbsp;you&nbsp;had&nbsp;problems&nbsp;with&nbsp;a&nbsp;load&nbsp;of&nbsp;say&nbsp;200-300K&nbsp;emails&nbsp;per&nbsp;day?<br>
&lt;br&gt;&lt;br&gt;I&nbsp;appreciate&nbsp;any&nbsp;help&nbsp;or&nbsp;comments.&nbsp;&lt;br&gt;&lt;br&gt;thanks&lt;br&gt;&lt;br&gt;-rob&lt;br&gt;&lt;br&gt;<br>

</tt>
