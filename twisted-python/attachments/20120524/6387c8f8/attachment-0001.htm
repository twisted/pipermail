<tt>
Hi&nbsp;everyone,&nbsp;I&nbsp;am&nbsp;a&nbsp;beginner&nbsp;to&nbsp;Twisted&nbsp;so&nbsp;any&nbsp;help&nbsp;would&nbsp;be&nbsp;appreciated.&nbsp; &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;got&nbsp;an&nbsp;example&nbsp;code&nbsp;from&nbsp;the&nbsp;Twisted,&nbsp;Networking&nbsp;Programming&nbsp;Essentials&nbsp;book: &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;from&nbsp;twisted.conch&nbsp;import&nbsp;error&lt;/div&gt;<br>
&lt;div&gt;from&nbsp;twisted.conch.ssh&nbsp;import&nbsp;transport,&nbsp;connection,&nbsp;keys,&nbsp;userauth,&nbsp;channel,&nbsp;common&lt;/div&gt;&lt;div&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;defer,&nbsp;protocol,&nbsp;reactor&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;ClientCommandTransport(transport.SSHClientTransport):&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;username,&nbsp;password,&nbsp;command):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.username&nbsp;=&nbsp;username&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.password&nbsp;=&nbsp;password&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.command&nbsp;=&nbsp;command&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Transport&nbsp;Created&amp;quot;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;verifyHostKey(self,&nbsp;pubKey,&nbsp;fingerprint):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;In&nbsp;Verify&nbsp;Host&nbsp;Key&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;defer.succeed(True)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;connectionSecure(self):&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;In&nbsp;Connection&nbsp;Secure&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;temp&nbsp;=&nbsp;PasswordAuth(self.username,&nbsp;self.password,&nbsp;ClientConnection(self.command))&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Created&nbsp;Everything&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.requestService(temp)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Double&nbsp;Check&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;PasswordAuth(userauth.SSHUserAuthClient):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;user,&nbsp;password,&nbsp;connection):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;userauth.SSHUserAuthClient.__init__(self,&nbsp;user,&nbsp;connection)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.password&nbsp;=&nbsp;password&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;init&nbsp;password&nbsp;auth&amp;quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;getPassword(self,&nbsp;prompt=None):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;In&nbsp;getPassword&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;defer.succeed(self.password)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;ClientConnection(connection.SSHConnection):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;cmd,&nbsp;*args,&nbsp;**kwargs):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Init&nbsp;Client&nbsp;Connection&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;connection.SSHConnection.__init__(self)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Next&nbsp;line&nbsp;of&nbsp;Client&nbsp;Connection&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.command&nbsp;=&nbsp;cmd&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;serviceStarted(self):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;&amp;quot;Service&nbsp;Started&amp;quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.openChannel(CommandChannel(self.command,&nbsp;conn=self))&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;CommandChannel(channel.SSHChannel):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;name&nbsp;=&nbsp;&amp;#39;session&amp;#39;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;command,&nbsp;*args,&nbsp;**kwargs):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;channel.SSHChannel.__init__(self,&nbsp;*args,&nbsp;**kwargs)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.command&nbsp;=&nbsp;command&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;channelOpen(self,&nbsp;data):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;(&amp;quot;Channel&nbsp;was&nbsp;opened&amp;quot;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.conn.sendRequest(self,&amp;#39;exec&amp;#39;,common.NS(self.command),wantReply&nbsp;=&nbsp;True).addCallback(self._gotResponse)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;_gotResponse(self,_):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.conn.sendEOF(self)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print&nbsp;data&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;closed(self):&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print(&amp;quot;######&nbsp;Entered&nbsp;Closed&nbsp;#####&amp;quot;)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;/span&gt;self.loseConnection()&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;reactor.stop()&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;print(&amp;quot;#####&nbsp;Done&nbsp;with&nbsp;Closed&nbsp;####&amp;quot;)&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;class&nbsp;ClientCommandFactory(protocol.ClientFactory):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;username,&nbsp;password,&nbsp;command):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.username&nbsp;=&nbsp;username&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.password&nbsp;=&nbsp;password&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;self.command&nbsp;=&nbsp;command&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;buildProtocol(self,addr):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;protocol&nbsp;=&nbsp;ClientCommandTransport(&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.username,&nbsp;self.password,&nbsp;self.command)&lt;/div&gt;&lt;div&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;protocol&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;if&nbsp;__name__&nbsp;==&nbsp;&amp;quot;__main__&amp;quot;:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;import&nbsp;sys,&nbsp;getpass&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;server&nbsp;=&nbsp;sys.argv[1]&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;command&nbsp;=&nbsp;sys.argv[2]&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;username&nbsp;=&nbsp;raw_input(&amp;quot;Username:&nbsp;&amp;quot;)&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;password&nbsp;=&nbsp;getpass.getpass(&amp;quot;Password:&nbsp;&amp;quot;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;factory&nbsp;=&nbsp;ClientCommandFactory(username,&nbsp;password,&nbsp;command)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;reactor.connectTCP(server,&nbsp;22,&nbsp;factory)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;reactor.run()&lt;/div&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*************************************************************&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;after&nbsp;running&nbsp;this,&nbsp;I&nbsp;get&nbsp;this&nbsp;Unhandled&nbsp;error.&nbsp; Which&nbsp;is&nbsp;strange&nbsp;because&nbsp;the&nbsp;reactor&nbsp;is&nbsp;being&nbsp;successfully&nbsp;stopped.&nbsp; Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;clue&nbsp;what&nbsp;this&nbsp;means&nbsp;and&nbsp;how&nbsp;I&nbsp;should&nbsp;go&nbsp;about&nbsp;fixing&nbsp;it?&nbsp; Thanks!!!!!&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Unhandled&nbsp;Error&lt;/div&gt;&lt;div&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/internet/posixbase.py&amp;quot;,&nbsp;line&nbsp;586,&nbsp;in&nbsp;_doReadOrWrite&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;why&nbsp;=&nbsp;selectable.doRead()&lt;/div&gt;<br>
&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/internet/tcp.py&amp;quot;,&nbsp;line&nbsp;199,&nbsp;in&nbsp;doRead&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;rval&nbsp;=&nbsp;self.protocol.dataReceived(data)&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/conch/ssh/transport.py&amp;quot;,&nbsp;line&nbsp;438,&nbsp;in&nbsp;dataReceived&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;self.dispatchMessage(messageNum,&nbsp;packet[1:])&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/conch/ssh/transport.py&amp;quot;,&nbsp;line&nbsp;460,&nbsp;in&nbsp;dispatchMessage&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;messageNum,&nbsp;payload)&lt;/div&gt;&lt;div&gt;<br>
---&nbsp;&amp;lt;exception&nbsp;caught&nbsp;here&amp;gt;&nbsp;---&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/python/log.py&amp;quot;,&nbsp;line&nbsp;84,&nbsp;in&nbsp;callWithLogger&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;callWithContext({&amp;quot;system&amp;quot;:&nbsp;lp},&nbsp;func,&nbsp;*args,&nbsp;**kw)&lt;/div&gt;<br>
&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/python/log.py&amp;quot;,&nbsp;line&nbsp;69,&nbsp;in&nbsp;callWithContext&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;context.call({ILogContext:&nbsp;newCtx},&nbsp;func,&nbsp;*args,&nbsp;**kw)&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/python/context.py&amp;quot;,&nbsp;line&nbsp;118,&nbsp;in&nbsp;callWithContext&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;return&nbsp;self.currentContext().callWithContext(ctx,&nbsp;func,&nbsp;*args,&nbsp;**kw)&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/python/context.py&amp;quot;,&nbsp;line&nbsp;81,&nbsp;in&nbsp;callWithContext&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;func(*args,**kw)&lt;/div&gt;<br>
&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/conch/ssh/service.py&amp;quot;,&nbsp;line&nbsp;44,&nbsp;in&nbsp;packetReceived&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;f(packet)&lt;/div&gt;&lt;div&gt; &nbsp;File&nbsp;&amp;quot;/usr/lib/python2.7/dist-packages/twisted/conch/ssh/connection.py&amp;quot;,&nbsp;line&nbsp;314,&nbsp;in&nbsp;ssh_CHANNEL_REQUEST&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;channel&nbsp;=&nbsp;self.channels[localChannel]&lt;/div&gt;&lt;div&gt;exceptions.KeyError:&nbsp;0&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
