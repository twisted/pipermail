<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=gb2312&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;STYLE&gt;<br>
BLOCKQUOTE&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-LEFT:&nbsp;2em;&nbsp;MARGIN-TOP:&nbsp;0px<br>
}<br>
OL&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-TOP:&nbsp;0px<br>
}<br>
UL&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-TOP:&nbsp;0px<br>
}<br>
P&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MARGIN-BOTTOM:&nbsp;0px;&nbsp;MARGIN-TOP:&nbsp;0px<br>
}<br>
BODY&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FONT-SIZE:&nbsp;10.5pt;&nbsp;FONT-FAMILY:&nbsp;Î¢ÈíÑÅºÚ;&nbsp;COLOR:&nbsp;#000000;&nbsp;LINE-HEIGHT:&nbsp;1.5<br>
}<br>
&lt;/STYLE&gt;<br>
<br>
&lt;META&nbsp;name=GENERATOR&nbsp;content=&quot;MSHTML&nbsp;11.00.9600.16518&quot;&gt;&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;style=&quot;MARGIN:&nbsp;10px&quot;&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&gt;When&nbsp;developing&nbsp;server-client&nbsp;software,&nbsp;on&nbsp;the&nbsp;client&nbsp;i&nbsp;call&nbsp;the&nbsp;method&nbsp;<br>
getTrafficDate,&nbsp;but&nbsp;on&nbsp;the&nbsp;server&nbsp;end,&nbsp;i&nbsp;got&nbsp;nio&nbsp;is&nbsp;None(d2=d.addCallback(lambda&nbsp;<br>
object:&nbsp;object.callRemote(&quot;getNIOTrafficInfo&quot;,&nbsp;node,&nbsp;nio)))&lt;/DIV&gt;<br>
&lt;DIV&gt;,so,&nbsp;what's&nbsp;the&nbsp;key&nbsp;point?&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Thanks&nbsp;all!&lt;/DIV&gt;<br>
&lt;DIV&gt;-------------------------------------------------------------------------------------------------------------&lt;/DIV&gt;<br>
&lt;DIV&gt;client&nbsp;end&lt;/DIV&gt;<br>
&lt;DIV&gt;def&nbsp;getTrafficDate(self):&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.interfacenio_dict&nbsp;is&nbsp;not&nbsp;<br>
None&nbsp;and&nbsp;self.k:&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodelist&nbsp;<br>
=&nbsp;self.interfacenio_dict.keys()&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
trafficDataList=[]#DeferredList&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;node&nbsp;<br>
in&nbsp;nodelist:&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
interfaces=self.interfacenio_dict[node]['interfaceinfo'].keys()&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
if&nbsp;len(interfaces):&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
for&nbsp;interface&nbsp;in&nbsp;interfaces:&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
nio=&nbsp;self.interfacenio_dict[node]['interfaceinfo'][interface]&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
if&nbsp;nio&nbsp;is&nbsp;not&nbsp;None:&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
if&nbsp;'nio_tap'&nbsp;in&nbsp;nio&nbsp;or&nbsp;'NIO_NF_tap'&nbsp;in&nbsp;nio:&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
d=&nbsp;globals.perspective.callRemote('getServerRoot')&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
d2=d.addCallback(lambda&nbsp;object:&nbsp;object.callRemote(&quot;getNIOTrafficInfo&quot;,&nbsp;node,&nbsp;<br>
nio))&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
d2.addCallback(self.setTrafficSpeed_Tap,&nbsp;node,&nbsp;interface)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
trafficDataList.append(d2)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
else:&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
d=&nbsp;globals.perspective.callRemote('getServerRoot')&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
d2=d.addCallback(lambda&nbsp;object:&nbsp;object.callRemote(&quot;getNIOTrafficInfo&quot;,&nbsp;node,&nbsp;<br>
nio))&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
d2.addCallback(self.setTrafficSpeed_NotTap,&nbsp;node,&nbsp;interface)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
trafficDataList.append(d2)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
trafficDataDeferredList=defer.DeferredList(trafficDataList,&nbsp;<br>
consumeErrors=True)&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
trafficDataDeferredList.addCallback(self.getTrafficDataHandle)&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;server&nbsp;end&lt;/DIV&gt;<br>
&lt;DIV&gt;def&nbsp;remote_getNIOTrafficInfo(self,node,nio):&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;TEXT-INDENT:&nbsp;2em&quot;&gt;print&nbsp;nio&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;TEXT-INDENT:&nbsp;2em&quot;&gt;&nbsp;if&nbsp;nio.name==nioName:&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;TEXT-INDENT:&nbsp;2em&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;pass&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Bug&nbsp;info&nbsp;is:&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;DIV&gt;File&nbsp;&quot;/home/gddw/Documents/gddw-server-branche/src/Server.py&quot;,&nbsp;line&nbsp;154,&nbsp;in&nbsp;<br>
remote_getNIOTrafficInfo&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;nio.name==nioName:&lt;/DIV&gt;<br>
&lt;DIV&gt;exceptions.AttributeError:&nbsp;'NoneType'&nbsp;object&nbsp;has&nbsp;no&nbsp;attribute&nbsp;<br>
'name'&lt;/DIV&gt;&lt;/DIV&gt;&lt;SPAN&gt;&lt;/DIV&gt;&lt;/SPAN&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
