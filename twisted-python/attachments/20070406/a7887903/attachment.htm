<tt>
&lt;html&gt;&lt;body&gt;On&nbsp;06:18&nbsp;pm,&nbsp;list-ener@strank.info&nbsp;wrote:&lt;br&nbsp;/&gt;&amp;gt;on&nbsp;04.04.2007&nbsp;23:40&nbsp;glyph@divmod.com&nbsp;said&nbsp;the&nbsp;following:&lt;br&nbsp;/&gt;&amp;gt;&amp;lt;snip&amp;gt;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;Run&nbsp;&quot;python&nbsp;-m&nbsp;twisted/conch/stdio&quot;&nbsp;for&nbsp;an&nbsp;example&nbsp;of&nbsp;an&nbsp;interactive&nbsp;&lt;br&nbsp;/&gt;&amp;lt;snip&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;Here's&nbsp;a&nbsp;screenshot&nbsp;of&nbsp;an&nbsp;interactive&nbsp;session&nbsp;using&nbsp;the&nbsp;command&nbsp;above:&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;Am&nbsp;I&nbsp;right&nbsp;that&nbsp;this&nbsp;is&nbsp;a&nbsp;screenshot&nbsp;of&nbsp;the&nbsp;manhole&nbsp;client?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Sort&nbsp;of.&nbsp;&amp;#160;It's&nbsp;the&nbsp;manhole&nbsp;server&nbsp;(I&nbsp;don't&nbsp;know&nbsp;what&nbsp;you&nbsp;mean&nbsp;by&nbsp;&quot;client&quot;)&nbsp;running&nbsp;on&nbsp;standard&nbsp;IO,&nbsp;run&nbsp;via&nbsp;'python&nbsp;-m&nbsp;twisted/conch/stdio'.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;For&nbsp;embedding&nbsp;this&nbsp;in&nbsp;twisted,&nbsp;the&nbsp;twisted&nbsp;reactor&nbsp;needs&nbsp;to&nbsp;be&nbsp;the&nbsp;one&nbsp;&lt;br&nbsp;/&gt;&amp;gt;calling&nbsp;IPython/pyreadline&nbsp;when&nbsp;necessary.&lt;br&nbsp;/&gt;&amp;gt;On&nbsp;the&nbsp;IPython&nbsp;level,&nbsp;I&nbsp;think&nbsp;this&nbsp;should&nbsp;be&nbsp;&quot;easy&quot;&nbsp;by&nbsp;subclassing&nbsp;the&nbsp;Shell&nbsp;&lt;br&nbsp;/&gt;&amp;gt;and&nbsp;splitting/rearranging&nbsp;the&nbsp;relevant&nbsp;code,&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;called&nbsp;back&nbsp;&lt;br&nbsp;/&gt;&amp;gt;at&nbsp;the&nbsp;point&nbsp;where&nbsp;raw_input&nbsp;would&nbsp;normally&nbsp;return.&lt;br&nbsp;/&gt;&amp;gt;(I&nbsp;did&nbsp;not&nbsp;look&nbsp;at&nbsp;the&nbsp;new&nbsp;IPython&nbsp;saw&nbsp;branch...)&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;On&nbsp;the&nbsp;twisted&nbsp;side,&nbsp;I&nbsp;think&nbsp;that&nbsp;something&nbsp;like&nbsp;twisted.internet.stdio&nbsp;&lt;br&nbsp;/&gt;&amp;gt;would&nbsp;be&nbsp;calling&nbsp;back?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Rather&nbsp;than&nbsp;IPython&nbsp;calling&nbsp;into&nbsp;raw_input,&nbsp;the&nbsp;loop&nbsp;that&nbsp;calls&nbsp;raw_input&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;changed&nbsp;to&nbsp;a&nbsp;function&nbsp;that&nbsp;takes&nbsp;a&nbsp;string.&nbsp;&amp;#160;This&nbsp;would&nbsp;almost&nbsp;certainly&nbsp;be&nbsp;the&nbsp;trickiest&nbsp;part,&nbsp;since&nbsp;it&nbsp;seems&nbsp;there&nbsp;are&nbsp;about&nbsp;two&nbsp;dozen&nbsp;places&nbsp;(at&nbsp;a&nbsp;quick&nbsp;glance)&nbsp;in&nbsp;ipython&nbsp;that&nbsp;call&nbsp;raw_input.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;Or&nbsp;rather&nbsp;something&nbsp;like&nbsp;twisted.conch.insults?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;insults&nbsp;will&nbsp;be&nbsp;getting&nbsp;its&nbsp;events&nbsp;from&nbsp;twisted.internet.stdio,&nbsp;so&nbsp;both&nbsp;will&nbsp;be&nbsp;involved.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;I&nbsp;suspect&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;hard&nbsp;to&nbsp;recode&nbsp;pyreadline&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;it&nbsp;could&nbsp;&lt;br&nbsp;/&gt;&amp;gt;be&nbsp;called&nbsp;back&nbsp;by&nbsp;twisted?&lt;br&nbsp;/&gt;&amp;gt;So&nbsp;to&nbsp;get&nbsp;readline&nbsp;support,&nbsp;something&nbsp;like&nbsp;readline&nbsp;would&nbsp;need&nbsp;to&nbsp;be&nbsp;&lt;br&nbsp;/&gt;&amp;gt;implemented&nbsp;using&nbsp;t.i.stdio&nbsp;/&nbsp;insults.&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;Does&nbsp;this&nbsp;seem&nbsp;possible,&nbsp;so&nbsp;far?&nbsp;:-)&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;To&nbsp;me,&nbsp;sure&nbsp;-&nbsp;although&nbsp;I&nbsp;hardly&nbsp;have&nbsp;the&nbsp;time&nbsp;to&nbsp;do&nbsp;it&nbsp;:).&nbsp;&amp;#160;There&nbsp;have&nbsp;been&nbsp;a&nbsp;few&nbsp;forays&nbsp;into&nbsp;line-editing&nbsp;code&nbsp;for&nbsp;insults,&nbsp;although&nbsp;I'm&nbsp;not&nbsp;clear&nbsp;of&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the&nbsp;art,&nbsp;JP&nbsp;Calderone&nbsp;should&nbsp;be&nbsp;returning&nbsp;from&nbsp;vacation&nbsp;soon&nbsp;and&nbsp;will&nbsp;probably&nbsp;have&nbsp;some&nbsp;light&nbsp;to&nbsp;shed&nbsp;on&nbsp;the&nbsp;issue.&nbsp;&amp;#160;I&nbsp;don't&nbsp;know&nbsp;much&nbsp;about&nbsp;pyreadline.&nbsp;&amp;#160;There&nbsp;may&nbsp;be&nbsp;code&nbsp;there&nbsp;that's&nbsp;reusable,&nbsp;maybe&nbsp;not,&nbsp;but&nbsp;in&nbsp;any&nbsp;event&nbsp;it&nbsp;is&nbsp;a&nbsp;goal&nbsp;of&nbsp;the&nbsp;insults&nbsp;library&nbsp;to&nbsp;provide&nbsp;high-quality&nbsp;event-driven&nbsp;line-editing.&lt;br&nbsp;/&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
