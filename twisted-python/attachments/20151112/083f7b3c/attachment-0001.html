<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;12&nbsp;Nov&nbsp;2015,&nbsp;at&nbsp;06:04,&nbsp;Glyph&nbsp;Lefkowitz&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&nbsp;class=&quot;&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Creating&nbsp;this&nbsp;dependency&nbsp;loop&nbsp;(twisted-&gt;txh2-&gt;(twisted-&gt;txh2-&gt;...,&nbsp;h2))&nbsp;seems&nbsp;potentially&nbsp;problematic,&nbsp;and&nbsp;maybe&nbsp;more&nbsp;trouble&nbsp;than&nbsp;it's&nbsp;worth&nbsp;in&nbsp;terms&nbsp;of&nbsp;factoring&nbsp;things&nbsp;out.&nbsp;&nbsp;An&nbsp;IProtocol&nbsp;implementation&nbsp;is&nbsp;literally&nbsp;three&nbsp;methods&nbsp;-&nbsp;makeConnection,&nbsp;dataReceived,&nbsp;connectionLost&nbsp;-&nbsp;so&nbsp;if&nbsp;we&nbsp;put&nbsp;this&nbsp;together&nbsp;nicely&nbsp;there&nbsp;should&nbsp;not&nbsp;be&nbsp;too&nbsp;much&nbsp;code&nbsp;on&nbsp;the&nbsp;Twisted&nbsp;side&nbsp;of&nbsp;things.&nbsp;&nbsp;Or&nbsp;at&nbsp;least,&nbsp;so&nbsp;I&nbsp;imagine;&nbsp;just&nbsp;the&nbsp;glue&nbsp;to&nbsp;hook&nbsp;it&nbsp;up&nbsp;to&nbsp;(sigh)&nbsp;IResource,&nbsp;et.&nbsp;al.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;if&nbsp;we&nbsp;took&nbsp;this&nbsp;approach&nbsp;txh2&nbsp;would&nbsp;be&nbsp;an&nbsp;optional&nbsp;dependency&nbsp;for&nbsp;Twisted,&nbsp;not&nbsp;a&nbsp;hard&nbsp;dependency.&nbsp;That&nbsp;avoids&nbsp;the&nbsp;loop,&nbsp;at&nbsp;the&nbsp;cost&nbsp;of&nbsp;meaning&nbsp;that&nbsp;a&nbsp;default&nbsp;naive&nbsp;Twisted&nbsp;install&nbsp;will&nbsp;have&nbsp;no&nbsp;H2&nbsp;support.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;want&nbsp;to&nbsp;get&nbsp;a&nbsp;sense&nbsp;of&nbsp;what&nbsp;the&nbsp;team&nbsp;believes&nbsp;is&nbsp;the&nbsp;best&nbsp;approach.&nbsp;Can&nbsp;I&nbsp;have&nbsp;your&nbsp;opinions?&nbsp;How&nbsp;much&nbsp;of&nbsp;this&nbsp;should&nbsp;be&nbsp;in&nbsp;Twisted&nbsp;itself?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Can&nbsp;you&nbsp;maybe&nbsp;expand&nbsp;a&nbsp;little&nbsp;bit&nbsp;on&nbsp;what&nbsp;pieces&nbsp;you&nbsp;think&nbsp;need&nbsp;to&nbsp;exist,&nbsp;in&nbsp;terms&nbsp;of&nbsp;what&nbsp;the&nbsp;Protocol&nbsp;would&nbsp;actually&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;do&lt;/i&gt;?&nbsp;&nbsp;Are&nbsp;you&nbsp;thinking&nbsp;about&nbsp;things&nbsp;like&nbsp;integration&nbsp;with&nbsp;Cred?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Sure.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;concerns&nbsp;me&nbsp;as&nbsp;an&nbsp;outsider&nbsp;to&nbsp;Twisted&nbsp;is&nbsp;where&nbsp;exactly&nbsp;there&nbsp;are&nbsp;bits&nbsp;of&nbsp;Twisted&nbsp;that&nbsp;“know”&nbsp;about&nbsp;HTTP,&nbsp;which&nbsp;bits&nbsp;need&nbsp;updating,&nbsp;and&nbsp;how&nbsp;to&nbsp;do&nbsp;it.&nbsp;If&nbsp;we&nbsp;restrain&nbsp;ourselves&nbsp;to&nbsp;twisted.web,&nbsp;this&nbsp;gets&nbsp;a&nbsp;bit&nbsp;easier,&nbsp;but&nbsp;twisted.web&nbsp;is&nbsp;still&nbsp;a&nbsp;substantial&nbsp;chunk&nbsp;of&nbsp;code.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;*might*&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;away&nbsp;with&nbsp;simply&nbsp;having&nbsp;classes&nbsp;that&nbsp;implement&nbsp;the&nbsp;interfaces&nbsp;of&nbsp;twisted.web.http.HTTPClient,&nbsp;twisted.web.http.HTTPChannel,&nbsp;and&nbsp;twisted.web._newclient.HTTPParser.&nbsp;These&nbsp;interfaces&nbsp;are&nbsp;currently&nbsp;implicit,&nbsp;but&nbsp;I’d&nbsp;probably&nbsp;aim&nbsp;to&nbsp;make&nbsp;them&nbsp;explicit&nbsp;(or&nbsp;as&nbsp;explicit&nbsp;as&nbsp;possible)&nbsp;for&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;work&nbsp;so&nbsp;that&nbsp;we&nbsp;could&nbsp;in&nbsp;principle&nbsp;do&nbsp;a&nbsp;similar&nbsp;extension&nbsp;in&nbsp;future.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;this&nbsp;may&nbsp;not&nbsp;work:&nbsp;in&nbsp;particular,&nbsp;some&nbsp;of&nbsp;the&nbsp;other&nbsp;classes&nbsp;in&nbsp;twisted.web&nbsp;may&nbsp;know&nbsp;altogether&nbsp;too&nbsp;much&nbsp;about&nbsp;HTTP/1.X:&nbsp;in&nbsp;particular,&nbsp;if&nbsp;they&nbsp;have&nbsp;the&nbsp;nerve&nbsp;to&nbsp;write&nbsp;directly&nbsp;to&nbsp;a&nbsp;transport&nbsp;we’ve&nbsp;got&nbsp;a&nbsp;real&nbsp;problem&nbsp;with&nbsp;this&nbsp;approach,&nbsp;as&nbsp;HTTP/2&nbsp;does&nbsp;not&nbsp;allow&nbsp;naked&nbsp;writes&nbsp;on&nbsp;its&nbsp;sockets&nbsp;(all&nbsp;data&nbsp;is&nbsp;framed).&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;other&nbsp;bit&nbsp;of&nbsp;work&nbsp;is&nbsp;that&nbsp;we&nbsp;need&nbsp;to&nbsp;update&nbsp;twisted.web&nbsp;factories&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;they&nbsp;build&nbsp;the&nbsp;appropriate&nbsp;protocol&nbsp;and&nbsp;can&nbsp;switch&nbsp;them&nbsp;as&nbsp;needed.&nbsp;Probably&nbsp;this&nbsp;means&nbsp;we&nbsp;just&nbsp;need&nbsp;a&nbsp;layer&nbsp;of&nbsp;indirection,&nbsp;but&nbsp;I’ve&nbsp;not&nbsp;yet&nbsp;worked&nbsp;out&nbsp;how&nbsp;this&nbsp;is&nbsp;going&nbsp;to&nbsp;work.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;question&nbsp;becomes,&nbsp;given&nbsp;how&nbsp;much&nbsp;twisted.web&nbsp;will&nbsp;need&nbsp;to&nbsp;change&nbsp;to&nbsp;accept&nbsp;this&nbsp;H2&nbsp;protocol,&nbsp;whether&nbsp;there&nbsp;is&nbsp;any&nbsp;advantage&nbsp;in&nbsp;having&nbsp;it&nbsp;out&nbsp;of&nbsp;tree.&nbsp;There’s&nbsp;also&nbsp;a&nbsp;question&nbsp;about&nbsp;Twisted&nbsp;policy:&nbsp;how&nbsp;much&nbsp;stuff&nbsp;should&nbsp;actually&nbsp;be&nbsp;directly&nbsp;in&nbsp;Twisted?&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Cory&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
