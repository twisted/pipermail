<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;a&nbsp;python&nbsp;script&nbsp;that&nbsp;executes&nbsp;a&nbsp;python&nbsp;code&nbsp;on&nbsp;a&nbsp;remote&nbsp;host&nbsp;using&nbsp;SSH.&nbsp;It&nbsp;was&nbsp;working&nbsp;perfectly&nbsp;with&nbsp;Twisted&nbsp;2.5.&nbsp;The&nbsp;method&nbsp;of&nbsp;returning&nbsp;private&nbsp;and&nbsp;public&nbsp;has&nbsp;changed&nbsp;in&nbsp;userauth.SSHUserAuthClient&nbsp;(Twisted&nbsp;8.1).&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;<br>
I&nbsp;was&nbsp;using&nbsp;(Twisted&nbsp;2.5)&lt;br&gt;<br>
------------------------------------------------&lt;br&gt;<br>
def&nbsp;getPublicKey(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;return&nbsp;keys.getPublicKeyString(self.keyfile+&#39;.pub&#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;getPrivateKey(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;return&nbsp;defer.succeed(keys.getPrivateKeyObject(self.keyfile))&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Now&nbsp;I&nbsp;am&nbsp;using&nbsp;(Twisted&nbsp;8.1)&lt;br&gt;<br>
----------------------------------------------------&lt;br&gt;<br>
def&nbsp;getPublicKey(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;return&nbsp;keys.Key.fromFile(self.keyfile+&#39;.pub&#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;getPrivateKey(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;return&nbsp;defer.succeed(keys.Key.fromFile(self.keyfile))&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;it&nbsp;doesn&#39;t&nbsp;work&nbsp;any&nbsp;more.&nbsp;I&nbsp;have&nbsp;attached&nbsp;the&nbsp;simplified&nbsp;script.&nbsp;Here&nbsp;is&nbsp;the&nbsp;scenario&nbsp;I&nbsp;am&nbsp;using&nbsp;and&nbsp;the&nbsp;exception&nbsp;I&nbsp;got.&nbsp;Any&nbsp;help&nbsp;is&nbsp;greatly&nbsp;appreciated.&lt;br&gt;<br>
&lt;br&gt;<br>
Scenario&lt;br&gt;<br>
----------------------&lt;br&gt;<br>
I&nbsp;am&nbsp;creating&nbsp;a&nbsp;DSA&nbsp;key&nbsp;using&nbsp;ssh-keygen&nbsp;(in&nbsp;Debian&nbsp;and&nbsp;Ubuntu)&nbsp;with<br>
an&nbsp;empty&nbsp;password&lt;br&gt;<br>
&lt;br&gt;<br>
$&nbsp;ssh-keygen&nbsp;-t&nbsp;dsa&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;copy&nbsp;it&nbsp;to&nbsp;my&nbsp;localhost&lt;br&gt;<br>
&lt;br&gt;<br>
$&nbsp;ssh-copy-id&nbsp;-i&nbsp;~/.ssh/id_dsa&nbsp;localhost&lt;br&gt;<br>
&lt;br&gt;<br>
then&nbsp;run&nbsp;the&nbsp;attached&nbsp;script,&nbsp;which&nbsp;tries&nbsp;to&nbsp;execute&nbsp;a&nbsp;python&nbsp;script&nbsp;remotely&nbsp;using&nbsp;SSH&nbsp;and&nbsp;get&nbsp;the&nbsp;following&nbsp;error&lt;br&gt;<br>
&lt;br&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/internet/selectreactor.py&quot;,&nbsp;line&nbsp;146,&nbsp;in&nbsp;_doReadOrWrite&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;why&nbsp;=&nbsp;getattr(selectable,&nbsp;method)()&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/internet/tcp.py&quot;,&nbsp;line&nbsp;362,&nbsp;in&nbsp;doRead&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.protocol.dataReceived(data)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/transport.py&quot;,&nbsp;line&nbsp;314,&nbsp;in&nbsp;dataReceived&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.dispatchMessage(messageNum,&nbsp;packet[1:])&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/transport.py&quot;,&nbsp;line&nbsp;336,&nbsp;in&nbsp;dispatchMessage&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;messageNum,&nbsp;payload)&lt;br&gt;---&nbsp;&lt;exception&nbsp;caught&nbsp;here&gt;&nbsp;---&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/python/log.py&quot;,&nbsp;line&nbsp;51,&nbsp;in&nbsp;callWithLogger&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;callWithContext({&quot;system&quot;:&nbsp;lp},&nbsp;func,&nbsp;*args,&nbsp;**kw)&lt;br&gt;<br>
<br>
&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/python/log.py&quot;,&nbsp;line&nbsp;36,&nbsp;in&nbsp;callWithContext&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;context.call({ILogContext:&nbsp;newCtx},&nbsp;func,&nbsp;*args,&nbsp;**kw)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/python/context.py&quot;,&nbsp;line&nbsp;59,&nbsp;in&nbsp;callWithContext&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.currentContext().callWithContext(ctx,&nbsp;func,&nbsp;*args,&nbsp;**kw)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/python/context.py&quot;,&nbsp;line&nbsp;37,&nbsp;in&nbsp;callWithContext&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;func(*args,**kw)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/service.py&quot;,&nbsp;line&nbsp;44,&nbsp;in&nbsp;packetReceived&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f(packet)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/userauth.py&quot;,&nbsp;line&nbsp;262,&nbsp;in&nbsp;ssh_USERAUTH_FAILURE&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;method&nbsp;not&nbsp;in&nbsp;self.authenticatedWith&nbsp;and&nbsp;self.tryAuth(method):&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/userauth.py&quot;,&nbsp;line&nbsp;234,&nbsp;in&nbsp;tryAuth&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;f()&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/userauth.py&quot;,&nbsp;line&nbsp;338,&nbsp;in&nbsp;auth_publickey&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;keyType&nbsp;=&nbsp;getNS(publicKey)[0]&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.5/site-packages/twisted/conch/ssh/common.py&quot;,&nbsp;line&nbsp;51,&nbsp;in&nbsp;getNS&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;l,&nbsp;=&nbsp;struct.unpack(&#39;!L&#39;,s[c:c+4])&lt;br&gt;exceptions.TypeError:&nbsp;&#39;Key&#39;&nbsp;object&nbsp;is&nbsp;unsubscriptable&lt;br&gt;&lt;br&gt;<br>
Sincerely&lt;br&gt;<br>
&lt;br&gt;<br>
Saki&lt;br&gt;<br>
&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
