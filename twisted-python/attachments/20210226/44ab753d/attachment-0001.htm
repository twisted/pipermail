<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&#39;m&nbsp;making&nbsp;an&nbsp;IRC&nbsp;client &nbsp;using Twisted,&nbsp;and&nbsp;I&nbsp;want&nbsp;to&nbsp;connect&nbsp;to&nbsp;a&nbsp;different&nbsp;server&nbsp;when&nbsp;connection&nbsp;fails,&nbsp;but&nbsp;I&nbsp;haven&#39;t&nbsp;been&nbsp;able&nbsp;to&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;do&nbsp;that.. &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&#39;s&nbsp;a&nbsp;more&nbsp;or&nbsp;less&nbsp;minimal&nbsp;code&nbsp;sample&nbsp;reflecting&nbsp;what&nbsp;I&nbsp;have&nbsp;now:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;------------------------------------------------------------------------------------------------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;from&nbsp;twisted.words.protocols&nbsp;import&nbsp;irc&nbsp;&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;protocol&nbsp; &lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;&lt;br&gt;class&nbsp;ServerConnection(irc.IRCClient):&lt;br&gt; &nbsp;&lt;br&gt; &nbsp;def&nbsp;__init__(self):&lt;br&gt; &nbsp; &nbsp;self.signedon&nbsp;=&nbsp;False&lt;br&gt; &nbsp; &nbsp;self.nickindex&nbsp;=&nbsp;0&lt;br&gt; &nbsp;&lt;br&gt; &nbsp;def&nbsp;signedOn(self):&lt;br&gt; &nbsp; &nbsp;print(&quot;signed&nbsp;on&quot;)&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp;&lt;br&gt; &nbsp;def&nbsp;nickChanged(self,&nbsp;newnick):&lt;br&gt; &nbsp; &nbsp;self.nickname&nbsp;=&nbsp;newnick&lt;br&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;br&gt;class&nbsp;Network(object):&lt;br&gt; &nbsp;def&nbsp;__init__(self,&nbsp;servers,&nbsp;mynick=None):&lt;br&gt; &nbsp; &nbsp;self.servers&nbsp;=&nbsp;servers&lt;br&gt; &nbsp; &nbsp;self.mynick&nbsp;=&nbsp;mynick&lt;br&gt; &nbsp; &nbsp;self.serverindex&nbsp;=&nbsp;0&lt;br&gt; &nbsp; &nbsp;&lt;br&gt;class&nbsp;ServerFactory(protocol.ReconnectingClientFactory):&lt;br&gt; &nbsp;def&nbsp;__init__(self,&nbsp;nickname=&quot;qttwirc&quot;,&nbsp;password=None,&nbsp;username=&quot;qttwirc&quot;,&nbsp;realname=None,&nbsp;network=None):&lt;br&gt; &nbsp; &nbsp;self.network&nbsp;=&nbsp;network&lt;br&gt; &nbsp; &nbsp;self.network.mynick&nbsp;=&nbsp;nickname&lt;br&gt; &nbsp; &nbsp;self.nickname&nbsp;=&nbsp;nickname&lt;br&gt; &nbsp; &nbsp;self.username&nbsp;=&nbsp;username&lt;br&gt; &nbsp; &nbsp;self.password&nbsp;=&nbsp;password&lt;br&gt; &nbsp; &nbsp;self.realname&nbsp;=&nbsp;realname&lt;br&gt; &nbsp; &nbsp;protocol.ReconnectingClientFactory.initialDelay&nbsp;=&nbsp;10&nbsp;#should&nbsp;i&nbsp;leave&nbsp;this&nbsp;at&nbsp;1?&lt;br&gt; &nbsp; &nbsp;protocol.ReconnectingClientFactory.maxDelay&nbsp;=&nbsp;10&nbsp;#no&nbsp;idea&nbsp;what&nbsp;value&nbsp;this&nbsp;should&nbsp;be.&nbsp;3.5&nbsp;wasn&#39;t&nbsp;slow&nbsp;enough,&nbsp;i&nbsp;was&nbsp;being&nbsp;throttled.&lt;br&gt; &nbsp; &nbsp;&lt;br&gt; &nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt; &nbsp; &nbsp;p&nbsp;=&nbsp;ServerConnection()&lt;br&gt; &nbsp; &nbsp;self.serverconnection&nbsp;=&nbsp;p&lt;br&gt; &nbsp; &nbsp;p.server&nbsp;=&nbsp;self&lt;br&gt; &nbsp; &nbsp;p.nickname&nbsp;=&nbsp;self.nickname&lt;br&gt; &nbsp; &nbsp;p.username&nbsp;=&nbsp;self.username&lt;br&gt; &nbsp; &nbsp;self.resetDelay()&lt;br&gt; &nbsp; &nbsp;return&nbsp;p&lt;br&gt;&lt;br&gt; &nbsp;def&nbsp;clientConnectionLost(self,&nbsp;connector,&nbsp;reason):&lt;br&gt; &nbsp; &nbsp;self.serverconnection&nbsp;=&nbsp;None&lt;br&gt; &nbsp; &nbsp;protocol.ReconnectingClientFactory.clientConnectionLost(self,&nbsp;connector,&nbsp;reason)&lt;br&gt;&lt;br&gt; &nbsp;def&nbsp;clientConnectionFailed(self,&nbsp;connector,&nbsp;reason):&lt;br&gt; &nbsp; &nbsp;self.serverconnection&nbsp;=&nbsp;None&lt;br&gt; &nbsp; &nbsp;addr,&nbsp;port&nbsp;=&nbsp;self.network.servers[self.network.serverindex]&lt;br&gt; &nbsp; &nbsp;self.network.serverindex&nbsp;=&nbsp;(self.network.serverindex+1)&nbsp;%&nbsp;len(self.network.servers)&nbsp;#todo:&nbsp;make&nbsp;it&nbsp;actually&nbsp;use&nbsp;these&nbsp;values&lt;br&gt; &nbsp; &nbsp;&lt;br&gt; &nbsp; &nbsp;#reactor.callLater(config.reconnectdelay,&nbsp;reactor.connectTCP,&nbsp;addr.encode(&quot;ascii&quot;),&nbsp;port,&nbsp;self)&lt;br&gt; &nbsp; &nbsp;#reactor.connectTCP(addr,&nbsp;port,&nbsp;self)&nbsp;#is&nbsp;this&nbsp;feasible?&nbsp;i&nbsp;don&#39;t&nbsp;know&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;do&nbsp;this.&nbsp;connector.connect()&nbsp;apparently&nbsp;doesn&#39;t&nbsp;take&nbsp;server/port&nbsp;as&nbsp;arguments.&lt;br&gt; &nbsp; &nbsp;&lt;br&gt; &nbsp; &nbsp;protocol.ReconnectingClientFactory.clientConnectionFailed(self,&nbsp;connector,&nbsp;reason)&lt;br&gt; &nbsp; &nbsp;&lt;br&gt;network&nbsp;=&nbsp;Network([(&quot;&lt;a&nbsp;href=&quot;http://hitchcock.freenode.net&quot;&gt;hitchcock.freenode.net&lt;/a&gt;&quot;,&nbsp;6667),&nbsp;(&quot;&lt;a&nbsp;href=&quot;http://verne.freenode.net&quot;&gt;verne.freenode.net&lt;/a&gt;&quot;,&nbsp;6667)])&lt;br&gt;server&nbsp;=&nbsp;ServerFactory(nickname=&quot;test123&quot;,&nbsp;username=&quot;test123&quot;,&nbsp;network=network)&nbsp; &nbsp;&lt;br&gt;reactor.connectTCP(*network.servers[network.serverindex],&nbsp;server)&lt;br&gt;reactor.run()&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;------------------------------------------------------------------------------------------------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;have&nbsp;to&nbsp;completely&nbsp;change&nbsp;the&nbsp;structure&nbsp;of&nbsp;how&nbsp;I&nbsp;connect,&nbsp;that&#39;s&nbsp;fine..&nbsp;I&nbsp;don&#39;t&nbsp;understand&nbsp;Twisted&nbsp;very&nbsp;well,&nbsp;so&nbsp;I&#39;m&nbsp;not&nbsp;aware&nbsp;of&nbsp;what&nbsp;some&nbsp;other&nbsp;options&nbsp;are&nbsp;for&nbsp;how&nbsp;to&nbsp;make&nbsp;an&nbsp;IRC&nbsp;client.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(It&nbsp;probably&nbsp;doesn&#39;t&nbsp;matter,&nbsp;but&nbsp;in&nbsp;my&nbsp;actual&nbsp;program&nbsp;I&#39;m&nbsp;using&nbsp;both&nbsp;Twisted&nbsp;and&nbsp;PyQt5&nbsp;in&nbsp;the&nbsp;same&nbsp;run&nbsp;loop&nbsp;using&nbsp;qt5reactor..)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
