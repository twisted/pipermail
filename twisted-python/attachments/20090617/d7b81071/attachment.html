<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7654.12&quot;&gt;<br>
&lt;TITLE&gt;Dropin.cache&nbsp;errors&nbsp;after&nbsp;clean&nbsp;install&nbsp;of&nbsp;twisted-8.2.0&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I&nbsp;recently&nbsp;installed&nbsp;python-2.6.1&nbsp;and&nbsp;then&nbsp;twisted-8.2.0&nbsp;(outside&nbsp;of&nbsp;the&nbsp;python&nbsp;tree).&nbsp;&nbsp;One&nbsp;of&nbsp;my&nbsp;users&nbsp;is&nbsp;complaining&nbsp;that&nbsp;when&nbsp;he&nbsp;uses&nbsp;trial&nbsp;to&nbsp;test&nbsp;some&nbsp;twisted&nbsp;programs,&nbsp;although&nbsp;his&nbsp;test&nbsp;passes,&nbsp;he&nbsp;has&nbsp;to&nbsp;stare&nbsp;at&nbsp;a&nbsp;stack&nbsp;trace&nbsp;like&nbsp;this&nbsp;which&nbsp;mentions&nbsp;dropin.cache.new&nbsp;failing&nbsp;to&nbsp;be&nbsp;written:&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;$&nbsp;cat&nbsp;foo.py&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;#!/sw/external/python-2.6.1/bin/python&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;from&nbsp;twisted.trial&nbsp;import&nbsp;unittest&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;class&nbsp;MyTestClass(unittest.TestCase):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;test_foobar(self):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;'hello,&nbsp;world!'&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.failUnless(1&nbsp;==&nbsp;1)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;$&nbsp;/sw/external/twisted-8.2.0/bin/trial&nbsp;./foo.py&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;/sw/external/twisted-8.2.0/lib/python/twisted/persisted/sob.py:12:&nbsp;DeprecationWarning:&nbsp;the&nbsp;md5&nbsp;module&nbsp;is&nbsp;deprecated;&nbsp;use&nbsp;hashlib&nbsp;instead&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;import&nbsp;os,&nbsp;md5,&nbsp;sys&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;/sw/external/twisted-8.2.0/lib/python/twisted/python/filepath.py:12:&nbsp;DeprecationWarning:&nbsp;the&nbsp;sha&nbsp;module&nbsp;is&nbsp;deprecated;&nbsp;use&nbsp;the&nbsp;hashlib&nbsp;module&nbsp;instead&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;import&nbsp;sha&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;/sw/external/twisted-8.2.0/lib/python/twisted/web/microdom.py:181:&nbsp;SyntaxWarning:&nbsp;assertion&nbsp;is&nbsp;always&nbsp;true,&nbsp;perhaps&nbsp;remove&nbsp;parentheses?&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;assert&nbsp;(oldChild.parentNode&nbsp;is&nbsp;self,&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/python/usage.py&quot;,&nbsp;line&nbsp;241,&nbsp;in&nbsp;parseOptions&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.postOptions()&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/scripts/trial.py&quot;,&nbsp;line&nbsp;293,&nbsp;in&nbsp;postOptions&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;self['reporter']&nbsp;=&nbsp;self._loadReporterByName(self['reporter'])&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/scripts/trial.py&quot;,&nbsp;line&nbsp;279,&nbsp;in&nbsp;_loadReporterByName&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;p&nbsp;in&nbsp;plugin.getPlugins(itrial.IReporter):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/plugin.py&quot;,&nbsp;line&nbsp;200,&nbsp;in&nbsp;getPlugins&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;allDropins&nbsp;=&nbsp;getCache(package)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;---&nbsp;&lt;exception&nbsp;caught&nbsp;here&gt;&nbsp;---&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/plugin.py&quot;,&nbsp;line&nbsp;179,&nbsp;in&nbsp;getCache&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;dropinPath.setContent(pickle.dumps(dropinDotCache))&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/python/filepath.py&quot;,&nbsp;line&nbsp;623,&nbsp;in&nbsp;setContent&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;f&nbsp;=&nbsp;sib.open('w')&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;File&nbsp;&quot;/sw/external/twisted-8.2.0/lib/python/twisted/python/filepath.py&quot;,&nbsp;line&nbsp;433,&nbsp;in&nbsp;open&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;open(self.path,&nbsp;mode+'b')&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;exceptions.IOError:&nbsp;[Errno&nbsp;30]&nbsp;Read-only&nbsp;file&nbsp;system:&nbsp;'/sw/external/twisted-8.2.0/lib/python/twisted/plugins/dropin.cache.new'&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;foo&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;MyTestClass&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;test_foobar&nbsp;...&nbsp;hello,&nbsp;world!&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[OK]&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;-------------------------------------------------------------------------------&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Ran&nbsp;1&nbsp;tests&nbsp;in&nbsp;0.023s&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;PASSED&nbsp;(successes=1)&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I&nbsp;would&nbsp;consider&nbsp;this&nbsp;to&nbsp;be&nbsp;an&nbsp;install&nbsp;bug.&nbsp;&nbsp;Evidently,&nbsp;trial&nbsp;uses&nbsp;plugins,&nbsp;which&nbsp;upon&nbsp;reading&nbsp;&lt;/FONT&gt;&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/projects/core/documentation/howto/plugin.html#auto3&quot;&gt;&lt;U&gt;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;http://twistedmatrix.com/projects/core/documentation/howto/plugin.html#auto3&lt;/FONT&gt;&lt;/U&gt;&lt;/A&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;I&nbsp;find&nbsp;that&nbsp;plugins&nbsp;need&nbsp;up-to-date&nbsp;dropin.cache&nbsp;files&nbsp;to&nbsp;be&nbsp;built,&nbsp;or&nbsp;else&nbsp;they'll&nbsp;be&nbsp;built&nbsp;dynamically;&nbsp;the&nbsp;latter&nbsp;step&nbsp;fails&nbsp;in&nbsp;my&nbsp;case&nbsp;due&nbsp;to&nbsp;my&nbsp;site-wide&nbsp;install&nbsp;being&nbsp;on&nbsp;a&nbsp;read-only&nbsp;directory.&nbsp;&nbsp;The&nbsp;docs&nbsp;say&nbsp;&quot;&lt;/FONT&gt;&lt;FONT&nbsp;FACE=&quot;Arial&quot;&gt;when&nbsp;installing&nbsp;or&nbsp;removing&nbsp;software&nbsp;which&nbsp;provides&nbsp;Twisted&nbsp;plugins,&nbsp;the&nbsp;site&nbsp;administrator&nbsp;should&nbsp;be&nbsp;sure&nbsp;the&nbsp;cache&nbsp;is&nbsp;regenerated&lt;/FONT&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&quot;;&nbsp;however&nbsp;all&nbsp;I&nbsp;did&nbsp;was&nbsp;install&nbsp;twisted&nbsp;itself,&nbsp;not&nbsp;any&nbsp;specific&nbsp;plugins.&nbsp;&nbsp;All&nbsp;I&nbsp;did&nbsp;to&nbsp;install&nbsp;twisted&nbsp;was&nbsp;'python&nbsp;setup.py&nbsp;install&nbsp;--home=...'&nbsp;and&nbsp;at&nbsp;no&nbsp;later&nbsp;point&nbsp;did&nbsp;I&nbsp;ever&nbsp;add&nbsp;new&nbsp;plugins&nbsp;to&nbsp;it.&nbsp;&nbsp;Why&nbsp;can't&nbsp;the&nbsp;install&nbsp;take&nbsp;care&nbsp;of&nbsp;initial&nbsp;dropin.cache&nbsp;generation&nbsp;for&nbsp;me?&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I&nbsp;see&nbsp;a&nbsp;related&nbsp;issue&nbsp;&lt;/FONT&gt;&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/trac/ticket/2409&quot;&gt;&lt;U&gt;&lt;FONT&nbsp;COLOR=&quot;#0000FF&quot;&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;http://twistedmatrix.com/trac/ticket/2409&lt;/FONT&gt;&lt;/U&gt;&lt;/A&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Regardless&nbsp;of&nbsp;whether&nbsp;ticket&nbsp;2409&nbsp;goes&nbsp;anywhere,&nbsp;should&nbsp;I&nbsp;raise&nbsp;an&nbsp;issue&nbsp;that&nbsp;the&nbsp;install&nbsp;should&nbsp;really&nbsp;take&nbsp;care&nbsp;of&nbsp;initial&nbsp;dropin.cache&nbsp;generation,&nbsp;much&nbsp;like&nbsp;python&nbsp;install&nbsp;takes&nbsp;care&nbsp;of&nbsp;std&nbsp;lib&nbsp;.py-&gt;.pyc&nbsp;generation?&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Thanks.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
