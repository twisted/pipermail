<tt>
One&nbsp;thing&nbsp;that&nbsp;has&nbsp;been&nbsp;puzzling&nbsp;me&nbsp;is&nbsp;where&nbsp;is&nbsp;the&nbsp;best&nbsp;place&nbsp;to&nbsp;put&nbsp;<br>
application&nbsp;code.<br>
&lt;br&gt;<br>
&lt;br&gt;The&nbsp;case&nbsp;I&nbsp;am&nbsp;using&nbsp;is&nbsp;straightforward&nbsp;TCP&nbsp;server&nbsp;with&nbsp;client&nbsp;<br>
connections&nbsp;making&nbsp;simple&nbsp;requests&nbsp;and&nbsp;waiting&nbsp;for&nbsp;responses&nbsp;retrieved&nbsp;<br>
from&nbsp;database&nbsp;tables&nbsp;to&nbsp;be&nbsp;sent&nbsp;back.<br>
&lt;br&gt;<br>
&lt;br&gt;Reading&nbsp;the&nbsp;docs&nbsp;and&nbsp;looking&nbsp;at&nbsp;various&nbsp;examples&nbsp;provided&nbsp;in&nbsp;books&nbsp;and&nbsp;<br>
documentation&nbsp;has&nbsp;left&nbsp;me&nbsp;a&nbsp;bit&nbsp;confused.<br>
&lt;br&gt;<br>
&lt;br&gt;Is&nbsp;there&nbsp;a&nbsp;best&nbsp;practice&nbsp;for&nbsp;where&nbsp;application&nbsp;code&nbsp;should&nbsp;go&nbsp;-&nbsp;either&nbsp;<br>
the&nbsp;protcocol&nbsp;class&nbsp;or&nbsp;the&nbsp;factory&nbsp;class&nbsp;or&nbsp;somewhere&nbsp;else.&nbsp;Does&nbsp;it&nbsp;<br>
actually&nbsp;matter.<br>
&lt;br&gt;<br>
&lt;br&gt;Is&nbsp;there&nbsp;any&nbsp;downside&nbsp;to&nbsp;putting&nbsp;application&nbsp;code&nbsp;in&nbsp;the&nbsp;protocol&nbsp;or&nbsp;<br>
factory.&nbsp;What&nbsp;pitfalls&nbsp;are&nbsp;there&nbsp;for&nbsp;either&nbsp;approach.<br>
&lt;br&gt;<br>
&lt;br&gt;I&nbsp;see&nbsp;examples&nbsp;where&nbsp;application&nbsp;code&nbsp;appears&nbsp;in&nbsp;both&nbsp;classes,&nbsp;but&nbsp;the&nbsp;<br>
examples&nbsp;are&nbsp;very&nbsp;small&nbsp;so&nbsp;may&nbsp;not&nbsp;be&nbsp;indicative&nbsp;of&nbsp;what&nbsp;should&nbsp;be&nbsp;done.<br>
&lt;br&gt;<br>
&lt;br&gt;In&nbsp;the&nbsp;docs&nbsp;I&nbsp;see&nbsp;reference&nbsp;to&nbsp;most&nbsp;of&nbsp;the&nbsp;code&nbsp;will&nbsp;be&nbsp;written&nbsp;in&nbsp;the&nbsp;<br>
protocol&nbsp;class,&nbsp;but&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;referring&nbsp;to&nbsp;actually&nbsp;writing&nbsp;<br>
protocols&nbsp;not&nbsp;application&nbsp;code.&nbsp;It&nbsp;also&nbsp;says&nbsp;that&nbsp;when&nbsp;the&nbsp;protocol&nbsp;<br>
needs&nbsp;to&nbsp;call&nbsp;application&nbsp;code&nbsp;to&nbsp;make&nbsp;it&nbsp;a&nbsp;method&nbsp;call&nbsp;-&nbsp;&nbsp;not&nbsp;to&nbsp;mix&nbsp;<br>
protocol&nbsp;and&nbsp;application&nbsp;code.&nbsp;This&nbsp;could&nbsp;just&nbsp;mean&nbsp;creating&nbsp;some&nbsp;<br>
methods&nbsp;in&nbsp;the&nbsp;protocol&nbsp;class&nbsp;to&nbsp;handle&nbsp;the&nbsp;task.<br>
&lt;br&gt;<br>
&lt;br&gt;However,&nbsp;if&nbsp;the&nbsp;application&nbsp;code&nbsp;needs&nbsp;to&nbsp;run&nbsp;for&nbsp;10-12&nbsp;seconds&nbsp;looking&nbsp;<br>
up&nbsp;database&nbsp;tables&nbsp;and&nbsp;accumulating&nbsp;results&nbsp;and&nbsp;waiting&nbsp;on&nbsp;&nbsp;deferreds,&nbsp;<br>
should&nbsp;all&nbsp;this&nbsp;code&nbsp;reside&nbsp;in&nbsp;the&nbsp;protocol&nbsp;class&nbsp;or&nbsp;the&nbsp;factory.<br>
&lt;br&gt;<br>
&lt;br&gt;If&nbsp;I&nbsp;keep&nbsp;it&nbsp;in&nbsp;the&nbsp;protocol,&nbsp;then&nbsp;I&nbsp;already&nbsp;have&nbsp;my&nbsp;client&nbsp;connection&nbsp;<br>
to&nbsp;write&nbsp;back&nbsp;to.&nbsp;So&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;place&nbsp;to&nbsp;keep&nbsp;the&nbsp;code.<br>
&lt;br&gt;<br>
&lt;br&gt;If&nbsp;I&nbsp;put&nbsp;the&nbsp;code&nbsp;in&nbsp;the&nbsp;factory,&nbsp;then&nbsp;I&nbsp;need&nbsp;to&nbsp;pass&nbsp;the&nbsp;client&nbsp;<br>
connection&nbsp;so&nbsp;it&nbsp;can&nbsp;write&nbsp;back&nbsp;to&nbsp;the&nbsp;client.&nbsp;Or&nbsp;is&nbsp;there&nbsp;another&nbsp;way&nbsp;<br>
of&nbsp;doing&nbsp;this&nbsp;I&nbsp;have&nbsp;missed.<br>
&lt;br&gt;.<br>
&lt;br&gt;The&nbsp;factory&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;place&nbsp;where&nbsp;other&nbsp;classes&nbsp;can&nbsp;be&nbsp;passed&nbsp;in&nbsp;<br>
and&nbsp;the&nbsp;protocol&nbsp;can&nbsp;call&nbsp;them&nbsp;via&nbsp;self.factory.&nbsp;That&nbsp;seems&nbsp;to&nbsp;imply&nbsp;<br>
that&nbsp;application&nbsp;code&nbsp;should&nbsp;be&nbsp;put&nbsp;into&nbsp;the&nbsp;factory,&nbsp;but&nbsp;I&nbsp;can&#39;t&nbsp;see&nbsp;<br>
any&nbsp;way&nbsp;of&nbsp;passing&nbsp;back&nbsp;information&nbsp;from&nbsp;deferred&nbsp;results&nbsp;to&nbsp;the&nbsp;call&nbsp;<br>
from&nbsp;protocol.&nbsp;It&#39;s&nbsp;ok&nbsp;if&nbsp;it&nbsp;was&nbsp;just&nbsp;a&nbsp;simple&nbsp;method&nbsp;call&nbsp;that&nbsp;returns&nbsp;<br>
a&nbsp;result,&nbsp;but&nbsp;if&nbsp;the&nbsp;code&nbsp;has&nbsp;to&nbsp;run&nbsp;a&nbsp;series&nbsp;of&nbsp;deferreds&nbsp;then&nbsp;it&nbsp;will&nbsp;<br>
be&nbsp;the&nbsp;called&nbsp;method&nbsp;that&nbsp;will&nbsp;have&nbsp;the&nbsp;result&nbsp;and&nbsp;it&nbsp;will&nbsp;need&nbsp;a&nbsp;means&nbsp;<br>
of&nbsp;writing&nbsp;this&nbsp;back&nbsp;to&nbsp;the&nbsp;client.&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;I&nbsp;can&nbsp;signal&nbsp;the&nbsp;<br>
protocol&nbsp;to&nbsp;say&nbsp;I&nbsp;now&nbsp;have&nbsp;the&nbsp;result.Of&nbsp;course&nbsp;I&nbsp;could&nbsp;easily&nbsp;be&nbsp;<br>
mistaken.&nbsp;So&nbsp;please&nbsp;correct.<br>
&lt;br&gt;<br>
&lt;br&gt;Of&nbsp;course&nbsp;if&nbsp;I&nbsp;passs&nbsp;the&nbsp;client&nbsp;connection&nbsp;to&nbsp;the&nbsp;factory,&nbsp;then&nbsp;it&nbsp;can&nbsp;<br>
use&nbsp;this&nbsp;to&nbsp;write&nbsp;back.&nbsp;But&nbsp;that&nbsp;means&nbsp;passing&nbsp;around&nbsp;the&nbsp;client&nbsp;<br>
connection.&nbsp;Should&nbsp;I&nbsp;avoid&nbsp;doing&nbsp;that&nbsp;or&nbsp;is&nbsp;that&nbsp;not&nbsp;a&nbsp;problem.<br>
&lt;br&gt;<br>
&lt;br&gt;I&nbsp;hope&nbsp;I&nbsp;have&nbsp;explained&nbsp;myself&nbsp;clearly.&nbsp;I&#39;m&nbsp;just&nbsp;looking&nbsp;for&nbsp;some&nbsp;<br>
guidance&nbsp;and&nbsp;pointers&nbsp;to&nbsp;what&nbsp;is&nbsp;best&nbsp;to&nbsp;do&nbsp;or&nbsp;what&nbsp;is&nbsp;best&nbsp;to&nbsp;avoid.<br>
&lt;br&gt;<br>
&lt;br&gt;Regards<br>
&lt;br&gt;<br>
&lt;br&gt;John&nbsp;Aherne&lt;br&gt;<br>

</tt>
