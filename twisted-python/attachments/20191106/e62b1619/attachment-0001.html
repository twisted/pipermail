<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Barry,&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;Thanks&nbsp;for&nbsp;the&nbsp;response.&nbsp;Where&nbsp;can&nbsp;I&nbsp;read&nbsp;more&nbsp;about&nbsp;(1).&nbsp;It&nbsp;seems&nbsp;like&nbsp;that&nbsp;is&nbsp;something&nbsp;I&nbsp;need&nbsp;to&nbsp;explore.&lt;/div&gt;&lt;div&gt;As&nbsp;we&nbsp;already&nbsp;have&nbsp;(2)&nbsp;(cache&nbsp;for&nbsp;each&nbsp;process).&lt;/div&gt;&lt;div&gt;Thanks&nbsp;again for&nbsp;your&nbsp;help.&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Wed,&nbsp;Nov&nbsp;6,&nbsp;2019&nbsp;at&nbsp;8:39&nbsp;AM&nbsp;Scott,&nbsp;Barry&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:barry.scott@forcepoint.com&quot;&gt;barry.scott@forcepoint.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;Wednesday,&nbsp;6&nbsp;November&nbsp;2019&nbsp;14:21:22&nbsp;GMT&nbsp;Maarten&nbsp;ter&nbsp;Huurne&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Wednesday,&nbsp;6&nbsp;November&nbsp;2019&nbsp;07:19:56&nbsp;CET&nbsp;Waqar&nbsp;Khan&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;So,&nbsp;I&nbsp;am&nbsp;writing&nbsp;a&nbsp;twisted&nbsp;server.&nbsp;This&nbsp;server&nbsp;spawn&nbsp;multiple&nbsp;child&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;processes&nbsp;using&nbsp;reactor&nbsp;spawnProcess&nbsp;that&nbsp;initializes&nbsp;a&nbsp;process&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;protocol.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Now,&nbsp;each&nbsp;of&nbsp;the&nbsp;childprocess&nbsp;receives&nbsp;some&nbsp;REST&nbsp;requests.&nbsp;Each&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;process&nbsp;has&nbsp;a&nbsp;dict&nbsp;that&nbsp;acts&nbsp;as&nbsp;cache.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Now,&nbsp;I&nbsp;want&nbsp;to&nbsp;share&nbsp;dict&nbsp;across&nbsp;processes.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;In&nbsp;general,&nbsp;python&nbsp;has&nbsp;SharedMemoryManager&nbsp;in&nbsp;multiprocessing&nbsp;module&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;which&nbsp;would&nbsp;have&nbsp;helped.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;https://docs.python.org/3/library/multiprocessing.shared_memory.html#m&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://docs.python.org/3/library/multiprocessing.shared_memory.html#m&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;ultiprocessing.managers.SharedMemoryManager.SharedMemory&nbsp;But&nbsp;since&nbsp;I&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;am&nbsp;using&nbsp;twisted&nbsp;internal&nbsp;process&nbsp;implementation,&nbsp;how&nbsp;do&nbsp;I&nbsp;share&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;dict&nbsp;across&nbsp;the&nbsp;processes&nbsp;so&nbsp;that&nbsp;all&nbsp;the&nbsp;processes&nbsp;use&nbsp;this&nbsp;common&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Keeping&nbsp;a&nbsp;dictionary&nbsp;in&nbsp;SharedMemoryManager&nbsp;seems&nbsp;far&nbsp;from&nbsp;trivial.&nbsp;I&lt;br&gt;<br>
&gt;&nbsp;don&#39;t&nbsp;think&nbsp;you&nbsp;can&nbsp;allocate&nbsp;arbitrary&nbsp;Python&nbsp;objects&nbsp;in&nbsp;the&nbsp;shared&lt;br&gt;<br>
&gt;&nbsp;memory&nbsp;and&nbsp;even&nbsp;if&nbsp;you&nbsp;could,&nbsp;you&nbsp;would&nbsp;run&nbsp;into&nbsp;problems&nbsp;when&nbsp;one&lt;br&gt;<br>
&gt;&nbsp;process&nbsp;mutates&nbsp;the&nbsp;dictionary&nbsp;while&nbsp;another&nbsp;is&nbsp;looking&nbsp;up&nbsp;something&nbsp;or&lt;br&gt;<br>
&gt;&nbsp;also&nbsp;mutating&nbsp;it.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;could&nbsp;in&nbsp;theory&nbsp;work&nbsp;if&nbsp;you&nbsp;implement&nbsp;a&nbsp;custom&nbsp;lock-less&nbsp;dictionary,&lt;br&gt;<br>
&gt;&nbsp;but&nbsp;that&nbsp;would&nbsp;be&nbsp;a&nbsp;lot&nbsp;of&nbsp;work&nbsp;and&nbsp;hard&nbsp;to&nbsp;get&nbsp;right.&nbsp;Also&nbsp;having&lt;br&gt;<br>
&gt;&nbsp;shared&nbsp;memory&nbsp;mutations&nbsp;be&nbsp;synced&nbsp;between&nbsp;multiple&nbsp;CPU&nbsp;cores&nbsp;could&lt;br&gt;<br>
&gt;&nbsp;degrade&nbsp;performance,&nbsp;since&nbsp;keeping&nbsp;core-local&nbsp;CPU&nbsp;caches&nbsp;in&nbsp;sync&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;expensive.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Would&nbsp;it&nbsp;be&nbsp;an&nbsp;option&nbsp;to&nbsp;have&nbsp;only&nbsp;one&nbsp;process&nbsp;accept&nbsp;the&nbsp;REST&nbsp;requests,&lt;br&gt;<br>
&gt;&nbsp;check&nbsp;whether&nbsp;the&nbsp;result&nbsp;is&nbsp;in&nbsp;the&nbsp;cache&nbsp;and&nbsp;only&nbsp;distribute&nbsp;work&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;other&nbsp;processes&nbsp;if&nbsp;you&nbsp;get&nbsp;a&nbsp;cache&nbsp;miss?&nbsp;Typically&nbsp;the&nbsp;case&nbsp;where&nbsp;an&lt;br&gt;<br>
&gt;&nbsp;answer&nbsp;is&nbsp;cached&nbsp;is&nbsp;pretty&nbsp;fast,&nbsp;so&nbsp;perhaps&nbsp;you&nbsp;don&#39;t&nbsp;need&nbsp;multiple&lt;br&gt;<br>
&gt;&nbsp;processes&nbsp;to&nbsp;handle&nbsp;incoming&nbsp;requests.&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;have&nbsp;used&nbsp;a&nbsp;couple&nbsp;of&nbsp;ways&nbsp;to&nbsp;cache.&lt;br&gt;<br>
1.&nbsp;Use&nbsp;a&nbsp;singleton&nbsp;process&nbsp;to&nbsp;hold&nbsp;the&nbsp;cache&nbsp;and&nbsp;ask&nbsp;it,&nbsp;via&nbsp;IPC,&nbsp;for&nbsp;answers&nbsp;&lt;br&gt;<br>
from&nbsp;the&nbsp;other&nbsp;process.&lt;br&gt;<br>
2.&nbsp;have&nbsp;a&nbsp;cache&nbsp;in&nbsp;each&nbsp;process&lt;br&gt;<br>
&lt;br&gt;<br>
Barry&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Bye,&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Maarten&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
