<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;finding&nbsp;it&nbsp;difficult&nbsp;to&nbsp;get&nbsp;log&nbsp;rotation&nbsp;working&nbsp;cleanly&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;twistd&nbsp;(if&nbsp;dropping&nbsp;privileges&nbsp;through&nbsp;twistd,&nbsp;which&nbsp;we&nbsp;require).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;went&nbsp;through&nbsp;all&nbsp;the&nbsp;docs&nbsp;and&nbsp;also&nbsp;found&nbsp;[1]&nbsp;very&nbsp;helpful,&nbsp;but&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;problem&nbsp;boils&nbsp;down&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&gt;Implications&nbsp;for&nbsp;Logfile&nbsp;Rotation&lt;/h2&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Using&nbsp;the&nbsp;configuration&nbsp;described&nbsp;here,&nbsp;the&nbsp;LOGFILE&nbsp;will&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;created&nbsp;as&nbsp;user&nbsp;&#8220;root&#8221;&nbsp;and&nbsp;group&nbsp;&#8220;root&#8221;,&nbsp;but&nbsp;rotated&nbsp;as&nbsp;user&nbsp;UID<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;group&nbsp;GID.&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;rotation&nbsp;to&nbsp;work&nbsp;as&nbsp;advertised&nbsp;it&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;necessary&nbsp;to&nbsp;put&nbsp;the&nbsp;LOGFILE&nbsp;in&nbsp;a&nbsp;directory&nbsp;in&nbsp;which&nbsp;UID/GID&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;permissions&nbsp;to&nbsp;rename&nbsp;files.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;and&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;rotate(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rotate&nbsp;the&nbsp;file&nbsp;and&nbsp;create&nbsp;a&nbsp;new&nbsp;one.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;it's&nbsp;not&nbsp;possible&nbsp;to&nbsp;open&nbsp;new&nbsp;logfile,&nbsp;this&nbsp;will&nbsp;fail<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;silently,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;continue&nbsp;logging&nbsp;to&nbsp;old&nbsp;logfile.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;(os.access(self.directory,&nbsp;os.W_OK)&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.access(self.path,&nbsp;os.W_OK)):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(twisted&nbsp;14.0.0)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;never&nbsp;work&nbsp;together.&nbsp;Even&nbsp;if&nbsp;the&nbsp;user&nbsp;twistd&nbsp;runs&nbsp;as&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;technically&nbsp;able&nbsp;to&nbsp;rename&nbsp;the&nbsp;log&nbsp;file&nbsp;(due&nbsp;to&nbsp;having&nbsp;write<br>
&nbsp;&nbsp;&nbsp;&nbsp;permissions&nbsp;on&nbsp;the&nbsp;directory),&nbsp;it&nbsp;will&nbsp;never&nbsp;try&nbsp;to&nbsp;since&nbsp;it&nbsp;can't<br>
&nbsp;&nbsp;&nbsp;&nbsp;write&nbsp;to&nbsp;the&nbsp;file.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;is&nbsp;a&nbsp;workaround&nbsp;on&nbsp;a&nbsp;comment&nbsp;in&nbsp;[1]&nbsp;but&nbsp;that's&nbsp;a&nbsp;really<br>
&nbsp;&nbsp;&nbsp;&nbsp;unnecessary&nbsp;and&nbsp;hacky&nbsp;solution,&nbsp;IMHO.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Is&nbsp;this&nbsp;a&nbsp;known&nbsp;bug?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;remember&nbsp;running&nbsp;into&nbsp;this&nbsp;issue&nbsp;a&nbsp;year&nbsp;ago&nbsp;or&nbsp;so&nbsp;and&nbsp;IIRC&nbsp;I&nbsp;just<br>
&nbsp;&nbsp;&nbsp;&nbsp;gave&nbsp;up.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;for&nbsp;any&nbsp;pointers,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;max&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;[1]&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.tsheffler.com/blog/?p=526&quot;&gt;http://www.tsheffler.com/blog/?p=526&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
