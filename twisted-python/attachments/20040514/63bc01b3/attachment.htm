<tt>
&lt;DIV&gt;But&nbsp;it&nbsp;blocks,&nbsp;mm?&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;could&nbsp;break&nbsp;things&nbsp;into&nbsp;small&nbsp;chuncks,&nbsp;so&nbsp;I&nbsp;could&nbsp;likely&nbsp;get&nbsp;away&nbsp;with&lt;/DIV&gt;<br>
&lt;DIV&gt;not&nbsp;using&nbsp;a&nbsp;thread.&nbsp;But&nbsp;shouldn't&nbsp;it&nbsp;ideally&nbsp;be&nbsp;accessed&nbsp;from&nbsp;a&nbsp;thread?&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;I'll&nbsp;note&nbsp;that&nbsp;you&nbsp;can&nbsp;open&nbsp;bsddb&nbsp;(using&nbsp;the&nbsp;new&nbsp;interface,&nbsp;not&nbsp;the&lt;/DIV&gt;<br>
&lt;DIV&gt;one&nbsp;documented&nbsp;in&nbsp;Python)&nbsp;in&nbsp;a&nbsp;thread-safe&nbsp;way,&nbsp;but&nbsp;any&nbsp;given&amp;nbsp;iteration&lt;/DIV&gt;<br>
&lt;DIV&gt;(using&nbsp;a&nbsp;cursor&nbsp;object)&nbsp;must&nbsp;be&nbsp;done&nbsp;from&nbsp;a&nbsp;single&nbsp;thread--cursors&lt;/DIV&gt;<br>
&lt;DIV&gt;are&nbsp;not&nbsp;thread-free.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;One&nbsp;approach&nbsp;might&nbsp;be&nbsp;to&nbsp;create&nbsp;a&nbsp;cursor&nbsp;in&nbsp;a&nbsp;server&nbsp;thread&nbsp;and&nbsp;then&lt;/DIV&gt;<br>
&lt;DIV&gt;use&nbsp;a&nbsp;fixed-size&nbsp;queue&nbsp;to&nbsp;retrieve&nbsp;the&nbsp;iterations,&nbsp;but&nbsp;then&nbsp;you'll&nbsp;need&lt;/DIV&gt;<br>
&lt;DIV&gt;at&nbsp;least&nbsp;as&nbsp;many&nbsp;server&nbsp;threads&nbsp;as&nbsp;you&nbsp;have&nbsp;open&nbsp;cursors.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;So&nbsp;the&nbsp;best&nbsp;approach&nbsp;might&nbsp;be&nbsp;to&nbsp;have&nbsp;a&nbsp;cursor&nbsp;manager&nbsp;which&nbsp;handles&lt;/DIV&gt;<br>
&lt;DIV&gt;many&nbsp;such&nbsp;cursors/queues&nbsp;running&nbsp;on&nbsp;a&nbsp;single&nbsp;thread.&nbsp;(Invoking&nbsp;the&lt;/DIV&gt;<br>
&lt;DIV&gt;manager,&nbsp;it&nbsp;returns&nbsp;a&nbsp;master&nbsp;queue&nbsp;for&nbsp;handling&nbsp;subsequent&nbsp;requests.)&lt;/DIV&gt;<br>
&lt;DIV&gt;But&nbsp;then&nbsp;it&nbsp;sounds&nbsp;like&nbsp;a&nbsp;dedicated&nbsp;thread&nbsp;is&nbsp;again&nbsp;the&nbsp;best&nbsp;approach.&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;It&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;a&nbsp;nice&nbsp;general&nbsp;solution&nbsp;would&nbsp;be&nbsp;a&nbsp;project&nbsp;in&nbsp;its&nbsp;own&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;right.&nbsp;(I've&nbsp;found&nbsp;bsddb&nbsp;to&nbsp;be&nbsp;pretty&nbsp;powerful/useful/fast/handy.)&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Ah,&nbsp;Atop&nbsp;looks&nbsp;interesting.&nbsp;Thanks!&lt;/DIV&gt;<br>
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Bill&lt;BR&gt;&lt;BR&gt;&lt;B&gt;&lt;I&gt;Matt&nbsp;Goodall&nbsp;&amp;lt;matt@pollenation.net&amp;gt;&lt;/I&gt;&lt;/B&gt;&nbsp;wrote:&lt;/DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;class=replbq&nbsp;style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#1010ff&nbsp;2px&nbsp;solid&quot;&gt;On&nbsp;Fri,&nbsp;2004-05-14&nbsp;at&nbsp;08:17,&nbsp;Bill&nbsp;la&nbsp;Forge&nbsp;wrote:&lt;BR&gt;&amp;gt;&nbsp;New&nbsp;to&nbsp;twisted,&nbsp;interested&nbsp;in&nbsp;porting&nbsp;a&nbsp;project,&nbsp;but&nbsp;I&nbsp;can't&nbsp;find&lt;BR&gt;&amp;gt;&nbsp;anything&nbsp;on&nbsp;using&nbsp;bsddb.&lt;BR&gt;&lt;BR&gt;Open&nbsp;a&nbsp;bdb&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;app,&nbsp;use&nbsp;it&nbsp;as&nbsp;necessary,&nbsp;close&nbsp;the&nbsp;bdb&lt;BR&gt;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;app.&nbsp;What&nbsp;could&nbsp;be&nbsp;easier&nbsp;;-).&lt;BR&gt;&lt;BR&gt;It's&nbsp;probably&nbsp;worth&nbsp;creating&nbsp;a&nbsp;Service&lt;BR&gt;(http://twistedmatrix.com/documents/current/api/)&nbsp;to&nbsp;help&nbsp;manage&nbsp;the&lt;BR&gt;bsddb&nbsp;resource.&lt;BR&gt;&lt;BR&gt;&amp;gt;&nbsp;I&nbsp;assume&nbsp;I&nbsp;need&nbsp;a&nbsp;dedicated&nbsp;thread.&nbsp;Has&nbsp;anyone&nbsp;else&nbsp;worked&nbsp;on&nbsp;this?&lt;BR&gt;&lt;BR&gt;You&nbsp;probably&nbsp;only&nbsp;need&nbsp;a&nbsp;thread&nbsp;for&nbsp;operations&nbsp;that&nbsp;you&nbsp;know&nbsp;will&nbsp;take&nbsp;a&lt;BR&gt;long&nbsp;time.&nbsp;Retrieving&nbsp;a&nbsp;single,&nbsp;keyed&nbsp;object&nbsp;should&nbsp;be&nbsp;so&nbsp;quick&nbsp;with&lt;BR&gt;bsdbd&nbsp;that&nbsp;it's&nbsp;probably&nbsp;not&nbsp;with&nbsp;the&nbsp;effort/expense&nbsp;of&nbsp;a&nbsp;thread.&nbsp;On&nbsp;the&lt;BR&gt;other&nbsp;hand,&nbsp;iterating&nbsp;an&nbsp;entire&nbsp;bdb&nbsp;will&nbsp;(possibly)&nbsp;take&nbsp;quite&nbsp;some&lt;BR&gt;time,&nbsp;so&nbsp;a&nbsp;thread&nbsp;may&nbsp;be&nbsp;a&nbsp;good&nbsp;idea.&nbsp;(Note&nbsp;that&nbsp;Python's&nbsp;bsdbd&nbsp;is&nbsp;not&lt;BR&gt;threadsafe&nbsp;so&nbsp;you<br>
&nbsp;will&nbsp;have&nbsp;to&nbsp;manage&nbsp;that&nbsp;yourself.)&lt;BR&gt;&lt;BR&gt;I&nbsp;don't&nbsp;know&nbsp;enough&nbsp;about&nbsp;the&nbsp;bsddb&nbsp;api&nbsp;but&nbsp;I&nbsp;suspect&nbsp;it's&nbsp;possible&nbsp;to&lt;BR&gt;avoid&nbsp;threads&nbsp;altogether&nbsp;by&nbsp;iterating&nbsp;an&nbsp;entire&nbsp;bdb&nbsp;in&nbsp;small&nbsp;chunks&nbsp;and&lt;BR&gt;relinquishing&nbsp;control&nbsp;to&nbsp;the&nbsp;event&nbsp;loop&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;each&nbsp;chunk&nbsp;to&lt;BR&gt;allow&nbsp;other&nbsp;events&nbsp;to&nbsp;run.&lt;BR&gt;&lt;BR&gt;&amp;gt;&nbsp;(I&nbsp;did&nbsp;a&nbsp;web&nbsp;search,&nbsp;but&nbsp;couldn't&nbsp;relate&nbsp;what&nbsp;I&nbsp;found&nbsp;to&nbsp;any&nbsp;code&nbsp;in&lt;BR&gt;&amp;gt;&nbsp;the&nbsp;1.2&nbsp;release&nbsp;I&nbsp;just&nbsp;downloaded.&nbsp;I&nbsp;also&nbsp;read&nbsp;the&nbsp;May&nbsp;list&nbsp;archive.)&lt;BR&gt;&lt;BR&gt;You&nbsp;may&nbsp;find&nbsp;Atop&nbsp;(http://www.divmod.org/Home/Projects/Atop/index.html)&lt;BR&gt;interesting.&lt;BR&gt;&lt;BR&gt;Hope&nbsp;this&nbsp;helps.&lt;BR&gt;&lt;BR&gt;Cheers,&nbsp;Matt&lt;BR&gt;&lt;BR&gt;--&nbsp;&lt;BR&gt;__&lt;BR&gt;/&nbsp;\__&nbsp;Matt&nbsp;Goodall,&nbsp;Pollenation&nbsp;Internet&nbsp;Ltd&lt;BR&gt;\__/&nbsp;\&nbsp;w:&nbsp;http://www.pollenation.net&lt;BR&gt;__/&nbsp;\__/&nbsp;e:&nbsp;matt@pollenation.net&lt;BR&gt;/&nbsp;\__/&nbsp;\&nbsp;t:&nbsp;+44&nbsp;(0)113&nbsp;2252500&lt;BR&gt;\__/&nbsp;\__/&lt;BR&gt;/&nbsp;\&nbsp;Any&nbsp;views&nbsp;expressed&nbsp;are&nbsp;my&nbsp;own&nbsp;and&nbsp;do&nbsp;not&nbsp;necessarily&lt;BR&gt;\__/&nbsp;reflect&nbsp;the&nbsp;views&nbsp;of&nbsp;my&nbsp;employer.&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;_______________________________________________&lt;BR&gt;Twisted-Python&nbsp;mailing<br>
&nbsp;list&lt;BR&gt;Twisted-Python@twistedmatrix.com&lt;BR&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/BLOCKQUOTE&gt;&lt;BR&gt;&lt;BR&gt;Bill&nbsp;la&nbsp;Forge&lt;br&gt;http://www.geocities.com/laforge49/&lt;p&gt;&lt;font&nbsp;face=arial&nbsp;size=-1&gt;<br>
&lt;a&nbsp;href=&quot;http://in.rd.yahoo.com/specials/mailtg/*http://yahoo.shaadi.com/india-matrimony/&quot;&nbsp;target=&quot;_blank&quot;&gt;<br>
&lt;b&gt;Yahoo!&nbsp;India&nbsp;Matrimony&lt;/a&gt;:&lt;/b&gt;&nbsp;Find&nbsp;your&nbsp;partner&nbsp;<br>
&lt;a&nbsp;href=&quot;http://in.rd.yahoo.com/specials/mailtg2/*http://yahoo.shaadi.com/india-matrimony/community.php&quot;&nbsp;target=&quot;_blank&quot;&gt;online&lt;/a&gt;.&lt;/font&gt;
</tt>
