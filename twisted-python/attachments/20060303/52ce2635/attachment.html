<tt>
Okay,&nbsp;I've&nbsp;made&nbsp;some&nbsp;huge&nbsp;progress,&nbsp;I&nbsp;think&nbsp;with&nbsp;my&nbsp;Telnet&nbsp;connection&nbsp;stuff.&nbsp;I'm&nbsp;curious&nbsp;what&nbsp;the&nbsp;Twisted&nbsp;pros&nbsp;think&nbsp;of&nbsp;this..syntax,&nbsp;if&nbsp;it&nbsp;is&nbsp;correct,&nbsp;etc.&nbsp;Here&nbsp;is&nbsp;what&nbsp;I'm&nbsp;going&nbsp;for,&nbsp;I&nbsp;want&nbsp;to&nbsp;have&nbsp;this&nbsp;application&nbsp;running,&nbsp;which&nbsp;provides&nbsp;an&nbsp;XML-RPC&nbsp;interface&nbsp;for&nbsp;'controlling'&nbsp;it.&nbsp;The&nbsp;server,&nbsp;right&nbsp;now,&nbsp;can&nbsp;start&nbsp;Telnet&nbsp;clients&nbsp;at&nbsp;the&nbsp;request&nbsp;of&nbsp;XML-RPC&nbsp;clients.&nbsp;This&nbsp;seems&nbsp;to&nbsp;work,&nbsp;however,&nbsp;I'd&nbsp;also&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;stop&nbsp;said&nbsp;Telnet&nbsp;clients,&nbsp;or&nbsp;see&nbsp;which&nbsp;ones&nbsp;are&nbsp;running,&nbsp;etc.&nbsp;I&nbsp;can't&nbsp;wrap&nbsp;my&nbsp;brain&nbsp;around&nbsp;how&nbsp;to&nbsp;accomplish&nbsp;those&nbsp;bits&nbsp;of&nbsp;functionality.&nbsp;I've&nbsp;included&nbsp;the&nbsp;.tac&nbsp;file&nbsp;below&nbsp;for&nbsp;reference.<br>
&lt;br&gt;&lt;br&gt;Thanks&nbsp;so&nbsp;much&nbsp;for&nbsp;your&nbsp;assistance!&lt;br&gt;&lt;br&gt;-Don&lt;br&gt;&lt;br&gt;&lt;br&gt;#Try&nbsp;to&nbsp;build&nbsp;a&nbsp;Twisted&nbsp;Connector&nbsp;Service&nbsp;the&nbsp;twisted&nbsp;way&lt;br&gt;from&nbsp;twisted.application&nbsp;import&nbsp;internet,&nbsp;service&lt;br&gt;from&nbsp;twisted.web&nbsp;import&nbsp;resource,&nbsp;server,&nbsp;static,&nbsp;xmlrpc<br>
&lt;br&gt;import&nbsp;re,&nbsp;time&lt;br&gt;&lt;br&gt;&lt;br&gt;from&nbsp;EventTypes&nbsp;import&nbsp;Event&lt;br&gt;connectiontypes&nbsp;=&nbsp;{'TelnetConnection':'A&nbsp;telnet&nbsp;client&nbsp;connection.',&nbsp;'FileTailConnection':'Facilitates&nbsp;tailing&nbsp;a&nbsp;log&nbsp;file'}&lt;br&gt;&lt;br&gt;&lt;br&gt;class&nbsp;Connection:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,name):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Constructor&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.name=name&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#print&nbsp;&quot;Connection&nbsp;name:&nbsp;%s&quot;&nbsp;%&nbsp;&lt;a&nbsp;href=&quot;http://self.name&quot;&gt;self.name&lt;/a&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.status=False&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;setStatus&nbsp;(self,status):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.status=status<br>
&lt;br&gt;&lt;br&gt;####################&lt;br&gt;#&nbsp;TCP&nbsp;Client&nbsp;Stuff&lt;br&gt;####################&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;Protocol,&nbsp;ReconnectingClientFactory&lt;br&gt;from&nbsp;twisted.conch.telnet&nbsp;import&nbsp;Telnet&lt;br&gt;&lt;br&gt;&lt;br&gt;##########################<br>
&lt;br&gt;#&nbsp;Telnet&nbsp;Clients&lt;br&gt;##########################&lt;br&gt;class&nbsp;TelnetClient(Telnet):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;TelnetClient&nbsp;class.&quot;&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print&nbsp;&quot;connection&nbsp;made&nbsp;to&nbsp;%s&quot;&nbsp;%&nbsp;&lt;a&nbsp;href=&quot;http://self.factory.name&quot;&gt;<br>
self.factory.name&lt;/a&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#if&nbsp;the&nbsp;cmd&nbsp;variable&nbsp;was&nbsp;set&nbsp;in&nbsp;the&nbsp;calling&nbsp;factory,&nbsp;lets&nbsp;iterate&nbsp;over&nbsp;it.&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.factory.cmd:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;cmd&nbsp;in&nbsp;self.factory.cmd:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;sleep&quot;&nbsp;in&nbsp;cmd:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print&nbsp;<br>
re.compile('(?P&lt;sleeptime&gt;(\d+))').search(cmd).group('sleeptime')&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleeptime&nbsp;=&nbsp;int(re.compile('(?P&lt;sleeptime&gt;(\d+))').search(cmd).group('sleeptime'))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(sleeptime)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.write(cmd)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;write(self,&nbsp;data):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#print&nbsp;data&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;Telnet._write(self,&nbsp;data+&quot;\r\n&quot;)&lt;br&gt;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;received:&quot;,&nbsp;data<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#always&nbsp;send&nbsp;data&nbsp;to&nbsp;the&nbsp;eventQueue&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.factory.eventQueue.insert(Event(data,&nbsp;&lt;a&nbsp;href=&quot;http://self.factory.name&quot;&gt;self.factory.name&lt;/a&gt;))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#check&nbsp;if&nbsp;we&nbsp;should&nbsp;send&nbsp;any&nbsp;commands&nbsp;based&nbsp;on&nbsp;data&nbsp;received&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self.factory.expect:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#check&nbsp;if&nbsp;any&nbsp;of&nbsp;the&nbsp;expect&nbsp;dictionary&nbsp;keys&nbsp;are&nbsp;in&nbsp;data&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;key&nbsp;in&nbsp;self.factory.expect.keys():&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;key&nbsp;in&nbsp;data:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;cmd&nbsp;in&nbsp;self.factory.expect<br>
[key]:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&quot;sleep&quot;&nbsp;in&nbsp;cmd:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleeptime&nbsp;=&nbsp;int(re.compile('(?P&lt;sleeptime&gt;(\d+))').search(cmd).group('sleeptime'))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(sleeptime)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.write(cmd)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;class&nbsp;TelnetConnection(Connection,&nbsp;ReconnectingClientFactory):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Telnets&nbsp;to&nbsp;host:port&nbsp;and&nbsp;executes&nbsp;cmd.&nbsp;cmd&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;protocol&nbsp;=&nbsp;TelnetClient&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;&nbsp;__init__(self,&nbsp;name,&nbsp;eventQueue,&nbsp;cmd=None,&nbsp;expect=None):&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection.__init__(self,&nbsp;name)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.cmd&nbsp;=&nbsp;cmd&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.expect&nbsp;=&nbsp;expect&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.eventQueue&nbsp;=&nbsp;eventQueue<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clientConnectionFailed(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;'connection&nbsp;failed:',&nbsp;reason.getErrorMessage()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;clientConnectionLost(self,&nbsp;connector,&nbsp;reason):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;'connection&nbsp;lost:',&nbsp;reason.getErrorMessage()&lt;br&gt;&lt;br&gt;&lt;br&gt;class&nbsp;ManagerService(service.Service):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pass&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;some&nbsp;XML-RPC&nbsp;function&nbsp;calls&nbsp;for&nbsp;twisted&nbsp;server&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;stop(self):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Shutdown&nbsp;initiated'&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getConnectionTypes(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Return&nbsp;connection&nbsp;types&quot;&quot;&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;connectiontypes&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;xmlrpc_getActiveConnections(self):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Return&nbsp;all&nbsp;active&nbsp;connections&quot;&quot;&quot;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getConnectionStatus(self,&nbsp;connection):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;connection&nbsp;status&quot;&lt;br&gt;&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getResource(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Return&nbsp;sum&nbsp;of&nbsp;arguments.&quot;&quot;&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;r&nbsp;=&nbsp;resource.Resource()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;xmlrpc.XMLRPC()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;x.xmlrpc_stop&nbsp;=&nbsp;self.stop&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;x.xmlrpc_getConnectionStatus&nbsp;=&nbsp;self.getConnectionStatus<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;x.xmlrpc_startTelnet&nbsp;=&nbsp;self.startTelnet&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.putChild('RPC2',&nbsp;x)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;r&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;startTelnet(self,&nbsp;host,&nbsp;port,&nbsp;name,&nbsp;queue,&nbsp;command,&nbsp;script):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;EventQueue&nbsp;import&nbsp;Queue&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Create&nbsp;the&nbsp;Event&nbsp;Queue&nbsp;object&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.queue&nbsp;=&nbsp;queue&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.queue&nbsp;=&nbsp;Queue()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reactor.connectTCP(host,&nbsp;int(port),&nbsp;TelnetConnection(name,self.queue<br>
,command,script))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;%s&nbsp;started&quot;&nbsp;%&nbsp;name&lt;br&gt;&lt;br&gt;&lt;br&gt;#create&nbsp;an&nbsp;application&nbsp;instance&lt;br&gt;application&nbsp;=&nbsp;service.Application('connectorservice',&nbsp;uid=1,&nbsp;gid=1)&lt;br&gt;m&nbsp;=&nbsp;ManagerService()&lt;br&gt;serviceCollection&nbsp;=&nbsp;<br>
service.IServiceCollection(application)&lt;br&gt;internet.TCPServer(7090,&nbsp;server.Site(m.getResource())&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).setServiceParent(serviceCollection)&lt;br&gt;<br>

</tt>
