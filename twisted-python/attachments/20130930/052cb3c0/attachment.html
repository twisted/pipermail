<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Glyph,&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;your&nbsp;response!&lt;br&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Sep&nbsp;30,&nbsp;2013&nbsp;at&nbsp;8:41&nbsp;PM,&nbsp;Glyph&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Sep&nbsp;30,&nbsp;2013,&nbsp;at&nbsp;2:45&nbsp;AM,&nbsp;Laurens&nbsp;Van&nbsp;Houtven&nbsp;&lt;_@&lt;a&nbsp;href=&quot;http://lvh.io&quot;&nbsp;target=&quot;_blank&quot;&gt;lvh.io&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;<br>
<br>
&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Menlo-Regular;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;display:inline!important&quot;&gt;What&nbsp;am&nbsp;I&nbsp;doing&nbsp;wrong?&nbsp;Is&nbsp;this&nbsp;a&nbsp;bug?&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:Menlo-Regular;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;text-align:start;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px&quot;&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;it&#39;s&nbsp;pretty&nbsp;clearly&nbsp;a&nbsp;bug.&nbsp; Calling&nbsp;the&nbsp;argument&nbsp;&quot;proto&quot;&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;indicates&nbsp;the&nbsp;nature&nbsp;of&nbsp;the&nbsp;confusion.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;parts&nbsp;of&nbsp;the&nbsp;flow&nbsp;here&nbsp;from&nbsp;bytes&nbsp;to&nbsp;method&nbsp;execution&nbsp;and&nbsp;back&nbsp;(like&nbsp;_wrapWithSerialization)&nbsp;which&nbsp;are&nbsp;nice&nbsp;for&nbsp;composition,&nbsp;but&nbsp;the&nbsp;fact&nbsp;that&nbsp;they&#39;re&nbsp;private&nbsp;sort&nbsp;of&nbsp;ruins&nbsp;their&nbsp;utility&nbsp;for&nbsp;extensibility.&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Looking&nbsp;at&nbsp;the&nbsp;code&nbsp;you&#39;re&nbsp;trying&nbsp;to&nbsp;write&nbsp;in&nbsp;txampext&nbsp;though,&nbsp;the&nbsp;problem&nbsp;appears&nbsp;to&nbsp;be&nbsp;simply&nbsp;that&nbsp;you&#39;re&nbsp;writing&nbsp;functionality&nbsp;close&nbsp;enough&nbsp;to&nbsp;AMP&#39;s&nbsp;core&nbsp;that&nbsp;you&nbsp;should&nbsp;be&nbsp;making&nbsp;the&nbsp;changes&nbsp;to&nbsp;AMP&nbsp;directly,&nbsp;and&nbsp;fixing&nbsp;the&nbsp;issue&nbsp;by&nbsp;making&nbsp;changes&nbsp;to&nbsp;AMP&nbsp;itself&nbsp;rather&nbsp;than&nbsp;trying&nbsp;to&nbsp;work&nbsp;around&nbsp;it&nbsp;externally.&nbsp; The&nbsp;way&nbsp;I&nbsp;was&nbsp;going&nbsp;to&nbsp;recommend&nbsp;fixing&nbsp;it&nbsp;before&nbsp;I&nbsp;clicked&nbsp;on&nbsp;your&nbsp;link&nbsp;was&nbsp;by&nbsp;writing&nbsp;something&nbsp;like&nbsp;ExposingArgument&nbsp;and&nbsp;accessing&nbsp;the&nbsp;locator/receiver/sender&nbsp;via&nbsp;that&nbsp;new&nbsp;API&nbsp;rather&nbsp;than&nbsp;via&nbsp;the&nbsp;&#39;proto&#39;&nbsp;argument&nbsp;at&nbsp;all&nbsp;:)&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;a&nbsp;little&nbsp;confused&nbsp;why&nbsp;that&nbsp;would&nbsp;help;&nbsp;you&#39;re&nbsp;saying&nbsp;there&nbsp;should&nbsp;be&nbsp;a&nbsp;new&nbsp;API&nbsp;that&nbsp;gives&nbsp;arguments&nbsp;access&nbsp;to&nbsp;the&nbsp;locator,&nbsp;receiver,&nbsp;sender?&nbsp;What&nbsp;would&nbsp;that&nbsp;look&nbsp;like?&nbsp;Something&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;fromBox/toBox,&nbsp;or&nbsp;are&nbsp;you&nbsp;thinking&nbsp;of&nbsp;a&nbsp;more&nbsp;direct&nbsp;approach&nbsp;where&nbsp;the&nbsp;locator&nbsp;has&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;other&nbsp;components?&nbsp;(Given&nbsp;your&nbsp;suggestion&nbsp;of&nbsp;not&nbsp;going&nbsp;through&nbsp;the&nbsp;proto&nbsp;argument,&nbsp;I&nbsp;imagine&nbsp;something&nbsp;closer&nbsp;to&nbsp;the&nbsp;latter.)&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;contributions&nbsp;to&nbsp;AMP&nbsp;have&nbsp;been&nbsp;more&nbsp;of&nbsp;the&nbsp;defect-findy&nbsp;kind,&nbsp;but&nbsp;I&nbsp;could&nbsp;certainly&nbsp;turn&nbsp;them&nbsp;more&nbsp;into&nbsp;the&nbsp;code-contributy&nbsp;kind.&nbsp;I&nbsp;imagine&nbsp;I&#39;m&nbsp;not&nbsp;the&nbsp;first&nbsp;person&nbsp;to&nbsp;want&nbsp;tests&nbsp;for&nbsp;command&nbsp;classes&nbsp;(&lt;a&nbsp;href=&quot;https://github.com/lvh/txampext/blob/master/txampext/commandtests.py&quot;&gt;https://github.com/lvh/txampext/blob/master/txampext/commandtests.py&lt;/a&gt;)&nbsp;or&nbsp;a&nbsp;nested&nbsp;AMP&nbsp;box&nbsp;(&lt;a&nbsp;href=&quot;https://github.com/lvh/txampext/blob/master/txampext/nested.py&quot;&gt;https://github.com/lvh/txampext/blob/master/txampext/nested.py&lt;/a&gt;).&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;look&nbsp;forward&nbsp;to&nbsp;being&nbsp;in&nbsp;the&nbsp;same&nbsp;locality&nbsp;as&nbsp;you,&nbsp;I&nbsp;presume&nbsp;it&nbsp;will&nbsp;make&nbsp;me&nbsp;more&nbsp;productive&nbsp;;)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cheers&lt;br&gt;lvh&nbsp;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
