<tt>
&lt;p&gt;For&nbsp;logging&nbsp;could&nbsp;we&nbsp;look&nbsp;at&nbsp;implementing&nbsp;posix&nbsp;aio&nbsp;on&nbsp;platforms&nbsp;that&nbsp;support&nbsp;it? &nbsp;I&nbsp;would&nbsp;be&nbsp;willing&nbsp;to&nbsp;help&nbsp;code&nbsp;that.&lt;/p&gt;<br>
&lt;p&gt;Justin&lt;/p&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Jul&nbsp;12,&nbsp;2012&nbsp;8:51&nbsp;AM,&nbsp;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&nbsp;type=&quot;attribution&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
On&nbsp;11:32&nbsp;am,&nbsp;&lt;a&nbsp;href=&quot;mailto:itamar@itamarst.org&quot;&gt;itamar@itamarst.org&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;On&nbsp;07/12/2012&nbsp;05:17&nbsp;AM,&nbsp;Tristan&nbsp;Seligmann&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;3)&nbsp;log&nbsp;observers&nbsp;should&nbsp;expect&nbsp;to&nbsp;be&nbsp;inovked&nbsp;in&nbsp;non-reactor&nbsp;threads,&lt;br&gt;<br>
&gt;&gt;making&nbsp;this&nbsp;a&nbsp;Mantissa&nbsp;bug.&lt;br&gt;<br>
&gt;In&nbsp;theory&nbsp;this&nbsp;is&nbsp;the&nbsp;case&nbsp;-&nbsp;the&nbsp;logging&nbsp;howto&nbsp;says&nbsp;&quot;The&nbsp;observer&nbsp;needs&lt;br&gt;<br>
&gt;to&nbsp;be&nbsp;thread&nbsp;safe&nbsp;if&nbsp;you&nbsp;anticipate&nbsp;using&nbsp;threads&nbsp;in&nbsp;your&nbsp;program.&quot;&nbsp;The&lt;br&gt;<br>
&gt;API&nbsp;docs&nbsp;don&#39;t&nbsp;mention&nbsp;threads,&nbsp;though..&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;In&nbsp;practice&nbsp;however,&nbsp;probably&nbsp;every&nbsp;custom&nbsp;observer&nbsp;gets&nbsp;this&nbsp;wrong,&nbsp;so&lt;br&gt;<br>
&gt;we&nbsp;really&nbsp;need&nbsp;some&nbsp;infrastructure&nbsp;to&nbsp;make&nbsp;this&nbsp;easier&nbsp;or&nbsp;to&nbsp;fix&nbsp;it.&lt;br&gt;<br>
&gt;Possibly&nbsp;we&nbsp;should&nbsp;have&nbsp;some&nbsp;way&nbsp;to&nbsp;indicate&nbsp;an&nbsp;observer&nbsp;is&nbsp;thread-&lt;br&gt;<br>
&gt;safe,&lt;br&gt;<br>
&gt;assume&nbsp;by&nbsp;default&nbsp;they&nbsp;are&nbsp;not,&nbsp;and&nbsp;if&nbsp;they&nbsp;are&nbsp;not&nbsp;wrap&nbsp;them&nbsp;in&nbsp;a&lt;br&gt;<br>
&gt;reactor.callFromThread&nbsp;wrapper.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;logging&nbsp;system&nbsp;is&nbsp;already&nbsp;a&nbsp;bottleneck&nbsp;in&nbsp;some&nbsp;applications.&nbsp; Doing&lt;br&gt;<br>
even&nbsp;more&nbsp;work&nbsp;to&nbsp;try&nbsp;to&nbsp;make&nbsp;it&nbsp;properly&nbsp;thread-safe&nbsp;will&nbsp;probably&nbsp;slow&lt;br&gt;<br>
it&nbsp;down&nbsp;even&nbsp;more.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;it&nbsp;was&nbsp;a&nbsp;mistake&nbsp;to&nbsp;try&nbsp;to&nbsp;make&nbsp;it&nbsp;possible&nbsp;to&nbsp;use&lt;br&gt;<br>
twisted.python.log&nbsp;free-threaded.&nbsp; I&nbsp;think&nbsp;we&nbsp;should&nbsp;think&nbsp;about&nbsp;getting&lt;br&gt;<br>
rid&nbsp;of&nbsp;this&nbsp;claimed&nbsp;feature.&nbsp; Perhaps&nbsp;it&nbsp;could&nbsp;be&nbsp;replaced&nbsp;with&nbsp;a&nbsp;more&lt;br&gt;<br>
explicit,&nbsp;probably&nbsp;more&nbsp;restricted,&nbsp;logging&nbsp;feature&nbsp;for&nbsp;non-reactor&lt;br&gt;<br>
threads.&lt;br&gt;<br>
&lt;br&gt;<br>
Unless&nbsp;someone&nbsp;can&nbsp;magically&nbsp;fix&nbsp;the&nbsp;threading&nbsp;issues&nbsp;without&nbsp;hurting&lt;br&gt;<br>
performance.&nbsp; Then,&nbsp;great,&nbsp;go&nbsp;for&nbsp;it.&lt;br&gt;<br>
&gt;I&nbsp;would&nbsp;also&nbsp;like&nbsp;some&nbsp;infrastructure&nbsp;to&nbsp;make&nbsp;the&nbsp;file&nbsp;log&nbsp;observer&nbsp;run&lt;br&gt;<br>
&gt;in&nbsp;its&nbsp;own&nbsp;thread,&nbsp;but&nbsp;that&#39;s&nbsp;almost&nbsp;the&nbsp;opposite&nbsp;use&nbsp;case&nbsp;:)&lt;br&gt;<br>
&lt;br&gt;<br>
Sure,&nbsp;but&nbsp;that&#39;s&nbsp;probably&nbsp;based&nbsp;on&nbsp;top&nbsp;of&nbsp;an&nbsp;asynchronous&nbsp;file&nbsp;I/O&nbsp;API&lt;br&gt;<br>
that&#39;s&nbsp;not&nbsp;explicitly&nbsp;thread-based&nbsp;(but&nbsp;probably&nbsp;is&nbsp;thread-based&nbsp;in&lt;br&gt;<br>
practice,&nbsp;because&nbsp;what&nbsp;other&nbsp;kind&nbsp;of&nbsp;asynchronous&nbsp;file&nbsp;I/O&nbsp;even&nbsp;exists).&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;to&nbsp;explicitly&nbsp;answer&nbsp;Tristan&#39;s&nbsp;question:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;It&#39;s&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;Mantissa&nbsp;log&nbsp;observer.&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
