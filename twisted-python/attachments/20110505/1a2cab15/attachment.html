<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;May&nbsp;5,&nbsp;2011,&nbsp;at&nbsp;10:52&nbsp;AM,&nbsp;Reza&nbsp;Lotun&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;2011/5/5&nbsp;Juan&nbsp;Antonio&nbsp;Ibañez&nbsp;Santorum&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:juanito1982@gmail.com&quot;&gt;juanito1982@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;<br>
I&nbsp;had&nbsp;got&nbsp;the&nbsp;same&nbsp;problem&nbsp;using&nbsp;'-r&nbsp;epoll'&nbsp;options&nbsp;when&nbsp;starting&nbsp;the&nbsp;app&nbsp;via&nbsp;twistd...&nbsp;When&nbsp;1024&nbsp;descriptors&nbsp;are&nbsp;opened,&nbsp;I&nbsp;can&nbsp;see&nbsp;100%&nbsp;CPU.&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;ideas?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;1.&nbsp;Edit&nbsp;/etc/sysctl.conf&nbsp;and&nbsp;place&nbsp;the&nbsp;following&nbsp;line&nbsp;there:&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fs.file-max&nbsp;=&nbsp;999999&lt;/div&gt;&lt;div&gt;2.&nbsp;Type&nbsp;$&nbsp;sudo&nbsp;sysctl&nbsp;-p&lt;/div&gt;&lt;div&gt;3.&nbsp;Place&nbsp;the&nbsp;following&nbsp;two&nbsp;lines:&lt;/div&gt;&lt;div&gt;&lt;div&gt;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;soft&nbsp;&nbsp;&nbsp;&nbsp;nofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;999999&lt;/div&gt;<br>
&lt;div&gt;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hard&nbsp;&nbsp;&nbsp;&nbsp;nofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;999999&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Either&nbsp;reboot,&nbsp;or&nbsp;also&nbsp;type&nbsp;in&nbsp;`ulimit&nbsp;-n&nbsp;999999`&lt;/div&gt;&lt;div&gt;4.&nbsp;Check&nbsp;that&nbsp;$&nbsp;ulimit&nbsp;-a&nbsp;shows&nbsp;your&nbsp;open&nbsp;fixes&nbsp;set&nbsp;to&nbsp;999999&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There's&nbsp;nothing&nbsp;special&nbsp;about&nbsp;999999&nbsp;-&nbsp;it's&nbsp;just&nbsp;some&nbsp;big&nbsp;number&nbsp;conveniently&nbsp;bigger&nbsp;than&nbsp;1024.&nbsp;Enjoy.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Reza&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Would&nbsp;you&nbsp;mind&nbsp;opening&nbsp;a&nbsp;doc&nbsp;bug&nbsp;for&nbsp;explaining&nbsp;how&nbsp;to&nbsp;do&nbsp;this&nbsp;on&nbsp;multiple&nbsp;platforms,&nbsp;and&nbsp;maybe&nbsp;writing&nbsp;a&nbsp;lore&nbsp;doc&nbsp;about&nbsp;it?&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;really&nbsp;important&nbsp;tuning&nbsp;thing&nbsp;for&nbsp;anyone&nbsp;wanting&nbsp;to&nbsp;run&nbsp;even&nbsp;a&nbsp;medium-scale&nbsp;Twisted&nbsp;service.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(Also,&nbsp;once&nbsp;again,&nbsp;the&nbsp;bug&nbsp;is&nbsp;&lt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/ticket/816&quot;&gt;http://twistedmatrix.com/trac/ticket/816&lt;/a&gt;&gt;,&nbsp;somebody&nbsp;please&nbsp;fix&nbsp;it&nbsp;:).)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
