<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Feb&nbsp;28,&nbsp;2017,&nbsp;at&nbsp;8:11&nbsp;AM,&nbsp;Роман&nbsp;Мещеряков&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:romanmescheryakov@yandex.ru&quot;&nbsp;class=&quot;&quot;&gt;romanmescheryakov@yandex.ru&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Hello&nbsp;everyone,&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;today&nbsp;I&nbsp;tried&nbsp;restarting&nbsp;twisted&nbsp;service&nbsp;using&nbsp;sys.execv,&nbsp;and&nbsp;it&nbsp;fails&nbsp;with&nbsp;the&nbsp;following&nbsp;message:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;2017-02-28T18:39:47+0300&nbsp;[ready_to_setup#debug]&nbsp;Before&nbsp;os.execv:&nbsp;sys.executable&nbsp;is&nbsp;/usr/bin/python&nbsp;and&nbsp;sys.argv&nbsp;are&nbsp;['/usr/local/bin/twistd',&nbsp;'-ny',&nbsp;'master_player.tac']&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;Another&nbsp;twistd&nbsp;server&nbsp;is&nbsp;running,&nbsp;PID&nbsp;1939&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;This&nbsp;could&nbsp;either&nbsp;be&nbsp;a&nbsp;previously&nbsp;started&nbsp;instance&nbsp;of&nbsp;your&nbsp;application&nbsp;or&nbsp;a&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;different&nbsp;application&nbsp;entirely.&nbsp;To&nbsp;start&nbsp;a&nbsp;new&nbsp;one,&nbsp;either&nbsp;run&nbsp;it&nbsp;in&nbsp;some&nbsp;other&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;directory,&nbsp;or&nbsp;use&nbsp;the&nbsp;--pidfile&nbsp;and&nbsp;--logfile&nbsp;parameters&nbsp;to&nbsp;avoid&nbsp;clashes.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;My&nbsp;service&nbsp;is&nbsp;started&nbsp;in&nbsp;the&nbsp;following&nbsp;way:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;PYTHONPATH=.&nbsp;twistd&nbsp;-ny&nbsp;master_player.tac&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;(i.e.&nbsp;without&nbsp;daemonization)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Code&nbsp;to&nbsp;restart&nbsp;is:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;d&nbsp;=&nbsp;task.deferLater(self._reactor,&nbsp;seconds,&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shared_code.restart_script,&nbsp;self._log,&nbsp;self._reactor)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;#&nbsp;_restart_script_done&nbsp;should&nbsp;never&nbsp;be&nbsp;called&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;d.addCallback(self._restart_script_done).addErrback(self._restart_script_failure)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;where&nbsp;shared_code.restart_script&nbsp;is:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;def&nbsp;restart_script(logger,&nbsp;reactor):&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://logger.info&quot;&nbsp;class=&quot;&quot;&gt;logger.info&lt;/a&gt;(&quot;Restarting&nbsp;script...&quot;)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reactor.stop()&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.flush()&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#TODO:&nbsp;force&nbsp;logging&nbsp;system&nbsp;to&nbsp;flush&nbsp;all&nbsp;log&nbsp;files&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.debug(&quot;Before&nbsp;os.execv:&nbsp;sys.executable&nbsp;is&nbsp;{sysexec}&nbsp;and&nbsp;sys.argv&nbsp;are&nbsp;{argv}&quot;,&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sysexec&nbsp;=&nbsp;sys.executable,&nbsp;argv&nbsp;=&nbsp;sys.argv)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;os.execv(sys.executable,&nbsp;[sys.executable]&nbsp;+&nbsp;sys.argv)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Could&nbsp;someone&nbsp;explain&nbsp;to&nbsp;me&nbsp;why&nbsp;does&nbsp;the&nbsp;&quot;Another&nbsp;twistd&nbsp;server&nbsp;is&nbsp;running&quot;&nbsp;error&nbsp;occur&nbsp;and&nbsp;how&nbsp;can&nbsp;I&nbsp;avoid&nbsp;it?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;twistd&nbsp;writes&nbsp;a&nbsp;.pid&nbsp;file&nbsp;and&nbsp;then&nbsp;attempts&nbsp;to&nbsp;check&nbsp;whether&nbsp;another&nbsp;process&nbsp;on&nbsp;the&nbsp;system&nbsp;has&nbsp;the&nbsp;same&nbsp;PID&nbsp;contained&nbsp;in&nbsp;that&nbsp;file&nbsp;while&nbsp;starting&nbsp;up,&nbsp;to&nbsp;avoid&nbsp;conflicts.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Yours&nbsp;is&nbsp;an&nbsp;odd&nbsp;case,&nbsp;because&nbsp;the&nbsp;process&nbsp;with&nbsp;that&nbsp;process-ID&nbsp;is&nbsp;the&nbsp;_current_&nbsp;process,&nbsp;and&nbsp;perhaps&nbsp;the&nbsp;check&nbsp;ought&nbsp;to&nbsp;even&nbsp;be&nbsp;modified&nbsp;to&nbsp;account&nbsp;for&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Two&nbsp;other&nbsp;options&nbsp;you&nbsp;have&nbsp;are:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&nbsp;class=&quot;MailOutline&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;switch&nbsp;to&nbsp;`twist`,&nbsp;which&nbsp;doesn't&nbsp;write&nbsp;a&nbsp;pidfile&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;use&nbsp;the&nbsp;option&nbsp;&quot;--pidfile&nbsp;''&quot;&nbsp;to&nbsp;disable&nbsp;writing&nbsp;a&nbsp;pidfile.&lt;/li&gt;&lt;/ol&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;strongly&nbsp;suggest&nbsp;the&nbsp;first&nbsp;option&nbsp;:).&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;-glyph&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
