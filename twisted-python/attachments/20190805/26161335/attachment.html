<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;False&nbsp;alarm.&nbsp;Seems&nbsp;like&nbsp;there&nbsp;are&nbsp;some&nbsp;sneaky&nbsp;conditions&nbsp;when&nbsp;I&nbsp;get&nbsp;the&nbsp;error&nbsp;message.&lt;div&gt;Like&nbsp;before,&nbsp;I&nbsp;use&nbsp;to&nbsp;get&nbsp;notifyFinish&nbsp;error&nbsp;everytime.&nbsp;Now,&nbsp;it&nbsp;seems&nbsp;that&nbsp;6/10&nbsp;times &nbsp;things&nbsp;are&nbsp;&quot;clean&quot;&nbsp;but&nbsp;then&nbsp;4/10&nbsp;times&nbsp;there&nbsp;are&nbsp;notifyFinish&nbsp;errors.&lt;/div&gt;&lt;div&gt;Wondering&nbsp;on&nbsp;your&nbsp;suggestion.&nbsp;How&nbsp;do&nbsp;I&nbsp;ensure&nbsp;whether&nbsp;the&nbsp;notifyFinish&nbsp;error&nbsp;deferred&nbsp;has&nbsp;been&nbsp;fired&nbsp;or&nbsp;not.&lt;/div&gt;&lt;div&gt;Could&nbsp;I&nbsp;have&nbsp;like&nbsp;a&nbsp;vanilla&nbsp;&quot;HelloWorld&quot;&nbsp;example?&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;Aug&nbsp;5,&nbsp;2019&nbsp;at&nbsp;2:24&nbsp;AM&nbsp;Waqar&nbsp;Khan&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:wk80333@gmail.com&quot;&gt;wk80333@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Glyph,&lt;div&gt; &nbsp; &nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;I&nbsp;understand. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;a&nbsp;method/variable&nbsp;in&nbsp;request&nbsp;which&nbsp;keeps&nbsp;a&nbsp;track&nbsp;whether&nbsp;notifyFinish&nbsp;has&nbsp;been&nbsp;fired..&lt;/div&gt;&lt;div&gt;So,&nbsp;I&nbsp;can&nbsp;do&nbsp;something&nbsp;like.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;if&nbsp;not&nbsp;request.hasFiredNotifyFinish:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; request.finish()&lt;/div&gt;&lt;div&gt;??&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;sort&nbsp;of&nbsp;able&nbsp;to&nbsp;get&nbsp;around&nbsp;this&nbsp;issue..&nbsp;though&nbsp;I&nbsp;can&#39;t&nbsp;put&nbsp;a&nbsp;finger&nbsp;on&nbsp;what&nbsp;actually&nbsp;worked. &lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;what&nbsp;I&nbsp;did..&nbsp;First&nbsp;change&nbsp;to&nbsp;19.7rc01&nbsp;version..&nbsp;and&nbsp;just&nbsp;fix&nbsp;the&nbsp;channel&nbsp;issue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Next &nbsp;self.fetch_response(request)..&nbsp;This&nbsp;is&nbsp;an&nbsp;async&nbsp;def..&nbsp;So&nbsp;what&nbsp;I&nbsp;did&nbsp;was..&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;async&nbsp;def&nbsp;fetch_response(request):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;future&nbsp;=&nbsp;{}&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;try:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; future&nbsp;=&nbsp;await&nbsp;some&nbsp;other&nbsp;async&nbsp;def..&nbsp;which&nbsp;returns&nbsp;future&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;except&nbsp;asyncio.CancelledError&nbsp;as&nbsp;e:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(&quot;Error..&quot;,&nbsp;e)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;future&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;basically&nbsp;ended&nbsp;up&nbsp;doing&nbsp;this&nbsp;everywhere&nbsp;where&nbsp;there&nbsp;is&nbsp;async/await.&lt;/div&gt;&lt;div&gt;Next,&nbsp;I&nbsp;added&nbsp;this:&lt;/div&gt;&lt;div&gt;d.addErrback(lambda&nbsp;failure:&nbsp;failure.trap(asyncio.CancelledError)) &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So..&nbsp;now..&nbsp;I&nbsp;don&#39;t&nbsp;see&nbsp;the&nbsp;notifyFinish&nbsp;error&nbsp;anymore.&nbsp;And&nbsp;I&nbsp;am&nbsp;bit&nbsp;terrified&nbsp;not&nbsp;to&nbsp;touch&nbsp;anything..&nbsp;:-D&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But,&nbsp;I&nbsp;want&nbsp;to&nbsp;try&nbsp;out&nbsp;your&nbsp;suggestion&nbsp;as&nbsp;that&nbsp;seems&nbsp;like&nbsp;a&nbsp;more&nbsp;solid&nbsp;way&nbsp;to&nbsp;handle&nbsp;the&nbsp;issue.&nbsp;But&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;I&nbsp;quite&nbsp;understand,&nbsp;how&nbsp;do&nbsp;I&nbsp;figure&nbsp;out&nbsp;whether&nbsp;notifyFinish&nbsp;has&nbsp;been&nbsp;called&nbsp;before&nbsp;calling&nbsp;finish?  &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;Aug&nbsp;5,&nbsp;2019&nbsp;at&nbsp;1:56&nbsp;AM&nbsp;Glyph&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Aug&nbsp;4,&nbsp;2019,&nbsp;at&nbsp;9:04&nbsp;PM,&nbsp;Waqar&nbsp;Khan&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:wk80333@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;wk80333@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;gmail-m_1609281543949452197gmail-m_966327303200188702Apple-interchange-newline&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Ah&nbsp;yes..&nbsp;That&nbsp;is&nbsp;true..&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;comment&nbsp;out&nbsp;request.finish()&nbsp;(Here&nbsp;is&nbsp;the&nbsp;doc&nbsp;which&nbsp;I&nbsp;tried&nbsp;to&nbsp;followed: &lt;a&nbsp;href=&quot;https://twistedmatrix.com/documents/13.0.0/web/howto/web-in-60/interrupted.html&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/documents/13.0.0/web/howto/web-in-60/interrupted.html&lt;/a&gt;) &lt;/div&gt;&lt;div&gt;Then&nbsp;actually..&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;test&nbsp;out&nbsp;the&nbsp;code...&nbsp;(via&nbsp;curl&nbsp;or&nbsp;like&nbsp;doing&nbsp;requests.get&nbsp;..&nbsp;to&nbsp;the&nbsp;URI).. &lt;/div&gt;&lt;div&gt;it&nbsp;is&nbsp;just&nbsp;stuck..&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yep! &nbsp;This&nbsp;makes&nbsp;sense;&nbsp;if&nbsp;you&nbsp;don&#39;t&nbsp;call&nbsp;`.finish()`&nbsp;&lt;i&gt;at&nbsp;all&lt;/i&gt;&lt;span&nbsp;style=&quot;font-style:normal&quot;&gt; then&nbsp;your&nbsp;code&nbsp;will&nbsp;never&nbsp;tell&nbsp;the&nbsp;client&nbsp;that&nbsp;it&#39;s&nbsp;done.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-style:normal&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;if&nbsp;you&nbsp;call&nbsp;`.finish()`&nbsp;&lt;i&gt;after&nbsp;notifyFinish()&nbsp;has&nbsp;fired&lt;/i&gt;&lt;span&nbsp;style=&quot;font-style:normal&quot;&gt; then&nbsp;you&nbsp;get&nbsp;that&nbsp;error.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-style:normal&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-style:normal&quot;&gt;If&nbsp;you&nbsp;change&nbsp;your&nbsp;code&nbsp;to&nbsp;only&nbsp;call&nbsp;`.finish()`&nbsp;if&nbsp;the&nbsp;deferred&nbsp;returned&nbsp;by&nbsp;notifyFinish()&nbsp;has&nbsp;not&nbsp;fired&nbsp;or&nbsp;failed&nbsp;yet,&nbsp;do&nbsp;you&nbsp;get&nbsp;the&nbsp;error? &nbsp;It&#39;s&nbsp;possible&nbsp;that&nbsp;you&nbsp;still&nbsp;do,&nbsp;in&nbsp;which&nbsp;case,&nbsp;there&#39;s&nbsp;a&nbsp;bug&nbsp;in&nbsp;Twisted&nbsp;that&nbsp;needs&nbsp;to&nbsp;be&nbsp;fixed.&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;I&nbsp;do&nbsp;want&nbsp;to&nbsp;convey&nbsp;my&nbsp;thanks&nbsp;for&nbsp;the&nbsp;help.&nbsp;Really&nbsp;appreciate&nbsp;it.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;using&nbsp;Twisted&nbsp;:)&lt;/div&gt;&lt;div&gt;-g&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
