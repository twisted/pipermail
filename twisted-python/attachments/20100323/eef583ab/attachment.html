<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&lt;font&nbsp;face=&quot;Arial&quot;&gt;Hi&nbsp;John,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;that&nbsp;is&nbsp;exactly&nbsp;what&nbsp;might&nbsp;be&nbsp;happening.&nbsp;The&nbsp;GPRS&nbsp;devices&nbsp;are<br>
all&nbsp;configured&nbsp;to&nbsp;drop&nbsp;their&nbsp;connections&nbsp;after&nbsp;communication&nbsp;is&nbsp;done<br>
but&nbsp;I&nbsp;could&nbsp;see&nbsp;the&nbsp;number&nbsp;of&nbsp;connections&nbsp;growing&nbsp;until&nbsp;the&nbsp;server<br>
would&nbsp;finally&nbsp;fall&nbsp;over.&nbsp;I&nbsp;have&nbsp;now&nbsp;built&nbsp;in&nbsp;an&nbsp;in-activity&nbsp;check&nbsp;and<br>
will&nbsp;close&nbsp;the&nbsp;connection&nbsp;if&nbsp;no&nbsp;communication&nbsp;happens&nbsp;for&nbsp;10&nbsp;minutes.<br>
That&nbsp;seems&nbsp;to&nbsp;have&nbsp;done&nbsp;the&nbsp;trick&nbsp;and&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;good&nbsp;to&nbsp;have&nbsp;that<br>
check&nbsp;built&nbsp;in&nbsp;anyway.&lt;br&gt;<br>
&lt;/font&gt;&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
Don&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
John&nbsp;Aherne&nbsp;wrote:<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:faf2d7811003190935q6a4a5638k1347fd45e04863f2@mail.gmail.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;I&nbsp;think&nbsp;you&nbsp;will&nbsp;find&nbsp;that&nbsp;gprs&nbsp;devices&nbsp;will&nbsp;drop&nbsp;off&nbsp;the<br>
network&nbsp;but&nbsp;the&nbsp;router&nbsp;will&nbsp;still&nbsp;keep&nbsp;the&nbsp;coonection&nbsp;open.&nbsp;The&nbsp;gprs<br>
device&nbsp;will&nbsp;then&nbsp;reconnect&nbsp;on&nbsp;a&nbsp;different&nbsp;connection&nbsp;and&nbsp;port.&nbsp;So&nbsp;you<br>
will&nbsp;need&nbsp;to&nbsp;clean&nbsp;up&nbsp;old&nbsp;connections&nbsp;used&nbsp;by&nbsp;that&nbsp;device.<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;Hope&nbsp;that&nbsp;helps&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;John&nbsp;Aherne&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;19,&nbsp;2010&nbsp;at&nbsp;2:53&nbsp;PM,&nbsp;Don<br>
Schoeman&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;mailto:don@delphexonline.com&quot;&gt;don@delphexonline.com&lt;/a&gt;&amp;gt;&lt;/span&gt;<br>
wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;<br>
&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&gt;Hi&nbsp;Andrew,&nbsp;thanks&nbsp;for&nbsp;taking&nbsp;the&nbsp;time&nbsp;to&nbsp;comment<br>
on<br>
my&nbsp;email.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
I'm&nbsp;going&nbsp;to&nbsp;have&nbsp;to&nbsp;study&nbsp;your&nbsp;proposal&nbsp;to&nbsp;switch&nbsp;to&nbsp;poll/epoll&nbsp;anyway<br>
since&nbsp;I&nbsp;am&nbsp;expecting&nbsp;more&nbsp;and&nbsp;more&nbsp;connections&nbsp;to&nbsp;be&nbsp;made&nbsp;over&nbsp;time.<br>
This&nbsp;particular&nbsp;application&nbsp;is&nbsp;used&nbsp;to&nbsp;communicate&nbsp;with&nbsp;a&nbsp;bunch&nbsp;of&nbsp;GPRS<br>
devices&nbsp;and&nbsp;I'm&nbsp;starting&nbsp;to&nbsp;think&nbsp;that&nbsp;these&nbsp;devices&nbsp;might&nbsp;not&nbsp;be<br>
closing&nbsp;a&nbsp;connection&nbsp;properly&nbsp;which&nbsp;could&nbsp;perhaps&nbsp;lead&nbsp;to&nbsp;this<br>
particular&nbsp;problem.&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;discuss&nbsp;it&nbsp;with&nbsp;the&nbsp;manufacturers&nbsp;of<br>
these&nbsp;devices&nbsp;as&nbsp;well.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Thanks&nbsp;again&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
Kind&nbsp;Regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;color=&quot;#888888&quot;&gt;Don&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;/font&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
Andrew&nbsp;Bennetts&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Don&nbsp;Schoeman&nbsp;wrote:<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;&nbsp;&nbsp;&nbsp;Hi&nbsp;guys,&nbsp;I&nbsp;have&nbsp;started&nbsp;having&nbsp;this&nbsp;problem&nbsp;a&nbsp;few&nbsp;weeks&nbsp;ago&nbsp;and&nbsp;it<br>
&nbsp;&nbsp;&nbsp;happens&nbsp;about&nbsp;once&nbsp;a&nbsp;week&nbsp;after&nbsp;which&nbsp;I&nbsp;have&nbsp;to&nbsp;restart&nbsp;my&nbsp;Twisted<br>
&nbsp;&nbsp;&nbsp;based&nbsp;server&nbsp;to&nbsp;function&nbsp;again.&nbsp;It&nbsp;seems&nbsp;to&nbsp;be&nbsp;happening&nbsp;when&nbsp;I<br>
&nbsp;&nbsp;&nbsp;make&nbsp;RPC&nbsp;calls&nbsp;using&nbsp;twisted.web.xmlrpc.Proxy.&nbsp;I&nbsp;have&nbsp;reason&nbsp;to<br>
&nbsp;&nbsp;&nbsp;believe&nbsp;that&nbsp;I&nbsp;am&nbsp;either&nbsp;running&nbsp;out&nbsp;of&nbsp;file&nbsp;handles&nbsp;or&nbsp;connection<br>
&nbsp;&nbsp;&nbsp;limits.&nbsp;I&nbsp;have&nbsp;up-sized&nbsp;my&nbsp;connection&nbsp;limits&nbsp;and&nbsp;ulimit&nbsp;-n&amp;nbsp;&nbsp;gives<br>
&nbsp;&nbsp;&nbsp;me&nbsp;9000.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Note&nbsp;though&nbsp;that&nbsp;select()&nbsp;has&nbsp;a&nbsp;builtin&nbsp;limit,&nbsp;which&nbsp;varies&nbsp;by&nbsp;platform<br>
but&nbsp;is&nbsp;probably&nbsp;1024&nbsp;for&nbsp;you.&nbsp;&nbsp;So&nbsp;perhaps&nbsp;try&nbsp;the&nbsp;poll&nbsp;or&nbsp;epoll&nbsp;reactor<br>
instead.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;&nbsp;&nbsp;&nbsp;I&nbsp;receive&nbsp;less&nbsp;than&nbsp;30&nbsp;connections&nbsp;though&nbsp;so&nbsp;there&nbsp;must&nbsp;be&nbsp;some<br>
&nbsp;&nbsp;&nbsp;kind&nbsp;of&nbsp;leak.&nbsp;The&nbsp;error&nbsp;I'm&nbsp;getting&nbsp;is&nbsp;the&nbsp;following:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;30&nbsp;is&nbsp;much&nbsp;less&nbsp;than&nbsp;1024,&nbsp;though,&nbsp;so&nbsp;a&nbsp;leak&nbsp;does&nbsp;sound&nbsp;probable.<br>
<br>
[...]<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;&nbsp;&nbsp;&nbsp;Now&nbsp;I&nbsp;know&nbsp;this&nbsp;is&nbsp;a&nbsp;very&nbsp;generic&nbsp;error&nbsp;and&nbsp;it&nbsp;could&nbsp;mean&nbsp;a&nbsp;lot&nbsp;of<br>
&nbsp;&nbsp;&nbsp;things,&nbsp;but&nbsp;how&nbsp;would&nbsp;I&nbsp;even&nbsp;start&nbsp;tracking&nbsp;the&nbsp;leak&nbsp;down?&nbsp;Is&nbsp;there<br>
&nbsp;&nbsp;&nbsp;a&nbsp;way&nbsp;I&nbsp;can&nbsp;try&nbsp;and&nbsp;track&nbsp;the&nbsp;number&nbsp;of&nbsp;file&nbsp;descriptors?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;There's&nbsp;always&nbsp;strace,&nbsp;or&nbsp;looking&nbsp;in&nbsp;/proc/PID/fd.<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;&nbsp;&nbsp;&nbsp;I&nbsp;am&nbsp;using&nbsp;Twisted&nbsp;version&nbsp;8.2.0&nbsp;on&nbsp;Ubuntu&nbsp;Server&nbsp;Edition&nbsp;9.10<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Maybe&nbsp;try&nbsp;upgrading&nbsp;Twisted,&nbsp;preferably&nbsp;to&nbsp;10.0.0?&nbsp;&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;if&nbsp;a<br>
bug&nbsp;related&nbsp;to&nbsp;your&nbsp;problems&nbsp;was&nbsp;fixed&nbsp;since&nbsp;8.2.0,&nbsp;but&nbsp;a&nbsp;lot&nbsp;of&nbsp;bugs<br>
have&nbsp;been&nbsp;fixed&nbsp;in&nbsp;that&nbsp;~2&nbsp;years.&nbsp;&nbsp;Hopefully&nbsp;there's&nbsp;a&nbsp;PPA&nbsp;somewhere<br>
with&nbsp;a&nbsp;newer&nbsp;Twisted&nbsp;for&nbsp;your&nbsp;version&nbsp;of&nbsp;Ubuntu.<br>
<br>
-Andrew.<br>
<br>
<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;moz-do-not-send=&quot;true&quot;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;<br>
&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;<br>
&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;<br>
&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;<br>
&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;hr&nbsp;size=&quot;4&quot;&nbsp;width=&quot;90%&quot;&gt;<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>
<br>
<br>

</tt>
