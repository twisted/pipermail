<tt>
I&nbsp;see&nbsp;2&nbsp;other&nbsp;options:&lt;br&gt;&lt;br&gt;a)&nbsp;keep&nbsp;the&nbsp;last&nbsp;(longitude,&nbsp;latitude)&nbsp;pair&nbsp;for&nbsp;every&nbsp;receiver&nbsp;stored&nbsp;in&nbsp;your&nbsp;script,&nbsp;too,&nbsp;besides&nbsp;the&nbsp;db.&nbsp;When&nbsp;a&nbsp;new&nbsp;pair&nbsp;of&nbsp;values&nbsp;arrives,&nbsp;compare&nbsp;it&nbsp;with&nbsp;the&nbsp;current&nbsp;and&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;different,&nbsp;send&nbsp;the&nbsp;&amp;quot;INSERT&amp;quot;&nbsp;query&nbsp;to&nbsp;the&nbsp;database.&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;b)&nbsp;When&nbsp;a&nbsp;new&nbsp;pair&nbsp;of&nbsp;values&nbsp;arrives,&nbsp;send&nbsp;a&nbsp;query&nbsp;(or&nbsp;stored&nbsp;procedure)&nbsp;that&nbsp;tells&nbsp;the&nbsp;database&nbsp;to&nbsp;check&nbsp;and&nbsp;&amp;quot;INSERT&amp;quot;&nbsp;only&nbsp;if&nbsp;the&nbsp;pair&nbsp;is&nbsp;different&nbsp;that&nbsp;the&nbsp;latest.&nbsp;&lt;br&gt;&lt;br&gt;Pandelis&nbsp;Theodosiou&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
<br>
On&nbsp;Mon,&nbsp;May&nbsp;9,&nbsp;2011&nbsp;at&nbsp;1:50&nbsp;PM,&nbsp;Albert&nbsp;Brandl&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:albert.brandl@weiermayer.com&quot;&nbsp;target=&quot;_blank&quot;&gt;albert.brandl@weiermayer.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hi!&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;the&nbsp;application&nbsp;I&amp;#39;m&nbsp;currently&nbsp;working&nbsp;on,&nbsp;we&nbsp;gather&nbsp;data&nbsp;from&lt;br&gt;<br>
different&nbsp;sources&nbsp;and&nbsp;store&nbsp;them&nbsp;in&nbsp;a&nbsp;database,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&lt;br&gt;<br>
values&nbsp;have&nbsp;changed.&lt;br&gt;<br>
&lt;br&gt;<br>
One&nbsp;example&nbsp;is&nbsp;GPS&nbsp;information.&nbsp;We&nbsp;don&amp;#39;t&nbsp;want&nbsp;to&nbsp;store&nbsp;hundreds&nbsp;of&lt;br&gt;<br>
identical&nbsp;values&nbsp;that&nbsp;are&nbsp;sent&nbsp;by&nbsp;the&nbsp;receiver,&nbsp;so&nbsp;we&nbsp;have&nbsp;to&nbsp;compare&nbsp;the&lt;br&gt;<br>
last&nbsp;written&nbsp;row&nbsp;with&nbsp;the&nbsp;current&nbsp;latitude&nbsp;/&nbsp;longitude&nbsp;pair.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;use&nbsp;a&nbsp;subclass&nbsp;of&nbsp;NMEARreceiver&nbsp;class&nbsp;to&nbsp;determine&nbsp;the&nbsp;current&nbsp;latitude&lt;br&gt;<br>
and&nbsp;longitude.&nbsp;Then&nbsp;I&nbsp;query&nbsp;the&nbsp;database&nbsp;using&nbsp;a&nbsp;ConnectionPool&nbsp;instance&lt;br&gt;<br>
to&nbsp;get&nbsp;the&nbsp;previous&nbsp;values&nbsp;for&nbsp;latitude&nbsp;and&nbsp;longitude.&nbsp;If&nbsp;the&nbsp;result&lt;br&gt;<br>
differs&nbsp;from&nbsp;the&nbsp;current&nbsp;values,&nbsp;a&nbsp;new&nbsp;entry&nbsp;is&nbsp;stored,&nbsp;again&nbsp;using&nbsp;the&lt;br&gt;<br>
ConnectionPool.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;problem&nbsp;is:&nbsp;How&nbsp;do&nbsp;I&nbsp;&amp;quot;connect&amp;quot;&nbsp;the&nbsp;current&nbsp;latitude&nbsp;and&nbsp;longitude&nbsp;to&lt;br&gt;<br>
the&nbsp;database&nbsp;query?&nbsp;The&nbsp;query&nbsp;returns&nbsp;a&nbsp;Deferred&nbsp;object,&nbsp;but&nbsp;this&nbsp;expects&lt;br&gt;<br>
a&nbsp;callback&nbsp;with&nbsp;only&nbsp;one&nbsp;argument,&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;query.&lt;br&gt;<br>
&lt;br&gt;<br>
Storing&nbsp;them&nbsp;as&nbsp;instance&nbsp;variables&nbsp;of&nbsp;NMEAReceiver&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;be&lt;br&gt;<br>
the&nbsp;right&nbsp;way,&nbsp;since&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;how&nbsp;long&nbsp;it&nbsp;takes&nbsp;to&nbsp;query&nbsp;the&nbsp;database&lt;br&gt;<br>
-&nbsp;the&nbsp;relevant&nbsp;GPS&nbsp;information&nbsp;might&nbsp;be&nbsp;overwritten&nbsp;by&nbsp;a&nbsp;new&nbsp;NMEA&lt;br&gt;<br>
telegram&nbsp;when&nbsp;the&nbsp;connection&nbsp;pool&nbsp;finally&nbsp;triggers&nbsp;the&nbsp;callback&lt;br&gt;<br>
&lt;br&gt;<br>
One&nbsp;workaround&nbsp;I&amp;#39;ve&nbsp;found&nbsp;is&nbsp;to&nbsp;add&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;SQL&nbsp;query,&lt;br&gt;<br>
but&nbsp;this&nbsp;seems&nbsp;quite&nbsp;weird&nbsp;to&nbsp;me&nbsp;(and&nbsp;doesn&amp;#39;t&nbsp;work&nbsp;in&nbsp;the&nbsp;case&nbsp;that&nbsp;the&lt;br&gt;<br>
query&nbsp;does&nbsp;not&nbsp;return&nbsp;a&nbsp;result).&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;different&nbsp;approach&nbsp;would&nbsp;be&nbsp;to&nbsp;implement&nbsp;a&nbsp;callback&nbsp;with&nbsp;three&lt;br&gt;<br>
arguments&nbsp;(result,&nbsp;latitude&nbsp;and&nbsp;longitude),&nbsp;and&nbsp;wrap&nbsp;it&nbsp;in&nbsp;a&nbsp;lambda&lt;br&gt;<br>
function&nbsp;that&nbsp;fills&nbsp;latitude&nbsp;and&nbsp;longitude&nbsp;with&nbsp;the&nbsp;current&nbsp;values.&lt;br&gt;<br>
Would&nbsp;this&nbsp;would&nbsp;be&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;handle&nbsp;this&nbsp;requirement?&lt;br&gt;<br>
&lt;br&gt;<br>
How&nbsp;would&nbsp;you&nbsp;implement&nbsp;this?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;&amp;amp;&nbsp;best&nbsp;regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Albert&lt;br&gt;<br>
--&lt;br&gt;<br>
Albert&nbsp;Brandl&lt;br&gt;<br>
Weiermayer&nbsp;Solutions&nbsp;GmbH&nbsp; &nbsp; &nbsp; |&nbsp;Abteistraße&nbsp;12,&nbsp;A-4813&nbsp;Altmünster&lt;br&gt;<br>
phone:&nbsp;+43&nbsp;(0)&nbsp;720&nbsp;70&nbsp;30&nbsp;14&nbsp; &nbsp; |&nbsp;fax:&nbsp;+43&nbsp;(0)&nbsp;7612&nbsp;20&nbsp;3&nbsp;56&lt;br&gt;<br>
web:&nbsp;&lt;a&nbsp;href=&quot;http://www.weiermayer.com&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.weiermayer.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;display:&nbsp;inline;&quot;&gt;&lt;/div&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;img&nbsp;src=&quot;http://www.qtl.co.il/img/copy.png&quot;&nbsp;title=&quot;Copy&nbsp;Selction&quot;&gt;&lt;a&nbsp;href=&quot;http://int.ask.com/web?siteid=10000861&amp;amp;webqsrc=999&amp;amp;l=dis&amp;amp;q=UPDATE&quot;&nbsp;title=&quot;Search&nbsp;With&nbsp;Ask&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;src=&quot;http://www.ask.com/favicon.ico&quot;&gt;&lt;/a&gt;&lt;img&nbsp;src=&quot;http://translate.google.com/favicon.ico&quot;&nbsp;title=&quot;Translate&nbsp;With&nbsp;Google&quot;&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
&lt;div&nbsp;style=&quot;visibility:&nbsp;hidden;&nbsp;display:&nbsp;inline;&quot;&nbsp;id=&quot;avg_ls_inline_popup&quot;&gt;&lt;/div&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;#avg_ls_inline_popup&nbsp;{&nbsp;&nbsp;position:absolute;&nbsp;&nbsp;z-index:9999;&nbsp;&nbsp;padding:&nbsp;0px&nbsp;0px;&nbsp;&nbsp;margin-left:&nbsp;0px;&nbsp;&nbsp;margin-top:&nbsp;0px;&nbsp;&nbsp;width:&nbsp;240px;&nbsp;&nbsp;overflow:&nbsp;hidden;&nbsp;&nbsp;word-wrap:&nbsp;break-word;&nbsp;&nbsp;color:&nbsp;black;&nbsp;&nbsp;font-size:&nbsp;10px;&nbsp;&nbsp;text-align:&nbsp;left;&nbsp;&nbsp;line-height:&nbsp;13px;}&lt;/style&gt;&lt;style&gt;<br>
qtl&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspposition:&nbsp;absolute;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspborder:&nbsp;1px&nbsp;solid&nbsp;#cccccc;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp-moz-border-radius:&nbsp;5px;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspopacity:&nbsp;0.2;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspline-height:&nbsp;100%;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspz-index:&nbsp;999;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdirection:&nbsp;ltr;<br>
}<br>
<br>
qtl:hover,qtl.open&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspopacity:&nbsp;1;<br>
}<br>
<br>
qtl,qtlbar&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspheight:&nbsp;22px;<br>
}<br>
<br>
qtlbar&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdisplay:&nbsp;block;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwidth:&nbsp;100%;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbackground-color:&nbsp;#cccccc;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcursor:&nbsp;move;<br>
}<br>
<br>
qtlbar&nbsp;img&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspborder:&nbsp;0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppadding:&nbsp;3px;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspheight:&nbsp;16px;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwidth:&nbsp;16px;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcursor:&nbsp;pointer;<br>
}<br>
<br>
qtlbar&nbsp;img:hover&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbackground-color:&nbsp;#aaaaff;<br>
}<br>
<br>
qtl&gt;iframe&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspborder:&nbsp;0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspheight:&nbsp;0;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwidth:&nbsp;0;<br>
}<br>
<br>
qtl.open&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspheight:&nbsp;auto;&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>
}<br>
<br>
qtl.open&gt;iframe&nbsp;{<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspheight:&nbsp;200px;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwidth:&nbsp;300px;<br>
}<br>
&lt;/style&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&lt;img&nbsp;src=&quot;http://www.qtl.co.il/img/copy.png&quot;&nbsp;title=&quot;Copy&nbsp;Selction&quot;&gt;&lt;a&nbsp;href=&quot;http://int.ask.com/web?siteid=10000861&amp;amp;webqsrc=999&amp;amp;l=dis&amp;amp;q=triple%20&quot;&nbsp;title=&quot;Search&nbsp;With&nbsp;Ask&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;img&nbsp;src=&quot;http://www.ask.com/favicon.ico&quot;&gt;&lt;/a&gt;&lt;img&nbsp;src=&quot;http://translate.google.com/favicon.ico&quot;&nbsp;title=&quot;Translate&nbsp;With&nbsp;Google&quot;&gt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br>

</tt>
