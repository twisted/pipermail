<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Nov&nbsp;9,&nbsp;2015,&nbsp;at&nbsp;1:02&nbsp;AM,&nbsp;Cory&nbsp;Benfield&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:cory@lukasa.co.uk&quot;&nbsp;class=&quot;&quot;&gt;cory@lukasa.co.uk&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;All,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;With&nbsp;the&nbsp;work&nbsp;on&nbsp;#7860&nbsp;nearly&nbsp;done,&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;_Actually_&nbsp;done,&nbsp;now.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Twisted&nbsp;should&nbsp;be&nbsp;in&nbsp;a&nbsp;good&nbsp;place&nbsp;to&nbsp;have&nbsp;a&nbsp;HTTP/2&nbsp;implementation.&nbsp;There’s&nbsp;currently&nbsp;a&nbsp;Trac&nbsp;ticket&nbsp;(#7460)&nbsp;for&nbsp;adding&nbsp;HTTP/2&nbsp;support&nbsp;to&nbsp;twisted.web,&nbsp;which&nbsp;is&nbsp;obviously&nbsp;a&nbsp;good&nbsp;idea.&nbsp;I’m&nbsp;happy&nbsp;to&nbsp;take&nbsp;on&nbsp;that&nbsp;work.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;3&nbsp;&lt;3&nbsp;&lt;3&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;What&nbsp;I&nbsp;want&nbsp;to&nbsp;get&nbsp;a&nbsp;picture&nbsp;for&nbsp;is&nbsp;how&nbsp;much&nbsp;of&nbsp;the&nbsp;Twisted&nbsp;support&nbsp;should&nbsp;live&nbsp;in&nbsp;Twisted&nbsp;itself.&nbsp;Currently&nbsp;I’m&nbsp;planning&nbsp;to&nbsp;base&nbsp;the&nbsp;implementation&nbsp;on&nbsp;Hyper-h2[0].&nbsp;This&nbsp;is&nbsp;because&nbsp;it&nbsp;seems&nbsp;totally&nbsp;needless&nbsp;to&nbsp;write&nbsp;a&nbsp;new&nbsp;HTTP/2&nbsp;state&nbsp;machine&nbsp;when&nbsp;a&nbsp;perfectly&nbsp;good&nbsp;one&nbsp;already&nbsp;exists&nbsp;(full&nbsp;disclosure:&nbsp;I’m&nbsp;the&nbsp;maintainer&nbsp;of&nbsp;Hyper-h2).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Did&nbsp;somebody&nbsp;say&nbsp;STATE&nbsp;MACHINE???&nbsp;&lt;a&nbsp;href=&quot;https://github.com/glyph/automat&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/glyph/automat&lt;/a&gt;&nbsp;(Seriously&nbsp;though&nbsp;maybe&nbsp;look&nbsp;at&nbsp;it,&nbsp;it&nbsp;might&nbsp;make&nbsp;some&nbsp;of&nbsp;the&nbsp;innards&nbsp;of&nbsp;h2&nbsp;nicer,&nbsp;or,&nbsp;maybe&nbsp;you&nbsp;will&nbsp;have&nbsp;some&nbsp;ideas&nbsp;about&nbsp;how&nbsp;broken&nbsp;it&nbsp;is&nbsp;and&nbsp;could&nbsp;tell&nbsp;me&nbsp;them.)&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;we&nbsp;should&nbsp;definitely&nbsp;depend&nbsp;on&nbsp;h2&nbsp;as&nbsp;a&nbsp;library&nbsp;and&nbsp;not&nbsp;do&nbsp;our&nbsp;own&nbsp;thing.&nbsp;&nbsp;Frankly,&nbsp;Hyper-h2&nbsp;is&nbsp;almost&nbsp;SURREAL&nbsp;in&nbsp;how&nbsp;well-factored&nbsp;and&nbsp;decoupled&nbsp;the&nbsp;implementation&nbsp;is&nbsp;from&nbsp;I/O.&nbsp;&nbsp;If&nbsp;libraries&nbsp;in&nbsp;the&nbsp;Python&nbsp;ecosystem&nbsp;looked&nbsp;like&nbsp;this&nbsp;generally,&nbsp;Twisted&nbsp;would&nbsp;be&nbsp;a&nbsp;much&nbsp;better&nbsp;platform&nbsp;than&nbsp;it&nbsp;is.&nbsp;&nbsp;(Frankly,&nbsp;most&nbsp;of&nbsp;Twisted's&nbsp;_own_&nbsp;protocol&nbsp;implementations&nbsp;should&nbsp;aspire&nbsp;to&nbsp;such&nbsp;cleanliness.)&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;However,&nbsp;we’ll&nbsp;still&nbsp;need&nbsp;a&nbsp;HTTP/2&nbsp;Protocol,&nbsp;and&nbsp;the&nbsp;twisted.web&nbsp;integration.&nbsp;The&nbsp;twisted.web&nbsp;integration&nbsp;will&nbsp;definitely&nbsp;need&nbsp;to&nbsp;be&nbsp;done&nbsp;in&nbsp;Twisted,&nbsp;but&nbsp;Adi&nbsp;has&nbsp;pointed&nbsp;out&nbsp;to&nbsp;me&nbsp;that&nbsp;it&nbsp;may&nbsp;be&nbsp;better&nbsp;for&nbsp;the&nbsp;HTTP/2&nbsp;Protocol&nbsp;itself&nbsp;to&nbsp;live&nbsp;outside&nbsp;of&nbsp;core&nbsp;Twisted&nbsp;(probably&nbsp;as&nbsp;a&nbsp;sub-project&nbsp;of&nbsp;Hyper,&nbsp;with&nbsp;a&nbsp;working&nbsp;title&nbsp;of&nbsp;txh2).&nbsp;This&nbsp;would&nbsp;give&nbsp;us&nbsp;a&nbsp;lot&nbsp;more&nbsp;flexibility&nbsp;and&nbsp;speed&nbsp;to&nbsp;iterate.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Creating&nbsp;this&nbsp;dependency&nbsp;loop&nbsp;(twisted-&gt;txh2-&gt;(twisted-&gt;txh2-&gt;...,&nbsp;h2))&nbsp;seems&nbsp;potentially&nbsp;problematic,&nbsp;and&nbsp;maybe&nbsp;more&nbsp;trouble&nbsp;than&nbsp;it's&nbsp;worth&nbsp;in&nbsp;terms&nbsp;of&nbsp;factoring&nbsp;things&nbsp;out.&nbsp;&nbsp;An&nbsp;IProtocol&nbsp;implementation&nbsp;is&nbsp;literally&nbsp;three&nbsp;methods&nbsp;-&nbsp;makeConnection,&nbsp;dataReceived,&nbsp;connectionLost&nbsp;-&nbsp;so&nbsp;if&nbsp;we&nbsp;put&nbsp;this&nbsp;together&nbsp;nicely&nbsp;there&nbsp;should&nbsp;not&nbsp;be&nbsp;too&nbsp;much&nbsp;code&nbsp;on&nbsp;the&nbsp;Twisted&nbsp;side&nbsp;of&nbsp;things.&nbsp;&nbsp;Or&nbsp;at&nbsp;least,&nbsp;so&nbsp;I&nbsp;imagine;&nbsp;just&nbsp;the&nbsp;glue&nbsp;to&nbsp;hook&nbsp;it&nbsp;up&nbsp;to&nbsp;(sigh)&nbsp;IResource,&nbsp;et.&nbsp;al.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;One&nbsp;potential&nbsp;way&nbsp;to&nbsp;keep&nbsp;the&nbsp;dependency&nbsp;graph&nbsp;from&nbsp;being&nbsp;cyclical&nbsp;is&nbsp;to&nbsp;build&nbsp;the&nbsp;interface&nbsp;in&nbsp;terms&nbsp;of&nbsp;Tubes&nbsp;(see&nbsp;&lt;&lt;a&nbsp;href=&quot;https://github.com/twisted/tubes&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/twisted/tubes&lt;/a&gt;&gt;&nbsp;and&nbsp;&lt;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/trac/ticket/288&quot;&nbsp;class=&quot;&quot;&gt;https://twistedmatrix.com/trac/ticket/288&lt;/a&gt;&gt;)&nbsp;and&nbsp;move&nbsp;the&nbsp;Twisted-y&nbsp;parts&nbsp;of&nbsp;Tubes&nbsp;(like&nbsp;undefer.py)&nbsp;into&nbsp;Twisted&nbsp;proper.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Another&nbsp;would&nbsp;be&nbsp;to&nbsp;actually&nbsp;extract&nbsp;Deferred&nbsp;for&nbsp;real,&nbsp;and&nbsp;it&nbsp;seems&nbsp;the&nbsp;time&nbsp;is&nbsp;ripe&nbsp;for&nbsp;such&nbsp;an&nbsp;adventure.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;want&nbsp;to&nbsp;get&nbsp;a&nbsp;sense&nbsp;of&nbsp;what&nbsp;the&nbsp;team&nbsp;believes&nbsp;is&nbsp;the&nbsp;best&nbsp;approach.&nbsp;Can&nbsp;I&nbsp;have&nbsp;your&nbsp;opinions?&nbsp;How&nbsp;much&nbsp;of&nbsp;this&nbsp;should&nbsp;be&nbsp;in&nbsp;Twisted&nbsp;itself?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;you&nbsp;maybe&nbsp;expand&nbsp;a&nbsp;little&nbsp;bit&nbsp;on&nbsp;what&nbsp;pieces&nbsp;you&nbsp;think&nbsp;need&nbsp;to&nbsp;exist,&nbsp;in&nbsp;terms&nbsp;of&nbsp;what&nbsp;the&nbsp;Protocol&nbsp;would&nbsp;actually&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;do&lt;/i&gt;?&nbsp;&nbsp;Are&nbsp;you&nbsp;thinking&nbsp;about&nbsp;things&nbsp;like&nbsp;integration&nbsp;with&nbsp;Cred?&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;-g&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
