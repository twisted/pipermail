<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-15&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;list,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;new&nbsp;to&nbsp;twisted&nbsp;and&nbsp;to&nbsp;python&nbsp;in&nbsp;general,&nbsp;so&nbsp;still&nbsp;deep&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;learning&nbsp;process.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Please&nbsp;forgive&nbsp;any&nbsp;faulty&nbsp;assumptions&nbsp;you'll&nbsp;find&nbsp;in&nbsp;this&nbsp;post&nbsp;:)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;accomplish&nbsp;to&nbsp;the&nbsp;following&nbsp;task:&nbsp;realize&nbsp;a&nbsp;tool&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;acts&nbsp;as&nbsp;a&nbsp;proxy&nbsp;between&nbsp;the&nbsp;SMTP&nbsp;domain&nbsp;and&nbsp;the&nbsp;'objects'&nbsp;domain.<br>
&nbsp;&nbsp;&nbsp;&nbsp;That&nbsp;is:&nbsp;a&nbsp;daemon&nbsp;that&nbsp;listens&nbsp;for&nbsp;SMTP&nbsp;connections&nbsp;(relayed<br>
&nbsp;&nbsp;&nbsp;&nbsp;sessions&nbsp;from&nbsp;Postfix)&nbsp;and&nbsp;bundles&nbsp;everything&nbsp;that&nbsp;belongs&nbsp;to&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;single&nbsp;session&nbsp;(envelope&nbsp;sender,&nbsp;envelope&nbsp;recipients,&nbsp;headers,&nbsp;body)<br>
&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;an&nbsp;object&nbsp;(it&nbsp;will&nbsp;probably&nbsp;become&nbsp;a&nbsp;JSON&nbsp;one&nbsp;day,&nbsp;not&nbsp;decided<br>
&nbsp;&nbsp;&nbsp;&nbsp;yet).&nbsp;The&nbsp;aim&nbsp;is&nbsp;to&nbsp;allow&nbsp;further&nbsp;processing&nbsp;(es.&nbsp;publishing&nbsp;to&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;queue)&nbsp;of&nbsp;a&nbsp;self-contained&nbsp;item.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;My&nbsp;(draft)&nbsp;implementation&nbsp;can&nbsp;be&nbsp;reached&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://pastebin.com/mbRztuid&quot;&gt;http://pastebin.com/mbRztuid&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;My&nbsp;main&nbsp;concerns&nbsp;are:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;am&nbsp;I&nbsp;using&nbsp;the&nbsp;right&nbsp;classes?&nbsp;My&nbsp;implementation&nbsp;leverages<br>
&nbsp;&nbsp;&nbsp;&nbsp;twisted.mail.smtp,&nbsp;is&nbsp;this&nbsp;correct?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;I've&nbsp;overridden&nbsp;smtp.SMTP.&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,&nbsp;serif;&nbsp;font-size:&nbsp;12px;&nbsp;font-style:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;21px;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;display:&nbsp;inline&nbsp;!important;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;none;&quot;&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;me1&quot;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monospace,&nbsp;serif;&nbsp;font-size:&nbsp;12px;&nbsp;font-style:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line-height:&nbsp;21px;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&quot;&gt;&lt;/span&gt;_cbToValidate;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;really&nbsp;don't&nbsp;like&nbsp;this&nbsp;very&nbsp;much&nbsp;(I'd&nbsp;like&nbsp;to&nbsp;leave&nbsp;the&nbsp;protocol<br>
&nbsp;&nbsp;&nbsp;&nbsp;untouched)&nbsp;but&nbsp;it's&nbsp;the&nbsp;only&nbsp;way&nbsp;I've&nbsp;come&nbsp;up&nbsp;with&nbsp;(after&nbsp;several<br>
&nbsp;&nbsp;&nbsp;&nbsp;days&nbsp;of&nbsp;experiments&nbsp;:)&nbsp;)&nbsp;to&nbsp;have&nbsp;one&nbsp;single&nbsp;payload&nbsp;down&nbsp;the&nbsp;line<br>
&nbsp;&nbsp;&nbsp;&nbsp;(in&nbsp;smtp.SMTP.do_DATA),&nbsp;and&nbsp;not&nbsp;one&nbsp;copy&nbsp;of&nbsp;the&nbsp;message&nbsp;for&nbsp;every<br>
&nbsp;&nbsp;&nbsp;&nbsp;single&nbsp;recipient.&nbsp;May&nbsp;this&nbsp;have&nbsp;bad&nbsp;consequences?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;3)&nbsp;what&nbsp;do&nbsp;you&nbsp;think&nbsp;about&nbsp;the&nbsp;overall&nbsp;approach?&nbsp;could&nbsp;it&nbsp;have&nbsp;been<br>
&nbsp;&nbsp;&nbsp;&nbsp;done&nbsp;differently/better?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;a&nbsp;lot&nbsp;for&nbsp;your&nbsp;help!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Fabio&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Consolas,&nbsp;Menlo,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Monaco,&nbsp;'Lucida&nbsp;Console',&nbsp;'Liberation&nbsp;Mono',&nbsp;'DejaVu&nbsp;Sans&nbsp;Mono',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Bitstream&nbsp;Vera&nbsp;Sans&nbsp;Mono',&nbsp;monospace,&nbsp;serif;&nbsp;font-size:&nbsp;12px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;21px;&nbsp;orphans:&nbsp;auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;&nbsp;word-spacing:&nbsp;0px;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255);&nbsp;display:&nbsp;inline&nbsp;!important;&nbsp;float:&nbsp;none;&quot;&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
