<tt>
Thank&nbsp;for&nbsp;your&nbsp;help&lt;br&gt;&lt;br&gt;It&amp;#39;s&nbsp;right,&nbsp;the&nbsp;code&nbsp;number&nbsp;1&nbsp;is&nbsp;not&nbsp;well&nbsp;structured&nbsp;that&nbsp;is&nbsp;the&nbsp;reason&nbsp;I&nbsp;modified&nbsp;it&nbsp;for&nbsp;the&nbsp;code&nbsp;number&nbsp;2&lt;br&gt;But&nbsp;in&nbsp;the&nbsp;first&nbsp;one&nbsp;the&nbsp;xml_rpc&nbsp;call&nbsp;retun&nbsp;the&nbsp;good&nbsp;answer&nbsp;and&nbsp;in&nbsp;the&nbsp;second&nbsp;one&nbsp;I&nbsp;received&nbsp;a&nbsp;error&nbsp;message&lt;br&gt;<br>
&lt;br&gt;I&nbsp;tried&nbsp;your&nbsp;code,this&nbsp;is&nbsp;a&nbsp;better&nbsp;structure&nbsp;(The&nbsp;Class&nbsp;Resource&nbsp;is&nbsp;in&nbsp;the&nbsp;next&nbsp;example&nbsp;in&nbsp;the&nbsp;book)&lt;br&gt;&lt;br&gt; But&nbsp;the&nbsp;code&nbsp;doesn&amp;#39;t&nbsp;work,&nbsp;I&nbsp;have&nbsp;the&nbsp;same&nbsp;error&nbsp;message&nbsp;about&nbsp;xml_rpc&nbsp;answer&lt;br&gt;&lt;br&gt;[Failure&nbsp;instance:&nbsp;Traceback:&nbsp;&amp;lt;class&nbsp;&amp;#39;xmlrpclib.Fault&amp;#39;&amp;gt;:&nbsp;&amp;lt;Fault&nbsp;-32602:&nbsp;&amp;#39;server&nbsp;error.&nbsp;invalid&nbsp;method&nbsp;parameters&amp;#39;&amp;gt;&lt;br&gt;<br>
C:\python27\lib\site-packages\twisted\internet\posixbase.py:263:_disconnectSelectable&lt;br&gt;C:\python27\lib\site-packages\twisted\internet\tcp.py:433:connectionLost&lt;br&gt;C:\python27\lib\site-packages\twisted\internet\tcp.py:277:connectionLost&lt;br&gt;<br>
C:\python27\lib\site-packages\twisted\web\xmlrpc.py:373:connectionLost&lt;br&gt;---&nbsp;&amp;lt;exception&nbsp;caught&nbsp;here&amp;gt;&nbsp;---&lt;br&gt;C:\python27\lib\site-packages\twisted\web\xmlrpc.py:444:parseResponse&lt;br&gt;C:\python27\lib\xmlrpclib.py:1137:loads&lt;br&gt;<br>
C:\python27\lib\xmlrpclib.py:793:close&lt;br&gt;]&lt;br&gt;&lt;br&gt;The&nbsp;issue&nbsp;is&nbsp;how&nbsp;to&nbsp;call&nbsp;xml_rpc&nbsp;callRemote&nbsp;correctly&nbsp;?&lt;br&gt;&lt;br&gt;Thank&nbsp;again&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Le&nbsp;17&nbsp;avril&nbsp;2012&nbsp;04:46,&nbsp;Phil&nbsp;Mayers&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:p.mayers@imperial.ac.uk&quot;&gt;p.mayers@imperial.ac.uk&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;a&nbsp;écrit&nbsp;:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;04/17/2012&nbsp;03:38&nbsp;AM,&nbsp;joel&nbsp;tremblet&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;try&nbsp;to&nbsp;declare&nbsp;the&nbsp;Proxy(OF_XMLRPC_URL)&nbsp;differently,&nbsp;without&nbsp;success&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Where&nbsp;is&nbsp;my&nbsp;mistake&nbsp;....&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;That&nbsp;code&nbsp;is&nbsp;all&nbsp;wrong,&nbsp;and&nbsp;(to&nbsp;be&nbsp;blunt)&nbsp;pretty&nbsp;horrible&nbsp;too.&lt;br&gt;<br>
&lt;br&gt;<br>
Why&nbsp;have&nbsp;you&nbsp;re-implemented&nbsp;a&nbsp;HTTP&nbsp;protocol&nbsp;yourself?&nbsp;You&amp;#39;re&nbsp;bound&nbsp;to&lt;br&gt;<br>
get&nbsp;this&nbsp;wrong&nbsp;(and&nbsp;in&nbsp;fact&nbsp;have,&nbsp;in&nbsp;several&nbsp;ways).&nbsp;Don&amp;#39;t&nbsp;do&nbsp;this.&nbsp;Use&lt;br&gt;<br>
the&nbsp;HTTP&nbsp;stack&nbsp;that&nbsp;comes&nbsp;with&nbsp;Twisted.&lt;br&gt;<br>
&lt;br&gt;<br>
Anyway,&nbsp;your&nbsp;major&nbsp;mistake&nbsp;in&nbsp;the&nbsp;1st&nbsp;example&nbsp;is&nbsp;that,&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&lt;br&gt;<br>
lineReceived&nbsp;method,&nbsp;you&nbsp;always&nbsp;call&nbsp;the&nbsp;sendResponse()&nbsp;method.&nbsp;This&lt;br&gt;<br>
happens&nbsp;immediately,&nbsp;before&nbsp;the&nbsp;XMLRPC&nbsp;reply&nbsp;has&nbsp;come&nbsp;back,&nbsp;so&nbsp;your&nbsp;code&lt;br&gt;<br>
sends&nbsp;&amp;quot;no&nbsp;value&amp;quot;.&nbsp;You&nbsp;need&nbsp;to&nbsp;attach&nbsp;the&nbsp;sendResponse&nbsp;method&nbsp;to&nbsp;the&lt;br&gt;<br>
deferred&nbsp;returned&nbsp;from&nbsp;the&nbsp;xmlrpc&nbsp;call.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;would&nbsp;junk&nbsp;it&nbsp;and&nbsp;start&nbsp;again,&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
from&nbsp;twisted.web&nbsp;import&nbsp;server,&nbsp;resource,&nbsp;xmlrpc,&nbsp;http&lt;br&gt;<br>
&lt;br&gt;<br>
proxy&nbsp;=&nbsp;xmlrpc.Proxy(XMLRPC_URL)&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;MyResource(resource.Resource):&lt;br&gt;<br>
&nbsp; &nbsp;isLeaf&nbsp;=&nbsp;True&lt;br&gt;<br>
&nbsp; &nbsp;def&nbsp;render_GET(self,&nbsp;request):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;sessid&nbsp;=&nbsp;request.args[&amp;#39;sessid&amp;#39;][0]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;keyid&nbsp;=&nbsp;request.args[&amp;#39;keyid&amp;#39;][0]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;d&nbsp;=&nbsp;proxy.callRemote(&amp;#39;checkCommand&amp;#39;,&nbsp;sessid,&nbsp;keyid)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;d.addCallback(self._done,&nbsp;request)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;d.addErrback(self._err,&nbsp;request)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;return&nbsp;server.NOT_DONE_YET&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;def&nbsp;_done(self,&nbsp;res,&nbsp;request):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;if&nbsp;res!=1:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;request.setResponseCode(406)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;else:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;request.setResponseCode(200)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;request.finish()&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;def&nbsp;_err(self,&nbsp;failure,&nbsp;request):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;request.setResponseCode(405)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp;request.finish()&lt;br&gt;<br>
&lt;br&gt;<br>
reactor.listenTCP(8080,&nbsp;server.Site(MyResource()))&lt;br&gt;<br>
reactor.run()&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
