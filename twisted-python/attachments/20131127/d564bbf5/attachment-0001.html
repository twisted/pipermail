<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;div&gt;&lt;span&gt;Awesome,&nbsp;that's&nbsp;what&nbsp;I've&nbsp;been&nbsp;trying&nbsp;to&nbsp;do&nbsp;for&nbsp;the&nbsp;past&nbsp;couple&nbsp;of&nbsp;days.&nbsp;&nbsp;Definitely&nbsp;learning&nbsp;a&nbsp;lot&nbsp;of&nbsp;new&nbsp;things&nbsp;:)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&nbsp;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&nbsp;&lt;hr&nbsp;size=&quot;1&quot;&gt;&nbsp;&nbsp;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:bold;&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&nbsp;&quot;exarkun@twistedmatrix.com&quot;&nbsp;&lt;exarkun@twistedmatrix.com&gt;&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;To:&lt;/span&gt;&lt;/b&gt;&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&lt;twisted-python@twistedmatrix.com&gt;&nbsp;&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Sent:&lt;/span&gt;&lt;/b&gt;&nbsp;Wednesday,&nbsp;November&nbsp;27,&nbsp;2013&nbsp;5:18&nbsp;PM&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Subject:&lt;/span&gt;&lt;/b&gt;&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;IMAP4&nbsp;Proxy&nbsp;to&nbsp;add&nbsp;headers<br>
&nbsp;and&nbsp;modify&nbsp;body&nbsp;of&nbsp;an&nbsp;incoming&nbsp;message&lt;br&gt;&nbsp;&lt;/font&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;div&nbsp;class=&quot;y_msg_container&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;From:&nbsp;Krzysztof&nbsp;Oblucki&nbsp;&lt;&lt;a&nbsp;ymailto=&quot;mailto:koblucki@yahoo.com&quot;&nbsp;href=&quot;mailto:koblucki@yahoo.com&quot;&gt;koblucki@yahoo.com&lt;/a&gt;&gt;&lt;br&gt;&gt;&nbsp;To:&nbsp;&quot;&lt;a&nbsp;ymailto=&quot;mailto:twisted-python@twistedmatrix.com&quot;&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&quot;&nbsp;&lt;twisted-&nbsp;&lt;a&nbsp;ymailto=&quot;mailto:python@twistedmatrix.com&quot;&nbsp;href=&quot;mailto:python@twistedmatrix.com&quot;&gt;python@twistedmatrix.com&lt;/a&gt;&gt;&lt;br&gt;&gt;&nbsp;Sent:&nbsp;Monday,&nbsp;November&nbsp;25,&nbsp;2013&nbsp;11:27&nbsp;AM&lt;br&gt;&gt;&nbsp;Subject:&nbsp;IMAP4&nbsp;Proxy&nbsp;to&nbsp;add&nbsp;headers&nbsp;and&nbsp;modify&nbsp;body&nbsp;of&nbsp;an&nbsp;incoming&nbsp;message&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Hello,&lt;br&gt;&gt;&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;write&nbsp;an&nbsp;IMAP&nbsp;proxy&nbsp;to&nbsp;modify&nbsp;headers&nbsp;and&nbsp;the&nbsp;body&nbsp;of&nbsp;an&nbsp;incoming&nbsp;message&nbsp;using&nbsp;twisted.&nbsp;&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;python&nbsp;and&nbsp;twisted&nbsp;so&nbsp;maybe&nbsp;this&nbsp;is&nbsp;why&nbsp;I&nbsp;either&nbsp;picked&nbsp;the&nbsp;wrong&nbsp;route&nbsp;or&nbsp;don't&nbsp;have&nbsp;the&nbsp;skills&nbsp;to&nbsp;get&nbsp;through&nbsp;some&nbsp;issues&nbsp;and&nbsp;I'm&nbsp;hoping&nbsp;that&nbsp;some&nbsp;you&nbsp;fine&nbsp;list&nbsp;members&nbsp;can&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right&nbsp;direction.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;I&nbsp;started&nbsp;by&nbsp;using&nbsp;the&nbsp;IMAP4Client&nbsp;and<br>
&nbsp;IMAP4Server&nbsp;to&nbsp;do&nbsp;the&nbsp;proxying.&nbsp;However,&nbsp;I&nbsp;realized&nbsp;that&nbsp;in&nbsp;certain&nbsp;cases,&nbsp;the&nbsp;IMAP4Server&nbsp;requires&nbsp;synchronous&nbsp;results&nbsp;but&nbsp;since&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;an&nbsp;async&nbsp;call&nbsp;using&nbsp;the&nbsp;client&nbsp;the&nbsp;handling&nbsp;is&nbsp;not&nbsp;working&nbsp;properly.&nbsp;&nbsp;I&nbsp;ran&nbsp;into&nbsp;this&nbsp;when&nbsp;implementing&nbsp;getFlags()&nbsp;in&nbsp;the&nbsp;IMessage&nbsp;and&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how&nbsp;I&nbsp;can&nbsp;get&nbsp;out&nbsp;of&nbsp;this&nbsp;short&nbsp;of&nbsp;changing&nbsp;the&nbsp;IMAP4Server&nbsp;code&nbsp;to&nbsp;handle&nbsp;Deferreds.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Am&nbsp;I&nbsp;on&nbsp;the&nbsp;right&nbsp;track?&nbsp;&nbsp;Is&nbsp;imap4&nbsp;lib&nbsp;the&nbsp;right&nbsp;tool&nbsp;for&nbsp;this&nbsp;job?&nbsp;&nbsp;If&nbsp;so,&nbsp;is&nbsp;modifying&nbsp;IMAP4Server&nbsp;to&nbsp;handle&nbsp;Deferreds&nbsp;the&nbsp;right&nbsp;thing&nbsp;to&nbsp;do?&nbsp;If&nbsp;not,&nbsp;what&nbsp;would&nbsp;you&nbsp;recommend?&lt;br&gt;&lt;br&gt;Sounds&nbsp;like&nbsp;you&nbsp;diagnosed&nbsp;the&nbsp;problem&nbsp;correctly.&nbsp;&nbsp;IMAP4Server&nbsp;needs&nbsp;to&nbsp;handle&nbsp;Deferreds&nbsp;here&nbsp;and&nbsp;doesn't&nbsp;currently.&lt;br&gt;&lt;br&gt;Jean-Paul&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;ymailto=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;<br>
&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
