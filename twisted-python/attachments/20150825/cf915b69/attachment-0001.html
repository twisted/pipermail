<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;As&nbsp;to&nbsp;where&nbsp;it&nbsp;happens,&nbsp;look&nbsp;at&nbsp;twisted.conch.recvline.RecvLine.connectionMade()&nbsp;and&nbsp;twisted.conch.insults.insults.TerminalProtocol.makeConnection()&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;could&nbsp;step&nbsp;on&nbsp;the&nbsp;RecvLine. initializeScreen(),&nbsp;but&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;the&nbsp;side&nbsp;effects&nbsp;are.&nbsp;(And&nbsp;of&nbsp;course&nbsp;if&nbsp;you&nbsp;bypass&nbsp;all&nbsp;or&nbsp;part&nbsp;of&nbsp;it,&nbsp;even&nbsp;if&nbsp;it&nbsp;works&nbsp;now,&nbsp;it&#39;s&nbsp;alway&nbsp;subject&nbsp;to&nbsp;future&nbsp;breakage. &lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;25,&nbsp;2015&nbsp;at&nbsp;12:27&nbsp;PM,&nbsp;Peter&nbsp;Westlake&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:peter.westlake@pobox.com&quot;&nbsp;target=&quot;_blank&quot;&gt;peter.westlake@pobox.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;u&gt;&lt;/u&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;&lt;div&gt;I&#39;m&nbsp;making&nbsp;a&nbsp;manhole&nbsp;service&nbsp;in&nbsp;the&nbsp;usual&nbsp;way:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;class&nbsp;PF(ServerProtocol):&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;       &nbsp;def&nbsp;protocolFactory(*a,&nbsp;**kw):&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;           &nbsp;return&nbsp;manhole.Manhole(namespace)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;realm&nbsp;=&nbsp;manhole_ssh.TerminalRealm()&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;realm.chainedProtocolFactory&nbsp;=&nbsp;PF&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;mh_portal&nbsp;=&nbsp;portal.Portal(realm)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;mh_portal.registerChecker(checker)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;manhole_service&nbsp;=&nbsp;TCPServer(0,&nbsp;manhole_ssh.ConchFactory(mh_portal))&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:verdana,sans-serif,sans-serif&quot;&gt;   &nbsp;manhole_service.startService()&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;and&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;print&nbsp;a&nbsp;message&nbsp;when&nbsp;the&nbsp;terminal&nbsp;is&nbsp;opened.&nbsp;This&nbsp;change&nbsp;does&nbsp;it:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;   &nbsp;class&nbsp;PF(ServerProtocol):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;       &nbsp;def&nbsp;protocolFactory(*a,&nbsp;**kw):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;           &nbsp;class&nbsp;Manhole(manhole.Manhole):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;               &nbsp;def&nbsp;connectionMade(self):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;                   &nbsp;super(Manhole,&nbsp;self).connectionMade()&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;                   &nbsp;self.terminal.write(&#39;Hello&#39;)&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;           &nbsp;return&nbsp;manhole.Manhole(namespace)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;and&nbsp;so&nbsp;does&nbsp;this&nbsp;version,&nbsp;which&nbsp;is&nbsp;better&nbsp;because&nbsp;t.c.i.i.ServerProtocol.connectionMade&nbsp;says&nbsp;it&nbsp;is&nbsp;the&nbsp;place&nbsp;to&nbsp;write&nbsp;messages:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;   &nbsp;class&nbsp;PF(ServerProtocol):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;       &nbsp;def&nbsp;protocolFactory(*a,&nbsp;**kw):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;           &nbsp;return&nbsp;manhole.Manhole(namespace)&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;       &nbsp;def&nbsp;connectionMade(self):&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;           &nbsp;ServerProtocol.connectionMade(self)&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Trebuchet&nbsp;MS&quot;,sans-serif,sans-serif&quot;&gt;           &nbsp;self.write(&#39;Hello&#39;)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;But&nbsp;in&nbsp;both&nbsp;cases,&nbsp;after&nbsp;the&nbsp;message&nbsp;the&nbsp;screen&nbsp;is&nbsp;cleared&nbsp;by&nbsp;what&nbsp;looks&nbsp;like&nbsp;a&nbsp;form&nbsp;feed,&nbsp;and&nbsp;another&nbsp;prompt&nbsp;is&nbsp;printed.&nbsp;So&nbsp;far&nbsp;I&nbsp;can&#39;t&nbsp;find&nbsp;where&nbsp;in&nbsp;the&nbsp;code&nbsp;this&nbsp;happens.&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;print&nbsp;a&nbsp;message&nbsp;and&nbsp;not&nbsp;have&nbsp;it&nbsp;scrolled&nbsp;off&nbsp;the&nbsp;screen?&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;Thanks,&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;Peter.&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
