<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;Hi&nbsp;guys,&nbsp;i&nbsp;start&nbsp;to&nbsp;play&nbsp;with&nbsp;Twisted.&nbsp;My&nbsp;main&nbsp;intention&nbsp;is&nbsp;to&nbsp;create&nbsp;a&nbsp;add-on&nbsp;for&nbsp;run&nbsp;in&nbsp;a&nbsp;Raspberry&nbsp;Pi&nbsp;(Raspbmc).&nbsp;For&nbsp;now&nbsp;almost&nbsp;every&nbsp;thing&nbsp;is&nbsp;working&nbsp;fine.&lt;div&gt;Here&nbsp;is&nbsp;the&nbsp;link&nbsp;of&nbsp;the&nbsp;add-on&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://dl.dropboxusercontent.com/u/89557567/script.cavplustcp-0.1.4.zip&quot;&nbsp;target=&quot;_blank&quot;&gt;https://dl.dropboxusercontent.com/u/89557567/script.cavplustcp-0.1.4.zip&lt;/a&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;only&nbsp;problem&nbsp;is&nbsp;that&nbsp;the&nbsp;Xbmc&nbsp;(running&nbsp;in&nbsp;a&nbsp;Raspbmc)&nbsp;never&nbsp;close&nbsp;if&nbsp;i&nbsp;have&nbsp;Twisted&nbsp;running.&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;default.py&nbsp;i&nbsp;have&nbsp;a&nbsp;function&nbsp;that&nbsp;will&nbsp;run&nbsp;after&nbsp;the&nbsp;Xbmc&nbsp;abort&nbsp;request.&nbsp;&lt;/div&gt;&lt;div&gt;&lt;div&gt;def&nbsp;_killConnections(self):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(self.server1):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.server1.stopListening()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(self.server2):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.server2.stopListening()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(self.client1):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.client1.disconnect()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(self.client2):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.client2.disconnect()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protocol.transport.loseConnection()&nbsp;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xbmc.log(msg=&quot;reactor&nbsp;stop&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reactor.stop()&lt;/div&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tested&nbsp;in&nbsp;a&nbsp;Windows&nbsp;7&nbsp;and&nbsp;works&nbsp;fine,&nbsp;the&nbsp;script&nbsp;close&nbsp;the&nbsp;connections&nbsp;and&nbsp;then&nbsp;the&nbsp;Xbmc&nbsp;close.&nbsp;If&nbsp;i&nbsp;remove&nbsp;this&nbsp;function&nbsp;the&nbsp;Xbmc&nbsp;will&nbsp;never&nbsp;close.&lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;is&nbsp;with&nbsp;this&nbsp;script&nbsp;running&nbsp;in&nbsp;a&nbsp;linux&nbsp;OS.&nbsp;The&nbsp;Xbmc&nbsp;try&nbsp;to&nbsp;close&nbsp;the&nbsp;script,&nbsp;but&nbsp;don´t&nbsp;work,&nbsp;so&nbsp;the&nbsp;Xbmc&nbsp;will&nbsp;freeze.&lt;/div&gt;&lt;div&gt;Can&nbsp;you&nbsp;guys&nbsp;help&nbsp;me&nbsp;?&lt;/div&gt;&lt;div&gt;Thanks&lt;/div&gt;&lt;div&gt;Regards&lt;/div&gt;&lt;div&gt;Clayton&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
