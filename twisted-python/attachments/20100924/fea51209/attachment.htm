<tt>
I&nbsp;think&nbsp;that&nbsp;you&nbsp;should&nbsp;not&nbsp;put&nbsp;the&nbsp;sys.exit(1)&nbsp;call,&nbsp;after&nbsp;the&nbsp;reactor.stop()&nbsp;call.&lt;br&gt;From&nbsp;my&nbsp;very&nbsp;limited&nbsp;understanding&nbsp;of&nbsp;how&nbsp;Twisted&nbsp;reactor&nbsp;works,&nbsp;it&nbsp;could&nbsp;be&nbsp;done&nbsp;with&nbsp;something&nbsp;like:&lt;br&gt;&lt;br&gt;   &nbsp;statusCode&nbsp;=&nbsp;1&nbsp;#or&nbsp;whatever&lt;br&gt;<br>
   &nbsp;reactor.stop()&lt;br&gt;&lt;br&gt;in&nbsp;the&nbsp;method&nbsp;that&nbsp;stops&nbsp;the&nbsp;reactor&lt;br&gt;&lt;br&gt;and&nbsp;the&nbsp;exit&nbsp;call&nbsp;should&nbsp;be&nbsp;added&nbsp;where&nbsp;(after)&nbsp;the&nbsp;reactor&nbsp;is&nbsp;started:&lt;br&gt;&lt;br&gt; &nbsp; &nbsp;reactor.run()&lt;br&gt;   &nbsp;#&nbsp;this&nbsp;will&nbsp;be&nbsp;executed&nbsp;after&nbsp;reactor&nbsp;stops&lt;br&gt;<br>
   &nbsp;sys.exit(statusCode)&lt;br&gt;&lt;br&gt;Please,&nbsp;correct&nbsp;me&nbsp;if&nbsp;I&nbsp;write&nbsp;nonsense&nbsp;here.&nbsp;&lt;br&gt;&lt;br&gt;Pandelis&nbsp;Theodosiou&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Sep&nbsp;24,&nbsp;2010&nbsp;at&nbsp;4:49&nbsp;AM,&nbsp;David&nbsp;Cournapeau&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:cournape@gmail.com&quot;&gt;cournape@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;a&nbsp;program&nbsp;run&nbsp;through&nbsp;twistd,&nbsp;and&nbsp;would&nbsp;like&nbsp;to&nbsp;exit&nbsp;with&nbsp;a&nbsp;non&lt;br&gt;<br>
zero&nbsp;status&nbsp;code&nbsp;on&nbsp;some&nbsp;error.&nbsp;I&nbsp;have&nbsp;a&nbsp;callback&nbsp;which&nbsp;stops&nbsp;the&lt;br&gt;<br>
reactor&nbsp;and&nbsp;then&nbsp;sys.exit(some_value),&nbsp;but&nbsp;twistd&nbsp;still&nbsp;seems&nbsp;to&nbsp;catch&lt;br&gt;<br>
the&nbsp;SystemExit&nbsp;exception&nbsp;after&nbsp;calling&nbsp;for&nbsp;reactor.stop():&lt;br&gt;<br>
&lt;br&gt;<br>
Unhandled&nbsp;error&nbsp;in&nbsp;Deferred:&lt;br&gt;<br>
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;<br>
&nbsp; File&nbsp;&amp;quot;/home/david/local/lib/python2.6/site-packages/twisted/internet/base.py&amp;quot;,&lt;br&gt;<br>
line&nbsp;1031,&nbsp;in&nbsp;connectionFailed&lt;br&gt;<br>
&nbsp; &nbsp; self.factory.clientConnectionFailed(self,&nbsp;reason)&lt;br&gt;<br>
&nbsp; File&nbsp;&amp;quot;/home/david/local/lib/python2.6/site-packages/twisted/web/client.py&amp;quot;,&lt;br&gt;<br>
line&nbsp;350,&nbsp;in&nbsp;clientConnectionFailed&lt;br&gt;<br>
&nbsp; &nbsp; self.deferred.errback(reason)&lt;br&gt;<br>
&nbsp; File&nbsp;&amp;quot;/home/david/local/lib/python2.6/site-packages/twisted/internet/defer.py&amp;quot;,&lt;br&gt;<br>
line&nbsp;307,&nbsp;in&nbsp;errback&lt;br&gt;<br>
&nbsp; &nbsp; self._startRunCallbacks(fail)&lt;br&gt;<br>
&nbsp; File&nbsp;&amp;quot;/home/david/local/lib/python2.6/site-packages/twisted/internet/defer.py&amp;quot;,&lt;br&gt;<br>
line&nbsp;354,&nbsp;in&nbsp;_startRunCallbacks&lt;br&gt;<br>
&nbsp; &nbsp; self._runCallbacks()&lt;br&gt;<br>
---&nbsp;&amp;lt;exception&nbsp;caught&nbsp;here&amp;gt;&nbsp;---&lt;br&gt;<br>
&nbsp; File&nbsp;&amp;quot;/home/david/local/lib/python2.6/site-packages/twisted/internet/defer.py&amp;quot;,&lt;br&gt;<br>
line&nbsp;371,&nbsp;in&nbsp;_runCallbacks&lt;br&gt;<br>
&nbsp; &nbsp; self.result&nbsp;=&nbsp;callback(self.result,&nbsp;*args,&nbsp;**kw)&lt;br&gt;<br>
&nbsp; File&nbsp;&amp;quot;scripts/tests/run_tests.py&amp;quot;,&nbsp;line&nbsp;69,&nbsp;in&nbsp;exit_on_error&lt;br&gt;<br>
&nbsp; &nbsp; sys.exit(1)&lt;br&gt;<br>
exceptions.SystemExit:&nbsp;1&lt;br&gt;<br>
&lt;br&gt;<br>
What&amp;#39;s&nbsp;the&nbsp;correct&nbsp;way&nbsp;of&nbsp;doing&nbsp;this&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
cheers,&lt;br&gt;<br>
&lt;br&gt;<br>
David&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;visibility:&nbsp;hidden;&nbsp;display:&nbsp;inline;&quot;&nbsp;id=&quot;avg_ls_inline_popup&quot;&gt;&lt;/div&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;#avg_ls_inline_popup&nbsp;{&nbsp;&nbsp;position:absolute;&nbsp;&nbsp;z-index:9999;&nbsp;&nbsp;padding:&nbsp;0px&nbsp;0px;&nbsp;&nbsp;margin-left:&nbsp;0px;&nbsp;&nbsp;margin-top:&nbsp;0px;&nbsp;&nbsp;width:&nbsp;240px;&nbsp;&nbsp;overflow:&nbsp;hidden;&nbsp;&nbsp;word-wrap:&nbsp;break-word;&nbsp;&nbsp;color:&nbsp;black;&nbsp;&nbsp;font-size:&nbsp;10px;&nbsp;&nbsp;text-align:&nbsp;left;&nbsp;&nbsp;line-height:&nbsp;13px;}&lt;/style&gt;<br>

</tt>
