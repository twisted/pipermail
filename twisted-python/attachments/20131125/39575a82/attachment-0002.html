<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;div&gt;Hello,&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;write&nbsp;an&nbsp;IMAP&nbsp;proxy&nbsp;to&nbsp;modify&nbsp;headers&nbsp;and&nbsp;the&nbsp;body&nbsp;of&nbsp;an&nbsp;incoming&nbsp;message&nbsp;using&nbsp;twisted.&nbsp;&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;python&nbsp;and&nbsp;twisted&nbsp;so&nbsp;maybe&nbsp;this&nbsp;is&nbsp;why&nbsp;I&nbsp;either&nbsp;picked&nbsp;the&nbsp;wrong&nbsp;route&nbsp;or&nbsp;don't&nbsp;have&nbsp;the&nbsp;skills&nbsp;to&nbsp;get&nbsp;through&nbsp;some&nbsp;issues&nbsp;and&nbsp;I'm&nbsp;hoping&nbsp;that&nbsp;some&nbsp;you&nbsp;fine&nbsp;list&nbsp;members&nbsp;can&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right&nbsp;direction.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;16px;&nbsp;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;background-color:&nbsp;transparent;&nbsp;font-style:&nbsp;normal;&quot;&gt;I&nbsp;started&nbsp;by&nbsp;using&nbsp;the&nbsp;IMAP4Client&nbsp;and&nbsp;IMAP4Server&nbsp;to&nbsp;do&nbsp;the&nbsp;proxying.&nbsp;&nbsp;However,&nbsp;I&nbsp;realized&nbsp;that&nbsp;in&nbsp;certain&nbsp;cases,&nbsp;the&nbsp;IMAP4Server&nbsp;requires&nbsp;synchronous&nbsp;results&nbsp;but&nbsp;since&nbsp;I&nbsp;need&nbsp;to&nbsp;do&nbsp;an&nbsp;async&nbsp;call&nbsp;using&nbsp;the&nbsp;client&nbsp;the&nbsp;handling&nbsp;is&nbsp;not&nbsp;working&nbsp;properly.&nbsp;&nbsp;I&nbsp;ran&nbsp;into&nbsp;this&nbsp;when&nbsp;implementing&nbsp;getFlags()<br>
&nbsp;in&nbsp;the&nbsp;IMessage&nbsp;and&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how&nbsp;I&nbsp;can&nbsp;get&nbsp;out&nbsp;of&nbsp;this&nbsp;short&nbsp;of&nbsp;changing&nbsp;the&nbsp;IMAP4Server&nbsp;code&nbsp;to&nbsp;handle&nbsp;Deferreds.&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;16px;&nbsp;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;background-color:&nbsp;transparent;&nbsp;font-style:&nbsp;normal;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;16px;&nbsp;font-family:&nbsp;'times&nbsp;new&nbsp;roman',&nbsp;'new&nbsp;york',&nbsp;times,&nbsp;serif;&nbsp;background-color:&nbsp;transparent;&nbsp;font-style:&nbsp;normal;&quot;&gt;Am&nbsp;I&nbsp;on&nbsp;the&nbsp;right&nbsp;track?&nbsp;&nbsp;Is&nbsp;imap4&nbsp;lib&nbsp;the&nbsp;right&nbsp;tool&nbsp;for&nbsp;this&nbsp;job?&nbsp;&nbsp;If&nbsp;so,&nbsp;is&nbsp;modifying&nbsp;IMAP4Server&nbsp;to&nbsp;handle&nbsp;Deferreds&nbsp;the&nbsp;right&nbsp;thing&nbsp;to&nbsp;do?&nbsp;&nbsp;If&nbsp;not,&nbsp;what&nbsp;would&nbsp;you&nbsp;recommend?&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
