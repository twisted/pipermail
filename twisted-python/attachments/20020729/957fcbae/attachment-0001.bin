--- foo/Twisted-0.19.0/twisted/web/static.py	2002-06-29 04:28:21.000000000 +0300
+++ current/twisted/web/static.py	2002-07-29 00:08:09.000000000 +0300
@@ -153,14 +153,20 @@
         self.path = path
         # Remove the dots from the path to split
         p = os.path.abspath(path)
+        ext = None
         p, ext = os.path.splitext(p)
-        self.encoding = self.contentEncodings.get(string.lower(ext))
-        # if there was an encoding, get the next suffix
-        if self.encoding is not None:
-            p, ext = os.path.splitext(p)
-        self.defaultType = defaultType
-        self.allowExt = allowExt
-        self.type = self.contentTypes.get(string.lower(ext), defaultType)
+        if ext is not None:
+            self.encoding = self.contentEncodings.get(string.lower(ext))
+            # if there was an encoding, get the next suffix
+            if self.encoding is not None:
+                p, ext = os.path.splitext(p)
+            self.defaultType = "application/octet-stream"
+            self.allowExt = allowExt
+            self.type = self.contentTypes.get(string.lower(ext), defaultType)
+        else:
+            self.defaultType = "text/html"
+            self.allowExt = allowExt
+            self.type = self.defaultType
 
     def getChild(self, path, request):
         """See twisted.web.Resource.getChild.
