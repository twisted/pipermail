<tt>
It&nbsp;just&nbsp;doesn&#39;t&nbsp;want&nbsp;to&nbsp;go&nbsp;past&nbsp;PASV.&nbsp;Spent&nbsp;past&nbsp;3&nbsp;hours&nbsp;trying&nbsp;to&nbsp;figure&nbsp;this&nbsp;one&nbsp;out.&nbsp;Any&nbsp;help&nbsp;is&nbsp;appreciated.&lt;br&gt;&lt;br&gt;&lt;br&gt;Log:&lt;br&gt;&lt;br&gt;2009-09-17&nbsp;16:26:56-0700&nbsp;[-]&nbsp;Log&nbsp;opened.&lt;br&gt;2009-09-17&nbsp;16:26:56-0700&nbsp;[-]&nbsp;twisted.protocols.ftp.FTPFactory&nbsp;starting&nbsp;on&nbsp;*****&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:26:56-0700&nbsp;[-]&nbsp;Starting&nbsp;factory&nbsp;&lt;twisted.protocols.ftp.FTPFactory&nbsp;instance&nbsp;at&nbsp;0x2b3a031037a0&gt;&lt;br&gt;2009-09-17&nbsp;16:26:59-0700&nbsp;[twisted.protocols.ftp.FTPFactory]&nbsp;client&nbsp;connected&lt;br&gt;2009-09-17&nbsp;16:26:59-0700&nbsp;[twisted.protocols.ftp.FTPFactory]&nbsp;--&gt;&nbsp;220&nbsp;Twisted&nbsp;8.2.0&nbsp;FTP&nbsp;Server&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;&lt;--&nbsp;USER&nbsp;fnet&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;--&gt;&nbsp;331&nbsp;Password&nbsp;required&nbsp;for&nbsp;fnet.&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;&lt;--&nbsp;PASS&nbsp;*****&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;--&gt;&nbsp;230&nbsp;User&nbsp;logged&nbsp;in,&nbsp;proceed&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;&lt;--&nbsp;TYPE&nbsp;A&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;--&gt;&nbsp;200&nbsp;Type&nbsp;set&nbsp;to&nbsp;A.&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;&lt;--&nbsp;SYST&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;--&gt;&nbsp;215&nbsp;UNIX&nbsp;Type:&nbsp;L8&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;&lt;--&nbsp;PWD&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;--&gt;&nbsp;257&nbsp;&quot;/&quot;&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;&lt;--&nbsp;PASV&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;DTPFactory.setTimeout&nbsp;set&nbsp;to&nbsp;10&nbsp;seconds&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;twisted.protocols.ftp.DTPFactory&nbsp;starting&nbsp;on&nbsp;38637&lt;br&gt;2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;Starting&nbsp;factory&nbsp;&lt;twisted.protocols.ftp.DTPFactory&nbsp;instance&nbsp;at&nbsp;0x2b3a0544a170&gt;&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:00-0700&nbsp;[ProtocolWrapper,0,24.43.31.21]&nbsp;--&gt;&nbsp;227&nbsp;Entering&nbsp;Passive&nbsp;Mode&nbsp;(65,61,232,130,150,237).&lt;br&gt;2009-09-17&nbsp;16:27:10-0700&nbsp;[-]&nbsp;timed&nbsp;out&nbsp;waiting&nbsp;for&nbsp;DTP&nbsp;connection&lt;br&gt;2009-09-17&nbsp;16:27:10-0700&nbsp;[-]&nbsp;Unexpected&nbsp;FTP&nbsp;error&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:10-0700&nbsp;[-]&nbsp;Unhandled&nbsp;Error&lt;br&gt;   &nbsp;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;   &nbsp;Failure:&nbsp;twisted.internet.defer.TimeoutError:&nbsp;&lt;br&gt;   &nbsp;&lt;br&gt;2009-09-17&nbsp;16:27:10-0700&nbsp;[-]&nbsp;--&gt;&nbsp;550&nbsp;Requested&nbsp;action&nbsp;not&nbsp;taken:&nbsp;internal&nbsp;server&nbsp;error&lt;br&gt;<br>
<br>
2009-09-17&nbsp;16:27:10-0700&nbsp;[-]&nbsp;dtpFactory.stopFactory&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Code:&lt;br&gt;&lt;br&gt;from&nbsp;twisted.protocols.ftp&nbsp;import&nbsp;FTPFactory,&nbsp;FTPRealm,&nbsp;FTP&lt;br&gt;from&nbsp;twisted.cred.portal&nbsp;import&nbsp;Portal&lt;br&gt;from&nbsp;twisted.cred.checkers&nbsp;import&nbsp;FilePasswordDB&lt;br&gt;<br>
<br>
from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.python&nbsp;import&nbsp;log&lt;br&gt;import&nbsp;sys&lt;br&gt;&lt;br&gt;log.startLogging(sys.stdout)&lt;br&gt;&lt;br&gt;class&nbsp;bcFTPProtocol(FTP):&lt;br&gt;   &nbsp;def&nbsp;connectionMade(self):&lt;br&gt;   &nbsp;   &nbsp;log.msg(&quot;client&nbsp;connected&quot;)&lt;br&gt;<br>
<br>
   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;   &nbsp;FTP.connectionMade(self)&lt;br&gt;   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;def&nbsp;lineReceived(self,&nbsp;line):&lt;br&gt;   &nbsp;   &nbsp;log.msg(&quot;&lt;--&nbsp;&quot;&nbsp;+&nbsp;line)&lt;br&gt;   &nbsp;   &nbsp;FTP.lineReceived(self,&nbsp;line)&lt;br&gt;   &nbsp;   &nbsp;&lt;br&gt;   &nbsp;def&nbsp;sendLine(self,&nbsp;msg):&lt;br&gt;<br>
<br>
   &nbsp;   &nbsp;log.msg(&quot;--&gt;&nbsp;&quot;&nbsp;+&nbsp;msg)&lt;br&gt;   &nbsp;   &nbsp;FTP.sendLine(self,&nbsp;msg)&lt;br&gt;&lt;br&gt;ftp_portal&nbsp;=&nbsp;Portal(FTPRealm(&#39;data/&#39;),&nbsp;[FilePasswordDB(&quot;ftp.users&quot;)])&lt;br&gt;ftp_factory&nbsp;=&nbsp;FTPFactory(ftp_portal)&lt;br&gt;ftp_factory.protocol&nbsp;=&nbsp;bcFTPProtocol&lt;br&gt;<br>
<br>
&lt;br&gt;reactor.listenTCP(*****,&nbsp;ftp_factory)&lt;br&gt;reactor.run()&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;Thank&nbsp;you,&lt;br&gt;&lt;br&gt;Slava&nbsp;Yanson&lt;br&gt;Positive&nbsp;Blue,&nbsp;LLC&lt;br&gt;&lt;br&gt;web:&nbsp;&lt;a&nbsp;href=&quot;http://www.positiveblue.com&quot;&gt;www.positiveblue.com&lt;/a&gt;&lt;br&gt;<br>
<br>
tel:&nbsp;(323)&nbsp;963-4787&lt;br&gt;aim/yahoo/skype:&nbsp;urbansoot&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.LinuxDecals.com/&quot;&gt;http://www.LinuxDecals.com/&lt;/a&gt;&lt;br&gt;<br>

</tt>
