<tt>
Thanks&nbsp;for&nbsp;the&nbsp;reply.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Very&nbsp;helpful.&nbsp;despite&nbsp;the&nbsp;question&nbsp;being&nbsp;like&nbsp;&#39;How&nbsp;long&nbsp;is&nbsp;a&nbsp;piece&nbsp;of&nbsp;string&#39;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&#39;s&nbsp;good&nbsp;to&nbsp;just&nbsp;hear&nbsp;what&nbsp;someone&nbsp;else&nbsp;reckons&nbsp;is&nbsp;the&nbsp;way&nbsp;to&nbsp;structure&nbsp;the&nbsp;code.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;like&nbsp;the&nbsp;code&nbsp;sample.It&nbsp;makes&nbsp;clearer&nbsp;what&nbsp;some&nbsp;of&nbsp;my&nbsp;options&nbsp;are.&nbsp;So&nbsp;I&#39;ll&nbsp;have&nbsp;a&nbsp;look&nbsp;and&nbsp;see&nbsp;how&nbsp;I&nbsp;can&nbsp;make&nbsp;use&nbsp;of&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;once&nbsp;again.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;John&nbsp;Aherne&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Jan&nbsp;2,&nbsp;2009&nbsp;at&nbsp;3:59&nbsp;PM,&nbsp;Jean-Paul&nbsp;Calderone&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@divmod.com&quot;&gt;exarkun@divmod.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;On&nbsp;Fri,&nbsp;2&nbsp;Jan&nbsp;2009&nbsp;10:14:40&nbsp;+0000,&nbsp;John&nbsp;Aherne&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:johnaherne@rocs.co.uk&quot;&nbsp;target=&quot;_blank&quot;&gt;johnaherne@rocs.co.uk&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
One&nbsp;thing&nbsp;that&nbsp;has&nbsp;been&nbsp;puzzling&nbsp;me&nbsp;is&nbsp;where&nbsp;is&nbsp;the&nbsp;best&nbsp;place&nbsp;to&nbsp;put&lt;br&gt;<br>
application&nbsp;code.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
It&nbsp;depends.&nbsp;:)&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
The&nbsp;case&nbsp;I&nbsp;am&nbsp;using&nbsp;is&nbsp;straightforward&nbsp;TCP&nbsp;server&nbsp;with&nbsp;client&nbsp;connections&lt;br&gt;<br>
making&nbsp;simple&nbsp;requests&nbsp;and&nbsp;waiting&nbsp;for&nbsp;responses&nbsp;retrieved&nbsp;from&nbsp;database&lt;br&gt;<br>
tables&nbsp;to&nbsp;be&nbsp;sent&nbsp;back.&lt;br&gt;<br>
&lt;br&gt;<br>
Reading&nbsp;the&nbsp;docs&nbsp;and&nbsp;looking&nbsp;at&nbsp;various&nbsp;examples&nbsp;provided&nbsp;in&nbsp;books&nbsp;and&lt;br&gt;<br>
documentation&nbsp;has&nbsp;left&nbsp;me&nbsp;a&nbsp;bit&nbsp;confused.&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;a&nbsp;best&nbsp;practice&nbsp;for&nbsp;where&nbsp;application&nbsp;code&nbsp;should&nbsp;go&nbsp;-&nbsp;either&nbsp;the&lt;br&gt;<br>
protcocol&nbsp;class&nbsp;or&nbsp;the&nbsp;factory&nbsp;class&nbsp;or&nbsp;somewhere&nbsp;else.&nbsp;Does&nbsp;it&nbsp;actually&lt;br&gt;<br>
matter.&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;any&nbsp;downside&nbsp;to&nbsp;putting&nbsp;application&nbsp;code&nbsp;in&nbsp;the&nbsp;protocol&nbsp;or&lt;br&gt;<br>
factory.&nbsp;What&nbsp;pitfalls&nbsp;are&nbsp;there&nbsp;for&nbsp;either&nbsp;approach.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Best&nbsp;practice&nbsp;for&nbsp;a&nbsp;Protocol&nbsp;class&nbsp;is&nbsp;to&nbsp;include&nbsp;code&nbsp;which&nbsp;is&nbsp;necessary&lt;br&gt;<br>
to&nbsp;interpret&nbsp;bytes&nbsp;which&nbsp;are&nbsp;received&nbsp;and&nbsp;turn&nbsp;them&nbsp;into&nbsp;a&nbsp;structured&nbsp;form&lt;br&gt;<br>
which&nbsp;is&nbsp;easier&nbsp;to&nbsp;deal&nbsp;with;&nbsp;code&nbsp;which&nbsp;starts&nbsp;from&nbsp;some&nbsp;structured&nbsp;form&lt;br&gt;<br>
and&nbsp;emits&nbsp;bytes&nbsp;to&nbsp;be&nbsp;sent&nbsp;should&nbsp;also&nbsp;be&nbsp;part&nbsp;of&nbsp;a&nbsp;Protocol&nbsp;class.&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;is&nbsp;common&nbsp;practice&nbsp;to&nbsp;have&nbsp;a&nbsp;class&nbsp;which&nbsp;includes&nbsp;just&nbsp;these&nbsp;things&nbsp;and&lt;br&gt;<br>
then&nbsp;a&nbsp;subclass&nbsp;which&nbsp;adds&nbsp;application-specific&nbsp;logic&nbsp;based&nbsp;on&nbsp;top&nbsp;of&nbsp;this&lt;br&gt;<br>
functionality.&nbsp;&nbsp;It&nbsp;is&nbsp;also&nbsp;common&nbsp;practice&nbsp;to&nbsp;connect&nbsp;a&nbsp;protocol&nbsp;which&nbsp;has&lt;br&gt;<br>
only&nbsp;these&nbsp;things,&nbsp;no&nbsp;application-specific&nbsp;code,&nbsp;and&nbsp;then&nbsp;have&nbsp;application&lt;br&gt;<br>
code&nbsp;elsewhere&nbsp;(in&nbsp;a&nbsp;free&nbsp;function,&nbsp;a&nbsp;method&nbsp;of&nbsp;a&nbsp;factory,&nbsp;another&nbsp;class&#39;s&lt;br&gt;<br>
method,&nbsp;user&nbsp;input,&nbsp;etc)&nbsp;make&nbsp;calls&nbsp;onto&nbsp;it.&nbsp;&nbsp;Which&nbsp;of&nbsp;these&nbsp;approaches&nbsp;is&lt;br&gt;<br>
most&nbsp;well&nbsp;suited&nbsp;to&nbsp;a&nbsp;particular&nbsp;application&nbsp;depends.&nbsp;&nbsp;For&nbsp;example,&nbsp;if&nbsp;the&nbsp;application&nbsp;code&nbsp;creates&nbsp;multiple&nbsp;connections&nbsp;with&nbsp;shared&nbsp;state&nbsp;adding&nbsp;the&nbsp;application&nbsp;logic&nbsp;to&nbsp;a&nbsp;Protocol&nbsp;subclass&nbsp;isn&#39;t&nbsp;a&nbsp;good&nbsp;approach.&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;see&nbsp;examples&nbsp;where&nbsp;application&nbsp;code&nbsp;appears&nbsp;in&nbsp;both&nbsp;classes,&nbsp;but&nbsp;the&lt;br&gt;<br>
examples&nbsp;are&nbsp;very&nbsp;small&nbsp;so&nbsp;may&nbsp;not&nbsp;be&nbsp;indicative&nbsp;of&nbsp;what&nbsp;should&nbsp;be&nbsp;done.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Generally&nbsp;they&#39;re&nbsp;so&nbsp;small&nbsp;that&nbsp;there&#39;s&nbsp;no&nbsp;advantage&nbsp;to&nbsp;any&nbsp;approach&nbsp;over&lt;br&gt;<br>
any&nbsp;other,&nbsp;yes.&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
In&nbsp;the&nbsp;docs&nbsp;I&nbsp;see&nbsp;reference&nbsp;to&nbsp;most&nbsp;of&nbsp;the&nbsp;code&nbsp;will&nbsp;be&nbsp;written&nbsp;in&nbsp;the&lt;br&gt;<br>
protocol&nbsp;class,&nbsp;but&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;referring&nbsp;to&nbsp;actually&nbsp;writing&nbsp;protocols&lt;br&gt;<br>
not&nbsp;application&nbsp;code.&nbsp;It&nbsp;also&nbsp;says&nbsp;that&nbsp;when&nbsp;the&nbsp;protocol&nbsp;needs&nbsp;to&nbsp;call&lt;br&gt;<br>
application&nbsp;code&nbsp;to&nbsp;make&nbsp;it&nbsp;a&nbsp;method&nbsp;call&nbsp;-&nbsp;&nbsp;not&nbsp;to&nbsp;mix&nbsp;protocol&nbsp;and&lt;br&gt;<br>
application&nbsp;code.&nbsp;This&nbsp;could&nbsp;just&nbsp;mean&nbsp;creating&nbsp;some&nbsp;methods&nbsp;in&nbsp;the&nbsp;protocol&lt;br&gt;<br>
class&nbsp;to&nbsp;handle&nbsp;the&nbsp;task.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Consider&nbsp;all&nbsp;of&nbsp;the&nbsp;code&nbsp;you&nbsp;write&nbsp;to&nbsp;be&nbsp;part&nbsp;of&nbsp;a&nbsp;library&nbsp;you&#39;re&nbsp;developing.&lt;br&gt;<br>
If&nbsp;you&nbsp;implement&nbsp;a&nbsp;protocol,&nbsp;then&nbsp;you&#39;ve&nbsp;just&nbsp;written&nbsp;part&nbsp;of&nbsp;a&nbsp;library&nbsp;which&lt;br&gt;<br>
provides&nbsp;a&nbsp;slightly&nbsp;higher-level&nbsp;API&nbsp;for&nbsp;interacting&nbsp;with&nbsp;the&nbsp;network&nbsp;in&nbsp;some&lt;br&gt;<br>
way.&nbsp;&nbsp;With&nbsp;that&nbsp;in&nbsp;hand,&nbsp;you&nbsp;can&nbsp;move&nbsp;on&nbsp;to&nbsp;some&nbsp;other&nbsp;part&nbsp;of&nbsp;your&nbsp;library&lt;br&gt;<br>
which&nbsp;uses&nbsp;that&nbsp;higher-level&nbsp;API&nbsp;to&nbsp;accomplish&nbsp;something&nbsp;even&nbsp;higher-level,&lt;br&gt;<br>
perhaps&nbsp;presenting&nbsp;yet&nbsp;another&nbsp;API&nbsp;to&nbsp;some&nbsp;other&nbsp;part&nbsp;of&nbsp;your&nbsp;application&lt;br&gt;<br>
which&nbsp;is&nbsp;higher-level&nbsp;still.&nbsp;&nbsp;The&nbsp;motivation&nbsp;to&nbsp;not&nbsp;mix&nbsp;protocol&nbsp;and&lt;br&gt;<br>
application&nbsp;code&nbsp;is&nbsp;just&nbsp;the&nbsp;motivation&nbsp;to&nbsp;have&nbsp;clear&nbsp;boundaries&nbsp;in&nbsp;your&lt;br&gt;<br>
library&nbsp;to&nbsp;make&nbsp;as&nbsp;much&nbsp;of&nbsp;it&nbsp;reusable&nbsp;as&nbsp;possible.&nbsp;&nbsp;If&nbsp;you&nbsp;have&nbsp;a&nbsp;protocol&lt;br&gt;<br>
implementation&nbsp;mixed&nbsp;together&nbsp;with&nbsp;application&nbsp;A,&nbsp;when&nbsp;you&nbsp;come&nbsp;along&nbsp;to&lt;br&gt;<br>
write&nbsp;application&nbsp;B&nbsp;which&nbsp;needs&nbsp;to&nbsp;use&nbsp;the&nbsp;same&nbsp;protocol,&nbsp;you&#39;ll&nbsp;have&nbsp;to&lt;br&gt;<br>
re-implement&nbsp;the&nbsp;protocol,&nbsp;or&nbsp;refactor&nbsp;your&nbsp;original&nbsp;implementation&nbsp;to&nbsp;move&lt;br&gt;<br>
the&nbsp;application&nbsp;A&nbsp;code&nbsp;elsewhere&nbsp;(of&nbsp;course,&nbsp;there&#39;s&nbsp;nothing&nbsp;wrong&nbsp;with&lt;br&gt;<br>
having&nbsp;to&nbsp;refactor&nbsp;your&nbsp;code&nbsp;-&nbsp;it&#39;s&nbsp;a&nbsp;common&nbsp;part&nbsp;of&nbsp;programming,&nbsp;and&nbsp;since&lt;br&gt;<br>
it&#39;s&nbsp;very&nbsp;difficult&nbsp;to&nbsp;predict&nbsp;the&nbsp;future,&nbsp;it&#39;s&nbsp;often&nbsp;best&nbsp;*not*&nbsp;to&nbsp;try&nbsp;to&lt;br&gt;<br>
anticipate&nbsp;your&nbsp;future&nbsp;requirements&nbsp;when&nbsp;writing&nbsp;code&nbsp;-&nbsp;just&nbsp;write&nbsp;what&nbsp;works&lt;br&gt;<br>
and&nbsp;is&nbsp;easily&nbsp;testable,&nbsp;and&nbsp;when&nbsp;your&nbsp;future&nbsp;requirements&nbsp;come&nbsp;along,&nbsp;deal&lt;br&gt;<br>
with&nbsp;them&nbsp;then;&nbsp;as&nbsp;you&nbsp;do&nbsp;this&nbsp;more&nbsp;and&nbsp;more,&nbsp;you&#39;ll&nbsp;probably&nbsp;get&nbsp;a&nbsp;sense&nbsp;of&lt;br&gt;<br>
how&nbsp;to&nbsp;structure&nbsp;your&nbsp;code&nbsp;to&nbsp;minimize&nbsp;the&nbsp;effort&nbsp;required&nbsp;for&nbsp;refactoring,&lt;br&gt;<br>
but&nbsp;aside&nbsp;from&nbsp;experience&nbsp;with&nbsp;this&nbsp;process,&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;of&nbsp;any&nbsp;way&nbsp;to&nbsp;learn&lt;br&gt;<br>
this&nbsp;skill).&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
However,&nbsp;if&nbsp;the&nbsp;application&nbsp;code&nbsp;needs&nbsp;to&nbsp;run&nbsp;for&nbsp;10-12&nbsp;seconds&nbsp;looking&nbsp;up&lt;br&gt;<br>
database&nbsp;tables&nbsp;and&nbsp;accumulating&nbsp;results&nbsp;and&nbsp;waiting&nbsp;on&nbsp;&nbsp;deferreds,&nbsp;should&lt;br&gt;<br>
all&nbsp;this&nbsp;code&nbsp;reside&nbsp;in&nbsp;the&nbsp;protocol&nbsp;class&nbsp;or&nbsp;the&nbsp;factory.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
I&nbsp;wouldn&#39;t&nbsp;take&nbsp;the&nbsp;duration&nbsp;of&nbsp;the&nbsp;task&nbsp;into&nbsp;consideration&nbsp;when&nbsp;trying&nbsp;to&lt;br&gt;<br>
decide&nbsp;where&nbsp;to&nbsp;put&nbsp;it.&nbsp;&nbsp;I&#39;d&nbsp;consider&nbsp;reusability,&nbsp;testability,&nbsp;simplicity,&lt;br&gt;<br>
and&nbsp;correctness.&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
If&nbsp;I&nbsp;keep&nbsp;it&nbsp;in&nbsp;the&nbsp;protocol,&nbsp;then&nbsp;I&nbsp;already&nbsp;have&nbsp;my&nbsp;client&nbsp;connection&nbsp;to&lt;br&gt;<br>
write&nbsp;back&nbsp;to.&nbsp;So&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;place&nbsp;to&nbsp;keep&nbsp;the&nbsp;code.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;I&nbsp;put&nbsp;the&nbsp;code&nbsp;in&nbsp;the&nbsp;factory,&nbsp;then&nbsp;I&nbsp;need&nbsp;to&nbsp;pass&nbsp;the&nbsp;client&nbsp;connection&lt;br&gt;<br>
so&nbsp;it&nbsp;can&nbsp;write&nbsp;back&nbsp;to&nbsp;the&nbsp;client.&nbsp;Or&nbsp;is&nbsp;there&nbsp;another&nbsp;way&nbsp;of&nbsp;doing&nbsp;this&nbsp;I&lt;br&gt;<br>
have&nbsp;missed.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
This&nbsp;isn&#39;t&nbsp;much&nbsp;different&nbsp;from&nbsp;the&nbsp;trade-off&nbsp;you&nbsp;have&nbsp;to&nbsp;consider&nbsp;when&nbsp;you&lt;br&gt;<br>
decide&nbsp;to&nbsp;implement&nbsp;anything&nbsp;as&nbsp;two&nbsp;classes&nbsp;instead&nbsp;of&nbsp;one.&nbsp;&nbsp;Since&nbsp;you&nbsp;can&lt;br&gt;<br>
no&nbsp;longer&nbsp;just&nbsp;use&nbsp;`self´&nbsp;everywhere,&nbsp;you&#39;ll&nbsp;have&nbsp;to&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;get&lt;br&gt;<br>
a&nbsp;reference&nbsp;to&nbsp;the&nbsp;other&nbsp;instance&nbsp;that&nbsp;you&nbsp;need&nbsp;sometimes.&nbsp;&nbsp;This&nbsp;shouldn&#39;t&lt;br&gt;<br>
be&nbsp;difficult&nbsp;though&nbsp;-&nbsp;just&nbsp;invoke&nbsp;a&nbsp;method&nbsp;on&nbsp;one&nbsp;class&nbsp;with&nbsp;an&nbsp;instance&nbsp;of&lt;br&gt;<br>
the&nbsp;other.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
.&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
The&nbsp;factory&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;place&nbsp;where&nbsp;other&nbsp;classes&nbsp;can&nbsp;be&nbsp;passed&nbsp;in&nbsp;and&lt;br&gt;<br>
the&nbsp;protocol&nbsp;can&nbsp;call&nbsp;them&nbsp;via&nbsp;self.factory.&nbsp;That&nbsp;seems&nbsp;to&nbsp;imply&nbsp;that&lt;br&gt;<br>
application&nbsp;code&nbsp;should&nbsp;be&nbsp;put&nbsp;into&nbsp;the&nbsp;factory,&nbsp;but&nbsp;I&nbsp;can&#39;t&nbsp;see&nbsp;any&nbsp;way&nbsp;of&lt;br&gt;<br>
passing&nbsp;back&nbsp;information&nbsp;from&nbsp;deferred&nbsp;results&nbsp;to&nbsp;the&nbsp;call&nbsp;from&nbsp;protocol.&lt;br&gt;<br>
It&#39;s&nbsp;ok&nbsp;if&nbsp;it&nbsp;was&nbsp;just&nbsp;a&nbsp;simple&nbsp;method&nbsp;call&nbsp;that&nbsp;returns&nbsp;a&nbsp;result,&nbsp;but&nbsp;if&lt;br&gt;<br>
the&nbsp;code&nbsp;has&nbsp;to&nbsp;run&nbsp;a&nbsp;series&nbsp;of&nbsp;deferreds&nbsp;then&nbsp;it&nbsp;will&nbsp;be&nbsp;the&nbsp;called&nbsp;method&lt;br&gt;<br>
that&nbsp;will&nbsp;have&nbsp;the&nbsp;result&nbsp;and&nbsp;it&nbsp;will&nbsp;need&nbsp;a&nbsp;means&nbsp;of&nbsp;writing&nbsp;this&nbsp;back&nbsp;to&lt;br&gt;<br>
the&nbsp;client.&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;I&nbsp;can&nbsp;signal&nbsp;the&nbsp;protocol&nbsp;to&nbsp;say&nbsp;I&nbsp;now&nbsp;have&nbsp;the&lt;br&gt;<br>
result.Of&nbsp;course&nbsp;I&nbsp;could&nbsp;easily&nbsp;be&nbsp;mistaken.&nbsp;So&nbsp;please&nbsp;correct.&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;just&nbsp;what&nbsp;Deferreds&nbsp;are&nbsp;for.&nbsp;&nbsp;For&nbsp;example,&nbsp;let&#39;s&nbsp;consider&nbsp;a&nbsp;protocol&lt;br&gt;<br>
and&nbsp;factory&nbsp;for&nbsp;a&nbsp;game&nbsp;server&nbsp;lobby.&nbsp;&nbsp;The&nbsp;protocol&nbsp;has&nbsp;a&nbsp;message&nbsp;type&nbsp;which&lt;br&gt;<br>
lets&nbsp;the&nbsp;server&nbsp;inform&nbsp;the&nbsp;client&nbsp;of&nbsp;the&nbsp;list&nbsp;of&nbsp;games&nbsp;which&nbsp;are&nbsp;currently&lt;br&gt;<br>
available&nbsp;to&nbsp;be&nbsp;joined.&nbsp;&nbsp;The&nbsp;Protocol&nbsp;subclass&nbsp;sends&nbsp;this&nbsp;information&nbsp;to&lt;br&gt;<br>
the&nbsp;client&nbsp;when&nbsp;the&nbsp;connection&nbsp;is&nbsp;established,&nbsp;but&nbsp;it&nbsp;uses&nbsp;the&nbsp;factory&lt;br&gt;<br>
to&nbsp;actually&nbsp;find&nbsp;the&nbsp;list&nbsp;of&nbsp;games&nbsp;that&nbsp;are&nbsp;available.&nbsp;&nbsp;Again,&nbsp;this&lt;br&gt;<br>
division&nbsp;is&nbsp;probably&nbsp;desirable&nbsp;for&nbsp;a&nbsp;number&nbsp;of&nbsp;reasons&nbsp;(it&nbsp;simplifies&lt;br&gt;<br>
unit&nbsp;testing,&nbsp;for&nbsp;example).&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;GameFactory(ServerFactory):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;def&nbsp;availableGames(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return&nbsp;a&nbsp;Deferred&nbsp;which&nbsp;will&nbsp;fire&nbsp;with&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;games&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currently&nbsp;available&nbsp;to&nbsp;be&nbsp;joined.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.connectionPool.runQuery(&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;SELECT&nbsp;game_id&nbsp;FROM&nbsp;available_games&quot;)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;GameProtocol(Protocol):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send&nbsp;the&nbsp;available-games&nbsp;message&nbsp;so&nbsp;the&nbsp;client&nbsp;can&nbsp;pick&nbsp;one&nbsp;to&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;join.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;self.factory.availableGames()&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;cbGotGames(games):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.transport.write(&quot;&nbsp;&quot;.join(games))&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.addCallback(cbGotGames)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.addErrback(log.err)&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Of&nbsp;course&nbsp;if&nbsp;I&nbsp;passs&nbsp;the&nbsp;client&nbsp;connection&nbsp;to&nbsp;the&nbsp;factory,&nbsp;then&nbsp;it&nbsp;can&nbsp;use&lt;br&gt;<br>
this&nbsp;to&nbsp;write&nbsp;back.&nbsp;But&nbsp;that&nbsp;means&nbsp;passing&nbsp;around&nbsp;the&nbsp;client&nbsp;connection.&lt;br&gt;<br>
Should&nbsp;I&nbsp;avoid&nbsp;doing&nbsp;that&nbsp;or&nbsp;is&nbsp;that&nbsp;not&nbsp;a&nbsp;problem.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
It&#39;s&nbsp;an&nbsp;option,&nbsp;but&nbsp;I&nbsp;hope&nbsp;the&nbsp;above&nbsp;example&nbsp;will&nbsp;show&nbsp;how&nbsp;you&nbsp;can&nbsp;use&lt;br&gt;<br>
Deferreds&nbsp;to&nbsp;avoid&nbsp;needing&nbsp;to&nbsp;do&nbsp;this.&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
I&nbsp;hope&nbsp;I&nbsp;have&nbsp;explained&nbsp;myself&nbsp;clearly.&nbsp;I&#39;m&nbsp;just&nbsp;looking&nbsp;for&nbsp;some&nbsp;guidance&lt;br&gt;<br>
and&nbsp;pointers&nbsp;to&nbsp;what&nbsp;is&nbsp;best&nbsp;to&nbsp;do&nbsp;or&nbsp;what&nbsp;is&nbsp;best&nbsp;to&nbsp;avoid.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Hope&nbsp;this&nbsp;helps,&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
