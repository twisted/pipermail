<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;charset=ISO-8859-1&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
Ok&nbsp;assuming&nbsp;that&nbsp;we&nbsp;work&nbsp;on&nbsp;the&nbsp;model&nbsp;that&nbsp;if&nbsp;&quot;connectionLost&quot;&nbsp;is<br>
called,&nbsp;i&nbsp;can&nbsp;set&nbsp;a&nbsp;flag.&lt;br&gt;<br>
But&nbsp;from&nbsp;the&nbsp;twisted&nbsp;model,&nbsp;in&nbsp;RequestAvatar,&nbsp;the&nbsp;&quot;mind&quot;&nbsp;is&nbsp;not&nbsp;set&nbsp;to<br>
the&nbsp;instance&nbsp;of&nbsp;the&nbsp;protocol,&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;to&lt;br&gt;<br>
reference&nbsp;the&nbsp;instance&nbsp;of&nbsp;the&nbsp;protocol?&nbsp;Referencing&nbsp;the&nbsp;factory&nbsp;itself<br>
is&nbsp;of&nbsp;no&nbsp;value&nbsp;since&nbsp;we&nbsp;are&nbsp;interested&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;connection&nbsp;=<br>
account&nbsp;pair.&lt;br&gt;<br>
Or&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;get&nbsp;access&nbsp;to&nbsp;the&nbsp;current&nbsp;protocol&nbsp;instance&nbsp;from<br>
RequestAvatar?&lt;br&gt;<br>
&lt;br&gt;<br>
Marcus.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Glyph&nbsp;Lefkowitz&nbsp;wrote:<br>
&lt;blockquote<br>
&nbsp;cite=&quot;mid:F07EE17E-CC1F-41B0-AA8D-3DFD03CE31B1@twistedmatrix.com&quot;<br>
&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Context-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;On&nbsp;Oct&nbsp;16,&nbsp;2010,&nbsp;at&nbsp;10:02&nbsp;AM,&nbsp;Marcus.CM&nbsp;wrote:&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;span&gt;How&nbsp;do&nbsp;i&nbsp;find&nbsp;out&nbsp;if&nbsp;a&nbsp;particular<br>
connection&nbsp;is&nbsp;already&nbsp;dead&nbsp;in&nbsp;the&lt;span&gt;&nbsp;&lt;/span&gt;&lt;br&gt;<br>
given&nbsp;&quot;account&quot;&nbsp;class?&lt;/span&gt;&lt;/span&gt;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;div&gt;There's&nbsp;no&nbsp;way&nbsp;to&nbsp;know;&nbsp;it's&nbsp;a&nbsp;race&nbsp;condition.&nbsp;&nbsp;If&nbsp;the<br>
connection&nbsp;dies&nbsp;before&nbsp;authentication,&nbsp;then&nbsp;requestAvatar&nbsp;won't&nbsp;be<br>
called.&nbsp;&nbsp;If&nbsp;the&nbsp;connection&nbsp;dies&nbsp;shortly&nbsp;afterward,&nbsp;you'll&nbsp;get&nbsp;a<br>
connectionLost&nbsp;shortly&nbsp;after&nbsp;authentication,&nbsp;but&nbsp;there's&nbsp;no&nbsp;way&nbsp;to<br>
predict&nbsp;that&nbsp;that's&nbsp;about&nbsp;to&nbsp;happen.&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;If&nbsp;the&nbsp;connection&nbsp;dies&nbsp;at&nbsp;the&nbsp;exact&nbsp;moment&nbsp;that&nbsp;authentication<br>
occurs...&nbsp;well,&nbsp;the&nbsp;joke's&nbsp;on&nbsp;you,&nbsp;in&nbsp;a&nbsp;network&nbsp;of&nbsp;Von&nbsp;Neumann<br>
architecture&nbsp;computers,&nbsp;there's&nbsp;no&nbsp;such&nbsp;thing&nbsp;as&nbsp;the&nbsp;&quot;exact&nbsp;moment&quot;.<br>
&nbsp;It&nbsp;actually&nbsp;died&nbsp;shortly&nbsp;afterwards,&nbsp;just&nbsp;so&nbsp;shortly&nbsp;that&nbsp;it&nbsp;seemed<br>
simultaneous&nbsp;to&nbsp;a&nbsp;casual&nbsp;human&nbsp;observer.&nbsp;&nbsp;So&nbsp;as&nbsp;far&nbsp;as&nbsp;the&nbsp;code's<br>
concerned,&nbsp;it's&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;&quot;shortly&nbsp;afterward&quot;&nbsp;case.&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;hr&nbsp;size=&quot;4&quot;&nbsp;width=&quot;90%&quot;&gt;<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
&nbsp;&nbsp;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>
<br>
<br>
<br>

</tt>
