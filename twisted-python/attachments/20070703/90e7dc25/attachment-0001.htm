<tt>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;========================================================&lt;/span&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;/span&gt;&lt;div&nbsp;style=&quot;margin-left:&nbsp;40px;&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
from&nbsp;twisted.internet&nbsp;import&nbsp;protocol,&nbsp;reactor,&nbsp;defer,&nbsp;interfaces&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;class&nbsp;MyProtocol(protocol.Protocol):&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;is_big_data&nbsp;=&nbsp;False&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;big_data&nbsp;=&nbsp;&amp;#39;&amp;#39;&lt;/span&gt;<br>
&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;big_data_size&nbsp;=&nbsp;0&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.big_data&nbsp;=&nbsp;&amp;#39;&amp;#39;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.big_data_size&nbsp;=&nbsp;0&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.is_big_data&nbsp;=&nbsp;False&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pass&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):&nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;check_head_ok(data):&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;To&nbsp;receive&nbsp;the&nbsp;big&nbsp;size&nbsp;data&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.is_big_data:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;The&nbsp;big&nbsp;data&nbsp;will&nbsp;overflow&nbsp;the&nbsp;Twisted&nbsp;receive&nbsp;buffer&nbsp;size,&nbsp;so&nbsp;loop&nbsp;to&nbsp;receive&nbsp;data&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.is_big_size_data:&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.big_data&nbsp;+=&nbsp;data&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.big_data_size&nbsp;==&nbsp;len(big_data):&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;To&nbsp;save&nbsp;data&nbsp;to&nbsp;database&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pass&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionLost(self,&nbsp;reason):&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.big_data&nbsp;=&nbsp;&amp;#39;&amp;#39;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.big_data_size&nbsp;=&nbsp;0&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.is_big_data&nbsp;=&nbsp;False&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pass&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;check_head_ok(self,&nbsp;data):&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;nbsp;<br>
&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;data.startswith(&amp;#39;ABC&amp;#39;):&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;values&nbsp;=&nbsp;<br>
data.split(&amp;#39;,&amp;#39;)&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.big_data_size&nbsp;=&nbsp;int(values[1])&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.is_big_data&nbsp;=&nbsp;self.big_data_size&nbsp;&amp;gt;&nbsp;0&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;True&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:&lt;/span&gt;&lt;br&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;False&amp;nbsp;&nbsp;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;================================================================<br>
&lt;/span&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(51,&nbsp;51,&nbsp;255);&quot;&gt;&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(153,&nbsp;0,&nbsp;0);&quot;&gt;I&nbsp;rewrite&nbsp;my&nbsp;source&nbsp;about&nbsp;MyProtocol.&nbsp;But&nbsp;I&nbsp;can&nbsp;not&nbsp;receive&nbsp;complete&nbsp;data,&nbsp;only&nbsp;a&nbsp;part&nbsp;of&nbsp;data.&nbsp;:(&nbsp;Could&nbsp;you&nbsp;help&nbsp;me?<br>
&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
