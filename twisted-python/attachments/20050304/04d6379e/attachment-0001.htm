<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;TITLE&gt;Twisted,&nbsp;Threading,&nbsp;Extension&nbsp;Modules&nbsp;and&nbsp;the&nbsp;GIL&lt;/TITLE&gt;<br>
<br>
&lt;META&nbsp;content=&quot;MSHTML&nbsp;6.00.2800.1400&quot;&nbsp;name=GENERATOR&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;&lt;SPAN&nbsp;class=355313922-03032005&gt;I&nbsp;just&nbsp;<br>
realised&nbsp;after&nbsp;re-reading&nbsp;my&nbsp;post&nbsp;that&nbsp;the&nbsp;call&nbsp;to&nbsp;deferToThread&nbsp;should&nbsp;have&nbsp;<br>
been:&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&gt;&lt;SPAN&nbsp;class=355313922-03032005&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&amp;nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&lt;FONT&gt;&lt;SPAN&nbsp;class=355313922-03032005&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;<br>
size=2&gt;d&nbsp;=&nbsp;threads.deferToThread(self.builder.newbuild&lt;SPAN&nbsp;<br>
class=355313922-03032005&gt;,&nbsp;<br>
&lt;/SPAN&gt;buildJob)&lt;BR&gt;d.addCallback(self.builderFinished)&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;P&gt;&lt;SPAN&nbsp;class=355313922-03032005&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#0000ff&nbsp;size=2&gt;How&nbsp;<br>
silly&nbsp;of&nbsp;me,&nbsp;i'll&nbsp;test&nbsp;it&nbsp;now&nbsp;and&nbsp;see&nbsp;if&nbsp;there&nbsp;are&nbsp;still&nbsp;<br>
problems!&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/P&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;BLOCKQUOTE&nbsp;dir=ltr&nbsp;style=&quot;MARGIN-RIGHT:&nbsp;0px&quot;&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;class=OutlookMessageHeader&nbsp;dir=ltr&nbsp;align=left&gt;&lt;FONT&nbsp;face=Tahoma&nbsp;<br>
&nbsp;&nbsp;size=2&gt;-----Original&nbsp;Message-----&lt;BR&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;<br>
&nbsp;&nbsp;twisted-python-bounces@twistedmatrix.com&nbsp;<br>
&nbsp;&nbsp;[mailto:twisted-python-bounces@twistedmatrix.com]&lt;B&gt;On&nbsp;Behalf&nbsp;Of&nbsp;&lt;/B&gt;Grant&nbsp;<br>
&nbsp;&nbsp;McDonald&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;04&nbsp;March&nbsp;2005&nbsp;09:20&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;<br>
&nbsp;&nbsp;twisted-python@twistedmatrix.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;[Twisted-Python]&nbsp;Twisted,&nbsp;<br>
&nbsp;&nbsp;Threading,&nbsp;Extension&nbsp;Modules&nbsp;and&nbsp;the&nbsp;GIL&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Hi&nbsp;everyone,&lt;/FONT&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;I&nbsp;have&nbsp;a&nbsp;threading&nbsp;question&nbsp;regarding&nbsp;Twisted&nbsp;and&nbsp;the&nbsp;<br>
&nbsp;&nbsp;explanation&nbsp;is&nbsp;a&nbsp;bit&nbsp;long-winded&nbsp;but&nbsp;please&nbsp;bear&nbsp;with&nbsp;me.&lt;/FONT&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;The&nbsp;scenario:&lt;/FONT&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;I&nbsp;have&nbsp;created&nbsp;an&nbsp;automated&nbsp;build&nbsp;system&nbsp;in&nbsp;Python&nbsp;for&nbsp;<br>
&nbsp;&nbsp;PowerBuilder&nbsp;(awful&nbsp;language)&nbsp;that&nbsp;allows&nbsp;a&nbsp;scheduler&nbsp;to&nbsp;assign&nbsp;build&nbsp;jobs&nbsp;to&nbsp;<br>
&nbsp;&nbsp;dispatcher&nbsp;programs&nbsp;across&nbsp;a&nbsp;network.&amp;nbsp;&nbsp;These&nbsp;dispatchers&nbsp;have&nbsp;a&nbsp;GUI&nbsp;<br>
&nbsp;&nbsp;component&nbsp;coded&nbsp;in&nbsp;wxPython.&amp;nbsp;&nbsp;The&nbsp;initial&nbsp;implementation&nbsp;involved&nbsp;also&nbsp;<br>
&nbsp;&nbsp;creating&nbsp;a&nbsp;separate&nbsp;builder&nbsp;program&nbsp;that&nbsp;was&nbsp;spawned&nbsp;by&nbsp;the&nbsp;dispatchers&nbsp;when&nbsp;a&nbsp;<br>
&nbsp;&nbsp;build&nbsp;job&nbsp;was&nbsp;received.&amp;nbsp;&nbsp;The&nbsp;builder&nbsp;code&nbsp;called&nbsp;an&nbsp;extension&nbsp;module&nbsp;to&nbsp;<br>
&nbsp;&nbsp;interface&nbsp;with&nbsp;the&nbsp;low-level&nbsp;PowerBuilder&nbsp;compiler&nbsp;library.&amp;nbsp;&nbsp;This&nbsp;was&nbsp;<br>
&nbsp;&nbsp;done&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;the&nbsp;calls&nbsp;to&nbsp;rebuild&nbsp;the&nbsp;application&nbsp;and&nbsp;deploy&nbsp;it&nbsp;are&nbsp;<br>
&nbsp;&nbsp;exceptionally&nbsp;CPU-intensive&nbsp;and&nbsp;don't&nbsp;return&nbsp;for&nbsp;many&nbsp;minutes&nbsp;(approx.&nbsp;30&nbsp;or&nbsp;<br>
&nbsp;&nbsp;so&nbsp;for&nbsp;a&nbsp;large&nbsp;application)&nbsp;and&nbsp;all&nbsp;attempts&nbsp;to&nbsp;include&nbsp;this&nbsp;in&nbsp;the&nbsp;dispatcher&nbsp;<br>
&nbsp;&nbsp;resulted&nbsp;in&nbsp;the&nbsp;user&nbsp;interface&nbsp;freezing.&lt;/FONT&gt;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Recently&nbsp;I&nbsp;came&nbsp;across&nbsp;twisted&nbsp;documentation&nbsp;with&nbsp;regards&nbsp;to&nbsp;<br>
&nbsp;&nbsp;programming&nbsp;using&nbsp;twisted&nbsp;threads.&amp;nbsp;&nbsp;As&nbsp;an&nbsp;experiment&nbsp;on&nbsp;this&nbsp;concept&nbsp;I&nbsp;<br>
&nbsp;&nbsp;amalgamated&nbsp;the&nbsp;dispatcher&nbsp;and&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;builder&nbsp;programs&nbsp;and&nbsp;called&nbsp;the&nbsp;builder&nbsp;code&nbsp;using&nbsp;the&nbsp;<br>
&nbsp;&nbsp;following:&lt;/FONT&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;d&nbsp;=&nbsp;<br>
&nbsp;&nbsp;threads.deferToThread(self.builder.newbuild(buildJob))&lt;/FONT&gt;&nbsp;&lt;BR&gt;&lt;FONT&nbsp;<br>
&nbsp;&nbsp;size=2&gt;d.addCallback(self.builderFinished)&lt;/FONT&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;It&nbsp;should&nbsp;be&nbsp;noted&nbsp;that&nbsp;the&nbsp;extension&nbsp;module&nbsp;(a&nbsp;pyrex&nbsp;<br>
&nbsp;&nbsp;extension&nbsp;I&nbsp;have&nbsp;created&nbsp;myself)&nbsp;implements&nbsp;the&nbsp;releasing&nbsp;and&nbsp;re-acquiring&nbsp;of&nbsp;<br>
&nbsp;&nbsp;the&nbsp;Global&nbsp;Interpreter&nbsp;Lock&nbsp;for&nbsp;all&nbsp;blocking&nbsp;calls.&amp;nbsp;&nbsp;From&nbsp;my&nbsp;<br>
&nbsp;&nbsp;understanding&nbsp;this&nbsp;should&nbsp;work&nbsp;but&nbsp;the&nbsp;user&nbsp;interface&nbsp;freezes.&amp;nbsp;&nbsp;Can&nbsp;<br>
&nbsp;&nbsp;someone&nbsp;please&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;direction&nbsp;of&nbsp;a&nbsp;solution?&lt;/FONT&gt;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Thanks,&lt;/FONT&gt;&nbsp;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Grant&nbsp;McDonald&lt;/FONT&gt;&nbsp;&lt;/P&gt;&lt;!--[object_id=#infocomp.com#]--&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#808080&nbsp;size=1&gt;Important&nbsp;notice:&nbsp;This&nbsp;message&nbsp;is&nbsp;<br>
&nbsp;&nbsp;intended&nbsp;for&nbsp;the&nbsp;individual(s)&nbsp;and&nbsp;entity(s)&nbsp;addressed.&nbsp;The&nbsp;information&nbsp;<br>
&nbsp;&nbsp;contained&nbsp;in&nbsp;this&nbsp;transmission&nbsp;and&nbsp;any&nbsp;attached,&nbsp;may&nbsp;be&nbsp;confidential&nbsp;and&nbsp;may&nbsp;<br>
&nbsp;&nbsp;also&nbsp;be&nbsp;the&nbsp;subject&nbsp;of&nbsp;legal&nbsp;privilege,&nbsp;public&nbsp;interest&nbsp;immunity&nbsp;or&nbsp;legal&nbsp;<br>
&nbsp;&nbsp;professional&nbsp;privilege.&nbsp;Any&nbsp;review,&nbsp;retransmission,&nbsp;dissemination&nbsp;or&nbsp;other&nbsp;use&nbsp;<br>
&nbsp;&nbsp;of,&nbsp;taking&nbsp;of&nbsp;any&nbsp;action&nbsp;in&nbsp;reliance&nbsp;upon&nbsp;this&nbsp;information&nbsp;by&nbsp;person&nbsp;or&nbsp;<br>
&nbsp;&nbsp;entities&nbsp;other&nbsp;than&nbsp;the&nbsp;recipient&nbsp;is&nbsp;prohibited&nbsp;and&nbsp;requires&nbsp;authorization&nbsp;<br>
&nbsp;&nbsp;from&nbsp;the&nbsp;sender.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;addressee&nbsp;indicated&nbsp;in&nbsp;this&nbsp;message&nbsp;(or&nbsp;<br>
&nbsp;&nbsp;responsible&nbsp;for&nbsp;delivery&nbsp;of&nbsp;the&nbsp;message&nbsp;to&nbsp;such&nbsp;person)&nbsp;you&nbsp;may&nbsp;not&nbsp;copy&nbsp;or&nbsp;<br>
&nbsp;&nbsp;deliver&nbsp;this&nbsp;message&nbsp;to&nbsp;anyone.&nbsp;In&nbsp;such&nbsp;cases&nbsp;you&nbsp;should&nbsp;destroy&nbsp;this&nbsp;message&nbsp;<br>
&nbsp;&nbsp;and&nbsp;kindly&nbsp;notify&nbsp;the&nbsp;sender&nbsp;by&nbsp;reply&nbsp;email.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
&nbsp;&nbsp;&lt;P&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#808080&nbsp;size=1&gt;WARNING:&nbsp;Although&nbsp;Infocomp&nbsp;has&nbsp;taken&nbsp;<br>
&nbsp;&nbsp;reasonable&nbsp;precautions&nbsp;so&nbsp;that&nbsp;no&nbsp;viruses&amp;nbsp;are&nbsp;present&nbsp;in&nbsp;this&nbsp;e-mail,&nbsp;the&nbsp;<br>
&nbsp;&nbsp;company&nbsp;cannot&nbsp;accept&nbsp;responsibility&nbsp;for&nbsp;any&nbsp;loss&nbsp;or&nbsp;damage&nbsp;arising&nbsp;from&nbsp;the&nbsp;<br>
&nbsp;&nbsp;use&nbsp;of&nbsp;e-mail&nbsp;attachments.&lt;/FONT&gt;&lt;/P&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
