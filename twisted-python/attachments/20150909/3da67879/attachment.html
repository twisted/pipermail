<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ah,&nbsp;I&nbsp;was&nbsp;under&nbsp;the&nbsp;impression&nbsp;that&nbsp;listenTCP()&nbsp;can&nbsp;only&nbsp;be&nbsp;called<br>
&nbsp;&nbsp;&nbsp;&nbsp;before&nbsp;reactor.run().&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;don't&nbsp;now&nbsp;where&nbsp;it&nbsp;came&nbsp;from.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;On&nbsp;09/08/15&nbsp;20:41,&nbsp;Alexey&nbsp;Panyovin<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:55EF2BC2.8000701@runtel.ru&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;style=&quot;background-color:#ffffff;color:#000000;font-family:'Menlo';font-size:12,0pt;&quot;&gt;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;from&nbsp;&lt;/span&gt;twisted.web&nbsp;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;import&nbsp;&lt;/span&gt;server&lt;span&nbsp;style=&quot;color:#cc7832;&quot;&gt;,&nbsp;&lt;/span&gt;resource<br>
&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;from&nbsp;&lt;/span&gt;twisted.internet&nbsp;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;import&nbsp;&lt;/span&gt;reactor&lt;span&nbsp;style=&quot;color:#cc7832;&quot;&gt;,&nbsp;&lt;/span&gt;defer<br>
<br>
&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;class&nbsp;&lt;/span&gt;Simple(resource.Resource):<br>
&nbsp;&nbsp;&nbsp;&nbsp;isLeaf&nbsp;=&nbsp;&lt;span&nbsp;style=&quot;color:#000080;&quot;&gt;True<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#000080;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;def&nbsp;&lt;/span&gt;render_GET(&lt;span&nbsp;style=&quot;color:#94558d;&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#cc7832;&quot;&gt;,&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#808080;&quot;&gt;request&lt;/span&gt;):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;return&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;&quot;&lt;html&gt;Hello,&nbsp;world!&lt;/html&gt;&quot;<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;def&nbsp;&lt;/span&gt;call_me():<br>
&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;defer.Deferred()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;print&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;&quot;Get&nbsp;something&quot;<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;d.callback(&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;&quot;success&quot;&lt;/span&gt;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;return&nbsp;&lt;/span&gt;d<br>
<br>
&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;def&nbsp;&lt;/span&gt;run_web(_):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:#000080;font-weight:bold;&quot;&gt;print&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;&quot;run_web&quot;<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#008000;font-weight:bold;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;site&nbsp;=&nbsp;server.Site(Simple())<br>
&nbsp;&nbsp;&nbsp;&nbsp;reactor.listenTCP(&lt;span&nbsp;style=&quot;color:#0000ff;&quot;&gt;8080&lt;/span&gt;&lt;span&nbsp;style=&quot;color:#cc7832;&quot;&gt;,&nbsp;&lt;/span&gt;site)<br>
<br>
d&nbsp;=&nbsp;call_me()<br>
d.addCallback(run_web)<br>
reactor.run()<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--<br>
Alex<br>
<br>
08.09.15&nbsp;17:51,&nbsp;Nagy,&nbsp;Attila&nbsp;пишет:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:55EEF5D8.7020709@fsn.hu&quot;&nbsp;type=&quot;cite&quot;&gt;Hi,&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;wonder,&nbsp;if&nbsp;I&nbsp;have&nbsp;this&nbsp;example&nbsp;program:&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;&nbsp;class=&quot;moz-txt-link-freetext&quot;<br>
href=&quot;https://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html#site-objects&quot;&gt;https://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html#site-objects&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;how&nbsp;do&nbsp;I&nbsp;initialize&nbsp;an&nbsp;external&nbsp;resource&nbsp;(like&nbsp;a&nbsp;dictionary,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;is&nbsp;fetched&nbsp;from&nbsp;a&nbsp;database)&nbsp;with&nbsp;asynchronous&nbsp;twisted<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tools,&nbsp;but&nbsp;before&nbsp;the&nbsp;HTTP&nbsp;server&nbsp;starts&nbsp;listening&nbsp;on&nbsp;its&nbsp;port?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;goal&nbsp;here&nbsp;is&nbsp;that&nbsp;the&nbsp;HTTP&nbsp;server&nbsp;shouldn't&nbsp;start&nbsp;until&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can&nbsp;fetch&nbsp;the&nbsp;desired&nbsp;data.&nbsp;Of&nbsp;course&nbsp;I&nbsp;can&nbsp;do&nbsp;this&nbsp;in&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronous&nbsp;way,&nbsp;but&nbsp;it&nbsp;feels&nbsp;so&nbsp;unnatural&nbsp;and&nbsp;bad&nbsp;practice&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch&nbsp;the&nbsp;same&nbsp;stuff&nbsp;synchronously&nbsp;on&nbsp;initialization&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asynchronously&nbsp;when&nbsp;the&nbsp;program/reactor&nbsp;is&nbsp;running&nbsp;(often&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;different&nbsp;libraries).&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thanks,&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_______________________________________________&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;&nbsp;class=&quot;moz-txt-link-abbreviated&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;moz-do-not-send=&quot;true&quot;&nbsp;class=&quot;moz-txt-link-freetext&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&nbsp;class=&quot;mimeAttachmentHeader&quot;&gt;&lt;/fieldset&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
