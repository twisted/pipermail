<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=windows-1252&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Jan&nbsp;6,&nbsp;2014,&nbsp;at&nbsp;3:47&nbsp;AM,&nbsp;Phil&nbsp;Mayers&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:p.mayers@imperial.ac.uk&quot;&gt;p.mayers@imperial.ac.uk&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;06/01/14&nbsp;08:26,&nbsp;Maciej&nbsp;Wasilak&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hello,&lt;br&gt;&lt;br&gt;I've&nbsp;tried&nbsp;to&nbsp;use&nbsp;Twisted&nbsp;names.client.getHostByName()&nbsp;method&nbsp;to&nbsp;resolve&lt;br&gt;some&nbsp;addresses&nbsp;for&nbsp;my&nbsp;UDP&nbsp;based&nbsp;app.&nbsp;By&nbsp;default&nbsp;getHostByName()&nbsp;always&lt;br&gt;returns&nbsp;IPv6&nbsp;address.&nbsp;I&nbsp;don't&nbsp;always&nbsp;have&nbsp;end-to-end&nbsp;IPv6&nbsp;connectivity,&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;I'm&nbsp;not&nbsp;sure&nbsp;if&nbsp;t.n.client&nbsp;implements&nbsp;the&nbsp;same&nbsp;stuff&nbsp;that&nbsp;getaddrinfo&nbsp;does,&nbsp;namely&nbsp;RFC&nbsp;6724&nbsp;address&nbsp;selection&nbsp;rules&nbsp;and&nbsp;behaviour,&nbsp;and&nbsp;in&nbsp;particular&nbsp;if&nbsp;it&nbsp;has&nbsp;an&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;AI_ADDRCONFIG&nbsp;flag.&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;After&nbsp;Twisted&nbsp;13.2&nbsp;announcement&nbsp;I've&nbsp;checked&nbsp;the&nbsp;new&nbsp;HostnameEndpoint&lt;br&gt;implementation&nbsp;to&nbsp;find&nbsp;possible&nbsp;solution&nbsp;(it&nbsp;seems&nbsp;to&nbsp;be&nbsp;dedicated&nbsp;to&lt;br&gt;solve&nbsp;similar&nbsp;problems,&nbsp;but&nbsp;for&nbsp;TCP-based&nbsp;protocols).&nbsp;However&nbsp;it&nbsp;seems&lt;br&gt;to&nbsp;use&nbsp;deferToThread(),&nbsp;and&nbsp;built-in&nbsp;Python&nbsp;getaddrinfo().&lt;br&gt;&lt;br&gt;My&nbsp;questions:&lt;br&gt;1.&nbsp;Is&nbsp;using&nbsp;deferToThread()&nbsp;a&nbsp;preferred&nbsp;solution?&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;IMO&nbsp;*all*&nbsp;applications&nbsp;should&nbsp;*always*&nbsp;use&nbsp;getaddrinfo()&nbsp;for&nbsp;resolution&nbsp;of&nbsp;user-supplied&nbsp;names.&nbsp;It&nbsp;really&nbsp;really&nbsp;annoys&nbsp;me&nbsp;when&nbsp;people&nbsp;decide&nbsp;to&nbsp;re-invent&nbsp;it&nbsp;-&nbsp;this&nbsp;is&nbsp;hard&nbsp;to&nbsp;get&nbsp;right,&nbsp;and&nbsp;apps&nbsp;like&nbsp;Chrome&nbsp;having&nbsp;their&nbsp;own&nbsp;implementation&nbsp;precludes&nbsp;things&nbsp;like&nbsp;DHCP-based&nbsp;6724&nbsp;tables&nbsp;in&nbsp;the&nbsp;future.&lt;br&gt;&lt;br&gt;So&nbsp;yes,&nbsp;use&nbsp;&quot;deferToThread&quot;&nbsp;and&nbsp;&quot;getaddrinfo&quot;.&nbsp;Note&nbsp;that&nbsp;you&nbsp;should&nbsp;not,&nbsp;in&nbsp;general,&nbsp;specify&nbsp;the&nbsp;address&nbsp;family;&nbsp;let&nbsp;the&nbsp;AI_ADDRCONFIG&nbsp;flag&nbsp;sort&nbsp;that&nbsp;out&nbsp;for&nbsp;you.&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;minor&nbsp;quibble&nbsp;-&nbsp;all&nbsp;applications&nbsp;deployed&nbsp;to&nbsp;&lt;i&gt;other&nbsp;people’s&nbsp;hardware&lt;/i&gt;&nbsp;ought&nbsp;to&nbsp;always&nbsp;use&nbsp;getaddrinfo,&nbsp;because&nbsp;the&nbsp;essence&nbsp;of&nbsp;GAI&nbsp;is&nbsp;that&nbsp;it&nbsp;respects&nbsp;local&nbsp;configuration&nbsp;of&nbsp;the&nbsp;platform.&nbsp;&nbsp;No&nbsp;matter&nbsp;how&nbsp;“hard”&nbsp;you&nbsp;try&nbsp;to&nbsp;get&nbsp;it&nbsp;“right”,&nbsp;you&nbsp;can’t&nbsp;ever&nbsp;know&nbsp;what&nbsp;the&nbsp;platform&nbsp;is&nbsp;doing&nbsp;with&nbsp;hostname&nbsp;resolution&nbsp;because&nbsp;it&nbsp;simply&nbsp;isn’t&nbsp;exposed&nbsp;any&nbsp;other&nbsp;way,&nbsp;let&nbsp;alone&nbsp;any&nbsp;asynchronous&nbsp;way.[1]&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;if&nbsp;you’re&nbsp;building&nbsp;a&nbsp;big&nbsp;service&nbsp;to&nbsp;run&nbsp;in&nbsp;the&nbsp;cloud,&nbsp;or&nbsp;on&nbsp;a&nbsp;VPN,&nbsp;on&nbsp;specially-tuned&nbsp;machines&nbsp;that&nbsp;you&nbsp;configured,&nbsp;using&nbsp;twisted.names&nbsp;can&nbsp;be&nbsp;more&nbsp;scalable&nbsp;and&nbsp;allow&nbsp;you&nbsp;to&nbsp;react&nbsp;more&nbsp;reasonably&nbsp;to&nbsp;high&nbsp;load&nbsp;situations.&nbsp;&nbsp;Or,&nbsp;at&nbsp;least,&nbsp;it&nbsp;will&nbsp;give&nbsp;you&nbsp;a&nbsp;level&nbsp;of&nbsp;control&nbsp;so&nbsp;that&nbsp;you&nbsp;can&nbsp;tune&nbsp;it,&nbsp;since&nbsp;just&nbsp;doing&nbsp;potentially&nbsp;blocking&nbsp;platform&nbsp;stuff&nbsp;in&nbsp;a&nbsp;thread&nbsp;is&nbsp;not&nbsp;amenable&nbsp;to&nbsp;tuning.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[1]:&nbsp;Actually&nbsp;it&nbsp;is&nbsp;sometimes&nbsp;exposed,&nbsp;for&nbsp;example&nbsp;with&nbsp;platform-specific&nbsp;APIs&nbsp;like&nbsp;&lt;&lt;a&nbsp;href=&quot;https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFHostRef/Reference/reference.html&quot;&gt;https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFHostRef/Reference/reference.html&lt;/a&gt;&gt;&nbsp;and&nbsp;&lt;&lt;a&nbsp;href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/ms741522(v=vs.85).aspx&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/ms741522(v=vs.85).aspx&lt;/a&gt;&gt;.&nbsp;&nbsp;But&nbsp;you&nbsp;know,&nbsp;not&nbsp;on,&nbsp;like,&nbsp;Linux.&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
