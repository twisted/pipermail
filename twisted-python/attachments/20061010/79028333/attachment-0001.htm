<tt>
&lt;html&gt;&lt;body&gt;On&nbsp;12:58&nbsp;am,&nbsp;slamb@slamb.org&nbsp;wrote:&lt;br&nbsp;/&gt;&amp;gt;It&nbsp;appears&nbsp;I&nbsp;can't&nbsp;use&nbsp;reference&nbsp;handling&nbsp;to&nbsp;&amp;#160;clean&nbsp;up&nbsp;&lt;br&nbsp;/&gt;&amp;gt;resources&nbsp;within&nbsp;a&nbsp;trial&nbsp;-&nbsp;the&nbsp;output&nbsp;code&nbsp;apparently&nbsp;keeps&nbsp;&amp;#160;a&nbsp;reference&nbsp;to&nbsp;&lt;br&nbsp;/&gt;&amp;gt;the&nbsp;stack&nbsp;trace&nbsp;or&nbsp;something&nbsp;until&nbsp;after&nbsp;it's&nbsp;done.&nbsp;&amp;#160;That's&nbsp;too&nbsp;late&nbsp;for&nbsp;me&nbsp;&lt;br&nbsp;/&gt;&amp;gt;-&nbsp;this&nbsp;resource&nbsp;is&nbsp;essentially&nbsp;a&nbsp;mutex,&nbsp;so&nbsp;if&nbsp;&amp;#160;I&nbsp;have&nbsp;more&nbsp;than&nbsp;one&nbsp;TestCase&nbsp;&lt;br&nbsp;/&gt;&amp;gt;in&nbsp;a&nbsp;single&nbsp;trial&nbsp;run,&nbsp;my&nbsp;tests&nbsp;don't&nbsp;&amp;#160;work.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;I&nbsp;can't&nbsp;speak&nbsp;to&nbsp;the&nbsp;intentionality&nbsp;of&nbsp;that&nbsp;particular&nbsp;change,&nbsp;but&nbsp;there&nbsp;are&nbsp;many&nbsp;cases&nbsp;where&nbsp;code&nbsp;(not&nbsp;necessarily&nbsp;trial)&nbsp;will&nbsp;do&nbsp;something&nbsp;like&nbsp;this&nbsp;temporarily.&nbsp;&amp;#160;You&nbsp;should&nbsp;always&nbsp;treat&nbsp;__del__&nbsp;as&nbsp;slightly&nbsp;non-deterministic&nbsp;unless&nbsp;you&nbsp;have&nbsp;a&nbsp;very&nbsp;tightly&nbsp;controlled&nbsp;test&nbsp;_specifically_&nbsp;for&nbsp;your&nbsp;__del__&nbsp;and&nbsp;it&nbsp;includes&nbsp;a&nbsp;gc.collect().&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Do&nbsp;startup&nbsp;/&nbsp;cleanup&nbsp;with&nbsp;the&nbsp;'setUp'&nbsp;and&nbsp;'tearDown'&nbsp;TestCase&nbsp;methods.&nbsp;&amp;#160;Don't&nbsp;depend&nbsp;on&nbsp;garbage&nbsp;collection:&nbsp;this&nbsp;goes&nbsp;for&nbsp;both&nbsp;your&nbsp;application&nbsp;and&nbsp;your&nbsp;test&nbsp;code.&nbsp;&amp;#160;Implicitly&nbsp;depending&nbsp;on&nbsp;the&nbsp;garbage&nbsp;collector's&nbsp;behavior&nbsp;will&nbsp;very&nbsp;likely&nbsp;make&nbsp;your&nbsp;program&nbsp;break&nbsp;under&nbsp;the&nbsp;debugger,&nbsp;but&nbsp;not&nbsp;under&nbsp;normal&nbsp;operation&nbsp;(or&nbsp;vice&nbsp;versa).&lt;br&nbsp;/&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
