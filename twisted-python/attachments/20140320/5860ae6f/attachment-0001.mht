[From nobody Thu Mar 20 12:00:01 2014
Return-Path: &lt;mike_mp@zzzcomputing.com&gt;
Delivered-To: chris@simplistix.co.uk
Received: from mail6.bemta5.messagelabs.com (mail6.bemta5.messagelabs.com
 [195.245.231.135])
 by server1.simplistix.co.uk (Postfix) with ESMTP id 9A151CCF3F
 for &lt;chris@simplistix.co.uk&gt;; Thu, 13 Mar 2014 15:43:35 +0000 (GMT)
Received: from [85.158.139.35:6783] by server-11.bemta-5.messagelabs.com id
 EE/D1-30804-722D1235; Thu, 13 Mar 2014 15:43:35 +0000
X-Env-Sender: mike_mp@zzzcomputing.com
X-Msg-Ref: server-15.tower-179.messagelabs.com!1394725413!31964572!1
X-Originating-IP: [208.72.237.35]
X-SpamReason: No, hits=0.5 required=7.0 tests=BODY_RANDOM_LONG
X-StarScan-Received: 
X-StarScan-Version: 6.9.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 27818 invoked from network); 13 Mar 2014 15:43:33 -0000
Received: from b-pb-sasl-quonix.pobox.com (HELO smtp.pobox.com) (208.72.237.35)
 by server-15.tower-179.messagelabs.com with SMTP; 13 Mar 2014 15:43:33 -0000
Received: from smtp.pobox.com (unknown [127.0.0.1])
 by b-sasl-quonix.pobox.com (Postfix) with ESMTP id 41D2971880
 for &lt;chris@simplistix.co.uk&gt;; Thu, 13 Mar 2014 11:43:32 -0400 (EDT)
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=pobox.com; h=from
 :content-type:message-id:mime-version:subject:date:references:to
 :in-reply-to; s=sasl; bh=lVXVjRQgh4jyVoCzxkLKWzW6nNU=; b=s2CI6WX
 tW8S8Qh+KZPgqRGVUF/SjuYGU3biizfT7Ax+170lIg0KM/63c+RvmM5j25uIpJSf
 ZOAwaTLaieiW56iL6saDzdUJDVR4w/Xa9GlrCN0/tJBrK3kfiyc1mwYVRNCRCrGY
 IGRIieX1R7evfY9ouRnAAwslBiehGTVeAUjA=
Received: from b-pb-sasl-quonix.pobox.com (unknown [127.0.0.1])
 by b-sasl-quonix.pobox.com (Postfix) with ESMTP id 2D0767187E
 for &lt;chris@simplistix.co.uk&gt;; Thu, 13 Mar 2014 11:43:32 -0400 (EDT)
Received: from [192.168.1.103] (unknown [69.123.63.118])
 (using TLSv1 with cipher AES128-SHA (128/128 bits))
 (No client certificate requested)
 by b-sasl-quonix.pobox.com (Postfix) with ESMTPSA id D954871875
 for &lt;chris@simplistix.co.uk&gt;; Thu, 13 Mar 2014 11:43:23 -0400 (EDT)
From: Michael Bayer &lt;mike_mp@zzzcomputing.com&gt;
Content-Type: multipart/signed;
 boundary=&quot;Apple-Mail=_2024AC90-F81C-4E34-A238-C9E394438F6F&quot;;
 protocol=&quot;application/pgp-signature&quot;; micalg=pgp-sha1
Message-Id: &lt;C7E696E4-B2F0-4E16-A27A-79AA132EEFBF@zzzcomputing.com&gt;
Mime-Version: 1.0 (Mac OS X Mail 7.2 \(1874\))
Subject: Re: [Twisted-Python] git?
Date: Thu, 13 Mar 2014 11:43:22 -0400
References: &lt;53215AED.2070800@atleastfornow.net&gt;
 &lt;532172BA.8020403@simplistix.co.uk&gt;
To: Chris Withers &lt;chris@simplistix.co.uk&gt;
In-Reply-To: &lt;532172BA.8020403@simplistix.co.uk&gt;
X-Mailer: Apple Mail (2.1874)
X-Pobox-Relay-ID: 36CB4A44-AAC6-11E3-AC4C-8D19802839F8-02456075!b-pb-sasl-quonix.pobox.com


--Apple-Mail=_2024AC90-F81C-4E34-A238-C9E394438F6F
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=windows-1252

well we were on mercurial before git, so our SVN migration was to =
mercurial, though it=92s just as simple moving from SVN to git directly, =
we did that at work.

However: when I migrate VCS=92s, I usually need to alter the migration =
utilities to support the following features that people usually don=92t =
seem to care about:

1. author mapping.  Ensure that author names/emails from the old system =
are updated in the new system the way we want them to be.

2. commit message rewriting.   We make a lot of use of revision numbers =
in commit messages (e.g. like r1234), so when we do the migration we =
like to rewrite the commit messages with the new numbers as well (this =
of course means the transfer system needs to have those numbers =
available up front).

3. as far as tags and branches, I=92m non-negotiable in that these must =
transfer *exactly* with no shenanigans, naming changes, loss of history, =
etc..  hg-git has some silly restrictions that it doesn=92t support hg =
branches, only =93bookmarks=94 which nobody uses, this is because hg-git =
is trying to do a hg&lt;-&gt;git bidirectional workflow, which is ludicrous.  =
I don=92t need that, so I wrote https://bitbucket.org/zzzeek/hggitonce =
based on it to do what I want.

When you move VCS=92s, you need to make sure you capture a file that is =
the translation map from old to new revision identifiers.  you then use =
this map to rewrite all of the issues and comments in your issue =
tracking system to refer to the new numbers.   Using trac, this is =
obviously pretty easy since you just access the database directly and do =
the work.    I=92ve done this twice with trac - once with svn-&gt; hg, and =
then with hg-&gt;git.

As far as github for issue tracking, you have much bigger issues there, =
since github does not allow a pure import of issues which include =
original timestamps and author names.  I tried to ask them about that =
once and I got a pretty dismissive response from some sleepy 20 year old =
kid.    Again, it=92s not an option to lose the timestamps on your =
issues nor to lose author names for people who have accounts in github.

That=92s why I think bitbucket=92s system is superior in many ways:

1. its workflow is much more similar to trac and is easier to map
2. their support is 150% top notch and I have direct email access to =
several people there=20
3. they have a full blown import/export system that accepts author names =
and timestamps, you can rewrite your issue database as many times as you =
like.

To transfer issues from trac to bitbucket I wrote bbutils: =
https://bitbucket.org/zzzeek/bbutils.   It=92s got some quirks but does =
the job.   When you transfer your issues to bitbucket, you need to be =
careful which author names you take over as a lot of them aren=92t on =
bitbucket, and also you need to run through the issues about 30 minutes =
after import and clear the =93spam=94 flags that their spam bot will =
invariably set up.  the BB devs can do this for you, but so I don=92t =
have to bother them I wrote a =93spam=94 command in bbutils that does =
this for you.

I=92m not sure how twisted handles spam with their trac install, that=92s =
ultimately the reason I had to move.  the spammers found me, and none of =
trac=92s underdocumented and obtuse spam tools could do anything about =
it.    super glad I don=92t host any more applications or email anymore.

On Mar 13, 2014, at 4:56 AM, Chris Withers &lt;chris@simplistix.co.uk&gt; =
wrote:

&gt; Hi Mike,
&gt;=20
&gt; How much of what you did with sqlalchemy is a recipe that the Twisted=20=

&gt; guys could follow?
&gt;=20
&gt; Chris
&gt;=20
&gt;=20
&gt; -------- Original Message --------
&gt; Subject: Re: [Twisted-Python] git?
&gt; Date: Thu, 13 Mar 2014 15:14:53 +0800
&gt; From: HawkOwl &lt;hawkowl@atleastfornow.net&gt;
&gt; Reply-To: Twisted general discussion =
&lt;twisted-python@twistedmatrix.com&gt;
&gt; To: twisted-python@twistedmatrix.com
&gt;=20
&gt; Signed PGP part
&gt; Hi Chris,
&gt;=20
&gt; I can assure you this topic has come up many times - and unless we
&gt; have volunteers that can manage to get the several thousand tickets
&gt; with comment history into GitHub (which I'm sure that nobody wants to
&gt; get tied to when you have a workflow already), without losing
&gt; anything, then it's most likely Twisted is sticking with svn and trac.
&gt;=20
&gt; Git has svn support - see `git svn`. I have merged several branches
&gt; with it, and it works great. Use that instead, if you get commit =
access :)
&gt;=20
&gt; -hawkowl
&gt;=20
&gt; On 13/03/14 14:53, Chris Withers wrote:
&gt; &gt; On 12/03/2014 23:52, Glyph Lefkowitz wrote:
&gt; &gt;&gt; On Mar 12, 2014, at 3:43 PM, Christopher Armstrong
&gt; &gt;&gt; &lt;radix@twistedmatrix.com &lt;mailto:radix@twistedmatrix.com&gt;&gt;
&gt; &gt;&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; On March 12, 2014 at 5:39:36 PM, Chris Withers
&gt; &gt;&gt;&gt; (chris@simplistix.co.uk &lt;mailto:chris@simplistix.co.uk&gt;)
&gt; &gt;&gt;&gt; wrote:
&gt; &gt;&gt;&gt;&gt; Hi All,
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; Is there a git mirror of the twisted repo anywhere?
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt; Yes, it=92s at
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; http://github.com/twisted/twisted
&gt; &gt;&gt;
&gt; &gt;&gt; Also at https://code.twistedmatrix.com/git/Twisted.
&gt; &gt;&gt;
&gt; &gt;&gt; However, if you actually want to /use/ this mirror to work on
&gt; &gt;&gt; Twisted, &lt;https://twistedmatrix.com/trac/wiki/GitMirror&gt; has some
&gt; &gt;&gt; useful information.
&gt; &gt;
&gt; &gt; Not to be too contentious, but when do you reckon you guys will
&gt; &gt; switch the main repo to git?
&gt; &gt;
&gt; &gt; The difficulty of using svn for the main repo is that it only has
&gt; &gt; a subset of the features of a dvcs such as git.
&gt; &gt;
&gt; &gt; The difficulty of using git for the main repo is if you have people
&gt; &gt; who still want to interact via svn. Well, it would be if you didn't
&gt; &gt; use github:
&gt; &gt;
&gt; &gt; https://help.github.com/articles/support-for-subversion-clients
&gt; &gt;
&gt; &gt; I do wonder how many people know about the above feature, it blows
&gt; &gt; my mind a bit that it's actually there in the first place...
&gt; &gt;
&gt; &gt; Anyway, just a thought :-)
&gt; &gt;
&gt; &gt; Chris
&gt; &gt;
&gt;=20
&gt;=20
&gt; _______________________________________________
&gt; Twisted-Python mailing list
&gt; Twisted-Python@twistedmatrix.com
&gt; http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
&gt;=20
&gt; ______________________________________________________________________
&gt; This email has been scanned by the Symantec Email Security.cloud =
service.
&gt; For more information please visit http://www.symanteccloud.com
&gt; ______________________________________________________________________
&gt;=20
&gt;=20


--Apple-Mail=_2024AC90-F81C-4E34-A238-C9E394438F6F
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename=signature.asc
Content-Type: application/pgp-signature;
	name=signature.asc
Content-Description: Message signed with OpenPGP using GPGMail

-----BEGIN PGP SIGNATURE-----
Comment: GPGTools - http://gpgtools.org

iQEcBAEBAgAGBQJTIdIaAAoJEDMCOcHE2v7hsH4H/iFwEBWZpBNkKYD0ICDTCZSD
uhgLHnhhOPcAVLzpZO1nCuIYSALdIC9OyupR7JLQmtKFUpa/Q3G7OII3aktgvMyk
YBijq1D3CyVSgvy3zFmchzbQyhmPkncTTawP6J3+Qrq5aMLAMIhErhWzVhVPfim3
oINsROr+m6AbBxRvqLRC2hUI6a03tHfcKlrfzkGqkenzcoEDKaAzrvk6O57E8a//
1CoIBLwiQoF0qrXihjzSUQy738xr1eHijAn/vNNMALQNVEpWVJ2Y81GHi0t0cFOt
rNvIvW/u9CbYwDOjGJCPg2mwyNBB+HS0DpC5WOBeFYvwgnAo+DwfvGNx5OBlZ+I=
=AWBk
-----END PGP SIGNATURE-----

--Apple-Mail=_2024AC90-F81C-4E34-A238-C9E394438F6F--
]