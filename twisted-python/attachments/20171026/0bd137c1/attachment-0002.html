<tt>
&lt;html&nbsp;style=&quot;direction:&nbsp;ltr;&quot;&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&gt;body&nbsp;p&nbsp;{&nbsp;margin-bottom:&nbsp;0cm;&nbsp;margin-top:&nbsp;0pt;&nbsp;}&nbsp;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bidimailui-charset-is-forced=&quot;true&quot;&nbsp;style=&quot;direction:&nbsp;ltr;&quot;&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Thanks&nbsp;Jason,&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;a&nbsp;more&nbsp;specific&nbsp;error&nbsp;message&nbsp;raised&nbsp;by&nbsp;github&nbsp;latest&nbsp;code&nbsp;[thanks!]&nbsp;the&nbsp;problem&nbsp;became&nbsp;clear.&lt;br&gt;<br>
I&nbsp;suggest&nbsp;to&nbsp;change&nbsp;the&nbsp;documentation&nbsp;of&nbsp;'optionsForClientTLS'&nbsp;-&lt;br&gt;<br>
&lt;br&gt;<br>
from:&lt;tt&gt;&lt;tt&gt;&lt;br&gt;<br>
ctx&nbsp;=&nbsp;ssl.optionsForClientTLS(hostName,&nbsp;trustRoot=root,&nbsp;clientCertificate=mycert)&lt;br&gt;<br>
&lt;/tt&gt;&lt;/tt&gt;&lt;br&gt;<br>
to:&lt;tt&gt;&lt;tt&gt;&lt;br&gt;<br>
&lt;/tt&gt;&lt;/tt&gt;&lt;tt&gt;&lt;tt&gt;&lt;tt&gt;ctx&nbsp;=&nbsp;ssl.optionsForClientTLS(commonName,&nbsp;trustRoot=root,&nbsp;clientCertificate=mycert)&lt;br&gt;<br>
&lt;/tt&gt;&lt;/tt&gt;&lt;/tt&gt;&lt;br&gt;<br>
That&nbsp;is,&nbsp;what&nbsp;this&nbsp;ctx&nbsp;(the&nbsp;contextFactory)&nbsp;really&nbsp;expects&nbsp;is&nbsp;the&nbsp;server's&nbsp;certificate&nbsp;commonName&nbsp;which&nbsp;often&nbsp;is,&nbsp;but&nbsp;not&nbsp;in&nbsp;my&nbsp;case,&nbsp;the&nbsp;server's&nbsp;hostName.&lt;br&gt;<br>
&lt;br&gt;<br>
Interestingly,&nbsp;Python's&nbsp;standard&nbsp;ssl&nbsp;package&nbsp;does&nbsp;not&nbsp;verify&nbsp;this&nbsp;field.&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&nbsp;Enoch.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;10/26/2017&nbsp;01:13&nbsp;AM,&nbsp;Jason&nbsp;Litzinger&nbsp;wrote:&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;cite=&quot;mid:20171026051351.GA1686@arch-tinker.localdomain&quot;&gt;<br>
&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;25,&nbsp;2017&nbsp;at&nbsp;08:07:26PM&nbsp;&#43;0000,&nbsp;Enoch&nbsp;W.&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;pre&nbsp;wrap=&quot;&quot;&gt;A&nbsp;known&nbsp;bug?<br>
&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hello&nbsp;Enoch,<br>
A&nbsp;question,&nbsp;does&nbsp;the&nbsp;server&nbsp;have&nbsp;an&nbsp;intermediate&nbsp;cert&nbsp;that&nbsp;it&nbsp;is&nbsp;using?&nbsp;&nbsp;<br>
If&nbsp;so,&nbsp;then&nbsp;the&nbsp;problem&nbsp;might&nbsp;be&nbsp;that&nbsp;your&nbsp;trust&nbsp;root&nbsp;needs&nbsp;both&nbsp;the&nbsp;CA&nbsp;<br>
and&nbsp;intermediate.<br>
<br>
I&nbsp;have&nbsp;some&nbsp;https&nbsp;test&nbsp;code&nbsp;I&nbsp;hacked&nbsp;together&nbsp;a&nbsp;while&nbsp;back&nbsp;(neither<br>
reviewed&nbsp;nor&nbsp;heavily&nbsp;tested,&nbsp;but&nbsp;same&nbsp;general&nbsp;idea).<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://github.com/jlitzingerdev/twisted-benchmarks/blob/https-benchmark/web_https.py&quot;&gt;https://github.com/jlitzingerdev/twisted-benchmarks/blob/https-benchmark/web_https.py&lt;/a&gt;<br>
<br>
If&nbsp;I&nbsp;omit&nbsp;the&nbsp;intermediate&nbsp;cert&nbsp;I&nbsp;get&nbsp;the&nbsp;same&nbsp;error.<br>
<br>
Cheers,<br>
-Jason<br>
<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
