<tt>
Thanks.&amp;nbsp;&nbsp;I&nbsp;updated&nbsp;the&nbsp;fix&nbsp;and&nbsp;the&nbsp;tests.&lt;br&gt;&lt;br&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;11/2/05,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;James&nbsp;Y&nbsp;Knight&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:foom@fuhm.net&quot;&gt;foom@fuhm.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;PADDING-LEFT:&nbsp;1ex;&nbsp;MARGIN:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;BORDER-LEFT:&nbsp;#ccc&nbsp;1px&nbsp;solid&quot;&gt;On&nbsp;Nov&nbsp;2,&nbsp;2005,&nbsp;at&nbsp;3:50&nbsp;PM,&nbsp;Justin&nbsp;Johnson&nbsp;wrote:&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;_cmdLineQuoteRe&nbsp;=&nbsp;re.compile(r'(\\*)&amp;quot;')&lt;br&gt;<br>
&amp;gt;&amp;nbsp;&amp;nbsp;def&nbsp;_cmdLineQuote(s):&lt;br&gt;&amp;gt;&nbsp;-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;'&amp;quot;'&nbsp;+&nbsp;_cmdLineQuoteRe.sub(r'\1\1\\&amp;quot;',&nbsp;s)&nbsp;+&nbsp;'&amp;quot;'&lt;br&gt;&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;quote&nbsp;=&nbsp;((&amp;quot;&nbsp;&amp;quot;&nbsp;in&nbsp;s)&nbsp;or&nbsp;(&amp;quot;\t&amp;quot;&nbsp;in&nbsp;s))&nbsp;and&nbsp;'&amp;quot;'&nbsp;or&nbsp;''&lt;br&gt;&amp;gt;&nbsp;+&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;quote&nbsp;+&nbsp;_cmdLineQuoteRe.sub(r'\1\1\\&amp;quot;',&nbsp;s)&nbsp;+&nbsp;quote<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;That&nbsp;should&nbsp;be&nbsp;checking&nbsp;for&nbsp;a&nbsp;doublequote&nbsp;in&nbsp;addition&nbsp;to&nbsp;space&nbsp;and&nbsp;tab.&lt;br&gt;&lt;br&gt;Also&nbsp;I&nbsp;just&nbsp;noticed&nbsp;another&nbsp;bug:&lt;br&gt;With&nbsp;input&nbsp;string&nbsp;(two&nbsp;characters):&lt;br&gt;&amp;quot;\&lt;br&gt;the&nbsp;output&nbsp;should&nbsp;be&nbsp;(6&nbsp;chars):&lt;br&gt;&amp;quot;\&amp;quot;\\&amp;quot;<br>
&lt;br&gt;but&nbsp;is&nbsp;currently&nbsp;completely&nbsp;incorrect:&lt;br&gt;&amp;quot;\&amp;quot;\&amp;quot;&lt;br&gt;&lt;br&gt;I&nbsp;think&nbsp;that&nbsp;second&nbsp;can&nbsp;be&nbsp;fixed&nbsp;with:&lt;br&gt;_cmdLineQuoteRe&nbsp;=&nbsp;re.compile(r'(\\*)&amp;quot;')&lt;br&gt;_cmdLineQuoteRe2&nbsp;=&nbsp;re.compile(r'(\\+)\Z')&lt;br&gt;def&nbsp;_cmdLineQuote(s):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&nbsp;'&amp;quot;'&nbsp;+&nbsp;_cmdLineQuoteRe2.sub(r&amp;quot;\1\1&amp;quot;,&nbsp;_cmdLineQuoteRe.sub&lt;br&gt;(r'\1\1\\&amp;quot;',&nbsp;s))&nbsp;+&nbsp;'&amp;quot;'&lt;br&gt;&lt;br&gt;James&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python<br>
&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;
</tt>
