<tt>
Thank&nbsp;you,&nbsp;it&nbsp;helps&nbsp;a&nbsp;lot.&nbsp;I&#39;ve&nbsp;made&nbsp;a&nbsp;mistake&nbsp;in&nbsp;calling&nbsp;callRemote. &lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Mar&nbsp;29,&nbsp;2010&nbsp;at&nbsp;4:51&nbsp;PM,&nbsp;Peter&nbsp;Westlake&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:peter.westlake@pobox.com&quot;&gt;peter.westlake@pobox.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;29&nbsp;Mar&nbsp;2010&nbsp;14:54&nbsp;+0300,&nbsp;&quot;Vlad&nbsp;Shevchenko&quot;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:vlad.shevchenko@gmail.com&quot;&gt;vlad.shevchenko@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;No&nbsp;one&nbsp;use&nbsp;AmpList?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Sat,&nbsp;Mar&nbsp;27,&nbsp;2010&nbsp;at&nbsp;11:45&nbsp;PM,&nbsp;Vlad&nbsp;Shevchenko&lt;br&gt;<br>
&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:vlad.shevchenko@gmail.com&quot;&gt;vlad.shevchenko@gmail.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;can&#39;t&nbsp;find&nbsp;any&nbsp;reference&nbsp;of&nbsp;how&nbsp;to&nbsp;use&nbsp;AmpList.&nbsp;What&nbsp;should&nbsp;be&nbsp;passed&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;callRemote?&nbsp;In&nbsp;command:&nbsp;arguments&nbsp;=&nbsp;Amp.List(...)&nbsp;or&nbsp;arguments&nbsp;=&nbsp;[(&#39;param&#39;,&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;AmpList(...))]?&nbsp;Responder&nbsp;params?&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Please,&nbsp;advice&nbsp;some&nbsp;refs&nbsp;or&nbsp;examples.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Here&#39;s&nbsp;an&nbsp;example.&nbsp;I&#39;ve&nbsp;missed&nbsp;out&nbsp;the&nbsp;other&nbsp;arguments&nbsp;for&nbsp;clarity.&nbsp;The&lt;br&gt;<br>
data&nbsp;being&nbsp;passed&nbsp;is&nbsp;a&nbsp;Unix-style&nbsp;environment&nbsp;string.&nbsp;It&nbsp;needs&nbsp;to&nbsp;be&lt;br&gt;<br>
reformatted&nbsp;to&nbsp;make&nbsp;it&nbsp;suitable&nbsp;for&nbsp;passing&nbsp;in&nbsp;an&nbsp;AmpList,&nbsp;but&nbsp;that&#39;s&lt;br&gt;<br>
just&nbsp;an&nbsp;implementation&nbsp;detail.&nbsp;It&#39;s&nbsp;because&nbsp;the&nbsp;AmpList&nbsp;requires&nbsp;the&lt;br&gt;<br>
dictionary&nbsp;keys&nbsp;to&nbsp;be&nbsp;declared&nbsp;in&nbsp;advance,&nbsp;but&nbsp;I&nbsp;want&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;pass&lt;br&gt;<br>
environment&nbsp;variables&nbsp;whose&nbsp;names&nbsp;are&nbsp;only&nbsp;known&nbsp;at&nbsp;run-time.&nbsp;Your&nbsp;code&lt;br&gt;<br>
might&nbsp;not&nbsp;need&nbsp;to&nbsp;do&nbsp;any&nbsp;of&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
First,&nbsp;the&nbsp;command:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; class&nbsp;RunCmd(amp.Command):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; arguments&nbsp;=&nbsp;[...,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(&#39;env&#39;,&nbsp; amp.AmpList([(&#39;var&#39;,&nbsp;amp.String()),&nbsp;(&#39;val&#39;,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;amp.String())])),&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...]&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Then&nbsp;the&nbsp;call:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;env&nbsp;is&nbsp;something&nbsp;like&nbsp;{&#39;PATH&#39;:&nbsp;&#39;/bin:/usr/bin&#39;,&nbsp;&#39;HOME&#39;:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;/home/peter&#39;}&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;It&nbsp;needs&nbsp;to&nbsp;be&nbsp;converted&nbsp;into&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;AmpList,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; like&nbsp;this:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;[{&#39;var&#39;:&nbsp;&#39;PATH&#39;,&nbsp;&#39;val&#39;:&nbsp;&#39;/bin:/usr/bin&#39;},&nbsp;{&#39;var&#39;:&nbsp;&#39;HOME&#39;,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#39;val&#39;:&nbsp;&#39;/home/peter&#39;}]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; amp_env&nbsp; =&nbsp;[{&#39;var&#39;:&nbsp;var,&nbsp;&#39;val&#39;:&nbsp;val}&nbsp;for&nbsp;(var,&nbsp;val)&nbsp;in&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; env.items()]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; d&nbsp;=&nbsp;self.protocol.callRemote(commands.RunCmd,&nbsp;...,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; env=amp_env,&nbsp;...)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Then&nbsp;the&nbsp;responder:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;runcmd(...,&nbsp;env,&nbsp;..):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;Implementation&nbsp;of&nbsp;the&nbsp;AMP&nbsp;command&nbsp;RunCmd.&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; ...&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &quot;&quot;&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;The&nbsp;&quot;env&quot;&nbsp;argument&nbsp;represents&nbsp;the&nbsp;environment&nbsp;of&nbsp;a&nbsp;process.&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;Convert&nbsp;it&nbsp;from&nbsp;the&nbsp;AmpList&nbsp;format&nbsp;back&nbsp;to&nbsp;a&nbsp;Python&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; dictionary.&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; #&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; envd&nbsp;=&nbsp;{}&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; for&nbsp;var&nbsp;in&nbsp;env:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; envd[var[&#39;var&#39;]]&nbsp;=&nbsp;var[&#39;val&#39;]&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; ...&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;{...}&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; commands.RunCmd.responder(runcmd)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Peter.&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;WBR,&nbsp;Vlad&nbsp;Shevchenko&lt;br&gt;&lt;br&gt;<br>

</tt>
