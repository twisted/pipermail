<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Tobias&lt;br&gt;&lt;br&gt;&lt;/div&gt;Some&nbsp;comments&nbsp;inline&nbsp;but&nbsp;first&nbsp;an&nbsp;update&nbsp;on&nbsp;the&nbsp;next&nbsp;load&nbsp;test&nbsp;slightly&nbsp;closer&nbsp;to&nbsp;my&nbsp;ultimate&nbsp;use&nbsp;case,&nbsp;which&nbsp;showed&nbsp;PyPy&nbsp;smoking&nbsp;the&nbsp;competition.&lt;br&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;My&nbsp;test&nbsp;is&nbsp;now&nbsp;a&nbsp;request&nbsp;to&nbsp;a&nbsp;URL&nbsp;scheme&nbsp;like&nbsp;this:&nbsp;/version/{app}/platform/{platform}.&nbsp;This&nbsp;gets&nbsp;translated&nbsp;into&nbsp;a&nbsp;get&nbsp;on&nbsp;Redis&nbsp;for&nbsp;{app}-{platform}&nbsp;and&nbsp;the&nbsp;value&nbsp;is&nbsp;returned&nbsp;to&nbsp;the&nbsp;client.&lt;br&gt;All&nbsp;tests&nbsp;were&nbsp;on&nbsp;Ubuntu&nbsp;12.10&nbsp;on&nbsp;an&nbsp;m1.small&nbsp;instance&nbsp;on&nbsp;AWS&nbsp;with&nbsp;the&nbsp;load&nbsp;test&nbsp;machine&nbsp;being&nbsp;an&nbsp;m1.large.&nbsp;The&nbsp;load&nbsp;test&nbsp;ran&nbsp;for&nbsp;about&nbsp;10&nbsp;minutes&nbsp;for&nbsp;each&nbsp;framework.&lt;br&gt;<br>
&lt;/div&gt;Using&nbsp;Cyclone&nbsp;1.1&nbsp;on&nbsp;Twisted&nbsp;13&nbsp;on&nbsp;PyPy&nbsp;2.0beta2&nbsp;I&nbsp;was&nbsp;averaging&nbsp;about&nbsp;1.8k&nbsp;r/s.&lt;br&gt;&lt;/div&gt;Using&nbsp;node-restify&nbsp;2.4.1&nbsp;and&nbsp;node-redis&nbsp;0.8.3&nbsp;node&nbsp;0.10.4&nbsp;I&nbsp;was&nbsp;doing&nbsp;about&nbsp;1.2&nbsp;r/s.&lt;br&gt;&lt;/div&gt;Go&nbsp;and&nbsp;Scala&nbsp;on&nbsp;Play&nbsp;were&nbsp;comparable&nbsp;to&nbsp;node.&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;This&nbsp;very&nbsp;simple&nbsp;load&nbsp;test&nbsp;has&nbsp;me&nbsp;very&nbsp;impressed&nbsp;with&nbsp;PyPys&nbsp;performance&nbsp;and&nbsp;I&nbsp;look&nbsp;forward&nbsp;to&nbsp;load&nbsp;testing&nbsp;our&nbsp;full&nbsp;app&nbsp;when&nbsp;it&amp;#39;s&nbsp;ready.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;comments,&nbsp;they&amp;#39;ve&nbsp;been&nbsp;very&nbsp;helpful.&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Apr&nbsp;22,&nbsp;2013&nbsp;at&nbsp;8:12&nbsp;AM,&nbsp;Tobias&nbsp;Oberstein&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:tobias.oberstein@tavendo.de&quot;&nbsp;target=&quot;_blank&quot;&gt;tobias.oberstein@tavendo.de&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;Tom,&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&amp;gt;which&nbsp;OS&nbsp;are&nbsp;you&nbsp;running&nbsp;on&nbsp;your&nbsp;EC2&nbsp;instance?&nbsp;Amazon&nbsp;Linux?&lt;br&gt;<br>
&amp;gt;I&nbsp;am&nbsp;running&nbsp;two&nbsp;m1.small&nbsp;Ubuntu&nbsp;12.10&nbsp;64bit&nbsp;in&nbsp;us-east-1,&nbsp;one&nbsp;for&nbsp;the&nbsp;web&nbsp;server&nbsp;and&nbsp;the&nbsp;other&nbsp;for&nbsp;the&nbsp;ab.&lt;br&gt;<br>
&amp;gt;&amp;gt;Which&nbsp;reactor&nbsp;are&nbsp;you&nbsp;running&nbsp;your&nbsp;Twisted&nbsp;test&nbsp;with?&nbsp;Epoll?&lt;br&gt;<br>
&amp;gt;Default&nbsp;Linux&nbsp;reactor,&nbsp;so&nbsp;it&amp;#39;s&nbsp;Epoll.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;ok,&nbsp;thats&nbsp;good.&nbsp;just&nbsp;wanted&nbsp;to&nbsp;make&nbsp;sure&nbsp;you&nbsp;are&nbsp;aware&nbsp;of&nbsp;this&nbsp;and&nbsp;make&nbsp;sure&nbsp;epoll&nbsp;is&nbsp;actually&nbsp;used.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;Are&nbsp;you&nbsp;running&nbsp;on&nbsp;CPython&nbsp;or&nbsp;PyPy?&lt;br&gt;<br>
&amp;gt;I&nbsp;am&nbsp;running&nbsp;on&nbsp;CPython&nbsp;with&nbsp;twisted&nbsp;13.0.0&nbsp;installed&nbsp;into&nbsp;a&nbsp;virtualenv,&nbsp;but&nbsp;please&nbsp;see&nbsp;my&nbsp;results&nbsp;for&nbsp;PyPy&nbsp;below,&nbsp;they&amp;#39;re&nbsp;far&nbsp;more&nbsp;impressive.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;thats&nbsp;also&nbsp;good&nbsp;(and&nbsp;I&nbsp;was&nbsp;somehow&nbsp;expecting&nbsp;this&nbsp;..&nbsp;at&nbsp;least&nbsp;thats&nbsp;also&nbsp;my&nbsp;experience).&lt;br&gt;<br>
&lt;br&gt;<br>
there&nbsp;is&nbsp;1&nbsp;thing&nbsp;to&nbsp;note&nbsp;when&nbsp;benchmarking&nbsp;networking&nbsp;stuff&nbsp;on&nbsp;PyPy&nbsp;vs&nbsp;CPython&nbsp;that&nbsp;I&nbsp;noticed&nbsp;in&nbsp;my&nbsp;testing:&lt;br&gt;<br>
&lt;br&gt;<br>
both&nbsp;the&nbsp;throughput&nbsp;(bits/s&nbsp;or&nbsp;reqs/s)&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;average&nbsp;(arithmetic&nbsp;mean)&nbsp;response&nbsp;times&nbsp;are&nbsp;far&nbsp;better&nbsp;with&nbsp;PyPy&nbsp;vs&nbsp;CPy&lt;br&gt;<br>
&lt;br&gt;<br>
BUT&nbsp;(my&nbsp;testings&nbsp;-&nbsp;Twisted/Autobahn/WebSocket):&nbsp;e.g.&nbsp;the&nbsp;95%&nbsp;quantile&nbsp;(and&nbsp;the&nbsp;worst&nbsp;case)&nbsp;response&nbsp;latency of&nbsp;PyPy&nbsp;is&nbsp;worse&nbsp;than&nbsp;CPy.&lt;br&gt;<br>
&lt;br&gt;<br>
this&nbsp;was&nbsp;PyPy&nbsp;1.6&nbsp;on&nbsp;both&nbsp;Linux&nbsp;(epoll)&nbsp;and&nbsp;FreeBSD&nbsp;(kqueue).&lt;br&gt;<br>
&lt;br&gt;<br>
the&nbsp;reason&nbsp;might&nbsp;be&nbsp;GC&nbsp;..&nbsp;PyPy&amp;#39;s&nbsp;GCs&nbsp;might&nbsp;be&nbsp;not&nbsp;as&nbsp;sophisticated&nbsp;as&nbsp;CPy&amp;#39;s&nbsp;(likely)&nbsp;or&nbsp;V8&amp;#39;s&nbsp;(definitely).&lt;br&gt;<br>
&lt;br&gt;<br>
note:&nbsp;this&nbsp;might&nbsp;have&nbsp;changed&nbsp;with&nbsp;PyPy&nbsp;2&nbsp;(did&nbsp;not&nbsp;test&nbsp;that).&nbsp;Armin&nbsp;at&nbsp;least&nbsp;was&nbsp;planning&nbsp;for&nbsp;a&nbsp;generational/incremental&nbsp;GC&nbsp;in&nbsp;PyPy.&nbsp;dunno.&lt;br&gt;<br>
&lt;br&gt;<br>
so:&nbsp;you&nbsp;might&nbsp;wanna&nbsp;test&nbsp;for&nbsp;latency&nbsp;also&nbsp;..&nbsp;I&amp;#39;d&nbsp;be&nbsp;interested&nbsp;in&nbsp;results.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;PyPy&nbsp;2.0beta2&nbsp;had&nbsp;comparable&nbsp;95&nbsp;percentile&nbsp;latency&nbsp;to&nbsp;all&nbsp;the&nbsp;other&nbsp;frameworks&nbsp;in&nbsp;my&nbsp;limited&nbsp;test&nbsp;so&nbsp;maybe&nbsp;that&amp;#39;s&nbsp;the&nbsp;improvements&nbsp;you&nbsp;mentioned?&nbsp;Or&nbsp;maybe&nbsp;my&nbsp;naive&nbsp;load&nbsp;tests,&nbsp;but&nbsp;I&nbsp;like&nbsp;to&nbsp;think&nbsp;it&amp;#39;s&nbsp;the&nbsp;improvements.&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
regarding&nbsp;GC,&nbsp;V8&nbsp;and&nbsp;Erlang&nbsp;(and&nbsp;possibly&nbsp;that&nbsp;other&nbsp;VMs&nbsp;with&nbsp;the&nbsp;J&nbsp;at&nbsp;the&nbsp;beginning)&nbsp;have&nbsp;an&nbsp;edge&nbsp;..&lt;br&gt;<br>
&lt;br&gt;<br>
both&nbsp;LuaJIT&nbsp;and&nbsp;PyPy&nbsp;plan&nbsp;to&nbsp;improve&nbsp;on&nbsp;this&nbsp;though&nbsp;..&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;much&nbsp;about&nbsp;the&nbsp;workings&nbsp;of&nbsp;the&nbsp;various&nbsp;GCs&nbsp;but&nbsp;my&nbsp;feeling&nbsp;is&nbsp;I&nbsp;wasn&amp;#39;t&nbsp;really&nbsp;stressing&nbsp;the&nbsp;GC&nbsp;with&nbsp;my&nbsp;limited&nbsp;test&nbsp;as&nbsp;there&nbsp;weren&amp;#39;t&nbsp;very&nbsp;many&nbsp;data&nbsp;structures&nbsp;in&nbsp;play.&lt;br&gt;<br>
That&nbsp;said&nbsp;over&nbsp;10&nbsp;minute&nbsp;load&nbsp;tests&nbsp;I&nbsp;didn&amp;#39;t&nbsp;notice&nbsp;any&nbsp;blips&nbsp;in&nbsp;r/s&nbsp;or&nbsp;response&nbsp;times&nbsp;so&nbsp;for&nbsp;my&nbsp;limited&nbsp;test&nbsp;it&nbsp;was&nbsp;all&nbsp;good.&lt;br&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
Tobias&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
