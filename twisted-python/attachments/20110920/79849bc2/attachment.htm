<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-size:&nbsp;14px;&nbsp;font-family:&nbsp;Calibri,&nbsp;sans-serif;&nbsp;&quot;&gt;&lt;div&gt;In&nbsp;your&nbsp;Protocol,&nbsp;I&nbsp;would&nbsp;implement&nbsp;a&nbsp;specific&nbsp;Error&nbsp;that&nbsp;&amp;nbsp;might&nbsp;be&nbsp;returned&nbsp;by&nbsp;the&nbsp;server&nbsp;in&nbsp;such&nbsp;burst&nbsp;situations.&lt;/div&gt;&lt;div&gt;The&nbsp;clients&nbsp;should&nbsp;interpret&nbsp;that&nbsp;error&nbsp;in&nbsp;a&nbsp;way&nbsp;that&nbsp;lets&nbsp;them&nbsp;reconnect&nbsp;to&nbsp;the&nbsp;server&nbsp;after&nbsp;a&nbsp;randomly&nbsp;chosen&nbsp;interval.&lt;/div&gt;&lt;div&gt;This&nbsp;way&nbsp;you&nbsp;immediately&nbsp;eliminate&nbsp;the&nbsp;burst&nbsp;without&nbsp;running&nbsp;into&nbsp;the&nbsp;situation&nbsp;where&nbsp;you&nbsp;might&nbsp;get&nbsp;another&nbsp;and&nbsp;another&nbsp;and&nbsp;another&amp;#8230;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;good&nbsp;help&nbsp;for&nbsp;that&nbsp;might&nbsp;be&nbsp;the&nbsp;TR-069&nbsp;protocol&nbsp;specification,&nbsp;which&nbsp;deals&nbsp;with&nbsp;HTTP&nbsp;connections&nbsp;from&nbsp;1&nbsp;server&nbsp;to&nbsp;millions&nbsp;(!)&nbsp;of&nbsp;clients:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://www.broadband-forum.org/technical/download/TR-069_Amendment-3.pdf&quot;&gt;http://www.broadband-forum.org/technical/download/TR-069_Amendment-3.pdf&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;id=&quot;OLK_SRC_BODY_SECTION&quot;&gt;&lt;div&nbsp;style=&quot;font-family:Calibri;&nbsp;font-size:11pt;&nbsp;text-align:left;&nbsp;color:black;&nbsp;BORDER-BOTTOM:&nbsp;medium&nbsp;none;&nbsp;BORDER-LEFT:&nbsp;medium&nbsp;none;&nbsp;PADDING-BOTTOM:&nbsp;0in;&nbsp;PADDING-LEFT:&nbsp;0in;&nbsp;PADDING-RIGHT:&nbsp;0in;&nbsp;BORDER-TOP:&nbsp;#b5c4df&nbsp;1pt&nbsp;solid;&nbsp;BORDER-RIGHT:&nbsp;medium&nbsp;none;&nbsp;PADDING-TOP:&nbsp;3pt&quot;&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;From:&nbsp;&lt;/span&gt;&nbsp;Don&nbsp;Schoeman&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:don@delphexonline.com&quot;&gt;don@delphexonline.com&lt;/a&gt;&amp;gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Reply-To:&nbsp;&lt;/span&gt;&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Date:&nbsp;&lt;/span&gt;&nbsp;Tue,&nbsp;20&nbsp;Sep&nbsp;2011&nbsp;14:51:26&nbsp;+0200&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;To:&nbsp;&lt;/span&gt;&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:bold&quot;&gt;Subject:&nbsp;&lt;/span&gt;&nbsp;[Twisted-Python]&nbsp;Protection&nbsp;against&nbsp;flooding&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&gt;Hi&nbsp;all,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Before&nbsp;I&nbsp;start&nbsp;digging&nbsp;in&nbsp;the&nbsp;Twisted&nbsp;code,&nbsp;I'd&nbsp;just&nbsp;like&nbsp;to&nbsp;bump<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;off&nbsp;you&nbsp;in&nbsp;case&nbsp;the&nbsp;solution&nbsp;is&nbsp;obvious...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;clients&nbsp;having&nbsp;permanent&nbsp;connections&nbsp;to&nbsp;my&nbsp;TCP<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.&nbsp;These&nbsp;clients&nbsp;are&nbsp;devices&nbsp;that&nbsp;will&nbsp;buffer&nbsp;data&nbsp;if&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can't&nbsp;connect&nbsp;to&nbsp;the&nbsp;server.&nbsp;I&nbsp;can&nbsp;see&nbsp;a&nbsp;possible&nbsp;problem&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;if/when&nbsp;for&nbsp;whatever&nbsp;reason&nbsp;there&nbsp;is&nbsp;downtime&nbsp;on&nbsp;my&nbsp;server<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;the&nbsp;network&nbsp;and&nbsp;all&nbsp;these&nbsp;devices&nbsp;start&nbsp;connecting&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transmitting&nbsp;their&nbsp;buffered&nbsp;data&nbsp;once&nbsp;the&nbsp;server&nbsp;is&nbsp;back&nbsp;up,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;potentially&nbsp;causing&nbsp;server&nbsp;flooding.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;What&nbsp;would&nbsp;be&nbsp;a&nbsp;good&nbsp;area&nbsp;to&nbsp;start&nbsp;looking&nbsp;into&nbsp;preventing<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;something&nbsp;like&nbsp;this&nbsp;from&nbsp;happening?&nbsp;My&nbsp;first&nbsp;thoughts&nbsp;are&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simply&nbsp;limit&nbsp;an&nbsp;X&nbsp;number&nbsp;of&nbsp;new&nbsp;connections&nbsp;per&nbsp;minute&nbsp;(or&nbsp;per&nbsp;X<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seconds)&nbsp;and&nbsp;to&nbsp;simply&nbsp;immediately&nbsp;drop&nbsp;new&nbsp;connections&nbsp;if&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exceeds&nbsp;that&nbsp;limit.&nbsp;(I'd&nbsp;probably&nbsp;implement&nbsp;this&nbsp;on&nbsp;Protocol<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;level).&nbsp;Over&nbsp;time&nbsp;the&nbsp;connections&nbsp;should&nbsp;theoretically&nbsp;normalise<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;the&nbsp;buffered&nbsp;data&nbsp;on&nbsp;the&nbsp;devices&nbsp;are&nbsp;also&nbsp;limited.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Of&nbsp;course&nbsp;it&nbsp;would&nbsp;be&nbsp;better&nbsp;to&nbsp;not&nbsp;allow&nbsp;the&nbsp;connections&nbsp;from<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;being&nbsp;established&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;if&nbsp;the&nbsp;limits&nbsp;are&nbsp;exceeded<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(will&nbsp;be&nbsp;great&nbsp;for&nbsp;DDOS&nbsp;protection),&nbsp;but&nbsp;I&nbsp;have&nbsp;a&nbsp;feeling&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;might&nbsp;be&nbsp;difficult&nbsp;to&nbsp;achieve.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;thoughts/tips&nbsp;or&nbsp;even&nbsp;links&nbsp;to&nbsp;examples?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kind&nbsp;Regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Don&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;<br>
<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;<br>
&lt;/span&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
