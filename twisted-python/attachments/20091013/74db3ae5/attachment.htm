<tt>
Hello&nbsp;Reza,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;the&nbsp;solution&nbsp;you&nbsp;provided&nbsp;and&nbsp;I&nbsp;have&nbsp;to&nbsp;say,&nbsp;that&nbsp;changed&nbsp;a&nbsp;lot!&lt;/div&gt;&lt;div&gt;You&nbsp;gave&nbsp;me&nbsp;a&nbsp;better&nbsp;understanding&nbsp;of&nbsp;how&nbsp;things&nbsp;work&nbsp;with&nbsp;Twisted,&nbsp;and I&nbsp;really&nbsp;appreciate&nbsp;your&nbsp;response!&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;help!&lt;/div&gt;&lt;div&gt;Best&nbsp;regards,&lt;/div&gt;&lt;div&gt;Dirk&nbsp;Moors &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2009/10/13&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-python-request@twistedmatrix.com&quot;&gt;twisted-python-request@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Send&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;&amp;#39;help&amp;#39;&nbsp;to&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;mailto:twisted-python-request@twistedmatrix.com&quot;&gt;twisted-python-request@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;mailto:twisted-python-owner@twistedmatrix.com&quot;&gt;twisted-python-owner@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&amp;quot;Re:&nbsp;Contents&nbsp;of&nbsp;Twisted-Python&nbsp;digest...&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today&amp;#39;s&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;1.&nbsp;Re:&nbsp;Twisted&nbsp;Python&nbsp;vs.&nbsp;&amp;quot;Blocking&amp;quot;&nbsp;Python:&nbsp;Weird&nbsp; &nbsp;performance&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; on&nbsp;small&nbsp;operations.&nbsp;(Reza&nbsp;Lotun)&lt;br&gt;<br>
&nbsp; &nbsp;2.&nbsp;Re:&nbsp;Twisted-Python&nbsp;Digest,&nbsp;Vol&nbsp;67,&nbsp;Issue&nbsp;22&nbsp;(Dirk&nbsp;Moors)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
----------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;1&lt;br&gt;<br>
Date:&nbsp;Tue,&nbsp;13&nbsp;Oct&nbsp;2009&nbsp;15:04:06&nbsp;+0100&lt;br&gt;<br>
From:&nbsp;Reza&nbsp;Lotun&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rlotun@gmail.com&quot;&gt;rlotun@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;Twisted&nbsp;Python&nbsp;vs.&nbsp;&amp;quot;Blocking&amp;quot;&nbsp;Python:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Weird&nbsp; &nbsp;performance&nbsp;on&nbsp;small&nbsp;operations.&lt;br&gt;<br>
To:&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:95bb10690910130704o7c0ff2besf00dcf5918990dcf@mail.gmail.com&quot;&gt;95bb10690910130704o7c0ff2besf00dcf5918990dcf@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=UTF-8&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Dirk,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;took&nbsp;a&nbsp;look&nbsp;at&nbsp;your&nbsp;code&nbsp;sample&nbsp;and&nbsp;got&nbsp;the&nbsp;async&nbsp;benchmark&nbsp;to&nbsp;run&lt;br&gt;<br>
with&nbsp;the&nbsp;following&nbsp;values:&lt;br&gt;<br>
***&nbsp;Starting&nbsp;Asynchronous&nbsp;Benchmarks.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.000181913375854&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.000736951828003&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.00641012191772&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0741751194&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.675071001053&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;7.29738497734&nbsp;seconds.&lt;br&gt;<br>
&lt;br&gt;<br>
***&nbsp;Asynchronous&nbsp;Benchmarks&nbsp;Completed&nbsp;in&nbsp;8.16032314301&nbsp;seconds.&lt;br&gt;<br>
&lt;br&gt;<br>
Which,&nbsp;though&nbsp;still&nbsp;quite&nbsp;a&nbsp;bit&nbsp;slower&nbsp;than&nbsp;the&nbsp;synchronous&nbsp;version,&lt;br&gt;<br>
is&nbsp;still&nbsp;much&nbsp;better&nbsp;than&nbsp;the&nbsp;40&nbsp;sec.&nbsp;mark&nbsp;that&nbsp;you&nbsp;were&nbsp;experiencing.&lt;br&gt;<br>
My&nbsp;modified&nbsp;version&nbsp;simply&nbsp;returned&nbsp;defer.succeed&nbsp;from&nbsp;your&nbsp;aync&lt;br&gt;<br>
block-compute&nbsp;functions.&lt;br&gt;<br>
&lt;br&gt;<br>
i.e.&nbsp;Instead&nbsp;of&nbsp;your&nbsp;initial&nbsp;example:&lt;br&gt;<br>
def&nbsp;int2binAsync(anInteger):&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;packStruct(i):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; #Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;struct.pack(&amp;quot;i&amp;quot;,&nbsp;i)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; d&nbsp;=&nbsp;defer.Deferred()&lt;br&gt;<br>
&nbsp; &nbsp; d.addCallback(packStruct)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; reactor.callLater(0,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; d.callback,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; anInteger)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; return&nbsp;d&lt;br&gt;<br>
&lt;br&gt;<br>
my&nbsp;version&nbsp;does:&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;int2binAsync(anInteger):&lt;br&gt;<br>
&nbsp; &nbsp; return&nbsp;defer.succeed(struct.pack(&amp;#39;i&amp;#39;,&nbsp;anInteger))&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;few&nbsp;things&nbsp;to&nbsp;note&nbsp;in&nbsp;general&nbsp;however:&lt;br&gt;<br>
1)&nbsp;Twisted&nbsp;shines&nbsp;for&nbsp;block&nbsp;I/O&nbsp;operations&nbsp;-&nbsp;i.e.&nbsp;networking.&nbsp;A&lt;br&gt;<br>
compute&nbsp;intesive&nbsp;process&nbsp;will&nbsp;not&nbsp;necessarily&nbsp;yield&nbsp;any&nbsp;gains&nbsp;in&lt;br&gt;<br>
performance&nbsp;by&nbsp;using&nbsp;Twisted&nbsp;since&nbsp;the&nbsp;Python&nbsp;GIL&nbsp;exists&nbsp;(a&nbsp;global&lt;br&gt;<br>
lock).&lt;br&gt;<br>
&lt;br&gt;<br>
2)&nbsp;If&nbsp;you&nbsp;are&nbsp;doing&nbsp;computations&nbsp;that&nbsp;use&nbsp;a&nbsp;C&nbsp;module&nbsp;(unforunately&lt;br&gt;<br>
struct&nbsp;pre&nbsp;2.6&nbsp;I&nbsp;believe&nbsp;doesn&amp;#39;t&nbsp;use&nbsp;a&nbsp;C&nbsp;module),&nbsp;there&nbsp;may&nbsp;be&nbsp;a&lt;br&gt;<br>
chance&nbsp;that&nbsp;the&nbsp;C&nbsp;module&nbsp;releases&nbsp;the&nbsp;GIL,&nbsp;allowing&nbsp;you&nbsp;to&nbsp;do&nbsp;those&lt;br&gt;<br>
computations&nbsp;in&nbsp;a&nbsp;thread.&nbsp;In&nbsp;this&nbsp;case&nbsp;you&amp;#39;d&nbsp;be&nbsp;better&nbsp;off&nbsp;using&lt;br&gt;<br>
deferToThread&nbsp;as&nbsp;suggested&nbsp;earlier.&lt;br&gt;<br>
&lt;br&gt;<br>
3)&nbsp;There&nbsp;is&nbsp;some&nbsp;(usually&nbsp;minimal&nbsp;but&nbsp;it&nbsp;exists)&nbsp;overhead&nbsp;to&nbsp;using&lt;br&gt;<br>
Twisted.&nbsp;Instead&nbsp;of&nbsp;computing&nbsp;a&nbsp;bunch&nbsp;of&nbsp;stuff&nbsp;serially&nbsp;and&nbsp;returning&lt;br&gt;<br>
your&nbsp;answer&nbsp;as&nbsp;in&nbsp;your&nbsp;sync&nbsp;example,&nbsp;you&amp;#39;re&nbsp;wrapping&nbsp;everything&nbsp;up&nbsp;in&lt;br&gt;<br>
deferreds&nbsp;and&nbsp;starting&nbsp;a&nbsp;reactor&nbsp;-&nbsp;it&amp;#39;s&nbsp;definitely&nbsp;going&nbsp;to&nbsp;be&nbsp;a&nbsp;bit&lt;br&gt;<br>
slower&nbsp;than&nbsp;the&nbsp;pure&nbsp;synchronous&nbsp;version&nbsp;for&nbsp;this&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
Hope&nbsp;that&nbsp;makes&nbsp;sense.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Reza&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Reza&nbsp;Lotun&lt;br&gt;<br>
mobile:&nbsp;+44&nbsp;(0)7521&nbsp;310&nbsp;763&lt;br&gt;<br>
email:&nbsp; &lt;a&nbsp;href=&quot;mailto:rlotun@gmail.com&quot;&gt;rlotun@gmail.com&lt;/a&gt;&lt;br&gt;<br>
work:&nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:reza@tweetdeck.com&quot;&gt;reza@tweetdeck.com&lt;/a&gt;&lt;br&gt;<br>
twitter:&nbsp;@rlotun&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Tue,&nbsp;13&nbsp;Oct&nbsp;2009&nbsp;16:18:35&nbsp;+0200&lt;br&gt;<br>
From:&nbsp;Dirk&nbsp;Moors&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:dirkmoors@gmail.com&quot;&gt;dirkmoors@gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;Twisted-Python&nbsp;Digest,&nbsp;Vol&nbsp;67,&nbsp;Issue&nbsp;22&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &amp;lt;&lt;a&nbsp;href=&quot;mailto:cf75a1410910130718m53645515oc65f0890366a12f2@mail.gmail.com&quot;&gt;cf75a1410910130718m53645515oc65f0890366a12f2@mail.gmail.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;iso-8859-1&amp;quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Hello&nbsp;Valeriy,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;tried&nbsp;the&nbsp;thing&nbsp;you&nbsp;suggested,&nbsp;and&nbsp;I&nbsp;attached&nbsp;the&nbsp;(updated)&nbsp;code.&lt;br&gt;<br>
Unfortunatly,&nbsp;the&nbsp;new&nbsp;code&nbsp;was&nbsp;even&nbsp;slower,&nbsp;producing&nbsp;the&nbsp;following&nbsp;results:&lt;br&gt;<br>
&lt;br&gt;<br>
***&nbsp;Starting&nbsp;Asynchronous&nbsp;Benchmarks.&nbsp;(Using&nbsp;Twisted,&nbsp;with&lt;br&gt;<br>
&amp;quot;deferred-decorator&amp;quot;)&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;56.0279998779&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;56.0130000114&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;56.010999918&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;56.0410001278&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;56.3069999218&nbsp;seconds.&lt;br&gt;<br>
&nbsp; -&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;58.8910000324&lt;br&gt;<br>
seconds.&lt;br&gt;<br>
***&nbsp;Asynchronous&nbsp;Benchmarks&nbsp;Completed&nbsp;in&nbsp;59.4659998417&nbsp;seconds.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;suspect&nbsp;that&nbsp;this&nbsp;would&nbsp;me&nbsp;more&nbsp;inefficient&nbsp;because&nbsp;with&nbsp;the&nbsp;deferToThread&lt;br&gt;<br>
function&nbsp;in&nbsp;place,&nbsp;every&nbsp;single&nbsp;operation&nbsp;will&nbsp;be&nbsp;executed&nbsp;in&nbsp;its&nbsp;own&lt;br&gt;<br>
thread,&nbsp;which&nbsp;means:&lt;br&gt;<br>
(1&nbsp;x&nbsp;2)&nbsp;+&nbsp;(10&nbsp;x&nbsp;2)&nbsp;+&nbsp;(100&nbsp;x&nbsp;2)&nbsp;+&nbsp;(1000&nbsp;x&nbsp;2)&nbsp;+&nbsp;(10000&nbsp;x&nbsp;2)&nbsp;+&nbsp;(100000&nbsp;x&nbsp;2)&lt;br&gt;<br>
threads....which&nbsp;is...a&nbsp;lot.&lt;br&gt;<br>
&lt;br&gt;<br>
Maybe&nbsp;the&nbsp;problem&nbsp;lies&nbsp;in&nbsp;the&nbsp;way&nbsp;I&nbsp;test&nbsp;the&nbsp;code?&nbsp;I&nbsp;understand&nbsp;that&nbsp;using&lt;br&gt;<br>
the&nbsp;asynchronous&nbsp;testcode&nbsp;this&nbsp;way&nbsp;(generating&nbsp;the&nbsp;deferreds&nbsp;using&nbsp;a&lt;br&gt;<br>
FOR-loop),&nbsp;a&nbsp;lot&nbsp;of&nbsp;deferreds&nbsp;are&nbsp;generated&nbsp;before&nbsp;the&nbsp;reactor&nbsp;starts&lt;br&gt;<br>
calling&nbsp;the&nbsp;deferred-callbacks.....would&nbsp;there&nbsp;be&nbsp;another,&nbsp;better&nbsp;way&nbsp;to&lt;br&gt;<br>
test&nbsp;the&nbsp;code?&lt;br&gt;<br>
The&nbsp;reason&nbsp;I&nbsp;need&nbsp;to&nbsp;now&nbsp;which&nbsp;one&nbsp;is&nbsp;faster&nbsp;(async&nbsp;vs&nbsp;sync&nbsp;functions)&nbsp;is&lt;br&gt;<br>
because&nbsp;I&nbsp;need&nbsp;to&nbsp;decide&nbsp;on&nbsp;whetehr&nbsp;or&nbsp;not&nbsp;I&nbsp;should&nbsp;re-evaluate&nbsp;the&nbsp;code&nbsp;I&lt;br&gt;<br>
just&nbsp;recently&nbsp;finished&nbsp;building.&lt;br&gt;<br>
&lt;br&gt;<br>
Any&nbsp;other&nbsp;ideas&nbsp;maybe?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;in&nbsp;advance,&lt;br&gt;<br>
Dirk&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
________________________________________________________________________________________________________________________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Message:&nbsp;3&lt;br&gt;<br>
&amp;gt;&nbsp;Date:&nbsp;Tue,&nbsp;13&nbsp;Oct&nbsp;2009&nbsp;09:41:19&nbsp;-0400&lt;br&gt;<br>
&amp;gt;&nbsp;From:&nbsp;Valeriy&nbsp;Pogrebitskiy&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:vpogrebi@verizon.net&quot;&gt;vpogrebi@verizon.net&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Subject:&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;Twisted&nbsp;Python&nbsp;vs.&nbsp;&amp;quot;Blocking&amp;quot;&nbsp;Python:&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; Weird&nbsp;performance&nbsp;on&nbsp;small&nbsp;operations.&lt;br&gt;<br>
&amp;gt;&nbsp;To:&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Message-ID:&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:EDB2B354-B25D-4A98-AC9D-B9745CA6C3AB@verizon.net&quot;&gt;EDB2B354-B25D-4A98-AC9D-B9745CA6C3AB@verizon.net&lt;/a&gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Content-Type:&nbsp;text/plain;&nbsp;charset=&amp;quot;us-ascii&amp;quot;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Dirk,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Using&nbsp;deferred&nbsp;directly&nbsp;in&nbsp;your&nbsp;bin2intAsync()&nbsp;may&nbsp;be&nbsp;somewhat&nbsp;less&lt;br&gt;<br>
&amp;gt;&nbsp;efficient&nbsp;than&nbsp;some&nbsp;other&nbsp;way&nbsp;described&nbsp;in&nbsp;Recipe&nbsp;439358:&nbsp;[Twisted]&lt;br&gt;<br>
&amp;gt;&nbsp; From&nbsp;blocking&nbsp;functions&nbsp;to&nbsp;deferred&nbsp;functions&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;recipe&nbsp;(&lt;a&nbsp;href=&quot;http://code.activestate.com/recipes/439358/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://code.activestate.com/recipes/439358/&lt;/a&gt;)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;You&nbsp;would&nbsp;get&nbsp;same&nbsp;effect&nbsp;(asynchronous&nbsp;execution)&nbsp;-&nbsp;but&nbsp;potentially&lt;br&gt;<br>
&amp;gt;&nbsp;more&nbsp;efficiently&nbsp;-&nbsp;by&nbsp;just&nbsp;decorating&nbsp;your&nbsp;synchronous&nbsp;methods&nbsp;as:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;from&nbsp;twisted.internet.threads&nbsp;import&nbsp;deferToThread&lt;br&gt;<br>
&amp;gt;&nbsp;deferred&nbsp;=&nbsp;deferToThread.__get__&lt;br&gt;<br>
&amp;gt;&nbsp;....&lt;br&gt;<br>
&amp;gt;&nbsp;@deferred&lt;br&gt;<br>
&amp;gt;&nbsp;def&nbsp;int2binAsync(anInteger):&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp;#Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp;return&nbsp;struct.pack(&amp;quot;i&amp;quot;,&nbsp;anInteger)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;@deferred&lt;br&gt;<br>
&amp;gt;&nbsp;def&nbsp;bin2intAsync(aBin):&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp;#Unpacks&nbsp;a&nbsp;bytestring&nbsp;into&nbsp;an&nbsp;integer&lt;br&gt;<br>
&amp;gt;&nbsp; &nbsp; &nbsp;return&nbsp;struct.unpack(&amp;quot;i&amp;quot;,&nbsp;aBin)[0]&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Kind&nbsp;regards,&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Valeriy&nbsp;Pogrebitskiy&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:vpogrebi@verizon.net&quot;&gt;vpogrebi@verizon.net&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Oct&nbsp;13,&nbsp;2009,&nbsp;at&nbsp;9:18&nbsp;AM,&nbsp;Dirk&nbsp;Moors&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Hello&nbsp;Everyone!&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;My&nbsp;name&nbsp;is&nbsp;Dirk&nbsp;Moors,&nbsp;and&nbsp;since&nbsp;4&nbsp;years&nbsp;now,&nbsp;I&amp;#39;ve&nbsp;been&nbsp;involved&nbsp;in&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;developing&nbsp;a&nbsp;cloud&nbsp;computing&nbsp;platform,&nbsp;using&nbsp;Python&nbsp;as&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;programming&nbsp;language.&nbsp;A&nbsp;year&nbsp;ago&nbsp;I&nbsp;discovered&nbsp;Twisted&nbsp;Python,&nbsp;and&nbsp;it&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;got&nbsp;me&nbsp;very&nbsp;interested,&nbsp;upto&nbsp;the&nbsp;point&nbsp;where&nbsp;I&nbsp;made&nbsp;the&nbsp;decision&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;convert&nbsp;our&nbsp;platform&nbsp;(in&nbsp;progress)&nbsp;to&nbsp;a&nbsp;Twisted&nbsp;platform.&nbsp;One&nbsp;year&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;later&nbsp;I&amp;#39;m&nbsp;still&nbsp;very&nbsp;enthousiastic&nbsp;about&nbsp;the&nbsp;overal&nbsp;performance&nbsp;and&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;stability,&nbsp;but&nbsp;last&nbsp;week&nbsp;I&nbsp;encountered&nbsp;something&nbsp;I&nbsp;did&amp;#39;t&nbsp;expect;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;It&nbsp;appeared&nbsp;that&nbsp;it&nbsp;was&nbsp;less&nbsp;efficient&nbsp;to&nbsp;run&nbsp;small&nbsp;&amp;quot;atomic&amp;quot;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;operations&nbsp;in&nbsp;different&nbsp;deferred-callbacks,&nbsp;when&nbsp;compared&nbsp;to&nbsp;running&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;these&nbsp;&amp;quot;atomic&amp;quot;&nbsp;operations&nbsp;together&nbsp;in&nbsp;&amp;quot;blocking&amp;quot;&nbsp;mode.&nbsp;Am&nbsp;I&nbsp;doing&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;something&nbsp;wrong&nbsp;here?&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;To&nbsp;prove&nbsp;the&nbsp;problem&nbsp;to&nbsp;myself,&nbsp;I&nbsp;created&nbsp;the&nbsp;following&nbsp;example&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;(Full&nbsp;source-&nbsp;and&nbsp;test&nbsp;code&nbsp;is&nbsp;attached):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;import&nbsp;struct&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;def&nbsp;int2binAsync(anInteger):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;def&nbsp;packStruct(i):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;struct.pack(&amp;quot;i&amp;quot;,&nbsp;i)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;d&nbsp;=&nbsp;defer.Deferred()&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;d.addCallback(packStruct)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;reactor.callLater(0,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;d.callback,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;anInteger)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;return&nbsp;d&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;def&nbsp;bin2intAsync(aBin):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;def&nbsp;unpackStruct(p):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#Unpacks&nbsp;a&nbsp;bytestring&nbsp;into&nbsp;an&nbsp;integer&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;struct.unpack(&amp;quot;i&amp;quot;,&nbsp;p)[0]&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;d&nbsp;=&nbsp;defer.Deferred()&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;d.addCallback(unpackStruct)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;reactor.callLater(0,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;d.callback,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;aBin)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;return&nbsp;d&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;def&nbsp;int2binSync(anInteger):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;#Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;return&nbsp;struct.pack(&amp;quot;i&amp;quot;,&nbsp;anInteger)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;def&nbsp;bin2intSync(aBin):&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;#Unpacks&nbsp;a&nbsp;bytestring&nbsp;into&nbsp;an&nbsp;integer&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp; &nbsp;return&nbsp;struct.unpack(&amp;quot;i&amp;quot;,&nbsp;aBin)[0]&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;While&nbsp;running&nbsp;the&nbsp;testcode&nbsp;I&nbsp;got&nbsp;the&nbsp;following&nbsp;results:&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;(1&nbsp;run&nbsp;=&nbsp;converting&nbsp;an&nbsp;integer&nbsp;to&nbsp;a&nbsp;byte&nbsp;string,&nbsp;converting&nbsp;that&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;byte&nbsp;string&nbsp;back&nbsp;to&nbsp;an&nbsp;integer,&nbsp;and&nbsp;finally&nbsp;checking&nbsp;whether&nbsp;that&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;last&nbsp;integer&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;input&nbsp;integer.)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;***&nbsp;Starting&nbsp;Synchronous&nbsp;Benchmarks.&nbsp;(No&nbsp;Twisted&nbsp;=&amp;gt;&nbsp;&amp;quot;blocking&amp;quot;&nbsp;code)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(1&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(10&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(100&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(1000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.00399994850159&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(10000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0369999408722&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(100000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.362999916077&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;***&nbsp;Synchronous&nbsp;Benchmarks&nbsp;Completed&nbsp;in&nbsp;0.406000137329&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;***&nbsp;Starting&nbsp;Asynchronous&nbsp;Benchmarks&nbsp;.&nbsp;(Twisted&nbsp;=&amp;gt;&nbsp;&amp;quot;non-blocking&amp;quot;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;code)&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5090000629&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5099999905&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5130000114&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5859999657&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;35.2829999924&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp; &nbsp;-&amp;gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;41.492000103&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;***&nbsp;Asynchronous&nbsp;Benchmarks&nbsp;Completed&nbsp;in&nbsp;42.1460001469&nbsp;seconds.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Am&nbsp;I&nbsp;really&nbsp;seeing&nbsp;factor&nbsp;100x??&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;I&nbsp;really&nbsp;hope&nbsp;that&nbsp;I&nbsp;made&nbsp;a&nbsp;huge&nbsp;reasoning&nbsp;error&nbsp;here&nbsp;but&nbsp;I&nbsp;just&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;can&amp;#39;t&nbsp;find&nbsp;it.&nbsp;If&nbsp;my&nbsp;results&nbsp;are&nbsp;correct&nbsp;then&nbsp;I&nbsp;really&nbsp;need&nbsp;to&nbsp;go&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;and&nbsp;check&nbsp;my&nbsp;entire&nbsp;cloud&nbsp;platform&nbsp;for&nbsp;the&nbsp;places&nbsp;where&nbsp;I&nbsp;decided&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;split&nbsp;functions&nbsp;into&nbsp;atomic&nbsp;operations&nbsp;while&nbsp;thinking&nbsp;that&nbsp;it&nbsp;would&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;actually&nbsp;improve&nbsp;the&nbsp;performance&nbsp;while&nbsp;on&nbsp;the&nbsp;contrary&nbsp;it&nbsp;did&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;opposit.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;I&nbsp;personaly&nbsp;suspect&nbsp;that&nbsp;I&nbsp;lose&nbsp;my&nbsp;cpu-cycles&nbsp;to&nbsp;the&nbsp;reactor&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;scheduling&nbsp;the&nbsp;deferred-callbacks.&nbsp;Would&nbsp;that&nbsp;assumption&nbsp;make&nbsp;any&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;sense?&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;The&nbsp;part&nbsp;where&nbsp;I&nbsp;need&nbsp;these&nbsp;conversion&nbsp;functions&nbsp;is&nbsp;in&nbsp;marshalling/&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;protocol&nbsp;reading&nbsp;and&nbsp;writing&nbsp;throughout&nbsp;the&nbsp;cloud&nbsp;platform,&nbsp;which&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;implies&nbsp;that&nbsp;these&nbsp;functions&nbsp;will&nbsp;be&nbsp;called&nbsp;constantly&nbsp;so&nbsp;I&nbsp;need&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;them&nbsp;to&nbsp;be&nbsp;superfast.&nbsp;I&nbsp;always&nbsp;though&nbsp;I&nbsp;had&nbsp;to&nbsp;split&nbsp;the&nbsp;entire&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;marshalling&nbsp;process&nbsp;into&nbsp;small&nbsp;atomic&nbsp;(deferred-callback)&nbsp;functions&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;to&nbsp;be&nbsp;efficient,&nbsp;but&nbsp;these&nbsp;figures&nbsp;tell&nbsp;me&nbsp;otherwise.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;I&nbsp;really&nbsp;hope&nbsp;someone&nbsp;can&nbsp;help&nbsp;me&nbsp;out&nbsp;here.&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Best&nbsp;regards,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Dirk&nbsp;Moors&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;&amp;lt;twistedbenchmark.py&amp;gt;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
&amp;gt;&nbsp;An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
&amp;gt;&nbsp;URL:&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-python/attachments/20091013/e9ae2546/attachment.htm&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/pipermail/twisted-python/attachments/20091013/e9ae2546/attachment.htm&lt;/a&gt;&lt;br&gt;<br>
<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;------------------------------&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;End&nbsp;of&nbsp;Twisted-Python&nbsp;Digest,&nbsp;Vol&nbsp;67,&nbsp;Issue&nbsp;22&lt;br&gt;<br>
&amp;gt;&nbsp;**********************************************&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-python/attachments/20091013/357ffe0c/attachment.htm&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/pipermail/twisted-python/attachments/20091013/357ffe0c/attachment.htm&lt;/a&gt;&lt;br&gt;<br>
<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
A&nbsp;non-text&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
Name:&nbsp;twistedbenchmark.py&lt;br&gt;<br>
Type:&nbsp;application/octet-stream&lt;br&gt;<br>
Size:&nbsp;7269&nbsp;bytes&lt;br&gt;<br>
Desc:&nbsp;not&nbsp;available&lt;br&gt;<br>
Url&nbsp;:&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-python/attachments/20091013/357ffe0c/attachment.obj&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/pipermail/twisted-python/attachments/20091013/357ffe0c/attachment.obj&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;Twisted-Python&nbsp;Digest,&nbsp;Vol&nbsp;67,&nbsp;Issue&nbsp;23&lt;br&gt;<br>
**********************************************&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
