<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;Dirk,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Using&nbsp;deferred&nbsp;directly&nbsp;in&nbsp;your&nbsp;bin2intAsync()&nbsp;may&nbsp;be&nbsp;somewhat&nbsp;less&nbsp;efficient&nbsp;than&nbsp;some&nbsp;other&nbsp;way&nbsp;described&nbsp;in&nbsp;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(87,&nbsp;87,&nbsp;90);&nbsp;font-family:&nbsp;verdana,&nbsp;sans-serif;&nbsp;font-size:&nbsp;15px;&nbsp;font-weight:&nbsp;bold;&nbsp;line-height:&nbsp;18px;&nbsp;&quot;&gt;Recipe&nbsp;439358:&nbsp;[Twisted]&nbsp;From&nbsp;blocking&nbsp;functions&nbsp;to&nbsp;deferred&nbsp;functions&nbsp;&lt;/span&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(87,&nbsp;87,&nbsp;90);&nbsp;font-family:&nbsp;verdana,&nbsp;sans-serif;&nbsp;font-size:&nbsp;15px;&nbsp;font-weight:&nbsp;bold;&nbsp;line-height:&nbsp;18px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-weight:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;&quot;&gt;recipe&nbsp;(&lt;a&nbsp;href=&quot;http://code.activestate.com/recipes/439358/&quot;&gt;http://code.activestate.com/recipes/439358/&lt;/a&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Helvetica,&nbsp;sans-serif&quot;&gt;You&nbsp;would&nbsp;get&nbsp;same&nbsp;effect&nbsp;(asynchronous&nbsp;execution)&nbsp;-&nbsp;but&nbsp;potentially&nbsp;more&nbsp;efficiently&nbsp;-&nbsp;by&nbsp;just&nbsp;decorating&nbsp;your&nbsp;synchronous&nbsp;methods&nbsp;as:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;verdana,&nbsp;sans-serif;&nbsp;border-collapse:&nbsp;collapse;&nbsp;color:&nbsp;rgb(87,&nbsp;87,&nbsp;90);&nbsp;font-size:&nbsp;small;&nbsp;line-height:&nbsp;18px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;2px;&nbsp;-webkit-border-vertical-spacing:&nbsp;2px;&nbsp;&quot;&gt;&lt;pre&nbsp;style=&quot;font-size:&nbsp;1em;&nbsp;background-color:&nbsp;rgb(241,&nbsp;241,&nbsp;241);&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;overflow:&nbsp;inherit;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;k&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;color:&nbsp;rgb(0,&nbsp;112,&nbsp;32);&nbsp;font-weight:&nbsp;bold;&nbsp;&quot;&gt;from&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;nn&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;color:&nbsp;rgb(14,&nbsp;132,&nbsp;181);&nbsp;font-weight:&nbsp;bold;&nbsp;&quot;&gt;twisted.internet.threads&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;k&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;color:&nbsp;rgb(0,&nbsp;112,&nbsp;32);&nbsp;font-weight:&nbsp;bold;&nbsp;&quot;&gt;import&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;deferToThread&lt;/span&gt;<br>
&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;deferred&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;o&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;color:&nbsp;rgb(102,&nbsp;102,&nbsp;102);&nbsp;&quot;&gt;=&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;deferToThread&lt;/span&gt;&lt;span&nbsp;class=&quot;o&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;color:&nbsp;rgb(102,&nbsp;102,&nbsp;102);&nbsp;&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;n&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;__get__&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;font-size:&nbsp;1em;&nbsp;background-color:&nbsp;rgb(241,&nbsp;241,&nbsp;241);&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;overflow:&nbsp;inherit;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;....&lt;/pre&gt;&lt;pre&nbsp;style=&quot;font-size:&nbsp;1em;&nbsp;background-color:&nbsp;rgb(241,&nbsp;241,&nbsp;241);&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;overflow:&nbsp;inherit;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;line-height:&nbsp;normal;&nbsp;white-space:&nbsp;normal;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&gt;@deferred&lt;/div&gt;&lt;div&gt;def&nbsp;int2binAsync(anInteger):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;#Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;struct.pack(&quot;i&quot;,&nbsp;anInteger)&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;@deferred&lt;/div&gt;&lt;div&gt;def&nbsp;bin2intAsync(aBin):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;#Unpacks&nbsp;a&nbsp;bytestring&nbsp;into&nbsp;an&nbsp;integer&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;struct.unpack(&quot;i&quot;,&nbsp;aBin)[0]&nbsp;&nbsp;&lt;/div&gt;&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;font-size:&nbsp;1em;&nbsp;background-color:&nbsp;rgb(241,&nbsp;241,&nbsp;241);&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;overflow:&nbsp;inherit;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;font-size:&nbsp;1em;&nbsp;background-color:&nbsp;rgb(241,&nbsp;241,&nbsp;241);&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0px;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;overflow:&nbsp;inherit;&nbsp;position:&nbsp;static;&nbsp;z-index:&nbsp;auto;&nbsp;&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div&nbsp;apple-content-edited=&quot;true&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-align:&nbsp;auto;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;medium;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;orphans:&nbsp;2;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-border-horizontal-spacing:&nbsp;0px;&nbsp;-webkit-border-vertical-spacing:&nbsp;0px;&nbsp;-webkit-text-decorations-in-effect:&nbsp;none;&nbsp;-webkit-text-size-adjust:&nbsp;auto;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kind&nbsp;regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Valeriy&nbsp;Pogrebitskiy&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;mailto:vpogrebi@verizon.net&quot;&gt;vpogrebi@verizon.net&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;/span&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&nbsp;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Oct&nbsp;13,&nbsp;2009,&nbsp;at&nbsp;9:18&nbsp;AM,&nbsp;Dirk&nbsp;Moors&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hello&nbsp;Everyone!&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;name&nbsp;is&nbsp;Dirk&nbsp;Moors,&nbsp;and&nbsp;since&nbsp;4&nbsp;years&nbsp;now,&nbsp;I've&nbsp;been&nbsp;involved&nbsp;in&nbsp;developing&nbsp;a&nbsp;cloud&nbsp;computing&nbsp;platform,&nbsp;using&nbsp;Python&nbsp;as&nbsp;the&nbsp;programming&nbsp;language.&nbsp;A&nbsp;year&nbsp;ago&nbsp;I&nbsp;discovered&nbsp;Twisted&nbsp;Python,&nbsp;and&nbsp;it&nbsp;got&nbsp;me&nbsp;very&nbsp;interested,&nbsp;upto&nbsp;the&nbsp;point&nbsp;where&nbsp;I&nbsp;made&nbsp;the&nbsp;decision&nbsp;to&nbsp;convert&nbsp;our&nbsp;platform&nbsp;(in&nbsp;progress)&nbsp;to&nbsp;a&nbsp;Twisted&nbsp;platform.&nbsp;One&nbsp;year&nbsp;later&nbsp;I'm&nbsp;still&nbsp;very&nbsp;enthousiastic&nbsp;about&nbsp;the&nbsp;overal&nbsp;performance&nbsp;and&nbsp;stability,&nbsp;but&nbsp;last&nbsp;week&nbsp;I&nbsp;encountered&nbsp;something&nbsp;I&nbsp;did't&nbsp;expect;&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;appeared&nbsp;that&nbsp;it&nbsp;was&nbsp;less&nbsp;efficient&nbsp;to&nbsp;run&nbsp;small&nbsp;&quot;atomic&quot;&nbsp;operations&nbsp;in&nbsp;different&nbsp;deferred-callbacks,&nbsp;when&nbsp;compared&nbsp;to&nbsp;running&nbsp;these&nbsp;&quot;atomic&quot;&nbsp;operations&nbsp;together&nbsp;in&nbsp;&quot;blocking&quot;&nbsp;mode.&nbsp;Am&nbsp;I&nbsp;doing&nbsp;something&nbsp;wrong&nbsp;here?&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;prove&nbsp;the&nbsp;problem&nbsp;to&nbsp;myself,&nbsp;I&nbsp;created&nbsp;the&nbsp;following&nbsp;example&nbsp;(Full&nbsp;source-&nbsp;and&nbsp;test&nbsp;code&nbsp;is&nbsp;attached):&lt;/div&gt;&lt;div&gt;---------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;/div&gt;&nbsp;&lt;div&gt;import&nbsp;struct&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;def&nbsp;int2binAsync(anInteger):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;packStruct(i):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;struct.pack(&quot;i&quot;,&nbsp;i)&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;defer.Deferred()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;d.addCallback(packStruct)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;reactor.callLater(0,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.callback,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anInteger)&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;d&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;bin2intAsync(aBin):&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;unpackStruct(p):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Unpacks&nbsp;a&nbsp;bytestring&nbsp;into&nbsp;an&nbsp;integer&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;struct.unpack(&quot;i&quot;,&nbsp;p)[0]&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;defer.Deferred()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;d.addCallback(unpackStruct)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;reactor.callLater(0,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.callback,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aBin)&lt;/div&gt;&nbsp;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;d&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;int2binSync(anInteger):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;#Packs&nbsp;an&nbsp;integer,&nbsp;result&nbsp;is&nbsp;4&nbsp;bytes&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;struct.pack(&quot;i&quot;,&nbsp;anInteger)&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;bin2intSync(aBin):&lt;/div&gt;&nbsp;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;#Unpacks&nbsp;a&nbsp;bytestring&nbsp;into&nbsp;an&nbsp;integer&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;struct.unpack(&quot;i&quot;,&nbsp;aBin)[0]&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---------------------------------------------------------------------------------------------------------------------------------------------------------------------&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;While&nbsp;running&nbsp;the&nbsp;testcode&nbsp;I&nbsp;got&nbsp;the&nbsp;following&nbsp;results:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(1&nbsp;run&nbsp;=&nbsp;converting&nbsp;an&nbsp;integer&nbsp;to&nbsp;a&nbsp;byte&nbsp;string,&nbsp;converting&nbsp;that&nbsp;byte&nbsp;string&nbsp;back&nbsp;to&nbsp;an&nbsp;integer,&nbsp;and&nbsp;finally&nbsp;checking&nbsp;whether&nbsp;that&nbsp;last&nbsp;integer&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;input&nbsp;integer.)&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;***&nbsp;Starting&nbsp;Synchronous&nbsp;Benchmarks.&nbsp;&lt;b&gt;(No&nbsp;Twisted&nbsp;=&gt;&nbsp;&quot;blocking&quot;&nbsp;code)&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(1&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(10&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0&nbsp;seconds.&lt;/div&gt;&nbsp;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(100&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(1000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.00399994850159&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(10000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.0369999408722&nbsp;seconds.&lt;/div&gt;&nbsp;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Synchronous&nbsp;Benchmark&nbsp;(100000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;0.362999916077&nbsp;seconds.&lt;/div&gt;&lt;div&gt;***&nbsp;Synchronous&nbsp;Benchmarks&nbsp;Completed&nbsp;in&lt;b&gt;&nbsp;0.406000137329&lt;/b&gt;&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;***&nbsp;Starting&nbsp;Asynchronous&nbsp;Benchmarks&nbsp;.&nbsp;&lt;b&gt;(Twisted&nbsp;=&gt;&nbsp;&quot;non-blocking&quot;&nbsp;code)&lt;/b&gt;&lt;/div&gt;&nbsp;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5090000629&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5099999905&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5130000114&nbsp;seconds.&lt;/div&gt;&nbsp;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(1000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;34.5859999657&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(10000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;35.2829999924&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;-&gt;&nbsp;Asynchronous&nbsp;Benchmark&nbsp;(100000&nbsp;runs)&nbsp;Completed&nbsp;in&nbsp;41.492000103&nbsp;seconds.&lt;/div&gt;&nbsp;&lt;div&gt;***&nbsp;Asynchronous&nbsp;Benchmarks&nbsp;Completed&nbsp;in&nbsp;&lt;b&gt;42.1460001469&lt;/b&gt;&nbsp;seconds.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Am&nbsp;I&nbsp;really&nbsp;seeing&nbsp;factor&nbsp;100x??&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;really&nbsp;hope&nbsp;that&nbsp;I&nbsp;made&nbsp;a&nbsp;huge&nbsp;reasoning&nbsp;error&nbsp;here&nbsp;but&nbsp;I&nbsp;just&nbsp;can't&nbsp;find&nbsp;it.&nbsp;If&nbsp;my&nbsp;results&nbsp;are&nbsp;correct&nbsp;then&nbsp;I&nbsp;really&nbsp;need&nbsp;to&nbsp;go&nbsp;and&nbsp;check&nbsp;my&nbsp;entire&nbsp;cloud&nbsp;platform&nbsp;for&nbsp;the&nbsp;places&nbsp;where&nbsp;I&nbsp;decided&nbsp;to&nbsp;split&nbsp;functions&nbsp;into&nbsp;atomic&nbsp;operations&nbsp;while&nbsp;thinking&nbsp;that&nbsp;it&nbsp;would&nbsp;actually&nbsp;improve&nbsp;the&nbsp;performance&nbsp;while&nbsp;on&nbsp;the&nbsp;contrary&nbsp;it&nbsp;did&nbsp;the&nbsp;opposit.&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;personaly&nbsp;suspect&nbsp;that&nbsp;I&nbsp;lose&nbsp;my&nbsp;cpu-cycles&nbsp;to&nbsp;the&nbsp;reactor&nbsp;scheduling&nbsp;the&nbsp;deferred-callbacks.&nbsp;Would&nbsp;that&nbsp;assumption&nbsp;make&nbsp;any&nbsp;sense?&lt;/div&gt;&lt;div&gt;The&nbsp;part&nbsp;where&nbsp;I&nbsp;need&nbsp;these&nbsp;conversion&nbsp;functions&nbsp;is&nbsp;in&nbsp;marshalling/protocol&nbsp;reading&nbsp;and&nbsp;writing&nbsp;throughout&nbsp;the&nbsp;cloud&nbsp;platform,&nbsp;which&nbsp;implies&nbsp;that&nbsp;these&nbsp;functions&nbsp;will&nbsp;be&nbsp;called&nbsp;constantly&nbsp;so&nbsp;I&nbsp;need&nbsp;them&nbsp;to&nbsp;be&nbsp;superfast.&nbsp;I&nbsp;always&nbsp;though&nbsp;I&nbsp;had&nbsp;to&nbsp;split&nbsp;the&nbsp;entire&nbsp;marshalling&nbsp;process&nbsp;into&nbsp;small&nbsp;atomic&nbsp;(deferred-callback)&nbsp;functions&nbsp;to&nbsp;be&nbsp;efficient,&nbsp;but&nbsp;these&nbsp;figures&nbsp;tell&nbsp;me&nbsp;otherwise.&lt;/div&gt;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;really&nbsp;hope&nbsp;someone&nbsp;can&nbsp;help&nbsp;me&nbsp;out&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;in&nbsp;advance,&lt;/div&gt;&lt;div&gt;Best&nbsp;regards,&lt;/div&gt;&lt;div&gt;Dirk&nbsp;Moors&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;&lt;span&gt;&lt;twistedbenchmark.py&gt;&lt;/span&gt;_______________________________________________&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
