<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Hi&nbsp;,&lt;/span&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp; &nbsp; &nbsp; In&nbsp;my&nbsp;case&nbsp;the&nbsp;rest&nbsp;api&nbsp;url&nbsp;calls&nbsp;looks&nbsp;like&nbsp;this&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;a&nbsp;href=&quot;http://example.com/event/user_id=12345&quot;&nbsp;target=&quot;_blank&quot;&gt;http://example.com/event/user_id=12345&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt; &nbsp;So&nbsp;here&nbsp;how&nbsp;to&nbsp;I&nbsp;implement&nbsp;the&nbsp;agent&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;for&nbsp;me&nbsp;every&nbsp;url&nbsp;has&nbsp;different&nbsp;different&nbsp;user_id&#39;s&nbsp;to&nbsp;be&nbsp;passes&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Thanks&nbsp;and&nbsp;regards,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;<br>
&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;Asha &lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Jul&nbsp;1,&nbsp;2013&nbsp;at&nbsp;11:42&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;08:35&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:ashapattani@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ashapattani@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
 I&nbsp;am&nbsp;having&nbsp;a&nbsp;requirement&nbsp;on&nbsp;to&nbsp;send&nbsp;async&nbsp;some&nbsp;300,000&nbsp;or&nbsp;more&nbsp;rest&nbsp;api&lt;br&gt;<br>
url&nbsp;calls..&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Are&nbsp;your&nbsp;HTTP&nbsp;requests&nbsp;all&nbsp;the&nbsp;same&nbsp;server?&nbsp; Or&nbsp;are&nbsp;at&nbsp;least&nbsp;some&nbsp;of&nbsp;the&nbsp;calls&nbsp;to&nbsp;the&nbsp;same&nbsp;server?&nbsp; If&nbsp;so,&nbsp;if&nbsp;you&nbsp;use&nbsp;persistent&nbsp;connections&nbsp;(`twisted.web.client.Agent`&nbsp;supports&nbsp;these)&nbsp;you&#39;ll&nbsp;remove&nbsp;a&nbsp;bunch&nbsp;of&nbsp;the&nbsp;latency&nbsp;and&nbsp;overhead&nbsp;of&nbsp;those&nbsp;requests.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
When&nbsp;I&nbsp;work&nbsp;with&nbsp;the&nbsp;code&nbsp;for&nbsp;150,000&nbsp;it&nbsp;works&nbsp;fine&nbsp;.It&nbsp;takes&nbsp;around&nbsp;8&lt;br&gt;<br>
minutes.Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;improve&nbsp;the&nbsp;performance&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;the&nbsp;count&nbsp;increased&nbsp;to&nbsp;some&nbsp;200,000&nbsp; ,I&nbsp;am&nbsp;getting&nbsp;the&nbsp;error.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;u&gt;&lt;/u&gt;------------------------------&lt;u&gt;&lt;/u&gt;------------------------------&lt;u&gt;&lt;/u&gt;-------&lt;br&gt;<br>
&lt;br&gt;<br>
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;<br>
Failure:&nbsp;twisted.internet.error.&lt;u&gt;&lt;/u&gt;TimeoutError:&nbsp;User&nbsp;timeout&nbsp;caused&lt;br&gt;<br>
connection&nbsp;failure.&lt;br&gt;<br>
Unhandled&nbsp;error&nbsp;in&nbsp;Deferred:&lt;br&gt;<br>
Unhandled&nbsp;Error&lt;br&gt;<br>
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;u&gt;&lt;/u&gt;------------------------------&lt;u&gt;&lt;/u&gt;------------------------------&lt;u&gt;&lt;/u&gt;-----&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;my&nbsp;server&nbsp;is&nbsp;8&nbsp;CPU&nbsp;quadcore&nbsp;box,&nbsp;2.40&nbsp;Ghz,&nbsp;with&nbsp;96G&nbsp;of&nbsp;RAM&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
*Can&nbsp;you&nbsp;please&nbsp;suggest&nbsp;me&nbsp;how&nbsp;can&nbsp;I&nbsp;overcome&nbsp;this&nbsp;error&nbsp;*&lt;br&gt;<br>
*&lt;br&gt;<br>
*&lt;br&gt;<br>
*Make&nbsp;the&nbsp;performance&nbsp;better*&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;my&nbsp;piece&nbsp;of&nbsp;code&nbsp;where&nbsp;I&nbsp;have&nbsp;implemented&nbsp;twisted&lt;br&gt;<br>
------------------------------&lt;u&gt;&lt;/u&gt;------------------------------&lt;u&gt;&lt;/u&gt;------------------------------&lt;u&gt;&lt;/u&gt;------&lt;br&gt;<br>
from&nbsp;twisted.internet&nbsp;import&nbsp;defer,&nbsp;reactor,&nbsp;task&lt;br&gt;<br>
from&nbsp;twisted.web.client&nbsp;import&nbsp;getPage&lt;br&gt;<br>
import&nbsp;sys,&nbsp;argparse,&nbsp;csv,&nbsp;collections,&nbsp;time,&nbsp;datetime&lt;br&gt;<br>
&lt;br&gt;<br>
maxRun&nbsp;=32&lt;br&gt;<br>
urls&nbsp;=&nbsp;&quot;&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;pageCallback(result):&lt;br&gt;<br>
 print&nbsp;len(result)&lt;br&gt;<br>
 return&nbsp;result&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;doWork():&lt;br&gt;<br>
 for&nbsp;url&nbsp;in&nbsp;urls.split(&#39;,&#39;):&lt;br&gt;<br>
 &nbsp; d&nbsp;=&nbsp;getPage(url)&lt;br&gt;<br>
 &nbsp; d.addCallback(pageCallback)&lt;br&gt;<br>
 &nbsp; yield&nbsp;d&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;finish(ign):&lt;br&gt;<br>
 reactor.stop()&lt;br&gt;<br>
&lt;br&gt;<br>
def&nbsp;test():&lt;br&gt;<br>
 deferreds&nbsp;=&nbsp;[]&lt;br&gt;<br>
 coop&nbsp;=&nbsp;task.Cooperator()&lt;br&gt;<br>
 work&nbsp;=&nbsp;doWork()&lt;br&gt;<br>
 for&nbsp;i&nbsp;in&nbsp;xrange(maxRun):&lt;br&gt;<br>
 &nbsp; d&nbsp;=&nbsp;coop.coiterate(work)&lt;br&gt;<br>
 &nbsp; deferreds.append(d)&lt;br&gt;<br>
 dl&nbsp;=&nbsp;defer.DeferredList(deferreds)&lt;br&gt;<br>
 dl.addCallback(finish)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;__name__&nbsp;==&nbsp;&#39;__main__&#39;:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;filename&nbsp;=&nbsp;sys.argv[1]&lt;br&gt;<br>
 &nbsp;#I&nbsp;open&nbsp;the&nbsp;file&nbsp;,read&nbsp;the&nbsp;files&nbsp;and&nbsp;create&nbsp;the&nbsp;url&#39;s&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; test()&lt;br&gt;<br>
 &nbsp; &nbsp; reactor.run()&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.&lt;u&gt;&lt;/u&gt;com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-&lt;u&gt;&lt;/u&gt;bin/mailman/listinfo/twisted-&lt;u&gt;&lt;/u&gt;python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
