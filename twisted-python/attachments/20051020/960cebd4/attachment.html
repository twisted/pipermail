<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;name=&quot;qrichtext&quot;&nbsp;content=&quot;1&quot;&nbsp;/&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;font-size:12pt;font-family:Trebuchet&nbsp;MS&quot;&gt;<br>
&lt;p&gt;&gt;&nbsp;Currently&nbsp;I&nbsp;have&nbsp;the&nbsp;following&nbsp;problem:&nbsp;my&nbsp;test&nbsp;script&nbsp;hangs.&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;Via&nbsp;simplification&nbsp;I&nbsp;got&nbsp;to&nbsp;the&nbsp;following&nbsp;text&nbsp;(requires&nbsp;some&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;postgres&nbsp;database):&lt;/p&gt;<br>
&lt;p&gt;&gt;&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;&nbsp;def&nbsp;setUp(self):&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.dbpool&nbsp;=&nbsp;adbapi.ConnectionPool('psycopg',&nbsp;DSN)&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;(populating&nbsp;some&nbsp;test&nbsp;data)&lt;/p&gt;<br>
&lt;p&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deferredResult(&nbsp;self.dbpool.runInteraction(self._insertTestData)&nbsp;)&nbsp;&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;Hmm,&nbsp;replying&nbsp;to&nbsp;myself,&nbsp;it&nbsp;seems&nbsp;that&nbsp;when&nbsp;I&nbsp;changed&nbsp;to&nbsp;&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;def&nbsp;setUp(self):&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.dbpool&nbsp;=&nbsp;adbapi.ConnectionPool('psycopg',&nbsp;DSN)&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.dbpool.runInteraction(self._insertTestData)&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;my&nbsp;test&nbsp;seems&nbsp;to&nbsp;work.&nbsp;Could&nbsp;anyone&nbsp;confirm&nbsp;that&nbsp;setUp&nbsp;(and&nbsp;tearDown)&nbsp;are&nbsp;also&nbsp;allowed&nbsp;to&nbsp;return&nbsp;deferreds?&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;I&nbsp;have&nbsp;also&nbsp;another&nbsp;problem.&nbsp;In&nbsp;fact&nbsp;I&nbsp;need&nbsp;to&nbsp;run&nbsp;a&nbsp;few&nbsp;deferred-returning&nbsp;functions&nbsp;within&nbsp;setUp.&nbsp;How&nbsp;should&nbsp;I&nbsp;join&nbsp;them?&nbsp;I&nbsp;can&nbsp;create&nbsp;DeferredList&nbsp;but&nbsp;will&nbsp;it&nbsp;then&nbsp;be&nbsp;checked&nbsp;for&nbsp;failures?&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;/body&gt;&lt;/html&gt;
</tt>
