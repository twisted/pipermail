<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Is&nbsp;this&nbsp;the&nbsp;right&nbsp;place&nbsp;to&nbsp;ask&nbsp;klein&nbsp;questions?&nbsp;I&#39;m&nbsp;writing a&nbsp;metrics&nbsp;plugin&nbsp;for&nbsp;Klein&nbsp;and&nbsp;I&nbsp;can&#39;t&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;inject&nbsp;a&nbsp;metrics&nbsp;handler&nbsp;so&nbsp;that&nbsp;I&nbsp;can&nbsp;get&nbsp;route,&nbsp;path,&nbsp;duration,&nbsp;and&nbsp;status&nbsp;code.&nbsp;What&nbsp;I&#39;m&nbsp;doing&nbsp;now&nbsp;sucks&nbsp;because&nbsp;Klein&nbsp;and&nbsp;twisted&nbsp;interact&nbsp;in&nbsp;complex&nbsp;ways&nbsp;on&nbsp;Failure&nbsp;and&nbsp;status&nbsp;codes. &lt;div&gt;&lt;pre&nbsp;style=&quot;background-color:rgb(43,43,43);color:rgb(169,183,198);font-family:&quot;JetBrains&nbsp;Mono&quot;,monospace;font-size:9.8pt&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(128,128,128)&quot;&gt;#&nbsp;Replace&nbsp;the&nbsp;klein&nbsp;_call&nbsp;with&nbsp;the&nbsp;metrics&nbsp;generating&nbsp;call&lt;br&gt;&lt;/span&gt;_app._call&nbsp;=&nbsp;_callWithMetrics&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;Rather&nbsp;than&nbsp;replace&nbsp;_call&nbsp;with&nbsp;my&nbsp;version&nbsp;of&nbsp;_call&nbsp;I&nbsp;was&nbsp;hoping&nbsp;there&nbsp;was&nbsp;a&nbsp;cleaner&nbsp;way&nbsp;to&nbsp;get&nbsp;the&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;result&nbsp;code&nbsp;of&nbsp;a&nbsp;route&nbsp;invocation.&nbsp;Thoughts? &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
