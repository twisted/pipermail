<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Jul&nbsp;3,&nbsp;2010,&nbsp;at&nbsp;3:19&nbsp;PM,&nbsp;Laurens&nbsp;Van&nbsp;Houtven&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;A&nbsp;number&nbsp;of&nbsp;people&nbsp;have&nbsp;tried&nbsp;to&nbsp;implement&nbsp;it&nbsp;in&nbsp;Twisted.&nbsp;AFAICT&nbsp;most&lt;br&gt;of&nbsp;them&nbsp;just&nbsp;use&nbsp;oauth.py.&nbsp;That&nbsp;uses&nbsp;urllib.&nbsp;Basically&nbsp;I&nbsp;guess&nbsp;it&nbsp;just&lt;br&gt;crosses&nbsp;its&nbsp;fingers&nbsp;and&nbsp;hopes&nbsp;that&nbsp;the&nbsp;OAuth&nbsp;API&nbsp;endpoints&nbsp;will&nbsp;always&lt;br&gt;be&nbsp;reachable&nbsp;and&nbsp;responsive.&nbsp;(I&nbsp;have&nbsp;been&nbsp;told&nbsp;this&nbsp;is&nbsp;completely&lt;br&gt;unrealistic.)&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;always&nbsp;is.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Thankfully,&nbsp;the&nbsp;OAuth&nbsp;spec&nbsp;is&nbsp;asynchronous&nbsp;in&nbsp;nature.&nbsp;I'm&nbsp;trying&nbsp;to&lt;br&gt;implement&nbsp;OAuth&nbsp;using&nbsp;twisted&nbsp;(specifically&nbsp;twisted.cred&nbsp;and&lt;br&gt;twisted.web)&nbsp;to&nbsp;promote&nbsp;code&nbsp;re-use.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Great!&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;In&nbsp;order&nbsp;to&nbsp;do&nbsp;the&nbsp;authentication&nbsp;OAuth&nbsp;relies&nbsp;on&nbsp;redirection&nbsp;(in&nbsp;most&lt;br&gt;use&nbsp;cases,&nbsp;this&nbsp;is&nbsp;HTTP&nbsp;redirection),&nbsp;which&nbsp;would&nbsp;be&nbsp;protocol&lt;br&gt;specific.&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;how&nbsp;twisted.cred&nbsp;fits&nbsp;into&nbsp;this&nbsp;since&nbsp;it&lt;br&gt;appears&nbsp;to&nbsp;expect&nbsp;everything&nbsp;beyond&nbsp;the&nbsp;portal&nbsp;to&nbsp;be&lt;br&gt;protocol-agnostic.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Not&nbsp;at&nbsp;all.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Checkers&nbsp;are&nbsp;as&nbsp;protocol-specific&nbsp;as&nbsp;necessary.&nbsp;&amp;nbsp;That's&nbsp;why&nbsp;they&nbsp;have&nbsp;a&nbsp;credentialInterfaces&nbsp;attribute,&nbsp;to&nbsp;indicate&nbsp;what&nbsp;type&nbsp;of&nbsp;credentials&nbsp;they&nbsp;may&nbsp;be&nbsp;used&nbsp;with.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;many&nbsp;*application*&nbsp;protocols&nbsp;do&nbsp;share&nbsp;obvious&nbsp;checker&nbsp;behavior&nbsp;such&nbsp;as&nbsp;&quot;does&nbsp;this&nbsp;password&nbsp;match&quot;,&nbsp;and&nbsp;it&nbsp;would&nbsp;be&nbsp;a&nbsp;shame&nbsp;to&nbsp;re-implement&nbsp;that&nbsp;logic,&nbsp;but&nbsp;that's&nbsp;not&nbsp;to&nbsp;say&nbsp;that&nbsp;*authentication*&nbsp;protocols&nbsp;shouldn't&nbsp;have&nbsp;their&nbsp;own,&nbsp;more&nbsp;specific&nbsp;interfaces.&nbsp;&amp;nbsp;Especially&nbsp;if&nbsp;you&nbsp;could&nbsp;see&nbsp;some&nbsp;way&nbsp;to&nbsp;abstractly&nbsp;re-implement,&nbsp;let's&nbsp;say,&nbsp;SMTP&nbsp;authentication&nbsp;to&nbsp;rely&nbsp;on&nbsp;OAuth.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;someone&nbsp;else&nbsp;already&nbsp;noted&nbsp;in&nbsp;a&nbsp;reply,&nbsp;the&nbsp;main&nbsp;thing&nbsp;is&nbsp;that&nbsp;this&nbsp;stuff&nbsp;returns&nbsp;a&nbsp;Deferred,&nbsp;so&nbsp;HTTP&nbsp;redirection&nbsp;could&nbsp;be&nbsp;neatly&nbsp;handled&nbsp;there.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;I'm&nbsp;not&nbsp;sure&nbsp;what&nbsp;the&nbsp;credentials&nbsp;would&nbsp;be.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I'm&nbsp;not&nbsp;going&nbsp;to&nbsp;read&nbsp;40&nbsp;pages&nbsp;of&nbsp;RFC&nbsp;just&nbsp;to&nbsp;answer&nbsp;this&nbsp;one&nbsp;email&nbsp;:)&nbsp;but&nbsp;the&nbsp;credentials&nbsp;object&nbsp;should&nbsp;be&nbsp;something&nbsp;that&nbsp;contains&nbsp;enough&nbsp;information&nbsp;for&nbsp;the&nbsp;checker&nbsp;to&nbsp;do&nbsp;its&nbsp;work.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;the&nbsp;checker&nbsp;needs&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;is&nbsp;to&nbsp;map&nbsp;the&nbsp;credentials&nbsp;into&nbsp;a&nbsp;locally&nbsp;useful&nbsp;&quot;avatar&nbsp;ID&quot;.&nbsp;&amp;nbsp;This&nbsp;is&nbsp;probably&nbsp;just&nbsp;an&nbsp;URI&nbsp;which&nbsp;identifies&nbsp;the&nbsp;authenticated&nbsp;principal&nbsp;(which&nbsp;presumably&nbsp;the&nbsp;IRealm&nbsp;could&nbsp;use&nbsp;to&nbsp;map&nbsp;into&nbsp;a&nbsp;local&nbsp;database&nbsp;row).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Of&nbsp;course&nbsp;it&nbsp;would&nbsp;be&nbsp;*good*&nbsp;if&nbsp;you&nbsp;could&nbsp;boil&nbsp;down&nbsp;OAuth&nbsp;credentials&nbsp;to&nbsp;something&nbsp;simple&nbsp;that&nbsp;could&nbsp;be&nbsp;re-used&nbsp;by&nbsp;other&nbsp;protocols,&nbsp;or&nbsp;better&nbsp;yet&nbsp;some&nbsp;existing&nbsp;interface.&nbsp;&amp;nbsp;Then&nbsp;you&nbsp;could&nbsp;use&nbsp;an&nbsp;existing&nbsp;checker,&nbsp;or&nbsp;perhaps&nbsp;even&nbsp;provide&nbsp;a&nbsp;strcred&nbsp;plugin.&nbsp;&amp;nbsp;But,&nbsp;that&nbsp;seems&nbsp;unlikely,&nbsp;given&nbsp;that&nbsp;its&nbsp;domain&nbsp;model&nbsp;for&nbsp;authentication&nbsp;is&nbsp;a&nbsp;bit&nbsp;broader&nbsp;than&nbsp;the&nbsp;usual&nbsp;username/password&nbsp;check.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;If&nbsp;I&nbsp;understand&nbsp;correctly&nbsp;the&nbsp;avatar&nbsp;would&nbsp;be&nbsp;the&nbsp;thing&nbsp;that&nbsp;has&nbsp;the&lt;br&gt;token&nbsp;credentials&nbsp;(for&nbsp;those&nbsp;who&nbsp;haven't&nbsp;read&nbsp;the&nbsp;OAuth&nbsp;spec,&nbsp;&quot;token&lt;br&gt;credentials&quot;&nbsp;are&nbsp;an&nbsp;OAuth&nbsp;thing,&nbsp;and&nbsp;not&nbsp;necessarily&nbsp;the&nbsp;credentials&lt;br&gt;in&nbsp;the&nbsp;twisted.cred&nbsp;sense);&nbsp;it&nbsp;represents&nbsp;a&nbsp;single&nbsp;authenticated&lt;br&gt;transaction&nbsp;(which&nbsp;might&nbsp;consist&nbsp;of&nbsp;many&nbsp;authenticated&nbsp;requests).&nbsp;This&lt;br&gt;takes&nbsp;care&nbsp;of&nbsp;steps&nbsp;6&nbsp;7&nbsp;and&nbsp;8&nbsp;in&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/img/cred-login.png&quot;&gt;http://twistedmatrix.com/documents/current/core/img/cred-login.png&lt;/a&gt;.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;avatar&nbsp;is&nbsp;made&nbsp;entirely&nbsp;of&nbsp;application&nbsp;logic.&nbsp;&amp;nbsp;It&nbsp;shouldn't&nbsp;have&nbsp;any&nbsp;authentication&nbsp;stuff&nbsp;stuck&nbsp;to&nbsp;it&nbsp;at&nbsp;all.&nbsp;&amp;nbsp;(Although&nbsp;maybe&nbsp;that's&nbsp;not&nbsp;what&nbsp;&quot;token&nbsp;credentials&quot;&nbsp;means...)&nbsp;&amp;nbsp;Please&nbsp;note&nbsp;that&nbsp;it&nbsp;must&nbsp;be&nbsp;an&nbsp;implementation&nbsp;of&nbsp;an&nbsp;_existing_&nbsp;protocol&nbsp;interface,&nbsp;as&nbsp;that's&nbsp;the&nbsp;whole&nbsp;point&nbsp;of&nbsp;cred's&nbsp;abstraction:&nbsp;to&nbsp;allow&nbsp;existing&nbsp;application&nbsp;logic&nbsp;to&nbsp;be&nbsp;re-used&nbsp;independent&nbsp;of&nbsp;authentication&nbsp;or&nbsp;authorization&nbsp;mechanism.&nbsp;&amp;nbsp;If&nbsp;this&nbsp;is&nbsp;an&nbsp;authentication&nbsp;mechanism&nbsp;for&nbsp;an&nbsp;HTTP&nbsp;protocol,&nbsp;the&nbsp;avatar&nbsp;is&nbsp;an&nbsp;IResource&nbsp;provider.&nbsp;&amp;nbsp;HTTP&nbsp;already&nbsp;has&nbsp;a&nbsp;defined&nbsp;avatar&nbsp;interface&nbsp;within&nbsp;Twisted,&nbsp;and&nbsp;that's&nbsp;it;&nbsp;so&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;any&nbsp;existing&nbsp;code&nbsp;that&nbsp;talks&nbsp;to&nbsp;cred,&nbsp;you&nbsp;have&nbsp;to&nbsp;use&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;the&nbsp;avatar&nbsp;needs&nbsp;to&nbsp;be&nbsp;passed&nbsp;more&nbsp;information&nbsp;in&nbsp;order&nbsp;to&nbsp;operate&nbsp;correctly,&nbsp;then&nbsp;you&nbsp;can&nbsp;pass&nbsp;that&nbsp;information&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;avatar&nbsp;ID&nbsp;somehow,&nbsp;and&nbsp;have&nbsp;the&nbsp;realm&nbsp;implementation&nbsp;break&nbsp;it&nbsp;down&nbsp;into&nbsp;the&nbsp;necessary&nbsp;parts&nbsp;to&nbsp;pass&nbsp;on.&nbsp;&amp;nbsp;This&nbsp;is,&nbsp;admittedly,&nbsp;a&nbsp;crufty&nbsp;corner&nbsp;of&nbsp;cred,&nbsp;but&nbsp;that's&nbsp;the&nbsp;best&nbsp;option&nbsp;available&nbsp;right&nbsp;now.&nbsp;&amp;nbsp;Hopefully&nbsp;OAuth&nbsp;doesn't&nbsp;require&nbsp;this&nbsp;:).&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;The&nbsp;strange&nbsp;bits&nbsp;start&nbsp;in&nbsp;the&nbsp;CredentialsChecker,&nbsp;since&nbsp;credentials&lt;br&gt;are&nbsp;checked&nbsp;by&nbsp;someone&nbsp;else&nbsp;entirely.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;credentials&nbsp;checker&nbsp;doesn't&nbsp;need&nbsp;to&nbsp;actually&nbsp;check&nbsp;the&nbsp;credentials&nbsp;itself;&nbsp;it's&nbsp;just&nbsp;the&nbsp;logic&nbsp;that&nbsp;knows&nbsp;who&nbsp;to&nbsp;delegate&nbsp;to&nbsp;and&nbsp;what&nbsp;information&nbsp;to&nbsp;give&nbsp;them.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;I&nbsp;really&nbsp;don't&nbsp;understand&nbsp;the&nbsp;Mind,&nbsp;but&nbsp;it&nbsp;sounds&nbsp;like&nbsp;something&nbsp;that&lt;br&gt;might&nbsp;be&nbsp;required&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;a&nbsp;three-actor&nbsp;auth&nbsp;system&nbsp;like&lt;br&gt;OAuth.&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;Mind&nbsp;is&nbsp;for&nbsp;connection-oriented&nbsp;protocols&nbsp;to&nbsp;provide&nbsp;a&nbsp;callback&nbsp;mechanism&nbsp;to&nbsp;the&nbsp;originating&nbsp;side&nbsp;of&nbsp;the&nbsp;connection.&nbsp;&amp;nbsp;For&nbsp;example,&nbsp;if&nbsp;I'm&nbsp;logging&nbsp;in&nbsp;to&nbsp;an&nbsp;IRC&nbsp;server,&nbsp;the&nbsp;'mind'&nbsp;would&nbsp;be&nbsp;a&nbsp;wrapper&nbsp;around&nbsp;the&nbsp;client&nbsp;connection&nbsp;that&nbsp;would&nbsp;allow&nbsp;the&nbsp;avatar&nbsp;to&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;TCP&nbsp;socket&nbsp;it&nbsp;could&nbsp;send&nbsp;IRC&nbsp;messages&nbsp;to.&nbsp;&amp;nbsp;I&nbsp;don't&nbsp;think&nbsp;it&nbsp;applies&nbsp;in&nbsp;this&nbsp;case.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;I&nbsp;would&nbsp;be&nbsp;really&nbsp;grateful&nbsp;if&nbsp;someone&nbsp;who&nbsp;actually&nbsp;understood&lt;br&gt;twisted.cred&nbsp;(and&nbsp;hopefully&nbsp;also&nbsp;OAuth)&nbsp;could&nbsp;shed&nbsp;some&nbsp;light&nbsp;on&nbsp;this.&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#000000&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#144FAE&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;hope&nbsp;this&nbsp;has&nbsp;been&nbsp;more&nbsp;useful&nbsp;than&nbsp;confusing.&nbsp;&amp;nbsp;Let&nbsp;me&nbsp;know&nbsp;if&nbsp;you&nbsp;have&nbsp;more&nbsp;questions.&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
