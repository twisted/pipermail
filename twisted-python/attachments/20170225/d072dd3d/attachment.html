<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Feb&nbsp;25,&nbsp;2017,&nbsp;at&nbsp;9:03&nbsp;AM,&nbsp;Clayton&nbsp;Daley&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:clayton.daley@gmail.com&quot;&nbsp;class=&quot;&quot;&gt;clayton.daley@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Are&nbsp;you&nbsp;talking&nbsp;about&nbsp;building&nbsp;Docker&nbsp;containers&nbsp;on&nbsp;the&nbsp;fly?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Pretty&nbsp;sure&nbsp;Hynek&nbsp;has&nbsp;proper&nbsp;build-server/production&nbsp;separation.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;We&nbsp;use&nbsp;Docker&nbsp;extensively,&nbsp;but&nbsp;our&nbsp;build&nbsp;machine&nbsp;makes&nbsp;images&nbsp;that&nbsp;we&nbsp;push&nbsp;to&nbsp;Dockerhub&nbsp;(private&nbsp;repos).&nbsp;&nbsp;This&nbsp;has&nbsp;a&nbsp;lot&nbsp;of&nbsp;advantages:&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;ul&nbsp;class=&quot;&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;Our&nbsp;images&nbsp;(on&nbsp;the&nbsp;hub)&nbsp;are&nbsp;effectively&nbsp;pinned&nbsp;at&nbsp;the&nbsp;version&nbsp;they&nbsp;were&nbsp;built&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;Our&nbsp;test&nbsp;and&nbsp;production&nbsp;servers&nbsp;(can,&nbsp;if&nbsp;we&nbsp;want)&nbsp;always&nbsp;get&nbsp;exactly&nbsp;the&nbsp;same&nbsp;image&nbsp;(even&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;rebuild&nbsp;a&nbsp;server&nbsp;months&nbsp;later)&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;We&nbsp;test&nbsp;all&nbsp;our&nbsp;servers&nbsp;so&nbsp;we&nbsp;only&nbsp;have&nbsp;to&nbsp;manually&nbsp;pin&nbsp;packages&nbsp;(python&nbsp;or&nbsp;apt)&nbsp;if&nbsp;we&nbsp;run&nbsp;into&nbsp;regressions&nbsp;or&nbsp;other&nbsp;incompatibilities&nbsp;(i.e.&nbsp;an&nbsp;upgraded&nbsp;package&nbsp;that&nbsp;is&nbsp;no&nbsp;longer&nbsp;compatible&nbsp;with&nbsp;a&nbsp;manually&nbsp;pinned&nbsp;package)&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;Our&nbsp;build&nbsp;machine&nbsp;caches&nbsp;all&nbsp;the&nbsp;intermediate&nbsp;images&nbsp;(i.e.&nbsp;after&nbsp;each&nbsp;docker&nbsp;step).&nbsp;&nbsp;We&nbsp;intentionally&nbsp;sequence&nbsp;our&nbsp;images&nbsp;to&nbsp;place&nbsp;oft-changing&nbsp;items&nbsp;at&nbsp;the&nbsp;end.&nbsp;&nbsp;&lt;/li&gt;&lt;ul&nbsp;class=&quot;&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;Unless&nbsp;I&nbsp;change&nbsp;the&nbsp;list&nbsp;of&nbsp;apt&nbsp;packages,&nbsp;that&nbsp;layer&nbsp;is&nbsp;never&nbsp;rebuilt.&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;We&nbsp;have&nbsp;an&nbsp;extra&nbsp;step&nbsp;that&nbsp;uploads&nbsp;*just*&nbsp;the&nbsp;requirements&nbsp;files&nbsp;before&nbsp;pip&nbsp;installing&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;Our&nbsp;last&nbsp;step&nbsp;is&nbsp;the&nbsp;app&nbsp;code&nbsp;so&nbsp;changes&nbsp;to&nbsp;this&nbsp;layer&nbsp;are&nbsp;just&nbsp;a&nbsp;cached&nbsp;layer&nbsp;+&nbsp;PUT&nbsp;(i.e.&nbsp;seconds)&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;This&nbsp;optimization&nbsp;also&nbsp;makes&nbsp;our&nbsp;containers&nbsp;super&nbsp;efficient&nbsp;to&nbsp;upgrade&nbsp;because&nbsp;we&nbsp;only&nbsp;download&nbsp;the&nbsp;changed&nbsp;layers&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;This&nbsp;sounds&nbsp;like&nbsp;it&nbsp;covers&nbsp;a&nbsp;lot&nbsp;of&nbsp;the&nbsp;PEX&nbsp;advantages&nbsp;plus&nbsp;the&nbsp;added&nbsp;benefits&nbsp;of&nbsp;containerization.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Pex&nbsp;and&nbsp;containerization&nbsp;are&nbsp;completely&nbsp;orthogonal.&nbsp;You&nbsp;can&nbsp;use&nbsp;pex&nbsp;inside&nbsp;or&nbsp;outside&nbsp;of&nbsp;a&nbsp;container,&nbsp;and&nbsp;you&nbsp;can&nbsp;use&nbsp;a&nbsp;container&nbsp;with&nbsp;or&nbsp;without&nbsp;pex.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Hynek&nbsp;lays&nbsp;out&nbsp;a&nbsp;good&nbsp;case&nbsp;against&nbsp;pex&nbsp;inside&nbsp;containers,&nbsp;but&nbsp;the&nbsp;blog&nbsp;post&nbsp;from&nbsp;Moshe&nbsp;that&nbsp;I&nbsp;linked&nbsp;to&nbsp;earlier&nbsp;lays&nbsp;out&nbsp;a&nbsp;good&nbsp;reason&nbsp;to&nbsp;use&nbsp;them&nbsp;together.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
