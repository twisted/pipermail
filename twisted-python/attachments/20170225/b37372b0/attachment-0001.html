<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Are&nbsp;you&nbsp;talking&nbsp;about&nbsp;building&nbsp;Docker&nbsp;containers&nbsp;on&nbsp;the&nbsp;fly? &nbsp;We&nbsp;use&nbsp;Docker&nbsp;extensively,&nbsp;but&nbsp;our&nbsp;build&nbsp;machine&nbsp;makes&nbsp;images&nbsp;that&nbsp;we&nbsp;push&nbsp;to&nbsp;Dockerhub&nbsp;(private&nbsp;repos). &nbsp;This&nbsp;has&nbsp;a&nbsp;lot&nbsp;of&nbsp;advantages:&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;ul&gt;&lt;li&gt;Our&nbsp;images&nbsp;(on&nbsp;the&nbsp;hub)&nbsp;are&nbsp;effectively&nbsp;pinned&nbsp;at&nbsp;the&nbsp;version&nbsp;they&nbsp;were&nbsp;built&lt;/li&gt;&lt;li&gt;Our&nbsp;test&nbsp;and&nbsp;production&nbsp;servers&nbsp;(can,&nbsp;if&nbsp;we&nbsp;want)&nbsp;always&nbsp;get&nbsp;exactly&nbsp;the&nbsp;same&nbsp;image&nbsp;(even&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;rebuild&nbsp;a&nbsp;server&nbsp;months&nbsp;later)&lt;br&gt;&lt;/li&gt;&lt;li&gt;We&nbsp;test&nbsp;all&nbsp;our&nbsp;servers&nbsp;so&nbsp;we&nbsp;only&nbsp;have&nbsp;to&nbsp;manually&nbsp;pin&nbsp;packages&nbsp;(python&nbsp;or&nbsp;apt)&nbsp;if&nbsp;we&nbsp;run&nbsp;into&nbsp;regressions&nbsp;or&nbsp;other&nbsp;incompatibilities&nbsp;(i.e.&nbsp;an&nbsp;upgraded&nbsp;package&nbsp;that&nbsp;is&nbsp;no&nbsp;longer&nbsp;compatible&nbsp;with&nbsp;a&nbsp;manually&nbsp;pinned&nbsp;package)&lt;br&gt;&lt;/li&gt;&lt;li&gt;Our&nbsp;build&nbsp;machine&nbsp;caches&nbsp;all&nbsp;the&nbsp;intermediate&nbsp;images&nbsp;(i.e.&nbsp;after&nbsp;each&nbsp;docker&nbsp;step). &nbsp;We&nbsp;intentionally&nbsp;sequence&nbsp;our&nbsp;images&nbsp;to&nbsp;place&nbsp;oft-changing&nbsp;items&nbsp;at&nbsp;the&nbsp;end.&nbsp; &lt;/li&gt;&lt;ul&gt;&lt;li&gt;Unless&nbsp;I&nbsp;change&nbsp;the&nbsp;list&nbsp;of&nbsp;apt&nbsp;packages,&nbsp;that&nbsp;layer&nbsp;is&nbsp;never&nbsp;rebuilt.&lt;/li&gt;&lt;li&gt;We&nbsp;have&nbsp;an&nbsp;extra&nbsp;step&nbsp;that&nbsp;uploads&nbsp;*just*&nbsp;the&nbsp;requirements&nbsp;files&nbsp;before&nbsp;pip&nbsp;installing&lt;/li&gt;&lt;li&gt;Our&nbsp;last&nbsp;step&nbsp;is&nbsp;the&nbsp;app&nbsp;code&nbsp;so&nbsp;changes&nbsp;to&nbsp;this&nbsp;layer&nbsp;are&nbsp;just&nbsp;a&nbsp;cached&nbsp;layer&nbsp;+&nbsp;PUT&nbsp;(i.e.&nbsp;seconds)&lt;/li&gt;&lt;li&gt;This&nbsp;optimization&nbsp;also&nbsp;makes&nbsp;our&nbsp;containers&nbsp;super&nbsp;efficient&nbsp;to&nbsp;upgrade&nbsp;because&nbsp;we&nbsp;only&nbsp;download&nbsp;the&nbsp;changed&nbsp;layers&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&gt;This&nbsp;sounds&nbsp;like&nbsp;it&nbsp;covers&nbsp;a&nbsp;lot&nbsp;of&nbsp;the&nbsp;PEX&nbsp;advantages&nbsp;plus&nbsp;the&nbsp;added&nbsp;benefits&nbsp;of&nbsp;containerization.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Clayton&nbsp;Daley&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Feb&nbsp;25,&nbsp;2017&nbsp;at&nbsp;3:19&nbsp;AM,&nbsp;Hynek&nbsp;Schlawack&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:hs@ox.cx&quot;&nbsp;target=&quot;_blank&quot;&gt;hs@ox.cx&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;... &nbsp;Contrary&nbsp;I’m&nbsp;not&nbsp;a&nbsp;super&nbsp;fan&nbsp;of&nbsp;having&nbsp;one&nbsp;opaque&nbsp;blob&nbsp;on&nbsp;server;&nbsp;the&nbsp;transparent&nbsp;structure&nbsp;of&nbsp;a&nbsp;virtualenv&nbsp;is&nbsp;something&nbsp;I&nbsp;learned&nbsp;to&nbsp;appreciate.&nbsp;... &lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;zipfile&nbsp;containing&nbsp;a&nbsp;virtualenv&nbsp;(pex)&nbsp;isn&#39;t&nbsp;all&nbsp;that&nbsp;opaque&nbsp;--&nbsp;with&nbsp;the&nbsp;right&nbsp;editor&nbsp;plugins,&nbsp;you&nbsp;can&nbsp;even&nbsp;*cough*&nbsp;edit&nbsp;the&nbsp;contained&nbsp;source&nbsp;inside&nbsp;one. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Back&nbsp;when&nbsp;pex&nbsp;was&nbsp;a&nbsp;lot&nbsp;younger,&nbsp;this&nbsp;was&nbsp;handy&nbsp;for&nbsp;quick&nbsp;debugging&nbsp;as&nbsp;we&nbsp;were&nbsp;migrating&nbsp;from&nbsp;source-in-venvs-on-bare-metal-&lt;wbr&gt;chroots&nbsp;to&nbsp;pexed-in-mesos-containers&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;div&gt;To&nbsp;be&nbsp;clear:&nbsp;I’m&nbsp;not&nbsp;trying&nbsp;to&nbsp;talk&nbsp;anybody&nbsp;out&nbsp;of&nbsp;using&nbsp;pex.&nbsp;:)&nbsp; I’m&nbsp;just&nbsp;saying&nbsp;there’s&nbsp;a&nbsp;slight&nbsp;downside&nbsp;(+&nbsp;another&nbsp;tool)&nbsp;and&nbsp;no&nbsp;tangible&nbsp;upsides&nbsp;in&nbsp;Docker&nbsp;for&nbsp;me&nbsp;so&nbsp;it’s&nbsp;not&nbsp;a&nbsp;good&nbsp;fit&nbsp;for&nbsp;me.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;said,&nbsp;I’m&nbsp;gonna&nbsp;try&nbsp;it&nbsp;out&nbsp;in&nbsp;my&nbsp;deb-based&nbsp;deployments&nbsp;(contrary&nbsp;to&nbsp;popular&nbsp;believe,&nbsp;you&nbsp;can’t/shouldn’t&nbsp;put&nbsp;*everything*&nbsp;into&nbsp;containers)&nbsp;because&nbsp;we&nbsp;run&nbsp;ZFS&nbsp;and&nbsp;apt-get&nbsp;+&nbsp;lots&nbsp;of&nbsp;files&nbsp;in&nbsp;a&nbsp;deb&nbsp;=&nbsp;omgiwannamurdersomeone.&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.&lt;wbr&gt;com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-&lt;wbr&gt;bin/mailman/listinfo/twisted-&lt;wbr&gt;python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
