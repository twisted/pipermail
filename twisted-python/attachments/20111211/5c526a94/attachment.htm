<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;div&gt;Hi&nbsp;Folks:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don't&nbsp;know&nbsp;what&nbsp;to&nbsp;file&nbsp;this&nbsp;under&nbsp;but&nbsp;here&nbsp;goes:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Santa&nbsp;repeatedly&nbsp;sleeps&nbsp;until&nbsp;wakened&nbsp;by&nbsp;either&nbsp;all&nbsp;of&nbsp;his&nbsp;nine&nbsp;<br>
reindeer,&nbsp;back&nbsp;from&nbsp;their&nbsp;holidays,&nbsp;or&nbsp;by&nbsp;a&nbsp;group&nbsp;of&nbsp;three&nbsp;of&nbsp;his&nbsp;ten&nbsp;<br>
elves.&nbsp;If&nbsp;awakened&nbsp;by&nbsp;the&nbsp;reindeer,&nbsp;he&nbsp;harnesses&nbsp;each&nbsp;of&nbsp;them&nbsp;to&nbsp;his&nbsp;<br>
sleigh,&nbsp;delivers&nbsp;toys&nbsp;with&nbsp;them&nbsp;and&nbsp;finally&nbsp;unharnesses&nbsp;them&nbsp;(allowing&nbsp;<br>
them&nbsp;to&nbsp;go&nbsp;off&nbsp;on&nbsp;holiday).&nbsp;If&nbsp;awakened&nbsp;by&nbsp;a&nbsp;group&nbsp;of&nbsp;elves,&nbsp;he&nbsp;shows&nbsp;<br>
each&nbsp;of&nbsp;the&nbsp;group&nbsp;into&nbsp;his&nbsp;study,&nbsp;consults&nbsp;with&nbsp;them&nbsp;on&nbsp;toy&nbsp;R&amp;amp;D&nbsp;and&nbsp;<br>
finally&nbsp;shows&nbsp;them&nbsp;each&nbsp;out&nbsp;(allowing&nbsp;them&nbsp;to&nbsp;go&nbsp;back&nbsp;to&nbsp;work).&nbsp;Santa&nbsp;<br>
should&nbsp;give&nbsp;priority&nbsp;to&nbsp;the&nbsp;reindeer&nbsp;in&nbsp;the&nbsp;case&nbsp;that&nbsp;there&nbsp;is&nbsp;both&nbsp;a&nbsp;<br>
group&nbsp;of&nbsp;elves&nbsp;and&nbsp;a&nbsp;group&nbsp;of&nbsp;reindeer&nbsp;waiting<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;recently&nbsp;modified&nbsp;the&nbsp;stackless.py&nbsp;library&nbsp;to&nbsp;support&nbsp;yet&nbsp;another&nbsp;new&nbsp;concurrency&nbsp;feature:&nbsp;join&nbsp;patterns.&nbsp;Well&nbsp;I&nbsp;think&nbsp;of&nbsp;my&nbsp;version&nbsp;as&nbsp;a&nbsp;sawed-off&nbsp;version&nbsp;of&nbsp;join&nbsp;patterns.&nbsp;Join&nbsp;patterns&nbsp;are&nbsp;a&nbsp;synchronization&nbsp;and&nbsp;message&nbsp;passing&nbsp;construct.&nbsp;The&nbsp;closest&nbsp;thing&nbsp;to&nbsp;a&nbsp;join&nbsp;pattern&nbsp;in&nbsp;Twisted&nbsp;is&nbsp;a&nbsp;deferred&nbsp;list.&nbsp;Stackless&nbsp;has&nbsp;nothing&nbsp;of&nbsp;the&nbsp;sort.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;Santa&nbsp;Claus&nbsp;Problem&nbsp;is&nbsp;a&nbsp;notorious&nbsp;problem&nbsp;in&nbsp;concurrency&nbsp;(http://www.youtube.com/watch?v=pqO6tKN2lc4).&nbsp;I&nbsp;have&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;relatively&nbsp;short&nbsp;solution.&amp;nbsp;&nbsp;I&nbsp;think&nbsp;one&nbsp;would&nbsp;be&nbsp;hard&nbsp;pressed&nbsp;to&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;shorter&nbsp;solution&nbsp;in&nbsp;Python.&nbsp;My&nbsp;desire&nbsp;was&nbsp;to&nbsp;compete&nbsp;with&nbsp;Simon&nbsp;Peyton&nbsp;Jones&nbsp;Haskell&nbsp;version&nbsp;in&nbsp;&quot;Beautiful&nbsp;Code.&quot;&nbsp;The&nbsp;full&nbsp;solution&nbsp;is&nbsp;here:&nbsp;http://andrewfr.wordpress.com/2011/11/30/the-santa-claus-problem-with-join-patterns.&nbsp;The&nbsp;nucleus&nbsp;is:&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;code&gt;def&nbsp;santa(reindeer,&nbsp;elves):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;joinObject&nbsp;=<br>
&nbsp;stackless.join().addPattern([ch&nbsp;for&nbsp;_,&nbsp;ch,&nbsp;_&nbsp;in&nbsp;reindeer]).\&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;addPattern([ch&nbsp;for&nbsp;_,&nbsp;ch,&nbsp;_&nbsp;in&nbsp;elves],3)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reindeerPattern,&nbsp;elfPattern&nbsp;=&nbsp;joinObject.patterns&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;True:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pattern&nbsp;=&nbsp;joinObject.join()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;reindeerPattern.ready():&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&quot;***&nbsp;REINDEER&nbsp;GET&nbsp;PRIORITY&nbsp;***&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reindeerPattern.join()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pattern&nbsp;=&nbsp;reindeerPattern&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;pattern&nbsp;is<br>
&nbsp;reindeerPattern:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;harness(reindeerPattern)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deliveryToys(reindeerPattern)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;unharness(reindeerPattern)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;elif&nbsp;pattern&nbsp;is&nbsp;elfPattern:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;consultWithSanta(elfPattern)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;stopTwisted()&lt;br&gt;&lt;/code&gt;&lt;br&gt;In&nbsp;this&nbsp;solution&nbsp;I&nbsp;use&nbsp;Twisted&nbsp;to&nbsp;control&nbsp;the&nbsp;timer&nbsp;(I&nbsp;use&nbsp;the&nbsp;blockOn&nbsp;technique&nbsp;that&nbsp;Christopher&nbsp;Armstrong&nbsp;first&nbsp;used).&nbsp;&lt;br&gt;&lt;br&gt;def&nbsp;tick(seconds):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tickCh&nbsp;=&nbsp;stackless.channel()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.callLater(seconds,&nbsp;tickCh.send,&nbsp;None)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;tickCh.receive()&lt;br&gt;&lt;br&gt;However&nbsp;I&nbsp;could&nbsp;just&nbsp;as&nbsp;easily&nbsp;make&nbsp;reindeer&nbsp;and&nbsp;elves&nbsp;web&nbsp;services&nbsp;or&nbsp;RestFull&nbsp;interfaces.&nbsp;I&nbsp;am&nbsp;still&nbsp;working&nbsp;on<br>
&nbsp;the&amp;nbsp;&nbsp;Join&nbsp;Pattern&nbsp;API.&nbsp;Also&nbsp;it&nbsp;has&nbsp;also&nbsp;been&nbsp;a&nbsp;goal&nbsp;of&nbsp;mine&nbsp;to&nbsp;write&nbsp;a&nbsp;stacklessreactor&nbsp;to&nbsp;better&nbsp;integrate&nbsp;Stackless&nbsp;with&nbsp;the&nbsp;Twisted&nbsp;Reactor.&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Andrew&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
