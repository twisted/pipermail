<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;everyone,&lt;div&gt;Thanks&nbsp;Jean-Paul&nbsp;for&nbsp;the&nbsp;tips!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;I&nbsp;figured&nbsp;out&nbsp;that&nbsp;this&nbsp;thread&nbsp;was&nbsp;calling&nbsp;some&nbsp;callbacks,&nbsp;which&nbsp;in&nbsp;turn&nbsp;were&nbsp;either&nbsp;sending&nbsp;some&nbsp;UDP&nbsp;using&nbsp;a&nbsp;child&nbsp;of&nbsp;Twisted&#39;s&nbsp;datagram&nbsp;protocol,&nbsp;or&nbsp;launching&nbsp;processes&nbsp;using&nbsp;t.p.procutils.which&nbsp;and&nbsp;t.i.utils.getProcessOutputAndValue.&nbsp;None&nbsp;of&nbsp;this&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;thread-safe,&nbsp;according&nbsp;to &lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/threading.html&quot;&gt;http://twistedmatrix.com/documents/current/core/howto/threading.html&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;just&nbsp;added&nbsp;a &lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;color:rgb(0,0,0);font-size:13px;background-color:rgb(255,255,255)&quot;&gt;reactor&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;font-size:13px;color:rgb(102,102,102)&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;color:rgb(0,0,0);font-size:13px;background-color:rgb(255,255,255)&quot;&gt;callFromThread&nbsp;before&nbsp;calling&nbsp;my&nbsp;callbacks,&nbsp;and&nbsp;it&nbsp;should&nbsp;now&nbsp;be&nbsp;much&nbsp;faster...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;color:rgb(0,0,0);font-size:13px;background-color:rgb(255,255,255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;&quot;&nbsp;style=&quot;color:rgb(0,0,0);font-size:13px;background-color:rgb(255,255,255)&quot;&gt;Best,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2014-12-06&nbsp;13:47&nbsp;GMT-05:00&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;06:15&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:alexandre@quessy.net&quot;&nbsp;target=&quot;_blank&quot;&gt;alexandre@quessy.net&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello&nbsp;everyone,&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;happens&nbsp;if&nbsp;some&nbsp;code&nbsp;starts&nbsp;a&nbsp;thread&nbsp;while&nbsp;I&nbsp;am&nbsp;using&nbsp;Twisted&#39;s&lt;br&gt;<br>
reactor?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
Nothing&nbsp;special.&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Here&nbsp;is&nbsp;what&nbsp;I&nbsp;need&nbsp;to&nbsp;use:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/ekulyk/PythonPusherClient/blob/master/pusherclient/connection.py#L12&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/ekulyk/&lt;u&gt;&lt;/u&gt;PythonPusherClient/blob/&lt;u&gt;&lt;/u&gt;master/pusherclient/&lt;u&gt;&lt;/u&gt;connection.py#L12&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;thread&nbsp;polls&nbsp;some&nbsp;socket&nbsp;to&nbsp;handle&nbsp;received&nbsp;TCP&nbsp;messages.&nbsp;It&nbsp;appears&lt;br&gt;<br>
it&nbsp;has&nbsp;been&nbsp;very&nbsp;slow&nbsp;in&nbsp;production.&nbsp;Is&nbsp;it&nbsp;this&nbsp;mix&nbsp;of&nbsp;twisted&nbsp;and&lt;br&gt;<br>
non-twisted&nbsp;threading&nbsp;that&nbsp;causes&nbsp;this&nbsp;brutal&nbsp;slowdown?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
Not&nbsp;likely. &nbsp;Twisted&nbsp;doesn&#39;t&nbsp;have&nbsp;its&nbsp;own&nbsp;threading&nbsp;implementation.&nbsp;Twisted&nbsp;has&nbsp;a&nbsp;threadpool&nbsp;module&nbsp;which&nbsp;is&nbsp;a&nbsp;thin&nbsp;layer&nbsp;on&nbsp;top&nbsp;of&nbsp;Python&#39;s&nbsp;threading&nbsp;module.&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
If&nbsp;so,&nbsp;how&nbsp;can&nbsp;I&lt;br&gt;<br>
easily&nbsp;speed&nbsp;it&nbsp;up&nbsp;without&nbsp;having&nbsp;to&nbsp;twistify&nbsp;the&nbsp;library&nbsp;I&nbsp;need&nbsp;to&nbsp;use?&lt;br&gt;<br>
(and&nbsp;practically&nbsp;rewrite&nbsp;it)&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
Profile&nbsp;it. &nbsp;Find&nbsp;the&nbsp;particular&nbsp;operations&nbsp;that&nbsp;are&nbsp;slow. &nbsp;Then&nbsp;you&#39;ll&nbsp;be&nbsp;one&nbsp;step&nbsp;closer&nbsp;to&nbsp;knowing&nbsp;how&nbsp;to&nbsp;speed&nbsp;things&nbsp;up.&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.&lt;u&gt;&lt;/u&gt;com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-&lt;u&gt;&lt;/u&gt;bin/mailman/listinfo/twisted-&lt;u&gt;&lt;/u&gt;python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Alexandre&nbsp;Quessy&nbsp;- 亚历山大&nbsp;- ألكسندر&lt;br&gt;&lt;a&nbsp;href=&quot;http://alexandre.quessy.net&quot;&nbsp;target=&quot;_blank&quot;&gt;http://alexandre.quessy.net&lt;/a&gt;&nbsp;-&nbsp;Artiste&nbsp;en&nbsp;nouveaux&nbsp;médias&lt;br&gt;&lt;a&nbsp;href=&quot;http://perte-de-signal.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://perte-de-signal.org&lt;/a&gt;&nbsp;-&nbsp;Membre&nbsp;de&nbsp;Perte&nbsp;de&nbsp;signal&lt;div&gt;&lt;a&nbsp;href=&quot;http://sourcelibre.net&quot;&nbsp;target=&quot;_blank&quot;&gt;http://sourcelibre.net&lt;/a&gt;&nbsp;-&nbsp;Développement&nbsp;logiciel&nbsp;et&nbsp;conception&nbsp;de&nbsp;sites&nbsp;Web&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://labalab.ca&quot;&nbsp;target=&quot;_blank&quot;&gt;http://labalab.ca&lt;/a&gt;&nbsp;-&nbsp;Impliqué&nbsp;dans&nbsp;LabàLab&nbsp;-&nbsp;communauté&nbsp;de&nbsp;pratique&nbsp;en&nbsp;arts&nbsp;numériques&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
