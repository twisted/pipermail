<tt>
&lt;html&gt;&lt;body&gt;On&nbsp;27&nbsp;Nov,&nbsp;06:19&nbsp;pm,&nbsp;ncesar@lunix.com.ar&nbsp;wrote:&lt;br&nbsp;/&gt;&amp;gt;El&nbsp;Sábado,&nbsp;25&nbsp;de&nbsp;Noviembre&nbsp;de&nbsp;2006&nbsp;02:39,&nbsp;glyph@divmod.com&nbsp;escribió:&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;twistd/the&nbsp;application&nbsp;class&nbsp;could&nbsp;have&nbsp;a&nbsp;&quot;exit&nbsp;on&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;Exception&quot;&nbsp;for&nbsp;this&nbsp;type&nbsp;of&nbsp;operations.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;In&nbsp;general&nbsp;this&nbsp;is&nbsp;a&nbsp;bad&nbsp;idea.&nbsp;&amp;#160;There&nbsp;are&nbsp;basically&nbsp;3&nbsp;kinds&nbsp;of&nbsp;code&nbsp;you&nbsp;can&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;write&nbsp;with&nbsp;Twisted:&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;#160;&nbsp;1.&nbsp;Infrastructure&nbsp;code,&nbsp;which&nbsp;implements&nbsp;a&nbsp;protocol&nbsp;and&nbsp;provides&nbsp;APIs&nbsp;for&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;parsing&nbsp;and&nbsp;dealing&nbsp;with&nbsp;events.&nbsp;&amp;#160;This&nbsp;kind&nbsp;of&nbsp;code&nbsp;should&nbsp;never&nbsp;contain&nbsp;a&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;reactor.stop&nbsp;at&nbsp;all.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;Actually&nbsp;is&nbsp;type&nbsp;1,&nbsp;but&nbsp;there&nbsp;are&nbsp;horrible&nbsp;(network)&nbsp;conditions&nbsp;were&nbsp;de&lt;br&nbsp;/&gt;&amp;gt;application&nbsp;should&nbsp;stop.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;No,&nbsp;there&nbsp;aren't.&nbsp;&amp;#160;What&nbsp;happens&nbsp;when&nbsp;I&nbsp;run&nbsp;your&nbsp;application&nbsp;in-process&nbsp;with&nbsp;my&nbsp;webserver?&nbsp;&amp;#160;Should&nbsp;the&nbsp;webserver&nbsp;stop&nbsp;simply&nbsp;because&nbsp;your&nbsp;protocol&nbsp;is&nbsp;not&nbsp;working?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;Even&nbsp;it's&nbsp;not&nbsp;type&nbsp;3,&nbsp;I&nbsp;get&nbsp;your&nbsp;point.&nbsp;And&nbsp;thats&nbsp;why&nbsp;I&nbsp;didn't&nbsp;want&nbsp;to&nbsp;write&lt;br&nbsp;/&gt;&amp;gt;ANY&nbsp;reactor.stop()&nbsp;call,&nbsp;instead&nbsp;just&nbsp;raise&nbsp;exceptions-&nbsp;And&nbsp;have&nbsp;a&nbsp;unnified&lt;br&nbsp;/&gt;&amp;gt;reactor.stop()&nbsp;inside&nbsp;somewhere&nbsp;in&nbsp;twistd.&nbsp;But&nbsp;it&nbsp;seems&nbsp;I&nbsp;need&nbsp;to&nbsp;think&lt;br&nbsp;/&gt;&amp;gt;another&nbsp;solution.&nbsp;Right&nbsp;now&nbsp;as&nbsp;a&nbsp;workaround,&nbsp;reactor.stop()&nbsp;will&nbsp;be&nbsp;inside&nbsp;my&lt;br&nbsp;/&gt;&amp;gt;exception's&nbsp;__init__&nbsp;function&nbsp;;-)&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Just&nbsp;don't&nbsp;call&nbsp;reactor.stop&nbsp;at&nbsp;all&nbsp;unless&nbsp;you&nbsp;are&nbsp;writing&nbsp;top-level&nbsp;infrastructure&nbsp;code.&nbsp;&amp;#160;Your&nbsp;application&nbsp;should&nbsp;have&nbsp;some&nbsp;other,&nbsp;more&nbsp;structured&nbsp;way&nbsp;of&nbsp;reporting&nbsp;fatal&nbsp;shut-down&nbsp;errors&nbsp;to&nbsp;its&nbsp;run&nbsp;container&nbsp;(e.g.&nbsp;runContainer.applicationEncounteredFatal(xxx)),&nbsp;not&nbsp;simply&nbsp;raising&nbsp;exceptions&nbsp;and&nbsp;hoping&nbsp;someone&nbsp;is&nbsp;listening.&nbsp;&amp;#160;Unless&nbsp;you&nbsp;give&nbsp;more&nbsp;specifics&nbsp;that&nbsp;indicate&nbsp;that&nbsp;your&nbsp;special&nbsp;case&nbsp;is&nbsp;special-er&nbsp;than&nbsp;any&nbsp;other&nbsp;I've&nbsp;seen&nbsp;before,&nbsp;I'll&nbsp;stand&nbsp;by&nbsp;this.&nbsp;:)&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;Don't&nbsp;try&nbsp;to&nbsp;always&nbsp;stop&nbsp;the&nbsp;*process*&nbsp;when&nbsp;your&nbsp;program&nbsp;is&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;complete:&nbsp;stop&nbsp;the&nbsp;*program*&nbsp;by&nbsp;keeping&nbsp;a&nbsp;Deferred&nbsp;around&nbsp;which&nbsp;represents&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;its&nbsp;complete&nbsp;run.&nbsp;&amp;#160;That&nbsp;way&nbsp;the&nbsp;*driver*&nbsp;for&nbsp;the&nbsp;program&nbsp;is&nbsp;responsible&nbsp;for&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;stopping&nbsp;it,&nbsp;and&nbsp;when&nbsp;you&nbsp;want&nbsp;to&nbsp;aggregate&nbsp;multiple&nbsp;runs&nbsp;of&nbsp;it,&nbsp;you&nbsp;can&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;easily&nbsp;use&nbsp;a&nbsp;tool&nbsp;like&nbsp;DeferredList,&nbsp;or&nbsp;do&nbsp;something&nbsp;different&nbsp;in&nbsp;the&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;callbacks&nbsp;at&nbsp;the&nbsp;end.&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;I&nbsp;couldn't&nbsp;understand&nbsp;much&nbsp;of&nbsp;this&nbsp;last&nbsp;parragraph&nbsp;(my&nbsp;English&nbsp;reading&nbsp;could&lt;br&nbsp;/&gt;&amp;gt;be&nbsp;part&nbsp;of&nbsp;the&nbsp;problem).&nbsp;I&nbsp;understand&nbsp;algorithms&nbsp;mucho&nbsp;more&nbsp;when&nbsp;are&nbsp;written&lt;br&nbsp;/&gt;&amp;gt;in&nbsp;python&nbsp;instead&nbsp;of&nbsp;English,&nbsp;&amp;#160;Do&nbsp;you&nbsp;have&nbsp;a&nbsp;link&nbsp;to&nbsp;some&nbsp;code&nbsp;explaning&lt;br&nbsp;/&gt;&amp;gt;this?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;It's&nbsp;hard&nbsp;for&nbsp;me&nbsp;to&nbsp;think&nbsp;of&nbsp;a&nbsp;program&nbsp;which&nbsp;does&nbsp;this&nbsp;in&nbsp;a&nbsp;simple&nbsp;way.&nbsp;&amp;#160;If&nbsp;I&nbsp;can&nbsp;think&nbsp;of&nbsp;one&nbsp;I&nbsp;will&nbsp;post&nbsp;an&nbsp;example.&lt;br&nbsp;/&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
