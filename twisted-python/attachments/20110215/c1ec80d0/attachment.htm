<tt>
Thanks&nbsp;for&nbsp;all&nbsp;the&nbsp;help.&nbsp; We&amp;#39;re&nbsp;going&nbsp;with addSystemEventTrigger&nbsp;for&nbsp;now,&nbsp;but&nbsp;we&amp;#39;ll&nbsp;keep&nbsp;twistd&nbsp;in&nbsp;mind&nbsp;for&nbsp;future&nbsp;work.&lt;div&gt;&lt;br&gt;Jason&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Feb&nbsp;11,&nbsp;2011&nbsp;at&nbsp;1:51&nbsp;PM,&nbsp;Glyph&nbsp;Lefkowitz&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;Feb&nbsp;11,&nbsp;2011,&nbsp;at&nbsp;11:55&nbsp;AM,&nbsp;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;03:59&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:jrennie@gmail.com&quot;&gt;jrennie@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;On&nbsp;Fri,&nbsp;Feb&nbsp;11,&nbsp;2011&nbsp;at&nbsp;10:01&nbsp;AM,&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;On&nbsp;Python&nbsp;2.5&nbsp;and&nbsp;earlier&nbsp;you&nbsp;won&amp;#39;t&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;Twisted&amp;#39;s&nbsp;SIGCHLD&lt;br&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;handler&nbsp;using&nbsp;signal.getsignal.&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;We&amp;#39;re&nbsp;also&nbsp;moving&nbsp;to&nbsp;python&nbsp;2.6&nbsp;(the&nbsp;change&nbsp;is&nbsp;really&nbsp;Debian&nbsp;5&nbsp;to&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Debian&nbsp;6).&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;Should&nbsp;it&nbsp;would&nbsp;work&nbsp;in&nbsp;2.6?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&nbsp;think&nbsp;so.&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&amp;gt;&nbsp;What&nbsp;sort&nbsp;of&nbsp;things&nbsp;do&nbsp;your&nbsp;signal&nbsp;handlers&nbsp;do?&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;IIRC,&nbsp;the&nbsp;main&nbsp;thing&nbsp;is&nbsp;to&nbsp;shut&nbsp;down&nbsp;the&nbsp;web&nbsp;server&nbsp;(cherrypy)&nbsp;we&amp;#39;re&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;running&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;in&nbsp;parallel&nbsp;with&nbsp;twisted.&nbsp; We&nbsp;also&nbsp;have&nbsp;some&nbsp;disk-caching&nbsp;for&nbsp;stateful&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;signals&nbsp;which&nbsp;needs&nbsp;to&nbsp;ensure&nbsp;the&nbsp;cache&nbsp;file&nbsp;is&nbsp;up-to-date.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;For&nbsp;shutdown-type&nbsp;things,&nbsp;reactor.addSystemEventTrigger(phase,&lt;br&gt;<br>
&amp;gt;&nbsp;&amp;#39;shutdown&amp;#39;,&nbsp;f)&nbsp;might&nbsp;be&nbsp;better&nbsp;than&nbsp;getting&nbsp;into&nbsp;signal&nbsp;handlers&nbsp;(where&lt;br&gt;<br>
&amp;gt;&nbsp;phase&nbsp;is&nbsp;&amp;#39;before&amp;#39;,&nbsp;&amp;#39;during&amp;#39;,&nbsp;or&nbsp;&amp;#39;after&amp;#39;).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;There&amp;#39;s&nbsp;already&nbsp;a&nbsp;system&nbsp;event&nbsp;trigger&nbsp;already&nbsp;hooked&nbsp;up&nbsp;to&nbsp;the&nbsp;reactor:&nbsp;your&nbsp;main&nbsp;service&amp;#39;s&nbsp;stopService&nbsp;call.&nbsp; If&nbsp;your&nbsp;cherrypy&nbsp;webserver&nbsp;is&nbsp;wrapped&nbsp;up&nbsp;in&nbsp;an&nbsp;IService&nbsp;implementation&nbsp;in&nbsp;the&nbsp;service&nbsp;hierarchy&nbsp;constructed&nbsp;in&nbsp;your&nbsp;twistd&nbsp;plugin&nbsp;or&nbsp;tac&nbsp;file,&nbsp;you&nbsp;can&nbsp;just&nbsp;implement&nbsp;&amp;#39;stopService&amp;#39;&nbsp;and&nbsp;not&nbsp;do&nbsp;any&nbsp;manual&nbsp;registration&nbsp;with&nbsp;event&nbsp;triggers.&nbsp; This&nbsp;is&nbsp;really&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;go&nbsp;in&nbsp;general,&nbsp;as&nbsp;it&amp;#39;s&nbsp;easier&nbsp;for&nbsp;other&nbsp;API&nbsp;consumers&nbsp;to&nbsp;deal&nbsp;with&nbsp;such&nbsp;an&nbsp;object&nbsp;than&nbsp;using&nbsp;the&nbsp;global&nbsp;broadcasting&nbsp;mechanism&nbsp;in&nbsp;the&nbsp;reactor.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;do&nbsp;want&nbsp;to&nbsp;manually&nbsp;add&nbsp;your&nbsp;own&nbsp;system&nbsp;event&nbsp;trigger,&nbsp;in&nbsp;most&nbsp;interesting&nbsp;cases&nbsp;you&amp;#39;ll&nbsp;need&nbsp;to&nbsp;use&nbsp;the&nbsp;&amp;#39;before&amp;#39;&nbsp;phase.&nbsp; During&nbsp;&amp;#39;before&amp;#39;,&nbsp;Deferreds&nbsp;returned&nbsp;by&nbsp;event&nbsp;triggers&nbsp;are&nbsp;respected&nbsp;(i.e.&nbsp;the&nbsp;reactor&nbsp;keeps&nbsp;running&nbsp;as&nbsp;long&nbsp;as&nbsp;they&nbsp;haven&amp;#39;t&nbsp;fired).&nbsp; If&nbsp;you&nbsp;schedule&nbsp;one&nbsp;for&nbsp;&amp;#39;during&amp;#39;&nbsp;or&nbsp;&amp;#39;after&amp;#39;,&nbsp;the&nbsp;event&nbsp;trigger&nbsp;really&nbsp;needs&nbsp;to&nbsp;do&nbsp;all&nbsp;of&nbsp;its&nbsp;work&nbsp;and&nbsp;complete&nbsp;it&nbsp;immediately&nbsp;(i.e.&nbsp;before&nbsp;returning).&lt;br&gt;<br>
<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Jason&nbsp;Rennie&lt;br&gt;Research&nbsp;Scientist,&nbsp;ITA&nbsp;Software&lt;br&gt;617-714-2645&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.itasoftware.com/&quot;&gt;http://www.itasoftware.com/&lt;/a&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
