<tt>
&lt;br&gt;Can&nbsp;anybody&nbsp;provide&nbsp;a&nbsp;an&nbsp;example&nbsp;on&nbsp;how&nbsp;I&nbsp;would&nbsp;best&nbsp;send&nbsp;&lt;br&gt;a&nbsp;data&nbsp;structure&nbsp;(i.e.&nbsp;an&nbsp;ElemenTree&nbsp;from&nbsp;elementtree)&nbsp;over&nbsp;from&lt;br&gt;a&nbsp;server&nbsp;to&nbsp;a&nbsp;client&nbsp;process.&nbsp;I&nbsp;followed&nbsp;somewhat&nbsp;the&nbsp;example&nbsp;in&lt;br&gt;the&nbsp;documentation&nbsp;and&nbsp;used&nbsp;the&nbsp;perspective&nbsp;broker&nbsp;&quot;pb&quot;&nbsp;to&nbsp;send<br>
&lt;br&gt;an&nbsp;&quot;simple&quot;&nbsp;structure&nbsp;(some&nbsp;class&nbsp;with&nbsp;simple&nbsp;members)&lt;br&gt;&lt;br&gt;When&nbsp;I&nbsp;changed&nbsp;to&nbsp;a&nbsp;more&nbsp;complex&nbsp;class&nbsp;definition,&nbsp;I&nbsp;obviously&nbsp;got&lt;br&gt;an&nbsp;InsecureJelly&nbsp;exception.&nbsp;&lt;br&gt;&lt;br&gt;I'm&nbsp;sure&nbsp;this&nbsp;question&nbsp;must&nbsp;have&nbsp;come&nbsp;up&nbsp;a&nbsp;number&nbsp;of&nbsp;times.&nbsp;I'm&nbsp;new<br>
&lt;br&gt;in&nbsp;using&nbsp;twisted&nbsp;and&nbsp;not&nbsp;everything&nbsp;is&nbsp;so&nbsp;obvious&nbsp;at&nbsp;the&nbsp;beginning&nbsp;to&nbsp;me&nbsp;:-(&lt;br&gt;&lt;br&gt;Many&nbsp;thanks&nbsp;for&nbsp;the&nbsp;help&lt;br&gt;&lt;br&gt;Franz&lt;br&gt;&lt;br&gt;Attached&nbsp;is&nbsp;the&nbsp;sample&nbsp;code&nbsp;I&nbsp;used:&lt;br&gt;&lt;br&gt;sending&nbsp;test1&nbsp;--&gt;&nbsp;OK&lt;br&gt;sending&nbsp;test2&nbsp;--&gt;&nbsp;InsecureJelly&nbsp;exception<br>
&lt;br&gt;&lt;br&gt;------&nbsp;&nbsp;&nbsp;pbsimple.py&nbsp;(server)&nbsp;-------&lt;br&gt;from&nbsp;twisted.spread&nbsp;import&nbsp;pb,&nbsp;jelly&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;&lt;br&gt;class&nbsp;test:&lt;br&gt;&nbsp;&nbsp;def&nbsp;__init__(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;3.&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;4.&lt;br&gt;&lt;br&gt;class&nbsp;Bag:&lt;br&gt;&nbsp;&nbsp;def&nbsp;setContent(self,content):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.content&nbsp;=&nbsp;content&lt;br&gt;&nbsp;&nbsp;def&nbsp;printContent(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;My&nbsp;data&nbsp;is&quot;,&nbsp;self.content&lt;br&gt;&lt;br&gt;class&nbsp;CopyBag(Bag,&nbsp;pb.Copyable):&lt;br&gt;&nbsp;&nbsp;pass&lt;br&gt;&lt;br&gt;class&nbsp;Sender(pb.Root):&lt;br&gt;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;bag):&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;self.bag&nbsp;=&nbsp;bag&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;def&nbsp;remote_sendBag(self,&nbsp;remote):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.remote&nbsp;=&nbsp;remote&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;remote.callRemote(&quot;takeBag&quot;,&nbsp;self.bag)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;d.addCallback(self.ok).addErrback(self.notOk)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;def&nbsp;ok(self,&nbsp;response):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;info:&nbsp;%s&quot;&nbsp;%&nbsp;response&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;self.remote.callRemote(&quot;finishTransfer&quot;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;d.addErrback(self.notOk)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;def&nbsp;notOk(self,&nbsp;failure):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;failure.type&nbsp;==&nbsp;jelly.InsecureJelly<br>
:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;error:&nbsp;InsecureJelly&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;failure.type&nbsp;==&nbsp;pb.PBConnectionLost:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;info:&nbsp;data&nbsp;transfer&nbsp;finished&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;failure&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None&lt;br&gt;&lt;br&gt;def&nbsp;main():<br>
&lt;br&gt;&nbsp;&nbsp;from&nbsp;pbsimple&nbsp;import&nbsp;CopyBag&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;icae&nbsp;=&nbsp;iCAEconfig()&lt;br&gt;&nbsp;&nbsp;bag&nbsp;=&nbsp;CopyBag()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;bag.setContent('simple&nbsp;data')&nbsp;#&nbsp;--&gt;&nbsp;OK&lt;br&gt;&nbsp;&nbsp;#bag.setContent(test())&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;--&gt;&nbsp;InsecureJelly&lt;br&gt;&nbsp;&nbsp;sender&nbsp;=&nbsp;Sender(bag)&lt;br&gt;<br>
&lt;br&gt;&nbsp;&nbsp;factory&nbsp;=&nbsp;pb.PBServerFactory(sender)&lt;br&gt;&nbsp;&nbsp;reactor.listenTCP(8789,&nbsp;factory)&lt;br&gt;&nbsp;&nbsp;reactor.run()&lt;br&gt;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;br&gt;&nbsp;&nbsp;main()&lt;br&gt;&lt;br&gt;-----------------------------&lt;br&gt;&lt;br&gt;------------&nbsp;&nbsp;pbsimleclient.py&nbsp;&nbsp;-----------------<br>
&lt;br&gt;&lt;br&gt;from&nbsp;twisted.spread&nbsp;import&nbsp;pb&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.python&nbsp;import&nbsp;util&lt;br&gt;&lt;br&gt;from&nbsp;pbsimple&nbsp;import&nbsp;Bag,&nbsp;CopyBag&lt;br&gt;&lt;br&gt;class&nbsp;ReceiverBag(Bag,pb.RemoteCopy):&lt;br&gt;&nbsp;&nbsp;pass&lt;br&gt;&lt;br&gt;pb.setUnjellyableForClass<br>
(CopyBag,&nbsp;ReceiverBag)&lt;br&gt;&lt;br&gt;class&nbsp;Receiver(pb.Referenceable):&lt;br&gt;&nbsp;&nbsp;def&nbsp;remote_takeBag(self,&nbsp;bag):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;self.bag&nbsp;=&nbsp;bag&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;data&nbsp;arrived&nbsp;safe&nbsp;and&nbsp;sound&quot;&nbsp;#&nbsp;positive&nbsp;acknowledgement&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;def&nbsp;remote_finishTransfer(self):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;got&nbsp;bag:&quot;,&nbsp;self.bag&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;reactor.stop()&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;def&nbsp;requestBag(self,remote):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;asking&nbsp;server&nbsp;for&nbsp;sending&nbsp;the&nbsp;data&nbsp;bag&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;remote.callRemote(&quot;sendBag&quot;,self)&lt;br&gt;<br>
&lt;br&gt;def&nbsp;getContentFromServer():&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;receiver&nbsp;=&nbsp;Receiver()&lt;br&gt;&nbsp;&nbsp;factory&nbsp;=&nbsp;pb.PBClientFactory()&lt;br&gt;&nbsp;&nbsp;reactor.connectTCP(&quot;localhost&quot;,&nbsp;8789,&nbsp;factory,30)&lt;br&gt;&nbsp;&nbsp;d&nbsp;=&nbsp;factory.getRootObject()&lt;br&gt;&nbsp;&nbsp;d.addCallback(receiver.requestBag<br>
)&lt;br&gt;&nbsp;&nbsp;reactor.run()&lt;br&gt;&nbsp;&nbsp;return&nbsp;receiver.bag.content&lt;br&gt;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;'__main__':&lt;br&gt;&nbsp;&nbsp;print&nbsp;getContentFromServer()&lt;br&gt;&lt;br&gt;---------------------------------------------------------&lt;br&gt;&lt;br&gt;<br>

</tt>
