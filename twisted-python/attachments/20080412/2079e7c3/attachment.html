<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--&nbsp;DIV&nbsp;{margin:0px;}&nbsp;--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;I&nbsp;suspect&nbsp;it&nbsp;might&nbsp;be&nbsp;your&nbsp;code.&nbsp;On&nbsp;Twisted&nbsp;2.5&nbsp;(with&nbsp;patched&nbsp;epoll&nbsp;bug&nbsp;&lt;A&nbsp;href=&quot;http://twistedmatrix.com/trac/ticket/2809&quot;&gt;http://twistedmatrix.com/trac/ticket/2809&lt;/A&gt;&nbsp;)&nbsp;we&nbsp;have&nbsp;reactors&nbsp;that&nbsp;run&nbsp;for&nbsp;3-4&nbsp;months&nbsp;without&nbsp;restart,&nbsp;that&nbsp;do&nbsp;not&nbsp;consume&nbsp;more&nbsp;than&nbsp;150MB&nbsp;RSS&nbsp;with&nbsp;8000+&nbsp;concurrent&nbsp;connections.&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif&quot;&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif&quot;&gt;-----&nbsp;Original&nbsp;Message&nbsp;----&lt;BR&gt;From:&nbsp;Matthew&nbsp;Glubb&nbsp;&lt;matt@madebykite.com&gt;&lt;BR&gt;To:&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&lt;twisted-python@twistedmatrix.com&gt;&lt;BR&gt;Sent:&nbsp;Saturday,&nbsp;April&nbsp;12,&nbsp;2008&nbsp;1:53:32&nbsp;PM&lt;BR&gt;Subject:&nbsp;[Twisted-Python]&nbsp;Epoll&nbsp;Memory&nbsp;Issues&lt;BR&gt;&lt;BR&gt;Hi&nbsp;All,&lt;BR&gt;&lt;BR&gt;First&nbsp;of&nbsp;all,&nbsp;I'd&nbsp;like&nbsp;to&nbsp;offer&nbsp;a&nbsp;belated&nbsp;thanks&nbsp;for&nbsp;Twisted&nbsp;and&nbsp;&nbsp;&lt;BR&gt;congratulations&nbsp;on&nbsp;releasing&nbsp;version&nbsp;8.&lt;BR&gt;&lt;BR&gt;I&nbsp;posted&nbsp;about&nbsp;a&nbsp;year&nbsp;ago&nbsp;about&nbsp;memory&nbsp;issues&nbsp;I&nbsp;was&nbsp;having&nbsp;with&nbsp;&nbsp;&lt;BR&gt;Twisted&nbsp;and&nbsp;the&nbsp;epoll&nbsp;reactor.&nbsp;I&nbsp;have&nbsp;recently&nbsp;put&nbsp;a&nbsp;simple&nbsp;proxy&nbsp;&nbsp;&lt;BR&gt;server&nbsp;based&nbsp;on&nbsp;Twisted&nbsp;in&nbsp;to&nbsp;production&nbsp;and&nbsp;have&nbsp;been&nbsp;running&nbsp;a&nbsp;live&nbsp;&nbsp;&lt;BR&gt;test&nbsp;on&nbsp;a&nbsp;single&nbsp;host&nbsp;for&nbsp;between&nbsp;300&nbsp;and&nbsp;400&nbsp;concurrent&nbsp;users.&nbsp;The&nbsp;&nbsp;&lt;BR&gt;server&nbsp;gradually&nbsp;consumes&nbsp;memory&nbsp;to&nbsp;a&nbsp;point&nbsp;where&nbsp;I&nbsp;have&nbsp;to&nbsp;start&nbsp;&nbsp;&lt;BR&gt;thinking&nbsp;about&nbsp;the&nbsp;experience&nbsp;of&nbsp;my&nbsp;users&nbsp;(the&nbsp;server&nbsp;starts&nbsp;&nbsp;&lt;BR&gt;swapping)&nbsp;and&nbsp;restart&nbsp;the&nbsp;process.&nbsp;I<br>
&nbsp;have&nbsp;been&nbsp;watching&nbsp;this&nbsp;&nbsp;&lt;BR&gt;behaviour&nbsp;for&nbsp;the&nbsp;last&nbsp;10&nbsp;days&nbsp;and&nbsp;in&nbsp;the&nbsp;meantime&nbsp;have&nbsp;been&nbsp;going&nbsp;&nbsp;&lt;BR&gt;through&nbsp;my&nbsp;code&nbsp;with&nbsp;a&nbsp;fine&nbsp;tooth&nbsp;comb,&nbsp;looking&nbsp;for&nbsp;and&nbsp;testing&nbsp;for&nbsp;&nbsp;&lt;BR&gt;possible&nbsp;memory&nbsp;leaks.&nbsp;I&nbsp;found&nbsp;a&nbsp;few&nbsp;minor&nbsp;ones,&nbsp;but&nbsp;the&nbsp;memory&nbsp;leaks&nbsp;&nbsp;&lt;BR&gt;continue.&lt;BR&gt;&lt;BR&gt;Today,&nbsp;out&nbsp;of&nbsp;desperation,&nbsp;I&nbsp;switched&nbsp;the&nbsp;reactor&nbsp;from&nbsp;epoll&nbsp;to&nbsp;&nbsp;&lt;BR&gt;select.&nbsp;Guess&nbsp;what?&nbsp;No&nbsp;more&nbsp;memory&nbsp;leak.&lt;BR&gt;&lt;BR&gt;My&nbsp;environment&nbsp;is&nbsp;Linux&nbsp;2.6,&nbsp;Python&nbsp;2.5.2,&nbsp;Twisted&nbsp;8.0.1,&nbsp;twistd.&nbsp;I&nbsp;&nbsp;&lt;BR&gt;was&nbsp;wondering&nbsp;whether&nbsp;anyone&nbsp;could&nbsp;cast&nbsp;any&nbsp;light&nbsp;on&nbsp;this&nbsp;matter?&nbsp;I&nbsp;&nbsp;&lt;BR&gt;am&nbsp;pretty&nbsp;sure&nbsp;that&nbsp;this&nbsp;isn't&nbsp;an&nbsp;issue&nbsp;specific&nbsp;to&nbsp;my&nbsp;code&nbsp;but&nbsp;I&nbsp;&nbsp;&lt;BR&gt;would&nbsp;be&nbsp;interested&nbsp;to&nbsp;hear&nbsp;if&nbsp;anyone&nbsp;else&nbsp;has&nbsp;experienced&nbsp;similar&nbsp;&nbsp;&lt;BR&gt;problems.&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;switch&nbsp;back&nbsp;to&nbsp;epoll&nbsp;for&nbsp;obvious&nbsp;&nbsp;&lt;BR&gt;reasons,&nbsp;but&nbsp;at&nbsp;the&nbsp;moment,&nbsp;I&nbsp;am&nbsp;not&nbsp;confident&nbsp;in&nbsp;running&nbsp;the&nbsp;Twisted&nbsp;&nbsp;&lt;BR&gt;epoll&nbsp;reactor.&lt;BR&gt;&lt;BR&gt;Regards,&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;Matt&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;&lt;BR&gt;Matthew<br>
&nbsp;Glubb&lt;BR&gt;Technical&nbsp;Partner&lt;BR&gt;&lt;BR&gt;email:&nbsp;&lt;A&nbsp;href=&quot;mailto:matthew.glubb@madebykite.com&quot;&nbsp;ymailto=&quot;mailto:matthew.glubb@madebykite.com&quot;&gt;matthew.glubb@madebykite.com&lt;/A&gt;&lt;BR&gt;phone:&nbsp;44&nbsp;(0)&nbsp;7715&nbsp;754017&lt;BR&gt;skype:&nbsp;mglubb&lt;BR&gt;&lt;BR&gt;Kite&lt;BR&gt;&lt;A&nbsp;href=&quot;http://madebykite.com/&quot;&nbsp;target=_blank&gt;http://madebykite.com&lt;/A&gt;&lt;BR&gt;&lt;BR&gt;--&lt;BR&gt;GPG:&nbsp;96FF&nbsp;DE0E&nbsp;0B7B&nbsp;37F0&nbsp;7F8D&nbsp;C54C&nbsp;E285&nbsp;3D8F&nbsp;5625&nbsp;9244&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;_______________________________________________&lt;BR&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;BR&gt;&lt;A&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;ymailto=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/A&gt;&lt;BR&gt;&lt;A&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=_blank&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
