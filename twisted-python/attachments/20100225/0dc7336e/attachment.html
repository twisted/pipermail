<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/3.28.1&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;TEXT=&quot;#000000&quot;&nbsp;BGCOLOR=&quot;#ffffff&quot;&gt;<br>
The&nbsp;nice&nbsp;thing&nbsp;about&nbsp;using&nbsp;Python's&nbsp;process&nbsp;support&nbsp;is&nbsp;that&nbsp;you&nbsp;can&nbsp;spawn&nbsp;native&nbsp;Processes&nbsp;that&nbsp;run&nbsp;in&nbsp;separate&nbsp;heaps&nbsp;directly&nbsp;from&nbsp;ONE&nbsp;Python&nbsp;Twisted&nbsp;app.&nbsp;Not&nbsp;many&nbsp;running&nbsp;side-by-side,&nbsp;which&nbsp;adds&nbsp;the&nbsp;complexity&nbsp;of&nbsp;now&nbsp;coordinating&nbsp;among&nbsp;them&nbsp;(however&nbsp;easy&nbsp;with&nbsp;additional&nbsp;protocols&nbsp;like&nbsp;spread).&lt;BR&gt;<br>
&lt;BR&gt;<br>
Inter-Process&nbsp;communication&nbsp;is&nbsp;also&nbsp;supported&nbsp;in&nbsp;Python's&nbsp;new&nbsp;multiprocessing&nbsp;package.&nbsp;And&nbsp;again,&nbsp;it&nbsp;can&nbsp;all&nbsp;be&nbsp;orchestrated&nbsp;from&nbsp;a&nbsp;single&nbsp;service&nbsp;_instance_.&lt;BR&gt;<br>
&lt;BR&gt;<br>
In&nbsp;my&nbsp;code,&nbsp;I&nbsp;need&nbsp;to&nbsp;run&nbsp;&quot;on&nbsp;the&nbsp;metal&quot;&nbsp;for&nbsp;some&nbsp;tasks&nbsp;and&nbsp;not&nbsp;others.&nbsp;Agreed,&nbsp;the&nbsp;event-based&nbsp;reactor&nbsp;threading&nbsp;in&nbsp;Twisted&nbsp;is&nbsp;great.&lt;BR&gt;<br>
But&nbsp;not&nbsp;for&nbsp;all&nbsp;modes&nbsp;of&nbsp;computation.&nbsp;For&nbsp;those,&nbsp;I&nbsp;offload&nbsp;onto&nbsp;OS&nbsp;processes&nbsp;directly&nbsp;onto&nbsp;CPU&nbsp;cores.&nbsp;Twisted&nbsp;does&nbsp;not&nbsp;provide&nbsp;a&nbsp;way&nbsp;to&nbsp;leverage&nbsp;its&nbsp;API&nbsp;against&nbsp;Python's&nbsp;support&nbsp;for&nbsp;this&nbsp;feature.&nbsp;So&nbsp;I&nbsp;have&nbsp;to&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;marry&nbsp;the&nbsp;two.&lt;BR&gt;<br>
&lt;BR&gt;<br>
What&nbsp;I&nbsp;ended&nbsp;up&nbsp;doing&nbsp;was&nbsp;using&nbsp;the&nbsp;multiprocess&nbsp;package&nbsp;to&nbsp;kick&nbsp;off&nbsp;hard&nbsp;Process&nbsp;objects&nbsp;in&nbsp;a&nbsp;Python&nbsp;Process&nbsp;pool&nbsp;executing&nbsp;Python&nbsp;functions.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Those&nbsp;functions&nbsp;make&nbsp;calls&nbsp;into&nbsp;Twisted,&nbsp;but&nbsp;for&nbsp;it&nbsp;to&nbsp;work,&nbsp;they&nbsp;had&nbsp;to&nbsp;start&nbsp;their&nbsp;own&nbsp;reactors&nbsp;because&nbsp;a&nbsp;Process&nbsp;has&nbsp;its&nbsp;own,&nbsp;separate&nbsp;OS&nbsp;memory,&nbsp;etc.&nbsp;Running&nbsp;compute&nbsp;intensive&nbsp;tasks&nbsp;in&nbsp;processes&nbsp;with&nbsp;their&nbsp;own&nbsp;memory&nbsp;makes&nbsp;a&nbsp;lot&nbsp;of&nbsp;sense&nbsp;for&nbsp;some&nbsp;things&nbsp;that&nbsp;Python&nbsp;cannot&nbsp;do&nbsp;with&nbsp;virtual&nbsp;machine&nbsp;thread&nbsp;contexts.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Darren&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;Thu,&nbsp;2010-02-25&nbsp;at&nbsp;10:21&nbsp;-0800,&nbsp;K.&nbsp;Richard&nbsp;Pixley&nbsp;wrote:&lt;BR&gt;<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Single&nbsp;threaded,&nbsp;event&nbsp;loop&nbsp;based&nbsp;code&nbsp;like&nbsp;twisted&nbsp;rocks&nbsp;hard.&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Once&nbsp;upon&nbsp;a&nbsp;time,&nbsp;threads&nbsp;were&nbsp;like&nbsp;that&nbsp;too&nbsp;and&nbsp;the&nbsp;distinction&nbsp;between&nbsp;threads&nbsp;and&nbsp;event&nbsp;loops&nbsp;was&nbsp;grey.&nbsp;&nbsp;But&nbsp;with&nbsp;the&nbsp;advent&nbsp;of&nbsp;mandatory&nbsp;preemptive&nbsp;thread&nbsp;scheduling&nbsp;and&nbsp;the&nbsp;ability&nbsp;to&nbsp;run&nbsp;multiple&nbsp;threads&nbsp;on&nbsp;separate&nbsp;shared&nbsp;memory&nbsp;processors,&nbsp;the&nbsp;difference&nbsp;between&nbsp;programming&nbsp;with&nbsp;threads&nbsp;and&nbsp;programming&nbsp;with&nbsp;parallel&nbsp;heavy&nbsp;weight&nbsp;processes&nbsp;that&nbsp;share&nbsp;memory&nbsp;became&nbsp;extremely&nbsp;grey,&nbsp;(aside&nbsp;from&nbsp;the&nbsp;problems&nbsp;debugging&nbsp;threads&nbsp;which&nbsp;don't&nbsp;exist&nbsp;for&nbsp;heavy&nbsp;weight&nbsp;processes).&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Threads&nbsp;routinely&nbsp;use&nbsp;shared&nbsp;memory&nbsp;and&nbsp;shared&nbsp;memory&nbsp;(generally)&nbsp;requires&nbsp;a&nbsp;common&nbsp;kernel.&nbsp;&nbsp;OTOH,&nbsp;message&nbsp;passing&nbsp;can&nbsp;use&nbsp;a&nbsp;common&nbsp;kernel&nbsp;but&nbsp;can&nbsp;also&nbsp;extend&nbsp;out&nbsp;to&nbsp;other&nbsp;machines&nbsp;on&nbsp;the&nbsp;network.&nbsp;&nbsp;If&nbsp;you&nbsp;use&nbsp;twisted&nbsp;for&nbsp;highly&nbsp;efficient&nbsp;&quot;single&nbsp;thread/multiple&nbsp;task&quot;&nbsp;heavy&nbsp;weight&nbsp;processes,&nbsp;and&nbsp;something&nbsp;like&nbsp;spread,&nbsp;you&nbsp;end&nbsp;up&nbsp;with&nbsp;the&nbsp;best&nbsp;of&nbsp;all&nbsp;worlds.&nbsp;&nbsp;Highly&nbsp;efficient,&nbsp;symmetric,&nbsp;network&nbsp;based&nbsp;parallelism,&nbsp;with&nbsp;fault&nbsp;tolerance&nbsp;thrown&nbsp;in&nbsp;for&nbsp;free.&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;My&nbsp;point&nbsp;here&nbsp;is&nbsp;that&nbsp;there&nbsp;are&nbsp;other&nbsp;ways&nbsp;to&nbsp;go&nbsp;about&nbsp;exploiting&nbsp;symmetric&nbsp;multiprocessor&nbsp;machines,&nbsp;even&nbsp;banks&nbsp;of&nbsp;them,&nbsp;that&nbsp;neither&nbsp;require&nbsp;threads,&nbsp;nor&nbsp;the&nbsp;multiprocessing&nbsp;package.&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--rich&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Darren&nbsp;Govoni&nbsp;wrote:&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Looks&nbsp;interesting.&nbsp;I'm&nbsp;going&nbsp;to&nbsp;check&nbsp;out&nbsp;that&nbsp;package.&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;My&nbsp;original&nbsp;request&nbsp;was&nbsp;more&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;using&nbsp;Python's&nbsp;new&nbsp;support&nbsp;for&nbsp;native&nbsp;CPU&nbsp;core's&nbsp;and&nbsp;processes&nbsp;(the&nbsp;multiprocessing&nbsp;package&nbsp;is&nbsp;for&nbsp;this).&nbsp;Python's&nbsp;built-in&nbsp;thread&nbsp;support&nbsp;has&nbsp;global&nbsp;lock&nbsp;constraints&nbsp;that&nbsp;underperform&nbsp;in&nbsp;some&nbsp;situations.&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;But&nbsp;I&nbsp;ran&nbsp;into&nbsp;a&nbsp;problem&nbsp;using&nbsp;multiprocessing&nbsp;module&nbsp;with&nbsp;Twisted&nbsp;that&nbsp;was&nbsp;pointed&nbsp;out&nbsp;on&nbsp;the&nbsp;Twisted&nbsp;trac&nbsp;with&nbsp;pickling&nbsp;class&nbsp;methods&nbsp;and&nbsp;apparently&nbsp;Python's&nbsp;CPU&nbsp;threading&nbsp;support&nbsp;attempts&nbsp;to&nbsp;do&nbsp;this&nbsp;in&nbsp;some&nbsp;situations&nbsp;(e.g.&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;pass&nbsp;a&nbsp;class&nbsp;method&nbsp;to&nbsp;a&nbsp;native&nbsp;thread).&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Wed,&nbsp;2010-02-24&nbsp;at&nbsp;12:04&nbsp;-0800,&nbsp;K.&nbsp;Richard&nbsp;Pixley&nbsp;wrote:&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Glyph&nbsp;Lefkowitz&nbsp;wrote:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
On&nbsp;Feb&nbsp;21,&nbsp;2010,&nbsp;at&nbsp;8:00&nbsp;PM,&nbsp;Alexandre&nbsp;Quessy&nbsp;wrote<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;/PRE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
Hello&nbsp;everyone,<br>
I&nbsp;have&nbsp;done&nbsp;something&nbsp;similar&nbsp;to&nbsp;this,&nbsp;but&nbsp;I&nbsp;used&nbsp;the&nbsp;children&nbsp;IO<br>
stream&nbsp;to&nbsp;control&nbsp;them.&nbsp;Maybe&nbsp;I&nbsp;should&nbsp;have&nbsp;done&nbsp;that&nbsp;using&nbsp;some<br>
higher&nbsp;level&nbsp;protocol,&nbsp;such&nbsp;as&nbsp;AMP&nbsp;or&nbsp;PB.<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;/PRE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/BLOCKQUOTE&gt;<br>
&lt;PRE&gt;<br>
Using&nbsp;a&nbsp;higher-level&nbsp;protocol&nbsp;is&nbsp;generally&nbsp;better,&nbsp;if&nbsp;for&nbsp;no&nbsp;other&nbsp;reason&nbsp;that&nbsp;it&nbsp;gives&nbsp;you&nbsp;a&nbsp;framework&nbsp;within&nbsp;which&nbsp;to&nbsp;document&nbsp;your&nbsp;design&nbsp;decisions.&nbsp;&nbsp;It's&nbsp;much&nbsp;easier&nbsp;to&nbsp;say&nbsp;&quot;An&nbsp;AMP&nbsp;command&nbsp;with&nbsp;a&nbsp;'foo'&nbsp;String&nbsp;argument&nbsp;and&nbsp;a&nbsp;'bar'&nbsp;Integer&nbsp;argument&quot;&nbsp;than&nbsp;to&nbsp;say&nbsp;&quot;The&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;the&nbsp;message&nbsp;are&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;first&nbsp;argument.&nbsp;&nbsp;The&nbsp;next&nbsp;n&nbsp;bytes&nbsp;are&nbsp;the&nbsp;first&nbsp;argument.&nbsp;&nbsp;The&nbsp;first&nbsp;argument&nbsp;shall&nbsp;be&nbsp;interpreted&nbsp;as...&nbsp;(etc,&nbsp;etc)&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;/PRE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;working&nbsp;on&nbsp;an&nbsp;interface&nbsp;right&nbsp;now&nbsp;to&nbsp;the&nbsp;spread&nbsp;toolkit,&nbsp;(&lt;A&nbsp;HREF=&quot;http://spread.org&quot;&gt;http://spread.org&lt;/A&gt;),&nbsp;which&nbsp;implements&nbsp;virtual&nbsp;synchrony,&nbsp;(&lt;A&nbsp;HREF=&quot;http://en.wikipedia.org/wiki/Virtual_synchrony&quot;&gt;http://en.wikipedia.org/wiki/Virtual_synchrony&lt;/A&gt;).&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;distributed,&nbsp;symmetric,&nbsp;fault&nbsp;tolerant&nbsp;parallelism&nbsp;in&nbsp;small&nbsp;to&nbsp;medium&nbsp;scale&nbsp;with&nbsp;high&nbsp;reliability,&nbsp;this&nbsp;might&nbsp;be&nbsp;an&nbsp;option.&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--rich&nbsp;<br>
&lt;PRE&gt;<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;A&nbsp;HREF=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/A&gt;<br>
&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;/PRE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&lt;PRE&gt;<br>
<br>
&lt;HR&nbsp;SIZE=&quot;4&quot;&gt;<br>
<br>
<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;A&nbsp;HREF=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/A&gt;<br>
&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;<br>
&nbsp;&nbsp;<br>
&lt;/PRE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/BLOCKQUOTE&gt;<br>
&lt;PRE&gt;<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;A&nbsp;HREF=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/A&gt;<br>
&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;<br>
&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;BR&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
