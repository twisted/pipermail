<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Feb&nbsp;27,&nbsp;2017,&nbsp;at&nbsp;3:33&nbsp;PM,&nbsp;Jean-Paul&nbsp;Calderone&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&nbsp;class=&quot;&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Feb&nbsp;27,&nbsp;2017&nbsp;at&nbsp;6:00&nbsp;PM,&nbsp;Tristan&nbsp;Seligmann&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:mithrandi@mithrandi.net&quot;&nbsp;target=&quot;_blank&quot;&nbsp;class=&quot;&quot;&gt;mithrandi@mithrandi.net&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;On&nbsp;Mon,&nbsp;27&nbsp;Feb&nbsp;2017&nbsp;at&nbsp;21:54&nbsp;Glyph&nbsp;Lefkowitz&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&nbsp;class=&quot;&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&nbsp;class=&quot;m_-8086453839522797998gmail_msg&quot;&gt;&lt;div&nbsp;class=&quot;m_-8086453839522797998gmail_msg&quot;&gt;That&nbsp;said,&nbsp;it&nbsp;has&nbsp;been&nbsp;&lt;i&nbsp;class=&quot;m_-8086453839522797998gmail_msg&quot;&gt;improving&lt;/i&gt;&nbsp;and&nbsp;if&nbsp;it&nbsp;keeps&nbsp;improving&nbsp;at&nbsp;the&nbsp;rate&nbsp;it&nbsp;has&nbsp;been,&nbsp;I&nbsp;expect&nbsp;that&nbsp;we'd&nbsp;be&nbsp;able&nbsp;to&nbsp;put&nbsp;that&nbsp;coverage&nbsp;blocker&nbsp;back&nbsp;in&nbsp;in&nbsp;another&nbsp;3-4&nbsp;months.&nbsp;&nbsp;Perhaps&nbsp;something&nbsp;to&nbsp;talk&nbsp;about&nbsp;at&nbsp;PyCon.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;think&nbsp;at&nbsp;least&nbsp;one&nbsp;problem&nbsp;that&nbsp;we're&nbsp;suffering&nbsp;from&nbsp;here&nbsp;is&nbsp;our&nbsp;fault,&nbsp;rather&nbsp;than&nbsp;Codecov's:&nbsp;the&nbsp;coverage&nbsp;of&nbsp;the&nbsp;test&nbsp;suite&nbsp;is&nbsp;not&nbsp;stable&nbsp;due&nbsp;to&nbsp;non-determinism&nbsp;in&nbsp;the&nbsp;test&nbsp;suite.&nbsp;That&nbsp;is,&nbsp;the&nbsp;lines&nbsp;executed&nbsp;during&nbsp;a&nbsp;test&nbsp;run&nbsp;are&nbsp;not&nbsp;the&nbsp;same&nbsp;every&nbsp;time&nbsp;due&nbsp;to&nbsp;things&nbsp;like&nbsp;ordering&nbsp;/&nbsp;timing&nbsp;races&nbsp;/&nbsp;etc.&nbsp;This&nbsp;means&nbsp;that&nbsp;&quot;changes&quot;&nbsp;to&nbsp;coverage&nbsp;may&nbsp;show&nbsp;up&nbsp;for&nbsp;a&nbsp;particular&nbsp;PReven&nbsp;though&nbsp;nothing&nbsp;in&nbsp;that&nbsp;PR&nbsp;is&nbsp;actually&nbsp;responsible.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Changes&nbsp;to&nbsp;Twisted&nbsp;code&nbsp;which&nbsp;are&nbsp;only&nbsp;sometimes&nbsp;covered&nbsp;by&nbsp;the&nbsp;test&nbsp;suite&nbsp;sound&nbsp;like&nbsp;they&nbsp;would&nbsp;violate&nbsp;a&nbsp;100%&nbsp;coverage&nbsp;rule.&nbsp;&nbsp;But&nbsp;I&nbsp;guess&nbsp;the&nbsp;experience&nbsp;of&nbsp;looking&nbsp;at&nbsp;a&nbsp;codecov&nbsp;report&nbsp;is&nbsp;so&nbsp;bad/confusing&nbsp;that&nbsp;it's&nbsp;not&nbsp;surprising&nbsp;authors/reviewers&nbsp;might&nbsp;fail&nbsp;to&nbsp;see&nbsp;what's&nbsp;going&nbsp;on&nbsp;and&nbsp;fix&nbsp;the&nbsp;non-deterministic.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Particularly&nbsp;for&nbsp;code&nbsp;that&nbsp;requires&nbsp;coverage&nbsp;measurements&nbsp;on&nbsp;multiple&nbsp;platforms&nbsp;(ie,&nbsp;you&nbsp;basically&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;can't&lt;/i&gt;&nbsp;do&nbsp;it&nbsp;locally),&nbsp;it&nbsp;seems&nbsp;like&nbsp;it&nbsp;would&nbsp;be&nbsp;easier&nbsp;(though,&nbsp;to&nbsp;be&nbsp;clear,&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;bad&lt;/i&gt;)&nbsp;to&nbsp;just&nbsp;forget&nbsp;about&nbsp;it&nbsp;and&nbsp;hope&nbsp;everything&nbsp;is&nbsp;covered...&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;A&nbsp;tool&nbsp;that&nbsp;pointed&nbsp;out&nbsp;coverage&nbsp;differences&nbsp;between&nbsp;multiple&nbsp;runs&nbsp;of&nbsp;the&nbsp;same&nbsp;version&nbsp;of&nbsp;the&nbsp;code&nbsp;would&nbsp;be&nbsp;a&nbsp;useful&nbsp;thing&nbsp;to&nbsp;start&nbsp;pointing&nbsp;out&nbsp;where&nbsp;these&nbsp;flaws&nbsp;in&nbsp;the&nbsp;Twisted&nbsp;test&nbsp;suite&nbsp;lie,&nbsp;right?&nbsp;&nbsp;And&nbsp;then&nbsp;each&nbsp;area&nbsp;could&nbsp;be&nbsp;given&nbsp;deterministic&nbsp;test&nbsp;coverage&nbsp;instead...&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;While&nbsp;this&nbsp;is&nbsp;certainly&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;an&lt;/i&gt;&nbsp;issue,&nbsp;I&nbsp;don't&nbsp;think&nbsp;it's&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;the&lt;/i&gt;&nbsp;issue&nbsp;we're&nbsp;discussing&nbsp;here.&nbsp;&nbsp;Unreliability&nbsp;of&nbsp;coverage&nbsp;is&nbsp;largely&nbsp;mitigated&nbsp;by&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;main&lt;/i&gt;&nbsp;thing&nbsp;we&nbsp;pay&nbsp;attention&nbsp;to&nbsp;is&nbsp;&quot;patch&nbsp;coverage&quot;,&nbsp;which&nbsp;can&nbsp;be&nbsp;seen&nbsp;to&nbsp;fluctuate&nbsp;from&nbsp;commit&nbsp;to&nbsp;commit&nbsp;on&nbsp;a&nbsp;branch&nbsp;if&nbsp;the&nbsp;new&nbsp;test&nbsp;coverage&nbsp;is&nbsp;non-deterministic&nbsp;(and&nbsp;rarely&nbsp;is&nbsp;a&nbsp;PR&nbsp;an&nbsp;individual&nbsp;commit).&nbsp;&nbsp;This&nbsp;is&nbsp;opposed&nbsp;to&nbsp;&quot;coverage&nbsp;delta&quot;,&nbsp;which&nbsp;only&nbsp;looks&nbsp;at&nbsp;coverage&nbsp;before&nbsp;/&nbsp;coverage&nbsp;after&nbsp;and&nbsp;is&nbsp;indeed&nbsp;somewhat&nbsp;unpredictable&nbsp;due&nbsp;to&nbsp;old&nbsp;/&nbsp;bad&nbsp;tests.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;can&nbsp;say&nbsp;when&nbsp;I've&nbsp;had&nbsp;to&nbsp;overrule&nbsp;codecov,&nbsp;it's&nbsp;almost&nbsp;never&nbsp;been&nbsp;because&nbsp;of&nbsp;flapping&nbsp;coverage&nbsp;lines&nbsp;outside&nbsp;of&nbsp;the&nbsp;patch&nbsp;under&nbsp;consideration&nbsp;(and&nbsp;the&nbsp;patches&nbsp;in&nbsp;consideration&nbsp;either&nbsp;have&nbsp;deterministic&nbsp;tests,&nbsp;or&nbsp;I&nbsp;ask&nbsp;the&nbsp;author&nbsp;to&nbsp;add&nbsp;them).&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;General&nbsp;improvements&nbsp;to&nbsp;build&nbsp;reliability&nbsp;often&nbsp;reduce&nbsp;coverage&nbsp;unreliability&nbsp;as&nbsp;well,&nbsp;so&nbsp;as&nbsp;we've&nbsp;been&nbsp;using&nbsp;Github&nbsp;more,&nbsp;which&nbsp;surfaces&nbsp;status&nbsp;visibility&nbsp;/&nbsp;mergeability&nbsp;to&nbsp;reviewers&nbsp;more,&nbsp;we've&nbsp;been&nbsp;fixing&nbsp;lots&nbsp;of&nbsp;little&nbsp;build-reliability&nbsp;issues&nbsp;and&nbsp;this&nbsp;problem&nbsp;continues&nbsp;to&nbsp;get&nbsp;smaller.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
