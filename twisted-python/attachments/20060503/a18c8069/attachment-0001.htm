<tt>
&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;5/3/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Olly&nbsp;Betts&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:olly@survex.com&quot;&gt;olly@survex.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
It&nbsp;seems&nbsp;this&nbsp;has&nbsp;cropped&nbsp;up&nbsp;before&nbsp;-&nbsp;see&nbsp;Michael&nbsp;Salib's&nbsp;point&nbsp;&amp;quot;2.&amp;quot;&lt;br&gt;here:&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://article.gmane.org/gmane.comp.search.xapian.general/1387&quot;&gt;http://article.gmane.org/gmane.comp.search.xapian.general/1387<br>
&lt;/a&gt;&lt;br&gt;&lt;br&gt;I've&nbsp;not&nbsp;yet&nbsp;implemented&nbsp;WritableDatabase::close()&nbsp;though.&lt;br&gt;&lt;br&gt;Incidentally,&nbsp;the&nbsp;stale&nbsp;lockfile&nbsp;on&nbsp;exit&nbsp;issue&nbsp;goes&nbsp;away&nbsp;if&nbsp;you&nbsp;use&lt;br&gt;flint&nbsp;instead&nbsp;of&nbsp;quartz,&nbsp;though&nbsp;the&nbsp;database&nbsp;lock&nbsp;will&nbsp;still&nbsp;be&nbsp;held&lt;br&gt;<br>
while&nbsp;the&nbsp;process&nbsp;keeps&nbsp;running&nbsp;which&nbsp;could&nbsp;still&nbsp;be&nbsp;a&nbsp;problem.&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Olly&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;thanks&nbsp;for&nbsp;the&nbsp;hint&nbsp;about&nbsp;using&nbsp;Flint&nbsp;instead.&lt;br&gt;I&nbsp;thought&nbsp;I&nbsp;was&nbsp;but&nbsp;I&nbsp;guess&nbsp;I&nbsp;didn't&nbsp;add&nbsp;it&nbsp;to&nbsp;my&nbsp;.profile<br>
&lt;br&gt;&lt;br&gt;using&nbsp;Flint&nbsp;it&nbsp;starts&nbsp;and&nbsp;stops&nbsp;and&nbsp;doesn't&nbsp;cause&nbsp;any&nbsp;problems&nbsp;now.&lt;br&gt;&lt;br&gt;a&nbsp;.close()&nbsp;method&nbsp;on&nbsp;WritableDatabase&nbsp;might&nbsp;be&nbsp;a&nbsp;good&nbsp;addition.&nbsp;&lt;br&gt;Just&nbsp;so&nbsp;you&nbsp;can&nbsp;force&nbsp;the&nbsp;db&nbsp;closed&nbsp;when&nbsp;you&nbsp;think&nbsp;it&nbsp;might&nbsp;not&nbsp;be&nbsp;being&nbsp;de-referenced&nbsp;reliably.<br>
&lt;br&gt;&lt;br&gt;It&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;same&nbsp;type&nbsp;of&nbsp;issue&nbsp;listed&nbsp;in&nbsp;that&nbsp;link&nbsp;you&nbsp;posted.&nbsp;Twisted&nbsp;is&nbsp;probably&nbsp;holding&nbsp;on&nbsp;to&nbsp;the&nbsp;Service&nbsp;object&lt;br&gt;and&nbsp;that&nbsp;is&nbsp;holding&nbsp;on&nbsp;to&nbsp;the&nbsp;db&nbsp;object.&lt;br&gt;&lt;br&gt;I&nbsp;KNOW&nbsp;I&nbsp;am&nbsp;not&nbsp;sharing&nbsp;db&nbsp;objects&nbsp;nor&nbsp;document&nbsp;objects&nbsp;since&nbsp;it&nbsp;is&nbsp;all&nbsp;single&nbsp;threaded&nbsp;and&nbsp;all&nbsp;self&nbsp;contained&nbsp;in&nbsp;that&nbsp;one&nbsp;index&nbsp;method.<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
