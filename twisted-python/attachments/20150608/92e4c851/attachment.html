<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Jun&nbsp;8,&nbsp;2015,&nbsp;at&nbsp;9:51&nbsp;AM,&nbsp;Maciej&nbsp;Wasilak&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:wasilak@gmail.com&quot;&nbsp;class=&quot;&quot;&gt;wasilak@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Dear&nbsp;list,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I've&nbsp;tried&nbsp;running&nbsp;Twisted&nbsp;15.2.1&nbsp;with&nbsp;my&nbsp;old&nbsp;library,&nbsp;and&nbsp;I&nbsp;am&lt;br&nbsp;class=&quot;&quot;&gt;getting&nbsp;an&nbsp;exception,&nbsp;that&nbsp;I&nbsp;haven't&nbsp;seen&nbsp;before&nbsp;(with&nbsp;Twisted&lt;br&nbsp;class=&quot;&quot;&gt;14.0.0):&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/txthings/coap.py&quot;,&lt;br&nbsp;class=&quot;&quot;&gt;line&nbsp;1338,&nbsp;in&nbsp;sendResponse&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&quot;Token:&nbsp;%s&quot;&nbsp;%&nbsp;(response.token)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;&quot;/usr/local/lib/python2.7/dist-packages/twisted/logger/_io.py&quot;,&lt;br&nbsp;class=&quot;&quot;&gt;line&nbsp;163,&nbsp;in&nbsp;write&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;=&nbsp;string.decode(self._encoding)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;&quot;/usr/lib/python2.7/encodings/utf_8.py&quot;,&nbsp;line&nbsp;16,&nbsp;in&nbsp;decode&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;codecs.utf_8_decode(input,&nbsp;errors,&nbsp;True)&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;exceptions.UnicodeDecodeError:&nbsp;'utf8'&nbsp;codec&nbsp;can't&nbsp;decode&nbsp;byte&nbsp;0xae&lt;br&nbsp;class=&quot;&quot;&gt;in&nbsp;position&nbsp;7:&nbsp;invalid&nbsp;start&nbsp;byte&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Although&nbsp;it&nbsp;is&nbsp;triggered&nbsp;by&nbsp;simple&nbsp;print,&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;caused&nbsp;by&lt;br&nbsp;class=&quot;&quot;&gt;logging.&nbsp;Does&nbsp;new&nbsp;logging&nbsp;framework&nbsp;need&nbsp;any&nbsp;configuration&nbsp;to&nbsp;stay&lt;br&nbsp;class=&quot;&quot;&gt;compatible&nbsp;with&nbsp;the&nbsp;old&nbsp;one?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Although&nbsp;logger&nbsp;is&nbsp;reacting&nbsp;to&nbsp;this&nbsp;in&nbsp;a&nbsp;bad&nbsp;way,&nbsp;and&nbsp;that&nbsp;is&nbsp;a&nbsp;bug,&nbsp;your&nbsp;program&nbsp;has&nbsp;a&nbsp;bug&nbsp;too:&nbsp;you&nbsp;are&nbsp;printing&nbsp;to&nbsp;a&nbsp;text&nbsp;file&nbsp;(which&nbsp;is&nbsp;what&nbsp;stdout&nbsp;is&nbsp;when&nbsp;it&nbsp;is&nbsp;redirected&nbsp;to&nbsp;a&nbsp;log)&nbsp;by&nbsp;using&nbsp;binary&nbsp;data.&nbsp;&nbsp;python&nbsp;3&nbsp;will&nbsp;mangle&nbsp;your&nbsp;output&nbsp;if&nbsp;you&nbsp;try&nbsp;to&nbsp;do&nbsp;this,&nbsp;so&nbsp;you&nbsp;should&nbsp;restrict&nbsp;your&nbsp;program&nbsp;to&nbsp;unicode&nbsp;if&nbsp;you&nbsp;intend&nbsp;to&nbsp;redirect&nbsp;stdout&nbsp;to&nbsp;a&nbsp;logger.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Here's&nbsp;a&nbsp;very&nbsp;simple&nbsp;example&nbsp;which&nbsp;provokes&nbsp;the&nbsp;same&nbsp;bad&nbsp;behavior:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;import&nbsp;sys&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;from&nbsp;twisted.logger&nbsp;import&nbsp;globalLogBeginner,&nbsp;textFileLogObserver&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;globalLogBeginner.beginLoggingTo([textFileLogObserver(sys.stdout)])&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;print(b&quot;Testing&nbsp;testing,&nbsp;one&nbsp;\xae&nbsp;two.&quot;)&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;The&nbsp;equivalent&nbsp;in&nbsp;old-style&nbsp;logging&nbsp;would&nbsp;be:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;import&nbsp;sys&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;from&nbsp;twisted.python.log&nbsp;import&nbsp;startLogging&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;startLogging(sys.stdout)&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;print(b&quot;Testing&nbsp;testing,&nbsp;one&nbsp;\xae&nbsp;two.&quot;)&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Therefore&nbsp;this&nbsp;is&nbsp;a&nbsp;regression&nbsp;in&nbsp;the&nbsp;new&nbsp;logging&nbsp;system.&nbsp;&nbsp;I've&nbsp;filed&nbsp;it&nbsp;as&nbsp;a&nbsp;bug,&nbsp;here:&nbsp;&lt;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/trac/ticket/7933&quot;&nbsp;class=&quot;&quot;&gt;https://twistedmatrix.com/trac/ticket/7933&lt;/a&gt;&gt;.&nbsp;&nbsp;In&nbsp;the&nbsp;future,&nbsp;I&nbsp;would&nbsp;encourage&nbsp;you&nbsp;to&nbsp;take&nbsp;advantage&nbsp;of&nbsp;the&nbsp;pre-release&nbsp;testing&nbsp;period&nbsp;to&nbsp;discover&nbsp;issues&nbsp;like&nbsp;this,&nbsp;since&nbsp;it&nbsp;would&nbsp;have&nbsp;been&nbsp;nice&nbsp;to&nbsp;know&nbsp;about&nbsp;this&nbsp;before&nbsp;the&nbsp;final&nbsp;release&nbsp;went&nbsp;out&nbsp;;-).&nbsp;&nbsp;(Not&nbsp;to&nbsp;say&nbsp;this&nbsp;is&nbsp;your&nbsp;fault&nbsp;though,&nbsp;this&nbsp;is&nbsp;totally&nbsp;our&nbsp;bug,&nbsp;and&nbsp;I'm&nbsp;surprised&nbsp;we&nbsp;didn't&nbsp;catch&nbsp;it&nbsp;given&nbsp;all&nbsp;the&nbsp;other&nbsp;similar&nbsp;stuff&nbsp;we&nbsp;caught&nbsp;before&nbsp;the&nbsp;release.)&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;-glyph&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
