<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;best&nbsp;answer&nbsp;is&nbsp;probably &lt;a&nbsp;href=&quot;https://github.com/alex/alchimia&quot;&gt;https://github.com/alex/alchimia&lt;/a&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Tue,&nbsp;Sep&nbsp;19,&nbsp;2017&nbsp;at&nbsp;1:59&nbsp;PM&nbsp;Goffi&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:goffi@goffi.org&quot;&gt;goffi@goffi.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hello,&lt;br&gt;<br>
&lt;br&gt;<br>
I&#39;m&nbsp;using&nbsp;Sqlite3&nbsp;module&nbsp;through&nbsp;Twisted&#39;s&nbsp;enterpirse.adbapi,&nbsp;I&nbsp;create&nbsp;the&lt;br&gt;<br>
ConnectionPool&nbsp;instance&nbsp;like&nbsp;this:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; self.dbpool&nbsp;=&nbsp;ConnectionPool(&quot;sqlite3&quot;,&nbsp;db_filename,&lt;br&gt;<br>
check_same_thread=False)&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;see&nbsp;the&nbsp;code&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;https://repos.goffi.org/sat/file/tip/src/memory/sqlite.py&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://repos.goffi.org/sat/file/tip/src/memory/sqlite.py&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Sometime,&nbsp;the&nbsp;writing&nbsp;is&nbsp;failing&nbsp;with&nbsp;following&nbsp;exception:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;Failure&nbsp;instance:&nbsp;Traceback:&nbsp;&lt;class&nbsp;&#39;sqlite3.OperationalError&#39;&gt;:&nbsp;database&nbsp;is&lt;br&gt;<br>
locked&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;I&nbsp;wonder&nbsp;if&nbsp;the&nbsp;database&nbsp;is&nbsp;correctly&nbsp;used,&nbsp;did&nbsp;anybody&nbsp;experienced&lt;br&gt;<br>
something&nbsp;similar&nbsp;with&nbsp;Twisted&nbsp;and&nbsp;Sqlite&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
Should&nbsp;I&nbsp;just&nbsp;augment&nbsp;timeout&nbsp;as&nbsp;advised&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;https://stackoverflow.com/a/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://stackoverflow.com/a/&lt;/a&gt;&lt;br&gt;<br>
8618328?&nbsp;Looks&nbsp;like&nbsp;more&nbsp;a&nbsp;workaround&nbsp;than&nbsp;a&nbsp;clean&nbsp;solution.&lt;br&gt;<br>
&lt;br&gt;<br>
Python&nbsp;2&nbsp;documentation&nbsp;doesn&#39;t&nbsp;talk&nbsp;about&nbsp;check_same_thread&nbsp;argument,&nbsp;but&lt;br&gt;<br>
Python&nbsp;3&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;https://docs.python.org/3.5/library/sqlite3.html#sqlite3.connect&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://docs.python.org/3.5/library/sqlite3.html#sqlite3.connect&lt;/a&gt;&lt;br&gt;<br>
says&nbsp;that&nbsp;writing&nbsp;operation&nbsp;should&nbsp;be&nbsp;serialized&nbsp;by&nbsp;the&nbsp;user&nbsp;(I&nbsp;thought&nbsp;it&nbsp;was&lt;br&gt;<br>
the&nbsp;default&nbsp;as&nbsp;said&nbsp;in&nbsp;&lt;a&nbsp;href=&quot;https://sqlite.org/threadsafe.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://sqlite.org/threadsafe.html&lt;/a&gt;),&nbsp;how&nbsp;should&nbsp;I&lt;br&gt;<br>
achieve&nbsp;that?&lt;br&gt;<br>
&lt;br&gt;<br>
Also&nbsp;PRAGMA&nbsp;are&nbsp;not&nbsp;working&nbsp;(specially&nbsp;&quot;PRAGMA&nbsp;foreign_keys&nbsp;=&nbsp;ON&quot;),&nbsp;I&nbsp;guess&lt;br&gt;<br>
because&nbsp;of&nbsp;multi-threading,&nbsp;what&nbsp;is&nbsp;the&nbsp;good&nbsp;way&nbsp;to&nbsp;activate&nbsp;foreign_keys&nbsp;for&lt;br&gt;<br>
all&nbsp;following&nbsp;request?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;in&nbsp;advance&lt;br&gt;<br>
&lt;br&gt;<br>
Goffi&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
