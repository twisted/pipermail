<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7654.12&quot;&gt;<br>
&lt;TITLE&gt;Unhandled&nbsp;error&nbsp;in&nbsp;Deferred&nbsp;with&nbsp;twisted-8.2.0,&nbsp;but&nbsp;not&nbsp;with&nbsp;twisted-2.1.0&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Am&nbsp;currently&nbsp;trying&nbsp;to&nbsp;upgrade&nbsp;to&nbsp;twisted-8.2.0.&amp;nbsp;&nbsp;For&nbsp;some&nbsp;reason,&nbsp;twisted-8.2.0&nbsp;thinks&nbsp;my&nbsp;deferred&nbsp;below&nbsp;was&nbsp;gc'd&nbsp;with&nbsp;an&nbsp;unhandled&nbsp;error,&nbsp;and&nbsp;tells&nbsp;me&nbsp;about&nbsp;it&nbsp;upon&nbsp;reactor&nbsp;exit.&amp;nbsp;&nbsp;With&nbsp;python-2.4.2/twisted-2.1.0,&nbsp;no&nbsp;issues.&amp;nbsp;&nbsp;With&nbsp;python-2.6.1/twisted-8.2.0,&nbsp;I&nbsp;see&nbsp;these&nbsp;issues.&amp;nbsp;&nbsp;Any&nbsp;ideas&nbsp;why?&amp;nbsp;&nbsp;Thanks.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;$&nbsp;cat&nbsp;./deferred-errors.py&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;#!/usr/bin/env&nbsp;python&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;import&nbsp;datetime,&nbsp;logging,&nbsp;os,&nbsp;random,&nbsp;re,&nbsp;shutil,&nbsp;socket&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;import&nbsp;subprocess,&nbsp;sys,&nbsp;tempfile,&nbsp;threading,&nbsp;time,&nbsp;traceback&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;from&nbsp;twisted.internet&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;import&nbsp;reactor&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;from&nbsp;twisted.internet&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;import&nbsp;defer&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;from&nbsp;twisted.internet.utils&nbsp;import&nbsp;getProcessOutput&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;from&nbsp;twisted.python&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;import&nbsp;log&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;import&nbsp;twisted&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;print&nbsp;'twisted&nbsp;version&nbsp;is',&nbsp;twisted.__version__&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;def&nbsp;foo():&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d&nbsp;=&nbsp;getProcessOutput('/bin/hostnameX')&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;cb(result):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;'cb:&nbsp;%s'&nbsp;%&nbsp;(result)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;eb(failure):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;'eb&nbsp;caught&nbsp;the&nbsp;failure!'&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d.addCallback(cb)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d.addErrback(eb)&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;reactor.callWhenRunning(foo)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;reactor.callLater(3,&nbsp;reactor.stop)&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;reactor.run()&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;$&nbsp;/sw/external/python-2.4.2/bin/python&nbsp;./deferred-errors.py&nbsp;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;twisted&nbsp;version&nbsp;is&nbsp;2.1.0&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;eb&nbsp;caught&nbsp;the&nbsp;failure!&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;$&nbsp;/sw/external/python-2.6.1/bin/python&nbsp;./deferred-errors.py&nbsp;&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;twisted&nbsp;version&nbsp;is&nbsp;8.2.0&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;eb&nbsp;caught&nbsp;the&nbsp;failure!&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Unhandled&nbsp;error&nbsp;in&nbsp;Deferred:&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/FONT&gt;<br>
<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Failure:&nbsp;twisted.internet.error.ProcessTerminated:&nbsp;A&nbsp;process&nbsp;has&nbsp;ended&nbsp;with&nbsp;a&nbsp;probable&nbsp;error&nbsp;condition:&nbsp;process&nbsp;ended&nbsp;with&nbsp;exit&nbsp;code&nbsp;1.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
