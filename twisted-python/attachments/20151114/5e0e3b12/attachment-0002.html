<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Thu,&nbsp;12&nbsp;Nov&nbsp;2015&nbsp;at&nbsp;12:46&nbsp;Cory&nbsp;Benfield&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:cory@lukasa.co.uk&quot;&gt;cory@lukasa.co.uk&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:break-word&quot;&gt;&lt;div&gt;However,&nbsp;this&nbsp;may&nbsp;not&nbsp;work:&nbsp;in&nbsp;particular,&nbsp;some&nbsp;of&nbsp;the&nbsp;other&nbsp;classes&nbsp;in&nbsp;twisted.web&nbsp;may&nbsp;know&nbsp;altogether&nbsp;too&nbsp;much&nbsp;about&nbsp;HTTP/1.X:&nbsp;in&nbsp;particular,&nbsp;if&nbsp;they&nbsp;have&nbsp;the&nbsp;nerve&nbsp;to&nbsp;write&nbsp;directly&nbsp;to&nbsp;a&nbsp;transport&nbsp;weâ€™ve&nbsp;got&nbsp;a&nbsp;real&nbsp;problem&nbsp;with&nbsp;this&nbsp;approach,&nbsp;as&nbsp;HTTP/2&nbsp;does&nbsp;not&nbsp;allow&nbsp;naked&nbsp;writes&nbsp;on&nbsp;its&nbsp;sockets&nbsp;(all&nbsp;data&nbsp;is&nbsp;framed).&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;I&#39;d&nbsp;like&nbsp;to&nbsp;point&nbsp;out&nbsp;a&nbsp;few&nbsp;things&nbsp;on&nbsp;this&nbsp;topic:&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;1)&nbsp;The&nbsp;Twisted&nbsp;project&nbsp;has&nbsp;already&nbsp;experimentally&nbsp;demonstrated&nbsp;the&nbsp;imprudence&nbsp;of&nbsp;an&nbsp;approach&nbsp;that&nbsp;massively&nbsp;breaks&nbsp;backwards&nbsp;compatibility&nbsp;with&nbsp;old&nbsp;APIs&nbsp;(even&nbsp;if&nbsp;it&nbsp;does&nbsp;this&nbsp;in&nbsp;concordance&nbsp;with&nbsp;the&nbsp;compatibility&nbsp;policy,&nbsp;by&nbsp;adding&nbsp;a&nbsp;bunch&nbsp;of&nbsp;new&nbsp;things):&nbsp;see&nbsp;the&nbsp;defunct&nbsp;twisted.web2&nbsp;project.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Realistically,&nbsp;if&nbsp;you&nbsp;say&nbsp;&quot;hey&nbsp;people,&nbsp;twisted.web&nbsp;now&nbsp;has&nbsp;HTTP/2&nbsp;support,&nbsp;all&nbsp;you&nbsp;have&nbsp;to&nbsp;do&nbsp;is&nbsp;port&nbsp;all&nbsp;of&nbsp;your&nbsp;code&nbsp;and&nbsp;all&nbsp;of&nbsp;your&nbsp;libraries&nbsp;over&nbsp;to&nbsp;these&nbsp;new&nbsp;APIs!&quot;,&nbsp;the&nbsp;response&nbsp;isn&#39;t&nbsp;going&nbsp;to&nbsp;be&nbsp;&quot;great,&nbsp;I&#39;ll&nbsp;get&nbsp;right&nbsp;on&nbsp;that!&quot;.&nbsp;It&#39;ll&nbsp;be&nbsp;&quot;oh&nbsp;well,&nbsp;I&nbsp;guess&nbsp;I&#39;ll&nbsp;just&nbsp;throw&nbsp;an&nbsp;nginx&nbsp;reverse&nbsp;proxy&nbsp;in&nbsp;front&nbsp;of&nbsp;my&nbsp;app&nbsp;to&nbsp;get&nbsp;HTTP/2&nbsp;working&quot;&nbsp;or&nbsp;&quot;oh&nbsp;well,&nbsp;never&nbsp;mind&nbsp;then&quot;.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;A&nbsp;successful&nbsp;approach&nbsp;to&nbsp;introducing&nbsp;HTTP/2&nbsp;into&nbsp;twisted.web&nbsp;needs&nbsp;to&nbsp;allow&nbsp;for&nbsp;hooking&nbsp;up&nbsp;existing&nbsp;resources&nbsp;to&nbsp;an&nbsp;HTTP/2&nbsp;(or&nbsp;actually,&nbsp;presumably&nbsp;multiprotocol)&nbsp;server.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2)&nbsp;Having&nbsp;said&nbsp;that,&nbsp;it&#39;s&nbsp;not&nbsp;necessary&nbsp;for&nbsp;the&nbsp;HTTP/2&nbsp;server&nbsp;to&nbsp;be&nbsp;completely&nbsp;compatible&nbsp;with&nbsp;the&nbsp;current&nbsp;HTTP/1.x&nbsp;server&nbsp;in&nbsp;twisted.web.&nbsp;For&nbsp;some&nbsp;things,&nbsp;this&nbsp;is&nbsp;just&nbsp;flat&nbsp;out&nbsp;impossible&nbsp;(I&nbsp;believe&nbsp;there&nbsp;are&nbsp;things&nbsp;that&nbsp;HTTP/1.x&nbsp;allows,&nbsp;but&nbsp;HTTP/2&nbsp;doesn&#39;t&nbsp;allow),&nbsp;and&nbsp;for&nbsp;other&nbsp;things&nbsp;it&nbsp;just&nbsp;doesn&#39;t&nbsp;make&nbsp;sense&nbsp;(stealing&nbsp;the&nbsp;transport&nbsp;and&nbsp;writing&nbsp;stuff&nbsp;to&nbsp;it&nbsp;yourself).&nbsp;However,&nbsp;we&nbsp;only&nbsp;need&nbsp;to&nbsp;support&nbsp;the&nbsp;common&nbsp;set&nbsp;of&nbsp;things&nbsp;that&nbsp;people&nbsp;use&nbsp;in&nbsp;order&nbsp;to&nbsp;be&nbsp;usefully&nbsp;compatible;&nbsp;if&nbsp;you&nbsp;just&nbsp;have&nbsp;some&nbsp;resources&nbsp;that&nbsp;aren&#39;t&nbsp;doing&nbsp;anything&nbsp;particularly&nbsp;crazy&nbsp;(like&nbsp;hijacking&nbsp;the&nbsp;transport&nbsp;and&nbsp;writing&nbsp;directly&nbsp;to&nbsp;it,&nbsp;rather&nbsp;than&nbsp;via&nbsp;the&nbsp;request&nbsp;object),&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;hook&nbsp;them&nbsp;up&nbsp;and&nbsp;have&nbsp;them&nbsp;work.&lt;br&gt;&lt;br&gt;For&nbsp;anything&nbsp;that&nbsp;we&nbsp;*can&#39;t*&nbsp;support,&nbsp;it&#39;s&nbsp;okay&nbsp;for&nbsp;the&nbsp;HTTP/2&nbsp;server&nbsp;to&nbsp;just&nbsp;raise&nbsp;an&nbsp;exception&nbsp;or&nbsp;whatever;&nbsp;for&nbsp;anything&nbsp;that&nbsp;we&nbsp;can&nbsp;reasonably&nbsp;support,&nbsp;but&nbsp;don&#39;t&nbsp;actually&nbsp;want&nbsp;to,&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;emit&nbsp;a&nbsp;deprecation&nbsp;warning,&nbsp;and&nbsp;later&nbsp;an&nbsp;exception.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;3)&nbsp;Having&nbsp;said&nbsp;*that*,&nbsp;there&nbsp;is&nbsp;widespread&nbsp;agreement&nbsp;that&nbsp;the&nbsp;existing&nbsp;APIs&nbsp;(IResource,&nbsp;IRequest,&nbsp;etc.)&nbsp;have&nbsp;numerous&nbsp;deficiencies&nbsp;that&nbsp;should&nbsp;be&nbsp;addressed.&nbsp;For&nbsp;example,&nbsp;the&nbsp;current&nbsp;interfaces&nbsp;don&#39;t&nbsp;allow&nbsp;for&nbsp;streaming&nbsp;request&nbsp;handling,&nbsp;which&nbsp;obstructs&nbsp;implementing&nbsp;100-continue&nbsp;support&nbsp;(among&nbsp;other&nbsp;things).&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;We&nbsp;*do*&nbsp;need&nbsp;newer&nbsp;interfaces&nbsp;which&nbsp;hopefully&nbsp;improve&nbsp;on&nbsp;the&nbsp;new&nbsp;ones;&nbsp;I&nbsp;don&#39;t&nbsp;really&nbsp;feel&nbsp;like&nbsp;I&#39;m&nbsp;in&nbsp;a&nbsp;position&nbsp;to&nbsp;sketch&nbsp;out&nbsp;what&nbsp;these&nbsp;interfaces&nbsp;should&nbsp;look&nbsp;like,&nbsp;but&nbsp;they&nbsp;should&nbsp;definitely&nbsp;take&nbsp;into&nbsp;account&nbsp;the&nbsp;constraints&nbsp;of&nbsp;the&nbsp;HTTP/2&nbsp;protocol,&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;needs&nbsp;of&nbsp;application&nbsp;code.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;PS:&nbsp;I&#39;ve&nbsp;used&nbsp;the&nbsp;pronoun&nbsp;&quot;we&quot;&nbsp;multiple&nbsp;times&nbsp;in&nbsp;this&nbsp;email&nbsp;for&nbsp;the&nbsp;sake&nbsp;of&nbsp;rhetorical&nbsp;convenience,&nbsp;but&nbsp;please&nbsp;don&#39;t&nbsp;let&nbsp;this&nbsp;dissuade&nbsp;anyone&nbsp;from&nbsp;voicing&nbsp;disagreement&nbsp;with&nbsp;any&nbsp;of&nbsp;the&nbsp;claims&nbsp;I&#39;ve&nbsp;made&nbsp;should&nbsp;they&nbsp;appear&nbsp;incorrect.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
