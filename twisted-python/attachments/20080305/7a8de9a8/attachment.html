<tt>
Forgive&nbsp;any&nbsp;newbie&nbsp;errors,&nbsp;as&nbsp;I&#39;m&nbsp;new&nbsp;to&nbsp;Twisted.&lt;br&gt;&lt;br&gt;The&nbsp;pattern&nbsp;discussed&nbsp;*seems*&nbsp;to&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;&#39;comet&#39;&nbsp;pattern&nbsp;in&nbsp;web&nbsp;development:&nbsp;a&nbsp;client&nbsp;contacts&nbsp;the&nbsp;server,&nbsp;but&nbsp;rather&nbsp;than&nbsp;responding&nbsp;quickly,&nbsp;the&nbsp;server&nbsp;&#39;files&nbsp;away&#39;&nbsp;the&nbsp;connection&nbsp;in&nbsp;case&nbsp;there&nbsp;is&nbsp;something&nbsp;to&nbsp;send&nbsp;later.&nbsp;&nbsp;(Filing&nbsp;away,&nbsp;in&nbsp;my&nbsp;case&nbsp;is&nbsp;done&nbsp;by&nbsp;adding&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stream&nbsp;as&nbsp;a&nbsp;member&nbsp;of&nbsp;a&nbsp;&#39;Connection&#39;&nbsp;class&nbsp;withing&nbsp;my&nbsp;server.&nbsp;&nbsp;&#39;Connections&#39;&nbsp;can&nbsp;either&nbsp;be&nbsp;&#39;open&#39;&nbsp;[able&nbsp;to&nbsp;send&nbsp;immediately]&nbsp;or&nbsp;&#39;buffering&#39;&nbsp;[waiting&nbsp;for&nbsp;the&nbsp;client&nbsp;to&nbsp;reconnect].)&lt;br&gt;<br>
&lt;br&gt;I&nbsp;have&nbsp;implemented&nbsp;this&nbsp;pattern&nbsp;using&nbsp;twisted.web2&nbsp;as&nbsp;follows:&lt;br&gt;&lt;br&gt;A&nbsp;render&nbsp;method&nbsp;creates&nbsp;a&nbsp;stream,&nbsp;but&nbsp;&#39;files&nbsp;it&nbsp;away&#39;,&nbsp;rather&nbsp;than&nbsp;calling&nbsp;stream.finish().&nbsp;&nbsp;The&nbsp;render&nbsp;method&nbsp;*does*&nbsp;complete&nbsp;and&nbsp;return,&nbsp;but&nbsp;the&nbsp;connection&nbsp;is&nbsp;thereby&nbsp;held&nbsp;open&nbsp;and&nbsp;no&nbsp;data&nbsp;is&nbsp;immediately&nbsp;sent.&lt;br&gt;<br>
&lt;br&gt;Sometime&nbsp;later,&nbsp;or&nbsp;perhaps&nbsp;never,&nbsp;something&nbsp;happens&nbsp;on&nbsp;the&nbsp;server&nbsp;which&nbsp;causes&nbsp;it&nbsp;to&nbsp;send&nbsp;data&nbsp;on&nbsp;the&nbsp;previously&nbsp;&#39;filed&nbsp;away&#39;&nbsp;stream&nbsp;and&nbsp;calls&nbsp;stream.finish().&nbsp;&nbsp;(In&nbsp;my&nbsp;case,&nbsp;because&nbsp;this&nbsp;is&nbsp;comet,&nbsp;the&nbsp;client&nbsp;immediately&nbsp;makes&nbsp;another&nbsp;connection&nbsp;to&nbsp;the&nbsp;server,&nbsp;which&nbsp;is&nbsp;again&nbsp;&#39;filed&nbsp;away&#39;.)&lt;br&gt;<br>
&lt;br&gt;I&nbsp;hope&nbsp;this&nbsp;doesn&#39;t&nbsp;muddy&nbsp;the&nbsp;issue.&lt;br&gt;&lt;br&gt;Regards,&lt;br&gt;&lt;br&gt;Chris,&lt;br&gt;&lt;br&gt;P.S.&nbsp;I&nbsp;have&nbsp;heard&nbsp;of&nbsp;Nevow&nbsp;Athena,&nbsp;but&nbsp;I&nbsp;wanted&nbsp;something&nbsp;very&nbsp;simple.&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;05/03/2008,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Drew&nbsp;Smathers&lt;/b&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:drew.smathers@gmail.com&quot;&gt;drew.smathers@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
On&nbsp;Tue,&nbsp;Mar&nbsp;4,&nbsp;2008&nbsp;at&nbsp;11:42&nbsp;PM,&nbsp;David&nbsp;Welch&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:dwelch@umail.ucsb.edu&quot;&gt;dwelch@umail.ucsb.edu&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&nbsp;&gt;&nbsp;Matt,&lt;br&gt;&nbsp;&gt;&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;I&nbsp;read&nbsp;that&nbsp;howto/servers&nbsp;documentation&nbsp;and&nbsp;I&nbsp;have&nbsp;set&nbsp;up&nbsp;my&nbsp;code&nbsp;into&lt;br&gt;<br>
&nbsp;&gt;&nbsp;&nbsp;a&nbsp;Factory&nbsp;and&nbsp;Protocol&nbsp;that&nbsp;handles&nbsp;incoming&nbsp;connections.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;Honestly,&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;we&#39;re&nbsp;dealing&nbsp;with&nbsp;a&nbsp;design&nbsp;pattern&nbsp;issue&nbsp;now.&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&gt;&nbsp;I&nbsp;don&#39;t&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;think&nbsp;I&nbsp;explained&nbsp;myself&nbsp;well&nbsp;enough&nbsp;though.&nbsp;When&nbsp;a&nbsp;client&nbsp;connects,&lt;br&gt;<br>
&nbsp;&gt;&nbsp;&nbsp;the&nbsp;server&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;being&nbsp;send&nbsp;data&nbsp;back&nbsp;right&nbsp;away&nbsp;so&nbsp;I&nbsp;need&nbsp;to&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;be&nbsp;able&nbsp;to&nbsp;send&nbsp;data&nbsp;to&nbsp;that&nbsp;connected&nbsp;client&nbsp;on&nbsp;the&nbsp;servers&nbsp;terms.&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;For&nbsp;example:&lt;br&gt;&nbsp;&gt;&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;Client&nbsp;1&nbsp;connects&nbsp;--&nbsp;Factory&nbsp;instantiates&nbsp;Protocol&nbsp;class&nbsp;to&nbsp;handle&lt;br&gt;<br>
&nbsp;&gt;&nbsp;&nbsp;communication&nbsp;(connection&nbsp;doesn&#39;t&nbsp;close)&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;Client&nbsp;2&nbsp;connects&nbsp;--&nbsp;Factory&nbsp;instantiates&nbsp;Protocol&nbsp;class&nbsp;to&nbsp;handle&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;communication&nbsp;(connection&nbsp;doesn&#39;t&nbsp;close)&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;time&nbsp;has&nbsp;passed&nbsp;until&nbsp;server&nbsp;decides&nbsp;it&nbsp;needs&nbsp;to&nbsp;send&nbsp;a&nbsp;plugin&nbsp;to&nbsp;one&lt;br&gt;<br>
&nbsp;&gt;&nbsp;&nbsp;of&nbsp;the&nbsp;clients&gt;&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;Server&nbsp;sends&nbsp;plugin&nbsp;to&nbsp;Client&nbsp;1&lt;br&gt;&nbsp;&gt;&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;So&nbsp;how&nbsp;can&nbsp;that&nbsp;server&nbsp;send&nbsp;data&nbsp;to&nbsp;client&nbsp;1&nbsp;if&nbsp;client&nbsp;1&nbsp;hasn&#39;t&nbsp;caused&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;an&nbsp;event&nbsp;(The&nbsp;server&nbsp;side&nbsp;causes&nbsp;a&nbsp;certain&nbsp;event&nbsp;it&nbsp;should&nbsp;send&nbsp;data&lt;br&gt;<br>
&nbsp;&gt;&nbsp;&nbsp;to&nbsp;a&nbsp;selected&nbsp;client).&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;Define&nbsp;`event&#39;.&nbsp;&nbsp;Is&nbsp;the&nbsp;initial&nbsp;connection&nbsp;not&nbsp;an&nbsp;event?&nbsp;&nbsp;If&nbsp;you&nbsp;have&lt;br&gt;&nbsp;an&nbsp;open&nbsp;connection,&nbsp;the&nbsp;client&nbsp;doesn&#39;t&nbsp;have&nbsp;fart&nbsp;back&nbsp;through&nbsp;it&nbsp;every&lt;br&gt;&nbsp;5&nbsp;seconds&nbsp;(by&nbsp;the&nbsp;semantics&nbsp;of&nbsp;most&nbsp;protocols)&nbsp;to&nbsp;keep&nbsp;it&nbsp;open&nbsp;or&lt;br&gt;<br>
&nbsp;anything.&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;I&nbsp;understand&nbsp;that&nbsp;if&nbsp;a&nbsp;client&nbsp;sends&nbsp;data&nbsp;to&nbsp;the&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;server&nbsp;I&nbsp;can&nbsp;than&nbsp;write&nbsp;back&nbsp;to&nbsp;the&nbsp;client&nbsp;using&nbsp;the&nbsp;dataReceived&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;function&nbsp;within&nbsp;the&nbsp;Protocol&nbsp;instantiation.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;<br>
Are&nbsp;you&nbsp;sure&nbsp;you&nbsp;understand?&nbsp;&nbsp;You&#39;re&nbsp;calling&nbsp;dataReceive&nbsp;to&nbsp;send&nbsp;data?&lt;br&gt;&nbsp;&nbsp;If&nbsp;you&#39;re&nbsp;calling&nbsp;a&nbsp;method&nbsp;(that&#39;s&nbsp;what&nbsp;you&nbsp;meant&nbsp;by&nbsp;&quot;function&nbsp;within&lt;br&gt;&nbsp;the&nbsp;Protocol&nbsp;instantiation&quot;,&nbsp;I&nbsp;guess)&nbsp;with&nbsp;&quot;receive&quot;&nbsp;in&nbsp;the&nbsp;name,&nbsp;then&lt;br&gt;<br>
&nbsp;you&nbsp;can&nbsp;only&nbsp;be&nbsp;very&nbsp;confused.&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&gt;&nbsp;In&nbsp;this&nbsp;case&nbsp;once&nbsp;N&nbsp;number&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;of&nbsp;agents&nbsp;have&nbsp;connected&nbsp;I&nbsp;want&nbsp;the&nbsp;server&nbsp;to&nbsp;push&nbsp;data&nbsp;to&nbsp;the&nbsp;clients&lt;br&gt;&nbsp;&gt;&nbsp;&nbsp;without&nbsp;the&nbsp;Client&nbsp;writing&nbsp;to&nbsp;the&nbsp;server.&nbsp;Thanks&nbsp;again&nbsp;for&nbsp;the&nbsp;help.&lt;br&gt;<br>
&nbsp;&gt;&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;So&nbsp;write&nbsp;back&nbsp;data&nbsp;to&nbsp;the&nbsp;client.&nbsp;&nbsp;That&#39;s&nbsp;all&nbsp;I&nbsp;can&nbsp;say&nbsp;until&nbsp;you&lt;br&gt;&nbsp;describe&nbsp;what&nbsp;you&#39;ve&nbsp;tried&nbsp;(w/&nbsp;code)&nbsp;and&nbsp;why&nbsp;it&nbsp;failed&nbsp;(w/&nbsp;a&lt;br&gt;&nbsp;stacktrace)&nbsp;-&nbsp;vs.&nbsp;in&nbsp;pretty&nbsp;vague&nbsp;terms&nbsp;on&nbsp;essay&nbsp;on&nbsp;what&nbsp;you&nbsp;want&nbsp;to&lt;br&gt;<br>
&nbsp;do&nbsp;and&nbsp;haven&#39;t&nbsp;even&nbsp;attempted.&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;&lt;br&gt;&nbsp;--&lt;br&gt;&nbsp;\\\\\/\&quot;/\\\\\\\\\\\&lt;br&gt;&nbsp;\\\\/&nbsp;//&nbsp;//\/\\\\\\\&lt;br&gt;&nbsp;\\\/&nbsp;&nbsp;\\//&nbsp;/\&nbsp;\/\\\\&lt;br&gt;&nbsp;\\/&nbsp;/\/&nbsp;/&nbsp;/\/&nbsp;/\&nbsp;\\\&lt;br&gt;&nbsp;\/&nbsp;/&nbsp;/\/&nbsp;/\&nbsp;&nbsp;/\\\&nbsp;\\&lt;br&gt;&nbsp;/&nbsp;/\\\&nbsp;&nbsp;/\\\&nbsp;\\\\\/\&lt;br&gt;&nbsp;\/\\\\\/\\\\\/\\\\\\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.p.s&lt;br&gt;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;_______________________________________________&lt;br&gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
