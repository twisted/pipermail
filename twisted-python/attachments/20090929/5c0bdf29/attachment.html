<tt>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Sep&nbsp;29,&nbsp;2009&nbsp;at&nbsp;7:16&nbsp;PM,&nbsp;Benjamin&nbsp;Rutt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rutt.4@osu.edu&quot;&gt;rutt.4@osu.edu&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;The&nbsp;code:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; print&nbsp;&#39;hello,&nbsp;peer&nbsp;%s&#39;&nbsp;%&nbsp;(self.terminal.transport.getPeer())&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Fails&nbsp;with:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; AttributeError:&nbsp;SSHSessionProcessProtocol&nbsp;instance&nbsp;has&nbsp;no&nbsp;attribute&nbsp;&#39;getPeer&#39;&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Oops. &nbsp;Looks&nbsp;like&nbsp;my&nbsp;reading&nbsp;of&nbsp;the&nbsp;code&nbsp;was&nbsp;wrong.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&gt;<br>
&lt;/div&gt;&lt;div&gt;One&nbsp;possible&nbsp;patch&nbsp;to&nbsp;twisted&nbsp;8.2.0&#39;s&nbsp;conch/ssh/session.py&#39;s&nbsp;SSHSessionProcessProtocol&nbsp;class&nbsp;to&nbsp;add&nbsp;a&nbsp;getPeer()&nbsp;method&nbsp;would&nbsp;be:&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;+&nbsp; &nbsp; &nbsp; &nbsp; client&nbsp;=&nbsp;self.session.conn.transport.transport.client &lt;/div&gt;<br>
&lt;div&gt;+&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;address.IPv4Address(&#39;TCP&#39;,&nbsp;client[0],&nbsp;client[1]) &lt;/div&gt;&lt;div&gt;Could&nbsp;someone&nbsp;comment&nbsp;on&nbsp;this?&nbsp; (I&#39;m&nbsp;fairly&nbsp;certain&nbsp;ssh&nbsp;runs&nbsp;over&nbsp;TCP,&nbsp;but&nbsp;less&nbsp;certain&nbsp;that&nbsp;the&nbsp;mouthful&nbsp;self.session.conn.transport.transport.client&nbsp;isn&#39;t&nbsp;invading&nbsp;layers&nbsp;of&nbsp;abstraction&nbsp;in&nbsp;an&nbsp;unfriendly&nbsp;way).&nbsp; Thanks.&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;So,&nbsp;nominally,&nbsp;all&nbsp;those&nbsp;things&nbsp;are&nbsp;public&nbsp;(none&nbsp;of&nbsp;them&nbsp;starts&nbsp;with&nbsp;an&nbsp;underscore)&nbsp;but&nbsp;I&#39;d&nbsp;have&nbsp;to&nbsp;sift&nbsp;through&nbsp;the&nbsp;code&nbsp;to&nbsp;understand&nbsp;exactly&nbsp;how&nbsp;kosher&nbsp;they&nbsp;are&nbsp;(whether&nbsp;those&nbsp;attributes&nbsp;are&nbsp;a&nbsp;part&nbsp;of&nbsp;the&nbsp;interfaces&nbsp;in&nbsp;question).&lt;br&gt;<br>
&lt;br&gt;However,&nbsp;(A)&nbsp;&#39;TCP&#39;&nbsp;isn&#39;t&nbsp;quite&nbsp;the&nbsp;right&nbsp;answer&nbsp;here,&nbsp;because&nbsp;actually&nbsp;there&#39;s&nbsp;some&nbsp;SSH&nbsp;in&nbsp;the&nbsp;way,&nbsp;and&nbsp;(B)&nbsp;I&nbsp;am&nbsp;pretty&nbsp;sure&nbsp;there&nbsp;is&nbsp;a&nbsp;getPeer&nbsp;closer&nbsp;than&nbsp;that. &nbsp;In&nbsp;particular,&lt;br&gt;&lt;br&gt;SSHSessionProcessProtocol.session&nbsp;is&nbsp;a&nbsp;twisted.conch.session.SSHSession&lt;br&gt;<br>
SSHSession&nbsp;subclasses&nbsp;twisted.conch.ssh.channel.SSHChannel&lt;br&gt;SSHChannel&nbsp;implements&nbsp;getPeer&nbsp;already.&lt;br&gt;&lt;br&gt;So&nbsp;you&nbsp;&lt;i&gt;should&lt;/i&gt;&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;self.session.getPeer()&nbsp;and&nbsp;get&nbsp;something&nbsp;useful. &nbsp;I&nbsp;hope.&lt;br&gt;&lt;br&gt;That&nbsp;said,&nbsp;the&nbsp;getPeer&nbsp;implementation&nbsp;in&nbsp;question&nbsp;should&nbsp;really&nbsp;be&nbsp;returning&nbsp;an&nbsp;IAddress,&nbsp;not&nbsp;a&nbsp;tuple,&nbsp;so&nbsp;you&nbsp;can&nbsp;subclass&nbsp;or&nbsp;delegate&nbsp;to&nbsp;IPv4Address&nbsp;and&nbsp;still&nbsp;access&nbsp;&#39;host&#39;&nbsp;on&nbsp;the&nbsp;return&nbsp;value.&lt;br&gt;<br>
&lt;br&gt;Independent&nbsp;of&nbsp;the&nbsp;grossness,&nbsp;if&nbsp;you&nbsp;can&nbsp;contribute&nbsp;some&nbsp;test&nbsp;coverage&nbsp;for&nbsp;this,&nbsp;we&nbsp;could&nbsp;make&nbsp;the&nbsp;implementation&nbsp;less&nbsp;gross&nbsp;later&nbsp;:). &nbsp;This&nbsp;is&nbsp;especially&nbsp;important&nbsp;since&nbsp;hopefully&nbsp;many&nbsp;of&nbsp;these&nbsp;conch&nbsp;APIs&nbsp;will&nbsp;change&nbsp;in&nbsp;the&nbsp;near&nbsp;future. &nbsp;(z3p,&nbsp;are&nbsp;you&nbsp;planning&nbsp;on&nbsp;coming&nbsp;to&nbsp;the&nbsp;sprint&nbsp;this&nbsp;week...?)&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
