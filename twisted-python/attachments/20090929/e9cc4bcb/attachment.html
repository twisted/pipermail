<tt>
&lt;div&gt;The&nbsp;code:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; print&nbsp;&#39;hello,&nbsp;peer&nbsp;%s&#39;&nbsp;%&nbsp;(self.terminal.transport.getPeer())&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Fails&nbsp;with:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; AttributeError:&nbsp;SSHSessionProcessProtocol&nbsp;instance&nbsp;has&nbsp;no&nbsp;attribute&nbsp;&#39;getPeer&#39;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;One&nbsp;possible&nbsp;patch&nbsp;to&nbsp;twisted&nbsp;8.2.0&#39;s&nbsp;conch/ssh/session.py&#39;s&nbsp;SSHSessionProcessProtocol&nbsp;class&nbsp;to&nbsp;add&nbsp;a&nbsp;getPeer()&nbsp;method&nbsp;would&nbsp;be:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;$&nbsp;diff&nbsp;-u&nbsp;session.py.orig&nbsp;session.py &lt;/div&gt;<br>
&lt;div&gt;---&nbsp;session.py.orig&nbsp; &nbsp; &nbsp;2009-06-10&nbsp;06:30:33.000000000&nbsp;-0400 &lt;/div&gt;&lt;div&gt;+++&nbsp;session.py&nbsp; 2009-09-29&nbsp;12:30:01.622444000&nbsp;-0400 &lt;/div&gt;&lt;div&gt;@@&nbsp;-13,7&nbsp;+13,7&nbsp;@@ &lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt; import&nbsp;struct &lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt;-from&nbsp;twisted.internet&nbsp;import&nbsp;protocol &lt;/div&gt;<br>
&lt;div&gt;+from&nbsp;twisted.internet&nbsp;import&nbsp;protocol,&nbsp;address &lt;/div&gt;&lt;div&gt; from&nbsp;twisted.python&nbsp;import&nbsp;log &lt;/div&gt;&lt;div&gt; from&nbsp;twisted.conch.interfaces&nbsp;import&nbsp;ISession &lt;/div&gt;&lt;div&gt; from&nbsp;twisted.conch.ssh&nbsp;import&nbsp;common,&nbsp;channel &lt;/div&gt;&lt;div&gt;<br>
@@&nbsp;-210,6&nbsp;+210,10&nbsp;@@ &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;def&nbsp;loseConnection(self): &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp;self.session.loseConnection() &lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt;+&nbsp; &nbsp; def&nbsp;getPeer(self): &lt;/div&gt;&lt;div&gt;+&nbsp; &nbsp; &nbsp; &nbsp; client&nbsp;=&nbsp;self.session.conn.transport.transport.client &lt;/div&gt;<br>
&lt;div&gt;+&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;address.IPv4Address(&#39;TCP&#39;,&nbsp;client[0],&nbsp;client[1]) &lt;/div&gt;&lt;div&gt;+ &lt;/div&gt;&lt;div&gt; class&nbsp;SSHSessionClient(protocol.Protocol): &lt;/div&gt;&lt;div&gt;  &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;Could&nbsp;someone&nbsp;comment&nbsp;on&nbsp;this?&nbsp; (I&#39;m&nbsp;fairly&nbsp;certain&nbsp;ssh&nbsp;runs&nbsp;over&nbsp;TCP,&nbsp;but&nbsp;less&nbsp;certain&nbsp;that&nbsp;the&nbsp;mouthful&nbsp;self.session.conn.transport.transport.client&nbsp;isn&#39;t&nbsp;invading&nbsp;layers&nbsp;of&nbsp;abstraction&nbsp;in&nbsp;an&nbsp;unfriendly&nbsp;way).&nbsp; Thanks.&lt;/div&gt;<br>
&lt;br&gt;<br>

</tt>
