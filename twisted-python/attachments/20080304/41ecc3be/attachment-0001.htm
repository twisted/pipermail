<tt>
hi,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;my&nbsp;project&nbsp;involves&nbsp;lot&nbsp;of&amp;nbsp;&nbsp;I/O&amp;nbsp;&nbsp;over&nbsp;the&nbsp;network..&nbsp;one&nbsp;part&nbsp;of&nbsp;my&nbsp;project&nbsp;involves&nbsp;a&nbsp;server(http)&nbsp;which&nbsp;is&nbsp;listening&nbsp;on&nbsp;the&nbsp;port&nbsp;for&nbsp;many&nbsp;client&nbsp;.&nbsp;this&nbsp;sever&nbsp;fetches&nbsp;an&nbsp;image&nbsp;from&nbsp;the&nbsp;web&nbsp;and&amp;nbsp;&nbsp;and&nbsp;send&nbsp;it&nbsp;to&nbsp;clients&nbsp;....&amp;nbsp;&nbsp;and&nbsp;many&nbsp;clients&nbsp;will&nbsp;request&nbsp;the&nbsp;server&nbsp;concurrently&nbsp;..&nbsp;to&nbsp;implement&nbsp;concurrent&nbsp;serving&nbsp;to&nbsp;clients&nbsp;i&nbsp;used&nbsp;threaded&nbsp;http&nbsp;server&nbsp;&lt;br&gt;<br>
like&nbsp;this&nbsp;&lt;br&gt;&lt;br&gt;class&nbsp;HTTPServer(SocketServer.ThreadingMixIn,BaseHTTPServer.HTTPServer):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;pass&lt;br&gt;&lt;br&gt;class&nbsp;RequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;do_GET(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&amp;quot;received&nbsp;connection&nbsp;from:&nbsp;&amp;quot;,self.client_address&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;image=image_retreive()&amp;nbsp;&amp;nbsp;&nbsp;#where&nbsp;image&nbsp;retreive&nbsp;is&nbsp;a&nbsp;function&nbsp;that&nbsp;retrieves&nbsp;image&nbsp;from&nbsp;the&nbsp;web&nbsp;and&nbsp;works&nbsp;fine&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.send_response(200)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.send_header(&amp;quot;Content-type&amp;quot;,format)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.send_header(&amp;quot;Content-Length&amp;quot;,len(image_data))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.end_headers()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.request.sendall(image_data)&lt;br&gt;&lt;br&gt;httpd&nbsp;=&nbsp;HTTPServer((&amp;#39;&amp;#39;,port_number),&nbsp;RequestHandler)&lt;br&gt;httpd.serve_forever()&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;this&nbsp;code&nbsp;worked&nbsp;fine&nbsp;but&nbsp;this&nbsp;performance&nbsp;was&nbsp;very&nbsp;bad&nbsp;...&nbsp;it&nbsp;workes&nbsp;fine&nbsp;if&nbsp;the&nbsp;clients&nbsp;requested&nbsp;for&nbsp;small&nbsp;n&nbsp;medium&nbsp;size&nbsp;images&nbsp;as&nbsp;the&nbsp;server&nbsp;sends&nbsp;the&nbsp;response&nbsp;immediately&nbsp;and&nbsp;also&nbsp;workes&nbsp;fine&nbsp;if&nbsp;one&nbsp;client&nbsp;is&nbsp;requesting&nbsp;a&nbsp;large&nbsp;image&nbsp;(obviously&nbsp;server&nbsp;takes&nbsp;time&nbsp;to&nbsp;send&nbsp;response&amp;nbsp;&nbsp;as&amp;nbsp;&nbsp;it&nbsp;takes&nbsp;time&nbsp;to&nbsp;fetch&nbsp;the&nbsp;image&nbsp;from&nbsp;the&nbsp;web&nbsp;)&nbsp;and&nbsp;other&nbsp;clients&nbsp;concurrently&nbsp;request&nbsp;for&nbsp;small&nbsp;and&nbsp;medium&nbsp;images&amp;nbsp;&nbsp;these&amp;nbsp;&nbsp;clients&nbsp;will&amp;nbsp;&nbsp;be&nbsp;served&nbsp;immediately&nbsp;even&nbsp;if&nbsp;the&nbsp;other&nbsp;client&nbsp;is&nbsp;waiting&nbsp;but&nbsp;problem&nbsp;crops&nbsp;up&nbsp;when&nbsp;2&nbsp;clients&nbsp;concurrently&nbsp;request&nbsp;for&nbsp;an&nbsp;large&nbsp;image&nbsp;..&nbsp;while&nbsp;these&amp;nbsp;&nbsp;two&nbsp;clients&nbsp;are&nbsp;waiting&nbsp;for&nbsp;the&nbsp;response&nbsp;fromthe&nbsp;server&nbsp;.&nbsp;The&nbsp;server&nbsp;doesn&amp;#39;t&nbsp;accept&nbsp;any&nbsp;other&nbsp;client&nbsp;request&nbsp;...&nbsp;i&nbsp;can&nbsp;see&nbsp;this&nbsp;as&nbsp;i&nbsp;am&nbsp;printing&nbsp;the&amp;nbsp;&nbsp;address&nbsp;of&nbsp;the&nbsp;client&nbsp;that&nbsp;connects&nbsp;with&nbsp;server&nbsp;&amp;nbsp;&nbsp;in&nbsp;the&nbsp;1st&nbsp;line&nbsp;of&nbsp;get&nbsp;method&amp;nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;request&nbsp;handler&nbsp;if&nbsp;two&nbsp;clients&nbsp;concurrently&nbsp;request&nbsp;for&nbsp;an&nbsp;large&nbsp;image&nbsp;and&nbsp;only&nbsp;two&nbsp;clients&nbsp;address&nbsp;gets&nbsp;printed&amp;nbsp;&nbsp;that&nbsp;means&nbsp;only&nbsp;2&nbsp;clients&nbsp;receives&nbsp;connection&nbsp;to&nbsp;the&nbsp;server&amp;nbsp;&nbsp;even&nbsp;if&amp;nbsp;&nbsp;other&nbsp;clients&amp;nbsp;&nbsp;are&nbsp;requesting&amp;nbsp;&nbsp;the&nbsp;server&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;and&nbsp;other&nbsp;servers&nbsp;are&nbsp;served&nbsp;only&nbsp;after&nbsp;the&amp;nbsp;&nbsp;those&nbsp;2&nbsp;server&nbsp;releases&nbsp;the&nbsp;connection&nbsp;or&nbsp;get&nbsp;the&nbsp;response&nbsp;.&nbsp;that&nbsp;means&nbsp;server&nbsp;servers&nbsp;only&nbsp;2&nbsp;clients&nbsp;at&nbsp;a&nbsp;time&nbsp;.this&nbsp;is&nbsp;very&nbsp;undesirable&nbsp;as&nbsp;even&nbsp;if&nbsp;3rd&nbsp;client&nbsp;is&nbsp;requesting&nbsp;for&nbsp;very&nbsp;small&nbsp;image&nbsp;and&nbsp;2&nbsp;clients&nbsp;are&nbsp;waiting&nbsp;for&nbsp;large&nbsp;image&nbsp;..&nbsp;3rd&nbsp;client&nbsp;won&amp;#39;t&nbsp;receive&nbsp;the&nbsp;response&nbsp;until&nbsp;those&nbsp;2&nbsp;clients&nbsp;are&amp;nbsp;&nbsp;served&nbsp;.&nbsp;to&nbsp;make&nbsp;thing&nbsp;worst&nbsp;my&nbsp;server&nbsp;should&nbsp;serve&nbsp;10&nbsp;to&nbsp;15&nbsp;clients&nbsp;concurrently&nbsp;&amp;nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&lt;br&gt;to&nbsp;solve&nbsp;this&nbsp;i&nbsp;did&nbsp;some&nbsp;searching&nbsp;and&nbsp;found&nbsp;about&nbsp;cherrypy&nbsp;and&nbsp;twisted&nbsp;also&nbsp;implemented&nbsp;my&nbsp;server&nbsp;in&nbsp;cherrypy&nbsp;&lt;br&gt;like&nbsp;this&lt;br&gt;&lt;br&gt;from&nbsp;cherrypy&nbsp;import&nbsp;wsgiserver&lt;br&gt;def&nbsp;image_httpserver_app(environ,&nbsp;start_response):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&amp;gt;&amp;gt;sys.stdout,&amp;quot;received&nbsp;connection&nbsp;from:&nbsp;(%s&nbsp;:&nbsp;%s&nbsp;)&nbsp;\nthe&nbsp;image&nbsp;url&nbsp;is:&nbsp;%s&nbsp;&amp;quot;&nbsp;%&nbsp;(environ[&amp;quot;REMOTE_ADDR&amp;quot;],environ[&amp;quot;REMOTE_PORT&amp;quot;],environ[&amp;quot;QUERY_STRING&amp;quot;])&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;status&nbsp;=&nbsp;&amp;#39;200&nbsp;OK&amp;#39;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;response_headers&nbsp;=&nbsp;[(&amp;#39;Content-type&amp;#39;,format)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&nbsp;image=image_retreive()&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;response_headers&nbsp;=&nbsp;[(&amp;quot;Content-Length&amp;quot;,`len(image_data)`)]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;start_response(status,&nbsp;response_headers)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;[image_data]&lt;br&gt;<br>
&lt;br&gt;mappings=[(&amp;#39;/&amp;#39;,&nbsp;image_httpserver_app)]&lt;br&gt;wsgi_apps&nbsp;=&nbsp;mappings&nbsp;&lt;br&gt;server&nbsp;=&nbsp;wsgiserver.CherryPyWSGIServer((&amp;#39;localhost&amp;#39;,&nbsp;8888),&nbsp;wsgi_apps,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;server_name=&amp;#39;localhost&amp;#39;,numthreads=20)&lt;br&gt;<br>
&amp;nbsp;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;&amp;#39;__main__&amp;#39;:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;try:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;server.start()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;except&nbsp;KeyboardInterrupt:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;server.stop()&lt;br&gt;&lt;br&gt;this&nbsp;didn&amp;#39;t&nbsp;solve&nbsp;the&nbsp;problem&nbsp;at&nbsp;all&nbsp;..&nbsp;same&nbsp;thing&nbsp;is&nbsp;happening&nbsp;only&nbsp;2&nbsp;clients&nbsp;is&nbsp;served&nbsp;at&nbsp;a&nbsp;time&nbsp;..even&nbsp;if&nbsp;no&nbsp;of&nbsp;threads&nbsp;is&nbsp;assigned&amp;nbsp;&nbsp;to&nbsp;20&nbsp;..&nbsp;&lt;br&gt;<br>
i&nbsp;have&nbsp;did&nbsp;lot&nbsp;of&nbsp;searching&nbsp;and&nbsp;reading&nbsp;..&nbsp;and&nbsp;hoping&nbsp;to&nbsp;find&nbsp;a&nbsp;solution&nbsp;..can&nbsp;anyone&nbsp;make&nbsp;it&nbsp;easier&nbsp;for&nbsp;me&lt;br&gt;i&nbsp;have&nbsp;heard&nbsp;of&nbsp;twisted&nbsp;deffered&nbsp;object&nbsp;..&nbsp;will&nbsp;it&nbsp;solved&nbsp;the&nbsp;problem&nbsp;?&nbsp;if&nbsp;not&nbsp;pls&nbsp;suggest&nbsp;me&nbsp;alternative..&lt;br&gt;<br>
&lt;br&gt;<br>

</tt>
