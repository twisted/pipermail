<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Right&nbsp;now,&nbsp;we&nbsp;have&nbsp;a&nbsp;pretty&nbsp;bad&nbsp;logging&nbsp;idiom.&nbsp;&nbsp;All&nbsp;over&nbsp;Twisted,&nbsp;you'll&nbsp;find&nbsp;stuff&nbsp;like&nbsp;this:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;webkit-indent-blockquote&quot;&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;&lt;div&gt;log.msg(&quot;twistd&nbsp;%s&nbsp;(%s&nbsp;%s)&nbsp;starting&nbsp;up.&quot;&nbsp;%&nbsp;(copyright.version,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.executable,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;runtime.shortPythonVersion()))&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;log.msg(&quot;Loading&nbsp;%s...&quot;&nbsp;%&nbsp;filename)&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;log.msg(&quot;Received&nbsp;unhandled&nbsp;keyID:&nbsp;%r&quot;&nbsp;%&nbsp;(keyID,))&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;other&nbsp;words,&nbsp;log&nbsp;messages&nbsp;that&nbsp;take&nbsp;structured&nbsp;information,&nbsp;but&nbsp;then&nbsp;smash&nbsp;it&nbsp;into&nbsp;a&nbsp;not-particularly-distinctive&nbsp;string&nbsp;and&nbsp;spit&nbsp;it&nbsp;out&nbsp;into&nbsp;a&nbsp;line-delimited&nbsp;file.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;Twisted&nbsp;log&nbsp;system&nbsp;has,&nbsp;from&nbsp;its&nbsp;very&nbsp;beginning,&nbsp;supported&nbsp;a&nbsp;better&nbsp;style&nbsp;of&nbsp;formatting,&nbsp;which&nbsp;is:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;class=&quot;webkit-indent-blockquote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;40px;&nbsp;border-top-style:&nbsp;none;&nbsp;border-right-style:&nbsp;none;&nbsp;border-bottom-style:&nbsp;none;&nbsp;border-left-style:&nbsp;none;&nbsp;border-width:&nbsp;initial;&nbsp;border-color:&nbsp;initial;&nbsp;padding-top:&nbsp;0px;&nbsp;padding-right:&nbsp;0px;&nbsp;padding-bottom:&nbsp;0px;&nbsp;padding-left:&nbsp;0px;&nbsp;&quot;&gt;&lt;div&gt;log.msg(format=&quot;twistd&nbsp;%(version)s&nbsp;(%(executable)s&nbsp;%(short)s)&nbsp;starting&nbsp;up.&quot;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version=copyright.version,&nbsp;executable=sys.executable,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;short=runtime.shortPythonVersion()))&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;log.msg(format=&quot;Loading&nbsp;%(filename)s...&quot;,&nbsp;filename=filename)&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;log.msg(format=&quot;Received&nbsp;unhandled&nbsp;keyID:&nbsp;%(keyID)r&quot;,&nbsp;keyID=keyID)&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;lots&nbsp;of&nbsp;other&nbsp;features&nbsp;which&nbsp;this&nbsp;style&nbsp;of&nbsp;logging&nbsp;&lt;i&gt;could&lt;/i&gt;&nbsp;support,&nbsp;as&nbsp;well,&nbsp;with&nbsp;relatively&nbsp;minor&nbsp;tweaks,&nbsp;such&nbsp;as&nbsp;trivial&nbsp;enhancements&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;webkit-indent-blockquote&quot;&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;&lt;div&gt;def&nbsp;logger(module,&nbsp;audience,&nbsp;importance):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;logIt(**kw):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.msg(module=module,&nbsp;audience=audience,&nbsp;importance=importance,&nbsp;**kw)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;logIt&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;info&nbsp;=&nbsp;logger(__name__,&nbsp;ADMIN,&nbsp;NORMAL)&lt;/div&gt;&lt;div&gt;bugreport&nbsp;=&nbsp;logger(__name__,&nbsp;DEVEL,&nbsp;HIGH)&lt;/div&gt;&lt;div&gt;debug&nbsp;=&nbsp;logger(__name__,&nbsp;DEVEL,&nbsp;LOW)&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;&lt;div&gt;info(format=&quot;twistd&nbsp;%(version)s&nbsp;(%(executable)s&nbsp;%(short)s)&nbsp;starting&nbsp;up.&quot;,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version=copyright.version,&nbsp;executable=sys.executable,&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;short=runtime.shortPythonVersion()))&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;div&gt;This&nbsp;would&nbsp;then&nbsp;allow&nbsp;us&nbsp;to&nbsp;build&nbsp;systems&nbsp;which&nbsp;internally&nbsp;filter&nbsp;messages,&nbsp;avoid&nbsp;expensive&nbsp;string&nbsp;formatting&nbsp;and&nbsp;copying&nbsp;when&nbsp;it's&nbsp;not&nbsp;necessary,&nbsp;tune&nbsp;logging&nbsp;to&nbsp;different&nbsp;levels&nbsp;for&nbsp;different&nbsp;parts&nbsp;of&nbsp;the&nbsp;package&nbsp;hierarchy,&nbsp;and&nbsp;have&nbsp;intelligent&nbsp;real-time&nbsp;log&nbsp;analysis&nbsp;that&nbsp;inspects&nbsp;the&nbsp;objects&nbsp;being&nbsp;logged&nbsp;without&nbsp;having&nbsp;to&nbsp;apply&nbsp;regexes&nbsp;or&nbsp;other&nbsp;static-string-inspection&nbsp;methods&nbsp;to&nbsp;figure&nbsp;out&nbsp;which&nbsp;messages&nbsp;are&nbsp;interesting.&nbsp;&nbsp;Calendar&nbsp;Server&nbsp;implements&nbsp;some&nbsp;of&nbsp;these&nbsp;features&nbsp;for&nbsp;its&nbsp;logging&nbsp;system,&nbsp;and&nbsp;they've&nbsp;been&nbsp;very&nbsp;useful&nbsp;there.&nbsp;&nbsp;Various&nbsp;Divmod&nbsp;projects&nbsp;have&nbsp;implemented&nbsp;run-time&nbsp;statistics&nbsp;tracking&nbsp;via&nbsp;that&nbsp;Twisted&nbsp;logging&nbsp;system,&nbsp;and&nbsp;that&nbsp;worked&nbsp;pretty&nbsp;well&nbsp;too.&nbsp;&nbsp;It&nbsp;would&nbsp;be&nbsp;good&nbsp;to&nbsp;start&nbsp;taking&nbsp;advantage&nbsp;of&nbsp;the&nbsp;good&nbsp;parts&nbsp;of&nbsp;Twisted's&nbsp;logging&nbsp;system&nbsp;within&nbsp;Twisted&nbsp;itself.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Doing&nbsp;this&nbsp;in&nbsp;a&nbsp;consistent&nbsp;way&nbsp;would&nbsp;also&nbsp;open&nbsp;up&nbsp;the&nbsp;possibility&nbsp;of&nbsp;localizing&nbsp;our&nbsp;log&nbsp;messages,&nbsp;which&nbsp;is&nbsp;currently&nbsp;not&nbsp;really&nbsp;plausible.&nbsp;&nbsp;And&nbsp;also,&nbsp;of&nbsp;logging&nbsp;in&nbsp;a&nbsp;format&nbsp;which&nbsp;lost&nbsp;less&nbsp;information;&nbsp;for&nbsp;example,&nbsp;instead&nbsp;of&nbsp;actually&nbsp;doing&nbsp;textToEventDict,&nbsp;simply&nbsp;dumping&nbsp;a&nbsp;simplified&nbsp;form&nbsp;of&nbsp;the&nbsp;event&nbsp;dict&nbsp;itself&nbsp;to&nbsp;some&nbsp;structured&nbsp;format&nbsp;that&nbsp;could&nbsp;be&nbsp;reliably&nbsp;parsed&nbsp;–&nbsp;something&nbsp;like&nbsp;JSON&nbsp;–&nbsp;for&nbsp;easier&nbsp;parsing&nbsp;and&nbsp;analysis&nbsp;later.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;in&nbsp;order&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;take&nbsp;advantage&nbsp;of&nbsp;these&nbsp;features&nbsp;when&nbsp;they're&nbsp;added,&nbsp;we&nbsp;need&nbsp;to&nbsp;start&nbsp;avoiding&nbsp;premature&nbsp;string&nbsp;formatting&nbsp;everywhere&nbsp;that&nbsp;we&nbsp;can&nbsp;&lt;i&gt;today&lt;/i&gt;.&nbsp;&nbsp;If&nbsp;you're&nbsp;writing&nbsp;log&nbsp;messages&nbsp;within&nbsp;twisted&nbsp;(or&nbsp;within&nbsp;a&nbsp;twisted&nbsp;application&nbsp;or&nbsp;library)&nbsp;please&nbsp;adopt&nbsp;the&nbsp;format=,&nbsp;x=,&nbsp;y=&nbsp;style&nbsp;of&nbsp;logging&nbsp;messages&nbsp;so&nbsp;that&nbsp;log&nbsp;observers&nbsp;can&nbsp;actually&nbsp;see&nbsp;into&nbsp;the&nbsp;objects&nbsp;being&nbsp;logged&nbsp;and&nbsp;do&nbsp;interesting&nbsp;things&nbsp;with&nbsp;them.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;should&nbsp;also&nbsp;file&nbsp;some&nbsp;tickets&nbsp;about&nbsp;improving&nbsp;the&nbsp;documentation&nbsp;to&nbsp;indicate&nbsp;this&nbsp;style,&nbsp;for&nbsp;writing&nbsp;a&nbsp;new&nbsp;interface&nbsp;to&nbsp;logging&nbsp;which&nbsp;mandates&nbsp;this&nbsp;style,&nbsp;and&nbsp;for&nbsp;adding&nbsp;layers&nbsp;on&nbsp;top&nbsp;of&nbsp;that&nbsp;to&nbsp;provide&nbsp;more&nbsp;useful&nbsp;functionality&nbsp;like&nbsp;the&nbsp;aforementioned&nbsp;per-module&nbsp;or&nbsp;per-audience&nbsp;filtering.&nbsp;&nbsp;I&nbsp;have&nbsp;long&nbsp;despaired&nbsp;of&nbsp;filing&nbsp;such&nbsp;tickets&nbsp;because&nbsp;they&nbsp;each&nbsp;seem&nbsp;like&nbsp;boil-the-ocean&nbsp;tasks,&nbsp;changing&nbsp;every&nbsp;single&nbsp;call-site&nbsp;of&nbsp;log.msg&nbsp;(there&nbsp;are&nbsp;more&nbsp;than&nbsp;500&nbsp;as&nbsp;of&nbsp;today,&nbsp;just&nbsp;in&nbsp;Twisted&nbsp;itself,&nbsp;and&nbsp;thousands&nbsp;more&nbsp;in&nbsp;other&nbsp;applications&nbsp;I'm&nbsp;sure).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm&nbsp;going&nbsp;to&nbsp;try&nbsp;to&nbsp;get&nbsp;started&nbsp;on&nbsp;record&nbsp;my&nbsp;desired&nbsp;behavior&nbsp;for&nbsp;logging&nbsp;as&nbsp;tickets&nbsp;soon&nbsp;though,&nbsp;so&nbsp;Twisted&nbsp;can&nbsp;at&nbsp;least&nbsp;have&nbsp;some&nbsp;really&nbsp;good&nbsp;logging&nbsp;tools&nbsp;&lt;i&gt;eventually&lt;/i&gt;.&nbsp;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
