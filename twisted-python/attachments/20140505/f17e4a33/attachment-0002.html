<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=windows-1252&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;May&nbsp;5,&nbsp;2014,&nbsp;at&nbsp;6:52&nbsp;PM,&nbsp;David&nbsp;Stainton&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:dstainton415@gmail.com&quot;&gt;dstainton415@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;OK...&nbsp;I&nbsp;decided&nbsp;that&nbsp;txtorcon's&nbsp;endpoint&nbsp;constructor&nbsp;should&nbsp;only&nbsp;take&lt;br&gt;string&nbsp;arguments&nbsp;besides&nbsp;the&nbsp;reactor&nbsp;arg...&lt;br&gt;because&nbsp;serverFromString&nbsp;passes&nbsp;only&nbsp;str&nbsp;args&nbsp;to&nbsp;the&nbsp;endpoint&nbsp;constructor.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;strongly&nbsp;suggest&nbsp;that&nbsp;this&nbsp;is&nbsp;wrong.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;endpoint&nbsp;constructor&nbsp;should&nbsp;do&nbsp;_construction_.&nbsp;&nbsp;The&nbsp;endpoint&nbsp;parser&nbsp;should&nbsp;do&nbsp;_parsing_.&nbsp;&nbsp;The&nbsp;task&nbsp;of&nbsp;parsing&nbsp;is&nbsp;of&nbsp;taking&nbsp;strings&nbsp;and&nbsp;producing&nbsp;meaningful&nbsp;values.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;may&nbsp;want&nbsp;to&nbsp;have&nbsp;the&nbsp;endpoint&nbsp;parser&nbsp;actually&nbsp;live&nbsp;in&nbsp;a&nbsp;separate&nbsp;method&nbsp;in&nbsp;txtorcon&nbsp;rather&nbsp;than&nbsp;putting&nbsp;it&nbsp;into&nbsp;the&nbsp;plugin&nbsp;itself,&nbsp;and&nbsp;leave&nbsp;the&nbsp;plugin&nbsp;simply&nbsp;the&nbsp;task&nbsp;of&nbsp;plugging&nbsp;in,&nbsp;but&nbsp;the&nbsp;parsing&nbsp;method&nbsp;should&nbsp;not&nbsp;be&nbsp;called&nbsp;__init__.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(Also,&nbsp;don't&nbsp;use&nbsp;asserts.&nbsp;&nbsp;This&nbsp;is&nbsp;probably&nbsp;indicative&nbsp;of&nbsp;a&nbsp;weakness&nbsp;in&nbsp;the&nbsp;parsing&nbsp;API&nbsp;we've&nbsp;provided,&nbsp;but&nbsp;you&nbsp;should&nbsp;likely&nbsp;raise&nbsp;something&nbsp;like&nbsp;UsageError.)&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;wrote&nbsp;the&nbsp;endpoint&nbsp;parser&nbsp;to&nbsp;be&nbsp;as&nbsp;simple&nbsp;as&nbsp;possible.&lt;br&gt;The&nbsp;endpoint's&nbsp;`listen`&nbsp;method&nbsp;now&nbsp;handles&nbsp;the&nbsp;tor&nbsp;configuration&nbsp;and&lt;br&gt;launch&nbsp;logic...&nbsp;and&nbsp;returns&nbsp;a&nbsp;deferred&nbsp;which&nbsp;will&lt;br&gt;fire&nbsp;with&nbsp;an&nbsp;IListenPort.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Great.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;The&nbsp;pip&nbsp;method&nbsp;definitely&nbsp;works...&nbsp;my&nbsp;code&nbsp;works&nbsp;but&nbsp;prints&nbsp;traceback&lt;br&gt;with&nbsp;this&nbsp;error:&lt;br&gt;&quot;Unexpected&nbsp;error&nbsp;while&nbsp;writing&nbsp;cache&nbsp;file&quot;&lt;br&gt;Do&nbsp;you&nbsp;as&nbsp;well?&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;exactly&nbsp;is&nbsp;'usewithtor'?&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;usewithtor&nbsp;pip&nbsp;install&nbsp;twisted&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Running&nbsp;the&nbsp;example&nbsp;code:&lt;br&gt;cd&nbsp;examples&lt;br&gt;python&nbsp;launch_tor_endpoint.py&lt;br&gt;Unexpected&nbsp;error&nbsp;while&nbsp;writing&nbsp;cache&nbsp;file&lt;br&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/home/human/virtenv-txtorcon/local/lib/python2.7/site-packages/twisted/internet/endpoints.py&quot;,&lt;br&gt;line&nbsp;1465,&nbsp;in&nbsp;serverFromString&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;_serverFromStringLegacy(reactor,&nbsp;description,&nbsp;_NO_DEFAULT)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/home/human/virtenv-txtorcon/local/lib/python2.7/site-packages/twisted/internet/endpoints.py&quot;,&lt;br&gt;line&nbsp;1393,&nbsp;in&nbsp;_serverFromStringLegacy&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;nameOrPlugin,&nbsp;args,&nbsp;kw&nbsp;=&nbsp;_parseServer(description,&nbsp;None,&nbsp;default)&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/home/human/virtenv-txtorcon/local/lib/python2.7/site-packages/twisted/internet/endpoints.py&quot;,&lt;br&gt;line&nbsp;1380,&nbsp;in&nbsp;_parseServer&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;plugin&nbsp;in&nbsp;getPlugins(IStreamServerEndpointStringParser):&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/home/human/virtenv-txtorcon/local/lib/python2.7/site-packages/twisted/plugin.py&quot;,&lt;br&gt;line&nbsp;209,&nbsp;in&nbsp;getPlugins&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;allDropins&nbsp;=&nbsp;getCache(package)&lt;br&gt;---&nbsp;&lt;exception&nbsp;caught&nbsp;here&gt;&nbsp;---&lt;br&gt;&nbsp;&nbsp;File&nbsp;&quot;/home/human/virtenv-txtorcon/local/lib/python2.7/site-packages/twisted/plugin.py&quot;,&lt;br&gt;line&nbsp;181,&nbsp;in&nbsp;getCache&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;dropinPath.setContent(pickle.dumps(dropinDotCache))&lt;br&gt;exceptions.AttributeError:&nbsp;'ZipPath'&nbsp;object&nbsp;has&nbsp;no&nbsp;attribute&nbsp;'setContent'&lt;br&gt;I&nbsp;have&nbsp;set&nbsp;up&nbsp;a&nbsp;hidden&nbsp;service,&nbsp;advertised&nbsp;at:&nbsp;&lt;&lt;class&lt;br&gt;'twisted.internet.tcp.Port'&gt;&nbsp;of&nbsp;twisted.web.server.Site&nbsp;on&nbsp;55141&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;traceback&nbsp;is&nbsp;actually&nbsp;harmless,&nbsp;if&nbsp;annoying.&nbsp;&nbsp;It's&nbsp;trying&nbsp;to&nbsp;generate&nbsp;the&nbsp;plugin&nbsp;cache,&nbsp;which&nbsp;is&nbsp;explained&nbsp;here:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/documents/current/core/howto/plugin.html#auto3&quot;&gt;https://twistedmatrix.com/documents/current/core/howto/plugin.html#auto3&lt;/a&gt;&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;a&nbsp;href=&quot;http://mqrcnytlnh4xynmh.onion:80&quot;&gt;http://mqrcnytlnh4xynmh.onion:80&lt;/a&gt;&lt;br&gt;locally&nbsp;listening&nbsp;on&nbsp;IPv4Address(TCP,&nbsp;'127.0.0.1',&nbsp;55141)&lt;br&gt;&lt;br&gt;and&nbsp;txtorcon's&nbsp;setup.py&nbsp;output:&lt;br&gt;python&nbsp;setup.py&nbsp;install&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;running&nbsp;bdist_egg&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&nbsp;^&nbsp;This&nbsp;right&nbsp;here&nbsp;is&nbsp;your&nbsp;problem.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;a&nbsp;couple&nbsp;of&nbsp;solutions,&nbsp;in&nbsp;order&nbsp;of&nbsp;increasing&nbsp;complexity:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&nbsp;class=&quot;MailOutline&quot;&gt;&lt;li&gt;Don't&nbsp;build&nbsp;eggs.&nbsp;&nbsp;Why&nbsp;are&nbsp;you&nbsp;building&nbsp;eggs?&nbsp;&nbsp;Eggs&nbsp;are&nbsp;unfortunately&nbsp;a&nbsp;huge&nbsp;problem&nbsp;magnet.&nbsp;&nbsp;I&nbsp;don't&nbsp;think&nbsp;'pip&nbsp;install'&nbsp;builds&nbsp;eggs;&nbsp;I&nbsp;don't&nbsp;manually&nbsp;run&nbsp;setup.py&nbsp;anywhere&nbsp;any&nbsp;more&nbsp;because&nbsp;I&nbsp;assume&nbsp;pip&nbsp;understands&nbsp;these&nbsp;concerns&nbsp;better&nbsp;than&nbsp;I&nbsp;do.&lt;/li&gt;&lt;li&gt;Set&nbsp;zip_safe&nbsp;in&nbsp;your&nbsp;setup.py&nbsp;to&nbsp;False,&nbsp;which&nbsp;will&nbsp;turn&nbsp;your&nbsp;egg&nbsp;into&nbsp;a&nbsp;directory&nbsp;rather&nbsp;than&nbsp;a&nbsp;directory.&lt;/li&gt;&lt;li&gt;Figure&nbsp;out&nbsp;a&nbsp;way&nbsp;to&nbsp;hook&nbsp;the&nbsp;_build_&nbsp;step&nbsp;specifically&nbsp;so&nbsp;you&nbsp;can&nbsp;run&nbsp;getPlugins()&nbsp;to&nbsp;generate&nbsp;the&nbsp;dropin&nbsp;cache&nbsp;before&nbsp;zipping&nbsp;up&nbsp;your&nbsp;zip&nbsp;file.&nbsp;&nbsp;Twisted&nbsp;plugins&nbsp;actually&nbsp;do&nbsp;work&nbsp;within&nbsp;zip&nbsp;files,&nbsp;but&nbsp;nobody&nbsp;has&nbsp;bothered&nbsp;working&nbsp;out&nbsp;the&nbsp;setuptools&nbsp;incantation&nbsp;to&nbsp;get&nbsp;them&nbsp;to&nbsp;generate&nbsp;at&nbsp;the&nbsp;appropriate&nbsp;time&nbsp;for&nbsp;building&nbsp;an&nbsp;egg.&nbsp;&nbsp;This&nbsp;is&nbsp;extra&nbsp;tricky&nbsp;because&nbsp;you&nbsp;only&nbsp;want&nbsp;to&nbsp;generate&nbsp;this&nbsp;dropin.cache&nbsp;file&nbsp;if&nbsp;the&nbsp;dropin&nbsp;is&nbsp;going&nbsp;to&nbsp;live&nbsp;inside&nbsp;an&nbsp;egg;&nbsp;otherwise,&nbsp;it&nbsp;would&nbsp;conflict&nbsp;with&nbsp;the&nbsp;communal&nbsp;dropin.cache&nbsp;file&nbsp;generated&nbsp;at&nbsp;install&nbsp;time.&nbsp;&nbsp;This&nbsp;option&nbsp;will&nbsp;be&nbsp;the&nbsp;most&nbsp;confusing&nbsp;and&nbsp;frustrating&nbsp;for&nbsp;you,&nbsp;but&nbsp;I&nbsp;hope&nbsp;you&nbsp;choose&nbsp;it,&nbsp;because&nbsp;it&nbsp;would&nbsp;be&nbsp;GREAT&nbsp;to&nbsp;have&nbsp;a&nbsp;Right&nbsp;Way™&nbsp;to&nbsp;address&nbsp;this&nbsp;problem&nbsp;in&nbsp;a&nbsp;Twisted&nbsp;plugin&nbsp;project's&nbsp;setup.py&nbsp;:).&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;zip_safe&nbsp;flag&nbsp;not&nbsp;set;&nbsp;analyzing&nbsp;archive&nbsp;contents...&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It's&nbsp;probably&nbsp;best&nbsp;to&nbsp;set&nbsp;zip_safe&nbsp;one&nbsp;way&nbsp;or&nbsp;the&nbsp;other&nbsp;though,&nbsp;even&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;set&nbsp;it&nbsp;to&nbsp;'true'.&nbsp;&nbsp;Letting&nbsp;setuptools&nbsp;guess&nbsp;like&nbsp;this&nbsp;will,&nbsp;unsurprisingly,&nbsp;get&nbsp;you&nbsp;unpredictable&nbsp;results.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-g&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
