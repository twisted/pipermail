<tt>
&lt;div&gt;Hi&nbsp;all,&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;After&nbsp;reading&nbsp;the&nbsp;&lt;/span&gt;&lt;a&nbsp;style=&quot;text-decoration:none;&quot;&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/udp.html&quot;&gt;&lt;u&nbsp;style=&quot;background-color:transparent;color:#1155cc;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;UDP&nbsp;Networking&lt;/u&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;&nbsp;how-to&nbsp;I&nbsp;added&nbsp;interaction&nbsp;using&nbsp;UDP&nbsp;messages&nbsp;to&nbsp;my&nbsp;distributed&nbsp;application.&nbsp;One&nbsp;sub-application&nbsp;is&nbsp;UDP&nbsp;broadcaster&nbsp;and&nbsp;the&nbsp;other&nbsp;one&nbsp;is&nbsp;responder.&nbsp;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;Their&nbsp;minimized&nbsp;code&nbsp;is&nbsp;below:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;strong&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:700;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;broadcaster.py:&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;from&nbsp;datetime&nbsp;import&nbsp;datetime&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;import&nbsp;socket&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;import&nbsp;traceback&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;task,&nbsp;reactor&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;DatagramProtocol&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;DEFAULT_PORT&nbsp;=&nbsp;2017&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;DEFAULT_HOST&nbsp;=&nbsp;&quot;192.168.2.255&quot;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;DEFAULT_INTERVAL_SECONDS&nbsp;=&nbsp;1&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;class&nbsp;BroadcasterProtocol(DatagramProtocol):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   def&nbsp;__init__(self,&nbsp;port):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       self._port&nbsp;=&nbsp;port&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   def&nbsp;startProtocol(self):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       print&nbsp;&quot;BroadcasterProtocol::startProtocol&quot;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       self.transport.setBroadcastAllowed(True)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   def&nbsp;broadcastTime(self):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       time_str&nbsp;=&nbsp;datetime.now().time().strftime(&quot;%H:%M:%S.%f&quot;)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       try:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;           self.transport.write(time_str.encode('utf-8'),&nbsp;('&lt;broadcast&gt;',&nbsp;self._port))&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;           print&nbsp;&quot;BroadcasterProtocol:&nbsp;broadcasted&nbsp;time:&nbsp;{}&quot;.format(time_str)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       except&nbsp;Exception:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;           print&nbsp;&quot;BroadcasterProtocol:&nbsp;time&nbsp;sending&nbsp;failed!&quot;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   def&nbsp;datagramReceived(self,&nbsp;datagram,&nbsp;addr):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       print&nbsp;&quot;BroadcasterProtocol:&nbsp;datagram&nbsp;from&nbsp;{}&nbsp;received:\n{}&quot;.format(addr,&nbsp;datagram)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;def&nbsp;loopDone(unused):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   print&nbsp;&quot;Loop&nbsp;done&quot;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;def&nbsp;loopFailure(failure):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   print&nbsp;&quot;Loop&nbsp;failure!&nbsp;Failure&nbsp;is&nbsp;{}&quot;.format(traceback.format_exc(failure))&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;protocol&nbsp;=&nbsp;BroadcasterProtocol(DEFAULT_PORT)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;the_socket&nbsp;=&nbsp;socket.socket(socket.AF_INET,&nbsp;socket.SOCK_DGRAM,&nbsp;0)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;the_socket.setblocking(False)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;the_socket.bind((DEFAULT_HOST,&nbsp;DEFAULT_PORT))&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;twisted_port&nbsp;=&nbsp;reactor.adoptDatagramPort(the_socket.fileno(),&nbsp;socket.AF_INET,&nbsp;protocol)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;loop&nbsp;=&nbsp;task.LoopingCall(protocol.broadcastTime)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;d&nbsp;=&nbsp;loop.start(DEFAULT_INTERVAL_SECONDS)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;d.addCallback(loopDone).addErrback(loopFailure)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;reactor.run()&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;br&nbsp;/&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;strong&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:700;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;responder.py:&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;DatagramProtocol&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;DEFAULT_PORT&nbsp;=&nbsp;2017&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;class&nbsp;ResponderProtocol(DatagramProtocol):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;   def&nbsp;datagramReceived(self,&nbsp;data,&nbsp;addr):&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       print&nbsp;&quot;ResponderProtocol:&nbsp;received&nbsp;from&nbsp;{addr}:\n{data}&quot;.format(&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;           addr&nbsp;=&nbsp;addr,&nbsp;data&nbsp;=&nbsp;data)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       response&nbsp;=&nbsp;&quot;GOT&nbsp;&quot;&nbsp;+&nbsp;data&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       print&nbsp;&quot;ResponderProtocol:&nbsp;sending&nbsp;response&nbsp;\&quot;{response}\&quot;&nbsp;to&nbsp;address&nbsp;{addr}&quot;.format(&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;           response&nbsp;=&nbsp;response,&nbsp;addr&nbsp;=&nbsp;addr)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;       self.transport.write(response,&nbsp;addr)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;responder_port&nbsp;=&nbsp;reactor.listenUDP(DEFAULT_PORT,&nbsp;ResponderProtocol())&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;reactor.run()&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;There&nbsp;are&nbsp;some&nbsp;reasons&nbsp;why&nbsp;I&nbsp;implemented&nbsp;UDP&nbsp;broadcasting&nbsp;and&nbsp;responding&nbsp;in&nbsp;the&nbsp;way&nbsp;that&nbsp;is&nbsp;a&nbsp;bit&nbsp;different&nbsp;than&nbsp;that&nbsp;shown&nbsp;in&nbsp;&lt;/span&gt;&lt;a&nbsp;style=&quot;text-decoration:none;&quot;&nbsp;href=&quot;http://twistedmatrix.com/documents/current/_downloads/udpbroadcast.py&quot;&gt;&lt;u&nbsp;style=&quot;background-color:transparent;color:#1155cc;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;the&nbsp;official&nbsp;udpbroadcast.py&nbsp;example&lt;/u&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;,&nbsp;but&nbsp;after&nbsp;reading&nbsp;&lt;/span&gt;&lt;a&nbsp;style=&quot;text-decoration:none;&quot;&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/udp.html&quot;&gt;&lt;u&nbsp;style=&quot;background-color:transparent;color:#1155cc;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:underline;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;UDP&nbsp;Networking&lt;/u&gt;&lt;/a&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;&nbsp;how-to&nbsp;I&nbsp;thought&nbsp;this&nbsp;isn’t&nbsp;important.&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;ResponderProtocol.datagramReceived&nbsp;is&nbsp;successfully&nbsp;called&nbsp;with&nbsp;messages&nbsp;sent&nbsp;by&nbsp;broadcaster.&nbsp;Also&nbsp;I&nbsp;expected&nbsp;BroadcasterProtocol.datagramReceived&nbsp;to&nbsp;be&nbsp;called&nbsp;with&nbsp;“GOT&nbsp;&lt;time&gt;”&nbsp;responses&nbsp;sent&nbsp;by&nbsp;ResponderProtocol,&nbsp;but&nbsp;this&nbsp;doesn’t&nbsp;take&nbsp;place.&nbsp;Using&nbsp;strace&nbsp;I&nbsp;can&nbsp;see&nbsp;that&nbsp;sendto&nbsp;system&nbsp;function&nbsp;is&nbsp;being&nbsp;called&nbsp;by&nbsp;the&nbsp;responder&nbsp;process&nbsp;with&nbsp;“GOT&nbsp;&lt;time&gt;”&nbsp;messages,&nbsp;but&nbsp;there&nbsp;are&nbsp;no&nbsp;corresponding&nbsp;recv*&nbsp;calls&nbsp;in&nbsp;the&nbsp;broadcaster&nbsp;process.&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt;&quot;&gt;&lt;strong&nbsp;style=&quot;font-weight:normal;&quot;&gt;&lt;span&nbsp;style=&quot;background-color:transparent;color:#000000;font-family:arial;font-size:11pt;font-style:normal;font-variant:normal;font-weight:400;text-decoration:none;vertical-align:baseline;white-space:pre-wrap;&quot;&gt;Is&nbsp;this&nbsp;a&nbsp;bug&nbsp;or&nbsp;I&nbsp;made&nbsp;something&nbsp;wrong?&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;-- &lt;/div&gt;&lt;div&gt;Kind&nbsp;regards,&nbsp;Roman&nbsp;Mescheryakov&lt;/div&gt;&lt;div&gt; &lt;/div&gt;
</tt>
