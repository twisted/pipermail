<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Jul&nbsp;8,&nbsp;2013,&nbsp;at&nbsp;3:31&nbsp;PM,&nbsp;Justin&nbsp;Chiu&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Hi&nbsp;all,&lt;br&gt;&lt;br&gt;*I&nbsp;posted&nbsp;this&nbsp;to&nbsp;python-list&nbsp;and&nbsp;tutor-list&nbsp;and&nbsp;received&nbsp;no&nbsp;replies.&nbsp;Any&nbsp;advice&nbsp;would&nbsp;be&nbsp;much&nbsp;appreciated.&nbsp;Thank&nbsp;you.*&lt;br&gt;&lt;br&gt;What&nbsp;is&nbsp;the&nbsp;best&nbsp;approach&nbsp;to&nbsp;writing&nbsp;a&nbsp;concurrent&nbsp;daemon&nbsp;that&nbsp;can&nbsp;execute&nbsp;callbacks&nbsp;for&nbsp;different&nbsp;types&nbsp;of&nbsp;events&nbsp;(AMQP&nbsp;messages,&nbsp;parsed&nbsp;output&nbsp;of&nbsp;a&nbsp;subprocess,&nbsp;HTTP&nbsp;requests)?&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;considering&nbsp;[twisted][1],&nbsp;the&nbsp;built-in&nbsp;[threading][2]&nbsp;module,&nbsp;and&nbsp;[greenlet][3].&nbsp;I&nbsp;must&nbsp;admit&nbsp;that&nbsp;I&nbsp;am&nbsp;very&nbsp;unfamiliar&nbsp;with&nbsp;concurrent&nbsp;programming&nbsp;and&nbsp;Python&nbsp;programming&nbsp;in&nbsp;general&nbsp;(formerly&nbsp;a&nbsp;data&nbsp;analysis&nbsp;driven&nbsp;procedural&nbsp;programmer).&nbsp;Any&nbsp;resources&nbsp;on&nbsp;threaded/concurrent&nbsp;programming&nbsp;(specifically&nbsp;daemons...not&nbsp;just&nbsp;multi-threading&nbsp;a&nbsp;single&nbsp;task)&nbsp;would&nbsp;be&nbsp;much&nbsp;appreciated.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From&nbsp;the&nbsp;details&nbsp;below,&nbsp;it&nbsp;would&nbsp;appear&nbsp;that&nbsp;Twisted&nbsp;would&nbsp;be&nbsp;a&nbsp;great&nbsp;fit&nbsp;for&nbsp;this&nbsp;application.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;asynchronous&nbsp;nature&nbsp;of&nbsp;the&nbsp;framework&nbsp;may&nbsp;cause&nbsp;some&nbsp;head&nbsp;scratching&nbsp;if&nbsp;you're&nbsp;in&nbsp;a&nbsp;procedural&nbsp;mindset,&nbsp;but&nbsp;on&nbsp;the&nbsp;other&nbsp;hand,&nbsp;attempting&nbsp;to&nbsp;facilitate&nbsp;all&nbsp;of&nbsp;the&nbsp;different&nbsp;service&nbsp;interactions&nbsp;you&nbsp;are&nbsp;proposing&nbsp;in&nbsp;a&nbsp;coherent&nbsp;manner&nbsp;can&nbsp;be&nbsp;challenging&nbsp;regardless.&nbsp;One&nbsp;of&nbsp;Twisted's&nbsp;strengths&nbsp;is&nbsp;that&nbsp;it&nbsp;provides&nbsp;that&nbsp;coherence...once&nbsp;you&nbsp;grok&nbsp;the&nbsp;paradigm,&nbsp;you'll&nbsp;be&nbsp;able&nbsp;to&nbsp;look&nbsp;at&nbsp;this&nbsp;type&nbsp;of&nbsp;application&nbsp;and&nbsp;quickly&nbsp;come&nbsp;up&nbsp;with&nbsp;a&nbsp;reasonable&nbsp;sketch&nbsp;of&nbsp;how&nbsp;all&nbsp;of&nbsp;the&nbsp;pieces&nbsp;will&nbsp;fit&nbsp;together,&nbsp;with&nbsp;confidence.&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;highly&nbsp;recommend&nbsp;Dave&nbsp;Peticolas'&nbsp;tutorial:&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://krondo.com/?page_id=1327&quot;&gt;http://krondo.com/?page_id=1327&lt;/a&gt;&lt;/div&gt;&lt;div&gt;You'll&nbsp;get&nbsp;a&nbsp;great&nbsp;introduction&nbsp;to&nbsp;asynchronous&nbsp;programming&nbsp;and&nbsp;dive&nbsp;into&nbsp;Twisted.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;of&nbsp;course&nbsp;the&nbsp;Twisted&nbsp;documentation,&nbsp;esp.&nbsp;the&nbsp;Getting&nbsp;Started&nbsp;section&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/&quot;&gt;http://twistedmatrix.com/documents/current/core/howto/&lt;/a&gt;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Finally,&nbsp;I'd&nbsp;stress&nbsp;that&nbsp;you&nbsp;don't&nbsp;need&nbsp;to&nbsp;know&nbsp;*all*&nbsp;of&nbsp;Twisted&nbsp;to&nbsp;benefit&nbsp;from&nbsp;using&nbsp;it.&nbsp;There&nbsp;is&nbsp;a&nbsp;great&nbsp;deal&nbsp;of&nbsp;functionality&nbsp;in&nbsp;the&nbsp;framework&nbsp;and&nbsp;I'm&nbsp;discovering&nbsp;new&nbsp;uses&nbsp;for&nbsp;it&nbsp;all&nbsp;of&nbsp;the&nbsp;time.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Details:&lt;br&gt;&lt;br&gt;1)&nbsp;Listens&nbsp;into&nbsp;AMQP&nbsp;messaging&nbsp;queues&nbsp;and&nbsp;executes&nbsp;callbacks&nbsp;when&nbsp;messages&nbsp;arrive.&lt;br&gt;Example:&nbsp;Immediately&nbsp;after&nbsp;startup,&nbsp;the&nbsp;daemon&nbsp;continuously&nbsp;listens&nbsp;to&nbsp;the&nbsp;[Openstack&nbsp;Notifications&nbsp;messaging&nbsp;queue][4].&nbsp;When&nbsp;a&nbsp;virtual&nbsp;machine&nbsp;is&nbsp;launched,&nbsp;a&nbsp;notification&nbsp;is&nbsp;generated&nbsp;by&nbsp;Openstack&nbsp;with&nbsp;the&nbsp;hostname,&nbsp;IP&nbsp;address,&nbsp;etc.&nbsp;The&nbsp;daemon&nbsp;should&nbsp;read&nbsp;this&nbsp;message&nbsp;and&nbsp;write&nbsp;some&nbsp;info&nbsp;to&nbsp;a&nbsp;log&nbsp;(or&nbsp;POST&nbsp;the&nbsp;info&nbsp;to&nbsp;a&nbsp;server,&nbsp;or&nbsp;notify&nbsp;the&nbsp;user...something&nbsp;simple).&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Others&nbsp;have&nbsp;mentioned&nbsp;txAMQP.&nbsp;&nbsp;It&nbsp;should&nbsp;be&nbsp;fairly&nbsp;straightforward&nbsp;to&nbsp;consume&nbsp;messages&nbsp;from&nbsp;the&nbsp;queue&nbsp;and&nbsp;hook&nbsp;it&nbsp;up&nbsp;to&nbsp;your&nbsp;user&nbsp;interface.&nbsp;&nbsp;There&nbsp;are&nbsp;numerous&nbsp;asynchronous&nbsp;APIs&nbsp;in&nbsp;the&nbsp;framework,&nbsp;so&nbsp;you'll&nbsp;have&nbsp;options&nbsp;for&nbsp;doing&nbsp;things&nbsp;just&nbsp;as&nbsp;you&nbsp;propose,&nbsp;without&nbsp;blocking&nbsp;other&nbsp;parts&nbsp;of&nbsp;your&nbsp;application.&nbsp;&nbsp;Twisted&nbsp;has&nbsp;its&nbsp;own&nbsp;logging&nbsp;system&nbsp;and&nbsp;twisted.web.client.Agent&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;POST&nbsp;to&nbsp;a&nbsp;web&nbsp;server,&nbsp;etc.&nbsp;&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;2)&nbsp;Parse&nbsp;the&nbsp;output&nbsp;of&nbsp;a&nbsp;subprocess&nbsp;and&nbsp;execute&nbsp;callbacks&nbsp;based&nbsp;on&nbsp;the&nbsp;output.&lt;br&gt;Example:&nbsp;Every&nbsp;30&nbsp;seconds,&nbsp;a&nbsp;system&nbsp;command&nbsp;&quot;[qstat][5]&quot;&nbsp;is&nbsp;run&nbsp;to&nbsp;query&nbsp;a&nbsp;job&nbsp;resource&nbsp;manager&nbsp;(e.g.&nbsp;TORQUE).&nbsp;Similar&nbsp;callbacks&nbsp;to&nbsp;1).&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Twisted&nbsp;can&nbsp;help&nbsp;you&nbsp;with&nbsp;scheduled&nbsp;tasks&nbsp;and&nbsp;there&nbsp;is&nbsp;a&nbsp;ProcessProtocol&nbsp;that,&nbsp;combined,&nbsp;will&nbsp;do&nbsp;exactly&nbsp;what&nbsp;you&nbsp;propose.&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/time.html&quot;&gt;http://twistedmatrix.com/documents/current/core/howto/time.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/process.html&quot;&gt;http://twistedmatrix.com/documents/current/core/howto/process.html&lt;/a&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;3)&nbsp;Receive&nbsp;requests&nbsp;from&nbsp;a&nbsp;user&nbsp;and&nbsp;process&nbsp;them.&nbsp;I&nbsp;think&nbsp;this&nbsp;will&nbsp;be&nbsp;via&nbsp;WSGI&nbsp;HTTP.&lt;br&gt;Example:&nbsp;User&nbsp;submits&nbsp;an&nbsp;XML&nbsp;template&nbsp;with&nbsp;virtual&nbsp;machine&nbsp;templates.&nbsp;The&nbsp;daemon&nbsp;does&nbsp;some&nbsp;simple&nbsp;XML&nbsp;parsing&nbsp;and&nbsp;writes&nbsp;a&nbsp;job&nbsp;script&nbsp;for&nbsp;the&nbsp;job&nbsp;resource&nbsp;manager.&nbsp;The&nbsp;job&nbsp;is&nbsp;submitted&nbsp;to&nbsp;the&nbsp;resource&nbsp;manager&nbsp;and&nbsp;the&nbsp;daemon&nbsp;continually&nbsp;checks&nbsp;for&nbsp;the&nbsp;status&nbsp;of&nbsp;the&nbsp;job&nbsp;with&nbsp;&quot;qstat&quot;&nbsp;and&nbsp;for&nbsp;messages&nbsp;from&nbsp;AMQP.&nbsp;It&nbsp;should&nbsp;return&nbsp;&quot;live&quot;&nbsp;feedback&nbsp;to&nbsp;the&nbsp;user&nbsp;and&nbsp;write&nbsp;to&nbsp;a&nbsp;log.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Twisted&nbsp;has&nbsp;a&nbsp;built-in&nbsp;programmable&nbsp;web&nbsp;server,&nbsp;and&nbsp;a&nbsp;WSGI&nbsp;container&nbsp;is&nbsp;available.&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html&quot;&gt;http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html&lt;/a&gt;&nbsp;is&nbsp;a&nbsp;good&nbsp;starter&nbsp;for&nbsp;web&nbsp;programming&nbsp;with&nbsp;Twisted,&nbsp;as&nbsp;is&nbsp;the&nbsp;general&nbsp;web&nbsp;howto:&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html&quot;&gt;http://twistedmatrix.com/documents/current/web/howto/using-twistedweb.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;many&nbsp;ways&nbsp;to&nbsp;construct&nbsp;what&nbsp;you&nbsp;describe,&nbsp;so&nbsp;it's&nbsp;probably&nbsp;not&nbsp;appropriate&nbsp;to&nbsp;give&nbsp;specific&nbsp;recommendations&nbsp;other&nbsp;than&nbsp;to&nbsp;say&nbsp;what&nbsp;you&nbsp;want&nbsp;is&nbsp;absolutely&nbsp;feasible.&nbsp;It&nbsp;appears&nbsp;you've&nbsp;already&nbsp;got&nbsp;a&nbsp;good&nbsp;handle&nbsp;on&nbsp;what&nbsp;you&nbsp;want&nbsp;to&nbsp;achieve,&nbsp;which&nbsp;should&nbsp;make&nbsp;it&nbsp;easier&nbsp;when&nbsp;it&nbsp;comes&nbsp;to&nbsp;seeking&nbsp;more&nbsp;specific&nbsp;help,&nbsp;etc.&nbsp;from&nbsp;the&nbsp;mailing&nbsp;list&nbsp;once&nbsp;you&nbsp;get&nbsp;your&nbsp;feet&nbsp;wet.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Lucas&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
