<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;On&nbsp;Jul&nbsp;2,&nbsp;2014,&nbsp;at&nbsp;9:26&nbsp;AM,&nbsp;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hello&nbsp;all,&lt;br&gt;&lt;br&gt;twisted.web.http.Request.getClient&nbsp;has&nbsp;a&nbsp;terrible&nbsp;implementation.&nbsp;&nbsp;It&nbsp;does&nbsp;blocking&nbsp;network&nbsp;I/O&nbsp;(DNS).&nbsp;&nbsp;Fortunately&nbsp;it&nbsp;is&nbsp;only&nbsp;used&nbsp;in&nbsp;one&nbsp;place&nbsp;in&nbsp;Twisted&nbsp;-&nbsp;the&nbsp;CGI&nbsp;implementation.&nbsp;&nbsp;Unfortunately&nbsp;this&nbsp;makes&nbsp;the&nbsp;CGI&nbsp;implementation&nbsp;somewhat&nbsp;unsuited&nbsp;for&nbsp;real-world&nbsp;use.&lt;br&gt;&lt;br&gt;`Request.getClient`&nbsp;has&nbsp;always&nbsp;been&nbsp;allowed&nbsp;to&nbsp;return&nbsp;`None`&nbsp;under&nbsp;certain&nbsp;circumstances.&nbsp;&nbsp;I&nbsp;propose&nbsp;making&nbsp;it&nbsp;always&nbsp;return&nbsp;`None`&nbsp;and&nbsp;deprecating&nbsp;it.&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;implemented&nbsp;in&nbsp;the&nbsp;branch&nbsp;linked&nbsp;to&nbsp;&lt;&lt;a&nbsp;href=&quot;https://tm.tl/2252&quot;&gt;https://tm.tl/2252&lt;/a&gt;&gt;.&lt;br&gt;&lt;br&gt;Chris&nbsp;Armstrong&nbsp;suggested&nbsp;that&nbsp;this&nbsp;change&nbsp;might&nbsp;not&nbsp;be&nbsp;strictly&nbsp;keeping&nbsp;with&nbsp;our&nbsp;backwards&nbsp;compatibility&nbsp;policy.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree&nbsp;that&nbsp;this&nbsp;is&nbsp;a&nbsp;troubling&nbsp;area&nbsp;but&nbsp;in&nbsp;general&nbsp;I&nbsp;tend&nbsp;to&nbsp;believe&nbsp;that&nbsp;changes&nbsp;like&nbsp;this&nbsp;are&nbsp;in&nbsp;keeping&nbsp;with&nbsp;our&nbsp;compatibility&nbsp;policy.&nbsp;&nbsp;Changing&nbsp;the&nbsp;signature&nbsp;or&nbsp;the&nbsp;allowed&nbsp;return&nbsp;type&nbsp;of&nbsp;a&nbsp;value&nbsp;(&quot;type&quot;&nbsp;speaking&nbsp;in&nbsp;terms&nbsp;of&nbsp;public&nbsp;features&nbsp;of&nbsp;its&nbsp;interface)&nbsp;should&nbsp;not&nbsp;be&nbsp;allowed.&nbsp;&nbsp;If&nbsp;we&nbsp;already&nbsp;returned&nbsp;None&nbsp;sometimes,&nbsp;then&nbsp;a&nbsp;correct&nbsp;program&nbsp;would&nbsp;already&nbsp;have&nbsp;to&nbsp;deal&nbsp;with&nbsp;None&nbsp;sometimes,&nbsp;so&nbsp;making&nbsp;this&nbsp;change&nbsp;wouldn't&nbsp;break&nbsp;it,&nbsp;per&nbsp;se.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Bringing&nbsp;up&nbsp;such&nbsp;a&nbsp;change&nbsp;on&nbsp;the&nbsp;list&nbsp;is&nbsp;always&nbsp;a&nbsp;good&nbsp;policy,&nbsp;since&nbsp;it&nbsp;gives&nbsp;people&nbsp;a&nbsp;chance&nbsp;to&nbsp;audit&nbsp;their&nbsp;code&nbsp;and&nbsp;look&nbsp;for&nbsp;places&nbsp;where&nbsp;they&nbsp;might&nbsp;have&nbsp;been&nbsp;depending&nbsp;too&nbsp;intimately&nbsp;on&nbsp;accidental&nbsp;features,&nbsp;so&nbsp;by&nbsp;no&nbsp;means&nbsp;take&nbsp;my&nbsp;belief&nbsp;that&nbsp;this&nbsp;is&nbsp;in-policy&nbsp;to&nbsp;mean&nbsp;that&nbsp;we&nbsp;shouldn't&nbsp;broadly&nbsp;discuss&nbsp;changes&nbsp;like&nbsp;this&nbsp;in&nbsp;the&nbsp;future&nbsp;:-).&nbsp;&nbsp;Real,&nbsp;actual,&nbsp;broken&nbsp;code&nbsp;is&nbsp;what&nbsp;the&nbsp;policy&nbsp;strives&nbsp;to&nbsp;prevent,&nbsp;so&nbsp;real&nbsp;world&nbsp;code&nbsp;that&nbsp;broke&nbsp;should&nbsp;usually&nbsp;take&nbsp;precedence.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;suggest&nbsp;that&nbsp;either&nbsp;it&nbsp;is&nbsp;-&nbsp;because&nbsp;`None`&nbsp;was&nbsp;always&nbsp;a&nbsp;possible&nbsp;return&nbsp;value&nbsp;-&nbsp;or&nbsp;that&nbsp;removing&nbsp;the&nbsp;possibility&nbsp;of&nbsp;blocking&nbsp;I/O&nbsp;from&nbsp;applications&nbsp;that&nbsp;are&nbsp;mistakenly&nbsp;using&nbsp;this&nbsp;API&nbsp;makes&nbsp;it&nbsp;worth&nbsp;the&nbsp;not-&nbsp;strictly-compatible&nbsp;change.&lt;br&gt;&lt;br&gt;A&nbsp;minor&nbsp;adjustment&nbsp;might&nbsp;be&nbsp;to&nbsp;make&nbsp;it&nbsp;always&nbsp;return&nbsp;the&nbsp;IP&nbsp;address&nbsp;instead,&nbsp;as&nbsp;this&nbsp;was&nbsp;another&nbsp;behavior&nbsp;it&nbsp;previously&nbsp;had.&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;I&nbsp;think&nbsp;that&nbsp;this&nbsp;adjustment&nbsp;is&nbsp;the&nbsp;best&nbsp;option.&nbsp;&nbsp;IP&nbsp;addresses&nbsp;are&nbsp;&lt;i&gt;mostly&lt;/i&gt;&nbsp;interchangeable&nbsp;with&nbsp;hostnames,&nbsp;so&nbsp;during&nbsp;the&nbsp;transition&nbsp;period&nbsp;while&nbsp;it's&nbsp;being&nbsp;deprecated,&nbsp;even&nbsp;an&nbsp;application&nbsp;relying&nbsp;on&nbsp;this&nbsp;API&nbsp;heavily&nbsp;would&nbsp;at&nbsp;least&nbsp;have&nbsp;an&nbsp;opportunity&nbsp;to&nbsp;keep&nbsp;functionality&nbsp;equivalent&nbsp;during&nbsp;an&nbsp;upgrade.&nbsp;&nbsp;Making&nbsp;it&nbsp;always&nbsp;return&nbsp;None&nbsp;means&nbsp;that&nbsp;a&nbsp;correct&nbsp;application&nbsp;(one&nbsp;which&nbsp;dealt&nbsp;with&nbsp;the&nbsp;None&nbsp;return&nbsp;value),&nbsp;while&nbsp;not&nbsp;becoming&nbsp;crash-with-an-exception&nbsp;buggy,&nbsp;might&nbsp;lose&nbsp;functionality&nbsp;(logging&nbsp;a&nbsp;source&nbsp;IP&nbsp;of&nbsp;&quot;None&quot;&nbsp;all&nbsp;the&nbsp;time,&nbsp;for&nbsp;example,&nbsp;and&nbsp;losing&nbsp;track&nbsp;of&nbsp;an&nbsp;audit&nbsp;log&nbsp;of&nbsp;who&nbsp;is&nbsp;making&nbsp;what&nbsp;changes).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Unbidden,&nbsp;I&nbsp;have&nbsp;some&nbsp;ideas&nbsp;about&nbsp;how&nbsp;we&nbsp;might&nbsp;preserve&nbsp;even&nbsp;_more_&nbsp;of&nbsp;the&nbsp;functionality&nbsp;involving&nbsp;DNS&nbsp;lookups,&nbsp;but&nbsp;more&nbsp;effort&nbsp;than&nbsp;just&nbsp;giving&nbsp;back&nbsp;the&nbsp;IP&nbsp;is&nbsp;probably&nbsp;wasted,&nbsp;so&nbsp;I&nbsp;won't&nbsp;mention&nbsp;them.&nbsp;&nbsp;Let's&nbsp;deprecate&nbsp;the&nbsp;API&nbsp;and&nbsp;move&nbsp;on.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;bringing&nbsp;this&nbsp;up,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
