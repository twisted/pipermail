<tt>
&lt;html&gt;&lt;head&gt;&lt;style&gt;body{font-family:Helvetica,Arial;font-size:13px}&lt;/style&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;&lt;div&nbsp;id=&quot;bloop_customfont&quot;&nbsp;style=&quot;font-family:Helvetica,Arial;font-size:13px;&nbsp;color:&nbsp;rgba(0,0,0,1.0);&nbsp;margin:&nbsp;0px;&nbsp;line-height:&nbsp;auto;&quot;&gt;On&nbsp;July&nbsp;2,&nbsp;2014&nbsp;at&nbsp;4:04:59&nbsp;PM,&nbsp;Glyph&nbsp;Lefkowitz&nbsp;(&lt;a&nbsp;href=&quot;mailto:glyph@twistedmatrix.com&quot;&gt;glyph@twistedmatrix.com&lt;/a&gt;)&nbsp;wrote:&lt;/div&gt;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;clean_bq&quot;&gt;&lt;span&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
&lt;title&gt;&lt;/title&gt;<br>
<br>
<br>
<br>
On&nbsp;Jul&nbsp;2,&nbsp;2014,&nbsp;at&nbsp;9:26&nbsp;AM,&nbsp;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;<br>
wrote:&lt;br&gt;<br>
&lt;div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hello&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
twisted.web.http.Request.getClient&nbsp;has&nbsp;a&nbsp;terrible&nbsp;implementation.<br>
&nbsp;It&nbsp;does&nbsp;blocking&nbsp;network&nbsp;I/O&nbsp;(DNS).&nbsp;&nbsp;Fortunately&nbsp;it&nbsp;is<br>
only&nbsp;used&nbsp;in&nbsp;one&nbsp;place&nbsp;in&nbsp;Twisted&nbsp;-&nbsp;the&nbsp;CGI&nbsp;implementation.<br>
&nbsp;Unfortunately&nbsp;this&nbsp;makes&nbsp;the&nbsp;CGI&nbsp;implementation&nbsp;somewhat<br>
unsuited&nbsp;for&nbsp;real-world&nbsp;use.&lt;br&gt;<br>
&lt;br&gt;<br>
`Request.getClient`&nbsp;has&nbsp;always&nbsp;been&nbsp;allowed&nbsp;to&nbsp;return&nbsp;`None`&nbsp;under<br>
certain&nbsp;circumstances.&nbsp;&nbsp;I&nbsp;propose&nbsp;making&nbsp;it&nbsp;always&nbsp;return<br>
`None`&nbsp;and&nbsp;deprecating&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;implemented&nbsp;in&nbsp;the&nbsp;branch&nbsp;linked&nbsp;to&nbsp;&lt;&lt;a&nbsp;href=&quot;https://tm.tl/2252&quot;&gt;https://tm.tl/2252&lt;/a&gt;&gt;.&lt;br&gt;<br>
&lt;br&gt;<br>
Chris&nbsp;Armstrong&nbsp;suggested&nbsp;that&nbsp;this&nbsp;change&nbsp;might&nbsp;not&nbsp;be&nbsp;strictly<br>
keeping&nbsp;with&nbsp;our&nbsp;backwards&nbsp;compatibility&nbsp;policy.&lt;br&gt;&lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;agree&nbsp;that&nbsp;this&nbsp;is&nbsp;a&nbsp;troubling&nbsp;area&nbsp;but&nbsp;in&nbsp;general&nbsp;I&nbsp;tend&nbsp;to<br>
believe&nbsp;that&nbsp;changes&nbsp;like&nbsp;this&nbsp;are&nbsp;in&nbsp;keeping&nbsp;with&nbsp;our<br>
compatibility&nbsp;policy.&nbsp;&nbsp;Changing&nbsp;the&nbsp;signature&nbsp;or&nbsp;the&nbsp;allowed<br>
return&nbsp;type&nbsp;of&nbsp;a&nbsp;value&nbsp;(&quot;type&quot;&nbsp;speaking&nbsp;in&nbsp;terms&nbsp;of&nbsp;public&nbsp;features<br>
of&nbsp;its&nbsp;interface)&nbsp;should&nbsp;not&nbsp;be&nbsp;allowed.&nbsp;&nbsp;If&nbsp;we&nbsp;already<br>
returned&nbsp;None&nbsp;sometimes,&nbsp;then&nbsp;a&nbsp;correct&nbsp;program&nbsp;would&nbsp;already&nbsp;have<br>
to&nbsp;deal&nbsp;with&nbsp;None&nbsp;sometimes,&nbsp;so&nbsp;making&nbsp;this&nbsp;change&nbsp;wouldn't&nbsp;break<br>
it,&nbsp;per&nbsp;se.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;Bringing&nbsp;up&nbsp;such&nbsp;a&nbsp;change&nbsp;on&nbsp;the&nbsp;list&nbsp;is&nbsp;always&nbsp;a&nbsp;good&nbsp;policy,<br>
since&nbsp;it&nbsp;gives&nbsp;people&nbsp;a&nbsp;chance&nbsp;to&nbsp;audit&nbsp;their&nbsp;code&nbsp;and&nbsp;look&nbsp;for<br>
places&nbsp;where&nbsp;they&nbsp;might&nbsp;have&nbsp;been&nbsp;depending&nbsp;too&nbsp;intimately&nbsp;on<br>
accidental&nbsp;features,&nbsp;so&nbsp;by&nbsp;no&nbsp;means&nbsp;take&nbsp;my&nbsp;belief&nbsp;that&nbsp;this&nbsp;is<br>
in-policy&nbsp;to&nbsp;mean&nbsp;that&nbsp;we&nbsp;shouldn't&nbsp;broadly&nbsp;discuss&nbsp;changes&nbsp;like<br>
this&nbsp;in&nbsp;the&nbsp;future&nbsp;:-).&nbsp;&nbsp;Real,&nbsp;actual,&nbsp;broken&nbsp;code&nbsp;is&nbsp;what&nbsp;the<br>
policy&nbsp;strives&nbsp;to&nbsp;prevent,&nbsp;so&nbsp;real&nbsp;world&nbsp;code&nbsp;that&nbsp;broke&nbsp;should<br>
usually&nbsp;take&nbsp;precedence.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;suggest&nbsp;that&nbsp;either&nbsp;it&nbsp;is&nbsp;-&nbsp;because<br>
`None`&nbsp;was&nbsp;always&nbsp;a&nbsp;possible&nbsp;return&nbsp;value&nbsp;-&nbsp;or&nbsp;that&nbsp;removing&nbsp;the<br>
possibility&nbsp;of&nbsp;blocking&nbsp;I/O&nbsp;from&nbsp;applications&nbsp;that&nbsp;are&nbsp;mistakenly<br>
using&nbsp;this&nbsp;API&nbsp;makes&nbsp;it&nbsp;worth&nbsp;the&nbsp;not-&nbsp;strictly-compatible<br>
change.&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;minor&nbsp;adjustment&nbsp;might&nbsp;be&nbsp;to&nbsp;make&nbsp;it&nbsp;always&nbsp;return&nbsp;the&nbsp;IP&nbsp;address<br>
instead,&nbsp;as&nbsp;this&nbsp;was&nbsp;another&nbsp;behavior&nbsp;it&nbsp;previously<br>
had.&lt;br&gt;&lt;/blockquote&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;div&gt;I&nbsp;think&nbsp;that&nbsp;this&nbsp;adjustment&nbsp;is&nbsp;the&nbsp;best&nbsp;option.&nbsp;&nbsp;IP<br>
addresses&nbsp;are&nbsp;&lt;i&gt;mostly&lt;/i&gt;&nbsp;interchangeable&nbsp;with&nbsp;hostnames,&nbsp;so<br>
during&nbsp;the&nbsp;transition&nbsp;period&nbsp;while&nbsp;it's&nbsp;being&nbsp;deprecated,&nbsp;even&nbsp;an<br>
application&nbsp;relying&nbsp;on&nbsp;this&nbsp;API&nbsp;heavily&nbsp;would&nbsp;at&nbsp;least&nbsp;have&nbsp;an<br>
opportunity&nbsp;to&nbsp;keep&nbsp;functionality&nbsp;equivalent&nbsp;during&nbsp;an&nbsp;upgrade.<br>
&nbsp;Making&nbsp;it&nbsp;always&nbsp;return&nbsp;None&nbsp;means&nbsp;that&nbsp;a&nbsp;correct&nbsp;application<br>
(one&nbsp;which&nbsp;dealt&nbsp;with&nbsp;the&nbsp;None&nbsp;return&nbsp;value),&nbsp;while&nbsp;not&nbsp;becoming<br>
crash-with-an-exception&nbsp;buggy,&nbsp;might&nbsp;lose&nbsp;functionality&nbsp;(logging&nbsp;a<br>
source&nbsp;IP&nbsp;of&nbsp;&quot;None&quot;&nbsp;all&nbsp;the&nbsp;time,&nbsp;for&nbsp;example,&nbsp;and&nbsp;losing&nbsp;track&nbsp;of<br>
an&nbsp;audit&nbsp;log&nbsp;of&nbsp;who&nbsp;is&nbsp;making&nbsp;what&nbsp;changes).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;Unbidden,&nbsp;I&nbsp;have&nbsp;some&nbsp;ideas&nbsp;about&nbsp;how&nbsp;we&nbsp;might&nbsp;preserve&nbsp;even<br>
_more_&nbsp;of&nbsp;the&nbsp;functionality&nbsp;involving&nbsp;DNS&nbsp;lookups,&nbsp;but&nbsp;more&nbsp;effort<br>
than&nbsp;just&nbsp;giving&nbsp;back&nbsp;the&nbsp;IP&nbsp;is&nbsp;probably&nbsp;wasted,&nbsp;so&nbsp;I&nbsp;won't&nbsp;mention<br>
them.&nbsp;&nbsp;Let's&nbsp;deprecate&nbsp;the&nbsp;API&nbsp;and&nbsp;move&nbsp;on.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;Thanks&nbsp;for&nbsp;bringing&nbsp;this&nbsp;up,&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I,&nbsp;too,&nbsp;like&nbsp;the&nbsp;idea&nbsp;of&nbsp;returning&nbsp;the&nbsp;IP&nbsp;address.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;bloop_sign&quot;&nbsp;id=&quot;bloop_sign_1404335331509004032&quot;&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;helvetica,&nbsp;arial;&quot;&gt;--&nbsp;&lt;br&gt;Christopher&nbsp;Armstrong&lt;br&gt;http://twitter.com/radix&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:&nbsp;helvetica,&nbsp;arial;&quot;&gt;http://wordeology.com/&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
