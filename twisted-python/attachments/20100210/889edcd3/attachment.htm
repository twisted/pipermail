<tt>
Hi:&lt;br&gt;&lt;br&gt;Aren&amp;#39;t&nbsp;you&nbsp;adding&nbsp;two&nbsp;readers? &nbsp;One&nbsp;is&nbsp;added&nbsp;in&nbsp;the&nbsp;__init__&nbsp;method&nbsp;of&nbsp;inputFile,&nbsp;the&nbsp;other&nbsp;in&nbsp;the&nbsp;test&nbsp;code.&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;also&nbsp;a&nbsp;newbie&nbsp;so&nbsp;maybe&nbsp;I&amp;#39;m&nbsp;equally&nbsp;confused...&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
On&nbsp;Tue,&nbsp;Feb&nbsp;9,&nbsp;2010&nbsp;at&nbsp;8:47&nbsp;PM,&nbsp;K.&nbsp;Richard&nbsp;Pixley&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:rich@noir.com&quot;&gt;rich@noir.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&nbsp;bgcolor=&quot;#ffffff&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
I&amp;#39;m&nbsp;confused&nbsp;be&nbsp;the&nbsp;response&nbsp;I&nbsp;get&nbsp;to&nbsp;the&nbsp;attached&nbsp;program.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;a&nbsp;nutshell,&nbsp;I&amp;#39;m&nbsp;building&nbsp;a&nbsp;reader,&nbsp;attaching&nbsp;it&nbsp;with&nbsp;addReader,<br>
later&nbsp;removing&nbsp;it&nbsp;with&nbsp;removeReader. &nbsp;And&nbsp;I&amp;#39;m&nbsp;getting&nbsp;this:&lt;br&gt;<br>
&lt;blockquote&gt;&lt;tt&gt;time&nbsp;python&nbsp;test_reactor.py&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;tt&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/tt&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;tt&gt;Failure:&nbsp;twisted.internet.error.ConnectionFdescWentAway:&nbsp;Uh:<br>
Filedescriptor&nbsp;went&nbsp;away.&lt;/tt&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
Which&nbsp;seems&nbsp;to&nbsp;be&nbsp;telling&nbsp;me&nbsp;that&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;as&nbsp;much&nbsp;yet&nbsp;as&nbsp;I&amp;#39;d&nbsp;hoped.&lt;br&gt;<br>
&lt;br&gt;<br>
Why&nbsp;would&nbsp;the&nbsp;reactor&nbsp;care&nbsp;about&nbsp;a&nbsp;closed&nbsp;file&nbsp;descriptor&nbsp;that&nbsp;isn&amp;#39;t<br>
even&nbsp;in&nbsp;it&amp;#39;s&nbsp;interest&nbsp;set?&lt;br&gt;<br>
&lt;br&gt;<br>
--rich&lt;br&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;br&gt;#!/usr/bin/env&nbsp;python&lt;br&gt;<br>
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-&lt;br&gt;<br>
&lt;br&gt;<br>
import&nbsp;os&lt;br&gt;<br>
&lt;br&gt;<br>
from&nbsp;zope.interface&nbsp;import&nbsp;implements&lt;br&gt;<br>
from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;<br>
from&nbsp;twisted.internet.interfaces&nbsp;import&nbsp;IReadDescriptor&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;inputFile(object):&lt;br&gt;<br>
&nbsp; &nbsp; implements(IReadDescriptor)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;__init__(self,&nbsp;filename):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.filename&nbsp;=&nbsp;filename&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.filedes&nbsp;=&nbsp;os.open(filename,&nbsp;os.O_RDONLY&nbsp;|&nbsp;os.O_NONBLOCK)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; reactor.addReader(self)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;fileno(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;self.filedes&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;connectionLost(self,&nbsp;reason):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; raise&nbsp;reason&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;logPrefix(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;&amp;#39;inputFile&amp;#39;&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;doRead(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; reactor.removeReader(self)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; os.close(self.filedes)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.filedes&nbsp;=&nbsp;-1&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; reactor.stop()&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;__name__&nbsp;==&nbsp;&amp;#39;__main__&amp;#39;:&lt;br&gt;<br>
&nbsp; &nbsp; r&nbsp;=&nbsp;inputFile(&amp;#39;/etc/group&amp;#39;)&lt;br&gt;<br>
&nbsp; &nbsp; reactor.addReader(r)&lt;br&gt;<br>
&nbsp; &nbsp; reactor.run()&lt;br&gt;<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
