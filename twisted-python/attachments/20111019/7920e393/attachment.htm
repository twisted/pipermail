<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Oct&nbsp;19,&nbsp;2011,&nbsp;at&nbsp;1:22&nbsp;PM,&nbsp;Antoine&nbsp;Pitrou&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Wed,&nbsp;19&nbsp;Oct&nbsp;2011&nbsp;13:10:22&nbsp;-0400&lt;br&gt;&quot;Itamar&nbsp;Turner-Trauring&quot;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:itamar@itamarst.org&quot;&gt;itamar@itamarst.org&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;For&nbsp;example,&nbsp;I&nbsp;could&nbsp;post&nbsp;the&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;following&nbsp;patch&nbsp;for&nbsp;t.p.failure,&nbsp;but&nbsp;would&nbsp;you&nbsp;accept&nbsp;it?&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;@@&nbsp;-464,6&nbsp;+468,14&nbsp;@@&nbsp;class&nbsp;Failure:&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&nbsp;added&nbsp;2003-06-23.&nbsp;See&nbsp;comment&nbsp;above&nbsp;in&nbsp;__init__&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c['tb']&nbsp;=&nbsp;None&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try:&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&nbsp;Clear&nbsp;other&nbsp;references&nbsp;held&nbsp;by&nbsp;exception&nbsp;objects&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c['value'].__cause__&nbsp;=&nbsp;None&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c['value'].__context__&nbsp;=&nbsp;None&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;c['value'].__traceback__&nbsp;=&nbsp;None&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;except&nbsp;AttributeError:&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pass&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;+&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;self.stack&nbsp;is&nbsp;not&nbsp;None:&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&nbsp;XXX:&nbsp;This&nbsp;is&nbsp;a&nbsp;band-aid.&nbsp;&amp;nbsp;I&nbsp;can't&nbsp;figure&nbsp;out&nbsp;where&nbsp;these&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&nbsp;(failure.stack&nbsp;is&nbsp;None)&nbsp;instances&nbsp;are&nbsp;coming&nbsp;from.&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;That&nbsp;sort&nbsp;of&nbsp;patch&nbsp;would&nbsp;probably&nbsp;be&nbsp;fine,&nbsp;though&nbsp;I'd&nbsp;much&nbsp;rather&nbsp;that&nbsp;be&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;inside&nbsp;an&nbsp;if&nbsp;statement&nbsp;that&nbsp;checked&nbsp;the&nbsp;Python&nbsp;version&nbsp;rather&nbsp;than&nbsp;inside&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;a&nbsp;try/except.&nbsp;Faster,&nbsp;and&nbsp;much&nbsp;clearer&nbsp;what's&nbsp;going&nbsp;on.&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;The&nbsp;try/except&nbsp;is&nbsp;necessary&nbsp;because&nbsp;Failures&nbsp;sometimes&nbsp;wrap&nbsp;something&lt;br&gt;else&nbsp;than&nbsp;an&nbsp;exception,&nbsp;and&nbsp;where&nbsp;setting&nbsp;an&nbsp;arbitrary&nbsp;attribute&nbsp;is&nbsp;not&lt;br&gt;allowed.&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;patch&nbsp;would&nbsp;definitely&nbsp;need&nbsp;to&nbsp;be&nbsp;accepted&nbsp;if&nbsp;you&nbsp;expect&nbsp;Twisted&nbsp;to&nbsp;eventually&nbsp;support&nbsp;Python&nbsp;3.&nbsp;&amp;nbsp;Why&nbsp;do&nbsp;you&nbsp;believe&nbsp;it&nbsp;wouldn't&nbsp;be&nbsp;accepted?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Of&nbsp;course&nbsp;it&nbsp;would&nbsp;need&nbsp;to&nbsp;have&nbsp;some&nbsp;test&nbsp;coverage&nbsp;-&nbsp;but&nbsp;a&nbsp;first&nbsp;step&nbsp;there&nbsp;is&nbsp;to&nbsp;have&nbsp;a&nbsp;buildbot&nbsp;actually&nbsp;running&nbsp;the&nbsp;tests&nbsp;on&nbsp;py3k.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also:&nbsp;if&nbsp;Failures&nbsp;wrap&nbsp;something&nbsp;other&nbsp;than&nbsp;an&nbsp;Exception,&nbsp;that's&nbsp;a&nbsp;bug.&nbsp;&amp;nbsp;in&nbsp;Failure.__doc__,&nbsp;it&nbsp;says:&nbsp;&quot;@ivar&nbsp;value:&nbsp;The&nbsp;exception&nbsp;instance&nbsp;responsible&nbsp;for&nbsp;this&nbsp;failure.&quot;&nbsp;&amp;nbsp;If&nbsp;there&nbsp;are&nbsp;cases&nbsp;where&nbsp;non-Exceptions&nbsp;are&nbsp;passed&nbsp;here,&nbsp;then&nbsp;perhaps&nbsp;that&nbsp;behavior&nbsp;should&nbsp;be&nbsp;deprecated&nbsp;before&nbsp;it&nbsp;raises&nbsp;an&nbsp;exception,&nbsp;but&nbsp;&lt;i&gt;something&lt;/i&gt;&amp;nbsp;needs&nbsp;to&nbsp;be&nbsp;adjusted&nbsp;so&nbsp;that&nbsp;the&nbsp;documentation&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the&nbsp;implementation.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
