<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Tim,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;think&nbsp;you&nbsp;need&nbsp;to&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;an&nbsp;instance&nbsp;of&nbsp;your&nbsp;MyClientProtocol.&nbsp;Your&nbsp;example&nbsp;does&nbsp;not&nbsp;show&nbsp;how&nbsp;you&nbsp;actually&nbsp;connected&nbsp;your&nbsp;bot&nbsp;to&nbsp;a&nbsp;server&nbsp;but&nbsp;I&nbsp;assume&nbsp;it&nbsp;follows&nbsp;on&nbsp;the&nbsp;call&nbsp;to&nbsp;load_config&nbsp;on&nbsp;startService.&nbsp;One&nbsp;way&nbsp;to&nbsp;do&nbsp;this:&lt;br&gt;&lt;br&gt;&lt;/div&gt;class&nbsp;MyService(Service):&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;def&nbsp;__init__(self):&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;self._client&nbsp;=&nbsp;None&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;def&nbsp;clientConnected(self,&nbsp;prot):&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;#&nbsp;set&nbsp;reference&nbsp;to&nbsp;the&nbsp;protocol&nbsp;instance&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;self._client&nbsp;=&nbsp;prot&lt;br&gt;&lt;/div&gt; &nbsp;&lt;br&gt; &nbsp;def&nbsp;startService():&lt;br&gt;   &nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;self&lt;/span&gt;.config&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;=&lt;/span&gt;&nbsp;load_config(config_file)&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;#&nbsp;connect&nbsp;bot&nbsp;to&nbsp;the&nbsp;server&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;f&nbsp;=&nbsp;MyClientFactory(self)&lt;/div&gt;   &nbsp;reactor.connectTCP(self.config.host,&nbsp;self.config.port,&nbsp;f)&lt;br&gt;&lt;br&gt;&lt;/div&gt; &nbsp;def&nbsp;sendMessage(self,&nbsp;msg):&lt;br&gt;&lt;/div&gt;   &nbsp;if&nbsp;self._client:&lt;br&gt;&lt;/div&gt;     &nbsp;self._client.sendLine(msg)&lt;br&gt;&lt;br&gt;&lt;/div&gt;Client&nbsp;reference&nbsp;can&nbsp;be&nbsp;set&nbsp;from&nbsp;the&nbsp;protocol&nbsp;instance&nbsp;when&nbsp;connection&nbsp;has&nbsp;been&nbsp;made:&lt;br&gt;&lt;br&gt;&lt;span&nbsp;class=&quot;&quot;&gt;class&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;MyClientProtocol&lt;/span&gt;(&lt;span&nbsp;class=&quot;&quot;&gt;protocol&lt;/span&gt;.&lt;span&nbsp;class=&quot;&quot;&gt;Protocol&lt;/span&gt;):&lt;br&gt; &nbsp;#&lt;br&gt;&lt;/div&gt; &nbsp;def&nbsp;connectionMade(self):&lt;br&gt;&lt;/div&gt;    &nbsp;self.factory.service.clientConnected(self)&lt;br&gt;&lt;br&gt;&lt;/div&gt;HTH,&lt;br&gt;&lt;/div&gt;Enrique&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;17,&nbsp;2016&nbsp;at&nbsp;8:24&nbsp;AM,&nbsp;Tim&nbsp;Hughes&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:thughes@thegoldfish.org&quot;&nbsp;target=&quot;_blank&quot;&gt;thughes@thegoldfish.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Woops&nbsp;:&nbsp;accidentally&nbsp;sent&nbsp;too&nbsp;early&nbsp;&lt;br&gt;&lt;/p&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all,&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;am&nbsp;looking&nbsp;into&nbsp;twisted&nbsp;for&nbsp;writing&nbsp;a&nbsp;client&nbsp;application&nbsp;(bot&nbsp;style)&nbsp;and&nbsp;most&nbsp;of&nbsp;the&nbsp;examples&nbsp;I&nbsp;find&nbsp;are&nbsp;for&nbsp;server&nbsp;style&nbsp;applications.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Looking&nbsp;at&nbsp;the&nbsp;finger&nbsp;example&nbsp;and&lt;a&nbsp;href=&quot;https://github.com/jdavisp3/twisted-intro/blob/master/twisted-server-3/fastpoetry.py&quot;&nbsp;target=&quot;_blank&quot;&gt;&nbsp;https://github.com/jdavisp3/twisted-intro/blob/master/twisted-server-3/fastpoetry.py&lt;/a&gt;&nbsp;I&nbsp;am&nbsp;just&nbsp;wondering&nbsp;where&nbsp;is&nbsp;best&nbsp;to&nbsp;put&nbsp;my&nbsp;application&nbsp;logic.&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;protocol&nbsp;is&nbsp;basically&nbsp;a&nbsp;ascii&nbsp;line&nbsp;style&nbsp;application &nbsp;&lt;br&gt;&lt;/p&gt;<br>
&lt;/span&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&gt;It&nbsp;feels&nbsp;to&nbsp;me&nbsp;that&nbsp;my&nbsp;Service&nbsp;should&nbsp;be&nbsp;the&nbsp;main&nbsp;business&nbsp;logic &nbsp;and&nbsp;the&nbsp;protocol&nbsp;should&nbsp;just&nbsp;be&nbsp;a&nbsp;simple&nbsp;send/receive&nbsp;something&nbsp;like&nbsp;this&nbsp;gist&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;&lt;a&nbsp;href=&quot;https://gist.github.com/timhughes/f85da0c2d88ecb4ab5e3#file-twisted_application_client-py-L36&quot;&nbsp;target=&quot;_blank&quot;&gt;https://gist.github.com/timhughes/f85da0c2d88ecb4ab5e3#file-twisted_application_client-py-L36&lt;/a&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;was&nbsp;then&nbsp;planning&nbsp;on&nbsp;writing&nbsp;web&nbsp;interface&nbsp;that&nbsp;interacted&nbsp;with&nbsp;the&nbsp;service&nbsp;to&nbsp;send&nbsp;messages&nbsp;and&nbsp;display&nbsp;the&nbsp;response.&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;My&nbsp;main&nbsp;issue&nbsp;here&nbsp;is&nbsp;how&nbsp;to&nbsp;send&nbsp;the&nbsp;message&nbsp;from&nbsp;the&nbsp;service&nbsp;via&nbsp;the&nbsp;protocol.&nbsp;I&nbsp;cannot&nbsp;find&nbsp;any&nbsp;good&nbsp;examples&nbsp;of&nbsp;this&nbsp;and&nbsp;am&nbsp;beginning&nbsp;to&nbsp;think&nbsp;I&nbsp;am&nbsp;conceptualising&nbsp;incorrectly&nbsp;or&nbsp;over&nbsp;thinking&nbsp;it.&nbsp;If&nbsp;anyone&nbsp;can&nbsp;point&nbsp;me&nbsp;to&nbsp;some&nbsp;examples&nbsp;or&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right&nbsp;direction&nbsp;it&nbsp;would&nbsp;be&nbsp;awesome.&nbsp;Hopefully&nbsp;my&nbsp;example&nbsp;makes&nbsp;sense.&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Cheers&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Tim&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Tim&nbsp;Hughes&lt;br&gt;<br>
mailto:&lt;a&nbsp;href=&quot;mailto:thughes@thegoldfish.org&quot;&nbsp;target=&quot;_blank&quot;&gt;thughes@thegoldfish.org&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&lt;div&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Hi&nbsp;all,&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;looking&nbsp;into&nbsp;twisted&nbsp;for&nbsp;writing&nbsp;a&nbsp;client&nbsp;application&nbsp;(bot&nbsp;style)&nbsp;and&nbsp;most&nbsp;of&nbsp;the&nbsp;examples&nbsp;I&nbsp;find&nbsp;are&nbsp;for&nbsp;server&nbsp;style&nbsp;applications.&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Looking&nbsp;at&nbsp;the&nbsp;finger&nbsp;example&nbsp;and&nbsp;&lt;a&nbsp;href=&quot;https://github.com/jdavisp3/twisted-intro/blob/master/twisted-server-3/fastpoetry.py&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/jdavisp3/twisted-intro/blob/master/twisted-server-3/fastpoetry.py&lt;/a&gt;&nbsp;I&nbsp;am&nbsp;just&nbsp;wondering&nbsp;where&nbsp;is&nbsp;best&nbsp;to&nbsp;put&nbsp;my&nbsp;application&nbsp;logic.&lt;br&gt;&lt;br&gt;&lt;br&gt;The&nbsp;protocol&nbsp;is&nbsp;basically&nbsp;a&nbsp;ascii&nbsp;line&nbsp;style&nbsp;application &nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;It&nbsp;feels&nbsp;to&nbsp;me&nbsp;that&nbsp;my&nbsp;Service&nbsp;should&nbsp;be&nbsp;the&nbsp;core&nbsp;and&nbsp;the&nbsp;protocol&nbsp;should&nbsp;just&nbsp;be&nbsp;something&nbsp;like&nbsp;&lt;br&gt;&lt;br&gt;def&nbsp;send_mesage(message):&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&gt;Tim&nbsp;Hughes&lt;br&gt;mailto:&lt;a&nbsp;href=&quot;mailto:thughes@thegoldfish.org&quot;&nbsp;target=&quot;_blank&quot;&gt;thughes@thegoldfish.org&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
