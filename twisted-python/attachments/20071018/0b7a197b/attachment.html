<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--&nbsp;DIV&nbsp;{margin:0px;}&nbsp;--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif;font-size:12pt&quot;&gt;&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;Thanks.&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;So&nbsp;it&nbsp;seems&nbsp;I&nbsp;have&nbsp;to&nbsp;write&nbsp;my&nbsp;own&nbsp;code,&nbsp;there&nbsp;in&nbsp;nothing&nbsp;like&nbsp;I&nbsp;can&nbsp;set&nbsp;some&nbsp;flag.&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;So&nbsp;if&nbsp;that&nbsp;is&nbsp;the&nbsp;case&nbsp;shouldn't&nbsp;I&nbsp;just&nbsp;be&nbsp;gzipping&nbsp;and&nbsp;unzipping&nbsp;data&nbsp;write&nbsp;and&nbsp;read&nbsp;to&nbsp;request&nbsp;object.&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;rgds&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;anurag&lt;BR&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif&quot;&gt;-----&nbsp;Original&nbsp;Message&nbsp;----&lt;BR&gt;From:&nbsp;David&nbsp;Bolen&nbsp;&lt;db3l.net@gmail.com&gt;&lt;BR&gt;To:&nbsp;twisted-python@twistedmatrix.com&lt;BR&gt;Sent:&nbsp;Friday,&nbsp;October&nbsp;19,&nbsp;2007&nbsp;1:02:21&nbsp;AM&lt;BR&gt;Subject:&nbsp;[Twisted-Python]&nbsp;Re:&nbsp;Content&nbsp;Encoding&nbsp;:&nbsp;gzip&nbsp;?&lt;BR&gt;&lt;BR&gt;<br>
&lt;DIV&gt;anurag&nbsp;uniyal&nbsp;&lt;anuraguniyal@yahoo.com&gt;&nbsp;writes:&lt;BR&gt;&lt;BR&gt;&gt;&nbsp;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;send&nbsp;and&nbsp;recieve&nbsp;compressed&nbsp;content&nbsp;using&nbsp;twisted.web?&lt;BR&gt;&gt;&lt;BR&gt;&gt;&nbsp;I&nbsp;have&nbsp;set&nbsp;Accept-encoding&nbsp;to&nbsp;gzip&nbsp;but&nbsp;it&nbsp;doesn't&nbsp;make&nbsp;any&nbsp;difference.&lt;BR&gt;&gt;&nbsp;Will&nbsp;I&nbsp;have&nbsp;to&nbsp;cater&nbsp;for&nbsp;this&nbsp;myself?&lt;BR&gt;&lt;BR&gt;Yes,&nbsp;in&nbsp;twisted.web.&nbsp;&nbsp;In&nbsp;twisted.web2,&nbsp;there's&nbsp;a&nbsp;filter&nbsp;that&nbsp;supports&nbsp;it.&lt;BR&gt;&lt;BR&gt;Here's&nbsp;a&nbsp;small&nbsp;wrapper&nbsp;class&nbsp;I&nbsp;wrote&nbsp;recently&nbsp;that&nbsp;I've&nbsp;used&nbsp;to&nbsp;handle&lt;BR&gt;this&nbsp;in&nbsp;twisted.web,&nbsp;with&nbsp;the&nbsp;goal&nbsp;of&nbsp;minimal&nbsp;changes&nbsp;to&nbsp;existing&lt;BR&gt;resource&nbsp;code.&nbsp;&nbsp;I&nbsp;use&nbsp;it&nbsp;by&nbsp;noticing,&nbsp;in&nbsp;the&nbsp;original&nbsp;request&nbsp;handler,&lt;BR&gt;the&nbsp;ability&nbsp;to&nbsp;handle&nbsp;gzip&nbsp;encodings,&nbsp;and&nbsp;then&nbsp;wrap&nbsp;the&nbsp;original&lt;BR&gt;request&nbsp;in&nbsp;this&nbsp;class&nbsp;(since&nbsp;there's&nbsp;no&nbsp;built-in&nbsp;filtering&nbsp;of&nbsp;the&lt;BR&gt;output&nbsp;stream&nbsp;in&nbsp;twisted.web).&lt;BR&gt;&lt;BR&gt;It's&nbsp;worked&nbsp;fine&nbsp;in&nbsp;my&nbsp;tests&nbsp;to&nbsp;date,&nbsp;and&nbsp;in&nbsp;limited&nbsp;production&nbsp;use,&lt;BR&gt;but&nbsp;to&nbsp;be&nbsp;honest&nbsp;it&nbsp;hasn't&nbsp;seen&nbsp;large&nbsp;scale,&nbsp;long&nbsp;term&nbsp;use&nbsp;because&nbsp;my&lt;BR&gt;original&nbsp;use&nbsp;case&nbsp;only&nbsp;yielded&nbsp;~15%&nbsp;compression<br>
&nbsp;(multimedia&nbsp;files)&nbsp;and&lt;BR&gt;using&nbsp;this&nbsp;negates&nbsp;the&nbsp;ability&nbsp;to&nbsp;know&nbsp;the&nbsp;full&nbsp;length&nbsp;in&nbsp;advance,&lt;BR&gt;thus&nbsp;clients&nbsp;can't&nbsp;give&nbsp;projected&nbsp;download&nbsp;times.&nbsp;&nbsp;(My&nbsp;files&nbsp;are&nbsp;large&lt;BR&gt;enough&nbsp;that&nbsp;compressing&nbsp;twice&nbsp;is&nbsp;high&nbsp;overhead,&nbsp;and&nbsp;it&nbsp;wouldn't&nbsp;play&lt;BR&gt;well&nbsp;with&nbsp;the&nbsp;wrapper&nbsp;approach&nbsp;anyway).&lt;BR&gt;&lt;BR&gt;In&nbsp;any&nbsp;event,&nbsp;hopefully&nbsp;it'll&nbsp;be&nbsp;a&nbsp;useful&nbsp;starting&nbsp;point&nbsp;for&nbsp;you.&lt;BR&gt;&lt;BR&gt;Here's&nbsp;the&nbsp;wrapper:&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&lt;BR&gt;&lt;BR&gt;import&nbsp;struct&lt;BR&gt;import&nbsp;zlib&lt;BR&gt;&lt;BR&gt;class&nbsp;GzipRequest(object):&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;Wrapper&nbsp;for&nbsp;a&nbsp;request&nbsp;that&nbsp;applies&nbsp;a&nbsp;gzip&nbsp;content&nbsp;encoding&quot;&quot;&quot;&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;request,&nbsp;compressLevel=6):&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request&nbsp;=&nbsp;request&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.setHeader('Content-Encoding',<br>
&nbsp;'gzip')&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Borrowed&nbsp;from&nbsp;twisted.web2&nbsp;gzip&nbsp;filter&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.compress&nbsp;=&nbsp;zlib.compressobj(compressLevel,&nbsp;zlib.DEFLATED,&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-zlib.MAX_WBITS,&nbsp;zlib.DEF_MEM_LEVEL,0)&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__getattr__(self,&nbsp;attr):&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'request'&nbsp;in&nbsp;self.__dict__:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;getattr(self.request,&nbsp;attr)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;AttributeError,&nbsp;attr&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__setattr__(self,&nbsp;attr,<br>
&nbsp;value):&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'request'&nbsp;in&nbsp;self.__dict__:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;setattr(self.request,&nbsp;attr,&nbsp;value)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.__dict__[attr]&nbsp;=&nbsp;value&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;write(self,&nbsp;data):&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;self.request.startedWriting:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.crc&nbsp;=&nbsp;zlib.crc32('')&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.size&nbsp;=&nbsp;self.csize&nbsp;=&nbsp;0&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;XXX:&nbsp;Zap&nbsp;any&nbsp;length&nbsp;for&nbsp;now&nbsp;since&nbsp;we&nbsp;don't&nbsp;know&nbsp;final&nbsp;size&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;'content-length'&nbsp;in<br>
&nbsp;self.request.headers:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;del&nbsp;self.request.headers['content-length']&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Borrow&nbsp;header&nbsp;information&nbsp;from&nbsp;twisted.web2&nbsp;gzip&nbsp;filter&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.write('\037\213\010\000'&nbsp;'\0\0\0\0'&nbsp;'\002\377')&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.crc&nbsp;=&nbsp;zlib.crc32(data,&nbsp;self.crc)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.size&nbsp;+=&nbsp;len(data)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cdata&nbsp;=&nbsp;self.compress.compress(data)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.csize&nbsp;+=&nbsp;len(cdata)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if<br>
&nbsp;cdata:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.write(cdata)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elif&nbsp;self.request.producer:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Simulate&nbsp;another&nbsp;pull&nbsp;even&nbsp;though&nbsp;it&nbsp;hasn't&nbsp;really&nbsp;made&nbsp;it&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;out&nbsp;to&nbsp;the&nbsp;consumer&nbsp;yet.&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.producer.resumeProducing()&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;finish(self):&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remain&nbsp;=&nbsp;self.compress.flush()&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.csize&nbsp;+=&nbsp;len(remain)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if<br>
&nbsp;remain:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.write(remain)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.write(struct.pack('&lt;LL',&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.crc&nbsp;&amp;&nbsp;0xFFFFFFFFL,&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.size&nbsp;&amp;&nbsp;0xFFFFFFFFL))&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.request.finish()&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&nbsp;-&lt;BR&gt;&lt;BR&gt;and&nbsp;here's&nbsp;a&nbsp;sample&nbsp;of&nbsp;using<br>
&nbsp;it.&nbsp;&nbsp;This&nbsp;code&nbsp;is&nbsp;from&nbsp;one&nbsp;of&nbsp;my&nbsp;Resource&lt;BR&gt;objects&nbsp;-&nbsp;if&nbsp;I&nbsp;were&nbsp;to&nbsp;use&nbsp;it&nbsp;more&nbsp;generally&nbsp;in&nbsp;my&nbsp;site&nbsp;I'd&nbsp;extract&nbsp;that&lt;BR&gt;into&nbsp;a&nbsp;mix-in&nbsp;class&nbsp;of&nbsp;some&nbsp;sort&nbsp;-&nbsp;currently&nbsp;there&nbsp;was&nbsp;only&nbsp;one&nbsp;specific&lt;BR&gt;resource&nbsp;(the&nbsp;multimedia&nbsp;files)&nbsp;I&nbsp;wanted&nbsp;to&nbsp;support&nbsp;it&nbsp;for:&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;render_GET(self,&nbsp;request):&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;(...&nbsp;argument&nbsp;validation&nbsp;...)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accept_encoding&nbsp;=&nbsp;request.getHeader('accept-encoding')&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;accept_encoding:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodings&nbsp;=&nbsp;accept_encoding.split(',')&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;encoding&nbsp;in&nbsp;encodings:&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=<br>
&nbsp;encoding.split(';')[0].strip()&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;name&nbsp;==&nbsp;'gzip':&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request&nbsp;=&nbsp;GzipRequest(request)&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&lt;BR&gt;&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;At&nbsp;this&nbsp;point,&nbsp;use&nbsp;'request'&nbsp;as&nbsp;normal&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;--&nbsp;David&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;_______________________________________________&lt;BR&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;BR&gt;Twisted-Python@twistedmatrix.com&lt;BR&gt;&lt;A&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=_blank&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;courier,&nbsp;monaco,&nbsp;monospace,&nbsp;sans-serif&quot;&gt;&lt;BR&gt;&lt;/DIV&gt;&lt;/div&gt;&lt;br&gt;__________________________________________________&lt;br&gt;Do&nbsp;You&nbsp;Yahoo!?&lt;br&gt;Tired&nbsp;of&nbsp;spam?&nbsp;&nbsp;Yahoo!&nbsp;Mail&nbsp;has&nbsp;the&nbsp;best&nbsp;spam&nbsp;protection&nbsp;around&nbsp;&lt;br&gt;http://mail.yahoo.com&nbsp;&lt;/body&gt;&lt;/html&gt;
</tt>
