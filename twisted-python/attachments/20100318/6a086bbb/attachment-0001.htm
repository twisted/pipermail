<tt>
I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;get&nbsp;SQL&nbsp;Server&nbsp;2005&nbsp;to&nbsp;CREATE&nbsp;DATABASE&nbsp;using&nbsp;twisted.&nbsp;&nbsp;However,&nbsp;SQL&nbsp;Server&nbsp;won&amp;#39;t&nbsp;allow&nbsp;you&nbsp;to&nbsp;run&nbsp;CREATE&nbsp;DATABASE&nbsp;within&nbsp;a&nbsp;transaction&nbsp;(apparently,&nbsp;it&amp;#39;s&nbsp;not&nbsp;something&nbsp;sql&nbsp;server&nbsp;can&nbsp;roll&nbsp;back,&nbsp;which&nbsp;seems&nbsp;sensible).&nbsp;&nbsp;Which&nbsp;means&nbsp;that&nbsp;the&nbsp;following&nbsp;code&nbsp;results&nbsp;in&nbsp;an&nbsp;error.&nbsp;&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;turn&nbsp;transactions&nbsp;off&nbsp;for&nbsp;a&nbsp;query?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;@defer.inlineCallbacks&lt;br&nbsp;/&gt;def&nbsp;test_simple_create():&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;try:&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password&nbsp;=&nbsp;&amp;quot;xxx&amp;quot;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection_string&nbsp;=&nbsp;&amp;quot;Driver={SQL&nbsp;Native&nbsp;Client};&nbsp;Server=(local);&nbsp;UID=sa;&nbsp;PWD=%s;&amp;quot;&nbsp;%&nbsp;password&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db&nbsp;=&nbsp;adbapi.ConnectionPool(&amp;quot;pyodbc&amp;quot;,&nbsp;connection_string,&nbsp;cp_noisy=True)&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd&nbsp;=&nbsp;&amp;quot;&amp;quot;&amp;quot;CREATE&nbsp;DATABASE&nbsp;atest&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ON&nbsp;(NAME=atest,&nbsp;FILENAME=&amp;#39;c:\temp\atest&amp;#39;,&nbsp;SIZE=64MB)&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOG&nbsp;ON&nbsp;(NAME=atestlog,&nbsp;FILENAME=&amp;#39;c:\temp\atestlog&amp;#39;,&nbsp;SIZE=64MB)&amp;quot;&amp;quot;&amp;quot;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;db.runOperation(cmd)&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;Exception,&nbsp;e:&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;e&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;finally:&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.close()&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reactor.stop()&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;/&gt;if&nbsp;__name__&nbsp;==&nbsp;&amp;quot;__main__&amp;quot;:&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;twisted.python&nbsp;import&nbsp;log&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;sys&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;test_simple_create()&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;log.startLogging(sys.stdout)&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;reactor.run()&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;===&lt;br&nbsp;/&gt;2010-03-18&nbsp;09:28:45-0500&nbsp;[-]&nbsp;Log&nbsp;opened.&lt;br&nbsp;/&gt;2010-03-18&nbsp;09:28:45-0500&nbsp;[-]&nbsp;adbapi&nbsp;connecting:&nbsp;pyodbc&nbsp;(&amp;#39;Driver={SQL&nbsp;Native&nbsp;Client};&nbsp;Server=(local);&nbsp;UID=sa;&nbsp;PWD=xxx;&amp;#39;,)&lt;br&nbsp;/&gt;2010-03-18&nbsp;09:28:45-0500&nbsp;[-]&nbsp;(&amp;#39;42000&amp;#39;,&nbsp;&amp;#39;[42000]&nbsp;[Microsoft][SQL&nbsp;Native&nbsp;Client][SQL&nbsp;Server]CREATE&nbsp;DATABASE&nbsp;statement&nbsp;not&nbsp;allowed&nbsp;within&nbsp;multi-statement&nbsp;transaction.&nbsp;(226)&nbsp;(SQLExecDirectW)&amp;#39;)&lt;br&nbsp;/&gt;2010-03-18&nbsp;09:28:45-0500&nbsp;[-]&nbsp;adbapi&nbsp;closing:&nbsp;pyodbc&lt;br&nbsp;/&gt;2010-03-18&nbsp;09:28:45-0500&nbsp;[-]&nbsp;Main&nbsp;loop&nbsp;terminated.&lt;br&nbsp;/&gt;2010-03-18&nbsp;09:28:45-0500&nbsp;[-]
</tt>
