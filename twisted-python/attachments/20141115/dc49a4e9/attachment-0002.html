<tt>
&lt;!DOCTYPE&nbsp;html&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;&lt;div&gt;On&nbsp;Fri,&nbsp;14&nbsp;Nov&nbsp;2014,&nbsp;at&nbsp;20:36,&nbsp;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;On&nbsp;05:38&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:peter.westlake@pobox.com&quot;&gt;peter.westlake@pobox.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;Here&nbsp;is&nbsp;some&nbsp;highly&nbsp;suspicious-looking&nbsp;output&nbsp;from&nbsp;strace:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;sendto(5,&nbsp;&quot;\0\4_ask\0\004867c\0\10_command\0\tLogOutpu&quot;...,&nbsp;343,&nbsp;0,&nbsp;NULL,&nbsp;0)&nbsp;=&nbsp;343&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;recvfrom(5,&nbsp;&gt;&nbsp;&gt;&quot;\0\7_answer\0\004867c\0\6status\0\4True\0\0&quot;,&nbsp;65536,&nbsp;0,&nbsp;NULL,&nbsp;NULL)&nbsp;=31&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;sendto(5,&nbsp;&quot;\0\4_ask\0\004867d\0\10_command\0\tLogOutpu&quot;...,&nbsp;183,&nbsp;0,&nbsp;NULL,&nbsp;0)&nbsp;=&nbsp;183&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;sendto(5,&nbsp;&quot;\0\4_ask\0\004867e\0\10_command\0\4Ping\0\0&quot;,&nbsp;30,&nbsp;0,&nbsp;NULL,&nbsp;0)&nbsp;=&nbsp;30&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;recvfrom(5,&nbsp;0x7fec3005c6d4,&nbsp;65536,&nbsp;0,&nbsp;0,&nbsp;0)&nbsp;=&nbsp;-1&nbsp;EAGAIN&nbsp;(Resource&nbsp;temporarily&nbsp;unavailable)&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;sendto(5,&nbsp;&quot;\0\4_ask\0\004867f\0\10_command\0\4Ping\0\0&quot;,&nbsp;30,&nbsp;0,&nbsp;NULL,&nbsp;0)&nbsp;=&nbsp;30&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;recvfrom(5,&nbsp;&quot;\0\7_answer\0\004867f\0\3ack\0\4True\0\0&quot;,&nbsp;65536,&nbsp;0,&nbsp;NULL,&nbsp;NULL)&nbsp;=&nbsp;28&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;&gt;Requests&nbsp;867d&nbsp;and&nbsp;867e&nbsp;never&nbsp;receive&nbsp;their&nbsp;callbacks.&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;But&nbsp;in&nbsp;this&nbsp;trace,&nbsp;it&nbsp;looks&nbsp;like&nbsp;those&nbsp;two&nbsp;calls&nbsp;also&nbsp;never&nbsp;received&nbsp;a&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;response&nbsp;from&nbsp;the&nbsp;server&nbsp;-&nbsp;so&nbsp;it's&nbsp;correct&nbsp;that&nbsp;the&nbsp;callbacks&nbsp;never&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;fire.&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;Keep&nbsp;in&nbsp;mind&nbsp;this&nbsp;is&nbsp;a&nbsp;totally&nbsp;valid&nbsp;AMP&nbsp;interaction.&nbsp;&nbsp;The&nbsp;reason&nbsp;these&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;things&nbsp;have&nbsp;unique&nbsp;identifiers&nbsp;is&nbsp;so&nbsp;responses&nbsp;can&nbsp;arrive&nbsp;out&nbsp;of&nbsp;order.&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;Earlier&nbsp;you&nbsp;mentioned&nbsp;you&nbsp;saw&nbsp;tcpdump&nbsp;reporting&nbsp;that&nbsp;the&nbsp;response&nbsp;data&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;unfired&nbsp;Deferreds&nbsp;was&nbsp;arriving.&nbsp;&nbsp;Can&nbsp;you&nbsp;double&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;check&nbsp;that?&nbsp;&nbsp;From&nbsp;this&nbsp;`strace`&nbsp;output&nbsp;I&nbsp;would&nbsp;guess&nbsp;that&nbsp;it&nbsp;isn't.&nbsp;&nbsp;The&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;alternative&nbsp;explanation&nbsp;is&nbsp;a&nbsp;terrible,&nbsp;data-losing&nbsp;bug&nbsp;in&nbsp;the&nbsp;kernel's&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&gt;&nbsp;TCP&nbsp;stack...&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;It&nbsp;really&nbsp;does&nbsp;arrive.&nbsp;Here's&nbsp;the&nbsp;relevant&nbsp;bit&nbsp;of&nbsp;tcpdump&nbsp;output&nbsp;for&nbsp;867d,&nbsp;hostnames&nbsp;redacted:&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;16:19:33.542428&nbsp;IP&nbsp;wheezy-1.example.com.43517&nbsp;&gt;&nbsp;xenbuilder.example.com.8091:&nbsp;Flags&nbsp;[P.],&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;seq&nbsp;6156084:6156267,&nbsp;ack&nbsp;807019,&nbsp;win&nbsp;296,&nbsp;options&nbsp;[nop,nop,TS&nbsp;val&nbsp;62810704&nbsp;ecr&nbsp;696524361],&nbsp;length&nbsp;183&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;E...b.@.@...&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;..........7.....(/......&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;..jP)..I..&lt;span&nbsp;style=&quot;color:rgb(0,&nbsp;0,&nbsp;255)&quot;&nbsp;class=&quot;colour&quot;&gt;_ask..867d.&lt;/span&gt;._command.&nbsp;LogOutput..action..xe-clean..branch..test-secure-build..data..16:19:33&nbsp;00:00:00&nbsp;E:&nbsp;+&nbsp;dry=&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;..job..core..number..89613..product..carbon..site..cam..stream..out..&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;16:19:33.542935&nbsp;IP&nbsp;xenbuilder.&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;example.com&lt;/span&gt;.8091&nbsp;&gt;&nbsp;wheezy-1.&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;example.com&lt;/span&gt;.43517:&nbsp;Flags&nbsp;[P.],&nbsp;seq&nbsp;807019:807050,&nbsp;ack&nbsp;6156267,&nbsp;win&nbsp;816,&nbsp;options&nbsp;[nop,nop,TS&nbsp;val&nbsp;696524413&nbsp;ecr&nbsp;62810704],&nbsp;length&nbsp;31&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;E..S.P@.@.U.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;......7.........0Zm.....&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;)..}..jP.&lt;span&nbsp;style=&quot;color:rgb(0,&nbsp;0,&nbsp;255)&quot;&nbsp;class=&quot;colour&quot;&gt;.&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,&nbsp;0,&nbsp;0)&quot;&nbsp;class=&quot;colour&quot;&gt;_answer..867d..status..True&lt;/span&gt;..&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;16:19:33.542986&nbsp;IP&nbsp;wheezy-1.&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;example.com&lt;/span&gt;.43517&nbsp;&gt;&nbsp;xenbuilder.&lt;span&nbsp;style=&quot;font-family:menlo,consolas,&quot;courier&nbsp;new&quot;,monospace,sans-serif&quot;&nbsp;class=&quot;font&quot;&gt;example.com&lt;/span&gt;.8091:&nbsp;Flags&nbsp;[.],&nbsp;ack&nbsp;807050,&nbsp;win&nbsp;296,&nbsp;options&nbsp;[nop,nop,TS&nbsp;val&nbsp;62810705&nbsp;ecr&nbsp;696524413],&nbsp;length&nbsp;0&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;(etc)&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Peter.&lt;br&gt;&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
