<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;&quot;&gt;Hey&nbsp;there,&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;start&nbsp;and&nbsp;stop&nbsp;a&nbsp;twisted&nbsp;server&nbsp;in&nbsp;a&nbsp;unittest: &lt;a&nbsp;href=&quot;http://dpaste.org/qwaUt/&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;http://dpaste.org/qwaUt/&lt;/span&gt;&lt;/a&gt; .&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;Calling&nbsp;reactor.stop()&nbsp;in&nbsp;the&nbsp;callback&nbsp;causes&nbsp;a&nbsp;KeyboardInterrupt&nbsp;exception,&nbsp;and&nbsp;tearDown&nbsp;gets&nbsp;never&nbsp;executed,&nbsp;as&nbsp;it&amp;#39;s&nbsp;probably&nbsp;waiting&nbsp;for&nbsp;the&nbsp;test&nbsp;to&nbsp;finish.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;After&nbsp;calling&nbsp;`trial&nbsp;d.py`&nbsp;you&nbsp;need&nbsp;to&nbsp;run&nbsp;a&nbsp;`telnet&nbsp;localhost&nbsp;8007`&nbsp;manually&nbsp;to&nbsp;stimulate&nbsp;the&nbsp;connectionMade()&nbsp;method.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;I&amp;#39;m&nbsp;totally&nbsp;stuck&nbsp;and&nbsp;would&nbsp;appreciate&nbsp;any&nbsp;help.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;Thanks&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;&quot;&gt;Fabian&lt;/p&gt;&lt;/div&gt;<br>

</tt>
