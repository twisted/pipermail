<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Exarkun,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;tried&nbsp;hacking&nbsp;the&nbsp;addWriter&nbsp;method&nbsp;as&nbsp;follows:&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:courier&nbsp;new,monospace&quot;&gt;       &nbsp;add_writer_orig&nbsp;=&nbsp;reactor.__class__.addWriter&nbsp;#@UndefinedVariable&lt;br&gt;<br>
<br>
       &nbsp;def&nbsp;my_add_writer(self,&nbsp;writer):&lt;br&gt;           &nbsp;logging.warn(writer.__class__.__mro__)&lt;br&gt;           &nbsp;logging.warn(&#39;&#39;.join(traceback.format_stack()))&lt;br&gt;           &nbsp;if&nbsp;isinstance(writer,Port):&lt;br&gt;               &nbsp;raise&nbsp;Exception(&quot;Shouldn&#39;t&nbsp;add&nbsp;a&nbsp;port&nbsp;as&nbsp;a&nbsp;writer&quot;)&lt;br&gt;<br>
<br>
           &nbsp;return&nbsp;add_writer_orig(self,&nbsp;writer)&lt;br&gt;       &nbsp;reactor.addWriter&nbsp;=&nbsp;types.MethodType(my_add_writer,reactor)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;But&nbsp;I&nbsp;actually&nbsp;got&nbsp;nothing&nbsp;out&nbsp;of&nbsp;it.&nbsp;I&nbsp;also&nbsp;noticed&nbsp;this&nbsp;backtrace&nbsp;(or&nbsp;similar)&nbsp;is&nbsp;sometimes&nbsp;with&nbsp;a&nbsp;Udp.Port,&nbsp;not&nbsp;only&nbsp;a&nbsp;Unix.Port:&lt;br&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:courier&nbsp;new,monospace&quot;&gt;Unhandled&nbsp;Error&lt;br&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt; &nbsp;File&nbsp;&quot;/path/to/twisted.zip/twisted/python/log.py&quot;,&nbsp;line&nbsp;88,&nbsp;in&nbsp;callWithLogger&lt;br&gt; &nbsp;File&nbsp;&quot;/path/to/twisted.zip/twisted/python/log.py&quot;,&nbsp;line&nbsp;73,&nbsp;in&nbsp;callWithContext&lt;br&gt;<br>
<br>
 &nbsp;File&nbsp;&quot;/path/to/twisted.zip/twisted/python/context.py&quot;,&nbsp;line&nbsp;118,&nbsp;in&nbsp;callWithContext&lt;br&gt; &nbsp;File&nbsp;&quot;/path/to/twisted.zip/twisted/python/context.py&quot;,&nbsp;line&nbsp;81,&nbsp;in&nbsp;callWithContext&lt;br&gt;---&nbsp;&lt;exception&nbsp;caught&nbsp;here&gt;&nbsp;---&lt;br&gt;<br>
<br>
 &nbsp;File&nbsp;&quot;/path/to/twisted.zip/twisted/internet/posixbase.py&quot;,&nbsp;line&nbsp;619,&nbsp;in&nbsp;_doReadOrWrite&lt;br&gt; &nbsp;File&nbsp;&quot;/path/to/twisted.zip/twisted/internet/base.py&quot;,&nbsp;line&nbsp;1117,&nbsp;in&nbsp;doWrite&lt;br&gt;exceptions.RuntimeError:&nbsp;doWrite&nbsp;called&nbsp;on&nbsp;a&nbsp;twisted.internet.udp.Port&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;br&gt; Any&nbsp;other&nbsp;ideas&nbsp;how&nbsp;I&nbsp;could&nbsp;find&nbsp;out&nbsp;the&nbsp;culprit?&lt;br&gt;&lt;br&gt;&lt;/div&gt;Thank&nbsp;you,&lt;br&gt;&lt;br&gt;Killian&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;7&nbsp;May&nbsp;2014&nbsp;17:09,&nbsp;Killian&nbsp;De&nbsp;Smedt&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:killiands@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;killiands@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Exarkun,&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;quick&nbsp;response.&nbsp;I&nbsp;should&nbsp;have&nbsp;specified&nbsp;those&nbsp;things&nbsp;immediately.&lt;br&gt;<br>
<br>
&lt;/div&gt;I&nbsp;manually&nbsp;merged&nbsp;the&nbsp;UDP&nbsp;ipv6&nbsp;branch&nbsp;in&nbsp;the&nbsp;trunk&nbsp;somewhere&nbsp;in&nbsp;august&nbsp;and&nbsp;used&nbsp;that&nbsp;one,&nbsp;the&nbsp;version&nbsp;number&nbsp;is&nbsp;reported&nbsp;as&nbsp;[twisted,&nbsp;version&nbsp;13.1.0].&lt;br&gt;<br>
&lt;/div&gt;The&nbsp;platform&nbsp;is&nbsp;always&nbsp;centos&nbsp;though&nbsp;the&nbsp;centos&nbsp;version&nbsp;might&nbsp;range&nbsp;from&nbsp;5.x&nbsp;to&nbsp;6.x,&nbsp;32&nbsp;bit,&nbsp;but&nbsp;most&nbsp;of&nbsp;the&nbsp;time&nbsp;it&nbsp;runs&nbsp;on&nbsp;a&nbsp;centos&nbsp;5.2&nbsp;installation&nbsp;(kernel&nbsp;on&nbsp;my&nbsp;working&nbsp;machine&nbsp;is&nbsp;2.6.18).&nbsp;Python&nbsp;is&nbsp;2.7.1&nbsp;.&lt;br&gt;<br>
<br>
&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;use&nbsp;the&nbsp;default&nbsp;reactor&nbsp;which&nbsp;should&nbsp;come&nbsp;down&nbsp;to&nbsp;the&nbsp;epoll&nbsp;one.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I&#39;ll&nbsp;try&nbsp;to&nbsp;hack&nbsp;up&nbsp;the&nbsp;addwriter,&nbsp;it&nbsp;shouldn&#39;t&nbsp;be&nbsp;that&nbsp;hard&nbsp;to&nbsp;for&nbsp;just&nbsp;that&nbsp;application.&lt;br&gt;&lt;br&gt;Thank&nbsp;you,&lt;br&gt;&lt;br&gt;<br>
<br>
Killian&lt;br&gt;<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;7&nbsp;May&nbsp;2014&nbsp;16:11,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&gt;On&nbsp;01:47&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:killiands@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;killiands@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hello&nbsp;everybody,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;sometimes&nbsp;see&nbsp;the&nbsp;following&nbsp;error&nbsp;logged&nbsp;by&nbsp;a&nbsp;twisted&nbsp;application,&nbsp;it&lt;br&gt;<br>
only&nbsp;happens&nbsp;sporadically&nbsp;and&nbsp;I&nbsp;cannot&nbsp;even&nbsp;reproduce&nbsp;when&nbsp;trying&nbsp;to&lt;br&gt;<br>
re-execute&nbsp;the&nbsp;exact&nbsp;sequence&nbsp;of&nbsp;those&nbsp;failures.&nbsp;So&nbsp;giving&nbsp;an&nbsp;SSCCE&nbsp;is&lt;br&gt;<br>
quite&nbsp;impossible&nbsp;for&nbsp;now&nbsp;(sorry).&nbsp;Given&nbsp;this&nbsp;trace&nbsp;it&#39;s&nbsp;also&nbsp;hard&nbsp;to&nbsp;find&lt;br&gt;<br>
what&nbsp;was&nbsp;actually&nbsp;called/executed.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
I&#39;ve&nbsp;seen&nbsp;something&nbsp;like&nbsp;this&nbsp;with&nbsp;a&nbsp;somewhat&nbsp;old&nbsp;version&nbsp;of&nbsp;Twisted&nbsp;and&nbsp;a&nbsp;custom&nbsp;reactor.&nbsp; I&nbsp;never&nbsp;tracked&nbsp;down&nbsp;the&nbsp;cause.&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;version&nbsp;of&nbsp;Twisted&nbsp;are&nbsp;you&nbsp;using,&nbsp;what&nbsp;platform&nbsp;are&nbsp;you&nbsp;on,&nbsp;and&nbsp;what&nbsp;reactor&nbsp;are&nbsp;you&nbsp;using?&lt;br&gt;<br>
&lt;br&gt;<br>
Another&nbsp;useful&nbsp;bit&nbsp;of&nbsp;debug&nbsp;information&nbsp;would&nbsp;be&nbsp;to&nbsp;hack&nbsp;up&nbsp;the&nbsp;reactor&#39;s&nbsp;`addWriter`&nbsp;method&nbsp;to&nbsp;do&nbsp;a&nbsp;check&nbsp;of&nbsp;the&nbsp;argument.&nbsp; The&nbsp;call&nbsp;stack&nbsp;at&nbsp;*that*&nbsp;point&nbsp;(when&nbsp;the&nbsp;argument&nbsp;is&nbsp;a&nbsp;Port)&nbsp;is&nbsp;more&nbsp;interesting&nbsp;than&nbsp;the&nbsp;call&nbsp;stack&nbsp;at&nbsp;the&nbsp;point&nbsp;where&nbsp;`doWrite`&nbsp;is&nbsp;called.&lt;br&gt;<br>
<br>
<br>
<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;br&gt;<br>
______________________________&lt;u&gt;&lt;/u&gt;_________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.&lt;u&gt;&lt;/u&gt;com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-&lt;u&gt;&lt;/u&gt;bin/mailman/listinfo/twisted-&lt;u&gt;&lt;/u&gt;python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;--&nbsp;&lt;br&gt;Killian&nbsp;De&nbsp;Smedt&lt;br&gt;mobile:&nbsp;&lt;a&nbsp;href=&quot;tel:%2B32%20486%2F825%20951&quot;&nbsp;value=&quot;+32486825951&quot;&nbsp;target=&quot;_blank&quot;&gt;+32&nbsp;486/825&nbsp;951&lt;/a&gt;&lt;br&gt;<br>
<br>
mail:&nbsp;&lt;a&nbsp;href=&quot;mailto:killiands@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;killiands@gmail.com&lt;/a&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Killian&nbsp;De&nbsp;Smedt&lt;br&gt;mobile:&nbsp;+32&nbsp;486/825&nbsp;951&lt;br&gt;mail:&nbsp;&lt;a&nbsp;href=&quot;mailto:killiands@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;killiands@gmail.com&lt;/a&gt;<br>
&lt;/div&gt;<br>

</tt>
