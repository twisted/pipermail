# Copyright (c) 2001-2004 Twisted Matrix Laboratories.
# See LICENSE for details.


import wx

from twisted.internet import threadedselectreactor
threadedselectreactor.install()
from twisted.internet import reactor

# set up so that "hello, world" is printed once a second
def helloWorld():
    print "hello, world"
    reactor.callLater(1, helloWorld)
reactor.callLater(1, helloWorld)

def twoSecondsPassed():
    print "two seconds passed"

reactor.callLater(2, twoSecondsPassed)

class MyFrame(wx.Frame):
    def __init__(self, parent, ID, title):
        wx.Frame.__init__(self, parent, ID, title, wx.DefaultPosition, wx.Size(300, 200))
        menu = wx.Menu()
        menu.Append(wx.ID_EXIT, "E&xit", "Terminate the program")
        menuBar = wx.MenuBar()
        menuBar.Append(menu, "&File")
        self.SetMenuBar(menuBar)
        #EVT_MENU(self, ID_EXIT,  self.DoExit)
        self.Bind(wx.EVT_MENU, self.DoExit, id=wx.ID_EXIT)

        reactor.interleave(wx.CallAfter)

    def DoExit(self, event):
        reactor.addSystemEventTrigger('after', 'shutdown', self.Close, True)
        reactor.stop()


class MyApp(wx.App):

    def OnInit(self):
        frame = MyFrame(None, -1, "Hello, world")
        frame.Show(True)
        self.SetTopWindow(frame)
        return True


def demo():
    app = MyApp(0)
    app.MainLoop()


if __name__ == '__main__':
    demo()
