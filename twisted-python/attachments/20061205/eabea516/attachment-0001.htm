<tt>
Hi&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;an&nbsp;application&nbsp;which&nbsp;uses&nbsp;M2Crypto&nbsp;authentication.&nbsp;I&nbsp;use&nbsp;the&lt;br&gt;wrapper&nbsp;supplied&nbsp;by&nbsp;M2Crypto,&nbsp;and&nbsp;can&nbsp;do&nbsp;postConnection&nbsp;check&nbsp;just&lt;br&gt;fine.&nbsp;I&nbsp;need&nbsp;to&nbsp;pass&nbsp;along&nbsp;some&nbsp;of&nbsp;the&nbsp;information&nbsp;from&nbsp;the&nbsp;client&lt;br&gt;credentials,&nbsp;but&nbsp;I&nbsp;cannot&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;do&nbsp;this.<br>
&lt;br&gt;&lt;br&gt;The&nbsp;code&nbsp;looks&nbsp;something&nbsp;like&nbsp;this:&lt;br&gt;&lt;br&gt;from&nbsp;twisted.application&nbsp;import&nbsp;service,&nbsp;internet&lt;br&gt;from&nbsp;twisted.protocols&nbsp;import&nbsp;policies&lt;br&nbsp;clear=&quot;all&quot;&gt;from&nbsp;M2Crypto&nbsp;import&nbsp;SSL&lt;br&gt;from&nbsp;M2Crypto.SSL.TwistedProtocolWrapper<br>
&nbsp;import&nbsp;TLSProtocolWrapper&lt;br&gt;&lt;br&gt;def&nbsp;protocol_factory(factory,&nbsp;wrapped_protocol):&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;wrapper&nbsp;=&nbsp;TLSProtocolWrapper(factory,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;wrapped_protocol,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;startPassThrough=0,<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;client=0,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;contextFactory=ServerContextFactory(),&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;postConnectionCheck=MyChecker())&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;wrapper<br>
&lt;br&gt;&lt;br&gt;&lt;br&gt;factory&nbsp;=&nbsp;...&lt;br&gt;&lt;br&gt;wrapper&nbsp;=&nbsp;policies.WrappingFactory(factory)&lt;br&gt;wrapper.protocol&nbsp;=&nbsp;protocol_factory&nbsp;&lt;br&gt;wrapper.protocol.TLS&nbsp;=&nbsp;True&lt;br&gt;factory.startTLS&nbsp;=&nbsp;True&lt;br&gt;factory.sslChecker&nbsp;=&nbsp;SSL.Checker.Checker()&lt;br&gt;<br>
&lt;br&gt;factory&nbsp;=&nbsp;wrapper&lt;br&gt;&lt;br&gt;application&nbsp;=&nbsp;service.Application('foo')&lt;br&gt;service&nbsp;=&nbsp;internet.TCPServer(8443,&nbsp;factory)&lt;br&gt;service.setServiceParent(application)&lt;br&gt;&lt;br&gt;Currently&nbsp;the&nbsp;original&nbsp;factory&nbsp;is&nbsp;the&nbsp;factory&nbsp;from&nbsp;twisted.web2<br>
,&nbsp;but&lt;br&gt;I&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;this,&nbsp;on&nbsp;a&nbsp;general&nbsp;level,&nbsp;e.g.,&nbsp;from&nbsp;AMP&lt;br&gt;as&nbsp;well.&nbsp;Setting&nbsp;the&nbsp;information&nbsp;into&nbsp;some&nbsp;global&nbsp;value&nbsp;is&nbsp;sure&nbsp;to&nbsp;fail,&lt;br&gt;but&nbsp;I&nbsp;cannot&nbsp;see&nbsp;how&nbsp;else&nbsp;to&nbsp;propagate&nbsp;information.&lt;br&gt;&lt;br&gt;--&nbsp;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;-&nbsp;Henrik<br>

</tt>
