<tt>
On&nbsp;20&nbsp;November&nbsp;2012&nbsp;21:31,&nbsp;Adi&nbsp;Roiban&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:adi@roiban.ro&quot;&nbsp;target=&quot;_blank&quot;&gt;adi@roiban.ro&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Hi,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;don&amp;#39;t&nbsp;think&nbsp;there&nbsp;is&nbsp;support&nbsp;for&nbsp;configuring&nbsp;the&nbsp;advertised&nbsp;IP&nbsp;address.&lt;br&gt;<br>
I&nbsp;don&amp;#39;t&nbsp;know&nbsp;how&nbsp;EC2&nbsp;ip&nbsp;forwarding&nbsp;works&nbsp;and&nbsp;how&nbsp;can&nbsp;you&nbsp;retrieve&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;use&nbsp;another&nbsp;IP&nbsp;address,&nbsp;in&nbsp;FTP.ftp_PASV(),&nbsp;look&nbsp;for&nbsp;the&nbsp;following&nbsp;lines:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;self.dtpPort&nbsp;=&nbsp;self.getDTPPort(self.dtpFactory)&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;host&nbsp;=&nbsp;self.transport.getHost().host&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;port&nbsp;=&nbsp;self.dtpPort.getHost().port&lt;br&gt;<br>
&lt;br&gt;<br>
Just&nbsp;replace&nbsp;&amp;#39;self.transport.getHost().host&amp;#39;&nbsp;with&nbsp;your&nbsp;required&nbsp;IP&nbsp;or&lt;br&gt;<br>
another&nbsp;method&nbsp;for&nbsp;retrieving&nbsp;the&nbsp;IP&nbsp;address.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
Adi&lt;br&gt;<br>
&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers&nbsp;Adi,&nbsp;I&amp;#39;ve&nbsp;made&nbsp;a&nbsp;function&nbsp;that&nbsp;launches&nbsp;&amp;#39;curl&nbsp;&lt;a&nbsp;href=&quot;http://ifconfig.me&quot;&gt;ifconfig.me&lt;/a&gt;&amp;#39;&nbsp;through&nbsp;subprocess,&nbsp;and&nbsp;I&nbsp;call&nbsp;that&nbsp;and&nbsp;save&nbsp;it&nbsp;when&nbsp;the&nbsp;server&nbsp;starts.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;definitely&nbsp;the&nbsp;only&nbsp;place&nbsp;where&nbsp;I&nbsp;need&nbsp;to&nbsp;override&nbsp;the&nbsp;host?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&amp;#39;d&nbsp;rather&nbsp;wrap&nbsp;the&nbsp;transport&nbsp;object&nbsp;to&nbsp;be&nbsp;sure&nbsp;but&nbsp;twisted&nbsp;is&nbsp;still&nbsp;pretty&nbsp;magic&nbsp;to&nbsp;me&nbsp;and&nbsp;I&amp;#39;m&nbsp;struggling&nbsp;to&nbsp;find&nbsp;out&nbsp;where&nbsp;this&nbsp;ProtocolWrapper&nbsp;object&nbsp;is&nbsp;originating&nbsp;from.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
On&nbsp;20&nbsp;November&nbsp;2012&nbsp;22:47,&nbsp;Paul&nbsp;Wiseman&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:poalman@gmail.com&quot;&gt;poalman@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;This&nbsp;possibly&nbsp;has&nbsp;nothing&nbsp;to&nbsp;do&nbsp;with&nbsp;twisted,&nbsp;but&nbsp;maybe&nbsp;if&nbsp;not&nbsp;someone&nbsp;may&lt;br&gt;<br>
&amp;gt;&nbsp;be&nbsp;able&nbsp;to&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right&nbsp;direction!&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Basically&nbsp;I&amp;#39;ve&nbsp;set&nbsp;up&nbsp;a&nbsp;twisted&nbsp;FTP&nbsp;server&nbsp;on&nbsp;ec2,&nbsp;and&nbsp;when&nbsp;a&nbsp;client&nbsp;tries&lt;br&gt;<br>
&amp;gt;&nbsp;to&nbsp;enter&nbsp;passive&nbsp;mode&nbsp;I&amp;#39;m&nbsp;getting&nbsp;this:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Response:&nbsp;227&nbsp;Entering&nbsp;Passive&nbsp;Mode&nbsp;(x,x,x,x,159,122).&lt;br&gt;<br>
&amp;gt;&nbsp;Status:&nbsp;Server&nbsp;sent&nbsp;passive&nbsp;reply&nbsp;with&nbsp;unroutable&nbsp;address.&nbsp;Using&nbsp;server&lt;br&gt;<br>
&amp;gt;&nbsp;address&nbsp;instead.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;the&nbsp;x.x.x.x&nbsp;is&nbsp;the&nbsp;boxes&nbsp;private&nbsp;IP,&nbsp;rather&nbsp;than&nbsp;its&nbsp;public&nbsp;IP.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;It&amp;#39;s&nbsp;getting&nbsp;this&nbsp;from&nbsp;ln.&nbsp;851&nbsp;in&nbsp;twisted/protocols/ftp.py&nbsp;v12.2.0&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Is&nbsp;there&nbsp;somehow&nbsp;I&nbsp;can&nbsp;change&nbsp;the&nbsp;way&nbsp;twisted&nbsp;is&nbsp;getting&nbsp;the&nbsp;IP,&nbsp;or&nbsp;is&nbsp;this&lt;br&gt;<br>
&amp;gt;&nbsp;an&nbsp;issue&nbsp;with&nbsp;the&nbsp;server&nbsp;set&nbsp;up&nbsp;itself?&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Any&nbsp;pointers&nbsp;or&nbsp;help&nbsp;on&nbsp;what&nbsp;to&nbsp;look/check&nbsp;for&nbsp;would&nbsp;be&nbsp;of&nbsp;huge&nbsp;help!&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Thanks!&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Paul&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Adi&nbsp;Roiban&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
