<tt>
&lt;html&gt;&lt;head&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--&nbsp;DIV&nbsp;{margin:0px;}&nbsp;--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:arial,helvetica,sans-serif;font-size:10pt&quot;&gt;&lt;div&gt;It&nbsp;looks&nbsp;like&nbsp;the&nbsp;latest&nbsp;version&nbsp;8.2&nbsp;tries&nbsp;to&nbsp;rollback&nbsp;without&nbsp;seeing&nbsp;if&nbsp;the&nbsp;connection&nbsp;is&nbsp;even&nbsp;open&nbsp;or&nbsp;not:&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;rollback(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;self._pool.reconnect:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._connection.rollback()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._connection.rollback()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curs&nbsp;=&nbsp;self._connection.cursor()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;curs.execute(self._pool.good_sql)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curs.close()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._connection.commit()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.err(None,&nbsp;&quot;Rollback&nbsp;failed&quot;)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._pool.disconnect(self._connection)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;self._pool.noisy:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.msg(&quot;Connection&nbsp;lost.&quot;)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;ConnectionLost()&lt;br&gt;&lt;br&gt;I'm&nbsp;seeing&nbsp;the&nbsp;&quot;Rollback&nbsp;failed&quot;&nbsp;log&nbsp;message&nbsp;and&nbsp;then&nbsp;the&nbsp;ConnectionLost&nbsp;exception&nbsp;being&nbsp;thrown.&nbsp;I&nbsp;have&nbsp;cp_reconnect&nbsp;set&nbsp;to&nbsp;True,&nbsp;so&nbsp;it's&nbsp;skipping&nbsp;down&nbsp;to&nbsp;the&nbsp;try/except&nbsp;and&nbsp;failing<br>
&nbsp;on&nbsp;rollback.&nbsp;Should&nbsp;the&nbsp;code&nbsp;try&nbsp;to&nbsp;rollback&nbsp;if&nbsp;the&nbsp;connection&nbsp;is&nbsp;lost?&lt;br&gt;&lt;br&gt;Thanks&nbsp;in&nbsp;advance,&lt;br&gt;Steve&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;&lt;/html&gt;
</tt>
