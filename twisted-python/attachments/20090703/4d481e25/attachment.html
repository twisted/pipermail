<tt>
Geez&nbsp;....&nbsp;what&nbsp;a&nbsp;HUGE&nbsp;duh&nbsp;moment.&nbsp;This&nbsp;will&nbsp;ultimately&nbsp;run&nbsp;on&nbsp;multiple&nbsp;remote&nbsp;servers,&nbsp;but,&nbsp;while&nbsp;doing&nbsp;initial&nbsp;testing,&nbsp;I&nbsp;have&nbsp;been&nbsp;running&nbsp;it&nbsp;on&nbsp;just&nbsp;my&nbsp;dev&nbsp;box.&nbsp;And,&nbsp;of&nbsp;course,&nbsp;I&nbsp;keep&nbsp;forgetting&nbsp;that&nbsp;twisted&nbsp;(well,&nbsp;python)&nbsp;doesn&#39;t&nbsp;make&nbsp;use&nbsp;of&nbsp;multiple&nbsp;cores.&nbsp;I&nbsp;wasted&nbsp;all&nbsp;yesterday&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;why&nbsp;this&nbsp;was&nbsp;running&nbsp;the&nbsp;way&nbsp;it&nbsp;was.....&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;million&nbsp;thanks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sean&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Jul&nbsp;3,&nbsp;2009&nbsp;at&nbsp;7:52&nbsp;AM,&nbsp;Johann&nbsp;Borck&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:johann.borck@densedata.com&quot;&gt;johann.borck@densedata.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;Sean&nbsp;Hollingsworth&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Let&nbsp;me&nbsp;start&nbsp;off&nbsp;by&nbsp;warning&nbsp;everyone&nbsp;that&nbsp;I&nbsp;am&nbsp;extremely&nbsp;new&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;twisted&nbsp;(I&#39;ve&nbsp;been&nbsp;using&nbsp;it&nbsp;maybe&nbsp;a&nbsp;week)&nbsp;and&nbsp;it&#39;s&nbsp;highly&nbsp;likely&nbsp;some&lt;br&gt;<br>
&gt;&nbsp;things&nbsp;don&#39;t&nbsp;work&nbsp;the&nbsp;way&nbsp;I&nbsp;think&nbsp;they&nbsp;should.&nbsp;Or,&nbsp;I&#39;m&nbsp;just&nbsp;using&nbsp;them&lt;br&gt;<br>
&gt;&nbsp;incorrectly.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/div&gt;&gt;&nbsp;[..]&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;problems:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Right&nbsp;now,&nbsp;for&nbsp;development&nbsp;and&nbsp;testing,&nbsp;I&nbsp;have&nbsp;three&nbsp;servers&nbsp;running&lt;br&gt;<br>
&gt;&nbsp;on&nbsp;localhost&nbsp;on&nbsp;three&nbsp;ports.&lt;br&gt;<br>
&lt;/div&gt;Are&nbsp;you&nbsp;running&nbsp;them&nbsp;in&nbsp;a&nbsp;single&nbsp;process?&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&nbsp;When&nbsp;I&nbsp;run&nbsp;my&nbsp;test&nbsp;code,&nbsp;it&nbsp;seems&nbsp;that&nbsp;each&nbsp;Perspective&nbsp;Broker&nbsp;runs&lt;br&gt;<br>
&gt;&nbsp;sequentially,&nbsp;rather&nbsp;than&nbsp;concurrently.&nbsp;For&nbsp;example,&nbsp;if&nbsp;i&nbsp;watch&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;debugging&nbsp;output&nbsp;from&nbsp;the&nbsp;server,&nbsp;I&nbsp;see&nbsp;the&nbsp;following:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;0&nbsp;processing&nbsp;dataval1&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;0&nbsp;processing&nbsp;dataval2&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;0&nbsp;processing&nbsp;dataval3&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;0&nbsp;processing&nbsp;dataval4&lt;br&gt;<br>
&lt;/div&gt;&gt;&nbsp;server&nbsp;1&nbsp;processing&nbsp;dataval*5*&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&nbsp;server&nbsp;1&nbsp;processing&nbsp;dataval6&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;1&nbsp;processing&nbsp;dataval7&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;2&nbsp;processing&nbsp;dataval8&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;2&nbsp;processing&nbsp;dataval9&lt;br&gt;<br>
&gt;&nbsp;server&nbsp;2&nbsp;processing&nbsp;dataval10&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;My&nbsp;understanding&nbsp;is&nbsp;that&nbsp;the&nbsp;perspective&nbsp;brokers&nbsp;would&nbsp;work&lt;br&gt;<br>
&gt;&nbsp;concurrently.&nbsp;Is&nbsp;that&nbsp;incorrect?&nbsp;My&nbsp;guess&nbsp;is&nbsp;that&nbsp;they&nbsp;should&nbsp;work&lt;br&gt;<br>
&gt;&nbsp;concurrently&nbsp;and&nbsp;I&nbsp;am&nbsp;just&nbsp;doing&nbsp;something&nbsp;wrong&nbsp;in&nbsp;my&nbsp;code,&nbsp;due&nbsp;to&nbsp;my&lt;br&gt;<br>
&gt;&nbsp;very,&nbsp;very&nbsp;limited&nbsp;understanding&nbsp;of&nbsp;how&nbsp;they&nbsp;work.&nbsp;Well,&nbsp;how&nbsp;much&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;twisted&nbsp;works,&nbsp;really.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Below&nbsp;is&nbsp;my&nbsp;the&nbsp;relevant&nbsp;code&nbsp;for&nbsp;the&nbsp;client&nbsp;(I&#39;ve&nbsp;taken&nbsp;out&nbsp;code&nbsp;that&lt;br&gt;<br>
&gt;&nbsp;just&nbsp;deals&nbsp;with&nbsp;prepping&nbsp;data&nbsp;or&nbsp;debugging).&nbsp;Please&nbsp;keep&nbsp;in&nbsp;mind&nbsp;that&lt;br&gt;<br>
&gt;&nbsp;this&nbsp;is&nbsp;mostly&nbsp;testing&nbsp;code,&nbsp;while&nbsp;I&nbsp;get&nbsp;a&nbsp;better&nbsp;understanding&nbsp;of&nbsp;how&lt;br&gt;<br>
&gt;&nbsp;perspective&nbsp;brokers&nbsp;work&nbsp;and&nbsp;was&nbsp;cobbled&nbsp;together&nbsp;from&nbsp;examples&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;docs&nbsp;found&nbsp;online.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;[...]&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;the&nbsp;client&nbsp;code,&nbsp;nothing&nbsp;seems&nbsp;wrong,&nbsp;since&nbsp;it&nbsp;doesn&#39;t&nbsp;enforce&nbsp;one&lt;br&gt;<br>
job&nbsp;to&nbsp;be&nbsp;finished&nbsp;before&nbsp;starting&nbsp;the&nbsp;next&nbsp;one&nbsp;-&nbsp;the&nbsp;problem&nbsp;has&nbsp;to&nbsp;be&lt;br&gt;<br>
on&nbsp;the&nbsp;server&nbsp;side.&nbsp;Actually&nbsp;I&nbsp;suspect&nbsp;you&#39;re&nbsp;running&nbsp;the&nbsp;same&nbsp;service&lt;br&gt;<br>
on&nbsp;3&nbsp;ports&nbsp;but&nbsp;within&nbsp;one&nbsp;process,&nbsp;right?.&nbsp;If&nbsp;this&nbsp;is&nbsp;the&nbsp;case&nbsp;it&#39;s&nbsp;no&lt;br&gt;<br>
wonder&nbsp;the&nbsp;order&nbsp;of&nbsp;jobs&nbsp;completed&nbsp;matches&nbsp;exactly&nbsp;the&nbsp;order&nbsp;they&#39;re&lt;br&gt;<br>
arriving&nbsp;in&nbsp; because&nbsp;it&nbsp;all&nbsp;happens&nbsp;in&nbsp;a&nbsp;single&nbsp;thread.&nbsp;If&nbsp;you&nbsp;want&lt;br&gt;<br>
parallel&nbsp;processing&nbsp;you&nbsp;will&nbsp;have&nbsp;to&nbsp;use&nbsp;multiple&nbsp;processes.&nbsp;As&nbsp;a&nbsp;side&lt;br&gt;<br>
note&nbsp;(which&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;apply&nbsp;here):&nbsp;if&nbsp;the&nbsp;work&nbsp;they&#39;re&nbsp;doing&nbsp;is&lt;br&gt;<br>
not&nbsp;CPU-bound,&nbsp;but&nbsp;IO-bound&nbsp;(meaning&nbsp;the&nbsp;work&nbsp;is&nbsp;nothing&nbsp;but&nbsp;waiting&nbsp;for&lt;br&gt;<br>
something&nbsp;to&nbsp;complete,&nbsp;which&nbsp;for&nbsp;some&nbsp;reason&nbsp;can&#39;t&nbsp;be&nbsp;done&nbsp;in&nbsp;an&lt;br&gt;<br>
asynchronous&nbsp;manner,&nbsp;the&nbsp;most&nbsp;prominent&nbsp;examples&nbsp;being&nbsp;blocking&nbsp;database&lt;br&gt;<br>
interfaces),&nbsp;you&nbsp;also&nbsp;have&nbsp;the&nbsp;alternative&nbsp;of&nbsp;using&nbsp;threads.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;the&nbsp;basic&nbsp;problem&nbsp;is&nbsp;you&#39;re&nbsp;assuming&nbsp;twisted&nbsp;to&nbsp;somehow&nbsp;schedule&lt;br&gt;<br>
the&nbsp;work&nbsp;to&nbsp;different&nbsp;cores/cpus,&nbsp;which&nbsp;it&nbsp;doesn&#39;t&nbsp;do&nbsp;by&nbsp;default.&nbsp;You&lt;br&gt;<br>
might&nbsp;want&nbsp;to&nbsp;look&nbsp;at&nbsp;ampoule&nbsp;&lt;a&nbsp;href=&quot;https://launchpad.net/ampoule&quot;&nbsp;target=&quot;_blank&quot;&gt;https://launchpad.net/ampoule&lt;/a&gt;,&nbsp;which&nbsp;is&nbsp;a&lt;br&gt;<br>
process&nbsp;pool,&nbsp;there&nbsp;was&nbsp;another&nbsp;similar&nbsp;thing&nbsp;called&nbsp;AsynQueue,&nbsp;but&nbsp;the&lt;br&gt;<br>
site&nbsp;is&nbsp;down&nbsp;atm:&nbsp;&lt;a&nbsp;href=&quot;http://foss.eepatents.com/AsynQueue&quot;&nbsp;target=&quot;_blank&quot;&gt;http://foss.eepatents.com/AsynQueue&lt;/a&gt;.&lt;br&gt;<br>
&lt;br&gt;<br>
hth,&lt;br&gt;<br>
Johann&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
