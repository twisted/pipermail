<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Apr&nbsp;6,&nbsp;2019,&nbsp;at&nbsp;10:12&nbsp;AM,&nbsp;Sereysethy&nbsp;TOUCH&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:touch.sereysethy@gmail.com&quot;&nbsp;class=&quot;&quot;&gt;touch.sereysethy@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;Hi&nbsp;Jean-Paul,&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;No&nbsp;I&nbsp;dont&nbsp;want&nbsp;it&nbsp;to&nbsp;be&nbsp;mixed&nbsp;with&nbsp;stdout&nbsp;stream,&nbsp;it&nbsp;should&nbsp;be&nbsp;separated&nbsp;from&nbsp;normal&nbsp;stdout,&nbsp;so&nbsp;that&nbsp;I&nbsp;know&nbsp;it&nbsp;is&nbsp;an&nbsp;error.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;To&nbsp;be&nbsp;honest,&nbsp;I&nbsp;am&nbsp;pretty&nbsp;to&nbsp;new&nbsp;to&nbsp;Twisted&nbsp;concept,&nbsp;there&nbsp;are&nbsp;things&nbsp;that&nbsp;I&nbsp;have&nbsp;not&nbsp;familiar&nbsp;with&nbsp;yet.&nbsp;Actually&nbsp;I&nbsp;can&nbsp;also&nbsp;implement&nbsp;a&nbsp;low&nbsp;level&nbsp;ssh&nbsp;client&nbsp;(which&nbsp;I&nbsp;already&nbsp;did),&nbsp;but&nbsp;as&nbsp;SSHCommandClientEndpoint&nbsp;is&nbsp;already&nbsp;available,&nbsp;so&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;it&nbsp;straight&nbsp;away.&nbsp;But&nbsp;when&nbsp;I&nbsp;dived&nbsp;in&nbsp;the&nbsp;source&nbsp;code,&nbsp;the&nbsp;_CommandChannel&nbsp;only&nbsp;implements&nbsp;dataReceived&nbsp;but&nbsp;not&nbsp;extReceived.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;main&nbsp;point&nbsp;of&nbsp;`SSHCommandClientEndpoint`&nbsp;is&nbsp;to&nbsp;allow&nbsp;code&nbsp;that&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;doesn't&lt;/i&gt;&lt;span&nbsp;style=&quot;font-style:&nbsp;normal;&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;know&nbsp;about&nbsp;SSH&nbsp;to&nbsp;run&nbsp;over&nbsp;SSH,&nbsp;for&nbsp;example&nbsp;to&nbsp;enable&nbsp;forwarding.&nbsp;&nbsp;So&nbsp;you&nbsp;can't&nbsp;unconditionally&nbsp;require&nbsp;everyone&nbsp;to&nbsp;implement&nbsp;extReceived,&nbsp;because&nbsp;IProtocol&nbsp;doesn't&nbsp;require&nbsp;this.&lt;/span&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;For&nbsp;your&nbsp;suggestion&nbsp;on&nbsp;using&nbsp;ProcessEndpoint&nbsp;how&nbsp;can&nbsp;I&nbsp;use&nbsp;it&nbsp;for&nbsp;my&nbsp;SSH&nbsp;client?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Jean-Paul&nbsp;was&nbsp;suggesting&nbsp;a&nbsp;way&nbsp;that&nbsp;Twisted&nbsp;could&nbsp;be&nbsp;modified&nbsp;to&nbsp;support&nbsp;your&nbsp;use-case,&nbsp;not&nbsp;a&nbsp;thing&nbsp;that&nbsp;you&nbsp;can&nbsp;do&nbsp;today&nbsp;in&nbsp;your&nbsp;own&nbsp;code.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;In&nbsp;my&nbsp;extReceived&nbsp;I&nbsp;just&nbsp;deliver&nbsp;what&nbsp;I&nbsp;got&nbsp;to&nbsp;the&nbsp;extReceived&nbsp;of&nbsp;method&nbsp;protocol,&nbsp;it&nbsp;is&nbsp;exactly&nbsp;the&nbsp;same&nbsp;as&nbsp;Twisted&nbsp;implements&nbsp;dataReceived:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;class&nbsp;CommandChannel(_CommandChannel):&nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;extReceived(self,&nbsp;dataType,&nbsp;data):&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;the&nbsp;command's&nbsp;extended&nbsp;data&nbsp;(usually&nbsp;standard&nbsp;error)&nbsp;arrives,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deliver&nbsp;it&nbsp;to&nbsp;the&nbsp;protocol&nbsp;instance.&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@type&nbsp;dataType:&nbsp;L{int}&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@type&nbsp;data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;L{str}&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self._protocol.extReceived(dataType,&nbsp;data)&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;wanted&nbsp;to&nbsp;contribute&nbsp;this&nbsp;functionality&nbsp;to&nbsp;Twisted,&nbsp;the&nbsp;usual&nbsp;idiom&nbsp;here&nbsp;would&nbsp;be&nbsp;to&nbsp;do&nbsp;a&nbsp;check,&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;protocol&nbsp;=&nbsp;self._protocol&lt;/div&gt;&lt;div&gt;if&nbsp;ISSHExtendedProtocol.providedBy(protocol):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;protocol.extReceived(dataType,&nbsp;data)&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Doing&nbsp;this&nbsp;on&nbsp;every&nbsp;extReceived&nbsp;may&nbsp;be&nbsp;a&nbsp;little&nbsp;bit&nbsp;of&nbsp;a&nbsp;performance&nbsp;hit,&nbsp;so&nbsp;caching&nbsp;this&nbsp;computation&nbsp;and/or&nbsp;the&nbsp;behavior&nbsp;associated&nbsp;with&nbsp;it&nbsp;is&nbsp;left&nbsp;as&nbsp;an&nbsp;exercise&nbsp;for&nbsp;you&nbsp;:).&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I&nbsp;have&nbsp;two&nbsp;other&nbsp;questions&nbsp;since&nbsp;you&nbsp;are&nbsp;here&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;1)&nbsp;how&nbsp;can&nbsp;we&nbsp;execute&nbsp;command&nbsp;like&nbsp;more&nbsp;or&nbsp;less&nbsp;which&nbsp;is&nbsp;an&nbsp;interactive&nbsp;command?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Looking&nbsp;at&nbsp;what&nbsp;the&nbsp;'conch'&nbsp;script&nbsp;does,&nbsp;I&nbsp;think&nbsp;what&nbsp;you're&nbsp;asking&nbsp;is&nbsp;something&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;self.conn.sendRequest(self,&nbsp;b'exec',&nbsp;common.NS(options['command']))&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;2)&nbsp;how&nbsp;to&nbsp;request&nbsp;a&nbsp;pty&nbsp;to&nbsp;ssh&nbsp;server?&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Again&nbsp;from&nbsp;twisted/conch/scripts/conch.py:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;ptyReqData&nbsp;=&nbsp;session.packRequest_pty_req(term,&nbsp;winSize,&nbsp;'')&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;self.conn.sendRequest(self,&nbsp;b'pty-req',&nbsp;ptyReqData)&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Thanks,&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Sethy&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;using&nbsp;Twisted,&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;-g&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
