<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;agree&nbsp;it&#39;s&nbsp;a&nbsp;bug&nbsp;in&nbsp;conch&nbsp;and&nbsp;I&nbsp;believe&nbsp;my&nbsp;repo&nbsp;shows&nbsp;a&nbsp;reproducible&nbsp;example.&nbsp;Run&nbsp;the&nbsp;test,&nbsp;it&nbsp;never&nbsp;completes&nbsp;because&nbsp;the&nbsp;deferred&nbsp;from&nbsp;`makeDirectory`&nbsp;never&nbsp;fires.&nbsp;. &lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Fri,&nbsp;Sep&nbsp;25,&nbsp;2020&nbsp;at&nbsp;3:41&nbsp;AM&nbsp;Jean-Paul&nbsp;Calderone&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Thu,&nbsp;Sep&nbsp;24,&nbsp;2020&nbsp;at&nbsp;8:54&nbsp;PM&nbsp;Robert&nbsp;DiFalco&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robert.difalco@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robert.difalco@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Why&nbsp;exactly&nbsp;is&nbsp;makeDirectory&nbsp;not&nbsp;firing&nbsp;any&nbsp;callbacks&nbsp;or&nbsp;errbacks&nbsp;and&nbsp;what&nbsp;can&nbsp;I&nbsp;add&nbsp;at&nbsp;the&nbsp;Factory&nbsp;level&nbsp;to&nbsp;make&nbsp;it&nbsp;do&nbsp;so? &lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;background-color:rgb(43,43,43);color:rgb(169,183,198);font-family:Menlo;font-size:9pt&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;class&nbsp;&lt;/span&gt;MySSHClientFactory(SSHClientFactory):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;clientConnectionLost&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;connector&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;reason):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.op.addErrback(reason)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;makeDirectory&lt;/span&gt;(&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;path&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;attrs):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.op&nbsp;=&nbsp;Deferred()&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;def&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,198,109)&quot;&gt;_cbSuccess&lt;/span&gt;(result):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.op.callback(result)&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;return&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(148,85,141)&quot;&gt;self&lt;/span&gt;.sftpClient.makeDirectory(path&lt;span&nbsp;style=&quot;color:rgb(204,120,50)&quot;&gt;,&nbsp;&lt;/span&gt;attrs).addCallback(_cbSuccess)d&lt;br&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;code&nbsp;is&nbsp;wrong. &nbsp;It&nbsp;takes&nbsp;what&nbsp;&lt;b&gt;may&lt;/b&gt; be&nbsp;a&nbsp;perfectly&nbsp;good&nbsp;Deferred&nbsp;from&nbsp;makeDirectory&nbsp;and&nbsp;breaks&nbsp;the&nbsp;error&nbsp;chain&nbsp;off&nbsp;of&nbsp;it. &nbsp;The&nbsp;correct&nbsp;way&nbsp;to&nbsp;do&nbsp;this&nbsp;would&nbsp;be&nbsp;more&nbsp;like&nbsp;`makeDirectory(...).chainDeferred(self.op)`. &nbsp;However,&nbsp;`self.op`&nbsp;and&nbsp;`_cbSuccess`&nbsp;are&nbsp;doing&nbsp;nothing&nbsp;useful&nbsp;here&nbsp;so&nbsp;you&nbsp;may&nbsp;as&nbsp;well&nbsp;just&nbsp;delete&nbsp;all&nbsp;that&nbsp;and&nbsp;return&nbsp;the&nbsp;`makeDirectory(...)`&nbsp;Deferred.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;&lt;b&gt;that&lt;/b&gt; Deferred&nbsp;doesn&#39;t&nbsp;fire&nbsp;its&nbsp;errback&nbsp;chain&nbsp;when&nbsp;the&nbsp;connection&nbsp;is&nbsp;closed,&nbsp;that&#39;s&nbsp;a&nbsp;bug&nbsp;in&nbsp;Conch. &nbsp;If&nbsp;you&nbsp;can&nbsp;put&nbsp;together&nbsp;a&nbsp;minimal&nbsp;example&nbsp;and&nbsp;file&nbsp;a&nbsp;ticket,&nbsp;that&nbsp;would&nbsp;be&nbsp;wonderful&nbsp;and&nbsp;perhaps&nbsp;someone&nbsp;can&nbsp;get&nbsp;it&nbsp;fixed&nbsp;for&nbsp;you.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jean-Paul&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
