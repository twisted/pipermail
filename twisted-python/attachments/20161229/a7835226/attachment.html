<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;Well&nbsp;in&nbsp;Twisted&nbsp;checked&nbsp;out&nbsp;directly&nbsp;from&nbsp;GitHub,&nbsp;this&nbsp;seems&nbsp;to&nbsp;work:&lt;br&gt;&lt;br&gt;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=ecdh-sha2-nistp256&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;br&gt;&lt;br&gt;and&nbsp;these&nbsp;fail:&lt;br&gt;&lt;br&gt;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=diffie-hellman-group1-sha1&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;br&gt;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=diffie-hellman-group14-sha1&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;br&gt;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=ecdh-sha2-nistp384&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;br&gt;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=ecdh-sha2-nistp521&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;br&gt;&lt;br&gt;--&lt;br&gt;Craig&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail-s1&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Dec&nbsp;29,&nbsp;2016&nbsp;at&nbsp;4:47&nbsp;AM,&nbsp;陈健&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:chenjianhappy2008@126.com&quot;&nbsp;target=&quot;_blank&quot;&gt;chenjianhappy2008@126.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;line-height:1.7;color:rgb(0,0,0);font-size:14px;font-family:arial&quot;&gt;&lt;div&gt;hi,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; Yes,&nbsp;you&nbsp;are&nbsp;right.&nbsp;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=diffie-&lt;wbr&gt;hellman-group14-sha1&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;/div&gt;&lt;div&gt;against&nbsp;a&nbsp;Twisted&nbsp;ssh&nbsp;server,&nbsp;and&nbsp;i&nbsp;saw&nbsp;the&nbsp;problem. &nbsp;The&nbsp;reason&nbsp;is&nbsp;that&nbsp;twisted(16.6.0)&nbsp;is&nbsp;not&nbsp;supported&nbsp;the&nbsp;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;diffie-hellman-group14-sha1&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;&nbsp;and&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;ecdh-sha512-nistp512&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0)&quot;&gt;key&nbsp;exchange&nbsp;algorithms&nbsp;well&lt;/span&gt;,&nbsp;right&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;JianChen&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail-h5&quot;&gt;&lt;br&gt;&lt;br&gt;At&nbsp;2016-12-29&nbsp;16:06:55,&nbsp;&quot;Craig&nbsp;Rodrigues&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rodrigc@crodrigues.org&quot;&nbsp;target=&quot;_blank&quot;&gt;rodrigc@crodrigues.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&nbsp;&lt;blockquote&nbsp;id=&quot;gmail-m_-3265996824039281594isReplyContent&quot;&nbsp;style=&quot;padding-left:1ex;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204)&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;span&gt;Abhishek&nbsp;Choudhary&nbsp;pointed&nbsp;out&nbsp;to&nbsp;me&nbsp;that&nbsp;you&nbsp;can&nbsp;reproduce&nbsp;this&nbsp;problem&nbsp;easily,&nbsp;even&nbsp;with&nbsp;OpenSSH&nbsp;client.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Look&nbsp;at &lt;/span&gt;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/trac/ticket/8258&quot;&nbsp;target=&quot;_blank&quot;&gt;https://twistedmatrix.com/&lt;wbr&gt;trac/ticket/8258&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;do:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-s1&quot;&gt;ssh&nbsp;-vv&nbsp;-oKexAlgorithms=diffie-&lt;wbr&gt;hellman-group14-sha1&nbsp;-oMACs=hmac-sha2-512&nbsp;user@localhost&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-s1&quot;&gt;against&nbsp;a&nbsp;Twisted&nbsp;ssh&nbsp;server,&nbsp;and&nbsp;you&nbsp;will&nbsp;see&nbsp;the&nbsp;problem.&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-s1&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-s1&quot;&gt;--&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-s1&quot;&gt;Craig&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-p1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_-3265996824039281594gmail-s1&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Dec&nbsp;29,&nbsp;2016&nbsp;at&nbsp;1:17&nbsp;AM,&nbsp;陈健&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:chenjianhappy2008@126.com&quot;&nbsp;target=&quot;_blank&quot;&gt;chenjianhappy2008@126.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;line-height:1.7;color:rgb(0,0,0);font-size:14px;font-family:arial&quot;&gt;&lt;br&gt;&lt;div&gt;hi,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Yes,&nbsp;your&nbsp;understanding&nbsp;is&nbsp;correct.&nbsp;I&nbsp;must&nbsp;set&nbsp;the&nbsp;hmac-sha2-512&nbsp;option&nbsp;unable&nbsp;with&nbsp;SecureCRT,&nbsp;it&nbsp;will&nbsp;be&nbsp;OK.&nbsp;I&nbsp;searched&nbsp;Google&nbsp;for&nbsp;a&nbsp;long&nbsp;time,&nbsp;still&nbsp;did&nbsp;not&nbsp;find&nbsp;the&nbsp;any&nbsp;clues!&lt;/div&gt;&lt;span&gt;&lt;div&gt; &nbsp; &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Twisted&nbsp;Server&nbsp;+&nbsp;OpenSSH&nbsp;client&nbsp;==&nbsp;WORKS&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Twisted&nbsp;Server&nbsp;+&nbsp;Xshell&nbsp;client&nbsp;==&nbsp;WORKS&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OpenSSH&nbsp;Server&nbsp;+&nbsp;SecureCRT&nbsp;client&nbsp;==&nbsp;WORKS&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Twisted&nbsp;Server&nbsp;+&nbsp;SecureCRT&nbsp;client&nbsp;==&nbsp;FAIL&lt;/div&gt;&lt;br&gt;&lt;/span&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;JianChen&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail-m_-3265996824039281594h5&quot;&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;zoom:1&quot;&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;gmail-m_-3265996824039281594m_5290270213727065261divNeteaseMailCard&quot;&gt;&lt;/div&gt;&lt;br&gt;在&nbsp;2016-12-29&nbsp;12:35:57，&quot;Craig&nbsp;Rodrigues&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rodrigc@crodrigues.org&quot;&nbsp;target=&quot;_blank&quot;&gt;rodrigc@crodrigues.org&lt;/a&gt;&gt;&nbsp;写道：&lt;br&gt;&nbsp;&lt;blockquote&nbsp;id=&quot;gmail-m_-3265996824039281594m_5290270213727065261isReplyContent&quot;&nbsp;style=&quot;padding-left:1ex;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204)&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;what&nbsp;you&nbsp;are&nbsp;saying:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Twisted&nbsp;Server&nbsp;+&nbsp;OpenSSH&nbsp;client&nbsp;==&nbsp;WORKS&lt;/div&gt;&lt;div&gt;Twisted&nbsp;Server&nbsp;+&nbsp;Xshell&nbsp;client&nbsp;==&nbsp;WORKS&lt;/div&gt;&lt;div&gt;OpenSSH&nbsp;Server&nbsp;+&nbsp;SecureCRT&nbsp;client&nbsp;==&nbsp;WORKS&lt;/div&gt;&lt;div&gt;Twisted&nbsp;Server&nbsp;+&nbsp;SecureCRT&nbsp;client&nbsp;==&nbsp;FAIL&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;??&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;have&nbsp;SecureCRT&nbsp;client,&nbsp;so&nbsp;don&#39;t&nbsp;know&nbsp;the&nbsp;solution&nbsp;to&nbsp;this&nbsp;problem.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;might&nbsp;want&nbsp;to&nbsp;try&nbsp;searching&nbsp;the&nbsp;SecureCRT&nbsp;site&nbsp;and&nbsp;see&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;clues&lt;/div&gt;&lt;div&gt;there:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(68,68,68);font-family:roboto,helvetica,arial,sans-serif;font-size:13px&quot;&gt;&lt;a&nbsp;href=&quot;https://goo.gl/UkKZvI&quot;&nbsp;target=&quot;_blank&quot;&gt;https://goo.gl/UkKZvI&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(68,68,68);font-family:roboto,helvetica,arial,sans-serif;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;Craig&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Dec&nbsp;28,&nbsp;2016&nbsp;at&nbsp;9:39&nbsp;PM,&nbsp;陈健&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:chenjianhappy2008@126.com&quot;&nbsp;target=&quot;_blank&quot;&gt;chenjianhappy2008@126.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;line-height:1.7;color:rgb(0,0,0);font-size:14px;font-family:arial&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;hi:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Oh,&nbsp;I&#39;m&nbsp;sorry,&nbsp; It&nbsp;is&nbsp;my&nbsp;server-side&nbsp;code&nbsp;has&nbsp;bugs &lt;span&nbsp;style=&quot;color:rgb(36,39,41);font-family:arial,&quot;helvetica&nbsp;neue&quot;,helvetica,sans-serif;font-size:15px&quot;&gt;with&nbsp;Twisted(16.6.0)&nbsp;Conch&lt;/span&gt;,&nbsp;that&nbsp;i&nbsp;have&nbsp;fixed&nbsp;it&nbsp;.&nbsp;But&nbsp;&#39;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;Message&nbsp;Authentication&nbsp;Code&nbsp;did&nbsp;not&nbsp;verify&nbsp;(packet&nbsp;#3)&lt;/span&gt;&#39;&nbsp; error&nbsp;will&nbsp;occurs&nbsp;with&nbsp;the&nbsp;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;SecureCRT(8.0.0&nbsp;or&nbsp;7.3.4)&lt;/span&gt;&nbsp;client.  If&nbsp;I&nbsp;connect&nbsp;OpenSSH_5.3p1&nbsp;(or&nbsp;OpenSSH_6.6.1p1 )&nbsp;sshd&nbsp;server&nbsp;through&nbsp;the&nbsp;SecureCRT&nbsp;client,&nbsp;it&nbsp;is&nbsp;fine.&nbsp;Of course， if&nbsp;I&nbsp;connect&nbsp;Twisted&nbsp;SSH&nbsp;server&nbsp;by&nbsp;using&nbsp;the&nbsp;Xshell&nbsp;client&lt;span&nbsp;style=&quot;color:rgb(36,39,41);font-family:arial,&quot;helvetica&nbsp;neue&quot;,helvetica,sans-serif;font-size:15px&quot;&gt; with&nbsp;hmac-sha2-512&nbsp;options&nbsp;or&nbsp;“ssh&nbsp;-m&nbsp;hmac-sha2-512”，it&nbsp;is&nbsp;OK.&nbsp; &lt;/span&gt;&lt;font&nbsp;color=&quot;#242729&quot;&nbsp;face=&quot;Arial,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:15px&quot;&gt;I&nbsp;do&nbsp;not&nbsp;know&nbsp;if&nbsp;it&nbsp;is&nbsp;SecureCRT&nbsp;client&nbsp; bug&nbsp;or&nbsp; twisted&nbsp;problem.&nbsp; &lt;/span&gt;&lt;/font&gt;&lt;font&nbsp;color=&quot;#0000ee&quot;&gt;&lt;u&gt;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/41296412/securecrt-hmac-sha2-512-message-authentication-code-did-not-verify-packet-3&quot;&nbsp;target=&quot;_blank&quot;&gt;http://stackoverflow.com/ques&lt;wbr&gt;tions/41296412/securecrt-hmac-&lt;wbr&gt;sha2-512-message-authenticatio&lt;wbr&gt;n-code-did-not-verify-packet-3&lt;/a&gt;&lt;/u&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail-m_-3265996824039281594m_5290270213727065261gmail-h5&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;title=&quot;neteasefooter&quot;&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;span&nbsp;title=&quot;neteasefooter&quot;&gt;&lt;p&gt; &lt;/p&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
