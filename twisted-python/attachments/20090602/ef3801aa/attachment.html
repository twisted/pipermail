<tt>
glyph,&lt;br&gt;&lt;br&gt;Sorry&nbsp;for&nbsp;the&nbsp;delayed&nbsp;response. &nbsp;I&nbsp;wanted&nbsp;to&nbsp;thank&nbsp;you&nbsp;for&nbsp;providing&nbsp;such&nbsp;a&nbsp;complete&nbsp;example. &nbsp;This&nbsp;is&nbsp;excellent. &nbsp;Now&nbsp;I&nbsp;just&nbsp;need&nbsp;to&nbsp;wrap&nbsp;by&nbsp;head&nbsp;around&nbsp;how&nbsp;it&nbsp;all&nbsp;goes&nbsp;together&nbsp;and&nbsp;works.&lt;br&gt;&lt;br&gt;The&nbsp;logic&nbsp;of&nbsp;the&nbsp;queue&nbsp;append&nbsp;and&nbsp;pop&nbsp;of&nbsp;a&nbsp;deferred&nbsp;in&nbsp;ProxyClient&nbsp;forwardLine&nbsp;and&nbsp;lineRecieve&nbsp;are&nbsp;throwing&nbsp;me&nbsp;for&nbsp;a&nbsp;loop. &nbsp;I&#39;ll&nbsp;keep&nbsp;tracing&nbsp;it&nbsp;and&nbsp;get&nbsp;it&nbsp;down.&lt;br&gt;<br>
&lt;br&gt;Thanks&nbsp;Again!&lt;br&gt;-ab&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;28,&nbsp;2009&nbsp;at&nbsp;6:58&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:glyph@divmod.com&quot;&gt;glyph@divmod.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
On&nbsp;01:23&nbsp;am,&nbsp;&lt;a&nbsp;href=&quot;mailto:asb.bush@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;asb.bush@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&nbsp;have&nbsp;just&nbsp;started&nbsp;to&nbsp;look&nbsp;at&nbsp;the&nbsp;Twisted&nbsp;framework&nbsp;and&nbsp;would&nbsp;like&nbsp;to&nbsp;put&nbsp;it&lt;br&gt;<br>
to&nbsp;use&nbsp;for&nbsp;a&nbsp;new&nbsp;project&nbsp;I&nbsp;am&nbsp;working&nbsp;on.&nbsp; Not&nbsp;being&nbsp;very&nbsp;familiar&nbsp;with&nbsp;the&lt;br&gt;<br>
framework&nbsp;and&nbsp;fairly&nbsp;new&nbsp;to&nbsp;Python&nbsp;in&nbsp;general&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;ask&nbsp;a&lt;br&gt;<br>
design/architecture&nbsp;question.&nbsp; (I&nbsp;have&nbsp;written&nbsp;similar&nbsp;applications&nbsp;in&nbsp;C&nbsp;but&lt;br&gt;<br>
would&nbsp;prefer&nbsp;to&nbsp;start&nbsp;this&nbsp;in&nbsp;the&nbsp;right&nbsp;direction&nbsp;and&nbsp;not&nbsp;write&nbsp;Python&nbsp;like&lt;br&gt;<br>
C.)&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Thanks&nbsp;for&nbsp;asking!&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;apologize&nbsp;for&nbsp;the&nbsp;delay&nbsp;in&nbsp;my&nbsp;answer.&nbsp; I&nbsp;started&nbsp;writing&nbsp;up&nbsp;a&nbsp;simple&nbsp;example&nbsp;(attached)&nbsp;but&nbsp;was&nbsp;discouraged&nbsp;to&nbsp;find&nbsp;that&nbsp;it&nbsp;was&nbsp;100&nbsp;lines&nbsp;long&nbsp;and&nbsp;required&nbsp;too&nbsp;much&nbsp;explaining.&lt;br&gt;<br>
&lt;br&gt;<br>
Then&nbsp;I&nbsp;started&nbsp;documenting&nbsp;it&nbsp;and&nbsp;explaining&nbsp;every&nbsp;line&nbsp;but&nbsp;that&nbsp;was&nbsp;a&nbsp;very&nbsp;long,&nbsp;tedious&nbsp;message.&nbsp; So,&nbsp;it&nbsp;doesn&#39;t&nbsp;have&nbsp;much&nbsp;in&nbsp;the&nbsp;way&nbsp;of&nbsp;explanation;&nbsp;I&nbsp;hope&nbsp;you&nbsp;will&nbsp;find&nbsp;it&nbsp;useful&nbsp;regardless.&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
The&nbsp;application&nbsp;has&nbsp;the&nbsp;following&nbsp;model:&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Many&nbsp;clients&nbsp;connect&nbsp;to&nbsp;the&nbsp;Application&nbsp;and&nbsp;prefer&nbsp;to&nbsp;leave&nbsp;the&nbsp;connection&lt;br&gt;<br>
open.&nbsp; They&nbsp;will&nbsp;send&nbsp;messages&nbsp;across&nbsp;this&nbsp;connection.&nbsp; They&nbsp;will&nbsp;expect&nbsp;to&lt;br&gt;<br>
get&nbsp;a&nbsp;message&nbsp;back&nbsp;at&nbsp;some&nbsp;point&nbsp;later,&nbsp;they&nbsp;do&nbsp;not&nbsp;wait&nbsp;for&nbsp;a&nbsp;response&lt;br&gt;<br>
(async).&nbsp; The&nbsp;clients&nbsp;are&nbsp;already&nbsp;coded&nbsp;(legacy)&nbsp;and&nbsp;just&nbsp;need&nbsp;to&nbsp;send&nbsp;their&lt;br&gt;<br>
proprietary&nbsp;protocol&nbsp;to&nbsp;the&nbsp;new&nbsp;Application&nbsp;(written&nbsp;using&nbsp;Twisted).&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
This&nbsp;is&nbsp;*almost*&nbsp;a&nbsp;FAQ.&nbsp; At&nbsp;least,&nbsp;you&nbsp;may&nbsp;find&nbsp;this&nbsp;to&nbsp;be&nbsp;a&nbsp;useful&nbsp;answer:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother&lt;/a&gt;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
The&nbsp;Twisted&nbsp;application&nbsp;will&nbsp;take&nbsp;the&nbsp;data&nbsp;from&nbsp;the&nbsp;clients&nbsp;and&nbsp;do&nbsp;some&lt;br&gt;<br>
transformation&nbsp;on&nbsp;it&nbsp;then&nbsp;send&nbsp;the&nbsp;message&nbsp;on&nbsp;to&nbsp;another&nbsp;server&nbsp;(3rd&nbsp;party).&lt;br&gt;<br>
This&nbsp;connection&nbsp;to&nbsp;&quot;another&quot;&nbsp;server&nbsp;must&nbsp;be&nbsp;a&nbsp;single&nbsp;connection,&nbsp;not&nbsp;one&lt;br&gt;<br>
connection&nbsp;per&nbsp;client.&nbsp; This&nbsp;connection&nbsp;should&nbsp;also&nbsp;be&nbsp;persistent&nbsp;and&nbsp;not&lt;br&gt;<br>
opened/closed&nbsp;for&nbsp;each&nbsp;client&nbsp;message&nbsp;sent.&nbsp; Ideally&nbsp;if&nbsp;the&nbsp;3rd&nbsp;party&nbsp;server&lt;br&gt;<br>
is&nbsp;down&nbsp;then&nbsp;I&nbsp;would&nbsp;also&nbsp;not&nbsp;accept&nbsp;client&nbsp;connections&nbsp;as&nbsp;the&nbsp;messages&nbsp;are&lt;br&gt;<br>
time&nbsp;sensitive&nbsp;and&nbsp;should&nbsp;not&nbsp;be&nbsp;stored&nbsp;and&nbsp;forwarded.&nbsp; At&nbsp;some&nbsp;point&nbsp;the&nbsp;3rd&lt;br&gt;<br>
part&nbsp;will&nbsp;send&nbsp;a&nbsp;message&nbsp;back&nbsp;and&nbsp;the&nbsp;Application&nbsp;will&nbsp;route&nbsp;it&nbsp;back&nbsp;to&nbsp;the&lt;br&gt;<br>
original&nbsp;source.&nbsp; Basically&nbsp;request/reply&nbsp;pattern.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
The&nbsp;example&nbsp;that&nbsp;I&#39;ve&nbsp;attached&nbsp;does&nbsp;basically&nbsp;this.&nbsp; Run&nbsp;it&nbsp;and&nbsp;then&nbsp;run&nbsp;&#39;telnet&nbsp;localhost&nbsp;4322&#39;,&nbsp;and&nbsp;type&nbsp;some&nbsp;lines;&nbsp;you&nbsp;will&nbsp;see&nbsp;that&nbsp;they&nbsp;are&nbsp;transformed&nbsp;and&nbsp;echoed&nbsp;back&nbsp;to&nbsp;you,&nbsp;both&nbsp;by&nbsp;the&nbsp;proxy&nbsp;and&nbsp;by&nbsp;the&nbsp;protocol&nbsp;being&nbsp;proxied.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
At&nbsp;a&nbsp;high&nbsp;level,&nbsp;the&nbsp;answer&nbsp;to&nbsp;your&nbsp;question&nbsp;is&nbsp;so&nbsp;simple&nbsp;that&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;express.&nbsp; Basically,&nbsp;you&nbsp;just&nbsp;need&nbsp;to&nbsp;have&nbsp;all&nbsp;the&nbsp;relevant&nbsp;objects&nbsp;having&nbsp;references&nbsp;to&nbsp;each&nbsp;other,&nbsp;and&nbsp;calling&nbsp;methods&nbsp;to&nbsp;achieve&nbsp;the&nbsp;desired&nbsp;effect.&nbsp; The&nbsp;less&nbsp;magic,&nbsp;the&nbsp;better.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
More&nbsp;precisely,&nbsp;you&nbsp;need&nbsp;an&nbsp;object&nbsp;responsible&nbsp;for&nbsp;managing&nbsp;your&nbsp;outgoing&nbsp;connections&nbsp;to&nbsp;your&nbsp;legacy&nbsp;server,&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;handle&nbsp;disconnection&nbsp;and&nbsp;reconnection,&nbsp;queueing&nbsp;messages&nbsp;and&nbsp;so&nbsp;on.&nbsp; Then&nbsp;you&nbsp;need&nbsp;your&nbsp;proxy&nbsp;server&nbsp;factory&nbsp;to&nbsp;hold&nbsp;a&nbsp;reference&nbsp;to&nbsp;that&nbsp;object,&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;create&nbsp;references&nbsp;from&nbsp;each&nbsp;proxy&nbsp;server&nbsp;protocol&nbsp;connection&nbsp;object&nbsp;to&nbsp;the&nbsp;connection&nbsp;manager.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;related&nbsp;to&nbsp;another&nbsp;recent&nbsp;thread&nbsp;-&nbsp;you&nbsp;can&nbsp;see&nbsp;my&nbsp;message&nbsp;in&nbsp;that&nbsp;thread&nbsp;here:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://thread.gmane.org/gmane.comp.python.twisted/18377/focus=18385&quot;&nbsp;target=&quot;_blank&quot;&gt;http://thread.gmane.org/gmane.comp.python.twisted/18377/focus=18385&lt;/a&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&nbsp;have&nbsp;been&nbsp;reading&nbsp;through&nbsp;the&nbsp;archives&nbsp;and&nbsp;the&nbsp;twisted&nbsp;docs&nbsp;and&nbsp;have&nbsp;also&lt;br&gt;<br>
looked&nbsp;over&nbsp;the&nbsp;Hex-dump&nbsp;port-forwarding&nbsp;recipe&nbsp;but&nbsp;not&nbsp;found&nbsp;anything&nbsp;that&lt;br&gt;<br>
explains&nbsp;how&nbsp;to&nbsp;use&nbsp;twisted&nbsp;for&nbsp;this&nbsp;model.&nbsp; Hex-dump&nbsp;is&nbsp;close&nbsp;but&lt;br&gt;<br>
opens/closes&nbsp;the&nbsp;connection&nbsp;to&nbsp;the&nbsp;server&nbsp;on&nbsp;each&nbsp;client&nbsp;connection.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
I&#39;m&nbsp;not&nbsp;sure&nbsp;why&nbsp;hex-dump&nbsp;port-forwarding&nbsp;is&nbsp;particularly&nbsp;relevant&nbsp;to&nbsp;this&nbsp;example.&nbsp; Is&nbsp;it&nbsp;just&nbsp;because&nbsp;this&nbsp;is&nbsp;an&nbsp;application&nbsp;that&nbsp;connects&nbsp;from&nbsp;one&nbsp;host&nbsp;to&nbsp;another?&lt;div&nbsp;class=&quot;im&quot;&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
I&nbsp;am&nbsp;thinking&nbsp;that&nbsp;there&nbsp;will&nbsp;be&nbsp;two&nbsp;Factories&nbsp;[and&nbsp;two&nbsp;protocols:&nbsp;1)&nbsp;for&lt;br&gt;<br>
clients&nbsp;and&nbsp;2)&nbsp;for&nbsp;3rd&nbsp;party].&nbsp; I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how&nbsp;to&nbsp;best&nbsp;establish&nbsp;both&nbsp;the&lt;br&gt;<br>
listening&nbsp;factory&nbsp;and&nbsp;the&nbsp;client&nbsp;to&nbsp;3rd&nbsp;party&nbsp;factory.&nbsp; Once&nbsp;they&nbsp;are&lt;br&gt;<br>
established&nbsp;what&nbsp;is&nbsp;the&nbsp;preferred&nbsp;way&nbsp;in&nbsp;Twisted&nbsp;to&nbsp;pass&nbsp;a&nbsp;message&nbsp;from&nbsp;one&lt;br&gt;<br>
protocol&nbsp;to&nbsp;another?&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
This&nbsp;part&nbsp;of&nbsp;your&nbsp;question&nbsp;is&nbsp;almost&nbsp;exactly&nbsp;the&nbsp;FAQ&nbsp;I&nbsp;mentioned&nbsp;above&nbsp;:).&nbsp; To&nbsp;reiterate&nbsp;that&nbsp;answer,&nbsp;you&nbsp;just&nbsp;need&nbsp;to&nbsp;have&nbsp;references&nbsp;between&nbsp;objects,&nbsp;and&nbsp;call&nbsp;methods&nbsp;on&nbsp;the&nbsp;objects&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;stuff.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;have&nbsp;a&nbsp;client&nbsp;connection&nbsp;object,&nbsp;just&nbsp;get&nbsp;a&nbsp;reference&nbsp;to&nbsp;that&nbsp;from&nbsp;the&nbsp;relevant&nbsp;server&nbsp;connection&nbsp;object&nbsp;and&nbsp;call&nbsp;methods&nbsp;on&nbsp;the&nbsp;client&nbsp;object&nbsp;to&nbsp;emit&nbsp;messages&nbsp;on&nbsp;the&nbsp;client&nbsp;protocol,&nbsp;handling&nbsp;any&nbsp;responses&nbsp;appropriately.&nbsp; Deferreds&nbsp;can&nbsp;help&nbsp;with&nbsp;that&nbsp;latter&nbsp;part.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
It&nbsp;is&nbsp;always&nbsp;better&nbsp;if&nbsp;you&nbsp;can&nbsp;establish&nbsp;that&nbsp;reference&nbsp;as&nbsp;simply&nbsp;as&nbsp;possible;&nbsp;for&nbsp;example,&nbsp;by&nbsp;passing&nbsp;parameters&nbsp;to&nbsp;the&nbsp;__init__&nbsp;of&nbsp;various&nbsp;classes.&nbsp; Again,&nbsp;for&nbsp;reasons&nbsp;that&nbsp;have&nbsp;nothing&nbsp;to&nbsp;do&nbsp;with&nbsp;Twisted&nbsp;specifically,&nbsp;it&#39;s&nbsp;a&nbsp;bad&nbsp;idea&nbsp;to&nbsp;try&nbsp;to&nbsp;establish&nbsp;these&nbsp;references&nbsp;by&nbsp;having&nbsp;global&nbsp;variables&nbsp;floating&nbsp;around.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Here&#39;s&nbsp;a&nbsp;very&nbsp;very&nbsp;simple&nbsp;example&nbsp;of&nbsp;the&nbsp;&quot;good&nbsp;way&quot;&nbsp;to&nbsp;propagate&nbsp;some&nbsp;data&nbsp;to&nbsp;protocol&nbsp;instances&nbsp;that&nbsp;need&nbsp;it:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;class&nbsp;MyProtocol(Protocol):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;data):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.data&nbsp;=&nbsp;data&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;class&nbsp;MyFactory(Factory):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;__init__(self,&nbsp;data):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.data&nbsp;=&nbsp;data&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;MyProtocol(self.data)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;reactor.listenTCP(8765,&nbsp;MyFactory(&quot;some&nbsp;data&quot;))&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;here&#39;s&nbsp;a&nbsp;simple&nbsp;example&nbsp;of&nbsp;a&nbsp;really&nbsp;bad&nbsp;way&nbsp;(don&#39;t&nbsp;do&nbsp;this!):&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;class&nbsp;MyProtocol(Protocol):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp;def&nbsp;connectionMade(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.bleh&nbsp;=&nbsp;bleh&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp;bleh&nbsp;=&nbsp;&quot;some&nbsp;data&quot;&lt;br&gt;<br>
&nbsp; &nbsp;f&nbsp;=&nbsp;Factory()&lt;br&gt;<br>
&nbsp; &nbsp;f.protocol&nbsp;=&nbsp;MyProtocol&lt;br&gt;<br>
&nbsp; &nbsp;reactor.listenTCP(9876,&nbsp;f)&lt;br&gt;<br>
&lt;br&gt;<br>
Even&nbsp;in&nbsp;C,&nbsp;I&#39;m&nbsp;pretty&nbsp;sure&nbsp;it&#39;s&nbsp;better&nbsp;style&nbsp;to&nbsp;pass&nbsp;structures&nbsp;to&nbsp;functions&nbsp;than&nbsp;to&nbsp;abuse&nbsp;piles&nbsp;of&nbsp;local&nbsp;variables&nbsp;:).&nbsp; I&nbsp;only&nbsp;illustrate&nbsp;this&nbsp;bad&nbsp;style&nbsp;here&nbsp;because&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;common&nbsp;antipattern.&nbsp; The&nbsp;Protocol&nbsp;class&nbsp;itself&nbsp;doesn&#39;t&nbsp;take&nbsp;any&nbsp;parameters&nbsp;to&nbsp;__init__,&nbsp;and&nbsp;Twisted&#39;s&nbsp;users&nbsp;don&#39;t&nbsp;always&nbsp;realize&nbsp;that&nbsp;protocols&nbsp;and&nbsp;factories&nbsp;and&nbsp;so&nbsp;on&nbsp;are&nbsp;just&nbsp;regular&nbsp;objects,&nbsp;with&nbsp;no&nbsp;special&nbsp;rules;&nbsp;they&nbsp;just&nbsp;get&nbsp;methods&nbsp;called&nbsp;on&nbsp;them&nbsp;by&nbsp;the&nbsp;reactor.&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Any&nbsp;pointers&nbsp;or&nbsp;sample&nbsp;code&nbsp;that&nbsp;you&nbsp;can&nbsp;offer&nbsp;is&nbsp;greatly&nbsp;appreciated.&nbsp;I&lt;br&gt;<br>
would&nbsp;really&nbsp;like&nbsp;to&nbsp;cook&nbsp;this&nbsp;in&nbsp;Twisted&nbsp;and&nbsp;not&nbsp;go&nbsp;back&nbsp;to&nbsp;the&nbsp;C&nbsp;way.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/div&gt;<br>
Based&nbsp;on&nbsp;what&nbsp;you&#39;ve&nbsp;said&nbsp;so&nbsp;far,&nbsp;I&nbsp;think&nbsp;you&#39;re&nbsp;basically&nbsp;on&nbsp;the&nbsp;right&nbsp;track.&nbsp; Good&nbsp;luck!&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
