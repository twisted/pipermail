<tt>
&lt;br&gt;&lt;br&gt;On&nbsp;Friday,&nbsp;June&nbsp;15,&nbsp;2012,&nbsp;Glyph&nbsp;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;br&gt;<br>
On&nbsp;Jun&nbsp;15,&nbsp;2012,&nbsp;at&nbsp;10:13&nbsp;AM,&nbsp;Laurens&nbsp;Van&nbsp;Houtven&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&#39;m&nbsp;trying&nbsp;to&nbsp;get&nbsp;browsers&nbsp;to&nbsp;communicate&nbsp;with&nbsp;an&nbsp;AMP&nbsp;API.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;also&nbsp;what&nbsp;&lt;&lt;a&nbsp;href=&quot;https://launchpad.net/frack&quot;&nbsp;target=&quot;_blank&quot;&gt;https://launchpad.net/frack&lt;/a&gt;&gt;&nbsp;is&nbsp;doing.&nbsp; I&nbsp;hope&nbsp;that&nbsp;it&nbsp;becomes&nbsp;a&nbsp;common&nbsp;enough&nbsp;practice&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;library&nbsp;for&nbsp;it&nbsp;:).&lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;See&nbsp;Allen&#39;s&nbsp;comment.&nbsp;It&#39;d&nbsp;certainly&nbsp;be&nbsp;great.&nbsp;Do&nbsp;you&nbsp;think&nbsp;that&nbsp;for&nbsp;old&nbsp;browsers&nbsp;(that&nbsp;is&nbsp;ie6&nbsp;&amp;&nbsp;7)&nbsp;it&#39;s&nbsp;acceptable&nbsp;to&nbsp;tell&nbsp;them&nbsp;to&nbsp;go&nbsp;install&nbsp;chrome&nbsp;frame?&nbsp;(&nbsp;for&nbsp;Franck&nbsp;and&nbsp;hence&nbsp;twisteds&nbsp;future&nbsp;bug&nbsp;tracker).&nbsp;If&nbsp;the&nbsp;answer&nbsp;is&nbsp;yes,&nbsp;is&nbsp;that&nbsp;because&nbsp;it&nbsp;will&nbsp;take&nbsp;a&nbsp;while&nbsp;to&nbsp;switch,&nbsp;or&nbsp;would&nbsp;that&nbsp;also&nbsp;be&nbsp;true&nbsp;today?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Bear&nbsp;in&nbsp;mind&nbsp;that&nbsp;my&nbsp;users&nbsp;are&nbsp;a&nbsp;lot&nbsp;less&nbsp;technical&nbsp;and&nbsp;many&nbsp;are&nbsp;stuck&nbsp;on&nbsp;winxp&nbsp;because&nbsp;they&#39;re&nbsp;corporate&nbsp;machines...&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&gt;&nbsp;The&nbsp;issue&nbsp;is&nbsp;that&nbsp;while&nbsp;AMP&nbsp;is&nbsp;inherently&nbsp;a&nbsp;binary&nbsp;protocol,&nbsp;WebSockets&nbsp;transfer&nbsp;text&nbsp;(well,&nbsp;that&#39;s&nbsp;a&nbsp;lie:&nbsp;there&#39;s&nbsp;a&nbsp;binary&nbsp;version,&nbsp;but&nbsp;it&#39;s&nbsp;even&nbsp;less&nbsp;widely&nbsp;supported&nbsp;than&nbsp;WebSockets&nbsp;themselves&nbsp;--&nbsp;and&nbsp;SockJS&nbsp;doesn&#39;t&nbsp;support&nbsp;it&nbsp;at&nbsp;all,&nbsp;although&nbsp;it&#39;s&nbsp;on&nbsp;the&nbsp;roadmap).&nbsp;So,&nbsp;I&nbsp;need&nbsp;an&nbsp;alternative,&nbsp;preferably&nbsp;7-bit,&nbsp;serialization&nbsp;for&nbsp;AMP&nbsp;boxes.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Did&nbsp;you&nbsp;immediately&nbsp;discard&nbsp;the&nbsp;obvious&nbsp;solution&nbsp;of&nbsp;&quot;base64&nbsp;everything&quot;?&nbsp;:)&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Base64&nbsp;does&nbsp;not&nbsp;fix&nbsp;the&nbsp;problem&nbsp;of&nbsp;encoding&nbsp;and&nbsp;decoding&nbsp;binary&nbsp;responses&nbsp;on&nbsp;the&nbsp;client&nbsp;side,&nbsp;only&nbsp;on&nbsp;the&nbsp;transport.&nbsp;Binary&nbsp;support&nbsp;(Blob&nbsp;and&nbsp;ArrayBuffer&nbsp;are&nbsp;those&nbsp;2&nbsp;essentially&nbsp;unsupported&nbsp;things.&nbsp;It&nbsp;may&nbsp;be&nbsp;feasible&nbsp;to&nbsp;build&nbsp;a&nbsp;Unicode&nbsp;amp&nbsp;representation,&nbsp;however&nbsp;meaningless&nbsp;some&nbsp;code&nbsp;points&nbsp;may&nbsp;then&nbsp;become&nbsp;(that&#39;s&nbsp;not&nbsp;a&nbsp;tab&nbsp;stop,&nbsp;it&#39;s&nbsp;a&nbsp;length&nbsp;specifier!!)&lt;span&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;An&nbsp;issue&nbsp;I&#39;m&nbsp;running&nbsp;into&nbsp;is&nbsp;an&nbsp;AMP&nbsp;ListOf.&nbsp;With&nbsp;the&nbsp;above&nbsp;code,&nbsp;ListOf&nbsp;still&nbsp;gets&nbsp;translated&nbsp;to&nbsp;a&nbsp;string,&nbsp;and&nbsp;obviously&nbsp;I&nbsp;want&nbsp;it&nbsp;to&nbsp;be&nbsp;a&nbsp;list.&nbsp;When&nbsp;that&nbsp;ListOf&nbsp;has&nbsp;actual&nbsp;data&nbsp;in&nbsp;it,&nbsp;I&nbsp;get&nbsp;the&nbsp;binary&nbsp;representation.&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
I&nbsp;would&nbsp;recommend&nbsp;implementing&nbsp;an&nbsp;entirely&nbsp;alternate&nbsp;serialization&nbsp;code&nbsp;path;&nbsp;specifically,&nbsp;one&nbsp;which&nbsp;adapts&nbsp;the&nbsp;existing&nbsp;AMP&nbsp;Argument&nbsp;objects&nbsp;to&nbsp;some&nbsp;new&nbsp;interface&nbsp;(&#39;.toJSON()&#39;),&nbsp;with&nbsp;a&nbsp;default&nbsp;adapter&nbsp;that&nbsp;uses&nbsp;the&nbsp;existing&nbsp;toString()/fromString(),&nbsp;and&nbsp;then&nbsp;specific&nbsp;adapters&nbsp;for&nbsp;those&nbsp;interfaces&nbsp;which&nbsp;need&nbsp;modification,&nbsp;like&nbsp;ListOf&nbsp;and&nbsp;Boolean.&lt;/blockquote&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;not&nbsp;sure&nbsp;I&nbsp;understand&nbsp;at&nbsp;which&nbsp;point&nbsp;that&nbsp;takes&nbsp;effect&nbsp;since&nbsp;apparently&nbsp;AMP.sendBox&nbsp;is&nbsp;too&nbsp;late?&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
<br>
&lt;br&gt;<br>
-glyph&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;javascript:;&quot;&nbsp;onclick=&quot;_e(event,&nbsp;&#39;cvml&#39;,&nbsp;&#39;Twisted-Python@twistedmatrix.com&#39;)&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;cheers&lt;div&gt;lvh&lt;/div&gt;&lt;br&gt;<br>

</tt>
