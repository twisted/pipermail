<tt>
&lt;html&gt;&lt;body&gt;On&nbsp;03:32&nbsp;pm,&nbsp;antoine.pitrou@wengo.com&nbsp;wrote:&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;Hi&nbsp;Jean-Paul,&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;The&nbsp;one&nbsp;practical&nbsp;problem&nbsp;which&nbsp;this&nbsp;method&nbsp;of&nbsp;integration&nbsp;has&nbsp;is&nbsp;that&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;it&nbsp;will&nbsp;not&nbsp;allow&nbsp;unit&nbsp;tests&nbsp;to&nbsp;run&nbsp;child&nbsp;processes.&nbsp;&amp;#160;So,&nbsp;one&nbsp;wouldn't&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;be&nbsp;able&nbsp;to&nbsp;run&nbsp;Twisted's&nbsp;test&nbsp;suite&nbsp;with&nbsp;nose&nbsp;using&nbsp;this.&nbsp;&amp;#160;Of&nbsp;course,&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;if&nbsp;one&nbsp;has&nbsp;no&nbsp;interest&nbsp;in&nbsp;running&nbsp;tests&nbsp;which&nbsp;run&nbsp;child&nbsp;processes,&nbsp;then&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;this&nbsp;may&nbsp;not&nbsp;be&nbsp;a&nbsp;big&nbsp;deal.&lt;br&nbsp;/&gt;&amp;gt;&lt;br&nbsp;/&gt;&amp;gt;Do&nbsp;you&nbsp;mean&nbsp;because&nbsp;the&nbsp;reactor&nbsp;does&nbsp;not&nbsp;receive&nbsp;signals?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Yes.&nbsp;&amp;#160;Also,&nbsp;it's&nbsp;highly&nbsp;likely&nbsp;that&nbsp;the&nbsp;tests&nbsp;won't&nbsp;stop&nbsp;cleanly&nbsp;on&nbsp;^C.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;More&nbsp;serious&nbsp;than&nbsp;the&nbsp;process-running&nbsp;issue,&nbsp;from&nbsp;my&nbsp;point&nbsp;of&nbsp;view,&nbsp;is&nbsp;the&nbsp;fact&nbsp;that&nbsp;if&nbsp;you&nbsp;forget&nbsp;the&nbsp;&quot;@deferred&quot;&nbsp;decorator&nbsp;on&nbsp;a&nbsp;test&nbsp;that&nbsp;uses&nbsp;any&nbsp;reactor&nbsp;API,&nbsp;or&nbsp;code&nbsp;that&nbsp;internally&nbsp;_uses_&nbsp;any&nbsp;reactor&nbsp;API,&nbsp;you&nbsp;will&nbsp;put&nbsp;your&nbsp;tests&nbsp;into&nbsp;a&nbsp;non-deterministic&nbsp;state,&nbsp;and&nbsp;although&nbsp;they'll&nbsp;pass&nbsp;_most_&nbsp;of&nbsp;the&nbsp;time,&nbsp;they&nbsp;will&nbsp;die&nbsp;depending&nbsp;on&nbsp;the&nbsp;load&nbsp;characteristics&nbsp;of&nbsp;your&nbsp;machine&nbsp;at&nbsp;the&nbsp;time&nbsp;and&nbsp;(insert&nbsp;long-winded&nbsp;rant&nbsp;about&nbsp;the&nbsp;evil&nbsp;things&nbsp;threads&nbsp;do&nbsp;to&nbsp;your&nbsp;code&nbsp;here).&nbsp;&amp;#160;Tests&nbsp;are&nbsp;exactly&nbsp;the&nbsp;place&nbsp;you&nbsp;never&nbsp;want&nbsp;this&nbsp;to&nbsp;happen&nbsp;:).&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;The&nbsp;documentation&nbsp;for&nbsp;this&nbsp;module&nbsp;should&nbsp;be&nbsp;clear&nbsp;on&nbsp;the&nbsp;fact&nbsp;that&nbsp;Twisted-using&nbsp;tests&nbsp;are&nbsp;_absolutely&nbsp;required_&nbsp;to&nbsp;use&nbsp;the&nbsp;decorator,&nbsp;even&nbsp;if&nbsp;they&nbsp;don't&nbsp;need&nbsp;to&nbsp;wait&nbsp;on&nbsp;a&nbsp;deferred.&nbsp;&amp;#160;Of&nbsp;course,&nbsp;that&nbsp;implies&nbsp;that&nbsp;the&nbsp;&quot;you&nbsp;must&nbsp;return&nbsp;a&nbsp;twisted&nbsp;Deferred&quot;&nbsp;message&nbsp;should&nbsp;probably&nbsp;be&nbsp;removed&nbsp;and&nbsp;that&nbsp;case&nbsp;dealt&nbsp;with.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Also,&nbsp;setUp&nbsp;and&nbsp;tearDown&nbsp;methods&nbsp;also&nbsp;need&nbsp;the&nbsp;decorator&nbsp;applied,&nbsp;I&nbsp;think,&nbsp;not&nbsp;just&nbsp;test&nbsp;methods.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;All&nbsp;in&nbsp;all&nbsp;it&nbsp;seems&nbsp;like&nbsp;it&nbsp;would&nbsp;be&nbsp;simpler&nbsp;to&nbsp;just&nbsp;use&nbsp;trials'&nbsp;TestCase&nbsp;class&nbsp;with&nbsp;nose.&nbsp;&amp;#160;Is&nbsp;there&nbsp;any&nbsp;reason&nbsp;not&nbsp;to?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;Let&nbsp;me&nbsp;give&nbsp;a&nbsp;few&nbsp;points&nbsp;as&nbsp;for&nbsp;nose&nbsp;vs.&nbsp;Trial&nbsp;:&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;You&nbsp;are&nbsp;welcome&nbsp;to&nbsp;use&nbsp;nose,&nbsp;of&nbsp;course,&nbsp;but&nbsp;some&nbsp;of&nbsp;these&nbsp;reasons&nbsp;sounded&nbsp;kind&nbsp;of&nbsp;flimsy&nbsp;to&nbsp;me.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;-&nbsp;nose&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;Twisted.&nbsp;Unless&nbsp;all&nbsp;your&nbsp;Python&nbsp;projects&nbsp;make&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;use&nbsp;of&nbsp;Twisted,&nbsp;you&nbsp;certainly&nbsp;don't&nbsp;like&nbsp;having&nbsp;to&nbsp;use&nbsp;a&nbsp;different&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;testing&nbsp;tool&nbsp;depending&nbsp;on&nbsp;the&nbsp;project.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Trial&nbsp;doesn't&nbsp;force&nbsp;your&nbsp;code&nbsp;to&nbsp;make&nbsp;use&nbsp;of&nbsp;Twisted,&nbsp;and&nbsp;as&nbsp;Mr.&nbsp;Lange&nbsp;has&nbsp;declared&nbsp;previously,&nbsp;it&nbsp;goes&nbsp;to&nbsp;some&nbsp;lengths&nbsp;to&nbsp;be&nbsp;compatible&nbsp;with&nbsp;stdlib&nbsp;unit&nbsp;tests.&nbsp;&amp;#160;It&nbsp;can&nbsp;run&nbsp;and&nbsp;discover&nbsp;stdlib&nbsp;tests,&nbsp;as&nbsp;well&nbsp;as&nbsp;being&nbsp;run&nbsp;by&nbsp;the&nbsp;stdlib&nbsp;runner,&nbsp;and&nbsp;I've&nbsp;used&nbsp;it&nbsp;to&nbsp;test&nbsp;tiny&nbsp;projects&nbsp;which&nbsp;do&nbsp;not&nbsp;use&nbsp;Twisted&nbsp;code&nbsp;anywhere.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;So,&nbsp;Trial&nbsp;only&nbsp;requires&nbsp;Twisted&nbsp;insofar&nbsp;as&nbsp;Nose&nbsp;requires&nbsp;Nose.&nbsp;&amp;#160;It's&nbsp;part&nbsp;of&nbsp;its&nbsp;implementation.&nbsp;&amp;#160;If&nbsp;you&nbsp;use&nbsp;Twisted&nbsp;for&nbsp;_any_&nbsp;of&nbsp;your&nbsp;development,&nbsp;it's&nbsp;already&nbsp;installed.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;-&nbsp;nose&nbsp;has&nbsp;nice&nbsp;features,&nbsp;including&nbsp;the&nbsp;ability&nbsp;to&nbsp;write&nbsp;tests&nbsp;as&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;functions&nbsp;without&nbsp;having&nbsp;to&nbsp;write&nbsp;classes&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;This&nbsp;just&nbsp;sounds&nbsp;like&nbsp;TIMTOWTDI&nbsp;to&nbsp;me.&nbsp;&amp;#160;I&nbsp;*like*&nbsp;the&nbsp;fact&nbsp;that&nbsp;all&nbsp;test&nbsp;methods&nbsp;look&nbsp;the&nbsp;same&nbsp;;).&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;-&nbsp;nose&nbsp;has&nbsp;a&nbsp;plugin&nbsp;system&nbsp;which&nbsp;already&nbsp;provides&nbsp;several&nbsp;extensions&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;In&nbsp;the&nbsp;spirit&nbsp;of&nbsp;completeness,&nbsp;see&nbsp;trial's&nbsp;--help-reporters&nbsp;and&nbsp;--reporter&nbsp;option.&nbsp;&amp;#160;These&nbsp;are&nbsp;discovered&nbsp;using&nbsp;plugins.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Please&nbsp;do&nbsp;not&nbsp;take&nbsp;this&nbsp;argument&nbsp;seriously&nbsp;though.&nbsp;&amp;#160;:)&nbsp;&amp;#160;There&nbsp;is&nbsp;widespread&nbsp;consensus&nbsp;that&nbsp;this&nbsp;plugin&nbsp;API&nbsp;is&nbsp;not&nbsp;very&nbsp;good&nbsp;and&nbsp;it&nbsp;is&nbsp;likely&nbsp;to&nbsp;change.&nbsp;&amp;#160;Still,&nbsp;it&nbsp;exists&nbsp;and&nbsp;you&nbsp;can&nbsp;use&nbsp;it.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;See:&lt;br&nbsp;/&gt;&amp;#160;&nbsp;&amp;#160;&nbsp;http://twistedmatrix.com/trac/browser/sandbox/exarkun/merit/trunk/twisted/plugins/rr.py&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Although,&nbsp;perhaps&nbsp;the&nbsp;utility&nbsp;of&nbsp;the&nbsp;plugin&nbsp;system&nbsp;is&nbsp;decreased&nbsp;more&nbsp;by&nbsp;the&nbsp;fact&nbsp;that&nbsp;nobody&nbsp;knows&nbsp;about&nbsp;it&nbsp;than&nbsp;by&nbsp;its&nbsp;sub-optimal&nbsp;API,&nbsp;which&nbsp;leads&nbsp;into&nbsp;your&nbsp;next&nbsp;point...&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;-&nbsp;nose&nbsp;is&nbsp;documented&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;This&nbsp;is&nbsp;a&nbsp;very,&nbsp;very&nbsp;good&nbsp;point.&nbsp;&amp;#160;Trial's&nbsp;documentation&nbsp;is&nbsp;extremely&nbsp;weak.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Does&nbsp;anyone&nbsp;(and&nbsp;by&nbsp;&quot;anyone&quot;&nbsp;I&nbsp;mean&nbsp;&quot;anyone&nbsp;but&nbsp;JML,&nbsp;who&nbsp;has&nbsp;already&nbsp;done&nbsp;more&nbsp;work&nbsp;on&nbsp;trial&nbsp;than&nbsp;any&nbsp;reasonable&nbsp;person&nbsp;ever&nbsp;would&quot;)&nbsp;want&nbsp;to&nbsp;volunteer&nbsp;to&nbsp;write&nbsp;a&nbsp;&quot;test&nbsp;driven&nbsp;development&nbsp;with&nbsp;Twisted&quot;&nbsp;lore&nbsp;document?&nbsp;&amp;#160;I've&nbsp;introduced&nbsp;many&nbsp;people&nbsp;to&nbsp;Twisted&nbsp;in&nbsp;recent&nbsp;weeks,&nbsp;and&nbsp;each&nbsp;time&nbsp;I&nbsp;ended&nbsp;up&nbsp;having&nbsp;to&nbsp;do&nbsp;a&nbsp;live&nbsp;demonstration&nbsp;of&nbsp;how&nbsp;to&nbsp;write&nbsp;a&nbsp;test&nbsp;module,&nbsp;how&nbsp;to&nbsp;run&nbsp;the&nbsp;trial&nbsp;command&nbsp;line,&nbsp;and&nbsp;(for&nbsp;those&nbsp;lucky&nbsp;enough&nbsp;to&nbsp;use&nbsp;emacs)&nbsp;how&nbsp;to&nbsp;get&nbsp;twisted-dev.el&nbsp;loaded&nbsp;so&nbsp;that&nbsp;f9&nbsp;will&nbsp;do&nbsp;the&nbsp;right&nbsp;thing.&nbsp;&amp;#160;This&nbsp;stuff&nbsp;isn't&nbsp;clear&nbsp;even&nbsp;to&nbsp;people&nbsp;already&nbsp;familiar&nbsp;with&nbsp;Python&nbsp;and&nbsp;unit&nbsp;testing,&nbsp;let&nbsp;alone&nbsp;to&nbsp;people&nbsp;who&nbsp;are&nbsp;learning&nbsp;TDD&nbsp;for&nbsp;the&nbsp;first&nbsp;time&nbsp;with&nbsp;trial.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
