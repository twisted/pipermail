<tt>
What&#39;s&nbsp;the&nbsp;larger&nbsp;problem&nbsp;you&#39;re&nbsp;trying&nbsp;to&nbsp;solve?&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jason&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Feb&nbsp;17,&nbsp;2011&nbsp;at&nbsp;4:38&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:Andy.Henshaw@gtri.gatech.edu&quot;&nbsp;target=&quot;_blank&quot;&gt;Andy.Henshaw@gtri.gatech.edu&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;lang=&quot;EN-US&quot;&nbsp;link=&quot;blue&quot;&nbsp;vlink=&quot;purple&quot;&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;apologize&nbsp;in&nbsp;advance&nbsp;–&nbsp;another&nbsp;question&nbsp;about&nbsp;Twisted&nbsp;and&nbsp;threading. &nbsp;I&nbsp;just&nbsp;seem&nbsp;to&nbsp;have&nbsp;trouble&nbsp;with&nbsp;this&nbsp;and&nbsp;I’m&nbsp;hoping&nbsp;my&nbsp;example&nbsp;is&nbsp;simple&nbsp;enough&nbsp;that&nbsp;a&nbsp;good&nbsp;explanation&nbsp;will&nbsp;be&nbsp;forthcoming.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I’m&nbsp;trying&nbsp;to&nbsp;start&nbsp;and&nbsp;stop&nbsp;Twisted&nbsp;in&nbsp;its&nbsp;own&nbsp;thread,&nbsp;over&nbsp;and&nbsp;over. &nbsp;I’ve&nbsp;seen&nbsp;some&nbsp;notes&nbsp;that&nbsp;say&nbsp;this&nbsp;is&nbsp;a&nbsp;bad&nbsp;idea&nbsp;and&nbsp;that&nbsp;programs&nbsp;that&nbsp;do&nbsp;so&nbsp;should&nbsp;be&nbsp;restructured. &nbsp;But,&nbsp;it&nbsp;would&nbsp;really&nbsp;work&nbsp;better&nbsp;for&nbsp;this&nbsp;application&nbsp;if&nbsp;I&nbsp;could&nbsp;do&nbsp;it&nbsp;somehow.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;My&nbsp;controlling&nbsp;thread&nbsp;just&nbsp;wants&nbsp;to&nbsp;start&nbsp;Twisted,&nbsp;let&nbsp;it&nbsp;do&nbsp;its&nbsp;thing,&nbsp;and&nbsp;then&nbsp;let&nbsp;the&nbsp;thread&nbsp;stop. &nbsp;Later&nbsp;on,&nbsp;I’d&nbsp;like&nbsp;to&nbsp;do&nbsp;it&nbsp;again. &nbsp;In&nbsp;the&nbsp;example&nbsp;code&nbsp;below,&nbsp;the&nbsp;thread&nbsp;runs&nbsp;and&nbsp;stops&nbsp;fine&nbsp;in&nbsp;the&nbsp;first&nbsp;iteration. &nbsp;In&nbsp;the&nbsp;second&nbsp;iteration,&nbsp;it&nbsp;starts,&nbsp;seems&nbsp;to&nbsp;run&nbsp;okay,&nbsp;but&nbsp;it&nbsp;never&nbsp;stops. &nbsp;Is&nbsp;this&nbsp;an&nbsp;unreasonable&nbsp;request?&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;from&nbsp;threading&nbsp;import&nbsp;Thread&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;protocol&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;PORT&nbsp;=&nbsp;9999&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;class&nbsp;AgentManager(Thread):&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;   &nbsp;def&nbsp;run(self):&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;print&nbsp;&#39;\nstarting&nbsp;agentmanager&#39;,&nbsp;self&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;        reactor.connectTCP(&#39;localhost&#39;,&nbsp;PORT,&nbsp;AgentClientFactory())&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;reactor.listenTCP(PORT,&nbsp;AgentServerFactory())&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;        reactor.callLater(5,&nbsp;reactor.stop)&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;reactor.run(installSignalHandlers=0)&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;                       &nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;class&nbsp;Producer(protocol.Protocol):&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;   &nbsp;def&nbsp;connectionMade(self):&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;print&nbsp;&#39;connection&nbsp;made&#39;&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;self.transport.write(&#39;Hello&#39;)&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;    def&nbsp;connectionLost(self,&nbsp;reason):&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;print&nbsp;&#39;connection&nbsp;lost&#39;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;class&nbsp;Consumer(protocol.Protocol):&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;   &nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;print&nbsp;data&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;class&nbsp;AgentServerFactory(protocol.ServerFactory):&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;   &nbsp;protocol&nbsp;=&nbsp;Producer&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;        &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;class&nbsp;AgentClientFactory(protocol.ClientFactory):&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;   &nbsp;protocol&nbsp;=&nbsp;Consumer&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt; &lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;if&nbsp;__name__&nbsp;==&nbsp;&#39;__main__&#39;:&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;   &nbsp;for&nbsp;i&nbsp;in&nbsp;range(3):&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;mgr&nbsp;=&nbsp;AgentManager()&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;mgr.start()&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Courier&nbsp;New&quot;&quot;&gt;       &nbsp;mgr.join()&lt;/span&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&nbsp;target=&quot;_blank&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Jason&nbsp;Rennie&lt;br&gt;Research&nbsp;Scientist,&nbsp;ITA&nbsp;Software&lt;br&gt;617-714-2645&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.itasoftware.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.itasoftware.com/&lt;/a&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
