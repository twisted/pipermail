<tt>
I&nbsp;modified&nbsp;this&nbsp;example&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/projects/mail/documentation/tutorial/smtpclient/smtpclient-7.tac&quot;&gt;http://twistedmatrix.com/projects/mail/documentation/tutorial/smtpclient/smtpclient-7.tac&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;I&nbsp;am&nbsp;still&nbsp;not&nbsp;completely&nbsp;clear&nbsp;on&nbsp;what&nbsp;is&nbsp;happening&nbsp;&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;the&nbsp;help&lt;br&gt;Alvin&lt;br&gt;&lt;br&gt;&lt;br&gt;import&nbsp;StringIO&lt;br&gt;&lt;br&gt;from&nbsp;twisted.application&nbsp;import&nbsp;service&lt;br&gt;&lt;br&gt;application&nbsp;=&nbsp;service.Application(&quot;SMTP&nbsp;Client&nbsp;Tutorial&quot;)<br>
&lt;br&gt;&lt;br&gt;from&nbsp;twisted.application&nbsp;import&nbsp;internet&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;protocol&lt;br&gt;from&nbsp;twisted.mail&nbsp;import&nbsp;smtp&lt;br&gt;from&nbsp;twisted.mail.imap4&nbsp;import&nbsp;CramMD5ClientAuthenticator&lt;br&gt;&lt;br&gt;class&nbsp;SMTPTutorialClient(smtp.ESMTPClient<br>
):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;mailFrom&nbsp;=&nbsp;&quot;&lt;a&nbsp;href=&quot;mailto:from@sender.com&quot;&gt;from@sender.com&lt;/a&gt;&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;mailTo&nbsp;=&nbsp;&quot;&lt;a&nbsp;href=&quot;mailto:to@dest.com&quot;&gt;to@dest.com&lt;/a&gt;&quot;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;mailData&nbsp;=&nbsp;'''\&lt;br&gt;Date:&nbsp;Fri,&nbsp;6&nbsp;Feb&nbsp;2006&nbsp;10:14:39&nbsp;-0800<br>
&lt;br&gt;From:&nbsp;&lt;a&nbsp;href=&quot;mailto:from@sender.com&quot;&gt;from@sender.com&lt;/a&gt;&lt;br&gt;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:to@dest.com&quot;&gt;to@dest.com&lt;/a&gt;&lt;br&gt;Subject:&nbsp;Tutorate!&lt;br&gt;&lt;br&gt;Hello,&nbsp;how&nbsp;are&nbsp;you,&nbsp;goodbye.&lt;br&gt;'''&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getMailFrom(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;<br>
self.mailFrom&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.mailFrom&nbsp;=&nbsp;None&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getMailTo(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[self.mailTo]&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;getMailData(self):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;StringIO.StringIO(self.mailData)&lt;br&gt;<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;sentMail(self,&nbsp;code,&nbsp;resp,&nbsp;numOk,&nbsp;addresses,&nbsp;log):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;'Sent',&nbsp;numOk,&nbsp;'messages'&lt;br&gt;&lt;br&gt;class&nbsp;SMTPClientFactory(protocol.ClientFactory):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;protocol&nbsp;=&nbsp;SMTPTutorialClient&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.protocol(secret=None,&nbsp;identity='&lt;a&nbsp;href=&quot;http://sender.com&quot;&gt;sender.com&lt;/a&gt;')&lt;br&gt;&lt;br&gt;class&nbsp;SMTPClientFactory(protocol.ClientFactory):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;protocol&nbsp;=&nbsp;SMTPTutorialClient&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#def&nbsp;__init__(self,&nbsp;*a,&nbsp;**kw):<br>
&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;self.a,&nbsp;&lt;a&nbsp;href=&quot;http://self.kw&quot;&gt;self.kw&lt;/a&gt;&nbsp;=&nbsp;a,&nbsp;kw&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;=&nbsp;smtp.ESMTPClient('smtp_pw')&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.factory&nbsp;=&nbsp;self&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.requireAuthentication&nbsp;=&nbsp;True&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.authenticators&nbsp;=&nbsp;{'CRAM-MD5':&nbsp;CramMD5ClientAuthenticator('smtp_user')}&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;p&lt;br&gt;&lt;br&gt;smtpClientFactory&nbsp;=&nbsp;SMTPClientFactory()&lt;br&gt;&lt;br&gt;smtpClientService&nbsp;=&nbsp;internet.TCPClient('&lt;a&nbsp;href=&quot;http://smtp.1and1.com&quot;&gt;<br>
smtp.1and1.com&lt;/a&gt;',&nbsp;25,&nbsp;smtpClientFactory)&lt;br&gt;smtpClientService.setServiceParent(application)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;11/3/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Jean-Paul&nbsp;Calderone&lt;/b&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@divmod.com&quot;&gt;<br>
exarkun@divmod.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;On&nbsp;Fri,&nbsp;3&nbsp;Nov&nbsp;2006&nbsp;16:17:15&nbsp;-0800,&nbsp;Alvin&nbsp;Wang&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:alvinwang@gmail.com&quot;&gt;<br>
alvinwang@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&gt;Hi,&lt;br&gt;&gt;&lt;br&gt;&gt;I&nbsp;am&nbsp;new&nbsp;to&nbsp;twisted&nbsp;but&nbsp;google&nbsp;and&nbsp;the&nbsp;Oreilly&nbsp;book&nbsp;have&nbsp;failed&nbsp;me.&nbsp;&nbsp;I&nbsp;am&lt;br&gt;&gt;trying&nbsp;to&nbsp;create&nbsp;a&nbsp;client&nbsp;to&nbsp;send&nbsp;to&nbsp;a&nbsp;smtp&nbsp;server.&nbsp;&nbsp;All&nbsp;the&nbsp;examples&nbsp;that&nbsp;I&lt;br&gt;<br>
&gt;have&nbsp;found&nbsp;only&nbsp;work&nbsp;if&nbsp;your&nbsp;&nbsp;SMTP&nbsp;server&nbsp;does&nbsp;not&nbsp;require&nbsp;authentication.&lt;br&gt;&gt;&lt;br&gt;&gt;I&nbsp;am&nbsp;guessing&nbsp;that&nbsp;I&nbsp;need&nbsp;to&nbsp;use&lt;br&gt;&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/api/twisted.mail.smtp.ESMTPSenderFactory.html&quot;&gt;<br>
http://twistedmatrix.com/documents/current/api/twisted.mail.smtp.ESMTPSenderFactory.html&lt;/a&gt;&lt;br&gt;&gt;&lt;br&gt;&gt;&lt;br&gt;&gt;Unfortunately,&nbsp;I&nbsp;can&nbsp;find&nbsp;no&nbsp;examples&nbsp;that&nbsp;use&nbsp;it.&lt;br&gt;&gt;&lt;br&gt;&gt;I&nbsp;did&nbsp;find&nbsp;something&nbsp;from&nbsp;2004&lt;br&gt;&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-python/2004-April/007433.html&quot;&gt;<br>
http://twistedmatrix.com/pipermail/twisted-python/2004-April/007433.html&lt;/a&gt;&lt;br&gt;&lt;br&gt;This&nbsp;should&nbsp;still&nbsp;work.&lt;br&gt;&lt;br&gt;&gt;&lt;br&gt;&gt;That&nbsp;is&nbsp;prior&nbsp;to&nbsp;the&nbsp;commit&nbsp;for&nbsp;ESMTPSenderFactory&lt;br&gt;&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-commits/2004-July/011608.html&quot;&gt;<br>
http://twistedmatrix.com/pipermail/twisted-commits/2004-July/011608.html&lt;/a&gt;&lt;br&gt;&lt;br&gt;This&nbsp;changed&nbsp;ESMTPSenderFactory,&nbsp;but&nbsp;authentication&nbsp;was&nbsp;supported&nbsp;before&lt;br&gt;this&nbsp;commit.&nbsp;&nbsp;Give&nbsp;the&nbsp;code&nbsp;at&nbsp;the&nbsp;previous&nbsp;URL&nbsp;a&nbsp;try&nbsp;and&nbsp;post&nbsp;again&nbsp;if<br>
&lt;br&gt;you&nbsp;run&nbsp;into&nbsp;problems.&lt;br&gt;&lt;br&gt;Jean-Paul&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;<br>

</tt>
