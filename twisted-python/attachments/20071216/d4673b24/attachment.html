<tt>
&lt;br&gt;Hmm.&nbsp;&nbsp;This&nbsp;seems&nbsp;like&nbsp;a&nbsp;pretty&nbsp;nice&nbsp;solution,&nbsp;except&nbsp;that&nbsp;it&nbsp;seems&nbsp;it&nbsp;will&nbsp;be&nbsp;blocking&nbsp;incoming&nbsp;calls&nbsp;during&nbsp;processing.&nbsp;&nbsp;What&nbsp;I&nbsp;really&nbsp;need&nbsp;to&nbsp;do&nbsp;is&nbsp;pause&nbsp;the&nbsp;deferToThread&nbsp;objects&nbsp;based&nbsp;on&nbsp;their&nbsp;pid.&lt;br&gt;&lt;br&gt;How&nbsp;can&nbsp;I&nbsp;obtain&nbsp;the&nbsp;pid&nbsp;of&nbsp;a&nbsp;new&nbsp;deferToThread&nbsp;object?&nbsp;&nbsp;If&nbsp;I&nbsp;can&nbsp;obtain&nbsp;it,&nbsp;then&nbsp;I&nbsp;can&nbsp;just&nbsp;keep&nbsp;a&nbsp;persistent&nbsp;dictionary&nbsp;containing&nbsp;all&nbsp;the&nbsp;running&nbsp;compute-intensive&nbsp;processes,&nbsp;and&nbsp;unregister&nbsp;each&nbsp;one&nbsp;in&nbsp;a&nbsp;callback&nbsp;after&nbsp;it&nbsp;finishes&nbsp;up.&nbsp;&nbsp;Then,&nbsp;every&nbsp;time&nbsp;a&nbsp;new&nbsp;call&nbsp;comes&nbsp;in,&nbsp;I&nbsp;check&nbsp;my&nbsp;persistent&nbsp;pid&nbsp;dictionary/list,&nbsp;<br>
&lt;br&gt;for&nbsp;pid&nbsp;in&nbsp;pid_list:&lt;br&gt;&nbsp;&nbsp;os.kill(pid,&nbsp;signal.SIGSTOP)&lt;br&gt;&lt;br&gt;and&nbsp;every&nbsp;time&nbsp;a&nbsp;call&nbsp;finishes,&nbsp;I&nbsp;check&nbsp;the&nbsp;number&nbsp;of&nbsp;current&nbsp;calls,&nbsp;and&nbsp;then&nbsp;if&nbsp;we&#39;re&nbsp;back&nbsp;to&nbsp;zero,&nbsp;we&nbsp;resume&nbsp;the&nbsp;compute&nbsp;intensive&nbsp;processes&nbsp;again:&lt;br&gt;<br>
if&nbsp;parentObj.live_calls&nbsp;==&nbsp;0::&lt;br&gt;&nbsp;&nbsp;for&nbsp;pid&nbsp;in&nbsp;parentObj.pid_list:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;os.kill(pid,&nbsp;signal.SIGCONT)&lt;br&gt;&lt;br&gt;so,&nbsp;my&nbsp;new&nbsp;question&nbsp;is...&nbsp;&lt;br&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;How&nbsp;can&nbsp;I&nbsp;obtain&nbsp;the&nbsp;pid&nbsp;of&nbsp;a&nbsp;new&nbsp;deferToThread&nbsp;object?&nbsp;<br>
&lt;/span&gt;&nbsp;&lt;br&gt;&lt;br&gt;I&#39;m&nbsp;pretty&nbsp;sure&nbsp;that,&nbsp;while&nbsp;not&nbsp;very&nbsp;elegant,&nbsp;this&nbsp;should&nbsp;solve&nbsp;my&nbsp;problem&nbsp;-&nbsp;but&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;this&nbsp;sounds&nbsp;really,&nbsp;cockamamey!&lt;br&gt;&lt;br&gt;-Joe&lt;br&gt;&lt;br&gt;&gt;&nbsp;------------------------------&lt;br&gt;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Message:&nbsp;2&lt;br&gt;&gt;&nbsp;Date:&nbsp;Sat,&nbsp;15&nbsp;Dec&nbsp;2007&nbsp;07:50:02&nbsp;-0800&lt;br&gt;&gt;&nbsp;From:&nbsp;Ed&nbsp;Suominen&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:general@eepatents.com&quot;&gt;general@eepatents.com&lt;/a&gt;&gt;&lt;br&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;finer&nbsp;control&nbsp;of&nbsp;deferToThread&nbsp;?<br>
&lt;br&gt;&gt;&nbsp;To:&nbsp;Twisted&nbsp;general&nbsp;discussion&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&gt;&lt;br&gt;&gt;&nbsp;Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:4763F7AA.2090800@eepatents.com&quot;&gt;4763F7AA.2090800@eepatents.com<br>
&lt;/a&gt;&gt;&lt;br&gt;&gt;&nbsp;Content-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;You&nbsp;can&nbsp;do&nbsp;priority&nbsp;queuing&nbsp;to&nbsp;one&nbsp;or&nbsp;more&nbsp;threads&nbsp;using&nbsp;AsynQueue,&lt;br&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://foss.eepatents.com/AsynQueue&quot;&gt;http://foss.eepatents.com/AsynQueue<br>
&lt;/a&gt;&nbsp;or&nbsp;python-asynqueue&nbsp;in&nbsp;Debian.&nbsp;Use&lt;br&gt;&gt;&nbsp;multiple&nbsp;threads&nbsp;and&nbsp;queue&nbsp;up&nbsp;the&nbsp;compute-intensive&nbsp;calls&nbsp;with&nbsp;a&nbsp;low&lt;br&gt;&gt;&nbsp;priority&nbsp;and&nbsp;the&nbsp;other&nbsp;stuff&nbsp;with&nbsp;higher&nbsp;priorities.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;However,&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;chop&nbsp;up&nbsp;your&nbsp;compute-intensive&nbsp;stuff&nbsp;into<br>
&lt;br&gt;&gt;&nbsp;smaller&nbsp;pieces&nbsp;for&nbsp;this&nbsp;to&nbsp;be&nbsp;helpful.&nbsp;(That&#39;s&nbsp;good&nbsp;asynchronous&lt;br&gt;&gt;&nbsp;processing&nbsp;practice,&nbsp;generally.)&nbsp;The&nbsp;priority&nbsp;queuing&nbsp;is&nbsp;only&nbsp;effective&lt;br&gt;&gt;&nbsp;at&nbsp;deciding&nbsp;which&nbsp;calls&nbsp;to&nbsp;dispatch&nbsp;next,&nbsp;and&nbsp;each&nbsp;thread&nbsp;call&nbsp;is&nbsp;on&nbsp;its<br>
&lt;br&gt;&gt;&nbsp;own&nbsp;once&nbsp;it&nbsp;is&nbsp;dispatched&nbsp;from&nbsp;the&nbsp;queue.&nbsp;Each&nbsp;call&nbsp;uses&nbsp;an&nbsp;entire&lt;br&gt;&gt;&nbsp;thread&nbsp;for&nbsp;its&nbsp;entire&nbsp;duration,&nbsp;and&nbsp;will&nbsp;keep&nbsp;the&nbsp;queue&nbsp;from&nbsp;dispatching&lt;br&gt;&gt;&nbsp;anything&nbsp;else&nbsp;to&nbsp;that&nbsp;thread&nbsp;while&nbsp;it&#39;s&nbsp;squatting&nbsp;on&nbsp;it,&nbsp;no&nbsp;matter&nbsp;how<br>
&lt;br&gt;&gt;&nbsp;low-priority&nbsp;it&nbsp;is.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Best&nbsp;regards,&nbsp;Ed&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Josef&nbsp;Novak&nbsp;wrote:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Hi,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;I&nbsp;am&nbsp;writing&nbsp;a&nbsp;twisted&nbsp;application&nbsp;using&nbsp;StarPY&nbsp;fastagi&nbsp;API&nbsp;for&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Asterisk.&nbsp;&nbsp;My&nbsp;application&nbsp;involves&nbsp;answering&nbsp;user&nbsp;calls,&nbsp;and&nbsp;then<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;based&nbsp;on&nbsp;their&nbsp;responses&nbsp;to&nbsp;an&nbsp;IVR&nbsp;dialogue,&nbsp;running&nbsp;some&nbsp;some&lt;br&gt;&gt;&nbsp;&gt;&nbsp;compute-intensive&nbsp;applications&nbsp;on&nbsp;the&nbsp;same&nbsp;server,&nbsp;after&nbsp;they&nbsp;hang&nbsp;up.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;At&nbsp;the&nbsp;moment&nbsp;I&nbsp;am&nbsp;running&nbsp;the&nbsp;compute-intensive&nbsp;application&nbsp;(3rd<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;party&nbsp;code)&nbsp;in&nbsp;a&nbsp;deferred.deferToThread.&nbsp;&nbsp;The&nbsp;application&nbsp;works&nbsp;fine,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;however&nbsp;if&nbsp;the&nbsp;number&nbsp;of&nbsp;callers&nbsp;goes&nbsp;above&nbsp;2-3,&nbsp;and&nbsp;one&nbsp;of&nbsp;the&lt;br&gt;&gt;&nbsp;&gt;&nbsp;compute-intensive&nbsp;applications&nbsp;from&nbsp;a&nbsp;previous&nbsp;call&nbsp;has&nbsp;not&nbsp;finished<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;up,&nbsp;the&nbsp;audio&nbsp;for&nbsp;the&nbsp;call&nbsp;gets&nbsp;very&nbsp;jumpy&nbsp;because&nbsp;of&nbsp;CPU&nbsp;usage.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;This&nbsp;compute-intensive&nbsp;process&nbsp;needs&nbsp;to&nbsp;be&nbsp;run&nbsp;immediately&nbsp;after&lt;br&gt;&gt;&nbsp;&gt;&nbsp;hangup,&nbsp;and&nbsp;I&#39;d&nbsp;prefer&nbsp;to&nbsp;take&nbsp;care&nbsp;of&nbsp;everything&nbsp;on&nbsp;the&nbsp;same&nbsp;machine<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;(rather&nbsp;than&nbsp;send&nbsp;the&nbsp;compute-intensive&nbsp;application&nbsp;request&nbsp;somewhere&lt;br&gt;&gt;&nbsp;&gt;&nbsp;else).&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;What&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;do&nbsp;is&nbsp;pause&nbsp;the&nbsp;thread&nbsp;with&nbsp;the&lt;br&gt;&gt;&nbsp;&gt;&nbsp;deferred.deferToThread&nbsp;process&nbsp;any&nbsp;time&nbsp;a&nbsp;new&nbsp;&nbsp;call&nbsp;comes&nbsp;in&nbsp;(this<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;sort&nbsp;of&nbsp;violates&nbsp;what&nbsp;I&#39;m&nbsp;saying&nbsp;above&nbsp;but&nbsp;the&nbsp;number&nbsp;of&nbsp;calls&nbsp;going&lt;br&gt;&gt;&nbsp;&gt;&nbsp;to&nbsp;a&nbsp;particular&nbsp;ASterisk&nbsp;trunk&nbsp;is&nbsp;limited&nbsp;so&nbsp;in&nbsp;most&nbsp;cases&nbsp;this&nbsp;would&lt;br&gt;&gt;&nbsp;&gt;&nbsp;never&nbsp;result&nbsp;in&nbsp;more&nbsp;than&nbsp;a&nbsp;couple-seconds&nbsp;delay,&nbsp;which&nbsp;is<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;acceptable).&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;control&nbsp;these&nbsp;deferred.deferToThread&nbsp;objects&nbsp;in&lt;br&gt;&gt;&nbsp;&gt;&nbsp;a&nbsp;more&nbsp;fine-grained&nbsp;manner?&nbsp;&nbsp;Say&nbsp;from&nbsp;a&nbsp;reactor&nbsp;factory?&nbsp;&nbsp;Can&nbsp;I&lt;br&gt;&gt;&nbsp;&gt;&nbsp;register&nbsp;them&nbsp;separately&nbsp;somehow,&nbsp;and&nbsp;then&nbsp;pause&nbsp;these<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;compute-intensive&nbsp;applications&nbsp;temporarily&nbsp;every&nbsp;time&nbsp;a&nbsp;new&nbsp;call&nbsp;comes&lt;br&gt;&gt;&nbsp;&gt;&nbsp;in?&nbsp;&nbsp;I&#39;m&nbsp;imagining&nbsp;something&nbsp;as&nbsp;simple&nbsp;as&nbsp;as&nbsp;ctrl+z&nbsp;and&nbsp;$&nbsp;fg&nbsp;linux&lt;br&gt;&gt;&nbsp;&gt;&nbsp;terminal&nbsp;commands...&nbsp;but&nbsp;I&nbsp;appreciate&nbsp;that&nbsp;it&nbsp;is&nbsp;probably&nbsp;not&nbsp;so<br>
&lt;br&gt;&gt;&nbsp;&gt;&nbsp;straightforward.&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;-Joe&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;<br>
Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;------------------------------&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;&gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;<br>
Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;End&nbsp;of&nbsp;Twisted-Python&nbsp;Digest,&nbsp;Vol&nbsp;45,&nbsp;Issue&nbsp;18<br>
&lt;br&gt;&gt;&nbsp;**********************************************&lt;br&gt;&gt;&nbsp;&lt;br&gt;<br>

</tt>
