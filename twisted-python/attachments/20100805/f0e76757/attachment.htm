<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;div&gt;On&nbsp;Aug&nbsp;5,&nbsp;2010,&nbsp;at&nbsp;12:44&nbsp;AM,&nbsp;Valeriy&nbsp;Zamarayev&nbsp;wrote:&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;Hello,&nbsp;all.&lt;br&gt;&lt;br&gt;There&nbsp;have&nbsp;been&nbsp;a&nbsp;few&nbsp;questions&nbsp;on&nbsp;this&nbsp;list&nbsp;about&nbsp;how&nbsp;to&nbsp;configure&lt;br&gt;Twisted&nbsp;logging&nbsp;via&nbsp;plugins,&nbsp;as&nbsp;opposed&nbsp;to&nbsp;.tac&nbsp;files.&nbsp;And&nbsp;we&nbsp;now&nbsp;know&lt;br&gt;about&nbsp;the&nbsp;#638&nbsp;and&nbsp;#3534&nbsp;tickets.&nbsp;Hopefully,&nbsp;they&nbsp;will&nbsp;be&nbsp;resolved&lt;br&gt;soon.&lt;br&gt;&lt;br&gt;But&nbsp;before&nbsp;this&nbsp;happens,&nbsp;it&nbsp;seems&nbsp;to&nbsp;me&nbsp;there's&nbsp;no&nbsp;other&nbsp;way&nbsp;to&nbsp;handle&lt;br&gt;this&nbsp;than&nbsp;to&nbsp;use&nbsp;a&nbsp;&quot;monkey&nbsp;patching&quot;&nbsp;techinque&nbsp;on&nbsp;Twisted&nbsp;(excluding&lt;br&gt;patching&nbsp;the&nbsp;Twisted&nbsp;source&nbsp;code&nbsp;itself).&lt;br&gt;&lt;br&gt;We&nbsp;need&nbsp;to&nbsp;access&nbsp;the&nbsp;'application'&nbsp;object&nbsp;when&nbsp;the&nbsp;server&nbsp;starts.&nbsp;We&lt;br&gt;can&nbsp;do&nbsp;this&nbsp;when&nbsp;the&nbsp;'twistd'&nbsp;code&nbsp;calls&nbsp;setServiceParent&nbsp;on&nbsp;the&lt;br&gt;service&nbsp;returned&nbsp;by&nbsp;the&nbsp;plugin.&nbsp;So&nbsp;if&nbsp;we&nbsp;wrap&nbsp;setServiceParent,&nbsp;we&nbsp;can&lt;br&gt;access&nbsp;the&nbsp;application&nbsp;object&nbsp;and&nbsp;do&nbsp;what&nbsp;we&nbsp;want.&lt;br&gt;&lt;br&gt;See&nbsp;the&nbsp;code:&nbsp;&amp;nbsp;&lt;a&nbsp;href=&quot;http://gist.github.com/505926&quot;&gt;http://gist.github.com/505926&lt;/a&gt;&lt;br&gt;&lt;br&gt;This&nbsp;works&nbsp;for&nbsp;me.&nbsp;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;a&nbsp;better&nbsp;and&nbsp;less&nbsp;dangerous&nbsp;way&nbsp;to&lt;br&gt;achieve&nbsp;the&nbsp;same&nbsp;exists.&nbsp;Maybe&nbsp;there&nbsp;is&nbsp;one?&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;actually&nbsp;looks&nbsp;pretty&nbsp;ingenious&nbsp;to&nbsp;me!&nbsp;&amp;nbsp;It&nbsp;uses&nbsp;public&nbsp;APIs...&nbsp;mostly.&nbsp;&amp;nbsp;I'd&nbsp;have&nbsp;to&nbsp;think&nbsp;pretty&nbsp;hard&nbsp;about&nbsp;whether&nbsp;this&nbsp;particular&nbsp;interface&nbsp;is&nbsp;actually&nbsp;&lt;i&gt;supported&lt;/i&gt;,&nbsp;of&nbsp;course,&nbsp;since&nbsp;you're&nbsp;depending&nbsp;on&nbsp;extra&nbsp;stuff&nbsp;from&nbsp;your&nbsp;service&nbsp;parent&nbsp;which&nbsp;hypothetically&nbsp;may&nbsp;not&nbsp;actually&nbsp;be&nbsp;there.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you're&nbsp;looking&nbsp;for&nbsp;aesthetic&nbsp;advice,&nbsp;it&nbsp;would&nbsp;be&nbsp;a&nbsp;bit&nbsp;nicer&nbsp;to&nbsp;use&nbsp;something&nbsp;like&amp;nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/10.1.0/api/twisted.python.components.html#proxyForInterface&quot;&gt;proxyForInterface&lt;/a&gt;&amp;nbsp;and&nbsp;&lt;i&gt;wrap&lt;/i&gt;&amp;nbsp;the&nbsp;underlying&nbsp;service,&nbsp;rather&nbsp;than&nbsp;setting&nbsp;an&nbsp;attribute&nbsp;on&nbsp;it&nbsp;and&nbsp;clobbering&nbsp;its&nbsp;setServiceParent&nbsp;method.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Also...&nbsp;you&nbsp;could&nbsp;write&nbsp;a&nbsp;twistd&nbsp;plugin&nbsp;that&nbsp;could&nbsp;be&nbsp;used&nbsp;directly,&nbsp;instead&nbsp;of&nbsp;code&nbsp;that&nbsp;needs&nbsp;to&nbsp;be&nbsp;adapted&nbsp;/&nbsp;re-written&nbsp;for&nbsp;each&nbsp;different&nbsp;twistd&nbsp;plugin.&nbsp;&amp;nbsp;Your&nbsp;code&nbsp;can&nbsp;scan&nbsp;the&nbsp;IServiceMaker&nbsp;plugin&nbsp;registry&nbsp;just&nbsp;as&nbsp;well&nbsp;as&nbsp;twistd&nbsp;itself&nbsp;can.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;you&nbsp;could&nbsp;have&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;twistd&nbsp;my-custom-logger&nbsp;--my-log-option-1&nbsp;--my-log-option-2&nbsp;web&nbsp;--path&nbsp;~/public_html&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;have&nbsp;the&nbsp;my-custom-logger&nbsp;plugin&nbsp;delegate&nbsp;to&nbsp;all&nbsp;twistd&nbsp;subcommands.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That's&nbsp;a&nbsp;pattern&nbsp;which&nbsp;should&nbsp;remain&nbsp;useful&nbsp;even&nbsp;after&nbsp;#638&nbsp;is&nbsp;fixed.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Code&nbsp;to&nbsp;do&nbsp;this&nbsp;properly&nbsp;is&nbsp;left&nbsp;as&nbsp;an&nbsp;exercise&nbsp;for&nbsp;the&nbsp;reader,&nbsp;of&nbsp;course&nbsp;:).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
