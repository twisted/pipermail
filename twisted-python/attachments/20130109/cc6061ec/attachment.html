<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;very&nbsp;similar&nbsp;question&nbsp;to&nbsp;the&nbsp;one&nbsp;that&nbsp;Vye&nbsp;Wilson&lt;br&gt;recently&nbsp;asked,&nbsp;&quot;Subject:&nbsp;What&nbsp;is&nbsp;The&nbsp;Correct&nbsp;Way&nbsp;to&nbsp;Close&nbsp;a&nbsp;Twisted&nbsp;Conch&nbsp;SSH&nbsp;Connection?&quot;&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;using&nbsp;Twisted&nbsp;Conch&nbsp;to&nbsp;write&nbsp;a&nbsp;program&nbsp;that&lt;br&gt;<br>
ssh&#39;s&nbsp;into&nbsp;multiple&nbsp;machines&nbsp;and&nbsp;executes&nbsp;a&nbsp;single&nbsp;command.&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;basically&nbsp;trying&nbsp;to&nbsp;do&nbsp;the&nbsp;equivalent&nbsp;of:&lt;br&gt;&lt;br&gt;for&nbsp;host&nbsp;in&nbsp;host1&nbsp;host2&nbsp;host3&lt;br&gt;do&lt;br&gt;    &nbsp;ssh &nbsp;user@host&nbsp;&quot;cat&nbsp;/etc/hosts&quot;&lt;br&gt;done&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;To&nbsp;start&nbsp;things&nbsp;off,&nbsp;I&nbsp;took&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/conch/examples/sshsimpleclient.py&quot;&gt;http://twistedmatrix.com/documents/current/conch/examples/sshsimpleclient.py&lt;/a&gt;&lt;br&gt;and&nbsp;started&nbsp;modifying&nbsp;it. &nbsp;Here&nbsp;is&nbsp;the&nbsp;code&nbsp;which&nbsp;I&nbsp;have:&lt;br&gt;<br>
&lt;br&gt;&lt;a&nbsp;href=&quot;http://pastebin.com/RXhjUcrS&quot;&gt;http://pastebin.com/RXhjUcrS&lt;/a&gt;&lt;br&gt;&lt;br&gt;The&nbsp;problem&nbsp;is,&nbsp;I&nbsp;can&#39;t&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;tell&nbsp;when&nbsp;a&nbsp;command&nbsp;has&lt;br&gt;completed,&nbsp;so&nbsp;that&nbsp;I&nbsp;can&nbsp;call&nbsp;reactor.stop().&lt;br&gt;&lt;br&gt;Not&nbsp;in&nbsp;the&nbsp;code&nbsp;example&nbsp;I&nbsp;posted&nbsp;above,&nbsp;I&nbsp;tried&nbsp;to&nbsp;use&nbsp;a&nbsp;DeferredList&nbsp;by&nbsp;following&nbsp;the&nbsp;example&nbsp;code&nbsp;in&nbsp;this&nbsp;blog&lt;br&gt;<br>
post:&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://technicae.cogitat.io/2008/06/async-batching-with-twisted-walkthrough.html&quot;&gt;http://technicae.cogitat.io/2008/06/async-batching-with-twisted-walkthrough.html&lt;/a&gt;&lt;br&gt;&lt;br&gt;but&nbsp;I&nbsp;ran&nbsp;into&nbsp;the&nbsp;same&nbsp;problem&nbsp;where&nbsp;I&nbsp;couldn&#39;t&nbsp;figure&nbsp;out&nbsp;how&lt;br&gt;<br>
to&nbsp;tell&nbsp;when&nbsp;my&nbsp;command&nbsp;over&nbsp;SSH&nbsp;had&nbsp;terminated.&lt;br&gt;&lt;br&gt;As&nbsp;a&nbsp;kluge,&nbsp;I&nbsp;called&nbsp;reactor.callLater()&nbsp;with&nbsp;a&nbsp;timeout&nbsp;of&lt;br&gt;20&nbsp;seconds,&nbsp;and&nbsp;then&nbsp;called&nbsp;reactor.stop().&lt;br&gt;&lt;br&gt;Any&nbsp;ideas&nbsp;as&nbsp;to&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong?&lt;br&gt;Where&nbsp;in&nbsp;the&nbsp;Conch&nbsp;framework&nbsp;can&nbsp;I&nbsp;tell&nbsp;when&nbsp;a&nbsp;command&lt;br&gt;<br>
over&nbsp;SSH&nbsp;has&nbsp;finished?&lt;br&gt;&lt;br&gt;Thanks.&lt;br&gt;&lt;br&gt;--&lt;br&gt;Craig&nbsp;Rodrigues&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:rodrigc@crodrigues.org&quot;&gt;rodrigc@crodrigues.org&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
