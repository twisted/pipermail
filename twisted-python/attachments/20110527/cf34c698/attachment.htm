<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;26,&nbsp;2011&nbsp;at&nbsp;9:38&nbsp;AM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;br&gt;<br>
In&nbsp;addition&nbsp;to&nbsp;what&nbsp;Andrew&nbsp;said,&nbsp;I&amp;#39;ll&nbsp;also&nbsp;point&nbsp;out&nbsp;that&nbsp;rather&nbsp;than&lt;br&gt;<br>
making&nbsp;code&nbsp;that&nbsp;expects&nbsp;blocking&nbsp;writes&nbsp;to&nbsp;stdout&nbsp;work&nbsp;by&nbsp;putting&lt;br&gt;<br>
stdout&nbsp;back&nbsp;into&nbsp;blocking&nbsp;mode,&nbsp;you&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;by&nbsp;instead&lt;br&gt;<br>
providing&nbsp;a&nbsp;stdout&nbsp;which&nbsp;will&nbsp;buffer&nbsp;anything&nbsp;that&nbsp;cannot&nbsp;immediately&nbsp;be&lt;br&gt;<br>
written&nbsp;non-blockingly.&nbsp; StandardIO&nbsp;gives&nbsp;you&nbsp;exactly&nbsp;this;&nbsp;its&nbsp;`write`&lt;br&gt;<br>
knows&nbsp;how&nbsp;to&nbsp;deal&nbsp;with&nbsp;non-blocking&nbsp;descriptors&nbsp;and&nbsp;buffer&nbsp;as&nbsp;necessary.&lt;br&gt;<br>
This&nbsp;is&nbsp;why&nbsp;manhole&nbsp;doesn&amp;#39;t&nbsp;have&nbsp;the&nbsp;same&nbsp;problem&nbsp;as&nbsp;your&nbsp;code&nbsp;calling&lt;br&gt;<br>
directly&nbsp;into&nbsp;`code.interact`.&nbsp; For&nbsp;details,&lt;br&gt;<br>
&amp;lt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/browser/trunk/twisted/conch/manhole.py#L45&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/trac/browser/trunk/twisted/conch/manhole.py#L45&lt;/a&gt;&amp;gt;.&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Thanks. &nbsp;I&amp;#39;m&nbsp;having&nbsp;trouble&nbsp;integrating&nbsp;this&nbsp;or&nbsp;Andrew&amp;#39;s&nbsp;idea&nbsp;into&nbsp;my&nbsp;example. &nbsp;The&nbsp;simplest&nbsp;case&nbsp;doesn&amp;#39;t&nbsp;quite&nbsp;work&nbsp;right&nbsp;for&nbsp;me&nbsp;(I&nbsp;see&nbsp;&amp;#39;&amp;gt;&amp;gt;&amp;gt;&amp;#39;&nbsp;prompts,&nbsp;and&nbsp;can&nbsp;interact&nbsp;with&nbsp;the&nbsp;python&nbsp;interpreter&nbsp;but&nbsp;the&nbsp;banner&nbsp;appears&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;REPL&nbsp;after&nbsp;I&nbsp;press&nbsp;Ctrl+D,&nbsp;and&nbsp;then&nbsp;I&nbsp;never&nbsp;see&nbsp;the&nbsp;&amp;#39;&amp;gt;&amp;#39;&nbsp;prompts&nbsp;from&nbsp;my&nbsp;original&nbsp;program&nbsp;anymore)...was&nbsp;this&nbsp;what&nbsp;you&nbsp;had&nbsp;in&nbsp;mind? &nbsp;See&nbsp;the&nbsp;diff&nbsp;below.&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;face=&quot;Calibri,&nbsp;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;&lt;div&gt;@@&nbsp;-6,6&nbsp;+6,7&nbsp;@@&lt;/div&gt;<br>
&lt;div&gt;&nbsp;without&nbsp;blocking&nbsp;the&nbsp;reactor.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;+import&nbsp;sys&lt;/div&gt;<br>
&lt;div&gt;&nbsp;from&nbsp;twisted.internet&nbsp;import&nbsp;stdio&lt;/div&gt;<br>
&lt;div&gt;&nbsp;from&nbsp;twisted.protocols&nbsp;import&nbsp;basic&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;@@&nbsp;-22,7&nbsp;+23,8&nbsp;@@&lt;/div&gt;<br>
&lt;div&gt;        &nbsp;code.interact()&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;<br>
&lt;div&gt;&nbsp;def&nbsp;main():&lt;/div&gt;<br>
&lt;div&gt;-   &nbsp;stdio.StandardIO(Echo())&lt;/div&gt;<br>
&lt;div&gt;+   &nbsp;stdio_obj&nbsp;=&nbsp;stdio.StandardIO(Echo())&lt;/div&gt;<br>
&lt;div&gt;+   &nbsp;sys.stderr&nbsp;=&nbsp;stdio_obj&lt;/div&gt;<br>
&lt;div&gt;    &nbsp;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;/div&gt;<br>
&lt;div&gt;    &nbsp;reactor.run()&lt;/div&gt;&lt;/font&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Benjamin&lt;br&gt;<br>

</tt>
