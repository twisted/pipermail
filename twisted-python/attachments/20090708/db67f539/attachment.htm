<tt>
&lt;font&nbsp;style=&quot;font-family:&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;10pt&quot;&gt;I&nbsp;got&nbsp;just&nbsp;what&nbsp;I&nbsp;needed&nbsp;with&nbsp;a&nbsp;custom&nbsp;TerminalRealm&nbsp;sending&nbsp;the&nbsp;avatarId&nbsp;and&nbsp;TerminalUser&nbsp;to&nbsp;a&nbsp;custom&nbsp;TerminalSession,&nbsp;grabbing&nbsp;client&nbsp;host,&nbsp;port,&nbsp;sessionno&nbsp;and&nbsp;terminal&nbsp;at&nbsp;openShell();&nbsp;then&nbsp;put&nbsp;in&nbsp;some&nbsp;cleanup&nbsp;on&nbsp;closed().&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;pointing&nbsp;me&nbsp;right&nbsp;where&nbsp;I&nbsp;needed&nbsp;to&nbsp;go!&lt;br&gt;&lt;br&gt;------------------------------&lt;br&gt;&lt;br&gt;On&nbsp;Sat,&nbsp;4&nbsp;Jul&nbsp;2009&nbsp;02:11:36&nbsp;-0700,&nbsp;asset&nbsp;&nbsp;wrote:&lt;br&gt;&amp;gt;Ive&nbsp;been&nbsp;at&nbsp;it&nbsp;for&nbsp;several&nbsp;days&nbsp;now&nbsp;trying&nbsp;to&nbsp;get&nbsp;at&nbsp;the&nbsp;username&lt;br&gt;&amp;gt;(avatarId),&nbsp;session&nbsp;id&nbsp;(SSHChannel&nbsp;session&nbsp;#&nbsp;I&nbsp;imagine),&nbsp;and&nbsp;terminal&lt;br&gt;&amp;gt;protocol&nbsp;instance&nbsp;(recvline.HistoricRecvLine)&nbsp;of&nbsp;my&nbsp;application's&nbsp;SSH&lt;br&gt;&amp;gt;terminal&nbsp;service's&nbsp;clients.&nbsp;&nbsp;Specifically,&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;expose&nbsp;these&nbsp;three&lt;br&gt;&amp;gt;things&nbsp;(for&nbsp;all&nbsp;connected&nbsp;users)&nbsp;to&nbsp;my&nbsp;terminal&nbsp;commands&nbsp;which&nbsp;are&nbsp;using&lt;br&gt;&amp;gt;the&nbsp;plugin&nbsp;system.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;I'm&nbsp;not&nbsp;considerably&nbsp;far&nbsp;off&nbsp;from&nbsp;this&nbsp;example&nbsp;for&nbsp;the&nbsp;setup,&lt;br&gt;&amp;gt;&lt;a&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;http://twistedmatrix.com/projects/conch/documentation/examples/demo_recvline&quot;&gt;http://twistedmatrix.com/projects/conch/documentation/examples/demo_recvline&lt;/a&gt;&lt;br&gt;&amp;gt;.tac,&nbsp;minus&nbsp;the&nbsp;telnet&nbsp;support.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;For&nbsp;the&nbsp;life&nbsp;of&nbsp;me&nbsp;I&nbsp;can't&nbsp;seem&nbsp;to&nbsp;determine&nbsp;how&nbsp;best&nbsp;to&nbsp;approach&nbsp;this.&lt;br&gt;&amp;gt;Ive&nbsp;come&nbsp;as&nbsp;far&nbsp;as&nbsp;getting&nbsp;a&nbsp;list&nbsp;of&nbsp;the&nbsp;terminal&nbsp;recvline.HistoricRecvLine&lt;br&gt;&amp;gt;instances&nbsp;and&nbsp;then&nbsp;being&nbsp;able&nbsp;to&nbsp;manipulate&nbsp;the&nbsp;client&nbsp;terminals&nbsp;directly,&lt;br&gt;&amp;gt;but&nbsp;I&nbsp;need&nbsp;the&nbsp;usernames&nbsp;from&nbsp;the&nbsp;avatars&nbsp;and&nbsp;session&nbsp;id&nbsp;as&nbsp;well.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;I&nbsp;imagine&nbsp;this&nbsp;is&nbsp;a&nbsp;pretty&nbsp;common&nbsp;and&nbsp;simple&nbsp;thing,&nbsp;so&nbsp;I'm&nbsp;hoping&nbsp;that&lt;br&gt;&amp;gt;somebody&nbsp;can&nbsp;point&nbsp;me&nbsp;in&nbsp;the&nbsp;right&nbsp;direction.&nbsp;&nbsp;Please&nbsp;help&nbsp;if&nbsp;you&nbsp;can.&lt;br&gt;&lt;br&gt;The&nbsp;realm's&nbsp;requestAvatar&nbsp;is&nbsp;passed&nbsp;the&nbsp;avatarId:&lt;br&gt;&lt;br&gt;&lt;a&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;http://twistedmatrix.com/trac/browser/trunk/twisted/conch/manhole_ssh.py#L82&quot;&gt;http://twistedmatrix.com/trac/browser/trunk/twisted/conch/manhole_ssh.py#L82&lt;/a&gt;&lt;br&gt;&lt;br&gt;See&nbsp;how&nbsp;this&nbsp;realm&nbsp;(which&nbsp;I&nbsp;assume&nbsp;is&nbsp;the&nbsp;one&nbsp;you're&nbsp;using,&nbsp;since&nbsp;it&nbsp;is&nbsp;the&lt;br&gt;one&nbsp;used&nbsp;by&nbsp;demo_recvline)&nbsp;passes&nbsp;the&nbsp;avatarId&nbsp;to&nbsp;its&nbsp;`userFactory?,&nbsp;but&nbsp;the&lt;br&gt;`TerminalUser?&nbsp;which&nbsp;is&nbsp;the&nbsp;default&nbsp;`userFactory?&nbsp;ignores&nbsp;it.&lt;br&gt;&lt;br&gt;It&nbsp;seems&nbsp;like&nbsp;you&nbsp;want&nbsp;to&nbsp;provide&nbsp;an&nbsp;alternate&nbsp;`userFactory?&nbsp;which&nbsp;saves&nbsp;the&lt;br&gt;avatarId&nbsp;passed&nbsp;to&nbsp;it.&lt;br&gt;&lt;br&gt;For&nbsp;the&nbsp;session&nbsp;id,&nbsp;perhaps&nbsp;this&nbsp;information&nbsp;you&nbsp;can&nbsp;find&nbsp;on&nbsp;the&nbsp;connection&lt;br&gt;object.&nbsp;&nbsp;See&nbsp;the&nbsp;API&nbsp;documentation:&lt;br&gt;&lt;br&gt;&lt;a&nbsp;target=&quot;_blank&quot;&nbsp;href=&quot;http://twistedmatrix.com/documents/current/api/twisted.conch.ssh.connection.SSHConnection.html&quot;&gt;http://twistedmatrix.com/documents/current/api/twisted.conch.ssh.connection.SSHConnection.html&lt;/a&gt;&lt;br&gt;&lt;br&gt;Jean-Paul&lt;br&gt;&lt;br&gt;&lt;/font&gt;<br>

</tt>
