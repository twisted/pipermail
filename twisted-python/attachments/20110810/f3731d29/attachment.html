<tt>
&lt;div&gt;Hi,&nbsp;fellow&nbsp;programmers.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;very&nbsp;long&nbsp;blocking&nbsp;thread(may&nbsp;not&nbsp;be&nbsp;finished)&nbsp;in&nbsp;Twisted.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin-top:&nbsp;0px;&nbsp;margin-right:&nbsp;0px;&nbsp;margin-bottom:&nbsp;0px;&nbsp;margin-left:&nbsp;0.8ex;&nbsp;border-left-width:&nbsp;1px;&nbsp;border-left-color:&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-left-style:&nbsp;solid;&nbsp;padding-left:&nbsp;1ex;&nbsp;&quot;&gt;<br>
<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#993399&quot;&gt;from&nbsp;&lt;/font&gt;socket&nbsp;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#993399&quot;&gt;import&nbsp;&lt;/font&gt;*&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#993399&quot;&gt;from&nbsp;&lt;/font&gt;twisted.internet&nbsp;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#993399&quot;&gt;import&nbsp;&lt;/font&gt;reactor&lt;br&gt;<br>
<br>
&lt;/span&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc9933&quot;&gt;def &lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#339999&quot;&gt;consuming&lt;/font&gt;():&lt;br&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt; &nbsp; &nbsp;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc9933&quot;&gt;while&nbsp;&lt;/font&gt;reactor.running:&lt;br&gt;<br>
<br>
&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp;amqp_consumer.wait()&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#6666cc&quot;&gt;&nbsp;#&nbsp;waiting&nbsp;for&nbsp;very&nbsp;long&nbsp;time&nbsp;or&nbsp;forever&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;reactor.callInThread(consuming)&lt;/font&gt;&lt;/blockquote&gt;<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;process&nbsp;follows&nbsp;the&nbsp;below&nbsp;timeline:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt;&gt;--:&nbsp;Started&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt;---:&nbsp;Process&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;--&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc0000&quot;&gt;X&lt;/font&gt;:&nbsp;Terminated&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt; ^&nbsp;:&nbsp;Keyboard&nbsp;Input&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;color=&quot;#ffffff&quot;&gt; Now &lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt;main&nbsp;loop&nbsp;|&gt;--------------------&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc0000&quot;&gt;X&lt;/font&gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt; &nbsp; thread&nbsp;|&nbsp;&gt;--------------------------------------------...&nbsp;long&nbsp;time&nbsp;later&nbsp;...---&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc0000&quot;&gt;X&lt;/font&gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[Ctrl]+C&lt;/font&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;background-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;&quot;&gt; Ideal &lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt;main&nbsp;loop&nbsp;|&gt;--------------------&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc0000&quot;&gt;X&lt;/font&gt;&lt;/span&gt;&lt;br&gt;<br>
<br>
&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;&#39;courier&nbsp;new&#39;,&nbsp;monospace;&nbsp;&quot;&gt; &nbsp; thread&nbsp;|&nbsp;&gt;-------------------&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#cc0000&quot;&gt;X&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt;&lt;div&gt;<br>
<br>
&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;face=&quot;&#39;courier&nbsp;new&#39;,&nbsp;monospace&quot;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [Ctrl]+C&lt;/font&gt;&lt;div&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;To&nbsp;solve&nbsp;this&nbsp;problem,&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;set&nbsp;threads&nbsp;as&nbsp;daemon. So&nbsp;that&nbsp;all&nbsp;related&nbsp;threads&nbsp;are&nbsp;terminated&nbsp;when&nbsp;main&nbsp;loop&nbsp;is&nbsp;interrupted. Any&nbsp;idea&nbsp;on&nbsp;this&nbsp;problem&nbsp;will&nbsp;be&nbsp;appreciated.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;<br>
<br>
&lt;font&nbsp;color=&quot;#CCCCCC&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#CCCCCC&quot;&gt;–––––––––––––––––––––––––––&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;size=&quot;4&quot;&gt;&lt;b&gt;&lt;div&nbsp;style=&quot;text-align:left;font-family:arial;font-weight:normal;font-size:small&quot;&gt;<br>
<br>
&lt;span&nbsp;style=&quot;font-family:arial,&nbsp;helvetica,&nbsp;sans-serif;font-size:large&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-family:arial;font-size:small;font-weight:normal&quot;&gt;&lt;div&nbsp;style=&quot;text-align:left;display:inline&nbsp;!important&quot;&gt;&lt;span&nbsp;style=&quot;font-family:arial,&nbsp;helvetica,&nbsp;sans-serif;font-size:large&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-family:arial;font-weight:normal;font-size:small&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:large&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Heungsub &lt;/font&gt;&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;font-family:arial,&nbsp;helvetica,&nbsp;sans-serif;font-size:large&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-family:arial;font-weight:normal;font-size:small&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:large&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Lee&lt;/font&gt;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;<br>
<br>
&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial;font-weight:normal;font-size:small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:arial,&nbsp;helvetica,&nbsp;sans-serif;font-size:large;font-weight:normal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-family:arial;font-weight:normal;font-size:small&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:large&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;/font&gt;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;<br>
<br>
&lt;div&nbsp;style=&quot;display:inline&nbsp;!important&quot;&gt;&lt;i&gt;&lt;font&nbsp;face=&quot;&#39;times&nbsp;new&nbsp;roman&#39;,&nbsp;serif&quot;&nbsp;color=&quot;#999999&quot;&gt;sublee&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;display:inline&nbsp;!important&quot;&gt;Mobile:&nbsp;+82-10-3215-2380&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial;font-weight:normal;font-size:small&quot;&gt;<br>
<br>
Site: &lt;a&nbsp;href=&quot;http://subl.ee/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://subl.ee/&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:arial;font-weight:normal;font-size:small&quot;&gt;GitHub: &lt;a&nbsp;href=&quot;http://github.com/sublee&quot;&nbsp;target=&quot;_blank&quot;&gt;http://github.com/sublee&lt;/a&gt;&lt;/div&gt;<br>
<br>
&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
