<tt>
&lt;html&nbsp;xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot;&nbsp;xmlns:w=&quot;urn:schemas-microsoft-com:office:word&quot;&nbsp;xmlns:st1=&quot;urn:schemas-microsoft-com:office:smarttags&quot;&nbsp;xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;<br>
<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;meta&nbsp;name=Generator&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;11&nbsp;(filtered&nbsp;medium)&quot;&gt;<br>
&lt;o:SmartTagType&nbsp;namespaceuri=&quot;urn:schemas-microsoft-com:office:smarttags&quot;<br>
&nbsp;name=&quot;PersonName&quot;/&gt;<br>
&lt;!--[if&nbsp;!mso]&gt;<br>
&lt;style&gt;<br>
st1\:*{behavior:url(#default#ieooui)&nbsp;}<br>
&lt;/style&gt;<br>
&lt;![endif]--&gt;<br>
&lt;style&gt;<br>
&lt;!--<br>
&nbsp;/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
&nbsp;p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{margin:0cm;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin-bottom:.0001pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-size:12.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;}<br>
a:link,&nbsp;span.MsoHyperlink<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{color:blue;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
a:visited,&nbsp;span.MsoHyperlinkFollowed<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{color:purple;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptext-decoration:underline;}<br>
span.EmailStyle17<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{mso-style-type:personal-compose;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfont-family:Arial;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcolor:windowtext;}<br>
@page&nbsp;Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{size:612.0pt&nbsp;792.0pt;<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmargin:72.0pt&nbsp;90.0pt&nbsp;72.0pt&nbsp;90.0pt;}<br>
div.Section1<br>
&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp{page:Section1;}<br>
--&gt;<br>
&lt;/style&gt;<br>
<br>
&lt;/head&gt;<br>
<br>
&lt;body&nbsp;lang=EN-US&nbsp;link=blue&nbsp;vlink=purple&gt;<br>
<br>
&lt;div&nbsp;class=Section1&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;Firstly&nbsp;a&nbsp;belated&nbsp;thanks&nbsp;to&nbsp;everyone&nbsp;who&nbsp;replied&nbsp;to&nbsp;my<br>
previous&nbsp;question&nbsp;&amp;#8211;&nbsp;I&nbsp;had&nbsp;to&nbsp;put&nbsp;my&nbsp;project&nbsp;on&nbsp;hold&nbsp;for&nbsp;a&nbsp;while,&nbsp;but&nbsp;now<br>
I&nbsp;am&nbsp;back&nbsp;with&nbsp;more&nbsp;questions.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;My&nbsp;objective&nbsp;is&nbsp;to&nbsp;use&nbsp;twisted&nbsp;to&nbsp;do&nbsp;automated&nbsp;logging&nbsp;in&nbsp;to<br>
multiple&nbsp;ssh&nbsp;servers&nbsp;to&nbsp;carry&nbsp;out&nbsp;various&nbsp;tasks.&amp;nbsp;&nbsp;Currently&nbsp;this&nbsp;is&nbsp;done&nbsp;by<br>
spawning&nbsp;a&nbsp;separate&nbsp;ssh&nbsp;executable&nbsp;for&nbsp;each&nbsp;session&nbsp;and&nbsp;controlling&nbsp;it&nbsp;through<br>
pexpect,&nbsp;and&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;replace&nbsp;this&nbsp;with&nbsp;a&nbsp;twisted/conch&nbsp;system.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;So&nbsp;far&nbsp;I&nbsp;can&nbsp;create&nbsp;conch&nbsp;&amp;#8220;exec&amp;#8221;&nbsp;sessions&nbsp;to&nbsp;run<br>
a&nbsp;single&nbsp;command/script&nbsp;and&nbsp;return&nbsp;the&nbsp;result,&nbsp;but&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to<br>
create&nbsp;shell&nbsp;sessions&nbsp;and&nbsp;do&nbsp;more&nbsp;interactive&nbsp;work.&amp;nbsp;&nbsp;Does&nbsp;anyone&nbsp;have&nbsp;any<br>
examples&nbsp;of&nbsp;doing&nbsp;this?&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;The&nbsp;biggest&nbsp;issue&nbsp;I&nbsp;have&nbsp;at&nbsp;the&nbsp;moment&nbsp;is&nbsp;how&nbsp;to&nbsp;do&nbsp;Test&nbsp;Driven<br>
Development&nbsp;with&nbsp;conch.&nbsp;&amp;nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;mock&nbsp;out&nbsp;the&nbsp;server<br>
that&nbsp;the&nbsp;ssh&nbsp;client&nbsp;talks&nbsp;to,&nbsp;so&nbsp;that&nbsp;I&nbsp;can&nbsp;keep&nbsp;the&nbsp;unit&nbsp;tests&nbsp;self-contained<br>
and&nbsp;keep&nbsp;tight&nbsp;control&nbsp;of&nbsp;both&nbsp;sides&nbsp;of&nbsp;the&nbsp;interaction,&nbsp;e.g.&nbsp;for&nbsp;testing<br>
failure&nbsp;scenarios.&nbsp;&amp;nbsp;I&nbsp;can&nbsp;think&nbsp;of&nbsp;three&nbsp;ways&nbsp;of&nbsp;doing&nbsp;this:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;1)&nbsp;write&nbsp;a&nbsp;separate&nbsp;ssh&nbsp;server&nbsp;with&nbsp;conch&nbsp;that&nbsp;provides&nbsp;the<br>
desired&nbsp;behaviour,&nbsp;and&nbsp;have&nbsp;that&nbsp;spawned&nbsp;as&nbsp;a&nbsp;separate&nbsp;process&nbsp;by&nbsp;the&nbsp;unit<br>
tests.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;2)&nbsp;as&nbsp;above,&nbsp;but&nbsp;run&nbsp;the&nbsp;ssh&nbsp;server&nbsp;in&nbsp;the&nbsp;same&nbsp;process&nbsp;as<br>
the&nbsp;tests,&nbsp;so&nbsp;they&nbsp;are&nbsp;both&nbsp;firing&nbsp;from&nbsp;the&nbsp;same&nbsp;reactor&nbsp;event&nbsp;loop.&amp;nbsp;&nbsp;IMHO<br>
this&nbsp;is&nbsp;better&nbsp;than&nbsp;(1)&nbsp;since&nbsp;it&nbsp;is&nbsp;more&nbsp;self-contained.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;3)&nbsp;stub&nbsp;out&nbsp;the&nbsp;low-level&nbsp;classes&nbsp;of&nbsp;the&nbsp;client&nbsp;so&nbsp;that&nbsp;they<br>
are&nbsp;not&nbsp;really&nbsp;talking&nbsp;to&nbsp;a&nbsp;server&nbsp;at&nbsp;all,&nbsp;but&nbsp;simulating&nbsp;the&nbsp;correct&nbsp;behaviour.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;The&nbsp;problem&nbsp;with&nbsp;both&nbsp;1&nbsp;and&nbsp;2&nbsp;is&nbsp;that&nbsp;they&nbsp;require&nbsp;writing<br>
test&nbsp;code&nbsp;that&nbsp;is&nbsp;as&nbsp;complex&nbsp;as&nbsp;the&nbsp;code&nbsp;I&nbsp;am&nbsp;testing.&nbsp;&amp;nbsp;The&nbsp;problem&nbsp;with&nbsp;3<br>
is&nbsp;that&nbsp;it&nbsp;assumes&nbsp;that&nbsp;I&nbsp;know&nbsp;what&nbsp;the&nbsp;correct&nbsp;low-level&nbsp;behaviour&nbsp;is&nbsp;so&nbsp;that&nbsp;I<br>
can&nbsp;mock&nbsp;it&nbsp;out.&amp;nbsp;&nbsp;At&nbsp;the&nbsp;moment&nbsp;I&nbsp;do&nbsp;not&nbsp;grok&nbsp;twisted&nbsp;in&nbsp;sufficient&nbsp;detail<br>
to&nbsp;do&nbsp;that.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;How&nbsp;have&nbsp;other&nbsp;people&nbsp;tackled&nbsp;this?&nbsp;&amp;nbsp;Are&nbsp;there&nbsp;any<br>
other&nbsp;options&nbsp;that&nbsp;I&nbsp;am&nbsp;missing,&nbsp;or&nbsp;code&nbsp;I&nbsp;can&nbsp;reuse,&nbsp;or&nbsp;other&nbsp;suggestions&nbsp;or<br>
advice?&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=2&nbsp;face=Arial&gt;&lt;span&nbsp;style='font-size:10.0pt;<br>
font-family:Arial'&gt;TIA&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&nbsp;style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'&gt;&lt;font<br>
size=2&nbsp;face=Arial&gt;&lt;span&nbsp;lang=EN-GB&nbsp;style='font-size:10.0pt;font-family:Arial'&gt;--&lt;br&gt;<br>
&lt;st1:PersonName&nbsp;w:st=&quot;on&quot;&gt;Dave&nbsp;Kirby&lt;/st1:PersonName&gt;&lt;br&gt;<br>
Senior&nbsp;Software&nbsp;Engineer&lt;br&gt;<br>
T:&nbsp;+44&nbsp;20&nbsp;7368&nbsp;7330&nbsp;|&nbsp;F:&nbsp;+44&nbsp;20&nbsp;7352&nbsp;4922&lt;br&gt;<br>
E:&nbsp;&lt;a&nbsp;href=&quot;mailto:d.kirby@tideway.com&quot;&gt;d.kirby@tideway.com&lt;/a&gt;&amp;nbsp;|&nbsp;W:<br>
www.tideway.com&lt;/span&gt;&lt;/font&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
<br>
&lt;p&nbsp;class=MsoNormal&gt;&lt;font&nbsp;size=3&nbsp;face=&quot;Times&nbsp;New&nbsp;Roman&quot;&gt;&lt;span&nbsp;style='font-size:<br>
12.0pt'&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;/body&gt;<br>
<br>
&lt;/html&gt;<br>
This&nbsp;email&nbsp;and&nbsp;any&nbsp;attachment&nbsp;may&nbsp;contain&nbsp;confidential,&nbsp;privileged&nbsp;information&nbsp;for&nbsp;the&nbsp;sole&nbsp;use&nbsp;of&nbsp;the&nbsp;intended&nbsp;recipient.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;do&nbsp;not&nbsp;disclose,&nbsp;reproduce,&nbsp;disseminate&nbsp;or&nbsp;otherwise&nbsp;use&nbsp;this&nbsp;communication.&nbsp;If&nbsp;you&nbsp;received&nbsp;this&nbsp;communication&nbsp;in&nbsp;error,&nbsp;please&nbsp;immediately&nbsp;notify&nbsp;the&nbsp;sender&nbsp;via&nbsp;email&nbsp;and&nbsp;delete&nbsp;the&nbsp;communication&nbsp;from&nbsp;your&nbsp;system.&nbsp;Company&nbsp;information&nbsp;:&nbsp;Tideway&nbsp;Systems&nbsp;Ltd,&nbsp;Registered&nbsp;Office:&nbsp;Anchor&nbsp;House,&nbsp;15-19&nbsp;Britten&nbsp;Street,&nbsp;London,&nbsp;SW3&nbsp;3TY.&nbsp;Registered&nbsp;in&nbsp;England&nbsp;&amp;&nbsp;Wales&nbsp;Reg.&nbsp;Reg.&nbsp;No:&nbsp;4598072&nbsp;&nbsp;VAT&nbsp;No:&nbsp;805&nbsp;5153&nbsp;50&nbsp;<br>

</tt>
