<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;implementing&nbsp;a&nbsp;code&nbsp;through&nbsp;which&nbsp;i&nbsp;have&nbsp;to&nbsp;get&nbsp;devices&nbsp;connected&nbsp;to&nbsp;all&nbsp;network&nbsp;interfaces&nbsp;on&nbsp;my&nbsp;machine&nbsp;and&nbsp;list&nbsp;them&nbsp;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;this,&nbsp;i&nbsp;am&nbsp;first&nbsp;getting&nbsp;the&nbsp;ip&nbsp;of&nbsp;all&nbsp;network&nbsp;interfaces&nbsp;and&nbsp;then&nbsp;sending&nbsp;m-search&nbsp;command&nbsp;on&nbsp;them.&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;2.5&nbsp;seconds&nbsp;port&nbsp;is&nbsp;stopped&nbsp;to&nbsp;listen.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;it&nbsp;is&nbsp;giving&nbsp;me&nbsp;some&nbsp;assertion&nbsp;error.&nbsp;(I&nbsp;am&nbsp;connected&nbsp;to&nbsp;2&nbsp;interfaces&nbsp;-ethernet&nbsp;and&nbsp;wifi)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;`Code:`&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;class&nbsp;Base(DatagramProtocol):&lt;/div&gt;<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&nbsp;Class&nbsp;to&nbsp;send&nbsp;M-SEARCH&nbsp;message&nbsp;to&nbsp;devices&nbsp;in&nbsp;network&nbsp;and&nbsp;receive&nbsp;datagram&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;packets&nbsp;from&nbsp;them&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;SSDP_ADDR&nbsp;=&nbsp;&quot;239.255.255.250&quot;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;SSDP_PORT&nbsp;=&nbsp;1900&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;MS&nbsp;=&nbsp;&quot;M-SEARCH&nbsp;*&nbsp;HTTP/1.1\r\nHOST:&nbsp;{}:{}\r\nMAN:&nbsp;&#39;ssdp:discover&#39;\r\nMX:&nbsp;2\r\nST:&nbsp;ssdp:all\r\n\r\n&quot;.format(SSDP_ADDR,&nbsp;SSDP_PORT)&lt;/div&gt;&lt;div&gt; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;sendMsearch(self):&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&nbsp;Sending&nbsp;M-SEARCH&nbsp;message&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;ports&nbsp;=&nbsp;[]&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;address&nbsp;in&nbsp;self.addresses:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ports.append(reactor.listenUDP(0,&nbsp;self,&nbsp;interface=address))&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;port&nbsp;in&nbsp;ports:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;for&nbsp;num&nbsp;in&nbsp;range(4):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;port.write(Base.MS,&nbsp;(Base.SSDP_ADDR,Base.SSDP_PORT))&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;reactor.callLater(2.5,&nbsp;self.stopMsearch,&nbsp;port)&nbsp;#&nbsp;MX&nbsp;+&nbsp;a&nbsp;wait&nbsp;margin&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;def&nbsp;stopMsearch(self,&nbsp;port):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&nbsp;Stop&nbsp;listening&nbsp;on&nbsp;port&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;port.stopListening()&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;`Error:`&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;&nbsp; File&nbsp;&quot;work\find_devices.py&quot;,&nbsp;line&nbsp;56,&nbsp;in&nbsp;sendMsearch&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;ports.append(reactor.listenUDP(0,&nbsp;self,&nbsp;interface=address))&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp; File&nbsp;&quot;C:\Python27\lib\site-packages\twisted\internet\posixbase.py&quot;,&nbsp;line&nbsp;374,&nbsp;in&nbsp;listenUDP&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;p.startListening()&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp; File&nbsp;&quot;C:\Python27\lib\site-packages\twisted\internet\udp.py&quot;,&nbsp;line&nbsp;172,&nbsp;in&nbsp;startListening&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;self._connectToProtocol()&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp; File&nbsp;&quot;C:\Python27\lib\site-packages\twisted\internet\udp.py&quot;,&nbsp;line&nbsp;210,&nbsp;in&nbsp;_connectToProtocol&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;self.protocol.makeConnection(self)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&nbsp; File&nbsp;&quot;C:\Python27\lib\site-packages\twisted\internet\protocol.py&quot;,&nbsp;line&nbsp;709,&nbsp;in&nbsp;makeConnection&lt;/div&gt;<br>
<br>
<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;assert&nbsp;self.transport&nbsp;==&nbsp;None&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;AssertionError&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;code&nbsp;worked:&lt;br&gt;&lt;br&gt;def&nbsp;sendMsearch(self):<br>
<br>
&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&nbsp;Sending&nbsp;M-SEARCH&nbsp;message&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;&lt;br&gt;&lt;/div&gt;&lt;div&gt;       &nbsp;address&nbsp;=&nbsp;socket.gethostbyname(socket.gethostbyname())&lt;br&gt;&lt;/div&gt;&lt;div&gt;       &nbsp;port&nbsp;=&nbsp;reactor.listenUDP(0,&nbsp;self,&nbsp;interface=address)&lt;br&gt;<br>
       &nbsp;for&nbsp;num&nbsp;in&nbsp;range(4):&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;port.write(Base.MS,&nbsp;(Base.SSDP_ADDR,Base.SSDP_PORT))&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;reactor.callLater(2.5,&nbsp;self.stopMsearch,&nbsp;port)&nbsp;#&nbsp;MX&nbsp;+&nbsp;a&nbsp;wait&nbsp;margin&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
Please&nbsp;tell&nbsp;what&#39;s&nbsp;wrong&nbsp;in&nbsp;code&nbsp;mentioned&nbsp;in&nbsp;the&nbsp;start&nbsp;of&nbsp;this&nbsp;mail&nbsp;and&nbsp;how&nbsp;to&nbsp;correct&nbsp;this.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;also&nbsp;posted&nbsp;this&nbsp;code&nbsp;on&nbsp;stackoverflow&nbsp;,&nbsp;but&nbsp;didn&#39;t&nbsp;get&nbsp;any&nbsp;response&lt;/div&gt;&lt;a&nbsp;href=&quot;http://stackoverflow.com/questions/24178580/send-m-search-packets-on-all-network-interfaces-using-twisted-module-in-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://stackoverflow.com/questions/24178580/send-m-search-packets-on-all-network-interfaces-using-twisted-module-in-python&lt;/a&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;<br>
<br>
&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
