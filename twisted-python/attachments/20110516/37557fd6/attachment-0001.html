<tt>
Hi&nbsp;all &nbsp;&lt;br&gt;I&nbsp;modified&nbsp;my&nbsp;code&nbsp;as&lt;br&gt;&lt;br&gt;reactor.callFromThread(reactor.callLater,&nbsp;self.wait,&nbsp;reactor.callInThread,&nbsp;self.Execute)&lt;br&gt;&lt;br&gt;based&nbsp;on&nbsp;your&nbsp;comments.&lt;br&gt;&lt;br&gt;now&nbsp;the&nbsp;problem&nbsp;have&nbsp;been&nbsp;solved.&nbsp;Thanks&nbsp;your&nbsp;guys.&nbsp;I&nbsp;appreciate&nbsp;your&nbsp;help.&lt;br&gt;<br>
&lt;br&gt;Regards&lt;br&gt;&lt;br&gt;gelin&nbsp;yan&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;May&nbsp;16,&nbsp;2011&nbsp;at&nbsp;12:29&nbsp;AM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;04:10&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:dynamicgl@gmail.com&quot;&gt;dynamicgl@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;Hi&nbsp;all&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;I&nbsp;just&nbsp;encountered&nbsp;a&nbsp;problem&nbsp;about&nbsp;iocp&nbsp;reactor&nbsp;&amp;&nbsp;callInThread.&nbsp;I&lt;br&gt;<br>
&gt;paste&nbsp;the&nbsp;code&nbsp;following:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;iocpreactor&lt;br&gt;<br>
&gt;iocpreactor.install()&lt;br&gt;<br>
&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;class&nbsp;ThreadTest:&lt;br&gt;<br>
&gt;&nbsp; &nbsp; def&nbsp;__init__(self,name):&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; self.count&nbsp;=&nbsp;0&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; self.max&nbsp;=&nbsp;5&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; self.wait&nbsp;=&nbsp;1&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &lt;a&nbsp;href=&quot;http://self.name&quot;&nbsp;target=&quot;_blank&quot;&gt;self.name&lt;/a&gt;&nbsp;=&nbsp;name&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; def&nbsp;__call__(self):&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; self.Execute()&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; &nbsp; def&nbsp;Execute(self):&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; print&nbsp;&lt;a&nbsp;href=&quot;http://self.name&quot;&nbsp;target=&quot;_blank&quot;&gt;self.name&lt;/a&gt;,&nbsp;time.time()&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; self.count&nbsp;+=&nbsp;1&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;self.count&nbsp;&lt;self.max:&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reactor.callLater(self.wait,&nbsp;reactor.callInThread,&lt;br&gt;<br>
&gt;self.Execute)&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; else:&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print&nbsp;&lt;a&nbsp;href=&quot;http://self.name&quot;&nbsp;target=&quot;_blank&quot;&gt;self.name&lt;/a&gt;,&nbsp;&quot;stop&quot;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;reactor.callInThread(ThreadTest(&quot;test&quot;))&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;the&nbsp;problem&nbsp;is&nbsp;every&nbsp;time&nbsp;the&nbsp;print&nbsp;method&nbsp;was&nbsp;invoked,&nbsp;i&nbsp;noticed&nbsp;that&lt;br&gt;<br>
&gt;the&nbsp;difference&nbsp;between&nbsp;current&nbsp;invoke&nbsp;and&nbsp;previous&nbsp;invoke&nbsp;was&nbsp;2&lt;br&gt;<br>
&gt;seconds.&nbsp;In&nbsp;theory&nbsp;,it&nbsp;should&nbsp;be&nbsp;one&nbsp;second.&nbsp;When&nbsp;i&nbsp;used&nbsp;the&nbsp;plain&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;You&#39;re&nbsp;calling&nbsp;reactor.callLater&nbsp;from&nbsp;a&nbsp;non-reactor&nbsp;thread.&nbsp; This&nbsp;isn&#39;t&lt;br&gt;<br>
supported&nbsp;and&nbsp;will&nbsp;produce&nbsp;unpredictable&nbsp;behavior.&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;reactor&nbsp;(which&nbsp;means&nbsp;no&nbsp;iocpreactor),&nbsp;the&nbsp;difference&nbsp;was&nbsp;one&nbsp;second&lt;br&gt;<br>
&gt;which&nbsp;is&nbsp;a&nbsp;correct&nbsp;value.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;I&nbsp;want&nbsp;to&nbsp;know&nbsp;what&nbsp;makes&nbsp;callInThread&nbsp;so&nbsp;special&nbsp;with&nbsp;iocpreactor?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;BTW:&nbsp;i&nbsp;used&nbsp;windows&nbsp;7&nbsp;&amp;&nbsp;window&nbsp;s2008.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;Regards&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;gelin&nbsp;yan&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&gt;_______________________________________________&lt;br&gt;<br>
&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
