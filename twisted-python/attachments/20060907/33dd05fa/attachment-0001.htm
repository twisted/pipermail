<tt>
On&nbsp;9/7/06,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Thomas&nbsp;HERVE&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:therve@free.fr&quot;&gt;therve@free.fr&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
Quoting&nbsp;jarrod&nbsp;roberson&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jarrod@vertigrated.com&quot;&gt;jarrod@vertigrated.com&lt;/a&gt;&amp;gt;:&lt;br&gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;got&nbsp;a&nbsp;simple&nbsp;line&nbsp;protocol&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;implement,&nbsp;blocks&nbsp;.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;[snip]&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;inside&nbsp;rawDataReceived(data)<br>
&lt;br&gt;&amp;gt;&nbsp;data&nbsp;=&nbsp;abcdeCMD&nbsp;10\r\n&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;is&nbsp;there&nbsp;something&nbsp;in&nbsp;twisted&nbsp;that&nbsp;will&nbsp;help&nbsp;with&nbsp;this?&lt;br&gt;&amp;gt;&nbsp;or&nbsp;do&nbsp;I&nbsp;need&nbsp;to&nbsp;subclass&nbsp;LineReceiver&nbsp;and&nbsp;add&nbsp;a&lt;br&gt;&amp;gt;&nbsp;setRawMode(bytesToRead)&nbsp;or&nbsp;something?&lt;br&gt;&lt;br&gt;What&nbsp;I've&nbsp;done&nbsp;in&nbsp;this&nbsp;case&nbsp;is&nbsp;something&nbsp;like&nbsp;this:<br>
&lt;br&gt;&lt;br&gt;def&nbsp;rawDataReceived(self,&nbsp;data):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;self.buffer&nbsp;+=&nbsp;data&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;len(self.buffer)&nbsp;&amp;gt;=&nbsp;self.lenExpected:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;buf&nbsp;=&nbsp;self.buffer[:self.lenExpected]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rem&nbsp;=&nbsp;self.buffer[self.lenExpected:]&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doSometingWithBuff(buf)<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;self.buffer&nbsp;=&nbsp;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;self.setLineMode()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&nbsp;rem:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;self.dataReceived(rem)&lt;br&gt;&lt;br&gt;You&nbsp;need&nbsp;to&nbsp;set&nbsp;the&nbsp;variable&nbsp;self.lenExpected.&nbsp;You&nbsp;read&nbsp;the&nbsp;data&nbsp;and&lt;br&gt;when&nbsp;you&nbsp;can&nbsp;all&nbsp;what&nbsp;you&nbsp;needed,&nbsp;you&nbsp;push&nbsp;it&nbsp;back&nbsp;again&nbsp;with<br>
&lt;br&gt;dataReceived.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;setLineMode&nbsp;happens&nbsp;to&nbsp;take&nbsp;an&nbsp;optional&nbsp;argument&nbsp;for&nbsp;the&nbsp;remainder.&nbsp;You&nbsp;should&nbsp;use&nbsp;that&nbsp;instead&nbsp;of&nbsp;calling&nbsp;dataReceived&nbsp;directly.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
