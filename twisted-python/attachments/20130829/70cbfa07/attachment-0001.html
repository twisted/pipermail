<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=windows-1252&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&gt;&lt;div&gt;Thank&nbsp;you,&nbsp;Kai,&nbsp;for&nbsp;a&nbsp;great&nbsp;post&nbsp;describing&nbsp;the&nbsp;issue&nbsp;in&nbsp;detail.&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Aug&nbsp;29,&nbsp;2013,&nbsp;at&nbsp;2:27&nbsp;AM,&nbsp;zhang&nbsp;kai&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:kylerzhang11@gmail.com&quot;&gt;kylerzhang11@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;style=&quot;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;orphans:&nbsp;auto;&nbsp;text-align:&nbsp;start;&nbsp;text-indent:&nbsp;0px;&nbsp;text-transform:&nbsp;none;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;auto;&nbsp;word-spacing:&nbsp;0px;&nbsp;-webkit-text-stroke-width:&nbsp;0px;&nbsp;outline:&nbsp;none&nbsp;0px;&nbsp;margin:&nbsp;0px;&nbsp;color:&nbsp;rgb(68,&nbsp;68,&nbsp;68);&nbsp;font-family:&nbsp;'Helvetica&nbsp;Neue',&nbsp;HelveticaNeue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;&nbsp;font-size:&nbsp;14px;&nbsp;line-height:&nbsp;19px;&quot;&gt;So,&nbsp;what’s&nbsp;your&nbsp;opinion&nbsp;on&nbsp;raising&nbsp;an&nbsp;exception&nbsp;from&nbsp;the&nbsp;canceller?&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;feel&nbsp;pretty&nbsp;strongly&nbsp;that&nbsp;it&nbsp;ought&nbsp;to&nbsp;be&nbsp;handled&nbsp;in&nbsp;this&nbsp;manner:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;&lt;div&gt;&lt;div&gt;Index:&nbsp;twisted/internet/defer.py&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;===================================================================&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;---&nbsp;twisted/internet/defer.py&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;(revision&nbsp;39819)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;+++&nbsp;twisted/internet/defer.py&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;(working&nbsp;copy)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;@@&nbsp;-456,7&nbsp;+456,10&nbsp;@@&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;self.called:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canceller&nbsp;=&nbsp;self._canceller&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;canceller:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canceller(self)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canceller(self)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.err(failure.Failure(),&nbsp;&quot;Canceller&nbsp;raised&nbsp;exception.&quot;)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Arrange&nbsp;to&nbsp;eat&nbsp;the&nbsp;callback&nbsp;that&nbsp;will&nbsp;eventually&nbsp;be&nbsp;fired&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;since&nbsp;there&nbsp;was&nbsp;no&nbsp;real&nbsp;canceller.&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Raising&nbsp;an&nbsp;exception&nbsp;from&nbsp;a&nbsp;canceller&nbsp;is&nbsp;a&nbsp;bug.&nbsp;&nbsp;It&nbsp;was&nbsp;never&nbsp;really&nbsp;supposed&nbsp;to&nbsp;do&nbsp;anything.&nbsp;&nbsp;I&nbsp;guess&nbsp;you&nbsp;could&nbsp;be&nbsp;relying&nbsp;on&nbsp;the&nbsp;behavior&nbsp;right&nbsp;now&nbsp;where&nbsp;raising&nbsp;an&nbsp;exception&nbsp;will&nbsp;allow&nbsp;you&nbsp;to&nbsp;avoid&nbsp;callbacking&nbsp;or&nbsp;errbacking&nbsp;the&nbsp;Deferred,&nbsp;but&nbsp;only&nbsp;at&nbsp;the&nbsp;cost&nbsp;of&nbsp;delivering&nbsp;some&nbsp;random&nbsp;exception&nbsp;to&nbsp;some&nbsp;unsuspecting&nbsp;application&nbsp;code.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;Jean-Paul&nbsp;already&nbsp;pointed&nbsp;out,&nbsp;turning&nbsp;this&nbsp;into&nbsp;a&nbsp;boolean&nbsp;flag&nbsp;is&nbsp;not&nbsp;useful&nbsp;to&nbsp;anybody.&nbsp;&nbsp;The&nbsp;way&nbsp;that&nbsp;you&nbsp;tell&nbsp;a&nbsp;cancelled&nbsp;operation&nbsp;has&nbsp;been&nbsp;cancelled&nbsp;is&nbsp;to&nbsp;add&nbsp;a&nbsp;callback&nbsp;to&nbsp;a&nbsp;point&nbsp;in&nbsp;the&nbsp;chain&nbsp;and&nbsp;then&nbsp;observe&nbsp;that&nbsp;it&nbsp;has&nbsp;been&nbsp;cancelled.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So,&nbsp;separately&nbsp;from&nbsp;how&nbsp;to&nbsp;handle&nbsp;unhandled&nbsp;exceptions,&nbsp;there's&nbsp;the&nbsp;question&nbsp;of&nbsp;making&nbsp;a&nbsp;Deferred&nbsp;'atomic',&nbsp;by&nbsp;which&nbsp;I&nbsp;mean,&nbsp;a&nbsp;Deferred&nbsp;whose&nbsp;.cancel()&nbsp;method&nbsp;has&nbsp;no&nbsp;apparent&nbsp;external&nbsp;effect;&nbsp;no&nbsp;result&nbsp;is&nbsp;obtained.&nbsp;&nbsp;(I&nbsp;am&nbsp;using&nbsp;the&nbsp;term&nbsp;'atomic'&nbsp;because&nbsp;it&nbsp;seems&nbsp;like&nbsp;half&nbsp;the&nbsp;uses&nbsp;in&nbsp;this&nbsp;thread&nbsp;use&nbsp;&quot;uncancellable&quot;&nbsp;to&nbsp;mean&nbsp;&quot;doesn't&nbsp;have&nbsp;an&nbsp;explicit&nbsp;canceller&quot;&nbsp;and&nbsp;the&nbsp;other&nbsp;half&nbsp;of&nbsp;the&nbsp;uses&nbsp;mean&nbsp;&quot;cancellation&nbsp;has&nbsp;no&nbsp;effect&quot;).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Currently,&nbsp;it&nbsp;is,&nbsp;at&nbsp;least,&nbsp;&lt;i&gt;possible&lt;/i&gt;&nbsp;to&nbsp;construct&nbsp;a&nbsp;Deferred&nbsp;that&nbsp;will&nbsp;continue&nbsp;waiting&nbsp;for&nbsp;a&nbsp;result&nbsp;after&nbsp;.cancel()&nbsp;has&nbsp;been&nbsp;invoked.&nbsp;&nbsp;However,&nbsp;it's&nbsp;surprisingly&nbsp;challenging.&nbsp;&nbsp;You&nbsp;have&nbsp;to&nbsp;do&nbsp;this,&nbsp;or&nbsp;something&nbsp;like&nbsp;it:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;40px;&nbsp;border:&nbsp;none;&nbsp;padding:&nbsp;0px;&quot;&gt;&lt;div&gt;&lt;div&gt;def&nbsp;atomize(deferred):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;complete(result):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;complete.done&nbsp;=&nbsp;True&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;complete.result&nbsp;=&nbsp;result&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public.cancel()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;complete.result&nbsp;=&nbsp;None&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;complete.done&nbsp;=&nbsp;False&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;again():&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(Deferred(lambda&nbsp;x:&nbsp;x.callback(complete.result))&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.addCallback(await))&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;await(result):&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;complete.done:&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;again()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;=&nbsp;again()&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;deferred.addBoth(complete)&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;public&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;took&nbsp;*me*&nbsp;like&nbsp;an&nbsp;hour&nbsp;to&nbsp;construct&nbsp;again&nbsp;from&nbsp;memory,&nbsp;so&nbsp;I&nbsp;have&nbsp;to&nbsp;assume&nbsp;that&nbsp;~75%&nbsp;of&nbsp;Twisted&nbsp;users&nbsp;will&nbsp;either&nbsp;never&nbsp;realize&nbsp;it's&nbsp;possible&nbsp;or&nbsp;not&nbsp;really&nbsp;figure&nbsp;it&nbsp;out.&nbsp;&nbsp;And&nbsp;I'm&nbsp;still&nbsp;not&nbsp;quite&nbsp;sure&nbsp;what&nbsp;sort&nbsp;of&nbsp;resource&nbsp;consumption&nbsp;this&nbsp;involves;&nbsp;will&nbsp;each&nbsp;.cancel()&nbsp;stack&nbsp;up&nbsp;another&nbsp;Deferred&nbsp;or&nbsp;will&nbsp;they&nbsp;be&nbsp;tail-recursed&nbsp;out&nbsp;somehow&nbsp;(/me&nbsp;pours&nbsp;out&nbsp;a&nbsp;40&nbsp;for&nbsp;tm.tl/411)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Asking&nbsp;all&nbsp;these&nbsp;questions&nbsp;to&nbsp;implement&nbsp;something&nbsp;apparently&nbsp;simple&nbsp;seems&nbsp;an&nbsp;undue&nbsp;burden.&nbsp;&nbsp;So&nbsp;it&nbsp;does&nbsp;seem&nbsp;reasonable&nbsp;that&nbsp;a&nbsp;canceller&nbsp;have&nbsp;some&nbsp;way&nbsp;to&nbsp;communicate&nbsp;that&nbsp;it&nbsp;doesn't&nbsp;actually&nbsp;want&nbsp;to&nbsp;callback&nbsp;or&nbsp;errback&nbsp;a&nbsp;Deferred.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;didn't&nbsp;want&nbsp;to&nbsp;make&nbsp;this&nbsp;&lt;i&gt;too&nbsp;easy&lt;/i&gt;,&nbsp;because&nbsp;a&nbsp;no-op&nbsp;canceller&nbsp;is&nbsp;a&nbsp;crummy&nbsp;default&nbsp;behavior,&nbsp;but&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;current&nbsp;mechanism&nbsp;is&nbsp;too&nbsp;difficult&nbsp;to&nbsp;implement&nbsp;and&nbsp;has&nbsp;too&nbsp;many&nbsp;moving&nbsp;parts.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;then&nbsp;the&nbsp;question&nbsp;is:&nbsp;is&nbsp;raising&nbsp;a&nbsp;new&nbsp;kind&nbsp;of&nbsp;exception&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;do&nbsp;this?&nbsp;&nbsp;That&nbsp;raises&nbsp;the&nbsp;question:&nbsp;what&nbsp;are&nbsp;good&nbsp;criteria&nbsp;for&nbsp;raising&nbsp;an&nbsp;exception&nbsp;versus&nbsp;returning&nbsp;a&nbsp;value&nbsp;in&nbsp;an&nbsp;API?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;main&nbsp;distinction&nbsp;for&nbsp;when&nbsp;to&nbsp;return&nbsp;a&nbsp;value&nbsp;versus&nbsp;when&nbsp;to&nbsp;raise&nbsp;an&nbsp;exception&nbsp;is&nbsp;what&nbsp;the&nbsp;default&nbsp;behavior&nbsp;of&nbsp;the&nbsp;next&nbsp;stack&nbsp;frame&nbsp;up&nbsp;should&nbsp;be.&nbsp;&nbsp;If&nbsp;an&nbsp;API&nbsp;calls&nbsp;another&nbsp;API&nbsp;that&nbsp;exhibits&nbsp;a&nbsp;certain&nbsp;behavior,&nbsp;does&nbsp;it&nbsp;make&nbsp;more&nbsp;sense&nbsp;to,&nbsp;by&nbsp;default,&nbsp;continue&nbsp;up&nbsp;the&nbsp;stack&nbsp;towards&nbsp;an&nbsp;error&nbsp;handler,&nbsp;or&nbsp;to&nbsp;move&nbsp;on&nbsp;to&nbsp;the&nbsp;next&nbsp;statement?&nbsp;&nbsp;In&nbsp;other&nbsp;words,&nbsp;does&nbsp;the&nbsp;termination&nbsp;in&nbsp;the&nbsp;manner&nbsp;in&nbsp;question&nbsp;indicate&nbsp;the&nbsp;sort&nbsp;of&nbsp;error&nbsp;that&nbsp;one&nbsp;should&nbsp;not&nbsp;attempt&nbsp;to&nbsp;recover&nbsp;from&nbsp;unless&nbsp;one&nbsp;knows&nbsp;how?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;example&nbsp;you&nbsp;gave&nbsp;in&nbsp;the&nbsp;original&nbsp;post,&nbsp;the&nbsp;caller&nbsp;always&nbsp;has&nbsp;to&nbsp;check&nbsp;the&nbsp;'did&nbsp;cancellation&nbsp;work'&nbsp;flag,&nbsp;so&nbsp;that&nbsp;flag&nbsp;should&nbsp;be&nbsp;an&nbsp;exception.&nbsp;&nbsp;Forgetting&nbsp;to&nbsp;check&nbsp;it&nbsp;is&nbsp;an&nbsp;error,&nbsp;so&nbsp;by&nbsp;default&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;jump&nbsp;over&nbsp;the&nbsp;stack.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;this&nbsp;case&nbsp;though,&nbsp;&quot;I&nbsp;didn't&nbsp;call&nbsp;.callback&nbsp;or&nbsp;.errback&quot;&nbsp;is&nbsp;not&nbsp;a&nbsp;type&nbsp;of&nbsp;exception&nbsp;that&nbsp;should&nbsp;ever&nbsp;propagate&nbsp;through&nbsp;multiple&nbsp;stack&nbsp;frames.&nbsp;&nbsp;It's&nbsp;just&nbsp;an&nbsp;API&nbsp;safety&nbsp;feature,&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;you&nbsp;really&nbsp;intended&nbsp;to&nbsp;do&nbsp;things&nbsp;that&nbsp;way.&nbsp;&nbsp;Also,&nbsp;in&nbsp;terms&nbsp;of&nbsp;going&nbsp;through&nbsp;multiple&nbsp;frames,&nbsp;a&nbsp;canceller&nbsp;can't&nbsp;really&nbsp;meaningfully&nbsp;call&nbsp;another&nbsp;canceller,&nbsp;unless&nbsp;it's&nbsp;very&nbsp;explicitly&nbsp;implementing&nbsp;some&nbsp;kind&nbsp;of&nbsp;delegation&nbsp;pattern;&nbsp;with&nbsp;such&nbsp;a&nbsp;pattern,&nbsp;failing&nbsp;to&nbsp;propagate&nbsp;the&nbsp;result&nbsp;is&nbsp;quite&nbsp;likely&nbsp;the&nbsp;intentional&nbsp;behavior.&nbsp;&nbsp;So&nbsp;I&nbsp;can't&nbsp;see&nbsp;a&nbsp;reason&nbsp;to&nbsp;use&nbsp;an&nbsp;exception&nbsp;to&nbsp;indicate&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Instead,&nbsp;I&nbsp;think&nbsp;perhaps&nbsp;a&nbsp;new&nbsp;constant&nbsp;value&nbsp;would&nbsp;be&nbsp;useful,&nbsp;so&nbsp;a&nbsp;canceller&nbsp;could&nbsp;&lt;i&gt;return&lt;/i&gt;&nbsp;a&nbsp;constant&nbsp;to&nbsp;indicate&nbsp;that&nbsp;it&nbsp;really&nbsp;meant&nbsp;to&nbsp;not&nbsp;invoke&nbsp;either&nbsp;a&nbsp;callback&nbsp;or&nbsp;an&nbsp;errback.&nbsp;&nbsp;'return&nbsp;NOT_CANCELLED'&nbsp;would&nbsp;indicate&nbsp;that&nbsp;the&nbsp;canceller&nbsp;intentionally&nbsp;took&nbsp;no&nbsp;action&nbsp;to&nbsp;call&nbsp;.callback&nbsp;or&nbsp;.errback,&nbsp;and&nbsp;could&nbsp;be&nbsp;called&nbsp;again.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;for&nbsp;the&nbsp;long&nbsp;email.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;-glyph&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
