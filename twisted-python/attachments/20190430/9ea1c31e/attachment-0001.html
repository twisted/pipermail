<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;title&nbsp;class=&quot;&quot;&gt;&lt;/title&gt;&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;class=&quot;&quot;&gt;p.MsoNormal,p.MsoNoSpacing{margin:0}&lt;/style&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;25,&nbsp;2019,&nbsp;at&nbsp;9:52&nbsp;AM,&nbsp;Jean-Paul&nbsp;Calderone&nbsp;wrote:&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;id=&quot;qt&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;Hello&nbsp;all,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I'd&nbsp;like&nbsp;to&nbsp;discuss&nbsp;the&nbsp;project&nbsp;policy/process&nbsp;for&nbsp;dealing&nbsp;with&nbsp;incorrect&nbsp;backward&nbsp;incompatibilities&nbsp;that&nbsp;end&nbsp;up&nbsp;released.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;As&nbsp;a&nbsp;case&nbsp;study,&nbsp;we&nbsp;could&nbsp;look&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;https://twistedmatrix.com/trac/ticket/9410#comment:17&quot;&nbsp;class=&quot;&quot;&gt;https://twistedmatrix.com/trac/ticket/9410&lt;/a&gt;&nbsp;/&nbsp;&lt;a&nbsp;href=&quot;https://github.com/twisted/twisted/pull/1106&quot;&nbsp;class=&quot;&quot;&gt;https://github.com/twisted/twisted/pull/1106&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;In&nbsp;Twisted&nbsp;16.3.0&nbsp;the&nbsp;behavior&nbsp;of&nbsp;Request.write&nbsp;was&nbsp;changed&nbsp;so&nbsp;that&nbsp;it&nbsp;raises&nbsp;an&nbsp;AttributeError&nbsp;if&nbsp;called&nbsp;after&nbsp;the&nbsp;connection&nbsp;has&nbsp;closed.&nbsp;&nbsp;Prior&nbsp;to&nbsp;that&nbsp;release,&nbsp;it&nbsp;silently&nbsp;did&nbsp;nothing&nbsp;in&nbsp;that&nbsp;case.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Now,&nbsp;three&nbsp;years&nbsp;later,&nbsp;we&nbsp;have&nbsp;a&nbsp;PR&nbsp;which&nbsp;proposed&nbsp;restoring&nbsp;the&nbsp;behavior&nbsp;of&nbsp;silently&nbsp;ignoring&nbsp;the&nbsp;write&nbsp;to&nbsp;a&nbsp;closed&nbsp;connection.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;The&nbsp;original&nbsp;change&nbsp;was&nbsp;incompatible.&nbsp;&nbsp;The&nbsp;new&nbsp;change&nbsp;is&nbsp;incompatible.&nbsp;&nbsp;What&nbsp;should&nbsp;win&nbsp;out?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;There&nbsp;are&nbsp;two&nbsp;things&nbsp;to&nbsp;address&nbsp;here,&nbsp;I&nbsp;think:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;&lt;ol&nbsp;class=&quot;MailOutline&quot;&gt;&lt;li&nbsp;class=&quot;&quot;&gt;In&nbsp;the&nbsp;general&nbsp;case,&nbsp;can&nbsp;we&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;reverse&lt;/i&gt;&nbsp;changes&nbsp;to&nbsp;behavior&nbsp;which&nbsp;were&nbsp;desirable,&nbsp;but&nbsp;by-policy&nbsp;incompatible,&nbsp;and&nbsp;did&nbsp;not&nbsp;go&nbsp;through&nbsp;the&nbsp;incompatibility&nbsp;exception&nbsp;process,&nbsp;without&nbsp;going&nbsp;through&nbsp;the&nbsp;incompatibility&nbsp;exception&nbsp;process?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I'm&nbsp;choosing&nbsp;my&nbsp;words&nbsp;carefully&nbsp;here;&nbsp;changes&nbsp;might&nbsp;be&nbsp;&quot;desirable&quot;&nbsp;even&nbsp;if&nbsp;they're&nbsp;not&nbsp;intentional;&nbsp;they&nbsp;might&nbsp;be&nbsp;something&nbsp;that&nbsp;the&nbsp;caller&nbsp;expects&nbsp;even&nbsp;if&nbsp;they're&nbsp;not&nbsp;explicitly&nbsp;documented.&nbsp;&nbsp;In&nbsp;&lt;i&nbsp;class=&quot;&quot;&gt;general&lt;/i&gt;&lt;span&nbsp;style=&quot;font-style:&nbsp;normal;&quot;&nbsp;class=&quot;&quot;&gt;&nbsp;I'd&nbsp;say&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;careful&nbsp;with&nbsp;this&nbsp;kind&nbsp;of&nbsp;reversal&nbsp;and&nbsp;we&nbsp;should&nbsp;probably&nbsp;go&nbsp;through&nbsp;the&nbsp;compat&nbsp;exception&nbsp;process.&nbsp;&nbsp;But&nbsp;I&nbsp;think&nbsp;the&nbsp;change&nbsp;in&nbsp;question&nbsp;doesn't&nbsp;actually&nbsp;fall&nbsp;into&nbsp;this&nbsp;category,&nbsp;because&nbsp;it's&nbsp;an&nbsp;exception&nbsp;that&nbsp;nobody&nbsp;wanted,&nbsp;wasn't&nbsp;documented,&nbsp;and&nbsp;wasn't&nbsp;intentional.&nbsp;&nbsp;So&nbsp;it's&nbsp;in&nbsp;this&nbsp;other&nbsp;category:&lt;/span&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/li&gt;&lt;li&nbsp;class=&quot;&quot;&gt;Should&nbsp;we&nbsp;consider&nbsp;the&nbsp;raising&nbsp;of&nbsp;an&nbsp;undocumented&nbsp;exception&nbsp;to&nbsp;be&nbsp;a&nbsp;compatibility&nbsp;surface&nbsp;we&nbsp;must&nbsp;maintain&nbsp;compatibility&nbsp;with?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;In&nbsp;this&nbsp;case,&nbsp;I&nbsp;think&nbsp;it&nbsp;depends&nbsp;on&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;exception&nbsp;-&nbsp;specifically,&nbsp;whether&nbsp;the&nbsp;exception&nbsp;is&nbsp;defined&nbsp;in&nbsp;Twisted&nbsp;itself,&nbsp;or&nbsp;defined&nbsp;in&nbsp;a&nbsp;library&nbsp;that&nbsp;is&nbsp;clearly&nbsp;being&nbsp;invoked&nbsp;and&nbsp;whose&nbsp;behavior&nbsp;should&nbsp;be&nbsp;propagated.&nbsp;&nbsp;So,&nbsp;for&nbsp;example,&nbsp;if&nbsp;you&nbsp;call&nbsp;connection.foo().bar()&nbsp;and&nbsp;you&nbsp;get&nbsp;FooCannotBeBarredError,&nbsp;this&nbsp;might&nbsp;something&nbsp;to&nbsp;be&nbsp;considered&nbsp;a&nbsp;compatibility&nbsp;concern.&nbsp;&nbsp;However,&nbsp;if&nbsp;you&nbsp;call&nbsp;connection.foo().bar()&nbsp;and&nbsp;get&nbsp;an&nbsp;undocumented&nbsp;stdlib&nbsp;exception&nbsp;(KeyError,&nbsp;AttributeError,&nbsp;ValueError),&nbsp;I&nbsp;think&nbsp;it's&nbsp;okay&nbsp;to&nbsp;implicitly&nbsp;treat&nbsp;these&nbsp;as&nbsp;&quot;gross&nbsp;violations&nbsp;of&nbsp;specifications&quot;.&lt;/li&gt;&lt;/ol&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;In&nbsp;the&nbsp;specific&nbsp;case&nbsp;you&nbsp;dealt&nbsp;with&nbsp;I&nbsp;agree&nbsp;with&nbsp;your&nbsp;evaluation&nbsp;and&nbsp;I'm&nbsp;glad&nbsp;we've&nbsp;landed&nbsp;the&nbsp;bugfix&nbsp;:-).&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace;&quot;&nbsp;class=&quot;&quot;&gt;-g&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
