<tt>
Your&nbsp;limit&nbsp;will&nbsp;usually&nbsp;be&nbsp;the&nbsp;number&nbsp;of&nbsp;file&nbsp;descriptors&nbsp;in&nbsp;the&nbsp;system,&nbsp;which&nbsp;can&nbsp;be&nbsp;usually&nbsp;changed&nbsp;via&nbsp;ulimit&nbsp;or&nbsp;your&nbsp;system&#39;s&nbsp;equivalent. &nbsp;On&nbsp;Linux&nbsp;I&nbsp;believe&nbsp;it&nbsp;defaults&nbsp;to&nbsp;1024,&nbsp;so&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;handle&nbsp;1024&nbsp;simultaneous&nbsp;connections.&lt;br&gt;<br>
&lt;br&gt;One&nbsp;thing&nbsp;of&nbsp;note&nbsp;is&nbsp;that&nbsp;you&nbsp;say&nbsp;you&nbsp;have&nbsp;concurrency&nbsp;issues&nbsp;handled&nbsp;--&nbsp;but&nbsp;with&nbsp;asynchronous&nbsp;I/O,&nbsp;there&nbsp;are&nbsp;no&nbsp;concurrency&nbsp;issues,&nbsp;since&nbsp;there&#39;s&nbsp;no&nbsp;concurrency&nbsp;(at&nbsp;least,&nbsp;not&nbsp;at&nbsp;application&nbsp;level). &nbsp;This&nbsp;is&nbsp;confusing&nbsp;at&nbsp;first&nbsp;but&nbsp;it&#39;s&nbsp;important&nbsp;to&nbsp;understand.&lt;br&gt;<br>
&lt;br&gt;All&nbsp;that&nbsp;said,&nbsp;you&nbsp;probably&nbsp;want&nbsp;to&nbsp;maintain&nbsp;a&nbsp;queue&nbsp;of&nbsp;URLs&nbsp;and&nbsp;some&nbsp;sort&nbsp;of&nbsp;graph&nbsp;representation&nbsp;of&nbsp;your&nbsp;data&nbsp;for&nbsp;purposes&nbsp;of&nbsp;finding&nbsp;loops&nbsp;(e.g.&nbsp;A&nbsp;links&nbsp;to&nbsp;B,&nbsp;B&nbsp;links&nbsp;to&nbsp;C,&nbsp;C&nbsp;links&nbsp;to&nbsp;A). &nbsp;You&nbsp;can&nbsp;then&nbsp;set&nbsp;an&nbsp;upper&nbsp;limit&nbsp;on&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;connections&nbsp;(say&nbsp;1000)&nbsp;and&nbsp;track&nbsp;the&nbsp;number&nbsp;of&nbsp;deferreds&nbsp;in&nbsp;the&nbsp;system&nbsp;just&nbsp;based&nbsp;on&nbsp;when&nbsp;you&nbsp;start&nbsp;connections&nbsp;and&nbsp;when&nbsp;they&nbsp;finish&nbsp;(via&nbsp;callbacks).  &nbsp;Your&nbsp;initial&nbsp;seed&nbsp;can&nbsp;start&nbsp;one&nbsp;URL,&nbsp;and&nbsp;then&nbsp;its&nbsp;callback&nbsp;can&nbsp;hit&nbsp;all&nbsp;linked&nbsp;nodes,&nbsp;and&nbsp;so&nbsp;on&nbsp;and&nbsp;so&nbsp;on.&lt;br&gt;<br>
&lt;br&gt;You&nbsp;might&nbsp;be&nbsp;hitting&nbsp;a&nbsp;cycle&nbsp;in&nbsp;the&nbsp;page&nbsp;traversal&nbsp;graph,&nbsp;and&nbsp;that&nbsp;is&nbsp;causing&nbsp;you&nbsp;all&nbsp;sorts&nbsp;of&nbsp;problems&nbsp;in&nbsp;terms&nbsp;of&nbsp;recursion&nbsp;depth&nbsp;or&nbsp;running&nbsp;out&nbsp;of&nbsp;file&nbsp;descriptors. &nbsp;Without&nbsp;seeing&nbsp;your&nbsp;code&nbsp;or&nbsp;your&nbsp;target&nbsp;site,&nbsp;though,&nbsp;it&#39;s&nbsp;impossible&nbsp;to&nbsp;say.&lt;br&gt;<br>
&lt;br&gt;Have&nbsp;you&nbsp;considered&nbsp;using&nbsp;another&nbsp;library&nbsp;for&nbsp;web&nbsp;spidering? &nbsp;I&nbsp;believe&nbsp;Scrapy&nbsp;(&lt;a&nbsp;href=&quot;http://scrapy.org&quot;&gt;http://scrapy.org&lt;/a&gt;)&nbsp;is&nbsp;a&nbsp;good&nbsp;spidering&nbsp;tool,&nbsp;and&nbsp;it&nbsp;might&nbsp;be&nbsp;easier&nbsp;to&nbsp;use&nbsp;a&nbsp;decent&nbsp;library&nbsp;than&nbsp;roll&nbsp;your&nbsp;own.&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt; &nbsp;-&nbsp;Matt&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Oct&nbsp;6,&nbsp;2009&nbsp;at&nbsp;10:40&nbsp;PM,&nbsp;Steve&nbsp;Steiner&nbsp;(listsin)&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:listsin@integrateddevcorp.com&quot;&gt;listsin@integrateddevcorp.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;So,&nbsp;I&nbsp;have&nbsp;a&nbsp;situation...&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; I&nbsp;have&nbsp;an&nbsp;application&nbsp;whose&nbsp;basic&nbsp;function&nbsp;is,&nbsp;in&nbsp;simplified&nbsp;form:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; def&nbsp;main():&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; get_web_page(main_page_from_params)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; def&nbsp;get_web_page(page_name):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set&nbsp;up&nbsp;a&nbsp;page&nbsp;getter&nbsp;deferred,&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; one&nbsp;of&nbsp;the&nbsp;callbacks&nbsp;gets&nbsp;the&nbsp;links&nbsp;out&nbsp;of&nbsp;the&nbsp;page&nbsp;and&nbsp;sends&nbsp;them&lt;br&gt;<br>
to&nbsp;get_them()&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; def&nbsp;get_them(links):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&nbsp;l&nbsp;in&nbsp;links:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&nbsp;l&nbsp;is&nbsp;not&nbsp;being&nbsp;gotten&nbsp;or&nbsp;hasn&#39;t&nbsp;been&nbsp;got:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; deferred&nbsp;=&nbsp;get_web_page(l)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; In&nbsp;other&nbsp;words,&nbsp;I&nbsp;feed&nbsp;in&nbsp;the&nbsp;top&nbsp;level&nbsp;page,&nbsp;then&nbsp;recursively&nbsp;feed&lt;br&gt;<br>
in&nbsp;any&nbsp;pages&nbsp;linked&nbsp;to&nbsp;by&nbsp;the&nbsp;current&nbsp;page,&nbsp;and&nbsp;they&nbsp;feed&nbsp;in&nbsp;all&nbsp;their&lt;br&gt;<br>
links,&nbsp;until&nbsp;all&nbsp;pages&nbsp;are&nbsp;gotten.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; I&nbsp;understand&nbsp;the&nbsp;concurrency&nbsp;issues&nbsp;with&nbsp;multiple&nbsp;deferred&#39;s&nbsp;trying&lt;br&gt;<br>
to&nbsp;add&nbsp;pages&nbsp;to&nbsp;the&nbsp;&quot;get&nbsp;list&quot;&nbsp;--&nbsp;it&#39;s&nbsp;properly&nbsp;handled&nbsp;in&nbsp;the&nbsp;code&lt;br&gt;<br>
(far&nbsp;as&nbsp;I&nbsp;can&nbsp;tell,&nbsp;so&nbsp;far).&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; So,&nbsp;here&#39;s&nbsp;the&nbsp;question...&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; I&nbsp;have&nbsp;a&nbsp;&quot;pages&quot;&nbsp; list&nbsp;containing&nbsp;all&nbsp;of&nbsp;the&nbsp;pages.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; They&nbsp;are&nbsp;set&nbsp;to&nbsp;either&nbsp;gotten&nbsp;or&nbsp;in-flight.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; In-flight&nbsp;means&nbsp;I&nbsp;have&nbsp;a&nbsp;deferred&nbsp;that&#39;s&nbsp;going&nbsp;to&nbsp;go&nbsp;get&nbsp;it&nbsp;(in&lt;br&gt;<br>
get_web_page()).&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; IOW,&nbsp;right&nbsp;now,&nbsp;if&nbsp;I&nbsp;don&#39;t&nbsp;already&nbsp;have&nbsp;the&nbsp;page,&nbsp;and&nbsp;I&nbsp;have&nbsp;a&nbsp;link&lt;br&gt;<br>
to&nbsp;it,&nbsp;I&nbsp;just&nbsp;start&nbsp;a&nbsp;deferred&nbsp;to&nbsp;go&nbsp;get&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Should&nbsp;I&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;&quot;in-flight&quot;&nbsp;pages?&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Currently,&nbsp;I&#39;m&nbsp;scanning&nbsp;sites&nbsp;that&nbsp;have&nbsp;upwards&nbsp;of&nbsp;5000&nbsp;pages&nbsp;and&nbsp;it&lt;br&gt;<br>
seems&nbsp;that,&nbsp;when&nbsp;I&nbsp;get&nbsp;too&nbsp;many&nbsp;deferred&#39;s&nbsp;in&nbsp;flight,&nbsp;the&nbsp;app&lt;br&gt;<br>
*appears*&nbsp;to&nbsp;crash.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; I&#39;m&nbsp;not&nbsp;sure&nbsp;whether&nbsp;it&#39;s&nbsp;actually&nbsp;going&nbsp;out&nbsp;to&nbsp;lunch&nbsp;or&nbsp;just&nbsp;appears&lt;br&gt;<br>
that&nbsp;way&nbsp;and,&nbsp;before&nbsp;I&nbsp;go&nbsp;instrumenting&nbsp;the&nbsp;app&nbsp;to&nbsp;death,&nbsp;can&nbsp;anyone&lt;br&gt;<br>
tell&nbsp;me&nbsp;whether&nbsp;there&nbsp;is&nbsp;some&nbsp;sort&nbsp;of&nbsp;practical&nbsp;limit&nbsp;to&nbsp;how&nbsp;many&nbsp;&quot;in-&lt;br&gt;<br>
flight&quot;&nbsp;deferreds&nbsp;might&nbsp;start&nbsp;to&nbsp;cause&nbsp;issues,&nbsp;just&nbsp;due&nbsp;to&nbsp;the&nbsp;sheer&lt;br&gt;<br>
number?&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; Thanks&nbsp;for&nbsp;any&nbsp;insight&nbsp;on&nbsp;this&nbsp;that&nbsp;anyone&nbsp;might&nbsp;offer.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; I&nbsp;expect&nbsp;the&nbsp;usual&nbsp;flurry&nbsp;of&nbsp; &quot;you&nbsp;must&nbsp;post&nbsp;your&nbsp;exact&nbsp;code&nbsp;or&nbsp;we&lt;br&gt;<br>
can&#39;t&nbsp;help&nbsp;you&nbsp;at&nbsp;all,&nbsp;moron&quot;&nbsp;posts,&nbsp;but...&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; In&nbsp;spite&nbsp;of&nbsp;my&nbsp;not&nbsp;having&nbsp;posted&nbsp;specific&nbsp;code,&nbsp;could&nbsp;someone&nbsp;with&lt;br&gt;<br>
some&nbsp;actual&nbsp;experience&nbsp;in&nbsp;this&nbsp;please&nbsp;give&nbsp;me&nbsp;a&nbsp;clue,&nbsp;within&nbsp;an&nbsp;order&lt;br&gt;<br>
of&nbsp;magnitude,&nbsp;how&nbsp;many&nbsp;deferreds&nbsp;might&nbsp;start&nbsp;to&nbsp;cause&nbsp;real&nbsp;trouble?&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
&lt;br&gt;<br>
S&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
