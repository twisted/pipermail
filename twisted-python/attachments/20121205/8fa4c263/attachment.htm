<tt>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;Hi,&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;I&nbsp;am&nbsp;hitting&nbsp;an&nbsp;issue&nbsp;with&nbsp;inlineCallbacks-decorated&nbsp;functions. &nbsp;It&nbsp;seems&nbsp;that&nbsp;from&nbsp;within&nbsp;an&nbsp;inlineCallbacks-decorated&nbsp;func,&nbsp;if&nbsp;you&nbsp;yield&nbsp;on&nbsp;another&nbsp;deferred-returning&nbsp;func,&nbsp;and&nbsp;that&nbsp;deferred-returning&nbsp;func&nbsp;returns&nbsp;a&nbsp;deferred&nbsp;which&nbsp;will&nbsp;errback&nbsp;with&nbsp;a&nbsp;Failure&nbsp;wrapping&nbsp;a&nbsp;user&nbsp;defined&nbsp;exception&nbsp;type,&nbsp;then&nbsp;the&nbsp;user&nbsp;defined&nbsp;exception&nbsp;gets&nbsp;repackaged&nbsp;as&nbsp;a&nbsp;common&nbsp;Exception&nbsp;by&nbsp;the&nbsp;time&nbsp;you&nbsp;are&nbsp;in&nbsp;the&nbsp;inlineCallbacks-decorated&nbsp;function. &nbsp;It&nbsp;seems&nbsp;to&nbsp;be&nbsp;related&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;inside&nbsp;an&nbsp;inlineCallbacks-decorated&nbsp;func,&nbsp;if&nbsp;you&nbsp;yield&nbsp;on&nbsp;a&nbsp;func,&nbsp;and&nbsp;that&nbsp;func&nbsp;returns&nbsp;a&nbsp;deferred&nbsp;which&nbsp;errs&nbsp;back,&nbsp;twisted&nbsp;will&nbsp;convert&nbsp;the&nbsp;errback&nbsp;into&nbsp;a&nbsp;synchronous&nbsp;exception&nbsp;that&nbsp;it&nbsp;raises&nbsp;for&nbsp;you. &nbsp;That’s&nbsp;all&nbsp;a&nbsp;bit&nbsp;wordy,&nbsp;so&nbsp;maybe&nbsp;some&nbsp;code&nbsp;will&nbsp;help&nbsp;clarify:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;$&nbsp;cat&nbsp;inlinecallbacks-loses-exception-types.py&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;#!/usr/bin/env&nbsp;python&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
 &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;import&nbsp;sys,&nbsp;traceback&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;from&nbsp;twisted.internet        &nbsp;import&nbsp;defer,&nbsp;reactor&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
 &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;class&nbsp;MyException(Exception):&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &nbsp;pass&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
def&nbsp;go2():&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;&amp;quot;An&nbsp;ordinary&nbsp;deferred-returning&nbsp;function&nbsp;that&nbsp;will&nbsp;return&nbsp;a&nbsp;deferred&nbsp;which&nbsp;is&nbsp;ready&nbsp;to&nbsp;errback()&amp;quot;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
   &nbsp;try:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;raise&nbsp;MyException(&amp;#39;xyz&amp;#39;)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
       &nbsp;return&nbsp;defer.fail()&nbsp;#&nbsp;errs&nbsp;back&nbsp;with&nbsp;current&nbsp;exception&nbsp;context&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;return&nbsp;defer.succeed(1)&nbsp;#&nbsp;unreachable&nbsp;code&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;@defer.inlineCallbacks&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;def&nbsp;go_inlinecb():&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
   &nbsp;try:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;x&nbsp;=&nbsp;yield&nbsp;go2()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;print&nbsp;&amp;#39;no&nbsp;exception&nbsp;raised&amp;#39;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
   &nbsp;except&nbsp;MyException&nbsp;as&nbsp;e:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;print&nbsp;&amp;#39;got&nbsp;my&nbsp;custom&nbsp;exception&amp;#39;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;traceback.print_exc()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
   &nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;print&nbsp;&amp;#39;got&nbsp;a&nbsp;garden&nbsp;variety&nbsp;exception&amp;#39;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;traceback.print_exc()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
 &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;def&nbsp;go_noinlinecb():&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;d&nbsp;=&nbsp;go2()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;def&nbsp;cb(data):&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
       &nbsp;print&nbsp;&amp;#39;got&nbsp;data&nbsp;in&nbsp;cb:&nbsp;%s&amp;#39;&nbsp;%&nbsp;(data)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;def&nbsp;eb(failure):&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;try:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
           &nbsp;failure.raiseException()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;except&nbsp;MyException&nbsp;as&nbsp;e:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;           &nbsp;print&nbsp;&amp;#39;got&nbsp;my&nbsp;custom&nbsp;exception&amp;#39;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;           &nbsp;traceback.print_exc()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;       &nbsp;except&nbsp;Exception&nbsp;as&nbsp;e:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;           &nbsp;print&nbsp;&amp;#39;got&nbsp;a&nbsp;garden&nbsp;variety&nbsp;exception&amp;#39;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;           &nbsp;traceback.print_exc()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;d.addCallbacks(cb,&nbsp;eb)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
if&nbsp;sys.argv[1]&nbsp;==&nbsp;&amp;#39;inline&amp;#39;:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;reactor.callWhenRunning(go_inlinecb)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;elif&nbsp;sys.argv[1]&nbsp;==&nbsp;&amp;#39;noinline&amp;#39;:&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
   &nbsp;reactor.callWhenRunning(go_noinlinecb)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;reactor.callLater(2,&nbsp;reactor.stop)&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;reactor.run()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
 &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;$&nbsp;./inlinecallbacks-loses-exception-types.py&nbsp;inline &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;got&nbsp;a&nbsp;garden&nbsp;variety&nbsp;exception&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &nbsp;File&nbsp;&amp;quot;./inlinecallbacks-loses-exception-types.py&amp;quot;,&nbsp;line&nbsp;21,&nbsp;in&nbsp;go_inlinecb&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;x&nbsp;=&nbsp;yield&nbsp;go2()&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;Exception:&nbsp;xyz&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;$&nbsp;./inlinecallbacks-loses-exception-types.py&nbsp;noinline&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
got&nbsp;my&nbsp;custom&nbsp;exception&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &nbsp;File&nbsp;&amp;quot;./inlinecallbacks-loses-exception-types.py&amp;quot;,&nbsp;line&nbsp;36,&nbsp;in&nbsp;eb&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;failure.raiseException()&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &nbsp;File&nbsp;&amp;quot;/sw/external/twisted-py27-11.0.0/lib/python/twisted/python/failure.py&amp;quot;,&nbsp;line&nbsp;338,&nbsp;in&nbsp;raiseException&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;   &nbsp;raise&nbsp;self.type,&nbsp;self.value,&nbsp;self.tb&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;MyException:&nbsp;xyz&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt; &lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Calibri,sans-serif&quot;&gt;<br>
So&nbsp;as&nbsp;you&nbsp;can&nbsp;see,&nbsp;it&nbsp;seems&nbsp;that&nbsp;if&nbsp;you&nbsp;use&nbsp;inlineCallbacks,&nbsp;you&nbsp;cannot&nbsp;‘except&nbsp;MyException’&nbsp;and&nbsp;catch&nbsp;your&nbsp;own&nbsp;custom&nbsp;exceptions. &nbsp;Somehow&nbsp;a&nbsp;generic&nbsp;Exception&nbsp;is&nbsp;constructed. &nbsp;Is&nbsp;there&nbsp;any&nbsp;workaround&nbsp;or&nbsp;is&nbsp;this&nbsp;a&nbsp;known&nbsp;issue?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;Benjamin&nbsp;Rutt&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
