<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7653.2&quot;&gt;<br>
&lt;TITLE&gt;IPushProducer&nbsp;-&nbsp;medium&nbsp;volume&nbsp;streaming&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/rtf&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;I've&nbsp;got&nbsp;an&nbsp;IPushProducer&nbsp;written&nbsp;with&nbsp;these&nbsp;3&nbsp;methods&nbsp;and&nbsp;it&nbsp;works&nbsp;fine&nbsp;-&nbsp;i.e.&nbsp;resumeProducing()&nbsp;is&nbsp;called,&nbsp;then&nbsp;eventually&nbsp;pauseProducing&nbsp;is&nbsp;called()&nbsp;when&nbsp;the&nbsp;producer&nbsp;produces&nbsp;data&nbsp;too&nbsp;fast;&nbsp;when&nbsp;the&nbsp;client&nbsp;disconnects&nbsp;early,&nbsp;the&nbsp;stopProducing&nbsp;method&nbsp;is&nbsp;called,&nbsp;etc..&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;def&nbsp;pauseProducing(self):&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;def&nbsp;resumeProducing(self):&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;&nbsp;&nbsp;def&nbsp;stopProducing(self):&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;My&nbsp;problem&nbsp;is,&nbsp;the&nbsp;source&nbsp;of&nbsp;the&nbsp;data&nbsp;(a&nbsp;slow&nbsp;non-relational&nbsp;database)&nbsp;that&nbsp;I&nbsp;send&nbsp;back&nbsp;to&nbsp;the&nbsp;client&nbsp;from&nbsp;within&nbsp;resumeProducing&nbsp;generates&nbsp;data&nbsp;kind&nbsp;of&nbsp;slowly.&nbsp;&nbsp;As&nbsp;in,&nbsp;it&nbsp;is&nbsp;quite&nbsp;rare&nbsp;that&nbsp;pauseProducing&nbsp;is&nbsp;ever&nbsp;called&nbsp;in&nbsp;my&nbsp;tests.&nbsp;&nbsp;I&nbsp;feel&nbsp;that&nbsp;the&nbsp;data&nbsp;source&nbsp;generates&nbsp;data&nbsp;too&nbsp;slowly,&nbsp;and&nbsp;have&nbsp;figured&nbsp;out&nbsp;I&nbsp;will&nbsp;block&nbsp;the&nbsp;entire&nbsp;server&nbsp;during&nbsp;the&nbsp;resumeProducing&nbsp;operation&nbsp;(for&nbsp;example,&nbsp;during&nbsp;the&nbsp;first&nbsp;call&nbsp;to&nbsp;resumeProducing,&nbsp;I&nbsp;do&nbsp;not&nbsp;generate&nbsp;any&nbsp;data&nbsp;at&nbsp;all&nbsp;for&nbsp;the&nbsp;first&nbsp;20&nbsp;seconds&nbsp;during&nbsp;bootstrapping).&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;At&nbsp;this&nbsp;point,&nbsp;I&nbsp;am&nbsp;thinking&nbsp;about&nbsp;the&nbsp;following&nbsp;ideas&nbsp;of&nbsp;code&nbsp;changes&nbsp;to&nbsp;prevent&nbsp;blockage&nbsp;of&nbsp;the&nbsp;server:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;1)&nbsp;forking&nbsp;off&nbsp;a&nbsp;thread&nbsp;so&nbsp;that&nbsp;I&nbsp;will&nbsp;not&nbsp;block&nbsp;other&nbsp;clients&nbsp;from&nbsp;talking&nbsp;to&nbsp;the&nbsp;server.&nbsp;&nbsp;I&nbsp;will&nbsp;not&nbsp;have&nbsp;very&nbsp;many&nbsp;clients&nbsp;using&nbsp;this&nbsp;producer,&nbsp;so&nbsp;this&nbsp;would&nbsp;not&nbsp;result&nbsp;in&nbsp;any&nbsp;large&nbsp;numbers&nbsp;of&nbsp;threads&nbsp;which&nbsp;I&nbsp;know&nbsp;can&nbsp;be&nbsp;a&nbsp;problem.&nbsp;&nbsp;I&nbsp;know&nbsp;how&nbsp;to&nbsp;spawn&nbsp;Python&nbsp;threads&nbsp;and&nbsp;use&nbsp;socket&nbsp;APIs,&nbsp;but&nbsp;it&nbsp;is&nbsp;not&nbsp;clear&nbsp;to&nbsp;me&nbsp;how&nbsp;I&nbsp;would&nbsp;get&nbsp;at&nbsp;the&nbsp;socket&nbsp;descriptor&nbsp;from&nbsp;within&nbsp;the&nbsp;twisted&nbsp;framework&nbsp;(I&nbsp;am&nbsp;using&nbsp;a&nbsp;LineReceiver&nbsp;subclass,&nbsp;which&nbsp;in&nbsp;this&nbsp;case&nbsp;is&nbsp;spawning&nbsp;the&nbsp;IPushProducer).&nbsp;&nbsp;Are&nbsp;there&nbsp;any&nbsp;examples&nbsp;of&nbsp;spawning&nbsp;off&nbsp;a&nbsp;thread&nbsp;from&nbsp;a&nbsp;LineReceiver&nbsp;class&nbsp;and&nbsp;communicating&nbsp;using&nbsp;blocking&nbsp;calls&nbsp;within&nbsp;said&nbsp;thread?&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;2)&nbsp;returning&nbsp;from&nbsp;resumeProducing&nbsp;after&nbsp;a&nbsp;few&nbsp;seconds&nbsp;of&nbsp;production,&nbsp;even&nbsp;though&nbsp;I&nbsp;could&nbsp;produce&nbsp;more,&nbsp;so&nbsp;I&nbsp;do&nbsp;not&nbsp;block&nbsp;the&nbsp;server.&nbsp;&nbsp;I&nbsp;have&nbsp;tested&nbsp;this,&nbsp;it&nbsp;works,&nbsp;and&nbsp;does&nbsp;let&nbsp;other&nbsp;clients&nbsp;get&nbsp;in,&nbsp;but&nbsp;I&nbsp;still&nbsp;feel&nbsp;it&nbsp;is&nbsp;suboptimal,&nbsp;since&nbsp;my&nbsp;data&nbsp;source&nbsp;is&nbsp;so&nbsp;slow,&nbsp;it&nbsp;still&nbsp;blocks&nbsp;the&nbsp;server&nbsp;during&nbsp;each&nbsp;of&nbsp;those&nbsp;few&nbsp;second&nbsp;intervals.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&nbsp;FACE=&quot;Arial&quot;&gt;Any&nbsp;recommendations&nbsp;here?&nbsp;&nbsp;Thank&nbsp;you.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
