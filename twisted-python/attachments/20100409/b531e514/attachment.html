<tt>
Definitely&nbsp;use&nbsp;syslog.&nbsp; To&nbsp;see&nbsp;how&nbsp;much&nbsp;logging&nbsp;is&nbsp;costing&nbsp;you&nbsp;without&nbsp;changing&nbsp;code,&nbsp;you&nbsp;can&nbsp;simply&nbsp;route&nbsp;to&nbsp;/dev/null&nbsp;via&nbsp;syslog.&nbsp; Btw,&nbsp;w/&nbsp;local&nbsp;logging,&nbsp;you&nbsp;may&nbsp;not&nbsp;see&nbsp;it&nbsp;in&nbsp;the&nbsp;cpu&nbsp;usage&nbsp;-&nbsp;more&nbsp;likely&nbsp;in&nbsp;the&nbsp;i/o&nbsp;wait.&nbsp; In&nbsp;my&nbsp;experience,&nbsp;logging&nbsp;to&nbsp;a&nbsp;remote&nbsp;syslog-ng&nbsp;server&nbsp;over&nbsp;udp&nbsp;has&nbsp;very&nbsp;little&nbsp;impact&nbsp;on&nbsp;the&nbsp;app,&nbsp;almost&nbsp;like&nbsp;logging&nbsp;to&nbsp;/dev/null&nbsp;(which&nbsp;in&nbsp;turn&nbsp;is&nbsp;like&nbsp;not&nbsp;logging&nbsp;at&nbsp;all).&nbsp; &lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;Are&nbsp;you&nbsp;by&nbsp;chance&nbsp;on&nbsp;AWS/EC2&nbsp;?&nbsp; If&nbsp;so,&nbsp;please&nbsp;contact&nbsp;me&nbsp;to&nbsp;discuss&nbsp;possible&nbsp;design&nbsp;partnership.&nbsp; &lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;m&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Apr&nbsp;9,&nbsp;2010&nbsp;at&nbsp;11:57&nbsp;AM,&nbsp;Jason&nbsp;J.&nbsp;W.&nbsp;Williams&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:jasonjwwilliams@gmail.com&quot;&gt;jasonjwwilliams@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;Hi&nbsp;Paul,&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;is&nbsp;sporadic?&nbsp;(the&nbsp;CPU&nbsp;burst)&nbsp;If&nbsp;so,&nbsp;you&nbsp;may&nbsp;be&nbsp;seeing&nbsp;the&nbsp;log&lt;br&gt;<br>
rotation&nbsp;code&nbsp;kicking...and&nbsp;it&amp;#39;s&nbsp;probably&nbsp;blocking&nbsp;your&nbsp;app&nbsp;too&nbsp;until&lt;br&gt;<br>
it&nbsp;completes.&lt;br&gt;<br>
&lt;br&gt;<br>
I&amp;#39;ve&nbsp;got&nbsp;a&nbsp;couple&nbsp;patches&nbsp;to&nbsp;fix&nbsp;the&nbsp;blocking&nbsp;issue:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/ticket/4372&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/trac/ticket/4372&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;patch&nbsp;which&nbsp;eliminates&nbsp;old&nbsp;log&nbsp;rotation&nbsp;will&nbsp;probably&nbsp;get&nbsp;rid&nbsp;of&lt;br&gt;<br>
your&nbsp;CPU&nbsp;problem&nbsp;too.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
-J&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
On&nbsp;Fri,&nbsp;Apr&nbsp;9,&nbsp;2010&nbsp;at&nbsp;2:35&nbsp;AM,&nbsp;Paul&nbsp;Goins&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:general@vultaire.net&quot;&gt;general@vultaire.net&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;There&nbsp;may&nbsp;not&nbsp;be&nbsp;a&nbsp;clear&nbsp;answer&nbsp;to&nbsp;this&nbsp;problem,&nbsp;and&nbsp;the&nbsp;answer&nbsp;may&nbsp;or&lt;br&gt;<br>
&amp;gt;&nbsp;may&nbsp;not&nbsp;be&nbsp;Twisted-specific.&nbsp; I&amp;#39;m&nbsp;just&nbsp;trying&nbsp;to&nbsp;fish&nbsp;for&nbsp;ideas&nbsp;here.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;The&nbsp;server&nbsp;I&amp;#39;m&nbsp;working&nbsp;on&nbsp;suffers&nbsp;from&nbsp;extremely&nbsp;high&nbsp;CPU&nbsp;time&nbsp;spent&nbsp;in&lt;br&gt;<br>
&amp;gt;&nbsp;the&nbsp;logging&nbsp;functions.&nbsp; I&amp;#39;m&nbsp;spending&nbsp;between&nbsp;30&nbsp;and&nbsp;40%&nbsp;of&nbsp;all&nbsp;CPU&nbsp;time&lt;br&gt;<br>
&amp;gt;&nbsp;just&nbsp;in&nbsp;twisted.python.log.msg.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Describing&nbsp;the&nbsp;environment:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;We&nbsp;use&nbsp;DailyLogFiles&nbsp;for&nbsp;file&nbsp;rotation&nbsp;along&nbsp;with&nbsp;the&lt;br&gt;<br>
&amp;gt;&nbsp;PythonLoggingObserver&nbsp;to&nbsp;allow&nbsp;for&nbsp;logLevel&nbsp;support.&nbsp; (Of&nbsp;course,&nbsp;this&lt;br&gt;<br>
&amp;gt;&nbsp;gives&nbsp;us&nbsp;significant&nbsp;overhead&nbsp;from&nbsp;Python&amp;#39;s&nbsp;complex&nbsp;logging&lt;br&gt;<br>
&amp;gt;&nbsp;architecture;&nbsp;maybe&nbsp;we&nbsp;should&nbsp;drop&nbsp;this...)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;a&nbsp;1000&nbsp;request&nbsp;test&nbsp;of&nbsp;this&nbsp;server,&nbsp;we&nbsp;generate&nbsp;58,274&nbsp;calls&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;t.p.log.msg.&nbsp; There&amp;#39;s&nbsp;room&nbsp;for&nbsp;cleanup,&nbsp;but&nbsp;there&amp;#39;s&nbsp;lots&nbsp;of&nbsp;pressure&nbsp;to&lt;br&gt;<br>
&amp;gt;&nbsp;keep&nbsp;many&nbsp;of&nbsp;the&nbsp;log&nbsp;calls&nbsp;we&nbsp;have&nbsp;for&nbsp;forensic&nbsp;purposes,&nbsp;so&nbsp;we&nbsp;can&nbsp;only&lt;br&gt;<br>
&amp;gt;&nbsp;cut&nbsp;this&nbsp;back&nbsp;so&nbsp;far.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;Anyway,&nbsp;does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;ideas&nbsp;for&nbsp;speedups?&nbsp; Any&nbsp;stories&nbsp;from&lt;br&gt;<br>
&amp;gt;&nbsp;experience&nbsp;especially?&nbsp; Shots&nbsp;in&nbsp;the&nbsp;dark&nbsp;are&nbsp;welcome.&nbsp; ;-)&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;-&lt;br&gt;<br>
&amp;gt;&nbsp;Paul&nbsp;Goins&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&amp;gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
