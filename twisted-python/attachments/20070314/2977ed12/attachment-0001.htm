<tt>
&amp;gt;Assuming&nbsp;that&nbsp;your&nbsp;python&nbsp;program&nbsp;is&nbsp;connected&nbsp;to&nbsp;your&nbsp;two&lt;br&gt;&amp;gt;devices&nbsp;with&nbsp;two&nbsp;independent&nbsp;TCP&nbsp;connections,&nbsp;your&nbsp;python&lt;br&gt;&amp;gt;program&nbsp;actually&nbsp;is&nbsp;doing&nbsp;message&nbsp;based&nbsp;routing&nbsp;among&nbsp;two&lt;br&gt;&amp;gt;async&nbsp;bi-directional&nbsp;tcp&nbsp;channels.<br>
&lt;br&gt;&lt;br&gt;This&nbsp;is&nbsp;a&nbsp;very&nbsp;good&nbsp;way&nbsp;to&nbsp;describe&nbsp;it,&nbsp;thank&nbsp;you.&lt;br&gt;&lt;br&gt;&amp;gt;Four&nbsp;extra&nbsp;threads&nbsp;is&nbsp;four&nbsp;more&nbsp;than&nbsp;there&amp;#39;s&nbsp;any&nbsp;reason&nbsp;to&nbsp;have&nbsp;here.&amp;nbsp;&amp;nbsp;Two&lt;br&gt;&amp;gt;threads&nbsp;per&nbsp;socket&nbsp;is&nbsp;the&nbsp;kind&nbsp;of&nbsp;thing&nbsp;Twisted&nbsp;exists&nbsp;to&nbsp;let&nbsp;you&nbsp;avoid.<br>
&lt;br&gt;&lt;br&gt;Even&nbsp;with&nbsp;asyncore&nbsp;I&nbsp;don&amp;#39;t&nbsp;need&nbsp;two&nbsp;threads&nbsp;per&nbsp;connection.&nbsp;The&nbsp;asyncore&nbsp;loop&nbsp;handles&nbsp;the&nbsp;send&nbsp;and&nbsp;receive&nbsp;just&nbsp;fine.&nbsp;My&nbsp;Queue&nbsp;interface&nbsp;between&nbsp;my&nbsp;application&nbsp;and&nbsp;the&nbsp;comms&nbsp;layer&nbsp;is&nbsp;what&nbsp;I&nbsp;need&nbsp;a&nbsp;protocol&nbsp;for.&nbsp;Abstractly,&nbsp;it&nbsp;isn&amp;#39;t&nbsp;complicated,&nbsp;I&nbsp;just&nbsp;don&amp;#39;t&nbsp;have&nbsp;time&nbsp;to&nbsp;go&nbsp;down&nbsp;that&nbsp;road&nbsp;without&nbsp;any&nbsp;guidance&nbsp;because&nbsp;if&nbsp;it&nbsp;takes&nbsp;more&nbsp;then&nbsp;a&nbsp;day&nbsp;or&nbsp;two&nbsp;I&amp;#39;m&nbsp;toast.<br>
&lt;br&gt;&lt;br&gt;I&amp;#39;m&nbsp;more&nbsp;interested&nbsp;in&nbsp;a&nbsp;mapping&nbsp;from&nbsp;asyncore&nbsp;dispatcher&nbsp;to&nbsp;twisted&nbsp;protocol.&nbsp;This&nbsp;is&nbsp;on&nbsp;my&nbsp;to&nbsp;do&nbsp;list&nbsp;to&nbsp;figure&nbsp;out&nbsp;but&nbsp;for&nbsp;my&nbsp;current&nbsp;project&nbsp;i&nbsp;don&amp;#39;t&nbsp;have&nbsp;time.&nbsp;Something&nbsp;filling&nbsp;in&nbsp;these&nbsp;blanks&nbsp;would&nbsp;be&nbsp;perfect:<br>
&lt;br&gt;&lt;br&gt;Asyncore.dispatcher&nbsp;-----&amp;gt;Twisted&nbsp;Protocol&lt;br&gt;handle_connect&nbsp;------------&amp;gt;&nbsp;?&lt;br&gt;handle_read&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;------------&amp;gt;&nbsp;read,&nbsp;getline,&nbsp;readraw,&nbsp;etc...&lt;br&gt;handle_write&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;------------&amp;gt;&nbsp;sendline,&nbsp;send,&nbsp;etc...&lt;br&gt;<br>
handle_expt&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;------------&amp;gt;&nbsp;?&lt;br&gt;?&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;-------------&amp;gt;&nbsp;buildFactory&lt;br&gt;asyncore.loop&amp;nbsp;&nbsp;------------&amp;gt;&nbsp;reactor.run&lt;br&gt;&lt;br&gt;Obviously&nbsp;need&nbsp;more&nbsp;then&nbsp;just&nbsp;that.&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;found&nbsp;the&nbsp;online&nbsp;examples&nbsp;and&nbsp;documentation&nbsp;to&nbsp;be&nbsp;quite&nbsp;terse&nbsp;when&nbsp;describing&nbsp;how&nbsp;things&nbsp;fit&nbsp;together.&nbsp;When&nbsp;I&nbsp;eventually&nbsp;get&nbsp;the&nbsp;chance&nbsp;to&nbsp;make&nbsp;this&nbsp;migration&nbsp;I&nbsp;plan&nbsp;to&nbsp;write&nbsp;a&nbsp;tutorial.&nbsp;In&nbsp;my&nbsp;opinion&nbsp;the&nbsp;less&nbsp;legacy&nbsp;code&nbsp;directly&nbsp;using&nbsp;asyncore&nbsp;in&nbsp;this&nbsp;world,&nbsp;the&nbsp;better,&nbsp;so&nbsp;may&nbsp;as&nbsp;well&nbsp;make&nbsp;it&nbsp;easy&nbsp;to&nbsp;migrate.<br>
&lt;br&gt;&lt;br&gt;Sean&lt;br&gt;&lt;br&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;3/14/07,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Jean-Paul&nbsp;Calderone&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@divmod.com&quot;&gt;exarkun@divmod.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
On&nbsp;Wed,&nbsp;14&nbsp;Mar&nbsp;2007&nbsp;00:26:23&nbsp;-0700,&nbsp;jian&nbsp;wu&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:hellojianwu@gmail.com&quot;&gt;hellojianwu@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;Hi&nbsp;Sean,&lt;br&gt;&amp;gt;&amp;gt;I&nbsp;am&nbsp;actually&nbsp;not&nbsp;sure&nbsp;if&nbsp;it&nbsp;is&nbsp;my&nbsp;protocol&nbsp;that&nbsp;is&nbsp;complicated&lt;br&gt;&amp;gt;&amp;gt;or&nbsp;if&nbsp;the&nbsp;way&nbsp;in&nbsp;which&nbsp;I&nbsp;want&nbsp;to&nbsp;pass&nbsp;the&nbsp;data&nbsp;that&nbsp;is&nbsp;complicated.<br>
&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;I&nbsp;should&nbsp;claim&nbsp;that&nbsp;I&amp;#39;m&nbsp;not&nbsp;very&nbsp;well&nbsp;experienced&nbsp;with&nbsp;either&nbsp;Twisted&lt;br&gt;&amp;gt;or&nbsp;asyncore,&nbsp;My&nbsp;guess&nbsp;is&nbsp;that&nbsp;is&nbsp;not&nbsp;protocol&nbsp;but&nbsp;the&nbsp;way&nbsp;to&nbsp;pass&lt;br&gt;&amp;gt;data.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;Assuming&nbsp;that&nbsp;your&nbsp;python&nbsp;program&nbsp;is&nbsp;connected&nbsp;to&nbsp;your&nbsp;two<br>
&lt;br&gt;&amp;gt;devices&nbsp;with&nbsp;two&nbsp;independent&nbsp;TCP&nbsp;connections,&nbsp;your&nbsp;python&lt;br&gt;&amp;gt;program&nbsp;actually&nbsp;is&nbsp;doing&nbsp;message&nbsp;based&nbsp;routing&nbsp;among&nbsp;two&lt;br&gt;&amp;gt;async&nbsp;bi-directional&nbsp;tcp&nbsp;channels.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;My&nbsp;guess&nbsp;is&nbsp;that&nbsp;you&nbsp;can&nbsp;keep&nbsp;two&nbsp;Queues&nbsp;since&nbsp;it&nbsp;will&nbsp;help<br>
&lt;br&gt;&amp;gt;keeping&nbsp;the&nbsp;order&nbsp;of&nbsp;the&nbsp;async&nbsp;messages&nbsp;received&nbsp;and&nbsp;processed.&lt;br&gt;&amp;gt;And,&nbsp;since&nbsp;twisted&nbsp;has&nbsp;a&nbsp;thread&nbsp;pool,&nbsp;it&nbsp;might&nbsp;be&nbsp;doable&nbsp;that&lt;br&gt;&amp;gt;you&nbsp;could&nbsp;create&nbsp;four&nbsp;threads,&nbsp;two&nbsp;for&nbsp;each&nbsp;TCP&nbsp;Connections,&lt;br&gt;&amp;gt;one&nbsp;thread&nbsp;for&nbsp;read&nbsp;and&nbsp;another&nbsp;for&nbsp;write&nbsp;per&nbsp;TCP&nbsp;connection,<br>
&lt;br&gt;&amp;gt;the&nbsp;read&nbsp;thread&nbsp;will&nbsp;handle&nbsp;the&nbsp;received&nbsp;message,&nbsp;process&nbsp;it&lt;br&gt;&amp;gt;and&nbsp;put&nbsp;it&nbsp;into&nbsp;the&nbsp;Queue,&nbsp;the&nbsp;write&nbsp;thread&nbsp;will&nbsp;take&nbsp;the&nbsp;message&lt;br&gt;&amp;gt;from&nbsp;the&nbsp;Queue&nbsp;and&nbsp;write&nbsp;it&nbsp;out&nbsp;to&nbsp;the&nbsp;targeted&nbsp;TCP&nbsp;connection.&lt;br&gt;&amp;gt;&lt;br&gt;<br>
&lt;br&gt;Four&nbsp;extra&nbsp;threads&nbsp;is&nbsp;four&nbsp;more&nbsp;than&nbsp;there&amp;#39;s&nbsp;any&nbsp;reason&nbsp;to&nbsp;have&nbsp;here.&amp;nbsp;&amp;nbsp;Two&lt;br&gt;threads&nbsp;per&nbsp;socket&nbsp;is&nbsp;the&nbsp;kind&nbsp;of&nbsp;thing&nbsp;Twisted&nbsp;exists&nbsp;to&nbsp;let&nbsp;you&nbsp;avoid.&lt;br&gt;&lt;br&gt;Jean-Paul&lt;br&gt;&lt;br&gt;_______________________________________________<br>
&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python<br>
&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;br&gt;Sean&nbsp;Roark<br>

</tt>
