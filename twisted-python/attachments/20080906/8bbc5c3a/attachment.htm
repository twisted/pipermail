<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;2008/9/5&nbsp;Jean-Paul&nbsp;Calderone&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@divmod.com&quot;&gt;exarkun@divmod.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
On&nbsp;Fri,&nbsp;5&nbsp;Sep&nbsp;2008&nbsp;09:48:08&nbsp;+0200,&nbsp;Henrik&nbsp;Thostrup&nbsp;Jensen&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:thostrup@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;thostrup@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
[snip]&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;<br>
Twisted&nbsp;web&nbsp;is&nbsp;currently&nbsp;not&nbsp;an&nbsp;option&nbsp;(I&nbsp;need&nbsp;request&nbsp;pipelining&nbsp;and&nbsp;http&nbsp;1.1).&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Which&nbsp;other&nbsp;HTTP&nbsp;1.1&nbsp;features&nbsp;do&nbsp;you&nbsp;need?&lt;br&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;<br>
&lt;/font&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;HTTP&nbsp;1.1&nbsp;status&nbsp;codes,&nbsp;notable&nbsp;303&nbsp;(see&nbsp;other).&nbsp;I&nbsp;could&nbsp;probably&nbsp;use&nbsp;302,&nbsp;but&nbsp;303&nbsp;is&nbsp;the&nbsp;&amp;quot;correct&amp;quot;&nbsp;behaviour&nbsp;for&nbsp;my&nbsp;case.&nbsp;This&nbsp;should&nbsp;be&nbsp;relatively&nbsp;easy&nbsp;to&nbsp;implement.&lt;br&gt;&lt;br&gt;Furthermore&nbsp;I&nbsp;need&nbsp;the&nbsp;server&nbsp;to&nbsp;support&nbsp;large&nbsp;uploads&nbsp;(last&nbsp;i&nbsp;checked&nbsp;the&nbsp;640K&nbsp;limitation&nbsp;was&nbsp;still&nbsp;there)&nbsp;and&nbsp;downloads,&nbsp;and&nbsp;with&nbsp;reasonable&nbsp;efficiancy.&amp;nbsp;&nbsp;I&amp;#39;m&nbsp;not&nbsp;saying&nbsp;streams&nbsp;are&nbsp;the&nbsp;answer&nbsp;but&nbsp;it&nbsp;works&nbsp;for&nbsp;me&nbsp;(actually&nbsp;I&nbsp;use&nbsp;the&nbsp;producer/consumer&nbsp;interface&nbsp;in&nbsp;my&nbsp;lower&nbsp;level&nbsp;code&nbsp;and&nbsp;then&nbsp;adapt&nbsp;it&nbsp;in&nbsp;the&nbsp;web&nbsp;layer).&nbsp;Unfortunately&nbsp;I&amp;#39;ve&nbsp;had&nbsp;to&nbsp;rewrite&nbsp;a&nbsp;lot&nbsp;of&nbsp;the&nbsp;producer/consumer&nbsp;code&nbsp;and&nbsp;stream&nbsp;stuff&nbsp;and&nbsp;glue&nbsp;it&nbsp;together,&nbsp;as&nbsp;some&nbsp;of&nbsp;the&nbsp;stuff&nbsp;in&nbsp;twisted&nbsp;(not&nbsp;just&nbsp;in&nbsp;web2)&nbsp;is&nbsp;rather&nbsp;broken.&nbsp;For&nbsp;complete&nbsp;insanity&nbsp;(sorry&nbsp;to&nbsp;whoever&nbsp;wrote&nbsp;it&nbsp;)&nbsp;see&nbsp;twisted.protocols.basic.FileSender,&nbsp;which&nbsp;implements&nbsp;its&nbsp;own&nbsp;magic&nbsp;method&nbsp;beginFileTransfer,&nbsp;which&nbsp;takes&nbsp;BOTH&nbsp;a&nbsp;file&nbsp;and&nbsp;a&nbsp;consumer&nbsp;as&nbsp;argument.&nbsp;This&nbsp;makes&nbsp;is&nbsp;impossible&nbsp;to&nbsp;seperate&nbsp;the&nbsp;construction&nbsp;of&nbsp;the&nbsp;producer&nbsp;and&nbsp;starting&nbsp;the&nbsp;transfer.&lt;br&gt;<br>
&lt;br&gt;Ticket&nbsp;#1956&nbsp;fixes&nbsp;some&nbsp;of&nbsp;these&nbsp;things.&nbsp;I&amp;#39;m&nbsp;not&nbsp;quite&nbsp;sure&nbsp;how&nbsp;it&nbsp;handles&nbsp;errors&nbsp;(which&nbsp;can&nbsp;happen&nbsp;both&nbsp;ways),&nbsp;but&nbsp;I&amp;#39;ve&nbsp;just&nbsp;had&nbsp;a&nbsp;quick&nbsp;look.&nbsp;It&amp;#39;s&nbsp;been&nbsp;a&nbsp;whlie&nbsp;since&nbsp;i&amp;#39;ve&nbsp;had&nbsp;a&nbsp;look&nbsp;at&nbsp;all&nbsp;this.&nbsp;I&nbsp;write&nbsp;a&nbsp;bit&nbsp;about&nbsp;it,&nbsp;which&nbsp;I&amp;#39;ve&nbsp;placed&nbsp;here:&nbsp;&lt;a&nbsp;href=&quot;http://www.cs.aau.dk/~htj/prodcons.txt&quot;&gt;http://www.cs.aau.dk/~htj/prodcons.txt&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;IMHO,&nbsp;getting&nbsp;(and&nbsp;deciding&nbsp;on)&nbsp;a&nbsp;proper&nbsp;producer/consumer&nbsp;interface&nbsp;need&nbsp;to&nbsp;happen,&nbsp;to&nbsp;make&nbsp;whatever&nbsp;web&nbsp;things&nbsp;twisted&nbsp;will&nbsp;have&nbsp;usefull.&nbsp;Changing&nbsp;the&nbsp;producer/consumer&nbsp;might&nbsp;be&nbsp;massive&nbsp;API&nbsp;break,&nbsp;however&nbsp;it&nbsp;is&nbsp;a&nbsp;needed&nbsp;one.&nbsp;There&nbsp;are&nbsp;simply&nbsp;things&nbsp;the&nbsp;current&nbsp;API&nbsp;cannot&nbsp;do&nbsp;(i&nbsp;usually&nbsp;return&nbsp;a&nbsp;deferred&nbsp;along&nbsp;with&nbsp;any&nbsp;producer/consumer&nbsp;object&nbsp;to&nbsp;indiciate&nbsp;how&nbsp;the&nbsp;data&nbsp;moving&nbsp;went).&nbsp;I&nbsp;might&nbsp;be&nbsp;interested&nbsp;in&nbsp;participating&nbsp;in&nbsp;this,&nbsp;however&nbsp;I&amp;#39;m&nbsp;rather&nbsp;work&nbsp;struck&nbsp;as&nbsp;I&nbsp;have&nbsp;to&nbsp;hand&nbsp;my&nbsp;ph.d.&nbsp;thesis&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;year.&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;br&gt;Btw.&nbsp;I&nbsp;really&nbsp;am&nbsp;a&nbsp;huge&nbsp;fan&nbsp;of&nbsp;twisted,&nbsp;however&nbsp;the&nbsp;web&nbsp;and&nbsp;producer/consumer&nbsp;is&nbsp;a&nbsp;rather&nbsp;dark&nbsp;spot&nbsp;in&nbsp;an&nbsp;otherwise&nbsp;bright&nbsp;world&nbsp;:-)&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&nbsp;-&nbsp;Henrik&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
