<tt>
Thanks&nbsp;for&nbsp;the&nbsp;help&nbsp;on&nbsp;this&nbsp;everyone&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;Tim&nbsp;Hughes&lt;br&gt;mailto:&lt;a&nbsp;href=&quot;mailto:thughes@thegoldfish.org&quot;&gt;thughes@thegoldfish.org&lt;/a&gt;&lt;br&gt;&lt;br&gt;Without&nbsp;religion,&nbsp;people&nbsp;wouldn&#39;t&nbsp;pray&nbsp;for&nbsp;peace,&nbsp;they&nbsp;would&nbsp;work&nbsp;towards&nbsp;it.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Apr&nbsp;24,&nbsp;2009&nbsp;at&nbsp;8:33&nbsp;PM,&nbsp;Drew&nbsp;Smathers&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:drew.smathers@gmail.com&quot;&gt;drew.smathers@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;Fri,&nbsp;Apr&nbsp;24,&nbsp;2009&nbsp;at&nbsp;2:28&nbsp;AM,&nbsp;Nathan&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:nathan.stocks@gmail.com&quot;&gt;nathan.stocks@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Thu,&nbsp;Apr&nbsp;23,&nbsp;2009&nbsp;at&nbsp;9:34&nbsp;PM,&nbsp;Tim&nbsp;Allen&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:tim@commsecure.com.au&quot;&gt;tim@commsecure.com.au&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&nbsp;Tim&nbsp;Hughes&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:thughes@thegoldfish.org&quot;&gt;thughes@thegoldfish.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;Am&nbsp;I&nbsp;completly&nbsp;missing&nbsp;the&nbsp;point&nbsp;here&nbsp;or&nbsp;is&nbsp;there&nbsp;something&nbsp;incorrect&nbsp;with&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;my&nbsp;code.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Yes,&nbsp;it&nbsp;seems&nbsp;you&nbsp;have&nbsp;missed&nbsp;the&nbsp;point&nbsp;somewhere.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp;def&nbsp;blocking_method(self,&nbsp;duration=5):&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;&quot;&quot;block&nbsp;the&nbsp;instance&nbsp;for&nbsp;a&nbsp;specified&nbsp;duration&quot;&quot;&quot;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;started&nbsp;=&nbsp;time.asctime()&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;time.sleep(duration)&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data&nbsp;=&nbsp;&quot;I&nbsp;started&nbsp;at&nbsp;%s&nbsp;and&nbsp;i&nbsp;slept&nbsp;%d&nbsp;seconds&nbsp;then&nbsp;woke&nbsp;at&nbsp;%s&quot;&nbsp;%&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;(started,&nbsp;duration,&nbsp;time.asctime())&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;data&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp;def&nbsp;blocking_method_fixed(self,&nbsp;duration=5):&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;d&nbsp;=&nbsp;Deferred()&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;d.callback(self.blocking_method(duration))&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return&nbsp;d&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Your&nbsp;blocking_method_fixed()&nbsp;wraps&nbsp;the&nbsp;result&nbsp;of&nbsp;blocking_method()&nbsp;in&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;Deferred,&nbsp;but&nbsp;it&nbsp;doesn&#39;t&nbsp;actually&nbsp;do&nbsp;anything&nbsp;to&nbsp;prevent&lt;br&gt;<br>
&gt;&gt;&nbsp;blocking_method()&nbsp;from&nbsp;blocking.&nbsp;Deferreds&nbsp;have&nbsp;no&nbsp;magical&nbsp;ability&nbsp;to&lt;br&gt;<br>
&gt;&gt;&nbsp;prevent&nbsp;things&nbsp;from&nbsp;blocking&nbsp;on&nbsp;their&nbsp;own,&nbsp;they&nbsp;are&nbsp;just&nbsp;a&nbsp;tool&nbsp;you&nbsp;can&lt;br&gt;<br>
&gt;&gt;&nbsp;use&nbsp;to&nbsp;handle&nbsp;some&nbsp;of&nbsp;the&nbsp;control-flow&nbsp;issues&nbsp;that&nbsp;arise&nbsp;when&nbsp;writing&lt;br&gt;<br>
&gt;&gt;&nbsp;non-blocking&nbsp;code.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;For&nbsp;example,&nbsp;here&#39;s&nbsp;a&nbsp;method&nbsp;that&nbsp;does&nbsp;more&nbsp;or&nbsp;less&nbsp;what&lt;br&gt;<br>
&gt;&gt;&nbsp;blocking_method()&nbsp;does,&nbsp;but&nbsp;in&nbsp;a&nbsp;non-blocking&nbsp;manner:&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; def&nbsp;non_blocking_method(self,&nbsp;duration=5):&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; started&nbsp;=&nbsp;time.asctime()&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; d&nbsp;=&nbsp;Deferred()&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; reactor.callLater(duration,&nbsp;d.callback,&nbsp;None)&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; def&nbsp;do_stuff_after_timeout(result):&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;Here,&nbsp;&#39;result&#39;&nbsp;will&nbsp;contain&nbsp;the&nbsp;None&nbsp;we&nbsp;passed&nbsp;to&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;callLater&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; data&nbsp;=&nbsp;&quot;I&nbsp;started&nbsp;at&nbsp;%s&nbsp;and&nbsp;I&nbsp;slept&nbsp;%d&nbsp;seconds&nbsp;then&nbsp;woke&nbsp;&quot;&nbsp;\&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;at&nbsp;%s&quot;&nbsp;%&nbsp;(started,&nbsp;duration,&nbsp;time.asctime())&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;data&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; d.addCallback(do_stuff_after_timeout)&lt;br&gt;<br>
&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;d&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;See&nbsp;how&nbsp;the&nbsp;method&nbsp;does&nbsp;some&nbsp;initial&nbsp;preparation,&nbsp;then&nbsp;schedules&nbsp;a&lt;br&gt;<br>
&gt;&gt;&nbsp;callback&nbsp;to&nbsp;be&nbsp;run&nbsp;after&nbsp;the&nbsp;long-running&nbsp;operation&nbsp;has&nbsp;completed.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;If&nbsp;you&nbsp;have&nbsp;a&nbsp;long-running&nbsp;network&nbsp;call&nbsp;to&nbsp;do&nbsp;instead&nbsp;of&nbsp;a&nbsp;simple&lt;br&gt;<br>
&gt;&gt;&nbsp;sleep,&nbsp;there&#39;s&nbsp;probably&nbsp;a&nbsp;Twisted&nbsp;API&nbsp;or&nbsp;addon&nbsp;that&nbsp;will&nbsp;perform&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;call&nbsp;and&nbsp;give&nbsp;you&nbsp;back&nbsp;a&nbsp;Deferred,&nbsp;rather&nbsp;than&nbsp;blocking&nbsp;until&nbsp;it&nbsp;has&nbsp;an&lt;br&gt;<br>
&gt;&gt;&nbsp;answer.&nbsp;If&nbsp;you&#39;re&nbsp;trying&nbsp;to&nbsp;use&nbsp;a&nbsp;third-party&nbsp;client&nbsp;library&nbsp;that&lt;br&gt;<br>
&gt;&gt;&nbsp;doesn&#39;t&nbsp;offer&nbsp;a&nbsp;non-blocking&nbsp;API,&nbsp;about&nbsp;the&nbsp;only&nbsp;thing&nbsp;you&nbsp;can&nbsp;do&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;call&nbsp;that&nbsp;API&nbsp;in&nbsp;a&nbsp;thread,&nbsp;using&nbsp;the&nbsp;reactor.callInThread()&nbsp;method&nbsp;(but&lt;br&gt;<br>
&gt;&gt;&nbsp;note&nbsp;that&nbsp;Twisted&nbsp;is&nbsp;not&nbsp;thread-safe,&nbsp;so&nbsp;the&nbsp;thing&nbsp;you&nbsp;call&nbsp;in&nbsp;a&nbsp;thread&lt;br&gt;<br>
&gt;&gt;&nbsp;can&#39;t&nbsp;use&nbsp;any&nbsp;of&nbsp;Twisted&#39;s&nbsp;functionality&nbsp;except&nbsp;via&lt;br&gt;<br>
&gt;&gt;&nbsp;reactor.callFromThread())&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;above&nbsp;email&nbsp;makes&nbsp;a&nbsp;great&nbsp;FAQ&nbsp;item,&nbsp;IMO.&nbsp; I&nbsp;know&nbsp;there&#39;s&nbsp;already&lt;br&gt;<br>
&gt;&nbsp;docs&nbsp;covering&nbsp;this,&nbsp;but&nbsp;this&nbsp;issue&nbsp;comes&nbsp;up&nbsp;soooo&nbsp;many&nbsp;times&nbsp;(it&nbsp;took&lt;br&gt;<br>
&gt;&nbsp;me&nbsp;a&nbsp;month&nbsp;to&nbsp;wrap&nbsp;my&nbsp;head&nbsp;around&nbsp;it&nbsp;initially)&nbsp;that&nbsp;it&nbsp;wouldn&#39;t&nbsp;hurt&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;hit&nbsp;the&nbsp;issue&nbsp;from&nbsp;many&nbsp;directions&nbsp;in&nbsp;many&nbsp;styles.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;It&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;FAQ&nbsp;items:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoIuseDeferredstomakemyblockingcodenon-blocking&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoIuseDeferredstomakemyblockingcodenon-blocking&lt;/a&gt;&lt;br&gt;<br>
<br>
&lt;br&gt;<br>
Apparently&nbsp;there&#39;s&nbsp;also&nbsp;been&nbsp;some&nbsp;stitchwork&nbsp;done&nbsp;to&nbsp;commemorate&nbsp;this.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
-Drew&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
