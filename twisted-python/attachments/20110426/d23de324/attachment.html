<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Apr&nbsp;26,&nbsp;2011,&nbsp;at&nbsp;4:34&nbsp;PM,&nbsp;Ray&nbsp;Cote&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;-----&nbsp;Original&nbsp;Message&nbsp;-----&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;From:&nbsp;&quot;Luke&nbsp;Marsden&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:luke-lists@hybrid-logic.co.uk&quot;&gt;luke-lists@hybrid-logic.co.uk&lt;/a&gt;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;To:&nbsp;&quot;Twisted&nbsp;general&nbsp;discussion&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:twisted-python@twistedmatrix.com&quot;&gt;twisted-python@twistedmatrix.com&lt;/a&gt;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Sent:&nbsp;Tuesday,&nbsp;April&nbsp;26,&nbsp;2011&nbsp;2:08:40&nbsp;PM&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Subject:&nbsp;Re:&nbsp;[Twisted-Python]&nbsp;100%&nbsp;CPU&nbsp;on&nbsp;high&nbsp;opened&nbsp;descriptors&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;Tue,&nbsp;2011-04-26&nbsp;at&nbsp;17:42&nbsp;+0200,&nbsp;Juan&nbsp;Antonio&nbsp;Ibañez&nbsp;Santorum&nbsp;wrote:&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Hello!&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&nbsp;&nbsp;&nbsp;I&nbsp;have&nbsp;a&nbsp;Linux&nbsp;box&nbsp;serving&nbsp;my&nbsp;twisted&nbsp;app.&nbsp;All&nbsp;works&nbsp;ok&nbsp;except&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;after&nbsp;some&nbsp;days&nbsp;running&nbsp;(where&nbsp;I&nbsp;can&nbsp;see&nbsp;my&nbsp;CPU&nbsp;going&nbsp;to&nbsp;100%).&nbsp;I&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;saw&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;that&nbsp;CPU&nbsp;goes&nbsp;100%&nbsp;usage&nbsp;when&nbsp;the&nbsp;app&nbsp;reaches&nbsp;to&nbsp;1024&nbsp;opened&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;descriptors&nbsp;(sockets).&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;br&gt;I&nbsp;assume&nbsp;that&nbsp;using&nbsp;a&nbsp;reverse&nbsp;proxy&nbsp;(Apache,&nbsp;nginx,&nbsp;etc.)&nbsp;in&nbsp;front&nbsp;of&nbsp;Twisted&nbsp;removes&nbsp;this&nbsp;problem?&nbsp;&lt;br&gt;(or&nbsp;at&nbsp;least&nbsp;displaces&nbsp;it&nbsp;from&nbsp;being&nbsp;Twisted's&nbsp;problem&nbsp;to&nbsp;being&nbsp;the&nbsp;proxies&nbsp;problem.)&lt;br&gt;&lt;br&gt;Is&nbsp;it&nbsp;recommended&nbsp;to&nbsp;always&nbsp;run&nbsp;Twisted&nbsp;behind&nbsp;a&nbsp;proxy?&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;No.&nbsp;&nbsp;It's&nbsp;recommended&nbsp;to&nbsp;fix&nbsp;bugs&nbsp;in&nbsp;Twisted&nbsp;that&nbsp;affect&nbsp;you&nbsp;:).&nbsp;&nbsp;And&nbsp;besides,&nbsp;this&nbsp;problem&nbsp;is&nbsp;not&nbsp;specific&nbsp;to&nbsp;HTTP;&nbsp;it&nbsp;affects&nbsp;any&nbsp;Twisted&nbsp;service&nbsp;that&nbsp;runs&nbsp;on&nbsp;a&nbsp;port,&nbsp;so&nbsp;there&nbsp;are&nbsp;lots&nbsp;of&nbsp;uses&nbsp;of&nbsp;Twisted&nbsp;where&nbsp;you&nbsp;&lt;i&gt;can't&lt;/i&gt;&nbsp;run&nbsp;Twisted&nbsp;behind&nbsp;a&nbsp;proxy.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Plus,&nbsp;this&nbsp;affects&nbsp;clients&nbsp;as&nbsp;well;&nbsp;if&nbsp;you&nbsp;have&nbsp;a&nbsp;twisted&nbsp;spidering&nbsp;application,&nbsp;your&nbsp;client&nbsp;connections&nbsp;could&nbsp;get&nbsp;into&nbsp;this&nbsp;same&nbsp;state.&nbsp;&nbsp;It's&nbsp;possible&nbsp;to&nbsp;handle&nbsp;this&nbsp;sort&nbsp;of&nbsp;attack&nbsp;without&nbsp;any&nbsp;changes&nbsp;to&nbsp;Twisted,&nbsp;by&nbsp;carefully&nbsp;monitoring&nbsp;the&nbsp;number&nbsp;of&nbsp;connections&nbsp;you&nbsp;have&nbsp;open.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Of&nbsp;course&nbsp;most&nbsp;people&nbsp;just&nbsp;crank&nbsp;up&nbsp;their&nbsp;ulimits&nbsp;and&nbsp;forget&nbsp;about&nbsp;it.&lt;/div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;We've&nbsp;been&nbsp;doing&nbsp;that&nbsp;simply&nbsp;to&nbsp;offload&nbsp;delivery&nbsp;to&nbsp;the&nbsp;final&nbsp;client,&nbsp;but&nbsp;I'm&nbsp;thinking&nbsp;it&nbsp;may&nbsp;have&nbsp;a&nbsp;more&nbsp;general&nbsp;need.&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#000000&quot;&gt;&lt;font&nbsp;class=&quot;Apple-style-span&quot;&nbsp;color=&quot;#144FAE&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;have&nbsp;to&nbsp;do&nbsp;it&nbsp;anyway&nbsp;then&nbsp;the&nbsp;discussion&nbsp;is&nbsp;somewhat&nbsp;academic,&nbsp;isn't&nbsp;it?&nbsp;:)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
