Index: model.py
===================================================================
RCS file: /cvs/Twisted/twisted/web/woven/model.py,v
retrieving revision 1.47
diff -r1.47 model.py
213c213,217
<             return self.submodels[name]
---
>             sub = self.submodels[name]
>             if sub.cachedFor == id(request):
>                 return sub
>             else:
>                 del self.submodels[name]
312d315
<         cached = self.submodels.has_key(name)
315,316c318
<             if not cached:
<                 sm.cachedFor = id(request)
---
>             sm.cachedFor = id(request)
