<tt>
&lt;div&gt;def&nbsp;parallel(iterable,&nbsp;count,&nbsp;callable,&nbsp;*args,&nbsp;**named):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;#Copy/paste&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://jcalderone.livejournal.com/24285.html&quot;&gt;http://jcalderone.livejournal.com/24285.html&lt;/a&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;#&lt;a&nbsp;href=&quot;http://oubiwann.blogspot.com/2008/06/async-batching-with-twisted-walkthrough.html&quot;&gt;http://oubiwann.blogspot.com/2008/06/async-batching-with-twisted-walkthrough.html&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt; &nbsp; &nbsp;coop&nbsp;=&nbsp;task.Cooperator()&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;work&nbsp;=&nbsp;(callable(elem,&nbsp;*args,&nbsp;**named)&nbsp;for&nbsp;elem&nbsp;in&nbsp;iterable)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;defer.DeferredList([coop.coiterate(work)&nbsp;for&nbsp;i&nbsp;in&nbsp;xrange(count)])&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;def&nbsp;_localSend(messages):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;deferToProcessPool(reactor,&nbsp;_p,&nbsp;makeEmails,&nbsp;messages,&nbsp;logger)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;_p&nbsp;=&nbsp;Pool(5)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;def&nbsp;_localDeliver(messages):&lt;/div&gt;<br>
&lt;div&gt; &nbsp; #...&nbsp;Some&nbsp;part&nbsp;left&nbsp;out&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;d&nbsp;=&nbsp;parallel(messages,2,&nbsp;_localSend)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;d.addErrback(_log_error)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;return&nbsp;d&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;_localDeliver&nbsp;call&nbsp;parallel:&nbsp;it&nbsp;will&nbsp;launch&nbsp;at&nbsp;most&nbsp;2&nbsp;deferred&nbsp;executing&nbsp;localSend(messages).&nbsp;These&nbsp;are&nbsp;actually&nbsp;deferToProcess&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;a&nbsp;very&nbsp;very&nbsp;powerful&nbsp;compbination&nbsp;and&nbsp;exarkun&nbsp;really&nbsp;nailed&nbsp;it&nbsp;in&nbsp;his&nbsp;blog&nbsp;:)&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Oct&nbsp;31,&nbsp;2011&nbsp;at&nbsp;2:22&nbsp;PM,&nbsp;Daryl&nbsp;Herzmann&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:akrherz@iastate.edu&quot;&gt;akrherz@iastate.edu&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Sat,&nbsp;Oct&nbsp;29,&nbsp;2011&nbsp;at&nbsp;2:10&nbsp;AM,&nbsp;Nicolas&nbsp;Toper&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ntoper@gmail.com&quot;&gt;ntoper@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&gt;&nbsp;For&nbsp;a&nbsp;similar&nbsp;use&nbsp;case,&nbsp;we&#39;re&nbsp;using&nbsp;a&nbsp;combination&nbsp;of&nbsp;cooperator&nbsp;with&lt;br&gt;<br>
&gt;&nbsp;defertoprocess.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;can&nbsp;explain&nbsp;more&nbsp;if&nbsp;anyone&#39;s&nbsp;interested.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&nbsp;would&nbsp;certainly&nbsp;be&nbsp;interested&nbsp;:)&nbsp; I&#39;m&nbsp;having&nbsp;a&nbsp;difficult&nbsp;time&lt;br&gt;<br>
understanding&nbsp;how&nbsp;the&nbsp;pieces&nbsp;fit&nbsp;together.&nbsp; Thank&nbsp;you!&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
daryl&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
