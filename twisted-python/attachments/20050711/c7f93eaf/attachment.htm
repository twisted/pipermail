<tt>
&lt;div&gt;&lt;span&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;7/11/05,&nbsp;&lt;b&nbsp;class=&quot;gmail_sendername&quot;&gt;Jp&nbsp;Calderone&lt;/b&gt;&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@divmod.com&quot;&gt;exarkun@divmod.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;/span&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;PADDING-LEFT:&nbsp;1ex;&nbsp;MARGIN:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;BORDER-LEFT:&nbsp;#ccc&nbsp;1px&nbsp;solid&quot;&gt;On&nbsp;Mon,&nbsp;11&nbsp;Jul&nbsp;2005&nbsp;12:16:35&nbsp;-0500,&nbsp;Justin&nbsp;Johnson&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:justinjohnson@gmail.com&quot;&gt;justinjohnson@gmail.com<br>
&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;On&nbsp;7/11/05,&nbsp;Jp&nbsp;Calderone&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:exarkun@divmod.com&quot;&gt;exarkun@divmod.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;[snip]&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;3.&nbsp;Notify&nbsp;the&nbsp;ProcessProtocol&nbsp;via&nbsp;protocol.makeConnection<br>
&nbsp;(not&nbsp;sure&lt;br&gt;&amp;gt;&amp;gt;&nbsp;&amp;gt;&nbsp;why,&nbsp;looking&nbsp;at&nbsp;win32eventreactor)&lt;br&gt;&amp;gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;gt;&nbsp;makeConnection&nbsp;is&nbsp;the&nbsp;method&nbsp;that's&nbsp;actually&nbsp;part&nbsp;of&nbsp;IProtocol&nbsp;(even&lt;br&gt;&amp;gt;&amp;gt;&nbsp;though&nbsp;ProcessProtocol&nbsp;doesn't&nbsp;implement&nbsp;IProtocol,&nbsp;it&nbsp;still&nbsp;adheres&nbsp;to&nbsp;its<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;API&nbsp;in&nbsp;this&nbsp;regard).&nbsp;Generally,&nbsp;all&nbsp;it&nbsp;does&nbsp;is&nbsp;set&nbsp;the&nbsp;.transport&nbsp;attribute&lt;br&gt;&amp;gt;&amp;gt;&nbsp;on&nbsp;the&nbsp;protocol&nbsp;instance&nbsp;and&nbsp;then&nbsp;call&nbsp;connectionMade.&nbsp;This&nbsp;might&nbsp;seem&lt;br&gt;&amp;gt;&amp;gt;&nbsp;pointless&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;processes,&nbsp;but&nbsp;since&nbsp;it&nbsp;maintains&nbsp;consistency&nbsp;with<br>
&lt;br&gt;&amp;gt;&amp;gt;&nbsp;other&nbsp;kinds&nbsp;of&nbsp;transports,&nbsp;it&nbsp;is&nbsp;useful.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&amp;nbsp;&amp;nbsp;So&nbsp;the&nbsp;Process&nbsp;class&nbsp;is&nbsp;the&nbsp;transport?&nbsp;In&nbsp;win32eventreactor,&nbsp;3&nbsp;threads&nbsp;are&lt;br&gt;&amp;gt;started&nbsp;that&nbsp;loop&nbsp;on&nbsp;reading&nbsp;stdout&nbsp;and&nbsp;stderr&nbsp;and&nbsp;writing&nbsp;data&nbsp;from&nbsp;the<br>
&lt;br&gt;&amp;gt;outQueue&nbsp;to&nbsp;stdin.&nbsp;It&nbsp;seems&nbsp;to&nbsp;me&nbsp;that&nbsp;I&nbsp;would&nbsp;not&nbsp;use&nbsp;these&nbsp;threads,&nbsp;but&lt;br&gt;&amp;gt;instead&nbsp;have&nbsp;each&nbsp;of&nbsp;these&nbsp;3&nbsp;file&nbsp;handles&nbsp;associated&nbsp;with&nbsp;the&nbsp;IOCP.&nbsp;Then&nbsp;the&lt;br&gt;&amp;gt;methods&nbsp;defined&nbsp;in&nbsp;ops.py&nbsp;would&nbsp;be&nbsp;used&nbsp;to&nbsp;handle&nbsp;events&nbsp;on&nbsp;those&nbsp;handles,<br>
&lt;br&gt;&amp;gt;resulting&nbsp;in&nbsp;transport&nbsp;methods&nbsp;being&nbsp;called.&nbsp;These&nbsp;transport&nbsp;methods&nbsp;would&lt;br&gt;&amp;gt;be&nbsp;methods&nbsp;on&nbsp;the&nbsp;Process&nbsp;class,&nbsp;which&nbsp;would&nbsp;result&nbsp;in&nbsp;methods&nbsp;on&nbsp;a&nbsp;single&lt;br&gt;&amp;gt;instance&nbsp;of&nbsp;the&nbsp;ProcessProtocol&nbsp;being&nbsp;called.&nbsp;This&nbsp;single&nbsp;instance&nbsp;of&nbsp;the<br>
&lt;br&gt;&amp;gt;ProcessProtocol&nbsp;would&nbsp;be&nbsp;shared&nbsp;by&nbsp;all&nbsp;of&nbsp;the&nbsp;3&nbsp;file&nbsp;handles.&nbsp;Am&nbsp;I&lt;br&gt;&amp;gt;understanding&nbsp;correctly?&nbsp;Are&nbsp;write&nbsp;and&nbsp;loseConnection&nbsp;the&nbsp;only&nbsp;methods&nbsp;the&lt;br&gt;&amp;gt;Process&nbsp;would&nbsp;need&nbsp;to&nbsp;implement&nbsp;from&nbsp;ITransport?&lt;br&gt;&lt;br&gt;That&nbsp;mostly&nbsp;sounds&nbsp;correct,&nbsp;except&nbsp;the&nbsp;last&nbsp;bit.&amp;nbsp;&amp;nbsp;What&nbsp;makes&nbsp;it&nbsp;a&nbsp;transport&nbsp;is&nbsp;that&nbsp;it&nbsp;implements&nbsp;/all/&nbsp;of&nbsp;ITransport.&amp;nbsp;&amp;nbsp;Moreover,&nbsp;ProcessProtocols&nbsp;expect&nbsp;their&nbsp;transport&nbsp;to&nbsp;be&nbsp;an&nbsp;IProcessTransport,&nbsp;which&nbsp;adds&nbsp;several&nbsp;methods&nbsp;on&nbsp;top&nbsp;of&nbsp;ITransport.&amp;nbsp;&amp;nbsp;Everything&nbsp;in&nbsp;each&nbsp;of&nbsp;those&nbsp;interfaces&nbsp;needs&nbsp;to&nbsp;be&nbsp;implemented.<br>
&lt;/blockquote&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;Ahh...&nbsp;I&nbsp;missed&nbsp;those&nbsp;interfaces&amp;nbsp;because&nbsp;I&nbsp;was&nbsp;starting&nbsp;with&nbsp;win32eventreactor.Process,&nbsp;which&nbsp;doesn't&nbsp;implement&nbsp;either&nbsp;ITransport&nbsp;or&nbsp;IProcessTransport&nbsp;(either&nbsp;with&nbsp;an&nbsp;implements()&nbsp;or&nbsp;by&nbsp;defining&nbsp;all&nbsp;of&nbsp;those&nbsp;methods).<br>
&lt;/div&gt;<br>
&lt;div&gt;&amp;nbsp;&lt;/div&gt;<br>
&lt;div&gt;After&nbsp;some&nbsp;more&nbsp;thought&nbsp;about&nbsp;this&nbsp;I&nbsp;think&nbsp;I&nbsp;will&nbsp;have&nbsp;to&nbsp;define&nbsp;new&nbsp;xxxOps&nbsp;methods&nbsp;for&nbsp;stdout&nbsp;and&nbsp;stderr&nbsp;(and&nbsp;maybe&nbsp;stdin&nbsp;as&nbsp;well).&amp;nbsp;&nbsp;These&nbsp;ops'&nbsp;ovDone&nbsp;methods&nbsp;will&nbsp;call&nbsp;the&nbsp;methods&nbsp;on&nbsp;the&nbsp;transport&nbsp;(Process)&nbsp;appropriate&nbsp;for&nbsp;ProcessProtocols.<br>
&lt;/div&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;PADDING-LEFT:&nbsp;1ex;&nbsp;MARGIN:&nbsp;0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;&nbsp;BORDER-LEFT:&nbsp;#ccc&nbsp;1px&nbsp;solid&quot;&gt;For&nbsp;reference,&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html&quot;&gt;<br>
http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html&lt;/a&gt;&amp;gt;&nbsp;and&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IProcessTransport.html&quot;&gt;http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IProcessTransport.html<br>
&lt;/a&gt;&amp;gt;.&lt;br&gt;&lt;br&gt;Jp&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;<br>
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
