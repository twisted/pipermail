<tt>
The&nbsp;problem&nbsp;is&nbsp;that:&nbsp;the&nbsp;UDP&nbsp;listening&nbsp;ports&nbsp;increase&nbsp;rapidly&nbsp;and&nbsp;eventually&nbsp;come&nbsp;to&nbsp;the&nbsp;end:&nbsp;too&nbsp;many&nbsp;open&nbsp;file&nbsp;in&nbsp;selector.&lt;br&gt;As&nbsp;many&nbsp;as&nbsp;the&nbsp;hosts&nbsp;you&nbsp;lookup,&nbsp;those&nbsp;UDP&nbsp;ports&nbsp;are&nbsp;still&nbsp;alive.&nbsp;It&nbsp;is&nbsp;very&nbsp;different&nbsp;from&nbsp;running&nbsp;this&nbsp;script&nbsp;in&nbsp;Linux&nbsp;(gentoo&nbsp;2.6).&lt;br&gt;<br>
In&nbsp;Linux,&nbsp;the&nbsp;listening&nbsp;UDP&nbsp;port&nbsp;keep&nbsp;only&nbsp;1&nbsp;instance&nbsp;no&nbsp;matter&nbsp;how&nbsp;many&nbsp;lookups&nbsp;.&lt;br&gt;Try&nbsp;the&nbsp;script&nbsp;below:&lt;br&gt;------------------------------&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;from&nbsp;twisted.mail&nbsp;import&nbsp;relaymanager&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor,defer&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;global&nbsp;MXC&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;MXC&nbsp;=&nbsp;relaymanager.MXCalculator()&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;def&nbsp;getMailExchange(host):&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;MXC&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;cbMX(mxRecord):&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;&#39;Got&nbsp;mxRecord:&nbsp;%s&#39;&nbsp;%&nbsp;mxRecord.name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;MXC.getMX(host).addCallback(cbMX)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;def&nbsp;run():&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;getMailExchange(&#39;&lt;a&nbsp;href=&quot;http://gmail.com&quot;&gt;gmail.com&lt;/a&gt;&#39;)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;next(mxRecord):&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;getMailExchange(&#39;&lt;a&nbsp;href=&quot;http://yahoo.com&quot;&gt;yahoo.com&lt;/a&gt;&#39;)&lt;br&gt;<br>
&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;#d.addCallback(next)&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;##&nbsp;uncomment&nbsp;the&nbsp;line&nbsp;to&nbsp;increase&nbsp;your&nbsp;UDP&nbsp;listening&nbsp;ports&nbsp;as&nbsp;many&nbsp;as&nbsp;you&nbsp;want&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;reactor.callWhenRunning(run)&lt;/span&gt;&lt;br&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;&lt;span&nbsp;style=&quot;font-family:&nbsp;courier&nbsp;new,monospace;&quot;&gt;reactor.run()&lt;br&gt;--------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;Any&nbsp;hints?&nbsp;&lt;br&gt;&lt;/span&gt;<br>

</tt>
