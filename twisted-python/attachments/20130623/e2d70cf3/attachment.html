<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Tom&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;not&nbsp;sure&nbsp;we&nbsp;should&nbsp;continue&nbsp;this&nbsp;discussion&nbsp;on&nbsp;the&nbsp;list&nbsp;seeing&nbsp;as&nbsp;the&nbsp;original&nbsp;issue&nbsp;seems&nbsp;to&nbsp;be&nbsp;settled.&nbsp;Anyway,&nbsp;here&#39;s&nbsp;an&nbsp;answer&nbsp;and&nbsp;maybe&nbsp;we&nbsp;could/should&nbsp;take&nbsp;it&nbsp;offline&nbsp;if&nbsp;there&#39;s&nbsp;more&nbsp;to&nbsp;say?&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Jun&nbsp;22,&nbsp;2013&nbsp;at&nbsp;11:14&nbsp;PM,&nbsp;Tom&nbsp;Prince&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:tom.prince@ualberta.net&quot;&nbsp;target=&quot;_blank&quot;&gt;tom.prince@ualberta.net&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;Terry&nbsp;Jones&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:terry@jon.es&quot;&gt;terry@jon.es&lt;/a&gt;&gt;&nbsp;writes:&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;problem&nbsp;that&nbsp;I&nbsp;was&nbsp;originally&nbsp;trying&nbsp;to&nbsp;address&nbsp;by&nbsp;getting&nbsp;&#39;cancel&#39;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&gt;&nbsp;into&nbsp;deferreds&nbsp;is&nbsp;that&nbsp;the&nbsp;control&nbsp;flow&nbsp;you&nbsp;mention&nbsp;gets&nbsp;totally&nbsp;stuck&nbsp;if&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;deferred&nbsp;never&nbsp;fires&nbsp;for&nbsp;some&nbsp;reason&nbsp;(this&nbsp;was&nbsp;happening&nbsp;to&nbsp;me&nbsp;in&nbsp;talking&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;the&nbsp;Twitter&nbsp;API).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;.cancel&nbsp;as&nbsp;currently&nbsp;implemented&nbsp;addresses&nbsp;this,&nbsp;as&nbsp;calling&nbsp;cancel&lt;br&gt;<br>
causes&nbsp;the&nbsp;deferred&nbsp;to&nbsp;fire.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Right.&nbsp;When&nbsp;I&nbsp;say&nbsp;&quot;originally&quot;&nbsp;I&nbsp;mean&nbsp;in&nbsp;Jan&nbsp;2010,&nbsp;before&nbsp;cancel&nbsp;was&nbsp;implemented.&nbsp;See&nbsp;the&nbsp;thread&nbsp;URL&nbsp;I&nbsp;posted&nbsp;a&nbsp;couple&nbsp;of&nbsp;times&nbsp;in&nbsp;this&nbsp;thread&nbsp;to&nbsp;see&nbsp;how&nbsp;it&nbsp;wen&nbsp;t&nbsp;down.&lt;/div&gt;<br>
&lt;div&nbsp;style&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&gt;&nbsp;This&nbsp;goes&nbsp;against&nbsp;the&nbsp;thinking&nbsp;that&nbsp;only&nbsp;the&nbsp;code&nbsp;that&nbsp;creates&nbsp;a&nbsp;deferred&lt;br&gt;<br>
&gt;&nbsp;can&nbsp;fire&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;To&nbsp;allow&nbsp;anything&nbsp;else&nbsp;would&nbsp;be&nbsp;to&nbsp;break&nbsp;the&nbsp;abstraction&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp;d&nbsp;=&nbsp;Deferred()&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;d&lt;br&gt;<br>
 &nbsp; &nbsp;...&lt;br&gt;<br>
 &nbsp; &nbsp;d.callback(5)&lt;br&gt;<br>
&lt;br&gt;<br>
vs.&lt;br&gt;<br>
 &nbsp; &nbsp;d&nbsp;=&nbsp;Deferred()&lt;br&gt;<br>
 &nbsp; &nbsp;d.addCallback(lambda&nbsp;x:&nbsp;x+1)&lt;br&gt;<br>
 &nbsp; &nbsp;return&nbsp;d&lt;br&gt;<br>
 &nbsp; &nbsp;...&lt;br&gt;<br>
 &nbsp; &nbsp;d.callback(4)&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;is&nbsp;currently&nbsp;no&nbsp;way&nbsp;of&nbsp;distinguishing&nbsp;these&nbsp;to&nbsp;code&lt;br&gt;<br>
snippets.&nbsp;Allowing&nbsp;other&nbsp;code&nbsp;to&nbsp;callback/errback&nbsp;the&nbsp;deferred&lt;br&gt;<br>
would&nbsp;cause&nbsp;different&nbsp;results&nbsp;in&nbsp;the&nbsp;two&nbsp;cases.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;That&nbsp;depends&nbsp;how&nbsp;you&nbsp;do&nbsp;it.&nbsp;If&nbsp;you&nbsp;actually&nbsp;have&nbsp;2&nbsp;deferreds,&nbsp;the&nbsp;original&nbsp;(which&nbsp;you&nbsp;can&#39;t&nbsp;err/callback&nbsp;yourself&nbsp;cause&nbsp;things&nbsp;will&nbsp;break)&nbsp;and&nbsp;one&nbsp;that&nbsp;you&nbsp;create&nbsp;yourself&nbsp;(as&nbsp;a&nbsp;&quot;controllable&quot;&nbsp;deferred),&nbsp;then&nbsp;you&nbsp;can&nbsp;allow&nbsp;the&nbsp;latter&nbsp;to&nbsp;be&nbsp;call/errbacked&nbsp;and&nbsp;hook&nbsp;the&nbsp;former&nbsp;up&nbsp;to&nbsp;the&nbsp;latter&nbsp;if&nbsp;the&nbsp;former&nbsp;fires&nbsp;first.&nbsp;That&#39;s&nbsp;what&nbsp;the&nbsp;code&nbsp;samples&nbsp;I&nbsp;posted&nbsp;do,&nbsp;including&nbsp;the&nbsp;one&nbsp;from&nbsp;Jan&nbsp;2010. &lt;/div&gt;<br>
&lt;div&nbsp;style&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&gt;&nbsp;As&nbsp;API&nbsp;writers,&nbsp;we&#39;re&nbsp;used&nbsp;to&nbsp;being&nbsp;in&nbsp;control:&nbsp;we&nbsp;don&#39;t&nbsp;think&nbsp;it&#39;s&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;good&nbsp;idea&nbsp;if&nbsp;we&nbsp;create&nbsp;and&nbsp;return&nbsp;a&nbsp;deferred&nbsp;in&nbsp;a&nbsp;method&nbsp;and&nbsp;the&nbsp;code&lt;br&gt;<br>
&gt;&nbsp;we&nbsp;return&nbsp;the&nbsp;deferred&nbsp;to&nbsp;then&nbsp;fires&nbsp;it&nbsp;itself.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;It&nbsp;isn&#39;t&nbsp;so&nbsp;much&nbsp;a&nbsp;matter&nbsp;of&nbsp;control,&nbsp;as&nbsp;of&nbsp;abstraction.&nbsp;It&nbsp;isn&#39;t&lt;br&gt;<br>
uncommon&nbsp;for&nbsp;a&nbsp;single&nbsp;deferred&nbsp;to&nbsp;be&nbsp;pass&nbsp;through&nbsp;several&nbsp;systems,&nbsp;with&lt;br&gt;<br>
each&nbsp;stage&nbsp;adding&nbsp;more&nbsp;callbacks,&nbsp;changing&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;next&nbsp;stage&lt;br&gt;<br>
will&nbsp;see&nbsp;in&nbsp;the&nbsp;callbacks&nbsp;they&nbsp;add.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Right.&lt;/div&gt;&lt;div&nbsp;style&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
<br>
If&nbsp;the&nbsp;&quot;final&quot;&nbsp;consumer&nbsp;could&nbsp;fire&nbsp;the&nbsp;deferred&nbsp;with&nbsp;any&nbsp;value,&nbsp;it&nbsp;would&lt;br&gt;<br>
need&nbsp;to&nbsp;know&nbsp;about&nbsp;all&nbsp;the&nbsp;stagse&nbsp;(or&nbsp;at&nbsp;least&nbsp;the&nbsp;first&nbsp;one)&nbsp;to&nbsp;know&lt;br&gt;<br>
what&nbsp;kind&nbsp;of&nbsp;value&nbsp;to&nbsp;put&nbsp;in.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;In&nbsp;the&nbsp;ControlableDeferred2013&nbsp;class&nbsp;I&nbsp;posted&nbsp;the&nbsp;other&nbsp;night,&nbsp;this&nbsp;isn&#39;t&nbsp;the&nbsp;case.&nbsp;If&nbsp;the&nbsp;deferred&nbsp;using&nbsp;code&nbsp;fires&nbsp;it,&nbsp;the&nbsp;only&nbsp;callbacks&nbsp;and&nbsp;errbacks&nbsp;that&nbsp;are&nbsp;run&nbsp;are&nbsp;ones&nbsp;that&nbsp;that&nbsp;code&nbsp;added&nbsp;(not&nbsp;ones&nbsp;added&nbsp;to&nbsp;the&nbsp;original&nbsp;deferred&nbsp;by&nbsp;the&nbsp;code&nbsp;that&nbsp;made&nbsp;it&nbsp;or&nbsp;any&nbsp;intermediates).&lt;/div&gt;<br>
&lt;div&nbsp;style&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&gt;&nbsp;But&nbsp;as&nbsp;app&nbsp;writers&nbsp;consuming&nbsp;deferreds&nbsp;from&nbsp;these&nbsp;APIs,&nbsp;we&lt;br&gt;<br>
&gt;&nbsp;want&nbsp;more&nbsp;control&nbsp;(I&nbsp;do,&nbsp;anyway).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Well,&nbsp;the&nbsp;consumer&nbsp;can&#39;t&nbsp;control&nbsp;the&nbsp;deferreds&nbsp;that&nbsp;it&nbsp;gets&nbsp;but,&nbsp;as&nbsp;your&lt;br&gt;<br>
code&nbsp;demonstrates,&nbsp;it&nbsp;is&nbsp;easy&nbsp;enough&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;deferred&nbsp;that&lt;br&gt;<br>
behaves&nbsp;however&nbsp;the&nbsp;consumer&nbsp;wants.&nbsp;The&nbsp;fact&nbsp;that&nbsp;this&nbsp;isn&#39;t&nbsp;the&nbsp;same&lt;br&gt;<br>
object&nbsp;isn&#39;t&nbsp;signifiant,&nbsp;since&nbsp;the&nbsp;identity&nbsp;of&nbsp;deferreds&nbsp;isn&#39;t&nbsp;an&lt;br&gt;<br>
interesting&nbsp;thing.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Yes.&lt;/div&gt;&lt;div&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;<br>
&gt;&nbsp;The&nbsp;ControllableDeferred2013&nbsp;class&nbsp;I&nbsp;posted&nbsp;last&nbsp;night&nbsp;shows&nbsp;one&lt;br&gt;<br>
&gt;&nbsp;way.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;One&nbsp;comment&nbsp;about&nbsp;the&nbsp;code&nbsp;you&nbsp;posted:&nbsp;There&nbsp;doesn&#39;t&nbsp;really&nbsp;seem&nbsp;to&nbsp;be&nbsp;a&lt;br&gt;<br>
need&nbsp;to&nbsp;create&nbsp;a&nbsp;sepearte&nbsp;class,&nbsp;that&nbsp;forwards&lt;br&gt;<br>
.addCallback/.addErrback.&nbsp;You&nbsp;can&nbsp;just&nbsp;create&nbsp;a&nbsp;regular&nbsp;deferred&nbsp;that&nbsp;is&lt;br&gt;<br>
hooked&nbsp;hooked&nbsp;up&nbsp;in&nbsp;the&nbsp;appropriate&nbsp;way.&nbsp;(It&nbsp;may&nbsp;make&nbsp;sense&nbsp;for&nbsp;the&lt;br&gt;<br>
stage&nbsp;that&nbsp;sets&nbsp;this&nbsp;up&nbsp;to&nbsp;have&nbsp;an&nbsp;object,&nbsp;but&nbsp;it&nbsp;shouldn&#39;t&nbsp;pass&nbsp;it&lt;br&gt;<br>
along,&nbsp;it&nbsp;should&nbsp;just&nbsp;pass&nbsp;a&nbsp;regular&nbsp;deferred&nbsp;on).&nbsp;There&nbsp;are&nbsp;a&nbsp;few&lt;br&gt;<br>
places&nbsp;that&nbsp;accept&nbsp;deferreds&nbsp;that&nbsp;depend&nbsp;on&nbsp;the&nbsp;object&nbsp;being&nbsp;an&nbsp;instance&lt;br&gt;<br>
of&nbsp;deferred,&nbsp;which&nbsp;your&nbsp;object&nbsp;isn&#39;t.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;Yes,&nbsp;you&nbsp;can&nbsp;do&nbsp;that&nbsp;too&nbsp;(and&nbsp;there&nbsp;are&nbsp;other&nbsp;approaches).&nbsp;Here&#39;s&nbsp;a&nbsp;subclassing&nbsp;version&nbsp;that&#39;s&nbsp;similar&nbsp;to&nbsp;what&nbsp;you&nbsp;just&nbsp;described:&lt;/div&gt;<br>
&lt;div&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/pipermail/twisted-python/2010-January/021311.html&quot;&gt;http://twistedmatrix.com/pipermail/twisted-python/2010-January/021311.html&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style&gt;They&#39;re&nbsp;all&nbsp;basically&nbsp;the&nbsp;same&nbsp;idea&nbsp;(at&nbsp;least&nbsp;the&nbsp;way&nbsp;I&nbsp;do&nbsp;it),&nbsp;just&nbsp;based&nbsp;on&nbsp;setting&nbsp;up&nbsp;another&nbsp;deferred&nbsp;and&nbsp;hooking&nbsp;the&nbsp;original&nbsp;up&nbsp;to&nbsp;it&nbsp;when/if&nbsp;needed.&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&nbsp;style&gt;Terry&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&nbsp;style&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
