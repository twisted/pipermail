<tt>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Jul&nbsp;16,&nbsp;2012&nbsp;at&nbsp;11:20&nbsp;PM,&nbsp;Andrew&nbsp;Bennetts&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:andrew@bemusement.org&quot;&nbsp;target=&quot;_blank&quot;&gt;andrew@bemusement.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Dan&nbsp;Stromberg&nbsp;wrote:&lt;br&gt;<br>
[…]&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;&nbsp;I&#39;m&nbsp;playing&nbsp;with&nbsp;twisted.internet.defer.setDebugging&nbsp;now.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Is&nbsp;there&nbsp;a&nbsp;corresponding&nbsp;function&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;produce&nbsp;its&nbsp;report?&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;I&nbsp;use&nbsp;it&nbsp;in&nbsp;a&nbsp;program&nbsp;with&nbsp;an&nbsp;infinite&nbsp;loop,&nbsp;it&nbsp;seems&nbsp;like&nbsp;I&nbsp;never&nbsp;get&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;report,&nbsp;but&nbsp;if&nbsp;I&nbsp;use&nbsp;it&nbsp;in&nbsp;a&nbsp;program&nbsp;with&nbsp;a&nbsp;finite&nbsp;length,&nbsp;I&nbsp;eventually&lt;br&gt;<br>
&gt;&nbsp;get&nbsp;a&nbsp;useful-looking&nbsp;report.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;It&#39;s&nbsp;triggered&nbsp;by&nbsp;garbage&nbsp;collection&nbsp;of&nbsp;a&nbsp;Deferred&nbsp;with&nbsp;an&nbsp;unhandled&nbsp;error.&nbsp; So&lt;br&gt;<br>
you&#39;re&nbsp;at&nbsp;the&nbsp;mercy&nbsp;of&nbsp;when&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;of&nbsp;your&nbsp;Python&nbsp;VM&nbsp;decides&nbsp;to&lt;br&gt;<br>
collect&nbsp;that&nbsp;object.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;could&nbsp;call&nbsp;yourDeferred._debugInfo._getDebugTracebacks()&nbsp;yourself,&nbsp;though,&lt;br&gt;<br>
if&nbsp;you&nbsp;don&#39;t&nbsp;mind&nbsp;(ab)using&nbsp;private&nbsp;attributes&nbsp;that&nbsp;might&nbsp;break&nbsp;without&nbsp;warning.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Strangely,&nbsp;this&nbsp;doesn&#39;t&nbsp;give&nbsp;the&nbsp;report&nbsp;until&nbsp;after&nbsp;the&nbsp;sleep&nbsp;finishes...  &nbsp;?&lt;br&gt;&lt;br&gt;#!/usr/bin/python&lt;br&gt;&lt;br&gt;<br>
#&nbsp;deferreds&nbsp;work&nbsp;fine&nbsp;without&nbsp;the&nbsp;reactor&lt;br&gt;&lt;br&gt;import&nbsp;time&lt;br&gt;&lt;br&gt;import&nbsp;twisted.internet.defer&lt;br&gt;&lt;br&gt;twisted.internet.defer.setDebugging(True)&lt;br&gt;&lt;br&gt;def&nbsp;functionReturningDeferred():&lt;br&gt;   &nbsp;return&nbsp;twisted.internet.defer.succeed(&#39;Some&nbsp;value&#39;)&lt;br&gt;<br>
&lt;br&gt;d&nbsp;=&nbsp;functionReturningDeferred()&lt;br&gt;def&nbsp;printValue(value):&lt;br&gt;   &nbsp;print&nbsp;&#39;Yay,&nbsp;I&nbsp;got&nbsp;%r&#39;&nbsp;%&nbsp;value&lt;br&gt;   &nbsp;return&nbsp;value&lt;br&gt;def&nbsp;second_callback(value):&lt;br&gt;   &nbsp;print&nbsp;&#39;still&nbsp;%r&#39;&nbsp;%&nbsp;value&lt;br&gt;   &nbsp;return&nbsp;gen_error()&lt;br&gt;<br>
def&nbsp;third_callback(value):&lt;br&gt;   &nbsp;print&nbsp;&#39;and&nbsp;still&nbsp;%r&#39;&nbsp;%&nbsp;value&lt;br&gt;   &nbsp;#raise&nbsp;AssertionError&lt;br&gt;   &nbsp;return&nbsp;value&lt;br&gt;&lt;br&gt;def&nbsp;gen_error():&lt;br&gt;   &nbsp;return&nbsp;twisted.internet.defer.fail(AssertionError)&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;got_error(value):&lt;br&gt;<br>
   &nbsp;print&nbsp;&#39;bad&nbsp;thing:&nbsp;%r&#39;&nbsp;%&nbsp;value&lt;br&gt;&lt;br&gt;d.addCallback(printValue)&lt;br&gt;d.addCallback(second_callback)&lt;br&gt;d.addCallback(third_callback)&lt;br&gt;d._debugInfo._getDebugTracebacks()&lt;br&gt;print&lt;br&gt;time.sleep(10)&lt;br&gt;#d.addErrback(got_error)&lt;br&gt;<br>
&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
