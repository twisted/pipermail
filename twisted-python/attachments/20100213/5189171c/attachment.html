<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/3.28.1&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
I&nbsp;spoke&nbsp;too&nbsp;fast.&nbsp;But&nbsp;pardon&nbsp;my&nbsp;noobiness.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Ok,&nbsp;so&nbsp;I&nbsp;am&nbsp;using&nbsp;a&nbsp;simple&nbsp;protocol&nbsp;that&nbsp;is&nbsp;listening&nbsp;on&nbsp;a&nbsp;TCP&nbsp;port.&lt;BR&gt;<br>
&lt;BR&gt;<br>
One&nbsp;the&nbsp;client&nbsp;side,&nbsp;I&nbsp;write&nbsp;4096&nbsp;bytes&nbsp;using&nbsp;self.transport.write(bytes)&lt;BR&gt;<br>
&lt;BR&gt;<br>
on&nbsp;dataReceived&nbsp;side,&nbsp;I&nbsp;get&nbsp;only&nbsp;1448.&nbsp;&lt;BR&gt;<br>
&lt;BR&gt;<br>
Now,&nbsp;what&nbsp;I&nbsp;&quot;want&quot;&nbsp;to&nbsp;happen&nbsp;is&nbsp;when&nbsp;I&nbsp;issue&nbsp;a&nbsp;write&nbsp;of&nbsp;a&nbsp;known&nbsp;number&nbsp;of&nbsp;bytes.&lt;BR&gt;<br>
I&nbsp;&quot;want&quot;&nbsp;those&nbsp;bytes&nbsp;to&nbsp;arrive&nbsp;in&nbsp;total&nbsp;because&nbsp;they&nbsp;represent&nbsp;a&nbsp;pickled&nbsp;object.&lt;BR&gt;<br>
The&nbsp;server&nbsp;has&nbsp;no&nbsp;idea&nbsp;if&nbsp;the&nbsp;bytes&nbsp;are&nbsp;split&nbsp;and&nbsp;scattered&nbsp;(again,&nbsp;I&nbsp;want&nbsp;the&lt;BR&gt;<br>
control&nbsp;protocol&nbsp;to&nbsp;take&nbsp;affect).&lt;BR&gt;<br>
&lt;BR&gt;<br>
1)&nbsp;Am&nbsp;I&nbsp;doing&nbsp;something&nbsp;wrong&nbsp;here?&lt;BR&gt;<br>
2)&nbsp;Can&nbsp;I&nbsp;force&nbsp;twisted&nbsp;to&nbsp;send&nbsp;ALL&nbsp;the&nbsp;bytes&nbsp;I&nbsp;issue&nbsp;in&nbsp;the&nbsp;write&nbsp;without&lt;BR&gt;<br>
re-thinking&nbsp;TCP&nbsp;or&nbsp;forcing&nbsp;me&nbsp;to&nbsp;re-implement&nbsp;TCP?&lt;BR&gt;<br>
&lt;BR&gt;<br>
thanks!&lt;BR&gt;<br>
Darren&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;Wed,&nbsp;2010-02-10&nbsp;at&nbsp;18:34&nbsp;-0500,&nbsp;Darren&nbsp;Govoni&nbsp;wrote:&lt;BR&gt;<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;for&nbsp;that&nbsp;explanation&nbsp;David.&nbsp;Makes&nbsp;sense!&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Wed,&nbsp;2010-02-10&nbsp;at&nbsp;16:01&nbsp;-0500,&nbsp;David&nbsp;Bolen&nbsp;wrote:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
Darren&nbsp;Govoni&nbsp;&lt;&lt;A&nbsp;HREF=&quot;mailto:darren@ontrenet.com&quot;&gt;darren@ontrenet.com&lt;/A&gt;&gt;&nbsp;writes:<br>
<br>
&gt;&gt;From&nbsp;what&nbsp;I&nbsp;learned&nbsp;in&nbsp;other&nbsp;posts,&nbsp;the&nbsp;dataReceived(self,&nbsp;data):&nbsp;in&nbsp;the<br>
&gt;&nbsp;Echo&nbsp;server<br>
&gt;&nbsp;will&nbsp;get&nbsp;called&nbsp;with&nbsp;out-of-order&nbsp;data/bytes&nbsp;from&nbsp;the&nbsp;client.&nbsp;Of&nbsp;course,<br>
&gt;&nbsp;I&nbsp;could&nbsp;be&nbsp;misinformed,<br>
&gt;&nbsp;but&nbsp;what&nbsp;I&nbsp;understood&nbsp;before&nbsp;was&nbsp;that&nbsp;in&nbsp;this&nbsp;type&nbsp;of&nbsp;Protocol,&nbsp;I&nbsp;would<br>
&gt;&nbsp;have&nbsp;to&nbsp;re-order<br>
&gt;&nbsp;and&nbsp;re-assemble&nbsp;the&nbsp;bytes.&nbsp;&nbsp;And&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;avoid&nbsp;that,&nbsp;since&nbsp;of<br>
&gt;&nbsp;course,&nbsp;TCP&nbsp;already&nbsp;does&nbsp;it.<br>
<br>
Data&nbsp;being&nbsp;received&nbsp;out&nbsp;of&nbsp;order&nbsp;can't&nbsp;happen,&nbsp;as&nbsp;long&nbsp;as&nbsp;the&nbsp;Protocol<br>
is&nbsp;layered&nbsp;on&nbsp;top&nbsp;of&nbsp;TCP,&nbsp;since&nbsp;as&nbsp;you&nbsp;say,&nbsp;TCP&nbsp;already&nbsp;provides&nbsp;that<br>
guarantee.&nbsp;&nbsp;The&nbsp;dataReceived()&nbsp;method&nbsp;is&nbsp;really&nbsp;just&nbsp;how&nbsp;the&nbsp;data<br>
being&nbsp;received&nbsp;from&nbsp;TCP&nbsp;is&nbsp;handed&nbsp;to&nbsp;the&nbsp;Protocol&nbsp;object.<br>
<br>
UDP&nbsp;can&nbsp;be&nbsp;out&nbsp;of&nbsp;order,&nbsp;as&nbsp;it&nbsp;provides&nbsp;very&nbsp;few&nbsp;guarantees&nbsp;above&nbsp;and<br>
beyond&nbsp;IP&nbsp;itself.&nbsp;&nbsp;But&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;you&nbsp;can&nbsp;layer&nbsp;an&nbsp;IProtocol&nbsp;over<br>
UDP&nbsp;with&nbsp;Twisted.<br>
<br>
There&nbsp;is&nbsp;a&nbsp;general&nbsp;issue&nbsp;where&nbsp;you&nbsp;may&nbsp;receive&nbsp;the&nbsp;data&nbsp;in&nbsp;differently<br>
sized&nbsp;chunks&nbsp;in&nbsp;dataReceived()&nbsp;than&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;transmitted<br>
originally,&nbsp;which&nbsp;is&nbsp;a&nbsp;common&nbsp;source&nbsp;of&nbsp;confusion&nbsp;to&nbsp;people&nbsp;new&nbsp;to<br>
stream&nbsp;protocols,&nbsp;so&nbsp;perhaps&nbsp;you&nbsp;were&nbsp;thinking&nbsp;of&nbsp;that&nbsp;issue?<br>
<br>
The&nbsp;stream&nbsp;nature&nbsp;(and&nbsp;possibility&nbsp;for&nbsp;early&nbsp;disconnect&nbsp;from&nbsp;the<br>
client)&nbsp;is&nbsp;why&nbsp;having&nbsp;some&nbsp;internal&nbsp;length&nbsp;information&nbsp;for&nbsp;bulk<br>
transfers&nbsp;is&nbsp;sensible.&nbsp;&nbsp;For&nbsp;your&nbsp;original&nbsp;question,&nbsp;I&nbsp;was&nbsp;going&nbsp;to<br>
suggest&nbsp;an&nbsp;older&nbsp;posting&nbsp;of&nbsp;mine&nbsp;for&nbsp;a&nbsp;similar&nbsp;situation&nbsp;where&nbsp;I&nbsp;needed<br>
a&nbsp;bulk&nbsp;upload&nbsp;to&nbsp;augment&nbsp;a&nbsp;PB-based&nbsp;server,&nbsp;but&nbsp;it&nbsp;appears&nbsp;that&nbsp;you've<br>
located&nbsp;it&nbsp;in&nbsp;the&nbsp;archives&nbsp;yourself.<br>
<br>
&gt;&nbsp;But&nbsp;like&nbsp;I&nbsp;said,&nbsp;I&nbsp;could&nbsp;have&nbsp;been&nbsp;misinformed&nbsp;because&nbsp;it&nbsp;seems&nbsp;pretty<br>
&gt;&nbsp;basic&nbsp;to&nbsp;write&nbsp;1,2,3<br>
&gt;&nbsp;to&nbsp;a&nbsp;server&nbsp;and&nbsp;have&nbsp;it&nbsp;received&nbsp;1,2,3,&nbsp;guaranteed.<br>
<br>
Yes&nbsp;-&nbsp;TCP&nbsp;guarantees&nbsp;that&nbsp;what&nbsp;you&nbsp;transmit&nbsp;at&nbsp;one&nbsp;end&nbsp;will&nbsp;be<br>
received&nbsp;in&nbsp;order&nbsp;at&nbsp;the&nbsp;other&nbsp;end&nbsp;or&nbsp;not&nbsp;at&nbsp;all&nbsp;(e.g.,&nbsp;outages,<br>
disconnects,&nbsp;etc...).&nbsp;&nbsp;It&nbsp;has&nbsp;a&nbsp;weaker&nbsp;guarantee&nbsp;in&nbsp;terms&nbsp;of&nbsp;no<br>
corruption,&nbsp;but&nbsp;one&nbsp;that&nbsp;is,&nbsp;in&nbsp;combination&nbsp;with&nbsp;typical&nbsp;link&nbsp;layer<br>
protections,&nbsp;generally&nbsp;more&nbsp;than&nbsp;sufficient&nbsp;for&nbsp;the&nbsp;vast&nbsp;majority&nbsp;of<br>
connections&nbsp;using&nbsp;it&nbsp;each&nbsp;day.<br>
<br>
--&nbsp;David<br>
<br>
<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;A&nbsp;HREF=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/A&gt;<br>
&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;<br>
&lt;/PRE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/BLOCKQUOTE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;BR&gt;<br>
&lt;PRE&gt;<br>
_______________________________________________<br>
Twisted-Python&nbsp;mailing&nbsp;list<br>
&lt;A&nbsp;HREF=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/A&gt;<br>
&lt;A&nbsp;HREF=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/A&gt;<br>
&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;BR&gt;<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
