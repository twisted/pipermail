<tt>
Thanks&nbsp;for&nbsp;the&nbsp;reply. &nbsp;I&nbsp;am&nbsp;using&nbsp;twisted&nbsp;conch&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;remote&nbsp;machines&nbsp;and&nbsp;start&nbsp;these&nbsp;tests,&nbsp;I&nbsp;am&nbsp;thinking&nbsp;that&nbsp;instead&nbsp;of&nbsp;using&nbsp;one&nbsp;connection&nbsp;for&nbsp;all&nbsp;testing&nbsp;I&nbsp;will&nbsp;open&nbsp;a&nbsp;new&nbsp;connection&nbsp;(and&nbsp;thus&nbsp;a&nbsp;new&nbsp;python)&nbsp;for&nbsp;each&nbsp;test. &nbsp;Like&nbsp;I&nbsp;said&nbsp;increasing&nbsp;the&nbsp;thread&nbsp;pool&nbsp;size&nbsp;worked&nbsp;well&nbsp;for&nbsp;fast&nbsp;machines&nbsp;but&nbsp;no&nbsp;so&nbsp;well&nbsp;on&nbsp;older&nbsp;ones. &nbsp;I&nbsp;am&nbsp;hoping&nbsp;that&nbsp;this&nbsp;behavior&nbsp;has&nbsp;more&nbsp;to&nbsp;do&nbsp;with&nbsp;the&nbsp;GIL&nbsp;and&nbsp;that&nbsp;5&nbsp;processes&nbsp;on&nbsp;a&nbsp;slow&nbsp;machine&nbsp;will&nbsp;operate&nbsp;better&nbsp;than&nbsp;5&nbsp;python&nbsp;threads. &nbsp;&lt;br&gt;<br>
<br>
If&nbsp;not,&nbsp;then&nbsp;I&nbsp;will&nbsp;just&nbsp;have&nbsp;to&nbsp;write&nbsp;some&nbsp;sort&nbsp;of&nbsp;system&nbsp;to&nbsp;make&nbsp;sure&nbsp;I&nbsp;dont&nbsp;open&nbsp;too&nbsp;many&nbsp;threads&nbsp;on&nbsp;certain&nbsp;remote&nbsp;machines.&lt;br&gt;&lt;br&gt;Thanks&nbsp;again&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Mar&nbsp;18,&nbsp;2011&nbsp;at&nbsp;8:40&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:exarkun@twistedmatrix.com&quot;&gt;exarkun@twistedmatrix.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;10&nbsp;Mar,&nbsp;11:08&nbsp;pm,&nbsp;&lt;a&nbsp;href=&quot;mailto:charlessolar@gmail.com&quot;&gt;charlessolar@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;br&gt;<br>
<br>
<br>
&gt;I&nbsp;am&nbsp;using&nbsp;PB&nbsp;to&nbsp;run&nbsp;remote&nbsp;methods&nbsp;in&nbsp;a&nbsp;testing&nbsp;system&nbsp;at&nbsp;my&nbsp;company.&lt;br&gt;<br>
&gt;The&lt;br&gt;<br>
&gt;code&nbsp;works&nbsp;very&nbsp;well&nbsp;but&nbsp;breaks&nbsp;down&nbsp;when&nbsp;I&nbsp;start&nbsp;running&nbsp;multiple&lt;br&gt;<br>
&gt;tests&nbsp;at&lt;br&gt;<br>
&gt;once.&nbsp; I&nbsp;have&nbsp;tracked&nbsp;this&nbsp;down&nbsp;to&nbsp;overflowing&nbsp;the&nbsp;thread&nbsp;pool&nbsp;on&nbsp;the&lt;br&gt;<br>
&gt;remote&lt;br&gt;<br>
&gt;machines.&nbsp; I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;anyone&nbsp;might&nbsp;have&nbsp;better&nbsp;suggestions&nbsp;for&lt;br&gt;<br>
&gt;running&nbsp;long&nbsp;methods&nbsp;from&nbsp;a&nbsp;remote&nbsp;method.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;I&nbsp;coded&nbsp;up&nbsp;a&nbsp;sample&nbsp;of&nbsp;what&nbsp;I&nbsp;am&nbsp;seeing&nbsp;here:&lt;br&gt;<br>
&gt;&lt;a&nbsp;href=&quot;http://pastebin.com/rBPp20Ms&quot;&nbsp;target=&quot;_blank&quot;&gt;http://pastebin.com/rBPp20Ms&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;Basically&nbsp;I&nbsp;have&nbsp;1&nbsp;server&nbsp;that&nbsp;calls&nbsp;remote_execute&nbsp;on&nbsp;many&nbsp;clients&nbsp;on&lt;br&gt;<br>
&gt;a&lt;br&gt;<br>
&gt;remote&nbsp;server.&nbsp; This&nbsp;remote_execute&nbsp;method&nbsp;starts&nbsp;a&nbsp;new&nbsp;method&nbsp;using&lt;br&gt;<br>
&gt;threads.deferToThread&nbsp;and&nbsp;returns&nbsp;the&nbsp;defer&nbsp;to&nbsp;make&nbsp;the&nbsp;server&#39;s&lt;br&gt;<br>
&gt;callRemote&lt;br&gt;<br>
&gt;defer&nbsp;wait&nbsp;until&nbsp;the&nbsp;remote&nbsp;long&nbsp;method&nbsp;end.&lt;br&gt;<br>
&gt;What&nbsp;I&nbsp;do&nbsp;in&nbsp;those&nbsp;methods&nbsp;is&nbsp;run&nbsp;test&nbsp;code&nbsp;that&nbsp;waits,&nbsp;blocks,&nbsp;sleeps,&lt;br&gt;<br>
&gt;and&lt;br&gt;<br>
&gt;all&nbsp;sorts&nbsp;of&nbsp;nasty&nbsp;things&nbsp;that&nbsp;make&nbsp;the&nbsp;thread&nbsp;take&nbsp;a&nbsp;while.&nbsp; In&nbsp;the&lt;br&gt;<br>
&gt;example&lt;br&gt;<br>
&gt;code&nbsp;I&nbsp;simply&nbsp;sleep&nbsp;for&nbsp;20&nbsp;seconds.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;The&nbsp;problem&nbsp;I&nbsp;see&nbsp;with&nbsp;this&nbsp;code&nbsp;specifically&nbsp;is&nbsp;that&nbsp;I&nbsp;run&nbsp;out&nbsp;of&lt;br&gt;<br>
&gt;threads&lt;br&gt;<br>
&gt;on&nbsp;the&nbsp;pool&nbsp;and&nbsp;even&nbsp;though&nbsp;I&nbsp;wanted&nbsp;all&nbsp;execute&nbsp;methods&nbsp;to&nbsp;run&nbsp;at&nbsp;the&lt;br&gt;<br>
&gt;same&lt;br&gt;<br>
&gt;time,&nbsp;I&nbsp;see&nbsp;10&nbsp;run,&nbsp;then&nbsp;10&nbsp;more,&nbsp;then&nbsp;10&nbsp;more..&nbsp;etc.&nbsp; The&nbsp;testing&lt;br&gt;<br>
&gt;depends&lt;br&gt;<br>
&gt;on&nbsp;all&nbsp;these&nbsp;methods&nbsp;being&nbsp;run&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;as&nbsp;they&nbsp;run&nbsp;mechanisms&lt;br&gt;<br>
&gt;that&lt;br&gt;<br>
&gt;depend&nbsp;on&nbsp;each&nbsp;other&nbsp;and&nbsp;need&nbsp;everyone&nbsp;running.&nbsp; When&nbsp;I&nbsp;overflow&nbsp;the&lt;br&gt;<br>
&gt;thread&lt;br&gt;<br>
&gt;pool&nbsp;some&nbsp;methods&nbsp;do&nbsp;not&nbsp;run&nbsp;until&nbsp;other&nbsp;methods&nbsp;stop,&nbsp;which&nbsp;makes&nbsp;the&lt;br&gt;<br>
&gt;whole&lt;br&gt;<br>
&gt;test&nbsp;fail.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;This&nbsp;is&nbsp;how&nbsp;the&nbsp;thread&nbsp;pool&nbsp;works.&nbsp; It&nbsp;has&nbsp;a&nbsp;maximum&nbsp;size,&nbsp;which&nbsp;limits&lt;br&gt;<br>
the&nbsp;number&nbsp;of&nbsp;threads&nbsp;it&nbsp;will&nbsp;create&nbsp;to&nbsp;process&nbsp;work&nbsp;given&nbsp;to&nbsp;it.&lt;br&gt;<br>
Beyond&nbsp;that&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;tasks,&nbsp;things&nbsp;will&nbsp;begin&nbsp;to&nbsp;get&nbsp;queued&lt;br&gt;<br>
up&nbsp;and&nbsp;wait&nbsp;for&nbsp;a&nbsp;free&nbsp;thread&nbsp;to&nbsp;execute&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
Each&nbsp;task&nbsp;you&nbsp;give&nbsp;to&nbsp;the&nbsp;thread&nbsp;pool&nbsp;exclusively&nbsp;uses&nbsp;one&nbsp;of&nbsp;its&lt;br&gt;<br>
threads&nbsp;for&nbsp;the&nbsp;entire&nbsp;duration&nbsp;of&nbsp;the&nbsp;task,&nbsp;regardless&nbsp;of&nbsp;what&nbsp;the&nbsp;task&lt;br&gt;<br>
consists&nbsp;of.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;im&quot;&gt;&gt;I&nbsp;am&nbsp;not&nbsp;holding&nbsp;the&nbsp;GIL&nbsp;or&nbsp;blocking&nbsp;the&nbsp;reactor,&nbsp;which&nbsp;was&nbsp;the&nbsp;first&lt;br&gt;<br>
&gt;thing&lt;br&gt;<br>
&gt;I&nbsp;checked.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;Setting&nbsp;reactor.suggestThreadPoolSize(50)&nbsp;does&nbsp;help,&nbsp;but&nbsp;I&nbsp;do&nbsp;not&nbsp;think&lt;br&gt;<br>
&gt;its&lt;br&gt;<br>
&gt;the&nbsp;best&nbsp;solution,&nbsp;and&nbsp;does&nbsp;not&nbsp;work&nbsp;very&nbsp;well&nbsp;on&nbsp;our&nbsp;slow&nbsp;and&nbsp;older&lt;br&gt;<br>
&gt;machines.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;Using&nbsp;more&nbsp;threads&nbsp;is&nbsp;the&nbsp;only&nbsp;solution&nbsp;to&nbsp;the&nbsp;problem&nbsp;of&nbsp;not&nbsp;using&lt;br&gt;<br>
enough&nbsp;threads.&nbsp; Alternatively,&nbsp;look&nbsp;for&nbsp;wards&nbsp;to&nbsp;process&nbsp;tasks&nbsp;without&lt;br&gt;<br>
using&nbsp;threads.&lt;br&gt;<br>
&lt;br&gt;<br>
Jean-Paul&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
