<tt>
&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;p.MsoNormal,p.MsoNoSpacing{margin:0}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;On&nbsp;Mon,&nbsp;Jun&nbsp;24,&nbsp;2019,&nbsp;at&nbsp;17:24,&nbsp;Chengi&nbsp;Liu&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;id=&quot;qt&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;How&nbsp;do&nbsp;I&nbsp;use&nbsp;more&nbsp;multiple&nbsp;CPU&nbsp;cores?&nbsp;I&nbsp;guess&nbsp;atleast&nbsp;the&nbsp;fact&nbsp;that&nbsp;twisted&nbsp;app&nbsp;wont&nbsp;be&nbsp;blocking&nbsp;is&nbsp;good,&nbsp;but&nbsp;what&nbsp;would&nbsp;be&nbsp;a&nbsp;good&nbsp;way&nbsp;to&nbsp;use&nbsp;multiple&nbsp;cores.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;*really*&nbsp;depends&nbsp;on&nbsp;what&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;is&nbsp;CPU&nbsp;heavy,&nbsp;and&nbsp;why&nbsp;it&nbsp;is&nbsp;CPU&nbsp;heavy.&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;options&nbsp;here,&nbsp;and&nbsp;they're&nbsp;all&nbsp;subtly&nbsp;different.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;I'll&nbsp;start&nbsp;with&nbsp;noting&nbsp;that&nbsp;this&nbsp;is&nbsp;*no&nbsp;longer*&nbsp;a&nbsp;Twisted&nbsp;question:&nbsp;using&nbsp;multiple&nbsp;cores&nbsp;from&nbsp;Python&nbsp;is&nbsp;genuinely&nbsp;a&nbsp;problem&nbsp;for&nbsp;which&nbsp;there&nbsp;is&nbsp;no&nbsp;single&nbsp;good&nbsp;solution,&nbsp;just&nbsp;a&nbsp;number&nbsp;of&nbsp;different&nbsp;ones&nbsp;with&nbsp;trade-offs.&nbsp;As&nbsp;I&nbsp;mentioned,&nbsp;you&nbsp;can&nbsp;use&nbsp;`dask`.&nbsp;I&nbsp;think&nbsp;that&nbsp;might&nbsp;be&nbsp;the&nbsp;simplest&nbsp;solution&nbsp;for&nbsp;you&nbsp;--&nbsp;dask&nbsp;has&nbsp;a&nbsp;lot&nbsp;of&nbsp;good&nbsp;tutorials,&nbsp;and&nbsp;if&nbsp;your&nbsp;only&nbsp;goal&nbsp;is&nbsp;using&nbsp;multiple&nbsp;CPUs,&nbsp;it&nbsp;has&nbsp;an&nbsp;&quot;auto-setup&quot;.&nbsp;Another&nbsp;option&nbsp;is&nbsp;to&nbsp;see&nbsp;if&nbsp;you&nbsp;can&nbsp;use&nbsp;a&nbsp;library&nbsp;that&nbsp;natively&nbsp;releases&nbsp;the&nbsp;Global&nbsp;Interpreter&nbsp;Lock.&nbsp;If,&nbsp;for&nbsp;example,&nbsp;your&nbsp;function&nbsp;is&nbsp;numeric&nbsp;computation&nbsp;heavy,&nbsp;than&nbsp;numpy&nbsp;does&nbsp;release&nbsp;the&nbsp;GIL.&nbsp;You&nbsp;can&nbsp;also&nbsp;use&nbsp;ampoule,&nbsp;though&nbsp;the&nbsp;set-up&nbsp;becomes&nbsp;non-trivial&nbsp;--&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;either&nbsp;change&nbsp;your&nbsp;process&nbsp;initialization&nbsp;or&nbsp;maintain&nbsp;a&nbsp;process&nbsp;pool&nbsp;from&nbsp;the&nbsp;main&nbsp;process.&nbsp;Either&nbsp;option&nbsp;can&nbsp;become&nbsp;non-trivial&nbsp;fast.&nbsp;Finally,&nbsp;the&nbsp;option&nbsp;of&nbsp;writing&nbsp;the&nbsp;CPU&nbsp;heavy&nbsp;code&nbsp;in&nbsp;Cython,&nbsp;and&nbsp;then&nbsp;releasing&nbsp;the&nbsp;GIL&nbsp;explicitly&nbsp;around&nbsp;the&nbsp;area&nbsp;it&nbsp;is&nbsp;not&nbsp;needed,&nbsp;exists.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;To&nbsp;sum&nbsp;up:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;Dask&lt;br&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;Something&nbsp;that&nbsp;releases&nbsp;the&nbsp;GIL,&nbsp;like&nbsp;numpy&lt;br&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;Setting&nbsp;up&nbsp;an&nbsp;ampoule&nbsp;process&nbsp;pool&lt;br&gt;&lt;/div&gt;&lt;div&gt;*&nbsp;Move&nbsp;CPU&nbsp;heavy&nbsp;logic&nbsp;to&nbsp;Cython,&nbsp;and&nbsp;release&nbsp;GIL&nbsp;explicitly&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;I&nbsp;said,&nbsp;none&nbsp;of&nbsp;these&nbsp;options&nbsp;are&nbsp;really&nbsp;Twisted-related&nbsp;(the&nbsp;only&nbsp;one&nbsp;vaguely&nbsp;connected&nbsp;is&nbsp;the&nbsp;ampoule&nbsp;one,&nbsp;but&nbsp;even&nbsp;then,&nbsp;the&nbsp;fact&nbsp;that&nbsp;you'll&nbsp;use&nbsp;Twisted&nbsp;to&nbsp;manage&nbsp;the&nbsp;pool&nbsp;is&nbsp;incidental).&nbsp;There&nbsp;are&nbsp;even&nbsp;more&nbsp;exotic&nbsp;options,&nbsp;of&nbsp;course,&nbsp;but&nbsp;I&nbsp;think&nbsp;this&nbsp;e-mail&nbsp;might&nbsp;already&nbsp;be&nbsp;confusing&nbsp;enough.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Moshe&nbsp;Z.&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
