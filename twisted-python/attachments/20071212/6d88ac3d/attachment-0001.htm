<tt>
Thanks&nbsp;for&nbsp;your&nbsp;response,&nbsp;Christian!&lt;br&gt;&lt;br&gt;However,&nbsp;this&nbsp;still&nbsp;does&nbsp;not&nbsp;work&nbsp;and&nbsp;I&nbsp;think&nbsp;it&nbsp;is&nbsp;related&nbsp;to&nbsp;the&nbsp;StompClientFactory&nbsp;and&nbsp;the&nbsp;StompProtocol&nbsp;I&amp;#39;m&nbsp;using.&nbsp;I&amp;#39;m&nbsp;including&nbsp;those&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;email&nbsp;so&nbsp;you&nbsp;can&nbsp;see&nbsp;what&nbsp;they&nbsp;do.<br>
&lt;br&gt;&lt;br&gt;I&nbsp;changed&nbsp;my&nbsp;GetUDP&nbsp;class&nbsp;to&nbsp;this:&lt;br&gt;&lt;br&gt;class&nbsp;GetUDP(DatagramProtocol):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;datagramReceived(self,&nbsp;datagram,&nbsp;address):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;datagram,address&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#Send&nbsp;datagram&nbsp;to&nbsp;the&nbsp;queue&nbsp;server<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;stompclient.send(datagram)&lt;br&gt;&lt;br&gt;And&nbsp;I&nbsp;changed&nbsp;the&nbsp;instantiation&nbsp;to&nbsp;what&nbsp;you&nbsp;gave&nbsp;me,&nbsp;but&nbsp;I&nbsp;get&nbsp;this&nbsp;error&nbsp;when&nbsp;I&nbsp;get&nbsp;a&nbsp;UDP&nbsp;packet:&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;File&nbsp;&amp;quot;Agent_service_test.py&amp;quot;,&nbsp;line&nbsp;103,&nbsp;in&nbsp;datagramReceived<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;stompclient.send(datagram)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;exceptions.NameError:&nbsp;global&nbsp;name&nbsp;&amp;#39;stompclient&amp;#39;&nbsp;is&nbsp;not&nbsp;defined&lt;br&gt;&lt;br&gt;&lt;br&gt;Here&nbsp;are&nbsp;my&nbsp;stomp&nbsp;classes:&lt;br&gt;&lt;br&gt;class&nbsp;StompProtocol(Protocol,&nbsp;stomper.Engine):&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;username=&amp;#39;&amp;#39;,&nbsp;password=&amp;#39;&amp;#39;,&nbsp;queue=&amp;#39;&amp;#39;):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;stomper.Engine.__init__(self)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.username&nbsp;=&nbsp;username&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.password&nbsp;=&nbsp;password&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.counter&nbsp;=&nbsp;1&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.log&nbsp;=&nbsp;logging.getLogger(&amp;quot;sender&amp;quot;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.queue<br>
&nbsp;=&nbsp;queue&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connected(self,&nbsp;msg):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Once&nbsp;I&amp;#39;ve&nbsp;connected&nbsp;I&nbsp;want&nbsp;to&nbsp;subscribe&nbsp;to&nbsp;the&nbsp;message&nbsp;queue.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;stomper.Engine.connected(self,&nbsp;msg)&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#self.log.info(&amp;quot;Connected:&nbsp;session&nbsp;%s.&nbsp;Begining&nbsp;say&nbsp;hello.&amp;quot;&nbsp;%&nbsp;msg[&amp;#39;headers&amp;#39;][&amp;#39;session&amp;#39;])&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#lc&nbsp;=&nbsp;LoopingCall(self.send)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#lc.start(1)&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f&nbsp;=&nbsp;stomper.Frame<br>
()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.unpack(stomper.subscribe(self.queue))&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;ActiveMQ&nbsp;specific&nbsp;headers:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;prevent&nbsp;the&nbsp;messages&nbsp;we&nbsp;send&nbsp;comming&nbsp;back&nbsp;to&nbsp;us.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.headers[&amp;#39;activemq.noLocal&amp;#39;]&nbsp;=&nbsp;&amp;#39;true&amp;#39;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;f.pack()&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;ack(self,&nbsp;msg):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Processes&nbsp;the&nbsp;received&nbsp;message.&nbsp;I&nbsp;don&amp;#39;t&nbsp;need&nbsp;to&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;generate&nbsp;an&nbsp;ack&nbsp;message.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.log.info(&amp;quot;SENDER&nbsp;-&nbsp;received:&nbsp;%s&nbsp;&amp;quot;&nbsp;%&nbsp;msg[&amp;#39;body&amp;#39;])&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;stomper.NO_REPONSE_NEEDED&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;send(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Send&nbsp;out&nbsp;a&nbsp;hello&nbsp;message&nbsp;periodically.<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.log.info(&amp;quot;Saying&nbsp;hello&nbsp;(%d).&amp;quot;&nbsp;%&nbsp;self.counter)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.counter&nbsp;+=&nbsp;1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f&nbsp;=&nbsp;stomper.Frame()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.unpack(stomper.send(self.queue,&nbsp;&amp;#39;hello&nbsp;there&nbsp;(%d)&amp;#39;&nbsp;%&nbsp;<br>
self.counter))&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;ActiveMQ&nbsp;specific&nbsp;headers:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;f.headers[&amp;#39;persistent&amp;#39;]&nbsp;=&nbsp;&amp;#39;true&amp;#39;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(f.pack())&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Register&nbsp;with&nbsp;stomp&nbsp;server.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;cmd&nbsp;=&nbsp;stomper.connect(self.username,&nbsp;self.password)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(cmd)&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Data&nbsp;received,&nbsp;react&nbsp;to&nbsp;it&nbsp;and&nbsp;respond&nbsp;if&nbsp;needed.&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;msg&nbsp;=&nbsp;stomper.unpack_frame(data)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;returned&nbsp;=&nbsp;self.react(msg)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;returned:<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(returned)&lt;br&gt;&lt;br&gt;class&nbsp;StompClientFactory(ReconnectingClientFactory):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;username=&amp;#39;&amp;#39;,&nbsp;password=&amp;#39;&amp;#39;,&nbsp;queue=&amp;#39;&amp;#39;,queue_type=&amp;#39;&amp;#39;,config=&amp;#39;&amp;#39;):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.username=username&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.password=password&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.queue=queue&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.queue_type=queue_type&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.config_file=config&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.queue_type&nbsp;==&amp;#39;config&amp;#39;:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;ConfigurationProtocol(self.queue,self.config_file,self.username,&nbsp;self.password)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;StompProtocol(self.username,&nbsp;<br>
self.password,&nbsp;self.queue)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;clientConnectionLost(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Lost&nbsp;connection&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&amp;#39;Lost&nbsp;connection.&amp;nbsp;&nbsp;Reason:&amp;#39;,&nbsp;reason<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;clientConnectionFailed(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;Connection&nbsp;failed&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;quot;&amp;quot;&amp;quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;&amp;#39;Connection&nbsp;failed.&nbsp;Reason:&amp;#39;,&nbsp;reason&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;ReconnectingClientFactory.clientConnectionFailed(self,&nbsp;connector,&nbsp;reason)&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Dec&nbsp;12,&nbsp;2007&nbsp;8:16&nbsp;AM,&nbsp;Christian&nbsp;Simms&nbsp;&amp;lt;&lt;a&nbsp;href=&quot;mailto:christian.simms@gmail.com&quot;&gt;christian.simms@gmail.com<br>
&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;Wj3C7c&quot;&gt;On&nbsp;Dec&nbsp;12,&nbsp;2007&nbsp;12:08&nbsp;AM,&nbsp;Don&nbsp;Smith&nbsp;&amp;lt;<br>
&lt;a&nbsp;href=&quot;mailto:donwsmith@gmail.com&quot;&gt;donwsmith@gmail.com&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;&amp;gt;&nbsp;Hi&nbsp;all,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&amp;#39;m&nbsp;trying&nbsp;to&nbsp;build&nbsp;an&nbsp;app&nbsp;using&nbsp;MultiService.&nbsp;I&nbsp;need&nbsp;to&nbsp;have&nbsp;2&nbsp;services,&lt;br&gt;&amp;gt;&nbsp;one&nbsp;that&nbsp;listens&nbsp;for&nbsp;UDP&nbsp;datagrams&nbsp;and&nbsp;another&nbsp;that&nbsp;can&nbsp;send&nbsp;those&nbsp;datagrams<br>
&lt;br&gt;&amp;gt;&nbsp;to&nbsp;an&nbsp;ActiveMQ&nbsp;server&nbsp;via&nbsp;a&nbsp;Stomp&nbsp;client.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;I&nbsp;can&nbsp;set&nbsp;up&nbsp;the&nbsp;two&nbsp;services&nbsp;just&nbsp;fine,&nbsp;but&nbsp;I&amp;#39;m&nbsp;stuck&nbsp;with&nbsp;how&nbsp;to&nbsp;call&nbsp;the&lt;br&gt;&amp;gt;&nbsp;MQ&nbsp;service&nbsp;send&nbsp;method&nbsp;from&nbsp;the&nbsp;UDPServer&nbsp;instance.&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Some&nbsp;code&nbsp;to&nbsp;illustrate:<br>
&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;class&nbsp;GetUDP(DatagramProtocol):&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;def&nbsp;datagramReceived(self,&nbsp;datagram,&nbsp;address):&lt;br&gt;&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;print&nbsp;datagram,address&lt;br&gt;&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;#Send&nbsp;datagram&nbsp;to&nbsp;the&nbsp;queue&nbsp;server<br>
&lt;br&gt;&amp;gt;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;&amp;nbsp;&nbsp;#&nbsp;I&nbsp;don&amp;#39;t&nbsp;know&nbsp;how&nbsp;to&nbsp;access&nbsp;the&nbsp;send&nbsp;method&nbsp;for&nbsp;the&nbsp;Stomp&nbsp;client&lt;br&gt;&amp;gt;&nbsp;service!&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;testq&nbsp;=&nbsp;internet.TCPClient(APPVARIABLES[&amp;#39;queue_server&amp;#39;],&lt;br&gt;&amp;gt;&nbsp;int(APPVARIABLES[&amp;#39;queue_port&amp;#39;]),&nbsp;<br>
connections.StompClientFactory&lt;br&gt;&amp;gt;&nbsp;(username=&amp;#39;&amp;#39;,password=&amp;#39;&amp;#39;,queue=&amp;#39;/queue/test&amp;#39;))&lt;br&gt;&amp;gt;&nbsp;testq.setName(&amp;#39;Testq&amp;#39;)&lt;br&gt;&amp;gt;&nbsp;testq.setServiceParent(MQService)&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;#create&nbsp;a&nbsp;UDP&nbsp;listener<br>
&lt;br&gt;&amp;gt;&nbsp;#TODO:&nbsp;this&nbsp;should&nbsp;be&nbsp;driven&nbsp;by&nbsp;the&nbsp;config&nbsp;file&lt;br&gt;&amp;gt;&nbsp;#reactor.listenUDP(42000,&nbsp;GetUDP())&lt;br&gt;&amp;gt;&nbsp;internet.UDPServer(42000,GetUDP()).setServiceParent(MQService)&lt;br&gt;&amp;gt;&nbsp;#&nbsp;Create&nbsp;an&nbsp;application&nbsp;as&nbsp;normal&lt;br&gt;&amp;gt;&nbsp;application&nbsp;=&nbsp;<br>
service.Application(&amp;quot;MQExample&amp;quot;)&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;#&nbsp;Connect&nbsp;our&nbsp;MultiService&nbsp;to&nbsp;the&nbsp;application,&nbsp;just&nbsp;like&nbsp;a&nbsp;normal&nbsp;service.&lt;br&gt;&amp;gt;&nbsp;MQService.setServiceParent(application)&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Note:&nbsp;this&nbsp;is&nbsp;won&amp;#39;t&nbsp;run&nbsp;exactly&nbsp;as&nbsp;is,&nbsp;but&nbsp;should&nbsp;give&nbsp;an&nbsp;idea&nbsp;of&nbsp;my<br>
&lt;br&gt;&amp;gt;&nbsp;problem.&nbsp;I&amp;#39;ve&nbsp;setup&nbsp;the&nbsp;ActiveMQ&nbsp;Stomp&nbsp;client&nbsp;as&nbsp;&amp;#39;testq&amp;#39;.&nbsp;I&amp;#39;ve&nbsp;setup&nbsp;the&lt;br&gt;&amp;gt;&nbsp;UDPServer&nbsp;service&nbsp;to&nbsp;listen&nbsp;for&nbsp;UDP&nbsp;packets.&nbsp;I&nbsp;can&nbsp;get&nbsp;the&nbsp;UDP&nbsp;packets&nbsp;and&lt;br&gt;&amp;gt;&nbsp;print&nbsp;them,&nbsp;but&nbsp;I&nbsp;can&amp;#39;t&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;hand&nbsp;them&nbsp;to&nbsp;my&nbsp;Stomp&nbsp;client&amp;#39;s<br>
&lt;br&gt;&amp;gt;&nbsp;send()&nbsp;method.&nbsp;This&nbsp;is&nbsp;possible,&nbsp;right?&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Thanks,&lt;br&gt;&amp;gt;&lt;br&gt;&amp;gt;&nbsp;Don&lt;br&gt;&amp;gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&amp;gt;&nbsp;_______________________________________________&lt;br&gt;&amp;gt;&nbsp;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;<br>
Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&amp;gt;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;&amp;gt;&lt;br&gt;&lt;br&gt;The&nbsp;answer&nbsp;is&nbsp;really&nbsp;easy&nbsp;--&nbsp;you&nbsp;don&amp;#39;t&nbsp;need&nbsp;any&nbsp;twisted&nbsp;magic&nbsp;to&nbsp;do<br>
&lt;br&gt;this,&nbsp;you&nbsp;just&nbsp;need&nbsp;to&nbsp;use&nbsp;standard&nbsp;Python&nbsp;mechanisms.&nbsp;&amp;nbsp;Your&nbsp;UDP&lt;br&gt;listener,&nbsp;when&nbsp;it&nbsp;receives&nbsp;some&nbsp;data,&nbsp;just&nbsp;needs&nbsp;a&nbsp;Python&nbsp;reference&nbsp;to&lt;br&gt;your&nbsp;Stomp&nbsp;client.&nbsp;You&nbsp;could&nbsp;have&nbsp;stuffed&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;Stomp&lt;br&gt;client&nbsp;in&nbsp;a&nbsp;module&nbsp;global&nbsp;variable&nbsp;(naughty!),&nbsp;or&nbsp;better,&nbsp;you&nbsp;could<br>
&lt;br&gt;have&nbsp;stuffed&nbsp;it&nbsp;in&nbsp;an&nbsp;attribute&nbsp;of&nbsp;your&nbsp;GetUDP&nbsp;object.&nbsp;So&nbsp;you&nbsp;could&lt;br&gt;change&nbsp;this&nbsp;line:&lt;br&gt;&lt;div&nbsp;class=&quot;Ih2E3d&quot;&gt;&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;internet.UDPServer(42000,GetUDP()).setServiceParent(MQService)&lt;br&gt;&lt;br&gt;&lt;/div&gt;to&nbsp;these&nbsp;lines:&lt;br&gt;&lt;br&gt;<br>
&nbsp;&amp;nbsp;&nbsp;udpService&nbsp;=&nbsp;GetUDP()&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;udpService.stompClient&nbsp;=&nbsp;testq&nbsp;&amp;nbsp;#&nbsp;stuff&nbsp;it&nbsp;in!&lt;br&gt;&nbsp;&amp;nbsp;&nbsp;internet.UDPServer(42000,udpService).setServiceParent(MQService)&lt;br&gt;&lt;br&gt;Cheers,&lt;br&gt;Christian&lt;br&gt;&lt;br&gt;_______________________________________________<br>
&lt;br&gt;Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python<br>
&lt;/a&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;<br>

</tt>
