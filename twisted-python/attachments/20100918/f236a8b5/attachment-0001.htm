<tt>
Sorry&nbsp;fo&nbsp;my&nbsp;question.&nbsp;I&amp;#39;m&nbsp;new&nbsp;in&nbsp;twisted&nbsp;ad&nbsp;may&nbsp;misunderstand&nbsp;some&nbsp;things:-),&nbsp;and&nbsp;my&nbsp;questions&nbsp;may&nbsp;look&nbsp;like&nbsp;trivial&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;follow&nbsp;stack&nbsp;trace:&lt;br&gt;&lt;br&gt;cant&nbsp;connect&nbsp;to&nbsp;fcgi&nbsp;socket:&nbsp;[Failure&nbsp;instance:&nbsp;Traceback:&nbsp;&amp;lt;type&nbsp;&amp;#39;exceptions.ValueError&amp;#39;&amp;gt;:&nbsp;file&nbsp;descriptor&nbsp;can&nbsp;not&nbsp;be&nbsp;a&nbsp;negative&nbsp;integer&nbsp;(-1)&lt;br&gt;<br>
/usr/local/lib/python2.6/site-packages/twisted/internet/base.py:796:runUntilCurrent&lt;br&gt;/usr/local/lib/python2.6/site-packages/twisted/internet/protocol.py:184:fire&lt;br&gt;/usr/local/lib/python2.6/site-packages/twisted/internet/defer.py:318:callback&lt;br&gt;<br>
/usr/local/lib/python2.6/site-packages/twisted/internet/defer.py:424:_startRunCallbacks&lt;br&gt;---&nbsp;&amp;lt;exception&nbsp;caught&nbsp;here&amp;gt;&nbsp;---&lt;br&gt;/usr/local/lib/python2.6/site-packages/twisted/internet/defer.py:441:_runCallbacks&lt;br&gt;/usr/local/fastcgi-0.1/fcgi/proxy.py:124:connectionMade&lt;br&gt;<br>
/usr/local/lib/python2.6/site-packages/twisted/internet/abstract.py:340:resumeProducing&lt;br&gt;/usr/local/lib/python2.6/site-packages/twisted/internet/abstract.py:278:startReading&lt;br&gt;/usr/local/lib/python2.6/site-packages/twisted/internet/kqreactor.py:82:addReader&lt;br&gt;<br>
/usr/local/lib/python2.6/site-packages/twisted/internet/kqreactor.py:71:_updateRegistration&lt;br&gt;]&lt;br&gt;&lt;br&gt;My&nbsp;connectionMade&nbsp;function&nbsp;looks&nbsp;like&nbsp;this:&lt;br&gt;&lt;br&gt;ššš&nbsp;def&nbsp;connectionMade(protocol):&lt;br&gt;ššššš&nbsp;protocol._setPeer(self);&lt;br&gt;<br>
ššššš&nbsp;self._setPeer(protocol);&lt;br&gt;&lt;br&gt;ššššš&nbsp;for&nbsp;chunk&nbsp;in&nbsp;self._chunks:&lt;br&gt;ššššššš&nbsp;protocol.transport.write(chunk);&lt;br&gt;&lt;br&gt;ššššš&nbsp;self._chunks&nbsp;=&nbsp;[];&lt;br&gt;ššššš&nbsp;self.transport.resumeProducing();&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;All&nbsp;code&nbsp;that&nbsp;i&nbsp;use&nbsp;look&nbsp;like&nbsp;this:&lt;br&gt;<br>
š&nbsp;def&nbsp;proxy(self):&lt;br&gt;ššš&nbsp;def&nbsp;connectionMade(protocol):&lt;br&gt;ššššš&nbsp;protocol._setPeer(self);&lt;br&gt;ššššš&nbsp;self._setPeer(protocol);&lt;br&gt;&lt;br&gt;ššššš&nbsp;for&nbsp;chunk&nbsp;in&nbsp;self._chunks:&lt;br&gt;ššššššš&nbsp;protocol.transport.write(chunk);&lt;br&gt;&lt;br&gt;ššššš&nbsp;self._chunks&nbsp;=&nbsp;[];&lt;br&gt;<br>
ššššš&nbsp;self.transport.resumeProducing();&lt;br&gt;&lt;br&gt;ššš&nbsp;def&nbsp;cantConnect(fail):&lt;br&gt;ššššš&nbsp;log.err(&amp;quot;cant&nbsp;connect&nbsp;to&nbsp;fcgi&nbsp;socket:&nbsp;%s&amp;quot;&nbsp;%&nbsp;(fail.getErrorMessage()));&lt;br&gt;ššššš&nbsp;self.transport.loseConnection();&lt;br&gt;&lt;br&gt;ššš&nbsp;#ÕÓÔÁÎÁ×ÌÉ×ÁÅÍ&nbsp;ÓÏÅÄÉÎÅÎÉÅ&nbsp;Ó&nbsp;ÒÅÁÌØÎÙÍ&nbsp;ÏÂÒÁÂÏÔÞÉËÏÍ&nbsp;(×&nbsp;ÎÁÛÅÍ&nbsp;ÓÌÕÞÁÅ&nbsp;ÜÔÏ&nbsp;php)&lt;br&gt;<br>
ššš&nbsp;self.transport.pauseProducing();&lt;br&gt;ššš&nbsp;l_client&nbsp;=&nbsp;protocol.ClientCreator(reactor,&nbsp;Proxy);&lt;br&gt;ššš&nbsp;l_client.connectUNIX(self.factory.proxysock).addCallback(connectionMade).addErrback(cantConnect);&lt;br&gt;&lt;br&gt;&lt;br&gt;Its&nbsp;a&nbsp;simply&nbsp;fastcgi&nbsp;proxy,&nbsp;which&nbsp;reads&nbsp;all&nbsp;request(analize&nbsp;it,&nbsp;do&nbsp;some&nbsp;pending&nbsp;things&nbsp;and&nbsp;then&nbsp;proxy&nbsp;request&nbsp;to&nbsp;real&nbsp;worker)&lt;br&gt;<br>
Thank&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;&lt;br&gt;PS:&nbsp;i&nbsp;use&nbsp;kqreactor.py&nbsp;from&nbsp;this&nbsp;branch&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/browser/branches/kqreactor-1918-3/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/trac/browser/branches/kqreactor-1918-3/&lt;/a&gt;<br>

</tt>
