<tt>
Thanks&nbsp;both&nbsp;for&nbsp;th&nbsp;soon&nbsp;replies.&lt;br&gt;&lt;br&gt;&lt;br&gt;My&nbsp;code&nbsp;looks&nbsp;a&nbsp;lot&nbsp;like&nbsp;Lucas&nbsp;suggested&nbsp;(I&nbsp;was&nbsp;messing&nbsp;the&nbsp;stop&nbsp;stuff).&lt;br&gt;&lt;br&gt;Another&nbsp;question.&nbsp;Thinking&nbsp;twisted&nbsp;(and&nbsp;thinking&nbsp;about&nbsp;performance),&nbsp;it&#39;s&nbsp;ok&nbsp;to&nbsp;loop&nbsp;every&nbsp;30&nbsp;seconds&nbsp;over&nbsp;the&nbsp;clients&nbsp;asking&nbsp;their&nbsp;status&nbsp;or&nbsp;should&nbsp;be&nbsp;better&nbsp;to&nbsp;schudle&nbsp;a&nbsp;new&nbsp;polling&nbsp;rutine&nbsp;starting&nbsp;30&nbsp;seconds&nbsp;from&nbsp;now&nbsp;every&nbsp;time&nbsp;a&nbsp;client&nbsp;is&nbsp;connected?&nbsp;In&nbsp;the&nbsp;second&nbsp;approach&nbsp;the&nbsp;polls&nbsp;will&nbsp;be&nbsp;more&nbsp;spread?&nbsp;Is&nbsp;a&nbsp;good&nbsp;Idea?&lt;br&gt;<br>
&lt;br&gt;It&nbsp;will&nbsp;be&nbsp;something&nbsp;like:&lt;br&gt;&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor,&nbsp;task&lt;br&gt;&lt;br&gt;class&nbsp;StatusPollingReceiver(LineOnlyReceiver):&lt;br&gt;  &nbsp;def&nbsp;requestStatus(self):&lt;br&gt;      &nbsp;self.transport.write(&#39;stat\r\n&#39;)&lt;br&gt;          &nbsp;&lt;br&gt;<br>
  &nbsp;def&nbsp;connectionMade(self):&lt;br&gt;      &nbsp;self.factory.clients.append(self)&lt;br&gt;      &nbsp;statusloop&nbsp;=&nbsp;task.LoopingCall(self.requestStatus)&lt;br&gt;      &nbsp;statusloop.start(30.0)&lt;br&gt;&lt;br&gt;  &nbsp;def&nbsp;lineReceived(self,&nbsp;line):&lt;br&gt;      &nbsp;print(&#39;Rx:&nbsp;%s&#39;&nbsp;%&nbsp;line)&lt;br&gt;<br>
&lt;br&gt;  &nbsp;def&nbsp;connectionLost(self,&nbsp;reason):&lt;br&gt;      &nbsp;self.factory.clients.remove(self)&lt;br&gt;&lt;br&gt;&lt;br&gt;class&nbsp;StatusPollingFactory(Factory):&lt;br&gt;&lt;br&gt;  &nbsp;def&nbsp;__init__(self):&lt;br&gt;      &nbsp;self.clients&nbsp;=&nbsp;[]&lt;br&gt;&lt;br&gt;  &nbsp;def&nbsp;stopFactory(self):&lt;br&gt;<br>
      &nbsp;self.statusloop.stop()&lt;br&gt;&lt;br&gt;  &nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt;      &nbsp;p&nbsp;=&nbsp;StatusPollingReceiver()&lt;br&gt;      &nbsp;p.factory&nbsp;=&nbsp;self&lt;br&gt;      &nbsp;return&nbsp;p&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2009/4/28&nbsp;Lucas&nbsp;Taylor&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:ltaylor.volks@gmail.com&quot;&gt;ltaylor.volks@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;4/27/09&nbsp;5:06&nbsp;PM,&nbsp;Juanjo&nbsp;Conti&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi,&nbsp;this&nbsp;is&nbsp;my&nbsp;first&nbsp;mail&nbsp;to&nbsp;the&nbsp;list.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;writing&nbsp;a&nbsp;server&nbsp;using&nbsp;Twisted,&nbsp;extending&nbsp;LineOnlyReceiver.&nbsp;In&nbsp;it&nbsp;I&lt;br&gt;<br>
&gt;&nbsp;maintain&nbsp;a&nbsp;list&nbsp;of&nbsp;clients&nbsp;connected.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;poll&nbsp;every&nbsp;client&nbsp;for&nbsp;certain&nbsp;status&nbsp;information&nbsp;every&nbsp;30&lt;br&gt;<br>
&gt;&nbsp;seconds.&nbsp;Which&nbsp;is&nbsp;the&nbsp;correct&nbsp;approach&nbsp;to&nbsp;implement&nbsp;this?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;A&nbsp;simple&nbsp;option&nbsp;is&nbsp;to&nbsp;setup&nbsp;a&nbsp;task.LoopingCall&nbsp;in&nbsp;your&nbsp;factory&nbsp;to&lt;br&gt;<br>
iterate&nbsp;over&nbsp;the&nbsp;list&nbsp;of&nbsp;clients&nbsp;every&nbsp;30&nbsp;seconds&nbsp;and&nbsp;issue&nbsp;your&nbsp;status&lt;br&gt;<br>
request.&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;it&nbsp;is&nbsp;correct&nbsp;for&nbsp;your&nbsp;application,&nbsp;but&nbsp;this&lt;br&gt;<br>
should&nbsp;illustrate&nbsp;the&nbsp;basic&nbsp;idea:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
from&nbsp;twisted.internet&nbsp;import&nbsp;reactor,&nbsp;task&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;StatusPollingReceiver(LineOnlyReceiver):&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;connectionMade(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.factory.clients.append(self)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;lineReceived(self,&nbsp;line):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; print(&#39;Rx:&nbsp;%s&#39;&nbsp;%&nbsp;line)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;connectionLost(self,&nbsp;reason):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.factory.clients.remove(self)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
class&nbsp;StatusPollingFactory(Factory):&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;__init__(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.clients&nbsp;=&nbsp;[]&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;send&nbsp;a&nbsp;status&nbsp;request&nbsp;to&nbsp;each&nbsp;client&nbsp;every&nbsp;30&nbsp;seconds&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.statusloop&nbsp;=&nbsp;task.LoopingCall(self.requestStatus)&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.statusloop.start(30.0)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;requestStatus(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; for&nbsp;client&nbsp;in&nbsp;self.clients:&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client.transport.write(&#39;stat\r\n&#39;)&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;stopFactory(self):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.statusloop.stop()&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp; &nbsp; def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; p&nbsp;=&nbsp;StatusPollingReceiver()&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; p.factory&nbsp;=&nbsp;self&lt;br&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; return&nbsp;p&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
see:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/api/twisted.internet.task.LoopingCall.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/documents/current/api/twisted.internet.task.LoopingCall.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;Juanjo&nbsp;Conti&lt;br&gt;<br>

</tt>
