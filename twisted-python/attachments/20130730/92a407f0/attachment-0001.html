<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Hi&nbsp;zipxing,&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;You&nbsp;don&#39;t&nbsp;mention&nbsp;the&nbsp;interpreter.&nbsp;Is&nbsp;it&nbsp;CPython?&nbsp;What&nbsp;kind&nbsp;of&nbsp;results&nbsp;do&nbsp;you&nbsp;get&nbsp;trying&nbsp;it&nbsp;on&nbsp;PyPy?&lt;br&gt;<br>
<br>
&lt;br&gt;Also,&nbsp;you&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;specify&nbsp;epollreactor.&nbsp;Recent&nbsp;versions&nbsp;of&nbsp;twisted&nbsp;will&nbsp;automagically&nbsp;choose&nbsp;the&nbsp;appropriate&nbsp;backend.&nbsp;I&nbsp;fixed&nbsp;this&nbsp;and&nbsp;some&nbsp;other&nbsp;cleanups&nbsp;and&nbsp;got:&lt;br&gt;<br>
&lt;br&gt;----&lt;br&gt;from&nbsp;time&nbsp;import&nbsp;clock&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;protocol,&nbsp;reactor&lt;br&gt;from&nbsp;twisted.protocols&nbsp;import&nbsp;basic&lt;br&gt;&lt;br&gt;class&nbsp;MeasuringEchoProtocol(basic.LineReceiver):&lt;br&gt;   &nbsp;MEASUREMENT_INTERVAL&nbsp;=&nbsp;1000&lt;br&gt;&lt;br&gt;<br>
<br>
<br>
   &nbsp;def&nbsp;lineReceived(self,&nbsp;data):&lt;br&gt;       &nbsp;self.factory.requests&nbsp;+=&nbsp;1&lt;br&gt;       &nbsp;if&nbsp;self.factory.requests&nbsp;%&nbsp;self.MEASUREMENT_INTERVAL&nbsp;==&nbsp;0:&lt;br&gt;           &nbsp;print&nbsp;&quot;RPS:&nbsp;{0}&quot;.format(self.factory.requests&nbsp;/&nbsp;clock())&lt;br&gt;<br>
<br>
<br>
&lt;br&gt;       &nbsp;self.transport.write(data)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;class&nbsp;ServerFactory(protocol.ServerFactory):&lt;br&gt;   &nbsp;protocol&nbsp;=&nbsp;MeasuringEchoProtocol&lt;br&gt;&lt;br&gt;   &nbsp;def&nbsp;__init__(self):&lt;br&gt;       &nbsp;self.requests&nbsp;=&nbsp;0&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;def&nbsp;main():&lt;br&gt;<br>
<br>
<br>
   &nbsp;reactor.listenTCP(9976,&nbsp;ServerFactory())&lt;br&gt;   &nbsp;clock()&lt;br&gt;   &nbsp;reactor.run()&lt;br&gt;&lt;br&gt;if&nbsp;__name__&nbsp;==&nbsp;&#39;__main__&#39;:&lt;br&gt;   &nbsp;main()&lt;br&gt;----&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;due&nbsp;to&nbsp;setup&nbsp;time&nbsp;few&nbsp;requests&nbsp;get&nbsp;handled&nbsp;right&nbsp;when&nbsp;it&nbsp;starts,&nbsp;so&nbsp;the&nbsp;server&nbsp;RPS&nbsp;will&nbsp;take&nbsp;some&nbsp;time&nbsp;to&nbsp;balance&nbsp;out.&nbsp;On&nbsp;my&nbsp;wimpy&nbsp;laptop&nbsp;on&nbsp;battery&nbsp;power,&nbsp;that&nbsp;was&nbsp;around&nbsp;420.274404782.&lt;br&gt;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;cheers&lt;br&gt;lvh&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
