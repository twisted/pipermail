<tt>
&lt;br&gt;&lt;br&gt;Hello&nbsp;everyone.&amp;nbsp;&nbsp;Try&nbsp;as&nbsp;I&nbsp;might&nbsp;I&nbsp;cannot&nbsp;get&nbsp;a&nbsp;very&nbsp;simple&nbsp;example&nbsp;to<br>
run.&amp;nbsp;&nbsp;I&nbsp;basically&nbsp;want&nbsp;a&nbsp;server&nbsp;that&nbsp;accepts&nbsp;connections,&nbsp;and<br>
periodically&nbsp;issues&nbsp;messages&nbsp;to&nbsp;all&nbsp;clients.&amp;nbsp;&nbsp;The&nbsp;docs&nbsp;for&nbsp;twisted.word<br>
says&nbsp;things&nbsp;are&nbsp;in&nbsp;flux&nbsp;so&nbsp;I&nbsp;would&nbsp;rather&nbsp;avoid&nbsp;that&nbsp;and&nbsp;just&nbsp;use&nbsp;a<br>
LineReceiver.&amp;nbsp;&nbsp;However&nbsp;right&nbsp;now&nbsp;I&nbsp;can&amp;#39;t&nbsp;get&nbsp;anything&nbsp;to&nbsp;work.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;start&nbsp;the&nbsp;server&nbsp;and&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;happy&nbsp;to&nbsp;sit&nbsp;around&nbsp;and<br>
accept&nbsp;connections.&amp;nbsp;&nbsp;However&nbsp;when&nbsp;I&nbsp;run&nbsp;the&nbsp;client&nbsp;it&nbsp;quits&nbsp;(without<br>
saying&nbsp;why)&nbsp;and&nbsp;no&nbsp;connection&nbsp;is&nbsp;made.&amp;nbsp;&nbsp;Any&nbsp;help&nbsp;would&nbsp;be&nbsp;very&nbsp;much<br>
appreciated.&amp;nbsp;&nbsp;Here&amp;#39;s&nbsp;the&nbsp;code,&nbsp;log&nbsp;messages&nbsp;below&nbsp;that.&amp;nbsp;&nbsp;Thanks!&lt;br&gt;<br>
&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;Kevin&lt;br&gt;&lt;br&gt;##############################&lt;div&nbsp;id=&quot;1euf&quot;&nbsp;class=&quot;ArwC7c&nbsp;ckChnd&quot;&gt;####################&lt;br&gt;#&nbsp;server.py&lt;br&gt;##################################################&lt;br&gt;<br>
import&nbsp;sys&amp;nbsp;&nbsp;&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;log&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;Factory&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;Protocol&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;&lt;br&gt;class&nbsp;Echo(Protocol):&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionMade(self):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Server&nbsp;connectionMade\n&amp;#39;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.numProtocols&nbsp;=&nbsp;self.factory.numProtocols+1&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;self.factory.numProtocols&nbsp;&amp;gt;&nbsp;100:&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(&amp;quot;Too&nbsp;many&nbsp;connections,&nbsp;try&nbsp;later&amp;quot;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.loseConnection()&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;connectionLost(self,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Server&nbsp;connectionLost\n&amp;#39;)&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.factory.numProtocols&nbsp;=&nbsp;self.factory.numProtocols-1&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;dataReceived(self,&nbsp;data):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Server&nbsp;dataReceived\n&amp;#39;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(data)&lt;br&gt;&lt;br&gt;&lt;br&gt;factory&nbsp;=&nbsp;Factory()&lt;br&gt;<br>
<br>
factory.protocol&nbsp;=&nbsp;Echo&lt;br&gt;&lt;br&gt;log.startLogging(file(&amp;#39;server.log&amp;#39;,&nbsp;&amp;#39;w&amp;#39;))&lt;br&gt;&lt;br&gt;sys.stderr.write(&amp;#39;Server&nbsp;starting...\n&amp;#39;)&lt;br&gt;#&nbsp;8007&nbsp;is&nbsp;the&nbsp;port&nbsp;you&nbsp;want&nbsp;to&nbsp;run&nbsp;under.&nbsp;Choose&nbsp;something&nbsp;&amp;gt;1024&lt;br&gt;reactor.listenTCP(9010,&nbsp;factory)&lt;br&gt;<br>
<br>
reactor.run()&lt;br&gt;sys.stderr.write(&amp;#39;Server&nbsp;done\n&amp;#39;)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;##################################################&lt;br&gt;<br>
#&nbsp;client.py&lt;br&gt;<br>
##################################################&lt;br&gt;<br>
<br>
import&nbsp;sys&amp;nbsp;&nbsp;&lt;br&gt;from&nbsp;twisted.internet&nbsp;import&nbsp;reactor&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;log&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;Protocol&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;ClientCreator&lt;br&gt;from&nbsp;twisted.internet.protocol&nbsp;import&nbsp;ClientFactory&lt;br&gt;<br>
<br>
&lt;br&gt;class&nbsp;Greeter(Protocol):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;sendMessage(self,&nbsp;msg):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Client&nbsp;sendMessage\n&amp;#39;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;self.transport.write(&amp;quot;MESSAGE&nbsp;%s\n&amp;quot;&nbsp;%&nbsp;msg)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;class&nbsp;GreeterClientFactory(ClientFactory):&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;startedConnecting(self,&nbsp;connector):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Client&nbsp;startedConnecting\n&amp;#39;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;buildProtocol(self,&nbsp;addr):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Client&nbsp;connected\n&amp;#39;)&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;g&nbsp;=&nbsp;Greeter()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.callLater(1,&nbsp;g.sendMessage,&nbsp;&amp;quot;This&nbsp;is&nbsp;sent&nbsp;in&nbsp;1&nbsp;second&amp;quot;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.callLater(2,&nbsp;g.sendMessage,&nbsp;&amp;quot;This&nbsp;is&nbsp;sent&nbsp;in&nbsp;2&nbsp;second&amp;quot;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;reactor.callLater(3,&nbsp;g.sendMessage,&nbsp;&amp;quot;This&nbsp;is&nbsp;sent&nbsp;in&nbsp;3&nbsp;second&amp;quot;)&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;Greeter()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;clientConnectionLost(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Client&nbsp;connectionLost:&nbsp;&amp;#39;&nbsp;+&nbsp;reason&nbsp;+&nbsp;&amp;#39;\n&amp;#39;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;def&nbsp;clientConnectionFailed(self,&nbsp;connector,&nbsp;reason):&lt;br&gt;<br>
<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write(&amp;#39;Client&nbsp;connectionFailed:&nbsp;&amp;#39;&nbsp;+&nbsp;reason&nbsp;+&nbsp;&amp;#39;\n&amp;#39;)&lt;br&gt;&lt;br&gt;&lt;br&gt;log.startLogging(file(&amp;#39;client.log&amp;#39;,&nbsp;&amp;#39;w&amp;#39;))&lt;br&gt;&lt;br&gt;sys.stderr.write(&amp;#39;Client&nbsp;connecting...\n&amp;#39;)&lt;br&gt;&lt;br&gt;<br>
f&nbsp;=&nbsp;GreeterClientFactory()&lt;br&gt;<br>
reactor.connectTCP(&amp;quot;localhost&amp;quot;,&nbsp;9010,&nbsp;f)&lt;br&gt;&lt;br&gt;sys.stderr.write(&amp;#39;Client&nbsp;done\n&amp;#39;)&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;##################################################&lt;br&gt;<br>
#&nbsp;client.log&lt;br&gt;##################################################&lt;br&gt;<br>
2008/04/28&nbsp;12:38&nbsp;-0400&nbsp;[-]&nbsp;Log&nbsp;opened.&lt;br&gt;2008/04/28&nbsp;12:38&nbsp;-0400&nbsp;[-]&nbsp;Client&nbsp;connecting...&lt;br&gt;2008/04/28&nbsp;12:38&nbsp;-0400&nbsp;[-]&nbsp;Starting&nbsp;factory&nbsp;&amp;lt;__main__.GreeterClientFactory&nbsp;instance&nbsp;at&nbsp;0x8354d8c&amp;gt;&lt;br&gt;2008/04/28&nbsp;12:38&nbsp;-0400&nbsp;[-]&nbsp;Client&nbsp;startedConnecting&lt;br&gt;<br>
<br>
2008/04/28&nbsp;12:38&nbsp;-0400&nbsp;[-]&nbsp;Client&nbsp;done&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;##################################################&lt;br&gt;<br>
<br>
#&nbsp;server.log&lt;br&gt;<br>
##################################################&lt;br&gt;2008/04/28&nbsp;14:41&nbsp;-0400&nbsp;[-]&nbsp;Log&nbsp;opened.&lt;br&gt;2008/04/28&nbsp;14:41&nbsp;-0400&nbsp;[-]&nbsp;Server&nbsp;starting...&lt;br&gt;2008/04/28&nbsp;14:41&nbsp;-0400&nbsp;[-]&nbsp;twisted.internet.protocol.Factory&nbsp;starting&nbsp;on&nbsp;9010&lt;br&gt;<br>
<br>
2008/04/28&nbsp;14:41&nbsp;-0400&nbsp;[-]&nbsp;Starting&nbsp;factory&nbsp;&amp;lt;twisted.internet.protocol.Factory&nbsp;instance&nbsp;at&nbsp;0xb7cc18cc&amp;gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
