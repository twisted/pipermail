<tt>
&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&lt;head&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&gt;body&nbsp;{&nbsp;font-family:'Times&nbsp;New&nbsp;Roman';&nbsp;font-size:13px}&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;On&nbsp;Mon,&nbsp;02&nbsp;Jul&nbsp;2012&nbsp;19:31:14&nbsp;-0500,&nbsp;Dan&nbsp;Stromberg&nbsp;&amp;lt;drsalists@gmail.com&amp;gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0.80ex;&nbsp;border-left:&nbsp;#0000FF&nbsp;2px&nbsp;solid;&nbsp;padding-left:&nbsp;1ex&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Jun&nbsp;28,&nbsp;2012&nbsp;at&nbsp;9:40&nbsp;PM,&nbsp;Dan&nbsp;Stromberg&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:drsalists@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;drsalists@gmail.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;&lt;br&gt;&lt;/div&gt;Hi.&lt;br&gt;&lt;br&gt;I'm&nbsp;a&nbsp;Twisted&nbsp;neophyte,&nbsp;but&nbsp;I've&nbsp;been&nbsp;using&nbsp;Python&nbsp;a&nbsp;long&nbsp;time.&lt;br&gt;&lt;br&gt;My&nbsp;question:&lt;br&gt;<br>
&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;of&nbsp;producing&nbsp;a&nbsp;deferred&nbsp;<br>
graph&nbsp;in&nbsp;a&nbsp;Python&nbsp;program&nbsp;at&nbsp;a&nbsp;given&nbsp;point&nbsp;in&nbsp;time?&nbsp;&amp;nbsp;Perhaps&nbsp;something&nbsp;<br>
based&nbsp;on&nbsp;graphviz&nbsp;and&nbsp;objgraph.py?&nbsp;&amp;nbsp;We're&nbsp;able&nbsp;to&nbsp;detect&nbsp;when&nbsp;we're&nbsp;<br>
having&nbsp;the&nbsp;problem,&nbsp;we&nbsp;just&nbsp;don't&nbsp;(yet)&nbsp;know&nbsp;its&nbsp;cause.&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;&lt;br&gt;Background:&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;I'm&nbsp;looking&nbsp;at&nbsp;some&nbsp;code&nbsp;with&nbsp;a&nbsp;bit&nbsp;over&nbsp;200&nbsp;addCallback/addErrback/addCallbacks&nbsp;in&nbsp;it.&lt;br&gt;&lt;br&gt;It's&nbsp;got&nbsp;a&nbsp;problem&nbsp;where&nbsp;sometimes&nbsp;the&nbsp;deferreds&nbsp;seem&nbsp;to&nbsp;just&nbsp;stop&nbsp;executing.&nbsp;&amp;nbsp;I&nbsp;see&nbsp;in&nbsp;the&nbsp;doc&nbsp;it&nbsp;says&nbsp;that&nbsp;this&nbsp;can&nbsp;happen&nbsp;if&nbsp;you've&nbsp;neglected&nbsp;to&nbsp;add&nbsp;an&nbsp;errback&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;of&nbsp;your&nbsp;deferred&nbsp;chains.&lt;br&gt;<br>
<br>
&lt;br&gt;One&nbsp;of&nbsp;the&nbsp;people&nbsp;who's&nbsp;been&nbsp;here&nbsp;longer&nbsp;than&nbsp;me,&nbsp;indicated&nbsp;that&nbsp;he's&nbsp;gone&nbsp;through&nbsp;the&nbsp;code&nbsp;looking&nbsp;for&nbsp;such&nbsp;issues,&nbsp;and&nbsp;didn't&nbsp;find&nbsp;any.&nbsp;&amp;nbsp;This&nbsp;suggests&nbsp;to&nbsp;me&nbsp;that&nbsp;either&nbsp;there's&nbsp;some&nbsp;other&nbsp;cause,&nbsp;or&nbsp;that&nbsp;it&nbsp;really&nbsp;is&nbsp;a&nbsp;deferred&nbsp;without&nbsp;a&nbsp;final&nbsp;errback,&nbsp;but&nbsp;it's&nbsp;hidden&nbsp;in&nbsp;a&nbsp;dark&nbsp;corner&nbsp;of&nbsp;the&nbsp;code&nbsp;somewhere.&lt;br&gt;<br>
<br>
&lt;/div&gt;&lt;br&gt;&lt;br&gt;Thanks!&lt;br&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;I&nbsp;put&nbsp;together&nbsp;something&nbsp;to&nbsp;do&nbsp;a&nbsp;single-point-in-time&nbsp;graph&nbsp;(as&nbsp;distorted/delayed&nbsp;by&nbsp;the&nbsp;time&nbsp;it&nbsp;takes&nbsp;to&nbsp;go&nbsp;through&nbsp;all&nbsp;the&nbsp;objects&nbsp;in&nbsp;the&nbsp;python&nbsp;interpreter)&nbsp;of&nbsp;deferreds.&amp;nbsp;&nbsp;Please&nbsp;find&nbsp;it&nbsp;below&nbsp;as&nbsp;a&nbsp;shar&nbsp;archive&nbsp;(wow,&nbsp;someone&nbsp;still&nbsp;does&nbsp;those?&amp;nbsp;&amp;nbsp;&nbsp;Yeah,&nbsp;sometimes)&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cool&nbsp;stuff&nbsp;-&nbsp;but&nbsp;could&nbsp;you&nbsp;use&nbsp;an&nbsp;ordinary&nbsp;archive&nbsp;format?&nbsp;Asking&nbsp;the&nbsp;whole&nbsp;mailing&nbsp;list&nbsp;to&nbsp;run&nbsp;gobs&nbsp;of&nbsp;shell&nbsp;code&nbsp;is....&nbsp;I&nbsp;dunno.&nbsp;not&nbsp;something&nbsp;I'm&nbsp;going&nbsp;to&nbsp;bother&nbsp;with&nbsp;even&nbsp;if&nbsp;I&nbsp;would&nbsp;like&nbsp;to.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-E&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;0.80ex;&nbsp;border-left:&nbsp;#0000FF&nbsp;2px&nbsp;solid;&nbsp;padding-left:&nbsp;1ex&quot;&gt;&amp;nbsp;&nbsp;Anyway,&nbsp;given&nbsp;a&nbsp;tree&nbsp;of&nbsp;deferreds,&nbsp;this&nbsp;will&nbsp;produce&nbsp;a&nbsp;whatever.dot&nbsp;file,&nbsp;which&nbsp;can&nbsp;be&nbsp;fed&nbsp;to&nbsp;graphviz'&nbsp;&quot;dot&nbsp;-Tpdf&nbsp;whatever.dot&nbsp;&amp;gt;&nbsp;whatever.pdf&quot;,&nbsp;and&nbsp;the&nbsp;pdf&nbsp;has&nbsp;a&nbsp;rather&nbsp;nice-looking&nbsp;graph&nbsp;of&nbsp;the&nbsp;deferreds.&lt;br&gt;<br>
&lt;br&gt;#!/bin/sh&lt;br&gt;#&nbsp;This&nbsp;is&nbsp;a&nbsp;shell&nbsp;archive&nbsp;(produced&nbsp;by&nbsp;GNU&nbsp;sharutils&nbsp;4.11.1).&lt;br&gt;#&nbsp;To&nbsp;extract&nbsp;the&nbsp;files&nbsp;from&nbsp;this&nbsp;archive,&nbsp;save&nbsp;it&nbsp;to&nbsp;some&nbsp;FILE,&nbsp;remove&lt;br&gt;#&nbsp;everything&nbsp;before&nbsp;the&nbsp;`#!/bin/sh'&nbsp;line&nbsp;above,&nbsp;then&nbsp;type&nbsp;`sh&nbsp;FILE'.&lt;br&gt;<br>
#&lt;br&gt;lock_dir=_sh32156&lt;br&gt;#&nbsp;Made&nbsp;on&nbsp;2012-07-02&nbsp;21:48&nbsp;UTC&nbsp;by&nbsp;&amp;lt;stromberg@aw50&amp;gt;.&lt;br&gt;#&nbsp;Source&nbsp;directory&nbsp;was&nbsp;`/home/stromberg/src/twisted-experiments'.&lt;br&gt;#&lt;br&gt;#&nbsp;Existing&nbsp;files&nbsp;will&nbsp;*not*&nbsp;be&nbsp;overwritten,&nbsp;unless&nbsp;`-c'&nbsp;is&nbsp;specified.&lt;br&gt;<br>
#&lt;br&gt;#&nbsp;This&nbsp;shar&nbsp;contains:&lt;br&gt;#&nbsp;length&nbsp;mode&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;name&lt;br&gt;#&nbsp;------&nbsp;----------&nbsp;------------------------------------------&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;2181&nbsp;-rwxr-xr-x&nbsp;deferreddump.py&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;3174&nbsp;-rwxr-xr-x&nbsp;wedgedump&lt;br&gt;#&lt;br&gt;MD5SUM=${MD5SUM-md5sum}&lt;br&gt;<br>
f=`${MD5SUM}&nbsp;--version&nbsp;|&nbsp;egrep&nbsp;'^md5sum&nbsp;.*(core|text)utils'`&lt;br&gt;test&nbsp;-n&nbsp;&quot;${f}&quot;&nbsp;&amp;amp;&amp;amp;&nbsp;md5check=true&nbsp;||&nbsp;md5check=false&lt;br&gt;${md5check}&nbsp;||&nbsp;\&lt;br&gt;&amp;nbsp;&nbsp;echo&nbsp;'Note:&nbsp;not&nbsp;verifying&nbsp;md5sums.&amp;nbsp;&nbsp;Consider&nbsp;installing&nbsp;GNU&nbsp;coreutils.'&lt;br&gt;<br>
if&nbsp;test&nbsp;&quot;X$1&quot;&nbsp;=&nbsp;&quot;X-c&quot;&lt;br&gt;then&nbsp;keep_file=''&lt;br&gt;else&nbsp;keep_file=true&lt;br&gt;fi&lt;br&gt;echo=echo&lt;br&gt;save_IFS=&quot;${IFS}&quot;&lt;br&gt;IFS=&quot;${IFS}:&quot;&lt;br&gt;gettext_dir=&lt;br&gt;locale_dir=&lt;br&gt;set_echo=false&lt;br&gt;<br>
&lt;br&gt;for&nbsp;dir&nbsp;in&nbsp;$PATH&lt;br&gt;do&lt;br&gt;&amp;nbsp;&nbsp;if&nbsp;test&nbsp;-f&nbsp;$dir/gettext&nbsp;\&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;($dir/gettext&nbsp;--version&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1)&lt;br&gt;&amp;nbsp;&nbsp;then&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;case&nbsp;`$dir/gettext&nbsp;--version&nbsp;2&amp;gt;&amp;amp;1&nbsp;|&nbsp;sed&nbsp;1q`&nbsp;in&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;*GNU*)&nbsp;gettext_dir=$dir&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;set_echo=true&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;break&nbsp;;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;esac&lt;br&gt;&amp;nbsp;&nbsp;fi&lt;br&gt;done&lt;br&gt;&lt;br&gt;if&nbsp;${set_echo}&lt;br&gt;then&lt;br&gt;&amp;nbsp;&nbsp;set_echo=false&lt;br&gt;&amp;nbsp;&nbsp;for&nbsp;dir&nbsp;in&nbsp;$PATH&lt;br&gt;&amp;nbsp;&nbsp;do&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;test&nbsp;-f&nbsp;$dir/shar&nbsp;\&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;($dir/shar&nbsp;--print-text-domain-dir&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1)&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;then&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;locale_dir=`$dir/shar&nbsp;--print-text-domain-dir`&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;set_echo=true&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;break&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;fi&lt;br&gt;&amp;nbsp;&nbsp;done&lt;br&gt;&lt;br&gt;&amp;nbsp;&nbsp;if&nbsp;${set_echo}&lt;br&gt;&amp;nbsp;&nbsp;then&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;TEXTDOMAINDIR=$locale_dir&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;export&nbsp;TEXTDOMAINDIR&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;TEXTDOMAIN=sharutils&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;export&nbsp;TEXTDOMAIN&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;echo=&quot;$gettext_dir/gettext&nbsp;-s&quot;&lt;br&gt;&amp;nbsp;&nbsp;fi&lt;br&gt;fi&lt;br&gt;IFS=&quot;$save_IFS&quot;&lt;br&gt;if&nbsp;(echo&nbsp;&quot;testing\c&quot;;&nbsp;echo&nbsp;1,2,3)&nbsp;|&nbsp;grep&nbsp;c&nbsp;&amp;gt;/dev/null&lt;br&gt;then&nbsp;if&nbsp;(echo&nbsp;-n&nbsp;test;&nbsp;echo&nbsp;1,2,3)&nbsp;|&nbsp;grep&nbsp;n&nbsp;&amp;gt;/dev/null&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;then&nbsp;shar_n=&nbsp;shar_c='&lt;br&gt;'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else&nbsp;shar_n=-n&nbsp;shar_c=&nbsp;;&nbsp;fi&lt;br&gt;else&nbsp;shar_n=&nbsp;shar_c='\c'&nbsp;;&nbsp;fi&lt;br&gt;f=shar-touch.$$&lt;br&gt;st1=200112312359.59&lt;br&gt;st2=123123592001.59&lt;br&gt;st2tr=123123592001.5&nbsp;#&nbsp;old&nbsp;SysV&nbsp;14-char&nbsp;limit&lt;br&gt;<br>
st3=1231235901&lt;br&gt;&lt;br&gt;if&nbsp;touch&nbsp;-am&nbsp;-t&nbsp;${st1}&nbsp;${f}&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;test&nbsp;!&nbsp;-f&nbsp;${st1}&nbsp;&amp;amp;&amp;amp;&nbsp;test&nbsp;-f&nbsp;${f};&nbsp;then&lt;br&gt;&amp;nbsp;&nbsp;shar_touch='touch&nbsp;-am&nbsp;-t&nbsp;$1$2$3$4$5$6.$7&nbsp;&quot;$8&quot;'&lt;br&gt;&lt;br&gt;elif&nbsp;touch&nbsp;-am&nbsp;${st2}&nbsp;${f}&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;test&nbsp;!&nbsp;-f&nbsp;${st2}&nbsp;&amp;amp;&amp;amp;&nbsp;test&nbsp;!&nbsp;-f&nbsp;${st2tr}&nbsp;&amp;amp;&amp;amp;&nbsp;test&nbsp;-f&nbsp;${f};&nbsp;then&lt;br&gt;&amp;nbsp;&nbsp;shar_touch='touch&nbsp;-am&nbsp;$3$4$5$6$1$2.$7&nbsp;&quot;$8&quot;'&lt;br&gt;&lt;br&gt;elif&nbsp;touch&nbsp;-am&nbsp;${st3}&nbsp;${f}&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&nbsp;test&nbsp;!&nbsp;-f&nbsp;${st3}&nbsp;&amp;amp;&amp;amp;&nbsp;test&nbsp;-f&nbsp;${f};&nbsp;then&lt;br&gt;&amp;nbsp;&nbsp;shar_touch='touch&nbsp;-am&nbsp;$3$4$5$6$2&nbsp;&quot;$8&quot;'&lt;br&gt;&lt;br&gt;else&lt;br&gt;&amp;nbsp;&nbsp;shar_touch=:&lt;br&gt;&amp;nbsp;&nbsp;echo&lt;br&gt;&amp;nbsp;&nbsp;${echo}&nbsp;'WARNING:&nbsp;not&nbsp;restoring&nbsp;timestamps.&amp;nbsp;&nbsp;Consider&nbsp;getting&nbsp;and&lt;br&gt;<br>
installing&nbsp;GNU&nbsp;`touch'\'',&nbsp;distributed&nbsp;in&nbsp;GNU&nbsp;coreutils...'&lt;br&gt;&amp;nbsp;&nbsp;echo&lt;br&gt;fi&lt;br&gt;rm&nbsp;-f&nbsp;${st1}&nbsp;${st2}&nbsp;${st2tr}&nbsp;${st3}&nbsp;${f}&lt;br&gt;#&lt;br&gt;if&nbsp;test&nbsp;!&nbsp;-d&nbsp;${lock_dir}&nbsp;;&nbsp;then&nbsp;:&lt;br&gt;else&nbsp;${echo}&nbsp;&quot;lock&nbsp;directory&nbsp;${lock_dir}&nbsp;exists&quot;&lt;br&gt;<br>
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;exit&nbsp;1&lt;br&gt;fi&lt;br&gt;if&nbsp;mkdir&nbsp;${lock_dir}&lt;br&gt;then&nbsp;${echo}&nbsp;&quot;x&nbsp;-&nbsp;created&nbsp;lock&nbsp;directory&nbsp;${lock_dir}.&quot;&lt;br&gt;else&nbsp;${echo}&nbsp;&quot;x&nbsp;-&nbsp;failed&nbsp;to&nbsp;create&nbsp;lock&nbsp;directory&nbsp;${lock_dir}.&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;exit&nbsp;1&lt;br&gt;fi&lt;br&gt;#&nbsp;=============&nbsp;deferreddump.py&nbsp;==============&lt;br&gt;<br>
if&nbsp;test&nbsp;-n&nbsp;&quot;${keep_file}&quot;&nbsp;&amp;amp;&amp;amp;&nbsp;test&nbsp;-f&nbsp;'deferreddump.py'&lt;br&gt;then&lt;br&gt;${echo}&nbsp;&quot;x&nbsp;-&nbsp;SKIPPING&nbsp;deferreddump.py&nbsp;(file&nbsp;already&nbsp;exists)&quot;&lt;br&gt;else&lt;br&gt;${echo}&nbsp;&quot;x&nbsp;-&nbsp;extracting&nbsp;deferreddump.py&nbsp;(text)&quot;&lt;br&gt;<br>
&amp;nbsp;&nbsp;sed&nbsp;'s/^X//'&nbsp;&amp;lt;&amp;lt;&nbsp;'SHAR_EOF'&nbsp;&amp;gt;&nbsp;'deferreddump.py'&nbsp;&amp;amp;&amp;amp;&lt;br&gt;#!/usr/bin/python&lt;br&gt;X&lt;br&gt;#&nbsp;See&nbsp;also:&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/ticket/3858&quot;&gt;http://twistedmatrix.com/trac/ticket/3858&lt;/a&gt;&lt;br&gt;<br>
#&nbsp;and:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/trac/ticket/1402&quot;&gt;http://twistedmatrix.com/trac/ticket/1402&lt;/a&gt;&lt;br&gt;#&nbsp;and:&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;twisted.internet.defer&nbsp;also&nbsp;exposes&nbsp;a&nbsp;setDebugging(bool)&nbsp;function&nbsp;to&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;store&nbsp;call&nbsp;stacks&nbsp;from&nbsp;creation&nbsp;and&nbsp;invocation&nbsp;in&nbsp;deferred&nbsp;objects,&lt;br&gt;<br>
#&amp;nbsp;&amp;nbsp;&nbsp;it's&nbsp;what&nbsp;I&nbsp;was&nbsp;using&nbsp;to&nbsp;try&nbsp;and&nbsp;figure&nbsp;out&nbsp;what&nbsp;was&nbsp;going&nbsp;on,&nbsp;but&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;it's&nbsp;not&nbsp;nearly&nbsp;as&nbsp;at-a-glance&nbsp;as&nbsp;a&nbsp;graph&nbsp;is.&lt;br&gt;X&lt;br&gt;import&nbsp;gc&lt;br&gt;import&nbsp;sys&lt;br&gt;X&lt;br&gt;import&nbsp;twisted.internet.defer&lt;br&gt;X&lt;br&gt;def&nbsp;escape(callback_type,&nbsp;obj):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;dummy&nbsp;=&nbsp;callback_type&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;'%s'&nbsp;%&nbsp;(str(obj).replace('&nbsp;',&nbsp;'_').replace(':',&nbsp;'').replace('&amp;lt;',&nbsp;'').replace('&amp;gt;',&nbsp;''),&nbsp;)&lt;br&gt;X&lt;br&gt;def&nbsp;dump(outfile&nbsp;=&nbsp;sys.stdout):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('digraph&nbsp;deferred_digraph&nbsp;{\n')&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;obj&nbsp;in&nbsp;gc.get_objects():&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;isinstance(obj,&nbsp;twisted.internet.defer.Deferred):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;len_callbacks&nbsp;=&nbsp;len(obj.callbacks)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;obj.callbacks:&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('\t%s&nbsp;-&amp;gt;&nbsp;%s\n'&nbsp;%&nbsp;(escape('',&nbsp;obj),&nbsp;escape('',&nbsp;obj.callbacks[0][0][0])))&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('\t%s&nbsp;-&amp;gt;&nbsp;%s\n'&nbsp;%&nbsp;(escape('',&nbsp;obj),&nbsp;escape('',&nbsp;obj.callbacks[0][1][0])))&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;for&nbsp;callbackpairno&nbsp;in&nbsp;range(len_callbacks&nbsp;-&nbsp;1):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;current_callback&nbsp;=&nbsp;obj.callbacks[callbackpairno][0]&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;current_errback&nbsp;=&nbsp;obj.callbacks[callbackpairno][1]&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;current_callback_desc&nbsp;=&nbsp;current_callback[0]&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;current_errback_desc&nbsp;=&nbsp;current_errback[0]&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;next_callback&nbsp;=&nbsp;obj.callbacks[callbackpairno&nbsp;+&nbsp;1][0]&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;next_errback&nbsp;=&nbsp;obj.callbacks[callbackpairno&nbsp;+&nbsp;1][1]&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;next_callback_desc&nbsp;=&nbsp;next_callback[0]&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;next_errback_desc&nbsp;=&nbsp;next_errback[0]&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('\t%s&nbsp;-&amp;gt;&nbsp;%s;\n'&nbsp;%&nbsp;(escape('callback',&nbsp;current_callback_desc),&nbsp;escape('callback',&nbsp;next_callback_desc)))&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('\t%s&nbsp;-&amp;gt;&nbsp;%s;\n'&nbsp;%&nbsp;(escape('errback',&nbsp;current_errback_desc),&nbsp;escape('errback',&nbsp;next_errback_desc)))&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('\t%s&nbsp;-&amp;gt;&nbsp;%s;\n'&nbsp;%&nbsp;(escape('callback',&nbsp;current_callback_desc),&nbsp;escape('errback',&nbsp;next_errback_desc)))&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('\t%s&nbsp;-&amp;gt;&nbsp;%s;\n'&nbsp;%&nbsp;(escape('errback',&nbsp;current_errback_desc),&nbsp;escape('callback',&nbsp;next_callback_desc)))&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;outfile.write('}\n')&lt;br&gt;X&lt;br&gt;X&lt;br&gt;SHAR_EOF&lt;br&gt;<br>
&amp;nbsp;&nbsp;(set&nbsp;20&nbsp;12&nbsp;06&nbsp;29&nbsp;18&nbsp;02&nbsp;00&nbsp;'deferreddump.py'&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;eval&nbsp;&quot;${shar_touch}&quot;)&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;&amp;nbsp;&nbsp;chmod&nbsp;0755&nbsp;'deferreddump.py'&lt;br&gt;if&nbsp;test&nbsp;$?&nbsp;-ne&nbsp;0&lt;br&gt;then&nbsp;${echo}&nbsp;&quot;restore&nbsp;of&nbsp;deferreddump.py&nbsp;failed&quot;&lt;br&gt;<br>
fi&lt;br&gt;&amp;nbsp;&nbsp;if&nbsp;${md5check}&lt;br&gt;&amp;nbsp;&nbsp;then&nbsp;(&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;${MD5SUM}&nbsp;-c&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1&nbsp;||&nbsp;${echo}&nbsp;'deferreddump.py':&nbsp;'MD5&nbsp;check&nbsp;failed'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;)&nbsp;&amp;lt;&amp;lt;&nbsp;\SHAR_EOF&lt;br&gt;45b2aed37cc2e57bc58f46a42eb2a2d4&amp;nbsp;&nbsp;deferreddump.py&lt;br&gt;<br>
SHAR_EOF&lt;br&gt;&amp;nbsp;&nbsp;else&lt;br&gt;test&nbsp;`LC_ALL=C&nbsp;wc&nbsp;-c&nbsp;&amp;lt;&nbsp;'deferreddump.py'`&nbsp;-ne&nbsp;2181&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;&amp;nbsp;&nbsp;${echo}&nbsp;&quot;restoration&nbsp;warning:&amp;nbsp;&nbsp;size&nbsp;of&nbsp;'deferreddump.py'&nbsp;is&nbsp;not&nbsp;2181&quot;&lt;br&gt;&amp;nbsp;&nbsp;fi&lt;br&gt;fi&lt;br&gt;#&nbsp;=============&nbsp;wedgedump&nbsp;==============&lt;br&gt;<br>
if&nbsp;test&nbsp;-n&nbsp;&quot;${keep_file}&quot;&nbsp;&amp;amp;&amp;amp;&nbsp;test&nbsp;-f&nbsp;'wedgedump'&lt;br&gt;then&lt;br&gt;${echo}&nbsp;&quot;x&nbsp;-&nbsp;SKIPPING&nbsp;wedgedump&nbsp;(file&nbsp;already&nbsp;exists)&quot;&lt;br&gt;else&lt;br&gt;${echo}&nbsp;&quot;x&nbsp;-&nbsp;extracting&nbsp;wedgedump&nbsp;(text)&quot;&lt;br&gt;&amp;nbsp;&nbsp;sed&nbsp;'s/^X//'&nbsp;&amp;lt;&amp;lt;&nbsp;'SHAR_EOF'&nbsp;&amp;gt;&nbsp;'wedgedump'&nbsp;&amp;amp;&amp;amp;&lt;br&gt;<br>
#!/usr/bin/python&lt;br&gt;X&lt;br&gt;#&nbsp;Unhandled&nbsp;Errors&lt;br&gt;X&lt;br&gt;#&nbsp;From&nbsp;&lt;a&nbsp;href=&quot;http://twistedmatrix.com/documents/current/core/howto/defer.html&quot;&gt;http://twistedmatrix.com/documents/current/core/howto/defer.html&lt;/a&gt;&nbsp;:&lt;br&gt;X&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;If&nbsp;a&nbsp;Deferred&nbsp;is&nbsp;garbage-collected&nbsp;with&nbsp;an&nbsp;unhandled&nbsp;error&nbsp;(i.e.&nbsp;it&lt;br&gt;<br>
#&amp;nbsp;&amp;nbsp;&nbsp;would&nbsp;call&nbsp;the&nbsp;next&nbsp;errback&nbsp;if&nbsp;there&nbsp;was&nbsp;one),&nbsp;then&nbsp;Twisted&nbsp;will&nbsp;write&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;the&nbsp;error's&nbsp;traceback&nbsp;to&nbsp;the&nbsp;log&nbsp;file.&nbsp;This&nbsp;means&nbsp;that&nbsp;you&nbsp;can&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;typically&nbsp;get&nbsp;away&nbsp;with&nbsp;not&nbsp;adding&nbsp;errbacks&nbsp;and&nbsp;still&nbsp;get&nbsp;errors&lt;br&gt;<br>
#&amp;nbsp;&amp;nbsp;&nbsp;logged.&nbsp;Be&nbsp;careful&nbsp;though;&nbsp;if&nbsp;you&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;Deferred&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;around,&nbsp;preventing&nbsp;it&nbsp;from&nbsp;being&nbsp;garbage-collected,&nbsp;then&nbsp;you&nbsp;may&nbsp;never&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;see&nbsp;the&nbsp;error&nbsp;(and&nbsp;your&nbsp;callbacks&nbsp;will&nbsp;mysteriously&nbsp;seem&nbsp;to&nbsp;have&nbsp;never&lt;br&gt;<br>
#&amp;nbsp;&amp;nbsp;&nbsp;been&nbsp;called).&nbsp;If&nbsp;unsure,&nbsp;you&nbsp;should&nbsp;explicitly&nbsp;add&nbsp;an&nbsp;errback&nbsp;after&lt;br&gt;#&amp;nbsp;&amp;nbsp;&nbsp;your&nbsp;callbacks,&nbsp;even&nbsp;if&nbsp;all&nbsp;you&nbsp;do&nbsp;is:&lt;br&gt;X&lt;br&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;Make&nbsp;sure&nbsp;errors&nbsp;get&nbsp;logged&lt;br&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;from&nbsp;twisted.python&nbsp;import&nbsp;log&lt;br&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;d.addErrback(log.err)&lt;br&gt;<br>
X&lt;br&gt;import&nbsp;sys&lt;br&gt;#mport&nbsp;time&lt;br&gt;X&lt;br&gt;import&nbsp;twisted.internet.defer&lt;br&gt;import&nbsp;twisted.python&lt;br&gt;X&lt;br&gt;import&nbsp;deferreddump&lt;br&gt;X&lt;br&gt;def&nbsp;get_deferred():&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;twisted.internet.defer.succeed(1)&lt;br&gt;X&lt;br&gt;def&nbsp;cb1(value):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb2(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#raise&nbsp;ValueError&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb3(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb4(value):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb5(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb6(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb7(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;cb8(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;print&nbsp;value&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;value&nbsp;*&nbsp;2&lt;br&gt;X&lt;br&gt;def&nbsp;eb1(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb2(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb3(value):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb4(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb5(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb6(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb7(value):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;eb8(value):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;twisted.python.log.err()&lt;br&gt;X&lt;br&gt;def&nbsp;arbitrary_function(add_final_log):&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred&nbsp;=&nbsp;get_deferred()&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;#&nbsp;apparently&nbsp;we&nbsp;can&nbsp;use&nbsp;the&nbsp;same&nbsp;callback&nbsp;multiple&nbsp;times&nbsp;in&nbsp;the&nbsp;same&nbsp;deferred&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;first_deferred&nbsp;=&nbsp;deferred.addCallback(cb1)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;first_deferred.pause()&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb1,&nbsp;eb1)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb2,&nbsp;eb2)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb3,&nbsp;eb3)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb4,&nbsp;eb4)&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb5,&nbsp;eb5)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb6,&nbsp;eb6)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb7,&nbsp;eb7)&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;with&nbsp;open('t.dot',&nbsp;'w')&nbsp;as&nbsp;file_:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferreddump.dump(file_)&lt;br&gt;X&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;first_deferred.unpause()&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;add_final_log:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallbacks(cb4,&nbsp;twisted.python.log.err)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred.addCallback(cb4)&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;return&nbsp;deferred&lt;br&gt;X&lt;br&gt;def&nbsp;usage(retval):&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write('Usage:&nbsp;%s&nbsp;--add-final-log\n'&nbsp;%&nbsp;sys.argv[0])&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.exit(retval)&lt;br&gt;X&lt;br&gt;def&nbsp;main():&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;add_final_log&nbsp;=&nbsp;False&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;while&nbsp;sys.argv[1:]:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;if&nbsp;sys.argv[1]&nbsp;==&nbsp;'--add-final-log':&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;add_final_log&nbsp;=&nbsp;True&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;elif&nbsp;sys.argv[1]&nbsp;in&nbsp;[&nbsp;'-h',&nbsp;'--help'&nbsp;]:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;usage(0)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;else:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.stderr.write('%s:&nbsp;Unrecognized&nbsp;option:&nbsp;%s\n'&nbsp;%&nbsp;(sys.argv[0],&nbsp;sys.argv[1]))&lt;br&gt;<br>
X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;usage(1)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;del&nbsp;sys.argv[1]&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;deferred&nbsp;=&nbsp;arbitrary_function(add_final_log)&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;with&nbsp;open('/dev/null',&nbsp;'w')&nbsp;as&nbsp;file_:&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;file_.write(str(deferred))&lt;br&gt;X&lt;br&gt;X&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;sys.exit(0)&lt;br&gt;<br>
X&lt;br&gt;main()&lt;br&gt;X&lt;br&gt;SHAR_EOF&lt;br&gt;&amp;nbsp;&nbsp;(set&nbsp;20&nbsp;12&nbsp;07&nbsp;02&nbsp;21&nbsp;46&nbsp;02&nbsp;'wedgedump'&lt;br&gt;&amp;nbsp;&amp;nbsp;&nbsp;eval&nbsp;&quot;${shar_touch}&quot;)&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;&amp;nbsp;&nbsp;chmod&nbsp;0755&nbsp;'wedgedump'&lt;br&gt;if&nbsp;test&nbsp;$?&nbsp;-ne&nbsp;0&lt;br&gt;then&nbsp;${echo}&nbsp;&quot;restore&nbsp;of&nbsp;wedgedump&nbsp;failed&quot;&lt;br&gt;<br>
fi&lt;br&gt;&amp;nbsp;&nbsp;if&nbsp;${md5check}&lt;br&gt;&amp;nbsp;&nbsp;then&nbsp;(&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;${MD5SUM}&nbsp;-c&nbsp;&amp;gt;/dev/null&nbsp;2&amp;gt;&amp;amp;1&nbsp;||&nbsp;${echo}&nbsp;'wedgedump':&nbsp;'MD5&nbsp;check&nbsp;failed'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;)&nbsp;&amp;lt;&amp;lt;&nbsp;\SHAR_EOF&lt;br&gt;d526664fcf63762f768303af91a74a5f&amp;nbsp;&nbsp;wedgedump&lt;br&gt;<br>
SHAR_EOF&lt;br&gt;&amp;nbsp;&nbsp;else&lt;br&gt;test&nbsp;`LC_ALL=C&nbsp;wc&nbsp;-c&nbsp;&amp;lt;&nbsp;'wedgedump'`&nbsp;-ne&nbsp;3174&nbsp;&amp;amp;&amp;amp;&nbsp;\&lt;br&gt;&amp;nbsp;&nbsp;${echo}&nbsp;&quot;restoration&nbsp;warning:&amp;nbsp;&nbsp;size&nbsp;of&nbsp;'wedgedump'&nbsp;is&nbsp;not&nbsp;3174&quot;&lt;br&gt;&amp;nbsp;&nbsp;fi&lt;br&gt;fi&lt;br&gt;if&nbsp;rm&nbsp;-fr&nbsp;${lock_dir}&lt;br&gt;then&nbsp;${echo}&nbsp;&quot;x&nbsp;-&nbsp;removed&nbsp;lock&nbsp;directory&nbsp;${lock_dir}.&quot;&lt;br&gt;<br>
else&nbsp;${echo}&nbsp;&quot;x&nbsp;-&nbsp;failed&nbsp;to&nbsp;remove&nbsp;lock&nbsp;directory&nbsp;${lock_dir}.&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&nbsp;exit&nbsp;1&lt;br&gt;fi&lt;br&gt;exit&nbsp;0&lt;br&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;id=&quot;M2Signature&quot;&gt;&lt;div&gt;--&nbsp;&lt;/div&gt;&lt;div&gt;Using&nbsp;Opera's&nbsp;revolutionary&nbsp;email&nbsp;client:&nbsp;&lt;a&nbsp;href=&quot;http://www.opera.com/mail/&quot;&gt;http://www.opera.com/mail/&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
