<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Nov&nbsp;19,&nbsp;2015&nbsp;at&nbsp;4:19&nbsp;PM,&nbsp;Tom&nbsp;Boland&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:tom@t0mb.net&quot;&nbsp;target=&quot;_blank&quot;&gt;tom@t0mb.net&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;again&nbsp;for&nbsp;this. &nbsp;It&#39;s&nbsp;really&nbsp;useful. &nbsp;It&nbsp;turns&nbsp;out&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;delimiter&nbsp;is&nbsp;a&nbsp;plain&nbsp;old&nbsp;\n. &nbsp;Who&nbsp;knows&nbsp;how&nbsp;consistent&nbsp;this&nbsp;will&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;between&nbsp;different&nbsp;policy&nbsp;daemons,&nbsp;I&nbsp;don&#39;t&nbsp;know!&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;check&nbsp;the&nbsp;Postfix&nbsp;docs&nbsp;for&nbsp;that.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Now,&nbsp;this&nbsp;isn&#39;t&nbsp;a&nbsp;working&nbsp;example,&nbsp;it&#39;s&nbsp;just&nbsp;the&nbsp;minimum&nbsp;that&nbsp;will<br>
&nbsp;&nbsp;&nbsp;&nbsp;demonstrate&nbsp;my&nbsp;idea. &nbsp;I&nbsp;just&nbsp;wonder&nbsp;if&nbsp;what&nbsp;I&#39;ve&nbsp;done&nbsp;with&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;DeferredQueue&nbsp;is&nbsp;sane. &nbsp;If&nbsp;I&nbsp;return&nbsp;the&nbsp;.get()&nbsp;entry&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;DeferredQueue&nbsp;when&nbsp;doing&nbsp;the&nbsp;request,&nbsp;and&nbsp;then&nbsp;do&nbsp;a&nbsp;put()&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;lineReceived,&nbsp;am&nbsp;I&nbsp;guaranteeing&nbsp;that&nbsp;I&nbsp;will&nbsp;get&nbsp;my&nbsp;results&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;correct&nbsp;order?&nbsp;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;DeferredQueue&nbsp;is&nbsp;a&nbsp;nice&nbsp;approach:&nbsp;it&nbsp;ensures&nbsp;the&nbsp;get()&nbsp;results&nbsp;come&nbsp;out&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;the&nbsp;put()&nbsp;calls.&lt;br&gt;&lt;br&gt;The&nbsp;key&nbsp;question&nbsp;is&nbsp;whether&nbsp;or&nbsp;not&nbsp;the&nbsp;server&nbsp;handles&nbsp;multiple&nbsp;outstanding&nbsp;requests&nbsp;within&nbsp;the&nbsp;same&nbsp;connection.&nbsp;Given&nbsp;your&nbsp;informal&nbsp;protocol&nbsp;description,&nbsp;if&nbsp;the&nbsp;server&nbsp;supports&nbsp;it,&nbsp;it&nbsp;seems&nbsp;the&nbsp;responses&nbsp;must&nbsp;come&nbsp;back&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;the&nbsp;requests&nbsp;were&nbsp;sent,&nbsp;otherwise&nbsp;there&nbsp;is&nbsp;apparently&nbsp;no&nbsp;way&nbsp;to&nbsp;relate&nbsp;them;&nbsp;that&nbsp;being&nbsp;the&nbsp;case,&nbsp;what&#39;s&nbsp;the&nbsp;advantage&nbsp;of&nbsp;pushing&nbsp;more&nbsp;than&nbsp;one&nbsp;request&nbsp;at&nbsp;a&nbsp;time&nbsp;if&nbsp;one&nbsp;slow&nbsp;request/response&nbsp;&quot;transaction&quot;&nbsp;will&nbsp;delay&nbsp;a&nbsp;subsequent&nbsp;fast&nbsp;request/response&nbsp;&quot;transaction&quot;?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;variation&nbsp;of&nbsp;this,&nbsp;assuming&nbsp;the&nbsp;server&nbsp;only&nbsp;handles&nbsp;one&nbsp;outstanding&nbsp;request&nbsp;at&nbsp;a&nbsp;time&nbsp;per&nbsp;connection,&nbsp;could&nbsp;be&nbsp;a&nbsp;protocol&nbsp;implementation&nbsp;that&nbsp;would&nbsp;queue&nbsp;requests&nbsp;ensuring&nbsp;only&nbsp;one&nbsp;was&nbsp;sent&nbsp;at&nbsp;a&nbsp;time:&nbsp;this&nbsp;might&nbsp;provide&nbsp;a&nbsp;cleaner&nbsp;client&nbsp;side&nbsp;API.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;PS:&nbsp;My&nbsp;references&nbsp;to&nbsp;&quot;Postfix&nbsp;docs&quot;&nbsp;might&nbsp;need&nbsp;to&nbsp;be&nbsp;replaced&nbsp;by&nbsp;&quot;your&nbsp;policy&nbsp;server&nbsp;docs&quot;&nbsp;which,&nbsp;hopefully,&nbsp;will&nbsp;match&nbsp;Postfix&#39;s...&nbsp;(you&nbsp;would&nbsp;know&nbsp;that)&nbsp;:)&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;br&gt;--&lt;br&gt;&lt;/div&gt;&lt;div&gt;exvito&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
