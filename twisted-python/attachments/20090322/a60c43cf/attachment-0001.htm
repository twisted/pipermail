<tt>
We&nbsp;also&nbsp;had&nbsp;a&nbsp;similar&nbsp;problem&nbsp;like&nbsp;this&nbsp;on&nbsp;one&nbsp;of&nbsp;our&nbsp;long&nbsp;running&nbsp;servers&nbsp;although&nbsp;I&nbsp;didn&amp;#39;t&nbsp;find&nbsp;some&nbsp;time&nbsp;to&nbsp;archive&nbsp;the&nbsp;logs.&nbsp;I&amp;#39;m&nbsp;not&nbsp;sure&nbsp;if&nbsp;it&amp;#39;s&nbsp;related;&nbsp;but&nbsp;I&nbsp;can&nbsp;see&nbsp;clearly&nbsp;that&nbsp;you&amp;#39;re&nbsp;using&nbsp;python2.4&nbsp;and&nbsp;it&nbsp;has&nbsp;some&nbsp;funky&nbsp;issues&nbsp;with&nbsp;its&nbsp;memory&nbsp;management&nbsp;(&lt;a&nbsp;href=&quot;http://evanjones.ca/python-memory-part2.html&quot;&gt;http://evanjones.ca/python-memory-part2.html&lt;/a&gt;).&lt;br&gt;<br>
&lt;br&gt;We&nbsp;don&amp;#39;t&nbsp;experience&nbsp;it&nbsp;anymore&nbsp;ever&nbsp;since&nbsp;we&nbsp;upgraded&nbsp;to&nbsp;python2.5.&nbsp;&lt;br&gt;&lt;br&gt;---&lt;br&gt;Alvin&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Mar&nbsp;22,&nbsp;2009&nbsp;at&nbsp;11:10&nbsp;PM,&nbsp;Christopher&nbsp;Armstrong&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:radix@twistedmatrix.com&quot;&gt;radix@twistedmatrix.com&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;margin:&nbsp;0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;&nbsp;padding-left:&nbsp;1ex;&quot;&gt;&lt;div&nbsp;class=&quot;im&quot;&gt;On&nbsp;Sun,&nbsp;Mar&nbsp;22,&nbsp;2009&nbsp;at&nbsp;10:32&nbsp;AM,&nbsp;Itamar&nbsp;Shtull-Trauring&lt;br&gt;<br>
&amp;lt;&lt;a&nbsp;href=&quot;mailto:itamar@itamarst.org&quot;&gt;itamar@itamarst.org&lt;/a&gt;&amp;gt;&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&nbsp;On&nbsp;Sat,&nbsp;2009-03-21&nbsp;at&nbsp;20:02&nbsp;-0700,&nbsp;Alec&nbsp;Matusis&nbsp;wrote:&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;File&nbsp;&amp;quot;/nail/live/im/myserv/service.py&amp;quot;,&nbsp;line&nbsp;1199,&nbsp;in&nbsp;logout&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if&nbsp;self.nick&nbsp;in&nbsp;session.sellers:&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;exceptions.AttributeError:&nbsp;WLResultSet&nbsp;instance&nbsp;has&nbsp;no&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;attribute&nbsp;&amp;#39;sellers&amp;#39;&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;This&nbsp;last&nbsp;error&nbsp;repeated&nbsp;about&nbsp;1000&nbsp;times&nbsp;for&nbsp;different&nbsp;clients,&nbsp;after&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;which&nbsp;the&nbsp;segfault&nbsp;occurred.&lt;br&gt;<br>
&amp;gt;&amp;gt;&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;The&nbsp;problem&nbsp;is,&nbsp;that&nbsp;“session”&nbsp;is&nbsp;an&nbsp;instance&nbsp;of&nbsp;a&nbsp;Session&nbsp;class&nbsp;that&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;is&nbsp;defined&nbsp;in&nbsp;the&nbsp;code,&nbsp;it&nbsp;is&nbsp;NEITHER&nbsp;a&nbsp;Deferred&nbsp;NOR&nbsp;an&nbsp;instance&nbsp; of&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;WLResultSet&nbsp;class-&nbsp;these&nbsp;are&nbsp;completely&nbsp;different&nbsp;classes,&nbsp;and&nbsp;there’s&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;no&nbsp;possible&nbsp;way&nbsp;in&nbsp;the&nbsp;code&nbsp;for&nbsp;variable&nbsp;session&nbsp;to&nbsp;become&nbsp;an&nbsp;instance&lt;br&gt;<br>
&amp;gt;&amp;gt;&nbsp;of&nbsp;Deferred.&lt;br&gt;<br>
&amp;gt;&lt;br&gt;<br>
&amp;gt;&nbsp;I&amp;#39;ve&nbsp;seen&nbsp;this&nbsp;happen&nbsp;-&nbsp;once.&nbsp;My&nbsp;guess&nbsp;then&nbsp;was&nbsp;memory&nbsp;corruption&nbsp;of&lt;br&gt;<br>
&amp;gt;&nbsp;some&nbsp;sort&nbsp;(somewhere&nbsp;in&nbsp;the&nbsp;C&nbsp;level).&nbsp;If&nbsp;you&nbsp;have&nbsp;any&nbsp;custom&nbsp;C&lt;br&gt;<br>
&amp;gt;&nbsp;extensions&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;try&nbsp;valgrind.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;I&amp;#39;d&nbsp;like&nbsp;to&nbsp;offer&nbsp;a&nbsp;slightly&nbsp;stronger&nbsp;suggestion&nbsp;that&nbsp;this&nbsp;segfault&nbsp;is&lt;br&gt;<br>
not&nbsp;the&nbsp;fault&nbsp;of&nbsp;any&nbsp;pure&nbsp;Python&nbsp;code&nbsp;(such&nbsp;as&nbsp;Twisted),&nbsp;but&nbsp;rather&lt;br&gt;<br>
some&nbsp;C&nbsp;extension&nbsp;that&nbsp;you&amp;#39;re&nbsp;using,&nbsp;or&nbsp;perhaps&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;Python&lt;br&gt;<br>
runtime&nbsp;itself.&nbsp;The&nbsp;weird&nbsp;attribute&nbsp;errors&nbsp;for&nbsp;the&nbsp;wrong&nbsp;classes&nbsp;are&lt;br&gt;<br>
probably&nbsp;caused&nbsp;by&nbsp;memory&nbsp;corruption&nbsp;leading&nbsp;up&nbsp;to&nbsp;the&nbsp;segfault.&lt;br&gt;<br>
&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Christopher&nbsp;Armstrong&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://radix.twistedmatrix.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://radix.twistedmatrix.com/&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://planet-if.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://planet-if.com/&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://canonical.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://canonical.com/&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
Twisted-Python&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Twisted-Python@twistedmatrix.com&quot;&gt;Twisted-Python@twistedmatrix.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&quot;&nbsp;target=&quot;_blank&quot;&gt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.alvinatorsplayground.blogspot.com/&quot;&gt;http://www.alvinatorsplayground.blogspot.com/&lt;/a&gt;&lt;br&gt;<br>

</tt>
