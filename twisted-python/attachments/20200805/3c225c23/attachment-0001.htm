<tt>
&lt;!DOCTYPE&nbsp;html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;style&nbsp;type=&quot;text/css&quot;&gt;p.MsoNormal,p.MsoNoSpacing{margin:0}<br>
p.MsoNormal,p.MsoNoSpacing{margin:0}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;5,&nbsp;2020,&nbsp;at&nbsp;3:59&nbsp;PM,&nbsp;Rob&nbsp;Gormley&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;id=&quot;qt&quot;&nbsp;style=&quot;&quot;&gt;&lt;div&nbsp;name=&quot;messageBodySection&quot;&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;div&gt;But&nbsp;I&nbsp;tried&nbsp;with&nbsp;dns.Record_NULL&nbsp;to&nbsp;generate&nbsp;an&nbsp;NXDOMAIN-like&nbsp;response&nbsp;without&nbsp;success.&nbsp;How&nbsp;can&nbsp;I&nbsp;implement&nbsp;this?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;need&nbsp;to&nbsp;fail&nbsp;with&nbsp;AuthoritativeDomainError.&nbsp;The&nbsp;pieces&nbsp;go&nbsp;together&nbsp;something&nbsp;like&nbsp;this:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;from&nbsp;twisted.names&nbsp;import&nbsp;dns,&nbsp;client,&nbsp;common&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;class&nbsp;MyResolver(ResolverBase):&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;_lookup(self,&nbsp;name,&nbsp;cls,&nbsp;record_type,&nbsp;timeout):&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;says&nbsp;&quot;my&nbsp;resolver&nbsp;can't&nbsp;handle&nbsp;that&nbsp;name,&nbsp;try&nbsp;somewhere&nbsp;else&quot;.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;DNSServerFactory&nbsp;will&nbsp;try&nbsp;the&nbsp;caches&nbsp;or&nbsp;recurse&nbsp;to&nbsp;clients.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;defer.fail(dns.DomainError(name))&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;says&nbsp;&quot;that&nbsp;name&nbsp;definitely&nbsp;doesn't&nbsp;exist&quot;.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;The&nbsp;client&nbsp;will&nbsp;get&nbsp;NXDOMAIN&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;defer.fail(dns.AuthoritativeDomainError(name))&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;factory&nbsp;=&nbsp;DNSServerFactory(&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;authorities=[MyResolver()],&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;caches=[...],&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;clients=[client.Resolver()],&nbsp;&nbsp;#&nbsp;used&nbsp;to&nbsp;recurse&lt;/span&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;font&quot;&nbsp;style=&quot;font-family:menlo,&nbsp;consolas,&nbsp;monospace,&nbsp;sans-serif;&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---Tom&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
