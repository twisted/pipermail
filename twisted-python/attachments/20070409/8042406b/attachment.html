<tt>
&lt;html&gt;&lt;body&gt;On&nbsp;01:34&nbsp;pm,&nbsp;exarkun@divmod.com&nbsp;wrote:&lt;br&nbsp;/&gt;&gt;On&nbsp;Mon,&nbsp;09&nbsp;Apr&nbsp;2007&nbsp;15:21:50&nbsp;+0200,&nbsp;Roland&nbsp;Hedberg&nbsp;&lt;br&nbsp;/&gt;&gt;&lt;roland.hedberg@adm.umu.se&gt;&nbsp;wrote:&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&gt;&gt;Is&nbsp;there&nbsp;anyway&nbsp;by&nbsp;which&nbsp;I&nbsp;can&nbsp;tell&nbsp;mktap&nbsp;to&nbsp;&quot;forget&quot;&nbsp;about&nbsp;the&lt;br&nbsp;/&gt;&gt;&gt;sleepycat&nbsp;database&nbsp;or&nbsp;...&nbsp;?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&gt;Two&nbsp;possibilities&nbsp;jump&nbsp;out&nbsp;at&nbsp;me:&lt;br&nbsp;/&gt;&gt;&lt;br&nbsp;/&gt;&gt;&nbsp;&#160;-&nbsp;Don't&nbsp;invoke&nbsp;the&nbsp;initialization&nbsp;code&nbsp;of&nbsp;that&nbsp;package&nbsp;in&nbsp;makeService,&lt;br&nbsp;/&gt;&gt;&nbsp;&#160;&nbsp;&#160;wait&nbsp;until&nbsp;the&nbsp;startService&nbsp;method&nbsp;of&nbsp;the&nbsp;service&nbsp;you&nbsp;create&nbsp;is&nbsp;called,&lt;br&nbsp;/&gt;&gt;&nbsp;&#160;&nbsp;&#160;and&nbsp;invoke&nbsp;it&nbsp;then.&nbsp;&#160;This&nbsp;will&nbsp;prevent&nbsp;the&nbsp;DB&nbsp;from&nbsp;being&nbsp;opened&nbsp;until&lt;br&nbsp;/&gt;&gt;&nbsp;&#160;&nbsp;&#160;the&nbsp;application&nbsp;is&nbsp;actually&nbsp;started&nbsp;(ie,&nbsp;when&nbsp;twistd&nbsp;is&nbsp;run).&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;This&nbsp;has&nbsp;the&nbsp;added&nbsp;advantage&nbsp;of&nbsp;working&nbsp;with&nbsp;the&nbsp;--uid&nbsp;and&nbsp;--gid&nbsp;options&nbsp;of&nbsp;twistd&nbsp;as&nbsp;well.&nbsp;&#160;If&nbsp;your&nbsp;objects&nbsp;are&nbsp;created&nbsp;as&nbsp;the&nbsp;service&nbsp;is&nbsp;created,&nbsp;they&nbsp;will&nbsp;be&nbsp;created&nbsp;(and&nbsp;the&nbsp;database&nbsp;opened)&nbsp;as&nbsp;root.&nbsp;&#160;You&nbsp;almost&nbsp;always&nbsp;want&nbsp;to&nbsp;wait&nbsp;until&nbsp;the&nbsp;service&nbsp;actually&nbsp;starts&nbsp;up,&nbsp;i.e.&nbsp;until&nbsp;Twisted&nbsp;has&nbsp;already&nbsp;daemonized,&nbsp;already&nbsp;shed&nbsp;privileges,&nbsp;to&nbsp;actually&nbsp;open&nbsp;files&nbsp;and&nbsp;databases.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&gt;&nbsp;&#160;-&nbsp;Don't&nbsp;use&nbsp;mktap,&nbsp;just&nbsp;use&nbsp;twistd&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;There&nbsp;is&nbsp;also&nbsp;probably&nbsp;no&nbsp;reason&nbsp;to&nbsp;use&nbsp;mktap&nbsp;for&nbsp;a&nbsp;case&nbsp;like&nbsp;this&nbsp;any&nbsp;more&nbsp;though,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;tests&nbsp;to&nbsp;ensure&nbsp;that&nbsp;pickles&nbsp;remain&nbsp;compatible&nbsp;across&nbsp;Twisted&nbsp;or&nbsp;Python&nbsp;versions.&nbsp;&#160;Not&nbsp;only&nbsp;are&nbsp;there&nbsp;no&nbsp;automated&nbsp;tests,&nbsp;but&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;know&nbsp;nobody&nbsp;is&nbsp;still&nbsp;using&nbsp;taps&nbsp;as&nbsp;a&nbsp;method&nbsp;persisting&nbsp;configuration&nbsp;any&nbsp;more,&nbsp;so&nbsp;it&nbsp;is&nbsp;unlikely&nbsp;there&nbsp;is&nbsp;any&nbsp;mechanism&nbsp;for&nbsp;us&nbsp;to&nbsp;notice&nbsp;if&nbsp;pickle&nbsp;compatibility&nbsp;is&nbsp;broken.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;In&nbsp;other&nbsp;words,&nbsp;you're&nbsp;probably&nbsp;better&nbsp;off&nbsp;taking&nbsp;both&nbsp;of&nbsp;JP's&nbsp;suggestions&nbsp;rather&nbsp;than&nbsp;just&nbsp;one.&lt;/body&gt;&lt;/html&gt;
</tt>
