<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted gprs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20gprs&In-Reply-To=%3CFEEJLEMNHDFMOIKEDJBKAEKFCJAA.johnaherne%40rocs.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="049065.html">
   <LINK REL="Next"  HREF="049071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted gprs</H1>
    <B>John Aherne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20gprs&In-Reply-To=%3CFEEJLEMNHDFMOIKEDJBKAEKFCJAA.johnaherne%40rocs.co.uk%3E"
       TITLE="[Twisted-Python] twisted gprs">johnaherne at rocs.co.uk
       </A><BR>
    <I>Thu Jan 10 03:16:15 MST 2008</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="049065.html">[Twisted-Python] twisted gprs
</A></li>
        <LI>Next message (by thread): <A HREF="049071.html">[Twisted-Python] problem with twcgi.PHPScript
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49067">[ date ]</a>
              <a href="thread.html#49067">[ thread ]</a>
              <a href="subject.html#49067">[ subject ]</a>
              <a href="author.html#49067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Carl

Thanks for the reply.

I see now. I did take a look at the TCP book and see what you mean.

What I am trying to do is:--

I have a GPS app on the pda that can transmit every 30 secs or some other
parameterised time frame. This uses a port of its own.

I have another app on the same pda that receives ad hoc messages from the
server and acknowledges these with a message. This is done on a different
port.

For the pda app that waits for messages from the server, I hold a dict of
connections to talk back on.

If the pda can't receive I would like to report back very quickly that it is
not connected.

In theory, if I transmit gps every 30 secs that will keep the connection
open from the pda and is in effect a keepalive. Except when someone is in a
basement or tunnel when the gprs might disappear.

One thought I had was to do a callLater on the server of say 30secs once I
had sent the message, and check whether I had seen a response to that
message within the timeframe. If not I could drop the connection from my
dict and wait for the pda to reconnect with maybe a different IP and port.

Since the gps is send only from the pda I am not too worried if that fails
every now and then. It can just reconnect as and when.

I assume that what I am suggesting is a version of application acks as you
mention. Just nice if someone could confirm that it makes some sense.

Once again Thanks.

John Aherne

-----Original Message-----
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>
[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>]On Behalf Of Carl Zmola
Sent: 10 January 2008 00:06
To: Twisted general discussion
Subject: Re: [Twisted-Python] twisted gprs


John Aherne wrote:
&gt;<i> Is there any call I can make use of to be able to detect the failed send
</I>&gt;<i> before the connection finally is broken.
</I>In general, there is no way to know if a connection is broken.
The standard way to do this is to send a heartbeat message every x
seconds if there is no other communication on the connection.
On the server, you keep a watchdog timer and wait 2x seconds.  You reset
the timer on every communication.
This can be tuned as you see fit, but it has to be done in your application.

The trade off is that if you want to know instantly that a connection is
down, you need to be sending data constantly.

Carson suggested some ways to tweek TCP, and if you have control of the
TCP stack, it is tweakable, but it is not portable.

Carl
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">zmola at acm.org</A>

_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="049065.html">[Twisted-Python] twisted gprs
</A></li>
	<LI>Next message (by thread): <A HREF="049071.html">[Twisted-Python] problem with twcgi.PHPScript
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#49067">[ date ]</a>
              <a href="thread.html#49067">[ thread ]</a>
              <a href="subject.html#49067">[ subject ]</a>
              <a href="author.html#49067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
