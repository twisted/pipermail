<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How can I make twisted and dbus work together?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20can%20I%20make%20twisted%20and%20dbus%20work%20together%3F&In-Reply-To=1200467899.7626.27.camel%40localhost">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016580.html">
   <LINK REL="Next"  HREF="016582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How can I make twisted and dbus work together?</H1>
    <B>Matt Goodall</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20can%20I%20make%20twisted%20and%20dbus%20work%20together%3F&In-Reply-To=1200467899.7626.27.camel%40localhost"
       TITLE="[Twisted-Python] How can I make twisted and dbus work together?">matt at pollenation.net
       </A><BR>
    <I>Wed Jan 16 06:17:59 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="016580.html">[Twisted-Python] How can I make twisted and dbus work together?
</A></li>
        <LI>Next message: <A HREF="016582.html">[Twisted-Python] How can I make twisted and dbus work together?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16581">[ date ]</a>
              <a href="thread.html#16581">[ thread ]</a>
              <a href="subject.html#16581">[ subject ]</a>
              <a href="author.html#16581">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Justin Warren wrote:
&gt;<i> On Wed, 2008-01-16 at 17:28 +1100, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hwan2265 at mail.usyd.edu.au</A> wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> But when I was running my code, I got a error:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Traceback (most recent call last):
</I>&gt;&gt;<i>   File &quot;dbustwisted.py&quot;, line 5, in &lt;module&gt;
</I>&gt;&gt;<i>     glib2reactor.install()
</I>&gt;&gt;<i>   File &quot;/usr/lib/python2.5/site-packages/twisted/internet/glib2reactor.py&quot;,
</I>&gt;&gt;<i> line 33, in install
</I>&gt;&gt;<i>     return gtk2reactor.install(False)
</I>&gt;&gt;<i>   File &quot;/usr/lib/python2.5/site-packages/twisted/internet/gtk2reactor.py&quot;,
</I>&gt;&gt;<i> line 270, in install
</I>&gt;&gt;<i>     installReactor(reactor)
</I>&gt;&gt;<i>   File &quot;/usr/lib/python2.5/site-packages/twisted/internet/main.py&quot;, line
</I>&gt;&gt;<i> 24, in installReactor
</I>&gt;&gt;<i>     &quot;reactor already installed&quot;
</I>&gt;&gt;<i> AssertionError: reactor already installed
</I>&gt;<i> 
</I>&gt;<i> I suspect your problem may be here:
</I>&gt;<i> 
</I>&gt;&gt;<i> if __name__ == &quot;__main__&quot;:
</I>&gt;&gt;<i>     from twisted.internet import glib2reactor
</I>&gt;&gt;<i>     glib2reactor.install()
</I>&gt;&gt;<i>     ################################################
</I>&gt;&gt;<i>     # I added the 2 lines here and made the program crash
</I>&gt;&gt;<i>     ################################################
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     from twisted.internet import reactor
</I>&gt;<i>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</I>&gt;<i> 
</I>&gt;<i> You've already imported glib2reactor, so you shouldn't import the
</I>&gt;<i> default reactor as well. Try removing this line.
</I>
Actually, twisted.internet.reactor is quite magic. It is always the
installed reactor. However, if there is no reactor installed the first
time it is imported it will automatically install the default (select)
reactor.

I suspect that the real cause of the problem is that something is doing
a &quot;from twisted.internet import reactor&quot;, causing the select reactor to
be installed, before the above code is getting the chance to install the
glib2reactor.

Looking at the code it must be a Twisted module that is the culprit.


- Matt


-- 
Matt Goodall
Technical Director, Pollenation Internet Ltd

Registered Number: 4382123
Registered Office: 237 Lidgett Lane, Leeds, West Yorkshire, LS17 6QR
A member of the Brunswick MCL Group of Companies

w: <A HREF="http://www.pollenation.net/">http://www.pollenation.net/</A>
e: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matt at pollenation.net</A>
t: +44 (0) 113 2252500

This message may be confidential and the views expressed may not reflect
the views of my employers. Please read <A HREF="http://eudaimon-group.com/email">http://eudaimon-group.com/email</A>
if you are uncertain what this means.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="016580.html">[Twisted-Python] How can I make twisted and dbus work together?
</A></li>
	<LI>Next message: <A HREF="016582.html">[Twisted-Python] How can I make twisted and dbus work together?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16581">[ date ]</a>
              <a href="thread.html#16581">[ thread ]</a>
              <a href="subject.html#16581">[ subject ]</a>
              <a href="author.html#16581">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
