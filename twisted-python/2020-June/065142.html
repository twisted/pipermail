<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Running tests with monkeytype
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Running%20tests%20with%20monkeytype&In-Reply-To=%3C9737313.b4M5aynErV%40hyperion%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065141.html">
   <LINK REL="Next"  HREF="065143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Running tests with monkeytype</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Running%20tests%20with%20monkeytype&In-Reply-To=%3C9737313.b4M5aynErV%40hyperion%3E"
       TITLE="[Twisted-Python] Running tests with monkeytype">maarten at treewalker.org
       </A><BR>
    <I>Sat Jun 20 16:10:24 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065141.html">[Twisted-Python] Running tests with monkeytype
</A></li>
        <LI>Next message (by thread): <A HREF="065143.html">[Twisted-Python] Running tests with monkeytype
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65142">[ date ]</a>
              <a href="thread.html#65142">[ thread ]</a>
              <a href="subject.html#65142">[ subject ]</a>
              <a href="author.html#65142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Saturday, 20 June 2020 06:51:21 CEST Moshe Zadka wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> If you want to get a first rough draft of types for mypy, has anyone
</I>&gt;<i> tried running the tests under monkeytype[1]?
</I>&gt;<i> 
</I>&gt;<i> Moshe Z.
</I>&gt;<i> 
</I>&gt;<i> [1] <A HREF="https://monkeytype.readthedocs.io/en/stable/">https://monkeytype.readthedocs.io/en/stable/</A>
</I>
That would be worth running in any case, if only as a reference.

Whether it would be worth applying as-is, I'm not sure: monkeytype would 
capture the concrete type passed to functions, while in the type 
annotations we'd want to have Zope interfaces and abstract types 
(Iterable etc) instead.

With some scripted filtering, maybe we can apply part of monkeytype's 
captured types automatically. We don't need to automate 100%; any 
substantial amount will save a lot of manual work.


Another thing we could do to automate annotation is extract the 
documented types from the docstrings. For example by modifying pydoctor.

Which also brings up the question: in the long term (*), do we want to 
have both type annotations and types in the docstring? Or do we only 
want to document types in docstrings if there is no exact annotations 
possible in Python's type system?

(*) Currently, pydoctor uses Python 3.6 style (&quot;var: type&quot;) annotations 
for variables, but it ignores annotations for functions and it ignores 
type comments. Function annotations are on my to-do list, while type 
comments are supported by Python 3.8's ast module. So eventually, all 
annotations should end up in the output of pydoctor.

Bye,
		Maarten



</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065141.html">[Twisted-Python] Running tests with monkeytype
</A></li>
	<LI>Next message (by thread): <A HREF="065143.html">[Twisted-Python] Running tests with monkeytype
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65142">[ date ]</a>
              <a href="thread.html#65142">[ thread ]</a>
              <a href="subject.html#65142">[ subject ]</a>
              <a href="author.html#65142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
