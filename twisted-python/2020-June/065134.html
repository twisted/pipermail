<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistedchecker%20now%20uses%20pylint%20%3E%3D%202.4.4%2C%0A%20can%20we%20use%20type%20annotations%20in%20Twisted%20now%3F&In-Reply-To=%3C2A966FB1-7BC2-4EC0-BAAA-AB660C303C1A%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065132.html">
   <LINK REL="Next"  HREF="065149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistedchecker%20now%20uses%20pylint%20%3E%3D%202.4.4%2C%0A%20can%20we%20use%20type%20annotations%20in%20Twisted%20now%3F&In-Reply-To=%3C2A966FB1-7BC2-4EC0-BAAA-AB660C303C1A%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Jun 16 02:08:20 MDT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065132.html">[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
</A></li>
        <LI>Next message (by thread): <A HREF="065149.html">[Twisted-Python] mypy integrated with CI for twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65134">[ date ]</a>
              <a href="thread.html#65134">[ thread ]</a>
              <a href="subject.html#65134">[ subject ]</a>
              <a href="author.html#65134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Awesome, thanks for doing this work Craig, Adi, and Wilfredo!

-g

&gt;<i> On Jun 15, 2020, at 8:32 PM, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Thanks to Adi and Wilfredo who have reviewed my PR's.  Currently in trunk, I have eliminated hundreds of mypy
</I>&gt;<i> errors through a combination of trivial fixes to code, adding type annotations, and adding special comments 
</I>&gt;<i> to turn off mypy errors in a few places.
</I>&gt;<i> 
</I>&gt;<i> I have one more pending PR ( <A HREF="https://github.com/twisted/twisted/pull/1290">https://github.com/twisted/twisted/pull/1290</A> &lt;<A HREF="https://github.com/twisted/twisted/pull/1290">https://github.com/twisted/twisted/pull/1290</A>&gt; ) to turn on a mypy build in an Azure pipeline.
</I>&gt;<i> In this run of tox -e mypy there are 437 errors from mypy:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://dev.azure.com/twistedmatrix/twisted/_build/results?buildId=1904&amp;view=logs&amp;j=d78da089-4bf6-58fe-28a5-46635fd5b8d1&amp;t=45ce7910-c28c-5e9a-4ee7-e041d314a5fc">https://dev.azure.com/twistedmatrix/twisted/_build/results?buildId=1904&amp;view=logs&amp;j=d78da089-4bf6-58fe-28a5-46635fd5b8d1&amp;t=45ce7910-c28c-5e9a-4ee7-e041d314a5fc</A> &lt;<A HREF="https://dev.azure.com/twistedmatrix/twisted/_build/results?buildId=1904&amp;view=logs&amp;j=d78da089-4bf6-58fe-28a5-46635fd5b8d1&amp;t=45ce7910-c28c-5e9a-4ee7-e041d314a5fc">https://dev.azure.com/twistedmatrix/twisted/_build/results?buildId=1904&amp;view=logs&amp;j=d78da089-4bf6-58fe-28a5-46635fd5b8d1&amp;t=45ce7910-c28c-5e9a-4ee7-e041d314a5fc</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> I think we can gradually whack these down to zero mypy errors, and turn mypy on as part of default CI for Twisted.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Craig
</I>&gt;<i> 
</I>&gt;<i> On Wed, Apr 22, 2020 at 12:28 AM Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> The first step here, however, is to set up the CI infrastructure (tox, etc) to run mypy so that we can ensure that as we start writing type hints, we don't accidentally get any of them wrong and back ourselves into any corners.  Mypy can catch a surprising number of bugs with just the implicit type-checking it does on values that come from the standard library.  In fact, if we do `mypy src/twisted` right now, and exclude the things that would be fixed by adding in <A HREF="https://github.com/Shoobx/mypy-zope">https://github.com/Shoobx/mypy-zope</A> &lt;<A HREF="https://github.com/Shoobx/mypy-zope">https://github.com/Shoobx/mypy-zope</A>&gt; (&quot;method must have at least one argument&quot; zope.interface definition errors) and fixing up some simple type hints (has no attribute &quot;skip&quot;) we still have almost a thousand type errors that we should figure out a way to start correcting or systematically skipping if they're false positives.  I guarantee you there's at least one real bug in there though.
</I>&gt;<i> 
</I>&gt;<i> As you know, I tend to be pretty cautious about sweeping changes to the code that might make it harder to maintain on older versions - type hints are an exception where I think it's absolutely worthwhile to go All In early on.  But CI infrastructure for this stuff is a must-have and it might be tricky to get set up initially.
</I>&gt;<i> 
</I>&gt;<i> -glyph
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20200616/8a2db561/attachment.htm&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065132.html">[Twisted-Python] twistedchecker now uses pylint &gt;= 2.4.4, can we use type annotations in Twisted now?
</A></li>
	<LI>Next message (by thread): <A HREF="065149.html">[Twisted-Python] mypy integrated with CI for twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65134">[ date ]</a>
              <a href="thread.html#65134">[ thread ]</a>
              <a href="subject.html#65134">[ subject ]</a>
              <a href="author.html#65134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
