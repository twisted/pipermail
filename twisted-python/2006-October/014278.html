<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: If lineReceived returns deferred,	then connection is dropped and this deferred given as error message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20If%20lineReceived%20returns%20deferred%2C%0A%09then%20connection%20is%20dropped%20and%20this%20deferred%20given%20as%20error%20message&In-Reply-To=200610311652.37936.Marcin.Kasperski%40softax.com.pl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014277.html">
   <LINK REL="Next"  HREF="014279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: If lineReceived returns deferred,	then connection is dropped and this deferred given as error message</H1>
    <B>Marcin Kasperski</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20If%20lineReceived%20returns%20deferred%2C%0A%09then%20connection%20is%20dropped%20and%20this%20deferred%20given%20as%20error%20message&In-Reply-To=200610311652.37936.Marcin.Kasperski%40softax.com.pl"
       TITLE="[Twisted-Python] Re: If lineReceived returns deferred,	then connection is dropped and this deferred given as error message">Marcin.Kasperski at softax.com.pl
       </A><BR>
    <I>Tue Oct 31 11:15:36 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014277.html">[Twisted-Python] If lineReceived returns deferred,	then connection is dropped and this deferred given as error message
</A></li>
        <LI>Next message: <A HREF="014279.html">[Twisted-Python] Re: If lineReceived returns deferred,	then connection is dropped and this deferred given as error message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14278">[ date ]</a>
              <a href="thread.html#14278">[ thread ]</a>
              <a href="subject.html#14278">[ subject ]</a>
              <a href="author.html#14278">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>One more observation after looking at twisted code:

twisted/protocols/basic.py funtion LineReceiver.dataReceived contains sth like that:

           why = self.lineReceived(line)
           if why or self.transport and self.transport.disconnecting:
                    return why

As this is WITHIN the loop, we see why returning deferred (or anything true)
from lineReceived breaks processing.

I did not search further but it seems somebody is using convention that
if lineReceived (and maybe dataReceived) returns something, then this is
an error. Why not exception??? And, is it possible to patch it somehow so 
lineReceived function could be unit-tested?


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014277.html">[Twisted-Python] If lineReceived returns deferred,	then connection is dropped and this deferred given as error message
</A></li>
	<LI>Next message: <A HREF="014279.html">[Twisted-Python] Re: If lineReceived returns deferred,	then connection is dropped and this deferred given as error message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14278">[ date ]</a>
              <a href="thread.html#14278">[ thread ]</a>
              <a href="subject.html#14278">[ subject ]</a>
              <a href="author.html#14278">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
