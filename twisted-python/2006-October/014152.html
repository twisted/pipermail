<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] _dumbwin32proc and PIPE_NOWAIT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20_dumbwin32proc%20and%20PIPE_NOWAIT&In-Reply-To=20060930232337.1717.1142591311.divmod.quotient.63977%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014151.html">
   <LINK REL="Next"  HREF="014153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] _dumbwin32proc and PIPE_NOWAIT</H1>
    <B>Manlio Perillo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20_dumbwin32proc%20and%20PIPE_NOWAIT&In-Reply-To=20060930232337.1717.1142591311.divmod.quotient.63977%40ohm"
       TITLE="[Twisted-Python] _dumbwin32proc and PIPE_NOWAIT">manlio_perillo at libero.it
       </A><BR>
    <I>Sun Oct  1 06:08:12 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014151.html">[Twisted-Python] Removing _wait from Trial
</A></li>
        <LI>Next message: <A HREF="014153.html">[Twisted-Python] _pollingfile._PollingTimer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14152">[ date ]</a>
              <a href="thread.html#14152">[ thread ]</a>
              <a href="subject.html#14152">[ subject ]</a>
              <a href="author.html#14152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> ha scritto:
&gt;<i> [...]
</I>&gt;<i> 
</I>&gt;&gt;<i> Is win32eventreactor not working and not tested?
</I>&gt;<i> 
</I>&gt;<i> It's tested, but it's not working.  See
</I>&gt;<i> <A HREF="http://twistedmatrix.com/buildbot/">http://twistedmatrix.com/buildbot/</A> - you'll notice the &quot;win32-win32er&quot;
</I>&gt;<i> column is always red.  It's also limited because it still allows only 63
</I>&gt;<i> objects.
</I>&gt;<i> 
</I>

I have just runned the test suite (with Twisted 2.4).

I got
FAILED (skips=76, expectedFailures=7, failures=6, errors=13, successes=868)

Moreover about 2-3 time I got a peak to CPU and memory usage (up to 300 MB).

&gt;&gt;<i> You did not mention it in the &quot;removing unsupported reactors in twisted&quot;
</I>&gt;&gt;<i> thread.
</I>&gt;<i> 
</I>&gt;<i> It has maintainers, it has a buildbot, and it's been gradually
</I>&gt;<i> decreasing its number of failing tests over time.  It didn't seem like a
</I>&gt;<i> candidate for removal.
</I>&gt;<i> 
</I>&gt;&gt;<i> I have write it, now stdio works ;-).
</I>&gt;<i> 
</I>&gt;&gt;<i> Unfortunately it is not very efficient since:
</I>&gt;&gt;<i> - it uses _pollingfile (not a real porblem)
</I>&gt;&gt;<i> - it reads raw keyboard input and have to do all low level stuff like
</I>&gt;&gt;<i>  '\b' handling, '\r' conversion, and so
</I>&gt;<i> 
</I>&gt;<i> It's very hard to do these things efficiently, so I'm not too worried
</I>&gt;<i> about that.  We also don't have a lot of programmers interested in
</I>&gt;<i> Windows support.  My interest in Windows support ends right about at the
</I>&gt;<i> point where the servers I develop can be successfully tested and
</I>&gt;<i> developed on win32 :).  Providing functionality in an inefficient
</I>&gt;<i> implementation at least provides some useful functionality in the
</I>&gt;<i> meanwhile, and something to optimize later if it becomes important.
</I>&gt;<i> 
</I>

The implementation surely can be optimized.

&gt;&gt;<i> Here is the main code.
</I>
[...]


One more thing.
As I have said I would like to provide a portable interface to terminal
handling, so that scripts like conch can works on both POSIX and Window.

There are several options:
1) Write modules like twised.python.fncl, twisted.python.termios and
   twisted.python.pty, that implements the same POSIX interface on
   Windows too.

   I suspect that this can be done but it is hard (and I'm lazy).
   Moreover there is the problem with SIGWINCH handling
   (Windows can - not yet tested - report events about console window
    resizing)

2) Write an high level module like twisted.python.tty
   that provides functions like
   enableRawMode(fd, trueOrFalse), enableEcho(fd, trueOrFalse),
   addWindowChangeCallback(cb), and so

3) Write an high level module like twisted.internet.conio
   that provides StdIOChannel (just to pick a name) objects.
   These objects will have the interface as in 2).



Regards  Manlio Perillo


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014151.html">[Twisted-Python] Removing _wait from Trial
</A></li>
	<LI>Next message: <A HREF="014153.html">[Twisted-Python] _pollingfile._PollingTimer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14152">[ date ]</a>
              <a href="thread.html#14152">[ thread ]</a>
              <a href="subject.html#14152">[ subject ]</a>
              <a href="author.html#14152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
