<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problem with runInteraction and passing a dict	variable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20with%20runInteraction%20and%20passing%20a%20dict%0A%09variable&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014271.html">
   <LINK REL="Next"  HREF="014273.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problem with runInteraction and passing a dict	variable</H1>
    <B>Ron Arts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20with%20runInteraction%20and%20passing%20a%20dict%0A%09variable&In-Reply-To="
       TITLE="[Twisted-Python] Problem with runInteraction and passing a dict	variable">ron.arts at netland.nl
       </A><BR>
    <I>Sun Oct 29 14:57:21 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014271.html">[Twisted-Python] Weekly Bug Summary
</A></li>
        <LI>Next message: <A HREF="014273.html">[Twisted-Python] Problem with runInteraction and passing a dict	variable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14272">[ date ]</a>
              <a href="thread.html#14272">[ thread ]</a>
              <a href="subject.html#14272">[ subject ]</a>
              <a href="author.html#14272">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am both a python and twisted beginner, but I think I have found
a problem in twisted. See the code below.
The handle_PeerStatus function receives a dict wich contains
some info. Then it calls runInteraction with that variable.
When the UpdatePeerStatus function is run, block is empty.

I did some investigating, it seems that UpdatePeerStatus is
run using a workerthread which takes it values from a Queue.

When the dict is pushed onto the Queue, it is valid, when
when it is popped by the worker thread, the var is empty.

Can anybody give me tips to solve this? Am I absolutely
missing something and on the wring track or should I enter a bug?

Thanks,
Ron

class .....
     def handle_PeerStatus(self, block):
         print block
         self.db.runInteraction(self.UpdatePeerStatus, block)


     def UpdatePeerStatus(self, txn, block):
         print block # prints {}
         status = block['PeerStatus']  # throws me an exception


-------------- next part --------------
A non-text attachment was scrubbed...
Name: ron.arts.vcf
Type: text/x-vcard
Size: 270 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20061029/1f655a48/attachment.vcf">http://twistedmatrix.com/pipermail/twisted-python/attachments/20061029/1f655a48/attachment.vcf</A> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3403 bytes
Desc: S/MIME Cryptographic Signature
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20061029/1f655a48/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20061029/1f655a48/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014271.html">[Twisted-Python] Weekly Bug Summary
</A></li>
	<LI>Next message: <A HREF="014273.html">[Twisted-Python] Problem with runInteraction and passing a dict	variable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14272">[ date ]</a>
              <a href="thread.html#14272">[ thread ]</a>
              <a href="subject.html#14272">[ subject ]</a>
              <a href="author.html#14272">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
