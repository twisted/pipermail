<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] automat question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20automat%20question&In-Reply-To=%3C73E6642F-31B5-4D12-976F-A56A309C13F5%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065536.html">
   <LINK REL="Next"  HREF="065557.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] automat question</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20automat%20question&In-Reply-To=%3C73E6642F-31B5-4D12-976F-A56A309C13F5%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] automat question">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Mar  9 11:53:03 MST 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065536.html">[Twisted-Python] automat question
</A></li>
        <LI>Next message (by thread): <A HREF="065557.html">[Twisted-Python] automat question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65538">[ date ]</a>
              <a href="thread.html#65538">[ thread ]</a>
              <a href="subject.html#65538">[ subject ]</a>
              <a href="author.html#65538">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Mar 9, 2021, at 3:18 AM, Chris Withers &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">chris at withers.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I'm not sure we're quite on the same page: I'm not looking to inspect the state, but more be notified when certain edges are traversed.
</I>
The way you get notified when an edge is traversed is you add an output to that edge :).

When I was talking about &quot;internal state&quot;, what I meant was not the literal current state atom of the machine, but the presence and names of states and edges themselves.  Within the abstraction of the state machine, the way you find out that an edge was traversed by having an output run.

&gt;<i> That said: what's the best practice when you want to visualize the current state of a machine? In this case, the machine is for a unit of work in a scheduling app, and the UI has a list of these units where it'd make sense to show the current state.
</I>
This is definitely a gap.  I think today the best way to do this would be to have an event emitted by an output that invokes the serialization code to discover the state and have the UI show that.

&gt;<i> The unit of work also forms the boundary API between the from end object model and the pool/scheduling back end. As such, each side can naturally call inputs methods on the machine, as I believe automat intends, but it's how to get notified by an output?
</I>
The output can just... call a UI observer?

&gt;<i> So, the front end may want to say &quot;I no longer need this UoW done, please kill it&quot;, the back end then needs to run the code to kill whatever's running the UoW.
</I>&gt;<i> Likewise, when the backend finishes a UoW, it wants to call either machine.result(...) or machine.error(...) to say what happened, but how do I wire in the front end bit that needs to get called when this happens?
</I>
Again... have outputs.  I think there's something you're leaving out about how you want to have some generalized output, but without knowing a bit more it's hard to say how it could help more :).

-g

&gt;<i> 
</I>&gt;<i> cheers,
</I>&gt;<i> 
</I>&gt;<i> Chris
</I>&gt;<i> 
</I>&gt;<i> On 07/03/2021 22:34, Glyph wrote:
</I>&gt;&gt;<i> Automat is designed to make this sort of thing intentionally annoying, as you have discovered:).
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The idea is that if you want to know this sort of internal state, it’s for a specific reason. That's not a blanket &quot;No&quot; — see for example how automat deals with serialization — but each such interface should be minimal and thoughtfully designed. Otherwise a state machine library just becomes a bunch of complex infrastructure around making an arbitrary series of function calls, and loses all of its helpful formalisms.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> So probably we do need to make a change to automat if you really need to do this, but first it's important to know what your use-case is. In a lot of cases the answer is &quot;just make an output. Stop trying to make the application see into the guts of the framework.&quot; But without knowing it’s impossible to say!
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -g
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Apologies if there's a better list for this, please let me know where...
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> I've grown to like Glyph's automat package a lot, but in a current 
</I>&gt;&gt;&gt;<i> project, I have observers that need to know when a machine changes state.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> What's the best way to let those observers know?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> cheers,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Chris
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>&gt;
</I>&gt;<i> 
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20210309/2c01069e/attachment-0001.htm&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065536.html">[Twisted-Python] automat question
</A></li>
	<LI>Next message (by thread): <A HREF="065557.html">[Twisted-Python] automat question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65538">[ date ]</a>
              <a href="thread.html#65538">[ thread ]</a>
              <a href="subject.html#65538">[ subject ]</a>
              <a href="author.html#65538">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
