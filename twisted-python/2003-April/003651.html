<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] UDP servers and socket queues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20UDP%20servers%20and%20socket%20queues&In-Reply-To=20030421111606.4b39e311.itamar%40itamarst.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003650.html">
   <LINK REL="Next"  HREF="003652.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] UDP servers and socket queues</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20UDP%20servers%20and%20socket%20queues&In-Reply-To=20030421111606.4b39e311.itamar%40itamarst.org"
       TITLE="[Twisted-Python] UDP servers and socket queues">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Mon Apr 21 14:29:56 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003650.html">[Twisted-Python] UDP servers and socket queues
</A></li>
        <LI>Next message: <A HREF="003652.html">[Twisted-Python] UDP servers and socket queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3651">[ date ]</a>
              <a href="thread.html#3651">[ thread ]</a>
              <a href="subject.html#3651">[ subject ]</a>
              <a href="author.html#3651">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Apr 21, 2003 at 11:16:06AM -0400, Itamar Shtull-Trauring wrote:
&gt;<i> 
</I>&gt;<i> I'll take a look at trying to fix this sometime this week. The solution
</I>&gt;<i> will be to do up to X reads of UDP packets in each iteration of the
</I>&gt;<i> event loop, instead of reading only one packet in each iteration. 
</I>&gt;<i> 
</I>
I figured something like that. Does anyone know if the various socket
readiness abstractions (select(), poll(), kqueue, RT signals, etc.)
given you sufficient information to know when you can do multiple reads?

The other option I guess would be to for connection-less sockets to do:

while 1:
    try:
        data, addr = self.socket.recvfrom(65535)
        self.protocol.datagramReceived(data, addr)
    except socket.error, se:
        if se.args[0]==errno.EWOULDBLOCK:
            break
    except:
        log.deferr()

...in doRead (line 91, twisted/internet/udp.py)?

-- 

Regards,
Phil

+------------------------------------------+
|<i> Phil Mayers                              |
</I>|<i> Network &amp; Infrastructure Group           |
</I>|<i> Information &amp; Communication Technologies |
</I>|<i> Imperial College                         |
</I>+------------------------------------------+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003650.html">[Twisted-Python] UDP servers and socket queues
</A></li>
	<LI>Next message: <A HREF="003652.html">[Twisted-Python] UDP servers and socket queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3651">[ date ]</a>
              <a href="thread.html#3651">[ thread ]</a>
              <a href="subject.html#3651">[ subject ]</a>
              <a href="author.html#3651">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
