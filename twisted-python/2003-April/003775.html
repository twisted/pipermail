<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adapi.Connection._runQuery always does rollback()
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adapi.Connection._runQuery%20always%20does%20rollback%28%29&In-Reply-To=20030426183018.GA26181%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003774.html">
   <LINK REL="Next"  HREF="003780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adapi.Connection._runQuery always does rollback()</H1>
    <B>Thomas Raschbacher</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adapi.Connection._runQuery%20always%20does%20rollback%28%29&In-Reply-To=20030426183018.GA26181%40localhost.localdomain"
       TITLE="[Twisted-Python] adapi.Connection._runQuery always does rollback()">lordvan at lordvan.com
       </A><BR>
    <I>Sat Apr 26 16:19:01 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003774.html">[Twisted-Python] adapi.Connection._runQuery always does rollback()
</A></li>
        <LI>Next message: <A HREF="003780.html">[Twisted-Python] adapi.Connection._runQuery always does rollback()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3775">[ date ]</a>
              <a href="thread.html#3775">[ thread ]</a>
              <a href="subject.html#3775">[ subject ]</a>
              <a href="author.html#3775">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi!

you did this in your 'application' code? (you know that this will block
your whole twisted app for the time of the query right? since MySQLdb is
not async .. and u'd need a thread to make it kinda async ..)

regards
&lt;quote who=&quot;Eric C. Newton&quot;&gt;
&gt;<i> Alrighty.  In case anyone else needs to do this before the MySQL
</I>&gt;<i> Python API is brought up-to-date, here's how I kludged it without
</I>&gt;<i> changing twisted:
</I>&gt;<i>
</I>&gt;<i>     import MySQLdb
</I>&gt;<i>
</I>&gt;<i>     def doNothing(*args, **kw):
</I>&gt;<i>        return None
</I>&gt;<i>
</I>&gt;<i>     class AddRollback:
</I>&gt;<i>        def __init__(self, module):
</I>&gt;<i> 	  self.doConnect = module.connect
</I>&gt;<i>
</I>&gt;<i>        def connect(self, *args, **kw):
</I>&gt;<i> 	  result = self.doConnect(*args, **kw)
</I>&gt;<i> 	  result.rollback = doNothing
</I>&gt;<i> 	  return result
</I>&gt;<i>
</I>&gt;<i>     MySQLdb.connect = AddRollback(MySQLdb).connect
</I>&gt;<i>
</I>

-- 
-----BEGIN GEEK CODE BLOCK-----
GCS/CC/E/M/MU/S d- s: a--- C++++(++) UL++++ P+ L++++ E W+++ N+++ o-- K w-- O
M-- V- PS+ PE-- Y++ PGP+++ t+++ 5+ X- R tv b++++ DI- D+ G++ e--&gt;+++++ h-- !r
z-
------END GEEK CODE BLOCK------


-----------------------------------------
This email was sent using SquirrelMail.
   &quot;Webmail for nuts!&quot;
<A HREF="http://squirrelmail.org/">http://squirrelmail.org/</A>




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003774.html">[Twisted-Python] adapi.Connection._runQuery always does rollback()
</A></li>
	<LI>Next message: <A HREF="003780.html">[Twisted-Python] adapi.Connection._runQuery always does rollback()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3775">[ date ]</a>
              <a href="thread.html#3775">[ thread ]</a>
              <a href="subject.html#3775">[ subject ]</a>
              <a href="author.html#3775">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
