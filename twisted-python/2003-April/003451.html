<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: more thoughts on resumable async data flows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20more%20thoughts%20on%20resumable%20async%20data%20flows&In-Reply-To=b6hbjv%24si1%241%40main.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003435.html">
   <LINK REL="Next"  HREF="003464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: more thoughts on resumable async data flows</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20more%20thoughts%20on%20resumable%20async%20data%20flows&In-Reply-To=b6hbjv%24si1%241%40main.gmane.org"
       TITLE="[Twisted-Python] Re: more thoughts on resumable async data flows">cce at clarkevans.com
       </A><BR>
    <I>Sat Apr  5 04:12:14 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003435.html">[Twisted-Python] Re: more thoughts on resumable async data flows
</A></li>
        <LI>Next message: <A HREF="003464.html">[Twisted-Python] Re: Re: more thoughts on resumable async data flows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3451">[ date ]</a>
              <a href="thread.html#3451">[ thread ]</a>
              <a href="subject.html#3451">[ subject ]</a>
              <a href="author.html#3451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Apr 03, 2003 at 03:02:04PM +0200, Philippe Lafoucri&#232;re wrote:
|<i> how do you use it with adbapi ?? I mean, how do you use callbacks
</I>|<i> with your flow ?
</I>|<i>
</I>|<i> How does it work if a bloc has several inputs ?
</I>|<i> I want to do this :
</I>|<i> 
</I>|<i> DS1 ---&gt; FS1 ---+
</I>|<i>                 +---&gt;  FS3
</I>|<i> DS2 ---&gt; FS2 -------&gt;  FS3
</I>
If your queries are returning small results, ie, 
non-incremental, I would just set this up as a 
chain of Deferreds and not bother with flow as
it might be overkill for your needs.

In other words, in the twisted.enterprise.adbapi
when you run a query, it returns a deferred.  So
DS1 and DS2 would be those query results.

Your FS1 and FS2 should be deferred operations
as well, but fired via the 'addCallback' on 
DS1 and DS2 respectively.

Then FS3 is a DeferredList taking FS1 and FS2.

...

If you can use generators, for more complicated flows, 
etrepum's (Bob Ippolito's) approach may be better approach
to this, although I'm not sure how it would handle more
'fluid' flow through the process.  I need to understand
what he's doing better.   At first I thought his approach
is very different than mine, but I think (although I'm
not quite yet able to explain) that they are isomorphic;
only that I'm using a temp stack and he's using the 
event queue via a linked-list. 

...

As for the stuff in flow.py, right now it uses a thread
for each database connection.  Eventually for PostgreSQL,
I'd like to move over to a non-threaded driver.  Gerhard
was working on such a thing as I remember.  Also, it may
be renamed since extrepum was using &quot;flow.py&quot; before me.

Anyway, the database connection is done through a 
QueryIterator which basically sends a set of rows
(via fetchmany) on to the next stage.  So, the connection
from DS1 to FS1 and DS2 to FS2 could be done using 
a simple flow for each.  The problem in the flow module 
has to do with merging the two flows.  This can be done 
by using the 'context'.

In short, it would work, but I'm not sure that it's
your best option; and I'm still not quite happy with
flow.py myself (although it is in production).

Clark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003435.html">[Twisted-Python] Re: more thoughts on resumable async data flows
</A></li>
	<LI>Next message: <A HREF="003464.html">[Twisted-Python] Re: Re: more thoughts on resumable async data flows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3451">[ date ]</a>
              <a href="thread.html#3451">[ thread ]</a>
              <a href="subject.html#3451">[ subject ]</a>
              <a href="author.html#3451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
