<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [flow.py] : iterator problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20%5Bflow.py%5D%20%3A%20iterator%20problems&In-Reply-To=%3C20030420171435.GA42062%40doublegemini.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036154.html">
   <LINK REL="Next"  HREF="036156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [flow.py] : iterator problems</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20%5Bflow.py%5D%20%3A%20iterator%20problems&In-Reply-To=%3C20030420171435.GA42062%40doublegemini.com%3E"
       TITLE="[Twisted-Python] Re: [flow.py] : iterator problems">cce at clarkevans.com
       </A><BR>
    <I>Sun Apr 20 11:14:35 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036154.html">[Twisted-Python] [flow.py] : iterator problems
</A></li>
        <LI>Next message (by thread): <A HREF="036156.html">[Twisted-Python] UDP servers and socket queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36155">[ date ]</a>
              <a href="thread.html#36155">[ thread ]</a>
              <a href="subject.html#36155">[ subject ]</a>
              <a href="author.html#36155">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Apr 20, 2003 at 12:28:24PM +0200, Philippe Lafoucri&#232;re wrote:
|<i>
</I>|<i> when I yield a producer, I got in one shot the complete set of results !
</I>|<i>
</I>
Sorry about that.  There are two ways to make Threaded the threaded
wrapper operate.  In one case, the default, the wrapper yields for
every time that the wrapped iterator has returned.  In the other,
it assumes that the wrapped iterator returns a lists, and then 
yields for each item in those lists.

When I split QueryIterator and Threaded, there wasn't a way to 
let Threaded know that QueryIterator wants the second behavior,
so to do that you need to use the 'extend' option:

   flow.Threaded(flow.QueryIterator(...), extend = 1)

Anyway, I assume you are using the defaults, fetchall=0 for the 
QueryIterator, and extend = 0, for the Threaded wrapper.  In this
case, you could get N yields with M rows in them.  This is probably
the most efficient mechanism, as you spend less time in the flow
module, yet the results are incremental.   

|<i> --------------------------------------------------------------------------
</I>|<i> Processed result :  ((1L, 1L), (12L, 90L), (1300L, 560L), (2000L, 10L),
</I>|<i> (30L, 900L), (5000L, 500L))
</I>|<i> --------------------------------------------------------------------------
</I>
Right, and if your result set had more rows you'd get...


|<i> --------------------------------------------------------------------------
</I>|<i> Processed result :  ((1L, 1L), (12L, 90L), ... )
</I>|<i> Processed result :  ((1300L, 560L), (2000L, 10L), ... )
</I>|<i> Processed result :  ((30L, 900L), (5000L, 500L), ... )
</I>|<i> --------------------------------------------------------------------------
</I>
Although, to make it easier for programming, the 
extend = 1 option would make it return results...

|<i> --------------------------------------------------------------------------
</I>|<i> Processed result : (1L, 1L)
</I>|<i> Processed result : (12L, 90L)
</I>|<i> Processed result : (1300L, 560L)
</I>|<i> Processed result : (2000L, 10L)
</I>|<i> Processed result : (30L, 900L)
</I>|<i> Processed result : (5000L, 500L)
</I>|<i> --------------------------------------------------------------------------
</I>
|<i> 
</I>|<i> I saw you changed many things since few days, and I'm not sure I will be
</I>|<i> able to correct this bug alone. By the way, I'd like to work on my
</I>|<i> project today, could you help me please ?
</I>
Sure.  I'll be around all day on IRC.

Clark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036154.html">[Twisted-Python] [flow.py] : iterator problems
</A></li>
	<LI>Next message (by thread): <A HREF="036156.html">[Twisted-Python] UDP servers and socket queues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36155">[ date ]</a>
              <a href="thread.html#36155">[ thread ]</a>
              <a href="subject.html#36155">[ subject ]</a>
              <a href="author.html#36155">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
