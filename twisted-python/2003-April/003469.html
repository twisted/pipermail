<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-commits] cleanup after test
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20cleanup%20after%20test&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003465.html">
   <LINK REL="Next"  HREF="003470.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-commits] cleanup after test</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20cleanup%20after%20test&In-Reply-To="
       TITLE="[Twisted-Python] Re: [Twisted-commits] cleanup after test">warner at lothar.com
       </A><BR>
    <I>Sun Apr  6 23:56:28 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003465.html">[Twisted-Python] Re: [Twisted-commits] cleanup after test
</A></li>
        <LI>Next message: <A HREF="003470.html">[Twisted-Python] [PATCH] row / reflector / sqlreflector - case insensitive tables/columns
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3469">[ date ]</a>
              <a href="thread.html#3469">[ thread ]</a>
              <a href="subject.html#3469">[ subject ]</a>
              <a href="author.html#3469">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; Twisted/twisted/test/test_journal.py 1.8 1.9
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Log message:
</I>&gt;<i> &gt; cleanup after test
</I>&gt;<i> 
</I>&gt;<i> Hmm, what's the point of this? I thought any files you create get
</I>&gt;<i> stored in the _trial_temp directory (because trial os.chdir()s, or
</I>&gt;<i> something), which is explicitly left around for post-mortem
</I>&gt;<i> debugging. Or were these tests creating files explicitly in other
</I>&gt;<i> locations?
</I>
Both test_journal and test_logfile use tempfile.mktemp(), which creates new
directories in /tmp. Neither one removed the generated files (test_logfile
had code to do it, but it was commented out). pyramid had nearly a thousand
spurious /tmp/@1234.5 directories, all owned by me because the buildbot was
creating another dozen or so each time the test suite got run.

Those two tests could probably be modified to create temp file in the current
directory, but that change seemed like it had a higher probability of
failing.

cheers,
 -Brian

PS: folks who have run tests on pyramid, please check /tmp/ (and /tmp in the
sid-chroot) for leftover @1234.5 directories and delete them. You'll have to
do a 'chmod a+rwx' on them first because of a bug in the old cleanup code
(chmod(777) instead of chmod(0777)).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003465.html">[Twisted-Python] Re: [Twisted-commits] cleanup after test
</A></li>
	<LI>Next message: <A HREF="003470.html">[Twisted-Python] [PATCH] row / reflector / sqlreflector - case insensitive tables/columns
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3469">[ date ]</a>
              <a href="thread.html#3469">[ thread ]</a>
              <a href="subject.html#3469">[ subject ]</a>
              <a href="author.html#3469">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
