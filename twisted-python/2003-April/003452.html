<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] enterprise.row
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20enterprise.row&In-Reply-To=%3C1049574011.1503.45.camel%40qutang.gnubian.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036004.html">
   <LINK REL="Next"  HREF="035963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] enterprise.row</H1>
    <B>Justin Ryan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20enterprise.row&In-Reply-To=%3C1049574011.1503.45.camel%40qutang.gnubian.org%3E"
       TITLE="[Twisted-Python] enterprise.row">justin at gnubia.net
       </A><BR>
    <I>Sat Apr  5 13:20:11 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036004.html">[Twisted-Python] release momentum
</A></li>
        <LI>Next message (by thread): <A HREF="035963.html">[Twisted-Python] enterprise.row
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3452">[ date ]</a>
              <a href="thread.html#3452">[ thread ]</a>
              <a href="subject.html#3452">[ subject ]</a>
              <a href="author.html#3452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm attempting to implement a simple database application (again) using
twisted.enterprise.row.  Perhaps my failure to do so successfully in the
past should be a hint that I should give up, but the concept seems
really cool, and I keep getting closer.

I'm running into an issue that no doubt has something to do with my lack
of understanding of t.e.row.  I've been wanting to try it for a while,
and decided to design a simple database with the goal of implementing a
simple application using t.e.row.  In any case, it seems I am angering
row.  My first attempt at using it was to try and create/insert a new
row, and i received the following exception:

&lt;- snip -&gt;
Traceback (most recent call last):
  File &quot;Zone.py&quot;, line 33, in ?
    reflector.insertRow(newZone).addCallback(onInsert)
  File
&quot;/usr/lib/python2.2/site-packages/twisted/enterprise/sqlreflector.py&quot;,
line 308, in insertRow
    sql = self.insertRowSQL(rowObject)
  File
&quot;/usr/lib/python2.2/site-packages/twisted/enterprise/sqlreflector.py&quot;,
line 301, in insertRowSQL
    args.append(self.quote_value(rowObject.findAttribute(column), type))
  File &quot;/usr/lib/python2.2/site-packages/twisted/enterprise/row.py&quot;,
line 87, in findAttribute
    return getattr(self, attr)
AttributeError: ZONE_SOA instance has no attribute 'ZONE_SOAID'
&lt;- snip -&gt;

&quot;ZONE_SOAID&quot; is the primary key for the &quot;ZONE_SOA&quot; table.  I did not set
the primary key because it is a postgres serial column - that is, it
should automatically increment the pkey each time a new row is
inserted.  If I use setKeyAttr(&quot;ZONE_SOAID&quot;, 1), the AttributeError
comes up for the next attribute that is not being given a value.

I read the row documentation a little more, and it doesn't appear to
like what I'm trying to do all too much.  I can use python to fill the
object with default values, but the database will do that for me, and
with less work on the part of my application (plus, the KeyFactory class
says it is not thread-safe, I know that my postgres series is).

Is there any way for row to allow me to insert a new row with some empty
values, and simply ignore them (allowing the database to use its'
default)?  If not, any idears on where/how this might need to be done? 
Perhaps this is a good time for me to foray into twisted hacking..

TIA,

-Justin



</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036004.html">[Twisted-Python] release momentum
</A></li>
	<LI>Next message (by thread): <A HREF="035963.html">[Twisted-Python] enterprise.row
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3452">[ date ]</a>
              <a href="thread.html#3452">[ thread ]</a>
              <a href="subject.html#3452">[ subject ]</a>
              <a href="author.html#3452">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
