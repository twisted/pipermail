<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] newbie -- trying to do async ldap operations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20newbie%20--%20trying%20to%20do%20async%20ldap%20operations&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003717.html">
   <LINK REL="Next"  HREF="003689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] newbie -- trying to do async ldap operations</H1>
    <B>Allan Streib</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20newbie%20--%20trying%20to%20do%20async%20ldap%20operations&In-Reply-To="
       TITLE="[Twisted-Python] newbie -- trying to do async ldap operations">astreib at indiana.edu
       </A><BR>
    <I>Tue Apr 22 19:19:28 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003717.html">[Twisted-Python] Any papers or slides etc available from PyCon?
</A></li>
        <LI>Next message: <A HREF="003689.html">[Twisted-Python] newbie -- trying to do async ldap operations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3687">[ date ]</a>
              <a href="thread.html#3687">[ thread ]</a>
              <a href="subject.html#3687">[ subject ]</a>
              <a href="author.html#3687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>First to set my perspective -- I never heard of Twisted before two days
ago.

I have an XMLRPC server built with the Medusa framework.  I am looking at
moving the methods to Twisted in order to take advantage of Deferreds, SSL
support, and based on my brief exposure, the overall framework seems
cleaner.

This is a simplification, but to keep this short I have an XMLRPC method
that returns results from an LDAP search.  Currently the searches are
synchronous but they are fast enough that it has not been a problem.  Now
I need to expand the search filter options which will (could) result in a
slower search.

The OpenLDAP API (and python-ldap) supports asynchronus searching.  Sounds
perfect.  A call to ldap.search_s() returns a message ID which is later
used in a call to result() to get the results.  ldap.result() takes the
message ID, and a timeout argument which if zero is in effect a poll.

So what I want is for my XMLRPC method to invoke search_s and get the
message ID.  Then create a defered and provide its callback and the
message ID to something that will poll ldap.result() until it returns
results (if results are not ready it will return [None, None]) and then
pass those to the callback.  Here's where I get confused; I think the call
to ldap.result() needs to be done by reactor somehow since ldap.result()
may need to be called repeatedly before results are ready) but I'm not
sure.

The whole deferred light bulb has not quite come on for me yet, so I
appreciate any guidance.  The defer HOWTO examples all use something like
reactor.callLater() to represent a &quot;delayed result&quot; which is not really
helping me.  The XMLRPC example of returning a defered just returns
defer.succeed(&quot;hello&quot;), again not quite a rich enough example.

I thought about adapting the adbapi stuff for LDAP, but the notion is in
my head that I should be able to do this without threads since the ldap
API supports async operations.

Many thanks,

Allan
-- 
&quot;If you understand what you're doing, you're not learning anything&quot;
                                             - Anon


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003717.html">[Twisted-Python] Any papers or slides etc available from PyCon?
</A></li>
	<LI>Next message: <A HREF="003689.html">[Twisted-Python] newbie -- trying to do async ldap operations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3687">[ date ]</a>
              <a href="thread.html#3687">[ thread ]</a>
              <a href="subject.html#3687">[ subject ]</a>
              <a href="author.html#3687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
