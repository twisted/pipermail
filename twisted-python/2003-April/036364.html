<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Reloading of the same `.rpy' file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Reloading%20of%20the%20same%20%60.rpy%27%20file&In-Reply-To=%3Coqn0i9xdy2.fsf%40titan.progiciels-bpi.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036359.html">
   <LINK REL="Next"  HREF="036360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Reloading of the same `.rpy' file</H1>
    <B>François Pinard</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Reloading%20of%20the%20same%20%60.rpy%27%20file&In-Reply-To=%3Coqn0i9xdy2.fsf%40titan.progiciels-bpi.ca%3E"
       TITLE="[Twisted-Python] Re: Reloading of the same `.rpy' file">pinard at iro.umontreal.ca
       </A><BR>
    <I>Tue Apr 29 14:10:13 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036359.html">[Twisted-Python] Reloading of the same `.rpy' file
</A></li>
        <LI>Next message (by thread): <A HREF="036360.html">[Twisted-Python] Twisted 1.0.4 - Possible typo in twisted.web.vhost ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36364">[ date ]</a>
              <a href="thread.html#36364">[ thread ]</a>
              <a href="subject.html#36364">[ subject ]</a>
              <a href="author.html#36364">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>[Christopher Armstrong]

&gt;<i> On 2003.04.29 10:41, Fran&#231;ois Pinard wrote:
</I>&gt;<i> &gt; ----------------------------------------------------------------------&gt;
</I>&gt;<i> &gt; import remanent
</I>&gt;<i> &gt; resource = remanent.resource
</I>&gt;<i> &gt; ----------------------------------------------------------------------&lt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; which is a bit ridiculous if it has to be a standard idiom.
</I>
&gt;<i> Why is it ridiculous?
</I>
Sorry if the word offended anyone, it surely was not my intent to do so.

I only meant that if there is really no advantage at reloading an RPY file,
then there is an advantage at loading it only once (unless such RPY files
are so numerous or so big that it would create a memory problem, but it
might likely not be the case in practice), which is avoiding spurious or
useless re-initialisation.  Then, the proper way would be to use a two-liner
for each such file, and having such small bootstraps is questionable.

&gt;<i> The semantics for .rpy are good because they're flexible; you can either
</I>&gt;<i> recreate your Resource object every time, or you can cache it.  [...]  It
</I>&gt;<i> gives you a choice between CPU usage (recreating your Resource every time)
</I>&gt;<i> and memory usage (keeping your Resources around in memory between
</I>&gt;<i> requests).  [...] Also, mind that .rpys are meant to be as tiny as
</I>&gt;<i> possible; they're just supposed to be glue code between your web app code
</I>&gt;<i> and the web server.
</I>
If a resource was consuming a lot of memory, I would understand.  But as you
just explained, RPY files are meant to be tiny, and then unlikely to build
tons of fresh bytes in Python structures.

Yet, within a small RPY file, one might import from library big modules
having Resource based classes, and resources are meant to be freed
immediately after having been consumed.  For example, such a library
resource might define some big triple-quoted static string holding the
template of an HTML page.  But then, the module will stay imported after the
RPY file disappears, the big string will not be freed, and reloading will
not trigger significant memory savings.  If the template string gets read
from disk each time, it will likely be kept in a local variable in the
`render' method, and will be freed as soon as we exit that method, so
reloading does not in itself trigger memory savings in that case either.

So, just to help me understand, could you illustrate by an example, a likely
case demonstrating the flexibility gained by multiple reloading?

&gt;<i> Also, IIRC there's some sort of caching mechanism that glyph implemented for
</I>&gt;<i> rpys, but I don't remember how it works.
</I>
It might be those Registry instances which Moshe referred to in a recent
message, and which are sketched a bit quickly in the book, page 23, (2.3.2
&quot;Using Twisted.Web&quot;, section &quot;Resource Scripts&quot;).

-- 
François Pinard   <A HREF="http://www.iro.umontreal.ca/~pinard">http://www.iro.umontreal.ca/~pinard</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036359.html">[Twisted-Python] Reloading of the same `.rpy' file
</A></li>
	<LI>Next message (by thread): <A HREF="036360.html">[Twisted-Python] Twisted 1.0.4 - Possible typo in twisted.web.vhost ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36364">[ date ]</a>
              <a href="thread.html#36364">[ thread ]</a>
              <a href="subject.html#36364">[ subject ]</a>
              <a href="author.html#36364">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
