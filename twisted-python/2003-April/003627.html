<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: feedback requested -- flow.py goes beta
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20feedback%20requested%20--%20flow.py%20goes%20beta&In-Reply-To=b7ov83%24ot8%241%40main.gmane.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003624.html">
   <LINK REL="Next"  HREF="003625.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: feedback requested -- flow.py goes beta</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20feedback%20requested%20--%20flow.py%20goes%20beta&In-Reply-To=b7ov83%24ot8%241%40main.gmane.org"
       TITLE="[Twisted-Python] Re: feedback requested -- flow.py goes beta">cce at clarkevans.com
       </A><BR>
    <I>Fri Apr 18 11:02:31 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003624.html">[Twisted-Python] Re: feedback requested -- flow.py goes beta
</A></li>
        <LI>Next message: <A HREF="003625.html">[Twisted-Python] Re: feedback requested -- flow.py goes beta
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3627">[ date ]</a>
              <a href="thread.html#3627">[ thread ]</a>
              <a href="subject.html#3627">[ subject ]</a>
              <a href="author.html#3627">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've got a user interface question to ask... there are several user
interface improvements possible in flow's operation, here are the 
options:

currently:

  producer = flow.wrap([1,2,3])
  while 1:
      yield producer
      res = producer.getResult() 
      // handle success

  # or, if you wish to handle failures...

  producer = flow.wrap([1,2,3])
  while 1:
      yield producer
      if producer.stop: break
      if producer.isFailure:
          fail = producer.result
          // handle failure
      else:
          res = producer.result
          // handle success
      
We can reduce one line of code by making wrap return
an iterator... which always returns iself.   Thus, the
creation+while loop can be collapsed into a single 
for line.  Unfortunately, this isn't all that intutive
since the item being looped over isn't the result

   for producer in flow.wrap([1,2,3]):
        # same as above, use either form

Another option, which uses for construct,

   producer = flow.wrap([1,2,3])
   yield producer
   for result in producer:
       // handle success
       yield producer

   producer = flow.wrap([1,2,3], raiseFailures = 0)
   yield producer
   for result in producer:
       if producer.isFailure:
           // handle failure
       else:
           // handle success
       yield producer

I'm not sure if this is better... but it does
use the for loop correctly.   There is a variant
which could save one line of code in the yield...

   # done once at the top of the file
   import flow
   flow = flow.Flow()   # create a 'global' flow object


   # done elsewhere...

       yield flow.wrap([1,2,3])
       for result in flow:
           // handle success
           yield flow

This example keeps the 'producer' in a sort-of global
variable so it can be reused.   If you had more than
one producer, you'd have to fall-back on the previous
mechanism.  But for items with a single flow, this
perhaps could be useful.  I don't know, I haven't thought
it through very much.

Another advantage of this second form, is that producer
could sprout a 'peek' method to look at the next result...
but a problem of this method is that each wrapped producer
won't release the current value till the next one is
acquired (or the end of the iteration).   This could be
a problem.. I don't know.

Best,

Clark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003624.html">[Twisted-Python] Re: feedback requested -- flow.py goes beta
</A></li>
	<LI>Next message: <A HREF="003625.html">[Twisted-Python] Re: feedback requested -- flow.py goes beta
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3627">[ date ]</a>
              <a href="thread.html#3627">[ thread ]</a>
              <a href="subject.html#3627">[ subject ]</a>
              <a href="author.html#3627">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
