<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted 1.0.4 - `mktap --help SERVER'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%201.0.4%20-%20%60mktap%20--help%20SERVER%27&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003725.html">
   <LINK REL="Next"  HREF="003722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted 1.0.4 - `mktap --help SERVER'</H1>
    <B>Francois Pinard</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%201.0.4%20-%20%60mktap%20--help%20SERVER%27&In-Reply-To="
       TITLE="[Twisted-Python] Twisted 1.0.4 - `mktap --help SERVER'">pinard at iro.umontreal.ca
       </A><BR>
    <I>Wed Apr 23 19:06:24 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003725.html">[Twisted-Python] Twisted 1.0.4 - Figures in the manual
</A></li>
        <LI>Next message: <A HREF="003722.html">[Twisted-Python] Twisted 1.0.4 - `mktap --help SERVER'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3721">[ date ]</a>
              <a href="thread.html#3721">[ thread ]</a>
              <a href="subject.html#3721">[ subject ]</a>
              <a href="author.html#3721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, still me.

After having quickly glanced over the manual, I'm reading it a bit more
carefully now, and if comments like this message continue to pop up, you
will observe my progression, or non-progression if I cannot find enough
time :-), without my real will.  Sigh!  OK, let not me be too shy...

Page 21 (2.2.3 mktap and tapconvert) says: &quot;For a given server, `mktap
--help &lt;name&gt;' shows the possible configuration options.&quot;.  The following
shell script:

----------------------------------------------------------------------&gt;
#!/bin/bash
for s in coil conch dns ftp im inetd mail manhole news parent pinger ponger \
	 portforward procmon sibling socks telnet toc web words zoot; do
  echo $s =====================================
  mktap --help $s &lt; /dev/null
done
----------------------------------------------------------------------&lt;

seems to show that this is not completely true.

* For coil, dns, ftp, im, mail, pinger, ponger, portforward, socks, telnet,
  toc, web, words and zoot, I got no output at all, so I presume this
  may be interpreted as meaning that these servers use no option.  Yet,
  for all those, a `.tap' file was created, which is probably not what
  one expect from a mere `--help' option.  So maybe the `--help' did not
  work so well after all.

* I also got many DeprecationWarnings, which probably should not be there.
  Let's see:

  + conch yields:

----------------------------------------------------------------------&gt;
WARNING: exceptions.DeprecationWarning::
    setApplication is deprecated, use setServiceCollection instead.
file: /usr/lib/python2.2/site-packages/twisted/scripts/mktap.py; line: 217
----------------------------------------------------------------------&lt;

  + parent yields:

----------------------------------------------------------------------&gt;
WARNING: exceptions.DeprecationWarning::
    You have to pass an authorizer separately from an application now.
file: /usr/lib/python2.2/site-packages/twisted/sibling/parentserv.py; line: 23

WARNING: exceptions.DeprecationWarning::
    Application.authorizer attribute is deprecated, use Service.authorizer instead
file: /usr/lib/python2.2/site-packages/twisted/cred/service.py; line: 84

WARNING: exceptions.DeprecationWarning::
    setApplication is deprecated, use setServiceCollection instead.
file: /usr/lib/python2.2/site-packages/twisted/python/reflect.py; line: 192

WARNING: exceptions.DeprecationWarning::
    Application.authorizer attribute is deprecated, use Service.authorizer instead
file: /usr/lib/python2.2/site-packages/twisted/spread/pb.py; line: 959
----------------------------------------------------------------------&lt;

  + sibling yields:

----------------------------------------------------------------------&gt;
WARNING: exceptions.DeprecationWarning::
    You have to pass an authorizer separately from an application now.
file: /usr/lib/python2.2/site-packages/twisted/sibling/siblingserv.py; line: 68

WARNING: exceptions.DeprecationWarning::
    Application.authorizer attribute is deprecated, use Service.authorizer instead
file: /usr/lib/python2.2/site-packages/twisted/cred/service.py; line: 84

WARNING: exceptions.DeprecationWarning::
    Application.authorizer attribute is deprecated, use Service.authorizer instead
file: /usr/lib/python2.2/site-packages/twisted/sibling/siblingserv.py; line: 80

WARNING: exceptions.DeprecationWarning::
    Application.authorizer attribute is deprecated, use Service.authorizer instead
file: /usr/lib/python2.2/site-packages/twisted/sibling/siblingserv.py; line: 82

WARNING: exceptions.DeprecationWarning::
    Application.authorizer attribute is deprecated, use Service.authorizer instead
file: /usr/lib/python2.2/site-packages/twisted/spread/pb.py; line: 959
----------------------------------------------------------------------&lt;

  and for these three cases as well, a `.tap' file was created.  So maybe
  `--help' does not work as documented for these either.

* manhole did ask for supplementary information, like this:

----------------------------------------------------------------------&gt;
Password: 
Confirm: 
----------------------------------------------------------------------&lt;

  While sorting and cleaning out my various tries, I also found another
  case for `mktap --help manhole' which yielded the following:

----------------------------------------------------------------------&gt;
An error unexpected occurred:
  File &quot;/usr/lib/python2.2/site-packages/twisted/tap/manhole.py&quot;, line 45, in opt_password
    self['password'] = util.getPassword(confirm=1)
  File &quot;/usr/lib/python2.2/site-packages/twisted/python/util.py&quot;, line 154, in getPassword
    if password[-1] == '\n':
IndexError: string index out of range
----------------------------------------------------------------------&lt;

  yet I do not find back the exact recipe I use for producing this.
  Maybe the traceback will give hints about another problem?  In any case,
  a `.tap' file was created.

* For inetd, I got:

----------------------------------------------------------------------&gt;
An error unexpected occurred:
  File &quot;/usr/lib/python2.2/site-packages/twisted/runner/inetdconf.py&quot;, line 90, in parseLine
    self.parseFields(*line.split())
  File &quot;/usr/lib/python2.2/site-packages/twisted/runner/inetdconf.py&quot;, line 174, in parseFields
    raise InvalidServicesConfError, 'Invalid port/protocol:' + \
InvalidServicesConfError: Invalid port/protocol:'3322-3325'
----------------------------------------------------------------------&lt;

  At least, no `.tap' was created. :-)

* Both news and procmon provided the expected help output, and created no
  `.tap'.  However, the help was assorted with an error diagnostic,
  which is probably not appropriate for a mere help request.

  + news help output was prefixed with:

----------------------------------------------------------------------&gt;
Usage Error: No newsgroups specified
----------------------------------------------------------------------&lt;

  + procmon help output was suffixed with:

----------------------------------------------------------------------&gt;
Wrong number of arguments.
----------------------------------------------------------------------&lt;

  Even if the errors were expected, they should _ideally_ be presented
  both before, or both after; and both have the `Usage Error:' prefix,
  or both not have it.

All in all, I'm left with the impression that `--help' does not work,
or at least, not as documented in the book.

It might be worth, maybe, adding another unit test which makes sure that
`mktap --help &lt;name&gt;' produces for all servers, some output (on standard
output ideally, not standard error), or no output at all, but surely no
traceback, and with an exit status that would be consistently zero.

-- 
Fran&#231;ois Pinard   <A HREF="http://www.iro.umontreal.ca/~pinard">http://www.iro.umontreal.ca/~pinard</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003725.html">[Twisted-Python] Twisted 1.0.4 - Figures in the manual
</A></li>
	<LI>Next message: <A HREF="003722.html">[Twisted-Python] Twisted 1.0.4 - `mktap --help SERVER'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3721">[ date ]</a>
              <a href="thread.html#3721">[ thread ]</a>
              <a href="subject.html#3721">[ subject ]</a>
              <a href="author.html#3721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
