<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] imap and noop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20imap%20and%20noop&In-Reply-To=%3C4A54AE4D.8040601%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052457.html">
   <LINK REL="Next"  HREF="052445.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] imap and noop</H1>
    <B>Darren Syzling</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20imap%20and%20noop&In-Reply-To=%3C4A54AE4D.8040601%40gmail.com%3E"
       TITLE="[Twisted-Python] imap and noop">dsyzling at gmail.com
       </A><BR>
    <I>Wed Jul  8 08:33:49 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052457.html">[Twisted-Python] Possible Twisted sprint
</A></li>
        <LI>Next message (by thread): <A HREF="052445.html">[Twisted-Python] imap and noop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52444">[ date ]</a>
              <a href="thread.html#52444">[ thread ]</a>
              <a href="subject.html#52444">[ subject ]</a>
              <a href="author.html#52444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm new to twisted and was experimenting trying to create an imap server 
based on the example within Twisted Network Programming Essentials. My 
test client is Thunderbird.

I'm wondering if anyone has had any experience handling the 'noop' 
command here's my scenario:
- I have two unread messages in a folder, I open thunderbird, select 
this folder and then select trash - trash has no messages.
- Each folder is selected and fetched with a uid:*
- My server correctly responds.
- Each time I now select the trash folder since it didn't have any 
messages to start with Thunderbird continues to send noops. I think it's 
waiting for my server to respond with exists or recent.
- Ok so I continue, I read and delete the two messages in my folder, 
Thunderbird issues copy commands, I dutifully flag the messages in the 
folder as \Deleted and the messages are added (via addMessage) to the 
Trash folder with the correct flags - \Seen.
- But now if I select the Trash folder thunderbird just sends noop - 
again it looks like it wants the server to send back exists or recent to 
indicate there are now messages in that folder - even though it's just 
copied stuff to the folder.

If in the above scenario I don't select the trash folder first and 
messages are deleted everything works fine - but in that case the client 
is sending fetch uid:*. It seems that if Thunderbird detects no messages 
in a folder it will noop until the server responds with an update.

Anyone seen or worked around this? Are there hooks in the imap framework 
to allow a mailbox or my mailserver to respond to noops? I don't appear 
to have any mailbox listeners subscribed and I tried overriding the noop 
for my derived IMAP4Server protocol derived class - but to no avail.


Darren


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052457.html">[Twisted-Python] Possible Twisted sprint
</A></li>
	<LI>Next message (by thread): <A HREF="052445.html">[Twisted-Python] imap and noop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52444">[ date ]</a>
              <a href="thread.html#52444">[ thread ]</a>
              <a href="subject.html#52444">[ subject ]</a>
              <a href="author.html#52444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
