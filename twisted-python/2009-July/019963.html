<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Chaining deferreds - Twisted+PyGtk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Chaining%20deferreds%20-%20Twisted%2BPyGtk&In-Reply-To=dfbefb090907151536g139259bbo78fd304d948c1b99%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019962.html">
   <LINK REL="Next"  HREF="019964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Chaining deferreds - Twisted+PyGtk</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Chaining%20deferreds%20-%20Twisted%2BPyGtk&In-Reply-To=dfbefb090907151536g139259bbo78fd304d948c1b99%40mail.gmail.com"
       TITLE="[Twisted-Python] Chaining deferreds - Twisted+PyGtk">exarkun at divmod.com
       </A><BR>
    <I>Wed Jul 15 21:14:46 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019962.html">[Twisted-Python] Chaining deferreds - Twisted+PyGtk
</A></li>
        <LI>Next message: <A HREF="019964.html">[Twisted-Python] Chaining deferreds - Twisted+PyGtk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19963">[ date ]</a>
              <a href="thread.html#19963">[ thread ]</a>
              <a href="subject.html#19963">[ subject ]</a>
              <a href="author.html#19963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 16 Jul 2009 00:36:33 +0200, &#321;ukasz Rekucki &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">lrekucki at gmail.com</A>&gt; wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>I'm writing a simple chat client using twisted and pygtk. I have a problem
</I>&gt;<i>with a chained deferred not being continued. Here is my call chain:
</I>&gt;<i>
</I>&gt;<i>* MyProtocol.dataReceived -&gt; fires a predefined Deferred [call it A]
</I>&gt;<i>* A.callback1 -&gt; creates a new Deferred B, adds a single callback to it,
</I>&gt;<i>displays a GtkDialog returns B
</I>&gt;<i>* [A stops]
</I>&gt;<i>* dialog exits, I call B.callback(result_id) from the signal callback
</I>&gt;<i>* all callback in B's chains are called
</I>&gt;<i>* program hangs instead calling A.callback2
</I>&gt;<i>
</I>&gt;<i>Is this a thread related problem ? Am I doing something terribly wrong by
</I>&gt;<i>calling a deferred from the gtk thread ?
</I>
It sounds like you're doing the right thing.  There is no gtk thread when you
use one of the gtk integration reactors - gtk and Twisted coexist in the same
thread.  So it's just fine to use Twisted APIs from a gtk signal callback.

Perhaps there is an unexpected error occurring.  Do you have a final errback
on your Deferred (one on A in this case would be fine) which logs the error
or otherwise makes it visible?  If not, you have to rely on luck and the
garbage collector to make this report.

Jean-Paul

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019962.html">[Twisted-Python] Chaining deferreds - Twisted+PyGtk
</A></li>
	<LI>Next message: <A HREF="019964.html">[Twisted-Python] Chaining deferreds - Twisted+PyGtk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19963">[ date ]</a>
              <a href="thread.html#19963">[ thread ]</a>
              <a href="subject.html#19963">[ subject ]</a>
              <a href="author.html#19963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
