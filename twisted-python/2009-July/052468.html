<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Cancel/stop Deferred() at any time
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Cancel/stop%20Deferred%28%29%20at%20any%20time&In-Reply-To=%3Cm2ljmrdkoa.fsf%40valheru.db3l.homeip.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052465.html">
   <LINK REL="Next"  HREF="052469.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Cancel/stop Deferred() at any time</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Cancel/stop%20Deferred%28%29%20at%20any%20time&In-Reply-To=%3Cm2ljmrdkoa.fsf%40valheru.db3l.homeip.net%3E"
       TITLE="[Twisted-Python] Cancel/stop Deferred() at any time">db3l.net at gmail.com
       </A><BR>
    <I>Tue Jul 14 15:22:29 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052465.html">[Twisted-Python] Cancel/stop Deferred() at any time
</A></li>
        <LI>Next message (by thread): <A HREF="052469.html">[Twisted-Python] Cancel/stop Deferred() at any time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52468">[ date ]</a>
              <a href="thread.html#52468">[ thread ]</a>
              <a href="subject.html#52468">[ subject ]</a>
              <a href="author.html#52468">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">vitaly at synapticvision.com</A> writes:

&gt;<i> &quot;cancel&quot; callback - stop running now what you've been asked to exec.
</I>&gt;<i> Example: some SQL query that takes 5 min and I need to cancel it  
</I>&gt;<i> anywhere in the middle and it, of course, it doesn't matter what the  
</I>&gt;<i> result set.
</I>
Note that the Deferred itself has no notion of the underlying
operation - it's just a placeholder for the callback chain to run.  So
trying to get from the deferred back to, for example, the database
query that will eventually use it for the result, is sort of like the
classic Python question of asking what name refers to an object, when
the object really has no idea who holds a reference to it.

If you actually want to try to interrupt a specific operation, then
you'll have to go to the actual application code performing the
operation, and that code will have to have a way to actually cancel an
ongoing activity.  It can then trigger the deferred chain with an
appropriate result (or probably Failure) that indicates cancellation.
That's going to be application-code specific, as Jean-Paul suggested.
In the database case, some database wrappers may support requesting an
interruption of an active query, but some might not.

If, however, you just want to avoid any existing deferred callback
chain from being triggered, but can let the operation proceed while
ignoring its result, I'd think you could just pause the deferred and
never resume it.  That will keep the deferred from triggering any
further callbacks past the point when it was paused, but won't
actually interrupt any currently active operations that the deferred
represents.  If you have code blocked waiting on that deferred (your
second example) it'll never complete without additional cheating -
perhaps initiating a fake callback on the chain first, though you'd
have to use some internals of Deferred or else risk a pause during the
callback opening up a window where the original source could attempt
to re-trigger the callback.

-- David



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052465.html">[Twisted-Python] Cancel/stop Deferred() at any time
</A></li>
	<LI>Next message (by thread): <A HREF="052469.html">[Twisted-Python] Cancel/stop Deferred() at any time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52468">[ date ]</a>
              <a href="thread.html#52468">[ thread ]</a>
              <a href="subject.html#52468">[ subject ]</a>
              <a href="author.html#52468">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
