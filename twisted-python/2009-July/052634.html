<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [Fwd: Re: Deferred documentation rewrite]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BFwd%3A%20Re%3A%20Deferred%20documentation%20rewrite%5D&In-Reply-To=%3Cd9047f780907312140m4a126c38h568bff052b8a1aec%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052630.html">
   <LINK REL="Next"  HREF="020125.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [Fwd: Re: Deferred documentation rewrite]</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BFwd%3A%20Re%3A%20Deferred%20documentation%20rewrite%5D&In-Reply-To=%3Cd9047f780907312140m4a126c38h568bff052b8a1aec%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] [Fwd: Re: Deferred documentation rewrite]">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Jul 31 22:40:32 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052630.html">[Twisted-Python] [Fwd: Re:  Deferred documentation rewrite]
</A></li>
        <LI>Next message (by thread): <A HREF="020125.html">[Twisted-Python] Deferred documentation rewrite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52634">[ date ]</a>
              <a href="thread.html#52634">[ thread ]</a>
              <a href="subject.html#52634">[ subject ]</a>
              <a href="author.html#52634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jul 31, 2009 at 11:35 PM, Edward Z. Yang &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ezyang at mit.edu</A>&gt; wrote:

&gt;<i> Excerpts from Itamar Shtull-Trauring's message of Fri Jul 31 22:26:29 -0400
</I>&gt;<i> 2009:
</I>&gt;<i> &gt; The problem with this is that it perpetuates the misunderstanding the
</I>&gt;<i> &gt; Deferreds *make* things asynchronous, even with the intro that says
</I>&gt;<i> &gt; otherwise. I think it's better to assume already asynchronous code,
</I>&gt;<i> &gt; handling the transition from synchronous to async in an intro event loop
</I>&gt;<i> &gt; howto.
</I>&gt;<i>
</I>&gt;<i> Either way, the function that the first segment of the new docs do belong
</I>&gt;<i> somewhere.  The documentation that traditionally served this purpose
</I>&gt;<i> has been removed.
</I>

I'm actually inclined to agree.  Understanding what Deferreds are *for* sort
of implies an understanding of why one would want to have a list of
callbacks in the first place, which implies a need to understand
asynchronous programming.

Realistically, I don't think there are a lot of people out there who have
managed to do anything at all useful with Twisted without undersanding
Deferreds.

I think it might be useful to lead into this section with a specific example
problem though, rather than a very vague general template for the category
of problems.  Once you've demonstrated a specific problem, you can always
expand the general category by briefly listing some other problems which are
similar.

As for perpetuating the misunderstanding of Deferreds making things
&gt;<i> asynchronous, I completely agree!  However, I think this is something
</I>&gt;<i> that can be fixed by spelling out the distinction between &quot;writing
</I>&gt;<i> asynchronous code&quot; and &quot;interacting with asynchronous code&quot;, and not
</I>&gt;<i> just omitting the important paradigm shift that comes with sync-&gt;async.
</I>

By the time you have to spell out that distinction, I think it's too late.
By the time the user is dealing with a Deferred, they should have a pretty
good idea that it's just a list of functions that will be called at some
point in the future; if you have to say &quot;here's this magic thing, oh, by the
way, it turns out it's just a list of functions&quot; they're still going to
think something's magic about it.

If you want an example that doesn't involve any reactor integration, you
might try showing a program that polls a directory for a file being added.
If you want to simultaneously wait for a file named &quot;1&quot; and a file named
&quot;2&quot;, you need to use callbacks, otherwise &quot;waiting&quot; for 2 will prevent the
code for 1 from running immediately if 1 shows up first.

I'm not really sure this can be done in a simple enough way to be useful, so
take it with a grain of thought.

&gt;<i> A better comparative exposition might be with normal callbacks, e.g.:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; &quot;def foo(x, gotResultCallback): pass&quot; vs. &quot;def foo(x): # return
</I>&gt;<i> &gt; Deferred&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; At the very least having that async but callbacky version in the middle
</I>&gt;<i> &gt; helps understanding.
</I>&gt;<i>
</I>&gt;<i> I briefly gloss on this, but I agree that this is an important point
</I>&gt;<i> that could be further expanded.  We could have implemented asynchronous
</I>&gt;<i> mechanisms using normal callbacks, but we decided to use Deferreds instead.
</I>&gt;<i>
</I>
Definitely agreed here.  For those users who are used to &quot;normal&quot; callbacks
(if there is such a thing), this explanation would be helpful to explain why
you need them rather than just passing functions around.  For users who
aren't even familiar with passing functions around, this would fill an
important intermediate gap.


&gt;<i> It's not clear to me if the common case of confusion of Deferreds occurs
</I>&gt;<i> in people who &quot;know callbacks&quot; but &quot;don't know Deferreds.&quot;  As an incoming
</I>&gt;<i> developer who was familiar with asynchronous programming, my primary
</I>&gt;<i> problem
</I>&gt;<i> was the ill-defined behavior of callback chains (which I resolved by
</I>&gt;<i> hunkering down and reading the source code) rather than any fundamental
</I>&gt;<i> misunderstanding of what Deferreds were supposed to do.
</I>&gt;<i>
</I>
I think we need an expanded version of the &quot;visual explanation&quot; here: &lt;
<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/defer.html">http://twistedmatrix.com/projects/core/documentation/howto/defer.html</A>&gt; (one
that uses complete sentences and more than one diagram), as well as an
expanded analogy to try:except: blocks in 'synchronous' python.

I object to the classification of the behavior of callback chains as
&quot;ill-defined&quot;.  It might have been poorly-explained, but that's very
different :).

&gt;<i> It also omits half the story: how you *create* Deferreds. There should
</I>&gt;<i> &gt; be a section on that as well.
</I>&gt;<i>
</I>&gt;<i> I agree.  In fact, it might be worth making the document a little longer
</I>&gt;<i> to address this point, because I realize now that even if you're not
</I>&gt;<i> writing asynchronous code, you'll often need to baton Deferreds to
</I>&gt;<i> make the execution flow work the way you want them to.
</I>&gt;<i>
</I>
+1.  Dealing with Deferred creation is a good way to introduce users to the
non-magicness of Deferreds.  It's less common to create one than to consume
one, but understanding how to create them should make it easier to
understand how to consume them.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20090801/7b297d95/attachment-0001.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052630.html">[Twisted-Python] [Fwd: Re:  Deferred documentation rewrite]
</A></li>
	<LI>Next message (by thread): <A HREF="020125.html">[Twisted-Python] Deferred documentation rewrite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52634">[ date ]</a>
              <a href="thread.html#52634">[ thread ]</a>
              <a href="subject.html#52634">[ subject ]</a>
              <a href="author.html#52634">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
