<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Trial changes working directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Trial%20changes%20working%20directory&In-Reply-To=BB13E4C4D649234F84A01F6DF64BB87F045DE7F6%40ccs-ex01.coldstorage.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019902.html">
   <LINK REL="Next"  HREF="019906.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Trial changes working directory</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Trial%20changes%20working%20directory&In-Reply-To=BB13E4C4D649234F84A01F6DF64BB87F045DE7F6%40ccs-ex01.coldstorage.com"
       TITLE="[Twisted-Python] Twisted Trial changes working directory">exarkun at divmod.com
       </A><BR>
    <I>Fri Jul  3 11:26:48 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019902.html">[Twisted-Python] Twisted Trial changes working directory
</A></li>
        <LI>Next message: <A HREF="019906.html">[Twisted-Python] Twisted Trial changes working directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19904">[ date ]</a>
              <a href="thread.html#19904">[ thread ]</a>
              <a href="subject.html#19904">[ subject ]</a>
              <a href="author.html#19904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 3 Jul 2009 10:17:12 -0400, Gerrat Rickert &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">grickert at coldstorage.com</A>&gt; wrote:
&gt;<i>I have a (Twisted) program that saves &amp; uses a file in the current
</I>&gt;<i>working directory.
</I>&gt;<i>When running tests for the program, Trial changes the working directory,
</I>&gt;<i>causing this file to be written into the '_trial_temp' directory
</I>&gt;<i>instead.
</I>&gt;<i>...so the program works differently when run via Trial vs. in normal
</I>&gt;<i>use.
</I>
The only difference I can infer from your description is whether the file
in question is created in the directory you invoke the program from (in
the non-trial case) or in the _trial_temp subdirectory of that directory
(in the trial case).  It's not obvious to me why this might be a problem.

&gt;<i>
</I>&gt;<i>There are a number of solutions to this, but I'd just like to understand
</I>&gt;<i>the reasoning behind this surprising behaviour.
</I>&gt;<i>The docs say that this: &quot;...allows them to write whatever data they like
</I>&gt;<i>to disk, and not worry about polluting the current working directory&quot;
</I>&gt;<i>...couldn't they just do this without changing the working directory?
</I>
This is an ancient feature of trial, from the days when Twisted's own test
suite (the primary driver of trial development for many years) was even
more crufty than it is today.  In those days, many tests just created files
in the working directory.  The _trial_temp feature provided a single fix
which addressed the mess created by all of the tests in one fell swoop.  The
behavior is still convenient for tests which aren't written carefully in
this regard.

Jean-Paul


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019902.html">[Twisted-Python] Twisted Trial changes working directory
</A></li>
	<LI>Next message: <A HREF="019906.html">[Twisted-Python] Twisted Trial changes working directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19904">[ date ]</a>
              <a href="thread.html#19904">[ thread ]</a>
              <a href="subject.html#19904">[ subject ]</a>
              <a href="author.html#19904">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
