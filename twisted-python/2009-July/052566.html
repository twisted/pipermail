<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.positioning: status report and request for	comments/feedback
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.positioning%3A%20status%20report%20and%20request%20for%0A%09comments/feedback&In-Reply-To=%3Ccedc0c090907291508s75303fa0w6a9626417e099a63%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052565.html">
   <LINK REL="Next"  HREF="052570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.positioning: status report and request for	comments/feedback</H1>
    <B>Laurens Van Houtven</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.positioning%3A%20status%20report%20and%20request%20for%0A%09comments/feedback&In-Reply-To=%3Ccedc0c090907291508s75303fa0w6a9626417e099a63%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] twisted.positioning: status report and request for	comments/feedback">lvh at laurensvh.be
       </A><BR>
    <I>Wed Jul 29 16:08:24 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052565.html">[Twisted-Python] PLAINAuthenticator in twisted.mail.imap4
</A></li>
        <LI>Next message (by thread): <A HREF="052570.html">[Twisted-Python] twisted.positioning: status report and request	for comments/feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52566">[ date ]</a>
              <a href="thread.html#52566">[ thread ]</a>
              <a href="subject.html#52566">[ subject ]</a>
              <a href="author.html#52566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi!


Most of you might remember that I was working on a twisted generic
positioning (GPS and things like it) framework, and here's a
preliminary status report. First of all, we've moved from
twisted.protocols.positioning to twisted.positioning. Yay! Seriously
though: work is mostly coming along nicely, and a serious patch for
separate review is probably only a few days' work away.

For those interested, the ticket is here:
<A HREF="http://twistedmatrix.com/trac/ticket/3926">http://twistedmatrix.com/trac/ticket/3926</A>
And you can check out work in progress from launchpad:
<A HREF="https://code.launchpad.net/~lvh/twisted/positioning">https://code.launchpad.net/~lvh/twisted/positioning</A>

As you might remember, we (thanks to the adhoc code reviews from
glyph, tazle, dash andexarkun) decided on an implementation slightly
different from the original one, using:
    - an NMEAReceiver class, which *only* does the receiving bit and
is perfectly stateless: this does things like unpacking the sentence
and checking the checksum
    - an IPositioningReceiver (now renamed IPositioningProvider, but
I'm not sure that's the right name yet) interface that has a bunch of
*sane* callbacks -- ones you actually want instead of ones that are
directly a consequence of NMEA being a steaming pile of dung
    - an NMEAAdapter that would adapt the receiver and keep as much
state as necessary internally to produce the meaningful callbacks as
defined in the interface

I'm having a bit of trouble implementing this this way, and I'd love
to hear your comments or suggestions on the topic.

Here's the code right now: <A HREF="http://bit.ly/1azA5q">http://bit.ly/1azA5q</A>
The interface lives in this file: <A HREF="http://bit.ly/3wWL2c">http://bit.ly/3wWL2c</A>

I originally thought that the NMEAAdapter (which adapts an
NMEAReceiver to the  IPositioningReceiver interface) was really an
adapter in the twisted.python.components sense of the word, so that
you could do something like  PositioningReceiver(NMEAReceiver()) and
you'd get and NMEAAdapter object, as described in the Twisted
components howto.

The problem is attaching the method stubs in NMEAReceiver (nmea_GPGGA,
nmea_GPRMC, nmea_GPGSV) to the methods in the NMEAAdapter that
actually interpret these sentences. Ordinarily, you'd subclass that
class to override those stubs. How do you feel this should be done
while keeping the adapter? Should we keep the adapter at all?

Of course, I could do ugly things in the adapters' __init__ like:

def __init__(self, receiver):
   receiver.nmea_GPGGA = self.nmea_GPGGA
   receiver.nmea_GPRMC = self.nmea_GPRMC
   receiver.nmea_GPGSV = self.nmea_GPGSV

But that looks like a really bad idea: it's like I'm subverting
inheritance. Instead, I'm currently doing this by subclassing the
receiver (thanks to exarkun for this suggestion):

class NMEAAdapter(NMEAReceiver):

This fixes the method stubs being correctly assigned (I suppose the
correct term would be overriding, through plain old inheritance). The
problem is that neither the interface nor components/adapters are
involved in any way, so I feel like I'm missing something important.


Thanks for reading
Laurens
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Use GnuPG with Firefox : <A HREF="http://getfiregpg.org">http://getfiregpg.org</A> (Version: 0.7.7)

iEYEARECAAYFAkpwyB4ACgkQT5v5zGkvKT5zPwCbB9IXwaUhP4mr33961ifG7Q92
exMAoLMh5pMXgBT0Q6kvkppCQCWJ26eZ
=9Rfs
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052565.html">[Twisted-Python] PLAINAuthenticator in twisted.mail.imap4
</A></li>
	<LI>Next message (by thread): <A HREF="052570.html">[Twisted-Python] twisted.positioning: status report and request	for comments/feedback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52566">[ date ]</a>
              <a href="thread.html#52566">[ thread ]</a>
              <a href="subject.html#52566">[ subject ]</a>
              <a href="author.html#52566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
