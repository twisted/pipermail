<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Can transport.write() to hostname instead of IP address?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Can%20transport.write%28%29%20to%20hostname%20instead%20of%0A%20IP%20address%3F&In-Reply-To=%3CCANzH6etqY4F6i_rJ2VSd%3DzotE0NPJB29ifvckg6JdENGrtGZyg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064492.html">
   <LINK REL="Next"  HREF="064508.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Can transport.write() to hostname instead of IP address?</H1>
    <B>Sean DiZazzo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Can%20transport.write%28%29%20to%20hostname%20instead%20of%0A%20IP%20address%3F&In-Reply-To=%3CCANzH6etqY4F6i_rJ2VSd%3DzotE0NPJB29ifvckg6JdENGrtGZyg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Can transport.write() to hostname instead of IP address?">sean.dizazzo at gmail.com
       </A><BR>
    <I>Thu Aug 30 14:22:14 MDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064492.html">[Twisted-Python] Can transport.write() to hostname instead of IP address?
</A></li>
        <LI>Next message (by thread): <A HREF="064508.html">[Twisted-Python] Can transport.write() to hostname instead of IP address?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64506">[ date ]</a>
              <a href="thread.html#64506">[ thread ]</a>
              <a href="subject.html#64506">[ subject ]</a>
              <a href="author.html#64506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i>You can't use connectSSL in combination with UNIX sockets
</I>
I'm working on a rewrite of this system which will use endpoints once
complete.  So far I've got basic server and client endpoints running over
TLS through our reverse proxy.  Its working as expected on a given port,
but I'd rather have the server listen on a unix socket.  Based on your
comment it sounds possible for a client to connect to a socket over TLS,
but is it possible for a server to listen on one over TLS?  I've tried
several different approaches and can't seem to find a way.

I tried wrapping a UnixServerEndpoint with my CertificateOptions, then
tried to find a way to pass a socket path into a SSL4ServerEndpoint
Can't seem to find a corresponding wraperServerTLS to the client function
Tim posted.

Thanks for your help, and thanks for writing Twisted.  :)

~Sean

On Sat, Aug 18, 2018 at 2:12 PM Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i> On Aug 17, 2018, at 9:24 AM, Sean DiZazzo &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sean.dizazzo at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Starting to look over the docs and I realize I might have just been able
</I>&gt;<i> to incorporate the `optionsForClientTLS` into what I was already using.
</I>&gt;<i>
</I>&gt;<i> I was using `reactor.connectSSL()` with a default
</I>&gt;<i> ``ssl.ClientContextFactory()` so I think I can make my own
</I>&gt;<i> sslClientContextFactory with `optionsForClientTLS(hostname=host)` and pass
</I>&gt;<i> that in to connectSSL instead.
</I>&gt;<i>
</I>&gt;<i> It would look something like this:
</I>&gt;<i>
</I>&gt;<i> reactor.connectSSL(hostname, port, MyProtocolClientFactory(),
</I>&gt;<i> optionsForClientTLS(hostname=hostname))
</I>&gt;<i>
</I>&gt;<i> I'll give it a try and play around with it.  If it doesn't work, I'll head
</I>&gt;<i> back over to the endpoint examples.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This should indeed work for now, but adopting endpoints is a more
</I>&gt;<i> forward-looking approach; &quot;connectSSL&quot; is a much less flexible API, and
</I>&gt;<i> will hopefully someday be removed.
</I>&gt;<i>
</I>&gt;<i> For example:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    1. You can't use connectSSL in combination with UNIX sockets
</I>&gt;<i>    2. When we (one day) have a client version of the PROXY endpoint, you
</I>&gt;<i>    won't be able to use that with connectSSL
</I>&gt;<i>    3. You can't do TLS-in-TLS tunneling with connectSSL for backhaul
</I>&gt;<i>    connections
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It's just generally harder to switch to other secure transports if you're
</I>&gt;<i> not using the endpoint APIs.
</I>&gt;<i>
</I>&gt;<i> Thanks for using Twisted,
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180830/d5b98d1c/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064492.html">[Twisted-Python] Can transport.write() to hostname instead of IP address?
</A></li>
	<LI>Next message (by thread): <A HREF="064508.html">[Twisted-Python] Can transport.write() to hostname instead of IP address?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64506">[ date ]</a>
              <a href="thread.html#64506">[ thread ]</a>
              <a href="subject.html#64506">[ subject ]</a>
              <a href="author.html#64506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
