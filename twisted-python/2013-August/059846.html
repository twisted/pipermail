<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted serialport dataReceived() provides	fragmented data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20serialport%20dataReceived%28%29%20provides%0A%09fragmented%20data&In-Reply-To=%3Cloom.20130829T172912-619%40post.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted serialport dataReceived() provides	fragmented data</H1>
    <B>Sivakumar Balasubramanian</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20serialport%20dataReceived%28%29%20provides%0A%09fragmented%20data&In-Reply-To=%3Cloom.20130829T172912-619%40post.gmane.org%3E"
       TITLE="[Twisted-Python] Twisted serialport dataReceived() provides	fragmented data">siva82kb at gmail.com
       </A><BR>
    <I>Thu Aug 29 09:38:17 MDT 2013</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59846">[ date ]</a>
              <a href="thread.html#59846">[ thread ]</a>
              <a href="subject.html#59846">[ subject ]</a>
              <a href="author.html#59846">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am tyring to implement a python program, using Twisted, to communicate
witha bluetooth device. The following is a sample code of what I have
implemented:

from twisted.internet import protocol, reactor
from twisted.internet.serialport import SerialPort
from twisted.protocols import basic

class DeviceBluetooth(basic.Int16StringReceiver):

    def connectionMade(self):
        print 'Connection made!'
        self.sendString('[01] help\n')

    def dataReceived(self, data):
        print&quot;Response: {0}&quot;.format(data)

        print &quot;-----&quot;
        print &quot;choose message to send: &quot;
        print &quot;1. Stim on&quot;
        print &quot;2. Stim off&quot;
        print &quot;3. Stim status&quot;
        print &quot;4. Help&quot;
        # user input
        ch = input(&quot;Choose command :: &quot;)
        if int(ch) == 1:
            self.sendString('[02] stim on\n')
        elif int(ch) == 2:
            self.sendString('[03] stim off\n')
        elif int(ch) == 3:
            self.sendString('[04] stim ?\n')
        elif int(ch) == 4:
            self.sendString('[05] help\n')
        else:
            reactor.stop()

SerialPort(DeviceBluetooth(), 'COM20', reactor, baudrate=115200)
reactor.run()

When I run the program, sometimes I get a response and other times I do not
receive anything. And most of the times long responses are fragmented appear
as part of the next message. I have through the hyperterminal to make sure
that I get the appropriate response from by bluetooth device. So, the
problem has to be with my code.

Is there something that I doing wrong in my code?



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59846">[ date ]</a>
              <a href="thread.html#59846">[ thread ]</a>
              <a href="subject.html#59846">[ subject ]</a>
              <a href="author.html#59846">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
