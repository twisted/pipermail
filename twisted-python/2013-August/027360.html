<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Advice on porting Python application to Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Advice%20on%20porting%20Python%20application%20to%20Twisted&In-Reply-To=%3CCAMYwhVnAKovHGav89EwD4cBKn9dYGJnSZvAZbpR%2B9CdBWeDVbw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059833.html">
   <LINK REL="Next"  HREF="059827.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Advice on porting Python application to Twisted</H1>
    <B>Matthew Humphrey</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Advice%20on%20porting%20Python%20application%20to%20Twisted&In-Reply-To=%3CCAMYwhVnAKovHGav89EwD4cBKn9dYGJnSZvAZbpR%2B9CdBWeDVbw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Advice on porting Python application to Twisted">mhumphrey at gmail.com
       </A><BR>
    <I>Mon Aug 26 21:06:03 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059833.html">[Twisted-Python] Failure.getTraceback and Unicode
</A></li>
        <LI>Next message (by thread): <A HREF="059827.html">[Twisted-Python] Advice on porting Python application to Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27360">[ date ]</a>
              <a href="thread.html#27360">[ thread ]</a>
              <a href="subject.html#27360">[ subject ]</a>
              <a href="author.html#27360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I recently created a small automated, remote (via web) controlled pet
feeder using a Raspberry Pi single-board computer. The software is all in
Python, and uses the simple HTTP server that is part of the Python
libraries. I discovered Twisted about 2/3 of the way through the project,
and now that I am done I would like to port it to use Twisted. After
reading much of the documentation the Twisted web site, some aspects of
this are fairly obvious to me, while others are not. I could use some
advice on how best to design my app to fit in with the Twisted framework.

Here are the major components of the application:

1) A web site that hosts a combination of static content and some REST
APIs. REST apis are called from Javascript Ajax, and do things like
enable/disable the webcam, dispense a treat, etc. The static content
consists of a single HTML page, some javascript scripts, and a JPG that is
captured by #3 below.

2) A thread that runs a loop which manages the hardware. It does this with
a simple state machine composed of a base class and subclasses for all the
states that the hardware can be in (starting, idle, displaying status on
the lcd, dispensing a treat, recovering from treat dispense cycle, shutting
down). After initializing the hardware and the initial state, the thread
loops continuously calling a &quot;timeTick&quot; event to the current state. WIthin
the states, the code looks at various hardware status (like whether a
button is pressed) and decides to take action or to trigger transition to
another state.

3) A thread that runs continuously capturing images from a webcam. This
thread captures low resolution images continuously, and compares sucessive
frames to see if there is significant number of different pixels (motion
detect). If so, it captures a higher resolution image, updates a symbolic
link to point to the most recent image captured, and deletes any excessive
files from previous captures. The images captured for the motion detect are
handled by executing a process and capturing the stdout. The higher res
images captured by executing a process that writes directly to a file.

Porting #1 is very straightforward after going through the tutorial on
Twisted web. However, I am not sure how to handle #2 and #3. I would
appreciate some suggestions from those who are familiar with Twisted.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20130826/9da2a403/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20130826/9da2a403/attachment.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059833.html">[Twisted-Python] Failure.getTraceback and Unicode
</A></li>
	<LI>Next message (by thread): <A HREF="059827.html">[Twisted-Python] Advice on porting Python application to Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27360">[ date ]</a>
              <a href="thread.html#27360">[ thread ]</a>
              <a href="subject.html#27360">[ subject ]</a>
              <a href="author.html#27360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
