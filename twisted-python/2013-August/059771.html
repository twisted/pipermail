<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Operating on metainformation in a distributed	system
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Operating%20on%20metainformation%20in%20a%20distributed%0A%09system&In-Reply-To=%3Carm809p04ut37u4kqp17fai1v7f2510e8f%404ax.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059770.html">
   <LINK REL="Next"  HREF="059772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Operating on metainformation in a distributed	system</H1>
    <B>Krysk</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Operating%20on%20metainformation%20in%20a%20distributed%0A%09system&In-Reply-To=%3Carm809p04ut37u4kqp17fai1v7f2510e8f%404ax.com%3E"
       TITLE="[Twisted-Python] Operating on metainformation in a distributed	system">avosirenfal at gmail.com
       </A><BR>
    <I>Thu Aug  8 21:06:30 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059770.html">[Twisted-Python] Operating on metainformation in a distributed system
</A></li>
        <LI>Next message (by thread): <A HREF="059772.html">[Twisted-Python] Operating on metainformation in a distributed system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59771">[ date ]</a>
              <a href="thread.html#59771">[ thread ]</a>
              <a href="subject.html#59771">[ subject ]</a>
              <a href="author.html#59771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>Hi Krysk
</I>&gt;<i>
</I>&gt;<i>I had similar design constraints when wanting to match up to four human 
</I>&gt;<i>players or computer players playing a card game. In the first monolithic 
</I>&gt;<i>approach I got a better feeling for how long match making actually 
</I>&gt;<i>takes, today we're seeing seldom more than ten tables being in the match 
</I>&gt;<i>make process, while there are up to two thousand user playing cards. The 
</I>&gt;<i>matchmaking for the game isn't the fun part, so users do away with it 
</I>&gt;<i>pretty fast.
</I>&gt;<i>
</I>&gt;<i>After observing user behavior for more than a year, I spread out the 
</I>&gt;<i>game logic to separate game servers with a central matchmaking process, 
</I>&gt;<i>maintaining all the metadata, doing the load balancing for the game 
</I>&gt;<i>servers and handling the broadcasting of status and activity information 
</I>&gt;<i>to players. Metadata stored and passed around is the usual stuff like 
</I>&gt;<i>game skill level, likeability, friends, blocked users, number of games 
</I>&gt;<i>played, and some. The data is kept in a MySQL DB, is fetched at log in 
</I>&gt;<i>and passed around with the player instance.
</I>&gt;<i>
</I>&gt;<i>This scheme so far balances very well and in case of needing to handle a 
</I>&gt;<i>lot more users, I would separate the matchmaking process to a dedicated 
</I>&gt;<i>machine.
</I>&gt;<i>
</I>&gt;<i>The whole setup for more than 50k games played to the end per day (about 
</I>&gt;<i>13mins average play time per game) is handled by an 8 core single 
</I>&gt;<i>processor machine with 24GB of RAM, usually we do not run more than 5-6 
</I>&gt;<i>game logic server processes. The machine is well balanced, extremely 
</I>&gt;<i>stable, no runaway situation was observed since deploying the system two 
</I>&gt;<i>years ago.
</I>&gt;<i>
</I>&gt;<i>The bottleneck I foresee in our case is the 100MB/s connection we have 
</I>&gt;<i>at the hosting center, currently we are only allowed one interface.
</I>&gt;<i>
</I>&gt;<i>For me dodging the sharing of metadata for the matchmaking was crucial, 
</I>&gt;<i>I didn't fear the sharing so much as the latency induced by sharing 
</I>&gt;<i>metadata among processes or machines, because the added latency adds a 
</I>&gt;<i>lot more incongruous stuff happening to the user's experiences. Match 
</I>&gt;<i>making on screen with manually selecting partners puts quite a strain on 
</I>&gt;<i>the imagination of the average user, with added latency to clicks and 
</I>&gt;<i>and answers, the users shy away from match making and start playing 
</I>&gt;<i>alone or with the much easier selectable computer players.
</I>&gt;<i>
</I>&gt;<i>HTH, Werner
</I>
That sounds similar to the approach I was planning on taking. That
does leave the question of how do you manage events? For instance,
when the central server figures out an appropriate match, how do you
pass the relevant data about the match (players, etc) to the game
server that's going to run it?

I imagine you either put that data in MySQL and have all servers poll
it periodically, or you have some kind of direct notification system
that are servers are listening to. Can you clarify?

Thanks,
Krysk


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059770.html">[Twisted-Python] Operating on metainformation in a distributed system
</A></li>
	<LI>Next message (by thread): <A HREF="059772.html">[Twisted-Python] Operating on metainformation in a distributed system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59771">[ date ]</a>
              <a href="thread.html#59771">[ thread ]</a>
              <a href="subject.html#59771">[ subject ]</a>
              <a href="author.html#59771">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
