<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [Fwd: Re: [Zope3-dev] Twisted as server]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%5BFwd%3A%20Re%3A%20%5BZope3-dev%5D%20Twisted%20as%20server%5D&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000789.html">
   <LINK REL="Next"  HREF="000767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [Fwd: Re: [Zope3-dev] Twisted as server]</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%5BFwd%3A%20Re%3A%20%5BZope3-dev%5D%20Twisted%20as%20server%5D&In-Reply-To="
       TITLE="[Twisted-Python] [Fwd: Re: [Zope3-dev] Twisted as server]">twisted at itamarst.org
       </A><BR>
    <I>Tue Feb 12 07:02:16 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="000789.html">[Twisted-Python] [Fwd: Re: [Zope3-dev] Twisted as server]
</A></li>
        <LI>Next message: <A HREF="000767.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted ChangeLog,1.13,1.14
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#790">[ date ]</a>
              <a href="thread.html#790">[ thread ]</a>
              <a href="subject.html#790">[ subject ]</a>
              <a href="author.html#790">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Glyph Lefkowitz wrote:


&gt;<i> That was quite a bit of text, if I understand properly -- he was saying
</I>&gt;<i> that you ought to be able to do proto.transport.write =
</I>&gt;<i> proto.transport.socket.makefile().write, with some additional buffering
</I>&gt;<i> trickery for optimization?
</I>
I think so, yes. Plus some architectural stuff about how they do 
multiple requests per connection (the task stuff.)

Our current transport code would in fact work with threads without any 
changes (i.e. you could do transport.write in a thread), if not for the 
fact that the event loop integration (addWriter, addReader) isn't thread 
safe.

Since in threaded mode the Selectable doesn't need to be in the event 
loop anyway, we just need a flush method for sync mode and a &quot;switch 
to/from sync mode&quot; method and we could have writing to transports be 
usable from threads (only one thread at a time, of course.)

Another nice thing is the Buffering stuff, which lets you have a buffer 
that is on disk as well - it would make producers less needed when 
sending large amounts of data. It would also improve performance of 
writing large amounts of data on fast connection, since without 
producers we can write-at-once.


See:
<A HREF="http://cvs.zope.org/Zope3/lib/python/Zope/Server/?only_with_tag=Zope-3x-branch">http://cvs.zope.org/Zope3/lib/python/Zope/Server/?only_with_tag=Zope-3x-branch</A>

DualModeChannel.DualModeChannel is the sync/async switchable transport.

Also, I'm starting to feel jealous of Zope3's amount of unittests...



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000789.html">[Twisted-Python] [Fwd: Re: [Zope3-dev] Twisted as server]
</A></li>
	<LI>Next message: <A HREF="000767.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted ChangeLog,1.13,1.14
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#790">[ date ]</a>
              <a href="thread.html#790">[ thread ]</a>
              <a href="subject.html#790">[ subject ]</a>
              <a href="author.html#790">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
