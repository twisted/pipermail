<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Windows issues...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Windows%20issues...&In-Reply-To=%3C20020219025543.GA11470%40ritsuko.xware.cx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033334.html">
   <LINK REL="Next"  HREF="033336.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Windows issues...</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Windows%20issues...&In-Reply-To=%3C20020219025543.GA11470%40ritsuko.xware.cx%3E"
       TITLE="[Twisted-Python] Windows issues...">andrew at puzzling.org
       </A><BR>
    <I>Mon Feb 18 19:55:43 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033334.html">[Twisted-Python] Windows issues...
</A></li>
        <LI>Next message (by thread): <A HREF="033336.html">[Twisted-Python] Windows issues...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33335">[ date ]</a>
              <a href="thread.html#33335">[ thread ]</a>
              <a href="subject.html#33335">[ subject ]</a>
              <a href="author.html#33335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Feb 18, 2002 at 09:15:41PM -0500, Benjamin Schollnick wrote:
&gt;<i> on 2/18/02 7:24 PM, Andrew Bennetts at <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrew-twisted at puzzling.org</A> wrote:
</I>&gt;<i> &gt; CL.EXE is a command line program that comes with MS Visual C++...  setup.py
</I>&gt;<i> &gt; is basically trying to compile a C extension module.  I can send you a
</I>&gt;<i> &gt; binary for that file if you don't have MS VC++ installed, otherwise run
</I>&gt;<i> &gt; VCVARS32.BAT and try again.
</I>&gt;<i> 
</I>&gt;<i> No Visual C++....
</I>&gt;<i> 
</I>&gt;<i> If you don't mind sending it, I would appreciate it...
</I>
I'll send it in a private mail.  It's compiled for Python 2.2 on Win2k; it
should be portable to any Win32, but I'm just guessing about that.

&gt;<i> This really needs to be noted.... I admit, I didn't search around too
</I>&gt;<i> much, but I didn't see anything mentioning that it required a C/C++
</I>&gt;<i> compiler...
</I>&gt;<i> 
</I>&gt;<i> (How about a precompiled Windows binary?  Or having Distutils install the
</I>&gt;<i> precompiled binary)....
</I>
I *think* what's supposed to happen is for it to fallback to a pure Python
implementation.  It's part of the twisted.spread package; if you're not
using spreadable computing, it doesn't really matter anyway.

&gt;<i> &gt; Yeah, -n uses os.fork, which is not available under Windows.  You probably
</I>&gt;<i> &gt; need to use NT services instead...
</I>&gt;<i> 
</I>&gt;<i> That's what I figured....
</I>&gt;<i> 
</I>&gt;<i> (By NT Services, you mean the services listed from control panels --&gt;
</I>&gt;<i> services?)
</I>
Yep.

&gt;<i> But I dislike the NT services.... I've never seen a service get installed,
</I>&gt;<i> that will &quot;uninstall&quot; properly...  (Usually add/remove program doesn't
</I>&gt;<i> uninstall the service)
</I>
These ones will :)

If you've got an ExampleService.py which contains the example below, you can
do:
  ExampleService.py install
  ExampleService.py start
  ExampleService.py stop
  ExampleService.py remove

As well as the usual stuff in the control panel... see the docs for the
win32serviceutil module for details.

&gt;<i> I prefer to run the console......reminds me a little bit more of a syslog
</I>&gt;<i> window... &gt;g&lt;
</I>
Yeah, but that requires you to be logged in for your server to run.  But I
know what you mean.

Have you seen simpleserv.py in the docs/example directory that came with
Twisted?  It doesn't require mktap or twistd, it just runs standalone -- my
servers all run like that, or optionally as a service via that module I
posted below.  I generally debug them by running them at the command line,
and then install them as a service when I think they're ready to run without
me needing to watch them :)

&gt;<i> &gt; Alternatively, consider using the cygwin version of Python -- it is closer
</I>&gt;<i> &gt; to the unix version, and so os.fork will work.  Also, it comes with gcc, so
</I>&gt;<i> &gt; cbanana would compile correctly.  Unfortunately, I don't think it can
</I>&gt;<i> &gt; interoperate with the Win32 extensions (at least, not that I know of).
</I>&gt;<i> 
</I>&gt;<i> I use the Win32 services, include ODBC... So that's not really a useable
</I>&gt;<i> workaround...
</I>
Yeah.  Are you using ODBC via COM (i.e. by calling
win32com.client.Dispatch(&quot;ADODB.Connection&quot;))?  If so, you will probably
want to use the mx.ODBC library with Twisted instead, as it can
automatically work with the twisted.enterprise stuff (with a tiny amount of
hackery).

&gt;<i> &gt; Incidentally, I'm not using the twistd stuff *at all* (I don't yet
</I>&gt;<i> &gt; understand the need for it under Windows, but then I don't even know exactly
</I>&gt;<i> &gt; what it's meant to do...).  Instead, I'm using this little file:
</I>&gt;<i> 
</I>&gt;<i> Is the following code &quot;temporary&quot;....  It's considered a service while
</I>&gt;<i> running, but doesn't get installed in the services control panel?
</I>
No, it's a full-blown service.  It can be installed as a service, it can be
set to start a startup, etc.

&gt;<i> It looks interesting, but I don't want to register the app as a &quot;true&quot;
</I>&gt;<i> service... As I mentioned before, I can't find a reliable way to remove
</I>&gt;<i> a service, without registry hacking...
</I>
Don't worry, that's already taken care of... this is Python, it plays nice
:<i>)
</I>
I'll be happy to elaborate further on any of this if you like.  Perhaps I
should whip up an example of installing and using simpleserv.py as a
service?

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033334.html">[Twisted-Python] Windows issues...
</A></li>
	<LI>Next message (by thread): <A HREF="033336.html">[Twisted-Python] Windows issues...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33335">[ date ]</a>
              <a href="thread.html#33335">[ thread ]</a>
              <a href="subject.html#33335">[ subject ]</a>
              <a href="author.html#33335">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
