<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted eats the error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20eats%20the%20error&In-Reply-To=%3CetPan.58a1fc5b.3bfa4c16.8c82%40me.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063625.html">
   <LINK REL="Next"  HREF="063627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted eats the error</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20eats%20the%20error&In-Reply-To=%3CetPan.58a1fc5b.3bfa4c16.8c82%40me.com%3E"
       TITLE="[Twisted-Python] twisted eats the error">ldanielburr at me.com
       </A><BR>
    <I>Mon Feb 13 11:35:07 MST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063625.html">[Twisted-Python] twisted eats the error
</A></li>
        <LI>Next message (by thread): <A HREF="063627.html">[Twisted-Python] twisted eats the error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63626">[ date ]</a>
              <a href="thread.html#63626">[ thread ]</a>
              <a href="subject.html#63626">[ subject ]</a>
              <a href="author.html#63626">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Steven,

On February 13, 2017 at 12:01:49 PM, steven meiers (<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">commercials24 at yahoo.de</A>) wrote:


&gt;<i> Sorry, your code example and your explanation don’t make clear what
</I>&gt;<i> you expect to happen, and when.  When you say “the first method that
</I>&gt;<i> is called from my code”, are you referring to  aSillyBlockingMethod,
</I>&gt;<i> or runEverySecond?  In the deferToThread case, you are calling the
</I>&gt;<i> former; in the task.LoopingCall case, you are calling the latter.
</I>
Ah youre right, i forgot to write about the most important part.
if the datetime line is wrong you get  
Unhandled Error  

i was looking for a way to get the original error message that:
print(datetime.now().strftime('%H:%M:%S'))

throws if used outside of twisted code.

i know how to correct the code but i would like to know why i dont get
that error on the console.


[SNIP]

The “Unhanded error in Deferred” isn’t coming from your call to deferToThread, it is coming from your task.LoopingCall.  When you invoke .start() on your LoopingCall instance, it returns a Deferred, which fires its assigned callback handler when you call .stop() on the LoopingCall instance, and which fires its assigned errback handler if an exception occurs while running the function (in this case runEverySecond) passed to the LoopingCall.

In other words, you need this:

l = task.LoopingCall(runEverySecond, ‘lala’)
l.addErrback(printError)

Hope this helps,

L. Daniel Burr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170213/6ff6bddf/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063625.html">[Twisted-Python] twisted eats the error
</A></li>
	<LI>Next message (by thread): <A HREF="063627.html">[Twisted-Python] twisted eats the error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63626">[ date ]</a>
              <a href="thread.html#63626">[ thread ]</a>
              <a href="subject.html#63626">[ subject ]</a>
              <a href="author.html#63626">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
