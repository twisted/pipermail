<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted eats the error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20eats%20the%20error&In-Reply-To=%3C1486999374.5873.2.camel%40yahoo.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063629.html">
   <LINK REL="Next"  HREF="063624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted eats the error</H1>
    <B>steven meiers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20eats%20the%20error&In-Reply-To=%3C1486999374.5873.2.camel%40yahoo.de%3E"
       TITLE="[Twisted-Python] twisted eats the error">commercials24 at yahoo.de
       </A><BR>
    <I>Mon Feb 13 08:22:54 MST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063629.html">[Twisted-Python] Twisted 17.1 Release Announcement
</A></li>
        <LI>Next message (by thread): <A HREF="063624.html">[Twisted-Python] twisted eats the error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63623">[ date ]</a>
              <a href="thread.html#63623">[ thread ]</a>
              <a href="subject.html#63623">[ subject ]</a>
              <a href="author.html#63623">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,


there is a abvious error in the code at the end.
since i know next to nothing about threads i thought maybe a print
statement in the code that is actually doing the work would give me
some pointers.

if im not mistaken, it is:
def callWithContext in python/context.py


as it turns out it does output nothing so i went back the call chain
until it prints something.
now im in:
internet/threads.py  def deferToThreadPool

but even there, printing the argument f prints nothing?
isnt that the first method that is called from my code?

im on linux with python 3.x and twisted 17





from twisted.internet import reactor, task, threads
import datetime

def aSillyBlockingMethod(x):
    import time
    time.sleep(4)
    return x


def runEverySecond():
    print('x')
    
    print(datetime.now().strftime('%H:%M:%S'))    #WRONG, ERROR:
AttributeError: 'module' object has no attribute 'now'
    # that error gets eaten by twisted....why?
    #print(datetime.datetime.now().strftime('%H:%M:%S'))    #WORKS


def printResult(result):
    print(&quot;printResult:&quot;, result)

def printError(failure):
    print(failure)


# this will &quot;sleep&quot; for x seconds
d = threads.deferToThread(aSillyBlockingMethod, 'some argument')
d.addCallback(printResult)
d.addErrback(printError)

# but this will still run, not getting blocked
l = task.LoopingCall(runEverySecond)
l.start(1.0)

reactor.run()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063629.html">[Twisted-Python] Twisted 17.1 Release Announcement
</A></li>
	<LI>Next message (by thread): <A HREF="063624.html">[Twisted-Python] twisted eats the error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63623">[ date ]</a>
              <a href="thread.html#63623">[ thread ]</a>
              <a href="subject.html#63623">[ subject ]</a>
              <a href="author.html#63623">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
