<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Python3 twistd daemon for Ubuntu 14.04 alternatives
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Python3%20twistd%20daemon%20for%20Ubuntu%2014.04%0A%20alternatives&In-Reply-To=%3C336C78C8-C143-4688-8997-8B57481DD37D%40ox.cx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063735.html">
   <LINK REL="Next"  HREF="063699.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Python3 twistd daemon for Ubuntu 14.04 alternatives</H1>
    <B>Hynek Schlawack</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Python3%20twistd%20daemon%20for%20Ubuntu%2014.04%0A%20alternatives&In-Reply-To=%3C336C78C8-C143-4688-8997-8B57481DD37D%40ox.cx%3E"
       TITLE="[Twisted-Python] Python3 twistd daemon for Ubuntu 14.04 alternatives">hs at ox.cx
       </A><BR>
    <I>Tue Feb 28 04:41:03 MST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063735.html">[Twisted-Python] Python3 twistd daemon for Ubuntu 14.04 alternatives
</A></li>
        <LI>Next message (by thread): <A HREF="063699.html">[Twisted-Python] Python3 twistd daemon for Ubuntu 14.04	alternatives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63736">[ date ]</a>
              <a href="thread.html#63736">[ thread ]</a>
              <a href="subject.html#63736">[ subject ]</a>
              <a href="author.html#63736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;&gt;<i> Are you talking about building Docker containers on the fly? 
</I>&gt;<i> 
</I>&gt;<i> I’m a bit baffled what gave you that idea after I’ve spent days arguing for strict build/runtime separation?
</I>&gt;<i> 
</I>&gt;<i> I was just trying to figure out where you were having this problem:
</I>&gt;<i> 
</I>&gt;<i> &gt; ZFS and apt-get + lots of files in a deb = omgiwannamurdersomeone
</I>&gt;<i> 
</I>&gt;<i> I heard the opposite of what you meant by this comment -- that you were deploying apt-gets + debs using docker and the combination had you wanting to murder someone.
</I>
It was not clear to me you were referring to that line in particular.  Especially because you were talking about Docker and not about debs.

The problem is a long-standing “bug” (scare quotes because it’s more of a performance regression) in ZFS-on-Linux: <A HREF="https://github.com/zfsonlinux/zfs/issues/3857">https://github.com/zfsonlinux/zfs/issues/3857</A> &lt;<A HREF="https://github.com/zfsonlinux/zfs/issues/3857">https://github.com/zfsonlinux/zfs/issues/3857</A>&gt; (I believe there are more related tickets but I don’t have the time to investigate).  It’s related to excessive sync calls for every single file that accumulate very fast if you put a virtualenv with many files into a deb.  Basically I have to run containers with Python debs in YOLO mode (sync=False) if I don’t want installs to take more than a minute while it takes almost no time on ext4 or XFS.

That said, our Docker containers run on ext4 because our Docker daemon runs in an LXC and you cannot access the pool from within containers (yet, as I’ve hear).  Which makes it run in VFS mode which is even slower (I’ve measured factor 3x vs overlay2 in our CI) because it means it has to create a physical copy of each layer.

I suppose we were talking about different things because I don’t quite understand why you’re upset.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170228/5244c74b/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063735.html">[Twisted-Python] Python3 twistd daemon for Ubuntu 14.04 alternatives
</A></li>
	<LI>Next message (by thread): <A HREF="063699.html">[Twisted-Python] Python3 twistd daemon for Ubuntu 14.04	alternatives
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63736">[ date ]</a>
              <a href="thread.html#63736">[ thread ]</a>
              <a href="subject.html#63736">[ subject ]</a>
              <a href="author.html#63736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
