<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SSL wincertstore Ticket 6371
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SSL%20wincertstore%20Ticket%206371&In-Reply-To=%3CB23F745E-9B89-4356-8DBA-91FBFB20C9E2%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030238.html">
   <LINK REL="Next"  HREF="030249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SSL wincertstore Ticket 6371</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20SSL%20wincertstore%20Ticket%206371&In-Reply-To=%3CB23F745E-9B89-4356-8DBA-91FBFB20C9E2%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] SSL wincertstore Ticket 6371">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Apr  4 01:49:58 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030238.html">[Twisted-Python] SSL wincertstore Ticket 6371
</A></li>
        <LI>Next message: <A HREF="030249.html">[Twisted-Python] SSl wincertstore Ticket 6371
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30244">[ date ]</a>
              <a href="thread.html#30244">[ thread ]</a>
              <a href="subject.html#30244">[ subject ]</a>
              <a href="author.html#30244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Apr 3, 2016, at 6:29 AM, John Aherne &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">johnaherne at rocs.co.uk</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I have picked up on this again.
</I>&gt;<i> 
</I>&gt;<i> There would appear to be a failing test in test_agent.py.
</I>
You said 'test_agent' but the error below is coming from test_tap; which are you referring to?

&gt;<i> I have added a new test to check that certificateOptions.trustRoot is an instance of  OpensSSLWindowsCertificateAuthorities if wincertstore is available
</I>&gt;<i> 
</I>&gt;<i> And I have modified the existing test  test_setsTrustRootOnContextDefaultTrustRoot to be skipped if wincertstore is available.
</I>&gt;<i> 
</I>&gt;<i> I have run some simple tests using Agent against googlemaps to confirm the host verification works and fails and a similar test with treq. So looks good.
</I>&gt;<i> 
</I>&gt;<i> But before I send up the patch I need to be happy that trial twisted completes with out error. And I keep getting an error on one test but I can't work out what the problem is. Hopefully someone can fathom it from the traceback and point me in the right direction.
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> [ERROR]
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i> Failure: twisted.trial.util.DirtyReactorAggregateError: Reactor was unclean.
</I>&gt;<i> DelayedCalls: (set twisted.internet.base.DelayedCall.debug = True to debug)
</I>&gt;<i> &lt;DelayedCall 0x42e4f30 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('d.root-servers.net &lt;<A HREF="http://d.root-servers.net/">http://d.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4a80&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4328 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('e.root-servers.net &lt;<A HREF="http://e.root-servers.net/">http://e.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4b48&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4d28 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('f.root-servers.net &lt;<A HREF="http://f.root-servers.net/">http://f.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4fa8&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4ad0 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('h.root-servers.net &lt;<A HREF="http://h.root-servers.net/">http://h.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4a58&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x4299aa8 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('l.root-servers.net &lt;<A HREF="http://l.root-servers.net/">http://l.root-servers.net/</A>&gt;', &lt;Deferred at 0x42ce3a0&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4cb0 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('a.root-servers.net &lt;<A HREF="http://a.root-servers.net/">http://a.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e40d0&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4d50 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('b.root-servers.net &lt;<A HREF="http://b.root-servers.net/">http://b.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4ee0&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e45d0 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('c.root-servers.net &lt;<A HREF="http://c.root-servers.net/">http://c.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4af8&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4670 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('g.root-servers.net &lt;<A HREF="http://g.root-servers.net/">http://g.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4468&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4968 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('i.root-servers.net &lt;<A HREF="http://i.root-servers.net/">http://i.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4e68&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42e4558 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('j.root-servers.net &lt;<A HREF="http://j.root-servers.net/">http://j.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4fd0&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x42cee68 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('k.root-servers.net &lt;<A HREF="http://k.root-servers.net/">http://k.root-servers.net/</A>&gt;', &lt;Deferred at 0x42e4b70&gt;)&gt;
</I>&gt;<i> &lt;DelayedCall 0x4355f08 [60.0s] called=0 cancelled=0 ThreadedResolver._cleanup('m.root-servers.net &lt;<A HREF="http://m.root-servers.net/">http://m.root-servers.net/</A>&gt;', &lt;Deferred at 0x4355e68&gt;)&gt;
</I>&gt;<i> 
</I>&gt;<i> twisted.names.test.test_tap.OptionsTests.test_recursiveConfiguration
</I>&gt;<i> -------------------------------------------------------------------------------
</I>&gt;<i> Ran 11184 tests in 84.952s
</I>&gt;<i> 
</I>&gt;<i> FAILED (skips=2946, errors=1, successes=8237)
</I>&gt;<i> 
</I>
I am not sure what the issue is here, but does this test pass or fail for you on a clean <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">trunk at HEAD</A> without your changes?

It might be best to just submit your patch for review, even if it's failing, and the reviewer might be able to shed some light.  They'll also be able to run the tests on our build farm, which might shed some light on whether the problem is related to your patch or just related to your system.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160404/110f8927/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160404/110f8927/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030238.html">[Twisted-Python] SSL wincertstore Ticket 6371
</A></li>
	<LI>Next message: <A HREF="030249.html">[Twisted-Python] SSl wincertstore Ticket 6371
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30244">[ date ]</a>
              <a href="thread.html#30244">[ thread ]</a>
              <a href="subject.html#30244">[ subject ]</a>
              <a href="author.html#30244">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
