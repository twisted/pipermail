<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Sending other things than strings in UDP packets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Sending%20other%20things%20than%20strings%20in%20UDP%20packets&In-Reply-To=%3C20041008224953.19317.1786793936.divmod.quotient.331%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="041293.html">
   <LINK REL="Next"  HREF="041281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Sending other things than strings in UDP packets</H1>
    <B>exarkun at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Sending%20other%20things%20than%20strings%20in%20UDP%20packets&In-Reply-To=%3C20041008224953.19317.1786793936.divmod.quotient.331%40ohm%3E"
       TITLE="[Twisted-Python] Sending other things than strings in UDP packets">exarkun at divmod.com
       </A><BR>
    <I>Fri Oct  8 16:49:53 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="041293.html">[Twisted-Python] Sending other things than strings in UDP packets
</A></li>
        <LI>Next message (by thread): <A HREF="041281.html">[Twisted-Python] Using wxreactor on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41294">[ date ]</a>
              <a href="thread.html#41294">[ thread ]</a>
              <a href="subject.html#41294">[ subject ]</a>
              <a href="author.html#41294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 8 Oct 2004 14:42:12 -0700, Paul Campbell &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">paul at ref.nmedia.net</A>&gt; wrote:
&gt;&gt;<i> Message: 5
</I>&gt;<i> &gt; Date: Thu, 7 Oct 2004 08:53:08 +1100
</I>&gt;<i> &gt; From: Christopher Armstrong &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">radeex at gmail.com</A>&gt;
</I>&gt;<i> &gt; Subject: Re: [Twisted-Python] Sending other things than strings in UDP
</I>&gt;<i> &gt; 	packets
</I>&gt;<i> &gt; To: Twisted general discussion &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
</I>&gt;<i> &gt; Message-ID: &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">60ed19d404100614531935658a at mail.gmail.com</A>&gt;
</I>&gt;<i> &gt; Content-Type: text/plain; charset=US-ASCII
</I>&gt;<i> &gt; 
</I>&gt;<i> Christopher Armstrong &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">radeex at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Ergh. Please don't do anything _close_ to suggesting this. This is not
</I>&gt;<i> &gt; the &quot;python way&quot;, it is the &quot;stupid, insecure,
</I>&gt;<i> &gt; let-people-rm-rf-your-home-directory way&quot;.
</I>&gt;<i> 
</I>&gt;<i> You apparently read part of the message and then you failed to read the
</I>&gt;<i> next paragraph, right? At the risk of being redundant, let me reiterate:
</I>&gt;<i> 
</I>&gt;<i> &quot;Read the documentation on the pickle module for more information. And be
</I>&gt;<i> forewarned: pickle will dump/load ANYTHING. For safety reasons, there's also
</I>&gt;<i> a 'safe_pickle' variant floating around.&quot;
</I>&gt;<i> 
</I>&gt;<i> I guess writing instructive and marginal (and probably nonworking) code for
</I>&gt;<i> helping out newbies is not what this mailing list is all about. I thought I
</I>&gt;<i> said &quot;nonworking&quot;, &quot;no error checking&quot;, and &quot;lots of issues&quot; enough times
</I>&gt;<i> to get the point across. Sorry, I'll &quot;mail.compose.elitist_mode=true&quot; next
</I>&gt;<i> time and give some flippant answer like &quot;UDP sucks dude. Just use PB under
</I>&gt;<i> TCP.&quot;
</I>
  I'm sure a great many people would appreciate it if you didn't (and I hope you take no insult if I go so far as to point out that if I were to judge solely on the content of this email, I would say you have already enabled this mode.  I'm sure it is just a fluek, though).

&gt;<i> At the risk of leaving you hanging with regards to whether such variants
</I>&gt;<i> actually exist, below are pointers to two that can be used off the shelf, and
</I>&gt;<i> possibly a third already contained within the twisted code base.
</I>&gt;<i> 
</I>&gt;<i> Here's one variant that includes the a &quot;safe pickle&quot; call:
</I>&gt;<i> <A HREF="http://zgp.org/pipermail/p2p-hackers/2004-August/002046.html">http://zgp.org/pipermail/p2p-hackers/2004-August/002046.html</A>
</I>&gt;<i> 
</I>
  I think there is a simple misunderstanding here.  A great many people assume that &quot;pickle&quot; applies to one of the two stdlib modules, &quot;pickle&quot; or &quot;cPickle&quot;.  You seem to be using it to refer to any arbitrary or semi-arbitrary serialization module.

  Both usages certainly have their place, but when people confuse them, problems can often ensue!

&gt;<i> Incidentally, the protocol contains a lot of the extras that I mentioned
</I>&gt;<i> my stripped-down code was lacking (as well as a few small bugs). It also
</I>&gt;<i> handles long messages and retries as well within UDP. It has an interesting
</I>&gt;<i> &quot;microprotocol&quot; sort of structure (where each layer of the protocol builds
</I>&gt;<i> on the previous one). Read it in addition to the first couple functions
</I>&gt;<i> that handle pickling/unpickling.
</I>
  I'll take your word on this, as it does not seem central to the particular issue now at hand.

&gt;<i> 
</I>&gt;<i> Another &quot;safe pickle&quot; module is buried in the code for &quot;thecircle&quot;
</I>&gt;<i> (www.thecircle.org.au). Just download it and rip out the &quot;safe_pickle.py&quot;
</I>&gt;<i> module from circlelib. It is stand-alone, and designed for UDP transportation
</I>&gt;<i> (although not currently using Twisted).
</I>
  Again, a likely source of confusion.  thecircle's &quot;safe_pickle.py&quot; module is not actually related to pickle at all, beyond the fact that both it and pickle are used for serializing objects.  I won't hold this against you, though :)  thecircle's authors should be ashamed for their lack of creativity in module naming!

&gt;<i> 
</I>&gt;<i> I haven't dug really deep, but banana (part of PB) appears to be essentially
</I>&gt;<i> yet another incarnation of exactly the same idea. The code pattern looked
</I>&gt;<i> identical to the two pieces of code I just mentioned. In fact, I haven't
</I>&gt;<i> looked at it but I suspect that even pickle itself has the same pattern,
</I>&gt;<i> other than being more generalized (it will handle executables and instances,
</I>&gt;<i> while the safe variants will reject that).
</I>
  Banana is closer to the marshal module than the pickle module.  Take Jelly and Banana together though, and you have something that is quite similar.  Jelly + Banana together is _not_ pickle, though, it just does something similar.  Why does this matter?  Well...

&gt;<i> 
</I>&gt;<i> The code for all of these modules has an identical structure. It takes
</I>&gt;<i> a structure and walks down it. It reads each piece and codes it in a
</I>&gt;<i> &quot;Type+data&quot; format. It rejects anything that it can't inherently decode
</I>&gt;<i> without aid (such as class instances). In those cases, at least the banana
</I>&gt;<i> variant does allow the possibility to kick it up to a higher level (via
</I>&gt;<i> Jelly) to handle user-level structures.
</I>
  No, it does not have an identical structure.  It is similar, no doubt, but there are many differences worth noting.  Jelly and Banana, for example, have _no_ mechanism which will allow an arbitrary function to be specified for execution by the _serializer_ in the _deserializer's_ environment.  Pickle does.  This is just one of many important differences.

&gt;<i> 
</I>&gt;<i> The &quot;unpickle&quot; code does exactly the same thing except in reverse, converting
</I>&gt;<i> the coded data back into a structure. There are standards (S-expressions or
</I>&gt;<i> XML) for the format itself but I haven't seen any truly compelling reasons to
</I>&gt;<i> follow those. They seem to add lots of overhead without any additional benefit.
</I>&gt;<i> 
</I>
  Without going into the advantages and disadvantages of XML and S-expressions, let me just point out this:

  Whether you use the pickle format, or any other format (like xml or s-expressions), is mostly irrelevant to the main concern raised in this thread: security.  Pickle was not written to be secure.  It is not maintained with security in mind.  It has some features which take it some distance towards the goal of being secure, but how close they get it is hard to say.  Personally, I would not use any serialization tool as complex as pickle in a security sensitive environment without first having it audited by some very smart people.  The CPython developers have flat out stated that they are not focused on making it secure.  That's fine.  I'm not going to demand they make it completely bulletproof.  I'll happily continue using it _far away from untrusted data sources_ and use an alternative, such as Jelly + Banana, for the cases where I need to communicate with untrusted parties.

  I recommend everyone else do the same.

  Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="041293.html">[Twisted-Python] Sending other things than strings in UDP packets
</A></li>
	<LI>Next message (by thread): <A HREF="041281.html">[Twisted-Python] Using wxreactor on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41294">[ date ]</a>
              <a href="thread.html#41294">[ thread ]</a>
              <a href="subject.html#41294">[ subject ]</a>
              <a href="author.html#41294">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
