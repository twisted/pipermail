<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Merging databases the Twisted way
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Merging%20databases%20the%20Twisted%20way&In-Reply-To=ffb7b7f804101305361393ed8f%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008820.html">
   <LINK REL="Next"  HREF="008822.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Merging databases the Twisted way</H1>
    <B>Gerhard Haering</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Merging%20databases%20the%20Twisted%20way&In-Reply-To=ffb7b7f804101305361393ed8f%40mail.gmail.com"
       TITLE="[Twisted-Python] Merging databases the Twisted way">gh at ghaering.de
       </A><BR>
    <I>Wed Oct 13 09:40:26 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008820.html">[Twisted-Python] Merging databases the Twisted way
</A></li>
        <LI>Next message: <A HREF="008822.html">[Twisted-Python] Making database-code Twisted-friendly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8821">[ date ]</a>
              <a href="thread.html#8821">[ thread ]</a>
              <a href="subject.html#8821">[ subject ]</a>
              <a href="author.html#8821">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Oct 13, 2004 at 02:36:18PM +0200, Thomas Weholt wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I got a server running a SQLite-database. Sometimes I need to merge
</I>&gt;<i> data from another SQLite database into the master. So far I've done
</I>&gt;<i> blocking old-style read-some from source, write-some to destination
</I>&gt;<i> stuff using the standard pysqlite-database module, but as mentioned,
</I>&gt;<i> it blocks the server.
</I>
If you haven't done so already, maybe you can try to ATTACH (SQLITE
SQL command) the other database and then merge using SQL commands.
This should be faster and easier than going through Python.

&gt;<i> AFAIK SQLite only allows one connection to the database as well so
</I>&gt;<i> that might make it harder to implement a non-blocking solution.
</I>&gt;<i> [...]
</I>
Basically, one open transaction per database. Concurrent access will
be blocked, for as long as the timeout parameter of the connect()
call.

With PySQLite2/SQLite3 it will be much better, because SQLite3 has
much more fine-grained locking.

SQLite also features an API call to register a callback that will be
invoked every n SQLite VM operations. I'll wrap it one day, maybe the
Twisted folks can make some use of it for a new SQLiteReactor or
whatever.

-- Gerhard (subscribed, but still hasn't used Twisted for real, yet)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008820.html">[Twisted-Python] Merging databases the Twisted way
</A></li>
	<LI>Next message: <A HREF="008822.html">[Twisted-Python] Making database-code Twisted-friendly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8821">[ date ]</a>
              <a href="thread.html#8821">[ thread ]</a>
              <a href="subject.html#8821">[ subject ]</a>
              <a href="author.html#8821">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
