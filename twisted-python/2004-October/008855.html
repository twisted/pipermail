<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Has anybody integrated multiple threadpools into	reactor?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Has%20anybody%20integrated%20multiple%20threadpools%20into%0A%09reactor%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008851.html">
   <LINK REL="Next"  HREF="008856.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Has anybody integrated multiple threadpools into	reactor?</H1>
    <B>Ames Andreas (MPA/DF)</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Has%20anybody%20integrated%20multiple%20threadpools%20into%0A%09reactor%3F&In-Reply-To="
       TITLE="[Twisted-Python] Has anybody integrated multiple threadpools into	reactor?">Andreas.Ames at tenovis.com
       </A><BR>
    <I>Thu Oct 21 05:45:39 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008851.html">[Twisted-Python] [PATCH] Support resolving wildcard A and CNAME	records in twisted.names
</A></li>
        <LI>Next message: <A HREF="008856.html">[Twisted-Python] Has anybody integrated multiple threadpools into	reactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8855">[ date ]</a>
              <a href="thread.html#8855">[ thread ]</a>
              <a href="subject.html#8855">[ subject ]</a>
              <a href="author.html#8855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

thanks for the hint.

Glyph Lefkowitz wrote:

&gt;<i> I would strongly recommend against using ThreadPool.  Just use
</I>&gt;<i> callInThread - there is already a pool of worker threads.  Starting
</I>&gt;<i> and stopping threadpools with the reactor is difficult to test and
</I>&gt;<i> easy to get wrong.
</I>
Could you elaborate a bit on that?  I have the situation that I have
to wrap two C-libs which are essentially wrappers around proprietary
protocols.  They use blocking networked calls so that I'll want to use
threads to make them play nicely with my twisted app.

Now what I'd like to have is two distinct thread(s/ pools) for them.
One of them would have a threadpool size of 1 (one) because the C-lib
isn't threadsafe and I want implicit serialization without being
forced to synchronize explicitly.  My plan was to use a single thread
(no pool) which blocks on a queue 'till it gets request from the
reactor thread.  When it has accomplished its duties it will use
callFromThread to get the results back to the reactor threads.  Could
you tell me where the pitfalls are you mentioned above in this
scenario?


TIA,

aa

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 2667 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20041021/89b36376/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20041021/89b36376/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008851.html">[Twisted-Python] [PATCH] Support resolving wildcard A and CNAME	records in twisted.names
</A></li>
	<LI>Next message: <A HREF="008856.html">[Twisted-Python] Has anybody integrated multiple threadpools into	reactor?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8855">[ date ]</a>
              <a href="thread.html#8855">[ thread ]</a>
              <a href="subject.html#8855">[ subject ]</a>
              <a href="author.html#8855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
