<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Case for an Async MySQL Driver?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Case%20for%20an%20Async%20MySQL%20Driver%3F&In-Reply-To=5d35fc5d041028132764475aa6%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008936.html">
   <LINK REL="Next"  HREF="008940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Case for an Async MySQL Driver?</H1>
    <B>orbitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Case%20for%20an%20Async%20MySQL%20Driver%3F&In-Reply-To=5d35fc5d041028132764475aa6%40mail.gmail.com"
       TITLE="[Twisted-Python] Case for an Async MySQL Driver?">orbitz at ezabel.com
       </A><BR>
    <I>Thu Oct 28 17:00:57 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008936.html">[Twisted-Python] Case for an Async MySQL Driver?
</A></li>
        <LI>Next message: <A HREF="008940.html">[Twisted-Python] Case for an Async MySQL Driver?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8937">[ date ]</a>
              <a href="thread.html#8937">[ thread ]</a>
              <a href="subject.html#8937">[ subject ]</a>
              <a href="author.html#8937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hrm, wouldn't it be a bit nicer on programmers to use the current adbapi 
interface so they can just move all their code to this new mysql API?

Seun Osewa wrote:

&gt;<i>Nick Arnett wrote:
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Anybody want to offer more about how this might look? I don't know if I
</I>&gt;&gt;<i>can fit it into my work, but it would be a terrific addition to my
</I>&gt;&gt;<i>toolbox (I have many thousands of lines of Python talking to MySQL).
</I>&gt;&gt;<i>And I suppose it would offer the excuse I've been needing to ask our CEO
</I>&gt;&gt;<i>about his thoughts on open-sourcing parts of our code.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Here are some ideas for an async MySQL 'driver' for Twisted:
</I>&gt;<i>
</I>&gt;<i>1) create or use a connection:
</I>&gt;<i>connection = MySqlPool.connect(&quot;hostname&quot;, &quot;username&quot;, &quot;password&quot;)
</I>&gt;<i>
</I>&gt;<i>2) send a query:
</I>&gt;<i>d = connection.exec([&quot;begin&quot;, &quot;update db.stats set value=value+1 where
</I>&gt;<i>accesses&quot;, &quot;select * from db.important_table&quot;, &quot;commit&quot;])
</I>&gt;<i>
</I>&gt;<i>def myCallBack (resultset):
</I>&gt;<i>    # 'results' contains the result of the last QUERY in the list of
</I>&gt;<i>commands sent to exec.
</I>&gt;<i>    # it is empty if there's no QUERY and no error
</I>&gt;<i>     ....
</I>&gt;<i>
</I>&gt;<i>def myErrBack (errorval, errorstring command_id):
</I>&gt;<i>   # this is called if there's an error in executing any of the commands
</I>&gt;<i>   # command_id indicates which point in the list of commands the error occured
</I>&gt;<i>   # errorval is the error name/number, errorstring the exact result
</I>&gt;<i>
</I>&gt;<i>3) close the connection:
</I>&gt;<i>connection.close()
</I>&gt;<i>
</I>&gt;<i>This format allows the user to send an unlimited number of queries to
</I>&gt;<i>be run together, thus limiting the number of callbacks necessary for a
</I>&gt;<i>program requiring many small interactions with the database. &quot;begin&quot;
</I>&gt;<i>and &quot;end&quot; will count as an example.  This minimalistic API also allows
</I>&gt;<i>more advanced (twisted.enterprise style) interfaces to be built on top
</I>&gt;<i>of it.
</I>&gt;<i>
</I>&gt;<i>Is there any task you can think of that can't be built on top of this?
</I>&gt;<i>(of course I've not touched the implementation details...)
</I>&gt;<i>
</I>&gt;<i>Regards,
</I>&gt;<i>Seun.
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-Python mailing list
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008936.html">[Twisted-Python] Case for an Async MySQL Driver?
</A></li>
	<LI>Next message: <A HREF="008940.html">[Twisted-Python] Case for an Async MySQL Driver?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8937">[ date ]</a>
              <a href="thread.html#8937">[ thread ]</a>
              <a href="subject.html#8937">[ subject ]</a>
              <a href="author.html#8937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
