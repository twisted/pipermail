<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] CFReactor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20CFReactor&In-Reply-To=357849C0-26CC-11D9-9668-000A95A50FB2%40fuhm.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008908.html">
   <LINK REL="Next"  HREF="008922.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] CFReactor</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20CFReactor&In-Reply-To=357849C0-26CC-11D9-9668-000A95A50FB2%40fuhm.net"
       TITLE="[Twisted-Python] CFReactor">bob at redivi.com
       </A><BR>
    <I>Mon Oct 25 18:02:29 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008908.html">[Twisted-Python] CFReactor
</A></li>
        <LI>Next message: <A HREF="008922.html">[Twisted-Python] CFReactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8909">[ date ]</a>
              <a href="thread.html#8909">[ thread ]</a>
              <a href="subject.html#8909">[ subject ]</a>
              <a href="author.html#8909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 25, 2004, at 17:24, James Y Knight wrote:

&gt;<i> Itamar just added half-closing support to Twisted, and I foolishly 
</I>&gt;<i> volunteered to look at adding support to cfreactor for him. However, 
</I>&gt;<i> that was before I looked at it. Now that I have, I have little idea 
</I>&gt;<i> what it's actually doing, so I'm afraid that I'm unable to actually 
</I>&gt;<i> implement this change.
</I>&gt;<i>
</I>&gt;<i> The &quot;SelectableSocketWrapper&quot; looks like a horrible kludge, and I'm 
</I>&gt;<i> not sure why it's necessary. Why does it override the wrapped object's 
</I>&gt;<i> &quot;connectionLost&quot;? Why do you have to wrap&amp;override 
</I>&gt;<i> Selectable.start/stopReading/Writing, instead of doing that stuff in 
</I>&gt;<i> reactor.add/removeReader/Writer? What is simulate?? Essentially, I 
</I>&gt;<i> just don't understand why it is so different from the other reactors.
</I>
The SSW kludge is necessary because it inherits a lot of functionality 
from the existing default select-based reactor and its sockets.  It is 
a workaround for the lack of extensibility in the implementation of 
those sockets and that reactor.  It could be less hacky if it were 
inverted, but then you'd have to subclass every possible port and add 
the reactor notifications, and essentially copy about 80% of 
twisted.internet.default instead of subclassing it.  If you want to 
refactor it this way, be my guest.. but I'm not bored enough to do it 
:<i>)
</I>
The reason for the loseConnection hack is that the existing 
implementation of loseConnection doesn't do removeReader/Writer!  
loseConnection effectively kills the socket without notifying the 
reactor at all.  If the existing implementation told the reactor when 
it was done with a socket, SSW wouldn't be so much of a kludge.

&gt;<i> Either hints or else a working half-close implementation for cfreactor 
</I>&gt;<i> would be appreciated.
</I>
You'll probably have to implement the same style of hack that is used 
for loseConnection.  Replace the half-lose-connection method (if it 
exists) with a method that notifies the reactor of the intention, and 
then call the original implementation.

-bob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008908.html">[Twisted-Python] CFReactor
</A></li>
	<LI>Next message: <A HREF="008922.html">[Twisted-Python] CFReactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8909">[ date ]</a>
              <a href="thread.html#8909">[ thread ]</a>
              <a href="subject.html#8909">[ subject ]</a>
              <a href="author.html#8909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
