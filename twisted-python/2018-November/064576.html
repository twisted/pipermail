<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] pytest-twisted questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20pytest-twisted%20questions&In-Reply-To=%3C5bbbf139-12ad-d294-342e-71b53077498c%40withers.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] pytest-twisted questions</H1>
    <B>Chris Withers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20pytest-twisted%20questions&In-Reply-To=%3C5bbbf139-12ad-d294-342e-71b53077498c%40withers.org%3E"
       TITLE="[Twisted-Python] pytest-twisted questions">chris at withers.org
       </A><BR>
    <I>Tue Nov 13 15:37:24 MST 2018</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64576">[ date ]</a>
              <a href="thread.html#64576">[ thread ]</a>
              <a href="subject.html#64576">[ subject ]</a>
              <a href="author.html#64576">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/11/2018 20:31, Kyle Altendorf wrote:
&gt;<i> I would just open an issue on GitHub.  Feel free to copy this in as the 
</I>&gt;<i> first message to keep the initial context.
</I>
Well, there's no specific issue to log here, so let's keep on going with 
email for now :-)

(in fact, copying in the twisted mailing list, as that's probably the 
right place for this)

&gt;<i> On 2018-11-13 12:35, Chris Withers wrote:
</I>&gt;&gt;<i> - What's the intention of the plugin? Should all tests still subclass
</I>&gt;&gt;<i> twisted.trial.unittest.TestCase or should they *never* do so if using
</I>&gt;&gt;<i> this plugin?
</I>&gt;<i> 
</I>&gt;<i> I don't know what _should_ be done, 
</I>
Victor, what was your intention with the project?

&gt;<i> but I know that I mostly don't have 
</I>&gt;<i> test classes and, for the class I do have, I didn't inherit.  Mostly I 
</I>&gt;<i> just @pytest.inlineCallbacks (I still don't like the namespace squashing 
</I>&gt;<i> into pytest though :] ) and I suppose in the probably-not-too-distant 
</I>&gt;<i> future I'll instead be using more @pytest_twisted.async_await  (ala 
</I>&gt;<i> #31/#34).
</I>
Okay, but twisted.trial.unittest.TestCase does a bunch of reactor 
management stuff, most notable making you aware when you've left the 
reactor in a bad state. As far as I can see from the code, 
pytest-twisted does not do that, correct?

&gt;&gt;<i> - What's with the greenlet mentions? Is this plugin okay to use when
</I>&gt;&gt;<i> I'm just using a normal Twisted epoll reactor?
</I>
<A HREF="https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L4">https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L4</A>
<A HREF="https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L36-L46">https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L36-L46</A>
<A HREF="https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L68-L83">https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L68-L83</A>
<A HREF="https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L123-L126">https://github.com/pytest-dev/pytest-twisted/blob/master/pytest_twisted.py#L123-L126</A>

What does greenlet have to do with twisted in this context? Would be 
great to have it as an optional thing, unless I'm missing something?

&gt;&gt;<i> - What does pytest provide *without* this plugin, when it comes to
</I>&gt;&gt;<i> testing with Twisted?
</I>&gt;<i> 
</I>&gt;<i> I am not aware of anything twisted/pytest specific that is outside 
</I>&gt;<i> pytest-twisted, 
</I>
<A HREF="https://docs.pytest.org/en/latest/faq.html#how-does-pytest-relate-to-twisted-s-trial">https://docs.pytest.org/en/latest/faq.html#how-does-pytest-relate-to-twisted-s-trial</A>

So, my guess is that twisted.trial.unittest.TestCase subclasses 
unittest.TestCase and so pytest treats it in the same way. That means 
you get the management and checking of the reactor, along with the handy 
methods it provides, when you put your tests in class-based suites that 
subclass twisted.trial.unittest.TestCase.

Ronny, does pytest do anything else that's twisted-specific?

&gt;<i> If you are just trying to get started with something that works, I'd 
</I>&gt;<i> skip the classes and inheritance and just let the reactor take care of 
</I>&gt;<i> itself. 
</I>
My experience with Twisted over the last 10 years or so is that this is 
an exceedingly dangerous approach to take...

cheers,

Chris


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64576">[ date ]</a>
              <a href="thread.html#64576">[ thread ]</a>
              <a href="subject.html#64576">[ subject ]</a>
              <a href="author.html#64576">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
