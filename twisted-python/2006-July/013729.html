<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] is twisted suitable for rfb protocol implement?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20is%20twisted%20suitable%20for%20rfb%20protocol%20implement%3F&In-Reply-To=dbeb95830607261950u63784632j48253a6f935caf26%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013728.html">
   <LINK REL="Next"  HREF="013730.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] is twisted suitable for rfb protocol implement?</H1>
    <B>Eric Faurot</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20is%20twisted%20suitable%20for%20rfb%20protocol%20implement%3F&In-Reply-To=dbeb95830607261950u63784632j48253a6f935caf26%40mail.gmail.com"
       TITLE="[Twisted-Python] is twisted suitable for rfb protocol implement?">eric.faurot at gmail.com
       </A><BR>
    <I>Thu Jul 27 03:06:00 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013728.html">[Twisted-Python] is twisted suitable for rfb protocol implement?
</A></li>
        <LI>Next message: <A HREF="013730.html">[Twisted-Python] Re: [Twisted-commits] r17716 - Switch of the order	the words
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13729">[ date ]</a>
              <a href="thread.html#13729">[ thread ]</a>
              <a href="subject.html#13729">[ subject ]</a>
              <a href="author.html#13729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/27/06, wang wei &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wgwigw at gmail.com</A>&gt; wrote:
&gt;<i> hi, I want to implement a rfb server using twisted, but I find  rfb protocol
</I>&gt;<i> maybe hard to code in twisted, since it needs read  blocks of data and
</I>&gt;<i> depend on the readed value to read the next blocks. is there a good solution
</I>&gt;<i> for twisted? thanks.
</I>
Twisted cannot make the protocol itself simpler to write. All it does
is to give you a framework in which you don't have to worry about
plumbing details. All you really have to do is to focus on the
protocol logic.

I don't know about this specific protocol, but you should try to think
of your protocol handler as a automaton: consider that you receive
input data that you must (usually in slices) dispatch to a specific
handler depending on your current state. The handler processes the
data, does whatever it has to, then adapts the current state as
necessary. The point is that you should define your states so that you
know how much data they need to consume to do something useful (that
is in the protocol description).

Designing your handler like this makes it very flexible, because it
naturally handles partial data, so it can be plugged on top of
anything that streams, for example a twisted connection. All you have
to do then is to write a glue Protocol that will connect
dataReceived() to your decoder input. Furthermore, it will probably be
more correct and easier to maintain, because it will very much match
the way your protocol is described on the paper.

For example, you can look at how my OggDecoder works:

<A HREF="http://pyogg.python-hosting.com/file/trunk/PyOgg/ogg/bitstream.py">http://pyogg.python-hosting.com/file/trunk/PyOgg/ogg/bitstream.py</A>

The code is not always brilliant and polished, but it should give you
the idea.

Eric.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013728.html">[Twisted-Python] is twisted suitable for rfb protocol implement?
</A></li>
	<LI>Next message: <A HREF="013730.html">[Twisted-Python] Re: [Twisted-commits] r17716 - Switch of the order	the words
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13729">[ date ]</a>
              <a href="thread.html#13729">[ thread ]</a>
              <a href="subject.html#13729">[ subject ]</a>
              <a href="author.html#13729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
