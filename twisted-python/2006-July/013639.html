<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] wxreactor ShowModal problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20wxreactor%20ShowModal%20problem&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013630.html">
   <LINK REL="Next"  HREF="013640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] wxreactor ShowModal problem</H1>
    <B>mail at ortling.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20wxreactor%20ShowModal%20problem&In-Reply-To="
       TITLE="[Twisted-Python] wxreactor ShowModal problem">mail at ortling.com
       </A><BR>
    <I>Wed Jul 12 04:43:00 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013630.html">[Twisted-Python] Starting services
</A></li>
        <LI>Next message: <A HREF="013640.html">[Twisted-Python] wxreactor ShowModal problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13639">[ date ]</a>
              <a href="thread.html#13639">[ thread ]</a>
              <a href="subject.html#13639">[ subject ]</a>
              <a href="author.html#13639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

I have a problem with a modal dialog blocking wxreactor. If ShowDialog () is called from within a deferred callback which has been started by reactor.callLater everything twisted comes to a halt and continues only after the modal dialog has been closed. The sample script below should demonstrate the problem. I'm using twisted 2.2 for python2.4.

Help! and thanks in advance
Simon

import sys, os
from twisted.internet import wxreactor
wxreactor.install ()
from twisted.internet import reactor, defer
import wx

class Frame (wx.Frame):
    def __init__ (self, parent, id, title):
        wx.Frame.__init__ (self, parent, id, title)

        btn_dlg = wx.Button (self, -1, &quot;Press&quot;, size=(240, 180))
        btn_dlg.Bind (wx.EVT_BUTTON, self.click)

    def click (self, event):
        d = defer.Deferred ()
        self.prepare (d)

    def prepare (self, d):
        &quot;&quot;&quot;
        uncomment reactor.callLater or d.callback to test
        &quot;&quot;&quot;
        d.addCallback (self.show)
        reactor.callLater (1.0, d.callback, 1) # this will fail
        #d.callback (1) # this will work
        
    def show (self, val):
        for i in range (20):
            reactor.callLater (i*0.2, self.dosth, i) # these will be printed _after_ dialog has been closed
        dlg = wx.MessageDialog (self, &quot;I am a dialog&quot;, &quot;Dialog&quot;, style=wx.OK|wx.CANCEL)
        ruckgabe = dlg.ShowModal ()
        dlg.Destroy ()
        if ruckgabe == wx.ID_OK:
            print &quot;okay&quot;
        else:
            print &quot;not okay&quot;

    def dosth (self, idx):
        print &quot;doing something nr&quot;, idx 

class App (wx.App):
    def OnInit (self):
        self.frame = Frame (None, -1, &quot;Test&quot;)
        self.frame.Show (1)
        self.SetTopWindow (self.frame)
        return True

if __name__ == &quot;__main__&quot;:
    app = App ()
    reactor.registerWxApp (app)
    reactor.run ()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013630.html">[Twisted-Python] Starting services
</A></li>
	<LI>Next message: <A HREF="013640.html">[Twisted-Python] wxreactor ShowModal problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13639">[ date ]</a>
              <a href="thread.html#13639">[ thread ]</a>
              <a href="subject.html#13639">[ subject ]</a>
              <a href="author.html#13639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
