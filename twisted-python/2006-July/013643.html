<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SSH Forwading and Database Queries in same	application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SSH%20Forwading%20and%20Database%20Queries%20in%20same%0A%09application&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013641.html">
   <LINK REL="Next"  HREF="013644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SSH Forwading and Database Queries in same	application</H1>
    <B>Kevin Klues</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SSH%20Forwading%20and%20Database%20Queries%20in%20same%0A%09application&In-Reply-To="
       TITLE="[Twisted-Python] SSH Forwading and Database Queries in same	application">klueska at gmail.com
       </A><BR>
    <I>Thu Jul 13 08:49:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013641.html">AW: Re: [Twisted-Python] wxreactor ShowModal problem
</A></li>
        <LI>Next message: <A HREF="013644.html">[Twisted-Python] Reconnecting PB Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13643">[ date ]</a>
              <a href="thread.html#13643">[ thread ]</a>
              <a href="subject.html#13643">[ subject ]</a>
              <a href="author.html#13643">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to use twisted.conch.ssh to write an application that first sets
up an ssh connection that forwards port 5432 from an external server to my
local machine and then locally connect to a database running on the server
using that port.  I am able to write two separate applications that
accomplish what I want, but I am unable to integrate them into one.  Using
the two application approach, I can first start the application that sets up
my port forwarding and then start the application that connects to my
database.  I can then make queries using the second application and
everything seems to work just fine.  When integrating them into one
application I am still able to connect to the database, but I cannot run any
queries over it.  The queries hang indefinitely, and neither my callback nor
my errback functions that should run after the query has completed ever get
called.  My setup for implementing this is as follows....

I have introduced a deferred when setting up my port forwarding that gets
its callback only once the startFactory() event gets called for my class
derived from forwarding.SSHListenForwardingFactory.  The forwarding is setup
using the following code snippet.....

reactor.listenTCP(PORT, DatabaseForwardingFactory(self.conn, (LOCALHOST,
PORT), DatabaseClientForwardingChannel))

where....

class DatabaseForwardingFactory(forwarding.SSHListenForwardingFactory):
class DatabaseClientForwardingChannel(
forwarding.SSHListenClientForwardingChannel):

Does anyone have any idea why this might not be working?  I tried deferring
my query to a thread to see if this would help matters, but to no avail.
Any help at all would be appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20060713/ae735a4c/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20060713/ae735a4c/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013641.html">AW: Re: [Twisted-Python] wxreactor ShowModal problem
</A></li>
	<LI>Next message: <A HREF="013644.html">[Twisted-Python] Reconnecting PB Client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13643">[ date ]</a>
              <a href="thread.html#13643">[ thread ]</a>
              <a href="subject.html#13643">[ subject ]</a>
              <a href="author.html#13643">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
