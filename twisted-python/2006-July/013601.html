<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] what's wrong in my code?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20what%27s%20wrong%20in%20my%20code%3F&In-Reply-To=dbeb95830607041933x1fb5f30aq2c766c7f35a1467e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013600.html">
   <LINK REL="Next"  HREF="013602.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] what's wrong in my code?</H1>
    <B>Jonathan Lange</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20what%27s%20wrong%20in%20my%20code%3F&In-Reply-To=dbeb95830607041933x1fb5f30aq2c766c7f35a1467e%40mail.gmail.com"
       TITLE="[Twisted-Python] what's wrong in my code?">jml at mumak.net
       </A><BR>
    <I>Tue Jul  4 23:16:49 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013600.html">[Twisted-Python] what's wrong in my code?
</A></li>
        <LI>Next message: <A HREF="013602.html">[Twisted-Python] Re: [Twisted-commits] r17484 - Branching to callQueue&#8734;&#136;&#158;-1741
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13601">[ date ]</a>
              <a href="thread.html#13601">[ thread ]</a>
              <a href="subject.html#13601">[ subject ]</a>
              <a href="author.html#13601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/07/06, wang wei &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wgwigw at gmail.com</A>&gt; wrote:
&gt;<i> hi, I got 'twisted.internet.defer.alreadycallederror' error
</I>&gt;<i> back.
</I>&gt;<i> here is my code, what's wrong in it? thanks for help.
</I>
There's actually a lot wrong with your code.  I've dumped everything I
can think of here.  Don't worry, I get more helpful as you go further
down the email.

First, the simple stuff:
- reactor is not imported
- time is not imported
- snmpFactory constructor takes an unused filename parameter
- snmpFactory is constructed without passing the filename parameter
- defer is not imported
- the main while loop calls 'readSnmpValue' on an snmpFactory
instance, but there is no readSnmpValue method to be seen anywhere
- the readValue method calls a readValue function which is not defined
- you use a while loop and a counter when 'for i in range(10)' would
do the same thing more simply
- readValue refers to instance variables 'voltageIp' and 'powerIp',
neither of which are defined
- readValue refers to global variables 'voltageOid' and
'temperatureOid', neither of which are defined
- your code runs the reactor but never stops it.

Second, the complex stuff:
- Nothing in the code explains what you are trying to do, or even
specifies the API of the methods that you refer to.
- reactor.callLater(5, s.readValue) roughly means &quot;call s.readValue
with no arguments in 5 seconds time&quot;. You probably don't want to do
that.
- You probably don't want to call time.sleep()
- In fact, you probably want a LoopingCall (see the API docs for details)

Third, the AlreadyCalledError:
- You create exactly one instance of snmpFactory. This means that
there is exactly one Deferred.  You fire this Deferred (i.e. run
callback on it) in the first pass of the main while loop. You can only
fire a Deferred once. The next time the loop goes around, you try to
fire it a second time.  This will raise an AlreadyCalledError.

Fourth, a note on asking for help:
Many people on this list are happy to help you learn Twisted.
However, anyone who does help you will be doing so in their spare
time. This means it is your responsibility to make it as easy for us
to help you as possible.  Two specific ways spring to mind:

1. If you are posting code, please post a minimal example that other
people can run.
2. Read <A HREF="http://www.catb.org/~esr/faqs/smart-questions.html">http://www.catb.org/~esr/faqs/smart-questions.html</A>

Your example is pretty small -- that's good. You know how to cut out
irrelevant code. However, your example is not even close to being
runnable. Even after I've taken the time to make it run, it doesn't
reproduce the error that you refer to.

Good luck with fixing your error.

jml


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013600.html">[Twisted-Python] what's wrong in my code?
</A></li>
	<LI>Next message: <A HREF="013602.html">[Twisted-Python] Re: [Twisted-commits] r17484 - Branching to callQueue&#8734;&#136;&#158;-1741
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13601">[ date ]</a>
              <a href="thread.html#13601">[ thread ]</a>
              <a href="subject.html#13601">[ subject ]</a>
              <a href="author.html#13601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
