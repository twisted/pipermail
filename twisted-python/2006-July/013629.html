<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] tcp error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20tcp%20error&In-Reply-To=44B26780.3090602%40unipex.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013627.html">
   <LINK REL="Next"  HREF="013631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] tcp error</H1>
    <B>Thomas Jacob</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20tcp%20error&In-Reply-To=44B26780.3090602%40unipex.it"
       TITLE="[Twisted-Python] tcp error">jacob at internet24.de
       </A><BR>
    <I>Mon Jul 10 11:26:12 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013627.html">[Twisted-Python] tcp error
</A></li>
        <LI>Next message: <A HREF="013631.html">[Twisted-Python] tcp error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13629">[ date ]</a>
              <a href="thread.html#13629">[ thread ]</a>
              <a href="subject.html#13629">[ subject ]</a>
              <a href="author.html#13629">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Your line numbers don't seem to match my plain twisted 2.4.0's...but the
problem seems to occur on either of the last two lines of
generatePortCommand
in twisted.protocols.ftp

        factory = FTPDataPortFactory()
        factory.protocol = portCmd.protocol
        listener = reactor.listenTCP(0, factory)
        factory.port = listener

        # Ensure we close the listening port if something goes wrong
        def listenerFail(error, listener=listener):
            if listener.connected:
                listener.loseConnection()
            return error
        portCmd.fail = listenerFail


        # Construct crufty FTP magic numbers that represent host &amp;
port   
        host = self.transport.getHost().host &lt;&lt;&lt;&lt;
        port = listener.getHost().port      &lt;&lt;&lt;&lt;&lt;


Maybe either your control connection is not opened correctly
(or already closed again), tcp.Port.socket only exists
when the Port is actually connected.... 

Or, maybe your client data port couldn't be opened
properly (possibly no more available ports?)....


On Mon, 2006-07-10 at 16:43 +0200, Michele Petrazzo wrote:
&gt;<i> Sometime I receive a strange error:
</I>&gt;<i> 
</I>&gt;<i>    File &quot;hylaproto_t.pyo&quot;, line 209, in _RetrStatus
</I>&gt;<i>    File &quot;twisted\protocols\ftp.pyo&quot;, line 2190, in list
</I>&gt;<i>    File &quot;twisted\protocols\ftp.pyo&quot;, line 2006, in receiveFromConnection
</I>&gt;<i>    File &quot;twisted\protocols\ftp.pyo&quot;, line 2081, in _openDataConnection
</I>&gt;<i>    File &quot;twisted\protocols\ftp.pyo&quot;, line 1838, in queueCommand
</I>&gt;<i>    File &quot;twisted\protocols\ftp.pyo&quot;, line 1819, in sendNextCommand
</I>&gt;<i>    File &quot;twisted\protocols\ftp.pyo&quot;, line 2128, in generatePortCommand
</I>&gt;<i>    File &quot;twisted\internet\tcp.pyo&quot;, line 591, in getHost
</I>&gt;<i> AttributeError: 'Client' object has no attribute 'socket'
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> At line 209 in hylaproto_t, I have:
</I>&gt;<i> self._myClient.list('status', proto)
</I>&gt;<i> 
</I>&gt;<i> self._myClient are an FTPClient instance.
</I>&gt;<i> 
</I>&gt;<i> What can be the problem?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Michele
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20060710/e81b0d27/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20060710/e81b0d27/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013627.html">[Twisted-Python] tcp error
</A></li>
	<LI>Next message: <A HREF="013631.html">[Twisted-Python] tcp error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13629">[ date ]</a>
              <a href="thread.html#13629">[ thread ]</a>
              <a href="subject.html#13629">[ subject ]</a>
              <a href="author.html#13629">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
