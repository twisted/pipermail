<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistd --uid and --logfile
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20--uid%20and%20--logfile&In-Reply-To=%3C20100818091155.GB4801%40ruber.office.udmvt.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055214.html">
   <LINK REL="Next"  HREF="055202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistd --uid and --logfile</H1>
    <B>twisted-web at udmvt.ru</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20--uid%20and%20--logfile&In-Reply-To=%3C20100818091155.GB4801%40ruber.office.udmvt.ru%3E"
       TITLE="[Twisted-Python] twistd --uid and --logfile">twisted-web at udmvt.ru
       </A><BR>
    <I>Wed Aug 18 03:11:55 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055214.html">[Twisted-Python] twistd --uid and --logfile
</A></li>
        <LI>Next message (by thread): <A HREF="055202.html">[Twisted-Python] Add custom options handling to a twisted	application running from twistd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55200">[ date ]</a>
              <a href="thread.html#55200">[ thread ]</a>
              <a href="subject.html#55200">[ subject ]</a>
              <a href="author.html#55200">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Aug 17, 2010 at 01:35:41PM +0200, Zoran Bosnjak wrote:
&gt;<i> I am running twisted application from /etc/init/myapp.conf by exec
</I>&gt;<i> statement like this:
</I>&gt;<i> exec /usr/bin/twistd --uid=&lt;id&gt; --gid=&lt;gid&gt; --logfile=/var/log/dir/file
</I>&gt;<i> 
</I>&gt;<i> The problem is when log file is first created under /var/log/dir (dir is
</I>&gt;<i> owned by user id), the owner of the file is 'root', not requested user.
</I>&gt;<i> As a consequence, the twistd is not able to rotate log files.
</I>&gt;<i> 
</I>&gt;<i> If the logfile is already created (and chowned) before running twistd,
</I>&gt;<i> there is no problem. It looks like set uid/gid is called too late inside
</I>&gt;<i> twistd. It is suppose to be called before creating a logfile.
</I>&gt;<i> 
</I>&gt;<i> Is this a bug or am I missing something?
</I>It is always safer to use external tools to change uids and gids where possible.
It is also always safer to have logfiles always present on their place and with
correct ownership (or refuse to run entirely).

Having log files created by the superuser is not secure, especially when
log directory is user writeable. That is security vulnerability.

&gt;<i> 
</I>&gt;<i> Zoran
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-- 
Alexey S.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055214.html">[Twisted-Python] twistd --uid and --logfile
</A></li>
	<LI>Next message (by thread): <A HREF="055202.html">[Twisted-Python] Add custom options handling to a twisted	application running from twistd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55200">[ date ]</a>
              <a href="thread.html#55200">[ thread ]</a>
              <a href="subject.html#55200">[ subject ]</a>
              <a href="author.html#55200">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
