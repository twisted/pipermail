<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] inlineCallbacks cascading cancelling and more
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20inlineCallbacks%20cascading%20cancelling%20and%20more&In-Reply-To=%3C8CEDF43C-21E3-4002-9CEC-4B8FFCA03F7E%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055194.html">
   <LINK REL="Next"  HREF="055219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] inlineCallbacks cascading cancelling and more</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20inlineCallbacks%20cascading%20cancelling%20and%20more&In-Reply-To=%3C8CEDF43C-21E3-4002-9CEC-4B8FFCA03F7E%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] inlineCallbacks cascading cancelling and more">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Aug 21 01:06:25 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055194.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
        <LI>Next message (by thread): <A HREF="055219.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55216">[ date ]</a>
              <a href="thread.html#55216">[ thread ]</a>
              <a href="subject.html#55216">[ subject ]</a>
              <a href="author.html#55216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Aug 17, 2010, at 12:46 AM, Yaroslav Fedevych wrote:

&gt;<i> 
</I>&gt;<i> On Aug 17, 2010, at 8:49 AM, Sergey Magafurov wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> ... lots of text skipped ...
</I>&gt;<i> 
</I>&gt;<i> You are currently considering your task from the viewpoint “let's make a callback chain for the perfect workflow and alter this chain in case of anything going wrong.” I think the flaw with this approach is that you are trying to make your “ideal” flow work at all in situations where it would, in fact, fail for the most of the time.
</I>&gt;<i> 
</I>&gt;<i> Instead of this, you could try to reconsider the task from the viewpoint of “Let's not add any further callbacks until this is absolutely necessary”. For me, this approach rather works. Moreover, you have the means to do it — a callback can return a Deferred, and so on.
</I>
This code doesn't have any tests or documentation, but it's extremely simple, and might give you an idea of how to do something like what you want: &lt;<A HREF="http://divmod.org/trac/browser/trunk/Epsilon/epsilon/pending.py">http://divmod.org/trac/browser/trunk/Epsilon/epsilon/pending.py</A>&gt;.

In this case, it's a multi-deferred in the sense that multiple parties might be interested in the initial value of the Deferred; but you could easily create something that would, for example, take a function which takes a Deferred and adds callbacks to it, then call that function to produce a new callback chain each time it happens.

I'm still not completely understanding why you want cancellation to cascade, since cancellation effectively _does_ cascade if you just allow CancellationError to propagate down the callback chains.

Basically, if you can implement a function in terms of functions that take Deferreds, you should really do that, rather than trying to change the way Deferred itself works.

Sorry that I wasn't able to understand your reasons for wanting this Deferred functionality.  It really sounds like Deferred already does all the stuff you want (releasing resources, getting garbage collected, etc) as long as you use them correctly, so I don't know what to suggest you do instead.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055194.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
	<LI>Next message (by thread): <A HREF="055219.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55216">[ date ]</a>
              <a href="thread.html#55216">[ thread ]</a>
              <a href="subject.html#55216">[ subject ]</a>
              <a href="author.html#55216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
