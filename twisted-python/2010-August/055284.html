<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adbapi MySQL read/write splitting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%20MySQL%20read/write%20splitting&In-Reply-To=%3CAANLkTimf9S1WceKC64Co%2Bfs0qbc9vm1Zn0eVbW1yeC8x%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055283.html">
   <LINK REL="Next"  HREF="055285.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adbapi MySQL read/write splitting</H1>
    <B>Jason J. W. Williams</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%20MySQL%20read/write%20splitting&In-Reply-To=%3CAANLkTimf9S1WceKC64Co%2Bfs0qbc9vm1Zn0eVbW1yeC8x%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] adbapi MySQL read/write splitting">jasonjwwilliams at gmail.com
       </A><BR>
    <I>Tue Aug 31 20:54:12 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055283.html">[Twisted-Python] adbapi MySQL read/write splitting
</A></li>
        <LI>Next message (by thread): <A HREF="055285.html">[Twisted-Python] adbapi MySQL read/write splitting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55284">[ date ]</a>
              <a href="thread.html#55284">[ thread ]</a>
              <a href="subject.html#55284">[ subject ]</a>
              <a href="author.html#55284">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That's one way of handling it. Another way is to wrap the library so
it does the splitting automatically. The advantage to the latter is
not making mistakes where you accidentally use the READ connection for
a write. For non-async Python there are some tools like SQL Relay
which will do this for you, but you have to setup SQL Relay servers
and use the SQL Relay dbapi driver. MySQL Proxy will also do it, but
it's not very stable.

I was somewhat hoping someone had already written a wrapper for doing
the splitting. Which brings me to a related question...if I were to
write a wrapper to do the splitting, would wrapping MySQLdb be
sufficient? Or would wrapping adbapi be the better path?

-J

On Tue, Aug 31, 2010 at 8:40 PM, Itamar Turner-Trauring
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
&gt;<i> On Tue, 2010-08-31 at 20:36 -0600, Jason J. W. Williams wrote:
</I>&gt;&gt;<i> Sending writes (e.g. INSERTs and UPDATEs) to a master MySQL server and
</I>&gt;&gt;<i> reads (SELECTs) to a slave.
</I>&gt;<i>
</I>&gt;<i> So... two adbapi.ConnectionPool instances, one for the server, one for
</I>&gt;<i> the slave?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055283.html">[Twisted-Python] adbapi MySQL read/write splitting
</A></li>
	<LI>Next message (by thread): <A HREF="055285.html">[Twisted-Python] adbapi MySQL read/write splitting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55284">[ date ]</a>
              <a href="thread.html#55284">[ thread ]</a>
              <a href="subject.html#55284">[ subject ]</a>
              <a href="author.html#55284">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
