<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Get trial to use the docstring?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Get%20trial%20to%20use%20the%20docstring%3F&In-Reply-To=20100805194956.2908.869931520.divmod.xquotient.19%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022653.html">
   <LINK REL="Next"  HREF="022656.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Get trial to use the docstring?</H1>
    <B>Nathan</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Get%20trial%20to%20use%20the%20docstring%3F&In-Reply-To=20100805194956.2908.869931520.divmod.xquotient.19%40localhost.localdomain"
       TITLE="[Twisted-Python] Get trial to use the docstring?">nathan.stocks at gmail.com
       </A><BR>
    <I>Thu Aug  5 19:25:35 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="022653.html">[Twisted-Python] Get trial to use the docstring?
</A></li>
        <LI>Next message: <A HREF="022656.html">[Twisted-Python] Get trial to use the docstring?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22654">[ date ]</a>
              <a href="thread.html#22654">[ thread ]</a>
              <a href="subject.html#22654">[ subject ]</a>
              <a href="author.html#22654">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Aug 5, 2010 at 1:49 PM,  &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
&gt;&gt;<i>If you want to add a feature that prints out the docstring (or some
</I>&gt;&gt;<i>portion of it) _in addition_ to the test name, that would probably be
</I>&gt;&gt;<i>accepted as a patch. &#160;But, in my mind, one of the most important
</I>&gt;&gt;<i>features of trial is the fact that it prints out stable identifiers for
</I>&gt;&gt;<i>the tests so you can see how to run them again when you're looking at
</I>&gt;&gt;<i>their results. &#160;We should never omit that. &#160;(In fact, I'd really like
</I>&gt;&gt;<i>it if trial always printed out a _full_ test identifier for easy
</I>&gt;&gt;<i>copy/pasting instead of sometimes only printing the method name.)
</I>&gt;<i>
</I>&gt;<i> Also, trial reporters are pluggable, so you can always write and use a
</I>&gt;<i> reporter that prints out exactly what you want printed out.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>
I have a number of questions:

1) I found the TreeReporter class that produces the default output
(twisted/trial/reporter.py), and I found the file that seems to get
run by trial (twisted/scripts/trial.py) but for the life of me I
couldn't figure out how to get my own class to show up as one of the
reporters that you can select by means of the --reporter=whatever
argument.  How do you tie the two together?  I can just submit my
modified TreeReporter, but it'd be nice to be able to also submit a
wildly different option...

2) What's the official process for submitting a patch (or where is the
process documented)?  I've never actually contributed code to
twisted...

3) Every time I install my custom twisted (with &quot;sudo python setup.py
install&quot; on OS X 10.6.4 system python), trial starts spitting out the
&quot;dropin cache&quot; error (see [1] below) which persists until I run &quot;sudo
twistd --help&quot; as was suggested on the list last week or so.  Isn't
there some way we can just address that error condition at
installation time so that doesn't occur in the first place?

4) I'm sold on test-driven development (which is why I'm learning
trial), so I'd like to both check for regressions and write a test for
my patch.  I found twisted/trial/test/test_reporter.py -- how do I run
just the tests in that file?  Does trial run on itself?

~ Nathan


[1] Traceback (most recent call last):
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/python/usage.py&quot;,
line 241, in parseOptions
    self.postOptions()
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/scripts/trial.py&quot;,
line 295, in postOptions
    self['reporter'] = self._loadReporterByName(self['reporter'])
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/scripts/trial.py&quot;,
line 281, in _loadReporterByName
    for p in plugin.getPlugins(itrial.IReporter):
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/plugin.py&quot;,
line 199, in getPlugins
    allDropins = getCache(package)
--- &lt;exception caught here&gt; ---
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/plugin.py&quot;,
line 178, in getCache
    dropinPath.setContent(pickle.dumps(dropinDotCache))
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/python/filepath.py&quot;,
line 765, in setContent
    f = sib.open('w')
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/python/filepath.py&quot;,
line 515, in open
    return self.create()
  File &quot;/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/python/filepath.py&quot;,
line 791, in create
    fdint = os.open(self.path, _CREATE_FLAGS)
exceptions.OSError: [Errno 13] Permission denied:
'/Library/Python/2.6/site-packages/Twisted-10.1.0_r29921-py2.6-macosx-10.6-universal.egg/twisted/plugins/bDcpsOvnXomi7b94dropin.cache.new'

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022653.html">[Twisted-Python] Get trial to use the docstring?
</A></li>
	<LI>Next message: <A HREF="022656.html">[Twisted-Python] Get trial to use the docstring?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22654">[ date ]</a>
              <a href="thread.html#22654">[ thread ]</a>
              <a href="subject.html#22654">[ subject ]</a>
              <a href="author.html#22654">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
