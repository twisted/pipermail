<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] inlineCallbacks cascading cancelling and more
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20inlineCallbacks%20cascading%20cancelling%20and%20more&In-Reply-To=%3CAANLkTikdXDZ-KN7kMh5cPoqVhZp3DZ3E74wVwOt8_Ji5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055186.html">
   <LINK REL="Next"  HREF="055188.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] inlineCallbacks cascading cancelling and more</H1>
    <B>Ivan Kozik</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20inlineCallbacks%20cascading%20cancelling%20and%20more&In-Reply-To=%3CAANLkTikdXDZ-KN7kMh5cPoqVhZp3DZ3E74wVwOt8_Ji5%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] inlineCallbacks cascading cancelling and more">ivan at ludios.org
       </A><BR>
    <I>Mon Aug 16 13:46:25 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055186.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
        <LI>Next message (by thread): <A HREF="055188.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55187">[ date ]</a>
              <a href="thread.html#55187">[ thread ]</a>
              <a href="subject.html#55187">[ subject ]</a>
              <a href="author.html#55187">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 16, 2010 at 08:34, Sergey Magafurov &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">smagafurov at naumen.ru</A>&gt; wrote:
&gt;<i> Wanted features:
</I>&gt;<i> 1. Ability to delete callbacks (delCallbacks)
</I>&gt;<i> 2. Automatic cancelling Deferreds if they are not needed any more (no
</I>&gt;<i> callbacks registered any more, all was deleted)
</I>&gt;<i> 3. Ability to add/del hooks on deferred's finishing with errback or
</I>&gt;<i> callback (addFinalizer/delFinalizer)
</I>&gt;<i> 4. Automatic call registered finalizers when deferred finished with
</I>&gt;<i> errback or callback (and cancel due to cancel calls errback)
</I>
I like to think of Deferreds as a good way to structure asynchronous
control flow.  For each synchronous Python control flow structure, you
can usually build an asynchronous variant of that control flow with
Deferreds.  For example, `addBoth` is like an asynchronous
try/finally.  I think Deferreds accomplish this task quite well, and I
would like to think that the API for Deferreds is essentially &quot;done&quot;.
Most of those features don't look right to me, and the implementation
is complicated enough already.

&gt;<i> With this features we can make cascading cancelling of inlineCallbacks
</I>&gt;<i> and cancelling full stack tree of inlineCallbacks when it is not needed
</I>&gt;<i> any more (some shutdown occurs for example at top level)
</I>
Better cancellation for @inlineCallbacks functions would be great.
Cancellation was added recently, which is why most things don't yet
support it well.  But which of those four features are really required
to improve inlineCallbacks cancellation?  I see that you filed
<A HREF="http://twistedmatrix.com/trac/ticket/4632">http://twistedmatrix.com/trac/ticket/4632</A> - but the 'Solution (idea)'
there did not have API changes to Deferreds.  Did you discover
anything that makes those API changes necessary?

You're also welcome to discuss this on irc.freenode.net #twisted.  The
best time is usually early morning, Boston time.

&gt;<i> See full code for details (this is runnable script):
</I>
I didn't read this, because it's very long, and the lines were wrapped
at 80 characters.  If you want to contribute changes, it's better to
post Twisted patches to the bug tracker, rather than monkeypatching
code.  With the monkeypatching, it's very hard to tell what you've
changed.

Ivan


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055186.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
	<LI>Next message (by thread): <A HREF="055188.html">[Twisted-Python] inlineCallbacks cascading cancelling and more
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55187">[ date ]</a>
              <a href="thread.html#55187">[ thread ]</a>
              <a href="subject.html#55187">[ subject ]</a>
              <a href="author.html#55187">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
