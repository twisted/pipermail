<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PATCH: setattr problem in ThreadAttr
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PATCH%3A%20setattr%20problem%20in%20ThreadAttr&In-Reply-To=20021113221934.U18881%40noris.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002289.html">
   <LINK REL="Next"  HREF="002292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PATCH: setattr problem in ThreadAttr</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PATCH%3A%20setattr%20problem%20in%20ThreadAttr&In-Reply-To=20021113221934.U18881%40noris.de"
       TITLE="[Twisted-Python] PATCH: setattr problem in ThreadAttr">twisted at itamarst.org
       </A><BR>
    <I>Wed Nov 13 17:04:13 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="002289.html">[Twisted-Python] PATCH: setattr problem in ThreadAttr
</A></li>
        <LI>Next message: <A HREF="002292.html">[Twisted-Python] PATCH: setattr problem in ThreadAttr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2290">[ date ]</a>
              <a href="thread.html#2290">[ thread ]</a>
              <a href="subject.html#2290">[ subject ]</a>
              <a href="author.html#2290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 13 Nov 2002 22:19:34 +0100
&quot;Matthias Urlichs&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">smurf at noris.de</A>&gt; wrote:

&gt;<i> I find myself more in immediate need of a queueing mechanism; the
</I>&gt;<i> quick-and-dirty solution seems to be to fork off two threads and to
</I>&gt;<i> use a bounded Python Queue. However, the continuous switching between
</I>&gt;<i> the reader(which blocks on the queue, therefore needs to be in its own
</I>&gt;<i> thread) and Twisted's main thread (which writes to the
</I>&gt;<i> process-or-whatever that's going to eventually consume the data) seems
</I>&gt;<i> rather sub-optimal for performance.  :-/
</I>
I don't see why you need a thread for queueing - a simple list would do,
or a class wrapping one. Or look at transport's producer/consumer
interface if this is for a protocol. Adding to queue is appending to
list, dequeuing is getting item from beginning of list.

If, and *only* if you need threads - i.e. you are doing either blocking
operations or really long running calculations, there are some options
for you in Twisted.

We have a thread pool dispatcher that queues methods to be run in the
thread pool, that covers some the use cases. If you want to use a queue
I suggest just sticking to Python's Queue or the slighly nicer
twisted.python.timeoutqueue.

In general using threads in Python is slow anyway do to the global
interpreter lock, which means in most cases only one thread at a time is
running anyway. That being said, Queue.Queue is rather slow in and of
itself, and can be implemented in a much faster way by using one lock,
and use mxQueue.

-- 
Itamar Shtull-Trauring    <A HREF="http://itamarst.org/">http://itamarst.org/</A>
Available for Python, Twisted, Zope and Java consulting
***&gt; <A HREF="http://VoteNoWar.org">http://VoteNoWar.org</A> -- vote/donate/volunteer &lt;***


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002289.html">[Twisted-Python] PATCH: setattr problem in ThreadAttr
</A></li>
	<LI>Next message: <A HREF="002292.html">[Twisted-Python] PATCH: setattr problem in ThreadAttr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2290">[ date ]</a>
              <a href="thread.html#2290">[ thread ]</a>
              <a href="subject.html#2290">[ subject ]</a>
              <a href="author.html#2290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
