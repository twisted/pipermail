<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Another IRC patch.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Another%20IRC%20patch.&In-Reply-To=%3C20021102.105717.74755582.glyph%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034699.html">
   <LINK REL="Next"  HREF="034703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Another IRC patch.</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Another%20IRC%20patch.&In-Reply-To=%3C20021102.105717.74755582.glyph%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Another IRC patch.">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Nov  2 09:57:17 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034699.html">[Twisted-Python] Another IRC patch.
</A></li>
        <LI>Next message (by thread): <A HREF="034703.html">[Twisted-Python] Another IRC patch.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34700">[ date ]</a>
              <a href="thread.html#34700">[ thread ]</a>
              <a href="subject.html#34700">[ subject ]</a>
              <a href="author.html#34700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sat, 2 Nov 2002 23:19:18 +1100, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">screwtape at froup.com</A> wrote:

&gt;<i> While developing my twisted.im bot (new this week! database access and an
</I>&gt;<i> infobot-style plugin!) I've come up against two seperate annoyances. This
</I>&gt;<i> patch fixes both of them.
</I>
Glad you're making progress!  I'm sorry that twisted.im is annoying you :-(.
Hopefully I can give some guidance as to how it's _supposed_ to work...

&gt;<i> Number 1: the IRC protocol defines (among other things) two message types -
</I>&gt;<i> privmsg and notice. They are identical in every respect except that a notice
</I>&gt;<i> must not be automatically replied to.
</I>
Except when they should be automatically replied to.  Such as the notice that
NickServ gives you upon login, or one of the various notices that older
spambots will generate in response to a VERSION directive.

This is one of the worse excresences of the IRC protocol and I'd like to not
see promoted to the higher levels of abstractions in twisted.im.  What you're
semantically communicating is metadata about the message (&quot;please don't
autorespond to this (unless you really want to)&quot;) and not a wholly different
type of message.  So I've committed a different fix :-).  The &quot;metadata&quot;
dictionary passesd to showMessage and showGroupMessage is designed to
encapsulate this sort of protocol-specific need, so IRC &quot;notice&quot; messages will
have an entry in the metadata dictionary of {&quot;dontAutoRespond&quot;: 1}.

I just committed a fix that does this... if you're using CVS, your bot can now
check for that flag in the metadata dict and drop the message on the floor
appropriately.

For t.im's default use case (end-user chat application) whether or not robots
should automatically respond to a certain type of message is completely
irrelevant to its display.

&gt;<i> Number 2: [ ... ] twisted.im.ircsupport by default prints an error message
</I>&gt;<i> for each unknown command it recieves. Slashnet in particular seems to like to
</I>&gt;<i> send a lot of them, and it clutters up my screen. This patch simply comments
</I>&gt;<i> out the print statement and adds a 'pass'.
</I>
Hmm... that behavior should at least be customizeable with a flag... I
personally have used that console output a number of times, and it has been
invaluable in debugging certain things in twisted.im on various occasions.  If
you don't want the output going to the console, there should be a separate log.
Perhaps you could specifically ignore the slashnet message types you don't
want?

-- 
 |    &lt;`'&gt;    |  Glyph Lefkowitz: Traveling Sorcerer   |
 |   &lt; _/ &gt;   |  Lead Developer,  the Twisted project  |
 |  &lt; ___/ &gt;  |      <A HREF="http://www.twistedmatrix.com">http://www.twistedmatrix.com</A>      |
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20021102/b6b9f8dc/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034699.html">[Twisted-Python] Another IRC patch.
</A></li>
	<LI>Next message (by thread): <A HREF="034703.html">[Twisted-Python] Another IRC patch.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34700">[ date ]</a>
              <a href="thread.html#34700">[ thread ]</a>
              <a href="subject.html#34700">[ subject ]</a>
              <a href="author.html#34700">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
