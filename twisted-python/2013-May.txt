From _ at lvh.io  Fri May  3 08:57:03 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Fri, 3 May 2013 14:57:03 +0200
Subject: [Twisted-Python] How do I write AMP Command definitions
	TTD-edly?
In-Reply-To: <20130304161744.9151.828707065.divmod.xquotient.6@localhost6.localdomain6>
References: <CAE_Hg6bOAshXfRp4nfeyZs_U9CuWHrHDBL_0ufTkLztYxx1uiQ@mail.gmail.com>
	<20130304161744.9151.828707065.divmod.xquotient.6@localhost6.localdomain6>
Message-ID: <CAE_Hg6aGygKP3Ft-MfOokjioPea8mfrC1dAr53bgt5czHEbGcg@mail.gmail.com>

Hi again,

Sorry to drag up this old post, but I have another question.

On Mon, Mar 4, 2013 at 5:17 PM, <exarkun at twistedmatrix.com> wrote:

> Chris and I wrote all the AMP-using code for game TDD.  See
> game/test/test_network.py in lp:game.
>

I've implemented this in txampext.commandtests:
https://github.com/lvh/txampext/blob/master/txampext/commandtests.py

There's one more issue I have though. The lp:game code (and now txampext)
deals with arguments and responses, but not exceptions. Did you have
something pleasant for that, or should I just hack the the equivalent thing
together for AMP exceptions as well?

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130503/96c7ab4c/attachment.htm 

From mkomu at cs.hut.fi  Sat May  4 07:28:20 2013
From: mkomu at cs.hut.fi (Miika Komu)
Date: Sat, 04 May 2013 14:28:20 +0300
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
Message-ID: <5184F0D4.4080603@cs.hut.fi>

Howdy,

we investigated the networking APIs of Twisted (10.2) and published our
findings in Ottawa Linux Symposium 2012:

http://nw.dreamhosters.com/ols/ols2012/ols2012-komu.pdf

We propose two types of improvements to the framework described in full
detail in section 4.3.1 of the publication. First, we suggest security
bug fixes. Second, we suggest improvements that can improve either the
user experience (i.e. by improving latency in IPv6 environments) or
developers (after all, frameworks are a conveniency for the developers).
The suggestions for improvements are briefly summarized below.

Security issues
---------------
* R1.3:  IPv6-mapped addresses should not be present on the wire for
security reasons.
* R3.2: Server-side multihoming for UDP does not work properly. The
framework should use SO_BINDTODEVICE option or sendmsg()/recvmsg()
interfaces in a proper way.
* (R5.3): The framework does not initialize the SSL/TLS implementation
automatically

Suggested improvements (for better end-user or developer experience)
--------------------------------------------------------------------
* (R1.1): The framework does not support symbolic host names in its
APIs, i.e., does not hide the details of hostname-to-address resolution
from the application
* R1.2: The details of IPv6 are not abstracted away from the application
* R2.1: The framework does not implement DNS look ups with
getaddrinfo(). This is important for IPv6 source address selection
* R2.2: The framework does not support parallel DNS look ups over IPv4
and IPv6 to optimize latency
* R3.3: The framework does not support parallel connect() over IPv4 and
IPv6 to minimize the latency for connection set-up
* (R4.1): TCP and UDP are not easily interchangeable

Please refer to section 4.3.4 in the publication for a more elaborate
discussion of the improvements.


From mkomu at cs.hut.fi  Sat May  4 08:50:37 2013
From: mkomu at cs.hut.fi (Miika Komu)
Date: Sat, 04 May 2013 15:50:37 +0300
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <5184F0D4.4080603@cs.hut.fi>
References: <5184F0D4.4080603@cs.hut.fi>
Message-ID: <5185041D.2070807@cs.hut.fi>

Hi,

On 04/05/13 14:28, Miika Komu wrote:

> Security issues
> ---------------
> * R1.3:  IPv6-mapped addresses should not be present on the wire for
> security reasons.
> * R3.2: Server-side multihoming for UDP does not work properly. The
> framework should use SO_BINDTODEVICE option or sendmsg()/recvmsg()
> interfaces in a proper way.
> * (R5.3): The framework does not initialize the SSL/TLS implementation
> automatically

clarification... strictly speaking, R3.2 could be categorized as a
non-security bug (it results in failed connectivity).


From itamar at itamarst.org  Sat May  4 10:00:15 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sat, 04 May 2013 10:00:15 -0400
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <5184F0D4.4080603@cs.hut.fi>
References: <5184F0D4.4080603@cs.hut.fi>
Message-ID: <5185146F.6080906@itamarst.org>

On 05/04/2013 07:28 AM, Miika Komu wrote:
> Howdy,
>
> we investigated the networking APIs of Twisted (10.2) and published our
> findings in Ottawa Linux Symposium 2012:
>
> http://nw.dreamhosters.com/ols/ols2012/ols2012-komu.pdf
Thanks for sending us your suggestions for improvement. I'm wondering 
about your choice of version, though: Twisted 10.2 was released in 2010. 
Why did you look at an old version of Twisted for a conference in 2012?


> Suggested improvements (for better end-user or developer experience)
> --------------------------------------------------------------------
> * (R1.1): The framework does not support symbolic host names in its
> APIs, i.e., does not hide the details of hostname-to-address resolution
> from the application
> * R1.2: The details of IPv6 are not abstracted away from the application
> * R2.1: The framework does not implement DNS look ups with
> getaddrinfo(). This is important for IPv6 source address selection
> * R2.2: The framework does not support parallel DNS look ups over IPv4
> and IPv6 to optimize latency
> * R3.3: The framework does not support parallel connect() over IPv4 and
> IPv6 to minimize the latency for connection set-up
>
I believe pretty much of all of these have been fixed in Twisted over 
the past year, or are written and in the process of addressing review 
comments.

Except for this:

* (R4.1): TCP and UDP are not easily interchangeable

Which I don't understand at all. UDP and TCP are completely different 
than each other, there's no way to make them interchangeable.


From mkomu at cs.hut.fi  Sat May  4 11:54:12 2013
From: mkomu at cs.hut.fi (Miika Komu)
Date: Sat, 04 May 2013 18:54:12 +0300
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <5185146F.6080906@itamarst.org>
References: <5184F0D4.4080603@cs.hut.fi> <5185146F.6080906@itamarst.org>
Message-ID: <51852F24.9000908@cs.hut.fi>

Hi Itamar,

On 05/04/2013 05:00 PM, Itamar Turner-Trauring wrote:
> On 05/04/2013 07:28 AM, Miika Komu wrote:
>> Howdy,
>>
>> we investigated the networking APIs of Twisted (10.2) and published our
>> findings in Ottawa Linux Symposium 2012:
>>
>> http://nw.dreamhosters.com/ols/ols2012/ols2012-komu.pdf
> Thanks for sending us your suggestions for improvement. I'm wondering
> about your choice of version, though: Twisted 10.2 was released in 2010.
> Why did you look at an old version of Twisted for a conference in 2012?

I'll have to check this from my co-author who did the analysis.

>> Suggested improvements (for better end-user or developer experience)
>> --------------------------------------------------------------------
>> * (R1.1): The framework does not support symbolic host names in its
>> APIs, i.e., does not hide the details of hostname-to-address resolution
>> from the application
>> * R1.2: The details of IPv6 are not abstracted away from the application
>> * R2.1: The framework does not implement DNS look ups with
>> getaddrinfo(). This is important for IPv6 source address selection
>> * R2.2: The framework does not support parallel DNS look ups over IPv4
>> and IPv6 to optimize latency
>> * R3.3: The framework does not support parallel connect() over IPv4 and
>> IPv6 to minimize the latency for connection set-up
>>
> I believe pretty much of all of these have been fixed in Twisted over
> the past year, or are written and in the process of addressing review
> comments.

This is good news!

> Except for this:
>
> * (R4.1): TCP and UDP are not easily interchangeable
>
> Which I don't understand at all. UDP and TCP are completely different
> than each other, there's no way to make them interchangeable.

with connected sockets, (almost) the same API calls could be used and 
the details could be possibly abstracted away (some kind of a flag still 
needed to choose between TCP and UDP). A number of applications appear 
to support both TCP and UDP-based connectivity:

4.2.4 A Summary of the Sockets API Findings and Their Implications:

Finding 2 statistics: TCP-UDP hybrids 26.3%

Finding 2. Hybrid applications using both TCP and UDP occur as 
frequently as TCP-only applications. Application developers seem to 
write many application protocols to be run with both transports. While 
it is possible to write almost identical code for the two transports, 
the Sockets API favors different functions for the two. This 
unnecessarily complicates the application code.


From glyph at twistedmatrix.com  Sat May  4 19:51:08 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 4 May 2013 16:51:08 -0700
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <51852F24.9000908@cs.hut.fi>
References: <5184F0D4.4080603@cs.hut.fi> <5185146F.6080906@itamarst.org>
	<51852F24.9000908@cs.hut.fi>
Message-ID: <1810A2A6-0CF7-4043-9FD8-57690843D685@twistedmatrix.com>

Hi Miika,

On May 4, 2013, at 8:54 AM, Miika Komu <mkomu at cs.hut.fi> wrote:

> with connected sockets, (almost) the same API calls could be used and 
> the details could be possibly abstracted away (some kind of a flag still 
> needed to choose between TCP and UDP). A number of applications appear 
> to support both TCP and UDP-based connectivity:

Supporting both TCP (stream-based) and UDP (datagram-based) communications requires explicit decisions on the part of the application, both in the design of the protocol and in the logic of its parsing.  The biggest difference is that TCP applications must implement logic to deal with framing, where as UDP applications do not need to, but there are other nuances as well.

See this frequently asked question for more information:

<http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith>

> While it is possible to write almost identical code for the two transports, 
> the Sockets API favors different functions for the two. This 
> unnecessarily complicates the application code.

It does not "unnecessarily complicate" the application code; it introduces a different code path for a semantically distinct operation (transmit a datagram vs. transmit a stream segment).

Based on my experience helping people understand UDP in the past, I would hazard a guess that many of these application protocols that can run in hybrid TCP/UDP mode are simply full of bugs because their developers did UDP testing on a fast local network, where, under low load, UDP can superficially behave like TCP and did not appreciate the semantics of the low-level networking operations they were invoking.  Twisted at least makes the distinction explicit, so that in order to make this mistake you need to consciously implement the same code against two transports.

Thanks for looking into Twisted, though; the fact that we have already addressed most of your other criticisms in our development process indicates that most of the other issues you pointed out were spot on :).  I just hope that next time you'll have a look at a more recent version!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130504/5e072290/attachment.htm 

From exarkun at twistedmatrix.com  Sun May  5 00:05:28 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 May 2013 04:05:28 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1367726728.35.308864546@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130505/99eea986/attachment.htm 

From glyph at twistedmatrix.com  Mon May  6 01:11:27 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 5 May 2013 22:11:27 -0700
Subject: [Twisted-Python] chain certificates on the command line?
Message-ID: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>

With the recent resolution of <http://twistedmatrix.com/trac/ticket/2061>, I am wondering if there is already a plan in progress (and maybe some existing tickets) for adding intermediary chain certificate support to client and server endpoint string syntaxes?

Apologies if I lost it somewhere in the somewhat lengthy discussion on that ticket :).

-glyph





From hs at ox.cx  Mon May  6 02:23:22 2013
From: hs at ox.cx (Hynek Schlawack)
Date: Mon, 6 May 2013 08:23:22 +0200
Subject: [Twisted-Python] chain certificates on the command line?
In-Reply-To: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>
References: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>
Message-ID: <63F653AF-61D8-4B97-B1A2-EC3E24AF6A6B@ox.cx>

Am 06.05.2013 um 07:11 schrieb Glyph <glyph at twistedmatrix.com>:

> With the recent resolution of <http://twistedmatrix.com/trac/ticket/2061>, I am wondering if there is already a plan in progress (and maybe some existing tickets) for adding intermediary chain certificate support to client and server endpoint string syntaxes?

Yes, I?m on it for servers: http://twistedmatrix.com/trac/ticket/6499

I hope to get it done by 13.1 depending on review times and the actual release time?

?h

From pierre at jaury.eu  Mon May  6 05:57:28 2013
From: pierre at jaury.eu (Pierre Jaury)
Date: Mon, 06 May 2013 11:57:28 +0200
Subject: [Twisted-Python] Twisted Web documentation out of date
Message-ID: <51877E88.4050409@jaury.eu>

Twisted Web documentation still refers to some deprecated objects that
have been removed from Twisted 13.0. For instance, the latest version of
this page :


http://twistedmatrix.com/documents/current/web/howto/web-in-60/error-handling.html

refers to NoResource as being part of the twisted.web.error module while
it was moved to twisted.web.resource a while ago.

I did not find any other outdated reference for now, yet this might not
be as isolated as it seems.

Regards,
Pierre.

-- 
Pierre Jaury <pierre at jaury.eu>
Weblog - http://kaiyou.fr
GPG ID - E804FB60

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20130506/ebd97ab8/attachment.pgp 

From itamar at futurefoundries.com  Mon May  6 11:31:20 2013
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Mon, 6 May 2013 11:31:20 -0400
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <51877E88.4050409@jaury.eu>
References: <51877E88.4050409@jaury.eu>
Message-ID: <CAOp9P3rW++iJEtw74J9sMdeCP7qz1kiS2cchfwrxYRgg_=f=9A@mail.gmail.com>

On Mon, May 6, 2013 at 5:57 AM, Pierre Jaury <pierre at jaury.eu> wrote:

> Twisted Web documentation still refers to some deprecated objects that
> have been removed from Twisted 13.0. For instance, the latest version of
> this page :
>
>
>
> http://twistedmatrix.com/documents/current/web/howto/web-in-60/error-handling.html
>
> refers to NoResource as being part of the twisted.web.error module while
> it was moved to twisted.web.resource a while ago.
>
> I did not find any other outdated reference for now, yet this might not
> be as isolated as it seems.
>
> Regards,
> Pierre.
>
> --
> Pierre Jaury <pierre at jaury.eu>
> Weblog - http://kaiyou.fr
> GPG ID - E804FB60
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130506/c104757a/attachment.htm 

From itamar at futurefoundries.com  Mon May  6 11:31:48 2013
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Mon, 6 May 2013 11:31:48 -0400
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <51877E88.4050409@jaury.eu>
References: <51877E88.4050409@jaury.eu>
Message-ID: <CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>

Thanks for reporting this; could you file a bug at
http://twistedmatrix.com/trac/?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130506/bb014a24/attachment.htm 

From glyph at twistedmatrix.com  Mon May  6 13:47:35 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 6 May 2013 10:47:35 -0700
Subject: [Twisted-Python] chain certificates on the command line?
In-Reply-To: <63F653AF-61D8-4B97-B1A2-EC3E24AF6A6B@ox.cx>
References: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>
	<63F653AF-61D8-4B97-B1A2-EC3E24AF6A6B@ox.cx>
Message-ID: <75F6F2BA-188D-4484-8FAE-9B0D88820F61@twistedmatrix.com>


On May 5, 2013, at 11:23 PM, Hynek Schlawack <hs at ox.cx> wrote:

> Am 06.05.2013 um 07:11 schrieb Glyph <glyph at twistedmatrix.com>:
> 
>> With the recent resolution of <http://twistedmatrix.com/trac/ticket/2061>, I am wondering if there is already a plan in progress (and maybe some existing tickets) for adding intermediary chain certificate support to client and server endpoint string syntaxes?
> 
> Yes, I?m on it for servers: http://twistedmatrix.com/trac/ticket/6499
> 
> I hope to get it done by 13.1 depending on review times and the actual release time?

Great, looking forward to it.  Feel free to ping me for a review when it's ready.

I guess we should really start talking about release timing for 13.1 sometime soon.

-glyph



From bino at indoakses-online.com  Mon May  6 21:19:06 2013
From: bino at indoakses-online.com (bino at indoakses-online.com)
Date: Tue, 7 May 2013 08:19:06 +0700
Subject: [Twisted-Python] is it about wokkel ?
Message-ID: <4633cb697b725841ba850dd72e163f8f.squirrel@localhost>

Dear All ...

I Really not sure whetehr it's about wokkel or not, please bare with me.

I run a twistd tac in a tablet with Linux OS.

Basically it's a wokkel based XMPP client that send a line to own XMPP
server.
This client also join a conference room, I monitor the conference room

1. First try, send to a bot jid and that bot didn't send any response.
Result : After about 12-13 hour, :
a. Conference said that the client left the room
b. The system (Tablet) hang

2. Second try : send to the conference room , and another bot (the one at
#1) echo it to room also
Result : All system stable passing 24 hour test.

Kindly please some body give me tell me what wokkel XMPP client will do
when it got no resposponse/call from other for long time.

Sincerely
-bino-



From exarkun at twistedmatrix.com  Tue May  7 09:14:10 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 07 May 2013 13:14:10 -0000
Subject: [Twisted-Python] is it about wokkel ?
In-Reply-To: <4633cb697b725841ba850dd72e163f8f.squirrel@localhost>
References: <4633cb697b725841ba850dd72e163f8f.squirrel@localhost>
Message-ID: <20130507131410.5372.1755092209.divmod.xquotient.54@top>

On 01:19 am, bino at indoakses-online.com wrote:
>Dear All ...
>
>I Really not sure whetehr it's about wokkel or not, please bare with 
>me.
>
>I run a twistd tac in a tablet with Linux OS.
>
>Basically it's a wokkel based XMPP client that send a line to own XMPP
>server.
>This client also join a conference room, I monitor the conference room
>
>1. First try, send to a bot jid and that bot didn't send any response.
>Result : After about 12-13 hour, :
>a. Conference said that the client left the room
>b. The system (Tablet) hang
>
>2. Second try : send to the conference room , and another bot (the one 
>at
>#1) echo it to room also
>Result : All system stable passing 24 hour test.
>
>Kindly please some body give me tell me what wokkel XMPP client will do
>when it got no resposponse/call from other for long time.

Hi bino,

I don't think there's enough detail in your question for anyone to offer 
much assistance.

It sounds like whatever problem you're experiencing is very closely tied 
to the specifics of the implementation of the XMPP client and XMPP 
server you're using.  Are these standard packages or did you build them 
on top of Twisted and Wokkel?

If you can provide a minimal example that reproduces the problem, that 
will present the greatest opportunity for someone to help you out.  See 
http://sscce.org/ for more on that.

Good luck,
Jean-Paul


From jon at multani.info  Wed May  8 10:30:37 2013
From: jon at multani.info (Jonathan Ballet)
Date: Wed, 8 May 2013 16:30:37 +0200
Subject: [Twisted-Python] Helping the Python 3 port
Message-ID: <20130508143036.GA20746@danio.home>

Hi,

I'm interested to give a help to port Twisted to Python 3.
I gave a look at the tickets on Trac tagged with py3k and those in the
Python-3.x milestone. I gave a try at
http://twistedmatrix.com/trac/ticket/5802 to see what still needed to be
done, and after rebasing the patch on trunk and starting to hack a few
modules, I noticed that I have to do those 3 things in a bunch of
places:

* use the newer "except Exception as e" instead of "except Exception, e"
* use the print function instead of the print statement
* replace "implements(IFoo)" by the class decorator "@implementer(IFoo)"

I can probably post a new patch which fixes all those things in order
for Trial (as per #5802) to just start, but I wonder if this is the
right approach and if it wouldn't be better to fix those first (since
they are, AFAIK, compatible with Python 2.6 anyway).

Any idea?

 Jonathan


From tom.prince at ualberta.net  Wed May  8 11:36:14 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 08 May 2013 09:36:14 -0600
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508143036.GA20746@danio.home>
References: <20130508143036.GA20746@danio.home>
Message-ID: <87obclwkk1.fsf@hermes.hocat.ca>

Jonathan Ballet <jon at multani.info> writes:

> Hi,

Welcome.

> I'm interested to give a help to port Twisted to Python 3.

Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?

That is the plan for porting to python3.

  Tom


From itamar at itamarst.org  Wed May  8 13:00:16 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 08 May 2013 13:00:16 -0400
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508143036.GA20746@danio.home>
References: <20130508143036.GA20746@danio.home>
Message-ID: <518A84A0.9000208@itamarst.org>

On 05/08/2013 10:30 AM, Jonathan Ballet wrote:
> Hi,
>
> I'm interested to give a help to port Twisted to Python 3.
> I gave a look at the tickets on Trac tagged with py3k and those in the
> Python-3.x milestone. I gave a try at
> http://twistedmatrix.com/trac/ticket/5802 to see what still needed to be
> done, and after rebasing the patch on trunk and starting to hack a few
> modules, I noticed that I have to do those 3 things in a bunch of
> places:
>
> * use the newer "except Exception as e" instead of "except Exception, e"
> * use the print function instead of the print statement
> * replace "implements(IFoo)" by the class decorator "@implementer(IFoo)"
>
> I can probably post a new patch which fixes all those things in order
> for Trial (as per #5802) to just start, but I wonder if this is the
> right approach and if it wouldn't be better to fix those first (since
> they are, AFAIK, compatible with Python 2.6 anyway).
>
You can definitely do these as a patch on their own, but try not to do 
too many modules at once so that the patch is manageable for review. The 
process for Python 3 ports is getting the tests for a module running 
correctly on Python 3, and then making them pass. Past efforts to port 
to Python 3 have foundered on things like:

 1. Not bothering to make the tests work the same way on Python 2. You
    /must not/ change APIs from Python 2's point of view as part of a
    Python 3 port.
 2. Randomly changing bytes to unicode with no thought about which is
    correct.
 3. Lack of test coverage. Old code doesn't have enough tests, so you
    sometimes need to add tests and only then do the port.



From exarkun at twistedmatrix.com  Wed May  8 15:02:47 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 08 May 2013 19:02:47 -0000
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508143036.GA20746@danio.home>
References: <20130508143036.GA20746@danio.home>
Message-ID: <20130508190247.5372.1247062538.divmod.xquotient.75@top>

On 02:30 pm, jon at multani.info wrote:
>Hi,
>
>I'm interested to give a help to port Twisted to Python 3.
>I gave a look at the tickets on Trac tagged with py3k and those in the
>Python-3.x milestone. I gave a try at
>http://twistedmatrix.com/trac/ticket/5802 to see what still needed to 
>be
>done, and after rebasing the patch on trunk and starting to hack a few
>modules, I noticed that I have to do those 3 things in a bunch of
>places:
>
>* use the newer "except Exception as e" instead of "except Exception, 
>e"
>* use the print function instead of the print statement
>* replace "implements(IFoo)" by the class decorator 
>"@implementer(IFoo)"
>
>I can probably post a new patch which fixes all those things in order
>for Trial (as per #5802) to just start, but I wonder if this is the
>right approach and if it wouldn't be better to fix those first (since
>they are, AFAIK, compatible with Python 2.6 anyway).
>
>Any idea?

To expand on what others have said in this thread, here's another 
approach you might consider:

  1) Open up twisted/scripts/trial.py and look at what Twisted modules it 
imports.

  2) If you do this, you'll see it uses (among other things) 
twisted.python.usage.

  3) Look at admin/_twistedpython3.py, you'll see that 
twisted.python.usage hasn't been ported yet.

  4) Look at twisted/python/usage.py and you'll see it doesn't have very 
many Twisted dependencies (making it a better candidate for porting work 
than twisted/scripts/trial.py).  Look through the tracker to see if 
there's a ticket for porting any of these.  As it turns out, 
twisted.python.util has already been ported and there are tickets for 
twisted.python.reflect (#6239 - sort of) and twisted.python.text (#1601 
and #6341 - sort of).

  5) Pick up one of those dependency tickets to start with - #1601 and 
#6341 seem to be in progress, but I don't see anyone actively working on 
#6239.

  6) Port that module by making its test suite pass and generally 
following the steps given the Python 3 porting page on the wiki.

Jean-Paul


From jon at multani.info  Wed May  8 15:27:52 2013
From: jon at multani.info (Jonathan Ballet)
Date: Wed, 8 May 2013 21:27:52 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508190247.5372.1247062538.divmod.xquotient.75@top>
References: <20130508143036.GA20746@danio.home>
	<20130508190247.5372.1247062538.divmod.xquotient.75@top>
Message-ID: <20130508192751.GC21829@danio.home>

On Wed, May 08, 2013 at 07:02:47PM -0000, exarkun at twistedmatrix.com wrote:
> On 02:30 pm, jon at multani.info wrote:
> >Hi,
> >
> >I'm interested to give a help to port Twisted to Python 3.
> >I gave a look at the tickets on Trac tagged with py3k and those in the
> >Python-3.x milestone. I gave a try at
> >http://twistedmatrix.com/trac/ticket/5802 to see what still needed to 
> >be
> >done, and after rebasing the patch on trunk and starting to hack a few
> >modules, I noticed that I have to do those 3 things in a bunch of
> >places:
> >
> >* use the newer "except Exception as e" instead of "except Exception, 
> >e"
> >* use the print function instead of the print statement
> >* replace "implements(IFoo)" by the class decorator 
> >"@implementer(IFoo)"
> >
> >I can probably post a new patch which fixes all those things in order
> >for Trial (as per #5802) to just start, but I wonder if this is the
> >right approach and if it wouldn't be better to fix those first (since
> >they are, AFAIK, compatible with Python 2.6 anyway).
> >
> >Any idea?
> 
> To expand on what others have said in this thread, here's another 
> approach you might consider:
> 
>   1) Open up twisted/scripts/trial.py and look at what Twisted modules it 
> imports.
> 
>   2) If you do this, you'll see it uses (among other things) 
> twisted.python.usage.
> 
>   3) Look at admin/_twistedpython3.py, you'll see that 
> twisted.python.usage hasn't been ported yet.
> 
>   4) Look at twisted/python/usage.py and you'll see it doesn't have very 
> many Twisted dependencies (making it a better candidate for porting work 
> than twisted/scripts/trial.py).  Look through the tracker to see if 
> there's a ticket for porting any of these.  As it turns out, 
> twisted.python.util has already been ported and there are tickets for 
> twisted.python.reflect (#6239 - sort of) and twisted.python.text (#1601 
> and #6341 - sort of).
> 
>   5) Pick up one of those dependency tickets to start with - #1601 and 
> #6341 seem to be in progress, but I don't see anyone actively working on 
> #6239.
> 
>   6) Port that module by making its test suite pass and generally 
> following the steps given the Python 3 porting page on the wiki.

OK, so we can probably sum all of this with: get the dependencies
ticketed, ported and merged first, before tackling big things like
twisted/scripts/trial.py

Is that right?

 Jonathan


From exarkun at twistedmatrix.com  Wed May  8 17:01:47 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 08 May 2013 21:01:47 -0000
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508192751.GC21829@danio.home>
References: <20130508143036.GA20746@danio.home>
	<20130508190247.5372.1247062538.divmod.xquotient.75@top>
	<20130508192751.GC21829@danio.home>
Message-ID: <20130508210147.5372.1797203887.divmod.xquotient.76@top>

On 07:27 pm, jon at multani.info wrote:
>[snip]
>
>OK, so we can probably sum all of this with: get the dependencies
>ticketed, ported and merged first, before tackling big things like
>twisted/scripts/trial.py
>
>Is that right?

Exactly!

Jean-Paul
>Jonathan
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From jon at multani.info  Wed May  8 19:03:56 2013
From: jon at multani.info (Jonathan Ballet)
Date: Thu, 9 May 2013 01:03:56 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <87obclwkk1.fsf@hermes.hocat.ca>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
Message-ID: <20130508230355.GD21829@danio.home>

On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
> 
> That is the plan for porting to python3.

What about "importing" code from other librairies?

I have this specific case where I need to support metaclass for both
Python 2.x and Python 3.x which have different syntax (__metaclass__ and
class XXX(.., metaclass=...)), which `six` addresses with a function
called `with_metaclass()` [1]

Twisted is not depending on this kind of library, how those things
should be deal with then? I can include this specific snippet (which is
actually a two-liner)in t.python.compat but what about the license?

 Jonathan


[1]: http://pythonhosted.org/six/#six.with_metaclass


From glyph at twistedmatrix.com  Wed May  8 20:40:56 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 8 May 2013 17:40:56 -0700
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508230355.GD21829@danio.home>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
Message-ID: <6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>


On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:

> On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
>> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
>> 
>> That is the plan for porting to python3.
> 
> What about "importing" code from other librairies?
> 
> I have this specific case where I need to support metaclass for both
> Python 2.x and Python 3.x which have different syntax (__metaclass__ and
> class XXX(.., metaclass=...)), which `six` addresses with a function
> called `with_metaclass()` [1]

Within Twisted?  Which case is that?

> Twisted is not depending on this kind of library, how those things
> should be deal with then? I can include this specific snippet (which is
> actually a two-liner)in t.python.compat but what about the license?

Most of the logic in six is pretty trivial, and we already have our own Python-version-compatibility code (in twisted.python.compat) so thus far we have gone with just replicating whatever functionality we need.

Of course, the best is not needing the compatibility code at all, which is why I'm curious exactly which case you're referring to :).

-glyph

From jon at multani.info  Thu May  9 05:04:23 2013
From: jon at multani.info (Jonathan Ballet)
Date: Thu, 9 May 2013 11:04:23 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
Message-ID: <20130509090421.GA6058@danio.home>

On Wed, May 08, 2013 at 05:40:56PM -0700, Glyph wrote:
> 
> On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:
> 
> > On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
> >> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
> >> 
> >> That is the plan for porting to python3.
> > 
> > What about "importing" code from other librairies?
> > 
> > I have this specific case where I need to support metaclass for both
> > Python 2.x and Python 3.x which have different syntax (__metaclass__ and
> > class XXX(.., metaclass=...)), which `six` addresses with a function
> > called `with_metaclass()` [1]
> 
> Within Twisted?  Which case is that?

I was referring to twisted.python.reflect.PropertyAccessor which uses a
metaclass to manage access to its properties. It is marked as deprecated
since Twisted 12.1.0, so I guess there still need to support it on both
Python 2.x and Python 3, which is why I was looking for this
compatibility layer.

> > Twisted is not depending on this kind of library, how those things
> > should be deal with then? I can include this specific snippet (which is
> > actually a two-liner)in t.python.compat but what about the license?
> 
> Most of the logic in six is pretty trivial, and we already have our own Python-version-compatibility code (in twisted.python.compat) so thus far we have gone with just replicating whatever functionality we need.

Granted, the code is trivial. So it's OK to replicate it in t.p.compat
then? If there's a need for this code at all, of course :)

 Jonathan


From exarkun at twistedmatrix.com  Thu May  9 06:35:28 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 09 May 2013 10:35:28 -0000
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130509090421.GA6058@danio.home>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
	<20130509090421.GA6058@danio.home>
Message-ID: <20130509103528.5372.1813186721.divmod.xquotient.84@top>

On 09:04 am, jon at multani.info wrote:
>On Wed, May 08, 2013 at 05:40:56PM -0700, Glyph wrote:
>>
>>On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:
>>
>> > On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
>> >> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
>> >>
>> >> That is the plan for porting to python3.
>> >
>> > What about "importing" code from other librairies?
>> >
>> > I have this specific case where I need to support metaclass for both
>> > Python 2.x and Python 3.x which have different syntax (__metaclass__ 
>>and
>> > class XXX(.., metaclass=...)), which `six` addresses with a function
>> > called `with_metaclass()` [1]
>>
>>Within Twisted?  Which case is that?
>
>I was referring to twisted.python.reflect.PropertyAccessor which uses a
>metaclass to manage access to its properties. It is marked as 
>deprecated
>since Twisted 12.1.0, so I guess there still need to support it on both
>Python 2.x and Python 3, which is why I was looking for this
>compatibility layer.

Eh.  Strongly consider not porting deprecated things. :) 
PropertyAccessor could even be deleted for the next release, Twisted 
13.1 (this would be a relatively quick deprecation/removal cycle, but it 
just fits within the defined policy), if it is a maintenance burden - 
and forcing us to solve the metaclass issue sounds like a bit of a 
burden.

Jean-Paul
>> > Twisted is not depending on this kind of library, how those things
>> > should be deal with then? I can include this specific snippet (which 
>>is
>> > actually a two-liner)in t.python.compat but what about the license?
>>
>>Most of the logic in six is pretty trivial, and we already have our 
>>own Python-version-compatibility code (in twisted.python.compat) so 
>>thus far we have gone with just replicating whatever functionality we 
>>need.
>
>Granted, the code is trivial. So it's OK to replicate it in t.p.compat
>then? If there's a need for this code at all, of course :)
>
>Jonathan
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From jon at multani.info  Thu May  9 07:17:11 2013
From: jon at multani.info (Jonathan Ballet)
Date: Thu, 9 May 2013 13:17:11 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130509103528.5372.1813186721.divmod.xquotient.84@top>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
	<20130509090421.GA6058@danio.home>
	<20130509103528.5372.1813186721.divmod.xquotient.84@top>
Message-ID: <20130509111710.GB6058@danio.home>

On Thu, May 09, 2013 at 10:35:28AM -0000, exarkun at twistedmatrix.com wrote:
> On 09:04 am, jon at multani.info wrote:
> >On Wed, May 08, 2013 at 05:40:56PM -0700, Glyph wrote:
> >>
> >>On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:
> >>
> >> > On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
> >> >> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
> >> >>
> >> >> That is the plan for porting to python3.
> >> >
> >> > What about "importing" code from other librairies?
> >> >
> >> > I have this specific case where I need to support metaclass for both
> >> > Python 2.x and Python 3.x which have different syntax (__metaclass__ 
> >>and
> >> > class XXX(.., metaclass=...)), which `six` addresses with a function
> >> > called `with_metaclass()` [1]
> >>
> >>Within Twisted?  Which case is that?
> >
> >I was referring to twisted.python.reflect.PropertyAccessor which uses a
> >metaclass to manage access to its properties. It is marked as 
> >deprecated
> >since Twisted 12.1.0, so I guess there still need to support it on both
> >Python 2.x and Python 3, which is why I was looking for this
> >compatibility layer.
> 
> Eh.  Strongly consider not porting deprecated things. :) 
> PropertyAccessor could even be deleted for the next release, Twisted 
> 13.1 (this would be a relatively quick deprecation/removal cycle, but it 
> just fits within the defined policy), if it is a maintenance burden - 
> and forcing us to solve the metaclass issue sounds like a bit of a 
> burden.

OK, fine with me. It anwsers at the same time one of my question on
#5929 (sorry for the Trac spam on this ticket BTW, Trac was a bit slow
to accept my updates :/)

 Jonathan


From barry at python.org  Thu May  9 10:05:36 2013
From: barry at python.org (Barry Warsaw)
Date: Thu, 9 May 2013 10:05:36 -0400
Subject: [Twisted-Python] Helping the Python 3 port
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
Message-ID: <20130509100536.7766928b@anarchist>

On May 09, 2013, at 01:03 AM, Jonathan Ballet wrote:

>I have this specific case where I need to support metaclass for both
>Python 2.x and Python 3.x which have different syntax (__metaclass__ and
>class XXX(.., metaclass=...)), which `six` addresses with a function
>called `with_metaclass()` [1]

Here's another resource that might help (e.g. we have a solution for the
above).

https://wiki.ubuntu.com/Python/3

At some point I plan to migrate this to the Python wiki.

-Barry
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20130509/9d2200ba/attachment.pgp 

From glyph at twistedmatrix.com  Thu May  9 17:05:09 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 9 May 2013 14:05:09 -0700
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130509111710.GB6058@danio.home>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
	<20130509090421.GA6058@danio.home>
	<20130509103528.5372.1813186721.divmod.xquotient.84@top>
	<20130509111710.GB6058@danio.home>
Message-ID: <80459613-FBC4-454A-8856-7342AF7BCDDC@twistedmatrix.com>


On May 9, 2013, at 4:17 AM, Jonathan Ballet <jon at multani.info> wrote:

> OK, fine with me. It anwsers at the same time one of my question on
> #5929 (sorry for the Trac spam on this ticket BTW, Trac was a bit slow
> to accept my updates :/)

No need to apologize, we know it's a problem.  In fact, we're working on it (getting a faster host for Trac):

<http://labs.twistedmatrix.com/2013/05/april-end-month-report.html>

Which reminds me: please donate, so we can keep funding more work like that!

<http://twistedmatrix.com/trac/#DonatetoTwisted>

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130509/27bea254/attachment.htm 

From i at introo.me  Thu May  9 22:44:04 2013
From: i at introo.me (Shiyao Ma)
Date: Fri, 10 May 2013 10:44:04 +0800
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
Message-ID: <CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>

If I remember clearly, I already fired a ticket about this issue a week ago
and it's waiting for review.


On Mon, May 6, 2013 at 11:31 PM, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:

> Thanks for reporting this; could you file a bug at
> http://twistedmatrix.com/trac/?
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
My gpg pubring is available via: gpg --keyserver
subkeys.pgp.net--recv-keys 307CF736

More on: http://about.me/introom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130510/e502691a/attachment.htm 

From glyph at twistedmatrix.com  Thu May  9 23:57:34 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 9 May 2013 20:57:34 -0700
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
Message-ID: <98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>


On May 9, 2013, at 7:44 PM, Shiyao Ma <i at introo.me> wrote:

> If I remember clearly, I already fired a ticket about this issue a week ago and it's waiting for review.

Do you happen to have a link to that ticket?

-g



From i at introo.me  Fri May 10 08:42:45 2013
From: i at introo.me (Shiyao Ma)
Date: Fri, 10 May 2013 20:42:45 +0800
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
Message-ID: <CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>

http://twistedmatrix.com/trac/ticket/6503


On Fri, May 10, 2013 at 11:57 AM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On May 9, 2013, at 7:44 PM, Shiyao Ma <i at introo.me> wrote:
>
> > If I remember clearly, I already fired a ticket about this issue a week
> ago and it's waiting for review.
>
> Do you happen to have a link to that ticket?
>
> -g
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
My gpg pubring is available via: gpg --keyserver
subkeys.pgp.net--recv-keys 307CF736

More on: http://about.me/introom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130510/8bf9c728/attachment.htm 

From zooko at leastauthority.com  Fri May 10 12:00:21 2013
From: zooko at leastauthority.com (Zooko Wilcox-OHearn)
Date: Fri, 10 May 2013 10:00:21 -0600
Subject: [Twisted-Python] ANNOUNCING Tahoe-LAFS v1.10
Message-ID: <CAM_a8JwtuKhvWSvP-YM63FoFeBgwO3O+puL3hpbBxqmCkzsGqw@mail.gmail.com>

Folks:

Tahoe-LAFS is built on Twisted and uses Twisted extensively for
networking, event queue, and more. If you want to hack on a
distributed storage system written in Twisted, you are welcome to join
us! Here is our new Release Announcement.

Regards,

Zooko


-------
ANNOUNCING Tahoe, the Least-Authority File System, v1.10

The Tahoe-LAFS team is pleased to announce the immediate
availability of version 1.10.0 of Tahoe-LAFS, an extremely
reliable distributed storage system. Get it here:

https://tahoe-lafs.org/source/tahoe-lafs/trunk/docs/quickstart.rst

Tahoe-LAFS is the first distributed storage system to offer
"provider-independent security" ? meaning that not even the
operators of your storage servers can read or alter your data
without your consent. Here is the one-page explanation of its
unique security and fault-tolerance properties:

https://tahoe-lafs.org/source/tahoe-lafs/trunk/docs/about.rst

The previous stable release of Tahoe-LAFS was v1.9.2, released
on July 3, 2012.

v1.10.0 is a feature release which adds a new Introducer
protocol, improves the appearance of the web-based user
interface, improves grid security by making introducer FURLs
unguessable, and fixes many bugs. See the NEWS file [1] for
details.


WHAT IS IT GOOD FOR?

With Tahoe-LAFS, you distribute your filesystem across
multiple servers, and even if some of the servers fail or are
taken over by an attacker, the entire filesystem continues to
work correctly, and continues to preserve your privacy and
security. You can easily share specific files and directories
with other people.

In addition to the core storage system itself, volunteers
have built other projects on top of Tahoe-LAFS and have
integrated Tahoe-LAFS with existing systems, including
Windows, JavaScript, iPhone, Android, Hadoop, Flume, Django,
Puppet, bzr, mercurial, perforce, duplicity, TiddlyWiki, and
more. See the Related Projects page on the wiki [3].

We believe that strong cryptography, Free and Open Source
Software, erasure coding, and principled engineering practices
make Tahoe-LAFS safer than RAID, removable drive, tape,
on-line backup or cloud storage.

This software is developed under test-driven development, and
there are no known bugs or security flaws which would
compromise confidentiality or data integrity under recommended
use. (For all important issues that we are currently aware of
please see the known_issues.rst file [2].)


COMPATIBILITY

This release should be compatible with the version 1 series of
Tahoe-LAFS. Clients from this release can write files and
directories in the format used by clients of all versions back
to v1.0 (which was released March 25, 2008). Clients from this
release can read files and directories produced by clients of
all versions since v1.0. Servers from this release can serve
clients of all versions back to v1.0 and clients from this
release can use servers of all versions back to v1.0.

Except for the new optional MDMF format, we have not made any
intentional compatibility changes. However we do not yet have
the test infrastructure to continuously verify that all new
versions are interoperable with previous versions. We intend
to build such an infrastructure in the future.

The new Introducer protocol added in v1.10 is backwards
compatible with older clients and introducer servers, however
some features will be unavailable when an older node is
involved. Please see docs/nodekeys.rst [14] for details.

This is the eighteenth release in the version 1 series. This
series of Tahoe-LAFS will be actively supported and maintained
for the foreseeable future, and future versions of Tahoe-LAFS
will retain the ability to read and write files compatible
with this series.


LICENCE

You may use this package under the GNU General Public License,
version 2 or, at your option, any later version. See the file
"COPYING.GPL" [4] for the terms of the GNU General Public
License, version 2.

You may use this package under the Transitive Grace Period
Public Licence, version 1 or, at your option, any later
version. (The Transitive Grace Period Public Licence has
requirements similar to the GPL except that it allows you to
delay for up to twelve months after you redistribute a derived
work before releasing the source code of your derived work.)
See the file "COPYING.TGPPL.rst" [5] for the terms of the
Transitive Grace Period Public Licence, version 1.

(You may choose to use this package under the terms of either
licence, at your option.)


INSTALLATION

Tahoe-LAFS works on Linux, Mac OS X, Windows, Solaris, *BSD,
and probably most other systems. Start with
"docs/quickstart.rst" [6].


HACKING AND COMMUNITY

Please join us on the mailing list [7]. Patches are gratefully
accepted -- the RoadMap page [8] shows the next improvements
that we plan to make and CREDITS [9] lists the names of people
who've contributed to the project. The Dev page [10] contains
resources for hackers.


SPONSORSHIP

Atlas Networks has contributed several hosted servers for
performance testing. Thank you to Atlas Networks [11] for
their generous and public-spirited support.

And a special thanks to LeastAuthority [12], which employs
several Tahoe-LAFS developers, for their continued support.

HACK TAHOE-LAFS!

If you can find a security flaw in Tahoe-LAFS which is serious
enough that we feel compelled to warn our users and issue a fix,
then we will award you with a customized t-shirts with your
exploit printed on it and add you to the "Hack Tahoe-LAFS Hall
Of Fame" [13].


ACKNOWLEDGEMENTS

This is the twelfth release of Tahoe-LAFS to be created solely
as a labor of love by volunteers. Thank you very much to the
team of "hackers in the public interest" who make Tahoe-LAFS
possible.

Brian Warner
on behalf of the Tahoe-LAFS team

May 1, 2013
San Francisco, California, USA


[1] https://tahoe-lafs.org/trac/tahoe-lafs/browser/NEWS.rst
[2] https://tahoe-lafs.org/trac/tahoe-lafs/browser/docs/known_issues.rst
[3] https://tahoe-lafs.org/trac/tahoe-lafs/wiki/RelatedProjects
[4] https://tahoe-lafs.org/trac/tahoe-lafs/browser/COPYING.GPL
[5] https://tahoe-lafs.org/trac/tahoe-lafs/browser/COPYING.TGPPL.rst
[6] https://tahoe-lafs.org/trac/tahoe-lafs/browser/docs/quickstart.rst
[7] https://tahoe-lafs.org/cgi-bin/mailman/listinfo/tahoe-dev
[8] https://tahoe-lafs.org/trac/tahoe-lafs/roadmap
[9] https://tahoe-lafs.org/trac/tahoe-lafs/browser/CREDITS
[10] https://tahoe-lafs.org/trac/tahoe-lafs/wiki/Dev
[11] http://atlasnetworks.us/
[12] https://leastauthority.com/
[13] https://tahoe-lafs.org/hacktahoelafs/
[14] https://tahoe-lafs.org/trac/tahoe-lafs/browser/docs/nodekeys.rst


From glyph at twistedmatrix.com  Fri May 10 15:35:19 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 May 2013 12:35:19 -0700
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
Message-ID: <91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>


On May 10, 2013, at 5:42 AM, Shiyao Ma <i at introo.me> wrote:

> http://twistedmatrix.com/trac/ticket/6503

Right now this ticket is awaiting review, along with 67 (!) others <http://twistedmatrix.com/trac/report/15>.  That is, unfortunately, a lot of tickets, so it might take a little while.

Twisted reviewers: review tickets!  Tom, the recipient of the sponsored fellowship, is busy with fixing our infrastructure, so we really need the community to pitch in.

If you're interested in reviewing tickets, please let me know.

<http://twistedmatrix.com/highscores/>

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130510/88e11977/attachment.htm 

From i at introo.me  Fri May 10 21:30:43 2013
From: i at introo.me (Shiyao Ma)
Date: Sat, 11 May 2013 09:30:43 +0800
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
	<91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
Message-ID: <CAJQX3Dweops2JEipjPnkyd4udR-bCrO=Dz+JYX=nRsrk68_fBg@mail.gmail.com>

Yep, I am interested in that. But I am busy doing my graduation project and
writing my thesis all throughout May(School here hasn't ended yet). I may
pitch in in summer when I have a bunch of free time.


On Sat, May 11, 2013 at 3:35 AM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On May 10, 2013, at 5:42 AM, Shiyao Ma <i at introo.me> wrote:
>
> http://twistedmatrix.com/trac/ticket/6503
>
>
> Right now this ticket is awaiting review, along with 67 (!) others <
> http://twistedmatrix.com/trac/report/15>.  That is, unfortunately, a lot
> of tickets, so it might take a little while.
>
> Twisted reviewers: review tickets!  Tom, the recipient of the sponsored
> fellowship, is busy with fixing our infrastructure, so we really need the
> community to pitch in.
>
> If you're interested in reviewing tickets, please let me know.
>
> <http://twistedmatrix.com/highscores/>
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
My gpg pubring is available via: gpg --keyserver
subkeys.pgp.net--recv-keys 307CF736

More on: http://about.me/introom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130511/a88cde6f/attachment.htm 

From hs at ox.cx  Sat May 11 12:41:24 2013
From: hs at ox.cx (Hynek Schlawack)
Date: Sat, 11 May 2013 18:41:24 +0200
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
	<91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
Message-ID: <B1367445-076E-4BAF-A669-10F2F8247733@ox.cx>


> Twisted reviewers: review tickets!  Tom, the recipient of the sponsored fellowship, is busy with fixing our infrastructure, so we really need the community to pitch in.
> 
> If you're interested in reviewing tickets, please let me know.

I spoke about that to jp already: collecting some *practical* material on proper code review in the wiki would be really beneficiary. I've been pointed to http://mumak.net/stuff/your-code-sucks.html which is a nice start but doesn't one really get started. Maybe a checklist to hold to in the beginning? Pointing out common things to look for?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130511/7e185712/attachment.htm 

From exarkun at twistedmatrix.com  Sun May 12 00:05:32 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 12 May 2013 04:05:32 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1368331532.79.1815539506@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130512/aeb0dca6/attachment.htm 

From meejah at meejah.ca  Sun May 12 02:35:06 2013
From: meejah at meejah.ca (meejah)
Date: Sun, 12 May 2013 10:35:06 +0400
Subject: [Twisted-Python] txtorcon 0.8.0
Message-ID: <87zjw0n1t1.fsf@atlantis.meejah.ca>


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


txtorcon 0.8.0 is now tagged and released. [1]

txtorcon is a Python+Twisted-based asynchronous implementation of the
Tor control protocol. It includes a state-tracking abstraction,
configuration abstraction, Twisted endpoint support for hidden
services, 96%+ unit-test coverage and many examples. 

New in this release:

 . issue #18: slight *API change* ICircuitListener.circuit_failed,
   circuit_closed, IStreamListener.stream_failed, stream_closed and
   stream_detach all now include any keywords in the notification
   method (these either lacked flags, or only included some)
 . launch_tor() can take a timeout (starting with a patch from hellais);
 . cleanup from aagbsn;
 . more test coverage;
 . run tests cleanly without graphviz (from lukaslueg);
 . issue #26: fix from lukaslueg;
 . pep8 and whitespace targets plus massive cleanup (now pep8 clean, from lukaslueg);
 . issue #30: fix reported by webmeister making ipaddr actually-optional;
 . example using synchronous web server (built-in SimpleHTTPServer) with txtorcon (from lukaslueg);
 . TorState can now create circuits without an explicit path;
 . passwords for non-cookie authenticated sessions now use a password callback (that may return a Deferred);
 . fixes for AddrMap in case Tor ticket #8596 is implemented;

Code and built documentation may be obtained:

   git clone git://github.com/meejah/txtorcon.git

   https://github.com/meejah/txtorcon
   https://txtorcon.readthedocs.org/en/latest/index.html

You may easily install it:

   pip install txtorcon
   easy_install txtorcon

The sha256sum output is:

87fcb3bce3ac3b48583f637bf69445bd50071411dc3fded89df7600d870a3094  txtorcon-0.8.0.tar.gz

thanks,
meejah


[1] -- (Note the tagging took place last month, and I've only now
updated PyPI, ReadTheDocs, freecode, emailed this, ...)
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEcBAEBAgAGBQJRjy+yAAoJEJ0UOBRRgEVQXrMH/0Kl3DmVLyqo3aTBNv1d50RL
yi8u5LTZLNtuYiyJsxqTFyq8zNhfEwIPoXbsqHyNuv0hv8s6Qn4OkXh47/crhukO
GpnNNTldvSQIpOfNw+ftCYF/NC0X5pOjJo/Rz1XUkFyms50cqq17i+MWvcAvaFnW
Ols6+7ulh8u61ElafVxnwn1zgitkpUOOsnF8a27iXryFJ/iZFFROnCigJv2eM8pj
SqcwKbVp9h1VtztoYhtEcjEPBm1NnrYGoRIjh9D3RQfEVnXgM2fU4HoGhFAqYj7M
wFZv0DZBvL2s/XwV8PEi4Y4+fTJZTXE7bbHctMWjUWjhlMfMniq2oud4hZJ5ugY=
=MDAq
-----END PGP SIGNATURE-----


From exarkun at twistedmatrix.com  Mon May 13 08:25:48 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 13 May 2013 12:25:48 -0000
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <B1367445-076E-4BAF-A669-10F2F8247733@ox.cx>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
	<91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
	<B1367445-076E-4BAF-A669-10F2F8247733@ox.cx>
Message-ID: <20130513122548.5372.464135425.divmod.xquotient.91@top>

On 11 May, 04:41 pm, hs at ox.cx wrote:
>
>>Twisted reviewers: review tickets!  Tom, the recipient of the 
>>sponsored fellowship, is busy with fixing our infrastructure, so we 
>>really need the community to pitch in.
>>
>>If you're interested in reviewing tickets, please let me know.
>
>I spoke about that to jp already: collecting some *practical* material 
>on proper code review in the wiki would be really beneficiary. I've 
>been pointed to http://mumak.net/stuff/your-code-sucks.html which is a 
>nice start but doesn't one really get started. Maybe a checklist to 
>hold to in the beginning? Pointing out common things to look for?

There are some things listed on:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Far from complete, but maybe it's a start.

Jean-Paul


From z858570636 at gmail.com  Tue May 14 09:40:04 2013
From: z858570636 at gmail.com (yuyan zhang)
Date: Tue, 14 May 2013 21:40:04 +0800
Subject: [Twisted-Python] Twisted-Python Digest, Vol 110, Issue 13
In-Reply-To: <mailman.3.1368460801.18975.twisted-python@twistedmatrix.com>
References: <mailman.3.1368460801.18975.twisted-python@twistedmatrix.com>
Message-ID: <CA+ggLOL537V+fj5Bx56b--+DYTYJWiFk5_h3FfYFjgoPGj0SpA@mail.gmail.com>

can everyone help me,the error is
[root at herry zhangyuyan]# python dns_udp.py
/usr/local/lib/python2.7/site-packages/Twisted-13.0.0-py2.7-linux-x86_64.egg/twisted/names/dns.py:110:
RuntimeWarning: urandom unavailable - proceeding with non-cryptographically
secure random source


2013/5/14 <twisted-python-request at twistedmatrix.com>

> Send Twisted-Python mailing list submissions to
>         twisted-python at twistedmatrix.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> or, via email, send a message with subject or body 'help' to
>         twisted-python-request at twistedmatrix.com
>
> You can reach the person managing the list at
>         twisted-python-owner at twistedmatrix.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Twisted-Python digest..."
>
>
> Today's Topics:
>
>    1. Re: Twisted Web documentation out of date
>       (exarkun at twistedmatrix.com)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 13 May 2013 12:25:48 -0000
> From: exarkun at twistedmatrix.com
> Subject: Re: [Twisted-Python] Twisted Web documentation out of date
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <20130513122548.5372.464135425.divmod.xquotient.91 at top>
> Content-Type: text/plain; charset="utf-8"; format="flowed"
>
> On 11 May, 04:41 pm, hs at ox.cx wrote:
> >
> >>Twisted reviewers: review tickets!  Tom, the recipient of the
> >>sponsored fellowship, is busy with fixing our infrastructure, so we
> >>really need the community to pitch in.
> >>
> >>If you're interested in reviewing tickets, please let me know.
> >
> >I spoke about that to jp already: collecting some *practical* material
> >on proper code review in the wiki would be really beneficiary. I've
> >been pointed to http://mumak.net/stuff/your-code-sucks.html which is a
> >nice start but doesn't one really get started. Maybe a checklist to
> >hold to in the beginning? Pointing out common things to look for?
>
> There are some things listed on:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Far from complete, but maybe it's a start.
>
> Jean-Paul
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest, Vol 110, Issue 13
> ***********************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130514/c1c0c901/attachment.htm 

From z858570636 at gmail.com  Tue May 14 09:41:26 2013
From: z858570636 at gmail.com (yuyan zhang)
Date: Tue, 14 May 2013 21:41:26 +0800
Subject: [Twisted-Python] Twisted-Python Digest, Vol 110, Issue 12
In-Reply-To: <mailman.1.1368374401.12698.twisted-python@twistedmatrix.com>
References: <mailman.1.1368374401.12698.twisted-python@twistedmatrix.com>
Message-ID: <CA+ggLOK1Ad8TNY1ZYD-7Z7J1Vzj3ad5srWEhfG9w64isuA7piQ@mail.gmail.com>

can everyone help me,the error is
[root at herry zhangyuyan]# python dns_udp.py
/usr/local/lib/python2.7/site-packages/Twisted-13.0.0-py2.7-linux-x86_64.egg/twisted/names/dns.py:110:
RuntimeWarning: urandom unavailable - proceeding with non-cryptographically
secure random source


2013/5/13 <twisted-python-request at twistedmatrix.com>

> Send Twisted-Python mailing list submissions to
>         twisted-python at twistedmatrix.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> or, via email, send a message with subject or body 'help' to
>         twisted-python-request at twistedmatrix.com
>
> You can reach the person managing the list at
>         twisted-python-owner at twistedmatrix.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Twisted-Python digest..."
>
>
> Today's Topics:
>
>    1. Re: Twisted Web documentation out of date (Hynek Schlawack)
>    2. Weekly Bug Summary (exarkun at twistedmatrix.com)
>    3. txtorcon 0.8.0 (meejah)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sat, 11 May 2013 18:41:24 +0200
> From: Hynek Schlawack <hs at ox.cx>
> Subject: Re: [Twisted-Python] Twisted Web documentation out of date
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <B1367445-076E-4BAF-A669-10F2F8247733 at ox.cx>
> Content-Type: text/plain; charset="utf-8"
>
>
> > Twisted reviewers: review tickets!  Tom, the recipient of the sponsored
> fellowship, is busy with fixing our infrastructure, so we really need the
> community to pitch in.
> >
> > If you're interested in reviewing tickets, please let me know.
>
> I spoke about that to jp already: collecting some *practical* material on
> proper code review in the wiki would be really beneficiary. I've been
> pointed to http://mumak.net/stuff/your-code-sucks.html which is a nice
> start but doesn't one really get started. Maybe a checklist to hold to in
> the beginning? Pointing out common things to look for?
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20130511/7e185712/attachment.html
>
> ------------------------------
>
> Message: 2
> Date: Sun, 12 May 2013 04:05:32 -0000
> From: exarkun at twistedmatrix.com
> Subject: [Twisted-Python] Weekly Bug Summary
> To: twisted-python at twistedmatrix.com
> Message-ID: 1368331532.79.1815539506 at twistedmatrix.com
> Content-Type: text/plain; charset="us-ascii"
>
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20130512/aeb0dca6/attachment-0001.htm
>
> ------------------------------
>
> Message: 3
> Date: Sun, 12 May 2013 10:35:06 +0400
> From: meejah <meejah at meejah.ca>
> Subject: [Twisted-Python] txtorcon 0.8.0
> To: twisted-python at twistedmatrix.com
> Message-ID: <87zjw0n1t1.fsf at atlantis.meejah.ca>
> Content-Type: text/plain; charset=us-ascii
>
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
>
> txtorcon 0.8.0 is now tagged and released. [1]
>
> txtorcon is a Python+Twisted-based asynchronous implementation of the
> Tor control protocol. It includes a state-tracking abstraction,
> configuration abstraction, Twisted endpoint support for hidden
> services, 96%+ unit-test coverage and many examples.
>
> New in this release:
>
>  . issue #18: slight *API change* ICircuitListener.circuit_failed,
>    circuit_closed, IStreamListener.stream_failed, stream_closed and
>    stream_detach all now include any keywords in the notification
>    method (these either lacked flags, or only included some)
>  . launch_tor() can take a timeout (starting with a patch from hellais);
>  . cleanup from aagbsn;
>  . more test coverage;
>  . run tests cleanly without graphviz (from lukaslueg);
>  . issue #26: fix from lukaslueg;
>  . pep8 and whitespace targets plus massive cleanup (now pep8 clean, from
> lukaslueg);
>  . issue #30: fix reported by webmeister making ipaddr actually-optional;
>  . example using synchronous web server (built-in SimpleHTTPServer) with
> txtorcon (from lukaslueg);
>  . TorState can now create circuits without an explicit path;
>  . passwords for non-cookie authenticated sessions now use a password
> callback (that may return a Deferred);
>  . fixes for AddrMap in case Tor ticket #8596 is implemented;
>
> Code and built documentation may be obtained:
>
>    git clone git://github.com/meejah/txtorcon.git
>
>    https://github.com/meejah/txtorcon
>    https://txtorcon.readthedocs.org/en/latest/index.html
>
> You may easily install it:
>
>    pip install txtorcon
>    easy_install txtorcon
>
> The sha256sum output is:
>
> 87fcb3bce3ac3b48583f637bf69445bd50071411dc3fded89df7600d870a3094
>  txtorcon-0.8.0.tar.gz
>
> thanks,
> meejah
>
>
> [1] -- (Note the tagging took place last month, and I've only now
> updated PyPI, ReadTheDocs, freecode, emailed this, ...)
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
>
> iQEcBAEBAgAGBQJRjy+yAAoJEJ0UOBRRgEVQXrMH/0Kl3DmVLyqo3aTBNv1d50RL
> yi8u5LTZLNtuYiyJsxqTFyq8zNhfEwIPoXbsqHyNuv0hv8s6Qn4OkXh47/crhukO
> GpnNNTldvSQIpOfNw+ftCYF/NC0X5pOjJo/Rz1XUkFyms50cqq17i+MWvcAvaFnW
> Ols6+7ulh8u61ElafVxnwn1zgitkpUOOsnF8a27iXryFJ/iZFFROnCigJv2eM8pj
> SqcwKbVp9h1VtztoYhtEcjEPBm1NnrYGoRIjh9D3RQfEVnXgM2fU4HoGhFAqYj7M
> wFZv0DZBvL2s/XwV8PEi4Y4+fTJZTXE7bbHctMWjUWjhlMfMniq2oud4hZJ5ugY=
> =MDAq
> -----END PGP SIGNATURE-----
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest, Vol 110, Issue 12
> ***********************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130514/7a4c70e4/attachment.htm 

From z858570636 at gmail.com  Tue May 14 09:41:39 2013
From: z858570636 at gmail.com (yuyan zhang)
Date: Tue, 14 May 2013 21:41:39 +0800
Subject: [Twisted-Python] =?gb2312?b?eXV5YW4gemhhbmcg0fvH68T6v6rJ6CBHb29n?=
	=?gb2312?b?bGUgtefX09PKvP7Vyrun?=
Message-ID: <CA+ggLO+PTa+qEvN5iMM_DdcfA0CtUVm9OwqN0BNZtWk3sOvUUw@mail.gmail.com>

?????? Gmail?????????????????????


  ?????? Gmail?

yuyan zhang?????? Gmail ???

Gmail ?? Google ???????????????????????????????????????Gmail ???????

 *??????*
?? Google ??????????????????????

*???*
???????????????????

*??????*
?yuyan zhang?????????????????

*????*
?????????? Gmail ?????

?????? Yahoo!?Hotmail?AOL ???????????? POP ???????????????

??????????????yuyan zhang??? Gmail ?????????????
????<http://mail.google.com/mail/help/intl/zh-CN/about.html>
?????<http://mail.google.com/mail/a-ef12cbb304-e9d0a7f3a2-2-DEw3Xrw3KFiSawYhvBsXbW1hI?pc=zh_cn-rf---a>
?
        ??<http://mail.google.com/mail/a-ef12cbb304-e9d0a7f3a2-2-DEw3Xrw3KFiSawYhvBsXbW1hI?pc=zh_cn-rf---a>

Google Inc. | 1600 Ampitheatre Parkway | Mountain View, California 94043
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130514/dd6b051d/attachment-0001.htm 

From donal.mcmullan at gmail.com  Wed May 15 05:02:05 2013
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Wed, 15 May 2013 21:02:05 +1200
Subject: [Twisted-Python] modal dialogs with the qt4reactor?
Message-ID: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>

In a 2006 email, Ed Suominen links to two copies of "a non-blocking
modal dialog, immediately obtaining a deferred to the user's eventual
input."

http://twistedmatrix.com/pipermail/twisted-python/2006-September/014077.html

I'd love to know how to do this, but both sites are unreachable. The
internet giveth and the internet taketh awayeth.

Can anyone help?

Thanks!

Donal


From facundobatista at gmail.com  Wed May 15 09:17:41 2013
From: facundobatista at gmail.com (Facundo Batista)
Date: Wed, 15 May 2013 10:17:41 -0300
Subject: [Twisted-Python] modal dialogs with the qt4reactor?
In-Reply-To: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
Message-ID: <CAM09pzR5iFjBxm0KVT7UjVAJYkcO=Vp3Fd2rSWwNOhaLGvM1sw@mail.gmail.com>

On Wed, May 15, 2013 at 6:02 AM, Donal McMullan
<donal.mcmullan at gmail.com> wrote:

> In a 2006 email, Ed Suominen links to two copies of "a non-blocking
> modal dialog, immediately obtaining a deferred to the user's eventual
> input."

In Encuentro [0] I do a very similar thing (using Qt and qtreactor):

    def interactive(self):
        """Update episodes interactively."""
        dialog = dialogs.UpdateDialog()
        dialog.show()
        self._update(dialog)

The UpdateDialog() is not currently modal, but you can start from here.

The dialog is instantiated, shown, and then in _update() it's filled
with text while it downloads stuff from the server (using Twisted).

Regards,

[0] https://launchpad.net/encuentro , or just do "bzr branch
lp:encuentro" and will have all code in your disk.

--
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/
Twitter: @facundobatista


From twisted-python at 2xlp.com  Thu May 16 13:02:41 2013
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Thu, 16 May 2013 13:02:41 -0400
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
Message-ID: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>

Hi,

i'm running a twisted daemon on ubuntu

It seems to get shut down by the system periodically.  Logs show that the kernel (or something) kills it for taking up too much memory.  I definitely have coding issues in there that i'm working on to address this.

Does anyone have a suggestion for tools I can easily use on ubuntu to monitor and restart if needed ?  I haven't had to do something like this in 5 years, and back then it was a hassle to get monit or supervisord working.

thanks

/jonathan

From radix at twistedmatrix.com  Thu May 16 13:31:17 2013
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 16 May 2013 12:31:17 -0500
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
Message-ID: <CAPkRfUREFoRVs0pAWqHAXt7sV=Ov2yRfrcx-kMX54DhctCCxtw@mail.gmail.com>

On Thu, May 16, 2013 at 12:02 PM, Jonathan Vanasco
<twisted-python at 2xlp.com>wrote:

> Hi,
>
> i'm running a twisted daemon on ubuntu
>
> It seems to get shut down by the system periodically.  Logs show that the
> kernel (or something) kills it for taking up too much memory.  I definitely
> have coding issues in there that i'm working on to address this.
>
> Does anyone have a suggestion for tools I can easily use on ubuntu to
> monitor and restart if needed ?  I haven't had to do something like this in
> 5 years, and back then it was a hassle to get monit or supervisord working.
>
>

I like supervisord, for its watchdog functionality as well as log handling.
It's pretty easy to configure. I recommend using twistd --nodaemon (-n)
with it.

-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130516/44b58526/attachment.htm 

From justin.venus at gmail.com  Thu May 16 13:34:39 2013
From: justin.venus at gmail.com (Justin Venus)
Date: Thu, 16 May 2013 10:34:39 -0700
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
Message-ID: <CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>

IMO monit is pretty easy to setup and probably your best bet.  However you
could get puppet, chef, or cfengine to start processes for you.  If you are
feeling adventurous, you could set up something like apache mesos to keep
your tasks running.

Justin Venus
On May 16, 2013 10:27 AM, "Jonathan Vanasco" <twisted-python at 2xlp.com>
wrote:

> Hi,
>
> i'm running a twisted daemon on ubuntu
>
> It seems to get shut down by the system periodically.  Logs show that the
> kernel (or something) kills it for taking up too much memory.  I definitely
> have coding issues in there that i'm working on to address this.
>
> Does anyone have a suggestion for tools I can easily use on ubuntu to
> monitor and restart if needed ?  I haven't had to do something like this in
> 5 years, and back then it was a hassle to get monit or supervisord working.
>
> thanks
>
> /jonathan
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130516/762846de/attachment.htm 

From kpentap at gmail.com  Thu May 16 13:59:14 2013
From: kpentap at gmail.com (Sai Kalyan Reddy P)
Date: Thu, 16 May 2013 13:59:14 -0400
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
	<CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>
Message-ID: <CAKLDag07JqmGPz0UFOa6VQFsXRbbMUs-kRvX8Avc0qjK+_oVLQ@mail.gmail.com>

I use supervisord and as mentioned has a good log-handling, easy to setup
and use.


On Thu, May 16, 2013 at 1:34 PM, Justin Venus <justin.venus at gmail.com>wrote:

> IMO monit is pretty easy to setup and probably your best bet.  However you
> could get puppet, chef, or cfengine to start processes for you.  If you are
> feeling adventurous, you could set up something like apache mesos to keep
> your tasks running.
>
> Justin Venus
> On May 16, 2013 10:27 AM, "Jonathan Vanasco" <twisted-python at 2xlp.com>
> wrote:
>
>> Hi,
>>
>> i'm running a twisted daemon on ubuntu
>>
>> It seems to get shut down by the system periodically.  Logs show that the
>> kernel (or something) kills it for taking up too much memory.  I definitely
>> have coding issues in there that i'm working on to address this.
>>
>> Does anyone have a suggestion for tools I can easily use on ubuntu to
>> monitor and restart if needed ?  I haven't had to do something like this in
>> 5 years, and back then it was a hassle to get monit or supervisord working.
>>
>> thanks
>>
>> /jonathan
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Thanks and Regards,
Sai Kalyan Reddy P.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130516/0f955713/attachment.htm 

From ldanielburr at me.com  Thu May 16 14:14:38 2013
From: ldanielburr at me.com (Louis D. Burr)
Date: Thu, 16 May 2013 18:14:38 +0000 (GMT)
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>
Message-ID: <4733ab28-9f0f-41b2-9c57-846e4d407157@me.com>



On May 16, 2013, at 12:34 PM, Justin Venus <justin.venus at gmail.com> wrote:

> IMO monit is pretty easy to setup and probably your best bet.  However you could get puppet, chef, or cfengine to start processes for you.  If you are feeling adventurous, you could set up something like apache mesos to keep your tasks running.
>
> Justin Venus
> On May 16, 2013 10:27 AM, "Jonathan Vanasco" <twisted-python at 2xlp.com> wrote:
>
>     Hi,
>
>     i'm running a twisted daemon on ubuntu
>
>     It seems to get shut down by the system periodically.  Logs show that the kernel (or something) kills it for taking up too much memory.  I definitely have coding issues in there that i'm working on to address this.
>
>     Does anyone have a suggestion for tools I can easily use on ubuntu to monitor and restart if needed ?  I haven't had to do something like this in 5 years, and back then it was a hassle to get monit or supervisord working.
>
>     thanks
>
>     /jonathan
>     _______________________________________________
>     Twisted-Python mailing list
>     Twisted-Python at twistedmatrix.com
>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
 

Another simple option is to use twisted's own procmon.ProcessMonitor to launch your twistd daemon.  You can use it "out of the box", or implement your own service based upon it, e.g.,


from twisted.python import usage
from twisted.runner import procmon



class Options(usage.Options):
    synopsis = '[mymonitor options] commandline'

    optParameters = (
        (
            'threshold',
            't',
            1,
            'How many seconds a process has to run before it is considered to have died instantly.',
            float
        ),
        (
            'killtime',
            'k',
            5,
            'How many seconds a process being killed has to get its affairs in order before it gets killed with an unmaskable signal.',
            float
        ),
        (
            'minrestartdelay',
            'm',
            1,
            'The minimum number of seconds to wait before attempting to restart a process.',
            float
        ),
        (
            'maxrestartdelay',
            'M',
            3600,
            'The maximum number of seconds to wait before attempting to restart a process.',
            float
        )
    )

    optFlags = ()


    longdesc = """Blah blah blah"""

    def parseArgs(self, *args):
        """
        Grab the command line that is going to be started and monitored
        """
        self['args'] = args


    def postOptions(self):
        """
        Check for dependencies.
        """
        if len(self['args']) < 1:
            raise usage.UsageError('Please specify a process commandline')


def makeService(config):
    from twisted.internet import reactor

    myMonitorService = procmon.ProcessMonitor(reactor)

    myMonitorService.threshold = config['threshold']
    myMonitorService.killTime = config['killtime']
    myMonitorService.minRestartDelay = config['minrestartdelay']
    myMonitorService.maxRestartDelay = config['maxrestartdelay']
    myMonitorService.addProcess(
        'MyTwistedServiceThatSometimesBlowsUp',
        config['args'],
        uid=None,
        gid=None,
        env={}
    )
    return myMonitorService


Hope this helps,

Daniel?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130516/f63a03ce/attachment-0001.htm 

From bino at indoakses-online.com  Fri May 17 03:54:47 2013
From: bino at indoakses-online.com (bino at indoakses-online.com)
Date: Fri, 17 May 2013 14:54:47 +0700
Subject: [Twisted-Python] question : How to listen to USB-HID
Message-ID: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>

Dear All ...

Currently I have a twistd script that listen to arduino dev board.
Arduino recognized as plain usb-serial, so I can do it using LineReceiver
as simple as : --> class ArduinoReceiver(LineReceiver)

And make it SerialService as told by
http://www.mentby.com/lucas-taylor/serialport-protocol-as-a-service.html

But I plan to replace arduino with digispark (
http://digistump.com/products/1 )

Problem is I just realize that this device will recognized as USB-HID

Kindly please give me any enlightenment on how to handle USB-HID device
with twistd ?

Sincerely
-bino-



From screwtape at froup.com  Fri May 17 06:09:39 2013
From: screwtape at froup.com (Tim Allen)
Date: Fri, 17 May 2013 20:09:39 +1000
Subject: [Twisted-Python] question : How to listen to USB-HID
In-Reply-To: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
References: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
Message-ID: <20130517100904.GA8156@boombah.thristian.org>

On Fri, May 17, 2013 at 02:54:47PM +0700, bino at indoakses-online.com wrote:
> But I plan to replace arduino with digispark (
> http://digistump.com/products/1 )
> 
> Problem is I just realize that this device will recognized as USB-HID

From this page:

    http://digistump.com/wiki/digispark/tutorials/linuxtroubleshooting

...it sounds like the device implements the USB serial protocol (because
it mentions 'KERNEL=="ttyACM*"' and 'tty' is what Linux calls a serial
port). However, this page:

    http://digistump.com/wiki/digispark/tutorials/basics

says "The Digispark does not have a hardware serial port nor a hardware
serial to USB converter. An example library (DigiUSB) is provided, as
well as some example code and a serial monitor like program", and the
wiki-page for the DigiUSB driver suggests you can use it to implement
any USB protocol you like, including USB Serial, USB-HID, USB Mass
Storage, etc.

There's no (easy) way to hook a Twisted program up to an arbitrary
USB-HID device; the best you could do would be to write a Twisted
program that communicates with stdin/stdout, then run that program in
a window and remember not to Alt-Tab to another program while your
Digistump is doing stuff.

It sounds like a better solution would be to make sure you use the
DigiUSB library to implement the standard USB Serial protocol and then
continue using your existing code.



From bino at indoakses-online.com  Sat May 18 04:50:58 2013
From: bino at indoakses-online.com (bino at indoakses-online.com)
Date: Sat, 18 May 2013 15:50:58 +0700
Subject: [Twisted-Python] question : How to listen to USB-HID
In-Reply-To: <20130517100904.GA8156@boombah.thristian.org>
References: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
	<20130517100904.GA8156@boombah.thristian.org>
Message-ID: <bb24e3f577a7da974e2785f41ec45fdc.squirrel@localhost>

Dear All
C/Q Tim Allen
I really appreciate your response
> There's no (easy) way to hook a Twisted program up to an arbitrary
> USB-HID device; the best you could do would be to write a Twisted
> program that communicates with stdin/stdout, then run that program in
> a window and remember not to Alt-Tab to another program while your
> Digistump is doing stuff.
>
> It sounds like a better solution would be to make sure you use the
> DigiUSB library to implement the standard USB Serial protocol and then
> continue using your existing code.
>

well ...

There is two clue that I got from digistump forum
1. https://gist.github.com/claws/2464017
I think that is the nearest to twisted , but not the most easy.

2.
https://github.com/digistump/DigisparkExamplePrograms/blob/master/Python/DigiUSB/source/receive.py
With this one I thing I can rout the output to UDP and receive it easily
in twistd

Sincerely
-bino-




From werner at thieprojects.ch  Sat May 18 06:27:15 2013
From: werner at thieprojects.ch (Werner Thie)
Date: Sat, 18 May 2013 12:27:15 +0200
Subject: [Twisted-Python] question : How to listen to USB-HID
In-Reply-To: <bb24e3f577a7da974e2785f41ec45fdc.squirrel@localhost>
References: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
	<20130517100904.GA8156@boombah.thristian.org>
	<bb24e3f577a7da974e2785f41ec45fdc.squirrel@localhost>
Message-ID: <51975783.6000103@thieprojects.ch>

Hi

Maybe you get some clues about twisted with USB/serial stuff from

http://code.google.com/p/pywws/source/browse/trunk/pywws/WeatherStation.py?r=504

which is a twistification of the pywws weather station code.

HTH, Werner

On 5/18/13 10:50 AM, bino at indoakses-online.com wrote:
> Dear All
> C/Q Tim Allen
> I really appreciate your response
>> There's no (easy) way to hook a Twisted program up to an arbitrary
>> USB-HID device; the best you could do would be to write a Twisted
>> program that communicates with stdin/stdout, then run that program in
>> a window and remember not to Alt-Tab to another program while your
>> Digistump is doing stuff.
>>
>> It sounds like a better solution would be to make sure you use the
>> DigiUSB library to implement the standard USB Serial protocol and then
>> continue using your existing code.
>>
>
> well ...
>
> There is two clue that I got from digistump forum
> 1. https://gist.github.com/claws/2464017
> I think that is the nearest to twisted , but not the most easy.
>
> 2.
> https://github.com/digistump/DigisparkExamplePrograms/blob/master/Python/DigiUSB/source/receive.py
> With this one I thing I can rout the output to UDP and receive it easily
> in twistd
>
> Sincerely
> -bino-
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From bernat at luffy.cx  Sat May 18 08:44:21 2013
From: bernat at luffy.cx (Vincent Bernat)
Date: Sat, 18 May 2013 14:44:21 +0200
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com> (Jonathan
	Vanasco's message of "Thu, 16 May 2013 13:02:41 -0400")
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
Message-ID: <m3mwrsihju.fsf@neo.luffy.cx>

 ? 16 mai 2013 19:02 CEST, Jonathan Vanasco <twisted-python at 2xlp.com>?:

> i'm running a twisted daemon on ubuntu
>
> It seems to get shut down by the system periodically.  Logs show that
> the kernel (or something) kills it for taking up too much memory.  I
> definitely have coding issues in there that i'm working on to address
> this.
>
> Does anyone have a suggestion for tools I can easily use on ubuntu to
> monitor and restart if needed ?  I haven't had to do something like
> this in 5 years, and back then it was a hassle to get monit or
> supervisord working.

You can just write an upstart job. Upstart will take core of logging (if
you don't already log to syslog), starting and restarting.

description "My daemon"
start on (static-network-up or started networking)
stop on runlevel [06]

respawn
respawn limit 10

console log

exec twistd -n ....
-- 
printk("Cool stuff's happening!\n")
        2.4.3 linux/fs/jffs/intrep.c


From exarkun at twistedmatrix.com  Sun May 19 00:05:26 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 19 May 2013 04:05:26 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1368936326.42.1935757099@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130519/f0e32c03/attachment.htm 

From tom.prince at ualberta.net  Sun May 19 13:34:41 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Sun, 19 May 2013 11:34:41 -0600
Subject: [Twisted-Python] Service downtime
Message-ID: <8761ye3mby.fsf@hermes.hocat.ca>

The twisted project has recently acquired a new server, and there will
be some donwtime in the coming week, in order to migrate services to the
new server.

At some point Monday or Tuesday, there will be some downtime for mail
and the mailing lists, as mail-service is migrated to the new
machine. For those that have accounts on cube, your data will be
copied to the new machine at this point.

On Wednesday, at about 10 MDT (16 UTC), there will be downtime of all
twisted services, as live data is transfered over. This may last
up-to a couple of hours.

http://labs.twistedmatrix.com/2013/05/migration-report.html

  Tom Prince


From dwilliams at cernium.com  Mon May 20 17:23:47 2013
From: dwilliams at cernium.com (Dan Williams)
Date: Mon, 20 May 2013 17:23:47 -0400
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
	thread when using adbapi.ConnectionPool
Message-ID: <519A9463.5070201@cernium.com>

...and I don't understand why it is running in the main (reactor)
thread.

I have a twisted.web server that uses adbapi.ConnectionPool to read
and sometimes update a MySQL database with small amounts of data at a
fairly high rate.

It's been stable for quite a while, but is now seeing increasing load
and been hanging a couple of times a day. monit gets triggered when
the web server fails to respond to an HTTP GET health check. SIGTERM
won't terminate it, so I'm using monit to send it SIGABRT.

Examining the core file shows that the main (reactor) thread is
blocking in a read in the mysql client library:

> Program terminated with signal 6, Aborted.
> #0  0x00007f549b341d2d in read () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> (gdb) bt 10
> #0  0x00007f549b341d2d in read () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> #1  0x00007f5497429112 in vio_read_buff () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #2  0x00007f549741b24f in ?? () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #3  0x00007f549741bde8 in my_net_read () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #4  0x00007f54974155ba in cli_safe_read () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #5  0x00007f5497416618 in ?? () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #6  0x00007f5497413f8b in mysql_next_result () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #7  0x00007f549792bccc in ?? () from
> /usr/lib/python2.7/dist-packages/_mysql.so
> #8  0x0000000000497ea4 in PyEval_EvalFrameEx ()
> #9  0x0000000000498602 in PyEval_EvalFrameEx ()
> (More stack frames follow...)
> (gdb) bt -10
> #62 0x0000000000498602 in PyEval_EvalFrameEx ()
> #63 0x0000000000498602 in PyEval_EvalFrameEx ()
> #64 0x0000000000498602 in PyEval_EvalFrameEx ()
> #65 0x0000000000498602 in PyEval_EvalFrameEx ()
> #66 0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #67 0x00000000004a9081 in PyRun_FileExFlags ()
> #68 0x00000000004a9311 in PyRun_SimpleFileExFlags ()
> #69 0x00000000004aa8bd in Py_Main ()
> #70 0x00007f549a05976d in __libc_start_main () from
> /lib/x86_64-linux-gnu/libc.so.6
> #71 0x000000000041b9b1 in _start ()
> (gdb)

All of the 10 thread pool threads are sitting waiting on locks:

> (gdb) thread 11
> [Switching to thread 11 (Thread 0x7f54963dd700 (LWP 2691))]
> #0  0x00007f549b340fd0 in sem_wait () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> (gdb) bt 10
> #0  0x00007f549b340fd0 in sem_wait () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> #1  0x0000000000547525 in lock_PyThread_acquire_lock.49023 ()
> #2  0x0000000000497ea4 in PyEval_EvalFrameEx ()
> #3  0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #4  0x00000000004983b8 in PyEval_EvalFrameEx ()
> #5  0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #6  0x00000000004983b8 in PyEval_EvalFrameEx ()
> #7  0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #8  0x00000000004a8a92 in function_call ()
> #9  0x00000000004e9f36 in PyObject_Call ()
> (More stack frames follow...)
> (gdb)

What has me very confused is seeing the MySQL read happening in the
main thread; how can that be?

This is running in AWS EC2 on a pretty busy host but there isn't any
discernible correlation between times of high I/O or CPU usage and the
hangs.

Environment is Ubuntu 12.04.1 LTS, Python 2.7.3, Twisted 11.1.0.

Thanks for any help!

Dan



From glyph at twistedmatrix.com  Mon May 20 18:03:11 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 20 May 2013 15:03:11 -0700
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <4733ab28-9f0f-41b2-9c57-846e4d407157@me.com>
References: <4733ab28-9f0f-41b2-9c57-846e4d407157@me.com>
Message-ID: <822146FC-9EE0-4598-BE1E-4E894D57F88F@twistedmatrix.com>


On May 16, 2013, at 11:14 AM, Louis D. Burr <ldanielburr at me.com> wrote:

> Another simple option is to use twisted's own procmon.ProcessMonitor to launch your twistd daemon.  You can use it "out of the box", or implement your own service based upon it, e.g.,

To be clear, 'out of the box' here means something like 'twistd procmon twistd -n web'.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130520/23277a46/attachment.htm 

From glyph at twistedmatrix.com  Mon May 20 20:13:06 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 20 May 2013 17:13:06 -0700
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
	thread when using adbapi.ConnectionPool
In-Reply-To: <519A9463.5070201@cernium.com>
References: <519A9463.5070201@cernium.com>
Message-ID: <EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>


On May 20, 2013, at 2:23 PM, Dan Williams <dwilliams at cernium.com> wrote:

> Examining the core file shows that the main (reactor) thread is
> blocking in a read in the mysql client library:

I believe that recent versions of GDB have some fanciness that will actually show you Python tracebacks.  Any chance somebody else knows how to invoke that?  It would certainly be very useful to see what Python code lead to this point :).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130520/771b4900/attachment.htm 

From dwilliams at cernium.com  Mon May 20 20:47:54 2013
From: dwilliams at cernium.com (Dan Williams)
Date: Mon, 20 May 2013 20:47:54 -0400
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
References: <519A9463.5070201@cernium.com>
	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
Message-ID: <519AC43A.4070107@cernium.com>

The invocation is simply "py-bt", but it only works if symbols are
available, which aren't in my case.

On 5/20/2013 8:13 PM, Glyph wrote:
>
> On May 20, 2013, at 2:23 PM, Dan Williams<dwilliams at cernium.com>
> wrote:
>
>> Examining the core file shows that the main (reactor) thread is
>> blocking in a read in the mysql client library:
>
> I believe that recent versions of GDB have some fanciness that will
> actually show you Python tracebacks.  Any chance somebody else knows
> how to invoke that?  It would certainly be very useful to see what
> Python code lead to this point :).
>
> -glyph
>
>
>
>
>
> _______________________________________________ Twisted-Python
> mailing list Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From p.mayers at imperial.ac.uk  Tue May 21 03:02:56 2013
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 21 May 2013 08:02:56 +0100
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <519AC43A.4070107@cernium.com>
References: <519A9463.5070201@cernium.com>
	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
	<519AC43A.4070107@cernium.com>
Message-ID: <519B1C20.2080704@imperial.ac.uk>

On 05/21/2013 01:47 AM, Dan Williams wrote:
> The invocation is simply "py-bt", but it only works if symbols are
> available, which aren't in my case.

Really, surely Ubuntu LTS has "debug symbol" packages or something? A 
quick google suggests its "packagename-dbg" for stripped symbols.

I meant to reply with this last night: knowing very little about MySQL 
or it's python bindings, is it possible you're returning an object from 
runInteraction that's still "attached" to the DB e.g. a BLOB that 
lazy-loads on references, or something?

In the absence of a python traceback it might be the age-old "add prints 
everywhere and see where it stops" dance...


From p.mayers at imperial.ac.uk  Tue May 21 03:07:21 2013
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 21 May 2013 08:07:21 +0100
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <519B1C20.2080704@imperial.ac.uk>
References: <519A9463.5070201@cernium.com>
	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
	<519AC43A.4070107@cernium.com> <519B1C20.2080704@imperial.ac.uk>
Message-ID: <519B1D29.7010209@imperial.ac.uk>

On 05/21/2013 08:02 AM, Phil Mayers wrote:
> or it's python

its/it's agh. It's early for me...


From dwilliams at cernium.com  Tue May 21 10:09:46 2013
From: dwilliams at cernium.com (Dan Williams)
Date: Tue, 21 May 2013 10:09:46 -0400
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <519B1C20.2080704@imperial.ac.uk>
References: <519A9463.5070201@cernium.com>	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>	<519AC43A.4070107@cernium.com>
	<519B1C20.2080704@imperial.ac.uk>
Message-ID: <519B802A.2030404@cernium.com>

On 5/21/2013 3:02 AM, Phil Mayers wrote:
> On 05/21/2013 01:47 AM, Dan Williams wrote:
>> The invocation is simply "py-bt", but it only works if symbols are
>> available, which aren't in my case.
>
> Really, surely Ubuntu LTS has "debug symbol" packages or something? A
> quick google suggests its "packagename-dbg" for stripped symbols.
>
I installed the matching python-dbg package for my system early on.
Despite that, and this message from gdb:

> Reading symbols from /usr/bin/python2.7...Reading symbols from /usr/lib/debug/usr/bin/python2.7...done.

I still don't get symbols printed.

> I meant to reply with this last night: knowing very little about MySQL
> or it's python bindings, is it possible you're returning an object from
> runInteraction that's still "attached" to the DB e.g. a BLOB that
> lazy-loads on references, or something?
>
I looked, but I didn't see anything like that. "fetchall" returns a list
of tuples and "execute" returns nothing.

> In the absence of a python traceback it might be the age-old "add prints
> everywhere and see where it stops" dance...
>
Sadly, you may be right. What I really need to be able to do is
replicate the problem on a non-production host, something which
I haven't been able to do so far.



From adi at roiban.ro  Wed May 22 03:01:32 2013
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 22 May 2013 10:01:32 +0300
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
Message-ID: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>

Hi,



In proto_helpers, StringTransportWithDisconnection is implemented as:

class StringTransportWithDisconnection(StringTransport):
    def loseConnection(self):
        if self.connected:
            self.connected = False
            self.protocol.connectionLost(error.ConnectionDone("Bye."))


In the API, I see that for IProtocol.connectionLost(reason), readon
should be a Failure and not an Exception.

http://twistedmatrix.com/documents/13.0.0/api/twisted.internet.interfaces.IProtocol.html#connectionLost

------

Also checking some real code in protocols.ftp shows that reason should
be a Failure, as it uses reason.check() method.

https://github.com/twisted/twisted/blob/trunk/twisted/protocols/ftp.py#L2269

------


Is this a bug in the current implementation of
StringTransportWithDisconnection?

Many thanks,
-- 
Adi Roiban


From glyph at twistedmatrix.com  Wed May 22 05:20:01 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 22 May 2013 02:20:01 -0700
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
Message-ID: <AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>


On May 22, 2013, at 12:01 AM, Adi Roiban <adi at roiban.ro> wrote:

> Is this a bug in the current implementation of
> StringTransportWithDisconnection?

Yes.  Good catch.  Please look to see if the ticket has already been filed, and if not, file one (ideally with a patch!)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130522/4f653d39/attachment.htm 

From adi at roiban.ro  Wed May 22 07:47:51 2013
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 22 May 2013 14:47:51 +0300
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
	<AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
Message-ID: <CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>

On 22 May 2013 12:20, Glyph <glyph at twistedmatrix.com> wrote:
>
> On May 22, 2013, at 12:01 AM, Adi Roiban <adi at roiban.ro> wrote:
>
> Is this a bug in the current implementation of
> StringTransportWithDisconnection?
>
>
> Yes.  Good catch.  Please look to see if the ticket has already been filed,
> and if not, file one (ideally with a patch!)

Thanks. Did that. http://twistedmatrix.com/trac/ticket/6521

I have a test which always fails when running `trial twisted.test` but
pass if executed as an individual tests.... this is due to a failure
which is only raised at garbage collection.

Any help in how to catch this side effect is much appreciated.

Thanks!
-- 
Adi Roiban


From _ at lvh.io  Wed May 22 08:12:17 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Wed, 22 May 2013 14:12:17 +0200
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
	<AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
	<CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>
Message-ID: <CAE_Hg6YkVs5ktYNXwP1bv6L1q4ugObQR0Cby7HfjUin7U_kS5A@mail.gmail.com>

On Wed, May 22, 2013 at 1:47 PM, Adi Roiban <adi at roiban.ro> wrote:

> Thanks. Did that. http://twistedmatrix.com/trac/ticket/6521
>

Awesome, thank you :)


> I have a test which always fails when running `trial twisted.test` but
> pass if executed as an individual tests.... this is due to a failure
> which is only raised at garbage collection.
>

Wait, related to this problem? I would expect the test to just try and use
the thing that comes out as a Failure, and check that it's of the
appropriate type... I don't understand how GC comes in to play. Could you
provide said test?

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130522/c6782a71/attachment.htm 

From adi at roiban.ro  Wed May 22 08:43:14 2013
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 22 May 2013 15:43:14 +0300
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <CAE_Hg6YkVs5ktYNXwP1bv6L1q4ugObQR0Cby7HfjUin7U_kS5A@mail.gmail.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
	<AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
	<CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>
	<CAE_Hg6YkVs5ktYNXwP1bv6L1q4ugObQR0Cby7HfjUin7U_kS5A@mail.gmail.com>
Message-ID: <CAFycZ9eO_OYpMPn1k6hkENE0tpNP3POUM6kcHzGGjNTPTTREVw@mail.gmail.com>

[snip]

>> I have a test which always fails when running `trial twisted.test` but
>> pass if executed as an individual tests.... this is due to a failure
>> which is only raised at garbage collection.
>
>
> Wait, related to this problem? I would expect the test to just try and use
> the thing that comes out as a Failure, and check that it's of the
> appropriate type... I don't understand how GC comes in to play. Could you
> provide said test?
>

I remember reading somewhere (maybe official documentation) that
unhandled deferred which have a failure as a result are only logged at
reactor shutdown or when some garbage collection process take place.
I thought that this is the reason why the tests is failing.

I have added the details of the test in the ticket.

Thanks for the commment!
-- 
Adi Roiban


From thecreator232 at gmail.com  Thu May 23 03:46:43 2013
From: thecreator232 at gmail.com (abhishek unnikrishnan)
Date: Thu, 23 May 2013 13:16:43 +0530
Subject: [Twisted-Python] How does Twisted handle multiple request at the
	same time ?
Message-ID: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>

hi guys

i'm new to twisted and asynchronous programming . i have created a rpc
server using twisted and xmlrpc packages . i wanted to know what will
happen if two or more clients give an rpc call at the same time. how will
the server handle this situation.

and also wanted to know is there a way for the server to call the client in
an rpc scenario .

thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130523/12de479a/attachment.htm 

From _ at lvh.io  Thu May 23 04:33:07 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Thu, 23 May 2013 10:33:07 +0200
Subject: [Twisted-Python] How does Twisted handle multiple request at
 the same time ?
In-Reply-To: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>
References: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>
Message-ID: <CAE_Hg6bxYUViYvsAbcOCrX8XMPdS8mfYSr7FtjGV2-eYfFPFgw@mail.gmail.com>

On Thu, May 23, 2013 at 9:46 AM, abhishek unnikrishnan <
thecreator232 at gmail.com> wrote:

> hi guys
>

Hi Abhishek!


> i'm new to twisted and asynchronous programming . i have created a rpc
> server using twisted and xmlrpc packages . i wanted to know what will
> happen if two or more clients give an rpc call at the same time. how will
> the server handle this situation.
>

The tricky part is in the "at the same time". Twisted's reactor thread only
does one thing at a time, and that's okay: both connections get accepted
and some data gets read from them (and eventually written to them). The
important part is that you do these things non-blockingly (or,
synonymously, asynchronously): it's okay to only do one thing at a time as
long as each thing you do takes very little time. The second connection
doesn't have to wait long before the connection gets opened and data gets
read, because the operations that happen before it don't take long.

This pattern repeats throughout asynchronous programming: it's okay to only
decode one bit of JSON at a time, as long as doing that doesn't take a long
time (i.e. block), preventing anything else from happening in the immediate
future.

Does that clarify things?

and also wanted to know is there a way for the server to call the client in
> an rpc scenario .
>

That depends on your RPC protocol. Many allow this (often called peer to
peer), many are explicitly client-server and only allow one-way calls. Even
protocols that do support full-duplex communication don't necessarily have
clients that can take method calls very often.

AMP, my personal favorite, explicitly supports two-way RPC. It comes with
twisted, and you can read about it here: http://amp-protocol.net/

Alternatively, I think JSON-RPC is full-duplex too.


cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130523/90460b61/attachment.htm 

From thecreator232 at gmail.com  Thu May 23 04:54:35 2013
From: thecreator232 at gmail.com (abhishek unnikrishnan)
Date: Thu, 23 May 2013 14:24:35 +0530
Subject: [Twisted-Python] How does Twisted handle multiple request at
 the same time ?
In-Reply-To: <CAE_Hg6bxYUViYvsAbcOCrX8XMPdS8mfYSr7FtjGV2-eYfFPFgw@mail.gmail.com>
References: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>
	<CAE_Hg6bxYUViYvsAbcOCrX8XMPdS8mfYSr7FtjGV2-eYfFPFgw@mail.gmail.com>
Message-ID: <CAKtGXPtcTf=aVGqLVc2ZrB5QD9ErexhTe7iRQQW_sNga4SyzUQ@mail.gmail.com>

thank you Laurens Van Houtven.  This was helpful and i am moving onto
json-rpc for my projcet


On Thu, May 23, 2013 at 2:03 PM, Laurens Van Houtven <_ at lvh.io> wrote:

> On Thu, May 23, 2013 at 9:46 AM, abhishek unnikrishnan <
> thecreator232 at gmail.com> wrote:
>
>> hi guys
>>
>
> Hi Abhishek!
>
>
>> i'm new to twisted and asynchronous programming . i have created a rpc
>> server using twisted and xmlrpc packages . i wanted to know what will
>> happen if two or more clients give an rpc call at the same time. how will
>> the server handle this situation.
>>
>
> The tricky part is in the "at the same time". Twisted's reactor thread
> only does one thing at a time, and that's okay: both connections get
> accepted and some data gets read from them (and eventually written to
> them). The important part is that you do these things non-blockingly (or,
> synonymously, asynchronously): it's okay to only do one thing at a time as
> long as each thing you do takes very little time. The second connection
> doesn't have to wait long before the connection gets opened and data gets
> read, because the operations that happen before it don't take long.
>
> This pattern repeats throughout asynchronous programming: it's okay to
> only decode one bit of JSON at a time, as long as doing that doesn't take a
> long time (i.e. block), preventing anything else from happening in the
> immediate future.
>
> Does that clarify things?
>
> and also wanted to know is there a way for the server to call the client
>> in an rpc scenario .
>>
>
> That depends on your RPC protocol. Many allow this (often called peer to
> peer), many are explicitly client-server and only allow one-way calls. Even
> protocols that do support full-duplex communication don't necessarily have
> clients that can take method calls very often.
>
> AMP, my personal favorite, explicitly supports two-way RPC. It comes with
> twisted, and you can read about it here: http://amp-protocol.net/
>
> Alternatively, I think JSON-RPC is full-duplex too.
>
>
> cheers
> lvh
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130523/a6cc6fe3/attachment.htm 

From tom.prince at ualberta.net  Thu May 23 22:09:58 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Thu, 23 May 2013 20:09:58 -0600
Subject: [Twisted-Python] Service downtime
In-Reply-To: <8761ye3mby.fsf@hermes.hocat.ca>
References: <8761ye3mby.fsf@hermes.hocat.ca>
Message-ID: <87vc69162x.fsf@hermes.hocat.ca>

Tom Prince <tom.prince at ualberta.net> writes:

> On Wednesday, at about 10 MDT (16 UTC), there will be downtime of all
> twisted services, as live data is transfered over. This may last
> up-to a couple of hours.

Unfortunately, the maintenance window was missed. It will now take place
this coming Monday, at about 10 MDT (16 UTC).

  Tom


From itamar at futurefoundries.com  Fri May 24 09:51:23 2013
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Fri, 24 May 2013 09:51:23 -0400
Subject: [Twisted-Python] Announcing Crochet 0.7: Easily use Twisted from
	threaded applications
Message-ID: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>

Crochet is an MIT-licensed library that makes it easier for threaded
applications like Flask or Django to use the Twisted networking framework.
Features include:

   - Runs Twisted's reactor in a thread it manages.
   - Hooks up Twisted's log system to the Python standard library
loggingframework. Unlike Twisted's built-in
   logging bridge, this includes support for blocking Handler instances.
   - Provides a blocking API to eventual results (i.e. Deferred instances).

This release includes better documentation and API improvements, as well as
better error reporting.

Here is a simple example of using Crochet:

import sys
from twisted.web.client import getPagefrom crochet import setup,
run_in_reactorcrochet.setup()
@run_in_reactordef download_page(url):
    return getPage(url)
result = download_page(sys.argv[1])# wait() returns the result when it
becomes available:print result.wait()


You can see more examples, read the documentation, and download the package
at:

https://pypi.python.org/pypi/crochet

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ ? Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130524/8f0ca38c/attachment.htm 

From dave at krondo.com  Fri May 24 11:16:52 2013
From: dave at krondo.com (Dave Peticolas)
Date: Fri, 24 May 2013 08:16:52 -0700
Subject: [Twisted-Python] Announcing Crochet 0.7: Easily use Twisted
 from threaded applications
In-Reply-To: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
References: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
Message-ID: <CAPRbp05zVjxivVJJzWoX8fqQXOGokvBGQ+W6qx0i-OQWBTMOmA@mail.gmail.com>

2013/5/24 Itamar Turner-Trauring <itamar at futurefoundries.com>

> Crochet is an MIT-licensed library that makes it easier for threaded
> applications like Flask or Django to use the Twisted networking framework.
> Features include:
>
>    - Runs Twisted's reactor in a thread it manages.
>    - Hooks up Twisted's log system to the Python standard library loggingframework. Unlike Twisted's built-in
>    logging bridge, this includes support for blocking Handler instances.
>    - Provides a blocking API to eventual results (i.e. Deferredinstances).
>
> This release includes better documentation and API improvements, as well
> as better error reporting.
>
> Here is a simple example of using Crochet:
>
> import sys
> from twisted.web.client import getPagefrom crochet import setup, run_in_reactorcrochet.setup()
> @run_in_reactordef download_page(url):
>     return getPage(url)
> result = download_page(sys.argv[1])# wait() returns the result when it becomes available:print result.wait()
>
>
> You can see more examples, read the documentation, and download the
> package at:
>
> https://pypi.python.org/pypi/crochet
>


Awesome awesome awesome awesome.

Also, awesome.

-- 
--Dave Peticolas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130524/a5ea006f/attachment.htm 

From dynamicgl at gmail.com  Fri May 24 12:21:42 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Sat, 25 May 2013 00:21:42 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
Message-ID: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>

Hi All

    I am quite concerned about these two tickets due to recently I may port
one of my systems to Ubuntu.

   By reading these comments, It looks like recent version of twisted may
suffer from this problem. So what version of twisted should  I use? Do I
need to keep using 10.1?

  I always use the latest version on windows.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130525/84ba12a0/attachment.htm 

From exarkun at twistedmatrix.com  Fri May 24 15:22:10 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 24 May 2013 19:22:10 -0000
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
Message-ID: <20130524192210.2432.907760656.divmod.xquotient.16@top>

On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets 
(I think you meant #6373 rather than #6378, by the way) - which is 
exactly why I'm replying.

Twisted development doesn't take place in secret.  The issue tracker 
should always reflect the latest state of the development process.  If 
an issue has had no comments and a branch no commits for a couple 
months, then it's almost certainly because no one has worked on the 
issue for a couple months.

So you generally don't need to ask if there has been any progress, 
because progress will always be reflected in ticket history or in 
version control.
>    I am quite concerned about these two tickets due to recently I may 
>port
>one of my systems to Ubuntu.

Perhaps you can help out with the tickets, then!  As hopefully you've 
noticed, one of them is currently up for review.  This means a developer 
believes a fix for the problem has been created and is just waiting for 
someone else to look it over and agree that it should be applied to 
trunk.  If this happens, then the fix will be available in the next 
release of Twisted, 13.1.0, which will probably happen in just a few 
weeks.

For more details about how the review process works, please take a look 
at this wiki page:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
>   By reading these comments, It looks like recent version of twisted 
>may
>suffer from this problem. So what version of twisted should  I use? Do 
>I
>need to keep using 10.1?
>
>  I always use the latest version on windows.
>
>Regards
>
>gelin yan


From kevin.horn at gmail.com  Sat May 25 10:47:14 2013
From: kevin.horn at gmail.com (Kevin Horn)
Date: Sat, 25 May 2013 09:47:14 -0500
Subject: [Twisted-Python] Announcing Crochet 0.7: Easily use Twisted
 from threaded applications
In-Reply-To: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
References: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
Message-ID: <CA+U=zK0SeUArvL+1iQq+dcnanqnxOXwRTPCQLF_B7zBuwBChEw@mail.gmail.com>

Truly fantastic!  Thanks for this.


On Fri, May 24, 2013 at 8:51 AM, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:

> Crochet is an MIT-licensed library that makes it easier for threaded
> applications like Flask or Django to use the Twisted networking framework.
> Features include:
>
>    - Runs Twisted's reactor in a thread it manages.
>    - Hooks up Twisted's log system to the Python standard library loggingframework. Unlike Twisted's built-in
>    logging bridge, this includes support for blocking Handler instances.
>    - Provides a blocking API to eventual results (i.e. Deferredinstances).
>
> This release includes better documentation and API improvements, as well
> as better error reporting.
>
> Here is a simple example of using Crochet:
>
> import sys
> from twisted.web.client import getPagefrom crochet import setup, run_in_reactorcrochet.setup()
> @run_in_reactordef download_page(url):
>     return getPage(url)
> result = download_page(sys.argv[1])# wait() returns the result when it becomes available:print result.wait()
>
>
> You can see more examples, read the documentation, and download the
> package at:
>
> https://pypi.python.org/pypi/crochet
>
> --
> Itamar Turner-Trauring, Future Foundries LLC
> http://futurefoundries.com/ ? Twisted consulting, training and support.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130525/b5511ecc/attachment.htm 

From dynamicgl at gmail.com  Sat May 25 10:50:50 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Sat, 25 May 2013 22:50:50 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <20130524192210.2432.907760656.divmod.xquotient.16@top>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
Message-ID: <CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>

On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:

> On 04:21 pm, dynamicgl at gmail.com wrote:
> >Hi All
>
> Hi Gelin,
>
> I don't have anything extra to add about the status of those two tickets
> (I think you meant #6373 rather than #6378, by the way) - which is
> exactly why I'm replying.
>
> Twisted development doesn't take place in secret.  The issue tracker
> should always reflect the latest state of the development process.  If
> an issue has had no comments and a branch no commits for a couple
> months, then it's almost certainly because no one has worked on the
> issue for a couple months.
>
> So you generally don't need to ask if there has been any progress,
> because progress will always be reflected in ticket history or in
> version control.
> >    I am quite concerned about these two tickets due to recently I may
> >port
> >one of my systems to Ubuntu.
>
> Perhaps you can help out with the tickets, then!  As hopefully you've
> noticed, one of them is currently up for review.  This means a developer
> believes a fix for the problem has been created and is just waiting for
> someone else to look it over and agree that it should be applied to
> trunk.  If this happens, then the fix will be available in the next
> release of Twisted, 13.1.0, which will probably happen in just a few
> weeks.
>
> For more details about how the review process works, please take a look
> at this wiki page:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Jean-Paul
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> >
> >  I always use the latest version on windows.
> >
> >Regards
> >
> >gelin yan
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


Hi exarkun

    I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending?

   I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

   By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well.  Thanks

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130525/0fd4b808/attachment.htm 

From donald at stufft.io  Sat May 25 13:11:02 2013
From: donald at stufft.io (Donald Stufft)
Date: Sat, 25 May 2013 13:11:02 -0400
Subject: [Twisted-Python] Twisted on PyPI
Message-ID: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>

Hey there!

Recently there has been a lot of work around packaging in Python. On my end of things I've been trying to clean up PyPI. Recently I've deployed a change that ensures that all *new* package names on PyPI conform to a strict set of rules. These rules are:

    - Must begin and end with an ASCII alphanumeric
    - Must contain only ASCII letters, digits, underscores, hyphens, and periods

Now we are left with about 235 total projects out of ~31k who do not conform to these guidelines. Out of those 235 projects Twisted is one of the major ones (Not Twisted itself, but Twisted Web, Twisted Core, etc).

Now the plan that we've come up with is to migrate any name that the only invalid characters are internal whitespace by replacing the whitespace with a -. This would Make Twisted Web Twisted-Web. This reflects already what is required to install Twisted Web via pip or easy_install.

So I'm emailing you all to warn you about this upcoming change since Twisted is one of the major projects affected and also to see if the Twisted developers would prefer a different rename than Twisted-Web.


-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130525/d46b7bf4/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: Message signed with OpenPGP using GPGMail
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20130525/d46b7bf4/attachment.pgp 

From exarkun at twistedmatrix.com  Sun May 26 00:05:41 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 26 May 2013 04:05:41 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1369541141.84.2092425816@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130526/a3e01b94/attachment.htm 

From tom.prince at ualberta.net  Sun May 26 01:45:53 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Sat, 25 May 2013 23:45:53 -0600
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
Message-ID: <87vc66mgz2.fsf@hermes.hocat.ca>

Donald Stufft <donald at stufft.io> writes:

> So I'm emailing you all to warn you about this upcoming change since
> Twisted is one of the major projects affected and also to see if the
> Twisted developers would prefer a different rename than Twisted-Web.

Looking at the project pages on pypi, those don't appear to be
installable anyway. I think that it might make sense to just remove
them, at this point.

  Tom


From termim at gmail.com  Sun May 26 11:26:39 2013
From: termim at gmail.com (Mikhail Terekhov)
Date: Sun, 26 May 2013 11:26:39 -0400
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <87vc66mgz2.fsf@hermes.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
	<87vc66mgz2.fsf@hermes.hocat.ca>
Message-ID: <CALCsMPSQFwsNS76P4qhzKsw5keTX5oYvRjT7-iLyVz8JcHpJcw@mail.gmail.com>

On Sun, May 26, 2013 at 1:45 AM, Tom Prince <tom.prince at ualberta.net> wrote:

> Donald Stufft <donald at stufft.io> writes:
>
> > So I'm emailing you all to warn you about this upcoming change since
> > Twisted is one of the major projects affected and also to see if the
> > Twisted developers would prefer a different rename than Twisted-Web.
>
> Looking at the project pages on pypi, those don't appear to be
> installable anyway. I think that it might make sense to just remove
> them, at this point.
>

+1

-- 
Mikhail Terekhov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130526/3dd32e54/attachment.htm 

From donald at stufft.io  Sun May 26 12:07:34 2013
From: donald at stufft.io (Donald Stufft)
Date: Sun, 26 May 2013 12:07:34 -0400
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <87vc66mgz2.fsf@hermes.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
	<87vc66mgz2.fsf@hermes.hocat.ca>
Message-ID: <94CAC1C1-72FA-4F69-875E-9A6563A05243@stufft.io>


On May 26, 2013, at 1:45 AM, Tom Prince <tom.prince at ualberta.net> wrote:

> Donald Stufft <donald at stufft.io> writes:
> 
>> So I'm emailing you all to warn you about this upcoming change since
>> Twisted is one of the major projects affected and also to see if the
>> Twisted developers would prefer a different rename than Twisted-Web.
> 
> Looking at the project pages on pypi, those don't appear to be
> installable anyway. I think that it might make sense to just remove
> them, at this point.
> 
>  Tom

Removing them is something the owner on PyPI can do if that's what Twisted would prefer to do.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130526/86de76ba/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: Message signed with OpenPGP using GPGMail
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20130526/86de76ba/attachment.pgp 

From tom.prince at ualberta.net  Mon May 27 20:27:36 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Mon, 27 May 2013 18:27:36 -0600
Subject: [Twisted-Python] Service downtime
In-Reply-To: <87vc69162x.fsf@hermes.hocat.ca>
References: <8761ye3mby.fsf@hermes.hocat.ca> <87vc69162x.fsf@hermes.hocat.ca>
Message-ID: <871u8sne2v.fsf@loki.hocat.ca>

>> On Wednesday, at about 10 MDT (16 UTC), there will be downtime of all
>> twisted services, as live data is transfered over. This may last
>> up-to a couple of hours.
>
> Unfortunately, the maintenance window was missed. It will now take place
> this coming Monday, at about 10 MDT (16 UTC).

The migration of trac and related services appears to have completed
successfully. Please report any issues.

Mail and user accounts still need to be migrated, and the web interface
to mailman is thus currently unavailable.

  Tom


From _ at lvh.io  Tue May 28 05:39:01 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Tue, 28 May 2013 11:39:01 +0200
Subject: [Twisted-Python] New registrations to this mailing list broken?
Message-ID: <CAE_Hg6bgOiXV817E9XDJ-RL8UOs4dFu6mbZHk+OSvPAYjHDteg@mail.gmail.com>

Hi,


Sending this hoping that it will in fact make it through ;)

Lynn Root (rougelynn) mentioned a few minutes ago on the IRC channel that
she was unable to join the Twisted mailing list:

09:25 < roguelynn> hey glyph + tomprince - I'm trying to get on the twisted
mailing this but see this error
http://glui.me/?i=7ckizft82fokgnt/2013-05-28_at_11.22.18_AM.png/

The short version of that image (just in case it goes down or something) is
that Mailman is complaining that the CGI app is run with group t-web, and
it was expecting to run as www-data. Solutions include: change the group to
be www-data, or re-run the configuration script with flag
--with-cgi-gid=t-web

Thanks!
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130528/0c65a5a5/attachment.htm 

From _ at lvh.io  Tue May 28 05:41:36 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Tue, 28 May 2013 11:41:36 +0200
Subject: [Twisted-Python] New registrations to this mailing list broken?
In-Reply-To: <CAE_Hg6bgOiXV817E9XDJ-RL8UOs4dFu6mbZHk+OSvPAYjHDteg@mail.gmail.com>
References: <CAE_Hg6bgOiXV817E9XDJ-RL8UOs4dFu6mbZHk+OSvPAYjHDteg@mail.gmail.com>
Message-ID: <CAE_Hg6ZUTf5QnQ6onSF=g+uo6Shq4G8mSHJTMFey2BJOyB+ATQ@mail.gmail.com>

Oops, just read that this is a know issue. My bad :)

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130528/185328f6/attachment.htm 

From matusis at yahoo.com  Tue May 28 20:31:55 2013
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 28 May 2013 17:31:55 -0700
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
Message-ID: <032d01ce5c03$ec7a2c10$c56e8430$@com>

> ? By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should ?I use? Do
>I
>need to keep using 10.1?

This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
        Traceback (most recent call last):
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
            return context.call({ILogContext: newCtx}, func, *args, **kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in callWithContext
            return self.currentContext().callWithContext(ctx, func, *args,
**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in callWithContext
            return func(*args,**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
_doReadOrWrite
            why = selectable.doRead()
        --- <exception caught here> ---
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
            transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
            self.startReading()
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
startReading
            self.reactor.addReader(self)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
addReader
            self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
            self._poller._control(cmd, fd, flags)
          File "_epoll.pyx", line 125, in _epoll.epoll._control
            
        exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret. ?The issue tracker
should always reflect the latest state of the development process. ?If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
> ? ?I am quite concerned about these two tickets due to recently I may
>port
>one of my systems to Ubuntu.
Perhaps you can help out with the tickets, then! ?As hopefully you've
noticed, one of them is currently up for review. ?This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk. ?If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

? ? http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
> ? By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should ?I use? Do
>I
>need to keep using 10.1?
>
> ?I always use the latest version on windows.
>
>Regards
>
>gelin yan
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


Hi exarkun

? ? I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending??

? ?I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

? ?By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well. ?Thanks

Regards

gelin yan?



From itamar at itamarst.org  Tue May 28 21:06:09 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 28 May 2013 21:06:09 -0400
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <032d01ce5c03$ec7a2c10$c56e8430$@com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
Message-ID: <51A55481.1030202@itamarst.org>

On 05/28/2013 08:31 PM, Alec Matusis wrote:
>>    By reading these comments, It looks like recent version of twisted
>> may
>> suffer from this problem. So what version of twisted should  I use? Do
>> I
>> need to keep using 10.1?
> This problem is very frequent on Linux with Python 2.7 / Twisted 12
> combination (we had to quickly roll back- cannot operate with that combo).
>
A workaround for the problem is available on a branch for 
<https://twistedmatrix.com/trac/ticket/6373>. The remaining work is 
fairly trivial, I just haven't gotten around to it due to lack of free 
time. If you're interested you should (a) test the fix and (b) perhaps 
submit a patch that addresses the remaining review tickets.

-Itamar


From matusis at yahoo.com  Tue May 28 22:37:30 2013
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 28 May 2013 19:37:30 -0700
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
Message-ID: <038701ce5c15$7777eda0$6667c8e0$@com>

Hi Gelin,

> As I know there are two epoll implementations in twisted, one that from
twisted itself and another one comes from standard library since py 2.6.

I was slightly incorrect in my email: the combination where it happens
infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1 as
I wrote).
How can I check whether twisted is using Python?s epoll or its own in this
combination? And how can I switch between epoll implementations in my app?

Alec

From: Gelin Yan [mailto:dynamicgl at gmail.com] 
Sent: Tuesday, May 28, 2013 6:42 PM
To: Alec Matusis
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?


On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
> ? By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should ?I use? Do
>I
>need to keep using 10.1?
This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
? ? ? ? Traceback (most recent call last):
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
? ? ? ? ? ? return context.call({ILogContext: newCtx}, func, *args, **kw)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in callWithContext
? ? ? ? ? ? return self.currentContext().callWithContext(ctx, func, *args,
**kw)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in callWithContext
? ? ? ? ? ? return func(*args,**kw)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
_doReadOrWrite
? ? ? ? ? ? why = selectable.doRead()
? ? ? ? --- <exception caught here> ---
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
? ? ? ? ? ? transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
? ? ? ? ? ? self.startReading()
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
startReading
? ? ? ? ? ? self.reactor.addReader(self)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
addReader
? ? ? ? ? ? self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
? ? ? ? ? ? self._poller._control(cmd, fd, flags)
? ? ? ? ? File "_epoll.pyx", line 125, in _epoll.epoll._control

? ? ? ? exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret. ?The issue tracker
should always reflect the latest state of the development process. ?If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
> ? ?I am quite concerned about these two tickets due to recently I may
>port
>one of my systems to Ubuntu.
Perhaps you can help out with the tickets, then! ?As hopefully you've
noticed, one of them is currently up for review. ?This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk. ?If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

? ? http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
> ? By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should ?I use? Do
>I
>need to keep using 10.1?
>
> ?I always use the latest version on windows.
>
>Regards
>
>gelin yan
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


Hi exarkun

? ? I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending??

? ?I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

? ?By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well. ?Thanks

Regards

gelin yan?


Hi Alec

? ?Thanks for your info. As I know there are two epoll implementations in
twisted, one that from twisted itself and another one comes from standard
library since py 2.6. If I was correct, since 10.2, twisted has been used
the standard epoll if applicable. I am curious which one did you use? Have
you tried py 2.7 & epoll from twisted itself?

Regards

gelin yan



From dynamicgl at gmail.com  Wed May 29 00:09:15 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Wed, 29 May 2013 12:09:15 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <038701ce5c15$7777eda0$6667c8e0$@com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
	<038701ce5c15$7777eda0$6667c8e0$@com>
Message-ID: <CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>

On Wed, May 29, 2013 at 10:37 AM, Alec Matusis <matusis at yahoo.com> wrote:

> Hi Gelin,
>
> > As I know there are two epoll implementations in twisted, one that from
> twisted itself and another one comes from standard library since py 2.6.
>
> I was slightly incorrect in my email: the combination where it happens
> infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1
> as
> I wrote).
> How can I check whether twisted is using Python?s epoll or its own in this
> combination? And how can I switch between epoll implementations in my app?
>
> Alec
>
> From: Gelin Yan [mailto:dynamicgl at gmail.com]
> Sent: Tuesday, May 28, 2013 6:42 PM
> To: Alec Matusis
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
> On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> This problem is very frequent on Linux with Python 2.7 / Twisted 12
> combination (we had to quickly roll back- cannot operate with that combo).
>
> It never happened with Python 2.6 / Twisted 10 (as in years).
>
> It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in
> weeks)
>
> Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
> refuses 30% of new connections, spewing this error:
>
> 2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory]
> Unhandled
> Error
>         Traceback (most recent call last):
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
>             return context.call({ILogContext: newCtx}, func, *args, **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in
> callWithContext
>             return self.currentContext().callWithContext(ctx, func, *args,
> **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in
> callWithContext
>             return func(*args,**kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
> _doReadOrWrite
>             why = selectable.doRead()
>         --- <exception caught here> ---
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
>             transport = self.transport(skt, protocol, addr, self, s,
> self.reactor)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
>             self.startReading()
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
> startReading
>             self.reactor.addReader(self)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
> addReader
>             self._add(reader, self._reads, self._writes, self._selectables,
> _epoll.IN, _epoll.OUT)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
>             self._poller._control(cmd, fd, flags)
>           File "_epoll.pyx", line 125, in _epoll.epoll._control
>
>         exceptions.IOError: [Errno 2] No such file or directory
>
>
> If I restart the server, it will be stable for a couple of weeks, until
> some
> event triggers this problem again. We hope that this problem is fixed
> before
> we are really forced to migrate to newer Python, otherwise there's no real
> upgrade path for us using Twisted.
>
> From: twisted-python-bounces at twistedmatrix.com
> [mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
> Sent: Saturday, May 25, 2013 7:51 AM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
>
> On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
> On 04:21 pm, dynamicgl at gmail.com wrote:
> >Hi All
>
> Hi Gelin,
>
> I don't have anything extra to add about the status of those two tickets
> (I think you meant #6373 rather than #6378, by the way) - which is
> exactly why I'm replying.
>
> Twisted development doesn't take place in secret.  The issue tracker
> should always reflect the latest state of the development process.  If
> an issue has had no comments and a branch no commits for a couple
> months, then it's almost certainly because no one has worked on the
> issue for a couple months.
>
> So you generally don't need to ask if there has been any progress,
> because progress will always be reflected in ticket history or in
> version control.
> >    I am quite concerned about these two tickets due to recently I may
> >port
> >one of my systems to Ubuntu.
> Perhaps you can help out with the tickets, then!  As hopefully you've
> noticed, one of them is currently up for review.  This means a developer
> believes a fix for the problem has been created and is just waiting for
> someone else to look it over and agree that it should be applied to
> trunk.  If this happens, then the fix will be available in the next
> release of Twisted, 13.1.0, which will probably happen in just a few
> weeks.
>
> For more details about how the review process works, please take a look
> at this wiki page:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Jean-Paul
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> >
> >  I always use the latest version on windows.
> >
> >Regards
> >
> >gelin yan
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> Hi exarkun
>
>     I noticed "review" tag has been removed for a while so does it imply
> this ticket is still pending?
>
>    I am not quite familiar how epoll works on linux so my help probably can
> be neglected. I event can't sure how to reproduce this bug.
>
>    By the way, Is it possible to use the "old" epoll implementation instead
> of the built in epoll from python with the latest version? It looks like
> this old one works quite well.  Thanks
>
> Regards
>
> gelin yan
>
>
> Hi Alec
>
>    Thanks for your info. As I know there are two epoll implementations in
> twisted, one that from twisted itself and another one comes from standard
> library since py 2.6. If I was correct, since 10.2, twisted has been used
> the standard epoll if applicable. I am curious which one did you use? Have
> you tried py 2.7 & epoll from twisted itself?
>
> Regards
>
> gelin yan
>
>
Hi Alec

  there is a link:
http://twistedmatrix.com/trac/browser/tags/releases/twisted-13.0.0/twisted/internet/epollreactor.py

I strip the related part and paste here:

try:
  from select import epoll
except ImportError:
  from twisted.python import _epoll

in the latest trunk  there is only  from select import epoll.

I am not sure which one you are using. epoll has been available in standard
library since Py 2.6. Twisted has been used its own epoll wrapper for years
until recently.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130529/4578b081/attachment-0001.htm 

From matusis at yahoo.com  Wed May 29 01:40:16 2013
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 28 May 2013 22:40:16 -0700
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>	<032d01ce5c03$ec7a2c10$c56e8430$@com>	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>	<038701ce5c15$7777eda0$6667c8e0$@com>
	<CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
Message-ID: <03fb01ce5c2f$001c3530$00549f90$@com>

Hi Gelin,

Apparently in the twisted 10.2 / python 2.7 combination in which the bug
occurs only rarely (every couple of weeks) I am still using twisted?s epoll:

epollreactor.py:

from twisted.python import _epoll


From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Tuesday, May 28, 2013 9:09 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Wed, May 29, 2013 at 10:37 AM, Alec Matusis <matusis at yahoo.com> wrote:
Hi Gelin,

> As I know there are two epoll implementations in twisted, one that from
twisted itself and another one comes from standard library since py 2.6.
I was slightly incorrect in my email: the combination where it happens
infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1 as
I wrote).
How can I check whether twisted is using Python?s epoll or its own in this
combination? And how can I switch between epoll implementations in my app?

Alec

From: Gelin Yan [mailto:dynamicgl at gmail.com]
Sent: Tuesday, May 28, 2013 6:42 PM
To: Alec Matusis
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?


On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
> ? By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should ?I use? Do
>I
>need to keep using 10.1?
This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
? ? ? ? Traceback (most recent call last):
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
? ? ? ? ? ? return context.call({ILogContext: newCtx}, func, *args, **kw)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in callWithContext
? ? ? ? ? ? return self.currentContext().callWithContext(ctx, func, *args,
**kw)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in callWithContext
? ? ? ? ? ? return func(*args,**kw)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
_doReadOrWrite
? ? ? ? ? ? why = selectable.doRead()
? ? ? ? --- <exception caught here> ---
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
? ? ? ? ? ? transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
? ? ? ? ? ? self.startReading()
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
startReading
? ? ? ? ? ? self.reactor.addReader(self)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
addReader
? ? ? ? ? ? self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
? ? ? ? ? File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
? ? ? ? ? ? self._poller._control(cmd, fd, flags)
? ? ? ? ? File "_epoll.pyx", line 125, in _epoll.epoll._control

? ? ? ? exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret. ?The issue tracker
should always reflect the latest state of the development process. ?If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
> ? ?I am quite concerned about these two tickets due to recently I may
>port
>one of my systems to Ubuntu.
Perhaps you can help out with the tickets, then! ?As hopefully you've
noticed, one of them is currently up for review. ?This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk. ?If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

? ? http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
> ? By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should ?I use? Do
>I
>need to keep using 10.1?
>
> ?I always use the latest version on windows.
>
>Regards
>
>gelin yan
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


Hi exarkun

? ? I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending??

? ?I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

? ?By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well. ?Thanks

Regards

gelin yan?


Hi Alec

? ?Thanks for your info. As I know there are two epoll implementations in
twisted, one that from twisted itself and another one comes from standard
library since py 2.6. If I was correct, since 10.2, twisted has been used
the standard epoll if applicable. I am curious which one did you use? Have
you tried py 2.7 & epoll from twisted itself?

Regards

gelin yan

Hi Alec

? there is a
link:?http://twistedmatrix.com/trac/browser/tags/releases/twisted-13.0.0/twi
sted/internet/epollreactor.py

I strip the related part and paste here:

try:
??from?select?import?epoll
except?ImportError:
? from twisted.python import _epoll

in the latest trunk ?there is only ?from select import epoll.

I am not sure which one you are using. epoll has been available in standard
library since Py 2.6. Twisted has been used its own epoll wrapper for years
until recently.

Regards

gelin yan



From dynamicgl at gmail.com  Wed May 29 02:07:25 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Wed, 29 May 2013 14:07:25 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <51A55481.1030202@itamarst.org>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<51A55481.1030202@itamarst.org>
Message-ID: <CABkOF6QWS5bFU6JZfrcBqPNZ-MrtOpf_uOySoTuhxpt_2=Ddyw@mail.gmail.com>

On Wed, May 29, 2013 at 9:06 AM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> On 05/28/2013 08:31 PM, Alec Matusis wrote:
> >>    By reading these comments, It looks like recent version of twisted
> >> may
> >> suffer from this problem. So what version of twisted should  I use? Do
> >> I
> >> need to keep using 10.1?
> > This problem is very frequent on Linux with Python 2.7 / Twisted 12
> > combination (we had to quickly roll back- cannot operate with that
> combo).
> >
> A workaround for the problem is available on a branch for
> <https://twistedmatrix.com/trac/ticket/6373>. The remaining work is
> fairly trivial, I just haven't gotten around to it due to lack of free
> time. If you're interested you should (a) test the fix and (b) perhaps
> submit a patch that addresses the remaining review tickets.
>
> -Itamar
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


Hi Itamar

   I will give it a try without guarantee due to I am not quite familiar
with epoll itself :)

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130529/3f7cbcee/attachment.htm 

From dynamicgl at gmail.com  Wed May 29 04:51:41 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Wed, 29 May 2013 16:51:41 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <03fb01ce5c2f$001c3530$00549f90$@com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
	<038701ce5c15$7777eda0$6667c8e0$@com>
	<CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
	<03fb01ce5c2f$001c3530$00549f90$@com>
Message-ID: <CABkOF6Tfpnz9HH7+kr0VP5mQU6oY_+j3XfJNCGmN7tu60SO5EQ@mail.gmail.com>

On Wed, May 29, 2013 at 1:40 PM, Alec Matusis <matusis at yahoo.com> wrote:

> Hi Gelin,
>
> Apparently in the twisted 10.2 / python 2.7 combination in which the bug
> occurs only rarely (every couple of weeks) I am still using twisted?s
> epoll:
>
> epollreactor.py:
>
> from twisted.python import _epoll
>
>
> From: twisted-python-bounces at twistedmatrix.com
> [mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
> Sent: Tuesday, May 28, 2013 9:09 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
>
> On Wed, May 29, 2013 at 10:37 AM, Alec Matusis <matusis at yahoo.com> wrote:
> Hi Gelin,
>
> > As I know there are two epoll implementations in twisted, one that from
> twisted itself and another one comes from standard library since py 2.6.
> I was slightly incorrect in my email: the combination where it happens
> infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1
> as
> I wrote).
> How can I check whether twisted is using Python?s epoll or its own in this
> combination? And how can I switch between epoll implementations in my app?
>
> Alec
>
> From: Gelin Yan [mailto:dynamicgl at gmail.com]
> Sent: Tuesday, May 28, 2013 6:42 PM
> To: Alec Matusis
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
> On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> This problem is very frequent on Linux with Python 2.7 / Twisted 12
> combination (we had to quickly roll back- cannot operate with that combo).
>
> It never happened with Python 2.6 / Twisted 10 (as in years).
>
> It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in
> weeks)
>
> Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
> refuses 30% of new connections, spewing this error:
>
> 2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory]
> Unhandled
> Error
>         Traceback (most recent call last):
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
>             return context.call({ILogContext: newCtx}, func, *args, **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in
> callWithContext
>             return self.currentContext().callWithContext(ctx, func, *args,
> **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in
> callWithContext
>             return func(*args,**kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
> _doReadOrWrite
>             why = selectable.doRead()
>         --- <exception caught here> ---
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
>             transport = self.transport(skt, protocol, addr, self, s,
> self.reactor)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
>             self.startReading()
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
> startReading
>             self.reactor.addReader(self)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
> addReader
>             self._add(reader, self._reads, self._writes, self._selectables,
> _epoll.IN, _epoll.OUT)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
>             self._poller._control(cmd, fd, flags)
>           File "_epoll.pyx", line 125, in _epoll.epoll._control
>
>         exceptions.IOError: [Errno 2] No such file or directory
>
>
> If I restart the server, it will be stable for a couple of weeks, until
> some
> event triggers this problem again. We hope that this problem is fixed
> before
> we are really forced to migrate to newer Python, otherwise there's no real
> upgrade path for us using Twisted.
>
> From: twisted-python-bounces at twistedmatrix.com
> [mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
> Sent: Saturday, May 25, 2013 7:51 AM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
>
> On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
> On 04:21 pm, dynamicgl at gmail.com wrote:
> >Hi All
>
> Hi Gelin,
>
> I don't have anything extra to add about the status of those two tickets
> (I think you meant #6373 rather than #6378, by the way) - which is
> exactly why I'm replying.
>
> Twisted development doesn't take place in secret.  The issue tracker
> should always reflect the latest state of the development process.  If
> an issue has had no comments and a branch no commits for a couple
> months, then it's almost certainly because no one has worked on the
> issue for a couple months.
>
> So you generally don't need to ask if there has been any progress,
> because progress will always be reflected in ticket history or in
> version control.
> >    I am quite concerned about these two tickets due to recently I may
> >port
> >one of my systems to Ubuntu.
> Perhaps you can help out with the tickets, then!  As hopefully you've
> noticed, one of them is currently up for review.  This means a developer
> believes a fix for the problem has been created and is just waiting for
> someone else to look it over and agree that it should be applied to
> trunk.  If this happens, then the fix will be available in the next
> release of Twisted, 13.1.0, which will probably happen in just a few
> weeks.
>
> For more details about how the review process works, please take a look
> at this wiki page:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Jean-Paul
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> >
> >  I always use the latest version on windows.
> >
> >Regards
> >
> >gelin yan
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> Hi exarkun
>
>     I noticed "review" tag has been removed for a while so does it imply
> this ticket is still pending?
>
>    I am not quite familiar how epoll works on linux so my help probably can
> be neglected. I event can't sure how to reproduce this bug.
>
>    By the way, Is it possible to use the "old" epoll implementation instead
> of the built in epoll from python with the latest version? It looks like
> this old one works quite well.  Thanks
>
> Regards
>
> gelin yan
>
>
> Hi Alec
>
>    Thanks for your info. As I know there are two epoll implementations in
> twisted, one that from twisted itself and another one comes from standard
> library since py 2.6. If I was correct, since 10.2, twisted has been used
> the standard epoll if applicable. I am curious which one did you use? Have
> you tried py 2.7 & epoll from twisted itself?
>
> Regards
>
> gelin yan
>
> Hi Alec
>
>   there is a
> link:
> http://twistedmatrix.com/trac/browser/tags/releases/twisted-13.0.0/twi
> sted/internet/epollreactor.py
>
> I strip the related part and paste here:
>
> try:
>   from select import epoll
> except ImportError:
>   from twisted.python import _epoll
>
> in the latest trunk  there is only  from select import epoll.
>
> I am not sure which one you are using. epoll has been available in standard
> library since Py 2.6. Twisted has been used its own epoll wrapper for years
> until recently.
>
> Regards
>
> gelin yan
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi Alec

   I suggest giving the work around provided by Itamar a try. It might
alleviate your situation.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20130529/572f9227/attachment-0001.htm 

From itamar at itamarst.org  Wed May 29 07:02:39 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 29 May 2013 07:02:39 -0400
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6Tfpnz9HH7+kr0VP5mQU6oY_+j3XfJNCGmN7tu60SO5EQ@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
	<038701ce5c15$7777eda0$6667c8e0$@com>
	<CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
	<03fb01ce5c2f$001c3530$00549f90$@com>
	<CABkOF6Tfpnz9HH7+kr0VP5mQU6oY_+j3XfJNCGmN7tu60SO5EQ@mail.gmail.com>
Message-ID: <51A5E04F.8040500@itamarst.org>

Can you please not quote the whole email in your reply? I have to scroll 
through pages and pages of text to reach the section you wrote. I 
realize GMail hides it by default, but I am not using GMail.

-Itamar


From tom.prince at ualberta.net  Wed May 29 15:24:55 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 29 May 2013 15:24:55 -0600
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <87vc66mgz2.fsf@hermes.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca>
Message-ID: <8761y1mqc8.fsf@loki.hocat.ca>

Tom Prince <tom.prince at ualberta.net> writes:

> Donald Stufft <donald at stufft.io> writes:
>
>> So I'm emailing you all to warn you about this upcoming change since
>> Twisted is one of the major projects affected and also to see if the
>> Twisted developers would prefer a different rename than Twisted-Web.
>
> Looking at the project pages on pypi, those don't appear to be
> installable anyway. I think that it might make sense to just remove
> them, at this point.

There appears to be a consensus to remove them, but I don't have access
to do that.

  Tom


From donald at stufft.io  Wed May 29 15:39:33 2013
From: donald at stufft.io (Donald Stufft)
Date: Wed, 29 May 2013 17:39:33 -0400
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <8761y1mqc8.fsf@loki.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca> <8761y1mqc8.fsf@loki.hocat.ca>
Message-ID: <58249E89-9FAF-4CAA-BB26-6631DE2DB8E0@stufft.io>


On May 29, 2013, at 5:24 PM, Tom Prince <tom.prince at ualberta.net> wrote:

> Tom Prince <tom.prince at ualberta.net> writes:
> 
>> Donald Stufft <donald at stufft.io> writes:
>> 
>>> So I'm emailing you all to warn you about this upcoming change since
>>> Twisted is one of the major projects affected and also to see if the
>>> Twisted developers would prefer a different rename than Twisted-Web.
>> 
>> Looking at the project pages on pypi, those don't appear to be
>> installable anyway. I think that it might make sense to just remove
>> them, at this point.
> 
> There appears to be a consensus to remove them, but I don't have access
> to do that.
> 
>  Tom

I'm not familiar with whose who in Twisted land sorry.

Any of the maintainers listed on the website will be capable of removing them, or if it's desired to have me do it in batch I require someone official like Glyph or so who does have access to request it of me.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20130529/5aa35dfb/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20130529/5aa35dfb/attachment.pgp>

From tom.prince at ualberta.net  Wed May 29 16:58:59 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 29 May 2013 16:58:59 -0600
Subject: [Twisted-Python] Service downtime
In-Reply-To: <871u8sne2v.fsf@loki.hocat.ca>
References: <8761ye3mby.fsf@hermes.hocat.ca> <87vc69162x.fsf@hermes.hocat.ca>
 <871u8sne2v.fsf@loki.hocat.ca>
Message-ID: <87r4gpl7f0.fsf@loki.hocat.ca>

Tom Prince <tom.prince at ualberta.net> writes:

> Mail and user accounts still need to be migrated, and the web interface
> to mailman is thus currently unavailable.

The migration has now been completed.

  Tom


From exarkun at twistedmatrix.com  Thu May 30 06:43:15 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 30 May 2013 12:43:15 -0000
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <8761y1mqc8.fsf@loki.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca> <8761y1mqc8.fsf@loki.hocat.ca>
Message-ID: <20130530124315.25989.1090113342.divmod.xquotient.8@top>

On 29 May, 09:24 pm, tom.prince at ualberta.net wrote:
>Tom Prince <tom.prince at ualberta.net> writes:
>>Donald Stufft <donald at stufft.io> writes:
>>>So I'm emailing you all to warn you about this upcoming change since
>>>Twisted is one of the major projects affected and also to see if the
>>>Twisted developers would prefer a different rename than Twisted-Web.
>>
>>Looking at the project pages on pypi, those don't appear to be
>>installable anyway. I think that it might make sense to just remove
>>them, at this point.
>
>There appears to be a consensus to remove them, but I don't have access
>to do that.

What are we removing?  All of the subprojects on PyPI?  If so, the 
release process will need to be adjusted to avoid re-adding them.

What makes them uninstallable?  Wouldn't it make as much sense to just 
fix that?  Is this only a PyPI interaction thing, or is there actually a 
problem with the packages being distributed?

Jean-Paul


From tom.prince at ualberta.net  Fri May 31 14:12:11 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Fri, 31 May 2013 14:12:11 -0600
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <20130530124315.25989.1090113342.divmod.xquotient.8@top>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca> <8761y1mqc8.fsf@loki.hocat.ca>
 <20130530124315.25989.1090113342.divmod.xquotient.8@top>
Message-ID: <87d2s6lxic.fsf@loki.hocat.ca>

exarkun at twistedmatrix.com writes:

>>There appears to be a consensus to remove them, but I don't have access
>>to do that.
>
> What are we removing?  All of the subprojects on PyPI?
Yes.

> If so, the release process will need to be adjusted to avoid re-adding them.
https://twistedmatrix.com/trac/wiki/ReleaseProcess?action=diff&version=164&old_version=163

> What makes them uninstallable?  Wouldn't it make as much sense to just 
> fix that?  Is this only a PyPI interaction thing, or is there actually a 
> problem with the packages being distributed?

It is just that pypi doesn't (didn't, now that they are deleted) have
the necessary metadata to install them. My understanding was that we are
moving in the direction of deemphasizing the split packages. Thus why
they weren't installable from pypi, and are now removed from pypi.

  Tom


From buildbot at twistematrix.com  Fri May 31 11:56:29 2013
From: buildbot at twistematrix.com (Tom Prince)
Date: Fri, 31 May 2013 11:56:29 -0600
Subject: [Twisted-Python] OSX 10.8 buildslave
In-Reply-To: <20130530115933.25989.1720691440.divmod.xquotient.4@top>
References: <87y5b617le.fsf@hermes.hocat.ca> <87fvx5mrmf.fsf@loki.hocat.ca>
 <5E3A89398864414E8EE2CB192E0C965C114C07B86E@EXMBX10.exchhosting.com>
 <87li6xl74m.fsf@loki.hocat.ca>
 <20130530115933.25989.1720691440.divmod.xquotient.4@top>
Message-ID: <87fvx3kp82.fsf@loki.hocat.ca>

Due to circumstances beyond our control, the machine that we have been
using to host the OSX 10.8 buildslave is currently unavailable.

As per policy[1], official support will be dropped for this platform before
the next release, unless a replacement is found.

  Tom

[1] https://twistedmatrix.com/trac/wiki/ContinuousIntegration/FixYourDamnBuildSlave


From _ at lvh.io  Fri May  3 06:57:03 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Fri, 3 May 2013 14:57:03 +0200
Subject: [Twisted-Python] How do I write AMP Command definitions
	TTD-edly?
In-Reply-To: <20130304161744.9151.828707065.divmod.xquotient.6@localhost6.localdomain6>
References: <CAE_Hg6bOAshXfRp4nfeyZs_U9CuWHrHDBL_0ufTkLztYxx1uiQ@mail.gmail.com>
	<20130304161744.9151.828707065.divmod.xquotient.6@localhost6.localdomain6>
Message-ID: <CAE_Hg6aGygKP3Ft-MfOokjioPea8mfrC1dAr53bgt5czHEbGcg@mail.gmail.com>

Hi again,

Sorry to drag up this old post, but I have another question.

On Mon, Mar 4, 2013 at 5:17 PM, <exarkun at twistedmatrix.com> wrote:

> Chris and I wrote all the AMP-using code for game TDD.  See
> game/test/test_network.py in lp:game.
>

I've implemented this in txampext.commandtests:
https://github.com/lvh/txampext/blob/master/txampext/commandtests.py

There's one more issue I have though. The lp:game code (and now txampext)
deals with arguments and responses, but not exceptions. Did you have
something pleasant for that, or should I just hack the the equivalent thing
together for AMP exceptions as well?

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130503/96c7ab4c/attachment.html>

From mkomu at cs.hut.fi  Sat May  4 05:28:20 2013
From: mkomu at cs.hut.fi (Miika Komu)
Date: Sat, 04 May 2013 14:28:20 +0300
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
Message-ID: <5184F0D4.4080603@cs.hut.fi>

Howdy,

we investigated the networking APIs of Twisted (10.2) and published our
findings in Ottawa Linux Symposium 2012:

http://nw.dreamhosters.com/ols/ols2012/ols2012-komu.pdf

We propose two types of improvements to the framework described in full
detail in section 4.3.1 of the publication. First, we suggest security
bug fixes. Second, we suggest improvements that can improve either the
user experience (i.e. by improving latency in IPv6 environments) or
developers (after all, frameworks are a conveniency for the developers).
The suggestions for improvements are briefly summarized below.

Security issues
---------------
* R1.3:  IPv6-mapped addresses should not be present on the wire for
security reasons.
* R3.2: Server-side multihoming for UDP does not work properly. The
framework should use SO_BINDTODEVICE option or sendmsg()/recvmsg()
interfaces in a proper way.
* (R5.3): The framework does not initialize the SSL/TLS implementation
automatically

Suggested improvements (for better end-user or developer experience)
--------------------------------------------------------------------
* (R1.1): The framework does not support symbolic host names in its
APIs, i.e., does not hide the details of hostname-to-address resolution
from the application
* R1.2: The details of IPv6 are not abstracted away from the application
* R2.1: The framework does not implement DNS look ups with
getaddrinfo(). This is important for IPv6 source address selection
* R2.2: The framework does not support parallel DNS look ups over IPv4
and IPv6 to optimize latency
* R3.3: The framework does not support parallel connect() over IPv4 and
IPv6 to minimize the latency for connection set-up
* (R4.1): TCP and UDP are not easily interchangeable

Please refer to section 4.3.4 in the publication for a more elaborate
discussion of the improvements.



From mkomu at cs.hut.fi  Sat May  4 06:50:37 2013
From: mkomu at cs.hut.fi (Miika Komu)
Date: Sat, 04 May 2013 15:50:37 +0300
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <5184F0D4.4080603@cs.hut.fi>
References: <5184F0D4.4080603@cs.hut.fi>
Message-ID: <5185041D.2070807@cs.hut.fi>

Hi,

On 04/05/13 14:28, Miika Komu wrote:

> Security issues
> ---------------
> * R1.3:  IPv6-mapped addresses should not be present on the wire for
> security reasons.
> * R3.2: Server-side multihoming for UDP does not work properly. The
> framework should use SO_BINDTODEVICE option or sendmsg()/recvmsg()
> interfaces in a proper way.
> * (R5.3): The framework does not initialize the SSL/TLS implementation
> automatically

clarification... strictly speaking, R3.2 could be categorized as a
non-security bug (it results in failed connectivity).



From itamar at itamarst.org  Sat May  4 08:00:15 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Sat, 04 May 2013 10:00:15 -0400
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <5184F0D4.4080603@cs.hut.fi>
References: <5184F0D4.4080603@cs.hut.fi>
Message-ID: <5185146F.6080906@itamarst.org>

On 05/04/2013 07:28 AM, Miika Komu wrote:
> Howdy,
>
> we investigated the networking APIs of Twisted (10.2) and published our
> findings in Ottawa Linux Symposium 2012:
>
> http://nw.dreamhosters.com/ols/ols2012/ols2012-komu.pdf
Thanks for sending us your suggestions for improvement. I'm wondering 
about your choice of version, though: Twisted 10.2 was released in 2010. 
Why did you look at an old version of Twisted for a conference in 2012?


> Suggested improvements (for better end-user or developer experience)
> --------------------------------------------------------------------
> * (R1.1): The framework does not support symbolic host names in its
> APIs, i.e., does not hide the details of hostname-to-address resolution
> from the application
> * R1.2: The details of IPv6 are not abstracted away from the application
> * R2.1: The framework does not implement DNS look ups with
> getaddrinfo(). This is important for IPv6 source address selection
> * R2.2: The framework does not support parallel DNS look ups over IPv4
> and IPv6 to optimize latency
> * R3.3: The framework does not support parallel connect() over IPv4 and
> IPv6 to minimize the latency for connection set-up
>
I believe pretty much of all of these have been fixed in Twisted over 
the past year, or are written and in the process of addressing review 
comments.

Except for this:

* (R4.1): TCP and UDP are not easily interchangeable

Which I don't understand at all. UDP and TCP are completely different 
than each other, there's no way to make them interchangeable.



From mkomu at cs.hut.fi  Sat May  4 09:54:12 2013
From: mkomu at cs.hut.fi (Miika Komu)
Date: Sat, 04 May 2013 18:54:12 +0300
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <5185146F.6080906@itamarst.org>
References: <5184F0D4.4080603@cs.hut.fi> <5185146F.6080906@itamarst.org>
Message-ID: <51852F24.9000908@cs.hut.fi>

Hi Itamar,

On 05/04/2013 05:00 PM, Itamar Turner-Trauring wrote:
> On 05/04/2013 07:28 AM, Miika Komu wrote:
>> Howdy,
>>
>> we investigated the networking APIs of Twisted (10.2) and published our
>> findings in Ottawa Linux Symposium 2012:
>>
>> http://nw.dreamhosters.com/ols/ols2012/ols2012-komu.pdf
> Thanks for sending us your suggestions for improvement. I'm wondering
> about your choice of version, though: Twisted 10.2 was released in 2010.
> Why did you look at an old version of Twisted for a conference in 2012?

I'll have to check this from my co-author who did the analysis.

>> Suggested improvements (for better end-user or developer experience)
>> --------------------------------------------------------------------
>> * (R1.1): The framework does not support symbolic host names in its
>> APIs, i.e., does not hide the details of hostname-to-address resolution
>> from the application
>> * R1.2: The details of IPv6 are not abstracted away from the application
>> * R2.1: The framework does not implement DNS look ups with
>> getaddrinfo(). This is important for IPv6 source address selection
>> * R2.2: The framework does not support parallel DNS look ups over IPv4
>> and IPv6 to optimize latency
>> * R3.3: The framework does not support parallel connect() over IPv4 and
>> IPv6 to minimize the latency for connection set-up
>>
> I believe pretty much of all of these have been fixed in Twisted over
> the past year, or are written and in the process of addressing review
> comments.

This is good news!

> Except for this:
>
> * (R4.1): TCP and UDP are not easily interchangeable
>
> Which I don't understand at all. UDP and TCP are completely different
> than each other, there's no way to make them interchangeable.

with connected sockets, (almost) the same API calls could be used and 
the details could be possibly abstracted away (some kind of a flag still 
needed to choose between TCP and UDP). A number of applications appear 
to support both TCP and UDP-based connectivity:

4.2.4 A Summary of the Sockets API Findings and Their Implications:

Finding 2 statistics: TCP-UDP hybrids 26.3%

Finding 2. Hybrid applications using both TCP and UDP occur as 
frequently as TCP-only applications. Application developers seem to 
write many application protocols to be run with both transports. While 
it is possible to write almost identical code for the two transports, 
the Sockets API favors different functions for the two. This 
unnecessarily complicates the application code.



From glyph at twistedmatrix.com  Sat May  4 17:51:08 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 4 May 2013 16:51:08 -0700
Subject: [Twisted-Python] suggestions for improvement in Twisted APIs
In-Reply-To: <51852F24.9000908@cs.hut.fi>
References: <5184F0D4.4080603@cs.hut.fi> <5185146F.6080906@itamarst.org>
	<51852F24.9000908@cs.hut.fi>
Message-ID: <1810A2A6-0CF7-4043-9FD8-57690843D685@twistedmatrix.com>

Hi Miika,

On May 4, 2013, at 8:54 AM, Miika Komu <mkomu at cs.hut.fi> wrote:

> with connected sockets, (almost) the same API calls could be used and 
> the details could be possibly abstracted away (some kind of a flag still 
> needed to choose between TCP and UDP). A number of applications appear 
> to support both TCP and UDP-based connectivity:

Supporting both TCP (stream-based) and UDP (datagram-based) communications requires explicit decisions on the part of the application, both in the design of the protocol and in the logic of its parsing.  The biggest difference is that TCP applications must implement logic to deal with framing, where as UDP applications do not need to, but there are other nuances as well.

See this frequently asked question for more information:

<http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith>

> While it is possible to write almost identical code for the two transports, 
> the Sockets API favors different functions for the two. This 
> unnecessarily complicates the application code.

It does not "unnecessarily complicate" the application code; it introduces a different code path for a semantically distinct operation (transmit a datagram vs. transmit a stream segment).

Based on my experience helping people understand UDP in the past, I would hazard a guess that many of these application protocols that can run in hybrid TCP/UDP mode are simply full of bugs because their developers did UDP testing on a fast local network, where, under low load, UDP can superficially behave like TCP and did not appreciate the semantics of the low-level networking operations they were invoking.  Twisted at least makes the distinction explicit, so that in order to make this mistake you need to consciously implement the same code against two transports.

Thanks for looking into Twisted, though; the fact that we have already addressed most of your other criticisms in our development process indicates that most of the other issues you pointed out were spot on :).  I just hope that next time you'll have a look at a more recent version!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130504/5e072290/attachment.html>

From exarkun at twistedmatrix.com  Sat May  4 22:05:28 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 May 2013 04:05:28 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1367726728.35.308864546@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130505/99eea986/attachment.html>

From glyph at twistedmatrix.com  Sun May  5 23:11:27 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 5 May 2013 22:11:27 -0700
Subject: [Twisted-Python] chain certificates on the command line?
Message-ID: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>

With the recent resolution of <http://twistedmatrix.com/trac/ticket/2061>, I am wondering if there is already a plan in progress (and maybe some existing tickets) for adding intermediary chain certificate support to client and server endpoint string syntaxes?

Apologies if I lost it somewhere in the somewhat lengthy discussion on that ticket :).

-glyph






From hs at ox.cx  Mon May  6 00:23:22 2013
From: hs at ox.cx (Hynek Schlawack)
Date: Mon, 6 May 2013 08:23:22 +0200
Subject: [Twisted-Python] chain certificates on the command line?
In-Reply-To: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>
References: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>
Message-ID: <63F653AF-61D8-4B97-B1A2-EC3E24AF6A6B@ox.cx>

Am 06.05.2013 um 07:11 schrieb Glyph <glyph at twistedmatrix.com>:

> With the recent resolution of <http://twistedmatrix.com/trac/ticket/2061>, I am wondering if there is already a plan in progress (and maybe some existing tickets) for adding intermediary chain certificate support to client and server endpoint string syntaxes?

Yes, I’m on it for servers: http://twistedmatrix.com/trac/ticket/6499

I hope to get it done by 13.1 depending on review times and the actual release time?

—h


From pierre at jaury.eu  Mon May  6 03:57:28 2013
From: pierre at jaury.eu (Pierre Jaury)
Date: Mon, 06 May 2013 11:57:28 +0200
Subject: [Twisted-Python] Twisted Web documentation out of date
Message-ID: <51877E88.4050409@jaury.eu>

Twisted Web documentation still refers to some deprecated objects that
have been removed from Twisted 13.0. For instance, the latest version of
this page :


http://twistedmatrix.com/documents/current/web/howto/web-in-60/error-handling.html

refers to NoResource as being part of the twisted.web.error module while
it was moved to twisted.web.resource a while ago.

I did not find any other outdated reference for now, yet this might not
be as isolated as it seems.

Regards,
Pierre.

-- 
Pierre Jaury <pierre at jaury.eu>
Weblog - http://kaiyou.fr
GPG ID - E804FB60

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 490 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20130506/ebd97ab8/attachment.sig>

From itamar at futurefoundries.com  Mon May  6 09:31:20 2013
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Mon, 6 May 2013 11:31:20 -0400
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <51877E88.4050409@jaury.eu>
References: <51877E88.4050409@jaury.eu>
Message-ID: <CAOp9P3rW++iJEtw74J9sMdeCP7qz1kiS2cchfwrxYRgg_=f=9A@mail.gmail.com>

On Mon, May 6, 2013 at 5:57 AM, Pierre Jaury <pierre at jaury.eu> wrote:

> Twisted Web documentation still refers to some deprecated objects that
> have been removed from Twisted 13.0. For instance, the latest version of
> this page :
>
>
>
> http://twistedmatrix.com/documents/current/web/howto/web-in-60/error-handling.html
>
> refers to NoResource as being part of the twisted.web.error module while
> it was moved to twisted.web.resource a while ago.
>
> I did not find any other outdated reference for now, yet this might not
> be as isolated as it seems.
>
> Regards,
> Pierre.
>
> --
> Pierre Jaury <pierre at jaury.eu>
> Weblog - http://kaiyou.fr
> GPG ID - E804FB60
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130506/c104757a/attachment.html>

From itamar at futurefoundries.com  Mon May  6 09:31:48 2013
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Mon, 6 May 2013 11:31:48 -0400
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <51877E88.4050409@jaury.eu>
References: <51877E88.4050409@jaury.eu>
Message-ID: <CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>

Thanks for reporting this; could you file a bug at
http://twistedmatrix.com/trac/?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130506/bb014a24/attachment.html>

From glyph at twistedmatrix.com  Mon May  6 11:47:35 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 6 May 2013 10:47:35 -0700
Subject: [Twisted-Python] chain certificates on the command line?
In-Reply-To: <63F653AF-61D8-4B97-B1A2-EC3E24AF6A6B@ox.cx>
References: <59CA7B8F-102F-4FC7-A5F1-6D73B0F75425@twistedmatrix.com>
	<63F653AF-61D8-4B97-B1A2-EC3E24AF6A6B@ox.cx>
Message-ID: <75F6F2BA-188D-4484-8FAE-9B0D88820F61@twistedmatrix.com>


On May 5, 2013, at 11:23 PM, Hynek Schlawack <hs at ox.cx> wrote:

> Am 06.05.2013 um 07:11 schrieb Glyph <glyph at twistedmatrix.com>:
> 
>> With the recent resolution of <http://twistedmatrix.com/trac/ticket/2061>, I am wondering if there is already a plan in progress (and maybe some existing tickets) for adding intermediary chain certificate support to client and server endpoint string syntaxes?
> 
> Yes, I’m on it for servers: http://twistedmatrix.com/trac/ticket/6499
> 
> I hope to get it done by 13.1 depending on review times and the actual release time?

Great, looking forward to it.  Feel free to ping me for a review when it's ready.

I guess we should really start talking about release timing for 13.1 sometime soon.

-glyph




From bino at indoakses-online.com  Mon May  6 19:19:06 2013
From: bino at indoakses-online.com (bino at indoakses-online.com)
Date: Tue, 7 May 2013 08:19:06 +0700
Subject: [Twisted-Python] is it about wokkel ?
Message-ID: <4633cb697b725841ba850dd72e163f8f.squirrel@localhost>

Dear All ...

I Really not sure whetehr it's about wokkel or not, please bare with me.

I run a twistd tac in a tablet with Linux OS.

Basically it's a wokkel based XMPP client that send a line to own XMPP
server.
This client also join a conference room, I monitor the conference room

1. First try, send to a bot jid and that bot didn't send any response.
Result : After about 12-13 hour, :
a. Conference said that the client left the room
b. The system (Tablet) hang

2. Second try : send to the conference room , and another bot (the one at
#1) echo it to room also
Result : All system stable passing 24 hour test.

Kindly please some body give me tell me what wokkel XMPP client will do
when it got no resposponse/call from other for long time.

Sincerely
-bino-




From exarkun at twistedmatrix.com  Tue May  7 07:14:10 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 07 May 2013 13:14:10 -0000
Subject: [Twisted-Python] is it about wokkel ?
In-Reply-To: <4633cb697b725841ba850dd72e163f8f.squirrel@localhost>
References: <4633cb697b725841ba850dd72e163f8f.squirrel@localhost>
Message-ID: <20130507131410.5372.1755092209.divmod.xquotient.54@top>

On 01:19 am, bino at indoakses-online.com wrote:
>Dear All ...
>
>I Really not sure whetehr it's about wokkel or not, please bare with 
>me.
>
>I run a twistd tac in a tablet with Linux OS.
>
>Basically it's a wokkel based XMPP client that send a line to own XMPP
>server.
>This client also join a conference room, I monitor the conference room
>
>1. First try, send to a bot jid and that bot didn't send any response.
>Result : After about 12-13 hour, :
>a. Conference said that the client left the room
>b. The system (Tablet) hang
>
>2. Second try : send to the conference room , and another bot (the one 
>at
>#1) echo it to room also
>Result : All system stable passing 24 hour test.
>
>Kindly please some body give me tell me what wokkel XMPP client will do
>when it got no resposponse/call from other for long time.

Hi bino,

I don't think there's enough detail in your question for anyone to offer 
much assistance.

It sounds like whatever problem you're experiencing is very closely tied 
to the specifics of the implementation of the XMPP client and XMPP 
server you're using.  Are these standard packages or did you build them 
on top of Twisted and Wokkel?

If you can provide a minimal example that reproduces the problem, that 
will present the greatest opportunity for someone to help you out.  See 
http://sscce.org/ for more on that.

Good luck,
Jean-Paul



From jon at multani.info  Wed May  8 08:30:37 2013
From: jon at multani.info (Jonathan Ballet)
Date: Wed, 8 May 2013 16:30:37 +0200
Subject: [Twisted-Python] Helping the Python 3 port
Message-ID: <20130508143036.GA20746@danio.home>

Hi,

I'm interested to give a help to port Twisted to Python 3.
I gave a look at the tickets on Trac tagged with py3k and those in the
Python-3.x milestone. I gave a try at
http://twistedmatrix.com/trac/ticket/5802 to see what still needed to be
done, and after rebasing the patch on trunk and starting to hack a few
modules, I noticed that I have to do those 3 things in a bunch of
places:

* use the newer "except Exception as e" instead of "except Exception, e"
* use the print function instead of the print statement
* replace "implements(IFoo)" by the class decorator "@implementer(IFoo)"

I can probably post a new patch which fixes all those things in order
for Trial (as per #5802) to just start, but I wonder if this is the
right approach and if it wouldn't be better to fix those first (since
they are, AFAIK, compatible with Python 2.6 anyway).

Any idea?

 Jonathan



From tom.prince at ualberta.net  Wed May  8 09:36:14 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 08 May 2013 09:36:14 -0600
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508143036.GA20746@danio.home>
References: <20130508143036.GA20746@danio.home>
Message-ID: <87obclwkk1.fsf@hermes.hocat.ca>

Jonathan Ballet <jon at multani.info> writes:

> Hi,

Welcome.

> I'm interested to give a help to port Twisted to Python 3.

Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?

That is the plan for porting to python3.

  Tom



From itamar at itamarst.org  Wed May  8 11:00:16 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 08 May 2013 13:00:16 -0400
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508143036.GA20746@danio.home>
References: <20130508143036.GA20746@danio.home>
Message-ID: <518A84A0.9000208@itamarst.org>

On 05/08/2013 10:30 AM, Jonathan Ballet wrote:
> Hi,
>
> I'm interested to give a help to port Twisted to Python 3.
> I gave a look at the tickets on Trac tagged with py3k and those in the
> Python-3.x milestone. I gave a try at
> http://twistedmatrix.com/trac/ticket/5802 to see what still needed to be
> done, and after rebasing the patch on trunk and starting to hack a few
> modules, I noticed that I have to do those 3 things in a bunch of
> places:
>
> * use the newer "except Exception as e" instead of "except Exception, e"
> * use the print function instead of the print statement
> * replace "implements(IFoo)" by the class decorator "@implementer(IFoo)"
>
> I can probably post a new patch which fixes all those things in order
> for Trial (as per #5802) to just start, but I wonder if this is the
> right approach and if it wouldn't be better to fix those first (since
> they are, AFAIK, compatible with Python 2.6 anyway).
>
You can definitely do these as a patch on their own, but try not to do 
too many modules at once so that the patch is manageable for review. The 
process for Python 3 ports is getting the tests for a module running 
correctly on Python 3, and then making them pass. Past efforts to port 
to Python 3 have foundered on things like:

 1. Not bothering to make the tests work the same way on Python 2. You
    /must not/ change APIs from Python 2's point of view as part of a
    Python 3 port.
 2. Randomly changing bytes to unicode with no thought about which is
    correct.
 3. Lack of test coverage. Old code doesn't have enough tests, so you
    sometimes need to add tests and only then do the port.




From exarkun at twistedmatrix.com  Wed May  8 13:02:47 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 08 May 2013 19:02:47 -0000
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508143036.GA20746@danio.home>
References: <20130508143036.GA20746@danio.home>
Message-ID: <20130508190247.5372.1247062538.divmod.xquotient.75@top>

On 02:30 pm, jon at multani.info wrote:
>Hi,
>
>I'm interested to give a help to port Twisted to Python 3.
>I gave a look at the tickets on Trac tagged with py3k and those in the
>Python-3.x milestone. I gave a try at
>http://twistedmatrix.com/trac/ticket/5802 to see what still needed to 
>be
>done, and after rebasing the patch on trunk and starting to hack a few
>modules, I noticed that I have to do those 3 things in a bunch of
>places:
>
>* use the newer "except Exception as e" instead of "except Exception, 
>e"
>* use the print function instead of the print statement
>* replace "implements(IFoo)" by the class decorator 
>"@implementer(IFoo)"
>
>I can probably post a new patch which fixes all those things in order
>for Trial (as per #5802) to just start, but I wonder if this is the
>right approach and if it wouldn't be better to fix those first (since
>they are, AFAIK, compatible with Python 2.6 anyway).
>
>Any idea?

To expand on what others have said in this thread, here's another 
approach you might consider:

  1) Open up twisted/scripts/trial.py and look at what Twisted modules it 
imports.

  2) If you do this, you'll see it uses (among other things) 
twisted.python.usage.

  3) Look at admin/_twistedpython3.py, you'll see that 
twisted.python.usage hasn't been ported yet.

  4) Look at twisted/python/usage.py and you'll see it doesn't have very 
many Twisted dependencies (making it a better candidate for porting work 
than twisted/scripts/trial.py).  Look through the tracker to see if 
there's a ticket for porting any of these.  As it turns out, 
twisted.python.util has already been ported and there are tickets for 
twisted.python.reflect (#6239 - sort of) and twisted.python.text (#1601 
and #6341 - sort of).

  5) Pick up one of those dependency tickets to start with - #1601 and 
#6341 seem to be in progress, but I don't see anyone actively working on 
#6239.

  6) Port that module by making its test suite pass and generally 
following the steps given the Python 3 porting page on the wiki.

Jean-Paul



From jon at multani.info  Wed May  8 13:27:52 2013
From: jon at multani.info (Jonathan Ballet)
Date: Wed, 8 May 2013 21:27:52 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508190247.5372.1247062538.divmod.xquotient.75@top>
References: <20130508143036.GA20746@danio.home>
	<20130508190247.5372.1247062538.divmod.xquotient.75@top>
Message-ID: <20130508192751.GC21829@danio.home>

On Wed, May 08, 2013 at 07:02:47PM -0000, exarkun at twistedmatrix.com wrote:
> On 02:30 pm, jon at multani.info wrote:
> >Hi,
> >
> >I'm interested to give a help to port Twisted to Python 3.
> >I gave a look at the tickets on Trac tagged with py3k and those in the
> >Python-3.x milestone. I gave a try at
> >http://twistedmatrix.com/trac/ticket/5802 to see what still needed to 
> >be
> >done, and after rebasing the patch on trunk and starting to hack a few
> >modules, I noticed that I have to do those 3 things in a bunch of
> >places:
> >
> >* use the newer "except Exception as e" instead of "except Exception, 
> >e"
> >* use the print function instead of the print statement
> >* replace "implements(IFoo)" by the class decorator 
> >"@implementer(IFoo)"
> >
> >I can probably post a new patch which fixes all those things in order
> >for Trial (as per #5802) to just start, but I wonder if this is the
> >right approach and if it wouldn't be better to fix those first (since
> >they are, AFAIK, compatible with Python 2.6 anyway).
> >
> >Any idea?
> 
> To expand on what others have said in this thread, here's another 
> approach you might consider:
> 
>   1) Open up twisted/scripts/trial.py and look at what Twisted modules it 
> imports.
> 
>   2) If you do this, you'll see it uses (among other things) 
> twisted.python.usage.
> 
>   3) Look at admin/_twistedpython3.py, you'll see that 
> twisted.python.usage hasn't been ported yet.
> 
>   4) Look at twisted/python/usage.py and you'll see it doesn't have very 
> many Twisted dependencies (making it a better candidate for porting work 
> than twisted/scripts/trial.py).  Look through the tracker to see if 
> there's a ticket for porting any of these.  As it turns out, 
> twisted.python.util has already been ported and there are tickets for 
> twisted.python.reflect (#6239 - sort of) and twisted.python.text (#1601 
> and #6341 - sort of).
> 
>   5) Pick up one of those dependency tickets to start with - #1601 and 
> #6341 seem to be in progress, but I don't see anyone actively working on 
> #6239.
> 
>   6) Port that module by making its test suite pass and generally 
> following the steps given the Python 3 porting page on the wiki.

OK, so we can probably sum all of this with: get the dependencies
ticketed, ported and merged first, before tackling big things like
twisted/scripts/trial.py

Is that right?

 Jonathan



From exarkun at twistedmatrix.com  Wed May  8 15:01:47 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 08 May 2013 21:01:47 -0000
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508192751.GC21829@danio.home>
References: <20130508143036.GA20746@danio.home>
	<20130508190247.5372.1247062538.divmod.xquotient.75@top>
	<20130508192751.GC21829@danio.home>
Message-ID: <20130508210147.5372.1797203887.divmod.xquotient.76@top>

On 07:27 pm, jon at multani.info wrote:
>[snip]
>
>OK, so we can probably sum all of this with: get the dependencies
>ticketed, ported and merged first, before tackling big things like
>twisted/scripts/trial.py
>
>Is that right?

Exactly!

Jean-Paul
>Jonathan
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From jon at multani.info  Wed May  8 17:03:56 2013
From: jon at multani.info (Jonathan Ballet)
Date: Thu, 9 May 2013 01:03:56 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <87obclwkk1.fsf@hermes.hocat.ca>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
Message-ID: <20130508230355.GD21829@danio.home>

On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
> 
> That is the plan for porting to python3.

What about "importing" code from other librairies?

I have this specific case where I need to support metaclass for both
Python 2.x and Python 3.x which have different syntax (__metaclass__ and
class XXX(.., metaclass=...)), which `six` addresses with a function
called `with_metaclass()` [1]

Twisted is not depending on this kind of library, how those things
should be deal with then? I can include this specific snippet (which is
actually a two-liner)in t.python.compat but what about the license?

 Jonathan


[1]: http://pythonhosted.org/six/#six.with_metaclass



From glyph at twistedmatrix.com  Wed May  8 18:40:56 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 8 May 2013 17:40:56 -0700
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130508230355.GD21829@danio.home>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
Message-ID: <6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>


On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:

> On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
>> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
>> 
>> That is the plan for porting to python3.
> 
> What about "importing" code from other librairies?
> 
> I have this specific case where I need to support metaclass for both
> Python 2.x and Python 3.x which have different syntax (__metaclass__ and
> class XXX(.., metaclass=...)), which `six` addresses with a function
> called `with_metaclass()` [1]

Within Twisted?  Which case is that?

> Twisted is not depending on this kind of library, how those things
> should be deal with then? I can include this specific snippet (which is
> actually a two-liner)in t.python.compat but what about the license?

Most of the logic in six is pretty trivial, and we already have our own Python-version-compatibility code (in twisted.python.compat) so thus far we have gone with just replicating whatever functionality we need.

Of course, the best is not needing the compatibility code at all, which is why I'm curious exactly which case you're referring to :).

-glyph


From jon at multani.info  Thu May  9 03:04:23 2013
From: jon at multani.info (Jonathan Ballet)
Date: Thu, 9 May 2013 11:04:23 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
Message-ID: <20130509090421.GA6058@danio.home>

On Wed, May 08, 2013 at 05:40:56PM -0700, Glyph wrote:
> 
> On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:
> 
> > On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
> >> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
> >> 
> >> That is the plan for porting to python3.
> > 
> > What about "importing" code from other librairies?
> > 
> > I have this specific case where I need to support metaclass for both
> > Python 2.x and Python 3.x which have different syntax (__metaclass__ and
> > class XXX(.., metaclass=...)), which `six` addresses with a function
> > called `with_metaclass()` [1]
> 
> Within Twisted?  Which case is that?

I was referring to twisted.python.reflect.PropertyAccessor which uses a
metaclass to manage access to its properties. It is marked as deprecated
since Twisted 12.1.0, so I guess there still need to support it on both
Python 2.x and Python 3, which is why I was looking for this
compatibility layer.

> > Twisted is not depending on this kind of library, how those things
> > should be deal with then? I can include this specific snippet (which is
> > actually a two-liner)in t.python.compat but what about the license?
> 
> Most of the logic in six is pretty trivial, and we already have our own Python-version-compatibility code (in twisted.python.compat) so thus far we have gone with just replicating whatever functionality we need.

Granted, the code is trivial. So it's OK to replicate it in t.p.compat
then? If there's a need for this code at all, of course :)

 Jonathan



From exarkun at twistedmatrix.com  Thu May  9 04:35:28 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 09 May 2013 10:35:28 -0000
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130509090421.GA6058@danio.home>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
	<20130509090421.GA6058@danio.home>
Message-ID: <20130509103528.5372.1813186721.divmod.xquotient.84@top>

On 09:04 am, jon at multani.info wrote:
>On Wed, May 08, 2013 at 05:40:56PM -0700, Glyph wrote:
>>
>>On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:
>>
>> > On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
>> >> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
>> >>
>> >> That is the plan for porting to python3.
>> >
>> > What about "importing" code from other librairies?
>> >
>> > I have this specific case where I need to support metaclass for both
>> > Python 2.x and Python 3.x which have different syntax (__metaclass__ 
>>and
>> > class XXX(.., metaclass=...)), which `six` addresses with a function
>> > called `with_metaclass()` [1]
>>
>>Within Twisted?  Which case is that?
>
>I was referring to twisted.python.reflect.PropertyAccessor which uses a
>metaclass to manage access to its properties. It is marked as 
>deprecated
>since Twisted 12.1.0, so I guess there still need to support it on both
>Python 2.x and Python 3, which is why I was looking for this
>compatibility layer.

Eh.  Strongly consider not porting deprecated things. :) 
PropertyAccessor could even be deleted for the next release, Twisted 
13.1 (this would be a relatively quick deprecation/removal cycle, but it 
just fits within the defined policy), if it is a maintenance burden - 
and forcing us to solve the metaclass issue sounds like a bit of a 
burden.

Jean-Paul
>> > Twisted is not depending on this kind of library, how those things
>> > should be deal with then? I can include this specific snippet (which 
>>is
>> > actually a two-liner)in t.python.compat but what about the license?
>>
>>Most of the logic in six is pretty trivial, and we already have our 
>>own Python-version-compatibility code (in twisted.python.compat) so 
>>thus far we have gone with just replicating whatever functionality we 
>>need.
>
>Granted, the code is trivial. So it's OK to replicate it in t.p.compat
>then? If there's a need for this code at all, of course :)
>
>Jonathan
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From jon at multani.info  Thu May  9 05:17:11 2013
From: jon at multani.info (Jonathan Ballet)
Date: Thu, 9 May 2013 13:17:11 +0200
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130509103528.5372.1813186721.divmod.xquotient.84@top>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
	<20130509090421.GA6058@danio.home>
	<20130509103528.5372.1813186721.divmod.xquotient.84@top>
Message-ID: <20130509111710.GB6058@danio.home>

On Thu, May 09, 2013 at 10:35:28AM -0000, exarkun at twistedmatrix.com wrote:
> On 09:04 am, jon at multani.info wrote:
> >On Wed, May 08, 2013 at 05:40:56PM -0700, Glyph wrote:
> >>
> >>On May 8, 2013, at 4:03 PM, Jonathan Ballet <jon at multani.info> wrote:
> >>
> >> > On Wed, May 08, 2013 at 09:36:14AM -0600, Tom Prince wrote:
> >> >> Have you seen https://twistedmatrix.com/trac/wiki/Plan/Python3 ?
> >> >>
> >> >> That is the plan for porting to python3.
> >> >
> >> > What about "importing" code from other librairies?
> >> >
> >> > I have this specific case where I need to support metaclass for both
> >> > Python 2.x and Python 3.x which have different syntax (__metaclass__ 
> >>and
> >> > class XXX(.., metaclass=...)), which `six` addresses with a function
> >> > called `with_metaclass()` [1]
> >>
> >>Within Twisted?  Which case is that?
> >
> >I was referring to twisted.python.reflect.PropertyAccessor which uses a
> >metaclass to manage access to its properties. It is marked as 
> >deprecated
> >since Twisted 12.1.0, so I guess there still need to support it on both
> >Python 2.x and Python 3, which is why I was looking for this
> >compatibility layer.
> 
> Eh.  Strongly consider not porting deprecated things. :) 
> PropertyAccessor could even be deleted for the next release, Twisted 
> 13.1 (this would be a relatively quick deprecation/removal cycle, but it 
> just fits within the defined policy), if it is a maintenance burden - 
> and forcing us to solve the metaclass issue sounds like a bit of a 
> burden.

OK, fine with me. It anwsers at the same time one of my question on
#5929 (sorry for the Trac spam on this ticket BTW, Trac was a bit slow
to accept my updates :/)

 Jonathan



From barry at python.org  Thu May  9 08:05:36 2013
From: barry at python.org (Barry Warsaw)
Date: Thu, 9 May 2013 10:05:36 -0400
Subject: [Twisted-Python] Helping the Python 3 port
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
Message-ID: <20130509100536.7766928b@anarchist>

On May 09, 2013, at 01:03 AM, Jonathan Ballet wrote:

>I have this specific case where I need to support metaclass for both
>Python 2.x and Python 3.x which have different syntax (__metaclass__ and
>class XXX(.., metaclass=...)), which `six` addresses with a function
>called `with_metaclass()` [1]

Here's another resource that might help (e.g. we have a solution for the
above).

https://wiki.ubuntu.com/Python/3

At some point I plan to migrate this to the Python wiki.

-Barry
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20130509/9d2200ba/attachment.sig>

From glyph at twistedmatrix.com  Thu May  9 15:05:09 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 9 May 2013 14:05:09 -0700
Subject: [Twisted-Python] Helping the Python 3 port
In-Reply-To: <20130509111710.GB6058@danio.home>
References: <20130508143036.GA20746@danio.home>
	<87obclwkk1.fsf@hermes.hocat.ca>
	<20130508230355.GD21829@danio.home>
	<6DB9752F-4F46-4AB5-B6AB-B6571C320686@twistedmatrix.com>
	<20130509090421.GA6058@danio.home>
	<20130509103528.5372.1813186721.divmod.xquotient.84@top>
	<20130509111710.GB6058@danio.home>
Message-ID: <80459613-FBC4-454A-8856-7342AF7BCDDC@twistedmatrix.com>


On May 9, 2013, at 4:17 AM, Jonathan Ballet <jon at multani.info> wrote:

> OK, fine with me. It anwsers at the same time one of my question on
> #5929 (sorry for the Trac spam on this ticket BTW, Trac was a bit slow
> to accept my updates :/)

No need to apologize, we know it's a problem.  In fact, we're working on it (getting a faster host for Trac):

<http://labs.twistedmatrix.com/2013/05/april-end-month-report.html>

Which reminds me: please donate, so we can keep funding more work like that!

<http://twistedmatrix.com/trac/#DonatetoTwisted>

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130509/27bea254/attachment.html>

From i at introo.me  Thu May  9 20:44:04 2013
From: i at introo.me (Shiyao Ma)
Date: Fri, 10 May 2013 10:44:04 +0800
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
Message-ID: <CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>

If I remember clearly, I already fired a ticket about this issue a week ago
and it's waiting for review.


On Mon, May 6, 2013 at 11:31 PM, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:

> Thanks for reporting this; could you file a bug at
> http://twistedmatrix.com/trac/?
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
My gpg pubring is available via: gpg --keyserver
subkeys.pgp.net--recv-keys 307CF736

More on: http://about.me/introom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130510/e502691a/attachment.html>

From glyph at twistedmatrix.com  Thu May  9 21:57:34 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 9 May 2013 20:57:34 -0700
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
Message-ID: <98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>


On May 9, 2013, at 7:44 PM, Shiyao Ma <i at introo.me> wrote:

> If I remember clearly, I already fired a ticket about this issue a week ago and it's waiting for review.

Do you happen to have a link to that ticket?

-g




From i at introo.me  Fri May 10 06:42:45 2013
From: i at introo.me (Shiyao Ma)
Date: Fri, 10 May 2013 20:42:45 +0800
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
Message-ID: <CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>

http://twistedmatrix.com/trac/ticket/6503


On Fri, May 10, 2013 at 11:57 AM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On May 9, 2013, at 7:44 PM, Shiyao Ma <i at introo.me> wrote:
>
> > If I remember clearly, I already fired a ticket about this issue a week
> ago and it's waiting for review.
>
> Do you happen to have a link to that ticket?
>
> -g
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



-- 
My gpg pubring is available via: gpg --keyserver
subkeys.pgp.net--recv-keys 307CF736

More on: http://about.me/introom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130510/8bf9c728/attachment.html>

From zooko at leastauthority.com  Fri May 10 10:00:21 2013
From: zooko at leastauthority.com (Zooko Wilcox-OHearn)
Date: Fri, 10 May 2013 10:00:21 -0600
Subject: [Twisted-Python] ANNOUNCING Tahoe-LAFS v1.10
Message-ID: <CAM_a8JwtuKhvWSvP-YM63FoFeBgwO3O+puL3hpbBxqmCkzsGqw@mail.gmail.com>

Folks:

Tahoe-LAFS is built on Twisted and uses Twisted extensively for
networking, event queue, and more. If you want to hack on a
distributed storage system written in Twisted, you are welcome to join
us! Here is our new Release Announcement.

Regards,

Zooko


-------
ANNOUNCING Tahoe, the Least-Authority File System, v1.10

The Tahoe-LAFS team is pleased to announce the immediate
availability of version 1.10.0 of Tahoe-LAFS, an extremely
reliable distributed storage system. Get it here:

https://tahoe-lafs.org/source/tahoe-lafs/trunk/docs/quickstart.rst

Tahoe-LAFS is the first distributed storage system to offer
"provider-independent security" — meaning that not even the
operators of your storage servers can read or alter your data
without your consent. Here is the one-page explanation of its
unique security and fault-tolerance properties:

https://tahoe-lafs.org/source/tahoe-lafs/trunk/docs/about.rst

The previous stable release of Tahoe-LAFS was v1.9.2, released
on July 3, 2012.

v1.10.0 is a feature release which adds a new Introducer
protocol, improves the appearance of the web-based user
interface, improves grid security by making introducer FURLs
unguessable, and fixes many bugs. See the NEWS file [1] for
details.


WHAT IS IT GOOD FOR?

With Tahoe-LAFS, you distribute your filesystem across
multiple servers, and even if some of the servers fail or are
taken over by an attacker, the entire filesystem continues to
work correctly, and continues to preserve your privacy and
security. You can easily share specific files and directories
with other people.

In addition to the core storage system itself, volunteers
have built other projects on top of Tahoe-LAFS and have
integrated Tahoe-LAFS with existing systems, including
Windows, JavaScript, iPhone, Android, Hadoop, Flume, Django,
Puppet, bzr, mercurial, perforce, duplicity, TiddlyWiki, and
more. See the Related Projects page on the wiki [3].

We believe that strong cryptography, Free and Open Source
Software, erasure coding, and principled engineering practices
make Tahoe-LAFS safer than RAID, removable drive, tape,
on-line backup or cloud storage.

This software is developed under test-driven development, and
there are no known bugs or security flaws which would
compromise confidentiality or data integrity under recommended
use. (For all important issues that we are currently aware of
please see the known_issues.rst file [2].)


COMPATIBILITY

This release should be compatible with the version 1 series of
Tahoe-LAFS. Clients from this release can write files and
directories in the format used by clients of all versions back
to v1.0 (which was released March 25, 2008). Clients from this
release can read files and directories produced by clients of
all versions since v1.0. Servers from this release can serve
clients of all versions back to v1.0 and clients from this
release can use servers of all versions back to v1.0.

Except for the new optional MDMF format, we have not made any
intentional compatibility changes. However we do not yet have
the test infrastructure to continuously verify that all new
versions are interoperable with previous versions. We intend
to build such an infrastructure in the future.

The new Introducer protocol added in v1.10 is backwards
compatible with older clients and introducer servers, however
some features will be unavailable when an older node is
involved. Please see docs/nodekeys.rst [14] for details.

This is the eighteenth release in the version 1 series. This
series of Tahoe-LAFS will be actively supported and maintained
for the foreseeable future, and future versions of Tahoe-LAFS
will retain the ability to read and write files compatible
with this series.


LICENCE

You may use this package under the GNU General Public License,
version 2 or, at your option, any later version. See the file
"COPYING.GPL" [4] for the terms of the GNU General Public
License, version 2.

You may use this package under the Transitive Grace Period
Public Licence, version 1 or, at your option, any later
version. (The Transitive Grace Period Public Licence has
requirements similar to the GPL except that it allows you to
delay for up to twelve months after you redistribute a derived
work before releasing the source code of your derived work.)
See the file "COPYING.TGPPL.rst" [5] for the terms of the
Transitive Grace Period Public Licence, version 1.

(You may choose to use this package under the terms of either
licence, at your option.)


INSTALLATION

Tahoe-LAFS works on Linux, Mac OS X, Windows, Solaris, *BSD,
and probably most other systems. Start with
"docs/quickstart.rst" [6].


HACKING AND COMMUNITY

Please join us on the mailing list [7]. Patches are gratefully
accepted -- the RoadMap page [8] shows the next improvements
that we plan to make and CREDITS [9] lists the names of people
who've contributed to the project. The Dev page [10] contains
resources for hackers.


SPONSORSHIP

Atlas Networks has contributed several hosted servers for
performance testing. Thank you to Atlas Networks [11] for
their generous and public-spirited support.

And a special thanks to LeastAuthority [12], which employs
several Tahoe-LAFS developers, for their continued support.

HACK TAHOE-LAFS!

If you can find a security flaw in Tahoe-LAFS which is serious
enough that we feel compelled to warn our users and issue a fix,
then we will award you with a customized t-shirts with your
exploit printed on it and add you to the "Hack Tahoe-LAFS Hall
Of Fame" [13].


ACKNOWLEDGEMENTS

This is the twelfth release of Tahoe-LAFS to be created solely
as a labor of love by volunteers. Thank you very much to the
team of "hackers in the public interest" who make Tahoe-LAFS
possible.

Brian Warner
on behalf of the Tahoe-LAFS team

May 1, 2013
San Francisco, California, USA


[1] https://tahoe-lafs.org/trac/tahoe-lafs/browser/NEWS.rst
[2] https://tahoe-lafs.org/trac/tahoe-lafs/browser/docs/known_issues.rst
[3] https://tahoe-lafs.org/trac/tahoe-lafs/wiki/RelatedProjects
[4] https://tahoe-lafs.org/trac/tahoe-lafs/browser/COPYING.GPL
[5] https://tahoe-lafs.org/trac/tahoe-lafs/browser/COPYING.TGPPL.rst
[6] https://tahoe-lafs.org/trac/tahoe-lafs/browser/docs/quickstart.rst
[7] https://tahoe-lafs.org/cgi-bin/mailman/listinfo/tahoe-dev
[8] https://tahoe-lafs.org/trac/tahoe-lafs/roadmap
[9] https://tahoe-lafs.org/trac/tahoe-lafs/browser/CREDITS
[10] https://tahoe-lafs.org/trac/tahoe-lafs/wiki/Dev
[11] http://atlasnetworks.us/
[12] https://leastauthority.com/
[13] https://tahoe-lafs.org/hacktahoelafs/
[14] https://tahoe-lafs.org/trac/tahoe-lafs/browser/docs/nodekeys.rst



From glyph at twistedmatrix.com  Fri May 10 13:35:19 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 May 2013 12:35:19 -0700
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
Message-ID: <91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>


On May 10, 2013, at 5:42 AM, Shiyao Ma <i at introo.me> wrote:

> http://twistedmatrix.com/trac/ticket/6503

Right now this ticket is awaiting review, along with 67 (!) others <http://twistedmatrix.com/trac/report/15>.  That is, unfortunately, a lot of tickets, so it might take a little while.

Twisted reviewers: review tickets!  Tom, the recipient of the sponsored fellowship, is busy with fixing our infrastructure, so we really need the community to pitch in.

If you're interested in reviewing tickets, please let me know.

<http://twistedmatrix.com/highscores/>

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130510/88e11977/attachment-0001.html>

From i at introo.me  Fri May 10 19:30:43 2013
From: i at introo.me (Shiyao Ma)
Date: Sat, 11 May 2013 09:30:43 +0800
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
	<91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
Message-ID: <CAJQX3Dweops2JEipjPnkyd4udR-bCrO=Dz+JYX=nRsrk68_fBg@mail.gmail.com>

Yep, I am interested in that. But I am busy doing my graduation project and
writing my thesis all throughout May(School here hasn't ended yet). I may
pitch in in summer when I have a bunch of free time.


On Sat, May 11, 2013 at 3:35 AM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On May 10, 2013, at 5:42 AM, Shiyao Ma <i at introo.me> wrote:
>
> http://twistedmatrix.com/trac/ticket/6503
>
>
> Right now this ticket is awaiting review, along with 67 (!) others <
> http://twistedmatrix.com/trac/report/15>.  That is, unfortunately, a lot
> of tickets, so it might take a little while.
>
> Twisted reviewers: review tickets!  Tom, the recipient of the sponsored
> fellowship, is busy with fixing our infrastructure, so we really need the
> community to pitch in.
>
> If you're interested in reviewing tickets, please let me know.
>
> <http://twistedmatrix.com/highscores/>
>
> -glyph
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
My gpg pubring is available via: gpg --keyserver
subkeys.pgp.net--recv-keys 307CF736

More on: http://about.me/introom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130511/a88cde6f/attachment.html>

From hs at ox.cx  Sat May 11 10:41:24 2013
From: hs at ox.cx (Hynek Schlawack)
Date: Sat, 11 May 2013 18:41:24 +0200
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
	<91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
Message-ID: <B1367445-076E-4BAF-A669-10F2F8247733@ox.cx>


> Twisted reviewers: review tickets!  Tom, the recipient of the sponsored fellowship, is busy with fixing our infrastructure, so we really need the community to pitch in.
> 
> If you're interested in reviewing tickets, please let me know.

I spoke about that to jp already: collecting some *practical* material on proper code review in the wiki would be really beneficiary. I've been pointed to http://mumak.net/stuff/your-code-sucks.html which is a nice start but doesn't one really get started. Maybe a checklist to hold to in the beginning? Pointing out common things to look for…
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130511/7e185712/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat May 11 22:05:32 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 12 May 2013 04:05:32 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1368331532.79.1815539506@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130512/aeb0dca6/attachment.html>

From meejah at meejah.ca  Sun May 12 00:35:06 2013
From: meejah at meejah.ca (meejah)
Date: Sun, 12 May 2013 10:35:06 +0400
Subject: [Twisted-Python] txtorcon 0.8.0
Message-ID: <87zjw0n1t1.fsf@atlantis.meejah.ca>


-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


txtorcon 0.8.0 is now tagged and released. [1]

txtorcon is a Python+Twisted-based asynchronous implementation of the
Tor control protocol. It includes a state-tracking abstraction,
configuration abstraction, Twisted endpoint support for hidden
services, 96%+ unit-test coverage and many examples. 

New in this release:

 . issue #18: slight *API change* ICircuitListener.circuit_failed,
   circuit_closed, IStreamListener.stream_failed, stream_closed and
   stream_detach all now include any keywords in the notification
   method (these either lacked flags, or only included some)
 . launch_tor() can take a timeout (starting with a patch from hellais);
 . cleanup from aagbsn;
 . more test coverage;
 . run tests cleanly without graphviz (from lukaslueg);
 . issue #26: fix from lukaslueg;
 . pep8 and whitespace targets plus massive cleanup (now pep8 clean, from lukaslueg);
 . issue #30: fix reported by webmeister making ipaddr actually-optional;
 . example using synchronous web server (built-in SimpleHTTPServer) with txtorcon (from lukaslueg);
 . TorState can now create circuits without an explicit path;
 . passwords for non-cookie authenticated sessions now use a password callback (that may return a Deferred);
 . fixes for AddrMap in case Tor ticket #8596 is implemented;

Code and built documentation may be obtained:

   git clone git://github.com/meejah/txtorcon.git

   https://github.com/meejah/txtorcon
   https://txtorcon.readthedocs.org/en/latest/index.html

You may easily install it:

   pip install txtorcon
   easy_install txtorcon

The sha256sum output is:

87fcb3bce3ac3b48583f637bf69445bd50071411dc3fded89df7600d870a3094  txtorcon-0.8.0.tar.gz

thanks,
meejah


[1] -- (Note the tagging took place last month, and I've only now
updated PyPI, ReadTheDocs, freecode, emailed this, ...)
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEcBAEBAgAGBQJRjy+yAAoJEJ0UOBRRgEVQXrMH/0Kl3DmVLyqo3aTBNv1d50RL
yi8u5LTZLNtuYiyJsxqTFyq8zNhfEwIPoXbsqHyNuv0hv8s6Qn4OkXh47/crhukO
GpnNNTldvSQIpOfNw+ftCYF/NC0X5pOjJo/Rz1XUkFyms50cqq17i+MWvcAvaFnW
Ols6+7ulh8u61ElafVxnwn1zgitkpUOOsnF8a27iXryFJ/iZFFROnCigJv2eM8pj
SqcwKbVp9h1VtztoYhtEcjEPBm1NnrYGoRIjh9D3RQfEVnXgM2fU4HoGhFAqYj7M
wFZv0DZBvL2s/XwV8PEi4Y4+fTJZTXE7bbHctMWjUWjhlMfMniq2oud4hZJ5ugY=
=MDAq
-----END PGP SIGNATURE-----



From exarkun at twistedmatrix.com  Mon May 13 06:25:48 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 13 May 2013 12:25:48 -0000
Subject: [Twisted-Python] Twisted Web documentation out of date
In-Reply-To: <B1367445-076E-4BAF-A669-10F2F8247733@ox.cx>
References: <51877E88.4050409@jaury.eu>
	<CAOp9P3pZf+=Nbv93PdRyspH19jhgAfyPyM3N7eot0+P8mzNueA@mail.gmail.com>
	<CAJQX3DygbgpdfJ8UHjf+RdbSWpYLAUgGVis3wPXNqcs4J9kh9Q@mail.gmail.com>
	<98854139-0CAC-4D5E-A6C6-DDCE140B0A62@twistedmatrix.com>
	<CAJQX3DyvqmiO0d9ideZU-8F09b7D2HjLYR+XUJ5Gs9peJkpg7w@mail.gmail.com>
	<91D8B57F-5A07-46EC-BCD8-392072A658E6@twistedmatrix.com>
	<B1367445-076E-4BAF-A669-10F2F8247733@ox.cx>
Message-ID: <20130513122548.5372.464135425.divmod.xquotient.91@top>

On 11 May, 04:41 pm, hs at ox.cx wrote:
>
>>Twisted reviewers: review tickets!  Tom, the recipient of the 
>>sponsored fellowship, is busy with fixing our infrastructure, so we 
>>really need the community to pitch in.
>>
>>If you're interested in reviewing tickets, please let me know.
>
>I spoke about that to jp already: collecting some *practical* material 
>on proper code review in the wiki would be really beneficiary. I've 
>been pointed to http://mumak.net/stuff/your-code-sucks.html which is a 
>nice start but doesn't one really get started. Maybe a checklist to 
>hold to in the beginning? Pointing out common things to look for…

There are some things listed on:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Far from complete, but maybe it's a start.

Jean-Paul



From z858570636 at gmail.com  Tue May 14 07:40:04 2013
From: z858570636 at gmail.com (yuyan zhang)
Date: Tue, 14 May 2013 21:40:04 +0800
Subject: [Twisted-Python] Twisted-Python Digest, Vol 110, Issue 13
In-Reply-To: <mailman.3.1368460801.18975.twisted-python@twistedmatrix.com>
References: <mailman.3.1368460801.18975.twisted-python@twistedmatrix.com>
Message-ID: <CA+ggLOL537V+fj5Bx56b--+DYTYJWiFk5_h3FfYFjgoPGj0SpA@mail.gmail.com>

can everyone help me,the error is
[root at herry zhangyuyan]# python dns_udp.py
/usr/local/lib/python2.7/site-packages/Twisted-13.0.0-py2.7-linux-x86_64.egg/twisted/names/dns.py:110:
RuntimeWarning: urandom unavailable - proceeding with non-cryptographically
secure random source


2013/5/14 <twisted-python-request at twistedmatrix.com>

> Send Twisted-Python mailing list submissions to
>         twisted-python at twistedmatrix.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> or, via email, send a message with subject or body 'help' to
>         twisted-python-request at twistedmatrix.com
>
> You can reach the person managing the list at
>         twisted-python-owner at twistedmatrix.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Twisted-Python digest..."
>
>
> Today's Topics:
>
>    1. Re: Twisted Web documentation out of date
>       (exarkun at twistedmatrix.com)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 13 May 2013 12:25:48 -0000
> From: exarkun at twistedmatrix.com
> Subject: Re: [Twisted-Python] Twisted Web documentation out of date
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <20130513122548.5372.464135425.divmod.xquotient.91 at top>
> Content-Type: text/plain; charset="utf-8"; format="flowed"
>
> On 11 May, 04:41 pm, hs at ox.cx wrote:
> >
> >>Twisted reviewers: review tickets!  Tom, the recipient of the
> >>sponsored fellowship, is busy with fixing our infrastructure, so we
> >>really need the community to pitch in.
> >>
> >>If you're interested in reviewing tickets, please let me know.
> >
> >I spoke about that to jp already: collecting some *practical* material
> >on proper code review in the wiki would be really beneficiary. I've
> >been pointed to http://mumak.net/stuff/your-code-sucks.html which is a
> >nice start but doesn't one really get started. Maybe a checklist to
> >hold to in the beginning? Pointing out common things to look for?
>
> There are some things listed on:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Far from complete, but maybe it's a start.
>
> Jean-Paul
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest, Vol 110, Issue 13
> ***********************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130514/c1c0c901/attachment.html>

From z858570636 at gmail.com  Tue May 14 07:41:26 2013
From: z858570636 at gmail.com (yuyan zhang)
Date: Tue, 14 May 2013 21:41:26 +0800
Subject: [Twisted-Python] Twisted-Python Digest, Vol 110, Issue 12
In-Reply-To: <mailman.1.1368374401.12698.twisted-python@twistedmatrix.com>
References: <mailman.1.1368374401.12698.twisted-python@twistedmatrix.com>
Message-ID: <CA+ggLOK1Ad8TNY1ZYD-7Z7J1Vzj3ad5srWEhfG9w64isuA7piQ@mail.gmail.com>

can everyone help me,the error is
[root at herry zhangyuyan]# python dns_udp.py
/usr/local/lib/python2.7/site-packages/Twisted-13.0.0-py2.7-linux-x86_64.egg/twisted/names/dns.py:110:
RuntimeWarning: urandom unavailable - proceeding with non-cryptographically
secure random source


2013/5/13 <twisted-python-request at twistedmatrix.com>

> Send Twisted-Python mailing list submissions to
>         twisted-python at twistedmatrix.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> or, via email, send a message with subject or body 'help' to
>         twisted-python-request at twistedmatrix.com
>
> You can reach the person managing the list at
>         twisted-python-owner at twistedmatrix.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Twisted-Python digest..."
>
>
> Today's Topics:
>
>    1. Re: Twisted Web documentation out of date (Hynek Schlawack)
>    2. Weekly Bug Summary (exarkun at twistedmatrix.com)
>    3. txtorcon 0.8.0 (meejah)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sat, 11 May 2013 18:41:24 +0200
> From: Hynek Schlawack <hs at ox.cx>
> Subject: Re: [Twisted-Python] Twisted Web documentation out of date
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <B1367445-076E-4BAF-A669-10F2F8247733 at ox.cx>
> Content-Type: text/plain; charset="utf-8"
>
>
> > Twisted reviewers: review tickets!  Tom, the recipient of the sponsored
> fellowship, is busy with fixing our infrastructure, so we really need the
> community to pitch in.
> >
> > If you're interested in reviewing tickets, please let me know.
>
> I spoke about that to jp already: collecting some *practical* material on
> proper code review in the wiki would be really beneficiary. I've been
> pointed to http://mumak.net/stuff/your-code-sucks.html which is a nice
> start but doesn't one really get started. Maybe a checklist to hold to in
> the beginning? Pointing out common things to look for?
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20130511/7e185712/attachment.html
>
> ------------------------------
>
> Message: 2
> Date: Sun, 12 May 2013 04:05:32 -0000
> From: exarkun at twistedmatrix.com
> Subject: [Twisted-Python] Weekly Bug Summary
> To: twisted-python at twistedmatrix.com
> Message-ID: 1368331532.79.1815539506 at twistedmatrix.com
> Content-Type: text/plain; charset="us-ascii"
>
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20130512/aeb0dca6/attachment-0001.htm
>
> ------------------------------
>
> Message: 3
> Date: Sun, 12 May 2013 10:35:06 +0400
> From: meejah <meejah at meejah.ca>
> Subject: [Twisted-Python] txtorcon 0.8.0
> To: twisted-python at twistedmatrix.com
> Message-ID: <87zjw0n1t1.fsf at atlantis.meejah.ca>
> Content-Type: text/plain; charset=us-ascii
>
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
>
> txtorcon 0.8.0 is now tagged and released. [1]
>
> txtorcon is a Python+Twisted-based asynchronous implementation of the
> Tor control protocol. It includes a state-tracking abstraction,
> configuration abstraction, Twisted endpoint support for hidden
> services, 96%+ unit-test coverage and many examples.
>
> New in this release:
>
>  . issue #18: slight *API change* ICircuitListener.circuit_failed,
>    circuit_closed, IStreamListener.stream_failed, stream_closed and
>    stream_detach all now include any keywords in the notification
>    method (these either lacked flags, or only included some)
>  . launch_tor() can take a timeout (starting with a patch from hellais);
>  . cleanup from aagbsn;
>  . more test coverage;
>  . run tests cleanly without graphviz (from lukaslueg);
>  . issue #26: fix from lukaslueg;
>  . pep8 and whitespace targets plus massive cleanup (now pep8 clean, from
> lukaslueg);
>  . issue #30: fix reported by webmeister making ipaddr actually-optional;
>  . example using synchronous web server (built-in SimpleHTTPServer) with
> txtorcon (from lukaslueg);
>  . TorState can now create circuits without an explicit path;
>  . passwords for non-cookie authenticated sessions now use a password
> callback (that may return a Deferred);
>  . fixes for AddrMap in case Tor ticket #8596 is implemented;
>
> Code and built documentation may be obtained:
>
>    git clone git://github.com/meejah/txtorcon.git
>
>    https://github.com/meejah/txtorcon
>    https://txtorcon.readthedocs.org/en/latest/index.html
>
> You may easily install it:
>
>    pip install txtorcon
>    easy_install txtorcon
>
> The sha256sum output is:
>
> 87fcb3bce3ac3b48583f637bf69445bd50071411dc3fded89df7600d870a3094
>  txtorcon-0.8.0.tar.gz
>
> thanks,
> meejah
>
>
> [1] -- (Note the tagging took place last month, and I've only now
> updated PyPI, ReadTheDocs, freecode, emailed this, ...)
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
>
> iQEcBAEBAgAGBQJRjy+yAAoJEJ0UOBRRgEVQXrMH/0Kl3DmVLyqo3aTBNv1d50RL
> yi8u5LTZLNtuYiyJsxqTFyq8zNhfEwIPoXbsqHyNuv0hv8s6Qn4OkXh47/crhukO
> GpnNNTldvSQIpOfNw+ftCYF/NC0X5pOjJo/Rz1XUkFyms50cqq17i+MWvcAvaFnW
> Ols6+7ulh8u61ElafVxnwn1zgitkpUOOsnF8a27iXryFJ/iZFFROnCigJv2eM8pj
> SqcwKbVp9h1VtztoYhtEcjEPBm1NnrYGoRIjh9D3RQfEVnXgM2fU4HoGhFAqYj7M
> wFZv0DZBvL2s/XwV8PEi4Y4+fTJZTXE7bbHctMWjUWjhlMfMniq2oud4hZJ5ugY=
> =MDAq
> -----END PGP SIGNATURE-----
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest, Vol 110, Issue 12
> ***********************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130514/7a4c70e4/attachment.html>

From z858570636 at gmail.com  Tue May 14 07:41:39 2013
From: z858570636 at gmail.com (yuyan zhang)
Date: Tue, 14 May 2013 21:41:39 +0800
Subject: [Twisted-Python] =?gb2312?b?eXV5YW4gemhhbmcg0fvH68T6v6rJ6CBHb29n?=
	=?gb2312?b?bGUgtefX09PKvP7Vyrun?=
Message-ID: <CA+ggLO+PTa+qEvN5iMM_DdcfA0CtUVm9OwqN0BNZtWk3sOvUUw@mail.gmail.com>

我一直在使用 Gmail，我觉得您不妨也试试。现在邀请您创建帐户。


  您已受邀使用 Gmail！

yuyan zhang已邀请您开通 Gmail 帐户。

Gmail 是由 Google 推出的一项免费的电子邮件服务，其开发理念是：电子邮件可以更加直观、高效且有趣。Gmail 具备以下特点：

 *垃圾邮件更少*
采用 Google 的创新技术防止不受欢迎的邮件进入您的收件箱。

*大容量*
超大存储空间，永远不需要删除其他邮件。

*内置聊天功能*
与yuyan zhang和其他朋友进行实时文字或视频聊天。

*移动访问*
通过手机随时随地收发 Gmail 电子邮件。

您甚至可以从 Yahoo!、Hotmail、AOL 或其他任何网络邮件服务或 POP 帐户导入您的通讯录和电子邮件。

在您创建帐户以后，系统会告知yuyan zhang您的新 Gmail 地址以便你们可以保持联系。
了解详情<http://mail.google.com/mail/help/intl/zh-CN/about.html>
或开始使用<http://mail.google.com/mail/a-ef12cbb304-e9d0a7f3a2-2-DEw3Xrw3KFiSawYhvBsXbW1hI?pc=zh_cn-rf---a>
！
        注册<http://mail.google.com/mail/a-ef12cbb304-e9d0a7f3a2-2-DEw3Xrw3KFiSawYhvBsXbW1hI?pc=zh_cn-rf---a>

Google Inc. | 1600 Ampitheatre Parkway | Mountain View, California 94043
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130514/dd6b051d/attachment.html>

From donal.mcmullan at gmail.com  Wed May 15 03:02:05 2013
From: donal.mcmullan at gmail.com (Donal McMullan)
Date: Wed, 15 May 2013 21:02:05 +1200
Subject: [Twisted-Python] modal dialogs with the qt4reactor?
Message-ID: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>

In a 2006 email, Ed Suominen links to two copies of "a non-blocking
modal dialog, immediately obtaining a deferred to the user's eventual
input."

http://twistedmatrix.com/pipermail/twisted-python/2006-September/014077.html

I'd love to know how to do this, but both sites are unreachable. The
internet giveth and the internet taketh awayeth.

Can anyone help?

Thanks!

Donal



From facundobatista at gmail.com  Wed May 15 07:17:41 2013
From: facundobatista at gmail.com (Facundo Batista)
Date: Wed, 15 May 2013 10:17:41 -0300
Subject: [Twisted-Python] modal dialogs with the qt4reactor?
In-Reply-To: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
Message-ID: <CAM09pzR5iFjBxm0KVT7UjVAJYkcO=Vp3Fd2rSWwNOhaLGvM1sw@mail.gmail.com>

On Wed, May 15, 2013 at 6:02 AM, Donal McMullan
<donal.mcmullan at gmail.com> wrote:

> In a 2006 email, Ed Suominen links to two copies of "a non-blocking
> modal dialog, immediately obtaining a deferred to the user's eventual
> input."

In Encuentro [0] I do a very similar thing (using Qt and qtreactor):

    def interactive(self):
        """Update episodes interactively."""
        dialog = dialogs.UpdateDialog()
        dialog.show()
        self._update(dialog)

The UpdateDialog() is not currently modal, but you can start from here.

The dialog is instantiated, shown, and then in _update() it's filled
with text while it downloads stuff from the server (using Twisted).

Regards,

[0] https://launchpad.net/encuentro , or just do "bzr branch
lp:encuentro" and will have all code in your disk.

--
.    Facundo

Blog: http://www.taniquetil.com.ar/plog/
PyAr: http://www.python.org/ar/
Twitter: @facundobatista



From twisted-python at 2xlp.com  Thu May 16 11:02:41 2013
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Thu, 16 May 2013 13:02:41 -0400
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
Message-ID: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>

Hi,

i'm running a twisted daemon on ubuntu

It seems to get shut down by the system periodically.  Logs show that the kernel (or something) kills it for taking up too much memory.  I definitely have coding issues in there that i'm working on to address this.

Does anyone have a suggestion for tools I can easily use on ubuntu to monitor and restart if needed ?  I haven't had to do something like this in 5 years, and back then it was a hassle to get monit or supervisord working.

thanks

/jonathan


From radix at twistedmatrix.com  Thu May 16 11:31:17 2013
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 16 May 2013 12:31:17 -0500
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
Message-ID: <CAPkRfUREFoRVs0pAWqHAXt7sV=Ov2yRfrcx-kMX54DhctCCxtw@mail.gmail.com>

On Thu, May 16, 2013 at 12:02 PM, Jonathan Vanasco
<twisted-python at 2xlp.com>wrote:

> Hi,
>
> i'm running a twisted daemon on ubuntu
>
> It seems to get shut down by the system periodically.  Logs show that the
> kernel (or something) kills it for taking up too much memory.  I definitely
> have coding issues in there that i'm working on to address this.
>
> Does anyone have a suggestion for tools I can easily use on ubuntu to
> monitor and restart if needed ?  I haven't had to do something like this in
> 5 years, and back then it was a hassle to get monit or supervisord working.
>
>

I like supervisord, for its watchdog functionality as well as log handling.
It's pretty easy to configure. I recommend using twistd --nodaemon (-n)
with it.

-- 
Christopher Armstrong
http://radix.twistedmatrix.com/
http://planet-if.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130516/44b58526/attachment.html>

From justin.venus at gmail.com  Thu May 16 11:34:39 2013
From: justin.venus at gmail.com (Justin Venus)
Date: Thu, 16 May 2013 10:34:39 -0700
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
Message-ID: <CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>

IMO monit is pretty easy to setup and probably your best bet.  However you
could get puppet, chef, or cfengine to start processes for you.  If you are
feeling adventurous, you could set up something like apache mesos to keep
your tasks running.

Justin Venus
On May 16, 2013 10:27 AM, "Jonathan Vanasco" <twisted-python at 2xlp.com>
wrote:

> Hi,
>
> i'm running a twisted daemon on ubuntu
>
> It seems to get shut down by the system periodically.  Logs show that the
> kernel (or something) kills it for taking up too much memory.  I definitely
> have coding issues in there that i'm working on to address this.
>
> Does anyone have a suggestion for tools I can easily use on ubuntu to
> monitor and restart if needed ?  I haven't had to do something like this in
> 5 years, and back then it was a hassle to get monit or supervisord working.
>
> thanks
>
> /jonathan
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130516/762846de/attachment.html>

From kpentap at gmail.com  Thu May 16 11:59:14 2013
From: kpentap at gmail.com (Sai Kalyan Reddy P)
Date: Thu, 16 May 2013 13:59:14 -0400
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
	<CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>
Message-ID: <CAKLDag07JqmGPz0UFOa6VQFsXRbbMUs-kRvX8Avc0qjK+_oVLQ@mail.gmail.com>

I use supervisord and as mentioned has a good log-handling, easy to setup
and use.


On Thu, May 16, 2013 at 1:34 PM, Justin Venus <justin.venus at gmail.com>wrote:

> IMO monit is pretty easy to setup and probably your best bet.  However you
> could get puppet, chef, or cfengine to start processes for you.  If you are
> feeling adventurous, you could set up something like apache mesos to keep
> your tasks running.
>
> Justin Venus
> On May 16, 2013 10:27 AM, "Jonathan Vanasco" <twisted-python at 2xlp.com>
> wrote:
>
>> Hi,
>>
>> i'm running a twisted daemon on ubuntu
>>
>> It seems to get shut down by the system periodically.  Logs show that the
>> kernel (or something) kills it for taking up too much memory.  I definitely
>> have coding issues in there that i'm working on to address this.
>>
>> Does anyone have a suggestion for tools I can easily use on ubuntu to
>> monitor and restart if needed ?  I haven't had to do something like this in
>> 5 years, and back then it was a hassle to get monit or supervisord working.
>>
>> thanks
>>
>> /jonathan
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
Thanks and Regards,
Sai Kalyan Reddy P.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130516/0f955713/attachment.html>

From ldanielburr at me.com  Thu May 16 12:14:38 2013
From: ldanielburr at me.com (Louis D. Burr)
Date: Thu, 16 May 2013 18:14:38 +0000 (GMT)
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <CACL=7at-JJM0n=kB9zdRGJvBy5BMrLaD3JeNdTA4cfx2tFT2Jw@mail.gmail.com>
Message-ID: <4733ab28-9f0f-41b2-9c57-846e4d407157@me.com>



On May 16, 2013, at 12:34 PM, Justin Venus <justin.venus at gmail.com> wrote:

> IMO monit is pretty easy to setup and probably your best bet.  However you could get puppet, chef, or cfengine to start processes for you.  If you are feeling adventurous, you could set up something like apache mesos to keep your tasks running.
>
> Justin Venus
> On May 16, 2013 10:27 AM, "Jonathan Vanasco" <twisted-python at 2xlp.com> wrote:
>
>     Hi,
>
>     i'm running a twisted daemon on ubuntu
>
>     It seems to get shut down by the system periodically.  Logs show that the kernel (or something) kills it for taking up too much memory.  I definitely have coding issues in there that i'm working on to address this.
>
>     Does anyone have a suggestion for tools I can easily use on ubuntu to monitor and restart if needed ?  I haven't had to do something like this in 5 years, and back then it was a hassle to get monit or supervisord working.
>
>     thanks
>
>     /jonathan
>     _______________________________________________
>     Twisted-Python mailing list
>     Twisted-Python at twistedmatrix.com
>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
 

Another simple option is to use twisted's own procmon.ProcessMonitor to launch your twistd daemon.  You can use it "out of the box", or implement your own service based upon it, e.g.,


from twisted.python import usage
from twisted.runner import procmon



class Options(usage.Options):
    synopsis = '[mymonitor options] commandline'

    optParameters = (
        (
            'threshold',
            't',
            1,
            'How many seconds a process has to run before it is considered to have died instantly.',
            float
        ),
        (
            'killtime',
            'k',
            5,
            'How many seconds a process being killed has to get its affairs in order before it gets killed with an unmaskable signal.',
            float
        ),
        (
            'minrestartdelay',
            'm',
            1,
            'The minimum number of seconds to wait before attempting to restart a process.',
            float
        ),
        (
            'maxrestartdelay',
            'M',
            3600,
            'The maximum number of seconds to wait before attempting to restart a process.',
            float
        )
    )

    optFlags = ()


    longdesc = """Blah blah blah"""

    def parseArgs(self, *args):
        """
        Grab the command line that is going to be started and monitored
        """
        self['args'] = args


    def postOptions(self):
        """
        Check for dependencies.
        """
        if len(self['args']) < 1:
            raise usage.UsageError('Please specify a process commandline')


def makeService(config):
    from twisted.internet import reactor

    myMonitorService = procmon.ProcessMonitor(reactor)

    myMonitorService.threshold = config['threshold']
    myMonitorService.killTime = config['killtime']
    myMonitorService.minRestartDelay = config['minrestartdelay']
    myMonitorService.maxRestartDelay = config['maxrestartdelay']
    myMonitorService.addProcess(
        'MyTwistedServiceThatSometimesBlowsUp',
        config['args'],
        uid=None,
        gid=None,
        env={}
    )
    return myMonitorService


Hope this helps,

Daniel﻿
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130516/f63a03ce/attachment.html>

From bino at indoakses-online.com  Fri May 17 01:54:47 2013
From: bino at indoakses-online.com (bino at indoakses-online.com)
Date: Fri, 17 May 2013 14:54:47 +0700
Subject: [Twisted-Python] question : How to listen to USB-HID
Message-ID: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>

Dear All ...

Currently I have a twistd script that listen to arduino dev board.
Arduino recognized as plain usb-serial, so I can do it using LineReceiver
as simple as : --> class ArduinoReceiver(LineReceiver)

And make it SerialService as told by
http://www.mentby.com/lucas-taylor/serialport-protocol-as-a-service.html

But I plan to replace arduino with digispark (
http://digistump.com/products/1 )

Problem is I just realize that this device will recognized as USB-HID

Kindly please give me any enlightenment on how to handle USB-HID device
with twistd ?

Sincerely
-bino-




From screwtape at froup.com  Fri May 17 04:09:39 2013
From: screwtape at froup.com (Tim Allen)
Date: Fri, 17 May 2013 20:09:39 +1000
Subject: [Twisted-Python] question : How to listen to USB-HID
In-Reply-To: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
References: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
Message-ID: <20130517100904.GA8156@boombah.thristian.org>

On Fri, May 17, 2013 at 02:54:47PM +0700, bino at indoakses-online.com wrote:
> But I plan to replace arduino with digispark (
> http://digistump.com/products/1 )
> 
> Problem is I just realize that this device will recognized as USB-HID

From this page:

    http://digistump.com/wiki/digispark/tutorials/linuxtroubleshooting

...it sounds like the device implements the USB serial protocol (because
it mentions 'KERNEL=="ttyACM*"' and 'tty' is what Linux calls a serial
port). However, this page:

    http://digistump.com/wiki/digispark/tutorials/basics

says "The Digispark does not have a hardware serial port nor a hardware
serial to USB converter. An example library (DigiUSB) is provided, as
well as some example code and a serial monitor like program", and the
wiki-page for the DigiUSB driver suggests you can use it to implement
any USB protocol you like, including USB Serial, USB-HID, USB Mass
Storage, etc.

There's no (easy) way to hook a Twisted program up to an arbitrary
USB-HID device; the best you could do would be to write a Twisted
program that communicates with stdin/stdout, then run that program in
a window and remember not to Alt-Tab to another program while your
Digistump is doing stuff.

It sounds like a better solution would be to make sure you use the
DigiUSB library to implement the standard USB Serial protocol and then
continue using your existing code.




From bino at indoakses-online.com  Sat May 18 02:50:58 2013
From: bino at indoakses-online.com (bino at indoakses-online.com)
Date: Sat, 18 May 2013 15:50:58 +0700
Subject: [Twisted-Python] question : How to listen to USB-HID
In-Reply-To: <20130517100904.GA8156@boombah.thristian.org>
References: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
	<20130517100904.GA8156@boombah.thristian.org>
Message-ID: <bb24e3f577a7da974e2785f41ec45fdc.squirrel@localhost>

Dear All
C/Q Tim Allen
I really appreciate your response
> There's no (easy) way to hook a Twisted program up to an arbitrary
> USB-HID device; the best you could do would be to write a Twisted
> program that communicates with stdin/stdout, then run that program in
> a window and remember not to Alt-Tab to another program while your
> Digistump is doing stuff.
>
> It sounds like a better solution would be to make sure you use the
> DigiUSB library to implement the standard USB Serial protocol and then
> continue using your existing code.
>

well ...

There is two clue that I got from digistump forum
1. https://gist.github.com/claws/2464017
I think that is the nearest to twisted , but not the most easy.

2.
https://github.com/digistump/DigisparkExamplePrograms/blob/master/Python/DigiUSB/source/receive.py
With this one I thing I can rout the output to UDP and receive it easily
in twistd

Sincerely
-bino-





From werner at thieprojects.ch  Sat May 18 04:27:15 2013
From: werner at thieprojects.ch (Werner Thie)
Date: Sat, 18 May 2013 12:27:15 +0200
Subject: [Twisted-Python] question : How to listen to USB-HID
In-Reply-To: <bb24e3f577a7da974e2785f41ec45fdc.squirrel@localhost>
References: <cd4f6b1e397456a0c17bb0ca49c0701b.squirrel@localhost>
	<20130517100904.GA8156@boombah.thristian.org>
	<bb24e3f577a7da974e2785f41ec45fdc.squirrel@localhost>
Message-ID: <51975783.6000103@thieprojects.ch>

Hi

Maybe you get some clues about twisted with USB/serial stuff from

http://code.google.com/p/pywws/source/browse/trunk/pywws/WeatherStation.py?r=504

which is a twistification of the pywws weather station code.

HTH, Werner

On 5/18/13 10:50 AM, bino at indoakses-online.com wrote:
> Dear All
> C/Q Tim Allen
> I really appreciate your response
>> There's no (easy) way to hook a Twisted program up to an arbitrary
>> USB-HID device; the best you could do would be to write a Twisted
>> program that communicates with stdin/stdout, then run that program in
>> a window and remember not to Alt-Tab to another program while your
>> Digistump is doing stuff.
>>
>> It sounds like a better solution would be to make sure you use the
>> DigiUSB library to implement the standard USB Serial protocol and then
>> continue using your existing code.
>>
>
> well ...
>
> There is two clue that I got from digistump forum
> 1. https://gist.github.com/claws/2464017
> I think that is the nearest to twisted , but not the most easy.
>
> 2.
> https://github.com/digistump/DigisparkExamplePrograms/blob/master/Python/DigiUSB/source/receive.py
> With this one I thing I can rout the output to UDP and receive it easily
> in twistd
>
> Sincerely
> -bino-
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>




From bernat at luffy.cx  Sat May 18 06:44:21 2013
From: bernat at luffy.cx (Vincent Bernat)
Date: Sat, 18 May 2013 14:44:21 +0200
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com> (Jonathan
	Vanasco's message of "Thu, 16 May 2013 13:02:41 -0400")
References: <CADf-aJEAQ5XUNmJ1tO5i7-f=YbbF=X3Yegp+rLphqyO+MQXRNQ@mail.gmail.com>
	<70E20F39-BF3C-4223-B39C-6366A666AF59@2xlp.com>
Message-ID: <m3mwrsihju.fsf@neo.luffy.cx>

 ❦ 16 mai 2013 19:02 CEST, Jonathan Vanasco <twisted-python at 2xlp.com> :

> i'm running a twisted daemon on ubuntu
>
> It seems to get shut down by the system periodically.  Logs show that
> the kernel (or something) kills it for taking up too much memory.  I
> definitely have coding issues in there that i'm working on to address
> this.
>
> Does anyone have a suggestion for tools I can easily use on ubuntu to
> monitor and restart if needed ?  I haven't had to do something like
> this in 5 years, and back then it was a hassle to get monit or
> supervisord working.

You can just write an upstart job. Upstart will take core of logging (if
you don't already log to syslog), starting and restarting.

description "My daemon"
start on (static-network-up or started networking)
stop on runlevel [06]

respawn
respawn limit 10

console log

exec twistd -n ....
-- 
printk("Cool stuff's happening!\n")
        2.4.3 linux/fs/jffs/intrep.c



From exarkun at twistedmatrix.com  Sat May 18 22:05:26 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 19 May 2013 04:05:26 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1368936326.42.1935757099@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130519/f0e32c03/attachment-0001.html>

From tom.prince at ualberta.net  Sun May 19 11:34:41 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Sun, 19 May 2013 11:34:41 -0600
Subject: [Twisted-Python] Service downtime
Message-ID: <8761ye3mby.fsf@hermes.hocat.ca>

The twisted project has recently acquired a new server, and there will
be some donwtime in the coming week, in order to migrate services to the
new server.

At some point Monday or Tuesday, there will be some downtime for mail
and the mailing lists, as mail-service is migrated to the new
machine. For those that have accounts on cube, your data will be
copied to the new machine at this point.

On Wednesday, at about 10 MDT (16 UTC), there will be downtime of all
twisted services, as live data is transfered over. This may last
up-to a couple of hours.

http://labs.twistedmatrix.com/2013/05/migration-report.html

  Tom Prince



From dwilliams at cernium.com  Mon May 20 15:23:47 2013
From: dwilliams at cernium.com (Dan Williams)
Date: Mon, 20 May 2013 17:23:47 -0400
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
	thread when using adbapi.ConnectionPool
Message-ID: <519A9463.5070201@cernium.com>

...and I don't understand why it is running in the main (reactor)
thread.

I have a twisted.web server that uses adbapi.ConnectionPool to read
and sometimes update a MySQL database with small amounts of data at a
fairly high rate.

It's been stable for quite a while, but is now seeing increasing load
and been hanging a couple of times a day. monit gets triggered when
the web server fails to respond to an HTTP GET health check. SIGTERM
won't terminate it, so I'm using monit to send it SIGABRT.

Examining the core file shows that the main (reactor) thread is
blocking in a read in the mysql client library:

> Program terminated with signal 6, Aborted.
> #0  0x00007f549b341d2d in read () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> (gdb) bt 10
> #0  0x00007f549b341d2d in read () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> #1  0x00007f5497429112 in vio_read_buff () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #2  0x00007f549741b24f in ?? () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #3  0x00007f549741bde8 in my_net_read () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #4  0x00007f54974155ba in cli_safe_read () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #5  0x00007f5497416618 in ?? () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #6  0x00007f5497413f8b in mysql_next_result () from
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18
> #7  0x00007f549792bccc in ?? () from
> /usr/lib/python2.7/dist-packages/_mysql.so
> #8  0x0000000000497ea4 in PyEval_EvalFrameEx ()
> #9  0x0000000000498602 in PyEval_EvalFrameEx ()
> (More stack frames follow...)
> (gdb) bt -10
> #62 0x0000000000498602 in PyEval_EvalFrameEx ()
> #63 0x0000000000498602 in PyEval_EvalFrameEx ()
> #64 0x0000000000498602 in PyEval_EvalFrameEx ()
> #65 0x0000000000498602 in PyEval_EvalFrameEx ()
> #66 0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #67 0x00000000004a9081 in PyRun_FileExFlags ()
> #68 0x00000000004a9311 in PyRun_SimpleFileExFlags ()
> #69 0x00000000004aa8bd in Py_Main ()
> #70 0x00007f549a05976d in __libc_start_main () from
> /lib/x86_64-linux-gnu/libc.so.6
> #71 0x000000000041b9b1 in _start ()
> (gdb)

All of the 10 thread pool threads are sitting waiting on locks:

> (gdb) thread 11
> [Switching to thread 11 (Thread 0x7f54963dd700 (LWP 2691))]
> #0  0x00007f549b340fd0 in sem_wait () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> (gdb) bt 10
> #0  0x00007f549b340fd0 in sem_wait () from
> /lib/x86_64-linux-gnu/libpthread.so.0
> #1  0x0000000000547525 in lock_PyThread_acquire_lock.49023 ()
> #2  0x0000000000497ea4 in PyEval_EvalFrameEx ()
> #3  0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #4  0x00000000004983b8 in PyEval_EvalFrameEx ()
> #5  0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #6  0x00000000004983b8 in PyEval_EvalFrameEx ()
> #7  0x000000000049f1c0 in PyEval_EvalCodeEx ()
> #8  0x00000000004a8a92 in function_call ()
> #9  0x00000000004e9f36 in PyObject_Call ()
> (More stack frames follow...)
> (gdb)

What has me very confused is seeing the MySQL read happening in the
main thread; how can that be?

This is running in AWS EC2 on a pretty busy host but there isn't any
discernible correlation between times of high I/O or CPU usage and the
hangs.

Environment is Ubuntu 12.04.1 LTS, Python 2.7.3, Twisted 11.1.0.

Thanks for any help!

Dan




From glyph at twistedmatrix.com  Mon May 20 16:03:11 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 20 May 2013 15:03:11 -0700
Subject: [Twisted-Python] Recommended daemon monitoring tools for ubuntu
In-Reply-To: <4733ab28-9f0f-41b2-9c57-846e4d407157@me.com>
References: <4733ab28-9f0f-41b2-9c57-846e4d407157@me.com>
Message-ID: <822146FC-9EE0-4598-BE1E-4E894D57F88F@twistedmatrix.com>


On May 16, 2013, at 11:14 AM, Louis D. Burr <ldanielburr at me.com> wrote:

> Another simple option is to use twisted's own procmon.ProcessMonitor to launch your twistd daemon.  You can use it "out of the box", or implement your own service based upon it, e.g.,

To be clear, 'out of the box' here means something like 'twistd procmon twistd -n web'.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130520/23277a46/attachment-0001.html>

From glyph at twistedmatrix.com  Mon May 20 18:13:06 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 20 May 2013 17:13:06 -0700
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
	thread when using adbapi.ConnectionPool
In-Reply-To: <519A9463.5070201@cernium.com>
References: <519A9463.5070201@cernium.com>
Message-ID: <EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>


On May 20, 2013, at 2:23 PM, Dan Williams <dwilliams at cernium.com> wrote:

> Examining the core file shows that the main (reactor) thread is
> blocking in a read in the mysql client library:

I believe that recent versions of GDB have some fanciness that will actually show you Python tracebacks.  Any chance somebody else knows how to invoke that?  It would certainly be very useful to see what Python code lead to this point :).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130520/771b4900/attachment.html>

From dwilliams at cernium.com  Mon May 20 18:47:54 2013
From: dwilliams at cernium.com (Dan Williams)
Date: Mon, 20 May 2013 20:47:54 -0400
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
References: <519A9463.5070201@cernium.com>
	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
Message-ID: <519AC43A.4070107@cernium.com>

The invocation is simply "py-bt", but it only works if symbols are
available, which aren't in my case.

On 5/20/2013 8:13 PM, Glyph wrote:
>
> On May 20, 2013, at 2:23 PM, Dan Williams<dwilliams at cernium.com>
> wrote:
>
>> Examining the core file shows that the main (reactor) thread is
>> blocking in a read in the mysql client library:
>
> I believe that recent versions of GDB have some fanciness that will
> actually show you Python tracebacks.  Any chance somebody else knows
> how to invoke that?  It would certainly be very useful to see what
> Python code lead to this point :).
>
> -glyph
>
>
>
>
>
> _______________________________________________ Twisted-Python
> mailing list Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From p.mayers at imperial.ac.uk  Tue May 21 01:02:56 2013
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 21 May 2013 08:02:56 +0100
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <519AC43A.4070107@cernium.com>
References: <519A9463.5070201@cernium.com>
	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
	<519AC43A.4070107@cernium.com>
Message-ID: <519B1C20.2080704@imperial.ac.uk>

On 05/21/2013 01:47 AM, Dan Williams wrote:
> The invocation is simply "py-bt", but it only works if symbols are
> available, which aren't in my case.

Really, surely Ubuntu LTS has "debug symbol" packages or something? A 
quick google suggests its "packagename-dbg" for stripped symbols.

I meant to reply with this last night: knowing very little about MySQL 
or it's python bindings, is it possible you're returning an object from 
runInteraction that's still "attached" to the DB e.g. a BLOB that 
lazy-loads on references, or something?

In the absence of a python traceback it might be the age-old "add prints 
everywhere and see where it stops" dance...



From p.mayers at imperial.ac.uk  Tue May 21 01:07:21 2013
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 21 May 2013 08:07:21 +0100
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <519B1C20.2080704@imperial.ac.uk>
References: <519A9463.5070201@cernium.com>
	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>
	<519AC43A.4070107@cernium.com> <519B1C20.2080704@imperial.ac.uk>
Message-ID: <519B1D29.7010209@imperial.ac.uk>

On 05/21/2013 08:02 AM, Phil Mayers wrote:
> or it's python

its/it's agh. It's early for me...



From dwilliams at cernium.com  Tue May 21 08:09:46 2013
From: dwilliams at cernium.com (Dan Williams)
Date: Tue, 21 May 2013 10:09:46 -0400
Subject: [Twisted-Python] twisted server blocking on MySQL read in main
 thread when using adbapi.ConnectionPool
In-Reply-To: <519B1C20.2080704@imperial.ac.uk>
References: <519A9463.5070201@cernium.com>	<EF6845BD-6DC5-4E3F-8CED-DCCB4F3A4DDE@twistedmatrix.com>	<519AC43A.4070107@cernium.com>
	<519B1C20.2080704@imperial.ac.uk>
Message-ID: <519B802A.2030404@cernium.com>

On 5/21/2013 3:02 AM, Phil Mayers wrote:
> On 05/21/2013 01:47 AM, Dan Williams wrote:
>> The invocation is simply "py-bt", but it only works if symbols are
>> available, which aren't in my case.
>
> Really, surely Ubuntu LTS has "debug symbol" packages or something? A
> quick google suggests its "packagename-dbg" for stripped symbols.
>
I installed the matching python-dbg package for my system early on.
Despite that, and this message from gdb:

> Reading symbols from /usr/bin/python2.7...Reading symbols from /usr/lib/debug/usr/bin/python2.7...done.

I still don't get symbols printed.

> I meant to reply with this last night: knowing very little about MySQL
> or it's python bindings, is it possible you're returning an object from
> runInteraction that's still "attached" to the DB e.g. a BLOB that
> lazy-loads on references, or something?
>
I looked, but I didn't see anything like that. "fetchall" returns a list
of tuples and "execute" returns nothing.

> In the absence of a python traceback it might be the age-old "add prints
> everywhere and see where it stops" dance...
>
Sadly, you may be right. What I really need to be able to do is
replicate the problem on a non-production host, something which
I haven't been able to do so far.




From adi at roiban.ro  Wed May 22 01:01:32 2013
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 22 May 2013 10:01:32 +0300
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
Message-ID: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>

Hi,



In proto_helpers, StringTransportWithDisconnection is implemented as:

class StringTransportWithDisconnection(StringTransport):
    def loseConnection(self):
        if self.connected:
            self.connected = False
            self.protocol.connectionLost(error.ConnectionDone("Bye."))


In the API, I see that for IProtocol.connectionLost(reason), readon
should be a Failure and not an Exception.

http://twistedmatrix.com/documents/13.0.0/api/twisted.internet.interfaces.IProtocol.html#connectionLost

------

Also checking some real code in protocols.ftp shows that reason should
be a Failure, as it uses reason.check() method.

https://github.com/twisted/twisted/blob/trunk/twisted/protocols/ftp.py#L2269

------


Is this a bug in the current implementation of
StringTransportWithDisconnection?

Many thanks,
-- 
Adi Roiban



From glyph at twistedmatrix.com  Wed May 22 03:20:01 2013
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 22 May 2013 02:20:01 -0700
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
Message-ID: <AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>


On May 22, 2013, at 12:01 AM, Adi Roiban <adi at roiban.ro> wrote:

> Is this a bug in the current implementation of
> StringTransportWithDisconnection?

Yes.  Good catch.  Please look to see if the ticket has already been filed, and if not, file one (ideally with a patch!)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130522/4f653d39/attachment-0001.html>

From adi at roiban.ro  Wed May 22 05:47:51 2013
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 22 May 2013 14:47:51 +0300
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
	<AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
Message-ID: <CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>

On 22 May 2013 12:20, Glyph <glyph at twistedmatrix.com> wrote:
>
> On May 22, 2013, at 12:01 AM, Adi Roiban <adi at roiban.ro> wrote:
>
> Is this a bug in the current implementation of
> StringTransportWithDisconnection?
>
>
> Yes.  Good catch.  Please look to see if the ticket has already been filed,
> and if not, file one (ideally with a patch!)

Thanks. Did that. http://twistedmatrix.com/trac/ticket/6521

I have a test which always fails when running `trial twisted.test` but
pass if executed as an individual tests.... this is due to a failure
which is only raised at garbage collection.

Any help in how to catch this side effect is much appreciated.

Thanks!
-- 
Adi Roiban



From _ at lvh.io  Wed May 22 06:12:17 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Wed, 22 May 2013 14:12:17 +0200
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
	<AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
	<CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>
Message-ID: <CAE_Hg6YkVs5ktYNXwP1bv6L1q4ugObQR0Cby7HfjUin7U_kS5A@mail.gmail.com>

On Wed, May 22, 2013 at 1:47 PM, Adi Roiban <adi at roiban.ro> wrote:

> Thanks. Did that. http://twistedmatrix.com/trac/ticket/6521
>

Awesome, thank you :)


> I have a test which always fails when running `trial twisted.test` but
> pass if executed as an individual tests.... this is due to a failure
> which is only raised at garbage collection.
>

Wait, related to this problem? I would expect the test to just try and use
the thing that comes out as a Failure, and check that it's of the
appropriate type... I don't understand how GC comes in to play. Could you
provide said test?

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130522/c6782a71/attachment.html>

From adi at roiban.ro  Wed May 22 06:43:14 2013
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 22 May 2013 15:43:14 +0300
Subject: [Twisted-Python]
	t.test.proto_helpers.StringTransportWithDisconnection.connectionLost
In-Reply-To: <CAE_Hg6YkVs5ktYNXwP1bv6L1q4ugObQR0Cby7HfjUin7U_kS5A@mail.gmail.com>
References: <CAFycZ9cfHQTUqkPR+_L-=Cysx4fxBaVZ0-MQUQFoK8Ox=e76og@mail.gmail.com>
	<AEAEA2A3-FCE4-4CB1-9206-59DEB8E22630@twistedmatrix.com>
	<CAFycZ9dks4OKknrBpZRSQ72CojFeujs+VqB5XM5bpOUVZJLZcA@mail.gmail.com>
	<CAE_Hg6YkVs5ktYNXwP1bv6L1q4ugObQR0Cby7HfjUin7U_kS5A@mail.gmail.com>
Message-ID: <CAFycZ9eO_OYpMPn1k6hkENE0tpNP3POUM6kcHzGGjNTPTTREVw@mail.gmail.com>

[snip]

>> I have a test which always fails when running `trial twisted.test` but
>> pass if executed as an individual tests.... this is due to a failure
>> which is only raised at garbage collection.
>
>
> Wait, related to this problem? I would expect the test to just try and use
> the thing that comes out as a Failure, and check that it's of the
> appropriate type... I don't understand how GC comes in to play. Could you
> provide said test?
>

I remember reading somewhere (maybe official documentation) that
unhandled deferred which have a failure as a result are only logged at
reactor shutdown or when some garbage collection process take place.
I thought that this is the reason why the tests is failing.

I have added the details of the test in the ticket.

Thanks for the commment!
-- 
Adi Roiban



From thecreator232 at gmail.com  Thu May 23 01:46:43 2013
From: thecreator232 at gmail.com (abhishek unnikrishnan)
Date: Thu, 23 May 2013 13:16:43 +0530
Subject: [Twisted-Python] How does Twisted handle multiple request at the
	same time ?
Message-ID: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>

hi guys

i'm new to twisted and asynchronous programming . i have created a rpc
server using twisted and xmlrpc packages . i wanted to know what will
happen if two or more clients give an rpc call at the same time. how will
the server handle this situation.

and also wanted to know is there a way for the server to call the client in
an rpc scenario .

thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130523/12de479a/attachment-0001.html>

From _ at lvh.io  Thu May 23 02:33:07 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Thu, 23 May 2013 10:33:07 +0200
Subject: [Twisted-Python] How does Twisted handle multiple request at
 the same time ?
In-Reply-To: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>
References: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>
Message-ID: <CAE_Hg6bxYUViYvsAbcOCrX8XMPdS8mfYSr7FtjGV2-eYfFPFgw@mail.gmail.com>

On Thu, May 23, 2013 at 9:46 AM, abhishek unnikrishnan <
thecreator232 at gmail.com> wrote:

> hi guys
>

Hi Abhishek!


> i'm new to twisted and asynchronous programming . i have created a rpc
> server using twisted and xmlrpc packages . i wanted to know what will
> happen if two or more clients give an rpc call at the same time. how will
> the server handle this situation.
>

The tricky part is in the "at the same time". Twisted's reactor thread only
does one thing at a time, and that's okay: both connections get accepted
and some data gets read from them (and eventually written to them). The
important part is that you do these things non-blockingly (or,
synonymously, asynchronously): it's okay to only do one thing at a time as
long as each thing you do takes very little time. The second connection
doesn't have to wait long before the connection gets opened and data gets
read, because the operations that happen before it don't take long.

This pattern repeats throughout asynchronous programming: it's okay to only
decode one bit of JSON at a time, as long as doing that doesn't take a long
time (i.e. block), preventing anything else from happening in the immediate
future.

Does that clarify things?

and also wanted to know is there a way for the server to call the client in
> an rpc scenario .
>

That depends on your RPC protocol. Many allow this (often called peer to
peer), many are explicitly client-server and only allow one-way calls. Even
protocols that do support full-duplex communication don't necessarily have
clients that can take method calls very often.

AMP, my personal favorite, explicitly supports two-way RPC. It comes with
twisted, and you can read about it here: http://amp-protocol.net/

Alternatively, I think JSON-RPC is full-duplex too.


cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130523/90460b61/attachment.html>

From thecreator232 at gmail.com  Thu May 23 02:54:35 2013
From: thecreator232 at gmail.com (abhishek unnikrishnan)
Date: Thu, 23 May 2013 14:24:35 +0530
Subject: [Twisted-Python] How does Twisted handle multiple request at
 the same time ?
In-Reply-To: <CAE_Hg6bxYUViYvsAbcOCrX8XMPdS8mfYSr7FtjGV2-eYfFPFgw@mail.gmail.com>
References: <CAKtGXPsvukaD1QXD9S0aw8zUKOF8ewrhRG1MLZQu22OkP04wag@mail.gmail.com>
	<CAE_Hg6bxYUViYvsAbcOCrX8XMPdS8mfYSr7FtjGV2-eYfFPFgw@mail.gmail.com>
Message-ID: <CAKtGXPtcTf=aVGqLVc2ZrB5QD9ErexhTe7iRQQW_sNga4SyzUQ@mail.gmail.com>

thank you Laurens Van Houtven.  This was helpful and i am moving onto
json-rpc for my projcet


On Thu, May 23, 2013 at 2:03 PM, Laurens Van Houtven <_ at lvh.io> wrote:

> On Thu, May 23, 2013 at 9:46 AM, abhishek unnikrishnan <
> thecreator232 at gmail.com> wrote:
>
>> hi guys
>>
>
> Hi Abhishek!
>
>
>> i'm new to twisted and asynchronous programming . i have created a rpc
>> server using twisted and xmlrpc packages . i wanted to know what will
>> happen if two or more clients give an rpc call at the same time. how will
>> the server handle this situation.
>>
>
> The tricky part is in the "at the same time". Twisted's reactor thread
> only does one thing at a time, and that's okay: both connections get
> accepted and some data gets read from them (and eventually written to
> them). The important part is that you do these things non-blockingly (or,
> synonymously, asynchronously): it's okay to only do one thing at a time as
> long as each thing you do takes very little time. The second connection
> doesn't have to wait long before the connection gets opened and data gets
> read, because the operations that happen before it don't take long.
>
> This pattern repeats throughout asynchronous programming: it's okay to
> only decode one bit of JSON at a time, as long as doing that doesn't take a
> long time (i.e. block), preventing anything else from happening in the
> immediate future.
>
> Does that clarify things?
>
> and also wanted to know is there a way for the server to call the client
>> in an rpc scenario .
>>
>
> That depends on your RPC protocol. Many allow this (often called peer to
> peer), many are explicitly client-server and only allow one-way calls. Even
> protocols that do support full-duplex communication don't necessarily have
> clients that can take method calls very often.
>
> AMP, my personal favorite, explicitly supports two-way RPC. It comes with
> twisted, and you can read about it here: http://amp-protocol.net/
>
> Alternatively, I think JSON-RPC is full-duplex too.
>
>
> cheers
> lvh
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130523/a6cc6fe3/attachment.html>

From tom.prince at ualberta.net  Thu May 23 20:09:58 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Thu, 23 May 2013 20:09:58 -0600
Subject: [Twisted-Python] Service downtime
In-Reply-To: <8761ye3mby.fsf@hermes.hocat.ca>
References: <8761ye3mby.fsf@hermes.hocat.ca>
Message-ID: <87vc69162x.fsf@hermes.hocat.ca>

Tom Prince <tom.prince at ualberta.net> writes:

> On Wednesday, at about 10 MDT (16 UTC), there will be downtime of all
> twisted services, as live data is transfered over. This may last
> up-to a couple of hours.

Unfortunately, the maintenance window was missed. It will now take place
this coming Monday, at about 10 MDT (16 UTC).

  Tom



From itamar at futurefoundries.com  Fri May 24 07:51:23 2013
From: itamar at futurefoundries.com (Itamar Turner-Trauring)
Date: Fri, 24 May 2013 09:51:23 -0400
Subject: [Twisted-Python] Announcing Crochet 0.7: Easily use Twisted from
	threaded applications
Message-ID: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>

Crochet is an MIT-licensed library that makes it easier for threaded
applications like Flask or Django to use the Twisted networking framework.
Features include:

   - Runs Twisted's reactor in a thread it manages.
   - Hooks up Twisted's log system to the Python standard library
loggingframework. Unlike Twisted's built-in
   logging bridge, this includes support for blocking Handler instances.
   - Provides a blocking API to eventual results (i.e. Deferred instances).

This release includes better documentation and API improvements, as well as
better error reporting.

Here is a simple example of using Crochet:

import sys
from twisted.web.client import getPagefrom crochet import setup,
run_in_reactorcrochet.setup()
@run_in_reactordef download_page(url):
    return getPage(url)
result = download_page(sys.argv[1])# wait() returns the result when it
becomes available:print result.wait()


You can see more examples, read the documentation, and download the package
at:

https://pypi.python.org/pypi/crochet

-- 
Itamar Turner-Trauring, Future Foundries LLC
http://futurefoundries.com/ — Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130524/8f0ca38c/attachment-0001.html>

From dave at krondo.com  Fri May 24 09:16:52 2013
From: dave at krondo.com (Dave Peticolas)
Date: Fri, 24 May 2013 08:16:52 -0700
Subject: [Twisted-Python] Announcing Crochet 0.7: Easily use Twisted
 from threaded applications
In-Reply-To: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
References: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
Message-ID: <CAPRbp05zVjxivVJJzWoX8fqQXOGokvBGQ+W6qx0i-OQWBTMOmA@mail.gmail.com>

2013/5/24 Itamar Turner-Trauring <itamar at futurefoundries.com>

> Crochet is an MIT-licensed library that makes it easier for threaded
> applications like Flask or Django to use the Twisted networking framework.
> Features include:
>
>    - Runs Twisted's reactor in a thread it manages.
>    - Hooks up Twisted's log system to the Python standard library loggingframework. Unlike Twisted's built-in
>    logging bridge, this includes support for blocking Handler instances.
>    - Provides a blocking API to eventual results (i.e. Deferredinstances).
>
> This release includes better documentation and API improvements, as well
> as better error reporting.
>
> Here is a simple example of using Crochet:
>
> import sys
> from twisted.web.client import getPagefrom crochet import setup, run_in_reactorcrochet.setup()
> @run_in_reactordef download_page(url):
>     return getPage(url)
> result = download_page(sys.argv[1])# wait() returns the result when it becomes available:print result.wait()
>
>
> You can see more examples, read the documentation, and download the
> package at:
>
> https://pypi.python.org/pypi/crochet
>


Awesome awesome awesome awesome.

Also, awesome.

-- 
--Dave Peticolas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130524/a5ea006f/attachment.html>

From dynamicgl at gmail.com  Fri May 24 10:21:42 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Sat, 25 May 2013 00:21:42 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
Message-ID: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>

Hi All

    I am quite concerned about these two tickets due to recently I may port
one of my systems to Ubuntu.

   By reading these comments, It looks like recent version of twisted may
suffer from this problem. So what version of twisted should  I use? Do I
need to keep using 10.1?

  I always use the latest version on windows.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130525/84ba12a0/attachment-0001.html>

From exarkun at twistedmatrix.com  Fri May 24 13:22:10 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 24 May 2013 19:22:10 -0000
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
Message-ID: <20130524192210.2432.907760656.divmod.xquotient.16@top>

On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets 
(I think you meant #6373 rather than #6378, by the way) - which is 
exactly why I'm replying.

Twisted development doesn't take place in secret.  The issue tracker 
should always reflect the latest state of the development process.  If 
an issue has had no comments and a branch no commits for a couple 
months, then it's almost certainly because no one has worked on the 
issue for a couple months.

So you generally don't need to ask if there has been any progress, 
because progress will always be reflected in ticket history or in 
version control.
>    I am quite concerned about these two tickets due to recently I may 
>port
>one of my systems to Ubuntu.

Perhaps you can help out with the tickets, then!  As hopefully you've 
noticed, one of them is currently up for review.  This means a developer 
believes a fix for the problem has been created and is just waiting for 
someone else to look it over and agree that it should be applied to 
trunk.  If this happens, then the fix will be available in the next 
release of Twisted, 13.1.0, which will probably happen in just a few 
weeks.

For more details about how the review process works, please take a look 
at this wiki page:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
>   By reading these comments, It looks like recent version of twisted 
>may
>suffer from this problem. So what version of twisted should  I use? Do 
>I
>need to keep using 10.1?
>
>  I always use the latest version on windows.
>
>Regards
>
>gelin yan



From kevin.horn at gmail.com  Sat May 25 08:47:14 2013
From: kevin.horn at gmail.com (Kevin Horn)
Date: Sat, 25 May 2013 09:47:14 -0500
Subject: [Twisted-Python] Announcing Crochet 0.7: Easily use Twisted
 from threaded applications
In-Reply-To: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
References: <CAOp9P3rVFngpPoVUzhKqt9aF5sTx1G=_-n1D8x1PHT1TPXAf6w@mail.gmail.com>
Message-ID: <CA+U=zK0SeUArvL+1iQq+dcnanqnxOXwRTPCQLF_B7zBuwBChEw@mail.gmail.com>

Truly fantastic!  Thanks for this.


On Fri, May 24, 2013 at 8:51 AM, Itamar Turner-Trauring <
itamar at futurefoundries.com> wrote:

> Crochet is an MIT-licensed library that makes it easier for threaded
> applications like Flask or Django to use the Twisted networking framework.
> Features include:
>
>    - Runs Twisted's reactor in a thread it manages.
>    - Hooks up Twisted's log system to the Python standard library loggingframework. Unlike Twisted's built-in
>    logging bridge, this includes support for blocking Handler instances.
>    - Provides a blocking API to eventual results (i.e. Deferredinstances).
>
> This release includes better documentation and API improvements, as well
> as better error reporting.
>
> Here is a simple example of using Crochet:
>
> import sys
> from twisted.web.client import getPagefrom crochet import setup, run_in_reactorcrochet.setup()
> @run_in_reactordef download_page(url):
>     return getPage(url)
> result = download_page(sys.argv[1])# wait() returns the result when it becomes available:print result.wait()
>
>
> You can see more examples, read the documentation, and download the
> package at:
>
> https://pypi.python.org/pypi/crochet
>
> --
> Itamar Turner-Trauring, Future Foundries LLC
> http://futurefoundries.com/ — Twisted consulting, training and support.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130525/b5511ecc/attachment.html>

From dynamicgl at gmail.com  Sat May 25 08:50:50 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Sat, 25 May 2013 22:50:50 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <20130524192210.2432.907760656.divmod.xquotient.16@top>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
Message-ID: <CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>

On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:

> On 04:21 pm, dynamicgl at gmail.com wrote:
> >Hi All
>
> Hi Gelin,
>
> I don't have anything extra to add about the status of those two tickets
> (I think you meant #6373 rather than #6378, by the way) - which is
> exactly why I'm replying.
>
> Twisted development doesn't take place in secret.  The issue tracker
> should always reflect the latest state of the development process.  If
> an issue has had no comments and a branch no commits for a couple
> months, then it's almost certainly because no one has worked on the
> issue for a couple months.
>
> So you generally don't need to ask if there has been any progress,
> because progress will always be reflected in ticket history or in
> version control.
> >    I am quite concerned about these two tickets due to recently I may
> >port
> >one of my systems to Ubuntu.
>
> Perhaps you can help out with the tickets, then!  As hopefully you've
> noticed, one of them is currently up for review.  This means a developer
> believes a fix for the problem has been created and is just waiting for
> someone else to look it over and agree that it should be applied to
> trunk.  If this happens, then the fix will be available in the next
> release of Twisted, 13.1.0, which will probably happen in just a few
> weeks.
>
> For more details about how the review process works, please take a look
> at this wiki page:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Jean-Paul
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> >
> >  I always use the latest version on windows.
> >
> >Regards
> >
> >gelin yan
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


Hi exarkun

    I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending?

   I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

   By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well.  Thanks

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130525/0fd4b808/attachment.html>

From donald at stufft.io  Sat May 25 11:11:02 2013
From: donald at stufft.io (Donald Stufft)
Date: Sat, 25 May 2013 13:11:02 -0400
Subject: [Twisted-Python] Twisted on PyPI
Message-ID: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>

Hey there!

Recently there has been a lot of work around packaging in Python. On my end of things I've been trying to clean up PyPI. Recently I've deployed a change that ensures that all *new* package names on PyPI conform to a strict set of rules. These rules are:

    - Must begin and end with an ASCII alphanumeric
    - Must contain only ASCII letters, digits, underscores, hyphens, and periods

Now we are left with about 235 total projects out of ~31k who do not conform to these guidelines. Out of those 235 projects Twisted is one of the major ones (Not Twisted itself, but Twisted Web, Twisted Core, etc).

Now the plan that we've come up with is to migrate any name that the only invalid characters are internal whitespace by replacing the whitespace with a -. This would Make Twisted Web Twisted-Web. This reflects already what is required to install Twisted Web via pip or easy_install.

So I'm emailing you all to warn you about this upcoming change since Twisted is one of the major projects affected and also to see if the Twisted developers would prefer a different rename than Twisted-Web.


-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130525/d46b7bf4/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20130525/d46b7bf4/attachment.sig>

From exarkun at twistedmatrix.com  Sat May 25 22:05:41 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 26 May 2013 04:05:41 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1369541141.84.2092425816@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130526/a3e01b94/attachment.html>

From tom.prince at ualberta.net  Sat May 25 23:45:53 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Sat, 25 May 2013 23:45:53 -0600
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
Message-ID: <87vc66mgz2.fsf@hermes.hocat.ca>

Donald Stufft <donald at stufft.io> writes:

> So I'm emailing you all to warn you about this upcoming change since
> Twisted is one of the major projects affected and also to see if the
> Twisted developers would prefer a different rename than Twisted-Web.

Looking at the project pages on pypi, those don't appear to be
installable anyway. I think that it might make sense to just remove
them, at this point.

  Tom



From termim at gmail.com  Sun May 26 09:26:39 2013
From: termim at gmail.com (Mikhail Terekhov)
Date: Sun, 26 May 2013 11:26:39 -0400
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <87vc66mgz2.fsf@hermes.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
	<87vc66mgz2.fsf@hermes.hocat.ca>
Message-ID: <CALCsMPSQFwsNS76P4qhzKsw5keTX5oYvRjT7-iLyVz8JcHpJcw@mail.gmail.com>

On Sun, May 26, 2013 at 1:45 AM, Tom Prince <tom.prince at ualberta.net> wrote:

> Donald Stufft <donald at stufft.io> writes:
>
> > So I'm emailing you all to warn you about this upcoming change since
> > Twisted is one of the major projects affected and also to see if the
> > Twisted developers would prefer a different rename than Twisted-Web.
>
> Looking at the project pages on pypi, those don't appear to be
> installable anyway. I think that it might make sense to just remove
> them, at this point.
>

+1

-- 
Mikhail Terekhov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130526/3dd32e54/attachment.html>

From donald at stufft.io  Sun May 26 10:07:34 2013
From: donald at stufft.io (Donald Stufft)
Date: Sun, 26 May 2013 12:07:34 -0400
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <87vc66mgz2.fsf@hermes.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
	<87vc66mgz2.fsf@hermes.hocat.ca>
Message-ID: <94CAC1C1-72FA-4F69-875E-9A6563A05243@stufft.io>


On May 26, 2013, at 1:45 AM, Tom Prince <tom.prince at ualberta.net> wrote:

> Donald Stufft <donald at stufft.io> writes:
> 
>> So I'm emailing you all to warn you about this upcoming change since
>> Twisted is one of the major projects affected and also to see if the
>> Twisted developers would prefer a different rename than Twisted-Web.
> 
> Looking at the project pages on pypi, those don't appear to be
> installable anyway. I think that it might make sense to just remove
> them, at this point.
> 
>  Tom

Removing them is something the owner on PyPI can do if that's what Twisted would prefer to do.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130526/86de76ba/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20130526/86de76ba/attachment.sig>

From tom.prince at ualberta.net  Mon May 27 18:27:36 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Mon, 27 May 2013 18:27:36 -0600
Subject: [Twisted-Python] Service downtime
In-Reply-To: <87vc69162x.fsf@hermes.hocat.ca>
References: <8761ye3mby.fsf@hermes.hocat.ca> <87vc69162x.fsf@hermes.hocat.ca>
Message-ID: <871u8sne2v.fsf@loki.hocat.ca>

>> On Wednesday, at about 10 MDT (16 UTC), there will be downtime of all
>> twisted services, as live data is transfered over. This may last
>> up-to a couple of hours.
>
> Unfortunately, the maintenance window was missed. It will now take place
> this coming Monday, at about 10 MDT (16 UTC).

The migration of trac and related services appears to have completed
successfully. Please report any issues.

Mail and user accounts still need to be migrated, and the web interface
to mailman is thus currently unavailable.

  Tom



From _ at lvh.io  Tue May 28 03:39:01 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Tue, 28 May 2013 11:39:01 +0200
Subject: [Twisted-Python] New registrations to this mailing list broken?
Message-ID: <CAE_Hg6bgOiXV817E9XDJ-RL8UOs4dFu6mbZHk+OSvPAYjHDteg@mail.gmail.com>

Hi,


Sending this hoping that it will in fact make it through ;)

Lynn Root (rougelynn) mentioned a few minutes ago on the IRC channel that
she was unable to join the Twisted mailing list:

09:25 < roguelynn> hey glyph + tomprince - I'm trying to get on the twisted
mailing this but see this error
http://glui.me/?i=7ckizft82fokgnt/2013-05-28_at_11.22.18_AM.png/

The short version of that image (just in case it goes down or something) is
that Mailman is complaining that the CGI app is run with group t-web, and
it was expecting to run as www-data. Solutions include: change the group to
be www-data, or re-run the configuration script with flag
--with-cgi-gid=t-web

Thanks!
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130528/0c65a5a5/attachment.html>

From _ at lvh.io  Tue May 28 03:41:36 2013
From: _ at lvh.io (Laurens Van Houtven)
Date: Tue, 28 May 2013 11:41:36 +0200
Subject: [Twisted-Python] New registrations to this mailing list broken?
In-Reply-To: <CAE_Hg6bgOiXV817E9XDJ-RL8UOs4dFu6mbZHk+OSvPAYjHDteg@mail.gmail.com>
References: <CAE_Hg6bgOiXV817E9XDJ-RL8UOs4dFu6mbZHk+OSvPAYjHDteg@mail.gmail.com>
Message-ID: <CAE_Hg6ZUTf5QnQ6onSF=g+uo6Shq4G8mSHJTMFey2BJOyB+ATQ@mail.gmail.com>

Oops, just read that this is a know issue. My bad :)

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130528/185328f6/attachment.html>

From matusis at yahoo.com  Tue May 28 18:31:55 2013
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 28 May 2013 17:31:55 -0700
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
Message-ID: <032d01ce5c03$ec7a2c10$c56e8430$@com>

>   By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should  I use? Do
>I
>need to keep using 10.1?

This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
        Traceback (most recent call last):
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
            return context.call({ILogContext: newCtx}, func, *args, **kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in callWithContext
            return self.currentContext().callWithContext(ctx, func, *args,
**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in callWithContext
            return func(*args,**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
_doReadOrWrite
            why = selectable.doRead()
        --- <exception caught here> ---
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
            transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
            self.startReading()
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
startReading
            self.reactor.addReader(self)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
addReader
            self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
            self._poller._control(cmd, fd, flags)
          File "_epoll.pyx", line 125, in _epoll.epoll._control
            
        exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret.  The issue tracker
should always reflect the latest state of the development process.  If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
>    I am quite concerned about these two tickets due to recently I may
>port
>one of my systems to Ubuntu.
Perhaps you can help out with the tickets, then!  As hopefully you've
noticed, one of them is currently up for review.  This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk.  If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
>   By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should  I use? Do
>I
>need to keep using 10.1?
>
>  I always use the latest version on windows.
>
>Regards
>
>gelin yan
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


Hi exarkun

    I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending? 

   I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

   By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well.  Thanks

Regards

gelin yan 




From itamar at itamarst.org  Tue May 28 19:06:09 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 28 May 2013 21:06:09 -0400
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <032d01ce5c03$ec7a2c10$c56e8430$@com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
Message-ID: <51A55481.1030202@itamarst.org>

On 05/28/2013 08:31 PM, Alec Matusis wrote:
>>    By reading these comments, It looks like recent version of twisted
>> may
>> suffer from this problem. So what version of twisted should  I use? Do
>> I
>> need to keep using 10.1?
> This problem is very frequent on Linux with Python 2.7 / Twisted 12
> combination (we had to quickly roll back- cannot operate with that combo).
>
A workaround for the problem is available on a branch for 
<https://twistedmatrix.com/trac/ticket/6373>. The remaining work is 
fairly trivial, I just haven't gotten around to it due to lack of free 
time. If you're interested you should (a) test the fix and (b) perhaps 
submit a patch that addresses the remaining review tickets.

-Itamar



From matusis at yahoo.com  Tue May 28 20:37:30 2013
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 28 May 2013 19:37:30 -0700
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
Message-ID: <038701ce5c15$7777eda0$6667c8e0$@com>

Hi Gelin,

> As I know there are two epoll implementations in twisted, one that from
twisted itself and another one comes from standard library since py 2.6.

I was slightly incorrect in my email: the combination where it happens
infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1 as
I wrote).
How can I check whether twisted is using Pythons epoll or its own in this
combination? And how can I switch between epoll implementations in my app?

Alec

From: Gelin Yan [mailto:dynamicgl at gmail.com] 
Sent: Tuesday, May 28, 2013 6:42 PM
To: Alec Matusis
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?


On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
>   By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should  I use? Do
>I
>need to keep using 10.1?
This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
        Traceback (most recent call last):
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
            return context.call({ILogContext: newCtx}, func, *args, **kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in callWithContext
            return self.currentContext().callWithContext(ctx, func, *args,
**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in callWithContext
            return func(*args,**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
_doReadOrWrite
            why = selectable.doRead()
        --- <exception caught here> ---
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
            transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
            self.startReading()
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
startReading
            self.reactor.addReader(self)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
addReader
            self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
            self._poller._control(cmd, fd, flags)
          File "_epoll.pyx", line 125, in _epoll.epoll._control

        exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret.  The issue tracker
should always reflect the latest state of the development process.  If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
>    I am quite concerned about these two tickets due to recently I may
>port
>one of my systems to Ubuntu.
Perhaps you can help out with the tickets, then!  As hopefully you've
noticed, one of them is currently up for review.  This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk.  If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
>   By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should  I use? Do
>I
>need to keep using 10.1?
>
>  I always use the latest version on windows.
>
>Regards
>
>gelin yan
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


Hi exarkun

    I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending? 

   I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

   By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well.  Thanks

Regards

gelin yan 


Hi Alec

   Thanks for your info. As I know there are two epoll implementations in
twisted, one that from twisted itself and another one comes from standard
library since py 2.6. If I was correct, since 10.2, twisted has been used
the standard epoll if applicable. I am curious which one did you use? Have
you tried py 2.7 & epoll from twisted itself?

Regards

gelin yan




From dynamicgl at gmail.com  Tue May 28 22:09:15 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Wed, 29 May 2013 12:09:15 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <038701ce5c15$7777eda0$6667c8e0$@com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
	<038701ce5c15$7777eda0$6667c8e0$@com>
Message-ID: <CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>

On Wed, May 29, 2013 at 10:37 AM, Alec Matusis <matusis at yahoo.com> wrote:

> Hi Gelin,
>
> > As I know there are two epoll implementations in twisted, one that from
> twisted itself and another one comes from standard library since py 2.6.
>
> I was slightly incorrect in my email: the combination where it happens
> infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1
> as
> I wrote).
> How can I check whether twisted is using Python’s epoll or its own in this
> combination? And how can I switch between epoll implementations in my app?
>
> Alec
>
> From: Gelin Yan [mailto:dynamicgl at gmail.com]
> Sent: Tuesday, May 28, 2013 6:42 PM
> To: Alec Matusis
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
> On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> This problem is very frequent on Linux with Python 2.7 / Twisted 12
> combination (we had to quickly roll back- cannot operate with that combo).
>
> It never happened with Python 2.6 / Twisted 10 (as in years).
>
> It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in
> weeks)
>
> Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
> refuses 30% of new connections, spewing this error:
>
> 2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory]
> Unhandled
> Error
>         Traceback (most recent call last):
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
>             return context.call({ILogContext: newCtx}, func, *args, **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in
> callWithContext
>             return self.currentContext().callWithContext(ctx, func, *args,
> **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in
> callWithContext
>             return func(*args,**kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
> _doReadOrWrite
>             why = selectable.doRead()
>         --- <exception caught here> ---
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
>             transport = self.transport(skt, protocol, addr, self, s,
> self.reactor)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
>             self.startReading()
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
> startReading
>             self.reactor.addReader(self)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
> addReader
>             self._add(reader, self._reads, self._writes, self._selectables,
> _epoll.IN, _epoll.OUT)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
>             self._poller._control(cmd, fd, flags)
>           File "_epoll.pyx", line 125, in _epoll.epoll._control
>
>         exceptions.IOError: [Errno 2] No such file or directory
>
>
> If I restart the server, it will be stable for a couple of weeks, until
> some
> event triggers this problem again. We hope that this problem is fixed
> before
> we are really forced to migrate to newer Python, otherwise there's no real
> upgrade path for us using Twisted.
>
> From: twisted-python-bounces at twistedmatrix.com
> [mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
> Sent: Saturday, May 25, 2013 7:51 AM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
>
> On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
> On 04:21 pm, dynamicgl at gmail.com wrote:
> >Hi All
>
> Hi Gelin,
>
> I don't have anything extra to add about the status of those two tickets
> (I think you meant #6373 rather than #6378, by the way) - which is
> exactly why I'm replying.
>
> Twisted development doesn't take place in secret.  The issue tracker
> should always reflect the latest state of the development process.  If
> an issue has had no comments and a branch no commits for a couple
> months, then it's almost certainly because no one has worked on the
> issue for a couple months.
>
> So you generally don't need to ask if there has been any progress,
> because progress will always be reflected in ticket history or in
> version control.
> >    I am quite concerned about these two tickets due to recently I may
> >port
> >one of my systems to Ubuntu.
> Perhaps you can help out with the tickets, then!  As hopefully you've
> noticed, one of them is currently up for review.  This means a developer
> believes a fix for the problem has been created and is just waiting for
> someone else to look it over and agree that it should be applied to
> trunk.  If this happens, then the fix will be available in the next
> release of Twisted, 13.1.0, which will probably happen in just a few
> weeks.
>
> For more details about how the review process works, please take a look
> at this wiki page:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Jean-Paul
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> >
> >  I always use the latest version on windows.
> >
> >Regards
> >
> >gelin yan
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> Hi exarkun
>
>     I noticed "review" tag has been removed for a while so does it imply
> this ticket is still pending?
>
>    I am not quite familiar how epoll works on linux so my help probably can
> be neglected. I event can't sure how to reproduce this bug.
>
>    By the way, Is it possible to use the "old" epoll implementation instead
> of the built in epoll from python with the latest version? It looks like
> this old one works quite well.  Thanks
>
> Regards
>
> gelin yan
>
>
> Hi Alec
>
>    Thanks for your info. As I know there are two epoll implementations in
> twisted, one that from twisted itself and another one comes from standard
> library since py 2.6. If I was correct, since 10.2, twisted has been used
> the standard epoll if applicable. I am curious which one did you use? Have
> you tried py 2.7 & epoll from twisted itself?
>
> Regards
>
> gelin yan
>
>
Hi Alec

  there is a link:
http://twistedmatrix.com/trac/browser/tags/releases/twisted-13.0.0/twisted/internet/epollreactor.py

I strip the related part and paste here:

try:
  from select import epoll
except ImportError:
  from twisted.python import _epoll

in the latest trunk  there is only  from select import epoll.

I am not sure which one you are using. epoll has been available in standard
library since Py 2.6. Twisted has been used its own epoll wrapper for years
until recently.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130529/4578b081/attachment.html>

From matusis at yahoo.com  Tue May 28 23:40:16 2013
From: matusis at yahoo.com (Alec Matusis)
Date: Tue, 28 May 2013 22:40:16 -0700
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>	<20130524192210.2432.907760656.divmod.xquotient.16@top>	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>	<032d01ce5c03$ec7a2c10$c56e8430$@com>	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>	<038701ce5c15$7777eda0$6667c8e0$@com>
	<CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
Message-ID: <03fb01ce5c2f$001c3530$00549f90$@com>

Hi Gelin,

Apparently in the twisted 10.2 / python 2.7 combination in which the bug
occurs only rarely (every couple of weeks) I am still using twisteds epoll:

epollreactor.py:

from twisted.python import _epoll


From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Tuesday, May 28, 2013 9:09 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Wed, May 29, 2013 at 10:37 AM, Alec Matusis <matusis at yahoo.com> wrote:
Hi Gelin,

> As I know there are two epoll implementations in twisted, one that from
twisted itself and another one comes from standard library since py 2.6.
I was slightly incorrect in my email: the combination where it happens
infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1 as
I wrote).
How can I check whether twisted is using Pythons epoll or its own in this
combination? And how can I switch between epoll implementations in my app?

Alec

From: Gelin Yan [mailto:dynamicgl at gmail.com]
Sent: Tuesday, May 28, 2013 6:42 PM
To: Alec Matusis
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?


On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
>   By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should  I use? Do
>I
>need to keep using 10.1?
This problem is very frequent on Linux with Python 2.7 / Twisted 12
combination (we had to quickly roll back- cannot operate with that combo).

It never happened with Python 2.6 / Twisted 10 (as in years).

It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in weeks)

Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
refuses 30% of new connections, spewing this error:

2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory] Unhandled
Error
        Traceback (most recent call last):
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
            return context.call({ILogContext: newCtx}, func, *args, **kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in callWithContext
            return self.currentContext().callWithContext(ctx, func, *args,
**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in callWithContext
            return func(*args,**kw)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
_doReadOrWrite
            why = selectable.doRead()
        --- <exception caught here> ---
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
            transport = self.transport(skt, protocol, addr, self, s,
self.reactor)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
            self.startReading()
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
startReading
            self.reactor.addReader(self)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
addReader
            self._add(reader, self._reads, self._writes, self._selectables,
_epoll.IN, _epoll.OUT)
          File
"/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
            self._poller._control(cmd, fd, flags)
          File "_epoll.pyx", line 125, in _epoll.epoll._control

        exceptions.IOError: [Errno 2] No such file or directory


If I restart the server, it will be stable for a couple of weeks, until some
event triggers this problem again. We hope that this problem is fixed before
we are really forced to migrate to newer Python, otherwise there's no real
upgrade path for us using Twisted.

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
Sent: Saturday, May 25, 2013 7:51 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?



On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
On 04:21 pm, dynamicgl at gmail.com wrote:
>Hi All

Hi Gelin,

I don't have anything extra to add about the status of those two tickets
(I think you meant #6373 rather than #6378, by the way) - which is
exactly why I'm replying.

Twisted development doesn't take place in secret.  The issue tracker
should always reflect the latest state of the development process.  If
an issue has had no comments and a branch no commits for a couple
months, then it's almost certainly because no one has worked on the
issue for a couple months.

So you generally don't need to ask if there has been any progress,
because progress will always be reflected in ticket history or in
version control.
>    I am quite concerned about these two tickets due to recently I may
>port
>one of my systems to Ubuntu.
Perhaps you can help out with the tickets, then!  As hopefully you've
noticed, one of them is currently up for review.  This means a developer
believes a fix for the problem has been created and is just waiting for
someone else to look it over and agree that it should be applied to
trunk.  If this happens, then the fix will be available in the next
release of Twisted, 13.1.0, which will probably happen in just a few
weeks.

For more details about how the review process works, please take a look
at this wiki page:

    http://twistedmatrix.com/trac/wiki/ReviewProcess

Jean-Paul
>   By reading these comments, It looks like recent version of twisted
>may
>suffer from this problem. So what version of twisted should  I use? Do
>I
>need to keep using 10.1?
>
>  I always use the latest version on windows.
>
>Regards
>
>gelin yan
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


Hi exarkun

    I noticed "review" tag has been removed for a while so does it imply
this ticket is still pending? 

   I am not quite familiar how epoll works on linux so my help probably can
be neglected. I event can't sure how to reproduce this bug.

   By the way, Is it possible to use the "old" epoll implementation instead
of the built in epoll from python with the latest version? It looks like
this old one works quite well.  Thanks

Regards

gelin yan 


Hi Alec

   Thanks for your info. As I know there are two epoll implementations in
twisted, one that from twisted itself and another one comes from standard
library since py 2.6. If I was correct, since 10.2, twisted has been used
the standard epoll if applicable. I am curious which one did you use? Have
you tried py 2.7 & epoll from twisted itself?

Regards

gelin yan

Hi Alec

  there is a
link: http://twistedmatrix.com/trac/browser/tags/releases/twisted-13.0.0/twi
sted/internet/epollreactor.py

I strip the related part and paste here:

try:
  from select import epoll
except ImportError:
  from twisted.python import _epoll

in the latest trunk  there is only  from select import epoll.

I am not sure which one you are using. epoll has been available in standard
library since Py 2.6. Twisted has been used its own epoll wrapper for years
until recently.

Regards

gelin yan




From dynamicgl at gmail.com  Wed May 29 00:07:25 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Wed, 29 May 2013 14:07:25 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <51A55481.1030202@itamarst.org>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<51A55481.1030202@itamarst.org>
Message-ID: <CABkOF6QWS5bFU6JZfrcBqPNZ-MrtOpf_uOySoTuhxpt_2=Ddyw@mail.gmail.com>

On Wed, May 29, 2013 at 9:06 AM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> On 05/28/2013 08:31 PM, Alec Matusis wrote:
> >>    By reading these comments, It looks like recent version of twisted
> >> may
> >> suffer from this problem. So what version of twisted should  I use? Do
> >> I
> >> need to keep using 10.1?
> > This problem is very frequent on Linux with Python 2.7 / Twisted 12
> > combination (we had to quickly roll back- cannot operate with that
> combo).
> >
> A workaround for the problem is available on a branch for
> <https://twistedmatrix.com/trac/ticket/6373>. The remaining work is
> fairly trivial, I just haven't gotten around to it due to lack of free
> time. If you're interested you should (a) test the fix and (b) perhaps
> submit a patch that addresses the remaining review tickets.
>
> -Itamar
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


Hi Itamar

   I will give it a try without guarantee due to I am not quite familiar
with epoll itself :)

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130529/3f7cbcee/attachment.html>

From dynamicgl at gmail.com  Wed May 29 02:51:41 2013
From: dynamicgl at gmail.com (Gelin Yan)
Date: Wed, 29 May 2013 16:51:41 +0800
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <03fb01ce5c2f$001c3530$00549f90$@com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
	<038701ce5c15$7777eda0$6667c8e0$@com>
	<CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
	<03fb01ce5c2f$001c3530$00549f90$@com>
Message-ID: <CABkOF6Tfpnz9HH7+kr0VP5mQU6oY_+j3XfJNCGmN7tu60SO5EQ@mail.gmail.com>

On Wed, May 29, 2013 at 1:40 PM, Alec Matusis <matusis at yahoo.com> wrote:

> Hi Gelin,
>
> Apparently in the twisted 10.2 / python 2.7 combination in which the bug
> occurs only rarely (every couple of weeks) I am still using twisted’s
> epoll:
>
> epollreactor.py:
>
> from twisted.python import _epoll
>
>
> From: twisted-python-bounces at twistedmatrix.com
> [mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
> Sent: Tuesday, May 28, 2013 9:09 PM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
>
> On Wed, May 29, 2013 at 10:37 AM, Alec Matusis <matusis at yahoo.com> wrote:
> Hi Gelin,
>
> > As I know there are two epoll implementations in twisted, one that from
> twisted itself and another one comes from standard library since py 2.6.
> I was slightly incorrect in my email: the combination where it happens
> infrequently is actually Twisted 10.2 with python 2.7.3 (not Twisted 10.1
> as
> I wrote).
> How can I check whether twisted is using Python’s epoll or its own in this
> combination? And how can I switch between epoll implementations in my app?
>
> Alec
>
> From: Gelin Yan [mailto:dynamicgl at gmail.com]
> Sent: Tuesday, May 28, 2013 6:42 PM
> To: Alec Matusis
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
> On Wed, May 29, 2013 at 8:31 AM, Alec Matusis <matusis at yahoo.com> wrote:
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> This problem is very frequent on Linux with Python 2.7 / Twisted 12
> combination (we had to quickly roll back- cannot operate with that combo).
>
> It never happened with Python 2.6 / Twisted 10 (as in years).
>
> It happens very infrequently with Python 2.7 / Twisted 10.1 (as 1x in
> weeks)
>
> Right now I have a server in this state on Python 2.7 / Twisted 10.1. It
> refuses 30% of new connections, spewing this error:
>
> 2013-05-28 17:28:25-0700 [twisted.internet.protocol.ServerFactory]
> Unhandled
> Error
>         Traceback (most recent call last):
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/log.py", line 69, in callWithContext
>             return context.call({ILogContext: newCtx}, func, *args, **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 59, in
> callWithContext
>             return self.currentContext().callWithContext(ctx, func, *args,
> **kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/python/context.py", line 37, in
> callWithContext
>             return func(*args,**kw)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 217, in
> _doReadOrWrite
>             why = selectable.doRead()
>         --- <exception caught here> ---
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 938, in doRead
>             transport = self.transport(skt, protocol, addr, self, s,
> self.reactor)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/tcp.py", line 752, in __init__
>             self.startReading()
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/abstract.py", line 365, in
> startReading
>             self.reactor.addReader(self)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 100, in
> addReader
>             self._add(reader, self._reads, self._writes, self._selectables,
> _epoll.IN, _epoll.OUT)
>           File
>
> "/usr/local/encap/Python-2.7.3/lib/python2.7/site-packages/Twisted-10.2.0-py
> 2.7-linux-x86_64.egg/twisted/internet/epollreactor.py", line 88, in _add
>             self._poller._control(cmd, fd, flags)
>           File "_epoll.pyx", line 125, in _epoll.epoll._control
>
>         exceptions.IOError: [Errno 2] No such file or directory
>
>
> If I restart the server, it will be stable for a couple of weeks, until
> some
> event triggers this problem again. We hope that this problem is fixed
> before
> we are really forced to migrate to newer Python, otherwise there's no real
> upgrade path for us using Twisted.
>
> From: twisted-python-bounces at twistedmatrix.com
> [mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Gelin Yan
> Sent: Saturday, May 25, 2013 7:51 AM
> To: Twisted general discussion
> Subject: Re: [Twisted-Python] any progress for Ticket #6346, #6378?
>
>
>
> On Sat, May 25, 2013 at 3:22 AM, <exarkun at twistedmatrix.com> wrote:
> On 04:21 pm, dynamicgl at gmail.com wrote:
> >Hi All
>
> Hi Gelin,
>
> I don't have anything extra to add about the status of those two tickets
> (I think you meant #6373 rather than #6378, by the way) - which is
> exactly why I'm replying.
>
> Twisted development doesn't take place in secret.  The issue tracker
> should always reflect the latest state of the development process.  If
> an issue has had no comments and a branch no commits for a couple
> months, then it's almost certainly because no one has worked on the
> issue for a couple months.
>
> So you generally don't need to ask if there has been any progress,
> because progress will always be reflected in ticket history or in
> version control.
> >    I am quite concerned about these two tickets due to recently I may
> >port
> >one of my systems to Ubuntu.
> Perhaps you can help out with the tickets, then!  As hopefully you've
> noticed, one of them is currently up for review.  This means a developer
> believes a fix for the problem has been created and is just waiting for
> someone else to look it over and agree that it should be applied to
> trunk.  If this happens, then the fix will be available in the next
> release of Twisted, 13.1.0, which will probably happen in just a few
> weeks.
>
> For more details about how the review process works, please take a look
> at this wiki page:
>
>     http://twistedmatrix.com/trac/wiki/ReviewProcess
>
> Jean-Paul
> >   By reading these comments, It looks like recent version of twisted
> >may
> >suffer from this problem. So what version of twisted should  I use? Do
> >I
> >need to keep using 10.1?
> >
> >  I always use the latest version on windows.
> >
> >Regards
> >
> >gelin yan
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> Hi exarkun
>
>     I noticed "review" tag has been removed for a while so does it imply
> this ticket is still pending?
>
>    I am not quite familiar how epoll works on linux so my help probably can
> be neglected. I event can't sure how to reproduce this bug.
>
>    By the way, Is it possible to use the "old" epoll implementation instead
> of the built in epoll from python with the latest version? It looks like
> this old one works quite well.  Thanks
>
> Regards
>
> gelin yan
>
>
> Hi Alec
>
>    Thanks for your info. As I know there are two epoll implementations in
> twisted, one that from twisted itself and another one comes from standard
> library since py 2.6. If I was correct, since 10.2, twisted has been used
> the standard epoll if applicable. I am curious which one did you use? Have
> you tried py 2.7 & epoll from twisted itself?
>
> Regards
>
> gelin yan
>
> Hi Alec
>
>   there is a
> link:
> http://twistedmatrix.com/trac/browser/tags/releases/twisted-13.0.0/twi
> sted/internet/epollreactor.py
>
> I strip the related part and paste here:
>
> try:
>   from select import epoll
> except ImportError:
>   from twisted.python import _epoll
>
> in the latest trunk  there is only  from select import epoll.
>
> I am not sure which one you are using. epoll has been available in standard
> library since Py 2.6. Twisted has been used its own epoll wrapper for years
> until recently.
>
> Regards
>
> gelin yan
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi Alec

   I suggest giving the work around provided by Itamar a try. It might
alleviate your situation.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130529/572f9227/attachment.html>

From itamar at itamarst.org  Wed May 29 05:02:39 2013
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 29 May 2013 07:02:39 -0400
Subject: [Twisted-Python] any progress for Ticket #6346, #6378?
In-Reply-To: <CABkOF6Tfpnz9HH7+kr0VP5mQU6oY_+j3XfJNCGmN7tu60SO5EQ@mail.gmail.com>
References: <CABkOF6T1OXA7t4ZtsEX+0iiuN9d24+UcJy8YSu7YprzfPsf9gA@mail.gmail.com>
	<20130524192210.2432.907760656.divmod.xquotient.16@top>
	<CABkOF6Tbks8JrcSOOmxMKFn3ZRBsWagowwUVQBu9ucVJjU8Dcw@mail.gmail.com>
	<032d01ce5c03$ec7a2c10$c56e8430$@com>
	<CABkOF6Q74exRizPL8e6dvZ5aV0XXg4PT16nRHveFZm0v1sZ8YA@mail.gmail.com>
	<038701ce5c15$7777eda0$6667c8e0$@com>
	<CABkOF6QkcmDnrp8ELsJ8-0fSCcry7u0pkrsYDYU9mkufXWVXOQ@mail.gmail.com>
	<03fb01ce5c2f$001c3530$00549f90$@com>
	<CABkOF6Tfpnz9HH7+kr0VP5mQU6oY_+j3XfJNCGmN7tu60SO5EQ@mail.gmail.com>
Message-ID: <51A5E04F.8040500@itamarst.org>

Can you please not quote the whole email in your reply? I have to scroll 
through pages and pages of text to reach the section you wrote. I 
realize GMail hides it by default, but I am not using GMail.

-Itamar



From tom.prince at ualberta.net  Wed May 29 15:24:55 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 29 May 2013 15:24:55 -0600
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <87vc66mgz2.fsf@hermes.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca>
Message-ID: <8761y1mqc8.fsf@loki.hocat.ca>

Tom Prince <tom.prince at ualberta.net> writes:

> Donald Stufft <donald at stufft.io> writes:
>
>> So I'm emailing you all to warn you about this upcoming change since
>> Twisted is one of the major projects affected and also to see if the
>> Twisted developers would prefer a different rename than Twisted-Web.
>
> Looking at the project pages on pypi, those don't appear to be
> installable anyway. I think that it might make sense to just remove
> them, at this point.

There appears to be a consensus to remove them, but I don't have access
to do that.

  Tom



From donald at stufft.io  Wed May 29 15:39:33 2013
From: donald at stufft.io (Donald Stufft)
Date: Wed, 29 May 2013 17:39:33 -0400
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <8761y1mqc8.fsf@loki.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca> <8761y1mqc8.fsf@loki.hocat.ca>
Message-ID: <58249E89-9FAF-4CAA-BB26-6631DE2DB8E0@stufft.io>


On May 29, 2013, at 5:24 PM, Tom Prince <tom.prince at ualberta.net> wrote:

> Tom Prince <tom.prince at ualberta.net> writes:
> 
>> Donald Stufft <donald at stufft.io> writes:
>> 
>>> So I'm emailing you all to warn you about this upcoming change since
>>> Twisted is one of the major projects affected and also to see if the
>>> Twisted developers would prefer a different rename than Twisted-Web.
>> 
>> Looking at the project pages on pypi, those don't appear to be
>> installable anyway. I think that it might make sense to just remove
>> them, at this point.
> 
> There appears to be a consensus to remove them, but I don't have access
> to do that.
> 
>  Tom

I'm not familiar with whose who in Twisted land sorry.

Any of the maintainers listed on the website will be capable of removing them, or if it's desired to have me do it in batch I require someone official like Glyph or so who does have access to request it of me.

-----------------
Donald Stufft
PGP: 0x6E3CBCE93372DCFA // 7C6B 7C5D 5E2B 6356 A926 F04F 6E3C BCE9 3372 DCFA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20130529/5aa35dfb/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 841 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20130529/5aa35dfb/attachment.sig>

From tom.prince at ualberta.net  Wed May 29 16:58:59 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Wed, 29 May 2013 16:58:59 -0600
Subject: [Twisted-Python] Service downtime
In-Reply-To: <871u8sne2v.fsf@loki.hocat.ca>
References: <8761ye3mby.fsf@hermes.hocat.ca> <87vc69162x.fsf@hermes.hocat.ca>
 <871u8sne2v.fsf@loki.hocat.ca>
Message-ID: <87r4gpl7f0.fsf@loki.hocat.ca>

Tom Prince <tom.prince at ualberta.net> writes:

> Mail and user accounts still need to be migrated, and the web interface
> to mailman is thus currently unavailable.

The migration has now been completed.

  Tom



From exarkun at twistedmatrix.com  Thu May 30 06:43:15 2013
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Thu, 30 May 2013 12:43:15 -0000
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <8761y1mqc8.fsf@loki.hocat.ca>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca> <8761y1mqc8.fsf@loki.hocat.ca>
Message-ID: <20130530124315.25989.1090113342.divmod.xquotient.8@top>

On 29 May, 09:24 pm, tom.prince at ualberta.net wrote:
>Tom Prince <tom.prince at ualberta.net> writes:
>>Donald Stufft <donald at stufft.io> writes:
>>>So I'm emailing you all to warn you about this upcoming change since
>>>Twisted is one of the major projects affected and also to see if the
>>>Twisted developers would prefer a different rename than Twisted-Web.
>>
>>Looking at the project pages on pypi, those don't appear to be
>>installable anyway. I think that it might make sense to just remove
>>them, at this point.
>
>There appears to be a consensus to remove them, but I don't have access
>to do that.

What are we removing?  All of the subprojects on PyPI?  If so, the 
release process will need to be adjusted to avoid re-adding them.

What makes them uninstallable?  Wouldn't it make as much sense to just 
fix that?  Is this only a PyPI interaction thing, or is there actually a 
problem with the packages being distributed?

Jean-Paul



From tom.prince at ualberta.net  Fri May 31 14:12:11 2013
From: tom.prince at ualberta.net (Tom Prince)
Date: Fri, 31 May 2013 14:12:11 -0600
Subject: [Twisted-Python] Twisted on PyPI
In-Reply-To: <20130530124315.25989.1090113342.divmod.xquotient.8@top>
References: <83A14CC3-B102-4660-969B-6098CF19D92F@stufft.io>
 <87vc66mgz2.fsf@hermes.hocat.ca> <8761y1mqc8.fsf@loki.hocat.ca>
 <20130530124315.25989.1090113342.divmod.xquotient.8@top>
Message-ID: <87d2s6lxic.fsf@loki.hocat.ca>

exarkun at twistedmatrix.com writes:

>>There appears to be a consensus to remove them, but I don't have access
>>to do that.
>
> What are we removing?  All of the subprojects on PyPI?
Yes.

> If so, the release process will need to be adjusted to avoid re-adding them.
https://twistedmatrix.com/trac/wiki/ReleaseProcess?action=diff&version=164&old_version=163

> What makes them uninstallable?  Wouldn't it make as much sense to just 
> fix that?  Is this only a PyPI interaction thing, or is there actually a 
> problem with the packages being distributed?

It is just that pypi doesn't (didn't, now that they are deleted) have
the necessary metadata to install them. My understanding was that we are
moving in the direction of deemphasizing the split packages. Thus why
they weren't installable from pypi, and are now removed from pypi.

  Tom



From buildbot at twistematrix.com  Fri May 31 11:56:29 2013
From: buildbot at twistematrix.com (Tom Prince)
Date: Fri, 31 May 2013 11:56:29 -0600
Subject: [Twisted-Python] OSX 10.8 buildslave
In-Reply-To: <20130530115933.25989.1720691440.divmod.xquotient.4@top>
References: <87y5b617le.fsf@hermes.hocat.ca> <87fvx5mrmf.fsf@loki.hocat.ca>
 <5E3A89398864414E8EE2CB192E0C965C114C07B86E@EXMBX10.exchhosting.com>
 <87li6xl74m.fsf@loki.hocat.ca>
 <20130530115933.25989.1720691440.divmod.xquotient.4@top>
Message-ID: <87fvx3kp82.fsf@loki.hocat.ca>

Due to circumstances beyond our control, the machine that we have been
using to host the OSX 10.8 buildslave is currently unavailable.

As per policy[1], official support will be dropped for this platform before
the next release, unless a replacement is found.

  Tom

[1] https://twistedmatrix.com/trac/wiki/ContinuousIntegration/FixYourDamnBuildSlave



