<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problem: spawnProcess() never ending when	installSignalHandlers=False
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%3A%20spawnProcess%28%29%20never%20ending%20when%0A%09installSignalHandlers%3DFalse&In-Reply-To=20050611153537.5047.1641691101.divmod.quotient.1023%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014752.html">
   <LINK REL="Next"  HREF="014743.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problem: spawnProcess() never ending when	installSignalHandlers=False</H1>
    <B>Steve Freitas</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%3A%20spawnProcess%28%29%20never%20ending%20when%0A%09installSignalHandlers%3DFalse&In-Reply-To=20050611153537.5047.1641691101.divmod.quotient.1023%40ohm"
       TITLE="[Twisted-Python] Problem: spawnProcess() never ending when	installSignalHandlers=False">sflist at ihonk.com
       </A><BR>
    <I>Sat Feb  3 04:27:53 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="014752.html">[Twisted-Python] Reactor getting stuck in random places on	Windows?
</A></li>
        <LI>Next message: <A HREF="014743.html">[Twisted-Python] Problem: spawnProcess() never ending when	installSignalHandlers=False
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14742">[ date ]</a>
              <a href="thread.html#14742">[ thread ]</a>
              <a href="subject.html#14742">[ subject ]</a>
              <a href="author.html#14742">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>From an old thread[1]:
</I>
On Sat, 2005-06-11 at 11:35 -0400, Jp Calderone wrote:
&gt;<i> On Sat, 11 Jun 2005 11:08:12 -0400, Matt Feifarek &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matt.feifarek at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;On 6/10/05, Itamar Shtull-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; Register the same SIGCHLD handler twisted does in the main thread, that
</I>&gt;<i> &gt;&gt; should work (they need to be reentrancy-safe anyway so the fact it's
</I>&gt;<i> &gt;&gt; called from a different thread is fine). Possibly a more general
</I>&gt;<i> &gt;&gt; solution could be devised for this, anyone have suggestions?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Thanks.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;So this behavior is by design? Again, it DID work before; for the last
</I>&gt;<i> &gt;year or so, I've been using this code in production on a few servers.
</I>&gt;<i> 
</I>&gt;<i> Yep, and always has been.  If it ever worked, it was by accident (I really don't see how it could have, though, so I can't begin to guess what might have changed to stop it).
</I>&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;Perhaps a note could be made in the docs that ProcessProtocol doesn't
</I>&gt;<i> &gt;work in this case.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;This will make it pretty hard to integrate into other worlds. I'm not
</I>&gt;<i> &gt;sure that I can over-ride the signal handling in Webware and register
</I>&gt;<i> &gt;handlers. Other bits of python libraries might be the same way.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I look forward to any &quot;more general solution&quot; that anyone can come up with!
</I>&gt;<i> 
</I>&gt;<i> Here's one:
</I>&gt;<i> 
</I>&gt;<i>   def reapChildren():
</I>&gt;<i>       from twisted.internet import reactor, task
</I>&gt;<i>       t = task.LoopingCall(reactor._handleSigchld, None, None)
</I>&gt;<i>       return t.start(5)
</I>&gt;<i> 
</I>&gt;<i> Of course, it uses a non-public method of reactor (but installSignalHandlers is a non-public argument to reactor.run(), so you're already treading on thin ice :)
</I>
I'm trying to diagnose an intermittent pausing problem on Win32, and
t.i.process is unavailable on that platform, which reapChildren() relies
on. Is there no need for this approach when launching the reactor with
installSignalHandlers=0 on Windows?

Steve

[1]<A HREF="http://twistedmatrix.com/pipermail/twisted-python/2005-June/010692.html">http://twistedmatrix.com/pipermail/twisted-python/2005-June/010692.html</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014752.html">[Twisted-Python] Reactor getting stuck in random places on	Windows?
</A></li>
	<LI>Next message: <A HREF="014743.html">[Twisted-Python] Problem: spawnProcess() never ending when	installSignalHandlers=False
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14742">[ date ]</a>
              <a href="thread.html#14742">[ thread ]</a>
              <a href="subject.html#14742">[ subject ]</a>
              <a href="author.html#14742">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
