<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] LineReceiver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20LineReceiver&In-Reply-To=%3Cc2bc197b0702251526w30f66d20nbd8a35652bd22c5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] LineReceiver</H1>
    <B>Lee Connell</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20LineReceiver&In-Reply-To=%3Cc2bc197b0702251526w30f66d20nbd8a35652bd22c5%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] LineReceiver">lee.a.connell at gmail.com
       </A><BR>
    <I>Sun Feb 25 16:26:33 MST 2007</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47404">[ date ]</a>
              <a href="thread.html#47404">[ thread ]</a>
              <a href="subject.html#47404">[ subject ]</a>
              <a href="author.html#47404">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I am building a basic chat program.  I am using LineReceiver for the
protocol on both the server and the client.  My problem is when i loop
through all the clients in my ServerFactory and choose to send data to the
client with multiple calls to transport.write(data), the client side does
not pick it up in two seperate calls, instead it is received in one
lineReceive. In the server I call transport.write() twice, the client
however receives both calls in one lineReceive instead of two lineRecieve
calls, how can I get lineReceive to be fired for each transported message?

//// CLIENT LINE RECEIVE ////

    def lineReceived(self, line):
        if self.app:
            self.app.addMessage(line)

//// SERVER CONNECTION MADE ////

    def connectionMade(self):
        self.factory.clients.append(self)
        host = self.transport.getPeer().host + &quot;: joined the server.&quot;

        for c in self.factory.clients:
            c.transport.write(host + '\n')
            if self == c:
                c.transport.write(self.getMOTD())   ### getMOTD just returns
some string ###
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20070225/b211bbc3/attachment.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47404">[ date ]</a>
              <a href="thread.html#47404">[ thread ]</a>
              <a href="subject.html#47404">[ subject ]</a>
              <a href="author.html#47404">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
