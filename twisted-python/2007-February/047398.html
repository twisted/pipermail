<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to properly return a dict from adbapi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20properly%20return%20a%20dict%20from%20adbapi&In-Reply-To=%3Cop.tn9k3kor3oj628%40l-daniel-burrs-powerbook-g4-17.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047391.html">
   <LINK REL="Next"  HREF="047399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to properly return a dict from adbapi</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20properly%20return%20a%20dict%20from%20adbapi&In-Reply-To=%3Cop.tn9k3kor3oj628%40l-daniel-burrs-powerbook-g4-17.local%3E"
       TITLE="[Twisted-Python] How to properly return a dict from adbapi">ldanielburr at mac.com
       </A><BR>
    <I>Sat Feb 24 10:48:46 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047391.html">[Twisted-Python] How to properly return a dict from adbapi
</A></li>
        <LI>Next message (by thread): <A HREF="047399.html">[Twisted-Python] How to properly return a dict from adbapi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47398">[ date ]</a>
              <a href="thread.html#47398">[ thread ]</a>
              <a href="subject.html#47398">[ subject ]</a>
              <a href="author.html#47398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 21 Feb 2007 18:12:45 -0600, Einar S. Ids√∏  
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">einar.twisted at norsk-esport.no</A>&gt; wrote:

&gt;<i> Phil: Thank you for your answer. I think I understand now, but the first
</I>&gt;<i>  question below will show if I'm right or way off:
</I>&gt;<i>
</I>&gt;<i> L. Daniel Burr wrote:
</I>&gt;&gt;<i> The MySQLdb adapter has a DictCursor, which subclasses the usual dbapi
</I>&gt;&gt;<i> cursor, and should meet the original poster's needs.
</I>&gt;<i>
</I>&gt;<i> I suppose that when I use adbapi.ConnectionPool('MySQLdb',...), I am
</I>&gt;<i> already using the MySQLdb adapter? It is straightforward to instruct
</I>&gt;<i> MySQLdb to use the DictCursor when programming in straight (i.e.
</I>&gt;<i> non-Twisted) environments, but how do I do the same from Twisted, using
</I>&gt;<i> t.e.a.ConnectionPool?
</I>&gt;<i>
</I>
This is very easy to do, because adbapi.ConnectionPool will pass on
connection-specific parameters to the underlying DBAPI module.

Example (untested):

import MySQLdb
import twisted.enterprise.adbapi as db
import twisted.python.log as log


def onResultSet(resultSet):
     for row in resultSet:
         # Do stuff


pool = db.ConnectionPool(
     MySQLdb,
     host=&quot;my.host.com&quot;,
     port=1234,
     cursorclass=MySQLdb.cursors.DictCursor
)

d = pool.runQuery('SELECT * FROM SomeTable')
d.addErrback(log.err)
d.addCallback(onResultSet)


&gt;<i> Please let a novice Twisted-programmer know if I am completely missing
</I>&gt;<i> the mark here, and I will go back to my cave with my original solution.
</I>&gt;<i> I'm just trying to understand the intricacies of the Twisted APIs and
</I>&gt;<i> lingo/semantics, and doing things right the second time :)
</I>&gt;<i>
</I>
The key thing to understand in this case is that adbapi is just a simple
wrapper around a given DBAPI module, so if you know how to configure
MySQLdb, then configuring adbapi.ConnectionPool is very similar.  Just
pass the same keyword args to ConnectionPool, that you would pass to
MySQLdb, and you're good to go.

&gt;<i> Cheers,
</I>&gt;<i> Einar
</I>&gt;<i>
</I>
Hope this helps,

L. Daniel Burr


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047391.html">[Twisted-Python] How to properly return a dict from adbapi
</A></li>
	<LI>Next message (by thread): <A HREF="047399.html">[Twisted-Python] How to properly return a dict from adbapi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47398">[ date ]</a>
              <a href="thread.html#47398">[ thread ]</a>
              <a href="subject.html#47398">[ subject ]</a>
              <a href="author.html#47398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
