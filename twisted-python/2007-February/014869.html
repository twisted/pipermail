<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] inlineCallbacks: Twisted 2.5's generator-based Deferred microthreads-thingie
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20inlineCallbacks%3A%20Twisted%202.5%27s%20generator-based%0A%20Deferred%20microthreads-thingie&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014865.html">
   <LINK REL="Next"  HREF="014870.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] inlineCallbacks: Twisted 2.5's generator-based Deferred microthreads-thingie</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20inlineCallbacks%3A%20Twisted%202.5%27s%20generator-based%0A%20Deferred%20microthreads-thingie&In-Reply-To="
       TITLE="[Twisted-Python] inlineCallbacks: Twisted 2.5's generator-based Deferred microthreads-thingie">itamar at itamarst.org
       </A><BR>
    <I>Fri Feb 16 17:23:02 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="014865.html">[Twisted-Python] Problem in failure.Failure.__init__
</A></li>
        <LI>Next message: <A HREF="014870.html">[Twisted-Python] Cial1s S0ft Tabs - Super V1agra
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14869">[ date ]</a>
              <a href="thread.html#14869">[ thread ]</a>
              <a href="subject.html#14869">[ subject ]</a>
              <a href="author.html#14869">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Apparently some people are not aware of this new feature in Twisted 2.5
(requires Python 2.5), written by James Knight based on code by Chris
Armstrong. Previous versions of Twisted have deferredGenerator, but the
syntax isn't as nice.

Here's some sample code JP Calderone posted to python-dev recently:

    from twisted.internet import reactor
    from twisted.internet.defer import inlineCallbacks
    from twisted.web.client import getPage

    @inlineCallbacks
    def fetchSequence(...):
        homepage = yield getPage(homepage)
        firstData = yield getPage(anotherPage)
        if someCondition(firstData):
            while:
                secondData = yield getPage(wherever)
                if someOtherCondition(secondData):
                    break
        else:
            ...

Essentially this allows one to &quot;wait&quot; for a Deferred's result. It also
does error handling in the way one would expect: just use try/except
around the yield.

Be *very careful* when using this functionality, as every time you do
&quot;yield&quot; you are doing a context switch. Random other code will have run
for an indeterminate amount of time, possibly changing attributes and
state on objects the generator has references to.

<A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html#inlineCallbacks">http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html#inlineCallbacks</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014865.html">[Twisted-Python] Problem in failure.Failure.__init__
</A></li>
	<LI>Next message: <A HREF="014870.html">[Twisted-Python] Cial1s S0ft Tabs - Super V1agra
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14869">[ date ]</a>
              <a href="thread.html#14869">[ thread ]</a>
              <a href="subject.html#14869">[ subject ]</a>
              <a href="author.html#14869">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
