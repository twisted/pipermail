<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Fast RPC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Fast%20RPC&In-Reply-To=1120665097.8537.28.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010912.html">
   <LINK REL="Next"  HREF="010917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Fast RPC</H1>
    <B>William Waites</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Fast%20RPC&In-Reply-To=1120665097.8537.28.camel%40localhost.localdomain"
       TITLE="[Twisted-Python] Fast RPC">ww at groovy.net
       </A><BR>
    <I>Wed Jul  6 12:11:43 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010912.html">[Twisted-Python] Fast RPC
</A></li>
        <LI>Next message: <A HREF="010917.html">[Twisted-Python] Fast RPC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10914">[ date ]</a>
              <a href="thread.html#10914">[ thread ]</a>
              <a href="subject.html#10914">[ subject ]</a>
              <a href="author.html#10914">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jul 06, 2005 at 11:51:37AM -0400, Itamar Shtull-Trauring wrote:
&gt;<i> On Tue, 2005-07-05 at 23:17 -0400, William Waites wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; reactor.run(installSignalHandlers=False) may fix that.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hmmm. I tried that, but then the reactor stalls. No
</I>&gt;<i> &gt; reactor.callLater's actually seem to get called...
</I>&gt;<i> 
</I>&gt;<i> That's how it's supposed to work: reactor.run() doesn't exit until you
</I>&gt;<i> stop the reactor. You need to setup scheduled calls before running the
</I>&gt;<i> reactor.
</I>
I understand that. I had set up a couple of reactor.callLater's
before calling reactor.run(). They just don't actually seem to
get run.

For actual operation, control passes from a thread in the 
C++ method TelEngine::MessageHandler::received(Message &amp;m)
to a python function softswitch.message(m) which then calls
into the reactor using callFromThread. Bit I'm not quite
there yet, first step was to get the reactor running, which
seems to work with threadedselectreactor.

Incidentally, I am running the standard reactor like so in
the block of code that runs when the Yate module is imported
after it initializes the interpreter:

from threading import Thread
t = Thread(target = reactor.run, kwargs = {'installSignalHandlers' : False})
t.start()

This is necessary because the Yate module's initialization 
method is expected to return. But is this expected to work
in your experience?

Alternatively the Yate module could run the main interpreter in
a separate thread itself that is not expected to return. This
is what the (corresponding) asterisk module does. That might be the
best way, but then it assumes a main-thread function in python
does not return, which is a nuisance if you want to do something
in the python module without using twisted.

-w


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010912.html">[Twisted-Python] Fast RPC
</A></li>
	<LI>Next message: <A HREF="010917.html">[Twisted-Python] Fast RPC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10914">[ date ]</a>
              <a href="thread.html#10914">[ thread ]</a>
              <a href="subject.html#10914">[ subject ]</a>
              <a href="author.html#10914">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
