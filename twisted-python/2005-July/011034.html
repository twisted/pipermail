<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PB waitingForAnswers KeyError
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PB%20waitingForAnswers%20KeyError&In-Reply-To=20050722145647.GW27029%40groovy.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011033.html">
   <LINK REL="Next"  HREF="011035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PB waitingForAnswers KeyError</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PB%20waitingForAnswers%20KeyError&In-Reply-To=20050722145647.GW27029%40groovy.net"
       TITLE="[Twisted-Python] PB waitingForAnswers KeyError">bob at redivi.com
       </A><BR>
    <I>Fri Jul 22 15:19:50 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011033.html">[Twisted-Python] PB waitingForAnswers KeyError
</A></li>
        <LI>Next message: <A HREF="011035.html">[Twisted-Python] PB waitingForAnswers KeyError
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11034">[ date ]</a>
              <a href="thread.html#11034">[ thread ]</a>
              <a href="subject.html#11034">[ subject ]</a>
              <a href="author.html#11034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 22, 2005, at 4:56 AM, William Waites wrote:

&gt;<i> This is with the Twisted Sumo tar, with threadedselectreactor  
</I>&gt;<i> dropped in:
</I>&gt;<i>
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/internet/ 
</I>&gt;<i> threadedselectreactor.py&quot;, line 252, in _doReadOrWrite
</I>&gt;<i>             why = getattr(selectable, method)()
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/internet/ 
</I>&gt;<i> tcp.py&quot;, line 351, in doRead
</I>&gt;<i>             return self.protocol.dataReceived(data)
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/spread/ 
</I>&gt;<i> banana.py&quot;, line 184, in dataReceived
</I>&gt;<i>             gotItem(item)
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/spread/ 
</I>&gt;<i> banana.py&quot;, line 114, in gotItem
</I>&gt;<i>             self.callExpressionReceived(item)
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/spread/ 
</I>&gt;<i> banana.py&quot;, line 81, in callExpressionReceived
</I>&gt;<i>             self.expressionReceived(obj)
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/spread/ 
</I>&gt;<i> pb.py&quot;, line 561, in expressionReceived
</I>&gt;<i>             method(*sexp[1:])
</I>&gt;<i>           File &quot;/usr/lib/python2.3/site-packages/twisted/spread/ 
</I>&gt;<i> pb.py&quot;, line 919, in proto_answer
</I>&gt;<i>             d = self.waitingForAnswers[requestID]
</I>&gt;<i>         exceptions.KeyError: 19
</I>&gt;<i>
</I>&gt;<i> What am I doing to make this happen? I am using a class derived  
</I>&gt;<i> from the threadedselect
</I>&gt;<i> blocking demo. This implementation is attached, and has a blocking  
</I>&gt;<i> run() method and
</I>&gt;<i> a blocking getDeferred() method. It takes interleaved' callbacks  
</I>&gt;<i> and puts them in a
</I>&gt;<i> queue. The run() method takes them out of the queue in a blocking  
</I>&gt;<i> way and calls them.
</I>&gt;<i> getDeferred() makes a threading.Event(), causes a CB to be queued,  
</I>&gt;<i> and then waits
</I>&gt;<i> on the event to return the result. This way there can be many  
</I>&gt;<i> threads using the blocking
</I>&gt;<i> getDeferred(), and many threads that just use the normal twisted  
</I>&gt;<i> stuff.
</I>
I expect that you're using TwistedManager incorrectly.  There doesn't  
appear to be anything wrong with the code you attached, but it also  
doesn't do anything on its own.  The problem is somewhere else.

-bob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011033.html">[Twisted-Python] PB waitingForAnswers KeyError
</A></li>
	<LI>Next message: <A HREF="011035.html">[Twisted-Python] PB waitingForAnswers KeyError
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11034">[ date ]</a>
              <a href="thread.html#11034">[ thread ]</a>
              <a href="subject.html#11034">[ subject ]</a>
              <a href="author.html#11034">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
