<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] communication idioms with Perspective Broker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20communication%20idioms%20with%20Perspective%20Broker&In-Reply-To=%3C20050721121601.89338.qmail%40web33907.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043537.html">
   <LINK REL="Next"  HREF="043538.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] communication idioms with Perspective Broker</H1>
    <B>Antony Kummel</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20communication%20idioms%20with%20Perspective%20Broker&In-Reply-To=%3C20050721121601.89338.qmail%40web33907.mail.mud.yahoo.com%3E"
       TITLE="[Twisted-Python] communication idioms with Perspective Broker">antonykummel at yahoo.com
       </A><BR>
    <I>Thu Jul 21 06:16:01 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043537.html">[Twisted-Python] subclassing and class methods returning deferreds
</A></li>
        <LI>Next message (by thread): <A HREF="043538.html">[Twisted-Python] Re: communication idioms with Perspective Broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43531">[ date ]</a>
              <a href="thread.html#43531">[ thread ]</a>
              <a href="subject.html#43531">[ subject ]</a>
              <a href="author.html#43531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hello,

 

I am using Twisted for a distributed application, and currently I am designing the basic objects of the application that will be transferred from process to process via PB. I ran into some conceptual problems, and I wonder if there are either general solutions (patterns, etc.) or Twisted-specific ones, or general ones already adapted to Twisted, etc.

 

Problems:

 

1. Synchronization of events and state/data changes: I want clients to be able to receive notifications from a server when certain events occur. When such events are related to changes in state or data of the server that are also accessible to the user, I want the clients interface for retrieving the data and getting notified of the event to be coherent.

 

Example of the problem: Lets say I have a server that can be in a state of being associated with a user, and that I want the server both to provide notifications to clients when it becomes associated or disassociated with a user, and to provide an isAssociated method that says if it is currently associated or not. If I provide the isAssociated functionality using a remote method call (with a referenceable), and the notification functionality also using a remote method call from the server to the client, then it is possible, for example, for a client to call twice the isAssociated method, and get a different result, without having received the notification (it may simply have not yet arrived), or also it is possible for the client to call isAssociated,  receive a notification that the state has changed, and only then get the result from the deferred returned by isAssociated, which reflects the state prior to the change.

 

The solution I came up with is to always expose associated events and data using a single cacheable object, so that when there is a change in state/data that should also make an event fire, the data change is propagated to the remote cache, and the remote cache fires an event locally (at the clients side). This way, the clients representation of the servers state is always coherent.

 

2. Synchronization of remote commands and remote events/data changes: I want clients to be able to issue commands to a server that make its state or associated data change, and also to have an up-to-date representation of the state or data (and possible events issued by changes in the state/data). The problem is how to synchronize the firing of the deferred returned by the remote method call with the change in the clients representation of the servers state/data (i.e. to make sure that when the deferred fires, the clients representation of the state is coherent with the command, i.e. changed).

 

Presently I have no solution for this, but Im pretty sure that it requires some combination of referenceable and cacheable that will insure one coherent interface to associated data, events and commands. I am thinking to achieve this with a copyable that will contain both a referenceable and a cacheable.

 

3. Wrapping remote objects for non-online representation. I want to be able to have objects that can be used locally, but may also provide an interface to one or more servers that have to do with the state of the object. Another reason for these wrappers is that I want to be able to pass them freely from process to process, without being dependent on the connection or on a specific server.

 

For example, there could be a User object that may have a username and password, etc. and also an event that fires when the user connects to the system, and a remote method for sending him messages. The username and password may be required by a process regardless of being connected to a server that can provide the other functions (for example, a process may want to display to a user a list of all of the users of the system, but may also not be connected to a presence server that provides the other functionality). I would say that what is needed is an anti-Avatar  an object that represents some hyper-service entity that may be connected to servers that enable some of its functions and may also not.

 

The question is, how to represent this to the user of the object. Whether to allow access to cached remote data and subscription to events when not online, whether to return a deferred and try to connect in case we dont have the data or throw an exception, etc. I suppose this is mostly a matter of style, but if anyone has done something like this before maybe they would have some insight


 

Cheers,

 

Antony Kummel

 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20050721/e355d62a/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043537.html">[Twisted-Python] subclassing and class methods returning deferreds
</A></li>
	<LI>Next message (by thread): <A HREF="043538.html">[Twisted-Python] Re: communication idioms with Perspective Broker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43531">[ date ]</a>
              <a href="thread.html#43531">[ thread ]</a>
              <a href="subject.html#43531">[ subject ]</a>
              <a href="author.html#43531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
