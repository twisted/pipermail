<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] protocol.Protocol and transport.write
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20protocol.Protocol%20and%20transport.write&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011009.html">
   <LINK REL="Next"  HREF="011016.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] protocol.Protocol and transport.write</H1>
    <B>Michele Petrazzo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20protocol.Protocol%20and%20transport.write&In-Reply-To="
       TITLE="[Twisted-Python] protocol.Protocol and transport.write">michele.petrazzo at unipex.it
       </A><BR>
    <I>Tue Jul 19 08:02:32 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011009.html">[Twisted-Python] XMPP/Jabber server using Twisted
</A></li>
        <LI>Next message: <A HREF="011016.html">[Twisted-Python] protocol.Protocol and transport.write
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11015">[ date ]</a>
              <a href="thread.html#11015">[ thread ]</a>
              <a href="subject.html#11015">[ subject ]</a>
              <a href="author.html#11015">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a very simple application that try to open a connection on a port
on the local computer and if it has no program listening, it execute a
program file, else if it find a answer program, it send a string ( about
50/80 characters ).

After the upgrade to 2.0.x, it don't want to work well, because if it
has no response, it open the program correctly, but if it has response,
it send the message, but the message don't arrive to the listener.

After some tries, I see that into my code, I call reactor.stop before, I
think, reactor has ended to send my message. I resolve this with a
simple code: reactor.callLater(1, reactor.stop).

My question is: when I call reactor.stop, it close all, also if there
are some communication in progress? Is there another method to close the
communication (and in my case the program) when I'm sure that all the
works are ended?

Thanks,
Michele

My code:

class ConneExist(protocol.Protocol):
   #The server is listening
   def connectionMade(self):
     self.transport.write(file_name_path)
     out()

def out():
  # reactor.stop() &lt;- here is a problem
  reactor.callLater(1, reactor.stop)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011009.html">[Twisted-Python] XMPP/Jabber server using Twisted
</A></li>
	<LI>Next message: <A HREF="011016.html">[Twisted-Python] protocol.Protocol and transport.write
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11015">[ date ]</a>
              <a href="thread.html#11015">[ thread ]</a>
              <a href="subject.html#11015">[ subject ]</a>
              <a href="author.html#11015">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
