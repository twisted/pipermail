<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Receiving large packets with TCP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Receiving%20large%20packets%20with%20TCP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010987.html">
   <LINK REL="Next"  HREF="010954.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Receiving large packets with TCP</H1>
    <B>Stefan N&#228;we</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Receiving%20large%20packets%20with%20TCP&In-Reply-To="
       TITLE="[Twisted-Python] Receiving large packets with TCP">naewe.s at atlas.de
       </A><BR>
    <I>Mon Jul 11 07:46:21 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010987.html">[Twisted-Python] Reminder: Australian Twisted Sprint #2: 19th -	21st August 2005, Sydney
</A></li>
        <LI>Next message: <A HREF="010954.html">[Twisted-Python] Receiving large packets with TCP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10953">[ date ]</a>
              <a href="thread.html#10953">[ thread ]</a>
              <a href="subject.html#10953">[ subject ]</a>
              <a href="author.html#10953">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.
I'm using Twisted (2.0.1) for a TCP-based receiver.
That receiver receives different telegrams sent by another process.
Those telegrams are sent on different ports (i.e. one telegram type
is sent on one port). The sizes of the telegram vary from ~16 bytes
to ~8 kB.

Everything works perfectly. I've really never been *that*
productive.

BUT:
I'm having trouble receiving the whole contents of large telegrams.
For example one telegram is exactly 7452 bytes long but I only get
2920 bytes.
My twisted receiver uses the reactor to setup the different ports
to listen on and creates 'message handler' objects on connect.
Those message handler objects 'dissect' the received telegram and
print some of its contents to STDOUT.

Some parts of my code:

class MyReceiver(Protocol):

    def dataReceived(self, data):
        if __debug__: log.msg(&quot;Received %d bytes&quot; % len(data))
        try:
            # here the message handler gets created
            m = self.factory.msg[self.port](data)
            log.msg(m)
        except KeyError:
            # can this really happen ??
            log.msg(&quot;Unhandled connection from port %d&quot; % self.port)

    def connectionMade(self):
        addr = self.transport.getHost()
        self.proto = addr.type
        self.peer = addr.host
        self.port = addr.port
        log.msg(&quot;Connection from %s&quot; % self.transport.getPeer())


My 'main' function simply does 'reactor.listenTCP(port, MyFactory)'

So what do I need to do to get the whole telegram 'in one shot' ?
Do I need to re-assemble the telegrams myself ?

(I hope this Information is enough...Tell me, if not.)

TIA

Stefan
-- 
----------------------------------------------------------------------
Stefan Naewe                                     ATLAS Elektronik GmbH
                                                         Dept.: NUS T4
phone: +49-(0)421-457-3969                Sebaldsbruecker Heerstr. 235
fax:   +49-(0)421-457-3913                                28305 Bremen



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010987.html">[Twisted-Python] Reminder: Australian Twisted Sprint #2: 19th -	21st August 2005, Sydney
</A></li>
	<LI>Next message: <A HREF="010954.html">[Twisted-Python] Receiving large packets with TCP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10953">[ date ]</a>
              <a href="thread.html#10953">[ thread ]</a>
              <a href="subject.html#10953">[ subject ]</a>
              <a href="author.html#10953">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
