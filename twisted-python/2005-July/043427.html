<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [cpushare at cpushare.com: CPUShare Exception]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5Bcpushare%40cpushare.com%3A%20CPUShare%20Exception%5D&In-Reply-To=%3C20050707122256.GV3731%40g5.random%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043424.html">
   <LINK REL="Next"  HREF="043429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [cpushare at cpushare.com: CPUShare Exception]</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5Bcpushare%40cpushare.com%3A%20CPUShare%20Exception%5D&In-Reply-To=%3C20050707122256.GV3731%40g5.random%3E"
       TITLE="[Twisted-Python] [cpushare at cpushare.com: CPUShare Exception]">andrea at cpushare.com
       </A><BR>
    <I>Thu Jul  7 06:22:56 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043424.html">[Twisted-Python] SuxElementStream error
</A></li>
        <LI>Next message (by thread): <A HREF="043429.html">[Twisted-Python] [cpushare at cpushare.com: CPUShare Exception]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43427">[ date ]</a>
              <a href="thread.html#43427">[ thread ]</a>
              <a href="subject.html#43427">[ subject ]</a>
              <a href="author.html#43427">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I wrote the below code in my server:

from twisted.python import log

# local
from cpushare.mail import send_exception

class cpushare_logging_observer_class(object):
	def __init__(self, factory):
		self.factory = factory
	def start(self):
		if self.factory.production:
			log.addObserver(self.emit)
	def stop(self):
		if self.factory.production:
			log.removeObserver(self.emit)
	def emit(self, eventDict):
		edm = eventDict['message']
		if not edm:
			if eventDict['isError'] and eventDict.has_key('failure'):
				send_exception(eventDict['failure'])

to receive exceptions by email like the below if (send_exception sends me
an sms for the very first exception too). I do a very similar thing in
nevow, but in nevow I handle it through the nevow layer, not through
twisted.

Now to me it seems that the below exception isn't really interesting to
me, any client could generate it by injecting garbage in the ssl
connection.

Does anybody has suggestions on the best way to filter out all
OpenSSL.SSL.Error exceptions before calling send_exception in the above
code? Thanks!

(twisted is great ;)

----- Forwarded message from <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cpushare at cpushare.com</A> -----

Date: Thu,  7 Jul 2005 14:14:08 +0200 (CEST)
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cpushare at cpushare.com</A>
To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrea.kernel at tiscali.it</A>
Subject: CPUShare Exception
X-Mailbox-Line: From nobody Thu Jul  7 14:14:07 2005

Traceback (most recent call last):
  File &quot;/home/build/bin/i686/python-20050707/lib/python2.4/site-packages/twisted/python/log.py&quot;, line 43, in callWithContext
    
  File &quot;/home/build/bin/i686/python-20050707/lib/python2.4/site-packages/twisted/python/context.py&quot;, line 59, in callWithContext
    
  File &quot;/home/build/bin/i686/python-20050707/lib/python2.4/site-packages/twisted/python/context.py&quot;, line 37, in callWithContext
    
  File &quot;/home/build/bin/i686/python-20050707/lib/python2.4/site-packages/twisted/internet/pollreactor.py&quot;, line 160, in _doReadOrWrite
    
--- &lt;exception caught here&gt; ---
  File &quot;/home/build/bin/i686/python-20050707/lib/python2.4/site-packages/twisted/internet/tcp.py&quot;, line 111, in doRead
    
  File &quot;/home/build/bin/i686/python-20050707/lib/python2.4/site-packages/twisted/internet/tcp.py&quot;, line 339, in doRead
    
OpenSSL.SSL.Error: [('SSL routines', 'SSL3_READ_BYTES', 'ssl handshake failure')]

----- End forwarded message -----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043424.html">[Twisted-Python] SuxElementStream error
</A></li>
	<LI>Next message (by thread): <A HREF="043429.html">[Twisted-Python] [cpushare at cpushare.com: CPUShare Exception]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43427">[ date ]</a>
              <a href="thread.html#43427">[ thread ]</a>
              <a href="subject.html#43427">[ subject ]</a>
              <a href="author.html#43427">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
