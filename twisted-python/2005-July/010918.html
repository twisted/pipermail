<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Can I get the interface's IP addr from where the	datagram is received?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Can%20I%20get%20the%20interface%27s%20IP%20addr%20from%20where%20the%0A%09datagram%20is%20received%3F&In-Reply-To=42CBF6F6.2000306%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010911.html">
   <LINK REL="Next"  HREF="010916.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Can I get the interface's IP addr from where the	datagram is received?</H1>
    <B>Eric Hsu</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Can%20I%20get%20the%20interface%27s%20IP%20addr%20from%20where%20the%0A%09datagram%20is%20received%3F&In-Reply-To=42CBF6F6.2000306%40twistedmatrix.com"
       TITLE="[Twisted-Python] Can I get the interface's IP addr from where the	datagram is received?">nkeric at gmail.com
       </A><BR>
    <I>Wed Jul  6 22:44:30 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010911.html">[Twisted-Python] Can I get the interface's IP addr from where	the	datagram is received?
</A></li>
        <LI>Next message: <A HREF="010916.html">[Twisted-Python] SuxElementStream error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10918">[ date ]</a>
              <a href="thread.html#10918">[ thread ]</a>
              <a href="subject.html#10918">[ subject ]</a>
              <a href="author.html#10918">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2005/7/6, Tommi Virtanen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tv at twistedmatrix.com</A>&gt;:
&gt;<i> Assumption: you really need to know the address the packet was sent to,
</I>&gt;<i> and not just &quot;(one of) my IP address(es)&quot;.
</I>
Hi Tommi, thank you for your reply!

I'm having my server running on a machine which has two ethernet
interfaces, one has an intranet ip address like &quot;192.168.3.4&quot;, another
one has a public internet ip address like &quot;202.71.3.4&quot;.

I want my server to provide public services to the outside. One of its
function is to allocate some ports for the clients, once the
allocation has been done, the server has to send back an address pair
(ip:port) to the client.

I have written a method:

def getServerIP():
    return socket.getaddrinfo(socket.gethostname(), None)[0][4][0]

It worked properly several days ago and returned me the public address
(202.71.3.4) of that machine, however, yesterday, it kept returning
the intranet address (192.168.3.4) which was useless for the clients
on the internet. I can't figure out why...

I've tried to use the self.transport.getHost(), however, the result
was something like this: IPv4Address(UDP, '0.0.0.0', 6677). What's
wrong with this method?

Is it so hard to know the ip address from which the data my server received?

I'm very new to twisted and not a native english speaker, so please
bear with me :p


- Eric


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010911.html">[Twisted-Python] Can I get the interface's IP addr from where	the	datagram is received?
</A></li>
	<LI>Next message: <A HREF="010916.html">[Twisted-Python] SuxElementStream error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10918">[ date ]</a>
              <a href="thread.html#10918">[ thread ]</a>
              <a href="subject.html#10918">[ subject ]</a>
              <a href="author.html#10918">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
