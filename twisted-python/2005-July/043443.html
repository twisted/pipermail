<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Trouble with example imap client on unread	messages 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Trouble%20with%20example%20imap%20client%20on%20unread%0A%09messages%20&In-Reply-To=%3C20050708090857.92969384C4%40haddock.cd.chalmers.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043442.html">
   <LINK REL="Next"  HREF="043444.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Trouble with example imap client on unread	messages </H1>
    <B>Anders Hammarquist</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Trouble%20with%20example%20imap%20client%20on%20unread%0A%09messages%20&In-Reply-To=%3C20050708090857.92969384C4%40haddock.cd.chalmers.se%3E"
       TITLE="[Twisted-Python] Trouble with example imap client on unread	messages ">iko at cd.chalmers.se
       </A><BR>
    <I>Fri Jul  8 03:08:57 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043442.html">[Twisted-Python] Trouble with example imap client on unread	messages
</A></li>
        <LI>Next message (by thread): <A HREF="043444.html">[Twisted-Python] Trouble with example imap client on	unread	messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43443">[ date ]</a>
              <a href="thread.html#43443">[ thread ]</a>
              <a href="subject.html#43443">[ subject ]</a>
              <a href="author.html#43443">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In a message of Fri, 08 Jul 2005 10:36:32 +0200, Thomas HERVE writes:
&gt;<i>Quoting Andy Gayton &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andy at thecablelounge.com</A>&gt;:
</I>&gt;&gt;<i>  * 244 FETCH (FLAGS (\Seen))
</I>&gt;<i>
</I>&gt;<i>The problem I see is here : why does the server had this line ?
</I>
The flags changed, and the server is telling you about it, as it
should.

&gt;&gt;<i> The callback for the above fetchSpecific call is receiving:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> { 243 : [['BODY', ['HEADER.FIELDS', ['SUBJECT']], 'Subject: DELIVERY 
</I>&gt;&gt;<i> REPORTS ABOUT YOUR E-MAIL\r\n\r\n']], 244 : [['FLAGS', ['\\Seen']]] }
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ie, I'm not getting the subject for unread messages.
</I>&gt;<i>
</I>&gt;<i>Well actually it's logical, because Twisted parses result in a dictionnary so
</I>&gt;<i>you have :
</I>&gt;<i>res[243] = &lt; subject &gt;, then res[244] = &lt; subject &gt;, but res[244] = &lt; flags &gt;
</I>&gt;<i>which overrides previous value.
</I>
This is bad, RFC-3501 says:
   A client MUST be prepared to accept any server response at all times.
   This includes server data that was not requested.  Server data SHOULD
   be recorded, so that the client can reference its recorded copy
   rather than sending a command to the server to request the data.  In
   the case of certain server data, the data MUST be recorded.

so I'd say twisted's IMAP-client is broken.

/Anders

-- 
 -- Of course I'm crazy, but that doesn't mean I'm wrong.
Anders Hammarquist                                  | <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">iko at cd.chalmers.se</A>
Physics student, Chalmers University of Technology, | Hem: +46 31 88 48 50
G|teborg, Sweden.           RADIO: SM6XMM and N2JGL | Mob: +46 707 27 86 87


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043442.html">[Twisted-Python] Trouble with example imap client on unread	messages
</A></li>
	<LI>Next message (by thread): <A HREF="043444.html">[Twisted-Python] Trouble with example imap client on	unread	messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43443">[ date ]</a>
              <a href="thread.html#43443">[ thread ]</a>
              <a href="subject.html#43443">[ subject ]</a>
              <a href="author.html#43443">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
