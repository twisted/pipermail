<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] how to tap a DelayedCall?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20tap%20a%20DelayedCall%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010865.html">
   <LINK REL="Next"  HREF="010883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] how to tap a DelayedCall?</H1>
    <B>Andrea Arcangeli</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20how%20to%20tap%20a%20DelayedCall%3F&In-Reply-To="
       TITLE="[Twisted-Python] how to tap a DelayedCall?">andrea at cpushare.com
       </A><BR>
    <I>Fri Jul  1 22:20:44 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="010865.html">[Twisted-Python] Event queue in the Python std lib
</A></li>
        <LI>Next message: <A HREF="010883.html">[Twisted-Python] how to tap a DelayedCall?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10879">[ date ]</a>
              <a href="thread.html#10879">[ thread ]</a>
              <a href="subject.html#10879">[ subject ]</a>
              <a href="author.html#10879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm still using my setup where I use mktap for the production system so
I tweak it with mktap -u/-g/Options() parameters
(twisted.python.usage.Options) and the tac -noy model for development
with default Option values, but I'm now having a problem with a delayed
call in the tap mode.

Somewhere inside the makeService hook I execute a reactor.callLater, and
that gives the following error:

WARNING: unserializing ephemeral twisted.internet.base.DelayedCall

(and of course it hangs too since that new callLater is now fundamental ;)

Now I think I can trivially move the callLater into the startFactory()
hook, and then it should work even with the tap file, but I wondered if
there was a more transparent way to make callLater work with tap files
like it does with the tac ones just fine.

I'm considering going away from the tap model, but first I'd like to see
the equivalent of mktap -u/-g and the other Option() parameters
available through tac files too (which isn't possible yet AFIK, twistd
doesn't take those params, and I don't want to reinvent locally yet
another getopt/Options mechanism, the Options configurable via mktap
were all I needed, except I don't need serialization just to pass
options, I only need the mktap option passing). Hints welcome.

Thanks and keep up the great work!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010865.html">[Twisted-Python] Event queue in the Python std lib
</A></li>
	<LI>Next message: <A HREF="010883.html">[Twisted-Python] how to tap a DelayedCall?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10879">[ date ]</a>
              <a href="thread.html#10879">[ thread ]</a>
              <a href="subject.html#10879">[ subject ]</a>
              <a href="author.html#10879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
