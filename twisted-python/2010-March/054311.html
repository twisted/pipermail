<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] sniffing multicast traffic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20sniffing%20multicast%20traffic&In-Reply-To=%3C24e981171003100248n26489574k9fbf169c5eb03485%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054310.html">
   <LINK REL="Next"  HREF="054312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] sniffing multicast traffic</H1>
    <B>Lars Ivar Igesund</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20sniffing%20multicast%20traffic&In-Reply-To=%3C24e981171003100248n26489574k9fbf169c5eb03485%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] sniffing multicast traffic">larsivi at gmail.com
       </A><BR>
    <I>Wed Mar 10 03:48:25 MST 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054310.html">[Twisted-Python] sniffing multicast traffic
</A></li>
        <LI>Next message (by thread): <A HREF="054312.html">[Twisted-Python] sniffing multicast traffic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54311">[ date ]</a>
              <a href="thread.html#54311">[ thread ]</a>
              <a href="subject.html#54311">[ subject ]</a>
              <a href="author.html#54311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ben,

my experience (not with Twisted, but with multicast), is that
multicast often fail to be properly routed (this may be a restriction
on OS, switch, etc). That you see the multicasts on using tshark is no
indication on the routing working properly, as it will catch all
information in promiscous mode, whether routed there or not.

Two possible solutions (that may or may not be easy to in conjunction
with Twisted) are:
 * Route the multicasts explicitly
 * Make the listening socket bind explicitly to the network interface
where you expect/see the multicast. This is the solution I have used
myself, but may require using low level socket functionality. Binding
to localhost (all interfaces at once) or similar did not work for me.

Best regards,
Lars Ivar

On Wed, Mar 10, 2010 at 11:35 AM, Ben Barker &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ben at bbarker.co.uk</A>&gt; wrote:
&gt;<i> Hello - I wonder if someone can help:
</I>&gt;<i>
</I>&gt;<i> We have some status info being sent by various machines using
</I>&gt;<i> multicast addressed udp packets. I have been attempting to use twisted
</I>&gt;<i> to write a python script that will passively monitor on the relevant
</I>&gt;<i> port for any udp packets with the specified multicast address, which I
</I>&gt;<i> can then parse the payloads of as required.
</I>&gt;<i>
</I>&gt;<i> I have been looking at the examples here:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://code.activestate.com/recipes/425975-simple-udp-multicast-client-server-using-twisted/">http://code.activestate.com/recipes/425975-simple-udp-multicast-client-server-using-twisted/</A>
</I>&gt;<i>
</I>&gt;<i> But I seem to have trouble getting them to receive anything at all.
</I>&gt;<i>
</I>&gt;<i> I have managed to use tshark to display the packets :
</I>&gt;<i>
</I>&gt;<i> tshark -i eth0 Â -x -l -f udp
</I>&gt;<i>
</I>&gt;<i> so I know the data is there (coming isn on address 224.0.0.4, port 901)
</I>&gt;<i>
</I>&gt;<i> Any suggestions?
</I>&gt;<i>
</I>&gt;<i> B
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054310.html">[Twisted-Python] sniffing multicast traffic
</A></li>
	<LI>Next message (by thread): <A HREF="054312.html">[Twisted-Python] sniffing multicast traffic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54311">[ date ]</a>
              <a href="thread.html#54311">[ thread ]</a>
              <a href="subject.html#54311">[ subject ]</a>
              <a href="author.html#54311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
