<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Log%20Rotation%20Blocks%20w/%20Large%20Number%20of%20Log%0A%09Files&In-Reply-To=3b949f091003161434l16c2410bnf7986cd0c68877ea%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021861.html">
   <LINK REL="Next"  HREF="021864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files</H1>
    <B>Maarten ter Huurne</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Log%20Rotation%20Blocks%20w/%20Large%20Number%20of%20Log%0A%09Files&In-Reply-To=3b949f091003161434l16c2410bnf7986cd0c68877ea%40mail.gmail.com"
       TITLE="[Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files">maarten at treewalker.org
       </A><BR>
    <I>Tue Mar 16 19:01:00 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021861.html">[Twisted-Python] Log Rotation Blocks w/ Large Number of Log Files
</A></li>
        <LI>Next message: <A HREF="021864.html">[Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21862">[ date ]</a>
              <a href="thread.html#21862">[ thread ]</a>
              <a href="subject.html#21862">[ subject ]</a>
              <a href="author.html#21862">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday 16 March 2010, Jason J. W. Williams wrote:

&gt;<i> Twistd blocks for a long period of time when the number of log files
</I>&gt;<i> built up is large, thereby causing connections to freeze and
</I>&gt;<i> (depending on the length of the rotation) time out.
</I>&gt;<i> 
</I>&gt;<i> Given I've only used Twisted in the past and not contributed to it, I
</I>&gt;<i> was curious if someone could take a look at my changes to
</I>&gt;<i> twisted.python.logfile.LogFile's rotate() method and see if there's
</I>&gt;<i> any reason the changes would be a bad idea.
</I>&gt;<i> 
</I>&gt;<i> What I've attempted to do is defer the rotation of the old log files
</I>&gt;<i> to a thread, and only rotate the current log file in the foreground.
</I>
An alternative approach could be to name the log files differently.
For example, use the timestamp of the rotation as a filename suffix:
  twistd.log.2010-03-16.23-56

This is not the traditional way logging is done, but it would get good 
performance with simple code. (It would still need resolution of duplicate 
file names, in case the log rotates very quickly or the clock is moved 
backwards.)

Bye,
		Maarten

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021861.html">[Twisted-Python] Log Rotation Blocks w/ Large Number of Log Files
</A></li>
	<LI>Next message: <A HREF="021864.html">[Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21862">[ date ]</a>
              <a href="thread.html#21862">[ thread ]</a>
              <a href="subject.html#21862">[ subject ]</a>
              <a href="author.html#21862">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
