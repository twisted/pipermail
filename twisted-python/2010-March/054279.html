<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Lore to Sphinx Conversion Progress Report 6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Lore%20to%20Sphinx%20Conversion%20Progress%20Report%206&In-Reply-To=%3C562bcc11003050933t3d810980n94aadef31cc6c62c%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054272.html">
   <LINK REL="Next"  HREF="054265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Lore to Sphinx Conversion Progress Report 6</H1>
    <B>Kevin Horn</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Lore%20to%20Sphinx%20Conversion%20Progress%20Report%206&In-Reply-To=%3C562bcc11003050933t3d810980n94aadef31cc6c62c%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Lore to Sphinx Conversion Progress Report 6">kevin.horn at gmail.com
       </A><BR>
    <I>Fri Mar  5 10:33:47 MST 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054272.html">[Twisted-Python] Lore to Sphinx Conversion Progress Report 6
</A></li>
        <LI>Next message (by thread): <A HREF="054265.html">[Twisted-Python] R: Twisted Python on Nokia E71x (Running the phone Python Interpreter)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54279">[ date ]</a>
              <a href="thread.html#54279">[ thread ]</a>
              <a href="subject.html#54279">[ subject ]</a>
              <a href="author.html#54279">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Mar 5, 2010 at 9:30 AM, Drew Smathers &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">drew.smathers at gmail.com</A>&gt;wrote:

&gt;<i> On Thu, Mar 4, 2010 at 5:49 PM, Kevin Horn &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kevin.horn at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's been a while, I know you were all waiting with baited breath...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> First a few fixes:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Thanks to Tim Allen and Steve Steiner, several theme issues were fixed.
</I>&gt;&gt;<i> This
</I>&gt;&gt;<i>   fixes a few minor display bugs and should make pages validate properly.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - inline markup will now include child contents.  This causes rst not to
</I>&gt;&gt;<i> display
</I>&gt;&gt;<i>   properly in cases of &quot;nested inline markup&quot;, but should make it easier
</I>&gt;&gt;<i> to
</I>&gt;&gt;<i>   manually fix these places later
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - :download: links are now generated for non-rst files ending in .py (most
</I>&gt;&gt;<i> of the
</I>&gt;&gt;<i>   examples), as welll as .tac and .sql files
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - toc entries which end in a &quot;/&quot; character now have &quot;index appended to
</I>&gt;&gt;<i> them
</I>&gt;&gt;<i>   in the ReST output, which fixes a few issues where the built-Sphinx docs
</I>&gt;&gt;<i>   would end up with broken navigation links.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A couple of issues were also fixed at the PyCon sprints:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - &lt;cite&gt; tags are now handled...sort of.  According to Glyph, these aren't
</I>&gt;&gt;<i> really
</I>&gt;&gt;<i>   very important, so we just return the contents of the tag without any
</I>&gt;&gt;<i> special
</I>&gt;&gt;<i>   markup.  If we feel the need to put citation markup back into the docs
</I>&gt;&gt;<i> we can
</I>&gt;&gt;<i>   do that post-transition.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Glyph also found an easy way to improve the CSS of the theme somewhat.
</I>&gt;&gt;<i> The
</I>&gt;&gt;<i>   issue where the sidebar drops below the main content should now be less
</I>&gt;&gt;<i> of a
</I>&gt;&gt;<i>   problem, though it's not gone entirely.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Glyph and I also discussed a few different ways to handle links to the
</I>&gt;&gt;<i> API docs
</I>&gt;&gt;<i>   and agreed on a way forward.  Basically, well change the &lt;code
</I>&gt;&gt;<i> class='API'&gt;
</I>&gt;&gt;<i>   tags into something like: :api:`path.to.documented object &lt;label&gt;`, and
</I>&gt;&gt;<i> then
</I>&gt;&gt;<i>   create a docutils extension to convert that into a link.  The beginnings
</I>&gt;&gt;<i> of this
</I>&gt;&gt;<i>   are in the hg repos, but it looks like it won't be quite as simple as we
</I>&gt;&gt;<i> thought.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   First, the way pydoctor generates links is deceptively simple.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   If you look up a module, like &quot;twisted.internet.defer&quot;, the link looks
</I>&gt;&gt;<i> like
</I>&gt;&gt;<i>   this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/documents/9.0.0/api/twisted.internet.defer.html">http://twistedmatrix.com/documents/9.0.0/api/twisted.internet.defer.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   If you look up a class, like &quot;twisted.internet.defer.Deferred&quot; for
</I>&gt;&gt;<i> example,
</I>&gt;&gt;<i>   the link looks like this:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.defer.Deferred.html">http://twistedmatrix.com/documents/current/api/twisted.internet.defer.Deferred.html</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   Pretty simple right?  But if you look up a function or method like
</I>&gt;&gt;<i>   &quot;twisted.internet.defer.Deferred.callback&quot;, the link has an anchor, like
</I>&gt;&gt;<i> so:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/documents/9.0.0/api/twisted.internet.defer.Deferred.html#addCallback">http://twistedmatrix.com/documents/9.0.0/api/twisted.internet.defer.Deferred.html#addCallback</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   So we'll need to do some checking on either the api docs or on twisted
</I>&gt;&gt;<i> itself
</I>&gt;&gt;<i>   to determine what sort of object is being linked to.  Shouldn't be
</I>&gt;&gt;<i>   super-difficult, just haven't had time yet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   Second, I haven't yet figured out how to access the Sphinx config object
</I>&gt;&gt;<i> from
</I>&gt;&gt;<i>   a docutils role function.  I'm sure this is just a matter of finding an
</I>&gt;&gt;<i> example
</I>&gt;&gt;<i>   or getting an answer from the mailing list, but I just haven't gotten to
</I>&gt;&gt;<i> it yet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think the API links are the only major issue still remaining until we
</I>&gt;&gt;<i> start doing
</I>&gt;&gt;<i> the conversion, so once this issue is handled, I'll probably file a ticket
</I>&gt;&gt;<i> and create
</I>&gt;&gt;<i> a branch in SVN for the conversion.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If anyone has any docs tickets open, now is the time to get them fixed!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> How can I filter for tickets related to lore2sphinx transition in trac?
</I>&gt;<i>  I've noticed a few documents that don't seem properly converted. Here's an
</I>&gt;<i> example:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://twistedsphinx.funsize.net/projects/web/howto/web-in-60/asynchronous.html">http://twistedsphinx.funsize.net/projects/web/howto/web-in-60/asynchronous.html</A>
</I>&gt;<i>
</I>&gt;<i> ... which is missing syntax highlighting on code examples and the code
</I>&gt;<i> examples are also truncated.
</I>&gt;<i>
</I>&gt;<i> -Drew
</I>&gt;<i>
</I>&gt;<i>
</I>As far as I know, there aren't any tickets in Trac yet.  I was planning on
making some (or asking others to do so) once a &quot;master ticket&quot; and a branch
are created.

As for the specific issue you linked to, the ReST markup is similar to that
on other pages, but it looks like Sphinx isn't recognizing the code samples
as Python for some reason.  I'll look into this later on.

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20100305/40aa08ed/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054272.html">[Twisted-Python] Lore to Sphinx Conversion Progress Report 6
</A></li>
	<LI>Next message (by thread): <A HREF="054265.html">[Twisted-Python] R: Twisted Python on Nokia E71x (Running the phone Python Interpreter)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54279">[ date ]</a>
              <a href="thread.html#54279">[ thread ]</a>
              <a href="subject.html#54279">[ subject ]</a>
              <a href="author.html#54279">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
