<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] stdio.StandardIO blocks?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20stdio.StandardIO%20blocks%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021900.html">
   <LINK REL="Next"  HREF="021895.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] stdio.StandardIO blocks?</H1>
    <B>Willy Lai</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20stdio.StandardIO%20blocks%3F&In-Reply-To="
       TITLE="[Twisted-Python] stdio.StandardIO blocks?">laiw at student.ethz.ch
       </A><BR>
    <I>Tue Mar 23 10:00:50 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021900.html">[Twisted-Python] Nothing Succeeds Like Success (Stories)
</A></li>
        <LI>Next message: <A HREF="021895.html">[Twisted-Python] stdio.StandardIO blocks?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21892">[ date ]</a>
              <a href="thread.html#21892">[ thread ]</a>
              <a href="subject.html#21892">[ subject ]</a>
              <a href="author.html#21892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all

I'm new to twisted and also have not a lot of Python experience.
My problem boils down to following situation:

I have a server and a client over TCP, once the client is connected to 
the server,
the server periodically pings the client in order to check if it is 
still alive.
The client sends a response/pong back to each ping.

These messages are printed to stdout. The two consoles would then look like:

[connected]
ping
pong
...2 seconds ...
ping
pong
...2 seconds ...
ping
pong
...

Now the user should be able to write commands in the command line, which 
get's
sent to the server, without interrupting the pings. But in my case, 
while writing on the console the output stops.
The server will send a ping, but the client does not seem to receive the 
ping, since I don't get a pong on the server.
What happens at the moment I type something in the command line?

What I want, is writing stuff in the console, without interrupting the 
ping mechanism.
(The pings and pongs in my case should continue to be sent while typing 
stuff in the console)

That's how I use StandardIO:

class CommandLine(protocol.Protocol):

     def __init__(self, protocol):
         self.protocol = protocol

     def dataReceived(self, data):
         print('INPUT: %s' % (data)

class Client(protocol.DatagramProtocol):

     def __init__(self):
         # initialize command line connector
         commandLine = CommandLine(self)
         # connect member to command line output
         self.output = stdio.StandardIO(commandLine)

Cheers

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021900.html">[Twisted-Python] Nothing Succeeds Like Success (Stories)
</A></li>
	<LI>Next message: <A HREF="021895.html">[Twisted-Python] stdio.StandardIO blocks?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21892">[ date ]</a>
              <a href="thread.html#21892">[ thread ]</a>
              <a href="subject.html#21892">[ subject ]</a>
              <a href="author.html#21892">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
