<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Log Rotation Blocks w/ Large Number of Log Files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Log%20Rotation%20Blocks%20w/%20Large%20Number%20of%20Log%20Files&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021859.html">
   <LINK REL="Next"  HREF="021862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Log Rotation Blocks w/ Large Number of Log Files</H1>
    <B>Jason J. W. Williams</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Log%20Rotation%20Blocks%20w/%20Large%20Number%20of%20Log%20Files&In-Reply-To="
       TITLE="[Twisted-Python] Log Rotation Blocks w/ Large Number of Log Files">jasonjwwilliams at gmail.com
       </A><BR>
    <I>Tue Mar 16 17:34:33 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021859.html">[Twisted-Python] My twisted application could not start after	reboot be cause of &quot;twistd.pid&quot;
</A></li>
        <LI>Next message: <A HREF="021862.html">[Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21861">[ date ]</a>
              <a href="thread.html#21861">[ thread ]</a>
              <a href="subject.html#21861">[ subject ]</a>
              <a href="author.html#21861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Twistd blocks for a long period of time when the number of log files
built up is large, thereby causing connections to freeze and
(depending on the length of the rotation) time out.

Given I've only used Twisted in the past and not contributed to it, I
was curious if someone could take a look at my changes to
twisted.python.logfile.LogFile's rotate() method and see if there's
any reason the changes would be a bad idea.

What I've attempted to do is defer the rotation of the old log files
to a thread, and only rotate the current log file in the foreground.

Original twisted.python.logfile.LogFile.rotate(): <A HREF="http://gist.github.com/334538">http://gist.github.com/334538</A>

My version with deferral of old log rotation: <A HREF="http://gist.github.com/334545">http://gist.github.com/334545</A>

(Changes are against Twisted 10.0).

Thank you in advance.

-J

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021859.html">[Twisted-Python] My twisted application could not start after	reboot be cause of &quot;twistd.pid&quot;
</A></li>
	<LI>Next message: <A HREF="021862.html">[Twisted-Python] Log Rotation Blocks w/ Large Number of Log	Files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21861">[ date ]</a>
              <a href="thread.html#21861">[ thread ]</a>
              <a href="subject.html#21861">[ subject ]</a>
              <a href="author.html#21861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
