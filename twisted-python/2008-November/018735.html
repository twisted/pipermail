<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A kinder and more consistent	defer.inlineCallbacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20A%20kinder%20and%20more%20consistent%0A%09defer.inlineCallbacks&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018734.html">
   <LINK REL="Next"  HREF="018737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A kinder and more consistent	defer.inlineCallbacks</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20A%20kinder%20and%20more%20consistent%0A%09defer.inlineCallbacks&In-Reply-To="
       TITLE="[Twisted-Python] A kinder and more consistent	defer.inlineCallbacks">terry at jon.es
       </A><BR>
    <I>Fri Nov 21 16:32:24 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018734.html">[Twisted-Python] A kinder and more consistent	defer.inlineCallbacks
</A></li>
        <LI>Next message: <A HREF="018737.html">[Twisted-Python] A kinder and more consistent	defer.inlineCallbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18735">[ date ]</a>
              <a href="thread.html#18735">[ thread ]</a>
              <a href="subject.html#18735">[ subject ]</a>
              <a href="author.html#18735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here's another way of looking at what I proposed.

When you call a function, you can divide what happens into 3 possibilities:

 1) An exception is raised
 2) You get back a generator
 3) You get back something else

(Yes, I'm ignoring aborts, sys.exit, etc).


As it stands, all three of these are handled inside _inlineCallbacks (not
in inlineCallbacks). With the code I suggested, the call to f is made
before _inlineCallbacks is called. Only in case 2, where we actually have a
generator, do we ask _inlineCallbacks to deal with unwinding it. In case 1
we pass the exception back via a deferred errback with a failure and in
case 2 we pass the result back in a deferred whose callback is already
called.  There's a good case (perhaps a stronger one) for just letting the
Exception go on its merry way and raise back in the calling code. But it's
hard to argue that knowing that we don't even have a generator result that
passing it on to _inlineCallbacks in the knowledge that it's going to
cryptically raise is better than just returning the result of the user's
function, especially seeing as it has just successfully run to completion!

Terry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018734.html">[Twisted-Python] A kinder and more consistent	defer.inlineCallbacks
</A></li>
	<LI>Next message: <A HREF="018737.html">[Twisted-Python] A kinder and more consistent	defer.inlineCallbacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18735">[ date ]</a>
              <a href="thread.html#18735">[ thread ]</a>
              <a href="subject.html#18735">[ subject ]</a>
              <a href="author.html#18735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
