<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Connection Manager
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Connection%20Manager&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018722.html">
   <LINK REL="Next"  HREF="018725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Connection Manager</H1>
    <B>Reza Lotun</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Connection%20Manager&In-Reply-To="
       TITLE="[Twisted-Python] Connection Manager">reza at getpeer.com
       </A><BR>
    <I>Thu Nov 20 18:25:06 EST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018722.html">[Twisted-Python] Connectionless AMP?
</A></li>
        <LI>Next message: <A HREF="018725.html">[Twisted-Python] TLS broken with twisted.words.protocols.jabber
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18724">[ date ]</a>
              <a href="thread.html#18724">[ thread ]</a>
              <a href="subject.html#18724">[ subject ]</a>
              <a href="author.html#18724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I've been thinking of implementing a connection manager in twisted. The app
I'm working on has various parts or &quot;modules&quot; that individually make
separate connections to various services and what not. They basically act
independently of each other - as in they're all scheduled connection calls
and what not.

I'm interested in mediating these connections through a &quot;Dispatcher&quot; of
sorts - what I'm thinking would be a thin wrapper over the reactor, with
extra state. One of the things the Dispatcher would do is gauge network
connection health - something like periodically attempting to ping/connect
to well known internet sites. If the connection ever degrades or fails, the
Dispatcher would change state. Fairly straightforward, conceptually at
least.

My questions are twofold - is the general idea sound - how is such a thing
implemented elsewhere? Also, what would be the best strategy to implement
the above, if the idea is sane?

I was thinking something like this: my Dispatcher would have something like
a connectTCP call which would in turn call the reactor.connectTCP with a
special DispatcherFactory. As the returned IConnector calls
startedConnecting on the DispatcherFactory, it would check internal state,
figure out a policy and decide whether to continue with the connection and
call the passed in factory's buildProctol, or call the IConnector
stopConnecting to pause the connection attempt. If the situation improves
later on, the IConnector.connect can be called to &quot;resume&quot; the connection
attempt.

Any feedback would be greatly appreciated.

Thanks,
Reza

-- 
Reza Lotun
Senior Software Engineer
GetPeer Limited
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">reza at getpeer.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20081120/34f4aa8a/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20081120/34f4aa8a/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018722.html">[Twisted-Python] Connectionless AMP?
</A></li>
	<LI>Next message: <A HREF="018725.html">[Twisted-Python] TLS broken with twisted.words.protocols.jabber
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18724">[ date ]</a>
              <a href="thread.html#18724">[ thread ]</a>
              <a href="subject.html#18724">[ subject ]</a>
              <a href="author.html#18724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
