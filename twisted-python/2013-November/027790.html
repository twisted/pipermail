<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IMAP4%20Proxy%20to%20add%20headers%20and%20modify%20body%20of%0A%09an%20incoming%20message&In-Reply-To=%3C1385606353.19825.YahooMailNeo%40web181604.mail.ne1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027789.html">
   <LINK REL="Next"  HREF="027791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message</H1>
    <B>Krzysztof Oblucki</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IMAP4%20Proxy%20to%20add%20headers%20and%20modify%20body%20of%0A%09an%20incoming%20message&In-Reply-To=%3C1385606353.19825.YahooMailNeo%40web181604.mail.ne1.yahoo.com%3E"
       TITLE="[Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message">koblucki at yahoo.com
       </A><BR>
    <I>Wed Nov 27 19:39:13 MST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027789.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of an incoming message
</A></li>
        <LI>Next message: <A HREF="027791.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27790">[ date ]</a>
              <a href="thread.html#27790">[ thread ]</a>
              <a href="subject.html#27790">[ subject ]</a>
              <a href="author.html#27790">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Awesome, that's what I've been trying to do for the past couple of days. &#160;Definitely learning a lot of new things :)


________________________________
 From: &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt;
To: Twisted general discussion &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt; 
Sent: Wednesday, November 27, 2013 5:18 PM
Subject: Re: [Twisted-Python] IMAP4 Proxy to add headers and modify body of an incoming message
 

&gt;<i> From: Krzysztof Oblucki &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">koblucki at yahoo.com</A>&gt;
</I>&gt;<i> To: &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&quot; &lt;twisted- <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">python at twistedmatrix.com</A>&gt;
</I>&gt;<i> Sent: Monday, November 25, 2013 11:27 AM
</I>&gt;<i> Subject: IMAP4 Proxy to add headers and modify body of an incoming message
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> I am trying to write an IMAP proxy to modify headers and the body of an incoming message using twisted. &#160;I am new to python and twisted so maybe this is why I either picked the wrong route or don't have the skills to get through some issues and I'm hoping that some you fine list members can point me in the right direction.
</I>&gt;<i> 
</I>&gt;<i> I started by using the IMAP4Client and IMAP4Server to do the proxying. However, I realized that in certain cases, the IMAP4Server requires synchronous results but since I need to do an async call using the client the handling is not working properly. &#160;I ran into this when implementing getFlags() in the IMessage and I am not sure how I can get out of this short of changing the IMAP4Server code to handle Deferreds.
</I>&gt;<i> 
</I>&gt;<i> Am I on the right track? &#160;Is imap4 lib the right tool for this job? &#160;If so, is modifying IMAP4Server to handle Deferreds the right thing to do? If not, what would you recommend?
</I>
Sounds like you diagnosed the problem correctly.&#160; IMAP4Server needs to handle Deferreds here and doesn't currently.

Jean-Paul

_______________________________________________
Twisted-Python mailing list
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20131127/d564bbf5/attachment-0001.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20131127/d564bbf5/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027789.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of an incoming message
</A></li>
	<LI>Next message: <A HREF="027791.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27790">[ date ]</a>
              <a href="thread.html#27790">[ thread ]</a>
              <a href="subject.html#27790">[ subject ]</a>
              <a href="author.html#27790">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
