<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Ticket #1330 - Socks V5 functionality
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ticket%20%231330%20-%20Socks%20V5%20functionality&In-Reply-To=%3C20131116194434.15706.1987930455.divmod.xquotient.27%40top%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="027718.html">
   <LINK REL="Next"  HREF="060182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Ticket #1330 - Socks V5 functionality</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Ticket%20%231330%20-%20Socks%20V5%20functionality&In-Reply-To=%3C20131116194434.15706.1987930455.divmod.xquotient.27%40top%3E"
       TITLE="[Twisted-Python] Ticket #1330 - Socks V5 functionality">exarkun at twistedmatrix.com
       </A><BR>
    <I>Sat Nov 16 12:44:34 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027718.html">[Twisted-Python] Ticket #1330 - Socks V5 functionality
</A></li>
        <LI>Next message (by thread): <A HREF="060182.html">[Twisted-Python] Ticket #1330 - Socks V5 functionality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60181">[ date ]</a>
              <a href="thread.html#60181">[ thread ]</a>
              <a href="subject.html#60181">[ subject ]</a>
              <a href="author.html#60181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06:14 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dstainton415 at gmail.com</A> wrote:
&gt;<i>Hi, I'd like to help out and write unit tests for the Socks v5 code in
</I>&gt;<i>this ticket:
</I>&gt;<i><A HREF="https://twistedmatrix.com/trac/ticket/1330">https://twistedmatrix.com/trac/ticket/1330</A>
</I>&gt;<i>
</I>&gt;<i>Should I write something very similar to this?? ::
</I>&gt;<i><A HREF="http://twistedmatrix.com/trac/browser/trunk/twisted/test/test_socks.py">http://twistedmatrix.com/trac/browser/trunk/twisted/test/test_socks.py</A>
</I>&gt;<i>
</I>&gt;<i>My goal is getting socksv5 client and server code merged to mainline
</I>&gt;<i>Twisted with unit tests.
</I>

twisted/test/test_socks.py is a bad example of a test suite.  Here are 
the things about it you should not emulate:

  * It has documentation that is far from complete.  Documentation is 
just as important in unit tests as elsewhere.  In particular, 
documenting the intent of every test method is critical otherwise the 
test suite is very difficult to maintain.

  * It exercises too much code in each test method.  Well written test 
methods do a single very simple thing.  A good rule of thumb is that 
there should only be one `TestCase.assert...` method call in each test 
method.

  * It uses some `TestCase.assert...` methods which are deprecated or 
soon to be deprecated.  `assert_` is the main offender here.

  * It doesn't completely cover the implementation (probably because the 
implementation wasn't developed test-driven).  You can achieve full test 
coverage without doing test-driven development but it takes more 
discipline.  I suggest doing a test-driven implementation of the SOCKSv5 
functionality you want (the easy approach to this is to start writing 
tests, then copy the *smallest* possible piece of the existing, untested 
implementation into your new implementation to make those tests pass; 
repeat until you have all of the desired functionality).

  * `StringTCPTransport` seems redundant.  `StringTransport` offers all 
of this functionality already.

  * Many names used in the module don't follow the Twisted name 
convention (most obviously, &quot;under_scores&quot; are used throughout rather 
than &quot;camelCase&quot;).

  * Native strings are used to represent byte strings throughout.

  * The protocol interface is uniformly misused (it should call 
`makeConnection` not `connectionMade`)

Hope this helps,
Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027718.html">[Twisted-Python] Ticket #1330 - Socks V5 functionality
</A></li>
	<LI>Next message (by thread): <A HREF="060182.html">[Twisted-Python] Ticket #1330 - Socks V5 functionality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60181">[ date ]</a>
              <a href="thread.html#60181">[ thread ]</a>
              <a href="subject.html#60181">[ subject ]</a>
              <a href="author.html#60181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
