<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IMAP4%20Proxy%20to%20add%20headers%20and%20modify%20body%20of%0A%09an%20incoming%20message&In-Reply-To=%3C1385596960.22519.YahooMailNeo%40web181605.mail.ne1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="027774.html">
   <LINK REL="Next"  HREF="060250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message</H1>
    <B>Krzysztof Oblucki</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20IMAP4%20Proxy%20to%20add%20headers%20and%20modify%20body%20of%0A%09an%20incoming%20message&In-Reply-To=%3C1385596960.22519.YahooMailNeo%40web181605.mail.ne1.yahoo.com%3E"
       TITLE="[Twisted-Python] IMAP4 Proxy to add headers and modify body of	an incoming message">koblucki at yahoo.com
       </A><BR>
    <I>Wed Nov 27 17:02:40 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027774.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of an	incoming message
</A></li>
        <LI>Next message (by thread): <A HREF="060250.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of an incoming message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60249">[ date ]</a>
              <a href="thread.html#60249">[ thread ]</a>
              <a href="subject.html#60249">[ subject ]</a>
              <a href="author.html#60249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Maybe I asked the wrong question?  Is it possible to use the imap4 library from twisted to write an imap4 proxy?


________________________________
 From: Krzysztof Oblucki &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">koblucki at yahoo.com</A>&gt;
To: &quot;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt; 
Sent: Monday, November 25, 2013 11:27 AM
Subject: IMAP4 Proxy to add headers and modify body of an incoming message
 


Hello,
I am trying to write an IMAP proxy to modify headers and the body of an incoming message using twisted.  I am new to python and twisted so maybe this is why I either picked the wrong route or don't have the skills to get through some issues and I'm hoping that some you fine list members can point me in the right direction.

I started by using the IMAP4Client and IMAP4Server to do the proxying.  However, I realized that in certain cases, the IMAP4Server requires synchronous results but since I need to do an async call using the client the handling is not working properly.  I ran into this when implementing getFlags() in the IMessage and I am not sure how I can get out of this short of changing the IMAP4Server code to handle Deferreds.

Am I on the right track?  Is imap4 lib the right tool for this job?  If so, is modifying IMAP4Server to handle Deferreds the right thing to do?  If not, what would you recommend?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20131127/614b175d/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027774.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of an	incoming message
</A></li>
	<LI>Next message (by thread): <A HREF="060250.html">[Twisted-Python] IMAP4 Proxy to add headers and modify body of an incoming message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60249">[ date ]</a>
              <a href="thread.html#60249">[ thread ]</a>
              <a href="subject.html#60249">[ subject ]</a>
              <a href="author.html#60249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
