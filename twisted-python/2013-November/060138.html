<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] (newbie!) smtp to message object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%28newbie%21%29%20smtp%20to%20message%20object&In-Reply-To=%3C527A1503.7030608%40nweb.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] (newbie!) smtp to message object</H1>
    <B>Fabio Sangiovanni</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%28newbie%21%29%20smtp%20to%20message%20object&In-Reply-To=%3C527A1503.7030608%40nweb.it%3E"
       TITLE="[Twisted-Python] (newbie!) smtp to message object">sangiovanni at nweb.it
       </A><BR>
    <I>Wed Nov  6 03:08:03 MST 2013</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60138">[ date ]</a>
              <a href="thread.html#60138">[ thread ]</a>
              <a href="subject.html#60138">[ subject ]</a>
              <a href="author.html#60138">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list,

I'm new to twisted and to python in general, so still deep in the 
learning process.
Please forgive any faulty assumptions you'll find in this post :)

I'm trying to accomplish to the following task: realize a tool that acts 
as a proxy between the SMTP domain and the 'objects' domain. That is: a 
daemon that listens for SMTP connections (relayed sessions from Postfix) 
and bundles everything that belongs to a single session (envelope 
sender, envelope recipients, headers, body) into an object (it will 
probably become a JSON one day, not decided yet). The aim is to allow 
further processing (es. publishing to a queue) of a self-contained item.

My (draft) implementation can be reached at <A HREF="http://pastebin.com/mbRztuid">http://pastebin.com/mbRztuid</A>

My main concerns are:
1) am I using the right classes? My implementation leverages 
twisted.mail.smtp, is this correct?
2) I've overridden smtp.SMTP._cbToValidate; I really don't like this 
very much (I'd like to leave the protocol untouched) but it's the only 
way I've come up with (after several days of experiments :) ) to have 
one single payload down the line (in smtp.SMTP.do_DATA), and not one 
copy of the message for every single recipient. May this have bad 
consequences?
3) what do you think about the overall approach? could it have been done 
differently/better?

Thanks a lot for your help!

Fabio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20131106/d827aa01/attachment-0002.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60138">[ date ]</a>
              <a href="thread.html#60138">[ thread ]</a>
              <a href="subject.html#60138">[ subject ]</a>
              <a href="author.html#60138">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
