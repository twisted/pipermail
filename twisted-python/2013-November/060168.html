<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Introducing Aether, a peer-to-peer, anonymous forums app built with Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Introducing%20Aether%2C%20a%20peer-to-peer%2C%0A%20anonymous%20forums%20app%20built%20with%20Twisted&In-Reply-To=%3CetPan.528134ca.7724c67e.5961%40Buraks-MacBook-Pro.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="060167.html">
   <LINK REL="Next"  HREF="060169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Introducing Aether, a peer-to-peer, anonymous forums app built with Twisted</H1>
    <B>Burak Nehbit</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Introducing%20Aether%2C%20a%20peer-to-peer%2C%0A%20anonymous%20forums%20app%20built%20with%20Twisted&In-Reply-To=%3CetPan.528134ca.7724c67e.5961%40Buraks-MacBook-Pro.local%3E"
       TITLE="[Twisted-Python] Introducing Aether, a peer-to-peer, anonymous forums app built with Twisted">burak at nehbit.net
       </A><BR>
    <I>Mon Nov 11 12:49:30 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="060167.html">[Twisted-Python] Determine TLS version from within request handler ? (twisted web)
</A></li>
        <LI>Next message (by thread): <A HREF="060169.html">[Twisted-Python] Introducing Aether, a peer-to-peer,	anonymous forums app built with Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60168">[ date ]</a>
              <a href="thread.html#60168">[ thread ]</a>
              <a href="subject.html#60168">[ subject ]</a>
              <a href="author.html#60168">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

I wanted to share with you the yearlong project I have been working on, which led me to discover Twisted besides many other things. It’s using Twisted for all peer-to-peer network connections. This also has led me to produce a Qt5 reactor for Twisted (anyone needs this, I can send, MIT)

The app is here: <A HREF="http://www.getaether.net">http://www.getaether.net</A>

Aether is a desktop application that provides its users anonymous public spaces for discussion. It’s pretty close to the archetypal form (reddit / slashdot) with votes and else.

The networking backend is Twisted (AMP). The way distribution works is this: If an user upvotes a post, the user’s computer will start to distribute that post. When an user receives a post, if the post received does not have at least ten (an arbitrary number) copies in computers around him, it will mark the post as under extinction danger, and start to distribute it. 

The number of upvotes are the number of times an user sees the same post in other computers. The posts are then lined up according to their upvotes. That’s mostly all there is to it. Oh and it’s encrypted to teeth :). (TLS_RSA_WITH_AES_256_CBC_SHA, 2048 bit RSA keys)

The code is here:

<A HREF="https://github.com/nehbit/aether-public/">https://github.com/nehbit/aether-public/</A>

Since this is the first project I have built using Twisted (and the reason I discovered &amp; learned it in the first place), I wanted to share it with you. I’d welcome all critique / comments—this is a long term project, and I’m just starting out. Critique on Twisted code, (which is all over the place) is especially welcomed.

I have sought help from some of you before, and all the reply I have received had been unfailingly kind. So this is a collective thank–you for this mailing list and for the general Twisted / Python community, without which Aether would not exist.

Best,
Burak



On November 11, 2013 at 11:52:39 AM, Werner Thie (<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">werner at thieprojects.ch</A>) wrote:

On 11/10/13 10:45 PM, Rob Meijer wrote:  
&gt;<i> On Wed, November 6, 2013 15:38, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:  
</I>&gt;&gt;<i> On 11:43 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rmeijer at xs4all.nl</A> wrote:  
</I>&gt;&gt;&gt;<i> I'm using twisted web for an https connection. At first I start with  
</I>&gt;&gt;&gt;<i> creating and configuring a ssl.DefaultOpenSSLContextFactory derived  
</I>&gt;&gt;&gt;<i> class  
</I>&gt;&gt;&gt;<i> that disables SSLv2 and SSLv3. So (basically we're left with TLS1.0 and  
</I>&gt;&gt;&gt;<i> up) and forces the use of a single strong (non RC4 but BEAST  
</I>&gt;&gt;&gt;<i> vulnerable)  
</I>&gt;&gt;&gt;<i> cipher.  
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> Than I have a http.HTTPFactory derived class with a 'buildProtocol'that  
</I>&gt;&gt;&gt;<i> return a http.HTTPChannel derived object, that in turn returns a  
</I>&gt;&gt;&gt;<i> http.Request derived object.  
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> Than reactor.listenSSL is invoked with both the SSL factory and the  
</I>&gt;&gt;&gt;<i> HTTP  
</I>&gt;&gt;&gt;<i> factory. Now my problem. I don't really understand how these two are  
</I>&gt;&gt;&gt;<i> connected once the request handler gets invoked.  
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> What I would like to do is that I would want to allow TLS1.0 users to  
</I>&gt;&gt;&gt;<i> use  
</I>&gt;&gt;&gt;<i> the server, but only after explicitly agreeing that they understand the  
</I>&gt;&gt;&gt;<i> risks involved with using an old BEAST vulnerable browser.  
</I>&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;<i> Is there any way to retrieve info on what TLS version has been  
</I>&gt;&gt;&gt;<i> negotiated  
</I>&gt;&gt;<i> &gt;from within the HTTP request handler? I've been walking the 'self'  
</I>&gt;&gt;&gt;<i> object  
</I>&gt;&gt;&gt;<i> a bit, and self.transport.getHandle() seems to have some tls stuff like  
</I>&gt;&gt;&gt;<i> 'get_cipher_list' and 'get_peer_certificate', but the simple TLS  
</I>&gt;&gt;&gt;<i> version  
</I>&gt;&gt;&gt;<i> number does not seem to be available.  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> The object you get back from `self.transport.getHandle()` happens to be  
</I>&gt;&gt;<i> an object from pyOpenSSL - an instance of OpenSSL.SSL.Connection. While  
</I>&gt;&gt;<i> reading the following, though, bear in mind that `getHandle` doesn't  
</I>&gt;&gt;<i> make much of a promise about what it will return. Other transports may  
</I>&gt;&gt;<i> return something else and future versions of Twisted may change the  
</I>&gt;&gt;<i> result as well.  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> The API that OpenSSL appears to offer for determining what protocol  
</I>&gt;&gt;<i> version is in use appears to be SSL_get_version(). This returns a  
</I>&gt;&gt;<i> string like &quot;SSLv2&quot; or &quot;TLSv1&quot; (the documentation doesn't say anything  
</I>&gt;&gt;<i> about TLSv1.1 or TLSv1.2 but *presumably* if you have a version of  
</I>&gt;&gt;<i> OpenSSL that implements either of these protocols and one of them is  
</I>&gt;&gt;<i> negotiated on a connection then SSL_get_version() will identify them in  
</I>&gt;&gt;<i> its result).  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> pyOpenSSL, however, does not expose this method. So in order to get the  
</I>&gt;&gt;<i> information you need you may need to contribute a binding for this  
</I>&gt;&gt;<i> method to pyOpenSSL.  
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i> Jean-Paul  
</I>&gt;<i>  
</I>&gt;<i> Hi Jean-Paul,  
</I>&gt;<i>  
</I>&gt;<i> Tnx very much for your answer. I've now ended up with what I think is a  
</I>&gt;<i> bit of a hack. I've consulted the wikipedia page on TLS :  
</I>&gt;<i>  
</I>&gt;<i> <A HREF="http://en.wikipedia.org/wiki/Transport_Layer_Security#Web_browsers">http://en.wikipedia.org/wiki/Transport_Layer_Security#Web_browsers</A>  
</I>&gt;<i>  
</I>&gt;<i> and added some code that checks the browser version as reported un the  
</I>&gt;<i> user-agent header against the minimum version of major browsers that  
</I>&gt;<i> report to have TLS1.1 support both implemented and enabled by default.  
</I>&gt;<i> I'm not fully satisfied with this one, but unfortunately it seems to be  
</I>&gt;<i> the only viable option for my current project :-(  
</I>&gt;<i>  
</I>
Hi Rob  

Seeing that you are checking the UA header, I have a bit of information  
concerning UA detection code, which lead to me filing a bug report for  
nevow which stumbles over this problem  

<A HREF="https://bugs.launchpad.net/nevow/+bug/1249946">https://bugs.launchpad.net/nevow/+bug/1249946</A>  

As you can see from the link in bug report, IE11 is posing as many  
beasts, but in standard mode the UA string is  

'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko'  

HTH, Werner  

_______________________________________________  
Twisted-Python mailing list  
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>  
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20131111/2fa3fb21/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="060167.html">[Twisted-Python] Determine TLS version from within request handler ? (twisted web)
</A></li>
	<LI>Next message (by thread): <A HREF="060169.html">[Twisted-Python] Introducing Aether, a peer-to-peer,	anonymous forums app built with Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60168">[ date ]</a>
              <a href="thread.html#60168">[ thread ]</a>
              <a href="subject.html#60168">[ subject ]</a>
              <a href="author.html#60168">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
