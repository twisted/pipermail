<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Fixes for windows installer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Fixes%20for%20windows%20installer&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003119.html">
   <LINK REL="Next"  HREF="003113.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Fixes for windows installer</H1>
    <B>Cory Dodt</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Fixes%20for%20windows%20installer&In-Reply-To="
       TITLE="[Twisted-Python] Re: Fixes for windows installer">corydodt at yahoo.com
       </A><BR>
    <I>Fri Feb 28 13:53:06 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003119.html">[Twisted-Python] GtkWindow
</A></li>
        <LI>Next message: <A HREF="003113.html">[Twisted-Python] Re: Fixes for windows installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3112">[ date ]</a>
              <a href="thread.html#3112">[ thread ]</a>
              <a href="subject.html#3112">[ subject ]</a>
              <a href="author.html#3112">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I like where this is going, and I certainly have no complaints about
dumping shortcut.py, but could you please review a few things before I
commit this:

* Putting install-script into setup.cfg makes your change visible to
everyone who's building a distribution of Twisted.  As you pointed out
yourself, you can't use install-script without distutils 1.0.3, and
Twisted has to support pythons 2.1 and 2.2.  Will this config parameter be
ignored by setup.py when building a Twisted install on distutils &lt;1.0.3 or
will it cause an error?

* You made this change to the test I use for isWinNT:
-    if platform.isWinNT():
-        return os.path.join(os.getenv(&quot;SYSTEMROOT&quot;), 
-                            &quot;system32&quot;, &quot;shell32.dll&quot;)
+    # If SYSTEMROOT is not found (on Win98), guess the name
+    # of the windows directory
+    isNT = 0
+    try:
+        get_special_folder_path(&quot;CSIDL_COMMON_PROGRAMS&quot;)
+        isNT = 1
+    except OSError: # probably Win98
+        pass

Is the implementation of platform.isWinNT() broken?  If so, I'd rather you
patched it there.  If not, I'd rather keep using it.

* Most important thing: test_postinstall doesn't work with this patch,
because create_shortcut and get_special_folder_path appear to be magical
builtins installed by distutils.  I'll be happy to rewrite the test if you
can point me to the right place to import this code when it's not
available as a builtin.


__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - forms, calculators, tips, more
<A HREF="http://taxes.yahoo.com/">http://taxes.yahoo.com/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003119.html">[Twisted-Python] GtkWindow
</A></li>
	<LI>Next message: <A HREF="003113.html">[Twisted-Python] Re: Fixes for windows installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3112">[ date ]</a>
              <a href="thread.html#3112">[ thread ]</a>
              <a href="subject.html#3112">[ subject ]</a>
              <a href="author.html#3112">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
