<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Serving files, again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Serving%20files%2C%20again&In-Reply-To=20030226195135.GA23100%40doublegemini.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003086.html">
   <LINK REL="Next"  HREF="003088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Serving files, again</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Serving%20files%2C%20again&In-Reply-To=20030226195135.GA23100%40doublegemini.com"
       TITLE="[Twisted-Python] Serving files, again">exarkun at intarweb.us
       </A><BR>
    <I>Wed Feb 26 14:50:31 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003086.html">[Twisted-Python] Serving files, again
</A></li>
        <LI>Next message: <A HREF="003088.html">[Twisted-Python] Serving files, again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3087">[ date ]</a>
              <a href="thread.html#3087">[ thread ]</a>
              <a href="subject.html#3087">[ subject ]</a>
              <a href="author.html#3087">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Feb 26, 2003 at 07:51:35PM +0000, Clark C. Evans wrote:
&gt;<i> On Wed, Feb 26, 2003 at 07:20:02PM +0000, Clark C. Evans wrote:
</I>&gt;<i> | 
</I>&gt;<i> | I don't know if this is your question; but I'd return the contents
</I>&gt;<i> | of file.txt when the file size is less than a pre-defined size, say 32K.
</I>&gt;<i> | Beyond that, the file should be DEFERRED into a thread which sends
</I>&gt;<i> | the file a chunk at a time.   Further, it'd be cool if I could 
</I>&gt;<i> | specify in the request object if the response should be compressed
</I>&gt;<i> | via gzip.
</I>&gt;<i> 
</I>&gt;<i> Actually, shouldn't it always be deferred?  The file system may
</I>&gt;<i> be writing at the time (via another thread) so doing a file read
</I>&gt;<i> (even for a tiny file) at this point could cause significant lag 
</I>&gt;<i> or am I completely mis-understanding this whole async-stuff?
</I>
  We usually consider IO on local fixed disks to be fast enough.  In any
case, select() in POSIX tells you that files are always ready for reading,
so being smarter about it requires using a different mechanism (which is
entirely possible, but requires a different reactor, not to mention platform
support).

  BTW, deferring to a thread would not be the way to go.  Something similar
to twisted.spread.util.Pager would probably be appropriate, or maybe
something that implements IProducer.  Or maybe just a chain of Deferreds :)
No need to go into threads for this, though.

  Jp

-- 
        &quot;I quite agree with you,&quot; said the Duchess; &quot;and the moral of
that is -- Be what you would seem to be' -- or, if you'd like it put
more simply -- Never imagine yourself not to be otherwise than what it
might appear to others that what you were or might have been was not 
otherwise than what you had been would have appeared to them to be
otherwise.'&quot;       -- Lewis Carrol, &quot;Alice in Wonderland&quot;
-- 
 up 18 days, 0:29, 5 users, load average: 0.47, 0.28, 0.14
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20030226/424ce591/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20030226/424ce591/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003086.html">[Twisted-Python] Serving files, again
</A></li>
	<LI>Next message: <A HREF="003088.html">[Twisted-Python] Serving files, again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3087">[ date ]</a>
              <a href="thread.html#3087">[ thread ]</a>
              <a href="subject.html#3087">[ subject ]</a>
              <a href="author.html#3087">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
