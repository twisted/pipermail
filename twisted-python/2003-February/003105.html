<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Serving a binary files from disk, outside folders for static content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Serving%20a%20binary%20files%20from%20disk%2C%20outside%20folders%20for%20static%20content&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003108.html">
   <LINK REL="Next"  HREF="003106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Serving a binary files from disk, outside folders for static content</H1>
    <B>Thomas Weholt</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Serving%20a%20binary%20files%20from%20disk%2C%20outside%20folders%20for%20static%20content&In-Reply-To="
       TITLE="[Twisted-Python] Serving a binary files from disk, outside folders for static content">2002 at weholt.org
       </A><BR>
    <I>Thu Feb 27 16:59:26 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003108.html">[Twisted-Python] reactor.run() or application.save()+run?
</A></li>
        <LI>Next message: <A HREF="003106.html">[Twisted-Python] Serving a binary files from disk, outside folders for static content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3105">[ date ]</a>
              <a href="thread.html#3105">[ thread ]</a>
              <a href="subject.html#3105">[ subject ]</a>
              <a href="author.html#3105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I need to serve a binary file from disk, not available in the normal folder for static content. In my code so far I've done something like this in the render-method :

request.setContentType( .... content-type set based on extension of file to serve )
f = open(somefile)
while 1:
    d = f.read(2048) # what's the correct size to read
    if not d:
        break
    request.write(d)
request.finish()
return

It seem to return the data OK, it's visible in the browser, but exceptions are raised in the server. How do I close this connection the right way? Should this be used with deferred or something like that? The files can be huge in size.

PS! From recent postings in this list is seems as if Twisted doesn't support compression of content, using gzip etc. Is this true? This would speed up things considerably. I implemented this in my previous webserver-project using BaseHTTPServer and on big files the increase in speed was impressive. Compressing HTML/Plain text/XML etc., just files known to be based in plain text, would be a great start.

Best regards,
Thomas Weholt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20030227/8efaf712/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20030227/8efaf712/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003108.html">[Twisted-Python] reactor.run() or application.save()+run?
</A></li>
	<LI>Next message: <A HREF="003106.html">[Twisted-Python] Serving a binary files from disk, outside folders for static content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3105">[ date ]</a>
              <a href="thread.html#3105">[ thread ]</a>
              <a href="subject.html#3105">[ subject ]</a>
              <a href="author.html#3105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
