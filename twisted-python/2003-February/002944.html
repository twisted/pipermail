<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] session
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20session&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002942.html">
   <LINK REL="Next"  HREF="002945.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] session</H1>
    <B>Thomas Weholt</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20session&In-Reply-To="
       TITLE="[Twisted-Python] session">2002 at weholt.org
       </A><BR>
    <I>Sat Feb 15 19:08:04 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002942.html">[Twisted-Python] session
</A></li>
        <LI>Next message: <A HREF="002945.html">[Twisted-Python] session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2944">[ date ]</a>
              <a href="thread.html#2944">[ thread ]</a>
              <a href="subject.html#2944">[ subject ]</a>
              <a href="author.html#2944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is very interesting. I found out much of what was unclear when I posted
my earlier posting to this list by looking at this code. But I have some
more questions :

- how do I send HTTP-headers to the client?

- if I want to create some webservices, both XML-RPC and SOAP-based without
starting a different server using something like the code below, how do I do
that? I want to run one server, providing both webservices and content aimed
at browsers.

- is this the preferred way of doing things? Can I base my work on this
example? Drawbacks? I need the fastest, most scalable method available,
which can handle lots of concurrent users, several downloads and processes
at the same time, both using simple web-pages, webservices like the ones
mentioned earlier and ftp-access for administrators to maintain files served
by the server, both static files and source-code. The server should be able
to reload, using updated source without a complete restart. That would be
the ultimate platform. I'm still a bit unclear on wheter Twisted is a async.
*blocking* framework, making concurrent downloads harder, if at all
possible, or if it is similar to the threaded solution available in the
standard python distr. I've based my solutions on a threaded version of
BaseHTTPServer so far, and been told this is not very scalable. But I need a
non-blocking solution, where one process doesn't lock the entire server
until that process is over before other clients are handled.

Any clues, hints, code or flames appreciated. Thanks so far. Twisted looks
great !! :-)

Best regards,
Thomas


----- Original Message -----
From: &quot;William Dode&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wilk-ml at flibuste.net</A>&gt;
To: &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
Sent: Saturday, February 15, 2003 7:11 PM
Subject: [Twisted-Python] session


&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I did an other litle example to see how can work session. A shop where
</I>&gt;<i> you put some articles in your bag...
</I>&gt;<i>
</I>&gt;<i> I do request.getSession() and set attribute directly to the session...
</I>&gt;<i> Is it the good way ?
</I>&gt;<i>
</I>&gt;<i> import twisted.web.resource
</I>&gt;<i> import cgi
</I>&gt;<i>
</I>&gt;<i> class Shop(twisted.web.resource.Resource):
</I>&gt;<i>     &quot;&quot;&quot; ReportRequest with forms and cookies &quot;&quot;&quot;
</I>&gt;<i>     articles=(&quot;chocolate&quot;,&quot;banana&quot;,&quot;apple&quot;)
</I>&gt;<i>     def isLeaf(self):
</I>&gt;<i>         return true
</I>&gt;<i>     def render(self, request):
</I>&gt;<i>         session = request.getSession()
</I>&gt;<i>         try:
</I>&gt;<i>             bag = session.bag
</I>&gt;<i>         except AttributeError:
</I>&gt;<i>             bag = session.bag={}
</I>&gt;<i>
</I>&gt;<i>         try:
</I>&gt;<i>             article = request.args[&quot;put&quot;][0]
</I>&gt;<i>             bag[article] = session.bag.get(article,0)+1
</I>&gt;<i>         except KeyError:
</I>&gt;<i>             pass # no article to put
</I>&gt;<i>
</I>&gt;<i>         out = []
</I>&gt;<i>         out.append(&quot;&quot;&quot;&lt;html&gt;&lt;body&gt;What do you want to put in your bag
</I>?&lt;br&gt;
&gt;<i>         &lt;a href='?put=chocolate'&gt;chocolate&lt;/a&gt;&lt;br&gt;
</I>&gt;<i>         &lt;a href='?put=banana'&gt;banana&lt;/a&gt;&lt;br&gt;
</I>&gt;<i>         &lt;a href='?put=apple'&gt;apple&lt;/a&gt;&lt;br&gt;
</I>&gt;<i>         &quot;&quot;&quot;)
</I>&gt;<i>         if len(bag) == 0:
</I>&gt;<i>             out.append(&quot;Your bag is empty&quot;)
</I>&gt;<i>         else:
</I>&gt;<i>             out.append(&quot;You have in your bag :&lt;br&gt;&quot;)
</I>&gt;<i>             for k,v in bag.items():
</I>&gt;<i>                 out.append(&quot;%d %s&lt;br&gt;&quot;%(v,k))
</I>&gt;<i>         return &quot;&quot;.join(out)
</I>&gt;<i>
</I>&gt;<i> from twisted.internet import reactor
</I>&gt;<i> from twisted.web import static, server
</I>&gt;<i>
</I>&gt;<i> site = server.Site(Shop())
</I>&gt;<i> reactor.listenTCP(8080,site)
</I>&gt;<i> reactor.run()
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002942.html">[Twisted-Python] session
</A></li>
	<LI>Next message: <A HREF="002945.html">[Twisted-Python] session
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2944">[ date ]</a>
              <a href="thread.html#2944">[ thread ]</a>
              <a href="subject.html#2944">[ subject ]</a>
              <a href="author.html#2944">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
