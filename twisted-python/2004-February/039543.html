<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20SNMP%20%28was%3A%20Advice%20on%20doing%20thousands%20of%20simultaneous%0A%20UDP%20queries%20with%20Twisted...%29&In-Reply-To=%3C40289E7C.9000100%40accelance.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039542.html">
   <LINK REL="Next"  HREF="039544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)</H1>
    <B>Thomas Favier</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20SNMP%20%28was%3A%20Advice%20on%20doing%20thousands%20of%20simultaneous%0A%20UDP%20queries%20with%20Twisted...%29&In-Reply-To=%3C40289E7C.9000100%40accelance.fr%3E"
       TITLE="[Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)">Thomas.Favier at accelance.fr
       </A><BR>
    <I>Tue Feb 10 02:03:56 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039542.html">[Twisted-Python] Advice on doing thousands of simultaneous UDP queries with Twisted...
</A></li>
        <LI>Next message (by thread): <A HREF="039544.html">[Twisted-Python] Twisted and SNMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39543">[ date ]</a>
              <a href="thread.html#39543">[ thread ]</a>
              <a href="subject.html#39543">[ subject ]</a>
              <a href="author.html#39543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mike C. Fletcher wrote:
&gt;<i> If for no other reason than that it convinced me there wasn't a simple 
</I>&gt;<i> and elegant solution readily available to be dropped in for a UDP system 
</I>&gt;<i> :) .  In the final analysis, what was happening is that individual 
</I>&gt;<i> queries were timing out *before the queries were even sent* because it 
</I>&gt;<i> was taking so incredibly long to format and send all of the queries.
</I>
You bring my point with SNMP : I've tried to build a SNMP poller based 
on twisted and pySNMP. Main trouble i've had is the decoding time of the 
pure python ASN parser. It spent about 1 full second decoding (packets 
are about 7ko, as i get all values and tables with a GET-BULK, there is 
room for improvement by splitting requests, but that's not significant 
for that matter). So i switched to a threaded implementation using 
yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
for the same requests. Load on the server was more than halved.

Seems that you are hit by the same kind of problems...

I've dug the source of UCD-SNMP but was not able to see a simple hack to 
integrate the UCD packet decoding and the twisted loop, especially with 
the parts dealing with SNMPv3 (UCD- and NET-snmp almost forces you to 
use their select wrapper...) Moreover, the last yapsnmp release is based 
on v4.3 so a little out of date. As my solution works for my (smaller) 
needs, i currently have no plan to improve my solution, but if anyone is 
interested in bringing a full high performance ASN coder-decoder to 
twisted, i'd be willing to help.


-- 
Thomas FAVIER
.accelance msp
Tel. +33 4 26 29 12 22
<A HREF="http://www.accelance.fr">http://www.accelance.fr</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039542.html">[Twisted-Python] Advice on doing thousands of simultaneous UDP queries with Twisted...
</A></li>
	<LI>Next message (by thread): <A HREF="039544.html">[Twisted-Python] Twisted and SNMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39543">[ date ]</a>
              <a href="thread.html#39543">[ thread ]</a>
              <a href="subject.html#39543">[ subject ]</a>
              <a href="author.html#39543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
