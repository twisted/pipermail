<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted and SNMP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20SNMP&In-Reply-To=%3C4028A3DE.2020101%40rogers.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039543.html">
   <LINK REL="Next"  HREF="039545.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted and SNMP</H1>
    <B>Mike C. Fletcher</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20SNMP&In-Reply-To=%3C4028A3DE.2020101%40rogers.com%3E"
       TITLE="[Twisted-Python] Twisted and SNMP">mcfletch at rogers.com
       </A><BR>
    <I>Tue Feb 10 02:26:54 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039543.html">[Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)
</A></li>
        <LI>Next message (by thread): <A HREF="039545.html">[Twisted-Python] Re: Twisted and SNMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39544">[ date ]</a>
              <a href="thread.html#39544">[ thread ]</a>
              <a href="subject.html#39544">[ subject ]</a>
              <a href="author.html#39544">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thomas Favier wrote:

&gt;<i> Mike C. Fletcher wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> If for no other reason than that it convinced me there wasn't a 
</I>&gt;&gt;<i> simple and elegant solution readily available to be dropped in for a 
</I>&gt;&gt;<i> UDP system :) .  In the final analysis, what was happening is that 
</I>&gt;&gt;<i> individual queries were timing out *before the queries were even 
</I>&gt;&gt;<i> sent* because it was taking so incredibly long to format and send all 
</I>&gt;&gt;<i> of the queries.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You bring my point with SNMP : I've tried to build a SNMP poller based 
</I>&gt;<i> on twisted and pySNMP. Main trouble i've had is the decoding time of 
</I>&gt;<i> the pure python ASN parser. It spent about 1 full second decoding 
</I>&gt;<i> (packets are about 7ko, as i get all values and tables with a 
</I>&gt;<i> GET-BULK, there is room for improvement by splitting requests, but 
</I>&gt;<i> that's not significant for that matter). So i switched to a threaded 
</I>&gt;<i> implementation using yapsnmp (and ugly deferToThreads). Decoding times 
</I>&gt;<i> are about 0.02 seconds for the same requests. Load on the server was 
</I>&gt;<i> more than halved.
</I>&gt;<i>
</I>&gt;<i> Seems that you are hit by the same kind of problems...
</I>
...

&gt;<i> but if anyone is interested in bringing a full high performance ASN 
</I>&gt;<i> coder-decoder to twisted, i'd be willing to help.
</I>
Ilya (creator of PySNMP) just released a new version of PySNMP 
yesterday.  It's noticeably faster feeling than the 3.3.x version.  I 
don't have time to do timings with it, but I'd guess it's probably 
taking 3/4 of the time of the previous version.  Still likely not 0.02 
seconds on getbulk requests, but noticeably faster.

Profiling the ASN parser and writing a small accelerator module would 
likely be quite doable.  From what I've seen there's not a lot of 
complex code in there.  It's just hidden deep in the package structure.  
Nice thing about that approach is that it's possible to port to new 
platforms and only worry about the C module being present if you need 
the speed there.

My primary interest here isn't really in speed, we query 8000 agents at 
a time, and only need to query once every few *hours*.  The flexibility 
&amp; robustness of the code is my primary interest.  Too much C gets me 
worried :) , particularly with networking code, where buffer overflows 
and the like are a pain to avoid.

Have fun,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  <A HREF="http://members.rogers.com/mcfletch/">http://members.rogers.com/mcfletch/</A>




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039543.html">[Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)
</A></li>
	<LI>Next message (by thread): <A HREF="039545.html">[Twisted-Python] Re: Twisted and SNMP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39544">[ date ]</a>
              <a href="thread.html#39544">[ thread ]</a>
              <a href="subject.html#39544">[ subject ]</a>
              <a href="author.html#39544">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
