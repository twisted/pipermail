<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] DeferredList.addDeferred behaviour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20DeferredList.addDeferred%20behaviour&In-Reply-To=2d2a32c19b.2c19b2d2a3%40noborrar.co.cl">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007091.html">
   <LINK REL="Next"  HREF="007094.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] DeferredList.addDeferred behaviour</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20DeferredList.addDeferred%20behaviour&In-Reply-To=2d2a32c19b.2c19b2d2a3%40noborrar.co.cl"
       TITLE="[Twisted-Python] DeferredList.addDeferred behaviour">andrew-twisted at puzzling.org
       </A><BR>
    <I>Wed Feb 18 20:32:45 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007091.html">[Twisted-Python] DeferredList.addDeferred behaviour
</A></li>
        <LI>Next message: <A HREF="007094.html">[Twisted-Python] DeferredList.addDeferred behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7093">[ date ]</a>
              <a href="thread.html#7093">[ thread ]</a>
              <a href="subject.html#7093">[ subject ]</a>
              <a href="author.html#7093">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Feb 18, 2004 at 09:37:53PM -0300, RITA Y/O RODRIGO DIAZ Y/O BENENSON wrote:
&gt;<i> I have been playing with DeferredList if found that his behaviour was not
</I>&gt;<i> what I expected,
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt;&gt; dfl = DeferredList([])
</I>&gt;<i> &gt;&gt;&gt; print dfl.called
</I>&gt;<i> True
</I>&gt;<i> &gt;&gt;&gt; dfl.addDeferred(d)
</I>&gt;<i> &gt;&gt;&gt; d.called
</I>&gt;<i> 0
</I>&gt;<i> &gt;&gt;&gt; print dfl.called
</I>&gt;<i> True
</I>&gt;<i> 
</I>&gt;<i> The workaround it to first create the list of deferred instance and then
</I>&gt;<i> instanciate with it the DeferredList. But what sense does have the
</I>&gt;<i> addDeferred method then ? I this behaviour what is supposed to be ?
</I>
It's not clear to me what the right behaviour here is -- if a DeferredList
has some number of Deferreds that have all been called, then of course the
DeferredList should be marked as called, too.  But if you then add an
uncalled Deferred to it, that sounds like a bug.  I'd be inclined to make
DeferredList.addDeferred raise an exception in this case -- &quot;In the face of
ambiguity, refuse the temptation to guess.&quot; (although perhaps a warning
would be better for a release or two, for backwards compatibility)

I'm tempted to go even further and just deprecate addDeferred.  I can't see
a good use-case for it, and grep of the entire Twisted code base finds no
uses outside of the test suite.  It's not obvious or intuitive exactly what
addDeferred should do in at least this situation, and probably others.  I
can't think of any situation where addDeferred is required, and I think
calling it with the final list upfront is more readable, anyway.

Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
you added it, can you remember why?  Is anyone using it?

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007091.html">[Twisted-Python] DeferredList.addDeferred behaviour
</A></li>
	<LI>Next message: <A HREF="007094.html">[Twisted-Python] DeferredList.addDeferred behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7093">[ date ]</a>
              <a href="thread.html#7093">[ thread ]</a>
              <a href="subject.html#7093">[ subject ]</a>
              <a href="author.html#7093">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
