<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted 21.7.0 Pre-Release Announcement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2021.7.0%20Pre-Release%20Announcement&In-Reply-To=%3C54C882D0-0F53-4A91-8401-125D3FD2EC4F%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065665.html">
   <LINK REL="Next"  HREF="065671.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted 21.7.0 Pre-Release Announcement</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2021.7.0%20Pre-Release%20Announcement&In-Reply-To=%3C54C882D0-0F53-4A91-8401-125D3FD2EC4F%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted 21.7.0 Pre-Release Announcement">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Jul 17 16:22:15 MDT 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065665.html">[Twisted-Python] Twisted 21.7.0 Pre-Release Announcement
</A></li>
        <LI>Next message (by thread): <A HREF="065671.html">[Twisted-Python] Twisted 21.7.0 Pre-Release Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65666">[ date ]</a>
              <a href="thread.html#65666">[ thread ]</a>
              <a href="subject.html#65666">[ subject ]</a>
              <a href="author.html#65666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On Jul 17, 2021, at 3:47 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adiroiban at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Fri, 16 Jul 2021 at 20:27, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> On Jul 16, 2021, at 2:20 AM, Richard van der Hoff &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">richard at matrix.org</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">richard at matrix.org</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On 16/07/2021 00:18, Glyph wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On Jul 15, 2021, at 9:00 AM, Richard van der Hoff &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">richard at matrix.org</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">richard at matrix.org</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> We can't just go and add type annotations because we need to maintain compatibility with older Twisted (to make it possible to package in Debian et al).
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Any suggestions for keeping mypy happy?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Are you saying you need it to typecheck against older versions or just run against them?
</I>&gt;&gt;<i> Ah, this gave me the clue I needed. We just need to run against them. Which means I can put type hints in comments, where they will be ignored at runtime. It's fiddly, but it will work well enough.
</I>&gt;&gt;<i> 
</I>&gt;<i> You can also do 'from __future__ import annotations' to avoid the annotations getting evaluated, which might be slightly less awkward.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Thanks Glyph, and thanks to Adi and Barry for your suggestions too.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> One particular problem I came across was the type annotation on inlineCallbacks. I've filed <A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A>&gt; about it - would appreciate thoughts.
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This definitely looks wrong; there should be a TypeVar in there.  Adi, I'd go so far as to say that this should be a release blocker, although the change should be fairly minimal.
</I>&gt;<i> 
</I>&gt;<i> Richard, could you please make a proper PR for this to get CI kicked off and make sure the new annotation doesn't cause any failures?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I think that I will do a RC2 release candidate, since due to this issue the GHA tests on RC1 are red - <A HREF="https://github.com/twisted/twisted/pull/1628">https://github.com/twisted/twisted/pull/1628</A> &lt;<A HREF="https://github.com/twisted/twisted/pull/1628">https://github.com/twisted/twisted/pull/1628</A>&gt;
</I>&gt;<i> So I plan to cherry-pick those changes and do a RC2.
</I>&gt;<i> 
</I>&gt;<i> Regarding  the release blocker, I will block the release for any ticket from <A HREF="https://twistedmatrix.com/trac/report/26">https://twistedmatrix.com/trac/report/26</A> &lt;<A HREF="https://twistedmatrix.com/trac/report/26">https://twistedmatrix.com/trac/report/26</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Right now, I have added <A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A>&gt; to that report.
</I>&gt;<i> 
</I>&gt;<i> So, if anyone knows how to fix <A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A>&gt; please help to unblock the release.
</I>&gt;<i> 
</I>&gt;<i> Or if you think that <A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/10231">https://twistedmatrix.com/trac/ticket/10231</A>&gt; should not be a release blocker, please add your comments.
</I>&gt;<i> 
</I>&gt;<i> For now, I will delay the release of RC2 to wait to see what is the resolution for #10231
</I>
This depends largely upon your available time and the difficulty of making these changes, but I'd suggest doing an RC2 as soon as the fixes are ready for the new python versions, to ensure folks can test with those, and then do an RC3 as soon as the annotation fix is ready.

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20210717/25c5aed2/attachment.htm&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065665.html">[Twisted-Python] Twisted 21.7.0 Pre-Release Announcement
</A></li>
	<LI>Next message (by thread): <A HREF="065671.html">[Twisted-Python] Twisted 21.7.0 Pre-Release Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65666">[ date ]</a>
              <a href="thread.html#65666">[ thread ]</a>
              <a href="subject.html#65666">[ subject ]</a>
              <a href="author.html#65666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
