<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Streaming HTTP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Streaming%20HTTP&In-Reply-To=%3CA84ADCF6-7BC2-4996-BBE5-ED345BEFFF0D%40me.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029920.html">
   <LINK REL="Next"  HREF="029938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Streaming HTTP</H1>
    <B>Louis D. Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Streaming%20HTTP&In-Reply-To=%3CA84ADCF6-7BC2-4996-BBE5-ED345BEFFF0D%40me.com%3E"
       TITLE="[Twisted-Python] Streaming HTTP">ldanielburr at me.com
       </A><BR>
    <I>Mon Nov 16 09:25:38 MST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="029920.html">[Twisted-Python] Streaming HTTP
</A></li>
        <LI>Next message: <A HREF="029938.html">[Twisted-Python] Streaming HTTP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29917">[ date ]</a>
              <a href="thread.html#29917">[ thread ]</a>
              <a href="subject.html#29917">[ subject ]</a>
              <a href="author.html#29917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Cory,

&gt;<i> On Nov 13, 2015, at 6:36 AM, Cory Benfield &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cory at lukasa.co.uk</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Folks,
</I>&gt;<i> 
</I>&gt;<i> # Problem Statement
</I>&gt;<i> 
</I>&gt;<i> Thanks for your feedback on my HTTP/2 questions. I&#8217;ve started work implementing a spike of a HTTP/2 protocol for twisted.web. I&#8217;m aiming to have something that works in at least some cases by the end of the day.
</I>&gt;<i> 
</I>&gt;<i> As part of my dive into twisted.web, I noticed something that surprised me: it seems to have no support for &#8216;streaming&#8217; request bodies. By this I mean that the Request.requestReceived() method is not actually called until the complete request body has been received. This is a somewhat unexpected limitation for Twisted: why should I have to wait until the entire body has been uploaded to start doing things with it?
</I>&gt;<i> 
</I>&gt;<i> This problem is thrown into sharp relief with HTTP/2, which essentially always chunks the body, even if a content-length is provided. This means that it is now very easy to receive data in delimited chunks, which an implementation may want to have semantic meaning. However, the request is unable to access this data in this way. It also makes it impossible to use a HTTP/2 request/response pair as a long-running communication channel, as we cannot safely call requestReceived until the response is terminated (which also terminates the HTTP/2 stream).
</I>&gt;<i> 
</I>&gt;<i> Adi pointed me at a related issue, #6928[0], which itself points at what appears to be an issue tracking exactly this request. That issue is issue #288[1], which is 12 years old(!). This has clearly been a pain point for quite some time.
</I>&gt;<i> 
</I>
I think it is worth noting that some of these issues were solved by twisted.web2, to the point that there were even adapters created that handled some of the differences between the existing web resource model and the new model in web2.

Of course, web2 did not succeed in replacing web, due in part to concerns over the introduction of a new flow-control mechanism (IStream and company).  Today though, we have <A HREF="https://github.com/twisted/tubes,">https://github.com/twisted/tubes,</A> which is being developed outside of twisted proper, but could perhaps be leveraged to overcome some of the previous concerns about introducing a mechanism different from IProducer/IConsumer.

I mention this because I think there is work within the web2 codebase that might prove useful in solving some of the issues being discussed here, in a way that would benefit twisted, and its users.


Thanks for reading,

L. Daniel Burr

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029920.html">[Twisted-Python] Streaming HTTP
</A></li>
	<LI>Next message: <A HREF="029938.html">[Twisted-Python] Streaming HTTP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29917">[ date ]</a>
              <a href="thread.html#29917">[ thread ]</a>
              <a href="subject.html#29917">[ subject ]</a>
              <a href="author.html#29917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
