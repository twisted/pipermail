<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Suggested plan for GitHub migration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Suggested%20plan%20for%20GitHub%20migration&In-Reply-To=%3CCAG%3DrPVc78NPk-dRDzrVvKT_Tyr9_7bSdZAx4%3Dc%3DB2tpYXMzXTQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Suggested plan for GitHub migration</H1>
    <B>Craig Rodrigues</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Suggested%20plan%20for%20GitHub%20migration&In-Reply-To=%3CCAG%3DrPVc78NPk-dRDzrVvKT_Tyr9_7bSdZAx4%3Dc%3DB2tpYXMzXTQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Suggested plan for GitHub migration">rodrigc at crodrigues.org
       </A><BR>
    <I>Tue Nov 17 16:48:09 MST 2015</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62389">[ date ]</a>
              <a href="thread.html#62389">[ thread ]</a>
              <a href="subject.html#62389">[ subject ]</a>
              <a href="author.html#62389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Nov 17, 2015 at 8:57 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> For now, the funds were raised to migrate to GitHub, so we can not use
</I>&gt;<i> them to do other things.
</I>&gt;<i>
</I>&gt;<i> We will stay on Trac for issues... at least for now.
</I>&gt;<i>
</I>&gt;<i> I have no idea how we can migrate to any issue tracker without losing
</I>&gt;<i> data if we don't have full access to the database.
</I>&gt;<i>
</I>
It is possible to migrate to another issue tracker and not lose
data.  I've done Trac -&gt; Redmine, and it works, but there was an existing
migration
script I could use.
For migrating to a cloud based bug tracker, you would need to take every
user
in the existing Trac database, and see if there would be a way to map
the existing users to the cloud database, such as GitHub.  It's a lot of
work, but possible.
However, for the scope of this project, if staying with Trac for issues is
what is required, that is fine.


&gt;<i> We don't plan to migrate to GitHub Issues / GitHub Wiki / GitHub Pages
</I>&gt;<i>
</I>&gt;<i>
</I>OK.

So based on what you have listed, I would say that most of the work will be
working with Git post commit hooks.

I would say the plan should be something like this.

A.1  <A HREF="https://github.com/twisted/twisted">https://github.com/twisted/twisted</A> will be the &quot;repository of truth&quot;
       for Twisted.
           -&gt; Twisted releases will be done from GitHub
           -&gt; the Twisted developers who are now &quot;core committers&quot; for SVN,
must be
               given access to be &quot;core committers&quot; to
<A HREF="https://github.com/twisted/twisted">https://github.com/twisted/twisted</A>

A.2  On the Trac server, a local git mirror of the GitHub must be set up.
       Every bug tracker I've seen that integrates with git needs a local
mirror of the repo
        in order to parse the git history in order to update the bug
database.
        This mirror should be read-only, and the only thing updating this
repo should be the Trac GitHub plugin.

A.3  On the Trac server, this plugin must be installed:
<A HREF="https://github.com/trac-hacks/trac-github">https://github.com/trac-hacks/trac-github</A>

A.4  On the GitHub server, a post-commit web hook must be configured.  The
workflow will be this:

           [core committer does push to <A HREF="https://github.com/twisted/twisted">https://github.com/twisted/twisted</A>]

             -&gt; [post commit GitHub hook will be called to poke the Trac
GitHub plugin]
             -&gt; [Trac GitHub plugin will update the local git repo on the
Trac server]
             -&gt; [Trac GitHub will parse the git history for new commits and
update tickets]

I would recommend that steps (1) - (4) be made to work in a staging
environment, with a separate
GitHub repo, and a separate copy of the Trac database.  That way, you can
test things out without derailing
Twisted developers.  When you are confident that this workflow works, then
the transition plan will be something
like the following.

B.1   Send an e-mail to the mailing list and pick one day for the
maintenance window.
        This will warn folks when they should take a holiday from Twisted
work. :)

B.2   When maintenance is about to begin, send a [HEADSUP] mail saying that
repo will be unavailable.

B.3  Create Subversion pre-commit hook to disable all commits to
         Subversion:

<A HREF="http://stackoverflow.com/questions/2411122/how-to-freeze-entire-svn-repository-to-make-it-read-only">http://stackoverflow.com/questions/2411122/how-to-freeze-entire-svn-repository-to-make-it-read-only</A>

B.4  Set up steps A.1 - A.4

B.5  Verify that B.4 works.  Have someone (Glyph?) do a commit to
<A HREF="https://github.com/twisted/twisted,">https://github.com/twisted/twisted,</A> and
         make sure that Trac works.

B.6  Once the Twisted core team are satisified that everything works, send
an e-mail to the mailing list
        that the maintenance window is over, and GitHub is now where the
action is!

B.7  Update all wiki documentation to change all references to getting code
from Subversion,
         to getting code from GitHub.

B.8  Update all systems which used Subversion to use GitHub.  For example,
buildbots.

--
Craig


--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20151117/a5b717dc/attachment-0002.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62389">[ date ]</a>
              <a href="thread.html#62389">[ thread ]</a>
              <a href="subject.html#62389">[ subject ]</a>
              <a href="author.html#62389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
