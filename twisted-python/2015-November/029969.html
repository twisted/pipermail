<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted/runner/inetdtap.py%20pyflakes%20warnings%0A%09cleanup&In-Reply-To=%3C24A3BC21-9202-4CCE-9AEB-C1D98E11257B%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="029964.html">
   <LINK REL="Next"  HREF="029970.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted/runner/inetdtap.py%20pyflakes%20warnings%0A%09cleanup&In-Reply-To=%3C24A3BC21-9202-4CCE-9AEB-C1D98E11257B%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup">glyph at twistedmatrix.com
       </A><BR>
    <I>Sun Nov 22 18:13:57 MST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="029964.html">[Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup
</A></li>
        <LI>Next message: <A HREF="029970.html">[Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29969">[ date ]</a>
              <a href="thread.html#29969">[ thread ]</a>
              <a href="subject.html#29969">[ subject ]</a>
              <a href="author.html#29969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Nov 22, 2015, at 16:31, Adi Roiban &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Right now  twisted/runner/inetdtap.py has the following errors reported by pyflakes:
</I>&gt;<i> 
</I>&gt;<i> $ pyflakes twisted/runner/inetdtap.py
</I>&gt;<i> twisted/runner/inetdtap.py:58: undefined name 'rpcVersions'
</I>&gt;<i> twisted/runner/inetdtap.py:59: undefined name 'name'
</I>&gt;<i> twisted/runner/inetdtap.py:62: undefined name 'p'
</I>&gt;<i> twisted/runner/inetdtap.py:152: undefined name 'proto'
</I>&gt;<i> 
</I>&gt;<i> From what I can see from reading the code, RPCServer.startService is broken.
</I>&gt;<i> 
</I>&gt;<i> makeService is also broken for rpc/* services .
</I>&gt;<i> 
</I>&gt;<i> There are no tests for all this code.
</I>&gt;<i> 
</I>&gt;<i> Link for the code : 
</I>&gt;<i> <A HREF="https://github.com/twisted/twisted/blob/trunk/twisted/runner/inetdtap.py">https://github.com/twisted/twisted/blob/trunk/twisted/runner/inetdtap.py</A> &lt;<A HREF="https://github.com/twisted/twisted/blob/trunk/twisted/runner/inetdtap.py">https://github.com/twisted/twisted/blob/trunk/twisted/runner/inetdtap.py</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> ----------
</I>&gt;<i> 
</I>&gt;<i> I am working on getting the Twisted code clean of pyflakes errors/warnings so that contributors could run pyflakes check on their own branch, without relying on buildbot.
</I>
Thank you.  This would be absolutely great.

&gt;<i> I would like to clean the inetdtap.py module of pylakes warning but since it is broken and has no tests, I have no idea what this code is expected to do and how end users are expecting to use it. 
</I>
The purpose of inetdtap is to provide an 'inetd'-like server, to allow Twisted to invoke other programs to handle incoming sockets.  This is a useful thing as a &quot;networking swiss army knife&quot; tool, like netcat.  In fact, it does work, after a fashion; I wrote a file like this:

8123       stream  tcp  wait glyph  /bin/cat -

and then ran this:

put a blank line into 'rpc.conf', and then ran:

twistd -n inetd -f sampleinetd.conf -r rpc.conf 

and port 8123 properly became an echo server.

Now, in order to do this, you need a /etc/services file (this is hard-coded) that can be parsed by ServicesConf, which is _extremely_ picky, and probably the one that your OS comes with is still broken anyway.  But this code can work if properly configured, and those parts can be fixed.

I haven't run this recently, but partially only because I basically forgot it existed :).  Thanks for the reminder.

&gt;<i> Does someone volunteer to fix it?
</I>
I'll gladly fix the parts that implement the possibly-useful functionality, although you don't need to touch those in order to fix the pyflakes warnings :).  The parts that are totally broken, RPCServicesConf, RPCServer, and the code that instantiates it, are useful only to NFS server implementors, and don't work at all no matter your configuration.  So I would delete the whole implementation just so someone will get a clear notification in case they were importing one of these names but not actually using them, deprecate the module attributes, and remove them in the next available removal cycle.  So basically just leave an empty Service subclass there just as a courtesy (since that is slightly more polite, and only a tiny bit harder than just deleting it).

&gt;<i> Otherwise, has anyone any objections against deprecating twisted/runner/inetdtap.py?
</I>&gt;<i> Since it is broken, can we just remove it?
</I>
I hope my suggestion makes sense and is useful.  However if you'd really like to do the compat-breaking dance I won't object; I seriously doubt anyone is touching the RPC code.  I'd prefer you don't delete the whole module though.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20151122/0bd6ca26/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20151122/0bd6ca26/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="029964.html">[Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup
</A></li>
	<LI>Next message: <A HREF="029970.html">[Twisted-Python] twisted/runner/inetdtap.py pyflakes warnings	cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29969">[ date ]</a>
              <a href="thread.html#29969">[ thread ]</a>
              <a href="subject.html#29969">[ subject ]</a>
              <a href="author.html#29969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
