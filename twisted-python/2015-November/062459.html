<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Suggested plan for GitHub migration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Suggested%20plan%20for%20GitHub%20migration&In-Reply-To=%3C7BFE7DD4-1796-4EE3-BE4F-D4AC78774686%40atleastfornow.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="062461.html">
   <LINK REL="Next"  HREF="062460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Suggested plan for GitHub migration</H1>
    <B>Amber &quot;Hawkie&quot; Brown</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Suggested%20plan%20for%20GitHub%20migration&In-Reply-To=%3C7BFE7DD4-1796-4EE3-BE4F-D4AC78774686%40atleastfornow.net%3E"
       TITLE="[Twisted-Python] Suggested plan for GitHub migration">hawkowl at atleastfornow.net
       </A><BR>
    <I>Mon Nov 30 07:49:41 MST 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="062461.html">[Twisted-Python] Suggested plan for GitHub migration
</A></li>
        <LI>Next message (by thread): <A HREF="062460.html">[Twisted-Python] Suggested plan for GitHub migration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62459">[ date ]</a>
              <a href="thread.html#62459">[ thread ]</a>
              <a href="subject.html#62459">[ subject ]</a>
              <a href="author.html#62459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Craig,

Thanks for this, sharing your past experience is invaluable :)

I've gone through and thought about it a bit, and rewritten it into <A HREF="https://github.com/twisted-infra/braid/blob/git-migration-plan/gitmigration.rst">https://github.com/twisted-infra/braid/blob/git-migration-plan/gitmigration.rst</A> -- it is basically your plan, with some added notes about Twisted Infra specific parts. I've skimmed over the specific details, since I feel that going too in-depth in such a plan will just be wasted effort as unknown issues arise, but with enough structure that we have a clear set of overarching goals for each step.

The migration will have a handful of policy changes that we will have to resolve -- such as ensuring that all merges have a topfile -- which aren't possible under a GitHub based system. I think these issues will just involve a lot of scrutiny and double checking during the transitional period until we are confident that we are enforcing our existing quality and process standards.

If anyone has any suggestions, or any more invaluable experience to share, please do :)

- Amber


&gt;<i> On 18 Nov 2015, at 07:48, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On Tue, Nov 17, 2015 at 8:57 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> For now, the funds were raised to migrate to GitHub, so we can not use
</I>&gt;<i> them to do other things.
</I>&gt;<i> 
</I>&gt;<i> We will stay on Trac for issues... at least for now.
</I>&gt;<i> 
</I>&gt;<i> I have no idea how we can migrate to any issue tracker without losing
</I>&gt;<i> data if we don't have full access to the database.
</I>&gt;<i> 
</I>&gt;<i> It is possible to migrate to another issue tracker and not lose
</I>&gt;<i> data.  I've done Trac -&gt; Redmine, and it works, but there was an existing migration
</I>&gt;<i> script I could use.
</I>&gt;<i> For migrating to a cloud based bug tracker, you would need to take every user
</I>&gt;<i> in the existing Trac database, and see if there would be a way to map
</I>&gt;<i> the existing users to the cloud database, such as GitHub.  It's a lot of work, but possible.
</I>&gt;<i> However, for the scope of this project, if staying with Trac for issues is what is required, that is fine.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> We don't plan to migrate to GitHub Issues / GitHub Wiki / GitHub Pages
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> OK.
</I>&gt;<i> 
</I>&gt;<i> So based on what you have listed, I would say that most of the work will be
</I>&gt;<i> working with Git post commit hooks.
</I>&gt;<i> 
</I>&gt;<i> I would say the plan should be something like this.
</I>&gt;<i> 
</I>&gt;<i> A.1  <A HREF="https://github.com/twisted/twisted">https://github.com/twisted/twisted</A> will be the &quot;repository of truth&quot;
</I>&gt;<i>        for Twisted.
</I>&gt;<i>            -&gt; Twisted releases will be done from GitHub
</I>&gt;<i>            -&gt; the Twisted developers who are now &quot;core committers&quot; for SVN, must be
</I>&gt;<i>                given access to be &quot;core committers&quot; to <A HREF="https://github.com/twisted/twisted">https://github.com/twisted/twisted</A>
</I>&gt;<i> 
</I>&gt;<i> A.2  On the Trac server, a local git mirror of the GitHub must be set up.
</I>&gt;<i>        Every bug tracker I've seen that integrates with git needs a local mirror of the repo
</I>&gt;<i>         in order to parse the git history in order to update the bug database.
</I>&gt;<i>         This mirror should be read-only, and the only thing updating this repo should be the Trac GitHub plugin.
</I>&gt;<i> 
</I>&gt;<i> A.3  On the Trac server, this plugin must be installed: <A HREF="https://github.com/trac-hacks/trac-github">https://github.com/trac-hacks/trac-github</A>
</I>&gt;<i> 
</I>&gt;<i> A.4  On the GitHub server, a post-commit web hook must be configured.  The workflow will be this:
</I>&gt;<i> 
</I>&gt;<i>            [core committer does push to <A HREF="https://github.com/twisted/twisted">https://github.com/twisted/twisted</A>]
</I>&gt;<i>              -&gt; [post commit GitHub hook will be called to poke the Trac GitHub plugin]
</I>&gt;<i>              -&gt; [Trac GitHub plugin will update the local git repo on the Trac server]
</I>&gt;<i>              -&gt; [Trac GitHub will parse the git history for new commits and update tickets]
</I>&gt;<i> 
</I>&gt;<i> I would recommend that steps (1) - (4) be made to work in a staging environment, with a separate
</I>&gt;<i> GitHub repo, and a separate copy of the Trac database.  That way, you can test things out without derailing
</I>&gt;<i> Twisted developers.  When you are confident that this workflow works, then the transition plan will be something
</I>&gt;<i> like the following.
</I>&gt;<i> 
</I>&gt;<i> B.1   Send an e-mail to the mailing list and pick one day for the maintenance window.
</I>&gt;<i>         This will warn folks when they should take a holiday from Twisted work. :)
</I>&gt;<i> 
</I>&gt;<i> B.2   When maintenance is about to begin, send a [HEADSUP] mail saying that repo will be unavailable.
</I>&gt;<i> 
</I>&gt;<i> B.3  Create Subversion pre-commit hook to disable all commits to
</I>&gt;<i>          Subversion:
</I>&gt;<i>               <A HREF="http://stackoverflow.com/questions/2411122/how-to-freeze-entire-svn-repository-to-make-it-read-only">http://stackoverflow.com/questions/2411122/how-to-freeze-entire-svn-repository-to-make-it-read-only</A>
</I>&gt;<i> 
</I>&gt;<i> B.4  Set up steps A.1 - A.4
</I>&gt;<i> 
</I>&gt;<i> B.5  Verify that B.4 works.  Have someone (Glyph?) do a commit to <A HREF="https://github.com/twisted/twisted,">https://github.com/twisted/twisted,</A> and
</I>&gt;<i>          make sure that Trac works.
</I>&gt;<i> 
</I>&gt;<i> B.6  Once the Twisted core team are satisified that everything works, send an e-mail to the mailing list
</I>&gt;<i>         that the maintenance window is over, and GitHub is now where the action is!
</I>&gt;<i> 
</I>&gt;<i> B.7  Update all wiki documentation to change all references to getting code from Subversion,
</I>&gt;<i>          to getting code from GitHub.
</I>&gt;<i> 
</I>&gt;<i> B.8  Update all systems which used Subversion to use GitHub.  For example, buildbots.
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Craig
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Craig
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;/pipermail/twisted-python/attachments/20151130/98a88eae/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="062461.html">[Twisted-Python] Suggested plan for GitHub migration
</A></li>
	<LI>Next message (by thread): <A HREF="062460.html">[Twisted-Python] Suggested plan for GitHub migration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62459">[ date ]</a>
              <a href="thread.html#62459">[ thread ]</a>
              <a href="subject.html#62459">[ subject ]</a>
              <a href="author.html#62459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
