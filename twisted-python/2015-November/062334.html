<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to call a Twisted reactor from a file	different from his module?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20call%20a%20Twisted%20reactor%20from%20a%20file%0A%09different%20from%20his%20module%3F&In-Reply-To=%3CCAJK%3Dep-tcDzbnS%2BSahRwaLDjBVk3%2BnM707ESgFwY5%2BiH6uRDnQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to call a Twisted reactor from a file	different from his module?</H1>
    <B>Samuel Góngora García</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20call%20a%20Twisted%20reactor%20from%20a%20file%0A%09different%20from%20his%20module%3F&In-Reply-To=%3CCAJK%3Dep-tcDzbnS%2BSahRwaLDjBVk3%2BnM707ESgFwY5%2BiH6uRDnQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] How to call a Twisted reactor from a file	different from his module?">s.gongoragarcia at gmail.com
       </A><BR>
    <I>Wed Nov  4 10:00:17 MST 2015</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62334">[ date ]</a>
              <a href="thread.html#62334">[ thread ]</a>
              <a href="subject.html#62334">[ subject ]</a>
              <a href="author.html#62334">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a question that could well belong to Twisted or could be directly
related to Python.

My problem, as the other is related to the disconnection process in
Twisted. As I read on this , if I want to I have to perform the following
steps:

1-The server must stop listening.
2-The client connection must disconnect.
3-The server connection must disconnect.

According to what I read on the previous page to make the first step would
have to run the stopListening method.

In the example mentioned in the web all actions are performed in the same
script. Making it easy to access the different variables and methods.

For me I have a server and a client are in different files and different
locations.

I have a function that creates a server, and assigns a protocol and want,
from the client protocol in another file, make an AMP call to a method for
stop the connector.

The call AMP calls the SendMsg command.





































*class TESTServer(protocol.Protocol):    factory = None    sUsername = &quot;&quot;
  credProto = None    bGSuser = None    slot = None&quot;&quot;&quot;Here was
uninteresting code.&quot;&quot;&quot;            #   upwards=self.bGSuser, forwarded=True,
tx_timestamp=iTimestamp,\            #    message=sMsg)
log.msg(&quot;self.connector&quot;)        log.msg(self.connector)        return
{'bResult': True}    SendMsg.responder(vSendMsg)    def
_testfunction(self):        logger = logging.getLogger('server')
log.startLogging(sys.stdout)        pf = CredAMPServerFactory()
sslContext = ssl.DefaultOpenSSLContextFactory('key/server.pem',\
 'key/public.pem',)        self.connector = reactor.listenSSL(1234, pf,
contextFactory = sslContext,)        log.msg('Server running...')
reactor.run()if __name__ == '__main__':    TESTServer()._testfunction()*
The class CredAMPServerFactory assign the corresponding protocol.










*class CredAMPServerFactory(ServerFactory):    &quot;&quot;&quot;    Server factory useful
for creating L{CredReceiver} and L{SATNETServer} instances.    This factory
takes care of associating a L{Portal} with the L{CredReceiver}    instances
it creates. If the login is succesfully achieved, a L{SATNETServer}
instance is also created.    &quot;&quot;&quot;    protocol = CredReceiver*

In the &quot;CredReceiver&quot; class I have a call that assigns the protocol to the
TestServer class. I do this to make calls using the AMP method &quot;Responder&quot;.

*        self.protocol = SATNETServer*

My problem is that when I make the call the program responds with an error
indicating that the connector doesn't belong to CredReceiver attribute
object.



*  File &quot;/home/sgongar/Dev/protocol/server_amp.py&quot;, line 248, in vSendMsg
  log.msg(self.connector)exceptions.AttributeError: 'CredReceiver' object
has no attribute 'connector'*

How could I do this? Does anyone know of a similar example of that may take
note?

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20151104/81eec059/attachment-0002.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62334">[ date ]</a>
              <a href="thread.html#62334">[ thread ]</a>
              <a href="subject.html#62334">[ subject ]</a>
              <a href="author.html#62334">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
