<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Threading examples...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Threading%20examples...&In-Reply-To=%3CSea1-F148DI8NFr9oD60000e75f%40hotmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039849.html">
   <LINK REL="Next"  HREF="039851.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Threading examples...</H1>
    <B>William McLendon</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Threading%20examples...&In-Reply-To=%3CSea1-F148DI8NFr9oD60000e75f%40hotmail.com%3E"
       TITLE="[Twisted-Python] Threading examples...">wcmclen at hotmail.com
       </A><BR>
    <I>Tue Mar 23 15:34:04 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039849.html">[Twisted-Python] Threading examples...
</A></li>
        <LI>Next message (by thread): <A HREF="039851.html">[Twisted-Python] Threading examples...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39850">[ date ]</a>
              <a href="thread.html#39850">[ thread ]</a>
              <a href="subject.html#39850">[ subject ]</a>
              <a href="author.html#39850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hmmm... I tried something pretty close to that (though I have no callback 
called writeRequestAndFinish() in my example and am not sure what it's 
supposed to do)... but running the threads.deferToThread() routine still 
leaves me with the problem that the thread doesn't die.  I can't kill the 
app without going and manually killing it via pid.

Is there anything that I can do so that when aSillyBlockingMethod() is 
finished it just exits?

Thanks,
  -William


&gt;<i>From: stephan &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mailinglists at shechen.at</A>&gt;
</I>&gt;<i>Reply-To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>Subject: Re: [Twisted-Python] Threading examples...
</I>&gt;<i>Date: Tue, 23 Mar 2004 14:25:13 -0800
</I>&gt;<i>
</I>&gt;<i>The following snippet is the code I use and it works for my needs. Be 
</I>&gt;<i>careful with  non-threadsafe code (db api, etc...) though.
</I>&gt;<i>
</I>&gt;<i>==========
</I>&gt;<i>from twisted.internet import threads
</I>&gt;<i>
</I>&gt;<i>threads.deferToThread(aSillyBlockingMethod, x).addCallback(\
</I>&gt;<i>         writeRequestAndFinish, request)
</I>&gt;<i>=========
</I>&gt;<i>
</I>&gt;<i>I am using this in a twisted webserver that is why I am registering the 
</I>&gt;<i>writeRequestAndFinish methode to finish up on the render  methode where I 
</I>&gt;<i>returned server.NOT_DONE_YET. But you can register any callback or no 
</I>&gt;<i>callback as well.
</I>&gt;<i>
</I>&gt;<i>_stephan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Tue, 23 Mar 2004 12:19:01 -0700, William McLendon &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wcmclen at hotmail.com</A>&gt; 
</I>&gt;<i>wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I'm trying out some of the threading examples from the web and am getting 
</I>&gt;&gt;<i>some a lockup at the end.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Here's the code I'm playing with, I pulled it straight from the examples:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>(source: 
</I>&gt;&gt;<i><A HREF="http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html">http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html</A>)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>#!/usr/bin/env python
</I>&gt;&gt;<i>import time
</I>&gt;&gt;<i>from twisted.internet import reactor
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>def aSillyBlockingMethod(x):
</I>&gt;&gt;<i>     import time
</I>&gt;&gt;<i>     time.sleep(2)
</I>&gt;&gt;<i>     print x
</I>&gt;&gt;<i>
</I>&gt;&gt;<i># run method in thread
</I>&gt;&gt;<i>reactor.callInThread(aSillyBlockingMethod, &quot;2 seconds have passed&quot;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Is there something I need to do that will make the thread go away?  Are 
</I>&gt;&gt;<i>there some more examples of threading in Twisted-Python available?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Thanks,
</I>&gt;&gt;<i>   -William
</I>
_________________________________________________________________
Get rid of annoying pop-up ads with the new MSN Toolbar &#150; FREE! 
<A HREF="http://clk.atdmt.com/AVE/go/onm00200414ave/direct/01/">http://clk.atdmt.com/AVE/go/onm00200414ave/direct/01/</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039849.html">[Twisted-Python] Threading examples...
</A></li>
	<LI>Next message (by thread): <A HREF="039851.html">[Twisted-Python] Threading examples...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39850">[ date ]</a>
              <a href="thread.html#39850">[ thread ]</a>
              <a href="subject.html#39850">[ subject ]</a>
              <a href="author.html#39850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
