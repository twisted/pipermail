<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Cisco-style hierarchial CLI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Cisco-style%20hierarchial%20CLI&In-Reply-To=%3C20040322140940.1289.442939527.divmod.quotient.8%40erlang.divmod.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039837.html">
   <LINK REL="Next"  HREF="039840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Cisco-style hierarchial CLI</H1>
    <B>exarkun at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Cisco-style%20hierarchial%20CLI&In-Reply-To=%3C20040322140940.1289.442939527.divmod.quotient.8%40erlang.divmod.net%3E"
       TITLE="[Twisted-Python] Cisco-style hierarchial CLI">exarkun at divmod.com
       </A><BR>
    <I>Mon Mar 22 07:09:40 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039837.html">[Twisted-Python] Cisco-style hierarchial CLI
</A></li>
        <LI>Next message (by thread): <A HREF="039840.html">[Twisted-Python] Cisco-style hierarchial CLI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39839">[ date ]</a>
              <a href="thread.html#39839">[ thread ]</a>
              <a href="subject.html#39839">[ subject ]</a>
              <a href="author.html#39839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, 20 Mar 2004 18:43:36 +0000, Phil Mayers &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A>&gt; wrote:
&gt;<i>All,
</I>&gt;<i> 
</I>&gt;<i> I'm putting together some glue-ware for a system, and would like to hide
</I>&gt;<i> the underlying nature of it. It's a bit of software that fits in and
</I>&gt;<i> around routers / switches etc. and there's a pretty common CLI for those
</I>&gt;<i> these days, which consists of a hierarchial context-based set of
</I>&gt;<i> commands, plus completion, e.g. on Cisco, although I suspect everyone is
</I>&gt;<i> familiar with the concept:
</I>&gt;<i> 
</I>&gt;<i> [snip examples]
</I>&gt;<i> 
</I>&gt;<i> The hiearchial configure mode is mapped onto a hierarchial configuration
</I>&gt;<i> file, e.g. the above would generate:
</I>&gt;<i> 
</I>&gt;<i> subsystem
</I>&gt;<i>   trusted
</I>&gt;<i>     vlan 1
</I>&gt;<i>   !
</I>&gt;<i> !
</I>&gt;<i> 
</I>&gt;<i> It's main features are:
</I>&gt;<i> 
</I>&gt;<i> 1) Tab completion and partial -&gt; full conversion
</I>&gt;<i> 2) Nested modes
</I>&gt;<i> 
</I>&gt;<i> Relevant to twisted is I want to replace the manhole interactive
</I>&gt;<i> interpreter.
</I>&gt;<i> 
</I>&gt;<i> Any such beast exist?
</I>
  twisted.python.usage has some support for subcommands.  It doesn't support arbitrary abbreviations (if I recall correctly), but could probably be made to without much difficulty.

  Tab completion would have to be offered by whatever UI was presented, of course, and facilitated by some easily-done introspection into the Options class.

  t.p.usage.Options instances set their &quot;subOptions&quot; attribute when a sub-command is encountered.  I think you could exploit this fact to support nested states, by grabbing the subOptions object and asking it to parse further input.  I'm not sure how &quot;backing up&quot; should work, but you could probably accomplish it by keeping a stack of all the options classes that you get from the subOptions attribute.

  Of course it supports arbitrarily deep nesting, so multilevel commands are support.  The API is pretty simple, you just create an Options subclass with a subCommands class attribute bound to a
list of lists of the form [&quot;longname&quot;, &quot;shortname&quot;, OtherOptionsSubclass, &quot;Description&quot;].

  The existing code won't get you all the way there (especially the help formatting), but it seems like a reasonable place to start.

  Jp



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039837.html">[Twisted-Python] Cisco-style hierarchial CLI
</A></li>
	<LI>Next message (by thread): <A HREF="039840.html">[Twisted-Python] Cisco-style hierarchial CLI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39839">[ date ]</a>
              <a href="thread.html#39839">[ thread ]</a>
              <a href="subject.html#39839">[ subject ]</a>
              <a href="author.html#39839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
