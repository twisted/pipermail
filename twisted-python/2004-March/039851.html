<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Threading examples...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Threading%20examples...&In-Reply-To=%3CSea1-F119ODt9Cz93Mg00008120%40hotmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039850.html">
   <LINK REL="Next"  HREF="039852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Threading examples...</H1>
    <B>William McLendon</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Threading%20examples...&In-Reply-To=%3CSea1-F119ODt9Cz93Mg00008120%40hotmail.com%3E"
       TITLE="[Twisted-Python] Threading examples...">wcmclen at hotmail.com
       </A><BR>
    <I>Tue Mar 23 15:58:20 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039850.html">[Twisted-Python] Threading examples...
</A></li>
        <LI>Next message (by thread): <A HREF="039852.html">[Twisted-Python] Threading examples...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39851">[ date ]</a>
              <a href="thread.html#39851">[ thread ]</a>
              <a href="subject.html#39851">[ subject ]</a>
              <a href="author.html#39851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks,

So, now my example looks like this:

import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
    time.sleep(2)
    print x
    reactor.callFromThread(reactor.stop)

# run method in thread
reactor.callInThread(aSillyBlockingMethod, &quot;2 seconds have passed&quot;)


It still just hangs... I have to go kill it from another window after 
getting its pid from ps.   Am I doing the reactor.stop thing correctly?

Basically, I have an application that talks via a http interface to a user 
and I need to spawn off and do stuff from time to time.  I'm still learning 
how all the reactor eventloops and whatnot work.  I ran into a problem where 
I'm trying to run something via twisted.internet.protocol.ProcessProtocol 
and serve its results up from within a reactor.listentTCP() page handler ... 
but it blew up.  So, I'm thinking that I could maybe just fork it off and 
run that way.  I've been trying to figure out how the reactors() work and 
the threading and whatnot the last few days but am kind of finding little 
help in the docs and google that is at my level of understanding... seems 
most of the stuff is snippets and pieces that assume you already see the big 
picture :-(  Any help here is greatly appreciated ;-)

Thanks,
  -William



&gt;<i>From: Andrew Bennetts &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">andrew-twisted at puzzling.org</A>&gt;
</I>&gt;<i>Reply-To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
</I>&gt;<i>Subject: Re: [Twisted-Python] Threading examples...
</I>&gt;<i>Date: Wed, 24 Mar 2004 09:30:13 +1100
</I>&gt;<i>
</I>&gt;<i>On Tue, Mar 23, 2004 at 12:19:01PM -0700, William McLendon wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm trying out some of the threading examples from the web and am 
</I>&gt;<i>getting
</I>&gt;<i> &gt; some a lockup at the end.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here's the code I'm playing with, I pulled it straight from the 
</I>&gt;<i>examples:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (source:
</I>&gt;<i> &gt; <A HREF="http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html">http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html</A>)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; #!/usr/bin/env python
</I>&gt;<i> &gt; import time
</I>&gt;<i> &gt; from twisted.internet import reactor
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; def aSillyBlockingMethod(x):
</I>&gt;<i> &gt;    import time
</I>&gt;<i> &gt;    time.sleep(2)
</I>&gt;<i> &gt;    print x
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # run method in thread
</I>&gt;<i> &gt; reactor.callInThread(aSillyBlockingMethod, &quot;2 seconds have passed&quot;)
</I>&gt;<i>
</I>&gt;<i>This example doesn't call to reactor.stop(), so it never stops.  Put a call
</I>&gt;<i>to &quot;reactor.callFromThread(reactor.stop)&quot; after the print statement, for
</I>&gt;<i>example, and it should shutdown cleanly.
</I>&gt;<i>
</I>&gt;<i> &gt; Is there something I need to do that will make the thread go away?  Are
</I>&gt;<i> &gt; there some more examples of threading in Twisted-Python available?
</I>&gt;<i>
</I>&gt;<i>The only example I can think of is the implementation of
</I>&gt;<i>twisted.enterprise.adbapi, which presents an asynchronous interface to
</I>&gt;<i>blocking DB-API modules by running it in threads.
</I>&gt;<i>
</I>&gt;<i>-Andrew.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-Python mailing list
</I>&gt;<i><A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee&#174; 
Security. <A HREF="http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963">http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039850.html">[Twisted-Python] Threading examples...
</A></li>
	<LI>Next message (by thread): <A HREF="039852.html">[Twisted-Python] Threading examples...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39851">[ date ]</a>
              <a href="thread.html#39851">[ thread ]</a>
              <a href="subject.html#39851">[ subject ]</a>
              <a href="author.html#39851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
