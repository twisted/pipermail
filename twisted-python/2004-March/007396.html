<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adbapi results through xmlrpc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adbapi%20results%20through%20xmlrpc&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007395.html">
   <LINK REL="Next"  HREF="007398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adbapi results through xmlrpc</H1>
    <B>Zach Thompson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adbapi%20results%20through%20xmlrpc&In-Reply-To="
       TITLE="[Twisted-Python] adbapi results through xmlrpc">lists at allotropic.com
       </A><BR>
    <I>Wed Mar 31 16:08:09 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007395.html">[Twisted-Python] Scalability of an rss-aggregator
</A></li>
        <LI>Next message: <A HREF="007398.html">[Twisted-Python] adbapi results through xmlrpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7396">[ date ]</a>
              <a href="thread.html#7396">[ thread ]</a>
              <a href="subject.html#7396">[ subject ]</a>
              <a href="author.html#7396">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
server just needs to run a db query and return the result set to the 
client for display.  Here's part of the server class:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool(&quot;pyPgSQL.PgSQL&quot;, database=&quot;zach&quot;)
         return pool.runQuery(&quot;select count(*) from asdf&quot;)

And part of the client class:

     def OnButton(self, event):
         from twisted.web.xmlrpc import Proxy
         proxy = Proxy(&quot;<A HREF="http://localhost:8080&quot;">http://localhost:8080&quot;</A>)
         proxy.callRemote('get_count').addCallback(self.UpdateCount)

     def UpdateCount(self, count):
         self.label.SetLabel(count)

Here's what the client prints when I press the button:

   Unhandled error in Deferred:
   Failure: xmlrpclib.Fault: &lt;Fault 8002: &quot;can't serialize output&quot;&gt;

I can understand that xmlrpc needs to serialize the Deferred object to 
send it through http.  I'm guessing there's a reference to the 
ConnectionPool object contained in the Deferred, and it makes sense 
that you wouldn't be able to serialize something like that.

Any ideas?

BTW, the client is running on a wxreactor, if that matters..

Thanks,
Zach
  



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007395.html">[Twisted-Python] Scalability of an rss-aggregator
</A></li>
	<LI>Next message: <A HREF="007398.html">[Twisted-Python] adbapi results through xmlrpc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7396">[ date ]</a>
              <a href="thread.html#7396">[ thread ]</a>
              <a href="subject.html#7396">[ subject ]</a>
              <a href="author.html#7396">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
