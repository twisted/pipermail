<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Isolating%20ISFTPServer%20in%20Conch%27s%20SFTP&In-Reply-To=6.0.1.1.2.20040316151701.02c2d648%40mail.hightowergroup.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007296.html">
   <LINK REL="Next"  HREF="007321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Isolating ISFTPServer in Conch's SFTP</H1>
    <B>Andy Gayton</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Isolating%20ISFTPServer%20in%20Conch%27s%20SFTP&In-Reply-To=6.0.1.1.2.20040316151701.02c2d648%40mail.hightowergroup.com"
       TITLE="[Twisted-Python] Isolating ISFTPServer in Conch's SFTP">andy at thecablelounge.com
       </A><BR>
    <I>Tue Mar 16 19:40:36 EST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="007296.html">[Twisted-Python] Isolating ISFTPServer in Conch's SFTP
</A></li>
        <LI>Next message: <A HREF="007321.html">[Twisted-Python] Isolating ISFTPServer in Conch's SFTP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7300">[ date ]</a>
              <a href="thread.html#7300">[ thread ]</a>
              <a href="subject.html#7300">[ subject ]</a>
              <a href="author.html#7300">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David A. Leedom wrote:

&gt;<i> Can you tell me a little more about what you are trying to 
</I>&gt;<i> accomplish?
</I>
G'dday David,

In general I'm trying to create an interface for filesystems that can be 
adapted to every interface twisted filelike apps expect to work with. 
For instance conch should work with anything which conforms to the 
ISFTPServer (it just needs a bit of tweaking) - I've still got to look 
at Thorsten's twisted port of his webdav server, but I'm hoping it has a 
similiar interface an adapter can be written for.  Once a twisted smb 
server is up I'll write an adapter for the interface it expects.

You can then implement the filesystem interface anyway you like - 
perhaps out of a mysql database, perhaps to mount a zip file so you can 
sftp directly into the zip file.

My particular use for it is a collaboration web site - cablelounge.com - 
I have a very simple samba like filesystem which defines a user's 
personal area plus the group areas they have access to - when they enter 
the filesystem they see something like

/home
/cliff_hangers
/twisted_files

When then go into /home they'll actually be in a different type of 
filesystem, just an ordinary implementation of a system filesystem - but 
its real path would be say /home/john - when they enter /cliff_hangers 
there real path could be /var/shares/groups/cliff_hangers - or whatever ..

This is great for sftp access as the user can only see what you want 
them to see - they can't just enter cd /etc and start poking around - 
and you don't have to mess about with chrooting them to their home 
directory which then makes group shares very difficult + the user gets a 
consistent view of their files no matter which application they prefer 
to use ..

I'm pretty new to twisted myself so searching thoughts and critcisms to 
keep me on track ..

Andy.


&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Dave Leedom
</I>&gt;<i> 
</I>&gt;<i> At 10:00 PM 3/14/2004, Andy Gayton wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I'm looking to create a filesystem backend for twisted that could be 
</I>&gt;&gt;<i> used by any filelike twisted application (sftp, webdav etc).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've got a proof of concept filesystem interface working - IFileSystem 
</I>&gt;&gt;<i> .. not the best of names ;), which I'm about to try and sftp into.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ISFTPServer is a nice clean interface which it'd be easy to write an 
</I>&gt;&gt;<i> adapter for from my IFileSystem - but its implementation is bolted 
</I>&gt;&gt;<i> into FileTransferServer along with a bunch of protocol stuff ..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I had been vaguely planning to break ISFTPServer's implementation out 
</I>&gt;&gt;<i> of FileTransferServer and move it into a realm avatar when I got this 
</I>&gt;&gt;<i> far so different users could have different filesystems but now that I 
</I>&gt;&gt;<i> get to looking at it - FileTransferServer is brought into existance 
</I>&gt;&gt;<i> when a sftp sybsystem is requested by the sftp client, which happens 
</I>&gt;&gt;<i> after authentication ..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's beginning to look like most of conch/ssh/session.py would need to 
</I>&gt;&gt;<i> move into an avatar - so the avatar for a given user could be asked 
</I>&gt;&gt;<i> for a shell, or a sftp subsystem and they would get the right shell/ 
</I>&gt;&gt;<i> sftp onto a filesystem for that user ..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I was hoping that Paul, or someone else may have some thoughts in this 
</I>&gt;&gt;<i> area to guide me ..
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> cheers,
</I>&gt;&gt;<i> Andy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The Hightower Group, Inc.
</I>&gt;<i> Custom Software Solutions Designed To Fit Your Business Like A Glove.
</I>&gt;<i> 165 West Airport Road/Lititz, PA 17543
</I>&gt;<i> V:717-560-4002, 877-560-4002 x: 114
</I>&gt;<i> F:717-560-2825
</I>&gt;<i> www.hightowergroup.com 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007296.html">[Twisted-Python] Isolating ISFTPServer in Conch's SFTP
</A></li>
	<LI>Next message: <A HREF="007321.html">[Twisted-Python] Isolating ISFTPServer in Conch's SFTP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7300">[ date ]</a>
              <a href="thread.html#7300">[ thread ]</a>
              <a href="subject.html#7300">[ subject ]</a>
              <a href="author.html#7300">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
