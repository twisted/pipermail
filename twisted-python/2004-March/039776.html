<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Lock class using Deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Lock%20class%20using%20Deferreds&In-Reply-To=%3C404A2413.1020105%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039775.html">
   <LINK REL="Next"  HREF="039779.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Lock class using Deferreds</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Lock%20class%20using%20Deferreds&In-Reply-To=%3C404A2413.1020105%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Lock class using Deferreds">radix at twistedmatrix.com
       </A><BR>
    <I>Sat Mar  6 12:18:43 MST 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039775.html">[Twisted-Python] Lock class using Deferreds
</A></li>
        <LI>Next message (by thread): <A HREF="039779.html">[Twisted-Python] Lock class using Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39776">[ date ]</a>
              <a href="thread.html#39776">[ thread ]</a>
              <a href="subject.html#39776">[ subject ]</a>
              <a href="author.html#39776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Andy Gayton wrote:
&gt;<i> Christopher Armstrong wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>  haven't really put much time into figuring out what's going on in 
</I>&gt;&gt;<i> this thread,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Putting the Lock with similiar tools into a module I think ...
</I>
I meant, I haven't bothered enough to actually grok all the code. :)

&gt;<i> You twisted guys have a way of coding stuff that makes me go cross-eyed :)
</I>
Well, the app I was writing at the time was kind of weird. ;-)

&gt;<i> I think the following would work similiar to yours Chris ? ..
</I>&gt;<i> 
</I>&gt;<i> dnsRequest_Semaphore = Semaphore(20)
</I>&gt;<i> for (sink, input) in source :
</I>&gt;<i>     dnsRequest_Semaphore.run( request, input ).addCallback( sink )
</I>

Dunno, maybe someone else can actually grok what's going on here (I 
haven't sufficiently bothered to read your Semaphore class :P). If it is 
the same, then your Semaphore class is obviously better :) OTOH, my 
thing didn't call .next() on the source until its result was actually 
required, but this snippet is obviously queuing up the (potentially 
thousands) of operations in the Semaphore.. Probably doesn't actually 
matter.

&gt;<i> ???? is that right - still getting a handle on defers :) :(
</I>&gt;<i> 
</I>&gt;<i> the above doesn't cover the error handling you are doing though .. I 
</I>&gt;<i> can't quite work out that bit ...
</I>
As the comments pointed out, the bit of error-handling was 
application-specific. I made a mistake, btw: the *first* &quot;xxx fixme 
app-specific&quot; wasn't actually app-specific (the 
addBoth(self._cbGotSync)) -- it was just an unfortunately 
specifically-named method. The NotSync error handling was indeed 
specific to the app I was writing.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           <A HREF="http://radix.twistedmatrix.com/">http://radix.twistedmatrix.com/</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: &lt;/pipermail/twisted-python/attachments/20040306/55ffb403/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039775.html">[Twisted-Python] Lock class using Deferreds
</A></li>
	<LI>Next message (by thread): <A HREF="039779.html">[Twisted-Python] Lock class using Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39776">[ date ]</a>
              <a href="thread.html#39776">[ thread ]</a>
              <a href="subject.html#39776">[ subject ]</a>
              <a href="author.html#39776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
