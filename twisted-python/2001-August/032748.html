<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Some suggestions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20suggestions&In-Reply-To=%3CPine.LNX.4.21.0108101753160.29917-100000%40zaibach.twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="032738.html">
   <LINK REL="Next"  HREF="032751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Some suggestions</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Some%20suggestions&In-Reply-To=%3CPine.LNX.4.21.0108101753160.29917-100000%40zaibach.twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Some suggestions">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Aug 10 17:05:20 MDT 2001</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="032738.html">[Twisted-Python] Some suggestions
</A></li>
        <LI>Next message (by thread): <A HREF="032751.html">[Twisted-Python] Some suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32748">[ date ]</a>
              <a href="thread.html#32748">[ thread ]</a>
              <a href="subject.html#32748">[ subject ]</a>
              <a href="author.html#32748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 9 Aug 2001, Itamar wrote:

&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I spent some time on my 11 hour flight to the US porting my servers to 
</I>&gt;<i> twisted, and here's what I've come up with so far:
</I>&gt;<i> 
</I>&gt;<i> 0) Twisted is very cool.
</I>
We know, of course, but glad to hear it anyway :)

&gt;<i> 1) Pickle on save should be optional.
</I>&gt;<i> One of my objects is unpicklable, so every time I shutdown I get an 
</I>&gt;<i> exception. You could say I should rewrite, but I feel developing a 
</I>&gt;<i> server should not have to support all kinds of extra features that 
</I>&gt;<i> twisted provides. Obviously it'd be nice to have them, but it's one more 
</I>&gt;<i> thing you have to learn up front that isn't really necessary.
</I>
I think moshe has already added this, does his patch resolve your
concerns?

&gt;<i> 2) Why is the number of clients that socket.listen() queues hard-coded 
</I>&gt;<i> to 5? this should be an option.
</I>
Frankly I can't imagine why anyone would care.  5 is supposed to be a
reasonable and recommended maximum.  But it's an option now :-)

&gt;<i> 3) If writing to a connection and closing a connection are thread safe 
</I>&gt;<i> then writing threaded servers is trivial. I'll try to write some patches 
</I>&gt;<i> that don't slow down the default non-threaded code tommorow.  Again, 
</I>&gt;<i> rewriting my code from scratch as event driven is a waste of a time - I 
</I>&gt;<i> might do it someday, but I want working code now.
</I>
OK, I already responded to this in a later email, but I have 2 more things
to add:

  * If your server is multithreaded, it will be *significantly* slower
    than if it is not.  This is a well-documented fact even for servers 
    in C, and context switching + resource contention on the main
    interpreter thread is going to kill you well before you get into
    problems with contention for individual write locks. 

  * _That is okay_.  Don't start worrying too much about the performance
   of Twisted's threading until you've got some significant benchmarking
   problem; and when you discover that threading is slow, you can always
   optimize by making it asynchronous instead :)  Chances are, however,
   that your app can afford the speed hit if it's at all a typical server.

  * There are some interesting ideas in this half/sync half/async pattern
    that may be useful for your app, available at:

	<A HREF="http://www.cs.wustl.edu/~schmidt/PDF/PLoP-95.pdf">http://www.cs.wustl.edu/~schmidt/PDF/PLoP-95.pdf</A>

&gt;<i> 4) I'll submit a working twisted.internet.ssl after I do (3).
</I>
See that this has already been done.  Impressive turnaround time ;)

&gt;<i> 5) More docstrings!
</I>
As always.


                      ______      __   __  _____  _     _
                     |  ____ |      \_/   |_____] |_____|
                     |_____| |_____  |    |       |     |
                     @ t w i s t e d m a t r i x  . c o m
                     <A HREF="http://twistedmatrix.com/users/glyph">http://twistedmatrix.com/users/glyph</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="032738.html">[Twisted-Python] Some suggestions
</A></li>
	<LI>Next message (by thread): <A HREF="032751.html">[Twisted-Python] Some suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32748">[ date ]</a>
              <a href="thread.html#32748">[ thread ]</a>
              <a href="subject.html#32748">[ subject ]</a>
              <a href="author.html#32748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
