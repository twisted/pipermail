<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] threading on windows?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20threading%20on%20windows%3F&In-Reply-To=%3CHOEEKPCOKELHCNIJNMAGIEHBCBAA.sean%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="032780.html">
   <LINK REL="Next"  HREF="032782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] threading on windows?</H1>
    <B>Sean Riley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20threading%20on%20windows%3F&In-Reply-To=%3CHOEEKPCOKELHCNIJNMAGIEHBCBAA.sean%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] threading on windows?">sean at twistedmatrix.com
       </A><BR>
    <I>Tue Aug 21 16:40:26 MDT 2001</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="032780.html">[Twisted-Python] threading on windows?
</A></li>
        <LI>Next message (by thread): <A HREF="032782.html">[Twisted-Python] threading on windows?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32781">[ date ]</a>
              <a href="thread.html#32781">[ thread ]</a>
              <a href="subject.html#32781">[ subject ]</a>
              <a href="author.html#32781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>actually i have a counter question that is &quot;how the hell does this work on
Linux at all?&quot;

during startup, threadable.init() is called twice - once by internet.main
calling requireInit() which passes zero and once by twistd which passes zero
or one if &quot;-t&quot; was specified.

the first time through, the global threaded is set to zero.
the second time through, the &quot;assert threaded is None&quot; in threadable.init()
should always fail as threaded is not None, it is now zero. This assert
failing causes threadable.threaded to get left as zero and the
initialization of installing the waker and scheduler never gets done.


-----Original Message-----
From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-admin at twistedmatrix.com</A>
[mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-admin at twistedmatrix.com</A>]On Behalf Of Itamar
Sent: Tuesday, August 21, 2001 5:14 PM
To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>
Subject: Re: [Twisted-Python] threading on windows?


Sean Riley wrote:

&gt;<i> threaded initialization stuff twisted.internet.main.py is not working for
</I>me
&gt;<i> on windows.
</I>&gt;<i>
</I>&gt;<i> I propose we put all threaded initialization into a method of
</I>&gt;<i> twisted.internet.main and have it called from threadable.init() in one
</I>&gt;<i> place.
</I>


Yes, but threaded can be used without internet.main's event loop, so it
shouldn't depend on it.



&gt;<i> This would include:
</I>&gt;<i> 	installWaker()
</I>&gt;<i> 	delayeds.append(threadtask.theScheduler)
</I>&gt;<i>
</I>&gt;<i> how about internet.main.enableThreading() which would do the work that is
</I>&gt;<i> currently in installWaker and set up the delayed scheduler?
</I>

note that threading has to be initialized before threadtask is imported,
so that it will be synchronized.


Can you explain why the current code doesn't work in Windows?



_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="032780.html">[Twisted-Python] threading on windows?
</A></li>
	<LI>Next message (by thread): <A HREF="032782.html">[Twisted-Python] threading on windows?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32781">[ date ]</a>
              <a href="thread.html#32781">[ thread ]</a>
              <a href="subject.html#32781">[ subject ]</a>
              <a href="author.html#32781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
