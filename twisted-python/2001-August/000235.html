<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] First try at thread-safe FileDescriptor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20First%20try%20at%20thread-safe%20FileDescriptor&In-Reply-To=3B742C04.4060909%40zoteca.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000234.html">
   <LINK REL="Next"  HREF="000237.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] First try at thread-safe FileDescriptor</H1>
    <B>Moshe Zadka</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20First%20try%20at%20thread-safe%20FileDescriptor&In-Reply-To=3B742C04.4060909%40zoteca.com"
       TITLE="[Twisted-Python] First try at thread-safe FileDescriptor">m at moshez.org
       </A><BR>
    <I>Fri Aug 10 15:04:20 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000234.html">[Twisted-Python] First try at thread-safe FileDescriptor
</A></li>
        <LI>Next message: <A HREF="000237.html">[Twisted-Python] First try at thread-safe FileDescriptor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#235">[ date ]</a>
              <a href="thread.html#235">[ thread ]</a>
              <a href="subject.html#235">[ subject ]</a>
              <a href="author.html#235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 10 Aug 2001, Itamar Shtull-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at zoteca.com</A>&gt; wrote:

&gt;<i>  &gt; Please, please, use either diff -u or diff -c. Plain diff is simply
</I>&gt;<i>  &gt; unreadable
</I>&gt;<i> 
</I>&gt;<i> D'oh. I must've never set it up on my laptop.
</I>
I am not at all certain this is thread safe....

Let us say one thread calls .write and another .doWrite
Then if the .write thread modifies the unsentChunks after the
.doWrite finished summing up the chunks but before it does the
self.unsent =  then whatever it has written will be lost, no?

Personally, I think you should write a ThreadSafe descriptor
which uses the thread-safe Queue class to Queue data to write in .write
and takes out stuff from the Queue in .doWrite until it had its fill.
 
-- 
Moshe Zadka - <A HREF="http://moshez.geek">http://moshez.geek</A>
(if you're not cool, <A HREF="http://moshez.org">http://moshez.org</A> is still working)



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000234.html">[Twisted-Python] First try at thread-safe FileDescriptor
</A></li>
	<LI>Next message: <A HREF="000237.html">[Twisted-Python] First try at thread-safe FileDescriptor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#235">[ date ]</a>
              <a href="thread.html#235">[ thread ]</a>
              <a href="subject.html#235">[ subject ]</a>
              <a href="author.html#235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
