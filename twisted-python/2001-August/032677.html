<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Hip-bone's connected to the...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Hip-bone%27s%20connected%20to%20the...&In-Reply-To=%3CPine.LNX.4.21.0108031239060.25302-100000%40zaibach.twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="032675.html">
   <LINK REL="Next"  HREF="032679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Hip-bone's connected to the...</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Hip-bone%27s%20connected%20to%20the...&In-Reply-To=%3CPine.LNX.4.21.0108031239060.25302-100000%40zaibach.twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Hip-bone's connected to the...">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Aug  3 12:05:56 MDT 2001</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="032675.html">[Twisted-Python] Hip-bone's connected to the...
</A></li>
        <LI>Next message (by thread): <A HREF="032679.html">[Twisted-Python] Hip-bone's connected to the...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32677">[ date ]</a>
              <a href="thread.html#32677">[ thread ]</a>
              <a href="subject.html#32677">[ subject ]</a>
              <a href="author.html#32677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you, kevin, for doing this write-up... I hope this feedback enables
you to keep going with it.

I'd highly encourage you to write some code though :)

On Thu, 2 Aug 2001, Kevin Turner wrote:

&gt;<i> Application (twisted.internet.main.Application):
</I>&gt;<i> 
</I>&gt;<i> The overall container and entry point for your program as a whole.  The
</I>&gt;<i> answer to the question &quot;Uh, okay, now how do I start it?&quot;.  In addition
</I>&gt;<i> to starting, it also handles shutdown, typically pickling itself to disk
</I>&gt;<i> in the process.  And yes, that means that when you pickle.load an object
</I>&gt;<i> from a twisted .spl file, an Application is what you are getting.
</I>
Now .tap file...

&gt;<i> When Applications are running, they typically have at least one Port
</I>&gt;<i> (see below) listening for connections, as internet..Applications which
</I>&gt;<i> don't communicate with anyone are less fun than dead puppies.  Ports
</I>&gt;<i> are added with the .addPort() method, and the Application has them
</I>&gt;<i> startListening as soon as it is run().
</I>
You may want to add the fact that they'll often have a Delayed as well.

&gt;<i> Port (twisted.internet.tcp.Port):
</I>
Your description of Ports is fairly accurate.

&gt;<i> Broker (twisted.spread.pb.Broker)
</I>&gt;<i> 
</I>&gt;<i> Typically created by a pb.BrokerFactory, these broker between a
</I>
Or manually instantiated for use with a tcp.Client!

&gt;<i> connection (from the Port) and a pb.Service.  The services available to
</I>&gt;<i> the broker are those which have been added to the BrokerFactory with its
</I>&gt;<i> addService method.
</I>
&gt;<i> Service (twisted.spread.pb.Service)
</I>&gt;<i> 
</I>&gt;<i> The service you are providing (XXX: a less vauge, circular description?)
</I>
No, sounds good -- I want to reinforce that these classes are what they
sound like :)

&gt;<i> is defined as a subclass of pb.Service (ex: web.ResourcePublisher).
</I>&gt;<i> I expect the common usage is to only have no more than one instance
</I>&gt;<i> of a given Service class, as it defines the service *as a whole*,
</I>&gt;<i> and generally does not bother itself with the details of a request.
</I>&gt;<i> Instead, Services are asked (through the broker) for Perspectives,
</I>&gt;<i> through the getPerspectiveNamed method.
</I>
Might want to be a little clearer about the service doing the
authentication here...

&gt;<i> Perspective (twisted.spread.pb.Perspective)
</I>
&gt;<i> The reason the client is asking the server to perform a service is
</I>&gt;<i> because the server is able to see and do things the client does not
</I>&gt;<i> have access to.  That is, from the client's perspective, these things
</I>&gt;<i> are not visible, but from the server's perspective, they're perfectly
</I>&gt;<i> accessible.
</I>&gt;<i>
</I>&gt;<i> Enter one Perspective Broker.  Through the Perspective Broker, clients
</I>&gt;<i> may have actions performed from the perspective of an object on the
</I>&gt;<i> server.
</I>
I think it would make sense to explain references first, even though you
can't get to them without perspectives (because on the client, you have a
reference to a perspective); the notion of translating calls on references
into 'special' calls on instances is important for Perspective, Proxied,
Referenced, and Cached...

Also don't talk so much about &quot;client&quot; and &quot;server&quot; when referring to the
perspective; this is objects-to-objects.

&gt;<i> These objects are instances of classes descended from pb.Perspective.
</I>&gt;<i> If a client runs a method .foo() on a reference to such an object, the
</I>&gt;<i> server will run the method .perspective_foo() on the instance on the
</I>&gt;<i> server side.
</I>
Yep.

&gt;<i> XXX: Examples would help loads.
</I>
# Here's one to get you started.
class Foo(pb.Perspective):
  def perspective_bar(self, baz):
    print 'received remote method call'

&gt;<i> Note: Since all commands over the broker happen asynchronously, the
</I>&gt;<i> client cannot receive return values from a perspective_foo() method.
</I>
Yes it can, actually.  If you pass a keyword parameter 'pbcallback', that
callback will be invoked on the client when the return value is
received.  However, you can't get that as a return value from the .foo
call on the client (obviously).

&gt;<i> Referenced (twisted.spread.pb.Referenced)
</I>&gt;<i> 
</I>&gt;<i> Since a Perspective object cannot pass data back to the client through
</I>&gt;<i> return values, how does the client ever learn anything about what
</I>&gt;<i> it's done through the broker?  If the client passes an object that is
</I>&gt;<i> Referenced through to the perspective, then the perspective on the
</I>&gt;<i> server side will be able to pass data to methods of the Referenced
</I>&gt;<i> object.  A call to .foo() on the server's side will call .remote_foo()
</I>&gt;<i> on the object in the client.  This works in much the same way as clients
</I>&gt;<i> calling methods of Perspective objects.
</I>
Speaking in terms of client and server still doesn't make sense.  The
server can send Referenced instances to the client too.  And the lead-in
sentence is wrong anyway :)

Additionally, you can pass a reference in to the requestPerspective method
now, to provide an analogue for the &quot;client&quot; object that you'd send
messages to in many other protocols.

&gt;<i> Ports get added to Applications
</I>&gt;<i> (a BrokerFactory is attached to the port)
</I>&gt;<i> Services get added to BrokerFactories
</I>&gt;<i> Perspectives are issued by Services
</I>
Proxies are issued by returning Proxied instances from Perspective methods
(or from Proxied methods)

Copies are made    [ditto]      Copied  [ditto]

Caches are like copies, but they maintain identity rather than being
re-sent each time. (optional)

&gt;<i> How does error notification work?
</I>
Similiarly to return-value notification.

  myReference.do(arg,arg,pbcallback=myCallback, pberrback=myErrorCallback)

All you get as an argument to the error callback is is a traceback or
error message string though.

&gt;<i> What naming conventions should application authors use?
</I>
Just stick to the Twisted coding standard and you'll be fine.

&gt;<i> Any other must-have pb classes?
</I>
Copied and Proxied are worth explaining.  Reference is crucial.  Cached is
interesting, but complex and you'll know if you need it.  Other things are
peripheral.


Hope this helps.

                      ______      __   __  _____  _     _
                     |  ____ |      \_/   |_____] |_____|
                     |_____| |_____  |    |       |     |
                     @ t w i s t e d m a t r i x  . c o m
                     <A HREF="http://twistedmatrix.com/users/glyph">http://twistedmatrix.com/users/glyph</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="032675.html">[Twisted-Python] Hip-bone's connected to the...
</A></li>
	<LI>Next message (by thread): <A HREF="032679.html">[Twisted-Python] Hip-bone's connected to the...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32677">[ date ]</a>
              <a href="thread.html#32677">[ thread ]</a>
              <a href="subject.html#32677">[ subject ]</a>
              <a href="author.html#32677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
