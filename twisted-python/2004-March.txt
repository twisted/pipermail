From andy at thecablelounge.com  Mon Mar  1 02:29:47 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 01 Mar 2004 17:29:47 +1000
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb and html
Message-ID: <4042E66B.9020909@thecablelounge.com>

I'm investigating setting up a collaborative remote file share.  There 
are a number of traditional ways for doing this, each has their 
strengths and weaknesses:

ftp - not secure, fast and robust file transfer, supports resume, 
difficult to administer as unless chrooted users have access to the 
entire file system, if chrooted its difficult to set up group, no vendor 
lockin on the client

sftp - same as ftp but secure

smb - secureish, slow over wan, doesn't support resume, great to 
administer - give exactly the access you want to who you want, easy to 
support groups, vendor lockin on the client

html - can be secure, slow non robust file transfer, doesn't support 
resume, easy to administer who has access to what, client access is 
universal

I'm looking at defining a virtual filesystem that can be accessed 
eventually by all of the above the methods.

If a person sftp's in, they can only see their home directory - they 
can't cd about the place and look at other things on the system.  Each 
of their groups could appear as a directory off their home-root directory.

I'm thinking it'll be easiest to control the permissions/ownerships of 
touched files in a similiar way to samba - so if you're in a group 
directory you create files in a way that other members of the group can 
modify them, which is different to when you're in your personal directories.

If a person then maps a drive from windows to the share they will see 
they same virtual filesystem.

I am going to start with conch's sftp at first and see how I go.  Just 
thought I'd run it past the list as I get started to see if others are 
interested and have thoughts in the area or recommendations on how this 
should be done.

cheers!
Andy.



From andrew-twisted at puzzling.org  Mon Mar  1 02:56:15 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 1 Mar 2004 18:56:15 +1100
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb and html
In-Reply-To: <4042E66B.9020909@thecablelounge.com>
References: <4042E66B.9020909@thecablelounge.com>
Message-ID: <20040301075615.GH3669@frobozz>

On Mon, Mar 01, 2004 at 05:29:47PM +1000, Andy Gayton wrote:
> I'm investigating setting up a collaborative remote file share.  There 
> are a number of traditional ways for doing this, each has their 
> strengths and weaknesses:
> 
> ftp - not secure, fast and robust file transfer, supports resume, 
> difficult to administer as unless chrooted users have access to the 
> entire file system, if chrooted its difficult to set up group, no vendor 
> lockin on the client

ftp isn't robust, either -- the multi-socket aspect of it means it often
breaks in the presence of firewalls.  It also has no agreed standard for
sharing metadata (like modification times or content types?).

> sftp - same as ftp but secure

That's almost entirely wrong :)

SFTP has very little in common with FTP.  The only similarities I can think
of are that SFTP clients are traditionally presented to look like FTP
clients, and that SFTP has per-session authentication (whereas with e.g.
HTTP you have to re-auth for every request, or at least pass auth
credientials like a session cookie for every request).  As far as I'm aware,
SFTP doesn't have the binary/ascii transfer mode gunk that FTP has, or any
of the nasty seperate data connection sockets issues.

SFTP is massively more secure than FTP, though :)

> smb - secureish, slow over wan, doesn't support resume, great to 
> administer - give exactly the access you want to who you want, easy to 
> support groups, vendor lockin on the client

I suspect that you can resume with SMB -- a network filesystem that doesn't
support accessing files in pieces (i.e. seek) is pretty limited.  Most
clients wouldn't expose this functionality, though.

> html - can be secure, slow non robust file transfer, doesn't support 
> resume, easy to administer who has access to what, client access is 
> universal

(I think you mean HTTP)

What's non-robust about HTTP, compared to FTP?  And it definitely *does*
support resuming downloads -- see the Range header:
    http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35

> I'm looking at defining a virtual filesystem that can be accessed 
> eventually by all of the above the methods.
> 
[...]
> 
> I am going to start with conch's sftp at first and see how I go.  Just 
> thought I'd run it past the list as I get started to see if others are 
> interested and have thoughts in the area or recommendations on how this 
> should be done.

I just thought I should correct some misunderstandings about the protocols
you mentioned :)

-Andrew.




From andy at thecablelounge.com  Mon Mar  1 04:27:31 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 01 Mar 2004 19:27:31 +1000
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb
 and html
In-Reply-To: <20040301075615.GH3669@frobozz>
References: <4042E66B.9020909@thecablelounge.com> <20040301075615.GH3669@frobozz>
Message-ID: <40430203.9090403@thecablelounge.com>

Andrew Bennetts wrote:

G'dday Andrew, thanks for the reply, I need to be careful how I describe 
things when posting to a forum of protocol experts :) .. I don't know 
anything about protocols .. as you can tell ;)

I'm interested in things from an application view.  So sftp the 
application, not sftp the protocol.

> ftp isn't robust, either -- the multi-socket aspect of it means it often
> breaks in the presence of firewalls.  It also has no agreed standard for
> sharing metadata (like modification times or content types?).

ok

 > SFTP has very little in common with FTP.  The only similarities I can 
think
 > of are that SFTP clients are traditionally presented to look like FTP
 > clients, and that SFTP has per-session authentication (whereas with e.g.

For administration you face the same problems - how to restrict users to 
given areas, how to get groups of users to play well together.  For the 
end user - as you say they are presented to look the same which is what 
I'm interested in.

 > I suspect that you can resume with SMB -- a network filesystem that 
doesn't
 > support accessing files in pieces (i.e. seek) is pretty limited.  Most
 > clients wouldn't expose this functionality, though.

I'd be very interested in clients that do expose this if anyone knows of 
any ..

 >>html - can be secure, slow non robust file transfer, doesn't support
 >>resume, easy to administer who has access to what, client access is
 >>universal

 > (I think you mean HTTP)

Sorry, I meant a html form file upload file browser type application. 
HTTP is the protocol this would run over - but so would webdav - which 
could plugin into this virtual filesystem as well!  Form file uploads 
don't support resume as far as I know and aren't very robust ..

> I just thought I should correct some misunderstandings about the protocols
> you mentioned :)

Appreciated - but feedback on what you'd like a common collaborative 
filesystem backend to look like for these applications would be more 
appreciated :)

Andy.



From itamar at itamarst.org  Mon Mar  1 10:12:53 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 01 Mar 2004 10:12:53 -0500
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb
	and html
In-Reply-To: <4042E66B.9020909@thecablelounge.com>
References: <4042E66B.9020909@thecablelounge.com>
Message-ID: <1078153972.11465.1.camel@sheriffpony>

On Mon, 2004-03-01 at 02:29, Andy Gayton wrote:

> html - can be secure, slow non robust file transfer, doesn't support 
> resume, easy to administer who has access to what, client access is 
> universal

You forgot about WebDAV. Designed for exactly this, with support for
locking, arbitrary metadata, extensions for versioning, and more. Plus
Windows, Mac OS X and maybe linux file managers have VFS support for
WebDAV.

http://www.webdav.org

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From Benjamin.Schollnick at usa.xerox.com  Mon Mar  1 10:25:46 2004
From: Benjamin.Schollnick at usa.xerox.com (Schollnick, Benjamin)
Date: Mon, 01 Mar 2004 10:25:46 -0500
Subject: [Twisted-Python] SSH connection, redux!
Message-ID: <51B62EFFBC83D6118ADA00096BB030A107CADDE9@usamcms7.mc.usa.xerox.com>

Folks,

	Thanks for the support, so far...  I downloaded the
precompiled version of the PyCrypto and everything is working fine...

	Except for the fact, that I am attempting to figure out
how to make this work the way, that I *believe* it needs to work...

	By the way, I was unable to get the "Writing a client with 
Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
example, and that is working okay...

	But I am having a problem, trying to figure out how to adapt the 
reactor model with my program...

	The application has, for example, 6 "ssh queries" that it needs to
send, for example a "/usr/sbin/prtconf -v", and then "capture" the output,
and return the output
for processing...

	Then it proceeds to the next query....etc...

	Is there a method that I can setup the communication, and say....

reactor.send ("asdfasdf")
data = reactor.recv ()

	More along the telnetlib design?  This way, I could branch the
telnet code
I use?

	Once, I start the reactor, I do not see where I can get data in and
out,
without using some form of a global variable...  (Or embedding the reactor
inside
another object)

				- Benjamin



From michael.l.schneider at ugsplm.com  Mon Mar  1 11:28:26 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 1 Mar 2004 11:28:26 -0500
Subject: [Twisted-Python] tracking spawned jobs in a twisted application (code review request)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D532@uscimplm001.net.plm.eds.com>

Hello All,

I have been pushing some code around.

My problem is that I need to execute OS command line
jobs with twisted.

I started by morphing the twisted tutorial app into a
job runner.


My first path (It was wrong!!) was to morph the database connection
pool to a compute pool using popen2.

This group, suggested that I use reactor.spawn instead of popen2 .

Attached is the resulting code.  

Basic Approach for Command protocol.processProtocol:

1) crate a JobPool Object to manage list of running jobs
2) Create Job Runner Object to wrap individual process info,
   and capture process output.
   (start time, stop time ...)
3) Create CmdProcProtcol  to manage interaction with the reactor


I morphed the twisted application: (Coded in comment section below)
	1) Create JobPoolService
	2) Create JobRunnerProtocol
	3) Create XmlRpc Job Runner Interface that dispatches to job runner service.



My questions are:
	- Is the the twisted way?
      - What are some alternative approaches?
	- Is there a better way?

Thank you very much,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of 
> Schollnick,
> Benjamin
> Sent: Monday, March 01, 2004 10:26 AM
> To: 'twisted-python at twistedmatrix.com'
> Subject: RE: [Twisted-Python] SSH connection, redux!
> 
> 
> Folks,
> 
> 	Thanks for the support, so far...  I downloaded the
> precompiled version of the PyCrypto and everything is working fine...
> 
> 	Except for the fact, that I am attempting to figure out
> how to make this work the way, that I *believe* it needs to work...
> 
> 	By the way, I was unable to get the "Writing a client with 
> Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
> example, and that is working okay...
> 
> 	But I am having a problem, trying to figure out how to 
> adapt the 
> reactor model with my program...
> 
> 	The application has, for example, 6 "ssh queries" that 
> it needs to
> send, for example a "/usr/sbin/prtconf -v", and then 
> "capture" the output,
> and return the output
> for processing...
> 
> 	Then it proceeds to the next query....etc...
> 
> 	Is there a method that I can setup the communication, 
> and say....
> 
> reactor.send ("asdfasdf")
> data = reactor.recv ()
> 
> 	More along the telnetlib design?  This way, I could branch the
> telnet code
> I use?
> 
> 	Once, I start the reactor, I do not see where I can get 
> data in and
> out,
> without using some form of a global variable...  (Or 
> embedding the reactor
> inside
> another object)
> 
> 				- Benjamin
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From michael.l.schneider at ugsplm.com  Mon Mar  1 11:32:02 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 1 Mar 2004 11:32:02 -0500
Subject: [Twisted-Python] RE: tracking spawned jobs in a twisted application (code review request)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB501FEEFA3@uscimplm001.net.plm.eds.com>

Sorry,

I hit the send button too soon,
Mike


 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: Schneider, Michael 
> Sent: Monday, March 01, 2004 11:28 AM
> To: 'twisted-python at twistedmatrix.com'
> Subject: tracking spawned jobs in a twisted application (code review
> request)
> 
> 
> Hello All,
> 
> I have been pushing some code around.
> 
> My problem is that I need to execute OS command line
> jobs with twisted.
> 
> I started by morphing the twisted tutorial app into a
> job runner.
> 
> 
> My first path (It was wrong!!) was to morph the database connection
> pool to a compute pool using popen2.
> 
> This group, suggested that I use reactor.spawn instead of popen2 .
> 
> Attached is the resulting code.  
> 
> Basic Approach for Command protocol.processProtocol:
> 
> 1) crate a JobPool Object to manage list of running jobs
> 2) Create Job Runner Object to wrap individual process info,
>    and capture process output.
>    (start time, stop time ...)
> 3) Create CmdProcProtcol  to manage interaction with the reactor
> 
> 
> I morphed the twisted application: (Coded in comment section below)
> 	1) Create JobPoolService
> 	2) Create JobRunnerProtocol
> 	3) Create XmlRpc Job Runner Interface that dispatches 
> to job runner service.
> 
> 
> 
> My questions are:
> 	- Is the the twisted way?
>       - What are some alternative approaches?
> 	- Is there a better way?
> 
> Thank you very much,
> Mike
>  
> ----------------------------------------------------------------
> Michael Schneider
> Senior Software Engineering Consultant
> UGS PLM Solutions - an EDS Company
>  
> "The Greatest Performance Improvement Is the transitioning 
> from a non-working state to the working state"
> 

# Twisted, the Framework of Your Internet

"""
Manage execution of multiple processes\

Usage Model:
1)Create Job runner Service in App
2)Create Job Runner Protocol in App
3) Create Xmlrpc to call

    ----- from service code in twisted app
    m = RunTaskPool()
    cmdLine="dir d:\"
    def = m.runJob(cmdLine)


class JobRunnerService(service.Service):

    __implements__ = service.Service.__implements__, IJobRunnerService

    def __init__(self):
        self.taskPool = None


    def runJob(self, command):
        print "In Twisted runJob, command = " + command
        self.verifyRunTaskPool()
        return self.taskPool.runJob(command)

    def verifyRunTaskPool(self):
        if(self.taskPool == None):
            self.taskPool = RunTaskPool()

class JobRunnerProtocol(basic.LineReceiver):

    def lineReceived(self, command):
        d = self.factory.runJob(command)
        d.addErrback(catchError)
        def writeValue(value):
            self.transport.write(value)
            self.transport.write('\n\n')
            self.transport.loseConnection()
        d.addCallback(writeValue)


class JobStatusXR(xmlrpc.XMLRPC):

    def __init__(self, service):
        xmlrpc.XMLRPC.__init__(self)
        self.service = service

    def xmlrpc_runJob(self, command):
        return self.service.runJob(command)


    def xmlrpc_isAlive(self):
        return 1


   
"""


from twisted.internet import protocol
from twisted.internet import reactor
from twisted.spread import pb
from twisted.python import reflect, log
from twisted.internet import  defer

from time import sleep
from time import time
import os



class CmdProcProtocol(protocol.ProcessProtocol):
    """Twisted Protocol Class to run command line in a sub process """
    def __init__(self, parentJobRunner):
        self._exitStatus = 0
        self.parentJobRunner = parentJobRunner
        self.data = ""
        
    def connectionMade(self):
        """Called at the start of the execution"""
        #print "connectionMade!"
        pass
 
    def outReceived(self, data):
        """Called when process writes output"""
        #print "outReceived! with %d bytes!" % len(data)
        self.data = self.data + data
        #print self.data
        
    def errReceived(self, data):
        #print "errReceived! with %d bytes!" % len(data)
        pass
    
    def inConnectionLost(self):
        #print "inConnectionLost! stdin is closed! (we probably did it)"
        pass
    def outConnectionLost(self):
        """Program has closed stdout (program terminated)"""
        #print "outConnectionLost! The child closed their stdout!"
        #print "# now is the time to examine what they wrote"
        #print "dir:", self.data
        pass

    def errConnectionLost(self):
        """Program has closed stderr (program terminated)"""
        #print "errConnectionLost! The child closed their stderr."
        pass
    def processEnded(self, status_object):
        """Child process exited"""
        self._exitStatus =  status_object.value.exitCode
        print "processEnded, status %d" % self._exitStatus
        print "quitting"
        print self.data
        #notify parent with data returned , and exit status
        self.parentJobRunner.signalRunComplete(self._exitStatus, self.data)

    def kill(self):
        """Kill this process"""
        #os.kill(self.transport.pid, signal.SIGKILL) 
        
class JobRunner:
    """
    I am a lightweight wrapper for run job.
    """
  

    def __init__(self, parentJobRunnerPool,  jobRunDeferred):

        #command to execute in Command Proc Protocol 
        self.command = ""

        #set 
        self.parentJobRunnerPool = parentJobRunnerPool
        self._startTime = -1
        self._endTime = -1
        self._timeLimit = -1
        self._exitcode = None
        self._log = "job not yet started"
        self._jobRunDeferred = jobRunDeferred
        
    def getLogCallback(self,*args, **kw):
        """Called by Process Run Protocol when child process execution is complete """

        #Notify JobRunner Pool That this job has completed execution
        self.parentJobRunnerPool.jobCompleteCallback(self)

        #return output of job
        return self._log

    def getExitCode(self):
        return self._exitcode
        
    def getStartTime(self):
        """Get Time Job Started Executing """
        return self._startTime
    
    def getEndTime(self):
        """Get Time Job Stopped Executing """
        return self._endTime
    
    def getRunTime(self):
        """ get time executing"""
        if(self._startTime < 0):
            #job has not started yet, return -1
            return -1
        
        if(self._endTime < 0):
            #job is running, but not yet finished, return time spent so far
            return (time() - self._startTime)
        
        #job is complete, return run time
        return (self._endTime - self._startTime)
        

    
    def runJob(self, *args, **kw):
        """Execute Job:  NOTE: this function executes in its own thread """
        
        #set execution start time
        
        self.command = (args[0])[0]
        

        print "In Run Job daemon command : " + self.command
     
        self._startTime = time()
        
        print "Start Running Command : " +  str(self.command) + "  " + str(self.getStartTime())
        self._log = "Job is Running: "

        #setup reactor to run job
        self.runCommand(self.command)
   


    def runCommand(self, commandStr):
        """Create Command Line Protocol, and call spawnProcess"""
        commandStr = 'cmd.exe /c ' + commandStr


        pp= CmdProcProtocol(self)
        reactor.spawnProcess(pp,
                             commandStr ,
                             env=os.environ)
        
        
    def signalRunComplete(self, exitCode, stdoutString):
        # Pass Control back to caller to self.runJob(..)
        # by triggering defered callback,
        # this callback will return this object

        self._exitCode = exitCode
        self._log = stdoutString
             
        # set execution time
        self._endTime = time()
      
        print "Done Running Job "  + self.command
        
        reactor.callFromThread(self._jobRunDeferred.callback, self)
        
        
    

class RunTaskPool(pb.Referenceable):
 
    running = 0 # true when the pool is operating
    


    def __init__(self,  *args, **kw ):
        """See RunTaskPool.__doc__
        """
 
    
        self.args = args
        self.kw = kw
        self._jobRunnerJobs = []

        self.jobs = {}  # running Jobs, hashed on thread id


    
 
        self.startID = reactor.callWhenRunning(self.start)

    def start(self):
        """Start of execution
        """
        
        if not self.running:
            
            self.shutdownID = reactor.addSystemEventTrigger('during',
                                                            'shutdown',
                                                            self.finalClose)
            self.running = 1

    def jobCompleteCallback(self, jobRunner):
        """Callback triggered by JobRunner when execution of job is complete """
        print "Deleting Job Object from running queue"
        if jobRunner in self._jobRunnerJobs:
            self._jobRunnerJobs.remove(jobRunner)

        

    def runJob(self, *args, **kw ):
        """run job and return the result as a defered object
        """

        print "MLS: runJob - setting up to run in thread "
    
   
        d = defer.Deferred()  
        jobRunner = JobRunner(self,d)
        
        #Add to list of JobRunnerJobs  managed
        self._jobRunnerJobs.append(jobRunner)

        
        print "MLS: in _runJobRunner "
        
        # run Job in thread pool thread
        jobRunner.runJob(args, kw)
            
        # return defered used by jobRunner

        
        d.addCallback(jobRunner.getLogCallback)
        return d

  

    def close(self):
        """Close all pool connections and shutdown the pool."""

        from twisted.internet import reactor
        if self.shutdownID:
            reactor.removeSystemEventTrigger(self.shutdownID)
            self.shutdownID = None
        if self.startID:
            reactor.removeSystemEventTrigger(self.startID)
            self.startID = None
        self.finalClose()

    def finalClose(self):
        """This should only be called by the shutdown trigger."""

        self.running = 0
        for job in self.jobs.values():
            if self.noisy:
                log.msg(' closing: %s%s' % (
                                                     self.kw or ''))
            job.close()
        self.jobs.clear()

    def __getstate__(self):
        return {'noisy': self.noisy,
                'min': self.min,
                'max': self.max,
                'kw': self.kw}

    def __setstate__(self, state):
        self.__dict__ = state
        apply(self.__init__, self.kw)

def startup():
         for x in range(1,14):
            d = m.runJob()
            d.addCallback(printSelf)
            
    
def printSelf(jobRunner):
        print "Job Runner Done"

    



From michael.l.schneider at ugsplm.com  Mon Mar  1 11:34:38 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 1 Mar 2004 11:34:38 -0500
Subject: [Twisted-Python] SSH connection, redux!
Message-ID: <49199579A2BB32438A7572AF3DBB2FB501FEEFA4@uscimplm001.net.plm.eds.com>

Benjamin,

I just posted some code for review for spawning jobs off
and capturing jobs.

I posted this code for review, since I am new to twisted, and
trying to lean the "twisted way".

This approach may work for you,
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of 
> Schollnick,
> Benjamin
> Sent: Monday, March 01, 2004 10:26 AM
> To: 'twisted-python at twistedmatrix.com'
> Subject: RE: [Twisted-Python] SSH connection, redux!
> 
> 
> Folks,
> 
> 	Thanks for the support, so far...  I downloaded the
> precompiled version of the PyCrypto and everything is working fine...
> 
> 	Except for the fact, that I am attempting to figure out
> how to make this work the way, that I *believe* it needs to work...
> 
> 	By the way, I was unable to get the "Writing a client with 
> Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
> example, and that is working okay...
> 
> 	But I am having a problem, trying to figure out how to 
> adapt the 
> reactor model with my program...
> 
> 	The application has, for example, 6 "ssh queries" that 
> it needs to
> send, for example a "/usr/sbin/prtconf -v", and then 
> "capture" the output,
> and return the output
> for processing...
> 
> 	Then it proceeds to the next query....etc...
> 
> 	Is there a method that I can setup the communication, 
> and say....
> 
> reactor.send ("asdfasdf")
> data = reactor.recv ()
> 
> 	More along the telnetlib design?  This way, I could branch the
> telnet code
> I use?
> 
> 	Once, I start the reactor, I do not see where I can get 
> data in and
> out,
> without using some form of a global variable...  (Or 
> embedding the reactor
> inside
> another object)
> 
> 				- Benjamin
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From cprov at gwyddion.com  Mon Mar  1 11:57:17 2004
From: cprov at gwyddion.com (Celso Providelo)
Date: Mon, 01 Mar 2004 13:57:17 -0300
Subject: [Twisted-Python] Help about  adbapi and sqlreflector
Message-ID: <40436B6D.1030405@gwyddion.com>

Maybe it might be a dummy question, but I couln't solve my doubts with 
the set of examples from Twisted about the use of a PostgreSQL DB Server 
in the Twisted way.

Will be better if I explain exactly my case:

I have a set of CLIENTS invoking random methods from a SERVER throught 
my protocol, one of these should add/update an entry in my DB.

As I can see, if I just add:

  conn = PgSQL.connect(database='test');

  .....

  """my method !!!!!"""
  curs = conn.cursor();
  curs.execute(my_query);
  conn.commit();
  send_reply();
  """ just it """

I'll fall in a strong "wasting performance" error; if my DB becomes full 
the flows waits here, like in "polling way".

I suspect the solution should be the use of:

from twisted.internet import reactor
from twisted.enterprise import adbapi, row, reflector, sqlreflector
from row_util import *

pool = adbapi.ConnectionPool('pyPgSQL.PgSQL',database='test')
pool.runQuery(my_query);
.... and so on.

But I have no idea about how to recover some results from it or detect 
sucess or error (like in row_example.py!!!)

Any help or example will be very apreciated

best regards
-- 
Celso Providelo
cprov at gwyddion.com
Linux user #166906
Gwyddion - http://www.gwyddion.com
GNUsp Project
LAMI-Laboratories of Microprocessors
Department of Electrical Engineering
University of Sao Paulo (USP - Sao Carlos)




From z3p at twistedmatrix.com  Mon Mar  1 12:05:55 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Mon, 01 Mar 2004 12:05:55 -0500
Subject: [Twisted-Python] SSH connection, redux!
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE9@usamcms7.mc.usa.xerox.com>
References: 
	 <51B62EFFBC83D6118ADA00096BB030A107CADDE9@usamcms7.mc.usa.xerox.com>
Message-ID: <1078160755.3203.14.camel@petra>

On Mon, 2004-03-01 at 10:25, Schollnick, Benjamin wrote:
> Folks,
> 
> 	Thanks for the support, so far...  I downloaded the
> precompiled version of the PyCrypto and everything is working fine...
> 
> 	Except for the fact, that I am attempting to figure out
> how to make this work the way, that I *believe* it needs to work...
> 
> 	By the way, I was unable to get the "Writing a client with 
> Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
> example, and that is working okay...
> 
> 	But I am having a problem, trying to figure out how to adapt the 
> reactor model with my program...
> 
> 	The application has, for example, 6 "ssh queries" that it needs to
> send, for example a "/usr/sbin/prtconf -v", and then "capture" the output,
> and return the output
> for processing...
>
> 	Then it proceeds to the next query....etc...

That's almost exactly what sshsimpleclient.py does, only it does all
three executions at once.

> 	Is there a method that I can setup the communication, and say....
> 
> reactor.send ("asdfasdf")
> data = reactor.recv ()

You can't get data like this in Twisted, as the .recv() would block and
hang the reactor.  The dataReceived() method of the channel is called
when data is sent along that channel.

> 	More along the telnetlib design?  This way, I could branch the
> telnet code
> I use?

telnetlib is a blocking design, and doesn't work the way Twisted does. 
You might want to look into Paramiko, which (as I recall) maps fairly
closely to the telnetlib interface.

> 	Once, I start the reactor, I do not see where I can get data in and
> out,
> without using some form of a global variable...  (Or embedding the reactor
> inside
> another object)

You might want to have a look at the Writing Clients HOWTO, to get a
feel for how to write client code using the reactor.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040301/f67d50c1/attachment.pgp 

From henni at brainbot.com  Mon Mar  1 12:33:35 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Mon, 01 Mar 2004 18:33:35 +0100
Subject: [Twisted-Python] Using Twisted together with Windows Namespace Extensions
Message-ID: <404373EF.40807@brainbot.com>

Hi everybody,

I try to implement an ActiveX component for a Windows Namespace 
Extension, such that the
data of my server, a twisted perspective broker, can be accessed and 
browsed via the Windows explorer.

The challenge on writing something like this is, that once Windows asks 
my ActiveX component to open a folder, a file
or any other object, Windows expects an immediate answer. But asking by 
twisted server just returns a deferred.

To emulate those synchronous calls, I could use the "deferredResult" 
methods from twisted.trials.
But that way, I would not be able to handle parallel requests, e.g. from 
two or more explorers or other applications.

Does anybody know, how to emulate a synchronous call in twisted?
Am I right, that using the deferredResult method causes problems with 
parallel requests?

I guess, the solution may be similar to the render method
     return server.NOT_DONE_YET
solution used in web.resource and twisted.web.server.

thanks for any help on this,

Thorsten




-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




From itamar at itamarst.org  Mon Mar  1 12:35:29 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 01 Mar 2004 12:35:29 -0500
Subject: [Twisted-Python] Help about  adbapi and sqlreflector
In-Reply-To: <40436B6D.1030405@gwyddion.com>
References: <40436B6D.1030405@gwyddion.com>
Message-ID: <1078162529.11463.54.camel@sheriffpony>

On Mon, 2004-03-01 at 11:57, Celso Providelo wrote:

> pool = adbapi.ConnectionPool('pyPgSQL.PgSQL',database='test')
> pool.runQuery(my_query);
> .... and so on.

1. You don't need row or reflector. Ignore them.

2. runQuery returns a Deferred. So you can do:

def gotResult(x):
    print "db says:", x

pool.runQuery(my_query).addCallback(gotResult)

I suggest reading the Deferred howto and the Enterprise/adbapi howto.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From itamar at itamarst.org  Mon Mar  1 14:15:52 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 01 Mar 2004 14:15:52 -0500
Subject: [Twisted-Python] Using Twisted together with Windows Namespace
	Extensions
In-Reply-To: <404373EF.40807@brainbot.com>
References: <404373EF.40807@brainbot.com>
Message-ID: <1078168552.14438.1.camel@sheriffpony>

On Mon, 2004-03-01 at 12:33, Thorsten Henninger wrote:

> The challenge on writing something like this is, that once Windows asks 
> my ActiveX component to open a folder, a file
> or any other object, Windows expects an immediate answer. But asking by 
> twisted server just returns a deferred.

You probably want to run a thread (or more, depends what the APIs on the
windows side expect) that runs in parallel to the Twisted thread, and
blocks until Deferreds have results, and use it to handle  these
requests.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andy at thecablelounge.com  Mon Mar  1 18:29:15 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 02 Mar 2004 09:29:15 +1000
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb
 and html
In-Reply-To: <1078153972.11465.1.camel@sheriffpony>
References: <4042E66B.9020909@thecablelounge.com> <1078153972.11465.1.camel@sheriffpony>
Message-ID: <4043C74B.4050009@thecablelounge.com>

Itamar Shtull-Trauring wrote:
> On Mon, 2004-03-01 at 02:29, Andy Gayton wrote:
> 
> 
>>html - can be secure, slow non robust file transfer, doesn't support 
>>resume, easy to administer who has access to what, client access is 
>>universal
> 
> 
> You forgot about WebDAV. Designed for exactly this, with support for
> locking, arbitrary metadata, extensions for versioning, and more. Plus
> Windows, Mac OS X and maybe linux file managers have VFS support for
> WebDAV.
> 
> http://www.webdav.org
> 

Yeah I did :)

btw is it just me or have microsoft taken out support for webdav web 
folders with ie6 onwards.  At least I couldn't map to an apache/webdav 
share as a web folder when I last tried - but there was a time I could.

It'd be great if I was mistaken about this.

Anyway, if I do this in twisted then the user gets a huge choice in 
clients depending on the particular task their doing.  Grabbing an adhoc 
file out in the field - use a web browser, day to day work - map a 
share, transfering huge files - use sftp ... and from an administration 
point of view it should hopefully be slightly nicer than setting up 
samba shares.

cheers,
Andy.




From henni at brainbot.com  Tue Mar  2 04:49:24 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Tue, 02 Mar 2004 10:49:24 +0100
Subject: [Twisted-Python] Using Twisted together with Windows Namespace
 Extensions
In-Reply-To: <1078168552.14438.1.camel@sheriffpony>
References: <404373EF.40807@brainbot.com> <1078168552.14438.1.camel@sheriffpony>
Message-ID: <404458A4.3090201@brainbot.com>

>You probably want to run a thread (or more, depends what the APIs on the
>windows side expect) that runs in parallel to the Twisted thread, and
>blocks until Deferreds have results, and use it to handle  these
>requests.
>
>  
>
This works, thanks.
When I started to write the code, I figured out various methods to start 
threads in twisted.
Well, I do not really understand, how they differ.
For example:
reactor.runFromThread
reactor.runInThread

and what is the difference between
threads.deferToThread and reactor.callInThread ?
Both methods worked fine.

Is it threadsafe to run the reactor in a thread?

regards,

Thorsten


-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




From henni at brainbot.com  Tue Mar  2 05:56:37 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Tue, 02 Mar 2004 11:56:37 +0100
Subject: [Twisted-Python] Running a reactor in IPython
Message-ID: <40446865.4020501@brainbot.com>

Hi all,

At my company, we heavily use IPython for debugging and testing.
The following code shows, how to run a reactor together with IPython:

from twisted.internet import reactor
from twisted.python import threadable
threadable.init(1)

import threading
class MyThread(threading.Thread):
     def run(self):
          print "starting reactor.."
          reactor.run(installSignalHandlers=False)
         
if __name__=="__main__":
     m=MyThread()
     m.start()
     from IPython.Shell import IPythonShellEmbed
     ipshell = IPythonShellEmbed()
     ipshell() # this call anywhere in your program will start IPython


have fun,

Thorsten

-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




From david at zeos.org  Tue Mar  2 06:49:29 2004
From: david at zeos.org (David Burton)
Date: Tue, 02 Mar 2004 11:49:29 +0000
Subject: [Twisted-Python] [Request] IMAP Server Sample code
Message-ID: <404474C9.2020901@zeos.org>

Hi guys, I'm new to the list, but I've had a look through the site and 
the mailing list archives, looking for some sample code which would help 
me in setting up the basics of an IMAP server - specifically to get mail 
from a POP account (which is easy enough), store it in a database 
(again, easy enough), and set up the interface to the database messages 
(and possible other non-email goodies) using IMAP (currently not a clue).
I've tried looking through the API and the source code, but I don't know 
what I should be returning from the likes of authenticateLogin to 
confirm (or refect logins), and what to return via listCapabilities (I'm 
currently . Any lists of which methods should generally work without 
overriding, which ones should be overridden, what needs to be returned, 
etc gratefully received.

I'm quite happy to play around a bit, so long as there's a little hint 
as to what kind of stuff should be returned - I'm really needing to get 
listing of capabilities and authentication figured out first of all, so 
if anyone can help...

(As an aside, the reason for the project is that my general impressions 
are that XMail is one of the few free POP3 mail servers on Windows, and 
very capable, but missing IMAP - I'm trying to create an extension to do 
this.)

Thanks in advance,
David Burton




From andrew-twisted at puzzling.org  Tue Mar  2 07:30:00 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 2 Mar 2004 23:30:00 +1100
Subject: [Twisted-Python] Using Twisted together with Windows Namespace Extensions
In-Reply-To: <404458A4.3090201@brainbot.com>
References: <404373EF.40807@brainbot.com> <1078168552.14438.1.camel@sheriffpony> <404458A4.3090201@brainbot.com>
Message-ID: <20040302123000.GA19856@frobozz>

On Tue, Mar 02, 2004 at 10:49:24AM +0100, Thorsten Henninger wrote:
[...]
> Well, I do not really understand, how they differ.
> For example:
> reactor.runFromThread
> reactor.runInThread
> 
> and what is the difference between
> threads.deferToThread and reactor.callInThread ?
> Both methods worked fine.

Have you seen these links?

     http://twistedmatrix.com/documents/current/howto/threading
     http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html#callFromThread
     http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html#callInThread
     http://twistedmatrix.com/documents/current/api/twisted.internet.threads.html#deferToThread

Note that deferToThread is just a simple (but useful!) wrapper around
callInThread -- you can read the implementation in
twisted/internet/threads.py, it's quite short.

Let us know if it still doesn't make sense.  Those docstrings are a little
confusing.

> Is it threadsafe to run the reactor in a thread?

The reactor doesn't care which thread it is run in (although if it's not
Python's main thread you might want to set installSignalHandlers=0).

-Andrew.




From andy at thecablelounge.com  Tue Mar  2 08:06:48 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 02 Mar 2004 23:06:48 +1000
Subject: [Twisted-Python] [Request] IMAP Server Sample code
In-Reply-To: <404474C9.2020901@zeos.org>
References: <404474C9.2020901@zeos.org>
Message-ID: <404486E8.2010203@thecablelounge.com>

David Burton wrote:
> Hi guys, I'm new to the list, but I've had a look through the site and 
> the mailing list archives, looking for some sample code which would help 
> me in setting up the basics of an IMAP server - specifically to get mail 
> from a POP account (which is easy enough), store it in a database 
> (again, easy enough), and set up the interface to the database messages 
> (and possible other non-email goodies) using IMAP (currently not a clue). 

G'dday David, I'm pretty new myself.  Not sure if this is what you're 
after ... but Quotient, available from:

http://divmod.org/Quotient/index.html

looks to be a good way along as an email server - though not quite 
production ready yet.  It supports fetching (consolidating) mail from 
both imap and pop servers and makes the consolidated mail available via 
pop, imap or web browser.

Andy.



From Richard.Townsend at edl.uk.eds.com  Tue Mar  2 10:57:28 2004
From: Richard.Townsend at edl.uk.eds.com (Richard.Townsend at edl.uk.eds.com)
Date: Tue, 2 Mar 2004 15:57:28 -0000 
Subject: [Twisted-Python] resource.render_METHOD
Message-ID: <68CF619C1F239A4A8BB8EDD3D1657DC827B254@ukhkc202.edsadewd.edl.uk.eds.com>

I have a server application that creates a number of web resources (derived
from resource.Resource). Some of the resources only handle GET requests,
while others only handle POSTs.

Currently the resources only override the render() method. I want to change
them to override render_GET() or render_POST() as appropriate.

I notice that if a resource receives a request it doesn't handle, then an
UnsupportedMethod exception is raised. This returns HTML to the client
containing a message that uses UnsupportedMethod.allowedMethods. This
defaults to an empty tuple. 

Because my resources support different request methods, I have to set
allowedMethods in each resource's render() method e.g.

    def render(self, request):
        server.UnsupportedMethod.allowedMethods = ('POST',)
        resource.Resource.render(self, request)

So I still need to override the render() method. 

Is there a neater way to do this?

I'm using Twisted 1.2.0

regards
Richard Townsend
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040302/8491b2b4/attachment.htm 

From radix at twistedmatrix.com  Tue Mar  2 11:44:10 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 02 Mar 2004 11:44:10 -0500
Subject: [Twisted-Python] resource.render_METHOD
In-Reply-To: <68CF619C1F239A4A8BB8EDD3D1657DC827B254@ukhkc202.edsadewd.edl.uk.eds.com>
References: <68CF619C1F239A4A8BB8EDD3D1657DC827B254@ukhkc202.edsadewd.edl.uk.eds.com>
Message-ID: <4044B9DA.5030606@twistedmatrix.com>

Richard.Townsend at edl.uk.eds.com wrote:
> I notice that if a resource receives a request it doesn't handle, then an
> UnsupportedMethod exception is raised. This returns HTML to the client
> containing a message that uses UnsupportedMethod.allowedMethods. This
> defaults to an empty tuple. 

> Is there a neater way to do this?

Hmm. I suppose render() could grope through methods on self to find all 
'render_FOO' methods when an exception occurs.. OTOH, we could just get 
rid of the allowed methods reporting. What's the use?

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040302/172f9265/attachment.pgp 

From Richard.Townsend at edl.uk.eds.com  Wed Mar  3 03:50:16 2004
From: Richard.Townsend at edl.uk.eds.com (Richard.Townsend at edl.uk.eds.com)
Date: Wed, 3 Mar 2004 08:50:16 -0000 
Subject: [Twisted-Python] resource.render_METHOD
Message-ID: <68CF619C1F239A4A8BB8EDD3D1657DC827B255@ukhkc202.edsadewd.edl.uk.eds.com>

> Hmm. I suppose render() could grope through methods on self to find all
> 'render_FOO' methods when an exception occurs.. OTOH, we could just get
> rid of the allowed methods reporting. What's the use?

Perhaps the Resource.render() method could check for self.allowedMethods
instead of server.UnsupportedMethod.allowedMethods, then I could set it
as a class attribute in each derived class?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040303/662b214e/attachment.htm 

From radix at twistedmatrix.com  Wed Mar  3 12:49:44 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 03 Mar 2004 12:49:44 -0500
Subject: [Twisted-Python] resource.render_METHOD
In-Reply-To: <68CF619C1F239A4A8BB8EDD3D1657DC827B255@ukhkc202.edsadewd.edl.uk.eds.com>
References: <68CF619C1F239A4A8BB8EDD3D1657DC827B255@ukhkc202.edsadewd.edl.uk.eds.com>
Message-ID: <40461AB8.5030906@twistedmatrix.com>

Richard.Townsend at edl.uk.eds.com wrote:
>>Hmm. I suppose render() could grope through methods on self to find all
>>'render_FOO' methods when an exception occurs.. OTOH, we could just get
>>rid of the allowed methods reporting. What's the use?
> 
> 
> Perhaps the Resource.render() method could check for self.allowedMethods
> instead of server.UnsupportedMethod.allowedMethods, then I could set it
> as a class attribute in each derived class?

Good idea. It's in CVS, along with a fix to make UnsupportedMethod 
actually useful.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040303/798e179a/attachment.pgp 

From michal at pasternak.w.lub.pl  Wed Mar  3 15:16:14 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Wed, 3 Mar 2004 21:16:14 +0100
Subject: [Twisted-Python] deferDirWalk code snipped
Message-ID: <20040303201614.GA58106@pasternak.w.lub.pl>

Hi,

attached is a simple defer analogue to os.path.walk. It can be paused, it
can be restarted. I've wrote this code making some simple gtk backup
application. Perhaps this could be placed in examples somewhere (or even
included in the library). If someone would like to comment on my code, feel
free to do it, I always like constructive criticism ;)

Keep hacking,
-- 
Michal Pasternak :: http://pasternak.w.lub.pl :: http://winsrc.sf.net
"There's so much comedy on television. Does that cause comedy in the streets?" 
	-- Dick Cavett
-------------- next part --------------
#
# deferDirWalk.py
# (C) 2004 Michal Pasternak
# This code is public domain
#

import dircache
from twisted.internet import defer

class deferDirWalk:
    def __init__(self, baseDir, statusProc = None, skipList = [], getMTime = False):
        """
        statusProc is sent 3 arguments: total files processed, total size of files processed and the last directory name,
        skipList is a list of directories, that should be skipped,
        getMTime is a boolean value, which tells the walker to get mtimes of files also
        """
        self.baseDir = baseDir
        self.skipList = skipList
        self.statusProc = statusProc
        self.getMTime = getMTime
        self.restart()

    def restart(self):
        self.dirsToCheck = [os.path.realpath(self.baseDir)]
        self.totalSize = 0
        self.doPause = False
        self.working = False
        self.fileDict = {}  

    def run(self):
        """
        returns a defer, which will be called after processing of directories is finished.
        """
        self.d = defer.Deferred()
        self.working = True
        reactor.callLater(0.1, self.nextStep)
        return self.d

    def nextStep(self):
        if len(self.dirsToCheck):
            if not self.doPause:
                for entry in dircache.listdir(self.dirsToCheck[0]):
                    p = os.path.join(self.dirsToCheck[0], entry)
                    if os.path.islink(p):
                        continue
                    elif os.path.isdir(p):
                        try:
                            self.skipList.index(entry)
                        except ValueError:
                            self.dirsToCheck.append(p)
                    elif os.path.isfile(p):
                        try:
                            s = os.path.getsize(p)
                            if self.getMTime:
                                self.fileDict[p]=(s, os.path.getmtime(p))
                            else:
                                self.fileDict[p]=(s, None)                                
                            self.totalSize+=s
                        except OSError:
                            log("Cannot stat %s" % p)
                if self.statusProc:
                    self.statusProc(len(self.fileDict.items()),
                                    self.totalSize,
                                    self.dirsToCheck[0])
                self.dirsToCheck = self.dirsToCheck[1:]
            reactor.callLater(0.01, self.nextStep)
        else:
            self.working = False
            self.d.callback((self.fileDict, self.totalSize))

    def pause(self, doPause):
        """
        if doPause is True, work of walker is paused;
        it is unpaused if it is not
        """
        self.doPause = doPause


if __name__ == "__main__":
    from twisted.internet import reactor
    import os, sys

    def archiveWalkStatus(fileCount, fileSize, lastDir):
        sys.stdout.write("%s (analyzed %i files (total size: %.2f MB))...\r" % (lastDir, fileCount, float(fileSize / (1024.0*1024.0))))
        sys.stdout.flush()

    def archiveWalkDone(retVal):
        (fileDict, fileSize) = retVal
        sys.stdout.write("\nJob done!\n")
        sys.stdout.write("Totals:\n\tfiles: %i\n\tsize: %i bytes\n\n" % (len(fileDict.keys()), fileSize))
        sys.stdout.flush()
        reactor.stop()

    if len(sys.argv)<2:
        sys.stdout.write("usage: deferDirWalk.py dirname\n")
        sys.exit(1)
        
    archiveWalker = deferDirWalk(os.path.realpath(sys.argv[1]), archiveWalkStatus)
    archiveWalker.run().addCallback(archiveWalkDone)
    reactor.run()

From itamar at itamarst.org  Wed Mar  3 15:47:00 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 03 Mar 2004 15:47:00 -0500
Subject: [Twisted-Python] deferDirWalk code snipped
In-Reply-To: <20040303201614.GA58106@pasternak.w.lub.pl>
References: <20040303201614.GA58106@pasternak.w.lub.pl>
Message-ID: <1078346820.14580.63.camel@sheriffpony>

On Wed, 2004-03-03 at 15:16, Michal Pasternak wrote:

>  If someone would like to comment on my code, feel
> free to do it, I always like constructive criticism ;)

Separate the code into two parts - an iterator (probably using
generators) that walks a directory, and then a Twisted wrapper that uses
reactor scheduling to spread it out over time.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From exarkun at divmod.com  Wed Mar  3 18:57:20 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Wed, 03 Mar 2004 23:57:20 GMT
Subject: [Twisted-Python] [Request] IMAP Server Sample code
Message-ID: <20040303235720.13113.1049884722.divmod.quotient.3@erlang.divmod.net>

On Tue, 02 Mar 2004 11:49:29 +0000, David Burton <david at zeos.org> wrote:
>Hi guys, I'm new to the list, but I've had a look through the site and 
> the mailing list archives, looking for some sample code which would help 
> me in setting up the basics of an IMAP server - specifically to get mail 
> from a POP account (which is easy enough), store it in a database 
> (again, easy enough), and set up the interface to the database messages 
> (and possible other non-email goodies) using IMAP (currently not a clue).
> I've tried looking through the API and the source code, but I don't know 
> what I should be returning from the likes of authenticateLogin to 
> confirm (or refect logins), and what to return via listCapabilities (I'm 
> currently . Any lists of which methods should generally work without 
> overriding, which ones should be overridden, what needs to be returned, 
> etc gratefully received.

  twisted.protocols.imap4.IMAP4Server is written so that, in most cases, it need not be subclassed.  The preferred way to implement a server is to implement the interfaces IMAP4Server depends on.  The two required interfaces are IAccount and IMailbox, both of which are defined in twisted.protocols.imap4.  There are several other optional interfaces as well.  Ideally, accounts and mailboxes are hooked up to an IMAP4Server protocol instance via twisted.cred.  Here is a brief example:

    from twisted.cred import portal
    from twisted.protocols import imap4

    class Account:
        __implements__ = (imap4.IAccount,)

        # Actually implement the interface here


    def logout():
        # Cleanup logic goes here

    class Realm:
        __implements__ = (portal.IRealm,)

        def requestAvatar(self, avatarID, mind, *interfaces):
            if imap4.IAccount not in interfaces:
                raise NotImplementedError
            return imap4.IAccount, Account(avatarID), logout

    p = portal.Portal(Realm())

    # Contrive to have your ServerFactory's buildProtocol
    # set the "portal" attribute of the IMAP4Server instance
    # it creates to the `p' defined above.

  For more information, refer to the cred and component howtos available on the Twisted website.

  Jp



From radix at twistedmatrix.com  Wed Mar  3 22:06:16 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 03 Mar 2004 22:06:16 -0500
Subject: [Twisted-Python] Re: [Stackless] Stackless and Twisted
In-Reply-To: <404541B0.5020204@twistedmatrix.com>
References: <20040301145723.11366.qmail@web41001.mail.yahoo.com>	<40435224.8070905@stackless.com>	<948B7162-6BB5-11D8-93F5-000A95686CD8@redivi.com>	<4043964D.7000404@twistedmatrix.com>	<6FD28371-6BBD-11D8-93F5-000A95686CD8@redivi.com>	<40439DD3.2010801@twistedmatrix.com>	<4043A939.7000106@stackless.com>	<4043AA8F.8080103@twistedmatrix.com>	<40452B90.6090104@stackless.com> <404541B0.5020204@twistedmatrix.com>
Message-ID: <40469D28.9030603@twistedmatrix.com>

Ok, here's a completely rewritten stackless support module for Twisted. 
I used to have one that did all kinds of stupid unnecessary stuff with 
the reactor and junk, but it's gone now. For you CVS Twisted users, this 
is in sandbox/radix/threadless.py.

It offers two functions: blockOn and deferredTasklet.

deferredTasklet is a function decorator that you should use on your 
stacklessy code that you want to integrate with Twisted.

blockOn is a function that you should pass a Deferred to wait for it to 
fire. Use it in your stacklessy-code.

There's a TEST function (that's automatically run when you execute the 
module) that shows this off with some somewhat helpful comments. There 
are also prints sprinkled throughout the code to show you what's going on.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: threadless.py
Type: text/x-python
Size: 1974 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040303/7d66388b/attachment.py 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040303/7d66388b/attachment.pgp 

From mthiercy at spiralnet.net  Thu Mar  4 04:48:21 2004
From: mthiercy at spiralnet.net (Max Thiercy)
Date: Thu, 4 Mar 2004 10:48:21 +0100
Subject: [Twisted-Python] Running twisted tap file as NT service.
Message-ID: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>

I'm trying to implement a small dedicated service on both Windows and Unix.
So, I'm interesting in the capability of converting a twisted .tap file to
an NT/2K/XP service.

I read some useful mails from Cory Dodt (end of january 2004) but these
mails mention a tool named 'tap2ntsvc' that I can't find anywhere.

Could you tell me where I can find this tool ?

Thanks in advance.

Max THIERCY.




From andrew-twisted at puzzling.org  Thu Mar  4 04:58:48 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 4 Mar 2004 20:58:48 +1100
Subject: [Twisted-Python] Running twisted tap file as NT service.
In-Reply-To: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>
References: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>
Message-ID: <20040304095848.GA21671@frobozz>

On Thu, Mar 04, 2004 at 10:48:21AM +0100, Max Thiercy wrote:
> I'm trying to implement a small dedicated service on both Windows and Unix.
> So, I'm interesting in the capability of converting a twisted .tap file to
> an NT/2K/XP service.
> 
> I read some useful mails from Cory Dodt (end of january 2004) but these
> mails mention a tool named 'tap2ntsvc' that I can't find anywhere.
> 
> Could you tell me where I can find this tool ?

It's in the "sandbox/moonfallen" directory in CVS.  You browse it on the web
here:
    http://cvs.twistedmatrix.com/cvs/sandbox/moonfallen/

The easiest way to get it is probably to checkout a copy of the CVS
repository, though (brief instructions at http://cvs.twistedmatrix.com/).

-Andrew.




From douglas at paradise.net.nz  Thu Mar  4 06:04:58 2004
From: douglas at paradise.net.nz (Douglas Bagnall)
Date: Fri, 05 Mar 2004 00:04:58 +1300
Subject: [Twisted-Python] deferDirWalk code snipped
In-Reply-To: <1078346820.14580.63.camel@sheriffpony>
References: <20040303201614.GA58106@pasternak.w.lub.pl>
 <1078346820.14580.63.camel@sheriffpony>
Message-ID: <40470D5A.5080104@paradise.net.nz>


Itamar Shtull-Trauring wrote:
> 
> Separate the code into two parts - an iterator (probably using
> generators) that walks a directory, 

which could perhaps be 2.3's os.walk, or derived thereof.  It's tiny.

http://cvs.sf.net/viewcvs.py/python/python/dist/src/Lib/os.py?rev=1.74&view=auto

> and then a Twisted wrapper that uses
> reactor scheduling to spread it out over time.
> 

douglas



From njp at njp.us  Thu Mar  4 11:08:04 2004
From: njp at njp.us (Norm Petterson)
Date: Thu, 4 Mar 2004 11:08:04 -0500
Subject: [Twisted-Python] Deterministic TimerService
Message-ID: <0e4f01c40202$e0456190$6401a8c0@njpdesk>

Hi,

Thanks for such a useful framework.

While working on an industrial data logger using Twisted, I found that
application.internet.TimerService calls my own callLater callable function
before reissuing the next callLater. Consequently, instead of a time period
c, the callable function runs every c+x, where x is the duration of my own
function, and thus appears to slip over time.

Based on my past experiences with DEC RSX "mark time" and VMS "set timer" in
similar situations, I recommend changing:

def setupCall():
    self.callable(*self.args, **self.kwargs)
    self._call  =  reactor.callLater(self.step, setupCall)

to

def setupCall():
    self._call  =  reactor.callLater(self.step, setupCall)
    self.callable(*self.args, **self.kwargs)

Reissuing the timer request first appears to work more as I'd expect,
particularly as I am using timestamp information for each scan to compute an
appropriate bsddb record number in a persistent circular buffer. Any other
opinions?

Regards,

Norm Petterson




From itamar at itamarst.org  Thu Mar  4 11:41:11 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 04 Mar 2004 11:41:11 -0500
Subject: [Twisted-Python] Running twisted tap file as NT service.
In-Reply-To: <20040304095848.GA21671@frobozz>
References: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>
	 <20040304095848.GA21671@frobozz>
Message-ID: <1078418470.14575.116.camel@sheriffpony>

On Thu, 2004-03-04 at 04:58, Andrew Bennetts wrote:

> The easiest way to get it is probably to checkout a copy of the CVS
> repository, though (brief instructions at http://cvs.twistedmatrix.com/).

The 1.2.0 tarball should include it as well, I think.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From itamar at itamarst.org  Thu Mar  4 11:43:26 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 04 Mar 2004 11:43:26 -0500
Subject: [Twisted-Python] Deterministic TimerService
In-Reply-To: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
References: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
Message-ID: <1078418606.19549.119.camel@sheriffpony>

On Thu, 2004-03-04 at 11:08, Norm Petterson wrote:

> While working on an industrial data logger using Twisted, I found that
> application.internet.TimerService calls my own callLater callable function
> before reissuing the next callLater. Consequently, instead of a time period
> c, the callable function runs every c+x, where x is the duration of my own
> function, and thus appears to slip over time.

TimerService in 1.2.0 uses twisted.internet.task.LoopingCall internally,
which deals with this a bit better. Try upgrading and tell us if it
solves your problem?

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From thomas.mangin at exa-networks.co.uk  Thu Mar  4 11:51:30 2004
From: thomas.mangin at exa-networks.co.uk (Thomas Mangin)
Date: Thu, 04 Mar 2004 16:51:30 +0000
Subject: [Twisted-Python] Deterministic TimerService
In-Reply-To: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
References: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
Message-ID: <1078419090.3212.40.camel@thomas_mangin.dc.exa.net.uk>

Hello,

> While working on an industrial data logger using Twisted, I found that
> application.internet.TimerService calls my own callLater callable function
> before reissuing the next callLater. Consequently, instead of a time period
> c, the callable function runs every c+x, where x is the duration of my own
> function, and thus appears to slip over time.

I never used this feature but, for what it is worth, I agree with what
you are saying .

However I recall a nasty side effect that this behaviour had. If your
callback are taking all the CPU and can not finish before the new
callback is scheduled, it will cause the box to hit more and more CPU
and memory until something bad happens.

I think that an adding an optional flag to not allow the new callback to
run if the previous one is not completed would be a good idea.

My $.02 as I do not have any code to contribute.

Thomas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040304/1772670b/attachment.pgp 

From njp at njp.us  Thu Mar  4 14:05:30 2004
From: njp at njp.us (Norm Petterson)
Date: Thu, 4 Mar 2004 14:05:30 -0500
Subject: [Twisted-Python] Deterministic TimerService
References: <0e4f01c40202$e0456190$6401a8c0@njpdesk> <1078418606.19549.119.camel@sheriffpony>
Message-ID: <0f2301c4021b$a9666890$6401a8c0@njpdesk>

Yup, the 1.2.0 TimerService runs like a Swiss watch (no apparent time
slippage at all). Thanks.

I'll remember to check the latest version in the future ;-)...

----- Original Message ----- 
From: "Itamar Shtull-Trauring" <itamar at itamarst.org>
To: <twisted-python at twistedmatrix.com>
Sent: Thursday, March 04, 2004 11:43 AM
Subject: Re: [Twisted-Python] Deterministic TimerService


> On Thu, 2004-03-04 at 11:08, Norm Petterson wrote:
>
> > While working on an industrial data logger using Twisted, I found that
> > application.internet.TimerService calls my own callLater callable
function
> > before reissuing the next callLater. Consequently, instead of a time
period
> > c, the callable function runs every c+x, where x is the duration of my
own
> > function, and thus appears to slip over time.
>
> TimerService in 1.2.0 uses twisted.internet.task.LoopingCall internally,
> which deals with this a bit better. Try upgrading and tell us if it
> solves your problem?
>
> -- 
> Itamar Shtull-Trauring    http://itamarst.org
> Looking for a job: http://itamarst.org/resume.html
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From henni at brainbot.com  Tue Mar  2 05:10:23 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Tue, 02 Mar 2004 11:10:23 +0100
Subject: [Twisted-Python] WebDAV for Twisted
Message-ID: <40445D8F.2030803@brainbot.com>

Hi all,

since some people were interested in using WebDAV together with Twisted
recently, I decided to send you my current work on this.
I essentially used the "pydav" implementation:

http://www.comlounge.net/webdav/

and wrote a twisted extension. Once you are familar with "pydav", the
twisted extension is self-explaning. I hope, the short README.txt will
help you. By the way, I tested this implementation  together with the
Windows Explorer and cadaver, a command line WebDAV client.

In my opinion, it would be very useful to integrate WebDAV support in
Twisted.
Well,  since I have never contributed code to twisted, I do not know,
how to do this.

regards,

Thorsten


-- 
brainbot technologies AG
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




-------------- next part --------------
A non-text attachment was scrubbed...
Name: py-dav.zip
Type: application/zip
Size: 87638 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040302/0d4dfb44/attachment.zip 

From steve_g at ix.netcom.com  Tue Mar  2 06:00:24 2004
From: steve_g at ix.netcom.com (Steve Goldman)
Date: Tue, 2 Mar 2004 06:00:24 -0500
Subject: [Twisted-Python] Bug in twistw.py
Message-ID: <000701c40045$90dd9280$0200000a@fred>

Sorry for posting here, but I couldn't get the bug tracker to register me.

The twistw.py file provided by the windows installers for python 2.2 and
python 2.3 doesn't have any main function.  It needs the following lines
added to the end of the script:

if __name__ == "__main__":
     run()

Thanks.





From radix at twistedmatrix.com  Thu Mar  4 19:05:27 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 04 Mar 2004 19:05:27 -0500
Subject: [Twisted-Python] Bug in twistw.py
In-Reply-To: <000701c40045$90dd9280$0200000a@fred>
References: <000701c40045$90dd9280$0200000a@fred>
Message-ID: <4047C447.2040402@twistedmatrix.com>

Steve Goldman wrote:
> Sorry for posting here, but I couldn't get the bug tracker to register me.
> 
> The twistw.py file provided by the windows installers for python 2.2 and
> python 2.3 doesn't have any main function.  It needs the following lines
> added to the end of the script:
> 
> if __name__ == "__main__":
>      run()
> 
> Thanks.

No, I don't think so... 'twistd' uses the twistw module when it's run on 
windows. You're not supposed to run twistw.py directly.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040304/1f1a1ca5/attachment.pgp 

From itamar at itamarst.org  Fri Mar  5 11:19:01 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 05 Mar 2004 11:19:01 -0500
Subject: [Twisted-Python] Lock class using Deferreds
Message-ID: <1078503541.14577.234.camel@sheriffpony>

class Lock:
    """A lock for event driven systems."""

    def __init__(self):
        self.waiting = []
        self.locked = 0

    def acquire(self):
        """Attempt to acquire the lock.

        @return Deferred which returns on lock acquisition.
        """
        d = defer.Deferred()
        if self.locked:
            self.waiting.append(d)
        else:
            self.locked = 1
            d.callback(self)
        return d

    def release(self):
        """Release the lock.

        Should be called by whoever did the acquire() when the shared
        resource is free.
        """
        assert self.locked
        self.locked = 0
        if self.waiting:
            # someone is waiting to acquire lock
            self.locked = 1
            d = self.waiting.pop(0)
            d.callback(self)

    def _releaseAndReturn(self, r):
        self.release()
        return r
    
    def run(self, f, *args, **kwargs):
        """Acquire lock, run function, release lock.

        @return Deferred of function result.
        """
        d = self.acquire()
        d.addCallback(lambda r: defer.maybeDeferred(f, *args, **kwargs).addBoth(self._releaseAndReturn))
        return d

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andrew-twisted at puzzling.org  Fri Mar  5 18:20:16 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sat, 6 Mar 2004 10:20:16 +1100
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <1078503541.14577.234.camel@sheriffpony>
References: <1078503541.14577.234.camel@sheriffpony>
Message-ID: <20040305232016.GA1878@frobozz>

On Fri, Mar 05, 2004 at 11:19:01AM -0500, Itamar Shtull-Trauring wrote:
> class Lock:
>     """A lock for event driven systems."""

I have very very similiar looking code on my harddisk... what inspired you
to write this? :)

>     def release(self):
>         """Release the lock.
> 
>         Should be called by whoever did the acquire() when the shared
>         resource is free.
>         """
>         assert self.locked
>         self.locked = 0
>         if self.waiting:
>             # someone is waiting to acquire lock
>             self.locked = 1
>             d = self.waiting.pop(0)
>             d.callback(self)

In my version, I had a 'throttle' instance attribute:
    d = self.queue.pop(0)
    if self.throttle:
        reactor.callLater(0, d.callback, self)
    else:
        d.callback(self)

Considering I never actually *used* my version, this might be a premature
feature addition, though.

>     def _releaseAndReturn(self, r):
>         self.release()
>         return r

I wonder if this convenience function should also call log.err if
isinstance(r, failure.Failure)?  But that's probably just premature
featuritus again :)

So, where in Twisted is a good spot for it?  twisted.internet.util?

-Andrew.




From radix at twistedmatrix.com  Fri Mar  5 18:34:44 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 05 Mar 2004 18:34:44 -0500
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <20040305232016.GA1878@frobozz>
References: <1078503541.14577.234.camel@sheriffpony> <20040305232016.GA1878@frobozz>
Message-ID: <40490E94.6070108@twistedmatrix.com>

Andrew Bennetts wrote:
> On Fri, Mar 05, 2004 at 11:19:01AM -0500, Itamar Shtull-Trauring wrote:
> 
>>class Lock:
>>    """A lock for event driven systems."""
> 
> 
> I have very very similiar looking code on my harddisk... what inspired you
> to write this? :)

I have something vaguely similar too; a class that handled a 'pipeline' 
(?) of Deferreds and didn't allow more than N at a time. My purpose for 
it was doing several thousand DNS queries and I only wanted at most N 
outstanding requests at a time, so I wouldn't overload the servers. Ok, 
so it's not that similar, but it's something that would probably go in 
the same module ;-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040305/95b545ff/attachment.pgp 

From exarkun at divmod.com  Fri Mar  5 19:21:00 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Sat, 06 Mar 2004 00:21:00 GMT
Subject: [Twisted-Python] Lock class using Deferreds
Message-ID: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net>

On Fri, 05 Mar 2004 18:34:44 -0500, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>Andrew Bennetts wrote:
> > On Fri, Mar 05, 2004 at 11:19:01AM -0500, Itamar Shtull-Trauring wrote:
> > 
> >>class Lock:
> >>    """A lock for event driven systems."""
> > 
> > 
> > I have very very similiar looking code on my harddisk... what inspired you
> > to write this? :)
> 
> I have something vaguely similar too; a class that handled a 'pipeline' 
> (?) of Deferreds and didn't allow more than N at a time. My purpose for 
> it was doing several thousand DNS queries and I only wanted at most N 
> outstanding requests at a time, so I wouldn't overload the servers. Ok, 
> so it's not that similar, but it's something that would probably go in 
> the same module ;-)

  Actually, it is extremely similar.  It's called a semaphore :)  This,
along with a condition class would probably all make for a good module.

  I was thinking twisted.python.defertools, if only defer wasn't part of
twisted.internet :(

  Jp




From andy at thecablelounge.com  Fri Mar  5 21:47:17 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 06 Mar 2004 12:47:17 +1000
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net>
Message-ID: <40493BB5.4000504@thecablelounge.com>

 >> On Fri, 05 Mar 2004 18:34:44 -0500, Christopher Armstrong 
<radix at twistedmatrix.com> wrote:
>>I have something vaguely similar too; a class that handled a 'pipeline' 
>>(?) of Deferreds and didn't allow more than N at a time. My purpose for 
>>it was doing several thousand DNS queries and I only wanted at most N 
>>outstanding requests at a time, so I wouldn't overload the servers. Ok, 
>>so it's not that similar, but it's something that would probably go in 
>>the same module ;-)

> exarkun at divmod.com wrote:
> Actually, it is extremely similar.  It's called a semaphore :) 
> 

To be sure :)

class Semaphore:
     """A semaphore for event driven systems."""

     def __init__(self, tokens):
         self.waiting = []
         self.tokens  = tokens
	self.limit   = tokens

     def acquire(self):
         """Attempt to acquire the token.

         @return Deferred which returns on token acquisition.
         """
	assert self.tokens >= 0
         d = defer.Deferred()
         if not self.tokens:
             self.waiting.append(d)
         else:
             self.tokens = self.tokens - 1
             d.callback(self)
         return d

     def release(self):
         """Release the token.

         Should be called by whoever did the acquire() when the shared
         resource is free.
         """
         assert self.tokens < self.limit
         self.tokens = self.tokens + 1
         if self.waiting:
             # someone is waiting to acquire token
             self.tokens = self.tokens - 1
             d = self.waiting.pop(0)
             d.callback(self)

     def _releaseAndReturn(self, r):
         ....

class Lock (Semaphore) :
     def __init__(self) :
         Semaphore.__init__(self, 1)

Andy.



From trevp at trevp.net  Sat Mar  6 01:33:48 2004
From: trevp at trevp.net (Trevor Perrin)
Date: Fri, 05 Mar 2004 22:33:48 -0800
Subject: [Twisted-Python] Twisted + tlslite
Message-ID: <5.2.0.9.0.20040305205642.037cb708@pop.sbcglobal.yahoo.com>


Hi Twisted folks,

I recently wrote an SSL library in python [1] and got it working with 
asyncore.  I'd like to make it useable with Twisted too.  The library has a 
few nice features, so it wouldn't be totally redundant with Twisted's 
current SSL support:
  - it can run in pure python (slowly)
  - it supports some nonstandard authentication methods (SRP, cryptoIDs, 
and shared-keys)

As a proof-of-concept I did some blunt-object surgery, and got Twisted's 
pre-configured web server using it for HTTPS.

To do a real integration, though, I think I'd need help: I'm a Twisted 
newbie, and Twisted looks tightly-coupled with PyOpenSSL.  At least, 
there's no easy way to "plug in" that I saw.  In the mailing list there was 
talk about Jython/Java SSL [2].  That would have the same issues, I think, 
so maybe they could be looked at together.

Anyways, if anyone's interested in discussing the details, let me know!

Thanks,
Trevor

[1] http://trevp.net/tlslite/
[2] 
http://www.twistedmatrix.com/pipermail/twisted-python/2004-January/006892.html













From radix at twistedmatrix.com  Sat Mar  6 02:00:12 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 06 Mar 2004 02:00:12 -0500
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <40493BB5.4000504@thecablelounge.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com>
Message-ID: <404976FC.6080207@twistedmatrix.com>

Andy Gayton wrote:
>> exarkun at divmod.com wrote:
>> Actually, it is extremely similar.  It's called a semaphore :)
> 
> 
> To be sure :)
> 
> class Semaphore:
>     """A semaphore for event driven systems."""

My thing looks somewhat different; there's no 'release'...

I haven't really put much time into figuring out what's going on in this 
thread, but exarkun wanted me to post my code. It's got a couple of 
things in it that are app-specific and probably isn't optimally factored.


class DeferredQueue:

     MAX_REQUESTS = 20

     def __init__(self, source, request):
         self.deferreds = {}
         self.source = source
         self.request = request
         for _ in range(self.MAX_REQUESTS):
             self.getMore()

     def getMore(self):
         assert len(self.deferreds) < self.MAX_REQUESTS

         try:
             sink, input = self.source.next()
         except StopIteration:
             return

         d = self.request(input)
         self.deferreds[input] = d

         #XXX fixme app-specific
         d.addBoth(self._cbGotSync, input)
         d.addCallback(sink)

         def _err(f):
             #XXX fixme app-specific
             if f.check(NotSync, defer.TimeoutError):
                 return
             print f
             return

         d.addErrback(_err)

     def _cbGotSync(self, result, input):
         del self.deferreds[input]
         self.getMore()
         return result



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040306/145e5a8e/attachment.pgp 

From andy at thecablelounge.com  Sat Mar  6 03:46:59 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 06 Mar 2004 18:46:59 +1000
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <404976FC.6080207@twistedmatrix.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com> <404976FC.6080207@twistedmatrix.com>
Message-ID: <40499003.60308@thecablelounge.com>

Christopher Armstrong wrote:

>  haven't really put much time into figuring out what's going on in this thread,

Putting the Lock with similiar tools into a module I think ...

> class DeferredQueue:
> 
>     MAX_REQUESTS = 20

You twisted guys have a way of coding stuff that makes me go cross-eyed :)

You're right - it is a bit different.  DeferredQueue takes a known 
amount of work you've got to get through and feeds it out at a 
controlled rate - the modified Itamar's Lock is a similiar control but 
accepts spontaneous requests for work.

I think the following would work similiar to yours Chris ? ..

dnsRequest_Semaphore = Semaphore(20)
for (sink, input) in source :
     dnsRequest_Semaphore.run( request, input ).addCallback( sink )

???? is that right - still getting a handle on defers :) :(

the above doesn't cover the error handling you are doing though .. I 
can't quite work out that bit ...

Andy.



From radix at twistedmatrix.com  Sat Mar  6 14:18:43 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 06 Mar 2004 14:18:43 -0500
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <40499003.60308@thecablelounge.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com> <404976FC.6080207@twistedmatrix.com> <40499003.60308@thecablelounge.com>
Message-ID: <404A2413.1020105@twistedmatrix.com>

Andy Gayton wrote:
> Christopher Armstrong wrote:
> 
>>  haven't really put much time into figuring out what's going on in 
>> this thread,
> 
> 
> Putting the Lock with similiar tools into a module I think ...

I meant, I haven't bothered enough to actually grok all the code. :)

> You twisted guys have a way of coding stuff that makes me go cross-eyed :)

Well, the app I was writing at the time was kind of weird. ;-)

> I think the following would work similiar to yours Chris ? ..
> 
> dnsRequest_Semaphore = Semaphore(20)
> for (sink, input) in source :
>     dnsRequest_Semaphore.run( request, input ).addCallback( sink )


Dunno, maybe someone else can actually grok what's going on here (I 
haven't sufficiently bothered to read your Semaphore class :P). If it is 
the same, then your Semaphore class is obviously better :) OTOH, my 
thing didn't call .next() on the source until its result was actually 
required, but this snippet is obviously queuing up the (potentially 
thousands) of operations in the Semaphore.. Probably doesn't actually 
matter.

> ???? is that right - still getting a handle on defers :) :(
> 
> the above doesn't cover the error handling you are doing though .. I 
> can't quite work out that bit ...

As the comments pointed out, the bit of error-handling was 
application-specific. I made a mistake, btw: the *first* "xxx fixme 
app-specific" wasn't actually app-specific (the 
addBoth(self._cbGotSync)) -- it was just an unfortunately 
specifically-named method. The NotSync error handling was indeed 
specific to the app I was writing.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040306/55ffb403/attachment.pgp 

From radix at twistedmatrix.com  Sat Mar  6 14:54:18 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 06 Mar 2004 14:54:18 -0500
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <5.2.0.9.0.20040305205642.037cb708@pop.sbcglobal.yahoo.com>
References: <5.2.0.9.0.20040305205642.037cb708@pop.sbcglobal.yahoo.com>
Message-ID: <404A2C6A.9010302@twistedmatrix.com>

Trevor Perrin wrote:
> To do a real integration, though, I think I'd need help: I'm a Twisted 
> newbie, and Twisted looks tightly-coupled with PyOpenSSL.  At least, 
> there's no easy way to "plug in" that I saw.  In the mailing list there 
> was talk about Jython/Java SSL [2].  That would have the same issues, I 
> think, so maybe they could be looked at together.
> 
> Anyways, if anyone's interested in discussing the details, let me know!

Hmm. I think I remember seeing Jp or Itamar or someone discussing 
TLSLite integration with Twisted, before, so I know there's some 
interest. Maybe you can get a response out of them by asking some 
technical questions on the list or IRC. :)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040306/30e0a607/attachment.pgp 

From exarkun at divmod.com  Sun Mar  7 00:40:57 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Sun, 07 Mar 2004 05:40:57 GMT
Subject: [Twisted-Python] Twisted + tlslite
Message-ID: <20040307054057.1960.2023520331.divmod.quotient.7@erlang.divmod.net>

On Fri, 05 Mar 2004 22:33:48 -0800, Trevor Perrin <trevp at trevp.net> wrote:
>
> 
> Hi Twisted folks,
> 
> I recently wrote an SSL library in python [1] and got it working with 
> asyncore.  I'd like to make it useable with Twisted too.  The library has a 
> few nice features, so it wouldn't be totally redundant with Twisted's 
> current SSL support:
>   - it can run in pure python (slowly)
>   - it supports some nonstandard authentication methods (SRP, cryptoIDs, 
> and shared-keys)
> 
> As a proof-of-concept I did some blunt-object surgery, and got Twisted's 
> pre-configured web server using it for HTTPS.
> 
> To do a real integration, though, I think I'd need help: I'm a Twisted 
> newbie, and Twisted looks tightly-coupled with PyOpenSSL.  At least, 
> there's no easy way to "plug in" that I saw.  In the mailing list there was 
> talk about Jython/Java SSL [2].  That would have the same issues, I think, 
> so maybe they could be looked at together.
> 
> Anyways, if anyone's interested in discussing the details, let me know!

  I'm definitely interested in getting Twisted doing SSL with a pure-python SSL library.  I have only had time to look at TLSLite briefly, and probably won't have any time to attempt the integration for a little while (several weeks at the earliest, I imagine).  I might be able to offer some pointers though.

  One tip: don't try to integrate with the existing SSL code.  The implementation is very much a result of the API limitations of PyOpenSSL.  Preferably, a new implementation will provide SSL support as a protocol instead of a transport.  For examples of how this can be done, see twisted.protocols.policies.

  Jp



From andy at thecablelounge.com  Sun Mar  7 02:36:28 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sun, 07 Mar 2004 17:36:28 +1000
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <404A2413.1020105@twistedmatrix.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com> <404976FC.6080207@twistedmatrix.com> <40499003.60308@thecablelounge.com> <404A2413.1020105@twistedmatrix.com>
Message-ID: <404AD0FC.2050103@thecablelounge.com>

Christopher Armstrong wrote:

>> dnsRequest_Semaphore = Semaphore(20)
>> for (sink, input) in source :
>>     dnsRequest_Semaphore.run( request, input ).addCallback( sink )

> OTOH, my 
> thing didn't call .next() on the source until its result was actually 
> required, but this snippet is obviously queuing up the (potentially 
> thousands) of operations in the Semaphore.. Probably doesn't actually 
> matter.

It might matter - if .next took even a small amount of time (say 
fetching jobs out of a text file) - then my for loop would block for a 
bit which is against the rules .. maybe these are different tasks after 
all ..

It's a nice exercise for learning defers though :)

The problem with my for loop is its effectively copying the queue stored
in source and putting it in Semaphore upfront, instead of as needed.

Perhaps something which is a cross between Lock and DeferredQueue would 
be better - if there is a queue of known work to be processed, leave it 
as an external queue instead of copying it ...

Ok - a sunday afternoon spent with the defers howto later - I came up 
with this - which only does what your original does Chris but allows you 
to add new jobs on the fly and is 5 times longer in code :) .. I was a 
bit embarrassed by that so added the ability to prioritise jobs in the 
queue to justify the whole experience ;)

--------------
from twisted.internet import reactor, defer

class Semaphore:
     """A semaphore for event driven systems."""

     """This hasn't changed from the earlier email."""

     def __init__(self, tokens):
         self.waiting = []
         self.tokens  = tokens
         self.limit   = tokens

     def acquire(self):
         """Attempt to acquire the token.

         @return Deferred which returns on token acquisition.
         """
         assert self.tokens >= 0
         d = defer.Deferred()
         if not self.tokens:
             self.waiting.append(d)
         else:
             self.tokens = self.tokens - 1
             d.callback(self)
         return d

     def release(self):
         """Release the token.

         Should be called by whoever did the acquire() when the shared
         resource is free.
         """
         assert self.tokens < self.limit
         self.tokens = self.tokens + 1
         if self.waiting:
             # someone is waiting to acquire token
             self.tokens = self.tokens - 1
             d = self.waiting.pop(0)
             d.callback(self)

     def _releaseAndReturn(self, r):
         self.release()
         return r

     def run(self, f, *args, **kwargs):
         """Acquire token, run function, release token.

         @return Deferred of function result.
         """
         d = self.acquire()
         d.addCallback(lambda r: defer.maybeDeferred(f, *args, 
**kwargs).addBoth(self._releaseAndReturn))
         return d


class DeferredPriorityQueue:
     """An event driven priority queue"""

     def __init__( self, max_concurrent ) :
         self.semaphore = Semaphore( max_concurrent )
         self.queue = {}
         self.processing = False

     def next(self) :
         """
         @return the next job in the queue
         raises StopIteration when out of jobs
         """
         if not len( self.queue ) : raise StopIteration

         highest_priority = min( self.queue.keys() )

         try:
             return self.queue[highest_priority][0].next()
         except StopIteration :
             del self.queue[highest_priority][0]
             if not len( self.queue[highest_priority] ) : del 
self.queue[highest_priority]
             return self.next()

     def _cbTokenAcquired(self, semaphore, job) :
         """Runs queued up job once a token can be acquired
         Sets the job to release the token when completed and calls the 
jobs callback
         Then continues processing the queue
         """
         (f, args, kwargs, cb) = job

         d = defer.maybeDeferred(f, *args, 
**kwargs).addBoth(self.semaphore._releaseAndReturn)
         d.addCallback(cb)

         self._processQueue()

     def _processQueue(self):
         """Grabs the next job in queue if available and then waits for 
a token"""
         try:
             job = self.next()
         except StopIteration :
             self.processing = False
             return

         self.semaphore.acquire().addCallback(self._cbTokenAcquired, job)

     def _startQueue(self) :
         """Start queue processing if its not already started"""
         if not self.processing:
             self.processing = True
             self._processQueue()

     def run( self, f, cb, *args, **kwargs ) :
         """Queue up a single job"""

         # not happy with this bit at all, but can't
         # think of another way to do it without making
         # it compulsory to pass in priority

         if kwargs.has_key("priority") :
             priority = kwargs["priority"]
             del kwargs["priority"]
         else :
             priority = 5

         self.runQueue( iter([(f, args, kwargs, cb)]), priority )

     def runQueue(self, queue, priority=5):
         """Queue up a (potentially external) queue of jobs"""

         if not self.queue.has_key( priority ) :
             self.queue[priority] = []
         self.queue[priority].append( queue )

         self._startQueue()


#
# test things out
#

def triple(x):
     d = defer.Deferred()
     reactor.callLater(2, d.callback, x * 3)
     return d

def cbPrintResult( result ) :
     print result

def sources() :
     for i in range(8) :
         yield ( triple, [3], {}, cbPrintResult )


#
# sources can be run directly off a semaphore,
# but if it takes a while to retrieve jobs
# from the source
# then the following will block until all
# jobs are queued up
#
#s = Semaphore(2)
#for (f, args, kwargs, cb) in sources() :
#    s.run( f, *args, **kwargs ).addCallback( cb )


q = DeferredPriorityQueue(2)
q.runQueue( sources() )
q.run( triple, cbPrintResult, 4, priority=3 )

reactor.run()
------------

It might have its uses - perhaps to stop mass mailouts from holding up 
hadhoc mails ...

I'm mainly trying to learn though by tweaking with Itamar's and Chris's 
code - so feedback/criticism would be welcome.

Andy.



From eee at nmt.edu  Mon Mar  8 15:58:42 2004
From: eee at nmt.edu (Earl Eiland)
Date: Mon, 08 Mar 2004 13:58:42 -0700
Subject: [Twisted-Python] ssh & sftp clients
Message-ID: <1078779522.2395.9.camel@dulcevida>

I don't see  in the documentation how to create ssh/sftp clients.




From andrew-twisted at puzzling.org  Mon Mar  8 17:26:09 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 9 Mar 2004 09:26:09 +1100
Subject: [Twisted-Python] ssh & sftp clients
In-Reply-To: <1078779522.2395.9.camel@dulcevida>
References: <1078779522.2395.9.camel@dulcevida>
Message-ID: <20040308222609.GA25158@frobozz>

On Mon, Mar 08, 2004 at 01:58:42PM -0700, Earl Eiland wrote:
> I don't see  in the documentation how to create ssh/sftp clients.

SSH client howto:
    http://twistedmatrix.com/documents/current/howto/conch_client

-Andrew.




From z3p at twistedmatrix.com  Mon Mar  8 18:13:59 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Mon, 08 Mar 2004 18:13:59 -0500
Subject: [Twisted-Python] ssh & sftp clients
In-Reply-To: <1078779522.2395.9.camel@dulcevida>
References: <1078779522.2395.9.camel@dulcevida>
Message-ID: <1078787639.1198.1.camel@petra>

On Mon, 2004-03-08 at 15:58, Earl Eiland wrote:
> I don't see  in the documentation how to create ssh/sftp clients.

Andrew sent a link on how to do clients.  There's also
doc/examples/sshsimple[client|server|.py.  There's no SFTP client
support (yet!) so there aren't any examples for it.  If you wanted to
write the support, we'd gladly accept it! :)

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040308/9d04b4a3/attachment.pgp 

From trevp at trevp.net  Thu Mar 11 02:38:22 2004
From: trevp at trevp.net (Trevor Perrin)
Date: Wed, 10 Mar 2004 23:38:22 -0800
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <20040307054057.1960.2023520331.divmod.quotient.7@erlang.di
 vmod.net>
Message-ID: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>

At 05:40 AM 3/7/2004 +0000, exarkun at divmod.com wrote:

>On Fri, 05 Mar 2004 22:33:48 -0800, Trevor Perrin <trevp at trevp.net> wrote:
> > [...]
> > I recently wrote an SSL library in python [1] and got it working with
> > asyncore.  I'd like to make it useable with Twisted too.[...]
>[...]
>   One tip: don't try to integrate with the existing SSL code.  The 
> implementation is very much a result of the API limitations of 
> PyOpenSSL.  Preferably, a new implementation will provide SSL support as 
> a protocol instead of a transport.  For examples of how this can be done, 
> see twisted.protocols.policies.


Hi JP,

thanks for the tip!  I've got a first-draft done and it seems to work 
pretty well.

One thing I'm not sure about is exception handling.  When TLS Lite throws 
an exception, is there anywhere I can plug-in a handler or something?

The code is at http://trevp.net/tlslite/, if anyone's curious.  Below is an 
example of using it.  Echo1 does a TLS handshake when the client connects, 
and Echo2 does a handshake when the client sends "STARTTLS".

class Echo(LineReceiver):
     def connectionMade(self):
         self.transport.write("Welcome to the echo server!\r\n")

     def lineReceived(self, line):
         self.transport.write(line + "\r\n")

class Echo1(Echo):
     def connectionMade(self):
         if not self.transport.tlsStarted:
             self.transport.setServerHandshakeOp(certChain=certChain,
                                                 privateKey=privateKey)
         else:
             Echo.connectionMade(self)

class Echo2(Echo):
     def lineReceived(self, data):
         if data == "STARTTLS":
             self.transport.setServerHandshakeOp(certChain=certChain,
                                                 privateKey=privateKey)
         else:
             Echo.lineReceived(self, data)

factory = Factory()
factory.protocol = Echo1
#factory.protocol = Echo2

wrappingFactory = WrappingFactory(factory)
wrappingFactory.protocol = tlslite.TLSTwistedProtocolWrapper


Trevor






From oisin at enginesofcreation.ie  Thu Mar 11 09:04:17 2004
From: oisin at enginesofcreation.ie (Oisin Mulvihill)
Date: Thu, 11 Mar 2004 14:04:17 +0000
Subject: [Twisted-Python] help ssh forwarding.
Message-ID: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>

Sorry If you get two of these, I sent the last one with the
wrong email account.


Hi,

I have a series of linux based internet kiosks at a variety
of sites. I need to be able to connect back into the kiosk
from the main server. However direct connections aren't possible
as kiosks are behind there own router/firewall.

The solution to this is to forward port 22 on the kiosk to
a port on the server. I was thinking of just spawning the
command "ssh -R11122:my_server:22 user at my_server" from the
kiosk, when ever I need to connect to a machine. However I'm
hoping to do this with twisted, since the kiosk app uses it
already, and spawning the ssh command won't play well with
twisted's event system.

I decided to try and hack together a simple version of what
I want to do, based on the example sshsimpleclient.py. I don't
seem to be able to figure out how to forward from the server
to the kiosk. My program (attached) just forwards from 11122
on the kiosk to 22 on the server which isn't what I want.

Can anyone suggest what I'm doing wrong? Can twisted actually
do this?

Thanks in advance,

om


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cli.py
Type: application/octet-stream
Size: 1728 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040311/aa54e889/attachment.obj 
-------------- next part --------------



--
Oisin Mulvihill
Engines Of Creation

Email: oisin at enginesofcreationsoftware.com
Email: oisin at enginesofcreation.ie
Mobile: +353 868191540

From oisin at enginesofcreation.ie  Thu Mar 11 10:17:07 2004
From: oisin at enginesofcreation.ie (Oisin Mulvihill)
Date: Thu, 11 Mar 2004 15:17:07 +0000
Subject: [Twisted-Python] help ssh forwarding.
In-Reply-To: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
References: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
Message-ID: <2917D95F-736F-11D8-AF5B-000A956F9A40@enginesofcreation.ie>

Hi,

I've just spotted an error in my email, which could cause confusion.
The line:

...the command "ssh -R11122:my_server:22 user at my_server"...

should read:

...the command "ssh -R11122:localhost:22 user at my_server"...

Just to clear it up, this is what I'm trying to do in twisted.
This should allow me to do ssh -p 11122 localhost on my server
and it will the connect back into the kiosk machine.

ssh forwarding always messes with my head,

om

On 11 Mar 2004, at 14:04, Oisin Mulvihill wrote:

> Sorry If you get two of these, I sent the last one with the
> wrong email account.
>
>
> Hi,
>
> I have a series of linux based internet kiosks at a variety
> of sites. I need to be able to connect back into the kiosk
> from the main server. However direct connections aren't possible
> as kiosks are behind there own router/firewall.
>
> The solution to this is to forward port 22 on the kiosk to
> a port on the server. I was thinking of just spawning the
> command "ssh -R11122:my_server:22 user at my_server" from the
> kiosk, when ever I need to connect to a machine. However I'm
> hoping to do this with twisted, since the kiosk app uses it
> already, and spawning the ssh command won't play well with
> twisted's event system.
>
> I decided to try and hack together a simple version of what
> I want to do, based on the example sshsimpleclient.py. I don't
> seem to be able to figure out how to forward from the server
> to the kiosk. My program (attached) just forwards from 11122
> on the kiosk to 22 on the server which isn't what I want.
>
> Can anyone suggest what I'm doing wrong? Can twisted actually
> do this?
>
> Thanks in advance,
>
> om
>
>
> <cli.py>
>
>
> --
> Oisin Mulvihill
> Engines Of Creation
>
> Email: oisin at enginesofcreationsoftware.com
> Email: oisin at enginesofcreation.ie
> Mobile: +353 868191540
>


--
Oisin Mulvihill
Engines Of Creation

Email: oisin at enginesofcreationsoftware.com
Email: oisin at enginesofcreation.ie
Mobile: +353 868191540




From z3p at twistedmatrix.com  Thu Mar 11 11:36:09 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Thu, 11 Mar 2004 11:36:09 -0500
Subject: [Twisted-Python] help ssh forwarding.
In-Reply-To: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
References: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
Message-ID: <1079022969.2689.2.camel@petra>

On Thu, 2004-03-11 at 09:04, Oisin Mulvihill wrote:
> The solution to this is to forward port 22 on the kiosk to
> a port on the server. I was thinking of just spawning the
> command "ssh -R11122:my_server:22 user at my_server" from the
> kiosk, when ever I need to connect to a machine. However I'm
> hoping to do this with twisted, since the kiosk app uses it
> already, and spawning the ssh command won't play well with
> twisted's event system.

Take a look at reactor.spawnProcess().

> Can anyone suggest what I'm doing wrong? Can twisted actually
> do this?

Well, what you're doing wrong is you're using local->remote forwarding
in your example.  What you want is to ask the server to forward a remote
port over the connection.  Look at twisted.scripts.conch.SSHConnection,
methods requestRemoteForwarding and channel_forwarded_tcpip for an
example of how to implement remote->local forwarding.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040311/9a1576d4/attachment.pgp 

From itamar at itamarst.org  Fri Mar 12 00:25:48 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 12 Mar 2004 00:25:48 -0500
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
References: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
Message-ID: <1079069147.4485.4.camel@sheriffpony>

On Thu, 2004-03-11 at 02:38, Trevor Perrin wrote:

> One thing I'm not sure about is exception handling.  When TLS Lite throws 
> an exception, is there anywhere I can plug-in a handler or something?

Typically we have callbacks for error conditions. For TLS you usually
want to close the connection, no? So you'd pass the exception to
connectionLost wrapped in a Failure, perhaps.

> The code is at http://trevp.net/tlslite/, if anyone's curious.  Below is an 
> example of using it.  Echo1 does a TLS handshake when the client connects, 
> and Echo2 does a handshake when the client sends "STARTTLS".

That's really cool.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From njp at njp.us  Fri Mar 12 16:21:29 2004
From: njp at njp.us (Norm Petterson)
Date: Fri, 12 Mar 2004 16:21:29 -0500
Subject: [Twisted-Python] tap2ntsvc (sandbox) and py2exe 0.5.0
Message-ID: <000801c40878$00bcd6d0$4ba212ac@isg.com>

Hi all,

Back in November, Cory Dodt mentioned on this list that a preliminary version of tap2ntsvc was available to try out. Has anybody managed to get it to work with py2exe 0.5.0?

Using a tap file that works fine when run with twistd (Twisted 1.2.0), and using Python 2.3.3 and py2exe 0.5.0 on Windows 2000, py2exe generates:

error: error in setup.cfg: command 'py2exe' has no such option 'service'

If I'm not overlooking something obvious, I will look into it further with the samples supplied with this version of py2exe. Comments appreciated ;-)

Regards,

Norm Petterson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040312/c8b825f2/attachment.htm 

From corydodt at twistedmatrix.com  Fri Mar 12 16:32:12 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Fri, 12 Mar 2004 13:32:12 -0800
Subject: [Twisted-Python] tap2ntsvc (sandbox) and py2exe 0.5.0
In-Reply-To: <000801c40878$00bcd6d0$4ba212ac@isg.com>
References: <000801c40878$00bcd6d0$4ba212ac@isg.com>
Message-ID: <40522C5C.1060201@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

To my knowledge nobody has tested it on 0.5.0 so I can only assume this is an
API change.  If so, it's not a well-documented one because the py2exe home
page still talks about the service option as if it exists.  I will have to
investigate further.  In the meantime could you open a tracker issue and
assign it to moonfallen?  Thanks.

BTW, 0.4.x is known to work.

C

Norm Petterson wrote:
| Hi all,
|
| Back in November, Cory Dodt mentioned on this list that a preliminary
| version of tap2ntsvc was available to try out. Has anybody managed to
| get it to work with py2exe 0.5.0?
|
| Using a tap file that works fine when run with twistd (Twisted 1.2.0),
| and using Python 2.3.3 and py2exe 0.5.0 on Windows 2000, py2exe generates:
|
| error: error in setup.cfg: command 'py2exe' has no such option 'service'
|
| If I'm not overlooking something obvious, I will look into it further
| with the samples supplied with this version of py2exe. Comments
| appreciated ;-)
|
| Regards,
|
| Norm Petterson

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAUixc3A5SrXAiHQcRAnpfAJ9xpA2ZR4VFfQpe2ttpUR5GCynLGQCeKp4h
KPO5zsO1XWR+za/ASKCSuMI=
=rLxg
-----END PGP SIGNATURE-----



From trevp at trevp.net  Sat Mar 13 01:51:41 2004
From: trevp at trevp.net (Trevor Perrin)
Date: Fri, 12 Mar 2004 22:51:41 -0800
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <1079069147.4485.4.camel@sheriffpony>
References: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
 <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
Message-ID: <5.2.0.9.0.20040312222332.041d5398@pop.sbcglobal.yahoo.com>

At 12:25 AM 3/12/2004 -0500, Itamar Shtull-Trauring wrote:

>On Thu, 2004-03-11 at 02:38, Trevor Perrin wrote:
>
> > One thing I'm not sure about is exception handling.  When TLS Lite throws
> > an exception, is there anywhere I can plug-in a handler or something?
>
>Typically we have callbacks for error conditions. For TLS you usually
>want to close the connection, no? So you'd pass the exception to
>connectionLost wrapped in a Failure, perhaps.

Hi Itamar,

Thanks.  I think I managed to implement this, but I'm unsure if I'm trying 
to accomplish the right thing, and if I did it properly.  If you or anyone 
could glance over this, I'd really appreciate it.

Background:  there's a class which subclasses ProtocolWrapper.  It 
overrides dataReceived and does "TLS stuff".  The "TLS stuff" will call 
ProtocolWrapper.dataReceived when it's processed a whole record.

What I'm trying to do:  If the "TLS stuff" raises an exception, the 
connection should be closed and the exception should be made available to 
the wrapped protocol via connectionLost.  If a TLS exception isn't raised, 
connectionLost should be called normally, when the connection is shut 
down.  connectionLost should only be called once when a TLS exception is 
raised; i.e., if it's called with a TLS exception, then it *should not* be 
called when the TCP connection is closed.

How I'm doing it:  I catch TLS exceptions in dataReceived, and then call 
through to ProtocolWrapper.connectionLost() with a wrapped error.  I keep a 
flag to indicate whether connectionLost was called, and only let it be 
called once:

def dataReceived(self, data):
     try:
         #TLS STUFF
     except tlsErrors, e:
         self.connectionLost(Failure(e))
         ProtocolWrapper.loseConnection(self)

def connectionLost(self, reason):
     if not self.connectionLostCalled:
         ProtocolWrapper.connectionLost(self, reason)
         self.connectionLostCalled = True


How does this look?

Trevor

(the whole thing is here, fwiw: http://trevp.net/tlslite/) 




From itamar at itamarst.org  Sat Mar 13 11:33:52 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sat, 13 Mar 2004 11:33:52 -0500
Subject: [Twisted-Python] win32 buildbot
Message-ID: <1079195632.6743.7.camel@sheriffpony>

Thanks to the efforts of Cory and Norfolk, we now have a working win32
buildbot. So, it's time to get all tests passing. Everyone please take a
moment to look at what's failing and see if it's code you're responsible
for. Fixes to win32event reactor or a finished IOCP reactor so we can
abandon it are welcome ;)

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From michael.l.schneider at ugsplm.com  Sun Mar 14 01:21:46 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Sun, 14 Mar 2004 01:21:46 -0500
Subject: [Twisted-Python] win32 buildbot
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A216D3@uscimplm001.net.plm.eds.com>

Next week, I was planning on setting up buildbot on our
windows systems:

Couple of quick questions:
	- did you use the buildbot code out of CVS, or have you made
        mods?
      - If you made mods, can you check them into CVS?
      - Did you add a cmd.exe /c for execution of shell command?

      - Any Tips?

Thanks,
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Itamar
> Shtull-Trauring
> Sent: Saturday, March 13, 2004 11:34 AM
> To: twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] win32 buildbot
> 
> 
> Thanks to the efforts of Cory and Norfolk, we now have a working win32
> buildbot. So, it's time to get all tests passing. Everyone 
> please take a
> moment to look at what's failing and see if it's code you're 
> responsible
> for. Fixes to win32event reactor or a finished IOCP reactor so we can
> abandon it are welcome ;)
> 
> -- 
> Itamar Shtull-Trauring    http://itamarst.org
> Looking for a job: http://itamarst.org/resume.html
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From corydodt at twistedmatrix.com  Sun Mar 14 02:12:50 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Sat, 13 Mar 2004 23:12:50 -0800
Subject: [Twisted-Python] win32 buildbot
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216D3@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB505A216D3@uscimplm001.net.plm.eds.com>
Message-ID: <405405F2.60609@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1



Schneider, Michael wrote:
| Next week, I was planning on setting up buildbot on our
| windows systems:
|
| Couple of quick questions:
| 	- did you use the buildbot code out of CVS, or have you made
|         mods?
We patched buildbot a little.  The patch is currently available at
http://twistedmatrix.com/bugs/issue142

|       - If you made mods, can you check them into CVS?
No, but radix and warner can!

|       - Did you add a cmd.exe /c for execution of shell command?
In the patch.

|       - Any Tips?
Deploy your buildslaves with tap2ntsvc for maximum usability joy.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows XP)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAVAXy3A5SrXAiHQcRAn2MAJsFoyuY1C8ZWBNvBDRZI2njqIwWGQCeNEvd
6kmNMzOCBdrQ2T1LrLQcSiA=
=grIf
-----END PGP SIGNATURE-----



From richard at reticulatus.plus.com  Sun Mar 14 06:39:56 2004
From: richard at reticulatus.plus.com (Richard Townsend)
Date: Sun, 14 Mar 2004 11:39:56 +0000
Subject: [Twisted-Python] ftpclient errors
Message-ID: <200403141139.56946.richard@reticulatus.plus.com>

I have been experimenting with using ftpclient.py to access some FTP servers on the net, but have been getting errors with the list() and nlst() calls.

I am using Twisted 1.2.0 + Python 2.3.3 + SuSE 8.2

Can anyone shed some light on this problem?

Example
=======

/usr/local/src/Twisted-1.2.0/doc/examples: python ftpclient.py -h ftp.python.org
Success!  Got response:
---
257 "/" is current directory.
---
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 L not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 I not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 S not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 T not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ["500 Invalid command ' ': Try being more creative."]
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 . not understood.']
Success!  Got response:
---
250 CWD command successful.
---
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 N not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 L not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 S not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 T not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ["500 Invalid command ' ': Try being more creative."]
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 . not understood.']




From andrew-twisted at puzzling.org  Sun Mar 14 06:55:35 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sun, 14 Mar 2004 22:55:35 +1100
Subject: [Twisted-Python] ftpclient errors
In-Reply-To: <200403141139.56946.richard@reticulatus.plus.com>
References: <200403141139.56946.richard@reticulatus.plus.com>
Message-ID: <20040314115535.GB10042@frobozz>

On Sun, Mar 14, 2004 at 11:39:56AM +0000, Richard Townsend wrote:
> I have been experimenting with using ftpclient.py to access some FTP servers on the net, but have been getting errors with the list() and nlst() calls.
> 
> I am using Twisted 1.2.0 + Python 2.3.3 + SuSE 8.2
> 
> Can anyone shed some light on this problem?

This is a known bug, and is fixed in CVS.  Sorry :(

-Andrew.




From bob at redivi.com  Sun Mar 14 07:00:27 2004
From: bob at redivi.com (Bob Ippolito)
Date: Sun, 14 Mar 2004 13:00:27 +0100
Subject: [Twisted-Python] ftpclient errors
In-Reply-To: <200403141139.56946.richard@reticulatus.plus.com>
References: <200403141139.56946.richard@reticulatus.plus.com>
Message-ID: <2F351CD4-75AF-11D8-BACE-000A95686CD8@redivi.com>

On Mar 14, 2004, at 12:39 PM, Richard Townsend wrote:

> I have been experimenting with using ftpclient.py to access some FTP 
> servers on the net, but have been getting errors with the list() and 
> nlst() calls.
>
> I am using Twisted 1.2.0 + Python 2.3.3 + SuSE 8.2
>
> Can anyone shed some light on this problem?
>
> Example
> =======
>
> /usr/local/src/Twisted-1.2.0/doc/examples: python ftpclient.py -h 
> ftp.python.org
> Success!  Got response:
> ---
> 257 "/" is current directory.
> ---
> Unhandled error in Deferred:
> Failure: twisted.protocols.ftp.CommandFailed: ['500 L not understood.']
> Unhandled error in Deferred:
> Failure: twisted.protocols.ftp.CommandFailed: ['500 I not understood.']

It looks like someone is calling a function with a string, but the 
function is expecting a sequence of strings.  Three cheers for string 
iteration!

This is definitely a bug in Twisted somewhere, so you should go to 
http://twistedmatrix.com/bugs/ and report the issue.  Though, you may 
want to do a search first; the problem may already be solved in CVS.

-bob




From pf_moore at yahoo.co.uk  Sun Mar 14 14:36:10 2004
From: pf_moore at yahoo.co.uk (Paul Moore)
Date: Sun, 14 Mar 2004 19:36:10 +0000
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
References: <1079195632.6743.7.camel@sheriffpony>
Message-ID: <smgbkyqd.fsf@yahoo.co.uk>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> Fixes to win32event reactor or a finished IOCP reactor so we can
> abandon it are welcome ;)

I was interested to see this, as I've been aware of the limitations of
the standard select reactor on Win32 (no process stuff, for example),
but given the comments in the documentation for the win32event
reactor, I wasn't sure that was the way to go either.

One neat feature in later versions of Win32 (Windows 2000+, I believe)
is a kernel-level thread pool, which handles async I/O very cleanly,
as well as a lot of other stuff, such as waiting on more than 63
kernel events, asynchronous function calls, etc, etc. Looking at the
IOCP reactor, it doesn't seem to use this.

Some questions:

1. Would a reactor based on Win32 thread pools be worth having?
2. Is lack of NT support a problem (Win9x is already disallowed by
   using IO completion ports)?
3. Does anyone want to pick this up (the author of the IOCP reactor,
   or the existing win32event reactor, for example)?
4. If no-one else wants to pick it up, where would I find pointers on
   writing a reactor? Assuming there isn't a useful "what is a reactor
   supposed to do" document (I couldn't find one) what code would be a
   good starting point? [Note: If this is what ends up happening,
   expect completion in something like 2038, given my copious
   quantities of free time, and the likelihood of me managing to stick
   with a substantial programming project :-(]

Paul.
-- 
This signature intentionally left blank




From michael.l.schneider at ugsplm.com  Sun Mar 14 15:20:38 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Sun, 14 Mar 2004 15:20:38 -0500
Subject: [Twisted-Python] Lore Question: Creating a pdf  book
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A216D5@uscimplm001.net.plm.eds.com>

I am using Lore to document a project that I am working on.

I modeled my approach on the Twisted How To Sections.


index.xhtml + 10 other xhtml pages.

I have the html pages generated, and now I would like to generate
a pdf book.

I created a tex page for each xhtml using lore --output latex xxx.xhtml.

My question is: how do I create a pdf book from the index.xhtml + x.xhtml
or tex pages?

Sorry for the stupid question, but I am new to lore and tex (too much time in MS word and html :-(

Thanks,
Mike


 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"



From itamar at itamarst.org  Sun Mar 14 16:07:36 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 14 Mar 2004 16:07:36 -0500
Subject: [Twisted-Python] Lore Question: Creating a pdf  book
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216D5@uscimplm001.net.plm.eds.com>
References: 
	 <49199579A2BB32438A7572AF3DBB2FB505A216D5@uscimplm001.net.plm.eds.com>
Message-ID: <1079298456.11050.17.camel@sheriffpony>

On Sun, 2004-03-14 at 15:20, Schneider, Michael wrote:

> My question is: how do I create a pdf book from the index.xhtml + x.xhtml
> or tex pages?

You can use pdflatex, or run latex(1) on the .tex files, dvips on the
resulting .dvi and then ps2pdf. See admin/book.tex for an example of how
to merge multiple docs into single LaTeX file.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andrew-twisted at puzzling.org  Sun Mar 14 18:09:47 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 15 Mar 2004 10:09:47 +1100
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <smgbkyqd.fsf@yahoo.co.uk>
References: <1079195632.6743.7.camel@sheriffpony> <smgbkyqd.fsf@yahoo.co.uk>
Message-ID: <20040314230947.GA32275@frobozz>

On Sun, Mar 14, 2004 at 07:36:10PM +0000, Paul Moore wrote:
[...]
> 4. If no-one else wants to pick it up, where would I find pointers on
>    writing a reactor? Assuming there isn't a useful "what is a reactor
>    supposed to do" document (I couldn't find one) what code would be a
>    good starting point? [Note: If this is what ends up happening,
>    expect completion in something like 2038, given my copious
>    quantities of free time, and the likelihood of me managing to stick
>    with a substantial programming project :-(]

The best documentation for a reactor I'm aware of is
twisted.internet.interfaces.  I'd probably use the default select reactor as
a starting point, or in this case maybe the win32reactor.

-Andrew.




From itamar at itamarst.org  Sun Mar 14 19:58:23 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 14 Mar 2004 19:58:23 -0500
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <5.2.0.9.0.20040312222332.041d5398@pop.sbcglobal.yahoo.com>
References: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
	 <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
	 <5.2.0.9.0.20040312222332.041d5398@pop.sbcglobal.yahoo.com>
Message-ID: <1079312303.11807.0.camel@sheriffpony>

On Sat, 2004-03-13 at 01:51, Trevor Perrin wrote:

> Thanks.  I think I managed to implement this, but I'm unsure if I'm trying 
> to accomplish the right thing, and if I did it properly.  If you or anyone 
> could glance over this, I'd really appreciate it.

It sounds vaguely correct, but I'm not concentrating enough to be
certain. As always, when in doubt, write more tests ;)

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andy at thecablelounge.com  Sun Mar 14 22:00:14 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 15 Mar 2004 13:00:14 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
Message-ID: <40551C3E.3080602@thecablelounge.com>

I'm looking to create a filesystem backend for twisted that could be 
used by any filelike twisted application (sftp, webdav etc).

I've got a proof of concept filesystem interface working - IFileSystem 
.. not the best of names ;), which I'm about to try and sftp into.

ISFTPServer is a nice clean interface which it'd be easy to write an 
adapter for from my IFileSystem - but its implementation is bolted into 
FileTransferServer along with a bunch of protocol stuff ..

I had been vaguely planning to break ISFTPServer's implementation out of 
FileTransferServer and move it into a realm avatar when I got this far 
so different users could have different filesystems but now that I get 
to looking at it - FileTransferServer is brought into existance when a 
sftp sybsystem is requested by the sftp client, which happens after 
authentication ..

It's beginning to look like most of conch/ssh/session.py would need to 
move into an avatar - so the avatar for a given user could be asked for 
a shell, or a sftp subsystem and they would get the right shell/ sftp 
onto a filesystem for that user ..

I was hoping that Paul, or someone else may have some thoughts in this 
area to guide me ..

cheers,
Andy.



From cns at RedBrick.dcu.ie  Tue Mar 16 14:40:43 2004
From: cns at RedBrick.dcu.ie (Cillian Sharkey)
Date: Tue, 16 Mar 2004 19:40:43 +0000
Subject: [Twisted-Python] XML-RPC questions
Message-ID: <20040316194043.GA11053@carbon.redbrick.dcu.ie>

Hi folks,

Couple of questions.. (sorry for the long mail)

Q1.

Has anyone coded HTML API generation a la DocXMLRPCServer (in Python
2.3) for Twisted's XML-RPC?

I have a basic implementation that for any GET request spits out an ugly
HTML list by using the XML-RPC introspection calls. If someone has done
something similar (well, *better*) I'd be interested in hearing.

Q2.

To implement this I'm doing:

class Test(xmlrpc.XMLRPC):
    def render(self, request):
        if HTTP Basic AUTH ok:
	    # Let resource delegate request based on the method type
            return resource.Resource.render(self, request)
        else:
            return 401 HTML page

    def render_POST(self, request):
    	# All POST requests are XML-RPC calls.
        return xmlrpc.XMLRPC.render(self, request)

    def render_GET(self, request):
    	# All GET requests get the HTML API.
        return HTML for API

This works, but I'm curious if this is the 'right' way to do this?

Q3.

HTTP is a stateless protocol, but I'll be using persistent HTTP/1.1
connections (with practically no timeouts) and would like to link such a
connection to a state/session object for each client connection. I can
use cookies for this, but given that the connection is kept open, is
there a better way to do this? I realise HTTP as a transport for my
setup probably isn't the most elegant solution, but it's easy to use.


Thanks for any help,

-- 
Cillian



From daleedom at hightowergroup.com  Tue Mar 16 15:19:24 2004
From: daleedom at hightowergroup.com (David A. Leedom)
Date: Tue, 16 Mar 2004 15:19:24 -0500
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <40551C3E.3080602@thecablelounge.com>
References: <40551C3E.3080602@thecablelounge.com>
Message-ID: <6.0.1.1.2.20040316151701.02c2d648@mail.hightowergroup.com>

Andy,

It looks like you are doing some interesting things!!

I am no were near you level of understanding things, so I can't help 
you...However, I am interested in what you are doing.  I am working on a 
Remote Backup system.  I really want kind of a database driven system to 
handle the SFTP connections and am looking into twisted to provide 
that.  Can you tell me a little more about what you are trying to accomplish?

Thanks,

Dave Leedom

At 10:00 PM 3/14/2004, Andy Gayton wrote:
>I'm looking to create a filesystem backend for twisted that could be used 
>by any filelike twisted application (sftp, webdav etc).
>
>I've got a proof of concept filesystem interface working - IFileSystem .. 
>not the best of names ;), which I'm about to try and sftp into.
>
>ISFTPServer is a nice clean interface which it'd be easy to write an 
>adapter for from my IFileSystem - but its implementation is bolted into 
>FileTransferServer along with a bunch of protocol stuff ..
>
>I had been vaguely planning to break ISFTPServer's implementation out of 
>FileTransferServer and move it into a realm avatar when I got this far so 
>different users could have different filesystems but now that I get to 
>looking at it - FileTransferServer is brought into existance when a sftp 
>sybsystem is requested by the sftp client, which happens after 
>authentication ..
>
>It's beginning to look like most of conch/ssh/session.py would need to 
>move into an avatar - so the avatar for a given user could be asked for a 
>shell, or a sftp subsystem and they would get the right shell/ sftp onto a 
>filesystem for that user ..
>
>I was hoping that Paul, or someone else may have some thoughts in this 
>area to guide me ..
>
>cheers,
>Andy.
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



The Hightower Group, Inc.
Custom Software Solutions Designed To Fit Your Business Like A Glove.
165 West Airport Road/Lititz, PA 17543
V:717-560-4002, 877-560-4002 x: 114
F:717-560-2825
www.hightowergroup.com  




From justinjohnson at fastmail.fm  Tue Mar 16 15:37:12 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Tue, 16 Mar 2004 14:37:12 -0600
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <smgbkyqd.fsf@yahoo.co.uk>
References: <1079195632.6743.7.camel@sheriffpony> <smgbkyqd.fsf@yahoo.co.uk>
Message-ID: <1079469432.32491.182792589@webmail.messagingengine.com>

I would love to see a more stable version of the windows reactor.  :-)

Occasionally where the win32eventreactor starts spinning wildly out of
control when I do too many things at once.  I assume this is the 63
kernel events limitation or some such thing...

-Justin

On Sun, 14 Mar 2004 19:36:10 +0000, "Paul Moore" <pf_moore at yahoo.co.uk>
said:
> Itamar Shtull-Trauring <itamar at itamarst.org> writes:
> 
> > Fixes to win32event reactor or a finished IOCP reactor so we can
> > abandon it are welcome ;)
> 
> I was interested to see this, as I've been aware of the limitations of
> the standard select reactor on Win32 (no process stuff, for example),
> but given the comments in the documentation for the win32event
> reactor, I wasn't sure that was the way to go either.
> 
> One neat feature in later versions of Win32 (Windows 2000+, I believe)
> is a kernel-level thread pool, which handles async I/O very cleanly,
> as well as a lot of other stuff, such as waiting on more than 63
> kernel events, asynchronous function calls, etc, etc. Looking at the
> IOCP reactor, it doesn't seem to use this.
> 
> Some questions:
> 
> 1. Would a reactor based on Win32 thread pools be worth having?
> 2. Is lack of NT support a problem (Win9x is already disallowed by
>    using IO completion ports)?
> 3. Does anyone want to pick this up (the author of the IOCP reactor,
>    or the existing win32event reactor, for example)?
> 4. If no-one else wants to pick it up, where would I find pointers on
>    writing a reactor? Assuming there isn't a useful "what is a reactor
>    supposed to do" document (I couldn't find one) what code would be a
>    good starting point? [Note: If this is what ends up happening,
>    expect completion in something like 2038, given my copious
>    quantities of free time, and the likelihood of me managing to stick
>    with a substantial programming project :-(]
> 
> Paul.
> -- 
> This signature intentionally left blank
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From michael.l.schneider at ugsplm.com  Tue Mar 16 15:51:07 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Tue, 16 Mar 2004 15:51:07 -0500
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>

If I can allocate a resource for this that is an experienced developer
(15 years C guy), but with little python or twisted experience,
would someone be able to guide him when he hits a tough spot?

I could answer basic twisted/python questions, but I don't know
the guts of windows or reactors.

We are using twisted in a windows environment and would be willing
to contribute the work back to twisted.

Thanks
Mike

 

----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Justin
> Johnson
> Sent: Tuesday, March 16, 2004 3:37 PM
> To: Twisted-Python
> Subject: Re: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
> 
> 
> I would love to see a more stable version of the windows reactor.  :-)
> 
> Occasionally where the win32eventreactor starts spinning wildly out of
> control when I do too many things at once.  I assume this is the 63
> kernel events limitation or some such thing...
> 
> -Justin
> 
> On Sun, 14 Mar 2004 19:36:10 +0000, "Paul Moore" 
> <pf_moore at yahoo.co.uk>
> said:
> > Itamar Shtull-Trauring <itamar at itamarst.org> writes:
> > 
> > > Fixes to win32event reactor or a finished IOCP reactor so we can
> > > abandon it are welcome ;)
> > 
> > I was interested to see this, as I've been aware of the 
> limitations of
> > the standard select reactor on Win32 (no process stuff, for 
> example),
> > but given the comments in the documentation for the win32event
> > reactor, I wasn't sure that was the way to go either.
> > 
> > One neat feature in later versions of Win32 (Windows 2000+, 
> I believe)
> > is a kernel-level thread pool, which handles async I/O very cleanly,
> > as well as a lot of other stuff, such as waiting on more than 63
> > kernel events, asynchronous function calls, etc, etc. Looking at the
> > IOCP reactor, it doesn't seem to use this.
> > 
> > Some questions:
> > 
> > 1. Would a reactor based on Win32 thread pools be worth having?
> > 2. Is lack of NT support a problem (Win9x is already disallowed by
> >    using IO completion ports)?
> > 3. Does anyone want to pick this up (the author of the IOCP reactor,
> >    or the existing win32event reactor, for example)?
> > 4. If no-one else wants to pick it up, where would I find 
> pointers on
> >    writing a reactor? Assuming there isn't a useful "what 
> is a reactor
> >    supposed to do" document (I couldn't find one) what code 
> would be a
> >    good starting point? [Note: If this is what ends up happening,
> >    expect completion in something like 2038, given my copious
> >    quantities of free time, and the likelihood of me 
> managing to stick
> >    with a substantial programming project :-(]
> > 
> > Paul.
> > -- 
> > This signature intentionally left blank
> > 
> > 
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From itamar at itamarst.org  Tue Mar 16 16:13:01 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 16 Mar 2004 16:13:01 -0500
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
References: 
	 <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
Message-ID: <1079471580.13476.24.camel@sheriffpony>

The IOCP reactor has already been started (sandbox/pahan/ in CVS).




From andy at thecablelounge.com  Tue Mar 16 19:40:36 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Wed, 17 Mar 2004 10:40:36 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <6.0.1.1.2.20040316151701.02c2d648@mail.hightowergroup.com>
References: <40551C3E.3080602@thecablelounge.com> <6.0.1.1.2.20040316151701.02c2d648@mail.hightowergroup.com>
Message-ID: <40579E84.6060702@thecablelounge.com>

David A. Leedom wrote:

> Can you tell me a little more about what you are trying to 
> accomplish?

G'dday David,

In general I'm trying to create an interface for filesystems that can be 
adapted to every interface twisted filelike apps expect to work with. 
For instance conch should work with anything which conforms to the 
ISFTPServer (it just needs a bit of tweaking) - I've still got to look 
at Thorsten's twisted port of his webdav server, but I'm hoping it has a 
similiar interface an adapter can be written for.  Once a twisted smb 
server is up I'll write an adapter for the interface it expects.

You can then implement the filesystem interface anyway you like - 
perhaps out of a mysql database, perhaps to mount a zip file so you can 
sftp directly into the zip file.

My particular use for it is a collaboration web site - cablelounge.com - 
I have a very simple samba like filesystem which defines a user's 
personal area plus the group areas they have access to - when they enter 
the filesystem they see something like

/home
/cliff_hangers
/twisted_files

When then go into /home they'll actually be in a different type of 
filesystem, just an ordinary implementation of a system filesystem - but 
its real path would be say /home/john - when they enter /cliff_hangers 
there real path could be /var/shares/groups/cliff_hangers - or whatever ..

This is great for sftp access as the user can only see what you want 
them to see - they can't just enter cd /etc and start poking around - 
and you don't have to mess about with chrooting them to their home 
directory which then makes group shares very difficult + the user gets a 
consistent view of their files no matter which application they prefer 
to use ..

I'm pretty new to twisted myself so searching thoughts and critcisms to 
keep me on track ..

Andy.


> 
> Thanks,
> 
> Dave Leedom
> 
> At 10:00 PM 3/14/2004, Andy Gayton wrote:
> 
>> I'm looking to create a filesystem backend for twisted that could be 
>> used by any filelike twisted application (sftp, webdav etc).
>>
>> I've got a proof of concept filesystem interface working - IFileSystem 
>> .. not the best of names ;), which I'm about to try and sftp into.
>>
>> ISFTPServer is a nice clean interface which it'd be easy to write an 
>> adapter for from my IFileSystem - but its implementation is bolted 
>> into FileTransferServer along with a bunch of protocol stuff ..
>>
>> I had been vaguely planning to break ISFTPServer's implementation out 
>> of FileTransferServer and move it into a realm avatar when I got this 
>> far so different users could have different filesystems but now that I 
>> get to looking at it - FileTransferServer is brought into existance 
>> when a sftp sybsystem is requested by the sftp client, which happens 
>> after authentication ..
>>
>> It's beginning to look like most of conch/ssh/session.py would need to 
>> move into an avatar - so the avatar for a given user could be asked 
>> for a shell, or a sftp subsystem and they would get the right shell/ 
>> sftp onto a filesystem for that user ..
>>
>> I was hoping that Paul, or someone else may have some thoughts in this 
>> area to guide me ..
>>
>> cheers,
>> Andy.
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> 
> 
> The Hightower Group, Inc.
> Custom Software Solutions Designed To Fit Your Business Like A Glove.
> 165 West Airport Road/Lititz, PA 17543
> V:717-560-4002, 877-560-4002 x: 114
> F:717-560-2825
> www.hightowergroup.com 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From michaelschneider at fuse.net  Tue Mar 16 22:56:01 2004
From: michaelschneider at fuse.net (Michael Schneider)
Date: Tue, 16 Mar 2004 22:56:01 -0500
Subject: [Twisted-Python] Question on creating NT service
In-Reply-To: <20040311134623.15159.91132.Mailman@twistedmatrix.com>
Message-ID: <DDEBLIGOHANFDMNECHGEMEKGCAAA.michaelschneider@fuse.net>

Hello All,


I am getting back to working on the twisted tap as ntserver,

I have created the service, and ran the installer.

I run net start gridnoded  (name of service is gridnoded)

The application event log shows that

import __service__ failed

I can't seem to find __service__ package, do I need to download
and install this from somewhere.

I am using py2exe  0.4.2

Thanks for any insights,
Mike

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


End of Twisted-Python Digest



From achin at eminence32.cjb.net  Wed Mar 17 04:07:25 2004
From: achin at eminence32.cjb.net (achin)
Date: Wed, 17 Mar 2004 04:07:25 -0500 (EST)
Subject: [Twisted-Python] TOC and filetranser
Message-ID: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>

hi, I'm writing an AIM bot using twisted's TOC implementation.  i was 
wondering if this module supports file transfers (namely sending from the 
TOC client).  and if so, could i get either some sample code, or a more 
detailed documentation than the one at twistedmatrix.com

my first question regarding the SendFileTransfer class is what exactly is 
the "cookie" parameter in the __init__ method? (i don't see it documented 
anywhere)

as a side note, i was wondering if a TOC2 python module exists, as i think 
TOC2 would be preferable over TOC

thanks, 

-andrew




From andymac at bullseye.apana.org.au  Wed Mar 17 07:15:17 2004
From: andymac at bullseye.apana.org.au (Andrew MacIntyre)
Date: Wed, 17 Mar 2004 23:15:17 +1100 (EST)
Subject: [Twisted-Python] threads
Message-ID: <20040317222902.Y5687@bullseye.apana.org.au>

I'm trying to get Twisted 1.2.0 up on the OS/2 EMX port of Python I
maintain.

Most of it appears to be no great drama, but when I run the test suite,
and it hits a threads related test things get awfully out of shape - the
process goes into a runaway state that is unkillable, using all available
CPU, although the system remains generally usable.  A reboot is required
to restore order.

When I started the testing, I had an OS/2 port of SQLite+PySQLite
installed, and the SQLite test triggered the above behaviour.  On the
assumption that my SQLite port could be implicated, I deinstalled SQLite
etc and tried again.

This uncovered a typo in twisted/flow/threads.py:
*** threads.py.orig     Sun Aug 10 13:00:48 2003
--- threads.py  Mon Mar 15 17:12:16 2004
***************
*** 122,128 ****
              except StopIteration:
                  reactor.callFromThread(self._stopping)
              except:
!                 self.failure = Faliure()
                  reactor.callFromThread(self._cooperate)
              self._cooperate.immediate = True

--- 122,128 ----
              except StopIteration:
                  reactor.callFromThread(self._stopping)
              except:
!                 self.failure = Failure()
                  reactor.callFromThread(self._cooperate)
              self._cooperate.immediate = True


With that fixed, I'm now back to the original behaviour.

The test log contains the following:

...
2004/03/15 17:13 est [-] --> twisted.test.test_flow.FlowTest.testProtocolLocalhost <--
2004/03/15 17:13 est [-] twisted.internet.protocol.ServerFactory starting on 0
2004/03/15 17:13 est [-] Starting factory <twisted.internet.protocol.ServerFactory instance at 0x2de70c>
2004/03/15 17:13 est [-] Starting factory <twisted.internet.protocol.ClientFactory instance at 0xb4780c>
2004/03/15 17:13 est [_Protocol,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xb4780c>
2004/03/15 17:13 est [-] --> twisted.test.test_flow.FlowTest.testQueryIterator <--
2004/03/15 17:13 est [-] --> twisted.test.test_flow.FlowTest.testThreaded <--
2004/03/15 17:13 est [-] Traceback (most recent call last):
	  File "Lib/threading.py", line 436, in __bootstrap
	    self.run()
	  File "Lib/threading.py", line 416, in run
	    self.__target(*self.__args, **self.__kwargs)
	--- <exception caught here> ---
	  File "F:/dev/Twisted-1.2.0/twisted/python/threadpool.py", line 157, in _worker
	    context.call(ctx, function, *args, **kwargs)
	  File "F:/dev/Twisted-1.2.0/twisted/python/context.py", line 53, in callWithContext
	    return self.currentContext().callWithContext(ctx, func, *args, **kw)
	  File "F:/dev/Twisted-1.2.0/twisted/python/context.py", line 32, in callWithContext
	    return func(*args,**kw)
	  File "F:/dev/Twisted-1.2.0/twisted/flow/threads.py", line 126, in _process
	    reactor.callFromThread(self._cooperate)
	  File "F:/dev/Twisted-1.2.0/twisted/internet/base.py", line 200, in callFromThread
	    self.threadCallQueue.append((f, args, kw))
	exceptions.AttributeError: 'NoneType' object has no attribute 'append'

2004/03/15 17:13 est [twisted.internet.protocol.Factory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.Factory] Stopping factory <twisted.internet.protocol.Factory instance at 0xaad8cc>
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] Stopping factory <twisted.internet.protocol.ServerFactory instance at 0x2de70c>
2004/03/15 17:13 est [Foo,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xabc0ac>
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] Stopping factory <twisted.internet.protocol.ServerFactory instance at 0xabc26c>
2004/03/15 17:13 est [Foo,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xabcb0c>
2004/03/15 17:13 est [Foo,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xabcd0c>
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] Stopping factory <twisted.internet.protocol.ServerFactory instance at 0xabc14c>
<<<log ends>>>

The traceback is identical to that in the log after the SQLite test
failure.

While the threads support in the EMX port of Python passes the Python test
suite, and people are successfully running Zope on OS/2 with this Python
port, I don't know of any other widespread usage which might have
exercised it.  So I won't be surprised if it has problems.

Can anyone give me any hints about what might be missing or working
incorrectly to trigger the above?

I should note that I've never tried to use Twisted before.  The above is
with Python 2.3.3.  I don't have permanent internet connectivity, and the
test was being run without an internet connection.

Regards,
Andrew.

--
Andrew I MacIntyre                     "These thoughts are mine alone..."
E-mail: andymac at bullseye.apana.org.au  (pref) | Snail: PO Box 370
        andymac at pcug.org.au             (alt) |        Belconnen  ACT  2616
Web:    http://www.andymac.org/               |        Australia



From itamar at itamarst.org  Wed Mar 17 08:47:16 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 17 Mar 2004 08:47:16 -0500
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
Message-ID: <1079531236.13475.26.camel@sheriffpony>

On Wed, 2004-03-17 at 04:07, achin wrote:

> as a side note, i was wondering if a TOC2 python module exists, as i think 
> TOC2 would be preferable over TOC

Dunno about TOC2, but there's an OSCAR implementation
(twisted.protocols.oscar) which might have more advanced features for
talking to AIM.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From itamar at itamarst.org  Wed Mar 17 09:00:20 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 17 Mar 2004 09:00:20 -0500
Subject: [Twisted-Python] threads
In-Reply-To: <20040317222902.Y5687@bullseye.apana.org.au>
References: <20040317222902.Y5687@bullseye.apana.org.au>
Message-ID: <1079532019.13476.29.camel@sheriffpony>

On Wed, 2004-03-17 at 07:15, Andrew MacIntyre wrote:

>               except StopIteration:
>                   reactor.callFromThread(self._stopping)
>               except:
> !                 self.failure = Faliure()
>                   reactor.callFromThread(self._cooperate)
>               self._cooperate.immediate = True
> 
> --- 122,128 ----
>               except StopIteration:
>                   reactor.callFromThread(self._stopping)
>               except:
> !                 self.failure = Failure()
>                   reactor.callFromThread(self._cooperate)
>               self._cooperate.immediate = True

Yeesh. I fixed this, and attempted to make flow thread tests work. Try
cvs and tell us if it's working now? (apparently no one did
twisted.python.threadable.init(1) before using threads. Not sure why it
works on linux though....).

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From alan at norfolkgraphics.com  Wed Mar 17 10:59:16 2004
From: alan at norfolkgraphics.com (Alan McIntyre)
Date: Wed, 17 Mar 2004 10:59:16 -0500
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
Message-ID: <405875D4.1070402@norfolkgraphics.com>

Mike,

I've had the (mis?)fortune of having to maintain some applications 
written in vanilla Win32 in the last few years, so I can take a stab at 
answering Windows questions if they come up.  I'm still trying to get 
familiar with how the Twisted internals work, so I probably won't be 
much help in that area.

For the forseeable future, I will be constrained to using Windows 
platforms at work, so I'm interested in helping get Twisted working well 
on Windows.  I'll try and help out as much as I can if you run into any 
rough spots, for whatever that's worth. :)

Alan


Schneider, Michael wrote:
> If I can allocate a resource for this that is an experienced developer
> (15 years C guy), but with little python or twisted experience,
> would someone be able to guide him when he hits a tough spot?
> 
> I could answer basic twisted/python questions, but I don't know
> the guts of windows or reactors.
> 
> We are using twisted in a windows environment and would be willing
> to contribute the work back to twisted.
> 
> Thanks
> Mike
> 
>  
> 
> ----------------------------------------------------------------
> Michael Schneider
> Senior Software Engineering Consultant
> UGS PLM Solutions - an EDS Company
>  
> "The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"




From achin at eminence32.cjb.net  Wed Mar 17 15:04:49 2004
From: achin at eminence32.cjb.net (achin)
Date: Wed, 17 Mar 2004 15:04:49 -0500 (EST)
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <1079531236.13475.26.camel@sheriffpony>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
 <1079531236.13475.26.camel@sheriffpony>
Message-ID: <Pine.LNX.4.58.0403171450180.1085@bigbox>

yeah, i saw that, but I'm hesitant to use OSCAR:
1) AOL occasionally changes to OSCAR protocol to break any 3rd-party
implementations that have reverse-engineered it.
2) the module is listed as unstable

(AOL hasn't released a spec for OSCAR, while it has published a spec for
TOC)

but thanks for the suggestion

-andrew

On Wed, 17 Mar 2004, Itamar Shtull-Trauring wrote:

> On Wed, 2004-03-17 at 04:07, achin wrote:
>
> > as a side note, i was wondering if a TOC2 python module exists, as i
> > think TOC2 would be preferable over TOC
>
> Dunno about TOC2, but there's an OSCAR implementation
> (twisted.protocols.oscar) which might have more advanced features for
> talking to AIM.
>
>



From radix at twistedmatrix.com  Wed Mar 17 15:22:19 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 17 Mar 2004 15:22:19 -0500
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <Pine.LNX.4.58.0403171450180.1085@bigbox>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net> <1079531236.13475.26.camel@sheriffpony> <Pine.LNX.4.58.0403171450180.1085@bigbox>
Message-ID: <4058B37B.9050809@twistedmatrix.com>

achin wrote:
> yeah, i saw that, but I'm hesitant to use OSCAR:
> 1) AOL occasionally changes to OSCAR protocol to break any 3rd-party
> implementations that have reverse-engineered it.



> 2) the module is listed as unstable

This isn't a point. Most modules in Twisted are unstable :-). It doesn't 
mean that they're broken, it means that they *may* change (but we still 
make compatibility a goal, always!). The only reason that toc.py is 
unstable is because it's (apparently) unmaintained and deprecated.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040317/9d9778af/attachment.pgp 

From achin at eminence32.cjb.net  Wed Mar 17 16:13:09 2004
From: achin at eminence32.cjb.net (achin)
Date: Wed, 17 Mar 2004 16:13:09 -0500 (EST)
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <4058B37B.9050809@twistedmatrix.com>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
 <1079531236.13475.26.camel@sheriffpony> <Pine.LNX.4.58.0403171450180.1085@bigbox>
 <4058B37B.9050809@twistedmatrix.com>
Message-ID: <Pine.LNX.4.58.0403171607440.1085@bigbox>

ok, i guess i misinterpreted "unstable".

i'll take a look at OSCAR

-thanks


On Wed, 17 Mar 2004, Christopher Armstrong wrote:

> achin wrote:
> > yeah, i saw that, but I'm hesitant to use OSCAR:
> > 1) AOL occasionally changes to OSCAR protocol to break any 3rd-party
> > implementations that have reverse-engineered it.
>
>
>
> > 2) the module is listed as unstable
>
> This isn't a point. Most modules in Twisted are unstable :-). It doesn't
> mean that they're broken, it means that they *may* change (but we still
> make compatibility a goal, always!). The only reason that toc.py is
> unstable is because it's (apparently) unmaintained and deprecated.
>
>



From corydodt at twistedmatrix.com  Wed Mar 17 20:32:20 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 17 Mar 2004 17:32:20 -0800
Subject: [Twisted-Python] Question on creating NT service
In-Reply-To: <DDEBLIGOHANFDMNECHGEMEKGCAAA.michaelschneider@fuse.net>
References: <DDEBLIGOHANFDMNECHGEMEKGCAAA.michaelschneider@fuse.net>
Message-ID: <4058FC24.2070503@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Is your source available somewhere?  I have your command line from an old
mailing list post, I could try this myself and see what's happening.

C


Michael Schneider wrote:
| Hello All,
|
|
| I am getting back to working on the twisted tap as ntserver,
|
| I have created the service, and ran the installer.
|
| I run net start gridnoded  (name of service is gridnoded)
|
| The application event log shows that
|
| import __service__ failed
|
| I can't seem to find __service__ package, do I need to download
| and install this from somewhere.
|
| I am using py2exe  0.4.2
|
| Thanks for any insights,
| Mike
|
| _______________________________________________
| Twisted-Python mailing list
| Twisted-Python at twistedmatrix.com
| http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
|
|
| End of Twisted-Python Digest
|
| _______________________________________________
| Twisted-Python mailing list
| Twisted-Python at twistedmatrix.com
| http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAWPwk3A5SrXAiHQcRApRLAJ9rrM+RjPcTzn6wKWD4Al7iv9R80wCffHnh
oZY4fph8iG1WaMAz1HSCwuE=
=trEs
-----END PGP SIGNATURE-----



From theller at python.net  Thu Mar 18 15:35:27 2004
From: theller at python.net (Thomas Heller)
Date: Thu, 18 Mar 2004 21:35:27 +0100
Subject: [Twisted-Python] Re: tap2ntsvc (sandbox) and py2exe 0.5.0
References: <000801c40878$00bcd6d0$4ba212ac@isg.com> <40522C5C.1060201@twistedmatrix.com>
Message-ID: <vfl1x59s.fsf@python.net>

> Norm Petterson wrote:
> | Hi all,
> |
> | Back in November, Cory Dodt mentioned on this list that a preliminary
> | version of tap2ntsvc was available to try out. Has anybody managed to
> | get it to work with py2exe 0.5.0?
> |
> | Using a tap file that works fine when run with twistd (Twisted 1.2.0),
> | and using Python 2.3.3 and py2exe 0.5.0 on Windows 2000, py2exe generates:
> |
> | error: error in setup.cfg: command 'py2exe' has no such option 'service'
> |
> | If I'm not overlooking something obvious, I will look into it further
> | with the samples supplied with this version of py2exe. Comments
> | appreciated ;-)

Cory Dodt <corydodt at twistedmatrix.com> writes:

> To my knowledge nobody has tested it on 0.5.0 so I can only assume this is an
> API change.  If so, it's not a well-documented one because the py2exe home
> page still talks about the service option as if it exists.  I will have to
> investigate further.  In the meantime could you open a tracker issue and
> assign it to moonfallen?  Thanks.
>
> BTW, 0.4.x is known to work.

It's still possible to build services, and I won't argue that the
changes are well documented ;-).

In py2exe 0.5, you specify that you want to build a service by giving a
named argument 'service' to the setup() function.
Before, 'service' was a command line option (that could also be stored
in the setup.cfg file).

For py2exe 0.5, there is quite some user-provided documentation in the
wiki http://starship.python.net/crew/theller/moin.cgi/Py2Exe, and
extensive samples are included in the distribution. IIRC, the advanced
sample contains a service.

Thomas




From radix at twistedmatrix.com  Thu Mar 18 15:45:17 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 18 Mar 2004 15:45:17 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive content.
Message-ID: <405A0A5D.50406@twistedmatrix.com>

We're probably going to be switching the Twisted code repository to 
Subversion during the PyCon sprints (some time between saturday and 
tuesday). There will be a short period during conversion when neither 
CVS nor SVN will be accessible. I'm going to disable the CVS repository 
so nobody can commit while I'm converting it, run cvs2svn on it, and 
create a new repository at /svn/Twisted.

I might not convert tags and branches from the CVS repo to their SVN 
counterparts; last time I tried with a test-run it seemed to either take 
an incredibly long time or it was stuck, and I cancelled it. However, 
that's not too big of a deal; the old CVS repository will still be 
accessible read-only, so people will still be able to check out old tags 
and branches. Of course all old *revisions* will be converted to the SVN 
repository.

After this I'll be working on updating our release scripts and all info 
that references the CVS server. The SVN repository will be accessible 
from the web (and, in fact, our other SVN projects are already 
accessible) at http://cvs.twistedmatrix.com/cvs/. People with write 
access will use the SVN URL 
svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted.

The twisted-commits list will continue working. I still need to figure 
out what to do about IRC notification of commits. I might set up a 
CIA[1] server, or just use their central server.

I wrote SVN support for buildbot a while ago, so I'll get it set up so 
our SVN commits trigger our buildbot[2].

Did I forget anything?

1: http://cia.navi.cx/
2: http://twistedmatrix.com/buildbot/

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040318/21aeddaa/attachment.pgp 

From golux at comcast.net  Thu Mar 18 16:20:03 2004
From: golux at comcast.net (Stephen C. Waterbury)
Date: Thu, 18 Mar 2004 16:20:03 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com>
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <405A1283.1060402@comcast.net>

Christopher Armstrong wrote:

> Did I forget anything?

Is there a subversion equivalent for CVS-Toys?  :)




From radix at twistedmatrix.com  Thu Mar 18 16:52:18 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 18 Mar 2004 16:52:18 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <405A1283.1060402@comcast.net>
References: <405A0A5D.50406@twistedmatrix.com> <405A1283.1060402@comcast.net>
Message-ID: <405A1A12.7040209@twistedmatrix.com>

Stephen C. Waterbury wrote:
> Christopher Armstrong wrote:
> 
>> Did I forget anything?
> 
> 
> Is there a subversion equivalent for CVS-Toys?  :)

Well, Subversion itself comes with an email script (or two), and the CIA 
thing which I mentioned in the last message offers all the features of 
CVSToys, afaict.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040318/92908c26/attachment.pgp 

From jredders at lsil.com  Fri Mar 19 17:17:50 2004
From: jredders at lsil.com (John C. Reddersen)
Date: Fri, 19 Mar 2004 16:17:50 -0600
Subject: [Twisted-Python] Somebody please point me in the right direction...
Message-ID: <DLELJDPNJKAEEHLHNLONOEHODPAA.jredders@mhbs.lsil.com>

Hi all,

I'm a fairly new Python programmer, and really new to Twisted, so accept my
apologies now if this is a clueless newbie question...

I'm developing a wxPython application that needs to talk to another app via
a very simple sockets based interface.  I managed to mangle together some
code using twisted to connect to the socket and send an initial starting
message to the server and receive it's response.  However, I'm unsure how to
proceed from here to allow my GUI to send and receive commands over the
socket using the protocol created by the factory.  All the examples I could
find just send canned messages, nothing with user input...

Thanks!

-John Reddersen

---
LSI Logic RapidChip Integration Engineering
3425 40th Ave NW Suite 200
Rochester, MN 55901
(507) 535-3851




From dripton at ripton.net  Fri Mar 19 18:06:11 2004
From: dripton at ripton.net (David Ripton)
Date: Fri, 19 Mar 2004 18:06:11 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com>
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <405B7CE3.6060006@ripton.net>

Christopher Armstrong wrote:

> I might not convert tags and branches from the CVS repo to their SVN 
> counterparts; last time I tried with a test-run it seemed to either take 
> an incredibly long time or it was stuck, and I cancelled it.

cvs2svn has improved a lot lately, so you might want to try again with 
the latest.
(Which is now a separate project at http://cvs2svn.tigris.org)

--
David Ripton    dripton at ripton.net



From p.mayers at imperial.ac.uk  Sat Mar 20 13:43:36 2004
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Sat, 20 Mar 2004 18:43:36 +0000
Subject: [Twisted-Python] Cisco-style hierarchial CLI
Message-ID: <20040320184336.GA14586@wildfire0.net.ic.ac.uk>

All,

I'm putting together some glue-ware for a system, and would like to hide
the underlying nature of it. It's a bit of software that fits in and
around routers / switches etc. and there's a pretty common CLI for those
these days, which consists of a hierarchial context-based set of
commands, plus completion, e.g. on Cisco, although I suspect everyone is
familiar with the concept:

client: sh <question mark>
server:     ip - show IP items
server:     foo - show Foo items
server:     bar - show Bar items
client: sh f <question mark>
server:     ver - show foo version
server:     connections - show foo connections
client: sh f c <question mark>
server:     <cr> - show connection summary
server:     <int> - show connection detail
client: sh f c 3
server: <some stuff>

Similarly, for configure mode:

client: configure
server: ok
client: subsystem
server(subsystem): ok
client: <question mark>
server(subsystem): trusted - configure trusted ports
server(subsystem): untrusted - configure untrusted ports
server(subsystem): map - map from trusted to untrusted
client: trust
server(subsystem-trusted): ok
client: <question mark>
server(subsystem-trusted): ip - add a trusted port by IP
server(subsystem-trusted): phys - add a trusted physical port
server(subsystem-trusted): vlan - add a trusted vlan
client: vlan 1

The hiearchial configure mode is mapped onto a hierarchial configuration
file, e.g. the above would generate:

subsystem
  trusted
    vlan 1
  !
!

It's main features are:

1) Tab completion and partial -> full conversion
2) Nested modes

Relevant to twisted is I want to replace the manhole interactive
interpreter.

Any such beast exist?

-- 

Regards,
Phil

+------------------------------------------+
| Phil Mayers                              |
| Network & Infrastructure Group           |
| Information & Communication Technologies |
| Imperial College                         |
+------------------------------------------+



From andrew-twisted at puzzling.org  Sat Mar 20 19:01:17 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sun, 21 Mar 2004 11:01:17 +1100
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com>
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <20040321000117.GB7287@frobozz>

On Thu, Mar 18, 2004 at 03:45:17PM -0500, Christopher Armstrong wrote:
> access will use the SVN URL 
> svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted.

WARNING!  Doing "cvs co svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted" is
*not* a good idea.  It will download every single tagged or branched
revision of every single file in the repository.  By the time I got around
to cancelling it, it had filled 2.0G of my disk space.

Use "svn co svn+ssh://cvs.twistedmatrix.com/svn/Twisted/trunk Twisted"
instead.

Incidentally, there's an issue tracking the migration progress:

    http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue558

-Andrew.




From radix at twistedmatrix.com  Sat Mar 20 23:29:22 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 20 Mar 2004 23:29:22 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <20040321000117.GB7287@frobozz>
References: <405A0A5D.50406@twistedmatrix.com> <20040321000117.GB7287@frobozz>
Message-ID: <405D1A22.5050200@twistedmatrix.com>

Andrew Bennetts wrote:
> On Thu, Mar 18, 2004 at 03:45:17PM -0500, Christopher Armstrong wrote:
> 
>>access will use the SVN URL 
>>svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted.
> 
> 
> WARNING!  Doing "cvs co svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted" is
> *not* a good idea.  It will download every single tagged or branched
> revision of every single file in the repository.  By the time I got around
> to cancelling it, it had filled 2.0G of my disk space.

Sorry :\

> Use "svn co svn+ssh://cvs.twistedmatrix.com/svn/Twisted/trunk Twisted"
> instead.
> 
> Incidentally, there's an issue tracking the migration progress:
> 
>     http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue558

Thanks for notifying people, Andrew ;-) I'll be making the Buildbot work 
again tomorrow, and then getting IRC notification working, probably via CIA.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040320/abe8cfa0/attachment.pgp 

From z3p at twistedmatrix.com  Sun Mar 21 13:21:12 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Sun, 21 Mar 2004 13:21:12 -0500
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
Message-ID: <1079892208.1198.6.camel@petra>

On Wed, 2004-03-17 at 04:07, achin wrote:
> hi, I'm writing an AIM bot using twisted's TOC implementation.  i was 
> wondering if this module supports file transfers (namely sending from the 
> TOC client).  and if so, could i get either some sample code, or a more 
> detailed documentation than the one at twistedmatrix.com

The TOC implementation (as well as the OSCAR implementation) basically
assume knowledge of the protocol.  This could be fixed, but since I
don't actively use either of these protocol implementations anymore,
it's not high on my list of priorities.

> my first question regarding the SendFileTransfer class is what exactly is 
> the "cookie" parameter in the __init__ method? (i don't see it documented 
> anywhere)

cookie is an arbitrary string that serves to notify the sending client
which file transfer the receiving client has accepted.

> as a side note, i was wondering if a TOC2 python module exists, as i think 
> TOC2 would be preferable over TOC

From what a quick google for TOC2 found, TOC2 is not significantly
different from TOC, and it shouldn't be hard to modify toc.py into a
toc2.py.  Patches are welcome! :)

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040321/0cfcfec2/attachment.pgp 

From z3p at twistedmatrix.com  Sun Mar 21 13:21:17 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Sun, 21 Mar 2004 13:21:17 -0500
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <40551C3E.3080602@thecablelounge.com>
References: <40551C3E.3080602@thecablelounge.com>
Message-ID: <1079892762.1198.15.camel@petra>

On Sun, 2004-03-14 at 22:00, Andy Gayton wrote:
> I'm looking to create a filesystem backend for twisted that could be 
> used by any filelike twisted application (sftp, webdav etc).
> 
> I've got a proof of concept filesystem interface working - IFileSystem 
> .. not the best of names ;), which I'm about to try and sftp into.
> 
> ISFTPServer is a nice clean interface which it'd be easy to write an 
> adapter for from my IFileSystem - but its implementation is bolted into 
> FileTransferServer along with a bunch of protocol stuff ..
>
> I had been vaguely planning to break ISFTPServer's implementation out of 
> FileTransferServer and move it into a realm avatar when I got this far 
> so different users could have different filesystems but now that I get 
> to looking at it - FileTransferServer is brought into existance when a 
> sftp sybsystem is requested by the sftp client, which happens after 
> authentication ..
> 
> It's beginning to look like most of conch/ssh/session.py would need to 
> move into an avatar - so the avatar for a given user could be asked for 
> a shell, or a sftp subsystem and they would get the right shell/ sftp 
> onto a filesystem for that user ..

Yes, this does need to happen.  The code that creates shells, executes
files, and connects to file systems needs to be connected to ISSHUser,
not Session.  Unfortunatly, I can't think of a way to do it that doesn't
seem ugly.  Just adding methods like 'openShell(channel)' to ISSHUser
seems silly when there are many more possibilities of connections for a
Conch server.  There should be a clever way to do this with Interfaces
and Adaptors, but I can't think of it.

> I was hoping that Paul, or someone else may have some thoughts in this 
> area to guide me ..

The only thought I had was an LJ post
(http://z3p.livejournal.com/324865.html), but I'm having trouble turning
that idea into code.  Maybe I can convince some Twisted folks at PyCon
to help me out ;)

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040321/94a033a4/attachment.pgp 

From ralf at brainbot.com  Sun Mar 21 16:07:23 2004
From: ralf at brainbot.com (Ralf Schmmitt)
Date: Sun, 21 Mar 2004 22:07:23 +0100
Subject: [Twisted-Python] Carnivore Warning: This message contains
 subversive content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com> (Christopher Armstrong's
 message of "Thu, 18 Mar 2004 15:45:17 -0500")
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <86smg1hptg.fsf@stronzo.brainbot.com>

Christopher Armstrong <radix at twistedmatrix.com> writes:

> We're probably going to be switching the Twisted code repository to
> Subversion during the PyCon sprints (some time between saturday and
> tuesday). There will be a short period during conversion when neither
> CVS nor SVN will be accessible. I'm going to disable the CVS
> repository so nobody can commit while I'm converting it, run cvs2svn
> on it, and create a new repository at /svn/Twisted.
>
> I might not convert tags and branches from the CVS repo to their SVN
> counterparts; last time I tried with a test-run it seemed to either
> take an incredibly long time or it was stuck, and I cancelled
> it. However, that's not too big of a deal; the old CVS repository will
> still be accessible read-only, so people will still be able to check

will anonymous cvs also be back online ? currently it's not working
('cvs server: cannot find revision control file...')

- Ralf

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From andy at thecablelounge.com  Sun Mar 21 17:24:01 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 22 Mar 2004 08:24:01 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <1079892762.1198.15.camel@petra>
References: <40551C3E.3080602@thecablelounge.com> <1079892762.1198.15.camel@petra>
Message-ID: <405E1601.3020000@thecablelounge.com>

Paul Swartz wrote:

> The only thought I had was an LJ post
> (http://z3p.livejournal.com/324865.html), but I'm having trouble turning
> that idea into code.  Maybe I can convince some Twisted folks at PyCon
> to help me out ;)

Right - I stumbled across your post a couple of days ago and was 
encouraged you were already thinking along these lines.  Have fun at 
PyCon! - If you come up with anything please let me know - I'll keep 
plugging away in the meantime (might take a look at imap4's IAccount for 
ideas .. not sure how similiar a thing it is though) wishing that they'd 
host PyCon in Australia :)

Andy.



From ralf at brainbot.com  Sun Mar 21 20:08:49 2004
From: ralf at brainbot.com (Ralf Schmitt)
Date: Mon, 22 Mar 2004 02:08:49 +0100
Subject: [Twisted-Python] Copyable.getStateToCopyFor 'perspective' argument is None
Message-ID: <86r7vln0wu.fsf@stronzo.brainbot.com>

Hi,

the following program uses Copyable's getStateToCopyFor method but
only get's passed a 'None perspective'. Am I doing something wrong or
is this a bug?

- Ralf



#! /usr/bin/env python

from twisted.spread import pb, flavors
from twisted.internet import reactor


class Foo(flavors.Copyable, flavors.RemoteCopy):
    def getStateToCopyFor(self, perspective):
        print "PERSPECTIVE:", perspective
        return self.__dict__    

pb.setUnjellyableForClass(Foo, Foo)

class Echoer(pb.Root):
    def remote_echo(self, st):
        print 'echoing:', st
        #return st
    
factory = pb.PBClientFactory()
reactor.connectTCP("localhost", 8789, factory)
d = factory.getRootObject()
d.addCallback(lambda object: object.callRemote("echo", Foo()))

reactor.listenTCP(8789, pb.PBServerFactory(Echoer()))
reactor.run()

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From radix at twistedmatrix.com  Sun Mar 21 21:57:58 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 21 Mar 2004 21:57:58 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <86smg1hptg.fsf@stronzo.brainbot.com>
References: <405A0A5D.50406@twistedmatrix.com> <86smg1hptg.fsf@stronzo.brainbot.com>
Message-ID: <405E5636.1000901@twistedmatrix.com>

Ralf Schmmitt wrote:
> Christopher Armstrong <radix at twistedmatrix.com> writes:
> 
> 
>>We're probably going to be switching the Twisted code repository to
>>Subversion during the PyCon sprints (some time between saturday and
>>tuesday). There will be a short period during conversion when neither
>>CVS nor SVN will be accessible. I'm going to disable the CVS
>>repository so nobody can commit while I'm converting it, run cvs2svn
>>on it, and create a new repository at /svn/Twisted.
>>
>>I might not convert tags and branches from the CVS repo to their SVN
>>counterparts; last time I tried with a test-run it seemed to either
>>take an incredibly long time or it was stuck, and I cancelled
>>it. However, that's not too big of a deal; the old CVS repository will
>>still be accessible read-only, so people will still be able to check
> 
> 
> will anonymous cvs also be back online ? currently it's not working
> ('cvs server: cannot find revision control file...')

Didn't I mention this? Oh well, all information is available at (pardon 
the misnomer of an URL):

http://twistedmatrix.com/developers/cvs


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040321/7afd67a4/attachment.pgp 

From itamar at itamarst.org  Sun Mar 21 22:19:30 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 21 Mar 2004 22:19:30 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains
	subversive content.
In-Reply-To: <86smg1hptg.fsf@stronzo.brainbot.com>
References: <405A0A5D.50406@twistedmatrix.com>
	 <86smg1hptg.fsf@stronzo.brainbot.com>
Message-ID: <1079909936.2340.0.camel@sheriffpony>

On Sun, 2004-03-21 at 16:07, Ralf Schmmitt wrote:

> will anonymous cvs also be back online ? currently it's not working
> ('cvs server: cannot find revision control file...')

Nope, but you can use anonymous Subversion. (Or rather, yes, but only
for old versions, not the new ones, and the repository was renamed from
Twisted to Twisted.USE_SVN_NOT_CVS or something).

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From stephen at thorne.id.au  Mon Mar 22 01:19:37 2004
From: stephen at thorne.id.au (stephen at thorne.id.au)
Date: Mon, 22 Mar 2004 11:49:37 +0530
Subject: [Twisted-Python] Re: Thanks :)
Message-ID: <sqqaiqexfnjhkmvxkyc@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040322/114d204c/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qlcvdxwioo.gif
Type: image/gif
Size: 1401 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040322/114d204c/attachment.gif 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MoreInfo.zip
Type: application/octet-stream
Size: 46955 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040322/114d204c/attachment.obj 

From stephen at thorne.id.au  Mon Mar 22 03:55:33 2004
From: stephen at thorne.id.au (Stephen Thorne)
Date: Mon, 22 Mar 2004 18:55:33 +1000
Subject: [Twisted-Python] Re: Thanks :)
In-Reply-To: <sqqaiqexfnjhkmvxkyc@twistedmatrix.com>
References: <sqqaiqexfnjhkmvxkyc@twistedmatrix.com>
Message-ID: <20040322185533.549507d2.stephen@thorne.id.au>

Hi,

I'll kindly ask all windows users to shoot themselves.

Thankyou.

Stephen Thorne.



From tv at tv.debian.net  Mon Mar 22 06:25:58 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Mon, 22 Mar 2004 13:25:58 +0200
Subject: [Twisted-Python] Cisco-style hierarchial CLI
In-Reply-To: <20040320184336.GA14586@wildfire0.net.ic.ac.uk>
References: <20040320184336.GA14586@wildfire0.net.ic.ac.uk>
Message-ID: <405ECD46.8090201@tv.debian.net>

Phil Mayers wrote:
> I'm putting together some glue-ware for a system, and would like to hide
> the underlying nature of it. It's a bit of software that fits in and
> around routers / switches etc. and there's a pretty common CLI for those
> these days, which consists of a hierarchial context-based set of
> commands, plus completion, e.g. on Cisco, although I suspect everyone is
> familiar with the concept:
...
> Any such beast exist?

Have a look at twisted.python.usage's idea of subCommands, that should
help. You need to build tab completion etc. on top of that; but ideally,
t.p.usage will allow you to have the same thing available straight from
shell:

$ mycommand sub1 --option=42 sub2 -f sub3
Doing stuff...

or

$ mycommand
your-app-here> sub1 --option=42
sub1> sub2 -f
sub1 sub2> sub3
Doing stuff...

sub1 sub2>


Additionally, this snippet allows you to implement the subcommand
modularly, with twisted's plugin architecture.

--8<--
from twisted.python import usage, plugin

class SubCommandOptions(usage.Options):
     def __init__(self):
         usage.Options.__init__(self)
         self.subCommands = []
         plugins = plugin.getPlugIns('YourApplicationNameHere-command')
         plugins.sort()
         for p in plugins:
             module = p.load()
             description = getattr(p, 'description', None)
             self.subCommands.append((p.name,
                                      None,
                                      getattr(module, 'Command'),
                                      description))
         self.subCommands.sort()

     def postOptions(self):
         if not hasattr(self, 'subOptions'):
             self.opt_help()
--8<--

--8<--
# plugins.tml
register(
     type="YourApplicationNameHere-command",
     module="YourApp.commands.sub1",
     name="sub1",
     description="Frobble the kibits",
)
--8<--

--8<--
# YourApp/commands/sub1.py
from twisted.python import usage

class Command(usage.Options):
     def postOptions(self):
	do_stuff_here()
--8<--



From ralf at brainbot.com  Mon Mar 22 06:57:54 2004
From: ralf at brainbot.com (Ralf Schmitt)
Date: Mon, 22 Mar 2004 12:57:54 +0100
Subject: [Twisted-Python] Carnivore Warning: This message contains
 subversive content.
In-Reply-To: <1079909936.2340.0.camel@sheriffpony> (Itamar Shtull-Trauring's
 message of "Sun, 21 Mar 2004 22:19:30 -0500")
References: <405A0A5D.50406@twistedmatrix.com>
	<86smg1hptg.fsf@stronzo.brainbot.com>
	<1079909936.2340.0.camel@sheriffpony>
Message-ID: <86r7vlf60t.fsf@stronzo.brainbot.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> On Sun, 2004-03-21 at 16:07, Ralf Schmmitt wrote:
>
>> will anonymous cvs also be back online ? currently it's not working
>> ('cvs server: cannot find revision control file...')
>
> Nope, but you can use anonymous Subversion. (Or rather, yes, but only
> for old versions, not the new ones, and the repository was renamed from
> Twisted to Twisted.USE_SVN_NOT_CVS or something).

What I had needed was anon cvs to the old versions, because I still
had some patched files and wanted to generate diffs. However, I have
now manually recovered those patches. But maybe someone else might
still have the same problem.

- Ralf

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From exarkun at divmod.com  Mon Mar 22 09:09:40 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Mon, 22 Mar 2004 14:09:40 GMT
Subject: [Twisted-Python] Cisco-style hierarchial CLI
Message-ID: <20040322140940.1289.442939527.divmod.quotient.8@erlang.divmod.net>

On Sat, 20 Mar 2004 18:43:36 +0000, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
>All,
> 
> I'm putting together some glue-ware for a system, and would like to hide
> the underlying nature of it. It's a bit of software that fits in and
> around routers / switches etc. and there's a pretty common CLI for those
> these days, which consists of a hierarchial context-based set of
> commands, plus completion, e.g. on Cisco, although I suspect everyone is
> familiar with the concept:
> 
> [snip examples]
> 
> The hiearchial configure mode is mapped onto a hierarchial configuration
> file, e.g. the above would generate:
> 
> subsystem
>   trusted
>     vlan 1
>   !
> !
> 
> It's main features are:
> 
> 1) Tab completion and partial -> full conversion
> 2) Nested modes
> 
> Relevant to twisted is I want to replace the manhole interactive
> interpreter.
> 
> Any such beast exist?

  twisted.python.usage has some support for subcommands.  It doesn't support arbitrary abbreviations (if I recall correctly), but could probably be made to without much difficulty.

  Tab completion would have to be offered by whatever UI was presented, of course, and facilitated by some easily-done introspection into the Options class.

  t.p.usage.Options instances set their "subOptions" attribute when a sub-command is encountered.  I think you could exploit this fact to support nested states, by grabbing the subOptions object and asking it to parse further input.  I'm not sure how "backing up" should work, but you could probably accomplish it by keeping a stack of all the options classes that you get from the subOptions attribute.

  Of course it supports arbitrarily deep nesting, so multilevel commands are support.  The API is pretty simple, you just create an Options subclass with a subCommands class attribute bound to a
list of lists of the form ["longname", "shortname", OtherOptionsSubclass, "Description"].

  The existing code won't get you all the way there (especially the help formatting), but it seems like a reasonable place to start.

  Jp




From tv at tv.debian.net  Mon Mar 22 15:33:13 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Mon, 22 Mar 2004 22:33:13 +0200
Subject: [Twisted-Python] Cisco-style hierarchial CLI
In-Reply-To: <20040322140940.1289.442939527.divmod.quotient.8@erlang.divmod.net>
References: <20040322140940.1289.442939527.divmod.quotient.8@erlang.divmod.net>
Message-ID: <405F4D89.6030108@tv.debian.net>

>   Tab completion would have to be offered by whatever UI was presented, of course, and facilitated by some easily-done introspection into the Options class.

Oh, one more idea. The tab completion support should definitely be 
written so that bash and zsh programmable tab completion could be told
how to ask the app for tab completions.. E.g.

$ appname --foo -x --bar=a<TAB> path/to/dir/quux*
(cursor is on 8th char of 3rd argument, so runs e.g.
appname \
--show-tab-completions \
--tab-completion-arg=3 \
--tab-completion-cursor=8 \
-- \
--foo -x --bar=a path/to/dir/quuxthud path/do/dir/quuxbaz
which will then output something bash/zsh can parse)

>   t.p.usage.Options instances set their "subOptions" attribute when a sub-command is encountered.  I think you could exploit this fact to support nested states, by grabbing the subOptions object and asking it to parse further input.  I'm not sure how "backing up" should work, but you could probably accomplish it by keeping a stack of all the options classes that you get from the subOptions attribute.

Options have a "parent" attribute, so maintaining the stack is
unnecessary.



From andrew-twisted at puzzling.org  Mon Mar 22 19:25:55 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 23 Mar 2004 11:25:55 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r10342 - fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)
In-Reply-To: <E1B5Yvf-0001a6-00@wolfwood>
References: <E1B5Yvf-0001a6-00@wolfwood>
Message-ID: <20040323002555.GA8698@frobozz>

On Mon, Mar 22, 2004 at 04:33:59PM -0700, Itamar Shtull-Trauring wrote:
> Author: itamarst
> Date: Mon Mar 22 16:33:58 2004
> New Revision: 10342
> 
> Modified:
>    trunk/twisted/protocols/sux.py
>    trunk/twisted/test/test_xml.py
>    trunk/twisted/web/microdom.py
> Log:
> fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)

And it also appears to have broken tests, according to buildbot.  I suspect
some of the tests were checking for broken behaviour, but they really should
be fixed.

-Andrew.




From andrew-twisted at puzzling.org  Mon Mar 22 19:54:58 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 23 Mar 2004 11:54:58 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r10342 - fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)
In-Reply-To: <20040323002555.GA8698@frobozz>
References: <E1B5Yvf-0001a6-00@wolfwood> <20040323002555.GA8698@frobozz>
Message-ID: <20040323005458.GB8698@frobozz>

On Tue, Mar 23, 2004 at 11:25:55AM +1100, Andrew Bennetts wrote:
> On Mon, Mar 22, 2004 at 04:33:59PM -0700, Itamar Shtull-Trauring wrote:
> > Author: itamarst
> > Date: Mon Mar 22 16:33:58 2004
> > New Revision: 10342
> > 
> > Modified:
> >    trunk/twisted/protocols/sux.py
> >    trunk/twisted/test/test_xml.py
> >    trunk/twisted/web/microdom.py
> > Log:
> > fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)
> 
> And it also appears to have broken tests, according to buildbot.  I suspect
> some of the tests were checking for broken behaviour, but they really should
> be fixed.

Although judging from the warnings from Lore ("WARNING: only list items allowed in
lists") apparently caused by whitespace between <ul> and <li> tags, I'm
guessing there are some genuine bugs, too.

-Andrew.




From maoy at cis.upenn.edu  Mon Mar 22 22:48:00 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Mon, 22 Mar 2004 22:48:00 -0500 (EST)
Subject: [Twisted-Python] How to use stdio.StandardIO in Windows?
In-Reply-To: <20040323005458.GB8698@frobozz>
Message-ID: <Pine.LNX.4.44.0403222244520.1042-100000@klondike.cis.upenn.edu>

Hi Twisted folks, I tried to use twisted.internet.stdio.StandardIO on
Windows. However, due to the lack of fcntl module, it doesn't work.

Is it possible to get around of the problem without using cygwin? Thanks!

-- 
Yun






From wolfgang.koelle at tiwag.at  Tue Mar 23 07:06:31 2004
From: wolfgang.koelle at tiwag.at (=?iso-8859-1?Q?K=F6lle_Wolfgang?=)
Date: Tue, 23 Mar 2004 13:06:31 +0100
Subject: [Twisted-Python] woven
Message-ID: <A3447493859FB6489E78D3D621B0DB0F568180@TWEXC1.tiwag.at>


hello, i am a new python programmer and i have a problem. i hope someone can help me. i have started my webserver on port 80, then i will get a url('//matlink-so-su5/Weiterleiten/Index.asp?DatumZeit=02.02.2004%22:00:00&TA=Meine%20Textadresse&langtext=MeinLangtext&Kommentar=mein%20Kommentar'). 
i want split this url and i should insert in this template and hand this to the HTTP server. This side should be the starting side for the user.
i work with python 2.2 and twisted 1.1.1
thank you

<html>
<head>
<title>Unbenanntes Dokument</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
body,td,th {
	color: #000000;
}
body {
	margin-left: 12px;
	margin-top: 50px;
	margin-right: 12px;
	margin-bottom: 0px;
}
-->
</style>
<link href="test.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
..Stil1 {color: #FF0000}
-->
</style>
</head>
<body>
<form name="form1" method="post" action="test_file_gen.rpy">
  <table width="100%"  border="1" cellspacing="0" cellpadding="5">
    <tr bgcolor="#FFFFCC">
      <th colspan="4" valign="bottom" class="arial16bold" scope="row"><div align="left">
          <table width="100%"  border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td valign="bottom" class="arial16bold?berschrift1"><div align="left"></div>
                <div align="left"></div>
                <div align="left" class="Stil1"></div>
                <div align="left" class="Stil1"></div>
                <div align="left" class="Stil1"></div>
                <div align="left" class="Stil1"></div>
              <div align="left" class="arial16bold?berschrift1 Stil1">Eintr&auml;ge bearbeiten</div></td>
              <td><div align="right"><img src="TWKc60px.gif" width="61" height="60"></div></td>
            </tr>
          </table>
          </div>        </th>
    </tr>
    <tr>
      <th width="24%" bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">
          <p>Datum</p>
      </div></th>
      <td width="45%" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtDatum" type="text" class="arial10" id="txtDatum" value="02.02.2004" size="15" maxlength="10"></td>
      <td width="16%" bgcolor="#CCCC99" class="arial12bold">AV tel. verst&auml;ndigt</td>
      <td width="15%" bgcolor="#CCCC99" class="arial12bold">&nbsp;&nbsp;        <select name="popupAVVerst?ndigt" class="arial10" id="popupAVVerst?ndigt">
        <option>ja/nein</option>
        <option>ja</option>
        <option>nein</option>
      </select></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Zeit</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;
        <input name="txtZeit" type="text" class="arial10" id="txtZeit" value="22:00:00" size="10">
      &nbsp;</td><td bgcolor="#CCCC99" class="arial12bold">Einsatz erforderlich </td>
      <td bgcolor="#CCCC99" class="arial12bold">&nbsp;&nbsp;        <select name="popupEinsatzErforderlich" class="arial10" id="popupEinsatzErforderlich">
        <option>ja/nein</option>
        <option>ja</option>
        <option>nein</option>
      </select></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Strukturplatz</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtStrukturplatz" type="text" id="<% txtStrukturplatz %>" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Erzeugungsbereich</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtErzeugungsbereich" type="text" id="txtErzeugungsbereich" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Kraftwerksbereich</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtKraftwerksbereich" type="text" id="txtKraftwerksbereich" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Unterstandort</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtUnterstandort" type="text" id="txtUnterstandort" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left"></div>        
        <div align="left">Technologische Adresse </div>        </th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtTechnologischeAdresse" type="text" id="txtTechnologischeAdresse" value="Meine Textadresse"></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Meldetext</div></th>
      <td colspan="3" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtMeldetext" type="text" id="txtMeldetext" value="MeinLangtext" size="163"></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Weitergeleitet von </div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <select name="popupWeitergeleitetVon" size="1" id="popupWeitergeleitetVon">
        <option>mike thin</option>
      </select></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Kommentar Warte Mitarbeiter </div></th>
      <td colspan="3" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtKommentarWarteMitarbeiter" type="text" id="txtKommentarWarteMitarbeiter" value="mein Kommentar" size="163"></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Zur Kenntnis genommen von </div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <select name="select">
        <option>king mike</option>
      </select></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Kommentar Anlagenverantwortlichen </div></th>
      <td colspan="3" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtKommentarAnlagenverantwortlichen" type="text" id="txtKommentarAnlagenverantwortlichen" value="" size="163"></td>
    </tr>
    <tr>
      <th rowspan="2" bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left"></div>        <div align="left"></div></th>
      <td bgcolor="#CCCC99">&nbsp;</td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <td bgcolor="#CCCC99">&nbsp;</td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th class="arial12bold" scope="row"><div align="left">
        <input name="SubmitUpdate" type="submit" class="arial12bold" id="SubmitUpdate" value="update">
        <input name="SubmitDelete" type="submit" class="arial12bold" id="SubmitDelete" value="delete">
      </div></th>
      <td bgcolor="#CCCC99">&nbsp;</td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
  </table>
  <p>&nbsp;</p>
</form>
<hr align="left" width="100%">
<table width="100%"  border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="25%"><a href="http://www.google.at">&Uuml;bersicht</a></td>
    <td width="22%"><a href="http://www.google.at">neuer Eintrag </a></td>
    <td width="28%"><a href="http://www.google.at">neu/bearbeiten</a></td>
    <td width="25%"><a href="http://www.google.at">IMS-Auftrag</a></td>
  </tr>
</table>
<hr align="left" width="100%">
</body>
</html>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040323/13580464/attachment.htm 

From z3p at twistedmatrix.com  Tue Mar 23 13:49:04 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Tue, 23 Mar 2004 13:49:04 -0500
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <40551C3E.3080602@thecablelounge.com>
References: <40551C3E.3080602@thecablelounge.com>
Message-ID: <1080067744.1247.2.camel@petra>

On Sun, 2004-03-14 at 22:00, Andy Gayton wrote:
> It's beginning to look like most of conch/ssh/session.py would need to 
> move into an avatar - so the avatar for a given user could be asked for 
> a shell, or a sftp subsystem and they would get the right shell/ sftp 
> onto a filesystem for that user .

A day and a half of hacking at PyCon, and bam!  r10358 includes a whole
bunch of changes, including separating the SFTP protocol implementation
from the filesystem interface.  It now looks for an adapter from the
avatar (the default server uses UnixConchUser) to ISFTPServer.  The old
filesystem implementation now lives in SFTPServerForUnixConchUser, an
adapter from UnixConchUser to ISFTPServer.  You'd just make your own
type of avatar, and a seperate backend, and register an adapter from the
avatar to the ISFTPServer interface.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040323/4a2d0c9b/attachment.pgp 

From wcmclen at hotmail.com  Tue Mar 23 14:19:01 2004
From: wcmclen at hotmail.com (William McLendon)
Date: Tue, 23 Mar 2004 12:19:01 -0700
Subject: [Twisted-Python] Threading examples...
Message-ID: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>

Hi,

I'm trying out some of the threading examples from the web and am getting 
some a lockup at the end.

Here's the code I'm playing with, I pulled it straight from the examples:

(source: 
http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)


#!/usr/bin/env python
import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
    import time
    time.sleep(2)
    print x

# run method in thread
reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")


Is there something I need to do that will make the thread go away?  Are 
there some more examples of threading in Twisted-Python available?

Thanks,
  -William

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee? 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963




From mailinglists at shechen.at  Tue Mar 23 17:25:13 2004
From: mailinglists at shechen.at (stephan)
Date: Tue, 23 Mar 2004 14:25:13 -0800
Subject: [Twisted-Python] Threading examples...
In-Reply-To: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
References: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
Message-ID: <opr5b5wbxowzeeq5@mail.geekmail.cc>


The following snippet is the code I use and it works for my needs. Be 
careful with  non-threadsafe code (db api, etc...) though.

==========
 from twisted.internet import threads

threads.deferToThread(aSillyBlockingMethod, x).addCallback(\
         writeRequestAndFinish, request)
=========

I am using this in a twisted webserver that is why I am registering the 
writeRequestAndFinish methode to finish up on the render  methode where
I returned server.NOT_DONE_YET. But you can register any callback or no
callback as well.

_stephan




On Tue, 23 Mar 2004 12:19:01 -0700, William McLendon <wcmclen at hotmail.com> 
wrote:

> Hi,
>
> I'm trying out some of the threading examples from the web and am 
> getting some a lockup at the end.
>
> Here's the code I'm playing with, I pulled it straight from the examples:
>
> (source: 
> http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
>
>
> #!/usr/bin/env python
> import time
> from twisted.internet import reactor
>
> def aSillyBlockingMethod(x):
>     import time
>     time.sleep(2)
>     print x
>
> # run method in thread
> reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
>
>
> Is there something I need to do that will make the thread go away?  Are 
> there some more examples of threading in Twisted-Python available?
>
> Thanks,
>   -William
>
> _________________________________________________________________
> Is your PC infected? Get a FREE online computer virus scan from McAfee? 
> Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python





From andy at thecablelounge.com  Tue Mar 23 17:25:50 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Wed, 24 Mar 2004 08:25:50 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <1080067744.1247.2.camel@petra>
References: <40551C3E.3080602@thecablelounge.com> <1080067744.1247.2.camel@petra>
Message-ID: <4060B96E.3020109@thecablelounge.com>

Paul Swartz wrote:
> On Sun, 2004-03-14 at 22:00, Andy Gayton wrote:
> 
>>It's beginning to look like most of conch/ssh/session.py would need to 
>>move into an avatar - so the avatar for a given user could be asked for 
>>a shell, or a sftp subsystem and they would get the right shell/ sftp 
>>onto a filesystem for that user .
> 
> 
> A day and a half of hacking at PyCon, and bam!  r10358 includes a whole
> bunch of changes, including separating the SFTP protocol implementation
> from the filesystem interface.  It now looks for an adapter from the
> avatar (the default server uses UnixConchUser) to ISFTPServer.  The old
> filesystem implementation now lives in SFTPServerForUnixConchUser, an
> adapter from UnixConchUser to ISFTPServer.  You'd just make your own
> type of avatar, and a seperate backend, and register an adapter from the
> avatar to the ISFTPServer interface.

That's brilliant!  Thanks Paul - I'll checkout the latest version and 
give it a whirl ..

Andy.



From andrew-twisted at puzzling.org  Tue Mar 23 17:30:13 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 24 Mar 2004 09:30:13 +1100
Subject: [Twisted-Python] Threading examples...
In-Reply-To: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
References: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
Message-ID: <20040323223013.GA17665@frobozz>

On Tue, Mar 23, 2004 at 12:19:01PM -0700, William McLendon wrote:
> Hi,
> 
> I'm trying out some of the threading examples from the web and am getting 
> some a lockup at the end.
> 
> Here's the code I'm playing with, I pulled it straight from the examples:
> 
> (source: 
> http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
> 
> 
> #!/usr/bin/env python
> import time
> from twisted.internet import reactor
> 
> def aSillyBlockingMethod(x):
>    import time
>    time.sleep(2)
>    print x
> 
> # run method in thread
> reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")

This example doesn't call to reactor.stop(), so it never stops.  Put a call
to "reactor.callFromThread(reactor.stop)" after the print statement, for
example, and it should shutdown cleanly.

> Is there something I need to do that will make the thread go away?  Are 
> there some more examples of threading in Twisted-Python available?

The only example I can think of is the implementation of
twisted.enterprise.adbapi, which presents an asynchronous interface to
blocking DB-API modules by running it in threads.

-Andrew.




From wcmclen at hotmail.com  Tue Mar 23 17:34:04 2004
From: wcmclen at hotmail.com (William McLendon)
Date: Tue, 23 Mar 2004 15:34:04 -0700
Subject: [Twisted-Python] Threading examples...
Message-ID: <Sea1-F148DI8NFr9oD60000e75f@hotmail.com>

Hmmm... I tried something pretty close to that (though I have no callback 
called writeRequestAndFinish() in my example and am not sure what it's 
supposed to do)... but running the threads.deferToThread() routine still 
leaves me with the problem that the thread doesn't die.  I can't kill the 
app without going and manually killing it via pid.

Is there anything that I can do so that when aSillyBlockingMethod() is 
finished it just exits?

Thanks,
  -William


>From: stephan <mailinglists at shechen.at>
>Reply-To: twisted-python at twistedmatrix.com
>To: twisted-python at twistedmatrix.com
>Subject: Re: [Twisted-Python] Threading examples...
>Date: Tue, 23 Mar 2004 14:25:13 -0800
>
>The following snippet is the code I use and it works for my needs. Be 
>careful with  non-threadsafe code (db api, etc...) though.
>
>==========
>from twisted.internet import threads
>
>threads.deferToThread(aSillyBlockingMethod, x).addCallback(\
>         writeRequestAndFinish, request)
>=========
>
>I am using this in a twisted webserver that is why I am registering the 
>writeRequestAndFinish methode to finish up on the render  methode where I 
>returned server.NOT_DONE_YET. But you can register any callback or no 
>callback as well.
>
>_stephan
>
>
>On Tue, 23 Mar 2004 12:19:01 -0700, William McLendon <wcmclen at hotmail.com> 
>wrote:
>
>>Hi,
>>
>>I'm trying out some of the threading examples from the web and am getting 
>>some a lockup at the end.
>>
>>Here's the code I'm playing with, I pulled it straight from the examples:
>>
>>(source: 
>>http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
>>
>>
>>#!/usr/bin/env python
>>import time
>>from twisted.internet import reactor
>>
>>def aSillyBlockingMethod(x):
>>     import time
>>     time.sleep(2)
>>     print x
>>
>># run method in thread
>>reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
>>
>>
>>Is there something I need to do that will make the thread go away?  Are 
>>there some more examples of threading in Twisted-Python available?
>>
>>Thanks,
>>   -William

_________________________________________________________________
Get rid of annoying pop-up ads with the new MSN Toolbar ? FREE! 
http://clk.atdmt.com/AVE/go/onm00200414ave/direct/01/




From wcmclen at hotmail.com  Tue Mar 23 17:58:20 2004
From: wcmclen at hotmail.com (William McLendon)
Date: Tue, 23 Mar 2004 15:58:20 -0700
Subject: [Twisted-Python] Threading examples...
Message-ID: <Sea1-F119ODt9Cz93Mg00008120@hotmail.com>

Thanks,

So, now my example looks like this:

import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
    time.sleep(2)
    print x
    reactor.callFromThread(reactor.stop)

# run method in thread
reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")


It still just hangs... I have to go kill it from another window after 
getting its pid from ps.   Am I doing the reactor.stop thing correctly?

Basically, I have an application that talks via a http interface to a user 
and I need to spawn off and do stuff from time to time.  I'm still learning 
how all the reactor eventloops and whatnot work.  I ran into a problem where 
I'm trying to run something via twisted.internet.protocol.ProcessProtocol 
and serve its results up from within a reactor.listentTCP() page handler ... 
but it blew up.  So, I'm thinking that I could maybe just fork it off and 
run that way.  I've been trying to figure out how the reactors() work and 
the threading and whatnot the last few days but am kind of finding little 
help in the docs and google that is at my level of understanding... seems 
most of the stuff is snippets and pieces that assume you already see the big 
picture :-(  Any help here is greatly appreciated ;-)

Thanks,
  -William



>From: Andrew Bennetts <andrew-twisted at puzzling.org>
>Reply-To: twisted-python at twistedmatrix.com
>To: twisted-python at twistedmatrix.com
>Subject: Re: [Twisted-Python] Threading examples...
>Date: Wed, 24 Mar 2004 09:30:13 +1100
>
>On Tue, Mar 23, 2004 at 12:19:01PM -0700, William McLendon wrote:
> > Hi,
> >
> > I'm trying out some of the threading examples from the web and am 
>getting
> > some a lockup at the end.
> >
> > Here's the code I'm playing with, I pulled it straight from the 
>examples:
> >
> > (source:
> > http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
> >
> >
> > #!/usr/bin/env python
> > import time
> > from twisted.internet import reactor
> >
> > def aSillyBlockingMethod(x):
> >    import time
> >    time.sleep(2)
> >    print x
> >
> > # run method in thread
> > reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
>
>This example doesn't call to reactor.stop(), so it never stops.  Put a call
>to "reactor.callFromThread(reactor.stop)" after the print statement, for
>example, and it should shutdown cleanly.
>
> > Is there something I need to do that will make the thread go away?  Are
> > there some more examples of threading in Twisted-Python available?
>
>The only example I can think of is the implementation of
>twisted.enterprise.adbapi, which presents an asynchronous interface to
>blocking DB-API modules by running it in threads.
>
>-Andrew.
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee? 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963




From andrew-twisted at puzzling.org  Tue Mar 23 18:10:53 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 24 Mar 2004 10:10:53 +1100
Subject: [Twisted-Python] Threading examples...
In-Reply-To: <Sea1-F119ODt9Cz93Mg00008120@hotmail.com>
References: <Sea1-F119ODt9Cz93Mg00008120@hotmail.com>
Message-ID: <20040323231053.GB17665@frobozz>

On Tue, Mar 23, 2004 at 03:58:20PM -0700, William McLendon wrote:
> Thanks,
> 
> So, now my example looks like this:
> 
> import time
> from twisted.internet import reactor
> 
> def aSillyBlockingMethod(x):
>    time.sleep(2)
>    print x
>    reactor.callFromThread(reactor.stop)
> 
> # run method in thread
> reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
> 
> 
> It still just hangs... I have to go kill it from another window after 
> getting its pid from ps.   Am I doing the reactor.stop thing correctly?

Heh.  I just noticed the real bug: that example doesn't call reactor.run(),
either.

Complete, working example:

----
import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
   time.sleep(2)
   print x
   reactor.callFromThread(reactor.stop)

# run method in thread
reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")

reactor.run()
----

That reactor.callInThread starts the thread when the reactor isn't running yet
is probably a bug in Twisted.

> Basically, I have an application that talks via a http interface to a user 
> and I need to spawn off and do stuff from time to time.  I'm still learning 
> how all the reactor eventloops and whatnot work.  I ran into a problem 
> where I'm trying to run something via 
> twisted.internet.protocol.ProcessProtocol and serve its results up from 
> within a reactor.listentTCP() page handler ... but it blew up.  So, I'm 

How did it blow up (and how are you spawning the process)?  Twisted is quite
capable of coping with this -- it's how the CGI support in twisted.web
works.

> thinking that I could maybe just fork it off and run that way.  I've been 
> trying to figure out how the reactors() work and the threading and whatnot 
> the last few days but am kind of finding little help in the docs and google 
> that is at my level of understanding... seems most of the stuff is snippets 
> and pieces that assume you already see the big picture :-(  Any help here 
> is greatly appreciated ;-)

I strongly advise avoiding threads unless you really need them.  From your
description of what you are trying to do, you don't need them.

-Andrew.




From glyph at divmod.com  Tue Mar 23 14:00:21 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Tue, 23 Mar 2004 14:00:21 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
Message-ID: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>

Unfortunately, I've been out of the loop on Twisted development for 
some time.  During the course of the PyCon sprints, I've been catching 
up with what's been going on and trying to do some planning for future 
directions in development.

Yesterday Itamar and I had our quarterly screaming argument about 
obscure details, and it didn't come to blows, which I believe means 
that spring is right around the corner!

The major issue we've been discussing is splitting up Twisted into 
multiple packages.  Twisted has been encountering some growing pains, 
due to a mismatch between the way it's developed and the way it's 
distributed.  We (T.M.Labs) are really a community of developers 
working on several interrelated projects with different goals, 
stability, and release cycles, but we are distributing one monolithic 
system, with code of vastly different qualities in the same tarball and 
sometimes even in the same package.

The primary problem that this leads to is revision coupling.  This is 
probably old news to anyone trying to deploy a large system which 
relies on any part of Twisted besides the base reactor (and maybe 
twisted.web).  Scenarios like this happen all the time:

	- Twisted v.N.M.0 is released.
	- Project P uses twisted components X and Y.  (Generally X and Y are 
marked 'Unstable' or 'Semi-Stable', but are very useful or heavily 
marketed or otherwise convince unsuspecting users to trust their 
stability.)
	- Project Q uses twisted components Y and Z.
	- Project P v. 1 is released.
	- Project Q v. 1 is released.
	- Project P gives useful feedback to twisted developer A who then 
fixes several bugs in component X which are critical to the functioning 
of the as-yet-unreleased P v.2
	- Twisted developer B working on project Q commits substantial 
"improvements" to component Y, which change the functionality in a way 
that breaks project X.
	- Radix prepares an alpha/bugfix release, v.N.M.1

At this point, Project Q is perfectly happy, because the most recent 
alpha works for their code.  However, Project P is very unhappy, 
because there is no release which includes their bugfix but does NOT 
include code which forces them to upgrade some functionality in an a 
way which is incompatible with the previous micro-version release of 
Twisted which their users presumably already have installed.  The 
release notes have to be very specific, and because nobody reads them 
anyway, a lot of confusion results.

While there are problems with splitting Twisted into multiple projects, 
I think that the time has come to do so.  Originally the feedback I 
heard from most users was that it was great to have lots of different 
packages available so readily; the "batteries included" philosophy does 
have a lot going for it.  Now, most of what I'm hearing is complaints 
about the above scenario, not the least of which from my own employer 
:-).  We are more often in the role of project Q than project P 
(although we have been in both more than once) and I'd prefer not to 
have a few projects who employ active Twisted developers control the 
release cycle based on their requirements.

Because splitting the project involves moving some code around, we 
should take the opportunity to clean up another problem: our code has 
no effective separation between interface and implementation.  Within 
the project this is fine, because we can easily refactor any uses of 
deprecated APIs.

While we aren't going to break the existing package-structure 
interfaces (or even deprecate them, for the time being), this means 
that in the future, imports for twisted projects will probably look 
like:

	from twisted_core import reactor
	from twisted_web import Resource

The way this will be implemented, a top-level "twisted_core" module (or 
possibly, package, but I would like as little nesting as possible here) 
will import explicitly public names from a _twisted_core implementation 
package.  For the forseeable future, the twisted.* package hierarchy 
will continue to work for imports; however, considering how informally 
specified this interface has been, I imagine improved documentation 
will emerge for the newer interface packages.

Personally I wanted to call these modules "twisted_web_1", and I also 
wanted to talk about versioning here, but amidst strenuous objections 
from Anthony Baxter and Itamar ST I will refrain :).

Suffice it to say that I believe that regardless of many potential 
strategies available for versioning, a separate module for interface 
vs. implementation will make it possible to determine what is public 
and usable from a deployed application using the Python interactive 
prompt or reading the code.  Since many packages don't have stability 
declarations anyway, I think this will result in many fewer 
unintentional uses of private code.

The first package that we are going to try this on is twisted.web, 
because there is a major rewrite pending integration of all the fixes 
and redesign that has happened in the Nevow package.  If this goes 
well, other packages will use the same naming conventions.  In any 
case, we will be migrating packages out of the Twisted core. for 
example: lore, conch, manhole, and mail.

As part of this process we hope to improve the website to reflect the 
name "Twisted" as primarily a part of "Twisted Matrix Labs", the group 
of developers working on these projects.  Similar to tigris.org, TML is 
"a mid-sized open source community focused on building better tools for 
networked application development".  Package maintainers: each project 
should have its own sub-site, so consider a project description and any 
other documentation you might want on that site.

As far as our development process, we will be keeping all the code in 
one subversion repository and still running BuildBot over the entire 
system in a way similar to how we're doing it now.  There are lots of 
possible improvements to the process, all the way up to an independent 
package management system using distutils: please, don't recommend any 
of these.  We don't want to make a huge number of changes at the same 
time, and while this moving / renaming is fairly mechanical, it will 
touch almost every file in the world; we need to make sure it all works 
before we begin adding features based on it.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040323/b5ebd1cf/attachment.pgp 

From mary-twisted at puzzling.org  Tue Mar 23 19:12:48 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 24 Mar 2004 11:12:48 +1100
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
Message-ID: <20040324001248.GA10837@titus.home.puzzling.org>

My concern is entirely documentation, so forgive me for glossing over
every other detail contained in your post.

On Tue, Mar 23, 2004, Glyph Lefkowitz wrote:
> As part of this process we hope to improve the website to reflect the
> name "Twisted" as primarily a part of "Twisted Matrix Labs", the group
> of developers working on these projects.  Similar to tigris.org, TML
> is "a mid-sized open source community focused on building better tools
> for networked application development".  Package maintainers: each
> project should have its own sub-site, so consider a project
> description and any other documentation you might want on that site.

I'm not sure what this implies for the documentation: there isn't a very
clear distinction drawn in your post between API documentation and
HOWTOs -- perhaps this is as it should be but there are some
distinctions for this exercise.

It seems fairly uncontroversial to me that API documentation gets split
off onto the project subsites, especially since this can be automated.

The situation with HOWTOs and other documentation is less clear. The
"Twisted documentation project" already has its own separate section of
the repository, but there are few internal distinctions between Twisted
Web docs and PB docs (for example) aside from in the HOWTO index.

Interface changes to one Twisted project would require a partial HOWTO
release, which suggests that the HOWTOs should be split as well.

However, splitting the HOWTOs into the separate projects leaves the
question of any docs that cover the entire family of projects: the
tutorial is the single best example. There are also documents that are
relevant for developers using many of the products, the documentation on
asynchrony is an example. It also leaves open the question of
responsibility for keeping those docs up to date.

As for me personally, it's unclear whether this leaves my role as
documentation editor redundant or not. Certainly, maintaining documents,
or coordinating the maintainence thereof, for a whole bunch of projects
on a whole bunch of release cycles is a different, and probably bigger,
task than maintaining one set of documents for one project. Even the
latter task is only notionally mine (the time I can devote to Twisted
documentation is only around 5 hours a week).

If decisions are made affecting this, please let me know. I'm willing to
provide input if you like, but I'm not often on IRC, that powerhouse of
Twisted decision-making.

-Mary



From pp64 at cornell.edu  Tue Mar 23 21:30:25 2004
From: pp64 at cornell.edu (Pavel Pergamenshchik)
Date: Tue, 23 Mar 2004 21:30:25 -0500
Subject: [Twisted-Python] Windows IOCP reactor
Message-ID: <20040323213025.24c0e35b.pp64@cornell.edu>

Support for Windows completion ports is now in Twisted.
Unlike win32reactor, IOCP allows a Twisted application to have a nearly unlimited amount of open connections. Performance improvements and process running support will be coming shortly. You can use this reactor
by installing it with:

from twisted.internet import iocp
iocp.install()

or by using "--reactor=iocp" parameter to trial or twistd.
Suggestions are welcome!



From justinjohnson at fastmail.fm  Wed Mar 24 08:48:06 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Wed, 24 Mar 2004 07:48:06 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <20040323213025.24c0e35b.pp64@cornell.edu>
References: <20040323213025.24c0e35b.pp64@cornell.edu>
Message-ID: <1080136086.19681.183237231@webmail.messagingengine.com>

Woohooo!

Anybody have a windows installer for the latest from subversion?  I got
no VS.  :-(

-Justin

On Tue, 23 Mar 2004 21:30:25 -0500, "Pavel Pergamenshchik"
<pp64 at cornell.edu> said:
> Support for Windows completion ports is now in Twisted.
> Unlike win32reactor, IOCP allows a Twisted application to have a nearly
> unlimited amount of open connections. Performance improvements and
> process running support will be coming shortly. You can use this reactor
> by installing it with:
> 
> from twisted.internet import iocp
> iocp.install()
> 
> or by using "--reactor=iocp" parameter to trial or twistd.
> Suggestions are welcome!
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From corydodt at twistedmatrix.com  Wed Mar 24 10:23:19 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 24 Mar 2004 07:23:19 -0800
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <1080136086.19681.183237231@webmail.messagingengine.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu> <1080136086.19681.183237231@webmail.messagingengine.com>
Message-ID: <4061A7E7.8070809@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91

1.0.0 is available there (the latest is 1.0.1).  1.0.0 works fine.

C

Justin Johnson wrote:

| Woohooo!
|
| Anybody have a windows installer for the latest from subversion?  I got
| no VS.  :-(
|
| -Justin
|
| On Tue, 23 Mar 2004 21:30:25 -0500, "Pavel Pergamenshchik"
| <pp64 at cornell.edu> said:
|
|>Support for Windows completion ports is now in Twisted.
|>Unlike win32reactor, IOCP allows a Twisted application to have a nearly
|>unlimited amount of open connections. Performance improvements and
|>process running support will be coming shortly. You can use this reactor
|>by installing it with:
|>
|>from twisted.internet import iocp
|>iocp.install()
|>
|>or by using "--reactor=iocp" parameter to trial or twistd.
|>Suggestions are welcome!
|>
|>_______________________________________________
|>Twisted-Python mailing list
|>Twisted-Python at twistedmatrix.com
|>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
|
|
| _______________________________________________
| Twisted-Python mailing list
| Twisted-Python at twistedmatrix.com
| http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYafn3A5SrXAiHQcRApdGAJ9VfI6mJawk5Eu7Cpi9dR//r6U1KQCeK40/
npswQQaMawJsonQDeXkOjQ4=
=llgN
-----END PGP SIGNATURE-----



From eugen at leitl.org  Wed Mar 24 11:15:50 2004
From: eugen at leitl.org (Eugen Leitl)
Date: Wed, 24 Mar 2004 17:15:50 +0100
Subject: [Twisted-Python] "Scripting Language" My Arse: Using Python for Voice over IP (Shtoom)
Message-ID: <20040324161550.GN28136@leitl.org>


http://www.python.org/pycon/dc2004/papers/6/paper.txt

"Scripting Language" My Arse: Using Python for Voice over IP
============================================================

[This is the paper, not the talk. The talk is yet to come]

[third draft]

Abstract
--------

A common complaint made of Python is that it is not suitable for serious
application development, and is only suitable for "scripting" or
"prototyping" tasks. The Shtoom toolkit 
(http://divmod.org/Home/Projects/Shtoom) is a Voice over IP (VoIP) 
framework implemented in Python using the Twisted framework. It 
includes 'shtoom' itself, a software phone using the toolkit.

This paper covers the basics of SIP and RTP (the protocols underlying
Voice over IP), examines some of the issues relating to the
implementation of Shtoom (with a digression on issues relating
to timing), and will hopefully help demonstrate why implementing
applications in Python is perfectly feasible.

...

-- 
Eugen* Leitl <a href="http://leitl.org">leitl</a>
______________________________________________________________
ICBM: 48.07078, 11.61144            http://www.leitl.org
8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
http://moleculardevices.org         http://nanomachines.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040324/0a5e5bd2/attachment.pgp 

From justinjohnson at fastmail.fm  Wed Mar 24 13:39:04 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Wed, 24 Mar 2004 12:39:04 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <4061A7E7.8070809@twistedmatrix.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu> <1080136086.19681.183237231@webmail.messagingengine.com> <4061A7E7.8070809@twistedmatrix.com>
Message-ID: <1080153544.23236.183256997@webmail.messagingengine.com>

No, I meant a Windows installer for the latest Twisted from the new
subversion repository.  :-)

On Wed, 24 Mar 2004 07:23:19 -0800, "Cory Dodt"
<corydodt at twistedmatrix.com> said:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91
> 
> 1.0.0 is available there (the latest is 1.0.1).  1.0.0 works fine.
> 
> C
> 
> Justin Johnson wrote:
> 
> | Woohooo!
> |
> | Anybody have a windows installer for the latest from subversion?  I got
> | no VS.  :-(
> |
> | -Justin
> |
> | On Tue, 23 Mar 2004 21:30:25 -0500, "Pavel Pergamenshchik"
> | <pp64 at cornell.edu> said:
> |
> |>Support for Windows completion ports is now in Twisted.
> |>Unlike win32reactor, IOCP allows a Twisted application to have a nearly
> |>unlimited amount of open connections. Performance improvements and
> |>process running support will be coming shortly. You can use this
> reactor
> |>by installing it with:
> |>
> |>from twisted.internet import iocp
> |>iocp.install()
> |>
> |>or by using "--reactor=iocp" parameter to trial or twistd.
> |>Suggestions are welcome!
> |>
> |>_______________________________________________
> |>Twisted-Python mailing list
> |>Twisted-Python at twistedmatrix.com
> |>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> |
> |
> | _______________________________________________
> | Twisted-Python mailing list
> | Twisted-Python at twistedmatrix.com
> | http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAYafn3A5SrXAiHQcRApdGAJ9VfI6mJawk5Eu7Cpi9dR//r6U1KQCeK40/
> npswQQaMawJsonQDeXkOjQ4=
> =llgN
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From ralf at brainbot.com  Wed Mar 24 13:44:53 2004
From: ralf at brainbot.com (Ralf Schmitt)
Date: Wed, 24 Mar 2004 19:44:53 +0100
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <1080153544.23236.183256997@webmail.messagingengine.com> (Justin
 Johnson's message of "Wed, 24 Mar 2004 12:39:04 -0600")
References: <20040323213025.24c0e35b.pp64@cornell.edu>
	<1080136086.19681.183237231@webmail.messagingengine.com>
	<4061A7E7.8070809@twistedmatrix.com>
	<1080153544.23236.183256997@webmail.messagingengine.com>
Message-ID: <86fzbykrtm.fsf@stronzo.brainbot.com>

"Justin Johnson" <justinjohnson at fastmail.fm> writes:

> No, I meant a Windows installer for the latest Twisted from the new
> subversion repository.  :-)
>

You can build one yourself without using Visual Studio.
Take a look at http://sebsauvage.net/python/mingw.html.

- Ralf
-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From corydodt at twistedmatrix.com  Wed Mar 24 14:04:36 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 24 Mar 2004 11:04:36 -0800
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <86fzbykrtm.fsf@stronzo.brainbot.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com>
Message-ID: <4061DBC4.3030900@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

For that matter, take a look at Twisted/win32/README.win32 for all about how
it's done.  (You can even build the official installer yourself.)

C

Ralf Schmitt wrote:

| "Justin Johnson" <justinjohnson at fastmail.fm> writes:
|
|
|>No, I meant a Windows installer for the latest Twisted from the new
|>subversion repository.  :-)
|>
|
|
| You can build one yourself without using Visual Studio.
| Take a look at http://sebsauvage.net/python/mingw.html.
|
| - Ralf

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYdvE3A5SrXAiHQcRAvyKAJ9G0nbHSWiz64VUbOvEEI4mF/SX9ACfQAwD
ox4ODSCCjMUkyk1I6kU0Tec=
=WFI2
-----END PGP SIGNATURE-----



From andrew-twisted at puzzling.org  Wed Mar 24 19:02:23 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 25 Mar 2004 11:02:23 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http rewrite, don't look yet.
In-Reply-To: <E1B6HEA-0002cd-00@wolfwood>
References: <E1B6HEA-0002cd-00@wolfwood>
Message-ID: <20040325000223.GA17117@frobozz>

On Wed, Mar 24, 2004 at 03:52:02PM -0700, James Knight wrote:
> Author: foom
> Date: Wed Mar 24 15:52:02 2004
> New Revision: 10392
> 
> Added:
>    trunk/sandbox/foom/
>    trunk/sandbox/foom/web/
>    trunk/sandbox/foom/web/http.py
>    trunk/sandbox/foom/web/http_headers.py
>    trunk/sandbox/foom/web/test_http.py
>    trunk/sandbox/foom/web/test_http_headers.py
> Log:
> Start http rewrite, don't look yet.

Now that we're using a version control system that actually copes with
branching (or so I'm told), why are we still using the sandbox for this
stuff?  Wouldn't branches be better for experimental rewrites like this?

I'm not Subversion expert, so I'm interested in hearing if there's any good
arguments for or against -- but I always assumed that the sandbox directory
was largely a hack we had because CVS sucked.

-Andrew.




From glyph at divmod.com  Wed Mar 24 23:51:48 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Wed, 24 Mar 2004 23:51:48 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <20040324001248.GA10837@titus.home.puzzling.org>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <20040324001248.GA10837@titus.home.puzzling.org>
Message-ID: <20014610-7E18-11D8-9B2F-000393C9700E@divmod.com>


On Mar 23, 2004, at 7:12 PM, Mary Gardiner wrote:

> As for me personally, it's unclear whether this leaves my role as
> documentation editor redundant or not. Certainly, maintaining 
> documents,
> or coordinating the maintainence thereof, for a whole bunch of projects
> on a whole bunch of release cycles is a different, and probably bigger,
> task than maintaining one set of documents for one project. Even the
> latter task is only notionally mine (the time I can devote to Twisted
> documentation is only around 5 hours a week).
>
> If decisions are made affecting this, please let me know. I'm willing 
> to
> provide input if you like, but I'm not often on IRC, that powerhouse of
> Twisted decision-making.

Mary,

Your contributions have been extremely valuable so far, and my main 
concern is that as little change as possible in this transition :).  
Consider that the existing documents form a single book which documents 
a suite of applications.  Some of these applications will be deprecated 
or disappear, and the parts of the book covering them will be removed.  
However, at the moment I don't think it's worthwhile to split 
everything up if that's going to make things harder.

If there is a process change to be made, consider this primarily a 
license for you to solicit more assistance from package maintainers on 
a regular basis...
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040324/da197ab1/attachment.pgp 

From mary-twisted at puzzling.org  Thu Mar 25 00:01:54 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Thu, 25 Mar 2004 16:01:54 +1100
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <20014610-7E18-11D8-9B2F-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <20040324001248.GA10837@titus.home.puzzling.org> <20014610-7E18-11D8-9B2F-000393C9700E@divmod.com>
Message-ID: <20040325050154.GC19207@titus.home.puzzling.org>

On Wed, Mar 24, 2004, Glyph Lefkowitz wrote:
> Your contributions have been extremely valuable so far, and my main
> concern is that as little change as possible in this transition :).
> Consider that the existing documents form a single book which
> documents a suite of applications.  Some of these applications will be
> deprecated or disappear, and the parts of the book covering them will
> be removed.  

The only trouble with this is how to keep the HOWTOs up to date with the
codebase(s). At present, HOWTOs are updated on the main webpage whenever
a major release happens. Bugs are filed against webpage docs at about
twice the rate they're filed against repository docs, so clearly the
webpage docs are regarded as authoritative, and it is important that it
reflects the released codebase.

I suppose the /documents section of the website could be updated
whenever there is *any* release of a Twisted project. That's probably
the smallest possible sensible change.

> If there is a process change to be made, consider this primarily a
> license for you to solicit more assistance from package maintainers on
> a regular basis...

OK!

-Mary



From tv at tv.debian.net  Thu Mar 25 03:38:13 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Thu, 25 Mar 2004 10:38:13 +0200
Subject: [Twisted-Python] woven
In-Reply-To: <A3447493859FB6489E78D3D621B0DB0F568180@TWEXC1.tiwag.at>
References: <A3447493859FB6489E78D3D621B0DB0F568180@TWEXC1.tiwag.at>
Message-ID: <40629A75.2040305@tv.debian.net>

K?lle Wolfgang wrote:
> 
> hello, i am a new python programmer and i have a problem. i hope someone 
> can help me. i have started my webserver on port 80, then i will get a 

First of all, please use the mailing list twisted-web at twistedmatrix.com
for web related issues.

Second, you didn't really explain at all what does not work, or what
information you need.

Third, the full HTML file you included is huge and unreadable; please
try to make your example files simpler and smaller.

http://www.catb.org/~esr/faqs/smart-questions.html



From tv at tv.debian.net  Thu Mar 25 03:47:52 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Thu, 25 Mar 2004 10:47:52 +0200
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
Message-ID: <40629CB8.8000800@tv.debian.net>

Glyph Lefkowitz wrote:
>     from twisted_web import Resource

So, now we have twisted.web, twisted_web and twisted-web.deb, also known
as TwistedWebDeb?


One thing you said relatively little of, but what seems interesting, is
what are the groups of modules likely to be? Core, web, mail, conch, ...
I'm trying to understand how complex the result will be.



From wilk-ml at flibuste.net  Thu Mar 25 10:37:27 2004
From: wilk-ml at flibuste.net (William Dode)
Date: Thu, 25 Mar 2004 16:37:27 +0100
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http
 rewrite, don't look yet.
In-Reply-To: <20040325000223.GA17117@frobozz> (Andrew Bennetts's message of
 "Thu, 25 Mar 2004 11:02:23 +1100")
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>
Message-ID: <87hdwdey4o.fsf@blakie.riol>

I would like to know why you choose subversion and not arch or dracs or
i don't know... I'm also searching for an other versioning system for my
projects and i would like to know the arguments of twisteds zen
developers ;-)
There is also a pythonic system (codeville). So a lot of choice and lot
of pain to choose.

Sorry if it's too much OT.

-- 
William Dod? - http://flibuste.net



From joebrown at rclooke.com  Thu Mar 25 12:42:11 2004
From: joebrown at rclooke.com (Joe Brown)
Date: Thu, 25 Mar 2004 12:42:11 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http rewrite,
 don't look yet.
In-Reply-To: <87hdwdey4o.fsf@blakie.riol>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz> <87hdwdey4o.fsf@blakie.riol>
Message-ID: <406319F3.3080303@rclooke.com>

William Dode wrote:

>I would like to know why you choose subversion and not arch or dracs or
>i don't know... I'm also searching for an other versioning system for my
>projects and i would like to know the arguments of twisteds zen
>developers ;-)
>There is also a pythonic system (codeville). So a lot of choice and lot
>of pain to choose.
>
>Sorry if it's too much OT.
>
>  
>
If your on windows, I'd suggest getting cygwin and use the cvs tools 
that come with it.

In the Linux world, it's so convenient to RCS any file with a simple 
command like ci -l $filename$ and bang, you've got a backup 
($filename$,v) and the start of a simplified versioning system.  Cygwin 
enables you to do this (and a lot more) on windows. 

I'm not the most versed on RCS/CVS, but that's simple enough for me to 
work with.  You can set environment variables, etc, and do the whole 
repository thing to.  But on the fly, you can't beat that for simplicity.

-Joe





From corydodt at twistedmatrix.com  Thu Mar 25 12:54:48 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Thu, 25 Mar 2004 09:54:48 -0800
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http rewrite,
 don't look yet.
In-Reply-To: <87hdwdey4o.fsf@blakie.riol>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz> <87hdwdey4o.fsf@blakie.riol>
Message-ID: <40631CE8.1040307@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

The biggest arguments for Twisted using subversion are:
- - it's a *lot* like CVS, so it's good if you already know CVS
- - it fixes (almost?) all the warts in CVS; addresses are urls, commits are
atomic, copies and branches are O(1), directories and directory properties are
versioned.
- - maturity.. sounds odd if you're aware that they just did a 1.0, but svn has
been in development for about 4 years.  The 1.0 is *stable*.  The 1.0.1,
already out, should be more so.
- - server administration is relatively simple.  The problems you're likely to
encounter administering a server are known problems with solutions.
- - very cross-platform.  windows tools are excellent, Mac ports of the tools
exist, etc.
- - Good support tools; e.g. options to display your repo on the web, buildbot
works with it, there's an emacs mode, ...
- - Good integration with existing access methods, such as ssh.
- - Lots of developers have been experimenting with svn for the last few months
during the run-up to 1.0, so there's mentors available.
- - there's an #svn on freenode, and the developers hang out there, and they
help. :-)
- - it's in Debian (albeit still Debian unstable).

All of these arguments are important to me; each is present in one or more of
the other version control options, but I'm not aware of any other system that
answers all of them at once.  It hardly needs be said that ymmv.

C


William Dode wrote:
| I would like to know why you choose subversion and not arch or dracs or
| i don't know... I'm also searching for an other versioning system for my
| projects and i would like to know the arguments of twisteds zen
| developers ;-)
| There is also a pythonic system (codeville). So a lot of choice and lot
| of pain to choose.
|
| Sorry if it's too much OT.
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYxzo3A5SrXAiHQcRAgy5AJ9dUi7HScg9Wo11aL2jRREq/R4rSQCfbRsn
1UObqPnp5Oiz3gLaeL/loEU=
=Q8dt
-----END PGP SIGNATURE-----



From justinjohnson at fastmail.fm  Thu Mar 25 12:54:20 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Thu, 25 Mar 2004 11:54:20 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <4061DBC4.3030900@twistedmatrix.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com> <4061DBC4.3030900@twistedmatrix.com>
Message-ID: <1080237260.5222.183323777@webmail.messagingengine.com>

Okay, so I got everything setup as the readme states, but I had to fiddle
with my path a bit in cygwin and I'm still having some issues.  The
native python seems to have problems opening cygwin files.

$ aap -f win32/build.aap
c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap'

$ aap.py -f win32/build.aap
c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap.py'

$ echo $PATH
/usr/local/bin:/usr/ccs/bin:/usr/ccs/lib:/usr/bin:/usr/ucb:/etc:/cygdrive/c/MinG
W/bin:/cygdrive/c/aap/Exec:/cygdrive/c/usr/local/wbin:/cygdrive/c/Vim/vim62:/cyg
drive/c/Python23:/cygdrive/c/Python23/scripts:.

$ ls -l /cygdrive/c/aap/Exec/aap.py
-rwxrwxrwx+   1 Administ ????????      438 Aug  7  2003
/cygdrive/c/aap/Exec/aap
.py


Anyone have any ideas?
Thanks.
-Justin

On Wed, 24 Mar 2004 11:04:36 -0800, "Cory Dodt"
<corydodt at twistedmatrix.com> said:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> For that matter, take a look at Twisted/win32/README.win32 for all about
> how
> it's done.  (You can even build the official installer yourself.)
> 
> C
> 
> Ralf Schmitt wrote:
> 
> | "Justin Johnson" <justinjohnson at fastmail.fm> writes:
> |
> |
> |>No, I meant a Windows installer for the latest Twisted from the new
> |>subversion repository.  :-)
> |>
> |
> |
> | You can build one yourself without using Visual Studio.
> | Take a look at http://sebsauvage.net/python/mingw.html.
> |
> | - Ralf
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAYdvE3A5SrXAiHQcRAvyKAJ9G0nbHSWiz64VUbOvEEI4mF/SX9ACfQAwD
> ox4ODSCCjMUkyk1I6kU0Tec=
> =WFI2
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From corydodt at twistedmatrix.com  Thu Mar 25 13:07:54 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Thu, 25 Mar 2004 10:07:54 -0800
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <1080237260.5222.183323777@webmail.messagingengine.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com> <4061DBC4.3030900@twistedmatrix.com> <1080237260.5222.183323777@webmail.messagingengine.com>
Message-ID: <40631FFA.2060205@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ulp, yes.  The whole world has problems opening cygwin paths.  I suggest:

~   - doing the "BARE MINIMUM" install described, which will get you everything
but icons and doc
or
~   - $ alias aap='python C:/aap/Exec/aap'
or
~   - Put cygwin/bin in your global path and run aap.bat from a win32 cmd.exe
prompt (cygwin stuff makes it easier to install mingw, but you don't have to
stay in the cygwin shell environment).


C

Justin Johnson wrote:

| Okay, so I got everything setup as the readme states, but I had to fiddle
| with my path a bit in cygwin and I'm still having some issues.  The
| native python seems to have problems opening cygwin files.
|
| $ aap -f win32/build.aap
| c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap'
|
| $ aap.py -f win32/build.aap
| c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap.py'
|
| $ echo $PATH
| /usr/local/bin:/usr/ccs/bin:/usr/ccs/lib:/usr/bin:/usr/ucb:/etc:/cygdrive/c/MinG
| W/bin:/cygdrive/c/aap/Exec:/cygdrive/c/usr/local/wbin:/cygdrive/c/Vim/vim62:/cyg
| drive/c/Python23:/cygdrive/c/Python23/scripts:.
|
| $ ls -l /cygdrive/c/aap/Exec/aap.py
| -rwxrwxrwx+   1 Administ ????????      438 Aug  7  2003
| /cygdrive/c/aap/Exec/aap
| .py
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYx/63A5SrXAiHQcRAtmKAKCarYO4jEpiXp1KsrxuWrywhxxXcQCfZjGa
ZB5Fu0Lnvf8jcVwAdf2bb9c=
=InKG
-----END PGP SIGNATURE-----



From michael.l.schneider at ugsplm.com  Thu Mar 25 15:11:44 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 25 Mar 2004 15:11:44 -0500
Subject: [Twisted-Python] Sample Script to create Windows Service for Twisted App (1/2)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D54C@uscimplm001.net.plm.eds.com>

First,

A big thanks to Cory for writing the tap2ntsvc, and for helping
me understand how it work (as well as proving to me that
it can work.


In exchange for all his help,  I am sending two .bat files
in 2 messages.

Because of mail filtering,  I am going to include the .bat files
at the end of the messages rather then attach them.

Background:
I have a twisted program that leverages WMI, ctypes, and win32
calls. These all need to be included in the exe.

Lessons Learned:
Microsoft uses different type libraries for XP and 2000, the python
wrappers are created in the site-packages\win32com\gen_py\{GUID}1 for 2000,
 and  site-packages\win32com\gen_py{GUID}2 for XP.

You can create different installers for both, or include them all into
the same service (see the comments in fixup.bat in the 2/2 email)



Have fun,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state> 


------------------ gen.bat---------------------------------------------
rem ------------- BAT file to create Service for twisted app that
rem           uses WMI python module

rem  Author: Michael Scheider
rem  Shadow Author (Cory - he helped me get going, 
re                 and proved to me that it could work)
rem                Cory also wrote the tool to package the system

rem in exchange for all his hard work, I am releasing this script
rem under the same license as Twisted (free)



rem Use this file as a roadmap, but you may need other modules, 
rem Note: if you are not using WMI, you can comment out the
rem       %WIN2000_WMI_MODULES% and the %WINXP_WMI_MODULES% from
rem       tap2ntsvc command line



rem  Twisted Functionality/Python Modules used
rem  
rem  WMI- process and disk info
rem  ctypes - memory info
rem  twisted as web server
rem  twisted xml-rpc
rem  cgi - perl and python
rm   rpy files


rem  Special thanks to Cory to get this going

rem  Version Info
rem    python2.3.3
rem    win32all build 163
rem    py2exe version 1.4.2
rem    inno - latest version

rem Lessons Learned
rem
rem  WMI stashes the com wrappers in site-
rem
rem  Windows 2000 wrapper location= site-packages\win32com\gen_py\565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1
rem  Windows XP wrapper location = site-packages\win32com\gen_py\565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2
rem
rem  NOTE: the numbers are the same except for 2000 uses 1 and XP uses 2
rem        if you want your installer to run on both you will need
rem        to copy the directory from the other machine and include 
rem        both directories


rem ------------------- WMI modules ------------------------
rem the directory 

rem set WINXP_WMI_MODULES=win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemServicesEx,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemObjectEx,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemServicesEx,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.__init__,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemObjectEx,wmi

set WIN2000_WMI_MODULES=win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemObject,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemServices,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemObject,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemServices,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.__init__,wmi


python tap2ntsvc --include twisted.web.server,twisted.web.resource,twisted.web.static,twisted.web.script,gridnode.webinfo,gridnode.JobRunner,gridnode.appconfig,gridnode.sendmail,twisted.internet.win32eventreactor,%WIN2000_WMI_MODULES%  -r win32  d:\grid\gridnoded.tap



From michael.l.schneider at ugsplm.com  Thu Mar 25 15:18:31 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 25 Mar 2004 15:18:31 -0500
Subject: [Twisted-Python] Creating Winows Service from Twisted (2/2)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D54D@uscimplm001.net.plm.eds.com>

This is the 2nd of two mail messages on creating
a Twisted service on Windows.

One important thing to note is that the Windows service
is standalone, and no python install is required for installation.
Thanks Cory,

Mike

How to use-------------
Save this in the moonfallen dir under sandbox along with 
gen.bat from the previous email

1) run gen.bat
2) cd to subdirectory created
3) install service
4) start service
5) if service does not start, you need to add python packages to the 
   include directive.  cd to the subdirectory created in the
   moonfallen directory, edit the include directive in setup.cfg and
   execute  ..\fixup.bat (this bat file)
   repeat until finished
6) edit include portion of gen.bat, adding the python modules that
   you added during the fixup step.
7) the next time you run gen.bat, the windows installer should be
   ready to go (unless you added more python modules in your code since
   the last build).

hope this helps,
Thanks again Cory,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


--------------------- fixup.bat --------------------
rem   python twisted service fixup
rem   drop this file (fixup.bat) into sandbox/moonfallen
rem
rem
rem  Have Fun!!!!!!!  
rem  Michael Schneider
rem
rem

rem  step to bring up  a service

rem 1) run tap2ntsvc  (see gen.bat file)
rem 2) install service
rem 3) If service doesn't start, or part of the application 
rem    fails with can't find module ...
rem     3a) edit setup.cvf to add the missing python module in the
rem         include section
rem     3b) run this script
rem     3c) repeat
rem 4) update gen.bat with any python modules you added in step 3
rem
rem
rem If you are bringing in com code, It is important to realize that
rem Microsoft uses different type libs for XP and 2000
rem 
rem You have 2 choices at this point:
rem     - use two installers (1 for each platform)
rem     - create 1 installer

rem  if you go for 2, just follow the instruction above for each
rem  installer.

rem  If you opt for 1 installer here is your steps
rem  1) select a "master" platform to create the OS
rem  2) run you test cases on this machine against the twisted
rem     application that you wish to create a servcie.
rem     This step is necessary to create the COM wrappers in
rem     wincom32/gen_py/GUI
rem  3) follow the steps above to create a service for one platform
rem     NOTE: to save you time, just go ahead and add the COM wrappers
rem           in site-packages/win32com/gen_py/{GUID}/{all
rem           wrappers}.py
rem   
rem  4) go to your other platform (XP or windows}
rem  5) run test cases on this platforms
rem  6) go to site-packages/win32com
rem  7) Notice that the GUID is the same except for the last digit
rem       {GUID}x1 for windows 2000
rem       {GUID}x2  for XP
rem  8) zip up the {GUID} dir
rem  9) copy this zip to the win32com directory of your "master"
rem     service build machine.
rem  10) unzip, creating to {GUID} dirs, with the only differces being
rem      the ending digit (x1,  or x2)
rem  11) Add these to the gen.bat (note: if 2000 is your master
rem      machine, you may not have sufficient environment variable
rem      space to pass in all includes, if this is the case
rem           11a) rebuild service for master only
rem           11b) edit setup.cfg to add com wrappers from other
rem                system
rem           11c) run this script to create a service that contains
rem                the com wrappers for both platforms
rem
rem YOU ARE DONE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!




rem  cd to service directory under moonfallen dir in sandbox
python setup.py py2exe
python do_inno_script.py
python do_inno.py



From wilk-ml at flibuste.net  Fri Mar 26 04:56:19 2004
From: wilk-ml at flibuste.net (William Dode)
Date: Fri, 26 Mar 2004 10:56:19 +0100
Subject: [Twisted-Python] versioning system [was r10392 - Start http rewrite, don't look
 yet.]
In-Reply-To: <40631CE8.1040307@twistedmatrix.com> (Cory Dodt's message of
 "Thu, 25 Mar 2004 09:54:48 -0800")
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>
	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com>
Message-ID: <871xnglynw.fsf_-_@blakie.riol>

Thanks for all theses arguments.
I read one things, (but maybe i'm wrong ?) that subversion need
apache2. When arch can be used with any http server, and so
twistedmatrix for example :-)
I would like to replace apache by twisted for everythings, so this
question is important for me.

-- 
William Dod? - http://flibuste.net



From justinjohnson at fastmail.fm  Fri Mar 26 10:12:53 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Fri, 26 Mar 2004 09:12:53 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <40631FFA.2060205@twistedmatrix.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com> <4061DBC4.3030900@twistedmatrix.com> <1080237260.5222.183323777@webmail.messagingengine.com> <40631FFA.2060205@twistedmatrix.com>
Message-ID: <1080313973.4904.183378602@webmail.messagingengine.com>

The bare minimum method is working for me.  Thanks for the help.

-Justin

On Thu, 25 Mar 2004 10:07:54 -0800, "Cory Dodt"
<corydodt at twistedmatrix.com> said:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Ulp, yes.  The whole world has problems opening cygwin paths.  I suggest:
> 
> ~   - doing the "BARE MINIMUM" install described, which will get you
> everything
> but icons and doc
> or
> ~   - $ alias aap='python C:/aap/Exec/aap'
> or
> ~   - Put cygwin/bin in your global path and run aap.bat from a win32
> cmd.exe
> prompt (cygwin stuff makes it easier to install mingw, but you don't have
> to
> stay in the cygwin shell environment).
> 
> 
> C
> 
> Justin Johnson wrote:
> 
> | Okay, so I got everything setup as the readme states, but I had to
> fiddle
> | with my path a bit in cygwin and I'm still having some issues.  The
> | native python seems to have problems opening cygwin files.
> |
> | $ aap -f win32/build.aap
> | c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap'
> |
> | $ aap.py -f win32/build.aap
> | c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap.py'
> |
> | $ echo $PATH
> |
> /usr/local/bin:/usr/ccs/bin:/usr/ccs/lib:/usr/bin:/usr/ucb:/etc:/cygdrive/c/MinG
> |
> W/bin:/cygdrive/c/aap/Exec:/cygdrive/c/usr/local/wbin:/cygdrive/c/Vim/vim62:/cyg
> | drive/c/Python23:/cygdrive/c/Python23/scripts:.
> |
> | $ ls -l /cygdrive/c/aap/Exec/aap.py
> | -rwxrwxrwx+   1 Administ ????????      438 Aug  7  2003
> | /cygdrive/c/aap/Exec/aap
> | .py
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAYx/63A5SrXAiHQcRAtmKAKCarYO4jEpiXp1KsrxuWrywhxxXcQCfZjGa
> ZB5Fu0Lnvf8jcVwAdf2bb9c=
> =InKG
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From justinjohnson at fastmail.fm  Fri Mar 26 10:20:45 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Fri, 26 Mar 2004 09:20:45 -0600
Subject: [Twisted-Python] SFTP Server and Cred Example?
Message-ID: <1080314445.7128.183378640@webmail.messagingengine.com>

Does anyone have an example of how to use
twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
cred?



From z3p at twistedmatrix.com  Fri Mar 26 10:33:10 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Fri, 26 Mar 2004 10:33:10 -0500
Subject: [Twisted-Python] SFTP Server and Cred Example?
In-Reply-To: <1080314445.7128.183378640@webmail.messagingengine.com>
References: <1080314445.7128.183378640@webmail.messagingengine.com>
Message-ID: <1080315164.1458.3.camel@petra>

On Fri, 2004-03-26 at 10:20, Justin Johnson wrote:
> Does anyone have an example of how to use
> twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
> cred?

t.c.s.ft.SFTPServerForUnixConchUser is an example adapter from
UnixConchUser (which implements IConchUser (what cred gives for a
logged-in Conch user) to ISFTPServer.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040326/e5413583/attachment.pgp 

From andy at thecablelounge.com  Fri Mar 26 21:40:16 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 27 Mar 2004 12:40:16 +1000
Subject: [Twisted-Python] SFTP Server and Cred Example?
In-Reply-To: <1080315164.1458.3.camel@petra>
References: <1080314445.7128.183378640@webmail.messagingengine.com> <1080315164.1458.3.camel@petra>
Message-ID: <4064E990.8050003@thecablelounge.com>

Paul Swartz wrote:

> On Fri, 2004-03-26 at 10:20, Justin Johnson wrote:
> 
>>Does anyone have an example of how to use
>>twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
>>cred?
> 
> t.c.s.ft.SFTPServerForUnixConchUser is an example adapter from
> UnixConchUser (which implements IConchUser (what cred gives for a
> logged-in Conch user) to ISFTPServer.

Justin out of interest did you have an example of what you'd like to do?

Andy.




From andy at thecablelounge.com  Fri Mar 26 21:46:54 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 27 Mar 2004 12:46:54 +1000
Subject: [Twisted-Python] Multiple Cred Checkers and Avatar Types
Message-ID: <4064EB1E.9060302@thecablelounge.com>

Hey all,

Is it possible to tie the type of avatar a realm returns to the cred 
checker which successfully authenticated the user?  For example, if the 
user requesting a IConchUser interface authenticates against the unix 
password file the realm would know to return a UnixConchUser - if the 
authenticated against a smbpasswordish like file they realm would return 
a SmbishConchUser.

Is this not the right way to be thinking of cred?

Any advice is greatly appreciated,
Andy.



From radix at twistedmatrix.com  Sat Mar 27 18:45:09 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 27 Mar 2004 18:45:09 -0500
Subject: [Twisted-Python] versioning system [was r10392 - Start http rewrite,
 don't look yet.]
In-Reply-To: <871xnglynw.fsf_-_@blakie.riol>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com> <871xnglynw.fsf_-_@blakie.riol>
Message-ID: <40661205.2070506@twistedmatrix.com>

William Dode wrote:
> Thanks for all theses arguments.
> I read one things, (but maybe i'm wrong ?) that subversion need
> apache2. When arch can be used with any http server, and so
> twistedmatrix for example :-)
> I would like to replace apache by twisted for everythings, so this
> question is important for me.

Nope. We use inetd (for anon-readonly) and ssh (for auth-write) for svn 
on twistedmatrix.com (and divmod does it that way, too).

Apache2 offers sub-repository granularity on permissions, but then, so 
do repository hooks that come with subversion.

Speaking of hooks, I wonder if it's possible to have one that prevents 
people from making mistakes like checking out /, /branches, and /tags. 
Does that sound like a good idea? It does to me.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040327/3f59ce2e/attachment.pgp 

From justinjohnson at fastmail.fm  Sat Mar 27 21:07:40 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Sat, 27 Mar 2004 20:07:40 -0600
Subject: [Twisted-Python] SFTP Server and Cred Example?
In-Reply-To: <4064E990.8050003@thecablelounge.com>
References: <1080314445.7128.183378640@webmail.messagingengine.com> <1080315164.1458.3.camel@petra> <4064E990.8050003@thecablelounge.com>
Message-ID: <1080439660.26618.183438863@webmail.messagingengine.com>

Yeah, I have an admin tool for Rational ClearCase written using Twisted. 
For ClearCase MultiSite, a repository can be replicated to a different
server and kept up-to-date by sending packets to the server at regular
intervals.  The method ClearCase uses for shipping requires like 60,000
ports to be open which is pretty messed up.  I wanted to have a solution
with an SFTP server and client both implemented in twisted as an
alternative shipping method.  I wanted it implemented in twisted just
because that's what everything else is implemented in and it'd be cool to
not rely on any other software.

So I'd just run a command that creates a packet, and then send it over
via SFTP.  And ideally it'd be hooked up to cred so I can use the same
user db I use for the rest of the application.

Does that answer your question?

-Justin


On Sat, 27 Mar 2004 12:40:16 +1000, "Andy Gayton"
<andy at thecablelounge.com> said:
> Paul Swartz wrote:
> 
> > On Fri, 2004-03-26 at 10:20, Justin Johnson wrote:
> > 
> >>Does anyone have an example of how to use
> >>twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
> >>cred?
> > 
> > t.c.s.ft.SFTPServerForUnixConchUser is an example adapter from
> > UnixConchUser (which implements IConchUser (what cred gives for a
> > logged-in Conch user) to ISFTPServer.
> 
> Justin out of interest did you have an example of what you'd like to do?
> 
> Andy.
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From paul at soniq.net  Sun Mar 28 04:27:37 2004
From: paul at soniq.net (Paul Boehm)
Date: Sun, 28 Mar 2004 11:27:37 +0200
Subject: [Twisted-Python] Two Suggestions and one Question
Message-ID: <20040328092737.GB1456@xenian.net>

1) Interface Based Service Discovery
"hey, is there a Service running that provides IStatistics, or can you
start one. If so, give me a reference"

2) Move deprecated interfaces into seperate files (makes both reading
the source, and the generated documentation more pleasurable), that are
(possibly conditionally) imported via from *. 

3) How's the status on pyprotocols and logging module integration?

regards,
  paul



From wilk-ml at flibuste.net  Sun Mar 28 07:27:26 2004
From: wilk-ml at flibuste.net (William Dode)
Date: Sun, 28 Mar 2004 14:27:26 +0200
Subject: [Twisted-Python] versioning system [was r10392 - Start http
 rewrite, don't look yet.]
In-Reply-To: <40661205.2070506@twistedmatrix.com> (Christopher Armstrong's
 message of "Sat, 27 Mar 2004 18:45:09 -0500")
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>
	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com>
	<871xnglynw.fsf_-_@blakie.riol> <40661205.2070506@twistedmatrix.com>
Message-ID: <87u109ma1d.fsf@blakie.riol>

Christopher Armstrong <radix at twistedmatrix.com> writes:

> William Dode wrote:
>> Thanks for all theses arguments.
>> I read one things, (but maybe i'm wrong ?) that subversion need
>> apache2. When arch can be used with any http server, and so
>> twistedmatrix for example :-)
>> I would like to replace apache by twisted for everythings, so this
>> question is important for me.
>
> Nope. We use inetd (for anon-readonly) and ssh (for auth-write) for
> svn on twistedmatrix.com (and divmod does it that way, too).

ok i see

>
> Apache2 offers sub-repository granularity on permissions, but then, so
> do repository hooks that come with subversion.
>
> Speaking of hooks, I wonder if it's possible to have one that prevents
> people from making mistakes like checking out /, /branches, and
> /tags. Does that sound like a good idea? It does to me.

I don't understand what you mean...

-- 
William Dod? - http://flibuste.net



From michael.l.schneider at ugsplm.com  Sun Mar 28 10:26:16 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Sun, 28 Mar 2004 10:26:16 -0500
Subject: [Twisted-Python] Windows IOCP reactor Question
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D54E@uscimplm001.net.plm.eds.com>

Thanks for the work on IOCP,

I really appriecaite the efforts and will make use of
it.


I am an old UNIX hacker, and I am delivering a Windows
project with twisted.

I am about as far away from a windows programmer that you
can get.

I did have to get memory info from the Widows OS.

I was going to use C, but then I found ctypes and the
struct python C struct wrapper.

It was nice to have a python only solution.  

As I was looking through the code in iocpcoreobject.c.
I noticed that most (maybe all) of the functionality could
be accessed by the ctypes module and the Struct package.

Being a newbie to windows programming, I am not comfortable 
making the definitive statement that it should use this, and
elimintate the C code.  

Instead I would like to ask the question.  Does anyone see
a problem replacing the  C code in iocpcoreobject.c with
a python module that leverages ctype.

I attached a simple python script that gets the memory from
a windows box using ctypes.

It would be very nice if no c compiler would be required to 
install twisted IOCP reactor from CVS.

Thanks,
Mike

-------------------------------------------------------

#!/usr/bin/env python

# Simple WMI and ctypes example
# Michael Schnedier

import os
import time

import wmi
from ctypes import *
from ctypes.wintypes import *
import win32api

class MEMORYSTATUS(Structure):
    _fields_ = [
        ('dwLength', DWORD),
        ('dwMemoryLoad', DWORD),
        ('dwTotalPhys', DWORD),
        ('dwAvailPhys', DWORD),
        ('dwTotalPageFile', DWORD),
        ('dwAvailPageFile', DWORD),
        ('dwTotalVirtual', DWORD),
        ('dwAvailVirtual', DWORD),
    ]


class ComputeNode:
    def __init__(self):      
        self.memInfo = None
        self.lastUpdate = time.time()
        self.update()
   

    def genMemoryXmlStringRep(self):
        self.validate()

        xmlString = \
"""<?xml version="1.0"?>
<MemoryInfo platform="windows"     
TotalPhysicalMemory="%d" 
AvailablePhysicalMemory="%d" 
TotalPageFileSize="%d" 
AvailPageFileSize="%d" 
GetTotalVirtualMemory="%d" 
GetAvailableVirtualMemory="%d" 
/>
"""%( self.getTotalPhysicalMemory(),
       self.getAvailPhysicalMemory(),
       self.getTotalPageFileSize(),
       self.getAvailPageFile(),
       self.getTotalVirtualMemory(),
       self.getAvailVirtualMemory())

        return xmlString

   

    def getTotalPhysicalMemory(self):
        self.validate()
        return self.memInfo.dwTotalPhys/1024/1024

    def getAvailPhysicalMemory(self):
        self.validate()
        return self.memInfo.dwAvailPhys/1024/1024

    def getTotalPageFileSize(self):
        self.validate()
        return self.memInfo.dwTotalPageFile/1024/1024

    def getAvailPageFile(self):
        self.validate()
        return self.memInfo.dwAvailPageFile/1024/1024

    def getTotalVirtualMemory(self):
        self.validate()
        return self.memInfo.dwTotalVirtual/1024/1024

    def getAvailVirtualMemory(self):
        self.validate()
        return self.memInfo.dwAvailVirtual/1024/1024

    def validate(self, deltaTrigger=60 ):
        deltaTime = time.time() - self.lastUpdate
        
        if (self.lastUpdate < 0) or (deltaTime > deltaTrigger):      
            self.update()

      
    def update(self):
        self.lastUpdate = time.time()

        newStatus = MEMORYSTATUS()
        windll.kernel32.GlobalMemoryStatus(byref(newStatus))
        self.memInfo =  newStatus
         


machineInfo = ComputeNode()

print machineInfo.genMemoryXmlStringRep()





Since
the C code seems to be a wrapper to COM services, and
registration of COM service I am curious

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"
> 



From glyph at divmod.com  Sun Mar 28 15:59:25 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Sun, 28 Mar 2004 15:59:25 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <40629CB8.8000800@tv.debian.net>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net>
Message-ID: <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>


On Mar 25, 2004, at 3:47 AM, Tommi Virtanen wrote:

> Glyph Lefkowitz wrote:
>>     from twisted_web import Resource
>
> So, now we have twisted.web, twisted_web and twisted-web.deb, also 
> known
> as TwistedWebDeb?

twisted.web == twisted_web

We really need to get TwistedWebDeb distributed along with the 
codebase, so that we can have similar running mechanisms for UNIXes 
(and an obvious empty spot where a win32 mechanism would go).

A number of people at PyCon pointed me at pkgutil, which may eliminate 
the need for the underscore in the package name.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040328/2c1d54b6/attachment.pgp 

From sflist at ihonk.com  Sun Mar 28 23:20:17 2004
From: sflist at ihonk.com (Steve Freitas)
Date: Sun, 28 Mar 2004 20:20:17 -0800
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
In-Reply-To: <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net> <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>
Message-ID: <200403282019.01193.sflist@ihonk.com>

Hi all,

I'm working on a chat server-ish kinda thang, and although the learning curve 
of twisted was a bit much for my last project, I'm back again for more 
punishment. In this case, I'm looking to broadcast a message from one client 
to other connected clients. I came up with a solution, but I wanted to run it 
by you guys to see whether what I'm doing is The Right Way To Do Things.

Here's what I did for my simple prototype that takes any message received from 
a client and sends it to all clients (including the sender):

-----------

factory = Factory()
factory.transports = []

class Chatterbox(Protocol):

    def connectionMade(self):
	# Make a copy of the new connection's transport and
	# stick it somewhere all the Chatterbox instances can
	# get to it.
        self.factory.transports.append(self.transport)

    def dataReceived(self, data):
	# Every time a piece of data comes in, just write it back
	# out to all the transports, ergo, clients.
        for transport in self.factory.transports:
             transport.write(data)

    def connectionLost(self, reason):
	# When a client disconnects, delete the copy of their
	# transport. Bet this'll be slow w/ lotso clients.
        self.factory.transports.remove(self.transport)

factory.protocol = Chatterbox
reactor.listenTCP(8008, factory)
reactor.run()

-----------

What do you think? Is this a properly twisted way to do things? Strike anyone 
as needlessly inefficient? I'm motivated to make it as fast as possible, so 
despite what Knuth said, any proferred optimizations would be great to hear. 
(On a related note, I intend to put the for loop into a map, but I haven't 
yet embarked on language optimizations, and this question's more about 
Twisted.)

Also, I'm obviously, and perhaps incorrectly, assuming that once a transport 
object is created, it never gets changed. If it does, the copy I made won't 
be updated -- is this a problem?

A definite problem with this method is that it sends the data right back to 
the sender, which actually isn't desirable for my application. Trouble is, to 
avoid it I think I'd have to do this...

    def dataReceived(self, data):
        for transport in self.factory.transports:
		if transport != self.transport:
	             transport.write(data)

Seems an inefficient way to do things, as I'd like this server to handle 
thousands of clients.

Anyway, any help would be appreciated. :-)

Thanks,

Steve



From tim.stebbing at nunatak.com.au  Mon Mar 29 00:04:41 2004
From: tim.stebbing at nunatak.com.au (Tim Stebbing)
Date: Mon, 29 Mar 2004 15:04:41 +1000
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
In-Reply-To: <200403282019.01193.sflist@ihonk.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net> <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com> <200403282019.01193.sflist@ihonk.com>
Message-ID: <4067AE69.7040005@nunatak.com.au>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


| Here's what I did for my simple prototype that takes any message
| received from a client and sends it to all clients (including the
| sender):

alternativly, you could use PB and share some sort of 'talker' object
between all connections. this would allow a client to simply do:

talker.callRemote("write", "hello world")

and have everyone else recieve it. I get the feeling the pb/cred combo
would be ideal for what your trying to do. Check it out:
http://www.twistedmatrix.com/documents/current/howto/pb-intro
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAZ65oQAUUJNWKvroRAgiCAKCFBpqPOaMVROPos2a6+kGP8Kf+EwCeNyTA
s3O/hBbtmSdJtONrM3c88eQ=
=BXEp
-----END PGP SIGNATURE-----




From z3p at twistedmatrix.com  Mon Mar 29 01:27:42 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Mon, 29 Mar 2004 01:27:42 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph
	Lefkowitz)
In-Reply-To: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
Message-ID: <1080541662.1518.13.camel@petra>

On Tue, 2004-03-23 at 14:00, Glyph Lefkowitz wrote:
> As far as our development process, we will be keeping all the code in 
> one subversion repository and still running BuildBot over the entire 

What does this mean for the licensing of the packages?  Will new
versions of split-out packages still be copyright to Glyph, or will they
move to a developer for that package?

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040329/90f6f0b5/attachment.pgp 

From sflist at ihonk.com  Mon Mar 29 02:06:12 2004
From: sflist at ihonk.com (Steve Freitas)
Date: Sun, 28 Mar 2004 23:06:12 -0800
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
In-Reply-To: <4067AE69.7040005@nunatak.com.au>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <200403282019.01193.sflist@ihonk.com> <4067AE69.7040005@nunatak.com.au>
Message-ID: <200403282306.12474.sflist@ihonk.com>

On Sunday 28 March 2004 9:04 pm, Tim Stebbing wrote:

> alternativly, you could use PB and share some sort of 'talker' object
> between all connections. this would allow a client to simply do:
>
> talker.callRemote("write", "hello world")
>
> and have everyone else recieve it. I get the feeling the pb/cred combo
> would be ideal for what your trying to do. Check it out:
> http://www.twistedmatrix.com/documents/current/howto/pb-intro

Unfortunately, I haven't got Python on both ends of the wire here. I've got 
Twisted/Python on one side, and C++ or similar on the other end. So unless 
I'm wrong about PB, I don't think it'll apply here. Cred looks useful, 
though. Thanks!

Steve



From michael.l.schneider at ugsplm.com  Mon Mar 29 07:43:11 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 29 Mar 2004 07:43:11 -0500
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A21740@uscimplm001.net.plm.eds.com>

I am in a similar situation.  I am use twisted a grid
server for each node on the computer.

I need to send info like "

- I am online
- Job started
- Job completed
- Ready for job

I am getting ready to prototype with jabber.  Any other thought?

Thanks
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Steve
> Freitas
> Sent: Sunday, March 28, 2004 11:20 PM
> To: twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] The right way to broadcast to your TCP/IP
> clients?
> 
> 
> Hi all,
> 
> I'm working on a chat server-ish kinda thang, and although 
> the learning curve 
> of twisted was a bit much for my last project, I'm back again 
> for more 
> punishment. In this case, I'm looking to broadcast a message 
> from one client 
> to other connected clients. I came up with a solution, but I 
> wanted to run it 
> by you guys to see whether what I'm doing is The Right Way To 
> Do Things.
> 
> Here's what I did for my simple prototype that takes any 
> message received from 
> a client and sends it to all clients (including the sender):
> 
> -----------
> 
> factory = Factory()
> factory.transports = []
> 
> class Chatterbox(Protocol):
> 
>     def connectionMade(self):
> 	# Make a copy of the new connection's transport and
> 	# stick it somewhere all the Chatterbox instances can
> 	# get to it.
>         self.factory.transports.append(self.transport)
> 
>     def dataReceived(self, data):
> 	# Every time a piece of data comes in, just write it back
> 	# out to all the transports, ergo, clients.
>         for transport in self.factory.transports:
>              transport.write(data)
> 
>     def connectionLost(self, reason):
> 	# When a client disconnects, delete the copy of their
> 	# transport. Bet this'll be slow w/ lotso clients.
>         self.factory.transports.remove(self.transport)
> 
> factory.protocol = Chatterbox
> reactor.listenTCP(8008, factory)
> reactor.run()
> 
> -----------
> 
> What do you think? Is this a properly twisted way to do 
> things? Strike anyone 
> as needlessly inefficient? I'm motivated to make it as fast 
> as possible, so 
> despite what Knuth said, any proferred optimizations would be 
> great to hear. 
> (On a related note, I intend to put the for loop into a map, 
> but I haven't 
> yet embarked on language optimizations, and this question's 
> more about 
> Twisted.)
> 
> Also, I'm obviously, and perhaps incorrectly, assuming that 
> once a transport 
> object is created, it never gets changed. If it does, the 
> copy I made won't 
> be updated -- is this a problem?
> 
> A definite problem with this method is that it sends the data 
> right back to 
> the sender, which actually isn't desirable for my 
> application. Trouble is, to 
> avoid it I think I'd have to do this...
> 
>     def dataReceived(self, data):
>         for transport in self.factory.transports:
> 		if transport != self.transport:
> 	             transport.write(data)
> 
> Seems an inefficient way to do things, as I'd like this 
> server to handle 
> thousands of clients.
> 
> Anyway, any help would be appreciated. :-)
> 
> Thanks,
> 
> Steve
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From corydodt at twistedmatrix.com  Mon Mar 29 11:23:15 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Mon, 29 Mar 2004 08:23:15 -0800
Subject: [Twisted-Python] versioning system [was r10392 - Start http rewrite,
 don't look yet.]
In-Reply-To: <40661205.2070506@twistedmatrix.com>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com> <871xnglynw.fsf_-_@blakie.riol> <40661205.2070506@twistedmatrix.com>
Message-ID: <40684D73.3010005@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Not possible with hooks.  Hooks only fire during the commit process.  I can't
think of any way to do that, in fact, off the top of my head.

C

Christopher Armstrong wrote:
| William Dode wrote:
|
| Speaking of hooks, I wonder if it's possible to have one that prevents
| people from making mistakes like checking out /, /branches, and /tags.
| Does that sound like a good idea? It does to me.
|
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAaE1z3A5SrXAiHQcRAsXLAJ4kQ8C3cdpp26ffZ1vwmtp4lgXjUwCgjz6o
c4ae5s90jS0eiTvyZXIrxWI=
=GKC3
-----END PGP SIGNATURE-----



From corydodt at twistedmatrix.com  Mon Mar 29 11:26:03 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Mon, 29 Mar 2004 08:26:03 -0800
Subject: [Twisted-Python] Windows IOCP reactor Question
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB538D54E@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB538D54E@uscimplm001.net.plm.eds.com>
Message-ID: <40684E1B.3070208@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


| It would be very nice if no c compiler would be required to
| install twisted IOCP reactor from CVS.
|

Maybe it's time to have win32 buildbot start publishing win32 builds somewhere
so people on Windows can download nightlies.

C

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAaE4b3A5SrXAiHQcRAoaRAJ44QyCeJsN6H4wKUWN2JFg2jtKBvQCfVpMe
nWqo+4V78VMn9Nw+YzebnrE=
=Rwjb
-----END PGP SIGNATURE-----



From pf_moore at yahoo.co.uk  Mon Mar 29 13:44:04 2004
From: pf_moore at yahoo.co.uk (Paul Moore)
Date: Mon, 29 Mar 2004 19:44:04 +0100
Subject: [Twisted-Python] Re: Twisted Euphrates (Modified by Glyph Lefkowitz)
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net>
 <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>
Message-ID: <1xnbtrwr.fsf@yahoo.co.uk>

Glyph Lefkowitz <glyph at divmod.com> writes:

> A number of people at PyCon pointed me at pkgutil, which may eliminate
> the need for the underscore in the package name.

That would be good, as I hate the underscore in the name :-) Why can't
the package still be called twisted.web, but be distributed
separately (if that's the issue here)?

Paul.
-- 
This signature intentionally left blank




From michael.l.schneider at ugsplm.com  Mon Mar 29 13:45:38 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 29 Mar 2004 13:45:38 -0500
Subject: [Twisted-Python] Windows IOCP reactor Question
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A21742@uscimplm001.net.plm.eds.com>

If it is possible,  that would be great!!!!

Thanks
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Cory Dodt
> Sent: Monday, March 29, 2004 11:26 AM
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] Windows IOCP reactor Question
> 
> 
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> 
> | It would be very nice if no c compiler would be required to
> | install twisted IOCP reactor from CVS.
> |
> 
> Maybe it's time to have win32 buildbot start publishing win32 
> builds somewhere
> so people on Windows can download nightlies.
> 
> C
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAaE4b3A5SrXAiHQcRAoaRAJ44QyCeJsN6H4wKUWN2JFg2jtKBvQCfVpMe
> nWqo+4V78VMn9Nw+YzebnrE=
> =Rwjb
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From glyph at divmod.com  Mon Mar 29 14:34:21 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Mon, 29 Mar 2004 14:34:21 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <1080541662.1518.13.camel@petra>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <1080541662.1518.13.camel@petra>
Message-ID: <141166A2-81B8-11D8-9177-000393C9700E@divmod.com>


On Mar 29, 2004, at 1:27 AM, Paul Swartz wrote:

> What does this mean for the licensing of the packages?  Will new
> versions of split-out packages still be copyright to Glyph, or will 
> they
> move to a developer for that package?

I don't know.  I'd like to have a centralized copyright structure so 
that we can move it to a foundation (in the ever-nearer future) but 
that still involves inconvenient paperwork.  Not to mention the fact 
that copyright is the only enforceable form of attribution, and I think 
it's unfair that so many major contributors don't really have a 
signature on Twisted in any significant way.  With BSD-licensed 
software, the possible problems with the license are so small that it 
seems unlikely that disparate copyrights would cause a problem...

I should really talk to a lawyer about this, and to a few key 
contributors.  I have a feeling I already know what some of them are 
going to say ;).  The lawyer I discussed this with last time has moved 
on, and the other intelprop lawyers I know aren't really in this space 
- does anyone know a good (cheap ^_^) lawyer with F/OSS experience who 
has the time to help?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040329/e8b85f7e/attachment.pgp 

From justinjohnson at fastmail.fm  Mon Mar 29 16:51:54 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Mon, 29 Mar 2004 15:51:54 -0600
Subject: [Twisted-Python] IOCP Reactor Problem
Message-ID: <1080597114.15499.183530866@webmail.messagingengine.com>

When I try to use the new IOCP reactor (latest from svn) I get the
following errors.  The only thing being started up is a nevow web site. 
This worked when using win32reactor.

Anyone have any ideas?  Let me know if more info is needed.

Thanks.
-Justin


2004/03/29 15:44 Central Standard Time [-] Traceback (most recent call
last):
          File "C:\Python23\Lib\site-packages\twisted\protocols\http.py",
          line 554, in requestReceived
            self.process()
          File "C:\svn\RatControl\nevow\appserver.py", line 130, in
          process
            return self.site.getResourceFor(
          File "C:\svn\RatControl\nevow\appserver.py", line 277, in
          getResourceFor
            return self.resourceAtPathOfRequest(request)
          File "C:\svn\RatControl\nevow\appserver.py", line 290, in
          resourceAtPathOfRequest
            return defer.maybeDeferred(res.locateChild, request,
            path).addCallback(
        --- <exception caught here> ---
          File "C:\Python23\Lib\site-packages\twisted\internet\defer.py",
          line 129, in maybeDeferred
            result = f(*args, **kw)
          File "C:\svn\RatControl\nevow\guard.py", line 188, in
          locateChild
            prepath = request.prePathURL()
          File "C:\Python23\Lib\site-packages\twisted\web\server.py",
          line 345, in prePathURL
            inet, addr, port = self.getHost()
        exceptions.TypeError: unpack non-sequence

2004/03/29 15:44 Central Standard Time [-] html is not a string:  None
2004/03/29 15:44 Central Standard Time [-] None - - [29/Mar/2004:21:44:54
+0000]
 "GET /results HTTP/1.1" 500 5773 "http://localhost:8888/rmvob"
 "Mozilla/5.0 (Wi
ndows; U; Windows NT 5.0; en-US; rv:1.6) Gecko/20040206 Firefox/0.8"



From bob at redivi.com  Mon Mar 29 19:49:23 2004
From: bob at redivi.com (Bob Ippolito)
Date: Mon, 29 Mar 2004 19:49:23 -0500
Subject: [Twisted-Python] Re: Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <1xnbtrwr.fsf@yahoo.co.uk>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net> <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com> <1xnbtrwr.fsf@yahoo.co.uk>
Message-ID: <16C0D6AA-81E4-11D8-93BA-000A95686CD8@redivi.com>


On Mar 29, 2004, at 1:44 PM, Paul Moore wrote:

> Glyph Lefkowitz <glyph at divmod.com> writes:
>
>> A number of people at PyCon pointed me at pkgutil, which may eliminate
>> the need for the underscore in the package name.
>
> That would be good, as I hate the underscore in the name :-) Why can't
> the package still be called twisted.web, but be distributed
> separately (if that's the issue here)?

That is precisely what pkgutil allows, if I remember correctly.

-bob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2357 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040329/f1e29bb7/attachment.bin 

From dialtone at aruba.it  Wed Mar 31 02:33:58 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 09:33:58 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
Message-ID: <406A7466.3090800@aruba.it>

Hi all,
attached you will find my rss-aggregator made with twisted.

It's really fast although when I tried with 745 feeds I got some problems.
When the download reached 300 parsed feeds (more or less) it locked till 
I pressed Ctrl+C and then it
processed the remaining 340 feeds in less than 30 seconds... I think 
that my design has at least an issue
but  I cannot find it so easily and I hope someone on this list can help 
me to improve it.

The "script" is heavily commented.

BTW When it finishes (with all 740 feeds) it reports an awesome 330 
seconds which is an impressive time, less than half a second
for each feed, and It downloads more than 50Mb of feeds from the net 
(with 745 feeds to download).

Thx for your help.

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: twisted-rss.py
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040331/ef318972/attachment.txt 

From andrew-twisted at puzzling.org  Wed Mar 31 05:39:27 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 31 Mar 2004 20:39:27 +1000
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <406A7466.3090800@aruba.it>
References: <406A7466.3090800@aruba.it>
Message-ID: <20040331103927.GA8642@frobozz>

On Wed, Mar 31, 2004 at 09:33:58AM +0200, Valentino Volonghi aka Dialtone wrote:
> Hi all,
> attached you will find my rss-aggregator made with twisted.
> 
> It's really fast although when I tried with 745 feeds I got some problems.
> When the download reached 300 parsed feeds (more or less) it locked till 
> I pressed Ctrl+C and then it
> processed the remaining 340 feeds in less than 30 seconds... I think 
> that my design has at least an issue
> but  I cannot find it so easily and I hope someone on this list can help 
> me to improve it.

By default, Twisted uses the platform name resolver, which is blocking.
Perhaps a non-existent domain is causing gethostbyname to block?

You should be able to test this theory by installing Twisted's resolver:

    from twisted.names import client
    reactor.installResolver(client.createResolver())

client.createResolver makes a resonable effort to use your system's DNS
configuration (by looking at /etc/resolve.conf on posix systems, for
example), so it should work without any special arguments.

> The "script" is heavily commented.
> 
> BTW When it finishes (with all 740 feeds) it reports an awesome 330 
> seconds which is an impressive time, less than half a second
> for each feed, and It downloads more than 50Mb of feeds from the net 
> (with 745 feeds to download).

Nice!

> Thx for your help.

Not a problem.  Let us know if it helps.

-Andrew.




From dialtone at aruba.it  Wed Mar 31 06:27:49 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 13:27:49 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <20040331103927.GA8642@frobozz>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz>
Message-ID: <406AAB35.1000208@aruba.it>

Andrew Bennetts wrote:

>On Wed, Mar 31, 2004 at 09:33:58AM +0200, Valentino Volonghi aka Dialtone wrote:
>  
>
>>Hi all,
>>attached you will find my rss-aggregator made with twisted.
>>
>>It's really fast although when I tried with 745 feeds I got some problems.
>>When the download reached 300 parsed feeds (more or less) it locked till 
>>I pressed Ctrl+C and then it
>>processed the remaining 340 feeds in less than 30 seconds... I think 
>>that my design has at least an issue
>>but  I cannot find it so easily and I hope someone on this list can help 
>>me to improve it.
>>    
>>
>
>By default, Twisted uses the platform name resolver, which is blocking.
>Perhaps a non-existent domain is causing gethostbyname to block?
>
>  
>
Uhmm... dunno, but I tried to remove the 'locking' feed-source and it 
didn't change.

>You should be able to test this theory by installing Twisted's resolver:
>
>    from twisted.names import client
>    reactor.installResolver(client.createResolver())
>
>client.createResolver makes a resonable effort to use your system's DNS
>configuration (by looking at /etc/resolve.conf on posix systems, for
>example), so it should work without any special arguments.
>
>  
>
ok, it changes into a totally non-working script :)

I get a lot of these:
[Failure instance: Traceback: exceptions.TypeError, unsubscriptable object
/usr/lib/python2.3/site-packages/twisted/internet/defer.py:313:_runCallbacks
/usr/lib/python2.3/site-packages/twisted/names/resolve.py:44:__call__
/usr/lib/python2.3/site-packages/twisted/names/common.py:36:query
/usr/lib/python2.3/site-packages/twisted/names/common.py:104:lookupAllRecords
/usr/lib/python2.3/site-packages/twisted/names/client.py:266:_lookup
/usr/lib/python2.3/site-packages/twisted/names/client.py:214:queryUDP
]

>>BTW When it finishes (with all 740 feeds) it reports an awesome 330 
>>seconds which is an impressive time, less than half a second
>>for each feed, and It downloads more than 50Mb of feeds from the net 
>>(with 745 feeds to download).
>>    
>>
>
>Nice!
>
>  
>
Yup, was going to ask for my script to be used instead of asyncore to 
Straw developers.
Straw has a lot of problems with 200 feeds ie resets the connection and 
such. This would be an
awesome improvement.

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/




From andrew-twisted at puzzling.org  Wed Mar 31 07:34:06 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 31 Mar 2004 22:34:06 +1000
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <406AAB35.1000208@aruba.it>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz> <406AAB35.1000208@aruba.it>
Message-ID: <20040331123406.GA14465@frobozz>

On Wed, Mar 31, 2004 at 01:27:49PM +0200, Valentino Volonghi aka Dialtone wrote:
> Andrew Bennetts wrote:
> 
> >On Wed, Mar 31, 2004 at 09:33:58AM +0200, Valentino Volonghi aka Dialtone 
> >wrote:
> > 
> >
> >>Hi all,
> >>attached you will find my rss-aggregator made with twisted.
> >>
> >>It's really fast although when I tried with 745 feeds I got some problems.
> >>When the download reached 300 parsed feeds (more or less) it locked till 
> >>I pressed Ctrl+C and then it
> >>processed the remaining 340 feeds in less than 30 seconds... I think 
> >>that my design has at least an issue
> >>but  I cannot find it so easily and I hope someone on this list can help 
> >>me to improve it.
> >
> >By default, Twisted uses the platform name resolver, which is blocking.
> >Perhaps a non-existent domain is causing gethostbyname to block?
> >
> Uhmm... dunno, but I tried to remove the 'locking' feed-source and it 
> didn't change.

Hmm, it's unlikely to be DNS lookups causing it, then.

We need some way to narrow down where it's happening.  There are a few
options I can think of, but they're all a bit heavyweight...

  - Use strace to get some idea what it's doing
  - Use the --spew option of twistd (or manually install the spewer with
    "from twisted.python.util import spewer; sys.settrace(spewer)")
  - Use gdb to attach the process, then and look at the backtrace there.

(You can apparently get the python backtrace in gdb by putting this macro in
your .gdbinit:

define ppystack
    while $pc < Py_Main || $pc > Py_GetArgcArgv
        if $pc > eval_frame && $pc < PyEval_EvalCodeEx
            set $__fn = PyString_AsString(co->co_filename)
            set $__n = PyString_AsString(co->co_name)
            printf "%s (%d): %s\n",  $__fn, f->f_lineno, $__n
        end
        up-silently 1
    end
    select-frame 0
end

But I've never tried this...
)

Is it possible that feedparser is hanging on trying to parse that feed?
Perhaps trying putting print statements before and after the
feedparser.parse call.

> >You should be able to test this theory by installing Twisted's resolver:
> >
> >   from twisted.names import client
> >   reactor.installResolver(client.createResolver())
> >
> >client.createResolver makes a resonable effort to use your system's DNS
> >configuration (by looking at /etc/resolve.conf on posix systems, for
> >example), so it should work without any special arguments.
> >
> ok, it changes into a totally non-working script :)
> 
> I get a lot of these:
> [Failure instance: Traceback: exceptions.TypeError, unsubscriptable object
> /usr/lib/python2.3/site-packages/twisted/internet/defer.py:313:_runCallbacks
> /usr/lib/python2.3/site-packages/twisted/names/resolve.py:44:__call__
> /usr/lib/python2.3/site-packages/twisted/names/common.py:36:query
> /usr/lib/python2.3/site-packages/twisted/names/common.py:104:lookupAllRecords
> /usr/lib/python2.3/site-packages/twisted/names/client.py:266:_lookup
> /usr/lib/python2.3/site-packages/twisted/names/client.py:214:queryUDP
> ]

Ouch.  I wonder how that bug crept in?  The twisted.names code is expecting a
sequence of timeouts (to re-issue the query with, until failing at last), but
twisted.internet is only giving it a single integer.  I've filed a bug
report for this: http://twistedmatrix.com/bugs/issue570, if you care :)

> >>BTW When it finishes (with all 740 feeds) it reports an awesome 330 
> >>seconds which is an impressive time, less than half a second
> >>for each feed, and It downloads more than 50Mb of feeds from the net 
> >>(with 745 feeds to download).
> >>   
> >
> >Nice!
> >
> >
> Yup, was going to ask for my script to be used instead of asyncore to 
> Straw developers.
> Straw has a lot of problems with 200 feeds ie resets the connection and
> such. This would be an awesome improvement.

Absolutely.  I've heard similar complaints about straw, and I've been hoping
some keen person would apply Twisted to fix the problem :)

-Andrew.




From dialtone at aruba.it  Wed Mar 31 08:03:23 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 15:03:23 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <20040331123406.GA14465@frobozz>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz> <406AAB35.1000208@aruba.it> <20040331123406.GA14465@frobozz>
Message-ID: <406AC19B.20207@aruba.it>

Andrew Bennetts wrote:

>Hmm, it's unlikely to be DNS lookups causing it, then.
>
>We need some way to narrow down where it's happening.  There are a few
>options I can think of, but they're all a bit heavyweight...
>
>  - Use strace to get some idea what it's doing
>  - Use the --spew option of twistd (or manually install the spewer with
>    "from twisted.python.util import spewer; sys.settrace(spewer)")
>  - Use gdb to attach the process, then and look at the backtrace there.
>
>(You can apparently get the python backtrace in gdb by putting this macro in
>your .gdbinit:
>
>define ppystack
>    while $pc < Py_Main || $pc > Py_GetArgcArgv
>        if $pc > eval_frame && $pc < PyEval_EvalCodeEx
>            set $__fn = PyString_AsString(co->co_filename)
>            set $__n = PyString_AsString(co->co_name)
>            printf "%s (%d): %s\n",  $__fn, f->f_lineno, $__n
>        end
>        up-silently 1
>    end
>    select-frame 0
>end
>
>But I've never tried this...
>)
>
>Is it possible that feedparser is hanging on trying to parse that feed?
>Perhaps trying putting print statements before and after the
>feedparser.parse call.
>
>  
>
Maybe the problem is there, but then I wouldn't answer the other question:
"Why does it takes at most 30 second to parse all the remaining 350 feeds?"
There is no network activity after the unlocking "Ctrl+C"...
Gotta investigate then.

>>>You should be able to test this theory by installing Twisted's resolver:
>>>
>>>  from twisted.names import client
>>>  reactor.installResolver(client.createResolver())
>>>
>>>client.createResolver makes a resonable effort to use your system's DNS
>>>configuration (by looking at /etc/resolve.conf on posix systems, for
>>>example), so it should work without any special arguments.
>>>
>>>      
>>>
>>ok, it changes into a totally non-working script :)
>>
>>I get a lot of these:
>>[Failure instance: Traceback: exceptions.TypeError, unsubscriptable object
>>/usr/lib/python2.3/site-packages/twisted/internet/defer.py:313:_runCallbacks
>>/usr/lib/python2.3/site-packages/twisted/names/resolve.py:44:__call__
>>/usr/lib/python2.3/site-packages/twisted/names/common.py:36:query
>>/usr/lib/python2.3/site-packages/twisted/names/common.py:104:lookupAllRecords
>>/usr/lib/python2.3/site-packages/twisted/names/client.py:266:_lookup
>>/usr/lib/python2.3/site-packages/twisted/names/client.py:214:queryUDP
>>]
>>    
>>
>
>Ouch.  I wonder how that bug crept in?  The twisted.names code is expecting a
>sequence of timeouts (to re-issue the query with, until failing at last), but
>twisted.internet is only giving it a single integer.  I've filed a bug
>report for this: http://twistedmatrix.com/bugs/issue570, if you care :)
>  
>
Sure :), this is the second bug for me, the first one was a 
documentation bug, the finger tutorial has some errors :).

>Absolutely.  I've heard similar complaints about straw, and I've been hoping
>some keen person would apply Twisted to fix the problem :)
>  
>
That was my hope too, but since a friend of mine asked for an 
rss-aggregator made with twisted... I realized that someone
wants me to be that keen person. Oooohhhh Which thing has the fate 
classified for me? Ooooooohhhhh :P

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/




From dialtone at aruba.it  Wed Mar 31 11:27:30 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 18:27:30 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <406AC19B.20207@aruba.it>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz> <406AAB35.1000208@aruba.it> <20040331123406.GA14465@frobozz> <406AC19B.20207@aruba.it>
Message-ID: <406AF172.2010000@aruba.it>

Valentino Volonghi aka Dialtone wrote:

> Maybe the problem is there, but then I wouldn't answer the other 
> question:
> "Why does it takes at most 30 second to parse all the remaining 350 
> feeds?"
> There is no network activity after the unlocking "Ctrl+C"...
> Gotta investigate then.

Now... The problem is not a parsing problem.
I just made a last test (and am performing another one right now with 
spewer).

The code locked at 404th feed downloaded without anything running (no 
parsing and no memoizing).

No network activity just after the 404th.
Till the 404th it's not very fast, after the lock (and my Ctrl+C) it 
goes at light speed till the 758th feed. (and this can be because of
it's waiting for the feeds to get downloaded, and this happens at about 
the 400th)

Ok, now the "debug" version has just stopped, here is the last output:

function callWithLogger in 
/usr/lib/python2.3/site-packages/twisted/python/log.py, line 54
method logPrefix of twisted.internet.tcp.Client at 1085149132
function callWithContext in 
/usr/lib/python2.3/site-packages/twisted/python/log.py, line 49
method getContext of twisted.python.context.ContextTracker at 1081585292
method callWithContext of twisted.python.context.ContextTracker at 
1081585292
method _doReadOrWrite of twisted.internet.default.SelectReactor at 
1077521228
method doRead of twisted.internet.tcp.Client at 1085149132
method fileno of socket._socketobject at 1085157164
method removeReader of twisted.internet.default.SelectReactor at 1077521228
method removeWriter of twisted.internet.default.SelectReactor at 1077521228
method connectionLost of twisted.internet.tcp.Client at 1085149132
method connectionLost of twisted.internet.tcp.Client at 1085149132
method connectionLost of twisted.internet.tcp.Client at 1085149132
method _closeSocket of twisted.internet.tcp.Client at 1085149132
method shutdown of socket._socketobject at 1085157164
method connectionLost of twisted.web.client.HTTPPageGetter at 1086481388
method connectionLost of twisted.web.client.HTTPPageGetter at 1086481388
method handleResponseEnd of twisted.web.client.HTTPPageGetter at 1086481388
method noPage of twisted.web.client.HTTPClientFactory at 1085148876
method connectionLost of twisted.internet.tcp.Connector at 1085149100
method clientConnectionLost of twisted.web.client.HTTPClientFactory at 
1085148876
method doStop of twisted.web.client.HTTPClientFactory at 1085148876
method __repr__ of twisted.web.client.HTTPClientFactory at 1085148876
method msg of twisted.python.log.LogPublisher at 1081585612
method getContext of twisted.python.context.ContextTracker at 1081585292
method _emit of twisted.python.log.DefaultObserver at 1081585644
method stopFactory of twisted.web.client.HTTPClientFactory at 1085148876
method runUntilCurrent of twisted.internet.default.SelectReactor at 
1077521228
method timeout of twisted.internet.default.SelectReactor at 1077521228
method doSelect of twisted.internet.default.SelectReactor at 1077521228
method fileno of socket._socketobject at 1086221044
method fileno of socket._socketobject at 1086589444
method fileno of socket._socketobject at 1085552996
method fileno of socket._socketobject at 1086453556
[LOTS OF THESE]
method fileno of socket._socketobject at 1086477372
method fileno of socket._socketobject at 1086623612
method fileno of socket._socketobject at 1085203316
method fileno of socket._socketobject at 1085733820

##@#@#@ Ctrl+C

And now it goes on till the end at warp speed.

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/




From lists at allotropic.com  Wed Mar 31 16:08:09 2004
From: lists at allotropic.com (Zach Thompson)
Date: Wed, 31 Mar 2004 13:08:09 -0800
Subject: [Twisted-Python] adbapi results through xmlrpc
Message-ID: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>

Hello,

I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
server just needs to run a db query and return the result set to the 
client for display.  Here's part of the server class:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
         return pool.runQuery("select count(*) from asdf")

And part of the client class:

     def OnButton(self, event):
         from twisted.web.xmlrpc import Proxy
         proxy = Proxy("http://localhost:8080")
         proxy.callRemote('get_count').addCallback(self.UpdateCount)

     def UpdateCount(self, count):
         self.label.SetLabel(count)

Here's what the client prints when I press the button:

   Unhandled error in Deferred:
   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">

I can understand that xmlrpc needs to serialize the Deferred object to 
send it through http.  I'm guessing there's a reference to the 
ConnectionPool object contained in the Deferred, and it makes sense 
that you wouldn't be able to serialize something like that.

Any ideas?

BTW, the client is running on a wxreactor, if that matters..

Thanks,
Zach
  




From dave at krondo.com  Wed Mar 31 16:37:22 2004
From: dave at krondo.com (Dave Peticolas)
Date: Wed, 31 Mar 2004 13:37:22 -0800 (PST)
Subject: [Twisted-Python] adbapi results through xmlrpc
Message-ID: <20040331213722.54EECA2666@oneiros.krondo.net>


Returning a deferred from the xmlrpc method will work fine -- twisted
will use the result of the deferred and not the deferred itself
when sending the return xml-rpc value.

The problem is that the result of the query is not serializable,
probably because it contains some pgsql objects somewhere.

Instead of sending the result directly, you'll probably want to
add a callback that picks the count value out of the row and column.
Also, the type of the count may not be a regular integer but some
pgsql-specific type. You'll have to do some debugging to see what's
going on.

Also, you probably don't want to create a connection pool for every
call, but if you do, don't forget to close the pool or you may end up
with lots of open connections.

dave

---- Original Message ----
From:		Zach Thompson
Date:		Wed 3/31/04 13:22
To:		twisted-python at twistedmatrix.com
Subject:	[Twisted-Python] adbapi results through xmlrpc

Hello,

I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
server just needs to run a db query and return the result set to the 
client for display.  Here's part of the server class:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
         return pool.runQuery("select count(*) from asdf")

And part of the client class:

     def OnButton(self, event):
         from twisted.web.xmlrpc import Proxy
         proxy = Proxy("http://localhost:8080")
         proxy.callRemote('get_count').addCallback(self.UpdateCount)

     def UpdateCount(self, count):
         self.label.SetLabel(count)

Here's what the client prints when I press the button:

   Unhandled error in Deferred:
   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">

I can understand that xmlrpc needs to serialize the Deferred object to 
send it through http.  I'm guessing there's a reference to the 
ConnectionPool object contained in the Deferred, and it makes sense 
that you wouldn't be able to serialize something like that.

Any ideas?

BTW, the client is running on a wxreactor, if that matters..

Thanks,
Zach




From itamar at itamarst.org  Wed Mar 31 16:42:16 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 31 Mar 2004 16:42:16 -0500
Subject: [Twisted-Python] adbapi results through xmlrpc
In-Reply-To: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
References: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
Message-ID: <1080769336.13479.52.camel@sheriffpony>

On Wed, 2004-03-31 at 16:08, Zach Thompson wrote:

> I can understand that xmlrpc needs to serialize the Deferred object to 
> send it through http.

Actually, Deferreds are handled transparently. The issue is probably
that your database adapter returns objects xmlrpc can't handle (e.g.
things that look like lists but aren't, etc..) So you want to
addCallback something that converts the objects.

-- 
Itamar Shtull-Trauring    http://itamarst.org





From michal at pasternak.w.lub.pl  Wed Mar 31 16:50:13 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Wed, 31 Mar 2004 23:50:13 +0200
Subject: [Twisted-Python] adbapi results through xmlrpc
In-Reply-To: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
References: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
Message-ID: <20040331215013.GA96349@pasternak.w.lub.pl>

Zach Thompson [Wed, Mar 31, 2004 at 01:08:09PM -0800]:
>     def xmlrpc_get_count(self):
>         from twisted.enterprise import adbapi
>         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
>         return pool.runQuery("select count(*) from asdf")

	return lambda results: int(result[0])

Some DBAPI modules return actually objects of various types sometimes...

>   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">

... which are not serializable.

-- 
Michal Pasternak :: http://pasternak.w.lub.pl :: http://winsrc.sf.net



From lists at allotropic.com  Wed Mar 31 17:17:06 2004
From: lists at allotropic.com (Zach Thompson)
Date: Wed, 31 Mar 2004 14:17:06 -0800
Subject: [Twisted-Python] adbapi results through xmlrpc
In-Reply-To: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
References: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
Message-ID: <250C2474-8361-11D8-B305-000A95CCF8E0@allotropic.com>

Thanks to all for the help!  Sure enough, the database adaptor was 
sending back objects (like PgInt8) that couldn't be deserialized.  I 
got it to work by changing the server code to this:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
         return pool.runQuery("select count(*) from 
asdf").addCallback(lambda results: int(results[0][0]))

I'll also be moving that ConnectionPool somewhere else so it only gets 
called once...

On Mar 31, 2004, at 1:08 PM, Zach Thompson wrote:

> Hello,
>
> I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
> server just needs to run a db query and return the result set to the 
> client for display.  Here's part of the server class:
>
>     def xmlrpc_get_count(self):
>         from twisted.enterprise import adbapi
>         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
>         return pool.runQuery("select count(*) from asdf")
>
> And part of the client class:
>
>     def OnButton(self, event):
>         from twisted.web.xmlrpc import Proxy
>         proxy = Proxy("http://localhost:8080")
>         proxy.callRemote('get_count').addCallback(self.UpdateCount)
>
>     def UpdateCount(self, count):
>         self.label.SetLabel(count)
>
> Here's what the client prints when I press the button:
>
>   Unhandled error in Deferred:
>   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">
>
> I can understand that xmlrpc needs to serialize the Deferred object to 
> send it through http.  I'm guessing there's a reference to the 
> ConnectionPool object contained in the Deferred, and it makes sense 
> that you wouldn't be able to serialize something like that.
>
> Any ideas?
>
> BTW, the client is running on a wxreactor, if that matters..
>
> Thanks,
> Zach
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From oisin at enginesofcreationsoftware.com  Thu Mar 11 07:57:22 2004
From: oisin at enginesofcreationsoftware.com (Oisin Mulvihill)
Date: Thu, 11 Mar 2004 12:57:22 +0000
Subject: [Twisted-Python] help ssh forwarding.
Message-ID: <A373225C-735B-11D8-AF5B-000A956F9A40@enginesofcreationsoftware.com>

Hi,

I have a series of linux based internet kiosks at a variety
of sites. I need to be able to connect back into the kiosk
from the main server. However direct connections aren't possible
as kiosks are behind there own router/firewall.

The solution to this is to forward port 22 on the kiosk to
a port on the server. I was thinking of just spawning the
command "ssh -R11122:my_server:22 user at my_server" from the
kiosk, when ever I need to connect to a machine. However I'm
hoping to do this with twisted, since the kiosk app uses it
already, and spawning the ssh command won't play well with
twisted's event system.

I decided to try and hack together a simple version of what
I want to do, based on the example sshsimpleclient.py. I don't
seem to be able to figure out how to forward from the server
to the kiosk. My program (attached) just forwards from 11122
on the kiosk to 22 on the server which isn't what I want.

Can anyone suggest what I'm doing wrong? Can twisted actually
do this?

Thanks in advance,

om


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cli.py
Type: application/octet-stream
Size: 1728 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040311/ef8e912f/attachment.obj 
-------------- next part --------------



--
Oisin Mulvihill
Engines Of Creation

Email: oisin at enginesofcreationsoftware.com
Email: oisin at enginesofcreation.ie
Mobile: +353 868191540

From koen_van_herck at yahoo.com  Thu Mar 11 10:33:35 2004
From: koen_van_herck at yahoo.com (Koen Van Herck)
Date: Thu, 11 Mar 2004 16:33:35 +0100
Subject: [Twisted-Python] ESMTPClient
Message-ID: <005001c4077e$3907e930$4028000a@KVanherck>

Does anyone have an example of using twisted.protocols.smtp.ESMTPClient ?
I.e., I would like to write a client for sending mail to an SMTP server
which requires authentication.

Thanks,
Koen Van Herck.




From eric at oaktech.net  Fri Mar 19 19:25:19 2004
From: eric at oaktech.net (Eric Mangold)
Date: Fri, 19 Mar 2004 17:25:19 -0700
Subject: [Twisted-Python] Re: Somebody please point me in the right direction...
In-Reply-To: <DLELJDPNJKAEEHLHNLONOEHODPAA.jredders@mhbs.lsil.com>
References: <DLELJDPNJKAEEHLHNLONOEHODPAA.jredders@mhbs.lsil.com>
Message-ID: <opr44wshgv55xoqp@mail.oaktech.net>

On Fri, 19 Mar 2004 16:17:50 -0600, John C. Reddersen <jredders at lsil.com> 
wrote:

> Hi all,
>
> I'm a fairly new Python programmer, and really new to Twisted, so accept 
> my
> apologies now if this is a clueless newbie question...
>
> I'm developing a wxPython application that needs to talk to another app 
> via
> a very simple sockets based interface.  I managed to mangle together some
> code using twisted to connect to the socket and send an initial starting
> message to the server and receive it's response.  However, I'm unsure 
> how to
> proceed from here to allow my GUI to send and receive commands over the
> socket using the protocol created by the factory.  All the examples I 
> could
> find just send canned messages, nothing with user input...

Without further information I'll say you should be using PB.

See the Perspective Broker howto's at:
http://www.twistedmatrix.com/documents/current/howto/index

	-Eric



From g.clinch at lancaster.ac.uk  Tue Mar 23 22:21:18 2004
From: g.clinch at lancaster.ac.uk (Graham Clinch)
Date: Wed, 24 Mar 2004 03:21:18 +0000 (GMT)
Subject: [Twisted-Python] JellyToNode and boolean types
Message-ID: <Pine.GSO.4.21.0403240313100.6258-100000@cent1.lancs.ac.uk>

I've just started having problems with JellyToNode dying on boolean
types (Bug tracker issue 363), but it doesn't seem to have moved along
much recently, even though there is a seemingly accepted patch; are there
any plans to apply the patch?

Thanks,
Graham




From andy at thecablelounge.com  Mon Mar  1 00:29:47 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 01 Mar 2004 17:29:47 +1000
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb and html
Message-ID: <4042E66B.9020909@thecablelounge.com>

I'm investigating setting up a collaborative remote file share.  There 
are a number of traditional ways for doing this, each has their 
strengths and weaknesses:

ftp - not secure, fast and robust file transfer, supports resume, 
difficult to administer as unless chrooted users have access to the 
entire file system, if chrooted its difficult to set up group, no vendor 
lockin on the client

sftp - same as ftp but secure

smb - secureish, slow over wan, doesn't support resume, great to 
administer - give exactly the access you want to who you want, easy to 
support groups, vendor lockin on the client

html - can be secure, slow non robust file transfer, doesn't support 
resume, easy to administer who has access to what, client access is 
universal

I'm looking at defining a virtual filesystem that can be accessed 
eventually by all of the above the methods.

If a person sftp's in, they can only see their home directory - they 
can't cd about the place and look at other things on the system.  Each 
of their groups could appear as a directory off their home-root directory.

I'm thinking it'll be easiest to control the permissions/ownerships of 
touched files in a similiar way to samba - so if you're in a group 
directory you create files in a way that other members of the group can 
modify them, which is different to when you're in your personal directories.

If a person then maps a drive from windows to the share they will see 
they same virtual filesystem.

I am going to start with conch's sftp at first and see how I go.  Just 
thought I'd run it past the list as I get started to see if others are 
interested and have thoughts in the area or recommendations on how this 
should be done.

cheers!
Andy.



From andrew-twisted at puzzling.org  Mon Mar  1 00:56:15 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 1 Mar 2004 18:56:15 +1100
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb and html
In-Reply-To: <4042E66B.9020909@thecablelounge.com>
References: <4042E66B.9020909@thecablelounge.com>
Message-ID: <20040301075615.GH3669@frobozz>

On Mon, Mar 01, 2004 at 05:29:47PM +1000, Andy Gayton wrote:
> I'm investigating setting up a collaborative remote file share.  There 
> are a number of traditional ways for doing this, each has their 
> strengths and weaknesses:
> 
> ftp - not secure, fast and robust file transfer, supports resume, 
> difficult to administer as unless chrooted users have access to the 
> entire file system, if chrooted its difficult to set up group, no vendor 
> lockin on the client

ftp isn't robust, either -- the multi-socket aspect of it means it often
breaks in the presence of firewalls.  It also has no agreed standard for
sharing metadata (like modification times or content types?).

> sftp - same as ftp but secure

That's almost entirely wrong :)

SFTP has very little in common with FTP.  The only similarities I can think
of are that SFTP clients are traditionally presented to look like FTP
clients, and that SFTP has per-session authentication (whereas with e.g.
HTTP you have to re-auth for every request, or at least pass auth
credientials like a session cookie for every request).  As far as I'm aware,
SFTP doesn't have the binary/ascii transfer mode gunk that FTP has, or any
of the nasty seperate data connection sockets issues.

SFTP is massively more secure than FTP, though :)

> smb - secureish, slow over wan, doesn't support resume, great to 
> administer - give exactly the access you want to who you want, easy to 
> support groups, vendor lockin on the client

I suspect that you can resume with SMB -- a network filesystem that doesn't
support accessing files in pieces (i.e. seek) is pretty limited.  Most
clients wouldn't expose this functionality, though.

> html - can be secure, slow non robust file transfer, doesn't support 
> resume, easy to administer who has access to what, client access is 
> universal

(I think you mean HTTP)

What's non-robust about HTTP, compared to FTP?  And it definitely *does*
support resuming downloads -- see the Range header:
    http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35

> I'm looking at defining a virtual filesystem that can be accessed 
> eventually by all of the above the methods.
> 
[...]
> 
> I am going to start with conch's sftp at first and see how I go.  Just 
> thought I'd run it past the list as I get started to see if others are 
> interested and have thoughts in the area or recommendations on how this 
> should be done.

I just thought I should correct some misunderstandings about the protocols
you mentioned :)

-Andrew.




From andy at thecablelounge.com  Mon Mar  1 02:27:31 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 01 Mar 2004 19:27:31 +1000
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb
 and html
In-Reply-To: <20040301075615.GH3669@frobozz>
References: <4042E66B.9020909@thecablelounge.com> <20040301075615.GH3669@frobozz>
Message-ID: <40430203.9090403@thecablelounge.com>

Andrew Bennetts wrote:

G'dday Andrew, thanks for the reply, I need to be careful how I describe 
things when posting to a forum of protocol experts :) .. I don't know 
anything about protocols .. as you can tell ;)

I'm interested in things from an application view.  So sftp the 
application, not sftp the protocol.

> ftp isn't robust, either -- the multi-socket aspect of it means it often
> breaks in the presence of firewalls.  It also has no agreed standard for
> sharing metadata (like modification times or content types?).

ok

 > SFTP has very little in common with FTP.  The only similarities I can 
think
 > of are that SFTP clients are traditionally presented to look like FTP
 > clients, and that SFTP has per-session authentication (whereas with e.g.

For administration you face the same problems - how to restrict users to 
given areas, how to get groups of users to play well together.  For the 
end user - as you say they are presented to look the same which is what 
I'm interested in.

 > I suspect that you can resume with SMB -- a network filesystem that 
doesn't
 > support accessing files in pieces (i.e. seek) is pretty limited.  Most
 > clients wouldn't expose this functionality, though.

I'd be very interested in clients that do expose this if anyone knows of 
any ..

 >>html - can be secure, slow non robust file transfer, doesn't support
 >>resume, easy to administer who has access to what, client access is
 >>universal

 > (I think you mean HTTP)

Sorry, I meant a html form file upload file browser type application. 
HTTP is the protocol this would run over - but so would webdav - which 
could plugin into this virtual filesystem as well!  Form file uploads 
don't support resume as far as I know and aren't very robust ..

> I just thought I should correct some misunderstandings about the protocols
> you mentioned :)

Appreciated - but feedback on what you'd like a common collaborative 
filesystem backend to look like for these applications would be more 
appreciated :)

Andy.



From itamar at itamarst.org  Mon Mar  1 08:12:53 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 01 Mar 2004 10:12:53 -0500
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb
	and html
In-Reply-To: <4042E66B.9020909@thecablelounge.com>
References: <4042E66B.9020909@thecablelounge.com>
Message-ID: <1078153972.11465.1.camel@sheriffpony>

On Mon, 2004-03-01 at 02:29, Andy Gayton wrote:

> html - can be secure, slow non robust file transfer, doesn't support 
> resume, easy to administer who has access to what, client access is 
> universal

You forgot about WebDAV. Designed for exactly this, with support for
locking, arbitrary metadata, extensions for versioning, and more. Plus
Windows, Mac OS X and maybe linux file managers have VFS support for
WebDAV.

http://www.webdav.org

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From Benjamin.Schollnick at usa.xerox.com  Mon Mar  1 08:25:46 2004
From: Benjamin.Schollnick at usa.xerox.com (Schollnick, Benjamin)
Date: Mon, 01 Mar 2004 10:25:46 -0500
Subject: [Twisted-Python] SSH connection, redux!
Message-ID: <51B62EFFBC83D6118ADA00096BB030A107CADDE9@usamcms7.mc.usa.xerox.com>

Folks,

	Thanks for the support, so far...  I downloaded the
precompiled version of the PyCrypto and everything is working fine...

	Except for the fact, that I am attempting to figure out
how to make this work the way, that I *believe* it needs to work...

	By the way, I was unable to get the "Writing a client with 
Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
example, and that is working okay...

	But I am having a problem, trying to figure out how to adapt the 
reactor model with my program...

	The application has, for example, 6 "ssh queries" that it needs to
send, for example a "/usr/sbin/prtconf -v", and then "capture" the output,
and return the output
for processing...

	Then it proceeds to the next query....etc...

	Is there a method that I can setup the communication, and say....

reactor.send ("asdfasdf")
data = reactor.recv ()

	More along the telnetlib design?  This way, I could branch the
telnet code
I use?

	Once, I start the reactor, I do not see where I can get data in and
out,
without using some form of a global variable...  (Or embedding the reactor
inside
another object)

				- Benjamin



From michael.l.schneider at ugsplm.com  Mon Mar  1 09:28:26 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 1 Mar 2004 11:28:26 -0500
Subject: [Twisted-Python] tracking spawned jobs in a twisted application (code review request)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D532@uscimplm001.net.plm.eds.com>

Hello All,

I have been pushing some code around.

My problem is that I need to execute OS command line
jobs with twisted.

I started by morphing the twisted tutorial app into a
job runner.


My first path (It was wrong!!) was to morph the database connection
pool to a compute pool using popen2.

This group, suggested that I use reactor.spawn instead of popen2 .

Attached is the resulting code.  

Basic Approach for Command protocol.processProtocol:

1) crate a JobPool Object to manage list of running jobs
2) Create Job Runner Object to wrap individual process info,
   and capture process output.
   (start time, stop time ...)
3) Create CmdProcProtcol  to manage interaction with the reactor


I morphed the twisted application: (Coded in comment section below)
	1) Create JobPoolService
	2) Create JobRunnerProtocol
	3) Create XmlRpc Job Runner Interface that dispatches to job runner service.



My questions are:
	- Is the the twisted way?
      - What are some alternative approaches?
	- Is there a better way?

Thank you very much,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of 
> Schollnick,
> Benjamin
> Sent: Monday, March 01, 2004 10:26 AM
> To: 'twisted-python at twistedmatrix.com'
> Subject: RE: [Twisted-Python] SSH connection, redux!
> 
> 
> Folks,
> 
> 	Thanks for the support, so far...  I downloaded the
> precompiled version of the PyCrypto and everything is working fine...
> 
> 	Except for the fact, that I am attempting to figure out
> how to make this work the way, that I *believe* it needs to work...
> 
> 	By the way, I was unable to get the "Writing a client with 
> Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
> example, and that is working okay...
> 
> 	But I am having a problem, trying to figure out how to 
> adapt the 
> reactor model with my program...
> 
> 	The application has, for example, 6 "ssh queries" that 
> it needs to
> send, for example a "/usr/sbin/prtconf -v", and then 
> "capture" the output,
> and return the output
> for processing...
> 
> 	Then it proceeds to the next query....etc...
> 
> 	Is there a method that I can setup the communication, 
> and say....
> 
> reactor.send ("asdfasdf")
> data = reactor.recv ()
> 
> 	More along the telnetlib design?  This way, I could branch the
> telnet code
> I use?
> 
> 	Once, I start the reactor, I do not see where I can get 
> data in and
> out,
> without using some form of a global variable...  (Or 
> embedding the reactor
> inside
> another object)
> 
> 				- Benjamin
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From michael.l.schneider at ugsplm.com  Mon Mar  1 09:32:02 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 1 Mar 2004 11:32:02 -0500
Subject: [Twisted-Python] RE: tracking spawned jobs in a twisted application (code review request)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB501FEEFA3@uscimplm001.net.plm.eds.com>

Sorry,

I hit the send button too soon,
Mike


 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: Schneider, Michael 
> Sent: Monday, March 01, 2004 11:28 AM
> To: 'twisted-python at twistedmatrix.com'
> Subject: tracking spawned jobs in a twisted application (code review
> request)
> 
> 
> Hello All,
> 
> I have been pushing some code around.
> 
> My problem is that I need to execute OS command line
> jobs with twisted.
> 
> I started by morphing the twisted tutorial app into a
> job runner.
> 
> 
> My first path (It was wrong!!) was to morph the database connection
> pool to a compute pool using popen2.
> 
> This group, suggested that I use reactor.spawn instead of popen2 .
> 
> Attached is the resulting code.  
> 
> Basic Approach for Command protocol.processProtocol:
> 
> 1) crate a JobPool Object to manage list of running jobs
> 2) Create Job Runner Object to wrap individual process info,
>    and capture process output.
>    (start time, stop time ...)
> 3) Create CmdProcProtcol  to manage interaction with the reactor
> 
> 
> I morphed the twisted application: (Coded in comment section below)
> 	1) Create JobPoolService
> 	2) Create JobRunnerProtocol
> 	3) Create XmlRpc Job Runner Interface that dispatches 
> to job runner service.
> 
> 
> 
> My questions are:
> 	- Is the the twisted way?
>       - What are some alternative approaches?
> 	- Is there a better way?
> 
> Thank you very much,
> Mike
>  
> ----------------------------------------------------------------
> Michael Schneider
> Senior Software Engineering Consultant
> UGS PLM Solutions - an EDS Company
>  
> "The Greatest Performance Improvement Is the transitioning 
> from a non-working state to the working state"
> 

# Twisted, the Framework of Your Internet

"""
Manage execution of multiple processes\

Usage Model:
1)Create Job runner Service in App
2)Create Job Runner Protocol in App
3) Create Xmlrpc to call

    ----- from service code in twisted app
    m = RunTaskPool()
    cmdLine="dir d:\"
    def = m.runJob(cmdLine)


class JobRunnerService(service.Service):

    __implements__ = service.Service.__implements__, IJobRunnerService

    def __init__(self):
        self.taskPool = None


    def runJob(self, command):
        print "In Twisted runJob, command = " + command
        self.verifyRunTaskPool()
        return self.taskPool.runJob(command)

    def verifyRunTaskPool(self):
        if(self.taskPool == None):
            self.taskPool = RunTaskPool()

class JobRunnerProtocol(basic.LineReceiver):

    def lineReceived(self, command):
        d = self.factory.runJob(command)
        d.addErrback(catchError)
        def writeValue(value):
            self.transport.write(value)
            self.transport.write('\n\n')
            self.transport.loseConnection()
        d.addCallback(writeValue)


class JobStatusXR(xmlrpc.XMLRPC):

    def __init__(self, service):
        xmlrpc.XMLRPC.__init__(self)
        self.service = service

    def xmlrpc_runJob(self, command):
        return self.service.runJob(command)


    def xmlrpc_isAlive(self):
        return 1


   
"""


from twisted.internet import protocol
from twisted.internet import reactor
from twisted.spread import pb
from twisted.python import reflect, log
from twisted.internet import  defer

from time import sleep
from time import time
import os



class CmdProcProtocol(protocol.ProcessProtocol):
    """Twisted Protocol Class to run command line in a sub process """
    def __init__(self, parentJobRunner):
        self._exitStatus = 0
        self.parentJobRunner = parentJobRunner
        self.data = ""
        
    def connectionMade(self):
        """Called at the start of the execution"""
        #print "connectionMade!"
        pass
 
    def outReceived(self, data):
        """Called when process writes output"""
        #print "outReceived! with %d bytes!" % len(data)
        self.data = self.data + data
        #print self.data
        
    def errReceived(self, data):
        #print "errReceived! with %d bytes!" % len(data)
        pass
    
    def inConnectionLost(self):
        #print "inConnectionLost! stdin is closed! (we probably did it)"
        pass
    def outConnectionLost(self):
        """Program has closed stdout (program terminated)"""
        #print "outConnectionLost! The child closed their stdout!"
        #print "# now is the time to examine what they wrote"
        #print "dir:", self.data
        pass

    def errConnectionLost(self):
        """Program has closed stderr (program terminated)"""
        #print "errConnectionLost! The child closed their stderr."
        pass
    def processEnded(self, status_object):
        """Child process exited"""
        self._exitStatus =  status_object.value.exitCode
        print "processEnded, status %d" % self._exitStatus
        print "quitting"
        print self.data
        #notify parent with data returned , and exit status
        self.parentJobRunner.signalRunComplete(self._exitStatus, self.data)

    def kill(self):
        """Kill this process"""
        #os.kill(self.transport.pid, signal.SIGKILL) 
        
class JobRunner:
    """
    I am a lightweight wrapper for run job.
    """
  

    def __init__(self, parentJobRunnerPool,  jobRunDeferred):

        #command to execute in Command Proc Protocol 
        self.command = ""

        #set 
        self.parentJobRunnerPool = parentJobRunnerPool
        self._startTime = -1
        self._endTime = -1
        self._timeLimit = -1
        self._exitcode = None
        self._log = "job not yet started"
        self._jobRunDeferred = jobRunDeferred
        
    def getLogCallback(self,*args, **kw):
        """Called by Process Run Protocol when child process execution is complete """

        #Notify JobRunner Pool That this job has completed execution
        self.parentJobRunnerPool.jobCompleteCallback(self)

        #return output of job
        return self._log

    def getExitCode(self):
        return self._exitcode
        
    def getStartTime(self):
        """Get Time Job Started Executing """
        return self._startTime
    
    def getEndTime(self):
        """Get Time Job Stopped Executing """
        return self._endTime
    
    def getRunTime(self):
        """ get time executing"""
        if(self._startTime < 0):
            #job has not started yet, return -1
            return -1
        
        if(self._endTime < 0):
            #job is running, but not yet finished, return time spent so far
            return (time() - self._startTime)
        
        #job is complete, return run time
        return (self._endTime - self._startTime)
        

    
    def runJob(self, *args, **kw):
        """Execute Job:  NOTE: this function executes in its own thread """
        
        #set execution start time
        
        self.command = (args[0])[0]
        

        print "In Run Job daemon command : " + self.command
     
        self._startTime = time()
        
        print "Start Running Command : " +  str(self.command) + "  " + str(self.getStartTime())
        self._log = "Job is Running: "

        #setup reactor to run job
        self.runCommand(self.command)
   


    def runCommand(self, commandStr):
        """Create Command Line Protocol, and call spawnProcess"""
        commandStr = 'cmd.exe /c ' + commandStr


        pp= CmdProcProtocol(self)
        reactor.spawnProcess(pp,
                             commandStr ,
                             env=os.environ)
        
        
    def signalRunComplete(self, exitCode, stdoutString):
        # Pass Control back to caller to self.runJob(..)
        # by triggering defered callback,
        # this callback will return this object

        self._exitCode = exitCode
        self._log = stdoutString
             
        # set execution time
        self._endTime = time()
      
        print "Done Running Job "  + self.command
        
        reactor.callFromThread(self._jobRunDeferred.callback, self)
        
        
    

class RunTaskPool(pb.Referenceable):
 
    running = 0 # true when the pool is operating
    


    def __init__(self,  *args, **kw ):
        """See RunTaskPool.__doc__
        """
 
    
        self.args = args
        self.kw = kw
        self._jobRunnerJobs = []

        self.jobs = {}  # running Jobs, hashed on thread id


    
 
        self.startID = reactor.callWhenRunning(self.start)

    def start(self):
        """Start of execution
        """
        
        if not self.running:
            
            self.shutdownID = reactor.addSystemEventTrigger('during',
                                                            'shutdown',
                                                            self.finalClose)
            self.running = 1

    def jobCompleteCallback(self, jobRunner):
        """Callback triggered by JobRunner when execution of job is complete """
        print "Deleting Job Object from running queue"
        if jobRunner in self._jobRunnerJobs:
            self._jobRunnerJobs.remove(jobRunner)

        

    def runJob(self, *args, **kw ):
        """run job and return the result as a defered object
        """

        print "MLS: runJob - setting up to run in thread "
    
   
        d = defer.Deferred()  
        jobRunner = JobRunner(self,d)
        
        #Add to list of JobRunnerJobs  managed
        self._jobRunnerJobs.append(jobRunner)

        
        print "MLS: in _runJobRunner "
        
        # run Job in thread pool thread
        jobRunner.runJob(args, kw)
            
        # return defered used by jobRunner

        
        d.addCallback(jobRunner.getLogCallback)
        return d

  

    def close(self):
        """Close all pool connections and shutdown the pool."""

        from twisted.internet import reactor
        if self.shutdownID:
            reactor.removeSystemEventTrigger(self.shutdownID)
            self.shutdownID = None
        if self.startID:
            reactor.removeSystemEventTrigger(self.startID)
            self.startID = None
        self.finalClose()

    def finalClose(self):
        """This should only be called by the shutdown trigger."""

        self.running = 0
        for job in self.jobs.values():
            if self.noisy:
                log.msg(' closing: %s%s' % (
                                                     self.kw or ''))
            job.close()
        self.jobs.clear()

    def __getstate__(self):
        return {'noisy': self.noisy,
                'min': self.min,
                'max': self.max,
                'kw': self.kw}

    def __setstate__(self, state):
        self.__dict__ = state
        apply(self.__init__, self.kw)

def startup():
         for x in range(1,14):
            d = m.runJob()
            d.addCallback(printSelf)
            
    
def printSelf(jobRunner):
        print "Job Runner Done"

    



From michael.l.schneider at ugsplm.com  Mon Mar  1 09:34:38 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 1 Mar 2004 11:34:38 -0500
Subject: [Twisted-Python] SSH connection, redux!
Message-ID: <49199579A2BB32438A7572AF3DBB2FB501FEEFA4@uscimplm001.net.plm.eds.com>

Benjamin,

I just posted some code for review for spawning jobs off
and capturing jobs.

I posted this code for review, since I am new to twisted, and
trying to lean the "twisted way".

This approach may work for you,
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of 
> Schollnick,
> Benjamin
> Sent: Monday, March 01, 2004 10:26 AM
> To: 'twisted-python at twistedmatrix.com'
> Subject: RE: [Twisted-Python] SSH connection, redux!
> 
> 
> Folks,
> 
> 	Thanks for the support, so far...  I downloaded the
> precompiled version of the PyCrypto and everything is working fine...
> 
> 	Except for the fact, that I am attempting to figure out
> how to make this work the way, that I *believe* it needs to work...
> 
> 	By the way, I was unable to get the "Writing a client with 
> Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
> example, and that is working okay...
> 
> 	But I am having a problem, trying to figure out how to 
> adapt the 
> reactor model with my program...
> 
> 	The application has, for example, 6 "ssh queries" that 
> it needs to
> send, for example a "/usr/sbin/prtconf -v", and then 
> "capture" the output,
> and return the output
> for processing...
> 
> 	Then it proceeds to the next query....etc...
> 
> 	Is there a method that I can setup the communication, 
> and say....
> 
> reactor.send ("asdfasdf")
> data = reactor.recv ()
> 
> 	More along the telnetlib design?  This way, I could branch the
> telnet code
> I use?
> 
> 	Once, I start the reactor, I do not see where I can get 
> data in and
> out,
> without using some form of a global variable...  (Or 
> embedding the reactor
> inside
> another object)
> 
> 				- Benjamin
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From cprov at gwyddion.com  Mon Mar  1 09:57:17 2004
From: cprov at gwyddion.com (Celso Providelo)
Date: Mon, 01 Mar 2004 13:57:17 -0300
Subject: [Twisted-Python] Help about  adbapi and sqlreflector
Message-ID: <40436B6D.1030405@gwyddion.com>

Maybe it might be a dummy question, but I couln't solve my doubts with 
the set of examples from Twisted about the use of a PostgreSQL DB Server 
in the Twisted way.

Will be better if I explain exactly my case:

I have a set of CLIENTS invoking random methods from a SERVER throught 
my protocol, one of these should add/update an entry in my DB.

As I can see, if I just add:

  conn = PgSQL.connect(database='test');

  .....

  """my method !!!!!"""
  curs = conn.cursor();
  curs.execute(my_query);
  conn.commit();
  send_reply();
  """ just it """

I'll fall in a strong "wasting performance" error; if my DB becomes full 
the flows waits here, like in "polling way".

I suspect the solution should be the use of:

from twisted.internet import reactor
from twisted.enterprise import adbapi, row, reflector, sqlreflector
from row_util import *

pool = adbapi.ConnectionPool('pyPgSQL.PgSQL',database='test')
pool.runQuery(my_query);
.... and so on.

But I have no idea about how to recover some results from it or detect 
sucess or error (like in row_example.py!!!)

Any help or example will be very apreciated

best regards
-- 
Celso Providelo
cprov at gwyddion.com
Linux user #166906
Gwyddion - http://www.gwyddion.com
GNUsp Project
LAMI-Laboratories of Microprocessors
Department of Electrical Engineering
University of Sao Paulo (USP - Sao Carlos)




From z3p at twistedmatrix.com  Mon Mar  1 10:05:55 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Mon, 01 Mar 2004 12:05:55 -0500
Subject: [Twisted-Python] SSH connection, redux!
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE9@usamcms7.mc.usa.xerox.com>
References: 	 <51B62EFFBC83D6118ADA00096BB030A107CADDE9@usamcms7.mc.usa.xerox.com>
Message-ID: <1078160755.3203.14.camel@petra>

On Mon, 2004-03-01 at 10:25, Schollnick, Benjamin wrote:
> Folks,
> 
> 	Thanks for the support, so far...  I downloaded the
> precompiled version of the PyCrypto and everything is working fine...
> 
> 	Except for the fact, that I am attempting to figure out
> how to make this work the way, that I *believe* it needs to work...
> 
> 	By the way, I was unable to get the "Writing a client with 
> Twisted.Conch" FAQ to work....  I did find the sshSimpleClient.py
> example, and that is working okay...
> 
> 	But I am having a problem, trying to figure out how to adapt the 
> reactor model with my program...
> 
> 	The application has, for example, 6 "ssh queries" that it needs to
> send, for example a "/usr/sbin/prtconf -v", and then "capture" the output,
> and return the output
> for processing...
>
> 	Then it proceeds to the next query....etc...

That's almost exactly what sshsimpleclient.py does, only it does all
three executions at once.

> 	Is there a method that I can setup the communication, and say....
> 
> reactor.send ("asdfasdf")
> data = reactor.recv ()

You can't get data like this in Twisted, as the .recv() would block and
hang the reactor.  The dataReceived() method of the channel is called
when data is sent along that channel.

> 	More along the telnetlib design?  This way, I could branch the
> telnet code
> I use?

telnetlib is a blocking design, and doesn't work the way Twisted does. 
You might want to look into Paramiko, which (as I recall) maps fairly
closely to the telnetlib interface.

> 	Once, I start the reactor, I do not see where I can get data in and
> out,
> without using some form of a global variable...  (Or embedding the reactor
> inside
> another object)

You might want to have a look at the Writing Clients HOWTO, to get a
feel for how to write client code using the reactor.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040301/f67d50c1/attachment.sig>

From henni at brainbot.com  Mon Mar  1 10:33:35 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Mon, 01 Mar 2004 18:33:35 +0100
Subject: [Twisted-Python] Using Twisted together with Windows Namespace Extensions
Message-ID: <404373EF.40807@brainbot.com>

Hi everybody,

I try to implement an ActiveX component for a Windows Namespace 
Extension, such that the
data of my server, a twisted perspective broker, can be accessed and 
browsed via the Windows explorer.

The challenge on writing something like this is, that once Windows asks 
my ActiveX component to open a folder, a file
or any other object, Windows expects an immediate answer. But asking by 
twisted server just returns a deferred.

To emulate those synchronous calls, I could use the "deferredResult" 
methods from twisted.trials.
But that way, I would not be able to handle parallel requests, e.g. from 
two or more explorers or other applications.

Does anybody know, how to emulate a synchronous call in twisted?
Am I right, that using the deferredResult method causes problems with 
parallel requests?

I guess, the solution may be similar to the render method
     return server.NOT_DONE_YET
solution used in web.resource and twisted.web.server.

thanks for any help on this,

Thorsten




-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




From itamar at itamarst.org  Mon Mar  1 10:35:29 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 01 Mar 2004 12:35:29 -0500
Subject: [Twisted-Python] Help about  adbapi and sqlreflector
In-Reply-To: <40436B6D.1030405@gwyddion.com>
References: <40436B6D.1030405@gwyddion.com>
Message-ID: <1078162529.11463.54.camel@sheriffpony>

On Mon, 2004-03-01 at 11:57, Celso Providelo wrote:

> pool = adbapi.ConnectionPool('pyPgSQL.PgSQL',database='test')
> pool.runQuery(my_query);
> .... and so on.

1. You don't need row or reflector. Ignore them.

2. runQuery returns a Deferred. So you can do:

def gotResult(x):
    print "db says:", x

pool.runQuery(my_query).addCallback(gotResult)

I suggest reading the Deferred howto and the Enterprise/adbapi howto.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From itamar at itamarst.org  Mon Mar  1 12:15:52 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 01 Mar 2004 14:15:52 -0500
Subject: [Twisted-Python] Using Twisted together with Windows Namespace
	Extensions
In-Reply-To: <404373EF.40807@brainbot.com>
References: <404373EF.40807@brainbot.com>
Message-ID: <1078168552.14438.1.camel@sheriffpony>

On Mon, 2004-03-01 at 12:33, Thorsten Henninger wrote:

> The challenge on writing something like this is, that once Windows asks 
> my ActiveX component to open a folder, a file
> or any other object, Windows expects an immediate answer. But asking by 
> twisted server just returns a deferred.

You probably want to run a thread (or more, depends what the APIs on the
windows side expect) that runs in parallel to the Twisted thread, and
blocks until Deferreds have results, and use it to handle  these
requests.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andy at thecablelounge.com  Mon Mar  1 16:29:15 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 02 Mar 2004 09:29:15 +1000
Subject: [Twisted-Python] Collaborative file storage via ftp/sftp/smb
 and html
In-Reply-To: <1078153972.11465.1.camel@sheriffpony>
References: <4042E66B.9020909@thecablelounge.com> <1078153972.11465.1.camel@sheriffpony>
Message-ID: <4043C74B.4050009@thecablelounge.com>

Itamar Shtull-Trauring wrote:
> On Mon, 2004-03-01 at 02:29, Andy Gayton wrote:
> 
> 
>>html - can be secure, slow non robust file transfer, doesn't support 
>>resume, easy to administer who has access to what, client access is 
>>universal
> 
> 
> You forgot about WebDAV. Designed for exactly this, with support for
> locking, arbitrary metadata, extensions for versioning, and more. Plus
> Windows, Mac OS X and maybe linux file managers have VFS support for
> WebDAV.
> 
> http://www.webdav.org
> 

Yeah I did :)

btw is it just me or have microsoft taken out support for webdav web 
folders with ie6 onwards.  At least I couldn't map to an apache/webdav 
share as a web folder when I last tried - but there was a time I could.

It'd be great if I was mistaken about this.

Anyway, if I do this in twisted then the user gets a huge choice in 
clients depending on the particular task their doing.  Grabbing an adhoc 
file out in the field - use a web browser, day to day work - map a 
share, transfering huge files - use sftp ... and from an administration 
point of view it should hopefully be slightly nicer than setting up 
samba shares.

cheers,
Andy.




From henni at brainbot.com  Tue Mar  2 02:49:24 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Tue, 02 Mar 2004 10:49:24 +0100
Subject: [Twisted-Python] Using Twisted together with Windows Namespace
 Extensions
In-Reply-To: <1078168552.14438.1.camel@sheriffpony>
References: <404373EF.40807@brainbot.com> <1078168552.14438.1.camel@sheriffpony>
Message-ID: <404458A4.3090201@brainbot.com>

>You probably want to run a thread (or more, depends what the APIs on the
>windows side expect) that runs in parallel to the Twisted thread, and
>blocks until Deferreds have results, and use it to handle  these
>requests.
>
>  
>
This works, thanks.
When I started to write the code, I figured out various methods to start 
threads in twisted.
Well, I do not really understand, how they differ.
For example:
reactor.runFromThread
reactor.runInThread

and what is the difference between
threads.deferToThread and reactor.callInThread ?
Both methods worked fine.

Is it threadsafe to run the reactor in a thread?

regards,

Thorsten


-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




From henni at brainbot.com  Tue Mar  2 03:56:37 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Tue, 02 Mar 2004 11:56:37 +0100
Subject: [Twisted-Python] Running a reactor in IPython
Message-ID: <40446865.4020501@brainbot.com>

Hi all,

At my company, we heavily use IPython for debugging and testing.
The following code shows, how to run a reactor together with IPython:

from twisted.internet import reactor
from twisted.python import threadable
threadable.init(1)

import threading
class MyThread(threading.Thread):
     def run(self):
          print "starting reactor.."
          reactor.run(installSignalHandlers=False)
         
if __name__=="__main__":
     m=MyThread()
     m.start()
     from IPython.Shell import IPythonShellEmbed
     ipshell = IPythonShellEmbed()
     ipshell() # this call anywhere in your program will start IPython


have fun,

Thorsten

-- 
brainbot technologies AG 
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




From david at zeos.org  Tue Mar  2 04:49:29 2004
From: david at zeos.org (David Burton)
Date: Tue, 02 Mar 2004 11:49:29 +0000
Subject: [Twisted-Python] [Request] IMAP Server Sample code
Message-ID: <404474C9.2020901@zeos.org>

Hi guys, I'm new to the list, but I've had a look through the site and 
the mailing list archives, looking for some sample code which would help 
me in setting up the basics of an IMAP server - specifically to get mail 
from a POP account (which is easy enough), store it in a database 
(again, easy enough), and set up the interface to the database messages 
(and possible other non-email goodies) using IMAP (currently not a clue).
I've tried looking through the API and the source code, but I don't know 
what I should be returning from the likes of authenticateLogin to 
confirm (or refect logins), and what to return via listCapabilities (I'm 
currently . Any lists of which methods should generally work without 
overriding, which ones should be overridden, what needs to be returned, 
etc gratefully received.

I'm quite happy to play around a bit, so long as there's a little hint 
as to what kind of stuff should be returned - I'm really needing to get 
listing of capabilities and authentication figured out first of all, so 
if anyone can help...

(As an aside, the reason for the project is that my general impressions 
are that XMail is one of the few free POP3 mail servers on Windows, and 
very capable, but missing IMAP - I'm trying to create an extension to do 
this.)

Thanks in advance,
David Burton




From andrew-twisted at puzzling.org  Tue Mar  2 05:30:00 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 2 Mar 2004 23:30:00 +1100
Subject: [Twisted-Python] Using Twisted together with Windows Namespace Extensions
In-Reply-To: <404458A4.3090201@brainbot.com>
References: <404373EF.40807@brainbot.com> <1078168552.14438.1.camel@sheriffpony> <404458A4.3090201@brainbot.com>
Message-ID: <20040302123000.GA19856@frobozz>

On Tue, Mar 02, 2004 at 10:49:24AM +0100, Thorsten Henninger wrote:
[...]
> Well, I do not really understand, how they differ.
> For example:
> reactor.runFromThread
> reactor.runInThread
> 
> and what is the difference between
> threads.deferToThread and reactor.callInThread ?
> Both methods worked fine.

Have you seen these links?

     http://twistedmatrix.com/documents/current/howto/threading
     http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html#callFromThread
     http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html#callInThread
     http://twistedmatrix.com/documents/current/api/twisted.internet.threads.html#deferToThread

Note that deferToThread is just a simple (but useful!) wrapper around
callInThread -- you can read the implementation in
twisted/internet/threads.py, it's quite short.

Let us know if it still doesn't make sense.  Those docstrings are a little
confusing.

> Is it threadsafe to run the reactor in a thread?

The reactor doesn't care which thread it is run in (although if it's not
Python's main thread you might want to set installSignalHandlers=0).

-Andrew.




From andy at thecablelounge.com  Tue Mar  2 06:06:48 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Tue, 02 Mar 2004 23:06:48 +1000
Subject: [Twisted-Python] [Request] IMAP Server Sample code
In-Reply-To: <404474C9.2020901@zeos.org>
References: <404474C9.2020901@zeos.org>
Message-ID: <404486E8.2010203@thecablelounge.com>

David Burton wrote:
> Hi guys, I'm new to the list, but I've had a look through the site and 
> the mailing list archives, looking for some sample code which would help 
> me in setting up the basics of an IMAP server - specifically to get mail 
> from a POP account (which is easy enough), store it in a database 
> (again, easy enough), and set up the interface to the database messages 
> (and possible other non-email goodies) using IMAP (currently not a clue). 

G'dday David, I'm pretty new myself.  Not sure if this is what you're 
after ... but Quotient, available from:

http://divmod.org/Quotient/index.html

looks to be a good way along as an email server - though not quite 
production ready yet.  It supports fetching (consolidating) mail from 
both imap and pop servers and makes the consolidated mail available via 
pop, imap or web browser.

Andy.



From Richard.Townsend at edl.uk.eds.com  Tue Mar  2 08:57:28 2004
From: Richard.Townsend at edl.uk.eds.com (Richard.Townsend at edl.uk.eds.com)
Date: Tue, 2 Mar 2004 15:57:28 -0000 
Subject: [Twisted-Python] resource.render_METHOD
Message-ID: <68CF619C1F239A4A8BB8EDD3D1657DC827B254@ukhkc202.edsadewd.edl.uk.eds.com>

I have a server application that creates a number of web resources (derived
from resource.Resource). Some of the resources only handle GET requests,
while others only handle POSTs.

Currently the resources only override the render() method. I want to change
them to override render_GET() or render_POST() as appropriate.

I notice that if a resource receives a request it doesn't handle, then an
UnsupportedMethod exception is raised. This returns HTML to the client
containing a message that uses UnsupportedMethod.allowedMethods. This
defaults to an empty tuple. 

Because my resources support different request methods, I have to set
allowedMethods in each resource's render() method e.g.

    def render(self, request):
        server.UnsupportedMethod.allowedMethods = ('POST',)
        resource.Resource.render(self, request)

So I still need to override the render() method. 

Is there a neater way to do this?

I'm using Twisted 1.2.0

regards
Richard Townsend
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040302/8491b2b4/attachment.html>

From radix at twistedmatrix.com  Tue Mar  2 09:44:10 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 02 Mar 2004 11:44:10 -0500
Subject: [Twisted-Python] resource.render_METHOD
In-Reply-To: <68CF619C1F239A4A8BB8EDD3D1657DC827B254@ukhkc202.edsadewd.edl.uk.eds.com>
References: <68CF619C1F239A4A8BB8EDD3D1657DC827B254@ukhkc202.edsadewd.edl.uk.eds.com>
Message-ID: <4044B9DA.5030606@twistedmatrix.com>

Richard.Townsend at edl.uk.eds.com wrote:
> I notice that if a resource receives a request it doesn't handle, then an
> UnsupportedMethod exception is raised. This returns HTML to the client
> containing a message that uses UnsupportedMethod.allowedMethods. This
> defaults to an empty tuple. 

> Is there a neater way to do this?

Hmm. I suppose render() could grope through methods on self to find all 
'render_FOO' methods when an exception occurs.. OTOH, we could just get 
rid of the allowed methods reporting. What's the use?

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040302/172f9265/attachment.sig>

From Richard.Townsend at edl.uk.eds.com  Wed Mar  3 01:50:16 2004
From: Richard.Townsend at edl.uk.eds.com (Richard.Townsend at edl.uk.eds.com)
Date: Wed, 3 Mar 2004 08:50:16 -0000 
Subject: [Twisted-Python] resource.render_METHOD
Message-ID: <68CF619C1F239A4A8BB8EDD3D1657DC827B255@ukhkc202.edsadewd.edl.uk.eds.com>

> Hmm. I suppose render() could grope through methods on self to find all
> 'render_FOO' methods when an exception occurs.. OTOH, we could just get
> rid of the allowed methods reporting. What's the use?

Perhaps the Resource.render() method could check for self.allowedMethods
instead of server.UnsupportedMethod.allowedMethods, then I could set it
as a class attribute in each derived class?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040303/662b214e/attachment.html>

From radix at twistedmatrix.com  Wed Mar  3 10:49:44 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 03 Mar 2004 12:49:44 -0500
Subject: [Twisted-Python] resource.render_METHOD
In-Reply-To: <68CF619C1F239A4A8BB8EDD3D1657DC827B255@ukhkc202.edsadewd.edl.uk.eds.com>
References: <68CF619C1F239A4A8BB8EDD3D1657DC827B255@ukhkc202.edsadewd.edl.uk.eds.com>
Message-ID: <40461AB8.5030906@twistedmatrix.com>

Richard.Townsend at edl.uk.eds.com wrote:
>>Hmm. I suppose render() could grope through methods on self to find all
>>'render_FOO' methods when an exception occurs.. OTOH, we could just get
>>rid of the allowed methods reporting. What's the use?
> 
> 
> Perhaps the Resource.render() method could check for self.allowedMethods
> instead of server.UnsupportedMethod.allowedMethods, then I could set it
> as a class attribute in each derived class?

Good idea. It's in CVS, along with a fix to make UnsupportedMethod 
actually useful.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040303/798e179a/attachment.sig>

From michal at pasternak.w.lub.pl  Wed Mar  3 13:16:14 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Wed, 3 Mar 2004 21:16:14 +0100
Subject: [Twisted-Python] deferDirWalk code snipped
Message-ID: <20040303201614.GA58106@pasternak.w.lub.pl>

Hi,

attached is a simple defer analogue to os.path.walk. It can be paused, it
can be restarted. I've wrote this code making some simple gtk backup
application. Perhaps this could be placed in examples somewhere (or even
included in the library). If someone would like to comment on my code, feel
free to do it, I always like constructive criticism ;)

Keep hacking,
-- 
Michal Pasternak :: http://pasternak.w.lub.pl :: http://winsrc.sf.net
"There's so much comedy on television. Does that cause comedy in the streets?" 
	-- Dick Cavett
-------------- next part --------------
#
# deferDirWalk.py
# (C) 2004 Michal Pasternak
# This code is public domain
#

import dircache
from twisted.internet import defer

class deferDirWalk:
    def __init__(self, baseDir, statusProc = None, skipList = [], getMTime = False):
        """
        statusProc is sent 3 arguments: total files processed, total size of files processed and the last directory name,
        skipList is a list of directories, that should be skipped,
        getMTime is a boolean value, which tells the walker to get mtimes of files also
        """
        self.baseDir = baseDir
        self.skipList = skipList
        self.statusProc = statusProc
        self.getMTime = getMTime
        self.restart()

    def restart(self):
        self.dirsToCheck = [os.path.realpath(self.baseDir)]
        self.totalSize = 0
        self.doPause = False
        self.working = False
        self.fileDict = {}  

    def run(self):
        """
        returns a defer, which will be called after processing of directories is finished.
        """
        self.d = defer.Deferred()
        self.working = True
        reactor.callLater(0.1, self.nextStep)
        return self.d

    def nextStep(self):
        if len(self.dirsToCheck):
            if not self.doPause:
                for entry in dircache.listdir(self.dirsToCheck[0]):
                    p = os.path.join(self.dirsToCheck[0], entry)
                    if os.path.islink(p):
                        continue
                    elif os.path.isdir(p):
                        try:
                            self.skipList.index(entry)
                        except ValueError:
                            self.dirsToCheck.append(p)
                    elif os.path.isfile(p):
                        try:
                            s = os.path.getsize(p)
                            if self.getMTime:
                                self.fileDict[p]=(s, os.path.getmtime(p))
                            else:
                                self.fileDict[p]=(s, None)                                
                            self.totalSize+=s
                        except OSError:
                            log("Cannot stat %s" % p)
                if self.statusProc:
                    self.statusProc(len(self.fileDict.items()),
                                    self.totalSize,
                                    self.dirsToCheck[0])
                self.dirsToCheck = self.dirsToCheck[1:]
            reactor.callLater(0.01, self.nextStep)
        else:
            self.working = False
            self.d.callback((self.fileDict, self.totalSize))

    def pause(self, doPause):
        """
        if doPause is True, work of walker is paused;
        it is unpaused if it is not
        """
        self.doPause = doPause


if __name__ == "__main__":
    from twisted.internet import reactor
    import os, sys

    def archiveWalkStatus(fileCount, fileSize, lastDir):
        sys.stdout.write("%s (analyzed %i files (total size: %.2f MB))...\r" % (lastDir, fileCount, float(fileSize / (1024.0*1024.0))))
        sys.stdout.flush()

    def archiveWalkDone(retVal):
        (fileDict, fileSize) = retVal
        sys.stdout.write("\nJob done!\n")
        sys.stdout.write("Totals:\n\tfiles: %i\n\tsize: %i bytes\n\n" % (len(fileDict.keys()), fileSize))
        sys.stdout.flush()
        reactor.stop()

    if len(sys.argv)<2:
        sys.stdout.write("usage: deferDirWalk.py dirname\n")
        sys.exit(1)
        
    archiveWalker = deferDirWalk(os.path.realpath(sys.argv[1]), archiveWalkStatus)
    archiveWalker.run().addCallback(archiveWalkDone)
    reactor.run()

From itamar at itamarst.org  Wed Mar  3 13:47:00 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 03 Mar 2004 15:47:00 -0500
Subject: [Twisted-Python] deferDirWalk code snipped
In-Reply-To: <20040303201614.GA58106@pasternak.w.lub.pl>
References: <20040303201614.GA58106@pasternak.w.lub.pl>
Message-ID: <1078346820.14580.63.camel@sheriffpony>

On Wed, 2004-03-03 at 15:16, Michal Pasternak wrote:

>  If someone would like to comment on my code, feel
> free to do it, I always like constructive criticism ;)

Separate the code into two parts - an iterator (probably using
generators) that walks a directory, and then a Twisted wrapper that uses
reactor scheduling to spread it out over time.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From exarkun at divmod.com  Wed Mar  3 16:57:20 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Wed, 03 Mar 2004 23:57:20 GMT
Subject: [Twisted-Python] [Request] IMAP Server Sample code
Message-ID: <20040303235720.13113.1049884722.divmod.quotient.3@erlang.divmod.net>

On Tue, 02 Mar 2004 11:49:29 +0000, David Burton <david at zeos.org> wrote:
>Hi guys, I'm new to the list, but I've had a look through the site and 
> the mailing list archives, looking for some sample code which would help 
> me in setting up the basics of an IMAP server - specifically to get mail 
> from a POP account (which is easy enough), store it in a database 
> (again, easy enough), and set up the interface to the database messages 
> (and possible other non-email goodies) using IMAP (currently not a clue).
> I've tried looking through the API and the source code, but I don't know 
> what I should be returning from the likes of authenticateLogin to 
> confirm (or refect logins), and what to return via listCapabilities (I'm 
> currently . Any lists of which methods should generally work without 
> overriding, which ones should be overridden, what needs to be returned, 
> etc gratefully received.

  twisted.protocols.imap4.IMAP4Server is written so that, in most cases, it need not be subclassed.  The preferred way to implement a server is to implement the interfaces IMAP4Server depends on.  The two required interfaces are IAccount and IMailbox, both of which are defined in twisted.protocols.imap4.  There are several other optional interfaces as well.  Ideally, accounts and mailboxes are hooked up to an IMAP4Server protocol instance via twisted.cred.  Here is a brief example:

    from twisted.cred import portal
    from twisted.protocols import imap4

    class Account:
        __implements__ = (imap4.IAccount,)

        # Actually implement the interface here


    def logout():
        # Cleanup logic goes here

    class Realm:
        __implements__ = (portal.IRealm,)

        def requestAvatar(self, avatarID, mind, *interfaces):
            if imap4.IAccount not in interfaces:
                raise NotImplementedError
            return imap4.IAccount, Account(avatarID), logout

    p = portal.Portal(Realm())

    # Contrive to have your ServerFactory's buildProtocol
    # set the "portal" attribute of the IMAP4Server instance
    # it creates to the `p' defined above.

  For more information, refer to the cred and component howtos available on the Twisted website.

  Jp



From radix at twistedmatrix.com  Wed Mar  3 20:06:16 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 03 Mar 2004 22:06:16 -0500
Subject: [Twisted-Python] Re: [Stackless] Stackless and Twisted
In-Reply-To: <404541B0.5020204@twistedmatrix.com>
References: <20040301145723.11366.qmail@web41001.mail.yahoo.com>	<40435224.8070905@stackless.com>	<948B7162-6BB5-11D8-93F5-000A95686CD8@redivi.com>	<4043964D.7000404@twistedmatrix.com>	<6FD28371-6BBD-11D8-93F5-000A95686CD8@redivi.com>	<40439DD3.2010801@twistedmatrix.com>	<4043A939.7000106@stackless.com>	<4043AA8F.8080103@twistedmatrix.com>	<40452B90.6090104@stackless.com> <404541B0.5020204@twistedmatrix.com>
Message-ID: <40469D28.9030603@twistedmatrix.com>

Ok, here's a completely rewritten stackless support module for Twisted. 
I used to have one that did all kinds of stupid unnecessary stuff with 
the reactor and junk, but it's gone now. For you CVS Twisted users, this 
is in sandbox/radix/threadless.py.

It offers two functions: blockOn and deferredTasklet.

deferredTasklet is a function decorator that you should use on your 
stacklessy code that you want to integrate with Twisted.

blockOn is a function that you should pass a Deferred to wait for it to 
fire. Use it in your stacklessy-code.

There's a TEST function (that's automatically run when you execute the 
module) that shows this off with some somewhat helpful comments. There 
are also prints sprinkled throughout the code to show you what's going on.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: threadless.py
Type: text/x-python
Size: 1974 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040303/7d66388b/attachment-0002.py>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040303/7d66388b/attachment.sig>

From mthiercy at spiralnet.net  Thu Mar  4 02:48:21 2004
From: mthiercy at spiralnet.net (Max Thiercy)
Date: Thu, 4 Mar 2004 10:48:21 +0100
Subject: [Twisted-Python] Running twisted tap file as NT service.
Message-ID: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>

I'm trying to implement a small dedicated service on both Windows and Unix.
So, I'm interesting in the capability of converting a twisted .tap file to
an NT/2K/XP service.

I read some useful mails from Cory Dodt (end of january 2004) but these
mails mention a tool named 'tap2ntsvc' that I can't find anywhere.

Could you tell me where I can find this tool ?

Thanks in advance.

Max THIERCY.




From andrew-twisted at puzzling.org  Thu Mar  4 02:58:48 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 4 Mar 2004 20:58:48 +1100
Subject: [Twisted-Python] Running twisted tap file as NT service.
In-Reply-To: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>
References: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>
Message-ID: <20040304095848.GA21671@frobozz>

On Thu, Mar 04, 2004 at 10:48:21AM +0100, Max Thiercy wrote:
> I'm trying to implement a small dedicated service on both Windows and Unix.
> So, I'm interesting in the capability of converting a twisted .tap file to
> an NT/2K/XP service.
> 
> I read some useful mails from Cory Dodt (end of january 2004) but these
> mails mention a tool named 'tap2ntsvc' that I can't find anywhere.
> 
> Could you tell me where I can find this tool ?

It's in the "sandbox/moonfallen" directory in CVS.  You browse it on the web
here:
    http://cvs.twistedmatrix.com/cvs/sandbox/moonfallen/

The easiest way to get it is probably to checkout a copy of the CVS
repository, though (brief instructions at http://cvs.twistedmatrix.com/).

-Andrew.




From douglas at paradise.net.nz  Thu Mar  4 04:04:58 2004
From: douglas at paradise.net.nz (Douglas Bagnall)
Date: Fri, 05 Mar 2004 00:04:58 +1300
Subject: [Twisted-Python] deferDirWalk code snipped
In-Reply-To: <1078346820.14580.63.camel@sheriffpony>
References: <20040303201614.GA58106@pasternak.w.lub.pl>
 <1078346820.14580.63.camel@sheriffpony>
Message-ID: <40470D5A.5080104@paradise.net.nz>


Itamar Shtull-Trauring wrote:
> 
> Separate the code into two parts - an iterator (probably using
> generators) that walks a directory, 

which could perhaps be 2.3's os.walk, or derived thereof.  It's tiny.

http://cvs.sf.net/viewcvs.py/python/python/dist/src/Lib/os.py?rev=1.74&view=auto

> and then a Twisted wrapper that uses
> reactor scheduling to spread it out over time.
> 

douglas



From njp at njp.us  Thu Mar  4 09:08:04 2004
From: njp at njp.us (Norm Petterson)
Date: Thu, 4 Mar 2004 11:08:04 -0500
Subject: [Twisted-Python] Deterministic TimerService
Message-ID: <0e4f01c40202$e0456190$6401a8c0@njpdesk>

Hi,

Thanks for such a useful framework.

While working on an industrial data logger using Twisted, I found that
application.internet.TimerService calls my own callLater callable function
before reissuing the next callLater. Consequently, instead of a time period
c, the callable function runs every c+x, where x is the duration of my own
function, and thus appears to slip over time.

Based on my past experiences with DEC RSX "mark time" and VMS "set timer" in
similar situations, I recommend changing:

def setupCall():
    self.callable(*self.args, **self.kwargs)
    self._call  =  reactor.callLater(self.step, setupCall)

to

def setupCall():
    self._call  =  reactor.callLater(self.step, setupCall)
    self.callable(*self.args, **self.kwargs)

Reissuing the timer request first appears to work more as I'd expect,
particularly as I am using timestamp information for each scan to compute an
appropriate bsddb record number in a persistent circular buffer. Any other
opinions?

Regards,

Norm Petterson




From itamar at itamarst.org  Thu Mar  4 09:41:11 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 04 Mar 2004 11:41:11 -0500
Subject: [Twisted-Python] Running twisted tap file as NT service.
In-Reply-To: <20040304095848.GA21671@frobozz>
References: <DHEGKIOFIFAPLOLGGONCCEFDCGAA.mthiercy@spiralnet.net>
	 <20040304095848.GA21671@frobozz>
Message-ID: <1078418470.14575.116.camel@sheriffpony>

On Thu, 2004-03-04 at 04:58, Andrew Bennetts wrote:

> The easiest way to get it is probably to checkout a copy of the CVS
> repository, though (brief instructions at http://cvs.twistedmatrix.com/).

The 1.2.0 tarball should include it as well, I think.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From itamar at itamarst.org  Thu Mar  4 09:43:26 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 04 Mar 2004 11:43:26 -0500
Subject: [Twisted-Python] Deterministic TimerService
In-Reply-To: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
References: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
Message-ID: <1078418606.19549.119.camel@sheriffpony>

On Thu, 2004-03-04 at 11:08, Norm Petterson wrote:

> While working on an industrial data logger using Twisted, I found that
> application.internet.TimerService calls my own callLater callable function
> before reissuing the next callLater. Consequently, instead of a time period
> c, the callable function runs every c+x, where x is the duration of my own
> function, and thus appears to slip over time.

TimerService in 1.2.0 uses twisted.internet.task.LoopingCall internally,
which deals with this a bit better. Try upgrading and tell us if it
solves your problem?

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From thomas.mangin at exa-networks.co.uk  Thu Mar  4 09:51:30 2004
From: thomas.mangin at exa-networks.co.uk (Thomas Mangin)
Date: Thu, 04 Mar 2004 16:51:30 +0000
Subject: [Twisted-Python] Deterministic TimerService
In-Reply-To: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
References: <0e4f01c40202$e0456190$6401a8c0@njpdesk>
Message-ID: <1078419090.3212.40.camel@thomas_mangin.dc.exa.net.uk>

Hello,

> While working on an industrial data logger using Twisted, I found that
> application.internet.TimerService calls my own callLater callable function
> before reissuing the next callLater. Consequently, instead of a time period
> c, the callable function runs every c+x, where x is the duration of my own
> function, and thus appears to slip over time.

I never used this feature but, for what it is worth, I agree with what
you are saying .

However I recall a nasty side effect that this behaviour had. If your
callback are taking all the CPU and can not finish before the new
callback is scheduled, it will cause the box to hit more and more CPU
and memory until something bad happens.

I think that an adding an optional flag to not allow the new callback to
run if the previous one is not completed would be a good idea.

My $.02 as I do not have any code to contribute.

Thomas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040304/1772670b/attachment.sig>

From njp at njp.us  Thu Mar  4 12:05:30 2004
From: njp at njp.us (Norm Petterson)
Date: Thu, 4 Mar 2004 14:05:30 -0500
Subject: [Twisted-Python] Deterministic TimerService
References: <0e4f01c40202$e0456190$6401a8c0@njpdesk> <1078418606.19549.119.camel@sheriffpony>
Message-ID: <0f2301c4021b$a9666890$6401a8c0@njpdesk>

Yup, the 1.2.0 TimerService runs like a Swiss watch (no apparent time
slippage at all). Thanks.

I'll remember to check the latest version in the future ;-)...

----- Original Message ----- 
From: "Itamar Shtull-Trauring" <itamar at itamarst.org>
To: <twisted-python at twistedmatrix.com>
Sent: Thursday, March 04, 2004 11:43 AM
Subject: Re: [Twisted-Python] Deterministic TimerService


> On Thu, 2004-03-04 at 11:08, Norm Petterson wrote:
>
> > While working on an industrial data logger using Twisted, I found that
> > application.internet.TimerService calls my own callLater callable
function
> > before reissuing the next callLater. Consequently, instead of a time
period
> > c, the callable function runs every c+x, where x is the duration of my
own
> > function, and thus appears to slip over time.
>
> TimerService in 1.2.0 uses twisted.internet.task.LoopingCall internally,
> which deals with this a bit better. Try upgrading and tell us if it
> solves your problem?
>
> -- 
> Itamar Shtull-Trauring    http://itamarst.org
> Looking for a job: http://itamarst.org/resume.html
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From henni at brainbot.com  Tue Mar  2 03:10:23 2004
From: henni at brainbot.com (Thorsten Henninger)
Date: Tue, 02 Mar 2004 11:10:23 +0100
Subject: [Twisted-Python] WebDAV for Twisted
Message-ID: <40445D8F.2030803@brainbot.com>

Hi all,

since some people were interested in using WebDAV together with Twisted
recently, I decided to send you my current work on this.
I essentially used the "pydav" implementation:

http://www.comlounge.net/webdav/

and wrote a twisted extension. Once you are familar with "pydav", the
twisted extension is self-explaning. I hope, the short README.txt will
help you. By the way, I tested this implementation  together with the
Windows Explorer and cadaver, a command line WebDAV client.

In my opinion, it would be very useful to integrate WebDAV support in
Twisted.
Well,  since I have never contributed code to twisted, I do not know,
how to do this.

regards,

Thorsten


-- 
brainbot technologies AG
boppstrasse . 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:henni at brainbot.com




-------------- next part --------------
A non-text attachment was scrubbed...
Name: py-dav.zip
Type: application/zip
Size: 87638 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040302/0d4dfb44/attachment-0002.zip>

From steve_g at ix.netcom.com  Tue Mar  2 04:00:24 2004
From: steve_g at ix.netcom.com (Steve Goldman)
Date: Tue, 2 Mar 2004 06:00:24 -0500
Subject: [Twisted-Python] Bug in twistw.py
Message-ID: <000701c40045$90dd9280$0200000a@fred>

Sorry for posting here, but I couldn't get the bug tracker to register me.

The twistw.py file provided by the windows installers for python 2.2 and
python 2.3 doesn't have any main function.  It needs the following lines
added to the end of the script:

if __name__ == "__main__":
     run()

Thanks.





From radix at twistedmatrix.com  Thu Mar  4 17:05:27 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 04 Mar 2004 19:05:27 -0500
Subject: [Twisted-Python] Bug in twistw.py
In-Reply-To: <000701c40045$90dd9280$0200000a@fred>
References: <000701c40045$90dd9280$0200000a@fred>
Message-ID: <4047C447.2040402@twistedmatrix.com>

Steve Goldman wrote:
> Sorry for posting here, but I couldn't get the bug tracker to register me.
> 
> The twistw.py file provided by the windows installers for python 2.2 and
> python 2.3 doesn't have any main function.  It needs the following lines
> added to the end of the script:
> 
> if __name__ == "__main__":
>      run()
> 
> Thanks.

No, I don't think so... 'twistd' uses the twistw module when it's run on 
windows. You're not supposed to run twistw.py directly.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040304/1f1a1ca5/attachment.sig>

From itamar at itamarst.org  Fri Mar  5 09:19:01 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 05 Mar 2004 11:19:01 -0500
Subject: [Twisted-Python] Lock class using Deferreds
Message-ID: <1078503541.14577.234.camel@sheriffpony>

class Lock:
    """A lock for event driven systems."""

    def __init__(self):
        self.waiting = []
        self.locked = 0

    def acquire(self):
        """Attempt to acquire the lock.

        @return Deferred which returns on lock acquisition.
        """
        d = defer.Deferred()
        if self.locked:
            self.waiting.append(d)
        else:
            self.locked = 1
            d.callback(self)
        return d

    def release(self):
        """Release the lock.

        Should be called by whoever did the acquire() when the shared
        resource is free.
        """
        assert self.locked
        self.locked = 0
        if self.waiting:
            # someone is waiting to acquire lock
            self.locked = 1
            d = self.waiting.pop(0)
            d.callback(self)

    def _releaseAndReturn(self, r):
        self.release()
        return r
    
    def run(self, f, *args, **kwargs):
        """Acquire lock, run function, release lock.

        @return Deferred of function result.
        """
        d = self.acquire()
        d.addCallback(lambda r: defer.maybeDeferred(f, *args, **kwargs).addBoth(self._releaseAndReturn))
        return d

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andrew-twisted at puzzling.org  Fri Mar  5 16:20:16 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sat, 6 Mar 2004 10:20:16 +1100
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <1078503541.14577.234.camel@sheriffpony>
References: <1078503541.14577.234.camel@sheriffpony>
Message-ID: <20040305232016.GA1878@frobozz>

On Fri, Mar 05, 2004 at 11:19:01AM -0500, Itamar Shtull-Trauring wrote:
> class Lock:
>     """A lock for event driven systems."""

I have very very similiar looking code on my harddisk... what inspired you
to write this? :)

>     def release(self):
>         """Release the lock.
> 
>         Should be called by whoever did the acquire() when the shared
>         resource is free.
>         """
>         assert self.locked
>         self.locked = 0
>         if self.waiting:
>             # someone is waiting to acquire lock
>             self.locked = 1
>             d = self.waiting.pop(0)
>             d.callback(self)

In my version, I had a 'throttle' instance attribute:
    d = self.queue.pop(0)
    if self.throttle:
        reactor.callLater(0, d.callback, self)
    else:
        d.callback(self)

Considering I never actually *used* my version, this might be a premature
feature addition, though.

>     def _releaseAndReturn(self, r):
>         self.release()
>         return r

I wonder if this convenience function should also call log.err if
isinstance(r, failure.Failure)?  But that's probably just premature
featuritus again :)

So, where in Twisted is a good spot for it?  twisted.internet.util?

-Andrew.




From radix at twistedmatrix.com  Fri Mar  5 16:34:44 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 05 Mar 2004 18:34:44 -0500
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <20040305232016.GA1878@frobozz>
References: <1078503541.14577.234.camel@sheriffpony> <20040305232016.GA1878@frobozz>
Message-ID: <40490E94.6070108@twistedmatrix.com>

Andrew Bennetts wrote:
> On Fri, Mar 05, 2004 at 11:19:01AM -0500, Itamar Shtull-Trauring wrote:
> 
>>class Lock:
>>    """A lock for event driven systems."""
> 
> 
> I have very very similiar looking code on my harddisk... what inspired you
> to write this? :)

I have something vaguely similar too; a class that handled a 'pipeline' 
(?) of Deferreds and didn't allow more than N at a time. My purpose for 
it was doing several thousand DNS queries and I only wanted at most N 
outstanding requests at a time, so I wouldn't overload the servers. Ok, 
so it's not that similar, but it's something that would probably go in 
the same module ;-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040305/95b545ff/attachment.sig>

From exarkun at divmod.com  Fri Mar  5 17:21:00 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Sat, 06 Mar 2004 00:21:00 GMT
Subject: [Twisted-Python] Lock class using Deferreds
Message-ID: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net>

On Fri, 05 Mar 2004 18:34:44 -0500, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>Andrew Bennetts wrote:
> > On Fri, Mar 05, 2004 at 11:19:01AM -0500, Itamar Shtull-Trauring wrote:
> > 
> >>class Lock:
> >>    """A lock for event driven systems."""
> > 
> > 
> > I have very very similiar looking code on my harddisk... what inspired you
> > to write this? :)
> 
> I have something vaguely similar too; a class that handled a 'pipeline' 
> (?) of Deferreds and didn't allow more than N at a time. My purpose for 
> it was doing several thousand DNS queries and I only wanted at most N 
> outstanding requests at a time, so I wouldn't overload the servers. Ok, 
> so it's not that similar, but it's something that would probably go in 
> the same module ;-)

  Actually, it is extremely similar.  It's called a semaphore :)  This,
along with a condition class would probably all make for a good module.

  I was thinking twisted.python.defertools, if only defer wasn't part of
twisted.internet :(

  Jp




From andy at thecablelounge.com  Fri Mar  5 19:47:17 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 06 Mar 2004 12:47:17 +1000
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net>
Message-ID: <40493BB5.4000504@thecablelounge.com>

 >> On Fri, 05 Mar 2004 18:34:44 -0500, Christopher Armstrong 
<radix at twistedmatrix.com> wrote:
>>I have something vaguely similar too; a class that handled a 'pipeline' 
>>(?) of Deferreds and didn't allow more than N at a time. My purpose for 
>>it was doing several thousand DNS queries and I only wanted at most N 
>>outstanding requests at a time, so I wouldn't overload the servers. Ok, 
>>so it's not that similar, but it's something that would probably go in 
>>the same module ;-)

> exarkun at divmod.com wrote:
> Actually, it is extremely similar.  It's called a semaphore :) 
> 

To be sure :)

class Semaphore:
     """A semaphore for event driven systems."""

     def __init__(self, tokens):
         self.waiting = []
         self.tokens  = tokens
	self.limit   = tokens

     def acquire(self):
         """Attempt to acquire the token.

         @return Deferred which returns on token acquisition.
         """
	assert self.tokens >= 0
         d = defer.Deferred()
         if not self.tokens:
             self.waiting.append(d)
         else:
             self.tokens = self.tokens - 1
             d.callback(self)
         return d

     def release(self):
         """Release the token.

         Should be called by whoever did the acquire() when the shared
         resource is free.
         """
         assert self.tokens < self.limit
         self.tokens = self.tokens + 1
         if self.waiting:
             # someone is waiting to acquire token
             self.tokens = self.tokens - 1
             d = self.waiting.pop(0)
             d.callback(self)

     def _releaseAndReturn(self, r):
         ....

class Lock (Semaphore) :
     def __init__(self) :
         Semaphore.__init__(self, 1)

Andy.



From trevp at trevp.net  Fri Mar  5 23:33:48 2004
From: trevp at trevp.net (Trevor Perrin)
Date: Fri, 05 Mar 2004 22:33:48 -0800
Subject: [Twisted-Python] Twisted + tlslite
Message-ID: <5.2.0.9.0.20040305205642.037cb708@pop.sbcglobal.yahoo.com>


Hi Twisted folks,

I recently wrote an SSL library in python [1] and got it working with 
asyncore.  I'd like to make it useable with Twisted too.  The library has a 
few nice features, so it wouldn't be totally redundant with Twisted's 
current SSL support:
  - it can run in pure python (slowly)
  - it supports some nonstandard authentication methods (SRP, cryptoIDs, 
and shared-keys)

As a proof-of-concept I did some blunt-object surgery, and got Twisted's 
pre-configured web server using it for HTTPS.

To do a real integration, though, I think I'd need help: I'm a Twisted 
newbie, and Twisted looks tightly-coupled with PyOpenSSL.  At least, 
there's no easy way to "plug in" that I saw.  In the mailing list there was 
talk about Jython/Java SSL [2].  That would have the same issues, I think, 
so maybe they could be looked at together.

Anyways, if anyone's interested in discussing the details, let me know!

Thanks,
Trevor

[1] http://trevp.net/tlslite/
[2] 
http://www.twistedmatrix.com/pipermail/twisted-python/2004-January/006892.html













From radix at twistedmatrix.com  Sat Mar  6 00:00:12 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 06 Mar 2004 02:00:12 -0500
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <40493BB5.4000504@thecablelounge.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com>
Message-ID: <404976FC.6080207@twistedmatrix.com>

Andy Gayton wrote:
>> exarkun at divmod.com wrote:
>> Actually, it is extremely similar.  It's called a semaphore :)
> 
> 
> To be sure :)
> 
> class Semaphore:
>     """A semaphore for event driven systems."""

My thing looks somewhat different; there's no 'release'...

I haven't really put much time into figuring out what's going on in this 
thread, but exarkun wanted me to post my code. It's got a couple of 
things in it that are app-specific and probably isn't optimally factored.


class DeferredQueue:

     MAX_REQUESTS = 20

     def __init__(self, source, request):
         self.deferreds = {}
         self.source = source
         self.request = request
         for _ in range(self.MAX_REQUESTS):
             self.getMore()

     def getMore(self):
         assert len(self.deferreds) < self.MAX_REQUESTS

         try:
             sink, input = self.source.next()
         except StopIteration:
             return

         d = self.request(input)
         self.deferreds[input] = d

         #XXX fixme app-specific
         d.addBoth(self._cbGotSync, input)
         d.addCallback(sink)

         def _err(f):
             #XXX fixme app-specific
             if f.check(NotSync, defer.TimeoutError):
                 return
             print f
             return

         d.addErrback(_err)

     def _cbGotSync(self, result, input):
         del self.deferreds[input]
         self.getMore()
         return result



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040306/145e5a8e/attachment.sig>

From andy at thecablelounge.com  Sat Mar  6 01:46:59 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 06 Mar 2004 18:46:59 +1000
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <404976FC.6080207@twistedmatrix.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com> <404976FC.6080207@twistedmatrix.com>
Message-ID: <40499003.60308@thecablelounge.com>

Christopher Armstrong wrote:

>  haven't really put much time into figuring out what's going on in this thread,

Putting the Lock with similiar tools into a module I think ...

> class DeferredQueue:
> 
>     MAX_REQUESTS = 20

You twisted guys have a way of coding stuff that makes me go cross-eyed :)

You're right - it is a bit different.  DeferredQueue takes a known 
amount of work you've got to get through and feeds it out at a 
controlled rate - the modified Itamar's Lock is a similiar control but 
accepts spontaneous requests for work.

I think the following would work similiar to yours Chris ? ..

dnsRequest_Semaphore = Semaphore(20)
for (sink, input) in source :
     dnsRequest_Semaphore.run( request, input ).addCallback( sink )

???? is that right - still getting a handle on defers :) :(

the above doesn't cover the error handling you are doing though .. I 
can't quite work out that bit ...

Andy.



From radix at twistedmatrix.com  Sat Mar  6 12:18:43 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 06 Mar 2004 14:18:43 -0500
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <40499003.60308@thecablelounge.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com> <404976FC.6080207@twistedmatrix.com> <40499003.60308@thecablelounge.com>
Message-ID: <404A2413.1020105@twistedmatrix.com>

Andy Gayton wrote:
> Christopher Armstrong wrote:
> 
>>  haven't really put much time into figuring out what's going on in 
>> this thread,
> 
> 
> Putting the Lock with similiar tools into a module I think ...

I meant, I haven't bothered enough to actually grok all the code. :)

> You twisted guys have a way of coding stuff that makes me go cross-eyed :)

Well, the app I was writing at the time was kind of weird. ;-)

> I think the following would work similiar to yours Chris ? ..
> 
> dnsRequest_Semaphore = Semaphore(20)
> for (sink, input) in source :
>     dnsRequest_Semaphore.run( request, input ).addCallback( sink )


Dunno, maybe someone else can actually grok what's going on here (I 
haven't sufficiently bothered to read your Semaphore class :P). If it is 
the same, then your Semaphore class is obviously better :) OTOH, my 
thing didn't call .next() on the source until its result was actually 
required, but this snippet is obviously queuing up the (potentially 
thousands) of operations in the Semaphore.. Probably doesn't actually 
matter.

> ???? is that right - still getting a handle on defers :) :(
> 
> the above doesn't cover the error handling you are doing though .. I 
> can't quite work out that bit ...

As the comments pointed out, the bit of error-handling was 
application-specific. I made a mistake, btw: the *first* "xxx fixme 
app-specific" wasn't actually app-specific (the 
addBoth(self._cbGotSync)) -- it was just an unfortunately 
specifically-named method. The NotSync error handling was indeed 
specific to the app I was writing.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040306/55ffb403/attachment.sig>

From radix at twistedmatrix.com  Sat Mar  6 12:54:18 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 06 Mar 2004 14:54:18 -0500
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <5.2.0.9.0.20040305205642.037cb708@pop.sbcglobal.yahoo.com>
References: <5.2.0.9.0.20040305205642.037cb708@pop.sbcglobal.yahoo.com>
Message-ID: <404A2C6A.9010302@twistedmatrix.com>

Trevor Perrin wrote:
> To do a real integration, though, I think I'd need help: I'm a Twisted 
> newbie, and Twisted looks tightly-coupled with PyOpenSSL.  At least, 
> there's no easy way to "plug in" that I saw.  In the mailing list there 
> was talk about Jython/Java SSL [2].  That would have the same issues, I 
> think, so maybe they could be looked at together.
> 
> Anyways, if anyone's interested in discussing the details, let me know!

Hmm. I think I remember seeing Jp or Itamar or someone discussing 
TLSLite integration with Twisted, before, so I know there's some 
interest. Maybe you can get a response out of them by asking some 
technical questions on the list or IRC. :)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040306/30e0a607/attachment.sig>

From exarkun at divmod.com  Sat Mar  6 22:40:57 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Sun, 07 Mar 2004 05:40:57 GMT
Subject: [Twisted-Python] Twisted + tlslite
Message-ID: <20040307054057.1960.2023520331.divmod.quotient.7@erlang.divmod.net>

On Fri, 05 Mar 2004 22:33:48 -0800, Trevor Perrin <trevp at trevp.net> wrote:
>
> 
> Hi Twisted folks,
> 
> I recently wrote an SSL library in python [1] and got it working with 
> asyncore.  I'd like to make it useable with Twisted too.  The library has a 
> few nice features, so it wouldn't be totally redundant with Twisted's 
> current SSL support:
>   - it can run in pure python (slowly)
>   - it supports some nonstandard authentication methods (SRP, cryptoIDs, 
> and shared-keys)
> 
> As a proof-of-concept I did some blunt-object surgery, and got Twisted's 
> pre-configured web server using it for HTTPS.
> 
> To do a real integration, though, I think I'd need help: I'm a Twisted 
> newbie, and Twisted looks tightly-coupled with PyOpenSSL.  At least, 
> there's no easy way to "plug in" that I saw.  In the mailing list there was 
> talk about Jython/Java SSL [2].  That would have the same issues, I think, 
> so maybe they could be looked at together.
> 
> Anyways, if anyone's interested in discussing the details, let me know!

  I'm definitely interested in getting Twisted doing SSL with a pure-python SSL library.  I have only had time to look at TLSLite briefly, and probably won't have any time to attempt the integration for a little while (several weeks at the earliest, I imagine).  I might be able to offer some pointers though.

  One tip: don't try to integrate with the existing SSL code.  The implementation is very much a result of the API limitations of PyOpenSSL.  Preferably, a new implementation will provide SSL support as a protocol instead of a transport.  For examples of how this can be done, see twisted.protocols.policies.

  Jp



From andy at thecablelounge.com  Sun Mar  7 00:36:28 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sun, 07 Mar 2004 17:36:28 +1000
Subject: [Twisted-Python] Lock class using Deferreds
In-Reply-To: <404A2413.1020105@twistedmatrix.com>
References: <20040306002100.1960.2052516571.divmod.quotient.0@erlang.divmod.net> <40493BB5.4000504@thecablelounge.com> <404976FC.6080207@twistedmatrix.com> <40499003.60308@thecablelounge.com> <404A2413.1020105@twistedmatrix.com>
Message-ID: <404AD0FC.2050103@thecablelounge.com>

Christopher Armstrong wrote:

>> dnsRequest_Semaphore = Semaphore(20)
>> for (sink, input) in source :
>>     dnsRequest_Semaphore.run( request, input ).addCallback( sink )

> OTOH, my 
> thing didn't call .next() on the source until its result was actually 
> required, but this snippet is obviously queuing up the (potentially 
> thousands) of operations in the Semaphore.. Probably doesn't actually 
> matter.

It might matter - if .next took even a small amount of time (say 
fetching jobs out of a text file) - then my for loop would block for a 
bit which is against the rules .. maybe these are different tasks after 
all ..

It's a nice exercise for learning defers though :)

The problem with my for loop is its effectively copying the queue stored
in source and putting it in Semaphore upfront, instead of as needed.

Perhaps something which is a cross between Lock and DeferredQueue would 
be better - if there is a queue of known work to be processed, leave it 
as an external queue instead of copying it ...

Ok - a sunday afternoon spent with the defers howto later - I came up 
with this - which only does what your original does Chris but allows you 
to add new jobs on the fly and is 5 times longer in code :) .. I was a 
bit embarrassed by that so added the ability to prioritise jobs in the 
queue to justify the whole experience ;)

--------------
from twisted.internet import reactor, defer

class Semaphore:
     """A semaphore for event driven systems."""

     """This hasn't changed from the earlier email."""

     def __init__(self, tokens):
         self.waiting = []
         self.tokens  = tokens
         self.limit   = tokens

     def acquire(self):
         """Attempt to acquire the token.

         @return Deferred which returns on token acquisition.
         """
         assert self.tokens >= 0
         d = defer.Deferred()
         if not self.tokens:
             self.waiting.append(d)
         else:
             self.tokens = self.tokens - 1
             d.callback(self)
         return d

     def release(self):
         """Release the token.

         Should be called by whoever did the acquire() when the shared
         resource is free.
         """
         assert self.tokens < self.limit
         self.tokens = self.tokens + 1
         if self.waiting:
             # someone is waiting to acquire token
             self.tokens = self.tokens - 1
             d = self.waiting.pop(0)
             d.callback(self)

     def _releaseAndReturn(self, r):
         self.release()
         return r

     def run(self, f, *args, **kwargs):
         """Acquire token, run function, release token.

         @return Deferred of function result.
         """
         d = self.acquire()
         d.addCallback(lambda r: defer.maybeDeferred(f, *args, 
**kwargs).addBoth(self._releaseAndReturn))
         return d


class DeferredPriorityQueue:
     """An event driven priority queue"""

     def __init__( self, max_concurrent ) :
         self.semaphore = Semaphore( max_concurrent )
         self.queue = {}
         self.processing = False

     def next(self) :
         """
         @return the next job in the queue
         raises StopIteration when out of jobs
         """
         if not len( self.queue ) : raise StopIteration

         highest_priority = min( self.queue.keys() )

         try:
             return self.queue[highest_priority][0].next()
         except StopIteration :
             del self.queue[highest_priority][0]
             if not len( self.queue[highest_priority] ) : del 
self.queue[highest_priority]
             return self.next()

     def _cbTokenAcquired(self, semaphore, job) :
         """Runs queued up job once a token can be acquired
         Sets the job to release the token when completed and calls the 
jobs callback
         Then continues processing the queue
         """
         (f, args, kwargs, cb) = job

         d = defer.maybeDeferred(f, *args, 
**kwargs).addBoth(self.semaphore._releaseAndReturn)
         d.addCallback(cb)

         self._processQueue()

     def _processQueue(self):
         """Grabs the next job in queue if available and then waits for 
a token"""
         try:
             job = self.next()
         except StopIteration :
             self.processing = False
             return

         self.semaphore.acquire().addCallback(self._cbTokenAcquired, job)

     def _startQueue(self) :
         """Start queue processing if its not already started"""
         if not self.processing:
             self.processing = True
             self._processQueue()

     def run( self, f, cb, *args, **kwargs ) :
         """Queue up a single job"""

         # not happy with this bit at all, but can't
         # think of another way to do it without making
         # it compulsory to pass in priority

         if kwargs.has_key("priority") :
             priority = kwargs["priority"]
             del kwargs["priority"]
         else :
             priority = 5

         self.runQueue( iter([(f, args, kwargs, cb)]), priority )

     def runQueue(self, queue, priority=5):
         """Queue up a (potentially external) queue of jobs"""

         if not self.queue.has_key( priority ) :
             self.queue[priority] = []
         self.queue[priority].append( queue )

         self._startQueue()


#
# test things out
#

def triple(x):
     d = defer.Deferred()
     reactor.callLater(2, d.callback, x * 3)
     return d

def cbPrintResult( result ) :
     print result

def sources() :
     for i in range(8) :
         yield ( triple, [3], {}, cbPrintResult )


#
# sources can be run directly off a semaphore,
# but if it takes a while to retrieve jobs
# from the source
# then the following will block until all
# jobs are queued up
#
#s = Semaphore(2)
#for (f, args, kwargs, cb) in sources() :
#    s.run( f, *args, **kwargs ).addCallback( cb )


q = DeferredPriorityQueue(2)
q.runQueue( sources() )
q.run( triple, cbPrintResult, 4, priority=3 )

reactor.run()
------------

It might have its uses - perhaps to stop mass mailouts from holding up 
hadhoc mails ...

I'm mainly trying to learn though by tweaking with Itamar's and Chris's 
code - so feedback/criticism would be welcome.

Andy.



From eee at nmt.edu  Mon Mar  8 13:58:42 2004
From: eee at nmt.edu (Earl Eiland)
Date: Mon, 08 Mar 2004 13:58:42 -0700
Subject: [Twisted-Python] ssh & sftp clients
Message-ID: <1078779522.2395.9.camel@dulcevida>

I don't see  in the documentation how to create ssh/sftp clients.




From andrew-twisted at puzzling.org  Mon Mar  8 15:26:09 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 9 Mar 2004 09:26:09 +1100
Subject: [Twisted-Python] ssh & sftp clients
In-Reply-To: <1078779522.2395.9.camel@dulcevida>
References: <1078779522.2395.9.camel@dulcevida>
Message-ID: <20040308222609.GA25158@frobozz>

On Mon, Mar 08, 2004 at 01:58:42PM -0700, Earl Eiland wrote:
> I don't see  in the documentation how to create ssh/sftp clients.

SSH client howto:
    http://twistedmatrix.com/documents/current/howto/conch_client

-Andrew.




From z3p at twistedmatrix.com  Mon Mar  8 16:13:59 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Mon, 08 Mar 2004 18:13:59 -0500
Subject: [Twisted-Python] ssh & sftp clients
In-Reply-To: <1078779522.2395.9.camel@dulcevida>
References: <1078779522.2395.9.camel@dulcevida>
Message-ID: <1078787639.1198.1.camel@petra>

On Mon, 2004-03-08 at 15:58, Earl Eiland wrote:
> I don't see  in the documentation how to create ssh/sftp clients.

Andrew sent a link on how to do clients.  There's also
doc/examples/sshsimple[client|server|.py.  There's no SFTP client
support (yet!) so there aren't any examples for it.  If you wanted to
write the support, we'd gladly accept it! :)

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040308/9d04b4a3/attachment.sig>

From trevp at trevp.net  Thu Mar 11 00:38:22 2004
From: trevp at trevp.net (Trevor Perrin)
Date: Wed, 10 Mar 2004 23:38:22 -0800
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <20040307054057.1960.2023520331.divmod.quotient.7@erlang.di
 vmod.net>
Message-ID: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>

At 05:40 AM 3/7/2004 +0000, exarkun at divmod.com wrote:

>On Fri, 05 Mar 2004 22:33:48 -0800, Trevor Perrin <trevp at trevp.net> wrote:
> > [...]
> > I recently wrote an SSL library in python [1] and got it working with
> > asyncore.  I'd like to make it useable with Twisted too.[...]
>[...]
>   One tip: don't try to integrate with the existing SSL code.  The 
> implementation is very much a result of the API limitations of 
> PyOpenSSL.  Preferably, a new implementation will provide SSL support as 
> a protocol instead of a transport.  For examples of how this can be done, 
> see twisted.protocols.policies.


Hi JP,

thanks for the tip!  I've got a first-draft done and it seems to work 
pretty well.

One thing I'm not sure about is exception handling.  When TLS Lite throws 
an exception, is there anywhere I can plug-in a handler or something?

The code is at http://trevp.net/tlslite/, if anyone's curious.  Below is an 
example of using it.  Echo1 does a TLS handshake when the client connects, 
and Echo2 does a handshake when the client sends "STARTTLS".

class Echo(LineReceiver):
     def connectionMade(self):
         self.transport.write("Welcome to the echo server!\r\n")

     def lineReceived(self, line):
         self.transport.write(line + "\r\n")

class Echo1(Echo):
     def connectionMade(self):
         if not self.transport.tlsStarted:
             self.transport.setServerHandshakeOp(certChain=certChain,
                                                 privateKey=privateKey)
         else:
             Echo.connectionMade(self)

class Echo2(Echo):
     def lineReceived(self, data):
         if data == "STARTTLS":
             self.transport.setServerHandshakeOp(certChain=certChain,
                                                 privateKey=privateKey)
         else:
             Echo.lineReceived(self, data)

factory = Factory()
factory.protocol = Echo1
#factory.protocol = Echo2

wrappingFactory = WrappingFactory(factory)
wrappingFactory.protocol = tlslite.TLSTwistedProtocolWrapper


Trevor






From oisin at enginesofcreation.ie  Thu Mar 11 07:04:17 2004
From: oisin at enginesofcreation.ie (Oisin Mulvihill)
Date: Thu, 11 Mar 2004 14:04:17 +0000
Subject: [Twisted-Python] help ssh forwarding.
Message-ID: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>

Sorry If you get two of these, I sent the last one with the
wrong email account.


Hi,

I have a series of linux based internet kiosks at a variety
of sites. I need to be able to connect back into the kiosk
from the main server. However direct connections aren't possible
as kiosks are behind there own router/firewall.

The solution to this is to forward port 22 on the kiosk to
a port on the server. I was thinking of just spawning the
command "ssh -R11122:my_server:22 user at my_server" from the
kiosk, when ever I need to connect to a machine. However I'm
hoping to do this with twisted, since the kiosk app uses it
already, and spawning the ssh command won't play well with
twisted's event system.

I decided to try and hack together a simple version of what
I want to do, based on the example sshsimpleclient.py. I don't
seem to be able to figure out how to forward from the server
to the kiosk. My program (attached) just forwards from 11122
on the kiosk to 22 on the server which isn't what I want.

Can anyone suggest what I'm doing wrong? Can twisted actually
do this?

Thanks in advance,

om


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cli.py
Type: application/octet-stream
Size: 1728 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040311/aa54e889/attachment-0002.obj>
-------------- next part --------------



--
Oisin Mulvihill
Engines Of Creation

Email: oisin at enginesofcreationsoftware.com
Email: oisin at enginesofcreation.ie
Mobile: +353 868191540

From oisin at enginesofcreation.ie  Thu Mar 11 08:17:07 2004
From: oisin at enginesofcreation.ie (Oisin Mulvihill)
Date: Thu, 11 Mar 2004 15:17:07 +0000
Subject: [Twisted-Python] help ssh forwarding.
In-Reply-To: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
References: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
Message-ID: <2917D95F-736F-11D8-AF5B-000A956F9A40@enginesofcreation.ie>

Hi,

I've just spotted an error in my email, which could cause confusion.
The line:

...the command "ssh -R11122:my_server:22 user at my_server"...

should read:

...the command "ssh -R11122:localhost:22 user at my_server"...

Just to clear it up, this is what I'm trying to do in twisted.
This should allow me to do ssh -p 11122 localhost on my server
and it will the connect back into the kiosk machine.

ssh forwarding always messes with my head,

om

On 11 Mar 2004, at 14:04, Oisin Mulvihill wrote:

> Sorry If you get two of these, I sent the last one with the
> wrong email account.
>
>
> Hi,
>
> I have a series of linux based internet kiosks at a variety
> of sites. I need to be able to connect back into the kiosk
> from the main server. However direct connections aren't possible
> as kiosks are behind there own router/firewall.
>
> The solution to this is to forward port 22 on the kiosk to
> a port on the server. I was thinking of just spawning the
> command "ssh -R11122:my_server:22 user at my_server" from the
> kiosk, when ever I need to connect to a machine. However I'm
> hoping to do this with twisted, since the kiosk app uses it
> already, and spawning the ssh command won't play well with
> twisted's event system.
>
> I decided to try and hack together a simple version of what
> I want to do, based on the example sshsimpleclient.py. I don't
> seem to be able to figure out how to forward from the server
> to the kiosk. My program (attached) just forwards from 11122
> on the kiosk to 22 on the server which isn't what I want.
>
> Can anyone suggest what I'm doing wrong? Can twisted actually
> do this?
>
> Thanks in advance,
>
> om
>
>
> <cli.py>
>
>
> --
> Oisin Mulvihill
> Engines Of Creation
>
> Email: oisin at enginesofcreationsoftware.com
> Email: oisin at enginesofcreation.ie
> Mobile: +353 868191540
>


--
Oisin Mulvihill
Engines Of Creation

Email: oisin at enginesofcreationsoftware.com
Email: oisin at enginesofcreation.ie
Mobile: +353 868191540




From z3p at twistedmatrix.com  Thu Mar 11 09:36:09 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Thu, 11 Mar 2004 11:36:09 -0500
Subject: [Twisted-Python] help ssh forwarding.
In-Reply-To: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
References: <FC91241E-7364-11D8-AF5B-000A956F9A40@enginesofcreation.ie>
Message-ID: <1079022969.2689.2.camel@petra>

On Thu, 2004-03-11 at 09:04, Oisin Mulvihill wrote:
> The solution to this is to forward port 22 on the kiosk to
> a port on the server. I was thinking of just spawning the
> command "ssh -R11122:my_server:22 user at my_server" from the
> kiosk, when ever I need to connect to a machine. However I'm
> hoping to do this with twisted, since the kiosk app uses it
> already, and spawning the ssh command won't play well with
> twisted's event system.

Take a look at reactor.spawnProcess().

> Can anyone suggest what I'm doing wrong? Can twisted actually
> do this?

Well, what you're doing wrong is you're using local->remote forwarding
in your example.  What you want is to ask the server to forward a remote
port over the connection.  Look at twisted.scripts.conch.SSHConnection,
methods requestRemoteForwarding and channel_forwarded_tcpip for an
example of how to implement remote->local forwarding.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040311/9a1576d4/attachment.sig>

From itamar at itamarst.org  Thu Mar 11 22:25:48 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 12 Mar 2004 00:25:48 -0500
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
References: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
Message-ID: <1079069147.4485.4.camel@sheriffpony>

On Thu, 2004-03-11 at 02:38, Trevor Perrin wrote:

> One thing I'm not sure about is exception handling.  When TLS Lite throws 
> an exception, is there anywhere I can plug-in a handler or something?

Typically we have callbacks for error conditions. For TLS you usually
want to close the connection, no? So you'd pass the exception to
connectionLost wrapped in a Failure, perhaps.

> The code is at http://trevp.net/tlslite/, if anyone's curious.  Below is an 
> example of using it.  Echo1 does a TLS handshake when the client connects, 
> and Echo2 does a handshake when the client sends "STARTTLS".

That's really cool.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From njp at njp.us  Fri Mar 12 14:21:29 2004
From: njp at njp.us (Norm Petterson)
Date: Fri, 12 Mar 2004 16:21:29 -0500
Subject: [Twisted-Python] tap2ntsvc (sandbox) and py2exe 0.5.0
Message-ID: <000801c40878$00bcd6d0$4ba212ac@isg.com>

Hi all,

Back in November, Cory Dodt mentioned on this list that a preliminary version of tap2ntsvc was available to try out. Has anybody managed to get it to work with py2exe 0.5.0?

Using a tap file that works fine when run with twistd (Twisted 1.2.0), and using Python 2.3.3 and py2exe 0.5.0 on Windows 2000, py2exe generates:

error: error in setup.cfg: command 'py2exe' has no such option 'service'

If I'm not overlooking something obvious, I will look into it further with the samples supplied with this version of py2exe. Comments appreciated ;-)

Regards,

Norm Petterson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040312/c8b825f2/attachment.html>

From corydodt at twistedmatrix.com  Fri Mar 12 14:32:12 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Fri, 12 Mar 2004 13:32:12 -0800
Subject: [Twisted-Python] tap2ntsvc (sandbox) and py2exe 0.5.0
In-Reply-To: <000801c40878$00bcd6d0$4ba212ac@isg.com>
References: <000801c40878$00bcd6d0$4ba212ac@isg.com>
Message-ID: <40522C5C.1060201@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

To my knowledge nobody has tested it on 0.5.0 so I can only assume this is an
API change.  If so, it's not a well-documented one because the py2exe home
page still talks about the service option as if it exists.  I will have to
investigate further.  In the meantime could you open a tracker issue and
assign it to moonfallen?  Thanks.

BTW, 0.4.x is known to work.

C

Norm Petterson wrote:
| Hi all,
|
| Back in November, Cory Dodt mentioned on this list that a preliminary
| version of tap2ntsvc was available to try out. Has anybody managed to
| get it to work with py2exe 0.5.0?
|
| Using a tap file that works fine when run with twistd (Twisted 1.2.0),
| and using Python 2.3.3 and py2exe 0.5.0 on Windows 2000, py2exe generates:
|
| error: error in setup.cfg: command 'py2exe' has no such option 'service'
|
| If I'm not overlooking something obvious, I will look into it further
| with the samples supplied with this version of py2exe. Comments
| appreciated ;-)
|
| Regards,
|
| Norm Petterson

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAUixc3A5SrXAiHQcRAnpfAJ9xpA2ZR4VFfQpe2ttpUR5GCynLGQCeKp4h
KPO5zsO1XWR+za/ASKCSuMI=
=rLxg
-----END PGP SIGNATURE-----



From trevp at trevp.net  Fri Mar 12 23:51:41 2004
From: trevp at trevp.net (Trevor Perrin)
Date: Fri, 12 Mar 2004 22:51:41 -0800
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <1079069147.4485.4.camel@sheriffpony>
References: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
 <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
Message-ID: <5.2.0.9.0.20040312222332.041d5398@pop.sbcglobal.yahoo.com>

At 12:25 AM 3/12/2004 -0500, Itamar Shtull-Trauring wrote:

>On Thu, 2004-03-11 at 02:38, Trevor Perrin wrote:
>
> > One thing I'm not sure about is exception handling.  When TLS Lite throws
> > an exception, is there anywhere I can plug-in a handler or something?
>
>Typically we have callbacks for error conditions. For TLS you usually
>want to close the connection, no? So you'd pass the exception to
>connectionLost wrapped in a Failure, perhaps.

Hi Itamar,

Thanks.  I think I managed to implement this, but I'm unsure if I'm trying 
to accomplish the right thing, and if I did it properly.  If you or anyone 
could glance over this, I'd really appreciate it.

Background:  there's a class which subclasses ProtocolWrapper.  It 
overrides dataReceived and does "TLS stuff".  The "TLS stuff" will call 
ProtocolWrapper.dataReceived when it's processed a whole record.

What I'm trying to do:  If the "TLS stuff" raises an exception, the 
connection should be closed and the exception should be made available to 
the wrapped protocol via connectionLost.  If a TLS exception isn't raised, 
connectionLost should be called normally, when the connection is shut 
down.  connectionLost should only be called once when a TLS exception is 
raised; i.e., if it's called with a TLS exception, then it *should not* be 
called when the TCP connection is closed.

How I'm doing it:  I catch TLS exceptions in dataReceived, and then call 
through to ProtocolWrapper.connectionLost() with a wrapped error.  I keep a 
flag to indicate whether connectionLost was called, and only let it be 
called once:

def dataReceived(self, data):
     try:
         #TLS STUFF
     except tlsErrors, e:
         self.connectionLost(Failure(e))
         ProtocolWrapper.loseConnection(self)

def connectionLost(self, reason):
     if not self.connectionLostCalled:
         ProtocolWrapper.connectionLost(self, reason)
         self.connectionLostCalled = True


How does this look?

Trevor

(the whole thing is here, fwiw: http://trevp.net/tlslite/) 




From itamar at itamarst.org  Sat Mar 13 09:33:52 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sat, 13 Mar 2004 11:33:52 -0500
Subject: [Twisted-Python] win32 buildbot
Message-ID: <1079195632.6743.7.camel@sheriffpony>

Thanks to the efforts of Cory and Norfolk, we now have a working win32
buildbot. So, it's time to get all tests passing. Everyone please take a
moment to look at what's failing and see if it's code you're responsible
for. Fixes to win32event reactor or a finished IOCP reactor so we can
abandon it are welcome ;)

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From michael.l.schneider at ugsplm.com  Sat Mar 13 23:21:46 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Sun, 14 Mar 2004 01:21:46 -0500
Subject: [Twisted-Python] win32 buildbot
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A216D3@uscimplm001.net.plm.eds.com>

Next week, I was planning on setting up buildbot on our
windows systems:

Couple of quick questions:
	- did you use the buildbot code out of CVS, or have you made
        mods?
      - If you made mods, can you check them into CVS?
      - Did you add a cmd.exe /c for execution of shell command?

      - Any Tips?

Thanks,
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Itamar
> Shtull-Trauring
> Sent: Saturday, March 13, 2004 11:34 AM
> To: twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] win32 buildbot
> 
> 
> Thanks to the efforts of Cory and Norfolk, we now have a working win32
> buildbot. So, it's time to get all tests passing. Everyone 
> please take a
> moment to look at what's failing and see if it's code you're 
> responsible
> for. Fixes to win32event reactor or a finished IOCP reactor so we can
> abandon it are welcome ;)
> 
> -- 
> Itamar Shtull-Trauring    http://itamarst.org
> Looking for a job: http://itamarst.org/resume.html
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From corydodt at twistedmatrix.com  Sun Mar 14 00:12:50 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Sat, 13 Mar 2004 23:12:50 -0800
Subject: [Twisted-Python] win32 buildbot
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216D3@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB505A216D3@uscimplm001.net.plm.eds.com>
Message-ID: <405405F2.60609@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1



Schneider, Michael wrote:
| Next week, I was planning on setting up buildbot on our
| windows systems:
|
| Couple of quick questions:
| 	- did you use the buildbot code out of CVS, or have you made
|         mods?
We patched buildbot a little.  The patch is currently available at
http://twistedmatrix.com/bugs/issue142

|       - If you made mods, can you check them into CVS?
No, but radix and warner can!

|       - Did you add a cmd.exe /c for execution of shell command?
In the patch.

|       - Any Tips?
Deploy your buildslaves with tap2ntsvc for maximum usability joy.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows XP)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAVAXy3A5SrXAiHQcRAn2MAJsFoyuY1C8ZWBNvBDRZI2njqIwWGQCeNEvd
6kmNMzOCBdrQ2T1LrLQcSiA=
=grIf
-----END PGP SIGNATURE-----



From richard at reticulatus.plus.com  Sun Mar 14 04:39:56 2004
From: richard at reticulatus.plus.com (Richard Townsend)
Date: Sun, 14 Mar 2004 11:39:56 +0000
Subject: [Twisted-Python] ftpclient errors
Message-ID: <200403141139.56946.richard@reticulatus.plus.com>

I have been experimenting with using ftpclient.py to access some FTP servers on the net, but have been getting errors with the list() and nlst() calls.

I am using Twisted 1.2.0 + Python 2.3.3 + SuSE 8.2

Can anyone shed some light on this problem?

Example
=======

/usr/local/src/Twisted-1.2.0/doc/examples: python ftpclient.py -h ftp.python.org
Success!  Got response:
---
257 "/" is current directory.
---
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 L not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 I not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 S not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 T not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ["500 Invalid command ' ': Try being more creative."]
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 . not understood.']
Success!  Got response:
---
250 CWD command successful.
---
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 N not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 L not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 S not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 T not understood.']
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ["500 Invalid command ' ': Try being more creative."]
Unhandled error in Deferred:
Failure: twisted.protocols.ftp.CommandFailed: ['500 . not understood.']




From andrew-twisted at puzzling.org  Sun Mar 14 04:55:35 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sun, 14 Mar 2004 22:55:35 +1100
Subject: [Twisted-Python] ftpclient errors
In-Reply-To: <200403141139.56946.richard@reticulatus.plus.com>
References: <200403141139.56946.richard@reticulatus.plus.com>
Message-ID: <20040314115535.GB10042@frobozz>

On Sun, Mar 14, 2004 at 11:39:56AM +0000, Richard Townsend wrote:
> I have been experimenting with using ftpclient.py to access some FTP servers on the net, but have been getting errors with the list() and nlst() calls.
> 
> I am using Twisted 1.2.0 + Python 2.3.3 + SuSE 8.2
> 
> Can anyone shed some light on this problem?

This is a known bug, and is fixed in CVS.  Sorry :(

-Andrew.




From bob at redivi.com  Sun Mar 14 05:00:27 2004
From: bob at redivi.com (Bob Ippolito)
Date: Sun, 14 Mar 2004 13:00:27 +0100
Subject: [Twisted-Python] ftpclient errors
In-Reply-To: <200403141139.56946.richard@reticulatus.plus.com>
References: <200403141139.56946.richard@reticulatus.plus.com>
Message-ID: <2F351CD4-75AF-11D8-BACE-000A95686CD8@redivi.com>

On Mar 14, 2004, at 12:39 PM, Richard Townsend wrote:

> I have been experimenting with using ftpclient.py to access some FTP 
> servers on the net, but have been getting errors with the list() and 
> nlst() calls.
>
> I am using Twisted 1.2.0 + Python 2.3.3 + SuSE 8.2
>
> Can anyone shed some light on this problem?
>
> Example
> =======
>
> /usr/local/src/Twisted-1.2.0/doc/examples: python ftpclient.py -h 
> ftp.python.org
> Success!  Got response:
> ---
> 257 "/" is current directory.
> ---
> Unhandled error in Deferred:
> Failure: twisted.protocols.ftp.CommandFailed: ['500 L not understood.']
> Unhandled error in Deferred:
> Failure: twisted.protocols.ftp.CommandFailed: ['500 I not understood.']

It looks like someone is calling a function with a string, but the 
function is expecting a sequence of strings.  Three cheers for string 
iteration!

This is definitely a bug in Twisted somewhere, so you should go to 
http://twistedmatrix.com/bugs/ and report the issue.  Though, you may 
want to do a search first; the problem may already be solved in CVS.

-bob




From pf_moore at yahoo.co.uk  Sun Mar 14 12:36:10 2004
From: pf_moore at yahoo.co.uk (Paul Moore)
Date: Sun, 14 Mar 2004 19:36:10 +0000
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
References: <1079195632.6743.7.camel@sheriffpony>
Message-ID: <smgbkyqd.fsf@yahoo.co.uk>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> Fixes to win32event reactor or a finished IOCP reactor so we can
> abandon it are welcome ;)

I was interested to see this, as I've been aware of the limitations of
the standard select reactor on Win32 (no process stuff, for example),
but given the comments in the documentation for the win32event
reactor, I wasn't sure that was the way to go either.

One neat feature in later versions of Win32 (Windows 2000+, I believe)
is a kernel-level thread pool, which handles async I/O very cleanly,
as well as a lot of other stuff, such as waiting on more than 63
kernel events, asynchronous function calls, etc, etc. Looking at the
IOCP reactor, it doesn't seem to use this.

Some questions:

1. Would a reactor based on Win32 thread pools be worth having?
2. Is lack of NT support a problem (Win9x is already disallowed by
   using IO completion ports)?
3. Does anyone want to pick this up (the author of the IOCP reactor,
   or the existing win32event reactor, for example)?
4. If no-one else wants to pick it up, where would I find pointers on
   writing a reactor? Assuming there isn't a useful "what is a reactor
   supposed to do" document (I couldn't find one) what code would be a
   good starting point? [Note: If this is what ends up happening,
   expect completion in something like 2038, given my copious
   quantities of free time, and the likelihood of me managing to stick
   with a substantial programming project :-(]

Paul.
-- 
This signature intentionally left blank




From michael.l.schneider at ugsplm.com  Sun Mar 14 13:20:38 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Sun, 14 Mar 2004 15:20:38 -0500
Subject: [Twisted-Python] Lore Question: Creating a pdf  book
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A216D5@uscimplm001.net.plm.eds.com>

I am using Lore to document a project that I am working on.

I modeled my approach on the Twisted How To Sections.


index.xhtml + 10 other xhtml pages.

I have the html pages generated, and now I would like to generate
a pdf book.

I created a tex page for each xhtml using lore --output latex xxx.xhtml.

My question is: how do I create a pdf book from the index.xhtml + x.xhtml
or tex pages?

Sorry for the stupid question, but I am new to lore and tex (too much time in MS word and html :-(

Thanks,
Mike


 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"



From itamar at itamarst.org  Sun Mar 14 14:07:36 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 14 Mar 2004 16:07:36 -0500
Subject: [Twisted-Python] Lore Question: Creating a pdf  book
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216D5@uscimplm001.net.plm.eds.com>
References: 	 <49199579A2BB32438A7572AF3DBB2FB505A216D5@uscimplm001.net.plm.eds.com>
Message-ID: <1079298456.11050.17.camel@sheriffpony>

On Sun, 2004-03-14 at 15:20, Schneider, Michael wrote:

> My question is: how do I create a pdf book from the index.xhtml + x.xhtml
> or tex pages?

You can use pdflatex, or run latex(1) on the .tex files, dvips on the
resulting .dvi and then ps2pdf. See admin/book.tex for an example of how
to merge multiple docs into single LaTeX file.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andrew-twisted at puzzling.org  Sun Mar 14 16:09:47 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 15 Mar 2004 10:09:47 +1100
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <smgbkyqd.fsf@yahoo.co.uk>
References: <1079195632.6743.7.camel@sheriffpony> <smgbkyqd.fsf@yahoo.co.uk>
Message-ID: <20040314230947.GA32275@frobozz>

On Sun, Mar 14, 2004 at 07:36:10PM +0000, Paul Moore wrote:
[...]
> 4. If no-one else wants to pick it up, where would I find pointers on
>    writing a reactor? Assuming there isn't a useful "what is a reactor
>    supposed to do" document (I couldn't find one) what code would be a
>    good starting point? [Note: If this is what ends up happening,
>    expect completion in something like 2038, given my copious
>    quantities of free time, and the likelihood of me managing to stick
>    with a substantial programming project :-(]

The best documentation for a reactor I'm aware of is
twisted.internet.interfaces.  I'd probably use the default select reactor as
a starting point, or in this case maybe the win32reactor.

-Andrew.




From itamar at itamarst.org  Sun Mar 14 17:58:23 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 14 Mar 2004 19:58:23 -0500
Subject: [Twisted-Python] Twisted + tlslite
In-Reply-To: <5.2.0.9.0.20040312222332.041d5398@pop.sbcglobal.yahoo.com>
References: <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
	 <5.2.0.9.0.20040310231443.0381ee58@pop.sbcglobal.yahoo.com>
	 <5.2.0.9.0.20040312222332.041d5398@pop.sbcglobal.yahoo.com>
Message-ID: <1079312303.11807.0.camel@sheriffpony>

On Sat, 2004-03-13 at 01:51, Trevor Perrin wrote:

> Thanks.  I think I managed to implement this, but I'm unsure if I'm trying 
> to accomplish the right thing, and if I did it properly.  If you or anyone 
> could glance over this, I'd really appreciate it.

It sounds vaguely correct, but I'm not concentrating enough to be
certain. As always, when in doubt, write more tests ;)

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From andy at thecablelounge.com  Sun Mar 14 20:00:14 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 15 Mar 2004 13:00:14 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
Message-ID: <40551C3E.3080602@thecablelounge.com>

I'm looking to create a filesystem backend for twisted that could be 
used by any filelike twisted application (sftp, webdav etc).

I've got a proof of concept filesystem interface working - IFileSystem 
.. not the best of names ;), which I'm about to try and sftp into.

ISFTPServer is a nice clean interface which it'd be easy to write an 
adapter for from my IFileSystem - but its implementation is bolted into 
FileTransferServer along with a bunch of protocol stuff ..

I had been vaguely planning to break ISFTPServer's implementation out of 
FileTransferServer and move it into a realm avatar when I got this far 
so different users could have different filesystems but now that I get 
to looking at it - FileTransferServer is brought into existance when a 
sftp sybsystem is requested by the sftp client, which happens after 
authentication ..

It's beginning to look like most of conch/ssh/session.py would need to 
move into an avatar - so the avatar for a given user could be asked for 
a shell, or a sftp subsystem and they would get the right shell/ sftp 
onto a filesystem for that user ..

I was hoping that Paul, or someone else may have some thoughts in this 
area to guide me ..

cheers,
Andy.



From cns at RedBrick.dcu.ie  Tue Mar 16 12:40:43 2004
From: cns at RedBrick.dcu.ie (Cillian Sharkey)
Date: Tue, 16 Mar 2004 19:40:43 +0000
Subject: [Twisted-Python] XML-RPC questions
Message-ID: <20040316194043.GA11053@carbon.redbrick.dcu.ie>

Hi folks,

Couple of questions.. (sorry for the long mail)

Q1.

Has anyone coded HTML API generation a la DocXMLRPCServer (in Python
2.3) for Twisted's XML-RPC?

I have a basic implementation that for any GET request spits out an ugly
HTML list by using the XML-RPC introspection calls. If someone has done
something similar (well, *better*) I'd be interested in hearing.

Q2.

To implement this I'm doing:

class Test(xmlrpc.XMLRPC):
    def render(self, request):
        if HTTP Basic AUTH ok:
	    # Let resource delegate request based on the method type
            return resource.Resource.render(self, request)
        else:
            return 401 HTML page

    def render_POST(self, request):
    	# All POST requests are XML-RPC calls.
        return xmlrpc.XMLRPC.render(self, request)

    def render_GET(self, request):
    	# All GET requests get the HTML API.
        return HTML for API

This works, but I'm curious if this is the 'right' way to do this?

Q3.

HTTP is a stateless protocol, but I'll be using persistent HTTP/1.1
connections (with practically no timeouts) and would like to link such a
connection to a state/session object for each client connection. I can
use cookies for this, but given that the connection is kept open, is
there a better way to do this? I realise HTTP as a transport for my
setup probably isn't the most elegant solution, but it's easy to use.


Thanks for any help,

-- 
Cillian



From daleedom at hightowergroup.com  Tue Mar 16 13:19:24 2004
From: daleedom at hightowergroup.com (David A. Leedom)
Date: Tue, 16 Mar 2004 15:19:24 -0500
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <40551C3E.3080602@thecablelounge.com>
References: <40551C3E.3080602@thecablelounge.com>
Message-ID: <6.0.1.1.2.20040316151701.02c2d648@mail.hightowergroup.com>

Andy,

It looks like you are doing some interesting things!!

I am no were near you level of understanding things, so I can't help 
you...However, I am interested in what you are doing.  I am working on a 
Remote Backup system.  I really want kind of a database driven system to 
handle the SFTP connections and am looking into twisted to provide 
that.  Can you tell me a little more about what you are trying to accomplish?

Thanks,

Dave Leedom

At 10:00 PM 3/14/2004, Andy Gayton wrote:
>I'm looking to create a filesystem backend for twisted that could be used 
>by any filelike twisted application (sftp, webdav etc).
>
>I've got a proof of concept filesystem interface working - IFileSystem .. 
>not the best of names ;), which I'm about to try and sftp into.
>
>ISFTPServer is a nice clean interface which it'd be easy to write an 
>adapter for from my IFileSystem - but its implementation is bolted into 
>FileTransferServer along with a bunch of protocol stuff ..
>
>I had been vaguely planning to break ISFTPServer's implementation out of 
>FileTransferServer and move it into a realm avatar when I got this far so 
>different users could have different filesystems but now that I get to 
>looking at it - FileTransferServer is brought into existance when a sftp 
>sybsystem is requested by the sftp client, which happens after 
>authentication ..
>
>It's beginning to look like most of conch/ssh/session.py would need to 
>move into an avatar - so the avatar for a given user could be asked for a 
>shell, or a sftp subsystem and they would get the right shell/ sftp onto a 
>filesystem for that user ..
>
>I was hoping that Paul, or someone else may have some thoughts in this 
>area to guide me ..
>
>cheers,
>Andy.
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



The Hightower Group, Inc.
Custom Software Solutions Designed To Fit Your Business Like A Glove.
165 West Airport Road/Lititz, PA 17543
V:717-560-4002, 877-560-4002 x: 114
F:717-560-2825
www.hightowergroup.com  




From justinjohnson at fastmail.fm  Tue Mar 16 13:37:12 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Tue, 16 Mar 2004 14:37:12 -0600
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <smgbkyqd.fsf@yahoo.co.uk>
References: <1079195632.6743.7.camel@sheriffpony> <smgbkyqd.fsf@yahoo.co.uk>
Message-ID: <1079469432.32491.182792589@webmail.messagingengine.com>

I would love to see a more stable version of the windows reactor.  :-)

Occasionally where the win32eventreactor starts spinning wildly out of
control when I do too many things at once.  I assume this is the 63
kernel events limitation or some such thing...

-Justin

On Sun, 14 Mar 2004 19:36:10 +0000, "Paul Moore" <pf_moore at yahoo.co.uk>
said:
> Itamar Shtull-Trauring <itamar at itamarst.org> writes:
> 
> > Fixes to win32event reactor or a finished IOCP reactor so we can
> > abandon it are welcome ;)
> 
> I was interested to see this, as I've been aware of the limitations of
> the standard select reactor on Win32 (no process stuff, for example),
> but given the comments in the documentation for the win32event
> reactor, I wasn't sure that was the way to go either.
> 
> One neat feature in later versions of Win32 (Windows 2000+, I believe)
> is a kernel-level thread pool, which handles async I/O very cleanly,
> as well as a lot of other stuff, such as waiting on more than 63
> kernel events, asynchronous function calls, etc, etc. Looking at the
> IOCP reactor, it doesn't seem to use this.
> 
> Some questions:
> 
> 1. Would a reactor based on Win32 thread pools be worth having?
> 2. Is lack of NT support a problem (Win9x is already disallowed by
>    using IO completion ports)?
> 3. Does anyone want to pick this up (the author of the IOCP reactor,
>    or the existing win32event reactor, for example)?
> 4. If no-one else wants to pick it up, where would I find pointers on
>    writing a reactor? Assuming there isn't a useful "what is a reactor
>    supposed to do" document (I couldn't find one) what code would be a
>    good starting point? [Note: If this is what ends up happening,
>    expect completion in something like 2038, given my copious
>    quantities of free time, and the likelihood of me managing to stick
>    with a substantial programming project :-(]
> 
> Paul.
> -- 
> This signature intentionally left blank
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From michael.l.schneider at ugsplm.com  Tue Mar 16 13:51:07 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Tue, 16 Mar 2004 15:51:07 -0500
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>

If I can allocate a resource for this that is an experienced developer
(15 years C guy), but with little python or twisted experience,
would someone be able to guide him when he hits a tough spot?

I could answer basic twisted/python questions, but I don't know
the guts of windows or reactors.

We are using twisted in a windows environment and would be willing
to contribute the work back to twisted.

Thanks
Mike

 

----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Justin
> Johnson
> Sent: Tuesday, March 16, 2004 3:37 PM
> To: Twisted-Python
> Subject: Re: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
> 
> 
> I would love to see a more stable version of the windows reactor.  :-)
> 
> Occasionally where the win32eventreactor starts spinning wildly out of
> control when I do too many things at once.  I assume this is the 63
> kernel events limitation or some such thing...
> 
> -Justin
> 
> On Sun, 14 Mar 2004 19:36:10 +0000, "Paul Moore" 
> <pf_moore at yahoo.co.uk>
> said:
> > Itamar Shtull-Trauring <itamar at itamarst.org> writes:
> > 
> > > Fixes to win32event reactor or a finished IOCP reactor so we can
> > > abandon it are welcome ;)
> > 
> > I was interested to see this, as I've been aware of the 
> limitations of
> > the standard select reactor on Win32 (no process stuff, for 
> example),
> > but given the comments in the documentation for the win32event
> > reactor, I wasn't sure that was the way to go either.
> > 
> > One neat feature in later versions of Win32 (Windows 2000+, 
> I believe)
> > is a kernel-level thread pool, which handles async I/O very cleanly,
> > as well as a lot of other stuff, such as waiting on more than 63
> > kernel events, asynchronous function calls, etc, etc. Looking at the
> > IOCP reactor, it doesn't seem to use this.
> > 
> > Some questions:
> > 
> > 1. Would a reactor based on Win32 thread pools be worth having?
> > 2. Is lack of NT support a problem (Win9x is already disallowed by
> >    using IO completion ports)?
> > 3. Does anyone want to pick this up (the author of the IOCP reactor,
> >    or the existing win32event reactor, for example)?
> > 4. If no-one else wants to pick it up, where would I find 
> pointers on
> >    writing a reactor? Assuming there isn't a useful "what 
> is a reactor
> >    supposed to do" document (I couldn't find one) what code 
> would be a
> >    good starting point? [Note: If this is what ends up happening,
> >    expect completion in something like 2038, given my copious
> >    quantities of free time, and the likelihood of me 
> managing to stick
> >    with a substantial programming project :-(]
> > 
> > Paul.
> > -- 
> > This signature intentionally left blank
> > 
> > 
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From itamar at itamarst.org  Tue Mar 16 14:13:01 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 16 Mar 2004 16:13:01 -0500
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
References: 	 <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
Message-ID: <1079471580.13476.24.camel@sheriffpony>

The IOCP reactor has already been started (sandbox/pahan/ in CVS).




From andy at thecablelounge.com  Tue Mar 16 17:40:36 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Wed, 17 Mar 2004 10:40:36 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <6.0.1.1.2.20040316151701.02c2d648@mail.hightowergroup.com>
References: <40551C3E.3080602@thecablelounge.com> <6.0.1.1.2.20040316151701.02c2d648@mail.hightowergroup.com>
Message-ID: <40579E84.6060702@thecablelounge.com>

David A. Leedom wrote:

> Can you tell me a little more about what you are trying to 
> accomplish?

G'dday David,

In general I'm trying to create an interface for filesystems that can be 
adapted to every interface twisted filelike apps expect to work with. 
For instance conch should work with anything which conforms to the 
ISFTPServer (it just needs a bit of tweaking) - I've still got to look 
at Thorsten's twisted port of his webdav server, but I'm hoping it has a 
similiar interface an adapter can be written for.  Once a twisted smb 
server is up I'll write an adapter for the interface it expects.

You can then implement the filesystem interface anyway you like - 
perhaps out of a mysql database, perhaps to mount a zip file so you can 
sftp directly into the zip file.

My particular use for it is a collaboration web site - cablelounge.com - 
I have a very simple samba like filesystem which defines a user's 
personal area plus the group areas they have access to - when they enter 
the filesystem they see something like

/home
/cliff_hangers
/twisted_files

When then go into /home they'll actually be in a different type of 
filesystem, just an ordinary implementation of a system filesystem - but 
its real path would be say /home/john - when they enter /cliff_hangers 
there real path could be /var/shares/groups/cliff_hangers - or whatever ..

This is great for sftp access as the user can only see what you want 
them to see - they can't just enter cd /etc and start poking around - 
and you don't have to mess about with chrooting them to their home 
directory which then makes group shares very difficult + the user gets a 
consistent view of their files no matter which application they prefer 
to use ..

I'm pretty new to twisted myself so searching thoughts and critcisms to 
keep me on track ..

Andy.


> 
> Thanks,
> 
> Dave Leedom
> 
> At 10:00 PM 3/14/2004, Andy Gayton wrote:
> 
>> I'm looking to create a filesystem backend for twisted that could be 
>> used by any filelike twisted application (sftp, webdav etc).
>>
>> I've got a proof of concept filesystem interface working - IFileSystem 
>> .. not the best of names ;), which I'm about to try and sftp into.
>>
>> ISFTPServer is a nice clean interface which it'd be easy to write an 
>> adapter for from my IFileSystem - but its implementation is bolted 
>> into FileTransferServer along with a bunch of protocol stuff ..
>>
>> I had been vaguely planning to break ISFTPServer's implementation out 
>> of FileTransferServer and move it into a realm avatar when I got this 
>> far so different users could have different filesystems but now that I 
>> get to looking at it - FileTransferServer is brought into existance 
>> when a sftp sybsystem is requested by the sftp client, which happens 
>> after authentication ..
>>
>> It's beginning to look like most of conch/ssh/session.py would need to 
>> move into an avatar - so the avatar for a given user could be asked 
>> for a shell, or a sftp subsystem and they would get the right shell/ 
>> sftp onto a filesystem for that user ..
>>
>> I was hoping that Paul, or someone else may have some thoughts in this 
>> area to guide me ..
>>
>> cheers,
>> Andy.
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> 
> 
> The Hightower Group, Inc.
> Custom Software Solutions Designed To Fit Your Business Like A Glove.
> 165 West Airport Road/Lititz, PA 17543
> V:717-560-4002, 877-560-4002 x: 114
> F:717-560-2825
> www.hightowergroup.com 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From michaelschneider at fuse.net  Tue Mar 16 20:56:01 2004
From: michaelschneider at fuse.net (Michael Schneider)
Date: Tue, 16 Mar 2004 22:56:01 -0500
Subject: [Twisted-Python] Question on creating NT service
In-Reply-To: <20040311134623.15159.91132.Mailman@twistedmatrix.com>
Message-ID: <DDEBLIGOHANFDMNECHGEMEKGCAAA.michaelschneider@fuse.net>

Hello All,


I am getting back to working on the twisted tap as ntserver,

I have created the service, and ran the installer.

I run net start gridnoded  (name of service is gridnoded)

The application event log shows that

import __service__ failed

I can't seem to find __service__ package, do I need to download
and install this from somewhere.

I am using py2exe  0.4.2

Thanks for any insights,
Mike

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


End of Twisted-Python Digest



From achin at eminence32.cjb.net  Wed Mar 17 02:07:25 2004
From: achin at eminence32.cjb.net (achin)
Date: Wed, 17 Mar 2004 04:07:25 -0500 (EST)
Subject: [Twisted-Python] TOC and filetranser
Message-ID: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>

hi, I'm writing an AIM bot using twisted's TOC implementation.  i was 
wondering if this module supports file transfers (namely sending from the 
TOC client).  and if so, could i get either some sample code, or a more 
detailed documentation than the one at twistedmatrix.com

my first question regarding the SendFileTransfer class is what exactly is 
the "cookie" parameter in the __init__ method? (i don't see it documented 
anywhere)

as a side note, i was wondering if a TOC2 python module exists, as i think 
TOC2 would be preferable over TOC

thanks, 

-andrew




From andymac at bullseye.apana.org.au  Wed Mar 17 05:15:17 2004
From: andymac at bullseye.apana.org.au (Andrew MacIntyre)
Date: Wed, 17 Mar 2004 23:15:17 +1100 (EST)
Subject: [Twisted-Python] threads
Message-ID: <20040317222902.Y5687@bullseye.apana.org.au>

I'm trying to get Twisted 1.2.0 up on the OS/2 EMX port of Python I
maintain.

Most of it appears to be no great drama, but when I run the test suite,
and it hits a threads related test things get awfully out of shape - the
process goes into a runaway state that is unkillable, using all available
CPU, although the system remains generally usable.  A reboot is required
to restore order.

When I started the testing, I had an OS/2 port of SQLite+PySQLite
installed, and the SQLite test triggered the above behaviour.  On the
assumption that my SQLite port could be implicated, I deinstalled SQLite
etc and tried again.

This uncovered a typo in twisted/flow/threads.py:
*** threads.py.orig     Sun Aug 10 13:00:48 2003
--- threads.py  Mon Mar 15 17:12:16 2004
***************
*** 122,128 ****
              except StopIteration:
                  reactor.callFromThread(self._stopping)
              except:
!                 self.failure = Faliure()
                  reactor.callFromThread(self._cooperate)
              self._cooperate.immediate = True

--- 122,128 ----
              except StopIteration:
                  reactor.callFromThread(self._stopping)
              except:
!                 self.failure = Failure()
                  reactor.callFromThread(self._cooperate)
              self._cooperate.immediate = True


With that fixed, I'm now back to the original behaviour.

The test log contains the following:

...
2004/03/15 17:13 est [-] --> twisted.test.test_flow.FlowTest.testProtocolLocalhost <--
2004/03/15 17:13 est [-] twisted.internet.protocol.ServerFactory starting on 0
2004/03/15 17:13 est [-] Starting factory <twisted.internet.protocol.ServerFactory instance at 0x2de70c>
2004/03/15 17:13 est [-] Starting factory <twisted.internet.protocol.ClientFactory instance at 0xb4780c>
2004/03/15 17:13 est [_Protocol,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xb4780c>
2004/03/15 17:13 est [-] --> twisted.test.test_flow.FlowTest.testQueryIterator <--
2004/03/15 17:13 est [-] --> twisted.test.test_flow.FlowTest.testThreaded <--
2004/03/15 17:13 est [-] Traceback (most recent call last):
	  File "Lib/threading.py", line 436, in __bootstrap
	    self.run()
	  File "Lib/threading.py", line 416, in run
	    self.__target(*self.__args, **self.__kwargs)
	--- <exception caught here> ---
	  File "F:/dev/Twisted-1.2.0/twisted/python/threadpool.py", line 157, in _worker
	    context.call(ctx, function, *args, **kwargs)
	  File "F:/dev/Twisted-1.2.0/twisted/python/context.py", line 53, in callWithContext
	    return self.currentContext().callWithContext(ctx, func, *args, **kw)
	  File "F:/dev/Twisted-1.2.0/twisted/python/context.py", line 32, in callWithContext
	    return func(*args,**kw)
	  File "F:/dev/Twisted-1.2.0/twisted/flow/threads.py", line 126, in _process
	    reactor.callFromThread(self._cooperate)
	  File "F:/dev/Twisted-1.2.0/twisted/internet/base.py", line 200, in callFromThread
	    self.threadCallQueue.append((f, args, kw))
	exceptions.AttributeError: 'NoneType' object has no attribute 'append'

2004/03/15 17:13 est [twisted.internet.protocol.Factory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.Factory] Stopping factory <twisted.internet.protocol.Factory instance at 0xaad8cc>
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] Stopping factory <twisted.internet.protocol.ServerFactory instance at 0x2de70c>
2004/03/15 17:13 est [Foo,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xabc0ac>
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] Stopping factory <twisted.internet.protocol.ServerFactory instance at 0xabc26c>
2004/03/15 17:13 est [Foo,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xabcb0c>
2004/03/15 17:13 est [Foo,client] Stopping factory <twisted.internet.protocol.ClientFactory instance at 0xabcd0c>
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] (Port 0 Closed)
2004/03/15 17:13 est [twisted.internet.protocol.ServerFactory] Stopping factory <twisted.internet.protocol.ServerFactory instance at 0xabc14c>
<<<log ends>>>

The traceback is identical to that in the log after the SQLite test
failure.

While the threads support in the EMX port of Python passes the Python test
suite, and people are successfully running Zope on OS/2 with this Python
port, I don't know of any other widespread usage which might have
exercised it.  So I won't be surprised if it has problems.

Can anyone give me any hints about what might be missing or working
incorrectly to trigger the above?

I should note that I've never tried to use Twisted before.  The above is
with Python 2.3.3.  I don't have permanent internet connectivity, and the
test was being run without an internet connection.

Regards,
Andrew.

--
Andrew I MacIntyre                     "These thoughts are mine alone..."
E-mail: andymac at bullseye.apana.org.au  (pref) | Snail: PO Box 370
        andymac at pcug.org.au             (alt) |        Belconnen  ACT  2616
Web:    http://www.andymac.org/               |        Australia



From itamar at itamarst.org  Wed Mar 17 06:47:16 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 17 Mar 2004 08:47:16 -0500
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
Message-ID: <1079531236.13475.26.camel@sheriffpony>

On Wed, 2004-03-17 at 04:07, achin wrote:

> as a side note, i was wondering if a TOC2 python module exists, as i think 
> TOC2 would be preferable over TOC

Dunno about TOC2, but there's an OSCAR implementation
(twisted.protocols.oscar) which might have more advanced features for
talking to AIM.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From itamar at itamarst.org  Wed Mar 17 07:00:20 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 17 Mar 2004 09:00:20 -0500
Subject: [Twisted-Python] threads
In-Reply-To: <20040317222902.Y5687@bullseye.apana.org.au>
References: <20040317222902.Y5687@bullseye.apana.org.au>
Message-ID: <1079532019.13476.29.camel@sheriffpony>

On Wed, 2004-03-17 at 07:15, Andrew MacIntyre wrote:

>               except StopIteration:
>                   reactor.callFromThread(self._stopping)
>               except:
> !                 self.failure = Faliure()
>                   reactor.callFromThread(self._cooperate)
>               self._cooperate.immediate = True
> 
> --- 122,128 ----
>               except StopIteration:
>                   reactor.callFromThread(self._stopping)
>               except:
> !                 self.failure = Failure()
>                   reactor.callFromThread(self._cooperate)
>               self._cooperate.immediate = True

Yeesh. I fixed this, and attempted to make flow thread tests work. Try
cvs and tell us if it's working now? (apparently no one did
twisted.python.threadable.init(1) before using threads. Not sure why it
works on linux though....).

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From alan at norfolkgraphics.com  Wed Mar 17 08:59:16 2004
From: alan at norfolkgraphics.com (Alan McIntyre)
Date: Wed, 17 Mar 2004 10:59:16 -0500
Subject: [Twisted-Python] IOCP Reactor (Was: win32 buildbot)
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB505A216ED@uscimplm001.net.plm.eds.com>
Message-ID: <405875D4.1070402@norfolkgraphics.com>

Mike,

I've had the (mis?)fortune of having to maintain some applications 
written in vanilla Win32 in the last few years, so I can take a stab at 
answering Windows questions if they come up.  I'm still trying to get 
familiar with how the Twisted internals work, so I probably won't be 
much help in that area.

For the forseeable future, I will be constrained to using Windows 
platforms at work, so I'm interested in helping get Twisted working well 
on Windows.  I'll try and help out as much as I can if you run into any 
rough spots, for whatever that's worth. :)

Alan


Schneider, Michael wrote:
> If I can allocate a resource for this that is an experienced developer
> (15 years C guy), but with little python or twisted experience,
> would someone be able to guide him when he hits a tough spot?
> 
> I could answer basic twisted/python questions, but I don't know
> the guts of windows or reactors.
> 
> We are using twisted in a windows environment and would be willing
> to contribute the work back to twisted.
> 
> Thanks
> Mike
> 
>  
> 
> ----------------------------------------------------------------
> Michael Schneider
> Senior Software Engineering Consultant
> UGS PLM Solutions - an EDS Company
>  
> "The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"




From achin at eminence32.cjb.net  Wed Mar 17 13:04:49 2004
From: achin at eminence32.cjb.net (achin)
Date: Wed, 17 Mar 2004 15:04:49 -0500 (EST)
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <1079531236.13475.26.camel@sheriffpony>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
 <1079531236.13475.26.camel@sheriffpony>
Message-ID: <Pine.LNX.4.58.0403171450180.1085@bigbox>

yeah, i saw that, but I'm hesitant to use OSCAR:
1) AOL occasionally changes to OSCAR protocol to break any 3rd-party
implementations that have reverse-engineered it.
2) the module is listed as unstable

(AOL hasn't released a spec for OSCAR, while it has published a spec for
TOC)

but thanks for the suggestion

-andrew

On Wed, 17 Mar 2004, Itamar Shtull-Trauring wrote:

> On Wed, 2004-03-17 at 04:07, achin wrote:
>
> > as a side note, i was wondering if a TOC2 python module exists, as i
> > think TOC2 would be preferable over TOC
>
> Dunno about TOC2, but there's an OSCAR implementation
> (twisted.protocols.oscar) which might have more advanced features for
> talking to AIM.
>
>



From radix at twistedmatrix.com  Wed Mar 17 13:22:19 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 17 Mar 2004 15:22:19 -0500
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <Pine.LNX.4.58.0403171450180.1085@bigbox>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net> <1079531236.13475.26.camel@sheriffpony> <Pine.LNX.4.58.0403171450180.1085@bigbox>
Message-ID: <4058B37B.9050809@twistedmatrix.com>

achin wrote:
> yeah, i saw that, but I'm hesitant to use OSCAR:
> 1) AOL occasionally changes to OSCAR protocol to break any 3rd-party
> implementations that have reverse-engineered it.



> 2) the module is listed as unstable

This isn't a point. Most modules in Twisted are unstable :-). It doesn't 
mean that they're broken, it means that they *may* change (but we still 
make compatibility a goal, always!). The only reason that toc.py is 
unstable is because it's (apparently) unmaintained and deprecated.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040317/9d9778af/attachment.sig>

From achin at eminence32.cjb.net  Wed Mar 17 14:13:09 2004
From: achin at eminence32.cjb.net (achin)
Date: Wed, 17 Mar 2004 16:13:09 -0500 (EST)
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <4058B37B.9050809@twistedmatrix.com>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
 <1079531236.13475.26.camel@sheriffpony> <Pine.LNX.4.58.0403171450180.1085@bigbox>
 <4058B37B.9050809@twistedmatrix.com>
Message-ID: <Pine.LNX.4.58.0403171607440.1085@bigbox>

ok, i guess i misinterpreted "unstable".

i'll take a look at OSCAR

-thanks


On Wed, 17 Mar 2004, Christopher Armstrong wrote:

> achin wrote:
> > yeah, i saw that, but I'm hesitant to use OSCAR:
> > 1) AOL occasionally changes to OSCAR protocol to break any 3rd-party
> > implementations that have reverse-engineered it.
>
>
>
> > 2) the module is listed as unstable
>
> This isn't a point. Most modules in Twisted are unstable :-). It doesn't
> mean that they're broken, it means that they *may* change (but we still
> make compatibility a goal, always!). The only reason that toc.py is
> unstable is because it's (apparently) unmaintained and deprecated.
>
>



From corydodt at twistedmatrix.com  Wed Mar 17 18:32:20 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 17 Mar 2004 17:32:20 -0800
Subject: [Twisted-Python] Question on creating NT service
In-Reply-To: <DDEBLIGOHANFDMNECHGEMEKGCAAA.michaelschneider@fuse.net>
References: <DDEBLIGOHANFDMNECHGEMEKGCAAA.michaelschneider@fuse.net>
Message-ID: <4058FC24.2070503@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Is your source available somewhere?  I have your command line from an old
mailing list post, I could try this myself and see what's happening.

C


Michael Schneider wrote:
| Hello All,
|
|
| I am getting back to working on the twisted tap as ntserver,
|
| I have created the service, and ran the installer.
|
| I run net start gridnoded  (name of service is gridnoded)
|
| The application event log shows that
|
| import __service__ failed
|
| I can't seem to find __service__ package, do I need to download
| and install this from somewhere.
|
| I am using py2exe  0.4.2
|
| Thanks for any insights,
| Mike
|
| _______________________________________________
| Twisted-Python mailing list
| Twisted-Python at twistedmatrix.com
| http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
|
|
| End of Twisted-Python Digest
|
| _______________________________________________
| Twisted-Python mailing list
| Twisted-Python at twistedmatrix.com
| http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAWPwk3A5SrXAiHQcRApRLAJ9rrM+RjPcTzn6wKWD4Al7iv9R80wCffHnh
oZY4fph8iG1WaMAz1HSCwuE=
=trEs
-----END PGP SIGNATURE-----



From theller at python.net  Thu Mar 18 13:35:27 2004
From: theller at python.net (Thomas Heller)
Date: Thu, 18 Mar 2004 21:35:27 +0100
Subject: [Twisted-Python] Re: tap2ntsvc (sandbox) and py2exe 0.5.0
References: <000801c40878$00bcd6d0$4ba212ac@isg.com> <40522C5C.1060201@twistedmatrix.com>
Message-ID: <vfl1x59s.fsf@python.net>

> Norm Petterson wrote:
> | Hi all,
> |
> | Back in November, Cory Dodt mentioned on this list that a preliminary
> | version of tap2ntsvc was available to try out. Has anybody managed to
> | get it to work with py2exe 0.5.0?
> |
> | Using a tap file that works fine when run with twistd (Twisted 1.2.0),
> | and using Python 2.3.3 and py2exe 0.5.0 on Windows 2000, py2exe generates:
> |
> | error: error in setup.cfg: command 'py2exe' has no such option 'service'
> |
> | If I'm not overlooking something obvious, I will look into it further
> | with the samples supplied with this version of py2exe. Comments
> | appreciated ;-)

Cory Dodt <corydodt at twistedmatrix.com> writes:

> To my knowledge nobody has tested it on 0.5.0 so I can only assume this is an
> API change.  If so, it's not a well-documented one because the py2exe home
> page still talks about the service option as if it exists.  I will have to
> investigate further.  In the meantime could you open a tracker issue and
> assign it to moonfallen?  Thanks.
>
> BTW, 0.4.x is known to work.

It's still possible to build services, and I won't argue that the
changes are well documented ;-).

In py2exe 0.5, you specify that you want to build a service by giving a
named argument 'service' to the setup() function.
Before, 'service' was a command line option (that could also be stored
in the setup.cfg file).

For py2exe 0.5, there is quite some user-provided documentation in the
wiki http://starship.python.net/crew/theller/moin.cgi/Py2Exe, and
extensive samples are included in the distribution. IIRC, the advanced
sample contains a service.

Thomas




From radix at twistedmatrix.com  Thu Mar 18 13:45:17 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 18 Mar 2004 15:45:17 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive content.
Message-ID: <405A0A5D.50406@twistedmatrix.com>

We're probably going to be switching the Twisted code repository to 
Subversion during the PyCon sprints (some time between saturday and 
tuesday). There will be a short period during conversion when neither 
CVS nor SVN will be accessible. I'm going to disable the CVS repository 
so nobody can commit while I'm converting it, run cvs2svn on it, and 
create a new repository at /svn/Twisted.

I might not convert tags and branches from the CVS repo to their SVN 
counterparts; last time I tried with a test-run it seemed to either take 
an incredibly long time or it was stuck, and I cancelled it. However, 
that's not too big of a deal; the old CVS repository will still be 
accessible read-only, so people will still be able to check out old tags 
and branches. Of course all old *revisions* will be converted to the SVN 
repository.

After this I'll be working on updating our release scripts and all info 
that references the CVS server. The SVN repository will be accessible 
from the web (and, in fact, our other SVN projects are already 
accessible) at http://cvs.twistedmatrix.com/cvs/. People with write 
access will use the SVN URL 
svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted.

The twisted-commits list will continue working. I still need to figure 
out what to do about IRC notification of commits. I might set up a 
CIA[1] server, or just use their central server.

I wrote SVN support for buildbot a while ago, so I'll get it set up so 
our SVN commits trigger our buildbot[2].

Did I forget anything?

1: http://cia.navi.cx/
2: http://twistedmatrix.com/buildbot/

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040318/21aeddaa/attachment.sig>

From golux at comcast.net  Thu Mar 18 14:20:03 2004
From: golux at comcast.net (Stephen C. Waterbury)
Date: Thu, 18 Mar 2004 16:20:03 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com>
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <405A1283.1060402@comcast.net>

Christopher Armstrong wrote:

> Did I forget anything?

Is there a subversion equivalent for CVS-Toys?  :)




From radix at twistedmatrix.com  Thu Mar 18 14:52:18 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 18 Mar 2004 16:52:18 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <405A1283.1060402@comcast.net>
References: <405A0A5D.50406@twistedmatrix.com> <405A1283.1060402@comcast.net>
Message-ID: <405A1A12.7040209@twistedmatrix.com>

Stephen C. Waterbury wrote:
> Christopher Armstrong wrote:
> 
>> Did I forget anything?
> 
> 
> Is there a subversion equivalent for CVS-Toys?  :)

Well, Subversion itself comes with an email script (or two), and the CIA 
thing which I mentioned in the last message offers all the features of 
CVSToys, afaict.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040318/92908c26/attachment.sig>

From jredders at lsil.com  Fri Mar 19 15:17:50 2004
From: jredders at lsil.com (John C. Reddersen)
Date: Fri, 19 Mar 2004 16:17:50 -0600
Subject: [Twisted-Python] Somebody please point me in the right direction...
Message-ID: <DLELJDPNJKAEEHLHNLONOEHODPAA.jredders@mhbs.lsil.com>

Hi all,

I'm a fairly new Python programmer, and really new to Twisted, so accept my
apologies now if this is a clueless newbie question...

I'm developing a wxPython application that needs to talk to another app via
a very simple sockets based interface.  I managed to mangle together some
code using twisted to connect to the socket and send an initial starting
message to the server and receive it's response.  However, I'm unsure how to
proceed from here to allow my GUI to send and receive commands over the
socket using the protocol created by the factory.  All the examples I could
find just send canned messages, nothing with user input...

Thanks!

-John Reddersen

---
LSI Logic RapidChip Integration Engineering
3425 40th Ave NW Suite 200
Rochester, MN 55901
(507) 535-3851




From dripton at ripton.net  Fri Mar 19 16:06:11 2004
From: dripton at ripton.net (David Ripton)
Date: Fri, 19 Mar 2004 18:06:11 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com>
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <405B7CE3.6060006@ripton.net>

Christopher Armstrong wrote:

> I might not convert tags and branches from the CVS repo to their SVN 
> counterparts; last time I tried with a test-run it seemed to either take 
> an incredibly long time or it was stuck, and I cancelled it.

cvs2svn has improved a lot lately, so you might want to try again with 
the latest.
(Which is now a separate project at http://cvs2svn.tigris.org)

--
David Ripton    dripton at ripton.net



From p.mayers at imperial.ac.uk  Sat Mar 20 11:43:36 2004
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Sat, 20 Mar 2004 18:43:36 +0000
Subject: [Twisted-Python] Cisco-style hierarchial CLI
Message-ID: <20040320184336.GA14586@wildfire0.net.ic.ac.uk>

All,

I'm putting together some glue-ware for a system, and would like to hide
the underlying nature of it. It's a bit of software that fits in and
around routers / switches etc. and there's a pretty common CLI for those
these days, which consists of a hierarchial context-based set of
commands, plus completion, e.g. on Cisco, although I suspect everyone is
familiar with the concept:

client: sh <question mark>
server:     ip - show IP items
server:     foo - show Foo items
server:     bar - show Bar items
client: sh f <question mark>
server:     ver - show foo version
server:     connections - show foo connections
client: sh f c <question mark>
server:     <cr> - show connection summary
server:     <int> - show connection detail
client: sh f c 3
server: <some stuff>

Similarly, for configure mode:

client: configure
server: ok
client: subsystem
server(subsystem): ok
client: <question mark>
server(subsystem): trusted - configure trusted ports
server(subsystem): untrusted - configure untrusted ports
server(subsystem): map - map from trusted to untrusted
client: trust
server(subsystem-trusted): ok
client: <question mark>
server(subsystem-trusted): ip - add a trusted port by IP
server(subsystem-trusted): phys - add a trusted physical port
server(subsystem-trusted): vlan - add a trusted vlan
client: vlan 1

The hiearchial configure mode is mapped onto a hierarchial configuration
file, e.g. the above would generate:

subsystem
  trusted
    vlan 1
  !
!

It's main features are:

1) Tab completion and partial -> full conversion
2) Nested modes

Relevant to twisted is I want to replace the manhole interactive
interpreter.

Any such beast exist?

-- 

Regards,
Phil

+------------------------------------------+
| Phil Mayers                              |
| Network & Infrastructure Group           |
| Information & Communication Technologies |
| Imperial College                         |
+------------------------------------------+



From andrew-twisted at puzzling.org  Sat Mar 20 17:01:17 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sun, 21 Mar 2004 11:01:17 +1100
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com>
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <20040321000117.GB7287@frobozz>

On Thu, Mar 18, 2004 at 03:45:17PM -0500, Christopher Armstrong wrote:
> access will use the SVN URL 
> svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted.

WARNING!  Doing "cvs co svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted" is
*not* a good idea.  It will download every single tagged or branched
revision of every single file in the repository.  By the time I got around
to cancelling it, it had filled 2.0G of my disk space.

Use "svn co svn+ssh://cvs.twistedmatrix.com/svn/Twisted/trunk Twisted"
instead.

Incidentally, there's an issue tracking the migration progress:

    http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue558

-Andrew.




From radix at twistedmatrix.com  Sat Mar 20 21:29:22 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 20 Mar 2004 23:29:22 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <20040321000117.GB7287@frobozz>
References: <405A0A5D.50406@twistedmatrix.com> <20040321000117.GB7287@frobozz>
Message-ID: <405D1A22.5050200@twistedmatrix.com>

Andrew Bennetts wrote:
> On Thu, Mar 18, 2004 at 03:45:17PM -0500, Christopher Armstrong wrote:
> 
>>access will use the SVN URL 
>>svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted.
> 
> 
> WARNING!  Doing "cvs co svn+ssh://user at cvs.twistedmatrix.com/svn/Twisted" is
> *not* a good idea.  It will download every single tagged or branched
> revision of every single file in the repository.  By the time I got around
> to cancelling it, it had filled 2.0G of my disk space.

Sorry :\

> Use "svn co svn+ssh://cvs.twistedmatrix.com/svn/Twisted/trunk Twisted"
> instead.
> 
> Incidentally, there's an issue tracking the migration progress:
> 
>     http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue558

Thanks for notifying people, Andrew ;-) I'll be making the Buildbot work 
again tomorrow, and then getting IRC notification working, probably via CIA.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040320/abe8cfa0/attachment.sig>

From z3p at twistedmatrix.com  Sun Mar 21 11:21:12 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Sun, 21 Mar 2004 13:21:12 -0500
Subject: [Twisted-Python] TOC and filetranser
In-Reply-To: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
References: <Pine.LNX.4.44.0403170359571.19618-100000@eminence32.cjb.net>
Message-ID: <1079892208.1198.6.camel@petra>

On Wed, 2004-03-17 at 04:07, achin wrote:
> hi, I'm writing an AIM bot using twisted's TOC implementation.  i was 
> wondering if this module supports file transfers (namely sending from the 
> TOC client).  and if so, could i get either some sample code, or a more 
> detailed documentation than the one at twistedmatrix.com

The TOC implementation (as well as the OSCAR implementation) basically
assume knowledge of the protocol.  This could be fixed, but since I
don't actively use either of these protocol implementations anymore,
it's not high on my list of priorities.

> my first question regarding the SendFileTransfer class is what exactly is 
> the "cookie" parameter in the __init__ method? (i don't see it documented 
> anywhere)

cookie is an arbitrary string that serves to notify the sending client
which file transfer the receiving client has accepted.

> as a side note, i was wondering if a TOC2 python module exists, as i think 
> TOC2 would be preferable over TOC

From what a quick google for TOC2 found, TOC2 is not significantly
different from TOC, and it shouldn't be hard to modify toc.py into a
toc2.py.  Patches are welcome! :)

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040321/0cfcfec2/attachment.sig>

From z3p at twistedmatrix.com  Sun Mar 21 11:21:17 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Sun, 21 Mar 2004 13:21:17 -0500
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <40551C3E.3080602@thecablelounge.com>
References: <40551C3E.3080602@thecablelounge.com>
Message-ID: <1079892762.1198.15.camel@petra>

On Sun, 2004-03-14 at 22:00, Andy Gayton wrote:
> I'm looking to create a filesystem backend for twisted that could be 
> used by any filelike twisted application (sftp, webdav etc).
> 
> I've got a proof of concept filesystem interface working - IFileSystem 
> .. not the best of names ;), which I'm about to try and sftp into.
> 
> ISFTPServer is a nice clean interface which it'd be easy to write an 
> adapter for from my IFileSystem - but its implementation is bolted into 
> FileTransferServer along with a bunch of protocol stuff ..
>
> I had been vaguely planning to break ISFTPServer's implementation out of 
> FileTransferServer and move it into a realm avatar when I got this far 
> so different users could have different filesystems but now that I get 
> to looking at it - FileTransferServer is brought into existance when a 
> sftp sybsystem is requested by the sftp client, which happens after 
> authentication ..
> 
> It's beginning to look like most of conch/ssh/session.py would need to 
> move into an avatar - so the avatar for a given user could be asked for 
> a shell, or a sftp subsystem and they would get the right shell/ sftp 
> onto a filesystem for that user ..

Yes, this does need to happen.  The code that creates shells, executes
files, and connects to file systems needs to be connected to ISSHUser,
not Session.  Unfortunatly, I can't think of a way to do it that doesn't
seem ugly.  Just adding methods like 'openShell(channel)' to ISSHUser
seems silly when there are many more possibilities of connections for a
Conch server.  There should be a clever way to do this with Interfaces
and Adaptors, but I can't think of it.

> I was hoping that Paul, or someone else may have some thoughts in this 
> area to guide me ..

The only thought I had was an LJ post
(http://z3p.livejournal.com/324865.html), but I'm having trouble turning
that idea into code.  Maybe I can convince some Twisted folks at PyCon
to help me out ;)

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040321/94a033a4/attachment.sig>

From ralf at brainbot.com  Sun Mar 21 14:07:23 2004
From: ralf at brainbot.com (Ralf Schmmitt)
Date: Sun, 21 Mar 2004 22:07:23 +0100
Subject: [Twisted-Python] Carnivore Warning: This message contains
 subversive content.
In-Reply-To: <405A0A5D.50406@twistedmatrix.com> (Christopher Armstrong's
 message of "Thu, 18 Mar 2004 15:45:17 -0500")
References: <405A0A5D.50406@twistedmatrix.com>
Message-ID: <86smg1hptg.fsf@stronzo.brainbot.com>

Christopher Armstrong <radix at twistedmatrix.com> writes:

> We're probably going to be switching the Twisted code repository to
> Subversion during the PyCon sprints (some time between saturday and
> tuesday). There will be a short period during conversion when neither
> CVS nor SVN will be accessible. I'm going to disable the CVS
> repository so nobody can commit while I'm converting it, run cvs2svn
> on it, and create a new repository at /svn/Twisted.
>
> I might not convert tags and branches from the CVS repo to their SVN
> counterparts; last time I tried with a test-run it seemed to either
> take an incredibly long time or it was stuck, and I cancelled
> it. However, that's not too big of a deal; the old CVS repository will
> still be accessible read-only, so people will still be able to check

will anonymous cvs also be back online ? currently it's not working
('cvs server: cannot find revision control file...')

- Ralf

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From andy at thecablelounge.com  Sun Mar 21 15:24:01 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 22 Mar 2004 08:24:01 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <1079892762.1198.15.camel@petra>
References: <40551C3E.3080602@thecablelounge.com> <1079892762.1198.15.camel@petra>
Message-ID: <405E1601.3020000@thecablelounge.com>

Paul Swartz wrote:

> The only thought I had was an LJ post
> (http://z3p.livejournal.com/324865.html), but I'm having trouble turning
> that idea into code.  Maybe I can convince some Twisted folks at PyCon
> to help me out ;)

Right - I stumbled across your post a couple of days ago and was 
encouraged you were already thinking along these lines.  Have fun at 
PyCon! - If you come up with anything please let me know - I'll keep 
plugging away in the meantime (might take a look at imap4's IAccount for 
ideas .. not sure how similiar a thing it is though) wishing that they'd 
host PyCon in Australia :)

Andy.



From ralf at brainbot.com  Sun Mar 21 18:08:49 2004
From: ralf at brainbot.com (Ralf Schmitt)
Date: Mon, 22 Mar 2004 02:08:49 +0100
Subject: [Twisted-Python] Copyable.getStateToCopyFor 'perspective' argument is None
Message-ID: <86r7vln0wu.fsf@stronzo.brainbot.com>

Hi,

the following program uses Copyable's getStateToCopyFor method but
only get's passed a 'None perspective'. Am I doing something wrong or
is this a bug?

- Ralf



#! /usr/bin/env python

from twisted.spread import pb, flavors
from twisted.internet import reactor


class Foo(flavors.Copyable, flavors.RemoteCopy):
    def getStateToCopyFor(self, perspective):
        print "PERSPECTIVE:", perspective
        return self.__dict__    

pb.setUnjellyableForClass(Foo, Foo)

class Echoer(pb.Root):
    def remote_echo(self, st):
        print 'echoing:', st
        #return st
    
factory = pb.PBClientFactory()
reactor.connectTCP("localhost", 8789, factory)
d = factory.getRootObject()
d.addCallback(lambda object: object.callRemote("echo", Foo()))

reactor.listenTCP(8789, pb.PBServerFactory(Echoer()))
reactor.run()

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From radix at twistedmatrix.com  Sun Mar 21 19:57:58 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 21 Mar 2004 21:57:58 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains subversive
 content.
In-Reply-To: <86smg1hptg.fsf@stronzo.brainbot.com>
References: <405A0A5D.50406@twistedmatrix.com> <86smg1hptg.fsf@stronzo.brainbot.com>
Message-ID: <405E5636.1000901@twistedmatrix.com>

Ralf Schmmitt wrote:
> Christopher Armstrong <radix at twistedmatrix.com> writes:
> 
> 
>>We're probably going to be switching the Twisted code repository to
>>Subversion during the PyCon sprints (some time between saturday and
>>tuesday). There will be a short period during conversion when neither
>>CVS nor SVN will be accessible. I'm going to disable the CVS
>>repository so nobody can commit while I'm converting it, run cvs2svn
>>on it, and create a new repository at /svn/Twisted.
>>
>>I might not convert tags and branches from the CVS repo to their SVN
>>counterparts; last time I tried with a test-run it seemed to either
>>take an incredibly long time or it was stuck, and I cancelled
>>it. However, that's not too big of a deal; the old CVS repository will
>>still be accessible read-only, so people will still be able to check
> 
> 
> will anonymous cvs also be back online ? currently it's not working
> ('cvs server: cannot find revision control file...')

Didn't I mention this? Oh well, all information is available at (pardon 
the misnomer of an URL):

http://twistedmatrix.com/developers/cvs


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040321/7afd67a4/attachment.sig>

From itamar at itamarst.org  Sun Mar 21 20:19:30 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 21 Mar 2004 22:19:30 -0500
Subject: [Twisted-Python] Carnivore Warning: This message contains
	subversive content.
In-Reply-To: <86smg1hptg.fsf@stronzo.brainbot.com>
References: <405A0A5D.50406@twistedmatrix.com>
	 <86smg1hptg.fsf@stronzo.brainbot.com>
Message-ID: <1079909936.2340.0.camel@sheriffpony>

On Sun, 2004-03-21 at 16:07, Ralf Schmmitt wrote:

> will anonymous cvs also be back online ? currently it's not working
> ('cvs server: cannot find revision control file...')

Nope, but you can use anonymous Subversion. (Or rather, yes, but only
for old versions, not the new ones, and the repository was renamed from
Twisted to Twisted.USE_SVN_NOT_CVS or something).

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From stephen at thorne.id.au  Sun Mar 21 23:19:37 2004
From: stephen at thorne.id.au (stephen at thorne.id.au)
Date: Mon, 22 Mar 2004 11:49:37 +0530
Subject: [Twisted-Python] Re: Thanks :)
Message-ID: <sqqaiqexfnjhkmvxkyc@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040322/114d204c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qlcvdxwioo.gif
Type: image/gif
Size: 1401 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040322/114d204c/attachment-0002.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: MoreInfo.zip
Type: application/octet-stream
Size: 46955 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040322/114d204c/attachment-0002.obj>

From stephen at thorne.id.au  Mon Mar 22 01:55:33 2004
From: stephen at thorne.id.au (Stephen Thorne)
Date: Mon, 22 Mar 2004 18:55:33 +1000
Subject: [Twisted-Python] Re: Thanks :)
In-Reply-To: <sqqaiqexfnjhkmvxkyc@twistedmatrix.com>
References: <sqqaiqexfnjhkmvxkyc@twistedmatrix.com>
Message-ID: <20040322185533.549507d2.stephen@thorne.id.au>

Hi,

I'll kindly ask all windows users to shoot themselves.

Thankyou.

Stephen Thorne.



From tv at tv.debian.net  Mon Mar 22 04:25:58 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Mon, 22 Mar 2004 13:25:58 +0200
Subject: [Twisted-Python] Cisco-style hierarchial CLI
In-Reply-To: <20040320184336.GA14586@wildfire0.net.ic.ac.uk>
References: <20040320184336.GA14586@wildfire0.net.ic.ac.uk>
Message-ID: <405ECD46.8090201@tv.debian.net>

Phil Mayers wrote:
> I'm putting together some glue-ware for a system, and would like to hide
> the underlying nature of it. It's a bit of software that fits in and
> around routers / switches etc. and there's a pretty common CLI for those
> these days, which consists of a hierarchial context-based set of
> commands, plus completion, e.g. on Cisco, although I suspect everyone is
> familiar with the concept:
...
> Any such beast exist?

Have a look at twisted.python.usage's idea of subCommands, that should
help. You need to build tab completion etc. on top of that; but ideally,
t.p.usage will allow you to have the same thing available straight from
shell:

$ mycommand sub1 --option=42 sub2 -f sub3
Doing stuff...

or

$ mycommand
your-app-here> sub1 --option=42
sub1> sub2 -f
sub1 sub2> sub3
Doing stuff...

sub1 sub2>


Additionally, this snippet allows you to implement the subcommand
modularly, with twisted's plugin architecture.

--8<--
from twisted.python import usage, plugin

class SubCommandOptions(usage.Options):
     def __init__(self):
         usage.Options.__init__(self)
         self.subCommands = []
         plugins = plugin.getPlugIns('YourApplicationNameHere-command')
         plugins.sort()
         for p in plugins:
             module = p.load()
             description = getattr(p, 'description', None)
             self.subCommands.append((p.name,
                                      None,
                                      getattr(module, 'Command'),
                                      description))
         self.subCommands.sort()

     def postOptions(self):
         if not hasattr(self, 'subOptions'):
             self.opt_help()
--8<--

--8<--
# plugins.tml
register(
     type="YourApplicationNameHere-command",
     module="YourApp.commands.sub1",
     name="sub1",
     description="Frobble the kibits",
)
--8<--

--8<--
# YourApp/commands/sub1.py
from twisted.python import usage

class Command(usage.Options):
     def postOptions(self):
	do_stuff_here()
--8<--



From ralf at brainbot.com  Mon Mar 22 04:57:54 2004
From: ralf at brainbot.com (Ralf Schmitt)
Date: Mon, 22 Mar 2004 12:57:54 +0100
Subject: [Twisted-Python] Carnivore Warning: This message contains
 subversive content.
In-Reply-To: <1079909936.2340.0.camel@sheriffpony> (Itamar Shtull-Trauring's
 message of "Sun, 21 Mar 2004 22:19:30 -0500")
References: <405A0A5D.50406@twistedmatrix.com>
	<86smg1hptg.fsf@stronzo.brainbot.com>
	<1079909936.2340.0.camel@sheriffpony>
Message-ID: <86r7vlf60t.fsf@stronzo.brainbot.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> On Sun, 2004-03-21 at 16:07, Ralf Schmmitt wrote:
>
>> will anonymous cvs also be back online ? currently it's not working
>> ('cvs server: cannot find revision control file...')
>
> Nope, but you can use anonymous Subversion. (Or rather, yes, but only
> for old versions, not the new ones, and the repository was renamed from
> Twisted to Twisted.USE_SVN_NOT_CVS or something).

What I had needed was anon cvs to the old versions, because I still
had some patched files and wanted to generate diffs. However, I have
now manually recovered those patches. But maybe someone else might
still have the same problem.

- Ralf

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From exarkun at divmod.com  Mon Mar 22 07:09:40 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Mon, 22 Mar 2004 14:09:40 GMT
Subject: [Twisted-Python] Cisco-style hierarchial CLI
Message-ID: <20040322140940.1289.442939527.divmod.quotient.8@erlang.divmod.net>

On Sat, 20 Mar 2004 18:43:36 +0000, Phil Mayers <p.mayers at imperial.ac.uk> wrote:
>All,
> 
> I'm putting together some glue-ware for a system, and would like to hide
> the underlying nature of it. It's a bit of software that fits in and
> around routers / switches etc. and there's a pretty common CLI for those
> these days, which consists of a hierarchial context-based set of
> commands, plus completion, e.g. on Cisco, although I suspect everyone is
> familiar with the concept:
> 
> [snip examples]
> 
> The hiearchial configure mode is mapped onto a hierarchial configuration
> file, e.g. the above would generate:
> 
> subsystem
>   trusted
>     vlan 1
>   !
> !
> 
> It's main features are:
> 
> 1) Tab completion and partial -> full conversion
> 2) Nested modes
> 
> Relevant to twisted is I want to replace the manhole interactive
> interpreter.
> 
> Any such beast exist?

  twisted.python.usage has some support for subcommands.  It doesn't support arbitrary abbreviations (if I recall correctly), but could probably be made to without much difficulty.

  Tab completion would have to be offered by whatever UI was presented, of course, and facilitated by some easily-done introspection into the Options class.

  t.p.usage.Options instances set their "subOptions" attribute when a sub-command is encountered.  I think you could exploit this fact to support nested states, by grabbing the subOptions object and asking it to parse further input.  I'm not sure how "backing up" should work, but you could probably accomplish it by keeping a stack of all the options classes that you get from the subOptions attribute.

  Of course it supports arbitrarily deep nesting, so multilevel commands are support.  The API is pretty simple, you just create an Options subclass with a subCommands class attribute bound to a
list of lists of the form ["longname", "shortname", OtherOptionsSubclass, "Description"].

  The existing code won't get you all the way there (especially the help formatting), but it seems like a reasonable place to start.

  Jp




From tv at tv.debian.net  Mon Mar 22 13:33:13 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Mon, 22 Mar 2004 22:33:13 +0200
Subject: [Twisted-Python] Cisco-style hierarchial CLI
In-Reply-To: <20040322140940.1289.442939527.divmod.quotient.8@erlang.divmod.net>
References: <20040322140940.1289.442939527.divmod.quotient.8@erlang.divmod.net>
Message-ID: <405F4D89.6030108@tv.debian.net>

>   Tab completion would have to be offered by whatever UI was presented, of course, and facilitated by some easily-done introspection into the Options class.

Oh, one more idea. The tab completion support should definitely be 
written so that bash and zsh programmable tab completion could be told
how to ask the app for tab completions.. E.g.

$ appname --foo -x --bar=a<TAB> path/to/dir/quux*
(cursor is on 8th char of 3rd argument, so runs e.g.
appname \
--show-tab-completions \
--tab-completion-arg=3 \
--tab-completion-cursor=8 \
-- \
--foo -x --bar=a path/to/dir/quuxthud path/do/dir/quuxbaz
which will then output something bash/zsh can parse)

>   t.p.usage.Options instances set their "subOptions" attribute when a sub-command is encountered.  I think you could exploit this fact to support nested states, by grabbing the subOptions object and asking it to parse further input.  I'm not sure how "backing up" should work, but you could probably accomplish it by keeping a stack of all the options classes that you get from the subOptions attribute.

Options have a "parent" attribute, so maintaining the stack is
unnecessary.



From andrew-twisted at puzzling.org  Mon Mar 22 17:25:55 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 23 Mar 2004 11:25:55 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r10342 - fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)
In-Reply-To: <E1B5Yvf-0001a6-00@wolfwood>
References: <E1B5Yvf-0001a6-00@wolfwood>
Message-ID: <20040323002555.GA8698@frobozz>

On Mon, Mar 22, 2004 at 04:33:59PM -0700, Itamar Shtull-Trauring wrote:
> Author: itamarst
> Date: Mon Mar 22 16:33:58 2004
> New Revision: 10342
> 
> Modified:
>    trunk/twisted/protocols/sux.py
>    trunk/twisted/test/test_xml.py
>    trunk/twisted/web/microdom.py
> Log:
> fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)

And it also appears to have broken tests, according to buildbot.  I suspect
some of the tests were checking for broken behaviour, but they really should
be fixed.

-Andrew.




From andrew-twisted at puzzling.org  Mon Mar 22 17:54:58 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 23 Mar 2004 11:54:58 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r10342 - fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)
In-Reply-To: <20040323002555.GA8698@frobozz>
References: <E1B5Yvf-0001a6-00@wolfwood> <20040323002555.GA8698@frobozz>
Message-ID: <20040323005458.GB8698@frobozz>

On Tue, Mar 23, 2004 at 11:25:55AM +1100, Andrew Bennetts wrote:
> On Mon, Mar 22, 2004 at 04:33:59PM -0700, Itamar Shtull-Trauring wrote:
> > Author: itamarst
> > Date: Mon Mar 22 16:33:58 2004
> > New Revision: 10342
> > 
> > Modified:
> >    trunk/twisted/protocols/sux.py
> >    trunk/twisted/test/test_xml.py
> >    trunk/twisted/web/microdom.py
> > Log:
> > fix #537, #414 (microdom no longer swallows whitespace, so it's probably much slower)
> 
> And it also appears to have broken tests, according to buildbot.  I suspect
> some of the tests were checking for broken behaviour, but they really should
> be fixed.

Although judging from the warnings from Lore ("WARNING: only list items allowed in
lists") apparently caused by whitespace between <ul> and <li> tags, I'm
guessing there are some genuine bugs, too.

-Andrew.




From maoy at cis.upenn.edu  Mon Mar 22 20:48:00 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Mon, 22 Mar 2004 22:48:00 -0500 (EST)
Subject: [Twisted-Python] How to use stdio.StandardIO in Windows?
In-Reply-To: <20040323005458.GB8698@frobozz>
Message-ID: <Pine.LNX.4.44.0403222244520.1042-100000@klondike.cis.upenn.edu>

Hi Twisted folks, I tried to use twisted.internet.stdio.StandardIO on
Windows. However, due to the lack of fcntl module, it doesn't work.

Is it possible to get around of the problem without using cygwin? Thanks!

-- 
Yun






From wolfgang.koelle at tiwag.at  Tue Mar 23 05:06:31 2004
From: wolfgang.koelle at tiwag.at (=?iso-8859-1?Q?K=F6lle_Wolfgang?=)
Date: Tue, 23 Mar 2004 13:06:31 +0100
Subject: [Twisted-Python] woven
Message-ID: <A3447493859FB6489E78D3D621B0DB0F568180@TWEXC1.tiwag.at>


hello, i am a new python programmer and i have a problem. i hope someone can help me. i have started my webserver on port 80, then i will get a url('//matlink-so-su5/Weiterleiten/Index.asp?DatumZeit=02.02.2004%22:00:00&TA=Meine%20Textadresse&langtext=MeinLangtext&Kommentar=mein%20Kommentar'). 
i want split this url and i should insert in this template and hand this to the HTTP server. This side should be the starting side for the user.
i work with python 2.2 and twisted 1.1.1
thank you

<html>
<head>
<title>Unbenanntes Dokument</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
body,td,th {
	color: #000000;
}
body {
	margin-left: 12px;
	margin-top: 50px;
	margin-right: 12px;
	margin-bottom: 0px;
}
-->
</style>
<link href="test.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
..Stil1 {color: #FF0000}
-->
</style>
</head>
<body>
<form name="form1" method="post" action="test_file_gen.rpy">
  <table width="100%"  border="1" cellspacing="0" cellpadding="5">
    <tr bgcolor="#FFFFCC">
      <th colspan="4" valign="bottom" class="arial16bold" scope="row"><div align="left">
          <table width="100%"  border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td valign="bottom" class="arial16boldÜberschrift1"><div align="left"></div>
                <div align="left"></div>
                <div align="left" class="Stil1"></div>
                <div align="left" class="Stil1"></div>
                <div align="left" class="Stil1"></div>
                <div align="left" class="Stil1"></div>
              <div align="left" class="arial16boldÜberschrift1 Stil1">Eintr&auml;ge bearbeiten</div></td>
              <td><div align="right"><img src="TWKc60px.gif" width="61" height="60"></div></td>
            </tr>
          </table>
          </div>        </th>
    </tr>
    <tr>
      <th width="24%" bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">
          <p>Datum</p>
      </div></th>
      <td width="45%" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtDatum" type="text" class="arial10" id="txtDatum" value="02.02.2004" size="15" maxlength="10"></td>
      <td width="16%" bgcolor="#CCCC99" class="arial12bold">AV tel. verst&auml;ndigt</td>
      <td width="15%" bgcolor="#CCCC99" class="arial12bold">&nbsp;&nbsp;        <select name="popupAVVerständigt" class="arial10" id="popupAVVerständigt">
        <option>ja/nein</option>
        <option>ja</option>
        <option>nein</option>
      </select></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Zeit</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;
        <input name="txtZeit" type="text" class="arial10" id="txtZeit" value="22:00:00" size="10">
      &nbsp;</td><td bgcolor="#CCCC99" class="arial12bold">Einsatz erforderlich </td>
      <td bgcolor="#CCCC99" class="arial12bold">&nbsp;&nbsp;        <select name="popupEinsatzErforderlich" class="arial10" id="popupEinsatzErforderlich">
        <option>ja/nein</option>
        <option>ja</option>
        <option>nein</option>
      </select></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Strukturplatz</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtStrukturplatz" type="text" id="<% txtStrukturplatz %>" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Erzeugungsbereich</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtErzeugungsbereich" type="text" id="txtErzeugungsbereich" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Kraftwerksbereich</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtKraftwerksbereich" type="text" id="txtKraftwerksbereich" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Unterstandort</div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtUnterstandort" type="text" id="txtUnterstandort" value=""></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left"></div>        
        <div align="left">Technologische Adresse </div>        </th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtTechnologischeAdresse" type="text" id="txtTechnologischeAdresse" value="Meine Textadresse"></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Meldetext</div></th>
      <td colspan="3" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtMeldetext" type="text" id="txtMeldetext" value="MeinLangtext" size="163"></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Weitergeleitet von </div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <select name="popupWeitergeleitetVon" size="1" id="popupWeitergeleitetVon">
        <option>mike thin</option>
      </select></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Kommentar Warte Mitarbeiter </div></th>
      <td colspan="3" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtKommentarWarteMitarbeiter" type="text" id="txtKommentarWarteMitarbeiter" value="mein Kommentar" size="163"></td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Zur Kenntnis genommen von </div></th>
      <td bgcolor="#CCCC99">&nbsp;&nbsp;        <select name="select">
        <option>king mike</option>
      </select></td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left">Kommentar Anlagenverantwortlichen </div></th>
      <td colspan="3" bgcolor="#CCCC99">&nbsp;&nbsp;        <input name="txtKommentarAnlagenverantwortlichen" type="text" id="txtKommentarAnlagenverantwortlichen" value="" size="163"></td>
    </tr>
    <tr>
      <th rowspan="2" bgcolor="#FFFFCC" class="arial12bold" scope="row"><div align="left"></div>        <div align="left"></div></th>
      <td bgcolor="#CCCC99">&nbsp;</td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <td bgcolor="#CCCC99">&nbsp;</td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
    <tr>
      <th class="arial12bold" scope="row"><div align="left">
        <input name="SubmitUpdate" type="submit" class="arial12bold" id="SubmitUpdate" value="update">
        <input name="SubmitDelete" type="submit" class="arial12bold" id="SubmitDelete" value="delete">
      </div></th>
      <td bgcolor="#CCCC99">&nbsp;</td>
      <td colspan="2" bgcolor="#CCCC99">&nbsp;</td>
    </tr>
  </table>
  <p>&nbsp;</p>
</form>
<hr align="left" width="100%">
<table width="100%"  border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="25%"><a href="http://www.google.at">&Uuml;bersicht</a></td>
    <td width="22%"><a href="http://www.google.at">neuer Eintrag </a></td>
    <td width="28%"><a href="http://www.google.at">neu/bearbeiten</a></td>
    <td width="25%"><a href="http://www.google.at">IMS-Auftrag</a></td>
  </tr>
</table>
<hr align="left" width="100%">
</body>
</html>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040323/13580464/attachment.html>

From z3p at twistedmatrix.com  Tue Mar 23 11:49:04 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Tue, 23 Mar 2004 13:49:04 -0500
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <40551C3E.3080602@thecablelounge.com>
References: <40551C3E.3080602@thecablelounge.com>
Message-ID: <1080067744.1247.2.camel@petra>

On Sun, 2004-03-14 at 22:00, Andy Gayton wrote:
> It's beginning to look like most of conch/ssh/session.py would need to 
> move into an avatar - so the avatar for a given user could be asked for 
> a shell, or a sftp subsystem and they would get the right shell/ sftp 
> onto a filesystem for that user .

A day and a half of hacking at PyCon, and bam!  r10358 includes a whole
bunch of changes, including separating the SFTP protocol implementation
from the filesystem interface.  It now looks for an adapter from the
avatar (the default server uses UnixConchUser) to ISFTPServer.  The old
filesystem implementation now lives in SFTPServerForUnixConchUser, an
adapter from UnixConchUser to ISFTPServer.  You'd just make your own
type of avatar, and a seperate backend, and register an adapter from the
avatar to the ISFTPServer interface.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040323/4a2d0c9b/attachment.sig>

From wcmclen at hotmail.com  Tue Mar 23 12:19:01 2004
From: wcmclen at hotmail.com (William McLendon)
Date: Tue, 23 Mar 2004 12:19:01 -0700
Subject: [Twisted-Python] Threading examples...
Message-ID: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>

Hi,

I'm trying out some of the threading examples from the web and am getting 
some a lockup at the end.

Here's the code I'm playing with, I pulled it straight from the examples:

(source: 
http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)


#!/usr/bin/env python
import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
    import time
    time.sleep(2)
    print x

# run method in thread
reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")


Is there something I need to do that will make the thread go away?  Are 
there some more examples of threading in Twisted-Python available?

Thanks,
  -William

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee� 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963




From mailinglists at shechen.at  Tue Mar 23 15:25:13 2004
From: mailinglists at shechen.at (stephan)
Date: Tue, 23 Mar 2004 14:25:13 -0800
Subject: [Twisted-Python] Threading examples...
In-Reply-To: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
References: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
Message-ID: <opr5b5wbxowzeeq5@mail.geekmail.cc>


The following snippet is the code I use and it works for my needs. Be 
careful with  non-threadsafe code (db api, etc...) though.

==========
 from twisted.internet import threads

threads.deferToThread(aSillyBlockingMethod, x).addCallback(\
         writeRequestAndFinish, request)
=========

I am using this in a twisted webserver that is why I am registering the 
writeRequestAndFinish methode to finish up on the render  methode where
I returned server.NOT_DONE_YET. But you can register any callback or no
callback as well.

_stephan




On Tue, 23 Mar 2004 12:19:01 -0700, William McLendon <wcmclen at hotmail.com> 
wrote:

> Hi,
>
> I'm trying out some of the threading examples from the web and am 
> getting some a lockup at the end.
>
> Here's the code I'm playing with, I pulled it straight from the examples:
>
> (source: 
> http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
>
>
> #!/usr/bin/env python
> import time
> from twisted.internet import reactor
>
> def aSillyBlockingMethod(x):
>     import time
>     time.sleep(2)
>     print x
>
> # run method in thread
> reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
>
>
> Is there something I need to do that will make the thread go away?  Are 
> there some more examples of threading in Twisted-Python available?
>
> Thanks,
>   -William
>
> _________________________________________________________________
> Is your PC infected? Get a FREE online computer virus scan from McAfee® 
> Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python





From andy at thecablelounge.com  Tue Mar 23 15:25:50 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Wed, 24 Mar 2004 08:25:50 +1000
Subject: [Twisted-Python] Isolating ISFTPServer in Conch's SFTP
In-Reply-To: <1080067744.1247.2.camel@petra>
References: <40551C3E.3080602@thecablelounge.com> <1080067744.1247.2.camel@petra>
Message-ID: <4060B96E.3020109@thecablelounge.com>

Paul Swartz wrote:
> On Sun, 2004-03-14 at 22:00, Andy Gayton wrote:
> 
>>It's beginning to look like most of conch/ssh/session.py would need to 
>>move into an avatar - so the avatar for a given user could be asked for 
>>a shell, or a sftp subsystem and they would get the right shell/ sftp 
>>onto a filesystem for that user .
> 
> 
> A day and a half of hacking at PyCon, and bam!  r10358 includes a whole
> bunch of changes, including separating the SFTP protocol implementation
> from the filesystem interface.  It now looks for an adapter from the
> avatar (the default server uses UnixConchUser) to ISFTPServer.  The old
> filesystem implementation now lives in SFTPServerForUnixConchUser, an
> adapter from UnixConchUser to ISFTPServer.  You'd just make your own
> type of avatar, and a seperate backend, and register an adapter from the
> avatar to the ISFTPServer interface.

That's brilliant!  Thanks Paul - I'll checkout the latest version and 
give it a whirl ..

Andy.



From andrew-twisted at puzzling.org  Tue Mar 23 15:30:13 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 24 Mar 2004 09:30:13 +1100
Subject: [Twisted-Python] Threading examples...
In-Reply-To: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
References: <Sea1-F44ZHtMkcVG8vG0000a836@hotmail.com>
Message-ID: <20040323223013.GA17665@frobozz>

On Tue, Mar 23, 2004 at 12:19:01PM -0700, William McLendon wrote:
> Hi,
> 
> I'm trying out some of the threading examples from the web and am getting 
> some a lockup at the end.
> 
> Here's the code I'm playing with, I pulled it straight from the examples:
> 
> (source: 
> http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
> 
> 
> #!/usr/bin/env python
> import time
> from twisted.internet import reactor
> 
> def aSillyBlockingMethod(x):
>    import time
>    time.sleep(2)
>    print x
> 
> # run method in thread
> reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")

This example doesn't call to reactor.stop(), so it never stops.  Put a call
to "reactor.callFromThread(reactor.stop)" after the print statement, for
example, and it should shutdown cleanly.

> Is there something I need to do that will make the thread go away?  Are 
> there some more examples of threading in Twisted-Python available?

The only example I can think of is the implementation of
twisted.enterprise.adbapi, which presents an asynchronous interface to
blocking DB-API modules by running it in threads.

-Andrew.




From wcmclen at hotmail.com  Tue Mar 23 15:34:04 2004
From: wcmclen at hotmail.com (William McLendon)
Date: Tue, 23 Mar 2004 15:34:04 -0700
Subject: [Twisted-Python] Threading examples...
Message-ID: <Sea1-F148DI8NFr9oD60000e75f@hotmail.com>

Hmmm... I tried something pretty close to that (though I have no callback 
called writeRequestAndFinish() in my example and am not sure what it's 
supposed to do)... but running the threads.deferToThread() routine still 
leaves me with the problem that the thread doesn't die.  I can't kill the 
app without going and manually killing it via pid.

Is there anything that I can do so that when aSillyBlockingMethod() is 
finished it just exits?

Thanks,
  -William


>From: stephan <mailinglists at shechen.at>
>Reply-To: twisted-python at twistedmatrix.com
>To: twisted-python at twistedmatrix.com
>Subject: Re: [Twisted-Python] Threading examples...
>Date: Tue, 23 Mar 2004 14:25:13 -0800
>
>The following snippet is the code I use and it works for my needs. Be 
>careful with  non-threadsafe code (db api, etc...) though.
>
>==========
>from twisted.internet import threads
>
>threads.deferToThread(aSillyBlockingMethod, x).addCallback(\
>         writeRequestAndFinish, request)
>=========
>
>I am using this in a twisted webserver that is why I am registering the 
>writeRequestAndFinish methode to finish up on the render  methode where I 
>returned server.NOT_DONE_YET. But you can register any callback or no 
>callback as well.
>
>_stephan
>
>
>On Tue, 23 Mar 2004 12:19:01 -0700, William McLendon <wcmclen at hotmail.com> 
>wrote:
>
>>Hi,
>>
>>I'm trying out some of the threading examples from the web and am getting 
>>some a lockup at the end.
>>
>>Here's the code I'm playing with, I pulled it straight from the examples:
>>
>>(source: 
>>http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
>>
>>
>>#!/usr/bin/env python
>>import time
>>from twisted.internet import reactor
>>
>>def aSillyBlockingMethod(x):
>>     import time
>>     time.sleep(2)
>>     print x
>>
>># run method in thread
>>reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
>>
>>
>>Is there something I need to do that will make the thread go away?  Are 
>>there some more examples of threading in Twisted-Python available?
>>
>>Thanks,
>>   -William

_________________________________________________________________
Get rid of annoying pop-up ads with the new MSN Toolbar � FREE! 
http://clk.atdmt.com/AVE/go/onm00200414ave/direct/01/




From wcmclen at hotmail.com  Tue Mar 23 15:58:20 2004
From: wcmclen at hotmail.com (William McLendon)
Date: Tue, 23 Mar 2004 15:58:20 -0700
Subject: [Twisted-Python] Threading examples...
Message-ID: <Sea1-F119ODt9Cz93Mg00008120@hotmail.com>

Thanks,

So, now my example looks like this:

import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
    time.sleep(2)
    print x
    reactor.callFromThread(reactor.stop)

# run method in thread
reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")


It still just hangs... I have to go kill it from another window after 
getting its pid from ps.   Am I doing the reactor.stop thing correctly?

Basically, I have an application that talks via a http interface to a user 
and I need to spawn off and do stuff from time to time.  I'm still learning 
how all the reactor eventloops and whatnot work.  I ran into a problem where 
I'm trying to run something via twisted.internet.protocol.ProcessProtocol 
and serve its results up from within a reactor.listentTCP() page handler ... 
but it blew up.  So, I'm thinking that I could maybe just fork it off and 
run that way.  I've been trying to figure out how the reactors() work and 
the threading and whatnot the last few days but am kind of finding little 
help in the docs and google that is at my level of understanding... seems 
most of the stuff is snippets and pieces that assume you already see the big 
picture :-(  Any help here is greatly appreciated ;-)

Thanks,
  -William



>From: Andrew Bennetts <andrew-twisted at puzzling.org>
>Reply-To: twisted-python at twistedmatrix.com
>To: twisted-python at twistedmatrix.com
>Subject: Re: [Twisted-Python] Threading examples...
>Date: Wed, 24 Mar 2004 09:30:13 +1100
>
>On Tue, Mar 23, 2004 at 12:19:01PM -0700, William McLendon wrote:
> > Hi,
> >
> > I'm trying out some of the threading examples from the web and am 
>getting
> > some a lockup at the end.
> >
> > Here's the code I'm playing with, I pulled it straight from the 
>examples:
> >
> > (source:
> > http://twisted.sourceforge.net/TwistedDocs-1.2.0/howto/threading.html)
> >
> >
> > #!/usr/bin/env python
> > import time
> > from twisted.internet import reactor
> >
> > def aSillyBlockingMethod(x):
> >    import time
> >    time.sleep(2)
> >    print x
> >
> > # run method in thread
> > reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
>
>This example doesn't call to reactor.stop(), so it never stops.  Put a call
>to "reactor.callFromThread(reactor.stop)" after the print statement, for
>example, and it should shutdown cleanly.
>
> > Is there something I need to do that will make the thread go away?  Are
> > there some more examples of threading in Twisted-Python available?
>
>The only example I can think of is the implementation of
>twisted.enterprise.adbapi, which presents an asynchronous interface to
>blocking DB-API modules by running it in threads.
>
>-Andrew.
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee� 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963




From andrew-twisted at puzzling.org  Tue Mar 23 16:10:53 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 24 Mar 2004 10:10:53 +1100
Subject: [Twisted-Python] Threading examples...
In-Reply-To: <Sea1-F119ODt9Cz93Mg00008120@hotmail.com>
References: <Sea1-F119ODt9Cz93Mg00008120@hotmail.com>
Message-ID: <20040323231053.GB17665@frobozz>

On Tue, Mar 23, 2004 at 03:58:20PM -0700, William McLendon wrote:
> Thanks,
> 
> So, now my example looks like this:
> 
> import time
> from twisted.internet import reactor
> 
> def aSillyBlockingMethod(x):
>    time.sleep(2)
>    print x
>    reactor.callFromThread(reactor.stop)
> 
> # run method in thread
> reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")
> 
> 
> It still just hangs... I have to go kill it from another window after 
> getting its pid from ps.   Am I doing the reactor.stop thing correctly?

Heh.  I just noticed the real bug: that example doesn't call reactor.run(),
either.

Complete, working example:

----
import time
from twisted.internet import reactor

def aSillyBlockingMethod(x):
   time.sleep(2)
   print x
   reactor.callFromThread(reactor.stop)

# run method in thread
reactor.callInThread(aSillyBlockingMethod, "2 seconds have passed")

reactor.run()
----

That reactor.callInThread starts the thread when the reactor isn't running yet
is probably a bug in Twisted.

> Basically, I have an application that talks via a http interface to a user 
> and I need to spawn off and do stuff from time to time.  I'm still learning 
> how all the reactor eventloops and whatnot work.  I ran into a problem 
> where I'm trying to run something via 
> twisted.internet.protocol.ProcessProtocol and serve its results up from 
> within a reactor.listentTCP() page handler ... but it blew up.  So, I'm 

How did it blow up (and how are you spawning the process)?  Twisted is quite
capable of coping with this -- it's how the CGI support in twisted.web
works.

> thinking that I could maybe just fork it off and run that way.  I've been 
> trying to figure out how the reactors() work and the threading and whatnot 
> the last few days but am kind of finding little help in the docs and google 
> that is at my level of understanding... seems most of the stuff is snippets 
> and pieces that assume you already see the big picture :-(  Any help here 
> is greatly appreciated ;-)

I strongly advise avoiding threads unless you really need them.  From your
description of what you are trying to do, you don't need them.

-Andrew.




From glyph at divmod.com  Tue Mar 23 12:00:21 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Tue, 23 Mar 2004 14:00:21 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
Message-ID: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>

Unfortunately, I've been out of the loop on Twisted development for 
some time.  During the course of the PyCon sprints, I've been catching 
up with what's been going on and trying to do some planning for future 
directions in development.

Yesterday Itamar and I had our quarterly screaming argument about 
obscure details, and it didn't come to blows, which I believe means 
that spring is right around the corner!

The major issue we've been discussing is splitting up Twisted into 
multiple packages.  Twisted has been encountering some growing pains, 
due to a mismatch between the way it's developed and the way it's 
distributed.  We (T.M.Labs) are really a community of developers 
working on several interrelated projects with different goals, 
stability, and release cycles, but we are distributing one monolithic 
system, with code of vastly different qualities in the same tarball and 
sometimes even in the same package.

The primary problem that this leads to is revision coupling.  This is 
probably old news to anyone trying to deploy a large system which 
relies on any part of Twisted besides the base reactor (and maybe 
twisted.web).  Scenarios like this happen all the time:

	- Twisted v.N.M.0 is released.
	- Project P uses twisted components X and Y.  (Generally X and Y are 
marked 'Unstable' or 'Semi-Stable', but are very useful or heavily 
marketed or otherwise convince unsuspecting users to trust their 
stability.)
	- Project Q uses twisted components Y and Z.
	- Project P v. 1 is released.
	- Project Q v. 1 is released.
	- Project P gives useful feedback to twisted developer A who then 
fixes several bugs in component X which are critical to the functioning 
of the as-yet-unreleased P v.2
	- Twisted developer B working on project Q commits substantial 
"improvements" to component Y, which change the functionality in a way 
that breaks project X.
	- Radix prepares an alpha/bugfix release, v.N.M.1

At this point, Project Q is perfectly happy, because the most recent 
alpha works for their code.  However, Project P is very unhappy, 
because there is no release which includes their bugfix but does NOT 
include code which forces them to upgrade some functionality in an a 
way which is incompatible with the previous micro-version release of 
Twisted which their users presumably already have installed.  The 
release notes have to be very specific, and because nobody reads them 
anyway, a lot of confusion results.

While there are problems with splitting Twisted into multiple projects, 
I think that the time has come to do so.  Originally the feedback I 
heard from most users was that it was great to have lots of different 
packages available so readily; the "batteries included" philosophy does 
have a lot going for it.  Now, most of what I'm hearing is complaints 
about the above scenario, not the least of which from my own employer 
:-).  We are more often in the role of project Q than project P 
(although we have been in both more than once) and I'd prefer not to 
have a few projects who employ active Twisted developers control the 
release cycle based on their requirements.

Because splitting the project involves moving some code around, we 
should take the opportunity to clean up another problem: our code has 
no effective separation between interface and implementation.  Within 
the project this is fine, because we can easily refactor any uses of 
deprecated APIs.

While we aren't going to break the existing package-structure 
interfaces (or even deprecate them, for the time being), this means 
that in the future, imports for twisted projects will probably look 
like:

	from twisted_core import reactor
	from twisted_web import Resource

The way this will be implemented, a top-level "twisted_core" module (or 
possibly, package, but I would like as little nesting as possible here) 
will import explicitly public names from a _twisted_core implementation 
package.  For the forseeable future, the twisted.* package hierarchy 
will continue to work for imports; however, considering how informally 
specified this interface has been, I imagine improved documentation 
will emerge for the newer interface packages.

Personally I wanted to call these modules "twisted_web_1", and I also 
wanted to talk about versioning here, but amidst strenuous objections 
from Anthony Baxter and Itamar ST I will refrain :).

Suffice it to say that I believe that regardless of many potential 
strategies available for versioning, a separate module for interface 
vs. implementation will make it possible to determine what is public 
and usable from a deployed application using the Python interactive 
prompt or reading the code.  Since many packages don't have stability 
declarations anyway, I think this will result in many fewer 
unintentional uses of private code.

The first package that we are going to try this on is twisted.web, 
because there is a major rewrite pending integration of all the fixes 
and redesign that has happened in the Nevow package.  If this goes 
well, other packages will use the same naming conventions.  In any 
case, we will be migrating packages out of the Twisted core. for 
example: lore, conch, manhole, and mail.

As part of this process we hope to improve the website to reflect the 
name "Twisted" as primarily a part of "Twisted Matrix Labs", the group 
of developers working on these projects.  Similar to tigris.org, TML is 
"a mid-sized open source community focused on building better tools for 
networked application development".  Package maintainers: each project 
should have its own sub-site, so consider a project description and any 
other documentation you might want on that site.

As far as our development process, we will be keeping all the code in 
one subversion repository and still running BuildBot over the entire 
system in a way similar to how we're doing it now.  There are lots of 
possible improvements to the process, all the way up to an independent 
package management system using distutils: please, don't recommend any 
of these.  We don't want to make a huge number of changes at the same 
time, and while this moving / renaming is fairly mechanical, it will 
touch almost every file in the world; we need to make sure it all works 
before we begin adding features based on it.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040323/b5ebd1cf/attachment.sig>

From mary-twisted at puzzling.org  Tue Mar 23 17:12:48 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 24 Mar 2004 11:12:48 +1100
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
Message-ID: <20040324001248.GA10837@titus.home.puzzling.org>

My concern is entirely documentation, so forgive me for glossing over
every other detail contained in your post.

On Tue, Mar 23, 2004, Glyph Lefkowitz wrote:
> As part of this process we hope to improve the website to reflect the
> name "Twisted" as primarily a part of "Twisted Matrix Labs", the group
> of developers working on these projects.  Similar to tigris.org, TML
> is "a mid-sized open source community focused on building better tools
> for networked application development".  Package maintainers: each
> project should have its own sub-site, so consider a project
> description and any other documentation you might want on that site.

I'm not sure what this implies for the documentation: there isn't a very
clear distinction drawn in your post between API documentation and
HOWTOs -- perhaps this is as it should be but there are some
distinctions for this exercise.

It seems fairly uncontroversial to me that API documentation gets split
off onto the project subsites, especially since this can be automated.

The situation with HOWTOs and other documentation is less clear. The
"Twisted documentation project" already has its own separate section of
the repository, but there are few internal distinctions between Twisted
Web docs and PB docs (for example) aside from in the HOWTO index.

Interface changes to one Twisted project would require a partial HOWTO
release, which suggests that the HOWTOs should be split as well.

However, splitting the HOWTOs into the separate projects leaves the
question of any docs that cover the entire family of projects: the
tutorial is the single best example. There are also documents that are
relevant for developers using many of the products, the documentation on
asynchrony is an example. It also leaves open the question of
responsibility for keeping those docs up to date.

As for me personally, it's unclear whether this leaves my role as
documentation editor redundant or not. Certainly, maintaining documents,
or coordinating the maintainence thereof, for a whole bunch of projects
on a whole bunch of release cycles is a different, and probably bigger,
task than maintaining one set of documents for one project. Even the
latter task is only notionally mine (the time I can devote to Twisted
documentation is only around 5 hours a week).

If decisions are made affecting this, please let me know. I'm willing to
provide input if you like, but I'm not often on IRC, that powerhouse of
Twisted decision-making.

-Mary



From pp64 at cornell.edu  Tue Mar 23 19:30:25 2004
From: pp64 at cornell.edu (Pavel Pergamenshchik)
Date: Tue, 23 Mar 2004 21:30:25 -0500
Subject: [Twisted-Python] Windows IOCP reactor
Message-ID: <20040323213025.24c0e35b.pp64@cornell.edu>

Support for Windows completion ports is now in Twisted.
Unlike win32reactor, IOCP allows a Twisted application to have a nearly unlimited amount of open connections. Performance improvements and process running support will be coming shortly. You can use this reactor
by installing it with:

from twisted.internet import iocp
iocp.install()

or by using "--reactor=iocp" parameter to trial or twistd.
Suggestions are welcome!



From justinjohnson at fastmail.fm  Wed Mar 24 06:48:06 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Wed, 24 Mar 2004 07:48:06 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <20040323213025.24c0e35b.pp64@cornell.edu>
References: <20040323213025.24c0e35b.pp64@cornell.edu>
Message-ID: <1080136086.19681.183237231@webmail.messagingengine.com>

Woohooo!

Anybody have a windows installer for the latest from subversion?  I got
no VS.  :-(

-Justin

On Tue, 23 Mar 2004 21:30:25 -0500, "Pavel Pergamenshchik"
<pp64 at cornell.edu> said:
> Support for Windows completion ports is now in Twisted.
> Unlike win32reactor, IOCP allows a Twisted application to have a nearly
> unlimited amount of open connections. Performance improvements and
> process running support will be coming shortly. You can use this reactor
> by installing it with:
> 
> from twisted.internet import iocp
> iocp.install()
> 
> or by using "--reactor=iocp" parameter to trial or twistd.
> Suggestions are welcome!
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From corydodt at twistedmatrix.com  Wed Mar 24 08:23:19 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 24 Mar 2004 07:23:19 -0800
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <1080136086.19681.183237231@webmail.messagingengine.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu> <1080136086.19681.183237231@webmail.messagingengine.com>
Message-ID: <4061A7E7.8070809@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91

1.0.0 is available there (the latest is 1.0.1).  1.0.0 works fine.

C

Justin Johnson wrote:

| Woohooo!
|
| Anybody have a windows installer for the latest from subversion?  I got
| no VS.  :-(
|
| -Justin
|
| On Tue, 23 Mar 2004 21:30:25 -0500, "Pavel Pergamenshchik"
| <pp64 at cornell.edu> said:
|
|>Support for Windows completion ports is now in Twisted.
|>Unlike win32reactor, IOCP allows a Twisted application to have a nearly
|>unlimited amount of open connections. Performance improvements and
|>process running support will be coming shortly. You can use this reactor
|>by installing it with:
|>
|>from twisted.internet import iocp
|>iocp.install()
|>
|>or by using "--reactor=iocp" parameter to trial or twistd.
|>Suggestions are welcome!
|>
|>_______________________________________________
|>Twisted-Python mailing list
|>Twisted-Python at twistedmatrix.com
|>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
|
|
| _______________________________________________
| Twisted-Python mailing list
| Twisted-Python at twistedmatrix.com
| http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYafn3A5SrXAiHQcRApdGAJ9VfI6mJawk5Eu7Cpi9dR//r6U1KQCeK40/
npswQQaMawJsonQDeXkOjQ4=
=llgN
-----END PGP SIGNATURE-----



From eugen at leitl.org  Wed Mar 24 09:15:50 2004
From: eugen at leitl.org (Eugen Leitl)
Date: Wed, 24 Mar 2004 17:15:50 +0100
Subject: [Twisted-Python] "Scripting Language" My Arse: Using Python for Voice over IP (Shtoom)
Message-ID: <20040324161550.GN28136@leitl.org>


http://www.python.org/pycon/dc2004/papers/6/paper.txt

"Scripting Language" My Arse: Using Python for Voice over IP
============================================================

[This is the paper, not the talk. The talk is yet to come]

[third draft]

Abstract
--------

A common complaint made of Python is that it is not suitable for serious
application development, and is only suitable for "scripting" or
"prototyping" tasks. The Shtoom toolkit 
(http://divmod.org/Home/Projects/Shtoom) is a Voice over IP (VoIP) 
framework implemented in Python using the Twisted framework. It 
includes 'shtoom' itself, a software phone using the toolkit.

This paper covers the basics of SIP and RTP (the protocols underlying
Voice over IP), examines some of the issues relating to the
implementation of Shtoom (with a digression on issues relating
to timing), and will hopefully help demonstrate why implementing
applications in Python is perfectly feasible.

...

-- 
Eugen* Leitl <a href="http://leitl.org">leitl</a>
______________________________________________________________
ICBM: 48.07078, 11.61144            http://www.leitl.org
8B29F6BE: 099D 78BA 2FD3 B014 B08A  7779 75B0 2443 8B29 F6BE
http://moleculardevices.org         http://nanomachines.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040324/0a5e5bd2/attachment.sig>

From justinjohnson at fastmail.fm  Wed Mar 24 11:39:04 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Wed, 24 Mar 2004 12:39:04 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <4061A7E7.8070809@twistedmatrix.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu> <1080136086.19681.183237231@webmail.messagingengine.com> <4061A7E7.8070809@twistedmatrix.com>
Message-ID: <1080153544.23236.183256997@webmail.messagingengine.com>

No, I meant a Windows installer for the latest Twisted from the new
subversion repository.  :-)

On Wed, 24 Mar 2004 07:23:19 -0800, "Cory Dodt"
<corydodt at twistedmatrix.com> said:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91
> 
> 1.0.0 is available there (the latest is 1.0.1).  1.0.0 works fine.
> 
> C
> 
> Justin Johnson wrote:
> 
> | Woohooo!
> |
> | Anybody have a windows installer for the latest from subversion?  I got
> | no VS.  :-(
> |
> | -Justin
> |
> | On Tue, 23 Mar 2004 21:30:25 -0500, "Pavel Pergamenshchik"
> | <pp64 at cornell.edu> said:
> |
> |>Support for Windows completion ports is now in Twisted.
> |>Unlike win32reactor, IOCP allows a Twisted application to have a nearly
> |>unlimited amount of open connections. Performance improvements and
> |>process running support will be coming shortly. You can use this
> reactor
> |>by installing it with:
> |>
> |>from twisted.internet import iocp
> |>iocp.install()
> |>
> |>or by using "--reactor=iocp" parameter to trial or twistd.
> |>Suggestions are welcome!
> |>
> |>_______________________________________________
> |>Twisted-Python mailing list
> |>Twisted-Python at twistedmatrix.com
> |>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> |
> |
> | _______________________________________________
> | Twisted-Python mailing list
> | Twisted-Python at twistedmatrix.com
> | http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAYafn3A5SrXAiHQcRApdGAJ9VfI6mJawk5Eu7Cpi9dR//r6U1KQCeK40/
> npswQQaMawJsonQDeXkOjQ4=
> =llgN
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From ralf at brainbot.com  Wed Mar 24 11:44:53 2004
From: ralf at brainbot.com (Ralf Schmitt)
Date: Wed, 24 Mar 2004 19:44:53 +0100
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <1080153544.23236.183256997@webmail.messagingengine.com> (Justin
 Johnson's message of "Wed, 24 Mar 2004 12:39:04 -0600")
References: <20040323213025.24c0e35b.pp64@cornell.edu>
	<1080136086.19681.183237231@webmail.messagingengine.com>
	<4061A7E7.8070809@twistedmatrix.com>
	<1080153544.23236.183256997@webmail.messagingengine.com>
Message-ID: <86fzbykrtm.fsf@stronzo.brainbot.com>

"Justin Johnson" <justinjohnson at fastmail.fm> writes:

> No, I meant a Windows installer for the latest Twisted from the new
> subversion repository.  :-)
>

You can build one yourself without using Visual Studio.
Take a look at http://sebsauvage.net/python/mingw.html.

- Ralf
-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From corydodt at twistedmatrix.com  Wed Mar 24 12:04:36 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 24 Mar 2004 11:04:36 -0800
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <86fzbykrtm.fsf@stronzo.brainbot.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com>
Message-ID: <4061DBC4.3030900@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

For that matter, take a look at Twisted/win32/README.win32 for all about how
it's done.  (You can even build the official installer yourself.)

C

Ralf Schmitt wrote:

| "Justin Johnson" <justinjohnson at fastmail.fm> writes:
|
|
|>No, I meant a Windows installer for the latest Twisted from the new
|>subversion repository.  :-)
|>
|
|
| You can build one yourself without using Visual Studio.
| Take a look at http://sebsauvage.net/python/mingw.html.
|
| - Ralf

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYdvE3A5SrXAiHQcRAvyKAJ9G0nbHSWiz64VUbOvEEI4mF/SX9ACfQAwD
ox4ODSCCjMUkyk1I6kU0Tec=
=WFI2
-----END PGP SIGNATURE-----



From andrew-twisted at puzzling.org  Wed Mar 24 17:02:23 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 25 Mar 2004 11:02:23 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http rewrite, don't look yet.
In-Reply-To: <E1B6HEA-0002cd-00@wolfwood>
References: <E1B6HEA-0002cd-00@wolfwood>
Message-ID: <20040325000223.GA17117@frobozz>

On Wed, Mar 24, 2004 at 03:52:02PM -0700, James Knight wrote:
> Author: foom
> Date: Wed Mar 24 15:52:02 2004
> New Revision: 10392
> 
> Added:
>    trunk/sandbox/foom/
>    trunk/sandbox/foom/web/
>    trunk/sandbox/foom/web/http.py
>    trunk/sandbox/foom/web/http_headers.py
>    trunk/sandbox/foom/web/test_http.py
>    trunk/sandbox/foom/web/test_http_headers.py
> Log:
> Start http rewrite, don't look yet.

Now that we're using a version control system that actually copes with
branching (or so I'm told), why are we still using the sandbox for this
stuff?  Wouldn't branches be better for experimental rewrites like this?

I'm not Subversion expert, so I'm interested in hearing if there's any good
arguments for or against -- but I always assumed that the sandbox directory
was largely a hack we had because CVS sucked.

-Andrew.




From glyph at divmod.com  Wed Mar 24 21:51:48 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Wed, 24 Mar 2004 23:51:48 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <20040324001248.GA10837@titus.home.puzzling.org>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <20040324001248.GA10837@titus.home.puzzling.org>
Message-ID: <20014610-7E18-11D8-9B2F-000393C9700E@divmod.com>


On Mar 23, 2004, at 7:12 PM, Mary Gardiner wrote:

> As for me personally, it's unclear whether this leaves my role as
> documentation editor redundant or not. Certainly, maintaining 
> documents,
> or coordinating the maintainence thereof, for a whole bunch of projects
> on a whole bunch of release cycles is a different, and probably bigger,
> task than maintaining one set of documents for one project. Even the
> latter task is only notionally mine (the time I can devote to Twisted
> documentation is only around 5 hours a week).
>
> If decisions are made affecting this, please let me know. I'm willing 
> to
> provide input if you like, but I'm not often on IRC, that powerhouse of
> Twisted decision-making.

Mary,

Your contributions have been extremely valuable so far, and my main 
concern is that as little change as possible in this transition :).  
Consider that the existing documents form a single book which documents 
a suite of applications.  Some of these applications will be deprecated 
or disappear, and the parts of the book covering them will be removed.  
However, at the moment I don't think it's worthwhile to split 
everything up if that's going to make things harder.

If there is a process change to be made, consider this primarily a 
license for you to solicit more assistance from package maintainers on 
a regular basis...
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040324/da197ab1/attachment.sig>

From mary-twisted at puzzling.org  Wed Mar 24 22:01:54 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Thu, 25 Mar 2004 16:01:54 +1100
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <20014610-7E18-11D8-9B2F-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <20040324001248.GA10837@titus.home.puzzling.org> <20014610-7E18-11D8-9B2F-000393C9700E@divmod.com>
Message-ID: <20040325050154.GC19207@titus.home.puzzling.org>

On Wed, Mar 24, 2004, Glyph Lefkowitz wrote:
> Your contributions have been extremely valuable so far, and my main
> concern is that as little change as possible in this transition :).
> Consider that the existing documents form a single book which
> documents a suite of applications.  Some of these applications will be
> deprecated or disappear, and the parts of the book covering them will
> be removed.  

The only trouble with this is how to keep the HOWTOs up to date with the
codebase(s). At present, HOWTOs are updated on the main webpage whenever
a major release happens. Bugs are filed against webpage docs at about
twice the rate they're filed against repository docs, so clearly the
webpage docs are regarded as authoritative, and it is important that it
reflects the released codebase.

I suppose the /documents section of the website could be updated
whenever there is *any* release of a Twisted project. That's probably
the smallest possible sensible change.

> If there is a process change to be made, consider this primarily a
> license for you to solicit more assistance from package maintainers on
> a regular basis...

OK!

-Mary



From tv at tv.debian.net  Thu Mar 25 01:38:13 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Thu, 25 Mar 2004 10:38:13 +0200
Subject: [Twisted-Python] woven
In-Reply-To: <A3447493859FB6489E78D3D621B0DB0F568180@TWEXC1.tiwag.at>
References: <A3447493859FB6489E78D3D621B0DB0F568180@TWEXC1.tiwag.at>
Message-ID: <40629A75.2040305@tv.debian.net>

Kölle Wolfgang wrote:
> 
> hello, i am a new python programmer and i have a problem. i hope someone 
> can help me. i have started my webserver on port 80, then i will get a 

First of all, please use the mailing list twisted-web at twistedmatrix.com
for web related issues.

Second, you didn't really explain at all what does not work, or what
information you need.

Third, the full HTML file you included is huge and unreadable; please
try to make your example files simpler and smaller.

http://www.catb.org/~esr/faqs/smart-questions.html



From tv at tv.debian.net  Thu Mar 25 01:47:52 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Thu, 25 Mar 2004 10:47:52 +0200
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
Message-ID: <40629CB8.8000800@tv.debian.net>

Glyph Lefkowitz wrote:
>     from twisted_web import Resource

So, now we have twisted.web, twisted_web and twisted-web.deb, also known
as TwistedWebDeb?


One thing you said relatively little of, but what seems interesting, is
what are the groups of modules likely to be? Core, web, mail, conch, ...
I'm trying to understand how complex the result will be.



From wilk-ml at flibuste.net  Thu Mar 25 08:37:27 2004
From: wilk-ml at flibuste.net (William Dode)
Date: Thu, 25 Mar 2004 16:37:27 +0100
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http
 rewrite, don't look yet.
In-Reply-To: <20040325000223.GA17117@frobozz> (Andrew Bennetts's message of
 "Thu, 25 Mar 2004 11:02:23 +1100")
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>
Message-ID: <87hdwdey4o.fsf@blakie.riol>

I would like to know why you choose subversion and not arch or dracs or
i don't know... I'm also searching for an other versioning system for my
projects and i would like to know the arguments of twisteds zen
developers ;-)
There is also a pythonic system (codeville). So a lot of choice and lot
of pain to choose.

Sorry if it's too much OT.

-- 
William Dodé - http://flibuste.net



From joebrown at rclooke.com  Thu Mar 25 10:42:11 2004
From: joebrown at rclooke.com (Joe Brown)
Date: Thu, 25 Mar 2004 12:42:11 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http rewrite,
 don't look yet.
In-Reply-To: <87hdwdey4o.fsf@blakie.riol>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz> <87hdwdey4o.fsf@blakie.riol>
Message-ID: <406319F3.3080303@rclooke.com>

William Dode wrote:

>I would like to know why you choose subversion and not arch or dracs or
>i don't know... I'm also searching for an other versioning system for my
>projects and i would like to know the arguments of twisteds zen
>developers ;-)
>There is also a pythonic system (codeville). So a lot of choice and lot
>of pain to choose.
>
>Sorry if it's too much OT.
>
>  
>
If your on windows, I'd suggest getting cygwin and use the cvs tools 
that come with it.

In the Linux world, it's so convenient to RCS any file with a simple 
command like ci -l $filename$ and bang, you've got a backup 
($filename$,v) and the start of a simplified versioning system.  Cygwin 
enables you to do this (and a lot more) on windows. 

I'm not the most versed on RCS/CVS, but that's simple enough for me to 
work with.  You can set environment variables, etc, and do the whole 
repository thing to.  But on the fly, you can't beat that for simplicity.

-Joe





From corydodt at twistedmatrix.com  Thu Mar 25 10:54:48 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Thu, 25 Mar 2004 09:54:48 -0800
Subject: [Twisted-Python] Re: [Twisted-commits] r10392 - Start http rewrite,
 don't look yet.
In-Reply-To: <87hdwdey4o.fsf@blakie.riol>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz> <87hdwdey4o.fsf@blakie.riol>
Message-ID: <40631CE8.1040307@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

The biggest arguments for Twisted using subversion are:
- - it's a *lot* like CVS, so it's good if you already know CVS
- - it fixes (almost?) all the warts in CVS; addresses are urls, commits are
atomic, copies and branches are O(1), directories and directory properties are
versioned.
- - maturity.. sounds odd if you're aware that they just did a 1.0, but svn has
been in development for about 4 years.  The 1.0 is *stable*.  The 1.0.1,
already out, should be more so.
- - server administration is relatively simple.  The problems you're likely to
encounter administering a server are known problems with solutions.
- - very cross-platform.  windows tools are excellent, Mac ports of the tools
exist, etc.
- - Good support tools; e.g. options to display your repo on the web, buildbot
works with it, there's an emacs mode, ...
- - Good integration with existing access methods, such as ssh.
- - Lots of developers have been experimenting with svn for the last few months
during the run-up to 1.0, so there's mentors available.
- - there's an #svn on freenode, and the developers hang out there, and they
help. :-)
- - it's in Debian (albeit still Debian unstable).

All of these arguments are important to me; each is present in one or more of
the other version control options, but I'm not aware of any other system that
answers all of them at once.  It hardly needs be said that ymmv.

C


William Dode wrote:
| I would like to know why you choose subversion and not arch or dracs or
| i don't know... I'm also searching for an other versioning system for my
| projects and i would like to know the arguments of twisteds zen
| developers ;-)
| There is also a pythonic system (codeville). So a lot of choice and lot
| of pain to choose.
|
| Sorry if it's too much OT.
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYxzo3A5SrXAiHQcRAgy5AJ9dUi7HScg9Wo11aL2jRREq/R4rSQCfbRsn
1UObqPnp5Oiz3gLaeL/loEU=
=Q8dt
-----END PGP SIGNATURE-----



From justinjohnson at fastmail.fm  Thu Mar 25 10:54:20 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Thu, 25 Mar 2004 11:54:20 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <4061DBC4.3030900@twistedmatrix.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com> <4061DBC4.3030900@twistedmatrix.com>
Message-ID: <1080237260.5222.183323777@webmail.messagingengine.com>

Okay, so I got everything setup as the readme states, but I had to fiddle
with my path a bit in cygwin and I'm still having some issues.  The
native python seems to have problems opening cygwin files.

$ aap -f win32/build.aap
c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap'

$ aap.py -f win32/build.aap
c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap.py'

$ echo $PATH
/usr/local/bin:/usr/ccs/bin:/usr/ccs/lib:/usr/bin:/usr/ucb:/etc:/cygdrive/c/MinG
W/bin:/cygdrive/c/aap/Exec:/cygdrive/c/usr/local/wbin:/cygdrive/c/Vim/vim62:/cyg
drive/c/Python23:/cygdrive/c/Python23/scripts:.

$ ls -l /cygdrive/c/aap/Exec/aap.py
-rwxrwxrwx+   1 Administ ????????      438 Aug  7  2003
/cygdrive/c/aap/Exec/aap
.py


Anyone have any ideas?
Thanks.
-Justin

On Wed, 24 Mar 2004 11:04:36 -0800, "Cory Dodt"
<corydodt at twistedmatrix.com> said:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> For that matter, take a look at Twisted/win32/README.win32 for all about
> how
> it's done.  (You can even build the official installer yourself.)
> 
> C
> 
> Ralf Schmitt wrote:
> 
> | "Justin Johnson" <justinjohnson at fastmail.fm> writes:
> |
> |
> |>No, I meant a Windows installer for the latest Twisted from the new
> |>subversion repository.  :-)
> |>
> |
> |
> | You can build one yourself without using Visual Studio.
> | Take a look at http://sebsauvage.net/python/mingw.html.
> |
> | - Ralf
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAYdvE3A5SrXAiHQcRAvyKAJ9G0nbHSWiz64VUbOvEEI4mF/SX9ACfQAwD
> ox4ODSCCjMUkyk1I6kU0Tec=
> =WFI2
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From corydodt at twistedmatrix.com  Thu Mar 25 11:07:54 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Thu, 25 Mar 2004 10:07:54 -0800
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <1080237260.5222.183323777@webmail.messagingengine.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com> <4061DBC4.3030900@twistedmatrix.com> <1080237260.5222.183323777@webmail.messagingengine.com>
Message-ID: <40631FFA.2060205@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ulp, yes.  The whole world has problems opening cygwin paths.  I suggest:

~   - doing the "BARE MINIMUM" install described, which will get you everything
but icons and doc
or
~   - $ alias aap='python C:/aap/Exec/aap'
or
~   - Put cygwin/bin in your global path and run aap.bat from a win32 cmd.exe
prompt (cygwin stuff makes it easier to install mingw, but you don't have to
stay in the cygwin shell environment).


C

Justin Johnson wrote:

| Okay, so I got everything setup as the readme states, but I had to fiddle
| with my path a bit in cygwin and I'm still having some issues.  The
| native python seems to have problems opening cygwin files.
|
| $ aap -f win32/build.aap
| c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap'
|
| $ aap.py -f win32/build.aap
| c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap.py'
|
| $ echo $PATH
| /usr/local/bin:/usr/ccs/bin:/usr/ccs/lib:/usr/bin:/usr/ucb:/etc:/cygdrive/c/MinG
| W/bin:/cygdrive/c/aap/Exec:/cygdrive/c/usr/local/wbin:/cygdrive/c/Vim/vim62:/cyg
| drive/c/Python23:/cygdrive/c/Python23/scripts:.
|
| $ ls -l /cygdrive/c/aap/Exec/aap.py
| -rwxrwxrwx+   1 Administ ????????      438 Aug  7  2003
| /cygdrive/c/aap/Exec/aap
| .py
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAYx/63A5SrXAiHQcRAtmKAKCarYO4jEpiXp1KsrxuWrywhxxXcQCfZjGa
ZB5Fu0Lnvf8jcVwAdf2bb9c=
=InKG
-----END PGP SIGNATURE-----



From michael.l.schneider at ugsplm.com  Thu Mar 25 13:11:44 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 25 Mar 2004 15:11:44 -0500
Subject: [Twisted-Python] Sample Script to create Windows Service for Twisted App (1/2)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D54C@uscimplm001.net.plm.eds.com>

First,

A big thanks to Cory for writing the tap2ntsvc, and for helping
me understand how it work (as well as proving to me that
it can work.


In exchange for all his help,  I am sending two .bat files
in 2 messages.

Because of mail filtering,  I am going to include the .bat files
at the end of the messages rather then attach them.

Background:
I have a twisted program that leverages WMI, ctypes, and win32
calls. These all need to be included in the exe.

Lessons Learned:
Microsoft uses different type libraries for XP and 2000, the python
wrappers are created in the site-packages\win32com\gen_py\{GUID}1 for 2000,
 and  site-packages\win32com\gen_py{GUID}2 for XP.

You can create different installers for both, or include them all into
the same service (see the comments in fixup.bat in the 2/2 email)



Have fun,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state> 


------------------ gen.bat---------------------------------------------
rem ------------- BAT file to create Service for twisted app that
rem           uses WMI python module

rem  Author: Michael Scheider
rem  Shadow Author (Cory - he helped me get going, 
re                 and proved to me that it could work)
rem                Cory also wrote the tool to package the system

rem in exchange for all his hard work, I am releasing this script
rem under the same license as Twisted (free)



rem Use this file as a roadmap, but you may need other modules, 
rem Note: if you are not using WMI, you can comment out the
rem       %WIN2000_WMI_MODULES% and the %WINXP_WMI_MODULES% from
rem       tap2ntsvc command line



rem  Twisted Functionality/Python Modules used
rem  
rem  WMI- process and disk info
rem  ctypes - memory info
rem  twisted as web server
rem  twisted xml-rpc
rem  cgi - perl and python
rm   rpy files


rem  Special thanks to Cory to get this going

rem  Version Info
rem    python2.3.3
rem    win32all build 163
rem    py2exe version 1.4.2
rem    inno - latest version

rem Lessons Learned
rem
rem  WMI stashes the com wrappers in site-
rem
rem  Windows 2000 wrapper location= site-packages\win32com\gen_py\565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1
rem  Windows XP wrapper location = site-packages\win32com\gen_py\565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2
rem
rem  NOTE: the numbers are the same except for 2000 uses 1 and XP uses 2
rem        if you want your installer to run on both you will need
rem        to copy the directory from the other machine and include 
rem        both directories


rem ------------------- WMI modules ------------------------
rem the directory 

rem set WINXP_WMI_MODULES=win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemServicesEx,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemObjectEx,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.SWbemServicesEx,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.__init__,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x2.ISWbemObjectEx,wmi

set WIN2000_WMI_MODULES=win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemObject,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.ISWbemServices,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemMethod,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemMethodSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemObject,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemObjectPath,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemObjectSet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemProperty,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemPropertySet,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.SWbemServices,win32com.gen_py.565783C6-CB41-11D1-8B02-00600806D9B6x0x1x1.__init__,wmi


python tap2ntsvc --include twisted.web.server,twisted.web.resource,twisted.web.static,twisted.web.script,gridnode.webinfo,gridnode.JobRunner,gridnode.appconfig,gridnode.sendmail,twisted.internet.win32eventreactor,%WIN2000_WMI_MODULES%  -r win32  d:\grid\gridnoded.tap



From michael.l.schneider at ugsplm.com  Thu Mar 25 13:18:31 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 25 Mar 2004 15:18:31 -0500
Subject: [Twisted-Python] Creating Winows Service from Twisted (2/2)
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D54D@uscimplm001.net.plm.eds.com>

This is the 2nd of two mail messages on creating
a Twisted service on Windows.

One important thing to note is that the Windows service
is standalone, and no python install is required for installation.
Thanks Cory,

Mike

How to use-------------
Save this in the moonfallen dir under sandbox along with 
gen.bat from the previous email

1) run gen.bat
2) cd to subdirectory created
3) install service
4) start service
5) if service does not start, you need to add python packages to the 
   include directive.  cd to the subdirectory created in the
   moonfallen directory, edit the include directive in setup.cfg and
   execute  ..\fixup.bat (this bat file)
   repeat until finished
6) edit include portion of gen.bat, adding the python modules that
   you added during the fixup step.
7) the next time you run gen.bat, the windows installer should be
   ready to go (unless you added more python modules in your code since
   the last build).

hope this helps,
Thanks again Cory,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


--------------------- fixup.bat --------------------
rem   python twisted service fixup
rem   drop this file (fixup.bat) into sandbox/moonfallen
rem
rem
rem  Have Fun!!!!!!!  
rem  Michael Schneider
rem
rem

rem  step to bring up  a service

rem 1) run tap2ntsvc  (see gen.bat file)
rem 2) install service
rem 3) If service doesn't start, or part of the application 
rem    fails with can't find module ...
rem     3a) edit setup.cvf to add the missing python module in the
rem         include section
rem     3b) run this script
rem     3c) repeat
rem 4) update gen.bat with any python modules you added in step 3
rem
rem
rem If you are bringing in com code, It is important to realize that
rem Microsoft uses different type libs for XP and 2000
rem 
rem You have 2 choices at this point:
rem     - use two installers (1 for each platform)
rem     - create 1 installer

rem  if you go for 2, just follow the instruction above for each
rem  installer.

rem  If you opt for 1 installer here is your steps
rem  1) select a "master" platform to create the OS
rem  2) run you test cases on this machine against the twisted
rem     application that you wish to create a servcie.
rem     This step is necessary to create the COM wrappers in
rem     wincom32/gen_py/GUI
rem  3) follow the steps above to create a service for one platform
rem     NOTE: to save you time, just go ahead and add the COM wrappers
rem           in site-packages/win32com/gen_py/{GUID}/{all
rem           wrappers}.py
rem   
rem  4) go to your other platform (XP or windows}
rem  5) run test cases on this platforms
rem  6) go to site-packages/win32com
rem  7) Notice that the GUID is the same except for the last digit
rem       {GUID}x1 for windows 2000
rem       {GUID}x2  for XP
rem  8) zip up the {GUID} dir
rem  9) copy this zip to the win32com directory of your "master"
rem     service build machine.
rem  10) unzip, creating to {GUID} dirs, with the only differces being
rem      the ending digit (x1,  or x2)
rem  11) Add these to the gen.bat (note: if 2000 is your master
rem      machine, you may not have sufficient environment variable
rem      space to pass in all includes, if this is the case
rem           11a) rebuild service for master only
rem           11b) edit setup.cfg to add com wrappers from other
rem                system
rem           11c) run this script to create a service that contains
rem                the com wrappers for both platforms
rem
rem YOU ARE DONE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!




rem  cd to service directory under moonfallen dir in sandbox
python setup.py py2exe
python do_inno_script.py
python do_inno.py



From wilk-ml at flibuste.net  Fri Mar 26 02:56:19 2004
From: wilk-ml at flibuste.net (William Dode)
Date: Fri, 26 Mar 2004 10:56:19 +0100
Subject: [Twisted-Python] versioning system [was r10392 - Start http rewrite, don't look
 yet.]
In-Reply-To: <40631CE8.1040307@twistedmatrix.com> (Cory Dodt's message of
 "Thu, 25 Mar 2004 09:54:48 -0800")
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>
	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com>
Message-ID: <871xnglynw.fsf_-_@blakie.riol>

Thanks for all theses arguments.
I read one things, (but maybe i'm wrong ?) that subversion need
apache2. When arch can be used with any http server, and so
twistedmatrix for example :-)
I would like to replace apache by twisted for everythings, so this
question is important for me.

-- 
William Dodé - http://flibuste.net



From justinjohnson at fastmail.fm  Fri Mar 26 08:12:53 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Fri, 26 Mar 2004 09:12:53 -0600
Subject: [Twisted-Python] Windows IOCP reactor
In-Reply-To: <40631FFA.2060205@twistedmatrix.com>
References: <20040323213025.24c0e35b.pp64@cornell.edu>	<1080136086.19681.183237231@webmail.messagingengine.com>	<4061A7E7.8070809@twistedmatrix.com>	<1080153544.23236.183256997@webmail.messagingengine.com> <86fzbykrtm.fsf@stronzo.brainbot.com> <4061DBC4.3030900@twistedmatrix.com> <1080237260.5222.183323777@webmail.messagingengine.com> <40631FFA.2060205@twistedmatrix.com>
Message-ID: <1080313973.4904.183378602@webmail.messagingengine.com>

The bare minimum method is working for me.  Thanks for the help.

-Justin

On Thu, 25 Mar 2004 10:07:54 -0800, "Cory Dodt"
<corydodt at twistedmatrix.com> said:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Ulp, yes.  The whole world has problems opening cygwin paths.  I suggest:
> 
> ~   - doing the "BARE MINIMUM" install described, which will get you
> everything
> but icons and doc
> or
> ~   - $ alias aap='python C:/aap/Exec/aap'
> or
> ~   - Put cygwin/bin in your global path and run aap.bat from a win32
> cmd.exe
> prompt (cygwin stuff makes it easier to install mingw, but you don't have
> to
> stay in the cygwin shell environment).
> 
> 
> C
> 
> Justin Johnson wrote:
> 
> | Okay, so I got everything setup as the readme states, but I had to
> fiddle
> | with my path a bit in cygwin and I'm still having some issues.  The
> | native python seems to have problems opening cygwin files.
> |
> | $ aap -f win32/build.aap
> | c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap'
> |
> | $ aap.py -f win32/build.aap
> | c:\Python23\python.exe: can't open file '/cygdrive/c/aap/Exec/aap.py'
> |
> | $ echo $PATH
> |
> /usr/local/bin:/usr/ccs/bin:/usr/ccs/lib:/usr/bin:/usr/ucb:/etc:/cygdrive/c/MinG
> |
> W/bin:/cygdrive/c/aap/Exec:/cygdrive/c/usr/local/wbin:/cygdrive/c/Vim/vim62:/cyg
> | drive/c/Python23:/cygdrive/c/Python23/scripts:.
> |
> | $ ls -l /cygdrive/c/aap/Exec/aap.py
> | -rwxrwxrwx+   1 Administ ????????      438 Aug  7  2003
> | /cygdrive/c/aap/Exec/aap
> | .py
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAYx/63A5SrXAiHQcRAtmKAKCarYO4jEpiXp1KsrxuWrywhxxXcQCfZjGa
> ZB5Fu0Lnvf8jcVwAdf2bb9c=
> =InKG
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From justinjohnson at fastmail.fm  Fri Mar 26 08:20:45 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Fri, 26 Mar 2004 09:20:45 -0600
Subject: [Twisted-Python] SFTP Server and Cred Example?
Message-ID: <1080314445.7128.183378640@webmail.messagingengine.com>

Does anyone have an example of how to use
twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
cred?



From z3p at twistedmatrix.com  Fri Mar 26 08:33:10 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Fri, 26 Mar 2004 10:33:10 -0500
Subject: [Twisted-Python] SFTP Server and Cred Example?
In-Reply-To: <1080314445.7128.183378640@webmail.messagingengine.com>
References: <1080314445.7128.183378640@webmail.messagingengine.com>
Message-ID: <1080315164.1458.3.camel@petra>

On Fri, 2004-03-26 at 10:20, Justin Johnson wrote:
> Does anyone have an example of how to use
> twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
> cred?

t.c.s.ft.SFTPServerForUnixConchUser is an example adapter from
UnixConchUser (which implements IConchUser (what cred gives for a
logged-in Conch user) to ISFTPServer.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040326/e5413583/attachment.sig>

From andy at thecablelounge.com  Fri Mar 26 19:40:16 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 27 Mar 2004 12:40:16 +1000
Subject: [Twisted-Python] SFTP Server and Cred Example?
In-Reply-To: <1080315164.1458.3.camel@petra>
References: <1080314445.7128.183378640@webmail.messagingengine.com> <1080315164.1458.3.camel@petra>
Message-ID: <4064E990.8050003@thecablelounge.com>

Paul Swartz wrote:

> On Fri, 2004-03-26 at 10:20, Justin Johnson wrote:
> 
>>Does anyone have an example of how to use
>>twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
>>cred?
> 
> t.c.s.ft.SFTPServerForUnixConchUser is an example adapter from
> UnixConchUser (which implements IConchUser (what cred gives for a
> logged-in Conch user) to ISFTPServer.

Justin out of interest did you have an example of what you'd like to do?

Andy.




From andy at thecablelounge.com  Fri Mar 26 19:46:54 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Sat, 27 Mar 2004 12:46:54 +1000
Subject: [Twisted-Python] Multiple Cred Checkers and Avatar Types
Message-ID: <4064EB1E.9060302@thecablelounge.com>

Hey all,

Is it possible to tie the type of avatar a realm returns to the cred 
checker which successfully authenticated the user?  For example, if the 
user requesting a IConchUser interface authenticates against the unix 
password file the realm would know to return a UnixConchUser - if the 
authenticated against a smbpasswordish like file they realm would return 
a SmbishConchUser.

Is this not the right way to be thinking of cred?

Any advice is greatly appreciated,
Andy.



From radix at twistedmatrix.com  Sat Mar 27 16:45:09 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 27 Mar 2004 18:45:09 -0500
Subject: [Twisted-Python] versioning system [was r10392 - Start http rewrite,
 don't look yet.]
In-Reply-To: <871xnglynw.fsf_-_@blakie.riol>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com> <871xnglynw.fsf_-_@blakie.riol>
Message-ID: <40661205.2070506@twistedmatrix.com>

William Dode wrote:
> Thanks for all theses arguments.
> I read one things, (but maybe i'm wrong ?) that subversion need
> apache2. When arch can be used with any http server, and so
> twistedmatrix for example :-)
> I would like to replace apache by twisted for everythings, so this
> question is important for me.

Nope. We use inetd (for anon-readonly) and ssh (for auth-write) for svn 
on twistedmatrix.com (and divmod does it that way, too).

Apache2 offers sub-repository granularity on permissions, but then, so 
do repository hooks that come with subversion.

Speaking of hooks, I wonder if it's possible to have one that prevents 
people from making mistakes like checking out /, /branches, and /tags. 
Does that sound like a good idea? It does to me.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040327/3f59ce2e/attachment.sig>

From justinjohnson at fastmail.fm  Sat Mar 27 19:07:40 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Sat, 27 Mar 2004 20:07:40 -0600
Subject: [Twisted-Python] SFTP Server and Cred Example?
In-Reply-To: <4064E990.8050003@thecablelounge.com>
References: <1080314445.7128.183378640@webmail.messagingengine.com> <1080315164.1458.3.camel@petra> <4064E990.8050003@thecablelounge.com>
Message-ID: <1080439660.26618.183438863@webmail.messagingengine.com>

Yeah, I have an admin tool for Rational ClearCase written using Twisted. 
For ClearCase MultiSite, a repository can be replicated to a different
server and kept up-to-date by sending packets to the server at regular
intervals.  The method ClearCase uses for shipping requires like 60,000
ports to be open which is pretty messed up.  I wanted to have a solution
with an SFTP server and client both implemented in twisted as an
alternative shipping method.  I wanted it implemented in twisted just
because that's what everything else is implemented in and it'd be cool to
not rely on any other software.

So I'd just run a command that creates a packet, and then send it over
via SFTP.  And ideally it'd be hooked up to cred so I can use the same
user db I use for the rest of the application.

Does that answer your question?

-Justin


On Sat, 27 Mar 2004 12:40:16 +1000, "Andy Gayton"
<andy at thecablelounge.com> said:
> Paul Swartz wrote:
> 
> > On Fri, 2004-03-26 at 10:20, Justin Johnson wrote:
> > 
> >>Does anyone have an example of how to use
> >>twisted.conch.ssh.filetransfer.FileTransferServer in conjunction with
> >>cred?
> > 
> > t.c.s.ft.SFTPServerForUnixConchUser is an example adapter from
> > UnixConchUser (which implements IConchUser (what cred gives for a
> > logged-in Conch user) to ISFTPServer.
> 
> Justin out of interest did you have an example of what you'd like to do?
> 
> Andy.
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From paul at soniq.net  Sun Mar 28 02:27:37 2004
From: paul at soniq.net (Paul Boehm)
Date: Sun, 28 Mar 2004 11:27:37 +0200
Subject: [Twisted-Python] Two Suggestions and one Question
Message-ID: <20040328092737.GB1456@xenian.net>

1) Interface Based Service Discovery
"hey, is there a Service running that provides IStatistics, or can you
start one. If so, give me a reference"

2) Move deprecated interfaces into seperate files (makes both reading
the source, and the generated documentation more pleasurable), that are
(possibly conditionally) imported via from *. 

3) How's the status on pyprotocols and logging module integration?

regards,
  paul



From wilk-ml at flibuste.net  Sun Mar 28 05:27:26 2004
From: wilk-ml at flibuste.net (William Dode)
Date: Sun, 28 Mar 2004 14:27:26 +0200
Subject: [Twisted-Python] versioning system [was r10392 - Start http
 rewrite, don't look yet.]
In-Reply-To: <40661205.2070506@twistedmatrix.com> (Christopher Armstrong's
 message of "Sat, 27 Mar 2004 18:45:09 -0500")
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>
	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com>
	<871xnglynw.fsf_-_@blakie.riol> <40661205.2070506@twistedmatrix.com>
Message-ID: <87u109ma1d.fsf@blakie.riol>

Christopher Armstrong <radix at twistedmatrix.com> writes:

> William Dode wrote:
>> Thanks for all theses arguments.
>> I read one things, (but maybe i'm wrong ?) that subversion need
>> apache2. When arch can be used with any http server, and so
>> twistedmatrix for example :-)
>> I would like to replace apache by twisted for everythings, so this
>> question is important for me.
>
> Nope. We use inetd (for anon-readonly) and ssh (for auth-write) for
> svn on twistedmatrix.com (and divmod does it that way, too).

ok i see

>
> Apache2 offers sub-repository granularity on permissions, but then, so
> do repository hooks that come with subversion.
>
> Speaking of hooks, I wonder if it's possible to have one that prevents
> people from making mistakes like checking out /, /branches, and
> /tags. Does that sound like a good idea? It does to me.

I don't understand what you mean...

-- 
William Dodé - http://flibuste.net



From michael.l.schneider at ugsplm.com  Sun Mar 28 08:26:16 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Sun, 28 Mar 2004 10:26:16 -0500
Subject: [Twisted-Python] Windows IOCP reactor Question
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D54E@uscimplm001.net.plm.eds.com>

Thanks for the work on IOCP,

I really appriecaite the efforts and will make use of
it.


I am an old UNIX hacker, and I am delivering a Windows
project with twisted.

I am about as far away from a windows programmer that you
can get.

I did have to get memory info from the Widows OS.

I was going to use C, but then I found ctypes and the
struct python C struct wrapper.

It was nice to have a python only solution.  

As I was looking through the code in iocpcoreobject.c.
I noticed that most (maybe all) of the functionality could
be accessed by the ctypes module and the Struct package.

Being a newbie to windows programming, I am not comfortable 
making the definitive statement that it should use this, and
elimintate the C code.  

Instead I would like to ask the question.  Does anyone see
a problem replacing the  C code in iocpcoreobject.c with
a python module that leverages ctype.

I attached a simple python script that gets the memory from
a windows box using ctypes.

It would be very nice if no c compiler would be required to 
install twisted IOCP reactor from CVS.

Thanks,
Mike

-------------------------------------------------------

#!/usr/bin/env python

# Simple WMI and ctypes example
# Michael Schnedier

import os
import time

import wmi
from ctypes import *
from ctypes.wintypes import *
import win32api

class MEMORYSTATUS(Structure):
    _fields_ = [
        ('dwLength', DWORD),
        ('dwMemoryLoad', DWORD),
        ('dwTotalPhys', DWORD),
        ('dwAvailPhys', DWORD),
        ('dwTotalPageFile', DWORD),
        ('dwAvailPageFile', DWORD),
        ('dwTotalVirtual', DWORD),
        ('dwAvailVirtual', DWORD),
    ]


class ComputeNode:
    def __init__(self):      
        self.memInfo = None
        self.lastUpdate = time.time()
        self.update()
   

    def genMemoryXmlStringRep(self):
        self.validate()

        xmlString = \
"""<?xml version="1.0"?>
<MemoryInfo platform="windows"     
TotalPhysicalMemory="%d" 
AvailablePhysicalMemory="%d" 
TotalPageFileSize="%d" 
AvailPageFileSize="%d" 
GetTotalVirtualMemory="%d" 
GetAvailableVirtualMemory="%d" 
/>
"""%( self.getTotalPhysicalMemory(),
       self.getAvailPhysicalMemory(),
       self.getTotalPageFileSize(),
       self.getAvailPageFile(),
       self.getTotalVirtualMemory(),
       self.getAvailVirtualMemory())

        return xmlString

   

    def getTotalPhysicalMemory(self):
        self.validate()
        return self.memInfo.dwTotalPhys/1024/1024

    def getAvailPhysicalMemory(self):
        self.validate()
        return self.memInfo.dwAvailPhys/1024/1024

    def getTotalPageFileSize(self):
        self.validate()
        return self.memInfo.dwTotalPageFile/1024/1024

    def getAvailPageFile(self):
        self.validate()
        return self.memInfo.dwAvailPageFile/1024/1024

    def getTotalVirtualMemory(self):
        self.validate()
        return self.memInfo.dwTotalVirtual/1024/1024

    def getAvailVirtualMemory(self):
        self.validate()
        return self.memInfo.dwAvailVirtual/1024/1024

    def validate(self, deltaTrigger=60 ):
        deltaTime = time.time() - self.lastUpdate
        
        if (self.lastUpdate < 0) or (deltaTime > deltaTrigger):      
            self.update()

      
    def update(self):
        self.lastUpdate = time.time()

        newStatus = MEMORYSTATUS()
        windll.kernel32.GlobalMemoryStatus(byref(newStatus))
        self.memInfo =  newStatus
         


machineInfo = ComputeNode()

print machineInfo.genMemoryXmlStringRep()





Since
the C code seems to be a wrapper to COM services, and
registration of COM service I am curious

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"
> 



From glyph at divmod.com  Sun Mar 28 13:59:25 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Sun, 28 Mar 2004 15:59:25 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <40629CB8.8000800@tv.debian.net>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net>
Message-ID: <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>


On Mar 25, 2004, at 3:47 AM, Tommi Virtanen wrote:

> Glyph Lefkowitz wrote:
>>     from twisted_web import Resource
>
> So, now we have twisted.web, twisted_web and twisted-web.deb, also 
> known
> as TwistedWebDeb?

twisted.web == twisted_web

We really need to get TwistedWebDeb distributed along with the 
codebase, so that we can have similar running mechanisms for UNIXes 
(and an obvious empty spot where a win32 mechanism would go).

A number of people at PyCon pointed me at pkgutil, which may eliminate 
the need for the underscore in the package name.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040328/2c1d54b6/attachment.sig>

From sflist at ihonk.com  Sun Mar 28 21:20:17 2004
From: sflist at ihonk.com (Steve Freitas)
Date: Sun, 28 Mar 2004 20:20:17 -0800
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
In-Reply-To: <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net> <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>
Message-ID: <200403282019.01193.sflist@ihonk.com>

Hi all,

I'm working on a chat server-ish kinda thang, and although the learning curve 
of twisted was a bit much for my last project, I'm back again for more 
punishment. In this case, I'm looking to broadcast a message from one client 
to other connected clients. I came up with a solution, but I wanted to run it 
by you guys to see whether what I'm doing is The Right Way To Do Things.

Here's what I did for my simple prototype that takes any message received from 
a client and sends it to all clients (including the sender):

-----------

factory = Factory()
factory.transports = []

class Chatterbox(Protocol):

    def connectionMade(self):
	# Make a copy of the new connection's transport and
	# stick it somewhere all the Chatterbox instances can
	# get to it.
        self.factory.transports.append(self.transport)

    def dataReceived(self, data):
	# Every time a piece of data comes in, just write it back
	# out to all the transports, ergo, clients.
        for transport in self.factory.transports:
             transport.write(data)

    def connectionLost(self, reason):
	# When a client disconnects, delete the copy of their
	# transport. Bet this'll be slow w/ lotso clients.
        self.factory.transports.remove(self.transport)

factory.protocol = Chatterbox
reactor.listenTCP(8008, factory)
reactor.run()

-----------

What do you think? Is this a properly twisted way to do things? Strike anyone 
as needlessly inefficient? I'm motivated to make it as fast as possible, so 
despite what Knuth said, any proferred optimizations would be great to hear. 
(On a related note, I intend to put the for loop into a map, but I haven't 
yet embarked on language optimizations, and this question's more about 
Twisted.)

Also, I'm obviously, and perhaps incorrectly, assuming that once a transport 
object is created, it never gets changed. If it does, the copy I made won't 
be updated -- is this a problem?

A definite problem with this method is that it sends the data right back to 
the sender, which actually isn't desirable for my application. Trouble is, to 
avoid it I think I'd have to do this...

    def dataReceived(self, data):
        for transport in self.factory.transports:
		if transport != self.transport:
	             transport.write(data)

Seems an inefficient way to do things, as I'd like this server to handle 
thousands of clients.

Anyway, any help would be appreciated. :-)

Thanks,

Steve



From tim.stebbing at nunatak.com.au  Sun Mar 28 22:04:41 2004
From: tim.stebbing at nunatak.com.au (Tim Stebbing)
Date: Mon, 29 Mar 2004 15:04:41 +1000
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
In-Reply-To: <200403282019.01193.sflist@ihonk.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net> <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com> <200403282019.01193.sflist@ihonk.com>
Message-ID: <4067AE69.7040005@nunatak.com.au>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


| Here's what I did for my simple prototype that takes any message
| received from a client and sends it to all clients (including the
| sender):

alternativly, you could use PB and share some sort of 'talker' object
between all connections. this would allow a client to simply do:

talker.callRemote("write", "hello world")

and have everyone else recieve it. I get the feeling the pb/cred combo
would be ideal for what your trying to do. Check it out:
http://www.twistedmatrix.com/documents/current/howto/pb-intro
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAZ65oQAUUJNWKvroRAgiCAKCFBpqPOaMVROPos2a6+kGP8Kf+EwCeNyTA
s3O/hBbtmSdJtONrM3c88eQ=
=BXEp
-----END PGP SIGNATURE-----




From z3p at twistedmatrix.com  Sun Mar 28 23:27:42 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Mon, 29 Mar 2004 01:27:42 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph
	Lefkowitz)
In-Reply-To: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com>
Message-ID: <1080541662.1518.13.camel@petra>

On Tue, 2004-03-23 at 14:00, Glyph Lefkowitz wrote:
> As far as our development process, we will be keeping all the code in 
> one subversion repository and still running BuildBot over the entire 

What does this mean for the licensing of the packages?  Will new
versions of split-out packages still be copyright to Glyph, or will they
move to a developer for that package?

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040329/90f6f0b5/attachment.sig>

From sflist at ihonk.com  Mon Mar 29 00:06:12 2004
From: sflist at ihonk.com (Steve Freitas)
Date: Sun, 28 Mar 2004 23:06:12 -0800
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
In-Reply-To: <4067AE69.7040005@nunatak.com.au>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <200403282019.01193.sflist@ihonk.com> <4067AE69.7040005@nunatak.com.au>
Message-ID: <200403282306.12474.sflist@ihonk.com>

On Sunday 28 March 2004 9:04 pm, Tim Stebbing wrote:

> alternativly, you could use PB and share some sort of 'talker' object
> between all connections. this would allow a client to simply do:
>
> talker.callRemote("write", "hello world")
>
> and have everyone else recieve it. I get the feeling the pb/cred combo
> would be ideal for what your trying to do. Check it out:
> http://www.twistedmatrix.com/documents/current/howto/pb-intro

Unfortunately, I haven't got Python on both ends of the wire here. I've got 
Twisted/Python on one side, and C++ or similar on the other end. So unless 
I'm wrong about PB, I don't think it'll apply here. Cred looks useful, 
though. Thanks!

Steve



From michael.l.schneider at ugsplm.com  Mon Mar 29 05:43:11 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 29 Mar 2004 07:43:11 -0500
Subject: [Twisted-Python] The right way to broadcast to your TCP/IP clients?
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A21740@uscimplm001.net.plm.eds.com>

I am in a similar situation.  I am use twisted a grid
server for each node on the computer.

I need to send info like "

- I am online
- Job started
- Job completed
- Ready for job

I am getting ready to prototype with jabber.  Any other thought?

Thanks
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Steve
> Freitas
> Sent: Sunday, March 28, 2004 11:20 PM
> To: twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] The right way to broadcast to your TCP/IP
> clients?
> 
> 
> Hi all,
> 
> I'm working on a chat server-ish kinda thang, and although 
> the learning curve 
> of twisted was a bit much for my last project, I'm back again 
> for more 
> punishment. In this case, I'm looking to broadcast a message 
> from one client 
> to other connected clients. I came up with a solution, but I 
> wanted to run it 
> by you guys to see whether what I'm doing is The Right Way To 
> Do Things.
> 
> Here's what I did for my simple prototype that takes any 
> message received from 
> a client and sends it to all clients (including the sender):
> 
> -----------
> 
> factory = Factory()
> factory.transports = []
> 
> class Chatterbox(Protocol):
> 
>     def connectionMade(self):
> 	# Make a copy of the new connection's transport and
> 	# stick it somewhere all the Chatterbox instances can
> 	# get to it.
>         self.factory.transports.append(self.transport)
> 
>     def dataReceived(self, data):
> 	# Every time a piece of data comes in, just write it back
> 	# out to all the transports, ergo, clients.
>         for transport in self.factory.transports:
>              transport.write(data)
> 
>     def connectionLost(self, reason):
> 	# When a client disconnects, delete the copy of their
> 	# transport. Bet this'll be slow w/ lotso clients.
>         self.factory.transports.remove(self.transport)
> 
> factory.protocol = Chatterbox
> reactor.listenTCP(8008, factory)
> reactor.run()
> 
> -----------
> 
> What do you think? Is this a properly twisted way to do 
> things? Strike anyone 
> as needlessly inefficient? I'm motivated to make it as fast 
> as possible, so 
> despite what Knuth said, any proferred optimizations would be 
> great to hear. 
> (On a related note, I intend to put the for loop into a map, 
> but I haven't 
> yet embarked on language optimizations, and this question's 
> more about 
> Twisted.)
> 
> Also, I'm obviously, and perhaps incorrectly, assuming that 
> once a transport 
> object is created, it never gets changed. If it does, the 
> copy I made won't 
> be updated -- is this a problem?
> 
> A definite problem with this method is that it sends the data 
> right back to 
> the sender, which actually isn't desirable for my 
> application. Trouble is, to 
> avoid it I think I'd have to do this...
> 
>     def dataReceived(self, data):
>         for transport in self.factory.transports:
> 		if transport != self.transport:
> 	             transport.write(data)
> 
> Seems an inefficient way to do things, as I'd like this 
> server to handle 
> thousands of clients.
> 
> Anyway, any help would be appreciated. :-)
> 
> Thanks,
> 
> Steve
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From corydodt at twistedmatrix.com  Mon Mar 29 09:23:15 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Mon, 29 Mar 2004 08:23:15 -0800
Subject: [Twisted-Python] versioning system [was r10392 - Start http rewrite,
 don't look yet.]
In-Reply-To: <40661205.2070506@twistedmatrix.com>
References: <E1B6HEA-0002cd-00@wolfwood> <20040325000223.GA17117@frobozz>	<87hdwdey4o.fsf@blakie.riol> <40631CE8.1040307@twistedmatrix.com> <871xnglynw.fsf_-_@blakie.riol> <40661205.2070506@twistedmatrix.com>
Message-ID: <40684D73.3010005@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Not possible with hooks.  Hooks only fire during the commit process.  I can't
think of any way to do that, in fact, off the top of my head.

C

Christopher Armstrong wrote:
| William Dode wrote:
|
| Speaking of hooks, I wonder if it's possible to have one that prevents
| people from making mistakes like checking out /, /branches, and /tags.
| Does that sound like a good idea? It does to me.
|
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAaE1z3A5SrXAiHQcRAsXLAJ4kQ8C3cdpp26ffZ1vwmtp4lgXjUwCgjz6o
c4ae5s90jS0eiTvyZXIrxWI=
=GKC3
-----END PGP SIGNATURE-----



From corydodt at twistedmatrix.com  Mon Mar 29 09:26:03 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Mon, 29 Mar 2004 08:26:03 -0800
Subject: [Twisted-Python] Windows IOCP reactor Question
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB538D54E@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB538D54E@uscimplm001.net.plm.eds.com>
Message-ID: <40684E1B.3070208@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


| It would be very nice if no c compiler would be required to
| install twisted IOCP reactor from CVS.
|

Maybe it's time to have win32 buildbot start publishing win32 builds somewhere
so people on Windows can download nightlies.

C

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAaE4b3A5SrXAiHQcRAoaRAJ44QyCeJsN6H4wKUWN2JFg2jtKBvQCfVpMe
nWqo+4V78VMn9Nw+YzebnrE=
=Rwjb
-----END PGP SIGNATURE-----



From pf_moore at yahoo.co.uk  Mon Mar 29 11:44:04 2004
From: pf_moore at yahoo.co.uk (Paul Moore)
Date: Mon, 29 Mar 2004 19:44:04 +0100
Subject: [Twisted-Python] Re: Twisted Euphrates (Modified by Glyph Lefkowitz)
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net>
 <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com>
Message-ID: <1xnbtrwr.fsf@yahoo.co.uk>

Glyph Lefkowitz <glyph at divmod.com> writes:

> A number of people at PyCon pointed me at pkgutil, which may eliminate
> the need for the underscore in the package name.

That would be good, as I hate the underscore in the name :-) Why can't
the package still be called twisted.web, but be distributed
separately (if that's the issue here)?

Paul.
-- 
This signature intentionally left blank




From michael.l.schneider at ugsplm.com  Mon Mar 29 11:45:38 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Mon, 29 Mar 2004 13:45:38 -0500
Subject: [Twisted-Python] Windows IOCP reactor Question
Message-ID: <49199579A2BB32438A7572AF3DBB2FB505A21742@uscimplm001.net.plm.eds.com>

If it is possible,  that would be great!!!!

Thanks
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Cory Dodt
> Sent: Monday, March 29, 2004 11:26 AM
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] Windows IOCP reactor Question
> 
> 
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> 
> | It would be very nice if no c compiler would be required to
> | install twisted IOCP reactor from CVS.
> |
> 
> Maybe it's time to have win32 buildbot start publishing win32 
> builds somewhere
> so people on Windows can download nightlies.
> 
> C
> 
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.3-nr1 (Windows 2000)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFAaE4b3A5SrXAiHQcRAoaRAJ44QyCeJsN6H4wKUWN2JFg2jtKBvQCfVpMe
> nWqo+4V78VMn9Nw+YzebnrE=
> =Rwjb
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From glyph at divmod.com  Mon Mar 29 12:34:21 2004
From: glyph at divmod.com (Glyph Lefkowitz)
Date: Mon, 29 Mar 2004 14:34:21 -0500
Subject: [Twisted-Python] Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <1080541662.1518.13.camel@petra>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <1080541662.1518.13.camel@petra>
Message-ID: <141166A2-81B8-11D8-9177-000393C9700E@divmod.com>


On Mar 29, 2004, at 1:27 AM, Paul Swartz wrote:

> What does this mean for the licensing of the packages?  Will new
> versions of split-out packages still be copyright to Glyph, or will 
> they
> move to a developer for that package?

I don't know.  I'd like to have a centralized copyright structure so 
that we can move it to a foundation (in the ever-nearer future) but 
that still involves inconvenient paperwork.  Not to mention the fact 
that copyright is the only enforceable form of attribution, and I think 
it's unfair that so many major contributors don't really have a 
signature on Twisted in any significant way.  With BSD-licensed 
software, the possible problems with the license are so small that it 
seems unlikely that disparate copyrights would cause a problem...

I should really talk to a lawyer about this, and to a few key 
contributors.  I have a feeling I already know what some of them are 
going to say ;).  The lawyer I discussed this with last time has moved 
on, and the other intelprop lawyers I know aren't really in this space 
- does anyone know a good (cheap ^_^) lawyer with F/OSS experience who 
has the time to help?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040329/e8b85f7e/attachment.sig>

From justinjohnson at fastmail.fm  Mon Mar 29 14:51:54 2004
From: justinjohnson at fastmail.fm (Justin Johnson)
Date: Mon, 29 Mar 2004 15:51:54 -0600
Subject: [Twisted-Python] IOCP Reactor Problem
Message-ID: <1080597114.15499.183530866@webmail.messagingengine.com>

When I try to use the new IOCP reactor (latest from svn) I get the
following errors.  The only thing being started up is a nevow web site. 
This worked when using win32reactor.

Anyone have any ideas?  Let me know if more info is needed.

Thanks.
-Justin


2004/03/29 15:44 Central Standard Time [-] Traceback (most recent call
last):
          File "C:\Python23\Lib\site-packages\twisted\protocols\http.py",
          line 554, in requestReceived
            self.process()
          File "C:\svn\RatControl\nevow\appserver.py", line 130, in
          process
            return self.site.getResourceFor(
          File "C:\svn\RatControl\nevow\appserver.py", line 277, in
          getResourceFor
            return self.resourceAtPathOfRequest(request)
          File "C:\svn\RatControl\nevow\appserver.py", line 290, in
          resourceAtPathOfRequest
            return defer.maybeDeferred(res.locateChild, request,
            path).addCallback(
        --- <exception caught here> ---
          File "C:\Python23\Lib\site-packages\twisted\internet\defer.py",
          line 129, in maybeDeferred
            result = f(*args, **kw)
          File "C:\svn\RatControl\nevow\guard.py", line 188, in
          locateChild
            prepath = request.prePathURL()
          File "C:\Python23\Lib\site-packages\twisted\web\server.py",
          line 345, in prePathURL
            inet, addr, port = self.getHost()
        exceptions.TypeError: unpack non-sequence

2004/03/29 15:44 Central Standard Time [-] html is not a string:  None
2004/03/29 15:44 Central Standard Time [-] None - - [29/Mar/2004:21:44:54
+0000]
 "GET /results HTTP/1.1" 500 5773 "http://localhost:8888/rmvob"
 "Mozilla/5.0 (Wi
ndows; U; Windows NT 5.0; en-US; rv:1.6) Gecko/20040206 Firefox/0.8"



From bob at redivi.com  Mon Mar 29 17:49:23 2004
From: bob at redivi.com (Bob Ippolito)
Date: Mon, 29 Mar 2004 19:49:23 -0500
Subject: [Twisted-Python] Re: Twisted Euphrates (Modified by Glyph Lefkowitz)
In-Reply-To: <1xnbtrwr.fsf@yahoo.co.uk>
References: <DC445CA4-7D21-11D8-A2FF-000393C9700E@divmod.com> <40629CB8.8000800@tv.debian.net> <CBB4A3A6-80FA-11D8-9177-000393C9700E@divmod.com> <1xnbtrwr.fsf@yahoo.co.uk>
Message-ID: <16C0D6AA-81E4-11D8-93BA-000A95686CD8@redivi.com>


On Mar 29, 2004, at 1:44 PM, Paul Moore wrote:

> Glyph Lefkowitz <glyph at divmod.com> writes:
>
>> A number of people at PyCon pointed me at pkgutil, which may eliminate
>> the need for the underscore in the package name.
>
> That would be good, as I hate the underscore in the name :-) Why can't
> the package still be called twisted.web, but be distributed
> separately (if that's the issue here)?

That is precisely what pkgutil allows, if I remember correctly.

-bob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2357 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040329/f1e29bb7/attachment-0002.bin>

From dialtone at aruba.it  Wed Mar 31 00:33:58 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 09:33:58 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
Message-ID: <406A7466.3090800@aruba.it>

Hi all,
attached you will find my rss-aggregator made with twisted.

It's really fast although when I tried with 745 feeds I got some problems.
When the download reached 300 parsed feeds (more or less) it locked till 
I pressed Ctrl+C and then it
processed the remaining 340 feeds in less than 30 seconds... I think 
that my design has at least an issue
but  I cannot find it so easily and I hope someone on this list can help 
me to improve it.

The "script" is heavily commented.

BTW When it finishes (with all 740 feeds) it reports an awesome 330 
seconds which is an impressive time, less than half a second
for each feed, and It downloads more than 50Mb of feeds from the net 
(with 745 feeds to download).

Thx for your help.

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: twisted-rss.py
URL: </pipermail/twisted-python/attachments/20040331/ef318972/attachment.ksh>

From andrew-twisted at puzzling.org  Wed Mar 31 03:39:27 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 31 Mar 2004 20:39:27 +1000
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <406A7466.3090800@aruba.it>
References: <406A7466.3090800@aruba.it>
Message-ID: <20040331103927.GA8642@frobozz>

On Wed, Mar 31, 2004 at 09:33:58AM +0200, Valentino Volonghi aka Dialtone wrote:
> Hi all,
> attached you will find my rss-aggregator made with twisted.
> 
> It's really fast although when I tried with 745 feeds I got some problems.
> When the download reached 300 parsed feeds (more or less) it locked till 
> I pressed Ctrl+C and then it
> processed the remaining 340 feeds in less than 30 seconds... I think 
> that my design has at least an issue
> but  I cannot find it so easily and I hope someone on this list can help 
> me to improve it.

By default, Twisted uses the platform name resolver, which is blocking.
Perhaps a non-existent domain is causing gethostbyname to block?

You should be able to test this theory by installing Twisted's resolver:

    from twisted.names import client
    reactor.installResolver(client.createResolver())

client.createResolver makes a resonable effort to use your system's DNS
configuration (by looking at /etc/resolve.conf on posix systems, for
example), so it should work without any special arguments.

> The "script" is heavily commented.
> 
> BTW When it finishes (with all 740 feeds) it reports an awesome 330 
> seconds which is an impressive time, less than half a second
> for each feed, and It downloads more than 50Mb of feeds from the net 
> (with 745 feeds to download).

Nice!

> Thx for your help.

Not a problem.  Let us know if it helps.

-Andrew.




From dialtone at aruba.it  Wed Mar 31 04:27:49 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 13:27:49 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <20040331103927.GA8642@frobozz>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz>
Message-ID: <406AAB35.1000208@aruba.it>

Andrew Bennetts wrote:

>On Wed, Mar 31, 2004 at 09:33:58AM +0200, Valentino Volonghi aka Dialtone wrote:
>  
>
>>Hi all,
>>attached you will find my rss-aggregator made with twisted.
>>
>>It's really fast although when I tried with 745 feeds I got some problems.
>>When the download reached 300 parsed feeds (more or less) it locked till 
>>I pressed Ctrl+C and then it
>>processed the remaining 340 feeds in less than 30 seconds... I think 
>>that my design has at least an issue
>>but  I cannot find it so easily and I hope someone on this list can help 
>>me to improve it.
>>    
>>
>
>By default, Twisted uses the platform name resolver, which is blocking.
>Perhaps a non-existent domain is causing gethostbyname to block?
>
>  
>
Uhmm... dunno, but I tried to remove the 'locking' feed-source and it 
didn't change.

>You should be able to test this theory by installing Twisted's resolver:
>
>    from twisted.names import client
>    reactor.installResolver(client.createResolver())
>
>client.createResolver makes a resonable effort to use your system's DNS
>configuration (by looking at /etc/resolve.conf on posix systems, for
>example), so it should work without any special arguments.
>
>  
>
ok, it changes into a totally non-working script :)

I get a lot of these:
[Failure instance: Traceback: exceptions.TypeError, unsubscriptable object
/usr/lib/python2.3/site-packages/twisted/internet/defer.py:313:_runCallbacks
/usr/lib/python2.3/site-packages/twisted/names/resolve.py:44:__call__
/usr/lib/python2.3/site-packages/twisted/names/common.py:36:query
/usr/lib/python2.3/site-packages/twisted/names/common.py:104:lookupAllRecords
/usr/lib/python2.3/site-packages/twisted/names/client.py:266:_lookup
/usr/lib/python2.3/site-packages/twisted/names/client.py:214:queryUDP
]

>>BTW When it finishes (with all 740 feeds) it reports an awesome 330 
>>seconds which is an impressive time, less than half a second
>>for each feed, and It downloads more than 50Mb of feeds from the net 
>>(with 745 feeds to download).
>>    
>>
>
>Nice!
>
>  
>
Yup, was going to ask for my script to be used instead of asyncore to 
Straw developers.
Straw has a lot of problems with 200 feeds ie resets the connection and 
such. This would be an
awesome improvement.

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/




From andrew-twisted at puzzling.org  Wed Mar 31 05:34:06 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 31 Mar 2004 22:34:06 +1000
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <406AAB35.1000208@aruba.it>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz> <406AAB35.1000208@aruba.it>
Message-ID: <20040331123406.GA14465@frobozz>

On Wed, Mar 31, 2004 at 01:27:49PM +0200, Valentino Volonghi aka Dialtone wrote:
> Andrew Bennetts wrote:
> 
> >On Wed, Mar 31, 2004 at 09:33:58AM +0200, Valentino Volonghi aka Dialtone 
> >wrote:
> > 
> >
> >>Hi all,
> >>attached you will find my rss-aggregator made with twisted.
> >>
> >>It's really fast although when I tried with 745 feeds I got some problems.
> >>When the download reached 300 parsed feeds (more or less) it locked till 
> >>I pressed Ctrl+C and then it
> >>processed the remaining 340 feeds in less than 30 seconds... I think 
> >>that my design has at least an issue
> >>but  I cannot find it so easily and I hope someone on this list can help 
> >>me to improve it.
> >
> >By default, Twisted uses the platform name resolver, which is blocking.
> >Perhaps a non-existent domain is causing gethostbyname to block?
> >
> Uhmm... dunno, but I tried to remove the 'locking' feed-source and it 
> didn't change.

Hmm, it's unlikely to be DNS lookups causing it, then.

We need some way to narrow down where it's happening.  There are a few
options I can think of, but they're all a bit heavyweight...

  - Use strace to get some idea what it's doing
  - Use the --spew option of twistd (or manually install the spewer with
    "from twisted.python.util import spewer; sys.settrace(spewer)")
  - Use gdb to attach the process, then and look at the backtrace there.

(You can apparently get the python backtrace in gdb by putting this macro in
your .gdbinit:

define ppystack
    while $pc < Py_Main || $pc > Py_GetArgcArgv
        if $pc > eval_frame && $pc < PyEval_EvalCodeEx
            set $__fn = PyString_AsString(co->co_filename)
            set $__n = PyString_AsString(co->co_name)
            printf "%s (%d): %s\n",  $__fn, f->f_lineno, $__n
        end
        up-silently 1
    end
    select-frame 0
end

But I've never tried this...
)

Is it possible that feedparser is hanging on trying to parse that feed?
Perhaps trying putting print statements before and after the
feedparser.parse call.

> >You should be able to test this theory by installing Twisted's resolver:
> >
> >   from twisted.names import client
> >   reactor.installResolver(client.createResolver())
> >
> >client.createResolver makes a resonable effort to use your system's DNS
> >configuration (by looking at /etc/resolve.conf on posix systems, for
> >example), so it should work without any special arguments.
> >
> ok, it changes into a totally non-working script :)
> 
> I get a lot of these:
> [Failure instance: Traceback: exceptions.TypeError, unsubscriptable object
> /usr/lib/python2.3/site-packages/twisted/internet/defer.py:313:_runCallbacks
> /usr/lib/python2.3/site-packages/twisted/names/resolve.py:44:__call__
> /usr/lib/python2.3/site-packages/twisted/names/common.py:36:query
> /usr/lib/python2.3/site-packages/twisted/names/common.py:104:lookupAllRecords
> /usr/lib/python2.3/site-packages/twisted/names/client.py:266:_lookup
> /usr/lib/python2.3/site-packages/twisted/names/client.py:214:queryUDP
> ]

Ouch.  I wonder how that bug crept in?  The twisted.names code is expecting a
sequence of timeouts (to re-issue the query with, until failing at last), but
twisted.internet is only giving it a single integer.  I've filed a bug
report for this: http://twistedmatrix.com/bugs/issue570, if you care :)

> >>BTW When it finishes (with all 740 feeds) it reports an awesome 330 
> >>seconds which is an impressive time, less than half a second
> >>for each feed, and It downloads more than 50Mb of feeds from the net 
> >>(with 745 feeds to download).
> >>   
> >
> >Nice!
> >
> >
> Yup, was going to ask for my script to be used instead of asyncore to 
> Straw developers.
> Straw has a lot of problems with 200 feeds ie resets the connection and
> such. This would be an awesome improvement.

Absolutely.  I've heard similar complaints about straw, and I've been hoping
some keen person would apply Twisted to fix the problem :)

-Andrew.




From dialtone at aruba.it  Wed Mar 31 06:03:23 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 15:03:23 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <20040331123406.GA14465@frobozz>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz> <406AAB35.1000208@aruba.it> <20040331123406.GA14465@frobozz>
Message-ID: <406AC19B.20207@aruba.it>

Andrew Bennetts wrote:

>Hmm, it's unlikely to be DNS lookups causing it, then.
>
>We need some way to narrow down where it's happening.  There are a few
>options I can think of, but they're all a bit heavyweight...
>
>  - Use strace to get some idea what it's doing
>  - Use the --spew option of twistd (or manually install the spewer with
>    "from twisted.python.util import spewer; sys.settrace(spewer)")
>  - Use gdb to attach the process, then and look at the backtrace there.
>
>(You can apparently get the python backtrace in gdb by putting this macro in
>your .gdbinit:
>
>define ppystack
>    while $pc < Py_Main || $pc > Py_GetArgcArgv
>        if $pc > eval_frame && $pc < PyEval_EvalCodeEx
>            set $__fn = PyString_AsString(co->co_filename)
>            set $__n = PyString_AsString(co->co_name)
>            printf "%s (%d): %s\n",  $__fn, f->f_lineno, $__n
>        end
>        up-silently 1
>    end
>    select-frame 0
>end
>
>But I've never tried this...
>)
>
>Is it possible that feedparser is hanging on trying to parse that feed?
>Perhaps trying putting print statements before and after the
>feedparser.parse call.
>
>  
>
Maybe the problem is there, but then I wouldn't answer the other question:
"Why does it takes at most 30 second to parse all the remaining 350 feeds?"
There is no network activity after the unlocking "Ctrl+C"...
Gotta investigate then.

>>>You should be able to test this theory by installing Twisted's resolver:
>>>
>>>  from twisted.names import client
>>>  reactor.installResolver(client.createResolver())
>>>
>>>client.createResolver makes a resonable effort to use your system's DNS
>>>configuration (by looking at /etc/resolve.conf on posix systems, for
>>>example), so it should work without any special arguments.
>>>
>>>      
>>>
>>ok, it changes into a totally non-working script :)
>>
>>I get a lot of these:
>>[Failure instance: Traceback: exceptions.TypeError, unsubscriptable object
>>/usr/lib/python2.3/site-packages/twisted/internet/defer.py:313:_runCallbacks
>>/usr/lib/python2.3/site-packages/twisted/names/resolve.py:44:__call__
>>/usr/lib/python2.3/site-packages/twisted/names/common.py:36:query
>>/usr/lib/python2.3/site-packages/twisted/names/common.py:104:lookupAllRecords
>>/usr/lib/python2.3/site-packages/twisted/names/client.py:266:_lookup
>>/usr/lib/python2.3/site-packages/twisted/names/client.py:214:queryUDP
>>]
>>    
>>
>
>Ouch.  I wonder how that bug crept in?  The twisted.names code is expecting a
>sequence of timeouts (to re-issue the query with, until failing at last), but
>twisted.internet is only giving it a single integer.  I've filed a bug
>report for this: http://twistedmatrix.com/bugs/issue570, if you care :)
>  
>
Sure :), this is the second bug for me, the first one was a 
documentation bug, the finger tutorial has some errors :).

>Absolutely.  I've heard similar complaints about straw, and I've been hoping
>some keen person would apply Twisted to fix the problem :)
>  
>
That was my hope too, but since a friend of mine asked for an 
rss-aggregator made with twisted... I realized that someone
wants me to be that keen person. Oooohhhh Which thing has the fate 
classified for me? Ooooooohhhhh :P

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/




From dialtone at aruba.it  Wed Mar 31 09:27:30 2004
From: dialtone at aruba.it (Valentino Volonghi aka Dialtone)
Date: Wed, 31 Mar 2004 18:27:30 +0200
Subject: [Twisted-Python] Scalability of an rss-aggregator
In-Reply-To: <406AC19B.20207@aruba.it>
References: <406A7466.3090800@aruba.it> <20040331103927.GA8642@frobozz> <406AAB35.1000208@aruba.it> <20040331123406.GA14465@frobozz> <406AC19B.20207@aruba.it>
Message-ID: <406AF172.2010000@aruba.it>

Valentino Volonghi aka Dialtone wrote:

> Maybe the problem is there, but then I wouldn't answer the other 
> question:
> "Why does it takes at most 30 second to parse all the remaining 350 
> feeds?"
> There is no network activity after the unlocking "Ctrl+C"...
> Gotta investigate then.

Now... The problem is not a parsing problem.
I just made a last test (and am performing another one right now with 
spewer).

The code locked at 404th feed downloaded without anything running (no 
parsing and no memoizing).

No network activity just after the 404th.
Till the 404th it's not very fast, after the lock (and my Ctrl+C) it 
goes at light speed till the 758th feed. (and this can be because of
it's waiting for the feeds to get downloaded, and this happens at about 
the 400th)

Ok, now the "debug" version has just stopped, here is the last output:

function callWithLogger in 
/usr/lib/python2.3/site-packages/twisted/python/log.py, line 54
method logPrefix of twisted.internet.tcp.Client at 1085149132
function callWithContext in 
/usr/lib/python2.3/site-packages/twisted/python/log.py, line 49
method getContext of twisted.python.context.ContextTracker at 1081585292
method callWithContext of twisted.python.context.ContextTracker at 
1081585292
method _doReadOrWrite of twisted.internet.default.SelectReactor at 
1077521228
method doRead of twisted.internet.tcp.Client at 1085149132
method fileno of socket._socketobject at 1085157164
method removeReader of twisted.internet.default.SelectReactor at 1077521228
method removeWriter of twisted.internet.default.SelectReactor at 1077521228
method connectionLost of twisted.internet.tcp.Client at 1085149132
method connectionLost of twisted.internet.tcp.Client at 1085149132
method connectionLost of twisted.internet.tcp.Client at 1085149132
method _closeSocket of twisted.internet.tcp.Client at 1085149132
method shutdown of socket._socketobject at 1085157164
method connectionLost of twisted.web.client.HTTPPageGetter at 1086481388
method connectionLost of twisted.web.client.HTTPPageGetter at 1086481388
method handleResponseEnd of twisted.web.client.HTTPPageGetter at 1086481388
method noPage of twisted.web.client.HTTPClientFactory at 1085148876
method connectionLost of twisted.internet.tcp.Connector at 1085149100
method clientConnectionLost of twisted.web.client.HTTPClientFactory at 
1085148876
method doStop of twisted.web.client.HTTPClientFactory at 1085148876
method __repr__ of twisted.web.client.HTTPClientFactory at 1085148876
method msg of twisted.python.log.LogPublisher at 1081585612
method getContext of twisted.python.context.ContextTracker at 1081585292
method _emit of twisted.python.log.DefaultObserver at 1081585644
method stopFactory of twisted.web.client.HTTPClientFactory at 1085148876
method runUntilCurrent of twisted.internet.default.SelectReactor at 
1077521228
method timeout of twisted.internet.default.SelectReactor at 1077521228
method doSelect of twisted.internet.default.SelectReactor at 1077521228
method fileno of socket._socketobject at 1086221044
method fileno of socket._socketobject at 1086589444
method fileno of socket._socketobject at 1085552996
method fileno of socket._socketobject at 1086453556
[LOTS OF THESE]
method fileno of socket._socketobject at 1086477372
method fileno of socket._socketobject at 1086623612
method fileno of socket._socketobject at 1085203316
method fileno of socket._socketobject at 1085733820

##@#@#@ Ctrl+C

And now it goes on till the end at warp speed.

-- 
Valentino Volonghi aka Dialtone
Linux User #310274, Gentoo Proud User
X Python Newsreader developer
http://sourceforge.net/projects/xpn/




From lists at allotropic.com  Wed Mar 31 14:08:09 2004
From: lists at allotropic.com (Zach Thompson)
Date: Wed, 31 Mar 2004 13:08:09 -0800
Subject: [Twisted-Python] adbapi results through xmlrpc
Message-ID: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>

Hello,

I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
server just needs to run a db query and return the result set to the 
client for display.  Here's part of the server class:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
         return pool.runQuery("select count(*) from asdf")

And part of the client class:

     def OnButton(self, event):
         from twisted.web.xmlrpc import Proxy
         proxy = Proxy("http://localhost:8080")
         proxy.callRemote('get_count').addCallback(self.UpdateCount)

     def UpdateCount(self, count):
         self.label.SetLabel(count)

Here's what the client prints when I press the button:

   Unhandled error in Deferred:
   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">

I can understand that xmlrpc needs to serialize the Deferred object to 
send it through http.  I'm guessing there's a reference to the 
ConnectionPool object contained in the Deferred, and it makes sense 
that you wouldn't be able to serialize something like that.

Any ideas?

BTW, the client is running on a wxreactor, if that matters..

Thanks,
Zach
  




From dave at krondo.com  Wed Mar 31 14:37:22 2004
From: dave at krondo.com (Dave Peticolas)
Date: Wed, 31 Mar 2004 13:37:22 -0800 (PST)
Subject: [Twisted-Python] adbapi results through xmlrpc
Message-ID: <20040331213722.54EECA2666@oneiros.krondo.net>


Returning a deferred from the xmlrpc method will work fine -- twisted
will use the result of the deferred and not the deferred itself
when sending the return xml-rpc value.

The problem is that the result of the query is not serializable,
probably because it contains some pgsql objects somewhere.

Instead of sending the result directly, you'll probably want to
add a callback that picks the count value out of the row and column.
Also, the type of the count may not be a regular integer but some
pgsql-specific type. You'll have to do some debugging to see what's
going on.

Also, you probably don't want to create a connection pool for every
call, but if you do, don't forget to close the pool or you may end up
with lots of open connections.

dave

---- Original Message ----
From:		Zach Thompson
Date:		Wed 3/31/04 13:22
To:		twisted-python at twistedmatrix.com
Subject:	[Twisted-Python] adbapi results through xmlrpc

Hello,

I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
server just needs to run a db query and return the result set to the 
client for display.  Here's part of the server class:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
         return pool.runQuery("select count(*) from asdf")

And part of the client class:

     def OnButton(self, event):
         from twisted.web.xmlrpc import Proxy
         proxy = Proxy("http://localhost:8080")
         proxy.callRemote('get_count').addCallback(self.UpdateCount)

     def UpdateCount(self, count):
         self.label.SetLabel(count)

Here's what the client prints when I press the button:

   Unhandled error in Deferred:
   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">

I can understand that xmlrpc needs to serialize the Deferred object to 
send it through http.  I'm guessing there's a reference to the 
ConnectionPool object contained in the Deferred, and it makes sense 
that you wouldn't be able to serialize something like that.

Any ideas?

BTW, the client is running on a wxreactor, if that matters..

Thanks,
Zach




From itamar at itamarst.org  Wed Mar 31 14:42:16 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 31 Mar 2004 16:42:16 -0500
Subject: [Twisted-Python] adbapi results through xmlrpc
In-Reply-To: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
References: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
Message-ID: <1080769336.13479.52.camel@sheriffpony>

On Wed, 2004-03-31 at 16:08, Zach Thompson wrote:

> I can understand that xmlrpc needs to serialize the Deferred object to 
> send it through http.

Actually, Deferreds are handled transparently. The issue is probably
that your database adapter returns objects xmlrpc can't handle (e.g.
things that look like lists but aren't, etc..) So you want to
addCallback something that converts the objects.

-- 
Itamar Shtull-Trauring    http://itamarst.org





From michal at pasternak.w.lub.pl  Wed Mar 31 14:50:13 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Wed, 31 Mar 2004 23:50:13 +0200
Subject: [Twisted-Python] adbapi results through xmlrpc
In-Reply-To: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
References: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
Message-ID: <20040331215013.GA96349@pasternak.w.lub.pl>

Zach Thompson [Wed, Mar 31, 2004 at 01:08:09PM -0800]:
>     def xmlrpc_get_count(self):
>         from twisted.enterprise import adbapi
>         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
>         return pool.runQuery("select count(*) from asdf")

	return lambda results: int(result[0])

Some DBAPI modules return actually objects of various types sometimes...

>   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">

... which are not serializable.

-- 
Michal Pasternak :: http://pasternak.w.lub.pl :: http://winsrc.sf.net



From lists at allotropic.com  Wed Mar 31 15:17:06 2004
From: lists at allotropic.com (Zach Thompson)
Date: Wed, 31 Mar 2004 14:17:06 -0800
Subject: [Twisted-Python] adbapi results through xmlrpc
In-Reply-To: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
References: <82FA5433-8357-11D8-B305-000A95CCF8E0@allotropic.com>
Message-ID: <250C2474-8361-11D8-B305-000A95CCF8E0@allotropic.com>

Thanks to all for the help!  Sure enough, the database adaptor was 
sending back objects (like PgInt8) that couldn't be deserialized.  I 
got it to work by changing the server code to this:

     def xmlrpc_get_count(self):
         from twisted.enterprise import adbapi
         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
         return pool.runQuery("select count(*) from 
asdf").addCallback(lambda results: int(results[0][0]))

I'll also be moving that ConnectionPool somewhere else so it only gets 
called once...

On Mar 31, 2004, at 1:08 PM, Zach Thompson wrote:

> Hello,
>
> I'm trying to connect 2 scripts (a server and client) xmlrpc.  The 
> server just needs to run a db query and return the result set to the 
> client for display.  Here's part of the server class:
>
>     def xmlrpc_get_count(self):
>         from twisted.enterprise import adbapi
>         pool = adbapi.ConnectionPool("pyPgSQL.PgSQL", database="zach")
>         return pool.runQuery("select count(*) from asdf")
>
> And part of the client class:
>
>     def OnButton(self, event):
>         from twisted.web.xmlrpc import Proxy
>         proxy = Proxy("http://localhost:8080")
>         proxy.callRemote('get_count').addCallback(self.UpdateCount)
>
>     def UpdateCount(self, count):
>         self.label.SetLabel(count)
>
> Here's what the client prints when I press the button:
>
>   Unhandled error in Deferred:
>   Failure: xmlrpclib.Fault: <Fault 8002: "can't serialize output">
>
> I can understand that xmlrpc needs to serialize the Deferred object to 
> send it through http.  I'm guessing there's a reference to the 
> ConnectionPool object contained in the Deferred, and it makes sense 
> that you wouldn't be able to serialize something like that.
>
> Any ideas?
>
> BTW, the client is running on a wxreactor, if that matters..
>
> Thanks,
> Zach
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From oisin at enginesofcreationsoftware.com  Thu Mar 11 05:57:22 2004
From: oisin at enginesofcreationsoftware.com (Oisin Mulvihill)
Date: Thu, 11 Mar 2004 12:57:22 +0000
Subject: [Twisted-Python] help ssh forwarding.
Message-ID: <A373225C-735B-11D8-AF5B-000A956F9A40@enginesofcreationsoftware.com>

Hi,

I have a series of linux based internet kiosks at a variety
of sites. I need to be able to connect back into the kiosk
from the main server. However direct connections aren't possible
as kiosks are behind there own router/firewall.

The solution to this is to forward port 22 on the kiosk to
a port on the server. I was thinking of just spawning the
command "ssh -R11122:my_server:22 user at my_server" from the
kiosk, when ever I need to connect to a machine. However I'm
hoping to do this with twisted, since the kiosk app uses it
already, and spawning the ssh command won't play well with
twisted's event system.

I decided to try and hack together a simple version of what
I want to do, based on the example sshsimpleclient.py. I don't
seem to be able to figure out how to forward from the server
to the kiosk. My program (attached) just forwards from 11122
on the kiosk to 22 on the server which isn't what I want.

Can anyone suggest what I'm doing wrong? Can twisted actually
do this?

Thanks in advance,

om


-------------- next part --------------
A non-text attachment was scrubbed...
Name: cli.py
Type: application/octet-stream
Size: 1728 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040311/ef8e912f/attachment-0002.obj>
-------------- next part --------------



--
Oisin Mulvihill
Engines Of Creation

Email: oisin at enginesofcreationsoftware.com
Email: oisin at enginesofcreation.ie
Mobile: +353 868191540

From koen_van_herck at yahoo.com  Thu Mar 11 08:33:35 2004
From: koen_van_herck at yahoo.com (Koen Van Herck)
Date: Thu, 11 Mar 2004 16:33:35 +0100
Subject: [Twisted-Python] ESMTPClient
Message-ID: <005001c4077e$3907e930$4028000a@KVanherck>

Does anyone have an example of using twisted.protocols.smtp.ESMTPClient ?
I.e., I would like to write a client for sending mail to an SMTP server
which requires authentication.

Thanks,
Koen Van Herck.




From eric at oaktech.net  Fri Mar 19 17:25:19 2004
From: eric at oaktech.net (Eric Mangold)
Date: Fri, 19 Mar 2004 17:25:19 -0700
Subject: [Twisted-Python] Re: Somebody please point me in the right direction...
In-Reply-To: <DLELJDPNJKAEEHLHNLONOEHODPAA.jredders@mhbs.lsil.com>
References: <DLELJDPNJKAEEHLHNLONOEHODPAA.jredders@mhbs.lsil.com>
Message-ID: <opr44wshgv55xoqp@mail.oaktech.net>

On Fri, 19 Mar 2004 16:17:50 -0600, John C. Reddersen <jredders at lsil.com> 
wrote:

> Hi all,
>
> I'm a fairly new Python programmer, and really new to Twisted, so accept 
> my
> apologies now if this is a clueless newbie question...
>
> I'm developing a wxPython application that needs to talk to another app 
> via
> a very simple sockets based interface.  I managed to mangle together some
> code using twisted to connect to the socket and send an initial starting
> message to the server and receive it's response.  However, I'm unsure 
> how to
> proceed from here to allow my GUI to send and receive commands over the
> socket using the protocol created by the factory.  All the examples I 
> could
> find just send canned messages, nothing with user input...

Without further information I'll say you should be using PB.

See the Perspective Broker howto's at:
http://www.twistedmatrix.com/documents/current/howto/index

	-Eric



From g.clinch at lancaster.ac.uk  Tue Mar 23 20:21:18 2004
From: g.clinch at lancaster.ac.uk (Graham Clinch)
Date: Wed, 24 Mar 2004 03:21:18 +0000 (GMT)
Subject: [Twisted-Python] JellyToNode and boolean types
Message-ID: <Pine.GSO.4.21.0403240313100.6258-100000@cent1.lancs.ac.uk>

I've just started having problems with JellyToNode dying on boolean
types (Bug tracker issue 363), but it doesn't seem to have moved along
much recently, even though there is a seemingly accepted patch; are there
any plans to apply the patch?

Thanks,
Graham




