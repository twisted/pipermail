<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Win32 fix for twisted/internet/tcp.py
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Win32%20fix%20for%20twisted/internet/tcp.py&In-Reply-To=%3C9ccaa767ba98be1f1762edc11a65201b%40web%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="045963.html">
   <LINK REL="Next"  HREF="045987.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Win32 fix for twisted/internet/tcp.py</H1>
    <B>Joe Cotroneo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Win32%20fix%20for%20twisted/internet/tcp.py&In-Reply-To=%3C9ccaa767ba98be1f1762edc11a65201b%40web%3E"
       TITLE="[Twisted-Python] Win32 fix for twisted/internet/tcp.py">joe at neosource.com.au
       </A><BR>
    <I>Fri Jun 23 09:12:57 MDT 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="045963.html">[Twisted-Python] Twisters at EuroPython ?
</A></li>
        <LI>Next message (by thread): <A HREF="045987.html">[Twisted-Python] Win32 fix for twisted/internet/tcp.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45986">[ date ]</a>
              <a href="thread.html#45986">[ thread ]</a>
              <a href="subject.html#45986">[ subject ]</a>
              <a href="author.html#45986">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I just downloaded the twisted words package, and tried the ircLogBot.py sample.

It came up with an error on my Win32 box, but worked fine on my linux box.

The error on win32 was due to the following line 512 in twisted/internet/tcp.py:

r, w, e = select.select([], [], [self.fileno()], 0.0)

The select module on Win32 doesn't accept empty read/write handles, so it generated an 'invalid argument' exception.

I changed line 512 to the following, and the sample now works on win32.

r, w, e = select.select([self.fileno()], [self.fileno()], [self.fileno()], 0.0)

P.S: I used Twisted 2.4.0 and twisted words 0.3.0

Hope you find my report useful, even if win32 bugs aren't a priority ;)

Cheers,

Joe







</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="045963.html">[Twisted-Python] Twisters at EuroPython ?
</A></li>
	<LI>Next message (by thread): <A HREF="045987.html">[Twisted-Python] Win32 fix for twisted/internet/tcp.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45986">[ date ]</a>
              <a href="thread.html#45986">[ thread ]</a>
              <a href="subject.html#45986">[ subject ]</a>
              <a href="author.html#45986">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
