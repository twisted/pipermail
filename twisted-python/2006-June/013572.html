<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted-friendly Message bus
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted-friendly%20Message%20bus&In-Reply-To=150dc01c69be4%24b42ffb50%246302a8c0%40dcore">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013570.html">
   <LINK REL="Next"  HREF="013574.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted-friendly Message bus</H1>
    <B>Bruce Mitchener</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted-friendly%20Message%20bus&In-Reply-To=150dc01c69be4%24b42ffb50%246302a8c0%40dcore"
       TITLE="[Twisted-Python] Twisted-friendly Message bus">bruce at cubik.org
       </A><BR>
    <I>Fri Jun 30 01:57:04 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013570.html">[Twisted-Python] Twisted-friendly Message bus
</A></li>
        <LI>Next message: <A HREF="013574.html">[Twisted-Python] Twisted-friendly Message bus
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13572">[ date ]</a>
              <a href="thread.html#13572">[ thread ]</a>
              <a href="subject.html#13572">[ subject ]</a>
              <a href="author.html#13572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Paul G wrote:
&gt;<i> Bruce Mitchener wrote:
</I>&gt;&gt;<i> I did have to write my own STOMP protocol implementation as the 
</I>&gt;&gt;<i> existing one for Python is not up to snuff.  I may be able to release 
</I>&gt;&gt;<i> it back to the ActiveMQ people, but I'm not entirely sure yet.
</I>&gt;<i> 
</I>&gt;<i> what were the problems with the existing implementation? is your 
</I>&gt;<i> implementation integrated with twisted? more info (and even... gasp... 
</I>&gt;<i> source) would be very sweet, seeing as this looks like my best option 
</I>&gt;<i> for certain things at the moment.
</I>
I did two sorts of Twisted integration, first, I use it have a Protocol 
subclass.  Secondly, I have it using deferreds for request/reply type stuff.

The main problem that I recall with the existing code was that it 
assumed that it could just do a blocking read and get everything read in 
at once.  This clearly isn't true as a STOMP message may span multiple 
read()s from the network (and happens quite regularly under load).

I need to check with work about releasing it.  I'll try to do that 
tomorrow, but things are pretty crazy, so it might not happen until next 
week after the holiday.

But really, it is a pretty simple protocol.  The main tricks are in 
handling partial messages correctly.

The other way would be to look at the C++ OpenWire and STOMP 
implementations and think about wrapping one of them with SWIG.  I 
didn't go that route yet, but may for performance/features in the future.

  - Bruce


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013570.html">[Twisted-Python] Twisted-friendly Message bus
</A></li>
	<LI>Next message: <A HREF="013574.html">[Twisted-Python] Twisted-friendly Message bus
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13572">[ date ]</a>
              <a href="thread.html#13572">[ thread ]</a>
              <a href="subject.html#13572">[ subject ]</a>
              <a href="author.html#13572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
