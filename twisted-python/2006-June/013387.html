<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.plugin question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.plugin%20question&In-Reply-To=17553.30758.121742.323787%40terry.jones.tc">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013390.html">
   <LINK REL="Next"  HREF="013391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.plugin question</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.plugin%20question&In-Reply-To=17553.30758.121742.323787%40terry.jones.tc"
       TITLE="[Twisted-Python] twisted.plugin question">glyph at divmod.com
       </A><BR>
    <I>Thu Jun 15 15:08:47 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013390.html">[Twisted-Python] twisted.plugin question
</A></li>
        <LI>Next message: <A HREF="013391.html">[Twisted-Python] twisted.plugin question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13387">[ date ]</a>
              <a href="thread.html#13387">[ thread ]</a>
              <a href="subject.html#13387">[ subject ]</a>
              <a href="author.html#13387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On Thu, 15 Jun 2006 17:09:26 +0200, Terry Jones &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">terry at jon.es</A>&gt; wrote:

&gt;<i>sys.path[:0] = ['./twisted/plugins']
</I>
This line is unnecessary, and probably wrong.  If you look in twisted/plugins/__init__.py, you will notice that it puts any additional entries on sys.path into its __path__; the fact that &quot;.&quot; is already on your sys.path is enough for it to recognize this plugin.

&gt;<i>def displayAllKnownMaterials():
</I>&gt;<i>    for material in getPlugins(IMaterial):
</I>&gt;<i>        displayMaterial(material)
</I>
This is going to look for plugins in twisted.plugins, which is probably not what you want.  Did you look under the &quot;alternate plugin packages&quot; section of that document?

&gt;<i>from twisted.plugin import IPlugin
</I>&gt;<i>from plugin import IMaterial
</I>
There is some vagueness in naming here.  Depending on your working directory (etc) twisted.plugin might be picked up as plugin.  You probably want to change the name of your example module to something unique.

&gt;<i>When I run plugin.py, I get the error:
</I>
My analysis of this is the same as JP's; however, generally the file you run with 'python' should look something like this:

    from myapp import main
    main()

Python has the unfortunate habit of creating a special module called &quot;__main__&quot; and putting the code from the file it is passed onto the commandline into that module, rather than into the location where it would go if you imported it; having two copies of your &quot;plugin&quot; module in memory at once (the imported one, and the __main__ one) is probably causing at least some of your problems.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013390.html">[Twisted-Python] twisted.plugin question
</A></li>
	<LI>Next message: <A HREF="013391.html">[Twisted-Python] twisted.plugin question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13387">[ date ]</a>
              <a href="thread.html#13387">[ thread ]</a>
              <a href="subject.html#13387">[ subject ]</a>
              <a href="author.html#13387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
