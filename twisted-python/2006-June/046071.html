<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Need words of wisdom regarding PB
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Need%20words%20of%20wisdom%20regarding%20PB&In-Reply-To=%3C1509501c69bda%2454e99d90%246302a8c0%40dcore%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="046047.html">
   <LINK REL="Next"  HREF="046049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Need words of wisdom regarding PB</H1>
    <B>Paul G</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Need%20words%20of%20wisdom%20regarding%20PB&In-Reply-To=%3C1509501c69bda%2454e99d90%246302a8c0%40dcore%3E"
       TITLE="[Twisted-Python] Need words of wisdom regarding PB">paul-lists at perforge.com
       </A><BR>
    <I>Thu Jun 29 18:15:45 MDT 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="046047.html">[Twisted-Python] Need words of wisdom regarding PB
</A></li>
        <LI>Next message (by thread): <A HREF="046049.html">[Twisted-Python] Need words of wisdom regarding PB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46071">[ date ]</a>
              <a href="thread.html#46071">[ thread ]</a>
              <a href="subject.html#46071">[ subject ]</a>
              <a href="author.html#46071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>chaz,

quick note: please don't top post (in replies to me, anyway). just common 
courtesy.

in my context, the solution was meant as a synchronization method with some 
application-level logic to be used instead of rsync (i didn't need 
differencing and needed some complicated candidacy logic). the pb client 
simply opened multiple connections and sent data chunks labelled with chunk 
id and object id, multiplexed over the connection pool, with the chunks 
being pulled out of a queue that a threadpool reading from disk and 
optionally gzipping data was writing to. i didn't need to write logic to 
grow the connection pool to maximize bandwidth (i easily saturated a 
fast-e), but that would be trivial.

note: i do not advocate doing this unless there is a very good reason 
existing tools won't work for your application. reinventing the wheel makes 
baby jesus cry.

-p

----- Original Message ----- 
From: &quot;Chaz.&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">eprparadocs at gmail.com</A>&gt;
To: &quot;Paul G&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">paul-lists at perforge.com</A>&gt;
Cc: &quot;Twisted general discussion&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
Sent: Wednesday, June 28, 2006 8:03 AM
Subject: Re: [Twisted-Python] Need words of wisdom regarding PB


&gt;<i> Paul,
</I>&gt;<i>
</I>&gt;<i> Thanks for the information. I hadn't thought about multiple pb
</I>&gt;<i> connections, but I might even for my low-latency environment. I can have
</I>&gt;<i> files that range from very small to very very large and getting them
</I>&gt;<i> transferred in a reasonable period of time might might require many
</I>&gt;<i> connections at once.
</I>&gt;<i>
</I>&gt;<i> In your solution did you just allow the client to &quot;divide&quot; up the work
</I>&gt;<i> or was there something else you did?
</I>&gt;<i>
</I>&gt;<i> Chaz
</I>&gt;<i>
</I>&gt;<i> Paul G wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ----- Original Message ----- From: &quot;Chaz.&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">eprparadocs at gmail.com</A>&gt;
</I>&gt;&gt;<i> To: &quot;Twisted general discussion&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
</I>&gt;&gt;<i> Sent: Sunday, June 25, 2006 2:20 PM
</I>&gt;&gt;<i> Subject: [Twisted-Python] Need words of wisdom regarding PB
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have a problem to solve: I need to get files from one machine to
</I>&gt;&gt;&gt;<i> another. I had thought about all the obvious solutions (and implemented
</I>&gt;&gt;&gt;<i> some of them); for instance adding an FTP server to my Twisted services
</I>&gt;&gt;&gt;<i> and using a client. I thought about doing the file transfer with XML-RPC
</I>&gt;&gt;&gt;<i> and even SOAP. And I even thought of WebDav.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I started reading about PB and thought it might be useful. I thought
</I>&gt;&gt;&gt;<i> about building a &quot;remote&quot; class that simulates open and all its
</I>&gt;&gt;&gt;<i> functions, like read, write, close, etc.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The more I thought about it the more I thought it cool and the way to do
</I>&gt;&gt;&gt;<i> it. That got me thinking that I must be missing something. I am curious
</I>&gt;&gt;&gt;<i> about what you might think of this approach. Is there another better 
</I>&gt;&gt;&gt;<i> way?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> i implemented file transfer with an optional intermediate gzip stage
</I>&gt;&gt;<i> using pb a long while ago. if you're dealing with fairly low latency, a
</I>&gt;&gt;<i> single pb connection is fine; for higher latencies, you'll want to
</I>&gt;&gt;<i> multiplex multiple pb connections (this has to do with tcp, not pb).
</I>&gt;&gt;<i> with my quick hack, i was able to saturate a fast-e with virtually no
</I>&gt;&gt;<i> significant cpu utilization - the disk io and the network were the
</I>&gt;&gt;<i> bottlenecks.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -p
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="046047.html">[Twisted-Python] Need words of wisdom regarding PB
</A></li>
	<LI>Next message (by thread): <A HREF="046049.html">[Twisted-Python] Need words of wisdom regarding PB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46071">[ date ]</a>
              <a href="thread.html#46071">[ thread ]</a>
              <a href="subject.html#46071">[ subject ]</a>
              <a href="author.html#46071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
