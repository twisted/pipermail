<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.web,	url -&gt; resource mapping and isLeaf questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.web%2C%0A%09url%20-%3E%20resource%20mapping%20and%20isLeaf%20questions&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023197.html">
   <LINK REL="Next"  HREF="023191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.web,	url -&gt; resource mapping and isLeaf questions</H1>
    <B>David</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted.web%2C%0A%09url%20-%3E%20resource%20mapping%20and%20isLeaf%20questions&In-Reply-To="
       TITLE="[Twisted-Python] twisted.web,	url -&gt; resource mapping and isLeaf questions">david at silveregg.co.jp
       </A><BR>
    <I>Tue Nov 30 01:07:17 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="023197.html">[Twisted-Python] Handling of NMEA messages
</A></li>
        <LI>Next message: <A HREF="023191.html">[Twisted-Python] twisted.web,	url -&gt; resource mapping and isLeaf questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23189">[ date ]</a>
              <a href="thread.html#23189">[ thread ]</a>
              <a href="subject.html#23189">[ subject ]</a>
              <a href="author.html#23189">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am following &quot;twisted in 60sec&quot; series, but even the simple examples 
are a bit unclear to me, especially w.r.t. url mapping. For example:

# assume the right imports...
class MainPage(Resource):
     isLeaf = True
     def render_GET(self, request):
         return &quot;somestring&quot;

resource = MainPage()
factory = Site(resource)
reactor.listenTCP(8880, factory)
reactor.run()

I was expecting that accessing any other 'path' besides the main url 
would cause 404, e.g. &quot;<A HREF="http://localhost:8880/foo/bar&quot;,">http://localhost:8880/foo/bar&quot;,</A> and I get the 
same page instead.

I gather this is a consequence of the isLeaf setting set to be True, 
because twisted.web stops as soon as it encounters MainPage in the 
hierarchy and use that for rendering. Setting it to False seems to avoid 
the page to be available at all. The solution I got instead is something 
like:

class RootPage(Resource):
     isLeaf = False
     def render(self, request):
         return &quot;somestring&quot;

     def getChild(self, path, request):
         if path:
             return NoResource()
         else:
             return self

and adding new resources through putChild. Isn't there a more natural 
way of doing things ?

cheers,

David

</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023197.html">[Twisted-Python] Handling of NMEA messages
</A></li>
	<LI>Next message: <A HREF="023191.html">[Twisted-Python] twisted.web,	url -&gt; resource mapping and isLeaf questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23189">[ date ]</a>
              <a href="thread.html#23189">[ thread ]</a>
              <a href="subject.html#23189">[ subject ]</a>
              <a href="author.html#23189">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
