<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Immediate removal of cfreactor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Immediate%20removal%20of%20cfreactor&In-Reply-To=%3C20101101132623.2040.847258080.divmod.xquotient.437%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055589.html">
   <LINK REL="Next"  HREF="055595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Immediate removal of cfreactor</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Immediate%20removal%20of%20cfreactor&In-Reply-To=%3C20101101132623.2040.847258080.divmod.xquotient.437%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Immediate removal of cfreactor">exarkun at twistedmatrix.com
       </A><BR>
    <I>Mon Nov  1 07:26:23 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055589.html">[Twisted-Python] Immediate removal of cfreactor
</A></li>
        <LI>Next message (by thread): <A HREF="055595.html">[Twisted-Python] Immediate removal of cfreactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55591">[ date ]</a>
              <a href="thread.html#55591">[ thread ]</a>
              <a href="subject.html#55591">[ subject ]</a>
              <a href="author.html#55591">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12:49 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A> wrote:
&gt;<i>On Sun, 2010-10-31 at 00:51 +0000, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
</I>&gt;&gt;<i>Hello all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>As reported in &lt;<A HREF="http://twistedmatrix.com/trac/ticket/4652">http://twistedmatrix.com/trac/ticket/4652</A>&gt;, some
</I>&gt;&gt;<i>problems have arisen with cfreactor.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>First, recent versions of Pyrex reject the Pyrex source for the 
</I>&gt;&gt;<i>support
</I>&gt;&gt;<i>modules.  This makes future development on cfreactor difficult 
</I>&gt;&gt;<i>(although
</I>&gt;&gt;<i>Glyph's branch does resolve this problem - or at least appears to).
</I>&gt;<i>
</I>&gt;<i>So, the first problem appears to be fixed.
</I>&gt;&gt;<i>Second, the C source files do not build with clang.  This seems likely
</I>&gt;&gt;<i>to become more important on future versions of OS X (the only platform
</I>&gt;&gt;<i>where this code matters).  Even OS X 10.6 makes clang easily available
</I>&gt;&gt;<i>(according to an Ars Technica article, &quot;Clang is the recommended
</I>&gt;&gt;<i>compiler, and the focus of all of Apple's future efforts.&quot;
</I>&gt;&gt;<i>&lt;<A HREF="http://arstechnica.com/apple/reviews/2009/08/mac-os-x-10-6.ars/9">http://arstechnica.com/apple/reviews/2009/08/mac-os-x-10-6.ars/9</A>&gt;)
</I>&gt;<i>
</I>&gt;<i>Have you tried seeing if Cython works with Clang? That ought to be a
</I>&gt;<i>very minor change to our code.
</I>
Here are the complete results for all combinations:

        |       trunk        |         branch
        | gcc      | clang   | gcc         | clang
-------------------------------------------------------
Cython  | FTB pyx  | FTB pyx | runLoop err | runLoop err
-------------------------------------------------------
Pyrex   | segfault | FTB c   | runLoop err | runLoop err



  FTB pyx - Failed to build .pyx into .c
  FTB c - Failed to build .c into .so
  segfault - crash during test suite run
  runLoop err - Fails to start reactor because &quot;could not convert 
runLoop&quot;
&gt;&gt;<i>Rather than leaving this to chance, I propose that we remove cfreactor
</I>&gt;&gt;<i>and all supporting code ourselves, immediately (ie, in 10.2 - hi 
</I>&gt;&gt;<i>therve,
</I>&gt;&gt;<i>go faster next time ;).
</I>&gt;<i>
</I>&gt;<i>This violates our deprecation policy... so I suggest we only do it if
</I>&gt;<i>absolutely must, i.e. if Glyph's fixes + Cython don't fix the problem.
</I>
Quite so.  It seems like an okay violation to me, since according to the 
table above the best possible behavior cfreactor is able to provide is 
that sometimes it will build and run for a while before segfaulting.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055589.html">[Twisted-Python] Immediate removal of cfreactor
</A></li>
	<LI>Next message (by thread): <A HREF="055595.html">[Twisted-Python] Immediate removal of cfreactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55591">[ date ]</a>
              <a href="thread.html#55591">[ thread ]</a>
              <a href="subject.html#55591">[ subject ]</a>
              <a href="author.html#55591">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
