<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Multiple plugins in &quot;twistd&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Multiple%20plugins%20in%20%22twistd%22&In-Reply-To=%3CCAOA_4jAQ%3D5LzWjt5XehwtHs2i_9FexM0x%3Dot9Hnc%3DkfB8GTMvg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="061960.html">
   <LINK REL="Next"  HREF="061962.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Multiple plugins in &quot;twistd&quot;</H1>
    <B>Moshe Zadka</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Multiple%20plugins%20in%20%22twistd%22&In-Reply-To=%3CCAOA_4jAQ%3D5LzWjt5XehwtHs2i_9FexM0x%3Dot9Hnc%3DkfB8GTMvg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Multiple plugins in &quot;twistd&quot;">zadka.moshe at gmail.com
       </A><BR>
    <I>Tue May 19 06:07:23 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="061960.html">[Twisted-Python] trial internals help?
</A></li>
        <LI>Next message (by thread): <A HREF="061962.html">[Twisted-Python] Multiple plugins in &quot;twistd&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29500">[ date ]</a>
              <a href="thread.html#29500">[ thread ]</a>
              <a href="subject.html#29500">[ subject ]</a>
              <a href="author.html#29500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Background

Currently, &quot;twistd&quot; assumes one-run-one-plugin. It would be nice to load up
multiple plug-ins in Twisted, for many reasons. These include: serving the
same in-memory content via separate protocols, adding manhole to other
plug-ins (so the end-deployer can add it to other things, as opposed to the
original implementor, and a catch-all category of &quot;auxiliary services&quot;.

Auxiliary services are those which are not useful in and of themselves, but
add value to a service which does something else of use.

Examples of auxiliary services -- a logging service (that connects to some
logging protocol on start-up), a metrics service (that sends statistics to
a collector like statsd or riemann) or an error-sending service (to
something like Sentry).

Proposal

tl;dr: four new tickets (codenamed SUBCOMMANDS, SERVICES, MANHOLE and
PROVIDERS) and one old ticket (3538)

SUBCOMMANDS: Add '+' as a special character in t.p.usage.Options. This
behavior will be off by default, and controlled by an attribute on the
Options instance &quot;allowMultipleSubcommands&quot;.

The attribute will only be checked when the first sub-command starts, to
allow setting it based on global flags. When the option is on, '-+' will be
passed as '+' to the Options instance, to allow sending plain '+' to
sub-commands.

Glyph thinks there's a ticket for it. I couldn't find it in &quot;search for
tickets in 'core' whose description mentionds 'command'&quot;. Unless anyone can
find it, I'll open a new ticket.

SERVICES (depends on SUBCOMMANDS): In twistd, set the flag aMS if
'--allow-multiple-services' is given. Add to the application all services.

3538 (depends on SERVICES): If '--allow-multiple-services' is given, and
'--python &lt;.tac file&gt;' is given, process subcommands as usual.

PROVIDERS: Add a function,
       &quot;providersInHierarchy(IService, IInterface) -&gt; List[IInterface]&quot;
that returns all services in the hierarchy which provide the interface.
This ticket does not depend on any other tickets.

MANHOLE (depends on PROVIDERS, SERVICES): Add a built-in twistd plugin
named &quot;manhole&quot;. The plugin will expose manhole as PB/telnet with a
namespace that includes
  {'services': providersInHierarchy(manholeService, IService)}
This ticket technically could only depend on PROVIDERS, but to be useful,
it also depends on SERVICES
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20150519/267e6213/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20150519/267e6213/attachment.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="061960.html">[Twisted-Python] trial internals help?
</A></li>
	<LI>Next message (by thread): <A HREF="061962.html">[Twisted-Python] Multiple plugins in &quot;twistd&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#29500">[ date ]</a>
              <a href="thread.html#29500">[ thread ]</a>
              <a href="subject.html#29500">[ subject ]</a>
              <a href="author.html#29500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
