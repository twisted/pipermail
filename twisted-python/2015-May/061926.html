<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] can QtWebKit fire a twisted deferred?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20can%20QtWebKit%20fire%20a%20twisted%20deferred%3F&In-Reply-To=%3C8DC2DF48-5B49-4937-BF02-A5F567B7E0F1%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="029464.html">
   <LINK REL="Next"  HREF="061928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] can QtWebKit fire a twisted deferred?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20can%20QtWebKit%20fire%20a%20twisted%20deferred%3F&In-Reply-To=%3C8DC2DF48-5B49-4937-BF02-A5F567B7E0F1%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] can QtWebKit fire a twisted deferred?">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed May  6 16:35:31 MDT 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="029464.html">[Twisted-Python] can QtWebKit fire a twisted deferred?
</A></li>
        <LI>Next message (by thread): <A HREF="061928.html">[Twisted-Python] can QtWebKit fire a twisted deferred?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61926">[ date ]</a>
              <a href="thread.html#61926">[ thread ]</a>
              <a href="subject.html#61926">[ subject ]</a>
              <a href="author.html#61926">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On May 6, 2015, at 11:04 AM, Kevin Mcintyre &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kebin70 at gmail.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> '''
</I>&gt;<i> I know this is meant for pyqt but I've had little luck this that board.
</I>&gt;<i> 
</I>&gt;<i> The short answer is yes, but it's a total hack...and I'm wondering if anybody has a more elegant solution.  
</I>&gt;<i> 
</I>&gt;<i> Specifically I would like to be able to fire a defer from the javascript instead of having to call alert.
</I>&gt;<i> 
</I>&gt;<i> Below is an example of how I currently gain access...not necessarily a working version.
</I>&gt;<i> '''  
</I>
I don't see any import of qt4reactor or Twisted (other than the implied import of Deferred) in this code.  Firing a Deferred in this way should be totally fine though; you don't actually need the reactor for Deferreds to work (it's just important that if it's going to interact with any other Twisted code it needs to run on the main thread).

Sorry I don't have a better suggestion, but I don't see much wrong with what you're doing here :).

-g

&gt;<i> url = '<A HREF="http://www.google.com">http://www.google.com</A> &lt;<A HREF="http://www.google.com/">http://www.google.com/</A>&gt;'
</I>&gt;<i> 
</I>&gt;<i> mo = &quot;&quot;&quot;
</I>&gt;<i>     var observer = new MutationObserver(function(mutations) {
</I>&gt;<i>         for (var x = 0; x &lt; mutations.length; x++) {
</I>&gt;<i>             if (mutations[x].addedNodes.length &gt; 0) {
</I>&gt;<i>                 alert('add nodes')                
</I>&gt;<i>             }
</I>&gt;<i>         }
</I>&gt;<i>     });
</I>&gt;<i>     var config = { attributes: true, childList: true, characterData: false }
</I>&gt;<i>     var nti = document.querySelector('document.body')
</I>&gt;<i>     observer.observe(nti, config);            
</I>&gt;<i> &quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i> page = QWebPage()
</I>&gt;<i> def alarmAction(qframe, msg):
</I>&gt;<i>     print 'deferred action', qframe, msg
</I>&gt;<i> def mutationHook():
</I>&gt;<i>     d = defer.Deferred()
</I>&gt;<i>     d.addCallback(alarmAction)
</I>&gt;<i>     page.javaScriptAlert = d.callback
</I>&gt;<i>     page.mainFrame().documentElement().evaluateJavaScript(mo)
</I>&gt;<i>     
</I>&gt;<i> page.loadFinished(mutationHook)
</I>&gt;<i> page.mainFrame().setUrl(url)
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20150506/6f0d0f47/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="029464.html">[Twisted-Python] can QtWebKit fire a twisted deferred?
</A></li>
	<LI>Next message (by thread): <A HREF="061928.html">[Twisted-Python] can QtWebKit fire a twisted deferred?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61926">[ date ]</a>
              <a href="thread.html#61926">[ thread ]</a>
              <a href="subject.html#61926">[ subject ]</a>
              <a href="author.html#61926">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
