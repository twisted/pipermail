<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Why don't Connectors use deferreds?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Why%20don%27t%20Connectors%20use%20deferreds%3F&In-Reply-To=1094741748.1016.25.camel%40sheriffpony">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008595.html">
   <LINK REL="Next"  HREF="008596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Why don't Connectors use deferreds?</H1>
    <B>Mike C. Fletcher</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Why%20don%27t%20Connectors%20use%20deferreds%3F&In-Reply-To=1094741748.1016.25.camel%40sheriffpony"
       TITLE="[Twisted-Python] Why don't Connectors use deferreds?">mcfletch at rogers.com
       </A><BR>
    <I>Thu Sep  9 13:41:29 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008595.html">[Twisted-Python] Why don't Connectors use deferreds?
</A></li>
        <LI>Next message: <A HREF="008596.html">[Twisted-Python] PEP 334 - Simple Coroutines via SuspendIteration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8598">[ date ]</a>
              <a href="thread.html#8598">[ thread ]</a>
              <a href="subject.html#8598">[ subject ]</a>
              <a href="author.html#8598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Itamar Shtull-Trauring wrote:
...

&gt;<i>There's a utility class for this in twisted.internet.protocol:
</I>&gt;<i>
</I>&gt;<i>deferredOfProtocolInstance =
</I>&gt;<i>ClientCreator(MyProtocol).connectTCP(&quot;localhost&quot;, 1234)
</I>&gt;<i>
</I>&gt;<i>If this matches your needs I suggest adding an issue to
</I>&gt;<i>twistedmatrix.com/bugs/ about adding this to the client howto and assign
</I>&gt;<i>to hypatia or me.
</I>&gt;<i>  
</I>&gt;<i>
</I>Okay, issue added to the tracker.  Clarification just so no-one else 
needs to spelunk through to answer the question I had:

The return value is a *connected* protocol.  I gather so because it 
looks as though buildProtocol is called by connector.doRead which then 
calls protocol.makeConnection, which in turn calls 
protocol.connectionMade, and the use of callLater( 0, ...) makes the 
callback fire *after* the protocol has had connectionMade called.

There appear to be cases where the callback can be called with a 
protocol that has failed to initialise, that is, if connectionMade (or 
any of the other operations between callback scheduling and execution) 
fails for some reason, the callback will still be called.  As such the 
callback really is just notifying that the connection has gone through 
(more precisely, that the protocol has been built), not necessarily that 
the protocol is fully initialised and ready-to-go.

Still, it does everything I need with a little bit of checking to be 
sure that the initialisation completed.

Thanks,
Mike

________________________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  <A HREF="http://www.vrplumber.com">http://www.vrplumber.com</A>
  <A HREF="http://blog.vrplumber.com">http://blog.vrplumber.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008595.html">[Twisted-Python] Why don't Connectors use deferreds?
</A></li>
	<LI>Next message: <A HREF="008596.html">[Twisted-Python] PEP 334 - Simple Coroutines via SuspendIteration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8598">[ date ]</a>
              <a href="thread.html#8598">[ thread ]</a>
              <a href="subject.html#8598">[ subject ]</a>
              <a href="author.html#8598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
