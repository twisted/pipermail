<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] a little thingo
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20a%20little%20thingo&In-Reply-To=200409112135.58848.james%40delx.cjb.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008611.html">
   <LINK REL="Next"  HREF="008613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] a little thingo</H1>
    <B>Timothy Stebbing</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20a%20little%20thingo&In-Reply-To=200409112135.58848.james%40delx.cjb.net"
       TITLE="[Twisted-Python] a little thingo">tim.stebbing at nunatak.com.au
       </A><BR>
    <I>Sat Sep 11 07:44:33 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008611.html">[Twisted-Python] MSN &amp; Jabber patches
</A></li>
        <LI>Next message: <A HREF="008613.html">[Twisted-Python] [repost] twistd quietness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8612">[ date ]</a>
              <a href="thread.html#8612">[ thread ]</a>
              <a href="subject.html#8612">[ subject ]</a>
              <a href="author.html#8612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>gday,

LordVan had a query the other night, he was writing a test app for a PB
server, and on receiving his root object from a deferred, he wanted to
call each consecutive remote method to test them.

Initially he was adding each test as a callback of the last, and passing
on the root object each time. He wanted to know how to run many callbacks
on the initial return value consecutivly, without chaining.

I wrote this little snippet, which in the end he didn't use, however I
thought it might be of interest to others for some purpose.

problems I didnt bother fixing:

a)  if a test callback modifies the value, the next test gets a modified
value. if this is an issue the Repeater should copy the value.

b) you can't pass extra args to the callbacks.

from twisted.internet import reactor, defer

class Repeater(object):

    def dFactory(self, v):
        while 1:
            d = defer.Deferred()
            d.callback(v)
            yield d

    def __call__(self, v, list):
        g = self.dFactory(v)
        l = []
        for i in list:
            l.append(g.next().addCallback(i))
        return l

##TEST:
def test1(v):
    print v

def test2(v):
    print v

def test3(v):
    print v

r = Repeater()
d = defer.Deferred()
d.callback('foo')
print d.addCallback(r, [test1, test2, test3])
reactor.run()

-tjs


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008611.html">[Twisted-Python] MSN &amp; Jabber patches
</A></li>
	<LI>Next message: <A HREF="008613.html">[Twisted-Python] [repost] twistd quietness
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8612">[ date ]</a>
              <a href="thread.html#8612">[ thread ]</a>
              <a href="subject.html#8612">[ subject ]</a>
              <a href="author.html#8612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
