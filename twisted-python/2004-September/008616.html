<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] SSH server silently failing to open port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SSH%20server%20silently%20failing%20to%20open%20port&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008615.html">
   <LINK REL="Next"  HREF="008617.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] SSH server silently failing to open port</H1>
    <B>Jason Stitt</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20SSH%20server%20silently%20failing%20to%20open%20port&In-Reply-To="
       TITLE="[Twisted-Python] SSH server silently failing to open port">jason at pengale.com
       </A><BR>
    <I>Sun Sep 12 18:53:33 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008615.html">[Twisted-Python] Handling (intercepting) exceptions in twisted
</A></li>
        <LI>Next message: <A HREF="008617.html">[Twisted-Python] SSH server silently failing to open port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8616">[ date ]</a>
              <a href="thread.html#8616">[ thread ]</a>
              <a href="subject.html#8616">[ subject ]</a>
              <a href="author.html#8616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm still trying to get my SFTP server up. After looking over 
SFTPGateway in some detail, I think I have an idea of where all the 
pieces fit, but I'm still having the problem I had before with the 
sshsimpleserver example. Even though my factory is being instantiated 
and the log output says it's starting on the port I specified, the port 
is not, in fact, open to any connections.

Because there is no error reported, I'm having a hard time debugging 
this. I know that my factory's __init__ method completes successfully, 
and startFactory is also called. After that... nothing.

Can anyone help me figure out where to start looking, at least?

Thanks,

Jason

Here's my Factory class, minus a few comments and debug print 
statements:

class Factory(factory.SSHFactory):

     def __init__(self):
         self.portal = portal.Portal(Realm())

         def makeConnection(*args, **kw):
             return Connection(*args, **kw)

         self.services = {
             'ssh-userauth': userauth.SSHUserAuthServer,
             'ssh-connection': makeConnection,
         }

         # TODO: replace this with keys loaded from a file
         self.__private_keys = {
             'ssh-rsa': keys.getPublicKeyString(data=publicKey)
         }
         self.__public_keys = {
             'ssh-rsa': keys.getPrivateKeyObject(data=privateKey)
         }

     def buildProtocol(self, address):
         # Note: this function does not use its address parameter. I 
don't know
         # why it's there.
         return factory.SSHFactory.buildProtocol(self, address)

     def getPrivateKeys(self):
         return self.__private_keys.copy()

     def getPublicKeys(self):
         return self.__public_keys.copy()



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008615.html">[Twisted-Python] Handling (intercepting) exceptions in twisted
</A></li>
	<LI>Next message: <A HREF="008617.html">[Twisted-Python] SSH server silently failing to open port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8616">[ date ]</a>
              <a href="thread.html#8616">[ thread ]</a>
              <a href="subject.html#8616">[ subject ]</a>
              <a href="author.html#8616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
