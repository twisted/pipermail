<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adding etag and modified arguments to twisted	feedparser 
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adding%20etag%20and%20modified%20arguments%20to%20twisted%0A%09feedparser%20&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008720.html">
   <LINK REL="Next"  HREF="008722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adding etag and modified arguments to twisted	feedparser </H1>
    <B>Selwyn McCracken</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adding%20etag%20and%20modified%20arguments%20to%20twisted%0A%09feedparser%20&In-Reply-To="
       TITLE="[Twisted-Python] adding etag and modified arguments to twisted	feedparser ">selwyn.mccracken at stonebow.otago.ac.nz
       </A><BR>
    <I>Tue Sep 28 07:08:17 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008720.html">[Twisted-Python] BEEPy 0.5 released
</A></li>
        <LI>Next message: <A HREF="008722.html">[Twisted-Python] adding etag and modified arguments to twisted	feedparser 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8721">[ date ]</a>
              <a href="thread.html#8721">[ thread ]</a>
              <a href="subject.html#8721">[ subject ]</a>
              <a href="author.html#8721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi,

I am having trouble modifying the twisted-based rss aggregator from the 
python cookbook so that feedparser can make use of the update related 
arguments of 'etag' and 'modified' and save bandwith.

(see <A HREF="http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/277099">http://aspn.activestate.com/ASPN/Cookbook/Python/Recipe/277099</A>)

I realise that the problem is deferred related, but I can't seem to 
resolve the problem, even after reading the deferred documentation.

Anyway, the series of deferred functions that I think are relevant are:

1) def getPage(self, data, args): #args is the rss feed link
         return client.getPage(args,timeout=TIMEOUT)


2) def parseFeed(self, feed):
	parsed = feedparser.parse(cStringIO.StringIO(feed))

The problem is that getPage() requests the entire rss feed, and then 
passes the stream through to feedparser.parse. Normally however, 
feedparser.parse() takes furthers arguments of 'etag' and 'modified' so 
that only new feed information is returned, thereby saving bandwidth.

I tried modifying getPage() to return feedparser.parse(args), but it 
runs substantially slower than the original method, I presume in a 
synchronous manner.

Any assistance would be greatly appreciated.

cheers,
Selwyn



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008720.html">[Twisted-Python] BEEPy 0.5 released
</A></li>
	<LI>Next message: <A HREF="008722.html">[Twisted-Python] adding etag and modified arguments to twisted	feedparser 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8721">[ date ]</a>
              <a href="thread.html#8721">[ thread ]</a>
              <a href="subject.html#8721">[ subject ]</a>
              <a href="author.html#8721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
