<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Regarding the SHA 512 support in twisted.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Regarding%20the%20SHA%20512%20support%20in%20twisted.&In-Reply-To=%3CD4FF2CBA.297D89%25jamohamm%40cisco.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031340.html">
   <LINK REL="Next"  HREF="031342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Regarding the SHA 512 support in twisted.</H1>
    <B>jabir Mohammed (jamohamm)</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Regarding%20the%20SHA%20512%20support%20in%20twisted.&In-Reply-To=%3CD4FF2CBA.297D89%25jamohamm%40cisco.com%3E"
       TITLE="[Twisted-Python] Regarding the SHA 512 support in twisted.">jamohamm at cisco.com
       </A><BR>
    <I>Mon Mar 27 09:29:30 MDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031340.html">[Twisted-Python] Regarding the SHA 512 support in twisted.
</A></li>
        <LI>Next message (by thread): <A HREF="031342.html">[Twisted-Python] Regarding the SHA 512 support in twisted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31341">[ date ]</a>
              <a href="thread.html#31341">[ thread ]</a>
              <a href="subject.html#31341">[ subject ]</a>
              <a href="author.html#31341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please see inline comments [[&gt;&gt; Jamohamm: &lt;&lt;]]. Thanks for the response
team.

Thanks,
Jabir
     \|/
    -------
   (  o o  )
oooO---O---Oooonull




On 27/03/17 6:45 pm, &quot;Twisted-Python on behalf of Adi Roiban&quot;
&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A> on behalf of <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt;
wrote:

&gt;<i>On 27 March 2017 at 12:07, jabir Mohammed (jamohamm) &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamohamm at cisco.com</A>&gt;
</I>&gt;<i>wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Its a security issue even you are allowing a weaker key in case of 64
</I>&gt;&gt;<i>bytes
</I>&gt;&gt;<i> deriving only 40 bytes. Let me know how we issue a tracker bug can you
</I>&gt;&gt;<i> please guide me. Since don¹t want someone else to waist effort in
</I>&gt;&gt;<i>debugging
</I>&gt;&gt;<i> the same issue.
</I>&gt;<i>
</I>&gt;<i>Hi Jabir and sorry for the previous misspelling!
</I>&gt;<i>
</I>&gt;<i>There are a few existing bug reports for KEX related tasks...some are
</I>&gt;<i>server side, some are client side
</I>&gt;<i>
</I>&gt;<i><A HREF="https://twistedmatrix.com/trac/search?q=kex">https://twistedmatrix.com/trac/search?q=kex</A>
</I>&gt;<i>
</I>&gt;<i>I think that your bug was already reported (by my) at
</I>&gt;<i><A HREF="https://twistedmatrix.com/trac/ticket/8258">https://twistedmatrix.com/trac/ticket/8258</A>
</I>
[[&gt;&gt; Jamohamm: So this is the bug which is tracking the issue, sounds good
but its 12 months old but still nobody fixed this interesting. &lt;&lt;]]

&gt;<i>
</I>&gt;<i>---------
</I>&gt;<i>
</I>&gt;<i>Regarding the help with this patch.
</I>&gt;<i>
</I>&gt;<i>What have you tried so far?
</I>
[[&gt;&gt; Jamohamm: We recompiled the twisted SSH client code with the fix and
it working fine with OpenSSH server and our server as well, so wanted to
plot the fix in next maintenance release of twisted. &lt;&lt;]]

&gt;<i>Where are you stuck?
</I>
[[&gt;&gt; Jamohamm: Since I didn¹t get any response from the community we
debugged and figured out the issue with coding in twisted SSH client code.
So as of now I am not stuck and we are good with twisted SSH client and
its working fine with this fix. &lt;&lt;]]

&gt;<i>Where/ with what specifically do you need help?
</I>
[[&gt;&gt; Jamohamm: Can we upload the fix and get it committed to twisted,
someone can help me with that. &lt;&lt;]]
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Thanks!
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jabir
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>      \|/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     -------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    (  o o  )
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> oooO---O---Oooonull
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> From: Alex Gaynor &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alex.gaynor at gmail.com</A>&gt;
</I>&gt;&gt;<i> Date: Monday, 27 March 2017 4:34 pm
</I>&gt;&gt;<i> To: jabir mohammed &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamohamm at cisco.com</A>&gt;
</I>&gt;&gt;<i> Cc: Itamar Turner-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt;,
</I>&gt;&gt;<i> &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">security at twistedmatrix.com</A>&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">security at twistedmatrix.com</A>&gt;, Twisted
</I>&gt;&gt;<i>general
</I>&gt;&gt;<i> discussion &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;,
</I>&gt;&gt;<i> &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>&quot;
</I>&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A>&gt;
</I>&gt;&gt;<i> Subject: Re: Regarding the SHA 512 support in twisted.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is not a security issue, so this address isn't the right place for
</I>&gt;&gt;<i>this
</I>&gt;&gt;<i> discussion. Please use the public twisted issue tracker.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Mar 27, 2017 at 5:33 AM, jabir Mohammed (jamohamm)
</I>&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamohamm at cisco.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi Team,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Wanted to bring one code changes which is really required from twisted
</I>&gt;&gt;&gt;<i> side otherwise it is not behaving  as per RFC (rfc4253 Section 7.2),
</I>&gt;&gt;&gt;<i>twisted
</I>&gt;&gt;&gt;<i> is failing when we negotiate any kex algorithm based on SHA1 and we
</I>&gt;&gt;&gt;<i>have MAC
</I>&gt;&gt;&gt;<i> as hmac-sha2-512. The reason for the failure was the below code
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> hashProcessor = _kex.getHashProcessor(self.kexAlg)
</I>&gt;&gt;&gt;<i>         k1 = hashProcessor(sharedSecret + exchangeHash + c +
</I>&gt;&gt;&gt;<i> self.sessionID)
</I>&gt;&gt;&gt;<i>         k1 = k1.digest()
</I>&gt;&gt;&gt;<i>         k2 = hashProcessor(sharedSecret + exchangeHash + k1).digest()
</I>&gt;&gt;&gt;<i> return k1 + k2
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> For SHA512 we need 64 byte key and if the Kex is based on SHA1 then it
</I>&gt;&gt;&gt;<i> will only generate 40 byte key and that induce a failure. So we need to
</I>&gt;&gt;&gt;<i> modify the code as below to make it generic and make it comply with RFC
</I>&gt;&gt;&gt;<i> (rfc4253 Section 7.2). So that twisted can work irrespective of what
</I>&gt;&gt;&gt;<i>kex is
</I>&gt;&gt;&gt;<i> been used. Actual code should plot in is like below
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> hashProcessor = _kex.getHashProcessor(self.kexAlg)
</I>&gt;&gt;&gt;<i>         k1 = hashProcessor(sharedSecret + exchangeHash + c +
</I>&gt;&gt;&gt;<i> self.sessionID)
</I>&gt;&gt;&gt;<i>         k1 = k1.digest()
</I>&gt;&gt;&gt;<i>         k2 = hashProcessor(sharedSecret + exchangeHash + k1).digest()
</I>&gt;&gt;&gt;<i> k3 = hashProcessor(sharedSecret + exchangeHash + k1 + k2).digest()
</I>&gt;&gt;&gt;<i> k4 = hashProcessor(sharedSecret + exchangeHash + k1 + k2 + k3).digest()
</I>&gt;&gt;&gt;<i> return k1 + k2 + k3 + k4
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Can somebody help me to plot this fix so that twisted will work fine
</I>&gt;&gt;&gt;<i>with
</I>&gt;&gt;&gt;<i> all the other servers out there and even make it comply to the RFC.
</I>&gt;&gt;&gt;<i>Thanks
</I>&gt;&gt;&gt;<i> in advance and this will be my first findings on twisted code ;).
</I>&gt;&gt;&gt;<i>Please let
</I>&gt;&gt;&gt;<i> me know in case of any doubt on the same. Code changes should be
</I>&gt;&gt;&gt;<i>plotted in
</I>&gt;&gt;&gt;<i> to  the routine _getKey,  file name is
</I>&gt;&gt;&gt;<i>src/twisted/conch/ssh/transport.py .
</I>&gt;&gt;&gt;<i> Please help me with this commit team.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Jabir
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>      \|/
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     -------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>    (  o o  )
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> oooO---O---Oooonull
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> From: Alex Gaynor &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alex.gaynor at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i> Date: Wednesday, 1 March 2017 9:26 am
</I>&gt;&gt;&gt;<i> To: jabir mohammed &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamohamm at cisco.com</A>&gt;
</I>&gt;&gt;&gt;<i> Cc: Itamar Turner-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt;,
</I>&gt;&gt;&gt;<i> &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">security at twistedmatrix.com</A>&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">security at twistedmatrix.com</A>&gt;
</I>&gt;&gt;&gt;<i> Subject: Re: Regarding the SHA 512 support in twisted.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This doesn't appear to be a security issue. You can file an issue on
</I>&gt;&gt;&gt;<i>the
</I>&gt;&gt;&gt;<i> public tracker.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alex
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Tue, Feb 28, 2017 at 10:54 PM, jabir Mohammed (jamohamm)
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamohamm at cisco.com</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks Alex for the response. In our server we added support of
</I>&gt;&gt;&gt;&gt;<i> HMAC-SHA-512 and HMAC-SHA-256 support for MAC. When we try to
</I>&gt;&gt;&gt;&gt;<i>negotiate this
</I>&gt;&gt;&gt;&gt;<i> hmac with most of the other client like Paramiko, OpenSSH and other
</I>&gt;&gt;&gt;&gt;<i>flavours
</I>&gt;&gt;&gt;&gt;<i> of SSH its working fine. But we are seeing a problem with twisted
</I>&gt;&gt;&gt;&gt;<i>client
</I>&gt;&gt;&gt;&gt;<i> that too only with HMAC-SHA-512. We have a limitation from our side
</I>&gt;&gt;&gt;&gt;<i>to debug
</I>&gt;&gt;&gt;&gt;<i> this since we don¹t know what is happening from the client side. We
</I>&gt;&gt;&gt;&gt;<i>have
</I>&gt;&gt;&gt;&gt;<i> taken our derived key for the HMAC and as well as the input to derive
</I>&gt;&gt;&gt;&gt;<i>the
</I>&gt;&gt;&gt;&gt;<i> MAC using online tools and it matches with whatever we have generated
</I>&gt;&gt;&gt;&gt;<i>but
</I>&gt;&gt;&gt;&gt;<i> whatever is been sent across the other Twisted side differs and we are
</I>&gt;&gt;&gt;&gt;<i> closing the session. This is been tagged critical since most of the
</I>&gt;&gt;&gt;&gt;<i> customers are migrating to Twisted and will be a deployment blocker
</I>&gt;&gt;&gt;&gt;<i>for us.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> What we suspect is the key or the algorithm itself. Please see the
</I>&gt;&gt;&gt;&gt;<i> snippet below
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This is our inmac Key
</I>&gt;&gt;&gt;&gt;<i> ----------------------------
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]:
</I>&gt;&gt;&gt;&gt;<i>ssh_integrity_check:
</I>&gt;&gt;&gt;&gt;<i> inmac.key
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0000 - a5 cb a5 bb
</I>&gt;&gt;&gt;&gt;<i>4c
</I>&gt;&gt;&gt;&gt;<i> 34 a7 bf-95 e9 00 23 1e 09 17 0c   ....L4.....#....
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0010 - 1c e1 3f d9
</I>&gt;&gt;&gt;&gt;<i>a7
</I>&gt;&gt;&gt;&gt;<i> 42 d9 87-54 23 64 16 e5 e2 c3 76   ..?..B..T#d....v
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0020 - 2a bc 53 c6
</I>&gt;&gt;&gt;&gt;<i>85
</I>&gt;&gt;&gt;&gt;<i> 78 81 eb-e4 3e fb f7 cc a3 1f 6e   *.S..x...&gt;.....n
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0030 - d9 a5 0e 73
</I>&gt;&gt;&gt;&gt;<i>d0
</I>&gt;&gt;&gt;&gt;<i> 44 79 a9-d3 19 32 3b 26 92 bb 70   ...s.Dy...2;&amp;..p
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This is our input data to the hmac-sha-512
</I>&gt;&gt;&gt;&gt;<i> -----------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]:
</I>&gt;&gt;&gt;&gt;<i>ssh_integrity_check:
</I>&gt;&gt;&gt;&gt;<i> input.data to HMAC API
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0000 - 00 00 00 03
</I>&gt;&gt;&gt;&gt;<i>00
</I>&gt;&gt;&gt;&gt;<i> 00 00 1c-0a 05 00 00 00 0c 73 73   ..............ss
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0010 - 68 2d 75 73
</I>&gt;&gt;&gt;&gt;<i>65
</I>&gt;&gt;&gt;&gt;<i> 72 61 75-74 68 64 de 66 fb ab 31   h-userauthd.f..1
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0020 - ba 7e 56 e5
</I>&gt;&gt;&gt;&gt;<i> .~V.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The digest which is been sent from the twisted client side(Red)
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i>-----------------------------------------------------------------------
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]:
</I>&gt;&gt;&gt;&gt;<i>ssh_integrity_check:
</I>&gt;&gt;&gt;&gt;<i> digest
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.895 : SSHD_[65795]: 0000 - 95 f7 99 27
</I>&gt;&gt;&gt;&gt;<i>48
</I>&gt;&gt;&gt;&gt;<i> 28 35 da-62 92 0e 51 0f af 62 b1   ...'H(5.b..Q..b.
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0010 - 93 d1 4d 46
</I>&gt;&gt;&gt;&gt;<i>5f
</I>&gt;&gt;&gt;&gt;<i> d9 21 7a-b9 fb 86 b6 6e 00 a3 aa   ..MF_.!z....n...
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0020 - 84 a9 58 60
</I>&gt;&gt;&gt;&gt;<i>5e
</I>&gt;&gt;&gt;&gt;<i> 1c 86 98-b4 1f 00 40 d5 72 aa cf   ..X`^<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">...... at .r..</A>
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0030 - 4b 1d 05 2d
</I>&gt;&gt;&gt;&gt;<i>a4
</I>&gt;&gt;&gt;&gt;<i> 68 96 9c-7b c7 9d 83 1d c2 1d 5b   K..-.h..{ŠŠ[
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The digest which got created from our side using the same key and
</I>&gt;&gt;&gt;&gt;<i>input
</I>&gt;&gt;&gt;&gt;<i> data mentioned above(Green)
</I>&gt;&gt;&gt;&gt;<i> ‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹‹
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0000 - 36 36 5c 6e
</I>&gt;&gt;&gt;&gt;<i>2d
</I>&gt;&gt;&gt;&gt;<i> be f1 d8-ae 4f 5a 72 30 2d 25 c0   66\n-....OZr0-%.
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0010 - 0e e8 d6 96
</I>&gt;&gt;&gt;&gt;<i>6e
</I>&gt;&gt;&gt;&gt;<i> 10 38 af-65 15 51 ff a7 ca 7d b4   ....n.8.e.Q...}.
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0020 - 7c c8 15 b8
</I>&gt;&gt;&gt;&gt;<i>5a
</I>&gt;&gt;&gt;&gt;<i> 9b 5e c4-b5 ac 4c 51 7e de 77 41   |...Z.^...LQ~.wA
</I>&gt;&gt;&gt;&gt;<i> RP/0/RSP0/CPU0:Feb 23 18:12:43.896 : SSHD_[65795]: 0030 - 32 63 61 5e
</I>&gt;&gt;&gt;&gt;<i>f5
</I>&gt;&gt;&gt;&gt;<i> 1a 31 d1-f7 89 d0 0b 11 3c 48 f6   2ca^..1......&lt;H.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If you see the details this is the useauth first packet and we are not
</I>&gt;&gt;&gt;&gt;<i> able to proceed because of the failure. We used online tool to do this
</I>&gt;&gt;&gt;&gt;<i> calculation and we are getting the same output as what we generated
</I>&gt;&gt;&gt;&gt;<i>so the
</I>&gt;&gt;&gt;&gt;<i> one marked as red is creating problem.So the root cause could be
</I>&gt;&gt;&gt;&gt;<i>either the
</I>&gt;&gt;&gt;&gt;<i> key which is been derived or the algorithm so to debug that we need to
</I>&gt;&gt;&gt;&gt;<i> enable details logging from client side. We can share the details with
</I>&gt;&gt;&gt;&gt;<i> respective engineer and show what we are facing. Please help.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Online tool which we used to check our algorithm is: which result in
</I>&gt;&gt;&gt;&gt;<i>same
</I>&gt;&gt;&gt;&gt;<i> MAC marked as green.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://www.liavaag.org/English/SHA-Generator/HMAC/">https://www.liavaag.org/English/SHA-Generator/HMAC/</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Jabir
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>      \|/
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     -------
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>    (  o o  )
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> oooO---O---Oooonull
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> From: Alex Gaynor &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alex.gaynor at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> Date: Wednesday, 1 March 2017 6:39 am
</I>&gt;&gt;&gt;&gt;<i> To: Itamar Turner-Trauring &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> Cc: jabir mohammed &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jamohamm at cisco.com</A>&gt;, &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">security at twistedmatrix.com</A>&quot;
</I>&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">security at twistedmatrix.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> Subject: Re: FW: Regarding the SHA 512 support in twisted.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I think I'm missing some context here, what part of twisted are you
</I>&gt;&gt;&gt;&gt;<i> trying to use SHA-512 for a MAC with? It sounds like Conch? Can you
</I>&gt;&gt;&gt;&gt;<i>show how
</I>&gt;&gt;&gt;&gt;<i> I could reproduce the problem?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Alex
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Tue, Feb 28, 2017 at 8:06 PM, Itamar Turner-Trauring
</I>&gt;&gt;&gt;&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt; wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Forwarding on to security contact to see if they think it's a
</I>&gt;&gt;&gt;&gt;&gt;<i>security
</I>&gt;&gt;&gt;&gt;&gt;<i> problem; otherwise you can probably just file a normal ticket.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On Tue, Feb 28, 2017, at 05:01 AM, jabir Mohammed (jamohamm) wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi Team,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Wanted to cross check on SHA 512 algorithm as MAC while using
</I>&gt;&gt;&gt;&gt;&gt;<i>twisted.
</I>&gt;&gt;&gt;&gt;&gt;<i> Few of our customers started using Twisted and even we are trying to
</I>&gt;&gt;&gt;&gt;&gt;<i> incorporate some scripts via twisted client. But what we have
</I>&gt;&gt;&gt;&gt;&gt;<i>noticed is
</I>&gt;&gt;&gt;&gt;&gt;<i> that when we negotiate SHA 512 MAC with twisted we always get a
</I>&gt;&gt;&gt;&gt;&gt;<i>failure and
</I>&gt;&gt;&gt;&gt;&gt;<i> other MAC algorithms are working fine with twisted. So wanted to
</I>&gt;&gt;&gt;&gt;&gt;<i>cross check
</I>&gt;&gt;&gt;&gt;&gt;<i> do we have any bug or any issue with SHA 512 and twisted and how we
</I>&gt;&gt;&gt;&gt;&gt;<i>can
</I>&gt;&gt;&gt;&gt;&gt;<i> debug this from twisted side.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> We checked the same with other OpenSSH client and even paramiko
</I>&gt;&gt;&gt;&gt;&gt;<i>things
</I>&gt;&gt;&gt;&gt;&gt;<i> work perfectly fine so wanted to debug further from the twisted
</I>&gt;&gt;&gt;&gt;&gt;<i>side. We
</I>&gt;&gt;&gt;&gt;&gt;<i> checked with the same derived key and the output whatever we got
</I>&gt;&gt;&gt;&gt;&gt;<i>from SHA
</I>&gt;&gt;&gt;&gt;&gt;<i> 512 is what we are getting from the online tool so we suspect
</I>&gt;&gt;&gt;&gt;&gt;<i>something to
</I>&gt;&gt;&gt;&gt;&gt;<i> do with the key or hash algorithm from the other side.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> We used the twisted 16.6.0 version for testing, thanks in advance for
</I>&gt;&gt;&gt;&gt;&gt;<i> looking in to this email.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Jabir
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>      \|/
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>     -------
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>    (  o o  )
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> oooO---O---Oooonull
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;&gt;<i> Itamar Turner-Trauring
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;&gt;<i> &quot;I disapprove of what you say, but I will defend to the death your
</I>&gt;&gt;&gt;&gt;<i>right
</I>&gt;&gt;&gt;&gt;<i> to say it.&quot; -- Evelyn Beatrice Hall (summarizing Voltaire)
</I>&gt;&gt;&gt;&gt;<i> &quot;The people's good is the highest law.&quot; -- Cicero
</I>&gt;&gt;&gt;&gt;<i> GPG Key fingerprint: D1B3 ADC0 E023 8CA6
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> &quot;I disapprove of what you say, but I will defend to the death your
</I>&gt;&gt;&gt;<i>right
</I>&gt;&gt;&gt;<i> to say it.&quot; -- Evelyn Beatrice Hall (summarizing Voltaire)
</I>&gt;&gt;&gt;<i> &quot;The people's good is the highest law.&quot; -- Cicero
</I>&gt;&gt;&gt;<i> GPG Key fingerprint: D1B3 ADC0 E023 8CA6
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> &quot;I disapprove of what you say, but I will defend to the death your
</I>&gt;&gt;<i>right to
</I>&gt;&gt;<i> say it.&quot; -- Evelyn Beatrice Hall (summarizing Voltaire)
</I>&gt;&gt;<i> &quot;The people's good is the highest law.&quot; -- Cicero
</I>&gt;&gt;<i> GPG Key fingerprint: D1B3 ADC0 E023 8CA6
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>-- 
</I>&gt;<i>Adi Roiban
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-Python mailing list
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031340.html">[Twisted-Python] Regarding the SHA 512 support in twisted.
</A></li>
	<LI>Next message (by thread): <A HREF="031342.html">[Twisted-Python] Regarding the SHA 512 support in twisted.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31341">[ date ]</a>
              <a href="thread.html#31341">[ thread ]</a>
              <a href="subject.html#31341">[ subject ]</a>
              <a href="author.html#31341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
