<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20HTTP%20Agent%20persistent%20connections%20not%20closed%0A%20for%20some%20HTTPS%20sites&In-Reply-To=%3C9A0001A3-2E75-476E-88A0-AD50CBBC54C3%40lukasa.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063758.html">
   <LINK REL="Next"  HREF="063768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites</H1>
    <B>Cory Benfield</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20HTTP%20Agent%20persistent%20connections%20not%20closed%0A%20for%20some%20HTTPS%20sites&In-Reply-To=%3C9A0001A3-2E75-476E-88A0-AD50CBBC54C3%40lukasa.co.uk%3E"
       TITLE="[Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites">cory at lukasa.co.uk
       </A><BR>
    <I>Tue Mar  7 02:31:11 MST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063758.html">[Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites
</A></li>
        <LI>Next message (by thread): <A HREF="063768.html">[Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63764">[ date ]</a>
              <a href="thread.html#63764">[ thread ]</a>
              <a href="subject.html#63764">[ subject ]</a>
              <a href="author.html#63764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 6 Mar 2017, at 09:05, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I am not sure about which code are we talking here.
</I>&gt;<i> The specific HTTP11ClientProtocol which will fix only the HTTP client
</I>&gt;<i> part or the generic TLSMemoryBIOProtocol code which might fix any TLS
</I>&gt;<i> connection?
</I>
Iâ€™m talking about the fact that calling TLSMemoryBIOProtocol.loseConnection may not ever actually drop the underlying FD is the surprising part of the code. We had to work around it in the server side by adding a timeout after loseConnection is called to end up calling abortConnection.

Cory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20170307/0bb3b0a8/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063758.html">[Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites
</A></li>
	<LI>Next message (by thread): <A HREF="063768.html">[Twisted-Python] HTTP Agent persistent connections not closed for some HTTPS sites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63764">[ date ]</a>
              <a href="thread.html#63764">[ thread ]</a>
              <a href="subject.html#63764">[ subject ]</a>
              <a href="author.html#63764">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
