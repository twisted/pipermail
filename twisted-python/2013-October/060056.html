<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] serial communication - getting started
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20serial%20communication%20-%20getting%20started&In-Reply-To=%3CCAH7aJjJuSen36Vetx%2B30Nh4GogzdYX%3DOcDJaMfnasx1jbm0TOw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="060048.html">
   <LINK REL="Next"  HREF="027588.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] serial communication - getting started</H1>
    <B>Robert Voigtländer</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20serial%20communication%20-%20getting%20started&In-Reply-To=%3CCAH7aJjJuSen36Vetx%2B30Nh4GogzdYX%3DOcDJaMfnasx1jbm0TOw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] serial communication - getting started">r.voigtlaender at gmail.com
       </A><BR>
    <I>Tue Oct 22 00:25:00 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="060048.html">[Twisted-Python] serial communication - getting started
</A></li>
        <LI>Next message (by thread): <A HREF="027588.html">[Twisted-Python] Flow-control for Pipes / Unix Domains Sockets?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60056">[ date ]</a>
              <a href="thread.html#60056">[ thread ]</a>
              <a href="subject.html#60056">[ subject ]</a>
              <a href="author.html#60056">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This works. Thanks a lot.

So sending and receiving works .. with low CPU usage.
I need to dig into twisted....

As a Python starter I want something like serial.send usabel in the main
loop and serial.receive to work in the background and only trigger
something once data has been received.
Obviously it is possible with python. Just have to find out how :-)

Thanks for the support so far.

Robert


On 21 October 2013 22:21, &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:

&gt;<i> On 07:42 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ltaylor.volks at gmail.com</A> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Oct 21, 2013, at 6:57 AM, Robert Voigtländer wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for the fast reply.
</I>&gt;&gt;&gt;<i> I don't yet understand your answer. I may have to dig more into Python.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 21 October 2013 13:45, Itamar Turner-Trauring &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">itamar at itamarst.org</A>&gt;
</I>&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;snip guidance to avoid threads&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 3. A reasonable place for the write() might be in your Protocol's
</I>&gt;&gt;&gt;<i> connectionMade method.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The Protocol has access to a .transport attribute, which is the
</I>&gt;&gt;<i> SerialPort() instance.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Therefore, you can write to the serial port (the transport) from within
</I>&gt;&gt;<i> your protocol:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> class Echo(LineReceiver):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    def connectionMade(self):
</I>&gt;&gt;<i>        self.transport.write('HELLO\n'**)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    def lineReceived(self, line):
</I>&gt;&gt;<i>        self.transport.write(line + '\n')
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Additionally, since the serial transport tries hard to look just like a
</I>&gt;<i> tcp transport or an ssl transport, the generic protocol code in
</I>&gt;<i> LineReceiver.sendLine will work just fine with it.  So in addition to using
</I>&gt;<i> the `lineReceived` callback to handle lines that arrive you can use
</I>&gt;<i> `sendLine` to write lines out to the serial port:
</I>&gt;<i>
</I>&gt;<i>    class Echo(LineReceiver):
</I>&gt;<i>        delimiter = b&quot;\n&quot;
</I>&gt;<i>
</I>&gt;<i>        def connectionMade(self):
</I>&gt;<i>            self.sendLine(b&quot;HELLO&quot;)
</I>&gt;<i>
</I>&gt;<i>        def lineReceived(self, line):
</I>&gt;<i>            self.sendLine(line)
</I>&gt;<i>
</I>&gt;<i> This is part of the power of the transport/protocol separation: reusable
</I>&gt;<i> protocol logic. :)
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The connectionMade method will be called once the transport (the
</I>&gt;&gt;<i> SerialPort instance) is ready (the serial port is open), making it an
</I>&gt;&gt;<i> appropriate place to kick off an init sequence or similar.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Lucas
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ______________________________**_________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.</A>**com &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-**bin/mailman/listinfo/twisted-**python&lt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-**bin/mailman/listinfo/twisted-**python&lt;http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>&gt;
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20131022/486ee7ae/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="060048.html">[Twisted-Python] serial communication - getting started
</A></li>
	<LI>Next message (by thread): <A HREF="027588.html">[Twisted-Python] Flow-control for Pipes / Unix Domains Sockets?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60056">[ date ]</a>
              <a href="thread.html#60056">[ thread ]</a>
              <a href="subject.html#60056">[ subject ]</a>
              <a href="author.html#60056">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
