<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Garbage in logfiles?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Garbage%20in%20logfiles%3F&In-Reply-To=%3CCAPkRfURUVATCZr2-e2nLKaUpN4U3GK-kgHoLnP-a_1EUAcG%3DMg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027568.html">
   <LINK REL="Next"  HREF="027570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Garbage in logfiles?</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Garbage%20in%20logfiles%3F&In-Reply-To=%3CCAPkRfURUVATCZr2-e2nLKaUpN4U3GK-kgHoLnP-a_1EUAcG%3DMg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Garbage in logfiles?">radix at twistedmatrix.com
       </A><BR>
    <I>Wed Oct 16 12:19:07 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027568.html">[Twisted-Python] Garbage in logfiles?
</A></li>
        <LI>Next message: <A HREF="027570.html">[Twisted-Python] Garbage in logfiles?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27569">[ date ]</a>
              <a href="thread.html#27569">[ thread ]</a>
              <a href="subject.html#27569">[ subject ]</a>
              <a href="author.html#27569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Oct 16, 2013 at 1:12 PM, Conor Sayres &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sayresc at gmail.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Oct 16, 2013, at 10:44 AM, Christopher Armstrong &lt;
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">radix at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> On Wed, Oct 16, 2013 at 12:33 PM, Conor Sayres &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sayresc at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm working for an astro observatory and we are upgrading our telescope
</I>&gt;&gt;<i> control software.  We are swapping to twisted under the hood, and I have
</I>&gt;&gt;<i> run into an issue regarding logging.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have set up twisted logging to record all communication between our
</I>&gt;&gt;<i> devices.  When we simulate our system with a high frequency log rollover
</I>&gt;&gt;<i> rate (~5 seconds), many of the logs contain only garbage.  Here is an
</I>&gt;&gt;<i> example of a few lines in a given bad log file:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 3230 3133 2d31 302d 3136 2031 303a 3131
</I>&gt;&gt;<i> 3a34 352d 3037 3030 205b 2d5d 2044 6576
</I>&gt;&gt;<i> 436d 6428 5354 4154 5553 290a 3230 3133
</I>&gt;&gt;<i> 2d31 302d 3136 2031 303a 3131 3a34 352d
</I>&gt;&gt;<i> 3037 3030 205b 2d5d 2044 6576 436d 6428
</I>&gt;&gt;<i> 5354 4154 5553 290a 3230 3133 2d31 302d
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Here is an example of a few lines from a good log file:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [_SocketProtocol,client] Galil Reply(XQ#STATUS)
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [-] Galil Reply(: 1,  1,  1,  1,  1 axis homed)
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [-] To All Users(1 1 i axisHomed=1, 1, 1, 1, 1)
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [-] Galil Reply(000000000, 000000000, 000000000,
</I>&gt;&gt;<i> 000000000, 000000000 commanded position)
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [-] To All Users(1 1 i cmdMount=0, 0, 0, 0, 0)
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [_SocketProtocol,client] MirrorCtrl Reply(1 1 i
</I>&gt;&gt;<i> axisHomed=1, 1, 1, 1, 1)
</I>&gt;&gt;<i> 2013-10-16 10:11:39-0700 [_SocketProtocol,client] Galil Reply(XQ#STATUS)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I haven't been able to reproduce the problem in a simpler framework than
</I>&gt;&gt;<i> our simulation.  I am triggering the rollover by directly calling
</I>&gt;&gt;<i> LogFile.rollover on a timer.  The problem also exists if I define a small
</I>&gt;&gt;<i> file size limit for automatic rollover and let twisted do it automatically.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't think there's any method named &quot;rollover&quot; anywhere in Twisted (in
</I>&gt;<i> fact, I just confirmed this with grep).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm sorry, the method is rotate my mistake
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Your message is pretty vague and context-free; could you try to add more
</I>&gt;<i> necessary detail?
</I>&gt;<i>
</I>&gt;<i> Is the problem with the output you're seeing the *content* of the
</I>&gt;<i> numbers/letters, or just the fact that they're appearing at all? Maybe
</I>&gt;<i> there's relevant output before or after that block of numbers/letters? Did
</I>&gt;<i> you leave out the timestamp prefixes when pasting to this email, or is
</I>&gt;<i> there really no timestamp prefixing the lines of that output?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The bad log files are 100% full of non-relevant output.  They contain no
</I>&gt;<i> time stamps, solely lines of 4 character blocks (hex?).  They should
</I>&gt;<i> contain information like the example of a good log I showed above.
</I>&gt;<i>
</I>&gt;<i> The good log files are 100% full of relevant output, no corruption.  They
</I>&gt;<i> contain the timestamps (as they should).
</I>&gt;<i>
</I>&gt;<i> It seems somewhat random whether or not a given log file will be good or
</I>&gt;<i> bad.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I don't know where those numbers/letters could be coming from. Does your
</I>&gt;<i> code (or any libraries you use) ever print to stdout? By default, Twisted
</I>&gt;<i> redirects all prints (and any writing to sys.stdout) to the log file.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The log was configured to NOT capture print statements to stdout.
</I>&gt;<i>
</I>


The only other thing I can think of (without having a reproducible example
of the problem in a self-contained executable example) is that some other
program or code is opening the same file and writing garbage to it. Maybe
you accidentally pass the location of the log file somewhere that wants a
file to write to. It's unlikely that twisted's logging code itself would
write unprefixed lines without a custom observer doing so.


&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Christopher Armstrong
</I>&gt;<i> <A HREF="http://radix.twistedmatrix.com/">http://radix.twistedmatrix.com/</A>
</I>&gt;<i> <A HREF="http://planet-if.com/">http://planet-if.com/</A>
</I>&gt;<i>
</I>&gt;<i>  _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Christopher Armstrong
<A HREF="http://radix.twistedmatrix.com/">http://radix.twistedmatrix.com/</A>
<A HREF="http://planet-if.com/">http://planet-if.com/</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20131016/bb3b76ae/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20131016/bb3b76ae/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027568.html">[Twisted-Python] Garbage in logfiles?
</A></li>
	<LI>Next message: <A HREF="027570.html">[Twisted-Python] Garbage in logfiles?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27569">[ date ]</a>
              <a href="thread.html#27569">[ thread ]</a>
              <a href="subject.html#27569">[ subject ]</a>
              <a href="author.html#27569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
