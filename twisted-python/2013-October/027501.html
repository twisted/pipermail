<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted linux netfilter_log protocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20linux%20netfilter_log%20protocol&In-Reply-To=%3CCAFN1edpMv%3D85Z%3D3UpQOnRX3v50dRA2gG%2B%3Dwt1_Dy8hh9GciU9A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059969.html">
   <LINK REL="Next"  HREF="059963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted linux netfilter_log protocol</H1>
    <B>David Stainton</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted%20linux%20netfilter_log%20protocol&In-Reply-To=%3CCAFN1edpMv%3D85Z%3D3UpQOnRX3v50dRA2gG%2B%3Dwt1_Dy8hh9GciU9A%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] twisted linux netfilter_log protocol">dstainton415 at gmail.com
       </A><BR>
    <I>Wed Oct  2 00:14:26 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059969.html">[Twisted-Python] Conch - Why does one piece of code &quot;fail&quot; while another works
</A></li>
        <LI>Next message (by thread): <A HREF="059963.html">[Twisted-Python] twisted linux netfilter_log protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27501">[ date ]</a>
              <a href="thread.html#27501">[ thread ]</a>
              <a href="subject.html#27501">[ subject ]</a>
              <a href="author.html#27501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am wondering how I should combine various twisted interfaces
in a way that makes sense. It probably shows here... that I'm new to
twisted.

The Linux iptables can log packets to the netfilter_log which can give
access to user space.
I wrote a simple twisted Reader (IReadDescriptor implementation) that is
working functional code...
<A HREF="https://gist.github.com/david415/6789612">https://gist.github.com/david415/6789612</A>

But since these are packets it returns... should I implement a &quot;read only
Protocol&quot;?
The protocol's dataReceive() method could be called from the NFLogReader's
doRead() method.
Does this mean that NFLogReader would be responsible for calling
buildProtocol to construct the NFLogProtocol?
In the normal Twisted examples the buildProtocol seems to be called from
the react loop..
Should I pass the protocol factory and the reader to the service?

If I want to drop privileges right after retrieving the filedescriptor for
netfilter_log, shall I use a Twisted Service/Application to drop the root
privs to a non-superuser?
Should the privileges be dropped by the privilegedStartService() method?
The manual says that method is for preparing to drop services...

What I want out of all of this is the most high performance and general
solution to utilizing netfilter_log in twisted...


David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20131001/f6c5e33d/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20131001/f6c5e33d/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059969.html">[Twisted-Python] Conch - Why does one piece of code &quot;fail&quot; while another works
</A></li>
	<LI>Next message (by thread): <A HREF="059963.html">[Twisted-Python] twisted linux netfilter_log protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27501">[ date ]</a>
              <a href="thread.html#27501">[ thread ]</a>
              <a href="subject.html#27501">[ subject ]</a>
              <a href="author.html#27501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
