<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question about Writing a Stackless Friendly	Reactor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20about%20Writing%20a%20Stackless%20Friendly%0A%09Reactor&In-Reply-To=E1HbYko-0004OB-02%40pyramid.twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015221.html">
   <LINK REL="Next"  HREF="015225.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question about Writing a Stackless Friendly	Reactor</H1>
    <B>Andrew Francis</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20about%20Writing%20a%20Stackless%20Friendly%0A%09Reactor&In-Reply-To=E1HbYko-0004OB-02%40pyramid.twistedmatrix.com"
       TITLE="[Twisted-Python] Question about Writing a Stackless Friendly	Reactor">andrewfr_ice at yahoo.com
       </A><BR>
    <I>Wed Apr 11 08:56:57 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015221.html">[Twisted-Python] Re: Wrapping functions that return deferreds
</A></li>
        <LI>Next message: <A HREF="015225.html">[Twisted-Python] Threadpool analysis?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15219">[ date ]</a>
              <a href="thread.html#15219">[ thread ]</a>
              <a href="subject.html#15219">[ subject ]</a>
              <a href="author.html#15219">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Glyph:

&gt;<i>I disagree.  Separate reactor implementations are for
</I>&gt;<i>different OS multiplexing mechanisms.
</I>&gt;<i>stackless.schedule() should *not* be called 
</I>&gt;<i>&quot;whenever possible&quot;, but rather, whenever stackless
</I>&gt;<i>tasks have something to do.
</I>
To the best of my understanding, if one is using
Stackless cooperative scheduling, a tasklet should
yield, that is, call schedule() when it is finished
doing work. Otherwise, other tasklets that could run,
will not get an opportunity.

In a Stackless application, the reactor is running in
a tasklet. Leaving aside the issue of channels, if the
reactor does not call schedule(), other tasklets will
not run. 

For most applications, the Twisted Reactor blocking
the application is not an issue since the tasklets
have nothing to do if they do not have input  In the
case of my application, the blocking is an issue...

That said, we can write simple programmes to
illustrate this (or fix my first example). For
instance, I illustrate the aforementioned on the
Stackless Google code page.

<A HREF="http://code.google.com/p/stacklessexamples/wiki/StacklessTwisted">http://code.google.com/p/stacklessexamples/wiki/StacklessTwisted</A>

In the first example, the tick tasklet will print only
after the request handler has received input. In the
second threaded example, the tick tasklet will start
printing immediately. 

I am looking for ways of getting the behaviour of the
second example without using threads (or Twisted tasks
that make schedule() calls)

&gt;<i>Don't implement a reactor :).
</I>
I think subclassing SelectorReactor may give me much
of what I want. I suspect this is an unTwisted way of
doing things. I am still experimenting with
approaches.

&gt;<i>I recently replied to a very similar question in a
</I>&gt;<i>different thread:
</I>
&gt;<i><A HREF="http://article.gmane.org/gmane.comp.python.twisted/13946">http://article.gmane.org/gmane.comp.python.twisted/13946</A>
</I>
&gt;<i>What about my answer there was not clear?
</I>
I don't agree with a part of the premise. That aside,
I tried using reactor.callLater(). It didn't help.
Perhaps I am using it wrong. 

Cheers,
Andrew




       
____________________________________________________________________________________
Need Mail bonding?
Go to the Yahoo! Mail Q&amp;A for great tips from Yahoo! Answers users.
<A HREF="http://answers.yahoo.com/dir/?link=list&amp;sid=396546091">http://answers.yahoo.com/dir/?link=list&amp;sid=396546091</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015221.html">[Twisted-Python] Re: Wrapping functions that return deferreds
</A></li>
	<LI>Next message: <A HREF="015225.html">[Twisted-Python] Threadpool analysis?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15219">[ date ]</a>
              <a href="thread.html#15219">[ thread ]</a>
              <a href="subject.html#15219">[ subject ]</a>
              <a href="author.html#15219">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
