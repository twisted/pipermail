<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] epoll reactor problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20epoll%20reactor%20problems&In-Reply-To=00c801c77c68%248a13e0b0%249e3ba210%24%40com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015228.html">
   <LINK REL="Next"  HREF="015237.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] epoll reactor problems</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20epoll%20reactor%20problems&In-Reply-To=00c801c77c68%248a13e0b0%249e3ba210%24%40com"
       TITLE="[Twisted-Python] epoll reactor problems">andrew-twisted at puzzling.org
       </A><BR>
    <I>Wed Apr 11 21:00:13 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015228.html">[Twisted-Python] epoll reactor problems
</A></li>
        <LI>Next message: <A HREF="015237.html">[Twisted-Python] epoll reactor problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15234">[ date ]</a>
              <a href="thread.html#15234">[ thread ]</a>
              <a href="subject.html#15234">[ subject ]</a>
              <a href="author.html#15234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alec Matusis wrote:
&gt;<i> I am now suspecting there is something strange with Twisted 2.5:
</I>&gt;<i> 
</I>&gt;<i> Both servers now show 99.9% CPU using top:
</I>
It would be nice to know where in the code it is spending all that time.

I would consider installing the debug symbols for python, and getting a C and
python backtrace with gdb.  (use the .gdbinit file from
<A HREF="http://svn.python.org/view/python/trunk/Misc/gdbinit?rev=39492&amp;view=auto">http://svn.python.org/view/python/trunk/Misc/gdbinit?rev=39492&amp;view=auto</A> to get
the &quot;pystack&quot; gdb command, you may need the patch to it from
<A HREF="http://jcalderone.livejournal.com/28224.html">http://jcalderone.livejournal.com/28224.html</A> too).

Or maybe even install a simple SIGUSR1 signal handler than dumps a backtrace,
and send SIGUSR1 to your process repeatedly while it's at 99.9% CPU.  Or a
SIGUSR1 handler to install a trace hook (like the twistd --spew option does).

The idea either way is to find out by random sampling what code is executing;
presumably it's doing the same redundant work over and over, so it shouldn't
take many samples to find one code path that is occurring frequently.

Then hopefully that extra information will hint at what the problem is.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015228.html">[Twisted-Python] epoll reactor problems
</A></li>
	<LI>Next message: <A HREF="015237.html">[Twisted-Python] epoll reactor problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15234">[ date ]</a>
              <a href="thread.html#15234">[ thread ]</a>
              <a href="subject.html#15234">[ subject ]</a>
              <a href="author.html#15234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
