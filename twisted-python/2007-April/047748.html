<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] The Trial of the DirtyReactorError
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20The%20Trial%20of%20the%20DirtyReactorError&In-Reply-To=%3CB88241EF-A5CF-4E90-A972-F3250E7E6ABD%40zgroupplc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047762.html">
   <LINK REL="Next"  HREF="047751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] The Trial of the DirtyReactorError</H1>
    <B>Matthew Glubb</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20The%20Trial%20of%20the%20DirtyReactorError&In-Reply-To=%3CB88241EF-A5CF-4E90-A972-F3250E7E6ABD%40zgroupplc.com%3E"
       TITLE="[Twisted-Python] The Trial of the DirtyReactorError">matt at zgroupplc.com
       </A><BR>
    <I>Thu Apr 12 10:53:25 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047762.html">[Twisted-Python] Implementing an event manager in twisted
</A></li>
        <LI>Next message (by thread): <A HREF="047751.html">[Twisted-Python] The Trial of the DirtyReactorError
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47748">[ date ]</a>
              <a href="thread.html#47748">[ thread ]</a>
              <a href="subject.html#47748">[ subject ]</a>
              <a href="author.html#47748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi All,

I have to say that I am largely getting along famously with Twisted  
(and Python) now.

I have started writing unit tests for my application and when I run  
them using trial I sometimes get DirtyReactorErrors ('reactor left in  
unclean state'). This is a nice error. It tells me that I am not  
shutting down resources correctly which would otherwise be left  
hanging around and be difficult to debug.

I understand why this is occurring, its a simple matter of calling  
tcp.Port.stopListening() to suppress the error. However, I am more  
concerned with learning about where the most appropriate place to run  
this routine would be. I am not happy about running it in the unit  
test as it doesn't solve the problem, it just suppresses it. I can't  
seem to find an easy way to stop a port from listening from within a  
ServerFactory. Should I be writing a class that wraps the  
ServerFactory to run tcp.Port.stopListening() at the appropriate time?

Please bear in mind that I am creating multiple 'one-shot' servers  
that are always shut down as soon as they have done their business. I  
am guessing that the stopService methods would be more appropriate  
for a conventional server that serves multiple clients / requests.

Your thoughts?

Thanks a lot for your time :)

Matt


m a t t h e w   g l u b b

________________________________________________________________________
Z Group PLC

Tel: +44 (0) 8700 111 173
Fax: +44 (0) 8707 051 393
Txt: +44 (0) 7800 140 877
Web: &lt;<A HREF="http://www.zgroupplc.com/">http://www.zgroupplc.com/</A>&gt;

This  email  and  any  files  transmitted  with it are  confidential and
intended solely for the use of the individual or entity to whom they are
addressed.  The opinions  expressed in this mail are those of the author
and do not necessarily  represent the views of the company.  If you have
received this email in error please notify &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">service at zgroupplc.com</A>&gt;



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGHmQKyI6MkdKPngkRAlkwAJ4zebpjOsfItDtqIaRJbj0kyN7jhACdHvYC
17YRmuZNefQfCxCesMStUWI=
=dh4Z
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047762.html">[Twisted-Python] Implementing an event manager in twisted
</A></li>
	<LI>Next message (by thread): <A HREF="047751.html">[Twisted-Python] The Trial of the DirtyReactorError
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47748">[ date ]</a>
              <a href="thread.html#47748">[ thread ]</a>
              <a href="subject.html#47748">[ subject ]</a>
              <a href="author.html#47748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
