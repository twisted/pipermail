<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] 3 questions about async,	threading and dynamic protocol selection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%203%20questions%20about%20async%2C%0A%09threading%20and%20dynamic%20protocol%20selection&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015247.html">
   <LINK REL="Next"  HREF="015142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] 3 questions about async,	threading and dynamic protocol selection</H1>
    <B>&#29980;&#29916;</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%203%20questions%20about%20async%2C%0A%09threading%20and%20dynamic%20protocol%20selection&In-Reply-To="
       TITLE="[Twisted-Python] 3 questions about async,	threading and dynamic protocol selection">littlesweetmelon at gmail.com
       </A><BR>
    <I>Wed Apr  4 06:11:04 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015247.html">[Twisted-Python] Foolscap-0.1.1 released
</A></li>
        <LI>Next message: <A HREF="015142.html">[Twisted-Python] 3 questions about async,	threading and dynamic protocol selection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15140">[ date ]</a>
              <a href="thread.html#15140">[ thread ]</a>
              <a href="subject.html#15140">[ subject ]</a>
              <a href="author.html#15140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Q1: How to determine a function is 'blocking action' or not?
Any function needs CPU times. Indeed, a computational-intensive
function is blocking action. But how small/fast function can be
classified as non-blocking? Twist requires all user functions to be
non-blocked. If reactor calls a blocking function, what will happen?
In my mind, reactor maintains a command queue internally (just like
windows message queue). The blocking function only postpones the
execution of other queued functions, but it does not break the logic
of the program. Is that right?

Q2: Today when I go through the twist document, I am confused about
the threading problem in reactor.
What is the different between 'reactor.callFromThread' and a plain
call in reactor loop?
def callFromThread(f):
            self.threadCallQueue.append((f, args, kw))
            self.wakeUp()
It seems equivalent to reactor.callLater(0, f...).
What is the real circumstance for calling callFromThread?
Further more, how to determine a function is thread-safe in python?
Why the twist doc says: &quot;writing data to a transport from a protocol
is not thread-safe.&quot;?

Q3: In my application, I need a facility to dynamically select a
protocol to communicate with the server.
Eg: When connected, the server sent a string to client to indicate the
version of protocol it used. Then, the client can load the proper
protocol. But I don't know how to implement this. A 'Factory' can only
create one kind of 'Protocol', and it seems the instances of
'Protocol' cannot share the connection (Transport object) to a server.
Could you give me some clues?

Thank you.

--
ShenLei


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015247.html">[Twisted-Python] Foolscap-0.1.1 released
</A></li>
	<LI>Next message: <A HREF="015142.html">[Twisted-Python] 3 questions about async,	threading and dynamic protocol selection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15140">[ date ]</a>
              <a href="thread.html#15140">[ thread ]</a>
              <a href="subject.html#15140">[ subject ]</a>
              <a href="author.html#15140">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
