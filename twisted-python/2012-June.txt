From meejah at meejah.ca  Fri Jun  1 13:53:13 2012
From: meejah at meejah.ca (meejah)
Date: Fri, 01 Jun 2012 11:53:13 -0600
Subject: [Twisted-Python] txtorcon 0.2
Message-ID: <E1SaW2E-0004rD-2e@panthalassa.cg.shawcable.net>



-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


txtorcon is a Twisted-based asynchronous Tor control protocol
implementation. I have tagged txtorcon 0.2, which adds:

 . incremental parsing;
 . faster TorState startup;
 . SAFECOOKIE support;
 . several bug fixes;
 . options to circuit_failure_rates.py example to make it actually-useful;
 . include built documentation + sources in tarball;
 . include tests in tarball;
 . improved logging;
 . a few patches from mmaker and kneufeld

docs: http://readthedocs.org/docs/txtorcon/en/latest/
code: https://github.com/meejah/txtorcon
      https://timaq4ygg2iegci7.onion/

Thanks,

- --
mike
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEcBAEBAgAGBQJPyQHXAAoJEMJgKAMSgGmn7lUH/2GRMQmXhlZKtPRsZcwACHOp
dm90QMXFAXiYxueGn2S6/Vt0N7ORTrkI2ttz7NXV5EvUr2u5uJbdVOCgI5rj4M/z
CO/hoL8NVw43hNZjF/Hec6lhC8pPI8iRGA329QJKKBn5n/bRUHhHtaCAQcGsSESQ
ue+pvEYHzz6QOAhr7hfJ5zDHVl5++U6BDr4t/O6tmj1bEtwrFXNhX6E7C87rScFa
+X3pt6+tGk84+1j+BLeEenbW6iD8RIwxsanknGMGZRjzMSDh3oH8jZnUpBzEHouk
V2hz9ZjZSXBvGF7/UMyjVHbDEX+kEMsS/9Iv1tHBXCaO9JyCT+UgB6ojWQFsojA=
=2vvP
-----END PGP SIGNATURE-----


From exarkun at twistedmatrix.com  Sun Jun  3 00:05:35 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 03 Jun 2012 04:05:35 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1338696335.01.194181089@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120603/dece07cb/attachment.htm 

From therve at free.fr  Tue Jun  5 06:26:05 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Tue, 05 Jun 2012 12:26:05 +0200
Subject: [Twisted-Python] Twisted 12.1.0 released
Message-ID: <4FCDDEBD.2070503@free.fr>

On behalf of Twisted Matrix Laboratories, I am pleased to announce the
release of Twisted 12.1.

107 tickets are closed by this release, with the following highlights:

 * The revival of the kqueue reactor for BSD platforms.

 * epoll is now the default reactor under Linux after a fix to handle
files on stdin/stdout.

 * New reactors supporting GTK3 and GObject-Introspection.

 * Several enhancements regarding file descriptors passing: systemd
support for servers, ability to send and receive file descriptors for
IReactorUNIX and an AMP argument using that feature.

 * Support for IPv6 literals in connectTCP.

 * Persistent connections support for the new HTTP client.

This is the last Twisted release supporting Python 2.5.

For more information, see the NEWS file here:

 http://twistedmatrix.com/Releases/Twisted/12.1/NEWS.txt


Download it now from:

 http://pypi.python.org/packages/source/T/Twisted/Twisted-12.1.0.tar.bz2 or

http://pypi.python.org/packages/2.5/T/Twisted/Twisted-12.1.0.win32-py2.5.msi
or

http://pypi.python.org/packages/2.6/T/Twisted/Twisted-12.1.0.win32-py2.6.msi
or

http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.1.0.win32-py2.7.msi


Thanks to the supporters of Twisted via the Software Freedom Conservancy
and to the many contributors for this release.

-- 
Thomas


From glyph at twistedmatrix.com  Wed Jun  6 00:40:02 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 5 Jun 2012 21:40:02 -0700
Subject: [Twisted-Python] Twisted 12.1.0 released
In-Reply-To: <4FCDDEBD.2070503@free.fr>
References: <4FCDDEBD.2070503@free.fr>
Message-ID: <FD637FBD-7160-41E1-ABE4-7FF2B91703E3@twistedmatrix.com>


Le Jun 5, 2012 ? 3:26 AM, Thomas Herv? a ?crit :

> On behalf of Twisted Matrix Laboratories, I am pleased to announce the
> release of Twisted 12.1.

Hooray!!!

Thanks to everyone who worked on this impressive array of features, and thanks Therve for going through the slog of doing yet another release!  Seems to be coming together like clockwork :).

-glyph

From kmcintyre at greenchargenet.com  Wed Jun  6 15:58:37 2012
From: kmcintyre at greenchargenet.com (Kevin McIntyre)
Date: Wed, 6 Jun 2012 12:58:37 -0700
Subject: [Twisted-Python] DeprecationWarning and PotentialZombieWarning
Message-ID: <CAFvbmckFUdRtnG4DNOfVLUZp1pZPDo_TLJQWuNDJRU=NSQfwUg@mail.gmail.com>

I recently upgraded to 12.0.0 and was running my process in the shell,
when this error/warning was thrown.  Any idea what it means?

DeprecationWarning: twisted.internet.error.PotentialZombieWarning was
deprecated in Twisted 10.0.0: There is no longer any potential for
zombie process.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.COMMA was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.DATA was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.LENGTH was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.NUMBER was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.internet.interfaces.IFinishableConsumer
was deprecated in Twisted 11.1.0: Please use IConsumer (and
IConsumer.unregisterProducer) instead.
 o = getattr (m, sym)
DeprecationWarning: twisted.internet.interfaces.IReactorArbitrary was
deprecated in Twisted 10.1.0: See IReactorFDSet.
 o = getattr (m, sym)

-- 

Kevin McIntyre | Software Engineer | Green Charge Networks

Cell 718-249-5058 | kmcintyre at greenchargenet.com | www.greenchargenet.com


From exarkun at twistedmatrix.com  Wed Jun  6 16:40:18 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 06 Jun 2012 20:40:18 -0000
Subject: [Twisted-Python] DeprecationWarning and PotentialZombieWarning
In-Reply-To: <CAFvbmckFUdRtnG4DNOfVLUZp1pZPDo_TLJQWuNDJRU=NSQfwUg@mail.gmail.com>
References: <CAFvbmckFUdRtnG4DNOfVLUZp1pZPDo_TLJQWuNDJRU=NSQfwUg@mail.gmail.com>
Message-ID: <20120606204018.2914.648761613.divmod.xquotient.11@localhost6.localdomain6>

On 07:58 pm, kmcintyre at greenchargenet.com wrote:
>I recently upgraded to 12.0.0 and was running my process in the shell,
>when this error/warning was thrown.  Any idea what it means?
>
>DeprecationWarning: twisted.internet.error.PotentialZombieWarning was
>deprecated in Twisted 10.0.0: There is no longer any potential for
>zombie process.

This attribute and others are deprecated.  APIs and behaviors are 
deprecated for at least two releases before they are removed or 
otherwise changed incompatibly.

I don't know what the line of code pointed at by the warning is from or 
is trying to do:
>o = getattr (m, sym)

Considering how many warnings it triggered, it looks like it may be some 
code that is traversing _all_ the APIs in Twisted?  Perhaps the warnings 
are harmless, then, since after we remove the deprecated APIs, the code 
will no longer see them and no longer try to visit them.

If that doesn't sound right, then it may help for you to further explain 
what was going on when you encountered these warnings.

Jean-Paul


From enriquejr at gmail.com  Wed Jun  6 20:46:57 2012
From: enriquejr at gmail.com (Enrique Samson Jr,)
Date: Thu, 07 Jun 2012 08:46:57 +0800
Subject: [Twisted-Python] Log file ownership
Message-ID: <4FCFFA01.5040501@gmail.com>

Hi,

I am running an app as root on Linux using a .tac file and twistd. The
application object is initialized with a certain gid and uid. Logging is
configured to rotate daily by way of DailyLogFile. However, the log file
it creates is owned by root with 600 file permission and log rotation is
failing. I have read about acl to configure default file permissions but
is there a way to solve this only in Twisted?

--Enrique


From itamar at itamarst.org  Wed Jun  6 22:27:01 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 06 Jun 2012 22:27:01 -0400
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FCFFA01.5040501@gmail.com>
References: <4FCFFA01.5040501@gmail.com>
Message-ID: <4FD01175.6090100@itamarst.org>

On 06/06/2012 08:46 PM, Enrique Samson Jr, wrote:
> Hi,
>
> I am running an app as root on Linux using a .tac file and twistd. The
> application object is initialized with a certain gid and uid. Logging is
> configured to rotate daily by way of DailyLogFile. However, the log file
> it creates is owned by root with 600 file permission and log rotation is
> failing. I have read about acl to configure default file permissions but
> is there a way to solve this only in Twisted?
>
Perhaps someone else can comment on what might be a bug, but one thing 
to do is to run your program directly as the uid and gid you want 
(rather than than root). Since presumably the goal is to bind to a port 
<1024, you can do that instead using authbind 
(http://manpages.ubuntu.com/manpages/hardy/man1/authbind.1.html).


From enriquejr at gmail.com  Wed Jun  6 22:42:08 2012
From: enriquejr at gmail.com (Enrique Samson Jr,)
Date: Thu, 07 Jun 2012 10:42:08 +0800
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FD01175.6090100@itamarst.org>
References: <4FCFFA01.5040501@gmail.com> <4FD01175.6090100@itamarst.org>
Message-ID: <4FD01500.4050707@gmail.com>

On 6/7/12 10:27 AM, Itamar Turner-Trauring wrote:
> On 06/06/2012 08:46 PM, Enrique Samson Jr, wrote:
>> Hi,
>>
>> I am running an app as root on Linux using a .tac file and twistd. The
>> application object is initialized with a certain gid and uid. Logging is
>> configured to rotate daily by way of DailyLogFile. However, the log file
>> it creates is owned by root with 600 file permission and log rotation is
>> failing. I have read about acl to configure default file permissions but
>> is there a way to solve this only in Twisted?
>>
> Perhaps someone else can comment on what might be a bug, but one thing 
> to do is to run your program directly as the uid and gid you want 
> (rather than than root).Since presumably the goal is to bind to a port 
> <1024, you can do that instead using authbind 
> (http://manpages.ubuntu.com/manpages/hardy/man1/authbind.1.html).
I need to execute ulimit to increase max open files (20K), reason why
I'm running this as root.



From tobias.oberstein at tavendo.de  Thu Jun  7 07:31:36 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Thu, 7 Jun 2012 04:31:36 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FD01175.6090100@itamarst.org>
References: <4FCFFA01.5040501@gmail.com> <4FD01175.6090100@itamarst.org>
Message-ID: <634914A010D0B943A035D226786325D43377ECB69D@EXVMBX020-12.exch020.serverdata.net>

> root). Since presumably the goal is to bind to a port <1024, you can do that
> instead using authbind
> (http://manpages.ubuntu.com/manpages/hardy/man1/authbind.1.html).

Just some comments ..

==

For binding ports <1024, there is at least one more option:

Since Linux kernel 2.6.24, the kernel supports associating capability sets with an executable file using setcap(8).

setcap 'cap_net_bind_service=+ep' <path to actual Python binary .. not a symlink!> 

http://linux.die.net/man/8/setcap
http://linux.die.net/man/7/capabilities

==

For maximum open FDs, if you run your stuff under a dedicated user, you can also modify

/etc/security/limits.conf

You will likely need to tune more options however .. like system wide max open FDs etc

http://urbanairship.com/blog/2010/09/29/linux-kernel-tuning-for-c500k/




From kmcintyre at greenchargenet.com  Thu Jun  7 22:23:06 2012
From: kmcintyre at greenchargenet.com (Kevin McIntyre)
Date: Thu, 7 Jun 2012 19:23:06 -0700
Subject: [Twisted-Python] protocol connectionLost clientConnectionLost
Message-ID: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>

Below is my sample code.  I'm hoping to unplug my internet cable and
get a connectionLost.  But this doesn't happen.  Is there anyway to
detect this?

------

from twisted.internet.protocol import Protocol, ReconnectingClientFactory
from twisted.internet import reactor

class Echo(Protocol):

    def connectionMade(self):
        print "cool and the gang"

    def connectionLost(self, reason):
        print "ut-oh %s" % reason

    def dataReceived(self, data):
        pass

class EchoClientFactory(ReconnectingClientFactory):

    def startedConnecting(self, connector):
        print 'Started to connect.'

    def buildProtocol(self, addr):
        print 'Connected.'
        print 'Resetting reconnection delay'
        self.resetDelay()
        return Echo()

    def clientConnectionLost(self, connector, reason):
        print 'Lost connection.  Reason:', reason
        ReconnectingClientFactory.clientConnectionLost(self, connector, reason)

    def clientConnectionFailed(self, connector, reason):
        print 'Connection failed. Reason:', reason
        ReconnectingClientFactory.clientConnectionFailed(self, connector,
                                                         reason)
if ( __name__ == "__main__" ):
    reactor.connectTCP("74.125.224.242", 80, EchoClientFactory() )
#connect to google on port 80
    reactor.run()

-- 

Kevin McIntyre | Software Engineer | Green Charge Networks

Cell 718-249-5058 | kmcintyre at greenchargenet.com | www.greenchargenet.com


From itamar at itamarst.org  Thu Jun  7 22:39:56 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 07 Jun 2012 22:39:56 -0400
Subject: [Twisted-Python] protocol connectionLost clientConnectionLost
In-Reply-To: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>
References: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>
Message-ID: <4FD165FC.8090803@itamarst.org>

On 06/07/2012 10:23 PM, Kevin McIntyre wrote:
> Below is my sample code.  I'm hoping to unplug my internet cable and
> get a connectionLost.  But this doesn't happen.  Is there anyway to
> detect this?
>
Send out a message every few seconds or minutes; if you're not sending 
any traffic the OS will not detect problems with the TCP connection.


From xl.mailinglist at gmail.com  Thu Jun  7 22:58:26 2012
From: xl.mailinglist at gmail.com (Xavier Lapointe)
Date: Thu, 7 Jun 2012 22:58:26 -0400
Subject: [Twisted-Python] protocol connectionLost clientConnectionLost
In-Reply-To: <4FD165FC.8090803@itamarst.org>
References: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>
	<4FD165FC.8090803@itamarst.org>
Message-ID: <CAO_EcGDMpKnh80HeuiFWPitwOeS3OE9EbvtODfHhPZaCHpd-Wg@mail.gmail.com>

Just a pointer (was curious about it, but that's the closest I got in 5
min):
http://twistedmatrix.com/pipermail/twisted-python/2004-July/008180.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120607/2799b9de/attachment.htm 

From raphael at uaca.com  Fri Jun  8 01:23:43 2012
From: raphael at uaca.com (Raphael Shu)
Date: Fri, 8 Jun 2012 14:23:43 +0900
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
Message-ID: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>

Hi everyone,

I'm a student of GSoC 2012, from University of Tsukuba, Japan.

I'm glad to be selected as a practicer in Twisted project this year.

Then in these serveral months, my project is to create a code standard
checker for Twisted,

Basically, I will follow "Twisted Coding Standard", it can be found at:

http://twistedmatrix.com/trac/browser/trunk/doc/core/development/policy/coding-standard.xhtml?format=raw


I hope finally this project could be integrated into our main ticket system,

so it would automatically check patches or other things.

Please let me know if you have any good advise or idea to this project.

My name on IRC is zomux.

( This project is currently hosted on launchpad,
http://launchpad.net/twistedchecker )

Thanks.

Best Regards,

-- 
 *Raphael Shu , UACA 2012*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120608/24a9763d/attachment.htm 

From jml at mumak.net  Fri Jun  8 03:47:04 2012
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 8 Jun 2012 08:47:04 +0100
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
Message-ID: <CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>

On Fri, Jun 8, 2012 at 6:23 AM, Raphael Shu <raphael at uaca.com> wrote:
> Hi everyone,
>
> I'm a student of GSoC 2012, from University of Tsukuba, Japan.
>
> I'm glad to be selected as a?practicer?in Twisted project this year.
>
> Then in these serveral months, my project is to create a code standard
> checker for Twisted,
>
> Basically, I will follow "Twisted Coding Standard", it can be found at:
>
> http://twistedmatrix.com/trac/browser/trunk/doc/core/development/policy/coding-standard.xhtml?format=raw
>
> I hope finally this project could be?integrated into our main ticket system,
>
> so it would automatically check patches or other things.
>
> Please let me know if you have any good advise or idea to this project.
>
> My name on IRC is zomux.
>
> ( This project is currently hosted on launchpad,
> http://launchpad.net/twistedchecker?)
>

Welcome Raphael! I'm really looking forward to having an automated
Twisted coding standard checker.

Thanks,
jml


From exarkun at twistedmatrix.com  Fri Jun  8 08:57:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 08 Jun 2012 12:57:24 -0000
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FCFFA01.5040501@gmail.com>
References: <4FCFFA01.5040501@gmail.com>
Message-ID: <20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>

On 7 Jun, 12:46 am, enriquejr at gmail.com wrote:
>Hi,
>
>I am running an app as root on Linux using a .tac file and twistd. The
>application object is initialized with a certain gid and uid. Logging 
>is
>configured to rotate daily by way of DailyLogFile. However, the log 
>file
>it creates is owned by root with 600 file permission and log rotation 
>is
>failing. I have read about acl to configure default file permissions 
>but
>is there a way to solve this only in Twisted?

Log rotation - ie, renaming a file - isn't affected by the permissions 
of the log file.  The permissions of the *directory containing the log 
file* control whether it can be renamed (and a new one created) or not.

So it doesn't matter what permissions the log file has.  It only matters 
what permissions you set on the directory holding the log file.  That's 
outside of the control of twistd.

Jean-Paul


From stephen at thorne.id.au  Sat Jun  9 10:52:51 2012
From: stephen at thorne.id.au (Thorne, Stephen)
Date: Sat, 9 Jun 2012 15:52:51 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
Message-ID: <CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>

Can I get you to send me the original format of this document? I can
open anything.

On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
> The PDF is here - I can export the Keynote slides to some other format if
> you want.
>
> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>
> On 10 ??? 2012, at 1:51 ?.?., Thorne, Stephen wrote:
>
> Hihi,
>
> It sounds like I need to get my ass into gear and convince my employer
> to send me to europython, so I can help you out here.
>
> I am available at that time, I just haven't organised anything. Can you send
> me a link to the latest version of the training material you had from last
> year?
>
> Are there any other volunteers? Training is very draining and having more
> than
> one person in the room really helps.
>
> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>
>> Hello everyone,
>>
>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>> (Florence, July 2-8) has been voted in the community and is set to be
>> delivered on July
>> 5.?https://ep2012.europython.eu/conference/talks/twisted-tutorial?This
>> turned out to be very popular last year, and had to be repeated on a second
>> day to cover all the audience.
>>
>> Unfortunately for personal reasons I won't be able to attend the
>> conference. Before I give back the slot to the EuroPython organizers, I
>> wonder if someone that would be attending would want to deliver the training
>> in my place. I have a lot of material already from last year, and I can
>> happily work for the preparation of the training.
>>
>> I need to give an answer to the organizers in the next few days, so if
>> someone's interested, please speak up!
>>
>> Thanks,
>> Orestis
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


From orestis at orestis.gr  Sat Jun  9 11:36:27 2012
From: orestis at orestis.gr (Orestis Markou)
Date: Sat, 9 Jun 2012 16:36:27 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
	<CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
Message-ID: <F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>

http://db.tt/Kosw5BxX

Let me know if this works-got the link from an iPhone.



9 ???? 2012, 15:52, ?/? "Thorne, Stephen" <stephen at thorne.id.au> ??????:

> Can I get you to send me the original format of this document? I can
> open anything.
> 
> On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
>> The PDF is here - I can export the Keynote slides to some other format if
>> you want.
>> 
>> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>> 
>> On 10 ??? 2012, at 1:51 ?.?., Thorne, Stephen wrote:
>> 
>> Hihi,
>> 
>> It sounds like I need to get my ass into gear and convince my employer
>> to send me to europython, so I can help you out here.
>> 
>> I am available at that time, I just haven't organised anything. Can you send
>> me a link to the latest version of the training material you had from last
>> year?
>> 
>> Are there any other volunteers? Training is very draining and having more
>> than
>> one person in the room really helps.
>> 
>> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>> 
>>> Hello everyone,
>>> 
>>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>>> (Florence, July 2-8) has been voted in the community and is set to be
>>> delivered on July
>>> 5. https://ep2012.europython.eu/conference/talks/twisted-tutorial This
>>> turned out to be very popular last year, and had to be repeated on a second
>>> day to cover all the audience.
>>> 
>>> Unfortunately for personal reasons I won't be able to attend the
>>> conference. Before I give back the slot to the EuroPython organizers, I
>>> wonder if someone that would be attending would want to deliver the training
>>> in my place. I have a lot of material already from last year, and I can
>>> happily work for the preparation of the training.
>>> 
>>> I need to give an answer to the organizers in the next few days, so if
>>> someone's interested, please speak up!
>>> 
>>> Thanks,
>>> Orestis
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From stephen at thorne.id.au  Sat Jun  9 12:11:28 2012
From: stephen at thorne.id.au (Thorne, Stephen)
Date: Sat, 9 Jun 2012 17:11:28 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
	<CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
	<F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>
Message-ID: <CAFPU7=tFbhaW+2R=Cg5Z2NoKZLCpUN_Msc7Of1DaMSQqLKOn_w@mail.gmail.com>

Yep, worked fine, thanks!

On Sat, Jun 9, 2012 at 4:36 PM, Orestis Markou <orestis at orestis.gr> wrote:
> http://db.tt/Kosw5BxX
>
> Let me know if this works-got the link from an iPhone.
>
>
>
> 9 ???? 2012, 15:52, ?/? "Thorne, Stephen" <stephen at thorne.id.au> ??????:
>
>> Can I get you to send me the original format of this document? I can
>> open anything.
>>
>> On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
>>> The PDF is here - I can export the Keynote slides to some other format if
>>> you want.
>>>
>>> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>>>
>>> On 10 ??? 2012, at 1:51 ?.?., Thorne, Stephen wrote:
>>>
>>> Hihi,
>>>
>>> It sounds like I need to get my ass into gear and convince my employer
>>> to send me to europython, so I can help you out here.
>>>
>>> I am available at that time, I just haven't organised anything. Can you send
>>> me a link to the latest version of the training material you had from last
>>> year?
>>>
>>> Are there any other volunteers? Training is very draining and having more
>>> than
>>> one person in the room really helps.
>>>
>>> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>>>
>>>> Hello everyone,
>>>>
>>>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>>>> (Florence, July 2-8) has been voted in the community and is set to be
>>>> delivered on July
>>>> 5. https://ep2012.europython.eu/conference/talks/twisted-tutorial This
>>>> turned out to be very popular last year, and had to be repeated on a second
>>>> day to cover all the audience.
>>>>
>>>> Unfortunately for personal reasons I won't be able to attend the
>>>> conference. Before I give back the slot to the EuroPython organizers, I
>>>> wonder if someone that would be attending would want to deliver the training
>>>> in my place. I have a lot of material already from last year, and I can
>>>> happily work for the preparation of the training.
>>>>
>>>> I need to give an answer to the organizers in the next few days, so if
>>>> someone's interested, please speak up!
>>>>
>>>> Thanks,
>>>> Orestis
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From orestis at orestis.gr  Sat Jun  9 16:22:03 2012
From: orestis at orestis.gr (Orestis Markou)
Date: Sat, 9 Jun 2012 21:22:03 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <CAFPU7=tFbhaW+2R=Cg5Z2NoKZLCpUN_Msc7Of1DaMSQqLKOn_w@mail.gmail.com>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
	<CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
	<F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>
	<CAFPU7=tFbhaW+2R=Cg5Z2NoKZLCpUN_Msc7Of1DaMSQqLKOn_w@mail.gmail.com>
Message-ID: <1FE691AA-0B83-485C-A3FB-9CBE87E6E9DB@orestis.gr>

Nice. I'll send you the listings as well later tonight.



9 ???? 2012, 17:11, ?/? "Thorne, Stephen" <stephen at thorne.id.au> ??????:

> Yep, worked fine, thanks!
> 
> On Sat, Jun 9, 2012 at 4:36 PM, Orestis Markou <orestis at orestis.gr> wrote:
>> http://db.tt/Kosw5BxX
>> 
>> Let me know if this works-got the link from an iPhone.
>> 
>> 
>> 
>> 9 ???? 2012, 15:52, ?/? "Thorne, Stephen" <stephen at thorne.id.au> ??????:
>> 
>>> Can I get you to send me the original format of this document? I can
>>> open anything.
>>> 
>>> On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
>>>> The PDF is here - I can export the Keynote slides to some other format if
>>>> you want.
>>>> 
>>>> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>>>> 
>>>> On 10 ??? 2012, at 1:51 ?.?., Thorne, Stephen wrote:
>>>> 
>>>> Hihi,
>>>> 
>>>> It sounds like I need to get my ass into gear and convince my employer
>>>> to send me to europython, so I can help you out here.
>>>> 
>>>> I am available at that time, I just haven't organised anything. Can you send
>>>> me a link to the latest version of the training material you had from last
>>>> year?
>>>> 
>>>> Are there any other volunteers? Training is very draining and having more
>>>> than
>>>> one person in the room really helps.
>>>> 
>>>> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>>>> 
>>>>> Hello everyone,
>>>>> 
>>>>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>>>>> (Florence, July 2-8) has been voted in the community and is set to be
>>>>> delivered on July
>>>>> 5. https://ep2012.europython.eu/conference/talks/twisted-tutorial This
>>>>> turned out to be very popular last year, and had to be repeated on a second
>>>>> day to cover all the audience.
>>>>> 
>>>>> Unfortunately for personal reasons I won't be able to attend the
>>>>> conference. Before I give back the slot to the EuroPython organizers, I
>>>>> wonder if someone that would be attending would want to deliver the training
>>>>> in my place. I have a lot of material already from last year, and I can
>>>>> happily work for the preparation of the training.
>>>>> 
>>>>> I need to give an answer to the organizers in the next few days, so if
>>>>> someone's interested, please speak up!
>>>>> 
>>>>> Thanks,
>>>>> Orestis
>>>>> 
>>>>> _______________________________________________
>>>>> Twisted-Python mailing list
>>>>> Twisted-Python at twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>> 
>>>> 
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>> 
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From exarkun at twistedmatrix.com  Sun Jun 10 00:05:52 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 10 Jun 2012 04:05:52 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1339301152.54.348052628@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120610/ca2036ce/attachment.htm 

From glyph at twistedmatrix.com  Sun Jun 10 04:54:32 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 10 Jun 2012 01:54:32 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
Message-ID: <A1202D41-7442-41C4-A14B-B338906C2E6A@twistedmatrix.com>


On Jun 8, 2012, at 5:57 AM, exarkun at twistedmatrix.com wrote:

> On 7 Jun, 12:46 am, enriquejr at gmail.com wrote:
>> Hi,
>> 
>> I am running an app as root on Linux using a .tac file and twistd. The
>> application object is initialized with a certain gid and uid. Logging 
>> is
>> configured to rotate daily by way of DailyLogFile. However, the log 
>> file
>> it creates is owned by root with 600 file permission and log rotation 
>> is
>> failing. I have read about acl to configure default file permissions 
>> but
>> is there a way to solve this only in Twisted?
> 
> Log rotation - ie, renaming a file - isn't affected by the permissions 
> of the log file.  The permissions of the *directory containing the log 
> file* control whether it can be renamed (and a new one created) or not.
> 
> So it doesn't matter what permissions the log file has.  It only matters 
> what permissions you set on the directory holding the log file.  That's 
> outside of the control of twistd.

Perhaps twistd could emit a warning at startup though, and decline to rotate the log if it's impossible rather than logging an ugly traceback?

From flaviogrossi at ymail.com  Mon Jun 11 03:21:49 2012
From: flaviogrossi at ymail.com (Flavio Grossi)
Date: Mon, 11 Jun 2012 07:21:49 +0000 (UTC)
Subject: [Twisted-Python] Log file ownership
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
Message-ID: <loom.20120611T091817-992@post.gmane.org>

 <exarkun <at> twistedmatrix.com> writes:


> 
> Log rotation - ie, renaming a file - isn't affected by the permissions 
> of the log file.  The permissions of the *directory containing the log 
> file* control whether it can be renamed (and a new one created) or not.
> 
> So it doesn't matter what permissions the log file has.  It only matters 
> what permissions you set on the directory holding the log file.  That's 
> outside of the control of twistd.

http://twistedmatrix.com/trac/browser/tags/releases/twisted-
12.0.0/twisted/python/logfile.py#L286

def rotate(self):
    if not (os.access(self.directory, os.W_OK) and os.access(self.path, 
os.W_OK)):
        return


it seems to also need write access to log file.

bye,
flavio


> 
> Jean-Paul
> 





From martin at webscio.net  Mon Jun 11 11:01:25 2012
From: martin at webscio.net (Martin)
Date: Mon, 11 Jun 2012 16:01:25 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
Message-ID: <4FD60845.4090702@webscio.net>

Hi there,

I've been looking around for a solution for several hours now, and maybe 
I'm just missing something..

I've a factory that implements protocol.ReconnectingClientFactory which 
works just fine, however, whenever the program ends running, I get a 
bunch of Unhandled error in Deferred messages in my log for each 
disconnection that occurred during runtime, such as Failure: 
twisted.internet.error.ConnectionLost: ...

Is there any way I could somehow "handle" these during runtime, so that 
my log wouldn't be spammed with this at the end.. (or avoid it being 
spammed somehow..) I really don't care what the solution is, I already 
have the following method that logs everything for me
def clientConnectionLost(self, connector, reason):
         log.msg('Lost connection. Reason: %s' % reason)

just annoying that it's still finds the need to print it out at the end.

Anyway, I don't claim to be anywhere near proficient in Twisted, so any 
help would be greatly appreciated.


Thanks a lot in advance.

Martin


From exarkun at twistedmatrix.com  Mon Jun 11 20:10:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 11 Jun 2012 21:10:25 -0300
Subject: [Twisted-Python] kariera
Message-ID: <mailman.0.1339459812.5868.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120611/f88461c1/attachment.htm 

From duncan.mcgreggor at gmail.com  Mon Jun 11 21:03:28 2012
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Mon, 11 Jun 2012 21:03:28 -0400
Subject: [Twisted-Python] kariera
In-Reply-To: <E1SeEil-0006dO-MP@cube.twistedmatrix.com>
References: <E1SeEil-0006dO-MP@cube.twistedmatrix.com>
Message-ID: <CAFJQhU5UTa7sXQaP3h-X49nDeLP1JMqSD_MmuuOxRGjf2=dWyw@mail.gmail.com>

2012/6/11  <exarkun at twistedmatrix.com>:
> Wielka szansa!
>
> Nasza firma jest firm? doradztwa finansowego, kt?re spotyka si? ze

[snip]

JP, I had no idea you were such a polyglot.

d


From exarkun at twistedmatrix.com  Mon Jun 11 21:34:31 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 11 Jun 2012 22:34:31 -0300
Subject: [Twisted-Python] Wielka szansa!
Message-ID: <mailman.1.1339464873.5868.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120611/862efde0/attachment.htm 

From exarkun at twistedmatrix.com  Mon Jun 11 23:08:05 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 00:08:05 -0300
Subject: [Twisted-Python] Najczesciej wyswietlane FIRMY IT
Message-ID: <mailman.2.1339470489.5868.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120612/4b246f79/attachment.htm 

From exarkun at twistedmatrix.com  Tue Jun 12 02:22:10 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 07:22:10 +0100
Subject: [Twisted-Python] Najczesciej wyswietlane FIRMY IT
Message-ID: <mailman.3.1339482134.5868.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120612/ccae1c9f/attachment.htm 

From exarkun at twistedmatrix.com  Tue Jun 12 05:20:14 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 11:20:14 +0200
Subject: [Twisted-Python] Firma Nilex szuka partnera w Polsce!
Message-ID: <9095021759.BWQQFG15111217@voyoxmkhp.chkfkau.tv>

A non-text attachment was scrubbed...
Name: not available
Type: text/html
	charset="iso-8859-1"
Size: 2305 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20120612/dff82fae/attachment.bin 

From exarkun at twistedmatrix.com  Tue Jun 12 08:15:39 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 13:15:39 +0100
Subject: [Twisted-Python] Zobacz najnowsze Oferty Pracy w IT
Message-ID: <mailman.4.1339503343.5868.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120612/f9f8fe37/attachment.htm 

From exarkun at twistedmatrix.com  Tue Jun 12 10:43:14 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 15:43:14 +0100
Subject: [Twisted-Python] Szukaj ofert pracy!
Message-ID: <0583657910.4U5ZSUMC815899@heierlrccrm.pbxase.ua>

A non-text attachment was scrubbed...
Name: not available
Type: text/html
	charset="iso-8859-1"
Size: 2306 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20120612/b0ce2d47/attachment.bin 

From itamar at itamarst.org  Tue Jun 12 11:23:06 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 12 Jun 2012 11:23:06 -0400
Subject: [Twisted-Python] I will try to beef up the mailing list's anti-spam
	filters now
Message-ID: <4FD75EDA.7000701@itamarst.org>

Sorry for the problems.

-Itamar


From exarkun at twistedmatrix.com  Tue Jun 12 12:01:06 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 17:01:06 +0100
Subject: [Twisted-Python] Firma Nilex szuka partnera w Polsce!
Message-ID: <2573934776.K50S5WF0966695@sfnekkzmjbblpgw.ksatcexx.info>

A non-text attachment was scrubbed...
Name: not available
Type: text/html
	charset="iso-8859-1"
Size: 2306 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20120612/b5af72b9/attachment.bin 

From qdnguyen at MIT.EDU  Tue Jun 12 16:53:50 2012
From: qdnguyen at MIT.EDU (Quan Nguyen)
Date: Tue, 12 Jun 2012 20:53:50 +0000
Subject: [Twisted-Python] Quan Nguyen: Twisted Python questions
Message-ID: <7BB2F22B51197D40B59E42E2B076261929D52C3A@OC11EXPO31.exchange.mit.edu>

Hello,

I am new to Twisted. 
I am extending the twisted Echo server example by sending the data that the server receives from telnet into a child process that processes the data. The function outReceived in censoringProtocol is called when the child writes the result and the result is received. The process of passing data from parent to child and back to parent is done by having a while loop of stdin.readline() and stdout.write() in the child process. 
Specifically, I generate a deferred object each time I write to the child using the function sendData (which then calls writeToChild) and use a queue to manage the deferred objects. I add a callBack (printData) that will broadcast the result to all instances of Echo when outReceived is called. 

I have two questions: 
1/ Is this the right approach to communicate with the child process in order to achieve what I want? Are there any gotcha's?
2/ This server will be exposed to high loads. There will be many instances of Echo sending data to the child at a high rate. Are there any limitations that I have to watch for, such as the limit on child process's pipe sizes or anything else?

My code is down below, as well as in this link:
https://gist.github.com/2920032

Thank You for your time.
Quan Nguyen


from sys import executable
from os import environ
from twisted.internet import reactor, defer
from twisted.internet.protocol import Protocol
from twisted.internet.protocol import Factory
from twisted.internet import protocol
from twisted.protocols.basic import LineReceiver
import sys
import time
import Queue
import os

implementation = """
import os
import time
import sys
import string
def censor():
        BW = ["sfs", "fsdfwe", "tryt", "sfsvx"]
        while (True):
            a = sys.stdin.readline()
            if a:
                   for bannedWord in BW:
                        a = string.replace(a, bannedWord , '<banned>')
                   sys.stdout.write(a)
                   sys.stdout.flush()
"""

class Echo(LineReceiver):
        def lineReceived(self, data):
            d = self.factory.process.sendData(data+'\r\n')
            #reactor.callLater(3,d.addCallback, printData)
            d.addCallback(printData)
            prot.transport.write(data)

def createProcess():
    pp = censoringProtocol()
    Process = reactor.spawnProcess(pp, executable, [executable, "-c", implementation], env=environ, childFDs = {0:"w", 1:"r", 2:"r"})
    pp.process = Process
    return pp    

class EchoFactory(Factory): 
      protocol = Echo 
      telnetConnectionList  = []
      process  = None
      deferQ   = None

      def __init__(self):
          EchoFactory.process = createProcess()
          EchoFactory.deferQ  = Queue.Queue()
      def buildProtocol (self, addr):
          newProtocol = Factory.buildProtocol(self, addr)
          EchoFactory.telnetConnectionList.append(newProtocol)
          return newProtocol

class censoringProtocol(protocol.ProcessProtocol):

    def __init__(self):
        self.process = None

    def connectionMade(self):
        print "connectionMade!"

    def outReceived(self, data):
        EchoFactory.deferQ.get().callback(data)

    def sendData(self,data):
        d = defer.Deferred()
        EchoFactory.deferQ.put(d)
        self.process.writeToChild(0, data)
        return d



reactor.listenTCP(11111, EchoFactory())
print 'in parent', os.getpid()
reactor.run()



From adi at roiban.ro  Wed Jun 13 06:39:42 2012
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 13 Jun 2012 13:39:42 +0300
Subject: [Twisted-Python] Detect SSL transport and get remote peer
	certificate in tcp.Server
Message-ID: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>

Hi,

I work at an experimental FTPS implementation for twisted.protocol.ftp

I use the following code for checking that the transport has TLS
started and to get the client certificate for certificate based
authentication:

    @property
    def is_ftps_command_active(self):
        '''Return `True` if current command connection is using SSL.'''
        return isinstance(self.transport.socket, SSL.Connection)

    def getPeerCertificate(self):
        '''Return the peer certificate if remote peer is on a SSL connection
        and has sent us a certificate.
        Return `None` otherwise.
        '''
        if not hasattr(self.transport, 'socket'):
            return None
        if not self.is_ftps_command_active:
            return None
        return self.transport.socket.get_peer_certificate()

The code works with Twisted 10, but after the Twisted TLS refactoring
in Twisted 12, the transport no longer uses a SSL.Connection.

Is there a way to get the remote peer certificate of a TLS transport
in Twisted 12?

Is there a way to check whether or not the transport has SSL enabled or not?

Many thanks!

-- 
Adi Roiban


From exarkun at twistedmatrix.com  Wed Jun 13 07:15:50 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 13 Jun 2012 11:15:50 -0000
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
Message-ID: <20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>

On 10:39 am, adi at roiban.ro wrote:
>Hi,
>
>I work at an experimental FTPS implementation for twisted.protocol.ftp
>
>I use the following code for checking that the transport has TLS
>started and to get the client certificate for certificate based
>authentication:
>
>    @property
>    def is_ftps_command_active(self):
>        '''Return `True` if current command connection is using SSL.'''
>        return isinstance(self.transport.socket, SSL.Connection)

Instead, check `ISSLTransport.providedBy(self.transport)`. 
`ISSLTransport` comes from `twisted.internet.interfaces`.
>    def getPeerCertificate(self):
>        '''Return the peer certificate if remote peer is on a SSL 
>connection
>        and has sent us a certificate.
>        Return `None` otherwise.
>        '''
>        if not hasattr(self.transport, 'socket'):
>            return None
>        if not self.is_ftps_command_active:
>            return None
>        return self.transport.socket.get_peer_certificate()

Heh. :)  Instead, use `transport.getPeerCertificate()`. 
`getPeerCertificate` is a method specified by `ISSLTransport`.

Jean-Paul


From p.mayers at imperial.ac.uk  Wed Jun 13 08:20:30 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 13 Jun 2012 13:20:30 +0100
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
	<20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <4FD8858E.3060300@imperial.ac.uk>

On 13/06/12 12:15, exarkun at twistedmatrix.com wrote:

> Heh. :)  Instead, use `transport.getPeerCertificate()`.
> `getPeerCertificate` is a method specified by `ISSLTransport`.

I've run into some oddities which this method call before; IIRC you have 
to setup the context in a very particular way to even SEE client 
certificates, regardless of whether the client sends them?


From adi at roiban.ro  Wed Jun 13 08:44:22 2012
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 13 Jun 2012 15:44:22 +0300
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
	<20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <CAFycZ9d4zd=MfVdUDY2GswyMjimG5K6uQek-OPwMJH4JXb9iMQ@mail.gmail.com>

On 13 June 2012 14:15,  <exarkun at twistedmatrix.com> wrote:
> On 10:39 am, adi at roiban.ro wrote:
>>Hi,
>>
>>I work at an experimental FTPS implementation for twisted.protocol.ftp
>>
>>I use the following code for checking that the transport has TLS
>>started and to get the client certificate for certificate based
>>authentication:
>>
>> ? ?@property
>> ? ?def is_ftps_command_active(self):
>> ? ? ? ?'''Return `True` if current command connection is using SSL.'''
>> ? ? ? ?return isinstance(self.transport.socket, SSL.Connection)
>
> Instead, check `ISSLTransport.providedBy(self.transport)`.
> `ISSLTransport` comes from `twisted.internet.interfaces`.

I can get the peer certificate, but
ISSLTransport.providedBy(self.transport) returns False.

I am still new to Twisted. For me the transport looks like it has some
kind sorcery attached since getPeerCertificate is not listed by
dir(self.transport)

Not sure what I got here :)

(Pdb) self.transport.getPeerCertificate()
<X509 object at 0x9fc5af0>
(Pdb) ISSLTransport.providedBy(self.transport)
False
(Pdb) dir(self.transport)
['__doc__', '__getattr__', '__implemented__', '__init__',
'__module__', '__providedBy__', '__provides__', 'connected',
'connectionLost', 'connectionMade', 'dataReceived', 'disconnecting',
'factory', 'getHost', 'getPeer', 'logPrefix', 'loseConnection',
'makeConnection', 'registerProducer', 'stopConsuming', 'transport',
'unregisterProducer', 'wrappedProtocol', 'write', 'writeSequence']


>> ? ?def getPeerCertificate(self):
>> ? ? ? ?'''Return the peer certificate if remote peer is on a SSL
>>connection
>> ? ? ? ?and has sent us a certificate.
>> ? ? ? ?Return `None` otherwise.
>> ? ? ? ?'''
>> ? ? ? ?if not hasattr(self.transport, 'socket'):
>> ? ? ? ? ? ?return None
>> ? ? ? ?if not self.is_ftps_command_active:
>> ? ? ? ? ? ?return None
>> ? ? ? ?return self.transport.socket.get_peer_certificate()
>
> Heh. :) ?Instead, use `transport.getPeerCertificate()`.
> `getPeerCertificate` is a method specified by `ISSLTransport`.

Thanks! :)

I was able to get the peer certificate.

----

The full code is here: https://github.com/chevah/txftps/tree/master/txftps
It uses twisted.internet.tcp.Server for FTP command channel and
TLSMemoryBIOProtocol for data channel.

Phil, you can take a look at how the context is configured.
The context is defined here:
https://github.com/chevah/txftps/blob/master/txftps/ssl.py


-- 
Adi Roiban


From exarkun at twistedmatrix.com  Wed Jun 13 09:13:35 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 13 Jun 2012 13:13:35 -0000
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <CAFycZ9d4zd=MfVdUDY2GswyMjimG5K6uQek-OPwMJH4JXb9iMQ@mail.gmail.com>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
	<20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
	<CAFycZ9d4zd=MfVdUDY2GswyMjimG5K6uQek-OPwMJH4JXb9iMQ@mail.gmail.com>
Message-ID: <20120613131335.6806.349995735.divmod.xquotient.20@localhost6.localdomain6>

On 12:44 pm, adi at roiban.ro wrote:
>On 13 June 2012 14:15,  <exarkun at twistedmatrix.com> wrote:
>>On 10:39 am, adi at roiban.ro wrote:
>>>Hi,
>>>
>>>I work at an experimental FTPS implementation for 
>>>twisted.protocol.ftp
>>>
>>>I use the following code for checking that the transport has TLS
>>>started and to get the client certificate for certificate based
>>>authentication:
>>>
>>>? ?@property
>>>? ?def is_ftps_command_active(self):
>>>? ? ? ?'''Return `True` if current command connection is using 
>>>SSL.'''
>>>? ? ? ?return isinstance(self.transport.socket, SSL.Connection)
>>
>>Instead, check `ISSLTransport.providedBy(self.transport)`.
>>`ISSLTransport` comes from `twisted.internet.interfaces`.
>
>I can get the peer certificate, but
>ISSLTransport.providedBy(self.transport) returns False.

That sounds like a bug in the new TLS implementation, then. :/  Can you 
file a bug report?  Be sure to include how you set up the connection 
(connectSSL or startTLS or whatever).
>I am still new to Twisted. For me the transport looks like it has some
>kind sorcery attached since getPeerCertificate is not listed by
>dir(self.transport)
>
>Not sure what I got here :)

Yea.  There's some method proxying going on.

Thanks,
Jean-Paul
>(Pdb) self.transport.getPeerCertificate()
><X509 object at 0x9fc5af0>
>(Pdb) ISSLTransport.providedBy(self.transport)
>False
>(Pdb) dir(self.transport)
>['__doc__', '__getattr__', '__implemented__', '__init__',
>'__module__', '__providedBy__', '__provides__', 'connected',
>'connectionLost', 'connectionMade', 'dataReceived', 'disconnecting',
>'factory', 'getHost', 'getPeer', 'logPrefix', 'loseConnection',
>'makeConnection', 'registerProducer', 'stopConsuming', 'transport',
>'unregisterProducer', 'wrappedProtocol', 'write', 'writeSequence']
>>>? ?def getPeerCertificate(self):
>>>? ? ? ?'''Return the peer certificate if remote peer is on a SSL
>>>connection
>>>? ? ? ?and has sent us a certificate.
>>>? ? ? ?Return `None` otherwise.
>>>? ? ? ?'''
>>>? ? ? ?if not hasattr(self.transport, 'socket'):
>>>? ? ? ? ? ?return None
>>>? ? ? ?if not self.is_ftps_command_active:
>>>? ? ? ? ? ?return None
>>>? ? ? ?return self.transport.socket.get_peer_certificate()
>>
>>Heh. :) ?Instead, use `transport.getPeerCertificate()`.
>>`getPeerCertificate` is a method specified by `ISSLTransport`.
>
>Thanks! :)
>
>I was able to get the peer certificate.
>
>----
>
>The full code is here: 
>https://github.com/chevah/txftps/tree/master/txftps
>It uses twisted.internet.tcp.Server for FTP command channel and
>TLSMemoryBIOProtocol for data channel.
>
>Phil, you can take a look at how the context is configured.
>The context is defined here:
>https://github.com/chevah/txftps/blob/master/txftps/ssl.py
>
>
>--
>Adi Roiban
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From glyph at twistedmatrix.com  Wed Jun 13 14:50:56 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 13 Jun 2012 11:50:56 -0700
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FD60845.4090702@webscio.net>
References: <4FD60845.4090702@webscio.net>
Message-ID: <78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>


On Jun 11, 2012, at 8:01 AM, Martin wrote:

> Hi there,
> 
> I've been looking around for a solution for several hours now, and maybe 
> I'm just missing something..
> 
> I've a factory that implements protocol.ReconnectingClientFactory which 
> works just fine, however, whenever the program ends running, I get a 
> bunch of Unhandled error in Deferred messages in my log for each 
> disconnection that occurred during runtime, such as Failure: 
> twisted.internet.error.ConnectionLost: ...
> 
> Is there any way I could somehow "handle" these during runtime, so that 
> my log wouldn't be spammed with this at the end.. (or avoid it being 
> spammed somehow..)

These messages are coming from some code which is issuing Deferreds, not from ReconnectingClientFactory.  You need to add an errback to those Deferreds in your application code.  There's no way to write a catch-all, just like there's no way to write a catch-all that can stop exceptions from being raised in basic Python.

I can't say more without a code example, preferably a <http://sscce.org/>.

-glyph



From glyph at twistedmatrix.com  Wed Jun 13 15:10:18 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 13 Jun 2012 12:10:18 -0700
Subject: [Twisted-Python] Quan Nguyen: Twisted Python questions
In-Reply-To: <7BB2F22B51197D40B59E42E2B076261929D52C3A@OC11EXPO31.exchange.mit.edu>
References: <7BB2F22B51197D40B59E42E2B076261929D52C3A@OC11EXPO31.exchange.mit.edu>
Message-ID: <01B4075F-A1A4-49DF-BCAD-D4C0A6FA2C73@twistedmatrix.com>


On Jun 12, 2012, at 1:53 PM, Quan Nguyen wrote:

> Hello,
> 
> I am new to Twisted. 
> I am extending the twisted Echo server example by sending the data that the server receives from telnet into a child process that processes the data. The function outReceived in censoringProtocol is called when the child writes the result and the result is received. The process of passing data from parent to child and back to parent is done by having a while loop of stdin.readline() and stdout.write() in the child process. 
> Specifically, I generate a deferred object each time I write to the child using the function sendData (which then calls writeToChild) and use a queue to manage the deferred objects. I add a callBack (printData) that will broadcast the result to all instances of Echo when outReceived is called. 
> 
> I have two questions: 
> 1/ Is this the right approach to communicate with the child process in order to achieve what I want? Are there any gotcha's?

This sounds pretty much fine, except for the caveat you already asked about:

> 2/ This server will be exposed to high loads. There will be many instances of Echo sending data to the child at a high rate. Are there any limitations that I have to watch for, such as the limit on child process's pipe sizes or anything else?

You might want to investigate the producer/consumer API, as recently blogged about by our marvelously productive summer intern, ashfall: <http://ashfall.github.com/blog/2012/05/29/twisted-producer-and-consumer-system/>.  As currently written, even if your subprocess backs up, you will buffer data to it without any limits.

(The consumer you want, by the way, is censoringProtocol().transport.pipes[0], in case that isn't entirely clear; processes need to be documented a little better.)

You may have to write a little bit of tricky code to multiplex the consumer, if you want to have multiple "echo" client connections using the same subprocess.  If it were a 1<->1 relationship you could just register the echo protocol's transport as the producer for the stdin pipe on the processing protocol, but spawning that many processes is probably wasteful.

-glyph

From glyph at twistedmatrix.com  Wed Jun 13 15:15:34 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 13 Jun 2012 12:15:34 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <loom.20120611T091817-992@post.gmane.org>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
	<loom.20120611T091817-992@post.gmane.org>
Message-ID: <982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>


On Jun 11, 2012, at 12:21 AM, Flavio Grossi wrote:

> <exarkun <at> twistedmatrix.com> writes:
> 
> 
>> 
>> Log rotation - ie, renaming a file - isn't affected by the permissions 
>> of the log file.  The permissions of the *directory containing the log 
>> file* control whether it can be renamed (and a new one created) or not.
>> 
>> So it doesn't matter what permissions the log file has.  It only matters 
>> what permissions you set on the directory holding the log file.  That's 
>> outside of the control of twistd.
> 
> http://twistedmatrix.com/trac/browser/tags/releases/twisted-
> 12.0.0/twisted/python/logfile.py#L286
> 
> def rotate(self):
>    if not (os.access(self.directory, os.W_OK) and os.access(self.path, 
> os.W_OK)):
>        return
> 
> 
> it seems to also need write access to log file.

It's a pity that this code wasn't commented.  I can't find a platform where moving the file needs write access.  File a bug?  (Just another example of why LBYL is an antipattern...)

-glyph

From martin at webscio.net  Thu Jun 14 07:38:44 2012
From: martin at webscio.net (Martin)
Date: Thu, 14 Jun 2012 12:38:44 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
Message-ID: <4FD9CD44.1030102@webscio.net>

Hi, thanks for your reply.

Indeed, the ReconnectingClientFactory is being sent the Failure object to

def clientConnectionLost(self, connector, reason):
         log.msg('Lost connection. Reason: %s' % reason)
         protocol.ReconnectingClientFactory.clientConnectionLost(self, 
connector, reason)

where "reason" is the Failure object that is "unhandled". is there 
anything I could do to it there to make it handled?

Also, the documentation in 
http://twistedmatrix.com/documents/current/core/howto/defer.html says 
that one can do d.addErrback(err.log) to deal with unhandled errors, but 
what is d?

In general, I'm not doing anything special.. I'm creating a 
ReconnectingClientFactory and connecting it to a server..
f = MyReconnectingClientFactory(..)
reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
reactor.run()

Basically it. Any thoughts? Thanks a lot!
> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>
>> Hi there,
>>
>> I've been looking around for a solution for several hours now, and maybe
>> I'm just missing something..
>>
>> I've a factory that implements protocol.ReconnectingClientFactory which
>> works just fine, however, whenever the program ends running, I get a
>> bunch of Unhandled error in Deferred messages in my log for each
>> disconnection that occurred during runtime, such as Failure:
>> twisted.internet.error.ConnectionLost: ...
>>
>> Is there any way I could somehow "handle" these during runtime, so that
>> my log wouldn't be spammed with this at the end.. (or avoid it being
>> spammed somehow..)
> These messages are coming from some code which is issuing Deferreds, not from ReconnectingClientFactory.  You need to add an errback to those Deferreds in your application code.  There's no way to write a catch-all, just like there's no way to write a catch-all that can stop exceptions from being raised in basic Python.
>
> I can't say more without a code example, preferably a<http://sscce.org/>.
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>



From wolfgang at rohdewald.de  Thu Jun 14 08:27:56 2012
From: wolfgang at rohdewald.de (Wolfgang Rohdewald)
Date: Thu, 14 Jun 2012 14:27:56 +0200
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
Message-ID: <19421453.L4QdkbeXYx@i5>

it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.

So programs using twisted (including my own) will not come preinstalled.

how is progress going with twisted and Python3?

-- 
Wolfgang


From dynamicgl at gmail.com  Thu Jun 14 08:34:41 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Thu, 14 Jun 2012 20:34:41 +0800
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FD9CD44.1030102@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net>
Message-ID: <CABkOF6QJ4u4tPsU6cOtrF9fL2PWOPiF9=R06qN0UYyVzDuY2-w@mail.gmail.com>

On Thu, Jun 14, 2012 at 7:38 PM, Martin <martin at webscio.net> wrote:

> Hi, thanks for your reply.
>
> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>
> def clientConnectionLost(self, connector, reason):
>         log.msg('Lost connection. Reason: %s' % reason)
>          protocol.ReconnectingClientFactory.clientConnectionLost(self,
> connector, reason)
>
> where "reason" is the Failure object that is "unhandled". is there
> anything I could do to it there to make it handled?
>
> Also, the documentation in
> http://twistedmatrix.com/documents/current/core/howto/defer.html says
> that one can do d.addErrback(err.log) to deal with unhandled errors, but
> what is d?
>
> In general, I'm not doing anything special.. I'm creating a
> ReconnectingClientFactory and connecting it to a server..
> f = MyReconnectingClientFactory(..)
> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
> reactor.run()
>
> Basically it. Any thoughts? Thanks a lot!
> > On Jun 11, 2012, at 8:01 AM, Martin wrote:
> >
> >> Hi there,
> >>
> >> I've been looking around for a solution for several hours now, and maybe
> >> I'm just missing something..
> >>
> >> I've a factory that implements protocol.ReconnectingClientFactory which
> >> works just fine, however, whenever the program ends running, I get a
> >> bunch of Unhandled error in Deferred messages in my log for each
> >> disconnection that occurred during runtime, such as Failure:
> >> twisted.internet.error.ConnectionLost: ...
> >>
> >> Is there any way I could somehow "handle" these during runtime, so that
> >> my log wouldn't be spammed with this at the end.. (or avoid it being
> >> spammed somehow..)
> > These messages are coming from some code which is issuing Deferreds, not
> from ReconnectingClientFactory.  You need to add an errback to those
> Deferreds in your application code.  There's no way to write a catch-all,
> just like there's no way to write a catch-all that can stop exceptions from
> being raised in basic Python.
> >
> > I can't say more without a code example, preferably a<http://sscce.org/
> >.
> >
> > -glyph
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi Martin

  d refers to a defer object.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120614/986dca67/attachment.htm 

From vlada.peric at gmail.com  Thu Jun 14 08:46:45 2012
From: vlada.peric at gmail.com (=?UTF-8?Q?Vladimir_Peri=C4=87?=)
Date: Thu, 14 Jun 2012 14:46:45 +0200
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <19421453.L4QdkbeXYx@i5>
References: <19421453.L4QdkbeXYx@i5>
Message-ID: <CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>

Hi,

On Thu, Jun 14, 2012 at 2:27 PM, Wolfgang Rohdewald
<wolfgang at rohdewald.de> wrote:
> it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.
>
> So programs using twisted (including my own) will not come preinstalled.
>
> how is progress going with twisted and Python3?

I'm working on Python 3 support as a GSoC project for this summer.
It's too early to give an estimate, but getting it all done by Ubuntu
12.10 is a very optimistic goal. You'll be able to follow progress on
my blog [1], though it's currently... out-dated.

As far as Ubuntu itself is concerned, I wasn't aware that Twisted is
available from the default Ubuntu CD. Per [2], this is the only thing
that will be affected - what is shipped on the CD. All the other
Python 2 packages will be available normally through the repos.


[1] vperic.blogspot.com
[2] https://wiki.ubuntu.com/Python/FoundationsQPythonVersions

>
> --
> Wolfgang
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
Vladimir Peri?


From wolfgang at rohdewald.de  Thu Jun 14 10:05:48 2012
From: wolfgang at rohdewald.de (Wolfgang Rohdewald)
Date: Thu, 14 Jun 2012 16:05:48 +0200
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
Message-ID: <2982820.WZDvvi63Zq@i5>

Am Donnerstag, 14. Juni 2012, 14:46:45 schrieb Vladimir Peri?:
> As far as Ubuntu itself is concerned, I wasn't aware that Twisted is
> available from the default Ubuntu CD.

you are right, it is not. I thought all of kdegames is preinstalled but
actually only kpat is there. Sorry for the noise.

-- 
Wolfgang


From gavin at gromper.net  Thu Jun 14 11:17:30 2012
From: gavin at gromper.net (Gavin Panella)
Date: Thu, 14 Jun 2012 16:17:30 +0100
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
Message-ID: <CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>

On 14 June 2012 13:46, Vladimir Peri? <vlada.peric at gmail.com> wrote:
...
> As far as Ubuntu itself is concerned, I wasn't aware that Twisted is
> available from the default Ubuntu CD.

It's on the Ubuntu 12.04 Server CD; see
http://cdimages.ubuntu.com/ubuntu-server/precise/daily/current/precise-server-amd64.list


From martin at webscio.net  Thu Jun 14 11:34:15 2012
From: martin at webscio.net (Martin)
Date: Thu, 14 Jun 2012 16:34:15 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
Message-ID: <4FDA0477.2010809@webscio.net>

Hi again,

I've a bit of code that does the following:

f = MyReconnectingClientFactory()
iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())

now I would expect that iConn.factory would be my f, but as it turns out 
it's an instance of some TLSMemoryBIOFactory.. Why is that so?

After some digging, I was able to find f under 
iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use 
that, but it just sounds a bit weird to me.. or is this normal?

Cheers


From exarkun at twistedmatrix.com  Thu Jun 14 20:40:36 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 15 Jun 2012 00:40:36 -0000
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <4FDA0477.2010809@webscio.net>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
Message-ID: <20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>

On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>Hi again,
>
>I've a bit of code that does the following:
>
>f = MyReconnectingClientFactory()
>iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>
>now I would expect that iConn.factory would be my f, but as it turns 
>out
>it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>
>After some digging, I was able to find f under
>iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>that, but it just sounds a bit weird to me.. or is this normal?

There is no "factory" attribute on the `IConnector` interface at all:

http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html

Neither is there a "transport" attribute, nor do any of the transport 
interfaces have a "protocol" attribute.

All this means that Twisted isn't promising you anything about the 
meaning or existence of any of these attributes.

So, why don't you just use `f` instead?

Jean-Paul


From martin at webscio.net  Fri Jun 15 04:50:17 2012
From: martin at webscio.net (Martin)
Date: Fri, 15 Jun 2012 09:50:17 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
Message-ID: <4FDAF749.2050307@webscio.net>

On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
> On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>> Hi again,
>>
>> I've a bit of code that does the following:
>>
>> f = MyReconnectingClientFactory()
>> iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>
>> now I would expect that iConn.factory would be my f, but as it turns
>> out
>> it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>
>> After some digging, I was able to find f under
>> iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>> that, but it just sounds a bit weird to me.. or is this normal?
> There is no "factory" attribute on the `IConnector` interface at all:
>
> http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>
> Neither is there a "transport" attribute, nor do any of the transport
> interfaces have a "protocol" attribute.
>
> All this means that Twisted isn't promising you anything about the
> meaning or existence of any of these attributes.
>
> So, why don't you just use `f` instead?
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
I can't use f because I'm saving the IConnector object for later, so 
that I can disconnect it when needed. I'm not sure if saving the f 
object would have any effect, since doing anything to that after the 
connection was created will surely have no effect, or?

In general, I can do iConn.disconnect(), but this being a 
ReconnectingClientFactory, it attempts to reconnect straight away.. 
That's why I was looking to get the factory object somehow, so that I 
could call stopTrying() on it first. If there's a better approach to 
this, please let me know :)

Thanks


From exarkun at twistedmatrix.com  Fri Jun 15 09:15:43 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 15 Jun 2012 13:15:43 -0000
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <4FDAF749.2050307@webscio.net>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
Message-ID: <20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>

On 08:50 am, martin at webscio.net wrote:
>On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
>>On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>>>Hi again,
>>>
>>>I've a bit of code that does the following:
>>>
>>>f = MyReconnectingClientFactory()
>>>iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>
>>>now I would expect that iConn.factory would be my f, but as it turns
>>>out
>>>it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>>
>>>After some digging, I was able to find f under
>>>iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>>>that, but it just sounds a bit weird to me.. or is this normal?
>>There is no "factory" attribute on the `IConnector` interface at all:
>>
>>http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>>
>>Neither is there a "transport" attribute, nor do any of the transport
>>interfaces have a "protocol" attribute.
>>
>>All this means that Twisted isn't promising you anything about the
>>meaning or existence of any of these attributes.
>>
>>So, why don't you just use `f` instead?
>>
>>Jean-Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>I can't use f because I'm saving the IConnector object for later, so
>that I can disconnect it when needed. I'm not sure if saving the f
>object would have any effect, since doing anything to that after the
>connection was created will surely have no effect, or?

This doesn't make sense.  `f` is not an object and neither is 
`connector.factory` nor 
`connector.transport.protocol.wrappedProtocol.factory`.  They're 
expressions that, at least in this case, and in the context you're using 
them, all evaluate to the same object: the MyReconnectingClientFactory 
instance created at the beginning of your example code.

It doesn't matter which of them you call stopTrying on, since there 
isn't actually any "them", there's just the single factory object.

Put another way, saving `f` will let you do exactly what you want, in 
part because it's no different from what the `IConnector` implementation 
happens to be doing.

Jean-Paul
>In general, I can do iConn.disconnect(), but this being a
>ReconnectingClientFactory, it attempts to reconnect straight away..
>That's why I was looking to get the factory object somehow, so that I
>could call stopTrying() on it first. If there's a better approach to
>this, please let me know :)
>
>Thanks
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From barry at python.org  Fri Jun 15 10:23:15 2012
From: barry at python.org (Barry Warsaw)
Date: Fri, 15 Jun 2012 10:23:15 -0400
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
References: <19421453.L4QdkbeXYx@i5>
Message-ID: <20120615102315.1bb292d5@resist.wooz.org>

On Jun 14, 2012, at 02:27 PM, Wolfgang Rohdewald wrote:

>it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.
>
>So programs using twisted (including my own) will not come preinstalled.
>
>how is progress going with twisted and Python3?

Just to be clear, the mandate for Python 3 is just for the standard desktop
image.  We won't ship Python 2 on that image, but this does not affect server
or any other flavor.  It doesn't change what /usr/bin/python points to or the
status of Python 2 in the archives.  It *does* mean that right after a fresh
install from the desktop image, you won't have /usr/bin/python, but you will
have /usr/bin/python3, and you'll likely get Python 2 pretty soon after you
install anything not on the image.

We're having some internal discussions about how Canonical and Ubuntu can help
with the porting effort, but as is usual these things take time.  I've been
hoping to get in touch with Vladimir on IRC to discuss things further, but
just haven't connected yet.

Cheers,
-Barry
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20120615/7ba9a12e/attachment.pgp 

From stephen.c.waterbury at nasa.gov  Fri Jun 15 11:41:53 2012
From: stephen.c.waterbury at nasa.gov (Stephen Waterbury)
Date: Fri, 15 Jun 2012 11:41:53 -0400
Subject: [Twisted-Python] [OT] Re:  twisted/python3/ubuntu 12.10
In-Reply-To: <20120615102315.1bb292d5@resist.wooz.org>
References: <19421453.L4QdkbeXYx@i5> <20120615102315.1bb292d5@resist.wooz.org>
Message-ID: <4FDB57C1.6020203@nasa.gov>

Apologies for continuing a bit OT, but I suspect others on
twisted-python would be interested too ...

So when you "get Python 2" would that be /usr/bin/python2?
And if you wanted a /usr/bin/python, it would be up to you
to create a link to whichever of 2 or 3 you wanted it to be?

Steve

On 06/15/2012 10:23 AM, Barry Warsaw wrote:
> On Jun 14, 2012, at 02:27 PM, Wolfgang Rohdewald wrote:
>
>> it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.
>>
>> So programs using twisted (including my own) will not come preinstalled.
>>
>> how is progress going with twisted and Python3?
>
> Just to be clear, the mandate for Python 3 is just for the standard desktop
> image.  We won't ship Python 2 on that image, but this does not affect server
> or any other flavor.  It doesn't change what /usr/bin/python points to or the
> status of Python 2 in the archives.  It *does* mean that right after a fresh
> install from the desktop image, you won't have /usr/bin/python, but you will
> have /usr/bin/python3, and you'll likely get Python 2 pretty soon after you
> install anything not on the image.
>
> We're having some internal discussions about how Canonical and Ubuntu can help
> with the porting effort, but as is usual these things take time.  I've been
> hoping to get in touch with Vladimir on IRC to discuss things further, but
> just haven't connected yet.
>
> Cheers,
> -Barry
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From martin at webscio.net  Fri Jun 15 12:46:27 2012
From: martin at webscio.net (Martin)
Date: Fri, 15 Jun 2012 17:46:27 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
	<20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
Message-ID: <4FDB66E3.8060704@webscio.net>

On 15/06/12 14:15, exarkun at twistedmatrix.com wrote:
> On 08:50 am, martin at webscio.net wrote:
>> On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
>>> On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>>>> Hi again,
>>>>
>>>> I've a bit of code that does the following:
>>>>
>>>> f = MyReconnectingClientFactory()
>>>> iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>>
>>>> now I would expect that iConn.factory would be my f, but as it turns
>>>> out
>>>> it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>>>
>>>> After some digging, I was able to find f under
>>>> iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>>>> that, but it just sounds a bit weird to me.. or is this normal?
>>> There is no "factory" attribute on the `IConnector` interface at all:
>>>
>>> http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>>>
>>> Neither is there a "transport" attribute, nor do any of the transport
>>> interfaces have a "protocol" attribute.
>>>
>>> All this means that Twisted isn't promising you anything about the
>>> meaning or existence of any of these attributes.
>>>
>>> So, why don't you just use `f` instead?
>>>
>>> Jean-Paul
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> I can't use f because I'm saving the IConnector object for later, so
>> that I can disconnect it when needed. I'm not sure if saving the f
>> object would have any effect, since doing anything to that after the
>> connection was created will surely have no effect, or?
> This doesn't make sense.  `f` is not an object and neither is
> `connector.factory` nor
> `connector.transport.protocol.wrappedProtocol.factory`.  They're
> expressions that, at least in this case, and in the context you're using
> them, all evaluate to the same object: the MyReconnectingClientFactory
> instance created at the beginning of your example code.
>
> It doesn't matter which of them you call stopTrying on, since there
> isn't actually any "them", there's just the single factory object.
>
> Put another way, saving `f` will let you do exactly what you want, in
> part because it's no different from what the `IConnector` implementation
> happens to be doing.
>
> Jean-Paul
>> In general, I can do iConn.disconnect(), but this being a
>> ReconnectingClientFactory, it attempts to reconnect straight away..
>> That's why I was looking to get the factory object somehow, so that I
>> could call stopTrying() on it first. If there's a better approach to
>> this, please let me know :)
>>
>> Thanks
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Hm OK. As I said I'm completely new to this. I just figured that since 
the f instance was created before the connection was made, it would not 
be really related to the connection.

What happens if I create two SSL connections with the same factory f? 
Would calling "stopTrying" on that f then affect both connections? Or 
just the last? I guess I can simply test this out myself, it's just 
slightly weird to me. :)


From _ at lvh.cc  Fri Jun 15 13:13:22 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 15 Jun 2012 12:13:22 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
Message-ID: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>

Hi,

I'm trying to get browsers to communicate with an AMP API. Right now I'm trying to do that using WebSockets with Corbin SImpson's txWS. Eventually I'll try to write a Twisted implementation of SockJS, which is basically portable websockets all the way down to IE6.

The issue is that while AMP is inherently a binary protocol, WebSockets transfer text (well, that's a lie: there's a binary version, but it's even less widely supported than WebSockets themselves -- and SockJS doesn't support it at all, although it's on the roadmap). So, I need an alternative, preferably 7-bit, serialization for AMP boxes.

My first attempt at that serialization is JSON -- widely supported in browsers, and should map pretty closely to what AMP can do:

  - AMPLIsts are objects
  - ListOfs are arrays
  - numeric types and strings are more or less natively supported (except JSON is always text, never bytes)
  - booleans are booleans

Right now I have something that almost works, but is really a crude, cheap, untested hack. I'm wondering if there's a better integration point.

"""
AMP over WebSockets support.
"""
import json
import txws

from twisted.internet import defer, protocol
from twisted.python import log


class Bridge(protocol.Protocol):
    """
    Two-way AMP over WebSockets bridge.
    """
    def __init__(self, amp):
        self._amp = amp
        amp.startReceivingBoxes(self)
        amp.boxSender = self


    def sendBox(self, box):
        """
        Sends a box over the WebSocket as JSON.
        """
        log.msg("Sending box: {}".format(box))
        self.transport.write(json.dumps(box))


    def jsonObjectReceived(self, obj):
        """
        Hands the JSON object (dict) over to ampBoxReceived.
        """
        log.msg("JSON object received: {}".format(obj))
        self._amp.boxReceiver.ampBoxReceived(obj)


    def dataReceived(self, data):
        """
        Calls jsonObjectReceived.

        This assumes that JSON objects will always arrive as 1 chunk.
        """
        self.jsonObjectReceived(json.loads(data))



class BridgeFactory(protocol.Factory):
    """
    A factory for AMP over WebSockets bridges.
    """
    def __init__(self, ampFactory):
        self._ampFactory = ampFactory


    def buildProtocol(self, addr):
        """
        Builds a bridge and associates it with an AMP protocol instance.
        """
        return Bridge(self._ampFactory.buildProtocol(addr))



def makeFactory(ampFactory):
    """
    Makes a WebSocket factory that bridges AMP messages.
    """
    return txws.WebSocketFactory(BridgeFactory(ampFactory))


An issue I'm running into is an AMP ListOf. With the above code, ListOf still gets translated to a string, and obviously I want it to be a list. When that ListOf has actual data in it, I get the binary representation.

The other issues that I predict will happen but haven't ran into yet (because I don't use that functionality) are:
    - booleans -- expects "True" or "False" but gets True or False (true and false in JSON) -- can be fixed both on the client and the server side, not sure where the optimal place would be
    - AMPList -- same reason as ListOf

ints, floats? will magically work, but it's a bit ugly: the only reason it works is that the factory for them is int and float, and, well, int(5) == 5 == int("5"), so it doesn't actually matter if it's already an int or a str.

In my Command implementation, I'm returning {"k": anAxiomQuery} -- so it's iterable but not a list. I can write a custom JSON encoder that can take arbitrary iterables, of course.

cheers
lvh





From tobias.oberstein at tavendo.de  Fri Jun 15 14:58:07 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Fri, 15 Jun 2012 11:58:07 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
Message-ID: <634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>

> Eventually I'll
> try to write a Twisted implementation of SockJS, which is basically portable
> websockets all the way down to IE6.

FWIW:
You can have WebSocket for IE8/9 via Flash plus https://github.com/gimite/web-socket-js
and for IE6-9 with http://code.google.com/chrome/chromeframe/

With a Hybi-10+/RFC6455/Hixie-76 capable WebSocket server implementation,
plus above, you basically can support any relevant browser .. so is it really worth
implementing SockJS server-side, redoing all the semiworking hacks that try to
shoehorn bidirectional messaging into HTTP request/response?



From itamar at itamarst.org  Fri Jun 15 15:23:46 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 15 Jun 2012 15:23:46 -0400
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <4FDB66E3.8060704@webscio.net>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
	<20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
	<4FDB66E3.8060704@webscio.net>
Message-ID: <4FDB8BC2.4020708@itamarst.org>

On 06/15/2012 12:46 PM, Martin wrote:
> What happens if I create two SSL connections with the same factory f?
> Would calling "stopTrying" on that f then affect both connections? Or
> just the last? I guess I can simply test this out myself, it's just
> slightly weird to me. :)
It's better to have one factory per outgoing connection; with 
reconnection I suspect it'll actually break if you try to use one 
factory for two connections.



From glyph at twistedmatrix.com  Fri Jun 15 15:32:37 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 15 Jun 2012 12:32:37 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
Message-ID: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>


On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:

> Hi,
> 
> I'm trying to get browsers to communicate with an AMP API.

This is also what <https://launchpad.net/frack> is doing.  I hope that it becomes a common enough practice that there's a library for it :).

> The issue is that while AMP is inherently a binary protocol, WebSockets transfer text (well, that's a lie: there's a binary version, but it's even less widely supported than WebSockets themselves -- and SockJS doesn't support it at all, although it's on the roadmap). So, I need an alternative, preferably 7-bit, serialization for AMP boxes.

Did you immediately discard the obvious solution of "base64 everything"? :)

> An issue I'm running into is an AMP ListOf. With the above code, ListOf still gets translated to a string, and obviously I want it to be a list. When that ListOf has actual data in it, I get the binary representation.

I would recommend implementing an entirely alternate serialization code path; specifically, one which adapts the existing AMP Argument objects to some new interface ('.toJSON()'), with a default adapter that uses the existing toString()/fromString(), and then specific adapters for those interfaces which need modification, like ListOf and Boolean.

-glyph

From washort at twistedmatrix.com  Fri Jun 15 19:10:04 2012
From: washort at twistedmatrix.com (Allen Short)
Date: Fri, 15 Jun 2012 18:10:04 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
Message-ID: <CAEzUHiPeagQzaHdtvVFUK++-jCEpCNDiXJ9_4u5vp1BSdN93=g@mail.gmail.com>

On Fri, Jun 15, 2012 at 2:32 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
>
>> Hi,
>>
>> I'm trying to get browsers to communicate with an AMP API.
>
> This is also what <https://launchpad.net/frack> is doing. ?I hope that it becomes a common enough practice that there's a library for it :).

I should note that the code in Frack currently just uses amp commands
as a basis for JSON-RPC messages over HTTP. Obviously this loses a
major benefit of AMP, which is both ends being able to send messages;
also, there's no attempt to handle bytes. Adding some comet/websocket
flavor to this would be welcome, of course. ;-)


From _ at lvh.cc  Fri Jun 15 21:24:09 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 15 Jun 2012 20:24:09 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>

Unfortunately I have a lot of customers that are non technical, use IE6/7,
and can't or won't use chrome frame. I wish that wasn't the case, but... I
also have no data on the presence of old and busted flash plugins.

I might do this anyway beause:

- the relevant ticket hasn't landed yet
- even if you don't get 100% you get a lot more for very little effort

Do you happen to know what the figures are like for iOS? I know mobile
Safari only got web sockets in 4.something (1 or 2), I'm not sure what
version of the protocol it speaks either, and obviously flash isn't an
option...

Cheers
lvh

On Friday, June 15, 2012, Tobias Oberstein wrote:

> > Eventually I'll
> > try to write a Twisted implementation of SockJS, which is basically
> portable
> > websockets all the way down to IE6.
>
> FWIW:
> You can have WebSocket for IE8/9 via Flash plus
> https://github.com/gimite/web-socket-js
> and for IE6-9 with http://code.google.com/chrome/chromeframe/
>
> With a Hybi-10+/RFC6455/Hixie-76 capable WebSocket server implementation,
> plus above, you basically can support any relevant browser .. so is it
> really worth
> implementing SockJS server-side, redoing all the semiworking hacks that
> try to
> shoehorn bidirectional messaging into HTTP request/response?
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120615/cc2edbb9/attachment.htm 

From therve at free.fr  Sat Jun 16 02:46:08 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Sat, 16 Jun 2012 08:46:08 +0200
Subject: [Twisted-Python] [OT] Re:  twisted/python3/ubuntu 12.10
In-Reply-To: <4FDB57C1.6020203@nasa.gov>
References: <19421453.L4QdkbeXYx@i5> <20120615102315.1bb292d5@resist.wooz.org>
	<4FDB57C1.6020203@nasa.gov>
Message-ID: <4FDC2BB0.8030103@free.fr>

Le 15/06/2012 17:41, Stephen Waterbury a ?crit :
> Apologies for continuing a bit OT, but I suspect others on
> twisted-python would be interested too ...
> 
> So when you "get Python 2" would that be /usr/bin/python2?
> And if you wanted a /usr/bin/python, it would be up to you
> to create a link to whichever of 2 or 3 you wanted it to be?

No, /usr/bin/python will stay Python 2, and Python 3 will continue to
reside at /usr/bin/python3. At least for the foreseeable future and if
you don't create the links yourself.

-- 
Thomas


From tobias.oberstein at tavendo.de  Sat Jun 16 03:20:20 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 16 Jun 2012 00:20:20 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
Message-ID: <634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>

> Do you happen to know what the figures are like for iOS? I know mobile Safari only got web sockets in 4.something (1 or 2), I'm not sure what version of the protocol it speaks either, and obviously flash isn't an option...

4.2.1 .. which includes very old devices like iPod Touch 2nd gen.

All those speak Hixie-76 .. I don't know yet about iOS6 (do you have a device? would set up a test ..)

FWIW, Windows Phone 8 will come with IE10, and hence first class RFC6455. I don't know if MS ports that down to WP <8.

You can find more details rgd. WebSocket browser support here http://autobahn.ws/browsers

Disclosure: I am affiliated with above (but the information given there applies in general) .. and said that, let me at least mention 2 other probably controversial points;)

Protocol. I understand you are into AMP. IMHO there will be at least 2 others in that fields of higher level messaging across WebSocket:

STOMP over WebSocket
http://www.jmesnil.net/stomp-websocket/doc/

WebSocket Application Messaging Protocol (WAMP)
http://wamp.ws/

Twisted WebSocket. There is also https://github.com/tavendo/AutobahnPython .. OSS project I run. This does Hixie-76 and WAMP.

Cheers,
Tobias


From _ at lvh.cc  Sat Jun 16 09:45:43 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Sat, 16 Jun 2012 08:45:43 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
Message-ID: <CAE_Hg6YzhQKEAGEaigFMGKLqLSuA3uaEL11Vq_nmkL9R5U07zw@mail.gmail.com>

On Friday, June 15, 2012, Glyph wrote:

>
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
>
> > Hi,
> >
> > I'm trying to get browsers to communicate with an AMP API.
>
> This is also what <https://launchpad.net/frack> is doing.  I hope that it
> becomes a common enough practice that there's a library for it :).


See Allen's comment. It'd certainly be great. Do you think that for old
browsers (that is ie6 & 7) it's acceptable to tell them to go install
chrome frame? ( for Franck and hence twisteds future bug tracker). If the
answer is yes, is that because it will take a while to switch, or would
that also be true today?

Bear in mind that my users are a lot less technical and many are stuck on
winxp because they're corporate machines...


> > The issue is that while AMP is inherently a binary protocol, WebSockets
> transfer text (well, that's a lie: there's a binary version, but it's even
> less widely supported than WebSockets themselves -- and SockJS doesn't
> support it at all, although it's on the roadmap). So, I need an
> alternative, preferably 7-bit, serialization for AMP boxes.
>
> Did you immediately discard the obvious solution of "base64 everything"? :)


Base64 does not fix the problem of encoding and decoding binary responses
on the client side, only on the transport. Binary support (Blob and
ArrayBuffer are those 2 essentially unsupported things. It may be feasible
to build a Unicode amp representation, however meaningless some code points
may then become (that's not a tab stop, it's a length specifier!!)


>
> > An issue I'm running into is an AMP ListOf. With the above code, ListOf
> still gets translated to a string, and obviously I want it to be a list.
> When that ListOf has actual data in it, I get the binary representation.
>
> I would recommend implementing an entirely alternate serialization code
> path; specifically, one which adapts the existing AMP Argument objects to
> some new interface ('.toJSON()'), with a default adapter that uses the
> existing toString()/fromString(), and then specific adapters for those
> interfaces which need modification, like ListOf and Boolean.


I'm not sure I understand at which point that takes effect since apparently
AMP.sendBox is too late?


>
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120616/26bc01bd/attachment.htm 

From _ at lvh.cc  Sat Jun 16 09:51:02 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Sat, 16 Jun 2012 08:51:02 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
	<634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <CAE_Hg6a-v-1_xj==RVo_A62f75ctYGb83YiCoPBU9j3ysRcUOA@mail.gmail.com>

On Saturday, June 16, 2012, Tobias Oberstein wrote:

> > Do you happen to know what the figures are like for iOS? I know mobile
> Safari only got web sockets in 4.something (1 or 2), I'm not sure what
> version of the protocol it speaks either, and obviously flash isn't an
> option...
>
> 4.2.1 .. which includes very old devices like iPod Touch 2nd gen.


... But only when fully updated, right? (I realize the update penetration
on iOS is quite high)


>
> All those speak Hixie-76 .. I don't know yet about iOS6 (do you have a
> device? would set up a test ..)


Typing this on an ipad3, but so far it's the usual iOS 5.something


> FWIW, Windows Phone 8 will come with IE10, and hence first class RFC6455.
> I don't know if MS ports that down to WP <8.


So what's the story on wp7? Does that thing have flash?


>
> You can find more details rgd. WebSocket browser support here
> http://autobahn.ws/browsers
>
>
Thanks, I'll take a look :)


> Disclosure: I am affiliated with above (but the information given there
> applies in general) .. and said that, let me at least mention 2 other
> probably controversial points;)
>
> Protocol. I understand you are into AMP. IMHO there will be at least 2
> others in that fields of higher level messaging across WebSocket:
>
> STOMP over WebSocket
> http://www.jmesnil.net/stomp-<http://www.jmesnil.net/stomp-websocket/doc/>
> websocket/doc/ <http://www.jmesnil.net/stomp-websocket/doc/>


Used stomp a while ago when I was being subjected to message queues. I
guess it mig be interesting :)


> WebSocket Application Messaging Protocol (WAMP)
> http://wamp.ws/


I knew this was a raven do thing -- how's adoption going?

Also I'm surprised that jsonrpc didn't make this list! Seems like a perfect
candidate for browsers.


>
> Twisted WebSocket. There is also https://github.com/tavendo/AutobahnPython.. OSS project I run. This does Hixie-76 and WAMP.
>
> Cheers,
> Tobias
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120616/404f6bfb/attachment.htm 

From tom.sheffler at gmail.com  Sat Jun 16 11:16:03 2012
From: tom.sheffler at gmail.com (Tom Sheffler)
Date: Sat, 16 Jun 2012 08:16:03 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
Message-ID: <CAMBtMctFgHQYxR6C6CemH6_Mtfb7Ju=4sfV1h5EyKjX0reyv1A@mail.gmail.com>

>
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
>
> > Hi,
> >
> > I'm trying to get browsers to communicate with an AMP API.
>
> This is also what <https://launchpad.net/frack> is doing.  I hope that it
> becomes a common enough practice that there's a library for it :).
>
> > The issue is that while AMP is inherently a binary protocol, WebSockets
> transfer text (well, that's a lie: there's a binary version, but it's even
> less widely supported than WebSockets themselves -- and SockJS doesn't
> support it at all, although it's on the roadmap). So, I need an
> alternative, preferably 7-bit, serialization for AMP boxes.
>
> Did you immediately discard the obvious solution of "base64 everything"? :)


I had success simply base64'ing binary data.  And I believe encoding that
is safe for binary data, but I may be wrong.

Use this:
            data = binascii.b2a_base64(bindata).strip()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120616/408d9a32/attachment.htm 

From tobias.oberstein at tavendo.de  Sat Jun 16 14:20:10 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 16 Jun 2012 11:20:10 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6a-v-1_xj==RVo_A62f75ctYGb83YiCoPBU9j3ysRcUOA@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
	<634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6a-v-1_xj==RVo_A62f75ctYGb83YiCoPBU9j3ysRcUOA@mail.gmail.com>
Message-ID: <634914A010D0B943A035D226786325D4337803B16B@EXVMBX020-12.exch020.serverdata.net>

> Do you happen to know what the figures are like for iOS? I know mobile Safari only got web sockets in 4.something (1 or 2), I'm not sure what version of the protocol it speaks either, and obviously flash isn't an option...

4.2.1 .. which includes very old devices like iPod Touch 2nd gen.

... But only when fully updated, right? (I realize the update penetration on iOS is quite high)

=> right.
?
FWIW, Windows Phone 8 will come with IE10, and hence first class RFC6455. I don't know if MS ports that down to WP <8.

So what's the story on wp7? Does that thing have flash?

=> the story is: WP is irrelevant given it's market share;)
no, seriously, AFAIK WP7 does not have Flash and there is no WebSocket possible, since it doesn't allow to install i.e. Opera Mobile either.?

WebSocket Application Messaging Protocol (WAMP)
http://wamp.ws/

I knew this was a raven do thing -- how's adoption going?

https://github.com/nicokaiser/wamp.io
https://github.com/cboden/Ratchet

others are starting

http://stackoverflow.com/questions/10882370/websocket-request-response-subprotocol
another one is working on WAMP over SockJS

we maintain a list on
http://wamp.ws/implementations


Also I'm surprised that jsonrpc didn't make this list! Seems like a perfect candidate for browsers.
?
jsonrpc:
* verbose (they have read too much xml)
* not fully Web .. methods aren't identified by URIs
* does not have PubSub, but only RPC



From justin.venus at gmail.com  Sat Jun 16 16:14:33 2012
From: justin.venus at gmail.com (Justin Venus)
Date: Sat, 16 Jun 2012 15:14:33 -0500
Subject: [Twisted-Python] Solaris 11 Build Slave
Message-ID: <CACL=7as2r6tn=6pdh3Y8gqMxd=P-1vEzbPUPpHKJ0XoQHqDTEQ@mail.gmail.com>

I am in the process of setting up a build Solaris 11 build slave for
twisted (currently at the bzr checkout phase).  I am interested in
having it join the other build slaves.  My long term goal for adding
this build slave is to help resolve a low priority ticket[1] that I am
interested in seeing completed.

Thank you,

-- 
Justin Venus
justin.venus at gmail.com

1) http://twistedmatrix.com/trac/ticket/5538


From glyph at twistedmatrix.com  Sat Jun 16 17:51:58 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 16 Jun 2012 14:51:58 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6YzhQKEAGEaigFMGKLqLSuA3uaEL11Vq_nmkL9R5U07zw@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
	<CAE_Hg6YzhQKEAGEaigFMGKLqLSuA3uaEL11Vq_nmkL9R5U07zw@mail.gmail.com>
Message-ID: <DBB3CE78-F06C-4C9B-A1F3-351BE3DDEB8F@twistedmatrix.com>


On Jun 16, 2012, at 6:45 AM, Laurens Van Houtven wrote:

> Do you think that for old browsers (that is ie6 & 7) it's acceptable to tell them to go install chrome frame? ( for Franck and hence twisteds future bug tracker). If the answer is yes, is that because it will take a while to switch, or would that also be true today?

I think it's acceptable for *Twisted*'s bug tracker to just tell them to install a different browser, because who cares? ;-)

See here: http://www.sitemeter.com/?a=stats&s=sm7twistedmatrix&r=13

Only 5% of our traffic comes from IE, only 1% comes from IE7 and we don't get any from IE6.

Obviously these metrics don't apply to a general solution, of course.

> I'm not sure I understand at which point that takes effect since apparently AMP.sendBox is too late?


I *think* the right place to hook in would be IResponderLocator.

If you write your own locateResponder, you can do your own serialization, except in your case a "string" (for the purposes of toString/fromString) is just a JSON data structure, and an "object" is the corresponding Python data structure which is almost always the same.  This is a slight abuse of the API, but it will allow for maximal re-use of all the dispatching logic.  You will probably need to touch a private attribute or two, most noticeably _commandDispatch; you need to stuff your own wrapper around commandClass (that proxies 'arguments' and 'response' attributes to wrap them in something that does the requisite adaptation to change the meaning of fromString/toString) in locateResponder, you don't want to override all the behavior.

Then you override sendBox to just do plain old JSON serialization and you're done.

Please feel free to file bugs on any private parts of the API that you need to touch in order to make an alternate serialization.  The inability to programmatically discover which methods are responders and what commands they are responders for using a public API strikes me as a glaring oversight.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120616/7b5efbea/attachment.htm 

From exarkun at twistedmatrix.com  Sun Jun 17 00:05:43 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 17 Jun 2012 04:05:43 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1339905943.3.2102677078@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120617/19cb7a25/attachment.htm 

From glyph at twistedmatrix.com  Sun Jun 17 04:27:25 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 17 Jun 2012 01:27:25 -0700
Subject: [Twisted-Python] Solaris 11 Build Slave
In-Reply-To: <CACL=7as2r6tn=6pdh3Y8gqMxd=P-1vEzbPUPpHKJ0XoQHqDTEQ@mail.gmail.com>
References: <CACL=7as2r6tn=6pdh3Y8gqMxd=P-1vEzbPUPpHKJ0XoQHqDTEQ@mail.gmail.com>
Message-ID: <0C1A295D-EB66-4E3D-BF52-CAFD994F50A6@twistedmatrix.com>


On Jun 16, 2012, at 1:14 PM, Justin Venus wrote:

> I am in the process of setting up a build Solaris 11 build slave for
> twisted (currently at the bzr checkout phase).  I am interested in
> having it join the other build slaves.  My long term goal for adding
> this build slave is to help resolve a low priority ticket[1] that I am
> interested in seeing completed.

That sounds great.  Thanks for taking the initiative.  I look forward to that ticket being resolved.

Please note that the 'priority' field is, at best, just a statement of the likelihood that someone from the core team will work on a ticket, and at worst, just noise.  If you're working on it, it's whatever priority you think it is ;-).

As a first step, can you join this team (and its mailing list) on Launchpad?

	https://launchpad.net/~twisted-buildslaves

(Also, any other buildslave maintainers should add themselves there, in case Tom Prince didn't notice you.)

Someone should be getting in touch with you about buildslave credentials shortly, if they haven't already.

-glyph



From cds at corbinsimpson.com  Mon Jun 18 16:59:06 2012
From: cds at corbinsimpson.com (Corbin Simpson)
Date: Mon, 18 Jun 2012 13:59:06 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
Message-ID: <20120618205906.GA22365@ps35699.dreamhostps.com>

On Fri, Jun 15, 2012 at 12:32:37PM -0700, Glyph wrote:
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
> > The issue is that while AMP is inherently a binary protocol, WebSockets transfer text (well, that's a lie: there's a binary version, but it's even less widely supported than WebSockets themselves -- and SockJS doesn't support it at all, although it's on the roadmap). So, I need an alternative, preferably 7-bit, serialization for AMP boxes.
> Did you immediately discard the obvious solution of "base64 everything"? :)

I should point out that at least one WebSockets JavaScript thing, noVNC, uses
base64 as its solution to the problem, and that's what I originally wrote txWS
to deal with. This works quite fine for OSUOSL on all of the target browsers
we care about.

I don't know if this is the *right* solution, but it certainly is the least
painful.

~ C.


From _ at lvh.cc  Mon Jun 18 17:33:17 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Mon, 18 Jun 2012 16:33:17 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <20120618205906.GA22365@ps35699.dreamhostps.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
	<20120618205906.GA22365@ps35699.dreamhostps.com>
Message-ID: <CAE_Hg6aQ35VaXUshgBEQij7U6eb0MuBo5ePvnzjva--Xjj4HQA@mail.gmail.com>

How do you process that data on the client side given the poor support of
ArrayBuffer and Blob?

On Monday, June 18, 2012, Corbin Simpson wrote:

> On Fri, Jun 15, 2012 at 12:32:37PM -0700, Glyph wrote:
> > On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
> > > The issue is that while AMP is inherently a binary protocol,
> WebSockets transfer text (well, that's a lie: there's a binary version, but
> it's even less widely supported than WebSockets themselves -- and SockJS
> doesn't support it at all, although it's on the roadmap). So, I need an
> alternative, preferably 7-bit, serialization for AMP boxes.
> > Did you immediately discard the obvious solution of "base64 everything"?
> :)
>
> I should point out that at least one WebSockets JavaScript thing, noVNC,
> uses
> base64 as its solution to the problem, and that's what I originally wrote
> txWS
> to deal with. This works quite fine for OSUOSL on all of the target
> browsers
> we care about.
>
> I don't know if this is the *right* solution, but it certainly is the least
> painful.
>
> ~ C.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120618/ae9bf327/attachment.htm 

From cds at corbinsimpson.com  Mon Jun 18 21:54:44 2012
From: cds at corbinsimpson.com (Corbin Simpson)
Date: Mon, 18 Jun 2012 18:54:44 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6aQ35VaXUshgBEQij7U6eb0MuBo5ePvnzjva--Xjj4HQA@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
	<20120618205906.GA22365@ps35699.dreamhostps.com>
	<CAE_Hg6aQ35VaXUshgBEQij7U6eb0MuBo5ePvnzjva--Xjj4HQA@mail.gmail.com>
Message-ID: <20120619015444.GA16325@ps35699.dreamhostps.com>

On Mon, Jun 18, 2012 at 04:33:17PM -0500, Laurens Van Houtven wrote:
> How do you process that data on the client side given the poor support of
> ArrayBuffer and Blob?

Good question! I haven't really read through that part of noVNC. I try to stay
blissfully ignorant of the details. You could read through kanaka/noVNC for
hints.

~ C.


From warner at lothar.com  Tue Jun 19 03:27:34 2012
From: warner at lothar.com (Brian Warner)
Date: Tue, 19 Jun 2012 00:27:34 -0700
Subject: [Twisted-Python] ANN: Foolscap-0.6.4 released
Message-ID: <4FE029E6.7070906@lothar.com>


Just a brief note, I released Foolscap-0.6.4 tonight. This contains a
handful of small bugfixes and cleanups, gathered over the last 5 months.

The most significant change was that the "git-foolscap" tools were
cleaned up. These live in doc/examples/ , and let you configure remote
access to your Git repositories that uses a FURL instead of e.g. a
locked-down ssh shell.

Tarballs are available from the usual places:

 PyPI:   http://pypi.python.org/pypi/foolscap/0.6.4
 github: https://github.com/warner/foolscap/
 trac:   http://foolscap.lothar.com/trac/

Tarballs are signed with the Foolscap Release Signing Key (0xAF1B4A2A),
fingerprint = 7341 45FE BE70 E5D0 59C7 EDCD 3E86 92AF AF1B 4A2A.

Full release notes attached below.

have a groovy day,
 -Brian



* Release 0.6.4 (18-Jun-2012)

** Minor Changes

The unreliable 'extras_require' property in setup.py, which allowed
other python programs to declare a dependency on foolscap's
"secure_connections" feature, was removed. See README.packagers for
alternate instructions. (#174)

'flogtool' log-dumping commands (dump, tail, web-viewer) now accept a
consistent --timestamps= argument to control how event times are
displayed (UTC, local, seconds-since-epoch, etc). (#192, #193)

Certain invalid "location" strings (accepted by Tub.setLocation and put
into FURLs) are rejected earlier, and with better error messages. The
error message produced when 'flogtool dump' is given a FURL-file
(instead of an event log file) has been improved.

The Incident Gatherer will tolerate incident-file errors better,
fetching remaining incidents instead of halting. (#190)

The git-over-foolscap tools were cleaned up, and the documentation was
brought into line with the implementation. (#197)

Other minor bugs were fixed: #179, #191, #194, #195, #196


From vlada.peric at gmail.com  Tue Jun 19 10:43:25 2012
From: vlada.peric at gmail.com (=?UTF-8?Q?Vladimir_Peri=C4=87?=)
Date: Tue, 19 Jun 2012 16:43:25 +0200
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
	relaxation of coverage requirements
Message-ID: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>

Hello everyone,

as some of you may be aware, I was accepted as a Google Summer of Code
student, with the project of porting Twisted to Python 3 (or getting
as close as possible)[1]. Now, there are basically two strategies:
maintaining py2 code and using 2to3 when installing under py3, or
maintaining a codebase which is compatible with both 2 and 3 (a third
strategy is to have two codebases, but I feel this would introduce a
too high maintenance burden).[2] What both these approaches have in
common, is that it is advantageous (and mandatory if not using 2to3)
to update the syntax to more modern idioms (eg. exception syntax, uses
of apply and has_key, the print statement...). And therein lies my
problem: Twisted policy is that all code should be tested, and tests
should be added to modified, untested code... and I have to make a lot
of trivial syntax changes to a lot of code, some of which is untested.
Now, I agree that tests are very important, and in general I'm for the
100% coverage policy Twisted is trying to approach, but I feel that
this is beyond the scope of my project and, more importantly, would
slow my progress considerably.

As such, I would like to request permission for the coverage
requirements to be relaxed for specific Python 3 changes. As mentioned
above, this would allow me to progress much faster and concentrate on
the bigger incompatibilities. Of course, I would still write tests for
more complex code, if and where required. Furthermore, I propose to
use the 2to3 tool to make these conversions, which relies on analysis
of the underlying code - as such, it is much better than any
grep-related solution and much less prone to errors. It is also very
widely used, so I consider it a very robust solution. Still, I realize
this would be quite a big breach of policy, so I would like to make a
case for each change individually. This list is not exhaustive, merely
what I have encountered so far.

1) print statement

Probably the most noticeable difference, the print statement is a
function in Python 3. Now, if we opt for a single, compatible
codebase, all print statements should be converted to functions.
Luckily, 2.6 can import it from __future__ so this is not a problem.
There's more than 1000 print statements in Twisted code and even just
checking if each is covered would be a daunting job. Even if no other
exception is permitted, I think this one makes a lot of sense as it's
very hard to do anything wrong here.

2) has_key method

The issue that started this (see ticket 4053); the has_key method on
dicts has been changed to the builtin keyword "in" ("key in dict"
instead of dict.has_key(key)). Now, exarkun disliked my automatic
change, so I split the work into tested and untested uses (the tested
are fixed) but there's still about a hundred remaining. Now, a concern
here is that some Twisted classes could also be defining has_key
methods, but all three such classes also provide an equivalent
__contains__ method so this cannot be a problem (plus, I believe the
has_key methods should be deprecated but that's a separate issue). In
the end, this is a purely syntatic change and I do not feel like
writing tests everywhere around Twisted.

3) apply

To quote Lennart Regebro, "The Python 2 builtin apply() has been
removed in Python 3. It?s used to call a function, but since you can
call the function directly it serves no purpose and has been
deprecated since Python 2.3." I've replaced those covered by tests,
but there's still some 23 untested uses left, most of them in
spread/ui/tkutil, and I would *really* prefer not to write tests for
that.

4) Exceptions

The exceptions syntax has changed to be less ambiguous, and the new
"except Exception as e" syntax is available in 2.6 and up. This is a
trivial syntax change (change a comma to "as") and can be performed
automatically on the approx. 230-240 uses. I'm not sure how many of
these are already tested, though. Some other things also changed about
Exceptions, but these I will address separately.


That's as far as I got so far. As I said above, most of these are
simple syntax changes which are hard to get wrong. If we opt for the
2to3 route, all of those would be converted automatically but it is
still preferable to get the code in a more "modern" state. Of course,
if not using 2to3, all of the above changes will have to be made.
Waiving the tests requirement would allow me to progress much faster,
and, at the end of the day, my task is to add Python 3 support, not
improve test coverage to 100%.

Thank you all in advance for any input (or help!).




[1] If you are interested, the best way of following my progress is
probably to subscribe to my blog (which is also syndicated on Planted
Twisted):
vperic.blogspot.com

[2] The merits of each approach can be discussed elsewhere, this is
not the goal of this e-mail. As of right now, there is sufficient work
remaining that will be equally beneficial no matter which one is
chosen, and this is the stuff I'm focusing on now.

-- 
Vladimir Peri?


From itamar at itamarst.org  Tue Jun 19 10:58:48 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 10:58:48 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
Message-ID: <4FE093A8.3000205@itamarst.org>

On 06/19/2012 10:43 AM, Vladimir Peri? wrote:
> 3) apply
>
> To quote Lennart Regebro, "The Python 2 builtin apply() has been
> removed in Python 3. It?s used to call a function, but since you can
> call the function directly it serves no purpose and has been
> deprecated since Python 2.3." I've replaced those covered by tests,
> but there's still some 23 untested uses left, most of them in
> spread/ui/tkutil, and I would *really* prefer not to write tests for
> that.
One particular alternative here is to provide a compatible local 
implementation of apply() that is imported if you're in Python 3. And 
then you just need to test that the new apply is the same as the 
built-in apply.

Also, tkutil can be deprecated in my opinion, and there's no need to 
port deprecated code.


From glyph at twistedmatrix.com  Tue Jun 19 11:55:51 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 19 Jun 2012 08:55:51 -0700
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
	relaxation of coverage requirements
In-Reply-To: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
Message-ID: <C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>


On Jun 19, 2012, at 7:43 AM, Vladimir Peri? wrote:

> there are basically two strategies:
> maintaining py2 code and using 2to3 when installing under py3, or
> maintaining a codebase which is compatible with both 2 and 3

Based on the experiences of other porters I have talked to, and heard speaking on mailing lists, 2to3 still has yet to live up to its promise, and a unified codebase is much more manageable.  That said, there are syntax changes ('except...as...' being the big one) that make supporting 2.5->3 difficult, and only becomes reasonable at 2.6->3.  So it may be necessary to get 2to3 involved for some fixers.

> As such, I would like to request permission for the coverage
> requirements to be relaxed for specific Python 3 changes. As mentioned
> above, this would allow me to progress much faster and concentrate on
> the bigger incompatibilities. Of course, I would still write tests for
> more complex code, if and where required. 

History teaches us that "simple" or "trivial" changes which allegedly don't require tests because they are "so obvious" are pretty much always going to introduce critical bugs.  I like the idea of finding ways to avoid testing defunct code like what Itamar proposes, but a blanket exception to the testing policy is not acceptable to me.

That said, you don't have to write particularly awesome or thorough tests.  Any line of code can be reached by satisfying its dependencies and calling the function it's in.  So, if you need to, write trivial fakes or build on Twisted's existing library of test doubles (e.g. proto_helpers).

For example, let's say you're changing a method on a class whose initializer takes 30 arguments and all of them involve library objects from some heinously complex 3rd-party library with thousands of functions in it.  You don't need to actually make a "real" instance of the class, if it's just that one method which needs modification.  Write a test subclass which only works for that method, or even just suck out the im_func attribute and pass it a different 'self'.  (Oops!  Python 3 changes everything so you have to write a utility which converts a method-or-function into a function in a version-dependent way first.  But you get the idea.)

I guess this does represent some relaxation of the testing policy, since for a real functional change I probably wouldn't accept a test quite as gross as what I just described... but in this case, we're just trying to make sure the code still runs in both cases.

If this seems like more work than you signed up for... well, congratulations, this internship is providing you with a realistic view of professional software development ;-).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120619/5f5cebc7/attachment-0001.htm 

From solipsis at pitrou.net  Tue Jun 19 13:15:44 2012
From: solipsis at pitrou.net (Antoine Pitrou)
Date: Tue, 19 Jun 2012 19:15:44 +0200
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
Message-ID: <20120619191544.05f7f5fe@pitrou.net>

On Tue, 19 Jun 2012 08:55:51 -0700
Glyph <glyph at twistedmatrix.com> wrote:
> 
> On Jun 19, 2012, at 7:43 AM, Vladimir Peri? wrote:
> 
> > there are basically two strategies:
> > maintaining py2 code and using 2to3 when installing under py3, or
> > maintaining a codebase which is compatible with both 2 and 3
> 
> Based on the experiences of other porters I have talked to, and heard speaking on mailing lists, 2to3 still has yet to live up to its promise, and a unified codebase is much more manageable.  That said, there are syntax changes ('except...as...' being the big one) that make supporting 2.5->3 difficult, and only becomes reasonable at 2.6->3.

A shared codebase definitely isn't reasonable if you want to support
Python 2.5. At least not for a project the size of Twisted.

(why doesn't your mail / news client word wrap paragraps?)

Regards

Antoine.




From lists at collab.nl  Tue Jun 19 13:29:53 2012
From: lists at collab.nl (Thijs Triemstra)
Date: Tue, 19 Jun 2012 19:29:53 +0200
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <20120619191544.05f7f5fe@pitrou.net>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<20120619191544.05f7f5fe@pitrou.net>
Message-ID: <4FE0B711.4040403@collab.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 06/19/2012 07:15 PM, Antoine Pitrou wrote:
> On Tue, 19 Jun 2012 08:55:51 -0700 Glyph <glyph at twistedmatrix.com>
> wrote:
>> 
>> On Jun 19, 2012, at 7:43 AM, Vladimir Peri? wrote:
>> 
>>> there are basically two strategies: maintaining py2 code and
>>> using 2to3 when installing under py3, or maintaining a codebase
>>> which is compatible with both 2 and 3
>> 
>> Based on the experiences of other porters I have talked to, and
>> heard speaking on mailing lists, 2to3 still has yet to live up to
>> its promise, and a unified codebase is much more manageable.
>> That said, there are syntax changes ('except...as...' being the
>> big one) that make supporting 2.5->3 difficult, and only becomes
>> reasonable at 2.6->3.
> 
> A shared codebase definitely isn't reasonable if you want to
> support Python 2.5. At least not for a project the size of
> Twisted.

Support for 2.5 is dropped in the next release [1].

Cheers,

Thijs

[1] http://twistedmatrix.com/trac/ticket/5553
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)

iEYEARECAAYFAk/gtwwACgkQBRbMGagbo3miRACfQLrEU+oWZHmbg5e0hc7yXSeV
G2kAnjuRStNGzeR4KbnaXacKNt/029tt
=rJGt
-----END PGP SIGNATURE-----


From itamar at itamarst.org  Tue Jun 19 13:50:06 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 13:50:06 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
Message-ID: <2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>

>  That said, there are
> syntax changes ('except...as...' being the big one) that make supporting
> 2.5->3 difficult, and only becomes reasonable at 2.6->3.  So it may be
> necessary to get 2to3 involved for some fixers.

We've dropped support for 2.6 post-12.1. So that's not a problem. We can
do these changes now in trunk.




From glyph at twistedmatrix.com  Tue Jun 19 14:03:00 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 19 Jun 2012 11:03:00 -0700
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
	relaxation of coverage requirements
In-Reply-To: <2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
Message-ID: <33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>

Le Jun 19, 2012 ? 10:50 AM, Itamar Turner-Trauring <itamar at itamarst.org> a ?crit :

> We've dropped support for 2.6 post-12.1. So that's not a problem. We can
> do these changes now in trunk.

I really hope you mean 2.5.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120619/a7cb5830/attachment.htm 

From itamar at itamarst.org  Tue Jun 19 14:28:00 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 14:28:00 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
	<33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
Message-ID: <710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>

> Le Jun 19, 2012 ? 10:50 AM, Itamar Turner-Trauring <itamar at itamarst.org> a
> ?crit :
>
>> We've dropped support for 2.6 post-12.1. So that's not a problem. We can
>> do these changes now in trunk.
>
> I really hope you mean 2.5.

Sigh. Yes. Next release will be 2.6 and later.



From dynamicgl at gmail.com  Tue Jun 19 15:01:40 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Wed, 20 Jun 2012 03:01:40 +0800
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
	<33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
	<710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>
Message-ID: <CABkOF6RDYbeRnXY01fOVtoYgtirP2eK8LqaFMMVaTGtOo4dJNQ@mail.gmail.com>

On Wed, Jun 20, 2012 at 2:28 AM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> > Le Jun 19, 2012 ? 10:50 AM, Itamar Turner-Trauring <itamar at itamarst.org>
> a
> > ?crit :
> >
> >> We've dropped support for 2.6 post-12.1. So that's not a problem. We can
> >> do these changes now in trunk.
> >
> > I really hope you mean 2.5.
>
> Sigh. Yes. Next release will be 2.6 and later.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


Sigh too,  I am still using 2.6.6 & twisted 11.0; however I think it is not
so difficult to migrate to 2.7.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120620/47296fd4/attachment.htm 

From itamar at itamarst.org  Tue Jun 19 15:39:00 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 15:39:00 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <CABkOF6RDYbeRnXY01fOVtoYgtirP2eK8LqaFMMVaTGtOo4dJNQ@mail.gmail.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
	<33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
	<710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>
	<CABkOF6RDYbeRnXY01fOVtoYgtirP2eK8LqaFMMVaTGtOo4dJNQ@mail.gmail.com>
Message-ID: <4FE0D554.2040000@itamarst.org>

On 06/19/2012 03:01 PM, gelin yan wrote:
>
> Sigh too,  I am still using 2.6.6 & twisted 11.0; however I think it 
> is not so difficult to migrate to 2.7.
>
Just to be clear, Python 2.6 is still supported as of 12.1 and will 
continue to be supported (at the minimum for the next release and 
probably after that as well).


From flaviogrossi at ymail.com  Wed Jun 20 05:02:24 2012
From: flaviogrossi at ymail.com (flavio)
Date: Wed, 20 Jun 2012 09:02:24 +0000 (UTC)
Subject: [Twisted-Python] AMP WebSockets bridging
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
Message-ID: <loom.20120620T105614-536@post.gmane.org>

Laurens Van Houtven <_ <at> lvh.cc> writes:

> Eventually I'll try to write a Twisted implementation of SockJS, which is
> basically portable websockets all the way down to IE6.

hi, i recently started working with sockjs and you may want to check out my work-
in-progress server implementation at https://github.com/flaviogrossi/sockjs-
cyclone (comments are very welcome)

please note that, although based on twisted, it sits on top of the cyclone web 
framework and uses its websocket implementation.

with regards of the messaging protocol, right now i'm using wamp which seems to 
fit my needs.


bye,
flavio




From peter.westlake at pobox.com  Thu Jun 21 09:52:11 2012
From: peter.westlake at pobox.com (Peter Westlake)
Date: Thu, 21 Jun 2012 14:52:11 +0100
Subject: [Twisted-Python] Speed of rendering?
Message-ID: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>

How fast is rendering in nevow? I have a page which is mostly a large
table with a couple of hundred rows, each containing a form. The
generated HTML is about 500 KB. Leaving aside the question of whether
this is a good design or not, how long would you expect it to take? I'm
interested specifically in what happens between the end of beforeRender
and the request being completed. It takes about a minute and a quarter.
Is that normal, or is there a delay in my code that I haven't found yet?

Thanks,

Peter.


From glyph at twistedmatrix.com  Thu Jun 21 13:16:19 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 21 Jun 2012 10:16:19 -0700
Subject: [Twisted-Python] Speed of rendering?
In-Reply-To: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
References: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
Message-ID: <278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>


Le Jun 21, 2012 ? 6:52 AM, Peter Westlake <peter.westlake at pobox.com> a ?crit :

> How fast is rendering in nevow? I have a page which is mostly a large
> table with a couple of hundred rows, each containing a form. The
> generated HTML is about 500 KB. Leaving aside the question of whether
> this is a good design or not, how long would you expect it to take? I'm
> interested specifically in what happens between the end of beforeRender
> and the request being completed. It takes about a minute and a quarter.
> Is that normal, or is there a delay in my code that I haven't found yet?
> 
> Thanks,
> 
> Peter.

What does your profiler tell you?

-glyph

From peter.westlake at pobox.com  Fri Jun 22 17:52:09 2012
From: peter.westlake at pobox.com (Peter Westlake)
Date: Fri, 22 Jun 2012 22:52:09 +0100
Subject: [Twisted-Python] Speed of rendering?
In-Reply-To: <278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>
References: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
	<278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>
Message-ID: <1340401929.23556.140661092828441.30BFC47D@webmail.messagingengine.com>

On Thu, Jun 21, 2012, at 10:16, Glyph wrote:
> 
> Le Jun 21, 2012 ? 6:52 AM, Peter Westlake <peter.westlake at pobox.com> a
> ?crit :
> 
> > How fast is rendering in nevow? I have a page which is mostly a large
> > table with a couple of hundred rows, each containing a form. The
> > generated HTML is about 500 KB. Leaving aside the question of whether
> > this is a good design or not, how long would you expect it to take? I'm
> > interested specifically in what happens between the end of beforeRender
> > and the request being completed. It takes about a minute and a quarter.
> > Is that normal, or is there a delay in my code that I haven't found yet?
> > 
> > Thanks,
> > 
> > Peter.
> 
> What does your profiler tell you?

There's a profiler? There's a profiler! There it is,
right up there at the top of the man page! Thank you!

Peter.

P.S. sorry, this was really meant to go to the twisted-web list.
I suspect a last-minute substitution by my email client.


From glyph at twistedmatrix.com  Fri Jun 22 18:27:05 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 22 Jun 2012 15:27:05 -0700
Subject: [Twisted-Python] Speed of rendering?
In-Reply-To: <1340401929.23556.140661092828441.30BFC47D@webmail.messagingengine.com>
References: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
	<278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>
	<1340401929.23556.140661092828441.30BFC47D@webmail.messagingengine.com>
Message-ID: <163A532D-64BC-43E7-95C6-77F7294E5EC8@twistedmatrix.com>


On Jun 22, 2012, at 2:52 PM, Peter Westlake <peter.westlake at pobox.com> wrote:

> On Thu, Jun 21, 2012, at 10:16, Glyph wrote:
>> 
>> Le Jun 21, 2012 ? 6:52 AM, Peter Westlake <peter.westlake at pobox.com> a
>> ?crit :
>> 
>>> How fast is rendering in nevow? I have a page which is mostly a large
>>> table with a couple of hundred rows, each containing a form. The
>>> generated HTML is about 500 KB. Leaving aside the question of whether
>>> this is a good design or not, how long would you expect it to take? I'm
>>> interested specifically in what happens between the end of beforeRender
>>> and the request being completed. It takes about a minute and a quarter.
>>> Is that normal, or is there a delay in my code that I haven't found yet?
>>> 
>>> Thanks,
>>> 
>>> Peter.
>> 
>> What does your profiler tell you?
> 
> There's a profiler? There's a profiler! There it is,
> right up there at the top of the man page! Thank you!

Not only is there a profiler, there's benchmarks!

	<http://speed.twistedmatrix.com/timeline/>

Maybe you could add one for twisted.web.template rendering speed?

> Peter.
> 
> P.S. sorry, this was really meant to go to the twisted-web list.
> I suspect a last-minute substitution by my email client.


Thanks for the thought, at least.  Cross-posted.

-glyph



From tom.prince at ualberta.net  Fri Jun 22 18:57:16 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Fri, 22 Jun 2012 16:57:16 -0600
Subject: [Twisted-Python] Buildbot downtime
Message-ID: <87d34rt0oj.fsf@hermes.hocat.ca>


I am plannig to upgrade twisted's buildbot in the near future. In
preperation for that, I am going to take down the production buildbot
on Tuesday, June 26, around 1600 UTC[1].

During that time, the result of any builds done will be lost. Thus, I'd
ask that people avoid committing to trunk during that time.

I will send a reminder before I take down the buildbot both here, and on
#twisted and #twisted-dev.

  Tom

[1] http://timeanddate.com/worldclock/meetingtime.html?iso=20120626&p1=80&p2=224&p3=43


From glyph at twistedmatrix.com  Fri Jun 22 19:09:25 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 22 Jun 2012 16:09:25 -0700
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87d34rt0oj.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca>
Message-ID: <BFFE0A67-4C7C-40B9-8A38-670AA37AF0EE@twistedmatrix.com>


On Jun 22, 2012, at 3:57 PM, Tom Prince <tom.prince at ualberta.net> wrote:

> 
> I am plannig to upgrade twisted's buildbot in the near future. In
> preperation for that, I am going to take down the production buildbot
> on Tuesday, June 26, around 1600 UTC[1].
> 
> During that time, the result of any builds done will be lost. Thus, I'd
> ask that people avoid committing to trunk during that time.
> 
> I will send a reminder before I take down the buildbot both here, and on
> #twisted and #twisted-dev.
> 
>  Tom
> 
> [1] http://timeanddate.com/worldclock/meetingtime.html?iso=20120626&p1=80&p2=224&p3=43

Thanks for doing this much-needed maintenance, Tom.  I'm sure everyone else developing Twisted appreciates the effort as much as I do, too :).

-glyph




From tobias.oberstein at tavendo.de  Sat Jun 23 09:02:45 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 23 Jun 2012 06:02:45 -0700
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
Message-ID: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>

Hi all,

I'd like to ask if it would be appropriate and whether there is interest in making

"support Twisted on PyPy"

a project milestone for Twisted.

I'd start contributing by setting up a buildslave for PyPy so that issues can be made transparent and identified and progress tracked.

Since PyPy is still very fast moving, that would need to be a beefy machine, since I would track PyPy trunk doing nightly PyPy builds and then use that for Twisted trials.
It likely would involve stopping buildbot for the short period of PyPy installation, restarting it afterwards.

Is there community interest in Twisted/PyPy .. people that might help with working on tickets (which I guess will likely result from such an effort)?

My hope would also be that PyPy devs might be interested in having the PyPy codebase tested against such a broad suite like Twisted on a regular basis and would help with PyPy non-Twisted-but-triggered issues ..
 
Cheers,
Tobias


PS: The current trial results (Ubuntu 10.04 LTS i386, Twisted trunk, select reactor)

twisted.conch.test.test_manhole

 => ManholeLoopbackStdio: timeouts on all 13 test cases
 
twisted.conch.test.test_recvline

 => HistoricRecvlineLoopbackStdio: timeouts on all 2 test cases
 
 => RecvlineLoopbackStdio: timeouts on all 9 test cases
 
 
twisted.internet.test.test_endpoints

 => ServerStringTests => test_ssl: hangs forever!



From exarkun at twistedmatrix.com  Sun Jun 24 00:05:51 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 24 Jun 2012 04:05:51 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1340510751.45.670251740@twistedmatrix.com

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120624/d4663d0f/attachment.htm 

From tom.prince at ualberta.net  Sun Jun 24 12:12:37 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Sun, 24 Jun 2012 10:12:37 -0600
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
In-Reply-To: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <87vcigsn7u.fsf@hermes.hocat.ca>

Tobias Oberstein <tobias.oberstein at tavendo.de> writes:

> Hi all,
>
> I'd like to ask if it would be appropriate and whether there is interest in making
>
> "support Twisted on PyPy"
>
> a project milestone for Twisted.

To a large extent, it is already supported (although not everything
works yet. It has been deployed in production though (twistedmatrix.com
is largely hosted on pypy+twisted).

> I'd start contributing by setting up a buildslave for PyPy so that issues can be made transparent and identified and progress tracked.
>
> Since PyPy is still very fast moving, that would need to be a beefy machine, since I would track PyPy trunk doing nightly PyPy builds and then use that for Twisted trials.
> It likely would involve stopping buildbot for the short period of PyPy installation, restarting it afterwards.

That would be useful. We currently do have a buildslave running tests
against pypy, but we are looking at decomissioning it.

The buildbot takes care of installing new versions of pypy (on a weekly
basis).

I'll need the follwing information from you (offlist):

  1. Desired slave name.

     This will show up on http://buildbot.twistedmatrix.com/buildslaves

  2. Password

     This is sent cleartext.

  3. Email address

     This is used to send mail messages when the slave disappears. It
     isn't visible.

  5. How many parallel builds you want allowed to run.


> PS: The current trial results (Ubuntu 10.04 LTS i386, Twisted trunk, select reactor)
> ...

You should open tickets for these issues.


From exarkun at twistedmatrix.com  Sun Jun 24 12:41:49 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 24 Jun 2012 16:41:49 -0000
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
In-Reply-To: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <20120624164149.3516.839722173.divmod.xquotient.3@localhost6.localdomain6>

On 23 Jun, 01:02 pm, tobias.oberstein at tavendo.de wrote:
>Hi all,
>
>I'd like to ask if it would be appropriate and whether there is 
>interest in making
>
>"support Twisted on PyPy"
>
>a project milestone for Twisted.
>
>I'd start contributing by setting up a buildslave for PyPy so that 
>issues can be made transparent and identified and progress tracked.

Of course, feel free to contribute more reliable slaves to the project. 
But there is already a PyPy builder set up, and has been for several 
years.  A more productive contribution would probably be to fix the 
tests that have been failing on it for most or all of that time. :)
>Since PyPy is still very fast moving, that would need to be a beefy 
>machine, since I would track PyPy trunk doing nightly PyPy builds and 
>then use that for Twisted trials.
>It likely would involve stopping buildbot for the short period of PyPy 
>installation, restarting it afterwards.

Fortunately this isn't required.

Jean-Paul
>Is there community interest in Twisted/PyPy .. people that might help 
>with working on tickets (which I guess will likely result from such an 
>effort)?
>
>My hope would also be that PyPy devs might be interested in having the 
>PyPy codebase tested against such a broad suite like Twisted on a 
>regular basis and would help with PyPy non-Twisted-but-triggered issues 
>..
>
>Cheers,
>Tobias
>
>
>PS: The current trial results (Ubuntu 10.04 LTS i386, Twisted trunk, 
>select reactor)
>
>twisted.conch.test.test_manhole
>
>=> ManholeLoopbackStdio: timeouts on all 13 test cases
>
>twisted.conch.test.test_recvline
>
>=> HistoricRecvlineLoopbackStdio: timeouts on all 2 test cases
>
>=> RecvlineLoopbackStdio: timeouts on all 9 test cases
>
>
>twisted.internet.test.test_endpoints
>
>=> ServerStringTests => test_ssl: hangs forever!
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From ghanavatian.ali at gmail.com  Sun Jun 24 17:21:57 2012
From: ghanavatian.ali at gmail.com (Ali Ghanavatian)
Date: Mon, 25 Jun 2012 01:51:57 +0430
Subject: [Twisted-Python] need to make imap server replies
Message-ID: <CAJnGD_d-VA=HmyacTUBX70m3ZaBEXcEQeyu6oPNrY_S_7iu71A@mail.gmail.com>

hello there,
here's the code i got:
http://pastebin.ubuntu.com/1058070/

it's implementing an imap server, problem is it does not retrieve emails.
mail client can capture new emails only once and after that, it should
disconnect and reconnect again to receive new emails (again only once).

any idea what's wrong here?

thanks in advance

-- 
 Sincerely
A. Ghanavatian <http://www.google.com/profiles/ghanavatian.ali>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120625/49644b32/attachment.htm 

From martin at webscio.net  Mon Jun 25 08:15:17 2012
From: martin at webscio.net (Martin)
Date: Mon, 25 Jun 2012 13:15:17 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
	<20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
Message-ID: <4FE85655.7070707@webscio.net>

On 15/06/12 14:15, exarkun at twistedmatrix.com wrote:
> On 08:50 am, martin at webscio.net wrote:
>> On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
>>> On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>>>> Hi again,
>>>>
>>>> I've a bit of code that does the following:
>>>>
>>>> f = MyReconnectingClientFactory()
>>>> iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>>
>>>> now I would expect that iConn.factory would be my f, but as it turns
>>>> out
>>>> it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>>>
>>>> After some digging, I was able to find f under
>>>> iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>>>> that, but it just sounds a bit weird to me.. or is this normal?
>>> There is no "factory" attribute on the `IConnector` interface at all:
>>>
>>> http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>>>
>>> Neither is there a "transport" attribute, nor do any of the transport
>>> interfaces have a "protocol" attribute.
>>>
>>> All this means that Twisted isn't promising you anything about the
>>> meaning or existence of any of these attributes.
>>>
>>> So, why don't you just use `f` instead?
>>>
>>> Jean-Paul
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> I can't use f because I'm saving the IConnector object for later, so
>> that I can disconnect it when needed. I'm not sure if saving the f
>> object would have any effect, since doing anything to that after the
>> connection was created will surely have no effect, or?
> This doesn't make sense.  `f` is not an object and neither is
> `connector.factory` nor
> `connector.transport.protocol.wrappedProtocol.factory`.  They're
> expressions that, at least in this case, and in the context you're using
> them, all evaluate to the same object: the MyReconnectingClientFactory
> instance created at the beginning of your example code.
>
> It doesn't matter which of them you call stopTrying on, since there
> isn't actually any "them", there's just the single factory object.
>
> Put another way, saving `f` will let you do exactly what you want, in
> part because it's no different from what the `IConnector` implementation
> happens to be doing.
>
> Jean-Paul
>> In general, I can do iConn.disconnect(), but this being a
>> ReconnectingClientFactory, it attempts to reconnect straight away..
>> That's why I was looking to get the factory object somehow, so that I
>> could call stopTrying() on it first. If there's a better approach to
>> this, please let me know :)
>>
>> Thanks
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Just tested it and it works perfectly indeed, just using the 'f'. Thanks 
again :)



From martin at webscio.net  Mon Jun 25 08:16:30 2012
From: martin at webscio.net (Martin)
Date: Mon, 25 Jun 2012 13:16:30 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FD9CD44.1030102@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net>
Message-ID: <4FE8569E.3090504@webscio.net>

On 14/06/12 12:38, Martin wrote:
> Hi, thanks for your reply.
>
> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>
> def clientConnectionLost(self, connector, reason):
>         log.msg('Lost connection. Reason: %s' % reason)
> protocol.ReconnectingClientFactory.clientConnectionLost(self, 
> connector, reason)
>
> where "reason" is the Failure object that is "unhandled". is there 
> anything I could do to it there to make it handled?
>
> Also, the documentation in 
> http://twistedmatrix.com/documents/current/core/howto/defer.html says 
> that one can do d.addErrback(err.log) to deal with unhandled errors, 
> but what is d?
>
> In general, I'm not doing anything special.. I'm creating a 
> ReconnectingClientFactory and connecting it to a server..
> f = MyReconnectingClientFactory(..)
> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
> reactor.run()
>
> Basically it. Any thoughts? Thanks a lot!
>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>
>>> Hi there,
>>>
>>> I've been looking around for a solution for several hours now, and 
>>> maybe
>>> I'm just missing something..
>>>
>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>> works just fine, however, whenever the program ends running, I get a
>>> bunch of Unhandled error in Deferred messages in my log for each
>>> disconnection that occurred during runtime, such as Failure:
>>> twisted.internet.error.ConnectionLost: ...
>>>
>>> Is there any way I could somehow "handle" these during runtime, so that
>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>> spammed somehow..)
>> These messages are coming from some code which is issuing Deferreds, 
>> not from ReconnectingClientFactory.  You need to add an errback to 
>> those Deferreds in your application code.  There's no way to write a 
>> catch-all, just like there's no way to write a catch-all that can 
>> stop exceptions from being raised in basic Python.
>>
>> I can't say more without a code example, preferably 
>> a<http://sscce.org/>.
>>
>> -glyph
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
No suggestions as to how I could get rid of this? :(



From vk.86.811 at gmail.com  Mon Jun 25 11:31:32 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Mon, 25 Jun 2012 17:31:32 +0200
Subject: [Twisted-Python] XMLRPC --> Twisted
In-Reply-To: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
References: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
Message-ID: <CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>

Hi,

   I have made a server code in xmlrpc. It has a command
"server.register_multicall_functions()".  How do I write the same in
twisted server?

This is the main of the twisted server :
--------------------

if __name__ == '__main__':
    from twisted.internet import reactor
    r = Example()
    reactor.listenTCP(7070, server.Site(r))
    print 'avtundile'
    reactor.run()

-----------------------
Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120625/90e41750/attachment.htm 

From skaarjj at gmail.com  Mon Jun 25 17:27:06 2012
From: skaarjj at gmail.com (Adrian Overbury)
Date: Tue, 26 Jun 2012 07:27:06 +1000
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8569E.3090504@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
Message-ID: <B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>

On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:

> On 14/06/12 12:38, Martin wrote:
>> Hi, thanks for your reply.
>> 
>> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>> 
>> def clientConnectionLost(self, connector, reason):
>>        log.msg('Lost connection. Reason: %s' % reason)
>> protocol.ReconnectingClientFactory.clientConnectionLost(self, 
>> connector, reason)
>> 
>> where "reason" is the Failure object that is "unhandled". is there 
>> anything I could do to it there to make it handled?
>> 
>> Also, the documentation in 
>> http://twistedmatrix.com/documents/current/core/howto/defer.html says 
>> that one can do d.addErrback(err.log) to deal with unhandled errors, 
>> but what is d?
>> 
>> In general, I'm not doing anything special.. I'm creating a 
>> ReconnectingClientFactory and connecting it to a server..
>> f = MyReconnectingClientFactory(..)
>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>> reactor.run()
>> 
>> Basically it. Any thoughts? Thanks a lot!
>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>> 
>>>> Hi there,
>>>> 
>>>> I've been looking around for a solution for several hours now, and 
>>>> maybe
>>>> I'm just missing something..
>>>> 
>>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>>> works just fine, however, whenever the program ends running, I get a
>>>> bunch of Unhandled error in Deferred messages in my log for each
>>>> disconnection that occurred during runtime, such as Failure:
>>>> twisted.internet.error.ConnectionLost: ...
>>>> 
>>>> Is there any way I could somehow "handle" these during runtime, so that
>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>>> spammed somehow..)
>>> These messages are coming from some code which is issuing Deferreds, 
>>> not from ReconnectingClientFactory.  You need to add an errback to 
>>> those Deferreds in your application code.  There's no way to write a 
>>> catch-all, just like there's no way to write a catch-all that can 
>>> stop exceptions from being raised in basic Python.
>>> 
>>> I can't say more without a code example, preferably 
>>> a<http://sscce.org/>.
>>> 
>>> -glyph
>>> 
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>> 
>>> 
>> 
> No suggestions as to how I could get rid of this? :(
> 
> 

I believe glyph gave you the answer to that already.  In your example above of d.addErrBack, d is the deferred object.  Each of those needs to have an errback handler attached to it.  If you don't want to see anything out of them, simply don't print anything.

> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From martin at webscio.net  Mon Jun 25 17:47:31 2012
From: martin at webscio.net (Martin)
Date: Mon, 25 Jun 2012 22:47:31 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
Message-ID: <4FE8DC73.4080308@webscio.net>

On 25/06/12 22:27, Adrian Overbury wrote:
> On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:
>
>> On 14/06/12 12:38, Martin wrote:
>>> Hi, thanks for your reply.
>>>
>>> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>>>
>>> def clientConnectionLost(self, connector, reason):
>>>         log.msg('Lost connection. Reason: %s' % reason)
>>> protocol.ReconnectingClientFactory.clientConnectionLost(self,
>>> connector, reason)
>>>
>>> where "reason" is the Failure object that is "unhandled". is there
>>> anything I could do to it there to make it handled?
>>>
>>> Also, the documentation in
>>> http://twistedmatrix.com/documents/current/core/howto/defer.html says
>>> that one can do d.addErrback(err.log) to deal with unhandled errors,
>>> but what is d?
>>>
>>> In general, I'm not doing anything special.. I'm creating a
>>> ReconnectingClientFactory and connecting it to a server..
>>> f = MyReconnectingClientFactory(..)
>>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>> reactor.run()
>>>
>>> Basically it. Any thoughts? Thanks a lot!
>>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>>>
>>>>> Hi there,
>>>>>
>>>>> I've been looking around for a solution for several hours now, and
>>>>> maybe
>>>>> I'm just missing something..
>>>>>
>>>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>>>> works just fine, however, whenever the program ends running, I get a
>>>>> bunch of Unhandled error in Deferred messages in my log for each
>>>>> disconnection that occurred during runtime, such as Failure:
>>>>> twisted.internet.error.ConnectionLost: ...
>>>>>
>>>>> Is there any way I could somehow "handle" these during runtime, so that
>>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>>>> spammed somehow..)
>>>> These messages are coming from some code which is issuing Deferreds,
>>>> not from ReconnectingClientFactory.  You need to add an errback to
>>>> those Deferreds in your application code.  There's no way to write a
>>>> catch-all, just like there's no way to write a catch-all that can
>>>> stop exceptions from being raised in basic Python.
>>>>
>>>> I can't say more without a code example, preferably
>>>> a<http://sscce.org/>.
>>>>
>>>> -glyph
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>
>>>>
>> No suggestions as to how I could get rid of this? :(
>>
>>
> I believe glyph gave you the answer to that already.  In your example above of d.addErrBack, d is the deferred object.  Each of those needs to have an errback handler attached to it.  If you don't want to see anything out of them, simply don't print anything.
>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Well, kind of - I know that I need to do addErrBack on the deferred 
objects, I kind of knew that when I asked the original question having 
read the documentation on deferreds. What I still don't know though is 
how am I supposed to catch these deferreds - that is not being explained 
anywhere in the documentation I'm afraid.



From dynamicgl at gmail.com  Mon Jun 25 18:47:35 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Tue, 26 Jun 2012 06:47:35 +0800
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8DC73.4080308@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
	<4FE8DC73.4080308@webscio.net>
Message-ID: <CABkOF6TBVkf7QAiFFBzjB27RmpdF=6YWkwrn7GZU0GFH9pL1XA@mail.gmail.com>

On Tue, Jun 26, 2012 at 5:47 AM, Martin <martin at webscio.net> wrote:

> On 25/06/12 22:27, Adrian Overbury wrote:
> > On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:
> >
> >> On 14/06/12 12:38, Martin wrote:
> >>> Hi, thanks for your reply.
> >>>
> >>> Indeed, the ReconnectingClientFactory is being sent the Failure object
> to
> >>>
> >>> def clientConnectionLost(self, connector, reason):
> >>>         log.msg('Lost connection. Reason: %s' % reason)
> >>> protocol.ReconnectingClientFactory.clientConnectionLost(self,
> >>> connector, reason)
> >>>
> >>> where "reason" is the Failure object that is "unhandled". is there
> >>> anything I could do to it there to make it handled?
> >>>
> >>> Also, the documentation in
> >>> http://twistedmatrix.com/documents/current/core/howto/defer.html says
> >>> that one can do d.addErrback(err.log) to deal with unhandled errors,
> >>> but what is d?
> >>>
> >>> In general, I'm not doing anything special.. I'm creating a
> >>> ReconnectingClientFactory and connecting it to a server..
> >>> f = MyReconnectingClientFactory(..)
> >>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
> >>> reactor.run()
> >>>
> >>> Basically it. Any thoughts? Thanks a lot!
> >>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
> >>>>
> >>>>> Hi there,
> >>>>>
> >>>>> I've been looking around for a solution for several hours now, and
> >>>>> maybe
> >>>>> I'm just missing something..
> >>>>>
> >>>>> I've a factory that implements protocol.ReconnectingClientFactory
> which
> >>>>> works just fine, however, whenever the program ends running, I get a
> >>>>> bunch of Unhandled error in Deferred messages in my log for each
> >>>>> disconnection that occurred during runtime, such as Failure:
> >>>>> twisted.internet.error.ConnectionLost: ...
> >>>>>
> >>>>> Is there any way I could somehow "handle" these during runtime, so
> that
> >>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
> >>>>> spammed somehow..)
> >>>> These messages are coming from some code which is issuing Deferreds,
> >>>> not from ReconnectingClientFactory.  You need to add an errback to
> >>>> those Deferreds in your application code.  There's no way to write a
> >>>> catch-all, just like there's no way to write a catch-all that can
> >>>> stop exceptions from being raised in basic Python.
> >>>>
> >>>> I can't say more without a code example, preferably
> >>>> a<http://sscce.org/>.
> >>>>
> >>>> -glyph
> >>>>
> >>>>
> >>>> _______________________________________________
> >>>> Twisted-Python mailing list
> >>>> Twisted-Python at twistedmatrix.com
> >>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>>>
> >>>>
> >> No suggestions as to how I could get rid of this? :(
> >>
> >>
> > I believe glyph gave you the answer to that already.  In your example
> above of d.addErrBack, d is the deferred object.  Each of those needs to
> have an errback handler attached to it.  If you don't want to see anything
> out of them, simply don't print anything.
> >
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
> Well, kind of - I know that I need to do addErrBack on the deferred
> objects, I kind of knew that when I asked the original question having
> read the documentation on deferreds. What I still don't know though is
> how am I supposed to catch these deferreds - that is not being explained
> anywhere in the documentation I'm afraid.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi
   Usually you don't need to catch a deferred object..adding some callbacks
is enough..

I admit it might not be intuitive to understand defer concept at your first
trial. But it is powerful & elegant.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120626/93c5f2ba/attachment.htm 

From skaarjj at gmail.com  Mon Jun 25 18:47:33 2012
From: skaarjj at gmail.com (Adrian Overbury)
Date: Tue, 26 Jun 2012 08:47:33 +1000
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8DC73.4080308@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
	<4FE8DC73.4080308@webscio.net>
Message-ID: <60C3F4A4-751B-4B78-ADFD-6E77FE62342C@gmail.com>

On 26/06/2012, at 7:47 AM, Martin <martin at webscio.net> wrote:

> On 25/06/12 22:27, Adrian Overbury wrote:
>> On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:
>> 
>>> On 14/06/12 12:38, Martin wrote:
>>>> Hi, thanks for your reply.
>>>> 
>>>> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>>>> 
>>>> def clientConnectionLost(self, connector, reason):
>>>>        log.msg('Lost connection. Reason: %s' % reason)
>>>> protocol.ReconnectingClientFactory.clientConnectionLost(self,
>>>> connector, reason)
>>>> 
>>>> where "reason" is the Failure object that is "unhandled". is there
>>>> anything I could do to it there to make it handled?
>>>> 
>>>> Also, the documentation in
>>>> http://twistedmatrix.com/documents/current/core/howto/defer.html says
>>>> that one can do d.addErrback(err.log) to deal with unhandled errors,
>>>> but what is d?
>>>> 
>>>> In general, I'm not doing anything special.. I'm creating a
>>>> ReconnectingClientFactory and connecting it to a server..
>>>> f = MyReconnectingClientFactory(..)
>>>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>> reactor.run()
>>>> 
>>>> Basically it. Any thoughts? Thanks a lot!
>>>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>>>> 
>>>>>> Hi there,
>>>>>> 
>>>>>> I've been looking around for a solution for several hours now, and
>>>>>> maybe
>>>>>> I'm just missing something..
>>>>>> 
>>>>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>>>>> works just fine, however, whenever the program ends running, I get a
>>>>>> bunch of Unhandled error in Deferred messages in my log for each
>>>>>> disconnection that occurred during runtime, such as Failure:
>>>>>> twisted.internet.error.ConnectionLost: ...
>>>>>> 
>>>>>> Is there any way I could somehow "handle" these during runtime, so that
>>>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>>>>> spammed somehow..)
>>>>> These messages are coming from some code which is issuing Deferreds,
>>>>> not from ReconnectingClientFactory.  You need to add an errback to
>>>>> those Deferreds in your application code.  There's no way to write a
>>>>> catch-all, just like there's no way to write a catch-all that can
>>>>> stop exceptions from being raised in basic Python.
>>>>> 
>>>>> I can't say more without a code example, preferably
>>>>> a<http://sscce.org/>.
>>>>> 
>>>>> -glyph
>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> Twisted-Python mailing list
>>>>> Twisted-Python at twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>> 
>>>>> 
>>> No suggestions as to how I could get rid of this? :(
>>> 
>>> 
>> I believe glyph gave you the answer to that already.  In your example above of d.addErrBack, d is the deferred object.  Each of those needs to have an errback handler attached to it.  If you don't want to see anything out of them, simply don't print anything.
>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> 
> Well, kind of - I know that I need to do addErrBack on the deferred 
> objects, I kind of knew that when I asked the original question having 
> read the documentation on deferreds. What I still don't know though is 
> how am I supposed to catch these deferreds - that is not being explained 
> anywhere in the documentation I'm afraid.
> 
> 

The page and bookmark http://twistedmatrix.com/documents/current/core/howto/defer.html#auto4 explains it pretty well.  When there's an error your errback function is called and a failure object is passed to it.  You can handle it, drop it or pass it on as you please or seem appropriate.  Hope  that helps.

> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python


From p.mayers at imperial.ac.uk  Tue Jun 26 03:43:17 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 26 Jun 2012 08:43:17 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8DC73.4080308@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
	<4FE8DC73.4080308@webscio.net>
Message-ID: <4FE96815.7050204@imperial.ac.uk>

On 06/25/2012 10:47 PM, Martin wrote:

> Well, kind of - I know that I need to do addErrBack on the deferred
> objects, I kind of knew that when I asked the original question having
> read the documentation on deferreds. What I still don't know though is
> how am I supposed to catch these deferreds - that is not being explained
> anywhere in the documentation I'm afraid.

What do you mean by "catch these deferreds"?

A deferred is just a return value of a function, either in the Twisted 
API or your own code. For example:

from twisted.web import client

def ignore_err(failure):
     pass

def work():
     a_deferred = client.getPage(...)
     a_deferred.addErrback(ignore_err)

If you are seeing unhandled errors in deferreds and you don't know which 
deferreds, you're probably throwing away a return value somewhere. The 
traceback should point you in the right directon.


From vk.86.811 at gmail.com  Tue Jun 26 03:45:23 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Tue, 26 Jun 2012 09:45:23 +0200
Subject: [Twisted-Python] Call Back for startService() !
Message-ID: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>

Hi,

   I want to execute something after the service starts. Is there any call
back that I can associate with startService() ? I have checked the
documentation, but couldn't find anything as such :(

Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120626/4b03d07d/attachment.htm 

From tom.prince at ualberta.net  Tue Jun 26 09:50:01 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Tue, 26 Jun 2012 07:50:01 -0600
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87d34rt0oj.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca>
Message-ID: <87pq8muqra.fsf@hermes.hocat.ca>

This is a reminder that I am going to to take twisted's buildbot at 1600
UTC (just over an hour from now). While it is down, I'll ask people not
to commit to trunk. I'll send an email when it is back up.

While the buildbot is down, I will be testing a new version. Feel free
to poke around, and run builds, but be aware that any builds will be lost.

  Tom


From tom.prince at ualberta.net  Tue Jun 26 09:55:04 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Tue, 26 Jun 2012 07:55:04 -0600
Subject: [Twisted-Python] Buildbot downtime (correction
In-Reply-To: <87pq8muqra.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca> <87pq8muqra.fsf@hermes.hocat.ca>
Message-ID: <87mx3quqiv.fsf@hermes.hocat.ca>

I plan to take it down at 1600 UTC (which is ~2h, not 1h).

  Tom


From exarkun at twistedmatrix.com  Tue Jun 26 10:12:15 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 14:12:15 -0000
Subject: [Twisted-Python] Catching error in
 protocol.ReconnectingClientFactory
In-Reply-To: <4FE8569E.3090504@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
Message-ID: <20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>

On 25 Jun, 12:16 pm, martin at webscio.net wrote:
>>
>No suggestions as to how I could get rid of this? :(

I put together a minimal example of ReconnectingClientFactory for the 
connection refused case for you.  It's attached.  I don't see any errors 
logged.  If your program differs from this, please modify the example 
until it produces the problem.  Without this, it's very unlikely that 
anyone will be able to determine the problem or recommend a solution.

For future questions, if you could put together this minimal example 
yourself, you'll probably find you get help more quickly.

Here's the output I see when I run the program:

2012-06-26 10:07:26-0400 [-] Log opened.
2012-06-26 10:07:26-0400 [-] Starting factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
2012-06-26 10:07:26-0400 [Uninitialized] <twisted.internet.ssl.Connector 
instance at 0x2164128> will retry in 2 seconds
2012-06-26 10:07:26-0400 [Uninitialized] Stopping factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
2012-06-26 10:07:28-0400 [-] Starting factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
2012-06-26 10:07:28-0400 [Uninitialized] <twisted.internet.ssl.Connector 
instance at 0x2164128> will retry in 4 seconds
2012-06-26 10:07:28-0400 [Uninitialized] Stopping factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
^C2012-06-26 10:07:30-0400 [-] Received SIGINT, shutting down.
2012-06-26 10:07:30-0400 [-] Main loop terminated.


Jean-Paul
-------------- next part --------------
A non-text attachment was scrubbed...
Name: minimal-martin.py
Type: text/x-python
Size: 283 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20120626/af363c2f/attachment.py 

From exarkun at twistedmatrix.com  Tue Jun 26 10:47:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 14:47:25 -0000
Subject: [Twisted-Python] need to make imap server replies
In-Reply-To: <CAJnGD_d-VA=HmyacTUBX70m3ZaBEXcEQeyu6oPNrY_S_7iu71A@mail.gmail.com>
References: <CAJnGD_d-VA=HmyacTUBX70m3ZaBEXcEQeyu6oPNrY_S_7iu71A@mail.gmail.com>
Message-ID: <20120626144725.2929.1162454832.divmod.xquotient.23@localhost6.localdomain6>

On 24 Jun, 09:21 pm, ghanavatian.ali at gmail.com wrote:
>hello there,
>here's the code i got:
>http://pastebin.ubuntu.com/1058070/
>
>it's implementing an imap server, problem is it does not retrieve 
>emails.
>mail client can capture new emails only once and after that, it should
>disconnect and reconnect again to receive new emails (again only once).
>
>any idea what's wrong here?

There doesn't appear to be any attempt at reconnection logic in that 
example.  There is only one call to `reactor.connectTCP` and there is 
even a call to `reactor.stop()` after the first connection is done.

If you want the client to reconnect, you need to call 
`reactor.connectTCP` again at some point, not `reactor.stop()`.

Jean-Paul
>thanks in advance
>
>--
>Sincerely
>A. Ghanavatian <http://www.google.com/profiles/ghanavatian.ali>


From exarkun at twistedmatrix.com  Tue Jun 26 11:20:01 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 15:20:01 -0000
Subject: [Twisted-Python] Call Back for startService() !
In-Reply-To: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>
References: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>
Message-ID: <20120626152001.2929.1849339910.divmod.xquotient.24@localhost6.localdomain6>

On 07:45 am, vk.86.811 at gmail.com wrote:
>Hi,
>
>   I want to execute something after the service starts. Is there any 
>call
>back that I can associate with startService() ? I have checked the
>documentation, but couldn't find anything as such :(

startService is a callback.

Jean-Paul
>Thanks,
>Vinodh


From exarkun at twistedmatrix.com  Tue Jun 26 11:24:11 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 15:24:11 -0000
Subject: [Twisted-Python] XMLRPC --> Twisted
In-Reply-To: <CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>
References: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
	<CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>
Message-ID: <20120626152411.2929.1121742536.divmod.xquotient.25@localhost6.localdomain6>

On 25 Jun, 03:31 pm, vk.86.811 at gmail.com wrote:
>Hi,
>
>   I have made a server code in xmlrpc. It has a command
>"server.register_multicall_functions()".  How do I write the same in
>twisted server?

Twisted Web does not presently support XML-RPC multicalls.

Jean-Paul
>This is the main of the twisted server :
>--------------------
>
>if __name__ == '__main__':
>    from twisted.internet import reactor
>    r = Example()
>    reactor.listenTCP(7070, server.Site(r))
>    print 'avtundile'
>    reactor.run()
>
>-----------------------
>Thanks,
>Vinodh


From justin.venus at gmail.com  Tue Jun 26 12:01:11 2012
From: justin.venus at gmail.com (Justin Venus)
Date: Tue, 26 Jun 2012 11:01:11 -0500
Subject: [Twisted-Python] Call Back for startService() !
In-Reply-To: <20120626152001.2929.1849339910.divmod.xquotient.24@localhost6.localdomain6>
References: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>
	<20120626152001.2929.1849339910.divmod.xquotient.24@localhost6.localdomain6>
Message-ID: <CACL=7av8GzT9Z8pBJzTYVmoZu_z-MTN8t6doMKTgLEoiXW1mPA@mail.gmail.com>

Vinod,

This code[1] uses twisted as its foundation.  The project is rather
complex, but if you take a look at some of the service code and it
should give you some ideas on what you can do with twisted services.

https://github.com/JustinVenus/droned/blob/master/droned/services/journal.py#L127

Justin Venus

On Tue, Jun 26, 2012 at 10:20 AM,  <exarkun at twistedmatrix.com> wrote:
> On 07:45 am, vk.86.811 at gmail.com wrote:
>>Hi,
>>
>> ? I want to execute something after the service starts. Is there any
>>call
>>back that I can associate with startService() ? I have checked the
>>documentation, but couldn't find anything as such :(
>
> startService is a callback.
>
> Jean-Paul
>>Thanks,
>>Vinodh
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
Justin Venus
justin.venus at gmail.com


From tom.prince at ualberta.net  Tue Jun 26 13:54:43 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Tue, 26 Jun 2012 11:54:43 -0600
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87pq8muqra.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca> <87pq8muqra.fsf@hermes.hocat.ca>
Message-ID: <87txxy2c2k.fsf@hermes.hocat.ca>

The buildbot is back up.

  Tom


From _ at lvh.cc  Tue Jun 26 15:09:59 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Tue, 26 Jun 2012 14:09:59 -0500
Subject: [Twisted-Python] Deserializing AMP callRemoteString without knowing
	the Command's signature
Message-ID: <CAE_Hg6ZR6q-yJGCqujZ7c5FOkdwPGtM7zEi1HqiX4sBK-gCdiw@mail.gmail.com>

Hi,

As some of you may know I am working on a JSON-RPC <-> AMP bridge to
consume AMP services from browsers. WIP: http://lvh.github.com/amphibian/

I've hit a failing integration test. I know what the issue is -- I don't
know how to resolve it.

I attempted to write the proxy without any knowledge of the remote
commands. It assumes that the JSON provided satisfies the remote signature.
If it doesn't -- that's okay, we'll get a failure back from the AMP server.
So, I use callRemoteString and manually serialize by typechecking. Although
that works for sending, the result I get back from callRemoteString is also
in wire format. Because I don't know the signature, I have no idea if the
sender meant 4, "4", u"4"...

On IRC:
dreid pointed out that I really shouldn't need a language-specific
implementation of a class for this to work
teratorn pointed out that there is a JSON schema ticket for AMP. Perhaps
there should also be a "DiscoverSchema" command?

Alternatively I could just cop out and require commands to be importable.
Would make the code simpler but the entire design would become
significantly more coupled.

-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120626/024fa83a/attachment.htm 

From david at davidstrauss.net  Tue Jun 26 21:49:40 2012
From: david at davidstrauss.net (David Strauss)
Date: Tue, 26 Jun 2012 18:49:40 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
	<loom.20120611T091817-992@post.gmane.org>
	<982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>
Message-ID: <CAKz8sYUt3CtObQ6QntRW7CUYF8ehFNqissYybbJzm0M1Cxg_nQ@mail.gmail.com>

You can also bind to privileged ports now using listeners like systemd
(and, presumably xinetd).

-- 
David Strauss
?? | david at davidstrauss.net


From david at davidstrauss.net  Tue Jun 26 21:52:11 2012
From: david at davidstrauss.net (David Strauss)
Date: Tue, 26 Jun 2012 18:52:11 -0700
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
Message-ID: <CAKz8sYUdxngLb9sPj0E=PrPTfM6=GsGupCw0ki=U=pkTsE_W8Q@mail.gmail.com>

On Thu, Jun 14, 2012 at 8:17 AM, Gavin Panella <gavin at gromper.net> wrote:
> It's on the Ubuntu 12.04 Server CD; see
> http://cdimages.ubuntu.com/ubuntu-server/precise/daily/current/precise-server-amd64.list

Canonical's Landscape tool uses Twisted AMQP.

-- 
David Strauss
?? | david at davidstrauss.net


From glyph at twistedmatrix.com  Wed Jun 27 02:02:09 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:02:09 -0700
Subject: [Twisted-Python] XMLRPC --> Twisted
In-Reply-To: <20120626152411.2929.1121742536.divmod.xquotient.25@localhost6.localdomain6>
References: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
	<CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>
	<20120626152411.2929.1121742536.divmod.xquotient.25@localhost6.localdomain6>
Message-ID: <280470C9-ADC2-4B8C-97C7-CDF2AC09FB8D@twistedmatrix.com>


On Jun 26, 2012, at 8:24 AM, exarkun at twistedmatrix.com wrote:

> On 25 Jun, 03:31 pm, vk.86.811 at gmail.com wrote:
>> Hi,
>> 
>>  I have made a server code in xmlrpc. It has a command
>> "server.register_multicall_functions()".  How do I write the same in
>> twisted server?
> 
> Twisted Web does not presently support XML-RPC multicalls.

If you wish it to do so, please request the feature at <http://twistedmatrix.com/trac/newticket> - although first, you should search there to see if someone else has requested it already, in which case you can just add yourself to the 'cc' list to be notified about changes.

If you just ask on the mailing list, it will likely be forgotten.  The most reliable way to get such a thing into Twisted, of course, is to attach a patch to the ticket, complete with documentation and unit tests, that implements the feature :).

-glyph



From glyph at twistedmatrix.com  Wed Jun 27 02:03:08 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:03:08 -0700
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87txxy2c2k.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca> <87pq8muqra.fsf@hermes.hocat.ca>
	<87txxy2c2k.fsf@hermes.hocat.ca>
Message-ID: <659C82E6-F1C8-4D54-92C4-3E9E4881BA8A@twistedmatrix.com>


On Jun 26, 2012, at 10:54 AM, Tom Prince <tom.prince at ualberta.net> wrote:

> The buildbot is back up.
> 
>  Tom

Congratulations on the successful maintenance.  I look forward to more developments with the buildbot in your capable hands - although hopefully without associated downtime ;-).

-glyph

From glyph at twistedmatrix.com  Wed Jun 27 02:09:44 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:09:44 -0700
Subject: [Twisted-Python] Deserializing AMP callRemoteString without
	knowing the Command's signature
In-Reply-To: <CAE_Hg6ZR6q-yJGCqujZ7c5FOkdwPGtM7zEi1HqiX4sBK-gCdiw@mail.gmail.com>
References: <CAE_Hg6ZR6q-yJGCqujZ7c5FOkdwPGtM7zEi1HqiX4sBK-gCdiw@mail.gmail.com>
Message-ID: <6E76BE37-533D-4D6B-8E62-66CE95B393A9@twistedmatrix.com>


On Jun 26, 2012, at 12:09 PM, Laurens Van Houtven <_ at lvh.cc> wrote:

> On IRC:
> dreid pointed out that I really shouldn't need a language-specific implementation of a class for this to work
> teratorn pointed out that there is a JSON schema ticket for AMP. Perhaps there should also be a "DiscoverSchema" command?

Yes, definitely.  There's a ticket for this, even, I think, although I can't find it at the moment.

> Alternatively I could just cop out and require commands to be importable. Would make the code simpler but the entire design would become significantly more coupled.

I think this is where you should start.  For now, importing Command objects is how you learn about AMP serialization rules.  We have plans to expand that, but trying to build that at the same time as Amphibian is probably too much at once.  (By all means though, once it exists, Amphibian should use it.)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120626/6b130f43/attachment.htm 

From glyph at twistedmatrix.com  Wed Jun 27 02:14:34 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:14:34 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <CAKz8sYUt3CtObQ6QntRW7CUYF8ehFNqissYybbJzm0M1Cxg_nQ@mail.gmail.com>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
	<loom.20120611T091817-992@post.gmane.org>
	<982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>
	<CAKz8sYUt3CtObQ6QntRW7CUYF8ehFNqissYybbJzm0M1Cxg_nQ@mail.gmail.com>
Message-ID: <CCFE1888-F0E3-4E1A-A2CE-639FD8EB50E3@twistedmatrix.com>


On Jun 26, 2012, at 6:49 PM, David Strauss <david at davidstrauss.net> wrote:

> You can also bind to privileged ports now using listeners like systemd
> (and, presumably xinetd).

xinetd has some mechanism to pass the listening socket, but I don't think Twisted supports it yet.  I believe the string endpoint description for systemd is somewhat specific to systemd's idiom for communicating about the socket involved; when we add launchd support, launchd is kinda specific too; see <http://tm.tl/5576>.  Any xinetd users want to do one for that daemon?

-glyph

From martin at webscio.net  Thu Jun 28 07:46:36 2012
From: martin at webscio.net (Martin)
Date: Thu, 28 Jun 2012 12:46:36 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>
Message-ID: <4FEC441C.4060201@webscio.net>

On 26/06/12 15:12, exarkun at twistedmatrix.com wrote:
> On 25 Jun, 12:16 pm, martin at webscio.net wrote:
>>>
>> No suggestions as to how I could get rid of this? :(
>
> I put together a minimal example of ReconnectingClientFactory for the 
> connection refused case for you.  It's attached.  I don't see any 
> errors logged.  If your program differs from this, please modify the 
> example until it produces the problem.  Without this, it's very 
> unlikely that anyone will be able to determine the problem or 
> recommend a solution.
>
> For future questions, if you could put together this minimal example 
> yourself, you'll probably find you get help more quickly.
>
> Here's the output I see when I run the program:
>
> 2012-06-26 10:07:26-0400 [-] Log opened.
> 2012-06-26 10:07:26-0400 [-] Starting factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> 2012-06-26 10:07:26-0400 [Uninitialized] 
> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 2 
> seconds
> 2012-06-26 10:07:26-0400 [Uninitialized] Stopping factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> 2012-06-26 10:07:28-0400 [-] Starting factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> 2012-06-26 10:07:28-0400 [Uninitialized] 
> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 4 
> seconds
> 2012-06-26 10:07:28-0400 [Uninitialized] Stopping factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> ^C2012-06-26 10:07:30-0400 [-] Received SIGINT, shutting down.
> 2012-06-26 10:07:30-0400 [-] Main loop terminated.
>
>
> Jean-Paul
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

Thanks a lot for the suggestions! I tried plugging in a fake address 
(like you did) in my code and indeed I'm not getting the deferred 
message at the end. So apparently it only happens when a connection is 
actually established first and then lost. I'll try to figure out a 
minimal example where/why it starts happening (I'll probably know how to 
fix it then too.. I just thought there'd be an easier way).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120628/761775e3/attachment.htm 

From martin at webscio.net  Thu Jun 28 08:01:37 2012
From: martin at webscio.net (Martin)
Date: Thu, 28 Jun 2012 13:01:37 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FEC441C.4060201@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>
	<4FEC441C.4060201@webscio.net>
Message-ID: <4FEC47A1.20101@webscio.net>

On 28/06/12 12:46, Martin wrote:
> On 26/06/12 15:12, exarkun at twistedmatrix.com wrote:
>> On 25 Jun, 12:16 pm, martin at webscio.net wrote:
>>>>
>>> No suggestions as to how I could get rid of this? :(
>>
>> I put together a minimal example of ReconnectingClientFactory for the 
>> connection refused case for you.  It's attached.  I don't see any 
>> errors logged.  If your program differs from this, please modify the 
>> example until it produces the problem. Without this, it's very 
>> unlikely that anyone will be able to determine the problem or 
>> recommend a solution.
>>
>> For future questions, if you could put together this minimal example 
>> yourself, you'll probably find you get help more quickly.
>>
>> Here's the output I see when I run the program:
>>
>> 2012-06-26 10:07:26-0400 [-] Log opened.
>> 2012-06-26 10:07:26-0400 [-] Starting factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> 2012-06-26 10:07:26-0400 [Uninitialized] 
>> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 
>> 2 seconds
>> 2012-06-26 10:07:26-0400 [Uninitialized] Stopping factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> 2012-06-26 10:07:28-0400 [-] Starting factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> 2012-06-26 10:07:28-0400 [Uninitialized] 
>> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 
>> 4 seconds
>> 2012-06-26 10:07:28-0400 [Uninitialized] Stopping factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> ^C2012-06-26 10:07:30-0400 [-] Received SIGINT, shutting down.
>> 2012-06-26 10:07:30-0400 [-] Main loop terminated.
>>
>>
>> Jean-Paul
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> Thanks a lot for the suggestions! I tried plugging in a fake address 
> (like you did) in my code and indeed I'm not getting the deferred 
> message at the end. So apparently it only happens when a connection is 
> actually established first and then lost. I'll try to figure out a 
> minimal example where/why it starts happening (I'll probably know how 
> to fix it then too.. I just thought there'd be an easier way).
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

And found it.. the ReconnectingClientFactory was using an instance of a 
LengthDelimitedStream as the protocol and that's where the deferred was 
coming from.

Sorry for all the nagging, I should have figured it out myself.. but tbh 
getting the hang of Twisted is not so easy :)

Cheers!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120628/017e8b81/attachment.htm 

From drsalists at gmail.com  Thu Jun 28 17:40:41 2012
From: drsalists at gmail.com (Dan Stromberg)
Date: Thu, 28 Jun 2012 21:40:41 +0000
Subject: [Twisted-Python] deferred graph?
Message-ID: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>

Hi.

I'm a Twisted neophyte, but I've been using Python a long time.

My question:
Is there a way of producing a deferred graph in a Python program at a given
point in time?  Perhaps something based on graphviz and objgraph.py?  We're
able to detect when we're having the problem, we just don't (yet) know its
cause.


Background:
I'm looking at some code with a bit over 200
addCallback/addErrback/addCallbacks in it.

It's got a problem where sometimes the deferreds seem to just stop
executing.  I see in the doc it says that this can happen if you've
neglected to add an errback to the end of one or more of your deferred
chains.

One of the people who's been here longer than me, indicated that he's gone
through the code looking for such issues, and didn't find any.  This
suggests to me that either there's some other cause, or that it really is a
deferred without a final errback, but it's hidden in a dark corner of the
code somewhere.


Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120628/8bda0feb/attachment.htm 

From _ at lvh.cc  Thu Jun 28 18:00:10 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 29 Jun 2012 00:00:10 +0200
Subject: [Twisted-Python] deferred graph?
In-Reply-To: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
Message-ID: <CAE_Hg6ZryB_Bumo4QxRTxgypHbKXRo+v5U0=wisCMZPgcg6kKA@mail.gmail.com>

You should still see the unhandled deferred in your logs if that's truly
the case.

On Thursday, June 28, 2012, Dan Stromberg wrote:

>
> Hi.
>
> I'm a Twisted neophyte, but I've been using Python a long time.
>
> My question:
> Is there a way of producing a deferred graph in a Python program at a
> given point in time?  Perhaps something based on graphviz and objgraph.py?
>  We're able to detect when we're having the problem, we just don't (yet)
> know its cause.
>
>
> Background:
> I'm looking at some code with a bit over 200
> addCallback/addErrback/addCallbacks in it.
>
> It's got a problem where sometimes the deferreds seem to just stop
> executing.  I see in the doc it says that this can happen if you've
> neglected to add an errback to the end of one or more of your deferred
> chains.
>
> One of the people who's been here longer than me, indicated that he's gone
> through the code looking for such issues, and didn't find any.  This
> suggests to me that either there's some other cause, or that it really is a
> deferred without a final errback, but it's hidden in a dark corner of the
> code somewhere.
>
>
> Thanks!
>
>

-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120629/67957113/attachment.htm 

From terry at jon.es  Thu Jun 28 18:32:29 2012
From: terry at jon.es (Terry Jones)
Date: Thu, 28 Jun 2012 18:32:29 -0400
Subject: [Twisted-Python] deferred graph?
In-Reply-To: Your message at 21:40:41 on Thursday, 28 June 2012
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
Message-ID: <20460.56189.932953.706603@jon.es>

Hi Dan

> I'm a Twisted neophyte, but I've been using Python a long time.

I'm a Twisted neophyte, but I've been using Twisted a long time.

(I'd add a smiley, but that's not a joke.)

> My question: Is there a way of producing a deferred graph in a Python
> program at a given point in time?  Perhaps something based on graphviz
> and objgraph.py?  We're able to detect when we're having the problem, we
> just don't (yet) know its cause.

You might be able to use this that I wrote some time ago. It might need
some maintenance as the Twisted Deferred code has moved on since then. But
the approach might help you:

http://www.twistedmatrix.com/pipermail/twisted-python/2008-October/018535.html

Terry


From glyph at twistedmatrix.com  Thu Jun 28 20:21:12 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 28 Jun 2012 17:21:12 -0700
Subject: [Twisted-Python] deferred graph?
In-Reply-To: <20460.56189.932953.706603@jon.es>
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
	<20460.56189.932953.706603@jon.es>
Message-ID: <C213BB82-DF94-4E53-BF0B-D70D5E83CA30@twistedmatrix.com>

Le Jun 28, 2012 ? 3:32 PM, Terry Jones <terry at jon.es> a ?crit :

> You might be able to use this that I wrote some time ago. It might need
> some maintenance as the Twisted Deferred code has moved on since then. But
> the approach might help you:
> 
> http://www.twistedmatrix.com/pipermail/twisted-python/2008-October/018535.html

Hey Terry,

Did you ever file a ticket to get something like this into Twisted?  This looks like an interesting visualization tool to help people understand what's going on with their Deferreds, and we need more of that sort of thing.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120628/90c0eaea/attachment.htm 

From terry at jon.es  Thu Jun 28 20:42:20 2012
From: terry at jon.es (Terry Jones)
Date: Thu, 28 Jun 2012 20:42:20 -0400
Subject: [Twisted-Python] deferred graph?
In-Reply-To: Your message at 17:21:12 on Thursday, 28 June 2012
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
	<20460.56189.932953.706603@jon.es>
	<C213BB82-DF94-4E53-BF0B-D70D5E83CA30@twistedmatrix.com>
Message-ID: <20460.63980.237850.10155@jon.es>

Hi Glyph!

There are a couple of tickets floating around:

  http://twistedmatrix.com/trac/ticket/3858
  http://twistedmatrix.com/trac/ticket/1402 (closed as a dupe)

T


From vk.86.811 at gmail.com  Fri Jun 29 10:52:06 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Fri, 29 Jun 2012 16:52:06 +0200
Subject: [Twisted-Python] Writing onto txWS
In-Reply-To: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
References: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
Message-ID: <CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>

Hi All,

   I have run and edited the example provided for txWS. The writing part
from server to client browser is shown only as self.transport.write()
inside dataReceived function in websockets.py. how do I write on to the
socket i.e. on to the browser, from a different function inside server
code(server.tac). I'm just starting another xmlrpc server on a thread where
I receive some notifications. I need to forward the same to socket. The
bold point below  is where I want to write on to socket. How can we do
that? Please help me out.
-------------------------------------------------------
import time

from twisted.internet import reactor
from twisted.application import internet
from twisted.application.service import Application, Service
import xmlrpclib
from txws import WebSocketFactory

from src.protocols.websockets import WebSocketServerFactory
from constants import *

class WebSocketService(Service):
    """
    A simple service that listens on port 8077 for WebSockets traffic.
    """
    def __init__(self):
        self.start_time = time.time()

    def start_service(self, application):
        """
        Gets the show on the road. Fires up a factory, binds the port.
        """
        echofactory = WebSocketServerFactory(self)
        factory = WebSocketFactory(echofactory)
        ws_server = internet.TCPServer(8077, factory)
        ws_server.setName('ws-tcp')
        ws_server.setServiceParent(application)

    def shutdown(self):
        """
        Gracefully shuts down the service.
        """
        reactor.callLater(0, reactor.stop)

def listDevices(id):
print "listDevice: %(id)s" % {"id": str(id)}
 return None

def event(id, address, key, value):
        #websocket.send("ufffffffffuuuuuu")
*        #I need to write the below print statement on to browser *
        print "event: %(id)s: %(address)s: %(key)s = %(value)s" % {"id":
str(id),
"address": str(address), "key": str(key), "value": str(value)}

def aSillyBlockingMethod(x):
    import time
    import xmlrpclib
    time.sleep(2)
    from SimpleXMLRPCServer import SimpleXMLRPCServer
    from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
    from constants import *
    server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT), logRequests=True,
allow_none=True)
    server.register_introspection_functions()
    server.register_multicall_functions()
    print "server started at %s" % str(SERVER_URL)
    server.register_function(listDevices)
    server.register_function(event)
    print 'function also got registered'
    server.serve_forever()
    .............................continues

Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120629/f2581a71/attachment-0001.htm 

From cds at corbinsimpson.com  Fri Jun 29 12:27:45 2012
From: cds at corbinsimpson.com (Corbin Simpson)
Date: Fri, 29 Jun 2012 09:27:45 -0700
Subject: [Twisted-Python] Writing onto txWS
In-Reply-To: <CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
References: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
	<CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
Message-ID: <20120629162745.GA14473@ps35699.dreamhostps.com>

On Fri, Jun 29, 2012 at 04:52:06PM +0200, vinod kumar wrote:
> Hi All,
> 
>    I have run and edited the example provided for txWS. The writing part
> from server to client browser is shown only as self.transport.write()
> inside dataReceived function in websockets.py. how do I write on to the
> socket i.e. on to the browser, from a different function inside server
> code(server.tac). I'm just starting another xmlrpc server on a thread where
> I receive some notifications. I need to forward the same to socket. The
> bold point below  is where I want to write on to socket. How can we do
> that? Please help me out.
> -------------------------------------------------------
> import time
> 
> from twisted.internet import reactor
> from twisted.application import internet
> from twisted.application.service import Application, Service
> import xmlrpclib
> from txws import WebSocketFactory
> 
> from src.protocols.websockets import WebSocketServerFactory
> from constants import *
> 
> class WebSocketService(Service):
>     """
>     A simple service that listens on port 8077 for WebSockets traffic.
>     """
>     def __init__(self):
>         self.start_time = time.time()
> 
>     def start_service(self, application):
>         """
>         Gets the show on the road. Fires up a factory, binds the port.
>         """
>         echofactory = WebSocketServerFactory(self)
>         factory = WebSocketFactory(echofactory)
>         ws_server = internet.TCPServer(8077, factory)
>         ws_server.setName('ws-tcp')
>         ws_server.setServiceParent(application)
> 
>     def shutdown(self):
>         """
>         Gracefully shuts down the service.
>         """
>         reactor.callLater(0, reactor.stop)
> 
> def listDevices(id):
> print "listDevice: %(id)s" % {"id": str(id)}
>  return None
> 
> def event(id, address, key, value):
>         #websocket.send("ufffffffffuuuuuu")
> *        #I need to write the below print statement on to browser *
>         print "event: %(id)s: %(address)s: %(key)s = %(value)s" % {"id":
> str(id),
> "address": str(address), "key": str(key), "value": str(value)}
> 
> def aSillyBlockingMethod(x):
>     import time
>     import xmlrpclib
>     time.sleep(2)
>     from SimpleXMLRPCServer import SimpleXMLRPCServer
>     from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
>     from constants import *
>     server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT), logRequests=True,
> allow_none=True)
>     server.register_introspection_functions()
>     server.register_multicall_functions()
>     print "server started at %s" % str(SERVER_URL)
>     server.register_function(listDevices)
>     server.register_function(event)
>     print 'function also got registered'
>     server.serve_forever()
>     .............................continues
> 
> Thanks,
> Vinodh

Hi Vinodh,

txWS merely lets you connect to a Twisted Factory through WebSockets.
You will still need to structure your code such that the events that you
are responding to are connected to that Factory.

It might be helpful to rewrite your XML-RPC server to use Twisted's
XML-RPC (see
http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html for a
tutorial on that) and then it will be easier to hook up your events
without having to worry about threading or other blocking things.

If you're having specific problems with txWS, let me know; it's
important to us that txWS work smoothly for people using it.

~ C.


From exarkun at twistedmatrix.com  Fri Jun 29 13:28:53 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 29 Jun 2012 17:28:53 -0000
Subject: [Twisted-Python] Writing onto txWS
In-Reply-To: <CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
References: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
	<CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
Message-ID: <20120629172853.3315.1306260164.divmod.xquotient.53@localhost6.localdomain6>

Please do not cross-post between twisted-web and twisted-python.  Pick a 
list and stick to it.

Jean-Paul


From cyli at twistedmatrix.com  Fri Jun 29 15:07:18 2012
From: cyli at twistedmatrix.com (Ying Li)
Date: Fri, 29 Jun 2012 12:07:18 -0700
Subject: [Twisted-Python] Twisted tutorial and Twisted sprint in San
	Francisco
Message-ID: <CA+Q0aKFtgs2h1ZM6oHqcD4D3ig2Tq7BnhB06ddvEHxQ1hzb7DQ@mail.gmail.com>

Hi all!

There will be a Twisted tutorial/learning session in San Francisco on
Friday, July 13th, at 7pm.  Glyph will be giving the tutorial, and
several developers will be on hand to help.

There will be a Twisted sprint the next day, Saturday July 14th, from
10am to 9pm (or later, if folks want to stay later!) - come whenever
and for however long you like.  Hack on Twisted or a Twisted-related
project, learn more about how to use Twisted, or just hang out.

Both events are hosted at Rackspace, which is located at 620 Folsom
St, Suite 100, San Francisco 94107.  (between 2nd St and Howard, or
2nd and 3rd if you prefer).

Please RSVP at:
http://www.meetup.com/San-Francisco-Twisted-Python-Meetup   (so we
know how much food to get!)

Thanks!


From tobias.oberstein at tavendo.de  Sat Jun 30 04:22:15 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 30 Jun 2012 01:22:15 -0700
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
In-Reply-To: <20120624164149.3516.839722173.divmod.xquotient.3@localhost6.localdomain6>
References: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
	<20120624164149.3516.839722173.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <634914A010D0B943A035D226786325D433793A55D8@EXVMBX020-12.exch020.serverdata.net>

> more productive contribution would probably be to fix the tests that have been
> failing on it for most or all of that time. :)

Ok. I guess for that filing tickets first might be the way to go.

Hence, I created a "meta bug"

http://twistedmatrix.com/trac/ticket/5735

to group the current issues

FAILED (skips=1665, expectedFailures=11, failures=11, errors=19, successes=6412)

and determine if they are Twisted or PyPy business. Then I go and fix what I can do ..

For the initial screening (in particular), any eyes/knowledge/guidance is appreciated ..


From vk.86.811 at gmail.com  Sat Jun 30 15:36:08 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Sat, 30 Jun 2012 21:36:08 +0200
Subject: [Twisted-Python] txWS !!
Message-ID: <CAEUxhZ03_+fF-Tw2AExHRzKCJ1hnGUh9Y6Av8vxP8Er8ZLsgbg@mail.gmail.com>

Hi,

 Thanks a lot for your reply. The trouble is that the events I have are
triggered by a homematic CCU. The CCU does it by multicall which has not
yet been implemented in twisted servers. So, I'm running a non-twisted
xmlrpc server in a thread so that my CCU triggers the events and it's
happening too. I can see the events printed on the console too. Now, I just
want a way to write the same to sockets. Can't we connect these to txWS
factory ? Doesn't the txWS has some socket object so that we can just say
socket.write..hmm

Thanks,
Vinodh
-------------------------------------------------------------------

Hi Vinodh,

txWS merely lets you connect to a Twisted Factory through WebSockets.
You will still need to structure your code such that the events that you
are responding to are connected to that Factory.

It might be helpful to rewrite your XML-RPC server to use Twisted's
XML-RPC (see
http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html for a
tutorial on that) and then it will be easier to hook up your events
without having to worry about threading or other blocking things.

If you're having specific problems with txWS, let me know; it's
important to us that txWS work smoothly for people using it.

~ C.
-------------------------------
On Fri, Jun 29, 2012 at 04:52:06PM +0200, vinod kumar wrote:
> Hi All,
>
>    I have run and edited the example provided for txWS. The writing part
> from server to client browser is shown only as self.transport.write()
> inside dataReceived function in websockets.py. how do I write on to the
> socket i.e. on to the browser, from a different function inside server
> code(server.tac). I'm just starting another xmlrpc server on a thread
where
> I receive some notifications. I need to forward the same to socket. The
> bold point below  is where I want to write on to socket. How can we do
> that? Please help me out.
> -------------------------------------------------------
> import time
>
> from twisted.internet import reactor
> from twisted.application import internet
> from twisted.application.service import Application, Service
> import xmlrpclib
> from txws import WebSocketFactory
>
> from src.protocols.websockets import WebSocketServerFactory
> from constants import *
>
> class WebSocketService(Service):
>     """
>     A simple service that listens on port 8077 for WebSockets traffic.
>     """
>     def __init__(self):
>         self.start_time = time.time()
>
>     def start_service(self, application):
>         """
>         Gets the show on the road. Fires up a factory, binds the port.
>         """
>         echofactory = WebSocketServerFactory(self)
>         factory = WebSocketFactory(echofactory)
>         ws_server = internet.TCPServer(8077, factory)
>         ws_server.setName('ws-tcp')
>         ws_server.setServiceParent(application)
>
>     def shutdown(self):
>         """
>         Gracefully shuts down the service.
>         """
>         reactor.callLater(0, reactor.stop)
>
> def listDevices(id):
> print "listDevice: %(id)s" % {"id": str(id)}
>  return None
>
> def event(id, address, key, value):
>         #websocket.send("ufffffffffuuuuuu")
> *        #I need to write the below print statement on to browser *
>         print "event: %(id)s: %(address)s: %(key)s = %(value)s" % {"id":
> str(id),
> "address": str(address), "key": str(key), "value": str(value)}
>
> def aSillyBlockingMethod(x):
>     import time
>     import xmlrpclib
>     time.sleep(2)
>     from SimpleXMLRPCServer import SimpleXMLRPCServer
>     from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
>     from constants import *
>     server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT),
logRequests=True,
> allow_none=True)
>     server.register_introspection_functions()
>     server.register_multicall_functions()
>     print "server started at %s" % str(SERVER_URL)
>     server.register_function(listDevices)
>     server.register_function(event)
>     print 'function also got registered'
>     server.serve_forever()
>     .............................continues
>
> Thanks,
> Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20120630/f5420b3a/attachment-0001.htm 

From meejah at meejah.ca  Fri Jun  1 11:53:13 2012
From: meejah at meejah.ca (meejah)
Date: Fri, 01 Jun 2012 11:53:13 -0600
Subject: [Twisted-Python] txtorcon 0.2
Message-ID: <E1SaW2E-0004rD-2e@panthalassa.cg.shawcable.net>



-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


txtorcon is a Twisted-based asynchronous Tor control protocol
implementation. I have tagged txtorcon 0.2, which adds:

 . incremental parsing;
 . faster TorState startup;
 . SAFECOOKIE support;
 . several bug fixes;
 . options to circuit_failure_rates.py example to make it actually-useful;
 . include built documentation + sources in tarball;
 . include tests in tarball;
 . improved logging;
 . a few patches from mmaker and kneufeld

docs: http://readthedocs.org/docs/txtorcon/en/latest/
code: https://github.com/meejah/txtorcon
      https://timaq4ygg2iegci7.onion/

Thanks,

- --
mike
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEcBAEBAgAGBQJPyQHXAAoJEMJgKAMSgGmn7lUH/2GRMQmXhlZKtPRsZcwACHOp
dm90QMXFAXiYxueGn2S6/Vt0N7ORTrkI2ttz7NXV5EvUr2u5uJbdVOCgI5rj4M/z
CO/hoL8NVw43hNZjF/Hec6lhC8pPI8iRGA329QJKKBn5n/bRUHhHtaCAQcGsSESQ
ue+pvEYHzz6QOAhr7hfJ5zDHVl5++U6BDr4t/O6tmj1bEtwrFXNhX6E7C87rScFa
+X3pt6+tGk84+1j+BLeEenbW6iD8RIwxsanknGMGZRjzMSDh3oH8jZnUpBzEHouk
V2hz9ZjZSXBvGF7/UMyjVHbDEX+kEMsS/9Iv1tHBXCaO9JyCT+UgB6ojWQFsojA=
=2vvP
-----END PGP SIGNATURE-----



From exarkun at twistedmatrix.com  Sat Jun  2 22:05:35 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 03 Jun 2012 04:05:35 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1338696335.01.194181089@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120603/dece07cb/attachment-0001.html>

From therve at free.fr  Tue Jun  5 04:26:05 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Tue, 05 Jun 2012 12:26:05 +0200
Subject: [Twisted-Python] Twisted 12.1.0 released
Message-ID: <4FCDDEBD.2070503@free.fr>

On behalf of Twisted Matrix Laboratories, I am pleased to announce the
release of Twisted 12.1.

107 tickets are closed by this release, with the following highlights:

 * The revival of the kqueue reactor for BSD platforms.

 * epoll is now the default reactor under Linux after a fix to handle
files on stdin/stdout.

 * New reactors supporting GTK3 and GObject-Introspection.

 * Several enhancements regarding file descriptors passing: systemd
support for servers, ability to send and receive file descriptors for
IReactorUNIX and an AMP argument using that feature.

 * Support for IPv6 literals in connectTCP.

 * Persistent connections support for the new HTTP client.

This is the last Twisted release supporting Python 2.5.

For more information, see the NEWS file here:

 http://twistedmatrix.com/Releases/Twisted/12.1/NEWS.txt


Download it now from:

 http://pypi.python.org/packages/source/T/Twisted/Twisted-12.1.0.tar.bz2 or

http://pypi.python.org/packages/2.5/T/Twisted/Twisted-12.1.0.win32-py2.5.msi
or

http://pypi.python.org/packages/2.6/T/Twisted/Twisted-12.1.0.win32-py2.6.msi
or

http://pypi.python.org/packages/2.7/T/Twisted/Twisted-12.1.0.win32-py2.7.msi


Thanks to the supporters of Twisted via the Software Freedom Conservancy
and to the many contributors for this release.

-- 
Thomas



From glyph at twistedmatrix.com  Tue Jun  5 22:40:02 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 5 Jun 2012 21:40:02 -0700
Subject: [Twisted-Python] Twisted 12.1.0 released
In-Reply-To: <4FCDDEBD.2070503@free.fr>
References: <4FCDDEBD.2070503@free.fr>
Message-ID: <FD637FBD-7160-41E1-ABE4-7FF2B91703E3@twistedmatrix.com>


Le Jun 5, 2012  3:26 AM, Thomas Herv a crit :

> On behalf of Twisted Matrix Laboratories, I am pleased to announce the
> release of Twisted 12.1.

Hooray!!!

Thanks to everyone who worked on this impressive array of features, and thanks Therve for going through the slog of doing yet another release!  Seems to be coming together like clockwork :).

-glyph


From kmcintyre at greenchargenet.com  Wed Jun  6 13:58:37 2012
From: kmcintyre at greenchargenet.com (Kevin McIntyre)
Date: Wed, 6 Jun 2012 12:58:37 -0700
Subject: [Twisted-Python] DeprecationWarning and PotentialZombieWarning
Message-ID: <CAFvbmckFUdRtnG4DNOfVLUZp1pZPDo_TLJQWuNDJRU=NSQfwUg@mail.gmail.com>

I recently upgraded to 12.0.0 and was running my process in the shell,
when this error/warning was thrown.  Any idea what it means?

DeprecationWarning: twisted.internet.error.PotentialZombieWarning was
deprecated in Twisted 10.0.0: There is no longer any potential for
zombie process.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.COMMA was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.DATA was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.LENGTH was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.protocols.basic.NUMBER was deprecated in
Twisted 10.2.0: NetstringReceiver parser state is private.
 o = getattr (m, sym)
DeprecationWarning: twisted.internet.interfaces.IFinishableConsumer
was deprecated in Twisted 11.1.0: Please use IConsumer (and
IConsumer.unregisterProducer) instead.
 o = getattr (m, sym)
DeprecationWarning: twisted.internet.interfaces.IReactorArbitrary was
deprecated in Twisted 10.1.0: See IReactorFDSet.
 o = getattr (m, sym)

-- 

Kevin McIntyre | Software Engineer | Green Charge Networks

Cell 718-249-5058 | kmcintyre at greenchargenet.com | www.greenchargenet.com



From exarkun at twistedmatrix.com  Wed Jun  6 14:40:18 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 06 Jun 2012 20:40:18 -0000
Subject: [Twisted-Python] DeprecationWarning and PotentialZombieWarning
In-Reply-To: <CAFvbmckFUdRtnG4DNOfVLUZp1pZPDo_TLJQWuNDJRU=NSQfwUg@mail.gmail.com>
References: <CAFvbmckFUdRtnG4DNOfVLUZp1pZPDo_TLJQWuNDJRU=NSQfwUg@mail.gmail.com>
Message-ID: <20120606204018.2914.648761613.divmod.xquotient.11@localhost6.localdomain6>

On 07:58 pm, kmcintyre at greenchargenet.com wrote:
>I recently upgraded to 12.0.0 and was running my process in the shell,
>when this error/warning was thrown.  Any idea what it means?
>
>DeprecationWarning: twisted.internet.error.PotentialZombieWarning was
>deprecated in Twisted 10.0.0: There is no longer any potential for
>zombie process.

This attribute and others are deprecated.  APIs and behaviors are 
deprecated for at least two releases before they are removed or 
otherwise changed incompatibly.

I don't know what the line of code pointed at by the warning is from or 
is trying to do:
>o = getattr (m, sym)

Considering how many warnings it triggered, it looks like it may be some 
code that is traversing _all_ the APIs in Twisted?  Perhaps the warnings 
are harmless, then, since after we remove the deprecated APIs, the code 
will no longer see them and no longer try to visit them.

If that doesn't sound right, then it may help for you to further explain 
what was going on when you encountered these warnings.

Jean-Paul



From enriquejr at gmail.com  Wed Jun  6 18:46:57 2012
From: enriquejr at gmail.com (Enrique Samson Jr,)
Date: Thu, 07 Jun 2012 08:46:57 +0800
Subject: [Twisted-Python] Log file ownership
Message-ID: <4FCFFA01.5040501@gmail.com>

Hi,

I am running an app as root on Linux using a .tac file and twistd. The
application object is initialized with a certain gid and uid. Logging is
configured to rotate daily by way of DailyLogFile. However, the log file
it creates is owned by root with 600 file permission and log rotation is
failing. I have read about acl to configure default file permissions but
is there a way to solve this only in Twisted?

--Enrique



From itamar at itamarst.org  Wed Jun  6 20:27:01 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Wed, 06 Jun 2012 22:27:01 -0400
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FCFFA01.5040501@gmail.com>
References: <4FCFFA01.5040501@gmail.com>
Message-ID: <4FD01175.6090100@itamarst.org>

On 06/06/2012 08:46 PM, Enrique Samson Jr, wrote:
> Hi,
>
> I am running an app as root on Linux using a .tac file and twistd. The
> application object is initialized with a certain gid and uid. Logging is
> configured to rotate daily by way of DailyLogFile. However, the log file
> it creates is owned by root with 600 file permission and log rotation is
> failing. I have read about acl to configure default file permissions but
> is there a way to solve this only in Twisted?
>
Perhaps someone else can comment on what might be a bug, but one thing 
to do is to run your program directly as the uid and gid you want 
(rather than than root). Since presumably the goal is to bind to a port 
<1024, you can do that instead using authbind 
(http://manpages.ubuntu.com/manpages/hardy/man1/authbind.1.html).



From enriquejr at gmail.com  Wed Jun  6 20:42:08 2012
From: enriquejr at gmail.com (Enrique Samson Jr,)
Date: Thu, 07 Jun 2012 10:42:08 +0800
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FD01175.6090100@itamarst.org>
References: <4FCFFA01.5040501@gmail.com> <4FD01175.6090100@itamarst.org>
Message-ID: <4FD01500.4050707@gmail.com>

On 6/7/12 10:27 AM, Itamar Turner-Trauring wrote:
> On 06/06/2012 08:46 PM, Enrique Samson Jr, wrote:
>> Hi,
>>
>> I am running an app as root on Linux using a .tac file and twistd. The
>> application object is initialized with a certain gid and uid. Logging is
>> configured to rotate daily by way of DailyLogFile. However, the log file
>> it creates is owned by root with 600 file permission and log rotation is
>> failing. I have read about acl to configure default file permissions but
>> is there a way to solve this only in Twisted?
>>
> Perhaps someone else can comment on what might be a bug, but one thing 
> to do is to run your program directly as the uid and gid you want 
> (rather than than root).Since presumably the goal is to bind to a port 
> <1024, you can do that instead using authbind 
> (http://manpages.ubuntu.com/manpages/hardy/man1/authbind.1.html).
I need to execute ulimit to increase max open files (20K), reason why
I'm running this as root.




From tobias.oberstein at tavendo.de  Thu Jun  7 05:31:36 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Thu, 7 Jun 2012 04:31:36 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FD01175.6090100@itamarst.org>
References: <4FCFFA01.5040501@gmail.com> <4FD01175.6090100@itamarst.org>
Message-ID: <634914A010D0B943A035D226786325D43377ECB69D@EXVMBX020-12.exch020.serverdata.net>

> root). Since presumably the goal is to bind to a port <1024, you can do that
> instead using authbind
> (http://manpages.ubuntu.com/manpages/hardy/man1/authbind.1.html).

Just some comments ..

==

For binding ports <1024, there is at least one more option:

Since Linux kernel 2.6.24, the kernel supports associating capability sets with an executable file using setcap(8).

setcap 'cap_net_bind_service=+ep' <path to actual Python binary .. not a symlink!> 

http://linux.die.net/man/8/setcap
http://linux.die.net/man/7/capabilities

==

For maximum open FDs, if you run your stuff under a dedicated user, you can also modify

/etc/security/limits.conf

You will likely need to tune more options however .. like system wide max open FDs etc

http://urbanairship.com/blog/2010/09/29/linux-kernel-tuning-for-c500k/





From kmcintyre at greenchargenet.com  Thu Jun  7 20:23:06 2012
From: kmcintyre at greenchargenet.com (Kevin McIntyre)
Date: Thu, 7 Jun 2012 19:23:06 -0700
Subject: [Twisted-Python] protocol connectionLost clientConnectionLost
Message-ID: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>

Below is my sample code.  I'm hoping to unplug my internet cable and
get a connectionLost.  But this doesn't happen.  Is there anyway to
detect this?

------

from twisted.internet.protocol import Protocol, ReconnectingClientFactory
from twisted.internet import reactor

class Echo(Protocol):

    def connectionMade(self):
        print "cool and the gang"

    def connectionLost(self, reason):
        print "ut-oh %s" % reason

    def dataReceived(self, data):
        pass

class EchoClientFactory(ReconnectingClientFactory):

    def startedConnecting(self, connector):
        print 'Started to connect.'

    def buildProtocol(self, addr):
        print 'Connected.'
        print 'Resetting reconnection delay'
        self.resetDelay()
        return Echo()

    def clientConnectionLost(self, connector, reason):
        print 'Lost connection.  Reason:', reason
        ReconnectingClientFactory.clientConnectionLost(self, connector, reason)

    def clientConnectionFailed(self, connector, reason):
        print 'Connection failed. Reason:', reason
        ReconnectingClientFactory.clientConnectionFailed(self, connector,
                                                         reason)
if ( __name__ == "__main__" ):
    reactor.connectTCP("74.125.224.242", 80, EchoClientFactory() )
#connect to google on port 80
    reactor.run()

-- 

Kevin McIntyre | Software Engineer | Green Charge Networks

Cell 718-249-5058 | kmcintyre at greenchargenet.com | www.greenchargenet.com



From itamar at itamarst.org  Thu Jun  7 20:39:56 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 07 Jun 2012 22:39:56 -0400
Subject: [Twisted-Python] protocol connectionLost clientConnectionLost
In-Reply-To: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>
References: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>
Message-ID: <4FD165FC.8090803@itamarst.org>

On 06/07/2012 10:23 PM, Kevin McIntyre wrote:
> Below is my sample code.  I'm hoping to unplug my internet cable and
> get a connectionLost.  But this doesn't happen.  Is there anyway to
> detect this?
>
Send out a message every few seconds or minutes; if you're not sending 
any traffic the OS will not detect problems with the TCP connection.



From xl.mailinglist at gmail.com  Thu Jun  7 20:58:26 2012
From: xl.mailinglist at gmail.com (Xavier Lapointe)
Date: Thu, 7 Jun 2012 22:58:26 -0400
Subject: [Twisted-Python] protocol connectionLost clientConnectionLost
In-Reply-To: <4FD165FC.8090803@itamarst.org>
References: <CAFvbmcnvcDh2RqTtPz7ZXLQnY3dsk+vudVZzXpeDHroNu_L_Bw@mail.gmail.com>
	<4FD165FC.8090803@itamarst.org>
Message-ID: <CAO_EcGDMpKnh80HeuiFWPitwOeS3OE9EbvtODfHhPZaCHpd-Wg@mail.gmail.com>

Just a pointer (was curious about it, but that's the closest I got in 5
min):
http://twistedmatrix.com/pipermail/twisted-python/2004-July/008180.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120607/2799b9de/attachment-0001.html>

From raphael at uaca.com  Thu Jun  7 23:23:43 2012
From: raphael at uaca.com (Raphael Shu)
Date: Fri, 8 Jun 2012 14:23:43 +0900
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
Message-ID: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>

Hi everyone,

I'm a student of GSoC 2012, from University of Tsukuba, Japan.

I'm glad to be selected as a practicer in Twisted project this year.

Then in these serveral months, my project is to create a code standard
checker for Twisted,

Basically, I will follow "Twisted Coding Standard", it can be found at:

http://twistedmatrix.com/trac/browser/trunk/doc/core/development/policy/coding-standard.xhtml?format=raw


I hope finally this project could be integrated into our main ticket system,

so it would automatically check patches or other things.

Please let me know if you have any good advise or idea to this project.

My name on IRC is zomux.

( This project is currently hosted on launchpad,
http://launchpad.net/twistedchecker )

Thanks.

Best Regards,

-- 
 *Raphael Shu , UACA 2012*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120608/24a9763d/attachment.html>

From jml at mumak.net  Fri Jun  8 01:47:04 2012
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 8 Jun 2012 08:47:04 +0100
Subject: [Twisted-Python] GSoC 2012 Project, TwistedChecker
In-Reply-To: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
References: <CAMf6tMkNfzH_rtfxPyDHUbWSiY2Wn8Be64jCcL0SnV5MEXU7gA@mail.gmail.com>
Message-ID: <CAHZ8tnabxLXrYnZ-OcURhTwwVVSQ_z6TS6NseoU3udHd=L9kAg@mail.gmail.com>

On Fri, Jun 8, 2012 at 6:23 AM, Raphael Shu <raphael at uaca.com> wrote:
> Hi everyone,
>
> I'm a student of GSoC 2012, from University of Tsukuba, Japan.
>
> I'm glad to be selected as apracticerin Twisted project this year.
>
> Then in these serveral months, my project is to create a code standard
> checker for Twisted,
>
> Basically, I will follow "Twisted Coding Standard", it can be found at:
>
> http://twistedmatrix.com/trac/browser/trunk/doc/core/development/policy/coding-standard.xhtml?format=raw
>
> I hope finally this project could beintegrated into our main ticket system,
>
> so it would automatically check patches or other things.
>
> Please let me know if you have any good advise or idea to this project.
>
> My name on IRC is zomux.
>
> ( This project is currently hosted on launchpad,
> http://launchpad.net/twistedchecker)
>

Welcome Raphael! I'm really looking forward to having an automated
Twisted coding standard checker.

Thanks,
jml



From exarkun at twistedmatrix.com  Fri Jun  8 06:57:24 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 08 Jun 2012 12:57:24 -0000
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <4FCFFA01.5040501@gmail.com>
References: <4FCFFA01.5040501@gmail.com>
Message-ID: <20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>

On 7 Jun, 12:46 am, enriquejr at gmail.com wrote:
>Hi,
>
>I am running an app as root on Linux using a .tac file and twistd. The
>application object is initialized with a certain gid and uid. Logging 
>is
>configured to rotate daily by way of DailyLogFile. However, the log 
>file
>it creates is owned by root with 600 file permission and log rotation 
>is
>failing. I have read about acl to configure default file permissions 
>but
>is there a way to solve this only in Twisted?

Log rotation - ie, renaming a file - isn't affected by the permissions 
of the log file.  The permissions of the *directory containing the log 
file* control whether it can be renamed (and a new one created) or not.

So it doesn't matter what permissions the log file has.  It only matters 
what permissions you set on the directory holding the log file.  That's 
outside of the control of twistd.

Jean-Paul



From stephen at thorne.id.au  Sat Jun  9 08:52:51 2012
From: stephen at thorne.id.au (Thorne, Stephen)
Date: Sat, 9 Jun 2012 15:52:51 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
Message-ID: <CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>

Can I get you to send me the original format of this document? I can
open anything.

On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
> The PDF is here - I can export the Keynote slides to some other format if
> you want.
>
> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>
> On 10  2012, at 1:51 .., Thorne, Stephen wrote:
>
> Hihi,
>
> It sounds like I need to get my ass into gear and convince my employer
> to send me to europython, so I can help you out here.
>
> I am available at that time, I just haven't organised anything. Can you send
> me a link to the latest version of the training material you had from last
> year?
>
> Are there any other volunteers? Training is very draining and having more
> than
> one person in the room really helps.
>
> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>
>> Hello everyone,
>>
>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>> (Florence, July 2-8) has been voted in the community and is set to be
>> delivered on July
>> 5.https://ep2012.europython.eu/conference/talks/twisted-tutorialThis
>> turned out to be very popular last year, and had to be repeated on a second
>> day to cover all the audience.
>>
>> Unfortunately for personal reasons I won't be able to attend the
>> conference. Before I give back the slot to the EuroPython organizers, I
>> wonder if someone that would be attending would want to deliver the training
>> in my place. I have a lot of material already from last year, and I can
>> happily work for the preparation of the training.
>>
>> I need to give an answer to the organizers in the next few days, so if
>> someone's interested, please speak up!
>>
>> Thanks,
>> Orestis
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From orestis at orestis.gr  Sat Jun  9 09:36:27 2012
From: orestis at orestis.gr (Orestis Markou)
Date: Sat, 9 Jun 2012 16:36:27 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
	<CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
Message-ID: <F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>

http://db.tt/Kosw5BxX

Let me know if this works-got the link from an iPhone.



9  2012, 15:52, / "Thorne, Stephen" <stephen at thorne.id.au> :

> Can I get you to send me the original format of this document? I can
> open anything.
> 
> On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
>> The PDF is here - I can export the Keynote slides to some other format if
>> you want.
>> 
>> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>> 
>> On 10  2012, at 1:51 .., Thorne, Stephen wrote:
>> 
>> Hihi,
>> 
>> It sounds like I need to get my ass into gear and convince my employer
>> to send me to europython, so I can help you out here.
>> 
>> I am available at that time, I just haven't organised anything. Can you send
>> me a link to the latest version of the training material you had from last
>> year?
>> 
>> Are there any other volunteers? Training is very draining and having more
>> than
>> one person in the room really helps.
>> 
>> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>> 
>>> Hello everyone,
>>> 
>>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>>> (Florence, July 2-8) has been voted in the community and is set to be
>>> delivered on July
>>> 5. https://ep2012.europython.eu/conference/talks/twisted-tutorial This
>>> turned out to be very popular last year, and had to be repeated on a second
>>> day to cover all the audience.
>>> 
>>> Unfortunately for personal reasons I won't be able to attend the
>>> conference. Before I give back the slot to the EuroPython organizers, I
>>> wonder if someone that would be attending would want to deliver the training
>>> in my place. I have a lot of material already from last year, and I can
>>> happily work for the preparation of the training.
>>> 
>>> I need to give an answer to the organizers in the next few days, so if
>>> someone's interested, please speak up!
>>> 
>>> Thanks,
>>> Orestis
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> 
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From stephen at thorne.id.au  Sat Jun  9 10:11:28 2012
From: stephen at thorne.id.au (Thorne, Stephen)
Date: Sat, 9 Jun 2012 17:11:28 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
	<CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
	<F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>
Message-ID: <CAFPU7=tFbhaW+2R=Cg5Z2NoKZLCpUN_Msc7Of1DaMSQqLKOn_w@mail.gmail.com>

Yep, worked fine, thanks!

On Sat, Jun 9, 2012 at 4:36 PM, Orestis Markou <orestis at orestis.gr> wrote:
> http://db.tt/Kosw5BxX
>
> Let me know if this works-got the link from an iPhone.
>
>
>
> 9  2012, 15:52, / "Thorne, Stephen" <stephen at thorne.id.au> :
>
>> Can I get you to send me the original format of this document? I can
>> open anything.
>>
>> On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
>>> The PDF is here - I can export the Keynote slides to some other format if
>>> you want.
>>>
>>> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>>>
>>> On 10  2012, at 1:51 .., Thorne, Stephen wrote:
>>>
>>> Hihi,
>>>
>>> It sounds like I need to get my ass into gear and convince my employer
>>> to send me to europython, so I can help you out here.
>>>
>>> I am available at that time, I just haven't organised anything. Can you send
>>> me a link to the latest version of the training material you had from last
>>> year?
>>>
>>> Are there any other volunteers? Training is very draining and having more
>>> than
>>> one person in the room really helps.
>>>
>>> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>>>
>>>> Hello everyone,
>>>>
>>>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>>>> (Florence, July 2-8) has been voted in the community and is set to be
>>>> delivered on July
>>>> 5. https://ep2012.europython.eu/conference/talks/twisted-tutorial This
>>>> turned out to be very popular last year, and had to be repeated on a second
>>>> day to cover all the audience.
>>>>
>>>> Unfortunately for personal reasons I won't be able to attend the
>>>> conference. Before I give back the slot to the EuroPython organizers, I
>>>> wonder if someone that would be attending would want to deliver the training
>>>> in my place. I have a lot of material already from last year, and I can
>>>> happily work for the preparation of the training.
>>>>
>>>> I need to give an answer to the organizers in the next few days, so if
>>>> someone's interested, please speak up!
>>>>
>>>> Thanks,
>>>> Orestis
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>>
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From orestis at orestis.gr  Sat Jun  9 14:22:03 2012
From: orestis at orestis.gr (Orestis Markou)
Date: Sat, 9 Jun 2012 21:22:03 +0100
Subject: [Twisted-Python] Replacement for Twisted Tutorial in Europython
	2012
In-Reply-To: <CAFPU7=tFbhaW+2R=Cg5Z2NoKZLCpUN_Msc7Of1DaMSQqLKOn_w@mail.gmail.com>
References: <5CB88ED5-1978-4256-85C0-6C8E01A6193C@orestis.gr>
	<CAFPU7=u3eJcvWAKWr_6ErStNAEfqby33jrbOb+SF-orm4jQymA@mail.gmail.com>
	<BC4854AA-4E6C-48CC-ABC7-6965BF8929BB@orestis.gr>
	<CAFPU7=uGv1sDNaT6Cpr9hdndjYCjX_ig0O=PNbacOnVZLEiu6g@mail.gmail.com>
	<F51B70CD-93DE-4616-8AC2-DE6539E4C479@orestis.gr>
	<CAFPU7=tFbhaW+2R=Cg5Z2NoKZLCpUN_Msc7Of1DaMSQqLKOn_w@mail.gmail.com>
Message-ID: <1FE691AA-0B83-485C-A3FB-9CBE87E6E9DB@orestis.gr>

Nice. I'll send you the listings as well later tonight.



9  2012, 17:11, / "Thorne, Stephen" <stephen at thorne.id.au> :

> Yep, worked fine, thanks!
> 
> On Sat, Jun 9, 2012 at 4:36 PM, Orestis Markou <orestis at orestis.gr> wrote:
>> http://db.tt/Kosw5BxX
>> 
>> Let me know if this works-got the link from an iPhone.
>> 
>> 
>> 
>> 9  2012, 15:52, / "Thorne, Stephen" <stephen at thorne.id.au> :
>> 
>>> Can I get you to send me the original format of this document? I can
>>> open anything.
>>> 
>>> On Thu, May 10, 2012 at 12:02 PM, Orestis Markou <orestis at orestis.gr> wrote:
>>>> The PDF is here - I can export the Keynote slides to some other format if
>>>> you want.
>>>> 
>>>> https://ep2012.europython.eu/conference/talks/asynchronous-programming-with-twisted
>>>> 
>>>> On 10  2012, at 1:51 .., Thorne, Stephen wrote:
>>>> 
>>>> Hihi,
>>>> 
>>>> It sounds like I need to get my ass into gear and convince my employer
>>>> to send me to europython, so I can help you out here.
>>>> 
>>>> I am available at that time, I just haven't organised anything. Can you send
>>>> me a link to the latest version of the training material you had from last
>>>> year?
>>>> 
>>>> Are there any other volunteers? Training is very draining and having more
>>>> than
>>>> one person in the room really helps.
>>>> 
>>>> On Thu, May 10, 2012 at 11:02 AM, Orestis Markou <orestis at orestis.gr> wrote:
>>>>> 
>>>>> Hello everyone,
>>>>> 
>>>>> My proposal for delivering a 4h Twisted training in EuroPython 2012
>>>>> (Florence, July 2-8) has been voted in the community and is set to be
>>>>> delivered on July
>>>>> 5. https://ep2012.europython.eu/conference/talks/twisted-tutorial This
>>>>> turned out to be very popular last year, and had to be repeated on a second
>>>>> day to cover all the audience.
>>>>> 
>>>>> Unfortunately for personal reasons I won't be able to attend the
>>>>> conference. Before I give back the slot to the EuroPython organizers, I
>>>>> wonder if someone that would be attending would want to deliver the training
>>>>> in my place. I have a lot of material already from last year, and I can
>>>>> happily work for the preparation of the training.
>>>>> 
>>>>> I need to give an answer to the organizers in the next few days, so if
>>>>> someone's interested, please speak up!
>>>>> 
>>>>> Thanks,
>>>>> Orestis
>>>>> 
>>>>> _______________________________________________
>>>>> Twisted-Python mailing list
>>>>> Twisted-Python at twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>> 
>>>> 
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>> 
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From exarkun at twistedmatrix.com  Sat Jun  9 22:05:52 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 10 Jun 2012 04:05:52 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1339301152.54.348052628@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120610/ca2036ce/attachment.html>

From glyph at twistedmatrix.com  Sun Jun 10 02:54:32 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 10 Jun 2012 01:54:32 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
Message-ID: <A1202D41-7442-41C4-A14B-B338906C2E6A@twistedmatrix.com>


On Jun 8, 2012, at 5:57 AM, exarkun at twistedmatrix.com wrote:

> On 7 Jun, 12:46 am, enriquejr at gmail.com wrote:
>> Hi,
>> 
>> I am running an app as root on Linux using a .tac file and twistd. The
>> application object is initialized with a certain gid and uid. Logging 
>> is
>> configured to rotate daily by way of DailyLogFile. However, the log 
>> file
>> it creates is owned by root with 600 file permission and log rotation 
>> is
>> failing. I have read about acl to configure default file permissions 
>> but
>> is there a way to solve this only in Twisted?
> 
> Log rotation - ie, renaming a file - isn't affected by the permissions 
> of the log file.  The permissions of the *directory containing the log 
> file* control whether it can be renamed (and a new one created) or not.
> 
> So it doesn't matter what permissions the log file has.  It only matters 
> what permissions you set on the directory holding the log file.  That's 
> outside of the control of twistd.

Perhaps twistd could emit a warning at startup though, and decline to rotate the log if it's impossible rather than logging an ugly traceback?


From flaviogrossi at ymail.com  Mon Jun 11 01:21:49 2012
From: flaviogrossi at ymail.com (Flavio Grossi)
Date: Mon, 11 Jun 2012 07:21:49 +0000 (UTC)
Subject: [Twisted-Python] Log file ownership
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
Message-ID: <loom.20120611T091817-992@post.gmane.org>

 <exarkun <at> twistedmatrix.com> writes:


> 
> Log rotation - ie, renaming a file - isn't affected by the permissions 
> of the log file.  The permissions of the *directory containing the log 
> file* control whether it can be renamed (and a new one created) or not.
> 
> So it doesn't matter what permissions the log file has.  It only matters 
> what permissions you set on the directory holding the log file.  That's 
> outside of the control of twistd.

http://twistedmatrix.com/trac/browser/tags/releases/twisted-
12.0.0/twisted/python/logfile.py#L286

def rotate(self):
    if not (os.access(self.directory, os.W_OK) and os.access(self.path, 
os.W_OK)):
        return


it seems to also need write access to log file.

bye,
flavio


> 
> Jean-Paul
> 






From martin at webscio.net  Mon Jun 11 09:01:25 2012
From: martin at webscio.net (Martin)
Date: Mon, 11 Jun 2012 16:01:25 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
Message-ID: <4FD60845.4090702@webscio.net>

Hi there,

I've been looking around for a solution for several hours now, and maybe 
I'm just missing something..

I've a factory that implements protocol.ReconnectingClientFactory which 
works just fine, however, whenever the program ends running, I get a 
bunch of Unhandled error in Deferred messages in my log for each 
disconnection that occurred during runtime, such as Failure: 
twisted.internet.error.ConnectionLost: ...

Is there any way I could somehow "handle" these during runtime, so that 
my log wouldn't be spammed with this at the end.. (or avoid it being 
spammed somehow..) I really don't care what the solution is, I already 
have the following method that logs everything for me
def clientConnectionLost(self, connector, reason):
         log.msg('Lost connection. Reason: %s' % reason)

just annoying that it's still finds the need to print it out at the end.

Anyway, I don't claim to be anywhere near proficient in Twisted, so any 
help would be greatly appreciated.


Thanks a lot in advance.

Martin



From exarkun at twistedmatrix.com  Mon Jun 11 18:10:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 11 Jun 2012 21:10:25 -0300
Subject: [Twisted-Python] kariera
Message-ID: <mailman.15.1574573495.12674.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120611/2b113a1c/attachment.html>

From duncan.mcgreggor at gmail.com  Mon Jun 11 19:03:28 2012
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Mon, 11 Jun 2012 21:03:28 -0400
Subject: [Twisted-Python] kariera
In-Reply-To: <E1SeEil-0006dO-MP@cube.twistedmatrix.com>
References: <E1SeEil-0006dO-MP@cube.twistedmatrix.com>
Message-ID: <CAFJQhU5UTa7sXQaP3h-X49nDeLP1JMqSD_MmuuOxRGjf2=dWyw@mail.gmail.com>

2012/6/11  <exarkun at twistedmatrix.com>:
> Wielka szansa!
>
> Nasza firma jest firm doradztwa finansowego, ktre spotyka si ze

[snip]

JP, I had no idea you were such a polyglot.

d



From exarkun at twistedmatrix.com  Mon Jun 11 19:34:31 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 11 Jun 2012 22:34:31 -0300
Subject: [Twisted-Python] Wielka szansa!
Message-ID: <mailman.16.1574573495.12674.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120611/48f82804/attachment.html>

From exarkun at twistedmatrix.com  Mon Jun 11 21:08:05 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 00:08:05 -0300
Subject: [Twisted-Python] Najczesciej wyswietlane FIRMY IT
Message-ID: <mailman.17.1574573495.12674.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120612/dd6410be/attachment.html>

From exarkun at twistedmatrix.com  Tue Jun 12 00:22:10 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 07:22:10 +0100
Subject: [Twisted-Python] Najczesciej wyswietlane FIRMY IT
Message-ID: <mailman.18.1574573495.12674.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120612/f90ef2ea/attachment.html>

From exarkun at twistedmatrix.com  Tue Jun 12 03:20:14 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 11:20:14 +0200
Subject: [Twisted-Python] Firma Nilex szuka partnera w Polsce!
Message-ID: <9095021759.BWQQFG15111217@voyoxmkhp.chkfkau.tv>

A non-text attachment was scrubbed...
Name: not available
Type: text/html
	charset="iso-8859-1"
Size: 2306 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20120612/dff82fae/attachment-0002.bin>

From exarkun at twistedmatrix.com  Tue Jun 12 06:15:39 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 13:15:39 +0100
Subject: [Twisted-Python] Zobacz najnowsze Oferty Pracy w IT
Message-ID: <mailman.19.1574573495.12674.twisted-python@twistedmatrix.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120612/665f98d7/attachment.html>

From exarkun at twistedmatrix.com  Tue Jun 12 08:43:14 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 15:43:14 +0100
Subject: [Twisted-Python] Szukaj ofert pracy!
Message-ID: <0583657910.4U5ZSUMC815899@heierlrccrm.pbxase.ua>

A non-text attachment was scrubbed...
Name: not available
Type: text/html
	charset="iso-8859-1"
Size: 2307 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20120612/b0ce2d47/attachment-0002.bin>

From itamar at itamarst.org  Tue Jun 12 09:23:06 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 12 Jun 2012 11:23:06 -0400
Subject: [Twisted-Python] I will try to beef up the mailing list's anti-spam
	filters now
Message-ID: <4FD75EDA.7000701@itamarst.org>

Sorry for the problems.

-Itamar



From exarkun at twistedmatrix.com  Tue Jun 12 10:01:06 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 12 Jun 2012 17:01:06 +0100
Subject: [Twisted-Python] Firma Nilex szuka partnera w Polsce!
Message-ID: <2573934776.K50S5WF0966695@sfnekkzmjbblpgw.ksatcexx.info>

A non-text attachment was scrubbed...
Name: not available
Type: text/html
	charset="iso-8859-1"
Size: 2307 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20120612/b5af72b9/attachment-0002.bin>

From qdnguyen at MIT.EDU  Tue Jun 12 14:53:50 2012
From: qdnguyen at MIT.EDU (Quan Nguyen)
Date: Tue, 12 Jun 2012 20:53:50 +0000
Subject: [Twisted-Python] Quan Nguyen: Twisted Python questions
Message-ID: <7BB2F22B51197D40B59E42E2B076261929D52C3A@OC11EXPO31.exchange.mit.edu>

Hello,

I am new to Twisted. 
I am extending the twisted Echo server example by sending the data that the server receives from telnet into a child process that processes the data. The function outReceived in censoringProtocol is called when the child writes the result and the result is received. The process of passing data from parent to child and back to parent is done by having a while loop of stdin.readline() and stdout.write() in the child process. 
Specifically, I generate a deferred object each time I write to the child using the function sendData (which then calls writeToChild) and use a queue to manage the deferred objects. I add a callBack (printData) that will broadcast the result to all instances of Echo when outReceived is called. 

I have two questions: 
1/ Is this the right approach to communicate with the child process in order to achieve what I want? Are there any gotcha's?
2/ This server will be exposed to high loads. There will be many instances of Echo sending data to the child at a high rate. Are there any limitations that I have to watch for, such as the limit on child process's pipe sizes or anything else?

My code is down below, as well as in this link:
https://gist.github.com/2920032

Thank You for your time.
Quan Nguyen


from sys import executable
from os import environ
from twisted.internet import reactor, defer
from twisted.internet.protocol import Protocol
from twisted.internet.protocol import Factory
from twisted.internet import protocol
from twisted.protocols.basic import LineReceiver
import sys
import time
import Queue
import os

implementation = """
import os
import time
import sys
import string
def censor():
        BW = ["sfs", "fsdfwe", "tryt", "sfsvx"]
        while (True):
            a = sys.stdin.readline()
            if a:
                   for bannedWord in BW:
                        a = string.replace(a, bannedWord , '<banned>')
                   sys.stdout.write(a)
                   sys.stdout.flush()
"""

class Echo(LineReceiver):
        def lineReceived(self, data):
            d = self.factory.process.sendData(data+'\r\n')
            #reactor.callLater(3,d.addCallback, printData)
            d.addCallback(printData)
            prot.transport.write(data)

def createProcess():
    pp = censoringProtocol()
    Process = reactor.spawnProcess(pp, executable, [executable, "-c", implementation], env=environ, childFDs = {0:"w", 1:"r", 2:"r"})
    pp.process = Process
    return pp    

class EchoFactory(Factory): 
      protocol = Echo 
      telnetConnectionList  = []
      process  = None
      deferQ   = None

      def __init__(self):
          EchoFactory.process = createProcess()
          EchoFactory.deferQ  = Queue.Queue()
      def buildProtocol (self, addr):
          newProtocol = Factory.buildProtocol(self, addr)
          EchoFactory.telnetConnectionList.append(newProtocol)
          return newProtocol

class censoringProtocol(protocol.ProcessProtocol):

    def __init__(self):
        self.process = None

    def connectionMade(self):
        print "connectionMade!"

    def outReceived(self, data):
        EchoFactory.deferQ.get().callback(data)

    def sendData(self,data):
        d = defer.Deferred()
        EchoFactory.deferQ.put(d)
        self.process.writeToChild(0, data)
        return d



reactor.listenTCP(11111, EchoFactory())
print 'in parent', os.getpid()
reactor.run()




From adi at roiban.ro  Wed Jun 13 04:39:42 2012
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 13 Jun 2012 13:39:42 +0300
Subject: [Twisted-Python] Detect SSL transport and get remote peer
	certificate in tcp.Server
Message-ID: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>

Hi,

I work at an experimental FTPS implementation for twisted.protocol.ftp

I use the following code for checking that the transport has TLS
started and to get the client certificate for certificate based
authentication:

    @property
    def is_ftps_command_active(self):
        '''Return `True` if current command connection is using SSL.'''
        return isinstance(self.transport.socket, SSL.Connection)

    def getPeerCertificate(self):
        '''Return the peer certificate if remote peer is on a SSL connection
        and has sent us a certificate.
        Return `None` otherwise.
        '''
        if not hasattr(self.transport, 'socket'):
            return None
        if not self.is_ftps_command_active:
            return None
        return self.transport.socket.get_peer_certificate()

The code works with Twisted 10, but after the Twisted TLS refactoring
in Twisted 12, the transport no longer uses a SSL.Connection.

Is there a way to get the remote peer certificate of a TLS transport
in Twisted 12?

Is there a way to check whether or not the transport has SSL enabled or not?

Many thanks!

-- 
Adi Roiban



From exarkun at twistedmatrix.com  Wed Jun 13 05:15:50 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 13 Jun 2012 11:15:50 -0000
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
Message-ID: <20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>

On 10:39 am, adi at roiban.ro wrote:
>Hi,
>
>I work at an experimental FTPS implementation for twisted.protocol.ftp
>
>I use the following code for checking that the transport has TLS
>started and to get the client certificate for certificate based
>authentication:
>
>    @property
>    def is_ftps_command_active(self):
>        '''Return `True` if current command connection is using SSL.'''
>        return isinstance(self.transport.socket, SSL.Connection)

Instead, check `ISSLTransport.providedBy(self.transport)`. 
`ISSLTransport` comes from `twisted.internet.interfaces`.
>    def getPeerCertificate(self):
>        '''Return the peer certificate if remote peer is on a SSL 
>connection
>        and has sent us a certificate.
>        Return `None` otherwise.
>        '''
>        if not hasattr(self.transport, 'socket'):
>            return None
>        if not self.is_ftps_command_active:
>            return None
>        return self.transport.socket.get_peer_certificate()

Heh. :)  Instead, use `transport.getPeerCertificate()`. 
`getPeerCertificate` is a method specified by `ISSLTransport`.

Jean-Paul



From p.mayers at imperial.ac.uk  Wed Jun 13 06:20:30 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 13 Jun 2012 13:20:30 +0100
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
	<20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <4FD8858E.3060300@imperial.ac.uk>

On 13/06/12 12:15, exarkun at twistedmatrix.com wrote:

> Heh. :)  Instead, use `transport.getPeerCertificate()`.
> `getPeerCertificate` is a method specified by `ISSLTransport`.

I've run into some oddities which this method call before; IIRC you have 
to setup the context in a very particular way to even SEE client 
certificates, regardless of whether the client sends them?



From adi at roiban.ro  Wed Jun 13 06:44:22 2012
From: adi at roiban.ro (Adi Roiban)
Date: Wed, 13 Jun 2012 15:44:22 +0300
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
	<20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <CAFycZ9d4zd=MfVdUDY2GswyMjimG5K6uQek-OPwMJH4JXb9iMQ@mail.gmail.com>

On 13 June 2012 14:15,  <exarkun at twistedmatrix.com> wrote:
> On 10:39 am, adi at roiban.ro wrote:
>>Hi,
>>
>>I work at an experimental FTPS implementation for twisted.protocol.ftp
>>
>>I use the following code for checking that the transport has TLS
>>started and to get the client certificate for certificate based
>>authentication:
>>
>>  @property
>>  def is_ftps_command_active(self):
>>    '''Return `True` if current command connection is using SSL.'''
>>    return isinstance(self.transport.socket, SSL.Connection)
>
> Instead, check `ISSLTransport.providedBy(self.transport)`.
> `ISSLTransport` comes from `twisted.internet.interfaces`.

I can get the peer certificate, but
ISSLTransport.providedBy(self.transport) returns False.

I am still new to Twisted. For me the transport looks like it has some
kind sorcery attached since getPeerCertificate is not listed by
dir(self.transport)

Not sure what I got here :)

(Pdb) self.transport.getPeerCertificate()
<X509 object at 0x9fc5af0>
(Pdb) ISSLTransport.providedBy(self.transport)
False
(Pdb) dir(self.transport)
['__doc__', '__getattr__', '__implemented__', '__init__',
'__module__', '__providedBy__', '__provides__', 'connected',
'connectionLost', 'connectionMade', 'dataReceived', 'disconnecting',
'factory', 'getHost', 'getPeer', 'logPrefix', 'loseConnection',
'makeConnection', 'registerProducer', 'stopConsuming', 'transport',
'unregisterProducer', 'wrappedProtocol', 'write', 'writeSequence']


>>  def getPeerCertificate(self):
>>    '''Return the peer certificate if remote peer is on a SSL
>>connection
>>    and has sent us a certificate.
>>    Return `None` otherwise.
>>    '''
>>    if not hasattr(self.transport, 'socket'):
>>      return None
>>    if not self.is_ftps_command_active:
>>      return None
>>    return self.transport.socket.get_peer_certificate()
>
> Heh. :) Instead, use `transport.getPeerCertificate()`.
> `getPeerCertificate` is a method specified by `ISSLTransport`.

Thanks! :)

I was able to get the peer certificate.

----

The full code is here: https://github.com/chevah/txftps/tree/master/txftps
It uses twisted.internet.tcp.Server for FTP command channel and
TLSMemoryBIOProtocol for data channel.

Phil, you can take a look at how the context is configured.
The context is defined here:
https://github.com/chevah/txftps/blob/master/txftps/ssl.py


-- 
Adi Roiban



From exarkun at twistedmatrix.com  Wed Jun 13 07:13:35 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 13 Jun 2012 13:13:35 -0000
Subject: [Twisted-Python] Detect SSL transport and get remote peer
 certificate in tcp.Server
In-Reply-To: <CAFycZ9d4zd=MfVdUDY2GswyMjimG5K6uQek-OPwMJH4JXb9iMQ@mail.gmail.com>
References: <CAFycZ9dx+tjQCr+PzdEEvUFGukKwabFQLZscHhvBZWSv4MC9gw@mail.gmail.com>
	<20120613111550.6806.1869350067.divmod.xquotient.3@localhost6.localdomain6>
	<CAFycZ9d4zd=MfVdUDY2GswyMjimG5K6uQek-OPwMJH4JXb9iMQ@mail.gmail.com>
Message-ID: <20120613131335.6806.349995735.divmod.xquotient.20@localhost6.localdomain6>

On 12:44 pm, adi at roiban.ro wrote:
>On 13 June 2012 14:15,  <exarkun at twistedmatrix.com> wrote:
>>On 10:39 am, adi at roiban.ro wrote:
>>>Hi,
>>>
>>>I work at an experimental FTPS implementation for 
>>>twisted.protocol.ftp
>>>
>>>I use the following code for checking that the transport has TLS
>>>started and to get the client certificate for certificate based
>>>authentication:
>>>
>>> @property
>>> def is_ftps_command_active(self):
>>>   '''Return `True` if current command connection is using 
>>>SSL.'''
>>>   return isinstance(self.transport.socket, SSL.Connection)
>>
>>Instead, check `ISSLTransport.providedBy(self.transport)`.
>>`ISSLTransport` comes from `twisted.internet.interfaces`.
>
>I can get the peer certificate, but
>ISSLTransport.providedBy(self.transport) returns False.

That sounds like a bug in the new TLS implementation, then. :/  Can you 
file a bug report?  Be sure to include how you set up the connection 
(connectSSL or startTLS or whatever).
>I am still new to Twisted. For me the transport looks like it has some
>kind sorcery attached since getPeerCertificate is not listed by
>dir(self.transport)
>
>Not sure what I got here :)

Yea.  There's some method proxying going on.

Thanks,
Jean-Paul
>(Pdb) self.transport.getPeerCertificate()
><X509 object at 0x9fc5af0>
>(Pdb) ISSLTransport.providedBy(self.transport)
>False
>(Pdb) dir(self.transport)
>['__doc__', '__getattr__', '__implemented__', '__init__',
>'__module__', '__providedBy__', '__provides__', 'connected',
>'connectionLost', 'connectionMade', 'dataReceived', 'disconnecting',
>'factory', 'getHost', 'getPeer', 'logPrefix', 'loseConnection',
>'makeConnection', 'registerProducer', 'stopConsuming', 'transport',
>'unregisterProducer', 'wrappedProtocol', 'write', 'writeSequence']
>>> def getPeerCertificate(self):
>>>   '''Return the peer certificate if remote peer is on a SSL
>>>connection
>>>   and has sent us a certificate.
>>>   Return `None` otherwise.
>>>   '''
>>>   if not hasattr(self.transport, 'socket'):
>>>     return None
>>>   if not self.is_ftps_command_active:
>>>     return None
>>>   return self.transport.socket.get_peer_certificate()
>>
>>Heh. :) Instead, use `transport.getPeerCertificate()`.
>>`getPeerCertificate` is a method specified by `ISSLTransport`.
>
>Thanks! :)
>
>I was able to get the peer certificate.
>
>----
>
>The full code is here: 
>https://github.com/chevah/txftps/tree/master/txftps
>It uses twisted.internet.tcp.Server for FTP command channel and
>TLSMemoryBIOProtocol for data channel.
>
>Phil, you can take a look at how the context is configured.
>The context is defined here:
>https://github.com/chevah/txftps/blob/master/txftps/ssl.py
>
>
>--
>Adi Roiban
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From glyph at twistedmatrix.com  Wed Jun 13 12:50:56 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 13 Jun 2012 11:50:56 -0700
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FD60845.4090702@webscio.net>
References: <4FD60845.4090702@webscio.net>
Message-ID: <78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>


On Jun 11, 2012, at 8:01 AM, Martin wrote:

> Hi there,
> 
> I've been looking around for a solution for several hours now, and maybe 
> I'm just missing something..
> 
> I've a factory that implements protocol.ReconnectingClientFactory which 
> works just fine, however, whenever the program ends running, I get a 
> bunch of Unhandled error in Deferred messages in my log for each 
> disconnection that occurred during runtime, such as Failure: 
> twisted.internet.error.ConnectionLost: ...
> 
> Is there any way I could somehow "handle" these during runtime, so that 
> my log wouldn't be spammed with this at the end.. (or avoid it being 
> spammed somehow..)

These messages are coming from some code which is issuing Deferreds, not from ReconnectingClientFactory.  You need to add an errback to those Deferreds in your application code.  There's no way to write a catch-all, just like there's no way to write a catch-all that can stop exceptions from being raised in basic Python.

I can't say more without a code example, preferably a <http://sscce.org/>.

-glyph




From glyph at twistedmatrix.com  Wed Jun 13 13:10:18 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 13 Jun 2012 12:10:18 -0700
Subject: [Twisted-Python] Quan Nguyen: Twisted Python questions
In-Reply-To: <7BB2F22B51197D40B59E42E2B076261929D52C3A@OC11EXPO31.exchange.mit.edu>
References: <7BB2F22B51197D40B59E42E2B076261929D52C3A@OC11EXPO31.exchange.mit.edu>
Message-ID: <01B4075F-A1A4-49DF-BCAD-D4C0A6FA2C73@twistedmatrix.com>


On Jun 12, 2012, at 1:53 PM, Quan Nguyen wrote:

> Hello,
> 
> I am new to Twisted. 
> I am extending the twisted Echo server example by sending the data that the server receives from telnet into a child process that processes the data. The function outReceived in censoringProtocol is called when the child writes the result and the result is received. The process of passing data from parent to child and back to parent is done by having a while loop of stdin.readline() and stdout.write() in the child process. 
> Specifically, I generate a deferred object each time I write to the child using the function sendData (which then calls writeToChild) and use a queue to manage the deferred objects. I add a callBack (printData) that will broadcast the result to all instances of Echo when outReceived is called. 
> 
> I have two questions: 
> 1/ Is this the right approach to communicate with the child process in order to achieve what I want? Are there any gotcha's?

This sounds pretty much fine, except for the caveat you already asked about:

> 2/ This server will be exposed to high loads. There will be many instances of Echo sending data to the child at a high rate. Are there any limitations that I have to watch for, such as the limit on child process's pipe sizes or anything else?

You might want to investigate the producer/consumer API, as recently blogged about by our marvelously productive summer intern, ashfall: <http://ashfall.github.com/blog/2012/05/29/twisted-producer-and-consumer-system/>.  As currently written, even if your subprocess backs up, you will buffer data to it without any limits.

(The consumer you want, by the way, is censoringProtocol().transport.pipes[0], in case that isn't entirely clear; processes need to be documented a little better.)

You may have to write a little bit of tricky code to multiplex the consumer, if you want to have multiple "echo" client connections using the same subprocess.  If it were a 1<->1 relationship you could just register the echo protocol's transport as the producer for the stdin pipe on the processing protocol, but spawning that many processes is probably wasteful.

-glyph


From glyph at twistedmatrix.com  Wed Jun 13 13:15:34 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 13 Jun 2012 12:15:34 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <loom.20120611T091817-992@post.gmane.org>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
	<loom.20120611T091817-992@post.gmane.org>
Message-ID: <982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>


On Jun 11, 2012, at 12:21 AM, Flavio Grossi wrote:

> <exarkun <at> twistedmatrix.com> writes:
> 
> 
>> 
>> Log rotation - ie, renaming a file - isn't affected by the permissions 
>> of the log file.  The permissions of the *directory containing the log 
>> file* control whether it can be renamed (and a new one created) or not.
>> 
>> So it doesn't matter what permissions the log file has.  It only matters 
>> what permissions you set on the directory holding the log file.  That's 
>> outside of the control of twistd.
> 
> http://twistedmatrix.com/trac/browser/tags/releases/twisted-
> 12.0.0/twisted/python/logfile.py#L286
> 
> def rotate(self):
>    if not (os.access(self.directory, os.W_OK) and os.access(self.path, 
> os.W_OK)):
>        return
> 
> 
> it seems to also need write access to log file.

It's a pity that this code wasn't commented.  I can't find a platform where moving the file needs write access.  File a bug?  (Just another example of why LBYL is an antipattern...)

-glyph


From martin at webscio.net  Thu Jun 14 05:38:44 2012
From: martin at webscio.net (Martin)
Date: Thu, 14 Jun 2012 12:38:44 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
Message-ID: <4FD9CD44.1030102@webscio.net>

Hi, thanks for your reply.

Indeed, the ReconnectingClientFactory is being sent the Failure object to

def clientConnectionLost(self, connector, reason):
         log.msg('Lost connection. Reason: %s' % reason)
         protocol.ReconnectingClientFactory.clientConnectionLost(self, 
connector, reason)

where "reason" is the Failure object that is "unhandled". is there 
anything I could do to it there to make it handled?

Also, the documentation in 
http://twistedmatrix.com/documents/current/core/howto/defer.html says 
that one can do d.addErrback(err.log) to deal with unhandled errors, but 
what is d?

In general, I'm not doing anything special.. I'm creating a 
ReconnectingClientFactory and connecting it to a server..
f = MyReconnectingClientFactory(..)
reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
reactor.run()

Basically it. Any thoughts? Thanks a lot!
> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>
>> Hi there,
>>
>> I've been looking around for a solution for several hours now, and maybe
>> I'm just missing something..
>>
>> I've a factory that implements protocol.ReconnectingClientFactory which
>> works just fine, however, whenever the program ends running, I get a
>> bunch of Unhandled error in Deferred messages in my log for each
>> disconnection that occurred during runtime, such as Failure:
>> twisted.internet.error.ConnectionLost: ...
>>
>> Is there any way I could somehow "handle" these during runtime, so that
>> my log wouldn't be spammed with this at the end.. (or avoid it being
>> spammed somehow..)
> These messages are coming from some code which is issuing Deferreds, not from ReconnectingClientFactory.  You need to add an errback to those Deferreds in your application code.  There's no way to write a catch-all, just like there's no way to write a catch-all that can stop exceptions from being raised in basic Python.
>
> I can't say more without a code example, preferably a<http://sscce.org/>.
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>




From wolfgang at rohdewald.de  Thu Jun 14 06:27:56 2012
From: wolfgang at rohdewald.de (Wolfgang Rohdewald)
Date: Thu, 14 Jun 2012 14:27:56 +0200
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
Message-ID: <19421453.L4QdkbeXYx@i5>

it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.

So programs using twisted (including my own) will not come preinstalled.

how is progress going with twisted and Python3?

-- 
Wolfgang



From dynamicgl at gmail.com  Thu Jun 14 06:34:41 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Thu, 14 Jun 2012 20:34:41 +0800
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FD9CD44.1030102@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net>
Message-ID: <CABkOF6QJ4u4tPsU6cOtrF9fL2PWOPiF9=R06qN0UYyVzDuY2-w@mail.gmail.com>

On Thu, Jun 14, 2012 at 7:38 PM, Martin <martin at webscio.net> wrote:

> Hi, thanks for your reply.
>
> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>
> def clientConnectionLost(self, connector, reason):
>         log.msg('Lost connection. Reason: %s' % reason)
>          protocol.ReconnectingClientFactory.clientConnectionLost(self,
> connector, reason)
>
> where "reason" is the Failure object that is "unhandled". is there
> anything I could do to it there to make it handled?
>
> Also, the documentation in
> http://twistedmatrix.com/documents/current/core/howto/defer.html says
> that one can do d.addErrback(err.log) to deal with unhandled errors, but
> what is d?
>
> In general, I'm not doing anything special.. I'm creating a
> ReconnectingClientFactory and connecting it to a server..
> f = MyReconnectingClientFactory(..)
> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
> reactor.run()
>
> Basically it. Any thoughts? Thanks a lot!
> > On Jun 11, 2012, at 8:01 AM, Martin wrote:
> >
> >> Hi there,
> >>
> >> I've been looking around for a solution for several hours now, and maybe
> >> I'm just missing something..
> >>
> >> I've a factory that implements protocol.ReconnectingClientFactory which
> >> works just fine, however, whenever the program ends running, I get a
> >> bunch of Unhandled error in Deferred messages in my log for each
> >> disconnection that occurred during runtime, such as Failure:
> >> twisted.internet.error.ConnectionLost: ...
> >>
> >> Is there any way I could somehow "handle" these during runtime, so that
> >> my log wouldn't be spammed with this at the end.. (or avoid it being
> >> spammed somehow..)
> > These messages are coming from some code which is issuing Deferreds, not
> from ReconnectingClientFactory.  You need to add an errback to those
> Deferreds in your application code.  There's no way to write a catch-all,
> just like there's no way to write a catch-all that can stop exceptions from
> being raised in basic Python.
> >
> > I can't say more without a code example, preferably a<http://sscce.org/
> >.
> >
> > -glyph
> >
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi Martin

  d refers to a defer object.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120614/986dca67/attachment-0001.html>

From vlada.peric at gmail.com  Thu Jun 14 06:46:45 2012
From: vlada.peric at gmail.com (=?UTF-8?Q?Vladimir_Peri=C4=87?=)
Date: Thu, 14 Jun 2012 14:46:45 +0200
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <19421453.L4QdkbeXYx@i5>
References: <19421453.L4QdkbeXYx@i5>
Message-ID: <CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>

Hi,

On Thu, Jun 14, 2012 at 2:27 PM, Wolfgang Rohdewald
<wolfgang at rohdewald.de> wrote:
> it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.
>
> So programs using twisted (including my own) will not come preinstalled.
>
> how is progress going with twisted and Python3?

I'm working on Python 3 support as a GSoC project for this summer.
It's too early to give an estimate, but getting it all done by Ubuntu
12.10 is a very optimistic goal. You'll be able to follow progress on
my blog [1], though it's currently... out-dated.

As far as Ubuntu itself is concerned, I wasn't aware that Twisted is
available from the default Ubuntu CD. Per [2], this is the only thing
that will be affected - what is shipped on the CD. All the other
Python 2 packages will be available normally through the repos.


[1] vperic.blogspot.com
[2] https://wiki.ubuntu.com/Python/FoundationsQPythonVersions

>
> --
> Wolfgang
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
Vladimir Peri



From wolfgang at rohdewald.de  Thu Jun 14 08:05:48 2012
From: wolfgang at rohdewald.de (Wolfgang Rohdewald)
Date: Thu, 14 Jun 2012 16:05:48 +0200
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
Message-ID: <2982820.WZDvvi63Zq@i5>

Am Donnerstag, 14. Juni 2012, 14:46:45 schrieb Vladimir Peri:
> As far as Ubuntu itself is concerned, I wasn't aware that Twisted is
> available from the default Ubuntu CD.

you are right, it is not. I thought all of kdegames is preinstalled but
actually only kpat is there. Sorry for the noise.

-- 
Wolfgang



From gavin at gromper.net  Thu Jun 14 09:17:30 2012
From: gavin at gromper.net (Gavin Panella)
Date: Thu, 14 Jun 2012 16:17:30 +0100
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
Message-ID: <CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>

On 14 June 2012 13:46, Vladimir Peri <vlada.peric at gmail.com> wrote:
...
> As far as Ubuntu itself is concerned, I wasn't aware that Twisted is
> available from the default Ubuntu CD.

It's on the Ubuntu 12.04 Server CD; see
http://cdimages.ubuntu.com/ubuntu-server/precise/daily/current/precise-server-amd64.list



From martin at webscio.net  Thu Jun 14 09:34:15 2012
From: martin at webscio.net (Martin)
Date: Thu, 14 Jun 2012 16:34:15 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
Message-ID: <4FDA0477.2010809@webscio.net>

Hi again,

I've a bit of code that does the following:

f = MyReconnectingClientFactory()
iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())

now I would expect that iConn.factory would be my f, but as it turns out 
it's an instance of some TLSMemoryBIOFactory.. Why is that so?

After some digging, I was able to find f under 
iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use 
that, but it just sounds a bit weird to me.. or is this normal?

Cheers



From exarkun at twistedmatrix.com  Thu Jun 14 18:40:36 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 15 Jun 2012 00:40:36 -0000
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <4FDA0477.2010809@webscio.net>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
Message-ID: <20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>

On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>Hi again,
>
>I've a bit of code that does the following:
>
>f = MyReconnectingClientFactory()
>iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>
>now I would expect that iConn.factory would be my f, but as it turns 
>out
>it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>
>After some digging, I was able to find f under
>iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>that, but it just sounds a bit weird to me.. or is this normal?

There is no "factory" attribute on the `IConnector` interface at all:

http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html

Neither is there a "transport" attribute, nor do any of the transport 
interfaces have a "protocol" attribute.

All this means that Twisted isn't promising you anything about the 
meaning or existence of any of these attributes.

So, why don't you just use `f` instead?

Jean-Paul



From martin at webscio.net  Fri Jun 15 02:50:17 2012
From: martin at webscio.net (Martin)
Date: Fri, 15 Jun 2012 09:50:17 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
Message-ID: <4FDAF749.2050307@webscio.net>

On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
> On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>> Hi again,
>>
>> I've a bit of code that does the following:
>>
>> f = MyReconnectingClientFactory()
>> iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>
>> now I would expect that iConn.factory would be my f, but as it turns
>> out
>> it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>
>> After some digging, I was able to find f under
>> iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>> that, but it just sounds a bit weird to me.. or is this normal?
> There is no "factory" attribute on the `IConnector` interface at all:
>
> http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>
> Neither is there a "transport" attribute, nor do any of the transport
> interfaces have a "protocol" attribute.
>
> All this means that Twisted isn't promising you anything about the
> meaning or existence of any of these attributes.
>
> So, why don't you just use `f` instead?
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
I can't use f because I'm saving the IConnector object for later, so 
that I can disconnect it when needed. I'm not sure if saving the f 
object would have any effect, since doing anything to that after the 
connection was created will surely have no effect, or?

In general, I can do iConn.disconnect(), but this being a 
ReconnectingClientFactory, it attempts to reconnect straight away.. 
That's why I was looking to get the factory object somehow, so that I 
could call stopTrying() on it first. If there's a better approach to 
this, please let me know :)

Thanks



From exarkun at twistedmatrix.com  Fri Jun 15 07:15:43 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 15 Jun 2012 13:15:43 -0000
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <4FDAF749.2050307@webscio.net>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
Message-ID: <20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>

On 08:50 am, martin at webscio.net wrote:
>On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
>>On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>>>Hi again,
>>>
>>>I've a bit of code that does the following:
>>>
>>>f = MyReconnectingClientFactory()
>>>iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>
>>>now I would expect that iConn.factory would be my f, but as it turns
>>>out
>>>it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>>
>>>After some digging, I was able to find f under
>>>iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>>>that, but it just sounds a bit weird to me.. or is this normal?
>>There is no "factory" attribute on the `IConnector` interface at all:
>>
>>http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>>
>>Neither is there a "transport" attribute, nor do any of the transport
>>interfaces have a "protocol" attribute.
>>
>>All this means that Twisted isn't promising you anything about the
>>meaning or existence of any of these attributes.
>>
>>So, why don't you just use `f` instead?
>>
>>Jean-Paul
>>
>>_______________________________________________
>>Twisted-Python mailing list
>>Twisted-Python at twistedmatrix.com
>>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>I can't use f because I'm saving the IConnector object for later, so
>that I can disconnect it when needed. I'm not sure if saving the f
>object would have any effect, since doing anything to that after the
>connection was created will surely have no effect, or?

This doesn't make sense.  `f` is not an object and neither is 
`connector.factory` nor 
`connector.transport.protocol.wrappedProtocol.factory`.  They're 
expressions that, at least in this case, and in the context you're using 
them, all evaluate to the same object: the MyReconnectingClientFactory 
instance created at the beginning of your example code.

It doesn't matter which of them you call stopTrying on, since there 
isn't actually any "them", there's just the single factory object.

Put another way, saving `f` will let you do exactly what you want, in 
part because it's no different from what the `IConnector` implementation 
happens to be doing.

Jean-Paul
>In general, I can do iConn.disconnect(), but this being a
>ReconnectingClientFactory, it attempts to reconnect straight away..
>That's why I was looking to get the factory object somehow, so that I
>could call stopTrying() on it first. If there's a better approach to
>this, please let me know :)
>
>Thanks
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From barry at python.org  Fri Jun 15 08:23:15 2012
From: barry at python.org (Barry Warsaw)
Date: Fri, 15 Jun 2012 10:23:15 -0400
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
References: <19421453.L4QdkbeXYx@i5>
Message-ID: <20120615102315.1bb292d5@resist.wooz.org>

On Jun 14, 2012, at 02:27 PM, Wolfgang Rohdewald wrote:

>it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.
>
>So programs using twisted (including my own) will not come preinstalled.
>
>how is progress going with twisted and Python3?

Just to be clear, the mandate for Python 3 is just for the standard desktop
image.  We won't ship Python 2 on that image, but this does not affect server
or any other flavor.  It doesn't change what /usr/bin/python points to or the
status of Python 2 in the archives.  It *does* mean that right after a fresh
install from the desktop image, you won't have /usr/bin/python, but you will
have /usr/bin/python3, and you'll likely get Python 2 pretty soon after you
install anything not on the image.

We're having some internal discussions about how Canonical and Ubuntu can help
with the porting effort, but as is usual these things take time.  I've been
hoping to get in touch with Vladimir on IRC to discuss things further, but
just haven't connected yet.

Cheers,
-Barry
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20120615/7ba9a12e/attachment.sig>

From stephen.c.waterbury at nasa.gov  Fri Jun 15 09:41:53 2012
From: stephen.c.waterbury at nasa.gov (Stephen Waterbury)
Date: Fri, 15 Jun 2012 11:41:53 -0400
Subject: [Twisted-Python] [OT] Re:  twisted/python3/ubuntu 12.10
In-Reply-To: <20120615102315.1bb292d5@resist.wooz.org>
References: <19421453.L4QdkbeXYx@i5> <20120615102315.1bb292d5@resist.wooz.org>
Message-ID: <4FDB57C1.6020203@nasa.gov>

Apologies for continuing a bit OT, but I suspect others on
twisted-python would be interested too ...

So when you "get Python 2" would that be /usr/bin/python2?
And if you wanted a /usr/bin/python, it would be up to you
to create a link to whichever of 2 or 3 you wanted it to be?

Steve

On 06/15/2012 10:23 AM, Barry Warsaw wrote:
> On Jun 14, 2012, at 02:27 PM, Wolfgang Rohdewald wrote:
>
>> it seems that Ubuntu 12.10 will only preinstall Python3, no Python2.7.
>>
>> So programs using twisted (including my own) will not come preinstalled.
>>
>> how is progress going with twisted and Python3?
>
> Just to be clear, the mandate for Python 3 is just for the standard desktop
> image.  We won't ship Python 2 on that image, but this does not affect server
> or any other flavor.  It doesn't change what /usr/bin/python points to or the
> status of Python 2 in the archives.  It *does* mean that right after a fresh
> install from the desktop image, you won't have /usr/bin/python, but you will
> have /usr/bin/python3, and you'll likely get Python 2 pretty soon after you
> install anything not on the image.
>
> We're having some internal discussions about how Canonical and Ubuntu can help
> with the porting effort, but as is usual these things take time.  I've been
> hoping to get in touch with Vladimir on IRC to discuss things further, but
> just haven't connected yet.
>
> Cheers,
> -Barry
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From martin at webscio.net  Fri Jun 15 10:46:27 2012
From: martin at webscio.net (Martin)
Date: Fri, 15 Jun 2012 17:46:27 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
	<20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
Message-ID: <4FDB66E3.8060704@webscio.net>

On 15/06/12 14:15, exarkun at twistedmatrix.com wrote:
> On 08:50 am, martin at webscio.net wrote:
>> On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
>>> On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>>>> Hi again,
>>>>
>>>> I've a bit of code that does the following:
>>>>
>>>> f = MyReconnectingClientFactory()
>>>> iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>>
>>>> now I would expect that iConn.factory would be my f, but as it turns
>>>> out
>>>> it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>>>
>>>> After some digging, I was able to find f under
>>>> iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>>>> that, but it just sounds a bit weird to me.. or is this normal?
>>> There is no "factory" attribute on the `IConnector` interface at all:
>>>
>>> http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>>>
>>> Neither is there a "transport" attribute, nor do any of the transport
>>> interfaces have a "protocol" attribute.
>>>
>>> All this means that Twisted isn't promising you anything about the
>>> meaning or existence of any of these attributes.
>>>
>>> So, why don't you just use `f` instead?
>>>
>>> Jean-Paul
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> I can't use f because I'm saving the IConnector object for later, so
>> that I can disconnect it when needed. I'm not sure if saving the f
>> object would have any effect, since doing anything to that after the
>> connection was created will surely have no effect, or?
> This doesn't make sense.  `f` is not an object and neither is
> `connector.factory` nor
> `connector.transport.protocol.wrappedProtocol.factory`.  They're
> expressions that, at least in this case, and in the context you're using
> them, all evaluate to the same object: the MyReconnectingClientFactory
> instance created at the beginning of your example code.
>
> It doesn't matter which of them you call stopTrying on, since there
> isn't actually any "them", there's just the single factory object.
>
> Put another way, saving `f` will let you do exactly what you want, in
> part because it's no different from what the `IConnector` implementation
> happens to be doing.
>
> Jean-Paul
>> In general, I can do iConn.disconnect(), but this being a
>> ReconnectingClientFactory, it attempts to reconnect straight away..
>> That's why I was looking to get the factory object somehow, so that I
>> could call stopTrying() on it first. If there's a better approach to
>> this, please let me know :)
>>
>> Thanks
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Hm OK. As I said I'm completely new to this. I just figured that since 
the f instance was created before the connection was made, it would not 
be really related to the connection.

What happens if I create two SSL connections with the same factory f? 
Would calling "stopTrying" on that f then affect both connections? Or 
just the last? I guess I can simply test this out myself, it's just 
slightly weird to me. :)



From _ at lvh.cc  Fri Jun 15 11:13:22 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 15 Jun 2012 12:13:22 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
Message-ID: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>

Hi,

I'm trying to get browsers to communicate with an AMP API. Right now I'm trying to do that using WebSockets with Corbin SImpson's txWS. Eventually I'll try to write a Twisted implementation of SockJS, which is basically portable websockets all the way down to IE6.

The issue is that while AMP is inherently a binary protocol, WebSockets transfer text (well, that's a lie: there's a binary version, but it's even less widely supported than WebSockets themselves -- and SockJS doesn't support it at all, although it's on the roadmap). So, I need an alternative, preferably 7-bit, serialization for AMP boxes.

My first attempt at that serialization is JSON -- widely supported in browsers, and should map pretty closely to what AMP can do:

  - AMPLIsts are objects
  - ListOfs are arrays
  - numeric types and strings are more or less natively supported (except JSON is always text, never bytes)
  - booleans are booleans

Right now I have something that almost works, but is really a crude, cheap, untested hack. I'm wondering if there's a better integration point.

"""
AMP over WebSockets support.
"""
import json
import txws

from twisted.internet import defer, protocol
from twisted.python import log


class Bridge(protocol.Protocol):
    """
    Two-way AMP over WebSockets bridge.
    """
    def __init__(self, amp):
        self._amp = amp
        amp.startReceivingBoxes(self)
        amp.boxSender = self


    def sendBox(self, box):
        """
        Sends a box over the WebSocket as JSON.
        """
        log.msg("Sending box: {}".format(box))
        self.transport.write(json.dumps(box))


    def jsonObjectReceived(self, obj):
        """
        Hands the JSON object (dict) over to ampBoxReceived.
        """
        log.msg("JSON object received: {}".format(obj))
        self._amp.boxReceiver.ampBoxReceived(obj)


    def dataReceived(self, data):
        """
        Calls jsonObjectReceived.

        This assumes that JSON objects will always arrive as 1 chunk.
        """
        self.jsonObjectReceived(json.loads(data))



class BridgeFactory(protocol.Factory):
    """
    A factory for AMP over WebSockets bridges.
    """
    def __init__(self, ampFactory):
        self._ampFactory = ampFactory


    def buildProtocol(self, addr):
        """
        Builds a bridge and associates it with an AMP protocol instance.
        """
        return Bridge(self._ampFactory.buildProtocol(addr))



def makeFactory(ampFactory):
    """
    Makes a WebSocket factory that bridges AMP messages.
    """
    return txws.WebSocketFactory(BridgeFactory(ampFactory))


An issue I'm running into is an AMP ListOf. With the above code, ListOf still gets translated to a string, and obviously I want it to be a list. When that ListOf has actual data in it, I get the binary representation.

The other issues that I predict will happen but haven't ran into yet (because I don't use that functionality) are:
    - booleans -- expects "True" or "False" but gets True or False (true and false in JSON) -- can be fixed both on the client and the server side, not sure where the optimal place would be
    - AMPList -- same reason as ListOf

ints, floats will magically work, but it's a bit ugly: the only reason it works is that the factory for them is int and float, and, well, int(5) == 5 == int("5"), so it doesn't actually matter if it's already an int or a str.

In my Command implementation, I'm returning {"k": anAxiomQuery} -- so it's iterable but not a list. I can write a custom JSON encoder that can take arbitrary iterables, of course.

cheers
lvh






From tobias.oberstein at tavendo.de  Fri Jun 15 12:58:07 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Fri, 15 Jun 2012 11:58:07 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
Message-ID: <634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>

> Eventually I'll
> try to write a Twisted implementation of SockJS, which is basically portable
> websockets all the way down to IE6.

FWIW:
You can have WebSocket for IE8/9 via Flash plus https://github.com/gimite/web-socket-js
and for IE6-9 with http://code.google.com/chrome/chromeframe/

With a Hybi-10+/RFC6455/Hixie-76 capable WebSocket server implementation,
plus above, you basically can support any relevant browser .. so is it really worth
implementing SockJS server-side, redoing all the semiworking hacks that try to
shoehorn bidirectional messaging into HTTP request/response?




From itamar at itamarst.org  Fri Jun 15 13:23:46 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Fri, 15 Jun 2012 15:23:46 -0400
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <4FDB66E3.8060704@webscio.net>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
	<20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
	<4FDB66E3.8060704@webscio.net>
Message-ID: <4FDB8BC2.4020708@itamarst.org>

On 06/15/2012 12:46 PM, Martin wrote:
> What happens if I create two SSL connections with the same factory f?
> Would calling "stopTrying" on that f then affect both connections? Or
> just the last? I guess I can simply test this out myself, it's just
> slightly weird to me. :)
It's better to have one factory per outgoing connection; with 
reconnection I suspect it'll actually break if you try to use one 
factory for two connections.




From glyph at twistedmatrix.com  Fri Jun 15 13:32:37 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 15 Jun 2012 12:32:37 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
Message-ID: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>


On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:

> Hi,
> 
> I'm trying to get browsers to communicate with an AMP API.

This is also what <https://launchpad.net/frack> is doing.  I hope that it becomes a common enough practice that there's a library for it :).

> The issue is that while AMP is inherently a binary protocol, WebSockets transfer text (well, that's a lie: there's a binary version, but it's even less widely supported than WebSockets themselves -- and SockJS doesn't support it at all, although it's on the roadmap). So, I need an alternative, preferably 7-bit, serialization for AMP boxes.

Did you immediately discard the obvious solution of "base64 everything"? :)

> An issue I'm running into is an AMP ListOf. With the above code, ListOf still gets translated to a string, and obviously I want it to be a list. When that ListOf has actual data in it, I get the binary representation.

I would recommend implementing an entirely alternate serialization code path; specifically, one which adapts the existing AMP Argument objects to some new interface ('.toJSON()'), with a default adapter that uses the existing toString()/fromString(), and then specific adapters for those interfaces which need modification, like ListOf and Boolean.

-glyph


From washort at twistedmatrix.com  Fri Jun 15 17:10:04 2012
From: washort at twistedmatrix.com (Allen Short)
Date: Fri, 15 Jun 2012 18:10:04 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
Message-ID: <CAEzUHiPeagQzaHdtvVFUK++-jCEpCNDiXJ9_4u5vp1BSdN93=g@mail.gmail.com>

On Fri, Jun 15, 2012 at 2:32 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
>
>> Hi,
>>
>> I'm trying to get browsers to communicate with an AMP API.
>
> This is also what <https://launchpad.net/frack> is doing. I hope that it becomes a common enough practice that there's a library for it :).

I should note that the code in Frack currently just uses amp commands
as a basis for JSON-RPC messages over HTTP. Obviously this loses a
major benefit of AMP, which is both ends being able to send messages;
also, there's no attempt to handle bytes. Adding some comet/websocket
flavor to this would be welcome, of course. ;-)



From _ at lvh.cc  Fri Jun 15 19:24:09 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 15 Jun 2012 20:24:09 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>

Unfortunately I have a lot of customers that are non technical, use IE6/7,
and can't or won't use chrome frame. I wish that wasn't the case, but... I
also have no data on the presence of old and busted flash plugins.

I might do this anyway beause:

- the relevant ticket hasn't landed yet
- even if you don't get 100% you get a lot more for very little effort

Do you happen to know what the figures are like for iOS? I know mobile
Safari only got web sockets in 4.something (1 or 2), I'm not sure what
version of the protocol it speaks either, and obviously flash isn't an
option...

Cheers
lvh

On Friday, June 15, 2012, Tobias Oberstein wrote:

> > Eventually I'll
> > try to write a Twisted implementation of SockJS, which is basically
> portable
> > websockets all the way down to IE6.
>
> FWIW:
> You can have WebSocket for IE8/9 via Flash plus
> https://github.com/gimite/web-socket-js
> and for IE6-9 with http://code.google.com/chrome/chromeframe/
>
> With a Hybi-10+/RFC6455/Hixie-76 capable WebSocket server implementation,
> plus above, you basically can support any relevant browser .. so is it
> really worth
> implementing SockJS server-side, redoing all the semiworking hacks that
> try to
> shoehorn bidirectional messaging into HTTP request/response?
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120615/cc2edbb9/attachment.html>

From therve at free.fr  Sat Jun 16 00:46:08 2012
From: therve at free.fr (=?ISO-8859-1?Q?Thomas_Herv=E9?=)
Date: Sat, 16 Jun 2012 08:46:08 +0200
Subject: [Twisted-Python] [OT] Re:  twisted/python3/ubuntu 12.10
In-Reply-To: <4FDB57C1.6020203@nasa.gov>
References: <19421453.L4QdkbeXYx@i5> <20120615102315.1bb292d5@resist.wooz.org>
	<4FDB57C1.6020203@nasa.gov>
Message-ID: <4FDC2BB0.8030103@free.fr>

Le 15/06/2012 17:41, Stephen Waterbury a crit :
> Apologies for continuing a bit OT, but I suspect others on
> twisted-python would be interested too ...
> 
> So when you "get Python 2" would that be /usr/bin/python2?
> And if you wanted a /usr/bin/python, it would be up to you
> to create a link to whichever of 2 or 3 you wanted it to be?

No, /usr/bin/python will stay Python 2, and Python 3 will continue to
reside at /usr/bin/python3. At least for the foreseeable future and if
you don't create the links yourself.

-- 
Thomas



From tobias.oberstein at tavendo.de  Sat Jun 16 01:20:20 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 16 Jun 2012 00:20:20 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
Message-ID: <634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>

> Do you happen to know what the figures are like for iOS? I know mobile Safari only got web sockets in 4.something (1 or 2), I'm not sure what version of the protocol it speaks either, and obviously flash isn't an option...

4.2.1 .. which includes very old devices like iPod Touch 2nd gen.

All those speak Hixie-76 .. I don't know yet about iOS6 (do you have a device? would set up a test ..)

FWIW, Windows Phone 8 will come with IE10, and hence first class RFC6455. I don't know if MS ports that down to WP <8.

You can find more details rgd. WebSocket browser support here http://autobahn.ws/browsers

Disclosure: I am affiliated with above (but the information given there applies in general) .. and said that, let me at least mention 2 other probably controversial points;)

Protocol. I understand you are into AMP. IMHO there will be at least 2 others in that fields of higher level messaging across WebSocket:

STOMP over WebSocket
http://www.jmesnil.net/stomp-websocket/doc/

WebSocket Application Messaging Protocol (WAMP)
http://wamp.ws/

Twisted WebSocket. There is also https://github.com/tavendo/AutobahnPython .. OSS project I run. This does Hixie-76 and WAMP.

Cheers,
Tobias



From _ at lvh.cc  Sat Jun 16 07:45:43 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Sat, 16 Jun 2012 08:45:43 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
Message-ID: <CAE_Hg6YzhQKEAGEaigFMGKLqLSuA3uaEL11Vq_nmkL9R5U07zw@mail.gmail.com>

On Friday, June 15, 2012, Glyph wrote:

>
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
>
> > Hi,
> >
> > I'm trying to get browsers to communicate with an AMP API.
>
> This is also what <https://launchpad.net/frack> is doing.  I hope that it
> becomes a common enough practice that there's a library for it :).


See Allen's comment. It'd certainly be great. Do you think that for old
browsers (that is ie6 & 7) it's acceptable to tell them to go install
chrome frame? ( for Franck and hence twisteds future bug tracker). If the
answer is yes, is that because it will take a while to switch, or would
that also be true today?

Bear in mind that my users are a lot less technical and many are stuck on
winxp because they're corporate machines...


> > The issue is that while AMP is inherently a binary protocol, WebSockets
> transfer text (well, that's a lie: there's a binary version, but it's even
> less widely supported than WebSockets themselves -- and SockJS doesn't
> support it at all, although it's on the roadmap). So, I need an
> alternative, preferably 7-bit, serialization for AMP boxes.
>
> Did you immediately discard the obvious solution of "base64 everything"? :)


Base64 does not fix the problem of encoding and decoding binary responses
on the client side, only on the transport. Binary support (Blob and
ArrayBuffer are those 2 essentially unsupported things. It may be feasible
to build a Unicode amp representation, however meaningless some code points
may then become (that's not a tab stop, it's a length specifier!!)


>
> > An issue I'm running into is an AMP ListOf. With the above code, ListOf
> still gets translated to a string, and obviously I want it to be a list.
> When that ListOf has actual data in it, I get the binary representation.
>
> I would recommend implementing an entirely alternate serialization code
> path; specifically, one which adapts the existing AMP Argument objects to
> some new interface ('.toJSON()'), with a default adapter that uses the
> existing toString()/fromString(), and then specific adapters for those
> interfaces which need modification, like ListOf and Boolean.


I'm not sure I understand at which point that takes effect since apparently
AMP.sendBox is too late?


>
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120616/26bc01bd/attachment.html>

From _ at lvh.cc  Sat Jun 16 07:51:02 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Sat, 16 Jun 2012 08:51:02 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
	<634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <CAE_Hg6a-v-1_xj==RVo_A62f75ctYGb83YiCoPBU9j3ysRcUOA@mail.gmail.com>

On Saturday, June 16, 2012, Tobias Oberstein wrote:

> > Do you happen to know what the figures are like for iOS? I know mobile
> Safari only got web sockets in 4.something (1 or 2), I'm not sure what
> version of the protocol it speaks either, and obviously flash isn't an
> option...
>
> 4.2.1 .. which includes very old devices like iPod Touch 2nd gen.


... But only when fully updated, right? (I realize the update penetration
on iOS is quite high)


>
> All those speak Hixie-76 .. I don't know yet about iOS6 (do you have a
> device? would set up a test ..)


Typing this on an ipad3, but so far it's the usual iOS 5.something


> FWIW, Windows Phone 8 will come with IE10, and hence first class RFC6455.
> I don't know if MS ports that down to WP <8.


So what's the story on wp7? Does that thing have flash?


>
> You can find more details rgd. WebSocket browser support here
> http://autobahn.ws/browsers
>
>
Thanks, I'll take a look :)


> Disclosure: I am affiliated with above (but the information given there
> applies in general) .. and said that, let me at least mention 2 other
> probably controversial points;)
>
> Protocol. I understand you are into AMP. IMHO there will be at least 2
> others in that fields of higher level messaging across WebSocket:
>
> STOMP over WebSocket
> http://www.jmesnil.net/stomp-<http://www.jmesnil.net/stomp-websocket/doc/>
> websocket/doc/ <http://www.jmesnil.net/stomp-websocket/doc/>


Used stomp a while ago when I was being subjected to message queues. I
guess it mig be interesting :)


> WebSocket Application Messaging Protocol (WAMP)
> http://wamp.ws/


I knew this was a raven do thing -- how's adoption going?

Also I'm surprised that jsonrpc didn't make this list! Seems like a perfect
candidate for browsers.


>
> Twisted WebSocket. There is also https://github.com/tavendo/AutobahnPython.. OSS project I run. This does Hixie-76 and WAMP.
>
> Cheers,
> Tobias
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120616/404f6bfb/attachment.html>

From tom.sheffler at gmail.com  Sat Jun 16 09:16:03 2012
From: tom.sheffler at gmail.com (Tom Sheffler)
Date: Sat, 16 Jun 2012 08:16:03 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
Message-ID: <CAMBtMctFgHQYxR6C6CemH6_Mtfb7Ju=4sfV1h5EyKjX0reyv1A@mail.gmail.com>

>
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
>
> > Hi,
> >
> > I'm trying to get browsers to communicate with an AMP API.
>
> This is also what <https://launchpad.net/frack> is doing.  I hope that it
> becomes a common enough practice that there's a library for it :).
>
> > The issue is that while AMP is inherently a binary protocol, WebSockets
> transfer text (well, that's a lie: there's a binary version, but it's even
> less widely supported than WebSockets themselves -- and SockJS doesn't
> support it at all, although it's on the roadmap). So, I need an
> alternative, preferably 7-bit, serialization for AMP boxes.
>
> Did you immediately discard the obvious solution of "base64 everything"? :)


I had success simply base64'ing binary data.  And I believe encoding that
is safe for binary data, but I may be wrong.

Use this:
            data = binascii.b2a_base64(bindata).strip()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120616/408d9a32/attachment.html>

From tobias.oberstein at tavendo.de  Sat Jun 16 12:20:10 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 16 Jun 2012 11:20:10 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6a-v-1_xj==RVo_A62f75ctYGb83YiCoPBU9j3ysRcUOA@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<634914A010D0B943A035D226786325D4337803B002@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6YNBaovcpgbEwaVXSrEBViCO6DGGrmwWmBFiH_jaFiXLA@mail.gmail.com>
	<634914A010D0B943A035D226786325D4337803B156@EXVMBX020-12.exch020.serverdata.net>
	<CAE_Hg6a-v-1_xj==RVo_A62f75ctYGb83YiCoPBU9j3ysRcUOA@mail.gmail.com>
Message-ID: <634914A010D0B943A035D226786325D4337803B16B@EXVMBX020-12.exch020.serverdata.net>

> Do you happen to know what the figures are like for iOS? I know mobile Safari only got web sockets in 4.something (1 or 2), I'm not sure what version of the protocol it speaks either, and obviously flash isn't an option...

4.2.1 .. which includes very old devices like iPod Touch 2nd gen.

... But only when fully updated, right? (I realize the update penetration on iOS is quite high)

=> right.

FWIW, Windows Phone 8 will come with IE10, and hence first class RFC6455. I don't know if MS ports that down to WP <8.

So what's the story on wp7? Does that thing have flash?

=> the story is: WP is irrelevant given it's market share;)
no, seriously, AFAIK WP7 does not have Flash and there is no WebSocket possible, since it doesn't allow to install i.e. Opera Mobile either.

WebSocket Application Messaging Protocol (WAMP)
http://wamp.ws/

I knew this was a raven do thing -- how's adoption going?

https://github.com/nicokaiser/wamp.io
https://github.com/cboden/Ratchet

others are starting

http://stackoverflow.com/questions/10882370/websocket-request-response-subprotocol
another one is working on WAMP over SockJS

we maintain a list on
http://wamp.ws/implementations


Also I'm surprised that jsonrpc didn't make this list! Seems like a perfect candidate for browsers.

jsonrpc:
* verbose (they have read too much xml)
* not fully Web .. methods aren't identified by URIs
* does not have PubSub, but only RPC




From justin.venus at gmail.com  Sat Jun 16 14:14:33 2012
From: justin.venus at gmail.com (Justin Venus)
Date: Sat, 16 Jun 2012 15:14:33 -0500
Subject: [Twisted-Python] Solaris 11 Build Slave
Message-ID: <CACL=7as2r6tn=6pdh3Y8gqMxd=P-1vEzbPUPpHKJ0XoQHqDTEQ@mail.gmail.com>

I am in the process of setting up a build Solaris 11 build slave for
twisted (currently at the bzr checkout phase).  I am interested in
having it join the other build slaves.  My long term goal for adding
this build slave is to help resolve a low priority ticket[1] that I am
interested in seeing completed.

Thank you,

-- 
Justin Venus
justin.venus at gmail.com

1) http://twistedmatrix.com/trac/ticket/5538



From glyph at twistedmatrix.com  Sat Jun 16 15:51:58 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 16 Jun 2012 14:51:58 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6YzhQKEAGEaigFMGKLqLSuA3uaEL11Vq_nmkL9R5U07zw@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
	<CAE_Hg6YzhQKEAGEaigFMGKLqLSuA3uaEL11Vq_nmkL9R5U07zw@mail.gmail.com>
Message-ID: <DBB3CE78-F06C-4C9B-A1F3-351BE3DDEB8F@twistedmatrix.com>


On Jun 16, 2012, at 6:45 AM, Laurens Van Houtven wrote:

> Do you think that for old browsers (that is ie6 & 7) it's acceptable to tell them to go install chrome frame? ( for Franck and hence twisteds future bug tracker). If the answer is yes, is that because it will take a while to switch, or would that also be true today?

I think it's acceptable for *Twisted*'s bug tracker to just tell them to install a different browser, because who cares? ;-)

See here: http://www.sitemeter.com/?a=stats&s=sm7twistedmatrix&r=13

Only 5% of our traffic comes from IE, only 1% comes from IE7 and we don't get any from IE6.

Obviously these metrics don't apply to a general solution, of course.

> I'm not sure I understand at which point that takes effect since apparently AMP.sendBox is too late?


I *think* the right place to hook in would be IResponderLocator.

If you write your own locateResponder, you can do your own serialization, except in your case a "string" (for the purposes of toString/fromString) is just a JSON data structure, and an "object" is the corresponding Python data structure which is almost always the same.  This is a slight abuse of the API, but it will allow for maximal re-use of all the dispatching logic.  You will probably need to touch a private attribute or two, most noticeably _commandDispatch; you need to stuff your own wrapper around commandClass (that proxies 'arguments' and 'response' attributes to wrap them in something that does the requisite adaptation to change the meaning of fromString/toString) in locateResponder, you don't want to override all the behavior.

Then you override sendBox to just do plain old JSON serialization and you're done.

Please feel free to file bugs on any private parts of the API that you need to touch in order to make an alternate serialization.  The inability to programmatically discover which methods are responders and what commands they are responders for using a public API strikes me as a glaring oversight.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120616/7b5efbea/attachment-0001.html>

From exarkun at twistedmatrix.com  Sat Jun 16 22:05:43 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 17 Jun 2012 04:05:43 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1339905943.3.2102677078@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120617/19cb7a25/attachment.html>

From glyph at twistedmatrix.com  Sun Jun 17 02:27:25 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 17 Jun 2012 01:27:25 -0700
Subject: [Twisted-Python] Solaris 11 Build Slave
In-Reply-To: <CACL=7as2r6tn=6pdh3Y8gqMxd=P-1vEzbPUPpHKJ0XoQHqDTEQ@mail.gmail.com>
References: <CACL=7as2r6tn=6pdh3Y8gqMxd=P-1vEzbPUPpHKJ0XoQHqDTEQ@mail.gmail.com>
Message-ID: <0C1A295D-EB66-4E3D-BF52-CAFD994F50A6@twistedmatrix.com>


On Jun 16, 2012, at 1:14 PM, Justin Venus wrote:

> I am in the process of setting up a build Solaris 11 build slave for
> twisted (currently at the bzr checkout phase).  I am interested in
> having it join the other build slaves.  My long term goal for adding
> this build slave is to help resolve a low priority ticket[1] that I am
> interested in seeing completed.

That sounds great.  Thanks for taking the initiative.  I look forward to that ticket being resolved.

Please note that the 'priority' field is, at best, just a statement of the likelihood that someone from the core team will work on a ticket, and at worst, just noise.  If you're working on it, it's whatever priority you think it is ;-).

As a first step, can you join this team (and its mailing list) on Launchpad?

	https://launchpad.net/~twisted-buildslaves

(Also, any other buildslave maintainers should add themselves there, in case Tom Prince didn't notice you.)

Someone should be getting in touch with you about buildslave credentials shortly, if they haven't already.

-glyph




From cds at corbinsimpson.com  Mon Jun 18 14:59:06 2012
From: cds at corbinsimpson.com (Corbin Simpson)
Date: Mon, 18 Jun 2012 13:59:06 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
Message-ID: <20120618205906.GA22365@ps35699.dreamhostps.com>

On Fri, Jun 15, 2012 at 12:32:37PM -0700, Glyph wrote:
> On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
> > The issue is that while AMP is inherently a binary protocol, WebSockets transfer text (well, that's a lie: there's a binary version, but it's even less widely supported than WebSockets themselves -- and SockJS doesn't support it at all, although it's on the roadmap). So, I need an alternative, preferably 7-bit, serialization for AMP boxes.
> Did you immediately discard the obvious solution of "base64 everything"? :)

I should point out that at least one WebSockets JavaScript thing, noVNC, uses
base64 as its solution to the problem, and that's what I originally wrote txWS
to deal with. This works quite fine for OSUOSL on all of the target browsers
we care about.

I don't know if this is the *right* solution, but it certainly is the least
painful.

~ C.



From _ at lvh.cc  Mon Jun 18 15:33:17 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Mon, 18 Jun 2012 16:33:17 -0500
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <20120618205906.GA22365@ps35699.dreamhostps.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
	<20120618205906.GA22365@ps35699.dreamhostps.com>
Message-ID: <CAE_Hg6aQ35VaXUshgBEQij7U6eb0MuBo5ePvnzjva--Xjj4HQA@mail.gmail.com>

How do you process that data on the client side given the poor support of
ArrayBuffer and Blob?

On Monday, June 18, 2012, Corbin Simpson wrote:

> On Fri, Jun 15, 2012 at 12:32:37PM -0700, Glyph wrote:
> > On Jun 15, 2012, at 10:13 AM, Laurens Van Houtven wrote:
> > > The issue is that while AMP is inherently a binary protocol,
> WebSockets transfer text (well, that's a lie: there's a binary version, but
> it's even less widely supported than WebSockets themselves -- and SockJS
> doesn't support it at all, although it's on the roadmap). So, I need an
> alternative, preferably 7-bit, serialization for AMP boxes.
> > Did you immediately discard the obvious solution of "base64 everything"?
> :)
>
> I should point out that at least one WebSockets JavaScript thing, noVNC,
> uses
> base64 as its solution to the problem, and that's what I originally wrote
> txWS
> to deal with. This works quite fine for OSUOSL on all of the target
> browsers
> we care about.
>
> I don't know if this is the *right* solution, but it certainly is the least
> painful.
>
> ~ C.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <javascript:;>
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120618/ae9bf327/attachment.html>

From cds at corbinsimpson.com  Mon Jun 18 19:54:44 2012
From: cds at corbinsimpson.com (Corbin Simpson)
Date: Mon, 18 Jun 2012 18:54:44 -0700
Subject: [Twisted-Python] AMP WebSockets bridging
In-Reply-To: <CAE_Hg6aQ35VaXUshgBEQij7U6eb0MuBo5ePvnzjva--Xjj4HQA@mail.gmail.com>
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
	<4D77F40C-C5B8-4979-9E16-9A6EAB366CA1@twistedmatrix.com>
	<20120618205906.GA22365@ps35699.dreamhostps.com>
	<CAE_Hg6aQ35VaXUshgBEQij7U6eb0MuBo5ePvnzjva--Xjj4HQA@mail.gmail.com>
Message-ID: <20120619015444.GA16325@ps35699.dreamhostps.com>

On Mon, Jun 18, 2012 at 04:33:17PM -0500, Laurens Van Houtven wrote:
> How do you process that data on the client side given the poor support of
> ArrayBuffer and Blob?

Good question! I haven't really read through that part of noVNC. I try to stay
blissfully ignorant of the details. You could read through kanaka/noVNC for
hints.

~ C.



From warner at lothar.com  Tue Jun 19 01:27:34 2012
From: warner at lothar.com (Brian Warner)
Date: Tue, 19 Jun 2012 00:27:34 -0700
Subject: [Twisted-Python] ANN: Foolscap-0.6.4 released
Message-ID: <4FE029E6.7070906@lothar.com>


Just a brief note, I released Foolscap-0.6.4 tonight. This contains a
handful of small bugfixes and cleanups, gathered over the last 5 months.

The most significant change was that the "git-foolscap" tools were
cleaned up. These live in doc/examples/ , and let you configure remote
access to your Git repositories that uses a FURL instead of e.g. a
locked-down ssh shell.

Tarballs are available from the usual places:

 PyPI:   http://pypi.python.org/pypi/foolscap/0.6.4
 github: https://github.com/warner/foolscap/
 trac:   http://foolscap.lothar.com/trac/

Tarballs are signed with the Foolscap Release Signing Key (0xAF1B4A2A),
fingerprint = 7341 45FE BE70 E5D0 59C7 EDCD 3E86 92AF AF1B 4A2A.

Full release notes attached below.

have a groovy day,
 -Brian



* Release 0.6.4 (18-Jun-2012)

** Minor Changes

The unreliable 'extras_require' property in setup.py, which allowed
other python programs to declare a dependency on foolscap's
"secure_connections" feature, was removed. See README.packagers for
alternate instructions. (#174)

'flogtool' log-dumping commands (dump, tail, web-viewer) now accept a
consistent --timestamps= argument to control how event times are
displayed (UTC, local, seconds-since-epoch, etc). (#192, #193)

Certain invalid "location" strings (accepted by Tub.setLocation and put
into FURLs) are rejected earlier, and with better error messages. The
error message produced when 'flogtool dump' is given a FURL-file
(instead of an event log file) has been improved.

The Incident Gatherer will tolerate incident-file errors better,
fetching remaining incidents instead of halting. (#190)

The git-over-foolscap tools were cleaned up, and the documentation was
brought into line with the implementation. (#197)

Other minor bugs were fixed: #179, #191, #194, #195, #196



From vlada.peric at gmail.com  Tue Jun 19 08:43:25 2012
From: vlada.peric at gmail.com (=?UTF-8?Q?Vladimir_Peri=C4=87?=)
Date: Tue, 19 Jun 2012 16:43:25 +0200
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
	relaxation of coverage requirements
Message-ID: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>

Hello everyone,

as some of you may be aware, I was accepted as a Google Summer of Code
student, with the project of porting Twisted to Python 3 (or getting
as close as possible)[1]. Now, there are basically two strategies:
maintaining py2 code and using 2to3 when installing under py3, or
maintaining a codebase which is compatible with both 2 and 3 (a third
strategy is to have two codebases, but I feel this would introduce a
too high maintenance burden).[2] What both these approaches have in
common, is that it is advantageous (and mandatory if not using 2to3)
to update the syntax to more modern idioms (eg. exception syntax, uses
of apply and has_key, the print statement...). And therein lies my
problem: Twisted policy is that all code should be tested, and tests
should be added to modified, untested code... and I have to make a lot
of trivial syntax changes to a lot of code, some of which is untested.
Now, I agree that tests are very important, and in general I'm for the
100% coverage policy Twisted is trying to approach, but I feel that
this is beyond the scope of my project and, more importantly, would
slow my progress considerably.

As such, I would like to request permission for the coverage
requirements to be relaxed for specific Python 3 changes. As mentioned
above, this would allow me to progress much faster and concentrate on
the bigger incompatibilities. Of course, I would still write tests for
more complex code, if and where required. Furthermore, I propose to
use the 2to3 tool to make these conversions, which relies on analysis
of the underlying code - as such, it is much better than any
grep-related solution and much less prone to errors. It is also very
widely used, so I consider it a very robust solution. Still, I realize
this would be quite a big breach of policy, so I would like to make a
case for each change individually. This list is not exhaustive, merely
what I have encountered so far.

1) print statement

Probably the most noticeable difference, the print statement is a
function in Python 3. Now, if we opt for a single, compatible
codebase, all print statements should be converted to functions.
Luckily, 2.6 can import it from __future__ so this is not a problem.
There's more than 1000 print statements in Twisted code and even just
checking if each is covered would be a daunting job. Even if no other
exception is permitted, I think this one makes a lot of sense as it's
very hard to do anything wrong here.

2) has_key method

The issue that started this (see ticket 4053); the has_key method on
dicts has been changed to the builtin keyword "in" ("key in dict"
instead of dict.has_key(key)). Now, exarkun disliked my automatic
change, so I split the work into tested and untested uses (the tested
are fixed) but there's still about a hundred remaining. Now, a concern
here is that some Twisted classes could also be defining has_key
methods, but all three such classes also provide an equivalent
__contains__ method so this cannot be a problem (plus, I believe the
has_key methods should be deprecated but that's a separate issue). In
the end, this is a purely syntatic change and I do not feel like
writing tests everywhere around Twisted.

3) apply

To quote Lennart Regebro, "The Python 2 builtin apply() has been
removed in Python 3. Its used to call a function, but since you can
call the function directly it serves no purpose and has been
deprecated since Python 2.3." I've replaced those covered by tests,
but there's still some 23 untested uses left, most of them in
spread/ui/tkutil, and I would *really* prefer not to write tests for
that.

4) Exceptions

The exceptions syntax has changed to be less ambiguous, and the new
"except Exception as e" syntax is available in 2.6 and up. This is a
trivial syntax change (change a comma to "as") and can be performed
automatically on the approx. 230-240 uses. I'm not sure how many of
these are already tested, though. Some other things also changed about
Exceptions, but these I will address separately.


That's as far as I got so far. As I said above, most of these are
simple syntax changes which are hard to get wrong. If we opt for the
2to3 route, all of those would be converted automatically but it is
still preferable to get the code in a more "modern" state. Of course,
if not using 2to3, all of the above changes will have to be made.
Waiving the tests requirement would allow me to progress much faster,
and, at the end of the day, my task is to add Python 3 support, not
improve test coverage to 100%.

Thank you all in advance for any input (or help!).




[1] If you are interested, the best way of following my progress is
probably to subscribe to my blog (which is also syndicated on Planted
Twisted):
vperic.blogspot.com

[2] The merits of each approach can be discussed elsewhere, this is
not the goal of this e-mail. As of right now, there is sufficient work
remaining that will be equally beneficial no matter which one is
chosen, and this is the stuff I'm focusing on now.

-- 
Vladimir Peri



From itamar at itamarst.org  Tue Jun 19 08:58:48 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 10:58:48 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
Message-ID: <4FE093A8.3000205@itamarst.org>

On 06/19/2012 10:43 AM, Vladimir Peri wrote:
> 3) apply
>
> To quote Lennart Regebro, "The Python 2 builtin apply() has been
> removed in Python 3. Its used to call a function, but since you can
> call the function directly it serves no purpose and has been
> deprecated since Python 2.3." I've replaced those covered by tests,
> but there's still some 23 untested uses left, most of them in
> spread/ui/tkutil, and I would *really* prefer not to write tests for
> that.
One particular alternative here is to provide a compatible local 
implementation of apply() that is imported if you're in Python 3. And 
then you just need to test that the new apply is the same as the 
built-in apply.

Also, tkutil can be deprecated in my opinion, and there's no need to 
port deprecated code.



From glyph at twistedmatrix.com  Tue Jun 19 09:55:51 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 19 Jun 2012 08:55:51 -0700
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
	relaxation of coverage requirements
In-Reply-To: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
Message-ID: <C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>


On Jun 19, 2012, at 7:43 AM, Vladimir Peri wrote:

> there are basically two strategies:
> maintaining py2 code and using 2to3 when installing under py3, or
> maintaining a codebase which is compatible with both 2 and 3

Based on the experiences of other porters I have talked to, and heard speaking on mailing lists, 2to3 still has yet to live up to its promise, and a unified codebase is much more manageable.  That said, there are syntax changes ('except...as...' being the big one) that make supporting 2.5->3 difficult, and only becomes reasonable at 2.6->3.  So it may be necessary to get 2to3 involved for some fixers.

> As such, I would like to request permission for the coverage
> requirements to be relaxed for specific Python 3 changes. As mentioned
> above, this would allow me to progress much faster and concentrate on
> the bigger incompatibilities. Of course, I would still write tests for
> more complex code, if and where required. 

History teaches us that "simple" or "trivial" changes which allegedly don't require tests because they are "so obvious" are pretty much always going to introduce critical bugs.  I like the idea of finding ways to avoid testing defunct code like what Itamar proposes, but a blanket exception to the testing policy is not acceptable to me.

That said, you don't have to write particularly awesome or thorough tests.  Any line of code can be reached by satisfying its dependencies and calling the function it's in.  So, if you need to, write trivial fakes or build on Twisted's existing library of test doubles (e.g. proto_helpers).

For example, let's say you're changing a method on a class whose initializer takes 30 arguments and all of them involve library objects from some heinously complex 3rd-party library with thousands of functions in it.  You don't need to actually make a "real" instance of the class, if it's just that one method which needs modification.  Write a test subclass which only works for that method, or even just suck out the im_func attribute and pass it a different 'self'.  (Oops!  Python 3 changes everything so you have to write a utility which converts a method-or-function into a function in a version-dependent way first.  But you get the idea.)

I guess this does represent some relaxation of the testing policy, since for a real functional change I probably wouldn't accept a test quite as gross as what I just described... but in this case, we're just trying to make sure the code still runs in both cases.

If this seems like more work than you signed up for... well, congratulations, this internship is providing you with a realistic view of professional software development ;-).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120619/5f5cebc7/attachment.html>

From solipsis at pitrou.net  Tue Jun 19 11:15:44 2012
From: solipsis at pitrou.net (Antoine Pitrou)
Date: Tue, 19 Jun 2012 19:15:44 +0200
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
Message-ID: <20120619191544.05f7f5fe@pitrou.net>

On Tue, 19 Jun 2012 08:55:51 -0700
Glyph <glyph at twistedmatrix.com> wrote:
> 
> On Jun 19, 2012, at 7:43 AM, Vladimir Peri wrote:
> 
> > there are basically two strategies:
> > maintaining py2 code and using 2to3 when installing under py3, or
> > maintaining a codebase which is compatible with both 2 and 3
> 
> Based on the experiences of other porters I have talked to, and heard speaking on mailing lists, 2to3 still has yet to live up to its promise, and a unified codebase is much more manageable.  That said, there are syntax changes ('except...as...' being the big one) that make supporting 2.5->3 difficult, and only becomes reasonable at 2.6->3.

A shared codebase definitely isn't reasonable if you want to support
Python 2.5. At least not for a project the size of Twisted.

(why doesn't your mail / news client word wrap paragraps?)

Regards

Antoine.





From lists at collab.nl  Tue Jun 19 11:29:53 2012
From: lists at collab.nl (Thijs Triemstra)
Date: Tue, 19 Jun 2012 19:29:53 +0200
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <20120619191544.05f7f5fe@pitrou.net>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<20120619191544.05f7f5fe@pitrou.net>
Message-ID: <4FE0B711.4040403@collab.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 06/19/2012 07:15 PM, Antoine Pitrou wrote:
> On Tue, 19 Jun 2012 08:55:51 -0700 Glyph <glyph at twistedmatrix.com>
> wrote:
>> 
>> On Jun 19, 2012, at 7:43 AM, Vladimir Peri wrote:
>> 
>>> there are basically two strategies: maintaining py2 code and
>>> using 2to3 when installing under py3, or maintaining a codebase
>>> which is compatible with both 2 and 3
>> 
>> Based on the experiences of other porters I have talked to, and
>> heard speaking on mailing lists, 2to3 still has yet to live up to
>> its promise, and a unified codebase is much more manageable.
>> That said, there are syntax changes ('except...as...' being the
>> big one) that make supporting 2.5->3 difficult, and only becomes
>> reasonable at 2.6->3.
> 
> A shared codebase definitely isn't reasonable if you want to
> support Python 2.5. At least not for a project the size of
> Twisted.

Support for 2.5 is dropped in the next release [1].

Cheers,

Thijs

[1] http://twistedmatrix.com/trac/ticket/5553
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)

iEYEARECAAYFAk/gtwwACgkQBRbMGagbo3miRACfQLrEU+oWZHmbg5e0hc7yXSeV
G2kAnjuRStNGzeR4KbnaXacKNt/029tt
=rJGt
-----END PGP SIGNATURE-----



From itamar at itamarst.org  Tue Jun 19 11:50:06 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 13:50:06 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
Message-ID: <2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>

>  That said, there are
> syntax changes ('except...as...' being the big one) that make supporting
> 2.5->3 difficult, and only becomes reasonable at 2.6->3.  So it may be
> necessary to get 2to3 involved for some fixers.

We've dropped support for 2.6 post-12.1. So that's not a problem. We can
do these changes now in trunk.





From glyph at twistedmatrix.com  Tue Jun 19 12:03:00 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 19 Jun 2012 11:03:00 -0700
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
	relaxation of coverage requirements
In-Reply-To: <2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
Message-ID: <33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>

Le Jun 19, 2012  10:50 AM, Itamar Turner-Trauring <itamar at itamarst.org> a crit :

> We've dropped support for 2.6 post-12.1. So that's not a problem. We can
> do these changes now in trunk.

I really hope you mean 2.5.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120619/a7cb5830/attachment-0001.html>

From itamar at itamarst.org  Tue Jun 19 12:28:00 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 14:28:00 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
	<33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
Message-ID: <710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>

> Le Jun 19, 2012  10:50 AM, Itamar Turner-Trauring <itamar at itamarst.org> a
> crit :
>
>> We've dropped support for 2.6 post-12.1. So that's not a problem. We can
>> do these changes now in trunk.
>
> I really hope you mean 2.5.

Sigh. Yes. Next release will be 2.6 and later.




From dynamicgl at gmail.com  Tue Jun 19 13:01:40 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Wed, 20 Jun 2012 03:01:40 +0800
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
	<33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
	<710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>
Message-ID: <CABkOF6RDYbeRnXY01fOVtoYgtirP2eK8LqaFMMVaTGtOo4dJNQ@mail.gmail.com>

On Wed, Jun 20, 2012 at 2:28 AM, Itamar Turner-Trauring <itamar at itamarst.org
> wrote:

> > Le Jun 19, 2012  10:50 AM, Itamar Turner-Trauring <itamar at itamarst.org>
> a
> > crit :
> >
> >> We've dropped support for 2.6 post-12.1. So that's not a problem. We can
> >> do these changes now in trunk.
> >
> > I really hope you mean 2.5.
>
> Sigh. Yes. Next release will be 2.6 and later.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


Sigh too,  I am still using 2.6.6 & twisted 11.0; however I think it is not
so difficult to migrate to 2.7.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120620/47296fd4/attachment.html>

From itamar at itamarst.org  Tue Jun 19 13:39:00 2012
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Tue, 19 Jun 2012 15:39:00 -0400
Subject: [Twisted-Python] Python 3 support in Twisted: Request for
 relaxation of coverage requirements
In-Reply-To: <CABkOF6RDYbeRnXY01fOVtoYgtirP2eK8LqaFMMVaTGtOo4dJNQ@mail.gmail.com>
References: <CAFu6gYZ=rTL1HSfBzg-hHzUXGQbJPGUPphi3dptMXeJ_vpgaaA@mail.gmail.com>
	<C1ACB2F3-D5DD-4AE3-9322-EE5F05AB9542@twistedmatrix.com>
	<2f94079e1d1428a20ef6f58c68ac956c.squirrel@webmail.zoteca.com>
	<33AB98E4-9CB2-4709-87D3-E74DAEAB36B1@twistedmatrix.com>
	<710af1251925fe47acbc99e55e02af73.squirrel@webmail.zoteca.com>
	<CABkOF6RDYbeRnXY01fOVtoYgtirP2eK8LqaFMMVaTGtOo4dJNQ@mail.gmail.com>
Message-ID: <4FE0D554.2040000@itamarst.org>

On 06/19/2012 03:01 PM, gelin yan wrote:
>
> Sigh too,  I am still using 2.6.6 & twisted 11.0; however I think it 
> is not so difficult to migrate to 2.7.
>
Just to be clear, Python 2.6 is still supported as of 12.1 and will 
continue to be supported (at the minimum for the next release and 
probably after that as well).



From flaviogrossi at ymail.com  Wed Jun 20 03:02:24 2012
From: flaviogrossi at ymail.com (flavio)
Date: Wed, 20 Jun 2012 09:02:24 +0000 (UTC)
Subject: [Twisted-Python] AMP WebSockets bridging
References: <444A546E-683F-4699-AD60-C5CDCD4E97C1@lvh.cc>
Message-ID: <loom.20120620T105614-536@post.gmane.org>

Laurens Van Houtven <_ <at> lvh.cc> writes:

> Eventually I'll try to write a Twisted implementation of SockJS, which is
> basically portable websockets all the way down to IE6.

hi, i recently started working with sockjs and you may want to check out my work-
in-progress server implementation at https://github.com/flaviogrossi/sockjs-
cyclone (comments are very welcome)

please note that, although based on twisted, it sits on top of the cyclone web 
framework and uses its websocket implementation.

with regards of the messaging protocol, right now i'm using wamp which seems to 
fit my needs.


bye,
flavio





From peter.westlake at pobox.com  Thu Jun 21 07:52:11 2012
From: peter.westlake at pobox.com (Peter Westlake)
Date: Thu, 21 Jun 2012 14:52:11 +0100
Subject: [Twisted-Python] Speed of rendering?
Message-ID: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>

How fast is rendering in nevow? I have a page which is mostly a large
table with a couple of hundred rows, each containing a form. The
generated HTML is about 500 KB. Leaving aside the question of whether
this is a good design or not, how long would you expect it to take? I'm
interested specifically in what happens between the end of beforeRender
and the request being completed. It takes about a minute and a quarter.
Is that normal, or is there a delay in my code that I haven't found yet?

Thanks,

Peter.



From glyph at twistedmatrix.com  Thu Jun 21 11:16:19 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 21 Jun 2012 10:16:19 -0700
Subject: [Twisted-Python] Speed of rendering?
In-Reply-To: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
References: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
Message-ID: <278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>


Le Jun 21, 2012  6:52 AM, Peter Westlake <peter.westlake at pobox.com> a crit :

> How fast is rendering in nevow? I have a page which is mostly a large
> table with a couple of hundred rows, each containing a form. The
> generated HTML is about 500 KB. Leaving aside the question of whether
> this is a good design or not, how long would you expect it to take? I'm
> interested specifically in what happens between the end of beforeRender
> and the request being completed. It takes about a minute and a quarter.
> Is that normal, or is there a delay in my code that I haven't found yet?
> 
> Thanks,
> 
> Peter.

What does your profiler tell you?

-glyph


From peter.westlake at pobox.com  Fri Jun 22 15:52:09 2012
From: peter.westlake at pobox.com (Peter Westlake)
Date: Fri, 22 Jun 2012 22:52:09 +0100
Subject: [Twisted-Python] Speed of rendering?
In-Reply-To: <278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>
References: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
	<278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>
Message-ID: <1340401929.23556.140661092828441.30BFC47D@webmail.messagingengine.com>

On Thu, Jun 21, 2012, at 10:16, Glyph wrote:
> 
> Le Jun 21, 2012  6:52 AM, Peter Westlake <peter.westlake at pobox.com> a
> crit :
> 
> > How fast is rendering in nevow? I have a page which is mostly a large
> > table with a couple of hundred rows, each containing a form. The
> > generated HTML is about 500 KB. Leaving aside the question of whether
> > this is a good design or not, how long would you expect it to take? I'm
> > interested specifically in what happens between the end of beforeRender
> > and the request being completed. It takes about a minute and a quarter.
> > Is that normal, or is there a delay in my code that I haven't found yet?
> > 
> > Thanks,
> > 
> > Peter.
> 
> What does your profiler tell you?

There's a profiler? There's a profiler! There it is,
right up there at the top of the man page! Thank you!

Peter.

P.S. sorry, this was really meant to go to the twisted-web list.
I suspect a last-minute substitution by my email client.



From glyph at twistedmatrix.com  Fri Jun 22 16:27:05 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 22 Jun 2012 15:27:05 -0700
Subject: [Twisted-Python] Speed of rendering?
In-Reply-To: <1340401929.23556.140661092828441.30BFC47D@webmail.messagingengine.com>
References: <1340286731.21022.140661092192609.7FC851D7@webmail.messagingengine.com>
	<278A6852-053C-4125-882E-26D478255497@twistedmatrix.com>
	<1340401929.23556.140661092828441.30BFC47D@webmail.messagingengine.com>
Message-ID: <163A532D-64BC-43E7-95C6-77F7294E5EC8@twistedmatrix.com>


On Jun 22, 2012, at 2:52 PM, Peter Westlake <peter.westlake at pobox.com> wrote:

> On Thu, Jun 21, 2012, at 10:16, Glyph wrote:
>> 
>> Le Jun 21, 2012  6:52 AM, Peter Westlake <peter.westlake at pobox.com> a
>> crit :
>> 
>>> How fast is rendering in nevow? I have a page which is mostly a large
>>> table with a couple of hundred rows, each containing a form. The
>>> generated HTML is about 500 KB. Leaving aside the question of whether
>>> this is a good design or not, how long would you expect it to take? I'm
>>> interested specifically in what happens between the end of beforeRender
>>> and the request being completed. It takes about a minute and a quarter.
>>> Is that normal, or is there a delay in my code that I haven't found yet?
>>> 
>>> Thanks,
>>> 
>>> Peter.
>> 
>> What does your profiler tell you?
> 
> There's a profiler? There's a profiler! There it is,
> right up there at the top of the man page! Thank you!

Not only is there a profiler, there's benchmarks!

	<http://speed.twistedmatrix.com/timeline/>

Maybe you could add one for twisted.web.template rendering speed?

> Peter.
> 
> P.S. sorry, this was really meant to go to the twisted-web list.
> I suspect a last-minute substitution by my email client.


Thanks for the thought, at least.  Cross-posted.

-glyph




From tom.prince at ualberta.net  Fri Jun 22 16:57:16 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Fri, 22 Jun 2012 16:57:16 -0600
Subject: [Twisted-Python] Buildbot downtime
Message-ID: <87d34rt0oj.fsf@hermes.hocat.ca>


I am plannig to upgrade twisted's buildbot in the near future. In
preperation for that, I am going to take down the production buildbot
on Tuesday, June 26, around 1600 UTC[1].

During that time, the result of any builds done will be lost. Thus, I'd
ask that people avoid committing to trunk during that time.

I will send a reminder before I take down the buildbot both here, and on
#twisted and #twisted-dev.

  Tom

[1] http://timeanddate.com/worldclock/meetingtime.html?iso=20120626&p1=80&p2=224&p3=43



From glyph at twistedmatrix.com  Fri Jun 22 17:09:25 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 22 Jun 2012 16:09:25 -0700
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87d34rt0oj.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca>
Message-ID: <BFFE0A67-4C7C-40B9-8A38-670AA37AF0EE@twistedmatrix.com>


On Jun 22, 2012, at 3:57 PM, Tom Prince <tom.prince at ualberta.net> wrote:

> 
> I am plannig to upgrade twisted's buildbot in the near future. In
> preperation for that, I am going to take down the production buildbot
> on Tuesday, June 26, around 1600 UTC[1].
> 
> During that time, the result of any builds done will be lost. Thus, I'd
> ask that people avoid committing to trunk during that time.
> 
> I will send a reminder before I take down the buildbot both here, and on
> #twisted and #twisted-dev.
> 
>  Tom
> 
> [1] http://timeanddate.com/worldclock/meetingtime.html?iso=20120626&p1=80&p2=224&p3=43

Thanks for doing this much-needed maintenance, Tom.  I'm sure everyone else developing Twisted appreciates the effort as much as I do, too :).

-glyph





From tobias.oberstein at tavendo.de  Sat Jun 23 07:02:45 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 23 Jun 2012 06:02:45 -0700
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
Message-ID: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>

Hi all,

I'd like to ask if it would be appropriate and whether there is interest in making

"support Twisted on PyPy"

a project milestone for Twisted.

I'd start contributing by setting up a buildslave for PyPy so that issues can be made transparent and identified and progress tracked.

Since PyPy is still very fast moving, that would need to be a beefy machine, since I would track PyPy trunk doing nightly PyPy builds and then use that for Twisted trials.
It likely would involve stopping buildbot for the short period of PyPy installation, restarting it afterwards.

Is there community interest in Twisted/PyPy .. people that might help with working on tickets (which I guess will likely result from such an effort)?

My hope would also be that PyPy devs might be interested in having the PyPy codebase tested against such a broad suite like Twisted on a regular basis and would help with PyPy non-Twisted-but-triggered issues ..
 
Cheers,
Tobias


PS: The current trial results (Ubuntu 10.04 LTS i386, Twisted trunk, select reactor)

twisted.conch.test.test_manhole

 => ManholeLoopbackStdio: timeouts on all 13 test cases
 
twisted.conch.test.test_recvline

 => HistoricRecvlineLoopbackStdio: timeouts on all 2 test cases
 
 => RecvlineLoopbackStdio: timeouts on all 9 test cases
 
 
twisted.internet.test.test_endpoints

 => ServerStringTests => test_ssl: hangs forever!




From exarkun at twistedmatrix.com  Sat Jun 23 22:05:51 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 24 Jun 2012 04:05:51 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1340510751.45.670251740@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120624/d4663d0f/attachment-0001.html>

From tom.prince at ualberta.net  Sun Jun 24 10:12:37 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Sun, 24 Jun 2012 10:12:37 -0600
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
In-Reply-To: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <87vcigsn7u.fsf@hermes.hocat.ca>

Tobias Oberstein <tobias.oberstein at tavendo.de> writes:

> Hi all,
>
> I'd like to ask if it would be appropriate and whether there is interest in making
>
> "support Twisted on PyPy"
>
> a project milestone for Twisted.

To a large extent, it is already supported (although not everything
works yet. It has been deployed in production though (twistedmatrix.com
is largely hosted on pypy+twisted).

> I'd start contributing by setting up a buildslave for PyPy so that issues can be made transparent and identified and progress tracked.
>
> Since PyPy is still very fast moving, that would need to be a beefy machine, since I would track PyPy trunk doing nightly PyPy builds and then use that for Twisted trials.
> It likely would involve stopping buildbot for the short period of PyPy installation, restarting it afterwards.

That would be useful. We currently do have a buildslave running tests
against pypy, but we are looking at decomissioning it.

The buildbot takes care of installing new versions of pypy (on a weekly
basis).

I'll need the follwing information from you (offlist):

  1. Desired slave name.

     This will show up on http://buildbot.twistedmatrix.com/buildslaves

  2. Password

     This is sent cleartext.

  3. Email address

     This is used to send mail messages when the slave disappears. It
     isn't visible.

  5. How many parallel builds you want allowed to run.


> PS: The current trial results (Ubuntu 10.04 LTS i386, Twisted trunk, select reactor)
> ...

You should open tickets for these issues.



From exarkun at twistedmatrix.com  Sun Jun 24 10:41:49 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 24 Jun 2012 16:41:49 -0000
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
In-Reply-To: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
References: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
Message-ID: <20120624164149.3516.839722173.divmod.xquotient.3@localhost6.localdomain6>

On 23 Jun, 01:02 pm, tobias.oberstein at tavendo.de wrote:
>Hi all,
>
>I'd like to ask if it would be appropriate and whether there is 
>interest in making
>
>"support Twisted on PyPy"
>
>a project milestone for Twisted.
>
>I'd start contributing by setting up a buildslave for PyPy so that 
>issues can be made transparent and identified and progress tracked.

Of course, feel free to contribute more reliable slaves to the project. 
But there is already a PyPy builder set up, and has been for several 
years.  A more productive contribution would probably be to fix the 
tests that have been failing on it for most or all of that time. :)
>Since PyPy is still very fast moving, that would need to be a beefy 
>machine, since I would track PyPy trunk doing nightly PyPy builds and 
>then use that for Twisted trials.
>It likely would involve stopping buildbot for the short period of PyPy 
>installation, restarting it afterwards.

Fortunately this isn't required.

Jean-Paul
>Is there community interest in Twisted/PyPy .. people that might help 
>with working on tickets (which I guess will likely result from such an 
>effort)?
>
>My hope would also be that PyPy devs might be interested in having the 
>PyPy codebase tested against such a broad suite like Twisted on a 
>regular basis and would help with PyPy non-Twisted-but-triggered issues 
>..
>
>Cheers,
>Tobias
>
>
>PS: The current trial results (Ubuntu 10.04 LTS i386, Twisted trunk, 
>select reactor)
>
>twisted.conch.test.test_manhole
>
>=> ManholeLoopbackStdio: timeouts on all 13 test cases
>
>twisted.conch.test.test_recvline
>
>=> HistoricRecvlineLoopbackStdio: timeouts on all 2 test cases
>
>=> RecvlineLoopbackStdio: timeouts on all 9 test cases
>
>
>twisted.internet.test.test_endpoints
>
>=> ServerStringTests => test_ssl: hangs forever!
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From ghanavatian.ali at gmail.com  Sun Jun 24 15:21:57 2012
From: ghanavatian.ali at gmail.com (Ali Ghanavatian)
Date: Mon, 25 Jun 2012 01:51:57 +0430
Subject: [Twisted-Python] need to make imap server replies
Message-ID: <CAJnGD_d-VA=HmyacTUBX70m3ZaBEXcEQeyu6oPNrY_S_7iu71A@mail.gmail.com>

hello there,
here's the code i got:
http://pastebin.ubuntu.com/1058070/

it's implementing an imap server, problem is it does not retrieve emails.
mail client can capture new emails only once and after that, it should
disconnect and reconnect again to receive new emails (again only once).

any idea what's wrong here?

thanks in advance

-- 
 Sincerely
A. Ghanavatian <http://www.google.com/profiles/ghanavatian.ali>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120625/49644b32/attachment-0001.html>

From martin at webscio.net  Mon Jun 25 06:15:17 2012
From: martin at webscio.net (Martin)
Date: Mon, 25 Jun 2012 13:15:17 +0100
Subject: [Twisted-Python] iConnector factory not what expected
In-Reply-To: <20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
	<4FDA0477.2010809@webscio.net>
	<20120615004036.6806.1851535104.divmod.xquotient.25@localhost6.localdomain6>
	<4FDAF749.2050307@webscio.net>
	<20120615131543.6806.1924006697.divmod.xquotient.33@localhost6.localdomain6>
Message-ID: <4FE85655.7070707@webscio.net>

On 15/06/12 14:15, exarkun at twistedmatrix.com wrote:
> On 08:50 am, martin at webscio.net wrote:
>> On 15/06/12 01:40, exarkun at twistedmatrix.com wrote:
>>> On 14 Jun, 03:34 pm, martin at webscio.net wrote:
>>>> Hi again,
>>>>
>>>> I've a bit of code that does the following:
>>>>
>>>> f = MyReconnectingClientFactory()
>>>> iConn = reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>>
>>>> now I would expect that iConn.factory would be my f, but as it turns
>>>> out
>>>> it's an instance of some TLSMemoryBIOFactory.. Why is that so?
>>>>
>>>> After some digging, I was able to find f under
>>>> iConn.transport.protocol.wrappedProtocol.factory.. I'm happy to use
>>>> that, but it just sounds a bit weird to me.. or is this normal?
>>> There is no "factory" attribute on the `IConnector` interface at all:
>>>
>>> http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IConnector.html
>>>
>>> Neither is there a "transport" attribute, nor do any of the transport
>>> interfaces have a "protocol" attribute.
>>>
>>> All this means that Twisted isn't promising you anything about the
>>> meaning or existence of any of these attributes.
>>>
>>> So, why don't you just use `f` instead?
>>>
>>> Jean-Paul
>>>
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> I can't use f because I'm saving the IConnector object for later, so
>> that I can disconnect it when needed. I'm not sure if saving the f
>> object would have any effect, since doing anything to that after the
>> connection was created will surely have no effect, or?
> This doesn't make sense.  `f` is not an object and neither is
> `connector.factory` nor
> `connector.transport.protocol.wrappedProtocol.factory`.  They're
> expressions that, at least in this case, and in the context you're using
> them, all evaluate to the same object: the MyReconnectingClientFactory
> instance created at the beginning of your example code.
>
> It doesn't matter which of them you call stopTrying on, since there
> isn't actually any "them", there's just the single factory object.
>
> Put another way, saving `f` will let you do exactly what you want, in
> part because it's no different from what the `IConnector` implementation
> happens to be doing.
>
> Jean-Paul
>> In general, I can do iConn.disconnect(), but this being a
>> ReconnectingClientFactory, it attempts to reconnect straight away..
>> That's why I was looking to get the factory object somehow, so that I
>> could call stopTrying() on it first. If there's a better approach to
>> this, please let me know :)
>>
>> Thanks
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Just tested it and it works perfectly indeed, just using the 'f'. Thanks 
again :)




From martin at webscio.net  Mon Jun 25 06:16:30 2012
From: martin at webscio.net (Martin)
Date: Mon, 25 Jun 2012 13:16:30 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FD9CD44.1030102@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net>
Message-ID: <4FE8569E.3090504@webscio.net>

On 14/06/12 12:38, Martin wrote:
> Hi, thanks for your reply.
>
> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>
> def clientConnectionLost(self, connector, reason):
>         log.msg('Lost connection. Reason: %s' % reason)
> protocol.ReconnectingClientFactory.clientConnectionLost(self, 
> connector, reason)
>
> where "reason" is the Failure object that is "unhandled". is there 
> anything I could do to it there to make it handled?
>
> Also, the documentation in 
> http://twistedmatrix.com/documents/current/core/howto/defer.html says 
> that one can do d.addErrback(err.log) to deal with unhandled errors, 
> but what is d?
>
> In general, I'm not doing anything special.. I'm creating a 
> ReconnectingClientFactory and connecting it to a server..
> f = MyReconnectingClientFactory(..)
> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
> reactor.run()
>
> Basically it. Any thoughts? Thanks a lot!
>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>
>>> Hi there,
>>>
>>> I've been looking around for a solution for several hours now, and 
>>> maybe
>>> I'm just missing something..
>>>
>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>> works just fine, however, whenever the program ends running, I get a
>>> bunch of Unhandled error in Deferred messages in my log for each
>>> disconnection that occurred during runtime, such as Failure:
>>> twisted.internet.error.ConnectionLost: ...
>>>
>>> Is there any way I could somehow "handle" these during runtime, so that
>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>> spammed somehow..)
>> These messages are coming from some code which is issuing Deferreds, 
>> not from ReconnectingClientFactory.  You need to add an errback to 
>> those Deferreds in your application code.  There's no way to write a 
>> catch-all, just like there's no way to write a catch-all that can 
>> stop exceptions from being raised in basic Python.
>>
>> I can't say more without a code example, preferably 
>> a<http://sscce.org/>.
>>
>> -glyph
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>
No suggestions as to how I could get rid of this? :(




From vk.86.811 at gmail.com  Mon Jun 25 09:31:32 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Mon, 25 Jun 2012 17:31:32 +0200
Subject: [Twisted-Python] XMLRPC --> Twisted
In-Reply-To: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
References: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
Message-ID: <CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>

Hi,

   I have made a server code in xmlrpc. It has a command
"server.register_multicall_functions()".  How do I write the same in
twisted server?

This is the main of the twisted server :
--------------------

if __name__ == '__main__':
    from twisted.internet import reactor
    r = Example()
    reactor.listenTCP(7070, server.Site(r))
    print 'avtundile'
    reactor.run()

-----------------------
Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120625/90e41750/attachment.html>

From skaarjj at gmail.com  Mon Jun 25 15:27:06 2012
From: skaarjj at gmail.com (Adrian Overbury)
Date: Tue, 26 Jun 2012 07:27:06 +1000
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8569E.3090504@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
Message-ID: <B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>

On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:

> On 14/06/12 12:38, Martin wrote:
>> Hi, thanks for your reply.
>> 
>> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>> 
>> def clientConnectionLost(self, connector, reason):
>>        log.msg('Lost connection. Reason: %s' % reason)
>> protocol.ReconnectingClientFactory.clientConnectionLost(self, 
>> connector, reason)
>> 
>> where "reason" is the Failure object that is "unhandled". is there 
>> anything I could do to it there to make it handled?
>> 
>> Also, the documentation in 
>> http://twistedmatrix.com/documents/current/core/howto/defer.html says 
>> that one can do d.addErrback(err.log) to deal with unhandled errors, 
>> but what is d?
>> 
>> In general, I'm not doing anything special.. I'm creating a 
>> ReconnectingClientFactory and connecting it to a server..
>> f = MyReconnectingClientFactory(..)
>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>> reactor.run()
>> 
>> Basically it. Any thoughts? Thanks a lot!
>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>> 
>>>> Hi there,
>>>> 
>>>> I've been looking around for a solution for several hours now, and 
>>>> maybe
>>>> I'm just missing something..
>>>> 
>>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>>> works just fine, however, whenever the program ends running, I get a
>>>> bunch of Unhandled error in Deferred messages in my log for each
>>>> disconnection that occurred during runtime, such as Failure:
>>>> twisted.internet.error.ConnectionLost: ...
>>>> 
>>>> Is there any way I could somehow "handle" these during runtime, so that
>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>>> spammed somehow..)
>>> These messages are coming from some code which is issuing Deferreds, 
>>> not from ReconnectingClientFactory.  You need to add an errback to 
>>> those Deferreds in your application code.  There's no way to write a 
>>> catch-all, just like there's no way to write a catch-all that can 
>>> stop exceptions from being raised in basic Python.
>>> 
>>> I can't say more without a code example, preferably 
>>> a<http://sscce.org/>.
>>> 
>>> -glyph
>>> 
>>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>> 
>>> 
>> 
> No suggestions as to how I could get rid of this? :(
> 
> 

I believe glyph gave you the answer to that already.  In your example above of d.addErrBack, d is the deferred object.  Each of those needs to have an errback handler attached to it.  If you don't want to see anything out of them, simply don't print anything.

> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From martin at webscio.net  Mon Jun 25 15:47:31 2012
From: martin at webscio.net (Martin)
Date: Mon, 25 Jun 2012 22:47:31 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
Message-ID: <4FE8DC73.4080308@webscio.net>

On 25/06/12 22:27, Adrian Overbury wrote:
> On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:
>
>> On 14/06/12 12:38, Martin wrote:
>>> Hi, thanks for your reply.
>>>
>>> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>>>
>>> def clientConnectionLost(self, connector, reason):
>>>         log.msg('Lost connection. Reason: %s' % reason)
>>> protocol.ReconnectingClientFactory.clientConnectionLost(self,
>>> connector, reason)
>>>
>>> where "reason" is the Failure object that is "unhandled". is there
>>> anything I could do to it there to make it handled?
>>>
>>> Also, the documentation in
>>> http://twistedmatrix.com/documents/current/core/howto/defer.html says
>>> that one can do d.addErrback(err.log) to deal with unhandled errors,
>>> but what is d?
>>>
>>> In general, I'm not doing anything special.. I'm creating a
>>> ReconnectingClientFactory and connecting it to a server..
>>> f = MyReconnectingClientFactory(..)
>>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>> reactor.run()
>>>
>>> Basically it. Any thoughts? Thanks a lot!
>>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>>>
>>>>> Hi there,
>>>>>
>>>>> I've been looking around for a solution for several hours now, and
>>>>> maybe
>>>>> I'm just missing something..
>>>>>
>>>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>>>> works just fine, however, whenever the program ends running, I get a
>>>>> bunch of Unhandled error in Deferred messages in my log for each
>>>>> disconnection that occurred during runtime, such as Failure:
>>>>> twisted.internet.error.ConnectionLost: ...
>>>>>
>>>>> Is there any way I could somehow "handle" these during runtime, so that
>>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>>>> spammed somehow..)
>>>> These messages are coming from some code which is issuing Deferreds,
>>>> not from ReconnectingClientFactory.  You need to add an errback to
>>>> those Deferreds in your application code.  There's no way to write a
>>>> catch-all, just like there's no way to write a catch-all that can
>>>> stop exceptions from being raised in basic Python.
>>>>
>>>> I can't say more without a code example, preferably
>>>> a<http://sscce.org/>.
>>>>
>>>> -glyph
>>>>
>>>>
>>>> _______________________________________________
>>>> Twisted-Python mailing list
>>>> Twisted-Python at twistedmatrix.com
>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>
>>>>
>> No suggestions as to how I could get rid of this? :(
>>
>>
> I believe glyph gave you the answer to that already.  In your example above of d.addErrBack, d is the deferred object.  Each of those needs to have an errback handler attached to it.  If you don't want to see anything out of them, simply don't print anything.
>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
Well, kind of - I know that I need to do addErrBack on the deferred 
objects, I kind of knew that when I asked the original question having 
read the documentation on deferreds. What I still don't know though is 
how am I supposed to catch these deferreds - that is not being explained 
anywhere in the documentation I'm afraid.




From dynamicgl at gmail.com  Mon Jun 25 16:47:35 2012
From: dynamicgl at gmail.com (gelin yan)
Date: Tue, 26 Jun 2012 06:47:35 +0800
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8DC73.4080308@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
	<4FE8DC73.4080308@webscio.net>
Message-ID: <CABkOF6TBVkf7QAiFFBzjB27RmpdF=6YWkwrn7GZU0GFH9pL1XA@mail.gmail.com>

On Tue, Jun 26, 2012 at 5:47 AM, Martin <martin at webscio.net> wrote:

> On 25/06/12 22:27, Adrian Overbury wrote:
> > On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:
> >
> >> On 14/06/12 12:38, Martin wrote:
> >>> Hi, thanks for your reply.
> >>>
> >>> Indeed, the ReconnectingClientFactory is being sent the Failure object
> to
> >>>
> >>> def clientConnectionLost(self, connector, reason):
> >>>         log.msg('Lost connection. Reason: %s' % reason)
> >>> protocol.ReconnectingClientFactory.clientConnectionLost(self,
> >>> connector, reason)
> >>>
> >>> where "reason" is the Failure object that is "unhandled". is there
> >>> anything I could do to it there to make it handled?
> >>>
> >>> Also, the documentation in
> >>> http://twistedmatrix.com/documents/current/core/howto/defer.html says
> >>> that one can do d.addErrback(err.log) to deal with unhandled errors,
> >>> but what is d?
> >>>
> >>> In general, I'm not doing anything special.. I'm creating a
> >>> ReconnectingClientFactory and connecting it to a server..
> >>> f = MyReconnectingClientFactory(..)
> >>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
> >>> reactor.run()
> >>>
> >>> Basically it. Any thoughts? Thanks a lot!
> >>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
> >>>>
> >>>>> Hi there,
> >>>>>
> >>>>> I've been looking around for a solution for several hours now, and
> >>>>> maybe
> >>>>> I'm just missing something..
> >>>>>
> >>>>> I've a factory that implements protocol.ReconnectingClientFactory
> which
> >>>>> works just fine, however, whenever the program ends running, I get a
> >>>>> bunch of Unhandled error in Deferred messages in my log for each
> >>>>> disconnection that occurred during runtime, such as Failure:
> >>>>> twisted.internet.error.ConnectionLost: ...
> >>>>>
> >>>>> Is there any way I could somehow "handle" these during runtime, so
> that
> >>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
> >>>>> spammed somehow..)
> >>>> These messages are coming from some code which is issuing Deferreds,
> >>>> not from ReconnectingClientFactory.  You need to add an errback to
> >>>> those Deferreds in your application code.  There's no way to write a
> >>>> catch-all, just like there's no way to write a catch-all that can
> >>>> stop exceptions from being raised in basic Python.
> >>>>
> >>>> I can't say more without a code example, preferably
> >>>> a<http://sscce.org/>.
> >>>>
> >>>> -glyph
> >>>>
> >>>>
> >>>> _______________________________________________
> >>>> Twisted-Python mailing list
> >>>> Twisted-Python at twistedmatrix.com
> >>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>>>
> >>>>
> >> No suggestions as to how I could get rid of this? :(
> >>
> >>
> > I believe glyph gave you the answer to that already.  In your example
> above of d.addErrBack, d is the deferred object.  Each of those needs to
> have an errback handler attached to it.  If you don't want to see anything
> out of them, simply don't print anything.
> >
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >
> >
> Well, kind of - I know that I need to do addErrBack on the deferred
> objects, I kind of knew that when I asked the original question having
> read the documentation on deferreds. What I still don't know though is
> how am I supposed to catch these deferreds - that is not being explained
> anywhere in the documentation I'm afraid.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

Hi
   Usually you don't need to catch a deferred object..adding some callbacks
is enough..

I admit it might not be intuitive to understand defer concept at your first
trial. But it is powerful & elegant.

Regards

gelin yan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120626/93c5f2ba/attachment.html>

From skaarjj at gmail.com  Mon Jun 25 16:47:33 2012
From: skaarjj at gmail.com (Adrian Overbury)
Date: Tue, 26 Jun 2012 08:47:33 +1000
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8DC73.4080308@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
	<4FE8DC73.4080308@webscio.net>
Message-ID: <60C3F4A4-751B-4B78-ADFD-6E77FE62342C@gmail.com>

On 26/06/2012, at 7:47 AM, Martin <martin at webscio.net> wrote:

> On 25/06/12 22:27, Adrian Overbury wrote:
>> On 25/06/2012, at 10:16 PM, Martin <martin at webscio.net> wrote:
>> 
>>> On 14/06/12 12:38, Martin wrote:
>>>> Hi, thanks for your reply.
>>>> 
>>>> Indeed, the ReconnectingClientFactory is being sent the Failure object to
>>>> 
>>>> def clientConnectionLost(self, connector, reason):
>>>>        log.msg('Lost connection. Reason: %s' % reason)
>>>> protocol.ReconnectingClientFactory.clientConnectionLost(self,
>>>> connector, reason)
>>>> 
>>>> where "reason" is the Failure object that is "unhandled". is there
>>>> anything I could do to it there to make it handled?
>>>> 
>>>> Also, the documentation in
>>>> http://twistedmatrix.com/documents/current/core/howto/defer.html says
>>>> that one can do d.addErrback(err.log) to deal with unhandled errors,
>>>> but what is d?
>>>> 
>>>> In general, I'm not doing anything special.. I'm creating a
>>>> ReconnectingClientFactory and connecting it to a server..
>>>> f = MyReconnectingClientFactory(..)
>>>> reactor.connectSSL(url, port, f, ssl.ClientContextFactory())
>>>> reactor.run()
>>>> 
>>>> Basically it. Any thoughts? Thanks a lot!
>>>>> On Jun 11, 2012, at 8:01 AM, Martin wrote:
>>>>> 
>>>>>> Hi there,
>>>>>> 
>>>>>> I've been looking around for a solution for several hours now, and
>>>>>> maybe
>>>>>> I'm just missing something..
>>>>>> 
>>>>>> I've a factory that implements protocol.ReconnectingClientFactory which
>>>>>> works just fine, however, whenever the program ends running, I get a
>>>>>> bunch of Unhandled error in Deferred messages in my log for each
>>>>>> disconnection that occurred during runtime, such as Failure:
>>>>>> twisted.internet.error.ConnectionLost: ...
>>>>>> 
>>>>>> Is there any way I could somehow "handle" these during runtime, so that
>>>>>> my log wouldn't be spammed with this at the end.. (or avoid it being
>>>>>> spammed somehow..)
>>>>> These messages are coming from some code which is issuing Deferreds,
>>>>> not from ReconnectingClientFactory.  You need to add an errback to
>>>>> those Deferreds in your application code.  There's no way to write a
>>>>> catch-all, just like there's no way to write a catch-all that can
>>>>> stop exceptions from being raised in basic Python.
>>>>> 
>>>>> I can't say more without a code example, preferably
>>>>> a<http://sscce.org/>.
>>>>> 
>>>>> -glyph
>>>>> 
>>>>> 
>>>>> _______________________________________________
>>>>> Twisted-Python mailing list
>>>>> Twisted-Python at twistedmatrix.com
>>>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>>>> 
>>>>> 
>>> No suggestions as to how I could get rid of this? :(
>>> 
>>> 
>> I believe glyph gave you the answer to that already.  In your example above of d.addErrBack, d is the deferred object.  Each of those needs to have an errback handler attached to it.  If you don't want to see anything out of them, simply don't print anything.
>> 
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com
>>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> 
>> 
> Well, kind of - I know that I need to do addErrBack on the deferred 
> objects, I kind of knew that when I asked the original question having 
> read the documentation on deferreds. What I still don't know though is 
> how am I supposed to catch these deferreds - that is not being explained 
> anywhere in the documentation I'm afraid.
> 
> 

The page and bookmark http://twistedmatrix.com/documents/current/core/howto/defer.html#auto4 explains it pretty well.  When there's an error your errback function is called and a failure object is passed to it.  You can handle it, drop it or pass it on as you please or seem appropriate.  Hope  that helps.

> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From p.mayers at imperial.ac.uk  Tue Jun 26 01:43:17 2012
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Tue, 26 Jun 2012 08:43:17 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FE8DC73.4080308@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<B88FE65F-116C-436A-89AC-A5212FCCFB62@gmail.com>
	<4FE8DC73.4080308@webscio.net>
Message-ID: <4FE96815.7050204@imperial.ac.uk>

On 06/25/2012 10:47 PM, Martin wrote:

> Well, kind of - I know that I need to do addErrBack on the deferred
> objects, I kind of knew that when I asked the original question having
> read the documentation on deferreds. What I still don't know though is
> how am I supposed to catch these deferreds - that is not being explained
> anywhere in the documentation I'm afraid.

What do you mean by "catch these deferreds"?

A deferred is just a return value of a function, either in the Twisted 
API or your own code. For example:

from twisted.web import client

def ignore_err(failure):
     pass

def work():
     a_deferred = client.getPage(...)
     a_deferred.addErrback(ignore_err)

If you are seeing unhandled errors in deferreds and you don't know which 
deferreds, you're probably throwing away a return value somewhere. The 
traceback should point you in the right directon.



From vk.86.811 at gmail.com  Tue Jun 26 01:45:23 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Tue, 26 Jun 2012 09:45:23 +0200
Subject: [Twisted-Python] Call Back for startService() !
Message-ID: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>

Hi,

   I want to execute something after the service starts. Is there any call
back that I can associate with startService() ? I have checked the
documentation, but couldn't find anything as such :(

Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120626/4b03d07d/attachment-0001.html>

From tom.prince at ualberta.net  Tue Jun 26 07:50:01 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Tue, 26 Jun 2012 07:50:01 -0600
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87d34rt0oj.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca>
Message-ID: <87pq8muqra.fsf@hermes.hocat.ca>

This is a reminder that I am going to to take twisted's buildbot at 1600
UTC (just over an hour from now). While it is down, I'll ask people not
to commit to trunk. I'll send an email when it is back up.

While the buildbot is down, I will be testing a new version. Feel free
to poke around, and run builds, but be aware that any builds will be lost.

  Tom



From tom.prince at ualberta.net  Tue Jun 26 07:55:04 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Tue, 26 Jun 2012 07:55:04 -0600
Subject: [Twisted-Python] Buildbot downtime (correction
In-Reply-To: <87pq8muqra.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca> <87pq8muqra.fsf@hermes.hocat.ca>
Message-ID: <87mx3quqiv.fsf@hermes.hocat.ca>

I plan to take it down at 1600 UTC (which is ~2h, not 1h).

  Tom



From exarkun at twistedmatrix.com  Tue Jun 26 08:12:15 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 14:12:15 -0000
Subject: [Twisted-Python] Catching error in
 protocol.ReconnectingClientFactory
In-Reply-To: <4FE8569E.3090504@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
Message-ID: <20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>

On 25 Jun, 12:16 pm, martin at webscio.net wrote:
>>
>No suggestions as to how I could get rid of this? :(

I put together a minimal example of ReconnectingClientFactory for the 
connection refused case for you.  It's attached.  I don't see any errors 
logged.  If your program differs from this, please modify the example 
until it produces the problem.  Without this, it's very unlikely that 
anyone will be able to determine the problem or recommend a solution.

For future questions, if you could put together this minimal example 
yourself, you'll probably find you get help more quickly.

Here's the output I see when I run the program:

2012-06-26 10:07:26-0400 [-] Log opened.
2012-06-26 10:07:26-0400 [-] Starting factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
2012-06-26 10:07:26-0400 [Uninitialized] <twisted.internet.ssl.Connector 
instance at 0x2164128> will retry in 2 seconds
2012-06-26 10:07:26-0400 [Uninitialized] Stopping factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
2012-06-26 10:07:28-0400 [-] Starting factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
2012-06-26 10:07:28-0400 [Uninitialized] <twisted.internet.ssl.Connector 
instance at 0x2164128> will retry in 4 seconds
2012-06-26 10:07:28-0400 [Uninitialized] Stopping factory 
<twisted.internet.protocol.ReconnectingClientFactory instance at 
0x215ffc8>
^C2012-06-26 10:07:30-0400 [-] Received SIGINT, shutting down.
2012-06-26 10:07:30-0400 [-] Main loop terminated.


Jean-Paul
-------------- next part --------------
A non-text attachment was scrubbed...
Name: minimal-martin.py
Type: text/x-python
Size: 283 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20120626/af363c2f/attachment-0002.py>

From exarkun at twistedmatrix.com  Tue Jun 26 08:47:25 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 14:47:25 -0000
Subject: [Twisted-Python] need to make imap server replies
In-Reply-To: <CAJnGD_d-VA=HmyacTUBX70m3ZaBEXcEQeyu6oPNrY_S_7iu71A@mail.gmail.com>
References: <CAJnGD_d-VA=HmyacTUBX70m3ZaBEXcEQeyu6oPNrY_S_7iu71A@mail.gmail.com>
Message-ID: <20120626144725.2929.1162454832.divmod.xquotient.23@localhost6.localdomain6>

On 24 Jun, 09:21 pm, ghanavatian.ali at gmail.com wrote:
>hello there,
>here's the code i got:
>http://pastebin.ubuntu.com/1058070/
>
>it's implementing an imap server, problem is it does not retrieve 
>emails.
>mail client can capture new emails only once and after that, it should
>disconnect and reconnect again to receive new emails (again only once).
>
>any idea what's wrong here?

There doesn't appear to be any attempt at reconnection logic in that 
example.  There is only one call to `reactor.connectTCP` and there is 
even a call to `reactor.stop()` after the first connection is done.

If you want the client to reconnect, you need to call 
`reactor.connectTCP` again at some point, not `reactor.stop()`.

Jean-Paul
>thanks in advance
>
>--
>Sincerely
>A. Ghanavatian <http://www.google.com/profiles/ghanavatian.ali>



From exarkun at twistedmatrix.com  Tue Jun 26 09:20:01 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 15:20:01 -0000
Subject: [Twisted-Python] Call Back for startService() !
In-Reply-To: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>
References: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>
Message-ID: <20120626152001.2929.1849339910.divmod.xquotient.24@localhost6.localdomain6>

On 07:45 am, vk.86.811 at gmail.com wrote:
>Hi,
>
>   I want to execute something after the service starts. Is there any 
>call
>back that I can associate with startService() ? I have checked the
>documentation, but couldn't find anything as such :(

startService is a callback.

Jean-Paul
>Thanks,
>Vinodh



From exarkun at twistedmatrix.com  Tue Jun 26 09:24:11 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 26 Jun 2012 15:24:11 -0000
Subject: [Twisted-Python] XMLRPC --> Twisted
In-Reply-To: <CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>
References: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
	<CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>
Message-ID: <20120626152411.2929.1121742536.divmod.xquotient.25@localhost6.localdomain6>

On 25 Jun, 03:31 pm, vk.86.811 at gmail.com wrote:
>Hi,
>
>   I have made a server code in xmlrpc. It has a command
>"server.register_multicall_functions()".  How do I write the same in
>twisted server?

Twisted Web does not presently support XML-RPC multicalls.

Jean-Paul
>This is the main of the twisted server :
>--------------------
>
>if __name__ == '__main__':
>    from twisted.internet import reactor
>    r = Example()
>    reactor.listenTCP(7070, server.Site(r))
>    print 'avtundile'
>    reactor.run()
>
>-----------------------
>Thanks,
>Vinodh



From justin.venus at gmail.com  Tue Jun 26 10:01:11 2012
From: justin.venus at gmail.com (Justin Venus)
Date: Tue, 26 Jun 2012 11:01:11 -0500
Subject: [Twisted-Python] Call Back for startService() !
In-Reply-To: <20120626152001.2929.1849339910.divmod.xquotient.24@localhost6.localdomain6>
References: <CAEUxhZ1hA=6WbOFBb04tRd7BN-2oe4NXb2qOdm2cq75fADUhjw@mail.gmail.com>
	<20120626152001.2929.1849339910.divmod.xquotient.24@localhost6.localdomain6>
Message-ID: <CACL=7av8GzT9Z8pBJzTYVmoZu_z-MTN8t6doMKTgLEoiXW1mPA@mail.gmail.com>

Vinod,

This code[1] uses twisted as its foundation.  The project is rather
complex, but if you take a look at some of the service code and it
should give you some ideas on what you can do with twisted services.

https://github.com/JustinVenus/droned/blob/master/droned/services/journal.py#L127

Justin Venus

On Tue, Jun 26, 2012 at 10:20 AM,  <exarkun at twistedmatrix.com> wrote:
> On 07:45 am, vk.86.811 at gmail.com wrote:
>>Hi,
>>
>>  I want to execute something after the service starts. Is there any
>>call
>>back that I can associate with startService() ? I have checked the
>>documentation, but couldn't find anything as such :(
>
> startService is a callback.
>
> Jean-Paul
>>Thanks,
>>Vinodh
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
Justin Venus
justin.venus at gmail.com



From tom.prince at ualberta.net  Tue Jun 26 11:54:43 2012
From: tom.prince at ualberta.net (Tom Prince)
Date: Tue, 26 Jun 2012 11:54:43 -0600
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87pq8muqra.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca> <87pq8muqra.fsf@hermes.hocat.ca>
Message-ID: <87txxy2c2k.fsf@hermes.hocat.ca>

The buildbot is back up.

  Tom



From _ at lvh.cc  Tue Jun 26 13:09:59 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Tue, 26 Jun 2012 14:09:59 -0500
Subject: [Twisted-Python] Deserializing AMP callRemoteString without knowing
	the Command's signature
Message-ID: <CAE_Hg6ZR6q-yJGCqujZ7c5FOkdwPGtM7zEi1HqiX4sBK-gCdiw@mail.gmail.com>

Hi,

As some of you may know I am working on a JSON-RPC <-> AMP bridge to
consume AMP services from browsers. WIP: http://lvh.github.com/amphibian/

I've hit a failing integration test. I know what the issue is -- I don't
know how to resolve it.

I attempted to write the proxy without any knowledge of the remote
commands. It assumes that the JSON provided satisfies the remote signature.
If it doesn't -- that's okay, we'll get a failure back from the AMP server.
So, I use callRemoteString and manually serialize by typechecking. Although
that works for sending, the result I get back from callRemoteString is also
in wire format. Because I don't know the signature, I have no idea if the
sender meant 4, "4", u"4"...

On IRC:
dreid pointed out that I really shouldn't need a language-specific
implementation of a class for this to work
teratorn pointed out that there is a JSON schema ticket for AMP. Perhaps
there should also be a "DiscoverSchema" command?

Alternatively I could just cop out and require commands to be importable.
Would make the code simpler but the entire design would become
significantly more coupled.

-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120626/024fa83a/attachment.html>

From david at davidstrauss.net  Tue Jun 26 19:49:40 2012
From: david at davidstrauss.net (David Strauss)
Date: Tue, 26 Jun 2012 18:49:40 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
	<loom.20120611T091817-992@post.gmane.org>
	<982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>
Message-ID: <CAKz8sYUt3CtObQ6QntRW7CUYF8ehFNqissYybbJzm0M1Cxg_nQ@mail.gmail.com>

You can also bind to privileged ports now using listeners like systemd
(and, presumably xinetd).

-- 
David Strauss
 | david at davidstrauss.net



From david at davidstrauss.net  Tue Jun 26 19:52:11 2012
From: david at davidstrauss.net (David Strauss)
Date: Tue, 26 Jun 2012 18:52:11 -0700
Subject: [Twisted-Python] twisted/python3/ubuntu 12.10
In-Reply-To: <CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
References: <19421453.L4QdkbeXYx@i5>
	<CAFu6gYbjp0eBMzSnJ6HFKy9gV8GZvmyF8=kGeuVGJt=gpxenug@mail.gmail.com>
	<CALL7chn5grHn4kci81fi9VrehOB6cLS7Od6LsNqqqwBAt4rUDw@mail.gmail.com>
Message-ID: <CAKz8sYUdxngLb9sPj0E=PrPTfM6=GsGupCw0ki=U=pkTsE_W8Q@mail.gmail.com>

On Thu, Jun 14, 2012 at 8:17 AM, Gavin Panella <gavin at gromper.net> wrote:
> It's on the Ubuntu 12.04 Server CD; see
> http://cdimages.ubuntu.com/ubuntu-server/precise/daily/current/precise-server-amd64.list

Canonical's Landscape tool uses Twisted AMQP.

-- 
David Strauss
 | david at davidstrauss.net



From glyph at twistedmatrix.com  Wed Jun 27 00:02:09 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:02:09 -0700
Subject: [Twisted-Python] XMLRPC --> Twisted
In-Reply-To: <20120626152411.2929.1121742536.divmod.xquotient.25@localhost6.localdomain6>
References: <CAEUxhZ1KtG1-QJBSFG_jDUrFzj1xZS3vWyFdSws9ojsv8PjDYw@mail.gmail.com>
	<CAEUxhZ16-ntUev3tbCKAGpMXk1+QbCs-YhsBR0POCcoimEXRcg@mail.gmail.com>
	<20120626152411.2929.1121742536.divmod.xquotient.25@localhost6.localdomain6>
Message-ID: <280470C9-ADC2-4B8C-97C7-CDF2AC09FB8D@twistedmatrix.com>


On Jun 26, 2012, at 8:24 AM, exarkun at twistedmatrix.com wrote:

> On 25 Jun, 03:31 pm, vk.86.811 at gmail.com wrote:
>> Hi,
>> 
>>  I have made a server code in xmlrpc. It has a command
>> "server.register_multicall_functions()".  How do I write the same in
>> twisted server?
> 
> Twisted Web does not presently support XML-RPC multicalls.

If you wish it to do so, please request the feature at <http://twistedmatrix.com/trac/newticket> - although first, you should search there to see if someone else has requested it already, in which case you can just add yourself to the 'cc' list to be notified about changes.

If you just ask on the mailing list, it will likely be forgotten.  The most reliable way to get such a thing into Twisted, of course, is to attach a patch to the ticket, complete with documentation and unit tests, that implements the feature :).

-glyph




From glyph at twistedmatrix.com  Wed Jun 27 00:03:08 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:03:08 -0700
Subject: [Twisted-Python] Buildbot downtime
In-Reply-To: <87txxy2c2k.fsf@hermes.hocat.ca>
References: <87d34rt0oj.fsf@hermes.hocat.ca> <87pq8muqra.fsf@hermes.hocat.ca>
	<87txxy2c2k.fsf@hermes.hocat.ca>
Message-ID: <659C82E6-F1C8-4D54-92C4-3E9E4881BA8A@twistedmatrix.com>


On Jun 26, 2012, at 10:54 AM, Tom Prince <tom.prince at ualberta.net> wrote:

> The buildbot is back up.
> 
>  Tom

Congratulations on the successful maintenance.  I look forward to more developments with the buildbot in your capable hands - although hopefully without associated downtime ;-).

-glyph


From glyph at twistedmatrix.com  Wed Jun 27 00:09:44 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:09:44 -0700
Subject: [Twisted-Python] Deserializing AMP callRemoteString without
	knowing the Command's signature
In-Reply-To: <CAE_Hg6ZR6q-yJGCqujZ7c5FOkdwPGtM7zEi1HqiX4sBK-gCdiw@mail.gmail.com>
References: <CAE_Hg6ZR6q-yJGCqujZ7c5FOkdwPGtM7zEi1HqiX4sBK-gCdiw@mail.gmail.com>
Message-ID: <6E76BE37-533D-4D6B-8E62-66CE95B393A9@twistedmatrix.com>


On Jun 26, 2012, at 12:09 PM, Laurens Van Houtven <_ at lvh.cc> wrote:

> On IRC:
> dreid pointed out that I really shouldn't need a language-specific implementation of a class for this to work
> teratorn pointed out that there is a JSON schema ticket for AMP. Perhaps there should also be a "DiscoverSchema" command?

Yes, definitely.  There's a ticket for this, even, I think, although I can't find it at the moment.

> Alternatively I could just cop out and require commands to be importable. Would make the code simpler but the entire design would become significantly more coupled.

I think this is where you should start.  For now, importing Command objects is how you learn about AMP serialization rules.  We have plans to expand that, but trying to build that at the same time as Amphibian is probably too much at once.  (By all means though, once it exists, Amphibian should use it.)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120626/6b130f43/attachment.html>

From glyph at twistedmatrix.com  Wed Jun 27 00:14:34 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 26 Jun 2012 23:14:34 -0700
Subject: [Twisted-Python] Log file ownership
In-Reply-To: <CAKz8sYUt3CtObQ6QntRW7CUYF8ehFNqissYybbJzm0M1Cxg_nQ@mail.gmail.com>
References: <4FCFFA01.5040501@gmail.com>
	<20120608125724.4576.1120452192.divmod.xquotient.2@localhost6.localdomain6>
	<loom.20120611T091817-992@post.gmane.org>
	<982F6159-0DE8-47D2-A8E1-2FD931AB0995@twistedmatrix.com>
	<CAKz8sYUt3CtObQ6QntRW7CUYF8ehFNqissYybbJzm0M1Cxg_nQ@mail.gmail.com>
Message-ID: <CCFE1888-F0E3-4E1A-A2CE-639FD8EB50E3@twistedmatrix.com>


On Jun 26, 2012, at 6:49 PM, David Strauss <david at davidstrauss.net> wrote:

> You can also bind to privileged ports now using listeners like systemd
> (and, presumably xinetd).

xinetd has some mechanism to pass the listening socket, but I don't think Twisted supports it yet.  I believe the string endpoint description for systemd is somewhat specific to systemd's idiom for communicating about the socket involved; when we add launchd support, launchd is kinda specific too; see <http://tm.tl/5576>.  Any xinetd users want to do one for that daemon?

-glyph


From martin at webscio.net  Thu Jun 28 05:46:36 2012
From: martin at webscio.net (Martin)
Date: Thu, 28 Jun 2012 12:46:36 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>
Message-ID: <4FEC441C.4060201@webscio.net>

On 26/06/12 15:12, exarkun at twistedmatrix.com wrote:
> On 25 Jun, 12:16 pm, martin at webscio.net wrote:
>>>
>> No suggestions as to how I could get rid of this? :(
>
> I put together a minimal example of ReconnectingClientFactory for the 
> connection refused case for you.  It's attached.  I don't see any 
> errors logged.  If your program differs from this, please modify the 
> example until it produces the problem.  Without this, it's very 
> unlikely that anyone will be able to determine the problem or 
> recommend a solution.
>
> For future questions, if you could put together this minimal example 
> yourself, you'll probably find you get help more quickly.
>
> Here's the output I see when I run the program:
>
> 2012-06-26 10:07:26-0400 [-] Log opened.
> 2012-06-26 10:07:26-0400 [-] Starting factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> 2012-06-26 10:07:26-0400 [Uninitialized] 
> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 2 
> seconds
> 2012-06-26 10:07:26-0400 [Uninitialized] Stopping factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> 2012-06-26 10:07:28-0400 [-] Starting factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> 2012-06-26 10:07:28-0400 [Uninitialized] 
> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 4 
> seconds
> 2012-06-26 10:07:28-0400 [Uninitialized] Stopping factory 
> <twisted.internet.protocol.ReconnectingClientFactory instance at 
> 0x215ffc8>
> ^C2012-06-26 10:07:30-0400 [-] Received SIGINT, shutting down.
> 2012-06-26 10:07:30-0400 [-] Main loop terminated.
>
>
> Jean-Paul
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

Thanks a lot for the suggestions! I tried plugging in a fake address 
(like you did) in my code and indeed I'm not getting the deferred 
message at the end. So apparently it only happens when a connection is 
actually established first and then lost. I'll try to figure out a 
minimal example where/why it starts happening (I'll probably know how to 
fix it then too.. I just thought there'd be an easier way).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120628/761775e3/attachment-0001.html>

From martin at webscio.net  Thu Jun 28 06:01:37 2012
From: martin at webscio.net (Martin)
Date: Thu, 28 Jun 2012 13:01:37 +0100
Subject: [Twisted-Python] Catching error in
	protocol.ReconnectingClientFactory
In-Reply-To: <4FEC441C.4060201@webscio.net>
References: <4FD60845.4090702@webscio.net>
	<78824925-377C-41A4-B2EF-CF01C5E01E5F@twistedmatrix.com>
	<4FD9CD44.1030102@webscio.net> <4FE8569E.3090504@webscio.net>
	<20120626141215.2929.461329900.divmod.xquotient.21@localhost6.localdomain6>
	<4FEC441C.4060201@webscio.net>
Message-ID: <4FEC47A1.20101@webscio.net>

On 28/06/12 12:46, Martin wrote:
> On 26/06/12 15:12, exarkun at twistedmatrix.com wrote:
>> On 25 Jun, 12:16 pm, martin at webscio.net wrote:
>>>>
>>> No suggestions as to how I could get rid of this? :(
>>
>> I put together a minimal example of ReconnectingClientFactory for the 
>> connection refused case for you.  It's attached.  I don't see any 
>> errors logged.  If your program differs from this, please modify the 
>> example until it produces the problem. Without this, it's very 
>> unlikely that anyone will be able to determine the problem or 
>> recommend a solution.
>>
>> For future questions, if you could put together this minimal example 
>> yourself, you'll probably find you get help more quickly.
>>
>> Here's the output I see when I run the program:
>>
>> 2012-06-26 10:07:26-0400 [-] Log opened.
>> 2012-06-26 10:07:26-0400 [-] Starting factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> 2012-06-26 10:07:26-0400 [Uninitialized] 
>> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 
>> 2 seconds
>> 2012-06-26 10:07:26-0400 [Uninitialized] Stopping factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> 2012-06-26 10:07:28-0400 [-] Starting factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> 2012-06-26 10:07:28-0400 [Uninitialized] 
>> <twisted.internet.ssl.Connector instance at 0x2164128> will retry in 
>> 4 seconds
>> 2012-06-26 10:07:28-0400 [Uninitialized] Stopping factory 
>> <twisted.internet.protocol.ReconnectingClientFactory instance at 
>> 0x215ffc8>
>> ^C2012-06-26 10:07:30-0400 [-] Received SIGINT, shutting down.
>> 2012-06-26 10:07:30-0400 [-] Main loop terminated.
>>
>>
>> Jean-Paul
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> Thanks a lot for the suggestions! I tried plugging in a fake address 
> (like you did) in my code and indeed I'm not getting the deferred 
> message at the end. So apparently it only happens when a connection is 
> actually established first and then lost. I'll try to figure out a 
> minimal example where/why it starts happening (I'll probably know how 
> to fix it then too.. I just thought there'd be an easier way).
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

And found it.. the ReconnectingClientFactory was using an instance of a 
LengthDelimitedStream as the protocol and that's where the deferred was 
coming from.

Sorry for all the nagging, I should have figured it out myself.. but tbh 
getting the hang of Twisted is not so easy :)

Cheers!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120628/017e8b81/attachment.html>

From drsalists at gmail.com  Thu Jun 28 15:40:41 2012
From: drsalists at gmail.com (Dan Stromberg)
Date: Thu, 28 Jun 2012 21:40:41 +0000
Subject: [Twisted-Python] deferred graph?
Message-ID: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>

Hi.

I'm a Twisted neophyte, but I've been using Python a long time.

My question:
Is there a way of producing a deferred graph in a Python program at a given
point in time?  Perhaps something based on graphviz and objgraph.py?  We're
able to detect when we're having the problem, we just don't (yet) know its
cause.


Background:
I'm looking at some code with a bit over 200
addCallback/addErrback/addCallbacks in it.

It's got a problem where sometimes the deferreds seem to just stop
executing.  I see in the doc it says that this can happen if you've
neglected to add an errback to the end of one or more of your deferred
chains.

One of the people who's been here longer than me, indicated that he's gone
through the code looking for such issues, and didn't find any.  This
suggests to me that either there's some other cause, or that it really is a
deferred without a final errback, but it's hidden in a dark corner of the
code somewhere.


Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120628/8bda0feb/attachment.html>

From _ at lvh.cc  Thu Jun 28 16:00:10 2012
From: _ at lvh.cc (Laurens Van Houtven)
Date: Fri, 29 Jun 2012 00:00:10 +0200
Subject: [Twisted-Python] deferred graph?
In-Reply-To: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
Message-ID: <CAE_Hg6ZryB_Bumo4QxRTxgypHbKXRo+v5U0=wisCMZPgcg6kKA@mail.gmail.com>

You should still see the unhandled deferred in your logs if that's truly
the case.

On Thursday, June 28, 2012, Dan Stromberg wrote:

>
> Hi.
>
> I'm a Twisted neophyte, but I've been using Python a long time.
>
> My question:
> Is there a way of producing a deferred graph in a Python program at a
> given point in time?  Perhaps something based on graphviz and objgraph.py?
>  We're able to detect when we're having the problem, we just don't (yet)
> know its cause.
>
>
> Background:
> I'm looking at some code with a bit over 200
> addCallback/addErrback/addCallbacks in it.
>
> It's got a problem where sometimes the deferreds seem to just stop
> executing.  I see in the doc it says that this can happen if you've
> neglected to add an errback to the end of one or more of your deferred
> chains.
>
> One of the people who's been here longer than me, indicated that he's gone
> through the code looking for such issues, and didn't find any.  This
> suggests to me that either there's some other cause, or that it really is a
> deferred without a final errback, but it's hidden in a dark corner of the
> code somewhere.
>
>
> Thanks!
>
>

-- 
cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120629/67957113/attachment.html>

From terry at jon.es  Thu Jun 28 16:32:29 2012
From: terry at jon.es (Terry Jones)
Date: Thu, 28 Jun 2012 18:32:29 -0400
Subject: [Twisted-Python] deferred graph?
In-Reply-To: Your message at 21:40:41 on Thursday, 28 June 2012
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
Message-ID: <20460.56189.932953.706603@jon.es>

Hi Dan

> I'm a Twisted neophyte, but I've been using Python a long time.

I'm a Twisted neophyte, but I've been using Twisted a long time.

(I'd add a smiley, but that's not a joke.)

> My question: Is there a way of producing a deferred graph in a Python
> program at a given point in time?  Perhaps something based on graphviz
> and objgraph.py?  We're able to detect when we're having the problem, we
> just don't (yet) know its cause.

You might be able to use this that I wrote some time ago. It might need
some maintenance as the Twisted Deferred code has moved on since then. But
the approach might help you:

http://www.twistedmatrix.com/pipermail/twisted-python/2008-October/018535.html

Terry



From glyph at twistedmatrix.com  Thu Jun 28 18:21:12 2012
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 28 Jun 2012 17:21:12 -0700
Subject: [Twisted-Python] deferred graph?
In-Reply-To: <20460.56189.932953.706603@jon.es>
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
	<20460.56189.932953.706603@jon.es>
Message-ID: <C213BB82-DF94-4E53-BF0B-D70D5E83CA30@twistedmatrix.com>

Le Jun 28, 2012  3:32 PM, Terry Jones <terry at jon.es> a crit :

> You might be able to use this that I wrote some time ago. It might need
> some maintenance as the Twisted Deferred code has moved on since then. But
> the approach might help you:
> 
> http://www.twistedmatrix.com/pipermail/twisted-python/2008-October/018535.html

Hey Terry,

Did you ever file a ticket to get something like this into Twisted?  This looks like an interesting visualization tool to help people understand what's going on with their Deferreds, and we need more of that sort of thing.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120628/90c0eaea/attachment.html>

From terry at jon.es  Thu Jun 28 18:42:20 2012
From: terry at jon.es (Terry Jones)
Date: Thu, 28 Jun 2012 20:42:20 -0400
Subject: [Twisted-Python] deferred graph?
In-Reply-To: Your message at 17:21:12 on Thursday, 28 June 2012
References: <CAGGBd_ofqH3T6T=8i8i5JzpWatXJmWpY82PcDKrW0pS-KQG8fQ@mail.gmail.com>
	<20460.56189.932953.706603@jon.es>
	<C213BB82-DF94-4E53-BF0B-D70D5E83CA30@twistedmatrix.com>
Message-ID: <20460.63980.237850.10155@jon.es>

Hi Glyph!

There are a couple of tickets floating around:

  http://twistedmatrix.com/trac/ticket/3858
  http://twistedmatrix.com/trac/ticket/1402 (closed as a dupe)

T



From vk.86.811 at gmail.com  Fri Jun 29 08:52:06 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Fri, 29 Jun 2012 16:52:06 +0200
Subject: [Twisted-Python] Writing onto txWS
In-Reply-To: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
References: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
Message-ID: <CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>

Hi All,

   I have run and edited the example provided for txWS. The writing part
from server to client browser is shown only as self.transport.write()
inside dataReceived function in websockets.py. how do I write on to the
socket i.e. on to the browser, from a different function inside server
code(server.tac). I'm just starting another xmlrpc server on a thread where
I receive some notifications. I need to forward the same to socket. The
bold point below  is where I want to write on to socket. How can we do
that? Please help me out.
-------------------------------------------------------
import time

from twisted.internet import reactor
from twisted.application import internet
from twisted.application.service import Application, Service
import xmlrpclib
from txws import WebSocketFactory

from src.protocols.websockets import WebSocketServerFactory
from constants import *

class WebSocketService(Service):
    """
    A simple service that listens on port 8077 for WebSockets traffic.
    """
    def __init__(self):
        self.start_time = time.time()

    def start_service(self, application):
        """
        Gets the show on the road. Fires up a factory, binds the port.
        """
        echofactory = WebSocketServerFactory(self)
        factory = WebSocketFactory(echofactory)
        ws_server = internet.TCPServer(8077, factory)
        ws_server.setName('ws-tcp')
        ws_server.setServiceParent(application)

    def shutdown(self):
        """
        Gracefully shuts down the service.
        """
        reactor.callLater(0, reactor.stop)

def listDevices(id):
print "listDevice: %(id)s" % {"id": str(id)}
 return None

def event(id, address, key, value):
        #websocket.send("ufffffffffuuuuuu")
*        #I need to write the below print statement on to browser *
        print "event: %(id)s: %(address)s: %(key)s = %(value)s" % {"id":
str(id),
"address": str(address), "key": str(key), "value": str(value)}

def aSillyBlockingMethod(x):
    import time
    import xmlrpclib
    time.sleep(2)
    from SimpleXMLRPCServer import SimpleXMLRPCServer
    from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
    from constants import *
    server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT), logRequests=True,
allow_none=True)
    server.register_introspection_functions()
    server.register_multicall_functions()
    print "server started at %s" % str(SERVER_URL)
    server.register_function(listDevices)
    server.register_function(event)
    print 'function also got registered'
    server.serve_forever()
    .............................continues

Thanks,
Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120629/f2581a71/attachment.html>

From cds at corbinsimpson.com  Fri Jun 29 10:27:45 2012
From: cds at corbinsimpson.com (Corbin Simpson)
Date: Fri, 29 Jun 2012 09:27:45 -0700
Subject: [Twisted-Python] Writing onto txWS
In-Reply-To: <CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
References: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
	<CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
Message-ID: <20120629162745.GA14473@ps35699.dreamhostps.com>

On Fri, Jun 29, 2012 at 04:52:06PM +0200, vinod kumar wrote:
> Hi All,
> 
>    I have run and edited the example provided for txWS. The writing part
> from server to client browser is shown only as self.transport.write()
> inside dataReceived function in websockets.py. how do I write on to the
> socket i.e. on to the browser, from a different function inside server
> code(server.tac). I'm just starting another xmlrpc server on a thread where
> I receive some notifications. I need to forward the same to socket. The
> bold point below  is where I want to write on to socket. How can we do
> that? Please help me out.
> -------------------------------------------------------
> import time
> 
> from twisted.internet import reactor
> from twisted.application import internet
> from twisted.application.service import Application, Service
> import xmlrpclib
> from txws import WebSocketFactory
> 
> from src.protocols.websockets import WebSocketServerFactory
> from constants import *
> 
> class WebSocketService(Service):
>     """
>     A simple service that listens on port 8077 for WebSockets traffic.
>     """
>     def __init__(self):
>         self.start_time = time.time()
> 
>     def start_service(self, application):
>         """
>         Gets the show on the road. Fires up a factory, binds the port.
>         """
>         echofactory = WebSocketServerFactory(self)
>         factory = WebSocketFactory(echofactory)
>         ws_server = internet.TCPServer(8077, factory)
>         ws_server.setName('ws-tcp')
>         ws_server.setServiceParent(application)
> 
>     def shutdown(self):
>         """
>         Gracefully shuts down the service.
>         """
>         reactor.callLater(0, reactor.stop)
> 
> def listDevices(id):
> print "listDevice: %(id)s" % {"id": str(id)}
>  return None
> 
> def event(id, address, key, value):
>         #websocket.send("ufffffffffuuuuuu")
> *        #I need to write the below print statement on to browser *
>         print "event: %(id)s: %(address)s: %(key)s = %(value)s" % {"id":
> str(id),
> "address": str(address), "key": str(key), "value": str(value)}
> 
> def aSillyBlockingMethod(x):
>     import time
>     import xmlrpclib
>     time.sleep(2)
>     from SimpleXMLRPCServer import SimpleXMLRPCServer
>     from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
>     from constants import *
>     server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT), logRequests=True,
> allow_none=True)
>     server.register_introspection_functions()
>     server.register_multicall_functions()
>     print "server started at %s" % str(SERVER_URL)
>     server.register_function(listDevices)
>     server.register_function(event)
>     print 'function also got registered'
>     server.serve_forever()
>     .............................continues
> 
> Thanks,
> Vinodh

Hi Vinodh,

txWS merely lets you connect to a Twisted Factory through WebSockets.
You will still need to structure your code such that the events that you
are responding to are connected to that Factory.

It might be helpful to rewrite your XML-RPC server to use Twisted's
XML-RPC (see
http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html for a
tutorial on that) and then it will be easier to hook up your events
without having to worry about threading or other blocking things.

If you're having specific problems with txWS, let me know; it's
important to us that txWS work smoothly for people using it.

~ C.



From exarkun at twistedmatrix.com  Fri Jun 29 11:28:53 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Fri, 29 Jun 2012 17:28:53 -0000
Subject: [Twisted-Python] Writing onto txWS
In-Reply-To: <CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
References: <CAEUxhZ0tBdho1GX63T49-qaavLbyEcpT7dOOd-3jMykUKnoT0Q@mail.gmail.com>
	<CAEUxhZ2iQe9TpT=s73=ycnbgtGcp_o6ZYxhS--Nki8Ho1yxnkw@mail.gmail.com>
Message-ID: <20120629172853.3315.1306260164.divmod.xquotient.53@localhost6.localdomain6>

Please do not cross-post between twisted-web and twisted-python.  Pick a 
list and stick to it.

Jean-Paul



From cyli at twistedmatrix.com  Fri Jun 29 13:07:18 2012
From: cyli at twistedmatrix.com (Ying Li)
Date: Fri, 29 Jun 2012 12:07:18 -0700
Subject: [Twisted-Python] Twisted tutorial and Twisted sprint in San
	Francisco
Message-ID: <CA+Q0aKFtgs2h1ZM6oHqcD4D3ig2Tq7BnhB06ddvEHxQ1hzb7DQ@mail.gmail.com>

Hi all!

There will be a Twisted tutorial/learning session in San Francisco on
Friday, July 13th, at 7pm.  Glyph will be giving the tutorial, and
several developers will be on hand to help.

There will be a Twisted sprint the next day, Saturday July 14th, from
10am to 9pm (or later, if folks want to stay later!) - come whenever
and for however long you like.  Hack on Twisted or a Twisted-related
project, learn more about how to use Twisted, or just hang out.

Both events are hosted at Rackspace, which is located at 620 Folsom
St, Suite 100, San Francisco 94107.  (between 2nd St and Howard, or
2nd and 3rd if you prefer).

Please RSVP at:
http://www.meetup.com/San-Francisco-Twisted-Python-Meetup   (so we
know how much food to get!)

Thanks!



From tobias.oberstein at tavendo.de  Sat Jun 30 02:22:15 2012
From: tobias.oberstein at tavendo.de (Tobias Oberstein)
Date: Sat, 30 Jun 2012 01:22:15 -0700
Subject: [Twisted-Python] Make Twisted/PyPy a milestone?
In-Reply-To: <20120624164149.3516.839722173.divmod.xquotient.3@localhost6.localdomain6>
References: <634914A010D0B943A035D226786325D43378171B8D@EXVMBX020-12.exch020.serverdata.net>
	<20120624164149.3516.839722173.divmod.xquotient.3@localhost6.localdomain6>
Message-ID: <634914A010D0B943A035D226786325D433793A55D8@EXVMBX020-12.exch020.serverdata.net>

> more productive contribution would probably be to fix the tests that have been
> failing on it for most or all of that time. :)

Ok. I guess for that filing tickets first might be the way to go.

Hence, I created a "meta bug"

http://twistedmatrix.com/trac/ticket/5735

to group the current issues

FAILED (skips=1665, expectedFailures=11, failures=11, errors=19, successes=6412)

and determine if they are Twisted or PyPy business. Then I go and fix what I can do ..

For the initial screening (in particular), any eyes/knowledge/guidance is appreciated ..



From vk.86.811 at gmail.com  Sat Jun 30 13:36:08 2012
From: vk.86.811 at gmail.com (vinod kumar)
Date: Sat, 30 Jun 2012 21:36:08 +0200
Subject: [Twisted-Python] txWS !!
Message-ID: <CAEUxhZ03_+fF-Tw2AExHRzKCJ1hnGUh9Y6Av8vxP8Er8ZLsgbg@mail.gmail.com>

Hi,

 Thanks a lot for your reply. The trouble is that the events I have are
triggered by a homematic CCU. The CCU does it by multicall which has not
yet been implemented in twisted servers. So, I'm running a non-twisted
xmlrpc server in a thread so that my CCU triggers the events and it's
happening too. I can see the events printed on the console too. Now, I just
want a way to write the same to sockets. Can't we connect these to txWS
factory ? Doesn't the txWS has some socket object so that we can just say
socket.write..hmm

Thanks,
Vinodh
-------------------------------------------------------------------

Hi Vinodh,

txWS merely lets you connect to a Twisted Factory through WebSockets.
You will still need to structure your code such that the events that you
are responding to are connected to that Factory.

It might be helpful to rewrite your XML-RPC server to use Twisted's
XML-RPC (see
http://twistedmatrix.com/documents/current/web/howto/xmlrpc.html for a
tutorial on that) and then it will be easier to hook up your events
without having to worry about threading or other blocking things.

If you're having specific problems with txWS, let me know; it's
important to us that txWS work smoothly for people using it.

~ C.
-------------------------------
On Fri, Jun 29, 2012 at 04:52:06PM +0200, vinod kumar wrote:
> Hi All,
>
>    I have run and edited the example provided for txWS. The writing part
> from server to client browser is shown only as self.transport.write()
> inside dataReceived function in websockets.py. how do I write on to the
> socket i.e. on to the browser, from a different function inside server
> code(server.tac). I'm just starting another xmlrpc server on a thread
where
> I receive some notifications. I need to forward the same to socket. The
> bold point below  is where I want to write on to socket. How can we do
> that? Please help me out.
> -------------------------------------------------------
> import time
>
> from twisted.internet import reactor
> from twisted.application import internet
> from twisted.application.service import Application, Service
> import xmlrpclib
> from txws import WebSocketFactory
>
> from src.protocols.websockets import WebSocketServerFactory
> from constants import *
>
> class WebSocketService(Service):
>     """
>     A simple service that listens on port 8077 for WebSockets traffic.
>     """
>     def __init__(self):
>         self.start_time = time.time()
>
>     def start_service(self, application):
>         """
>         Gets the show on the road. Fires up a factory, binds the port.
>         """
>         echofactory = WebSocketServerFactory(self)
>         factory = WebSocketFactory(echofactory)
>         ws_server = internet.TCPServer(8077, factory)
>         ws_server.setName('ws-tcp')
>         ws_server.setServiceParent(application)
>
>     def shutdown(self):
>         """
>         Gracefully shuts down the service.
>         """
>         reactor.callLater(0, reactor.stop)
>
> def listDevices(id):
> print "listDevice: %(id)s" % {"id": str(id)}
>  return None
>
> def event(id, address, key, value):
>         #websocket.send("ufffffffffuuuuuu")
> *        #I need to write the below print statement on to browser *
>         print "event: %(id)s: %(address)s: %(key)s = %(value)s" % {"id":
> str(id),
> "address": str(address), "key": str(key), "value": str(value)}
>
> def aSillyBlockingMethod(x):
>     import time
>     import xmlrpclib
>     time.sleep(2)
>     from SimpleXMLRPCServer import SimpleXMLRPCServer
>     from SimpleXMLRPCServer import SimpleXMLRPCRequestHandler
>     from constants import *
>     server = SimpleXMLRPCServer((SERVER_IP, SERVER_PORT),
logRequests=True,
> allow_none=True)
>     server.register_introspection_functions()
>     server.register_multicall_functions()
>     print "server started at %s" % str(SERVER_URL)
>     server.register_function(listDevices)
>     server.register_function(event)
>     print 'function also got registered'
>     server.serve_forever()
>     .............................continues
>
> Thanks,
> Vinodh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120630/f5420b3a/attachment.html>

From exarkun at twistedmatrix.com  Sat Jun 30 22:05:52 2012
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 01 Jul 2012 04:05:52 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1341115552.72.1965520805@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20120701/2ec0ad16/attachment-0001.html>

