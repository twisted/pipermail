<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Running twistd with a compiled file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Running%20twistd%20with%20a%20compiled%20file&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023918.html">
   <LINK REL="Next"  HREF="023904.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Running twistd with a compiled file</H1>
    <B>Albert Brandl</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Running%20twistd%20with%20a%20compiled%20file&In-Reply-To="
       TITLE="[Twisted-Python] Running twistd with a compiled file">albert.brandl at weiermayer.com
       </A><BR>
    <I>Thu Apr 21 03:27:45 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="023918.html">[Twisted-Python] Understanding deferred and error handling
</A></li>
        <LI>Next message: <A HREF="023904.html">[Twisted-Python] Running twistd with a compiled file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23903">[ date ]</a>
              <a href="thread.html#23903">[ thread ]</a>
              <a href="subject.html#23903">[ subject ]</a>
              <a href="author.html#23903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

It is sometimes necessary to deploy an application without the sources.
But when I try to start the twistd daemon with a compiled Python file, 
it raises the following traceback:

$ twistd -ny application.pyc
Traceback (most recent call last):
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/application/app.py&quot;, line 631, in run
    runApp(config)
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/scripts/twistd.py&quot;, line 23, in runApp
    _SomeApplicationRunner(config).run()
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/application/app.py&quot;, line 374, in run
    self.application = self.createOrGetApplication()
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/application/app.py&quot;, line 439, in createOrGetApplication
    application = getApplication(self.config, passphrase)
--- &lt;exception caught here&gt; ---
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/application/app.py&quot;, line 450, in getApplication
    application = service.loadApplication(filename, style, passphrase)
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/application/service.py&quot;, line 400, in loadApplication
    application = sob.loadValueFromFile(filename, 'application', passphrase)
  File &quot;/usr/local/lib/python2.6/dist-packages/Twisted-10.0.0-py2.6-linux-i686.egg/twisted/persisted/sob.py&quot;, line 210, in loadValueFromFile
    exec fileObj in d, d
exceptions.SyntaxError: Non-ASCII character '\xd1' in file application.pyc on line 1, but no encoding declared; see <A HREF="http://www.python.org/peps/pep-0263.html">http://www.python.org/peps/pep-0263.html</A> for details (application.pyc, line 1)

Failed to load application: Non-ASCII character '\xd1' in file application.pyc on line 1, but no encoding declared; see <A HREF="http://www.python.org/peps/pep-0263.html">http://www.python.org/peps/pep-0263.html</A> for details (application.pyc, line 1)

This behaviour was observed with twistd 10.2.0.

Of course, it's possible to move most of the logic to other (compiled)
files, but I'd prefer if the application itself could also be deployed
in compiled form.

Is this a known problem? Can you suggest a workaround?

Best regards,

Albert
-- 
Albert Brandl
Weiermayer Solutions GmbH      | Abteistra&#223;e 12, A-4813 Altm&#252;nster
phone: +43 (0) 720 70 30 14    | fax: +43 (0) 7612 20 3 56
web: <A HREF="http://www.weiermayer.com">http://www.weiermayer.com</A>

</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023918.html">[Twisted-Python] Understanding deferred and error handling
</A></li>
	<LI>Next message: <A HREF="023904.html">[Twisted-Python] Running twistd with a compiled file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23903">[ date ]</a>
              <a href="thread.html#23903">[ thread ]</a>
              <a href="subject.html#23903">[ subject ]</a>
              <a href="author.html#23903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
