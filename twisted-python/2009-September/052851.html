<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re : Re : Re : Telnet server using Twisted and	AuthenticatingTelnetProtocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%20%3A%20Re%20%3A%20Re%20%3A%20Telnet%20server%20using%20Twisted%20and%0A%09AuthenticatingTelnetProtocol&In-Reply-To=%3C901134.40070.qm%40web26101.mail.ukl.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052847.html">
   <LINK REL="Next"  HREF="052853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re : Re : Re : Telnet server using Twisted and	AuthenticatingTelnetProtocol</H1>
    <B>filoufake-python at yahoo.fr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%20%3A%20Re%20%3A%20Re%20%3A%20Telnet%20server%20using%20Twisted%20and%0A%09AuthenticatingTelnetProtocol&In-Reply-To=%3C901134.40070.qm%40web26101.mail.ukl.yahoo.com%3E"
       TITLE="[Twisted-Python] Re : Re : Re : Telnet server using Twisted and	AuthenticatingTelnetProtocol">filoufake-python at yahoo.fr
       </A><BR>
    <I>Wed Sep  2 05:44:16 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052847.html">[Twisted-Python] Re : Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol
</A></li>
        <LI>Next message (by thread): <A HREF="052853.html">[Twisted-Python] Re : Re : Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52851">[ date ]</a>
              <a href="thread.html#52851">[ thread ]</a>
              <a href="subject.html#52851">[ subject ]</a>
              <a href="author.html#52851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i>It's hard to say what's going wrong without being able to see all of the 
</I>&gt;<i>code.  A short, self contained, correct example (&lt;<A HREF="http://sscce.org/">http://sscce.org/</A>&gt;) 
</I>&gt;<i>would help a lot.
</I>
Hereafter is the simplest code that generates the problem.
If you run it, you will see that after entering the password nothing
happened. The &quot;telnet_Command&quot; method of MyTelnet is never called.
I think the problem is what requestAvatar returns.
Thanks again for your support

import sys
from zope.interface import implements
from twisted.internet import protocol
from twisted.python import log
from twisted.cred import error
from twisted.cred import portal
from twisted.cred import checkers
from twisted.cred import credentials
from twisted.conch.telnet import AuthenticatingTelnetProtocol
from twisted.conch.telnet import StatefulTelnetProtocol
from twisted.conch.telnet import ITelnetProtocol
from twisted.conch.telnet import TelnetTransport

class Realm:
  implements(portal.IRealm)

  def requestAvatar(self, avatarId, mind, *interfaces):
    if ITelnetProtocol in interfaces:
      av = MyTelnet()
      return ITelnetProtocol, av, lambda:None
    raise NotImplementedError(&quot;Not supported by this realm&quot;)

class MyTelnet(StatefulTelnetProtocol):
  def telnet_Command(self, line):
    print &quot;line received via telnet&quot;, line

def main():
  r = Realm()
  p = portal.Portal(r)
  c = checkers.InMemoryUsernamePasswordDatabaseDontUse()
  c.addUser(&quot;AA&quot;, &quot;aa&quot;)
  p.registerChecker(c)
  p.registerChecker(checkers.AllowAnonymousAccess())
  f = protocol.ServerFactory()
  f.protocol = lambda: TelnetTransport(AuthenticatingTelnetProtocol, p)
  log.startLogging(sys.stdout)
  from twisted.internet import reactor
  reactor.listenTCP(4738, f)
  reactor.run()

if __name__ == '__main__':
  main()


      



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052847.html">[Twisted-Python] Re : Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol
</A></li>
	<LI>Next message (by thread): <A HREF="052853.html">[Twisted-Python] Re : Re : Re : Telnet server using Twisted	and	AuthenticatingTelnetProtocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52851">[ date ]</a>
              <a href="thread.html#52851">[ thread ]</a>
              <a href="subject.html#52851">[ subject ]</a>
              <a href="author.html#52851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
