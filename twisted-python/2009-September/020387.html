<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PB/Remote Object/Deferred question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PB/Remote%20Object/Deferred%20question&In-Reply-To=E1MlQHU-0001tv-J4%40cube.twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020386.html">
   <LINK REL="Next"  HREF="020388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PB/Remote Object/Deferred question</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PB/Remote%20Object/Deferred%20question&In-Reply-To=E1MlQHU-0001tv-J4%40cube.twistedmatrix.com"
       TITLE="[Twisted-Python] PB/Remote Object/Deferred question">exarkun at twistedmatrix.com
       </A><BR>
    <I>Wed Sep  9 12:56:39 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020386.html">[Twisted-Python] PB/Remote Object/Deferred question
</A></li>
        <LI>Next message: <A HREF="020388.html">[Twisted-Python] PB/Remote Object/Deferred question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20387">[ date ]</a>
              <a href="thread.html#20387">[ thread ]</a>
              <a href="subject.html#20387">[ subject ]</a>
              <a href="author.html#20387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04:39 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cyclops at speakeasy.net</A> wrote:
&gt;<i>I'm trying to understand the Perspective Broker, reading over the
</I>&gt;<i>on-site documentation, specifically the article:
</I>&gt;<i>
</I>&gt;<i><A HREF="http://twistedmatrix.com/projects/core/documentation/howto/pb-">http://twistedmatrix.com/projects/core/documentation/howto/pb-</A> 
</I>&gt;<i>usage.html
</I>&gt;<i>
</I>&gt;<i>and there is a section about the callRemote() function that I really
</I>&gt;<i>don't understand :)
</I>&gt;<i>
</I>&gt;<i>First, consider these three lines:
</I>&gt;<i>
</I>&gt;<i>d = factory.getRootObject()
</I>&gt;<i>d.addCallback(lambda object: object.callRemote(&quot;echo&quot;, &quot;hello 
</I>&gt;<i>network&quot;))
</I>&gt;<i>d.addCallback(lambda echo: 'server echoed: '+echo)
</I>&gt;<i>
</I>&gt;<i>Second, the documentation says, &quot;...object.callRemote() returns a
</I>&gt;<i>Deferred. Assuming the remote method was run without causing an
</I>&gt;<i>exception (including an attempt to invoke an unknown method), the
</I>&gt;<i>callback attached to that Deferred will be invoked with any objects
</I>&gt;<i>that were returned by the remote method call.&quot;
</I>&gt;<i>
</I>&gt;<i>If I read this correctly, callRemote() returns a whole new Deferred
</I>&gt;<i>object, which is *not* the same as the 'd' Deferred object we already
</I>&gt;<i>have. So that *new* Deferred should be the one that the next callback
</I>&gt;<i>(line 3) is added to, since the next callback is based on the success
</I>&gt;<i>of the callRemote(). So wouldn't these be the correct lines:
</I>&gt;<i>
</I>&gt;<i>d = factory.getRootObject()
</I>&gt;<i>d2 = d.addCallback(lambda object: object.callRemote(&quot;echo&quot;, &quot;hello 
</I>&gt;<i>network&quot;))
</I>&gt;<i>d2.addCallback(lambda echo: 'server echoed: '+echo)
</I>
When one Deferred is returned from a callback on another Deferred, the 
two Deferreds are &quot;chained&quot;.  This means that the result of the one 
Deferred becomes the result of the other Deferred, and callbacks added 
to the other Deferred are not run until this happens.

Additionally, Deferred.addCallback returns self, so your version of the 
code is really exactly the same as the original version.

Jean-Paul

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020386.html">[Twisted-Python] PB/Remote Object/Deferred question
</A></li>
	<LI>Next message: <A HREF="020388.html">[Twisted-Python] PB/Remote Object/Deferred question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20387">[ date ]</a>
              <a href="thread.html#20387">[ thread ]</a>
              <a href="subject.html#20387">[ subject ]</a>
              <a href="author.html#20387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
