<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22twistd%22%20in%20Twisted%2016.4.0%20can%27t%20import%0A%20modules/packages%20from%20current%20working%20directory&In-Reply-To=%3C57C8302A.1050703%40fastmail.fm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory</H1>
    <B>Yuri</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22twistd%22%20in%20Twisted%2016.4.0%20can%27t%20import%0A%20modules/packages%20from%20current%20working%20directory&In-Reply-To=%3C57C8302A.1050703%40fastmail.fm%3E"
       TITLE="[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory">yuri_abzyanov at fastmail.fm
       </A><BR>
    <I>Thu Sep  1 07:42:02 MDT 2016</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63241">[ date ]</a>
              <a href="thread.html#63241">[ thread ]</a>
              <a href="subject.html#63241">[ subject ]</a>
              <a href="author.html#63241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all

I couldn't find Twisted-specific group, so posting here.

Recently Twisted 16.4.0 got released. Yesterday I've tried to upgrade it 
for my apps and got an error.

I've created simple example, which demonstrates it.

File service.tac:
=======================================
import os
from twisted.application import service, internet

import mymodule

application = service.Application(&quot;Demo application&quot;)
----------------------------------------


File mymodule.py:
========================================
def myfunction(asd):
     &quot;&quot;&quot; Stub function &quot;&quot;&quot;
----------------------------------------


If you try to run it with twistd -y service.tac you'll get an error:
== output ==============================
Unhandled Error
Traceback (most recent call last):
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/application/app.py&quot;, 
line 648, in run
     runApp(config)
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/scripts/twistd.py&quot;, line 
25, in runApp
     _SomeApplicationRunner(config).run()
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/application/app.py&quot;, 
line 379, in run
     self.application = self.createOrGetApplication()
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/application/app.py&quot;, 
line 444, in createOrGetApplication
     application = getApplication(self.config, passphrase)
--- &lt;exception caught here&gt; ---
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/application/app.py&quot;, 
line 455, in getApplication
     application = service.loadApplication(filename, style, passphrase)
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/application/service.py&quot;, 
line 411, in loadApplication
     passphrase)
   File 
&quot;/usr/local/lib/python2.7/site-packages/twisted/persisted/sob.py&quot;, line 
223, in loadValueFromFile
     eval(codeObj, d, d)
   File &quot;service.tac&quot;, line 7, in &lt;module&gt;
     import mymodule
exceptions.ImportError: No module named mymodule


Failed to load application: No module named mymodule
----------------------------------------


The errors comes down to this: twistd script does not add current 
working directory to python path (or removes it, I don't know what 
exactly happens), so it fails to import any packages/modules from it. 
The issue does not appear in previous version (Twisted 16.3.2).

Any ideas what caused it?



</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63241">[ date ]</a>
              <a href="thread.html#63241">[ thread ]</a>
              <a href="subject.html#63241">[ subject ]</a>
              <a href="author.html#63241">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
