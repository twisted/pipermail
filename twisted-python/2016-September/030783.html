<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22twistd%22%20in%20Twisted%2016.4.0%20can%27t%20import%0A%20modules/packages%20from%20current%20working%20directory&In-Reply-To=%3C20160901153550.GA29410%40hammal%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030781.html">
   <LINK REL="Next"  HREF="030782.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory</H1>
    <B>Mark Williams</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22twistd%22%20in%20Twisted%2016.4.0%20can%27t%20import%0A%20modules/packages%20from%20current%20working%20directory&In-Reply-To=%3C20160901153550.GA29410%40hammal%3E"
       TITLE="[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory">markrwilliams at gmail.com
       </A><BR>
    <I>Thu Sep  1 09:35:51 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030781.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
</A></li>
        <LI>Next message: <A HREF="030782.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import	modules/packages from current working directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30783">[ date ]</a>
              <a href="thread.html#30783">[ thread ]</a>
              <a href="subject.html#30783">[ subject ]</a>
              <a href="author.html#30783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Sep 01, 2016 at 08:42:02PM +0700, Yuri wrote:
&gt;<i> The errors comes down to this: twistd script does not add current working
</I>&gt;<i> directory to python path (or removes it, I don't know what exactly happens),
</I>&gt;<i> so it fails to import any packages/modules from it. The issue does not
</I>&gt;<i> appear in previous version (Twisted 16.3.2).
</I>&gt;<i>
</I>&gt;<i> Any ideas what caused it?
</I>&gt;<i>
</I>The commits that closed this ticket:
<A HREF="http://twistedmatrix.com/trac/ticket/8491">http://twistedmatrix.com/trac/ticket/8491</A>

Generally:
<A HREF="https://github.com/twisted/twisted/commit/c5a4c635de259cd1b92a555c930aa426164f9cce">https://github.com/twisted/twisted/commit/c5a4c635de259cd1b92a555c930aa426164f9cce</A>
Specifically:
<A HREF="https://github.com/twisted/twisted/commit/c5a4c635de259cd1b92a555c930aa426164f9cce#diff-a7270bb5043e420fd7a98b81e48ac082">https://github.com/twisted/twisted/commit/c5a4c635de259cd1b92a555c930aa426164f9cce#diff-a7270bb5043e420fd7a98b81e48ac082</A>

The bin/twistd script would add the current working directory to
sys.path prior to running the actual twistd logic.  This was not
ported over.

I'm going to say that was a conscious decision, as it coincided with
moving twisted to a src/ layout and a fair bit of discussion (visible
in that ticket) about how these changes have made trial only discover
installed code and not whatever's in the current working directory.

To a developer of Twisted it's clear that the project's trying to
replace magical code discovery with boring code importing.  To a user,
that's not clear, and we need to clearly document this.

Being a Twisted developer, I do think in general that it's better to
install your code into an existing sys.path entry instead of adding a
sys.path entry that contains your code.

Would this be difficult for your application, and if so, why?  If it's
possible to make it easier for your application I'd like to help.

Thanks for using Twisted!

-Mark

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030781.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
</A></li>
	<LI>Next message: <A HREF="030782.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import	modules/packages from current working directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30783">[ date ]</a>
              <a href="thread.html#30783">[ thread ]</a>
              <a href="subject.html#30783">[ subject ]</a>
              <a href="author.html#30783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
