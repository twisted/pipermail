<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Endpoint composition syntax
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3CCAKF%3D%2Bdgexw%2B23iGUNhc_%2BTnJV8c93eZLBx3Ev27cTUyDGzoCDA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063252.html">
   <LINK REL="Next"  HREF="030793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Endpoint composition syntax</H1>
    <B>Kevin Conway</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3CCAKF%3D%2Bdgexw%2B23iGUNhc_%2BTnJV8c93eZLBx3Ev27cTUyDGzoCDA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Endpoint composition syntax">kevinjacobconway at gmail.com
       </A><BR>
    <I>Wed Sep  7 07:21:36 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063252.html">[Twisted-Python] Endpoint composition syntax
</A></li>
        <LI>Next message (by thread): <A HREF="030793.html">[Twisted-Python] eliminating MSI builder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63253">[ date ]</a>
              <a href="thread.html#63253">[ thread ]</a>
              <a href="subject.html#63253">[ subject ]</a>
              <a href="author.html#63253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> However, it’s worth highlighting that endpoints are inches away from
</I>being a really powerful composable tool for saying “tunnel this protocol
over this other protocol”.

I'm not sure if this is the same concern as the OP. What you've described
is mixing the ideas of composing protocols and composing transports (which
may be inherent to endpoints). TCP, UDP, and UNIX socks are transport layer
choices and adapting them to each other requires opening new file
descriptors. Protocols are transport agnostic and can already be infinitely
composed if implemented as well behaved protocol wrappers.

On Wed, Sep 7, 2016, 07:26 Cory Benfield &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">cory at lukasa.co.uk</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On 7 Sep 2016, at 00:05, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sep 6, 2016, at 11:55 AM, Tristan Seligmann &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Currently there is no way to explicitly compose Twisted endpoints, but
</I>&gt;<i> several endpoint implementations have arisen that explicitly wrap another
</I>&gt;<i> endpoint, and so have needed a way to do this. So far, this has been
</I>&gt;<i> implementing by passing in an endpoint description, and then calling
</I>&gt;<i> serverFromString/clientFromString internally in the endpoint to construct
</I>&gt;<i> the wrapped endpoint. I've seen two different ways of encoding the &quot;inner&quot;
</I>&gt;<i> endpoint:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Some other points to keep in mind for this discussion:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    1. We may want a syntax that supports composing multiple endpoints,
</I>&gt;<i>    not just 2.
</I>&gt;<i>    2. The existing syntax is kind of crummy; &quot;:&quot; as a separator has
</I>&gt;<i>    serious problems, considering its presence in both URLs and IPv6 literals.
</I>&gt;<i>    I wouldn't say we should *necessarily* re-design the whole syntax to
</I>&gt;<i>    accommodate this, but just having a whole new syntax might not be a bad
</I>&gt;<i>    thing either.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I mentioned this casually to Tristan in IRC, but the current syntax and
</I>&gt;<i> use of endpoints in Twisted gets close to a quite profound idea about
</I>&gt;<i> protocol nesting that is lurking in the space of convention. Extending the
</I>&gt;<i> endpoint syntax to have a blessed way of essentially composing endpoints
</I>&gt;<i> together gives the potential of using the endpoint syntax to design and
</I>&gt;<i> implement various “tunneling” features that are very useful.
</I>&gt;<i>
</I>&gt;<i> If we take the arrow syntax, for a moment, you could conceive a truly
</I>&gt;<i> insane client wanting to write an endpoint to run FTP over that’s a bit
</I>&gt;<i> like:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> tcp:host=someftp.server:port=21-&gt;http:verb=connect-&gt;tcp:-&gt;socks5:targetname=mypersonalhttpproxy.server-&gt;tcp:host=mycorporatesocksproxy.server:port=2121
</I>&gt;<i>
</I>&gt;<i> This would represent tunneling FTP over TCP over HTTP over TCP over SOCKS
</I>&gt;<i> over TCP. For extra fun you can throw in some Tor.
</I>&gt;<i>
</I>&gt;<i> Alternatively, and quite a bit more realistically, you could have a
</I>&gt;<i> userspace SCTP implementation that supports being tunnelled over UDP. In
</I>&gt;<i> this instance, rather than write a single “sctp-over-udp” endpoint, you
</I>&gt;<i> could write a generic sctp endpoint that, if it is composed with another
</I>&gt;<i> endpoint, expects that endpoint to provide a datagram-style transport to it.
</I>&gt;<i>
</I>&gt;<i> All of this is rather pie in the sky, and potentially the purest example
</I>&gt;<i> of YAGNI that it’s possible to imagine. However, it’s worth highlighting
</I>&gt;<i> that endpoints are inches away from being a really powerful composable tool
</I>&gt;<i> for saying “tunnel this protocol over this other protocol”. We may not
</I>&gt;<i> *want* that, but it’s an interesting thought.
</I>&gt;<i>
</I>&gt;<i> Cory
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160907/451f122c/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063252.html">[Twisted-Python] Endpoint composition syntax
</A></li>
	<LI>Next message (by thread): <A HREF="030793.html">[Twisted-Python] eliminating MSI builder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63253">[ date ]</a>
              <a href="thread.html#63253">[ thread ]</a>
              <a href="subject.html#63253">[ subject ]</a>
              <a href="author.html#63253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
