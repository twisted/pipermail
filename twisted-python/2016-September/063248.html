<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Endpoint composition syntax
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3CCAMcKhMQ%2B3F4w%2BZqyz7TX4NfMySCupsXFTFy2Y8xD-cXHTjHh1A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Endpoint composition syntax</H1>
    <B>Tristan Seligmann</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3CCAMcKhMQ%2B3F4w%2BZqyz7TX4NfMySCupsXFTFy2Y8xD-cXHTjHh1A%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Endpoint composition syntax">mithrandi at mithrandi.net
       </A><BR>
    <I>Tue Sep  6 12:55:03 MDT 2016</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63248">[ date ]</a>
              <a href="thread.html#63248">[ thread ]</a>
              <a href="subject.html#63248">[ subject ]</a>
              <a href="author.html#63248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm kicking off this discussion on the mailing list as I don't have
anything well-formed enough to take to the bug tracker, and I am hoping to
get some more engagement on the matter.

Currently there is no way to explicitly compose Twisted endpoints, but
several endpoint implementations have arisen that explicitly wrap another
endpoint, and so have needed a way to do this. So far, this has been
implementing by passing in an endpoint description, and then calling
serverFromString/clientFromString internally in the endpoint to construct
the wrapped endpoint. I've seen two different ways of encoding the &quot;inner&quot;
endpoint:

1. Backslash escaping; for example:

tls:awesome.site.example.com:443:endpoint=tcp\:7.6.5.4\:443

This has the advantage that it is endlessly nestable, for example:

tls:internal.hostname.whatever:42:endpoint=tls\:awesome.site.example.com
\:443\:endpoint=tcp\\\:7.6.5.4\\\:443

It has the disadvantage that it is a bit tricky to read and write.

2. Splitting keyword and positional arguments; for example:

txsni:/srv/certs:tcp:443

This has the advantage that it is easier to read and write, but the
disadvantage that it isn't nestable. It also starts to break down when you
have a lot of parameters, as the positional syntax becomes much harder to
read.

Neither of these solutions is entirely satisfactory; I initially followed
approach 2 for txacme, but now that I need to add more parameters to the
le:/lets: endpoints, it is starting to break down.

Cory suggested a third possibility; an explicit syntax for composing
endpoints. In this model, the endpoint string parsing machinery would
construct the different endpoints, and compose them together (presumably
the API of the parsers would need to be extended a bit for this). For
example:

tls:awesome.site.example.com:443-&gt;tcp:7.6.5.4:443

A less whimsical syntax than &quot;-&gt;&quot; might be better; for example, semicolons,
or something like that.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160906/d3de1850/attachment-0002.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63248">[ date ]</a>
              <a href="thread.html#63248">[ thread ]</a>
              <a href="subject.html#63248">[ subject ]</a>
              <a href="author.html#63248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
