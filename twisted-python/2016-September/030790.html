<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Endpoint composition syntax
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3CCAKF%3D%2Bdi9h1%2Bsd5MfinqsFsAeiW%2BmEAedAVcVYgMh%3D98gFGc8Qw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030789.html">
   <LINK REL="Next"  HREF="030791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Endpoint composition syntax</H1>
    <B>Kevin Conway</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3CCAKF%3D%2Bdi9h1%2Bsd5MfinqsFsAeiW%2BmEAedAVcVYgMh%3D98gFGc8Qw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Endpoint composition syntax">kevinjacobconway at gmail.com
       </A><BR>
    <I>Tue Sep  6 20:11:33 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030789.html">[Twisted-Python] Endpoint composition syntax
</A></li>
        <LI>Next message: <A HREF="030791.html">[Twisted-Python] Endpoint composition syntax
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30790">[ date ]</a>
              <a href="thread.html#30790">[ thread ]</a>
              <a href="subject.html#30790">[ subject ]</a>
              <a href="author.html#30790">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm not opposed to a fresh syntax, but I do believe the current
implementation can be used for composition. The parser for endpoint strings
is simplistic, like Glyph points out, but there is nothing preventing it
from having nested endpoint definitions. We used the existing syntax when
writing the HAProxy endpoint wrapper:
<A HREF="https://github.com/twisted/twisted/blob/trunk/src/twisted/protocols/haproxy/_parser.py">https://github.com/twisted/twisted/blob/trunk/src/twisted/protocols/haproxy/_parser.py</A>
.

Granted, this case doesn't come with any configuration options but it shows
a potential path for adding wrapping functionality in the current
implementation. I think are some downsides when it comes to args, kwargs
management. To support them across multiple, arbitrary nested endpoints the
kwargs would need to have non-colliding names and the wrapper would need to
do some amount of introspection on args to determine if the leading values
are for it or another endpoint.

I don't think the developer experience would be a good one, but there _is_
a way to compose endpoints if you're set on doing so.

On Tue, Sep 6, 2016 at 6:08 PM Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i> On Sep 6, 2016, at 11:55 AM, Tristan Seligmann &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Currently there is no way to explicitly compose Twisted endpoints, but
</I>&gt;<i> several endpoint implementations have arisen that explicitly wrap another
</I>&gt;<i> endpoint, and so have needed a way to do this. So far, this has been
</I>&gt;<i> implementing by passing in an endpoint description, and then calling
</I>&gt;<i> serverFromString/clientFromString internally in the endpoint to construct
</I>&gt;<i> the wrapped endpoint. I've seen two different ways of encoding the &quot;inner&quot;
</I>&gt;<i> endpoint:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Some other points to keep in mind for this discussion:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    1. We may want a syntax that supports composing multiple endpoints,
</I>&gt;<i>    not just 2.
</I>&gt;<i>    2. The existing syntax is kind of crummy; &quot;:&quot; as a separator has
</I>&gt;<i>    serious problems, considering its presence in both URLs and IPv6 literals.
</I>&gt;<i>    I wouldn't say we should *necessarily* re-design the whole syntax to
</I>&gt;<i>    accommodate this, but just having a whole new syntax might not be a bad
</I>&gt;<i>    thing either.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160907/cae21253/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160907/cae21253/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030789.html">[Twisted-Python] Endpoint composition syntax
</A></li>
	<LI>Next message: <A HREF="030791.html">[Twisted-Python] Endpoint composition syntax
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30790">[ date ]</a>
              <a href="thread.html#30790">[ thread ]</a>
              <a href="subject.html#30790">[ subject ]</a>
              <a href="author.html#30790">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
