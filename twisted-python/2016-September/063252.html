<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Endpoint composition syntax
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3C018ED295-4055-4EC4-AF38-C9558A858309%40lukasa.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063251.html">
   <LINK REL="Next"  HREF="063253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Endpoint composition syntax</H1>
    <B>Cory Benfield</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Endpoint%20composition%20syntax&In-Reply-To=%3C018ED295-4055-4EC4-AF38-C9558A858309%40lukasa.co.uk%3E"
       TITLE="[Twisted-Python] Endpoint composition syntax">cory at lukasa.co.uk
       </A><BR>
    <I>Wed Sep  7 06:23:33 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063251.html">[Twisted-Python] Endpoint composition syntax
</A></li>
        <LI>Next message (by thread): <A HREF="063253.html">[Twisted-Python] Endpoint composition syntax
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63252">[ date ]</a>
              <a href="thread.html#63252">[ thread ]</a>
              <a href="subject.html#63252">[ subject ]</a>
              <a href="author.html#63252">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 7 Sep 2016, at 00:05, Glyph Lefkowitz &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> On Sep 6, 2016, at 11:55 AM, Tristan Seligmann &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Currently there is no way to explicitly compose Twisted endpoints, but several endpoint implementations have arisen that explicitly wrap another endpoint, and so have needed a way to do this. So far, this has been implementing by passing in an endpoint description, and then calling serverFromString/clientFromString internally in the endpoint to construct the wrapped endpoint. I've seen two different ways of encoding the &quot;inner&quot; endpoint:
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Some other points to keep in mind for this discussion:
</I>&gt;<i> 
</I>&gt;<i> We may want a syntax that supports composing multiple endpoints, not just 2.
</I>&gt;<i> The existing syntax is kind of crummy; &quot;:&quot; as a separator has serious problems, considering its presence in both URLs and IPv6 literals.  I wouldn't say we should necessarily re-design the whole syntax to accommodate this, but just having a whole new syntax might not be a bad thing either.
</I>
I mentioned this casually to Tristan in IRC, but the current syntax and use of endpoints in Twisted gets close to a quite profound idea about protocol nesting that is lurking in the space of convention. Extending the endpoint syntax to have a blessed way of essentially composing endpoints together gives the potential of using the endpoint syntax to design and implement various “tunneling” features that are very useful.

If we take the arrow syntax, for a moment, you could conceive a truly insane client wanting to write an endpoint to run FTP over that’s a bit like:

    tcp:host=someftp.server:port=21-&gt;http:verb=connect-&gt;tcp:-&gt;socks5:targetname=mypersonalhttpproxy.server-&gt;tcp:host=mycorporatesocksproxy.server:port=2121

This would represent tunneling FTP over TCP over HTTP over TCP over SOCKS over TCP. For extra fun you can throw in some Tor.

Alternatively, and quite a bit more realistically, you could have a userspace SCTP implementation that supports being tunnelled over UDP. In this instance, rather than write a single “sctp-over-udp” endpoint, you could write a generic sctp endpoint that, if it is composed with another endpoint, expects that endpoint to provide a datagram-style transport to it.

All of this is rather pie in the sky, and potentially the purest example of YAGNI that it’s possible to imagine. However, it’s worth highlighting that endpoints are inches away from being a really powerful composable tool for saying “tunnel this protocol over this other protocol”. We may not *want* that, but it’s an interesting thought.

Cory

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160907/b9a0f39b/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063251.html">[Twisted-Python] Endpoint composition syntax
</A></li>
	<LI>Next message (by thread): <A HREF="063253.html">[Twisted-Python] Endpoint composition syntax
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63252">[ date ]</a>
              <a href="thread.html#63252">[ thread ]</a>
              <a href="subject.html#63252">[ subject ]</a>
              <a href="author.html#63252">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
