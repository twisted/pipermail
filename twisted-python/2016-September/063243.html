<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import	modules/packages from current working directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22twistd%22%20in%20Twisted%2016.4.0%20can%27t%20import%0A%09modules/packages%20from%20current%20working%20directory&In-Reply-To=%3CC6F37597-5AF5-4AC7-80BB-07153F4D4824%40atleastfornow.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="063244.html">
   <LINK REL="Next"  HREF="063245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import	modules/packages from current working directory</H1>
    <B>Amber &quot;Hawkie&quot; Brown</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%22twistd%22%20in%20Twisted%2016.4.0%20can%27t%20import%0A%09modules/packages%20from%20current%20working%20directory&In-Reply-To=%3CC6F37597-5AF5-4AC7-80BB-07153F4D4824%40atleastfornow.net%3E"
       TITLE="[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import	modules/packages from current working directory">hawkowl at atleastfornow.net
       </A><BR>
    <I>Thu Sep  1 09:36:12 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="063244.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
</A></li>
        <LI>Next message (by thread): <A HREF="063245.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63243">[ date ]</a>
              <a href="thread.html#63243">[ thread ]</a>
              <a href="subject.html#63243">[ subject ]</a>
              <a href="author.html#63243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On 1 Sep 2016, at 21:42, Yuri &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">yuri_abzyanov at fastmail.fm</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi all
</I>&gt;<i> 
</I>&gt;<i> I couldn't find Twisted-specific group, so posting here.
</I>&gt;<i> 
</I>&gt;<i> Recently Twisted 16.4.0 got released. Yesterday I've tried to upgrade it for my apps and got an error.
</I>&gt;<i> 
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> The errors comes down to this: twistd script does not add current working directory to python path (or removes it, I don't know what exactly happens), so it fails to import any packages/modules from it. The issue does not appear in previous version (Twisted 16.3.2).
</I>&gt;<i> 
</I>&gt;<i> Any ideas what caused it?
</I>
Yes -- we moved to using setuptools console scripts, and these console scripts don't add &quot;.&quot; to the PYTHONPATH. We realised this in prerelease but decided against fixing it, as it adding the current working dir to the PATH has lead to a lot of  subtle bugs in the past and this is a good chance to make a break from them.

So, in short, this is expected behaviour -- we generally want people to be running twistd, trial, etc on *installed* Python packages -- testing or running from checkouts often hides many bugs about what is or isn't included in the installed package by accident. If you rely on this behaviour, though, set the PYTHONPATH environment variable to &quot;.&quot; -- e.g. `env PYTHONPATH=. twistd -n myplugin`.

- Amber
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: &lt;/pipermail/twisted-python/attachments/20160901/3683747c/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="063244.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
</A></li>
	<LI>Next message (by thread): <A HREF="063245.html">[Twisted-Python] &quot;twistd&quot; in Twisted 16.4.0 can't import modules/packages from current working directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63243">[ date ]</a>
              <a href="thread.html#63243">[ thread ]</a>
              <a href="subject.html#63243">[ subject ]</a>
              <a href="author.html#63243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
