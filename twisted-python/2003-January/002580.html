<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Writing Unittests for Twisted Applications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20Unittests%20for%20Twisted%20Applications&In-Reply-To=6qptr943ke.fsf%40salmakis.intevation.de">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002579.html">
   <LINK REL="Next"  HREF="002581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Writing Unittests for Twisted Applications</H1>
    <B>Bernhard Herzog</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20Unittests%20for%20Twisted%20Applications&In-Reply-To=6qptr943ke.fsf%40salmakis.intevation.de"
       TITLE="[Twisted-Python] Writing Unittests for Twisted Applications">bh at intevation.de
       </A><BR>
    <I>Tue Jan  7 10:09:34 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002579.html">[Twisted-Python] Writing Unittests for Twisted Applications
</A></li>
        <LI>Next message: <A HREF="002581.html">[Twisted-Python] twisted.lore: `class=&quot;API&quot; base=&quot;twisted.foo&quot;' feature broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2580">[ date ]</a>
              <a href="thread.html#2580">[ thread ]</a>
              <a href="subject.html#2580">[ subject ]</a>
              <a href="author.html#2580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wrote:

[Mixin classes for tests that use reactors]
&gt;<i> The test base class is finally publically available inder GPL for now:
</I>&gt;<i> <A HREF="http://www.intevation.de/cgi-bin/viewcvs-greater.cgi/*checkout*/GREAT-ERModel/test/reactormixins.py?rev=1.1&amp;content-type=text/plain">http://www.intevation.de/cgi-bin/viewcvs-greater.cgi/*checkout*/GREAT-ERModel/test/reactormixins.py?rev=1.1&amp;content-type=text/plain</A>
</I>
Someone asked for a usage example in private mail. There are a few test
cases in the same CVS repository that use the mix-ins, but more
illustrative is probably a very simple example like this:


import unittest

from reactormixins import ReactorMixin

class Test(unittest.TestCase, ReactorMixin):

    def setUp(self):
        &quot;&quot;&quot;Extend inherited method to set later_has_been_called to 0&quot;&quot;&quot;
        self.later_has_been_called = 0
        ReactorMixin.setUp(self)

    def test(self):
        &quot;&quot;&quot;Simple test to show how to use ReactorMixin&quot;&quot;&quot;
        # scheduler self.later to be run after 0.1 seconds
        self.callLater(0.1, self.later)

        # run the reactor with a 10s time out
        self.run_reactor(10)

        self.assert_(self.later_has_been_called)

    def later(self):
        &quot;&quot;&quot;Record that later has been called and stop the reactor&quot;&quot;&quot;
        self.later_has_been_called = 1
        self.stop_reactor()

if __name__ == &quot;__main__&quot;:
    unittest.main()


This example doesn't do any networking but should give an idea of how to
use the mixin classes.

The networking support in the mixins is currently limited to listening
because that all I needed so far. My testcases start sub-processes that
connect to the reactor in the test case.

   Bernhard

-- 
Intevation GmbH                                 <A HREF="http://intevation.de/">http://intevation.de/</A>
Sketch                                 <A HREF="http://sketch.sourceforge.net/">http://sketch.sourceforge.net/</A>
MapIt!                                           <A HREF="http://www.mapit.de/">http://www.mapit.de/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002579.html">[Twisted-Python] Writing Unittests for Twisted Applications
</A></li>
	<LI>Next message: <A HREF="002581.html">[Twisted-Python] twisted.lore: `class=&quot;API&quot; base=&quot;twisted.foo&quot;' feature broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2580">[ date ]</a>
              <a href="thread.html#2580">[ thread ]</a>
              <a href="subject.html#2580">[ subject ]</a>
              <a href="author.html#2580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
