<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] deferreds, and .rpy resources
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20deferreds%2C%20and%20.rpy%20resources&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002682.html">
   <LINK REL="Next"  HREF="002685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] deferreds, and .rpy resources</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20deferreds%2C%20and%20.rpy%20resources&In-Reply-To="
       TITLE="[Twisted-Python] deferreds, and .rpy resources">ldanielburr at earthlink.net
       </A><BR>
    <I>Fri Jan 24 14:08:30 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002682.html">[Twisted-Python] deferreds, and .rpy resources
</A></li>
        <LI>Next message: <A HREF="002685.html">[Twisted-Python] Woven Refactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2683">[ date ]</a>
              <a href="thread.html#2683">[ thread ]</a>
              <a href="subject.html#2683">[ subject ]</a>
              <a href="author.html#2683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 24 Jan 2003 00:39:36 -0800, Dave Peticolas wrote:
&gt;<i>On Thu, 2003-01-23 at 17:25, L. Daniel Burr wrote:
</I>&gt;&gt;<i>Of course, you could also use twisted.enterprise.adbapi,
</I>&gt;&gt;<i>but I've experienced a lot of memory leaks occurring when
</I>&gt;&gt;<i>going that route, so I just use deferToThread instead.
</I>&gt;<i>
</I>&gt;<i>I'm about to start using t.e.adbapi pretty heavily, so I'm
</I>&gt;<i>interested in this report. Do you have more details?
</I>&gt;<i>
</I>&gt;<i>thanks,
</I>&gt;<i>dave
</I>
To be clear, I definitely *haven't* been using adbapi heavily up
until this point.  The problem I experienced occurred around the
time of Twisted 1.0.1 final, and deadlines prevented my doing any
exhaustive testing.

The scenario was pretty basic:  Connect to an Oracle database,
perform a query, return the result.  Using adbapi from Twisted
1.0.1 and the cx_Oracle DBAPI module, the twistd process showed
steady growth in size.  Each time the code executed, the process
would grow by 10-50k, never releasing any memory.

The same scenario, using DCOracle2, showed similar leakage.
Having insufficient time to debug the thing, I went with the
process of elimination, and started using deferToThread instead
of adbapi, and the leak was gone.  That does not in any way prove
that adbapi is the root cause, only that it may be involved in
some way.

This was all on Win32, by the way, so I have no idea if it is an
issue on Linux or Solaris.  In any case, I'll get a chance to revisit the issue shortly, and I'll report my findings.

L. Daniel Burr


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002682.html">[Twisted-Python] deferreds, and .rpy resources
</A></li>
	<LI>Next message: <A HREF="002685.html">[Twisted-Python] Woven Refactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2683">[ date ]</a>
              <a href="thread.html#2683">[ thread ]</a>
              <a href="subject.html#2683">[ subject ]</a>
              <a href="author.html#2683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
