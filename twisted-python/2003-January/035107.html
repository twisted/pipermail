<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] RE: How do I upload files using FTPClient?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RE%3A%20How%20do%20I%20upload%20files%20using%20FTPClient%3F&In-Reply-To=%3CSpringmail.0994.1042519113.0.44339500%40webmail.pas.earthlink.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="035106.html">
   <LINK REL="Next"  HREF="035115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] RE: How do I upload files using FTPClient?</H1>
    <B> Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20RE%3A%20How%20do%20I%20upload%20files%20using%20FTPClient%3F&In-Reply-To=%3CSpringmail.0994.1042519113.0.44339500%40webmail.pas.earthlink.net%3E"
       TITLE="[Twisted-Python] RE: How do I upload files using FTPClient?">ldanielburr at earthlink.net
       </A><BR>
    <I>Mon Jan 13 21:38:33 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="035106.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
        <LI>Next message (by thread): <A HREF="035115.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35107">[ date ]</a>
              <a href="thread.html#35107">[ thread ]</a>
              <a href="subject.html#35107">[ subject ]</a>
              <a href="author.html#35107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 14 Jan 2003 at 13:21:54 +1100,  Andrew Bennetts wrote:
&gt;<i>On Mon, Jan 13, 2003 at 05:14:26PM -0800,  Daniel Burr wrote:
</I>&gt;&gt;<i> That would be awesome; I'd be interested in contributing some
</I>code/tests/docs
&gt;&gt;<i> for the revised module.
</I>&gt;<i>
</I>&gt;<i>Now *that* would be awesome! :)
</I>
Well, I think I grok the whole Deferred thing now,
and I'm poring over the Twisted developer docs for
information about contributing.  The only hurdle I
have to clear is getting up to speed with CVS.

It looks like the best place to start is writing
some tests for the proposed &quot;high-level&quot; ftp
interface.  That should help me to define it.

&gt;&gt;<i> I've been going over the existing python ftplib.FTP code, as well as
</I>&gt;&gt;<i> twisted.protocols.ftp.FTPClient, and I'm left wondering one thing:  Why
</I>don't
&gt;&gt;<i> either of these classes implement the client commands in the manner that
</I>your
&gt;&gt;<i> typical command-line FTP client does?  I think FTPClient should have simple
</I>&gt;&gt;<i> methods, like &quot;binary&quot;, &quot;get&quot;, &quot;mget&quot;, &quot;mkdir&quot;, et cetera.  From the
</I>&gt;&gt;<i> developer's viewpoint, you'd just use FTPClient in the same manner as you
</I>&gt;&gt;<i> would an interactive ftp client session; the actual queueing of commands,
</I>&gt;&gt;<i> creation of Deferreds, and callbacks could be hidden away a little more
</I>easily
&gt;&gt;<i> then, and make life easier for developers just looking to roll a simple FTP
</I>&gt;&gt;<i> client application using Twisted.
</I>&gt;<i>
</I>&gt;<i>Indeed.  FTPClient is already almost this simple
</I>&gt;<i>for simple FTP commands, ones that don't require
</I>&gt;<i>opening a data socket.  This is stuff like CWD,
</I>&gt;<i>MKD,etc.  The only unfriendly thing about it is
</I>&gt;<i>it currently doesn't offer much help with parsing
</I>&gt;<i>the response, beyond stating that it is a success
</I>&gt;<i>or a failure (by calling your Deferred's callback
</I>&gt;<i>or errback) -- but that's probably all you care
</I>&gt;<i>about.
</I>
Yep, for those basic commands I think we are well
covered.

As for parsing the response, I noticed that the
effbot has some ftp-parsing code, I'll take a look
at that, and see if it contains any ideas.

&gt;<i>There are a fair few of these I haven't wrapped
</I>&gt;<i>up yet, for instance &quot;binary&quot; (which is the &quot;TYPE
</I>&gt;<i>I&quot; command, and I issue that automatically on log
</I>&gt;<i>in anyway -- is there ever any time when you
</I>&gt;<i>*don't* want this?).
</I>
Not that I can think of; the first thing I always
do in an interactive FTP session is to issue the
&quot;binary&quot; command.

&gt;<i>The problem is &quot;get&quot;, which is not that simple,
</I>&gt;<i>let alone stuff like mget that has no one-to-one
</I>&gt;<i>analogy with the raw protocol.  I don't think
</I>&gt;<i>FTPClient should be restricted to thinking
</I>&gt;<i>everything is a file on disk -- you may want to
</I>&gt;<i>process the data incrementally in another way [I
</I>&gt;<i>certainly did :) ].  Of course, most of the time,
</I>&gt;<i>you probably want to just write it to a file.
</I>
To be honest, I can't think of a single scenario
in which I wouldn't be using FTP to put a file
to disk or get a file from disk.  Granted, I am
not blessed with much in the way of imagination...
;)

&gt;<i>Thus I think I may need two layers; the current
</I>&gt;<i>FTPClient is the low-level plumbing that you
</I>&gt;<i>don't interact with unless you need it's
</I>&gt;<i>generality, and then there's a higher-level
</I>&gt;<i>interface that provides things like mget.  It's
</I>&gt;<i>entirely possible that I can fit this all into
</I>&gt;<i>one class after all, but I'm not sure yet.
</I>
I think putting it all into twisted.protocols.ftp
would suffice.  All in one class sounds harder.

&gt;<i>So in summary, I want to allow for nifty/insane
</I>&gt;<i>things like directly funnelling data from e.g. an
</I>&gt;<i>HTTP download into an FTP upload -- but I also
</I>&gt;<i>want a class that's straightforward to use in the
</I>&gt;<i>common case as well.
</I>
This sounds fine to me; obviously I'm really only
interested in the common case, but nifty/insane
stuff is cool too. ;)

&gt;<i>What I'd really like from you, if you don't mind,
</I>&gt;<i>is a sketch of what *you* think the API should
</I>&gt;<i>look like for the high-level interface.
</I>&gt;<i>Hopefully that'll help me design this in a way
</I>&gt;<i>that satisfies everyone :)
</I>&gt;<i>
</I>&gt;<i>-Andrew.
</I>
I think the API for the high-level client should
basically be identical to what you would use for
an interactive FTP session.  I'll do some thinking
on this and post a rough draft by the weekend.

L. Daniel Burr


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="035106.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
	<LI>Next message (by thread): <A HREF="035115.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35107">[ date ]</a>
              <a href="thread.html#35107">[ thread ]</a>
              <a href="subject.html#35107">[ subject ]</a>
              <a href="author.html#35107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
