<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PB , authorizor, getIdentRequest
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PB%20%2C%20authorizor%2C%20getIdentRequest&In-Reply-To=%3C20030201003907.GB16606%40frobozz.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="035227.html">
   <LINK REL="Next"  HREF="002720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PB , authorizor, getIdentRequest</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20PB%20%2C%20authorizor%2C%20getIdentRequest&In-Reply-To=%3C20030201003907.GB16606%40frobozz.local%3E"
       TITLE="[Twisted-Python] PB , authorizor, getIdentRequest">andrew-twisted at puzzling.org
       </A><BR>
    <I>Fri Jan 31 17:39:08 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="035227.html">[Twisted-Python] PB , authorizor, getIdentRequest
</A></li>
        <LI>Next message (by thread): <A HREF="002720.html">[Twisted-Python] Webchat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35229">[ date ]</a>
              <a href="thread.html#35229">[ thread ]</a>
              <a href="subject.html#35229">[ subject ]</a>
              <a href="author.html#35229">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jan 31, 2003 at 12:09:23PM -0800, Eric Merritt wrote:
&gt;<i> 
</I>[..snip..]
&gt;<i>  At this point you could authorize yourself based on
</I>&gt;<i> the database and make calls to the server, and all was
</I>&gt;<i> good.
</I>&gt;<i> 
</I>&gt;<i>  At that point I was pretty happy but I noticed that
</I>&gt;<i> within the code for dbcred it makes a call to
</I>&gt;<i> threads.defferToTread. Me being me, I thought to
</I>&gt;<i> myself 'I am not using threads, so why am I using
</I>&gt;<i> this?' and I took it out. So I changed it, and am
</I>&gt;<i> simply returning a deffered object that has a callback
</I>&gt;<i> that returns the identity object, and it fails. In any
</I>&gt;<i> case, I was wondering if any one had any idea of why
</I>&gt;<i> removing the thread specific code causes it to fail.
</I>
Standard Python DB-API 2.0 modules are synchronous, i.e. they block while
they wait for results.  dbcred.DatabaseAuthorizer uses
twisted.enterprise.adbapi to talk with your database, and adbapi uses
threads so that it can present an asynchronous interface to the database
while using standard DB-API compliant modules (see the Introduction to
Twisted Enterprise HOWTO for details).

So unfortunately, database access does involve threads -- but Twisted takes
care of it all for you behind the scenes when you use twisted.enterprise, so
you can basically pretend they don't exist :)

I don't know why your specific change would fail, but it would cause
problems due to blocking -- remember that database queries can take an
arbitarily long amount of time to be processed, particularly under load.  My
advice is to just use the standard dbcred module as-is, if you can.

&gt;<i> Also in a completly unrelated question, is it possible
</I>&gt;<i> for the server to make calles on the client? I figure
</I>&gt;<i> this is possible by passing a referencable object to
</I>&gt;<i> the server perspective, but I thought I would get a
</I>&gt;<i> little advice before I started playing with it.
</I>
I know you can do this by getting the client to pass the server a reference
to itself, which the server can then do .callRemote on (just as the client
can do .callRemote on the server).  I'm not sure if there's a better way;
someone who knows more about PB that I do will have to tell you :)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="035227.html">[Twisted-Python] PB , authorizor, getIdentRequest
</A></li>
	<LI>Next message (by thread): <A HREF="002720.html">[Twisted-Python] Webchat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35229">[ date ]</a>
              <a href="thread.html#35229">[ thread ]</a>
              <a href="subject.html#35229">[ subject ]</a>
              <a href="author.html#35229">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
