<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] RE: How do I upload files using FTPClient?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20RE%3A%20How%20do%20I%20upload%20files%20using%20FTPClient%3F&In-Reply-To=Springmail.0994.1042506866.0.73757900%40webmail.pas.earthlink.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002596.html">
   <LINK REL="Next"  HREF="002599.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] RE: How do I upload files using FTPClient?</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20RE%3A%20How%20do%20I%20upload%20files%20using%20FTPClient%3F&In-Reply-To=Springmail.0994.1042506866.0.73757900%40webmail.pas.earthlink.net"
       TITLE="[Twisted-Python] RE: How do I upload files using FTPClient?">andrew-twisted at puzzling.org
       </A><BR>
    <I>Mon Jan 13 21:21:54 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="002596.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
        <LI>Next message: <A HREF="002599.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2598">[ date ]</a>
              <a href="thread.html#2598">[ thread ]</a>
              <a href="subject.html#2598">[ subject ]</a>
              <a href="author.html#2598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 13, 2003 at 05:14:26PM -0800,  Daniel Burr wrote:
&gt;<i> On Wed, Jan 08, 2003 at 23:53:17 +1100 Andrew Bennetts wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt;&gt; Yes, that's my fault.  I haven't gotten around
</I>&gt;<i> &gt;&gt; to that yet -- I might have a stab at it
</I>&gt;<i> &gt;&gt; tonight, it shouldn't actually be that hard.
</I>&gt;<i> &gt;&gt; I'll try to make sure  I get this done in time
</I>&gt;<i> &gt;&gt; for the 1.0.2 release.
</I>&gt;<i> 
</I>&gt;<i> That would be awesome; I'd be interested in contributing some code/tests/docs
</I>&gt;<i> for the revised module.
</I>
Now *that* would be awesome! :)

&gt;<i> &gt; Just letting you know I haven't forgotten about
</I>&gt;<i> &gt; this, but solving this properly really involves
</I>&gt;<i> &gt; refactoring the mess in FTPClient.retrieve...
</I>&gt;<i> &gt; and if I do that properly, it'll make my planned
</I>&gt;<i> &gt; rewrite of the FTP server alot easier, as it
</I>&gt;<i> &gt; ought to be able to re-use the code.
</I>&gt;<i> &gt; Unfortunately this means it might take a few
</I>&gt;<i> &gt; more days before this happens.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -Andrew.
</I>&gt;<i> 
</I>&gt;<i> While you are still thinking about the solution, might I suggest something
</I>&gt;<i> with regard to FTPClient ?
</I>
Of course!  And you'd be welcome to even if I wasn't thinking about it.

&gt;<i> I've been going over the existing python ftplib.FTP code, as well as
</I>&gt;<i> twisted.protocols.ftp.FTPClient, and I'm left wondering one thing:  Why don't
</I>&gt;<i> either of these classes implement the client commands in the manner that your
</I>&gt;<i> typical command-line FTP client does?  I think FTPClient should have simple
</I>&gt;<i> methods, like &quot;binary&quot;, &quot;get&quot;, &quot;mget&quot;, &quot;mkdir&quot;, et cetera.  From the
</I>&gt;<i> developer's viewpoint, you'd just use FTPClient in the same manner as you
</I>&gt;<i> would an interactive ftp client session; the actual queueing of commands,
</I>&gt;<i> creation of Deferreds, and callbacks could be hidden away a little more easily
</I>&gt;<i> then, and make life easier for developers just looking to roll a simple FTP
</I>&gt;<i> client application using Twisted.
</I>
Indeed.  FTPClient is already almost this simple for simple FTP commands,
ones that don't require opening a data socket.  This is stuff like CWD, MKD,
etc.  The only unfriendly thing about it is it currently doesn't offer much
help with parsing the response, beyond stating that it is a success or a
failure (by calling your Deferred's callback or errback) -- but that's
probably all you care about.

There are a fair few of these I haven't wrapped up yet, for instance
&quot;binary&quot; (which is the &quot;TYPE I&quot; command, and I issue that automatically on
log in anyway -- is there ever any time when you *don't* want this?).

The problem is &quot;get&quot;, which is not that simple, let alone stuff like mget
that has no one-to-one analogy with the raw protocol.  I don't think
FTPClient should be restricted to thinking everything is a file on disk --
you may want to process the data incrementally in another way [I certainly
did :) ].  Of course, most of the time, you probably want to just write it
to a file.

Thus I think I may need two layers; the current FTPClient is the low-level
plumbing that you don't interact with unless you need it's generality, and
then there's a higher-level interface that provides things like mget.  It's
entirely possible that I can fit this all into one class after all, but I'm
not sure yet.

So in summary, I want to allow for nifty/insane things like directly
funnelling data from e.g. an HTTP download into an FTP upload -- but I also
want a class that's straightforward to use in the common case as well.

What I'd really like from you, if you don't mind, is a sketch of what *you*
think the API should look like for the high-level interface.  Hopefully
that'll help me design this in a way that satisfies everyone :)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002596.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
	<LI>Next message: <A HREF="002599.html">[Twisted-Python] RE: How do I upload files using FTPClient?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2598">[ date ]</a>
              <a href="thread.html#2598">[ thread ]</a>
              <a href="subject.html#2598">[ subject ]</a>
              <a href="author.html#2598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
