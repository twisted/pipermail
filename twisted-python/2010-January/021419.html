<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] understanding deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20understanding%20deferreds&In-Reply-To=19298.5040.965899.805489%40jon.es">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021416.html">
   <LINK REL="Next"  HREF="021421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] understanding deferreds</H1>
    <B>twisted-web at udmvt.ru</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20understanding%20deferreds&In-Reply-To=19298.5040.965899.805489%40jon.es"
       TITLE="[Twisted-Python] understanding deferreds">twisted-web at udmvt.ru
       </A><BR>
    <I>Fri Jan 29 05:17:22 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021416.html">[Twisted-Python] understanding deferreds
</A></li>
        <LI>Next message: <A HREF="021421.html">[Twisted-Python] understanding deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21419">[ date ]</a>
              <a href="thread.html#21419">[ thread ]</a>
              <a href="subject.html#21419">[ subject ]</a>
              <a href="author.html#21419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jan 28, 2010 at 05:46:08PM -0500, Terry Jones wrote:
&gt;<i> &gt;&gt;&gt;&gt;&gt; &quot;Michael&quot; == Michael P Soulier &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">msoulier at digitaltorque.ca</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;<i> Michael&gt; I'm a bit confused as to the &quot;visual explanation&quot;. It seems like
</I>&gt;<i> Michael&gt; if you have a single callback and errback, that if the errback
</I>&gt;<i> Michael&gt; wants to swallow the error, the callback will not be called at
</I>&gt;<i> Michael&gt; all, since deferred processing will look for the second callback
</I>&gt;<i> Michael&gt; at that point by the diagram.
</I>&gt;<i> 
</I>&gt;<i> Michael&gt; So, right now I'm calling my own callback from the errback if I
</I>&gt;<i> Michael&gt; want to swallow the error. Is there a better way?
</I>&gt;<i> 
</I>&gt;<i> Yes. Add the errback to the deferred and then add the callback.
</I>&gt;<i> 
</I>&gt;<i>   d = somethingReturningADeferred()
</I>&gt;<i>   d.addErrback(cleanup)
</I>&gt;<i>   d.addCallback(dealWithResult)
</I>&gt;<i> 
</I>&gt;<i> If cleanup doesn't return the failure object it's passed or raise some an
</I>&gt;<i> exception, processing will pass to dealWithResult. Note that dealWithResult
</I>&gt;<i> will get as an argument whatever cleanup returns (that means None if cleanup
</I>&gt;<i> doesn't explicitly return something).
</I>&gt;<i> 
</I>&gt;<i> You're thinking about this in the right way. Understanding the difference
</I>&gt;<i> between the above and 
</I>&gt;<i> 
</I>&gt;<i>   d = somethingReturningADeferred()
</I>&gt;<i>   d.addCallbacks(dealWithResult, cleanup)
</I>&gt;<i> 
</I>&gt;<i> is important.
</I>
Is it true, that adding many callback functions as filters is elegant,
but impractical solution?
Since there is only a [linear] list of pairs (callback, errback), the last errbacks
have to be complex to distinguish the failures, that came from the previous callback
from failures, that traverse the errback chain from the beginning.

Should I only use errbacks as a means of catching errors only from who have produced the Deferred?
And never use them to catch errors, that came from my callbacks?

Nevertheless the Deferred mechanism always catch the exceptions in my callbacks,
I have to always catch them myself and never let them out uncontrolled (since I cannot
distinguish, say TypeError that came from the first callback from TypeError, that came
from the next callback, and they are not the same for me, since I try to do a cleanup)?
But then I have to translate all errors to my invented exceptions, so they will differ.

Or may I pause() a Deferred in a errback, after I have processed the error and want no
error propagation any further?
If I can pause(), what can I do if my code is not the final consumer of the Deferred's
result, but lives in the middle of the processing chain and have to pass the signal, that there
will be no further result, so the consumer will do appropriately?

Maybe we need graph of callbacks (or just tree)? 
Or, said in other words, groups of callbacks (to be able to exit the processing
of the current group on some failures)?

Or just tell me, that I have missed something, I'm still getting into the theme!

Thanks!

&gt;<i> 
</I>&gt;<i> Terry
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-- 
Alexey S

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021416.html">[Twisted-Python] understanding deferreds
</A></li>
	<LI>Next message: <A HREF="021421.html">[Twisted-Python] understanding deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21419">[ date ]</a>
              <a href="thread.html#21419">[ thread ]</a>
              <a href="subject.html#21419">[ subject ]</a>
              <a href="author.html#21419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
