<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Plain windows sockets and twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Plain%20windows%20sockets%20and%20twisted&In-Reply-To=3db160681001171525t2105d051icc2539db8831ab3%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021341.html">
   <LINK REL="Next"  HREF="021343.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Plain windows sockets and twisted</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Plain%20windows%20sockets%20and%20twisted&In-Reply-To=3db160681001171525t2105d051icc2539db8831ab3%40mail.gmail.com"
       TITLE="[Twisted-Python] Plain windows sockets and twisted">glyph at twistedmatrix.com
       </A><BR>
    <I>Sun Jan 17 19:52:19 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021341.html">[Twisted-Python] Plain windows sockets and twisted
</A></li>
        <LI>Next message: <A HREF="021343.html">[Twisted-Python] Plain windows sockets and twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21342">[ date ]</a>
              <a href="thread.html#21342">[ thread ]</a>
              <a href="subject.html#21342">[ subject ]</a>
              <a href="author.html#21342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 17, 2010, at 6:25 PM, Daniel Griffin wrote:

&gt;<i> I am using twisted in a cross-platform manner. I have written both the client and server. The client is twisted and the server uses python threads. I am using the select reactor and plain old TCP connections. I encode my messages to JSON to send them.
</I>&gt;<i> 
</I>&gt;<i> On Windows I get tons of un-clean connectionlost events, on Mac everything works perfectly. I am using the same data set in each case. 
</I>
You should use Twisted for your server and get rid of threads, or you should very carefully read &lt;<A HREF="http://itamarst.org/writings/win32sockets.html">http://itamarst.org/writings/win32sockets.html</A>&gt; and understand the differences between what windows calls &quot;sockets&quot; and what the rest of the world does.

&gt;<i> If I use the threaded server on windows and the twisted client on mac then I still get tons of errors. 99% of these times these errors happen after the last dataReceived when the socket should be closed cleanly. 
</I> .
 .
 .
&gt;<i> 
</I>&gt;<i> Is this the correct behavior for using plain sockets with twisted? Any reason why this would be perfectly fine on OSX and not Windows? Sorry for the long email. 
</I>
You'll need to give some more detail.  What errors are you seeing?  Please post a complete traceback, along with enough code to actually trigger the error.  (&lt;<A HREF="http://sscce.org/">http://sscce.org/</A>&gt; is a good resource explaining desirable attributes of such an example.)

What version of Twisted are you using?  What version of Python?  What is the protocol?  Are the errors occurring in your threaded server or your twisted client?

The quick answer to your question is: no, this behavior is not expected.  Sockets are sockets.  Twisted should work fine talking to sockets in threads, sockets in other programming languages, other operating systems, etc.  Of course, that's just what's *supposed* to happen: there's a bug here, and with the information I have now, I can't say whether it's in your threaded code, your Twisted code, Twisted, or even Python.

Good luck?



</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021341.html">[Twisted-Python] Plain windows sockets and twisted
</A></li>
	<LI>Next message: <A HREF="021343.html">[Twisted-Python] Plain windows sockets and twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21342">[ date ]</a>
              <a href="thread.html#21342">[ thread ]</a>
              <a href="subject.html#21342">[ subject ]</a>
              <a href="author.html#21342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
