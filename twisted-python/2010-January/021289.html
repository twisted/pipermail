<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problem fetching page with getPage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20fetching%20page%20with%20getPage&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021286.html">
   <LINK REL="Next"  HREF="021284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problem fetching page with getPage</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problem%20fetching%20page%20with%20getPage&In-Reply-To="
       TITLE="[Twisted-Python] Problem fetching page with getPage">terry at jon.es
       </A><BR>
    <I>Sat Jan  2 16:28:14 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021286.html">[Twisted-Python] Problem fetching page with getPage
</A></li>
        <LI>Next message: <A HREF="021284.html">[Twisted-Python] Fwd:  Problem fetching page with getPage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21289">[ date ]</a>
              <a href="thread.html#21289">[ thread ]</a>
              <a href="subject.html#21289">[ subject ]</a>
              <a href="author.html#21289">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Glyph

Thanks for the reply. I just sent another mail in the thread.

&gt;&gt;&gt;&gt;&gt;<i> &quot;Glyph&quot; == Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; writes:
</I>Glyph&gt; Well, I know this isn't terribly helpful, but &quot;a bug in getPage&quot; is
Glyph&gt; really the only thing that comes to mind.  Or, some
Glyph&gt; legal-but-unusual behavior in getPage which triggers a bug on the
Glyph&gt; EC2 side of things.

The error arose from a combination of things (signing a string that
included a host:port but then only sending a host in the Host header).
Turns out you can resolve it either way - using a port in both, or omitting
the port from both.


BTW, in reading about the Host header, it seems like getPage (more
specifically HTTPPageGetter) should be sending a port number in the header,
at least when the port is not 80. I base that remark on these:

  <A HREF="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23</A>
  <A HREF="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.2">http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.2</A>

That's a 1.1 spec as you surely know, and http.py sends an HTTP/1.0 header,
so you could argue that sending the Host is therefore just a nicety and
there's no need for a port. But the Host header isn't described in the HTTP
1.0 RFC, so it seems more like if you're going to send it you may as well
conform to HTTP 1.1.

But I guess that argument is somehow incorrect. I say that because a
comment in some other code I'm looking at that uses httplib, says that
prior to 2.6, httplib *used* to append a &quot;:443&quot; to SSL requests, but that
it no longer does. I guess sending the port was dropped from httplib for
good reason, and so HTTPPageGetter shouldn't add it. But I don't know.

I'm very far from being an expert on HTTP headers though. Not as far as I'd
like to be, though :-)

Thanks again for the reply.

Terry

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021286.html">[Twisted-Python] Problem fetching page with getPage
</A></li>
	<LI>Next message: <A HREF="021284.html">[Twisted-Python] Fwd:  Problem fetching page with getPage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21289">[ date ]</a>
              <a href="thread.html#21289">[ thread ]</a>
              <a href="subject.html#21289">[ subject ]</a>
              <a href="author.html#21289">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
