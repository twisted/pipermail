<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] client connecting to 2	servers	(nonsimultaneously)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20client%20connecting%20to%202%0A%09servers%09%28nonsimultaneously%29&In-Reply-To=AANLkTi%3Dge7JGPY3_woNu6LCapUEXjH88pRZ%3DTB05g5dY%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023309.html">
   <LINK REL="Next"  HREF="023311.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] client connecting to 2	servers	(nonsimultaneously)</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20client%20connecting%20to%202%0A%09servers%09%28nonsimultaneously%29&In-Reply-To=AANLkTi%3Dge7JGPY3_woNu6LCapUEXjH88pRZ%3DTB05g5dY%40mail.gmail.com"
       TITLE="[Twisted-Python] client connecting to 2	servers	(nonsimultaneously)">exarkun at twistedmatrix.com
       </A><BR>
    <I>Wed Jan 12 10:26:37 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="023309.html">[Twisted-Python] client connecting to 2 servers	(nonsimultaneously)
</A></li>
        <LI>Next message: <A HREF="023311.html">[Twisted-Python] client connecting to 2 servers	(nonsimultaneously)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23310">[ date ]</a>
              <a href="thread.html#23310">[ thread ]</a>
              <a href="subject.html#23310">[ subject ]</a>
              <a href="author.html#23310">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03:15 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jrennie at gmail.com</A> wrote:
&gt;<i>Habit, mostly.  I think it's a good habit, though.  The reason is that 
</I>&gt;<i>I
</I>&gt;<i>wanted to make sure the __init__ code completed before the connectTCP 
</I>&gt;<i>was
</I>&gt;<i>called.  In this case, it doesn't matter, but if I had a number of 
</I>&gt;<i>things I
</I>&gt;<i>wanted to do in __init__, it might matter.  Consider:
</I>&gt;<i>
</I>&gt;<i>class MyClientProtocol(Protocol):
</I>&gt;<i>      def connectionMade(self):
</I>&gt;<i>        self.factory.numConnections += 1
</I>&gt;<i>
</I>&gt;<i>class MyClientFactory(Factory):
</I>&gt;<i>      def __init__(self):
</I>&gt;<i>        reactor.connectTCP(host, port, self)
</I>&gt;<i>  self.numConnections = 0
</I>&gt;<i>
</I>&gt;<i>'course, I'm sure you'd put reactor.connectTCP *after* the 
</I>&gt;<i>numConnections
</I>&gt;<i>initializer, but using callWhenRunning ensures that the order doesn't
</I>&gt;<i>matter, so it's one less thing you have to worry about :-)
</I>
Although note that if the reactor is already running when you 
instantiate the factory, then callWhenRunning will immediately call the 
function you pass to it, as demonstrated by this transcript in which the 
reactor is already running:

    &gt;&gt;&gt; def foo():
    ...     print 'foo running'
    ...    &gt;&gt;&gt; from twisted.internet import reactor
    &gt;&gt;&gt; reactor.callWhenRunning(foo)
    foo running
    &gt;&gt;&gt;
Jean-Paul

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023309.html">[Twisted-Python] client connecting to 2 servers	(nonsimultaneously)
</A></li>
	<LI>Next message: <A HREF="023311.html">[Twisted-Python] client connecting to 2 servers	(nonsimultaneously)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23310">[ date ]</a>
              <a href="thread.html#23310">[ thread ]</a>
              <a href="subject.html#23310">[ subject ]</a>
              <a href="author.html#23310">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
