<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Refactoring Documentation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Refactoring%20Documentation&In-Reply-To=%3CAANLkTin8h09VO1pRKCLnPjH9n%2BqywHLgtUuYb17pFcmN%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055856.html">
   <LINK REL="Next"  HREF="055859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Refactoring Documentation</H1>
    <B>Kevin Horn</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Refactoring%20Documentation&In-Reply-To=%3CAANLkTin8h09VO1pRKCLnPjH9n%2BqywHLgtUuYb17pFcmN%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Refactoring Documentation">kevin.horn at gmail.com
       </A><BR>
    <I>Thu Jan 20 16:22:55 MST 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055856.html">[Twisted-Python] Refactoring Documentation
</A></li>
        <LI>Next message (by thread): <A HREF="055859.html">[Twisted-Python] Refactoring Documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55858">[ date ]</a>
              <a href="thread.html#55858">[ thread ]</a>
              <a href="subject.html#55858">[ subject ]</a>
              <a href="author.html#55858">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jan 20, 2011 at 4:45 PM, &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:

&gt;<i> On 10:05 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">kevin.horn at gmail.com</A> wrote:
</I>&gt;<i> &gt;On Thu, Jan 20, 2011 at 1:55 AM, Glyph Lefkowitz
</I>&gt;<i> &gt;&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;(I was going to point you at the output of the buildbot, but it looks
</I>&gt;<i> &gt;&gt;like
</I>&gt;<i> &gt;&gt;something in trunk has broken the conversion process.  Anyone know
</I>&gt;<i> &gt;&gt;what this
</I>&gt;<i> &gt;&gt;is about? &lt;
</I>&gt;<i> &gt;&gt;<A HREF="http://buildbot.twistedmatrix.com/builds/sphinx-">http://buildbot.twistedmatrix.com/builds/sphinx-</A>
</I>&gt;<i> &gt;&gt;html-15724/contents.html&gt;)
</I>&gt;<i> &gt;I was going to address this as well.  I've been seeing what are
</I>&gt;<i> &gt;apparently
</I>&gt;<i> &gt;intermittent problems with the buildbot, though I haven't seen that one
</I>&gt;<i> &gt;before, since the beginning of the year when I started seriously
</I>&gt;<i> &gt;looking at
</I>&gt;<i> &gt;this stuff again.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I was able to build the docs properly on the buildbot yesterday, and in
</I>&gt;<i> &gt;fact
</I>&gt;<i> &gt;couldn't replicate any of the issues I had previously seen (which, in
</I>&gt;<i> &gt;my
</I>&gt;<i> &gt;case, seem to mostly have to do with missing CSS files). when I was
</I>&gt;<i> &gt;talking
</I>&gt;<i> &gt;to exarkun about it on IRC yesterday.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;I'm not sure whether it has to do with the buildbot configuration,
</I>&gt;<i> &gt;maybe
</I>&gt;<i> &gt;stuff timing out, network issues, problems in the actual conversion
</I>&gt;<i> &gt;process,
</I>&gt;<i> &gt;or what.
</I>&gt;<i>
</I>&gt;<i> Does this help?
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://buildbot.twistedmatrix.com/builders/sphinx-">http://buildbot.twistedmatrix.com/builders/sphinx-</A>
</I>&gt;<i> documentation/builds/123/steps/shell_4/logs/stdio
</I>&gt;<i>
</I>&gt;<i> The salient point perhaps being:
</I>&gt;<i>
</I>&gt;<i>  File
</I>&gt;<i>
</I>&gt;<i> &quot;/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/urllib.py&quot;,
</I>&gt;<i> line 347, in open_http
</I>&gt;<i>    'got a bad status line', None)
</I>&gt;<i> IOError: ('http protocol error', 0, 'got a bad status line', None)
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;<i>
</I>Hmmm...yes, I think it does.  It looks like the l2s_builder script is
choking on fetching the DTD for some reason.  lore2sphinx itself is supposed
to cache the DTD between runs, but I'm betting it doesn't work in the
buildbot due to the (hopefully) clean environment it has every time it runs.

I can change it to not care about that, but if I do, then it won't be able
to resolve HTML entities (of which there are a few in the Lore sources,
mostly em-dashes IIRC).  So the XML parsing will choke on those, unless I
tell it to ignore them, in which case it might ignore other errors...etc.

I'll see what I can do to fix it, I haven't worked on that bit for a long
time.  I'll see if possible to add a &quot;pre-cached&quot; DTD file to teh
lore2sphinx repo, and that should fix that problem at least.

Thanks for the research!

(I sometimes forget that buildbot keeps a log of the stdio.  You wouldn't
think that I would, since I use the analogous logs in hudson fairly
frequently, but I do. Sigh.)

Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20110120/5fb60ad8/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055856.html">[Twisted-Python] Refactoring Documentation
</A></li>
	<LI>Next message (by thread): <A HREF="055859.html">[Twisted-Python] Refactoring Documentation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55858">[ date ]</a>
              <a href="thread.html#55858">[ thread ]</a>
              <a href="subject.html#55858">[ subject ]</a>
              <a href="author.html#55858">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
