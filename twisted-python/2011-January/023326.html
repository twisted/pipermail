<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Design advice
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Design%20advice&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023324.html">
   <LINK REL="Next"  HREF="023331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Design advice</H1>
    <B>benjamin.bertrand at lfv.se</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Design%20advice&In-Reply-To="
       TITLE="[Twisted-Python] Design advice">benjamin.bertrand at lfv.se
       </A><BR>
    <I>Fri Jan 14 09:56:53 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="023324.html">[Twisted-Python] Pantheon sponsorship logo
</A></li>
        <LI>Next message: <A HREF="023331.html">[Twisted-Python] Design advice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23326">[ date ]</a>
              <a href="thread.html#23326">[ thread ]</a>
              <a href="subject.html#23326">[ subject ]</a>
              <a href="author.html#23326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to do a proof of concept and need some advice about the design.
We today have an external system sending messages to several of our tests systems (one specific connection per system).
We'd like to get our own server for more flexibility (easily setup connection to a new system, filtering, re-sending...).

The general idea so far is:
- A server receives all the messages from the external system, parses them and writes them to a database.
The server will be running as a daemon (should be on all the time).
- Clients can retrieve messages from the database and send them to test systems (one client per system). Clients should as well be able to send &quot;live&quot; data to the system (after some filtering on message content).
Clients are independent. They can be started/stopped depending on the need.

The server and clients use a specific protocol to communicate with the other system.
I already have implemented a server that receives messages from the external system. Parsing and writing them to a database shouldn't be too difficult.
I see how I can tell a client to retrieve specific messages from the database to send them.
What I'm not sure about is the &quot;live&quot; part (sending messages coming from the external system). Note that when I say &quot;live&quot;, a small delay (up to 2-3 seconds) is not critical.
1) Each client could poll the database for change... They would need to poll it quite frequently, so don't think it's an option.
2) I read about being notified by a database on table changes (<A HREF="http://www.divillo.com/">http://www.divillo.com/</A>). That's much nicer than polling, but I don't think that's the best for my application.
3) I think a better solution would be to directly ask the server receiving the messages.
Not sure about the best way to do that:
3.1) The server could forward the raw data to all the clients and let the client do the filtering. Lot of unneeded data would be sent.
3.2) The server could do the filtering and send only the needed messages. Is using twisted's perspective broker a good solution for that?
4) Another idea?

In term of dimensioning, we can get around 200 messages per minute (max message length is 10000 bytes). Usually more around 20-30 messages per minute.
The number of clients is small (around 10).

Any advice?

Thanks

Benjamin

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023324.html">[Twisted-Python] Pantheon sponsorship logo
</A></li>
	<LI>Next message: <A HREF="023331.html">[Twisted-Python] Design advice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23326">[ date ]</a>
              <a href="thread.html#23326">[ thread ]</a>
              <a href="subject.html#23326">[ subject ]</a>
              <a href="author.html#23326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
