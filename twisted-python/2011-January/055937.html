<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Using SerialPort with t.a.s.Application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Using%20SerialPort%20with%20t.a.s.Application&In-Reply-To=%3C20110131221800.1699.132541088.divmod.xquotient.434%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055935.html">
   <LINK REL="Next"  HREF="055932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Using SerialPort with t.a.s.Application</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Using%20SerialPort%20with%20t.a.s.Application&In-Reply-To=%3C20110131221800.1699.132541088.divmod.xquotient.434%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Using SerialPort with t.a.s.Application">exarkun at twistedmatrix.com
       </A><BR>
    <I>Mon Jan 31 15:18:00 MST 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055935.html">[Twisted-Python] Using SerialPort with t.a.s.Application
</A></li>
        <LI>Next message (by thread): <A HREF="055932.html">[Twisted-Python] A Python enum library with a Twist
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55937">[ date ]</a>
              <a href="thread.html#55937">[ thread ]</a>
              <a href="subject.html#55937">[ subject ]</a>
              <a href="author.html#55937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03:50 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">albert.brandl at weiermayer.com</A> wrote:
&gt;<i>Hi!
</I>&gt;<i>
</I>&gt;<i>I'm quite happy that my question (or really: Itamar's answer) triggered
</I>&gt;<i>the interesting discussion about glossaries. But there are some aspects
</I>&gt;<i>about SerialPort that are not yet clear to me. So I'm trying to reclaim
</I>&gt;<i>this thread ;-).
</I>&gt;<i>
</I>&gt;<i>On Fri, Jan 28, 2011 at 08:25:52AM -0500, Itamar Turner-Trauring wrote:
</I>&gt;&gt;<i>The TCP port doesn't implement IService either...
</I>&gt;<i>
</I>&gt;<i>This is correct. But TCPServer does implement IService, and I was
</I>&gt;<i>looking for an analog I could use for the serial port. I'd like to 
</I>&gt;<i>write
</I>&gt;<i>something along the following lines:
</I>&gt;<i>
</I>&gt;<i>def setupSerialCommunication(multiService):
</I>&gt;<i>    lrFactory = MyLineReceiverFactory()
</I>&gt;<i>    serialComm = internet.SerialServer(lrFactory, '/dev/ttyS0')
</I>&gt;<i>    serialComm.setServiceParent(multiService)
</I>&gt;<i>
</I>&gt;<i>(BTW: I'm not quite sure if SerialServer would belong to the internet
</I>&gt;<i>package...)
</I>&gt;<i>
</I>&gt;<i>In my understanding, the communication over the serial line should be
</I>&gt;<i>handled in a similar way to communicating via TCP/IP. So my questions
</I>&gt;<i>should have been: Why isn't there an analog to TCPServer for 
</I>&gt;<i>SerialPort?
</I>&gt;<i>Would it make sense to add it?
</I>
I think that now the way it would make sense to add this is to add a 
serialport endpoint.  This would be usable with 
twisted.internet.endpoints.serverFromEndpoint (or clientFromEndpoint, I 
can never remember which one a serial port is more like).

Then, this endpoint could be combined with a general-purpose endpoint- 
into-service adapter.
&gt;&gt;<i>A service is supposed to be something you can start and stop, and
</I>&gt;&gt;<i>encapsulates a self-contained piece of business logic. The purpose is
</I>&gt;&gt;<i>both deployment and ease of regression testing.
</I>&gt;<i>
</I>&gt;<i>Thanks for the explanation. It is certainly a good idea to think about
</I>&gt;<i>the partitioning of the services and reflect it in the code.
</I>&gt;&gt;<i>So maybe your service starts both a webserver and a serialport,
</I>&gt;&gt;<i>because it requires both -- which is why mostly you should just
</I>&gt;&gt;<i>implement your own service classes.
</I>&gt;<i>
</I>&gt;<i>There is the class t.a.s.MultiService for encapsulating other services.
</I>&gt;<i>In my current implementation I just instantiate it and add the other
</I>&gt;<i>services; afterwards I set its service Parent to the application. What
</I>&gt;<i>would be the advantage of subclassing Service and redefining its
</I>&gt;<i>startService and stopService methods?
</I>
If you can accomplish your goals without making a new kind of IService 
implementation, then great!  If it is awkward (for example, if you want 
the web server to have a reference to the protocol currently connected 
to the serial port), then it might be easier if you have your own 
IService implementation that knows about both your web server and your 
serial port.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055935.html">[Twisted-Python] Using SerialPort with t.a.s.Application
</A></li>
	<LI>Next message (by thread): <A HREF="055932.html">[Twisted-Python] A Python enum library with a Twist
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55937">[ date ]</a>
              <a href="thread.html#55937">[ thread ]</a>
              <a href="subject.html#55937">[ subject ]</a>
              <a href="author.html#55937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
