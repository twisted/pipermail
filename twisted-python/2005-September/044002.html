<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] jelly tracebacks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20jelly%20tracebacks&In-Reply-To=%3C20050924.174359.63508673.warner%40lothar.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043962.html">
   <LINK REL="Next"  HREF="043963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] jelly tracebacks</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20jelly%20tracebacks&In-Reply-To=%3C20050924.174359.63508673.warner%40lothar.com%3E"
       TITLE="[Twisted-Python] jelly tracebacks">warner at lothar.com
       </A><BR>
    <I>Sat Sep 24 18:43:59 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043962.html">[Twisted-Python] jelly tracebacks
</A></li>
        <LI>Next message (by thread): <A HREF="043963.html">[Twisted-Python] application shutdown and control-C
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44002">[ date ]</a>
              <a href="thread.html#44002">[ thread ]</a>
              <a href="subject.html#44002">[ subject ]</a>
              <a href="author.html#44002">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I just had a grueling experience debugging some
</I>&gt;<i> unjellying problem. I wonder, why not make jelly
</I>&gt;<i> tracebacks more useful by adding the details of the PB
</I>&gt;<i> message that gave rise to them (i.e. which method of
</I>&gt;<i> which object was called with which arguments). Any
</I>&gt;<i> thoughts?
</I>
Good idea. I've incorporated this into newpb, where any problem during
serialization or unserialization is reported via an exception that has a
.where attribute. This .where string reports the location in the object graph
that had the problem. In the case of serialization errors during an argument
of a method call, you'd get a string with something like:

 &lt;call-(reqID)-(objID)-(methodname)&gt;.foo

If you were to have something unserializable inside a container, the .where
string would include the relevant index values:

 d = {'foo': 12, 'bar': Ephemeral()}
 l = [1, 2, d]
 rr.callRemote(&quot;doStuff&quot;, arg1=5, arg2=l)
   -&gt; BananaError(where=&lt;call-0-4-doStuff&gt;.arg2[2]['bar'])

Likewise, if one of the arguments violates a Schema constraint, the exception
should give you enough information to figure out what exactly caused the
problem. This occurs on both ends of the wire, so exceptions that occur when
serializing the return value can be located too.

The same .where technique is used during unserialization, so if someone sends
you a serialized instance of a class that you are unaware of (or unwilling to
deserialize), or if their value violates your inbound schema, you'll get an
exception that has enough detail to help you figure out where exactly the
problem was.

cheers,
 -Brian



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043962.html">[Twisted-Python] jelly tracebacks
</A></li>
	<LI>Next message (by thread): <A HREF="043963.html">[Twisted-Python] application shutdown and control-C
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44002">[ date ]</a>
              <a href="thread.html#44002">[ thread ]</a>
              <a href="subject.html#44002">[ subject ]</a>
              <a href="author.html#44002">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
