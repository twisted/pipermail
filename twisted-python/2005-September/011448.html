<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] ReconnectingClientFactory creates multiple	Protocols?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20ReconnectingClientFactory%20creates%20multiple%0A%09Protocols%3F&In-Reply-To=20050915053217.GA21814%40ceruleansoftware.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011440.html">
   <LINK REL="Next"  HREF="011453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] ReconnectingClientFactory creates multiple	Protocols?</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20ReconnectingClientFactory%20creates%20multiple%0A%09Protocols%3F&In-Reply-To=20050915053217.GA21814%40ceruleansoftware.com"
       TITLE="[Twisted-Python] ReconnectingClientFactory creates multiple	Protocols?">itamar at itamarst.org
       </A><BR>
    <I>Thu Sep 15 10:27:08 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011440.html">[Twisted-Python] ReconnectingClientFactory creates multiple	Protocols?
</A></li>
        <LI>Next message: <A HREF="011453.html">[Twisted-Python] unsafe tracebacks in PB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11448">[ date ]</a>
              <a href="thread.html#11448">[ thread ]</a>
              <a href="subject.html#11448">[ subject ]</a>
              <a href="author.html#11448">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2005-09-15 at 13:32 +0800, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mikah at ceruleansoftware.com</A> wrote:

&gt;<i>   As far as I can tell, it's related to the connection being
</I>&gt;<i> dropped, at which point the Factory reconnects and creates a
</I>&gt;<i> new protocol instance.
</I>
Protocols (at least, when used with TCP) are designed so that their
lifetime matches that of the TCP connection they are handling. As a
result, when the connection is lost and the factory reconnects, this is
a new TCP connection with a new protocol. This is why there's a factory,
to manage data and logic that is not tied to a specific TCP connection
(e.g. &quot;should I reconnect?&quot; or &quot;how far along was the download when I
got disconnected.&quot;)

In general you'd want to use the factory to store state that needs to
last past the lifetime of the protocol. You can, of course, have
buildProtocol always return the same instance, but that's pretty ugly
and can easily lead to obscure bugs if you don't clean up the state
correctly.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011440.html">[Twisted-Python] ReconnectingClientFactory creates multiple	Protocols?
</A></li>
	<LI>Next message: <A HREF="011453.html">[Twisted-Python] unsafe tracebacks in PB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11448">[ date ]</a>
              <a href="thread.html#11448">[ thread ]</a>
              <a href="subject.html#11448">[ subject ]</a>
              <a href="author.html#11448">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
