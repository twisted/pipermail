<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted.web signal handling
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted.web%20signal%20handling&In-Reply-To=20050924152504.3914.1020640885.divmod.quotient.20785%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011488.html">
   <LINK REL="Next"  HREF="011489.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted.web signal handling</H1>
    <B>Krzysztof Nowak</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted.web%20signal%20handling&In-Reply-To=20050924152504.3914.1020640885.divmod.quotient.20785%40ohm"
       TITLE="[Twisted-Python] Twisted.web signal handling">pegazik at gmail.com
       </A><BR>
    <I>Mon Sep 26 10:40:06 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011488.html">[Twisted-Python] Twisted.web signal handling
</A></li>
        <LI>Next message: <A HREF="011489.html">[Twisted-Python] How to send a UDP datagram
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11498">[ date ]</a>
              <a href="thread.html#11498">[ thread ]</a>
              <a href="subject.html#11498">[ subject ]</a>
              <a href="author.html#11498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/24/05, Jp Calderone &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt; wrote:
&gt;<i> Timeouts should be managed using twisted.internet.reactor.callLater().
</I>
Thanks. I am not really deep in the twisted. I just want to make this
application and that would be all (for now). I have rewrite my
previous code in this way:

/////////////////////////////////////////////////////////////////////////////////////
def Timeout():
   raise ConnectionError

def HistosRendering:
       Event = reactor.callLater(0.0001, Timeout)	
       try:
           &lt;Some activity that need timeout&gt;
       except ConnectionError:
           &lt;In case of timeout&gt;
           return
       else:
           Event.cancel()

class Resource(resource.Resource):
   def render(self, request):
       HistosRender()

resource = Resource()
/////////////////////////////////////////////////////////////////////////////////////

But still, it doesn't work. Timeout() is called, but exception is
making whole process to fail and the except: statestment is not even
started. I'm quite shure, that this timeouting-stuff should be some
standard problem, but I failed to find any information in the net. So
please, help me once again.

&gt;<i> JP Calderone:
</I>&gt;<i> Also, there is a race condition between the end of your try suite and the timer.cancel() call.  The exception could be raised after the else suite is entered but before the timer is actually cancelled.
</I>
Do you have any ideas how to avoid that problem?


&gt;<i> &gt;
</I>&gt;<i> &gt;class Resource(resource.Resource):
</I>&gt;<i> &gt;    def render(self, request):
</I>&gt;<i> &gt;        HistosRender()
</I>&gt;<i>
</I>&gt;<i> You are blocking the entire process for the during of the render() call.  This is another reason not to make whatever synchronous connection attempt you are making and instead use something Twisted provides.  No other activities can occur, process-wide, while your code is running.  If this is a multiuser application, *everyone* using it will experience periods of unresponsiveness when *anyone* causes blocking code to run.
</I>
If adding asynchronous approach would force me to restructure whole
project, it would stay for time just like this. This could be next
step, but timeouting is much more important to me....

Cheers,
Krzysztof Nowak
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011488.html">[Twisted-Python] Twisted.web signal handling
</A></li>
	<LI>Next message: <A HREF="011489.html">[Twisted-Python] How to send a UDP datagram
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11498">[ date ]</a>
              <a href="thread.html#11498">[ thread ]</a>
              <a href="subject.html#11498">[ subject ]</a>
              <a href="author.html#11498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
