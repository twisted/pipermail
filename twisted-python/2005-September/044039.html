<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.vfs issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.vfs%20issues&In-Reply-To=%3C20050929011518.3914.1921089064.divmod.quotient.22221%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="044036.html">
   <LINK REL="Next"  HREF="044048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.vfs issues</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.vfs%20issues&In-Reply-To=%3C20050929011518.3914.1921089064.divmod.quotient.22221%40ohm%3E"
       TITLE="[Twisted-Python] twisted.vfs issues">exarkun at divmod.com
       </A><BR>
    <I>Wed Sep 28 19:15:18 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="044036.html">[Twisted-Python] twisted.vfs issues
</A></li>
        <LI>Next message (by thread): <A HREF="044048.html">[Twisted-Python] twisted.vfs issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44039">[ date ]</a>
              <a href="thread.html#44039">[ thread ]</a>
              <a href="subject.html#44039">[ subject ]</a>
              <a href="author.html#44039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 28 Sep 2005 20:35:40 -0400, James Y Knight &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">foom at fuhm.net</A>&gt; wrote:
&gt;<i>On Sep 28, 2005, at 8:04 PM, Jp Calderone wrote:
</I>&gt;&gt;<i>  twisted.vfs should not import things from or depend upon  twisted.web2:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    * web2 is unreleased
</I>&gt;&gt;<i>    * web2's APIs are unstable
</I>&gt;&gt;<i>    * vfs is more generally applicable than web2    * web2's stream 
</I>&gt;&gt;<i>abstraction is not generally agreed upon
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  If you like, we can talk more about how this interface should  work. 
</I>&gt;&gt;<i>However, my first inclination is to say that it should use  the existing 
</I>&gt;&gt;<i>producer/consumer APIs.  While these are not the best  APIs, they are used 
</I>&gt;&gt;<i>widely throughout Twisted, and therefore this  will give the greatest 
</I>&gt;&gt;<i>usability to the resulting VFS code.  While  there are adapters between 
</I>&gt;&gt;<i>these APIs and web2 streams, I still  recommend against web2 streams for 
</I>&gt;&gt;<i>the reasons mentioned above.
</I>&gt;<i>
</I>&gt;<i>Twisted.vfs should not depend upon a module in twisted.web2 when 
</I>&gt;<i>twisted.vfs gets released. However, it is okay for it to depend upon  that 
</I>&gt;<i>stream _code_ if it gets moved into twisted core before vfs is  released. 
</I>&gt;<i>The idea all along has been to move t.w2.stream into  twisted core when it 
</I>&gt;<i>is stable and useful. So I wouldn't worry about  tearing it out of t.vfs 
</I>&gt;<i>quite yet.
</I>
That mildly addresses one of four points.  At the very least, the remaining three seem to remain valid.

&gt;<i>
</I>&gt;<i>Now, my first inclination is that the current block API *is* the  right 
</I>&gt;<i>primitive for a file.
</I>
It precludes writing large amounts of data to a file simply.

&gt;<i>
</I>&gt;<i>Also, in particular, making it use the old producer abstraction as a 
</I>&gt;<i>primitive is just asking for trouble. As the producer abstraction  lets the 
</I>&gt;<i>producer send data asynchronously at any point, it becomes  almost 
</I>&gt;<i>impossible to do a relatively simple operation like reading a  part of a 
</I>&gt;<i>file. That is why, for web2, I had to drop it and make a  new API that has 
</I>&gt;<i>the consumer request the data. I think the same  reasoning applies here.
</I>
The old API is not fantastic.  On the other hand, it's entirely servicable.  I don't understand why you think it is almost impossible to read part of a file using it.  In fact, I've done just this one several occasions.

&gt;<i>
</I>&gt;<i>Again, I think that all requests for tearing various adapters and  other 
</I>&gt;<i>bits out of twisted.vfs are currently completely premature. At  this point 
</I>&gt;<i>in its development, it is critical that adapters for many  different systems 
</I>&gt;<i>are created, to make sure that vfs has the  appropriate abstractions and 
</I>&gt;<i>APIs to handle all use cases. And given  that vfs is itself heavily under 
</I>&gt;<i>development, it makes no sense to  request that said adapters be adopted 
</I>&gt;<i>upstream in each other project,  yet.
</I>
They can be removed from twisted.vfs without being removed from the Twisted repository.  Or they could be left in twisted.vfs but developed in a branch.  That is policy for major feature development, after all.

Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="044036.html">[Twisted-Python] twisted.vfs issues
</A></li>
	<LI>Next message (by thread): <A HREF="044048.html">[Twisted-Python] twisted.vfs issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#44039">[ date ]</a>
              <a href="thread.html#44039">[ thread ]</a>
              <a href="subject.html#44039">[ subject ]</a>
              <a href="author.html#44039">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
