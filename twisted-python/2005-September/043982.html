<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Resource instanciated and never destroyed ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Resource%20instanciated%20and%20never%20destroyed%20%3F&In-Reply-To=%3C20050920214522.3914.1055302029.divmod.quotient.19026%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="043981.html">
   <LINK REL="Next"  HREF="043984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Resource instanciated and never destroyed ?</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Resource%20instanciated%20and%20never%20destroyed%20%3F&In-Reply-To=%3C20050920214522.3914.1055302029.divmod.quotient.19026%40ohm%3E"
       TITLE="[Twisted-Python] Resource instanciated and never destroyed ?">exarkun at divmod.com
       </A><BR>
    <I>Tue Sep 20 15:45:22 MDT 2005</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="043981.html">[Twisted-Python] Resource instanciated and never destroyed ?
</A></li>
        <LI>Next message (by thread): <A HREF="043984.html">[Twisted-Python] How to write a simple telnet client?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43982">[ date ]</a>
              <a href="thread.html#43982">[ thread ]</a>
              <a href="subject.html#43982">[ subject ]</a>
              <a href="author.html#43982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 20 Sep 2005 18:37:40 +0000 (UTC), Anand &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">web at anand-fr.net</A>&gt; wrote:
&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>I'm using twisted+web (2.0.1) + Nevow (0.4.1) for building a web application.
</I>&gt;<i>
</I>&gt;<i>My web application is inside a &quot;Realm&quot; for handling user authentication.
</I>&gt;<i>
</I>&gt;<i>When an url is requested for a logged in user, this is handled by a resource
</I>&gt;<i>called &quot;LoggedIn&quot;, which is a nevow rend.Page subclass.
</I>&gt;<i>LoggedIn redefines the locateChildMethod.
</I>&gt;<i>That method instanciates and returns a resource object , which can be of any
</I>&gt;<i>specific class which I have defined. My resource classes are subclasses of
</I>&gt;<i>rend.Page.
</I>&gt;<i>
</I>&gt;<i>I've noticed, putting traces in __init__ and __del__ methods of my resource
</I>&gt;<i>classes, that resource objects which are instanciated are never destroyed.
</I>&gt;<i>As as consequences, the python process ends up eating up a lot of memory.
</I>&gt;<i>
</I>&gt;<i>I guess I might do something the wrong way.
</I>&gt;<i>I would like to know how resource object can be automatically destroyed after a
</I>&gt;<i>page has been rendered by Nevow + twisted web.
</I>&gt;<i>
</I>&gt;<i>Thank you for your help
</I>&gt;<i>
</I>
  Instrumenting object lifetime using __del__ alters behavior.  Adding a __del__ method is not a valid way to determine the end of an object's lifetime.

  Nevow 0.4.1 had an egregious Page leak which has since been fixed.  You can test to see if this is the leak you are experiencing by finding all occurrences of adaption which use the callable interface form and which pass &quot;persist=True&quot; and removing the persist parameter.  You could also try switching to a newer version of Nevow, though there is no release of such a thing.

  There is a mailing list dedicated to Twisted Web (&lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web</A>&gt;) to which I have copied this response.  Please continue this thread there.

  Jp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="043981.html">[Twisted-Python] Resource instanciated and never destroyed ?
</A></li>
	<LI>Next message (by thread): <A HREF="043984.html">[Twisted-Python] How to write a simple telnet client?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43982">[ date ]</a>
              <a href="thread.html#43982">[ thread ]</a>
              <a href="subject.html#43982">[ subject ]</a>
              <a href="author.html#43982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
