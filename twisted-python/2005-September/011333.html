<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] time
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20time&In-Reply-To=20050905100942.18718.qmail%40web33915.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011330.html">
   <LINK REL="Next"  HREF="011328.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] time</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20time&In-Reply-To=20050905100942.18718.qmail%40web33915.mail.mud.yahoo.com"
       TITLE="[Twisted-Python] time">glyph at divmod.com
       </A><BR>
    <I>Mon Sep  5 17:52:48 EDT 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="011330.html">[Twisted-Python] time
</A></li>
        <LI>Next message: <A HREF="011328.html">[Twisted-Python] application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11333">[ date ]</a>
              <a href="thread.html#11333">[ thread ]</a>
              <a href="subject.html#11333">[ subject ]</a>
              <a href="author.html#11333">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 5 Sep 2005 03:09:42 -0700 (PDT), Antony Kummel &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">antonykummel at yahoo.com</A>&gt; wrote:

&gt;<i>I noticed that the convention in Twisted is to measure
</I>&gt;<i>time with python.runtime.seconds. This in turn uses
</I>&gt;<i>time.time which is sensitive to the system clock,
</I>&gt;<i>meaning that it may return decreasing values if the
</I>&gt;<i>user sets the system clock to an earlier time between
</I>&gt;<i>calls. This would likely break many things, no? Why
</I>&gt;<i>not use time.clock or some combination between them?
</I>
time.clock() is unfortunately useless due to differences in its behavior between different platforms:

&gt;&gt;&gt;<i> import time; help(time)
</I>
  Help on built-in function clock in module time:

  clock(...)
    clock() -&gt; floating point number

    Return the CPU time or real time since the start of the process or since
    the first call to clock().  This has as much precision as the system
    records.

&quot;CPU time&quot; has absolutely nothing to do with &quot;real time&quot; and so using clock() to measure anything at all is pointless; its behavior is completely different between platforms.

There are other problems with time, too: it should return an integral number of milliseconds; the fact that it uses a float means that systems which cause the FPU to truncate double-precision floating point operations at single-precision (like DirectX) won't work at all with Twisted.

Basically, in order to provide a truly correct implementation of time, Twisted would need its own re-implementation of the 'time' and 'select' modules from the python standard library, as well as for all 3rd-party multiplexing and GUI libraries to take a different signature (since the convention is to use floats for time in Python) and nobody has yet had the time.

Clock skew is one of the easier issues to address; we just need an API to portably report a monotonically increasing real time in floating-point seconds, and for all the reactors to use it.  Patches accepted :).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011330.html">[Twisted-Python] time
</A></li>
	<LI>Next message: <A HREF="011328.html">[Twisted-Python] application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11333">[ date ]</a>
              <a href="thread.html#11333">[ thread ]</a>
              <a href="subject.html#11333">[ subject ]</a>
              <a href="author.html#11333">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
