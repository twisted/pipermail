<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] overview: new review queue venue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20overview%3A%20new%20review%20queue%20venue&In-Reply-To=%3C1F1FBA2D-156F-4A55-BC48-31F43C99DE33%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030390.html">
   <LINK REL="Next"  HREF="030393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] overview: new review queue venue</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20overview%3A%20new%20review%20queue%20venue&In-Reply-To=%3C1F1FBA2D-156F-4A55-BC48-31F43C99DE33%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] overview: new review queue venue">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue May 24 16:49:26 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030390.html">[Twisted-Python] overview: new review queue venue
</A></li>
        <LI>Next message: <A HREF="030393.html">[Twisted-Python] overview: new review queue venue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30391">[ date ]</a>
              <a href="thread.html#30391">[ thread ]</a>
              <a href="subject.html#30391">[ subject ]</a>
              <a href="author.html#30391">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On May 24, 2016, at 2:49 PM, Jonathan Vanasco &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at 2xlp.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> just a few thoughts:
</I>&gt;<i> 
</I>&gt;<i> The current system as-explained seems to use an &quot;Issue&quot; as a queue item that is either a &quot;bug report&quot; or a &quot;notice of a pull request, which may also reference another bug report&quot;.
</I>
In the current system, we have &quot;tickets&quot; (in Trac) not &quot;issues&quot; (on Github).  And in that system, an issue is put into review when it has an attached branch or patch that needs to be considered for inclusion.

In the Github system.

&gt;<i> that is weird.
</I>
&gt;<i> IMHO, a quality contributor will never get turned off by handling the docs, tests, and other requirements - but may get confused/turned off by this.
</I>
Literally everyone's predictions about this have always been wrong, so I don't like speculating ;).  Especially classifying people as &quot;quality contributors&quot; or not.  I will sometimes say something like &quot;if you don't do X, you probably won't do Y&quot; but being a &quot;quality contributor&quot; is a complex, multi-dimensional, and situationally-dependent personality characteristic that I don't think we can predict.

&gt;<i> anyways:
</I>&gt;<i> 
</I>&gt;<i> 1. github's PRs are peculiar in that they're &quot;branch to branch&quot; and not &quot;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">branch at commit</A> to <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">branch at commit</A>&quot;.  If I were to submit a PR, I could still make changes on it between my submission and someone finally doing a merge.  Personally, I find this infuriating.
</I>
I KNOW, RIGHT!!!  However, protected statuses somewhat reduce the potential race-condition here.  And contributing to a couple dozen Github projects I have to say that practically this has never been an issue, even though I find it aesthetically appalling, design-wise.

&gt;<i> In any event, I suggest *requiring* something like the &quot;git flow&quot; model for submissions.  Outright rejecting anything that isn't in a dedicated fix/feature branch.  Everyone is currently doing the right thing, and there are contribution docs that suggest this &#8211; I would just make it a stated policy to automatically reject any PRs from someone using &quot;master/trunk&quot;.
</I>
Honestly I don't think this is worth the effort.  git-flow is, abstractly, a reasonably good idea (if people don't know what we're talking about, see &lt;<A HREF="http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/">http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/</A>&gt;) since it encapsulates the precise semantics desired by certain commits.  But sometimes people make a fork and their fork branch just happens to be called 'patch-1', or 'master', but this doesn't really affect our workflow as long as they observe proper PR etiquette and don't push any unrelated revisions to that branch in the meanwhile.

&gt;<i> 2. regarding Issues vs PRs and working between Trac and Github, I suggest you take the approach of &quot;Trac Issue = Idea&quot; and &quot;Github PR = Implementation of Idea&quot;.  Under this concept, one or more PRs might be attempts to address a given Issue.
</I>
That's ... exactly what I was trying to express.  (Except I was thinking we'd gradually move from Trac Tickets to Github Issues).

&gt;<i> The core maintainers can address the highlevel concepts and requirements under Issue, while grounds for rejection / feedback on each PR are  listed there.  As a github/bitbucket submitter, it's really useful when someone looks at a diff and uses inline comments to note their rejection for a section.  This is how most people use Github.  (and it's incompatible with the current queue system, I KNOW).
</I>
I don't see how it's incompatible.  It seems perfectly fine, as long as we shift from 'review queue == report 25' to 'review queue == open PRs with non-failing status'.

&gt;<i> 3. Initially I didn't like the idea of rejecting so fast, but after thinking it over, now I do.  In addition to boilerplate text about &quot;please resubmit&quot;, I think it might be beneficial to standardize some labels for this though, as it helps future contributors who may want to address an issue.  If the &quot;IDEA&quot; is approved but the implementation is not, then noting &quot;Resubmission Pending&quot; suggests this is still active.  If the underlying IDEA or approach is rejected, then noting &quot;Rejection Final&quot; can suggest it's just not going to happen.
</I>
Yeah, adding some informative labels to the closed issues might be a good way of letting contributors know what is going on.  I just wanted to make sure that they are an optional part of the workflow which, if the automation around them breaks down in some way, we can still make progress, and we don't end up with inconsistent or lost information.

&gt;<i> 4.  I understand that &quot;review&quot; hold special significance within the twisted team's workflow, but outside of Twisted it is awkward to see something bounce in and out of &quot;review&quot;.
</I>
I think this is because, generally speaking, most teams do a poor job structuring their communications about what state issues and pull requests are in :).

&gt;<i> At least on the github side, using some sort of label to state where in the process (ie, what type of review) something is under would help.
</I>
What do you mean it &quot;would help&quot;?  What problem would it solve?

&gt;<i> The caveat is that this breaks the current use of Issue as a &quot;queue&quot; item.  But Twisted is using &quot;issues&quot; less as an Issue and more as a queue item, while github &quot;Issues&quot; are less of a queue item and amore of an actual issue.  This is a bit confusing and different to how many people will use github.
</I>
I don't know where you're getting this from.  Only tickets in review are queue items.  I have no idea what &quot;actual issue&quot; means here.

&gt;<i> 
</I>&gt;<i> Just to illustrate what a typical github contributor flow might be:
</I>&gt;<i> 
</I>&gt;<i> 	Scenario A-
</I>&gt;<i> 
</I>&gt;<i> 		There is a trac Issue #1001 for &quot;F is broken&quot;
</I>&gt;<i> 		bob generates github pr 11, and submits.  He comments in #1001
</I>&gt;<i> 		ted generates github pr 12, and submits.  He creates a trac issue #1002.  When #1002 is first looked at, it is a dupe of 1001 and copied over.
</I>&gt;<i> 		carol generates github pr 13 and submits.  she comments in #1003
</I>&gt;<i> 
</I>&gt;<i> 		There are 3 PRs for a single Issue.  Feedback on the PRs occurs on Github.  Feedback on the Ideas and status of PRs is on trac.
</I>&gt;<i> 
</I>&gt;<i> 	Scenario B-
</I>&gt;<i> 		Bob notes that &quot;X is broken&quot;
</I>&gt;<i> 		Bob generates github PR 11 and submits.  He goes to trac and creates issue #1002
</I>&gt;<i> 		Bob's PR is rejected because the fundamental approach is not acceptable, however X is still broken.  PR11 is closed, #1002 is open.
</I>&gt;<i> 		Ted generates pr 12 and submits.  he comments in #1002.  Ted is rejected but the approach is compatible.  it can be implemented with fixes.
</I>&gt;<i> 		Carol forks Ted's approach , fixes it, and generates pr 13.  she comments in #1002 and it is accepted.
</I>&gt;<i> 
</I>&gt;<i> again, this breaks the current use of queues.  I'm not sure how to reconcile everything together, however I think you're going to find non-core maintainers naturally fall into the 2 scenarios above.
</I>
What use?  What are you referring to with the plural &quot;queues&quot;?  There's only ever been a single queue, the review queue.  In both of your scenarios, the list of open PRs is the review queue, and in both of those scenarios, discussion of the abstract idea can happen on the tickets without treating them directly as queue items.

I appreciate you taking the time to think about our workflow and the review queue, but I would ask that you carefully consider what problem you're trying to address with your suggestions.

The practical issue I'm trying to address by switching to github PRs as opposed to trac tickets with the 'review' keyword is the speed and ease of submitting a change and getting CI feedback on that change, in addition to lowering training overhead since many people are familiar with github.  Faster feedback = happier contributors = more maintenance effort productively expended.  The issue I'm trying to address with the slightly odd close-a-PR-to-signify-finished-review workflow is to avoid the common problem of reviewers not knowing which things to review and therefore leaving certain contributions mouldering until their submitters lose interest.  Beyond that, I don't see that we have substantial workflow issues that need solving.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160524/187279ac/attachment-0001.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160524/187279ac/attachment-0001.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030390.html">[Twisted-Python] overview: new review queue venue
</A></li>
	<LI>Next message: <A HREF="030393.html">[Twisted-Python] overview: new review queue venue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30391">[ date ]</a>
              <a href="thread.html#30391">[ thread ]</a>
              <a href="subject.html#30391">[ subject ]</a>
              <a href="author.html#30391">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
