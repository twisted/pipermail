<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] overview: new review queue venue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20overview%3A%20new%20review%20queue%20venue&In-Reply-To=%3C66D6D223-B298-47BF-8BDF-DF1A5577604A%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="030330.html">
   <LINK REL="Next"  HREF="062795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] overview: new review queue venue</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20overview%3A%20new%20review%20queue%20venue&In-Reply-To=%3C66D6D223-B298-47BF-8BDF-DF1A5577604A%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] overview: new review queue venue">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat May 21 16:12:16 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="030330.html">[Twisted-Python] [ANN] prometheus_async: asyncio/Twisted-aware	Python Prometheus instrumentation
</A></li>
        <LI>Next message (by thread): <A HREF="062795.html">[Twisted-Python] overview: new review queue venue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30333">[ date ]</a>
              <a href="thread.html#30333">[ thread ]</a>
              <a href="subject.html#30333">[ subject ]</a>
              <a href="author.html#30333">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hooray!  We're on github now.  Next: there's the question of how to deal with pull requests?

It occurs to me that what we really need from our code review system is mainly one thing: the review queue: a single place for reviewers to look to find things that need to be reviewed.  This is important because proposed changes need to be responded to in a timely manner, so that the code in them doesn't get stale, and so that contributors don't get frustrated.  We have limited resources for doing so, of course, so sometimes we fall short of this objective, but the point is we need to apply our limited resources to it.

The operations on the queue are:

Proposing a change should put it into the queue.
Accepting a change should remove it from the queue.
Reviewing a change should remove it from the queue.
Responding to review feedback should re-add it to the queue.
A reviewer should be able to examine just the things in the queue so they can quickly grab the next one, without seeing noise.

Our current workflow maps this into Trac via the following:

Proposing: add the &quot;review&quot; keyword.
Accepting: remove the &quot;review&quot; keyword, merge.
Reviewing: removing the &quot;review&quot; keyword, reassign
Responding: add the &quot;review&quot; keyword again
Viewing: <A HREF="https://twistedmatrix.com/trac/report/25">https://twistedmatrix.com/trac/report/25</A>

It is therefore tempting to map it into GitHub via labels and webhooks and bot workflows.  However, I think a better mapping would be this:

Proposing: Just open a pull request.  Any open pull request should be treated as part of the queue.
Accepting: A committer pushes the big green button; this 
Reviewing: This is the potentially slightly odd part.  I believe a review that doesn't result in acceptance should close the PR.  We need to be careful to always include some text that explains that closing a PR does not mean that the change is rejected, just that the submitter must re-submit.  Initially this would just mean opening a new PR, but Mark Williams is working on a bot to re-open pull requests when a submitter posts a &quot;please review&quot; comment: <A HREF="https://github.com/markrwilliams/txghbot">https://github.com/markrwilliams/txghbot</A>
Responding: A submitter can open a new PR, or, once we start running txghbot, reopen their closed PR.
Viewing: <A HREF="https://github.com/twisted/twisted/pulls?utf8=&#10003;&amp;q=is%3Apr+is%3Aopen+-status%3Afailed">https://github.com/twisted/twisted/pulls?utf8=&#10003;&amp;q=is%3Apr+is%3Aopen+-status%3Afailed</A>

The one thing that this workflow is missing from trac is a convenient way for committers, having eyeballed a patch for any obvious malware, to send it to the buildbots.

We could also potentially just replace our buildbot build farm with a combination of appveyor and travis-ci; this would remove FreeBSD from our list of supported platforms, as well as eliminating a diversity of kernel integrations.  However, for the stuff that doesn't work in containers (mostly inotify) we could run one builder on non-container-based infrastructure, and for everything else (integrating with different system toolchains) we can test using Docker: <A HREF="https://docs.travis-ci.com/user/docker/.">https://docs.travis-ci.com/user/docker/.</A>  I am very much on the fence about this, since I don't want to move backwards in terms of our test coverage, but this would accelerate the contribution process so much that it's probably worth discussing.

10 years ago or so, we would routinely discover kernel bugs in our integration test harness and they would be different on different platforms.  But today's platform realities are considerably less harsh, since there are a lot more entities in the ecosystem that have taken responsibility for testing that layer of the stack; I couldn't find anything since 2008 or so where we really saw a difference between Fedora and Ubuntu at the kernel level, for example.

Thoughts?

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160521/3b678224/attachment-0001.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160521/3b678224/attachment-0001.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="030330.html">[Twisted-Python] [ANN] prometheus_async: asyncio/Twisted-aware	Python Prometheus instrumentation
</A></li>
	<LI>Next message (by thread): <A HREF="062795.html">[Twisted-Python] overview: new review queue venue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30333">[ date ]</a>
              <a href="thread.html#30333">[ thread ]</a>
              <a href="subject.html#30333">[ subject ]</a>
              <a href="author.html#30333">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
