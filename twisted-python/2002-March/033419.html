<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%223D%20Game%20Using%20Twisted%3F%22%2C%20or%3A%20%22Ach%20du%20lieber...%22&In-Reply-To=%3C20020314231357.GA23827%40ritsuko.xware.cx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033418.html">
   <LINK REL="Next"  HREF="033420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%223D%20Game%20Using%20Twisted%3F%22%2C%20or%3A%20%22Ach%20du%20lieber...%22&In-Reply-To=%3C20020314231357.GA23827%40ritsuko.xware.cx%3E"
       TITLE="[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;">andrew-twisted at puzzling.org
       </A><BR>
    <I>Thu Mar 14 16:13:57 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033418.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="033420.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du	lieber...&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33419">[ date ]</a>
              <a href="thread.html#33419">[ thread ]</a>
              <a href="subject.html#33419">[ subject ]</a>
              <a href="author.html#33419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 14, 2002 at 01:47:26PM -0800, Derek Simkowiak wrote:
&gt;<i> -&gt; Well, on the low level, we were discussing make banana extendable so you
</I>&gt;<i> -&gt; can define custom data types, e.g. a data type for location that is sent 
</I>&gt;<i> -&gt; in 4 bytes. The overhead for you would be one extra byte per message, I 
</I>&gt;<i> -&gt; think.
</I>&gt;<i> 
</I>&gt;<i> 	Not 4 bytes... 4 BITS (for the Z component only).  I don't know
</I>&gt;<i> what they're doing, but that's what their Lead Developer told me.
</I>
Yes, but you won't be sending 4 bits as a single packet -- that would have
just as much latency as 4 bytes, in practice.  The TCP/UDP overhead is more
like 40 bytes per packet, after all.

In practice, I suspect you'll be sending more than a single Z component at a
time.  You're more likely to change the X, Y and Z at once; or multiple Zs,
or something.  It all depends on the game, of course.  But my point is that
one byte extra on a X, Y &amp; Z message that you pack into e.g. 4 bytes is
going to be as fast in practice as anything else.

&gt;<i> 	Obviously, the need to fiddle with bitshifting (and other tricks,
</I>&gt;<i> like compressing certain packet types before transmisison) makes me think
</I>&gt;<i> I'll need to write my own network library.
</I>
Or extend an existing one...

I really know nothing about the internals of twisted.spread, but extending
it sounds like a better idea than building a new one.

&gt;<i> 	There are also further refinements in the CounterStrike/Half-Life
</I>&gt;<i> version of the Quake2 protocol, although I don't know what those are yet.  
</I>&gt;<i> I'm also dinking around with ideas like using bits to mark the traversal
</I>&gt;<i> of a binary &quot;packet opcode&quot; tree, putting the most common types of packets
</I>&gt;<i> near the top of the tree and the less common (or lower priority) packets
</I>&gt;<i> near the bottom -- this way, the opcode identifier for the most common
</I>&gt;<i> packet would only be one bit (and my networking code would be a nasty mess
</I>&gt;<i> of bitshifting and endian-specific code :).  Given this type of work, I'd
</I>&gt;<i> rather not just &quot;pass it off&quot; to banana.  (Although I'm still going to
</I>&gt;<i> take a close look at what's there.)
</I>
Sounds like good ol' Huffman codes to me.  Not a bad idea, though, assuming
that bit-packing gives any genuine advantage -- I'm generally skeptical that
the benefit of being able to squeeze an extra 5% through the network
outweighs the overhead (especially in code complexity) of bit-twiddling at
both ends (yes, I realise CPU is more plentiful than bandwidth).  I'd
personally leave bit twiddling until much later in a project, as I suspect
it could be an unnecessary and premature optimisation compared to the other
techniques mentioned.  Bit-twiddling strikes me as an implementation
optimisation, where algorithmic gains could be much more beneficial... but
then, I've never written a networked game, so I'm just guessing :)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033418.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="033420.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du	lieber...&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33419">[ date ]</a>
              <a href="thread.html#33419">[ thread ]</a>
              <a href="subject.html#33419">[ subject ]</a>
              <a href="author.html#33419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
