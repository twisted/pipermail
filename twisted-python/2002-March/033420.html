<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du	lieber...&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%223D%20Game%20Using%20Twisted%3F%22%2C%20or%3A%20%22Ach%20du%0A%09lieber...%22&In-Reply-To=%3C1016150358.360.40.camel%40janus%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="033419.html">
   <LINK REL="Next"  HREF="033424.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du	lieber...&quot;</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%223D%20Game%20Using%20Twisted%3F%22%2C%20or%3A%20%22Ach%20du%0A%09lieber...%22&In-Reply-To=%3C1016150358.360.40.camel%40janus%3E"
       TITLE="[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du	lieber...&quot;">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Mar 14 16:59:18 MST 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="033419.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="033424.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33420">[ date ]</a>
              <a href="thread.html#33420">[ thread ]</a>
              <a href="subject.html#33420">[ subject ]</a>
              <a href="author.html#33420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 2002-03-14 at 17:13, Andrew Bennetts wrote:
&gt;<i> On Thu, Mar 14, 2002 at 01:47:26PM -0800, Derek Simkowiak wrote:
</I>&gt;<i> &gt; -&gt; Well, on the low level, we were discussing make banana extendable so you
</I>&gt;<i> &gt; -&gt; can define custom data types, e.g. a data type for location that is sent 
</I>&gt;<i> &gt; -&gt; in 4 bytes. The overhead for you would be one extra byte per message, I 
</I>&gt;<i> &gt; -&gt; think.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 	Not 4 bytes... 4 BITS (for the Z component only).  I don't know
</I>&gt;<i> &gt; what they're doing, but that's what their Lead Developer told me.
</I>&gt;<i> 
</I>&gt;<i> Yes, but you won't be sending 4 bits as a single packet -- that would have
</I>&gt;<i> just as much latency as 4 bytes, in practice.  The TCP/UDP overhead is more
</I>&gt;<i> like 40 bytes per packet, after all.
</I>
And yes, this is where a lot of often-neglected network trickiness
happens -- actually getting more data into each packet.  Balancing
latency against keeping a full packet payload is hard.

&gt;<i> &gt; 	Obviously, the need to fiddle with bitshifting (and other tricks,
</I>&gt;<i> &gt; like compressing certain packet types before transmisison) makes me think
</I>&gt;<i> &gt; I'll need to write my own network library.
</I>&gt;<i> 
</I>&gt;<i> Or extend an existing one...
</I>
And, while pb is designed to be extended to do just this, the amount of
application-specific optimization necessary for a first-person shooter
is really phenomenal.  You'll need to optimize PB down quite a bit
further than it's already been (although PB is built to be optimized, so
it's not really a problem) even to be adequate for the control stream. 
The biggest problem I can see you having with the protocol itself is the
fact that it only operates over TCP.  A UDP extension for doing things
like movement packets would be really handy!

&gt;<i> I really know nothing about the internals of twisted.spread, but extending
</I>&gt;<i> it sounds like a better idea than building a new one.
</I>
twisted.spread, and Perspective Broker, are both designed to be highly
extensible.  Itamar is currently working on the final iteration of
banana, which will define some mechanisms for backwards-compatibility,
as well as enabling us to write an RFC.

Consider ancillary services that are going to interoperate with your
game, too; if you are extending PB in order to do your game protocol,
then applications like game browsers, high-score charts on webpages (and
so on) will come together in a snap.  Other folks are also writing games
that use Twisted for networking, and it would be neat if they could all
talk to each other!

&gt;<i> &gt; 	There are also further refinements in the CounterStrike/Half-Life
</I>&gt;<i> &gt; version of the Quake2 protocol, although I don't know what those are yet.  
</I>&gt;<i> &gt; I'm also dinking around with ideas like using bits to mark the traversal
</I>&gt;<i> &gt; of a binary &quot;packet opcode&quot; tree, putting the most common types of packets
</I>&gt;<i> &gt; near the top of the tree and the less common (or lower priority) packets
</I>&gt;<i> &gt; near the bottom -- this way, the opcode identifier for the most common
</I>&gt;<i> &gt; packet would only be one bit (and my networking code would be a nasty mess
</I>&gt;<i> &gt; of bitshifting and endian-specific code :).  Given this type of work, I'd
</I>&gt;<i> &gt; rather not just &quot;pass it off&quot; to banana.  (Although I'm still going to
</I>&gt;<i> &gt; take a close look at what's there.)
</I>&gt;<i> 
</I>&gt;<i> Sounds like good ol' Huffman codes to me.  Not a bad idea, though, assuming
</I>&gt;<i> that bit-packing gives any genuine advantage -- I'm generally skeptical that
</I>&gt;<i> the benefit of being able to squeeze an extra 5% through the network
</I>&gt;<i> outweighs the overhead (especially in code complexity) of bit-twiddling at
</I>&gt;<i> both ends (yes, I realise CPU is more plentiful than bandwidth).  I'd
</I>&gt;<i> personally leave bit twiddling until much later in a project, as I suspect
</I>&gt;<i> it could be an unnecessary and premature optimisation compared to the other
</I>&gt;<i> techniques mentioned.  Bit-twiddling strikes me as an implementation
</I>&gt;<i> optimisation, where algorithmic gains could be much more beneficial... but
</I>&gt;<i> then, I've never written a networked game, so I'm just guessing :)
</I>
Networked games are tough, and Derek's concerns are valid.

My point of view on this is that PB cannot handle such a game by itself,
but it defines mechanisms for extensibility that are designed to solve
exactly this sort of problem.  PB's purpose is twofold.  It does provide
a useful, generic, high level protocol that one can use out-of-the-box
in lots of different kinds of applications.  However, I also hope to
provide a sort of meta-standard for protocols that have domain-specific
optimization requirements, so that real systems that solve hard problems
can communicate lower-priority (e.g. &quot;the ones that don't have to be as
close to real time as possible&quot;) messages using a mechanism less abusive
to their performance requirements (either on the network in CPU) than
XML-RPC, and easier to add new messages to than something like CORBA. 
For most systems, this should really be good enough.

Ideally I'd like to replace HTTP with it, but that's obviously a bit
more work than has been done :)  (Smash the web!)

Despite the fact that I want to provide a reasonably efficient network
layer, my own humble opinion is that systems that are so
latency-sensitive that PB doesn't work for them out of the box are
probably kidding themselves about the latency issues that arise just by
using the internet... but I think that John Carmack disagrees.

At the very least, PB should help one get off the ground and start
prototyping game functionality really early, before one worries about
seriously packing the network protocol; if one's game is just a 3D
shooter this is probably not that interesting.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 232 bytes
Desc: This is a digitally signed message part
URL: &lt;/pipermail/twisted-python/attachments/20020314/e34e0f76/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="033419.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="033424.html">[Twisted-Python] &quot;3D Game Using Twisted?&quot;, or: &quot;Ach du lieber...&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33420">[ date ]</a>
              <a href="thread.html#33420">[ thread ]</a>
              <a href="subject.html#33420">[ subject ]</a>
              <a href="author.html#33420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
