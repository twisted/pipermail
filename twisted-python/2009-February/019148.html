<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Traceback on loseConnection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Traceback%20on%20loseConnection&In-Reply-To=20090204145912.12853.199041922.divmod.quotient.3395%40henry.divmod.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019141.html">
   <LINK REL="Next"  HREF="019149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Traceback on loseConnection</H1>
    <B>Werner Thie</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Traceback%20on%20loseConnection&In-Reply-To=20090204145912.12853.199041922.divmod.quotient.3395%40henry.divmod.com"
       TITLE="[Twisted-Python] Traceback on loseConnection">wthie at thiengineering.ch
       </A><BR>
    <I>Thu Feb  5 05:34:05 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019141.html">[Twisted-Python] Traceback on loseConnection
</A></li>
        <LI>Next message: <A HREF="019149.html">[Twisted-Python] Traceback on loseConnection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19148">[ date ]</a>
              <a href="thread.html#19148">[ thread ]</a>
              <a href="subject.html#19148">[ subject ]</a>
              <a href="author.html#19148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jean-Paul

Sorry for coming back...

Just to be a little more precise:

This is a nevow/athena site I therefore have little done in the bowels 
of twisted and specially no artwork in handling loseConnection.

Site running on twisted SVN 25479 (appr 8.1.0) shows absolutely no problems.

Site running on twisted SVN 26124 (appr 8.2.0) shows this problem, which 
definitely means that something in the guts of twisted is now barfing at me.

But its only about 700 SVN commits in between, I think I will do a SA 
approach to figure out where this barfing starts and try to nail it to 
the relevant commit.

I would be more than thankful if somebody could spare me this effort by 
throwing in an educated guess.

Thxs, Werner

PS I like the one about the dots, that's why I'm not working with Java



Jean-Paul Calderone wrote:
&gt;<i> On Wed, 04 Feb 2009 11:04:26 +0100, Werner Thie 
</I>&gt;<i> &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wthie at thiengineering.ch</A>&gt; wrote:
</I>&gt;&gt;<i> Hi all
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My users are complaining that they get the odd disconnect while using 
</I>&gt;&gt;<i> my site built with nevow/athena on FreeBSD 7.1 with the poll reactor. 
</I>&gt;&gt;<i> I recently switched to twisted 8.2 release and am now observing 199 
</I>&gt;&gt;<i> 'Unhandled Error' out of 298436 logged requests with the following 
</I>&gt;&gt;<i> traceback.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Any clues?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> TIA, Werner
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i>           File 
</I>&gt;&gt;<i> &quot;/usr/local/lib/python2.5/site-packages/Twisted-8.2.0_r26128- 
</I>&gt;&gt;<i> py2.5-freebsd-7.1-RELEASE-amd64.egg/twisted/web/proxy.py&quot;, line 79, in 
</I>&gt;&gt;<i> handleResponseEnd
</I>&gt;&gt;<i>             self.father.channel.transport.loseConnection()
</I>&gt;&gt;<i>         exceptions.AttributeError: 'NoneType' object has no attribute 
</I>&gt;&gt;<i> 'transport'
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Anywhere there are that many dots in a single expression, there's bound to
</I>&gt;<i> be trouble. :)
</I>&gt;<i> 
</I>&gt;<i> It's probably something rather simple, like the connection being lost near
</I>&gt;<i> when the response ends.  It's probably also pretty easy to fix (by being
</I>&gt;<i> more careful in how lost connections are handled).  If you can create a
</I>&gt;<i> short example which reproduces the problem, that'll go a long way towards
</I>&gt;<i> helping it get fixed.  I suggest instrumenting the codepath that sets the
</I>&gt;<i> &quot;channel&quot; attribute to None and watching to see what happens.
</I>&gt;<i> 
</I>&gt;<i> Jean-Paul
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019141.html">[Twisted-Python] Traceback on loseConnection
</A></li>
	<LI>Next message: <A HREF="019149.html">[Twisted-Python] Traceback on loseConnection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19148">[ date ]</a>
              <a href="thread.html#19148">[ thread ]</a>
              <a href="subject.html#19148">[ subject ]</a>
              <a href="author.html#19148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
