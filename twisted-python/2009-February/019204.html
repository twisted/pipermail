<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20mind%2C%20twisted.cred%20and%20HTTPAuthSessionWrapper&In-Reply-To=200902191847.38057.esteve%40sindominio.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019203.html">
   <LINK REL="Next"  HREF="019205.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20mind%2C%20twisted.cred%20and%20HTTPAuthSessionWrapper&In-Reply-To=200902191847.38057.esteve%40sindominio.net"
       TITLE="[Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper">exarkun at divmod.com
       </A><BR>
    <I>Thu Feb 19 12:57:29 EST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019203.html">[Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper
</A></li>
        <LI>Next message: <A HREF="019205.html">[Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19204">[ date ]</a>
              <a href="thread.html#19204">[ thread ]</a>
              <a href="subject.html#19204">[ subject ]</a>
              <a href="author.html#19204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 19 Feb 2009 18:47:37 +0100, Esteve Fernandez &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">esteve at sindominio.net</A>&gt; wrote:
&gt;<i>On Thursday 19 February 2009 18:28:59 Jean-Paul Calderone wrote:
</I>&gt;&gt;<i> What kind of &quot;extra information&quot; are you trying to pass?  Generally, all
</I>&gt;&gt;<i> information belongs with the avatar object.  The mind should be used to
</I>&gt;&gt;<i> interact with the protocol's notion of the user (as the avatar is used to
</I>&gt;&gt;<i> interact with the realm's notion of the user).
</I>&gt;<i>
</I>&gt;<i>Our checker generates a session per successful login, and all subsequent calls
</I>&gt;<i>use that session to authenticate requests. The way I thought for using a mind
</I>&gt;<i>is to create an empty object and populate it with the remote session object
</I>&gt;<i>once the user has logged in successfully.
</I>&gt;<i>
</I>&gt;<i>Is a mind the right place to put that session?
</I>
It doesn't seem like a good use of the mind to me.  I'd put the session
inside the avatar.  You may need a wider interface than IResource for
this, if you want to inspect the session from anywhere other than the
avatar itself (since the avatar's interface is IResource in this case),
or you may just want to use the session in order to implement getChild
and render appropriately.

For example, if a user is allowed to access /foo, then you might represent
that by including {'foo': True} in the session somehow.  Then, your can
have a getChild method which looks at that information if it is asked for
the &quot;foo&quot; child.  If 'foo' is not associated with True, you can reject the
request, otherwise you can process it.

You can also use multiple different avatar classes to represent this.
Instead of keeping a session and referring to it when deciding whether
a particular request is acceptable, you may want to have a FooAvatar and
a NoFooAvatar.  FooAvatar's getChild would always give back a resource
when asked for &quot;foo&quot;, and NoFooAvatar never would.  The only checking would
be in your realm, where you decide what kind of avatar to give back from
requestAvatar.  This might imply that your realm is the right place to
keep your session data.

There are lots more possible approaches, of course, but these are two of
the most common.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019203.html">[Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper
</A></li>
	<LI>Next message: <A HREF="019205.html">[Twisted-Python] mind, twisted.cred and HTTPAuthSessionWrapper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19204">[ date ]</a>
              <a href="thread.html#19204">[ thread ]</a>
              <a href="subject.html#19204">[ subject ]</a>
              <a href="author.html#19204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
