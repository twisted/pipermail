<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Perspective Broker and thread safe!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Perspective%20Broker%20and%20thread%20safe%21&In-Reply-To=%3Cfb67087a0902060830s6b96df3fkf5c1337f5f4b5af0%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051732.html">
   <LINK REL="Next"  HREF="051665.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Perspective Broker and thread safe!</H1>
    <B>B. B.</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Perspective%20Broker%20and%20thread%20safe%21&In-Reply-To=%3Cfb67087a0902060830s6b96df3fkf5c1337f5f4b5af0%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Perspective Broker and thread safe!">thebbzoo at gmail.com
       </A><BR>
    <I>Fri Feb  6 09:30:19 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051732.html">[Twisted-Python] Twisted Sprint in February
</A></li>
        <LI>Next message (by thread): <A HREF="051665.html">[Twisted-Python] Perspective Broker and thread safe!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51661">[ date ]</a>
              <a href="thread.html#51661">[ thread ]</a>
              <a href="subject.html#51661">[ subject ]</a>
              <a href="author.html#51661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, I am relative new to twisted, though I have manage to make a simple
client server solution ( using perspective broker ) that I am now try to
refactor a little.

The solution is now something like :

Using perspective broker, clients connects to the server ( setting up a
remote reference to each other ).
Via a PB call, each client can request the server do some processing. The
result of  the processing is distributed to each connected client - and the
client asking for the request gets a simple status report!

This solution works quite well, the only bottleneck is that all the
&quot;thread-safe&quot; processing on the server is done in the mainloop of the server
reactor. I want to do concurrent processing on the server!

The function doing the processing on the server, also distribute the result
to all the connected clients, and returns the result to the klient asking
for the request.

My question is :
If I just &quot;defer&quot; that function &quot;toThread&quot; ( like  threads.deferToThread(
myServerProcessingFunction ) ). Do I have potential problems, when several
threads try to distribute its result to the connecting clients???


If I have a problem:
Can I make a quick fix as follows:  Within each thread ( started with the
threads.deferToThread function ), I do the distributing to the clients by
using the &quot;reactor.callFromThread&quot;
( like reactor.callFromThread( distributeToAllClient , myResult ) where the
function distributeToAllClient are using the remoteReference for each client
to send the &quot;myResult&quot; )


Or is the only solution, to let the myServerProcessingFunction returns the
&quot;myResult&quot; to be distributed to all connected clients, and do the
distribution in the reactor mainthread???


Thank you!


Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20090206/5fd2a31a/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051732.html">[Twisted-Python] Twisted Sprint in February
</A></li>
	<LI>Next message (by thread): <A HREF="051665.html">[Twisted-Python] Perspective Broker and thread safe!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51661">[ date ]</a>
              <a href="thread.html#51661">[ thread ]</a>
              <a href="subject.html#51661">[ subject ]</a>
              <a href="author.html#51661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
