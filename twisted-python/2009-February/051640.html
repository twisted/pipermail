<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Maximum Recursion Depth Error with Twisted	8.2/Stackless 2.6.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Maximum%20Recursion%20Depth%20Error%20with%20Twisted%0A%098.2/Stackless%202.6.1&In-Reply-To=%3C579294.777.qm%40web34203.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051654.html">
   <LINK REL="Next"  HREF="051642.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Maximum Recursion Depth Error with Twisted	8.2/Stackless 2.6.1</H1>
    <B>Andrew Francis</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Maximum%20Recursion%20Depth%20Error%20with%20Twisted%0A%098.2/Stackless%202.6.1&In-Reply-To=%3C579294.777.qm%40web34203.mail.mud.yahoo.com%3E"
       TITLE="[Twisted-Python] Maximum Recursion Depth Error with Twisted	8.2/Stackless 2.6.1">andrewfr_ice at yahoo.com
       </A><BR>
    <I>Mon Feb  2 15:47:47 MST 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051654.html">[Twisted-Python] Twisted Conch SSH timeout
</A></li>
        <LI>Next message (by thread): <A HREF="051642.html">[Twisted-Python] Traceback on loseConnection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51640">[ date ]</a>
              <a href="thread.html#51640">[ thread ]</a>
              <a href="subject.html#51640">[ subject ]</a>
              <a href="author.html#51640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Colleagues:

I recently updated to Stackless 2.6.1 and Twisted 8.2. I executed the following programme that works fine under Stackless 2.5.2 and Twisted (including 8.2) and I received the following error:

traceback (most recent call last):
          File &quot;ToyProcessor5.py&quot;, line 60, in twistedReactor
            reactor.run()
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/internet/base.py&quot;
, line 1048, in run
            self.mainLoop()
        --- &lt;exception caught here&gt; ---
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/internet/base.py&quot;
, line 1057, in mainLoop
            self.runUntilCurrent()
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/internet/base.py&quot;
, line 707, in runUntilCurrent
            log.deferr()
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/python/log.py&quot;, l
ine 153, in err
            _stuff = failure.Failure()
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/python/failure.py
&quot;, line 265, in __init__
            parentCs = reflect.allYourBase(self.type)
&quot;, line 542, in allYourBase
            accumulateBases(classObj, l, baseClass)
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/python/reflect.py&quot;, line 550, in accumulateBases
            accumulateBases(base, l, baseClass)
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/python/reflect.py&quot;, line 550, in accumulateBases
            accumulateBases(base, l, baseClass)
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/python/reflect.py&quot;, line 550, in accumulateBases
            accumulateBases(base, l, baseClass)
          File &quot;/usr/local/lib/python2.6/site-packages/twisted/python/reflect.py&quot;, line 550, in accumulateBases
            accumulateBases(base, l, baseClass)
        exceptions.RuntimeError: maximum recursion depth exceeded

Similarily written programmes fail in the same fashion. What is suspicious is that there is no recursion in the offending section. Even if I create one worker tasklet, I get the same error.

def twistedReactor():
    l = task.LoopingCall(stackless.schedule)
    l.start(.01)
    reactor.run()

however, if I change

l = task.LoopingCall(stackless.schedule)

to

l = task.LoopingCall(tick)

and tick is

def tick():
    stackless.schedule()

the programme works. Although a work around, I would like to find the real problem.

What particular worries me is when I created small test examples, I was not  able to recreate the problem. Something else is going on....

What I would appreciate is some hints as to what may be happening.  

- I normally don't expect &quot;Maximum Recursion Depth&quot; errors in Stackless. 
- What is the reflect.allYourBases stuff? 
- What is log.deferr? (I don't recall seeing that method).

If I get few clues, it would make it easier for me to write new tests and zero in on the problem. Hopefully the problem is with my code rather than Stackless 2.6.1 and/or Twisted 8.2

I have included some sample code. Unfortunately ToyProcessor5.py is a bit large (I have newer code that is smaller but requires more files)

Cheers,
Andrew












      
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ToyProcessor5.py
Type: text/x-python
Size: 13450 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20090202/8ecf9fca/attachment-0006.py&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Bad.py
Type: text/x-python
Size: 1486 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20090202/8ecf9fca/attachment-0007.py&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Good.py
Type: text/x-python
Size: 1444 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20090202/8ecf9fca/attachment-0008.py&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051654.html">[Twisted-Python] Twisted Conch SSH timeout
</A></li>
	<LI>Next message (by thread): <A HREF="051642.html">[Twisted-Python] Traceback on loseConnection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51640">[ date ]</a>
              <a href="thread.html#51640">[ thread ]</a>
              <a href="subject.html#51640">[ subject ]</a>
              <a href="author.html#51640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
