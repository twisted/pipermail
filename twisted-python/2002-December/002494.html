<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] POP3 improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20POP3%20improvements&In-Reply-To=1041271792.640.43.camel%40mingus">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002493.html">
   <LINK REL="Next"  HREF="002496.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] POP3 improvements</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20POP3%20improvements&In-Reply-To=1041271792.640.43.camel%40mingus"
       TITLE="[Twisted-Python] POP3 improvements">andrew-twisted at puzzling.org
       </A><BR>
    <I>Mon Dec 30 20:57:06 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="002493.html">[Twisted-Python] POP3 improvements
</A></li>
        <LI>Next message: <A HREF="002496.html">[Twisted-Python] POP3 improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2494">[ date ]</a>
              <a href="thread.html#2494">[ thread ]</a>
              <a href="subject.html#2494">[ subject ]</a>
              <a href="author.html#2494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Dec 30, 2002 at 01:09:52PM -0500, Abe Fettig wrote:
&gt;<i> (diff attached to make it easier to see what I changed)
</I>&gt;<i> 
</I>&gt;<i> On Mon, 2002-12-30 at 11:48, Itamar Shtull-Trauring wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; Currently it works like this:  When you send a command that returns a
</I>&gt;<i> &gt; &gt; multi-line response (LIST or RETR), you pass an optional file-like
</I>&gt;<i> &gt; &gt; object that the response should be written to.  If no file argument is
</I>&gt;<i> &gt; &gt; supplied a StringIO is used.  When the server is finished sending the
</I>&gt;<i> &gt; &gt; response, handle_COMMANDNAME is called, passing back the file object
</I>&gt;<i> &gt; &gt; containing the downloaded response.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Instead of calling handle_COMMANDNAME, why not return a Deferred of the
</I>&gt;<i> &gt; success?
</I>&gt;<i> 
</I>&gt;<i> Based on other Twisted protocol handlers I thought that the preferred
</I>&gt;<i> way to handle events in protocols was to create methods that get called
</I>&gt;<i> in response to events.  That way you create a class that inherits from
</I>&gt;<i> POP3Client, and override the methods for events you want to handle. 
</I>&gt;<i> Being able use classes and inheritance this way is one of the things I
</I>&gt;<i> really like about Twisted.
</I>
It depends; if the event is in response to a request, e.g. LIST, it makes
sense to return a Deferred that will receive a list of available messages.
FTPClient works this way, and is very convenient -- an FTPClient user can
queue commands (like LIST, RETR, etc), and as the server responds, the
Deferreds will fire... and there's no confusion if you issue multiple LIST
commands in different directories, whereas a handle_LIST callback doesn't
have the same advantage.

In your case, I'd recommend Deferreds.

If you're writing a server that waits for incoming events, then a
handle_COMMANDNAME scheme would make good sense.

&gt;<i> Also, that's the way it was in the original POP3 module.
</I>
Well, if you're breaking backwards-compatibility (are you?), that doesn't
really matter ;)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002493.html">[Twisted-Python] POP3 improvements
</A></li>
	<LI>Next message: <A HREF="002496.html">[Twisted-Python] POP3 improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2494">[ date ]</a>
              <a href="thread.html#2494">[ thread ]</a>
              <a href="subject.html#2494">[ subject ]</a>
              <a href="author.html#2494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
