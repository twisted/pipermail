<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] POP3 improvements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20POP3%20improvements&In-Reply-To=20021231061639.GB20756%40frobozz.local">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002497.html">
   <LINK REL="Next"  HREF="002500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] POP3 improvements</H1>
    <B>Christopher Armstrong</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20POP3%20improvements&In-Reply-To=20021231061639.GB20756%40frobozz.local"
       TITLE="[Twisted-Python] POP3 improvements">radix at twistedmatrix.com
       </A><BR>
    <I>Tue Dec 31 01:24:40 EST 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="002497.html">[Twisted-Python] POP3 improvements
</A></li>
        <LI>Next message: <A HREF="002500.html">[Twisted-Python] POP3 improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2498">[ date ]</a>
              <a href="thread.html#2498">[ thread ]</a>
              <a href="subject.html#2498">[ subject ]</a>
              <a href="author.html#2498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Dec 31, 2002 at 05:16:39PM +1100, Andrew Bennetts wrote:
&gt;<i> Actually, I just realised, I fibbed about FTPClient... it does something
</I>&gt;<i> a little unusual, and I'm interested in opinions on this.
</I>&gt;<i> 
</I>&gt;<i> Say you call FTPClient.list().  You don't get a Deferred, you actually have
</I>&gt;<i> to pass in a Protocol *instance*, and as the data for FTPClient.list is
</I>&gt;<i> received, it gets passed straight to that Protocol, via dataReceived.  In
</I>&gt;<i> fact, the FTPClient internally makes a Factory for that connection, which
</I>&gt;<i> (essentially) uses that Protocol, but that's an implementation detail.  This
</I>&gt;<i> is a bit weird, though, because using an FTPClient involves creating
</I>&gt;<i> Protocols without associated Factories, and nowhere else in Twisted does
</I>&gt;<i> that.
</I>&gt;<i> 
</I>&gt;<i> [The reason why I got confused about Deferreds in the interface, is that I
</I>&gt;<i> use Deferreds internally in FTPClient to manage all this.]
</I>&gt;<i> 
</I>&gt;<i> So this is actually another interface, possibly specific to FTP, where you
</I>&gt;<i> pass a Protocol instance -- this allows for progressive processing of data,
</I>&gt;<i> rather than all-at-once, and this feels &quot;more Twisted&quot; to me :)
</I>&gt;<i>   
</I>&gt;<i> So, to parse the results of an FTP listing, you pass in a
</I>&gt;<i> FTPFileListProtocol... this is useful, but there probably should be a
</I>&gt;<i> higher-level interface to this that returns a Deferred, for when you don't
</I>&gt;<i> need to do custom parsing and don't care about progressive processing (i.e.
</I>&gt;<i> most of the time).
</I>
Euughhh.. that sounds really horrible at first glance. Are there any
cases you can think of that actually make use of passing in different
Protocol classes? Also, how much less flexible would it be to simply
set the protocols as attributes on the FTPClient if you want to
override?  (similar to Factory.protocol). The FTPClient would then just use
'self.whateverProtocol'. This agrees much more with what a lot of
Twisted already does, I think.

-- 
 Twisted | Christopher Armstrong: International Man of Twistery
  Radix  |          Release Manager,  Twisted Project
---------+     <A HREF="http://twistedmatrix.com/users/radix.twistd/">http://twistedmatrix.com/users/radix.twistd/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002497.html">[Twisted-Python] POP3 improvements
</A></li>
	<LI>Next message: <A HREF="002500.html">[Twisted-Python] POP3 improvements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2498">[ date ]</a>
              <a href="thread.html#2498">[ thread ]</a>
              <a href="subject.html#2498">[ subject ]</a>
              <a href="author.html#2498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
