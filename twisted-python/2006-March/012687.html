<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] waitForDeferred Question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20waitForDeferred%20Question&In-Reply-To=E1FIBNE-0004jx-02%40pyramid.twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012689.html">
   <LINK REL="Next"  HREF="012688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] waitForDeferred Question</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20waitForDeferred%20Question&In-Reply-To=E1FIBNE-0004jx-02%40pyramid.twistedmatrix.com"
       TITLE="[Twisted-Python] waitForDeferred Question">general at eepatents.com
       </A><BR>
    <I>Sat Mar 11 18:21:26 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012689.html">[Twisted-Python] FTP: A little help?
</A></li>
        <LI>Next message: <A HREF="012688.html">[Twisted-Python] Removal of deprecated twisted.python.components	functionality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12687">[ date ]</a>
              <a href="thread.html#12687">[ thread ]</a>
              <a href="subject.html#12687">[ subject ]</a>
              <a href="author.html#12687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/11/06, Phil Mayers &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A>&gt; wrote:
&gt;&gt;<i> Brian Granger wrote:
</I>&gt;&gt;&gt;<i> I probably should have given more details about what I am trying to
</I>&gt;&gt;&gt;<i> do.  Before I get going, I should mention that I have been using
</I>&gt;&gt;&gt;<i> Twisted heavily for 1.5 years and I have, for the most part, learned
</I>&gt;&gt;&gt;<i> to play the &quot;Twisted Game.&quot;
</I>&gt;&gt;<i> If that is the case, you really ought to have known the answer was &quot;you
</I>&gt;&gt;<i> don't&quot; ;o)
</I>&gt;<i>  
</I>&gt;<i> I respectfully disagree that what I am trying to do somehow violates
</I>&gt;<i> the unwritten Twisted ethic.  I am not using threads and I don't have
</I>&gt;<i> blocking code anywhere.  When I write things like:
</I>&gt;<i>  
</I>&gt;&gt;&gt;<i> myresult = a.computeSomethingThatUsesTwisted()
</I>&gt;<i>  
</I>&gt;<i> It does not really block - it only appears to block.  What I mean by
</I>&gt;<i> this is that is does not block execution, it only blocks the user from
</I>&gt;<i> starting new commands.  The full machinery of Twisted is free to
</I>&gt;<i> proceed while the result is pending.
</I>
Rather than thinking of your goal as &quot;blocking&quot; the user from starting a
new command when once is pending, think of it as &quot;deferring&quot; execution
of any new commands entered by the user. With that Twisted-compatible
mindset in place, you can design a queue for deferring your user's commands.

If no commands are pending in the queue, you simply run it right away
and return a deferred to its result, as has been discussed. If the user
starts a new command while the first is still pending, simply wrap the
execution of that new command in its own deferred and chain it to the
pending deferred. If the new command depends on the result of the
pending one, that's just fine. When the first command completes, its
result will be passed to the callback that will then run your
second-entered command.

The outcome of all will be pretty cool for your user. He can type &quot;x =
hugeFunction(a)&quot; and get something like &quot;Computing 'x =
hugeFunction(a)...'&quot; Being impatient, he can then type &quot;y =
massiveFunction(x)&quot; and then get &quot;Waiting for x to compute 'y =
hugeFunction(x)...'&quot; and so on. Instead of being forced to just sit and
wait, he can *benefit* from the async power of Twisted by being able to
stack up his computations and see the whole chain of deferred operations.

By the way, I've been down this &quot;it must block&quot; road myself several
times before I eventually realized that it will never work. Code that
sits around and idles while it waits for something can only exist in a
separate thread or process from the Twisted event loop.

Best regards,
Ed Suominen




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012689.html">[Twisted-Python] FTP: A little help?
</A></li>
	<LI>Next message: <A HREF="012688.html">[Twisted-Python] Removal of deprecated twisted.python.components	functionality
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12687">[ date ]</a>
              <a href="thread.html#12687">[ thread ]</a>
              <a href="subject.html#12687">[ subject ]</a>
              <a href="author.html#12687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
