<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] waitForDeferred Question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20waitForDeferred%20Question&In-Reply-To=%3Cfa8579a40603102213y4d39d483m89f55f7895ec09d0%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="045176.html">
   <LINK REL="Next"  HREF="045178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] waitForDeferred Question</H1>
    <B>Brian Granger</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20waitForDeferred%20Question&In-Reply-To=%3Cfa8579a40603102213y4d39d483m89f55f7895ec09d0%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] waitForDeferred Question">bgranger at scu.edu
       </A><BR>
    <I>Fri Mar 10 23:13:05 MST 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="045176.html">[Twisted-Python] waitForDeferred Question
</A></li>
        <LI>Next message (by thread): <A HREF="045178.html">[Twisted-Python] waitForDeferred Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45177">[ date ]</a>
              <a href="thread.html#45177">[ thread ]</a>
              <a href="subject.html#45177">[ subject ]</a>
              <a href="author.html#45177">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/10/06, Tim Allen &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">screwtape at froup.com</A>&gt; wrote:
&gt;<i> On 11 Mar 2006, at 15:44, Brian Granger wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Here is a typical (madeup) usage case:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; a = TwistedEnabledObject()
</I>&gt;<i> &gt;&gt;&gt;&gt; a.connect(addr)                # This uses reactor.connectTCP to
</I>&gt;<i> &gt; connect to a server
</I>&gt;<i> &gt;&gt;&gt;&gt; myresult = a.computeSomethingUsingTwisted(args)     # This
</I>&gt;<i> &gt;&gt;&gt;&gt; should block!!!
</I>&gt;<i> &gt; ...and maybe...
</I>&gt;<i> &gt;&gt;&gt;&gt; y = f(myresult)
</I>&gt;<i> &gt;&gt;&gt;&gt; plot(y)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The key point is that the user will want to direclty use myresult
</I>&gt;<i> &gt; interactively.  Also they won't know ahead of time what actions they
</I>&gt;<i> &gt; will want to do.  Anyone who has used Matlab or Mathematica
</I>&gt;<i> &gt; (scientists) will find this way of working extremely familiar.  There
</I>&gt;<i> &gt; is simply no way that users will want to get a Deferred() and add
</I>&gt;<i> &gt; callbacks to trigger actions.  Thus I would argue that I DO want to
</I>&gt;<i> &gt; make my properly written asynchronous code blocking.
</I>&gt;<i>
</I>&gt;<i> It sounds like this is a user-interface problem rather than a
</I>&gt;<i> software-design problem. A common tool for solving such problems is
</I>&gt;<i> to ask, &quot;What does other, similar software do?&quot;.
</I>&gt;<i>
</I>&gt;<i> It occurs to me that the problem you're facing is not unlike, oh, job-
</I>&gt;<i> control in bash or zsh. I'd imagine a usage case that looks something
</I>&gt;<i> like this:
</I>&gt;<i>
</I>
I agree that it is a user interface question.  Other software along
these lines, like Mathematica and Matlab are fully blocking. 
Personally, I think this is too restrictive.  For the cases you bring
up, where the computeSomethingUsingTwisted() method could take a long
time it completely makes sense to have something like a job control
interface.  In fact, we are building this design pattern into our UI
where appropriate.

But, in many cases, the computeSomethingUsingTwisted() doesn't take
long at all.  An example of this would be probing the status of the
remote server or a trivial computation that a server has relevant data
for.  In these cases, the result is available nearly instantly (faster
then the user could detect, like 1 ms) and it is silly to have a job
interface.  You simply want the result directly.

In our system, we can easily imagine a user making dozens of
interactive calls like this over short periods of time.  When all of
these results are available essentially immediately, it iseems like
overkill to have a more complicated UI.  But, it is very appropriate
to use Twisted underneath, because it really is an asynchronous system
and all the error detection and handling is best dealt with that
asynchronously.  But as long as there are no errors, I woult like the
Twisted machinery to just pass along the result directly.


&gt;<i>  &gt;&gt;&gt; a = TwistedEnabledObject()
</I>&gt;<i>  &gt;&gt;&gt; a.connect(addr)
</I>&gt;<i> [1] TwistedEnabledObject.connect(self, addr)
</I>&gt;<i> [1] done TwistedEnabledObject.connect(self, addr)
</I>&gt;<i>  &gt;&gt;&gt; result1 = a.computeSomethingUsingTwisted(args)
</I>&gt;<i> [1] TwistedEnabledObject.computeSomethingUsingTwisted(args)
</I>&gt;<i>  &gt;&gt;&gt; result2 = a.computeSomeOtherThingUsingTwisted(args)
</I>&gt;<i> [2] TwistedEnabledObject.computeSomeOtherThingUsingTwisted(args)
</I>&gt;<i>  &gt;&gt;&gt; print 1+3
</I>&gt;<i> 4
</I>&gt;<i>  &gt;&gt;&gt; jobs()
</I>&gt;<i> [1] running TwistedEnabledObject.computeSomethingUsingTwisted(args)
</I>&gt;<i> [2] running TwistedEnabledObject.computeSomeOtherThingUsingTwisted(args)
</I>&gt;<i>  &gt;&gt;&gt; print repr(result1)
</I>&gt;<i> &lt;deferredResult (waiting for result)&gt;
</I>&gt;<i> [1] done TwistedEnabledObject.computeSomethingUsingTwisted(args)
</I>&gt;<i>  &gt;&gt;&gt; print repr(result1)
</I>&gt;<i> &lt;deferredResult with value: 42&gt;
</I>&gt;<i>  &gt;&gt;&gt; print result.value
</I>&gt;<i> 42
</I>&gt;<i>
</I>&gt;<i> I think I'd appreciate an environment like that more than an
</I>&gt;<i> environment that made me wait for things all the time. I don't know
</I>&gt;<i> if it's possible to achieve with your PyCrust/Twisted hybrid, of course.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>

--
Brian Granger
Santa Clara University
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ellisonbg at gmail.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="045176.html">[Twisted-Python] waitForDeferred Question
</A></li>
	<LI>Next message (by thread): <A HREF="045178.html">[Twisted-Python] waitForDeferred Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45177">[ date ]</a>
              <a href="thread.html#45177">[ thread ]</a>
              <a href="subject.html#45177">[ subject ]</a>
              <a href="author.html#45177">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
