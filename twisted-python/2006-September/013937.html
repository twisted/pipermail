<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PB auth with LDAP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PB%20auth%20with%20LDAP&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013936.html">
   <LINK REL="Next"  HREF="013938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PB auth with LDAP</H1>
    <B>Marvin McNett</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PB%20auth%20with%20LDAP&In-Reply-To="
       TITLE="[Twisted-Python] PB auth with LDAP">mmcnett at cs.ucsd.edu
       </A><BR>
    <I>Mon Sep  4 14:02:57 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="013936.html">[Twisted-Python] callLater
</A></li>
        <LI>Next message: <A HREF="013938.html">[Twisted-Python] PB auth with LDAP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13937">[ date ]</a>
              <a href="thread.html#13937">[ thread ]</a>
              <a href="subject.html#13937">[ subject ]</a>
              <a href="author.html#13937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Just noticed that PB's _PortalAuthChallenger implements 
IUsernameHashedPassword, IUsernameMD5Passwordauth, but not 
IUsernamePassword.  This requires that I store my passwords in plain 
text or MD5 hash, then fetch the password to do a comparison at login. 
However, this is inconvenient when storing passwords in LDAP.  First, 
LDAP doesn't like returning passwords (Unless you're requesting it as 
the database administrator).  Second, storing passwords in plain text or 
even as MD5 hashes is less than ideal.  Finally, LDAP already has a 
comparison operation (which I can do with minimal privileges), so I 
should never need to actually fetch the password.

All this means that it would be very convenient for 
_PortalAuthChallenger to also implement IUsernamePassword (what's wrong 
with sending clear text passwords over SSL anyway?).  However, it's not 
clear to me how I'd go about overriding the current behavior.  I've 
tried the naive thing which is, in a separate file:

from twisted.cred import credentials
from twisted.spread.pb import *&quot;

then overriding the _PortalRoot, _PortalWrapper, and 
_PortalAuthChallenger classes, and registering the alternate adapter. 
However, the &quot;registerAdapter(_PortalRoot, Portal, IPBRoot)&quot; comes back 
to bite me with:

   exceptions.ValueError: an adapter (twisted.spread.pb._PortalRoot) was 
already registered.

unless I comment it out in the actual twisted.spread.pb.py file.  Is 
there a way to unregister an adapter?  I'm sure there's a better way of 
doing this since I've seen mention of writing alternate login sequences, 
but I haven't been smart enough to figure it out.  Any help would be 
appreciated.

Thanks,
Marvin


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013936.html">[Twisted-Python] callLater
</A></li>
	<LI>Next message: <A HREF="013938.html">[Twisted-Python] PB auth with LDAP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13937">[ date ]</a>
              <a href="thread.html#13937">[ thread ]</a>
              <a href="subject.html#13937">[ subject ]</a>
              <a href="author.html#13937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
