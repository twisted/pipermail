<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistd save state does not work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20save%20state%20does%20not%20work&In-Reply-To=%3C20060929160707.1717.1403292531.divmod.quotient.63126%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="046639.html">
   <LINK REL="Next"  HREF="046637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistd save state does not work</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20save%20state%20does%20not%20work&In-Reply-To=%3C20060929160707.1717.1403292531.divmod.quotient.63126%40ohm%3E"
       TITLE="[Twisted-Python] twistd save state does not work">exarkun at divmod.com
       </A><BR>
    <I>Fri Sep 29 10:07:07 MDT 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="046639.html">[Twisted-Python] twistd save state does not work
</A></li>
        <LI>Next message (by thread): <A HREF="046637.html">[Twisted-Python] Socket - connection lost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46640">[ date ]</a>
              <a href="thread.html#46640">[ thread ]</a>
              <a href="subject.html#46640">[ subject ]</a>
              <a href="author.html#46640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 29 Sep 2006 16:53:10 +0200, Remi Cool &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mailinglists at smartology.nl</A>&gt; wrote:
&gt;<i>Remi Cool wrote:
</I>&gt;&gt;<i>Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>I've readied my app for use with twistd, the daemonizing works, but a tap 
</I>&gt;&gt;<i>file is not saved upon exit (kill 'cat twisted.pid'). How can I enable the 
</I>&gt;&gt;<i>save state option? BTW I'm not using the -o option with twistd ;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Second ... is it possible to disable the twisted logging if you use twistd 
</I>&gt;&gt;<i>to start the app? Or is it possible to set a log level so that only 
</I>&gt;&gt;<i>warnings and errors are shown and my log is not flooded with (TCPServer) 
</I>&gt;&gt;<i>connection messages.
</I>&gt;<i>The save state function only seems to work when you start with a tap in the 
</I>&gt;<i>firstplace. It then saves the state in appname-shutdown.tap ... ok but why 
</I>&gt;<i>doesn't it work when you start from a python file?
</I>&gt;<i>
</I>
It's implicitly disabled when loading an application from a Python file,
since there is no guarantee that the application will be serializable.

There is no way to explicitly re-enable it.  I would suggest that this
feature be added, but since most people seem to think tap files should
be eliminated as soon as possible, pursuing this would probably involve
a lot of debate that I'm not personally interested in participating in.

I would suggest using an alternate mechanism for persistence.

&gt;<i>My 2nd question about the logging still stands ...
</I>
It's not, although it certainly should be.  I believe there is at least
one ticket open in the tracker for improving the logging features of
twistd.

&gt;<i> and is it possible to 
</I>&gt;<i>(re)set the name of the log file in the python file where application is 
</I>&gt;<i>defined? I have all paths for the app in an ini file (configParser) and it 
</I>&gt;<i>would not be a good solution to declare the logfile path somewhere else.
</I>
The next release of Twisted will include a much more extensible way to
interact with twistd which should satisfy this use-case.  If you want
to play with it in svn <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">trunk at HEAD</A>, you can take a look at the output of
`twistd --help'.  The command list which shows up at the end of that
output can be extending using the plugin system, so you can add your
command, which sets up logging or loads configuration from an ini, or
whatever else you like.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="046639.html">[Twisted-Python] twistd save state does not work
</A></li>
	<LI>Next message (by thread): <A HREF="046637.html">[Twisted-Python] Socket - connection lost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#46640">[ date ]</a>
              <a href="thread.html#46640">[ thread ]</a>
              <a href="subject.html#46640">[ subject ]</a>
              <a href="author.html#46640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
