<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] _dumbwin32proc and PIPE_NOWAIT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20_dumbwin32proc%20and%20PIPE_NOWAIT&In-Reply-To=451E4F9B.6080708%40libero.it">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014146.html">
   <LINK REL="Next"  HREF="014142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] _dumbwin32proc and PIPE_NOWAIT</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20_dumbwin32proc%20and%20PIPE_NOWAIT&In-Reply-To=451E4F9B.6080708%40libero.it"
       TITLE="[Twisted-Python] _dumbwin32proc and PIPE_NOWAIT">glyph at divmod.com
       </A><BR>
    <I>Sat Sep 30 19:23:37 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014146.html">[Twisted-Python] _dumbwin32proc and PIPE_NOWAIT
</A></li>
        <LI>Next message: <A HREF="014142.html">[Twisted-Python] Twisted &amp; Qt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14148">[ date ]</a>
              <a href="thread.html#14148">[ thread ]</a>
              <a href="subject.html#14148">[ subject ]</a>
              <a href="author.html#14148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think I get it now.  The actual issue you're talking about is console IO.  The thing about the efficiency of polling is a side issue.

On Sat, 30 Sep 2006 13:06:03 +0200, Manlio Perillo &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">manlio_perillo at libero.it</A>&gt; wrote:
&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> ha scritto:
</I>
&gt;<i>The problem is simple:
</I>&gt;<i>if I want to do asyncronous I/O with Windows I don't have an unique
</I>&gt;<i>'interface'.
</I>
Yes.  Take it up with Microsoft :).  Even within their native event loops, things are inconsistent.

&gt;<i>Is win32eventreactor not working and not tested?
</I>
It's tested, but it's not working.  See <A HREF="http://twistedmatrix.com/buildbot/">http://twistedmatrix.com/buildbot/</A> - you'll notice the &quot;win32-win32er&quot; column is always red.  It's also limited because it still allows only 63 objects.

&gt;<i>You did not mention it in the &quot;removing unsupported reactors in twisted&quot;
</I>&gt;<i>thread.
</I>
It has maintainers, it has a buildbot, and it's been gradually decreasing its number of failing tests over time.  It didn't seem like a candidate for removal.

&gt;<i>I have write it, now stdio works ;-).
</I>
&gt;<i>Unfortunately it is not very efficient since:
</I>&gt;<i>- it uses _pollingfile (not a real porblem)
</I>&gt;<i>- it reads raw keyboard input and have to do all low level stuff like
</I>&gt;<i>  '\b' handling, '\r' conversion, and so
</I>
It's very hard to do these things efficiently, so I'm not too worried about that.  We also don't have a lot of programmers interested in Windows support.  My interest in Windows support ends right about at the point where the servers I develop can be successfully tested and developed on win32 :).  Providing functionality in an inefficient implementation at least provides some useful functionality in the meanwhile, and something to optimize later if it becomes important.

&gt;<i>Here is the main code.
</I>&gt;<i>I suspect such a thing will never be accepted into Twisted ;-):
</I>
As JP said, it might, with some tests and a patch in the tracker :).

&gt;<i>The _win32stdio module can simply check if the stdin is attached to a
</I>&gt;<i>terminal, so it (hopefully) can support both pipes and consoles.
</I>
That would be great.

&gt;<i>Many things can be added, like an emulation of POSIX terminal, callbacks
</I>&gt;<i>for resize events, support for focus in/out, colored output, history
</I>&gt;<i>editing, ...
</I>
&gt;<i>[1]
</I>&gt;<i>How can be tested such a thing?
</I>
In addition to JP's suggestion, &quot;mock&quot; the actual API you will be testing with, by replacing it in the tests and asserting that the appropriate things are called on the console object that you are passing it.

Both approaches make sense in different situations, and good test coverage will generally do both.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014146.html">[Twisted-Python] _dumbwin32proc and PIPE_NOWAIT
</A></li>
	<LI>Next message: <A HREF="014142.html">[Twisted-Python] Twisted &amp; Qt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14148">[ date ]</a>
              <a href="thread.html#14148">[ thread ]</a>
              <a href="subject.html#14148">[ subject ]</a>
              <a href="author.html#14148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
