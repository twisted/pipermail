<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] 2 questions: adbapi.ConnectionPool ;	Defer.DeferredSemaphore , threads.deferToThread
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%202%20questions%3A%20adbapi.ConnectionPool%20%3B%0A%09Defer.DeferredSemaphore%20%2C%20threads.deferToThread&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014017.html">
   <LINK REL="Next"  HREF="014013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] 2 questions: adbapi.ConnectionPool ;	Defer.DeferredSemaphore , threads.deferToThread</H1>
    <B>Jonathan Vanasco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%202%20questions%3A%20adbapi.ConnectionPool%20%3B%0A%09Defer.DeferredSemaphore%20%2C%20threads.deferToThread&In-Reply-To="
       TITLE="[Twisted-Python] 2 questions: adbapi.ConnectionPool ;	Defer.DeferredSemaphore , threads.deferToThread">twisted-python at 2xlp.com
       </A><BR>
    <I>Thu Sep 14 23:31:38 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="014017.html">[Twisted-Python] Rotating logfiles (SIGUSR1 doesn't work)
</A></li>
        <LI>Next message: <A HREF="014013.html">[Twisted-Python] 2 questions: adbapi.ConnectionPool ;	Defer.DeferredSemaphore , threads.deferToThread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14012">[ date ]</a>
              <a href="thread.html#14012">[ thread ]</a>
              <a href="subject.html#14012">[ subject ]</a>
              <a href="author.html#14012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
a-
	can someone clarify adbapi.ConnectionPool for me?
	i'm specifically wondering if connect/disconnect returns a handle to  
the pool and it the pool blocks until a handle is ready.  i think it  
probably doesn't work that way.  but i feel the need to check.
	

b-
	has anyone ever used Defer.DeferredSemaphore with  
threads.deferToThread ?
	if so, how?  all of my attempts thus far have not given the desired  
results

specifically, i'm trying to have a scheduled job queue seed 1-50  
'tasks' at once, each one using a seperate DB connection and running  
in a seperate thread.
once they all complete, the job reschedules itself to run in the future.

i'm probably approaching this problem wrong.  so feel free to tell me  
i'm an idiot and point in a better direction.

the closest thing I could think of was:
	1- imports= [ self.semaphore.run( threads.deferToThread 
( self.import_request, queue_item ) ) for queue_item in queue_import ]
	2- imports= [ threads.deferToThread( self.semaphore.run 
( self.import_request, queue_item ) ) for queue_item in queue_import ]

neither of which work as:
	1-  gives me imports all at once, as deferToThread immediately  
returns a deferred object
	2- self.import_request blocks , as its not in its own thread




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014017.html">[Twisted-Python] Rotating logfiles (SIGUSR1 doesn't work)
</A></li>
	<LI>Next message: <A HREF="014013.html">[Twisted-Python] 2 questions: adbapi.ConnectionPool ;	Defer.DeferredSemaphore , threads.deferToThread
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14012">[ date ]</a>
              <a href="thread.html#14012">[ thread ]</a>
              <a href="subject.html#14012">[ subject ]</a>
              <a href="author.html#14012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
