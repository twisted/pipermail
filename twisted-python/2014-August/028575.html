<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Is there pb documentation somewhere?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Is%20there%20pb%20documentation%20somewhere%3F&In-Reply-To=%3CCAA-sNEZB9NuEn5_LfoSdB7UqgPfOWzNfDXdF8RpO2G%2BY3-vjgw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028571.html">
   <LINK REL="Next"  HREF="028573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Is there pb documentation somewhere?</H1>
    <B>Kevin Mcintyre</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Is%20there%20pb%20documentation%20somewhere%3F&In-Reply-To=%3CCAA-sNEZB9NuEn5_LfoSdB7UqgPfOWzNfDXdF8RpO2G%2BY3-vjgw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Is there pb documentation somewhere?">kebin70 at gmail.com
       </A><BR>
    <I>Wed Aug  6 15:12:32 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028571.html">[Twisted-Python] Is there pb documentation somewhere?
</A></li>
        <LI>Next message: <A HREF="028573.html">[Twisted-Python] Embedding manhole interpreter into insults widget.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28575">[ date ]</a>
              <a href="thread.html#28575">[ thread ]</a>
              <a href="subject.html#28575">[ subject ]</a>
              <a href="author.html#28575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This discussion seems relevant to a design pattern &quot;Yearbook Lifecycle&quot;
that I'm using for athleets.com and junkeet.com.

Design Goal:

1) Maintain yearbooks across state, allowing students to delegate access
control to classmates as a series of transformations (recursive web
renders) - here sign my yearbook...here read what so-and-so wrote..can I
take your yearbook to PE, we might skip class.

2) Persist inside a context indexer that answers yearbook queries, with
generic access to the t0 and viewable access to t1+ transforms with request
controls for represented as e0, e1 being another recursive web template
kept within the master at t-1

So a complex use case would be a yearbook message like &quot;OMG - did you read
{s1.p3.t4}? cause {e4.s3} said f_td(after|before) {e2.s6} was kissing
behind {p3.t0.a4}.  See you this summer good luck at
{owner.ext['college']}! BFF, {s3}&quot;

Fake Model

YearbookPage(Element):
SignedYearbookPage(YearbookPage):

Yearbook(pb.Copyable)
-pages
-accessControlLog
StudentYearbook(pb.Viewable)
--transformation

YearbookServiceTransformer(??)

Publish(pb.Root)
    remote_issue_yearbook(studentid=None): // none can read but not signed

Athleets.com is ready(ing) for yearbook-ish events, ie when a players get
traded or hurt.  Other events act across yearbook motif regenerating the
t0 when athlete data changes which republishes all copies non t0 that exist.

The Sender Receiver Model from the example is difficult to follow cause I
tend to think of Originator only.  The originator being a service that
waits for clients in need of a working copy.  A sender, doesn't exist...it
would be more of a challenger, that if recognized as more authoritative,
replaces the rb.Root service.  Outside of the copyable I'm trying to
upstream via remotes pieces within the copyable that need updating.  I'm
delving into viewable to bring caller identity data to the web templating
process not necessary restrict access.  But also to build a system that
maintains audit history within the yearbook model. Getting to areas of
non-working code, so let me report back any success.

Cheers
Kevin



On Tue, Aug 5, 2014 at 11:55 AM, Glyph Lefkowitz &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i> On Aug 4, 2014, at 9:47 PM, Daniel Sank &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sank.daniel at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> glyph,
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; 2. Is there a specification for the pb dialect of banana?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; Beyond the code, no.
</I>&gt;<i>
</I>&gt;<i> Ok.
</I>&gt;<i>
</I>&gt;<i> &gt; I would be happy to answer questions, but obviously I'm not super
</I>&gt;<i> responsive :).
</I>&gt;<i> &gt; Let me know what you need.
</I>&gt;<i>
</I>&gt;<i> For two personal projects, I would like to have a reasonable remote
</I>&gt;<i> objects library in python. I need something which can announce state
</I>&gt;<i> changes to clients, and receive state change requests from clients. My
</I>&gt;<i> solution:
</I>&gt;<i>
</I>&gt;<i> 1. Make server side class which can spawn Cacheables when it wants to tell
</I>&gt;<i> clients of its existence.
</I>&gt;<i> 2. Give RemoteCaches to clients and use observe_* methods as appropriate.
</I>&gt;<i> 3. Stuff a Viewable into the RemoteCaches so that clients can request
</I>&gt;<i> state changes.
</I>&gt;<i>
</I>&gt;<i> Question #1: Is this a reasonable use of pb?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes.
</I>&gt;<i>
</I>&gt;<i> This all worked great until I ran into a bug. In trying to fix the bug, I
</I>&gt;<i> found that
</I>&gt;<i>
</I>&gt;<i> 1. pb code is really hard to understand
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sorry about that.
</I>&gt;<i>
</I>&gt;<i> 2. exarkun's thinks pb is bad and that I should implement what I need in
</I>&gt;<i> AMP.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I really wish we would stop calling things &quot;bad&quot; and &quot;good&quot;.  This isn't a
</I>&gt;<i> helpful classification.  PB is adequate for a particular set of
</I>&gt;<i> requirements.  Those requirements are somewhat unusual, and AMP is better
</I>&gt;<i> for a lot of use-cases.
</I>&gt;<i>
</I>&gt;<i> It sounds to me like you are a lot more interested in
</I>&gt;<i>
</I>&gt;<i> 3. exarkun thinks banana and jelly are reasonable.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Again, what does &quot;reasonable&quot; mean in this context?
</I>&gt;<i>
</I>&gt;<i> Let me explain my own opinion about this.
</I>&gt;<i>
</I>&gt;<i> Banana is a perfectly serviceable low-level marshaling format.  It's
</I>&gt;<i> pretty efficient when compared to something like JSON, and has compression
</I>&gt;<i> mechanisms which can make it even more efficient (the &quot;dialect&quot; support you
</I>&gt;<i> referred to).  The only thing about it that isn't very general is that its
</I>&gt;<i> implementation (although not the protocol specification) hard-codes the PB
</I>&gt;<i> abbreviated-string dialect.
</I>&gt;<i>
</I>&gt;<i> Jelly is higher level, but more language-specific. Its specification
</I>&gt;<i> implicitly encodes numerous Python implementation details, like the
</I>&gt;<i> distinction between &quot;tuple&quot; and &quot;list&quot;.  It also couples very tightly to
</I>&gt;<i> your program's structure.  This can be a real benefit to getting a protocol
</I>&gt;<i> up and running quickly, but it still allows you to create protocols where
</I>&gt;<i> you don't really know what the wire format is, where you develop hidden
</I>&gt;<i> dependencies.  In more complex protocols (where the &quot;ease of getting up and
</I>&gt;<i> running quickly&quot; thing really starts to shine) this attribute of Jelly can
</I>&gt;<i> cause real difficulty in any kind of cross-system communication:
</I>&gt;<i> communicating with a peer from a different language, or even in Python
</I>&gt;<i> without access to all the protocol class definitions from the original
</I>&gt;<i> system, is hard because it requires reverse-engineering.  This is where it
</I>&gt;<i> becomes &quot;bad&quot;.  Still, it isn't as big of a disaster security- and
</I>&gt;<i> maintenance-wise as Pickle.  The information you need *is* recorded in
</I>&gt;<i> the code, it's just spread out, you don't need to work backwards from
</I>&gt;<i> protocol dumps.  If I were going to spend some time maintaining PB, this is
</I>&gt;<i> where I'd focus: if the schemas were a bit more explicit, could be
</I>&gt;<i> collected into one place more easily, and were all validated in advance
</I>&gt;<i> (before passing deserialized objects to the application code, or
</I>&gt;<i> serializing them across the wire), then these problems could be addressed
</I>&gt;<i> without changing the API too much.
</I>&gt;<i>
</I>&gt;<i> PB basically just inherits all of the benefits and caveats of Jelly.  It's
</I>&gt;<i> a trivial serialization of remote references to objects.
</I>&gt;<i>
</I>&gt;<i> Question #2: Would you recommend implementing a simplified replacement for
</I>&gt;<i> pb on top of banana/jelly, or starting over from AMP? I favor the
</I>&gt;<i> banana/jelly route because the protocol seems intrinsically flexible, but I
</I>&gt;<i> read your blog explaining why protocols like banana are bad, so I'm
</I>&gt;<i> confused about what I &quot;should&quot; do.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> First of all, don't take my development advice as gospel.  When I write an
</I>&gt;<i> article and publish it, I'm just trying to make people aware of issues they
</I>&gt;<i> may not have considered; make your own decisions about how to write your
</I>&gt;<i> own code.
</I>&gt;<i>
</I>&gt;<i> (Unless your decision is to write it yourself in PHP, of course, in which
</I>&gt;<i> case you are a danger to yourself and others and should be remanded to
</I>&gt;<i> compulsory treatment.)
</I>&gt;<i>
</I>&gt;<i> It seems like PB fits your style, and the problems with it are all
</I>&gt;<i> tractable and fixable.  I am sad that you're not getting the development
</I>&gt;<i> support you need to maintain it (most of all I'm sad you're not getting it
</I>&gt;<i> from me!) but let's see if we can fix that.  I'll start by replying to your
</I>&gt;<i> other email.
</I>&gt;<i>
</I>&gt;<i> One thing that might speed things along is if you can help out with some
</I>&gt;<i> code reviews.  We've got a _really_ long queue right now and that's making
</I>&gt;<i> it hard for me to spend any focused effort in one particular area.  I'm
</I>&gt;<i> happy to trade 2-for-1 - if you do two code reviews, I will regard it as an
</I>&gt;<i> immediate obligation for me to review a ticket you direct me to ;).
</I>&gt;<i>
</I>&gt;<i> It might also help to write more small, simple patches for PB.  Especially
</I>&gt;<i> adding docstrings to make the nature of your other, more complex changes
</I>&gt;<i> easier for reviewers to understand.  These would also be easier to land,
</I>&gt;<i> and a couple of decades in open source has taught me that nothing motivates
</I>&gt;<i> development activity like successful development activity ;).
</I>&gt;<i>
</I>&gt;<i> Good luck,
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140806/86e2b500/attachment-0001.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140806/86e2b500/attachment-0001.html</A>&gt;
</PRE>































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028571.html">[Twisted-Python] Is there pb documentation somewhere?
</A></li>
	<LI>Next message: <A HREF="028573.html">[Twisted-Python] Embedding manhole interpreter into insults widget.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28575">[ date ]</a>
              <a href="thread.html#28575">[ thread ]</a>
              <a href="subject.html#28575">[ subject ]</a>
              <a href="author.html#28575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
