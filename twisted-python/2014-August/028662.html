<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] running twisted with supervisord -- logging	question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20running%20twisted%20with%20supervisord%20--%20logging%0A%09question&In-Reply-To=%3CB4BA6322-6B45-4F06-A4EE-AE87119106D7%402xlp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028661.html">
   <LINK REL="Next"  HREF="028663.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] running twisted with supervisord -- logging	question</H1>
    <B>Jonathan Vanasco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20running%20twisted%20with%20supervisord%20--%20logging%0A%09question&In-Reply-To=%3CB4BA6322-6B45-4F06-A4EE-AE87119106D7%402xlp.com%3E"
       TITLE="[Twisted-Python] running twisted with supervisord -- logging	question">twisted-python at 2xlp.com
       </A><BR>
    <I>Sat Aug 23 17:46:25 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028661.html">[Twisted-Python] running twisted with supervisord -- logging question
</A></li>
        <LI>Next message: <A HREF="028663.html">[Twisted-Python] running twisted with supervisord -- logging question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28662">[ date ]</a>
              <a href="thread.html#28662">[ thread ]</a>
              <a href="subject.html#28662">[ subject ]</a>
              <a href="author.html#28662">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Christopher-

Thanks for the insight.  I was stupid and didn't include my code.

I don't actually want supervisor to handle the logging.  I wanted to have this app's logs in /var/log/myapp-twisted/twisted.log

I just can't figure out how to make this happen.  i've been playing with different permutations of twistd commands, redirect_stderr and stdout_logfile, and haven't found the right balance

the actual logging calls are just to python's logger ( `import logging` ; logging.getLogger(), log.debug(), etc)

---------
[program:myapp-twisted]
priority=100
process_name=%(program_name)s
autostart=true
autorestart=true
stopsignal=QUIT
redirect_stderr = false
stdout_logfile = /var/log/myapp-twisted/twisted.log
directory = /var/www/sites/myapp-svn_tag-current_production/daemon/twisted
environment = PATH=&quot;/var/www/sites/myapp-virtualenv/bin:$PATH&quot;
command = /var/www/sites/myapp-virtualenv/bin/twistd -y controller-production.tac --pidfile /tmp/myapp-twisted.pid
----------





On Aug 22, 2014, at 11:50 PM, Christopher Armstrong wrote:

&gt;<i> 
</I>&gt;<i> On August 22, 2014 at 6:52:02 PM, Jonathan Vanasco (<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at 2xlp.com</A>) wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> hoping someone can answer this question- 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> i can't seem to get my logging right while using supervisord 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> i'm not using twisted logging, just the regular python logging infrastructure. 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> the two end-results I've had: 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> - everything double-logs into twistd.log &amp; /var/log/supervisor.log 
</I>&gt;&gt;<i> - anything this is `print`'ed appears in my twistd.log , but none of the `log.debug()` lines appear 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> the end result I want, is for debug info from the twisted process to be recorded in a single file 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I prefer to use
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 	twistd -n -l - ...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> passing &#8216;-' to -l means &#8220;log to stdout&#8221;.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Without your code, we can&#8217;t know how you&#8217;re configuring python logging, and what may be wrong with it. This should be the baseline for using twistd with supervisor if you want to let supervisor handle logging. FYI, you can configure supervisor to put the output in a different file than /var/log/supervisor.log, too.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Christopher Armstrong
</I>&gt;<i> <A HREF="http://twitter.com/radix">http://twitter.com/radix</A>
</I>&gt;<i> <A HREF="http://wordeology.com/">http://wordeology.com/</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
// Jonathan Vanasco

c. 646.729.6436  |  415.501.9815
e. <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jonathan at 2xlp.com</A>
w. <A HREF="http://findmeon.com/user/jvanasco">http://findmeon.com/user/jvanasco</A> 
linkedin. <A HREF="http://linkedin.com/in/jonathanvanasco">http://linkedin.com/in/jonathanvanasco</A>
blog. <A HREF="http://destructuring.net">http://destructuring.net</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140823/7a9549a7/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140823/7a9549a7/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028661.html">[Twisted-Python] running twisted with supervisord -- logging question
</A></li>
	<LI>Next message: <A HREF="028663.html">[Twisted-Python] running twisted with supervisord -- logging question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28662">[ date ]</a>
              <a href="thread.html#28662">[ thread ]</a>
              <a href="subject.html#28662">[ subject ]</a>
              <a href="author.html#28662">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
