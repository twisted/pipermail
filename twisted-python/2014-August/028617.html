<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20t.p.syslog%2C%20t.p.logger%20and%20twistd%20%20%28was%20%237549%29&In-Reply-To=%3CE346553E-BB6E-4EAD-8618-504FB9BD477C%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028610.html">
   <LINK REL="Next"  HREF="028622.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20t.p.syslog%2C%20t.p.logger%20and%20twistd%20%20%28was%20%237549%29&In-Reply-To=%3CE346553E-BB6E-4EAD-8618-504FB9BD477C%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Aug 11 00:09:15 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028610.html">[Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)
</A></li>
        <LI>Next message: <A HREF="028622.html">[Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28617">[ date ]</a>
              <a href="thread.html#28617">[ thread ]</a>
              <a href="subject.html#28617">[ subject ]</a>
              <a href="author.html#28617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Aug 10, 2014, at 3:17 PM, Roberto Polli &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">roberto.polli at babel.it</A>&gt; wrote:

&gt;<i> Moving thread here to avoid polluting trac (thx to glyph).
</I>&gt;<i> 
</I>&gt;<i> 1. the real issue: t.p.syslog doesn't support logLevel
</I>
For me, the biggest issue is that t.p.syslog defaults to logging at INFO, which means that on many platforms, all the messages get filtered and don't actually get logs.  This is particularly true on OS X, where I think filtering works slightly differently and the INFO filtering happens in the process itself, before it even gets sent to the log server.  I haven't even figured out how to configure it not to get filtered.

It seems like getting t.p.syslog to support logLevel is a necessary part of a clean fix, but since most Twisted log messages don't set a level, we would still need better handling on the commandline to make this practically useful to users.

&gt;<i> - if you think it's worth a patch before switching to t.p.logger I'll provide 
</I>&gt;<i> a patch (it's quite simple).
</I>&gt;<i> - if you think we should just move to t.p.logger and get rid of t.p.log and 
</I>&gt;<i> t.p.syslog see 2.
</I>
We definitely can't &quot;get rid of&quot; either of these things.  As per the compatibility policy &lt;<A HREF="https://twistedmatrix.com/trac/wiki/CompatibilityPolicy">https://twistedmatrix.com/trac/wiki/CompatibilityPolicy</A>&gt; we would need to deprecate them.

However, &quot;twistd --syslog&quot; could be implemented in terms of t.p.logger instead.

Also, since messages are fairly carefully relayed between new and old logging systems, I think it might be a compatible change to make twisted.python.syslog.startLogging use a new-style (twisted.python.logging) observer, rather than fixing SyslogObserver.  The benefit here would be that the new logging system consistently uses levels everywhere.  On the other hand, any code written to the new API should be populating the old logLevels key via &lt;<A HREF="https://github.com/twisted/twisted/blob/bd7f43fa202cb78d23098dee165df58737ff9192/twisted/python/logger/_legacy.py#L166-L167">https://github.com/twisted/twisted/blob/bd7f43fa202cb78d23098dee165df58737ff9192/twisted/python/logger/_legacy.py#L166-L167</A>&gt;.

&gt;<i> 2. moving twistd to t.p.logger
</I>&gt;<i> - I've started looking around
</I>&gt;<i> - t.p.logger doesn't still support syslog
</I>
Yes, we could definitely say that is a blocker :-).

&gt;<i> - I'll try to add some tests
</I>&gt;<i> - feedback welcome :D
</I>
I hope some other folks have some ideas :-).

&gt;<i> Ref: <A HREF="https://twistedmatrix.com/trac/ticket/7549">https://twistedmatrix.com/trac/ticket/7549</A>
</I>
&gt;<i> CONFIDENZIALE: &#8230;
</I>
I'd like to make it clear that messages sent to this list are NOT confidential - they are publicly archived in multiple places :-).  If you can disable a message like this when sending here that would be nice.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140810/4ac2d47c/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140810/4ac2d47c/attachment.html</A>&gt;
</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028610.html">[Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)
</A></li>
	<LI>Next message: <A HREF="028622.html">[Twisted-Python] t.p.syslog, t.p.logger and twistd  (was #7549)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28617">[ date ]</a>
              <a href="thread.html#28617">[ thread ]</a>
              <a href="subject.html#28617">[ subject ]</a>
              <a href="author.html#28617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
