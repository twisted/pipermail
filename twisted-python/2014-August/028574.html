<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Embedding manhole interpreter into insults	widget.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Embedding%20manhole%20interpreter%20into%20insults%0A%09widget.&In-Reply-To=%3CC1FC8795-6D26-4900-9D71-5E5104C9822D%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028573.html">
   <LINK REL="Next"  HREF="028576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Embedding manhole interpreter into insults	widget.</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Embedding%20manhole%20interpreter%20into%20insults%0A%09widget.&In-Reply-To=%3CC1FC8795-6D26-4900-9D71-5E5104C9822D%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Embedding manhole interpreter into insults	widget.">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Aug  6 13:48:42 MDT 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="028573.html">[Twisted-Python] Embedding manhole interpreter into insults widget.
</A></li>
        <LI>Next message: <A HREF="028576.html">[Twisted-Python] Embedding manhole interpreter into insults	widget.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28574">[ date ]</a>
              <a href="thread.html#28574">[ thread ]</a>
              <a href="subject.html#28574">[ subject ]</a>
              <a href="author.html#28574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Aug 6, 2014, at 11:14 AM, Maxim Lacrima &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">lacrima.maxim at gmail.com</A>&gt; wrote:

&gt;<i> The reason is that on each keystroke, the whole terminal buffer is redrawn. I wonder how I can optimize this. Currently I don't see a solution. Also I am wondering if I took right approach to embed manhole interpreter into a widget in the first place, but I don't see a solution, except using `TerminalBuffer` to capture manhole output.
</I>
Optimizing this will almost certainly involve patching Twisted.  Which you should definitely do :).

The reason the entire screen is redrawn is that a general implementation of a widget, i.e. one that can be displayed anywhere on the terminal, you do just have to redraw the entire widget when certain things happen, like when the screen scrolls.  You can see this in other software by observing the fairly significant performance difference between a vertical split and a horizontal split in tmux.  Nothing to do with Twisted there, just a general limitation of terminals.

The optimizations you could implement are one where inputting individual characters doesn't cause a full screen redraw, and avoiding a full screen redraw when scrolling if the edges of the widget touch the edges of the full terminal (setting up a scroll area for that case).

I think that using a widget for this case does indeed make sense (just as I'm super glad that tmux has vertical splits, even if they're kinda slow), and it would be great to get these optimizations into Twisted.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140806/6e9447a0/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140806/6e9447a0/attachment.html</A>&gt;
</PRE>

































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028573.html">[Twisted-Python] Embedding manhole interpreter into insults widget.
</A></li>
	<LI>Next message: <A HREF="028576.html">[Twisted-Python] Embedding manhole interpreter into insults	widget.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28574">[ date ]</a>
              <a href="thread.html#28574">[ thread ]</a>
              <a href="subject.html#28574">[ subject ]</a>
              <a href="author.html#28574">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
