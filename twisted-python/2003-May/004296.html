<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Perspective / Client confusion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Perspective%20/%20Client%20confusion&In-Reply-To=6972FDC2-9215-11D7-A665-000393C9700E%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004295.html">
   <LINK REL="Next"  HREF="004297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Perspective / Client confusion</H1>
    <B>Patrick K. O'Brien</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Perspective%20/%20Client%20confusion&In-Reply-To=6972FDC2-9215-11D7-A665-000393C9700E%40twistedmatrix.com"
       TITLE="[Twisted-Python] Perspective / Client confusion">pobrien at orbtech.com
       </A><BR>
    <I>Thu May 29 20:03:22 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004295.html">[Twisted-Python] Perspective / Client confusion
</A></li>
        <LI>Next message: <A HREF="004297.html">[Twisted-Python] Perspective / Client confusion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4296">[ date ]</a>
              <a href="thread.html#4296">[ thread ]</a>
              <a href="subject.html#4296">[ subject ]</a>
              <a href="author.html#4296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday 29 May 2003 03:37 pm, Glyph Lefkowitz wrote:
&gt;<i> On Thursday, May 29, 2003, at 10:31 AM, Patrick K. O'Brien wrote:
</I>&gt;<i> &gt; Since I'm using PyPerSyst to persist all the application data, I could
</I>&gt;<i> &gt; also
</I>&gt;<i> &gt; store user information there and use that to determine what a user
</I>&gt;<i> &gt; can/cannot
</I>&gt;<i> &gt; do, rather than rely on Perspectives.  But I'm not sure that is the
</I>&gt;<i> &gt; right
</I>&gt;<i> &gt; approach.  Any help would be greatly appreciated.
</I>&gt;<i>
</I>&gt;<i> Perspective is a very simple concept, with an almost-equally-simple
</I>&gt;<i> representation.  It just means &quot;a token representing the user's
</I>&gt;<i> presence and permissions within the context of a particular service&quot;.
</I>&gt;<i> So, you should be able to use PyPerSyst to store Perspective subclass
</I>&gt;<i> instances as the &quot;user information&quot; that you want to keep in your
</I>&gt;<i> application.
</I>
Itamar helped me a bit on #twisted, but I'm still a bit unsure of myself.  The 
problem seems to be that there are a number of different ways to do 
everything, and it isn't entirely clear to me how to evaluate the options.  
For example, I need more than one Perspective subclass.  And I'd like the 
same person (Identity) to be able to log into the application with whichever 
Perspective is available to them.

Itamar suggested that the best approach would be to have one service, several 
Perspective subclasses, and one Perspective instance for each client.  So now 
I think I need to override the service.createPerspective() to create the 
right kind of Perspective instance, or create the Perspective independently 
and then send it to service.addPerspective().  It also seems to me that I 
should hide the Perspective details such that when a user logs in they simply 
choose which of their perspectives they want to use (admin, user, customer, 
for example).  It also seems to me that I should generate the perspective 
names automatically, in order to keep them unique within the service 
(something like identity.name + perspective.__class__.__name__, perhaps).

If I'm going to persist identities and perspectives using PyPerSyst, I also 
need to be careful what references those objects contain, such as 
perspective.service and service.authorizer.  I'm not sure I want those 
persisted, so I probably need to add __getstate__ and __setstate__ methods to 
my subclasses.  I also need a way to load persistent indentities and 
perspectives from PyPerSyst when the application starts.  I know I've seen 
mention of those &quot;load&quot; methods, but I couldn't find any code examples.

I also need to figure out how to allow someone to create new identities and 
perspectives in the first place.  So I probably need to have the app start 
with a &quot;root&quot; type user/perspective that has the authority to create new 
identities and perspectives.  Maybe I need another Perspective subclass that 
deals only with that capability.

Am I making this more complicated than it needs to be?  I'd love to hear 
someone say &quot;yes&quot; and then show me a simple way.  It seems like what I'm 
trying to do would be pretty common for anyone creating a PB application that 
had many users that needed to be divided into groups, with each group having 
different capabilities.  The plumbing all seems to be there (Identity, 
Perspective, Service, Authorizer, etc.), but hooking everything together 
still eludes me.

-- 
Patrick K. O'Brien
Orbtech      <A HREF="http://www.orbtech.com/web/pobrien">http://www.orbtech.com/web/pobrien</A>
-----------------------------------------------
&quot;Your source for Python programming expertise.&quot;
-----------------------------------------------



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004295.html">[Twisted-Python] Perspective / Client confusion
</A></li>
	<LI>Next message: <A HREF="004297.html">[Twisted-Python] Perspective / Client confusion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4296">[ date ]</a>
              <a href="thread.html#4296">[ thread ]</a>
              <a href="subject.html#4296">[ subject ]</a>
              <a href="author.html#4296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
