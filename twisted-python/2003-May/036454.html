<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [Andrei.Doicin at cern.ch: timing out an ssh command]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BAndrei.Doicin%40cern.ch%3A%20timing%20out%20an%20ssh%20command%5D&In-Reply-To=%3C20030507143140.GA19492%40frobozz.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036452.html">
   <LINK REL="Next"  HREF="036455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [Andrei.Doicin at cern.ch: timing out an ssh command]</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20%5BAndrei.Doicin%40cern.ch%3A%20timing%20out%20an%20ssh%20command%5D&In-Reply-To=%3C20030507143140.GA19492%40frobozz.local%3E"
       TITLE="[Twisted-Python] [Andrei.Doicin at cern.ch: timing out an ssh command]">andrew-pythonlist at puzzling.org
       </A><BR>
    <I>Wed May  7 08:31:40 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036452.html">[Twisted-Python] Re: [Twisted-commits] Add makeblocking (and a test woo)
</A></li>
        <LI>Next message (by thread): <A HREF="036455.html">[Twisted-Python] [Andrei.Doicin at cern.ch: timing out an ssh command]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36454">[ date ]</a>
              <a href="thread.html#36454">[ thread ]</a>
              <a href="subject.html#36454">[ subject ]</a>
              <a href="author.html#36454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How is easy is it to script conch?  It'd be nice if it was the solution to
this guy's problem :)

-Andrew.

----- Forwarded message excerpt from Andrei Doicin &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Andrei.Doicin at cern.ch</A>&gt; -----

From: Andrei Doicin &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Andrei.Doicin at cern.ch</A>&gt;
Newsgroups: comp.lang.python
Subject: timing out an ssh command
Organization: CERN
Xref: news.baymountain.com comp.lang.python:221802
To: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">python-list at python.org</A>
Date: Wed, 7 May 2003 15:44:30 +0200

Dear fellow Pythonheads,

I have written a fairly nifty but &quot;just beyond amateur&quot; =) wrapper script in
python for sending ssh commands to remote hosts from the unix command line,
but would now like the ssh command to time out after a certain amount of
time (eventually to be specified as an option to the wrapper).

What would you advise is the best way to do this, out of the following
avenues to consider ?

- somehow making use of time.time or time.clock and/or select(x,x,x,timeout)
- sockets (i.e. making use of something like
<A HREF="http://www.timo-tasi.org/python/timeoutsocket.py">http://www.timo-tasi.org/python/timeoutsocket.py</A> by Timothy Malley)
- expect
- pexpect

?

A situation in which the ssh command hangs forever can be indicated as
follows, using the verbose option (whether necessary or not) of ssh to
illustrate what's going on at the fundamental level:

[client0-15:26:01] 130:adoicin/scripts&gt; ssh -v target1 uptime
OpenSSH_3.4p1-CERN20020919, SSH protocols 1.5/2.0, OpenSSL 0x0090602f
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Rhosts Authentication disabled, originating port will not be
trusted.
debug1: ssh_connect: needpriv 0
debug1: Connecting to target1 [xxx.xxx.xxx.xxx] port 22.
debug1: Connection established.
debug1: identity file /home/adoicin/.ssh/identity type -1
debug1: identity file /home/adoicin/.ssh/id_rsa type -1
debug1: identity file /home/adoicin/.ssh/id_dsa type -1
... waits forever ...

the above example literally hangs forever unless you intervene with CTRL-C

----- snipped -----
----- End forwarded message excerpt -----



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036452.html">[Twisted-Python] Re: [Twisted-commits] Add makeblocking (and a test woo)
</A></li>
	<LI>Next message (by thread): <A HREF="036455.html">[Twisted-Python] [Andrei.Doicin at cern.ch: timing out an ssh command]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36454">[ date ]</a>
              <a href="thread.html#36454">[ thread ]</a>
              <a href="subject.html#36454">[ subject ]</a>
              <a href="author.html#36454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
