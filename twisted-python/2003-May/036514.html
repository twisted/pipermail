<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Large Transfers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Large%20Transfers&In-Reply-To=%3C200305100945.44548.uwe%40oss4u.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036507.html">
   <LINK REL="Next"  HREF="036527.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Large Transfers</H1>
    <B>Uwe C. Schroeder</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Large%20Transfers&In-Reply-To=%3C200305100945.44548.uwe%40oss4u.com%3E"
       TITLE="[Twisted-Python] Large Transfers">uwe at oss4u.com
       </A><BR>
    <I>Sat May 10 10:45:44 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036507.html">[Twisted-Python] Large Transfers
</A></li>
        <LI>Next message (by thread): <A HREF="036527.html">[Twisted-Python] Large Transfers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36514">[ date ]</a>
              <a href="thread.html#36514">[ thread ]</a>
              <a href="subject.html#36514">[ subject ]</a>
              <a href="author.html#36514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, I think we all agree that changing Twisted internally to reach a certain 
goal isn't the good choice here. It would be if the benefit was for 
everyone's use.
Asuming I have a pb connection open.
(snippet)
p is the pb.Perspective
parameters is a &quot;small&quot; parameterset (a couple of int's or so)
resultset is [ int, int, string, huge string ]

p.callRemote('getResult',(parameters)).addCallbacks(ok, nok)

def ok(resultset):
	do something with the resultset here  

def nok(error):
	throw error in UI here

If the above is the code, how could I change it using pagers ?
I need the int,int,string result together with the &quot;huge string&quot; result. I 
don't want to use self.int1, self.int2 etc. constructs since it's temporary 
data, so I'd have to give the small results as parameters to the callback 
being called when paging the large part finishes. I'd also need an error 
callback, which I can't find in the pager implementation at all. The &quot;huge 
String&quot; will allways be a string, since the server side will compress 
(possibly encrypt) and base64 encode it anyways.
The current user feedback implementation isn't really one, so maybe I can even 
improve here. Currently it behaves like the netscape or mozilla logo - it 
moves until the data is there. If I can hook into the pager I might be able 
to give real feedback in form of a progress bar or so.

Any ideas ?

On Saturday 10 May 2003 08:36 am, Andrew Bennetts wrote:
&gt;<i> On Sat, May 10, 2003 at 08:20:37AM -0700, Uwe C. Schroeder wrote:
</I>&gt;<i> &gt; You're right, it doesn't. However it still requires several calls to
</I>&gt;<i> &gt; transfer the whole set. :-( And it has another problem. The pager makes
</I>&gt;<i> &gt; it hard to give the user some response while uploading/downloading. The
</I>&gt;<i> &gt; UI gets stuck, or at least appears to be since nothing is happening.
</I>&gt;<i>
</I>&gt;<i> (Untested code)
</I>&gt;<i>
</I>&gt;<i> class ProgressReportingStringPager(StringPager):
</I>&gt;<i>     def __init__(self, ui, *args, **kwargs):
</I>&gt;<i>         self.ui = ui
</I>&gt;<i>         StringPager.__init__(self, *args, **kwargs)
</I>&gt;<i>
</I>&gt;<i>     def nextPage(self):
</I>&gt;<i>         StringPager.nextPage(self)
</I>&gt;<i>         self.ui.reportProgress(self.pointer/len(self.string))
</I>&gt;<i>
</I>&gt;<i> I haven't tried, but it looks like something like that code could easily
</I>&gt;<i> give you progress reporting from your pager.  The paging code is really
</I>&gt;<i> quite simple.
</I>&gt;<i>
</I>&gt;<i> -Andrew.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
-- 
	UC

--
Open Source Solutions 4U, LLC	2570 Fleetwood Drive
Phone:  +1 650 872 2425		San Bruno, CA 94066
Cell:   +1 650 302 2405		United States
Fax:    +1 650 872 2417



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036507.html">[Twisted-Python] Large Transfers
</A></li>
	<LI>Next message (by thread): <A HREF="036527.html">[Twisted-Python] Large Transfers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36514">[ date ]</a>
              <a href="thread.html#36514">[ thread ]</a>
              <a href="subject.html#36514">[ subject ]</a>
              <a href="author.html#36514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
