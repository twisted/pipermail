<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Anomaly found between twisted XML-RPC client and twisted server (Bug?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Anomaly%20found%20between%20twisted%20XML-RPC%20client%20and%20twisted%20server%20%28Bug%3F%29&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004179.html">
   <LINK REL="Next"  HREF="004181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Anomaly found between twisted XML-RPC client and twisted server (Bug?)</H1>
    <B>Wari Wahab</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Anomaly%20found%20between%20twisted%20XML-RPC%20client%20and%20twisted%20server%20%28Bug%3F%29&In-Reply-To="
       TITLE="[Twisted-Python] Anomaly found between twisted XML-RPC client and twisted server (Bug?)">wari at home.wari.org
       </A><BR>
    <I>Thu May 22 05:08:04 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004179.html">[Twisted-Python] Installing the windows binary with Python 2.3a...
</A></li>
        <LI>Next message: <A HREF="004181.html">[Twisted-Python] Anomaly found between twisted XML-RPC client and twisted server (Bug?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4176">[ date ]</a>
              <a href="thread.html#4176">[ thread ]</a>
              <a href="subject.html#4176">[ subject ]</a>
              <a href="author.html#4176">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there, I was testing around the XML-RPC support in twisted and found 
the following:
same twisted client and server (one instance) = error.connectionLost
twisted client -&gt; twisted server = error.connectionLost
xmlprclib client -&gt; twisted server = got my results
twisted client -&gt; xmlrpclib client = got my results.

First time round, the twisted xmlrpc client sits together with the 
server in one application, the client calls on a reactor.callLater(). 
This does not work, so I figured I must be doing something wrong. I 
split up the client and the server and I got the same error, split up 
the program network wise, again the same error, on the client, its:
[Failure instance: Traceback: twisted.internet.error.ConnectionLost,]
and on the Server:
2003/05/22 23:30 SGT [HTTPChannel,5,192.168.10.15] Traceback (most 
recent call last):
          File 
&quot;/usr/lib/python2.2/site-packages/twisted/protocols/basic.py&quot;, line 173, 
in dataReceived
            self.lineReceived(line)
          File 
&quot;/usr/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 893, 
in lineReceived
            self.allContentReceived()
          File 
&quot;/usr/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 932, 
in allContentReceived
            req.requestReceived(command, path, version)
          File 
&quot;/usr/lib/python2.2/site-packages/twisted/protocols/http.py&quot;, line 504, 
in requestReceived
            self.process()
        --- &lt;exception caught here&gt; ---
          File &quot;/usr/lib/python2.2/site-packages/twisted/web/server.py&quot;, 
line 156, in process
            self.render(resrc)
          File &quot;/usr/lib/python2.2/site-packages/twisted/web/server.py&quot;, 
line 162, in render
            body = resrc.render(self)
          File &quot;/usr/lib/python2.2/site-packages/twisted/web/xmlrpc.py&quot;, 
line 103, in render
            args, functionPath = xmlrpclib.loads(request.content.read())
          File 
&quot;/var/tmp/python-2.2.2-root/usr/lib/python2.2/xmlrpclib.py&quot;, line 805, 
in loads
            p.close()
          File 
&quot;/var/tmp/python-2.2.2-root/usr/lib/python2.2/xmlrpclib.py&quot;, line 393, 
in close
            self._parser.Parse(&quot;&quot;, 1) # end of data
        xml.parsers.expat.ExpatError: no element found: line 1, column 0

Here's what I did in detail:

The server is the exact one found at 
<A HREF="http://twistedmatrix.com/documents/howto/xmlrpc">http://twistedmatrix.com/documents/howto/xmlrpc</A>
The client is something like the one I found at the same page as well, 
but this time on an interactive python session.
----------------
Python 2.2.2 (#1, May 19 2003, 14:32:06)
[GCC 2.96 20000731 (Red Hat Linux 7.2 2.96-112.7.2)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
 &gt;&gt;&gt; from twisted.web.xmlrpc import Proxy
 &gt;&gt;&gt; from twisted.internet import reactor
 &gt;&gt;&gt;
 &gt;&gt;&gt; def printValue(value):
...     print repr(value)
...     reactor.stop()
...
 &gt;&gt;&gt; def printError(error):
...     print 'error', error
...     reactor.stop()
...
 &gt;&gt;&gt; p = Proxy('<A HREF="http://192.168.11.1:7080'">http://192.168.11.1:7080'</A>)
 &gt;&gt;&gt; #### Calling the add method with twisted
 &gt;&gt;&gt; p.callRemote('add', 3, 5).addCallbacks(printValue, printError)
&lt;Deferred at 0x83d3f84&gt;
 &gt;&gt;&gt; reactor.run()
error [Failure instance: Traceback: twisted.internet.error.ConnectionLost,
]
 &gt;&gt;&gt; from xmlrpclib import Server
 &gt;&gt;&gt; s=Server('<A HREF="http://192.168.11.1:7080'">http://192.168.11.1:7080'</A>)
 &gt;&gt;&gt; #### Calling the add method with xmlrpclib
 &gt;&gt;&gt; s.add(3,5)
8
 &gt;&gt;&gt; p = Proxy('<A HREF="http://some.web.site/RPC2'">http://some.web.site/RPC2'</A>)
 &gt;&gt;&gt; #### Using proxy again to talk to an xmlrpclib based server (pyblosxom)
 &gt;&gt;&gt; p.callRemote('blogger.getUsersBlogs', '', 'myusername', 
'mypassword').addCallbacks(printValue, printError)
&lt;Deferred at 0x83e8ac4&gt;
 &gt;&gt;&gt; reactor.run()
[{'url': '<A HREF="http://some.web.site/blog/',">http://some.web.site/blog/',</A> 'blogid': '/', 'blogName': '/'}, 
{'url': '<A HREF="http://some.web.site/blog/GeekyStuff/',">http://some.web.site/blog/GeekyStuff/',</A> 'blogid': 
'/GeekyStuff/', 'blogName': '/GeekyStuff/'}]
 &gt;&gt;&gt;
-----------------
What could be happening here?




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004179.html">[Twisted-Python] Installing the windows binary with Python 2.3a...
</A></li>
	<LI>Next message: <A HREF="004181.html">[Twisted-Python] Anomaly found between twisted XML-RPC client and twisted server (Bug?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4176">[ date ]</a>
              <a href="thread.html#4176">[ thread ]</a>
              <a href="subject.html#4176">[ subject ]</a>
              <a href="author.html#4176">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
