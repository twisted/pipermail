<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Woven using wrong model adapter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%20using%20wrong%20model%20adapter&In-Reply-To=%3C1053997977.19896.19.camel%40troglodyte.funhouse%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036769.html">
   <LINK REL="Next"  HREF="036753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Woven using wrong model adapter</H1>
    <B>Kevin Turner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%20using%20wrong%20model%20adapter&In-Reply-To=%3C1053997977.19896.19.camel%40troglodyte.funhouse%3E"
       TITLE="[Twisted-Python] Woven using wrong model adapter">acapnotic at twistedmatrix.com
       </A><BR>
    <I>Mon May 26 19:13:05 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036769.html">[Twisted-Python] sshclient and sshserver examples
</A></li>
        <LI>Next message (by thread): <A HREF="036753.html">[Twisted-Python] Woven using wrong model adapter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36751">[ date ]</a>
              <a href="thread.html#36751">[ thread ]</a>
              <a href="subject.html#36751">[ subject ]</a>
              <a href="author.html#36751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have:

components.registerAdapter(model.ObjectWrapper,
                           interests.InterestChangeReport,
                           wovenInterfaces.IModel)

class Page(page.Page):
    def wmfactory_report(self, request):
        if sometimes:
            return deferredInterestChangeReport()
        else:
            return ''

If the first page I serve after starting the server gets an
InterestChangeReport, then everything works just fine.  However, if the
first page served gets '', then any future page that gets an
InterestChangeReport dies with an exception:  &quot;the submodel was not
found in [&lt;twisted.web.woven.model.StringModel instance at 0x85167c4:
wrapped data: &lt;InterestChangeReport instance...&gt;&quot;

So why does woven persist in using the StringModel adapter in this case,
and how can I get it to stop?

Don't know if this is related or not, but the log shows messages like:
&quot;Warning: There was no parent for node [...]; node not mutated.&quot;  Is
that something I should be concerned about?

Thanks,

 - Kevin


-- 
The moon is waning crescent, 16.8% illuminated, 25.6 days old.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: &lt;/pipermail/twisted-python/attachments/20030526/bdd105c7/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036769.html">[Twisted-Python] sshclient and sshserver examples
</A></li>
	<LI>Next message (by thread): <A HREF="036753.html">[Twisted-Python] Woven using wrong model adapter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36751">[ date ]</a>
              <a href="thread.html#36751">[ thread ]</a>
              <a href="subject.html#36751">[ subject ]</a>
              <a href="author.html#36751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
