<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] examples/echoserv_ssl.py, win32
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20examples/echoserv_ssl.py%2C%20win32&In-Reply-To=20030504233258.GA4608%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003911.html">
   <LINK REL="Next"  HREF="003914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] examples/echoserv_ssl.py, win32</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20examples/echoserv_ssl.py%2C%20win32&In-Reply-To=20030504233258.GA4608%40localhost.localdomain"
       TITLE="[Twisted-Python] examples/echoserv_ssl.py, win32">exarkun at intarweb.us
       </A><BR>
    <I>Sun May  4 23:13:09 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003911.html">[Twisted-Python] examples/echoserv_ssl.py, win32
</A></li>
        <LI>Next message: <A HREF="003914.html">[Twisted-Python] examples/echoserv_ssl.py, win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3913">[ date ]</a>
              <a href="thread.html#3913">[ thread ]</a>
              <a href="subject.html#3913">[ subject ]</a>
              <a href="author.html#3913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, May 04, 2003 at 07:32:58PM -0400, Eric C. Newton wrote:
&gt;<i> Windows ME (yes, Windows ME, the trashy one)
</I>&gt;<i> Python 2.2.2
</I>&gt;<i> Twisted 1.0.4
</I>&gt;<i> pyOpenSSL-0.4.1.win32-py2.2    (from sourceforge)
</I>&gt;<i> OpenSSL 0.9.7b
</I>
  Current CVS Twisted has extensively refactored SSL support.  

&gt;<i> 
</I>&gt;<i> After fixing the reported bug in echoserv_ssl.py, I ran this at a
</I>&gt;<i> cygwin prompt:
</I>&gt;<i> 
</I>&gt;<i> 	$ python echoserv_ssl.py
</I>&gt;<i> 
</I>&gt;<i> I tried running echoclient, and I get a dialog box saying:
</I>&gt;<i> 
</I>&gt;<i>        Python has caused an error in SSLEAY32.DLL. 
</I>&gt;<i>        Python will now close.
</I>&gt;<i>        
</I>&gt;<i>        If you continue to experience problems,
</I>&gt;<i>        try restarting your computer.
</I>&gt;<i> 
</I>&gt;<i> After clicking &quot;OK&quot; the echoclient_ssl quits. Alright... I won't do
</I>&gt;<i> that.  But I also get a stack trace in the server, which reproduces
</I>&gt;<i> the error I get in my actual application.
</I>
  Ouch. :o

&gt;<i> 
</I>&gt;<i> I don't really want an SSL client, I want an SSL server.  So I point
</I>&gt;<i> InternetExplorer to: <A HREF="https://127.0.0.1:8000.">https://127.0.0.1:8000.</A>  Same stack trace.  Here
</I>&gt;<i> it is:
</I>&gt;<i> 
</I>&gt;<i>     2003/05/04 19:28 [-] Log opened.
</I>&gt;<i>     2003/05/04 19:28 [*echo-ssl*] twisted.internet.protocol.Factory starting on 8000
</I>&gt;<i>     2003/05/04 19:28 [*echo-ssl*] Starting factory &lt;twisted.internet.protocol.Factory instance at 0x00B56B40&gt;
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory] Traceback (most recent call last):
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]   File &quot;C:\PYTHON22\lib\site-packages\twisted\internet\app.py&quot;, line 869, in run
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]     reactor.run(installSignalHandlers=installSignalHandlers)
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]   File &quot;C:\PYTHON22\lib\site-packages\twisted\internet\default.py&quot;, line 123, in run
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]     self.mainLoop()
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]   File &quot;C:\PYTHON22\lib\site-packages\twisted\internet\default.py&quot;, line 134, in mainLoop
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]     self.doIteration(t)
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]   File &quot;C:\PYTHON22\lib\site-packages\twisted\internet\default.py&quot;, line 469, in doSelect
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]     why = getattr(selectable, method)()
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory] --- &lt;exception caught here&gt; ---
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]   File &quot;C:\PYTHON22\lib\site-packages\twisted\internet\ssl.py&quot;, line 269, in doRead
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory]     skt, addr = self.socket.accept()
</I>&gt;<i>     2003/05/04 19:29 [twisted.internet.protocol.Factory] SSL.WantReadError: 
</I>

  Current CVS of Twisted has somewhat dramatically refactored SSL support. 
Would it be possible for you to grab it and see if the same problem occurs?

  Looking at the SSL code for 1.0.4, it seems like the &quot;except SSL.Error:&quot;
around the accept() call should be catching SSL.WantReadError.  Can you
check the output of this?

    from OpenSSL import SSL
    print isinstance(SSL.WantReadError, SSL.Error)

  Jp

-- 
&quot;Minerals are inexhaustible and will never be depleted. A stream of
investment creates additions to proved reserves, a very large in-ground
inventory, constantly renewed as it is extracted... How much was in the
ground at the start and how much will be left at the end are unknown and
irrelevant.&quot;  -- Morry Adelman, World Renowned Economist
-- 
 up 3 days, 0:38, 2 users, load average: 0.18, 0.19, 0.13
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20030504/4bc3ce2d/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20030504/4bc3ce2d/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003911.html">[Twisted-Python] examples/echoserv_ssl.py, win32
</A></li>
	<LI>Next message: <A HREF="003914.html">[Twisted-Python] examples/echoserv_ssl.py, win32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3913">[ date ]</a>
              <a href="thread.html#3913">[ thread ]</a>
              <a href="subject.html#3913">[ subject ]</a>
              <a href="author.html#3913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
