<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted.web.woven.guard.SessionWrapper problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.web.woven.guard.SessionWrapper%20problems&In-Reply-To=%3C7033844F-84E8-11D7-AD87-000393C9700E%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="036545.html">
   <LINK REL="Next"  HREF="036561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted.web.woven.guard.SessionWrapper problems</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twisted.web.woven.guard.SessionWrapper%20problems&In-Reply-To=%3C7033844F-84E8-11D7-AD87-000393C9700E%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] twisted.web.woven.guard.SessionWrapper problems">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon May 12 20:13:08 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036545.html">[Twisted-Python] twisted.web.woven.guard.SessionWrapper problems
</A></li>
        <LI>Next message (by thread): <A HREF="036561.html">[Twisted-Python] twisted.web.woven.guard.SessionWrapper problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36557">[ date ]</a>
              <a href="thread.html#36557">[ thread ]</a>
              <a href="subject.html#36557">[ subject ]</a>
              <a href="author.html#36557">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


On Monday, May 12, 2003, at 02:26 AM, Matthias Urlichs wrote:

&gt;<i> Some browsers, including wget, don't like _at_all_ when you have a 
</I>&gt;<i> cycle
</I>&gt;<i> in your redirections, even though they should notice that they now 
</I>&gt;<i> have a
</I>&gt;<i> cookie while formerly they didn't.
</I>
I guess they really expect GET to be idempotent :-\

&gt;<i> Therefore I propose to rewrite the SessionWrapper to always change the
</I>&gt;<i> user's path, like this (the string &quot;sp&quot; is self.cookieKey):
</I>[...]
&gt;<i> so that access with no session can be distinguished from a plain link 
</I>&gt;<i> into
</I>&gt;<i> /sessionized-url/foo; the latter means the user might want to log in, 
</I>&gt;<i> but
</I>&gt;<i> the former should tell the user that their session has timed out before
</I>&gt;<i> offering the login page.
</I>
What's problematic about this is that if the user bookmarks a page, or 
exchanges a link, I want to initialize the session without changing the 
URL.  In fact, it's somewhat pointless to have a URL (stateless 
location identifier) that specifically only works if you've initiated a 
stateful conversation.

Maybe there are some ways we could monkey with HTTP to cause browsers 
to be happier here: would a 307 (Temporary Redirect) be more 
appropriate than a 302 (Found)?  Or perhaps would these browsers be 
happier if we redirected them to 
/sessionized-url/foo?__session_just_started__=1 rather than 
/sessionized-url/foo ?  It would be unusual to bookmark that URL, since 
the extra crud would only be on the first URL you hit, and if you did 
we could always remove the query string rather than adding it.

&gt;<i> An additional advantage of this scheme would be that
</I>&gt;<i> .../unsessionized-url/ can be reaced with a constant number of 
</I>&gt;<i> backpaths.
</I>
This, however, I like.  I don't know if cookieKey is the right thing to 
use in the URL there, but having relative URLs that match regardless of 
your session negotiation strategy is a _big_ plus.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (Darwin)

iD8DBQE+wFS5vVGR4uSOE2wRAlzZAKCWJNdUbR50hLtilqFZ1NGJ2pP+TQCfYEv0
VCGTwm8HaTHXr3fscnBcU9U=
=8g4b
-----END PGP SIGNATURE-----



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036545.html">[Twisted-Python] twisted.web.woven.guard.SessionWrapper problems
</A></li>
	<LI>Next message (by thread): <A HREF="036561.html">[Twisted-Python] twisted.web.woven.guard.SessionWrapper problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36557">[ date ]</a>
              <a href="thread.html#36557">[ thread ]</a>
              <a href="subject.html#36557">[ subject ]</a>
              <a href="author.html#36557">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
