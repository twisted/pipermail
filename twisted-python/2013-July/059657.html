<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted and new-style classes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20new-style%20classes&In-Reply-To=%3CCAE_Hg6b1uoh%2BpamcVPSQcNU3WB_1SwwBopVRHo-oDfzg7zuy5w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted and new-style classes</H1>
    <B>Laurens Van Houtven</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20and%20new-style%20classes&In-Reply-To=%3CCAE_Hg6b1uoh%2BpamcVPSQcNU3WB_1SwwBopVRHo-oDfzg7zuy5w%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Twisted and new-style classes">_ at lvh.io
       </A><BR>
    <I>Mon Jul 15 06:59:39 MDT 2013</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59657">[ date ]</a>
              <a href="thread.html#59657">[ thread ]</a>
              <a href="subject.html#59657">[ subject ]</a>
              <a href="author.html#59657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

Maciej from the PyPy team has graciously offered to upgrade all of
Twisted's existing old-style classes to new-style. The reason this is now
also a mailing list thread is because it may, potentially, break some
things, and we want people to have a heads up. Of course, Twisted will
never break your stuff without warning (at least not intentionally) and the
normal compatibility policy is in effect as always :)

The catch is that Maciej wants some kind of guarantee that at some point,
this will be on by default. At least two committers (myself and Glyph) want
this, so I'm confident this is the case: unless someone highlights a huge
flaw in my reasoning that shows that we can't actually do this :)

Benefits:

- We get to use everything that requires new-style classes, e.g. the
descriptor protocol, and by extension classmethods, staticmethods,
properties...
- Performance benefit on PyPy
- Consistency of behavior between 2.x and 3.x

Counterarguments:

- It's a lot of work. That's true, but shouldn't concern you: we have
someone who says they're willing to actually do that work.
- It will break things. That is probably true, but Twisted never promises
not to break anything ever. It has a compatibility policy, the guiding line
for which is &quot;the first one is always free&quot;. As long as we have a full,
real release where we *warn* people that something is going to happen and
they should test it now, we're satisfying that policy. The problem is that
AFAICT there's no obvious way to identify where problems will occur (since
it's a consequence of how people use current old-style things). The
suggested approach to this is that we have a release where all classes that
are going to be new-style are old-style by default, but, given e.g. an
environment variable, all of them *can* be new-style. The warning could
then be that you should turn on that environment variable (requiring
conscious action and being easy enough to undo if your code breaks).

I would suggest doing the transition in small steps, and adding the
environment variable as a priority. That way, people who know about this
can at least already run their tests before the entire process is complete.
Also, just because it has to be complete (but off by default) for at least
one release, doesn't mean it has be exactly one release :)

For new development, IIUC, new-style classes are already a requirement, so
this doesn't affect it.

cheers
lvh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20130715/2eb009ca/attachment-0002.html&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59657">[ date ]</a>
              <a href="thread.html#59657">[ thread ]</a>
              <a href="subject.html#59657">[ subject ]</a>
              <a href="author.html#59657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
