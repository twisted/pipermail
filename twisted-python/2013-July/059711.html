<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Trial &amp; the mock library
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Trial%20%26%20the%20mock%20library&In-Reply-To=%3CCAL%2BxXwMuLHXOHFufq79tmVJ7x5%2BP9%3DEtheODsVu%2B7GcuMy5sNQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059710.html">
   <LINK REL="Next"  HREF="059713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Trial &amp; the mock library</H1>
    <B>Matt Haggard</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Trial%20%26%20the%20mock%20library&In-Reply-To=%3CCAL%2BxXwMuLHXOHFufq79tmVJ7x5%2BP9%3DEtheODsVu%2B7GcuMy5sNQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Trial &amp; the mock library">haggardii at gmail.com
       </A><BR>
    <I>Thu Jul 25 19:51:41 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059710.html">[Twisted-Python] Trial &amp; the mock library
</A></li>
        <LI>Next message (by thread): <A HREF="059713.html">[Twisted-Python] Trial &amp; the mock library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59711">[ date ]</a>
              <a href="thread.html#59711">[ thread ]</a>
              <a href="subject.html#59711">[ subject ]</a>
              <a href="author.html#59711">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a few thoughts:

First, how does this hypothetical system for specifying return types solve
the original problem (that user-written methods on TestCase pass
unexpectedly when a non-Deferred is returned)?  If I'm the one writing
test_whatever, with the proposed doc string method for specifying return
type, then wouldn't I need to write a docstring that specifies the return
type as Deferred?

Second, I don't love the idea of the docstring changing how a function
behaves... I like that it's a free form blob of text.  I think I'd rather
see decorators used for this purpose.

I understand that one benefit of putting the info in the docstring is that
it ensures the docstring will always be accurate.

But you could just as easily extract the return type from the decorator for
generating HTML docs, and people reading the source could see the
decorators.

Also, we can still leverage the existing info recorded in the docstring by
doing a one time pass off the code to turn the docstring info into
decorators.

My two cents
On Jul 25, 2013 5:13 PM, &quot;Glyph&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Jul 25, 2013, at 3:51 PM, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
</I>&gt;<i>
</I>&gt;<i> On 08:33 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Jul 25, 2013, at 8:40 AM, Jonathan Lange &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jml at mumak.net</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> On Thu, Jul 25, 2013 at 4:14 PM, Laurens Van Houtven &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">_ at lvh.io</A>&gt; wrote:
</I>&gt;<i> In addition to what jml said, I wonder if it makes sense for TestCase to
</I>&gt;<i> raise when the return value of a test method is something other than None
</I>&gt;<i> or a Deferred...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Why stop there? Why not have a generic system to allow specifying valid
</I>&gt;<i> return types for any function?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That sounds like a great idea, I wonder if anyone's thought of it before.
</I>&gt;<i>
</I>&gt;<i> We already encode the information in epytext.  Should we make it a
</I>&gt;<i> dependency, so it can be parsed at runtime to aid with enforcement?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Please finish the Lore -&gt; Sphinx transition first so that we can begin
</I>&gt;<i> investigating whether reStructuredText for API documentation is sensible.
</I>&gt;<i>  We don't want to drag in an epytext parsing dependency if we're just going
</I>&gt;<i> to switch to docutils in eight or nine years.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That's a good point, but I wouldn't want to block on it.  We could easily
</I>&gt;<i> implement a simple abstraction layer for type identification that layers
</I>&gt;<i> and translates between epydoc and ReST; we'd probably need this during the
</I>&gt;<i> transitional period anyway, since lore-&gt;sphinx isn't pydoctor-&gt;sphinx.
</I>&gt;<i>
</I>&gt;<i> Plus, of course, we'd need that abstraction layer to support multiple
</I>&gt;<i> different styles of py3k function annotations, if we're talking about
</I>&gt;<i> things that people might use in eight or nine years.
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20130725/f8d12f30/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059710.html">[Twisted-Python] Trial &amp; the mock library
</A></li>
	<LI>Next message (by thread): <A HREF="059713.html">[Twisted-Python] Trial &amp; the mock library
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59711">[ date ]</a>
              <a href="thread.html#59711">[ thread ]</a>
              <a href="subject.html#59711">[ subject ]</a>
              <a href="author.html#59711">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
