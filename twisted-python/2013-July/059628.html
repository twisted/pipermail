<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Daemonizing app (two udp servers + flask)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Daemonizing%20app%20%28two%20udp%20servers%20%2B%20flask%29&In-Reply-To=%3CCAEq9sJu3Ge4z1FaLC1RdvCzrvnL0jLvy_1Ud2Z1yrgzRPw12jg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="059626.html">
   <LINK REL="Next"  HREF="027168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Daemonizing app (two udp servers + flask)</H1>
    <B>Beth</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Daemonizing%20app%20%28two%20udp%20servers%20%2B%20flask%29&In-Reply-To=%3CCAEq9sJu3Ge4z1FaLC1RdvCzrvnL0jLvy_1Ud2Z1yrgzRPw12jg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Daemonizing app (two udp servers + flask)">beth.null at gmail.com
       </A><BR>
    <I>Tue Jul  2 16:03:08 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="059626.html">[Twisted-Python] Daemonizing app (two udp servers + flask)
</A></li>
        <LI>Next message (by thread): <A HREF="027168.html">[Twisted-Python] BuildBot problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59628">[ date ]</a>
              <a href="thread.html#59628">[ thread ]</a>
              <a href="subject.html#59628">[ subject ]</a>
              <a href="author.html#59628">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

After some code rework, I got it working.

The trick is that factories aren't supported in UPD, and they work directly
in the service creation.

Flask seems to work in the same way, not needing to be wrapped into any
factory or so. However in order not to have a .tac file loaded with the
routes and this stuff I've used flask-classy. Half an hour later everything
seems to work.

Here is my current tac file:
-----------------------------------------

from twisted.internet import reactor

from twisted.application import service, internet

from twisted.web.server import Site

from twisted.web.wsgi import WSGIResource

from flask import Flask

from server import Server

from bootloader import BootLoaderServer

from restful_api import RestFulApi


flask_app = Flask(&quot;restfulapi&quot;, static_folder=&quot;www&quot;, static_url_path=&quot;&quot;)

flask_app.debug = True

flask_resource = WSGIResource(reactor, reactor.getThreadPool(), flask_app)

flask_site = Site(flask_resource)

RestFulApi.register(flask_app)

server = Server()

server.load_cfg(&quot;default.cfg&quot;)

bootloader_server = BootLoaderServer()

application = service.Application(&quot;unidosys&quot;)

multi_service = service.MultiService()

flask_service = internet.TCPServer(8080, flask_site)

main_service = internet.UDPServer(Server.port, server)

bootloader_service = internet.UDPServer(BootLoaderServer.multicast_port,
bootloader_server)


flask_service.setServiceParent(multi_service)

main_service.setServiceParent(multi_service)

bootloader_service.setServiceParent(multi_service)

unidosys_service.setServiceParent(application)


-----------------------------------------

So far so good ;).

Thanks for your kind help and for this fantastic framework.

All the best, Beth.

On 2 July 2013 21:29, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> On Jul 2, 2013, at 12:02 PM, Beth &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">beth.null at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Can someone give me a hand in how to daemonize one application?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think that the way to go is twistd (...)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> That's correct.
</I>&gt;<i>
</I>&gt;<i> After reading the rest of your message, I don't see any *problems* that
</I>&gt;<i> you've had with using it.  All the code looks basically right, and you
</I>&gt;<i> don't mention any tracebacks.
</I>&gt;<i>
</I>&gt;<i> If &quot;just use twistd&quot; doesn't help you, can you explain what exactly
</I>&gt;<i> doesn't work when you try to use it?
</I>&gt;<i>
</I>&gt;<i> -glyph
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20130703/d5cd1374/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="059626.html">[Twisted-Python] Daemonizing app (two udp servers + flask)
</A></li>
	<LI>Next message (by thread): <A HREF="027168.html">[Twisted-Python] BuildBot problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59628">[ date ]</a>
              <a href="thread.html#59628">[ thread ]</a>
              <a href="subject.html#59628">[ subject ]</a>
              <a href="author.html#59628">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
