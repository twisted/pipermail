<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Best way to trigger a future connection with data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Best%20way%20to%20trigger%20a%20future%20connection%20with%0A%20data&In-Reply-To=%3C51E8F68E.2030700%40ed.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027208.html">
   <LINK REL="Next"  HREF="027215.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Best way to trigger a future connection with data</H1>
    <B>Nick Johnson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Best%20way%20to%20trigger%20a%20future%20connection%20with%0A%20data&In-Reply-To=%3C51E8F68E.2030700%40ed.ac.uk%3E"
       TITLE="[Twisted-Python] Best way to trigger a future connection with data">Nick.Johnson at ed.ac.uk
       </A><BR>
    <I>Fri Jul 19 02:19:26 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027208.html">[Twisted-Python] Best way to trigger a future connection with	data
</A></li>
        <LI>Next message: <A HREF="027215.html">[Twisted-Python] Best way to trigger a future connection with	data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27213">[ date ]</a>
              <a href="thread.html#27213">[ thread ]</a>
              <a href="subject.html#27213">[ subject ]</a>
              <a href="author.html#27213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks lvh,

I did have to override the buildProtocol method in the Factory but I
then set Protocol.factory to be equal to the Factory (ie,
myprotocol.factory=self).

I'm still stuck however with what to do when I get more complex than
this simple case. For example, I use a callingLoop to call multiple
connections with a 0.1 second interval to launch jobs and each of those
connections does as mentioned by setting up a future connection to
retrieve the output, say 10 seconds later. There is going to be some
overlap, ie I might have launched 100 new jobs before the first one
fires it's task.callLater.

Storing state in the factory class doesn't work in this case because
each new connection wont know whether to initiate a job or retrieve
output as I cannot pass it this extra information.

Cheers,
-Nick.


On 18/07/13 18:07, Laurens Van Houtven wrote:
&gt;<i> Hi Nick,
</I>&gt;<i> 
</I>&gt;<i> You're pretty much there already. Instantiate a ClientFactory that holds
</I>&gt;<i> all the necessary state. By default, your protocol will have access to
</I>&gt;<i> that state through its factory attribute (unless you override the
</I>&gt;<i> Factory's buildProtocol method).
</I>&gt;<i> 
</I>&gt;<i> cheers
</I>&gt;<i> lvh
</I>
-- 
The University of Edinburgh is a charitable body, registered in
Scotland, with registration number SC005336.


</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027208.html">[Twisted-Python] Best way to trigger a future connection with	data
</A></li>
	<LI>Next message: <A HREF="027215.html">[Twisted-Python] Best way to trigger a future connection with	data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27213">[ date ]</a>
              <a href="thread.html#27213">[ thread ]</a>
              <a href="subject.html#27213">[ subject ]</a>
              <a href="author.html#27213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
