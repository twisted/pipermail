<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problems with bdist_rpm on 0.11.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problems%20with%20bdist_rpm%20on%200.11.0&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000475.html">
   <LINK REL="Next"  HREF="000477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problems with bdist_rpm on 0.11.0</H1>
    <B>Jeff Epler</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problems%20with%20bdist_rpm%20on%200.11.0&In-Reply-To="
       TITLE="[Twisted-Python] Problems with bdist_rpm on 0.11.0">jepler at inetnebr.com
       </A><BR>
    <I>Tue Oct  9 15:06:37 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000475.html">[Twisted-Python] Teud
</A></li>
        <LI>Next message: <A HREF="000477.html">[Twisted-Python] debuggabilly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#476">[ date ]</a>
              <a href="thread.html#476">[ thread ]</a>
              <a href="subject.html#476">[ subject ]</a>
              <a href="author.html#476">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I had problems building 0.11.0 with &quot;python2 setup.py bdist_rpm&quot; on my
system.  (redhat 6.2, python 2.1 rpm from tummy)

There were two syntax errors in twisted/mail/pb.py, and
twisted/spread/cBanana.c was not being included in the tarball that
bdist_rpm build (I think this is equivalent to 'python2 setup.py sdist',
if non-rpm folks want to see the problem).

This patch fixes the syntax errors (missing close parens), and adds
cBanana.c to MANIFEST.in.  I'm not sure that this is the correct fix
for the extension, but It Works For Me(tm)

Please copy me (<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jepler at inetnebr.com</A>) on any discussion.

Jeff
-------------- next part --------------
diff -ru Twisted-0.11.0/MANIFEST.in Twisted-0.11.0-local/MANIFEST.in
--- Twisted-0.11.0/MANIFEST.in	Sun Aug 19 00:15:23 2001
+++ Twisted-0.11.0-local/MANIFEST.in	Mon Oct  8 11:22:26 2001
@@ -22,6 +22,7 @@
 
 include CREDITS LICENSE README
 include MANIFEST.in
+include twisted/spread/cBanana.c
 
 recursive-include bin *
 recursive-include doc *.html
diff -ru Twisted-0.11.0/twisted/mail/pb.py Twisted-0.11.0-local/twisted/mail/pb.py
--- Twisted-0.11.0/twisted/mail/pb.py	Wed Sep 26 04:00:25 2001
+++ Twisted-0.11.0-local/twisted/mail/pb.py	Mon Oct  8 11:26:56 2001
@@ -26,7 +26,7 @@
     def getFolderMessage(self, folder, name):
         if '/' in name:
             raise IOError(&quot;can only open files in '%s' directory'&quot; % folder)
-        fp = open(os.path.join(self.directory, 'new', name)
+        fp = open(os.path.join(self.directory, 'new', name))
         try:
             return fp.read()
         finally:
@@ -78,7 +78,7 @@
     def _isSubFolder(self, name):
         return (not os.path.isdir(os.path.join(self.rootDirectory, name)) or
                 not os.path.isfile(os.path.join(self.rootDirectory, name, 
-                                                'maildirfolder'))
+                                                'maildirfolder')))
 
 
 class MaildirCollection(pb.Referencable):
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000475.html">[Twisted-Python] Teud
</A></li>
	<LI>Next message: <A HREF="000477.html">[Twisted-Python] debuggabilly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#476">[ date ]</a>
              <a href="thread.html#476">[ thread ]</a>
              <a href="subject.html#476">[ subject ]</a>
              <a href="author.html#476">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
