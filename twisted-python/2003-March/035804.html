<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re-Occuring Operations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re-Occuring%20Operations&In-Reply-To=%3C20030317185549.GA13998%40doublegemini.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="035799.html">
   <LINK REL="Next"  HREF="035805.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re-Occuring Operations</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re-Occuring%20Operations&In-Reply-To=%3C20030317185549.GA13998%40doublegemini.com%3E"
       TITLE="[Twisted-Python] Re-Occuring Operations">cce at clarkevans.com
       </A><BR>
    <I>Mon Mar 17 11:55:49 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="035799.html">[Twisted-Python] Re-Occuring Operations
</A></li>
        <LI>Next message (by thread): <A HREF="035805.html">[Twisted-Python] Re-Occuring Operations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35804">[ date ]</a>
              <a href="thread.html#35804">[ thread ]</a>
              <a href="subject.html#35804">[ subject ]</a>
              <a href="author.html#35804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Mar 17, 2003 at 11:46:45PM +1100, Andrew Bennetts wrote:
|<i> On the other hand, being a fairly straightforward six-line function, it
</I>|<i> probably doesn't need to be in Twisted.
</I>
Yes, it is a straight-foward 6-liner, but there are quite 
a few 6-liners in Twisted.  Anyway, I think it'd be useful.

|<i> &gt;    (b) an operation which keeps pooling a resource, if 
</I>|<i> &gt;        the resource is busy it returns true, otherwise 
</I>|<i> &gt;        it processes the resource and returns false to
</I>|<i> &gt;        signal that it is done
</I>|<i> 
</I>|<i> I don't quite understand your terminology.  I think you mean there's a queue
</I>|<i> of operations that can only be processed if there's some sort of resource
</I>|<i> available to process them, and you wish to occasionally poll the resource
</I>|<i> pool to see if there's one free.  If so, it's probably better to arrange
</I>|<i> your code to avoid polling, i.e. make the resource pool check the queue
</I>|<i> automatically when a resource is freed.  This reduces latency and is usually
</I>|<i> simpler.
</I>
Cool.  Is there an example?  I have a database select statement,
and I need to reschedule several operations till it produces
information.  Further, it may consume faster than the database
can produce rows; so it'be be nice to have it add back to the
wait queue every once and a while.  

For a simple example, assume I have an array; and a thread
which is populating the array, using callFromThread(array.append, value)
in the main IO thread, I'd like to have my function wait till
the array has items in it, and pause when the array is empty.
I'm using the array as the 'input queue' so to speak.

I'd love to know the 'preferred' way to do this, right now
I'm pooling the array to see if it's size is &gt; 0.  Not clean.

|<i> Regardless, I'm not sure this deserves or requires special support in
</I>|<i> Twisted.  Merely documenting the necessary idioms is probably better.  After
</I>|<i> all there are lots of possible small variations (e.g. dynamically varying
</I>|<i> the interval based on the function's return value) that would be tedious to
</I>|<i> build into a generic class or function, but are dead simple to build into
</I>|<i> your own six-line implementation. 
</I>
I don't think that there are many permutations on this case; and
yes, allowing the function to specify how long to wait would be
a perfect example.   In fact, it fits in really nicely with
the iterator pattern; make the loop break with a StopIteration
exception.  And, take the return value of the function to 
figure out how long from now the next invocation should be;
None could be equivalent to 0.

|<i> Or perhaps I'm wrong, and there's a nice class with lots of use-cases just
</I>|<i> waiting to be implemented :)
</I>
The advantage of having a standard 6-liner is that it helps
in documentation this seems to be common enough that it
reoccurs in various projects.

Clark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="035799.html">[Twisted-Python] Re-Occuring Operations
</A></li>
	<LI>Next message (by thread): <A HREF="035805.html">[Twisted-Python] Re-Occuring Operations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35804">[ date ]</a>
              <a href="thread.html#35804">[ thread ]</a>
              <a href="subject.html#35804">[ subject ]</a>
              <a href="author.html#35804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
