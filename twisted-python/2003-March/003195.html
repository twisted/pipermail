<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] PATCH: runQuery
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PATCH%3A%20runQuery&In-Reply-To=CD0945E1-5040-11D7-9352-000393C9700E%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003194.html">
   <LINK REL="Next"  HREF="003199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] PATCH: runQuery</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20PATCH%3A%20runQuery&In-Reply-To=CD0945E1-5040-11D7-9352-000393C9700E%40twistedmatrix.com"
       TITLE="[Twisted-Python] PATCH: runQuery">cce at clarkevans.com
       </A><BR>
    <I>Thu Mar  6 21:27:31 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003194.html">[Twisted-Python] PATCH: runQuery
</A></li>
        <LI>Next message: <A HREF="003199.html">[Twisted-Python] PATCH: runQuery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3195">[ date ]</a>
              <a href="thread.html#3195">[ thread ]</a>
              <a href="subject.html#3195">[ subject ]</a>
              <a href="author.html#3195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 06, 2003 at 08:02:07PM -0600, Glyph Lefkowitz wrote:
|<i> On Thursday, March 6, 2003, at 07:49 PM, Dave Peticolas wrote:
</I>|<i> &gt;I think you are imposing policy for no reason.
</I>|<i> 
</I>|<i> I think that this is a tough call, although I am very slightly inclined 
</I>|<i> to agree with davep.
</I>|<i> 
</I>|<i> Why don't we make committing an optional argument, by default on, which 
</I>|<i> you can easily turn off if you want a rollback instead?  (At the risk 
</I>|<i> of making an overbroad generalization: rollback() tends to be more 
</I>|<i> expensive than commit() most of the time, which is another good reason 
</I>|<i> to make it the default.)
</I>
Typically one would call rollback() before you put 
the connection back into the connection pool.  Overall,
I think there is a lower level design problem with
the adbapi module.  If you are only running one query
then there isn't a rpoblem, but if you are executing
3 queries, say sequentially, then you don't want
that rollback.  The adbapi needs to expose 'connection'
object as a whole, with cursors.   I'll need to fix
this for myself... so if no one else does, I'll patch.

For now, I think rolling back between each query is
good enough... if someone wants to run several queries
in a row, then they really should help me patch.

The other related item is that some databases allow
for multiple cursors with the same connection; and
thus a single request may want to run N deferreds in
parallel (I do, for example) and these deferreds should
all come from the same connection if at all possible.

In short, this is one small issue that needs to be
resolved in that module.

Best,

Clark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003194.html">[Twisted-Python] PATCH: runQuery
</A></li>
	<LI>Next message: <A HREF="003199.html">[Twisted-Python] PATCH: runQuery
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3195">[ date ]</a>
              <a href="thread.html#3195">[ thread ]</a>
              <a href="subject.html#3195">[ subject ]</a>
              <a href="author.html#3195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
