<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-commits] Updated defer.html so	that the first 4 examples are runnable, split the 3rd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20Updated%20defer.html%20so%09that%20the%20first%204%20examples%20are%20runnable%2C%20split%20the%203rd&In-Reply-To=1047190343.957.130.camel%40golux">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003207.html">
   <LINK REL="Next"  HREF="003210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-commits] Updated defer.html so	that the first 4 examples are runnable, split the 3rd</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20Updated%20defer.html%20so%09that%20the%20first%204%20examples%20are%20runnable%2C%20split%20the%203rd&In-Reply-To=1047190343.957.130.camel%40golux"
       TITLE="[Twisted-Python] Re: [Twisted-commits] Updated defer.html so	that the first 4 examples are runnable, split the 3rd">andrew-twisted at puzzling.org
       </A><BR>
    <I>Sun Mar  9 01:51:02 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003207.html">[Twisted-Python] Re: [Twisted-commits] Updated defer.html so	that the first 4 examples are runnable, split the 3rd
</A></li>
        <LI>Next message: <A HREF="003210.html">[Twisted-Python] Updated defer.html
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3208">[ date ]</a>
              <a href="thread.html#3208">[ thread ]</a>
              <a href="subject.html#3208">[ subject ]</a>
              <a href="author.html#3208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Mar 09, 2003 at 01:12:22AM -0500, Steve Waterbury wrote:
&gt;<i> As one who has perpetual newbie-mind, I feel I should comment ...
</I>
Excellent :)

I was worried that my criticisms were based too much from the perspective of
someone who is already familiar with Deferreds.

&gt;<i> On Sat, 2003-03-08 at 20:49, Andrew Bennetts wrote:
</I>[..snip..]
&gt;<i> &gt; Not all example code
</I>&gt;<i> &gt; in the Howtos must be immediately executable standalone... I think perhaps
</I>&gt;<i> &gt; this example code would be better in the doc/examples directory, where it is
</I>&gt;<i> &gt; more appropriate for examples to be verbose like this.
</I>&gt;<i> 
</I>&gt;<i> Here I disagree.  Newbies are generally served better by 
</I>&gt;<i> examples with lots of (germane) comments ... but not 
</I>&gt;<i> extraneous stuff, like the Timer.  And I think it would be 
</I>&gt;<i> &quot;nice&quot; if they were executable, but if it comes down to 
</I>&gt;<i> choosing between clarity and executability, clarity should win.  
</I>
Yeah, true.  I over-emphasised a bit.  I guess I was thinking that the
Deferred doc is already quite long, and padding it with more examples that
are quite similar could be detrimental.  I certainly have no objections to
adding comments :)

&gt;<i> &gt; &gt; -&lt;p&gt;There are several things missing in this simple example.  There is no way to
</I>&gt;<i> &gt; &gt; -know if the data never comes back; no mechanism for handling errors.  There is
</I>&gt;<i> &gt; &gt; -no way to distinguish between different calls to gotData from different
</I>&gt;<i> &gt; &gt; -sessions.  &lt;code&gt;Deferred&lt;/code&gt; solves these problems, by creating a single,
</I>&gt;<i> &gt; &gt; -unified way to defer execution of code that depends on blocking calls.&lt;/p&gt;
</I>&gt;<i> &gt; &gt; +&lt;p&gt;There are several things missing in this simple example.  There is no way
</I>&gt;<i> &gt; &gt; +to know if the data never comes back; no mechanism for handling errors.  The
</I>&gt;<i> &gt; &gt; +example does not handle a multiple callback functions, nor does it give a
</I>&gt;<i> &gt; &gt; +method to merge arguments before and after execution.  Further, there is no
</I>&gt;<i> &gt; &gt; +way to distinguish between different calls to gotData from different
</I>&gt;<i> &gt; &gt; +producer objects. &lt;code&gt;Deferred&lt;/code&gt; solves these problems, by creating 
</I>&gt;<i> &gt; &gt; +a single, unified way to handle callbacks and errors from deferred
</I>&gt;<i> &gt; &gt; +execution.&lt;/p&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; What does &quot;merge arguments before and after execution&quot; mean to a Twisted
</I>&gt;<i> &gt; newbie?  Why would they want to do it?
</I>&gt;<i> 
</I>&gt;<i> Here I disagree again.  I think I know what is meant (although 
</I>&gt;<i> clarity could be improved, again), and it was one of the first things 
</I>&gt;<i> I wanted to do ... of course, it didn't take too long to suss that 
</I>&gt;<i> lambdas are the preferred idiom for that ... 
</I>
Asking &quot;Why would they want to do it?&quot; wasn't meant to question that newbies
wanted to do it.  I meant to point out that it was referring to a concept
that wouldn't be clear to many newbies, and would thus serve to confuse them
because they didn't know what it meant or why it might apply to them.
&quot;Merging arguments&quot; isn't terminology I've ever heard before, in Python or
elsewhere, so if I was a newbie I'd be wondering if this was yet another
Twisted thing.

Probably explicitly spelling out that chaining callbacks is useful for
progressively munging data is worth doing, though, maybe with an example
like:

    d = getItemsFromDB()

    def convertResultlistToHTML(results):
        return '&lt;ul&gt;' + ['&lt;li&gt;' + x for x in results] + '&lt;/ul&gt;'
    d.addCallback(convertResultlistToHTML)

Or should it be more contrived?  E.g.:

    d = getNumber()
    d.addCallback(lambda r: r + 10)       # Add ten
    d.addCallback(lambda r: 1.0 / r)      # Take the reciprocal
    def catchDivByZero(failure):
        failure.trap(ZeroDivisionError)
        return 0
    d.addErrback(catchDivByZero)
    d.addCallback(lambda r: '%0.3f' % r)  # Convert to string of up to 3
                                          # decimal places
    d.addCallback(lambda r: '&lt;b&gt;%s&lt;/b&gt;' % r) # Wrap in HTML

Is it already clear to newbies how callbacks chain and what they are good
for?

&gt;<i> &gt; ....  I think I'd also like
</I>&gt;<i> &gt; to add back the comment about &quot;This is an asynchronous equivalent of ...&quot; --
</I>&gt;<i> &gt; perhaps it's overly jargonistic, but it is the way I think about Deferreds;
</I>&gt;<i> &gt; they are the primary tool Twisted provides to abstract away blocking
</I>&gt;<i> &gt; operations into a fundamentally asynchronous framework.
</I>&gt;<i> 
</I>&gt;<i> Total agreement.  If they don't know what &quot;asynchronous&quot; 
</I>&gt;<i> means, they can look it up!  Sheesh, it's a standard term.  
</I>&gt;<i> (Twisted-specific jargon is not a problem in the docs 
</I>&gt;<i> either, as it is always defined when introduced.)
</I>
And Twisted-specific jargon should be added to the glossary, where possible.
Possibly 'asynchronous' should be added too, if it isn't already there.

&gt;<i> &gt; Again, with the next two examples I think you've obscured the point in your
</I>&gt;<i> &gt; efforts to make everything explicit.  I'd rather have a 10 line example
</I>&gt;<i> &gt; that illustrates a concept, than a 20 line example that obscures the same
</I>&gt;<i> &gt; concept behind irrelevant method definitions, etc.  ...
</I>&gt;<i> 
</I>&gt;<i> Agreed also.  
</I>&gt;<i> 
</I>&gt;<i> That said, I think there are cases where the in-line examples seem
</I>&gt;<i> a trifle too elliptical.  I'll have to be more specific, I know, 
</I>&gt;<i> so I'll send an example when I have time.  
</I>
Patches are, of course, welcome :)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003207.html">[Twisted-Python] Re: [Twisted-commits] Updated defer.html so	that the first 4 examples are runnable, split the 3rd
</A></li>
	<LI>Next message: <A HREF="003210.html">[Twisted-Python] Updated defer.html
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3208">[ date ]</a>
              <a href="thread.html#3208">[ thread ]</a>
              <a href="subject.html#3208">[ subject ]</a>
              <a href="author.html#3208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
