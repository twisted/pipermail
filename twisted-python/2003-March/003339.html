<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problems with PB and Jelly...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problems%20with%20PB%20and%20Jelly...&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003329.html">
   <LINK REL="Next"  HREF="003340.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problems with PB and Jelly...</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problems%20with%20PB%20and%20Jelly...&In-Reply-To="
       TITLE="[Twisted-Python] Problems with PB and Jelly...">warner at lothar.com
       </A><BR>
    <I>Sun Mar 23 02:34:26 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="003329.html">[Twisted-Python] Problems with PB and Jelly...
</A></li>
        <LI>Next message: <A HREF="003340.html">[Twisted-Python] Problems with PB and Jelly...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3339">[ date ]</a>
              <a href="thread.html#3339">[ thread ]</a>
              <a href="subject.html#3339">[ subject ]</a>
              <a href="author.html#3339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I have a Perspective &lt;-&gt; Referenceable server/client setup, and am trying to
</I>&gt;<i> pass objects between them.  Following the online docs I've set all the
</I>&gt;<i> relavent classes to inherit from pb.Copyable + pb.RemoteCopy, and passed them
</I>&gt;<i> all to pb.setUnjellyableForClass.
</I>
I'll take responsibility for that one (I wrote those docs :). If the classes
behave the same way on both ends, then it can make sense to inherit from both
Copyable and RemoteCopy. If objects are supposed to behave differently
depending upon whether they are the &quot;home&quot; or the &quot;away&quot; form, then you'll
want two classes, where the &quot;home&quot; form is pb.Copyable and the receiving
&quot;away&quot; form is pb.RemoteCopy. Often this depends upon whether the object
really has a home: if it is just a container for some chunk of state, and
doesn't hold any references to other objects, then it doesn't really have a
home and you can use the dual-inheritance trick to cut down on some typing.
In particular classes which could be replaced by dictionaries without losing
any functionality fall into this category.

You still have to keep in mind that the setCopyableState method is the point
where you get to exercise security. The 'state' provided to this method comes
from malicious invaders intent upon compromising your application. Make sure
it can deal with whatever evil it is given.

&gt;<i> I'm also unsure what to make of the last bullet under &quot;Things To Watch Out
</I>&gt;<i> For&quot; on the above webpage.  It seems unsure whether using __init__ to
</I>&gt;<i> initialize transferable objects is ok...  Must I truly go and hack all
</I>&gt;<i> my objects to not use __init__, and instead use setCopyableState()?
</I>
To be precise, the received objects are created with a hack that creates an
object of a dummy class, then transforms it into the correct class, then runs
setCopyableState to populate the attributes. By doing this, it avoids running
the new class' __init__ method altogether. When the object is created by you
(by using the class name as a callable), it will run __init__. When it is
created in response to a received serialized instance, it will not run
__init__ but will run setCopyableState instead. This lets you set up objects
differently in the two different situations.

&gt;<i> The &quot;module not allowed&quot; exception is misleading, and stems from what
</I>&gt;<i> appears to be an obsolete branch &quot;else&quot; branch of
</I>&gt;<i> jelly._Unjellier.unjelly(), judging by the fact that it uses the temp
</I>&gt;<i> variable jelType for something different than the &quot;if&quot; branch.
</I>
I think you might be right. We have a review of PB scheduled for the PyCon
sprint next tuesday.. I've added that code to the list of stuff to be
examined. We'll try to clear out all the dead code on that day.

cheers,
 -Brian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003329.html">[Twisted-Python] Problems with PB and Jelly...
</A></li>
	<LI>Next message: <A HREF="003340.html">[Twisted-Python] Problems with PB and Jelly...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3339">[ date ]</a>
              <a href="thread.html#3339">[ thread ]</a>
              <a href="subject.html#3339">[ subject ]</a>
              <a href="author.html#3339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
