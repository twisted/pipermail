<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] tap2deb -v/--version bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20tap2deb%20-v/--version%20bug&In-Reply-To=%3C20030304141000.GB13198%40lapdog%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="035654.html">
   <LINK REL="Next"  HREF="035653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] tap2deb -v/--version bug</H1>
    <B>Tommi Virtanen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20tap2deb%20-v/--version%20bug&In-Reply-To=%3C20030304141000.GB13198%40lapdog%3E"
       TITLE="[Twisted-Python] tap2deb -v/--version bug">tv at twistedmatrix.com
       </A><BR>
    <I>Tue Mar  4 07:10:00 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="035654.html">[Twisted-Python] mktap --uid=0 bug
</A></li>
        <LI>Next message (by thread): <A HREF="035653.html">[Twisted-Python] tap2deb -v/--version bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35647">[ date ]</a>
              <a href="thread.html#35647">[ thread ]</a>
              <a href="subject.html#35647">[ subject ]</a>
              <a href="author.html#35647">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>	tap2deb --version option is overridden by global handling
	for --version that just displays the version number.

[0 <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tv at lapdog</A> ~]$ tap2deb --help
Usage: tap2deb [options]
Options:
  -u, --unsigned           
  -t, --tapfile=           [default: twistd.tap]
  -m, --maintainer=        [default: ]
  -p, --protocol=          [default: ]
  -e, --description=       [default: ]
  -l, --long_description=  [default: ]
  -v, --version=           [default: 1.0]
  -d, --debfile=           
  -y, --type=              type of configuration: 'tap', 'xml, 'source' or
                           'python' [default: tap]
      --help               Display this help and exit.

tap2deb
[0 <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tv at lapdog</A> ~]$ tap2deb --version=42 -t foo.tap
/usr/bin/tap2deb: option --version must not have an argument
[1 <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tv at lapdog</A> ~]$ 

	Here's a patch that changes the option to --set-version=,
	and the short option to -V. Please tell if you approve this
	change.

diff -u -u -r1.9 tap2deb.py
--- twisted/scripts/tap2deb.py	3 Oct 2002 07:56:14 -0000	1.9
+++ twisted/scripts/tap2deb.py	4 Mar 2003 14:09:13 -0000
@@ -26,7 +26,7 @@
                   [&quot;protocol&quot;, &quot;p&quot;, &quot;&quot;],
                   [&quot;description&quot;, &quot;e&quot;, &quot;&quot;],
                   [&quot;long_description&quot;, &quot;l&quot;, &quot;&quot;],
-                  [&quot;version&quot;, &quot;v&quot;, &quot;1.0&quot;],
+                  [&quot;set-version&quot;, &quot;V&quot;, &quot;1.0&quot;],
                   [&quot;debfile&quot;, &quot;d&quot;, None],
                   [&quot;type&quot;, &quot;y&quot;, &quot;tap&quot;, &quot;type of configuration: 'tap', 'xml, 'source' or 'python'&quot;]]
 
@@ -54,7 +54,7 @@
     base_tap_file = os.path.basename(config['tapfile'])
     protocol = (config['protocol'] or os.path.splitext(base_tap_file)[0])
     deb_file = config['debfile'] or 'twisted-'+protocol
-    version = config['version']
+    version = config['set-version']
     maintainer = config['maintainer']
     description = config['description'] or ('A TCP server for %(protocol)s' %
                                             vars())



-- 
:<i>(){ :|:&amp;};:
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="035654.html">[Twisted-Python] mktap --uid=0 bug
</A></li>
	<LI>Next message (by thread): <A HREF="035653.html">[Twisted-Python] tap2deb -v/--version bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35647">[ date ]</a>
              <a href="thread.html#35647">[ thread ]</a>
              <a href="subject.html#35647">[ subject ]</a>
              <a href="author.html#35647">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
