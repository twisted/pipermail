<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] flow - a state-machine consumer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20flow%20-%20a%20state-machine%20consumer&In-Reply-To=%3C20030307070735.GA73244%40doublegemini.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="035753.html">
   <LINK REL="Next"  HREF="035705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] flow - a state-machine consumer</H1>
    <B>Clark C. Evans</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20flow%20-%20a%20state-machine%20consumer&In-Reply-To=%3C20030307070735.GA73244%40doublegemini.com%3E"
       TITLE="[Twisted-Python] flow - a state-machine consumer">cce at clarkevans.com
       </A><BR>
    <I>Fri Mar  7 00:07:35 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="035753.html">[Twisted-Python] Portland Perspective Broker presentationMonday
</A></li>
        <LI>Next message (by thread): <A HREF="035705.html">[Twisted-Python] flow - a state-machine consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35704">[ date ]</a>
              <a href="thread.html#35704">[ thread ]</a>
              <a href="subject.html#35704">[ subject ]</a>
              <a href="author.html#35704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>After being convinced on IRC that my use cases arn't what Deferred
is meant to solve, Donovan &quot;wzZzy&quot; and I put together a first pass
at a more granular 'consumer'.  I'm now using it to build some 
fairly complicated web pages from a database, and may find its 
way into Woven (although perhaps not in its current form). 

Anyway, the tool includes:

  0. the Flow dispatcher, which is a reactor like
     mechanism driving events.

  1. a mechanism to execute a function in a thread,
     where the function returns an iterator which
     is used to generate events in the main thread.

  2. an superclass of adbapi.ConnectionPool with
     a queryChunked function which returns a result
     set incrementally (row by row) to the main 
     thread for further processing

Future plans:

  0. Work on exception handling and trapping just
     to verify that it works as coded.

  1. Incorporate some way for the reactor to 'pause'
     itself (and throw it self into the event queue)
     so that other events can be processed

  2. Update the code so that the execute to thread
     function can take an initial state for an 
     argument

  3. Update the SQL linkage so that it can take
     more than one query in parallel, sequencing
     the result sets, and returning them to a 
     shared flow object using different state
     arguments.

It isn't stable, but you can find it in CVS, or at
   <A HREF="http://clarkevans.com/flow.py">http://clarkevans.com/flow.py</A>

Comments are encouraged.

Best,

Clark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="035753.html">[Twisted-Python] Portland Perspective Broker presentationMonday
</A></li>
	<LI>Next message (by thread): <A HREF="035705.html">[Twisted-Python] flow - a state-machine consumer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35704">[ date ]</a>
              <a href="thread.html#35704">[ thread ]</a>
              <a href="subject.html#35704">[ subject ]</a>
              <a href="author.html#35704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
