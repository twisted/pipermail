<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20%3A%20Combining%20wokel%20XMPP%20and%0A%09twisted.internet.serial&In-Reply-To=8744AB16-553F-4361-9EEA-3DA40D9F1861%40gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025039.html">
   <LINK REL="Next"  HREF="025041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial</H1>
    <B>bino oetomo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20%3A%20Combining%20wokel%20XMPP%20and%0A%09twisted.internet.serial&In-Reply-To=8744AB16-553F-4361-9EEA-3DA40D9F1861%40gmail.com"
       TITLE="[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial">bino at indoakses-online.com
       </A><BR>
    <I>Thu Dec 22 01:26:39 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="025039.html">[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial
</A></li>
        <LI>Next message: <A HREF="025041.html">[Twisted-Python] Question : Combining wokel XMPP	and	twisted.internet.serial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25040">[ date ]</a>
              <a href="thread.html#25040">[ thread ]</a>
              <a href="subject.html#25040">[ subject ]</a>
              <a href="author.html#25040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Lucas Taylor

Thankyou for your fast enlightment.

It's time for me to re-build my ejabberd turnkey linux

Sincerely
-bino-

On 12/22/2011 01:12 PM, Lucas Taylor wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is a relevant FAQ for this situation:
</I>&gt;<i> <A HREF="http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother">http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother</A> 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> More specifically:
</I>&gt;<i> 1. Create a Protocol class for your SerialPort that will communicate 
</I>&gt;<i> with the Arduino. Instances of this class will have access to the 
</I>&gt;<i> serial transport and can write out to the serial port. Incoming 
</I>&gt;<i> messages from the Arduino will be handled by the dataReceived method 
</I>&gt;<i> of the protocol.
</I>&gt;<i>
</I>&gt;<i> 2. Give your EchoBotProtocol a reference to the SerialPort somehow 
</I>&gt;<i> (e.g. via init), and set a reference to the EchoBotProtocol on the 
</I>&gt;<i> SerialPort.
</I>&gt;<i>
</I>&gt;<i> Here's a quick sketch:
</I>&gt;<i>
</I>&gt;<i> # Basic line receiver protocol
</I>&gt;<i> class ArduinoReceiver(LineReceiver):
</I>&gt;<i>     def lineReceived(self, line):
</I>&gt;<i>         print &quot;Line Received from Arduino&quot;
</I>&gt;<i>         self.echobot.send('some xmpp message for which I do not know 
</I>&gt;<i> the format')
</I>&gt;<i>
</I>&gt;<i> # Wire up the serial port and protocol...note there are more 
</I>&gt;<i> parameters to create the SerialPort (baudrate, etc.)
</I>&gt;<i> serial = SerialPort(ArduinoReceiver, '/dev/tty.usbserial', reactor)
</I>&gt;<i>
</I>&gt;<i> # EchoBot gets a reference to the serialport
</I>&gt;<i> class EchoBotProtocol(MessageProtocol):
</I>&gt;<i>       def __init__(self, serial, *args, **kwargs):
</I>&gt;<i>         self.serial = serial
</I>&gt;<i>         # Set a reference to self on the serial protocol
</I>&gt;<i>         self.serial.protocol.echobot = self
</I>&gt;<i>         MessageProtocol.__init__(self, *args, **kwargs)
</I>&gt;<i>
</I>&gt;<i>     def onMessage(self, msg):
</I>&gt;<i>         self.serial.transport.write('some message\n')
</I>&gt;<i>
</I>&gt;<i> echobot = EchoBotProtocol(serial)
</I>&gt;<i>
</I>&gt;<i> ...and an update to your pastebin that may be helpful for context: 
</I>&gt;<i> <A HREF="http://pastebin.com/2EJ22wXa">http://pastebin.com/2EJ22wXa</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025039.html">[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial
</A></li>
	<LI>Next message: <A HREF="025041.html">[Twisted-Python] Question : Combining wokel XMPP	and	twisted.internet.serial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25040">[ date ]</a>
              <a href="thread.html#25040">[ thread ]</a>
              <a href="subject.html#25040">[ subject ]</a>
              <a href="author.html#25040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
