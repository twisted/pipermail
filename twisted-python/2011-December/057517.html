<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Question%20%3A%20Combining%20wokel%20XMPP%20and%0A%09twisted.internet.serial&In-Reply-To=%3C4EF2CD9F.5040107%40indoakses-online.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057516.html">
   <LINK REL="Next"  HREF="057518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial</H1>
    <B>bino oetomo</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Question%20%3A%20Combining%20wokel%20XMPP%20and%0A%09twisted.internet.serial&In-Reply-To=%3C4EF2CD9F.5040107%40indoakses-online.com%3E"
       TITLE="[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial">bino at indoakses-online.com
       </A><BR>
    <I>Wed Dec 21 23:26:39 MST 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057516.html">[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial
</A></li>
        <LI>Next message (by thread): <A HREF="057518.html">[Twisted-Python] Question : Combining wokel XMPP	and	twisted.internet.serial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57517">[ date ]</a>
              <a href="thread.html#57517">[ thread ]</a>
              <a href="subject.html#57517">[ subject ]</a>
              <a href="author.html#57517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Lucas Taylor

Thankyou for your fast enlightment.

It's time for me to re-build my ejabberd turnkey linux

Sincerely
-bino-

On 12/22/2011 01:12 PM, Lucas Taylor wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is a relevant FAQ for this situation:
</I>&gt;<i> <A HREF="http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother">http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother</A> 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> More specifically:
</I>&gt;<i> 1. Create a Protocol class for your SerialPort that will communicate 
</I>&gt;<i> with the Arduino. Instances of this class will have access to the 
</I>&gt;<i> serial transport and can write out to the serial port. Incoming 
</I>&gt;<i> messages from the Arduino will be handled by the dataReceived method 
</I>&gt;<i> of the protocol.
</I>&gt;<i>
</I>&gt;<i> 2. Give your EchoBotProtocol a reference to the SerialPort somehow 
</I>&gt;<i> (e.g. via init), and set a reference to the EchoBotProtocol on the 
</I>&gt;<i> SerialPort.
</I>&gt;<i>
</I>&gt;<i> Here's a quick sketch:
</I>&gt;<i>
</I>&gt;<i> # Basic line receiver protocol
</I>&gt;<i> class ArduinoReceiver(LineReceiver):
</I>&gt;<i>     def lineReceived(self, line):
</I>&gt;<i>         print &quot;Line Received from Arduino&quot;
</I>&gt;<i>         self.echobot.send('some xmpp message for which I do not know 
</I>&gt;<i> the format')
</I>&gt;<i>
</I>&gt;<i> # Wire up the serial port and protocol...note there are more 
</I>&gt;<i> parameters to create the SerialPort (baudrate, etc.)
</I>&gt;<i> serial = SerialPort(ArduinoReceiver, '/dev/tty.usbserial', reactor)
</I>&gt;<i>
</I>&gt;<i> # EchoBot gets a reference to the serialport
</I>&gt;<i> class EchoBotProtocol(MessageProtocol):
</I>&gt;<i>       def __init__(self, serial, *args, **kwargs):
</I>&gt;<i>         self.serial = serial
</I>&gt;<i>         # Set a reference to self on the serial protocol
</I>&gt;<i>         self.serial.protocol.echobot = self
</I>&gt;<i>         MessageProtocol.__init__(self, *args, **kwargs)
</I>&gt;<i>
</I>&gt;<i>     def onMessage(self, msg):
</I>&gt;<i>         self.serial.transport.write('some message\n')
</I>&gt;<i>
</I>&gt;<i> echobot = EchoBotProtocol(serial)
</I>&gt;<i>
</I>&gt;<i> ...and an update to your pastebin that may be helpful for context: 
</I>&gt;<i> <A HREF="http://pastebin.com/2EJ22wXa">http://pastebin.com/2EJ22wXa</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057516.html">[Twisted-Python] Question : Combining wokel XMPP and	twisted.internet.serial
</A></li>
	<LI>Next message (by thread): <A HREF="057518.html">[Twisted-Python] Question : Combining wokel XMPP	and	twisted.internet.serial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57517">[ date ]</a>
              <a href="thread.html#57517">[ thread ]</a>
              <a href="subject.html#57517">[ subject ]</a>
              <a href="author.html#57517">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
