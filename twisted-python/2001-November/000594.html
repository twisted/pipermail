<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20CVS%3A%20Twisted/twisted/internet%20poll.py%2CNONE%2C1.1&In-Reply-To=3BFCFD38.7010904%40itamarst.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000592.html">
   <LINK REL="Next"  HREF="000610.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20%5BTwisted-commits%5D%20CVS%3A%20Twisted/twisted/internet%20poll.py%2CNONE%2C1.1&In-Reply-To=3BFCFD38.7010904%40itamarst.org"
       TITLE="[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Nov 22 22:39:50 EST 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000592.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1
</A></li>
        <LI>Next message: <A HREF="000610.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#594">[ date ]</a>
              <a href="thread.html#594">[ thread ]</a>
              <a href="subject.html#594">[ subject ]</a>
              <a href="author.html#594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Nov 22, 2001 at 03:27:20PM +0200, Itamar Shtull-Trauring wrote:
&gt;<i> Glyph Lefkowitz wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I'm confused.  In what way is &quot;adding/removing a reader/writer&quot; not
</I>&gt;<i> &gt; &quot;registering/unregistering an object&quot;?
</I>&gt;<i> 
</I>&gt;<i> Here's one issue - removeWriter is called every time the buffer is epmtied
</I>&gt;<i> out. In the lifetime of a connection, the transport keeps on adding and
</I>&gt;<i> removing, adding and removing itself as a writer because of this. In
</I>&gt;<i> select() this isn't an issue, but in poll() it is, since removing and adding
</I>&gt;<i> the writer is an expensive operation (in fact it adds a %33 overhead, in
</I>&gt;<i> tests under high loads).
</I>&gt;<i> 
</I>&gt;<i> I'll see what I can do to fix the poll()-based implementation, but meanwhile
</I>&gt;<i> the select event loop is much faster under high loads.
</I>
What I don't understand is that frequently, in an implementation where there is
no distinction between registering for reads and registering for writes, you
won't care if a socket is writable, only if it's readable.  What does the
higher-level implementation do then?  Just early-out of the callback if the
connection isn't &quot;really&quot; registerd for writes?

Even though I am not sure I understand the problem :), perhaps the right answer
to this question, since the common case is that all data can be written at
once, is that the write should happen immediately, only being added to the
select/poll loop if the write would block.  This would probably add a little
complexity to the code but save a bunch of performance on small-write heavy
protocols.

-- 
______      you are in a maze of twisted little applications, all
|<i>   |_\     remarkably consistent.
</I>|<i>     |          -- glyph lefkowitz, glyph @ twisted matrix . com
</I>|<i>_____|             <A HREF="http://www.twistedmatrix.com/">http://www.twistedmatrix.com/</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000592.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1
</A></li>
	<LI>Next message: <A HREF="000610.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/internet poll.py,NONE,1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#594">[ date ]</a>
              <a href="thread.html#594">[ thread ]</a>
              <a href="subject.html#594">[ subject ]</a>
              <a href="author.html#594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
