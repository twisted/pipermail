<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted scalability question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20scalability%20question&In-Reply-To=200309222358.55540.matti.jagula%40proekspert.ee">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005767.html">
   <LINK REL="Next"  HREF="005765.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted scalability question</H1>
    <B>Phillip J. Eby</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20scalability%20question&In-Reply-To=200309222358.55540.matti.jagula%40proekspert.ee"
       TITLE="[Twisted-Python] Twisted scalability question">pje at telecommunity.com
       </A><BR>
    <I>Tue Sep 23 11:58:14 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005767.html">[Twisted-Python] Twisted scalability question
</A></li>
        <LI>Next message: <A HREF="005765.html">[Twisted-Python] how to generate another html page?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5768">[ date ]</a>
              <a href="thread.html#5768">[ thread ]</a>
              <a href="subject.html#5768">[ subject ]</a>
              <a href="author.html#5768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 11:58 PM 9/22/03 +0300, Matti Jagula wrote:

&gt;<i>So, after the rather lengthy introduction, I'd like to know what am I doing
</I>&gt;<i>wrong? How can I show the better scalability of Twisted platform?
</I>
This is just a guess, but you probably aren't doing anything complicated 
enough to benefit.  :)

Seriously, if all you're doing is sending a single datagram in response to 
a simple DB query, framework overhead will continue to dominate your 
processing time.  Think about the two programs: both perform the query and 
send the datagram.  But the non-Twisted program *does nothing else*.  So, 
what you're seeing is that the per-invocation framework overhead for the 
Twisted version is about 3x what's required for just the db query and 
datagram send.  For something so simple, that actually sounds pretty 
reasonable!

What Twisted (and the &quot;reactor&quot; pattern in general) excels at is 
multiplexing *concurrent and ongoing* I/O operations.  However, your 
application has *no* ongoing I/O!  In general, Twisted scales well because 
it lets you do other things while you're waiting for I/O.  With TCP 
streams, you may have to wait before you write data, because the receiver 
may be slow.  Likewise, if you're receiving data, the sender may be 
slow.  While it's waiting, Twisted can let you do something else, like send 
or receive data from someone else that's ready at that moment, or do some 
actual computation.

However, in your setup, the *only* I/O that you ever wait for is the 
database!  You're receiving a single UDP packet (that you don't &quot;wait&quot; 
for), and sending a UDP packet (that you don't need to wait to 
send!).  Even if you made it take 10 times longer for the DB query to run, 
you'd *still* be able to send that data out as soon as you receive it.

In short, the problem you're solving is so darn simple that there's no way 
using Twisted can really improve on it, except in terms of issues like 
keeping your DB connection open.  There's simply nothing here for Twisted 
to multiplex!



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005767.html">[Twisted-Python] Twisted scalability question
</A></li>
	<LI>Next message: <A HREF="005765.html">[Twisted-Python] how to generate another html page?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5768">[ date ]</a>
              <a href="thread.html#5768">[ thread ]</a>
              <a href="subject.html#5768">[ subject ]</a>
              <a href="author.html#5768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
