<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adbapi transaction stuff (was Re: twisted.news adbapi backend)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%20transaction%20stuff%20%28was%20Re%3A%20twisted.news%20adbapi%20backend%29&In-Reply-To=%3C3F7440EE.3020209%40comcast.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="038311.html">
   <LINK REL="Next"  HREF="038313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adbapi transaction stuff (was Re: twisted.news adbapi backend)</H1>
    <B>Stephen C. Waterbury</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%20transaction%20stuff%20%28was%20Re%3A%20twisted.news%20adbapi%20backend%29&In-Reply-To=%3C3F7440EE.3020209%40comcast.net%3E"
       TITLE="[Twisted-Python] adbapi transaction stuff (was Re: twisted.news adbapi backend)">golux at comcast.net
       </A><BR>
    <I>Fri Sep 26 07:36:46 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="038311.html">[Twisted-Python] twisted.news adbapi backend
</A></li>
        <LI>Next message (by thread): <A HREF="038313.html">[Twisted-Python] adbapi transaction stuff (was Re:	twisted.news adbapi backend)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38312">[ date ]</a>
              <a href="thread.html#38312">[ thread ]</a>
              <a href="subject.html#38312">[ subject ]</a>
              <a href="author.html#38312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Jp,

Jp Calderone wrote:
&gt;<i> On Thu, Sep 25, 2003 at 10:55:01PM -0400, Stephen C. Waterbury wrote:
</I>
&gt;&gt;<i>... but PostgreSQL doesn't implement a COALESCE command.
</I>&gt;&gt;<i>
</I>&gt;<i>   I was surprised to read that PostgreSQL doesn't implement COALESCE, so I
</I>&gt;<i> checked the docs.  They claim it has been supported since 6.5.  Are you
</I>&gt;<i> running an expecially old version? :)
</I>
Hm ... you mean I should actually check to see if it works
before assuming it's not there?  Doh!  I was going by the
fact that the psql \h didn't have anything on it, but
you're absolutely right -- it's there and works as
advertised.  (I guess \h only documents the big, top-level
commands -- not functions/expressions.)

&gt;<i>   It's probably not great database code.  Deprecating it now and removing it
</I>&gt;<i> in a while sounds like a good idea.
</I>
I don't think it looks bad, really ... just seemed like
it had never been used.

Actually, the only reason I was looking at it was that it
was the only example I could find of code that used the adbapi
runInteraction() and transaction stuff, so it looked like
it might be useful to me at first, but I couldn't figure
out how to get a Transaction to do a &quot;SET CONSTRAINTS
ALL DEFERRED&quot;, which I need for my transactions.
(I did it in the transaction.execute(), but it didn't
seem to have any effect, so I wasn't sure if it really
applied ... I assume they are supposed to, for a
given runInteraction scope, right?)

Anyway, I went ahead and made a &quot;transaction builder&quot; that
puts together a whole SQL transaction statement that I can
give to runOperation, and that seems to work just fine --
which might actually be easier and faster anyway, since it
lets PostgreSQL do its own optimization things, etc.

Still, the adbapi transaction stuff is intriguing,
so let me know if I'm missing something there -- e.g.,
if you know how to use it to do an SQL transaction with
deferred constraints.  What I was hoping it did was
incrementally execute stuff and just commit when the
runInteraction call ended.

Cheers,
Steve.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="038311.html">[Twisted-Python] twisted.news adbapi backend
</A></li>
	<LI>Next message (by thread): <A HREF="038313.html">[Twisted-Python] adbapi transaction stuff (was Re:	twisted.news adbapi backend)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38312">[ date ]</a>
              <a href="thread.html#38312">[ thread ]</a>
              <a href="subject.html#38312">[ subject ]</a>
              <a href="author.html#38312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
