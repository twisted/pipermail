<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Newbie:XMLRPC Server as plugin?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Newbie%3AXMLRPC%20Server%20as%20plugin%3F&In-Reply-To=%3CBAY2-F558aszmeeUwMJ0000f7fe%40hotmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="038237.html">
   <LINK REL="Next"  HREF="038238.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Newbie:XMLRPC Server as plugin?</H1>
    <B>Daniel Fernï¿½ndez</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Newbie%3AXMLRPC%20Server%20as%20plugin%3F&In-Reply-To=%3CBAY2-F558aszmeeUwMJ0000f7fe%40hotmail.com%3E"
       TITLE="[Twisted-Python] Newbie:XMLRPC Server as plugin?">dnfesp at hotmail.com
       </A><BR>
    <I>Thu Sep 18 19:23:47 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="038237.html">[Twisted-Python] Newbie:XMLRPC Server as plugin?
</A></li>
        <LI>Next message (by thread): <A HREF="038238.html">[Twisted-Python] Easy GTK+Twisted+Networking Tutorial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38239">[ date ]</a>
              <a href="thread.html#38239">[ thread ]</a>
              <a href="subject.html#38239">[ subject ]</a>
              <a href="author.html#38239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry, I'm newbie too..

I got confused also the first time, then I realized that what I wanted was 
just a server not a protocol (in my case a SOAP one). But then I found the 
way things are explained is running your server as a regular python script, 
but that prevents you from taking advantage from the facilities given by 
running your service like e.g. twistd -f myserver.tap. So I realized that 
what I really need is an Application so I can have a tap file. Everything 
seems easy but then while following the examples (the last one in Creating 
XML-RPC Servers and Clients - modified to get a tap file) I get an 
unexpected error. I'm using Twisted 1.0.7 with SOAPpy 0.10.2 and python 2.3 
on windows 2000

the code is a bit modified, I removed the quoters logic and changed the last 
line from:
application.run(save=0)    ---------&gt;   application.save(&quot;start&quot;)
in order to get a tap file

&lt;code&gt;
from twisted.web import soap, xmlrpc, resource, server

class XMLRPCQuoter(xmlrpc.XMLRPC):
    def xmlrpc_quote(self):
        return 'Hola'

class SOAPQuoter(soap.SOAPPublisher):
    def soap_quote(self):
        return 'Hola'

def main():
    from twisted.internet.app import Application
    app = Application(&quot;xmlrpc&quot;)
    root = resource.Resource()
    root.putChild('RPC2', XMLRPCQuoter())
    root.putChild('SOAP', SOAPQuoter())
    app.listenTCP(7080, server.Site(root))
    return app

application = main()

if __name__ == '__main__':
    application.save(&quot;start&quot;)
&lt;/code&gt;

I can't find what is going wrong here, this is the log I'm getting when I 
try to run xmlrpc-start.tap

D:\Python23\Lib\site-packages&gt;twistd -f xmlrpc-start.tap
2003/09/18 20:08 Hora de verano de M&#218;xico [-] Log opened.
2003/09/18 20:08 Hora de verano de M&#218;xico [-] twistd 1.0.7 
(D:\PYTHON23\python.e
xe 2.3.0) starting up
2003/09/18 20:08 Hora de verano de M&#218;xico [-] reactor class: 
twisted.internet.de
fault.SelectReactor
2003/09/18 20:08 Hora de verano de M&#218;xico [-] Loading xmlrpc-start.tap...
2003/09/18 20:08 Hora de verano de M&#218;xico [-] Warning!  Loading from 
__main__: X
MLRPCQuoter
2003/09/18 20:08 Hora de verano de M&#218;xico [-] Traceback (most recent call 
last):

2003/09/18 20:08 Hora de verano de M&#218;xico [-]   File 
&quot;D:\PYTHON23\Lib\site-packa
ges\twisted\scripts\twistd.py&quot;, line 317, in runApp
2003/09/18 20:08 Hora de verano de M&#218;xico [-]     application = 
loadApplication(
config, passphrase)
2003/09/18 20:08 Hora de verano de M&#218;xico [-]   File 
&quot;D:\PYTHON23\Lib\site-packa
ges\twisted\scripts\twistd.py&quot;, line 210, in loadApplication
2003/09/18 20:08 Hora de verano de M&#218;xico [-]     return decode(filename, 
data)
2003/09/18 20:08 Hora de verano de M&#218;xico [-]   File 
&quot;D:\PYTHON23\Lib\site-packa
ges\twisted\scripts\twistd.py&quot;, line 188, in decode
2003/09/18 20:08 Hora de verano de M&#218;xico [-]     application = 
pickle.loads(dat
a)
2003/09/18 20:08 Hora de verano de M&#218;xico [-] AttributeError: ('Ephemeral 
instan
ce has no __call__ method', &lt;twisted.persisted.styles.Ephemeral instance at 
0x00
FEB580&gt;, ())
2003/09/18 20:08 Hora de verano de M&#218;xico [-] Failed to load application: 
('Ephe
meral instance has no __call__ method', &lt;twisted.persisted.styles.Ephemeral 
inst
ance at 0x00FEB580&gt;, ())
2003/09/18 20:08 Hora de verano de M&#218;xico [-] Traceback (most recent call 
last):

          File &quot;D:\PYTHON23\scripts\twistd.py&quot;, line 32, in ?
            run()
          File &quot;D:\PYTHON23\Lib\site-packages\twisted\scripts\twistd.py&quot;, 
line 4
48, in run
            runApp(config)
        --- &lt;exception caught here&gt; ---
          File &quot;D:\PYTHON23\Lib\site-packages\twisted\scripts\twistd.py&quot;, 
line 3
17, in runApp
            application = loadApplication(config, passphrase)
          File &quot;D:\PYTHON23\Lib\site-packages\twisted\scripts\twistd.py&quot;, 
line 2
10, in loadApplication
            return decode(filename, data)
          File &quot;D:\PYTHON23\Lib\site-packages\twisted\scripts\twistd.py&quot;, 
line 1
88, in decode
            application = pickle.loads(data)
        exceptions.AttributeError: ('Ephemeral instance has no __call__ 
method',
&lt;twisted.persisted.styles.Ephemeral instance at 0x00FEB580&gt;, ())


Failed to load application: ('Ephemeral instance has no __call__ method', 
&lt;twist
ed.persisted.styles.Ephemeral instance at 0x00FEB580&gt;, ())
2003/09/18 20:08 Hora de verano de M&#218;xico [-]


after that it just return to the prompt.



any help would be really appreciated.

thanks

_________________________________________________________________
Protect your PC - get McAfee.com VirusScan Online 
<A HREF="http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963">http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="038237.html">[Twisted-Python] Newbie:XMLRPC Server as plugin?
</A></li>
	<LI>Next message (by thread): <A HREF="038238.html">[Twisted-Python] Easy GTK+Twisted+Networking Tutorial
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38239">[ date ]</a>
              <a href="thread.html#38239">[ thread ]</a>
              <a href="subject.html#38239">[ subject ]</a>
              <a href="author.html#38239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
