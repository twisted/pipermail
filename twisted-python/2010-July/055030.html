<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Lore to Sphinx Conversion Progress Report 6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Lore%20to%20Sphinx%20Conversion%20Progress%20Report%206&In-Reply-To=%3C2DB04741-C874-4EA5-85AE-A3E9DE49E8DA%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055033.html">
   <LINK REL="Next"  HREF="055034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Lore to Sphinx Conversion Progress Report 6</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Lore%20to%20Sphinx%20Conversion%20Progress%20Report%206&In-Reply-To=%3C2DB04741-C874-4EA5-85AE-A3E9DE49E8DA%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Lore to Sphinx Conversion Progress Report 6">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Jul 10 20:21:59 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055033.html">[Twisted-Python] Lore to Sphinx Conversion Progress Report 6
</A></li>
        <LI>Next message (by thread): <A HREF="055034.html">[Twisted-Python] Lore to Sphinx Conversion Progress Report 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55030">[ date ]</a>
              <a href="thread.html#55030">[ thread ]</a>
              <a href="subject.html#55030">[ subject ]</a>
              <a href="author.html#55030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 10, 2010, at 4:17 PM, Kevin Horn wrote:

&gt;<i> On Sat, Jul 10, 2010 at 2:40 AM, Tim Allen &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">screwtape at froup.com</A>&gt; wrote:
</I>&gt;<i> On Sat, Jul 10, 2010 at 02:58:40AM -0000, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
</I>&gt;<i> &gt; At last I've got a buildbot set up generating the sphinx docs.  The
</I>&gt;<i> &gt; build results can be seen here:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   <A HREF="http://buildbot.twistedmatrix.com/builds/sphinx-html-15615/">http://buildbot.twistedmatrix.com/builds/sphinx-html-15615/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; (or with a different revision number for different revisions; the
</I>&gt;<i> &gt; containing directory is browseable).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It would be great if everyone could go look around and report any
</I>&gt;<i> &gt; problems you see.
</I>&gt;<i> 
</I>&gt;<i>    - In the Documentation Table Of Contents page, &quot;Historical
</I>&gt;<i>      Documents&quot; is listed between &quot;Twisted Core&quot; and &quot;Twisted Lore&quot;
</I>&gt;<i>      (presumably because of alphabetical order) but this seems
</I>&gt;<i>      a strange place for it. Could it be moved to the bottom, or an
</I>&gt;<i>      appendix, or something?
</I>&gt;<i> 
</I>&gt;<i> They're in alphabetical order.  The TOC page is generated dynamically by looking at the file structure of the docs and that's the order file-globbing lists them in.  We can fix this manually post-conversion.
</I>
It's worth noting that even in this peculiar order, the existence of this document is an upgrade.  It did not previously exist.  Or, rather, it did, but I think the analogous page in the current system is this: &lt;<A HREF="http://twistedmatrix.com/documents/10.1.0/">http://twistedmatrix.com/documents/10.1.0/</A>&gt;, which is certainly not as nice.

(If you were expecting to see something like &lt;<A HREF="http://twistedmatrix.com/documents/10.1.0/core/howto/index.html">http://twistedmatrix.com/documents/10.1.0/core/howto/index.html</A>&gt;, that's here: &lt;<A HREF="http://buildbot.twistedmatrix.com/builds/sphinx-html-15615/projects/core/howto/index.html">http://buildbot.twistedmatrix.com/builds/sphinx-html-15615/projects/core/howto/index.html</A>&gt;.)

&gt;<i>  
</I>&gt;<i>    - The bottom of every page has a &quot;Download in other formats: Plain
</I>&gt;<i>      Text&quot; link that doesn't work; presumably scooped up from the Trac
</I>&gt;<i>      templates. It should be removed (the Sphinx &quot;Show Source&quot; link is
</I>&gt;<i>      in the right-hand sidebar anyway).
</I>&gt;<i> 
</I>&gt;<i> Yeah, this is a flaw in the trac theme.  Looks like I forgot to remove it.
</I>
This seems like a simple fix - if you could do it quickly so we can see if fixes get propagated to the buildbot, that would be great (so we can get the build logistics out of the way for future, more complex issues).

&gt;<i>    - When the breadcrumb navigation at the top of the page gets too
</I>&gt;<i>      long[1], it wraps to a second line, which looks kind of odd
</I>&gt;<i>      because the nice gradient background image loops. Changing the CSS
</I>&gt;<i>      background colour to be the same as the bottom of the gradient
</I>&gt;<i>      image would probably help.
</I>
The breadcrumb names are also kinda weird, and very wordy.

&lt;<A HREF="http://buildbot.twistedmatrix.com/builds/sphinx-html-15615/projects/conch/howto/conch_client.html">http://buildbot.twistedmatrix.com/builds/sphinx-html-15615/projects/conch/howto/conch_client.html</A>&gt; says &quot;Twisted &gt;&gt; Twisted Documentation Table of Contents &gt;&gt; Twisted Conch Documentation &gt;&gt; Twisted Documentation&quot;.  This is altogether too many &quot;Twisted&quot;s ;-).

It should really be more like

'Twisted &gt;&gt; Documentation &gt;&gt; Conch &gt;&gt; &quot;Writing a client with Twisted.Conch&quot;'

Again: this is a new feature, so I'm not too concerned if we defer fixing this; go ahead if it's easy, but if it's hard, it's still better than the status quo, which is to say, not having any navigation at all.

&gt;<i>    - Chromium's error console reports:
</I>&gt;<i>        - A 404 error for &quot;/trac/chrome/common/js/jquery.js&quot;
</I>&gt;<i>        - A 404 error for &quot;/trac/chrome/common/js/trac.js&quot;
</I>&gt;<i>        - A 404 error for &quot;/trac/chrome/common/js/search.js&quot;
</I>&gt;<i>        - A 404 error for &quot;/builds/sphinx-html-15615/_static/dots.gif&quot;
</I>&gt;<i> 
</I>&gt;<i> Ah! This explains why the search quit working.  Not sure why these files are missing,  Probably something to do with the custom theme.
</I>
They're missing because this code is hosted on buildbot.twistedmatrix.com, not twistedmatrix.com.  It's probably most expedient to just make those links include the netloc for now.

&gt;<i>    - The Twisted.Conch tutorial[1] has a number of things surrounded
</I>&gt;<i>      with double-backticks like &quot;``Deferred``&quot; or
</I>&gt;<i>      &quot;``ClientTransport``&quot;. I'm not sure if that's deliberate or if
</I>&gt;<i>      it's markup gone horribly wrong.
</I>&gt;<i> 
</I>&gt;<i> This is probably due to missing spaces before/after the markup in the rst source.  One of those things that will need to be fixed manually.  I spent a lot of time trying to fix this in lore2sphinx and when you fix it in one place, it breaks somewhere else.  Right now the automated conversion is about as good as it is likely to get with a sane amount of effort.
</I>
Pardon my ignorance, but why not just always add the spaces when generating this type of markup?  It doesn't seem like it should be that hard; docutils claims to be able to treat ReST as structured, right?  Isn't there an API to construct some objects that will do the quoting for you?

&gt;<i>    - The Conch code examples (as linked from the code examples page[2])
</I>&gt;<i>      are sent with a Python mime-type (which Firefox tries to download)
</I>&gt;<i>      while the .tac files are sent as text/html; this may be an
</I>&gt;<i>      artifact of the docs being hosted on the buildbot machine rather
</I>&gt;<i>      than Sphinx, but I think it would be nice if by default they were
</I>&gt;<i>      displayed in the browser, syntax-highlighted, with an option to
</I>&gt;<i>      download the original files (much like Trac does).
</I>&gt;<i> 
</I>&gt;<i> This is a web server configuration thing.  The files are actually .py and .tac files (and probably need to remain so, if we ever want to get automated example code tests going).
</I>
&gt;<i> Maybe we can do some web server magic to get them nicely displayed in the browser, but I see that as a secondary issue for the moment.  Anyone should feel free to give a shout if they disagree, though.
</I>
I agree completely.

We should fix it so the .tac files are text/x-python as well, so your browser can DTRT with them; when I click on an example, I often want to download it.

Perhaps the lore markup should be adjusted to format them inline as well, though?

&gt;<i>    - The Twisted Split FAQ[3] has a heading &quot;Why are arr the packages
</I>&gt;<i>      still named twisted.*subproject*?&quot;, but it's not obvious whether
</I>&gt;<i>      the author was trying to use italics (in which case it's
</I>&gt;<i>      a lore2sphinx bug) or globbing (in which case it's not).
</I>&gt;<i> 
</I>&gt;<i> Pretty sure it was supposed to be italics.  Spacing again.  There are ways to make this display properly, but it'll need to be done manually.
</I>&gt;<i> 
</I>&gt;<i> Also, this is pretty outdated stuff...we might consider just removing some of this.  Or perhaps moving some of it into a more obvious place.
</I>
Let's try to have those discussions in separate threads so they can be resolved individually.  I don't have an opinion at the moment and would not like to develop one in the middle of a monster thread about the whole conversion :).
 
&gt;<i>    - The Twisted Coding Standard[6] mentions &quot;If you modify, or write
</I>&gt;<i>      a new, HOWTO, please read the Lore documentation to learn how to
</I>&gt;<i>      format the docs&quot;; if there's not already a follow-up ticket for
</I>&gt;<i>      the lore-sphinx conversion titled &quot;Remove references to Lore from
</I>&gt;<i>      Twisted's non-Lore-related documentation&quot;, there should be, and
</I>&gt;<i>      this should be in it.
</I>&gt;<i> 
</I>&gt;<i> There isn't, but there will be.  See the transition plan here: <A HREF="http://twistedsphinx.funsize.net/transition_plan.html">http://twistedsphinx.funsize.net/transition_plan.html</A>
</I>
FWIW, you should really start linking to the ticket &lt;<A HREF="http://twistedmatrix.com/trac/ticket/4500">http://twistedmatrix.com/trac/ticket/4500</A>&gt;, rather than the &quot;transition plan&quot; page, so that folks can comment, link to other tickets, bookmark it for review when it comes up, etc.

&gt;<i> [...] All bad spacing issues. [...] Almost all of the remaining problems will need to be fixed manually.
</I>
It really seems like there's a lot of these.  I'm grateful to Tim for such a thorough job finding them, but I'm sure he missed some - maybe it would be worthwhile to get someone else to help make the tool be correct more often?

&gt;<i> Thanks for the fantastic (and nicely detailed) feedback, Tim!
</I>
+1.

(I had some thoughts about manual pages but those deserved their own message, so I'll send them separately.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20100710/e0b6f17a/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055033.html">[Twisted-Python] Lore to Sphinx Conversion Progress Report 6
</A></li>
	<LI>Next message (by thread): <A HREF="055034.html">[Twisted-Python] Lore to Sphinx Conversion Progress Report 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55030">[ date ]</a>
              <a href="thread.html#55030">[ thread ]</a>
              <a href="subject.html#55030">[ subject ]</a>
              <a href="author.html#55030">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
