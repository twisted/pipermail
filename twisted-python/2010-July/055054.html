<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Knowing whether spawnProcess did anything	useful
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Knowing%20whether%20spawnProcess%20did%20anything%0A%09useful&In-Reply-To=%3C20100714023434.2312.1644270933.divmod.xquotient.21%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="055051.html">
   <LINK REL="Next"  HREF="055056.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Knowing whether spawnProcess did anything	useful</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Knowing%20whether%20spawnProcess%20did%20anything%0A%09useful&In-Reply-To=%3C20100714023434.2312.1644270933.divmod.xquotient.21%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Knowing whether spawnProcess did anything	useful">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Jul 13 20:34:34 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="055051.html">[Twisted-Python] Knowing whether spawnProcess did anything useful
</A></li>
        <LI>Next message (by thread): <A HREF="055056.html">[Twisted-Python] Knowing whether spawnProcess did anything	useful
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55054">[ date ]</a>
              <a href="thread.html#55054">[ thread ]</a>
              <a href="subject.html#55054">[ subject ]</a>
              <a href="author.html#55054">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13 Jul, 09:18 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dominic at baudvine.net</A> wrote:
&gt;<i>Hiya,
</I>&gt;<i>
</I>&gt;<i>I'm looking for a way to know whether spawnProcess() did anything
</I>&gt;<i>useful.  That is, whether anything has actually been executed. In my
</I>&gt;<i>specific case the executables are all persistent (pluggable modules,
</I>&gt;<i>they stick around for a while) so based on the following snippet I
</I>&gt;<i>thought I could check whether the resulting ProcessTransport has a pid:
</I>&gt;<i>
</I>&gt;<i>&quot;From before IProcessProtocol.makeConnection is called to before
</I>&gt;<i>IProcessProtocol.processEnded is called, pid is an int giving the
</I>&gt;<i>platform process ID of this process. pid is None at all other 
</I>&gt;<i>times.&quot;[1]
</I>&gt;<i>
</I>&gt;<i>However, a quick tour on the REPL shows otherwise (than I expected, not
</I>&gt;<i>necessarily otherwise than what the docs say):
</I>&gt;&gt;&gt;&gt;<i>from twisted.internet import reactor
</I>&gt;&gt;&gt;&gt;<i>from twisted.internet import protocol
</I>&gt;&gt;&gt;&gt;<i>p = protocol.ProcessProtocol()
</I>&gt;&gt;&gt;&gt;<i>f = reactor.spawnProcess(p, &quot;fail&quot;, [&quot;fail&quot;])
</I>&gt;&gt;&gt;&gt;<i>f
</I>&gt;<i>&lt;Process pid=21053 status=-1&gt;
</I>&gt;&gt;&gt;&gt;<i>f.pid
</I>&gt;<i>21053
</I>&gt;<i>
</I>&gt;<i>I thought status might be of some relevance, but it didn't really 
</I>&gt;<i>change
</I>&gt;<i>when I gave it a shot with actual executables.
</I>&gt;<i>
</I>&gt;<i>Something tells me I'm being massively stupid here, but I'm genuinely
</I>&gt;<i>stuck.  Can't really believe that there's no way to do this, though.
</I>
Without the reactor running, neither the pid nor the status will ever be 
updated.  The event loop is needed in order to respond to the event of 
the child process exiting.

Also, the usual way to interact with the IProcessTransport provider (the 
Process instance) is via the ProcessProtocol instance.  Subclass it, 
override connectionMade or processExited or one of the other methods and 
wait for the reactor to call them.  Oh, and start up the reactor, too. 
:<i>)
</I>
Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="055051.html">[Twisted-Python] Knowing whether spawnProcess did anything useful
</A></li>
	<LI>Next message (by thread): <A HREF="055056.html">[Twisted-Python] Knowing whether spawnProcess did anything	useful
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#55054">[ date ]</a>
              <a href="thread.html#55054">[ thread ]</a>
              <a href="subject.html#55054">[ subject ]</a>
              <a href="author.html#55054">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
