<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deferred instance has no attribute	'__getitem__' ??????
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferred%20instance%20has%20no%20attribute%0A%09%27__getitem__%27%20%3F%3F%3F%3F%3F%3F&In-Reply-To=AF751E95-2C1E-4789-B296-BC404DAA5F21%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022580.html">
   <LINK REL="Next"  HREF="022581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deferred instance has no attribute	'__getitem__' ??????</H1>
    <B>Ken MacDonald</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Deferred%20instance%20has%20no%20attribute%0A%09%27__getitem__%27%20%3F%3F%3F%3F%3F%3F&In-Reply-To=AF751E95-2C1E-4789-B296-BC404DAA5F21%40twistedmatrix.com"
       TITLE="[Twisted-Python] Deferred instance has no attribute	'__getitem__' ??????">drken567 at gmail.com
       </A><BR>
    <I>Fri Jul 16 09:32:08 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="022580.html">[Twisted-Python] Deferred instance has no attribute	'__getitem__' ??????
</A></li>
        <LI>Next message: <A HREF="022581.html">[Twisted-Python] WebSocket Support #4173
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22582">[ date ]</a>
              <a href="thread.html#22582">[ thread ]</a>
              <a href="subject.html#22582">[ subject ]</a>
              <a href="author.html#22582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the assist, we ended up using something quite  similar to this.
I'm refactoring a portion of an app that was originally all in python, but
now some functions were required to use the DB stored procedures instead for
compatibility, and they weren't designed to be used in Twisted-fashion! On
to the next interesting Twisted problem.....
Ken

@inlineCallbacks must decorate only generator functions.
&gt;<i>
</I>&gt;<i> Since 'yield' doesn't appear anywhere in the body of round_val (or, for
</I>&gt;<i> that matter, round_per) this code will break in other ways.  Allen Short's
</I>&gt;<i> suggestion will fix your code because it added a 'yield', but you need to be
</I>&gt;<i> aware of this issue in case there are other such functions in the future
</I>&gt;<i> that don't actually handle any Deferreds.
</I>&gt;<i>
</I>&gt;<i> Also, inlineCallbacks adds some overhead, and really should only be used
</I>&gt;<i> when the resulting code is easier to read.  Personally, I think a simpler
</I>&gt;<i> definition of round_val would be simply
</I>&gt;<i>
</I>&gt;<i>    def round_val(id, value, rule):
</I>&gt;<i>        &quot;&quot;&quot;
</I>&gt;<i>        Return first element of round_value_and_percent
</I>&gt;<i>        &quot;&quot;&quot;
</I>&gt;<i>         return round_value_and_percent(id, value, 0, rule).addCallback(
</I>&gt;<i>            lambda valueAndPercent: valueAndPercent[0]
</I>&gt;<i>        )
</I>&gt;<i>
</I>&gt;<i> no @inlineCallbacks required.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20100716/82d50c8b/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20100716/82d50c8b/attachment-0001.htm</A> 
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022580.html">[Twisted-Python] Deferred instance has no attribute	'__getitem__' ??????
</A></li>
	<LI>Next message: <A HREF="022581.html">[Twisted-Python] WebSocket Support #4173
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22582">[ date ]</a>
              <a href="thread.html#22582">[ thread ]</a>
              <a href="subject.html#22582">[ subject ]</a>
              <a href="author.html#22582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
