From exarkun at divmod.com  Sat Apr  1 23:00:01 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 1 Apr 2006 23:00:01 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] r16513 - fix buggy test,
 set binary mode on stdin/stdout
In-Reply-To: <E1FPZZD-00085P-00@wolfwood>
Message-ID: <20060402040001.22481.519130017.divmod.quotient.8967@ohm>

On Fri, 31 Mar 2006 23:26:35 -0700, Glyph Lefkowitz <glyph at wolfwood.twistedmatrix.com> wrote:
>Author: glyph
>Date: Fri Mar 31 23:26:32 2006
>New Revision: 16513
>
>Modified:
>   branches/transtdio-1553/twisted/internet/_pollingfile.py
>   branches/transtdio-1553/twisted/internet/_win32stdio.py
>   branches/transtdio-1553/twisted/test/stdio_test_producer.py
>   branches/transtdio-1553/twisted/test/test_stdio.py
>Log:
>fix buggy test, set binary mode on stdin/stdout
>
> [snip]
>
>Modified: branches/transtdio-1553/twisted/test/stdio_test_producer.py
>==============================================================================
>--- branches/transtdio-1553/twisted/test/stdio_test_producer.py	(original)
>+++ branches/transtdio-1553/twisted/test/stdio_test_producer.py	Fri Mar 31 23:26:32 2006
>@@ -13,22 +13,28 @@
> from twisted.internet import stdio, protocol, reactor
> from twisted.python import log
>
>-
> class ProducerChild(protocol.Protocol):
>     _paused = False
>+    buf = ''
>
>     def connectionLost(self, reason):
>-        reactor.stop()
>+        log.msg("*****OVER*****")
>+        reactor.callLater(1, reactor.stop)
>+        # reactor.stop()

This looks pretty sketchy.

>
>
>     def dataReceived(self, bytes):
>+        self.buf += bytes
>         if self._paused:
>-            log.startLogging(sys.stdout)
>+            log.startLogging(sys.stderr)
>             log.msg("dataReceived while transport paused!")
>             self.transport.loseConnection()
>         else:
>             self.transport.write(bytes)
>-            self.pause()
>+            if self.buf.endswith('\n0\n'):
>+                self.transport.loseConnection()
>+            else:
>+                self.pause()

So does this.  Why isn't it cool for the parent process to drop the connection?

Jean-Paul



From exarkun at twistedmatrix.com  Sun Apr  2 01:05:03 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 02 Apr 2006 06:05:03 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1143957903.9.1361092419@twistedmatrix.com

Bug summary
______________________
Summary for 2006-03-26 through 2006-04-02
Bugs opened: 12    Bugs closed: 9  Total open bugs: 574 (+3)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       -1  |Highest:  +2          |Conch:  -1             
|Enhancement:  +4  |High:     -2          |Core:   +2             
                   |Normal:   +1          |Trial:  +0             
                   |Low:      +2          |Web2:   +1             
                                          |Words:  +1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1611] Documentation and examples still use deprecated components APIs (e.g. __implements__) (opened by itamarst)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1611

[#1612] Words (jabber code) still uses deprecated components API (opened by itamarst)
    defect          words      http://twistedmatrix.com/trac/ticket/1612

[#1615] stdio tests should be run for all reactors (opened by exarkun)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1615

[#1617] Move 'notes to self' documentation aimed at developers *only* into a separate workspace. (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1617

                    ===== High =====
[#1606] trial fails to import from the test's directory when used through c:\python23\scripts\trial (opened by ml.flex) (CLOSED, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/1606

                    ===== Normal =====
[#1607] improved color-support detection (opened by orip) (CLOSED, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1607

[#1608] Add low-level support for WebDAV access controls (opened by wsanchez)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1608

[#1613] utility test case that starts up listening server and stops it on teardown (opened by itamarst)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1613

[#1614] trial fails to set reactor.running flag (opened by landonf)
    defect          trial      http://twistedmatrix.com/trac/ticket/1614

[#1616] interface to query reactor name (opened by exarkun)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1616

                    ===== Low =====
[#1609] Docs on return type for IReactorUNIX, IReactorArbitrary missing (opened by msmith)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1609

[#1610] assertions in pyunit test cases don't show tracebacks (opened by radix)
    defect          trial      http://twistedmatrix.com/trac/ticket/1610



Closed Bugs
______________________
                    ===== Highest =====
[#1545] A bunch of Twisted docstrings contain invalid epytext markup (opened by exarkun, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1545

[#1573] trial does not wait for the reactor to stop completely between tests/test methods/test suites/test runs/I don't know what (opened by exarkun, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1573

                    ===== High =====
[#836 ] Test suite import error on win32 (twisted.conch.test.test_cftp) (opened by spiv, closed by TimothyFitz, fixed)
    defect          conch      http://twistedmatrix.com/trac/ticket/836

[#1594] [PATCH] Errors from Trial TestCases don't report as failures when run by pyunit (opened by spiv, closed by spiv, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1594

[#1606] trial fails to import from the test's directory when used through c:\python23\scripts\trial (opened by ml.flex, closed by jml, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/1606

                    ===== Normal =====
[#1322] multicast support in iocpreactor (opened by ghazel, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1322

[#910 ] [PATCH] weak tasks (opened by zooko, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/910

[#1607] improved color-support detection (opened by orip, closed by jml, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1607

[#1553] _win32stdio.py does not implement ITransport (opened by amberite, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1553





From nelson1977 at gmail.com  Sun Apr  2 06:00:46 2006
From: nelson1977 at gmail.com (nelson -)
Date: Sun, 2 Apr 2006 12:00:46 +0200
Subject: [Twisted-Python] twisted & wxpython & COM server
Message-ID: <f44750160604020300r4a16b1f6s1edd7e7ad1fb78c3@mail.gmail.com>

hi all!
  i'm trying to develop a COm server application with wxpython, but i have
many thread problems (the GUI can't be in the same thread of the COM server
and also if i do it I have serious cleanup problems...). Can twisted help me
in maintain my GUI in a separate thread and talking to the COM server
instance?

thanks a lot,
  nelson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060402/4b215b23/attachment.htm 

From apocalypznow at gmail.com  Sun Apr  2 14:21:22 2006
From: apocalypznow at gmail.com (apocalypznow)
Date: Sun, 02 Apr 2006 11:21:22 -0700
Subject: [Twisted-Python] Cleanly shutting down Service
Message-ID: <e0p4mr$cg1$1@sea.gmane.org>

How do I cleanly shut down a Service?  I want the shut down to make the 
stopService() method get called.




From reed at intersiege.com  Sun Apr  2 21:30:06 2006
From: reed at intersiege.com (Reed L. O'Brien)
Date: Sun, 02 Apr 2006 21:30:06 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <e0p4mr$cg1$1@sea.gmane.org>
References: <e0p4mr$cg1$1@sea.gmane.org>
Message-ID: <44307A9E.2060201@intersiege.com>

apocalypznow wrote:

> How do I cleanly shut down a Service?  I want the shut down to make
> the stopService() method get called.
>
import signal, sys

signal.signal(signal.SIGINT, handler)

def handler(signum, frame):
    print "Shutting down the Foo service" # or use a logging facility
    stopService()  
    sys.exit(2)

Will catch ^C and call handler for more read the signal docs:
http://www.python.org/doc/current/lib/module-signal.html

HTH
~reed




From andrew-twisted at puzzling.org  Sun Apr  2 22:27:12 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 3 Apr 2006 12:27:12 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r16524 - Further enhance
	win32 portability of subprocess support.
In-Reply-To: <E1FPpV4-0008UO-00@wolfwood>
References: <E1FPpV4-0008UO-00@wolfwood>
Message-ID: <20060403022712.GC25486@steerpike.home.puzzling.org>

On Sat, Apr 01, 2006 at 04:27:22PM -0700, Glyph Lefkowitz wrote:
> Author: glyph
> Date: Sat Apr  1 16:27:20 2006
> New Revision: 16524
[...]
> +        for stdfd in range(0, 1, 2):
> +            msvcrt.setmode(stdfd, os.O_BINARY)
> +

"range(0, 1, 2)" is a particularly obscure way to say "[0]".  I'm guessing
there's no test coverage for reading binary data from stdout or stderr of
subprocesses?

-Andrew.




From exarkun at divmod.com  Sun Apr  2 22:33:59 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 2 Apr 2006 22:33:59 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <44307A9E.2060201@intersiege.com>
Message-ID: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>

On Sun, 02 Apr 2006 21:30:06 -0400, "Reed L. O'Brien" <reed at intersiege.com> wrote:
>apocalypznow wrote:
>
>> How do I cleanly shut down a Service?  I want the shut down to make
>> the stopService() method get called.
>>
>import signal, sys
>
>signal.signal(signal.SIGINT, handler)
>
>def handler(signum, frame):
>    print "Shutting down the Foo service" # or use a logging facility
>    stopService()
>    sys.exit(2)
>
>Will catch ^C and call handler for more read the signal docs:
>http://www.python.org/doc/current/lib/module-signal.html
>

Alas, this won't do anything resembling correct in a Twisted application.

I tried to come up with an answer to this question earlier today, but failed: perhaps the OP can ask a more specific or detailed one which will be easier to answer correctly.

Jean-Paul



From teratorn at twistedmatrix.com  Sun Apr  2 22:51:42 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Mon, 03 Apr 2006 12:51:42 +1000
Subject: [Twisted-Python] twisted & wxpython & COM server
In-Reply-To: <f44750160604020300r4a16b1f6s1edd7e7ad1fb78c3@mail.gmail.com>
References: <f44750160604020300r4a16b1f6s1edd7e7ad1fb78c3@mail.gmail.com>
Message-ID: <op.s7evkgfgy3d107@localhost.localdomain>

On Sun, 02 Apr 2006 20:00:46 +1000, nelson - <nelson1977 at gmail.com> wrote:

> hi all!
>   i'm trying to develop a COm server application with wxpython, but i  
> have
> many thread problems (the GUI can't be in the same thread of the COM  
> server
> and also if i do it I have serious cleanup problems...). Can twisted  
> help me
> in maintain my GUI in a separate thread and talking to the COM server
> instance?
>
> thanks a lot,
>   nelson

I don't know where to begin. Could you pretend that nobody on this list  
knows what COM is and ask your question again?

What are you using Twisted for now?
What else are you hoping Twisted can help you with?
What exactly are the limitation you are dealing with?

-Eric




From reed at intersiege.com  Sun Apr  2 23:01:07 2006
From: reed at intersiege.com (Reed L. O'Brien)
Date: Sun, 02 Apr 2006 23:01:07 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
References: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
Message-ID: <44308FF3.6030803@intersiege.com>

Jean-Paul Calderone wrote:

> On Sun, 02 Apr 2006 21:30:06 -0400, "Reed L. O'Brien"
> <reed at intersiege.com> wrote:
>
>> apocalypznow wrote:
>>
>>> How do I cleanly shut down a Service?  I want the shut down to make
>>> the stopService() method get called.
>>>
>> import signal, sys
>>
>> signal.signal(signal.SIGINT, handler)
>>
>> def handler(signum, frame):
>>    print "Shutting down the Foo service" # or use a logging facility
>>    stopService()
>>    sys.exit(2)
>>
>> Will catch ^C and call handler for more read the signal docs:
>> http://www.python.org/doc/current/lib/module-signal.html
>>
>
> Alas, this won't do anything resembling correct in a Twisted application.
>
> I tried to come up with an answer to this question earlier today, but
> failed: perhaps the OP can ask a more specific or detailed one which
> will be easier to answer correctly.
>
> Jean-Paul


reactor.addSystemEventTrigger('before', 'shutdown', func())

def func():
	doStuff...

closer?

~reed




From glyph at divmod.com  Sun Apr  2 23:33:56 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 2 Apr 2006 23:33:56 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16524 - Further enhance
	win32 portability of subprocess support.
In-Reply-To: <20060403022712.GC25486@steerpike.home.puzzling.org>
Message-ID: <20060403033356.22481.1739247927.divmod.quotient.9322@ohm>



On Mon, 3 Apr 2006 12:27:12 +1000, Andrew Bennetts <andrew-twisted at puzzling.org> wrote:
>On Sat, Apr 01, 2006 at 04:27:22PM -0700, Glyph Lefkowitz wrote:
>> Author: glyph
>> Date: Sat Apr  1 16:27:20 2006
>> New Revision: 16524
>[...]
>> +        for stdfd in range(0, 1, 2):
>> +            msvcrt.setmode(stdfd, os.O_BINARY)
>> +
>
>"range(0, 1, 2)" is a particularly obscure way to say "[0]".  I'm guessing
>there's no test coverage for reading binary data from stdout or stderr of
>subprocesses?

Hmm.  As a matter of fact, the test which covers stdin should also cover stdout.  I'm not sure why that wasn't failing.  I meant [0, 1, 2] or range(0, 3).

I would fix it, but this weekend is pretty much over, and my next 3 weekends are spoken for.  Does somebody want to take over maintainership of this area?  I only started working on it because I wanted to be able to work on Divmod code at the same time as playing video games in Windows.




From teratorn at twistedmatrix.com  Mon Apr  3 02:02:18 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Mon, 03 Apr 2006 16:02:18 +1000
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <44308FF3.6030803@intersiege.com>
References: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
	<44308FF3.6030803@intersiege.com>
Message-ID: <op.s7e4d4mky3d107@localhost.localdomain>

On Mon, 03 Apr 2006 13:01:07 +1000, Reed L. O'Brien <reed at intersiege.com>  
wrote:

> Jean-Paul Calderone wrote:
>
>> On Sun, 02 Apr 2006 21:30:06 -0400, "Reed L. O'Brien"
>> <reed at intersiege.com> wrote:
>>
>>> apocalypznow wrote:
>>>
>>>> How do I cleanly shut down a Service?  I want the shut down to make
>>>> the stopService() method get called.
>>>>
>>> import signal, sys
>>>
>>> signal.signal(signal.SIGINT, handler)
>>>
>>> def handler(signum, frame):
>>>    print "Shutting down the Foo service" # or use a logging facility
>>>    stopService()
>>>    sys.exit(2)
>>>
>>> Will catch ^C and call handler for more read the signal docs:
>>> http://www.python.org/doc/current/lib/module-signal.html
>>>
>>
>> Alas, this won't do anything resembling correct in a Twisted  
>> application.
>>
>> I tried to come up with an answer to this question earlier today, but
>> failed: perhaps the OP can ask a more specific or detailed one which
>> will be easier to answer correctly.
>>
>> Jean-Paul
>
>
> reactor.addSystemEventTrigger('before', 'shutdown', func())
>
> def func():
> 	doStuff...
>
> closer?
>
> ~reed

Not really, No. I think you should have waited for the OP to ask a better  
question as JP suggested. The quality of questions on this mailing list  
has been very poor lately. Anyway, onwards...

To shut down a Service cleanly, you call stopService() on it.

If you want your service to have its stopService method called when  
Twisted shuts down, then
that service should be registered correctly. If you aren't using twistd  
then see
twisted.application.app.startApplication

>>> An example test.tac file:

 from twisted.application import service

class MyService(service.Service):
     def stopService(self):
         print "Stopping my service!"
         service.Service.stopService(self)

application = service.Application("My Twisted App")
myService = MyService()
myService.setName("My Service")
myService.setServiceParent(application)

 from twisted.internet import reactor
reactor.callLater(2, reactor.stop)

<<< End test.tac

If you run the .tac file with "twistd -noy test.tac", after 2 seconds,
you will see "Stopping my service!" printed.

-Eric



From itamar at itamarst.org  Mon Apr  3 11:34:16 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 03 Apr 2006 11:34:16 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <44308FF3.6030803@intersiege.com>
References: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
	<44308FF3.6030803@intersiege.com>
Message-ID: <1144078456.9211.2.camel@localhost.localdomain>

On Sun, 2006-04-02 at 23:01 -0400, Reed L. O'Brien wrote:

> reactor.addSystemEventTrigger('before', 'shutdown', func())
> 
> def func():
> 	doStuff...
> 
> closer?

# notice lack of parentheses after func:
reactor.addSystemEventTrigger('before', 'shutdown', func) 





From itamar at itamarst.org  Mon Apr  3 11:36:15 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 03 Apr 2006 11:36:15 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <e0p4mr$cg1$1@sea.gmane.org>
References: <e0p4mr$cg1$1@sea.gmane.org>
Message-ID: <1144078575.9211.5.camel@localhost.localdomain>

On Sun, 2006-04-02 at 11:21 -0700, apocalypznow wrote:
> How do I cleanly shut down a Service?  I want the shut down to make the 
> stopService() method get called.

Either use twistd with a .tac, as someone else suggested, or:

reactor.addSystemEventTrigger('before', 'shutdown', myservice.stopService)

If stopService returns a Deferred this will delay shutdown until
Deferred returned from stopService is triggered.




From zooko at zooko.com  Mon Apr  3 11:53:51 2006
From: zooko at zooko.com (zooko at zooko.com)
Date: Mon, 03 Apr 2006 12:53:51 -0300
Subject: Branch based development (Was Re: [Twisted-Python] Re:
	[Twisted-commits] r16287 - Revert r16241; tests are passing.)
In-Reply-To: <20060331044256.22481.299464125.divmod.quotient.8157@ohm>
References: <20060331044256.22481.299464125.divmod.quotient.8157@ohm>
Message-ID: <20060403155351.CD9CC1E6C7@yumyum.zooko.com>


 Glyph wrote:
>
> I think that "branch-based development" is a crummy name for this process, 
> since it isn't very exciting and it's really about tickets, reviews, and 
> changesets, not branches -- branches are an implementation detail to allow 
> developers to continue to use the VCS as a file server.

We're considering using a process inspired by yours at Allmydata, but we don't
call it "branch-based", since the word "branch" means something else in our
workflow.  Also we use darcs instead of SVN, and there is no particular sense
in which "branches" are important to our version of this process.

>   I think I am going
> to change the name to "ultimate quality development system" and then we can
> abbreviate it "UQDS".

Okay.

Regards,

Zooko



From ml.flex at gmail.com  Mon Apr  3 13:15:05 2006
From: ml.flex at gmail.com (Micky Latowicki)
Date: Mon, 3 Apr 2006 19:15:05 +0200
Subject: [Twisted-Python] logging errors in pb.py
Message-ID: <d27002d90604031015m231e291fi7e38095a96e217f1@mail.gmail.com>

pb logs failures with an error of type pb.Error if these failures are
returned by remotely-invoked methods; however, if these methods raise the
same Error, it is not logged.

Is this difference intentional or accidental?

Shouldn't this difference be removed?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060403/c08b0b15/attachment.htm 

From ml.flex at gmail.com  Mon Apr  3 14:05:45 2006
From: ml.flex at gmail.com (Micky Latowicki)
Date: Mon, 3 Apr 2006 20:05:45 +0200
Subject: [Twisted-Python] copyable errors
Message-ID: <d27002d90604031105x591bb47fw6e5d3a82b148e518@mail.gmail.com>

in pb.Broker._sendError, if fail is a Failure with a jellyable value, then
the value, rather than the failure, is serialized.

When this value reaches the other side, it is wrapped in a failure. But all
the other information in the remote Failure is lost.

This seems inconsistent to me, and indeed has caused me a bug. If a method
returns a CopyableFailure that has a Jellyable value, then there's no
apparent reason for the information in the failure not to be sent - it
doesn't make sense to me that whether or not the value is Jellyable
determines whether or not the Failure's fields get sent.

I can work around this, but I thought maybe this should be changed in pb.

comments?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060403/2b1094a4/attachment.htm 

From Wolfgang.W.Eichler at gmx.de  Tue Apr  4 11:20:58 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Tue, 4 Apr 2006 17:20:58 +0200
Subject: [Twisted-Python] UDP answer from different IP
Message-ID: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>

Hello,
I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
Thanks






From Wolfgang.W.Eichler at gmx.de  Tue Apr  4 11:23:17 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Tue, 4 Apr 2006 17:23:17 +0200
Subject: [Twisted-Python] Fw: UDP answer from different IP
Message-ID: <E1FQnNM-0005yh-00@pyramid.twistedmatrix.com>

I missed to mention: it concerns SNMP protocol.
>Hello,
>I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
>Thanks
>





From auspex at lincsat.com  Tue Apr  4 14:53:32 2006
From: auspex at lincsat.com (auspex at lincsat.com)
Date: Tue, 04 Apr 2006 15:53:32 -0300
Subject: [Twisted-Python] HOWTO use twisted-mail's IMAP4 server?
Message-ID: <1144176812.4432c0acc5837@webmail.lincsat.com>

I'm trying to figure out how the IMAP4 server does both TLS and SASL, but it
seems to me to be missing some significant parts.

What do I have to do to make this server run?  There's no apparent code to 
_start_ either IMAP or POP servers in this package, though there's a number of 
different .tacs for the SMTP server.
-- 
derek



From daedalus at eigenmagic.com  Tue Apr  4 17:34:59 2006
From: daedalus at eigenmagic.com (Justin Warren)
Date: Wed, 05 Apr 2006 07:34:59 +1000
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
References: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
Message-ID: <1144186499.21021.16.camel@localhost.localdomain>

On Tue, 2006-04-04 at 17:20 +0200, Wolfgang Eichler wrote:
> Hello,
> I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
> Thanks

It would appear that your server has two active interfaces with
different IPs on the same network. You wouldn't happen to be running
Solaris and IPMP by any chance, would you? Could we possibly see the
output from ifconfig -a?

-- 
Justin Warren <daedalus at eigenmagic.com>




From exarkun at divmod.com  Tue Apr  4 23:36:43 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 4 Apr 2006 23:36:43 -0400
Subject: [Twisted-Python] HOWTO use twisted-mail's IMAP4 server?
In-Reply-To: <1144176812.4432c0acc5837@webmail.lincsat.com>
Message-ID: <20060405033643.22481.1713773483.divmod.quotient.10157@ohm>

On Tue, 04 Apr 2006 15:53:32 -0300, auspex at lincsat.com wrote:
>I'm trying to figure out how the IMAP4 server does both TLS and SASL, but it
>seems to me to be missing some significant parts.
>
>What do I have to do to make this server run?  There's no apparent code to
>_start_ either IMAP or POP servers in this package, though there's a number of
>different .tacs for the SMTP server.

Twisted contains an IMAP4 server protocol implementation.  It does not contain 
a complete IMAP4 server.  For this, you need a storage mechanism; the complexity 
of IMAP4 places this beyond the current practical scope of Twisted.

"mktap mail --help" should get you started in the right direction for creating a 
POP3 or SMTP server.

Divmod, Inc., my employer, contributed the protocol implementation to Twisted 
while developing a complete IMAP4 server, Quotient.  IMAP4 isn't the focal point 
of the current version of Quotient, but it is likely support will reappear in 
some not-too-distant version.

Jean-Paul



From Wolfgang.W.Eichler at gmx.de  Wed Apr  5 01:08:30 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Wed, 5 Apr 2006 07:08:30 +0200
Subject: [Twisted-Python] UDP answer from different IP
Message-ID: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>

It is as you describe (but on Windows, not Solaris):
C:\>ipconfig
Windows 2000 IP Configuration

Ethernet adapter Local Area Connection 2:

        Connection-specific DNS Suffix  . : ca.com
        IP Address. . . . . . . . . . . . : 130.119.127.196
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 130.119.127.1

Ethernet adapter Local Area Connection:

        Connection-specific DNS Suffix  . : ca.com
        IP Address. . . . . . . . . . . . : 130.119.127.127
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 130.119.127.1

Wolfgang Eichler

>On Tue, 2006-04-04 at 17:20 +0200, Wolfgang Eichler wrote:
>> Hello,
>> I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
>> Thanks
>
>It would appear that your server has two active interfaces with
>different IPs on the same network. You wouldn't happen to be running
>Solaris and IPMP by any chance, would you? Could we possibly see the
>output from ifconfig -a?
>
>-- 
>Justin Warren <daedalus at eigenmagic.com>
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

= = = = = = = = = = = = = = = = = = = =
			
Wolfgang Eichler
Wolfgang.W.Eichler at gmx.de
2006-04-05





From stephen at thorne.id.au  Wed Apr  5 01:51:56 2006
From: stephen at thorne.id.au (Stephen Thorne)
Date: Wed, 5 Apr 2006 15:51:56 +1000
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>
Message-ID: <20060405055156.22481.1084807781.divmod.quotient.10221@ohm>

On Wed, 5 Apr 2006 07:08:30 +0200, Wolfgang Eichler <wolfgang.w.eichler at gmx.de> wrote:
>>On Tue, 2006-04-04 at 17:20 +0200, Wolfgang Eichler wrote:
>>> Hello,
>>> I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
>>> Thanks

How are you setting up your UDP communication? Are you using reactor.listenUDP or .connectUDP? Can you provide a minimal code example?

I don't know about windows, but there is an 'interface' optional arg to both those functions that might be useful.

Stephen.



From foom at fuhm.net  Wed Apr  5 11:52:33 2006
From: foom at fuhm.net (James Y Knight)
Date: Wed, 5 Apr 2006 11:52:33 -0400
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
References: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
Message-ID: <D6F19F30-FE43-48E1-8BA3-D001259941BB@fuhm.net>


On Apr 4, 2006, at 11:20 AM, Wolfgang Eichler wrote:

> Hello,
> I have the situation, that an UDP Server answers a get request  
> using a different IP address (it has 2 addresses). These replies  
> are not mapped to the request. What to do ?
> Thanks

You need to listen separately on each IP address. Unfortunately  
neither twisted nor python has an API for enumerating all the  
addresses of a host, so you'll have to configure them  manually.

James



From daedalus at eigenmagic.com  Wed Apr  5 20:36:08 2006
From: daedalus at eigenmagic.com (Justin Warren)
Date: Thu, 06 Apr 2006 10:36:08 +1000
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>
References: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>
Message-ID: <1144283768.6150.12.camel@localhost.localdomain>

On Wed, 2006-04-05 at 07:08 +0200, Wolfgang Eichler wrote:
> It is as you describe (but on Windows, not Solaris):
> C:\>ipconfig
> Windows 2000 IP Configuration
> 
> Ethernet adapter Local Area Connection 2:
> 
>         Connection-specific DNS Suffix  . : ca.com
>         IP Address. . . . . . . . . . . . : 130.119.127.196
>         Subnet Mask . . . . . . . . . . . : 255.255.255.0
>         Default Gateway . . . . . . . . . : 130.119.127.1
> 
> Ethernet adapter Local Area Connection:
> 
>         Connection-specific DNS Suffix  . : ca.com
>         IP Address. . . . . . . . . . . . : 130.119.127.127
>         Subnet Mask . . . . . . . . . . . : 255.255.255.0
>         Default Gateway . . . . . . . . . : 130.119.127.1

Hmm. I've encountered this kind of issue under Solaris with IPMP in that
if you have more than one active interface on a given network, you can't
easily predict which IP address the OS will choose for outbound packets.
I'm not familiar with the Windows selection algorithm.

Is the SNMP program on the Windows box yours or under your control? Or
are you writing something that does an SNMP GET to this windows box? If
it's your program, have a look at the 'interface' option that Stephen
mentioned. Otherwise it becomes a non-twisted issue around the interface
configuration on the Windows box. You want to be able to set the box up
so that it always sends packets out with a known source IP, or have the
receiving program identify responses in an IP address independant way.

-- 
Justin Warren <daedalus at eigenmagic.com>




From Wolfgang.W.Eichler at gmx.de  Thu Apr  6 03:45:21 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Thu, 6 Apr 2006 09:45:21 +0200
Subject: [Twisted-Python] UDP answer from different IP
Message-ID: <E1FRPBJ-0001Bm-00@pyramid.twistedmatrix.com>

I would like to clarify the situation and describe my current work-around:

My twisted application is on client machine A. It sends  SNMP requests to server machine B.

         self.proxy = agentproxy.AgentProxy(
            ipAddress, port,            					# here   '130.119.127.196', 6665
            community = community,
            snmpVersion = 'v1',
            protocol = self.port.protocol,
        )
        df = self.proxy.getTable(oids, timeout= 0.5, retryCount=5)

Machine B has two interfaces to the network with IP '130.119.127.196' and '130.119.127.127' . Here runs some arbitrary SNMP Agent.

Twisted on A opens a port (25000 or so) and sends getNext requests.
These requests contain an ID, that is later used to identifiy incoming messages and  relate them to the request.

To do this snmpprotocol.py has a function getRequestKey, that retrieves this ID from protocol elements.

When sending the getNext-message getRequestKey() returns:

(('130.119.127.196', 6665), 782)

This is the key which later should work to identify this request when the answers from B arrive.

But since B uses the other interface to answer, the message that arrives carries:

(('130.119.127.127', 6665), 782) and this key is not known.

I wonder why we need the IP address and port at this point, since the ID (782) is unique to machine A and port 25000 and is sufficient to identify the request to which this incoming message belongs.

I patched in snmpprotocol.py:

	def getRequestKey( self, request, target ):
		"""Get the request key from a request/response"""
		for key in [
			'get_request', 'get_response',
			'get_next_request', 'get_bulk_request',
			'response', 'set_request',
		]:
			try:
				ID = request['pdu'][key]['request_id']
			except KeyError, err:
				pass
			except TypeError, err:
				log.error(
					"""Unexpected TypeError retrieving request key %r: %s""",
					key, log.getException(err),
				)
			else:
#				return target, ID.get()
				return ID.get()
		raise KeyError( """Unable to get a request key id from %s for target %s"""%( request, target))

This worked.
Could this be checked by some expert ? Any problem with this approach ?

Thanks
Wolfgang







From p.mayers at imperial.ac.uk  Thu Apr  6 04:16:35 2006
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 06 Apr 2006 09:16:35 +0100
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FRPBJ-0001Bm-00@pyramid.twistedmatrix.com>
References: <E1FRPBJ-0001Bm-00@pyramid.twistedmatrix.com>
Message-ID: <4434CE63.90908@imperial.ac.uk>

Wolfgang Eichler wrote:
> I would like to clarify the situation and describe my current
> work-around:
> 
> My twisted application is on client machine A. It sends  SNMP
> requests to server machine B.
> 
> Machine B has two interfaces to the network with IP '130.119.127.196'
> and '130.119.127.127' . Here runs some arbitrary SNMP Agent.
> 
> 
> When sending the getNext-message getRequestKey() returns:
> 
> (('130.119.127.196', 6665), 782)

Then the SNMP code you're using is wrong. As you have found, it is 
EXTREMELY common for this to happen (the SNMP reply to come from a 
different IP than the request was sent to). Whether it's a wrong thing 
for the router/host to do is irrelevant for practical purposes - lots 
and lots of network equipment, some of it very expensive, does it.

My SNMP code does as you suggest, just uses the port number and ID number.

> I wonder why we need the IP address and port at this point, since the
> ID (782) is unique to machine A and port 25000 and is sufficient to
> identify the request to which this incoming message belongs.
> 
> I patched in snmpprotocol.py:

I can't see if that's the specific right thing to patch since I'm not 
familiar with TwistedSNMP, but as I say I have a python/C-helper SNMP 
stack, and it does exactly as you suggest, so if it works I'd say you've 
fixed it.



From Michael-Niehues at gmx.net  Thu Apr  6 04:50:27 2006
From: Michael-Niehues at gmx.net (Michael Niehues)
Date: Thu, 6 Apr 2006 10:50:27 +0200 (MEST)
Subject: [Twisted-Python] SSL Session Resumption
Message-ID: <2813.1144313427@www011.gmx.net>

Hi!

I have implemented  a client/Server program with twisted.internet.ssl and
pyopenssl. Now I would like to use session Resumption.
Therefor I have to enable the "session_cache_mode" and to set the old
session data (to use the last session).
Is this possible in twisted and how can I do that?   

kindly reagards

Michael Niehues



From exarkun at divmod.com  Thu Apr  6 09:15:12 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 6 Apr 2006 09:15:12 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16552 - fix some docstrings
 and radix's nitpicking
In-Reply-To: <E1FRKrq-0002Bn-00@wolfwood>
Message-ID: <20060406131512.22481.1551806552.divmod.quotient.10732@ohm>

On Wed, 05 Apr 2006 21:09:06 -0600, David Reid <dreid at wolfwood.twistedmatrix.com> wrote:
>Author: dreid
>Date: Wed Apr  5 21:09:05 2006
>New Revision: 16552
>
> [snip]
>
>Modified: branches/http-auth-1475-2/twisted/web2/auth/digest.py
>==============================================================================
>--- branches/http-auth-1475-2/twisted/web2/auth/digest.py	(original)
>+++ branches/http-auth-1475-2/twisted/web2/auth/digest.py	Wed Apr  5 21:09:05 2006
>@@ -23,7 +23,7 @@
>     'sha': sha.sha,
> }
>
>-def DigestCalcHA1(
>+def calcHA1(
> [snip]
>-def DigestCalcResponse(
>+def calcResponse(

You should leave the original function names around here somewhere, in a comment or a doc-string, since they are direct references to the spec which defines these transformations.

>
> [snip]
>
>Modified: branches/http-auth-1475-2/twisted/web2/auth/interfaces.py
>==============================================================================
>--- branches/http-auth-1475-2/twisted/web2/auth/interfaces.py	(original)
>+++ branches/http-auth-1475-2/twisted/web2/auth/interfaces.py	Wed Apr  5 21:09:05 2006
> [snip]
>
>     def decode(response, method=None):
>         """Create a credentials object from the given response.
>-
>+        May raise twisted.cred.error.LoginFailed if the response is invalid.
>+

You want @raise here.

>         @type response: C{str}
>         @param response: scheme specific response string
>
>
>Modified: branches/http-auth-1475-2/twisted/web2/auth/wrapper.py
>==============================================================================
>--- branches/http-auth-1475-2/twisted/web2/auth/wrapper.py	(original)
>+++ branches/http-auth-1475-2/twisted/web2/auth/wrapper.py	Wed Apr  5 21:09:05 2006
> [snip]
>@@ -51,10 +51,9 @@
>                                 from locateChild and render upon successful
>                                 authentication.
>
>-        @param credentialFactory: An L{ICredentialFactory} that supports the
>-                                  desired authentication scheme (currently only
>-                                  a single authentication scheme at a time is
>-                                  supported)
>+        @param credentialFactories: A list of instances that implement
>+                                    L{ICredentialFactory}.

"instances that implement"?  This is confusing.  Do you really mean "classes which implement" or "instances which provide"?

>+        @param credentialFactories: L{list}

This is probably meant to be @type.

>
>         @param protal: the portal that handles login

Typo here, and the only thing portals do is handle login, so is this really a useful piece of documentation? ;)

Jean-Paul



From leszczynscy at yahoo.com  Fri Apr  7 17:19:17 2006
From: leszczynscy at yahoo.com (Andy Leszczynski)
Date: Fri, 7 Apr 2006 14:19:17 -0700 (PDT)
Subject: [Twisted-Python] Disabling request queuing in twisted.protocols.http
Message-ID: <20060407211917.53349.qmail@web30007.mail.mud.yahoo.com>

Hi,

HTTP 1.1 persistent connection requires replies to be
send by the server in the order requests are received.
At least this is the way I understand the HTTP clients
can associate request/reply send and received thru the
TCP/IP.

I use Twisted twisted.protocols.http for very specific
application. There is a Twisted based HTTP server
which in some cases must reply in different order.

Now, I went thru the http module code and all the
outstanding requests results are steamed into IOString
and later flushed out in the correct order.

Is there any way to disable queuing. I tried to
overriteRequest.queued by passing 0 in to the__init__
but it yields some other problems. I use 1.3 Twisted.


Thanks in advance, A.



From jcea at argo.es  Fri Apr  7 19:55:38 2006
From: jcea at argo.es (Jesus Cea)
Date: Sat, 08 Apr 2006 01:55:38 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
Message-ID: <4436FBFA.2080500@argo.es>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Twisted is very extensive in protocol support, managing smtp, pop3 and
imap4, for example. I was wondering if there is any LMTP server project
out there. It should be fairly simple, since LMTP is very very similar
to usual SMTP. I need to use LMTP for a local project, and I was
wondering if tiwsted could be used to fill this gap.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea at argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea at jabber.org         _/_/    _/_/          _/_/_/_/_/
                               _/_/  _/_/    _/_/          _/_/  _/_/
"Things are not so easy"      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
"My name is Dump, Core Dump"   _/_/_/        _/_/_/      _/_/  _/_/
"El amor es poner tu felicidad en la felicidad de otro" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBRDb7+plgi5GaxT1NAQK4rQP9EDdkMc0b83teXKB/XM22fV2gq3z/uEj1
RBjeHGSPOs5ogg1+/E4eiq8vq83mNTBDzxVJriN20UbrHgOcC+kBjfnCB8MCPnER
1tEorRnb19Siy+xnu0+rJ3XtNLJXJubMiXxm/5ig27Hl+UChnQLCthiqL1h0P22/
yi9LCprkRZ4=
=fG6b
-----END PGP SIGNATURE-----



From matusis at matusis.com  Fri Apr  7 20:57:05 2006
From: matusis at matusis.com (Alec Matusis)
Date: Fri, 7 Apr 2006 17:57:05 -0700
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <1144078575.9211.5.camel@localhost.localdomain>
Message-ID: <E1FS1lW-0003CX-00@pyramid.twistedmatrix.com>

I have two related questions about this.

I have been using

reactor.addSystemEventTrigger('before', 'shutdown',
myservice.beforeStopService) (not using .tac)

In my beforeStopService() function I need to do two things:

1) I have two factories, and two different protocols, that use two different
ports. Both have the same application set as service parent. I would like to
shut down connections on only ONE of the two ports before I proceed with
pre-shutdown procedures. How do I do this?

I am only aware of  
twisted.internet.reactor.disconnectAll()
But that shuts down all connections on BOTH ports.

Here is the simplified structure of my application:

#this connects to another server, I need this to stay open during
pre-shutdown
server_connector = ConnectorFactory()
server_connector.protocol = protocols.IconsToSellersProtocol
server_connector.service = myservice
serv_to_serv = twisted.application.internet.TCPClient(HOST, PORT_1,
server_connector).setServiceParent(application)

#this accepts connections from clients, I need this to close this during
pre-shutdown
client_factory = twisted.internet.protocol.ServerFactory()
client_factory.protocol = protocols.ClientProtocol
client_factory.service = myservice
client_factory.service.sc_protocol = server_connector.protocol
client_serv=twisted.application.internet.TCPServer(PORT_2,
client_factory).setServiceParent(application)

2) This scenario is simliar to 1), except that I want to stop accepting new
connections on PORT_2 in my pre-shutdown procedure, leaving the existent
connections on PORT_2 in ESTABLISHED state intact. 


-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Itamar
Shtull-Trauring
Sent: Monday, April 03, 2006 8:36 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] Cleanly shutting down Service

On Sun, 2006-04-02 at 11:21 -0700, apocalypznow wrote:
> How do I cleanly shut down a Service?  I want the shut down to make the 
> stopService() method get called.

Either use twistd with a .tac, as someone else suggested, or:

reactor.addSystemEventTrigger('before', 'shutdown', myservice.stopService)

If stopService returns a Deferred this will delay shutdown until
Deferred returned from stopService is triggered.


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From jml at mumak.net  Sat Apr  8 22:42:42 2006
From: jml at mumak.net (Jonathan Lange)
Date: Sun, 9 Apr 2006 12:42:42 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
Message-ID: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>

Hello,

I reckon it's about time for another AU sprint.

The likely locations are Sydney or Melbourne, and the likely dates are
any weekend in May, the first weekend of June or the last weekend of
June.

Topics are as yet undecided.  I intend to remove wait() entirely.

I tentatively suggest that the Sprint be:
- In Sydney
- June 24-25
(patches accepted)

Can you make it? Reply today!

cheers,
jml



From mary-twisted at puzzling.org  Sun Apr  9 00:19:14 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 9 Apr 2006 14:19:14 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
Message-ID: <20060409041914.GA5338@sourdust.home.puzzling.org>

On Sun, Apr 09, 2006, Jonathan Lange wrote:
> I tentatively suggest that the Sprint be:
> - In Sydney
> - June 24-25
> (patches accepted)
> 
> Can you make it? Reply today!

If it's in Sydney yes, in Melbourne likely not (for entirely slefish
reasons involving throwing perfectly good money that could be spend on
sprinting at scuba diving).

If it's in Sydney I suggest going through Bob Kummerfeld as per post #4
at http://tinyurl.com/rjp67

-Mary



From exarkun at twistedmatrix.com  Sun Apr  9 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 09 Apr 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1144559101.9.222845506@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-02 through 2006-04-09
Bugs opened: 10    Bugs closed: 5  Total open bugs: 580 (+5)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +1  |Highest:  -2          |Core:   +5             
|Enhancement:  +5  |High:     +0          |Names:  +1             
                   |Normal:   +8          |Pb:     +0             
                                          |Trial:  -2             
                                          |Web:    +1             
                                          |Web2:   +1             


New / Reopened Bugs
______________________
                    ===== High =====
[#1618] twisted.pb.test.test_negotiate.CrossfireReverse.test4 fails intermittently (opened by jml) (CLOSED, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/1618

                    ===== Normal =====
[#1619] Reloading html page with unchanged CSS generates traceback (opened by jacob)
    defect          web2       http://twistedmatrix.com/trac/ticket/1619

[#1620] don't break an usage.Options error message when it contains encoded big5 (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1620

[#1621] Memory leak: twisted.web.http.Request objects should call _cleanup() on lost connection (opened by jon)
    defect          web        http://twistedmatrix.com/trac/ticket/1621

[#1622] twisted.names.client.Resolver.__init__.__doc__ error (opened by Nerdbeard)
    defect          names      http://twistedmatrix.com/trac/ticket/1622

[#1623] wxreactor/wxpython does not work well together - GUI "hangs" (opened by robertckcheung)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1623

[#1624] A way to specify time format on the twistd commandline (opened by moof) (CLOSED, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1624

[#1625] Integrate Mike Orr's finger tutorial additions (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1625

[#1626] Integrate Nicola Larosa's collection of interesting mailing list posts into the documentation (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1626

[#1627] Integrate Mike Fletcher's blog posts into the docs (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1627



Closed Bugs
______________________
                    ===== Highest =====
[#1470] test_reporter.TestErrorReporting.test_timing uses clock and tests many things (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1470

[#1538] Trial timing reporter doesn't work (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1538

                    ===== High =====
[#1618] twisted.pb.test.test_negotiate.CrossfireReverse.test4 fails intermittently (opened by jml, closed by exarkun, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/1618

[#1354] [PATCH] t.p.usage error messages mangle option case (opened by Tv, closed by radix, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1354

                    ===== Normal =====
[#1624] A way to specify time format on the twistd commandline (opened by moof, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1624





From jml at mumak.net  Sun Apr  9 03:09:43 2006
From: jml at mumak.net (Jonathan Lange)
Date: Sun, 9 Apr 2006 17:09:43 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <20060409041914.GA5338@sourdust.home.puzzling.org>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
	<20060409041914.GA5338@sourdust.home.puzzling.org>
Message-ID: <d06a5cd30604090009r58cc8a08xb2e576d6869a78b5@mail.gmail.com>

On 4/9/06, Mary Gardiner <mary-twisted at puzzling.org> wrote:
> On Sun, Apr 09, 2006, Jonathan Lange wrote:
> > I tentatively suggest that the Sprint be:
> > - In Sydney
> > - June 24-25
> > (patches accepted)
> >

For various reasons, it is now:
June 3-4, Sydney.

jml



From anthony at interlink.com.au  Sun Apr  9 11:36:37 2006
From: anthony at interlink.com.au (Anthony Baxter)
Date: Mon, 10 Apr 2006 01:36:37 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
Message-ID: <200604100136.39474.anthony@interlink.com.au>

I'm extremely unlikely to be able to make it to Sydney in June.

Sorry,
Anthony



From andy at thecablelounge.com  Sun Apr  9 20:29:35 2006
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 10 Apr 2006 10:29:35 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <20060409041914.GA5338@sourdust.home.puzzling.org>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
	<20060409041914.GA5338@sourdust.home.puzzling.org>
Message-ID: <4439A6EF.1090904@thecablelounge.com>

Mary Gardiner wrote:

> If it's in Sydney yes, in Melbourne likely not (for entirely slefish
> reasons involving throwing perfectly good money that could be spend on
> sprinting at scuba diving).

Perhaps twisted sprint and scuba dive!  Is Cairns to far for most peope?

Andy.



From mary-twisted at puzzling.org  Sun Apr  9 21:05:35 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 10 Apr 2006 11:05:35 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <4439A6EF.1090904@thecablelounge.com>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
	<20060409041914.GA5338@sourdust.home.puzzling.org>
	<4439A6EF.1090904@thecablelounge.com>
Message-ID: <20060410010535.GH5338@sourdust.home.puzzling.org>

Getting, um, off topic, further responses off list please :)

On Mon, Apr 10, 2006, Andy Gayton wrote:
> Mary Gardiner wrote:
> 
> >If it's in Sydney yes, in Melbourne likely not (for entirely slefish
> >reasons involving throwing perfectly good money that could be spend on
> >sprinting at scuba diving).
> 
> Perhaps twisted sprint and scuba dive!  Is Cairns to far for most peope?

Probably doing Townsville and the Yongala in June. Far North Queensland
is too far *twice* in a year ;)

-Mary



From glyph at divmod.com  Sun Apr  9 22:39:26 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 9 Apr 2006 22:39:26 -0400
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: 0
Message-ID: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>

Currently there are 3 tests which are causing problems on the select reactor on win32, as detailed by this build report: 

http://twistedmatrix.com/buildbot/win32-select/builds/445/step-default/2

I think they should all be marked 'todo'.  Although ideally all the functionality these tests cover should be supported on Windows, the tests themselves are somewhat suspect, and marking them as 'todo' conditionally for the platform would turn the Windows buildbot green, allowing us to notice much more quickly when other, more serious things have gone wrong.

I am writing out a big rationale here becuase normally .todo'ing tests which are passing is a big no-no, and I think that this is something of a special case due to the long period of neglect for the platform involved.

The test in question are:

 * twisted.pb.test.test_negotiate.CrossfireReverse.test1

I've talked to brian about this test being todo'd because it is intermittently failing on _all_ platforms; windows just seems to have a far greater chance of failing.

 * twisted.test.test_udp.MulticastTestCase.testJoinFailure

I'm not really sure what is going on here.  Some nuance of error reporting in Python?  127.0.0.1 _is_ considered a multicast address on Windows?  This seems like it should be TODO'd conditionally, and there should be a ticket to conclusively diagnose it.

 * twisted.web2.test.test_http.SSLServerTest.testLingeringClose

Buffering 'lo' on Windows is weird.  I don't think that there is a proper way to fix this; IMHO the test is slightly buggy.  It's worth noting that the thing that's blowing up is a direct call to openssl's send(), _not_ a Twisted API.

While I think that this test is sort of suspicious, and it should figure out a way to be more lenient to its subprocess, I think that it can be todo'd for win32 since the behavior being tested isn't platform dependent, only the client APIs involved.  I believe that the ticket here should use Twisted in the subprocess so that if there is a portability issue with buffering, we can properly abstract it.

 * twisted.test.test_ssl.ConnectionLostTestCase.testFailedVerify

This is reporting the wrong error, but it is correctly dropping the connection.  There is a small security risk here, which bothers me, but there may be no way to expose the proper information without fixing bugs in openssl.  Considering that this passes on UNIX I believe it should also be conditionally marked on Windows.  The ticket here is simply to get the test to pass, since I think the test itself is OK in this circumstance.


In conclusion: one of these tests should be todo'd on all platforms, the rest should be todo'd conditionally if isWindows().  Any objections?



From andrew-twisted at puzzling.org  Sun Apr  9 23:54:11 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 10 Apr 2006 13:54:11 +1000
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
References: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
Message-ID: <20060410035411.GC29986@steerpike.home.puzzling.org>

On Sun, Apr 09, 2006 at 10:39:26PM -0400, glyph at divmod.com wrote:
[...]
> 
> In conclusion: one of these tests should be todo'd on all platforms, the 
> rest should be todo'd conditionally if isWindows().  Any objections?

Sounds good to me.

-Andrew.




From exarkun at divmod.com  Mon Apr 10 01:10:30 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 10 Apr 2006 01:10:30 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16582 - Remove util.wait
	and all uses.
In-Reply-To: <E1FSmy6-0005zK-00@wolfwood>
Message-ID: <20060410051030.22481.1163510204.divmod.quotient.11981@ohm>

On Sun, 09 Apr 2006 21:21:34 -0600, Jonathan Lange <jml at wolfwood.twistedmatrix.com> wrote:
>Author: jml
>Date: Sun Apr  9 21:21:33 2006
>New Revision: 16582
>
>Modified:
>   trunk/twisted/conch/test/test_filetransfer.py
>   trunk/twisted/conch/test/test_telnet.py
>   trunk/twisted/lore/nevowlore.py
>   trunk/twisted/mail/test/test_mail.py
>   trunk/twisted/mail/test/test_pop3client.py
>   trunk/twisted/names/test/test_names.py
>   trunk/twisted/protocols/ftp.py
>   trunk/twisted/test/test_adbapi.py
>   trunk/twisted/test/test_defgen.py
>   trunk/twisted/test/test_ftp.py
>   trunk/twisted/test/test_reflector.py
>   trunk/twisted/trial/runner.py
>   trunk/twisted/trial/test/test_util.py
>   trunk/twisted/trial/unittest.py
>   trunk/twisted/trial/util.py
>   trunk/twisted/web2/test/test_stream.py
>Log:
>Remove util.wait and all uses.
>
> [snip]
>
>Modified: trunk/twisted/protocols/ftp.py
>==============================================================================
>--- trunk/twisted/protocols/ftp.py	(original)
>+++ trunk/twisted/protocols/ftp.py	Sun Apr  9 21:21:33 2006
>@@ -660,7 +660,7 @@
>             if cmd == 'PASS':
>                 return self.ftp_PASS(*params)
>             else:
>-                return BAD_CMD_SEQ
>+                return BAD_CMD_SEQ, "PASS required after USER"
>
>         elif self.state == self.AUTHED:
>             method = getattr(self, "ftp_" + cmd, None)
>@@ -672,7 +672,7 @@
>             if cmd == 'RNTO':
>                 return self.ftp_RNTO(*params)
>             else:
>-                return BAD_CMD_SEQ, "Blah"
>+                return BAD_CMD_SEQ, "RNTO required after RNFR"
>
>
>     def ftp_USER(self, username):
>

Hmmm.  I don't see any changes related to wait() in these hunks. ;)

> [snip]
>Modified: trunk/twisted/test/test_ftp.py
>==============================================================================
>--- trunk/twisted/test/test_ftp.py	(original)
>+++ trunk/twisted/test/test_ftp.py	Sun Apr  9 21:21:33 2006
> [snip]
>@@ -86,7 +82,10 @@
>         # Connect a client to it
>         portNum = self.port.getHost().port
>         clientCreator = protocol.ClientCreator(reactor, ftp.FTPClientBasic)
>-        self.client = wait(clientCreator.connectTCP("127.0.0.1", portNum))
>+        d = clientCreator.connectTCP("127.0.0.1", portNum)
>+        def gotClient(client):
>+            self.client = client
>+        return d.addCallback(gotClient)
>
>     def tearDown(self):
>         # Clean up sockets

While it doesn't appear that this change *introduced* a new race condition, it does seem as though it has jostled things so as to cause an existing one to start going the wrong way.

This seems to be a pretty common one in the test suite, so everyone pay attention.

Just because one side of a TCP connection has had its connection-established-successfully callback fired (ie, buildProtocol on the Factory) does not mean that both sides of the TCP connection have had this callback fired.  Quite often, in fact, this is not the case (particularly on platforms you forgot to run the unit tests on ;).

This ftp setUp needs to be made to wait for both the server and the client to become connected before proceeding.  The failure to do so can be seen as a new failing test on the reactors buildslave in the Qt step.

(Of course, the Qt step was already red, because a previous branch uncovered still another race condition.)

Please revert the branch or fix the race post-haste.  If someone would take a look at the failing tcp half-close test on that reactor, I would appreciate it, otherwise I'll try to get to it sometime in the next couple days.

Jean-Paul



From andrew-twisted at puzzling.org  Mon Apr 10 02:20:50 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 10 Apr 2006 16:20:50 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r16582 - Remove util.wait
	and all uses.
In-Reply-To: <20060410051030.22481.1163510204.divmod.quotient.11981@ohm>
References: <E1FSmy6-0005zK-00@wolfwood>
	<20060410051030.22481.1163510204.divmod.quotient.11981@ohm>
Message-ID: <20060410062050.GE29986@steerpike.home.puzzling.org>

On Mon, Apr 10, 2006 at 01:10:30AM -0400, Jean-Paul Calderone wrote:
[...]
> >--- trunk/twisted/protocols/ftp.py	(original)
> >+++ trunk/twisted/protocols/ftp.py	Sun Apr  9 21:21:33 2006
> >@@ -660,7 +660,7 @@
> >            if cmd == 'PASS':
> >                return self.ftp_PASS(*params)
> >            else:
> >-                return BAD_CMD_SEQ
> >+                return BAD_CMD_SEQ, "PASS required after USER"
> >
> >        elif self.state == self.AUTHED:
> >            method = getattr(self, "ftp_" + cmd, None)
> >@@ -672,7 +672,7 @@
> >            if cmd == 'RNTO':
> >                return self.ftp_RNTO(*params)
> >            else:
> >-                return BAD_CMD_SEQ, "Blah"
> >+                return BAD_CMD_SEQ, "RNTO required after RNFR"
> >
> >
> >    def ftp_USER(self, username):
> >
> 
> Hmmm.  I don't see any changes related to wait() in these hunks. ;)

This was my bad (I did the ftp parts of this branch) -- I bumped into the bug in
the first hunk while updating test_ftp, and improved the nearby "Blah" while I
was at it :)

[...]
> 
> While it doesn't appear that this change *introduced* a new race condition, 
> it does seem as though it has jostled things so as to cause an existing one 
> to start going the wrong way.
> 
[...]
> Please revert the branch or fix the race post-haste.  If someone would take 
> a look at the failing tcp half-close test on that reactor, I would 
> appreciate it, otherwise I'll try to get to it sometime in the next couple 
> days.

Jonathan and I both came up with essentially the same fix for this.  He's just
committed mine to the trunk in r16583.

Thanks for spotting this.

No idea about the half-close test, though...

-Andrew.




From Brendan at BrendanSimon.com  Mon Apr 10 06:28:44 2006
From: Brendan at BrendanSimon.com (Brendan Simon)
Date: Mon, 10 Apr 2006 20:28:44 +1000
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
Message-ID: <443A335C.6000204@BrendanSimon.com>

I have the following application in mind.
    1. Using a Configuration Management System that only runs on UNIX.
    2. Write an application for Windows to remotely connect to the UNIX 
host and perform commands.
    3. Optionally add a GUI (wxPython) to the application.

The CMS has a command to output XML of parts of its internal database 
which will make it easy to display the info in a client app :)  For me 
the question is how do I get the info to/from the CMS on a remote 
server.  I think writing a small server app to interpret my requests and 
relay the XML output to the client is the answer.

I want to use SSH which is how I got onto Twisted (Conch) though I do 
realise that Paramiko is available too.  I also want to make use of rsync.

Reading some Python books, suggested  technologies are Twisted's 
Perspective Broker, XMLRPC, CORBA and also SOAP is mentioned.

CORBA seems like overkill for my simple server.
SOAP I don't know enough about yet.
XMLRPC seems very appropriate.
PB seems easy enough too.

One big question for me is portability, such that other clients written 
in other languages could access the same data.  I'm thinking that all 
technologies would have this property _except_ for PB.  Is that 
correct?  i.e. could a C, perl or ruby application access my server if 
the server was written using Twisted PB ???

If not would anyone recommend SOAP or XMLRPC instead??

Also, it would be nice if I could use any transport mechanism to send 
the commands.  eg. http, https, ssh, rsh.  Can Twisted be used to 
provide such a generic transport mechanism?  If not would, SOAP or 
XMLRPC be better choices, or is the question of transport irrelevant.

I was thinking of creating my own XML files to request information from 
my server.  Is this the way to go, or am I recreating the wheel?

Thanks,
Brendan.




From mithrandi-twisted-python at mithrandi.za.net  Mon Apr 10 07:07:43 2006
From: mithrandi-twisted-python at mithrandi.za.net (Tristan Seligmann)
Date: Mon, 10 Apr 2006 13:07:43 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
In-Reply-To: <443A335C.6000204@BrendanSimon.com>
References: <443A335C.6000204@BrendanSimon.com>
Message-ID: <20060410110743.GB25250@mithrandi.za.net>

* Brendan Simon <Brendan at BrendanSimon.com> [2006-04-10 20:28:44 +1000]:

> One big question for me is portability, such that other clients written 
> in other languages could access the same data.  I'm thinking that all 
> technologies would have this property _except_ for PB.  Is that 
> correct?  i.e. could a C, perl or ruby application access my server if 
> the server was written using Twisted PB ???

PB support outside of Python is pretty minimal. I believe there may be a
Java implementation still floating around somewhere, but I'm not sure
how up to date it is, or whether it is even still functional.

> If not would anyone recommend SOAP or XMLRPC instead??

I would recommend transferring plain custom XML documents over HTTP,
rather than introducing an extra layer of pain with SOAP or XML-RPC.

> Also, it would be nice if I could use any transport mechanism to send 
> the commands.  eg. http, https, ssh, rsh.  Can Twisted be used to 
> provide such a generic transport mechanism?  If not would, SOAP or 
> XMLRPC be better choices, or is the question of transport irrelevant.

I believe SOAP and XML-RPC are only defined over HTTP (including https,
because that's more or less an extra layer underneath it). I'm not sure
there's any value in transmitting SOAP/XML-RPC XML documents over
something like ssh.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060410/4c36fb69/attachment.pgp 

From os at webinspace.de  Mon Apr 10 08:09:27 2006
From: os at webinspace.de (Oliver Scheel)
Date: Mon, 10 Apr 2006 14:09:27 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
Message-ID: <324705477@web.de>

Hi,

> Reading some Python books, suggested  technologies are Twisted's 
> Perspective Broker, XMLRPC, CORBA and also SOAP is mentioned.
> 
> CORBA seems like overkill for my simple server.
> SOAP I don't know enough about yet.
> XMLRPC seems very appropriate.
> PB seems easy enough too.

I was exactly in the same situation last month :-)

My thoughts:

CORBA ist quite nice, wide spreaded, but more work to implement.

PB ist quite nice, at least twisted only spreaded, but easy to implement.

XML-RPC is included with Python. SOAP is much better the way data types and other things are handled, but not part of Python. Both are easy to use. Twisted favour is SOAPpy and that is build the (pythonic) way like "xmlrpclib".

I use both, but I built the services and the clients that way, that I can change between XML-RPC and SOAP. I need XML-RPC, because one service is located on a Windows 98 machine and I want to reduce complexity out there :-)

Oliver




From projects at reedflute.com  Mon Apr 10 08:12:38 2006
From: projects at reedflute.com (Eugene Coetzee)
Date: Mon, 10 Apr 2006 14:12:38 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
In-Reply-To: <20060410110743.GB25250@mithrandi.za.net>
References: <443A335C.6000204@BrendanSimon.com>
	<20060410110743.GB25250@mithrandi.za.net>
Message-ID: <443A4BB6.8090403@reedflute.com>

Tristan Seligmann wrote:

>I would recommend transferring plain custom XML documents over HTTP,
>rather than introducing an extra layer of pain with SOAP or XML-RPC.
>
>  
>
>>Also, it would be nice if I could use any transport mechanism to send 
>>the commands.  eg. http, https, ssh, rsh.  Can Twisted be used to 
>>provide such a generic transport mechanism?  If not would, SOAP or 
>>XMLRPC be better choices, or is the question of transport irrelevant.
>>    
>>
>
>I believe SOAP and XML-RPC are only defined over HTTP (including https,
>because that's more or less an extra layer underneath it). I'm not sure
>there's any value in transmitting SOAP/XML-RPC XML documents over
>something like ssh.
>  
>
For a more formal approach to "XML documents over HTTP" doing in a sane 
fashion what SOAP/XML-RPC wants to achieve:

http://en.wikipedia.org/wiki/Representational_State_Transfer

With Twisted you can easily roll your own RESTive interface.

regards,

Eugene Coetzee

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060410/6d8e10e7/attachment.htm 

From jml at mumak.net  Mon Apr 10 08:47:27 2006
From: jml at mumak.net (Jonathan Lange)
Date: Mon, 10 Apr 2006 22:47:27 +1000
Subject: [Twisted-Python] Trial: State of the Union
Message-ID: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>

Hello All,

I've recently merged a branch that removes twisted.trial.util.wait
along with all uses of wait() from our tests (paypal details below
;)). Thought it might be a good time to let people know what I'm
thinking with Trial. (By the way, thanks very much to everyone who
helped with that branch.)

There are four major changes / refactorings that I am planning on seeing done:

1. Become a real Twisted application
(http://twistedmatrix.com/trac/wiki/TrialDevNotes)
Essentially, make Trial's TestSuite expect tests to return Deferreds. 
More at the reference.

2. Trial Reactor (http://twistedmatrix.com/trac/ticket/1334)
Jp has indicated that this is the best way for Trial to do cleanup
after each test.

3. Log Sanity (http://twistedmatrix.com/trac/ticket/1409)
Rather than using log._startKeepingErrors or whatever it is called,
use a log observer to keep logged errors and report them as errors
when the test is done.  Provide APIs for altering the list of errors
that have been logged in the test.

4. Split up TestCase
Ideally, I'd like to split out the special case stuff in TestCase that
handles TestCase subclasses that use setUpClass.

I'm intending to work on 1 at the sprint. However, I think we need to
remove the remaining reactor.iterate calls for it to work.

All of these changes involve non-trivial refactoring and should make
Trial less bad.  Once they are made, my role as maintainer will
(hopefully!) slip into fixing bugs, improving docs and adding features
that I'm excited about.

How you can help:
- Money doesn't help so much. If you want, you can buy me curry. Or a
gym membership, to work off all that curry. Paypal is jml at mumak.net.
There are probably better ways you could help Twisted with your money.
- Pairing helps a lot. Come to Tassie.
- Remove calls to reactor.iterate()
- Help me do 2.

cheers,
jml



From jason at jasonlefkowitz.net  Mon Apr 10 11:09:18 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Mon, 10 Apr 2006 11:09:18 -0400
Subject: [Twisted-Python] Minimal example of Words/OSCAR?
Message-ID: <443A751E.40708@jasonlefkowitz.net>

Hey --

I'm just getting started with Twisted, and I'm particularly interested 
in getting up to speed with Twisted Words.  I'm curious if there is a 
minimalistic demo example anywhere of a bot that connects to the 
OSCAR/AIM network.  I've been looking over the included oscardemo.py and 
it's been helpful, but it seems to include a lot of functionality 
(handling chat-room requests, change of status of buddies, etc.) and I'm 
having trouble parsing out what is absolutely necessary just to 
establish a connection with the OSCAR network.  Does anyone know of an 
example that just shows this?

Thanks in advance!

-- Jason Lefkowitz



From moe at divmod.com  Mon Apr 10 12:15:59 2006
From: moe at divmod.com (Moe Aboulkheir)
Date: Mon, 10 Apr 2006 18:15:59 +0200
Subject: [Twisted-Python] Minimal example of Words/OSCAR?
In-Reply-To: <443A751E.40708@jasonlefkowitz.net>
Message-ID: <20060410161559.22481.566535785.divmod.quotient.12126@ohm>

Jason,

Here is a stripped-down version of oscardemo.py:

http://divmod.org/users/moe/oscardemo.minimal.py

As per your request, it doesn't do anything except connect to OSCAR and hang around.

Moe



From glyph at divmod.com  Mon Apr 10 12:27:26 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 10 Apr 2006 12:27:26 -0400
Subject: [Twisted-Python] Minimal example of Words/OSCAR?
In-Reply-To: <443A751E.40708@jasonlefkowitz.net>
Message-ID: <20060410162726.22481.538306586.divmod.quotient.12130@ohm>



On Mon, 10 Apr 2006 11:09:18 -0400, "Jason A. Lefkowitz" <jason at jasonlefkowitz.net> wrote:
>Hey --
>
>I'm just getting started with Twisted, and I'm particularly interested in 
>getting up to speed with Twisted Words.  I'm curious if there is a 
>minimalistic demo example anywhere of a bot that connects to the OSCAR/AIM 
>network.  I've been looking over the included oscardemo.py and it's been 
>helpful, but it seems to include a lot of functionality (handling chat-room 
>requests, change of status of buddies, etc.) and I'm having trouble parsing 
>out what is absolutely necessary just to establish a connection with the 
>OSCAR network.  Does anyone know of an example that just shows this?

I don't believe that there is.  It strikes me that it is a documentation bug, either that there isn't such a document, or that it is hard to find.  Someone want to correct me before I file it?

>Thanks in advance!
>
>-- Jason Lefkowitz

By the way, everyone: no relation (that I am aware of).  



From jason at jasonlefkowitz.net  Mon Apr 10 12:45:57 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Mon, 10 Apr 2006 12:45:57 -0400
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
Message-ID: <443A8BC5.5040506@jasonlefkowitz.net>

Thanks, Moe!  Very helpful.

-- Jason



From TimothyFitz at gmail.com  Mon Apr 10 14:01:09 2006
From: TimothyFitz at gmail.com (Timothy Fitz)
Date: Mon, 10 Apr 2006 14:01:09 -0400
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
References: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
Message-ID: <972ec5bd0604101101r178b5c64qe09cb9feb4f81a48@mail.gmail.com>

On 4/9/06, glyph at divmod.com <glyph at divmod.com> wrote:
>  * twisted.test.test_udp.MulticastTestCase.testJoinFailure
>
> I'm not really sure what is going on here.  Some nuance of error reporting in Python?  127.0.0.1 _is_ considered a multicast address on Windows?  This seems like it should be TODO'd conditionally, and there should be a ticket to conclusively diagnose it.

It seems that the 127.*.*.* range is considered a valid multicast
address under windows, though I've found no functionality this exposes
(and no documentation or mention of it online). Other addresses do
properly fail.



From mithrandi-twisted-python at mithrandi.za.net  Mon Apr 10 15:30:13 2006
From: mithrandi-twisted-python at mithrandi.za.net (Tristan Seligmann)
Date: Mon, 10 Apr 2006 21:30:13 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
In-Reply-To: <443A4BB6.8090403@reedflute.com>
References: <443A335C.6000204@BrendanSimon.com>
	<20060410110743.GB25250@mithrandi.za.net>
	<443A4BB6.8090403@reedflute.com>
Message-ID: <20060410193012.GD25250@mithrandi.za.net>

* Eugene Coetzee <projects at reedflute.com> [2006-04-10 14:12:38 +0200]:

> For a more formal approach to "XML documents over HTTP" doing in a sane 
> fashion what SOAP/XML-RPC wants to achieve:

I do not think that anything that SOAP wants to achieve could be
described as sane ;)

> http://en.wikipedia.org/wiki/Representational_State_Transfer

More seriously, REST and SOAP/XML-RPC really are different beasts; REST
is about "state transfer", SOAP and XML-RPC are mainly about RPC-style
semantics. Of course, SOAP also has a "document style" form in which you
embed a custom XML document in a wad of pointless SOAP wrapping, which
confuses things.

Unfortunately, in my experience, the most popular choice is also the
most brain-damaged: an RPC-style SOAP interface with a single method
containing a single string parameter (well, maybe a username and
password too; basic auth must be too hard to understand) that contains a
custom XML document...

(If you hadn't guessed, I'm just a little bitter about all this *g*)

> With Twisted you can easily roll your own RESTive interface.

Indeed.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060410/f33e1e25/attachment.pgp 

From glyph at divmod.com  Mon Apr 10 20:38:18 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 10 Apr 2006 20:38:18 -0400
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: <972ec5bd0604101101r178b5c64qe09cb9feb4f81a48@mail.gmail.com>
Message-ID: <20060411003818.22481.201011782.divmod.quotient.12249@ohm>



On Mon, 10 Apr 2006 14:01:09 -0400, Timothy Fitz <timothyfitz at gmail.com> wrote:
>On 4/9/06, glyph at divmod.com <glyph at divmod.com> wrote:
>>  * twisted.test.test_udp.MulticastTestCase.testJoinFailure

>It seems that the 127.*.*.* range is considered a valid multicast
>address under windows, though I've found no functionality this exposes
>(and no documentation or mention of it online). Other addresses do
>properly fail.

Is there another private range that properly fails?  If so, would you mind creating a ticket for this...? :)



From jason at jasonlefkowitz.net  Tue Apr 11 10:05:33 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Tue, 11 Apr 2006 10:05:33 -0400
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
Message-ID: <443BB7AD.2070304@jasonlefkowitz.net>

Moe,

I've been trying to use your oscardemo.minimal.py, but it doesn't seem 
to work for me -- I launch it, and it asks for my AIM username & 
password, but after I provide them I don't see my AIM user show up on my 
buddy list (I'm logged in via IM client as another user, to test the 
script).  When I run oscardemo.py, though, it connects fine.

Is there something I have to do to oscardemo.minimal.py before it's 
runnable?  Or am I misunderstanding the way Words works (i.e. it is 
connected, but you need to do something more to have the bot show up on 
people's buddy lists)?

-- Jason



From moe at divmod.com  Tue Apr 11 10:27:14 2006
From: moe at divmod.com (Moe Aboulkheir)
Date: Tue, 11 Apr 2006 16:27:14 +0200
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
In-Reply-To: <443BB7AD.2070304@jasonlefkowitz.net>
Message-ID: <20060411142714.22481.194757601.divmod.quotient.12435@ohm>

Jason,

Maybe the example was a little too minimal :).  Slightly different version that will show the bot as being online:

http://divmod.org/users/moe/oscardemo.client-ready.py

Moe



From jason at jasonlefkowitz.net  Tue Apr 11 10:43:28 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Tue, 11 Apr 2006 10:43:28 -0400
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
Message-ID: <443BC090.2070908@jasonlefkowitz.net>

Moe -- this one works perfectly!  Thanks for putting up with my 
newbie-ism :)

-- Jason



From bgranger at scu.edu  Wed Apr 12 03:30:13 2006
From: bgranger at scu.edu (Brian Granger)
Date: Wed, 12 Apr 2006 00:30:13 -0700
Subject: [Twisted-Python] Transforming Exceptions for use with PB
Message-ID: <fa8579a40604120030q19b3d377r152d1af9164ae0d5@mail.gmail.com>

Hi,

I have a question about how Exceptions are handled by PB.

I am using Twisted to expose a python object (wrapped into a Twisted
Service) over a couple of network protocols (PB and XML-RPC).  I am
using interfaces/components/adapters to adapt my service into entities
that each protocol can use:

class IPerspectiveFunction(Interface):

    def remote_function(self, x):

class PerspectiveFunctionFromService(pb.Root):

    implements(IPerspectiveFunction)

    def __init__(self, service):
        self.service = service

    def remote_function(self, x):
        return self.service.function(x)     # The service returns a Deferred

self.service.function returns a Deferred, whose errbacks are fired
when an Exception is raised in self.service.function.

Here is my dilemma:

- The code in self.service.function that raises exceptions is in
another library that doesn't know about Twisted.  Thus the exceptions
are not sublcasses of pb.Error.

- Even if I did have control over these exceptions, I wouldn't want to
subclass pb.Error as I need to propagate the errors out to other (not
PB) protocols.

- I would like to detect certain types of exceptions (maybe using
trap()) and convert them to instances of pb.Error (or a subclass) so I
can send them over the line using PB.

The following almost works:

    def remote_function(self, x):
        d = self.service.function(x)     # The service returns a Deferred
        def transformFailure(f):
            return failure.Failure(pb.Error(f.printTraceback()))
        d.addErrback(transformFailure)
        return d

The other side gets the Error just fine, but the PB server still
prints the traceback and says "Peer will receive following PB
traceback:"  Why does PB handle it this way, when the Failure instance
that PB gets contains a pb.Error exception?

Any thoughts on how to transform general Failure instances to ones
that can be handled in a clean way by PB?  I guess there is amore
general question of how to transform Failure instances into things
that can be handled by various network protocols (such as XML-RPC or
even HTTP)

Thanks in advance.

Brian


Brian Granger
Santa Clara University
ellisonbg at gmail.com



From thomas at apestaart.org  Wed Apr 12 07:28:55 2006
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Wed, 12 Apr 2006 13:28:55 +0200
Subject: [Twisted-Python] Trial: State of the Union
In-Reply-To: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>
References: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>
Message-ID: <1144841335.19399.3.camel@otto.amantes>

Hi,

> 2. Trial Reactor (http://twistedmatrix.com/trac/ticket/1334)
> Jp has indicated that this is the best way for Trial to do cleanup
> after each test.

How does this work if currently a project chooses a specific reactor
because that's what the tests need ?

For example, some of our UI unit tests use the gtk2reactor/glib2reactor
because otherwise they can't run.  Same for some of our GStreamer-using
tests, which need a glib main loop.

Maybe whatever trial needs can be implemented as an IReactorIface or a
mixin instead ?

Thomas





From radix at twistedmatrix.com  Wed Apr 12 08:27:53 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 12 Apr 2006 08:27:53 -0400
Subject: [Twisted-Python] Trial: State of the Union
In-Reply-To: <1144841335.19399.3.camel@otto.amantes>
References: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>
	<1144841335.19399.3.camel@otto.amantes>
Message-ID: <60ed19d40604120527k300635e8g371fb6b0974c62f3@mail.gmail.com>

On 4/12/06, Thomas Vander Stichele <thomas at apestaart.org> wrote:
>
> Hi,
>
> > 2. Trial Reactor (http://twistedmatrix.com/trac/ticket/1334)
> > Jp has indicated that this is the best way for Trial to do cleanup
> > after each test.
>
> How does this work if currently a project chooses a specific reactor
> because that's what the tests need ?
>
> For example, some of our UI unit tests use the gtk2reactor/glib2reactor
> because otherwise they can't run.  Same for some of our GStreamer-using
> tests, which need a glib main loop.
>
> Maybe whatever trial needs can be implemented as an IReactorIface or a
> mixin instead ?



If some of your tests are reliant on one reactor, and some of them on
another, then you can't run them both in the same process even now. You will
have to specify the reactor globally, just as always.


Oh, now I think I know what you mean: "Is the Trial reactor only compatible
with the select reactor?"? As I understand it, the idea is to make it a
wrapper around whatever other reactor you globally choose.

--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060412/1da4f0bd/attachment.htm 

From jean-marc.pouchoulon at ac-montpellier.fr  Wed Apr 12 17:06:45 2006
From: jean-marc.pouchoulon at ac-montpellier.fr (jmp)
Date: Wed, 12 Apr 2006 23:06:45 +0200
Subject: [Twisted-Python] bad behaviour of ldaptor 0.0.39 with twisted
 2.2.0: "strange" characters in ldap logs
Message-ID: <443D6BE5.1020908@ac-montpellier.fr>


I have no answer with a search request,

here is my filter:

In [19]: searchFilter = ldapfilter.parseFilter('(uid=toto)')

The search result in ldap directory server logs shows me  why I have no 
answer:

scope=2 filter="(uid=*\82\09\80\07*toto)" attrs=ALL

With twisted 2.2
python /usr/lib/python2.4/site-packages/ldaptor/ldapfilter.py "(uid=toto)"
LDAPFilter_equalityMatch(attributeDesc=LDAPAttributeDescription(value='uid'), 
assertionValue=LDAPAssertionValue(value=LDAPFilter_substrings_final(value=LDAPFilter_substrings_initial(value='toto'))))

With twisted 1.3 I have not the same result

python /usr/local/lib/python2.4/site-packages/ldaptor/ldapfilter.py 
"(uid=toto)"
LDAPFilter_equalityMatch(attributeDesc=LDAPAttributeDescription(value='uid'), 
assertionValue=LDAPAssertionValue(value='toto'))

The same code works with  twisted 1.3
Any ideas to deal with that ?

thanks
jean-marc






From manlio_perillo at libero.it  Thu Apr 13 05:54:55 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu, 13 Apr 2006 07:54:55 -0200
Subject: [Twisted-Python] equivalent of flow.Cooperate for deferredGenerator
Message-ID: <443E1FEF.6060404@libero.it>

Hi.

What is the equivalent instruction for pause a deferredGenerator for n
seconds.


Thanks  Manlio Perillo



From matt at pollenation.net  Thu Apr 13 07:06:38 2006
From: matt at pollenation.net (Matt Goodall)
Date: Thu, 13 Apr 2006 12:06:38 +0100
Subject: [Twisted-Python] equivalent of flow.Cooperate for
	deferredGenerator
In-Reply-To: <443E1FEF.6060404@libero.it>
References: <443E1FEF.6060404@libero.it>
Message-ID: <443E30BE.8090706@pollenation.net>

Manlio Perillo wrote:
> Hi.
> 
> What is the equivalent instruction for pause a deferredGenerator for n
> seconds.

I'm not sure what Cooperate actually does but if you just want to put a
deferredGenerator to sleep for some period of time then something like
this (untested) should work:

    seconds = 5
    d = defer.Deferred()
    reactor.callLater(seconds, lambda: d.callback(None))
    d = defer.waitForDeferred(d)
    yield d
    d.getResult()

That's ugly, but pulling the first 3 or 4 lines of that into a function
would tidy it up a lot.

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt at pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \          Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.



From manlio_perillo at libero.it  Fri Apr 14 14:54:49 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 16:54:49 -0200
Subject: [Twisted-Python] IReactorCore.iterate docstring
Message-ID: <443FEFF9.8050605@libero.it>

"""Run the main loop's I/O polling function for a period of time.

This is most useful in applications where the UI is being drawn "as
fast as possible", such as games. All pending IDelayedCalls will be called.
The reactor must have been started (via the run() method) prior to any
invocations of this method. It must also be stopped manually after the
last call to this method (via the stop() method). This method is not
re-entrant: you must not call it recursively; in particular, you must
not call it while the reactor is running."""


I'm not sure to understand this:
"The reactor must have been started" and
"you must not call it while the reactor is running"




Thanks and regards  Manlio Perillo



From manlio_perillo at libero.it  Fri Apr 14 15:15:25 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 17:15:25 -0200
Subject: [Twisted-Python] 
	reactor.addSystemEventTrigger("before", "shutdown", self.logout)
Message-ID: <443FF4CD.3090509@libero.it>

Hi.

I would like to have a function be called at the very end of the reactor
lifetime.

I have tried with the statement in the subject, where self.logout sends
a packet via UDP (self is an instance of a class derived from
DatagramProtocol).

But this seems to be not allowed.
I obtain:

Traceback (most recent call last):
File "...\twisted\python\log.py",  line 53, in callWithLogger

  	[...]

--- <exception caught here> ---
File "...\twisted\internet\selectreactor.py", line 139, in doReadOrWrite
  why = getattr(selectable, method)()
File "...\twisted\internet\udp.py", line 114, in doRead
  data, addr = self.socket.recvfrom(self.maxPacketSize)
  exceptions.AttributeError: 'Port' object has no attribute 'socket'


Traceback (most recent call last):
File "justmyscript.py", line 79, in ?
  reactor.run()

	[...]

--- <exception caught here> ---
File "...\twisted\python\log.py", line 53, in callWithLogger
  return callWithContext({"system": lp}, func, *args, **kw)
File "...\twisted\python\log.py", line 38, in callWithContext
  return context.call({ILogContext: newCtx}, func, *args, **kw)
File "...\twisted\python\context.py", line 59, in callWithContext
  return self.currentContext().callWithContext(ctx, func, *args, **kw)
File "...\twisted\python\context.py", line 37, in callWithContext
  return func(*args,**kw)
File "...\twisted\internet\selectreactor.py", line 149, in doReadOrWrite
  self._disconnectSelectable(selectable, why, method=="doRead")
File "...\twisted\internet\posixbase.py", line 256, in _disconnectSelectable
  selectable.connectionLost(failure.Failure(why))
File "...\twisted\internet\udp.py", line 207, in connectionLost
  self.protocol.doStop()
File "...\twisted\internet\protocol.py", line 490, in doStop
  assert self.numPorts > 0
  exceptions.AssertionError:



This means, in short, that in a shutdown event I can't use the reactor?
I think that this should be documented.




Thanks and regards  Manlio Perillo



From exarkun at divmod.com  Fri Apr 14 17:29:00 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 14 Apr 2006 17:29:00 -0400
Subject: [Twisted-Python] IReactorCore.iterate docstring
In-Reply-To: <443FEFF9.8050605@libero.it>
Message-ID: <20060414212900.22481.832460287.divmod.quotient.13577@ohm>

On Fri, 14 Apr 2006 16:54:49 -0200, Manlio Perillo <manlio_perillo at libero.it> wrote:
>"""Run the main loop's I/O polling function for a period of time.
>
>This is most useful in applications where the UI is being drawn "as
>fast as possible", such as games. All pending IDelayedCalls will be called.
>The reactor must have been started (via the run() method) prior to any
>invocations of this method. It must also be stopped manually after the
>last call to this method (via the stop() method). This method is not
>re-entrant: you must not call it recursively; in particular, you must
>not call it while the reactor is running."""
>
>
>I'm not sure to understand this:
>"The reactor must have been started" and
>"you must not call it while the reactor is running"
>

The docstring should actually read:

    """
    Not a public method.  Do not call this method.
    """

Jean-Paul



From exarkun at divmod.com  Fri Apr 14 17:32:28 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 14 Apr 2006 17:32:28 -0400
Subject: [Twisted-Python] 
	reactor.addSystemEventTrigger("before", "shutdown", self.logout)
In-Reply-To: <443FF4CD.3090509@libero.it>
Message-ID: <20060414213228.22481.121809678.divmod.quotient.13579@ohm>

On Fri, 14 Apr 2006 17:15:25 -0200, Manlio Perillo <manlio_perillo at libero.it> wrote:
>Hi.
>
>I would like to have a function be called at the very end of the reactor
>lifetime.
>
>I have tried with the statement in the subject, where self.logout sends
>a packet via UDP (self is an instance of a class derived from
>DatagramProtocol).
>

Services or the underlying APIs they rely on (addSystemEventTrigger) are the correct way to go about this.

>But this seems to be not allowed.
>I obtain:
>
>Traceback (most recent call last):
>File "...\twisted\python\log.py",  line 53, in callWithLogger
>
>  	[...]
>
>--- <exception caught here> ---
>File "...\twisted\internet\selectreactor.py", line 139, in doReadOrWrite
>  why = getattr(selectable, method)()
>File "...\twisted\internet\udp.py", line 114, in doRead
>  data, addr = self.socket.recvfrom(self.maxPacketSize)
>  exceptions.AttributeError: 'Port' object has no attribute 'socket'
>
>
>Traceback (most recent call last):
>File "justmyscript.py", line 79, in ?
>  reactor.run()
>
>	[...]
>
>--- <exception caught here> ---
>File "...\twisted\python\log.py", line 53, in callWithLogger
>  return callWithContext({"system": lp}, func, *args, **kw)
>File "...\twisted\python\log.py", line 38, in callWithContext
>  return context.call({ILogContext: newCtx}, func, *args, **kw)
>File "...\twisted\python\context.py", line 59, in callWithContext
>  return self.currentContext().callWithContext(ctx, func, *args, **kw)
>File "...\twisted\python\context.py", line 37, in callWithContext
>  return func(*args,**kw)
>File "...\twisted\internet\selectreactor.py", line 149, in doReadOrWrite
>  self._disconnectSelectable(selectable, why, method=="doRead")
>File "...\twisted\internet\posixbase.py", line 256, in _disconnectSelectable
>  selectable.connectionLost(failure.Failure(why))
>File "...\twisted\internet\udp.py", line 207, in connectionLost
>  self.protocol.doStop()
>File "...\twisted\internet\protocol.py", line 490, in doStop
>  assert self.numPorts > 0
>  exceptions.AssertionError:
>
>
>
>This means, in short, that in a shutdown event I can't use the reactor?
>I think that this should be documented.
>

You can, and many applications do.  Perhaps you have found a bug, or perhaps you are using system event triggers improperly.  Could you post a minimal, complete example which will reproduce this behavior?

Jean-Paul



From manlio_perillo at libero.it  Fri Apr 14 17:46:41 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 19:46:41 -0200
Subject: [Twisted-Python] IReactorCore.iterate docstring
In-Reply-To: <20060414212900.22481.832460287.divmod.quotient.13577@ohm>
References: <20060414212900.22481.832460287.divmod.quotient.13577@ohm>
Message-ID: <44401841.3010101@libero.it>

Jean-Paul Calderone ha scritto:
> On Fri, 14 Apr 2006 16:54:49 -0200, Manlio Perillo
> <manlio_perillo at libero.it> wrote:
>> """Run the main loop's I/O polling function for a period of time.
>>
>> This is most useful in applications where the UI is being drawn "as
>> fast as possible", such as games. All pending IDelayedCalls will be
>> called.
>> The reactor must have been started (via the run() method) prior to any
>> invocations of this method. It must also be stopped manually after the
>> last call to this method (via the stop() method). This method is not
>> re-entrant: you must not call it recursively; in particular, you must
>> not call it while the reactor is running."""
>>
>>
>> I'm not sure to understand this:
>> "The reactor must have been started" and
>> "you must not call it while the reactor is running"
>>
> 
> The docstring should actually read:
> 
>    """
>    Not a public method.  Do not call this method.
>    """
> 

Ok, thanks.
But why the docstring don't say this or, better, why do not remove it
from the interface?


There are some other cases of this?



Regards  Manlio Perillo



From manlio_perillo at libero.it  Fri Apr 14 18:34:23 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 20:34:23 -0200
Subject: [Twisted-Python] 	reactor.addSystemEventTrigger("before",
	"shutdown", self.logout)
In-Reply-To: <20060414213228.22481.121809678.divmod.quotient.13579@ohm>
References: <20060414213228.22481.121809678.divmod.quotient.13579@ohm>
Message-ID: <4440236F.8090200@libero.it>

Jean-Paul Calderone ha scritto:
> On Fri, 14 Apr 2006 17:15:25 -0200, Manlio Perillo
> <manlio_perillo at libero.it> wrote:
>> Hi.
>>
>> I would like to have a function be called at the very end of the reactor
>> lifetime.
>>
>> I have tried with the statement in the subject, where self.logout sends
>> a packet via UDP (self is an instance of a class derived from
>> DatagramProtocol).
>>
> 
> Services or the underlying APIs they rely on (addSystemEventTrigger) are
> the correct way to go about this.
> 

Ok.

>> But this seems to be not allowed.
>> I obtain:
>>
> [...]
>>
>> This means, in short, that in a shutdown event I can't use the reactor?
>> I think that this should be documented.
>>
> 
> You can, and many applications do.  Perhaps you have found a bug, or
> perhaps you are using system event triggers improperly. Could you post
> a minimal, complete example which will reproduce this behavior?
> 

Sure!
My system is Windows XP SP2, Python 2.4.3, Twisted 2.2.0


##########
import sys

from twisted.python import log

from twisted.internet.protocol import DatagramProtocol
from twisted.internet import defer, reactor


class Server(DatagramProtocol):
    def datagramReceived(self, data, addr):
        print "server: received from %s:%d" % addr, data
        self.transport.write("LOGGED OUT", addr)


class Client(DatagramProtocol):
    def __init__(self):
        self.deferred = defer.Deferred()

    def startProtocol(self):
        self.transport.connect("127.0.0.1", 9000)

        reactor.addSystemEventTrigger("before", "shutdown", self.logout)

    def connectionRefused(self):
        print "unable to connect"

    def datagramReceived(self, data, addr):
        print "client: received from %s:%d" % addr, data
        self.deferred.callback(data)

    def logout(self):
        self.transport.write("LOGOUT")

        return self.deferred



reactor.listenUDP(9000, Server())
reactor.listenUDP(0, Client())

reactor.callLater(2, reactor.stop)

log.startLogging(sys.stdout)
reactor.run()

#############



The problem seems to be with the response.
There are no problems if logout does not return a deferred (but in this
case the client does not sees the LOGGED OUT response).


Is this an improper use of system event triggers?



Thanks and regards  Manlio Perillo



From matt.feifarek+twisted at gmail.com  Fri Apr 14 18:56:10 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Fri, 14 Apr 2006 18:56:10 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
Message-ID: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>

I've been using twisted for a couple of years, and am re-writing my
application yet-again to make it even more twisty, so I'm trying to use the
persistence mechanisms that come from services and applications, and I have
hit a snag.

I've conformed my application to the details of the tutorial in the docs
(and I see the demonstrated method of making a 'plugin' is deprecated, and I
get that message after registering my app and running mktap).

First question:
The deprecation warning tells me to look in twisted.plugin... but I don't
see much in the way of docs in there. Where can I learn what I should do?

Second question:
Even though I'm using a fresh Twisted 2.2, installed from the tarball, I
don't have any manpages... not for mktap or twistd, so the docs tell me to
look in the manpage, but I can't (I'm on Ubuntu Breezy, FWIW). I see the man
files themselves in my twisted source distribution, but they don't appear to
be installed when I install twisted.

Third question:
I'm able to make a .tap file, run it, and send it ^C to shut it down. I get
the [app]-shutdown.tap file, but when I try to run that file with 'twistd -f
wrangler-shutdown.tap' I get a problem with the re-building of my objects.
There's an attribute error, from one of the classes that's a part of my
application.

Do I have to write my application in some way to get it to persist and
unpersist properly? There's nothing in my app that isn't pickle-able... it's
just instances and dictionaries, nothing like open files or database
connections.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060414/3fc77351/attachment.htm 

From coder_infidel at hotmail.com  Sat Apr 15 05:13:41 2006
From: coder_infidel at hotmail.com (Luke Dunstan)
Date: Sat, 15 Apr 2006 17:13:41 +0800
Subject: [Twisted-Python] Documentation download
Message-ID: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>


Hi,

I installed Twisted_NoDocs-2.1.0.win32-py2.4.exe. The installer seems to
have put a couple of broken shortcuts on my start menu pointing to a
directory TwistedDocs that doesn't exist. For example:

C:\Python24\lib\site-packages\TwistedDocs\howto\index.xhtml

The real question though is: where can I download the HTML documentation for
this release?

Luke



From manlio_perillo at libero.it  Sat Apr 15 06:02:21 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat, 15 Apr 2006 08:02:21 -0200
Subject: [Twisted-Python] deferredGenerator ad errbacks
Message-ID: <4440C4AD.4000802@libero.it>

Hi again!

I have started to use deferredGenerator:


from twisted.internet import defer, reactor


def waitFor(seconds):
    """It would be nice to have this in twisted.internet.defer.
       Thanks to Matt Goodall.
    """

    d = defer.Deferred()
    reactor.callLater(seconds, lambda: d.callback(None))

    return defer.waitForDeferred(d)


@defer.deferredGenerator
def generator():
    d = defer.waitForDeferred(defer.succeed(1))
    yield d

    d = defer.waitForDeferred(defer.fail(Exception("error 1")))
    yield d

#    raise Exception("error 2")

    yield waitFor(3)

    d = defer.waitForDeferred(defer.succeed(2))
    yield d



def callback(result=None):
    print result


def errback(reason):
    print reason


g = generator()
g.addCallbacks(callback, errback)
reactor.run()



The "problem" is that my errback is never called.
Is this a limitation of the deferred Generators?





Thanks   Manlio Perillo



From radix at twistedmatrix.com  Sat Apr 15 09:46:44 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 15 Apr 2006 09:46:44 -0400
Subject: [Twisted-Python] deferredGenerator ad errbacks
In-Reply-To: <4440C4AD.4000802@libero.it>
References: <4440C4AD.4000802@libero.it>
Message-ID: <60ed19d40604150646y797a77b0s96ddc681b676e2e5@mail.gmail.com>

On 4/15/06, Manlio Perillo <manlio_perillo at libero.it> wrote:
>
> from twisted.internet import defer, reactor
>
>
> def waitFor(seconds):
>     """It would be nice to have this in twisted.internet.defer.
>        Thanks to Matt Goodall.
>     """
>
>     d = defer.Deferred()
>     reactor.callLater(seconds, lambda: d.callback(None))
>
>     return defer.waitForDeferred(d)
>
>
> @defer.deferredGenerator
> def generator():
>     d = defer.waitForDeferred(defer.succeed(1))
>     yield d
>
>     d = defer.waitForDeferred(defer.fail(Exception("error 1")))
>     yield d
>
> #    raise Exception("error 2")
>
>     yield waitFor(3)


You want to getResult() the result from waitFor().



    d = defer.waitForDeferred(defer.succeed(2))

    yield d


You want to getResult() the result from waitForDeferred.

getResult() is the thing that (either returns a result or) raises any
exceptions that a Deferred has failed with, so it's important to always call
it.


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060415/6b6da065/attachment.htm 

From grimmtooth at gmail.com  Sat Apr 15 10:29:20 2006
From: grimmtooth at gmail.com (Jeff Grimmett)
Date: Sat, 15 Apr 2006 10:29:20 -0400
Subject: [Twisted-Python] Documentation download
In-Reply-To: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
Message-ID: <8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>

On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:

> The real question though is: where can I download the HTML documentation
> for this release?
>

http://twistedmatrix.com/trac/

There's a link or three about halfway down.

--
"Ladies and gentlemen, there's nothing to worry about ... but please keep
your heads down." - The Muppet Show

Best,

    Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060415/69e09d4c/attachment.htm 

From manlio_perillo at libero.it  Sat Apr 15 11:21:39 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat, 15 Apr 2006 13:21:39 -0200
Subject: [Twisted-Python] deferredGenerator ad errbacks
In-Reply-To: <60ed19d40604150646y797a77b0s96ddc681b676e2e5@mail.gmail.com>
References: <4440C4AD.4000802@libero.it>
	<60ed19d40604150646y797a77b0s96ddc681b676e2e5@mail.gmail.com>
Message-ID: <44410F83.8050905@libero.it>

Christopher Armstrong ha scritto:
> On 4/15/06, *Manlio Perillo* <manlio_perillo at libero.it
> <mailto:manlio_perillo at libero.it>> wrote:
> 
>     from twisted.internet import defer, reactor
> 
> [...]
>     @defer.deferredGenerator
>     def generator():
>         d = defer.waitForDeferred( defer.succeed(1))
>         yield d
> 
>         d = defer.waitForDeferred(defer.fail(Exception("error 1")))
>         yield d
> 
> [...]
>
> getResult() is the thing that (either returns a result or) raises any
> exceptions that a Deferred has failed with, so it's important to always
> call it.
> 

Ok, thanks; I'm sorry to have missed it.


Regards  Manlio Perillo



From phil at bubblehouse.org  Sat Apr 15 11:20:26 2006
From: phil at bubblehouse.org (Phil Christensen)
Date: Sat, 15 Apr 2006 11:20:26 -0400
Subject: [Twisted-Python] debian weirdness
Message-ID: <9B810C2D-D6FD-45F1-ABB4-E67426F635AC@bubblehouse.org>

hey all...

just dropping a line to see if any of you have noticed a strange  
buglet that i've seen on debian a number of times.

basically, after installing twisted (SVN trunk, not a package), when  
i use apt for various other things, i'll get this error:

[jupiter:~/WebServer/jupiter.bubblehouse.org] phil% sudo apt-get  
install trac
Reading Package Lists... Done
Building Dependency Tree... Done
[blah blah blah]
(Reading database ... 40322 files and directories currently installed.)
Unpacking trac (from .../archives/trac_0.9.4-2_all.deb) ...
Setting up trac (0.9.4-2) ...
Compiling /usr/lib/python2.3/site-packages/twisted/test/ 
stdio_test_halfclose.py ...
   File "/usr/lib/python2.3/site-packages/twisted/test/ 
stdio_test_halfclose.py", line 20
     ???
     ^
SyntaxError: invalid syntax
[blah blah blah]

this isn't a big deal, because i can just go in and edit the file,  
removing what appears to be simply three question-marks, but i  
thought this was pretty strange. it's doesn't seem to be in the  
original source in SVN, and i've noticed this occurring on both  
Debian and Ubuntu, on various servers.

it obviously doesn't seem like a Twisted problem, but I can't think  
of what could be happening here...I've seen this on well-travelled  
installations like my server, as well as on freshly-installed  
machines at work.

just wondering if anyone else has encountered this...

-phil



From radix at twistedmatrix.com  Sat Apr 15 11:31:03 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 15 Apr 2006 11:31:03 -0400
Subject: [Twisted-Python] debian weirdness
In-Reply-To: <9B810C2D-D6FD-45F1-ABB4-E67426F635AC@bubblehouse.org>
References: <9B810C2D-D6FD-45F1-ABB4-E67426F635AC@bubblehouse.org>
Message-ID: <60ed19d40604150831w738a6ae5tffb9d5b0a45cd01e@mail.gmail.com>

On 4/15/06, Phil Christensen <phil at bubblehouse.org> wrote:


Compiling /usr/lib/python2.3/site-packages/twisted/test/
> stdio_test_halfclose.py ...
>    File "/usr/lib/python2.3/site-packages/twisted/test/
> stdio_test_halfclose.py", line 20
>      ???
>      ^
> SyntaxError: invalid syntax
> [blah blah blah]
>
> this isn't a big deal, because i can just go in and edit the file,
> removing what appears to be simply three question-marks, but i
> thought this was pretty strange. it's doesn't seem to be in the
> original source in SVN, and i've noticed this occurring on both
> Debian and Ubuntu, on various servers.



It _is_ in the original source in SVN, and that file appears to be unused.
It was committed by exarkun in revision 16374 with the commit message
"mumble". I guess it should be removed, unless it *is* serving some
purpose...


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060415/fa92837b/attachment.htm 

From exarkun at divmod.com  Sat Apr 15 11:54:47 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 15 Apr 2006 11:54:47 -0400
Subject: [Twisted-Python] debian weirdness
In-Reply-To: <60ed19d40604150831w738a6ae5tffb9d5b0a45cd01e@mail.gmail.com>
Message-ID: <20060415155447.22481.1411291846.divmod.quotient.13838@ohm>

On Sat, 15 Apr 2006 11:31:03 -0400, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>On 4/15/06, Phil Christensen <phil at bubblehouse.org> wrote:
>
>
>Compiling /usr/lib/python2.3/site-packages/twisted/test/
>> stdio_test_halfclose.py ...
>>    File "/usr/lib/python2.3/site-packages/twisted/test/
>> stdio_test_halfclose.py", line 20
>>      ???
>>      ^
>> SyntaxError: invalid syntax
>> [blah blah blah]
>>
>> this isn't a big deal, because i can just go in and edit the file,
>> removing what appears to be simply three question-marks, but i
>> thought this was pretty strange. it's doesn't seem to be in the
>> original source in SVN, and i've noticed this occurring on both
>> Debian and Ubuntu, on various servers.
>
>
>
>It _is_ in the original source in SVN, and that file appears to be unused.
>It was committed by exarkun in revision 16374 with the commit message
>"mumble". I guess it should be removed, unless it *is* serving some
>purpose...
>

Actually, someone should finish it, since there is otherwise no test coverage of halfclose stdio.

Jean-Paul



From mike at mkp.ca  Sat Apr 15 12:22:37 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Sat, 15 Apr 2006 12:22:37 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
Message-ID: <200604151222.37968.mike@mkp.ca>

On Friday 14 April 2006 18:56, Matt Feifarek wrote:
> I've been using twisted for a couple of years, and am re-writing my
> application yet-again to make it even more twisty, so I'm trying to use the
> persistence mechanisms that come from services and applications, and I have
> hit a snag.

I don't have any insight on your particular problems, but the wisdom of the 
list seems to be that the automatic persistence features are not intended for 
production-grade applications, but rather for debugging and development.  
Most authors I'd trust have stated that you're better off to save your state 
yourself on shutdown rather than rely upon the app-shutdown.tap turds.

There has also been debate about whether or not mktap plugins are even a good 
idea at all for new applications.  At any rate, I don't think it receives the 
same attention from the core developers that it once did.  The moral seems to 
be that just because something is provided by Twisted does not mean it's a 
best practice.

Mike.



From coder_infidel at hotmail.com  Sat Apr 15 14:26:17 2006
From: coder_infidel at hotmail.com (Luke Dunstan)
Date: Sun, 16 Apr 2006 02:26:17 +0800
Subject: [Twisted-Python] Documentation download
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
	<8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>
Message-ID: <BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>


OK, perhaps I was not specific enough. I have already found the links to the online manual, API reference, etc., but where do I actually download this HTML documentation as a single zip file or tarball?

Luke

  ----- Original Message ----- 
  From: Jeff Grimmett 
  To: Twisted general discussion 
  Sent: Saturday, April 15, 2006 10:29 PM
  Subject: Re: [Twisted-Python] Documentation download


  On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:


    The real question though is: where can I download the HTML documentation for this release?


  http://twistedmatrix.com/trac/

  There's a link or three about halfway down. 

  -- 
  "Ladies and gentlemen, there's nothing to worry about ... but please keep your heads down." - The Muppet Show

  Best,

      Jeff 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060416/57c16e48/attachment.htm 

From grimmtooth at gmail.com  Sat Apr 15 18:44:13 2006
From: grimmtooth at gmail.com (Jeff Grimmett)
Date: Sat, 15 Apr 2006 18:44:13 -0400
Subject: [Twisted-Python] Documentation download
In-Reply-To: <BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
	<8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>
	<BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>
Message-ID: <8f4623fb0604151544i1974836exb7819e4808d6950f@mail.gmail.com>

On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:
>
>
> OK, perhaps I was not specific enough. I have already found the links to
> the online manual, API reference, etc., but where do I actually download
> this HTML documentation as a single zip file or tarball?
>

Ah.  I don't think there is one as of yet. Although if you check out the
subversion repository, most (if not all) of it appears to be in the docs
directory.

--
"Ladies and gentlemen, there's nothing to worry about ... but please keep
your heads down." - The Muppet Show

Best,

    Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060415/3471b78e/attachment.htm 

From grimmtooth at gmail.com  Sat Apr 15 18:47:07 2006
From: grimmtooth at gmail.com (Jeff Grimmett)
Date: Sat, 15 Apr 2006 18:47:07 -0400
Subject: [Twisted-Python] Broken link
Message-ID: <8f4623fb0604151547l428ce558s881cb3ea551a3827@mail.gmail.com>

I noticed today that the link to the registration page in
/doc/fun/register.html is broken. Bug or feature?

--
"Ladies and gentlemen, there's nothing to worry about ... but please keep
your heads down." - The Muppet Show

Best,

    Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060415/87f26bdb/attachment.htm 

From glyph at divmod.com  Sat Apr 15 21:38:11 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 15 Apr 2006 21:38:11 -0400
Subject: [Twisted-Python] debian weirdness
In-Reply-To: <20060415155447.22481.1411291846.divmod.quotient.13838@ohm>
Message-ID: <20060416013811.22481.298816438.divmod.quotient.13959@ohm>



On Sat, 15 Apr 2006 11:54:47 -0400, Jean-Paul Calderone <exarkun at divmod.com> wrote:
>On Sat, 15 Apr 2006 11:31:03 -0400, Christopher Armstrong 
><radix at twistedmatrix.com> wrote:
>>On 4/15/06, Phil Christensen <phil at bubblehouse.org> wrote:

>>>      ???
>>>      ^

>>It _is_ in the original source in SVN, and that file appears to be unused.
>>It was committed by exarkun in revision 16374 with the commit message
>>"mumble". I guess it should be removed, unless it *is* serving some
>>purpose...

>Actually, someone should finish it, since there is otherwise no test 
>coverage of halfclose stdio.

It doesn't look like any useful code lives in that file, though - wouldn't it be a better idea to remove it and file a ticket?



From glyph at divmod.com  Sat Apr 15 21:41:06 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 15 Apr 2006 21:41:06 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604151222.37968.mike@mkp.ca>
Message-ID: <20060416014106.22481.1124272888.divmod.quotient.13960@ohm>


On Sat, 15 Apr 2006 12:22:37 -0400, Mike Pelletier <mike at mkp.ca> wrote:

>The moral seems to
>be that just because something is provided by Twisted does not mean it's a
>best practice.

Hmm.  This is unfortunate, but since it's unlikely to change soon (many external projects ended up picking up and using bits of Twisted that we ultimately decided are bad ideas) we should probably start documenting "accepted best practices" somewhere.

I suggest a wiki page, linked from the front page, since the idea of "best practice" is an ongoing discussion with some disagreement and some consensus -- probably more appropriate for the wiki format than anything else we are currently using wiki for.



From exarkun at twistedmatrix.com  Sun Apr 16 01:05:10 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 16 Apr 2006 05:05:10 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1145163910.3.1404309431@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-09 through 2006-04-16
Bugs opened: 18    Bugs closed: 9  Total open bugs: 589 (+9)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +5  |Highest:  -1          |Conch:               +1  
|Enhancement:  +5  |Normal:  +10          |Core:                +1  
|Task:         -1  |Low:      +0          |Mail:                +1  
                                          |Pydoctor:            +6  
                                          |Release Management:  +1  
                                          |Trial:               +2  
                                          |Web2:                -1  
                                          |Website:             -1  
                                          |Words:               -1  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1628] TwistedEmacs should be in emacs/ in Twisted (opened by jml) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1628

[#1634] Add ralphm to the matrix (opened by ralphm)
    defect          release management http://twistedmatrix.com/trac/ticket/1634

[#1637] [PATCH] twisted.mail examples use deprecated imports (opened by jerub)
    defect          mail       http://twistedmatrix.com/trac/ticket/1637

                    ===== Normal =====
[#1629] Unjellyable.unjellyFor does not return self (opened by ml.flex)
    defect          core       http://twistedmatrix.com/trac/ticket/1629

[#1630] trial test hangs if using the twisted enterprise connection pool (opened by harshaw)
    defect          trial      http://twistedmatrix.com/trac/ticket/1630

[#1631] Make tables showing listings of members of packages, classes, etc, sortable (opened by moof)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1631

[#1632] "browse Twisted conch tickets" link wrong (opened by slamb) (CLOSED, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/1632

[#1633] Undocumented dependency on "Crypto" (opened by slamb)
    defect          conch      http://twistedmatrix.com/trac/ticket/1633

[#1635] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1635

[#1636] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1636

[#1638] provide a way for test collector to find custom test suites (opened by acapnotic)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1638

[#1639] Full package and class hierarchy pages. (opened by jknight)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1639

[#1640] Child process environment cannot be fully overridden on Windows (opened by bwh)
    defect          core       http://twistedmatrix.com/trac/ticket/1640

[#1641] sort subclasses in pydoctor's class hierarchy pages (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1641

[#1642] pydoctor's nevowhtml needs tests (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1642

[#1643] package listings in pydoctor should be alpha-sorted (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1643

[#1645] force the rest of win32-select tests to pass (opened by glyph)
    defect          core       http://twistedmatrix.com/trac/ticket/1645

                    ===== Low =====
[#1644] pydoctor's nevowhtml is probably easy to speed up (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1644



Closed Bugs
______________________
                    ===== Highest =====
[#1560] Death to util.wait() (opened by jml, closed by jml, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1560

[#1628] TwistedEmacs should be in emacs/ in Twisted (opened by jml, closed by jml, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1628

[#1612] Words (jabber code) still uses deprecated components API (opened by itamarst, closed by ralphm, fixed)
    defect          words      http://twistedmatrix.com/trac/ticket/1612

[#1615] stdio tests should be run for all reactors (opened by exarkun, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1615

                    ===== Normal =====
[#1632] "browse Twisted conch tickets" link wrong (opened by slamb, closed by exarkun, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/1632

[#1635] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm, closed by ralphm, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1635

[#1596] Leftover use of childNotFound() in t.w2.twcgi.CGIDirectory (opened by grimmtooth, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1596

[#1320] Show current version of projects in sidebar, projects page (opened by itamarst, closed by exarkun, wontfix)
    enhancement     website    http://twistedmatrix.com/trac/ticket/1320

                    ===== Low =====
[#1487] Make LoopingCall deal with deferred returning callables (opened by ralphm, closed by ralphm, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1487





From glyph at divmod.com  Sun Apr 16 05:19:13 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 16 Apr 2006 05:19:13 -0400
Subject: [Twisted-Python] Weekly Bug Summary
In-Reply-To: 1145163910.3.1404309431@twistedmatrix.com
Message-ID: <20060416091913.22481.2124644748.divmod.quotient.14064@ohm>

On Sun, 16 Apr 2006 05:05:10 -0000, exarkun at twistedmatrix.com wrote:

>                                          |Pydoctor:            +6

Does pydoctor not have its own bugtracker?



From glyph at divmod.com  Sun Apr 16 05:26:00 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 16 Apr 2006 05:26:00 -0400
Subject: [Twisted-Python] win32 now an officially supported platform
In-Reply-To: 0
Message-ID: <20060416092600.22481.620597867.divmod.quotient.14066@ohm>

As of r16628, 'trial twisted' on a stock win32 twisted installation will actually succeed and give you a PASSED at the end of it.

I went to a lot of trouble to get things into this state, so I would appreciate it if everyone could keep it this way.

More accurately: I will personally revert any changes that cause real failures on win32.  I say "real" failures because (as the buildbot history immediately following this commit amply shows) the win32 buildbot itself seems kind of flaky; some of this may have to do with the slave itself running a released version of Twisted, I'm not sure.  Any other buildbot enforcers / reviewers should be aware that it fails intermittently and give it a few chances to build to make sure the failure is legitimate, especially if the failure is a timeout or a buildbot disconnect.

Finally, I'd like to thank everyone who provided me with help, reviews, commentary, and test fixes to get to this state, especially jerub, exarkun, foom, and jml.

Now, let's get a new release out so we can upgrade that buildbot :).



From ost12666 at gmail.com  Sun Apr 16 06:58:30 2006
From: ost12666 at gmail.com (Ofer Shem Tov)
Date: Sun, 16 Apr 2006 12:58:30 +0200
Subject: [Twisted-Python] Status of twisted.web2?
Message-ID: <e89aa560604160358h469022fbj5cb4b7934807f37d@mail.gmail.com>

Hello,

I need to implement a web server with authentication and SSL (so I
guess basic authentication is good enough) and to be able to upload
big files to the server.

Is web2 ready for that (I assume twisted.web is not good for that), if
not is there a new version coming soon (release or CVS head) or can I
add this stuff my self?

thanks



From exarkun at divmod.com  Sun Apr 16 10:56:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 16 Apr 2006 10:56:32 -0400
Subject: [Twisted-Python] Status of twisted.web2?
In-Reply-To: <e89aa560604160358h469022fbj5cb4b7934807f37d@mail.gmail.com>
Message-ID: <20060416145632.22481.1012738303.divmod.quotient.14142@ohm>

On Sun, 16 Apr 2006 12:58:30 +0200, Ofer Shem Tov <ost12666 at gmail.com> wrote:
>Hello,
>
>I need to implement a web server with authentication and SSL (so I
>guess basic authentication is good enough) and to be able to upload
>big files to the server.
>
>Is web2 ready for that (I assume twisted.web is not good for that), if

Why do you assume that?

Followups to twisted-web at twistedmatrix.com, please.

>not is there a new version coming soon (release or CVS head) or can I
>add this stuff my self?
>
>thanks
>

Jean-Paul



From mwh at python.net  Mon Apr 17 04:20:58 2006
From: mwh at python.net (Michael Hudson)
Date: Mon, 17 Apr 2006 09:20:58 +0100
Subject: [Twisted-Python] Re: Weekly Bug Summary
References: <20060416091913.22481.2124644748.divmod.quotient.14064@ohm>
Message-ID: <2mvet8lij9.fsf@starship.python.net>

glyph at divmod.com writes:

> On Sun, 16 Apr 2006 05:05:10 -0000, exarkun at twistedmatrix.com wrote:
>
>>                                          |Pydoctor:            +6
>
> Does pydoctor not have its own bugtracker?

No.  As its only current use-case is documenting twisted, I've been
asking people to file tickets in tm.com's trac and after a few piled
up in the website component, exarkun added a pydoctor component.

Does this bother you somehow?

Cheers,
mwh

-- 
  Premature optimization is the root of all evil.
       -- Donald E. Knuth, Structured Programming with goto Statements




From glyph at divmod.com  Mon Apr 17 09:59:40 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 09:59:40 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <2mvet8lij9.fsf@starship.python.net>
Message-ID: <20060417135940.22481.665001409.divmod.quotient.14447@ohm>



On Mon, 17 Apr 2006 09:20:58 +0100, Michael Hudson <mwh at python.net> wrote:
>glyph at divmod.com writes:
>> Does pydoctor not have its own bugtracker?
>
>No.  As its only current use-case is documenting twisted, I've been
>asking people to file tickets in tm.com's trac and after a few piled
>up in the website component, exarkun added a pydoctor component.

That makes sense.

>Does this bother you somehow?

Nope.  Just seems like yet another indication that it should really be lore --api ;-)  Or rather, lore, like trial, should be able to take a file (HTML or Python) or module name.



From mwh at python.net  Mon Apr 17 10:30:22 2006
From: mwh at python.net (Michael Hudson)
Date: Mon, 17 Apr 2006 15:30:22 +0100
Subject: [Twisted-Python] Re: Weekly Bug Summary
References: <2mvet8lij9.fsf@starship.python.net>
	<20060417135940.22481.665001409.divmod.quotient.14447@ohm>
Message-ID: <2m8xq4l1fl.fsf@starship.python.net>

glyph at divmod.com writes:

> On Mon, 17 Apr 2006 09:20:58 +0100, Michael Hudson <mwh at python.net> wrote:
>>glyph at divmod.com writes:
>>> Does pydoctor not have its own bugtracker?
>>
>>No.  As its only current use-case is documenting twisted, I've been
>>asking people to file tickets in tm.com's trac and after a few piled
>>up in the website component, exarkun added a pydoctor component.
>
> That makes sense.

Good.

>>Does this bother you somehow?
>
> Nope.  Just seems like yet another indication that it should really
> be lore --api ;-) Or rather, lore, like trial, should be able to
> take a file (HTML or Python) or module name.

It doesn't and can't really work like that though, pydoctor really
needs to work on a whole system/package at a time.

Cheers,
mwh

-- 
  I think my standards have lowered enough that now I think ``good
  design'' is when the page doesn't irritate the living fuck out of 
  me.                        -- http://www.jwz.org/gruntle/design.html




From matt.feifarek+twisted at gmail.com  Mon Apr 17 12:34:56 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Mon, 17 Apr 2006 12:34:56 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604151222.37968.mike@mkp.ca>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
Message-ID: <6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>

On 4/15/06, Mike Pelletier <mike at mkp.ca> wrote:
>
> There has also been debate about whether or not mktap plugins are even a
> good
> idea at all for new applications.  At any rate, I don't think it receives
> the
> same attention from the core developers that it once did.  The moral seems
> to
> be that just because something is provided by Twisted does not mean it's a
> best practice.


Thanks for the reply.

So, if the docs tell us that this way is the way to use twisted, and they're
wrong, where do we go to learn how to use twisted?

The docs are quite clear about using application objects and making your
code into a twisted 'plugin' rather than simply poking at the reactor (as in
some of the quick-n-dirty tutorials).

I can certainly write my own persistence code, but I'm a little worried that
more of the "best practices" presented by the docs are wrong. Should I still
use twistd? Should I use the application object? Etc.

Shorter (and somewhat snippier): how do we use twisted in our projects, if
the docs are wrong?

I know that you personally aren't responsible to answer this question; I'm
hoping some others might pipe in and point me to some other docs or other
tutorials.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060417/7e65f674/attachment.htm 

From mike at mkp.ca  Mon Apr 17 12:53:29 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Mon, 17 Apr 2006 12:53:29 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
Message-ID: <200604171253.30332.mike@mkp.ca>

On Monday 17 April 2006 12:34, Matt Feifarek wrote:
> The docs are quite clear about using application objects and making your
> code into a twisted 'plugin' rather than simply poking at the reactor (as
> in some of the quick-n-dirty tutorials).

Looks like someone's slightly ahead of or behind you.  The mktap howto at:

  http://twistedmatrix.com/projects/core/documentation/howto/mktap.html

now reads:

  This document does not describe current Twisted best practice. The progress
  of this document is currently being tracked in issue 1139.

The docs also suggest:

  The majority of users will use the .tac Python configuration files without
  needing to use the mktap serialization.

This is certainly my preferred method, and I think that of most developers.  I 
believe mktap was merely an attempt to expose the same functionality with 
higher-level tools.  But take it with a grain of salt; I'm far, far from the 
inner circle.  I'm just regurgitating lore I've picked up from this list to 
help conserve the attention of the wizards.

> So, if the docs tell us that this way is the way to use twisted, and
> they're wrong, where do we go to learn how to use twisted?

Never hurts to ask the list, just as you've done.  I think it's likely your 
questions have already resulted in attempts to improve the situation.

Mike.



From matt.feifarek+twisted at gmail.com  Mon Apr 17 13:01:59 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Mon, 17 Apr 2006 13:01:59 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604171253.30332.mike@mkp.ca>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
	<200604171253.30332.mike@mkp.ca>
Message-ID: <6fb6dbfe0604171001o22326bd9x4fef1e3be3a44c16@mail.gmail.com>

On 4/17/06, Mike Pelletier <mike at mkp.ca> wrote:
>
> Looks like someone's slightly ahead of or behind you.  The mktap howto at:
>
>   http://twistedmatrix.com/projects/core/documentation/howto/mktap.html
>
> now reads:
>
>   This document does not describe current Twisted best practice. The
> progress
>   of this document is currently being tracked in issue 1139.
>
> The docs also suggest:
>
>   The majority of users will use the .tac Python configuration files
> without
>   needing to use the mktap serialization.


Thanks very much.

I had seen that blue-box warning, but stopped reading when I saw it.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060417/a2815e00/attachment.htm 

From radix at twistedmatrix.com  Mon Apr 17 13:13:50 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon, 17 Apr 2006 13:13:50 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
Message-ID: <60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>

On 4/17/06, Matt Feifarek <matt.feifarek+twisted at gmail.com> wrote:
>
>
>
> On 4/15/06, Mike Pelletier <mike at mkp.ca> wrote:
> >
> > There has also been debate about whether or not mktap plugins are even a
> > good
> > idea at all for new applications.  At any rate, I don't think it
> > receives the
> > same attention from the core developers that it once did.  The moral
> > seems to
> > be that just because something is provided by Twisted does not mean it's
> > a
> > best practice.
>
>
> Thanks for the reply.
>
> So, if the docs tell us that this way is the way to use twisted, and
> they're wrong, where do we go to learn how to use twisted?
>
> The docs are quite clear about using application objects and making your
> code into a twisted 'plugin' rather than simply poking at the reactor (as in
> some of the quick-n-dirty tutorials).
>
> I can certainly write my own persistence code, but I'm a little worried
> that more of the "best practices" presented by the docs are wrong. Should I
> still use twistd? Should I use the application object? Etc.
>
> Shorter (and somewhat snippier): how do we use twisted in our projects, if
> the docs are wrong?
>
> I know that you personally aren't responsible to answer this question; I'm
> hoping some others might pipe in and point me to some other docs or other
> tutorials.
>



Please point us at the docs that are wrong (hopefully in the bug tracker),
and give them the "documentation" keyword.




--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060417/6242d36a/attachment.htm 

From matt.feifarek+twisted at gmail.com  Mon Apr 17 13:56:59 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Mon, 17 Apr 2006 13:56:59 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
	<60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>
Message-ID: <6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>

On 4/17/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>
>
> Please point us at the docs that are wrong (hopefully in the bug tracker),
> and give them the "documentation" keyword.
>

According to that page:
http://twistedmatrix.com/projects/core/documentation/howto/mktap.html

It's already in the tracker (1139). When I click through, I don't end up
there, but those links have never worked for me. I always get kicked back to
the menu.

It's also hard for us users of the libraries to know how to mark bugs for
things like "this isn't the right way to use twisted" if we don't know what
the right way is.

I like Mike's suggestion, though; to stick with .tac and ditch the
persistence for now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060417/7e0e3d09/attachment.htm 

From mike at mkp.ca  Mon Apr 17 14:45:31 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Mon, 17 Apr 2006 14:45:31 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>
	<6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>
Message-ID: <200604171445.31580.mike@mkp.ca>

On Monday 17 April 2006 13:56, Matt Feifarek wrote:
> On 4/17/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
> > Please point us at the docs that are wrong (hopefully in the bug
> > tracker), and give them the "documentation" keyword.
>
> According to that page:
> http://twistedmatrix.com/projects/core/documentation/howto/mktap.html
>
> It's already in the tracker (1139). When I click through, I don't end up
> there, but those links have never worked for me. I always get kicked back
> to the menu.

There is a typo in the URL, it's actually:

  http://twistedmatrix.com/trac/ticket/1139

(Typo has been noted in the ticket.)

Mike.



From glyph at divmod.com  Mon Apr 17 19:40:06 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 19:40:06 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <2m8xq4l1fl.fsf@starship.python.net>
Message-ID: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>



On Mon, 17 Apr 2006 15:30:22 +0100, Michael Hudson <mwh at python.net> wrote:
>glyph at divmod.com writes:
>>>Does this bother you somehow?
>>
>> Nope.  Just seems like yet another indication that it should really
>> be lore --api ;-) Or rather, lore, like trial, should be able to
>> take a file (HTML or Python) or module name.
>
>It doesn't and can't really work like that though, pydoctor really
>needs to work on a whole system/package at a time.

Absolutely - you are suggesting that the parity is even greater than I am.  'trial twisted' ~= 'lore twisted'.  Or perhaps 'lore zope.interface twisted <something that means the stdlib too>'

One really nice thing that lore could do is look for API references in "howto" documentation (man, that stuff needs a better name) and generate the API documentation concurrently so that it can print warnings if such APIs don't exist.  Of course, by no means impossible if they were separate projects.  Pydoctor generates actually parseable output, as opposed to the crap soup of HTML that comes out of epydoc.

Still, it would be super nice if there could be a single, integrated step for building the whole book in HTML and PDF form, then packaging the API docs into an indexed, annotated appendix, included within the LaTeX document, for example.  That sort of thing seems like it'd be hard to pull off without the code being closely related, however, I guess lore could always just import pydoctor (assuming no pydoctor=>twisted dependency).



From dreid at dreid.org  Mon Apr 17 21:01:04 2006
From: dreid at dreid.org (David Reid)
Date: Mon, 17 Apr 2006 18:01:04 -0700
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604171445.31580.mike@mkp.ca>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>	<60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>	<6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>
	<200604171445.31580.mike@mkp.ca>
Message-ID: <44443A50.3080604@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mike Pelletier wrote:
> On Monday 17 April 2006 13:56, Matt Feifarek wrote:
>> On 4/17/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>>> Please point us at the docs that are wrong (hopefully in the bug
>>> tracker), and give them the "documentation" keyword.
>> According to that page:
>> http://twistedmatrix.com/projects/core/documentation/howto/mktap.html
>>
>> It's already in the tracker (1139). When I click through, I don't end up
>> there, but those links have never worked for me. I always get kicked back
>> to the menu.
> 
> There is a typo in the URL, it's actually:
> 
>   http://twistedmatrix.com/trac/ticket/1139
> 
> (Typo has been noted in the ticket.)

It's not actually a typo, it's a broken redirect,
http://twistedmatrix.com/bugs/ redirects unconditionally to
http://twistedmatrix.com/trac/report which breaks links to bugs all over
the place, including mailing list archives.  There is a patch attached
to ticket #1517 which fixes this, but I don't know what the status of
that patch is in regards to our website maintainer.

- -David
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (Darwin)

iD8DBQFERDpQrsrO6aeULcgRAsv7AJ93P+GboziEJLfoFOaLVGD4cgTxtwCeJg5w
hOVL/jy0MJUH/xvuQZoO18o=
=T7TP
-----END PGP SIGNATURE-----



From glyph at divmod.com  Mon Apr 17 22:20:23 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 22:20:23 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <44443A50.3080604@dreid.org>
Message-ID: <20060418022023.22481.1262876328.divmod.quotient.14625@ohm>



On Mon, 17 Apr 2006 18:01:04 -0700, David Reid <dreid at dreid.org> wrote:

>It's not actually a typo, it's a broken redirect,
>http://twistedmatrix.com/bugs/ redirects unconditionally to
>http://twistedmatrix.com/trac/report which breaks links to bugs all over
>the place, including mailing list archives.  There is a patch attached
>to ticket #1517 which fixes this, but I don't know what the status of
>that patch is in regards to our website maintainer.

A private message from our website maintainer indicates that certain exigencies have left our website, once again, unmaintained.  :-(

Someone who can commit some time, please volunteer?



From glyph at divmod.com  Mon Apr 17 22:23:27 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 22:23:27 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604171253.30332.mike@mkp.ca>
Message-ID: <20060418022327.22481.932136256.divmod.quotient.14627@ohm>

On Mon, 17 Apr 2006 12:53:29 -0400, Mike Pelletier <mike at mkp.ca> wrote:
>On Monday 17 April 2006 12:34, Matt Feifarek wrote:

>> So, if the docs tell us that this way is the way to use twisted, and
>> they're wrong, where do we go to learn how to use twisted?
>
>Never hurts to ask the list, just as you've done.  I think it's likely your
>questions have already resulted in attempts to improve the situation.

Yep.  Really good question/answer threads are often useful enough to be turned into documentation themselves.  Several of the better Twisted documents, if I recall correctly, were created in just this way.  It always seems easier to reply to an email than to sit down and design a document from scratch.



From foom at fuhm.net  Mon Apr 17 22:32:42 2006
From: foom at fuhm.net (James Y Knight)
Date: Mon, 17 Apr 2006 22:32:42 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
References: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
Message-ID: <215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>


On Apr 17, 2006, at 7:40 PM, glyph at divmod.com wrote:

>
>
> On Mon, 17 Apr 2006 15:30:22 +0100, Michael Hudson <mwh at python.net>  
> wrote:
>> glyph at divmod.com writes:
>>>> Does this bother you somehow?
>>>
>>> Nope.  Just seems like yet another indication that it should really
>>> be lore --api ;-) Or rather, lore, like trial, should be able to
>>> take a file (HTML or Python) or module name.
>>
>> It doesn't and can't really work like that though, pydoctor really
>> needs to work on a whole system/package at a time.
>
> Absolutely - you are suggesting that the parity is even greater  
> than I am.  'trial twisted' ~= 'lore twisted'.  Or perhaps 'lore  
> zope.interface twisted <something that means the stdlib too>'
>
> One really nice thing that lore could do is look for API references  
> in "howto" documentation (man, that stuff needs a better name) and  
> generate the API documentation concurrently so that it can print  
> warnings if such APIs don't exist.  Of course, by no means  
> impossible if they were separate projects.  Pydoctor generates  
> actually parseable output, as opposed to the crap soup of HTML that  
> comes out of epydoc.
>
> Still, it would be super nice if there could be a single,  
> integrated step for building the whole book in HTML and PDF form,  
> then packaging the API docs into an indexed, annotated appendix,  
> included within the LaTeX document, for example.  That sort of  
> thing seems like it'd be hard to pull off without the code being  
> closely related, however, I guess lore could always just import  
> pydoctor (assuming no pydoctor=>twisted dependency).

It seems to me that pydoctor should remain separate -- I suspect it  
would be more useful for other projects if it was not integrated with  
lore.

James



From mcmillen at cs.cmu.edu  Mon Apr 17 22:54:23 2006
From: mcmillen at cs.cmu.edu (Colin McMillen)
Date: Mon, 17 Apr 2006 22:54:23 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <20060418022327.22481.932136256.divmod.quotient.14627@ohm>
References: <200604171253.30332.mike@mkp.ca>
	<20060418022327.22481.932136256.divmod.quotient.14627@ohm>
Message-ID: <20060418025423.GJ14168@cs.cmu.edu>

On Mon, Apr 17, 2006 at 10:23:27PM -0400, glyph at divmod.com wrote:
> On Mon, 17 Apr 2006 12:53:29 -0400, Mike Pelletier <mike at mkp.ca> wrote:
> >On Monday 17 April 2006 12:34, Matt Feifarek wrote:
> 
> >>So, if the docs tell us that this way is the way to use twisted, and
> >>they're wrong, where do we go to learn how to use twisted?
> >
> >Never hurts to ask the list, just as you've done.  I think it's likely your
> >questions have already resulted in attempts to improve the situation.
> 
> Yep.  Really good question/answer threads are often useful enough to be 
> turned into documentation themselves.  Several of the better Twisted 
> documents, if I recall correctly, were created in just this way.  It always 
> seems easier to reply to an email than to sit down and design a document 
> from scratch.

At the very least, this sort of thing seems to be the sort of thing
that should get a detailed answer added to the FAQ.

- Colin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060417/882da47d/attachment.pgp 

From glyph at divmod.com  Mon Apr 17 23:17:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 23:17:50 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: 0
Message-ID: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>

On Mon, 17 Apr 2006 12:34:56 -0400, Matt Feifarek <matt.feifarek+twisted at gmail.com> wrote:

>So, if the docs tell us that this way is the way to use twisted, and they're
>wrong, where do we go to learn how to use twisted?

Apparently you've come to the right place. :-)

>The docs are quite clear about using application objects and making your
>code into a twisted 'plugin' rather than simply poking at the reactor (as in
>some of the quick-n-dirty tutorials).

I have to apologize for that; .tap plugins, in particular, are my fault.  Sometimes, a system will be written, documented, people will use it for a while, and it will turn out that the supposed benefits of putting up with the pain of a plugin interface or a layer of indirection are actually not worthwhile.  There is chaos for a while as everyone tries to figure out what the best way to solve the problem that the interface originally wanted to solve is.  I wish Twisted didn't have this problem, but it's hardly unique.  The difference is, we admit we have the problem, let our users know we are reconsidering our solution, and attempt to discover the correct way :-).

(For a counterexample, see the web stuff in J2EE.  The XML addicts who designed it refused to admit they were wrong or that the user community was having trouble with the mountains of configuration required, and now the "right" way to use J2EE for Web seems to be ditching it in favor of Ruby on Rails...)

Right now the appropriate thing to do is use a .tac file.  Some of what the documentation says is in fact correct: you still shouldn't poke at the reactor directly: just create the Application object (as documented in those howtos) in a .tac configuration file rather than an axiom plugin.

One of the major enhancements we need to make (this will probably be seen in a Twisted 3.0 release) is to make a publicly-supported version of twisted.scripts.twistd.ServerOptions.  If you are uncomfortable reading grotty platform-specific code and getting into spirited arguments on this mailing list about broken compatibility from release to release, that is not yet the class for you.  Eventually we will provide a nice way to make a twistd-like command-line program (and hopefully also a similar GUI-friendly equivalent) that adds additional arguments and startup logic of your choosing.  However, some projects written by Twisted core team members are already abusing the private ServerOptions interface to provide this same effect.

One such project is something that I wrote, Divmod Axiom ( http://divmod.org/trac/wiki/DivmodAxiom ).  Axiom abuses this internal interface to implement a rather nice mechanism that actually accomplishes what .tap plugins set out to do.  Axiom is an object database with native support for the Twisted programming model.  The feature I am talking about specifically here though, is a nifty command-line tool called 'axiomatic'.  Axiomatic provides a plugin architecture, like tap plugins, which perform manipulations on a database, and a "start" sub-command, which allows you to do things like this:

     % axiomatic -d mymantissa.axiom mantissa
     Enter Divmod? Mantissa? password for 'admin at localhost':
     Confirm Divmod? Mantissa? password for 'admin at localhost':
     % axiomatic -d mymantissa.axiom start -n

The first command would be roughly equivalent to a hypothetical mktap plugin:

    % mktap -a mymantissa.tap mantissa
    % twistd -nf mymantissa.tap

The difference is that Axiom is a real object database, based around SQLite, with support for managed transactions, schema evolution, persistent timed events, and more.  You can therefore put a reasonable amount of real data into it in addition to your configuration.

>I can certainly write my own persistence code, but I'm a little worried that
>more of the "best practices" presented by the docs are wrong. Should I still
>use twistd? Should I use the application object? Etc.

Yes, use twistd.  Yes, use the application object.  You *can* even write mktap plugins; they will work as described by the documentation.  They're not buggy.  (Okay, they're not *very* buggy.)  It's just that the advertised benefits are not really so great so most people don't use them any more.  The ones that come included with Twisted are handy toys.

A separate issue is that if you have large, complex configurations, storing them in pickle (or any automatic persistence mechanism) is dangerous.  A chance upgrade of any Twisted module which your configuration happens to contain instances from, or the standard library, or any other library which Twisted depends on, or any of your code... well, basically if any Python code on your computer changes at all, you could end up with a configuration that won't load.

This isn't really a Twisted-specific issue, but it is a lesson that many Twisted Matrix Labs developers have learned by way of .tap files.  There is a well-written paper on the dangers of automatic persistence here:

   http://www.erights.org/data/serial/jhu-paper/upgrade.html

If you're intrigued by Axiom after reading this, there's good news and bad news.

The good news:  Axiom can provide all the advantages that tap plugins were supposed to, along with a relatively scalable and powerful general persistence mechanism.  The dangers of upgrading are far reduced from .tap files, because (A) axiom includes very good schema migration support and automatic upgrades between released versions, (B) all attributes are explicit, so there are no "hidden surprises" when you upgrade, and (C) only Item objects in the database need to be upgraded, not every random thing you invoke in your code.

The bad news:  Axiom is heavily in development, nowhere near as stable as Twisted.  The 0.4 release is ancient, in terms of available features, and documentation is mainly being written for the main line of development.  Unfortunately there aren't necessarily upgrades beween every random revision of SVN trunk.  In practice there have been relatively few breakages.

However, it sounds like your needs are relatively lightweight and that you could happily use the 0.4 release of Axiom to deploy a real application.  When we do get around to producing a new release, you shouldn't have to worry too much about backwards compatibility.



From glyph at divmod.com  Mon Apr 17 23:25:30 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 23:25:30 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>
Message-ID: <20060418032530.22481.650058880.divmod.quotient.14640@ohm>


On Mon, 17 Apr 2006 22:32:42 -0400, James Y Knight <foom at fuhm.net> wrote:

>It seems to me that pydoctor should remain separate -- I suspect it  would 
>be more useful for other projects if it was not integrated with  lore.

Any reason why?  Or just a general feeling of suspicion?



From glyph at divmod.com  Mon Apr 17 23:28:24 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 23:28:24 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>
Message-ID: <20060418032824.22481.2083421577.divmod.quotient.14642@ohm>



On Mon, 17 Apr 2006 23:17:50 -0400, glyph at divmod.com wrote:

>Right now the appropriate thing to do is use a .tac file.  Some of what the 
>documentation says is in fact correct: you still shouldn't poke at the 
>reactor directly: just create the Application object (as documented in those 
>howtos) in a .tac configuration file rather than an axiom plugin.
                                                  ^
                                                  a mktap plugin

ugh.  Got a little ahead of myself there.



From mwh at python.net  Tue Apr 18 04:00:26 2006
From: mwh at python.net (Michael Hudson)
Date: Tue, 18 Apr 2006 09:00:26 +0100
Subject: [Twisted-Python] Re: Weekly Bug Summary
References: <2m8xq4l1fl.fsf@starship.python.net>
	<20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
Message-ID: <2modyzjoth.fsf@starship.python.net>

glyph at divmod.com writes:

> On Mon, 17 Apr 2006 15:30:22 +0100, Michael Hudson <mwh at python.net> wrote:
>>glyph at divmod.com writes:
>>>>Does this bother you somehow?
>>>
>>> Nope.  Just seems like yet another indication that it should really
>>> be lore --api ;-) Or rather, lore, like trial, should be able to
>>> take a file (HTML or Python) or module name.
>>
>>It doesn't and can't really work like that though, pydoctor really
>>needs to work on a whole system/package at a time.
>
> Absolutely - you are suggesting that the parity is even greater than
> I am.  'trial twisted' ~= 'lore twisted'.  Or perhaps 'lore
> zope.interface twisted <something that means the stdlib too>'

Ah, right.

> One really nice thing that lore could do is look for API references
> in "howto" documentation (man, that stuff needs a better name) and
> generate the API documentation concurrently so that it can print
> warnings if such APIs don't exist.  Of course, by no means
> impossible if they were separate projects.  Pydoctor generates
> actually parseable output, as opposed to the crap soup of HTML that
> comes out of epydoc.

pydoctor also optionally generates a system pickle with all the
information in, so you shouldn't really even need to parse anything...

> Still, it would be super nice if there could be a single, integrated
> step for building the whole book in HTML and PDF form, then
> packaging the API docs into an indexed, annotated appendix, included
> within the LaTeX document, for example. 

I would also like a pony :)

> That sort of thing seems like it'd be hard to pull off without the
> code being closely related, however, I guess lore could always just
> import pydoctor (assuming no pydoctor=>twisted dependency).

pydoctor depends on nevow (practically speaking, anyway; there's a
writer that just builds up HTML by string interpolation but all the
funky new stuff is just in the nevow writer).  It is also vaguely
designed to be used as a library, so I think lore could import it.

Cheers,
mwh

-- 
  Also, remember to put the galaxy back when you've finished, or an
  angry mob of astronomers will come round and kneecap you with a
  small telescope for littering. 
       -- Simon Tatham, ucam.chat, from Owen Dunn's review of the year




From nico at tekNico.net  Tue Apr 18 04:15:12 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Tue, 18 Apr 2006 10:15:12 +0200
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>
References: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
	<215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>
Message-ID: <e2276i$9o0$1@sea.gmane.org>

> It seems to me that pydoctor should remain separate -- I suspect it 
> would be more useful for other projects if it was not integrated with 
> lore.

I concur. I'm currently using pydoctor (thanks Michael!), and have no need
for lore.

-- 
Nicola Larosa - http://www.tekNico.net/

Hateful, blasphemous, prejudiced, vulgar, rude, or ignorant remarks are
the music of a free society, and the relentless patter of idiots is how
we know we're in one. When all the words in our public conversation are
fair, good, and true, it's time to make a run for the fence.
 -- Daniel Gilbert, December 2005




From simon at hedberg.net  Tue Apr 18 09:22:26 2006
From: simon at hedberg.net (Simon Hedberg)
Date: Tue, 18 Apr 2006 15:22:26 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
In-Reply-To: <4436FBFA.2080500@argo.es>
Message-ID: <000301c662eb$22b54720$38aa20d4@hp>

Jesus Cea wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Twisted is very extensive in protocol support, managing smtp, pop3
> and imap4, for example. I was wondering if there is any LMTP server
> project out there. It should be fairly simple, since LMTP is very
> very similar to usual SMTP. I need to use LMTP for a local project,
> and I was wondering if tiwsted could be used to fill this gap.    
> 
> - --
> Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
> jcea at argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/ 
> _/_/ 
> jabber / xmpp:jcea at jabber.org         _/_/    _/_/          _/_/_/_/_/
>                                _/_/  _/_/    _/_/          _/_/  _/_/
> "Things are not so easy"      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
> "My name is Dump, Core Dump"   _/_/_/        _/_/_/      _/_/  _/_/
> "El amor es poner tu felicidad en la felicidad de otro" - Leibniz

Hi,
I have been looking at ways to have postfix talking to my twisted app
and today tried LMTP successfully for the first time. What I've done so
far is just subclass the ESMTP protocol and add do_LHLO which seems to
do the trick for some basic usage at least. Looking at
http://www.ietf.org/rfc/rfc2033.txt it seems like it shouldn't be to
hard to make a proper LMTP implementation. Perhaps someone more familiar
with twisted.mail could have a look.


class LMTP(smtp.ESMTP):
    def do_LHLO(self, rest):
        peer = self.transport.getPeer()
        try:
            host = peer.host
        except AttributeError:
            host = str(peer)
        self._helo = (rest, host)
        self._from = None
        self._to = []
        self.sendCode(250, '%s Hello %s, nice to meet you\n%s' %
(self.host, host,self.listExtensions()))

    def do_HELO(self,rest):
        return self.do_UNKNOWN(self,rest)
    def do_EHLO(self,rest):
        return self.do_UNKNOWN(self,rest)




From jarrod at vertigrated.com  Tue Apr 18 11:12:49 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Tue, 18 Apr 2006 11:12:49 -0400
Subject: [Twisted-Python] I saw something about someone writing a Reactor
	that used libevent ...
Message-ID: <2389d4730604180812j7cc96a1td90e1ddd7962d0cd@mail.gmail.com>

but now I can't find the information about it anywhere, I am dreaming this?
Twisted with libevent would rock, not that Twisted isn't awesome right now
:-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060418/642245f6/attachment.htm 

From dougfort at dougfort.com  Tue Apr 18 11:27:24 2006
From: dougfort at dougfort.com (Doug Fort, Consulting Programmer)
Date: Tue, 18 Apr 2006 11:27:24 -0400
Subject: [Twisted-Python] deferred TCP writes
Message-ID: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>

Hi,

I have a server that just continously pushes blocks of data to clients
after they connect. I'd like to defer transport.write(), and then send
another block of data when it completes. All  the samples and
documentation I hae seen show synchronous writes. Is  there an async.
version?

--
Doug Fort, Consulting Programmer
http://www.dougfort.com



From jcea at argo.es  Tue Apr 18 11:44:13 2006
From: jcea at argo.es (Jesus Cea)
Date: Tue, 18 Apr 2006 17:44:13 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
In-Reply-To: <000301c662eb$22b54720$38aa20d4@hp>
References: <000301c662eb$22b54720$38aa20d4@hp>
Message-ID: <4445094D.5050508@argo.es>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Simon Hedberg wrote:
> I have been looking at ways to have postfix talking to my twisted app
> and today tried LMTP successfully for the first time. What I've done so
> far is just subclass the ESMTP protocol and add do_LHLO which seems to
> do the trick for some basic usage at least. Looking at
> http://www.ietf.org/rfc/rfc2033.txt it seems like it shouldn't be to
> hard to make a proper LMTP implementation. Perhaps someone more familiar
> with twisted.mail could have a look.

Your mini LMTP implementation fails if a message is sent to several
recipients, since LMTP must answer with a status code per destination.
That is the main difference with SMTP.

But good starting point :)

Hope "somebody" takes the token and complete a RFC compliant
implementation... :-p

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea at argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea at jabber.org         _/_/    _/_/          _/_/_/_/_/
                               _/_/  _/_/    _/_/          _/_/  _/_/
"Things are not so easy"      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
"My name is Dump, Core Dump"   _/_/_/        _/_/_/      _/_/  _/_/
"El amor es poner tu felicidad en la felicidad de otro" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBREUJTZlgi5GaxT1NAQKU1wP6A6YMIvbb9qzT1ujbGo58Phq1Zc5amOxG
eV+2YaDxNcGO7AE6OvSPfx0FXyc8hPU+jyh2PvnJMuII2pTqDidaVlXGh6bdRB7b
w+yGY632rldOyVWOM8Rizl4jZha4LwfVc1Om2oUGvUxXG7iT+z6AjEY3zor2TTqC
ucFVkMD0dWE=
=KmBp
-----END PGP SIGNATURE-----



From bgranger at scu.edu  Tue Apr 18 13:44:22 2006
From: bgranger at scu.edu (Brian Granger)
Date: Tue, 18 Apr 2006 10:44:22 -0700
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
Message-ID: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>

I have run into this issue as well when trying to order different
writes and make code run _after_ a write was completed.  I ended up
calling my code using deferToThread and putting in time.sleep calls to
make sure things got ordered correctly.  Ugly hack though.

The ITransport interface docs seem to imply that returning a deferred
from a write is not supported:

I make no representations about whether calls to me will happen
immediately or require returning to a control loop, or whether they
will happen in the same or another thread. Consider methods of this
class (aside from getPeer) to be 'thrown over the wall', to happen at
some indeterminate time.

I echo the question: why doesn't write return a deferred?  Surely
there are times you want to trigger events on the completion of a
write.

Brian

Brian Granger
Santa Clara University
ellisonbg at gmail.com



From radix at twistedmatrix.com  Tue Apr 18 13:51:38 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 18 Apr 2006 13:51:38 -0400
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
	<fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
Message-ID: <60ed19d40604181051l65a93a9eg98f0a1c1b625d362@mail.gmail.com>

On 4/18/06, Brian Granger <bgranger at scu.edu> wrote:
>
> I have run into this issue as well when trying to order different
> writes and make code run _after_ a write was completed.  I ended up
> calling my code using deferToThread and putting in time.sleep calls to
> make sure things got ordered correctly.  Ugly hack though.
>
> The ITransport interface docs seem to imply that returning a deferred
> from a write is not supported:
>
> I make no representations about whether calls to me will happen
> immediately or require returning to a control loop, or whether they
> will happen in the same or another thread. Consider methods of this
> class (aside from getPeer) to be 'thrown over the wall', to happen at
> some indeterminate time.
>
> I echo the question: why doesn't write return a deferred?  Surely
> there are times you want to trigger events on the completion of a
> write.



The way you do this is to hook up a producer to the transport. Hopefully
there are some references to this in the API docs: search for "producer" and
"consumer".


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060418/ea78dbfc/attachment.htm 

From itamar at itamarst.org  Tue Apr 18 14:00:53 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 18 Apr 2006 14:00:53 -0400
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
	<fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
Message-ID: <1145383253.12220.14.camel@localhost.localdomain>

On Tue, 2006-04-18 at 10:44 -0700, Brian Granger wrote:
> I have run into this issue as well when trying to order different
> writes and make code run _after_ a write was completed.  I ended up
> calling my code using deferToThread and putting in time.sleep calls to
> make sure things got ordered correctly.  Ugly hack though.

Eeeeew. Don't do that.

> I echo the question: why doesn't write return a deferred?  Surely
> there are times you want to trigger events on the completion of a
> write.

This is (more or less) what the producer API is for. Register a
IConsumer with transport.registerProducer and you will get callbacks
telling you when the transport buffer becomes empty or full.

Returning Deferred from every transport.write would make everything
rather slow... a wrapper that does this could be probably be written
using the producer/consumer API. 




From bgranger at scu.edu  Tue Apr 18 14:21:46 2006
From: bgranger at scu.edu (Brian Granger)
Date: Tue, 18 Apr 2006 11:21:46 -0700
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <1145383253.12220.14.camel@localhost.localdomain>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
	<fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
	<1145383253.12220.14.camel@localhost.localdomain>
Message-ID: <fa8579a40604181121n7924fa35rf7548dc4e3421fc8@mail.gmail.com>

On 4/18/06, Itamar Shtull-Trauring <itamar at itamarst.org> wrote:
> On Tue, 2006-04-18 at 10:44 -0700, Brian Granger wrote:
> > I have run into this issue as well when trying to order different
> > writes and make code run _after_ a write was completed.  I ended up
> > calling my code using deferToThread and putting in time.sleep calls to
> > make sure things got ordered correctly.  Ugly hack though.
>
> Eeeeew. Don't do that.

I though my hack would get a good response :)

> > I echo the question: why doesn't write return a deferred?  Surely
> > there are times you want to trigger events on the completion of a
> > write.
>
> This is (more or less) what the producer API is for. Register a
> IConsumer with transport.registerProducer and you will get callbacks
> telling you when the transport buffer becomes empty or full.
>
> Returning Deferred from every transport.write would make everything
> rather slow... a wrapper that does this could be probably be written
> using the producer/consumer API.
>

Fantastic, I wasn't aware of this API.  I will defintely use this
approach from now on.

Thanks for the pointer.

Brian

--
Brian Granger
Santa Clara University
ellisonbg at gmail.com



From matt.feifarek+twisted at gmail.com  Tue Apr 18 14:56:51 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Tue, 18 Apr 2006 14:56:51 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>
References: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>
Message-ID: <6fb6dbfe0604181156o3b9f4e4ag2b1490114520023d@mail.gmail.com>

On 4/17/06, glyph at divmod.com <glyph at divmod.com> wrote:
>
>
> Apparently you've come to the right place. :-)


Wow, thanks for the detailed and thoughful reply.

You've answered my questions and have given me another project to look at.
I'll check out Axiom, thanks.

For the record and the future list, it turned out that the persistence
problem was related to a pretty simple subclass of dict that was not happily
unpickling... but only when the new "protocol 2" was used to pickle/unpickle
objects. That was pretty hard to track down.

But of course, more importantly, I've learned how to do it right from here.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060418/e5fd6be0/attachment.htm 

From glyph at divmod.com  Tue Apr 18 16:11:19 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 18 Apr 2006 16:11:19 -0400
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
Message-ID: <20060418201119.22481.1631808967.divmod.quotient.14749@ohm>

On Tue, 18 Apr 2006 10:44:22 -0700, Brian Granger <bgranger at scu.edu> wrote:
>I echo the question: why doesn't write return a deferred?  Surely
>there are times you want to trigger events on the completion of a
>write.

Some folks have already answered with the primary reason, which is to say, efficiency.  While Twisted definitely trades performance for flexibility in a number of places where reasonable, 'write()' is one of those things that just absolutely has to be as fast as possible, because many things which are highly  performance-critical call it.  Creating Deferreds could be 100x faster and it would still be too slow for this case.

There is anothe reason, though: returning a deferred from "write()" implies to the user that when the deferred fires, the bytes have been "written", e.g. the other end has received them.  In cases where .write() blocks, most naive programmers -- and yes, I say this having once been a "naive programmer" myself -- assume that the other end has not only received the bytes, it has processed them.  This is wrong, and can (and often does) have unfortunate consequences.

It sounds like you want control over excessive in-memory buffering, which is a pretty reasonable thing to want, and the IConsumer/IProducer interfaces you have already been directed to should provide that to you quite satisfactorily.

The reality is that when a 'write' completes and returns to userland, your bytes are somewhere between your kernel, your router, your cable modem, your ISP's cable modem, your ISP's internal routers, the backbone (...) your destination's kernel, and your destination's application.  You have no idea where they are, really, and neither does Twisted.  It just hides one more distinction from you: Twisted's buffer to your OS's buffer.



From bear42 at code-bear.com  Wed Apr 19 10:36:28 2006
From: bear42 at code-bear.com (bear)
Date: Wed, 19 Apr 2006 10:36:28 -0400
Subject: [Twisted-Python] win32 now an officially supported platform
In-Reply-To: <20060416092600.22481.620597867.divmod.quotient.14066@ohm>
References: <20060416092600.22481.620597867.divmod.quotient.14066@ohm>
Message-ID: <44464AEC.6090200@code-bear.com>

I have upgraded the buildslaves to Twisted SVN Trunk (rev 16635)

glyph at divmod.com wrote:
> As of r16628, 'trial twisted' on a stock win32 twisted installation 
> will actually succeed and give you a PASSED at the end of it.
>
> I went to a lot of trouble to get things into this state, so I would 
> appreciate it if everyone could keep it this way.
>
> More accurately: I will personally revert any changes that cause real 
> failures on win32.  I say "real" failures because (as the buildbot 
> history immediately following this commit amply shows) the win32 
> buildbot itself seems kind of flaky; some of this may have to do with 
> the slave itself running a released version of Twisted, I'm not sure.  
> Any other buildbot enforcers / reviewers should be aware that it fails 
> intermittently and give it a few chances to build to make sure the 
> failure is legitimate, especially if the failure is a timeout or a 
> buildbot disconnect.
>
> Finally, I'd like to thank everyone who provided me with help, 
> reviews, commentary, and test fixes to get to this state, especially 
> jerub, exarkun, foom, and jml.
>
> Now, let's get a new release out so we can upgrade that buildbot :).
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From nitin-twisted at borwankar.com  Wed Apr 19 13:46:42 2006
From: nitin-twisted at borwankar.com (Nitin Borwankar on Twisted-Python list)
Date: Wed, 19 Apr 2006 10:46:42 -0700
Subject: [Twisted-Python] error "limits.h missing" while compiling zope
 interface in Sumo on mac os x 10.4.6 Py 2.4
Message-ID: <1145468802.19327.259443736@webmail.messagingengine.com>

Hello Twisted gurus,

Apologies if this is a FAQ - couldn't find answers in the obvious
places. ( list archives, google, ...).

I've been trying to build the TwistedSumo-2006-02-12 package -
especially the ZopeInterface package within, and am getting the
following errors
about limits.h not being found.
This is on Mac OS X 10.4.6 on a PPC powerbook G4 with gcc 4.0, I tried
swicthing to 3.3 via gcc_select and got a different error about gcc
command line switches.
An 'ls' on
/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/
indicates that indeed there's no limits.h there.
Separately downloading earlier stable ZopeInterface version and building
gave exactly the same error.

Python 2.4 is the default python installed via the MacPython 2.4 dmg.
An older Python 2.3 also exists on the system but 2.4 is ahead in the
PATH.

Any help getting past this appreciated.

Nitin Borwankar

gcc 4.0 errors
-----------------

nitin-pbook:~/dl/TwistedSumo-2006-02-12/ZopeInterface-3.1.0c1 nitin$
sudo python setup.py install
running install
running build
running build_py
running build_ext
building 'zope.interface._zope_interface_coptimizations' extension
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd
-fno-common -dynamic -DNDEBUG -g
-IDependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface
-I/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4 -c
Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.c
-o
build/temp.macosx-10.4-fat-2.4/Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
In file included from
Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.c:15:
/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/Python.h:18:20:
error: limits.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/Python.h:21:2:
error: #error "Something's broken.  UCHAR_MAX should be defined in
limits.h."
[...]
many more errors which I guess stem from limits.h not being found

gcc 3.3 errors
-----------------

nitin$ sudo gcc_select 3.3
Password:
Default compiler has been set to:
gcc version 3.3 20030304 (Apple Computer, Inc. build 1809)
nitin-pbook:~/dl/TwistedSumo-2006-02-12/ZopeInterface-3.1.0c1 nitin$
sudo python setup.py install
running install
running build
running build_py
running build_ext
building 'zope.interface._zope_interface_coptimizations' extension
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd
-fno-common -dynamic -DNDEBUG -g
-IDependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface
-I/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4 -c
Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.c
-o
build/temp.macosx-10.4-fat-2.4/Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
gcc: cannot specify -o with -c or -S and multiple compilations
error: command 'gcc' failed with exit status 1






-- 
  Nitin Borwankar
  nitin at borwankar.com




From grant at osafoundation.org  Wed Apr 19 14:24:00 2006
From: grant at osafoundation.org (Grant Baillie)
Date: Wed, 19 Apr 2006 11:24:00 -0700
Subject: [Twisted-Python] error "limits.h missing" while compiling zope
	interface in Sumo on mac os x 10.4.6 Py 2.4
In-Reply-To: <1145468802.19327.259443736@webmail.messagingengine.com>
References: <1145468802.19327.259443736@webmail.messagingengine.com>
Message-ID: <5F6DB613-F294-471D-A074-3C5431F734E9@osafoundation.org>


On Apr 19, 2006, at 10:46, Nitin Borwankar on Twisted-Python list wrote:

> Hello Twisted gurus,
>
> Apologies if this is a FAQ - couldn't find answers in the obvious
> places. ( list archives, google, ...).
>
> I've been trying to build the TwistedSumo-2006-02-12 package -
> especially the ZopeInterface package within, and am getting the
> following errors
> about limits.h not being found.
> This is on Mac OS X 10.4.6 on a PPC powerbook G4 with gcc 4.0, I tried
> swicthing to 3.3 via gcc_select and got a different error about gcc
> command line switches.
> An 'ls' on
> /Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/
> indicates that indeed there's no limits.h there.

limits.h is a system header. From the invocation of gcc:

> ...
> building 'zope.interface._zope_interface_coptimizations' extension
> gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
> -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd
> -fno-common -dynamic -DNDEBUG -g
> -IDependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface
> -I/Library/Frameworks/Python.framework/Versions/2.4/include/ 
> python2.4 -c
> Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/ 
> _zope_interface_coptimizations.c
> -o
> build/temp.macosx-10.4-fat-2.4/Dependencies/zope.interface- 
> ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o

... it looks as if there's something wrong with your /Developer/SDKs/ 
MacOSX10.4u.sdk, since the compiler should be picking up a correct  
limits.h from somewhere in that tree. Is that directory installed on  
your machine? What version of Xcode do you have?

--Grant

Grant Baillie
Open Source Applications Foundation
http://www.osafoundation.org






From lewicki at provider.pl  Wed Apr 19 20:59:24 2006
From: lewicki at provider.pl (Pawel Lewicki)
Date: Thu, 20 Apr 2006 02:59:24 +0200
Subject: [Twisted-Python] ReverseProxy with additional headers
Message-ID: <e26md0$35t$1@sea.gmane.org>

Hello,
I try to make a simple reverse proxy service that would add authentication
info for the Plone site.
Is it a good direction or not? I'm not sure if I modify outgoing or incoming
headers.

Pawel

----------------------
from twisted.internet import reactor
from twisted.web import proxy, server

class MyReverseProxyResource(proxy.ReverseProxyResource):

    def render(self, request):
        request.setHeader('__ac_name','username')
        request.setHeader('__ac_password','password')
        return proxy.ReverseProxyResource.render(self, request)

    def getChild(self, path, request):
        return MyReverseProxyResource(self.host, self.port,
self.path+'/'+path)


site = server.Site(MyReverseProxyResource('localhost', 80, '/'))
reactor.listenTCP(8080, site)
reactor.run()






From tlogic at gmail.com  Thu Apr 20 06:00:10 2006
From: tlogic at gmail.com (Haris Andrianakis)
Date: Thu, 20 Apr 2006 13:00:10 +0300
Subject: [Twisted-Python] Documentation download
In-Reply-To: <8f4623fb0604151544i1974836exb7819e4808d6950f@mail.gmail.com>
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
	<8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>
	<BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>
	<8f4623fb0604151544i1974836exb7819e4808d6950f@mail.gmail.com>
Message-ID: <7a1008db0604200300h5f6f6d1cu15107156eed567d@mail.gmail.com>

On 4/16/06, Jeff Grimmett <grimmtooth at gmail.com> wrote:
>
> On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:
>
> >
> > OK, perhaps I was not specific enough. I have already found the links to
> > the online manual, API reference, etc., but where do I actually download
> > this HTML documentation as a single zip file or tarball?
> >
>
> Ah.  I don't think there is one as of yet. Although if you check out the
> subversion repository, most (if not all) of it appears to be in the docs
> directory.
>

For the API I think you can use "epydoc" and extract it  from the code.
Though it would be great if someone made a tarball of all that documentation
so that
we could download and view it offline.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060420/e58fbe43/attachment.htm 

From johnpote at jptechnical.co.uk  Thu Apr 20 08:01:03 2006
From: johnpote at jptechnical.co.uk (John Pote)
Date: Thu, 20 Apr 2006 13:01:03 +0100
Subject: [Twisted-Python] twisted ftp client
Message-ID: <444777FF.6020301@jptechnical.co.uk>

Hi,
I'm new to twisted and interested in using the ftp client module. But 
apart from the api reference I stumbled across did not find any docs on 
the ftp module. Are there any? It would be helpful if there was a doc 
outlining the use of the module, order in which the various methods 
should be called/not called, example use of the module etc.
 
Twisted looks highly appropriate for my project but without appropriate 
documentation I'm reluctant to use it.
 
Many thanks,
 
John Pote




From moe at divmod.com  Thu Apr 20 08:28:00 2006
From: moe at divmod.com (Moe Aboulkheir)
Date: Thu, 20 Apr 2006 14:28:00 +0200
Subject: [Twisted-Python] twisted ftp client
In-Reply-To: <444777FF.6020301@jptechnical.co.uk>
Message-ID: <20060420122800.22481.1262284025.divmod.quotient.15240@ohm>

On Thu, 20 Apr 2006 13:01:03 +0100, John Pote <johnpote at jptechnical.co.uk> wrote:
>Hi,
>I'm new to twisted and interested in using the ftp client module. But apart 
>from the api reference I stumbled across did not find any docs on the ftp 
>module. Are there any? It would be helpful if there was a doc outlining the 
>use of the module, order in which the various methods should be called/not 
>called, example use of the module etc.

http://twistedmatrix.com/projects/core/documentation/examples/ftpclient.py



From simon at hedberg.net  Thu Apr 20 08:32:11 2006
From: simon at hedberg.net (Simon Hedberg)
Date: Thu, 20 Apr 2006 14:32:11 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
In-Reply-To: <4445094D.5050508@argo.es>
Message-ID: <000e01c66476$728e8860$38aa20d4@hp>

Jesus Cea wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Simon Hedberg wrote:
>> I have been looking at ways to have postfix talking to my twisted app
>> and today tried LMTP successfully for the first time. What I've done
>> so far is just subclass the ESMTP protocol and add do_LHLO which
>> seems to do the trick for some basic usage at least. Looking at
>> http://www.ietf.org/rfc/rfc2033.txt it seems like it shouldn't be to
>> hard to make a proper LMTP implementation. Perhaps someone more
>> familiar with twisted.mail could have a look.
> 
> Your mini LMTP implementation fails if a message is sent to several
> recipients, since LMTP must answer with a status code per
> destination. That is the main difference with SMTP.  
> 
> But good starting point :)
> 
> Hope "somebody" takes the token and complete a RFC compliant
> implementation... :-p 
> 
> - --

Ok, I had a closer look and here's a more complete version, that sends a
status code for each recipient. 
Try it out
/Simon


class LMTP(smtp.ESMTP):
    def do_LHLO(self, rest):
        peer = self.transport.getPeer()
        try:
            host = peer.host
        except AttributeError:
            host = str(peer)
        self._helo = (rest, host)
        self._from = None
        self._to = []
        self.sendCode(250, '%s Hello %s, nice to meet you\n%s' %
(self.host, host,self.listExtensions()))

    def do_HELO(self,rest):
        return self.do_UNKNOWN(self,rest)
    
    def do_EHLO(self,rest):
        return self.do_UNKNOWN(self,rest)
    
    def _messageHandled(self, resultList):
        for (success, result) in resultList:
            if success:
                self.sendCode(250, 'OK')
            else:
                log.err(result)
                code = 550
                msg = 'Could not deliver e-mail'
                smtperr = result.check(smtp.SMTPClientError)
                if smtperr:
                    code = result.value.code
                    msg  = result.value.resp
                self.sendCode(code, msg)




From itamar at itamarst.org  Thu Apr 20 09:52:44 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 20 Apr 2006 09:52:44 -0400
Subject: [Twisted-Python] Wiki was vandalized
Message-ID: <1145541164.9008.1.camel@localhost.localdomain>

See all edits by bakerson. Maybe we should disable edits by non-admin
users, or have a wiki-editor role people have to ask for.

Does trac have wiki undo?

-- 
Itamar Shtull-Trauring
http://itamarst.org





From exarkun at divmod.com  Thu Apr 20 10:12:48 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 20 Apr 2006 10:12:48 -0400
Subject: [Twisted-Python] Wiki was vandalized
In-Reply-To: <1145541164.9008.1.camel@localhost.localdomain>
Message-ID: <20060420141248.22481.2133834458.divmod.quotient.15266@ohm>

On Thu, 20 Apr 2006 09:52:44 -0400, Itamar Shtull-Trauring <itamar at itamarst.org> wrote:
>See all edits by bakerson. Maybe we should disable edits by non-admin
>users, or have a wiki-editor role people have to ask for.

For the moment, I've removed page creation and editing permissions.

>
>Does trac have wiki undo?

Kind of a little.  Extremely inconvenient interface, but I've used it to remove the edits.

Jean-Paul



From turian at gmail.com  Thu Apr 20 14:12:10 2006
From: turian at gmail.com (Joseph Turian)
Date: Thu, 20 Apr 2006 14:12:10 -0400
Subject: [Twisted-Python] callback errors?
Message-ID: <4dacb2560604201112q178ea545w16534b3c5a2a4d94@mail.gmail.com>

[Posting this to twisted and zope3 user, since I'm not sure which is
more germane]

I just install zope 3.2.0 on Gentoo.
I then manually configured a zope instance in /var/lib/zope/zope-3.2.0/
When I access the zope server at 192.168.0.100:8080, I get the
following error messages on my terminal:

What do these mean?
How can I resolve them?

------
2006-04-20T13:45:39 WARNING ZODB.FileStorage Ignoring index for
/var/lib/zope/zope-3.2.0/var/Data.fs
------
2006-04-20T13:45:39 INFO root -- HTTP:localhost:8080 Server started.
	Hostname: localhost
	Port: 8080
------
2006-04-20T13:45:39 INFO root Startup time: 4.060 sec real, 4.070 sec CPU
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
/@@login.html?nextURL=http%3A//192.168.0.100%3A8080/%40%40index.html
HTTP/1.1" 303 0 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows; U;
Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@index.html
HTTP/1.1" 200 4392 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows;
U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
/@@/zope3_tablelayout.css HTTP/1.1" 304 0
"http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3.js
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/xmltree.js
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3logo.gif
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
/@@singleBranchTree.xml HTTP/1.1" 200 289 "-" "Mozilla/5.0 (Windows;
U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
/@@/zope-app-folder-interfaces-IFolder-zmi_icon.gif HTTP/1.1" 304 0
"http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET /@@/pl.gif
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:




--
http://www.cs.nyu.edu/~turian/



From ldanielburr at mac.com  Thu Apr 20 13:33:13 2006
From: ldanielburr at mac.com (L. Daniel Burr)
Date: Thu, 20 Apr 2006 13:33:13 -0400
Subject: [Twisted-Python] callback errors?
In-Reply-To: <4dacb2560604201112q178ea545w16534b3c5a2a4d94@mail.gmail.com>
References: <4dacb2560604201112q178ea545w16534b3c5a2a4d94@mail.gmail.com>
Message-ID: <op.s8bkhnhi3oj628@l-daniel-burrs-powerbook-g4-17.local>

On Thu, 20 Apr 2006 14:12:10 -0400, Joseph Turian <turian at gmail.com> wrote:

> [Posting this to twisted and zope3 user, since I'm not sure which is
> more germane]
>
> I just install zope 3.2.0 on Gentoo.
> I then manually configured a zope instance in /var/lib/zope/zope-3.2.0/
> When I access the zope server at 192.168.0.100:8080, I get the
> following error messages on my terminal:
>
> What do these mean?
> How can I resolve them?
>

Those are errors, yes, and they are coming from twisted.web2.  In fact,  
though, they aren't really errors in the sense of "something is broken".   
The problem is that web2 is raising an error rather than just returning a  
"Not Modified" response code.  It is harmless, although I do find it  
annoying myself.

Not sure what the fix would be; perhaps one of the web2 devs could opine  
on that?

Hope this helps,

L. Daniel Burr

> ------
> 2006-04-20T13:45:39 WARNING ZODB.FileStorage Ignoring index for
> /var/lib/zope/zope-3.2.0/var/Data.fs
> ------
> 2006-04-20T13:45:39 INFO root -- HTTP:localhost:8080 Server started.
> 	Hostname: localhost
> 	Port: 8080
> ------
> 2006-04-20T13:45:39 INFO root Startup time: 4.060 sec real, 4.070 sec CPU
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
> /@@login.html?nextURL=http%3A//192.168.0.100%3A8080/%40%40index.html
> HTTP/1.1" 303 0 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows; U;
> Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@index.html
> HTTP/1.1" 200 4392 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows;
> U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
> /@@/zope3_tablelayout.css HTTP/1.1" 304 0
> "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
> Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3.js
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/xmltree.js
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3logo.gif
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
> /@@singleBranchTree.xml HTTP/1.1" 200 289 "-" "Mozilla/5.0 (Windows;
> U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> 192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
> /@@/zope-app-folder-interfaces-IFolder-zmi_icon.gif HTTP/1.1" 304 0
> "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
> Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET /@@/pl.gif
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
>
>
>
>
> --
> http://www.cs.nyu.edu/~turian/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
L. Daniel Burr
Chief Technology Officer
Illumaware Corporation



From akrherz at iastate.edu  Thu Apr 20 16:04:57 2006
From: akrherz at iastate.edu (Daryl Herzmann)
Date: Thu, 20 Apr 2006 15:04:57 -0500 (CDT)
Subject: [Twisted-Python] t.w jabber client question
Message-ID: <Pine.LNX.4.64.0604201501020.2597@akrherz-laptop.agron.iastate.edu>

Hi,

I am getting my feet wet with Twisted Words Jabber and have hit a wall. 
Here is my code:

from twisted.words.protocols.jabber import client, jid
from twisted.words.xish import domish
from twisted.internet import reactor

def sendMessage(factory, body):
     message = domish.Element(("jabber:client","message"))
     message['to']   = "me at myserver.com"
     message.addElement('body', content = body)
     message.addElement('subject', content ="Test")

     # What goes here?
     #factory.please_sendme_to_server(message)

myJID = jid.JID('guest at myserver.com/twisted_words')
factory = client.basicClientFactory(myJID, "password")
reactor.connectTCP('myserver.com',5222, factory)
reactor.callLater(5, sendMessage, factory, "Hi there" )
reactor.run()

So my question is how to send a message?  I can't seem to figure it out...

TIA,
   daryl



From manlio_perillo at libero.it  Fri Apr 21 11:11:30 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 21 Apr 2006 13:11:30 -0200
Subject: [Twisted-Python] pgasync project status
Message-ID: <4448F622.3040102@libero.it>

Hi.

Someone knows if this project is still active?


Thanks  Manlio Perillo



From exarkun at twistedmatrix.com  Sun Apr 23 01:05:02 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 23 Apr 2006 05:05:02 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1145768702.18.1785063894@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-16 through 2006-04-23
Bugs opened: 15    Bugs closed: 15  Total open bugs: 589 (+0)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +4  |Highest:  +0          |Conch:               -2  
|Enhancement:  -4  |High:     -2          |Core:                +2  
                   |Normal:   +4          |Mail:                +1  
                   |Low:      -2          |Pydoctor:            -1  
                                          |Release Management:  -1  
                                          |Trial:               +2  
                                          |Website:             -1  
                                          |Words:               +0  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1654] Optionally provide prefix context to serialization of domish Elements. (opened by ralphm)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1654

                    ===== High =====
[#1655] typos (group<->user) in twisted.words.service (opened by j2a)
    defect          words      http://twistedmatrix.com/trac/ticket/1655

                    ===== Normal =====
[#1646] trial should support color output on win32 as well (opened by glyph)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1646

[#1647] make t.i.i.IReactorCore.iterate.__doc__ much more unfriendly (opened by mwh)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1647

[#1648] twisted.mail.imap4.IMAP4Client.append docstring (opened by synapsis)
    defect          mail       http://twistedmatrix.com/trac/ticket/1648

[#1649] unused parameters in IRCClient.register (opened by synapsis)
    defect          words      http://twistedmatrix.com/trac/ticket/1649

[#1650] t.p.socks thinks getPeer() returns a tuple (opened by PenguinOfDoom)
    defect          core       http://twistedmatrix.com/trac/ticket/1650

[#1651] twisted.trial.unittest.TestCase.assertFailure does not properly respect --tbformat when displaying tracebacks (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1651

[#1652] xish' EventDispatcher grinds to a halt when using many different one-time observers (opened by ralphm)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1652

[#1653] Redirect documentation from private to public location (opened by jknight)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1653

[#1657] iocpreactor stfuProducer keyerror (opened by ghazel)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1657

[#1658] conch plugin stomps manhole plugin (opened by mfeif)
    defect          core       http://twistedmatrix.com/trac/ticket/1658

[#1659] manhole access hangs reactor if you try to use the help feature (opened by mfeif)
    defect          core       http://twistedmatrix.com/trac/ticket/1659

[#1660] using conch plugin, cannot load the namespace (opened by mfeif)
    defect          core       http://twistedmatrix.com/trac/ticket/1660

                    ===== Low =====
[#1656] wxdemo.py uses deprecated wxPython API (opened by mcmillen)
    defect          core       http://twistedmatrix.com/trac/ticket/1656



Closed Bugs
______________________
                    ===== Highest =====
[#1634] Add ralphm to the matrix (opened by ralphm, closed by PenguinOfDoom, fixed)
    defect          release management http://twistedmatrix.com/trac/ticket/1634

                    ===== High =====
[#932 ] Add description of xish to its project site (opened by hypatia, closed by ralphm, wontfix)
    defect          website    http://twistedmatrix.com/trac/ticket/932

[#1444] twisted.words.xish.domish doesn't deal with namespaces properly (opened by ralphm, closed by ralphm, fixed)
    defect          words      http://twistedmatrix.com/trac/ticket/1444

[#1406] Worries about copyTo/moveTo additions to filepath (opened by jknight, closed by glyph, fixed)
    defect          conch      http://twistedmatrix.com/trac/ticket/1406

                    ===== Normal =====
[#1645] force the rest of win32-select tests to pass (opened by glyph, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1645

[#1280] Win32Gtk2Reactor (opened by dialtone, closed by glyph, fixed)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/1280

[#1641] sort subclasses in pydoctor's class hierarchy pages (opened by mwh, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1641

[#1643] package listings in pydoctor should be alpha-sorted (opened by mwh, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1643

[#597 ] "zvon.org" xish.xpath unittests (opened by mg, closed by ralphm, wontfix)
    enhancement     words      http://twistedmatrix.com/trac/ticket/597

[#1623] wxreactor/wxpython does not work well together - GUI "hangs" (opened by robertckcheung, closed by itamarst, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1623

[#1620] don't break an usage.Options error message when it contains encoded big5 (opened by radix, closed by radix, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1620

[#1252] Remove obselete branches from Twisted/branches (opened by hypatia, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1252

                    ===== Low =====
[#1047] Can we add a namespace module for Jabber related modules. (opened by tofu, closed by ralphm, wontfix)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1047

[#1082] Speex in NAT environments with jabber protocol (opened by rko, closed by ralphm, invalid)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1082

[#1312] yay twisted-bugs test (opened by radix, closed by ralphm, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1312





From twisted-python at 2xlp.com  Mon Apr 24 15:13:03 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 15:13:03 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
Message-ID: <BF61982A-90F1-431F-A56C-16F1EDB76D06@2xlp.com>


Hi all

I'm picking up twisted again ( haven't touched it for a while )

Luckily twisted plays great with psycopg2

I really prefer using the dictcursor in psycopg2 though:

does anyone know how to get twisted to utilize it?  i haven't been  
able to figure it out based on docs or google

a non twisted example of what i'm talking about follows
===

import psycopg2
from psycopg2 import extras

class DataBase:
	def __init__(self):
		self.profile = []
		self.db = psycopg2.connect 
( host="localhost",database="db",user="user",password="")
	def get_cursor(self):
		return self.db.cursor( cursor_factory = psycopg2.extras.DictCursor )








From fog at initd.org  Mon Apr 24 15:50:00 2006
From: fog at initd.org (Federico Di Gregorio)
Date: Mon, 24 Apr 2006 21:50:00 +0200
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <BF61982A-90F1-431F-A56C-16F1EDB76D06@2xlp.com>
References: <BF61982A-90F1-431F-A56C-16F1EDB76D06@2xlp.com>
Message-ID: <1145908200.4397.11.camel@localhost>

Il giorno lun, 24/04/2006 alle 15.13 -0400, Jonathan Vanasco ha scritto:
> Hi all
> 
> I'm picking up twisted again ( haven't touched it for a while )
> 
> Luckily twisted plays great with psycopg2
> 
> I really prefer using the dictcursor in psycopg2 though:

I use a "fake" dbapi module that wraps psycopg 2 and import it by giving
its name to the adbapi connection pool. Something like (let's suppose we
put it in a twistedpg.py module):

"""
from psycopg2 import *
from psycopg2 import _psycopg as _2psycopg
from psycopg2.extensions import connection as _2connection
from psycopg2.extras import DictCursor

del connect
def connect(*args, **kwargs):
    kwargs['connection_factory'] = connection
    return _2psycopg.connect(*args, **kwargs)

class connection(_2connection):
    def cursor(self):
        return _2connection.cursor(self, cursor_factory=DictCursor)
"""

Then:

"""
from twisted.enterprise import adbapi

mypool = adbapi.ConnectionPool("twistedpg", database="xxx", ...)
"""

Hope this helps,
federico

-- 
Federico Di Gregorio                         http://people.initd.org/fog
Debian GNU/Linux Developer                                fog at debian.org
INIT.D Developer                                           fog at initd.org
                   I came like Water, and like Wind I go. -- Omar Khayam
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa =?ISO-8859-1?Q?=E8?= una parte del messaggio
	firmata digitalmente
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060424/457251f9/attachment.pgp 

From twisted-python at 2xlp.com  Mon Apr 24 16:02:32 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 16:02:32 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
Message-ID: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>

that works perfectly.  thank you.




From twisted-python at 2xlp.com  Mon Apr 24 17:53:15 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 17:53:15 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
Message-ID: <71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>


On Apr 24, 2006, at 4:02 PM, Jonathan Vanasco wrote:

> that works perfectly.  thank you.

actually, i spoke too soon.

   i thought i was getting a dict, but it appears that I'm not.

i think it works for accessing a cursor directly, but i can't seem to  
get it to work with a ConnectionPool and deferred return

i definitely see twistedpd.connection.cursor called (for the dict  
cursor), but i can't trace to where its being used.

any suggestion ?  and thanks for pointing me to this direction so far.








From fog at initd.org  Mon Apr 24 17:58:35 2006
From: fog at initd.org (Federico Di Gregorio)
Date: Mon, 24 Apr 2006 23:58:35 +0200
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
Message-ID: <1145915916.4397.13.camel@localhost>

Il giorno lun, 24/04/2006 alle 17.53 -0400, Jonathan Vanasco ha scritto:
> On Apr 24, 2006, at 4:02 PM, Jonathan Vanasco wrote:
> 
> > that works perfectly.  thank you.
> 
> actually, i spoke too soon.
> 
>    i thought i was getting a dict, but it appears that I'm not.
> 
> i think it works for accessing a cursor directly, but i can't seem to  
> get it to work with a ConnectionPool and deferred return
> 
> i definitely see twistedpd.connection.cursor called (for the dict  
> cursor), but i can't trace to where its being used.

I really don't know. It works perfectly here. Maybe show us our code and
how the pool is called.

-- 
Federico Di Gregorio                         http://people.initd.org/fog
Debian GNU/Linux Developer                                fog at debian.org
INIT.D Developer                                           fog at initd.org
 And anyone who yells "fork" deserves to get one stuck in them.
                                                          -- Dan Winship
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa =?ISO-8859-1?Q?=E8?= una parte del messaggio
	firmata digitalmente
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060424/7e8a9fec/attachment.pgp 

From twisted-python at 2xlp.com  Mon Apr 24 19:30:33 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 19:30:33 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <1145915916.4397.13.camel@localhost>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
	<1145915916.4397.13.camel@localhost>
Message-ID: <3651D75B-0CDB-4C50-B592-EAADE4447A4B@2xlp.com>


On Apr 24, 2006, at 5:58 PM, Federico Di Gregorio wrote:
> I really don't know. It works perfectly here. Maybe show us our  
> code and
> how the pool is called.

good idea.  i'm kind of stressed out today - not thinking very  
clearly.  i'm probably dealing with a typo that i'm just not seeing.

i was using this w/twisted words, but i just copied the lines to  
replicate into the stub basic reactor .

===================
---------
twistedpg.py
---------
from psycopg2 import *
from psycopg2 import _psycopg as _2psycopg
from psycopg2.extensions import connection as _2connection
from psycopg2.extras import DictCursor

del connect
def connect(*args, **kwargs):
     kwargs['connection_factory'] = connection
     return _2psycopg.connect(*args, **kwargs)

class connection(_2connection):
     def cursor(self):
         return _2connection.cursor(self, cursor_factory=DictCursor)
===================
---------
test.py
---------
import twistedpg
from twisted.enterprise import adbapi

connection_pool = adbapi.ConnectionPool("twistedpg",  
host="localhost",database="aaaa",user="aaaa",password="" )

from twisted.internet.protocol import Factory, Protocol
from twisted.internet import reactor

class tester(Protocol):
     def connectionMade(self):
         self.transport.write(self.factory.quote+'\r\n')
         self.transport.loseConnection()

class SQLfactory(Factory):
     protocol = tester
     def __init__(self, quote=None):
         self.quote = self.db_sample__query().addCallback 
(self.print_result)
     def db_sample__query( self ):
         data = connection_pool.runQuery("SELECT * FROM useraccount",)
         return data
     def print_result( self , data ):
         print data

reactor.listenTCP(8007, SQLfactory("configurable quote"))
reactor.run()
===================




From dguest at zeeclor.mine.nu  Tue Apr 25 03:51:04 2006
From: dguest at zeeclor.mine.nu (David Guest)
Date: Tue, 25 Apr 2006 17:51:04 +1000
Subject: [Twisted-Python] Mail attachments
Message-ID: <444DD4E8.3010206@zeeclor.mine.nu>

Newby alert.

I am starting off with the "Twisted Mail Tutorial: Building an SMTP
Client from Scratch"
(http://twistedmatrix.com/users/warner/doc-latest/mail/tutorial/smtpclient/smtpclient.html#auto8).


I would like to send an attachment with my email. I presume I do this
through the sendEmail function but how to achieve is beyond me at the
moment. :-(

TIA.

David

-- 
Tab's to the left of me, Enter's to the right
Here I am, stuck in the middle with U 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3517 bytes
Desc: S/MIME Cryptographic Signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060425/bcf70c00/attachment.bin 

From Marcin.Kasperski at softax.com.pl  Tue Apr 25 09:00:26 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Tue, 25 Apr 2006 15:00:26 +0200
Subject: [Twisted-Python] Mail attachments
In-Reply-To: <444DD4E8.3010206@zeeclor.mine.nu>
References: <444DD4E8.3010206@zeeclor.mine.nu>
Message-ID: <200604251500.27082.Marcin.Kasperski@softax.com.pl>


> I would like to send an attachment with my email. I presume I
> do this through the sendEmail function but how to achieve is
> beyond me at the moment. :-(

Here is the code I use (to send PGN files, which are just text 
files). If you want to send images or binary files, you need to 
change the way pgn_part is constructed.

from email import Encoders
from email.Message import Message
from email.MIMEBase import MIMEBase
from email.MIMEMultipart import MIMEMultipart
#from email.MIMEImage import MIMEImage
from email.MIMEText import MIMEText

class EmailSender:
    def __init__(self, from_addr, smtp_host, 
                 smtp_user = None, smtp_password = None):
        self.from_addr = from_addr
        self.smtp_host = smtp_host
        self.smtp_user = smtp_user
        self.smtp_password = smtp_password
    def sendPGN(self, to_addr_list, subject, pgn,
                intro_text = None, 
                preamble = 'Some preamble', 
                epilogue = 'Some epilogue',
                attachment_name = 'attachmentname'):
        msg = MIMEMultipart()
        msg['Subject'] = subject
        msg['From'] = self.from_addr
        msg['To'] = ", ".join(to_addr_list)
        msg.preamble = preamble
        msg.epilogue = epilogue
        if intro_text:
            msg.attach( MIMEText(intro_text, 'plain') )
        pgn_part = MIMEBase('text', 'plain')
        pgn_part.set_payload(pgn)
        #Encoders.encode_base64(pgn)
        pgn_part.add_header('Content-Disposition', 'attachment', 
filename=attachment_name+'.pgn')
        msg.attach(pgn_part)
        deferred = smtp.sendmail(self.smtp_host, self.from_addr, 
to_addr_list, msg.as_string())
        return deferred



From rudy at goldenhelix.com  Tue Apr 25 13:32:21 2006
From: rudy at goldenhelix.com (Gabe Rudy)
Date: Tue, 25 Apr 2006 11:32:21 -0600
Subject: [Twisted-Python] Sending large amounts of data over Pb
In-Reply-To: <200604251500.27082.Marcin.Kasperski@softax.com.pl>
References: <444DD4E8.3010206@zeeclor.mine.nu>
	<200604251500.27082.Marcin.Kasperski@softax.com.pl>
Message-ID: <200604251132.21710.rudy@goldenhelix.com>

Hey guys,

In a few specific cases (not as a general case) I'm sending a significant list 
of items over pb in a pb.RemoteCache/pb.Cacheable object pair. To give you an 
idea, it's a list of ~4000 tuples where each tuples has about ~10 strings of 
~10 length.

Right now twisted works fine, but takes about 10 seconds to 
serialize/send/unserialize the data, or I guess in twisted terms, 
banana/send/recv/banana the data.

Since my list is all primitives I thought maybe pickling it before sending 
would speed it up as banana would have to do less work, but I get a 

twisted.spread.banana.BananaError: string is too long to send (706378)

Is that an arbitrary length limit or technically significant?

Is there other methods of speeding this up?

Or alternatively, is it possible (within pb) to receive the state of  a 
RemoteCache or RemoteObject in definable chunks (say 100 items from the list 
at a time), allowing me to start displaying the data in my UI and adding more 
to it as it comes async?

Thanks,
--gabe




From nico at tekNico.net  Tue Apr 25 14:15:54 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Tue, 25 Apr 2006 20:15:54 +0200
Subject: [Twisted-Python] Re: Sending large amounts of data over Pb
In-Reply-To: <200604251132.21710.rudy@goldenhelix.com>
References: <444DD4E8.3010206@zeeclor.mine.nu>	<200604251500.27082.Marcin.Kasperski@softax.com.pl>
	<200604251132.21710.rudy@goldenhelix.com>
Message-ID: <444E675A.8010302@tekNico.net>

> Since my list is all primitives I thought maybe pickling it before sending 
> would speed it up as banana would have to do less work, but I get a 
> 
> twisted.spread.banana.BananaError: string is too long to send (706378)

There's an hard-wired limit of 640KB that, according to a(n in)famous
figure, should be enough for anyone. ;-)


> Is that an arbitrary length limit or technically significant?
> 
> Is there other methods of speeding this up?

Slowness of PB with big data is a known problem, the situation should have
gotten better with newpb. Look at this thread:

http://twistedmatrix.com/pipermail/twisted-python/2005-September/011297.html


-- 
Nicola Larosa - http://www.tekNico.net/

It is not only that power corrupts and absolute power corrupts absolutely.
It is also that power attracts the corruptible. -- David Icke, January 2006





From rudy at goldenhelix.com  Tue Apr 25 15:43:45 2006
From: rudy at goldenhelix.com (Gabe Rudy)
Date: Tue, 25 Apr 2006 13:43:45 -0600
Subject: [Twisted-Python] Re: Sending large amounts of data over Pb
In-Reply-To: <444E675A.8010302@tekNico.net>
References: <444DD4E8.3010206@zeeclor.mine.nu>
	<200604251132.21710.rudy@goldenhelix.com>
	<444E675A.8010302@tekNico.net>
Message-ID: <200604251343.46348.rudy@goldenhelix.com>

On Tuesday 25 April 2006 12:15 pm, Nicola Larosa wrote:
> > twisted.spread.banana.BananaError: string is too long to send (706378)
>
> There's an hard-wired limit of 640KB that, according to a(n in)famous
> figure, should be enough for anyone. ;-)

Ah come on! Since when have we been limiting ourselves the the 
small-mindedness of _business_ men and their inaccurate haughty predictions.

And where are these computers we can't recognize because speech has become the 
"one true" interface?  ;)



From exarkun at divmod.com  Tue Apr 25 17:08:53 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 25 Apr 2006 17:08:53 -0400
Subject: [Twisted-Python] Sending large amounts of data over Pb
In-Reply-To: <200604251132.21710.rudy@goldenhelix.com>
Message-ID: <20060425210853.22481.144447940.divmod.quotient.17225@ohm>

On Tue, 25 Apr 2006 11:32:21 -0600, Gabe Rudy <rudy at goldenhelix.com> wrote:
>Hey guys,
>
>In a few specific cases (not as a general case) I'm sending a significant list
>of items over pb in a pb.RemoteCache/pb.Cacheable object pair. To give you an
>idea, it's a list of ~4000 tuples where each tuples has about ~10 strings of
>~10 length.
>
>Right now twisted works fine, but takes about 10 seconds to
>serialize/send/unserialize the data, or I guess in twisted terms,
>banana/send/recv/banana the data.
>
>Since my list is all primitives I thought maybe pickling it before sending
>would speed it up as banana would have to do less work, but I get a
>
>twisted.spread.banana.BananaError: string is too long to send (706378)
>
>Is that an arbitrary length limit or technically significant?

Arbitrary.

>
>Is there other methods of speeding this up?
>
>Or alternatively, is it possible (within pb) to receive the state of  a
>RemoteCache or RemoteObject in definable chunks (say 100 items from the list
>at a time), allowing me to start displaying the data in my UI and adding more
>to it as it comes async?

I'm not sure how you are using RemoteCache, but the general technique here is to use a pager.  Take a look at twisted.spread.util.Pager, and the two examples/tools that come with it, StringPager and FilePager.

Jean-Paul



From rudy at goldenhelix.com  Tue Apr 25 18:38:19 2006
From: rudy at goldenhelix.com (Gabe Rudy)
Date: Tue, 25 Apr 2006 16:38:19 -0600
Subject: [Twisted-Python] Sending large amounts of data over Pb
In-Reply-To: <20060425210853.22481.144447940.divmod.quotient.17225@ohm>
References: <20060425210853.22481.144447940.divmod.quotient.17225@ohm>
Message-ID: <200604251638.20577.rudy@goldenhelix.com>


> I'm not sure how you are using RemoteCache, but the general technique here
> is to use a pager.  Take a look at twisted.spread.util.Pager, and the two
> examples/tools that come with it, StringPager and FilePager.
>
Very nice, I think that will be very usefull. It may put some holes in my 
abstraction with the current way I use RemoteCache, but I could imagine some 
design changes that would work.

Here is the idea I might try (if you care to comment)

Background: RemoteCachedTable represents some table view of a server-side 
database, thus on the client side it might go something like this (very 
simplified and NOT TESTED):

from twisted.spread import pb, util
class TableDataCollector(util.CallbackPageCollector):
    def __init__(self):
        self.table = None

    def remote_gotPage(self, page):
        self.table.data.extend(page)
        self.table.updateUi(False)

    def remote_endedPaging(self):
        self.table.updateUi(True)

class RemoteCachedTable(pb.RemoteCache):
   def setCopyableState(self,state):
        self.headers = state['headers']
        self.dataIsSmall = state['dataIsSmall']
        if self.dataIsSmall: #Ship the table data if its small, <100 rows
            self.data = state['data']
        else: #We receive the data through a Pager/Collector
            self.data = []
            self.collector = state['collector'] #A TableDataCollector instance
            self.collector.table = self

   def updateUi(self, finished):
        pass #Notify UI of changes to self.data

   #various observe_* methods go here

Obviously the server side stuff is not shown, but this depicts my intent :)

I don't think I have that right though. The "Server" here can not create the 
TableDataCollector instance and pass it back with the state dictionary can 
it? Somehow my "Client" needs to create the instance and send it to the 
server, at which point the server creates the StringPager (or TablePager), 
eh?

--gabe



From andrew-twisted at puzzling.org  Tue Apr 25 21:57:11 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 26 Apr 2006 11:57:11 +1000
Subject: [Twisted-Python] Re: How to make Twisted changes?
In-Reply-To: <1145614743.21217.31.camel@jsilver.rdgoffice.blackspider.com>
References: <1145614743.21217.31.camel@jsilver.rdgoffice.blackspider.com>
Message-ID: <20060426015711.GB6404@steerpike.home.puzzling.org>

[apologies for the slow reply, I've been on an internet-free holiday]

On Fri, Apr 21, 2006 at 11:19:03AM +0100, Jeff Silver wrote:
> Hello spiv,
> 
> You were kind enough to comment "Patches are certainly welcome!" on my
> twisted ticket #1154. I submitted a patch for this, but nothing has been
> done with it. Is there a description somewhere of the process that I (as
> a non-committer) should follow to get submissions reviewed and
> (hopefully) committed? I looked at the "Ultimate Quality Development
> System" page. While that says that non-committers can submit patches
> (which I've done), it doesn't say what, if anything, I should do next.
> 
> Advice, please?

I'd bug the mailing list (or possibly IRC channel) for reviewers.
Unfortunately, nagging seems to be a necessarily evil to get your patch heard
sometimes.  I can't speak for all the developers, but I don't mind being nagged
because I realise this.  Well, I don't mind much <wink>.

Also, I think you should unassign the ticket from yourself seeing as there's
nothing for you to do to it at the moment (although this alone isn't likely make
much difference, we just don't have enough people looking over unassigned
issues).  You could try assigning to developers at random (glyph thinks this is
a good idea), but I don't think this really works very well -- e.g. I just spent
over a week not looking at the internet at all, let alone the issue tracker, so
things randomly assigned to me wouldn't have got anywhere.

-Andrew.




From mary-twisted at puzzling.org  Tue Apr 25 22:23:52 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 26 Apr 2006 12:23:52 +1000
Subject: [Twisted-Python] The End, also: documentation
Message-ID: <20060426022351.GB12864@sourdust.home.puzzling.org>

This is my resignation as Twisted's lead documentation person.

Rest assured I'm not resigning due to any subset of: burning
disillusionment, raging anger, or rampaging untreated mental illness.
Rather, I have a bundle of other projects, and they're increasingly
unrelated to Twisted, which means that I'm not using it for my own
projects, and, sadly, I don't have the energy left over to task switch
into an unrelated project enough to lead part of it.

I'm also, as it turns out, much more interested in reviewing and/or
editing documentation than I am in writing it. The upside of this is
that I'll continue to make myself available as a reviewer of
documentation patches and/or an editor, if needed. Feel free to assign
bugs on this basis. (I will probably not be reading the mailing list,
but I don't make myself difficult to find on IRC.) I will unassign other
bugs from myself soon.

This obviously leaves gaping holes in the greater Twisted universe for
people anxious to advertise the glory of Twisted to the admiring masses.
Do submit some documentation patches... It also leaves a vacancy for
someone who is willing to be caretaker for the documentation as a whole,
fixing minor bugs, farming out work and rearranging things according to
their taste. Apply here, I suspect :)

Thanks,

-Mary



From mary-twisted at puzzling.org  Tue Apr 25 22:24:49 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 26 Apr 2006 12:24:49 +1000
Subject: [Twisted-Python] planet.twistedmatrix.com
Message-ID: <20060426022449.GC12864@sourdust.home.puzzling.org>

Is anyone able to take this over? It would make the most sense, I think,
to host it where the main website is hosted. As soon as someone
volunteers, I'll pass on all necessary files and from there it's just a
question of setting up a cron job.

-Mary



From twisted-python at 2xlp.com  Wed Apr 26 01:18:20 2006
From: twisted-python at 2xlp.com (Jonathan)
Date: Wed, 26 Apr 2006 01:18:20 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
Message-ID: <658CF638-4049-4B88-8AF9-3E7C9D736F16@2xlp.com>

please ignore everything i said.

after several hours of debugging and testing, i realized that it  
worked all along.  it was doing a dump of result, expecting it to be  
a dict - then saw a row.

eventually i realized it was a dictrow class, and the addressing  
happened on the fly.

at least now I know more about psycopg and twisted enterprise than i  
ever wanted to.


//Jonathan Vanasco





From twisted at ralphm.ik.nu  Wed Apr 26 03:00:49 2006
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Wed, 26 Apr 2006 09:00:49 +0200
Subject: [Twisted-Python] planet.twistedmatrix.com
In-Reply-To: <20060426022449.GC12864@sourdust.home.puzzling.org>
References: <20060426022449.GC12864@sourdust.home.puzzling.org>
Message-ID: <20060426070049.GA98650@ik.nu>

On Wed, Apr 26, 2006 at 12:24:49PM +1000, Mary Gardiner wrote:
> Is anyone able to take this over? It would make the most sense, I think,
> to host it where the main website is hosted. As soon as someone
> volunteers, I'll pass on all necessary files and from there it's just a
> question of setting up a cron job.

I've maintained Planet Jabber and Planet FOSDEM for a while now. It
would be no problem to add Planet Twisted to the same setup.

-- 
Groetjes,

ralphm



From general at eepatents.com  Wed Apr 26 12:40:45 2006
From: general at eepatents.com (Ed Suominen)
Date: Wed, 26 Apr 2006 09:40:45 -0700
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <E1FYe0V-0002SK-02@pyramid.twistedmatrix.com>
References: <E1FYe0V-0002SK-02@pyramid.twistedmatrix.com>
Message-ID: <444FA28D.6000008@eepatents.com>

Mary Gardiner wrote, utterly without influence from burning
> This is my resignation as Twisted's lead documentation person.
> 
> Rest assured I'm not resigning due to any subset of: burning
> disillusionment, raging anger, or rampaging untreated mental illness.
> Rather, I have a bundle of other projects, and they're increasingly
> unrelated to Twisted, which means that I'm not using it for my own
> projects, and, sadly, I don't have the energy left over to task switch
> into an unrelated project enough to lead part of it.
> 
> I'm also, as it turns out, much more interested in reviewing and/or
> editing documentation than I am in writing it. The upside of this is
> that I'll continue to make myself available as a reviewer of
> documentation patches and/or an editor, if needed. Feel free to assign
> bugs on this basis. (I will probably not be reading the mailing list,
> but I don't make myself difficult to find on IRC.) I will unassign other
> bugs from myself soon.
> 
> This obviously leaves gaping holes in the greater Twisted universe for
> people anxious to advertise the glory of Twisted to the admiring masses.
> Do submit some documentation patches... It also leaves a vacancy for
> someone who is willing to be caretaker for the documentation as a whole,
> fixing minor bugs, farming out work and rearranging things according to
> their taste. Apply here, I suspect  :) 

Mary, this Twisted user for one really appreciates the efforts you've
put forth. Indeed, as one of the biggest complainers about Twisted's
docs, I probably appreciate those efforts more than many users. (That
sounds backwards until you think about it for a while, like a lot of
legal language.)

I'm thinking about suggesting (gasp!) myself as your replacement. The
logical, responsible part of my brain is telling me that I'm insane for
doing this. But there's another part of my brain that has an illogical,
probably unhealthy fascination with Twisted and is raising its hand and
squirming on the uncomfortable wooden schooldesk chair with those huge
uncomfortable screw heads sticking out, yelling "Call on me! Call on me!"

As a registered patent agent (http://eepatents.com), I do a lot of
writing as part of my work and bill quite a bit per hour for doing so.
(Here that logical, responsible part is screaming, "So WHY do you want
to do more writing for FREE?") I have complained and whined about the,
shall we say "mixed," state of Twisted's docs for years now on #twisted
and am intrigued by the idea of putting my mouth (dictation) where my
mouth (complaints) is. Plus, (branch) commit access would be kind of
cool for writing those docstrings where I just can't stand seeing those
glaring holes right below "def" or "class"...

It goes without saying (but I'll say it anyway) that there is and would
be absolutely no professional relationship between me and the Twisted
project. (Most free software types aren't all that enamored with
patents, anyhow...) I have kind of enjoyed the decidedly unprofessional
relationship that has developed on #twisted, though.

Comments welcome. Any positive ones will likely be viewed with suspicion
and will raise pangs of regret at my making this rash posting. The
negative ones will likely be viewed with relief, at least by the
aforementioned logical, responsible part...

Best regards,

Ed Suominen
Logical, responsible patent agent
Inexplicably passionate Twisted dabbler




From fog at initd.org  Wed Apr 26 14:23:38 2006
From: fog at initd.org (Federico Di Gregorio)
Date: Wed, 26 Apr 2006 20:23:38 +0200
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <658CF638-4049-4B88-8AF9-3E7C9D736F16@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
	<658CF638-4049-4B88-8AF9-3E7C9D736F16@2xlp.com>
Message-ID: <1146075818.4390.14.camel@localhost>

Il giorno mer, 26/04/2006 alle 01.18 -0400, Jonathan ha scritto:
> please ignore everything i said.
> 
> after several hours of debugging and testing, i realized that it  
> worked all along.  it was doing a dump of result, expecting it to be  
> a dict - then saw a row.

Thank you for communicating this. I really like when it happens to
someone else; then I realize I am not the only one that goes straight to
debugging gcc assembler output looking for compiler bugs before noting
an unitialized variable. :D

-- 
Federico Di Gregorio                         http://people.initd.org/fog
Debian GNU/Linux Developer                                fog at debian.org
INIT.D Developer                                           fog at initd.org
  Put a GNOME on your desktop! [http://www.gnome.org]
                                      -- brought to you by One Line Spam
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa =?ISO-8859-1?Q?=E8?= una parte del messaggio
	firmata digitalmente
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060426/b7585d4e/attachment.pgp 

From tcj25 at cam.ac.uk  Wed Apr 26 17:13:22 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Wed, 26 Apr 2006 23:13:22 +0200
Subject: [Twisted-Python] Twisted's ability to handle many open connections.
Message-ID: <17487.57970.85904.437295@terry.jones.tc>

I'm completely new to Twisted. As I understand it, a Twisted server runs as
a single process - no forking, no threads. To me that implies that select
(or poll or pselect, etc) is being heavily used to feed data to Deferreds.

If that's the case, how does Twisted (portably) allow for a large number of
file descriptors?

I'm considering using Twisted for a project. Twisted would front requests
from the web, but also from (e.g.) remote command line applications via an
API.  These latter connections could potentially be numerous, and long
lived.  Should I be thinking about how Twisted deals with this, or does it
already scale to allow more simultaneous connections / file descriptors
than a naive server program would be able to maintain?

Given what looks like widespread use of Deferreds in Twisted, I suppose
that there is not a 1-1 relationship between connections and file
descriptors? If so this makes the issue more pressing.

Thanks for any help,
Terry



From glyph at divmod.com  Wed Apr 26 19:02:12 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Wed, 26 Apr 2006 19:02:12 -0400
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <17487.57970.85904.437295@terry.jones.tc>
Message-ID: <20060426230212.22481.210619728.divmod.quotient.17933@ohm>

On Wed, 26 Apr 2006 23:13:22 +0200, Terry Jones <tcj25 at cam.ac.uk> wrote:
>I'm completely new to Twisted. As I understand it, a Twisted server runs as
>a single process - no forking, no threads. To me that implies that select
>(or poll or pselect, etc) is being heavily used to feed data to Deferreds.

That's more or less accurate.  It sounds like you understand this, but because I can never repeat it enough: Deferreds don't do anything magic or get involved with select() directly, it's just that their callback() methods are called from other callbacks which are ultimately invoked as a result of the return value of select().

>If that's the case, how does Twisted (portably) allow for a large number of
>file descriptors?

Twisted doesn't do *anything* portably :).

On Windows, there is a reactor that supports a maximum of 63 concurrent events (assuming your process has no windows open).  On UNIX the default reactor is still select() based and will definitely bog down if you have too many simultaneous sockets open.  Sometimes it is handled quite badly!

However, the selection of a reactor is a configuration option, not an application-architecture issue (unless, of course, you are writing a GUI which has requirements for what event loop it will run on).

You can choose a reactor with the -r argument to twistd, trial, and other similar tools like axiomatic.  You can choose different reactors for different platforms.  Application code should be none the wiser.

>I'm considering using Twisted for a project. Twisted would front requests
>from the web, but also from (e.g.) remote command line applications via an
>API.  These latter connections could potentially be numerous, and long
>lived.  Should I be thinking about how Twisted deals with this, or does it
>already scale to allow more simultaneous connections / file descriptors
>than a naive server program would be able to maintain?

There are some pretty darn naive programs out there.  The default naive case of a server that I'm aware of accept()s one connection, reads (blocking) the entire socket, then writes a response.  That is 1 simultaneous connection: so in that case, yes, Twisted can do better :).  However, it doesn't use any crazy tricks, and is likely to scale far worse than something like ACE or Sandstorm, i.e. any research project designed specifically just to scale.  Scale is only one of Twisted's many considerations, as it aims to be a completely generic networking application layer.

The most scalable reactor you are likely to find on UNIX is the "poll" reactor.  There is a kqueue reactor but it is by all accounts terrible (ie, performs worse than poll due to unfortunate design decisions in the python/kqueue bindings) and needs to be rewritten.  In every case I'm aware of, other scalability concerns (usually the speed of Python itself) was an issue long before the IO overhead of simultaneous connections broke poll().  If your application has such a case, though, implementing an epoll, aio, kqueue, libevent, or <insert your totally non-portable, OS-specific, crazily scalable IO multiplexing API here> reactor should not be an inordinate amount of work.  Less work, at least, than building such a beast and then writing what amounts to 2/3 of the Twisted core around it anyway :).

>Given what looks like widespread use of Deferreds in Twisted, I suppose
>that there is not a 1-1 relationship between connections and file
>descriptors? If so this makes the issue more pressing.

Again, Deferreds do not create file descriptors or have anything to do with select().  They are simply a Python object abstraction for callbacks.

Depends what you mean by 'connections'.  listenTCP, listenUNIX, etc, create a listening socket.  They accept() on that, and each buildProtocol is invoked after a connected socket is created.  Each of those is a file descriptor.  If you keep disk files or pipes open outside of Twisted, those are also file descriptors, etc etc etc.  You can have virtual "connections" which multiplex  multiple Protocol objects over a single transport though, or otherwise have fewer file descriptors than "connections" in that sense.



From matt at pollenation.net  Wed Apr 26 19:18:44 2006
From: matt at pollenation.net (Matt Goodall)
Date: Thu, 27 Apr 2006 00:18:44 +0100
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <17487.57970.85904.437295@terry.jones.tc>
References: <17487.57970.85904.437295@terry.jones.tc>
Message-ID: <444FFFD4.1060909@pollenation.net>

Terry Jones wrote:
> I'm completely new to Twisted. As I understand it, a Twisted server runs as
> a single process - no forking, no threads.

Correct. Twisted is event driven. It doesn't need to fork and spawn 
threads to handle a lot of network connections at once.

However, Twisted is perfectly capable of managing any processes and 
threads an application *needs* to create. In fact, Twisted's core 
includes APIs specifically created to handle background processes and 
threads.


> To me that implies that select
> (or poll or pselect, etc) is being heavily used to feed data to Deferreds.

select/poll/whatever is at the core of Twisted's event loop, known as 
the 'reactor' but Deferreds are completely unrelated to data delivery.

A Deferred is a callback mechanism, nothing more. A function typically 
returns a Deferred to say, "hey, you asked me to do something and I will 
give my response ... just not right now".


> 
> If that's the case, how does Twisted (portably) allow for a large number of
> file descriptors?

As you recognised, Twisted uses a select loop so I'm not quite sure what 
your question means. However ...

Twisted chooses the best available reactor implementation for the 
platform. "Best", here, probably meaning most available (default?) 
rather than fastest.

I'm no expert here but on Linux the reactor really does use a select() 
loop, on win32 it uses the win32 equivalent of a select loop 
(WSAEventSelect and MsgWaitForMultipleObjects, or something), and I 
believe it uses poll on the BSDs.

If the "best" reactor is not actually the best (if you see what I mean!) 
then you can manually install a non-default reactor. There are plenty to 
choose from.

For instance, on Linux if you want to handle a huge number of 
simultaneous connections then installing a poll-based reactor is 
probably a good idea. If your application uses GTK+ then you would 
install a GTK+ reactor.


> I'm considering using Twisted for a project. Twisted would front requests
> from the web, but also from (e.g.) remote command line applications via an
> API.

This is what Twisted excels at - multi-protocol network applications. 
I've done it many times now and it just works.

Twisted already includes support (of varying quality) for most common 
protocols but it's very easy to add new protocols if necessary.


> These latter connections could potentially be numerous, and long
> lived.  Should I be thinking about how Twisted deals with this, or does it
> already scale to allow more simultaneous connections / file descriptors
> than a naive server program would be able to maintain?

Twisted is event driven and most people believe that event driven scales 
better, especially for network-related work. I therefore believe Twisted 
will *help* you write code that will scale to a high number of 
simultaneous connections. Twisted does perform any magic though.

You will need to understand event driven programming to scale up, 
otherwise you're likely to block the application from doing more than 
one thing at a time (in the cooperatively multitasking sense) making 
your application utterly unscalable.

Also, note that Twisted does not magic away other common problems 
associated with scalability. The obvious one that springs to mind 
(because it bit me recently :-/) is the maximum number of file 
descriptors a non-root Linux process can open per process.

> 
> Given what looks like widespread use of Deferreds in Twisted, I suppose
> that there is not a 1-1 relationship between connections and file
> descriptors? If so this makes the issue more pressing.

There is absolutely a 1-1 relationship between connections and file 
descriptors but Deferred have nothing to do with it.

It's quite possible to write a Twisted application without ever using a 
Deferred. If your application can respond immediately (well, very 
quickly) to requests that arrive from the network then you don't need 
Deferreds.

You need a Deferred when you cannot respond immediately. In that case 
you would create a Deferred and store it somewhere, spawn something 
*non-blocking* to handle the request and return the Deferred to the 
caller. Then, when the non-blocking thing completes, you callback via 
the Deferred you stored to let the caller know the result.

> 
> Thanks for any help,
> Terry

Hope it did help!

Cheers, Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt at pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.



From tcj25 at cam.ac.uk  Wed Apr 26 19:30:00 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Thu, 27 Apr 2006 01:30:00 +0200
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: Your message at 19:02:12 on Wednesday, 26 April 2006
References: <17487.57970.85904.437295@terry.jones.tc>
	<20060426230212.22481.210619728.divmod.quotient.17933@ohm>
Message-ID: <17488.632.787174.515958@terry.jones.tc>

>>>>> "glyph" == glyph  <glyph at divmod.com> writes:

glyph> That's more or less accurate.  It sounds like you understand this,
glyph> but because I can never repeat it enough: Deferreds don't do
glyph> anything magic or get involved with select() directly

Ok, got it.

glyph> On Windows, there is a reactor that supports a maximum of 63
glyph> concurrent events (assuming your process has no windows open).  On
glyph> UNIX the default reactor is still select() based and will definitely
glyph> bog down if you have too many simultaneous sockets open.  Sometimes
glyph> it is handled quite badly!

glyph> However, the selection of a reactor is a configuration option, not
glyph> an application-architecture issue (unless, of course, you are
glyph> writing a GUI which has requirements for what event loop it will run
glyph> on).

glyph> You can choose a reactor with the -r argument to twistd, trial, and
glyph> other similar tools like axiomatic.  You can choose different
glyph> reactors for different platforms.  Application code should be none
glyph> the wiser.

Thanks for the details. Sounds like I can handle the problem, if it ever
happens, by simply bumping FD_SETSIZE and rebuilding the kernel, then
proceeding as normal. And/or drop old connections.

glyph> If your application has such a case, though, implementing an epoll,
glyph> aio, kqueue, libevent, or <insert your totally non-portable,
glyph> OS-specific, crazily scalable IO multiplexing API here> reactor
glyph> should not be an inordinate amount of work.  Less work, at least,
glyph> than building such a beast and then writing what amounts to 2/3 of
glyph> the Twisted core around it anyway :).

Ok, great. I'm actually backing my way out of using lots of already written
low-level asynchronous networking code, my own RPC mechanism, etc., in
favor of letting someone else do that work :-) So I do know what you mean,
and agree.

Thanks again.

Terry



From glyph at divmod.com  Wed Apr 26 19:33:19 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Wed, 26 Apr 2006 19:33:19 -0400
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <444FA28D.6000008@eepatents.com>
Message-ID: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>

On Wed, 26 Apr 2006 09:40:45 -0700, Ed Suominen <general at eepatents.com> wrote:

>Mary, this Twisted user for one really appreciates the efforts you've
>put forth. Indeed, as one of the biggest complainers about Twisted's
>docs, I probably appreciate those efforts more than many users. (That
>sounds backwards until you think about it for a while, like a lot of
>legal language.)

I think that, oddly enough, Mary's resignation comes because she was the most dilligent member of the team, taking her documentation-maintenance responsibilities more seriously than almost anyone else over the packages they maintain (myself included).

>I'm thinking about suggesting (gasp!) myself as your replacement. The
>logical, responsible part of my brain is telling me that I'm insane for
>doing this. But there's another part of my brain that has an illogical,
>probably unhealthy fascination with Twisted and is raising its hand and
>squirming on the uncomfortable wooden schooldesk chair with those huge
>uncomfortable screw heads sticking out, yelling "Call on me! Call on me!"

No need to insist - with the level of competition we usually have, you're in!

The position of "documentation maintainer" is a bit unusual since it was actually taken consciously and willingly.  Usually the protocol is this: I appoint someone for a task, which they are not qualified to do.  Then, they have to fight a bear if they don't want to do it.

Now that you've volunteered, there's no getting out of it.  I mean, do you want to fight a bear?  I wouldn't.  Bears are *scary* - just ask Stephen Colbert.

>Comments welcome. Any positive ones will likely be viewed with suspicion
>and will raise pangs of regret at my making this rash posting. The
>negative ones will likely be viewed with relief, at least by the
>aforementioned logical, responsible part...

Well, I guess you could consider my comment positive.  I think you'll do a great job, since few people seem to care so much about documentation.

By the way, do you know anyone who might be similarly duped into becoming the website maintainer?  (might you?)



From tcj25 at cam.ac.uk  Wed Apr 26 19:35:21 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Thu, 27 Apr 2006 01:35:21 +0200
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: Your message at 00:18:44 on Thursday, 27 April 2006
References: <17487.57970.85904.437295@terry.jones.tc>
	<444FFFD4.1060909@pollenation.net>
Message-ID: <17488.953.898515.457774@terry.jones.tc>

Hi Matt. Thanks for your answer too.

>>>>> "Matt" == Matt Goodall <matt at pollenation.net> writes:

>> If that's the case, how does Twisted (portably) allow for a large number of
>> file descriptors?

Matt> As you recognised, Twisted uses a select loop so I'm not quite sure what 
Matt> your question means.

You get to it below.

Matt> You will need to understand event driven programming to scale up, 
Matt> otherwise you're likely to block the application from doing more than 
Matt> one thing at a time (in the cooperatively multitasking sense) making 
Matt> your application utterly unscalable.

I'm already a believer, no problem there.

Matt> Also, note that Twisted does not magic away other common problems 
Matt> associated with scalability. The obvious one that springs to mind 
Matt> (because it bit me recently :-/) is the maximum number of file 
Matt> descriptors a non-root Linux process can open per process.

Right - that was what I was referring to originally. Sorry that wasn't
clear.

Matt> There is absolutely a 1-1 relationship between connections and file 
Matt> descriptors but Deferred have nothing to do with it.

OK.

Matt> Hope it did help!

Yes. Plus, it's nice to see how quickly a mailing list reacts when you're
thinking of using a new product :-) Twisted has a bit of a reputation for
being obscure, but it looks much better to me than any alternative - at
least for serious networking tasks (not just serving web pages fished up of
the nearest database). I have high hopes.

Anyway, thanks again.

Terry



From mary-twisted at puzzling.org  Wed Apr 26 20:01:50 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Thu, 27 Apr 2006 10:01:50 +1000
Subject: [Twisted-Python] planet.twistedmatrix.com
In-Reply-To: <20060426070049.GA98650@ik.nu>
References: <20060426022449.GC12864@sourdust.home.puzzling.org>
	<20060426070049.GA98650@ik.nu>
Message-ID: <20060427000150.GB23105@sourdust.home.puzzling.org>

On Wed, Apr 26, 2006, Ralph Meijer wrote:
> I've maintained Planet Jabber and Planet FOSDEM for a while now. It
> would be no problem to add Planet Twisted to the same setup.

Thanks. I'll forward you the templates and config in the next day or
two.

-Mary



From nico at tekNico.net  Thu Apr 27 04:41:31 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu, 27 Apr 2006 10:41:31 +0200
Subject: [Twisted-Python] Re: The End, also: documentation
In-Reply-To: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
References: <444FA28D.6000008@eepatents.com>
	<20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
Message-ID: <e2q03t$tog$1@sea.gmane.org>

> By the way, do you know anyone who might be similarly duped into
> becoming the website maintainer?  (might you?)

Duped, indeed. OK, I'll bite. Where do I sign?

-- 
Nicola Larosa - http://www.tekNico.net/

Our society definitely needs a serious conversation about the fundamental
freedoms we are sacrificing in a misguided attempt to keep us safe from
terrorism. It feels both surreal and sickening to have to defend our
fundamental freedoms against those who want to stop people from sharing
music. How is it possible that we can contemplate so much damage to our
society simply to protect the business model of a handful of companies?
 -- Bruce Schneier, December 2005




From exarkun at divmod.com  Thu Apr 27 09:10:12 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 27 Apr 2006 09:10:12 -0400
Subject: [Twisted-Python] Re: The End, also: documentation
In-Reply-To: <e2q03t$tog$1@sea.gmane.org>
Message-ID: <20060427131012.22481.1310135984.divmod.quotient.18360@ohm>

On Thu, 27 Apr 2006 10:41:31 +0200, Nicola Larosa <nico at teknico.net> wrote:
>> By the way, do you know anyone who might be similarly duped into
>> becoming the website maintainer?  (might you?)
>
>Duped, indeed. OK, I'll bite. Where do I sign?

http://twistedmatrix.com/trac/query?status=new&status=assigned&status=reopened&component=website&order=priority

Jean-Paul



From itamar at itamarst.org  Thu Apr 27 09:39:15 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 27 Apr 2006 09:39:15 -0400
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <20060426230212.22481.210619728.divmod.quotient.17933@ohm>
References: <20060426230212.22481.210619728.divmod.quotient.17933@ohm>
Message-ID: <1146145156.5791.0.camel@localhost.localdomain>

> On Windows, there is a reactor that supports a maximum of 63
> concurrent events (assuming your process has no windows open).  On
> UNIX the default reactor is still select() based and will definitely
> bog down if you have too many simultaneous sockets open.  Sometimes it
> is handled quite badly!

But default win32 reactor has 512 maximum.




From nico at tekNico.net  Thu Apr 27 10:09:45 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu, 27 Apr 2006 16:09:45 +0200
Subject: [Twisted-Python] Re: The End, also: documentation
In-Reply-To: <20060427131012.22481.1310135984.divmod.quotient.18360@ohm>
References: <e2q03t$tog$1@sea.gmane.org>
	<20060427131012.22481.1310135984.divmod.quotient.18360@ohm>
Message-ID: <e2qjb9$2vi$1@sea.gmane.org>

>> OK, I'll bite. Where do I sign?

> http://twistedmatrix.com/trac/query?status=new&status=assigned&status=reopened&component=website&order=priority

Work already cut out and waiting, great.

Taking a hint from #1517, I checked out WebSite, and will go over it soon.
If anybody has any hint, don't be shy. :-)

-- 
Nicola Larosa - http://www.tekNico.net/

The police and the military have fundamentally different missions.
The police protect citizens. The military attacks the enemy. When
you start giving police powers to the military, citizens start
looking like the enemy. -- Bruce Schneier, December 2005





From manlio_perillo at libero.it  Thu Apr 27 11:30:03 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu, 27 Apr 2006 13:30:03 -0200
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
Message-ID: <4450E37B.7080703@libero.it>

glyph at divmod.com ha scritto:
> [...]
> The position of "documentation maintainer" is a bit unusual since it was
> actually taken consciously and willingly.  Usually the protocol is this:
> I appoint someone for a task, which they are not qualified to do.  Then,
> they have to fight a bear if they don't want to do it.
> 

Just to known.
Suppose I found some time to document some parts of Twisted.
Many things in twisted.python are undocumented, log is rougly documented
and usage docs are not really complete.

I have to submit a ticket/patch?


By the way: here are some parts for witch I would like to see documentation:
1) twisted.python
2) description of design patterns used in twisted
3) all(?) interfaces, like IConsumer

4) parts of twisted deprecated/unmaintained/abandoned/not to be used
5) parts of twisted that need recoding (twisted.news?)
6) servers used in production enviroment with use cases



Thanks and regards  Manlio Perillo



From manlio_perillo at libero.it  Thu Apr 27 11:35:17 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu, 27 Apr 2006 13:35:17 -0200
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
Message-ID: <4450E4B5.2030004@libero.it>

glyph at divmod.com ha scritto:
> [...]
>
> By the way, do you know anyone who might be similarly duped into
> becoming the website maintainer?  (might you?)
>

The site really need some works.
Some links are still missing:
http://twistedmatrix.com/projects/news/documentation/

and I really can't find manpages!




Regards  Manlio Perillo



From glyph at divmod.com  Thu Apr 27 12:32:05 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Thu, 27 Apr 2006 12:32:05 -0400
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <1146145156.5791.0.camel@localhost.localdomain>
Message-ID: <20060427163205.22481.1821270455.divmod.quotient.18490@ohm>



On Thu, 27 Apr 2006 09:39:15 -0400, Itamar Shtull-Trauring <itamar at itamarst.org> wrote:
>> On Windows, there is a reactor that supports a maximum of 63
>> concurrent events (assuming your process has no windows open).  On
>> UNIX the default reactor is still select() based and will definitely
>> bog down if you have too many simultaneous sockets open.  Sometimes it
>> is handled quite badly!
>
>But default win32 reactor has 512 maximum.

Right.  The reactor I'm referring to is the win32eventreactor.



From mary-twisted at puzzling.org  Thu Apr 27 17:51:34 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Fri, 28 Apr 2006 07:51:34 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <4450E4B5.2030004@libero.it>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
	<4450E4B5.2030004@libero.it>
Message-ID: <20060427215134.GH6014@sourdust.home.puzzling.org>

On Thu, Apr 27, 2006, Manlio Perillo wrote:
> The site really need some works.
> Some links are still missing:
> http://twistedmatrix.com/projects/news/documentation/
> 
> and I really can't find manpages!

This kind of information should be submitted as a bug at
http://twistedmatrix.com/trac/newticket and marked as belonging to the
'website' component. (I tended to prefer each individual problem be
filed as a separate bug, this mail sounds like two bugs.)

-Mary



From mary-twisted at puzzling.org  Thu Apr 27 17:58:56 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Fri, 28 Apr 2006 07:58:56 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <4450E37B.7080703@libero.it>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
	<4450E37B.7080703@libero.it>
Message-ID: <20060427215856.GI6014@sourdust.home.puzzling.org>

On Thu, Apr 27, 2006, Manlio Perillo wrote:
> Just to known.
> Suppose I found some time to document some parts of Twisted.
> Many things in twisted.python are undocumented, log is rougly documented
> and usage docs are not really complete.
> 
> I have to submit a ticket/patch?

This would be the usual way to do it. I used to accept some through
email to, but that just adds another step for the person you mail them
to: they file a bug based on your mail. I had a post about what made a
good docs bug here:
http://twistedmatrix.com/pipermail/twisted-python/2004-June/008071.html

> By the way: here are some parts for witch I would like to see documentation:
> 1) twisted.python
> 2) description of design patterns used in twisted
> 3) all(?) interfaces, like IConsumer
> 
> 4) parts of twisted deprecated/unmaintained/abandoned/not to be used
> 5) parts of twisted that need recoding (twisted.news?)
> 6) servers used in production enviroment with use cases

Each of these sounds like a bug report, whether or not you attach a
patch.

-Mary



From Marcin.Kasperski at softax.com.pl  Fri Apr 28 08:14:34 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 14:14:34 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
Message-ID: <200604281414.35595.Marcin.Kasperski@softax.com.pl>

In my trial tests I have a few test methods constructed using 
deferredGenerator idiom. Something like that:

  def testSomething(self):
       # ... do something
       yield defer.waitForDeferred(someDeferred)
       # ... do something
       yield defer.waitForDeferred(otherDeferred)
       # ... do something
  testSomething = defer.deferredGenerator(testSomething)

Let's write clean code and works perfectly.    ... Almost.
The problem is that in the verbose test output I get 

      <lambda> ...                        [OK]

Of course I would prefer

     testSomething ...                   [OK]

Is it possible to name the function returned by deferredGenerator 
somehow? If not, how to solve this situation? Extra problem is 
that if I add sth like 'def testSomethingWrapped(self):' calling 
generator inside, then trial will consider both testSomethign 
and testSomethingWrapped as independed test methods...



From mustafa at liqia.com  Fri Apr 28 08:22:40 2006
From: mustafa at liqia.com (Mustafa Sakalsiz)
Date: Fri, 28 Apr 2006 15:22:40 +0300
Subject: [Twisted-Python] SMTP client with authentication
Message-ID: <44520910.3030709@liqia.com>

Hi,

I try to implement a simple smtp client, but my smtp server requires 
authentication. Is there a client sample which accomplishes the basic or 
plain smtp authentication.

Thanks,
Saki



From mike at mkp.ca  Fri Apr 28 08:57:44 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Fri, 28 Apr 2006 08:57:44 -0400
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
Message-ID: <200604280857.45390.mike@mkp.ca>

On Friday 28 April 2006 08:14, Marcin Kasperski wrote:
> In my trial tests I have a few test methods constructed using
> deferredGenerator idiom. Something like that:
>
>   def testSomething(self):
>        # ... do something
>        yield defer.waitForDeferred(someDeferred)
>        # ... do something
>        yield defer.waitForDeferred(otherDeferred)
>        # ... do something
>   testSomething = defer.deferredGenerator(testSomething)

> Is it possible to name the function returned by deferredGenerator
> somehow?

Shot in the dark; try adding:

    testSomething.__name__ = "testSomething"

or

    testSomething.__doc__ = "testSomething"

Not pretty, but I think it will work.  You could maybe use a util func like:

def defGen(f):
  gen = defer.deferredGenerator(f)
  gen.__name__ = f.__name__
  gen.__doc__ = f.__doc__
  return gen

Mike.



From itamar at itamarst.org  Fri Apr 28 09:10:46 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 28 Apr 2006 09:10:46 -0400
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
Message-ID: <1146229848.5698.0.camel@localhost.localdomain>

On Fri, 2006-04-28 at 14:14 +0200, Marcin Kasperski wrote:
> In my trial tests I have a few test methods constructed using 
> deferredGenerator idiom. Something like that:
> 
>   def testSomething(self):
>        # ... do something
>        yield defer.waitForDeferred(someDeferred)
>        # ... do something
>        yield defer.waitForDeferred(otherDeferred)
>        # ... do something
>   testSomething = defer.deferredGenerator(testSomething)
> 
> Let's write clean code and works perfectly.    ... Almost.
> The problem is that in the verbose test output I get 
> 
>       <lambda> ...                        [OK]
> 
> Of course I would prefer
> 
>      testSomething ...                   [OK]
> 
> Is it possible to name the function returned by deferredGenerator 
> somehow? If not, how to solve this situation? Extra problem is 
> that if I add sth like 'def testSomethingWrapped(self):' calling 
> generator inside, then trial will consider both testSomethign 
> and testSomethingWrapped as independed test methods...

I think this may be fixed in twisted 2.2.

-- 
Itamar Shtull-Trauring
http://itamarst.org





From Marcin.Kasperski at softax.com.pl  Fri Apr 28 09:28:29 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:28:29 +0200
Subject: [Twisted-Python] SMTP client with authentication
In-Reply-To: <44520910.3030709@liqia.com>
References: <44520910.3030709@liqia.com>
Message-ID: <200604281528.29650.Marcin.Kasperski@softax.com.pl>

Dnia pi?tek, 28 kwietnia 2006 14:22, Mustafa Sakalsiz napisa?:
> Hi,
>
> I try to implement a simple smtp client, but my smtp server
> requires authentication. Is there a client sample which
> accomplishes the basic or plain smtp authentication.

I use the following replacement for the standard twisted sendmail function:

from twisted.mail import smtp
from twisted.internet import reactor
from twisted.internet import defer

try:
    from cStringIO import StringIO
except ImportError:
    from StringIO import StringIO

def sendmail_auth(smtphost, user, password,
                 from_addr, to_addrs, msg, senderDomainName=None, port=25):
    if not hasattr(msg,'read'):
        msg = StringIO(str(msg))
    d = defer.Deferred()
    factory = smtp.ESMTPSenderFactory(user, password, from_addr, to_addrs, msg, d,
                                      requireTransportSecurity=False)
    if senderDomainName is not None:
        factory.domain = senderDomainName
    reactor.connectTCP(smtphost, port, factory)
    return d

(nothing wise, just copied original and changed to ESMTPSenderFactory). Maybe it would make sense to add something like that to twisted.



From Marcin.Kasperski at softax.com.pl  Fri Apr 28 09:30:14 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:30:14 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604280857.45390.mike@mkp.ca>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
	<200604280857.45390.mike@mkp.ca>
Message-ID: <200604281530.14905.Marcin.Kasperski@softax.com.pl>

>     testSomething.__name__ = "testSomething"

exceptions.TypeError: readonly attribute

>     testSomething.__doc__ = "testSomething"

This one worked. Thank you very much.




From Marcin.Kasperski at softax.com.pl  Fri Apr 28 09:33:28 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:33:28 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604280857.45390.mike@mkp.ca>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
	<200604280857.45390.mike@mkp.ca>
Message-ID: <200604281533.28324.Marcin.Kasperski@softax.com.pl>

Dnia pi?tek, 28 kwietnia 2006 14:57, Mike Pelletier napisa?:
> def defGen(f):
> ? gen = defer.deferredGenerator(f)
> ? gen.__name__ = f.__name__
> ? gen.__doc__ = f.__doc__
> ? return gen

Finally such one does the job:

def createDeferredGenerator(function):
    gen = defer.deferredGenerator(function)
    gen.__doc__ = function.__name__
    return gen



From Marcin.Kasperski at softax.com.pl  Fri Apr 28 09:36:32 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:36:32 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <1146229848.5698.0.camel@localhost.localdomain>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
	<1146229848.5698.0.camel@localhost.localdomain>
Message-ID: <200604281536.32329.Marcin.Kasperski@softax.com.pl>

> I think this may be fixed in twisted 2.2.

My Debian claims that I am using 2.2.0, so maybe it was patched 
later.

I guess that the fix would be adding within deferredGenerator 
construct like the one suggested by Mike (setting __doc__ of 
returned lambda function to __name__ of wrapped function)



From exarkun at divmod.com  Fri Apr 28 09:57:48 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 28 Apr 2006 09:57:48 -0400
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604281536.32329.Marcin.Kasperski@softax.com.pl>
Message-ID: <20060428135748.22481.942591438.divmod.quotient.19156@ohm>

On Fri, 28 Apr 2006 15:36:32 +0200, Marcin Kasperski <marcin.kasperski at softax.com.pl> wrote:
>> I think this may be fixed in twisted 2.2.
>
>My Debian claims that I am using 2.2.0, so maybe it was patched
>later.
>
>I guess that the fix would be adding within deferredGenerator
>construct like the one suggested by Mike (setting __doc__ of
>returned lambda function to __name__ of wrapped function)

This isn't correct, of course.  It just happens to do something kind of useful when the deferred generator is a trial test method.  In other cases, it would be weird to find the __doc__ of the returned object to be the __name__ of the wrapped function.

In Python 2.4, setting __name__ works, and deferredGenerator tries to do that, so trial will only have this problem with Python 2.3.  You could define a helper function for your tests which calls deferredGenerator and sets __doc__ appropriately, if switching to Python 2.4 isn't an option.

Jean-Paul



From manlio_perillo at libero.it  Fri Apr 28 11:15:14 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 28 Apr 2006 13:15:14 -0200
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <20060427215856.GI6014@sourdust.home.puzzling.org>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>	<4450E37B.7080703@libero.it>
	<20060427215856.GI6014@sourdust.home.puzzling.org>
Message-ID: <44523182.7040000@libero.it>

Mary Gardiner ha scritto:
> On Thu, Apr 27, 2006, Manlio Perillo wrote:
>> Just to known.
>> Suppose I found some time to document some parts of Twisted.
>> Many things in twisted.python are undocumented, log is rougly documented
>> and usage docs are not really complete.
>>
>> I have to submit a ticket/patch?
> 
> This would be the usual way to do it. I used to accept some through
> email to, but that just adds another step for the person you mail them
> to: they file a bug based on your mail. I had a post about what made a
> good docs bug here:
> http://twistedmatrix.com/pipermail/twisted-python/2004-June/008071.html
> 

I have no problem with tickets, just I don't know to who assign them.


Thanks and regards  Manlio Perillo



From mary-twisted at puzzling.org  Fri Apr 28 18:25:18 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sat, 29 Apr 2006 08:25:18 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <44523182.7040000@libero.it>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
	<4450E37B.7080703@libero.it>
	<20060427215856.GI6014@sourdust.home.puzzling.org>
	<44523182.7040000@libero.it>
Message-ID: <20060428222518.GT6014@sourdust.home.puzzling.org>

On Fri, Apr 28, 2006, Manlio Perillo wrote:
> I have no problem with tickets, just I don't know to who assign them.

It seems the appropriate rituals have performed and Ed is now the lead
documentation maintainer for Twisted. So they should be assigned to him,
but I don't know what his bugtracker login is.

I think it's possible not to assign tickets to anyone (I don't know trac
very well), so that's the backup plan.

-Mary



From david.anderson at calixo.net  Sat Apr 29 11:10:06 2006
From: david.anderson at calixo.net (David Anderson)
Date: Sat, 29 Apr 2006 17:10:06 +0200
Subject: [Twisted-Python] Crash when using XmlRPC during reactor shutdown
Message-ID: <20060429151006.GB16623@natulte.net>

Hi,

I have been experiencing a crash when trying to use the XmlRPC query
subsystem while the reactor is shutting down.

The context of it is that my twisted application talks to an upstream
server using XmlRPC.  When it comes online, it registers, and when it
goes offline, it should unregister itself, using a simple XmlRPC
query.

So, I figured the natural place to put the notifications were in the
startService and stopService methods, that get called at just the
right time.  startService is not a problem, and works fine.  for
stopService, I made the method return the XmlRPC Deferred, so that the
reactor would wait until request completion before continuing the
shutdown.

The thing is, with this scheme Twisted dumps an exception during
shutdown, because the XmlRPC Deferred gets fired twice.  I've
reproduced this behaviour with a minimal application:

****************************************************************
****************************************************************
from twisted.application.service import Service
from twisted.python import log
from twisted.web.xmlrpc import Proxy
from twisted.application.service import Application, IServiceCollection
from twisted.internet import reactor, defer

class TestXmlRpcService(Service):
    def startService(self):
        log.msg("Starting service")
        reactor.callLater(0, reactor.stop)

    def stopService(self):
        def handle_success(res):
            log.msg("Unregistration successful, but reactor will now crash")
            return True
        def handle_error(e):
            log.msg("Unregistration failed...")
            return False

        log.msg("Calling XmlRPC backend (and crashing)")
        p = Proxy('http://natulte.net/pub/fgs/RPC2.php')
        defer.setDebugging(True)
        # Call any old method, this is just a proof of concept
        d = p.callRemote('fgsd.register',
                         "00000000000000000000000000000000",
                         "bleh")
        d.addCallbacks(handle_success, handle_error)
        return d


service = TestXmlRpcService()
application = Application("proxy")
service.setServiceParent(application)
****************************************************************
****************************************************************

If you run that with `twistd -n -l- -y test.tac`, you should see the
crash immediately.

I know that patients shouldn't give diagnostics about their problems
to the doctor, but nevertheless, examining the exception log, I
believe I know what the problem is.

 - When stopService returns a Deferred, the reactor stops the shutdown
   and adds callbacks to the Deferred, to resume shutdown at the right
   time.

 - The XmlRPC query succeeds, and fires the Deferred. It walks right
   down the notification chain, and eventually trips the reactor's
   callback.

 - The reactor, within the callback, resumes shutdown, and calls
   disconnectAll to kill all active connections.

 - At this point, the XmlRPC query still has its socket open, and so
   gets notified that the connection was lost.  It attempts to fire
   our Deferred's errback to notify of this, and foom,
   AlreadyCalledError.

If this makes sense, the resolution might be simple: close the
transport connection before firing the deferred, so that the reactor
can't kill the connection and trigger the double-call.

The other option would be to include a flag in the xmlrpc query
object, to avoid double-firing in this (admitedly corner-case)
situation.

Does all that make sense?  And, of course, does anyone have an idea of
a workaround I could use in the meantime?  As I'm shutting down the
service anyway, the exception is not really a problem in itself, it's
just a little unclean to have an exception dump in the logs at each
shutdown.

Thanks in advance (and already, for Twisted :-),
- Dave.



From manlio_perillo at libero.it  Sat Apr 29 11:44:35 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat, 29 Apr 2006 13:44:35 -0200
Subject: [Twisted-Python] conch and cftp
Message-ID: <445389E3.3030606@libero.it>

Hi.

There is a reason for conch (and cftp) script not working on Windows?

Traceback (most recent call last):
  File "C:\Python2.4\Scripts\conch.py", line 20, in ?
    from twisted.conch.scripts.conch import run
  File "C:\Python2.4\lib\site-packages\twisted\conch\scripts\conch.py",
line 18,
 in ?
    import os, sys, getpass, struct, tty, fcntl, base64, signal, stat, errno
  File "C:\Python2.4\lib\tty.py", line 5, in ?
    from termios import *
ImportError: No module named termios


Moreover tkconch seems to be really slow...



Thanks and regards  Manlio Perillo



From david.anderson at calixo.net  Sat Apr 29 13:29:47 2006
From: david.anderson at calixo.net (David Anderson)
Date: Sat, 29 Apr 2006 19:29:47 +0200
Subject: [Twisted-Python] Crash when using XmlRPC during reactor shutdown
In-Reply-To: <20060429151006.GB16623@natulte.net>
References: <20060429151006.GB16623@natulte.net>
Message-ID: <20060429172947.GC16623@natulte.net>

* David Anderson <david.anderson at calixo.net> [2006-04-29 17:10:06]:
> I have been experiencing a crash when trying to use the XmlRPC query
> subsystem while the reactor is shutting down.

After a bit more fiddling, I found a functional workaround.  The trick
is indeed to let the xmlrpc Deferred fully terminate *before* the
reactor continues the shutdown, instead of continuing the shutdown
within the Deferred callback.

With that in mind, the new stopService makes the RPC call, but
creates, stores and returns a different Deferred.  The RPC Deferred
gets a callback that calls reactor.callLater to schedule the firing of
the reactor's Deferred in 0 seconds.

That lets the xmlrpc deferred complete and clean up, and immediately
after the reactor schedules its own shutdown callback, and all is
well.

Here is the new stopService code:

****************************************************************
****************************************************************
    def stopService(self):
        def handle_success(res):
            log.msg("Unregistration successful, and reactor won't crash")
            reactor.callLater(0, self._def.callback, True)
        def handle_error(e):
            log.msg("Unregistration failed...")
            reactor.callLater(0, self._def.callback, False)

        log.msg("Calling XmlRPC backend (and crashing)")
        p = Proxy('http://natulte.net/pub/fgs/RPC2.php')
        d = p.callRemote('fgsd.register',
                         "00000000000000000000000000000000",
                         "bleh")
        self._def = defer.Deferred()
        d.addCallbacks(handle_success, handle_error)
        return self._def
****************************************************************
****************************************************************

Nevertheless, this feels more like a workaround than a complete
solution.  What do you all think?

- Dave.



From mary-twisted at puzzling.org  Sat Apr 29 18:10:05 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 30 Apr 2006 08:10:05 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <444FA28D.6000008@eepatents.com>
References: <E1FYe0V-0002SK-02@pyramid.twistedmatrix.com>
	<444FA28D.6000008@eepatents.com>
Message-ID: <20060429221005.GW6014@sourdust.home.puzzling.org>

On Wed, Apr 26, 2006, Ed Suominen wrote:
> I'm thinking about suggesting (gasp!) myself as your replacement.

...

> Comments welcome. Any positive ones will likely be viewed with suspicion
> and will raise pangs of regret at my making this rash posting. The
> negative ones will likely be viewed with relief, at least by the
> aforementioned logical, responsible part...

You'll notice I've reassigned some tickets to you and will continue to
do so over the next few days. I'm not sure how your logical and
responsible part will feel about this... you can grab me on IRC as
hypatia for clarification of anything I filed...

-Mary



From mary-twisted at puzzling.org  Sat Apr 29 18:24:47 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 30 Apr 2006 08:24:47 +1000
Subject: [Twisted-Python] planet.twistedmatrix.com
In-Reply-To: <20060427000150.GB23105@sourdust.home.puzzling.org>
References: <20060426022449.GC12864@sourdust.home.puzzling.org>
	<20060426070049.GA98650@ik.nu>
	<20060427000150.GB23105@sourdust.home.puzzling.org>
Message-ID: <20060429222447.GX6014@sourdust.home.puzzling.org>

On Thu, Apr 27, 2006, Mary Gardiner wrote:
> On Wed, Apr 26, 2006, Ralph Meijer wrote:
> > I've maintained Planet Jabber and Planet FOSDEM for a while now. It
> > would be no problem to add Planet Twisted to the same setup.
> 
> Thanks. I'll forward you the templates and config in the next day or
> two.

http://twistedmatrix.com/trac/ticket/1683 tracks the progress of the
handover, not that it should be a long one.

-Mary



From exarkun at twistedmatrix.com  Sun Apr 30 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Apr 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1146373501.65.7686140@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-23 through 2006-04-30
Bugs opened: 24    Bugs closed: 10  Total open bugs: 603 (+14)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:      +11  |Highest:  +0          |Conch:     +2          
|Enhancement:  +3  |High:     +0          |Core:      +5          
|Task:         +0  |Normal:  +14          |News:      +1          
                                          |Pb:        +1          
                                          |Pydoctor:  -1          
                                          |Trial:     +1          
                                          |Vfs:       +1          
                                          |Web2:      +0          
                                          |Website:   +3          
                                          |Words:     +1          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1663] Move Epsilon Version Stuff To Twisted (opened by radix) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1663

[#1666] Remove twisted.pb from the TwistedCore package (opened by exarkun) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1666

[#1668] Update release automation to work with recent version changes (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1668

                    ===== High =====
[#1667] processEnded better not be called from thread context (opened by andrea) (CLOSED, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1667

                    ===== Normal =====
[#1661] KeyError exception in twisted.internet.process.Process.childConnectionLost (opened by andrea)
    defect          core       http://twistedmatrix.com/trac/ticket/1661

[#1662] pauseProducing() should not block POLL_DISCONNECTED (opened by andrea)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1662

[#1664] Omit twisted.flow and twisted.pair from future sumo release (opened by exarkun) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1664

[#1665] test_cgi overrides default trial test timeout - it should not. (opened by exarkun) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1665

[#1669] Parser in domish does not keep unreferenced namespace declarations (opened by ff)
    defect          words      http://twistedmatrix.com/trac/ticket/1669

[#1670] Typo in enterprise.xhtml example: adabapi != adbapi (opened by jknight) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1670

[#1671] If you aren't logged in, there's no discoverable way I can see to file a new ticket. (opened by spiv)
    enhancement     website    http://twistedmatrix.com/trac/ticket/1671

[#1672] Make the twisted.vfs SFTP adapter's removeFile method translate NotFoundError into the appropriate SFTPError. (opened by spiv) (CLOSED, fixed)
    defect          vfs        http://twistedmatrix.com/trac/ticket/1672

[#1673] twisted.vfs.adapters.sftp doesn't translate VFSErrors consistently and completely (opened by spiv)
    defect          vfs        http://twistedmatrix.com/trac/ticket/1673

[#1674] test_conch, test_cftp and test_keys fail to import if Crypto.Cipher is not installed (opened by spiv)
    defect          conch      http://twistedmatrix.com/trac/ticket/1674

[#1675] failUnlessFailure is too liberal (opened by spiv)
    defect          trial      http://twistedmatrix.com/trac/ticket/1675

[#1676] iocp: 'ClientSocket' object has no attribute 'socket' (opened by ghazel)
    defect          core       http://twistedmatrix.com/trac/ticket/1676

[#1677] can't find manpages on the website (opened by synapsis)
    defect          website    http://twistedmatrix.com/trac/ticket/1677

[#1678] State of many Twisted subprojects is unclear (opened by synapsis)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1678

[#1679] conch script does not work on Windows (opened by synapsis)
    defect          conch      http://twistedmatrix.com/trac/ticket/1679

[#1680] problem with twisted.news.database.NewsStorageAugmentation constructor (opened by synapsis)
    defect          news       http://twistedmatrix.com/trac/ticket/1680

[#1681] twisted.python.usage Option Subcommands documentation is incomplete (opened by synapsis)
    defect          core       http://twistedmatrix.com/trac/ticket/1681

[#1682] not docstring but full documentation (opened by synapsis) (CLOSED, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1682

[#1683] Set up and host Planet Twisted (opened by hypatia)
    defect          website    http://twistedmatrix.com/trac/ticket/1683

[#1684] release newpb 0.0.1 ! (opened by warner)
    enhancement     pb         http://twistedmatrix.com/trac/ticket/1684



Closed Bugs
______________________
                    ===== Highest =====
[#1611] Documentation and examples still use deprecated components APIs (e.g. __implements__) (opened by itamarst, closed by radix, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1611

[#1666] Remove twisted.pb from the TwistedCore package (opened by exarkun, closed by exarkun, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1666

[#1663] Move Epsilon Version Stuff To Twisted (opened by radix, closed by radix, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1663

                    ===== High =====
[#1667] processEnded better not be called from thread context (opened by andrea, closed by exarkun, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1667

                    ===== Normal =====
[#1665] test_cgi overrides default trial test timeout - it should not. (opened by exarkun, closed by exarkun, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1665

[#1664] Omit twisted.flow and twisted.pair from future sumo release (opened by exarkun, closed by exarkun, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1664

[#1670] Typo in enterprise.xhtml example: adabapi != adbapi (opened by jknight, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1670

[#1653] Redirect documentation from private to public location (opened by jknight, closed by jknight, duplicate)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1653

[#1672] Make the twisted.vfs SFTP adapter's removeFile method translate NotFoundError into the appropriate SFTPError. (opened by spiv, closed by spiv, fixed)
    defect          vfs        http://twistedmatrix.com/trac/ticket/1672

[#1682] not docstring but full documentation (opened by synapsis, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1682





From itamar at itamarst.org  Sun Apr 30 09:17:59 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 30 Apr 2006 09:17:59 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16688 - newpb: add
	NEWS/README, update Changelog for the 0.0.1 release
In-Reply-To: <E1Fa52x-0007PS-00@wolfwood>
References: <E1Fa52x-0007PS-00@wolfwood>
Message-ID: <1146403079.5796.0.camel@localhost.localdomain>

So... what will new protocol be called? pb2/newpb is confusing, I think.




From tlogic at gmail.com  Sun Apr 30 10:17:43 2006
From: tlogic at gmail.com (Haris Andrianakis)
Date: Sun, 30 Apr 2006 17:17:43 +0300
Subject: [Twisted-Python] ProducerConsumerProxy problem
Message-ID: <7a1008db0604300717m76b7217cg65ecef2aa6d5ce53@mail.gmail.com>

Hi,

I'm trying to setup a ProducerConsumerProxy between a
protocols.basic.FileSender producer and a TCP Protocol transport.
I have the following code:

fileObj = file('test.txt','r')
proxy = protocols.pcp.ProducerConsumerProxy(self.transport)
producer = protocols.basic.FileSender()
dd = producer.beginFileTransfer(fileObj, proxy)
dd.addCallback(self.uploadDone)
dd.addErrback(self.uploadError)
proxy.registerProducer(producer, False)

The problem is that only 16KB of data are transfered and then the
transfer pauses. Also if I use BasicProducerConsumerProxy no data at
all gets transfered. I think that the proxy doesn't call resumeProducing()
on
the FileSender producer and thats why the transfer seems to halt.

Any suggestions ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060430/57094efa/attachment.htm 

From tlogic at gmail.com  Sun Apr 30 12:24:00 2006
From: tlogic at gmail.com (Haris Andrianakis)
Date: Sun, 30 Apr 2006 19:24:00 +0300
Subject: [Twisted-Python] [SOLVED] ProducerConsumerProxy problem
In-Reply-To: <7a1008db0604300717m76b7217cg65ecef2aa6d5ce53@mail.gmail.com>
References: <7a1008db0604300717m76b7217cg65ecef2aa6d5ce53@mail.gmail.com>
Message-ID: <7a1008db0604300924u65495a19x4887889231172253@mail.gmail.com>

I found the solution.

The problem was that by default our proxys producer is registered with
streaming = True
which is not what we want.
The following line will register our proxys producer with streaming = False
ProducerConsumerProxy.iAmStreaming = False
The rest is the same.
I think adding an argument to ProducerConsumerProxy.__init__ about streaming
would
be a good idea.
proxy = ProducerConsumerProxy(self.client.transport)
dd = FileSender().beginFileTransfer(self.outgoingFile, proxy)
dd.addCallback(self.uploadDone)
dd.addErrback(self.uploadError)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060430/3e04197f/attachment.htm 

From phil at bubblehouse.org  Sun Apr 30 19:04:00 2006
From: phil at bubblehouse.org (Phil Christensen)
Date: Sun, 30 Apr 2006 19:04:00 -0400
Subject: [Twisted-Python] newpb status?
Message-ID: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>

Just out of curiosity, I wondered where things stood with newpb. I'm  
eagerly awaiting its arrival; apologies if there was a list  
announcement I missed. I got an overview from Brian a few months  
back, and it got me all pumped ;-)...

Is there any documentation available yet? Even just some example code  
would be nice; I'd like to get into newpb, even if it's in a state of  
flux. Unfortunately, I can't seem to find the time to lurk in IRC  
that much, so i kind of need some sort of asynchronous instruction...

I've certainly got no problems with reading in-code docs, but I would  
definitely appreciate a little bit of a starter howto or something...

-phil



From johann.borck at densedata.com  Sun Apr 30 20:46:47 2006
From: johann.borck at densedata.com (Johann Borck)
Date: Mon, 01 May 2006 02:46:47 +0200
Subject: [Twisted-Python] newpb status?
In-Reply-To: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>
References: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>
Message-ID: <44555A77.7000304@densedata.com>

Phil Christensen wrote:

> Just out of curiosity, I wondered where things stood with newpb. I'm 
> eagerly awaiting its arrival; apologies if there was a list 
> announcement I missed. I got an overview from Brian a few months 
> back, and it got me all pumped ;-)...
>
> Is there any documentation available yet? Even just some example code 
> would be nice; I'd like to get into newpb, even if it's in a state of 
> flux. Unfortunately, I can't seem to find the time to lurk in IRC 
> that much, so i kind of need some sort of asynchronous instruction...
>
> I've certainly got no problems with reading in-code docs, but I would 
> definitely appreciate a little bit of a starter howto or something...

twisted/doc/pb/using-pb.xhtml introduces the new concepts, there're some
examples, and iirc there's been an 0.01 release recently.
Johann

>
> -phil
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>




From tcj25 at cam.ac.uk  Sun Apr 30 21:09:00 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Mon, 1 May 2006 03:09:00 +0200
Subject: [Twisted-Python] Status of components, protocols, etc in Twisted
Message-ID: <17493.24492.57227.748654@terry.jones.tc>

I'm trying to better understand componentized architectures, protocols,
adaptors etc., as done in Python. I've been reading around and have a few
questions about the state of play. It would be good to understand where
things are, and where they're heading.

It seems there are (or were) 3 efforts to provide components, protocols,
adaptors, etc.: Zope, Twisted, PyProtocols.

It looks like Twisted is now using the zope module to do this. But I also
ran across discussion (on this list, in Feb 2004, I think), about possibly
migrating zope's use of components to PyProtocols. Did that happen?

I do like the sound of PyProtocols (and PEAK in general), but as someone
else said, and as Philip wrote, the documentation isn't really focused on
easing in a newbie.  A couple of points on those docs, I think it would be
good if someone set out how you would go about building something small
(i.e., small concrete examples, not "big" more abstract ones). Yes, that
someone could be me, agreed. Also, the docs say that it is intended that
_all_ uses of type(), isinstance() etc., can/should be replaced. A few use
cases would be helpful - how are we supposed to replace those things? I do
have the impression that one should have a clean componentized design from
the beginning and thereby never need or want to resort to introspection. If
that's the case, it might be worth saying, as the docs leave one wondering
if there's not perhaps some formulaic way to rewrite one's code to do the
Right Thing.  It's not that simple though, right?

I'd also be happy to use the standard Twisted (i.e., zope) approach too.

Do people have an opinion about which is better to use? Does it make much
difference if you're just building a simple app with a handful of
components you'd like to be able to swap in & out easily?

I think the Twisted evolution of finger pages are really good, with a
couple of minor weak points (e.g., highlighting new code from example to
example). It's amazing what you can get done in a couple of hundred lines
of Twisted code. BTW, there's a mention of __implements__ whereas
implements() is used, which I guess is a hang over from an earlier version?
This is on
http://twistedmatrix.com/projects/core/documentation/howto/tutorial/components.html
I guess someone will look for others. Grepping __implements__ gets a lot of
hits in the distributed Twisted-2.2.0 docs (e.g., in doc/howto/*.html).

Anyway, thanks for all the docs and code. I'm happy to put some work into
making improvements where I can.

Terry



From glyph at divmod.com  Sun Apr 30 21:27:29 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 30 Apr 2006 21:27:29 -0400
Subject: [Twisted-Python] Status of components, protocols, etc in Twisted
In-Reply-To: <17493.24492.57227.748654@terry.jones.tc>
Message-ID: <20060501012729.22481.359548894.divmod.quotient.20053@ohm>

On Mon, 1 May 2006 03:09:00 +0200, Terry Jones <tcj25 at cam.ac.uk> wrote:
>I'm trying to better understand componentized architectures, protocols,
>adaptors etc., as done in Python. I've been reading around and have a few
>questions about the state of play. It would be good to understand where
>things are, and where they're heading.
>
>It seems there are (or were) 3 efforts to provide components, protocols,
>adaptors, etc.: Zope, Twisted, PyProtocols.

Today, Twisted simply provides a single global registry on top of Zope Interface's normal layer.  Twisted's original interface implementation was derivative of Zope's and introduced some horrible bugs and some interesting ideas; the interesting ideas were incorporated into Zope, and the horrible bugs left behind.

>It looks like Twisted is now using the zope module to do this. But I also
>ran across discussion (on this list, in Feb 2004, I think), about possibly
>migrating zope's use of components to PyProtocols. Did that happen?

No.  Some people liked PyProtocols better, but we had the discussion, we made the decision, and Zope Interface has worked out very well.



From radix at twistedmatrix.com  Sun Apr 30 22:58:39 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 30 Apr 2006 22:58:39 -0400
Subject: [Twisted-Python] newpb status?
In-Reply-To: <44555A77.7000304@densedata.com>
References: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>
	<44555A77.7000304@densedata.com>
Message-ID: <60ed19d40604301958k3bb2c767ofddeb9efd88de5fb@mail.gmail.com>

On 4/30/06, Johann Borck <johann.borck at densedata.com> wrote:

> twisted/doc/pb/using-pb.xhtml introduces the new concepts, there're some
> examples, and iirc there's been an 0.01 release recently.


The release isn't out yet; I'm currently working on another (small) round of
improvements to the release infrastructure and hopefully a lot of stuff will
be released soon.


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060430/79a75a4f/attachment.htm 

From exarkun at divmod.com  Sat Apr  1 21:00:01 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 1 Apr 2006 23:00:01 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] r16513 - fix buggy test,
 set binary mode on stdin/stdout
In-Reply-To: <E1FPZZD-00085P-00@wolfwood>
Message-ID: <20060402040001.22481.519130017.divmod.quotient.8967@ohm>

On Fri, 31 Mar 2006 23:26:35 -0700, Glyph Lefkowitz <glyph at wolfwood.twistedmatrix.com> wrote:
>Author: glyph
>Date: Fri Mar 31 23:26:32 2006
>New Revision: 16513
>
>Modified:
>   branches/transtdio-1553/twisted/internet/_pollingfile.py
>   branches/transtdio-1553/twisted/internet/_win32stdio.py
>   branches/transtdio-1553/twisted/test/stdio_test_producer.py
>   branches/transtdio-1553/twisted/test/test_stdio.py
>Log:
>fix buggy test, set binary mode on stdin/stdout
>
> [snip]
>
>Modified: branches/transtdio-1553/twisted/test/stdio_test_producer.py
>==============================================================================
>--- branches/transtdio-1553/twisted/test/stdio_test_producer.py	(original)
>+++ branches/transtdio-1553/twisted/test/stdio_test_producer.py	Fri Mar 31 23:26:32 2006
>@@ -13,22 +13,28 @@
> from twisted.internet import stdio, protocol, reactor
> from twisted.python import log
>
>-
> class ProducerChild(protocol.Protocol):
>     _paused = False
>+    buf = ''
>
>     def connectionLost(self, reason):
>-        reactor.stop()
>+        log.msg("*****OVER*****")
>+        reactor.callLater(1, reactor.stop)
>+        # reactor.stop()

This looks pretty sketchy.

>
>
>     def dataReceived(self, bytes):
>+        self.buf += bytes
>         if self._paused:
>-            log.startLogging(sys.stdout)
>+            log.startLogging(sys.stderr)
>             log.msg("dataReceived while transport paused!")
>             self.transport.loseConnection()
>         else:
>             self.transport.write(bytes)
>-            self.pause()
>+            if self.buf.endswith('\n0\n'):
>+                self.transport.loseConnection()
>+            else:
>+                self.pause()

So does this.  Why isn't it cool for the parent process to drop the connection?

Jean-Paul



From exarkun at twistedmatrix.com  Sat Apr  1 23:05:03 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 02 Apr 2006 06:05:03 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1143957903.9.1361092419@twistedmatrix.com

Bug summary
______________________
Summary for 2006-03-26 through 2006-04-02
Bugs opened: 12    Bugs closed: 9  Total open bugs: 574 (+3)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       -1  |Highest:  +2          |Conch:  -1             
|Enhancement:  +4  |High:     -2          |Core:   +2             
                   |Normal:   +1          |Trial:  +0             
                   |Low:      +2          |Web2:   +1             
                                          |Words:  +1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1611] Documentation and examples still use deprecated components APIs (e.g. __implements__) (opened by itamarst)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1611

[#1612] Words (jabber code) still uses deprecated components API (opened by itamarst)
    defect          words      http://twistedmatrix.com/trac/ticket/1612

[#1615] stdio tests should be run for all reactors (opened by exarkun)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1615

[#1617] Move 'notes to self' documentation aimed at developers *only* into a separate workspace. (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1617

                    ===== High =====
[#1606] trial fails to import from the test's directory when used through c:\python23\scripts\trial (opened by ml.flex) (CLOSED, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/1606

                    ===== Normal =====
[#1607] improved color-support detection (opened by orip) (CLOSED, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1607

[#1608] Add low-level support for WebDAV access controls (opened by wsanchez)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1608

[#1613] utility test case that starts up listening server and stops it on teardown (opened by itamarst)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1613

[#1614] trial fails to set reactor.running flag (opened by landonf)
    defect          trial      http://twistedmatrix.com/trac/ticket/1614

[#1616] interface to query reactor name (opened by exarkun)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1616

                    ===== Low =====
[#1609] Docs on return type for IReactorUNIX, IReactorArbitrary missing (opened by msmith)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1609

[#1610] assertions in pyunit test cases don't show tracebacks (opened by radix)
    defect          trial      http://twistedmatrix.com/trac/ticket/1610



Closed Bugs
______________________
                    ===== Highest =====
[#1545] A bunch of Twisted docstrings contain invalid epytext markup (opened by exarkun, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1545

[#1573] trial does not wait for the reactor to stop completely between tests/test methods/test suites/test runs/I don't know what (opened by exarkun, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1573

                    ===== High =====
[#836 ] Test suite import error on win32 (twisted.conch.test.test_cftp) (opened by spiv, closed by TimothyFitz, fixed)
    defect          conch      http://twistedmatrix.com/trac/ticket/836

[#1594] [PATCH] Errors from Trial TestCases don't report as failures when run by pyunit (opened by spiv, closed by spiv, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1594

[#1606] trial fails to import from the test's directory when used through c:\python23\scripts\trial (opened by ml.flex, closed by jml, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/1606

                    ===== Normal =====
[#1322] multicast support in iocpreactor (opened by ghazel, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1322

[#910 ] [PATCH] weak tasks (opened by zooko, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/910

[#1607] improved color-support detection (opened by orip, closed by jml, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1607

[#1553] _win32stdio.py does not implement ITransport (opened by amberite, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1553





From nelson1977 at gmail.com  Sun Apr  2 04:00:46 2006
From: nelson1977 at gmail.com (nelson -)
Date: Sun, 2 Apr 2006 12:00:46 +0200
Subject: [Twisted-Python] twisted & wxpython & COM server
Message-ID: <f44750160604020300r4a16b1f6s1edd7e7ad1fb78c3@mail.gmail.com>

hi all!
  i'm trying to develop a COm server application with wxpython, but i have
many thread problems (the GUI can't be in the same thread of the COM server
and also if i do it I have serious cleanup problems...). Can twisted help me
in maintain my GUI in a separate thread and talking to the COM server
instance?

thanks a lot,
  nelson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060402/4b215b23/attachment.html>

From apocalypznow at gmail.com  Sun Apr  2 12:21:22 2006
From: apocalypznow at gmail.com (apocalypznow)
Date: Sun, 02 Apr 2006 11:21:22 -0700
Subject: [Twisted-Python] Cleanly shutting down Service
Message-ID: <e0p4mr$cg1$1@sea.gmane.org>

How do I cleanly shut down a Service?  I want the shut down to make the 
stopService() method get called.




From reed at intersiege.com  Sun Apr  2 19:30:06 2006
From: reed at intersiege.com (Reed L. O'Brien)
Date: Sun, 02 Apr 2006 21:30:06 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <e0p4mr$cg1$1@sea.gmane.org>
References: <e0p4mr$cg1$1@sea.gmane.org>
Message-ID: <44307A9E.2060201@intersiege.com>

apocalypznow wrote:

> How do I cleanly shut down a Service?  I want the shut down to make
> the stopService() method get called.
>
import signal, sys

signal.signal(signal.SIGINT, handler)

def handler(signum, frame):
    print "Shutting down the Foo service" # or use a logging facility
    stopService()  
    sys.exit(2)

Will catch ^C and call handler for more read the signal docs:
http://www.python.org/doc/current/lib/module-signal.html

HTH
~reed




From andrew-twisted at puzzling.org  Sun Apr  2 20:27:12 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 3 Apr 2006 12:27:12 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r16524 - Further enhance
	win32 portability of subprocess support.
In-Reply-To: <E1FPpV4-0008UO-00@wolfwood>
References: <E1FPpV4-0008UO-00@wolfwood>
Message-ID: <20060403022712.GC25486@steerpike.home.puzzling.org>

On Sat, Apr 01, 2006 at 04:27:22PM -0700, Glyph Lefkowitz wrote:
> Author: glyph
> Date: Sat Apr  1 16:27:20 2006
> New Revision: 16524
[...]
> +        for stdfd in range(0, 1, 2):
> +            msvcrt.setmode(stdfd, os.O_BINARY)
> +

"range(0, 1, 2)" is a particularly obscure way to say "[0]".  I'm guessing
there's no test coverage for reading binary data from stdout or stderr of
subprocesses?

-Andrew.




From exarkun at divmod.com  Sun Apr  2 20:33:59 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 2 Apr 2006 22:33:59 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <44307A9E.2060201@intersiege.com>
Message-ID: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>

On Sun, 02 Apr 2006 21:30:06 -0400, "Reed L. O'Brien" <reed at intersiege.com> wrote:
>apocalypznow wrote:
>
>> How do I cleanly shut down a Service?  I want the shut down to make
>> the stopService() method get called.
>>
>import signal, sys
>
>signal.signal(signal.SIGINT, handler)
>
>def handler(signum, frame):
>    print "Shutting down the Foo service" # or use a logging facility
>    stopService()
>    sys.exit(2)
>
>Will catch ^C and call handler for more read the signal docs:
>http://www.python.org/doc/current/lib/module-signal.html
>

Alas, this won't do anything resembling correct in a Twisted application.

I tried to come up with an answer to this question earlier today, but failed: perhaps the OP can ask a more specific or detailed one which will be easier to answer correctly.

Jean-Paul



From teratorn at twistedmatrix.com  Sun Apr  2 20:51:42 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Mon, 03 Apr 2006 12:51:42 +1000
Subject: [Twisted-Python] twisted & wxpython & COM server
In-Reply-To: <f44750160604020300r4a16b1f6s1edd7e7ad1fb78c3@mail.gmail.com>
References: <f44750160604020300r4a16b1f6s1edd7e7ad1fb78c3@mail.gmail.com>
Message-ID: <op.s7evkgfgy3d107@localhost.localdomain>

On Sun, 02 Apr 2006 20:00:46 +1000, nelson - <nelson1977 at gmail.com> wrote:

> hi all!
>   i'm trying to develop a COm server application with wxpython, but i  
> have
> many thread problems (the GUI can't be in the same thread of the COM  
> server
> and also if i do it I have serious cleanup problems...). Can twisted  
> help me
> in maintain my GUI in a separate thread and talking to the COM server
> instance?
>
> thanks a lot,
>   nelson

I don't know where to begin. Could you pretend that nobody on this list  
knows what COM is and ask your question again?

What are you using Twisted for now?
What else are you hoping Twisted can help you with?
What exactly are the limitation you are dealing with?

-Eric




From reed at intersiege.com  Sun Apr  2 21:01:07 2006
From: reed at intersiege.com (Reed L. O'Brien)
Date: Sun, 02 Apr 2006 23:01:07 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
References: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
Message-ID: <44308FF3.6030803@intersiege.com>

Jean-Paul Calderone wrote:

> On Sun, 02 Apr 2006 21:30:06 -0400, "Reed L. O'Brien"
> <reed at intersiege.com> wrote:
>
>> apocalypznow wrote:
>>
>>> How do I cleanly shut down a Service?  I want the shut down to make
>>> the stopService() method get called.
>>>
>> import signal, sys
>>
>> signal.signal(signal.SIGINT, handler)
>>
>> def handler(signum, frame):
>>    print "Shutting down the Foo service" # or use a logging facility
>>    stopService()
>>    sys.exit(2)
>>
>> Will catch ^C and call handler for more read the signal docs:
>> http://www.python.org/doc/current/lib/module-signal.html
>>
>
> Alas, this won't do anything resembling correct in a Twisted application.
>
> I tried to come up with an answer to this question earlier today, but
> failed: perhaps the OP can ask a more specific or detailed one which
> will be easier to answer correctly.
>
> Jean-Paul


reactor.addSystemEventTrigger('before', 'shutdown', func())

def func():
	doStuff...

closer?

~reed




From glyph at divmod.com  Sun Apr  2 21:33:56 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 2 Apr 2006 23:33:56 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16524 - Further enhance
	win32 portability of subprocess support.
In-Reply-To: <20060403022712.GC25486@steerpike.home.puzzling.org>
Message-ID: <20060403033356.22481.1739247927.divmod.quotient.9322@ohm>



On Mon, 3 Apr 2006 12:27:12 +1000, Andrew Bennetts <andrew-twisted at puzzling.org> wrote:
>On Sat, Apr 01, 2006 at 04:27:22PM -0700, Glyph Lefkowitz wrote:
>> Author: glyph
>> Date: Sat Apr  1 16:27:20 2006
>> New Revision: 16524
>[...]
>> +        for stdfd in range(0, 1, 2):
>> +            msvcrt.setmode(stdfd, os.O_BINARY)
>> +
>
>"range(0, 1, 2)" is a particularly obscure way to say "[0]".  I'm guessing
>there's no test coverage for reading binary data from stdout or stderr of
>subprocesses?

Hmm.  As a matter of fact, the test which covers stdin should also cover stdout.  I'm not sure why that wasn't failing.  I meant [0, 1, 2] or range(0, 3).

I would fix it, but this weekend is pretty much over, and my next 3 weekends are spoken for.  Does somebody want to take over maintainership of this area?  I only started working on it because I wanted to be able to work on Divmod code at the same time as playing video games in Windows.




From teratorn at twistedmatrix.com  Mon Apr  3 00:02:18 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Mon, 03 Apr 2006 16:02:18 +1000
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <44308FF3.6030803@intersiege.com>
References: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
	<44308FF3.6030803@intersiege.com>
Message-ID: <op.s7e4d4mky3d107@localhost.localdomain>

On Mon, 03 Apr 2006 13:01:07 +1000, Reed L. O'Brien <reed at intersiege.com>  
wrote:

> Jean-Paul Calderone wrote:
>
>> On Sun, 02 Apr 2006 21:30:06 -0400, "Reed L. O'Brien"
>> <reed at intersiege.com> wrote:
>>
>>> apocalypznow wrote:
>>>
>>>> How do I cleanly shut down a Service?  I want the shut down to make
>>>> the stopService() method get called.
>>>>
>>> import signal, sys
>>>
>>> signal.signal(signal.SIGINT, handler)
>>>
>>> def handler(signum, frame):
>>>    print "Shutting down the Foo service" # or use a logging facility
>>>    stopService()
>>>    sys.exit(2)
>>>
>>> Will catch ^C and call handler for more read the signal docs:
>>> http://www.python.org/doc/current/lib/module-signal.html
>>>
>>
>> Alas, this won't do anything resembling correct in a Twisted  
>> application.
>>
>> I tried to come up with an answer to this question earlier today, but
>> failed: perhaps the OP can ask a more specific or detailed one which
>> will be easier to answer correctly.
>>
>> Jean-Paul
>
>
> reactor.addSystemEventTrigger('before', 'shutdown', func())
>
> def func():
> 	doStuff...
>
> closer?
>
> ~reed

Not really, No. I think you should have waited for the OP to ask a better  
question as JP suggested. The quality of questions on this mailing list  
has been very poor lately. Anyway, onwards...

To shut down a Service cleanly, you call stopService() on it.

If you want your service to have its stopService method called when  
Twisted shuts down, then
that service should be registered correctly. If you aren't using twistd  
then see
twisted.application.app.startApplication

>>> An example test.tac file:

 from twisted.application import service

class MyService(service.Service):
     def stopService(self):
         print "Stopping my service!"
         service.Service.stopService(self)

application = service.Application("My Twisted App")
myService = MyService()
myService.setName("My Service")
myService.setServiceParent(application)

 from twisted.internet import reactor
reactor.callLater(2, reactor.stop)

<<< End test.tac

If you run the .tac file with "twistd -noy test.tac", after 2 seconds,
you will see "Stopping my service!" printed.

-Eric



From itamar at itamarst.org  Mon Apr  3 09:34:16 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 03 Apr 2006 11:34:16 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <44308FF3.6030803@intersiege.com>
References: <20060403023359.22481.862264491.divmod.quotient.9302@ohm>
	<44308FF3.6030803@intersiege.com>
Message-ID: <1144078456.9211.2.camel@localhost.localdomain>

On Sun, 2006-04-02 at 23:01 -0400, Reed L. O'Brien wrote:

> reactor.addSystemEventTrigger('before', 'shutdown', func())
> 
> def func():
> 	doStuff...
> 
> closer?

# notice lack of parentheses after func:
reactor.addSystemEventTrigger('before', 'shutdown', func) 





From itamar at itamarst.org  Mon Apr  3 09:36:15 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 03 Apr 2006 11:36:15 -0400
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <e0p4mr$cg1$1@sea.gmane.org>
References: <e0p4mr$cg1$1@sea.gmane.org>
Message-ID: <1144078575.9211.5.camel@localhost.localdomain>

On Sun, 2006-04-02 at 11:21 -0700, apocalypznow wrote:
> How do I cleanly shut down a Service?  I want the shut down to make the 
> stopService() method get called.

Either use twistd with a .tac, as someone else suggested, or:

reactor.addSystemEventTrigger('before', 'shutdown', myservice.stopService)

If stopService returns a Deferred this will delay shutdown until
Deferred returned from stopService is triggered.




From zooko at zooko.com  Mon Apr  3 09:53:51 2006
From: zooko at zooko.com (zooko at zooko.com)
Date: Mon, 03 Apr 2006 12:53:51 -0300
Subject: Branch based development (Was Re: [Twisted-Python] Re:
	[Twisted-commits] r16287 - Revert r16241; tests are passing.)
In-Reply-To: <20060331044256.22481.299464125.divmod.quotient.8157@ohm>
References: <20060331044256.22481.299464125.divmod.quotient.8157@ohm>
Message-ID: <20060403155351.CD9CC1E6C7@yumyum.zooko.com>


 Glyph wrote:
>
> I think that "branch-based development" is a crummy name for this process, 
> since it isn't very exciting and it's really about tickets, reviews, and 
> changesets, not branches -- branches are an implementation detail to allow 
> developers to continue to use the VCS as a file server.

We're considering using a process inspired by yours at Allmydata, but we don't
call it "branch-based", since the word "branch" means something else in our
workflow.  Also we use darcs instead of SVN, and there is no particular sense
in which "branches" are important to our version of this process.

>   I think I am going
> to change the name to "ultimate quality development system" and then we can
> abbreviate it "UQDS".

Okay.

Regards,

Zooko



From ml.flex at gmail.com  Mon Apr  3 11:15:05 2006
From: ml.flex at gmail.com (Micky Latowicki)
Date: Mon, 3 Apr 2006 19:15:05 +0200
Subject: [Twisted-Python] logging errors in pb.py
Message-ID: <d27002d90604031015m231e291fi7e38095a96e217f1@mail.gmail.com>

pb logs failures with an error of type pb.Error if these failures are
returned by remotely-invoked methods; however, if these methods raise the
same Error, it is not logged.

Is this difference intentional or accidental?

Shouldn't this difference be removed?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060403/c08b0b15/attachment.html>

From ml.flex at gmail.com  Mon Apr  3 12:05:45 2006
From: ml.flex at gmail.com (Micky Latowicki)
Date: Mon, 3 Apr 2006 20:05:45 +0200
Subject: [Twisted-Python] copyable errors
Message-ID: <d27002d90604031105x591bb47fw6e5d3a82b148e518@mail.gmail.com>

in pb.Broker._sendError, if fail is a Failure with a jellyable value, then
the value, rather than the failure, is serialized.

When this value reaches the other side, it is wrapped in a failure. But all
the other information in the remote Failure is lost.

This seems inconsistent to me, and indeed has caused me a bug. If a method
returns a CopyableFailure that has a Jellyable value, then there's no
apparent reason for the information in the failure not to be sent - it
doesn't make sense to me that whether or not the value is Jellyable
determines whether or not the Failure's fields get sent.

I can work around this, but I thought maybe this should be changed in pb.

comments?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060403/2b1094a4/attachment.html>

From Wolfgang.W.Eichler at gmx.de  Tue Apr  4 09:20:58 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Tue, 4 Apr 2006 17:20:58 +0200
Subject: [Twisted-Python] UDP answer from different IP
Message-ID: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>

Hello,
I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
Thanks






From Wolfgang.W.Eichler at gmx.de  Tue Apr  4 09:23:17 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Tue, 4 Apr 2006 17:23:17 +0200
Subject: [Twisted-Python] Fw: UDP answer from different IP
Message-ID: <E1FQnNM-0005yh-00@pyramid.twistedmatrix.com>

I missed to mention: it concerns SNMP protocol.
>Hello,
>I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
>Thanks
>





From auspex at lincsat.com  Tue Apr  4 12:53:32 2006
From: auspex at lincsat.com (auspex at lincsat.com)
Date: Tue, 04 Apr 2006 15:53:32 -0300
Subject: [Twisted-Python] HOWTO use twisted-mail's IMAP4 server?
Message-ID: <1144176812.4432c0acc5837@webmail.lincsat.com>

I'm trying to figure out how the IMAP4 server does both TLS and SASL, but it
seems to me to be missing some significant parts.

What do I have to do to make this server run?  There's no apparent code to 
_start_ either IMAP or POP servers in this package, though there's a number of 
different .tacs for the SMTP server.
-- 
derek



From daedalus at eigenmagic.com  Tue Apr  4 15:34:59 2006
From: daedalus at eigenmagic.com (Justin Warren)
Date: Wed, 05 Apr 2006 07:34:59 +1000
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
References: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
Message-ID: <1144186499.21021.16.camel@localhost.localdomain>

On Tue, 2006-04-04 at 17:20 +0200, Wolfgang Eichler wrote:
> Hello,
> I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
> Thanks

It would appear that your server has two active interfaces with
different IPs on the same network. You wouldn't happen to be running
Solaris and IPMP by any chance, would you? Could we possibly see the
output from ifconfig -a?

-- 
Justin Warren <daedalus at eigenmagic.com>




From exarkun at divmod.com  Tue Apr  4 21:36:43 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 4 Apr 2006 23:36:43 -0400
Subject: [Twisted-Python] HOWTO use twisted-mail's IMAP4 server?
In-Reply-To: <1144176812.4432c0acc5837@webmail.lincsat.com>
Message-ID: <20060405033643.22481.1713773483.divmod.quotient.10157@ohm>

On Tue, 04 Apr 2006 15:53:32 -0300, auspex at lincsat.com wrote:
>I'm trying to figure out how the IMAP4 server does both TLS and SASL, but it
>seems to me to be missing some significant parts.
>
>What do I have to do to make this server run?  There's no apparent code to
>_start_ either IMAP or POP servers in this package, though there's a number of
>different .tacs for the SMTP server.

Twisted contains an IMAP4 server protocol implementation.  It does not contain 
a complete IMAP4 server.  For this, you need a storage mechanism; the complexity 
of IMAP4 places this beyond the current practical scope of Twisted.

"mktap mail --help" should get you started in the right direction for creating a 
POP3 or SMTP server.

Divmod, Inc., my employer, contributed the protocol implementation to Twisted 
while developing a complete IMAP4 server, Quotient.  IMAP4 isn't the focal point 
of the current version of Quotient, but it is likely support will reappear in 
some not-too-distant version.

Jean-Paul



From Wolfgang.W.Eichler at gmx.de  Tue Apr  4 23:08:30 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Wed, 5 Apr 2006 07:08:30 +0200
Subject: [Twisted-Python] UDP answer from different IP
Message-ID: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>

It is as you describe (but on Windows, not Solaris):
C:\>ipconfig
Windows 2000 IP Configuration

Ethernet adapter Local Area Connection 2:

        Connection-specific DNS Suffix  . : ca.com
        IP Address. . . . . . . . . . . . : 130.119.127.196
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 130.119.127.1

Ethernet adapter Local Area Connection:

        Connection-specific DNS Suffix  . : ca.com
        IP Address. . . . . . . . . . . . : 130.119.127.127
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 130.119.127.1

Wolfgang Eichler

>On Tue, 2006-04-04 at 17:20 +0200, Wolfgang Eichler wrote:
>> Hello,
>> I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
>> Thanks
>
>It would appear that your server has two active interfaces with
>different IPs on the same network. You wouldn't happen to be running
>Solaris and IPMP by any chance, would you? Could we possibly see the
>output from ifconfig -a?
>
>-- 
>Justin Warren <daedalus at eigenmagic.com>
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

= = = = = = = = = = = = = = = = = = = =
			
Wolfgang Eichler
Wolfgang.W.Eichler at gmx.de
2006-04-05





From stephen at thorne.id.au  Tue Apr  4 23:51:56 2006
From: stephen at thorne.id.au (Stephen Thorne)
Date: Wed, 5 Apr 2006 15:51:56 +1000
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>
Message-ID: <20060405055156.22481.1084807781.divmod.quotient.10221@ohm>

On Wed, 5 Apr 2006 07:08:30 +0200, Wolfgang Eichler <wolfgang.w.eichler at gmx.de> wrote:
>>On Tue, 2006-04-04 at 17:20 +0200, Wolfgang Eichler wrote:
>>> Hello,
>>> I have the situation, that an UDP Server answers a get request using a different IP address (it has 2 addresses). These replies are not mapped to the request. What to do ?
>>> Thanks

How are you setting up your UDP communication? Are you using reactor.listenUDP or .connectUDP? Can you provide a minimal code example?

I don't know about windows, but there is an 'interface' optional arg to both those functions that might be useful.

Stephen.



From foom at fuhm.net  Wed Apr  5 09:52:33 2006
From: foom at fuhm.net (James Y Knight)
Date: Wed, 5 Apr 2006 11:52:33 -0400
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
References: <E1FQnL7-0005wm-00@pyramid.twistedmatrix.com>
Message-ID: <D6F19F30-FE43-48E1-8BA3-D001259941BB@fuhm.net>


On Apr 4, 2006, at 11:20 AM, Wolfgang Eichler wrote:

> Hello,
> I have the situation, that an UDP Server answers a get request  
> using a different IP address (it has 2 addresses). These replies  
> are not mapped to the request. What to do ?
> Thanks

You need to listen separately on each IP address. Unfortunately  
neither twisted nor python has an API for enumerating all the  
addresses of a host, so you'll have to configure them  manually.

James



From daedalus at eigenmagic.com  Wed Apr  5 18:36:08 2006
From: daedalus at eigenmagic.com (Justin Warren)
Date: Thu, 06 Apr 2006 10:36:08 +1000
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>
References: <E1FR0Fy-0007md-00@pyramid.twistedmatrix.com>
Message-ID: <1144283768.6150.12.camel@localhost.localdomain>

On Wed, 2006-04-05 at 07:08 +0200, Wolfgang Eichler wrote:
> It is as you describe (but on Windows, not Solaris):
> C:\>ipconfig
> Windows 2000 IP Configuration
> 
> Ethernet adapter Local Area Connection 2:
> 
>         Connection-specific DNS Suffix  . : ca.com
>         IP Address. . . . . . . . . . . . : 130.119.127.196
>         Subnet Mask . . . . . . . . . . . : 255.255.255.0
>         Default Gateway . . . . . . . . . : 130.119.127.1
> 
> Ethernet adapter Local Area Connection:
> 
>         Connection-specific DNS Suffix  . : ca.com
>         IP Address. . . . . . . . . . . . : 130.119.127.127
>         Subnet Mask . . . . . . . . . . . : 255.255.255.0
>         Default Gateway . . . . . . . . . : 130.119.127.1

Hmm. I've encountered this kind of issue under Solaris with IPMP in that
if you have more than one active interface on a given network, you can't
easily predict which IP address the OS will choose for outbound packets.
I'm not familiar with the Windows selection algorithm.

Is the SNMP program on the Windows box yours or under your control? Or
are you writing something that does an SNMP GET to this windows box? If
it's your program, have a look at the 'interface' option that Stephen
mentioned. Otherwise it becomes a non-twisted issue around the interface
configuration on the Windows box. You want to be able to set the box up
so that it always sends packets out with a known source IP, or have the
receiving program identify responses in an IP address independant way.

-- 
Justin Warren <daedalus at eigenmagic.com>




From Wolfgang.W.Eichler at gmx.de  Thu Apr  6 01:45:21 2006
From: Wolfgang.W.Eichler at gmx.de (Wolfgang Eichler)
Date: Thu, 6 Apr 2006 09:45:21 +0200
Subject: [Twisted-Python] UDP answer from different IP
Message-ID: <E1FRPBJ-0001Bm-00@pyramid.twistedmatrix.com>

I would like to clarify the situation and describe my current work-around:

My twisted application is on client machine A. It sends  SNMP requests to server machine B.

         self.proxy = agentproxy.AgentProxy(
            ipAddress, port,            					# here   '130.119.127.196', 6665
            community = community,
            snmpVersion = 'v1',
            protocol = self.port.protocol,
        )
        df = self.proxy.getTable(oids, timeout= 0.5, retryCount=5)

Machine B has two interfaces to the network with IP '130.119.127.196' and '130.119.127.127' . Here runs some arbitrary SNMP Agent.

Twisted on A opens a port (25000 or so) and sends getNext requests.
These requests contain an ID, that is later used to identifiy incoming messages and  relate them to the request.

To do this snmpprotocol.py has a function getRequestKey, that retrieves this ID from protocol elements.

When sending the getNext-message getRequestKey() returns:

(('130.119.127.196', 6665), 782)

This is the key which later should work to identify this request when the answers from B arrive.

But since B uses the other interface to answer, the message that arrives carries:

(('130.119.127.127', 6665), 782) and this key is not known.

I wonder why we need the IP address and port at this point, since the ID (782) is unique to machine A and port 25000 and is sufficient to identify the request to which this incoming message belongs.

I patched in snmpprotocol.py:

	def getRequestKey( self, request, target ):
		"""Get the request key from a request/response"""
		for key in [
			'get_request', 'get_response',
			'get_next_request', 'get_bulk_request',
			'response', 'set_request',
		]:
			try:
				ID = request['pdu'][key]['request_id']
			except KeyError, err:
				pass
			except TypeError, err:
				log.error(
					"""Unexpected TypeError retrieving request key %r: %s""",
					key, log.getException(err),
				)
			else:
#				return target, ID.get()
				return ID.get()
		raise KeyError( """Unable to get a request key id from %s for target %s"""%( request, target))

This worked.
Could this be checked by some expert ? Any problem with this approach ?

Thanks
Wolfgang







From p.mayers at imperial.ac.uk  Thu Apr  6 02:16:35 2006
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Thu, 06 Apr 2006 09:16:35 +0100
Subject: [Twisted-Python] UDP answer from different IP
In-Reply-To: <E1FRPBJ-0001Bm-00@pyramid.twistedmatrix.com>
References: <E1FRPBJ-0001Bm-00@pyramid.twistedmatrix.com>
Message-ID: <4434CE63.90908@imperial.ac.uk>

Wolfgang Eichler wrote:
> I would like to clarify the situation and describe my current
> work-around:
> 
> My twisted application is on client machine A. It sends  SNMP
> requests to server machine B.
> 
> Machine B has two interfaces to the network with IP '130.119.127.196'
> and '130.119.127.127' . Here runs some arbitrary SNMP Agent.
> 
> 
> When sending the getNext-message getRequestKey() returns:
> 
> (('130.119.127.196', 6665), 782)

Then the SNMP code you're using is wrong. As you have found, it is 
EXTREMELY common for this to happen (the SNMP reply to come from a 
different IP than the request was sent to). Whether it's a wrong thing 
for the router/host to do is irrelevant for practical purposes - lots 
and lots of network equipment, some of it very expensive, does it.

My SNMP code does as you suggest, just uses the port number and ID number.

> I wonder why we need the IP address and port at this point, since the
> ID (782) is unique to machine A and port 25000 and is sufficient to
> identify the request to which this incoming message belongs.
> 
> I patched in snmpprotocol.py:

I can't see if that's the specific right thing to patch since I'm not 
familiar with TwistedSNMP, but as I say I have a python/C-helper SNMP 
stack, and it does exactly as you suggest, so if it works I'd say you've 
fixed it.



From Michael-Niehues at gmx.net  Thu Apr  6 02:50:27 2006
From: Michael-Niehues at gmx.net (Michael Niehues)
Date: Thu, 6 Apr 2006 10:50:27 +0200 (MEST)
Subject: [Twisted-Python] SSL Session Resumption
Message-ID: <2813.1144313427@www011.gmx.net>

Hi!

I have implemented  a client/Server program with twisted.internet.ssl and
pyopenssl. Now I would like to use session Resumption.
Therefor I have to enable the "session_cache_mode" and to set the old
session data (to use the last session).
Is this possible in twisted and how can I do that?   

kindly reagards

Michael Niehues



From exarkun at divmod.com  Thu Apr  6 07:15:12 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 6 Apr 2006 09:15:12 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16552 - fix some docstrings
 and radix's nitpicking
In-Reply-To: <E1FRKrq-0002Bn-00@wolfwood>
Message-ID: <20060406131512.22481.1551806552.divmod.quotient.10732@ohm>

On Wed, 05 Apr 2006 21:09:06 -0600, David Reid <dreid at wolfwood.twistedmatrix.com> wrote:
>Author: dreid
>Date: Wed Apr  5 21:09:05 2006
>New Revision: 16552
>
> [snip]
>
>Modified: branches/http-auth-1475-2/twisted/web2/auth/digest.py
>==============================================================================
>--- branches/http-auth-1475-2/twisted/web2/auth/digest.py	(original)
>+++ branches/http-auth-1475-2/twisted/web2/auth/digest.py	Wed Apr  5 21:09:05 2006
>@@ -23,7 +23,7 @@
>     'sha': sha.sha,
> }
>
>-def DigestCalcHA1(
>+def calcHA1(
> [snip]
>-def DigestCalcResponse(
>+def calcResponse(

You should leave the original function names around here somewhere, in a comment or a doc-string, since they are direct references to the spec which defines these transformations.

>
> [snip]
>
>Modified: branches/http-auth-1475-2/twisted/web2/auth/interfaces.py
>==============================================================================
>--- branches/http-auth-1475-2/twisted/web2/auth/interfaces.py	(original)
>+++ branches/http-auth-1475-2/twisted/web2/auth/interfaces.py	Wed Apr  5 21:09:05 2006
> [snip]
>
>     def decode(response, method=None):
>         """Create a credentials object from the given response.
>-
>+        May raise twisted.cred.error.LoginFailed if the response is invalid.
>+

You want @raise here.

>         @type response: C{str}
>         @param response: scheme specific response string
>
>
>Modified: branches/http-auth-1475-2/twisted/web2/auth/wrapper.py
>==============================================================================
>--- branches/http-auth-1475-2/twisted/web2/auth/wrapper.py	(original)
>+++ branches/http-auth-1475-2/twisted/web2/auth/wrapper.py	Wed Apr  5 21:09:05 2006
> [snip]
>@@ -51,10 +51,9 @@
>                                 from locateChild and render upon successful
>                                 authentication.
>
>-        @param credentialFactory: An L{ICredentialFactory} that supports the
>-                                  desired authentication scheme (currently only
>-                                  a single authentication scheme at a time is
>-                                  supported)
>+        @param credentialFactories: A list of instances that implement
>+                                    L{ICredentialFactory}.

"instances that implement"?  This is confusing.  Do you really mean "classes which implement" or "instances which provide"?

>+        @param credentialFactories: L{list}

This is probably meant to be @type.

>
>         @param protal: the portal that handles login

Typo here, and the only thing portals do is handle login, so is this really a useful piece of documentation? ;)

Jean-Paul



From leszczynscy at yahoo.com  Fri Apr  7 15:19:17 2006
From: leszczynscy at yahoo.com (Andy Leszczynski)
Date: Fri, 7 Apr 2006 14:19:17 -0700 (PDT)
Subject: [Twisted-Python] Disabling request queuing in twisted.protocols.http
Message-ID: <20060407211917.53349.qmail@web30007.mail.mud.yahoo.com>

Hi,

HTTP 1.1 persistent connection requires replies to be
send by the server in the order requests are received.
At least this is the way I understand the HTTP clients
can associate request/reply send and received thru the
TCP/IP.

I use Twisted twisted.protocols.http for very specific
application. There is a Twisted based HTTP server
which in some cases must reply in different order.

Now, I went thru the http module code and all the
outstanding requests results are steamed into IOString
and later flushed out in the correct order.

Is there any way to disable queuing. I tried to
overriteRequest.queued by passing 0 in to the__init__
but it yields some other problems. I use 1.3 Twisted.


Thanks in advance, A.



From jcea at argo.es  Fri Apr  7 17:55:38 2006
From: jcea at argo.es (Jesus Cea)
Date: Sat, 08 Apr 2006 01:55:38 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
Message-ID: <4436FBFA.2080500@argo.es>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Twisted is very extensive in protocol support, managing smtp, pop3 and
imap4, for example. I was wondering if there is any LMTP server project
out there. It should be fairly simple, since LMTP is very very similar
to usual SMTP. I need to use LMTP for a local project, and I was
wondering if tiwsted could be used to fill this gap.

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea at argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea at jabber.org         _/_/    _/_/          _/_/_/_/_/
                               _/_/  _/_/    _/_/          _/_/  _/_/
"Things are not so easy"      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
"My name is Dump, Core Dump"   _/_/_/        _/_/_/      _/_/  _/_/
"El amor es poner tu felicidad en la felicidad de otro" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBRDb7+plgi5GaxT1NAQK4rQP9EDdkMc0b83teXKB/XM22fV2gq3z/uEj1
RBjeHGSPOs5ogg1+/E4eiq8vq83mNTBDzxVJriN20UbrHgOcC+kBjfnCB8MCPnER
1tEorRnb19Siy+xnu0+rJ3XtNLJXJubMiXxm/5ig27Hl+UChnQLCthiqL1h0P22/
yi9LCprkRZ4=
=fG6b
-----END PGP SIGNATURE-----



From matusis at matusis.com  Fri Apr  7 18:57:05 2006
From: matusis at matusis.com (Alec Matusis)
Date: Fri, 7 Apr 2006 17:57:05 -0700
Subject: [Twisted-Python] Cleanly shutting down Service
In-Reply-To: <1144078575.9211.5.camel@localhost.localdomain>
Message-ID: <E1FS1lW-0003CX-00@pyramid.twistedmatrix.com>

I have two related questions about this.

I have been using

reactor.addSystemEventTrigger('before', 'shutdown',
myservice.beforeStopService) (not using .tac)

In my beforeStopService() function I need to do two things:

1) I have two factories, and two different protocols, that use two different
ports. Both have the same application set as service parent. I would like to
shut down connections on only ONE of the two ports before I proceed with
pre-shutdown procedures. How do I do this?

I am only aware of  
twisted.internet.reactor.disconnectAll()
But that shuts down all connections on BOTH ports.

Here is the simplified structure of my application:

#this connects to another server, I need this to stay open during
pre-shutdown
server_connector = ConnectorFactory()
server_connector.protocol = protocols.IconsToSellersProtocol
server_connector.service = myservice
serv_to_serv = twisted.application.internet.TCPClient(HOST, PORT_1,
server_connector).setServiceParent(application)

#this accepts connections from clients, I need this to close this during
pre-shutdown
client_factory = twisted.internet.protocol.ServerFactory()
client_factory.protocol = protocols.ClientProtocol
client_factory.service = myservice
client_factory.service.sc_protocol = server_connector.protocol
client_serv=twisted.application.internet.TCPServer(PORT_2,
client_factory).setServiceParent(application)

2) This scenario is simliar to 1), except that I want to stop accepting new
connections on PORT_2 in my pre-shutdown procedure, leaving the existent
connections on PORT_2 in ESTABLISHED state intact. 


-----Original Message-----
From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of Itamar
Shtull-Trauring
Sent: Monday, April 03, 2006 8:36 AM
To: Twisted general discussion
Subject: Re: [Twisted-Python] Cleanly shutting down Service

On Sun, 2006-04-02 at 11:21 -0700, apocalypznow wrote:
> How do I cleanly shut down a Service?  I want the shut down to make the 
> stopService() method get called.

Either use twistd with a .tac, as someone else suggested, or:

reactor.addSystemEventTrigger('before', 'shutdown', myservice.stopService)

If stopService returns a Deferred this will delay shutdown until
Deferred returned from stopService is triggered.


_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From jml at mumak.net  Sat Apr  8 20:42:42 2006
From: jml at mumak.net (Jonathan Lange)
Date: Sun, 9 Apr 2006 12:42:42 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
Message-ID: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>

Hello,

I reckon it's about time for another AU sprint.

The likely locations are Sydney or Melbourne, and the likely dates are
any weekend in May, the first weekend of June or the last weekend of
June.

Topics are as yet undecided.  I intend to remove wait() entirely.

I tentatively suggest that the Sprint be:
- In Sydney
- June 24-25
(patches accepted)

Can you make it? Reply today!

cheers,
jml



From mary-twisted at puzzling.org  Sat Apr  8 22:19:14 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 9 Apr 2006 14:19:14 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
Message-ID: <20060409041914.GA5338@sourdust.home.puzzling.org>

On Sun, Apr 09, 2006, Jonathan Lange wrote:
> I tentatively suggest that the Sprint be:
> - In Sydney
> - June 24-25
> (patches accepted)
> 
> Can you make it? Reply today!

If it's in Sydney yes, in Melbourne likely not (for entirely slefish
reasons involving throwing perfectly good money that could be spend on
sprinting at scuba diving).

If it's in Sydney I suggest going through Bob Kummerfeld as per post #4
at http://tinyurl.com/rjp67

-Mary



From exarkun at twistedmatrix.com  Sat Apr  8 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 09 Apr 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1144559101.9.222845506@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-02 through 2006-04-09
Bugs opened: 10    Bugs closed: 5  Total open bugs: 580 (+5)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +1  |Highest:  -2          |Core:   +5             
|Enhancement:  +5  |High:     +0          |Names:  +1             
                   |Normal:   +8          |Pb:     +0             
                                          |Trial:  -2             
                                          |Web:    +1             
                                          |Web2:   +1             


New / Reopened Bugs
______________________
                    ===== High =====
[#1618] twisted.pb.test.test_negotiate.CrossfireReverse.test4 fails intermittently (opened by jml) (CLOSED, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/1618

                    ===== Normal =====
[#1619] Reloading html page with unchanged CSS generates traceback (opened by jacob)
    defect          web2       http://twistedmatrix.com/trac/ticket/1619

[#1620] don't break an usage.Options error message when it contains encoded big5 (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1620

[#1621] Memory leak: twisted.web.http.Request objects should call _cleanup() on lost connection (opened by jon)
    defect          web        http://twistedmatrix.com/trac/ticket/1621

[#1622] twisted.names.client.Resolver.__init__.__doc__ error (opened by Nerdbeard)
    defect          names      http://twistedmatrix.com/trac/ticket/1622

[#1623] wxreactor/wxpython does not work well together - GUI "hangs" (opened by robertckcheung)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1623

[#1624] A way to specify time format on the twistd commandline (opened by moof) (CLOSED, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1624

[#1625] Integrate Mike Orr's finger tutorial additions (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1625

[#1626] Integrate Nicola Larosa's collection of interesting mailing list posts into the documentation (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1626

[#1627] Integrate Mike Fletcher's blog posts into the docs (opened by hypatia)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1627



Closed Bugs
______________________
                    ===== Highest =====
[#1470] test_reporter.TestErrorReporting.test_timing uses clock and tests many things (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1470

[#1538] Trial timing reporter doesn't work (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1538

                    ===== High =====
[#1618] twisted.pb.test.test_negotiate.CrossfireReverse.test4 fails intermittently (opened by jml, closed by exarkun, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/1618

[#1354] [PATCH] t.p.usage error messages mangle option case (opened by Tv, closed by radix, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1354

                    ===== Normal =====
[#1624] A way to specify time format on the twistd commandline (opened by moof, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1624





From jml at mumak.net  Sun Apr  9 01:09:43 2006
From: jml at mumak.net (Jonathan Lange)
Date: Sun, 9 Apr 2006 17:09:43 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <20060409041914.GA5338@sourdust.home.puzzling.org>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
	<20060409041914.GA5338@sourdust.home.puzzling.org>
Message-ID: <d06a5cd30604090009r58cc8a08xb2e576d6869a78b5@mail.gmail.com>

On 4/9/06, Mary Gardiner <mary-twisted at puzzling.org> wrote:
> On Sun, Apr 09, 2006, Jonathan Lange wrote:
> > I tentatively suggest that the Sprint be:
> > - In Sydney
> > - June 24-25
> > (patches accepted)
> >

For various reasons, it is now:
June 3-4, Sydney.

jml



From anthony at interlink.com.au  Sun Apr  9 09:36:37 2006
From: anthony at interlink.com.au (Anthony Baxter)
Date: Mon, 10 Apr 2006 01:36:37 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
Message-ID: <200604100136.39474.anthony@interlink.com.au>

I'm extremely unlikely to be able to make it to Sydney in June.

Sorry,
Anthony



From andy at thecablelounge.com  Sun Apr  9 18:29:35 2006
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 10 Apr 2006 10:29:35 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <20060409041914.GA5338@sourdust.home.puzzling.org>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
	<20060409041914.GA5338@sourdust.home.puzzling.org>
Message-ID: <4439A6EF.1090904@thecablelounge.com>

Mary Gardiner wrote:

> If it's in Sydney yes, in Melbourne likely not (for entirely slefish
> reasons involving throwing perfectly good money that could be spend on
> sprinting at scuba diving).

Perhaps twisted sprint and scuba dive!  Is Cairns to far for most peope?

Andy.



From mary-twisted at puzzling.org  Sun Apr  9 19:05:35 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 10 Apr 2006 11:05:35 +1000
Subject: [Twisted-Python] Twisted Sprint in Australia
In-Reply-To: <4439A6EF.1090904@thecablelounge.com>
References: <d06a5cd30604081942q3972c79apfde5efb6812da6a2@mail.gmail.com>
	<20060409041914.GA5338@sourdust.home.puzzling.org>
	<4439A6EF.1090904@thecablelounge.com>
Message-ID: <20060410010535.GH5338@sourdust.home.puzzling.org>

Getting, um, off topic, further responses off list please :)

On Mon, Apr 10, 2006, Andy Gayton wrote:
> Mary Gardiner wrote:
> 
> >If it's in Sydney yes, in Melbourne likely not (for entirely slefish
> >reasons involving throwing perfectly good money that could be spend on
> >sprinting at scuba diving).
> 
> Perhaps twisted sprint and scuba dive!  Is Cairns to far for most peope?

Probably doing Townsville and the Yongala in June. Far North Queensland
is too far *twice* in a year ;)

-Mary



From glyph at divmod.com  Sun Apr  9 20:39:26 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 9 Apr 2006 22:39:26 -0400
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: 0
Message-ID: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>

Currently there are 3 tests which are causing problems on the select reactor on win32, as detailed by this build report: 

http://twistedmatrix.com/buildbot/win32-select/builds/445/step-default/2

I think they should all be marked 'todo'.  Although ideally all the functionality these tests cover should be supported on Windows, the tests themselves are somewhat suspect, and marking them as 'todo' conditionally for the platform would turn the Windows buildbot green, allowing us to notice much more quickly when other, more serious things have gone wrong.

I am writing out a big rationale here becuase normally .todo'ing tests which are passing is a big no-no, and I think that this is something of a special case due to the long period of neglect for the platform involved.

The test in question are:

 * twisted.pb.test.test_negotiate.CrossfireReverse.test1

I've talked to brian about this test being todo'd because it is intermittently failing on _all_ platforms; windows just seems to have a far greater chance of failing.

 * twisted.test.test_udp.MulticastTestCase.testJoinFailure

I'm not really sure what is going on here.  Some nuance of error reporting in Python?  127.0.0.1 _is_ considered a multicast address on Windows?  This seems like it should be TODO'd conditionally, and there should be a ticket to conclusively diagnose it.

 * twisted.web2.test.test_http.SSLServerTest.testLingeringClose

Buffering 'lo' on Windows is weird.  I don't think that there is a proper way to fix this; IMHO the test is slightly buggy.  It's worth noting that the thing that's blowing up is a direct call to openssl's send(), _not_ a Twisted API.

While I think that this test is sort of suspicious, and it should figure out a way to be more lenient to its subprocess, I think that it can be todo'd for win32 since the behavior being tested isn't platform dependent, only the client APIs involved.  I believe that the ticket here should use Twisted in the subprocess so that if there is a portability issue with buffering, we can properly abstract it.

 * twisted.test.test_ssl.ConnectionLostTestCase.testFailedVerify

This is reporting the wrong error, but it is correctly dropping the connection.  There is a small security risk here, which bothers me, but there may be no way to expose the proper information without fixing bugs in openssl.  Considering that this passes on UNIX I believe it should also be conditionally marked on Windows.  The ticket here is simply to get the test to pass, since I think the test itself is OK in this circumstance.


In conclusion: one of these tests should be todo'd on all platforms, the rest should be todo'd conditionally if isWindows().  Any objections?



From andrew-twisted at puzzling.org  Sun Apr  9 21:54:11 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 10 Apr 2006 13:54:11 +1000
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
References: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
Message-ID: <20060410035411.GC29986@steerpike.home.puzzling.org>

On Sun, Apr 09, 2006 at 10:39:26PM -0400, glyph at divmod.com wrote:
[...]
> 
> In conclusion: one of these tests should be todo'd on all platforms, the 
> rest should be todo'd conditionally if isWindows().  Any objections?

Sounds good to me.

-Andrew.




From exarkun at divmod.com  Sun Apr  9 23:10:30 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 10 Apr 2006 01:10:30 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16582 - Remove util.wait
	and all uses.
In-Reply-To: <E1FSmy6-0005zK-00@wolfwood>
Message-ID: <20060410051030.22481.1163510204.divmod.quotient.11981@ohm>

On Sun, 09 Apr 2006 21:21:34 -0600, Jonathan Lange <jml at wolfwood.twistedmatrix.com> wrote:
>Author: jml
>Date: Sun Apr  9 21:21:33 2006
>New Revision: 16582
>
>Modified:
>   trunk/twisted/conch/test/test_filetransfer.py
>   trunk/twisted/conch/test/test_telnet.py
>   trunk/twisted/lore/nevowlore.py
>   trunk/twisted/mail/test/test_mail.py
>   trunk/twisted/mail/test/test_pop3client.py
>   trunk/twisted/names/test/test_names.py
>   trunk/twisted/protocols/ftp.py
>   trunk/twisted/test/test_adbapi.py
>   trunk/twisted/test/test_defgen.py
>   trunk/twisted/test/test_ftp.py
>   trunk/twisted/test/test_reflector.py
>   trunk/twisted/trial/runner.py
>   trunk/twisted/trial/test/test_util.py
>   trunk/twisted/trial/unittest.py
>   trunk/twisted/trial/util.py
>   trunk/twisted/web2/test/test_stream.py
>Log:
>Remove util.wait and all uses.
>
> [snip]
>
>Modified: trunk/twisted/protocols/ftp.py
>==============================================================================
>--- trunk/twisted/protocols/ftp.py	(original)
>+++ trunk/twisted/protocols/ftp.py	Sun Apr  9 21:21:33 2006
>@@ -660,7 +660,7 @@
>             if cmd == 'PASS':
>                 return self.ftp_PASS(*params)
>             else:
>-                return BAD_CMD_SEQ
>+                return BAD_CMD_SEQ, "PASS required after USER"
>
>         elif self.state == self.AUTHED:
>             method = getattr(self, "ftp_" + cmd, None)
>@@ -672,7 +672,7 @@
>             if cmd == 'RNTO':
>                 return self.ftp_RNTO(*params)
>             else:
>-                return BAD_CMD_SEQ, "Blah"
>+                return BAD_CMD_SEQ, "RNTO required after RNFR"
>
>
>     def ftp_USER(self, username):
>

Hmmm.  I don't see any changes related to wait() in these hunks. ;)

> [snip]
>Modified: trunk/twisted/test/test_ftp.py
>==============================================================================
>--- trunk/twisted/test/test_ftp.py	(original)
>+++ trunk/twisted/test/test_ftp.py	Sun Apr  9 21:21:33 2006
> [snip]
>@@ -86,7 +82,10 @@
>         # Connect a client to it
>         portNum = self.port.getHost().port
>         clientCreator = protocol.ClientCreator(reactor, ftp.FTPClientBasic)
>-        self.client = wait(clientCreator.connectTCP("127.0.0.1", portNum))
>+        d = clientCreator.connectTCP("127.0.0.1", portNum)
>+        def gotClient(client):
>+            self.client = client
>+        return d.addCallback(gotClient)
>
>     def tearDown(self):
>         # Clean up sockets

While it doesn't appear that this change *introduced* a new race condition, it does seem as though it has jostled things so as to cause an existing one to start going the wrong way.

This seems to be a pretty common one in the test suite, so everyone pay attention.

Just because one side of a TCP connection has had its connection-established-successfully callback fired (ie, buildProtocol on the Factory) does not mean that both sides of the TCP connection have had this callback fired.  Quite often, in fact, this is not the case (particularly on platforms you forgot to run the unit tests on ;).

This ftp setUp needs to be made to wait for both the server and the client to become connected before proceeding.  The failure to do so can be seen as a new failing test on the reactors buildslave in the Qt step.

(Of course, the Qt step was already red, because a previous branch uncovered still another race condition.)

Please revert the branch or fix the race post-haste.  If someone would take a look at the failing tcp half-close test on that reactor, I would appreciate it, otherwise I'll try to get to it sometime in the next couple days.

Jean-Paul



From andrew-twisted at puzzling.org  Mon Apr 10 00:20:50 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Mon, 10 Apr 2006 16:20:50 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r16582 - Remove util.wait
	and all uses.
In-Reply-To: <20060410051030.22481.1163510204.divmod.quotient.11981@ohm>
References: <E1FSmy6-0005zK-00@wolfwood>
	<20060410051030.22481.1163510204.divmod.quotient.11981@ohm>
Message-ID: <20060410062050.GE29986@steerpike.home.puzzling.org>

On Mon, Apr 10, 2006 at 01:10:30AM -0400, Jean-Paul Calderone wrote:
[...]
> >--- trunk/twisted/protocols/ftp.py	(original)
> >+++ trunk/twisted/protocols/ftp.py	Sun Apr  9 21:21:33 2006
> >@@ -660,7 +660,7 @@
> >            if cmd == 'PASS':
> >                return self.ftp_PASS(*params)
> >            else:
> >-                return BAD_CMD_SEQ
> >+                return BAD_CMD_SEQ, "PASS required after USER"
> >
> >        elif self.state == self.AUTHED:
> >            method = getattr(self, "ftp_" + cmd, None)
> >@@ -672,7 +672,7 @@
> >            if cmd == 'RNTO':
> >                return self.ftp_RNTO(*params)
> >            else:
> >-                return BAD_CMD_SEQ, "Blah"
> >+                return BAD_CMD_SEQ, "RNTO required after RNFR"
> >
> >
> >    def ftp_USER(self, username):
> >
> 
> Hmmm.  I don't see any changes related to wait() in these hunks. ;)

This was my bad (I did the ftp parts of this branch) -- I bumped into the bug in
the first hunk while updating test_ftp, and improved the nearby "Blah" while I
was at it :)

[...]
> 
> While it doesn't appear that this change *introduced* a new race condition, 
> it does seem as though it has jostled things so as to cause an existing one 
> to start going the wrong way.
> 
[...]
> Please revert the branch or fix the race post-haste.  If someone would take 
> a look at the failing tcp half-close test on that reactor, I would 
> appreciate it, otherwise I'll try to get to it sometime in the next couple 
> days.

Jonathan and I both came up with essentially the same fix for this.  He's just
committed mine to the trunk in r16583.

Thanks for spotting this.

No idea about the half-close test, though...

-Andrew.




From Brendan at BrendanSimon.com  Mon Apr 10 04:28:44 2006
From: Brendan at BrendanSimon.com (Brendan Simon)
Date: Mon, 10 Apr 2006 20:28:44 +1000
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
Message-ID: <443A335C.6000204@BrendanSimon.com>

I have the following application in mind.
    1. Using a Configuration Management System that only runs on UNIX.
    2. Write an application for Windows to remotely connect to the UNIX 
host and perform commands.
    3. Optionally add a GUI (wxPython) to the application.

The CMS has a command to output XML of parts of its internal database 
which will make it easy to display the info in a client app :)  For me 
the question is how do I get the info to/from the CMS on a remote 
server.  I think writing a small server app to interpret my requests and 
relay the XML output to the client is the answer.

I want to use SSH which is how I got onto Twisted (Conch) though I do 
realise that Paramiko is available too.  I also want to make use of rsync.

Reading some Python books, suggested  technologies are Twisted's 
Perspective Broker, XMLRPC, CORBA and also SOAP is mentioned.

CORBA seems like overkill for my simple server.
SOAP I don't know enough about yet.
XMLRPC seems very appropriate.
PB seems easy enough too.

One big question for me is portability, such that other clients written 
in other languages could access the same data.  I'm thinking that all 
technologies would have this property _except_ for PB.  Is that 
correct?  i.e. could a C, perl or ruby application access my server if 
the server was written using Twisted PB ???

If not would anyone recommend SOAP or XMLRPC instead??

Also, it would be nice if I could use any transport mechanism to send 
the commands.  eg. http, https, ssh, rsh.  Can Twisted be used to 
provide such a generic transport mechanism?  If not would, SOAP or 
XMLRPC be better choices, or is the question of transport irrelevant.

I was thinking of creating my own XML files to request information from 
my server.  Is this the way to go, or am I recreating the wheel?

Thanks,
Brendan.




From mithrandi-twisted-python at mithrandi.za.net  Mon Apr 10 05:07:43 2006
From: mithrandi-twisted-python at mithrandi.za.net (Tristan Seligmann)
Date: Mon, 10 Apr 2006 13:07:43 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
In-Reply-To: <443A335C.6000204@BrendanSimon.com>
References: <443A335C.6000204@BrendanSimon.com>
Message-ID: <20060410110743.GB25250@mithrandi.za.net>

* Brendan Simon <Brendan at BrendanSimon.com> [2006-04-10 20:28:44 +1000]:

> One big question for me is portability, such that other clients written 
> in other languages could access the same data.  I'm thinking that all 
> technologies would have this property _except_ for PB.  Is that 
> correct?  i.e. could a C, perl or ruby application access my server if 
> the server was written using Twisted PB ???

PB support outside of Python is pretty minimal. I believe there may be a
Java implementation still floating around somewhere, but I'm not sure
how up to date it is, or whether it is even still functional.

> If not would anyone recommend SOAP or XMLRPC instead??

I would recommend transferring plain custom XML documents over HTTP,
rather than introducing an extra layer of pain with SOAP or XML-RPC.

> Also, it would be nice if I could use any transport mechanism to send 
> the commands.  eg. http, https, ssh, rsh.  Can Twisted be used to 
> provide such a generic transport mechanism?  If not would, SOAP or 
> XMLRPC be better choices, or is the question of transport irrelevant.

I believe SOAP and XML-RPC are only defined over HTTP (including https,
because that's more or less an extra layer underneath it). I'm not sure
there's any value in transmitting SOAP/XML-RPC XML documents over
something like ssh.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: </pipermail/twisted-python/attachments/20060410/4c36fb69/attachment.sig>

From os at webinspace.de  Mon Apr 10 06:09:27 2006
From: os at webinspace.de (Oliver Scheel)
Date: Mon, 10 Apr 2006 14:09:27 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
Message-ID: <324705477@web.de>

Hi,

> Reading some Python books, suggested  technologies are Twisted's 
> Perspective Broker, XMLRPC, CORBA and also SOAP is mentioned.
> 
> CORBA seems like overkill for my simple server.
> SOAP I don't know enough about yet.
> XMLRPC seems very appropriate.
> PB seems easy enough too.

I was exactly in the same situation last month :-)

My thoughts:

CORBA ist quite nice, wide spreaded, but more work to implement.

PB ist quite nice, at least twisted only spreaded, but easy to implement.

XML-RPC is included with Python. SOAP is much better the way data types and other things are handled, but not part of Python. Both are easy to use. Twisted favour is SOAPpy and that is build the (pythonic) way like "xmlrpclib".

I use both, but I built the services and the clients that way, that I can change between XML-RPC and SOAP. I need XML-RPC, because one service is located on a Windows 98 machine and I want to reduce complexity out there :-)

Oliver




From projects at reedflute.com  Mon Apr 10 06:12:38 2006
From: projects at reedflute.com (Eugene Coetzee)
Date: Mon, 10 Apr 2006 14:12:38 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
In-Reply-To: <20060410110743.GB25250@mithrandi.za.net>
References: <443A335C.6000204@BrendanSimon.com>
	<20060410110743.GB25250@mithrandi.za.net>
Message-ID: <443A4BB6.8090403@reedflute.com>

Tristan Seligmann wrote:

>I would recommend transferring plain custom XML documents over HTTP,
>rather than introducing an extra layer of pain with SOAP or XML-RPC.
>
>  
>
>>Also, it would be nice if I could use any transport mechanism to send 
>>the commands.  eg. http, https, ssh, rsh.  Can Twisted be used to 
>>provide such a generic transport mechanism?  If not would, SOAP or 
>>XMLRPC be better choices, or is the question of transport irrelevant.
>>    
>>
>
>I believe SOAP and XML-RPC are only defined over HTTP (including https,
>because that's more or less an extra layer underneath it). I'm not sure
>there's any value in transmitting SOAP/XML-RPC XML documents over
>something like ssh.
>  
>
For a more formal approach to "XML documents over HTTP" doing in a sane 
fashion what SOAP/XML-RPC wants to achieve:

http://en.wikipedia.org/wiki/Representational_State_Transfer

With Twisted you can easily roll your own RESTive interface.

regards,

Eugene Coetzee

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060410/6d8e10e7/attachment.html>

From jml at mumak.net  Mon Apr 10 06:47:27 2006
From: jml at mumak.net (Jonathan Lange)
Date: Mon, 10 Apr 2006 22:47:27 +1000
Subject: [Twisted-Python] Trial: State of the Union
Message-ID: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>

Hello All,

I've recently merged a branch that removes twisted.trial.util.wait
along with all uses of wait() from our tests (paypal details below
;)). Thought it might be a good time to let people know what I'm
thinking with Trial. (By the way, thanks very much to everyone who
helped with that branch.)

There are four major changes / refactorings that I am planning on seeing done:

1. Become a real Twisted application
(http://twistedmatrix.com/trac/wiki/TrialDevNotes)
Essentially, make Trial's TestSuite expect tests to return Deferreds. 
More at the reference.

2. Trial Reactor (http://twistedmatrix.com/trac/ticket/1334)
Jp has indicated that this is the best way for Trial to do cleanup
after each test.

3. Log Sanity (http://twistedmatrix.com/trac/ticket/1409)
Rather than using log._startKeepingErrors or whatever it is called,
use a log observer to keep logged errors and report them as errors
when the test is done.  Provide APIs for altering the list of errors
that have been logged in the test.

4. Split up TestCase
Ideally, I'd like to split out the special case stuff in TestCase that
handles TestCase subclasses that use setUpClass.

I'm intending to work on 1 at the sprint. However, I think we need to
remove the remaining reactor.iterate calls for it to work.

All of these changes involve non-trivial refactoring and should make
Trial less bad.  Once they are made, my role as maintainer will
(hopefully!) slip into fixing bugs, improving docs and adding features
that I'm excited about.

How you can help:
- Money doesn't help so much. If you want, you can buy me curry. Or a
gym membership, to work off all that curry. Paypal is jml at mumak.net.
There are probably better ways you could help Twisted with your money.
- Pairing helps a lot. Come to Tassie.
- Remove calls to reactor.iterate()
- Help me do 2.

cheers,
jml



From jason at jasonlefkowitz.net  Mon Apr 10 09:09:18 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Mon, 10 Apr 2006 11:09:18 -0400
Subject: [Twisted-Python] Minimal example of Words/OSCAR?
Message-ID: <443A751E.40708@jasonlefkowitz.net>

Hey --

I'm just getting started with Twisted, and I'm particularly interested 
in getting up to speed with Twisted Words.  I'm curious if there is a 
minimalistic demo example anywhere of a bot that connects to the 
OSCAR/AIM network.  I've been looking over the included oscardemo.py and 
it's been helpful, but it seems to include a lot of functionality 
(handling chat-room requests, change of status of buddies, etc.) and I'm 
having trouble parsing out what is absolutely necessary just to 
establish a connection with the OSCAR network.  Does anyone know of an 
example that just shows this?

Thanks in advance!

-- Jason Lefkowitz



From moe at divmod.com  Mon Apr 10 10:15:59 2006
From: moe at divmod.com (Moe Aboulkheir)
Date: Mon, 10 Apr 2006 18:15:59 +0200
Subject: [Twisted-Python] Minimal example of Words/OSCAR?
In-Reply-To: <443A751E.40708@jasonlefkowitz.net>
Message-ID: <20060410161559.22481.566535785.divmod.quotient.12126@ohm>

Jason,

Here is a stripped-down version of oscardemo.py:

http://divmod.org/users/moe/oscardemo.minimal.py

As per your request, it doesn't do anything except connect to OSCAR and hang around.

Moe



From glyph at divmod.com  Mon Apr 10 10:27:26 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 10 Apr 2006 12:27:26 -0400
Subject: [Twisted-Python] Minimal example of Words/OSCAR?
In-Reply-To: <443A751E.40708@jasonlefkowitz.net>
Message-ID: <20060410162726.22481.538306586.divmod.quotient.12130@ohm>



On Mon, 10 Apr 2006 11:09:18 -0400, "Jason A. Lefkowitz" <jason at jasonlefkowitz.net> wrote:
>Hey --
>
>I'm just getting started with Twisted, and I'm particularly interested in 
>getting up to speed with Twisted Words.  I'm curious if there is a 
>minimalistic demo example anywhere of a bot that connects to the OSCAR/AIM 
>network.  I've been looking over the included oscardemo.py and it's been 
>helpful, but it seems to include a lot of functionality (handling chat-room 
>requests, change of status of buddies, etc.) and I'm having trouble parsing 
>out what is absolutely necessary just to establish a connection with the 
>OSCAR network.  Does anyone know of an example that just shows this?

I don't believe that there is.  It strikes me that it is a documentation bug, either that there isn't such a document, or that it is hard to find.  Someone want to correct me before I file it?

>Thanks in advance!
>
>-- Jason Lefkowitz

By the way, everyone: no relation (that I am aware of).  



From jason at jasonlefkowitz.net  Mon Apr 10 10:45:57 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Mon, 10 Apr 2006 12:45:57 -0400
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
Message-ID: <443A8BC5.5040506@jasonlefkowitz.net>

Thanks, Moe!  Very helpful.

-- Jason



From TimothyFitz at gmail.com  Mon Apr 10 12:01:09 2006
From: TimothyFitz at gmail.com (Timothy Fitz)
Date: Mon, 10 Apr 2006 14:01:09 -0400
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
References: <20060410023926.22481.1056588948.divmod.quotient.11928@ohm>
Message-ID: <972ec5bd0604101101r178b5c64qe09cb9feb4f81a48@mail.gmail.com>

On 4/9/06, glyph at divmod.com <glyph at divmod.com> wrote:
>  * twisted.test.test_udp.MulticastTestCase.testJoinFailure
>
> I'm not really sure what is going on here.  Some nuance of error reporting in Python?  127.0.0.1 _is_ considered a multicast address on Windows?  This seems like it should be TODO'd conditionally, and there should be a ticket to conclusively diagnose it.

It seems that the 127.*.*.* range is considered a valid multicast
address under windows, though I've found no functionality this exposes
(and no documentation or mention of it online). Other addresses do
properly fail.



From mithrandi-twisted-python at mithrandi.za.net  Mon Apr 10 13:30:13 2006
From: mithrandi-twisted-python at mithrandi.za.net (Tristan Seligmann)
Date: Mon, 10 Apr 2006 21:30:13 +0200
Subject: [Twisted-Python] PB v XMLRPC v CORBA v SOAP
In-Reply-To: <443A4BB6.8090403@reedflute.com>
References: <443A335C.6000204@BrendanSimon.com>
	<20060410110743.GB25250@mithrandi.za.net>
	<443A4BB6.8090403@reedflute.com>
Message-ID: <20060410193012.GD25250@mithrandi.za.net>

* Eugene Coetzee <projects at reedflute.com> [2006-04-10 14:12:38 +0200]:

> For a more formal approach to "XML documents over HTTP" doing in a sane 
> fashion what SOAP/XML-RPC wants to achieve:

I do not think that anything that SOAP wants to achieve could be
described as sane ;)

> http://en.wikipedia.org/wiki/Representational_State_Transfer

More seriously, REST and SOAP/XML-RPC really are different beasts; REST
is about "state transfer", SOAP and XML-RPC are mainly about RPC-style
semantics. Of course, SOAP also has a "document style" form in which you
embed a custom XML document in a wad of pointless SOAP wrapping, which
confuses things.

Unfortunately, in my experience, the most popular choice is also the
most brain-damaged: an RPC-style SOAP interface with a single method
containing a single string parameter (well, maybe a username and
password too; basic auth must be too hard to understand) that contains a
custom XML document...

(If you hadn't guessed, I'm just a little bitter about all this *g*)

> With Twisted you can easily roll your own RESTive interface.

Indeed.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: </pipermail/twisted-python/attachments/20060410/f33e1e25/attachment.sig>

From glyph at divmod.com  Mon Apr 10 18:38:18 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 10 Apr 2006 20:38:18 -0400
Subject: [Twisted-Python] marking 3 problem tests on Windows 'todo'
In-Reply-To: <972ec5bd0604101101r178b5c64qe09cb9feb4f81a48@mail.gmail.com>
Message-ID: <20060411003818.22481.201011782.divmod.quotient.12249@ohm>



On Mon, 10 Apr 2006 14:01:09 -0400, Timothy Fitz <timothyfitz at gmail.com> wrote:
>On 4/9/06, glyph at divmod.com <glyph at divmod.com> wrote:
>>  * twisted.test.test_udp.MulticastTestCase.testJoinFailure

>It seems that the 127.*.*.* range is considered a valid multicast
>address under windows, though I've found no functionality this exposes
>(and no documentation or mention of it online). Other addresses do
>properly fail.

Is there another private range that properly fails?  If so, would you mind creating a ticket for this...? :)



From jason at jasonlefkowitz.net  Tue Apr 11 08:05:33 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Tue, 11 Apr 2006 10:05:33 -0400
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
Message-ID: <443BB7AD.2070304@jasonlefkowitz.net>

Moe,

I've been trying to use your oscardemo.minimal.py, but it doesn't seem 
to work for me -- I launch it, and it asks for my AIM username & 
password, but after I provide them I don't see my AIM user show up on my 
buddy list (I'm logged in via IM client as another user, to test the 
script).  When I run oscardemo.py, though, it connects fine.

Is there something I have to do to oscardemo.minimal.py before it's 
runnable?  Or am I misunderstanding the way Words works (i.e. it is 
connected, but you need to do something more to have the bot show up on 
people's buddy lists)?

-- Jason



From moe at divmod.com  Tue Apr 11 08:27:14 2006
From: moe at divmod.com (Moe Aboulkheir)
Date: Tue, 11 Apr 2006 16:27:14 +0200
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
In-Reply-To: <443BB7AD.2070304@jasonlefkowitz.net>
Message-ID: <20060411142714.22481.194757601.divmod.quotient.12435@ohm>

Jason,

Maybe the example was a little too minimal :).  Slightly different version that will show the bot as being online:

http://divmod.org/users/moe/oscardemo.client-ready.py

Moe



From jason at jasonlefkowitz.net  Tue Apr 11 08:43:28 2006
From: jason at jasonlefkowitz.net (Jason A. Lefkowitz)
Date: Tue, 11 Apr 2006 10:43:28 -0400
Subject: [Twisted-Python] Re: Minimal example of Words/OSCAR?
Message-ID: <443BC090.2070908@jasonlefkowitz.net>

Moe -- this one works perfectly!  Thanks for putting up with my 
newbie-ism :)

-- Jason



From bgranger at scu.edu  Wed Apr 12 01:30:13 2006
From: bgranger at scu.edu (Brian Granger)
Date: Wed, 12 Apr 2006 00:30:13 -0700
Subject: [Twisted-Python] Transforming Exceptions for use with PB
Message-ID: <fa8579a40604120030q19b3d377r152d1af9164ae0d5@mail.gmail.com>

Hi,

I have a question about how Exceptions are handled by PB.

I am using Twisted to expose a python object (wrapped into a Twisted
Service) over a couple of network protocols (PB and XML-RPC).  I am
using interfaces/components/adapters to adapt my service into entities
that each protocol can use:

class IPerspectiveFunction(Interface):

    def remote_function(self, x):

class PerspectiveFunctionFromService(pb.Root):

    implements(IPerspectiveFunction)

    def __init__(self, service):
        self.service = service

    def remote_function(self, x):
        return self.service.function(x)     # The service returns a Deferred

self.service.function returns a Deferred, whose errbacks are fired
when an Exception is raised in self.service.function.

Here is my dilemma:

- The code in self.service.function that raises exceptions is in
another library that doesn't know about Twisted.  Thus the exceptions
are not sublcasses of pb.Error.

- Even if I did have control over these exceptions, I wouldn't want to
subclass pb.Error as I need to propagate the errors out to other (not
PB) protocols.

- I would like to detect certain types of exceptions (maybe using
trap()) and convert them to instances of pb.Error (or a subclass) so I
can send them over the line using PB.

The following almost works:

    def remote_function(self, x):
        d = self.service.function(x)     # The service returns a Deferred
        def transformFailure(f):
            return failure.Failure(pb.Error(f.printTraceback()))
        d.addErrback(transformFailure)
        return d

The other side gets the Error just fine, but the PB server still
prints the traceback and says "Peer will receive following PB
traceback:"  Why does PB handle it this way, when the Failure instance
that PB gets contains a pb.Error exception?

Any thoughts on how to transform general Failure instances to ones
that can be handled in a clean way by PB?  I guess there is amore
general question of how to transform Failure instances into things
that can be handled by various network protocols (such as XML-RPC or
even HTTP)

Thanks in advance.

Brian


Brian Granger
Santa Clara University
ellisonbg at gmail.com



From thomas at apestaart.org  Wed Apr 12 05:28:55 2006
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Wed, 12 Apr 2006 13:28:55 +0200
Subject: [Twisted-Python] Trial: State of the Union
In-Reply-To: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>
References: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>
Message-ID: <1144841335.19399.3.camel@otto.amantes>

Hi,

> 2. Trial Reactor (http://twistedmatrix.com/trac/ticket/1334)
> Jp has indicated that this is the best way for Trial to do cleanup
> after each test.

How does this work if currently a project chooses a specific reactor
because that's what the tests need ?

For example, some of our UI unit tests use the gtk2reactor/glib2reactor
because otherwise they can't run.  Same for some of our GStreamer-using
tests, which need a glib main loop.

Maybe whatever trial needs can be implemented as an IReactorIface or a
mixin instead ?

Thomas





From radix at twistedmatrix.com  Wed Apr 12 06:27:53 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 12 Apr 2006 08:27:53 -0400
Subject: [Twisted-Python] Trial: State of the Union
In-Reply-To: <1144841335.19399.3.camel@otto.amantes>
References: <d06a5cd30604100547y49455c66v6b6b589fdc267501@mail.gmail.com>
	<1144841335.19399.3.camel@otto.amantes>
Message-ID: <60ed19d40604120527k300635e8g371fb6b0974c62f3@mail.gmail.com>

On 4/12/06, Thomas Vander Stichele <thomas at apestaart.org> wrote:
>
> Hi,
>
> > 2. Trial Reactor (http://twistedmatrix.com/trac/ticket/1334)
> > Jp has indicated that this is the best way for Trial to do cleanup
> > after each test.
>
> How does this work if currently a project chooses a specific reactor
> because that's what the tests need ?
>
> For example, some of our UI unit tests use the gtk2reactor/glib2reactor
> because otherwise they can't run.  Same for some of our GStreamer-using
> tests, which need a glib main loop.
>
> Maybe whatever trial needs can be implemented as an IReactorIface or a
> mixin instead ?



If some of your tests are reliant on one reactor, and some of them on
another, then you can't run them both in the same process even now. You will
have to specify the reactor globally, just as always.


Oh, now I think I know what you mean: "Is the Trial reactor only compatible
with the select reactor?"? As I understand it, the idea is to make it a
wrapper around whatever other reactor you globally choose.

--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060412/1da4f0bd/attachment.html>

From jean-marc.pouchoulon at ac-montpellier.fr  Wed Apr 12 15:06:45 2006
From: jean-marc.pouchoulon at ac-montpellier.fr (jmp)
Date: Wed, 12 Apr 2006 23:06:45 +0200
Subject: [Twisted-Python] bad behaviour of ldaptor 0.0.39 with twisted
 2.2.0: "strange" characters in ldap logs
Message-ID: <443D6BE5.1020908@ac-montpellier.fr>


I have no answer with a search request,

here is my filter:

In [19]: searchFilter = ldapfilter.parseFilter('(uid=toto)')

The search result in ldap directory server logs shows me  why I have no 
answer:

scope=2 filter="(uid=*\82\09\80\07*toto)" attrs=ALL

With twisted 2.2
python /usr/lib/python2.4/site-packages/ldaptor/ldapfilter.py "(uid=toto)"
LDAPFilter_equalityMatch(attributeDesc=LDAPAttributeDescription(value='uid'), 
assertionValue=LDAPAssertionValue(value=LDAPFilter_substrings_final(value=LDAPFilter_substrings_initial(value='toto'))))

With twisted 1.3 I have not the same result

python /usr/local/lib/python2.4/site-packages/ldaptor/ldapfilter.py 
"(uid=toto)"
LDAPFilter_equalityMatch(attributeDesc=LDAPAttributeDescription(value='uid'), 
assertionValue=LDAPAssertionValue(value='toto'))

The same code works with  twisted 1.3
Any ideas to deal with that ?

thanks
jean-marc






From manlio_perillo at libero.it  Thu Apr 13 03:54:55 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu, 13 Apr 2006 07:54:55 -0200
Subject: [Twisted-Python] equivalent of flow.Cooperate for deferredGenerator
Message-ID: <443E1FEF.6060404@libero.it>

Hi.

What is the equivalent instruction for pause a deferredGenerator for n
seconds.


Thanks  Manlio Perillo



From matt at pollenation.net  Thu Apr 13 05:06:38 2006
From: matt at pollenation.net (Matt Goodall)
Date: Thu, 13 Apr 2006 12:06:38 +0100
Subject: [Twisted-Python] equivalent of flow.Cooperate for
	deferredGenerator
In-Reply-To: <443E1FEF.6060404@libero.it>
References: <443E1FEF.6060404@libero.it>
Message-ID: <443E30BE.8090706@pollenation.net>

Manlio Perillo wrote:
> Hi.
> 
> What is the equivalent instruction for pause a deferredGenerator for n
> seconds.

I'm not sure what Cooperate actually does but if you just want to put a
deferredGenerator to sleep for some period of time then something like
this (untested) should work:

    seconds = 5
    d = defer.Deferred()
    reactor.callLater(seconds, lambda: d.callback(None))
    d = defer.waitForDeferred(d)
    yield d
    d.getResult()

That's ugly, but pulling the first 3 or 4 lines of that into a function
would tidy it up a lot.

- Matt

-- 
     __
    /  \__     Matt Goodall, Pollenation Internet Ltd
    \__/  \    w: http://www.pollenation.net
  __/  \__/    e: matt at pollenation.net
 /  \__/  \    t: +44 (0)113 2252500
 \__/  \__/
 /  \          Any views expressed are my own and do not necessarily
 \__/          reflect the views of my employer.



From manlio_perillo at libero.it  Fri Apr 14 12:54:49 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 16:54:49 -0200
Subject: [Twisted-Python] IReactorCore.iterate docstring
Message-ID: <443FEFF9.8050605@libero.it>

"""Run the main loop's I/O polling function for a period of time.

This is most useful in applications where the UI is being drawn "as
fast as possible", such as games. All pending IDelayedCalls will be called.
The reactor must have been started (via the run() method) prior to any
invocations of this method. It must also be stopped manually after the
last call to this method (via the stop() method). This method is not
re-entrant: you must not call it recursively; in particular, you must
not call it while the reactor is running."""


I'm not sure to understand this:
"The reactor must have been started" and
"you must not call it while the reactor is running"




Thanks and regards  Manlio Perillo



From manlio_perillo at libero.it  Fri Apr 14 13:15:25 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 17:15:25 -0200
Subject: [Twisted-Python] 
	reactor.addSystemEventTrigger("before", "shutdown", self.logout)
Message-ID: <443FF4CD.3090509@libero.it>

Hi.

I would like to have a function be called at the very end of the reactor
lifetime.

I have tried with the statement in the subject, where self.logout sends
a packet via UDP (self is an instance of a class derived from
DatagramProtocol).

But this seems to be not allowed.
I obtain:

Traceback (most recent call last):
File "...\twisted\python\log.py",  line 53, in callWithLogger

  	[...]

--- <exception caught here> ---
File "...\twisted\internet\selectreactor.py", line 139, in doReadOrWrite
  why = getattr(selectable, method)()
File "...\twisted\internet\udp.py", line 114, in doRead
  data, addr = self.socket.recvfrom(self.maxPacketSize)
  exceptions.AttributeError: 'Port' object has no attribute 'socket'


Traceback (most recent call last):
File "justmyscript.py", line 79, in ?
  reactor.run()

	[...]

--- <exception caught here> ---
File "...\twisted\python\log.py", line 53, in callWithLogger
  return callWithContext({"system": lp}, func, *args, **kw)
File "...\twisted\python\log.py", line 38, in callWithContext
  return context.call({ILogContext: newCtx}, func, *args, **kw)
File "...\twisted\python\context.py", line 59, in callWithContext
  return self.currentContext().callWithContext(ctx, func, *args, **kw)
File "...\twisted\python\context.py", line 37, in callWithContext
  return func(*args,**kw)
File "...\twisted\internet\selectreactor.py", line 149, in doReadOrWrite
  self._disconnectSelectable(selectable, why, method=="doRead")
File "...\twisted\internet\posixbase.py", line 256, in _disconnectSelectable
  selectable.connectionLost(failure.Failure(why))
File "...\twisted\internet\udp.py", line 207, in connectionLost
  self.protocol.doStop()
File "...\twisted\internet\protocol.py", line 490, in doStop
  assert self.numPorts > 0
  exceptions.AssertionError:



This means, in short, that in a shutdown event I can't use the reactor?
I think that this should be documented.




Thanks and regards  Manlio Perillo



From exarkun at divmod.com  Fri Apr 14 15:29:00 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 14 Apr 2006 17:29:00 -0400
Subject: [Twisted-Python] IReactorCore.iterate docstring
In-Reply-To: <443FEFF9.8050605@libero.it>
Message-ID: <20060414212900.22481.832460287.divmod.quotient.13577@ohm>

On Fri, 14 Apr 2006 16:54:49 -0200, Manlio Perillo <manlio_perillo at libero.it> wrote:
>"""Run the main loop's I/O polling function for a period of time.
>
>This is most useful in applications where the UI is being drawn "as
>fast as possible", such as games. All pending IDelayedCalls will be called.
>The reactor must have been started (via the run() method) prior to any
>invocations of this method. It must also be stopped manually after the
>last call to this method (via the stop() method). This method is not
>re-entrant: you must not call it recursively; in particular, you must
>not call it while the reactor is running."""
>
>
>I'm not sure to understand this:
>"The reactor must have been started" and
>"you must not call it while the reactor is running"
>

The docstring should actually read:

    """
    Not a public method.  Do not call this method.
    """

Jean-Paul



From exarkun at divmod.com  Fri Apr 14 15:32:28 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 14 Apr 2006 17:32:28 -0400
Subject: [Twisted-Python] 
	reactor.addSystemEventTrigger("before", "shutdown", self.logout)
In-Reply-To: <443FF4CD.3090509@libero.it>
Message-ID: <20060414213228.22481.121809678.divmod.quotient.13579@ohm>

On Fri, 14 Apr 2006 17:15:25 -0200, Manlio Perillo <manlio_perillo at libero.it> wrote:
>Hi.
>
>I would like to have a function be called at the very end of the reactor
>lifetime.
>
>I have tried with the statement in the subject, where self.logout sends
>a packet via UDP (self is an instance of a class derived from
>DatagramProtocol).
>

Services or the underlying APIs they rely on (addSystemEventTrigger) are the correct way to go about this.

>But this seems to be not allowed.
>I obtain:
>
>Traceback (most recent call last):
>File "...\twisted\python\log.py",  line 53, in callWithLogger
>
>  	[...]
>
>--- <exception caught here> ---
>File "...\twisted\internet\selectreactor.py", line 139, in doReadOrWrite
>  why = getattr(selectable, method)()
>File "...\twisted\internet\udp.py", line 114, in doRead
>  data, addr = self.socket.recvfrom(self.maxPacketSize)
>  exceptions.AttributeError: 'Port' object has no attribute 'socket'
>
>
>Traceback (most recent call last):
>File "justmyscript.py", line 79, in ?
>  reactor.run()
>
>	[...]
>
>--- <exception caught here> ---
>File "...\twisted\python\log.py", line 53, in callWithLogger
>  return callWithContext({"system": lp}, func, *args, **kw)
>File "...\twisted\python\log.py", line 38, in callWithContext
>  return context.call({ILogContext: newCtx}, func, *args, **kw)
>File "...\twisted\python\context.py", line 59, in callWithContext
>  return self.currentContext().callWithContext(ctx, func, *args, **kw)
>File "...\twisted\python\context.py", line 37, in callWithContext
>  return func(*args,**kw)
>File "...\twisted\internet\selectreactor.py", line 149, in doReadOrWrite
>  self._disconnectSelectable(selectable, why, method=="doRead")
>File "...\twisted\internet\posixbase.py", line 256, in _disconnectSelectable
>  selectable.connectionLost(failure.Failure(why))
>File "...\twisted\internet\udp.py", line 207, in connectionLost
>  self.protocol.doStop()
>File "...\twisted\internet\protocol.py", line 490, in doStop
>  assert self.numPorts > 0
>  exceptions.AssertionError:
>
>
>
>This means, in short, that in a shutdown event I can't use the reactor?
>I think that this should be documented.
>

You can, and many applications do.  Perhaps you have found a bug, or perhaps you are using system event triggers improperly.  Could you post a minimal, complete example which will reproduce this behavior?

Jean-Paul



From manlio_perillo at libero.it  Fri Apr 14 15:46:41 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 19:46:41 -0200
Subject: [Twisted-Python] IReactorCore.iterate docstring
In-Reply-To: <20060414212900.22481.832460287.divmod.quotient.13577@ohm>
References: <20060414212900.22481.832460287.divmod.quotient.13577@ohm>
Message-ID: <44401841.3010101@libero.it>

Jean-Paul Calderone ha scritto:
> On Fri, 14 Apr 2006 16:54:49 -0200, Manlio Perillo
> <manlio_perillo at libero.it> wrote:
>> """Run the main loop's I/O polling function for a period of time.
>>
>> This is most useful in applications where the UI is being drawn "as
>> fast as possible", such as games. All pending IDelayedCalls will be
>> called.
>> The reactor must have been started (via the run() method) prior to any
>> invocations of this method. It must also be stopped manually after the
>> last call to this method (via the stop() method). This method is not
>> re-entrant: you must not call it recursively; in particular, you must
>> not call it while the reactor is running."""
>>
>>
>> I'm not sure to understand this:
>> "The reactor must have been started" and
>> "you must not call it while the reactor is running"
>>
> 
> The docstring should actually read:
> 
>    """
>    Not a public method.  Do not call this method.
>    """
> 

Ok, thanks.
But why the docstring don't say this or, better, why do not remove it
from the interface?


There are some other cases of this?



Regards  Manlio Perillo



From manlio_perillo at libero.it  Fri Apr 14 16:34:23 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 14 Apr 2006 20:34:23 -0200
Subject: [Twisted-Python] 	reactor.addSystemEventTrigger("before",
	"shutdown", self.logout)
In-Reply-To: <20060414213228.22481.121809678.divmod.quotient.13579@ohm>
References: <20060414213228.22481.121809678.divmod.quotient.13579@ohm>
Message-ID: <4440236F.8090200@libero.it>

Jean-Paul Calderone ha scritto:
> On Fri, 14 Apr 2006 17:15:25 -0200, Manlio Perillo
> <manlio_perillo at libero.it> wrote:
>> Hi.
>>
>> I would like to have a function be called at the very end of the reactor
>> lifetime.
>>
>> I have tried with the statement in the subject, where self.logout sends
>> a packet via UDP (self is an instance of a class derived from
>> DatagramProtocol).
>>
> 
> Services or the underlying APIs they rely on (addSystemEventTrigger) are
> the correct way to go about this.
> 

Ok.

>> But this seems to be not allowed.
>> I obtain:
>>
> [...]
>>
>> This means, in short, that in a shutdown event I can't use the reactor?
>> I think that this should be documented.
>>
> 
> You can, and many applications do.  Perhaps you have found a bug, or
> perhaps you are using system event triggers improperly. Could you post
> a minimal, complete example which will reproduce this behavior?
> 

Sure!
My system is Windows XP SP2, Python 2.4.3, Twisted 2.2.0


##########
import sys

from twisted.python import log

from twisted.internet.protocol import DatagramProtocol
from twisted.internet import defer, reactor


class Server(DatagramProtocol):
    def datagramReceived(self, data, addr):
        print "server: received from %s:%d" % addr, data
        self.transport.write("LOGGED OUT", addr)


class Client(DatagramProtocol):
    def __init__(self):
        self.deferred = defer.Deferred()

    def startProtocol(self):
        self.transport.connect("127.0.0.1", 9000)

        reactor.addSystemEventTrigger("before", "shutdown", self.logout)

    def connectionRefused(self):
        print "unable to connect"

    def datagramReceived(self, data, addr):
        print "client: received from %s:%d" % addr, data
        self.deferred.callback(data)

    def logout(self):
        self.transport.write("LOGOUT")

        return self.deferred



reactor.listenUDP(9000, Server())
reactor.listenUDP(0, Client())

reactor.callLater(2, reactor.stop)

log.startLogging(sys.stdout)
reactor.run()

#############



The problem seems to be with the response.
There are no problems if logout does not return a deferred (but in this
case the client does not sees the LOGGED OUT response).


Is this an improper use of system event triggers?



Thanks and regards  Manlio Perillo



From matt.feifarek+twisted at gmail.com  Fri Apr 14 16:56:10 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Fri, 14 Apr 2006 18:56:10 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
Message-ID: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>

I've been using twisted for a couple of years, and am re-writing my
application yet-again to make it even more twisty, so I'm trying to use the
persistence mechanisms that come from services and applications, and I have
hit a snag.

I've conformed my application to the details of the tutorial in the docs
(and I see the demonstrated method of making a 'plugin' is deprecated, and I
get that message after registering my app and running mktap).

First question:
The deprecation warning tells me to look in twisted.plugin... but I don't
see much in the way of docs in there. Where can I learn what I should do?

Second question:
Even though I'm using a fresh Twisted 2.2, installed from the tarball, I
don't have any manpages... not for mktap or twistd, so the docs tell me to
look in the manpage, but I can't (I'm on Ubuntu Breezy, FWIW). I see the man
files themselves in my twisted source distribution, but they don't appear to
be installed when I install twisted.

Third question:
I'm able to make a .tap file, run it, and send it ^C to shut it down. I get
the [app]-shutdown.tap file, but when I try to run that file with 'twistd -f
wrangler-shutdown.tap' I get a problem with the re-building of my objects.
There's an attribute error, from one of the classes that's a part of my
application.

Do I have to write my application in some way to get it to persist and
unpersist properly? There's nothing in my app that isn't pickle-able... it's
just instances and dictionaries, nothing like open files or database
connections.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060414/3fc77351/attachment.html>

From coder_infidel at hotmail.com  Sat Apr 15 03:13:41 2006
From: coder_infidel at hotmail.com (Luke Dunstan)
Date: Sat, 15 Apr 2006 17:13:41 +0800
Subject: [Twisted-Python] Documentation download
Message-ID: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>


Hi,

I installed Twisted_NoDocs-2.1.0.win32-py2.4.exe. The installer seems to
have put a couple of broken shortcuts on my start menu pointing to a
directory TwistedDocs that doesn't exist. For example:

C:\Python24\lib\site-packages\TwistedDocs\howto\index.xhtml

The real question though is: where can I download the HTML documentation for
this release?

Luke



From manlio_perillo at libero.it  Sat Apr 15 04:02:21 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat, 15 Apr 2006 08:02:21 -0200
Subject: [Twisted-Python] deferredGenerator ad errbacks
Message-ID: <4440C4AD.4000802@libero.it>

Hi again!

I have started to use deferredGenerator:


from twisted.internet import defer, reactor


def waitFor(seconds):
    """It would be nice to have this in twisted.internet.defer.
       Thanks to Matt Goodall.
    """

    d = defer.Deferred()
    reactor.callLater(seconds, lambda: d.callback(None))

    return defer.waitForDeferred(d)


@defer.deferredGenerator
def generator():
    d = defer.waitForDeferred(defer.succeed(1))
    yield d

    d = defer.waitForDeferred(defer.fail(Exception("error 1")))
    yield d

#    raise Exception("error 2")

    yield waitFor(3)

    d = defer.waitForDeferred(defer.succeed(2))
    yield d



def callback(result=None):
    print result


def errback(reason):
    print reason


g = generator()
g.addCallbacks(callback, errback)
reactor.run()



The "problem" is that my errback is never called.
Is this a limitation of the deferred Generators?





Thanks   Manlio Perillo



From radix at twistedmatrix.com  Sat Apr 15 07:46:44 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 15 Apr 2006 09:46:44 -0400
Subject: [Twisted-Python] deferredGenerator ad errbacks
In-Reply-To: <4440C4AD.4000802@libero.it>
References: <4440C4AD.4000802@libero.it>
Message-ID: <60ed19d40604150646y797a77b0s96ddc681b676e2e5@mail.gmail.com>

On 4/15/06, Manlio Perillo <manlio_perillo at libero.it> wrote:
>
> from twisted.internet import defer, reactor
>
>
> def waitFor(seconds):
>     """It would be nice to have this in twisted.internet.defer.
>        Thanks to Matt Goodall.
>     """
>
>     d = defer.Deferred()
>     reactor.callLater(seconds, lambda: d.callback(None))
>
>     return defer.waitForDeferred(d)
>
>
> @defer.deferredGenerator
> def generator():
>     d = defer.waitForDeferred(defer.succeed(1))
>     yield d
>
>     d = defer.waitForDeferred(defer.fail(Exception("error 1")))
>     yield d
>
> #    raise Exception("error 2")
>
>     yield waitFor(3)


You want to getResult() the result from waitFor().



    d = defer.waitForDeferred(defer.succeed(2))

    yield d


You want to getResult() the result from waitForDeferred.

getResult() is the thing that (either returns a result or) raises any
exceptions that a Deferred has failed with, so it's important to always call
it.


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060415/6b6da065/attachment.html>

From grimmtooth at gmail.com  Sat Apr 15 08:29:20 2006
From: grimmtooth at gmail.com (Jeff Grimmett)
Date: Sat, 15 Apr 2006 10:29:20 -0400
Subject: [Twisted-Python] Documentation download
In-Reply-To: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
Message-ID: <8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>

On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:

> The real question though is: where can I download the HTML documentation
> for this release?
>

http://twistedmatrix.com/trac/

There's a link or three about halfway down.

--
"Ladies and gentlemen, there's nothing to worry about ... but please keep
your heads down." - The Muppet Show

Best,

    Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060415/69e09d4c/attachment.html>

From manlio_perillo at libero.it  Sat Apr 15 09:21:39 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat, 15 Apr 2006 13:21:39 -0200
Subject: [Twisted-Python] deferredGenerator ad errbacks
In-Reply-To: <60ed19d40604150646y797a77b0s96ddc681b676e2e5@mail.gmail.com>
References: <4440C4AD.4000802@libero.it>
	<60ed19d40604150646y797a77b0s96ddc681b676e2e5@mail.gmail.com>
Message-ID: <44410F83.8050905@libero.it>

Christopher Armstrong ha scritto:
> On 4/15/06, *Manlio Perillo* <manlio_perillo at libero.it
> <mailto:manlio_perillo at libero.it>> wrote:
> 
>     from twisted.internet import defer, reactor
> 
> [...]
>     @defer.deferredGenerator
>     def generator():
>         d = defer.waitForDeferred( defer.succeed(1))
>         yield d
> 
>         d = defer.waitForDeferred(defer.fail(Exception("error 1")))
>         yield d
> 
> [...]
>
> getResult() is the thing that (either returns a result or) raises any
> exceptions that a Deferred has failed with, so it's important to always
> call it.
> 

Ok, thanks; I'm sorry to have missed it.


Regards  Manlio Perillo



From phil at bubblehouse.org  Sat Apr 15 09:20:26 2006
From: phil at bubblehouse.org (Phil Christensen)
Date: Sat, 15 Apr 2006 11:20:26 -0400
Subject: [Twisted-Python] debian weirdness
Message-ID: <9B810C2D-D6FD-45F1-ABB4-E67426F635AC@bubblehouse.org>

hey all...

just dropping a line to see if any of you have noticed a strange  
buglet that i've seen on debian a number of times.

basically, after installing twisted (SVN trunk, not a package), when  
i use apt for various other things, i'll get this error:

[jupiter:~/WebServer/jupiter.bubblehouse.org] phil% sudo apt-get  
install trac
Reading Package Lists... Done
Building Dependency Tree... Done
[blah blah blah]
(Reading database ... 40322 files and directories currently installed.)
Unpacking trac (from .../archives/trac_0.9.4-2_all.deb) ...
Setting up trac (0.9.4-2) ...
Compiling /usr/lib/python2.3/site-packages/twisted/test/ 
stdio_test_halfclose.py ...
   File "/usr/lib/python2.3/site-packages/twisted/test/ 
stdio_test_halfclose.py", line 20
     ???
     ^
SyntaxError: invalid syntax
[blah blah blah]

this isn't a big deal, because i can just go in and edit the file,  
removing what appears to be simply three question-marks, but i  
thought this was pretty strange. it's doesn't seem to be in the  
original source in SVN, and i've noticed this occurring on both  
Debian and Ubuntu, on various servers.

it obviously doesn't seem like a Twisted problem, but I can't think  
of what could be happening here...I've seen this on well-travelled  
installations like my server, as well as on freshly-installed  
machines at work.

just wondering if anyone else has encountered this...

-phil



From radix at twistedmatrix.com  Sat Apr 15 09:31:03 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 15 Apr 2006 11:31:03 -0400
Subject: [Twisted-Python] debian weirdness
In-Reply-To: <9B810C2D-D6FD-45F1-ABB4-E67426F635AC@bubblehouse.org>
References: <9B810C2D-D6FD-45F1-ABB4-E67426F635AC@bubblehouse.org>
Message-ID: <60ed19d40604150831w738a6ae5tffb9d5b0a45cd01e@mail.gmail.com>

On 4/15/06, Phil Christensen <phil at bubblehouse.org> wrote:


Compiling /usr/lib/python2.3/site-packages/twisted/test/
> stdio_test_halfclose.py ...
>    File "/usr/lib/python2.3/site-packages/twisted/test/
> stdio_test_halfclose.py", line 20
>      ???
>      ^
> SyntaxError: invalid syntax
> [blah blah blah]
>
> this isn't a big deal, because i can just go in and edit the file,
> removing what appears to be simply three question-marks, but i
> thought this was pretty strange. it's doesn't seem to be in the
> original source in SVN, and i've noticed this occurring on both
> Debian and Ubuntu, on various servers.



It _is_ in the original source in SVN, and that file appears to be unused.
It was committed by exarkun in revision 16374 with the commit message
"mumble". I guess it should be removed, unless it *is* serving some
purpose...


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060415/fa92837b/attachment.html>

From exarkun at divmod.com  Sat Apr 15 09:54:47 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 15 Apr 2006 11:54:47 -0400
Subject: [Twisted-Python] debian weirdness
In-Reply-To: <60ed19d40604150831w738a6ae5tffb9d5b0a45cd01e@mail.gmail.com>
Message-ID: <20060415155447.22481.1411291846.divmod.quotient.13838@ohm>

On Sat, 15 Apr 2006 11:31:03 -0400, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>On 4/15/06, Phil Christensen <phil at bubblehouse.org> wrote:
>
>
>Compiling /usr/lib/python2.3/site-packages/twisted/test/
>> stdio_test_halfclose.py ...
>>    File "/usr/lib/python2.3/site-packages/twisted/test/
>> stdio_test_halfclose.py", line 20
>>      ???
>>      ^
>> SyntaxError: invalid syntax
>> [blah blah blah]
>>
>> this isn't a big deal, because i can just go in and edit the file,
>> removing what appears to be simply three question-marks, but i
>> thought this was pretty strange. it's doesn't seem to be in the
>> original source in SVN, and i've noticed this occurring on both
>> Debian and Ubuntu, on various servers.
>
>
>
>It _is_ in the original source in SVN, and that file appears to be unused.
>It was committed by exarkun in revision 16374 with the commit message
>"mumble". I guess it should be removed, unless it *is* serving some
>purpose...
>

Actually, someone should finish it, since there is otherwise no test coverage of halfclose stdio.

Jean-Paul



From mike at mkp.ca  Sat Apr 15 10:22:37 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Sat, 15 Apr 2006 12:22:37 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
Message-ID: <200604151222.37968.mike@mkp.ca>

On Friday 14 April 2006 18:56, Matt Feifarek wrote:
> I've been using twisted for a couple of years, and am re-writing my
> application yet-again to make it even more twisty, so I'm trying to use the
> persistence mechanisms that come from services and applications, and I have
> hit a snag.

I don't have any insight on your particular problems, but the wisdom of the 
list seems to be that the automatic persistence features are not intended for 
production-grade applications, but rather for debugging and development.  
Most authors I'd trust have stated that you're better off to save your state 
yourself on shutdown rather than rely upon the app-shutdown.tap turds.

There has also been debate about whether or not mktap plugins are even a good 
idea at all for new applications.  At any rate, I don't think it receives the 
same attention from the core developers that it once did.  The moral seems to 
be that just because something is provided by Twisted does not mean it's a 
best practice.

Mike.



From coder_infidel at hotmail.com  Sat Apr 15 12:26:17 2006
From: coder_infidel at hotmail.com (Luke Dunstan)
Date: Sun, 16 Apr 2006 02:26:17 +0800
Subject: [Twisted-Python] Documentation download
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
	<8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>
Message-ID: <BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>


OK, perhaps I was not specific enough. I have already found the links to the online manual, API reference, etc., but where do I actually download this HTML documentation as a single zip file or tarball?

Luke

  ----- Original Message ----- 
  From: Jeff Grimmett 
  To: Twisted general discussion 
  Sent: Saturday, April 15, 2006 10:29 PM
  Subject: Re: [Twisted-Python] Documentation download


  On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:


    The real question though is: where can I download the HTML documentation for this release?


  http://twistedmatrix.com/trac/

  There's a link or three about halfway down. 

  -- 
  "Ladies and gentlemen, there's nothing to worry about ... but please keep your heads down." - The Muppet Show

  Best,

      Jeff 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060416/57c16e48/attachment.html>

From grimmtooth at gmail.com  Sat Apr 15 16:44:13 2006
From: grimmtooth at gmail.com (Jeff Grimmett)
Date: Sat, 15 Apr 2006 18:44:13 -0400
Subject: [Twisted-Python] Documentation download
In-Reply-To: <BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
	<8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>
	<BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>
Message-ID: <8f4623fb0604151544i1974836exb7819e4808d6950f@mail.gmail.com>

On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:
>
>
> OK, perhaps I was not specific enough. I have already found the links to
> the online manual, API reference, etc., but where do I actually download
> this HTML documentation as a single zip file or tarball?
>

Ah.  I don't think there is one as of yet. Although if you check out the
subversion repository, most (if not all) of it appears to be in the docs
directory.

--
"Ladies and gentlemen, there's nothing to worry about ... but please keep
your heads down." - The Muppet Show

Best,

    Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060415/3471b78e/attachment.html>

From grimmtooth at gmail.com  Sat Apr 15 16:47:07 2006
From: grimmtooth at gmail.com (Jeff Grimmett)
Date: Sat, 15 Apr 2006 18:47:07 -0400
Subject: [Twisted-Python] Broken link
Message-ID: <8f4623fb0604151547l428ce558s881cb3ea551a3827@mail.gmail.com>

I noticed today that the link to the registration page in
/doc/fun/register.html is broken. Bug or feature?

--
"Ladies and gentlemen, there's nothing to worry about ... but please keep
your heads down." - The Muppet Show

Best,

    Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060415/87f26bdb/attachment.html>

From glyph at divmod.com  Sat Apr 15 19:38:11 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 15 Apr 2006 21:38:11 -0400
Subject: [Twisted-Python] debian weirdness
In-Reply-To: <20060415155447.22481.1411291846.divmod.quotient.13838@ohm>
Message-ID: <20060416013811.22481.298816438.divmod.quotient.13959@ohm>



On Sat, 15 Apr 2006 11:54:47 -0400, Jean-Paul Calderone <exarkun at divmod.com> wrote:
>On Sat, 15 Apr 2006 11:31:03 -0400, Christopher Armstrong 
><radix at twistedmatrix.com> wrote:
>>On 4/15/06, Phil Christensen <phil at bubblehouse.org> wrote:

>>>      ???
>>>      ^

>>It _is_ in the original source in SVN, and that file appears to be unused.
>>It was committed by exarkun in revision 16374 with the commit message
>>"mumble". I guess it should be removed, unless it *is* serving some
>>purpose...

>Actually, someone should finish it, since there is otherwise no test 
>coverage of halfclose stdio.

It doesn't look like any useful code lives in that file, though - wouldn't it be a better idea to remove it and file a ticket?



From glyph at divmod.com  Sat Apr 15 19:41:06 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 15 Apr 2006 21:41:06 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604151222.37968.mike@mkp.ca>
Message-ID: <20060416014106.22481.1124272888.divmod.quotient.13960@ohm>


On Sat, 15 Apr 2006 12:22:37 -0400, Mike Pelletier <mike at mkp.ca> wrote:

>The moral seems to
>be that just because something is provided by Twisted does not mean it's a
>best practice.

Hmm.  This is unfortunate, but since it's unlikely to change soon (many external projects ended up picking up and using bits of Twisted that we ultimately decided are bad ideas) we should probably start documenting "accepted best practices" somewhere.

I suggest a wiki page, linked from the front page, since the idea of "best practice" is an ongoing discussion with some disagreement and some consensus -- probably more appropriate for the wiki format than anything else we are currently using wiki for.



From exarkun at twistedmatrix.com  Sat Apr 15 23:05:10 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 16 Apr 2006 05:05:10 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1145163910.3.1404309431@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-09 through 2006-04-16
Bugs opened: 18    Bugs closed: 9  Total open bugs: 589 (+9)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +5  |Highest:  -1          |Conch:               +1  
|Enhancement:  +5  |Normal:  +10          |Core:                +1  
|Task:         -1  |Low:      +0          |Mail:                +1  
                                          |Pydoctor:            +6  
                                          |Release Management:  +1  
                                          |Trial:               +2  
                                          |Web2:                -1  
                                          |Website:             -1  
                                          |Words:               -1  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1628] TwistedEmacs should be in emacs/ in Twisted (opened by jml) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1628

[#1634] Add ralphm to the matrix (opened by ralphm)
    defect          release management http://twistedmatrix.com/trac/ticket/1634

[#1637] [PATCH] twisted.mail examples use deprecated imports (opened by jerub)
    defect          mail       http://twistedmatrix.com/trac/ticket/1637

                    ===== Normal =====
[#1629] Unjellyable.unjellyFor does not return self (opened by ml.flex)
    defect          core       http://twistedmatrix.com/trac/ticket/1629

[#1630] trial test hangs if using the twisted enterprise connection pool (opened by harshaw)
    defect          trial      http://twistedmatrix.com/trac/ticket/1630

[#1631] Make tables showing listings of members of packages, classes, etc, sortable (opened by moof)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1631

[#1632] "browse Twisted conch tickets" link wrong (opened by slamb) (CLOSED, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/1632

[#1633] Undocumented dependency on "Crypto" (opened by slamb)
    defect          conch      http://twistedmatrix.com/trac/ticket/1633

[#1635] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1635

[#1636] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1636

[#1638] provide a way for test collector to find custom test suites (opened by acapnotic)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1638

[#1639] Full package and class hierarchy pages. (opened by jknight)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1639

[#1640] Child process environment cannot be fully overridden on Windows (opened by bwh)
    defect          core       http://twistedmatrix.com/trac/ticket/1640

[#1641] sort subclasses in pydoctor's class hierarchy pages (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1641

[#1642] pydoctor's nevowhtml needs tests (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1642

[#1643] package listings in pydoctor should be alpha-sorted (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1643

[#1645] force the rest of win32-select tests to pass (opened by glyph)
    defect          core       http://twistedmatrix.com/trac/ticket/1645

                    ===== Low =====
[#1644] pydoctor's nevowhtml is probably easy to speed up (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1644



Closed Bugs
______________________
                    ===== Highest =====
[#1560] Death to util.wait() (opened by jml, closed by jml, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1560

[#1628] TwistedEmacs should be in emacs/ in Twisted (opened by jml, closed by jml, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1628

[#1612] Words (jabber code) still uses deprecated components API (opened by itamarst, closed by ralphm, fixed)
    defect          words      http://twistedmatrix.com/trac/ticket/1612

[#1615] stdio tests should be run for all reactors (opened by exarkun, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1615

                    ===== Normal =====
[#1632] "browse Twisted conch tickets" link wrong (opened by slamb, closed by exarkun, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/1632

[#1635] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm, closed by ralphm, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1635

[#1596] Leftover use of childNotFound() in t.w2.twcgi.CGIDirectory (opened by grimmtooth, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1596

[#1320] Show current version of projects in sidebar, projects page (opened by itamarst, closed by exarkun, wontfix)
    enhancement     website    http://twistedmatrix.com/trac/ticket/1320

                    ===== Low =====
[#1487] Make LoopingCall deal with deferred returning callables (opened by ralphm, closed by ralphm, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1487





From glyph at divmod.com  Sun Apr 16 03:19:13 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 16 Apr 2006 05:19:13 -0400
Subject: [Twisted-Python] Weekly Bug Summary
In-Reply-To: 1145163910.3.1404309431@twistedmatrix.com
Message-ID: <20060416091913.22481.2124644748.divmod.quotient.14064@ohm>

On Sun, 16 Apr 2006 05:05:10 -0000, exarkun at twistedmatrix.com wrote:

>                                          |Pydoctor:            +6

Does pydoctor not have its own bugtracker?



From glyph at divmod.com  Sun Apr 16 03:26:00 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 16 Apr 2006 05:26:00 -0400
Subject: [Twisted-Python] win32 now an officially supported platform
In-Reply-To: 0
Message-ID: <20060416092600.22481.620597867.divmod.quotient.14066@ohm>

As of r16628, 'trial twisted' on a stock win32 twisted installation will actually succeed and give you a PASSED at the end of it.

I went to a lot of trouble to get things into this state, so I would appreciate it if everyone could keep it this way.

More accurately: I will personally revert any changes that cause real failures on win32.  I say "real" failures because (as the buildbot history immediately following this commit amply shows) the win32 buildbot itself seems kind of flaky; some of this may have to do with the slave itself running a released version of Twisted, I'm not sure.  Any other buildbot enforcers / reviewers should be aware that it fails intermittently and give it a few chances to build to make sure the failure is legitimate, especially if the failure is a timeout or a buildbot disconnect.

Finally, I'd like to thank everyone who provided me with help, reviews, commentary, and test fixes to get to this state, especially jerub, exarkun, foom, and jml.

Now, let's get a new release out so we can upgrade that buildbot :).



From ost12666 at gmail.com  Sun Apr 16 04:58:30 2006
From: ost12666 at gmail.com (Ofer Shem Tov)
Date: Sun, 16 Apr 2006 12:58:30 +0200
Subject: [Twisted-Python] Status of twisted.web2?
Message-ID: <e89aa560604160358h469022fbj5cb4b7934807f37d@mail.gmail.com>

Hello,

I need to implement a web server with authentication and SSL (so I
guess basic authentication is good enough) and to be able to upload
big files to the server.

Is web2 ready for that (I assume twisted.web is not good for that), if
not is there a new version coming soon (release or CVS head) or can I
add this stuff my self?

thanks



From exarkun at divmod.com  Sun Apr 16 08:56:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 16 Apr 2006 10:56:32 -0400
Subject: [Twisted-Python] Status of twisted.web2?
In-Reply-To: <e89aa560604160358h469022fbj5cb4b7934807f37d@mail.gmail.com>
Message-ID: <20060416145632.22481.1012738303.divmod.quotient.14142@ohm>

On Sun, 16 Apr 2006 12:58:30 +0200, Ofer Shem Tov <ost12666 at gmail.com> wrote:
>Hello,
>
>I need to implement a web server with authentication and SSL (so I
>guess basic authentication is good enough) and to be able to upload
>big files to the server.
>
>Is web2 ready for that (I assume twisted.web is not good for that), if

Why do you assume that?

Followups to twisted-web at twistedmatrix.com, please.

>not is there a new version coming soon (release or CVS head) or can I
>add this stuff my self?
>
>thanks
>

Jean-Paul



From mwh at python.net  Mon Apr 17 02:20:58 2006
From: mwh at python.net (Michael Hudson)
Date: Mon, 17 Apr 2006 09:20:58 +0100
Subject: [Twisted-Python] Re: Weekly Bug Summary
References: <20060416091913.22481.2124644748.divmod.quotient.14064@ohm>
Message-ID: <2mvet8lij9.fsf@starship.python.net>

glyph at divmod.com writes:

> On Sun, 16 Apr 2006 05:05:10 -0000, exarkun at twistedmatrix.com wrote:
>
>>                                          |Pydoctor:            +6
>
> Does pydoctor not have its own bugtracker?

No.  As its only current use-case is documenting twisted, I've been
asking people to file tickets in tm.com's trac and after a few piled
up in the website component, exarkun added a pydoctor component.

Does this bother you somehow?

Cheers,
mwh

-- 
  Premature optimization is the root of all evil.
       -- Donald E. Knuth, Structured Programming with goto Statements




From glyph at divmod.com  Mon Apr 17 07:59:40 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 09:59:40 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <2mvet8lij9.fsf@starship.python.net>
Message-ID: <20060417135940.22481.665001409.divmod.quotient.14447@ohm>



On Mon, 17 Apr 2006 09:20:58 +0100, Michael Hudson <mwh at python.net> wrote:
>glyph at divmod.com writes:
>> Does pydoctor not have its own bugtracker?
>
>No.  As its only current use-case is documenting twisted, I've been
>asking people to file tickets in tm.com's trac and after a few piled
>up in the website component, exarkun added a pydoctor component.

That makes sense.

>Does this bother you somehow?

Nope.  Just seems like yet another indication that it should really be lore --api ;-)  Or rather, lore, like trial, should be able to take a file (HTML or Python) or module name.



From mwh at python.net  Mon Apr 17 08:30:22 2006
From: mwh at python.net (Michael Hudson)
Date: Mon, 17 Apr 2006 15:30:22 +0100
Subject: [Twisted-Python] Re: Weekly Bug Summary
References: <2mvet8lij9.fsf@starship.python.net>
	<20060417135940.22481.665001409.divmod.quotient.14447@ohm>
Message-ID: <2m8xq4l1fl.fsf@starship.python.net>

glyph at divmod.com writes:

> On Mon, 17 Apr 2006 09:20:58 +0100, Michael Hudson <mwh at python.net> wrote:
>>glyph at divmod.com writes:
>>> Does pydoctor not have its own bugtracker?
>>
>>No.  As its only current use-case is documenting twisted, I've been
>>asking people to file tickets in tm.com's trac and after a few piled
>>up in the website component, exarkun added a pydoctor component.
>
> That makes sense.

Good.

>>Does this bother you somehow?
>
> Nope.  Just seems like yet another indication that it should really
> be lore --api ;-) Or rather, lore, like trial, should be able to
> take a file (HTML or Python) or module name.

It doesn't and can't really work like that though, pydoctor really
needs to work on a whole system/package at a time.

Cheers,
mwh

-- 
  I think my standards have lowered enough that now I think ``good
  design'' is when the page doesn't irritate the living fuck out of 
  me.                        -- http://www.jwz.org/gruntle/design.html




From matt.feifarek+twisted at gmail.com  Mon Apr 17 10:34:56 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Mon, 17 Apr 2006 12:34:56 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604151222.37968.mike@mkp.ca>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
Message-ID: <6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>

On 4/15/06, Mike Pelletier <mike at mkp.ca> wrote:
>
> There has also been debate about whether or not mktap plugins are even a
> good
> idea at all for new applications.  At any rate, I don't think it receives
> the
> same attention from the core developers that it once did.  The moral seems
> to
> be that just because something is provided by Twisted does not mean it's a
> best practice.


Thanks for the reply.

So, if the docs tell us that this way is the way to use twisted, and they're
wrong, where do we go to learn how to use twisted?

The docs are quite clear about using application objects and making your
code into a twisted 'plugin' rather than simply poking at the reactor (as in
some of the quick-n-dirty tutorials).

I can certainly write my own persistence code, but I'm a little worried that
more of the "best practices" presented by the docs are wrong. Should I still
use twistd? Should I use the application object? Etc.

Shorter (and somewhat snippier): how do we use twisted in our projects, if
the docs are wrong?

I know that you personally aren't responsible to answer this question; I'm
hoping some others might pipe in and point me to some other docs or other
tutorials.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060417/7e65f674/attachment.html>

From mike at mkp.ca  Mon Apr 17 10:53:29 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Mon, 17 Apr 2006 12:53:29 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
Message-ID: <200604171253.30332.mike@mkp.ca>

On Monday 17 April 2006 12:34, Matt Feifarek wrote:
> The docs are quite clear about using application objects and making your
> code into a twisted 'plugin' rather than simply poking at the reactor (as
> in some of the quick-n-dirty tutorials).

Looks like someone's slightly ahead of or behind you.  The mktap howto at:

  http://twistedmatrix.com/projects/core/documentation/howto/mktap.html

now reads:

  This document does not describe current Twisted best practice. The progress
  of this document is currently being tracked in issue 1139.

The docs also suggest:

  The majority of users will use the .tac Python configuration files without
  needing to use the mktap serialization.

This is certainly my preferred method, and I think that of most developers.  I 
believe mktap was merely an attempt to expose the same functionality with 
higher-level tools.  But take it with a grain of salt; I'm far, far from the 
inner circle.  I'm just regurgitating lore I've picked up from this list to 
help conserve the attention of the wizards.

> So, if the docs tell us that this way is the way to use twisted, and
> they're wrong, where do we go to learn how to use twisted?

Never hurts to ask the list, just as you've done.  I think it's likely your 
questions have already resulted in attempts to improve the situation.

Mike.



From matt.feifarek+twisted at gmail.com  Mon Apr 17 11:01:59 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Mon, 17 Apr 2006 13:01:59 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604171253.30332.mike@mkp.ca>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
	<200604171253.30332.mike@mkp.ca>
Message-ID: <6fb6dbfe0604171001o22326bd9x4fef1e3be3a44c16@mail.gmail.com>

On 4/17/06, Mike Pelletier <mike at mkp.ca> wrote:
>
> Looks like someone's slightly ahead of or behind you.  The mktap howto at:
>
>   http://twistedmatrix.com/projects/core/documentation/howto/mktap.html
>
> now reads:
>
>   This document does not describe current Twisted best practice. The
> progress
>   of this document is currently being tracked in issue 1139.
>
> The docs also suggest:
>
>   The majority of users will use the .tac Python configuration files
> without
>   needing to use the mktap serialization.


Thanks very much.

I had seen that blue-box warning, but stopped reading when I saw it.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060417/a2815e00/attachment.html>

From radix at twistedmatrix.com  Mon Apr 17 11:13:50 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon, 17 Apr 2006 13:13:50 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
Message-ID: <60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>

On 4/17/06, Matt Feifarek <matt.feifarek+twisted at gmail.com> wrote:
>
>
>
> On 4/15/06, Mike Pelletier <mike at mkp.ca> wrote:
> >
> > There has also been debate about whether or not mktap plugins are even a
> > good
> > idea at all for new applications.  At any rate, I don't think it
> > receives the
> > same attention from the core developers that it once did.  The moral
> > seems to
> > be that just because something is provided by Twisted does not mean it's
> > a
> > best practice.
>
>
> Thanks for the reply.
>
> So, if the docs tell us that this way is the way to use twisted, and
> they're wrong, where do we go to learn how to use twisted?
>
> The docs are quite clear about using application objects and making your
> code into a twisted 'plugin' rather than simply poking at the reactor (as in
> some of the quick-n-dirty tutorials).
>
> I can certainly write my own persistence code, but I'm a little worried
> that more of the "best practices" presented by the docs are wrong. Should I
> still use twistd? Should I use the application object? Etc.
>
> Shorter (and somewhat snippier): how do we use twisted in our projects, if
> the docs are wrong?
>
> I know that you personally aren't responsible to answer this question; I'm
> hoping some others might pipe in and point me to some other docs or other
> tutorials.
>



Please point us at the docs that are wrong (hopefully in the bug tracker),
and give them the "documentation" keyword.




--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060417/6242d36a/attachment.html>

From matt.feifarek+twisted at gmail.com  Mon Apr 17 11:56:59 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Mon, 17 Apr 2006 13:56:59 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<200604151222.37968.mike@mkp.ca>
	<6fb6dbfe0604170934y5893504bha37958b2b0705307@mail.gmail.com>
	<60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>
Message-ID: <6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>

On 4/17/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>
>
> Please point us at the docs that are wrong (hopefully in the bug tracker),
> and give them the "documentation" keyword.
>

According to that page:
http://twistedmatrix.com/projects/core/documentation/howto/mktap.html

It's already in the tracker (1139). When I click through, I don't end up
there, but those links have never worked for me. I always get kicked back to
the menu.

It's also hard for us users of the libraries to know how to mark bugs for
things like "this isn't the right way to use twisted" if we don't know what
the right way is.

I like Mike's suggestion, though; to stick with .tac and ditch the
persistence for now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060417/7e0e3d09/attachment.html>

From mike at mkp.ca  Mon Apr 17 12:45:31 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Mon, 17 Apr 2006 14:45:31 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>
	<60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>
	<6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>
Message-ID: <200604171445.31580.mike@mkp.ca>

On Monday 17 April 2006 13:56, Matt Feifarek wrote:
> On 4/17/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
> > Please point us at the docs that are wrong (hopefully in the bug
> > tracker), and give them the "documentation" keyword.
>
> According to that page:
> http://twistedmatrix.com/projects/core/documentation/howto/mktap.html
>
> It's already in the tracker (1139). When I click through, I don't end up
> there, but those links have never worked for me. I always get kicked back
> to the menu.

There is a typo in the URL, it's actually:

  http://twistedmatrix.com/trac/ticket/1139

(Typo has been noted in the ticket.)

Mike.



From glyph at divmod.com  Mon Apr 17 17:40:06 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 19:40:06 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <2m8xq4l1fl.fsf@starship.python.net>
Message-ID: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>



On Mon, 17 Apr 2006 15:30:22 +0100, Michael Hudson <mwh at python.net> wrote:
>glyph at divmod.com writes:
>>>Does this bother you somehow?
>>
>> Nope.  Just seems like yet another indication that it should really
>> be lore --api ;-) Or rather, lore, like trial, should be able to
>> take a file (HTML or Python) or module name.
>
>It doesn't and can't really work like that though, pydoctor really
>needs to work on a whole system/package at a time.

Absolutely - you are suggesting that the parity is even greater than I am.  'trial twisted' ~= 'lore twisted'.  Or perhaps 'lore zope.interface twisted <something that means the stdlib too>'

One really nice thing that lore could do is look for API references in "howto" documentation (man, that stuff needs a better name) and generate the API documentation concurrently so that it can print warnings if such APIs don't exist.  Of course, by no means impossible if they were separate projects.  Pydoctor generates actually parseable output, as opposed to the crap soup of HTML that comes out of epydoc.

Still, it would be super nice if there could be a single, integrated step for building the whole book in HTML and PDF form, then packaging the API docs into an indexed, annotated appendix, included within the LaTeX document, for example.  That sort of thing seems like it'd be hard to pull off without the code being closely related, however, I guess lore could always just import pydoctor (assuming no pydoctor=>twisted dependency).



From dreid at dreid.org  Mon Apr 17 19:01:04 2006
From: dreid at dreid.org (David Reid)
Date: Mon, 17 Apr 2006 18:01:04 -0700
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604171445.31580.mike@mkp.ca>
References: <6fb6dbfe0604141556w105845d5w4f77782847cd0663@mail.gmail.com>	<60ed19d40604171013l51b0fbf4yde41166d88628d9c@mail.gmail.com>	<6fb6dbfe0604171056k40268240v75e30d257a2f3094@mail.gmail.com>
	<200604171445.31580.mike@mkp.ca>
Message-ID: <44443A50.3080604@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mike Pelletier wrote:
> On Monday 17 April 2006 13:56, Matt Feifarek wrote:
>> On 4/17/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>>> Please point us at the docs that are wrong (hopefully in the bug
>>> tracker), and give them the "documentation" keyword.
>> According to that page:
>> http://twistedmatrix.com/projects/core/documentation/howto/mktap.html
>>
>> It's already in the tracker (1139). When I click through, I don't end up
>> there, but those links have never worked for me. I always get kicked back
>> to the menu.
> 
> There is a typo in the URL, it's actually:
> 
>   http://twistedmatrix.com/trac/ticket/1139
> 
> (Typo has been noted in the ticket.)

It's not actually a typo, it's a broken redirect,
http://twistedmatrix.com/bugs/ redirects unconditionally to
http://twistedmatrix.com/trac/report which breaks links to bugs all over
the place, including mailing list archives.  There is a patch attached
to ticket #1517 which fixes this, but I don't know what the status of
that patch is in regards to our website maintainer.

- -David
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (Darwin)

iD8DBQFERDpQrsrO6aeULcgRAsv7AJ93P+GboziEJLfoFOaLVGD4cgTxtwCeJg5w
hOVL/jy0MJUH/xvuQZoO18o=
=T7TP
-----END PGP SIGNATURE-----



From glyph at divmod.com  Mon Apr 17 20:20:23 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 22:20:23 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <44443A50.3080604@dreid.org>
Message-ID: <20060418022023.22481.1262876328.divmod.quotient.14625@ohm>



On Mon, 17 Apr 2006 18:01:04 -0700, David Reid <dreid at dreid.org> wrote:

>It's not actually a typo, it's a broken redirect,
>http://twistedmatrix.com/bugs/ redirects unconditionally to
>http://twistedmatrix.com/trac/report which breaks links to bugs all over
>the place, including mailing list archives.  There is a patch attached
>to ticket #1517 which fixes this, but I don't know what the status of
>that patch is in regards to our website maintainer.

A private message from our website maintainer indicates that certain exigencies have left our website, once again, unmaintained.  :-(

Someone who can commit some time, please volunteer?



From glyph at divmod.com  Mon Apr 17 20:23:27 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 22:23:27 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <200604171253.30332.mike@mkp.ca>
Message-ID: <20060418022327.22481.932136256.divmod.quotient.14627@ohm>

On Mon, 17 Apr 2006 12:53:29 -0400, Mike Pelletier <mike at mkp.ca> wrote:
>On Monday 17 April 2006 12:34, Matt Feifarek wrote:

>> So, if the docs tell us that this way is the way to use twisted, and
>> they're wrong, where do we go to learn how to use twisted?
>
>Never hurts to ask the list, just as you've done.  I think it's likely your
>questions have already resulted in attempts to improve the situation.

Yep.  Really good question/answer threads are often useful enough to be turned into documentation themselves.  Several of the better Twisted documents, if I recall correctly, were created in just this way.  It always seems easier to reply to an email than to sit down and design a document from scratch.



From foom at fuhm.net  Mon Apr 17 20:32:42 2006
From: foom at fuhm.net (James Y Knight)
Date: Mon, 17 Apr 2006 22:32:42 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
References: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
Message-ID: <215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>


On Apr 17, 2006, at 7:40 PM, glyph at divmod.com wrote:

>
>
> On Mon, 17 Apr 2006 15:30:22 +0100, Michael Hudson <mwh at python.net>  
> wrote:
>> glyph at divmod.com writes:
>>>> Does this bother you somehow?
>>>
>>> Nope.  Just seems like yet another indication that it should really
>>> be lore --api ;-) Or rather, lore, like trial, should be able to
>>> take a file (HTML or Python) or module name.
>>
>> It doesn't and can't really work like that though, pydoctor really
>> needs to work on a whole system/package at a time.
>
> Absolutely - you are suggesting that the parity is even greater  
> than I am.  'trial twisted' ~= 'lore twisted'.  Or perhaps 'lore  
> zope.interface twisted <something that means the stdlib too>'
>
> One really nice thing that lore could do is look for API references  
> in "howto" documentation (man, that stuff needs a better name) and  
> generate the API documentation concurrently so that it can print  
> warnings if such APIs don't exist.  Of course, by no means  
> impossible if they were separate projects.  Pydoctor generates  
> actually parseable output, as opposed to the crap soup of HTML that  
> comes out of epydoc.
>
> Still, it would be super nice if there could be a single,  
> integrated step for building the whole book in HTML and PDF form,  
> then packaging the API docs into an indexed, annotated appendix,  
> included within the LaTeX document, for example.  That sort of  
> thing seems like it'd be hard to pull off without the code being  
> closely related, however, I guess lore could always just import  
> pydoctor (assuming no pydoctor=>twisted dependency).

It seems to me that pydoctor should remain separate -- I suspect it  
would be more useful for other projects if it was not integrated with  
lore.

James



From mcmillen at cs.cmu.edu  Mon Apr 17 20:54:23 2006
From: mcmillen at cs.cmu.edu (Colin McMillen)
Date: Mon, 17 Apr 2006 22:54:23 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <20060418022327.22481.932136256.divmod.quotient.14627@ohm>
References: <200604171253.30332.mike@mkp.ca>
	<20060418022327.22481.932136256.divmod.quotient.14627@ohm>
Message-ID: <20060418025423.GJ14168@cs.cmu.edu>

On Mon, Apr 17, 2006 at 10:23:27PM -0400, glyph at divmod.com wrote:
> On Mon, 17 Apr 2006 12:53:29 -0400, Mike Pelletier <mike at mkp.ca> wrote:
> >On Monday 17 April 2006 12:34, Matt Feifarek wrote:
> 
> >>So, if the docs tell us that this way is the way to use twisted, and
> >>they're wrong, where do we go to learn how to use twisted?
> >
> >Never hurts to ask the list, just as you've done.  I think it's likely your
> >questions have already resulted in attempts to improve the situation.
> 
> Yep.  Really good question/answer threads are often useful enough to be 
> turned into documentation themselves.  Several of the better Twisted 
> documents, if I recall correctly, were created in just this way.  It always 
> seems easier to reply to an email than to sit down and design a document 
> from scratch.

At the very least, this sort of thing seems to be the sort of thing
that should get a detailed answer added to the FAQ.

- Colin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: Digital signature
URL: </pipermail/twisted-python/attachments/20060417/882da47d/attachment.sig>

From glyph at divmod.com  Mon Apr 17 21:17:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 23:17:50 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: 0
Message-ID: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>

On Mon, 17 Apr 2006 12:34:56 -0400, Matt Feifarek <matt.feifarek+twisted at gmail.com> wrote:

>So, if the docs tell us that this way is the way to use twisted, and they're
>wrong, where do we go to learn how to use twisted?

Apparently you've come to the right place. :-)

>The docs are quite clear about using application objects and making your
>code into a twisted 'plugin' rather than simply poking at the reactor (as in
>some of the quick-n-dirty tutorials).

I have to apologize for that; .tap plugins, in particular, are my fault.  Sometimes, a system will be written, documented, people will use it for a while, and it will turn out that the supposed benefits of putting up with the pain of a plugin interface or a layer of indirection are actually not worthwhile.  There is chaos for a while as everyone tries to figure out what the best way to solve the problem that the interface originally wanted to solve is.  I wish Twisted didn't have this problem, but it's hardly unique.  The difference is, we admit we have the problem, let our users know we are reconsidering our solution, and attempt to discover the correct way :-).

(For a counterexample, see the web stuff in J2EE.  The XML addicts who designed it refused to admit they were wrong or that the user community was having trouble with the mountains of configuration required, and now the "right" way to use J2EE for Web seems to be ditching it in favor of Ruby on Rails...)

Right now the appropriate thing to do is use a .tac file.  Some of what the documentation says is in fact correct: you still shouldn't poke at the reactor directly: just create the Application object (as documented in those howtos) in a .tac configuration file rather than an axiom plugin.

One of the major enhancements we need to make (this will probably be seen in a Twisted 3.0 release) is to make a publicly-supported version of twisted.scripts.twistd.ServerOptions.  If you are uncomfortable reading grotty platform-specific code and getting into spirited arguments on this mailing list about broken compatibility from release to release, that is not yet the class for you.  Eventually we will provide a nice way to make a twistd-like command-line program (and hopefully also a similar GUI-friendly equivalent) that adds additional arguments and startup logic of your choosing.  However, some projects written by Twisted core team members are already abusing the private ServerOptions interface to provide this same effect.

One such project is something that I wrote, Divmod Axiom ( http://divmod.org/trac/wiki/DivmodAxiom ).  Axiom abuses this internal interface to implement a rather nice mechanism that actually accomplishes what .tap plugins set out to do.  Axiom is an object database with native support for the Twisted programming model.  The feature I am talking about specifically here though, is a nifty command-line tool called 'axiomatic'.  Axiomatic provides a plugin architecture, like tap plugins, which perform manipulations on a database, and a "start" sub-command, which allows you to do things like this:

     % axiomatic -d mymantissa.axiom mantissa
     Enter Divmod Mantissa password for 'admin at localhost':
     Confirm Divmod Mantissa password for 'admin at localhost':
     % axiomatic -d mymantissa.axiom start -n

The first command would be roughly equivalent to a hypothetical mktap plugin:

    % mktap -a mymantissa.tap mantissa
    % twistd -nf mymantissa.tap

The difference is that Axiom is a real object database, based around SQLite, with support for managed transactions, schema evolution, persistent timed events, and more.  You can therefore put a reasonable amount of real data into it in addition to your configuration.

>I can certainly write my own persistence code, but I'm a little worried that
>more of the "best practices" presented by the docs are wrong. Should I still
>use twistd? Should I use the application object? Etc.

Yes, use twistd.  Yes, use the application object.  You *can* even write mktap plugins; they will work as described by the documentation.  They're not buggy.  (Okay, they're not *very* buggy.)  It's just that the advertised benefits are not really so great so most people don't use them any more.  The ones that come included with Twisted are handy toys.

A separate issue is that if you have large, complex configurations, storing them in pickle (or any automatic persistence mechanism) is dangerous.  A chance upgrade of any Twisted module which your configuration happens to contain instances from, or the standard library, or any other library which Twisted depends on, or any of your code... well, basically if any Python code on your computer changes at all, you could end up with a configuration that won't load.

This isn't really a Twisted-specific issue, but it is a lesson that many Twisted Matrix Labs developers have learned by way of .tap files.  There is a well-written paper on the dangers of automatic persistence here:

   http://www.erights.org/data/serial/jhu-paper/upgrade.html

If you're intrigued by Axiom after reading this, there's good news and bad news.

The good news:  Axiom can provide all the advantages that tap plugins were supposed to, along with a relatively scalable and powerful general persistence mechanism.  The dangers of upgrading are far reduced from .tap files, because (A) axiom includes very good schema migration support and automatic upgrades between released versions, (B) all attributes are explicit, so there are no "hidden surprises" when you upgrade, and (C) only Item objects in the database need to be upgraded, not every random thing you invoke in your code.

The bad news:  Axiom is heavily in development, nowhere near as stable as Twisted.  The 0.4 release is ancient, in terms of available features, and documentation is mainly being written for the main line of development.  Unfortunately there aren't necessarily upgrades beween every random revision of SVN trunk.  In practice there have been relatively few breakages.

However, it sounds like your needs are relatively lightweight and that you could happily use the 0.4 release of Axiom to deploy a real application.  When we do get around to producing a new release, you shouldn't have to worry too much about backwards compatibility.



From glyph at divmod.com  Mon Apr 17 21:25:30 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 23:25:30 -0400
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>
Message-ID: <20060418032530.22481.650058880.divmod.quotient.14640@ohm>


On Mon, 17 Apr 2006 22:32:42 -0400, James Y Knight <foom at fuhm.net> wrote:

>It seems to me that pydoctor should remain separate -- I suspect it  would 
>be more useful for other projects if it was not integrated with  lore.

Any reason why?  Or just a general feeling of suspicion?



From glyph at divmod.com  Mon Apr 17 21:28:24 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 17 Apr 2006 23:28:24 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>
Message-ID: <20060418032824.22481.2083421577.divmod.quotient.14642@ohm>



On Mon, 17 Apr 2006 23:17:50 -0400, glyph at divmod.com wrote:

>Right now the appropriate thing to do is use a .tac file.  Some of what the 
>documentation says is in fact correct: you still shouldn't poke at the 
>reactor directly: just create the Application object (as documented in those 
>howtos) in a .tac configuration file rather than an axiom plugin.
                                                  ^
                                                  a mktap plugin

ugh.  Got a little ahead of myself there.



From mwh at python.net  Tue Apr 18 02:00:26 2006
From: mwh at python.net (Michael Hudson)
Date: Tue, 18 Apr 2006 09:00:26 +0100
Subject: [Twisted-Python] Re: Weekly Bug Summary
References: <2m8xq4l1fl.fsf@starship.python.net>
	<20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
Message-ID: <2modyzjoth.fsf@starship.python.net>

glyph at divmod.com writes:

> On Mon, 17 Apr 2006 15:30:22 +0100, Michael Hudson <mwh at python.net> wrote:
>>glyph at divmod.com writes:
>>>>Does this bother you somehow?
>>>
>>> Nope.  Just seems like yet another indication that it should really
>>> be lore --api ;-) Or rather, lore, like trial, should be able to
>>> take a file (HTML or Python) or module name.
>>
>>It doesn't and can't really work like that though, pydoctor really
>>needs to work on a whole system/package at a time.
>
> Absolutely - you are suggesting that the parity is even greater than
> I am.  'trial twisted' ~= 'lore twisted'.  Or perhaps 'lore
> zope.interface twisted <something that means the stdlib too>'

Ah, right.

> One really nice thing that lore could do is look for API references
> in "howto" documentation (man, that stuff needs a better name) and
> generate the API documentation concurrently so that it can print
> warnings if such APIs don't exist.  Of course, by no means
> impossible if they were separate projects.  Pydoctor generates
> actually parseable output, as opposed to the crap soup of HTML that
> comes out of epydoc.

pydoctor also optionally generates a system pickle with all the
information in, so you shouldn't really even need to parse anything...

> Still, it would be super nice if there could be a single, integrated
> step for building the whole book in HTML and PDF form, then
> packaging the API docs into an indexed, annotated appendix, included
> within the LaTeX document, for example. 

I would also like a pony :)

> That sort of thing seems like it'd be hard to pull off without the
> code being closely related, however, I guess lore could always just
> import pydoctor (assuming no pydoctor=>twisted dependency).

pydoctor depends on nevow (practically speaking, anyway; there's a
writer that just builds up HTML by string interpolation but all the
funky new stuff is just in the nevow writer).  It is also vaguely
designed to be used as a library, so I think lore could import it.

Cheers,
mwh

-- 
  Also, remember to put the galaxy back when you've finished, or an
  angry mob of astronomers will come round and kneecap you with a
  small telescope for littering. 
       -- Simon Tatham, ucam.chat, from Owen Dunn's review of the year




From nico at tekNico.net  Tue Apr 18 02:15:12 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Tue, 18 Apr 2006 10:15:12 +0200
Subject: [Twisted-Python] Re: Weekly Bug Summary
In-Reply-To: <215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>
References: <20060417234006.22481.1600030157.divmod.quotient.14589@ohm>
	<215914F8-1122-4EAA-8D06-CF66E55E491C@fuhm.net>
Message-ID: <e2276i$9o0$1@sea.gmane.org>

> It seems to me that pydoctor should remain separate -- I suspect it 
> would be more useful for other projects if it was not integrated with 
> lore.

I concur. I'm currently using pydoctor (thanks Michael!), and have no need
for lore.

-- 
Nicola Larosa - http://www.tekNico.net/

Hateful, blasphemous, prejudiced, vulgar, rude, or ignorant remarks are
the music of a free society, and the relentless patter of idiots is how
we know we're in one. When all the words in our public conversation are
fair, good, and true, it's time to make a run for the fence.
 -- Daniel Gilbert, December 2005




From simon at hedberg.net  Tue Apr 18 07:22:26 2006
From: simon at hedberg.net (Simon Hedberg)
Date: Tue, 18 Apr 2006 15:22:26 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
In-Reply-To: <4436FBFA.2080500@argo.es>
Message-ID: <000301c662eb$22b54720$38aa20d4@hp>

Jesus Cea wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Twisted is very extensive in protocol support, managing smtp, pop3
> and imap4, for example. I was wondering if there is any LMTP server
> project out there. It should be fairly simple, since LMTP is very
> very similar to usual SMTP. I need to use LMTP for a local project,
> and I was wondering if tiwsted could be used to fill this gap.    
> 
> - --
> Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
> jcea at argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/ 
> _/_/ 
> jabber / xmpp:jcea at jabber.org         _/_/    _/_/          _/_/_/_/_/
>                                _/_/  _/_/    _/_/          _/_/  _/_/
> "Things are not so easy"      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
> "My name is Dump, Core Dump"   _/_/_/        _/_/_/      _/_/  _/_/
> "El amor es poner tu felicidad en la felicidad de otro" - Leibniz

Hi,
I have been looking at ways to have postfix talking to my twisted app
and today tried LMTP successfully for the first time. What I've done so
far is just subclass the ESMTP protocol and add do_LHLO which seems to
do the trick for some basic usage at least. Looking at
http://www.ietf.org/rfc/rfc2033.txt it seems like it shouldn't be to
hard to make a proper LMTP implementation. Perhaps someone more familiar
with twisted.mail could have a look.


class LMTP(smtp.ESMTP):
    def do_LHLO(self, rest):
        peer = self.transport.getPeer()
        try:
            host = peer.host
        except AttributeError:
            host = str(peer)
        self._helo = (rest, host)
        self._from = None
        self._to = []
        self.sendCode(250, '%s Hello %s, nice to meet you\n%s' %
(self.host, host,self.listExtensions()))

    def do_HELO(self,rest):
        return self.do_UNKNOWN(self,rest)
    def do_EHLO(self,rest):
        return self.do_UNKNOWN(self,rest)




From jarrod at vertigrated.com  Tue Apr 18 09:12:49 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Tue, 18 Apr 2006 11:12:49 -0400
Subject: [Twisted-Python] I saw something about someone writing a Reactor
	that used libevent ...
Message-ID: <2389d4730604180812j7cc96a1td90e1ddd7962d0cd@mail.gmail.com>

but now I can't find the information about it anywhere, I am dreaming this?
Twisted with libevent would rock, not that Twisted isn't awesome right now
:-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060418/642245f6/attachment.html>

From dougfort at dougfort.com  Tue Apr 18 09:27:24 2006
From: dougfort at dougfort.com (Doug Fort, Consulting Programmer)
Date: Tue, 18 Apr 2006 11:27:24 -0400
Subject: [Twisted-Python] deferred TCP writes
Message-ID: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>

Hi,

I have a server that just continously pushes blocks of data to clients
after they connect. I'd like to defer transport.write(), and then send
another block of data when it completes. All  the samples and
documentation I hae seen show synchronous writes. Is  there an async.
version?

--
Doug Fort, Consulting Programmer
http://www.dougfort.com



From jcea at argo.es  Tue Apr 18 09:44:13 2006
From: jcea at argo.es (Jesus Cea)
Date: Tue, 18 Apr 2006 17:44:13 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
In-Reply-To: <000301c662eb$22b54720$38aa20d4@hp>
References: <000301c662eb$22b54720$38aa20d4@hp>
Message-ID: <4445094D.5050508@argo.es>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Simon Hedberg wrote:
> I have been looking at ways to have postfix talking to my twisted app
> and today tried LMTP successfully for the first time. What I've done so
> far is just subclass the ESMTP protocol and add do_LHLO which seems to
> do the trick for some basic usage at least. Looking at
> http://www.ietf.org/rfc/rfc2033.txt it seems like it shouldn't be to
> hard to make a proper LMTP implementation. Perhaps someone more familiar
> with twisted.mail could have a look.

Your mini LMTP implementation fails if a message is sent to several
recipients, since LMTP must answer with a status code per destination.
That is the main difference with SMTP.

But good starting point :)

Hope "somebody" takes the token and complete a RFC compliant
implementation... :-p

- --
Jesus Cea Avion                         _/_/      _/_/_/        _/_/_/
jcea at argo.es http://www.argo.es/~jcea/ _/_/    _/_/  _/_/    _/_/  _/_/
jabber / xmpp:jcea at jabber.org         _/_/    _/_/          _/_/_/_/_/
                               _/_/  _/_/    _/_/          _/_/  _/_/
"Things are not so easy"      _/_/  _/_/    _/_/  _/_/    _/_/  _/_/
"My name is Dump, Core Dump"   _/_/_/        _/_/_/      _/_/  _/_/
"El amor es poner tu felicidad en la felicidad de otro" - Leibniz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iQCVAwUBREUJTZlgi5GaxT1NAQKU1wP6A6YMIvbb9qzT1ujbGo58Phq1Zc5amOxG
eV+2YaDxNcGO7AE6OvSPfx0FXyc8hPU+jyh2PvnJMuII2pTqDidaVlXGh6bdRB7b
w+yGY632rldOyVWOM8Rizl4jZha4LwfVc1Om2oUGvUxXG7iT+z6AjEY3zor2TTqC
ucFVkMD0dWE=
=KmBp
-----END PGP SIGNATURE-----



From bgranger at scu.edu  Tue Apr 18 11:44:22 2006
From: bgranger at scu.edu (Brian Granger)
Date: Tue, 18 Apr 2006 10:44:22 -0700
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
Message-ID: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>

I have run into this issue as well when trying to order different
writes and make code run _after_ a write was completed.  I ended up
calling my code using deferToThread and putting in time.sleep calls to
make sure things got ordered correctly.  Ugly hack though.

The ITransport interface docs seem to imply that returning a deferred
from a write is not supported:

I make no representations about whether calls to me will happen
immediately or require returning to a control loop, or whether they
will happen in the same or another thread. Consider methods of this
class (aside from getPeer) to be 'thrown over the wall', to happen at
some indeterminate time.

I echo the question: why doesn't write return a deferred?  Surely
there are times you want to trigger events on the completion of a
write.

Brian

Brian Granger
Santa Clara University
ellisonbg at gmail.com



From radix at twistedmatrix.com  Tue Apr 18 11:51:38 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 18 Apr 2006 13:51:38 -0400
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
	<fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
Message-ID: <60ed19d40604181051l65a93a9eg98f0a1c1b625d362@mail.gmail.com>

On 4/18/06, Brian Granger <bgranger at scu.edu> wrote:
>
> I have run into this issue as well when trying to order different
> writes and make code run _after_ a write was completed.  I ended up
> calling my code using deferToThread and putting in time.sleep calls to
> make sure things got ordered correctly.  Ugly hack though.
>
> The ITransport interface docs seem to imply that returning a deferred
> from a write is not supported:
>
> I make no representations about whether calls to me will happen
> immediately or require returning to a control loop, or whether they
> will happen in the same or another thread. Consider methods of this
> class (aside from getPeer) to be 'thrown over the wall', to happen at
> some indeterminate time.
>
> I echo the question: why doesn't write return a deferred?  Surely
> there are times you want to trigger events on the completion of a
> write.



The way you do this is to hook up a producer to the transport. Hopefully
there are some references to this in the API docs: search for "producer" and
"consumer".


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060418/ea78dbfc/attachment.html>

From itamar at itamarst.org  Tue Apr 18 12:00:53 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 18 Apr 2006 14:00:53 -0400
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
	<fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
Message-ID: <1145383253.12220.14.camel@localhost.localdomain>

On Tue, 2006-04-18 at 10:44 -0700, Brian Granger wrote:
> I have run into this issue as well when trying to order different
> writes and make code run _after_ a write was completed.  I ended up
> calling my code using deferToThread and putting in time.sleep calls to
> make sure things got ordered correctly.  Ugly hack though.

Eeeeew. Don't do that.

> I echo the question: why doesn't write return a deferred?  Surely
> there are times you want to trigger events on the completion of a
> write.

This is (more or less) what the producer API is for. Register a
IConsumer with transport.registerProducer and you will get callbacks
telling you when the transport buffer becomes empty or full.

Returning Deferred from every transport.write would make everything
rather slow... a wrapper that does this could be probably be written
using the producer/consumer API. 




From bgranger at scu.edu  Tue Apr 18 12:21:46 2006
From: bgranger at scu.edu (Brian Granger)
Date: Tue, 18 Apr 2006 11:21:46 -0700
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <1145383253.12220.14.camel@localhost.localdomain>
References: <5db086ad0604180827qd8c3ee5x3aca4433b8f92700@mail.gmail.com>
	<fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
	<1145383253.12220.14.camel@localhost.localdomain>
Message-ID: <fa8579a40604181121n7924fa35rf7548dc4e3421fc8@mail.gmail.com>

On 4/18/06, Itamar Shtull-Trauring <itamar at itamarst.org> wrote:
> On Tue, 2006-04-18 at 10:44 -0700, Brian Granger wrote:
> > I have run into this issue as well when trying to order different
> > writes and make code run _after_ a write was completed.  I ended up
> > calling my code using deferToThread and putting in time.sleep calls to
> > make sure things got ordered correctly.  Ugly hack though.
>
> Eeeeew. Don't do that.

I though my hack would get a good response :)

> > I echo the question: why doesn't write return a deferred?  Surely
> > there are times you want to trigger events on the completion of a
> > write.
>
> This is (more or less) what the producer API is for. Register a
> IConsumer with transport.registerProducer and you will get callbacks
> telling you when the transport buffer becomes empty or full.
>
> Returning Deferred from every transport.write would make everything
> rather slow... a wrapper that does this could be probably be written
> using the producer/consumer API.
>

Fantastic, I wasn't aware of this API.  I will defintely use this
approach from now on.

Thanks for the pointer.

Brian

--
Brian Granger
Santa Clara University
ellisonbg at gmail.com



From matt.feifarek+twisted at gmail.com  Tue Apr 18 12:56:51 2006
From: matt.feifarek+twisted at gmail.com (Matt Feifarek)
Date: Tue, 18 Apr 2006 14:56:51 -0400
Subject: [Twisted-Python] .tap and twistd and persistence
In-Reply-To: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>
References: <20060418031750.22481.1039328421.divmod.quotient.14637@ohm>
Message-ID: <6fb6dbfe0604181156o3b9f4e4ag2b1490114520023d@mail.gmail.com>

On 4/17/06, glyph at divmod.com <glyph at divmod.com> wrote:
>
>
> Apparently you've come to the right place. :-)


Wow, thanks for the detailed and thoughful reply.

You've answered my questions and have given me another project to look at.
I'll check out Axiom, thanks.

For the record and the future list, it turned out that the persistence
problem was related to a pretty simple subclass of dict that was not happily
unpickling... but only when the new "protocol 2" was used to pickle/unpickle
objects. That was pretty hard to track down.

But of course, more importantly, I've learned how to do it right from here.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060418/e5fd6be0/attachment.html>

From glyph at divmod.com  Tue Apr 18 14:11:19 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 18 Apr 2006 16:11:19 -0400
Subject: [Twisted-Python] deferred TCP writes
In-Reply-To: <fa8579a40604181044v4b964015scccf1d93580819fc@mail.gmail.com>
Message-ID: <20060418201119.22481.1631808967.divmod.quotient.14749@ohm>

On Tue, 18 Apr 2006 10:44:22 -0700, Brian Granger <bgranger at scu.edu> wrote:
>I echo the question: why doesn't write return a deferred?  Surely
>there are times you want to trigger events on the completion of a
>write.

Some folks have already answered with the primary reason, which is to say, efficiency.  While Twisted definitely trades performance for flexibility in a number of places where reasonable, 'write()' is one of those things that just absolutely has to be as fast as possible, because many things which are highly  performance-critical call it.  Creating Deferreds could be 100x faster and it would still be too slow for this case.

There is anothe reason, though: returning a deferred from "write()" implies to the user that when the deferred fires, the bytes have been "written", e.g. the other end has received them.  In cases where .write() blocks, most naive programmers -- and yes, I say this having once been a "naive programmer" myself -- assume that the other end has not only received the bytes, it has processed them.  This is wrong, and can (and often does) have unfortunate consequences.

It sounds like you want control over excessive in-memory buffering, which is a pretty reasonable thing to want, and the IConsumer/IProducer interfaces you have already been directed to should provide that to you quite satisfactorily.

The reality is that when a 'write' completes and returns to userland, your bytes are somewhere between your kernel, your router, your cable modem, your ISP's cable modem, your ISP's internal routers, the backbone (...) your destination's kernel, and your destination's application.  You have no idea where they are, really, and neither does Twisted.  It just hides one more distinction from you: Twisted's buffer to your OS's buffer.



From bear42 at code-bear.com  Wed Apr 19 08:36:28 2006
From: bear42 at code-bear.com (bear)
Date: Wed, 19 Apr 2006 10:36:28 -0400
Subject: [Twisted-Python] win32 now an officially supported platform
In-Reply-To: <20060416092600.22481.620597867.divmod.quotient.14066@ohm>
References: <20060416092600.22481.620597867.divmod.quotient.14066@ohm>
Message-ID: <44464AEC.6090200@code-bear.com>

I have upgraded the buildslaves to Twisted SVN Trunk (rev 16635)

glyph at divmod.com wrote:
> As of r16628, 'trial twisted' on a stock win32 twisted installation 
> will actually succeed and give you a PASSED at the end of it.
>
> I went to a lot of trouble to get things into this state, so I would 
> appreciate it if everyone could keep it this way.
>
> More accurately: I will personally revert any changes that cause real 
> failures on win32.  I say "real" failures because (as the buildbot 
> history immediately following this commit amply shows) the win32 
> buildbot itself seems kind of flaky; some of this may have to do with 
> the slave itself running a released version of Twisted, I'm not sure.  
> Any other buildbot enforcers / reviewers should be aware that it fails 
> intermittently and give it a few chances to build to make sure the 
> failure is legitimate, especially if the failure is a timeout or a 
> buildbot disconnect.
>
> Finally, I'd like to thank everyone who provided me with help, 
> reviews, commentary, and test fixes to get to this state, especially 
> jerub, exarkun, foom, and jml.
>
> Now, let's get a new release out so we can upgrade that buildbot :).
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From nitin-twisted at borwankar.com  Wed Apr 19 11:46:42 2006
From: nitin-twisted at borwankar.com (Nitin Borwankar on Twisted-Python list)
Date: Wed, 19 Apr 2006 10:46:42 -0700
Subject: [Twisted-Python] error "limits.h missing" while compiling zope
 interface in Sumo on mac os x 10.4.6 Py 2.4
Message-ID: <1145468802.19327.259443736@webmail.messagingengine.com>

Hello Twisted gurus,

Apologies if this is a FAQ - couldn't find answers in the obvious
places. ( list archives, google, ...).

I've been trying to build the TwistedSumo-2006-02-12 package -
especially the ZopeInterface package within, and am getting the
following errors
about limits.h not being found.
This is on Mac OS X 10.4.6 on a PPC powerbook G4 with gcc 4.0, I tried
swicthing to 3.3 via gcc_select and got a different error about gcc
command line switches.
An 'ls' on
/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/
indicates that indeed there's no limits.h there.
Separately downloading earlier stable ZopeInterface version and building
gave exactly the same error.

Python 2.4 is the default python installed via the MacPython 2.4 dmg.
An older Python 2.3 also exists on the system but 2.4 is ahead in the
PATH.

Any help getting past this appreciated.

Nitin Borwankar

gcc 4.0 errors
-----------------

nitin-pbook:~/dl/TwistedSumo-2006-02-12/ZopeInterface-3.1.0c1 nitin$
sudo python setup.py install
running install
running build
running build_py
running build_ext
building 'zope.interface._zope_interface_coptimizations' extension
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd
-fno-common -dynamic -DNDEBUG -g
-IDependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface
-I/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4 -c
Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.c
-o
build/temp.macosx-10.4-fat-2.4/Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
In file included from
Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.c:15:
/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/Python.h:18:20:
error: limits.h: No such file or directory
/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/Python.h:21:2:
error: #error "Something's broken.  UCHAR_MAX should be defined in
limits.h."
[...]
many more errors which I guess stem from limits.h not being found

gcc 3.3 errors
-----------------

nitin$ sudo gcc_select 3.3
Password:
Default compiler has been set to:
gcc version 3.3 20030304 (Apple Computer, Inc. build 1809)
nitin-pbook:~/dl/TwistedSumo-2006-02-12/ZopeInterface-3.1.0c1 nitin$
sudo python setup.py install
running install
running build
running build_py
running build_ext
building 'zope.interface._zope_interface_coptimizations' extension
gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
-fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd
-fno-common -dynamic -DNDEBUG -g
-IDependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface
-I/Library/Frameworks/Python.framework/Versions/2.4/include/python2.4 -c
Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.c
-o
build/temp.macosx-10.4-fat-2.4/Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
gcc: cannot specify -o with -c or -S and multiple compilations
error: command 'gcc' failed with exit status 1






-- 
  Nitin Borwankar
  nitin at borwankar.com




From grant at osafoundation.org  Wed Apr 19 12:24:00 2006
From: grant at osafoundation.org (Grant Baillie)
Date: Wed, 19 Apr 2006 11:24:00 -0700
Subject: [Twisted-Python] error "limits.h missing" while compiling zope
	interface in Sumo on mac os x 10.4.6 Py 2.4
In-Reply-To: <1145468802.19327.259443736@webmail.messagingengine.com>
References: <1145468802.19327.259443736@webmail.messagingengine.com>
Message-ID: <5F6DB613-F294-471D-A074-3C5431F734E9@osafoundation.org>


On Apr 19, 2006, at 10:46, Nitin Borwankar on Twisted-Python list wrote:

> Hello Twisted gurus,
>
> Apologies if this is a FAQ - couldn't find answers in the obvious
> places. ( list archives, google, ...).
>
> I've been trying to build the TwistedSumo-2006-02-12 package -
> especially the ZopeInterface package within, and am getting the
> following errors
> about limits.h not being found.
> This is on Mac OS X 10.4.6 on a PPC powerbook G4 with gcc 4.0, I tried
> swicthing to 3.3 via gcc_select and got a different error about gcc
> command line switches.
> An 'ls' on
> /Library/Frameworks/Python.framework/Versions/2.4/include/python2.4/
> indicates that indeed there's no limits.h there.

limits.h is a system header. From the invocation of gcc:

> ...
> building 'zope.interface._zope_interface_coptimizations' extension
> gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk
> -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd
> -fno-common -dynamic -DNDEBUG -g
> -IDependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface
> -I/Library/Frameworks/Python.framework/Versions/2.4/include/ 
> python2.4 -c
> Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/ 
> _zope_interface_coptimizations.c
> -o
> build/temp.macosx-10.4-fat-2.4/Dependencies/zope.interface- 
> ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o

... it looks as if there's something wrong with your /Developer/SDKs/ 
MacOSX10.4u.sdk, since the compiler should be picking up a correct  
limits.h from somewhere in that tree. Is that directory installed on  
your machine? What version of Xcode do you have?

--Grant

Grant Baillie
Open Source Applications Foundation
http://www.osafoundation.org






From lewicki at provider.pl  Wed Apr 19 18:59:24 2006
From: lewicki at provider.pl (Pawel Lewicki)
Date: Thu, 20 Apr 2006 02:59:24 +0200
Subject: [Twisted-Python] ReverseProxy with additional headers
Message-ID: <e26md0$35t$1@sea.gmane.org>

Hello,
I try to make a simple reverse proxy service that would add authentication
info for the Plone site.
Is it a good direction or not? I'm not sure if I modify outgoing or incoming
headers.

Pawel

----------------------
from twisted.internet import reactor
from twisted.web import proxy, server

class MyReverseProxyResource(proxy.ReverseProxyResource):

    def render(self, request):
        request.setHeader('__ac_name','username')
        request.setHeader('__ac_password','password')
        return proxy.ReverseProxyResource.render(self, request)

    def getChild(self, path, request):
        return MyReverseProxyResource(self.host, self.port,
self.path+'/'+path)


site = server.Site(MyReverseProxyResource('localhost', 80, '/'))
reactor.listenTCP(8080, site)
reactor.run()






From tlogic at gmail.com  Thu Apr 20 04:00:10 2006
From: tlogic at gmail.com (Haris Andrianakis)
Date: Thu, 20 Apr 2006 13:00:10 +0300
Subject: [Twisted-Python] Documentation download
In-Reply-To: <8f4623fb0604151544i1974836exb7819e4808d6950f@mail.gmail.com>
References: <BAY109-DAV176D7C99516D4DBF8F49048AC10@phx.gbl>
	<8f4623fb0604150729v7cf383a1n701d275f81cb44a7@mail.gmail.com>
	<BAY109-DAV3A23DBC341A86583EFC7A8AC10@phx.gbl>
	<8f4623fb0604151544i1974836exb7819e4808d6950f@mail.gmail.com>
Message-ID: <7a1008db0604200300h5f6f6d1cu15107156eed567d@mail.gmail.com>

On 4/16/06, Jeff Grimmett <grimmtooth at gmail.com> wrote:
>
> On 4/15/06, Luke Dunstan <coder_infidel at hotmail.com> wrote:
>
> >
> > OK, perhaps I was not specific enough. I have already found the links to
> > the online manual, API reference, etc., but where do I actually download
> > this HTML documentation as a single zip file or tarball?
> >
>
> Ah.  I don't think there is one as of yet. Although if you check out the
> subversion repository, most (if not all) of it appears to be in the docs
> directory.
>

For the API I think you can use "epydoc" and extract it  from the code.
Though it would be great if someone made a tarball of all that documentation
so that
we could download and view it offline.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060420/e58fbe43/attachment.html>

From johnpote at jptechnical.co.uk  Thu Apr 20 06:01:03 2006
From: johnpote at jptechnical.co.uk (John Pote)
Date: Thu, 20 Apr 2006 13:01:03 +0100
Subject: [Twisted-Python] twisted ftp client
Message-ID: <444777FF.6020301@jptechnical.co.uk>

Hi,
I'm new to twisted and interested in using the ftp client module. But 
apart from the api reference I stumbled across did not find any docs on 
the ftp module. Are there any? It would be helpful if there was a doc 
outlining the use of the module, order in which the various methods 
should be called/not called, example use of the module etc.
 
Twisted looks highly appropriate for my project but without appropriate 
documentation I'm reluctant to use it.
 
Many thanks,
 
John Pote




From moe at divmod.com  Thu Apr 20 06:28:00 2006
From: moe at divmod.com (Moe Aboulkheir)
Date: Thu, 20 Apr 2006 14:28:00 +0200
Subject: [Twisted-Python] twisted ftp client
In-Reply-To: <444777FF.6020301@jptechnical.co.uk>
Message-ID: <20060420122800.22481.1262284025.divmod.quotient.15240@ohm>

On Thu, 20 Apr 2006 13:01:03 +0100, John Pote <johnpote at jptechnical.co.uk> wrote:
>Hi,
>I'm new to twisted and interested in using the ftp client module. But apart 
>from the api reference I stumbled across did not find any docs on the ftp 
>module. Are there any? It would be helpful if there was a doc outlining the 
>use of the module, order in which the various methods should be called/not 
>called, example use of the module etc.

http://twistedmatrix.com/projects/core/documentation/examples/ftpclient.py



From simon at hedberg.net  Thu Apr 20 06:32:11 2006
From: simon at hedberg.net (Simon Hedberg)
Date: Thu, 20 Apr 2006 14:32:11 +0200
Subject: [Twisted-Python] Do Twisted support LMTP servers?
In-Reply-To: <4445094D.5050508@argo.es>
Message-ID: <000e01c66476$728e8860$38aa20d4@hp>

Jesus Cea wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Simon Hedberg wrote:
>> I have been looking at ways to have postfix talking to my twisted app
>> and today tried LMTP successfully for the first time. What I've done
>> so far is just subclass the ESMTP protocol and add do_LHLO which
>> seems to do the trick for some basic usage at least. Looking at
>> http://www.ietf.org/rfc/rfc2033.txt it seems like it shouldn't be to
>> hard to make a proper LMTP implementation. Perhaps someone more
>> familiar with twisted.mail could have a look.
> 
> Your mini LMTP implementation fails if a message is sent to several
> recipients, since LMTP must answer with a status code per
> destination. That is the main difference with SMTP.  
> 
> But good starting point :)
> 
> Hope "somebody" takes the token and complete a RFC compliant
> implementation... :-p 
> 
> - --

Ok, I had a closer look and here's a more complete version, that sends a
status code for each recipient. 
Try it out
/Simon


class LMTP(smtp.ESMTP):
    def do_LHLO(self, rest):
        peer = self.transport.getPeer()
        try:
            host = peer.host
        except AttributeError:
            host = str(peer)
        self._helo = (rest, host)
        self._from = None
        self._to = []
        self.sendCode(250, '%s Hello %s, nice to meet you\n%s' %
(self.host, host,self.listExtensions()))

    def do_HELO(self,rest):
        return self.do_UNKNOWN(self,rest)
    
    def do_EHLO(self,rest):
        return self.do_UNKNOWN(self,rest)
    
    def _messageHandled(self, resultList):
        for (success, result) in resultList:
            if success:
                self.sendCode(250, 'OK')
            else:
                log.err(result)
                code = 550
                msg = 'Could not deliver e-mail'
                smtperr = result.check(smtp.SMTPClientError)
                if smtperr:
                    code = result.value.code
                    msg  = result.value.resp
                self.sendCode(code, msg)




From itamar at itamarst.org  Thu Apr 20 07:52:44 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 20 Apr 2006 09:52:44 -0400
Subject: [Twisted-Python] Wiki was vandalized
Message-ID: <1145541164.9008.1.camel@localhost.localdomain>

See all edits by bakerson. Maybe we should disable edits by non-admin
users, or have a wiki-editor role people have to ask for.

Does trac have wiki undo?

-- 
Itamar Shtull-Trauring
http://itamarst.org





From exarkun at divmod.com  Thu Apr 20 08:12:48 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 20 Apr 2006 10:12:48 -0400
Subject: [Twisted-Python] Wiki was vandalized
In-Reply-To: <1145541164.9008.1.camel@localhost.localdomain>
Message-ID: <20060420141248.22481.2133834458.divmod.quotient.15266@ohm>

On Thu, 20 Apr 2006 09:52:44 -0400, Itamar Shtull-Trauring <itamar at itamarst.org> wrote:
>See all edits by bakerson. Maybe we should disable edits by non-admin
>users, or have a wiki-editor role people have to ask for.

For the moment, I've removed page creation and editing permissions.

>
>Does trac have wiki undo?

Kind of a little.  Extremely inconvenient interface, but I've used it to remove the edits.

Jean-Paul



From turian at gmail.com  Thu Apr 20 12:12:10 2006
From: turian at gmail.com (Joseph Turian)
Date: Thu, 20 Apr 2006 14:12:10 -0400
Subject: [Twisted-Python] callback errors?
Message-ID: <4dacb2560604201112q178ea545w16534b3c5a2a4d94@mail.gmail.com>

[Posting this to twisted and zope3 user, since I'm not sure which is
more germane]

I just install zope 3.2.0 on Gentoo.
I then manually configured a zope instance in /var/lib/zope/zope-3.2.0/
When I access the zope server at 192.168.0.100:8080, I get the
following error messages on my terminal:

What do these mean?
How can I resolve them?

------
2006-04-20T13:45:39 WARNING ZODB.FileStorage Ignoring index for
/var/lib/zope/zope-3.2.0/var/Data.fs
------
2006-04-20T13:45:39 INFO root -- HTTP:localhost:8080 Server started.
	Hostname: localhost
	Port: 8080
------
2006-04-20T13:45:39 INFO root Startup time: 4.060 sec real, 4.070 sec CPU
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
/@@login.html?nextURL=http%3A//192.168.0.100%3A8080/%40%40index.html
HTTP/1.1" 303 0 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows; U;
Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@index.html
HTTP/1.1" 200 4392 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows;
U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
/@@/zope3_tablelayout.css HTTP/1.1" 304 0
"http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3.js
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/xmltree.js
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3logo.gif
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
/@@singleBranchTree.xml HTTP/1.1" 200 289 "-" "Mozilla/5.0 (Windows;
U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
/@@/zope-app-folder-interfaces-IFolder-zmi_icon.gif HTTP/1.1" 304 0
"http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:
192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET /@@/pl.gif
HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
(Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
Firefox/1.5.0.2"
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
353, in writeResponse
    response.stream.close()
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41, in close
    self.stream.close()
exceptions.AttributeError: 'NoneType' object has no attribute 'close'
Traceback (most recent call last):
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
373, in _cbFinishRender
    d.callback(response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 229, in callback
    self._startRunCallbacks(result)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 294, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
line 307, in _runCallbacks
    self.result = callback(self.result, *args, **kw)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
363, in filterit
    return f(self, response, self._requestContext)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
43, in preconditionfilter
    newresponse = http.checkPreconditions(request, response)
  File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
198, in checkPreconditions
    raise HTTPError(NotModifiedResponse(response))
twisted.web2.http.HTTPError:




--
http://www.cs.nyu.edu/~turian/



From ldanielburr at mac.com  Thu Apr 20 11:33:13 2006
From: ldanielburr at mac.com (L. Daniel Burr)
Date: Thu, 20 Apr 2006 13:33:13 -0400
Subject: [Twisted-Python] callback errors?
In-Reply-To: <4dacb2560604201112q178ea545w16534b3c5a2a4d94@mail.gmail.com>
References: <4dacb2560604201112q178ea545w16534b3c5a2a4d94@mail.gmail.com>
Message-ID: <op.s8bkhnhi3oj628@l-daniel-burrs-powerbook-g4-17.local>

On Thu, 20 Apr 2006 14:12:10 -0400, Joseph Turian <turian at gmail.com> wrote:

> [Posting this to twisted and zope3 user, since I'm not sure which is
> more germane]
>
> I just install zope 3.2.0 on Gentoo.
> I then manually configured a zope instance in /var/lib/zope/zope-3.2.0/
> When I access the zope server at 192.168.0.100:8080, I get the
> following error messages on my terminal:
>
> What do these mean?
> How can I resolve them?
>

Those are errors, yes, and they are coming from twisted.web2.  In fact,  
though, they aren't really errors in the sense of "something is broken".   
The problem is that web2 is raising an error rather than just returning a  
"Not Modified" response code.  It is harmless, although I do find it  
annoying myself.

Not sure what the fix would be; perhaps one of the web2 devs could opine  
on that?

Hope this helps,

L. Daniel Burr

> ------
> 2006-04-20T13:45:39 WARNING ZODB.FileStorage Ignoring index for
> /var/lib/zope/zope-3.2.0/var/Data.fs
> ------
> 2006-04-20T13:45:39 INFO root -- HTTP:localhost:8080 Server started.
> 	Hostname: localhost
> 	Port: 8080
> ------
> 2006-04-20T13:45:39 INFO root Startup time: 4.060 sec real, 4.070 sec CPU
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
> /@@login.html?nextURL=http%3A//192.168.0.100%3A8080/%40%40index.html
> HTTP/1.1" 303 0 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows; U;
> Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@index.html
> HTTP/1.1" 200 4392 "http://192.168.0.100:8080/" "Mozilla/5.0 (Windows;
> U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET
> /@@/zope3_tablelayout.css HTTP/1.1" 304 0
> "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
> Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3.js
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/xmltree.js
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:46 -0400] "GET /@@/zope3logo.gif
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
> /@@singleBranchTree.xml HTTP/1.1" 200 289 "-" "Mozilla/5.0 (Windows;
> U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> 192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET
> /@@/zope-app-folder-interfaces-IFolder-zmi_icon.gif HTTP/1.1" 304 0
> "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0 (Windows; U;
> Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308 Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
> 192.168.0.69 - - [20/Apr/2006:13:45:47 -0400] "GET /@@/pl.gif
> HTTP/1.1" 304 0 "http://192.168.0.100:8080/@@index.html" "Mozilla/5.0
> (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.2) Gecko/20060308
> Firefox/1.5.0.2"
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 353, in writeResponse
>     response.stream.close()
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/log.py", line 41,  
> in close
>     self.stream.close()
> exceptions.AttributeError: 'NoneType' object has no attribute 'close'
> Traceback (most recent call last):
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 373, in _cbFinishRender
>     d.callback(response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 229, in callback
>     self._startRunCallbacks(result)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 294, in _startRunCallbacks
>     self._runCallbacks()
> --- <exception caught here> ---
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/internet/defer.py",
> line 307, in _runCallbacks
>     self.result = callback(self.result, *args, **kw)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 363, in filterit
>     return f(self, response, self._requestContext)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/server.py", line
> 43, in preconditionfilter
>     newresponse = http.checkPreconditions(request, response)
>   File "/usr/lib64/zope-3.2.0/lib/python/twisted/web2/http.py", line
> 198, in checkPreconditions
>     raise HTTPError(NotModifiedResponse(response))
> twisted.web2.http.HTTPError:
>
>
>
>
> --
> http://www.cs.nyu.edu/~turian/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



-- 
L. Daniel Burr
Chief Technology Officer
Illumaware Corporation



From akrherz at iastate.edu  Thu Apr 20 14:04:57 2006
From: akrherz at iastate.edu (Daryl Herzmann)
Date: Thu, 20 Apr 2006 15:04:57 -0500 (CDT)
Subject: [Twisted-Python] t.w jabber client question
Message-ID: <Pine.LNX.4.64.0604201501020.2597@akrherz-laptop.agron.iastate.edu>

Hi,

I am getting my feet wet with Twisted Words Jabber and have hit a wall. 
Here is my code:

from twisted.words.protocols.jabber import client, jid
from twisted.words.xish import domish
from twisted.internet import reactor

def sendMessage(factory, body):
     message = domish.Element(("jabber:client","message"))
     message['to']   = "me at myserver.com"
     message.addElement('body', content = body)
     message.addElement('subject', content ="Test")

     # What goes here?
     #factory.please_sendme_to_server(message)

myJID = jid.JID('guest at myserver.com/twisted_words')
factory = client.basicClientFactory(myJID, "password")
reactor.connectTCP('myserver.com',5222, factory)
reactor.callLater(5, sendMessage, factory, "Hi there" )
reactor.run()

So my question is how to send a message?  I can't seem to figure it out...

TIA,
   daryl



From manlio_perillo at libero.it  Fri Apr 21 09:11:30 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 21 Apr 2006 13:11:30 -0200
Subject: [Twisted-Python] pgasync project status
Message-ID: <4448F622.3040102@libero.it>

Hi.

Someone knows if this project is still active?


Thanks  Manlio Perillo



From exarkun at twistedmatrix.com  Sat Apr 22 23:05:02 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 23 Apr 2006 05:05:02 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1145768702.18.1785063894@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-16 through 2006-04-23
Bugs opened: 15    Bugs closed: 15  Total open bugs: 589 (+0)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +4  |Highest:  +0          |Conch:               -2  
|Enhancement:  -4  |High:     -2          |Core:                +2  
                   |Normal:   +4          |Mail:                +1  
                   |Low:      -2          |Pydoctor:            -1  
                                          |Release Management:  -1  
                                          |Trial:               +2  
                                          |Website:             -1  
                                          |Words:               +0  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1654] Optionally provide prefix context to serialization of domish Elements. (opened by ralphm)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1654

                    ===== High =====
[#1655] typos (group<->user) in twisted.words.service (opened by j2a)
    defect          words      http://twistedmatrix.com/trac/ticket/1655

                    ===== Normal =====
[#1646] trial should support color output on win32 as well (opened by glyph)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1646

[#1647] make t.i.i.IReactorCore.iterate.__doc__ much more unfriendly (opened by mwh)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1647

[#1648] twisted.mail.imap4.IMAP4Client.append docstring (opened by synapsis)
    defect          mail       http://twistedmatrix.com/trac/ticket/1648

[#1649] unused parameters in IRCClient.register (opened by synapsis)
    defect          words      http://twistedmatrix.com/trac/ticket/1649

[#1650] t.p.socks thinks getPeer() returns a tuple (opened by PenguinOfDoom)
    defect          core       http://twistedmatrix.com/trac/ticket/1650

[#1651] twisted.trial.unittest.TestCase.assertFailure does not properly respect --tbformat when displaying tracebacks (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1651

[#1652] xish' EventDispatcher grinds to a halt when using many different one-time observers (opened by ralphm)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1652

[#1653] Redirect documentation from private to public location (opened by jknight)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1653

[#1657] iocpreactor stfuProducer keyerror (opened by ghazel)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1657

[#1658] conch plugin stomps manhole plugin (opened by mfeif)
    defect          core       http://twistedmatrix.com/trac/ticket/1658

[#1659] manhole access hangs reactor if you try to use the help feature (opened by mfeif)
    defect          core       http://twistedmatrix.com/trac/ticket/1659

[#1660] using conch plugin, cannot load the namespace (opened by mfeif)
    defect          core       http://twistedmatrix.com/trac/ticket/1660

                    ===== Low =====
[#1656] wxdemo.py uses deprecated wxPython API (opened by mcmillen)
    defect          core       http://twistedmatrix.com/trac/ticket/1656



Closed Bugs
______________________
                    ===== Highest =====
[#1634] Add ralphm to the matrix (opened by ralphm, closed by PenguinOfDoom, fixed)
    defect          release management http://twistedmatrix.com/trac/ticket/1634

                    ===== High =====
[#932 ] Add description of xish to its project site (opened by hypatia, closed by ralphm, wontfix)
    defect          website    http://twistedmatrix.com/trac/ticket/932

[#1444] twisted.words.xish.domish doesn't deal with namespaces properly (opened by ralphm, closed by ralphm, fixed)
    defect          words      http://twistedmatrix.com/trac/ticket/1444

[#1406] Worries about copyTo/moveTo additions to filepath (opened by jknight, closed by glyph, fixed)
    defect          conch      http://twistedmatrix.com/trac/ticket/1406

                    ===== Normal =====
[#1645] force the rest of win32-select tests to pass (opened by glyph, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1645

[#1280] Win32Gtk2Reactor (opened by dialtone, closed by glyph, fixed)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/1280

[#1641] sort subclasses in pydoctor's class hierarchy pages (opened by mwh, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1641

[#1643] package listings in pydoctor should be alpha-sorted (opened by mwh, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1643

[#597 ] "zvon.org" xish.xpath unittests (opened by mg, closed by ralphm, wontfix)
    enhancement     words      http://twistedmatrix.com/trac/ticket/597

[#1623] wxreactor/wxpython does not work well together - GUI "hangs" (opened by robertckcheung, closed by itamarst, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1623

[#1620] don't break an usage.Options error message when it contains encoded big5 (opened by radix, closed by radix, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1620

[#1252] Remove obselete branches from Twisted/branches (opened by hypatia, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1252

                    ===== Low =====
[#1047] Can we add a namespace module for Jabber related modules. (opened by tofu, closed by ralphm, wontfix)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1047

[#1082] Speex in NAT environments with jabber protocol (opened by rko, closed by ralphm, invalid)
    enhancement     words      http://twistedmatrix.com/trac/ticket/1082

[#1312] yay twisted-bugs test (opened by radix, closed by ralphm, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1312





From twisted-python at 2xlp.com  Mon Apr 24 13:13:03 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 15:13:03 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
Message-ID: <BF61982A-90F1-431F-A56C-16F1EDB76D06@2xlp.com>


Hi all

I'm picking up twisted again ( haven't touched it for a while )

Luckily twisted plays great with psycopg2

I really prefer using the dictcursor in psycopg2 though:

does anyone know how to get twisted to utilize it?  i haven't been  
able to figure it out based on docs or google

a non twisted example of what i'm talking about follows
===

import psycopg2
from psycopg2 import extras

class DataBase:
	def __init__(self):
		self.profile = []
		self.db = psycopg2.connect 
( host="localhost",database="db",user="user",password="")
	def get_cursor(self):
		return self.db.cursor( cursor_factory = psycopg2.extras.DictCursor )








From fog at initd.org  Mon Apr 24 13:50:00 2006
From: fog at initd.org (Federico Di Gregorio)
Date: Mon, 24 Apr 2006 21:50:00 +0200
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <BF61982A-90F1-431F-A56C-16F1EDB76D06@2xlp.com>
References: <BF61982A-90F1-431F-A56C-16F1EDB76D06@2xlp.com>
Message-ID: <1145908200.4397.11.camel@localhost>

Il giorno lun, 24/04/2006 alle 15.13 -0400, Jonathan Vanasco ha scritto:
> Hi all
> 
> I'm picking up twisted again ( haven't touched it for a while )
> 
> Luckily twisted plays great with psycopg2
> 
> I really prefer using the dictcursor in psycopg2 though:

I use a "fake" dbapi module that wraps psycopg 2 and import it by giving
its name to the adbapi connection pool. Something like (let's suppose we
put it in a twistedpg.py module):

"""
from psycopg2 import *
from psycopg2 import _psycopg as _2psycopg
from psycopg2.extensions import connection as _2connection
from psycopg2.extras import DictCursor

del connect
def connect(*args, **kwargs):
    kwargs['connection_factory'] = connection
    return _2psycopg.connect(*args, **kwargs)

class connection(_2connection):
    def cursor(self):
        return _2connection.cursor(self, cursor_factory=DictCursor)
"""

Then:

"""
from twisted.enterprise import adbapi

mypool = adbapi.ConnectionPool("twistedpg", database="xxx", ...)
"""

Hope this helps,
federico

-- 
Federico Di Gregorio                         http://people.initd.org/fog
Debian GNU/Linux Developer                                fog at debian.org
INIT.D Developer                                           fog at initd.org
                   I came like Water, and like Wind I go. -- Omar Khayam
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa  una parte del messaggio	firmata digitalmente
URL: </pipermail/twisted-python/attachments/20060424/457251f9/attachment.sig>

From twisted-python at 2xlp.com  Mon Apr 24 14:02:32 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 16:02:32 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
Message-ID: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>

that works perfectly.  thank you.




From twisted-python at 2xlp.com  Mon Apr 24 15:53:15 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 17:53:15 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
Message-ID: <71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>


On Apr 24, 2006, at 4:02 PM, Jonathan Vanasco wrote:

> that works perfectly.  thank you.

actually, i spoke too soon.

   i thought i was getting a dict, but it appears that I'm not.

i think it works for accessing a cursor directly, but i can't seem to  
get it to work with a ConnectionPool and deferred return

i definitely see twistedpd.connection.cursor called (for the dict  
cursor), but i can't trace to where its being used.

any suggestion ?  and thanks for pointing me to this direction so far.








From fog at initd.org  Mon Apr 24 15:58:35 2006
From: fog at initd.org (Federico Di Gregorio)
Date: Mon, 24 Apr 2006 23:58:35 +0200
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
Message-ID: <1145915916.4397.13.camel@localhost>

Il giorno lun, 24/04/2006 alle 17.53 -0400, Jonathan Vanasco ha scritto:
> On Apr 24, 2006, at 4:02 PM, Jonathan Vanasco wrote:
> 
> > that works perfectly.  thank you.
> 
> actually, i spoke too soon.
> 
>    i thought i was getting a dict, but it appears that I'm not.
> 
> i think it works for accessing a cursor directly, but i can't seem to  
> get it to work with a ConnectionPool and deferred return
> 
> i definitely see twistedpd.connection.cursor called (for the dict  
> cursor), but i can't trace to where its being used.

I really don't know. It works perfectly here. Maybe show us our code and
how the pool is called.

-- 
Federico Di Gregorio                         http://people.initd.org/fog
Debian GNU/Linux Developer                                fog at debian.org
INIT.D Developer                                           fog at initd.org
 And anyone who yells "fork" deserves to get one stuck in them.
                                                          -- Dan Winship
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa  una parte del messaggio	firmata digitalmente
URL: </pipermail/twisted-python/attachments/20060424/7e8a9fec/attachment.sig>

From twisted-python at 2xlp.com  Mon Apr 24 17:30:33 2006
From: twisted-python at 2xlp.com (Jonathan Vanasco)
Date: Mon, 24 Apr 2006 19:30:33 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <1145915916.4397.13.camel@localhost>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
	<1145915916.4397.13.camel@localhost>
Message-ID: <3651D75B-0CDB-4C50-B592-EAADE4447A4B@2xlp.com>


On Apr 24, 2006, at 5:58 PM, Federico Di Gregorio wrote:
> I really don't know. It works perfectly here. Maybe show us our  
> code and
> how the pool is called.

good idea.  i'm kind of stressed out today - not thinking very  
clearly.  i'm probably dealing with a typo that i'm just not seeing.

i was using this w/twisted words, but i just copied the lines to  
replicate into the stub basic reactor .

===================
---------
twistedpg.py
---------
from psycopg2 import *
from psycopg2 import _psycopg as _2psycopg
from psycopg2.extensions import connection as _2connection
from psycopg2.extras import DictCursor

del connect
def connect(*args, **kwargs):
     kwargs['connection_factory'] = connection
     return _2psycopg.connect(*args, **kwargs)

class connection(_2connection):
     def cursor(self):
         return _2connection.cursor(self, cursor_factory=DictCursor)
===================
---------
test.py
---------
import twistedpg
from twisted.enterprise import adbapi

connection_pool = adbapi.ConnectionPool("twistedpg",  
host="localhost",database="aaaa",user="aaaa",password="" )

from twisted.internet.protocol import Factory, Protocol
from twisted.internet import reactor

class tester(Protocol):
     def connectionMade(self):
         self.transport.write(self.factory.quote+'\r\n')
         self.transport.loseConnection()

class SQLfactory(Factory):
     protocol = tester
     def __init__(self, quote=None):
         self.quote = self.db_sample__query().addCallback 
(self.print_result)
     def db_sample__query( self ):
         data = connection_pool.runQuery("SELECT * FROM useraccount",)
         return data
     def print_result( self , data ):
         print data

reactor.listenTCP(8007, SQLfactory("configurable quote"))
reactor.run()
===================




From dguest at zeeclor.mine.nu  Tue Apr 25 01:51:04 2006
From: dguest at zeeclor.mine.nu (David Guest)
Date: Tue, 25 Apr 2006 17:51:04 +1000
Subject: [Twisted-Python] Mail attachments
Message-ID: <444DD4E8.3010206@zeeclor.mine.nu>

Newby alert.

I am starting off with the "Twisted Mail Tutorial: Building an SMTP
Client from Scratch"
(http://twistedmatrix.com/users/warner/doc-latest/mail/tutorial/smtpclient/smtpclient.html#auto8).


I would like to send an attachment with my email. I presume I do this
through the sendEmail function but how to achieve is beyond me at the
moment. :-(

TIA.

David

-- 
Tab's to the left of me, Enter's to the right
Here I am, stuck in the middle with U 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3517 bytes
Desc: S/MIME Cryptographic Signature
URL: </pipermail/twisted-python/attachments/20060425/bcf70c00/attachment-0002.bin>

From Marcin.Kasperski at softax.com.pl  Tue Apr 25 07:00:26 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Tue, 25 Apr 2006 15:00:26 +0200
Subject: [Twisted-Python] Mail attachments
In-Reply-To: <444DD4E8.3010206@zeeclor.mine.nu>
References: <444DD4E8.3010206@zeeclor.mine.nu>
Message-ID: <200604251500.27082.Marcin.Kasperski@softax.com.pl>


> I would like to send an attachment with my email. I presume I
> do this through the sendEmail function but how to achieve is
> beyond me at the moment. :-(

Here is the code I use (to send PGN files, which are just text 
files). If you want to send images or binary files, you need to 
change the way pgn_part is constructed.

from email import Encoders
from email.Message import Message
from email.MIMEBase import MIMEBase
from email.MIMEMultipart import MIMEMultipart
#from email.MIMEImage import MIMEImage
from email.MIMEText import MIMEText

class EmailSender:
    def __init__(self, from_addr, smtp_host, 
                 smtp_user = None, smtp_password = None):
        self.from_addr = from_addr
        self.smtp_host = smtp_host
        self.smtp_user = smtp_user
        self.smtp_password = smtp_password
    def sendPGN(self, to_addr_list, subject, pgn,
                intro_text = None, 
                preamble = 'Some preamble', 
                epilogue = 'Some epilogue',
                attachment_name = 'attachmentname'):
        msg = MIMEMultipart()
        msg['Subject'] = subject
        msg['From'] = self.from_addr
        msg['To'] = ", ".join(to_addr_list)
        msg.preamble = preamble
        msg.epilogue = epilogue
        if intro_text:
            msg.attach( MIMEText(intro_text, 'plain') )
        pgn_part = MIMEBase('text', 'plain')
        pgn_part.set_payload(pgn)
        #Encoders.encode_base64(pgn)
        pgn_part.add_header('Content-Disposition', 'attachment', 
filename=attachment_name+'.pgn')
        msg.attach(pgn_part)
        deferred = smtp.sendmail(self.smtp_host, self.from_addr, 
to_addr_list, msg.as_string())
        return deferred



From rudy at goldenhelix.com  Tue Apr 25 11:32:21 2006
From: rudy at goldenhelix.com (Gabe Rudy)
Date: Tue, 25 Apr 2006 11:32:21 -0600
Subject: [Twisted-Python] Sending large amounts of data over Pb
In-Reply-To: <200604251500.27082.Marcin.Kasperski@softax.com.pl>
References: <444DD4E8.3010206@zeeclor.mine.nu>
	<200604251500.27082.Marcin.Kasperski@softax.com.pl>
Message-ID: <200604251132.21710.rudy@goldenhelix.com>

Hey guys,

In a few specific cases (not as a general case) I'm sending a significant list 
of items over pb in a pb.RemoteCache/pb.Cacheable object pair. To give you an 
idea, it's a list of ~4000 tuples where each tuples has about ~10 strings of 
~10 length.

Right now twisted works fine, but takes about 10 seconds to 
serialize/send/unserialize the data, or I guess in twisted terms, 
banana/send/recv/banana the data.

Since my list is all primitives I thought maybe pickling it before sending 
would speed it up as banana would have to do less work, but I get a 

twisted.spread.banana.BananaError: string is too long to send (706378)

Is that an arbitrary length limit or technically significant?

Is there other methods of speeding this up?

Or alternatively, is it possible (within pb) to receive the state of  a 
RemoteCache or RemoteObject in definable chunks (say 100 items from the list 
at a time), allowing me to start displaying the data in my UI and adding more 
to it as it comes async?

Thanks,
--gabe




From nico at tekNico.net  Tue Apr 25 12:15:54 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Tue, 25 Apr 2006 20:15:54 +0200
Subject: [Twisted-Python] Re: Sending large amounts of data over Pb
In-Reply-To: <200604251132.21710.rudy@goldenhelix.com>
References: <444DD4E8.3010206@zeeclor.mine.nu>	<200604251500.27082.Marcin.Kasperski@softax.com.pl>
	<200604251132.21710.rudy@goldenhelix.com>
Message-ID: <444E675A.8010302@tekNico.net>

> Since my list is all primitives I thought maybe pickling it before sending 
> would speed it up as banana would have to do less work, but I get a 
> 
> twisted.spread.banana.BananaError: string is too long to send (706378)

There's an hard-wired limit of 640KB that, according to a(n in)famous
figure, should be enough for anyone. ;-)


> Is that an arbitrary length limit or technically significant?
> 
> Is there other methods of speeding this up?

Slowness of PB with big data is a known problem, the situation should have
gotten better with newpb. Look at this thread:

http://twistedmatrix.com/pipermail/twisted-python/2005-September/011297.html


-- 
Nicola Larosa - http://www.tekNico.net/

It is not only that power corrupts and absolute power corrupts absolutely.
It is also that power attracts the corruptible. -- David Icke, January 2006





From rudy at goldenhelix.com  Tue Apr 25 13:43:45 2006
From: rudy at goldenhelix.com (Gabe Rudy)
Date: Tue, 25 Apr 2006 13:43:45 -0600
Subject: [Twisted-Python] Re: Sending large amounts of data over Pb
In-Reply-To: <444E675A.8010302@tekNico.net>
References: <444DD4E8.3010206@zeeclor.mine.nu>
	<200604251132.21710.rudy@goldenhelix.com>
	<444E675A.8010302@tekNico.net>
Message-ID: <200604251343.46348.rudy@goldenhelix.com>

On Tuesday 25 April 2006 12:15 pm, Nicola Larosa wrote:
> > twisted.spread.banana.BananaError: string is too long to send (706378)
>
> There's an hard-wired limit of 640KB that, according to a(n in)famous
> figure, should be enough for anyone. ;-)

Ah come on! Since when have we been limiting ourselves the the 
small-mindedness of _business_ men and their inaccurate haughty predictions.

And where are these computers we can't recognize because speech has become the 
"one true" interface?  ;)



From exarkun at divmod.com  Tue Apr 25 15:08:53 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 25 Apr 2006 17:08:53 -0400
Subject: [Twisted-Python] Sending large amounts of data over Pb
In-Reply-To: <200604251132.21710.rudy@goldenhelix.com>
Message-ID: <20060425210853.22481.144447940.divmod.quotient.17225@ohm>

On Tue, 25 Apr 2006 11:32:21 -0600, Gabe Rudy <rudy at goldenhelix.com> wrote:
>Hey guys,
>
>In a few specific cases (not as a general case) I'm sending a significant list
>of items over pb in a pb.RemoteCache/pb.Cacheable object pair. To give you an
>idea, it's a list of ~4000 tuples where each tuples has about ~10 strings of
>~10 length.
>
>Right now twisted works fine, but takes about 10 seconds to
>serialize/send/unserialize the data, or I guess in twisted terms,
>banana/send/recv/banana the data.
>
>Since my list is all primitives I thought maybe pickling it before sending
>would speed it up as banana would have to do less work, but I get a
>
>twisted.spread.banana.BananaError: string is too long to send (706378)
>
>Is that an arbitrary length limit or technically significant?

Arbitrary.

>
>Is there other methods of speeding this up?
>
>Or alternatively, is it possible (within pb) to receive the state of  a
>RemoteCache or RemoteObject in definable chunks (say 100 items from the list
>at a time), allowing me to start displaying the data in my UI and adding more
>to it as it comes async?

I'm not sure how you are using RemoteCache, but the general technique here is to use a pager.  Take a look at twisted.spread.util.Pager, and the two examples/tools that come with it, StringPager and FilePager.

Jean-Paul



From rudy at goldenhelix.com  Tue Apr 25 16:38:19 2006
From: rudy at goldenhelix.com (Gabe Rudy)
Date: Tue, 25 Apr 2006 16:38:19 -0600
Subject: [Twisted-Python] Sending large amounts of data over Pb
In-Reply-To: <20060425210853.22481.144447940.divmod.quotient.17225@ohm>
References: <20060425210853.22481.144447940.divmod.quotient.17225@ohm>
Message-ID: <200604251638.20577.rudy@goldenhelix.com>


> I'm not sure how you are using RemoteCache, but the general technique here
> is to use a pager.  Take a look at twisted.spread.util.Pager, and the two
> examples/tools that come with it, StringPager and FilePager.
>
Very nice, I think that will be very usefull. It may put some holes in my 
abstraction with the current way I use RemoteCache, but I could imagine some 
design changes that would work.

Here is the idea I might try (if you care to comment)

Background: RemoteCachedTable represents some table view of a server-side 
database, thus on the client side it might go something like this (very 
simplified and NOT TESTED):

from twisted.spread import pb, util
class TableDataCollector(util.CallbackPageCollector):
    def __init__(self):
        self.table = None

    def remote_gotPage(self, page):
        self.table.data.extend(page)
        self.table.updateUi(False)

    def remote_endedPaging(self):
        self.table.updateUi(True)

class RemoteCachedTable(pb.RemoteCache):
   def setCopyableState(self,state):
        self.headers = state['headers']
        self.dataIsSmall = state['dataIsSmall']
        if self.dataIsSmall: #Ship the table data if its small, <100 rows
            self.data = state['data']
        else: #We receive the data through a Pager/Collector
            self.data = []
            self.collector = state['collector'] #A TableDataCollector instance
            self.collector.table = self

   def updateUi(self, finished):
        pass #Notify UI of changes to self.data

   #various observe_* methods go here

Obviously the server side stuff is not shown, but this depicts my intent :)

I don't think I have that right though. The "Server" here can not create the 
TableDataCollector instance and pass it back with the state dictionary can 
it? Somehow my "Client" needs to create the instance and send it to the 
server, at which point the server creates the StringPager (or TablePager), 
eh?

--gabe



From andrew-twisted at puzzling.org  Tue Apr 25 19:57:11 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 26 Apr 2006 11:57:11 +1000
Subject: [Twisted-Python] Re: How to make Twisted changes?
In-Reply-To: <1145614743.21217.31.camel@jsilver.rdgoffice.blackspider.com>
References: <1145614743.21217.31.camel@jsilver.rdgoffice.blackspider.com>
Message-ID: <20060426015711.GB6404@steerpike.home.puzzling.org>

[apologies for the slow reply, I've been on an internet-free holiday]

On Fri, Apr 21, 2006 at 11:19:03AM +0100, Jeff Silver wrote:
> Hello spiv,
> 
> You were kind enough to comment "Patches are certainly welcome!" on my
> twisted ticket #1154. I submitted a patch for this, but nothing has been
> done with it. Is there a description somewhere of the process that I (as
> a non-committer) should follow to get submissions reviewed and
> (hopefully) committed? I looked at the "Ultimate Quality Development
> System" page. While that says that non-committers can submit patches
> (which I've done), it doesn't say what, if anything, I should do next.
> 
> Advice, please?

I'd bug the mailing list (or possibly IRC channel) for reviewers.
Unfortunately, nagging seems to be a necessarily evil to get your patch heard
sometimes.  I can't speak for all the developers, but I don't mind being nagged
because I realise this.  Well, I don't mind much <wink>.

Also, I think you should unassign the ticket from yourself seeing as there's
nothing for you to do to it at the moment (although this alone isn't likely make
much difference, we just don't have enough people looking over unassigned
issues).  You could try assigning to developers at random (glyph thinks this is
a good idea), but I don't think this really works very well -- e.g. I just spent
over a week not looking at the internet at all, let alone the issue tracker, so
things randomly assigned to me wouldn't have got anywhere.

-Andrew.




From mary-twisted at puzzling.org  Tue Apr 25 20:23:52 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 26 Apr 2006 12:23:52 +1000
Subject: [Twisted-Python] The End, also: documentation
Message-ID: <20060426022351.GB12864@sourdust.home.puzzling.org>

This is my resignation as Twisted's lead documentation person.

Rest assured I'm not resigning due to any subset of: burning
disillusionment, raging anger, or rampaging untreated mental illness.
Rather, I have a bundle of other projects, and they're increasingly
unrelated to Twisted, which means that I'm not using it for my own
projects, and, sadly, I don't have the energy left over to task switch
into an unrelated project enough to lead part of it.

I'm also, as it turns out, much more interested in reviewing and/or
editing documentation than I am in writing it. The upside of this is
that I'll continue to make myself available as a reviewer of
documentation patches and/or an editor, if needed. Feel free to assign
bugs on this basis. (I will probably not be reading the mailing list,
but I don't make myself difficult to find on IRC.) I will unassign other
bugs from myself soon.

This obviously leaves gaping holes in the greater Twisted universe for
people anxious to advertise the glory of Twisted to the admiring masses.
Do submit some documentation patches... It also leaves a vacancy for
someone who is willing to be caretaker for the documentation as a whole,
fixing minor bugs, farming out work and rearranging things according to
their taste. Apply here, I suspect :)

Thanks,

-Mary



From mary-twisted at puzzling.org  Tue Apr 25 20:24:49 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 26 Apr 2006 12:24:49 +1000
Subject: [Twisted-Python] planet.twistedmatrix.com
Message-ID: <20060426022449.GC12864@sourdust.home.puzzling.org>

Is anyone able to take this over? It would make the most sense, I think,
to host it where the main website is hosted. As soon as someone
volunteers, I'll pass on all necessary files and from there it's just a
question of setting up a cron job.

-Mary



From twisted-python at 2xlp.com  Tue Apr 25 23:18:20 2006
From: twisted-python at 2xlp.com (Jonathan)
Date: Wed, 26 Apr 2006 01:18:20 -0400
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
Message-ID: <658CF638-4049-4B88-8AF9-3E7C9D736F16@2xlp.com>

please ignore everything i said.

after several hours of debugging and testing, i realized that it  
worked all along.  it was doing a dump of result, expecting it to be  
a dict - then saw a row.

eventually i realized it was a dictrow class, and the addressing  
happened on the fly.

at least now I know more about psycopg and twisted enterprise than i  
ever wanted to.


//Jonathan Vanasco





From twisted at ralphm.ik.nu  Wed Apr 26 01:00:49 2006
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Wed, 26 Apr 2006 09:00:49 +0200
Subject: [Twisted-Python] planet.twistedmatrix.com
In-Reply-To: <20060426022449.GC12864@sourdust.home.puzzling.org>
References: <20060426022449.GC12864@sourdust.home.puzzling.org>
Message-ID: <20060426070049.GA98650@ik.nu>

On Wed, Apr 26, 2006 at 12:24:49PM +1000, Mary Gardiner wrote:
> Is anyone able to take this over? It would make the most sense, I think,
> to host it where the main website is hosted. As soon as someone
> volunteers, I'll pass on all necessary files and from there it's just a
> question of setting up a cron job.

I've maintained Planet Jabber and Planet FOSDEM for a while now. It
would be no problem to add Planet Twisted to the same setup.

-- 
Groetjes,

ralphm



From general at eepatents.com  Wed Apr 26 10:40:45 2006
From: general at eepatents.com (Ed Suominen)
Date: Wed, 26 Apr 2006 09:40:45 -0700
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <E1FYe0V-0002SK-02@pyramid.twistedmatrix.com>
References: <E1FYe0V-0002SK-02@pyramid.twistedmatrix.com>
Message-ID: <444FA28D.6000008@eepatents.com>

Mary Gardiner wrote, utterly without influence from burning
> This is my resignation as Twisted's lead documentation person.
> 
> Rest assured I'm not resigning due to any subset of: burning
> disillusionment, raging anger, or rampaging untreated mental illness.
> Rather, I have a bundle of other projects, and they're increasingly
> unrelated to Twisted, which means that I'm not using it for my own
> projects, and, sadly, I don't have the energy left over to task switch
> into an unrelated project enough to lead part of it.
> 
> I'm also, as it turns out, much more interested in reviewing and/or
> editing documentation than I am in writing it. The upside of this is
> that I'll continue to make myself available as a reviewer of
> documentation patches and/or an editor, if needed. Feel free to assign
> bugs on this basis. (I will probably not be reading the mailing list,
> but I don't make myself difficult to find on IRC.) I will unassign other
> bugs from myself soon.
> 
> This obviously leaves gaping holes in the greater Twisted universe for
> people anxious to advertise the glory of Twisted to the admiring masses.
> Do submit some documentation patches... It also leaves a vacancy for
> someone who is willing to be caretaker for the documentation as a whole,
> fixing minor bugs, farming out work and rearranging things according to
> their taste. Apply here, I suspect  :) 

Mary, this Twisted user for one really appreciates the efforts you've
put forth. Indeed, as one of the biggest complainers about Twisted's
docs, I probably appreciate those efforts more than many users. (That
sounds backwards until you think about it for a while, like a lot of
legal language.)

I'm thinking about suggesting (gasp!) myself as your replacement. The
logical, responsible part of my brain is telling me that I'm insane for
doing this. But there's another part of my brain that has an illogical,
probably unhealthy fascination with Twisted and is raising its hand and
squirming on the uncomfortable wooden schooldesk chair with those huge
uncomfortable screw heads sticking out, yelling "Call on me! Call on me!"

As a registered patent agent (http://eepatents.com), I do a lot of
writing as part of my work and bill quite a bit per hour for doing so.
(Here that logical, responsible part is screaming, "So WHY do you want
to do more writing for FREE?") I have complained and whined about the,
shall we say "mixed," state of Twisted's docs for years now on #twisted
and am intrigued by the idea of putting my mouth (dictation) where my
mouth (complaints) is. Plus, (branch) commit access would be kind of
cool for writing those docstrings where I just can't stand seeing those
glaring holes right below "def" or "class"...

It goes without saying (but I'll say it anyway) that there is and would
be absolutely no professional relationship between me and the Twisted
project. (Most free software types aren't all that enamored with
patents, anyhow...) I have kind of enjoyed the decidedly unprofessional
relationship that has developed on #twisted, though.

Comments welcome. Any positive ones will likely be viewed with suspicion
and will raise pangs of regret at my making this rash posting. The
negative ones will likely be viewed with relief, at least by the
aforementioned logical, responsible part...

Best regards,

Ed Suominen
Logical, responsible patent agent
Inexplicably passionate Twisted dabbler




From fog at initd.org  Wed Apr 26 12:23:38 2006
From: fog at initd.org (Federico Di Gregorio)
Date: Wed, 26 Apr 2006 20:23:38 +0200
Subject: [Twisted-Python] psycopg2 and dictcursor
In-Reply-To: <658CF638-4049-4B88-8AF9-3E7C9D736F16@2xlp.com>
References: <5FEABB3E-B3D0-4B00-B8DD-71F1CE971A58@2xlp.com>
	<71603285-D12C-4AF1-BF65-E76668197B64@2xlp.com>
	<658CF638-4049-4B88-8AF9-3E7C9D736F16@2xlp.com>
Message-ID: <1146075818.4390.14.camel@localhost>

Il giorno mer, 26/04/2006 alle 01.18 -0400, Jonathan ha scritto:
> please ignore everything i said.
> 
> after several hours of debugging and testing, i realized that it  
> worked all along.  it was doing a dump of result, expecting it to be  
> a dict - then saw a row.

Thank you for communicating this. I really like when it happens to
someone else; then I realize I am not the only one that goes straight to
debugging gcc assembler output looking for compiler bugs before noting
an unitialized variable. :D

-- 
Federico Di Gregorio                         http://people.initd.org/fog
Debian GNU/Linux Developer                                fog at debian.org
INIT.D Developer                                           fog at initd.org
  Put a GNOME on your desktop! [http://www.gnome.org]
                                      -- brought to you by One Line Spam
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa  una parte del messaggio	firmata digitalmente
URL: </pipermail/twisted-python/attachments/20060426/b7585d4e/attachment.sig>

From tcj25 at cam.ac.uk  Wed Apr 26 15:13:22 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Wed, 26 Apr 2006 23:13:22 +0200
Subject: [Twisted-Python] Twisted's ability to handle many open connections.
Message-ID: <17487.57970.85904.437295@terry.jones.tc>

I'm completely new to Twisted. As I understand it, a Twisted server runs as
a single process - no forking, no threads. To me that implies that select
(or poll or pselect, etc) is being heavily used to feed data to Deferreds.

If that's the case, how does Twisted (portably) allow for a large number of
file descriptors?

I'm considering using Twisted for a project. Twisted would front requests
from the web, but also from (e.g.) remote command line applications via an
API.  These latter connections could potentially be numerous, and long
lived.  Should I be thinking about how Twisted deals with this, or does it
already scale to allow more simultaneous connections / file descriptors
than a naive server program would be able to maintain?

Given what looks like widespread use of Deferreds in Twisted, I suppose
that there is not a 1-1 relationship between connections and file
descriptors? If so this makes the issue more pressing.

Thanks for any help,
Terry



From glyph at divmod.com  Wed Apr 26 17:02:12 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Wed, 26 Apr 2006 19:02:12 -0400
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <17487.57970.85904.437295@terry.jones.tc>
Message-ID: <20060426230212.22481.210619728.divmod.quotient.17933@ohm>

On Wed, 26 Apr 2006 23:13:22 +0200, Terry Jones <tcj25 at cam.ac.uk> wrote:
>I'm completely new to Twisted. As I understand it, a Twisted server runs as
>a single process - no forking, no threads. To me that implies that select
>(or poll or pselect, etc) is being heavily used to feed data to Deferreds.

That's more or less accurate.  It sounds like you understand this, but because I can never repeat it enough: Deferreds don't do anything magic or get involved with select() directly, it's just that their callback() methods are called from other callbacks which are ultimately invoked as a result of the return value of select().

>If that's the case, how does Twisted (portably) allow for a large number of
>file descriptors?

Twisted doesn't do *anything* portably :).

On Windows, there is a reactor that supports a maximum of 63 concurrent events (assuming your process has no windows open).  On UNIX the default reactor is still select() based and will definitely bog down if you have too many simultaneous sockets open.  Sometimes it is handled quite badly!

However, the selection of a reactor is a configuration option, not an application-architecture issue (unless, of course, you are writing a GUI which has requirements for what event loop it will run on).

You can choose a reactor with the -r argument to twistd, trial, and other similar tools like axiomatic.  You can choose different reactors for different platforms.  Application code should be none the wiser.

>I'm considering using Twisted for a project. Twisted would front requests
>from the web, but also from (e.g.) remote command line applications via an
>API.  These latter connections could potentially be numerous, and long
>lived.  Should I be thinking about how Twisted deals with this, or does it
>already scale to allow more simultaneous connections / file descriptors
>than a naive server program would be able to maintain?

There are some pretty darn naive programs out there.  The default naive case of a server that I'm aware of accept()s one connection, reads (blocking) the entire socket, then writes a response.  That is 1 simultaneous connection: so in that case, yes, Twisted can do better :).  However, it doesn't use any crazy tricks, and is likely to scale far worse than something like ACE or Sandstorm, i.e. any research project designed specifically just to scale.  Scale is only one of Twisted's many considerations, as it aims to be a completely generic networking application layer.

The most scalable reactor you are likely to find on UNIX is the "poll" reactor.  There is a kqueue reactor but it is by all accounts terrible (ie, performs worse than poll due to unfortunate design decisions in the python/kqueue bindings) and needs to be rewritten.  In every case I'm aware of, other scalability concerns (usually the speed of Python itself) was an issue long before the IO overhead of simultaneous connections broke poll().  If your application has such a case, though, implementing an epoll, aio, kqueue, libevent, or <insert your totally non-portable, OS-specific, crazily scalable IO multiplexing API here> reactor should not be an inordinate amount of work.  Less work, at least, than building such a beast and then writing what amounts to 2/3 of the Twisted core around it anyway :).

>Given what looks like widespread use of Deferreds in Twisted, I suppose
>that there is not a 1-1 relationship between connections and file
>descriptors? If so this makes the issue more pressing.

Again, Deferreds do not create file descriptors or have anything to do with select().  They are simply a Python object abstraction for callbacks.

Depends what you mean by 'connections'.  listenTCP, listenUNIX, etc, create a listening socket.  They accept() on that, and each buildProtocol is invoked after a connected socket is created.  Each of those is a file descriptor.  If you keep disk files or pipes open outside of Twisted, those are also file descriptors, etc etc etc.  You can have virtual "connections" which multiplex  multiple Protocol objects over a single transport though, or otherwise have fewer file descriptors than "connections" in that sense.



From matt at pollenation.net  Wed Apr 26 17:18:44 2006
From: matt at pollenation.net (Matt Goodall)
Date: Thu, 27 Apr 2006 00:18:44 +0100
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <17487.57970.85904.437295@terry.jones.tc>
References: <17487.57970.85904.437295@terry.jones.tc>
Message-ID: <444FFFD4.1060909@pollenation.net>

Terry Jones wrote:
> I'm completely new to Twisted. As I understand it, a Twisted server runs as
> a single process - no forking, no threads.

Correct. Twisted is event driven. It doesn't need to fork and spawn 
threads to handle a lot of network connections at once.

However, Twisted is perfectly capable of managing any processes and 
threads an application *needs* to create. In fact, Twisted's core 
includes APIs specifically created to handle background processes and 
threads.


> To me that implies that select
> (or poll or pselect, etc) is being heavily used to feed data to Deferreds.

select/poll/whatever is at the core of Twisted's event loop, known as 
the 'reactor' but Deferreds are completely unrelated to data delivery.

A Deferred is a callback mechanism, nothing more. A function typically 
returns a Deferred to say, "hey, you asked me to do something and I will 
give my response ... just not right now".


> 
> If that's the case, how does Twisted (portably) allow for a large number of
> file descriptors?

As you recognised, Twisted uses a select loop so I'm not quite sure what 
your question means. However ...

Twisted chooses the best available reactor implementation for the 
platform. "Best", here, probably meaning most available (default?) 
rather than fastest.

I'm no expert here but on Linux the reactor really does use a select() 
loop, on win32 it uses the win32 equivalent of a select loop 
(WSAEventSelect and MsgWaitForMultipleObjects, or something), and I 
believe it uses poll on the BSDs.

If the "best" reactor is not actually the best (if you see what I mean!) 
then you can manually install a non-default reactor. There are plenty to 
choose from.

For instance, on Linux if you want to handle a huge number of 
simultaneous connections then installing a poll-based reactor is 
probably a good idea. If your application uses GTK+ then you would 
install a GTK+ reactor.


> I'm considering using Twisted for a project. Twisted would front requests
> from the web, but also from (e.g.) remote command line applications via an
> API.

This is what Twisted excels at - multi-protocol network applications. 
I've done it many times now and it just works.

Twisted already includes support (of varying quality) for most common 
protocols but it's very easy to add new protocols if necessary.


> These latter connections could potentially be numerous, and long
> lived.  Should I be thinking about how Twisted deals with this, or does it
> already scale to allow more simultaneous connections / file descriptors
> than a naive server program would be able to maintain?

Twisted is event driven and most people believe that event driven scales 
better, especially for network-related work. I therefore believe Twisted 
will *help* you write code that will scale to a high number of 
simultaneous connections. Twisted does perform any magic though.

You will need to understand event driven programming to scale up, 
otherwise you're likely to block the application from doing more than 
one thing at a time (in the cooperatively multitasking sense) making 
your application utterly unscalable.

Also, note that Twisted does not magic away other common problems 
associated with scalability. The obvious one that springs to mind 
(because it bit me recently :-/) is the maximum number of file 
descriptors a non-root Linux process can open per process.

> 
> Given what looks like widespread use of Deferreds in Twisted, I suppose
> that there is not a 1-1 relationship between connections and file
> descriptors? If so this makes the issue more pressing.

There is absolutely a 1-1 relationship between connections and file 
descriptors but Deferred have nothing to do with it.

It's quite possible to write a Twisted application without ever using a 
Deferred. If your application can respond immediately (well, very 
quickly) to requests that arrive from the network then you don't need 
Deferreds.

You need a Deferred when you cannot respond immediately. In that case 
you would create a Deferred and store it somewhere, spawn something 
*non-blocking* to handle the request and return the Deferred to the 
caller. Then, when the non-blocking thing completes, you callback via 
the Deferred you stored to let the caller know the result.

> 
> Thanks for any help,
> Terry

Hope it did help!

Cheers, Matt

-- 
      __
     /  \__     Matt Goodall, Pollenation Internet Ltd
     \__/  \    w: http://www.pollenation.net
   __/  \__/    e: matt at pollenation.net
  /  \__/  \    t: +44 (0)113 2252500
  \__/  \__/
  /  \	       Any views expressed are my own and do not necessarily
  \__/          reflect the views of my employer.



From tcj25 at cam.ac.uk  Wed Apr 26 17:30:00 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Thu, 27 Apr 2006 01:30:00 +0200
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: Your message at 19:02:12 on Wednesday, 26 April 2006
References: <17487.57970.85904.437295@terry.jones.tc>
	<20060426230212.22481.210619728.divmod.quotient.17933@ohm>
Message-ID: <17488.632.787174.515958@terry.jones.tc>

>>>>> "glyph" == glyph  <glyph at divmod.com> writes:

glyph> That's more or less accurate.  It sounds like you understand this,
glyph> but because I can never repeat it enough: Deferreds don't do
glyph> anything magic or get involved with select() directly

Ok, got it.

glyph> On Windows, there is a reactor that supports a maximum of 63
glyph> concurrent events (assuming your process has no windows open).  On
glyph> UNIX the default reactor is still select() based and will definitely
glyph> bog down if you have too many simultaneous sockets open.  Sometimes
glyph> it is handled quite badly!

glyph> However, the selection of a reactor is a configuration option, not
glyph> an application-architecture issue (unless, of course, you are
glyph> writing a GUI which has requirements for what event loop it will run
glyph> on).

glyph> You can choose a reactor with the -r argument to twistd, trial, and
glyph> other similar tools like axiomatic.  You can choose different
glyph> reactors for different platforms.  Application code should be none
glyph> the wiser.

Thanks for the details. Sounds like I can handle the problem, if it ever
happens, by simply bumping FD_SETSIZE and rebuilding the kernel, then
proceeding as normal. And/or drop old connections.

glyph> If your application has such a case, though, implementing an epoll,
glyph> aio, kqueue, libevent, or <insert your totally non-portable,
glyph> OS-specific, crazily scalable IO multiplexing API here> reactor
glyph> should not be an inordinate amount of work.  Less work, at least,
glyph> than building such a beast and then writing what amounts to 2/3 of
glyph> the Twisted core around it anyway :).

Ok, great. I'm actually backing my way out of using lots of already written
low-level asynchronous networking code, my own RPC mechanism, etc., in
favor of letting someone else do that work :-) So I do know what you mean,
and agree.

Thanks again.

Terry



From glyph at divmod.com  Wed Apr 26 17:33:19 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Wed, 26 Apr 2006 19:33:19 -0400
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <444FA28D.6000008@eepatents.com>
Message-ID: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>

On Wed, 26 Apr 2006 09:40:45 -0700, Ed Suominen <general at eepatents.com> wrote:

>Mary, this Twisted user for one really appreciates the efforts you've
>put forth. Indeed, as one of the biggest complainers about Twisted's
>docs, I probably appreciate those efforts more than many users. (That
>sounds backwards until you think about it for a while, like a lot of
>legal language.)

I think that, oddly enough, Mary's resignation comes because she was the most dilligent member of the team, taking her documentation-maintenance responsibilities more seriously than almost anyone else over the packages they maintain (myself included).

>I'm thinking about suggesting (gasp!) myself as your replacement. The
>logical, responsible part of my brain is telling me that I'm insane for
>doing this. But there's another part of my brain that has an illogical,
>probably unhealthy fascination with Twisted and is raising its hand and
>squirming on the uncomfortable wooden schooldesk chair with those huge
>uncomfortable screw heads sticking out, yelling "Call on me! Call on me!"

No need to insist - with the level of competition we usually have, you're in!

The position of "documentation maintainer" is a bit unusual since it was actually taken consciously and willingly.  Usually the protocol is this: I appoint someone for a task, which they are not qualified to do.  Then, they have to fight a bear if they don't want to do it.

Now that you've volunteered, there's no getting out of it.  I mean, do you want to fight a bear?  I wouldn't.  Bears are *scary* - just ask Stephen Colbert.

>Comments welcome. Any positive ones will likely be viewed with suspicion
>and will raise pangs of regret at my making this rash posting. The
>negative ones will likely be viewed with relief, at least by the
>aforementioned logical, responsible part...

Well, I guess you could consider my comment positive.  I think you'll do a great job, since few people seem to care so much about documentation.

By the way, do you know anyone who might be similarly duped into becoming the website maintainer?  (might you?)



From tcj25 at cam.ac.uk  Wed Apr 26 17:35:21 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Thu, 27 Apr 2006 01:35:21 +0200
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: Your message at 00:18:44 on Thursday, 27 April 2006
References: <17487.57970.85904.437295@terry.jones.tc>
	<444FFFD4.1060909@pollenation.net>
Message-ID: <17488.953.898515.457774@terry.jones.tc>

Hi Matt. Thanks for your answer too.

>>>>> "Matt" == Matt Goodall <matt at pollenation.net> writes:

>> If that's the case, how does Twisted (portably) allow for a large number of
>> file descriptors?

Matt> As you recognised, Twisted uses a select loop so I'm not quite sure what 
Matt> your question means.

You get to it below.

Matt> You will need to understand event driven programming to scale up, 
Matt> otherwise you're likely to block the application from doing more than 
Matt> one thing at a time (in the cooperatively multitasking sense) making 
Matt> your application utterly unscalable.

I'm already a believer, no problem there.

Matt> Also, note that Twisted does not magic away other common problems 
Matt> associated with scalability. The obvious one that springs to mind 
Matt> (because it bit me recently :-/) is the maximum number of file 
Matt> descriptors a non-root Linux process can open per process.

Right - that was what I was referring to originally. Sorry that wasn't
clear.

Matt> There is absolutely a 1-1 relationship between connections and file 
Matt> descriptors but Deferred have nothing to do with it.

OK.

Matt> Hope it did help!

Yes. Plus, it's nice to see how quickly a mailing list reacts when you're
thinking of using a new product :-) Twisted has a bit of a reputation for
being obscure, but it looks much better to me than any alternative - at
least for serious networking tasks (not just serving web pages fished up of
the nearest database). I have high hopes.

Anyway, thanks again.

Terry



From mary-twisted at puzzling.org  Wed Apr 26 18:01:50 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Thu, 27 Apr 2006 10:01:50 +1000
Subject: [Twisted-Python] planet.twistedmatrix.com
In-Reply-To: <20060426070049.GA98650@ik.nu>
References: <20060426022449.GC12864@sourdust.home.puzzling.org>
	<20060426070049.GA98650@ik.nu>
Message-ID: <20060427000150.GB23105@sourdust.home.puzzling.org>

On Wed, Apr 26, 2006, Ralph Meijer wrote:
> I've maintained Planet Jabber and Planet FOSDEM for a while now. It
> would be no problem to add Planet Twisted to the same setup.

Thanks. I'll forward you the templates and config in the next day or
two.

-Mary



From nico at tekNico.net  Thu Apr 27 02:41:31 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu, 27 Apr 2006 10:41:31 +0200
Subject: [Twisted-Python] Re: The End, also: documentation
In-Reply-To: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
References: <444FA28D.6000008@eepatents.com>
	<20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
Message-ID: <e2q03t$tog$1@sea.gmane.org>

> By the way, do you know anyone who might be similarly duped into
> becoming the website maintainer?  (might you?)

Duped, indeed. OK, I'll bite. Where do I sign?

-- 
Nicola Larosa - http://www.tekNico.net/

Our society definitely needs a serious conversation about the fundamental
freedoms we are sacrificing in a misguided attempt to keep us safe from
terrorism. It feels both surreal and sickening to have to defend our
fundamental freedoms against those who want to stop people from sharing
music. How is it possible that we can contemplate so much damage to our
society simply to protect the business model of a handful of companies?
 -- Bruce Schneier, December 2005




From exarkun at divmod.com  Thu Apr 27 07:10:12 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 27 Apr 2006 09:10:12 -0400
Subject: [Twisted-Python] Re: The End, also: documentation
In-Reply-To: <e2q03t$tog$1@sea.gmane.org>
Message-ID: <20060427131012.22481.1310135984.divmod.quotient.18360@ohm>

On Thu, 27 Apr 2006 10:41:31 +0200, Nicola Larosa <nico at teknico.net> wrote:
>> By the way, do you know anyone who might be similarly duped into
>> becoming the website maintainer?  (might you?)
>
>Duped, indeed. OK, I'll bite. Where do I sign?

http://twistedmatrix.com/trac/query?status=new&status=assigned&status=reopened&component=website&order=priority

Jean-Paul



From itamar at itamarst.org  Thu Apr 27 07:39:15 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 27 Apr 2006 09:39:15 -0400
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <20060426230212.22481.210619728.divmod.quotient.17933@ohm>
References: <20060426230212.22481.210619728.divmod.quotient.17933@ohm>
Message-ID: <1146145156.5791.0.camel@localhost.localdomain>

> On Windows, there is a reactor that supports a maximum of 63
> concurrent events (assuming your process has no windows open).  On
> UNIX the default reactor is still select() based and will definitely
> bog down if you have too many simultaneous sockets open.  Sometimes it
> is handled quite badly!

But default win32 reactor has 512 maximum.




From nico at tekNico.net  Thu Apr 27 08:09:45 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu, 27 Apr 2006 16:09:45 +0200
Subject: [Twisted-Python] Re: The End, also: documentation
In-Reply-To: <20060427131012.22481.1310135984.divmod.quotient.18360@ohm>
References: <e2q03t$tog$1@sea.gmane.org>
	<20060427131012.22481.1310135984.divmod.quotient.18360@ohm>
Message-ID: <e2qjb9$2vi$1@sea.gmane.org>

>> OK, I'll bite. Where do I sign?

> http://twistedmatrix.com/trac/query?status=new&status=assigned&status=reopened&component=website&order=priority

Work already cut out and waiting, great.

Taking a hint from #1517, I checked out WebSite, and will go over it soon.
If anybody has any hint, don't be shy. :-)

-- 
Nicola Larosa - http://www.tekNico.net/

The police and the military have fundamentally different missions.
The police protect citizens. The military attacks the enemy. When
you start giving police powers to the military, citizens start
looking like the enemy. -- Bruce Schneier, December 2005





From manlio_perillo at libero.it  Thu Apr 27 09:30:03 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu, 27 Apr 2006 13:30:03 -0200
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
Message-ID: <4450E37B.7080703@libero.it>

glyph at divmod.com ha scritto:
> [...]
> The position of "documentation maintainer" is a bit unusual since it was
> actually taken consciously and willingly.  Usually the protocol is this:
> I appoint someone for a task, which they are not qualified to do.  Then,
> they have to fight a bear if they don't want to do it.
> 

Just to known.
Suppose I found some time to document some parts of Twisted.
Many things in twisted.python are undocumented, log is rougly documented
and usage docs are not really complete.

I have to submit a ticket/patch?


By the way: here are some parts for witch I would like to see documentation:
1) twisted.python
2) description of design patterns used in twisted
3) all(?) interfaces, like IConsumer

4) parts of twisted deprecated/unmaintained/abandoned/not to be used
5) parts of twisted that need recoding (twisted.news?)
6) servers used in production enviroment with use cases



Thanks and regards  Manlio Perillo



From manlio_perillo at libero.it  Thu Apr 27 09:35:17 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Thu, 27 Apr 2006 13:35:17 -0200
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
Message-ID: <4450E4B5.2030004@libero.it>

glyph at divmod.com ha scritto:
> [...]
>
> By the way, do you know anyone who might be similarly duped into
> becoming the website maintainer?  (might you?)
>

The site really need some works.
Some links are still missing:
http://twistedmatrix.com/projects/news/documentation/

and I really can't find manpages!




Regards  Manlio Perillo



From glyph at divmod.com  Thu Apr 27 10:32:05 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Thu, 27 Apr 2006 12:32:05 -0400
Subject: [Twisted-Python] Twisted's ability to handle many open
	connections.
In-Reply-To: <1146145156.5791.0.camel@localhost.localdomain>
Message-ID: <20060427163205.22481.1821270455.divmod.quotient.18490@ohm>



On Thu, 27 Apr 2006 09:39:15 -0400, Itamar Shtull-Trauring <itamar at itamarst.org> wrote:
>> On Windows, there is a reactor that supports a maximum of 63
>> concurrent events (assuming your process has no windows open).  On
>> UNIX the default reactor is still select() based and will definitely
>> bog down if you have too many simultaneous sockets open.  Sometimes it
>> is handled quite badly!
>
>But default win32 reactor has 512 maximum.

Right.  The reactor I'm referring to is the win32eventreactor.



From mary-twisted at puzzling.org  Thu Apr 27 15:51:34 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Fri, 28 Apr 2006 07:51:34 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <4450E4B5.2030004@libero.it>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
	<4450E4B5.2030004@libero.it>
Message-ID: <20060427215134.GH6014@sourdust.home.puzzling.org>

On Thu, Apr 27, 2006, Manlio Perillo wrote:
> The site really need some works.
> Some links are still missing:
> http://twistedmatrix.com/projects/news/documentation/
> 
> and I really can't find manpages!

This kind of information should be submitted as a bug at
http://twistedmatrix.com/trac/newticket and marked as belonging to the
'website' component. (I tended to prefer each individual problem be
filed as a separate bug, this mail sounds like two bugs.)

-Mary



From mary-twisted at puzzling.org  Thu Apr 27 15:58:56 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Fri, 28 Apr 2006 07:58:56 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <4450E37B.7080703@libero.it>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
	<4450E37B.7080703@libero.it>
Message-ID: <20060427215856.GI6014@sourdust.home.puzzling.org>

On Thu, Apr 27, 2006, Manlio Perillo wrote:
> Just to known.
> Suppose I found some time to document some parts of Twisted.
> Many things in twisted.python are undocumented, log is rougly documented
> and usage docs are not really complete.
> 
> I have to submit a ticket/patch?

This would be the usual way to do it. I used to accept some through
email to, but that just adds another step for the person you mail them
to: they file a bug based on your mail. I had a post about what made a
good docs bug here:
http://twistedmatrix.com/pipermail/twisted-python/2004-June/008071.html

> By the way: here are some parts for witch I would like to see documentation:
> 1) twisted.python
> 2) description of design patterns used in twisted
> 3) all(?) interfaces, like IConsumer
> 
> 4) parts of twisted deprecated/unmaintained/abandoned/not to be used
> 5) parts of twisted that need recoding (twisted.news?)
> 6) servers used in production enviroment with use cases

Each of these sounds like a bug report, whether or not you attach a
patch.

-Mary



From Marcin.Kasperski at softax.com.pl  Fri Apr 28 06:14:34 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 14:14:34 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
Message-ID: <200604281414.35595.Marcin.Kasperski@softax.com.pl>

In my trial tests I have a few test methods constructed using 
deferredGenerator idiom. Something like that:

  def testSomething(self):
       # ... do something
       yield defer.waitForDeferred(someDeferred)
       # ... do something
       yield defer.waitForDeferred(otherDeferred)
       # ... do something
  testSomething = defer.deferredGenerator(testSomething)

Let's write clean code and works perfectly.    ... Almost.
The problem is that in the verbose test output I get 

      <lambda> ...                        [OK]

Of course I would prefer

     testSomething ...                   [OK]

Is it possible to name the function returned by deferredGenerator 
somehow? If not, how to solve this situation? Extra problem is 
that if I add sth like 'def testSomethingWrapped(self):' calling 
generator inside, then trial will consider both testSomethign 
and testSomethingWrapped as independed test methods...



From mustafa at liqia.com  Fri Apr 28 06:22:40 2006
From: mustafa at liqia.com (Mustafa Sakalsiz)
Date: Fri, 28 Apr 2006 15:22:40 +0300
Subject: [Twisted-Python] SMTP client with authentication
Message-ID: <44520910.3030709@liqia.com>

Hi,

I try to implement a simple smtp client, but my smtp server requires 
authentication. Is there a client sample which accomplishes the basic or 
plain smtp authentication.

Thanks,
Saki



From mike at mkp.ca  Fri Apr 28 06:57:44 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Fri, 28 Apr 2006 08:57:44 -0400
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
Message-ID: <200604280857.45390.mike@mkp.ca>

On Friday 28 April 2006 08:14, Marcin Kasperski wrote:
> In my trial tests I have a few test methods constructed using
> deferredGenerator idiom. Something like that:
>
>   def testSomething(self):
>        # ... do something
>        yield defer.waitForDeferred(someDeferred)
>        # ... do something
>        yield defer.waitForDeferred(otherDeferred)
>        # ... do something
>   testSomething = defer.deferredGenerator(testSomething)

> Is it possible to name the function returned by deferredGenerator
> somehow?

Shot in the dark; try adding:

    testSomething.__name__ = "testSomething"

or

    testSomething.__doc__ = "testSomething"

Not pretty, but I think it will work.  You could maybe use a util func like:

def defGen(f):
  gen = defer.deferredGenerator(f)
  gen.__name__ = f.__name__
  gen.__doc__ = f.__doc__
  return gen

Mike.



From itamar at itamarst.org  Fri Apr 28 07:10:46 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 28 Apr 2006 09:10:46 -0400
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
Message-ID: <1146229848.5698.0.camel@localhost.localdomain>

On Fri, 2006-04-28 at 14:14 +0200, Marcin Kasperski wrote:
> In my trial tests I have a few test methods constructed using 
> deferredGenerator idiom. Something like that:
> 
>   def testSomething(self):
>        # ... do something
>        yield defer.waitForDeferred(someDeferred)
>        # ... do something
>        yield defer.waitForDeferred(otherDeferred)
>        # ... do something
>   testSomething = defer.deferredGenerator(testSomething)
> 
> Let's write clean code and works perfectly.    ... Almost.
> The problem is that in the verbose test output I get 
> 
>       <lambda> ...                        [OK]
> 
> Of course I would prefer
> 
>      testSomething ...                   [OK]
> 
> Is it possible to name the function returned by deferredGenerator 
> somehow? If not, how to solve this situation? Extra problem is 
> that if I add sth like 'def testSomethingWrapped(self):' calling 
> generator inside, then trial will consider both testSomethign 
> and testSomethingWrapped as independed test methods...

I think this may be fixed in twisted 2.2.

-- 
Itamar Shtull-Trauring
http://itamarst.org





From Marcin.Kasperski at softax.com.pl  Fri Apr 28 07:28:29 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:28:29 +0200
Subject: [Twisted-Python] SMTP client with authentication
In-Reply-To: <44520910.3030709@liqia.com>
References: <44520910.3030709@liqia.com>
Message-ID: <200604281528.29650.Marcin.Kasperski@softax.com.pl>

Dnia pitek, 28 kwietnia 2006 14:22, Mustafa Sakalsiz napisa:
> Hi,
>
> I try to implement a simple smtp client, but my smtp server
> requires authentication. Is there a client sample which
> accomplishes the basic or plain smtp authentication.

I use the following replacement for the standard twisted sendmail function:

from twisted.mail import smtp
from twisted.internet import reactor
from twisted.internet import defer

try:
    from cStringIO import StringIO
except ImportError:
    from StringIO import StringIO

def sendmail_auth(smtphost, user, password,
                 from_addr, to_addrs, msg, senderDomainName=None, port=25):
    if not hasattr(msg,'read'):
        msg = StringIO(str(msg))
    d = defer.Deferred()
    factory = smtp.ESMTPSenderFactory(user, password, from_addr, to_addrs, msg, d,
                                      requireTransportSecurity=False)
    if senderDomainName is not None:
        factory.domain = senderDomainName
    reactor.connectTCP(smtphost, port, factory)
    return d

(nothing wise, just copied original and changed to ESMTPSenderFactory). Maybe it would make sense to add something like that to twisted.



From Marcin.Kasperski at softax.com.pl  Fri Apr 28 07:30:14 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:30:14 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604280857.45390.mike@mkp.ca>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
	<200604280857.45390.mike@mkp.ca>
Message-ID: <200604281530.14905.Marcin.Kasperski@softax.com.pl>

>     testSomething.__name__ = "testSomething"

exceptions.TypeError: readonly attribute

>     testSomething.__doc__ = "testSomething"

This one worked. Thank you very much.




From Marcin.Kasperski at softax.com.pl  Fri Apr 28 07:33:28 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:33:28 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604280857.45390.mike@mkp.ca>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
	<200604280857.45390.mike@mkp.ca>
Message-ID: <200604281533.28324.Marcin.Kasperski@softax.com.pl>

Dnia pitek, 28 kwietnia 2006 14:57, Mike Pelletier napisa:
> def defGen(f):
>  gen = defer.deferredGenerator(f)
>  gen.__name__ = f.__name__
>  gen.__doc__ = f.__doc__
>  return gen

Finally such one does the job:

def createDeferredGenerator(function):
    gen = defer.deferredGenerator(function)
    gen.__doc__ = function.__name__
    return gen



From Marcin.Kasperski at softax.com.pl  Fri Apr 28 07:36:32 2006
From: Marcin.Kasperski at softax.com.pl (Marcin Kasperski)
Date: Fri, 28 Apr 2006 15:36:32 +0200
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <1146229848.5698.0.camel@localhost.localdomain>
References: <200604281414.35595.Marcin.Kasperski@softax.com.pl>
	<1146229848.5698.0.camel@localhost.localdomain>
Message-ID: <200604281536.32329.Marcin.Kasperski@softax.com.pl>

> I think this may be fixed in twisted 2.2.

My Debian claims that I am using 2.2.0, so maybe it was patched 
later.

I guess that the fix would be adding within deferredGenerator 
construct like the one suggested by Mike (setting __doc__ of 
returned lambda function to __name__ of wrapped function)



From exarkun at divmod.com  Fri Apr 28 07:57:48 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 28 Apr 2006 09:57:48 -0400
Subject: [Twisted-Python] Naming test methods constructed with
	deferredGenerator - is it possible?
In-Reply-To: <200604281536.32329.Marcin.Kasperski@softax.com.pl>
Message-ID: <20060428135748.22481.942591438.divmod.quotient.19156@ohm>

On Fri, 28 Apr 2006 15:36:32 +0200, Marcin Kasperski <marcin.kasperski at softax.com.pl> wrote:
>> I think this may be fixed in twisted 2.2.
>
>My Debian claims that I am using 2.2.0, so maybe it was patched
>later.
>
>I guess that the fix would be adding within deferredGenerator
>construct like the one suggested by Mike (setting __doc__ of
>returned lambda function to __name__ of wrapped function)

This isn't correct, of course.  It just happens to do something kind of useful when the deferred generator is a trial test method.  In other cases, it would be weird to find the __doc__ of the returned object to be the __name__ of the wrapped function.

In Python 2.4, setting __name__ works, and deferredGenerator tries to do that, so trial will only have this problem with Python 2.3.  You could define a helper function for your tests which calls deferredGenerator and sets __doc__ appropriately, if switching to Python 2.4 isn't an option.

Jean-Paul



From manlio_perillo at libero.it  Fri Apr 28 09:15:14 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 28 Apr 2006 13:15:14 -0200
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <20060427215856.GI6014@sourdust.home.puzzling.org>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>	<4450E37B.7080703@libero.it>
	<20060427215856.GI6014@sourdust.home.puzzling.org>
Message-ID: <44523182.7040000@libero.it>

Mary Gardiner ha scritto:
> On Thu, Apr 27, 2006, Manlio Perillo wrote:
>> Just to known.
>> Suppose I found some time to document some parts of Twisted.
>> Many things in twisted.python are undocumented, log is rougly documented
>> and usage docs are not really complete.
>>
>> I have to submit a ticket/patch?
> 
> This would be the usual way to do it. I used to accept some through
> email to, but that just adds another step for the person you mail them
> to: they file a bug based on your mail. I had a post about what made a
> good docs bug here:
> http://twistedmatrix.com/pipermail/twisted-python/2004-June/008071.html
> 

I have no problem with tickets, just I don't know to who assign them.


Thanks and regards  Manlio Perillo



From mary-twisted at puzzling.org  Fri Apr 28 16:25:18 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sat, 29 Apr 2006 08:25:18 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <44523182.7040000@libero.it>
References: <20060426233319.22481.1835941231.divmod.quotient.17948@ohm>
	<4450E37B.7080703@libero.it>
	<20060427215856.GI6014@sourdust.home.puzzling.org>
	<44523182.7040000@libero.it>
Message-ID: <20060428222518.GT6014@sourdust.home.puzzling.org>

On Fri, Apr 28, 2006, Manlio Perillo wrote:
> I have no problem with tickets, just I don't know to who assign them.

It seems the appropriate rituals have performed and Ed is now the lead
documentation maintainer for Twisted. So they should be assigned to him,
but I don't know what his bugtracker login is.

I think it's possible not to assign tickets to anyone (I don't know trac
very well), so that's the backup plan.

-Mary



From david.anderson at calixo.net  Sat Apr 29 09:10:06 2006
From: david.anderson at calixo.net (David Anderson)
Date: Sat, 29 Apr 2006 17:10:06 +0200
Subject: [Twisted-Python] Crash when using XmlRPC during reactor shutdown
Message-ID: <20060429151006.GB16623@natulte.net>

Hi,

I have been experiencing a crash when trying to use the XmlRPC query
subsystem while the reactor is shutting down.

The context of it is that my twisted application talks to an upstream
server using XmlRPC.  When it comes online, it registers, and when it
goes offline, it should unregister itself, using a simple XmlRPC
query.

So, I figured the natural place to put the notifications were in the
startService and stopService methods, that get called at just the
right time.  startService is not a problem, and works fine.  for
stopService, I made the method return the XmlRPC Deferred, so that the
reactor would wait until request completion before continuing the
shutdown.

The thing is, with this scheme Twisted dumps an exception during
shutdown, because the XmlRPC Deferred gets fired twice.  I've
reproduced this behaviour with a minimal application:

****************************************************************
****************************************************************
from twisted.application.service import Service
from twisted.python import log
from twisted.web.xmlrpc import Proxy
from twisted.application.service import Application, IServiceCollection
from twisted.internet import reactor, defer

class TestXmlRpcService(Service):
    def startService(self):
        log.msg("Starting service")
        reactor.callLater(0, reactor.stop)

    def stopService(self):
        def handle_success(res):
            log.msg("Unregistration successful, but reactor will now crash")
            return True
        def handle_error(e):
            log.msg("Unregistration failed...")
            return False

        log.msg("Calling XmlRPC backend (and crashing)")
        p = Proxy('http://natulte.net/pub/fgs/RPC2.php')
        defer.setDebugging(True)
        # Call any old method, this is just a proof of concept
        d = p.callRemote('fgsd.register',
                         "00000000000000000000000000000000",
                         "bleh")
        d.addCallbacks(handle_success, handle_error)
        return d


service = TestXmlRpcService()
application = Application("proxy")
service.setServiceParent(application)
****************************************************************
****************************************************************

If you run that with `twistd -n -l- -y test.tac`, you should see the
crash immediately.

I know that patients shouldn't give diagnostics about their problems
to the doctor, but nevertheless, examining the exception log, I
believe I know what the problem is.

 - When stopService returns a Deferred, the reactor stops the shutdown
   and adds callbacks to the Deferred, to resume shutdown at the right
   time.

 - The XmlRPC query succeeds, and fires the Deferred. It walks right
   down the notification chain, and eventually trips the reactor's
   callback.

 - The reactor, within the callback, resumes shutdown, and calls
   disconnectAll to kill all active connections.

 - At this point, the XmlRPC query still has its socket open, and so
   gets notified that the connection was lost.  It attempts to fire
   our Deferred's errback to notify of this, and foom,
   AlreadyCalledError.

If this makes sense, the resolution might be simple: close the
transport connection before firing the deferred, so that the reactor
can't kill the connection and trigger the double-call.

The other option would be to include a flag in the xmlrpc query
object, to avoid double-firing in this (admitedly corner-case)
situation.

Does all that make sense?  And, of course, does anyone have an idea of
a workaround I could use in the meantime?  As I'm shutting down the
service anyway, the exception is not really a problem in itself, it's
just a little unclean to have an exception dump in the logs at each
shutdown.

Thanks in advance (and already, for Twisted :-),
- Dave.



From manlio_perillo at libero.it  Sat Apr 29 09:44:35 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sat, 29 Apr 2006 13:44:35 -0200
Subject: [Twisted-Python] conch and cftp
Message-ID: <445389E3.3030606@libero.it>

Hi.

There is a reason for conch (and cftp) script not working on Windows?

Traceback (most recent call last):
  File "C:\Python2.4\Scripts\conch.py", line 20, in ?
    from twisted.conch.scripts.conch import run
  File "C:\Python2.4\lib\site-packages\twisted\conch\scripts\conch.py",
line 18,
 in ?
    import os, sys, getpass, struct, tty, fcntl, base64, signal, stat, errno
  File "C:\Python2.4\lib\tty.py", line 5, in ?
    from termios import *
ImportError: No module named termios


Moreover tkconch seems to be really slow...



Thanks and regards  Manlio Perillo



From david.anderson at calixo.net  Sat Apr 29 11:29:47 2006
From: david.anderson at calixo.net (David Anderson)
Date: Sat, 29 Apr 2006 19:29:47 +0200
Subject: [Twisted-Python] Crash when using XmlRPC during reactor shutdown
In-Reply-To: <20060429151006.GB16623@natulte.net>
References: <20060429151006.GB16623@natulte.net>
Message-ID: <20060429172947.GC16623@natulte.net>

* David Anderson <david.anderson at calixo.net> [2006-04-29 17:10:06]:
> I have been experiencing a crash when trying to use the XmlRPC query
> subsystem while the reactor is shutting down.

After a bit more fiddling, I found a functional workaround.  The trick
is indeed to let the xmlrpc Deferred fully terminate *before* the
reactor continues the shutdown, instead of continuing the shutdown
within the Deferred callback.

With that in mind, the new stopService makes the RPC call, but
creates, stores and returns a different Deferred.  The RPC Deferred
gets a callback that calls reactor.callLater to schedule the firing of
the reactor's Deferred in 0 seconds.

That lets the xmlrpc deferred complete and clean up, and immediately
after the reactor schedules its own shutdown callback, and all is
well.

Here is the new stopService code:

****************************************************************
****************************************************************
    def stopService(self):
        def handle_success(res):
            log.msg("Unregistration successful, and reactor won't crash")
            reactor.callLater(0, self._def.callback, True)
        def handle_error(e):
            log.msg("Unregistration failed...")
            reactor.callLater(0, self._def.callback, False)

        log.msg("Calling XmlRPC backend (and crashing)")
        p = Proxy('http://natulte.net/pub/fgs/RPC2.php')
        d = p.callRemote('fgsd.register',
                         "00000000000000000000000000000000",
                         "bleh")
        self._def = defer.Deferred()
        d.addCallbacks(handle_success, handle_error)
        return self._def
****************************************************************
****************************************************************

Nevertheless, this feels more like a workaround than a complete
solution.  What do you all think?

- Dave.



From mary-twisted at puzzling.org  Sat Apr 29 16:10:05 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 30 Apr 2006 08:10:05 +1000
Subject: [Twisted-Python] The End, also: documentation
In-Reply-To: <444FA28D.6000008@eepatents.com>
References: <E1FYe0V-0002SK-02@pyramid.twistedmatrix.com>
	<444FA28D.6000008@eepatents.com>
Message-ID: <20060429221005.GW6014@sourdust.home.puzzling.org>

On Wed, Apr 26, 2006, Ed Suominen wrote:
> I'm thinking about suggesting (gasp!) myself as your replacement.

...

> Comments welcome. Any positive ones will likely be viewed with suspicion
> and will raise pangs of regret at my making this rash posting. The
> negative ones will likely be viewed with relief, at least by the
> aforementioned logical, responsible part...

You'll notice I've reassigned some tickets to you and will continue to
do so over the next few days. I'm not sure how your logical and
responsible part will feel about this... you can grab me on IRC as
hypatia for clarification of anything I filed...

-Mary



From mary-twisted at puzzling.org  Sat Apr 29 16:24:47 2006
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sun, 30 Apr 2006 08:24:47 +1000
Subject: [Twisted-Python] planet.twistedmatrix.com
In-Reply-To: <20060427000150.GB23105@sourdust.home.puzzling.org>
References: <20060426022449.GC12864@sourdust.home.puzzling.org>
	<20060426070049.GA98650@ik.nu>
	<20060427000150.GB23105@sourdust.home.puzzling.org>
Message-ID: <20060429222447.GX6014@sourdust.home.puzzling.org>

On Thu, Apr 27, 2006, Mary Gardiner wrote:
> On Wed, Apr 26, 2006, Ralph Meijer wrote:
> > I've maintained Planet Jabber and Planet FOSDEM for a while now. It
> > would be no problem to add Planet Twisted to the same setup.
> 
> Thanks. I'll forward you the templates and config in the next day or
> two.

http://twistedmatrix.com/trac/ticket/1683 tracks the progress of the
handover, not that it should be a long one.

-Mary



From exarkun at twistedmatrix.com  Sat Apr 29 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Apr 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1146373501.65.7686140@twistedmatrix.com

Bug summary
______________________
Summary for 2006-04-23 through 2006-04-30
Bugs opened: 24    Bugs closed: 10  Total open bugs: 603 (+14)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:      +11  |Highest:  +0          |Conch:     +2          
|Enhancement:  +3  |High:     +0          |Core:      +5          
|Task:         +0  |Normal:  +14          |News:      +1          
                                          |Pb:        +1          
                                          |Pydoctor:  -1          
                                          |Trial:     +1          
                                          |Vfs:       +1          
                                          |Web2:      +0          
                                          |Website:   +3          
                                          |Words:     +1          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1663] Move Epsilon Version Stuff To Twisted (opened by radix) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1663

[#1666] Remove twisted.pb from the TwistedCore package (opened by exarkun) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1666

[#1668] Update release automation to work with recent version changes (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1668

                    ===== High =====
[#1667] processEnded better not be called from thread context (opened by andrea) (CLOSED, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1667

                    ===== Normal =====
[#1661] KeyError exception in twisted.internet.process.Process.childConnectionLost (opened by andrea)
    defect          core       http://twistedmatrix.com/trac/ticket/1661

[#1662] pauseProducing() should not block POLL_DISCONNECTED (opened by andrea)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1662

[#1664] Omit twisted.flow and twisted.pair from future sumo release (opened by exarkun) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1664

[#1665] test_cgi overrides default trial test timeout - it should not. (opened by exarkun) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1665

[#1669] Parser in domish does not keep unreferenced namespace declarations (opened by ff)
    defect          words      http://twistedmatrix.com/trac/ticket/1669

[#1670] Typo in enterprise.xhtml example: adabapi != adbapi (opened by jknight) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1670

[#1671] If you aren't logged in, there's no discoverable way I can see to file a new ticket. (opened by spiv)
    enhancement     website    http://twistedmatrix.com/trac/ticket/1671

[#1672] Make the twisted.vfs SFTP adapter's removeFile method translate NotFoundError into the appropriate SFTPError. (opened by spiv) (CLOSED, fixed)
    defect          vfs        http://twistedmatrix.com/trac/ticket/1672

[#1673] twisted.vfs.adapters.sftp doesn't translate VFSErrors consistently and completely (opened by spiv)
    defect          vfs        http://twistedmatrix.com/trac/ticket/1673

[#1674] test_conch, test_cftp and test_keys fail to import if Crypto.Cipher is not installed (opened by spiv)
    defect          conch      http://twistedmatrix.com/trac/ticket/1674

[#1675] failUnlessFailure is too liberal (opened by spiv)
    defect          trial      http://twistedmatrix.com/trac/ticket/1675

[#1676] iocp: 'ClientSocket' object has no attribute 'socket' (opened by ghazel)
    defect          core       http://twistedmatrix.com/trac/ticket/1676

[#1677] can't find manpages on the website (opened by synapsis)
    defect          website    http://twistedmatrix.com/trac/ticket/1677

[#1678] State of many Twisted subprojects is unclear (opened by synapsis)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1678

[#1679] conch script does not work on Windows (opened by synapsis)
    defect          conch      http://twistedmatrix.com/trac/ticket/1679

[#1680] problem with twisted.news.database.NewsStorageAugmentation constructor (opened by synapsis)
    defect          news       http://twistedmatrix.com/trac/ticket/1680

[#1681] twisted.python.usage Option Subcommands documentation is incomplete (opened by synapsis)
    defect          core       http://twistedmatrix.com/trac/ticket/1681

[#1682] not docstring but full documentation (opened by synapsis) (CLOSED, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1682

[#1683] Set up and host Planet Twisted (opened by hypatia)
    defect          website    http://twistedmatrix.com/trac/ticket/1683

[#1684] release newpb 0.0.1 ! (opened by warner)
    enhancement     pb         http://twistedmatrix.com/trac/ticket/1684



Closed Bugs
______________________
                    ===== Highest =====
[#1611] Documentation and examples still use deprecated components APIs (e.g. __implements__) (opened by itamarst, closed by radix, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1611

[#1666] Remove twisted.pb from the TwistedCore package (opened by exarkun, closed by exarkun, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1666

[#1663] Move Epsilon Version Stuff To Twisted (opened by radix, closed by radix, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1663

                    ===== High =====
[#1667] processEnded better not be called from thread context (opened by andrea, closed by exarkun, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1667

                    ===== Normal =====
[#1665] test_cgi overrides default trial test timeout - it should not. (opened by exarkun, closed by exarkun, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1665

[#1664] Omit twisted.flow and twisted.pair from future sumo release (opened by exarkun, closed by exarkun, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1664

[#1670] Typo in enterprise.xhtml example: adabapi != adbapi (opened by jknight, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1670

[#1653] Redirect documentation from private to public location (opened by jknight, closed by jknight, duplicate)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1653

[#1672] Make the twisted.vfs SFTP adapter's removeFile method translate NotFoundError into the appropriate SFTPError. (opened by spiv, closed by spiv, fixed)
    defect          vfs        http://twistedmatrix.com/trac/ticket/1672

[#1682] not docstring but full documentation (opened by synapsis, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1682





From itamar at itamarst.org  Sun Apr 30 07:17:59 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 30 Apr 2006 09:17:59 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r16688 - newpb: add
	NEWS/README, update Changelog for the 0.0.1 release
In-Reply-To: <E1Fa52x-0007PS-00@wolfwood>
References: <E1Fa52x-0007PS-00@wolfwood>
Message-ID: <1146403079.5796.0.camel@localhost.localdomain>

So... what will new protocol be called? pb2/newpb is confusing, I think.




From tlogic at gmail.com  Sun Apr 30 08:17:43 2006
From: tlogic at gmail.com (Haris Andrianakis)
Date: Sun, 30 Apr 2006 17:17:43 +0300
Subject: [Twisted-Python] ProducerConsumerProxy problem
Message-ID: <7a1008db0604300717m76b7217cg65ecef2aa6d5ce53@mail.gmail.com>

Hi,

I'm trying to setup a ProducerConsumerProxy between a
protocols.basic.FileSender producer and a TCP Protocol transport.
I have the following code:

fileObj = file('test.txt','r')
proxy = protocols.pcp.ProducerConsumerProxy(self.transport)
producer = protocols.basic.FileSender()
dd = producer.beginFileTransfer(fileObj, proxy)
dd.addCallback(self.uploadDone)
dd.addErrback(self.uploadError)
proxy.registerProducer(producer, False)

The problem is that only 16KB of data are transfered and then the
transfer pauses. Also if I use BasicProducerConsumerProxy no data at
all gets transfered. I think that the proxy doesn't call resumeProducing()
on
the FileSender producer and thats why the transfer seems to halt.

Any suggestions ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060430/57094efa/attachment.html>

From tlogic at gmail.com  Sun Apr 30 10:24:00 2006
From: tlogic at gmail.com (Haris Andrianakis)
Date: Sun, 30 Apr 2006 19:24:00 +0300
Subject: [Twisted-Python] [SOLVED] ProducerConsumerProxy problem
In-Reply-To: <7a1008db0604300717m76b7217cg65ecef2aa6d5ce53@mail.gmail.com>
References: <7a1008db0604300717m76b7217cg65ecef2aa6d5ce53@mail.gmail.com>
Message-ID: <7a1008db0604300924u65495a19x4887889231172253@mail.gmail.com>

I found the solution.

The problem was that by default our proxys producer is registered with
streaming = True
which is not what we want.
The following line will register our proxys producer with streaming = False
ProducerConsumerProxy.iAmStreaming = False
The rest is the same.
I think adding an argument to ProducerConsumerProxy.__init__ about streaming
would
be a good idea.
proxy = ProducerConsumerProxy(self.client.transport)
dd = FileSender().beginFileTransfer(self.outgoingFile, proxy)
dd.addCallback(self.uploadDone)
dd.addErrback(self.uploadError)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060430/3e04197f/attachment.html>

From phil at bubblehouse.org  Sun Apr 30 17:04:00 2006
From: phil at bubblehouse.org (Phil Christensen)
Date: Sun, 30 Apr 2006 19:04:00 -0400
Subject: [Twisted-Python] newpb status?
Message-ID: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>

Just out of curiosity, I wondered where things stood with newpb. I'm  
eagerly awaiting its arrival; apologies if there was a list  
announcement I missed. I got an overview from Brian a few months  
back, and it got me all pumped ;-)...

Is there any documentation available yet? Even just some example code  
would be nice; I'd like to get into newpb, even if it's in a state of  
flux. Unfortunately, I can't seem to find the time to lurk in IRC  
that much, so i kind of need some sort of asynchronous instruction...

I've certainly got no problems with reading in-code docs, but I would  
definitely appreciate a little bit of a starter howto or something...

-phil



From johann.borck at densedata.com  Sun Apr 30 18:46:47 2006
From: johann.borck at densedata.com (Johann Borck)
Date: Mon, 01 May 2006 02:46:47 +0200
Subject: [Twisted-Python] newpb status?
In-Reply-To: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>
References: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>
Message-ID: <44555A77.7000304@densedata.com>

Phil Christensen wrote:

> Just out of curiosity, I wondered where things stood with newpb. I'm 
> eagerly awaiting its arrival; apologies if there was a list 
> announcement I missed. I got an overview from Brian a few months 
> back, and it got me all pumped ;-)...
>
> Is there any documentation available yet? Even just some example code 
> would be nice; I'd like to get into newpb, even if it's in a state of 
> flux. Unfortunately, I can't seem to find the time to lurk in IRC 
> that much, so i kind of need some sort of asynchronous instruction...
>
> I've certainly got no problems with reading in-code docs, but I would 
> definitely appreciate a little bit of a starter howto or something...

twisted/doc/pb/using-pb.xhtml introduces the new concepts, there're some
examples, and iirc there's been an 0.01 release recently.
Johann

>
> -phil
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>




From tcj25 at cam.ac.uk  Sun Apr 30 19:09:00 2006
From: tcj25 at cam.ac.uk (Terry Jones)
Date: Mon, 1 May 2006 03:09:00 +0200
Subject: [Twisted-Python] Status of components, protocols, etc in Twisted
Message-ID: <17493.24492.57227.748654@terry.jones.tc>

I'm trying to better understand componentized architectures, protocols,
adaptors etc., as done in Python. I've been reading around and have a few
questions about the state of play. It would be good to understand where
things are, and where they're heading.

It seems there are (or were) 3 efforts to provide components, protocols,
adaptors, etc.: Zope, Twisted, PyProtocols.

It looks like Twisted is now using the zope module to do this. But I also
ran across discussion (on this list, in Feb 2004, I think), about possibly
migrating zope's use of components to PyProtocols. Did that happen?

I do like the sound of PyProtocols (and PEAK in general), but as someone
else said, and as Philip wrote, the documentation isn't really focused on
easing in a newbie.  A couple of points on those docs, I think it would be
good if someone set out how you would go about building something small
(i.e., small concrete examples, not "big" more abstract ones). Yes, that
someone could be me, agreed. Also, the docs say that it is intended that
_all_ uses of type(), isinstance() etc., can/should be replaced. A few use
cases would be helpful - how are we supposed to replace those things? I do
have the impression that one should have a clean componentized design from
the beginning and thereby never need or want to resort to introspection. If
that's the case, it might be worth saying, as the docs leave one wondering
if there's not perhaps some formulaic way to rewrite one's code to do the
Right Thing.  It's not that simple though, right?

I'd also be happy to use the standard Twisted (i.e., zope) approach too.

Do people have an opinion about which is better to use? Does it make much
difference if you're just building a simple app with a handful of
components you'd like to be able to swap in & out easily?

I think the Twisted evolution of finger pages are really good, with a
couple of minor weak points (e.g., highlighting new code from example to
example). It's amazing what you can get done in a couple of hundred lines
of Twisted code. BTW, there's a mention of __implements__ whereas
implements() is used, which I guess is a hang over from an earlier version?
This is on
http://twistedmatrix.com/projects/core/documentation/howto/tutorial/components.html
I guess someone will look for others. Grepping __implements__ gets a lot of
hits in the distributed Twisted-2.2.0 docs (e.g., in doc/howto/*.html).

Anyway, thanks for all the docs and code. I'm happy to put some work into
making improvements where I can.

Terry



From glyph at divmod.com  Sun Apr 30 19:27:29 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 30 Apr 2006 21:27:29 -0400
Subject: [Twisted-Python] Status of components, protocols, etc in Twisted
In-Reply-To: <17493.24492.57227.748654@terry.jones.tc>
Message-ID: <20060501012729.22481.359548894.divmod.quotient.20053@ohm>

On Mon, 1 May 2006 03:09:00 +0200, Terry Jones <tcj25 at cam.ac.uk> wrote:
>I'm trying to better understand componentized architectures, protocols,
>adaptors etc., as done in Python. I've been reading around and have a few
>questions about the state of play. It would be good to understand where
>things are, and where they're heading.
>
>It seems there are (or were) 3 efforts to provide components, protocols,
>adaptors, etc.: Zope, Twisted, PyProtocols.

Today, Twisted simply provides a single global registry on top of Zope Interface's normal layer.  Twisted's original interface implementation was derivative of Zope's and introduced some horrible bugs and some interesting ideas; the interesting ideas were incorporated into Zope, and the horrible bugs left behind.

>It looks like Twisted is now using the zope module to do this. But I also
>ran across discussion (on this list, in Feb 2004, I think), about possibly
>migrating zope's use of components to PyProtocols. Did that happen?

No.  Some people liked PyProtocols better, but we had the discussion, we made the decision, and Zope Interface has worked out very well.



From radix at twistedmatrix.com  Sun Apr 30 20:58:39 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 30 Apr 2006 22:58:39 -0400
Subject: [Twisted-Python] newpb status?
In-Reply-To: <44555A77.7000304@densedata.com>
References: <479EDA06-F19E-4344-B644-2D22B052F575@bubblehouse.org>
	<44555A77.7000304@densedata.com>
Message-ID: <60ed19d40604301958k3bb2c767ofddeb9efd88de5fb@mail.gmail.com>

On 4/30/06, Johann Borck <johann.borck at densedata.com> wrote:

> twisted/doc/pb/using-pb.xhtml introduces the new concepts, there're some
> examples, and iirc there's been an 0.01 release recently.


The release isn't out yet; I'm currently working on another (small) round of
improvements to the release infrastructure and hopefully a lot of stuff will
be released soon.


--
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060430/79a75a4f/attachment.html>

