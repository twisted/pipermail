<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] using a reactor in a loop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20using%20a%20reactor%20in%20a%20loop&In-Reply-To=200703010921.51323.brown%40esteem.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014919.html">
   <LINK REL="Next"  HREF="014923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] using a reactor in a loop</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20using%20a%20reactor%20in%20a%20loop&In-Reply-To=200703010921.51323.brown%40esteem.com"
       TITLE="[Twisted-Python] using a reactor in a loop">exarkun at divmod.com
       </A><BR>
    <I>Thu Mar  1 12:32:51 EST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="014919.html">[Twisted-Python] using a reactor in a loop
</A></li>
        <LI>Next message: <A HREF="014923.html">[Twisted-Python] using a reactor in a loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14920">[ date ]</a>
              <a href="thread.html#14920">[ thread ]</a>
              <a href="subject.html#14920">[ subject ]</a>
              <a href="author.html#14920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 1 Mar 2007 09:21:50 -0800, Tom Brown &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">brown at esteem.com</A>&gt; wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>I am trying to use a reactor in a loop. The application will go through the
</I>&gt;<i>loop twice then hang when trying to stop the protocol. Here's my loop:
</I>&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i>I see the 'reactor stopped' get printed out twice through the loop but I don't
</I>&gt;<i>see 'running server' get printed out a third time. So, reactor.run() is not
</I>&gt;<i>returning. I must be missing something or going at this completely wrong. Any
</I>&gt;<i>suggestions?
</I>
The simple thing you're missing is that reactors can't be restarted. :)  One
way you can restructure your program to avoid needing to do this is to put
the body of your loop (minus reactor.run()) into a function which returns a
Deferred and to replace the call to reactor.stop() with code which fires that
Deferred.  You can set up callbacks on this Deferred to execute the whole
thing again if necessary.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014919.html">[Twisted-Python] using a reactor in a loop
</A></li>
	<LI>Next message: <A HREF="014923.html">[Twisted-Python] using a reactor in a loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14920">[ date ]</a>
              <a href="thread.html#14920">[ thread ]</a>
              <a href="subject.html#14920">[ subject ]</a>
              <a href="author.html#14920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
