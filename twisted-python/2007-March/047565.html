<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] suggestion for tracking down cause of 2	bugs	sought: possibly threads / defer.DeferredSemaphore ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20suggestion%20for%20tracking%20down%20cause%20of%202%0A%09bugs%09sought%3A%20possibly%20threads%20/%20defer.DeferredSemaphore%20%3F&In-Reply-To=%3C00e201c76bfc%24188ddf30%2449a99d90%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047564.html">
   <LINK REL="Next"  HREF="047566.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] suggestion for tracking down cause of 2	bugs	sought: possibly threads / defer.DeferredSemaphore ?</H1>
    <B>Alec Matusis</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20suggestion%20for%20tracking%20down%20cause%20of%202%0A%09bugs%09sought%3A%20possibly%20threads%20/%20defer.DeferredSemaphore%20%3F&In-Reply-To=%3C00e201c76bfc%24188ddf30%2449a99d90%24%40com%3E"
       TITLE="[Twisted-Python] suggestion for tracking down cause of 2	bugs	sought: possibly threads / defer.DeferredSemaphore ?">matusis at matusis.com
       </A><BR>
    <I>Wed Mar 21 15:01:27 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047564.html">[Twisted-Python] suggestion for tracking down cause of 2 bugs	sought: possibly threads / defer.DeferredSemaphore ?
</A></li>
        <LI>Next message (by thread): <A HREF="047566.html">[Twisted-Python] hardcoded max in threadpool or connection pool ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47565">[ date ]</a>
              <a href="thread.html#47565">[ thread ]</a>
              <a href="subject.html#47565">[ subject ]</a>
              <a href="author.html#47565">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; Is there any way to profile memory usage by twisted
</I>&gt;<i> in a
</I>&gt;<i> &gt; granular fashion ?  I'd like to figure out where this memory usage
</I>&gt;<i> &gt; is ( it grows steadily to ~1.7gb after 8 hours ).
</I>
We found twisted manhole very useful for this. Inspect all your objects via
manhole on the production server.
Also, in one instance, we had to force python garbage collector to collect
every 10 min: for some reason: without this, the RSS size just grew and
grew...

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python-bounces at twistedmatrix.com</A> [mailto:twisted-python-
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">bounces at twistedmatrix.com</A>] On Behalf Of Jonathan Vanasco
</I>&gt;<i> Sent: Wednesday, March 21, 2007 12:34 PM
</I>&gt;<i> To: Twisted general discussion
</I>&gt;<i> Subject: Re: [Twisted-Python] suggestion for tracking down cause of 2
</I>&gt;<i> bugs sought: possibly threads / defer.DeferredSemaphore ?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Mar 21, 2007, at 11:32 AM, Jonathan Vanasco wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; 	2)
</I>&gt;<i> &gt; 		I'm experiencing an obscene amount of process growth.  I'm
</I>&gt;<i> fairly
</I>&gt;<i> &gt; certain that its from constant errors in urllib2 , which has been
</I>&gt;<i> &gt; nothing of a nightmare with countless known bugs and patches
</I>&gt;<i> &gt; ( downloading takes place via Mechanize , which is wrapped via
</I>&gt;<i> &gt; urllib2 ), and makes me consider just wrapping wget or curl.   but
</I>&gt;<i> &gt; this could very well be threading related.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 		Question:
</I>&gt;<i> &gt; 			Is there any way to profile memory usage by twisted
</I>&gt;<i> in a
</I>&gt;<i> &gt; granular fashion ?  I'd like to figure out where this memory usage
</I>&gt;<i> &gt; is ( it grows steadily to ~1.7gb after 8 hours ).
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> I just came across this:
</I>&gt;<i> 	From: 	  <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mwl at point45.com</A>
</I>&gt;<i> 	Subject: 	Re: [Twisted-Python] questions about large db
</I>queries
&gt;<i> and
</I>&gt;<i> memory leak
</I>&gt;<i> 	Date: 	February 8, 2007 8:28:59 AM EST
</I>&gt;<i> 	...
</I>&gt;<i> 	If you're not running Python &gt;= 2.5.0 this might be relevant:
</I>&gt;<i> 	<A HREF="http://evanjones.ca/python-memory.html">http://evanjones.ca/python-memory.html</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> i was on 2.4, upping to 2.5 solved that issue.  incremental growth
</I>&gt;<i> of .2mb / thread instance ( which ate 1.7gb of ram in an hour or
</I>&gt;<i> so ) , has been replaced by a steady 18-25mb daemon
</I>&gt;<i> 
</I>&gt;<i> my machine is responsive again.
</I>&gt;<i> 
</I>&gt;<i> // Jonathan Vanasco
</I>&gt;<i> 
</I>&gt;<i> | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> | SyndiClick.com
</I>&gt;<i> | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> |      FindMeOn.com - The cure for Multiple Web Personality Disorder
</I>&gt;<i> |      Web Identity Management and 3D Social Networking
</I>&gt;<i> | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> |      RoadSound.com - Tools For Bands, Stuff For Fans
</I>&gt;<i> |      Collaborative Online Management And Syndication Tools
</I>&gt;<i> | - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> - - - - - - - - - - - - - - - - - - -
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047564.html">[Twisted-Python] suggestion for tracking down cause of 2 bugs	sought: possibly threads / defer.DeferredSemaphore ?
</A></li>
	<LI>Next message (by thread): <A HREF="047566.html">[Twisted-Python] hardcoded max in threadpool or connection pool ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47565">[ date ]</a>
              <a href="thread.html#47565">[ thread ]</a>
              <a href="subject.html#47565">[ subject ]</a>
              <a href="author.html#47565">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
