<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Migrate Asyncore to Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Migrate%20Asyncore%20to%20Twisted&In-Reply-To=%3Ca7964aae0703130803m1c36e166qd9e88ddf33fc4e9%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047502.html">
   <LINK REL="Next"  HREF="047505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Migrate Asyncore to Twisted</H1>
    <B>Sean Roark</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Migrate%20Asyncore%20to%20Twisted&In-Reply-To=%3Ca7964aae0703130803m1c36e166qd9e88ddf33fc4e9%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Migrate Asyncore to Twisted">srock258 at gmail.com
       </A><BR>
    <I>Tue Mar 13 09:03:19 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047502.html">[Twisted-Python] Migrate Asyncore to Twisted
</A></li>
        <LI>Next message (by thread): <A HREF="047505.html">[Twisted-Python] Migrate Asyncore to Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47504">[ date ]</a>
              <a href="thread.html#47504">[ thread ]</a>
              <a href="subject.html#47504">[ subject ]</a>
              <a href="author.html#47504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Jian. I am actually not sure if it is my protocol that is complicated
or if the way in which I want to pass the data that is complicated. This is
what I'm doing.

I have two devices that both send and recieve binary strings. Each device
formats the binary messages in a completely different manner, but
abstractly, they basicly contain the same information just in different
formats. I need to recieve the data, parse it, translate it, then repack it
into this different raw format and send it to another destination. All this
works just fine using asyncore dispatchers but I have created my own way of
passing the messages between the different modules. Each module I have
(parse, translate, pack, recieve, send) is wrapped by two Queue's, one
taking input and the other taking output. I connect the modules by replacing
one instance's output Queue with another's input Queue. This way each module
is a thread that simply blocks on the input Queue. When the Parse instance
finishes parsing data it puts it on the output Queue which is actually the
Translate modules input Queue. Since everything needs to happen in a nice
linear manner this works great.

But, this means I am not using callbacks or anything. Instead I would need
to wrap the Twisted protocol in my Queue protocol. This seems straight
forward enough, but I don't have much time to make this conversion (charge
number is running out!) which is why I would love to see an example of the
asyncore dispatcher to twisted protocol conversion. It would go along way to
helping me quickly map my existing code to twisted style code.

My reason's for switching to Twisted are for the future. This may need a web
interface for configuration and monitoring in the near future. Also,
asyncore has a myriad of issues on Win32 but we want the program to work on
both *nix and windows, I'm hoping Twisted helps. Furthermore, the Twisted
libraries for making my system an application look very appealing as a means
to ease deployment.

Thanks,

Sean

On 3/13/07, jian wu &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hellojianwu at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi Sean,
</I>&gt;<i>
</I>&gt;<i> I had some experience to write a simple python test simulator for my
</I>&gt;<i> java network
</I>&gt;<i> application using Apache Mina for a text line based protocol
</I>&gt;<i>
</I>&gt;<i> At first I used asyncore.async_chat, then I moved to
</I>&gt;<i> twisted.protocols.basic.LineReceiver
</I>&gt;<i> since I need async multi-thread behavior. For me, it is
</I>&gt;<i> straight-forward regarding handling the protocol when moving from
</I>&gt;<i> async_chat to LineReceiver.
</I>&gt;<i>
</I>&gt;<i> And, asyncore.disptacher is just replaced with Twisted reactor and
</I>&gt;<i> Factory or TCPServer
</I>&gt;<i> if you want to write a Twisted Application.
</I>&gt;<i>
</I>&gt;<i> If you have a very complicated protocol, it might be totally different
</I>&gt;<i> from my experience.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i> Jian
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 3/12/07, Sean Roark &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">srock258 at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; I would love to migrate my asyncore based applications to Twisted but
</I>&gt;<i> the
</I>&gt;<i> &gt; learning curve seems quite steep. Anybody have a good tutorial?
</I>&gt;<i> Migrating
</I>&gt;<i> &gt; asyncore.dispatcher objects to twisted protocols examples would be
</I>&gt;<i> awesome.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sean Roark
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Twisted-Python mailing list
</I>&gt;<i> &gt; <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>


-- 

Sean Roark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20070313/316b67de/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047502.html">[Twisted-Python] Migrate Asyncore to Twisted
</A></li>
	<LI>Next message (by thread): <A HREF="047505.html">[Twisted-Python] Migrate Asyncore to Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47504">[ date ]</a>
              <a href="thread.html#47504">[ thread ]</a>
              <a href="subject.html#47504">[ subject ]</a>
              <a href="author.html#47504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
