<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] 2 threads questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%202%20threads%20questions&In-Reply-To=%3C20070327163030.18920.1641290797.divmod.quotient.6019%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047592.html">
   <LINK REL="Next"  HREF="047597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] 2 threads questions</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%202%20threads%20questions&In-Reply-To=%3C20070327163030.18920.1641290797.divmod.quotient.6019%40ohm%3E"
       TITLE="[Twisted-Python] 2 threads questions">exarkun at divmod.com
       </A><BR>
    <I>Tue Mar 27 10:30:30 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047592.html">[Twisted-Python] 2 threads questions
</A></li>
        <LI>Next message (by thread): <A HREF="047597.html">[Twisted-Python] 2 threads questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47593">[ date ]</a>
              <a href="thread.html#47593">[ thread ]</a>
              <a href="subject.html#47593">[ subject ]</a>
              <a href="author.html#47593">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 27 Mar 2007 12:03:44 -0400, Jonathan Vanasco &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at 2xlp.com</A>&gt; wrote:
&gt;<i>i have a threaded daemon which occasionally hangs because of some  stalling 
</I>&gt;<i>in the threadpool
</I>&gt;<i>
</I>&gt;<i>a-      whats the best way to shut it down ?
</I>&gt;<i>         attempts to ctl-c / kill it seem to be interpreted by a random 
</I>&gt;<i>thread.  the only way to kill it is a kill -9
</I>&gt;<i>         the python threading docs said that was the expected behavior, and 
</I>&gt;<i>that it could be avoided by using signal.
</I>&gt;<i>         I figured twisted might have something in it already to handle 
</I>&gt;<i>shutting down a reactor with active threads.  the threads docs for  twisted 
</I>&gt;<i>are a little light.
</I>&gt;<i>
</I>&gt;<i>b-      i'm trying to figure out the cause of the stalling in the threadpool
</I>&gt;<i>         from the status messages i'm printing, I'm seeing the main python 
</I>&gt;<i>code firing fine, but the threadpool is just stuck - nothing  dispatched to 
</I>&gt;<i>it seems to clean up
</I>&gt;<i>         i wonder if it might be related to a few tickets i've seen
</I>&gt;<i>                 <A HREF="http://twistedmatrix.com/trac/ticket/2448">http://twistedmatrix.com/trac/ticket/2448</A>
</I>&gt;<i>                 <A HREF="http://trac.edgewall.org/ticket/3923">http://trac.edgewall.org/ticket/3923</A>
</I>&gt;<i>
</I>&gt;<i>         i'm trying to figure out a way to reliably test this.  i've got a 
</I>&gt;<i>ssh manhole running via conch ( and instructions from the twisted book )
</I>&gt;<i>         can anyone suggest a good way to test and try to debug what is going 
</I>&gt;<i>on?  i'm extremely uninformed when it comes to python threads.
</I>&gt;<i>
</I>
Python 2.5 includes sys._current_frames() which returns a mapping from thread
identifiers to the frame objects which you might be able to use to learn what
is going on.  You can call this from your manhole prompt when you notice the
system to have hung.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047592.html">[Twisted-Python] 2 threads questions
</A></li>
	<LI>Next message (by thread): <A HREF="047597.html">[Twisted-Python] 2 threads questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47593">[ date ]</a>
              <a href="thread.html#47593">[ thread ]</a>
              <a href="subject.html#47593">[ subject ]</a>
              <a href="author.html#47593">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
