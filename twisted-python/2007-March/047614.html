<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Simultaneous Blocking Operations and Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Simultaneous%20Blocking%20Operations%20and%20Twisted&In-Reply-To=%3C20070330111815.18920.1122184131.divmod.quotient.6574%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047613.html">
   <LINK REL="Next"  HREF="047615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Simultaneous Blocking Operations and Twisted</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Simultaneous%20Blocking%20Operations%20and%20Twisted&In-Reply-To=%3C20070330111815.18920.1122184131.divmod.quotient.6574%40ohm%3E"
       TITLE="[Twisted-Python] Simultaneous Blocking Operations and Twisted">exarkun at divmod.com
       </A><BR>
    <I>Fri Mar 30 05:18:15 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047613.html">[Twisted-Python] Simultaneous Blocking Operations and Twisted
</A></li>
        <LI>Next message (by thread): <A HREF="047615.html">[Twisted-Python] Simultaneous Blocking Operations and Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47614">[ date ]</a>
              <a href="thread.html#47614">[ thread ]</a>
              <a href="subject.html#47614">[ subject ]</a>
              <a href="author.html#47614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 30 Mar 2007 12:01:27 +0100, Matthew Glubb &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matt at zgroupplc.com</A>&gt; wrote:
&gt;<i>Hi All,
</I>&gt;<i>
</I>&gt;<i>I am new to twisted and python. I am evaluating the possibility of  using it 
</I>&gt;<i>for an application that I am writing. The framework looks  very 
</I>&gt;<i>comprehensive (I am also enjoying the python language :) but I  have some 
</I>&gt;<i>questions regarding deferred objects and the twisted web  server itself.
</I>&gt;<i>
</I>&gt;<i>My application essentially comprises the following:
</I>&gt;<i>
</I>&gt;<i>1. HTTP request is received by the server.
</I>&gt;<i>2. Server creates a listening socket on an arbitrary port and waits  for n 
</I>&gt;<i>seconds for incoming data
</I>&gt;<i>3. Data (or timeout message) is returned to the client by way of the  HTTP 
</I>&gt;<i>response.
</I>&gt;<i>
</I>&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i>I was wondering whether it is feasible to use the twisted framework  for 
</I>&gt;<i>this application. I have been playing with the framework and I  can't see a 
</I>&gt;<i>way to service what are essentially thousands of requests  that perform 
</I>&gt;<i>blocking operations simultaneously. I have noted the  twisted documentation 
</I>&gt;<i>on threads but I was hoping, for the sake of my  sanity, that I might be 
</I>&gt;<i>able to manage this using an asynchronous  approach. Essentially, what I 
</I>&gt;<i>think I am looking for is a waitFor()  on a deferred callback.
</I>
There's no way to block until an event occurs.  Blocking would prevent the
reactor from noticing the event or informing you about it. :)

Fortunately you don't need to resort to threads, either.

The conventional way to do this would be to write a function which sets up
the listening port and returns a Deferred which will eventually be called
back with the result (presumably the data which some client will eventually
send to it).  Then, using reactor.callLater, set up a timed call which will
tear down the listening port after the timeout has expired and errback the
Deferred to indicate no data arrived within the timeout period.

Actually, that's the only way to do it. :P  The conventional implementation
would be to do this using explicit callback functions in the style you may
have noticed in many Twisted examples.  There are other ways which allow you
to write code in a different style which some people prefer, but it's just
a difference in spelling, the same thing is happening underneath.

&gt;<i>
</I>&gt;<i>As an aside, is it possible to compile platform specific python 
</I>&gt;<i>applications as small binaries? Or does the interpreter (is it  required?) 
</I>&gt;<i>mean the memory consumption is prohibitive?
</I>
Generally the only thing that's possible is to wrap up the whole application
with the whole interpreter and some subset of the standard library in an
executable.  This doesn't sound much like what you're after, though.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047613.html">[Twisted-Python] Simultaneous Blocking Operations and Twisted
</A></li>
	<LI>Next message (by thread): <A HREF="047615.html">[Twisted-Python] Simultaneous Blocking Operations and Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47614">[ date ]</a>
              <a href="thread.html#47614">[ thread ]</a>
              <a href="subject.html#47614">[ subject ]</a>
              <a href="author.html#47614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
