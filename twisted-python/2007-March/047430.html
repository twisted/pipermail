<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] using a reactor in a loop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20using%20a%20reactor%20in%20a%20loop&In-Reply-To=%3C200703011046.10873.brown%40esteem.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047429.html">
   <LINK REL="Next"  HREF="047433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] using a reactor in a loop</H1>
    <B>Tom Brown</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20using%20a%20reactor%20in%20a%20loop&In-Reply-To=%3C200703011046.10873.brown%40esteem.com%3E"
       TITLE="[Twisted-Python] using a reactor in a loop">brown at esteem.com
       </A><BR>
    <I>Thu Mar  1 11:46:10 MST 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047429.html">[Twisted-Python] using a reactor in a loop
</A></li>
        <LI>Next message (by thread): <A HREF="047433.html">[Twisted-Python] using a reactor in a loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47430">[ date ]</a>
              <a href="thread.html#47430">[ thread ]</a>
              <a href="subject.html#47430">[ subject ]</a>
              <a href="author.html#47430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday 01 March 2007 09:42, L. Daniel Burr wrote:
&gt;<i> Hi Tom,
</I>&gt;<i>
</I>&gt;<i> On Thu, 01 Mar 2007 11:21:50 -0600, Tom Brown &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">brown at esteem.com</A>&gt; wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am trying to use a reactor in a loop. The application will go through
</I>&gt;<i> &gt; the
</I>&gt;<i> &gt; loop twice then hang when trying to stop the protocol. Here's my loop:
</I>&gt;<i>
</I>&gt;<i> The reactor provides an event loop already, so I am confused as to why
</I>&gt;<i> you are trying to run it inside another loop.  Based on the code you
</I>&gt;<i> have posted here, I can't ascertain what your goal is.
</I>&gt;<i>
</I>&gt;<i> Generally speaking, you'd be better served by using the reactor's
</I>&gt;<i> loop instead of your own, and stopping/starting your listeners,
</I>&gt;<i> rather than the reactor itself.
</I>&gt;<i>
</I>&gt;<i> Also, stopping the reactor from within a protocol is probably
</I>&gt;<i> not ideal.  That's sort of like telling your OS to shut down
</I>&gt;<i> when you're done saving a file ;)
</I>
Thanks for your reply.

My goal is this:
1) do specific tasks
2) run the server and wait for a connection
3) when a connection is made, do tasks as instructed by the client in the 
AqapProtocol code.
4) when connection is lost, close server and go back to 1)

Shutting down the server is not necessary if I could get past the 
reactor.run(). A previous post suggested I use deferreds. So, that is 
probably what I need to. I just need to learn how to use them.

Thanks,
Tom


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047429.html">[Twisted-Python] using a reactor in a loop
</A></li>
	<LI>Next message (by thread): <A HREF="047433.html">[Twisted-Python] using a reactor in a loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47430">[ date ]</a>
              <a href="thread.html#47430">[ thread ]</a>
              <a href="subject.html#47430">[ subject ]</a>
              <a href="author.html#47430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
