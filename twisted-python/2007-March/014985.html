<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Running FTP server as a thread (as opposed to	twistd -f ftp.tap)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Running%20FTP%20server%20as%20a%20thread%20%28as%20opposed%20to%0A%09twistd%20-f%20ftp.tap%29&In-Reply-To=20070312164912.30866.qmail%40web50605.mail.re2.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014984.html">
   <LINK REL="Next"  HREF="014982.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Running FTP server as a thread (as opposed to	twistd -f ftp.tap)</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Running%20FTP%20server%20as%20a%20thread%20%28as%20opposed%20to%0A%09twistd%20-f%20ftp.tap%29&In-Reply-To=20070312164912.30866.qmail%40web50605.mail.re2.yahoo.com"
       TITLE="[Twisted-Python] Running FTP server as a thread (as opposed to	twistd -f ftp.tap)">exarkun at divmod.com
       </A><BR>
    <I>Mon Mar 12 16:51:50 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="014984.html">[Twisted-Python] Running FTP server as a thread (as opposed to	twistd -f ftp.tap)
</A></li>
        <LI>Next message: <A HREF="014982.html">[Twisted-Python] Migrate Asyncore to Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14985">[ date ]</a>
              <a href="thread.html#14985">[ thread ]</a>
              <a href="subject.html#14985">[ subject ]</a>
              <a href="author.html#14985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 12 Mar 2007 09:49:12 -0700 (PDT), Andy Leszczynski &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">leszczynscy at yahoo.com</A>&gt; wrote:
&gt;<i>Hi,
</I>&gt;<i>
</I>&gt;<i>I need to launch the twisted based FTP server as a part of my application. I could spawn/control a separate process with subprocess/popen2/etc. However for other reasons I would rather prefer to have it as a separate thread of my app. The question is how to convert mktap generated file into a piece of python code.
</I>
You can't run just an FTP server in a thread, but you can run the whole
reactor in a thread.  If the rest of your application doesn't use Twisted,
this might make sense.  Of course, if the rest of your application does
use Twisted, you don't need to get threads involved.

The threaded approach looks something vaguely like this (untested):

  from threading import Thread

  from twisted.tap.ftp import makeService
  from twisted.internet import reactor

  svc = makeService({configuration options})
  reactor.callWhenRunning(svc.startService)
  Thread(target=reactor.run, args=(False,)).start()

  ...
  


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014984.html">[Twisted-Python] Running FTP server as a thread (as opposed to	twistd -f ftp.tap)
</A></li>
	<LI>Next message: <A HREF="014982.html">[Twisted-Python] Migrate Asyncore to Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14985">[ date ]</a>
              <a href="thread.html#14985">[ thread ]</a>
              <a href="subject.html#14985">[ subject ]</a>
              <a href="author.html#14985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
