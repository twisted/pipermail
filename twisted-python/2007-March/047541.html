<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] using stdio with Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20using%20stdio%20with%20Twisted&In-Reply-To=%3C20070320111355.18920.2001733244.divmod.quotient.4196%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="047540.html">
   <LINK REL="Next"  HREF="047546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] using stdio with Twisted</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20using%20stdio%20with%20Twisted&In-Reply-To=%3C20070320111355.18920.2001733244.divmod.quotient.4196%40ohm%3E"
       TITLE="[Twisted-Python] using stdio with Twisted">exarkun at divmod.com
       </A><BR>
    <I>Tue Mar 20 05:13:55 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="047540.html">[Twisted-Python] using stdio with Twisted
</A></li>
        <LI>Next message (by thread): <A HREF="047546.html">[Twisted-Python] using stdio with Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47541">[ date ]</a>
              <a href="thread.html#47541">[ thread ]</a>
              <a href="subject.html#47541">[ subject ]</a>
              <a href="author.html#47541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 19 Mar 2007 19:16:23 -0700, Neurophyre &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">listbox at evernex.com</A>&gt; wrote:
&gt;<i>Hello,
</I>&gt;<i>
</I>&gt;<i>I'm building an old-school BBS client using Twisted.  It needs to  take user 
</I>&gt;<i>input, parse it, send messages over the wire and get  messages back and 
</I>&gt;<i>display them.. the usual.  I'm just now getting to  writing the UI and have 
</I>&gt;<i>run into a couple problems.
</I>&gt;<i>
</I>&gt;<i>First, whether using protocol.Protocol or  protocols.basic.LineReceiver (in 
</I>&gt;<i>raw mode) with  internet.stdio.StandardIO, I have the same problem: the 
</I>&gt;<i>dataReceived  (or rawDataReceived in the case of LineReceiver in raw mode) 
</I>&gt;<i>functions are only called after one types some text and hits return.   I 
</I>&gt;<i>need to process input on a keystroke level, since there will be  prompts at 
</I>&gt;<i>which a single keystroke will do things.
</I>&gt;<i>
</I>&gt;<i>Second, I was looking at  twisted.conch.insults.insults.TerminalProtocol 
</I>&gt;<i>after some Googling --  does anyone know if I can just drop this in in place 
</I>&gt;<i>of  protocols.basic.LineReceiver (or whatever) and have it work properly, 
</I>&gt;<i>or does it require some special invocation and/or grab stdio by itself?
</I>
Take a look at what twisted.conch.stdio.runWithProtocol does to the terminal.
That's more or less what's necessary to kick it out of line buffered mode and
give you each keystroke as it arrives.

TerminalProtocol is meant to be used with ServerProtocol from the same module.
ServerProtocol will interpret various terminal control sequences and translate
them into calls onto whatever ITerminalProtocol you supply to it.  It probably
won't be much use to use LineReceiver, since keystrokeReceived will be called
with things like backspace and home and other things LineReceiver has no idea
what to do with.  There are a couple other things you might be interested in
though, like twisted.conch.recvline.RecvLine or a class in a project I've been
working on a bit on and off, invective.widgets.LineInputWidget, which uses
insults' widget system to implement a more re-usable line input class (you can
find invective in my Twisted sandbox,

  <A HREF="http://twistedmatrix.com/trac/browser/sandbox/exarkun/invective/">http://twistedmatrix.com/trac/browser/sandbox/exarkun/invective/</A>

), which will hopefully move back into Twisted at some point.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="047540.html">[Twisted-Python] using stdio with Twisted
</A></li>
	<LI>Next message (by thread): <A HREF="047546.html">[Twisted-Python] using stdio with Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47541">[ date ]</a>
              <a href="thread.html#47541">[ thread ]</a>
              <a href="subject.html#47541">[ subject ]</a>
              <a href="author.html#47541">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
