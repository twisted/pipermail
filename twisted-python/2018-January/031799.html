<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Circular references in TLSMemoryBIOProtocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Circular%20references%20in%20TLSMemoryBIOProtocol&In-Reply-To=%3CetPan.5a5fc061.7b6a224a.73ae%40me.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="031798.html">
   <LINK REL="Next"  HREF="031800.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Circular references in TLSMemoryBIOProtocol</H1>
    <B>L. Daniel Burr</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Circular%20references%20in%20TLSMemoryBIOProtocol&In-Reply-To=%3CetPan.5a5fc061.7b6a224a.73ae%40me.com%3E"
       TITLE="[Twisted-Python] Circular references in TLSMemoryBIOProtocol">ldanielburr at me.com
       </A><BR>
    <I>Wed Jan 17 14:30:09 MST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="031798.html">[Twisted-Python] Circular references in TLSMemoryBIOProtocol
</A></li>
        <LI>Next message (by thread): <A HREF="031800.html">[Twisted-Python] Circular references in TLSMemoryBIOProtocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31799">[ date ]</a>
              <a href="thread.html#31799">[ thread ]</a>
              <a href="subject.html#31799">[ subject ]</a>
              <a href="author.html#31799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Ilya,

On January 17, 2018 at 3:09:52 PM, Ilya Skriblovsky (<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ilyaskriblovsky at gmail.com</A>) wrote:

[Trimmed for context]

So using weakrefs makes all protocol instances and instances of TLSMemoryBIOProtocol to be deleted right after a connection is closed. Less circular-dependent objects → less GC invocations → better performance. And I see much nicer RAM usage pattern in my app.

Is it possible to fix circular deps in some more clean way? Can this be solved at all while user's code is able to try to touch both sides of circular dep after connection is closed? Please advice


Personally, I don’t mind the weaker approach, but if you wanted to be completely explicit, I’d look at modifying the connectionLost method of both the protocol and the protocol wrapper to break circular references.

Thanks for consideration

Best regards,
    Ilya

Hope this helps,

Daniel
--
L. Daniel Burr
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">ldanielburr at me.com</A>
(312) 656-8387


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180117/d4453f1e/attachment.html&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="031798.html">[Twisted-Python] Circular references in TLSMemoryBIOProtocol
</A></li>
	<LI>Next message (by thread): <A HREF="031800.html">[Twisted-Python] Circular references in TLSMemoryBIOProtocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31799">[ date ]</a>
              <a href="thread.html#31799">[ thread ]</a>
              <a href="subject.html#31799">[ subject ]</a>
              <a href="author.html#31799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
