<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Building Python3 wheels for Win32 and releasing to Pypi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Building%20Python3%20wheels%20for%20Win32%20and%0A%20releasing%20to%20Pypi&In-Reply-To=%3CCAEgpGv79W_CrZrgejRP%2BrbJWQQYsihc%3DA5PLAurUvv9T4WvWwA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="064252.html">
   <LINK REL="Next"  HREF="031793.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Building Python3 wheels for Win32 and releasing to Pypi</H1>
    <B>Oliver Palmer</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Building%20Python3%20wheels%20for%20Win32%20and%0A%20releasing%20to%20Pypi&In-Reply-To=%3CCAEgpGv79W_CrZrgejRP%2BrbJWQQYsihc%3DA5PLAurUvv9T4WvWwA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Building Python3 wheels for Win32 and releasing to Pypi">oliverpalmer at opalmer.com
       </A><BR>
    <I>Mon Jan  8 15:53:46 MST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="064252.html">[Twisted-Python] Building Python3 wheels for Win32 and releasing to Pypi
</A></li>
        <LI>Next message (by thread): <A HREF="031793.html">[Twisted-Python] twistedmatrix.com is in trouble...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64253">[ date ]</a>
              <a href="thread.html#64253">[ thread ]</a>
              <a href="subject.html#64253">[ subject ]</a>
              <a href="author.html#64253">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> If during the release process, appveyor could build the Windows wheels on
</I>py2.7 and py3, and then upload them to pypi, that would be ideal.

Last I checked AppyVeyor can't do this directly. I ended up writing a
command line tool to make releases for pywincffi which uses this class to
pull release artifacts from a build on AppVeyor:

<A HREF="https://github.com/opalmer/pywincffi/blob/master/pywincffi/dev/release.py#L392">https://github.com/opalmer/pywincffi/blob/master/pywincffi/dev/release.py#L392</A>

The PR mentioned above appears to already push artifacts using sftp so if
you wanted to pull artifacts for a specific build you could use the above.
I don't know enough about Twisted's release process to know if the above
will be useful but if you need to access all artifacts for a branch of the
last passing build the above should do it.

As for building wheels for Windows on AppVeyor it might be worth looking at
the one I've come up with:

<A HREF="https://github.com/opalmer/pywincffi/blob/master/appveyor.yml">https://github.com/opalmer/pywincffi/blob/master/appveyor.yml</A>

The most notable difference probably is that I'm creating an environment
variable called %WITH_COMPILER% which points at a script
&lt;<A HREF="https://github.com/opalmer/pywincffi/blob/master/.ci/appveyor/run_with_compiler.cmd">https://github.com/opalmer/pywincffi/blob/master/.ci/appveyor/run_with_compiler.cmd</A>&gt;
that
sets up additional environment variables prior to the install
&lt;<A HREF="https://github.com/opalmer/pywincffi/blob/master/.ci/appveyor/install.cmd">https://github.com/opalmer/pywincffi/blob/master/.ci/appveyor/install.cmd</A>&gt; or
other scripts running. I don't know enough about Twisted's build to know if
it's needed but without those environment variables I ended up having
problems getting builds through for Python 2/3 for both 32-bit and 64-bit
variants even when using setuptools. I don't know if the situation has
improved since but it might be worth looking at if Twisted's build on
appyveor runs into issues.

On Mon, Jan 8, 2018 at 3:56 PM, Craig Rodrigues &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rodrigc at crodrigues.org</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sun, Jan 7, 2018 at 10:14 PM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I no longer have time to work on it, but I think that is possible to
</I>&gt;&gt;<i> build wheels for py2.7 and py3 on appveyor
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If during the release process, appveyor could build the Windows wheels on
</I>&gt;<i> py2.7 and py3, and then upload
</I>&gt;<i> them to pypi, that would be ideal.
</I>&gt;<i>
</I>&gt;<i> Didn't you implement something for one of the Twisted subprojects where if
</I>&gt;<i> a git tag was created and pushed to github, then it would build and upload
</I>&gt;<i> to pypi?
</I>&gt;<i> That would be the ideal thing to implement with appveyor for the main
</I>&gt;<i> Twisted project.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Craig
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20180108/4650dfc5/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="064252.html">[Twisted-Python] Building Python3 wheels for Win32 and releasing to Pypi
</A></li>
	<LI>Next message (by thread): <A HREF="031793.html">[Twisted-Python] twistedmatrix.com is in trouble...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#64253">[ date ]</a>
              <a href="thread.html#64253">[ thread ]</a>
              <a href="subject.html#64253">[ subject ]</a>
              <a href="author.html#64253">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
