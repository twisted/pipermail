<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Returning a Deferred as a result from another	Deferred
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Returning%20a%20Deferred%20as%20a%20result%20from%20another%0A%09Deferred&In-Reply-To=%3C20071009021003.8162.1824593723.divmod.quotient.20327%40ohm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048625.html">
   <LINK REL="Next"  HREF="048636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Returning a Deferred as a result from another	Deferred</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Returning%20a%20Deferred%20as%20a%20result%20from%20another%0A%09Deferred&In-Reply-To=%3C20071009021003.8162.1824593723.divmod.quotient.20327%40ohm%3E"
       TITLE="[Twisted-Python] Returning a Deferred as a result from another	Deferred">exarkun at divmod.com
       </A><BR>
    <I>Mon Oct  8 20:10:03 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048625.html">[Twisted-Python] Returning a Deferred as a result from another	Deferred
</A></li>
        <LI>Next message (by thread): <A HREF="048636.html">[Twisted-Python] Returning a Deferred as a result from another	Deferred
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48634">[ date ]</a>
              <a href="thread.html#48634">[ thread ]</a>
              <a href="subject.html#48634">[ subject ]</a>
              <a href="author.html#48634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 5 Oct 2007 19:00:51 -0700, Ryan Fugger &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rfugger at gmail.com</A>&gt; wrote:
&gt;<i>On 10/5/07, Jonathan Lange &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jml at mumak.net</A>&gt; wrote:
</I>&gt;&gt;<i> On 10/6/07, Ryan Fugger &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rfugger at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Returning a Deferred as a result from another Deferred seems to be
</I>&gt;&gt;<i> &gt; disallowed by an assertion at the start of the callback chain.  Why is
</I>&gt;&gt;<i> &gt; this?  Right now I have worked around this limitation by wrapping my
</I>&gt;&gt;<i> &gt; Deferred in a list and then unwrapping it in the callback.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No it's not. I can guarantee this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What's the content of the AssertionError that you are getting?
</I>&gt;<i>
</I>&gt;<i>No content in the error.  Line 238 of twisted/internet/defer.py (first
</I>&gt;<i>line in Deferred.callback) is:
</I>&gt;<i>
</I>&gt;<i>assert not isinstance(result, Deferred)
</I>&gt;<i>
</I>&gt;<i>That's pretty explicit in disallowing Deferreds...  I'm working with
</I>&gt;<i>the version 2.5 release.
</I>
You've misread the code.  Jonathan is correct.  The rest of this thread
seems to go off on some tangent about threads which may or may not be
relevant to whatever problem you're trying to solve.  What led you to
be reading this code in the first place?

Glyph did make a good point, though.  You shouldn't ever have a Deferred
in a thread other than the reactor thread.  You shouldn't make them, you
shouldn't add callbacks to them, you shouldn't call them back.  It might
be legitimate to get one from the reactor thread, hold it for a while,
then send it back to the reactor thread, but I can't think of a case
where this would really be very useful.

Jean-Paul

&gt;<i>
</I>&gt;<i>Ryan
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-Python mailing list
</I>&gt;<i><A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048625.html">[Twisted-Python] Returning a Deferred as a result from another	Deferred
</A></li>
	<LI>Next message (by thread): <A HREF="048636.html">[Twisted-Python] Returning a Deferred as a result from another	Deferred
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48634">[ date ]</a>
              <a href="thread.html#48634">[ thread ]</a>
              <a href="subject.html#48634">[ subject ]</a>
              <a href="author.html#48634">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
