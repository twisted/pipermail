<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Should I use asynchronous programming in my	own	modules?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Should%20I%20use%20asynchronous%20programming%20in%20my%0A%09own%09modules%3F&In-Reply-To=%3C4717DE65.200%40densedata.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048701.html">
   <LINK REL="Next"  HREF="048709.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Should I use asynchronous programming in my	own	modules?</H1>
    <B>Johann Borck</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Should%20I%20use%20asynchronous%20programming%20in%20my%0A%09own%09modules%3F&In-Reply-To=%3C4717DE65.200%40densedata.com%3E"
       TITLE="[Twisted-Python] Should I use asynchronous programming in my	own	modules?">johann.borck at densedata.com
       </A><BR>
    <I>Thu Oct 18 16:29:57 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048701.html">[Twisted-Python] Should I use asynchronous programming in my	own	modules?
</A></li>
        <LI>Next message (by thread): <A HREF="048709.html">[Twisted-Python] Should I use asynchronous programming in my	own modules?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48706">[ date ]</a>
              <a href="thread.html#48706">[ thread ]</a>
              <a href="subject.html#48706">[ subject ]</a>
              <a href="author.html#48706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jürgen Strass wrote:
&gt;<i> [..]
</I>&gt;<i>
</I>&gt;<i> So I already asked myself how one would translate the example of a
</I>&gt;<i> factorial function in twisted's core documentation to use the
</I>&gt;<i> reactor's scheduling mechanism instead of running it in a thread. I
</I>&gt;<i> think an example of how to divide it into chunks and how to use the
</I>&gt;<i> reactor would be great.
</I>&gt;<i>
</I>Hi,
ok, as I understand you are *not* talking about &quot;accepting documents
over the network&quot; or similar, but rather about independent, long
running, CPU-bound tasks. While you could split them up into chunks
allowing the reactor to do it's work, there are a number of arguments
against doing so. If you don't need intermediate results, and don't
feed your engine incrementally with more data, the way to go is
neither 'chunking' nor using threads, but rather using
worker-processes, because pythons threads are only well-suited for
IO-bound stuff, that cannot be done asynchronously (e.g. if you have
to use some blocking db-interface because there's no alternative
asynchronous implementation) and function calls in python are
expensive. If you split up the work to do it in the reactor-thread,
and it requires heavy processing, there will be many unnecessary calls
switching between the reactor and your engine. If you instead have a
tight loop (or whatever) in a different process, those calls would be
saved, and on a multi-core or multi-processor system you could use its
additional processing power. So use IPC to communicate with worker(s),
and let them spit out the result as fast as possible, instead of
unnecessarily slowing down both your calculation and the networking
part without the option to parallelize processing.

The decisive aspect is interactivity - if you need it for your
processing 'chunking' it up is the way to go, if not, use another
process. If you don't really need to process events, but still want to
do some kind of streaming the decision is not that easy. If you need
parallel processing anyway you have no choice but to use some kind of
IPC. The safe bet is probably designing your code to be able to be
processed in chunks, and then to run it in a separate process.

I think the main misunderstanding is &quot;[..]to use the reactor's
scheduling mechanism instead of running it in a thread.&quot;  Twisteds
reactor is not a superior multi-purpose scheduler (as JP mentioned),
but a domain-specific event handler for networking. While your
use-case might (that's my guess) profit from choosing 'chunking' over
pythons threading, it still wouldn't from choosing it over the
scheduling of your OS.

hm, did I get you right there?

Johann

&gt;<i> What I tried at first was programming a simple counter this way. It
</I>&gt;<i> would look much similar to the code I presented in reply to Itamar
</I>&gt;<i> Shtull-Trauring's answer. What I'm not sure about is if this is the
</I>&gt;<i> correct way to go for.
</I>&gt;<i>
</I>&gt;<i> Many thanks for all the other points you've answered, it made a lot
</I>&gt;<i> of things much clearer to me.
</I>&gt;<i>
</I>&gt;<i> Jürgen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048701.html">[Twisted-Python] Should I use asynchronous programming in my	own	modules?
</A></li>
	<LI>Next message (by thread): <A HREF="048709.html">[Twisted-Python] Should I use asynchronous programming in my	own modules?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48706">[ date ]</a>
              <a href="thread.html#48706">[ thread ]</a>
              <a href="subject.html#48706">[ subject ]</a>
              <a href="author.html#48706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
