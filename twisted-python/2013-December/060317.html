<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Endpoints and WebSocket / Autobahn
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20Endpoints%20and%20WebSocket%20/%20Autobahn&In-Reply-To=%3CA01AA006-BEBC-406B-9B84-83392C69E15C%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="027850.html">
   <LINK REL="Next"  HREF="060319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Endpoints and WebSocket / Autobahn</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20Endpoints%20and%20WebSocket%20/%20Autobahn&In-Reply-To=%3CA01AA006-BEBC-406B-9B84-83392C69E15C%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted Endpoints and WebSocket / Autobahn">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Dec 13 06:32:22 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027850.html">[Twisted-Python] Twisted Endpoints and WebSocket / Autobahn
</A></li>
        <LI>Next message (by thread): <A HREF="060319.html">[Twisted-Python] Twisted Endpoints and WebSocket / Autobahn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60317">[ date ]</a>
              <a href="thread.html#60317">[ thread ]</a>
              <a href="subject.html#60317">[ subject ]</a>
              <a href="author.html#60317">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Dec 12, 2013, at 12:29 AM, Tobias Oberstein &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">tobias.oberstein at tavendo.de</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I am working on Twisted Endpoint support in Autobahn <A HREF="https://github.com/tavendo/AutobahnPython.">https://github.com/tavendo/AutobahnPython.</A>
</I>
Yay!

&gt;<i> So far, I made Autobahn able to talk WebSocket _over_ arbitrary Twisted Endpoints, e.g. WebSocket over Unix domain sockets works. This is already quite nifty.
</I>&gt;<i> 
</I>&gt;<i> Is there anything like Twisted Endpoints for Processes and/or Serial? Like:
</I>&gt;<i> 
</I>&gt;<i> endpoint = serverFromString(reactor,&quot;process:program=/usr/local/bin/myprogram&quot;)
</I>&gt;<i> 
</I>&gt;<i> or
</I>&gt;<i> 
</I>&gt;<i> endpoint = serverFromString(reactor,&quot;serial:port=/dev/tty1:baudrate=115000&quot;)
</I>
Yes and no.

For serial port support, see &lt;<A HREF="https://twistedmatrix.com/trac/ticket/4847">https://twistedmatrix.com/trac/ticket/4847</A>&gt;.  For subprocess support, &lt;<A HREF="https://twistedmatrix.com/documents/current/api/twisted.internet.endpoints.ProcessEndpoint.html">https://twistedmatrix.com/documents/current/api/twisted.internet.endpoints.ProcessEndpoint.html</A>&gt;.

However, process support is unfinished, as you can see in &lt;<A HREF="https://twistedmatrix.com/trac/ticket/5813">https://twistedmatrix.com/trac/ticket/5813</A>&gt;; there still needs to be a string parser plugin, so you can't do what you suggest with serverFromString.

I hope you'll poke those tickets along through the process.

&gt;<i> That would allow to talk WebSocket over stdin/stdout to a program or a serial conneced device. Both can be useful in certain situations.
</I>
And that would be awesome.

&gt;<i> I'd also like to add the other: creating an Twisted Endpoint _from_ an Autobahn server/client to be able to talk any (stream) protocol _over_ WebSocket (like SSH or VNC over WebSocket).
</I>&gt;<i> 
</I>&gt;<i> endpoint = serverFromString(reactor,&quot;websocket:tcp:80:url=<A HREF="ws://myhostname.com/somepath">ws://myhostname.com/somepath</A>&quot;)
</I>
There's totally a plugin architecture for this, and I'm excited for you to use it :-).

One quick comment though: would you be OK with using 'autobahn' as your identifier rather than 'websocket'?  There are still plans to include basic websocket support within Twisted itself and it would be a shame to start conflicting on that identifier.

&gt;<i> I guess I need to provide an implementation of
</I>&gt;<i> <A HREF="http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html">http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.ITransport.html</A>
</I>&gt;<i> 
</I>&gt;<i> What else? Is there some docs or recipe?
</I>
Sadly it seems that although &lt;<A HREF="http://twistedmatrix.com/documents/current/core/howto/endpoints.html">http://twistedmatrix.com/documents/current/core/howto/endpoints.html</A>&gt; alludes to the plugin API, it doesn't actually link to it.

The way that you add a new type of endpoint to the string parser is by registering a Twisted plugin (assuming that you know how to do that) providing   &lt;<A HREF="https://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IStreamServerEndpointStringParser.html">https://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IStreamServerEndpointStringParser.html</A>&gt;.

Hopefully the API documentation there is helpful; from there you'll need to write implementations of IStreamServerEndpoint, IListeningPort, and ITransport; the breadcrumbs should be laid out well enough that it's pretty clear where each of those needs to be though.

Hope that helps, and thanks for actually wanting to use these plugin APIs we worked so hard on,

-glyph

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027850.html">[Twisted-Python] Twisted Endpoints and WebSocket / Autobahn
</A></li>
	<LI>Next message (by thread): <A HREF="060319.html">[Twisted-Python] Twisted Endpoints and WebSocket / Autobahn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60317">[ date ]</a>
              <a href="thread.html#60317">[ thread ]</a>
              <a href="subject.html#60317">[ subject ]</a>
              <a href="author.html#60317">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
