<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] txdlo - a Twisted DeferredListObserver
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20txdlo%20-%20a%20Twisted%20DeferredListObserver&In-Reply-To=%3CCACqnu4WX0TXKBXFq7Qv8aJSnswKF-EuBXJejCcX8XTbRi9p7UA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="060336.html">
   <LINK REL="Next"  HREF="060338.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] txdlo - a Twisted DeferredListObserver</H1>
    <B>Terry Jones</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20txdlo%20-%20a%20Twisted%20DeferredListObserver&In-Reply-To=%3CCACqnu4WX0TXKBXFq7Qv8aJSnswKF-EuBXJejCcX8XTbRi9p7UA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] txdlo - a Twisted DeferredListObserver">terry at jon.es
       </A><BR>
    <I>Sun Dec 29 22:24:37 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="060336.html">[Twisted-Python] Where is trial?
</A></li>
        <LI>Next message (by thread): <A HREF="060338.html">[Twisted-Python] txdlo - a Twisted DeferredListObserver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27876">[ date ]</a>
              <a href="thread.html#27876">[ thread ]</a>
              <a href="subject.html#27876">[ subject ]</a>
              <a href="author.html#27876">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just wrote a quick class called DeferredListObserver that lets you do
various things with a list of deferreds. You can add observers that get
passed information about the deferreds firing. You can also add deferreds
to the observed list at any time (this is very useful if you're dynamically
creating deferreds that you want to monitor).

The class can be used to easily build things like Twisted's DeferredList or
simple variants of it, or can let you separate the various behaviors of
DeferredList into simpler functions. You can also do other things that I've
occasionally wanted.  E.g., get a deferred that fires when N of the
observed deferreds have fired. Or ignore errors until one deferred
succeeds, only firing with an error if all deferreds fail. Or write a
DeferredPool with a notifyWhenEmpty method like the one I posted here about
4 years ago.

Or (a more involved example), suppose you have 3 methods that can return
you a user's avatar: a fast local cache, a filesystem, and a slow network
call to Gravatar. You want to launch all three lookups at once and use the
first answer. But if the cache and/or filesystems fails first, you don't
want an error you instead want to take the result from Gravatar and add it
to the cache and/or filesystem, as well firing a deferred with the result
(wherever it comes from). Only if all three lookups fail do you want to
receive an error.

I'll improve the examples (and probably add tests for them) at some point.
Meanwhile, the DeferredListObserver class (in txdlo.py), tests for it, and
various examples can be had from <A HREF="https://github.com/terrycojones/txdlo">https://github.com/terrycojones/txdlo</A>

Terry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20131230/ecc19210/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20131230/ecc19210/attachment.html</A>&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="060336.html">[Twisted-Python] Where is trial?
</A></li>
	<LI>Next message (by thread): <A HREF="060338.html">[Twisted-Python] txdlo - a Twisted DeferredListObserver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27876">[ date ]</a>
              <a href="thread.html#27876">[ thread ]</a>
              <a href="subject.html#27876">[ subject ]</a>
              <a href="author.html#27876">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
