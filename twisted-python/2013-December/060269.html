<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to get callback return value
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20get%20callback%20return%20value&In-Reply-To=%3C1386099391.28432.55080489.14F8BFD1%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="060268.html">
   <LINK REL="Next"  HREF="027806.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to get callback return value</H1>
    <B>Peter Westlake</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20to%20get%20callback%20return%20value&In-Reply-To=%3C1386099391.28432.55080489.14F8BFD1%40webmail.messagingengine.com%3E"
       TITLE="[Twisted-Python] How to get callback return value">peter.westlake at pobox.com
       </A><BR>
    <I>Tue Dec  3 12:36:31 MST 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="060268.html">[Twisted-Python] How to get callback return value
</A></li>
        <LI>Next message (by thread): <A HREF="027806.html">[Twisted-Python] Unit testing AMP responder method registration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60269">[ date ]</a>
              <a href="thread.html#60269">[ thread ]</a>
              <a href="subject.html#60269">[ subject ]</a>
              <a href="author.html#60269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Dec 3, 2013, at 12:00, 杨有秀 wrote:

&gt;<i> def loadConfig(self, id, config = None):
</I>&gt;<i>         &quot;&quot;&quot; Load the config
</I>&gt;<i>         &quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i>         platform = node.get_platform()
</I>&gt;<i> self.textLabel_Platform.setText(platform)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> /home/20131203-Client/src/node.py
</I>&gt;<i> 
</I>&gt;<i> def get_platform(self):
</I>&gt;<i>         &quot;&quot;&quot; Returns node type
</I>&gt;<i>         &quot;&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i>         self.node.addCallback(self.get_model)
</I>&gt;<i>         self.node.addCallback(self.success)
</I>&gt;<i>         return self.model
</I>
addCallback is a method of twisted.internet.defer.Deferred,
but I don't think your node is a Deferred.

&gt;<i>     def get_model(self, object):
</I>&gt;<i>         model=object.callRemote(&quot;getModel&quot;)
</I>&gt;<i>         return model
</I>
This looks as though it will return a Deferred, from the callRemote.
If that isn't the case, ignore everything else below.

So you might write:

def get_platform(self):
        &quot;&quot;&quot; Returns node type
        &quot;&quot;&quot;
        self.model = self.get_model()
        self.model.addCallback(self.success)
        return self.model

    def success(self, model):
        print '1111fff'
        return model

And then you could use the value returned by get_platform (which is a
Deferred)
by adding a callback to it:

def loadConfig(self, id, config = None):
        &quot;&quot;&quot; Load the config
        &quot;&quot;&quot;
        node.get_platform().addCallback(self.textLabel_Platform.setText)

When the callRemote succeeds, it calls the callbacks on the Deferred.
First, it passes the return value from the remote call to success().
Then
it passes the return value from success() to textLabel_Platform.setText.

Peter.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="060268.html">[Twisted-Python] How to get callback return value
</A></li>
	<LI>Next message (by thread): <A HREF="027806.html">[Twisted-Python] Unit testing AMP responder method registration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60269">[ date ]</a>
              <a href="thread.html#60269">[ thread ]</a>
              <a href="subject.html#60269">[ subject ]</a>
              <a href="author.html#60269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
