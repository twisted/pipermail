<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] processProtocol woes and a plea for aid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20processProtocol%20woes%20and%20a%20plea%20for%20aid&In-Reply-To=%3C5.1.1.6.0.20040623142959.023562b0%40mail.telecommunity.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040552.html">
   <LINK REL="Next"  HREF="040554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] processProtocol woes and a plea for aid</H1>
    <B>Phillip J. Eby</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20processProtocol%20woes%20and%20a%20plea%20for%20aid&In-Reply-To=%3C5.1.1.6.0.20040623142959.023562b0%40mail.telecommunity.com%3E"
       TITLE="[Twisted-Python] processProtocol woes and a plea for aid">pje at telecommunity.com
       </A><BR>
    <I>Wed Jun 23 12:33:51 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040552.html">[Twisted-Python] processProtocol woes and a plea for aid
</A></li>
        <LI>Next message (by thread): <A HREF="040554.html">[Twisted-Python] processProtocol woes and a plea for aid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40553">[ date ]</a>
              <a href="thread.html#40553">[ thread ]</a>
              <a href="subject.html#40553">[ subject ]</a>
              <a href="author.html#40553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At 01:34 PM 6/23/04 -0400, Gary Coulbourne wrote:
&gt;<i>Howdy!
</I>&gt;<i>
</I>&gt;<i>I'm using processProtocol to talk to a program written by a coworker.  It 
</I>&gt;<i>handles things fine, but it is asynchronous in that when I send a response 
</I>&gt;<i>to it, it may send several responses back, or it may just randomly send 
</I>&gt;<i>back a response.  If I were handling this output a line at a time, it 
</I>&gt;<i>would be fine, but processProtocol seems to put all of the responses 
</I>&gt;<i>together... each response is followed by a \n.  I naively assumed that 
</I>&gt;<i>each time a line was complete, Twisted would call my outRecieved.  It 
</I>&gt;<i>seems, though, that dozens of respopnses can build up in the buffer before 
</I>&gt;<i>it was called.
</I>&gt;<i>
</I>&gt;<i>I'm certain I am missing out on something basic.  Is there any way to set 
</I>&gt;<i>processProtocol to look at the \n as a signal to call outRecieved rather 
</I>&gt;<i>than to call it at some arbitrary time?  I didn't see anything quickly 
</I>&gt;<i>obvious in the source, so I thought I would ask for advice.
</I>
It sounds like maybe the program you're calling isn't flushing its writes 
to stdout.  If it doesn't, there's no way for Twisted to see its output 
until the program's output buffer overflows.

One quick way to check: are you always getting the messages in blocks of 
roughly N bytes, (except perhaps for the last block before the program 
exits)?  If so, you need to get your coworker to flush his output buffer.

Alternatively, depending on your platform, creating a pty (aka 
pseudoterminal) may be an option.  This would be to convince your 
co-worker's program that it's talking to a console, and therefore should 
output data as it becomes available instead of buffering it.  But that 
depends somewhat on the language/libraries being used by the program.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040552.html">[Twisted-Python] processProtocol woes and a plea for aid
</A></li>
	<LI>Next message (by thread): <A HREF="040554.html">[Twisted-Python] processProtocol woes and a plea for aid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40553">[ date ]</a>
              <a href="thread.html#40553">[ thread ]</a>
              <a href="subject.html#40553">[ subject ]</a>
              <a href="author.html#40553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
