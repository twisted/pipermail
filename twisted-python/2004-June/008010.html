<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Refactoring of trial - call for	feature	requests and suggestions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Refactoring%20of%20trial%20-%20call%20for%0A%09feature%09requests%20and%20suggestions&In-Reply-To=40CF2318.5020109%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008008.html">
   <LINK REL="Next"  HREF="008012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Refactoring of trial - call for	feature	requests and suggestions</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Refactoring%20of%20trial%20-%20call%20for%0A%09feature%09requests%20and%20suggestions&In-Reply-To=40CF2318.5020109%40twistedmatrix.com"
       TITLE="[Twisted-Python] Refactoring of trial - call for	feature	requests and suggestions">glyph at divmod.com
       </A><BR>
    <I>Tue Jun 15 14:14:03 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008008.html">[Twisted-Python] Refactoring of trial - call for feature	requests	and suggestions
</A></li>
        <LI>Next message: <A HREF="008012.html">[Twisted-Python] Refactoring of trial - call for	feature	requests	and suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8010">[ date ]</a>
              <a href="thread.html#8010">[ thread ]</a>
              <a href="subject.html#8010">[ subject ]</a>
              <a href="author.html#8010">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2004-06-15 at 12:26, Christopher Armstrong wrote:

&gt;<i> I don't think it should be calling iterate() at all -- just a regular 
</I>&gt;<i> run(). In fact, I was considering rewriting said functions in 
</I>&gt;<i> twisted.trial.util to use that just today. Instead of spinning the 
</I>&gt;<i> reactor until something is appended to some list via a callback, make 
</I>&gt;<i> the callback stop the reactor.
</I>
There are multiple, parallel issues here :).  First is that the reactor
needs a genuine make-sure-i'm-cleaned-up function.  The current usage of
iterate() has its roots in the fact that shutdown is (used to be?)
horribly buggy and slightly destructive - if memory serves, the original
problem was that the threadpool was destroyed and could not be
re-created properly.

Second is that we shouldn't be waiting on deferreds in test code any
more than we should be waiting on deferreds in real code.  The different
approaches to waiting on deferreds currently mean there are still lots
of places the tests can hang.  With a more unified approach, we could
insert default timeouts on ALL tests more easily, and avoid loops that
wait for multiple deferreds by using, e.g. DeferredList.

Third is the fact that we have piles and piles of badly-written test
code which would need to be changed to support any modifications to
trial.  This one I'm not sure about how to deal with.

Maybe it'd be better to focus more on the split-out until that's
finished with, because we're not going to be able to use anything new
until then anyway.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008008.html">[Twisted-Python] Refactoring of trial - call for feature	requests	and suggestions
</A></li>
	<LI>Next message: <A HREF="008012.html">[Twisted-Python] Refactoring of trial - call for	feature	requests	and suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8010">[ date ]</a>
              <a href="thread.html#8010">[ thread ]</a>
              <a href="subject.html#8010">[ subject ]</a>
              <a href="author.html#8010">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
