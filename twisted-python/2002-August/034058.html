<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Generalised data/metadata storage/retrieval
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Generalised%20data/metadata%20storage/retrieval&In-Reply-To=%3C20020828204533.GA26704%40meson.dyndns.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="034056.html">
   <LINK REL="Next"  HREF="034059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Generalised data/metadata storage/retrieval</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Generalised%20data/metadata%20storage/retrieval&In-Reply-To=%3C20020828204533.GA26704%40meson.dyndns.org%3E"
       TITLE="[Twisted-Python] Generalised data/metadata storage/retrieval">exarkun at meson.dyndns.org
       </A><BR>
    <I>Wed Aug 28 14:45:33 MDT 2002</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="034056.html">[Twisted-Python] Documentation: man pages online?
</A></li>
        <LI>Next message (by thread): <A HREF="034059.html">[Twisted-Python] Submitted for your approval
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34058">[ date ]</a>
              <a href="thread.html#34058">[ thread ]</a>
              <a href="subject.html#34058">[ subject ]</a>
              <a href="author.html#34058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Interface description attached.  Written in response to glyph's comments
that Twisted.news was waaay too NNTPy.  Suggestions and other comments
appreciated.

-- 
Seduced, shaggy Samson snored.
She scissored short.  Sorely shorn,
Soon shackled slave, Samson sighed,
Silently scheming,
Sightlessly seeking
Some savage, spectacular suicide.
                -- Stanislaw Lem, &quot;Cyberiad&quot;
--
 4:00pm up 99 days, 16:51, 5 users, load average: 0.11, 0.13, 0.09
-------------- next part --------------


class NewsStorage:
    &quot;&quot;&quot;
    A generic interface to metadata/data pairs
    &quot;&quot;&quot;


    def lookupByHeader(self, predicate, max = 1):
        &quot;&quot;&quot;
        Search for a message by examining its headers.  'predicate' 
        is called with a mapping of header name/values.  If it returns
        a true value, the Message-ID of the message is added to the
        result list.  When the result list is 'max' items long, or
        there are no more articles, it is returned.  If 'max' is None,
        it is disregarded.
        &quot;&quot;&quot;


    def searchHeaders(self, predicate, max = None):
        &quot;&quot;&quot;
        Collect a list of headers.  'predicate' is called with a mapping
        of header name/values.  If it returns something other than None,
        that object is added to the result list.  When the result list is
        'max' items long, or there are no more articles, it is returned.
        If 'max' is None, it is disregarded.
        &quot;&quot;&quot;


    def lookupByBody(self, predicate, max = 1):
        &quot;&quot;&quot;
        Search by a message by examining its body.  'predicate'
        is passed the body of each message in the database.  If
        it returns a true value, the Message-ID of  the message
        is added to the result list.  When the result list is
        'max' items long, or there are no more articles, it is
        returned.  If 'max' is None, it is disregarded.
        &quot;&quot;&quot;


    def lookupByID(self, id):
        &quot;&quot;&quot;
        Return the headers and body for the article with the specified
        Message-ID.
        &quot;&quot;&quot;


    def insertMessage(self, headers, body):
        &quot;&quot;&quot;
        Insert a new message.  'header' is a mapping of header name/values.
        If it does not contain a 'Message-ID' header one will be added.  If
        the Message-ID is already assigned 
        &quot;&quot;&quot;


    def removeMessage(self, id):
        &quot;&quot;&quot;
        Remove the message with the specified Message-ID
        &quot;&quot;&quot;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 237 bytes
Desc: not available
URL: &lt;/pipermail/twisted-python/attachments/20020828/1b56f943/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="034056.html">[Twisted-Python] Documentation: man pages online?
</A></li>
	<LI>Next message (by thread): <A HREF="034059.html">[Twisted-Python] Submitted for your approval
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34058">[ date ]</a>
              <a href="thread.html#34058">[ thread ]</a>
              <a href="subject.html#34058">[ subject ]</a>
              <a href="author.html#34058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
