<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Resource perplexity
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Resource%20perplexity&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001467.html">
   <LINK REL="Next"  HREF="001471.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Resource perplexity</H1>
    <B>Steve Waterbury</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Resource%20perplexity&In-Reply-To="
       TITLE="[Twisted-Python] Resource perplexity">waterbug at beeblebrox.gsfc.nasa.gov
       </A><BR>
    <I>Mon Aug 12 17:10:29 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001467.html">[Twisted-Python] twisted.enterprise
</A></li>
        <LI>Next message: <A HREF="001471.html">[Twisted-Python] Resource perplexity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1470">[ date ]</a>
              <a href="thread.html#1470">[ thread ]</a>
              <a href="subject.html#1470">[ subject ]</a>
              <a href="author.html#1470">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yet another newbie question:
Firewall realities being what they are, I'd like to &quot;multiplex&quot; several 
things over a single web server/port (80 for production, but for now 
anything), so I've been hacking at the xmlrpc example, but no luck so 
far (see attached attempt -- it runs, but gives a &quot;404&quot; for 
/RPC2 or /RPC2/ ...).  

Two questions:
(1) Is this an architecturally sound use of twisted?  (Optimal?)
    (And if not, suggestions?  :^)
(2) If so, what am I doing blockheaded?  

Thanks again for your help and patience!
-- Steve.

Stephen C. Waterbury  <A HREF="http://misspiggy.gsfc.nasa.gov/people/waterbug.html">http://misspiggy.gsfc.nasa.gov/people/waterbug.html</A>
-------------- next part --------------
&quot;&quot;&quot;
Derived from twisted xmlrpc example ... 
Adds a resource_mux resource to dispatch requests based on URL.
-----------------------------------------------------------------
Hook up an object to XML-RPC. An example session:
    
    &gt;&gt;&gt; s = xmlrpclib.Server('<A HREF="http://localhost:7080/RPC2/'">http://localhost:7080/RPC2/'</A>)
    &gt;&gt;&gt; s.echo(&quot;lala&quot;)
    ['lala']
    &gt;&gt;&gt; s.echo(&quot;lala&quot;, 1)
    ['lala', 1]
    &gt;&gt;&gt; s.echo(&quot;lala&quot;, 4)
    ['lala', 4]
    &gt;&gt;&gt; s.echo(&quot;lala&quot;, 4, 3.4)
    ['lala', 4, 3.3999999999999999]
    &gt;&gt;&gt; s.echo(&quot;lala&quot;, 4, [1, 2])
    ['lala', 4, [1, 2]]
&quot;&quot;&quot;

from twisted.web import xmlrpc, resource
from twisted.internet import defer
import xmlrpclib


class Echoer(xmlrpc.XMLRPC):
    &quot;&quot;&quot;An example object to be published.
    
    Has five methods accessable by XML-RPC, 'echo', 'hello', 'defer's.echo('spam'),
    'defer_fail' and 'fail.
    &quot;&quot;&quot;
    
    def xmlrpc_echo(self, *args):
        &quot;&quot;&quot;Return all passed args.&quot;&quot;&quot;
        return args
    
    def xmlrpc_hello(self):
        &quot;&quot;&quot;Return 'hello, world'.&quot;&quot;&quot;
        return 'hello, world!'
    
    def xmlrpc_defer(self):
        &quot;&quot;&quot;Show how xmlrpc methods can return Deferred.&quot;&quot;&quot;
        return defer.succeed(&quot;hello&quot;)
    
    def xmlrpc_defer_fail(self):
        &quot;&quot;&quot;Show how xmlrpc methods can return failed Deferred.&quot;&quot;&quot;
        return defer.fail(12)

    def xmlrpc_fail(self):
        &quot;&quot;&quot;Show how we can return a failure code.&quot;&quot;&quot;
        return xmlrpclib.Fault(7, &quot;Out of cheese.&quot;)


def main():
    from twisted.internet.app import Application
    from twisted.web import server
    # Resource multiplexer 'mux'; dispatches requests to Web,
    # XML-RPC, or SOAP handler, depending on base URL.  Standard
    # base URLs: 'WWW', 'RPC2', 'SOAP' (probably should be
    # case-insensitive).
    mux = resource.Resource()
    mux.putChild('/RPC2/', Echoer())
    # similarly for other handlers ...
    app = Application(&quot;thingy&quot;)
    app.listenTCP(7080, server.Site(mux))
    app.run(0)


if __name__ == '__main__':
    main()
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001467.html">[Twisted-Python] twisted.enterprise
</A></li>
	<LI>Next message: <A HREF="001471.html">[Twisted-Python] Resource perplexity
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1470">[ date ]</a>
              <a href="thread.html#1470">[ thread ]</a>
              <a href="subject.html#1470">[ subject ]</a>
              <a href="author.html#1470">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
