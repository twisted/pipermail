<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Please help with Deferreds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Please%20help%20with%20Deferreds&In-Reply-To=20020826175034.GA10012%40ki.yok.utu.fi">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001539.html">
   <LINK REL="Next"  HREF="001543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Please help with Deferreds</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Please%20help%20with%20Deferreds&In-Reply-To=20020826175034.GA10012%40ki.yok.utu.fi"
       TITLE="[Twisted-Python] Please help with Deferreds">andrew-twisted at puzzling.org
       </A><BR>
    <I>Mon Aug 26 20:24:29 EDT 2002</I>
    <P><UL>
        <LI>Previous message: <A HREF="001539.html">[Twisted-Python] Please help with Deferreds
</A></li>
        <LI>Next message: <A HREF="001543.html">[Twisted-Python] Please help with Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1541">[ date ]</a>
              <a href="thread.html#1541">[ thread ]</a>
              <a href="subject.html#1541">[ subject ]</a>
              <a href="author.html#1541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Aug 26, 2002 at 08:50:34PM +0300, Tommi Virtanen wrote:
&gt;<i> On Mon, Aug 26, 2002 at 11:43:46AM +1000, Andrew Bennetts wrote:
</I>&gt;<i> &gt; &gt; #!/usr/bin/python
</I>&gt;<i> &gt; &gt; import sys
</I>&gt;<i> &gt; &gt; from twisted.internet import defer, reactor
</I>&gt;<i> &gt; &gt; d=defer.Deferred()
</I>&gt;<i> &gt; &gt; d.callback(0)
</I>&gt;<i> &gt; &gt; d2=defer.Deferred()
</I>&gt;<i> &gt; &gt; d.addCallback(lambda x,d2=d2: d2)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So you've effectively done:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; d = defer.Deferred()
</I>&gt;<i> &gt; d2 = defer.Deferred()
</I>&gt;<i> &gt; d.callback(d2)
</I>&gt;<i> 
</I>&gt;<i> 	Not really. You'll notice that Deferred addCallbacks
</I>&gt;<i> 	handlers returning Deferreds is handled differently
</I>&gt;<i> 	from d.callback(Deferred()); the former gets special
</I>&gt;<i> 	treatment, the latter doesn't.
</I>&gt;<i> 
</I>&gt;<i> 	Your version never outputs &quot;1&quot;, it outputs repr(d2)
</I>&gt;<i> 	for the callLater version and repr(d) for the immediate
</I>&gt;<i> 	one.
</I>&gt;<i> 
</I>&gt;<i> 	My version outputs &quot;1&quot; for the immediate case and
</I>&gt;<i> 	repr(d2) for the callLater version.
</I>
Hmm.  Good point.

Deferreds are more complicated that I thought :(

I think this implicit chaining behaviour needs to become more
prominently discussed in the documentation, because that's what confused
me...  Probably what needs updating in doc/howto/defer is the diagram
explaining the chain of callback processing (or the text next to it),
which never at any point hints at this behaviour (that's described
later).  I'll probably checkin a doc fix along the lines of &quot;Note that
this behaves differently if a callback returns a Deferred; see 'Chaining
Deferreds' for more details&quot;.

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001539.html">[Twisted-Python] Please help with Deferreds
</A></li>
	<LI>Next message: <A HREF="001543.html">[Twisted-Python] Please help with Deferreds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1541">[ date ]</a>
              <a href="thread.html#1541">[ thread ]</a>
              <a href="subject.html#1541">[ subject ]</a>
              <a href="author.html#1541">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
