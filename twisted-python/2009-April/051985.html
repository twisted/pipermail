<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Two-way telnet client problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Two-way%20telnet%20client%20problem&In-Reply-To=%3C8de369d70904101010q4b3c89a1i83d8872007325f6d%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="051981.html">
   <LINK REL="Next"  HREF="051992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Two-way telnet client problem</H1>
    <B>Greg Taylor</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Two-way%20telnet%20client%20problem&In-Reply-To=%3C8de369d70904101010q4b3c89a1i83d8872007325f6d%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Two-way telnet client problem">gtaylor at clemson.edu
       </A><BR>
    <I>Fri Apr 10 11:10:28 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="051981.html">[Twisted-Python] Two-way telnet client problem
</A></li>
        <LI>Next message (by thread): <A HREF="051992.html">[Twisted-Python] Two-way telnet client problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51985">[ date ]</a>
              <a href="thread.html#51985">[ thread ]</a>
              <a href="subject.html#51985">[ subject ]</a>
              <a href="author.html#51985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I guess what I'm getting confused about is how to get my listen server
(MUD server) talking to this IMC client connection. Let's say one of
my player wants to send a message over the IMC (client) connection.
This is done by telnetting into the MUD server and entering a command
like: imcmessage &quot;hello&quot;. So I've got a reactor serving up my MUD
server process, and I'm not sure how this IMC client plugs in.

I guess I need to create some kind of queue that the IMC
ConnectionMade checks periodically and executes if I can't directly
get the MUD server talking to the IMCProtocol object.

Also, do I need to do anything special to prevent blocking?

Do I use two separate reactors or should the IMC connection be using
the same reactor or process group as the MUD server (listen server)?

Thanks for your help. I'm sure this will be really simple to do once I
figure out how to do this.

Greg

On Fri, Apr 10, 2009 at 12:06 PM, Jean-Paul Calderone
&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt; wrote:
&gt;<i> On Thu, 9 Apr 2009 02:34:23 -0400, Greg Taylor &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">gtaylor at clemson.edu</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hello all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm still pretty new with Twisted, so the documentation is a little
</I>&gt;&gt;<i> bit cryptic and strange to wade through. I'm writing a MUD server that
</I>&gt;&gt;<i> I'd like to add InterMUD Protocol (IMC) to. This basically allows any
</I>&gt;&gt;<i> of the games running the MUD server to connect to an IMC server that
</I>&gt;&gt;<i> lets players from other games talk to one another. I'm thinking I'll
</I>&gt;&gt;<i> create another thread and run the IMC client from there so as to not
</I>&gt;&gt;<i> block the main server thread.
</I>&gt;<i>
</I>&gt;<i> Threading generally isn't the way to do networking with Twisted.  In fact,
</I>&gt;<i> Twisted is almost wholly geared toward avoiding exactly that.
</I>&gt;<i>
</I>&gt;&gt;<i> From your example, it appears as though you've figured out how to do basic
</I>&gt;<i>
</I>&gt;<i> client setup.  What you're missing is how to use the connection once it
</I>&gt;<i> is established.  You need to be thinking of your program in terms of events.
</I>&gt;<i>
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've seen mention of something like:
</I>&gt;&gt;<i> p = reactor.buildProtocol()
</I>&gt;&gt;<i> p.sendLine('blah\n')
</I>&gt;<i>
</I>&gt;<i> You can't really do this.  Instead, it seems that since you want to send
</I>&gt;<i> a line once the connection is established, you should be putting code into
</I>&gt;<i> the event handler for &quot;connection is established&quot;.  Your example code
</I>&gt;<i> already defined behavior for this event, in fact - but you only put a
</I>&gt;<i> print statement into it.  Try expanding your `connectionMade´ method to
</I>&gt;<i> do the other things you want to happen at connection setup time.
</I>&gt;<i>
</I>&gt;<i> Jean-Paul
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>


-- 
Greg Taylor
Clemson University, Class of 2009
Cell: (864) 888-7964
<A HREF="http://gc-taylor.com">http://gc-taylor.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="051981.html">[Twisted-Python] Two-way telnet client problem
</A></li>
	<LI>Next message (by thread): <A HREF="051992.html">[Twisted-Python] Two-way telnet client problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51985">[ date ]</a>
              <a href="thread.html#51985">[ thread ]</a>
              <a href="subject.html#51985">[ subject ]</a>
              <a href="author.html#51985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
