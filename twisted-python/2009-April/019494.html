<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adapt from more than one interface
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adapt%20from%20more%20than%20one%20interface&In-Reply-To=200904112241.36178.esteve%40sindominio.net">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019490.html">
   <LINK REL="Next"  HREF="019495.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adapt from more than one interface</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20adapt%20from%20more%20than%20one%20interface&In-Reply-To=200904112241.36178.esteve%40sindominio.net"
       TITLE="[Twisted-Python] adapt from more than one interface">glyph at divmod.com
       </A><BR>
    <I>Sat Apr 11 20:31:29 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019490.html">[Twisted-Python] adapt from more than one interface
</A></li>
        <LI>Next message: <A HREF="019495.html">[Twisted-Python] adapt from more than one interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19494">[ date ]</a>
              <a href="thread.html#19494">[ thread ]</a>
              <a href="subject.html#19494">[ subject ]</a>
              <a href="author.html#19494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 11 Apr, 08:41 pm, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">esteve at sindominio.net</A> wrote:
&gt;<i>factory = IFooFactory(myService)
</I>&gt;<i>factory.bar = &quot;some value&quot;
</I>&gt;<i>
</I>&gt;<i>it works, but I'd rather use this:
</I>&gt;<i>
</I>&gt;<i>factory = IFooFactory(myService, configurationObject)
</I>
This is a long and terrible road you're about to start down.  It's hard 
for me to explain exactly why it's so painful, but trust me, it is.

What you're doing now, passing out-of-band arguments to the IFooFactory 
adapter, whose concrete type you are *not supposed to know* at that 
point in the control flow, is bad.  But trying to force adaptation to 
become full-fledged multimethods is worse.  If you want multimethods, I 
believe PEAK provides a package that implements them.

If you want to keep doing what you're doing, you should do this:

factory = MyServiceFooFactory(myService)
factory.configureBar(&quot;some value&quot;)

i.e. don't ask for an adaptation which might give you an object without 
a &quot;bar&quot; attribute, just create the concrete type that does what you need 
based on the type of myService and configure it with explicitly 
documented methods.  Although if I misunderstand the spec of 
&quot;IFooFactory&quot; and it *does* include a bar attribute, nevermind.

If you want something more magical and adapter-ish, them maybe you want 
this:

IFooFactory(ConfigurationObject(myService, bar=&quot;some value&quot;))

i.e. by the time you are getting around to the IFooFactory adaptation, 
you should have an object that fully provides enough information that 
the concrete FooFactory adapter type can be fully initialized when it is 
created.
&gt;<i>In order to implement this, registerAdapter would have to be able to 
</I>&gt;<i>take a
</I>&gt;<i>tuple of interfaces, like this:
</I>&gt;<i>
</I>&gt;<i>components.registerAdapter(
</I>&gt;<i>    AdaptToFactory,
</I>&gt;<i>    (IFooService, IConfigurationDescriptor),
</I>&gt;<i>    IFooFactory)
</I>&gt;<i>
</I>&gt;<i>would that feature make sense? If so, I'll file an issue right now :-)
</I>
Unfortunately, much as I've been encouraging people to file tickets 
lately, no :).  I don't think it makes sense.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019490.html">[Twisted-Python] adapt from more than one interface
</A></li>
	<LI>Next message: <A HREF="019495.html">[Twisted-Python] adapt from more than one interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19494">[ date ]</a>
              <a href="thread.html#19494">[ thread ]</a>
              <a href="subject.html#19494">[ subject ]</a>
              <a href="author.html#19494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
