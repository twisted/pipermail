<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twistd and application framework questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twistd%20and%20application%20framework%20questions&In-Reply-To=49D3A162.90804%40mit.edu">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019422.html">
   <LINK REL="Next"  HREF="019429.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twistd and application framework questions</H1>
    <B>Rob Hoadley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twistd%20and%20application%20framework%20questions&In-Reply-To=49D3A162.90804%40mit.edu"
       TITLE="[Twisted-Python] Twistd and application framework questions">hoadley at gmail.com
       </A><BR>
    <I>Wed Apr  1 19:42:02 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019422.html">[Twisted-Python] Twistd and application framework questions
</A></li>
        <LI>Next message: <A HREF="019429.html">[Twisted-Python] Twistd and application framework questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19425">[ date ]</a>
              <a href="thread.html#19425">[ thread ]</a>
              <a href="subject.html#19425">[ subject ]</a>
              <a href="author.html#19425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I can help you with this question:

&gt;<i> 2) &#160;There are still scenarios where I would want to run my code the
</I>&gt;<i> &quot;reactor&quot; way rather than than using the application framework, and I would
</I>&gt;<i> love to be able to keep a single file that's compatible with both modes..
</I>&gt;<i> Is there a way to detect in runtime whether the code is being run through
</I>&gt;<i> 'twistd' and the app framework or if its run directly?
</I>&gt;<i> I was thinking of doing something like:
</I>&gt;<i>
</I>
I'm sure there's a way to introspect and figure out how you are being
run. But...

Why do you want to do this?

If it's because you have different environments between prod and
development then you can look at twisted plugins or I just use ENV
vars from my os.environ.  When the app starts it pulls os.environ
vars.

If it's to debug? You can twistd -noy.

I'd also recommend that you are better off in the long run if you
create a number of unittests. trial offers a way to run unittests
within the reactor.  If you haven't done this step it's a major
lifesaver. Tests help you understand how your service,protocol,etc
react and gives you confidence to roll all your services code together
and have it just work.  I've even used trial to do all kinds of crazy
stuff  in my normal non-twisted python coding. Also buildbot to
automatically run the tests is handy.

If it's to run just one service? You'd add this to the bottom of your
service file (i'm assuming you've separated your service from your tac
file)

if __name__ == &quot;__main__&quot;:
    #start your service/services here

the tac file won't execute main when importing the service.  So it's
not two files.  But I'm not sure what your end goal is here.  Do tell.

-rob


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019422.html">[Twisted-Python] Twistd and application framework questions
</A></li>
	<LI>Next message: <A HREF="019429.html">[Twisted-Python] Twistd and application framework questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19425">[ date ]</a>
              <a href="thread.html#19425">[ thread ]</a>
              <a href="subject.html#19425">[ subject ]</a>
              <a href="author.html#19425">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
