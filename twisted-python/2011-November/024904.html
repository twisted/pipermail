<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Project Jobs Volunteer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=4669A125-2F2F-4E16-A4BA-3ADD59492923%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024891.html">
   <LINK REL="Next"  HREF="024905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Project Jobs Volunteer</H1>
    <B>Tim Allen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=4669A125-2F2F-4E16-A4BA-3ADD59492923%40twistedmatrix.com"
       TITLE="[Twisted-Python] Twisted Project Jobs Volunteer">screwtape at froup.com
       </A><BR>
    <I>Wed Nov 16 07:13:50 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024891.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
        <LI>Next message: <A HREF="024905.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24904">[ date ]</a>
              <a href="thread.html#24904">[ thread ]</a>
              <a href="subject.html#24904">[ subject ]</a>
              <a href="author.html#24904">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Nov 14, 2011 at 01:33:45PM -0500, Glyph wrote:
&gt;<i> Really the most important thing here though is just to get the
</I>&gt;<i> automatic mirroring initially set up, not the never-ending
</I>&gt;<i> ambassadorial work.  That way git users wouldn't _need_ elaborate
</I>&gt;<i> instructions as to what to clone and how; if we just say &quot;get twisted
</I>&gt;<i> from github&quot; and have that automatically updated it would be easier
</I>&gt;<i> for everyone.
</I>
I've done some experimentation, and (as best I can tell) it's impossible
to use git-svn to create a sensible SVN &#8594; Git conversion of the Twisted
repository. This is because of the various, inconsistent branch-naming
schemes that have been used over Twisted's long history.

As best I can tell, git-svn can import branches that exist at some
specific depth in the tree... so if your branches look like this:

    root
    |
    +- branches
	|
	+- add-a-feature-1234
	+- fix-a-bug-2345
	+- release-v1.0.x
	+- release-v1.1.x

...you can say &quot;git svn clone --branches='branches/*'&quot; and they'll be
imported as Git branches. Likewise, if you group your branches in some
way:

    root
    |
    +- branches
	|
	+- topic-branches
	|   |
	|   +- add-a-feature-1234
	|   +- fix-a-bug-2345
	|
	+- release-branches
	    |
	    +- v1.0.x
	    +- v1.1.x

...then you can say &quot;git svn clone --branches='branches/*/*'&quot; and
they'll all be imported cleanly. Unfortunately, the Twisted repository's
&quot;branches&quot; directory contains subdirectories representing branches *and*
subdirectories representing groups of branches... and *those* contain
both branch directories and branch-group directories. Here are the
branch-group directories I've discovered so far:

    branches/
    branches/releases/
    branches/releases/conch/
    branches/releases/mail/
    branches/releases/names/
    branches/releases/words/

When I import a range of revisions that happens to include a change to
a branch in &quot;branches/releases&quot; (I've been using the range 33049:33062
for testing), git-svn winds up importing the entire &quot;releases&quot; subtree
as a branch, which is... suboptimal. If I use the &quot;--ignore-paths&quot;
option to ignore everything under &quot;branches/releases&quot;, then it still
generates the branch and faithfully records all the commits affecting
it... but ignores all the files, so when you check out that branch it
deletes everything in your working directory.

What's really annoying about this is that git itself doesn't care about
branch naming, and it's perfectly happy to have &quot;add-a-feature-1234&quot; and
&quot;releases/v1.0.x&quot; as branch names. It's just the git-svn tool not being
flexible enough. A quick Google doesn't reveal much in the way of other
people who have dealt with repository layouts like this, except for one
report which basically went &quot;use 'svnadmin dump' to export the
repository, use sed to rewrite all the paths, load the dump into a new
svn repository and import from there.&quot; That sounds like a lot of work to
me, and not the sort of thing that could be reliably repeated to keep
the two repositories in sync. Perhaps someone should file a bug with the
git-svn maintainer, if only they had a bug-tracker.

So, would a repository with a huge, bogus &quot;releases&quot; branch be
acceptable in an Official Mirror? It's not strictly needed for
developing patches, but it *will* create lots of puzzled frowns and
annoyance, perhaps from people who want a Git mirror to integrate with
their &quot;automatically download new releases&quot; code.

Also in the spirit of writing things down so future contributors can
figure things out, I note the Git FAQ on the Git Wiki has a &quot;How do
I mirror a SVN repository to git?&quot; question:

    <A HREF="https://git.wiki.kernel.org/articles/g/i/t/GitFaq_ebc3.html">https://git.wiki.kernel.org/articles/g/i/t/GitFaq_ebc3.html</A>

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024891.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
	<LI>Next message: <A HREF="024905.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24904">[ date ]</a>
              <a href="thread.html#24904">[ thread ]</a>
              <a href="subject.html#24904">[ subject ]</a>
              <a href="author.html#24904">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
