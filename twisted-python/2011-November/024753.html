<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Global reactor unit tests in the Twisted test	suite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Global%20reactor%20unit%20tests%20in%20the%20Twisted%20test%0A%09suite&In-Reply-To=4EB0584F.5020106%40imperial.ac.uk">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024746.html">
   <LINK REL="Next"  HREF="024747.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Global reactor unit tests in the Twisted test	suite</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Global%20reactor%20unit%20tests%20in%20the%20Twisted%20test%0A%09suite&In-Reply-To=4EB0584F.5020106%40imperial.ac.uk"
       TITLE="[Twisted-Python] Global reactor unit tests in the Twisted test	suite">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Nov  1 19:58:33 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024746.html">[Twisted-Python] Global reactor unit tests in the Twisted test suite
</A></li>
        <LI>Next message: <A HREF="024747.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24753">[ date ]</a>
              <a href="thread.html#24753">[ thread ]</a>
              <a href="subject.html#24753">[ subject ]</a>
              <a href="author.html#24753">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Nov 1, 2011, at 4:36 PM, Phil Mayers wrote:

&gt;<i> One example, we use a tiny script wrapping DeferredSemaphore and 
</I>&gt;<i> t.p.utils.getProcessOutput to parallelise SSH scanning, because 
</I>&gt;<i> ssh-keyscan is (ahem) poorly implemented.
</I>&gt;<i> 
</I>&gt;<i> Maybe I knock up more of these short 20-liners than is common? And 
</I>&gt;<i> typing &quot;reactor, &quot; a lot in them seems a bit, well... retrograde.
</I>
Hopefully you only need to pass it in at the top level to a few things, not everywhere to everything :).

For example, with something like twisted.web.client.Agent, you pass the reactor once and then you have an object you can call methods on, you don't need to keep repeating it.  If getProcessOutput were a method of a more helpful object, perhaps you'd be able to type 'reactor' a bit less.

Another possible eventual improvement here is that Twisted include a script-running tool which creates the reactor for you and passes it, either to a specified function or as a magic global in a script.  Then you should just pass 'reactor' to the top-level stuff in your script.  Sort of like 'twistd' but for one-off things where you don't want to go to the trouble to build a plugin or even a Service.

As a bonus, such a tool could call 'reactor.run()' for you automatically, eliminating some newbie confusion about when it's appropriate to do that.  (And ideally, 'reactor.stop' when some appropriate Deferred is fired, but that gets into more thinking than I want to do about this right now...)

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20111101/043a6bde/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20111101/043a6bde/attachment.htm</A> 
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024746.html">[Twisted-Python] Global reactor unit tests in the Twisted test suite
</A></li>
	<LI>Next message: <A HREF="024747.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24753">[ date ]</a>
              <a href="thread.html#24753">[ thread ]</a>
              <a href="subject.html#24753">[ subject ]</a>
              <a href="author.html#24753">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
