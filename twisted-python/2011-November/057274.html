<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] adbapi / Postgres : LISTEN/NOTIFY	and	RealDictCursor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%20/%20Postgres%20%3A%20LISTEN/NOTIFY%09and%0A%09RealDictCursor&In-Reply-To=%3C47D7E0D3-60F7-4650-8768-B46A061DD254%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057273.html">
   <LINK REL="Next"  HREF="057276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] adbapi / Postgres : LISTEN/NOTIFY	and	RealDictCursor</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20adbapi%20/%20Postgres%20%3A%20LISTEN/NOTIFY%09and%0A%09RealDictCursor&In-Reply-To=%3C47D7E0D3-60F7-4650-8768-B46A061DD254%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] adbapi / Postgres : LISTEN/NOTIFY	and	RealDictCursor">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Nov  3 16:54:11 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057273.html">[Twisted-Python] adbapi / Postgres :	LISTEN/NOTIFY	and	RealDictCursor
</A></li>
        <LI>Next message (by thread): <A HREF="057276.html">[Twisted-Python] adbapi / Postgres :	LISTEN/NOTIFY	and	RealDictCursor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57274">[ date ]</a>
              <a href="thread.html#57274">[ thread ]</a>
              <a href="subject.html#57274">[ subject ]</a>
              <a href="author.html#57274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Nov 3, 2011, at 6:18 PM, Tobias Oberstein wrote:

&gt;<i>      while not self.stopped:
</I>&gt;<i>         if select.select([conn], [], [], self.timeout) == ([], [], []):
</I>&gt;<i>            pass
</I>
Please note that on high-volume servers, this is problematic, as 'conn' may be higher than the maximum file descriptor pollable by select().  So if you've tuned everything to be smart, use a high-volume reactor like epoll, and set all your ulimits correctly, you will still get tracebacks out of this code depending on random accidents of ordering.

This part of the logic might therefore be better implemented as a IReadDescriptor/IWriteDescriptor provider (i.e. a subclass of FileDescriptor), assuming you can ask your postgres binding to give you non-blocking reads and writes.  You're certainly not the first person to make this mistake though, &lt;<A HREF="http://divillo.com/">http://divillo.com/</A>&gt; gives the same advice :).

Also this would probably make a better patch for txpostgres &lt;<A HREF="https://launchpad.net/txpostgres">https://launchpad.net/txpostgres</A>&gt; than for Twisted itself, since support depends on specific database bindings.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20111103/aa3cbe87/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057273.html">[Twisted-Python] adbapi / Postgres :	LISTEN/NOTIFY	and	RealDictCursor
</A></li>
	<LI>Next message (by thread): <A HREF="057276.html">[Twisted-Python] adbapi / Postgres :	LISTEN/NOTIFY	and	RealDictCursor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57274">[ date ]</a>
              <a href="thread.html#57274">[ thread ]</a>
              <a href="subject.html#57274">[ subject ]</a>
              <a href="author.html#57274">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
