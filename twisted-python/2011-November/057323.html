<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Project Jobs Volunteer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=%3C43C0365B-49CE-4CF4-BC96-B7BB4B283FD4%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057322.html">
   <LINK REL="Next"  HREF="057324.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Project Jobs Volunteer</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=%3C43C0365B-49CE-4CF4-BC96-B7BB4B283FD4%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted Project Jobs Volunteer">glyph at twistedmatrix.com
       </A><BR>
    <I>Wed Nov  9 01:50:23 MST 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057322.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
        <LI>Next message (by thread): <A HREF="057324.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57323">[ date ]</a>
              <a href="thread.html#57323">[ thread ]</a>
              <a href="subject.html#57323">[ subject ]</a>
              <a href="author.html#57323">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Nov 8, 2011, at 7:39 PM, Tim Allen wrote:

&gt;<i> On Tue, Nov 08, 2011 at 05:43:09PM -0800, Glyph Lefkowitz wrote:
</I>&gt;&gt;&gt;<i> On 7 Jul, 01:28 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A> wrote:
</I>&gt;&gt;&gt;&gt;<i> <A HREF="http://twistedmatrix.com/trac/wiki/GitMirror">http://twistedmatrix.com/trac/wiki/GitMirror</A>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I should stress that the most pressing problem here is not necessarily
</I>&gt;&gt;<i> to provide a comprehensive, elaborate, automatic mirroring setup, but
</I>&gt;&gt;<i> rather to provide canonical, correct, convenient instructions to
</I>&gt;&gt;<i> people who are submitting tickets for review, and who want to use git
</I>&gt;&gt;<i> for development.  Ideally these instructions would not end up knocking
</I>&gt;&gt;<i> over our version control server, either :).
</I>&gt;<i> 
</I>&gt;<i> As far as I know (having written most of the documentation in the linked
</I>&gt;<i> wiki page, and from a brief skim through the git-svn manpage) it's
</I>&gt;<i> impossible to make a &quot;shallow&quot; clone with git-svn (something like an
</I>&gt;<i> ordinary &quot;svn checkout&quot;, or &quot;git clone --depth N&quot;), so anyone who wants
</I>&gt;<i> to contribute to Twisted via git needs to clone the repository from
</I>&gt;<i> scratch (potentially overloading the SVN server, although nobody seemed
</I>&gt;<i> to notice or complain when I was doing my git-svn clone), or just copy
</I>&gt;<i> a tarball of somebody's comprehensive, elaborate, automatic mirroring
</I>&gt;<i> setup.
</I>
This is the part I don't understand.  Why doesn't 'git clone' work right in the face of svn metadata?  Is it possible to make it work right?  bzr-svn has some metadata it caches about the svn repository which doesn't stick around in the bzr repo or branch, but (from the performance of using it, at least) it doesn't need to stop the world and grab all of that data for most operations.

&gt;<i> I'm not sure why I didn't document how to properly clone the Twisted SVN
</I>&gt;<i> repo with git-svn; I don't recall it being too hard (with the exception
</I>&gt;<i> of some old, closed branches with '+' in the name which I just blew
</I>&gt;<i> away), but it did take long enough that I didn't really want to
</I>&gt;<i> experiment and risk overloading the SVN server. 
</I>
It would be better (for most users) to point to a canonical way to get access to a git-svn clone than to document how to make one, if making one takes 24 hours :).  But please do write this down so that at least the Twisted admins have some concept of how to re-create the git mirror or how to fix the issue if it occurs in the future.

&gt;<i> With access to the SVN server over a local network, or with a lot of
</I>&gt;<i> patience, it shouldn't take much messing about to figure out canonical
</I>&gt;<i> &quot;make a clone&quot; and &quot;update your clone&quot; instructions.
</I>
If we had an officially maintained mirror (pushed to github, I hope), I assume that non-committer users would not need to do SVN operations.  That's the main audience I'm interested in right now. There are a couple of committers who might be interested in doing development with git, but I'm confident they can figure that out for themselves :).

&gt;&gt;<i> Right now, patches from git users show up in a variety of states of
</I>&gt;&gt;<i> confusion and disarray: they're either based on an incredibly ancient
</I>&gt;&gt;<i> version of trunk, or they're on a non-master branch of some repository
</I>&gt;&gt;<i> and they don't say that,
</I>&gt;<i> 
</I>&gt;<i> I'm not sure why that would be, except that possibly they found
</I>&gt;<i> a tarball of somebody else's git-svn clone and forgot to update it, or
</I>&gt;<i> they're confused about the best way to get cloned from some unofficial,
</I>&gt;<i> no-longer updated mirror. Fixing this probably depends on having the
</I>&gt;<i> canonical, correct, convenient instructions and advertising them widely.
</I>
You edited GitMirror before, you can do it again :).

&gt;&gt;<i> or they include 'a/' and 'b/' prefixes (i.e.  they're -p1 patches when
</I>&gt;&gt;<i> they should be -p0 according to the submission standard).
</I>&gt;<i> 
</I>&gt;<i> Git doesn't provide any way to generate patches without the fixed,
</I>&gt;<i> standard prefixes. As I understand it, this is to prevent ambiguities
</I>&gt;<i> when filenames contain spaces. So, you're probably stuck with it. :/
</I>

I finally figured this out.  It is fixable.  The correct options to pass are:

git diff --src-prefix=./ --dst-prefix=./

Maybe it's possible to put this into a configuration file somewhere so that users don't need to type all of that every time?  Please put this on the GitMirror page as well.

-glyph



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057322.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
	<LI>Next message (by thread): <A HREF="057324.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57323">[ date ]</a>
              <a href="thread.html#57323">[ thread ]</a>
              <a href="subject.html#57323">[ subject ]</a>
              <a href="author.html#57323">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
