<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Project Jobs Volunteer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=20111109124940.GC9962%40boombah.thristian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024860.html">
   <LINK REL="Next"  HREF="024862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Project Jobs Volunteer</H1>
    <B>Tom Davis</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=20111109124940.GC9962%40boombah.thristian.org"
       TITLE="[Twisted-Python] Twisted Project Jobs Volunteer">tom at recursivedream.com
       </A><BR>
    <I>Wed Nov  9 09:30:57 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024860.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
        <LI>Next message: <A HREF="024862.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24852">[ date ]</a>
              <a href="thread.html#24852">[ thread ]</a>
              <a href="subject.html#24852">[ subject ]</a>
              <a href="author.html#24852">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/09/2011 07:49 AM, Tim Allen wrote:
&gt;<i> On Wed, Nov 09, 2011 at 12:50:23AM -0800, Glyph Lefkowitz wrote:
</I>&gt;&gt;<i> On Nov 8, 2011, at 7:39 PM, Tim Allen wrote:
</I>&gt;&gt;&gt;<i> As far as I know (having written most of the documentation in the linked
</I>&gt;&gt;&gt;<i> wiki page, and from a brief skim through the git-svn manpage) it's
</I>&gt;&gt;&gt;<i> impossible to make a &quot;shallow&quot; clone with git-svn (something like an
</I>&gt;&gt;&gt;<i> ordinary &quot;svn checkout&quot;, or &quot;git clone --depth N&quot;), so anyone who wants
</I>&gt;&gt;&gt;<i> to contribute to Twisted via git needs to clone the repository from
</I>&gt;&gt;&gt;<i> scratch (potentially overloading the SVN server, although nobody seemed
</I>&gt;&gt;&gt;<i> to notice or complain when I was doing my git-svn clone), or just copy
</I>&gt;&gt;&gt;<i> a tarball of somebody's comprehensive, elaborate, automatic mirroring
</I>&gt;&gt;&gt;<i> setup.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is the part I don't understand.  Why doesn't 'git clone' work
</I>&gt;&gt;<i> right in the face of svn metadata?
</I>&gt;<i>
</I>&gt;<i> Git has a &quot;.git&quot; directory in each repository, and expects certain files
</I>&gt;<i> to be present within it. If there's more stuff that it doesn't know
</I>&gt;<i> about, it just ignores it. git-svn keeps its metadata in other files
</I>&gt;<i> that git-clone doesn't know or care about, and hence they don't get
</I>&gt;<i> cloned.
</I>&gt;<i>
</I>&gt;<i> I guess there's an argument for not cloning them - just because person
</I>&gt;<i> X has particular access rights to an SVN server doesn't mean that person
</I>&gt;<i> Y should have them just because they cloned a repository from X.
</I>&gt;<i>
</I>&gt;&gt;<i> bzr-svn has some metadata it caches about the svn repository which
</I>&gt;&gt;<i> doesn't stick around in the bzr repo or branch, but (from the
</I>&gt;&gt;<i> performance of using it, at least) it doesn't need to stop the world
</I>&gt;&gt;<i> and grab all of that data for most operations.
</I>&gt;<i>
</I>&gt;<i> In a git-svn-cloned repository, ordinary git operations are as speedy as
</I>&gt;<i> you'd expect. &quot;git svn fetch&quot; is slow because (I think) it has to
</I>&gt;<i> separately request each changed file from each SVN revision, and I think
</I>&gt;<i> there's some other operations that are slow because they involve talking
</I>&gt;<i> to the SVN server (like 'tell me what SVN properties are attached to
</I>&gt;<i> this file').
</I>&gt;<i>
</I>&gt;&gt;<i> It would be better (for most users) to point to a canonical way to get
</I>&gt;&gt;<i> access to a git-svn clone than to document how to make one, if making
</I>&gt;&gt;<i> one takes 24 hours :).
</I>&gt;<i>
</I>&gt;<i> Don't worry, it doesn't take 24 hours! It's *much* longer than that! ;)
</I>&gt;<i>
</I>&gt;<i> (as the wiki page states, in early 2010 and from the other side of the
</I>&gt;<i> world it took about a week; I don't have a feel for how it changes over
</I>&gt;<i> time)
</I>
It's worth noting that you aren't *required* to clone all eight trillion 
Twisted revisions in order to get a working clone. Doing `git svn clone 
-rN:HEAD &lt;url&gt;` where `N` is some revision number will only clone from 
that revision. Obviously you will not have the entire history of the 
repository at this point, but I highly doubt that would be a meaningful 
loss for the majority of use cases.

I mean, yeah, it'd be nice to have a full git clone, but if you just 
prefer to use git for development and want to submit patches to Twisted 
it's hardly an insurmountable task compared to the other requirements 
for successfully working a ticket to completion.

&gt;<i>
</I>&gt;&gt;&gt;<i> I'm not sure why that would be, except that possibly they found
</I>&gt;&gt;&gt;<i> a tarball of somebody else's git-svn clone and forgot to update it, or
</I>&gt;&gt;&gt;<i> they're confused about the best way to get cloned from some unofficial,
</I>&gt;&gt;&gt;<i> no-longer updated mirror. Fixing this probably depends on having the
</I>&gt;&gt;&gt;<i> canonical, correct, convenient instructions and advertising them widely.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You edited GitMirror before, you can do it again :).
</I>&gt;<i>
</I>&gt;<i> I'm editing it to include what we've discussed here, as well as a few
</I>&gt;<i> other things that I researched this afternoon and put into a reply that
</I>&gt;<i> my MUA ate before it was sent.
</I>&gt;<i>
</I>&gt;<i> I believe the next step should be that somebody with the required
</I>&gt;<i> permissions should connect to a machine on the same physical network as
</I>&gt;<i> the SVN server and run:
</I>&gt;<i>
</I>&gt;<i>      time git svn clone --stdlayout --prefix=&quot;svn/&quot; \
</I>&gt;<i> 	    svn+<A HREF="ssh://svn.twistedmatrix.com/svn/Twisted">ssh://svn.twistedmatrix.com/svn/Twisted</A>
</I>&gt;<i>
</I>&gt;<i> ...then check the load on the SVN server and see if it's going to be an
</I>&gt;<i> issue to let the clone complete. If the clone completes successfully,
</I>&gt;<i> then (a) we know about how long it takes, and (b) we have a &quot;seed&quot;
</I>&gt;<i> repository we can potentially put up for people to download. I'd be
</I>&gt;<i> happy to download it, check it, and write up some documentation about
</I>&gt;<i> how people should update it. If it doesn't complete successfully, we
</I>&gt;<i> should have some helpful error messages, adjust the clone command line
</I>&gt;<i> and try again.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024860.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
	<LI>Next message: <A HREF="024862.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24852">[ date ]</a>
              <a href="thread.html#24852">[ thread ]</a>
              <a href="subject.html#24852">[ subject ]</a>
              <a href="author.html#24852">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
