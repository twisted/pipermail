<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Slow PB imports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Slow%20PB%20imports&In-Reply-To=%3C20111102142410.506e6f90%40pitrou.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057260.html">
   <LINK REL="Next"  HREF="057238.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Slow PB imports</H1>
    <B>Antoine Pitrou</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Slow%20PB%20imports&In-Reply-To=%3C20111102142410.506e6f90%40pitrou.net%3E"
       TITLE="[Twisted-Python] Slow PB imports">solipsis at pitrou.net
       </A><BR>
    <I>Wed Nov  2 07:24:10 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057260.html">[Twisted-Python] Slow PB imports
</A></li>
        <LI>Next message (by thread): <A HREF="057238.html">[Twisted-Python] Interleaving long running loops
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57251">[ date ]</a>
              <a href="thread.html#57251">[ thread ]</a>
              <a href="subject.html#57251">[ subject ]</a>
              <a href="author.html#57251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 02 Nov 2011 10:34:27 +0100
Marcel GÃ¤digk &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">spam at herox.net</A>&gt; wrote:
&gt;<i> i using the Perspective Broker and i have problems with the speed of 
</I>&gt;<i> importing the modules.
</I>&gt;<i> It takes 15 - 17 seconds for importing the Reactor and the 
</I>&gt;<i> PBServerFactory (or other pb imports).
</I>&gt;<i> If i import the reactor or the pb imports alone it takes in avg. 2-3 
</I>&gt;<i> seconds.
</I>&gt;<i> 
</I>&gt;<i> def ImportIt():
</I>&gt;<i>      from twisted.internet import reactor
</I>&gt;<i>      from twisted.spread.pb import PBServerFactory
</I>&gt;<i> 
</I>&gt;<i> import timeit
</I>&gt;<i> t = timeit.Timer(setup='from __main__ import ImportIt', stmt='ImportIt()')
</I>&gt;<i> print t.timeit()
</I>
Er, have read the timeit docs?
The timeit() method will execute the given code *one million times* by
default:

timeit(self, number=1000000) unbound timeit.Timer method
    Time 'number' executions of the main statement.
    
    To be precise, this executes the setup statement once, and
    then returns the time it takes to execute the main statement
    a number of times, as a float measured in seconds.  The
    argument is the number of times through the loop, defaulting
    to one million.  The main statement, the setup statement and
    the timer function to be used are passed to the constructor.

You might want to rewrite your script without timeit and simply use the
&quot;time&quot; command. Or call `t.timeit(1)` instead.


Antoine.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057260.html">[Twisted-Python] Slow PB imports
</A></li>
	<LI>Next message (by thread): <A HREF="057238.html">[Twisted-Python] Interleaving long running loops
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57251">[ date ]</a>
              <a href="thread.html#57251">[ thread ]</a>
              <a href="subject.html#57251">[ subject ]</a>
              <a href="author.html#57251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
