<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Global reactor unit tests in the Twisted test suite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Global%20reactor%20unit%20tests%20in%20the%20Twisted%20test%0A%20suite&In-Reply-To=%3C4EB0584F.5020106%40imperial.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="057219.html">
   <LINK REL="Next"  HREF="057230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Global reactor unit tests in the Twisted test suite</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Global%20reactor%20unit%20tests%20in%20the%20Twisted%20test%0A%20suite&In-Reply-To=%3C4EB0584F.5020106%40imperial.ac.uk%3E"
       TITLE="[Twisted-Python] Global reactor unit tests in the Twisted test suite">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Tue Nov  1 14:36:31 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="057219.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
        <LI>Next message (by thread): <A HREF="057230.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57223">[ date ]</a>
              <a href="thread.html#57223">[ thread ]</a>
              <a href="subject.html#57223">[ subject ]</a>
              <a href="author.html#57223">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/01/2011 06:48 PM, Glyph wrote:

&gt;<i> Nevertheless, &quot;real reactor as default argument&quot; is not a huge
</I>&gt;<i> improvement either, because it typically breaks one level out.  If
</I>&gt;<i> you have 'a(reactor=defaultReactor)' and then 'b()' needs to call
</I>&gt;<i> 'a', half the time 'b' will forget to supply a reactor argument and
</I>&gt;<i> call 'a()' passing nothing, because that appears to be the suggested
</I>
Darn. I hadn't thought of that.

You could always walk back up the call stack looking for the 
implemenation of IReactorXXX that you want... what? Stop looking at me 
like that!

I kid of course... the right answer is to make everything a method on 
the reactor! No wait...

&gt;<i> So despite its imperfections, I don't have a solution better than
</I>&gt;<i> &quot;pass the reactor to everything&quot; yet.  It seems to be better than the
</I>&gt;<i> alternatives in almost every case.  The one place it's not better is
</I>&gt;<i> when writing brief example scripts, but I suspect this is only the
</I>
Well, not only brief example scripts; brief actual scripts. One of the 
nice things about Twisted is that, with a bit of familiarity, you can 
knock up some really fast &amp; powerful event-based network clients for 
ad-hoc jobs.

One example, we use a tiny script wrapping DeferredSemaphore and 
t.p.utils.getProcessOutput to parallelise SSH scanning, because 
ssh-keyscan is (ahem) poorly implemented.

Maybe I knock up more of these short 20-liners than is common? And 
typing &quot;reactor, &quot; a lot in them seems a bit, well... retrograde.

But you're right. Default &quot;reactor=X&quot; parameters will just get passed 
wrong, dammit...

&gt;<i> If you can think of a better solution that addresses all of these
</I>&gt;<i> concerns simultaneously somehow, please share, I'd love to hear it
</I>&gt;<i> :-).
</I>
Hmpf. I suspect you've covered most of the ground. If anything springs 
to mind I'll be sure to speak up!

Cheers,
Phil


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="057219.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
	<LI>Next message (by thread): <A HREF="057230.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#57223">[ date ]</a>
              <a href="thread.html#57223">[ thread ]</a>
              <a href="subject.html#57223">[ subject ]</a>
              <a href="author.html#57223">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
