<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted Project Jobs Volunteer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=43C0365B-49CE-4CF4-BC96-B7BB4B283FD4%40twistedmatrix.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024846.html">
   <LINK REL="Next"  HREF="024848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted Project Jobs Volunteer</H1>
    <B>Tim Allen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Twisted%20Project%20Jobs%20Volunteer&In-Reply-To=43C0365B-49CE-4CF4-BC96-B7BB4B283FD4%40twistedmatrix.com"
       TITLE="[Twisted-Python] Twisted Project Jobs Volunteer">screwtape at froup.com
       </A><BR>
    <I>Wed Nov  9 07:49:40 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024846.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
        <LI>Next message: <A HREF="024848.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24847">[ date ]</a>
              <a href="thread.html#24847">[ thread ]</a>
              <a href="subject.html#24847">[ subject ]</a>
              <a href="author.html#24847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Nov 09, 2011 at 12:50:23AM -0800, Glyph Lefkowitz wrote:
&gt;<i> On Nov 8, 2011, at 7:39 PM, Tim Allen wrote:
</I>&gt;<i> &gt; As far as I know (having written most of the documentation in the linked
</I>&gt;<i> &gt; wiki page, and from a brief skim through the git-svn manpage) it's
</I>&gt;<i> &gt; impossible to make a &quot;shallow&quot; clone with git-svn (something like an
</I>&gt;<i> &gt; ordinary &quot;svn checkout&quot;, or &quot;git clone --depth N&quot;), so anyone who wants
</I>&gt;<i> &gt; to contribute to Twisted via git needs to clone the repository from
</I>&gt;<i> &gt; scratch (potentially overloading the SVN server, although nobody seemed
</I>&gt;<i> &gt; to notice or complain when I was doing my git-svn clone), or just copy
</I>&gt;<i> &gt; a tarball of somebody's comprehensive, elaborate, automatic mirroring
</I>&gt;<i> &gt; setup.
</I>&gt;<i> 
</I>&gt;<i> This is the part I don't understand.  Why doesn't 'git clone' work
</I>&gt;<i> right in the face of svn metadata?
</I>
Git has a &quot;.git&quot; directory in each repository, and expects certain files
to be present within it. If there's more stuff that it doesn't know
about, it just ignores it. git-svn keeps its metadata in other files
that git-clone doesn't know or care about, and hence they don't get
cloned.

I guess there's an argument for not cloning them - just because person
X has particular access rights to an SVN server doesn't mean that person
Y should have them just because they cloned a repository from X.

&gt;<i> bzr-svn has some metadata it caches about the svn repository which
</I>&gt;<i> doesn't stick around in the bzr repo or branch, but (from the
</I>&gt;<i> performance of using it, at least) it doesn't need to stop the world
</I>&gt;<i> and grab all of that data for most operations.
</I>
In a git-svn-cloned repository, ordinary git operations are as speedy as
you'd expect. &quot;git svn fetch&quot; is slow because (I think) it has to
separately request each changed file from each SVN revision, and I think
there's some other operations that are slow because they involve talking
to the SVN server (like 'tell me what SVN properties are attached to
this file').

&gt;<i> It would be better (for most users) to point to a canonical way to get
</I>&gt;<i> access to a git-svn clone than to document how to make one, if making
</I>&gt;<i> one takes 24 hours :).
</I>
Don't worry, it doesn't take 24 hours! It's *much* longer than that! ;)

(as the wiki page states, in early 2010 and from the other side of the
world it took about a week; I don't have a feel for how it changes over
time)

&gt;<i> &gt; I'm not sure why that would be, except that possibly they found
</I>&gt;<i> &gt; a tarball of somebody else's git-svn clone and forgot to update it, or
</I>&gt;<i> &gt; they're confused about the best way to get cloned from some unofficial,
</I>&gt;<i> &gt; no-longer updated mirror. Fixing this probably depends on having the
</I>&gt;<i> &gt; canonical, correct, convenient instructions and advertising them widely.
</I>&gt;<i> 
</I>&gt;<i> You edited GitMirror before, you can do it again :).
</I>
I'm editing it to include what we've discussed here, as well as a few
other things that I researched this afternoon and put into a reply that
my MUA ate before it was sent. 

I believe the next step should be that somebody with the required
permissions should connect to a machine on the same physical network as
the SVN server and run:

    time git svn clone --stdlayout --prefix=&quot;svn/&quot; \
	    svn+<A HREF="ssh://svn.twistedmatrix.com/svn/Twisted">ssh://svn.twistedmatrix.com/svn/Twisted</A>

...then check the load on the SVN server and see if it's going to be an
issue to let the clone complete. If the clone completes successfully,
then (a) we know about how long it takes, and (b) we have a &quot;seed&quot;
repository we can potentially put up for people to download. I'd be
happy to download it, check it, and write up some documentation about
how people should update it. If it doesn't complete successfully, we
should have some helpful error messages, adjust the clone command line
and try again.

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024846.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
	<LI>Next message: <A HREF="024848.html">[Twisted-Python] Twisted Project Jobs Volunteer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24847">[ date ]</a>
              <a href="thread.html#24847">[ thread ]</a>
              <a href="subject.html#24847">[ subject ]</a>
              <a href="author.html#24847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
