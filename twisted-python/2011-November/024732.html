<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Global reactor unit tests in the Twisted test suite
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Global%20reactor%20unit%20tests%20in%20the%20Twisted%20test%20suite&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024731.html">
   <LINK REL="Next"  HREF="024733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Global reactor unit tests in the Twisted test suite</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Global%20reactor%20unit%20tests%20in%20the%20Twisted%20test%20suite&In-Reply-To="
       TITLE="[Twisted-Python] Global reactor unit tests in the Twisted test suite">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Nov  1 10:38:38 EDT 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="024731.html">[Twisted-Python] Python 3 progress: Twisted Core, Twisted Names
</A></li>
        <LI>Next message: <A HREF="024733.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24732">[ date ]</a>
              <a href="thread.html#24732">[ thread ]</a>
              <a href="subject.html#24732">[ subject ]</a>
              <a href="author.html#24732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'd like for us to decide that we will introduce no new unit tests into 
Twisted's test suite which use the global reactor.

These tests require extra complexity in trial - to support the Deferred, 
to check for left over event sources (incompletely implemented), and to 
clean up left over event sources (incompletely implemented).

The tests themselves are also complicated by the need to clean up those 
event sources.

The tests only exercise functionality against one reactor at a time 
which leads to additional challenges for buildbot.

If a test is for reactor functionality with multiple implementations, 
the ReactorBuilder-style tests are better.  If a test is for 
implementation details of a particular reactor, I think the necessary 
parts of that reactor should just be invoked directly - on a new 
instance.  For anything that's not a test for reactor functionality, no 
reactor should be involved at all (protocol implementations, etc).

I've mentioned these ideas to various people at various times, but they 
don't seem to be catching on, so I'd like to hear why and come to some 
conclusion about how we're going to write tests in the future.

Jean-Paul

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024731.html">[Twisted-Python] Python 3 progress: Twisted Core, Twisted Names
</A></li>
	<LI>Next message: <A HREF="024733.html">[Twisted-Python] Global reactor unit tests in the Twisted test	suite
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24732">[ date ]</a>
              <a href="thread.html#24732">[ thread ]</a>
              <a href="subject.html#24732">[ subject ]</a>
              <a href="author.html#24732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
