<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: twisted and threading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20twisted%20and%20threading&In-Reply-To=%3Cupt5o5bre.fsf%40fitlinxx.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040931.html">
   <LINK REL="Next"  HREF="040934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: twisted and threading</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20twisted%20and%20threading&In-Reply-To=%3Cupt5o5bre.fsf%40fitlinxx.com%3E"
       TITLE="[Twisted-Python] Re: twisted and threading">db3l at fitlinxx.com
       </A><BR>
    <I>Wed Aug 18 16:20:37 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040931.html">[Twisted-Python] twisted and threading
</A></li>
        <LI>Next message (by thread): <A HREF="040934.html">[Twisted-Python] catching adbapi 'thread' failures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40933">[ date ]</a>
              <a href="thread.html#40933">[ thread ]</a>
              <a href="subject.html#40933">[ subject ]</a>
              <a href="author.html#40933">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jp Calderone &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt; writes:

&gt;<i>    There is no portable way to terminate a thread without its
</I>&gt;<i> assistance.  Python supports no API for this - save one, the
</I>&gt;<i> ridiculously named &quot;setDaemon&quot; Thread method.  Twisted doesn't expose
</I>&gt;<i> this, nor call it internally, as it can lead to segfaults.
</I>
Well, all setDaemon does is prevent the threading module from joining
that thread during a shutdown - so the thread is left alone in peace
to be reclaimed by the operating system rather than by Python itself.

Do you have instances where this has actually provoked a segfault?  If
the thread is executing in Python code, the GIL should prevent it from
actually running during the Python portion of the shutdown, and the OS
will just clean up.  If the thread is truly blocked outside of Python
then nothing Python does will be a problem (unless the external entity
is writing directly to Python structures, but without grabbing the GIL
first which is a buggy extension), and the OS will again clean up.

Anyway, I've definitely used daemon threads before where it was
infeasible to guarantee the ability to signal the thread to shut
itself down before I wanted to exit and at least in my experience I've
never run into a problem.

-- David



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040931.html">[Twisted-Python] twisted and threading
</A></li>
	<LI>Next message (by thread): <A HREF="040934.html">[Twisted-Python] catching adbapi 'thread' failures
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40933">[ date ]</a>
              <a href="thread.html#40933">[ thread ]</a>
              <a href="subject.html#40933">[ subject ]</a>
              <a href="author.html#40933">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
