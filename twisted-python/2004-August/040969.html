<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] ENOBUF and Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20ENOBUF%20and%20Twisted&In-Reply-To=%3C87D6D68C-F5F5-11D8-9909-000A95A50FB2%40fuhm.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040965.html">
   <LINK REL="Next"  HREF="040968.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] ENOBUF and Twisted</H1>
    <B>James Y Knight</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20ENOBUF%20and%20Twisted&In-Reply-To=%3C87D6D68C-F5F5-11D8-9909-000A95A50FB2%40fuhm.net%3E"
       TITLE="[Twisted-Python] ENOBUF and Twisted">foom at fuhm.net
       </A><BR>
    <I>Tue Aug 24 11:46:30 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040965.html">[Twisted-Python] ENOBUF and Twisted
</A></li>
        <LI>Next message (by thread): <A HREF="040968.html">[Twisted-Python] Re: ENOBUF and Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40969">[ date ]</a>
              <a href="thread.html#40969">[ thread ]</a>
              <a href="subject.html#40969">[ subject ]</a>
              <a href="author.html#40969">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Okay, I've done some testing on windows, and here is the problem:

With non-blocking sockets:
In Unix, socket.send(buf) will buffer as much of buf as it has space 
for, and then return how much it accepted. This could be 0 or up to 
something around 128K. If you send some data and then some more, it 
will append to the previous buffer.

In Windows, socket.send(buf) will either accept the entire buffer or 
raise ENOBUFS. Testing indicates that it will internally buffer any 
amount up to 50MB (this seems to be *TOTAL* for either the process or 
the OS, I'm not sure). However, it will not incrementally accept more 
data to append to a socket's buffer until the big buffer has been 
completely emptied (seemingly down to the SO_SNDBUF length, which is 
8192), but rather raises EWOULDBLOCK instead.

This makes me confident that the previous patch is the right thing to 
do and will fix the problem.

James



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040965.html">[Twisted-Python] ENOBUF and Twisted
</A></li>
	<LI>Next message (by thread): <A HREF="040968.html">[Twisted-Python] Re: ENOBUF and Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40969">[ date ]</a>
              <a href="thread.html#40969">[ thread ]</a>
              <a href="subject.html#40969">[ subject ]</a>
              <a href="author.html#40969">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
