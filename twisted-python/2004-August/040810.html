<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question on using processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Question%20on%20using%20processes&In-Reply-To=%3C41129E5A.8070406%40dalchemy.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="040833.html">
   <LINK REL="Next"  HREF="040811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question on using processes</H1>
    <B>Matt Feifarek</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Question%20on%20using%20processes&In-Reply-To=%3C41129E5A.8070406%40dalchemy.com%3E"
       TITLE="[Twisted-Python] Question on using processes">matt at dalchemy.com
       </A><BR>
    <I>Thu Aug  5 14:53:46 MDT 2004</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040833.html">[Twisted-Python] module interface checking tool
</A></li>
        <LI>Next message (by thread): <A HREF="040811.html">[Twisted-Python] Question on using processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40810">[ date ]</a>
              <a href="thread.html#40810">[ thread ]</a>
              <a href="subject.html#40810">[ subject ]</a>
              <a href="author.html#40810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm using twisted.internet.utils.getProcessOutput() to run commands from 
a reactor.

I've pretty much got this working okay (with a few false starts related 
to how args are put together... you can't send in a big long string; you 
literally have to make a list of argument words... what a PITA).

Now, I've got a command that needs to pipe something through another 
command, something like this:

/bin/cat foo.txt | /usr/bin/tail

If I set up my &quot;process&quot; like this:

CMD = &quot;/bin/cat&quot;
ARGS = [ &quot;foo.txt&quot;, &quot;|&quot;, &quot;/usr/bin/tail&quot; ]
d = utils.getProcessOutput( CMD, ARGS )

It doesn't work. Now, this is a stupidly-trivial example, but it seems 
to have trouble with thinking that the pipe symbol is a filename. My 
less trivial example merely hangs up the console and does nothing.

I figured that this had something to do with the pipe (obviously) so I 
tried going deeper and using reactor.spawnProcess...

This is a little over my head, but I tried using an instance of 
twisted.internet.protocol.ProcessProtocol as the protocol, and turning 
on usePTY. Still, no dice.

So, my next theory is that it has something to do with the way that the 
process is literally launched. This is extremely low level, and has 
resisted my attempts to figure it out even with a debugger and stepping 
through.

My question: what's the best way to go about this?

Options:
- write my own Process protocol somehow?
- figure out what child descriptors may be required to fix this?
- simply make a bash script that wraps up the pipe inside of a black box 
and make the reactor call that?

Thanks!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040833.html">[Twisted-Python] module interface checking tool
</A></li>
	<LI>Next message (by thread): <A HREF="040811.html">[Twisted-Python] Question on using processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40810">[ date ]</a>
              <a href="thread.html#40810">[ thread ]</a>
              <a href="subject.html#40810">[ subject ]</a>
              <a href="author.html#40810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
