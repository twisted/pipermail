<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Adding callback to a Deferred that's	already	running?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Adding%20callback%20to%20a%20Deferred%20that%27s%0A%09already%09running%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008495.html">
   <LINK REL="Next"  HREF="008493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Adding callback to a Deferred that's	already	running?</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Adding%20callback%20to%20a%20Deferred%20that%27s%0A%09already%09running%3F&In-Reply-To="
       TITLE="[Twisted-Python] Re: Adding callback to a Deferred that's	already	running?">db3l at fitlinxx.com
       </A><BR>
    <I>Thu Aug 26 15:18:43 EDT 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="008495.html">[Twisted-Python] Re: Adding callback to a Deferred that's	already	running?
</A></li>
        <LI>Next message: <A HREF="008493.html">[Twisted-Python] Re: Adding callback to a Deferred that's	already	running?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8494">[ date ]</a>
              <a href="thread.html#8494">[ thread ]</a>
              <a href="subject.html#8494">[ subject ]</a>
              <a href="author.html#8494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Steve Freitas &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">sflist at ihonk.com</A>&gt; writes:

&gt;<i> The trick is that I need to add any subsequent callbacks to a new
</I>&gt;<i> deferred which I return from the function. Strangely (to me), if I try
</I>&gt;<i> using chainDeferred() instead of returning the new deferred from step2,
</I>&gt;<i> it fails with AlreadyCalled, which I don't yet understand, but that's
</I>&gt;<i> fine, 'cause this seems to work well enough.
</I>
(should have finished reading ahead since you figured out some of my
prior response :-))

The above may or may not be true though, since it depends on what the
subsequent callbacks are supposed to do.  For example, if step3 is
processing of step2 results (anything step2 can return) then you want
it added to your main callback chain for your first Deferred.  If
however, step3 is only supposed to post-process the results of the
conditional path through step2 that invokes another deferrable
routine, yes, the right place to hang it is on that Deferred and not
the main Deferred.

Oh, and not that I probably wouldn't suggest overwriting self.d with
the intermediate deferreds if you could avoid it, if only because it's
bound to be confusing down the road when maintaining the code.  Since
you should know everyone that is going to be involved in a callback
chain at the point when a particular chain is being created (either
your first one, or one that is created within a callback) you should
be able to add callbacks to each chain as it is created.





  If they
are generic processing in sequence that should work with any result
from



 - see Case 2 in my prior
response - depending on when you want the subsequent processing to
run.

-- David




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008495.html">[Twisted-Python] Re: Adding callback to a Deferred that's	already	running?
</A></li>
	<LI>Next message: <A HREF="008493.html">[Twisted-Python] Re: Adding callback to a Deferred that's	already	running?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8494">[ date ]</a>
              <a href="thread.html#8494">[ thread ]</a>
              <a href="subject.html#8494">[ subject ]</a>
              <a href="author.html#8494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
