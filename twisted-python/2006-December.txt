From foom at fuhm.net  Fri Dec  1 00:43:50 2006
From: foom at fuhm.net (James Y Knight)
Date: Fri, 1 Dec 2006 00:43:50 -0500
Subject: [Twisted-Python] trac's reliability
In-Reply-To: <456E1E2E.9060800@carmensystems.com>
References: <20061128091323.11053.1010397619.divmod.xquotient.17@joule.divmod.com>	<2102F9B1-C6BC-4542-BEC7-F710BD57E5B9@fuhm.net>
	<F67C7E07-D0D7-430A-A97B-E2D2A05DCE2F@fuhm.net>
	<456E1E2E.9060800@carmensystems.com>
Message-ID: <5F78E9E7-85E1-4017-9CE9-BC808D922D56@fuhm.net>

On Nov 29, 2006, at 6:56 PM, Magnus Lycka wrote:
> James Y Knight wrote:
>>
>> 2) Horrible horrible locking (?) issues on the /trac/browser page.  
>> Hitting it with concurrency > 2 makes it handle about one request  
>> every 2 seconds, probably database lock contention or something.  
>> But also, it starts giving error pages like this. This is an  
>> traceback when trying to generate an error page. Yay.
> Is this due to sqlite? I haven't looked at the Trac code, and I  
> couldn't see it
> explicitly in the traceback, but it certainly sounds a bit like an  
> sqlite vs
> postgresql  problem, and  it fits the description of the Trac  
> developers. The
> lock problems in sqlite are typcially related to writes though. Is  
> something
> written to the database here? What sqlite version is this? Sqlite 3  
> has a
> better locking mechanism than sqlite 2.

The traceback looks like it's from a bug in the error page generator,  
so the real error is obscured. It's using sqlite3. I'm no trac  
expert, so I can't actually answer the rest of your questions.

In other news: the master svn repository has been upgraded to 1.4.2  
fsfs (from debian testing), and thus trac now gets an up-to-date view  
of the repository. (currently synched via rsync every 10 minutes  
because that was most expedient).

So besides being horrendously slow, trac now seems to be in pretty  
good shape.

I think next it'd be nice if someone would install/enable/whatever  
the anti-spam plugin and re-enable editing the wiki for all  
registered users.

James



From glyph at divmod.com  Fri Dec  1 21:11:33 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 02 Dec 2006 02:11:33 -0000
Subject: [Twisted-Python] Need Exception that will stop ther reactor
	within twistd
Message-ID: <20061202021133.11053.119016448.divmod.xquotient.1144@joule.divmod.com>

On 30 Nov, 08:00 pm, ncesar at lunix.com.ar wrote:
>my apologies for the delayed answer, i've been very busy latelly.

No problem, aren't we all.

>El Martes, 28 de Noviembre de 2006 06:07, glyph at divmod.com escribi?:
>> Should the webserver stop simply because your protocol is not working?
>
>Well, yes I agree with you: not a webserver. So, I'll shortly describe my
>application.

My point is that you are artificially combining your application with your infrastructure.  The reactor is always potentially in use by multiple applications, so it is not the thing that should be stopped.

>I have multiple LSTP (Linux Terminal Server Project) servers. All servers are
>(almost) the same, and any of them can serve any client. There are arround
>8-12 servers and 150+ clients. I'm developing a twisted application that
>balances clients requests (by filtering DHCP discover/requests packets. (I
>attached an image, my application is called multiltsp). I'm using ip_queue
>for this.

OK.  So somewhere, there should be a MultiLTSPService which is the thing that gets stopped by these exceptions, I think.

>There is a LDAP somewhere that has all client MACs that are in the group (eg.
>the 150 clients) and from time to time, multiltsp re-reads this list. (I'm
>simplifying much of these details). I'll call this list "ALL-MACS"...
>... all multiltsp daemons MUST have the ALL-MACS list identical, in case there
>is a out of sync[1] problem the (incorrect) server must quit and the others
>must handle the clients.

Shouldn't it just get informed that it is in an invalid state, and re-start itself, rather than shutting down entirely?  I understand that this is a "panic" state that should "never happen", but you can flush that one bit of state without tanking the entire process.

>There are serveral  services involved in this application (the multicast UDP
>protocol, a shell, the ip_queue reader and others),  but a major problem as
>stated above MUST get the application down with some special clean up.

So there needs to be an object that represents the "whole application", which has references to all these services.  The reactor should not be serving that purpose.

>Glyph, I hope you understand my rustic English in the explanation above. Any
>advice or suggestion please respond this email.

It's not too bad :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061202/c8c543ba/attachment.htm 

From exarkun at twistedmatrix.com  Sun Dec  3 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 03 Dec 2006 06:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1165125901.95.1099349792@twistedmatrix.com

Bug summary
______________________
Summary for 2006-11-26 through 2006-12-03
Bugs opened: 10    Bugs closed: 9  Total open bugs: 784 (+1)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +1  |Highest:  -2          |Core:      +2          
|Enhancement:  +0  |Normal:   +3          |Mail:      +0          
|Task:         +0  |Low:      -1          |Names:     +1          
                   |Lowest:   +1          |Pydoctor:  -3          
                                          |Trial:     +1          
                                          |Web2:      +1          
                                          |Words:     -1          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2248] Do error reporting in twisted.names.client.Resolver (opened by exarkun)
    task            names      http://twistedmatrix.com/trac/ticket/2248

                    ===== Normal =====
[#2246] Wrong signature for addCallbacks in the Deferred Reference (opened by zseil) (CLOSED, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2246

[#2247] Wrong signature for addCallbacks in the Deferred Reference (opened by zseil)
    defect          core       http://twistedmatrix.com/trac/ticket/2247

[#2249] Trial hangs if callLater is replaced (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/2249

[#2250] twisted.mail.pop3.__all__ lacks a comma (opened by mwh)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2250

[#2251] twisted.mail.pop3.__all__ is mis-defined (opened by exarkun) (CLOSED, duplicate)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2251

[#2252] web2 shouldn't use socket.gethostbyaddr (opened by dreid)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2252

[#2253] trial reporter dies with IOError (opened by acapnotic)
    defect          trial      http://twistedmatrix.com/trac/ticket/2253

[#2255] sqlalchemy support for twisted.enterprise (opened by synapsis) (CLOSED, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2255

                    ===== Lowest =====
[#2254] open connection for injecting code into long-running twistd process at run-time by default (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2254



Closed Bugs
______________________
                    ===== Highest =====
[#2177] Collect Jabber interfaces in one file (opened by ralphm, closed by ralphm, fixed)
    task            words      http://twistedmatrix.com/trac/ticket/2177

[#2147] Give TestCase a default testMethod (opened by jml, closed by jml, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2147

[#2072] Document newline convention required by twisted.mail.pop3.IMailbox.getMessage (opened by exarkun, closed by exarkun, fixed)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2072

                    ===== Normal =====
[#2246] Wrong signature for addCallbacks in the Deferred Reference (opened by zseil, closed by zseil, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2246

[#2209] pydoctor has problems with moresystems' using an absolute url prefix (opened by mwh, closed by mwh, fixed)
    defect          pydoctor   http://twistedmatrix.com/trac/ticket/2209

[#2210] pydoctor system pickles that use moresystems can't be loaded (opened by mwh, closed by mwh, fixed)
    defect          pydoctor   http://twistedmatrix.com/trac/ticket/2210

[#2251] twisted.mail.pop3.__all__ is mis-defined (opened by exarkun, closed by exarkun, duplicate)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2251

[#2255] sqlalchemy support for twisted.enterprise (opened by synapsis, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2255

                    ===== Low =====
[#1644] pydoctor's nevowhtml is probably easy to speed up (opened by mwh, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1644





From varname at gmail.com  Mon Dec  4 04:26:10 2006
From: varname at gmail.com (varname)
Date: Mon, 4 Dec 2006 10:26:10 +0100
Subject: [Twisted-Python] peer 2 peer, udp, stdio -> very confused
Message-ID: <d54d6da30612040126j7dfe2e8cg22ef676d8a71417b@mail.gmail.com>

hi all,

first: I have been reading the topics on this list regarding apps that
need to be client/server at the same time, use udp, need to be able to
react to user input while the reactor is running with much interest,
but I'm very confused now as to how I should proceed with my own
problem.

In short: I'm trying to create a peer 2 peer application that has a
text-based gui (commandline), driven by user input and communicates
with other peers over udp (and occasionally over tcp, to transfer
files).

I'm just really confused over some basic concepts. Am I correct that I
can just create a simple class extending protocol.DatagramProtocol to
facilitate the raw udp sending / receiving? Then use that in a Factory
class (MyClientFactory) to 'layer' the p2p protocol functionality on?
Where do I put my stdio implementation then? And am I right that the
only thing needed for udp to work is to do a
reactor.listenUDP(portnum, MyClientFactory()) or do I need to use two
factory classes, one for the client 'bit' and one for the server?

I realise that's a lot of questions, but the sheer size of twisted has
overwhelmed me a bit and I'd appreciate any help you can give.



From marcbohlen at acm.org  Mon Dec  4 10:28:57 2006
From: marcbohlen at acm.org (marc bohlen)
Date: Mon, 04 Dec 2006 10:28:57 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
Message-ID: <45743EB9.3070204@acm.org>

hi folks

I am new to twisted and new to server programming. Nonetheless, I would 
like to build a robust client-server looping mechanism in which a server 
would listen for input from N clients, say 10, and react immediately 
when it receives data from them. I have a sample (see below) that 
appears to run well, but am not sure if it will scale under real network 
load and larger N.
(I am parsing the input data received from the clients and using it to 
calculate a fibonnaci series, just for testing. The reactor can be 
stopped with keyboard input (I am on a win32 platform)).

If you see any problems with this approach, please let me know !
Thanks, marc

CODE:

import os, sys, time, msvcrt
from twisted.internet import reactor, defer, task
from twisted.internet.protocol import DatagramProtocol
ports = [1007, 2007, 3007, 4007, 5007, 6007, 7007, 8007, 9007]
#----------------------------
def check_keyboard(result):
   try:
       if(msvcrt.kbhit()):
           result = "hit"
   except:         pass

   return result
#---------------------------
def mstop(result):
   if(result == "hit"):
       print "got hit - closing task and reactor"
       mtask.stop()
       reactor.stop()
#---------------------------
def print_time(result):
   print time.asctime(time.localtime())
#---------------------------
def fibonnaci(limit):
   first, new, second = 0,0,1
   for i in xrange(limit - 1):
       new = first + second
       first = second
       second = new
   return new
#---------------------------
def mrun():
   d = defer.Deferred()
   d.addCallback(check_keyboard)
   d.addCallback(mstop)
   d.addCallback(print_time)
   d.callback("blabla")
#---------------------------
class server(DatagramProtocol):
   def datagramReceived(self, data, (host, port)):
       print "server received: %r from %s:%d" % (data, host, port)
       self.transport.write(data, (host, port))
       limit = int(data.split(": ")[1])
       num = fibonnaci(limit)
   print num
#---------------------------

if __name__ == '__main__':
   print "listening on 9 ports - hit key to quit"
   mrun()
   mtask = task.LoopingCall(mrun)
   mtask.start(1.0)
   for i in range (0,(len(ports))):
       reactor.listenUDP(ports[i], server())
reactor.run()
#--------------------------






From exarkun at divmod.com  Mon Dec  4 11:33:19 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 11:33:19 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <45743EB9.3070204@acm.org>
Message-ID: <20061204163319.20948.961198706.divmod.quotient.57545@ohm>

On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> wrote:
>hi folks
>
>I am new to twisted and new to server programming. Nonetheless, I would like 
>to build a robust client-server looping mechanism in which a server would 
>listen for input from N clients, say 10, and react immediately when it 
>receives data from them. I have a sample (see below) that appears to run 
>well, but am not sure if it will scale under real network load and larger N.
>(I am parsing the input data received from the clients and using it to 
>calculate a fibonnaci series, just for testing. The reactor can be stopped 
>with keyboard input (I am on a win32 platform)).
>
>If you see any problems with this approach, please let me know !
>Thanks, marc

You probably need to be more specific to get many useful responses.  What
do you expect N to go to?  Why do you use multiple ports?  Why are you
using UDP?  What do you mean by "robust"?  What does the Fibonnaci calculation
have to do with the application?  Is the keyboard input handling code
relevant or just part of the example?  Is win32 your development platform
or your deployment platform or both?

Jean-Paul



From exarkun at divmod.com  Mon Dec  4 11:37:20 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 11:37:20 -0500
Subject: [Twisted-Python] peer 2 peer, udp, stdio -> very confused
In-Reply-To: <d54d6da30612040126j7dfe2e8cg22ef676d8a71417b@mail.gmail.com>
Message-ID: <20061204163720.20948.1570268843.divmod.quotient.57550@ohm>

On Mon, 4 Dec 2006 10:26:10 +0100, varname <varname at gmail.com> wrote:
>hi all,
>
>first: I have been reading the topics on this list regarding apps that
>need to be client/server at the same time, use udp, need to be able to
>react to user input while the reactor is running with much interest,
>but I'm very confused now as to how I should proceed with my own
>problem.
>
>In short: I'm trying to create a peer 2 peer application that has a
>text-based gui (commandline), driven by user input and communicates
>with other peers over udp (and occasionally over tcp, to transfer
>files).
>
>I'm just really confused over some basic concepts. Am I correct that I
>can just create a simple class extending protocol.DatagramProtocol to
>facilitate the raw udp sending / receiving?

That is how UDP works with Twisted, yes.

>Then use that in a Factory
>class (MyClientFactory) to 'layer' the p2p protocol functionality on?

Protocol factories aren't involved in UDP, since their purpose is to
expose the concept of a connection with a limited lifetime, a concept
lacking in UDP.

>Where do I put my stdio implementation then?

Standard IO is treated as a connection-oriented transport, so you
interact with it in much the same way as you would interact with a
TCP connection.  The primary difference is that instead of creating
a factory and passing it to connectTCP, you just create your protocol
and instantiate StandardIO with it.

>And am I right that the
>only thing needed for udp to work is to do a
>reactor.listenUDP(portnum, MyClientFactory()) or do I need to use two
>factory classes, one for the client 'bit' and one for the server?

Since there is only listenUDP, there's no place for a 2nd DatagramProtocol
to go.  You can manage both sending and receiving datagrams with a single
instance.

Jean-Paul



From marcbohlen at acm.org  Mon Dec  4 12:05:29 2006
From: marcbohlen at acm.org (marc bohlen)
Date: Mon, 04 Dec 2006 12:05:29 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <20061204163319.20948.961198706.divmod.quotient.57545@ohm>
References: <20061204163319.20948.961198706.divmod.quotient.57545@ohm>
Message-ID: <45745559.5070504@acm.org>

Jean-Paul Calderone wrote:
> On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> 
> wrote:
>> hi folks
>>
>> I am new to twisted and new to server programming. Nonetheless, I 
>> would like to build a robust client-server looping mechanism in which 
>> a server would listen for input from N clients, say 10, and react 
>> immediately when it receives data from them. I have a sample (see 
>> below) that appears to run well, but am not sure if it will scale 
>> under real network load and larger N.
>> (I am parsing the input data received from the clients and using it 
>> to calculate a fibonnaci series, just for testing. The reactor can be 
>> stopped with keyboard input (I am on a win32 platform)).
>>
>> If you see any problems with this approach, please let me know !
>> Thanks, marc
>
> You probably need to be more specific to get many useful responses.  What
> do you expect N to go to?  Why do you use multiple ports?  Why are you
> using UDP?  What do you mean by "robust"?  What does the Fibonnaci 
> calculation
> have to do with the application?  Is the keyboard input handling code
> relevant or just part of the example?  Is win32 your development platform
> or your deployment platform or both?
>
> Jean-Paul
>

Hi Jean-Paul

I would want N no larger than 30.
I am testing only on localhost and have N ports instead of N computers for now.
Fibonnaci calculation: just a cpu cycle eating app for testing, will change.
Keyboard handling is important.
Win32 is development and deployment platform.
UDP choice: I would like the faster of the two protocols (UDP vs TCP), although TCP has congestion
control. Is TCP the better choice here?
Robust: will it work even under heavy network load


marc




From exarkun at divmod.com  Mon Dec  4 12:59:02 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 12:59:02 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <45745559.5070504@acm.org>
Message-ID: <20061204175902.20948.75069653.divmod.quotient.57632@ohm>

On Mon, 04 Dec 2006 12:05:29 -0500, marc bohlen <marcbohlen at acm.org> wrote:
>Jean-Paul Calderone wrote:
>>On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> wrote:
>>>hi folks
>>>
>>>I am new to twisted and new to server programming. Nonetheless, I would 
>>>like to build a robust client-server looping mechanism in which a server 
>>>would listen for input from N clients, say 10, and react immediately when 
>>>it receives data from them. I have a sample (see below) that appears to 
>>>run well, but am not sure if it will scale under real network load and 
>>>larger N.
>>>(I am parsing the input data received from the clients and using it to 
>>>calculate a fibonnaci series, just for testing. The reactor can be stopped 
>>>with keyboard input (I am on a win32 platform)).
>>>
>>>If you see any problems with this approach, please let me know !
>>>Thanks, marc
>>
>>You probably need to be more specific to get many useful responses.  What
>>do you expect N to go to?  Why do you use multiple ports?  Why are you
>>using UDP?  What do you mean by "robust"?  What does the Fibonnaci 
>>calculation
>>have to do with the application?  Is the keyboard input handling code
>>relevant or just part of the example?  Is win32 your development platform
>>or your deployment platform or both?
>>
>>Jean-Paul
>
>Hi Jean-Paul
>
>I would want N no larger than 30.

30 is quite small.  There should be no performance issues related to
the network layer.

>I am testing only on localhost and have N ports instead of N computers for 
>now.

Okay.  So ultimately it will be 1 port communicating with N computers,
instead of the current N ports all communicating with 1 computer?

>Fibonnaci calculation: just a cpu cycle eating app for testing, will change.

I don't think your original example realistically represented CPU load.
It seems more likely that you will have some work to do in response to
each request, which corresponds to datagramReceived

>Keyboard handling is important.
>Win32 is development and deployment platform.

Win32 is pretty crummy.  I have no idea how well anything will work on
it.  I generally assume that it won't, at all.

>UDP choice: I would like the faster of the two protocols (UDP vs TCP), 
>although TCP has congestion
>control. Is TCP the better choice here?

If that's the primary metric, TCP is a better choice.

>Robust: will it work even under heavy network load

If _that's_ the primary metric, TCP is still a better choice. :)

Jean-Paul



From marcbohlen at acm.org  Mon Dec  4 13:32:29 2006
From: marcbohlen at acm.org (marc bohlen)
Date: Mon, 04 Dec 2006 13:32:29 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <20061204175902.20948.75069653.divmod.quotient.57632@ohm>
References: <20061204175902.20948.75069653.divmod.quotient.57632@ohm>
Message-ID: <457469BD.6060600@acm.org>

Jean-Paul Calderone wrote:
> On Mon, 04 Dec 2006 12:05:29 -0500, marc bohlen <marcbohlen at acm.org> 
> wrote:
>> Jean-Paul Calderone wrote:
>>> On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> 
>>> wrote:
>>>> hi folks
>>>>
>>>> I am new to twisted and new to server programming. Nonetheless, I 
>>>> would like to build a robust client-server looping mechanism in 
>>>> which a server would listen for input from N clients, say 10, and 
>>>> react immediately when it receives data from them. I have a sample 
>>>> (see below) that appears to run well, but am not sure if it will 
>>>> scale under real network load and larger N.
>>>> (I am parsing the input data received from the clients and using it 
>>>> to calculate a fibonnaci series, just for testing. The reactor can 
>>>> be stopped with keyboard input (I am on a win32 platform)).
>>>>
>>>> If you see any problems with this approach, please let me know !
>>>> Thanks, marc
>>>
>>> You probably need to be more specific to get many useful responses.  
>>> What
>>> do you expect N to go to?  Why do you use multiple ports?  Why are you
>>> using UDP?  What do you mean by "robust"?  What does the Fibonnaci 
>>> calculation
>>> have to do with the application?  Is the keyboard input handling code
>>> relevant or just part of the example?  Is win32 your development 
>>> platform
>>> or your deployment platform or both?
>>>
>>> Jean-Paul
>>
>> Hi Jean-Paul
>>
>> I would want N no larger than 30.
>
> 30 is quite small.  There should be no performance issues related to
> the network layer.
>
>> I am testing only on localhost and have N ports instead of N 
>> computers for now.
>
> Okay.  So ultimately it will be 1 port communicating with N computers,
> instead of the current N ports all communicating with 1 computer?
>> Fibonnaci calculation: just a cpu cycle eating app for testing, will 
>> change.
>
> I don't think your original example realistically represented CPU load.
> It seems more likely that you will have some work to do in response to
> each request, which corresponds to datagramReceived
>
>> Keyboard handling is important.
>> Win32 is development and deployment platform.
>
> Win32 is pretty crummy.  I have no idea how well anything will work on
> it.  I generally assume that it won't, at all.
>
>> UDP choice: I would like the faster of the two protocols (UDP vs 
>> TCP), although TCP has congestion
>> control. Is TCP the better choice here?
>
> If that's the primary metric, TCP is a better choice.

Then I'll use TCP.

>
>> Robust: will it work even under heavy network load
>
> If _that's_ the primary metric, TCP is still a better choice. :)
>
> Jean-Paul


Yes, that is correct,  N computers, one port.
If 30 is a small number, what would be a large one; what is the upper limit?
I'll use TCP then (and move the code over to a suse box :) )

thanks for the tips,
marc





From ncesar at lunix.com.ar  Mon Dec  4 14:56:00 2006
From: ncesar at lunix.com.ar (Nicolas D. Cesar)
Date: Mon, 4 Dec 2006 16:56:00 -0300
Subject: [Twisted-Python] Need Exception that will stop ther reactor
	within twistd
In-Reply-To: <20061202021133.11053.119016448.divmod.xquotient.1144@joule.divmod.com>
References: <20061202021133.11053.119016448.divmod.xquotient.1144@joule.divmod.com>
Message-ID: <200612041656.02224.ncesar@lunix.com.ar>

El Viernes, 1 de Diciembre de 2006 23:11, glyph at divmod.com escribi?:
> On 30 Nov, 08:00 pm, ncesar at lunix.com.ar wrote:
> My point is that you are artificially combining your application with your
> infrastructure.  The reactor is always potentially in use by multiple
> applications, so it is not the thing that should be stopped.

That's new to me! is there any documentation on "multiple applications" 
reactors? 

> >I have multiple LSTP (Linux Terminal Server Project) servers. All servers
> > are (almost) the same, and any of them can serve any client. There are
> > arround 8-12 servers and 150+ clients. I'm developing a twisted
> > application that balances clients requests (by filtering DHCP
> > discover/requests packets. (I attached an image, my application is called
> > multiltsp). I'm using ip_queue for this.
>
> OK.  So somewhere, there should be a MultiLTSPService which is the thing
> that gets stopped by these exceptions, I think.

I have a t.a.service.MultiService() serving all this inside an 
t.a.service.Application, where should I write the "try:.. except:" code? 

> >There is a LDAP somewhere that has all client MACs that are in the group
> > (eg. the 150 clients) and from time to time, multiltsp re-reads this
> > list. (I'm simplifying much of these details). I'll call this list
> > "ALL-MACS"... ... all multiltsp daemons MUST have the ALL-MACS list
> > identical, in case there is a out of sync[1] problem the (incorrect)
> > server must quit and the others must handle the clients.
>
> Shouldn't it just get informed that it is in an invalid state, and re-start
> itself, rather than shutting down entirely?  

Rebuilding your house won't stop the hurricane :-) re-starting won't bring it 
to a correct state, just because it's a problem from outside, usually 
asociated with a (sysadmin) human action. I need the process to stop (and 
send some mails) so it can be fully reparied with qualified supra-sysadmins. 
The MultiLTSP server can't be a zombie forever... But then again, i'm new to 
twisted (less than 5 month) and probably i'm misunderstanding twisted's 
components. 

> So there needs to be an object that represents the "whole application",
> which has references to all these services.  The reactor should not be
> serving that purpose.

I thought the main quit() was the reactor.stop(), my teachers were tutorials, 
is there any cleaner way to quit. There is a t.a.service.Application() should 
be used for this? should be used ANOTHER object?


-- 
Nicol?s D. C?sar <ncesar at lunix.com.ar>
Lunix S.R.L. -[ http://www.lunix.com.ar ]-
GnuPG Public Key: gpg --keyserver wwwkeys.pgp.net --recv-key 0x3606F3E6
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20061204/3e08c545/attachment.pgp 

From ncesar at lunix.com.ar  Mon Dec  4 15:43:06 2006
From: ncesar at lunix.com.ar (Nicolas D. Cesar)
Date: Mon, 4 Dec 2006 17:43:06 -0300
Subject: [Twisted-Python] Posible error in documentation
Message-ID: <200612041743.07043.ncesar@lunix.com.ar>

taken from
http://twistedmatrix.com/projects/core/documentation/howto/producers.html:

"Pull Producers

The pull producer API is defined by the IPushProducer interface. Pull 
producers are useful .."

shouldn't be the "IPullProducer interface" ..? Should I add a bug in TRAC? 

Greetings,
-- 
Nicol?s D. C?sar <ncesar at lunix.com.ar>
Lunix S.R.L. -[ http://www.lunix.com.ar ]-
GnuPG Public Key: gpg --keyserver wwwkeys.pgp.net --recv-key 0x3606F3E6
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20061204/d0a7e2de/attachment.pgp 

From mailinglists at grimmerink.nl  Mon Dec  4 16:16:17 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Mon, 4 Dec 2006 22:16:17 +0100
Subject: [Twisted-Python] web2: http Content-Length header
Message-ID: <200612042216.17762.mailinglists@grimmerink.nl>

Hi all,

I'm using twisted.web2.client.HTTPClientProtocol to implement a HTTP 
downloader object.

In order to show the download progress, I need the Content-Length header, 
which is found in the server response.
But it turns out this header is being removed from the response, because it 
is listed in connHeaderNames, twisted/web2/channel/http.py line 217.

Leaving 'content-length' out of this list gives me the valid content-length 
header in the response.

Is it really necessary to remove the content-length header from the 
response?

Regards, Pieter



From exarkun at divmod.com  Mon Dec  4 17:33:56 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 17:33:56 -0500
Subject: [Twisted-Python] Posible error in documentation
In-Reply-To: <200612041743.07043.ncesar@lunix.com.ar>
Message-ID: <20061204223356.20948.1608469500.divmod.quotient.57900@ohm>

On Mon, 4 Dec 2006 17:43:06 -0300, "Nicolas D. Cesar" <ncesar at lunix.com.ar> wrote:
>taken from
>http://twistedmatrix.com/projects/core/documentation/howto/producers.html:
>
>"Pull Producers
>
>The pull producer API is defined by the IPushProducer interface. Pull
>producers are useful .."
>
>shouldn't be the "IPullProducer interface" ..? Should I add a bug in TRAC?

Someone already spotted this and there's a ticket.  Thanks though.

Jean-Paul



From thostrup at gmail.com  Tue Dec  5 07:19:42 2006
From: thostrup at gmail.com (Henrik Thostrup Jensen)
Date: Tue, 5 Dec 2006 13:19:42 +0100
Subject: [Twisted-Python] Passing information from SSL postconnection check
	to application
Message-ID: <f33a4da20612050419q1ca5780ch340218b667d843@mail.gmail.com>

Hi

I have an application which uses M2Crypto authentication. I use the
wrapper supplied by M2Crypto, and can do postConnection check just
fine. I need to pass along some of the information from the client
credentials, but I cannot figure out how to do this.

The code looks something like this:

from twisted.application import service, internet
from twisted.protocols import policies
from M2Crypto import SSL
from M2Crypto.SSL.TwistedProtocolWrapper import TLSProtocolWrapper

def protocol_factory(factory, wrapped_protocol):

        wrapper = TLSProtocolWrapper(factory,
                                     wrapped_protocol,
                                     startPassThrough=0,
                                     client=0,
                                     contextFactory=ServerContextFactory(),
                                     postConnectionCheck=MyChecker())
        return wrapper


factory = ...

wrapper = policies.WrappingFactory(factory)
wrapper.protocol = protocol_factory
wrapper.protocol.TLS = True
factory.startTLS = True
factory.sslChecker = SSL.Checker.Checker()

factory = wrapper

application = service.Application('foo')
service = internet.TCPServer(8443, factory)
service.setServiceParent(application)

Currently the original factory is the factory from twisted.web2, but
I would like to be able to do this, on a general level, e.g., from AMP
as well. Setting the information into some global value is sure to fail,
but I cannot see how else to propagate information.

-- 
   - Henrik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061205/eabea516/attachment.htm 

From mailinglists at grimmerink.nl  Tue Dec  5 16:55:37 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Tue, 5 Dec 2006 22:55:37 +0100
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <200612042216.17762.mailinglists@grimmerink.nl>
References: <200612042216.17762.mailinglists@grimmerink.nl>
Message-ID: <200612052255.37751.mailinglists@grimmerink.nl>

On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
> Is it really necessary to remove the content-length header from the
> response?

Correction, it turns out indeed it has to be removed. If it isn't stripped 
from the response, somehow the download stops after a single block of data 
has been received.

Since the content-length is saved in self.length, the following could be a 
workaround (and it does work fine here):

Add the Content-Length header again after calling setConnectionParams, at 
the bottom of allHeadersReceived (line 195 twisted/web2/channel/http.py)

  self.inHeaders.setHeader('Content-Length', str(self.length))

What exactly goes wrong with setConnectionParams when the Content-Length 
header is not (temporarily) removed is not 100% clear to me, so there 
probably are better solutions for this problem.

Regards, Pieter



From atlithorn at gmail.com  Tue Dec  5 17:51:06 2006
From: atlithorn at gmail.com (=?ISO-8859-1?Q?Atli_=DEorbj=F6rnsson?=)
Date: Tue, 5 Dec 2006 22:51:06 +0000
Subject: [Twisted-Python] twisted dohop
Message-ID: <91142a380612051451k441243f8vd438f5daf618c3f8@mail.gmail.com>

We would like to be added to the ProjectsUsingTwisted page. dohop.com is a
flight planner and twisted runs what we call our "priceserver". The
priceserver is under a substantial amount of load and twisted handles the
job handsomely.

Try it out at http://www.dohop.com

The backend of the site runs otherwise almost wholly on Python with bits and
pieces in C. We do a lot of django under mod_python with a mysql db.

Hope you see us fit for a mention and thank you for the amazing framework
that is twisted.

Atli Thorbjornsson
dohop.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061205/ed12d2e0/attachment.htm 

From radix at twistedmatrix.com  Tue Dec  5 18:18:14 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 5 Dec 2006 18:18:14 -0500
Subject: [Twisted-Python] twisted dohop
In-Reply-To: <91142a380612051451k441243f8vd438f5daf618c3f8@mail.gmail.com>
References: <91142a380612051451k441243f8vd438f5daf618c3f8@mail.gmail.com>
Message-ID: <60ed19d40612051518j3adf62c4hb73ce4b8abc2c4d@mail.gmail.com>

On 12/5/06, Atli ?orbj?rnsson <atlithorn at gmail.com> wrote:
> We would like to be added to the ProjectsUsingTwisted page. dohop.com is a
> flight planner and twisted runs what we call our "priceserver". The
> priceserver is under a substantial amount of load and twisted handles the
> job handsomely.
>
> Try it out at http://www.dohop.com

Ok, I've added it to the ProjectsUsingTwisted page, but really, this
kind of thing (that is, a commercial service) would be much more
appropriate on the SuccessStories page -- it would be great if you
could give us a few official sentences about how Twisted helped you
develop this service so we could put it there.

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From dreid at dreid.org  Tue Dec  5 19:54:41 2006
From: dreid at dreid.org (David Reid)
Date: Tue, 5 Dec 2006 16:54:41 -0800
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <200612052255.37751.mailinglists@grimmerink.nl>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612052255.37751.mailinglists@grimmerink.nl>
Message-ID: <48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>


On Dec 5, 2006, at 1:55 PM, Pieter Grimmerink wrote:

> On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
>> Is it really necessary to remove the content-length header from the
>> response?
>
> Correction, it turns out indeed it has to be removed. If it isn't  
> stripped
> from the response, somehow the download stops after a single block  
> of data
> has been received.
>
> Since the content-length is saved in self.length, the following  
> could be a
> workaround (and it does work fine here):

Why don't you just use self.length when showing the progress?
-David

David Reid
http://dreid.org/





From hxianping at gmail.com  Wed Dec  6 02:23:49 2006
From: hxianping at gmail.com (Steve Han)
Date: Wed, 6 Dec 2006 15:23:49 +0800
Subject: [Twisted-Python] Problems with building of twisted-2.4.0
Message-ID: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>

Hi all,
I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the messages
as the following:

 ...build/temp.linux-i686-2.4/Dependencies/zope.interface-
ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
unable to execute gcc: No such file or directory
error: command 'gcc' failed with exit status 1

What does mean by that?
Which packages I need for building Twisted/ZopeInterface?
Thanks alot.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061206/4a846c3c/attachment.htm 

From robert at gravina.com  Wed Dec  6 03:03:20 2006
From: robert at gravina.com (Robert Gravina)
Date: Wed, 6 Dec 2006 17:03:20 +0900
Subject: [Twisted-Python] Problems with building of twisted-2.4.0
In-Reply-To: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
References: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
Message-ID: <20140598-9163-4239-9729-FF91F103B914@gravina.com>

> Hi all,
> I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the  
> messages as the following:
>
>  ...build/temp.linux-i686-2.4/Dependencies/zope.interface- 
> ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> unable to execute gcc: No such file or directory
> error: command 'gcc' failed with exit status 1
>
> What does mean by that?
> Which packages I need for building Twisted/ZopeInterface?
> Thanks alot.

It seems that you are running Linux, but don't have GCC (a C  
compiler) installed. Parts of Zope Interface (and Twisted, too) are  
written in C, so one is needed. Most Linux distributions install one  
automatically, but as far as I know some don't if you don't  ask it  
to install development software. Either that, or it's installed but  
not in your PATH.

Anyhow, there should be a GUI program for adding/removing programs,  
so use it to install "gcc". If not,  and you are using Ubuntu or  
Debian "apt-get install gcc" or for Fedora try "yum install gcc" and  
then try building Twisted again.

Please excuse me if you know all this already (you are building  
Twisted after all). It just seems like problem is that GCC is not  
installed/cannot be found.

Robert




From mailinglists at grimmerink.nl  Wed Dec  6 04:35:11 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Wed, 6 Dec 2006 10:35:11 +0100
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612052255.37751.mailinglists@grimmerink.nl>
	<48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>
Message-ID: <200612061035.12521.mailinglists@grimmerink.nl>

On Wednesday 06 December 2006 01:54, David Reid wrote:
> Why don't you just use self.length when showing the progress?

The length is not passed to the Response object.

twisted/web2/client/http.py line 168:
self.response = http.Response(self.code, self.inHeaders, self.stream)

This response object is then passed to the responseDefer callback, which 
means we only have resultcode, headers and stream to work with.

Rgds, Pieter



From gabrielverta at gmail.com  Wed Dec  6 07:23:32 2006
From: gabrielverta at gmail.com (Gabriel)
Date: Wed, 6 Dec 2006 04:23:32 -0800
Subject: [Twisted-Python] Thread
Message-ID: <2254669b0612060423t4f75043auef8424ab3b5e257f@mail.gmail.com>

Hi!!

I'm new in Twisted, and I'm having problems with Thread.
I was looking for it at documentation, and saw that it's not safe
(!?), but it's possible to run using twisted.python.threadable, I
haven't understood the thread examples using simple TCP and
ServerFactoryl, there is anything like reactor.run() using it or can I
only use threads as client? Can anyone give me a basic example?

Thanks!

from Brazil...

         Gabriel
www.garimpar.com



From exarkun at divmod.com  Wed Dec  6 08:49:50 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Wed, 6 Dec 2006 08:49:50 -0500
Subject: [Twisted-Python] Thread
In-Reply-To: <2254669b0612060423t4f75043auef8424ab3b5e257f@mail.gmail.com>
Message-ID: <20061206134950.20948.1512853559.divmod.quotient.60088@ohm>

On Wed, 6 Dec 2006 04:23:32 -0800, Gabriel <gabrielverta at gmail.com> wrote:
>Hi!!
>
>I'm new in Twisted, and I'm having problems with Thread.
>I was looking for it at documentation, and saw that it's not safe
>(!?), but it's possible to run using twisted.python.threadable, I
>haven't understood the thread examples using simple TCP and
>ServerFactoryl, there is anything like reactor.run() using it or can I
>only use threads as client? Can anyone give me a basic example?
>
>Thanks!
>
>from Brazil...
>
>         Gabriel
>www.garimpar.com
>

You don't need threads to do most things in Twisted.  More than that,
threads aren't /helpful/ for doing most things in Twisted.  More than
that, most of Twisted was written so that threads could be avoided.

Jean-Paul



From foom at fuhm.net  Wed Dec  6 11:23:24 2006
From: foom at fuhm.net (James Y Knight)
Date: Wed, 6 Dec 2006 11:23:24 -0500
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <200612061035.12521.mailinglists@grimmerink.nl>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612052255.37751.mailinglists@grimmerink.nl>
	<48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>
	<200612061035.12521.mailinglists@grimmerink.nl>
Message-ID: <1869B98D-5F03-49E0-9084-80771CE346F2@fuhm.net>


On Dec 6, 2006, at 4:35 AM, Pieter Grimmerink wrote:

> On Wednesday 06 December 2006 01:54, David Reid wrote:
>> Why don't you just use self.length when showing the progress?
>
> The length is not passed to the Response object.
>
> twisted/web2/client/http.py line 168:
> self.response = http.Response(self.code, self.inHeaders, self.stream)
>
> This response object is then passed to the responseDefer callback,  
> which
> means we only have resultcode, headers and stream to work with.

Sorry for not responding before. The Content-Length is removed from  
the set of headers and moved to an attribute of the stream. This is  
so that if anybody does content transforms before you get the data  
(e.g. transparent uncompressing/etc), the length and the data is in  
the same place, among other reasons.

You're supposed to get the length from the stream object.  
stream.length is an integer if the content length is known, and None  
if it is not known.

James




From mailinglists at grimmerink.nl  Wed Dec  6 12:39:40 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Wed, 6 Dec 2006 18:39:40 +0100
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <1869B98D-5F03-49E0-9084-80771CE346F2@fuhm.net>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612061035.12521.mailinglists@grimmerink.nl>
	<1869B98D-5F03-49E0-9084-80771CE346F2@fuhm.net>
Message-ID: <200612061839.40844.mailinglists@grimmerink.nl>

On Wednesday 06 December 2006 17:23, James Y Knight wrote:
> You're supposed to get the length from the stream object.
> stream.length is an integer if the content length is known, and None
> if it is not known.

But stream.length is always None, even though the Content-Length is 
specified.

Pasted below is an example which demonstrates what I'm doing.
This is the response I'm getting:

<twisted.web2.http.Response code=302, streamlen=None>

And this is the response, when I add the line

self.stream.length = self.length

in twisted/web2/client/http.py, line 168:

<twisted.web2.http.Response code=302, streamlen=228>

Rgds, Pieter

---------------------------------------------------

from twisted.internet import protocol
from twisted.web2 import stream as stream_mod, http, http_headers, 
responsecode
from twisted.web2.client.http import ClientRequest, HTTPClientProtocol

def testConn(host):
    from twisted.internet import reactor
    d = protocol.ClientCreator(reactor, HTTPClientProtocol).connectTCP(host, 
80)
    def gotResp(resp):
        def print_(n):
            print "DATA"
        def printdone(n):
            print "DONE"
        print "GOT RESPONSE %s" % resp
        stream_mod.readStream(resp.stream, print_).addCallback(printdone)
    def sendReqs(proto):
        proto.submitRequest(ClientRequest("GET", "/index.html", 
{'Host':host}, None)).addCallback(gotResp)
    d.addCallback(sendReqs)
    del d
    reactor.run()

testConn("www.google.com")



From teratorn at twistedmatrix.com  Thu Dec  7 04:54:05 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 07 Dec 2006 03:54:05 -0600
Subject: [Twisted-Python] What Win32 issues are important to you?
Message-ID: <op.tj6ogf0xy3d107@office2>

I'm going to set aside some time to work on win32 issues, and was  
wondering what tickets are particularly important for the folks out there?

-- 
Eric Mangold
Twisted/Win32 Maintainer



From nico at tekNico.net  Thu Dec  7 05:59:03 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu, 07 Dec 2006 11:59:03 +0100
Subject: [Twisted-Python] Re: Problems with building of twisted-2.4.0
In-Reply-To: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
References: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
Message-ID: <el8s5n$79u$1@sea.gmane.org>

Steve Han wrote:
> Hi all,
> I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the
> messages as the following:
> 
>  ...build/temp.linux-i686-2.4/Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> 
> unable to execute gcc: No such file or directory
> error: command 'gcc' failed with exit status 1
> 
> What does mean by that?
> Which packages I need for building Twisted/ZopeInterface?

You do not have gcc (the GNU Compiler Collection) installed. If you are
using Ubuntu Linux (or Kubuntu, or Xubuntu, or Edubuntu, or...), use this
command:

$ sudo apt-get install build-essential

If you are using another distribution, you'll have to come up with the
equivalent command.


-- 
Nicola Larosa - http://www.tekNico.net/

If users expect the Nintendo Wii to be truly off, they need to pull the
power plug -- assuming there isn't a battery foiling that tactic. There
seems to be no way to disconnect the Internet, as the Nintendo Wii is
wireless only. Maybe there is no way to turn the Nintendo Wii off.
 -- Bruce Schneier, May 2006




From jml at mumak.net  Thu Dec  7 19:16:29 2006
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 8 Dec 2006 11:16:29 +1100
Subject: [Twisted-Python] What Win32 issues are important to you?
In-Reply-To: <op.tj6ogf0xy3d107@office2>
References: <op.tj6ogf0xy3d107@office2>
Message-ID: <d06a5cd30612071616x70541f2h1ca9f6cf1ad89c09@mail.gmail.com>

On 12/7/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> I'm going to set aside some time to work on win32 issues, and was
> wondering what tickets are particularly important for the folks out there?
>

Hey Eric,

Thanks for showing the Windows love.  The most pressing win32 issue
for me is the large number of reactor unclean warnings in the
win32event reactor.

>From #2091:
    One other thing: the win32-win32er slave had about 250 more errors
    with this branch merged than without it. win32er may not be a
    completely supported reactor, but introducing this many new errors
    to even an unsupported reactor makes me very nervous and I think
    we should try to avoid doing it.


Another very important issue is the buildslaves. As a UNIX[1]
developer, the buildslaves are my primary point of interaction with
the Windows world. This leads to two things:

    1. It's hard to care about the win32er and iocp reactors when they
are always red.[2]
    2. It would be very nice for the "remove-.pyc" step to always work.


That's it from me. Thanks again for taking the time to look after win32.

cheers,
jml

[1] I feel justified in calling Mac OS X a UNIX. It helps me sleep.
[2] Perhaps we should have two buildbot pages: "supported" and
"unsupported". win32er, iocp, tsr, pypy and friends can all hide on
"unsupported".



From hxianping at gmail.com  Thu Dec  7 22:08:26 2006
From: hxianping at gmail.com (Steve Han)
Date: Fri, 8 Dec 2006 11:08:26 +0800
Subject: [Twisted-Python] Re: Twisted-Python Digest, Vol 33, Issue 6
In-Reply-To: <E1Gs0kH-0003PB-02@pyramid.twistedmatrix.com>
References: <E1Gs0kH-0003PB-02@pyramid.twistedmatrix.com>
Message-ID: <702805a90612071908g41e5d577m20db2707ab66ff0d@mail.gmail.com>

Thank you very much Robert.I have been using SuSE10.0 that contained
twisted.I could not find twisted when updating to SuSE10.1Wired.I am back to
suse10.0 again.I will learn more about twisted from now.

On 12/7/06, twisted-python-request at twistedmatrix.com <
twisted-python-request at twistedmatrix.com> wrote:
>
> Send Twisted-Python mailing list submissions to
>         twisted-python at twistedmatrix.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> or, via email, send a message with subject or body 'help' to
>         twisted-python-request at twistedmatrix.com
>
> You can reach the person managing the list at
>         twisted-python-owner at twistedmatrix.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Twisted-Python digest..."
>
>
> Today's Topics:
>
>    1. Re: web2: http Content-Length header (Pieter Grimmerink)
>    2. twisted dohop ( Atli ?orbj?rnsson )
>    3. Re: twisted dohop (Christopher Armstrong)
>    4. Re: web2: http Content-Length header (David Reid)
>    5. Problems with building of twisted-2.4.0 (Steve Han)
>    6. Re: Problems with building of twisted-2.4.0 (Robert Gravina)
>    7. Re: web2: http Content-Length header (Pieter Grimmerink)
>    8. Thread (Gabriel)
>    9. Re: Thread (Jean-Paul Calderone)
>   10. Re: web2: http Content-Length header (James Y Knight)
>   11. Re: web2: http Content-Length header (Pieter Grimmerink)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 5 Dec 2006 22:55:37 +0100
> From: Pieter Grimmerink <mailinglists at grimmerink.nl>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <200612052255.37751.mailinglists at grimmerink.nl>
> Content-Type: text/plain;  charset="us-ascii"
>
> On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
> > Is it really necessary to remove the content-length header from the
> > response?
>
> Correction, it turns out indeed it has to be removed. If it isn't stripped
> from the response, somehow the download stops after a single block of data
> has been received.
>
> Since the content-length is saved in self.length, the following could be a
> workaround (and it does work fine here):
>
> Add the Content-Length header again after calling setConnectionParams, at
> the bottom of allHeadersReceived (line 195 twisted/web2/channel/http.py)
>
>   self.inHeaders.setHeader('Content-Length', str(self.length))
>
> What exactly goes wrong with setConnectionParams when the Content-Length
> header is not (temporarily) removed is not 100% clear to me, so there
> probably are better solutions for this problem.
>
> Regards, Pieter
>
>
>
> ------------------------------
>
> Message: 2
> Date: Tue, 5 Dec 2006 22:51:06 +0000
> From: " Atli ?orbj?rnsson " <atlithorn at gmail.com>
> Subject: [Twisted-Python] twisted dohop
> To: twisted-python at twistedmatrix.com
> Message-ID:
>         <91142a380612051451k441243f8vd438f5daf618c3f8 at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> We would like to be added to the ProjectsUsingTwisted page. dohop.com is a
> flight planner and twisted runs what we call our "priceserver". The
> priceserver is under a substantial amount of load and twisted handles the
> job handsomely.
>
> Try it out at http://www.dohop.com
>
> The backend of the site runs otherwise almost wholly on Python with bits
> and
> pieces in C. We do a lot of django under mod_python with a mysql db.
>
> Hope you see us fit for a mention and thank you for the amazing framework
> that is twisted.
>
> Atli Thorbjornsson
> dohop.com
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20061205/ed12d2e0/attachment-0001.htm
>
> ------------------------------
>
> Message: 3
> Date: Tue, 5 Dec 2006 18:18:14 -0500
> From: "Christopher Armstrong" <radix at twistedmatrix.com>
> Subject: Re: [Twisted-Python] twisted dohop
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Message-ID:
>         <60ed19d40612051518j3adf62c4hb73ce4b8abc2c4d at mail.gmail.com>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
> On 12/5/06, Atli ?orbj?rnsson <atlithorn at gmail.com> wrote:
> > We would like to be added to the ProjectsUsingTwisted page. dohop.com is
> a
> > flight planner and twisted runs what we call our "priceserver". The
> > priceserver is under a substantial amount of load and twisted handles
> the
> > job handsomely.
> >
> > Try it out at http://www.dohop.com
>
> Ok, I've added it to the ProjectsUsingTwisted page, but really, this
> kind of thing (that is, a commercial service) would be much more
> appropriate on the SuccessStories page -- it would be great if you
> could give us a few official sentences about how Twisted helped you
> develop this service so we could put it there.
>
> --
> Christopher Armstrong
> International Man of Twistery
> http://radix.twistedmatrix.com/
> http://twistedmatrix.com/
> http://canonical.com/
>
> ------------------------------
>
> Message: 4
> Date: Tue, 5 Dec 2006 16:54:41 -0800
> From: David Reid <dreid at dreid.org>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <48238A9C-A227-4816-991F-93FCA3F94C26 at dreid.org>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
>
> On Dec 5, 2006, at 1:55 PM, Pieter Grimmerink wrote:
>
> > On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
> >> Is it really necessary to remove the content-length header from the
> >> response?
> >
> > Correction, it turns out indeed it has to be removed. If it isn't
> > stripped
> > from the response, somehow the download stops after a single block
> > of data
> > has been received.
> >
> > Since the content-length is saved in self.length, the following
> > could be a
> > workaround (and it does work fine here):
>
> Why don't you just use self.length when showing the progress?
> -David
>
> David Reid
> http://dreid.org/
>
>
>
>
>
> ------------------------------
>
> Message: 5
> Date: Wed, 6 Dec 2006 15:23:49 +0800
> From: "Steve Han" <hxianping at gmail.com>
> Subject: [Twisted-Python] Problems with building of twisted-2.4.0
> To: twisted-python <twisted-python at twistedmatrix.com>
> Message-ID:
>         <702805a90612052323t780ee7e5h326917b2ce44713b at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi all,
> I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the messages
> as the following:
>
> ...build/temp.linux-i686-2.4/Dependencies/zope.interface-
> ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> unable to execute gcc: No such file or directory
> error: command 'gcc' failed with exit status 1
>
> What does mean by that?
> Which packages I need for building Twisted/ZopeInterface?
> Thanks alot.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20061206/4a846c3c/attachment-0001.htm
>
> ------------------------------
>
> Message: 6
> Date: Wed, 6 Dec 2006 17:03:20 +0900
> From: Robert Gravina <robert at gravina.com>
> Subject: Re: [Twisted-Python] Problems with building of twisted-2.4.0
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <20140598-9163-4239-9729-FF91F103B914 at gravina.com>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
> > Hi all,
> > I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the
> > messages as the following:
> >
> >  ...build/temp.linux-i686-2.4/Dependencies/zope.interface-
> > ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> > unable to execute gcc: No such file or directory
> > error: command 'gcc' failed with exit status 1
> >
> > What does mean by that?
> > Which packages I need for building Twisted/ZopeInterface?
> > Thanks alot.
>
> It seems that you are running Linux, but don't have GCC (a C
> compiler) installed. Parts of Zope Interface (and Twisted, too) are
> written in C, so one is needed. Most Linux distributions install one
> automatically, but as far as I know some don't if you don't  ask it
> to install development software. Either that, or it's installed but
> not in your PATH.
>
> Anyhow, there should be a GUI program for adding/removing programs,
> so use it to install "gcc". If not,  and you are using Ubuntu or
> Debian "apt-get install gcc" or for Fedora try "yum install gcc" and
> then try building Twisted again.
>
> Please excuse me if you know all this already (you are building
> Twisted after all). It just seems like problem is that GCC is not
> installed/cannot be found.
>
> Robert
>
>
>
>
> ------------------------------
>
> Message: 7
> Date: Wed, 6 Dec 2006 10:35:11 +0100
> From: Pieter Grimmerink <mailinglists at grimmerink.nl>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <200612061035.12521.mailinglists at grimmerink.nl>
> Content-Type: text/plain;  charset="us-ascii"
>
> On Wednesday 06 December 2006 01:54, David Reid wrote:
> > Why don't you just use self.length when showing the progress?
>
> The length is not passed to the Response object.
>
> twisted/web2/client/http.py line 168:
> self.response = http.Response(self.code, self.inHeaders, self.stream)
>
> This response object is then passed to the responseDefer callback, which
> means we only have resultcode, headers and stream to work with.
>
> Rgds, Pieter
>
>
>
> ------------------------------
>
> Message: 8
> Date: Wed, 6 Dec 2006 04:23:32 -0800
> From: Gabriel <gabrielverta at gmail.com>
> Subject: [Twisted-Python] Thread
> To: twisted-python at twistedmatrix.com
> Message-ID:
>         <2254669b0612060423t4f75043auef8424ab3b5e257f at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Hi!!
>
> I'm new in Twisted, and I'm having problems with Thread.
> I was looking for it at documentation, and saw that it's not safe
> (!?), but it's possible to run using twisted.python.threadable, I
> haven't understood the thread examples using simple TCP and
> ServerFactoryl, there is anything like reactor.run() using it or can I
> only use threads as client? Can anyone give me a basic example?
>
> Thanks!
>
> from Brazil...
>
>          Gabriel
> www.garimpar.com
>
>
>
> ------------------------------
>
> Message: 9
> Date: Wed, 6 Dec 2006 08:49:50 -0500
> From: Jean-Paul Calderone <exarkun at divmod.com>
> Subject: Re: [Twisted-Python] Thread
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID:
>         <20061206134950.20948.1512853559.divmod.quotient.60088 at ohm>
> Content-Type: text/plain; format=flowed
>
> On Wed, 6 Dec 2006 04:23:32 -0800, Gabriel <gabrielverta at gmail.com> wrote:
> >Hi!!
> >
> >I'm new in Twisted, and I'm having problems with Thread.
> >I was looking for it at documentation, and saw that it's not safe
> >(!?), but it's possible to run using twisted.python.threadable, I
> >haven't understood the thread examples using simple TCP and
> >ServerFactoryl, there is anything like reactor.run() using it or can I
> >only use threads as client? Can anyone give me a basic example?
> >
> >Thanks!
> >
> >from Brazil...
> >
> >         Gabriel
> >www.garimpar.com
> >
>
> You don't need threads to do most things in Twisted.  More than that,
> threads aren't /helpful/ for doing most things in Twisted.  More than
> that, most of Twisted was written so that threads could be avoided.
>
> Jean-Paul
>
>
>
> ------------------------------
>
> Message: 10
> Date: Wed, 6 Dec 2006 11:23:24 -0500
> From: James Y Knight <foom at fuhm.net>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <1869B98D-5F03-49E0-9084-80771CE346F2 at fuhm.net>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
>
> On Dec 6, 2006, at 4:35 AM, Pieter Grimmerink wrote:
>
> > On Wednesday 06 December 2006 01:54, David Reid wrote:
> >> Why don't you just use self.length when showing the progress?
> >
> > The length is not passed to the Response object.
> >
> > twisted/web2/client/http.py line 168:
> > self.response = http.Response(self.code, self.inHeaders, self.stream)
> >
> > This response object is then passed to the responseDefer callback,
> > which
> > means we only have resultcode, headers and stream to work with.
>
> Sorry for not responding before. The Content-Length is removed from
> the set of headers and moved to an attribute of the stream. This is
> so that if anybody does content transforms before you get the data
> (e.g. transparent uncompressing/etc), the length and the data is in
> the same place, among other reasons.
>
> You're supposed to get the length from the stream object.
> stream.length is an integer if the content length is known, and None
> if it is not known.
>
> James
>
>
>
>
> ------------------------------
>
> Message: 11
> Date: Wed, 6 Dec 2006 18:39:40 +0100
> From: Pieter Grimmerink <mailinglists at grimmerink.nl>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <200612061839.40844.mailinglists at grimmerink.nl>
> Content-Type: text/plain;  charset="us-ascii"
>
> On Wednesday 06 December 2006 17:23, James Y Knight wrote:
> > You're supposed to get the length from the stream object.
> > stream.length is an integer if the content length is known, and None
> > if it is not known.
>
> But stream.length is always None, even though the Content-Length is
> specified.
>
> Pasted below is an example which demonstrates what I'm doing.
> This is the response I'm getting:
>
> <twisted.web2.http.Response code=302, streamlen=None>
>
> And this is the response, when I add the line
>
> self.stream.length = self.length
>
> in twisted/web2/client/http.py, line 168:
>
> <twisted.web2.http.Response code=302, streamlen=228>
>
> Rgds, Pieter
>
> ---------------------------------------------------
>
> from twisted.internet import protocol
> from twisted.web2 import stream as stream_mod, http, http_headers,
> responsecode
> from twisted.web2.client.http import ClientRequest, HTTPClientProtocol
>
> def testConn(host):
>     from twisted.internet import reactor
>     d = protocol.ClientCreator(reactor,
> HTTPClientProtocol).connectTCP(host,
> 80)
>     def gotResp(resp):
>         def print_(n):
>             print "DATA"
>         def printdone(n):
>             print "DONE"
>         print "GOT RESPONSE %s" % resp
>         stream_mod.readStream(resp.stream, print_).addCallback(printdone)
>     def sendReqs(proto):
>         proto.submitRequest(ClientRequest("GET", "/index.html",
> {'Host':host}, None)).addCallback(gotResp)
>     d.addCallback(sendReqs)
>     del d
>     reactor.run()
>
> testConn("www.google.com")
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest, Vol 33, Issue 6
> *********************************************
>



-- 
Steve Han
Tel:(0531)82704691   13864091826
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061208/60c4a37f/attachment.htm 

From hoadley at gmail.com  Thu Dec  7 23:39:24 2006
From: hoadley at gmail.com (Rob Hoadley)
Date: Thu, 7 Dec 2006 20:39:24 -0800
Subject: [Twisted-Python] delay_connect problems in twisted.enterprise.adbapi
Message-ID: <9bb390e70612072039r425951f8g6cc6c39ccd012cc2@mail.gmail.com>

Hello,

I'm having a problem using twisted.enterprise.adbapi.

The problem has to do with the 'delay_connect' option I send with my db
connection kwargs.  I want to send sybase connection appname and hostname
info.  The only way I can do this is using the delayed connect option.

I have the following standalone program example that works just fine:

vrdb = vr_db('billing_db', 'appname')
# vr_db just is a helper class for logical dbname -> db connection info

db_kwargs  = vrdb.return_kwargs()

db_kwargs['cp_min'] = 1  # one thread min
db_kwargs['cp_max'] = 1  # one thread max  = only one db connection
db_kwargs['cp_reconnect'] = 1  # reconnect if die
db_kwargs['cp_noisy'] =  1
db_kwargs['delay_connect'] = 1 #  do the delayed connect
db_kwargs['cp_openfun'] = vrdb._vrdbOptions

print db_kwargs
dbpool = adbapi.ConnectionPool(vrdb.return_import_name(), **db_kwargs)

# _vrdbOptions adds the following two things to the connection
# conn.set_property (Sybase.CS_HOSTNAME, self.hostname)
# conn.set_property(Sybase.CS_APPNAME, self.appname)


a = storage(dbpool, d)
a.run()
reactor.run()

run does a sql query.

   def run(self):
        ''' utility method if the script is called directly '''
        self.get_campaign_info('id', 588103).addCallback( self.print_result
).addErrback(self.error_happened)

This works fine and dandy.  With the hostname and appname showing up in my
sp_who optput (show's you who's logged in from where with what appname )

Now my problem is when I use the database connection part in
makeService(config) and pass a dbpool to a service, my service starts up
fine,  but when
I have a database operation I get this:



2006/12/07 15:46:17 PST [-] [Failure instance: Traceback:
twisted.enterprise.adbapi.ConnectionLost:
        /usr/lib/python2.4/threading.py:422:run

/usr/lib/python2.4/site-packages/twisted/python/threadpool.py:148:_worker

/usr/lib/python2.4/site-packages/twisted/python/context.py:59:callWithContext


/usr/lib/python2.4/site-packages/twisted/python/context.py:37:callWithContext
        --- <exception caught here> ---

/usr/lib/python2.4/site-packages/twisted/internet/threads.py:25:_putResultInDeferred


/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:379:_runInteraction

/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:64:rollback
        ]


So I've reverted my code to pass db_kwargs['delay_connect'] = 0 and it's
working fine as long as I don't try the delay_connect.   I'm  hoping someone
has seen this before and can point me in the right direction.  I'd really
like to have my appname and hostname show up on the db side.

I'm using twisted, sybase 12.5,  and the most recent Sybase module.  The
only difference is the way I'm connecting is one program is a tap created
from mktap and the other a standalone script.

>>> import Sybase
>>> Sybase.__version__
'0.37'
>>> import twisted
>>> twisted.__version__
'2.4.0'

Thanks

-rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061207/f777d907/attachment.htm 

From glyph at divmod.com  Fri Dec  8 02:53:47 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Fri, 08 Dec 2006 07:53:47 -0000
Subject: [Twisted-Python] delay_connect problems in
	twisted.enterprise.adbapi
Message-ID: <20061208075347.28587.617754074.divmod.xquotient.539@joule.divmod.com>

On 04:39 am, hoadley at gmail.com wrote:

>I'm using twisted, sybase 12.5,  and the most recent Sybase module.  The
>only difference is the way I'm connecting is one program is a tap created
>from mktap and the other a standalone script.

Sadly, I am totally unfamiliar with the sybase module and so I can't help you myself.  However, if someone else using the sybase module were posting to this list, it would be good to know whether this issue also occurs with the most recent trunk checkout of Twisted SVN.

If so, then at least it might be worthwhile to open a bug (with a minimal example attached) in the tracker.  If not, then at least you could use a recent release of trunk to work around the issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061208/b37881f1/attachment.htm 

From cedepaula at yahoo.com.br  Fri Dec  8 08:27:09 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Fri, 8 Dec 2006 13:27:09 +0000 (UTC)
Subject: [Twisted-Python] Perspective Broker Anonymous access..
Message-ID: <loom.20061208T141917-794@post.gmane.org>

I?m just learning how to use twisted PB and playing with the chat server...

I?m trying to create a way to allow authenticated and anonymous users into the
system but can't figure how to make it.

Here what i?m trying to do:

----------SERVER------------

    def requestAvatar(self, avatarId, mind, *interfaces):
        assert pb.IPerspective in interfaces
        return pb.IPerspective, MyPerspective(avatarId), lambda:None

p = portal.Portal(MyRealm())
c = checkers.InMemoryUsernamePasswordDatabaseDontUse(user1="pass1",
                                                     user2="pass2")            
                                        

p.registerChecker(checkers.AllowAnonymousAccess(), credentials.Anonymous())
p.registerChecker(c)
reactor.listenTCP(8800, pb.PBServerFactory(p))
reactor.run()

-----------------------------
           CLIENT
    factory = pb.PBClientFactory()
    reactor.connectTCP("localhost", 8800, factory)
    def1 = factory.login(credentials.Anonymous())
    def1.addCallback(connected)
    reactor.run()

-----------------------------

It dont work this way, giving me this error:

Traceback (most recent call last):
Failure: twisted.cred.error.UnauthorizedLogin:


Another way i tried to register only the AllowAnonymousAccess in the server but
the following error popped:

Traceback (most recent call last):
Failure: twisted.cred.error.UnhandledCredentials: No checker for twisted.cred.cr
edentials.IUsernameHashedPassword, twisted.spread.pb.IUsernameMD5Password, twist
ed.spread.interfaces.IJellyable


Looks like PB doesn?t support anonymous access but from documentation i saw that
i can do the following:

# anonymous users share one Avatar, named users each get their own
    def requestAvatar(self, avatarID, mind, *interfaces):
        assert pb.IPerspective in interfaces
        if avatarID == checkers.ANONYMOUS:
            return pb.IPerspective, self.anonAvatar, lambda:None
        else:
            return pb.IPerspective, self.avatars[avatarID], lambda:None


Just dont know how.... I already checked the PB internals (pb, portal, checkers,
credentials) and havent figured out how to add anonymous support to PB... if you
guys could help me I?m commited to add this support...

Thanks for all,

Carlos Eduardo








From cedepaula at yahoo.com.br  Fri Dec  8 12:17:31 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Fri, 8 Dec 2006 17:17:31 +0000 (UTC)
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
References: <loom.20061208T141917-794@post.gmane.org>
Message-ID: <loom.20061208T181529-289@post.gmane.org>

Carlos Eduardo <cedepaula <at> yahoo.com.br> writes:

> 
> I?m just learning how to use twisted PB and playing with the chat server...
> 
> Thanks for all,
> 
> Carlos Eduardo
> 


Just forgot... i?m based on pb6server.py and pb6client1.py from
twisted\doc\core\howto\pb\

Thanks.




From exarkun at divmod.com  Fri Dec  8 13:08:56 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 8 Dec 2006 13:08:56 -0500
Subject: [Twisted-Python] Perspective Broker Anonymous access..
In-Reply-To: <loom.20061208T141917-794@post.gmane.org>
Message-ID: <20061208180856.20948.1445474335.divmod.quotient.63015@ohm>

On Fri, 8 Dec 2006 13:27:09 +0000 (UTC), Carlos Eduardo <cedepaula at yahoo.com.br> wrote:
>I?m just learning how to use twisted PB and playing with the chat server...
>
>I?m trying to create a way to allow authenticated and anonymous users into the
>system but can't figure how to make it.

You have to re-implement the login process to support anonymous users.

PBClientFactory.login() cannot be used for this.

Jean-Paul



From cedepaula at yahoo.com.br  Fri Dec  8 15:19:24 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Fri, 8 Dec 2006 20:19:24 +0000 (UTC)
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
References: <loom.20061208T141917-794@post.gmane.org>
	<20061208180856.20948.1445474335.divmod.quotient.63015@ohm>
Message-ID: <loom.20061208T211122-729@post.gmane.org>

Jean-Paul Calderone <exarkun <at> divmod.com> writes:

> 
> You have to re-implement the login process to support anonymous users.
> 
> PBClientFactory.login() cannot be used for this.
> 
> Jean-Paul
> 

So, the examples given in
http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html (below)
doesnt works?

# anonymous users share one Avatar, named users each get their own
    def requestAvatar(self, avatarID, mind, *interfaces):
        assert pb.IPerspective in interfaces
        if avatarID == checkers.ANONYMOUS:
            return pb.IPerspective, self.anonAvatar, lambda:None
        else:
            return pb.IPerspective, self.avatars[avatarID], lambda:None

I was looking at pb.py, portal.py and the way i understood, the whole chain
(login -> cbSendUsername -> remote login -> cb_Response -> remote respond) is
the responsible by the login process... if we send like credentials.Anonymous in
login(), all this chain needs to handle it... right?

Its a little strange why we cant have authenticated and anonymous users sharing
the same process since we can filter in the avatar given the permissions (like
example above).

Another question... is it interesting to twisted project to have this kind of
support? I mean, is it important to provide a way to this support in a patch to
the project or should I do modifications I need (if i learn how to) and keep
them to me?

Thanks for all and sorry if these questions are not in scope...

Carlos




From exarkun at divmod.com  Fri Dec  8 15:43:40 2006
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Fri, 08 Dec 2006 20:43:40 -0000
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
Message-ID: <20061208204340.28587.724311602.divmod.xquotient.658@joule.divmod.com>

On 08:19 pm, cedepaula at yahoo.com.br wrote:
>Jean-Paul Calderone <exarkun <at> divmod.com> writes:
>
>>
>> You have to re-implement the login process to support anonymous users.
>>
>> PBClientFactory.login() cannot be used for this.
>>
>> Jean-Paul
>>
>
>So, the examples given in
>http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html (below)
>doesnt works?
>
># anonymous users share one Avatar, named users each get their own
>    def requestAvatar(self, avatarID, mind, *interfaces):
>        assert pb.IPerspective in interfaces
>        if avatarID == checkers.ANONYMOUS:
>            return pb.IPerspective, self.anonAvatar, lambda:None
>        else:
>            return pb.IPerspective, self.avatars[avatarID], lambda:None

Yes, unfortunately.  Without changing protocol-level code in PB, there is
no way the first branch in that if/else is ever going to be executed. I'm
not sure why the example bothers to cover this case; it seems misleading.

>
>I was looking at pb.py, portal.py and the way i understood, the whole chain
>(login -> cbSendUsername -> remote login -> cb_Response -> remote respond) is
>the responsible by the login process... if we send like credentials.Anonymous in
>login(), all this chain needs to handle it... right?

Yes, that is correct.  Despite the number of steps involved, it's actually
not very much work to adjust.

>
>Its a little strange why we cant have authenticated and anonymous users sharing
>the same process since we can filter in the avatar given the permissions (like
>example above).

It's an unfortunate omission.  Requests for PB logins using a different
kind of credentials object are fairly common.

>
>Another question... is it interesting to twisted project to have this kind of
>support? I mean, is it important to provide a way to this support in a patch to
>the project or should I do modifications I need (if i learn how to) and keep
>them to me?

It would be a very welcome contribution. :)  Take a look at these pages,
if you haven't already seen them, for some guidelines on how to best
contribute the changes, and feel free to ask if you have any other questions.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061208/fcf1d6d9/attachment.htm 

From teratorn at twistedmatrix.com  Fri Dec  8 17:21:43 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Fri, 08 Dec 2006 16:21:43 -0600
Subject: [Twisted-Python] What Win32 issues are important to you?
In-Reply-To: <d06a5cd30612071616x70541f2h1ca9f6cf1ad89c09@mail.gmail.com>
References: <op.tj6ogf0xy3d107@office2>
	<d06a5cd30612071616x70541f2h1ca9f6cf1ad89c09@mail.gmail.com>
Message-ID: <op.tj9hqhz8y3d107@office2>

On Thu, 07 Dec 2006 18:16:29 -0600, Jonathan Lange <jml at mumak.net> wrote:

> On 12/7/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>> I'm going to set aside some time to work on win32 issues, and was
>> wondering what tickets are particularly important for the folks out  
>> there?
>>
>
> Hey Eric,
>
> Thanks for showing the Windows love.  The most pressing win32 issue
> for me is the large number of reactor unclean warnings in the
> win32event reactor.
>
>> From #2091:
>     One other thing: the win32-win32er slave had about 250 more errors
>     with this branch merged than without it. win32er may not be a
>     completely supported reactor, but introducing this many new errors
>     to even an unsupported reactor makes me very nervous and I think
>     we should try to avoid doing it.

Great, thanks.

>
> Another very important issue is the buildslaves. As a UNIX[1]
> developer, the buildslaves are my primary point of interaction with
> the Windows world. This leads to two things:
>
>     1. It's hard to care about the win32er and iocp reactors when they
> are always red.[2]

I think this is one instance of a bigger problem: it's hard to care about  
a buildslave that is always red *if you don't know what you changed*. What  
do you guys think.. If buildbot told us which tests passed/failed since  
the last build, would that help at all?

>     2. It would be very nice for the "remove-.pyc" step to always work.

I will see what I can do about this.

> That's it from me. Thanks again for taking the time to look after win32.

Thanks for the ideas.

-Eric

> cheers,
> jml
>
> [1] I feel justified in calling Mac OS X a UNIX. It helps me sleep.
> [2] Perhaps we should have two buildbot pages: "supported" and
> "unsupported". win32er, iocp, tsr, pypy and friends can all hide on
> "unsupported".
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From exarkun at divmod.com  Fri Dec  8 17:36:01 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 8 Dec 2006 17:36:01 -0500
Subject: [Twisted-Python] What Win32 issues are important to you?
In-Reply-To: <op.tj9hqhz8y3d107@office2>
Message-ID: <20061208223601.20948.1492507591.divmod.quotient.63316@ohm>

On Fri, 08 Dec 2006 16:21:43 -0600, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> [snip]
>
>I think this is one instance of a bigger problem: it's hard to care about  a 
>buildslave that is always red *if you don't know what you changed*. What  do 
>you guys think.. If buildbot told us which tests passed/failed since  the 
>last build, would that help at all?

Only if intermittently failing tests are accounted for in some way.

Jean-Paul



From hoadley at gmail.com  Fri Dec  8 18:41:23 2006
From: hoadley at gmail.com (Rob Hoadley)
Date: Fri, 8 Dec 2006 15:41:23 -0800
Subject: [Twisted-Python] delay_connect problems in
	twisted.enterprise.adbapi
In-Reply-To: <20061208075347.28587.617754074.divmod.xquotient.539@joule.divmod.com>
References: <20061208075347.28587.617754074.divmod.xquotient.539@joule.divmod.com>
Message-ID: <9bb390e70612081541q25eae313kc2d5f51f24f87544@mail.gmail.com>

To answer the question "Does this problem exist in trunk?"  The answer is
yes.

I just checked out the trunk and reran my program by sending it a test email
( which calls a sybase db )

Here is the log output with the
<twisted.enterprise.adbapi.ConnectionPoolinstance at 0xb7d230ac> just
to show i've got a adbapi connection:

2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] <
twisted.enterprise.adbapi.ConnectionPool instance at 0xb7d230ac>
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] SELECT convert(char(11),
a.mail_date, 106)
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] FROM campaign a
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] WHERE a.id = b.campaign_id
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] AND a.company_id = c.id AND
a.hash= 'PROTECTED'
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] adbapi connecting: Sybase
{'passwd': 'protected', 'dsn': 'protected', 'auto_commit': 1, 'user':
'cmsc', 'delay_connect': 1}
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] adbapi closing: Sybase
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] Connection lost.
2006/12/08 16:21 -0700 [-] Found an exception while processing, I'm just
writing the message safely
2006/12/08 16:21 -0700 [-] [Failure instance: Traceback:
twisted.enterprise.adbapi.ConnectionLost:
        /usr/lib/python2.4/threading.py:422:run

/usr/lib/python2.4/site-packages/twisted/python/threadpool.py:148:_worker

/usr/lib/python2.4/site-packages/twisted/python/context.py:59:callWithContext

/usr/lib/python2.4/site-packages/twisted/python/context.py:37:callWithContext
        --- <exception caught here> ---

/usr/lib/python2.4/site-packages/twisted/internet/threads.py:25:_putResultInDeferred

/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:379:_runInteraction

/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:64:rollback
        ]


If this traceback fails to shake anyone's memory, I'll fill out a bug report
and lend my time/machine as assistance.  It's pretty strange how it works
when I have the db connect code running as a standalone program but not when
it's created via mktap .

Occam's razor says "run it as a standalone program"!.  Yes i'd have to
agree.  However, I would like it to work as a tapfile for simplicity in
packaging and logging etc.

thanks for your help

-rob


Sadly, I am totally unfamiliar with the sybase module and so I can't help
> you myself.  However, if someone else using the sybase module were posting
> to this list, it would be good to know whether this issue also occurs with
> the most recent trunk checkout of Twisted SVN.
>
> If so, then at least it might be worthwhile to open a bug (with a minimal
> example attached) in the tracker.  If not, then at least you could use a
> recent release of trunk to work around the issue.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061208/810bc21f/attachment.htm 

From leszczynscy at yahoo.com  Fri Dec  8 21:05:53 2006
From: leszczynscy at yahoo.com (Andy Leszczynski)
Date: Fri, 8 Dec 2006 18:05:53 -0800 (PST)
Subject: [Twisted-Python] NAPTR and some dns.py import issue
Message-ID: <20061209020553.60685.qmail@web50612.mail.yahoo.com>

Hi,

There was a recent discussion: FWIW - I have a patch to dns.py with NAPTR implemented but it is a very hackish solution: I mean it serves very specific application and works fine and basis are there. 

I also faced the issue with the twisted/names/dns.py - specifically with "from twisted.python import components". Since I did not want to overwrite the  twisted/names/dns.py, I just took it, renamed and applied NAPTR patch, saved in my app directory and import it now under new name. Surprisingly it did want to import so in order to fix the problem I had to replace "from twisted.python import components" with  "from zope.interface import interface" and

change:
    class IRecord(components.Interface):

    class IEncodable(components.Interface):

to:
    class IRecord(interface.Interface):

    class IEncodable(interface.Interface):
respectively.

This is what I have - I would be interested in Twisted supporting NAPTR - let me know if I can participate.

-- 
Best regards,
alf
When all you have is XML, every problem looks like a markup :-).








From exarkun at divmod.com  Fri Dec  8 21:50:18 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 8 Dec 2006 21:50:18 -0500
Subject: [Twisted-Python] NAPTR and some dns.py import issue
In-Reply-To: <20061209020553.60685.qmail@web50612.mail.yahoo.com>
Message-ID: <20061209025018.20948.1613069547.divmod.quotient.63587@ohm>

On Fri, 8 Dec 2006 18:05:53 -0800 (PST), Andy Leszczynski <leszczynscy at yahoo.com> wrote:
>Hi,
>
>There was a recent discussion: FWIW - I have a patch to dns.py with NAPTR implemented but it is a very hackish solution: I mean it serves very specific application and works fine and basis are there.
>
>I also faced the issue with the twisted/names/dns.py - specifically with "from twisted.python import components". Since I did not want to overwrite the  twisted/names/dns.py, I just took it, renamed and applied NAPTR patch, saved in my app directory and import it now under new name. Surprisingly it did want to import so in order to fix the problem I had to replace "from twisted.python import components" with  "from zope.interface import interface" and

I'm not sure I understand this issue.  There haven't been any imports of
twisted.python.components in twisted.names.dns in some time.  If you're
going to work on a patch to contribute, it would be best to do it based
on current trunk at HEAD, so that you don't end up writing anything which
will conflict with changes which have already been made.

> [snip]
>
>This is what I have - I would be interested in Twisted supporting NAPTR - let me know if I can participate.

I'd certainly be interested to see what you have.  I don't really have any
driving need for NAPTR support in Twisted myself, though, so it's mostly an
academic interest.  Still, if the functionality works, it comes with good
test coverage, and conforms to the coding standard, there's no reason at all
it shouldn't be added to Twisted.

So, I welcome any contribution you would be willing to make. :)

Jean-Paul



From exarkun at twistedmatrix.com  Sun Dec 10 01:05:02 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 10 Dec 2006 06:05:02 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1165730702.52.430500523@twistedmatrix.com

Bug summary
______________________
Summary for 2006-12-03 through 2006-12-10
Bugs opened: 36    Bugs closed: 29  Total open bugs: 791 (+7)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +3  |Highest:  -2          |Conch:     +0          
|Enhancement:  +7  |High:     -4          |Core:      +6          
|Task:         -1  |Normal:  +14          |Mail:      +2          
                   |Low:      +1          |Names:     +0          
                                          |Trial:     +2          
                                          |Web:       -3          
                                          |Web2:      +1          
                                          |Web2.Dav:  +1          
                                          |Website:   +0          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2286] abstract.FileDescriptor calls pauseProducing even if producer is not streaming (opened by zseil)
    defect          core       http://twistedmatrix.com/trac/ticket/2286

[#2091] Make reactor unclean warnings reported errors (opened by jml)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2091

                    ===== High =====
[#2267] twisted.conch.test.test_conch tests leave the reactor unclean (opened by jml)
    defect          conch      http://twistedmatrix.com/trac/ticket/2267

[#2268] twisted.test.test_socks.Bind.test_simple leaves the reactor unclean (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/2268

[#2269] twisted.test.test_pb.NewStyleCachedTestCase leaves the reactor unclean (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/2269

                    ===== Normal =====
[#2256] test_tcp.HalfClose3TestCase.testReadNotificationRaisesTest fails sometimes on OSX (opened by jerub) (CLOSED, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2256

[#2257] Weak ETag in first second is bogus (opened by wsanchez)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2257

[#2259] stdio fails when output redirected to a file (opened by jknight)
    defect          core       http://twistedmatrix.com/trac/ticket/2259

[#2260] Allow errors and failures to be strings (opened by jml) (CLOSED, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/2260

[#2261] Front Page Sidebar CSS needs some work (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2261

[#2262] Fix Header Search CSS (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2262

[#2263] Fix "logged in as..." CSS (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2263

[#2264] Fix CSS on "Reply" buttons in issue tracker (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2264

[#2265] signal delivery vs reactor.stop (opened by titty)
    defect          core       http://twistedmatrix.com/trac/ticket/2265

[#2266] twisted.mail.test.test_mail.ProcessAliasTestCase leaves the reactor unclean (opened by jml)
    defect          mail       http://twistedmatrix.com/trac/ticket/2266

[#2270] Steal the bzr progress bar / realtime reporter for Trial (opened by jml)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2270

[#2272] epytext errors in svn trunk, set up pydoctor buildbot (opened by mwh)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2272

[#2273] AMP documentation on command errors is reversed or code is (opened by htj) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2273

[#2274] Twisted test suite is too slow (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2274

[#2275] Twisted test suite requires too much memory (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2275

[#2276] Changes to TwistedNames to make it support NAPTR records (opened by agatonsax)
    enhancement     names      http://twistedmatrix.com/trac/ticket/2276

[#2277] getcontenttype property should be explicitly set on PUT (opened by Cyrus Daboo)
    defect          web2.dav   http://twistedmatrix.com/trac/ticket/2277

[#2278] IMAP4 server fails for commands like "11 search uid 2:*" (opened by exarkun)
    defect          mail       http://twistedmatrix.com/trac/ticket/2278

[#2279] Add a link to a Windows build of PyOpenSSL to the WindowsBuild page (opened by exarkun)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2279

[#2280] DigestCredential needs a new interface that supports verifying credentials when given a prehashed user:realm:password (opened by dreid)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2280

[#2283] text color in search box hard to read (opened by itamarst) (CLOSED, duplicate)
    defect          website    http://twistedmatrix.com/trac/ticket/2283

[#2284] web2 submitRequest result does not have content-length (opened by ghazel)
    defect          web2       http://twistedmatrix.com/trac/ticket/2284

[#2287] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2287

[#2288] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2288

[#2289] Page Titles and Metadata (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2289

                    ===== Low =====
[#2258] Use producer/consumer API in POP3 server for list responses (opened by exarkun)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2258

[#2271] Hello! This is a temporary test" appears on localhost:8080 if you "$ twistd web" (opened by jerub)
    enhancement     web        http://twistedmatrix.com/trac/ticket/2271

[#2281] Annotations for Twisted Finger Tutorial (opened by sluggo)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2281

[#2282] Annotations for Twisted Finger Tutorial (opened by sluggo) (CLOSED, duplicate)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2282

[#2285] AMP should have an additional client-specific tag->error mapping (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2285

[#2285] AMP should have an additional client-specific tag->error mapping (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2285



Closed Bugs
______________________
                    ===== Highest =====
[#2240] Add twisted.mail SMTP client example which demonstrates TLS and authentication (opened by exarkun, closed by exarkun, fixed)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2240

[#2091] Make reactor unclean warnings reported errors (opened by jml, closed by jml, )
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2091

[#2200] Resource lookup is slow (opened by Cyrus Daboo, closed by wsanchez, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2200

[#2248] Do error reporting in twisted.names.client.Resolver (opened by exarkun, closed by exarkun, fixed)
    task            names      http://twistedmatrix.com/trac/ticket/2248

[#1199] twisted.test.test_protocols calls reactor.iterate() (opened by exarkun, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1199

                    ===== High =====
[#345 ] twcgi not unregistering producer correctly (possibly related to distrib). (opened by mesozoic, closed by exarkun, worksforme)
    defect          web        http://twistedmatrix.com/trac/ticket/345

[#676 ] twisted.persisted.sob._EverythingEphemeral is totally broken (opened by itamarst, closed by exarkun, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/676

[#681 ] [PATCH] Make microdom preserve boolean of "was there whitespace or not" (opened by Tv, closed by exarkun, duplicate)
    defect          web        http://twistedmatrix.com/trac/ticket/681

[#2141] Twisted Trac Content Re-org (opened by oubiwann, closed by oubiwann, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2141

[#1929] twisted.web2.test.test_xmlrpc should not use twisted.web.xmlrpc.Proxy (opened by dreid, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1929

[#1019] /projects/index.html in website (opened by mikewarren, closed by exarkun, wontfix)
    defect          website    http://twistedmatrix.com/trac/ticket/1019

[#981 ] cgi fails to close stdin of the child process (opened by warner, closed by exarkun, fixed)
    defect          web        http://twistedmatrix.com/trac/ticket/981

                    ===== Normal =====
[#2260] Allow errors and failures to be strings (opened by jml, closed by jml, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/2260

[#1677] can't find manpages on the website (opened by synapsis, closed by oubiwann, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/1677

[#492 ] Document bug reporting methods (who to assign bugs to) (opened by hypatia, closed by jknight, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/492

[#2202] The News on the front page is no longer news. (opened by jml, closed by oubiwann, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/2202

[#2156] New Twisted Site Preparing for Release (opened by oubiwann, closed by oubiwann, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2156

[#995 ] contribpackages are not updated for Python 2.4 (opened by manlio, closed by exarkun, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/995

[#2256] test_tcp.HalfClose3TestCase.testReadNotificationRaisesTest fails sometimes on OSX (opened by jerub, closed by exarkun, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2256

[#2283] text color in search box hard to read (opened by itamarst, closed by exarkun, duplicate)
    defect          website    http://twistedmatrix.com/trac/ticket/2283

[#2287] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley, closed by exarkun, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2287

[#2288] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley, closed by glyph, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2288

[#2273] AMP documentation on command errors is reversed or code is (opened by htj, closed by radix, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2273

                    ===== Low =====
[#307 ] (don't) switch to logging.py / add support for logging.py (opened by glyph, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/307

[#313 ] Convention for accessing TLS certificates from protocols (opened by exarkun, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/313

[#467 ] [PATCH] sandbox/exarkun/tls/record.py (opened by symbiont, closed by exarkun, wontfix)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/467

[#578 ] Problems using twisted.web.client.getPage() (opened by dialtone, closed by exarkun, invalid)
    enhancement     web        http://twistedmatrix.com/trac/ticket/578

[#2282] Annotations for Twisted Finger Tutorial (opened by sluggo, closed by exarkun, duplicate)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2282

[#2285] AMP should have an additional client-specific tag->error mapping (opened by radix, closed by glyph, )
    enhancement     core       http://twistedmatrix.com/trac/ticket/2285





From gavrie.42224911 at bloglines.com  Mon Dec 11 09:03:28 2006
From: gavrie.42224911 at bloglines.com (Gavrie Philipson [Twisted])
Date: Mon, 11 Dec 2006 16:03:28 +0200
Subject: [Twisted-Python] Using D-Bus with Twisted
Message-ID: <bfb564230612110603l5905a778g19a38d1a7126b036@mail.gmail.com>

Hi,

I'm about to start a project which involves adding D-Bus support to an
existing Python application that is based on Twisted.
The latest dbus-python versions include some tantalizing references to
planned support for integrating D-Bus into the Twisted mainloop.
However, I understand that this is not ready yet...?

What would be the easiest way to integrate D-Bus and Twisted right now? I
know that Twisted can use the GLib event loop, but will this work out of the
box? I found some references to doing this with older versions of the
dbus-python API, but nothing recent.

Does anyone have examples available that use the current API?

Please note that I asked on the D-Bus mailing list, and got the advice
to ask here; see:
http://lists.freedesktop.org/archives/dbus/2006-December/006630.html

Thanks,

-- Gavrie Philipson



From anand at soe.ucsc.edu  Tue Dec 12 00:33:23 2006
From: anand at soe.ucsc.edu (Anand Patil)
Date: Tue, 12 Dec 2006 00:33:23 -0500
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
Message-ID: <457E3F23.5090309@cse.ucsc.edu>

Hi all,

Quick question from a pre-beginner with Twisted: Can Cacheable store not 
just the most recent value of a remote object, but the n most recent values?

Thanks,
Anand Patil



From teratorn at twistedmatrix.com  Tue Dec 12 04:27:01 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Tue, 12 Dec 2006 03:27:01 -0600
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
In-Reply-To: <457E3F23.5090309@cse.ucsc.edu>
References: <457E3F23.5090309@cse.ucsc.edu>
Message-ID: <op.tkfwjbvby3d107@office2>

On Mon, 11 Dec 2006 23:33:23 -0600, Anand Patil <anand at soe.ucsc.edu> wrote:

> Hi all,
>
> Quick question from a pre-beginner with Twisted: Can Cacheable store not  
> just the most recent value of a remote object, but the n most recent  
> values?
>
> Thanks,
> Anand Patil

They don't have that capability, no. I guess you could modify them to do  
that, but I can't think of why you would want to.

If you're not sure that's what you want to do, then it might help to  
explain what you're trying to accomplish and someone on this list may be  
able to help you.

-- 
Eric Mangold
Twisted/Win32 Maintainer



From anand at soe.ucsc.edu  Tue Dec 12 14:01:19 2006
From: anand at soe.ucsc.edu (Anand Patil)
Date: Tue, 12 Dec 2006 14:01:19 -0500
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
In-Reply-To: <E1GuBvA-0001qz-00@pyramid.twistedmatrix.com>
References: <E1GuBvA-0001qz-00@pyramid.twistedmatrix.com>
Message-ID: <457EFC7F.1040203@cse.ucsc.edu>


>They don't have that capability, no. I guess you could modify them to do  
>that, but I can't think of why you would want to.
>
>If you're not sure that's what you want to do, then it might help to  
>explain what you're trying to accomplish and someone on this list may be  
>able to help you.
>  
>
This is a statistical algorithm I'm trying to parallelize to run on a 
cluster, and the serial version strongly suggests that the behavior I've 
asked for would be a big help.

I'll try to describe my serial algorithm succinctly, any advice on 
parallelizing it would be extremely welcome.

I have a bunch of objects which are nodes in a  directed acyclic graph. 
I've pseudocoded them in the attached file. What I'd like to do is push 
some of the nodes off to other processes running on the cluster and have 
them retain references to their parents. I'll then make repeated calls 
to all nodes' get_prob() methods and periodically update their values.

It would be nice to make Node.value something like a Cacheable. I'd like 
it to store n remote references, with a timestamp (this just needs to be 
an integer counter, as in the pseudocode) attached to each. When 
queried, it could return its timestamp and value as a tuple.

Thanks again,
Anand

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: node.py
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061212/2406d85d/attachment.txt 

From teratorn at twistedmatrix.com  Tue Dec 12 16:38:34 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Tue, 12 Dec 2006 15:38:34 -0600
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
In-Reply-To: <457EFC7F.1040203@cse.ucsc.edu>
References: <E1GuBvA-0001qz-00@pyramid.twistedmatrix.com>
	<457EFC7F.1040203@cse.ucsc.edu>
Message-ID: <op.tkguekezy3d107@office2>

On Tue, 12 Dec 2006 13:01:19 -0600, Anand Patil <anand at soe.ucsc.edu> wrote:

>
>> They don't have that capability, no. I guess you could modify them to do
>> that, but I can't think of why you would want to.
>>
>> If you're not sure that's what you want to do, then it might help to
>> explain what you're trying to accomplish and someone on this list may be
>> able to help you.
>>
>>
> This is a statistical algorithm I'm trying to parallelize to run on a
> cluster, and the serial version strongly suggests that the behavior I've
> asked for would be a big help.
>
> I'll try to describe my serial algorithm succinctly, any advice on
> parallelizing it would be extremely welcome.
>
> I have a bunch of objects which are nodes in a  directed acyclic graph.
> I've pseudocoded them in the attached file. What I'd like to do is push
> some of the nodes off to other processes running on the cluster and have
> them retain references to their parents. I'll then make repeated calls
> to all nodes' get_prob() methods and periodically update their values.
>
> It would be nice to make Node.value something like a Cacheable. I'd like
> it to store n remote references, with a timestamp (this just needs to be
> an integer counter, as in the pseudocode) attached to each. When
> queried, it could return its timestamp and value as a tuple.
>
> Thanks again,
> Anand
>

Well without really understanding your algorithm I would say you should  
just implement this at the application level, and leave Cacheables alone.

-- 
Eric Mangold
Twisted/Win32 Maintainer



From magnus at spotify.com  Wed Dec 13 10:19:44 2006
From: magnus at spotify.com (Magnus Hult)
Date: Wed, 13 Dec 2006 16:19:44 +0100
Subject: [Twisted-Python] twisted.web.proxy.ReverseProxyResource forgets to
	quote path?
Message-ID: <71e31fe60612130719k3f1f665bj313e8651c639d201@mail.gmail.com>

Hello,

In a program like this

  from twisted.web import server, proxy, resource
  from twisted.internet import reactor
  from twisted.application import service, strports

  site = server.Site(proxy.ReverseProxyResource('www.example.com', 80, '/path'))
  application = service.Application("accesspoint")
  s = strports.service('tcp:8060', site)
  s.setServiceParent(application)

visiting / on port 8060 leads to www.example.com:80/path as expected.
/test returns the contents of www.example.com:80/path/test as
expected, but going to, for example, /test%20test returns a 400 bad
request.

It seems like t.w.proxy.ReverseProxyResource does not quote its path.
When urllib.quote:ing the rest parameter sent to ProxyClientFactory in
ReverseProxyResource.render, it suddenly works. (I'm using
python-twisted-web from Debian unstable, but it's the same in trunk.)

Am I doing something wrong here or is this a bug?

Regards,
Magnus



From roland.hedberg at adm.umu.se  Thu Dec 14 02:37:11 2006
From: roland.hedberg at adm.umu.se (Roland Hedberg)
Date: Thu, 14 Dec 2006 08:37:11 +0100
Subject: [Twisted-Python] NAPTR and some dns.py import issue
In-Reply-To: <20061209025018.20948.1613069547.divmod.quotient.63587@ohm>
References: <20061209025018.20948.1613069547.divmod.quotient.63587@ohm>
Message-ID: <4580FF27.50801@adm.umu.se>

Jean-Paul Calderone wrote:
> On Fri, 8 Dec 2006 18:05:53 -0800 (PST), Andy Leszczynski
> <leszczynscy at yahoo.com> wrote:
>> Hi,
>>
>> There was a recent discussion: FWIW - I have a patch to dns.py with
>> NAPTR implemented but it is a very hackish solution: I mean it serves
>> very specific application and works fine and basis are there.
>>
>> I also faced the issue with the twisted/names/dns.py - specifically
>> with "from twisted.python import components". Since I did not want to
>> overwrite the  twisted/names/dns.py, I just took it, renamed and
>> applied NAPTR patch, saved in my app directory and import it now under
>> new name. Surprisingly it did want to import so in order to fix the
>> problem I had to replace "from twisted.python import components" with 
>> "from zope.interface import interface" and
> 
> I'm not sure I understand this issue.  There haven't been any imports of
> twisted.python.components in twisted.names.dns in some time.  If you're
> going to work on a patch to contribute, it would be best to do it based
> on current trunk at HEAD, so that you don't end up writing anything which
> will conflict with changes which have already been made.
> 
>> [snip]
>>
>> This is what I have - I would be interested in Twisted supporting
>> NAPTR - let me know if I can participate.
> 
> I'd certainly be interested to see what you have.  I don't really have any
> driving need for NAPTR support in Twisted myself, though, so it's mostly an
> academic interest.  Still, if the functionality works, it comes with good
> test coverage, and conforms to the coding standard, there's no reason at
> all
> it shouldn't be added to Twisted.
> 
> So, I welcome any contribution you would be willing to make. :)

I've submitted a ticket with my patches to names to make it support
NAPTR, so I guess someone has to choose :-)

-- Roland



From jdahlin at async.com.br  Thu Dec 14 19:58:27 2006
From: jdahlin at async.com.br (Johan Dahlin)
Date: Thu, 14 Dec 2006 22:58:27 -0200
Subject: [Twisted-Python] Re: Using D-Bus with Twisted
In-Reply-To: <bfb564230612110603l5905a778g19a38d1a7126b036@mail.gmail.com>
References: <bfb564230612110603l5905a778g19a38d1a7126b036@mail.gmail.com>
Message-ID: <4581F333.9070709@async.com.br>

Gavrie Philipson [Twisted] skrev:
> Hi,
> 
> I'm about to start a project which involves adding D-Bus support to an
> existing Python application that is based on Twisted.
> The latest dbus-python versions include some tantalizing references to
> planned support for integrating D-Bus into the Twisted mainloop.
> However, I understand that this is not ready yet...?
> 
> What would be the easiest way to integrate D-Bus and Twisted right now?
[snip]

* twisted with glib/gobject/gtk2 reactor
* dbus with glib main loop support (dbus.glib)

Johan




From teratorn at twistedmatrix.com  Thu Dec 14 21:05:14 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 14 Dec 2006 20:05:14 -0600
Subject: [Twisted-Python] Trac wiki notification
Message-ID: <op.tkkv20c8y3d107@office2>

Here's a plugin that lets you subscribe to wiki page changes. This  
functionality isn't available in normal Trac yet.

http://wikinotification.ufsoft.org/

I was hoping an admin could set this up (if it doesn't look like it will  
break everything :)

-- 
Eric Mangold
Twisted/Win32 Maintainer



From manlio_perillo at libero.it  Fri Dec 15 05:42:44 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 15 Dec 2006 11:42:44 +0100
Subject: [Twisted-Python] Shtoom
Message-ID: <45827C24.2090802@libero.it>

Is Shtoom still maintained?


Thanks and regards  Manlio Perillo



From exarkun at divmod.com  Fri Dec 15 20:35:42 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 15 Dec 2006 20:35:42 -0500
Subject: [Twisted-Python] Trac wiki notification
In-Reply-To: <op.tkkv20c8y3d107@office2>
Message-ID: <20061216013542.20948.1051351521.divmod.quotient.74846@ohm>

On Thu, 14 Dec 2006 20:05:14 -0600, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>Here's a plugin that lets you subscribe to wiki page changes. This 
>functionality isn't available in normal Trac yet.
>
>http://wikinotification.ufsoft.org/
>
>I was hoping an admin could set this up (if it doesn't look like it will 
>break everything :)

It would be good to have this functionality.  I have not checked the code
of that plugin yet, but I would rather err on the side of caution and not
make any further changes to our trac deployment, at least until we figure
out how to prevent it from bringing down the server on which it runs.

In the mean time, in case you aren't familiar with it, you can get an RSS
feed of all wiki changes from the timeline view.  Not exactly the same,
but perhaps good enough for the interim.

Jean-Paul



From radix at twistedmatrix.com  Fri Dec 15 20:53:39 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 15 Dec 2006 20:53:39 -0500
Subject: [Twisted-Python] Trac wiki notification
In-Reply-To: <20061216013542.20948.1051351521.divmod.quotient.74846@ohm>
References: <op.tkkv20c8y3d107@office2>
	<20061216013542.20948.1051351521.divmod.quotient.74846@ohm>
Message-ID: <60ed19d40612151753h10a97e78yf1a3fbd4989c693a@mail.gmail.com>

On 12/15/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
> On Thu, 14 Dec 2006 20:05:14 -0600, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> >Here's a plugin that lets you subscribe to wiki page changes. This
> >functionality isn't available in normal Trac yet.
> >
> >http://wikinotification.ufsoft.org/
> >
> >I was hoping an admin could set this up (if it doesn't look like it will
> >break everything :)
>
> It would be good to have this functionality.  I have not checked the code
> of that plugin yet, but I would rather err on the side of caution and not
> make any further changes to our trac deployment, at least until we figure
> out how to prevent it from bringing down the server on which it runs.
>
> In the mean time, in case you aren't familiar with it, you can get an RSS
> feed of all wiki changes from the timeline view.  Not exactly the same,
> but perhaps good enough for the interim.

Also, there are free services which will forward arbitrary RSS feeds
to arbitrary email addresses. Getting closer to what that plugin does,
but it seems there's no way to get an RSS feed for only one page at a
time in Trac.


-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/



From exarkun at twistedmatrix.com  Sun Dec 17 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 17 Dec 2006 06:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1166335501.69.1268307437@twistedmatrix.com

Bug summary
______________________
Summary for 2006-12-10 through 2006-12-17
Bugs opened: 12    Bugs closed: 6  Total open bugs: 797 (+6)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +6  |Highest:  +0          |Core:   +5             
|Enhancement:  +0  |High:     +3          |Ftp:    -1             
|Task:         +1  |Normal:   +3          |Mail:   -1             
                   |Low:      +1          |Names:  +1             
                                          |Pb:     +1             
                                          |Trial:  +1             
                                          |Web:    +1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2291] Add --reactor to zsh completions for twistd and trial (opened by teratorn)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2297] Make rebuild.latestClass more compliant with new style classes (opened by therve)
    defect          core       http://twistedmatrix.com/trac/ticket/2297

[#2298] microdom assigns incorrect parent values to top-level nodes in malformed HTML strings (opened by jml) (CLOSED, fixed)
    enhancement     web        http://twistedmatrix.com/trac/ticket/2298

[#2300] Remove trailing whitespace from Python files (opened by jml)
    task            core       http://twistedmatrix.com/trac/ticket/2300

                    ===== High =====
[#2292] AMP error propagation does not work on subclasses (opened by htj)
    defect          core       http://twistedmatrix.com/trac/ticket/2292

[#2299] twisted.spread.sturdy doesn't work at all, not even a little (opened by exarkun)
    defect          pb         http://twistedmatrix.com/trac/ticket/2299

[#2292] AMP error propagation does not work on subclasses (opened by htj)
    defect          core       http://twistedmatrix.com/trac/ticket/2292

                    ===== Normal =====
[#2290] nameservers resolved in wrong order (opened by ilia)
    defect          names      http://twistedmatrix.com/trac/ticket/2290

[#2293] Integrate PyOpenSSL patches and do a PyOpenSSL release (opened by exarkun)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2293

[#2295] distrib listenUNIX should use the usePID=1 lock system (opened by itamarst)
    defect          web        http://twistedmatrix.com/trac/ticket/2295

[#2296] twisted.web2.stream.FileStream creates an instance of an undefined class in it's sendfile "support" (opened by dreid)
    defect          core       http://twistedmatrix.com/trac/ticket/2296

                    ===== Low =====
[#2294] Fixture for testing the validity of of the contents of a module's __all__ attribute (opened by exarkun)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2294



Closed Bugs
______________________
                    ===== Highest =====
[#428 ] Update and re-instate FTPClient tests (opened by amberite, closed by exarkun, fixed)
    defect          ftp        http://twistedmatrix.com/trac/ticket/428

[#992 ] session.getComponent doesn't work with 'default' keyword arg (opened by justinj, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/992

[#815 ] t.internet.process.Process should check for valid arguments (opened by marienz, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/815

[#2298] microdom assigns incorrect parent values to top-level nodes in malformed HTML strings (opened by jml, closed by jml, fixed)
    enhancement     web        http://twistedmatrix.com/trac/ticket/2298

                    ===== High =====
[#2292] AMP error propagation does not work on subclasses (opened by htj, closed by glyph, )
    defect          core       http://twistedmatrix.com/trac/ticket/2292

                    ===== Normal =====
[#2250] twisted.mail.pop3.__all__ lacks a comma (opened by mwh, closed by glyph, fixed)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2250





From ellisonbg.net at gmail.com  Sun Dec 17 17:10:34 2006
From: ellisonbg.net at gmail.com (Brian Granger)
Date: Sun, 17 Dec 2006 15:10:34 -0700
Subject: [Twisted-Python] What deferred can I use to detect when a server or
	client is "running"
Message-ID: <6ce0ac130612171410k3a9138d2v521ffc60d127d8e9@mail.gmail.com>

Hi,

i am writing some tests using trial and in my setUp methods I start
various servers and clients using listenTCP/connectTCP.  The problem I
am having is finding a deferred that will fire when:

1.  A server is actually listening.  I want to use this deferred to
trigger clients to connect...

2.  A client has connected.  I want to return this deferred from my
setUp method so my tests won't actually run until the client has
connected to the server.

I have some hackish ways that I have been getting around this, but
they seem a little fickle.  What is the "standard" way of doing this
in tests?

Thanks

Brian



From twisted at x11.cjb.net  Sun Dec 17 17:25:14 2006
From: twisted at x11.cjb.net (twisted at x11.cjb.net)
Date: Sun, 17 Dec 2006 17:25:14 -0500
Subject: [Twisted-Python] twisted pyQT4 tutorial?
Message-ID: <200612171725.14733.twisted@x11.cjb.net>

I am intrested in doing some stuff with pyQT4 and twisted, and have been 
successful in getting some things to work separately, but am not exactly sure 
how to get the reactor going in the QT4's event loop.

This is the reactor I am trying to use.
http://twistedmatrix.com/trac/attachment/ticket/1770/qt4reactor.py

Is there any kind of tutorial for this, or example code from a simple runnable 
application?

-Brian



From exarkun at divmod.com  Sun Dec 17 17:32:43 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 17 Dec 2006 17:32:43 -0500
Subject: [Twisted-Python] What deferred can I use to detect when a
	server or client is "running"
In-Reply-To: <6ce0ac130612171410k3a9138d2v521ffc60d127d8e9@mail.gmail.com>
Message-ID: <20061217223243.20948.42905055.divmod.quotient.78430@ohm>

On Sun, 17 Dec 2006 15:10:34 -0700, Brian Granger <ellisonbg.net at gmail.com> wrote:
>Hi,
>
>i am writing some tests using trial and in my setUp methods I start
>various servers and clients using listenTCP/connectTCP.  The problem I
>am having is finding a deferred that will fire when:
>
>1.  A server is actually listening.  I want to use this deferred to
>trigger clients to connect...

listenTCP complete synchronously, so you don't need to wait before
connecting to a server started this way.

>
>2.  A client has connected.  I want to return this deferred from my
>setUp method so my tests won't actually run until the client has
>connected to the server.

twisted.internet.protocol.ClientCreator.connectTCP will return a Deferred
which fires with a protocol instance after it is connected.  You can use
that, or look at its implementation to see how to do something similar
yourself.

>
>I have some hackish ways that I have been getting around this, but
>they seem a little fickle.  What is the "standard" way of doing this
>in tests?

You might also consider /not/ using real sockets in your unit tests.  It
is often easier to use a simulated transport.

twisted.protocols.loopback.loopback is going to be deprecated in Twisted
2.5, but it will be replaced with something much the same, loopbackAsync.
You can also just create twisted.test.proto_helpers.StringTransport objects
and attach them to protocols directly.  This gives you very precise control
over what you are testing.

Jean-Paul



From exarkun at divmod.com  Sun Dec 17 17:34:19 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 17 Dec 2006 17:34:19 -0500
Subject: [Twisted-Python] twisted pyQT4 tutorial?
In-Reply-To: <200612171725.14733.twisted@x11.cjb.net>
Message-ID: <20061217223419.20948.678233506.divmod.quotient.78432@ohm>

On Sun, 17 Dec 2006 17:25:14 -0500, twisted at x11.cjb.net wrote:
>I am intrested in doing some stuff with pyQT4 and twisted, and have been
>successful in getting some things to work separately, but am not exactly sure
>how to get the reactor going in the QT4's event loop.
>
>This is the reactor I am trying to use.
>http://twistedmatrix.com/trac/attachment/ticket/1770/qt4reactor.py
>
>Is there any kind of tutorial for this, or example code from a simple runnable
>application?

Not as far as I am aware.  The code you are referring to was contributed
by a third party and hasn't even been accepted for inclusion in Twisted,
it's just attached to an enhancement request in the ticket tracker.  You
might want to contact the author for further assistance.

Jean-Paul



From ellisonbg.net at gmail.com  Sun Dec 17 17:45:39 2006
From: ellisonbg.net at gmail.com (Brian Granger)
Date: Sun, 17 Dec 2006 15:45:39 -0700
Subject: [Twisted-Python] What deferred can I use to detect when a server
	or client is "running"
In-Reply-To: <20061217223243.20948.42905055.divmod.quotient.78430@ohm>
References: <6ce0ac130612171410k3a9138d2v521ffc60d127d8e9@mail.gmail.com>
	<20061217223243.20948.42905055.divmod.quotient.78430@ohm>
Message-ID: <6ce0ac130612171445i1bcfbd6byb5752d89a0a4512c@mail.gmail.com>

Great, this is very helpful.  It turns out the hack I was doing is not
that different from what ClientCreator.connectTCP does - passing a
deferred to my factory that gets fired at the right time.
I think I might just have a bug floating around.

I will have a look at the loopback stuff though.

Brian

On 12/17/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
> On Sun, 17 Dec 2006 15:10:34 -0700, Brian Granger <ellisonbg.net at gmail.com> wrote:
> >Hi,
> >
> >i am writing some tests using trial and in my setUp methods I start
> >various servers and clients using listenTCP/connectTCP.  The problem I
> >am having is finding a deferred that will fire when:
> >
> >1.  A server is actually listening.  I want to use this deferred to
> >trigger clients to connect...
>
> listenTCP complete synchronously, so you don't need to wait before
> connecting to a server started this way.
>
> >
> >2.  A client has connected.  I want to return this deferred from my
> >setUp method so my tests won't actually run until the client has
> >connected to the server.
>
> twisted.internet.protocol.ClientCreator.connectTCP will return a Deferred
> which fires with a protocol instance after it is connected.  You can use
> that, or look at its implementation to see how to do something similar
> yourself.
>
> >
> >I have some hackish ways that I have been getting around this, but
> >they seem a little fickle.  What is the "standard" way of doing this
> >in tests?
>
> You might also consider /not/ using real sockets in your unit tests.  It
> is often easier to use a simulated transport.
>
> twisted.protocols.loopback.loopback is going to be deprecated in Twisted
> 2.5, but it will be replaced with something much the same, loopbackAsync.
> You can also just create twisted.test.proto_helpers.StringTransport objects
> and attach them to protocols directly.  This gives you very precise control
> over what you are testing.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From p.mayers at imperial.ac.uk  Sun Dec 17 20:38:45 2006
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 18 Dec 2006 01:38:45 +0000
Subject: [Twisted-Python] Writing to a unix FIFO
Message-ID: <4585F125.3010504@imperial.ac.uk>

Does anyone have a notion of what the easiest way of doing this is? I 
feel some combination of wrapping a consumer around a FileDescriptor 
ought to work, or something similar to the stdio support, but I can't 
quite reason it out.

It is somewhat complicated by the weird behaviour of FIFOs depending on 
the state of the other end.



From michele.petrazzo at unipex.it  Tue Dec 19 09:42:11 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Tue, 19 Dec 2006 15:42:11 +0100
Subject: [Twisted-Python] ftp question
Message-ID: <4587FA43.7000407@unipex.it>

I list,
I want to implement a not standard ftp STOR (STOT in the real) command.
It not accept the path, because it create a new one on the server side.
I'm tring to  work with the sendToConnection and SenderProtocol, but I
don't understand where the file (that on storeFile are passed as "path")
are opened (read) for after pass its data to the write method of
SenderProtocol.

I stop myself because I'm not able to send data throw the channel!

Can someone help me?

Thanks,
Michele
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3273 bytes
Desc: S/MIME Cryptographic Signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20061219/02cd3757/attachment.bin 

From cedepaula at yahoo.com.br  Tue Dec 19 16:21:47 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Tue, 19 Dec 2006 21:21:47 +0000 (UTC)
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
References: <20061208204340.28587.724311602.divmod.xquotient.658@joule.divmod.com>
Message-ID: <loom.20061219T221058-243@post.gmane.org>

>It would be a very welcome contribution. :)  Take a look at these pages,if you
>haven't already seen them, for some guidelines on how to bestcontribute the
>changes, and feel free to ask if you have any other questions.Jean-Paul
> 

JP,

I made some changes to pb.py and it now supports anonymous logins.

The only file that was changed is pb.py and I tried to make a new support
without changing the existing code as much as I could.

I?m new in Twisted.. and dont know if the solution I created was the best or the
most indicated. Suggestions are welcome.

Here follows the patch, the full pb.py file and an example based on pbserver6
and pbclient6 both supporting authenticated and anonymous access(just comment
the correct line in client).

The links to the files:

http://kmm.googlecode.com/files/pb.py
http://kmm.googlecode.com/files/pb_anonymous.patch
http://kmm.googlecode.com/files/pb6client1.py
http://kmm.googlecode.com/files/pb6server.py


Thanks and awaiting a feedback,

Carlos






From glyph at divmod.com  Tue Dec 19 16:41:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 19 Dec 2006 21:41:50 -0000
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
Message-ID: <20061219214150.25692.1024823278.divmod.xquotient.225@joule.divmod.com>

On 09:21 pm, cedepaula at yahoo.com.br wrote:
>>It would be a very welcome contribution. :)  Take a look at these pages, if you
>>haven't already seen them, for some guidelines on how to best contribute the
>>changes, and feel free to ask if you have any other questions.

>Thanks and awaiting a feedback,

Please open a ticket in the tracker (accessible at the very front page of twistedmatrix.com), and attach a unified diff to it.  If your code already contains tests and comprehensive docstring coverage of new functionality, then attach the keyword 'review'.

If you haven't already, you'll need to register for an account first before you can open tickets.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061219/df988154/attachment.htm 

From Pierre_Rouleau at ImpathNetworks.com  Tue Dec 19 16:53:33 2006
From: Pierre_Rouleau at ImpathNetworks.com (Pierre Rouleau)
Date: Tue, 19 Dec 2006 16:53:33 -0500
Subject: [Twisted-Python] Possible error in core documentation in defer.html
Message-ID: <em9n0q$sel$1@sea.gmane.org>

Hi all,

- Page: 
http://twistedmatrix.com/projects/core/documentation/howto/defer.html

- Section: Multiple callbacks

The example ends with::

   # this series of callbacks and errbacks will print "Result: 12"
   g = Getter()
   d = g.getData(4)
   d.addCallback(printData)
   d.addErrback(printError)


The line::

   d = g.getData(4)

should be::

   d = g.getDummyData(4)



Should I enter this in TRAC?

-- 
Pierre Rouleau





From exarkun at divmod.com  Tue Dec 19 17:12:53 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 19 Dec 2006 17:12:53 -0500
Subject: [Twisted-Python] Possible error in core documentation in
	defer.html
In-Reply-To: <em9n0q$sel$1@sea.gmane.org>
Message-ID: <20061219221253.20948.1126841011.divmod.quotient.82285@ohm>

On Tue, 19 Dec 2006 16:53:33 -0500, Pierre Rouleau <pierre_rouleau at impathnetworks.com> wrote:
>Hi all,
>
>- Page: 
>http://twistedmatrix.com/projects/core/documentation/howto/defer.html
>
>- Section: Multiple callbacks
>
>The example ends with::
>
>   # this series of callbacks and errbacks will print "Result: 12"
>   g = Getter()
>   d = g.getData(4)
>   d.addCallback(printData)
>   d.addErrback(printError)
>
>
>The line::
>
>   d = g.getData(4)
>
>should be::
>
>   d = g.getDummyData(4)
>
>
>
>Should I enter this in TRAC?
>

Please do.

Jean-Paul



From Pierre_Rouleau at ImpathNetworks.com  Tue Dec 19 17:34:54 2006
From: Pierre_Rouleau at ImpathNetworks.com (Pierre Rouleau)
Date: Tue, 19 Dec 2006 17:34:54 -0500
Subject: [Twisted-Python] Re: Possible error in core documentation in
	defer.html
In-Reply-To: <20061219221253.20948.1126841011.divmod.quotient.82285@ohm>
References: <em9n0q$sel$1@sea.gmane.org>
	<20061219221253.20948.1126841011.divmod.quotient.82285@ohm>
Message-ID: <em9peb$bsb$1@sea.gmane.org>

Jean-Paul Calderone wrote:

> On Tue, 19 Dec 2006 16:53:33 -0500, Pierre Rouleau 
> <pierre_rouleau at impathnetworks.com> wrote:
> 
>> Hi all,
>>
>> - Page: 
>> http://twistedmatrix.com/projects/core/documentation/howto/defer.html
>>
>> - Section: Multiple callbacks
>>
>> The example ends with::
>>
>>   # this series of callbacks and errbacks will print "Result: 12"
>>   g = Getter()
>>   d = g.getData(4)
>>   d.addCallback(printData)
>>   d.addErrback(printError)
>>
>>
>> The line::
>>
>>   d = g.getData(4)
>>
>> should be::
>>
>>   d = g.getDummyData(4)
>>
>>
>>
>> Should I enter this in TRAC?
>>
> 
> Please do.
> 

Done. Ticket 2306.  It's the first ticket I enter here.
Let me know if there's any wrong.  I read 
http://twistedmatrix.com/trac/wiki/IssueSubmissionGuidelines but there's 
not much in that page.

I could not find if there's a category for documentation, so I just 
placed documentation in the keywords field.

--

Pierre Rouleau




From ellisonbg.net at gmail.com  Wed Dec 20 12:17:04 2006
From: ellisonbg.net at gmail.com (Brian Granger)
Date: Wed, 20 Dec 2006 10:17:04 -0700
Subject: [Twisted-Python] Transforming Exception -> pb.Error in a remote_foo
	method
Message-ID: <6ce0ac130612200917idd10387t8239fe8899b12c88@mail.gmail.com>

Hi,

In the Twisted docs it is claimed that in order to propagate exceptions over PB:

"The only special thing you do is to define your Exception subclass by
deriving it from pb.Error. "

This seems simple enough, but I am using PB to adapt a general service
that doesn't use pb.Errors (as the service is also adapted to other
protocols).  How can one transform a regular Exception to a pb.Error?
The following does not work:


    def remote_foo(self, f):
        d = self.service.foo(f)
        def raiser():
            raise pb.Error('I pbfailed')
        d.addErrback(lambda reason: raiser())        # reason is an
Exception, not a pb.Error!
        return d

In this case, the server still complains about an unhandled exception.

Any thoughts about how to do this?

Thanks

Brian



From exarkun at divmod.com  Wed Dec 20 12:35:42 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Wed, 20 Dec 2006 12:35:42 -0500
Subject: [Twisted-Python] Transforming Exception -> pb.Error in a
	remote_foo method
In-Reply-To: <6ce0ac130612200917idd10387t8239fe8899b12c88@mail.gmail.com>
Message-ID: <20061220173542.20948.350533793.divmod.quotient.83830@ohm>

On Wed, 20 Dec 2006 10:17:04 -0700, Brian Granger <ellisonbg.net at gmail.com> wrote:
>Hi,
>
>In the Twisted docs it is claimed that in order to propagate exceptions over 
>PB:
>
>"The only special thing you do is to define your Exception subclass by
>deriving it from pb.Error. "
>
>This seems simple enough, but I am using PB to adapt a general service
>that doesn't use pb.Errors (as the service is also adapted to other
>protocols).  How can one transform a regular Exception to a pb.Error?
>The following does not work:
>

This is a bug in PB's handling of Deferreds which fail with an Error.
They are not handled in the same way as Errors which are raised
synchronously by the method to which the PB message is dispatched.

Could you file a ticket in the tracker?

Jean-Paul



From alvinwang at gmail.com  Wed Dec 20 23:45:45 2006
From: alvinwang at gmail.com (Alvin Wang)
Date: Wed, 20 Dec 2006 20:45:45 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
Message-ID: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>

http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html

The documentation above says that credentials should be able to do
authentication with multiple passes.  However, I have not been able to find
any examples of it.

As an alternative, I was going to implement a user object with state that
determined what it was able to do.  I could force the client to conduct
multiple challenge responses to achieve the logged in state.

I figured it would be better to ask the mail list for the proper way to do
it first.

Thanks
-- 
Alvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061220/cdb4cfe0/attachment.htm 

From sflist at ihonk.com  Thu Dec 21 01:49:44 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 00:49:44 -0600
Subject: [Twisted-Python] SSL problem
Message-ID: <1166683784.4728.35.camel@infinite-loop>

Hi all.

I'm having trouble getting SSL working properly. I'm running a modified
t.m.pop3.POP3 server and it was running peachy on port 110, no problems
under real-world load, so I thought it'd be simple enough to add SSL
support by changing this...

INTERFACES = ('1.2.3.4','4.5.6.7', etc.)

for iface in INTERFACES:
    reactor.listenTCP(110, myPop3server, interface=iface)
reactor.run()

...to this:

INTERFACES = ('1.2.3.4','4.5.6.7', etc.)

sslContext = ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
SSL_CERTIFICATE_FILE)

for iface in INTERFACES:
    reactor.listenTCP(110, myPop3server, interface=iface)
    reactor.listenSSL(995, myPop3server, interface=iface,
contextFactory=sslContext)
reactor.run()

Which worked fine when hitting it with a single client from my machine,
but failed miserably when hitting it from mail2web.com. Lots of errors
loading the message list and the messages. The log showed mail2web
connecting and then immediately dropping the connection. I tried
changing the code so I instantiated one sslContext per call to
listenSSL. That made it much better, but still not perfect. The errors
persisted.

So I tried dropping the calls to listenSSL, and wrapped the server with
stunnel. That worked perfectly, except since my host doesn't support
transparent proxying, my twisted app doesn't see the connecting client's
IP, and I need that, so that's not an option. It does implicate
twisted's particular flavor of SSL in my problems, though.

I don't know much about SSL, but I searched the twisted list and
couldn't find anything that helped, with the possible exception of a
query about support for SSL session resumption. I don't know what it is,
but it sounds useful. Anyway, if anybody could toss an idea or two my
way, I'd appreciate it.

Thanks,

Steve

P.S. for posterity: I got a tip from this list to use authbind when
trying to bind my twisted server to a privileged port (e.g. < 1024). For
those of you who might have trouble using authbind to allow your
non-root user to bind to ports between 512-1023, you need to get the
authbind source, then comment out helper.c:76 and libauthbind.c:151, at
least for version 1.1.5.2, where it checks the requested port against
IPPORT_RESERVED/2. The man page squawks about prohibiting these ports to
avoid creating a security hole in conjunction with rsh, but since rsh
_is_ a security hole, I'm not overly worried about that.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061221/1aa9086b/attachment.htm 

From teratorn at twistedmatrix.com  Thu Dec 21 02:14:16 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 21 Dec 2006 01:14:16 -0600
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
Message-ID: <op.tkwed2cuy3d107@office2>

On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com> wrote:

> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
>
> The documentation above says that credentials should be able to do
> authentication with multiple passes.  However, I have not been able to  
> find
> any examples of it.
>
> As an alternative, I was going to implement a user object with state that
> determined what it was able to do.  I could force the client to conduct
> multiple challenge responses to achieve the logged in state.
>
> I figured it would be better to ask the mail list for the proper way to  
> do
> it first.
>
> Thanks

Excuse me if I'm being dense, but what are you trying to do exactly?

-- 
Eric Mangold
Twisted/Win32 Co-Maintainer



From alvinwang at gmail.com  Thu Dec 21 02:45:07 2006
From: alvinwang at gmail.com (Alvin Wang)
Date: Wed, 20 Dec 2006 23:45:07 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <op.tkwed2cuy3d107@office2>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
Message-ID: <77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>

On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>
> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
> wrote:
>
> > http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
> >
> > The documentation above says that credentials should be able to do
> > authentication with multiple passes.  However, I have not been able to
> > find
> > any examples of it.
> >
> > As an alternative, I was going to implement a user object with state
> that
> > determined what it was able to do.  I could force the client to conduct
> > multiple challenge responses to achieve the logged in state.
> >
> > I figured it would be better to ask the mail list for the proper way to
> > do
> > it first.
> >
> > Thanks
>
> Excuse me if I'm being dense, but what are you trying to do exactly?
>
> --
> Eric Mangold
> Twisted/Win32 Co-Maintainer
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

P2P application
Client logs onto server with Publickey
Since the server does not necessarily have the same IP address, I also want
to authenticate the server's PK also.

Thanks
-- 
Alvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061220/27a58e1c/attachment.htm 

From teratorn at twistedmatrix.com  Thu Dec 21 03:24:24 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 21 Dec 2006 02:24:24 -0600
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
	<77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
Message-ID: <op.tkwhmylsy3d107@office2>

On Thu, 21 Dec 2006 01:45:07 -0600, Alvin Wang <alvinwang at gmail.com> wrote:

> On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>>
>> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
>> wrote:
>>
>> >  
>> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
>> >
>> > The documentation above says that credentials should be able to do
>> > authentication with multiple passes.  However, I have not been able to
>> > find
>> > any examples of it.
>> >
>> > As an alternative, I was going to implement a user object with state
>> that
>> > determined what it was able to do.  I could force the client to  
>> conduct
>> > multiple challenge responses to achieve the logged in state.
>> >
>> > I figured it would be better to ask the mail list for the proper way  
>> to
>> > do
>> > it first.
>> >
>> > Thanks
>>
>> Excuse me if I'm being dense, but what are you trying to do exactly?
>>
>> --
>> Eric Mangold
>> Twisted/Win32 Co-Maintainer
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> P2P application
> Client logs onto server with Publickey
> Since the server does not necessarily have the same IP address, I also  
> want
> to authenticate the server's PK also.
>
> Thanks

As far as I know PB doesn't provide any mechanism for the client to  
authenticate the server. But it should be easy to implement.

You could use the normal procedure to log in to the server. The server  
provides various remote methods that you can call in order to have it  
verify itself to you. Once you (the client) are satisifed, then, and only  
then, do you consider yourself "logged in". You should be caution to  
prevent the server from invoking methods on the client, and vise vera,  
prior to authenticating the server.

-- 
Eric Mangold
Twisted/Win32 Co-Maintainer



From alvinwang at gmail.com  Thu Dec 21 04:24:59 2006
From: alvinwang at gmail.com (Alvin Wang)
Date: Thu, 21 Dec 2006 01:24:59 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <op.tkwhmylsy3d107@office2>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
	<77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
	<op.tkwhmylsy3d107@office2>
Message-ID: <77d044440612210124t638ddd9asd6d462d2994d687e@mail.gmail.com>

On 12/21/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>
> On Thu, 21 Dec 2006 01:45:07 -0600, Alvin Wang <alvinwang at gmail.com>
> wrote:
>
> > On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> >>
> >> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
> >> wrote:
> >>
> >> >
> >> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
> >> >
> >> > The documentation above says that credentials should be able to do
> >> > authentication with multiple passes.  However, I have not been able
> to
> >> > find
> >> > any examples of it.
> >> >
> >> > As an alternative, I was going to implement a user object with state
> >> that
> >> > determined what it was able to do.  I could force the client to
> >> conduct
> >> > multiple challenge responses to achieve the logged in state.
> >> >
> >> > I figured it would be better to ask the mail list for the proper way
> >> to
> >> > do
> >> > it first.
> >> >
> >> > Thanks
> >>
> >> Excuse me if I'm being dense, but what are you trying to do exactly?
> >>
> >> --
> >> Eric Mangold
> >> Twisted/Win32 Co-Maintainer
> >>
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>
> >
> > P2P application
> > Client logs onto server with Publickey
> > Since the server does not necessarily have the same IP address, I also
> > want
> > to authenticate the server's PK also.
> >
> > Thanks
>
> As far as I know PB doesn't provide any mechanism for the client to
> authenticate the server. But it should be easy to implement.
>
> You could use the normal procedure to log in to the server. The server
> provides various remote methods that you can call in order to have it
> verify itself to you. Once you (the client) are satisifed, then, and only
> then, do you consider yourself "logged in". You should be caution to
> prevent the server from invoking methods on the client, and vise vera,
> prior to authenticating the server.
>
> --
> Eric Mangold
> Twisted/Win32 Co-Maintainer
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

I was thinking that there might be something more elegant.

If I am implementing the login procedure by hand anyway, it seems like it
would be simpler to just build it into pb.root.  I could skip the
realms/checker stuff.  I would keep the secure stuff in a
pb.referenceableand not return it unless the user passes all the
tests.  Am I missing
anything?

Thanks
Alvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061221/58173225/attachment.htm 

From itamar at itamarst.org  Thu Dec 21 09:20:33 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 21 Dec 2006 09:20:33 -0500
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
Message-ID: <1166710833.21900.57.camel@localhost.localdomain>

On Wed, 2006-12-20 at 20:45 -0800, Alvin Wang wrote:
> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
> 
> The documentation above says that credentials should be able to do
> authentication with multiple passes.  However, I have not been able to
> find any examples of it. 

Cred in general can - credential can have multiple methods that return
Deferreds and need to be called in certain order; but PB doesn't really
have pluggable authentication, so you may have to do it with extra layer
(in mind




From exarkun at divmod.com  Thu Dec 21 09:54:36 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 21 Dec 2006 09:54:36 -0500
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166683784.4728.35.camel@infinite-loop>
Message-ID: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>

On Thu, 21 Dec 2006 00:49:44 -0600, Steve Freitas <sflist at ihonk.com> wrote:
>Hi all.
>
>I'm having trouble getting SSL working properly. I'm running a modified
>t.m.pop3.POP3 server and it was running peachy on port 110, no problems
>under real-world load, so I thought it'd be simple enough to add SSL
>support by changing this...
>
>INTERFACES = ('1.2.3.4','4.5.6.7', etc.)
>
>for iface in INTERFACES:
>    reactor.listenTCP(110, myPop3server, interface=iface)
>reactor.run()
>
>...to this:
>
>INTERFACES = ('1.2.3.4','4.5.6.7', etc.)
>
>sslContext = ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
>SSL_CERTIFICATE_FILE)
>
>for iface in INTERFACES:
>    reactor.listenTCP(110, myPop3server, interface=iface)
>    reactor.listenSSL(995, myPop3server, interface=iface,
>contextFactory=sslContext)
>reactor.run()
>
>Which worked fine when hitting it with a single client from my machine,
>but failed miserably when hitting it from mail2web.com. Lots of errors
>loading the message list and the messages. The log showed mail2web
>connecting and then immediately dropping the connection. I tried
>changing the code so I instantiated one sslContext per call to
>listenSSL. That made it much better, but still not perfect. The errors
>persisted.
>
>So I tried dropping the calls to listenSSL, and wrapped the server with
>stunnel. That worked perfectly, except since my host doesn't support
>transparent proxying, my twisted app doesn't see the connecting client's
>IP, and I need that, so that's not an option. It does implicate
>twisted's particular flavor of SSL in my problems, though.
>
>I don't know much about SSL, but I searched the twisted list and
>couldn't find anything that helped, with the possible exception of a
>query about support for SSL session resumption. I don't know what it is,
>but it sounds useful. Anyway, if anybody could toss an idea or two my
>way, I'd appreciate it.

It's pretty difficult to say what the problem is without knowing the
specific error which is occurring, or having a complete example which
can reproduce it.  I'd _guess_ your context object isn't configured
quite right.  If you can post a complete example which reproduces the
problem, it would be much easier to diagnose.  At the very least, you
should share the SSL errors which are occurring.

Jean-Paul



From sflist at ihonk.com  Thu Dec 21 10:32:22 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 09:32:22 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
References: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
Message-ID: <1166715142.9245.10.camel@infinite-loop>

Thanks for the response, JP.

On Thu, 2006-12-21 at 09:54 -0500, Jean-Paul Calderone wrote:

> It's pretty difficult to say what the problem is without knowing the
> specific error which is occurring, or having a complete example which
> can reproduce it.

Yeah, I understand that. I'm not sure where to go to get the errors,
though. I was trying to avoid putting up a complete example, because it
would be pretty involved, but I'll go that route if trying to dig up the
errors doesn't yield anything.

> I'd _guess_ your context object isn't configured
> quite right.

IOW, there's something wrong with the key/cert I'm feeding it? Calling
ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
>SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
stunnel as well.

> At the very least, you
> should share the SSL errors which are occurring.

How do I get at these? I didn't see any tracebacks being tossed. I'm
using 2.4.0.

Steve




From exarkun at divmod.com  Thu Dec 21 11:04:34 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 21 Dec 2006 11:04:34 -0500
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166715142.9245.10.camel@infinite-loop>
Message-ID: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>

On Thu, 21 Dec 2006 09:32:22 -0600, Steve Freitas <sflist at ihonk.com> wrote:
>Thanks for the response, JP.
>
>On Thu, 2006-12-21 at 09:54 -0500, Jean-Paul Calderone wrote:
>
> [snip]
>
>> I'd _guess_ your context object isn't configured
>> quite right.
>
>IOW, there's something wrong with the key/cert I'm feeding it? Calling
>ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
>>SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
>wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
>stunnel as well.

It's possible (in fact, likely) you need to do something other than just
create the DefaultOpenSSLContextFactory, too.  There are a lot of dials
and knobs here - the context factory you're using works okay for a lot of
cases, but it isn't appropriate for all cases.

You have two pieces of data which are yours -  your private key and your
certificate (which is a csr signed by RapidSSL).  The client needs (at
least) one more piece of information, though - RapidSSL's certificate.

Try this.  Put RapidSSL's certificate into a file, subclass
DefaultOpenSSLContextFactory, override cacheContext, and on self._context,
call use_certificate_chain_file with the name of the file you put RapidSSL's
certificate into.

This causes the server to include it in the handshake which is often
required for clients to accept your certificate as valid.

>
>> At the very least, you
>> should share the SSL errors which are occurring.
>
>How do I get at these? I didn't see any tracebacks being tossed. I'm
>using 2.4.0.

At some point, I think connectionLost for SSL connections was adjusted
so that the SSL exception would be available.  However, the important
information is going to be on the client side, so unless that is using
Twisted as well (it sounds to me as though it is not), this won't help
you.  How to extract the extra information will depend on what software
is acting as the client.  Hopefully the above suggestion will resolve the
problem, though.

Jean-Paul



From itamar at itamarst.org  Thu Dec 21 12:47:14 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 21 Dec 2006 12:47:14 -0500
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166715142.9245.10.camel@infinite-loop>
References: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
	<1166715142.9245.10.camel@infinite-loop>
Message-ID: <1166723234.21900.73.camel@localhost.localdomain>

On Thu, 2006-12-21 at 09:32 -0600, Steve Freitas wrote:

> IOW, there's something wrong with the key/cert I'm feeding it? Calling
> ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
> >SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
> wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
> stunnel as well.

Perhaps you want TLSv1 instead of SSLv3?




From sflist at ihonk.com  Thu Dec 21 15:57:57 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 14:57:57 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166723234.21900.73.camel@localhost.localdomain>
References: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
	<1166715142.9245.10.camel@infinite-loop>
	<1166723234.21900.73.camel@localhost.localdomain>
Message-ID: <1166734677.9245.23.camel@infinite-loop>

On Thu, 2006-12-21 at 12:47 -0500, Itamar Shtull-Trauring wrote:
> On Thu, 2006-12-21 at 09:32 -0600, Steve Freitas wrote:
> 
> > IOW, there's something wrong with the key/cert I'm feeding it? Calling
> > ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
> > >SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
> > wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
> > stunnel as well.
> 
> Perhaps you want TLSv1 instead of SSLv3?

Thanks for the reply, Itamar.

Gave it a try, and I don't think so -- mail2web simply wouldn't deal
with it at all. Of course, all I did was pass in a third argument to
DefaultOpenSSLContextFactory, SSL.TLSv1_METHOD. Should I have done any
more than that?

In the meantime, I'm gonna give JP's suggestions a try. Thanks, JP.

Steve




From teratorn at twistedmatrix.com  Thu Dec 21 17:37:43 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 21 Dec 2006 16:37:43 -0600
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612210124t638ddd9asd6d462d2994d687e@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
	<77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
	<op.tkwhmylsy3d107@office2>
	<77d044440612210124t638ddd9asd6d462d2994d687e@mail.gmail.com>
Message-ID: <op.tkxk45mgy3d107@office2>

On Thu, 21 Dec 2006 03:24:59 -0600, Alvin Wang <alvinwang at gmail.com> wrote:

> On 12/21/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>>
>> On Thu, 21 Dec 2006 01:45:07 -0600, Alvin Wang <alvinwang at gmail.com>
>> wrote:
>>
>> > On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>> >>
>> >> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
>> >> wrote:
>> >>
>> >> >
>> >>  
>> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
>> >> >
>> >> > The documentation above says that credentials should be able to do
>> >> > authentication with multiple passes.  However, I have not been able
>> to
>> >> > find
>> >> > any examples of it.
>> >> >
>> >> > As an alternative, I was going to implement a user object with  
>> state
>> >> that
>> >> > determined what it was able to do.  I could force the client to
>> >> conduct
>> >> > multiple challenge responses to achieve the logged in state.
>> >> >
>> >> > I figured it would be better to ask the mail list for the proper  
>> way
>> >> to
>> >> > do
>> >> > it first.
>> >> >
>> >> > Thanks
>> >>
>> >> Excuse me if I'm being dense, but what are you trying to do exactly?
>> >>
>> >> --
>> >> Eric Mangold
>> >> Twisted/Win32 Co-Maintainer
>> >>
>> >> _______________________________________________
>> >> Twisted-Python mailing list
>> >> Twisted-Python at twistedmatrix.com
>> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >>
>> >
>> > P2P application
>> > Client logs onto server with Publickey
>> > Since the server does not necessarily have the same IP address, I also
>> > want
>> > to authenticate the server's PK also.
>> >
>> > Thanks
>>
>> As far as I know PB doesn't provide any mechanism for the client to
>> authenticate the server. But it should be easy to implement.
>>
>> You could use the normal procedure to log in to the server. The server
>> provides various remote methods that you can call in order to have it
>> verify itself to you. Once you (the client) are satisifed, then, and  
>> only
>> then, do you consider yourself "logged in". You should be caution to
>> prevent the server from invoking methods on the client, and vise vera,
>> prior to authenticating the server.
>>
>> --
>> Eric Mangold
>> Twisted/Win32 Co-Maintainer
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> I was thinking that there might be something more elegant.
>
> If I am implementing the login procedure by hand anyway, it seems like it
> would be simpler to just build it into pb.root.  I could skip the
> realms/checker stuff.  I would keep the secure stuff in a
> pb.referenceableand not return it unless the user passes all the
> tests.  Am I missing
> anything?
>
> Thanks
> Alvin

I'm not really sure what that means in concrete implementation terms. But  
it seems like you get the picture. If you need more help it's probably  
time to start posting code.

-- 
Eric Mangold
Twisted/Win32 Co-Maintainer



From sflist at ihonk.com  Thu Dec 21 21:55:14 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 20:55:14 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>
References: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>
Message-ID: <1166756114.4739.11.camel@infinite-loop>

Thanks JP.

On Thu, 2006-12-21 at 11:04 -0500, Jean-Paul Calderone wrote:
> You have two pieces of data which are yours -  your private key and your
> certificate (which is a csr signed by RapidSSL).  The client needs (at
> least) one more piece of information, though - RapidSSL's certificate.

I found it here:

http://www.rapidssl.com/cps/rapidssl_01.cer

At least, I believe that's right, since despite some looking around, I'm
not sure how to verify by hand that my cert was signed by that CA. (I
played with openssl verify but it gave the OK to my cert without
pointing it at RapidSSL's root cert file, so I don't know that it's
doing what I want.) I've attached my cert in case you're interested.

> Try this.  Put RapidSSL's certificate into a file, subclass
> DefaultOpenSSLContextFactory, override cacheContext, and on self._context,
> call use_certificate_chain_file with the name of the file you put RapidSSL's
> certificate into.
> 
> This causes the server to include it in the handshake which is often
> required for clients to accept your certificate as valid.

Okay, I tried that...

class MyOpenSSLContextFactory(ssl.DefaultOpenSSLContextFactory):
    def cacheContext(self):
        ssl.DefaultOpenSSLContextFactory.cacheContext(self)
        self._context.use_certificate_chain_file(CA_CERT_FILE)

...and nothing at all would connect to it. But read on...

> At some point, I think connectionLost for SSL connections was adjusted
> so that the SSL exception would be available.  However, the important
> information is going to be on the client side <snip>

So based on this information, I whipped up a Twisted SSL client to hit
it so see what's wrong, and it tossed this out:

2006/12/21 20:36 CST [POP3Client,client] Traceback (most recent call
last):
        Failure: OpenSSL.SSL.Error: [('SSL routines', 'SSL3_READ_BYTES',
'sslv3 alert handshake failure'), ('SSL routines', 'SSL3_WRITE_BYTES',
'ssl handshake failure')]

Not sure if that's informative enough to suggest a next step!

Thanks for your help,

Steve
-------------- next part --------------
-----BEGIN CERTIFICATE-----
MIIDRTCCAq6gAwIBAgIDBSYeMA0GCSqGSIb3DQEBBAUAMFoxCzAJBgNVBAYTAlVT
MRwwGgYDVQQKExNFcXVpZmF4IFNlY3VyZSBJbmMuMS0wKwYDVQQDEyRFcXVpZmF4
IFNlY3VyZSBHbG9iYWwgZUJ1c2luZXNzIENBLTEwHhcNMDYxMjIwMjA1OTAzWhcN
MDcxMjIxMjA1OTAzWjCBtDELMAkGA1UEBhMCVVMxGjAYBgNVBAoTEW1haWwuaGFt
YmVycnkuY29tMRMwEQYDVQQLEwpHVDAxNzg0NDM4MScwJQYDVQQLEx5TZWUgd3d3
LnJhcGlkc3NsLmNvbS9jcHMgKGMpMDUxLzAtBgNVBAsTJkRvbWFpbiBDb250cm9s
IFZhbGlkYXRlZCAtIFJhcGlkU1NMKFIpMRowGAYDVQQDExFtYWlsLmhhbWJlcnJ5
LmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwhbwBpjWAPoh7RycuNmh
LTPRea2Sn1vBJjOEh4Ykz9ygU9Jg1oYrehcdbE8Kr67sqYmBXP9Cc9E1ggze5MSP
Ah4+LN4HvhrBJejFHL3EIJsw4zNHs5oaQotTESXTcCQaoY0+TYg4F+naFsbIg8wu
bx+d3wTLbD/ra1X2T21fdBMCAwEAAaOBvTCBujAOBgNVHQ8BAf8EBAMCBPAwHQYD
VR0OBBYEFBIbxks9N2DLNItskPfnvkchalyMMDsGA1UdHwQ0MDIwMKAuoCyGKmh0
dHA6Ly9jcmwuZ2VvdHJ1c3QuY29tL2NybHMvZ2xvYmFsY2ExLmNybDAfBgNVHSME
GDAWgBS+qKB0clBrRLfJI9j7qP+zV2tobDAdBgNVHSUEFjAUBggrBgEFBQcDAQYI
KwYBBQUHAwIwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQBmfT5Tzsft
qnvYrK71y7SHnUHM3dlDaRY4uLb1poE/BktG4eYGsKoBi/2bBK3rdgPi0NchaFqq
bJxJOnjYQFSmpMgeFp5jEYlJGIiZalhXh7sPtz+dBfD4sGEd5y3L9Oyu60DokmbL
EqemXOWWeQpa25IKUWcNt9O7jeoHRZSrYg==
-----END CERTIFICATE-----

From sflist at ihonk.com  Thu Dec 21 22:13:32 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 21:13:32 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166756114.4739.11.camel@infinite-loop>
References: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>
	<1166756114.4739.11.camel@infinite-loop>
Message-ID: <1166757212.4739.18.camel@infinite-loop>

On Thu, 2006-12-21 at 20:55 -0600, Steve Freitas wrote:
> At least, I believe that's right, since despite some looking around, I'm
> not sure how to verify by hand that my cert was signed by that CA. (I
> played with openssl verify but it gave the OK to my cert without
> pointing it at RapidSSL's root cert file, so I don't know that it's
> doing what I want.) I've attached my cert in case you're interested.

Never mind, I verified that was the correct root cert file, so now I'm
back to wondering why chaining them didn't seem to work...

Steve




From michele.petrazzo at unipex.it  Fri Dec 22 04:37:16 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Fri, 22 Dec 2006 10:37:16 +0100
Subject: [Twisted-Python] ftp question
In-Reply-To: <4587FA43.7000407@unipex.it>
References: <4587FA43.7000407@unipex.it>
Message-ID: <458BA74C.3090008@unipex.it>

Michele Petrazzo wrote:
> I list,
> I want to implement a not standard ftp STOR (STOT in the real) command.
> It not accept the path, because it create a new one on the server side.
> I'm tring to  work with the sendToConnection and SenderProtocol, but I
> don't understand where the file (that on storeFile are passed as "path")
> are opened (read) for after pass its data to the write method of
> SenderProtocol.
> 
> I stop myself because I'm not able to send data throw the channel!

I reply to myself saying that the reply are here:
http://twistedmatrix.com/pipermail/twisted-python/2003-October/005884.html

Michele
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3273 bytes
Desc: S/MIME Cryptographic Signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20061222/3c003207/attachment.bin 

From michele.petrazzo at unipex.it  Fri Dec 22 05:23:33 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Fri, 22 Dec 2006 11:23:33 +0100
Subject: [Twisted-Python] understand the ftp response
Message-ID: <458BB225.1030101@unipex.it>

Hi list,
I'm using ftp client and its storeFile for send a file to the server,
but I'm have some troubles to understand its response.

I receive, after the end of connection (fired by the SenderProtocol),
something that ( pprint.pprint(result) ):

[(True,
   [(True,
     ['150 FILE: /tmp/doc100.tif (Opening new data connection).',
      '226 Transfer complete (FILE: /tmp/doc100.tif).'])]),
  (True, None),
  (True, 'connection done')]

That isn't so readable, for me. I need only the last response (the 150
and 226), so I have to make a: result[0][1][0][1], that work, but is not
so understandable. Is there other soltions?

Thanks,
Michele
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3273 bytes
Desc: S/MIME Cryptographic Signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20061222/a13dbdb6/attachment.bin 

From yqiang at gmail.com  Fri Dec 22 10:57:49 2006
From: yqiang at gmail.com (Yi Qiang)
Date: Fri, 22 Dec 2006 07:57:49 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
Message-ID: <3af8969a0612220757x57bd1837v4aff6ec069e00f8@mail.gmail.com>

Hi Alvin,

> The documentation above says that credentials should be able to do
> authentication with multiple passes.  However, I have not been able to find
> any examples of it.

twisted.cred can indeed do authentication in multiple passes.  See the
login method defined in twisted.spread.pb.PBClientFactory to see how
it works.


Yi



From exarkun at twistedmatrix.com  Sun Dec 24 01:05:03 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 24 Dec 2006 06:05:03 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1166940303.11.1393106941@twistedmatrix.com

Bug summary
______________________
Summary for 2006-12-17 through 2006-12-24
Bugs opened: 30    Bugs closed: 26  Total open bugs: 801 (+4)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +6  |Highest:  +1          |Conch:               -1  
|Enhancement:  +6  |High:     +1          |Core:                +0  
|Task:         -3  |Normal:   +8          |Lore:                +0  
                   |Low:      -1          |Pb:                  +5  
                                          |Release Management:  +1  
                                          |Runner:              +1  
                                          |Trial:               +0  
                                          |Web2:                +2  
                                          |Words:               +1  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2301] Improve API documentation for twisted/lore/tree.py (opened by exarkun) (CLOSED, fixed)
    enhancement     lore       http://twistedmatrix.com/trac/ticket/2301

[#2303] setUpClass isn't run on subclasses if it already ran on superclass (opened by jknight)
    defect          trial      http://twistedmatrix.com/trac/ticket/2303

[#2309] trial man page incorrectly explains --coverage behaviour (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/2309

[#2313] procutils.which fails with a KeyError if PATH is not in os.environ (opened by dreid)
    defect          core       http://twistedmatrix.com/trac/ticket/2313

[#2317] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger)
    defect          pb         http://twistedmatrix.com/trac/ticket/2317

[#2319] twisted.spread.banana.decode is stateful (opened by exarkun)
    defect          pb         http://twistedmatrix.com/trac/ticket/2319

[#2125] PB Banana struggles transmitting large ints (opened by engie) (CLOSED, fixed)
    defect          pb         http://twistedmatrix.com/trac/ticket/2125

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2139] test_underUnderPathAlreadyImported and test_listingModules from twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2 reactor (opened by exarkun) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2139

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

                    ===== High =====
[#2324] _threadedselect.py uses uninformative names and has few docstrings (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2324

[#2325] _threadedselect.py duplicates tons of code from selectreactor.py (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2325

[#1083] gtk2reactor thread initialization confuses python-2.3 (opened by loic)
    defect          core       http://twistedmatrix.com/trac/ticket/1083

                    ===== Normal =====
[#2302] t.web2.channel.http.HTTPParser deals with HEAD requests incorrectly (opened by ghazel)
    defect          web2       http://twistedmatrix.com/trac/ticket/2302

[#2304] t.web2.client.http.HTTPClientChannelRequest.connectionLost does nothing (opened by ghazel)
    defect          web2       http://twistedmatrix.com/trac/ticket/2304

[#2305] twisted/internet/process.py leaks file descriptors when os.fork() raises (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2305

[#2307] rewrite setup.py so it doesn't os.system() other setup.py scripts (opened by radix)
    enhancement     release management http://twistedmatrix.com/trac/ticket/2307

[#2308] Test Twisted's release automation (opened by radix)
    enhancement     release management http://twistedmatrix.com/trac/ticket/2308

[#2310] twisted.spread.banana.b1282int could be faster (opened by exarkun)
    enhancement     pb         http://twistedmatrix.com/trac/ticket/2310

[#2311] Twisted Perspective Broker anonymous login support (opened by carlosedp) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2311

[#2312] Twisted Perspective Broker anonymous login support (opened by carlosedp)
    enhancement     pb         http://twistedmatrix.com/trac/ticket/2312

[#2314] t.r.procmon.ProcessMonitor should take an environment dictionary in addProcess (opened by dreid)
    enhancement     runner     http://twistedmatrix.com/trac/ticket/2314

[#2315] Request to add int8 string support to basic protocols (opened by metcalfc)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2315

[#2316] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger) (CLOSED, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2316

[#2318] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger) (CLOSED, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2318

[#2320] Implement XMPP server-to-server protocols (opened by ralphm)
    enhancement     words      http://twistedmatrix.com/trac/ticket/2320

[#2321] twisted.test.test_pb.NSPTestCase.tearDown calls stopListening but doesn't return the Deferred (opened by exarkun)
    defect          pb         http://twistedmatrix.com/trac/ticket/2321

[#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result of stopListening() (opened by jml) (CLOSED, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2322

[#2323] support deque in objgrep (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2323

                    ===== Low =====
[#2306] Possible error in documentation, in defer.html (opened by roup) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2306



Closed Bugs
______________________
                    ===== Highest =====
[#2300] Remove trailing whitespace from Python files (opened by jml, closed by jml, wontfix)
    task            core       http://twistedmatrix.com/trac/ticket/2300

[#2301] Improve API documentation for twisted/lore/tree.py (opened by exarkun, closed by exarkun, fixed)
    enhancement     lore       http://twistedmatrix.com/trac/ticket/2301

[#2125] PB Banana struggles transmitting large ints (opened by engie, closed by exarkun, fixed)
    defect          pb         http://twistedmatrix.com/trac/ticket/2125

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn, closed by teratorn, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2024] trial --dry-run fails with real test_suites, because pyunit suites don't have names (opened by spiv, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/2024

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn, closed by teratorn, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2137] Pointer for end-users to the new location of the Qt reactor (opened by exarkun, closed by exarkun, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/2137

[#2292] AMP error propagation does not work on subclasses (opened by htj, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2292

[#2125] PB Banana struggles transmitting large ints (opened by engie, closed by exarkun, fixed)
    defect          pb         http://twistedmatrix.com/trac/ticket/2125

[#2139] test_underUnderPathAlreadyImported and test_listingModules from twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2 reactor (opened by exarkun, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2139

[#2286] abstract.FileDescriptor calls pauseProducing even if producer is not streaming (opened by zseil, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2286

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn, closed by teratorn, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#1835] make main setup.py work with 'build' subcommand (opened by radix, closed by radix, fixed)
    defect          release management http://twistedmatrix.com/trac/ticket/1835

                    ===== High =====
[#1083] gtk2reactor thread initialization confuses python-2.3 (opened by loic, closed by letrigre, )
    defect          core       http://twistedmatrix.com/trac/ticket/1083

[#811 ] Race condition in streaming producers means producer may never be unpaused (opened by itamarst, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/811

[#677 ] widgets don't show with wxreactor and xrc (opened by acapnotic, closed by itamarst, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/677

                    ===== Normal =====
[#2311] Twisted Perspective Broker anonymous login support (opened by carlosedp, closed by carlosedp, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2311

[#2316] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger, closed by bgranger, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2316

[#2318] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger, closed by bgranger, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2318

[#1770] Reactor for Qt4 using PyQt4 (opened by grudy, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1770

[#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result of stopListening() (opened by jml, closed by jml, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2322

[#2174] Error in the PullProducer doc (opened by misto, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2174

[#1942] Fix IOCP buildslave (opened by exarkun, closed by teratorn, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1942

[#619 ] wxPython doesn't render interface components (opened by sdeerwester, closed by itamarst, fixed)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/619

                    ===== Low =====
[#388 ] Tests code coverage display for Twisted (opened by itamarst, closed by exarkun, wontfix)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/388

[#2306] Possible error in documentation, in defer.html (opened by roup, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2306





From glyph at divmod.com  Sun Dec 24 14:52:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 24 Dec 2006 19:52:50 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <20061224195250.17094.785823955.divmod.xquotient.105@joule.divmod.com>

On 06:05 am, exarkun at twistedmatrix.com wrote:
>Bug summary
>______________________
>Summary for 2006-12-17 through 2006-12-24
>Bugs opened: 30    Bugs closed: 26  Total open bugs: 801 (+4)
>
>|== Type Changes   |== Priority Changes   |== Component Changes
>|Defect:       +6  |Highest:  +1          |Conch:               -1
>|Enhancement:  +6  |High:     +1          |Core:                +0
>|Task:         -3  |Normal:   +8          |Lore:                +0
>                   |Low:      -1          |Pb:                  +5
>                                          |Release Management:  +1
>                                          |Runner:              +1
>                                          |Trial:               +0
>                                          |Web2:                +2
>                                          |Words:               +1
--------------------+----------------------+-----------------------
              = +9           = +9                              = +9

Something looks wrong here.  How did it get 9 in every column but 4 in the summary?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061224/bf07ede5/attachment.htm 

From felipe.lessa at gmail.com  Sun Dec 24 16:43:47 2006
From: felipe.lessa at gmail.com (Felipe Almeida Lessa)
Date: Sun, 24 Dec 2006 19:43:47 -0200
Subject: [Twisted-Python] Weekly Bug Summary
In-Reply-To: <20061224195250.17094.785823955.divmod.xquotient.105@joule.divmod.com>
References: <20061224195250.17094.785823955.divmod.xquotient.105@joule.divmod.com>
Message-ID: <c2701f5c0612241343i468448b2h684a9f57618eab7d@mail.gmail.com>

On 12/24/06, glyph at divmod.com <glyph at divmod.com> wrote:
> Something looks wrong here.  How did it get 9 in every column but 4 in the
> summary?

I think not all changes close buugs.


-- 
Felipe.



From teratorn at twistedmatrix.com  Sun Dec 24 17:43:17 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Sun, 24 Dec 2006 16:43:17 -0600
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <op.tk25efk9y3d107@office2>

Why is #2291 shown twice under the "New / Reopened Bugs" section?

-Eric

On Sun, 24 Dec 2006 00:05:03 -0600, <exarkun at twistedmatrix.com> wrote:

> Bug summary
> ______________________
> Summary for 2006-12-17 through 2006-12-24
> Bugs opened: 30    Bugs closed: 26  Total open bugs: 801 (+4)
>
> |== Type Changes   |== Priority Changes   |== Component Changes
> |Defect:       +6  |Highest:  +1          |Conch:               -1
> |Enhancement:  +6  |High:     +1          |Core:                +0
> |Task:         -3  |Normal:   +8          |Lore:                +0
>                    |Low:      -1          |Pb:                  +5
>                                           |Release Management:  +1
>                                           |Runner:              +1
>                                           |Trial:               +0
>                                           |Web2:                +2
>                                           |Words:               +1
>
>
> New / Reopened Bugs
> ______________________
>                     ===== Highest =====
> [#2301] Improve API documentation for twisted/lore/tree.py (opened by  
> exarkun) (CLOSED, fixed)
>     enhancement     lore       http://twistedmatrix.com/trac/ticket/2301
>
> [#2303] setUpClass isn't run on subclasses if it already ran on  
> superclass (opened by jknight)
>     defect          trial      http://twistedmatrix.com/trac/ticket/2303
>
> [#2309] trial man page incorrectly explains --coverage behaviour (opened  
> by jml)
>     defect          trial      http://twistedmatrix.com/trac/ticket/2309
>
> [#2313] procutils.which fails with a KeyError if PATH is not in  
> os.environ (opened by dreid)
>     defect          core       http://twistedmatrix.com/trac/ticket/2313
>
> [#2317] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2317
>
> [#2319] twisted.spread.banana.decode is stateful (opened by exarkun)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2319
>
> [#2125] PB Banana struggles transmitting large ints (opened by engie)  
> (CLOSED, fixed)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2125
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn) (CLOSED, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#2139] test_underUnderPathAlreadyImported and test_listingModules from  
> twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2  
> reactor (opened by exarkun) (CLOSED, fixed)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2139
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn) (CLOSED, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
>                     ===== High =====
> [#2324] _threadedselect.py uses uninformative names and has few  
> docstrings (opened by exarkun)
>     defect          core       http://twistedmatrix.com/trac/ticket/2324
>
> [#2325] _threadedselect.py duplicates tons of code from selectreactor.py  
> (opened by exarkun)
>     defect          core       http://twistedmatrix.com/trac/ticket/2325
>
> [#1083] gtk2reactor thread initialization confuses python-2.3 (opened by  
> loic)
>     defect          core       http://twistedmatrix.com/trac/ticket/1083
>
>                     ===== Normal =====
> [#2302] t.web2.channel.http.HTTPParser deals with HEAD requests  
> incorrectly (opened by ghazel)
>     defect          web2       http://twistedmatrix.com/trac/ticket/2302
>
> [#2304] t.web2.client.http.HTTPClientChannelRequest.connectionLost does  
> nothing (opened by ghazel)
>     defect          web2       http://twistedmatrix.com/trac/ticket/2304
>
> [#2305] twisted/internet/process.py leaks file descriptors when  
> os.fork() raises (opened by exarkun)
>     defect          core       http://twistedmatrix.com/trac/ticket/2305
>
> [#2307] rewrite setup.py so it doesn't os.system() other setup.py  
> scripts (opened by radix)
>     enhancement     release management  
> http://twistedmatrix.com/trac/ticket/2307
>
> [#2308] Test Twisted's release automation (opened by radix)
>     enhancement     release management  
> http://twistedmatrix.com/trac/ticket/2308
>
> [#2310] twisted.spread.banana.b1282int could be faster (opened by  
> exarkun)
>     enhancement     pb         http://twistedmatrix.com/trac/ticket/2310
>
> [#2311] Twisted Perspective Broker anonymous login support (opened by  
> carlosedp) (CLOSED, duplicate)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2311
>
> [#2312] Twisted Perspective Broker anonymous login support (opened by  
> carlosedp)
>     enhancement     pb         http://twistedmatrix.com/trac/ticket/2312
>
> [#2314] t.r.procmon.ProcessMonitor should take an environment dictionary  
> in addProcess (opened by dreid)
>     enhancement     runner     http://twistedmatrix.com/trac/ticket/2314
>
> [#2315] Request to add int8 string support to basic protocols (opened by  
> metcalfc)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2315
>
> [#2316] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger) (CLOSED, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2316
>
> [#2318] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger) (CLOSED, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2318
>
> [#2320] Implement XMPP server-to-server protocols (opened by ralphm)
>     enhancement     words      http://twistedmatrix.com/trac/ticket/2320
>
> [#2321] twisted.test.test_pb.NSPTestCase.tearDown calls stopListening  
> but doesn't return the Deferred (opened by exarkun)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2321
>
> [#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result  
> of stopListening() (opened by jml) (CLOSED, duplicate)
>     defect          core       http://twistedmatrix.com/trac/ticket/2322
>
> [#2323] support deque in objgrep (opened by glyph)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2323
>
>                     ===== Low =====
> [#2306] Possible error in documentation, in defer.html (opened by roup)  
> (CLOSED, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2306
>
>
>
> Closed Bugs
> ______________________
>                     ===== Highest =====
> [#2300] Remove trailing whitespace from Python files (opened by jml,  
> closed by jml, wontfix)
>     task            core       http://twistedmatrix.com/trac/ticket/2300
>
> [#2301] Improve API documentation for twisted/lore/tree.py (opened by  
> exarkun, closed by exarkun, fixed)
>     enhancement     lore       http://twistedmatrix.com/trac/ticket/2301
>
> [#2125] PB Banana struggles transmitting large ints (opened by engie,  
> closed by exarkun, fixed)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2125
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn, closed by teratorn, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#2024] trial --dry-run fails with real test_suites, because pyunit  
> suites don't have names (opened by spiv, closed by jml, fixed)
>     defect          trial      http://twistedmatrix.com/trac/ticket/2024
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn, closed by teratorn, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#2137] Pointer for end-users to the new location of the Qt reactor  
> (opened by exarkun, closed by exarkun, fixed)
>     task            core       http://twistedmatrix.com/trac/ticket/2137
>
> [#2292] AMP error propagation does not work on subclasses (opened by  
> htj, closed by glyph, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2292
>
> [#2125] PB Banana struggles transmitting large ints (opened by engie,  
> closed by exarkun, fixed)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2125
>
> [#2139] test_underUnderPathAlreadyImported and test_listingModules from  
> twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2  
> reactor (opened by exarkun, closed by glyph, fixed)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2139
>
> [#2286] abstract.FileDescriptor calls pauseProducing even if producer is  
> not streaming (opened by zseil, closed by glyph, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2286
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn, closed by teratorn, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#1835] make main setup.py work with 'build' subcommand (opened by  
> radix, closed by radix, fixed)
>     defect          release management  
> http://twistedmatrix.com/trac/ticket/1835
>
>                     ===== High =====
> [#1083] gtk2reactor thread initialization confuses python-2.3 (opened by  
> loic, closed by letrigre, )
>     defect          core       http://twistedmatrix.com/trac/ticket/1083
>
> [#811 ] Race condition in streaming producers means producer may never  
> be unpaused (opened by itamarst, closed by glyph, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/811
>
> [#677 ] widgets don't show with wxreactor and xrc (opened by acapnotic,  
> closed by itamarst, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/677
>
>                     ===== Normal =====
> [#2311] Twisted Perspective Broker anonymous login support (opened by  
> carlosedp, closed by carlosedp, duplicate)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2311
>
> [#2316] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger, closed by bgranger, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2316
>
> [#2318] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger, closed by bgranger, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2318
>
> [#1770] Reactor for Qt4 using PyQt4 (opened by grudy, closed by exarkun,  
> wontfix)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/1770
>
> [#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result  
> of stopListening() (opened by jml, closed by jml, duplicate)
>     defect          core       http://twistedmatrix.com/trac/ticket/2322
>
> [#2174] Error in the PullProducer doc (opened by misto, closed by glyph,  
> fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2174
>
> [#1942] Fix IOCP buildslave (opened by exarkun, closed by teratorn,  
> fixed)
>     task            core       http://twistedmatrix.com/trac/ticket/1942
>
> [#619 ] wxPython doesn't render interface components (opened by  
> sdeerwester, closed by itamarst, fixed)
>     enhancement     conch      http://twistedmatrix.com/trac/ticket/619
>
>                     ===== Low =====
> [#388 ] Tests code coverage display for Twisted (opened by itamarst,  
> closed by exarkun, wontfix)
>     enhancement     trial      http://twistedmatrix.com/trac/ticket/388
>
> [#2306] Possible error in documentation, in defer.html (opened by roup,  
> closed by exarkun, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2306
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From twisted at ralphm.ik.nu  Sun Dec 24 18:13:43 2006
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Mon, 25 Dec 2006 00:13:43 +0100
Subject: [Twisted-Python] Weekly Bug Summary
In-Reply-To: <op.tk25efk9y3d107@office2>
References: <op.tk25efk9y3d107@office2>
Message-ID: <20061224231343.GA63002@ik.nu>

On Sun, Dec 24, 2006 at 04:43:17PM -0600, Eric Mangold wrote:
> Why is #2291 shown twice under the "New / Reopened Bugs" section?

It has been reopened twice this week :-)

-- 
Groetjes,

ralphm



From twisted at koen.nu  Mon Dec 25 11:56:05 2006
From: twisted at koen.nu (Koen Bok)
Date: Mon, 25 Dec 2006 17:56:05 +0100
Subject: [Twisted-Python] Simple PB Example
Message-ID: <84535D81-9804-4DAB-914C-6B5F89C5C0DB@koen.nu>

Dear all,

Happy christmas!

I am trying to get the hang of Twisted and while the documentation is  
pretty clear I cannot figure out some basic things. I tried to build  
a little project to practise. I would love some hints, and I am not  
afraid to read.

Basically I want to write a simple server (Public Broker) which keeps  
a list of all connected clients. When one client sends a message to  
the server, I want the server to relay that message to other specific  
clients, but only those (yes basically an IM server).

So let's say I have a server and three clients:

server: Hello, I am here!
client #1: Yep, me too can I connect, I'm a girl?
server: Sure, I'll add you to my clients list!
client #2: Can I go too, I'm a guy?
server: Yep, you are client number two on my list...
client #3: Me too, me too, I am a guy!
server: Fine, but now let's do some stuff...
client #2: Server, can you please tell all clients that are girls  
that I'd like to see em after this session?
server: Let's find out who are female clients in my list and send  
them the message. Consider it done!
client #1: Thanks for the message, I'll see if I have time...

In the end client #2 would date client #1...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061225/5226e626/attachment.htm 

From hxianping at gmail.com  Sat Dec 30 02:35:57 2006
From: hxianping at gmail.com (Steve Han)
Date: Sat, 30 Dec 2006 15:35:57 +0800
Subject: [Twisted-Python] I am not sure where is best to post?
Message-ID: <702805a90612292335i4ec1b3d4r96b7b6cf417abad0@mail.gmail.com>

twisted-python/twisted-python-request or twisted-web??

My questions are about programming-related.

Thanks a lot.
-- 
Steve Han
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061230/1dd1fda2/attachment.htm 

From radix at twistedmatrix.com  Sat Dec 30 03:14:41 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 30 Dec 2006 03:14:41 -0500
Subject: [Twisted-Python] I am not sure where is best to post?
In-Reply-To: <702805a90612292335i4ec1b3d4r96b7b6cf417abad0@mail.gmail.com>
References: <702805a90612292335i4ec1b3d4r96b7b6cf417abad0@mail.gmail.com>
Message-ID: <60ed19d40612300014v18f6e4c9nc3c6e079163b029b@mail.gmail.com>

On 12/30/06, Steve Han <hxianping at gmail.com> wrote:
> twisted-python/twisted-python-request or twisted-web??

twisted-python-request isn't a list, it's just the management
interface to the twisted-python list.

twisted-python and twisted-web are both mailing lists for programming;
twisted-web is specifically for web-related discussion, whereas
twisted-python is general discussion for any twisted-related
programming.



-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/



From hxianping at gmail.com  Sat Dec 30 21:34:49 2006
From: hxianping at gmail.com (Steve Han)
Date: Sun, 31 Dec 2006 10:34:49 +0800
Subject: [Twisted-Python] script can be used as namespace?
Message-ID: <702805a90612301834q38ffef77l9c79e1afeaf540fa@mail.gmail.com>

I am working on an example:

from twisted.internet.app import Application
from twisted.internet.protocol import Protocol, Factory

class Fibonacci(Protocol):
    """Serve a sequence of Fibonacci numbers to all requesters"""


def dataReceived(self, data):
        self.factory.new
 = self.factory.a + self.factory.b
        self.transport.write('%d' % self.factory.new)
        self.factory.a = self.factory.b

self.factory.b = self.factory.new

def main():
    import fib_server    # Use script as namespace

    f = Factory()
    f.protocol = fib_server.Fibonacci
    f.a, f.b = 1, 1
    application = Application("Fibonacci")

    application.listenTCP(8888, f)
    application.save()

if'__main__' == __name__:

    main()

I have questions as the following:


   1. Is application.save( ) that make Fibonacci.tap file?
    2. testing on "twistd -f Fibonacci.tap" got message "Failed to load
   application: No module named fib_server".Can we use script as namesp?

-- 
Steve Han
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20061231/46d71be8/attachment.htm 

From exarkun at divmod.com  Sat Dec 30 21:52:24 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 30 Dec 2006 21:52:24 -0500
Subject: [Twisted-Python] script can be used as namespace?
In-Reply-To: <702805a90612301834q38ffef77l9c79e1afeaf540fa@mail.gmail.com>
Message-ID: <20061231025224.11447.464390053.divmod.quotient.3113@ohm>

On Sun, 31 Dec 2006 10:34:49 +0800, Steve Han <hxianping at gmail.com> wrote:
>I am working on an example:
>
>from twisted.internet.app import Application
>from twisted.internet.protocol import Protocol, Factory
>
>class Fibonacci(Protocol):
>    """Serve a sequence of Fibonacci numbers to all requesters"""
>
>
>def dataReceived(self, data):
>        self.factory.new
>= self.factory.a + self.factory.b
>        self.transport.write('%d' % self.factory.new)
>        self.factory.a = self.factory.b
>
>self.factory.b = self.factory.new
>
>def main():
>    import fib_server    # Use script as namespace
>
>    f = Factory()
>    f.protocol = fib_server.Fibonacci
>    f.a, f.b = 1, 1
>    application = Application("Fibonacci")
>
>    application.listenTCP(8888, f)
>    application.save()
>
>if'__main__' == __name__:
>
>    main()
>
>I have questions as the following:
>
>
>   1. Is application.save( ) that make Fibonacci.tap file?

Yes.  However, this is not the recommended way to create TAP files,
and TAP files themselves aren't even very highly recommended any more.
You may want to spend your time look at mktap plugins, .tac files, or
twistd plugins (which will be available in Twisted 2.5, which will be out
shortly).

>    2. testing on "twistd -f Fibonacci.tap" got message "Failed to load
>   application: No module named fib_server".Can we use script as namesp?

You need to fix your PYTHONPATH so that fib_server is importable.

http://python.org/doc/tut/node8.html#SECTION008110000000000000000

Jean-Paul



From sflist at ihonk.com  Sun Dec 31 00:30:50 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Sat, 30 Dec 2006 21:30:50 -0800
Subject: [Twisted-Python] script can be used as namespace?
In-Reply-To: <20061231025224.11447.464390053.divmod.quotient.3113@ohm>
References: <20061231025224.11447.464390053.divmod.quotient.3113@ohm>
Message-ID: <1167543050.2328.6.camel@lothar>

On Sat, 2006-12-30 at 21:52 -0500, Jean-Paul Calderone wrote:
> Yes.  However, this is not the recommended way to create TAP files,
> and TAP files themselves aren't even very highly recommended any more.
> You may want to spend your time look at mktap plugins, .tac files, or
> twistd plugins (which will be available in Twisted 2.5, which will be out
> shortly).

When 2.5 is released, what will be the preferred method of daemonizing
Twisted apps on *nix? Still .tac?

Steve




From hanwoody at gmail.com  Sun Dec 31 04:11:28 2006
From: hanwoody at gmail.com (William Hanwoody)
Date: Sun, 31 Dec 2006 17:11:28 +0800
Subject: [Twisted-Python] pidfile in twistd
Message-ID: <200612311711.28478.hanwoody@gmail.com>

when I run a service through twistd
# twistd --pidfile service.pid  -y service.py

in logfile, I see:
 Warning: No permission to delete pid file

Because I run this service as ordinary user, not root:
application = service.Application("serviceMine", uid, gid)
, but the owner of pidfile is still root, not ordinary user!
so when I shutdown this service, this pid file cannot be deleted!

-- 
_______________________________________________________________
William Hanwoody                             hanwoody at gmail.com

A senior Linux engineer, like system integrate
My blog - hanwoody.livejournal.com
_______________________________________________________________



From exarkun at divmod.com  Sun Dec 31 09:21:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 31 Dec 2006 09:21:32 -0500
Subject: [Twisted-Python] pidfile in twistd
In-Reply-To: <200612311711.28478.hanwoody@gmail.com>
Message-ID: <20061231142132.11447.1842070699.divmod.quotient.3351@ohm>

On Sun, 31 Dec 2006 17:11:28 +0800, William Hanwoody <hanwoody at gmail.com> wrote:
>when I run a service through twistd
># twistd --pidfile service.pid  -y service.py
>
>in logfile, I see:
> Warning: No permission to delete pid file
>
>Because I run this service as ordinary user, not root:
>application = service.Application("serviceMine", uid, gid)
>, but the owner of pidfile is still root, not ordinary user!
>so when I shutdown this service, this pid file cannot be deleted!
>

File deletion is allowed or disallowed based on permissions on the
directory containing the file, not the permissions of the file itself.

As long as your user has write permission to the directory containing
service.pid twistd should be able to clean it up.

Jean-Paul



From glyph at divmod.com  Fri Dec  1 19:11:33 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 02 Dec 2006 02:11:33 -0000
Subject: [Twisted-Python] Need Exception that will stop ther reactor
	within twistd
Message-ID: <20061202021133.11053.119016448.divmod.xquotient.1144@joule.divmod.com>

On 30 Nov, 08:00 pm, ncesar at lunix.com.ar wrote:
>my apologies for the delayed answer, i've been very busy latelly.

No problem, aren't we all.

>El Martes, 28 de Noviembre de 2006 06:07, glyph at divmod.com escribi:
>> Should the webserver stop simply because your protocol is not working?
>
>Well, yes I agree with you: not a webserver. So, I'll shortly describe my
>application.

My point is that you are artificially combining your application with your infrastructure.  The reactor is always potentially in use by multiple applications, so it is not the thing that should be stopped.

>I have multiple LSTP (Linux Terminal Server Project) servers. All servers are
>(almost) the same, and any of them can serve any client. There are arround
>8-12 servers and 150+ clients. I'm developing a twisted application that
>balances clients requests (by filtering DHCP discover/requests packets. (I
>attached an image, my application is called multiltsp). I'm using ip_queue
>for this.

OK.  So somewhere, there should be a MultiLTSPService which is the thing that gets stopped by these exceptions, I think.

>There is a LDAP somewhere that has all client MACs that are in the group (eg.
>the 150 clients) and from time to time, multiltsp re-reads this list. (I'm
>simplifying much of these details). I'll call this list "ALL-MACS"...
>... all multiltsp daemons MUST have the ALL-MACS list identical, in case there
>is a out of sync[1] problem the (incorrect) server must quit and the others
>must handle the clients.

Shouldn't it just get informed that it is in an invalid state, and re-start itself, rather than shutting down entirely?  I understand that this is a "panic" state that should "never happen", but you can flush that one bit of state without tanking the entire process.

>There are serveral  services involved in this application (the multicast UDP
>protocol, a shell, the ip_queue reader and others),  but a major problem as
>stated above MUST get the application down with some special clean up.

So there needs to be an object that represents the "whole application", which has references to all these services.  The reactor should not be serving that purpose.

>Glyph, I hope you understand my rustic English in the explanation above. Any
>advice or suggestion please respond this email.

It's not too bad :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061202/c8c543ba/attachment.html>

From exarkun at twistedmatrix.com  Sat Dec  2 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 03 Dec 2006 06:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1165125901.95.1099349792@twistedmatrix.com

Bug summary
______________________
Summary for 2006-11-26 through 2006-12-03
Bugs opened: 10    Bugs closed: 9  Total open bugs: 784 (+1)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +1  |Highest:  -2          |Core:      +2          
|Enhancement:  +0  |Normal:   +3          |Mail:      +0          
|Task:         +0  |Low:      -1          |Names:     +1          
                   |Lowest:   +1          |Pydoctor:  -3          
                                          |Trial:     +1          
                                          |Web2:      +1          
                                          |Words:     -1          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2248] Do error reporting in twisted.names.client.Resolver (opened by exarkun)
    task            names      http://twistedmatrix.com/trac/ticket/2248

                    ===== Normal =====
[#2246] Wrong signature for addCallbacks in the Deferred Reference (opened by zseil) (CLOSED, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2246

[#2247] Wrong signature for addCallbacks in the Deferred Reference (opened by zseil)
    defect          core       http://twistedmatrix.com/trac/ticket/2247

[#2249] Trial hangs if callLater is replaced (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/2249

[#2250] twisted.mail.pop3.__all__ lacks a comma (opened by mwh)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2250

[#2251] twisted.mail.pop3.__all__ is mis-defined (opened by exarkun) (CLOSED, duplicate)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2251

[#2252] web2 shouldn't use socket.gethostbyaddr (opened by dreid)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2252

[#2253] trial reporter dies with IOError (opened by acapnotic)
    defect          trial      http://twistedmatrix.com/trac/ticket/2253

[#2255] sqlalchemy support for twisted.enterprise (opened by synapsis) (CLOSED, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2255

                    ===== Lowest =====
[#2254] open connection for injecting code into long-running twistd process at run-time by default (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2254



Closed Bugs
______________________
                    ===== Highest =====
[#2177] Collect Jabber interfaces in one file (opened by ralphm, closed by ralphm, fixed)
    task            words      http://twistedmatrix.com/trac/ticket/2177

[#2147] Give TestCase a default testMethod (opened by jml, closed by jml, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2147

[#2072] Document newline convention required by twisted.mail.pop3.IMailbox.getMessage (opened by exarkun, closed by exarkun, fixed)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2072

                    ===== Normal =====
[#2246] Wrong signature for addCallbacks in the Deferred Reference (opened by zseil, closed by zseil, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2246

[#2209] pydoctor has problems with moresystems' using an absolute url prefix (opened by mwh, closed by mwh, fixed)
    defect          pydoctor   http://twistedmatrix.com/trac/ticket/2209

[#2210] pydoctor system pickles that use moresystems can't be loaded (opened by mwh, closed by mwh, fixed)
    defect          pydoctor   http://twistedmatrix.com/trac/ticket/2210

[#2251] twisted.mail.pop3.__all__ is mis-defined (opened by exarkun, closed by exarkun, duplicate)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2251

[#2255] sqlalchemy support for twisted.enterprise (opened by synapsis, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2255

                    ===== Low =====
[#1644] pydoctor's nevowhtml is probably easy to speed up (opened by mwh, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1644





From varname at gmail.com  Mon Dec  4 02:26:10 2006
From: varname at gmail.com (varname)
Date: Mon, 4 Dec 2006 10:26:10 +0100
Subject: [Twisted-Python] peer 2 peer, udp, stdio -> very confused
Message-ID: <d54d6da30612040126j7dfe2e8cg22ef676d8a71417b@mail.gmail.com>

hi all,

first: I have been reading the topics on this list regarding apps that
need to be client/server at the same time, use udp, need to be able to
react to user input while the reactor is running with much interest,
but I'm very confused now as to how I should proceed with my own
problem.

In short: I'm trying to create a peer 2 peer application that has a
text-based gui (commandline), driven by user input and communicates
with other peers over udp (and occasionally over tcp, to transfer
files).

I'm just really confused over some basic concepts. Am I correct that I
can just create a simple class extending protocol.DatagramProtocol to
facilitate the raw udp sending / receiving? Then use that in a Factory
class (MyClientFactory) to 'layer' the p2p protocol functionality on?
Where do I put my stdio implementation then? And am I right that the
only thing needed for udp to work is to do a
reactor.listenUDP(portnum, MyClientFactory()) or do I need to use two
factory classes, one for the client 'bit' and one for the server?

I realise that's a lot of questions, but the sheer size of twisted has
overwhelmed me a bit and I'd appreciate any help you can give.



From marcbohlen at acm.org  Mon Dec  4 08:28:57 2006
From: marcbohlen at acm.org (marc bohlen)
Date: Mon, 04 Dec 2006 10:28:57 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
Message-ID: <45743EB9.3070204@acm.org>

hi folks

I am new to twisted and new to server programming. Nonetheless, I would 
like to build a robust client-server looping mechanism in which a server 
would listen for input from N clients, say 10, and react immediately 
when it receives data from them. I have a sample (see below) that 
appears to run well, but am not sure if it will scale under real network 
load and larger N.
(I am parsing the input data received from the clients and using it to 
calculate a fibonnaci series, just for testing. The reactor can be 
stopped with keyboard input (I am on a win32 platform)).

If you see any problems with this approach, please let me know !
Thanks, marc

CODE:

import os, sys, time, msvcrt
from twisted.internet import reactor, defer, task
from twisted.internet.protocol import DatagramProtocol
ports = [1007, 2007, 3007, 4007, 5007, 6007, 7007, 8007, 9007]
#----------------------------
def check_keyboard(result):
   try:
       if(msvcrt.kbhit()):
           result = "hit"
   except:         pass

   return result
#---------------------------
def mstop(result):
   if(result == "hit"):
       print "got hit - closing task and reactor"
       mtask.stop()
       reactor.stop()
#---------------------------
def print_time(result):
   print time.asctime(time.localtime())
#---------------------------
def fibonnaci(limit):
   first, new, second = 0,0,1
   for i in xrange(limit - 1):
       new = first + second
       first = second
       second = new
   return new
#---------------------------
def mrun():
   d = defer.Deferred()
   d.addCallback(check_keyboard)
   d.addCallback(mstop)
   d.addCallback(print_time)
   d.callback("blabla")
#---------------------------
class server(DatagramProtocol):
   def datagramReceived(self, data, (host, port)):
       print "server received: %r from %s:%d" % (data, host, port)
       self.transport.write(data, (host, port))
       limit = int(data.split(": ")[1])
       num = fibonnaci(limit)
   print num
#---------------------------

if __name__ == '__main__':
   print "listening on 9 ports - hit key to quit"
   mrun()
   mtask = task.LoopingCall(mrun)
   mtask.start(1.0)
   for i in range (0,(len(ports))):
       reactor.listenUDP(ports[i], server())
reactor.run()
#--------------------------






From exarkun at divmod.com  Mon Dec  4 09:33:19 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 11:33:19 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <45743EB9.3070204@acm.org>
Message-ID: <20061204163319.20948.961198706.divmod.quotient.57545@ohm>

On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> wrote:
>hi folks
>
>I am new to twisted and new to server programming. Nonetheless, I would like 
>to build a robust client-server looping mechanism in which a server would 
>listen for input from N clients, say 10, and react immediately when it 
>receives data from them. I have a sample (see below) that appears to run 
>well, but am not sure if it will scale under real network load and larger N.
>(I am parsing the input data received from the clients and using it to 
>calculate a fibonnaci series, just for testing. The reactor can be stopped 
>with keyboard input (I am on a win32 platform)).
>
>If you see any problems with this approach, please let me know !
>Thanks, marc

You probably need to be more specific to get many useful responses.  What
do you expect N to go to?  Why do you use multiple ports?  Why are you
using UDP?  What do you mean by "robust"?  What does the Fibonnaci calculation
have to do with the application?  Is the keyboard input handling code
relevant or just part of the example?  Is win32 your development platform
or your deployment platform or both?

Jean-Paul



From exarkun at divmod.com  Mon Dec  4 09:37:20 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 11:37:20 -0500
Subject: [Twisted-Python] peer 2 peer, udp, stdio -> very confused
In-Reply-To: <d54d6da30612040126j7dfe2e8cg22ef676d8a71417b@mail.gmail.com>
Message-ID: <20061204163720.20948.1570268843.divmod.quotient.57550@ohm>

On Mon, 4 Dec 2006 10:26:10 +0100, varname <varname at gmail.com> wrote:
>hi all,
>
>first: I have been reading the topics on this list regarding apps that
>need to be client/server at the same time, use udp, need to be able to
>react to user input while the reactor is running with much interest,
>but I'm very confused now as to how I should proceed with my own
>problem.
>
>In short: I'm trying to create a peer 2 peer application that has a
>text-based gui (commandline), driven by user input and communicates
>with other peers over udp (and occasionally over tcp, to transfer
>files).
>
>I'm just really confused over some basic concepts. Am I correct that I
>can just create a simple class extending protocol.DatagramProtocol to
>facilitate the raw udp sending / receiving?

That is how UDP works with Twisted, yes.

>Then use that in a Factory
>class (MyClientFactory) to 'layer' the p2p protocol functionality on?

Protocol factories aren't involved in UDP, since their purpose is to
expose the concept of a connection with a limited lifetime, a concept
lacking in UDP.

>Where do I put my stdio implementation then?

Standard IO is treated as a connection-oriented transport, so you
interact with it in much the same way as you would interact with a
TCP connection.  The primary difference is that instead of creating
a factory and passing it to connectTCP, you just create your protocol
and instantiate StandardIO with it.

>And am I right that the
>only thing needed for udp to work is to do a
>reactor.listenUDP(portnum, MyClientFactory()) or do I need to use two
>factory classes, one for the client 'bit' and one for the server?

Since there is only listenUDP, there's no place for a 2nd DatagramProtocol
to go.  You can manage both sending and receiving datagrams with a single
instance.

Jean-Paul



From marcbohlen at acm.org  Mon Dec  4 10:05:29 2006
From: marcbohlen at acm.org (marc bohlen)
Date: Mon, 04 Dec 2006 12:05:29 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <20061204163319.20948.961198706.divmod.quotient.57545@ohm>
References: <20061204163319.20948.961198706.divmod.quotient.57545@ohm>
Message-ID: <45745559.5070504@acm.org>

Jean-Paul Calderone wrote:
> On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> 
> wrote:
>> hi folks
>>
>> I am new to twisted and new to server programming. Nonetheless, I 
>> would like to build a robust client-server looping mechanism in which 
>> a server would listen for input from N clients, say 10, and react 
>> immediately when it receives data from them. I have a sample (see 
>> below) that appears to run well, but am not sure if it will scale 
>> under real network load and larger N.
>> (I am parsing the input data received from the clients and using it 
>> to calculate a fibonnaci series, just for testing. The reactor can be 
>> stopped with keyboard input (I am on a win32 platform)).
>>
>> If you see any problems with this approach, please let me know !
>> Thanks, marc
>
> You probably need to be more specific to get many useful responses.  What
> do you expect N to go to?  Why do you use multiple ports?  Why are you
> using UDP?  What do you mean by "robust"?  What does the Fibonnaci 
> calculation
> have to do with the application?  Is the keyboard input handling code
> relevant or just part of the example?  Is win32 your development platform
> or your deployment platform or both?
>
> Jean-Paul
>

Hi Jean-Paul

I would want N no larger than 30.
I am testing only on localhost and have N ports instead of N computers for now.
Fibonnaci calculation: just a cpu cycle eating app for testing, will change.
Keyboard handling is important.
Win32 is development and deployment platform.
UDP choice: I would like the faster of the two protocols (UDP vs TCP), although TCP has congestion
control. Is TCP the better choice here?
Robust: will it work even under heavy network load


marc




From exarkun at divmod.com  Mon Dec  4 10:59:02 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 12:59:02 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <45745559.5070504@acm.org>
Message-ID: <20061204175902.20948.75069653.divmod.quotient.57632@ohm>

On Mon, 04 Dec 2006 12:05:29 -0500, marc bohlen <marcbohlen at acm.org> wrote:
>Jean-Paul Calderone wrote:
>>On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> wrote:
>>>hi folks
>>>
>>>I am new to twisted and new to server programming. Nonetheless, I would 
>>>like to build a robust client-server looping mechanism in which a server 
>>>would listen for input from N clients, say 10, and react immediately when 
>>>it receives data from them. I have a sample (see below) that appears to 
>>>run well, but am not sure if it will scale under real network load and 
>>>larger N.
>>>(I am parsing the input data received from the clients and using it to 
>>>calculate a fibonnaci series, just for testing. The reactor can be stopped 
>>>with keyboard input (I am on a win32 platform)).
>>>
>>>If you see any problems with this approach, please let me know !
>>>Thanks, marc
>>
>>You probably need to be more specific to get many useful responses.  What
>>do you expect N to go to?  Why do you use multiple ports?  Why are you
>>using UDP?  What do you mean by "robust"?  What does the Fibonnaci 
>>calculation
>>have to do with the application?  Is the keyboard input handling code
>>relevant or just part of the example?  Is win32 your development platform
>>or your deployment platform or both?
>>
>>Jean-Paul
>
>Hi Jean-Paul
>
>I would want N no larger than 30.

30 is quite small.  There should be no performance issues related to
the network layer.

>I am testing only on localhost and have N ports instead of N computers for 
>now.

Okay.  So ultimately it will be 1 port communicating with N computers,
instead of the current N ports all communicating with 1 computer?

>Fibonnaci calculation: just a cpu cycle eating app for testing, will change.

I don't think your original example realistically represented CPU load.
It seems more likely that you will have some work to do in response to
each request, which corresponds to datagramReceived

>Keyboard handling is important.
>Win32 is development and deployment platform.

Win32 is pretty crummy.  I have no idea how well anything will work on
it.  I generally assume that it won't, at all.

>UDP choice: I would like the faster of the two protocols (UDP vs TCP), 
>although TCP has congestion
>control. Is TCP the better choice here?

If that's the primary metric, TCP is a better choice.

>Robust: will it work even under heavy network load

If _that's_ the primary metric, TCP is still a better choice. :)

Jean-Paul



From marcbohlen at acm.org  Mon Dec  4 11:32:29 2006
From: marcbohlen at acm.org (marc bohlen)
Date: Mon, 04 Dec 2006 13:32:29 -0500
Subject: [Twisted-Python] robust listenUDP with N clients?
In-Reply-To: <20061204175902.20948.75069653.divmod.quotient.57632@ohm>
References: <20061204175902.20948.75069653.divmod.quotient.57632@ohm>
Message-ID: <457469BD.6060600@acm.org>

Jean-Paul Calderone wrote:
> On Mon, 04 Dec 2006 12:05:29 -0500, marc bohlen <marcbohlen at acm.org> 
> wrote:
>> Jean-Paul Calderone wrote:
>>> On Mon, 04 Dec 2006 10:28:57 -0500, marc bohlen <marcbohlen at acm.org> 
>>> wrote:
>>>> hi folks
>>>>
>>>> I am new to twisted and new to server programming. Nonetheless, I 
>>>> would like to build a robust client-server looping mechanism in 
>>>> which a server would listen for input from N clients, say 10, and 
>>>> react immediately when it receives data from them. I have a sample 
>>>> (see below) that appears to run well, but am not sure if it will 
>>>> scale under real network load and larger N.
>>>> (I am parsing the input data received from the clients and using it 
>>>> to calculate a fibonnaci series, just for testing. The reactor can 
>>>> be stopped with keyboard input (I am on a win32 platform)).
>>>>
>>>> If you see any problems with this approach, please let me know !
>>>> Thanks, marc
>>>
>>> You probably need to be more specific to get many useful responses.  
>>> What
>>> do you expect N to go to?  Why do you use multiple ports?  Why are you
>>> using UDP?  What do you mean by "robust"?  What does the Fibonnaci 
>>> calculation
>>> have to do with the application?  Is the keyboard input handling code
>>> relevant or just part of the example?  Is win32 your development 
>>> platform
>>> or your deployment platform or both?
>>>
>>> Jean-Paul
>>
>> Hi Jean-Paul
>>
>> I would want N no larger than 30.
>
> 30 is quite small.  There should be no performance issues related to
> the network layer.
>
>> I am testing only on localhost and have N ports instead of N 
>> computers for now.
>
> Okay.  So ultimately it will be 1 port communicating with N computers,
> instead of the current N ports all communicating with 1 computer?
>> Fibonnaci calculation: just a cpu cycle eating app for testing, will 
>> change.
>
> I don't think your original example realistically represented CPU load.
> It seems more likely that you will have some work to do in response to
> each request, which corresponds to datagramReceived
>
>> Keyboard handling is important.
>> Win32 is development and deployment platform.
>
> Win32 is pretty crummy.  I have no idea how well anything will work on
> it.  I generally assume that it won't, at all.
>
>> UDP choice: I would like the faster of the two protocols (UDP vs 
>> TCP), although TCP has congestion
>> control. Is TCP the better choice here?
>
> If that's the primary metric, TCP is a better choice.

Then I'll use TCP.

>
>> Robust: will it work even under heavy network load
>
> If _that's_ the primary metric, TCP is still a better choice. :)
>
> Jean-Paul


Yes, that is correct,  N computers, one port.
If 30 is a small number, what would be a large one; what is the upper limit?
I'll use TCP then (and move the code over to a suse box :) )

thanks for the tips,
marc





From ncesar at lunix.com.ar  Mon Dec  4 12:56:00 2006
From: ncesar at lunix.com.ar (Nicolas D. Cesar)
Date: Mon, 4 Dec 2006 16:56:00 -0300
Subject: [Twisted-Python] Need Exception that will stop ther reactor
	within twistd
In-Reply-To: <20061202021133.11053.119016448.divmod.xquotient.1144@joule.divmod.com>
References: <20061202021133.11053.119016448.divmod.xquotient.1144@joule.divmod.com>
Message-ID: <200612041656.02224.ncesar@lunix.com.ar>

El Viernes, 1 de Diciembre de 2006 23:11, glyph at divmod.com escribi:
> On 30 Nov, 08:00 pm, ncesar at lunix.com.ar wrote:
> My point is that you are artificially combining your application with your
> infrastructure.  The reactor is always potentially in use by multiple
> applications, so it is not the thing that should be stopped.

That's new to me! is there any documentation on "multiple applications" 
reactors? 

> >I have multiple LSTP (Linux Terminal Server Project) servers. All servers
> > are (almost) the same, and any of them can serve any client. There are
> > arround 8-12 servers and 150+ clients. I'm developing a twisted
> > application that balances clients requests (by filtering DHCP
> > discover/requests packets. (I attached an image, my application is called
> > multiltsp). I'm using ip_queue for this.
>
> OK.  So somewhere, there should be a MultiLTSPService which is the thing
> that gets stopped by these exceptions, I think.

I have a t.a.service.MultiService() serving all this inside an 
t.a.service.Application, where should I write the "try:.. except:" code? 

> >There is a LDAP somewhere that has all client MACs that are in the group
> > (eg. the 150 clients) and from time to time, multiltsp re-reads this
> > list. (I'm simplifying much of these details). I'll call this list
> > "ALL-MACS"... ... all multiltsp daemons MUST have the ALL-MACS list
> > identical, in case there is a out of sync[1] problem the (incorrect)
> > server must quit and the others must handle the clients.
>
> Shouldn't it just get informed that it is in an invalid state, and re-start
> itself, rather than shutting down entirely?  

Rebuilding your house won't stop the hurricane :-) re-starting won't bring it 
to a correct state, just because it's a problem from outside, usually 
asociated with a (sysadmin) human action. I need the process to stop (and 
send some mails) so it can be fully reparied with qualified supra-sysadmins. 
The MultiLTSP server can't be a zombie forever... But then again, i'm new to 
twisted (less than 5 month) and probably i'm misunderstanding twisted's 
components. 

> So there needs to be an object that represents the "whole application",
> which has references to all these services.  The reactor should not be
> serving that purpose.

I thought the main quit() was the reactor.stop(), my teachers were tutorials, 
is there any cleaner way to quit. There is a t.a.service.Application() should 
be used for this? should be used ANOTHER object?


-- 
Nicols D. Csar <ncesar at lunix.com.ar>
Lunix S.R.L. -[ http://www.lunix.com.ar ]-
GnuPG Public Key: gpg --keyserver wwwkeys.pgp.net --recv-key 0x3606F3E6
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20061204/3e08c545/attachment.sig>

From ncesar at lunix.com.ar  Mon Dec  4 13:43:06 2006
From: ncesar at lunix.com.ar (Nicolas D. Cesar)
Date: Mon, 4 Dec 2006 17:43:06 -0300
Subject: [Twisted-Python] Posible error in documentation
Message-ID: <200612041743.07043.ncesar@lunix.com.ar>

taken from
http://twistedmatrix.com/projects/core/documentation/howto/producers.html:

"Pull Producers

The pull producer API is defined by the IPushProducer interface. Pull 
producers are useful .."

shouldn't be the "IPullProducer interface" ..? Should I add a bug in TRAC? 

Greetings,
-- 
Nicols D. Csar <ncesar at lunix.com.ar>
Lunix S.R.L. -[ http://www.lunix.com.ar ]-
GnuPG Public Key: gpg --keyserver wwwkeys.pgp.net --recv-key 0x3606F3E6
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20061204/d0a7e2de/attachment.sig>

From mailinglists at grimmerink.nl  Mon Dec  4 14:16:17 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Mon, 4 Dec 2006 22:16:17 +0100
Subject: [Twisted-Python] web2: http Content-Length header
Message-ID: <200612042216.17762.mailinglists@grimmerink.nl>

Hi all,

I'm using twisted.web2.client.HTTPClientProtocol to implement a HTTP 
downloader object.

In order to show the download progress, I need the Content-Length header, 
which is found in the server response.
But it turns out this header is being removed from the response, because it 
is listed in connHeaderNames, twisted/web2/channel/http.py line 217.

Leaving 'content-length' out of this list gives me the valid content-length 
header in the response.

Is it really necessary to remove the content-length header from the 
response?

Regards, Pieter



From exarkun at divmod.com  Mon Dec  4 15:33:56 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 4 Dec 2006 17:33:56 -0500
Subject: [Twisted-Python] Posible error in documentation
In-Reply-To: <200612041743.07043.ncesar@lunix.com.ar>
Message-ID: <20061204223356.20948.1608469500.divmod.quotient.57900@ohm>

On Mon, 4 Dec 2006 17:43:06 -0300, "Nicolas D. Cesar" <ncesar at lunix.com.ar> wrote:
>taken from
>http://twistedmatrix.com/projects/core/documentation/howto/producers.html:
>
>"Pull Producers
>
>The pull producer API is defined by the IPushProducer interface. Pull
>producers are useful .."
>
>shouldn't be the "IPullProducer interface" ..? Should I add a bug in TRAC?

Someone already spotted this and there's a ticket.  Thanks though.

Jean-Paul



From thostrup at gmail.com  Tue Dec  5 05:19:42 2006
From: thostrup at gmail.com (Henrik Thostrup Jensen)
Date: Tue, 5 Dec 2006 13:19:42 +0100
Subject: [Twisted-Python] Passing information from SSL postconnection check
	to application
Message-ID: <f33a4da20612050419q1ca5780ch340218b667d843@mail.gmail.com>

Hi

I have an application which uses M2Crypto authentication. I use the
wrapper supplied by M2Crypto, and can do postConnection check just
fine. I need to pass along some of the information from the client
credentials, but I cannot figure out how to do this.

The code looks something like this:

from twisted.application import service, internet
from twisted.protocols import policies
from M2Crypto import SSL
from M2Crypto.SSL.TwistedProtocolWrapper import TLSProtocolWrapper

def protocol_factory(factory, wrapped_protocol):

        wrapper = TLSProtocolWrapper(factory,
                                     wrapped_protocol,
                                     startPassThrough=0,
                                     client=0,
                                     contextFactory=ServerContextFactory(),
                                     postConnectionCheck=MyChecker())
        return wrapper


factory = ...

wrapper = policies.WrappingFactory(factory)
wrapper.protocol = protocol_factory
wrapper.protocol.TLS = True
factory.startTLS = True
factory.sslChecker = SSL.Checker.Checker()

factory = wrapper

application = service.Application('foo')
service = internet.TCPServer(8443, factory)
service.setServiceParent(application)

Currently the original factory is the factory from twisted.web2, but
I would like to be able to do this, on a general level, e.g., from AMP
as well. Setting the information into some global value is sure to fail,
but I cannot see how else to propagate information.

-- 
   - Henrik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061205/eabea516/attachment.html>

From mailinglists at grimmerink.nl  Tue Dec  5 14:55:37 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Tue, 5 Dec 2006 22:55:37 +0100
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <200612042216.17762.mailinglists@grimmerink.nl>
References: <200612042216.17762.mailinglists@grimmerink.nl>
Message-ID: <200612052255.37751.mailinglists@grimmerink.nl>

On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
> Is it really necessary to remove the content-length header from the
> response?

Correction, it turns out indeed it has to be removed. If it isn't stripped 
from the response, somehow the download stops after a single block of data 
has been received.

Since the content-length is saved in self.length, the following could be a 
workaround (and it does work fine here):

Add the Content-Length header again after calling setConnectionParams, at 
the bottom of allHeadersReceived (line 195 twisted/web2/channel/http.py)

  self.inHeaders.setHeader('Content-Length', str(self.length))

What exactly goes wrong with setConnectionParams when the Content-Length 
header is not (temporarily) removed is not 100% clear to me, so there 
probably are better solutions for this problem.

Regards, Pieter



From atlithorn at gmail.com  Tue Dec  5 15:51:06 2006
From: atlithorn at gmail.com (=?ISO-8859-1?Q?Atli_=DEorbj=F6rnsson?=)
Date: Tue, 5 Dec 2006 22:51:06 +0000
Subject: [Twisted-Python] twisted dohop
Message-ID: <91142a380612051451k441243f8vd438f5daf618c3f8@mail.gmail.com>

We would like to be added to the ProjectsUsingTwisted page. dohop.com is a
flight planner and twisted runs what we call our "priceserver". The
priceserver is under a substantial amount of load and twisted handles the
job handsomely.

Try it out at http://www.dohop.com

The backend of the site runs otherwise almost wholly on Python with bits and
pieces in C. We do a lot of django under mod_python with a mysql db.

Hope you see us fit for a mention and thank you for the amazing framework
that is twisted.

Atli Thorbjornsson
dohop.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061205/ed12d2e0/attachment.html>

From radix at twistedmatrix.com  Tue Dec  5 16:18:14 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 5 Dec 2006 18:18:14 -0500
Subject: [Twisted-Python] twisted dohop
In-Reply-To: <91142a380612051451k441243f8vd438f5daf618c3f8@mail.gmail.com>
References: <91142a380612051451k441243f8vd438f5daf618c3f8@mail.gmail.com>
Message-ID: <60ed19d40612051518j3adf62c4hb73ce4b8abc2c4d@mail.gmail.com>

On 12/5/06, Atli orbjrnsson <atlithorn at gmail.com> wrote:
> We would like to be added to the ProjectsUsingTwisted page. dohop.com is a
> flight planner and twisted runs what we call our "priceserver". The
> priceserver is under a substantial amount of load and twisted handles the
> job handsomely.
>
> Try it out at http://www.dohop.com

Ok, I've added it to the ProjectsUsingTwisted page, but really, this
kind of thing (that is, a commercial service) would be much more
appropriate on the SuccessStories page -- it would be great if you
could give us a few official sentences about how Twisted helped you
develop this service so we could put it there.

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From dreid at dreid.org  Tue Dec  5 17:54:41 2006
From: dreid at dreid.org (David Reid)
Date: Tue, 5 Dec 2006 16:54:41 -0800
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <200612052255.37751.mailinglists@grimmerink.nl>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612052255.37751.mailinglists@grimmerink.nl>
Message-ID: <48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>


On Dec 5, 2006, at 1:55 PM, Pieter Grimmerink wrote:

> On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
>> Is it really necessary to remove the content-length header from the
>> response?
>
> Correction, it turns out indeed it has to be removed. If it isn't  
> stripped
> from the response, somehow the download stops after a single block  
> of data
> has been received.
>
> Since the content-length is saved in self.length, the following  
> could be a
> workaround (and it does work fine here):

Why don't you just use self.length when showing the progress?
-David

David Reid
http://dreid.org/





From hxianping at gmail.com  Wed Dec  6 00:23:49 2006
From: hxianping at gmail.com (Steve Han)
Date: Wed, 6 Dec 2006 15:23:49 +0800
Subject: [Twisted-Python] Problems with building of twisted-2.4.0
Message-ID: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>

Hi all,
I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the messages
as the following:

 ...build/temp.linux-i686-2.4/Dependencies/zope.interface-
ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
unable to execute gcc: No such file or directory
error: command 'gcc' failed with exit status 1

What does mean by that?
Which packages I need for building Twisted/ZopeInterface?
Thanks alot.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061206/4a846c3c/attachment.html>

From robert at gravina.com  Wed Dec  6 01:03:20 2006
From: robert at gravina.com (Robert Gravina)
Date: Wed, 6 Dec 2006 17:03:20 +0900
Subject: [Twisted-Python] Problems with building of twisted-2.4.0
In-Reply-To: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
References: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
Message-ID: <20140598-9163-4239-9729-FF91F103B914@gravina.com>

> Hi all,
> I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the  
> messages as the following:
>
>  ...build/temp.linux-i686-2.4/Dependencies/zope.interface- 
> ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> unable to execute gcc: No such file or directory
> error: command 'gcc' failed with exit status 1
>
> What does mean by that?
> Which packages I need for building Twisted/ZopeInterface?
> Thanks alot.

It seems that you are running Linux, but don't have GCC (a C  
compiler) installed. Parts of Zope Interface (and Twisted, too) are  
written in C, so one is needed. Most Linux distributions install one  
automatically, but as far as I know some don't if you don't  ask it  
to install development software. Either that, or it's installed but  
not in your PATH.

Anyhow, there should be a GUI program for adding/removing programs,  
so use it to install "gcc". If not,  and you are using Ubuntu or  
Debian "apt-get install gcc" or for Fedora try "yum install gcc" and  
then try building Twisted again.

Please excuse me if you know all this already (you are building  
Twisted after all). It just seems like problem is that GCC is not  
installed/cannot be found.

Robert




From mailinglists at grimmerink.nl  Wed Dec  6 02:35:11 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Wed, 6 Dec 2006 10:35:11 +0100
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612052255.37751.mailinglists@grimmerink.nl>
	<48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>
Message-ID: <200612061035.12521.mailinglists@grimmerink.nl>

On Wednesday 06 December 2006 01:54, David Reid wrote:
> Why don't you just use self.length when showing the progress?

The length is not passed to the Response object.

twisted/web2/client/http.py line 168:
self.response = http.Response(self.code, self.inHeaders, self.stream)

This response object is then passed to the responseDefer callback, which 
means we only have resultcode, headers and stream to work with.

Rgds, Pieter



From gabrielverta at gmail.com  Wed Dec  6 05:23:32 2006
From: gabrielverta at gmail.com (Gabriel)
Date: Wed, 6 Dec 2006 04:23:32 -0800
Subject: [Twisted-Python] Thread
Message-ID: <2254669b0612060423t4f75043auef8424ab3b5e257f@mail.gmail.com>

Hi!!

I'm new in Twisted, and I'm having problems with Thread.
I was looking for it at documentation, and saw that it's not safe
(!?), but it's possible to run using twisted.python.threadable, I
haven't understood the thread examples using simple TCP and
ServerFactoryl, there is anything like reactor.run() using it or can I
only use threads as client? Can anyone give me a basic example?

Thanks!

from Brazil...

         Gabriel
www.garimpar.com



From exarkun at divmod.com  Wed Dec  6 06:49:50 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Wed, 6 Dec 2006 08:49:50 -0500
Subject: [Twisted-Python] Thread
In-Reply-To: <2254669b0612060423t4f75043auef8424ab3b5e257f@mail.gmail.com>
Message-ID: <20061206134950.20948.1512853559.divmod.quotient.60088@ohm>

On Wed, 6 Dec 2006 04:23:32 -0800, Gabriel <gabrielverta at gmail.com> wrote:
>Hi!!
>
>I'm new in Twisted, and I'm having problems with Thread.
>I was looking for it at documentation, and saw that it's not safe
>(!?), but it's possible to run using twisted.python.threadable, I
>haven't understood the thread examples using simple TCP and
>ServerFactoryl, there is anything like reactor.run() using it or can I
>only use threads as client? Can anyone give me a basic example?
>
>Thanks!
>
>from Brazil...
>
>         Gabriel
>www.garimpar.com
>

You don't need threads to do most things in Twisted.  More than that,
threads aren't /helpful/ for doing most things in Twisted.  More than
that, most of Twisted was written so that threads could be avoided.

Jean-Paul



From foom at fuhm.net  Wed Dec  6 09:23:24 2006
From: foom at fuhm.net (James Y Knight)
Date: Wed, 6 Dec 2006 11:23:24 -0500
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <200612061035.12521.mailinglists@grimmerink.nl>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612052255.37751.mailinglists@grimmerink.nl>
	<48238A9C-A227-4816-991F-93FCA3F94C26@dreid.org>
	<200612061035.12521.mailinglists@grimmerink.nl>
Message-ID: <1869B98D-5F03-49E0-9084-80771CE346F2@fuhm.net>


On Dec 6, 2006, at 4:35 AM, Pieter Grimmerink wrote:

> On Wednesday 06 December 2006 01:54, David Reid wrote:
>> Why don't you just use self.length when showing the progress?
>
> The length is not passed to the Response object.
>
> twisted/web2/client/http.py line 168:
> self.response = http.Response(self.code, self.inHeaders, self.stream)
>
> This response object is then passed to the responseDefer callback,  
> which
> means we only have resultcode, headers and stream to work with.

Sorry for not responding before. The Content-Length is removed from  
the set of headers and moved to an attribute of the stream. This is  
so that if anybody does content transforms before you get the data  
(e.g. transparent uncompressing/etc), the length and the data is in  
the same place, among other reasons.

You're supposed to get the length from the stream object.  
stream.length is an integer if the content length is known, and None  
if it is not known.

James




From mailinglists at grimmerink.nl  Wed Dec  6 10:39:40 2006
From: mailinglists at grimmerink.nl (Pieter Grimmerink)
Date: Wed, 6 Dec 2006 18:39:40 +0100
Subject: [Twisted-Python] web2: http Content-Length header
In-Reply-To: <1869B98D-5F03-49E0-9084-80771CE346F2@fuhm.net>
References: <200612042216.17762.mailinglists@grimmerink.nl>
	<200612061035.12521.mailinglists@grimmerink.nl>
	<1869B98D-5F03-49E0-9084-80771CE346F2@fuhm.net>
Message-ID: <200612061839.40844.mailinglists@grimmerink.nl>

On Wednesday 06 December 2006 17:23, James Y Knight wrote:
> You're supposed to get the length from the stream object.
> stream.length is an integer if the content length is known, and None
> if it is not known.

But stream.length is always None, even though the Content-Length is 
specified.

Pasted below is an example which demonstrates what I'm doing.
This is the response I'm getting:

<twisted.web2.http.Response code=302, streamlen=None>

And this is the response, when I add the line

self.stream.length = self.length

in twisted/web2/client/http.py, line 168:

<twisted.web2.http.Response code=302, streamlen=228>

Rgds, Pieter

---------------------------------------------------

from twisted.internet import protocol
from twisted.web2 import stream as stream_mod, http, http_headers, 
responsecode
from twisted.web2.client.http import ClientRequest, HTTPClientProtocol

def testConn(host):
    from twisted.internet import reactor
    d = protocol.ClientCreator(reactor, HTTPClientProtocol).connectTCP(host, 
80)
    def gotResp(resp):
        def print_(n):
            print "DATA"
        def printdone(n):
            print "DONE"
        print "GOT RESPONSE %s" % resp
        stream_mod.readStream(resp.stream, print_).addCallback(printdone)
    def sendReqs(proto):
        proto.submitRequest(ClientRequest("GET", "/index.html", 
{'Host':host}, None)).addCallback(gotResp)
    d.addCallback(sendReqs)
    del d
    reactor.run()

testConn("www.google.com")



From teratorn at twistedmatrix.com  Thu Dec  7 02:54:05 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 07 Dec 2006 03:54:05 -0600
Subject: [Twisted-Python] What Win32 issues are important to you?
Message-ID: <op.tj6ogf0xy3d107@office2>

I'm going to set aside some time to work on win32 issues, and was  
wondering what tickets are particularly important for the folks out there?

-- 
Eric Mangold
Twisted/Win32 Maintainer



From nico at tekNico.net  Thu Dec  7 03:59:03 2006
From: nico at tekNico.net (Nicola Larosa)
Date: Thu, 07 Dec 2006 11:59:03 +0100
Subject: [Twisted-Python] Re: Problems with building of twisted-2.4.0
In-Reply-To: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
References: <702805a90612052323t780ee7e5h326917b2ce44713b@mail.gmail.com>
Message-ID: <el8s5n$79u$1@sea.gmane.org>

Steve Han wrote:
> Hi all,
> I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the
> messages as the following:
> 
>  ...build/temp.linux-i686-2.4/Dependencies/zope.interface-ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> 
> unable to execute gcc: No such file or directory
> error: command 'gcc' failed with exit status 1
> 
> What does mean by that?
> Which packages I need for building Twisted/ZopeInterface?

You do not have gcc (the GNU Compiler Collection) installed. If you are
using Ubuntu Linux (or Kubuntu, or Xubuntu, or Edubuntu, or...), use this
command:

$ sudo apt-get install build-essential

If you are using another distribution, you'll have to come up with the
equivalent command.


-- 
Nicola Larosa - http://www.tekNico.net/

If users expect the Nintendo Wii to be truly off, they need to pull the
power plug -- assuming there isn't a battery foiling that tactic. There
seems to be no way to disconnect the Internet, as the Nintendo Wii is
wireless only. Maybe there is no way to turn the Nintendo Wii off.
 -- Bruce Schneier, May 2006




From jml at mumak.net  Thu Dec  7 17:16:29 2006
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 8 Dec 2006 11:16:29 +1100
Subject: [Twisted-Python] What Win32 issues are important to you?
In-Reply-To: <op.tj6ogf0xy3d107@office2>
References: <op.tj6ogf0xy3d107@office2>
Message-ID: <d06a5cd30612071616x70541f2h1ca9f6cf1ad89c09@mail.gmail.com>

On 12/7/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> I'm going to set aside some time to work on win32 issues, and was
> wondering what tickets are particularly important for the folks out there?
>

Hey Eric,

Thanks for showing the Windows love.  The most pressing win32 issue
for me is the large number of reactor unclean warnings in the
win32event reactor.

>From #2091:
    One other thing: the win32-win32er slave had about 250 more errors
    with this branch merged than without it. win32er may not be a
    completely supported reactor, but introducing this many new errors
    to even an unsupported reactor makes me very nervous and I think
    we should try to avoid doing it.


Another very important issue is the buildslaves. As a UNIX[1]
developer, the buildslaves are my primary point of interaction with
the Windows world. This leads to two things:

    1. It's hard to care about the win32er and iocp reactors when they
are always red.[2]
    2. It would be very nice for the "remove-.pyc" step to always work.


That's it from me. Thanks again for taking the time to look after win32.

cheers,
jml

[1] I feel justified in calling Mac OS X a UNIX. It helps me sleep.
[2] Perhaps we should have two buildbot pages: "supported" and
"unsupported". win32er, iocp, tsr, pypy and friends can all hide on
"unsupported".



From hxianping at gmail.com  Thu Dec  7 20:08:26 2006
From: hxianping at gmail.com (Steve Han)
Date: Fri, 8 Dec 2006 11:08:26 +0800
Subject: [Twisted-Python] Re: Twisted-Python Digest, Vol 33, Issue 6
In-Reply-To: <E1Gs0kH-0003PB-02@pyramid.twistedmatrix.com>
References: <E1Gs0kH-0003PB-02@pyramid.twistedmatrix.com>
Message-ID: <702805a90612071908g41e5d577m20db2707ab66ff0d@mail.gmail.com>

Thank you very much Robert.I have been using SuSE10.0 that contained
twisted.I could not find twisted when updating to SuSE10.1Wired.I am back to
suse10.0 again.I will learn more about twisted from now.

On 12/7/06, twisted-python-request at twistedmatrix.com <
twisted-python-request at twistedmatrix.com> wrote:
>
> Send Twisted-Python mailing list submissions to
>         twisted-python at twistedmatrix.com
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> or, via email, send a message with subject or body 'help' to
>         twisted-python-request at twistedmatrix.com
>
> You can reach the person managing the list at
>         twisted-python-owner at twistedmatrix.com
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Twisted-Python digest..."
>
>
> Today's Topics:
>
>    1. Re: web2: http Content-Length header (Pieter Grimmerink)
>    2. twisted dohop ( Atli ?orbj?rnsson )
>    3. Re: twisted dohop (Christopher Armstrong)
>    4. Re: web2: http Content-Length header (David Reid)
>    5. Problems with building of twisted-2.4.0 (Steve Han)
>    6. Re: Problems with building of twisted-2.4.0 (Robert Gravina)
>    7. Re: web2: http Content-Length header (Pieter Grimmerink)
>    8. Thread (Gabriel)
>    9. Re: Thread (Jean-Paul Calderone)
>   10. Re: web2: http Content-Length header (James Y Knight)
>   11. Re: web2: http Content-Length header (Pieter Grimmerink)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 5 Dec 2006 22:55:37 +0100
> From: Pieter Grimmerink <mailinglists at grimmerink.nl>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <200612052255.37751.mailinglists at grimmerink.nl>
> Content-Type: text/plain;  charset="us-ascii"
>
> On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
> > Is it really necessary to remove the content-length header from the
> > response?
>
> Correction, it turns out indeed it has to be removed. If it isn't stripped
> from the response, somehow the download stops after a single block of data
> has been received.
>
> Since the content-length is saved in self.length, the following could be a
> workaround (and it does work fine here):
>
> Add the Content-Length header again after calling setConnectionParams, at
> the bottom of allHeadersReceived (line 195 twisted/web2/channel/http.py)
>
>   self.inHeaders.setHeader('Content-Length', str(self.length))
>
> What exactly goes wrong with setConnectionParams when the Content-Length
> header is not (temporarily) removed is not 100% clear to me, so there
> probably are better solutions for this problem.
>
> Regards, Pieter
>
>
>
> ------------------------------
>
> Message: 2
> Date: Tue, 5 Dec 2006 22:51:06 +0000
> From: " Atli ?orbj?rnsson " <atlithorn at gmail.com>
> Subject: [Twisted-Python] twisted dohop
> To: twisted-python at twistedmatrix.com
> Message-ID:
>         <91142a380612051451k441243f8vd438f5daf618c3f8 at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> We would like to be added to the ProjectsUsingTwisted page. dohop.com is a
> flight planner and twisted runs what we call our "priceserver". The
> priceserver is under a substantial amount of load and twisted handles the
> job handsomely.
>
> Try it out at http://www.dohop.com
>
> The backend of the site runs otherwise almost wholly on Python with bits
> and
> pieces in C. We do a lot of django under mod_python with a mysql db.
>
> Hope you see us fit for a mention and thank you for the amazing framework
> that is twisted.
>
> Atli Thorbjornsson
> dohop.com
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20061205/ed12d2e0/attachment-0001.htm
>
> ------------------------------
>
> Message: 3
> Date: Tue, 5 Dec 2006 18:18:14 -0500
> From: "Christopher Armstrong" <radix at twistedmatrix.com>
> Subject: Re: [Twisted-Python] twisted dohop
> To: "Twisted general discussion" <twisted-python at twistedmatrix.com>
> Message-ID:
>         <60ed19d40612051518j3adf62c4hb73ce4b8abc2c4d at mail.gmail.com>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
> On 12/5/06, Atli orbjrnsson <atlithorn at gmail.com> wrote:
> > We would like to be added to the ProjectsUsingTwisted page. dohop.com is
> a
> > flight planner and twisted runs what we call our "priceserver". The
> > priceserver is under a substantial amount of load and twisted handles
> the
> > job handsomely.
> >
> > Try it out at http://www.dohop.com
>
> Ok, I've added it to the ProjectsUsingTwisted page, but really, this
> kind of thing (that is, a commercial service) would be much more
> appropriate on the SuccessStories page -- it would be great if you
> could give us a few official sentences about how Twisted helped you
> develop this service so we could put it there.
>
> --
> Christopher Armstrong
> International Man of Twistery
> http://radix.twistedmatrix.com/
> http://twistedmatrix.com/
> http://canonical.com/
>
> ------------------------------
>
> Message: 4
> Date: Tue, 5 Dec 2006 16:54:41 -0800
> From: David Reid <dreid at dreid.org>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <48238A9C-A227-4816-991F-93FCA3F94C26 at dreid.org>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
>
> On Dec 5, 2006, at 1:55 PM, Pieter Grimmerink wrote:
>
> > On Monday 04 December 2006 22:16, Pieter Grimmerink wrote:
> >> Is it really necessary to remove the content-length header from the
> >> response?
> >
> > Correction, it turns out indeed it has to be removed. If it isn't
> > stripped
> > from the response, somehow the download stops after a single block
> > of data
> > has been received.
> >
> > Since the content-length is saved in self.length, the following
> > could be a
> > workaround (and it does work fine here):
>
> Why don't you just use self.length when showing the progress?
> -David
>
> David Reid
> http://dreid.org/
>
>
>
>
>
> ------------------------------
>
> Message: 5
> Date: Wed, 6 Dec 2006 15:23:49 +0800
> From: "Steve Han" <hxianping at gmail.com>
> Subject: [Twisted-Python] Problems with building of twisted-2.4.0
> To: twisted-python <twisted-python at twistedmatrix.com>
> Message-ID:
>         <702805a90612052323t780ee7e5h326917b2ce44713b at mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi all,
> I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the messages
> as the following:
>
> ...build/temp.linux-i686-2.4/Dependencies/zope.interface-
> ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> unable to execute gcc: No such file or directory
> error: command 'gcc' failed with exit status 1
>
> What does mean by that?
> Which packages I need for building Twisted/ZopeInterface?
> Thanks alot.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://twistedmatrix.com/pipermail/twisted-python/attachments/20061206/4a846c3c/attachment-0001.htm
>
> ------------------------------
>
> Message: 6
> Date: Wed, 6 Dec 2006 17:03:20 +0900
> From: Robert Gravina <robert at gravina.com>
> Subject: Re: [Twisted-Python] Problems with building of twisted-2.4.0
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <20140598-9163-4239-9729-FF91F103B914 at gravina.com>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
> > Hi all,
> > I am new to Twisted.When building ZopeInterface-3.1.0-0c1 got the
> > messages as the following:
> >
> >  ...build/temp.linux-i686-2.4/Dependencies/zope.interface-
> > ZopeInterface-3.1.0c1/zope.interface/_zope_interface_coptimizations.o
> > unable to execute gcc: No such file or directory
> > error: command 'gcc' failed with exit status 1
> >
> > What does mean by that?
> > Which packages I need for building Twisted/ZopeInterface?
> > Thanks alot.
>
> It seems that you are running Linux, but don't have GCC (a C
> compiler) installed. Parts of Zope Interface (and Twisted, too) are
> written in C, so one is needed. Most Linux distributions install one
> automatically, but as far as I know some don't if you don't  ask it
> to install development software. Either that, or it's installed but
> not in your PATH.
>
> Anyhow, there should be a GUI program for adding/removing programs,
> so use it to install "gcc". If not,  and you are using Ubuntu or
> Debian "apt-get install gcc" or for Fedora try "yum install gcc" and
> then try building Twisted again.
>
> Please excuse me if you know all this already (you are building
> Twisted after all). It just seems like problem is that GCC is not
> installed/cannot be found.
>
> Robert
>
>
>
>
> ------------------------------
>
> Message: 7
> Date: Wed, 6 Dec 2006 10:35:11 +0100
> From: Pieter Grimmerink <mailinglists at grimmerink.nl>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <200612061035.12521.mailinglists at grimmerink.nl>
> Content-Type: text/plain;  charset="us-ascii"
>
> On Wednesday 06 December 2006 01:54, David Reid wrote:
> > Why don't you just use self.length when showing the progress?
>
> The length is not passed to the Response object.
>
> twisted/web2/client/http.py line 168:
> self.response = http.Response(self.code, self.inHeaders, self.stream)
>
> This response object is then passed to the responseDefer callback, which
> means we only have resultcode, headers and stream to work with.
>
> Rgds, Pieter
>
>
>
> ------------------------------
>
> Message: 8
> Date: Wed, 6 Dec 2006 04:23:32 -0800
> From: Gabriel <gabrielverta at gmail.com>
> Subject: [Twisted-Python] Thread
> To: twisted-python at twistedmatrix.com
> Message-ID:
>         <2254669b0612060423t4f75043auef8424ab3b5e257f at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Hi!!
>
> I'm new in Twisted, and I'm having problems with Thread.
> I was looking for it at documentation, and saw that it's not safe
> (!?), but it's possible to run using twisted.python.threadable, I
> haven't understood the thread examples using simple TCP and
> ServerFactoryl, there is anything like reactor.run() using it or can I
> only use threads as client? Can anyone give me a basic example?
>
> Thanks!
>
> from Brazil...
>
>          Gabriel
> www.garimpar.com
>
>
>
> ------------------------------
>
> Message: 9
> Date: Wed, 6 Dec 2006 08:49:50 -0500
> From: Jean-Paul Calderone <exarkun at divmod.com>
> Subject: Re: [Twisted-Python] Thread
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID:
>         <20061206134950.20948.1512853559.divmod.quotient.60088 at ohm>
> Content-Type: text/plain; format=flowed
>
> On Wed, 6 Dec 2006 04:23:32 -0800, Gabriel <gabrielverta at gmail.com> wrote:
> >Hi!!
> >
> >I'm new in Twisted, and I'm having problems with Thread.
> >I was looking for it at documentation, and saw that it's not safe
> >(!?), but it's possible to run using twisted.python.threadable, I
> >haven't understood the thread examples using simple TCP and
> >ServerFactoryl, there is anything like reactor.run() using it or can I
> >only use threads as client? Can anyone give me a basic example?
> >
> >Thanks!
> >
> >from Brazil...
> >
> >         Gabriel
> >www.garimpar.com
> >
>
> You don't need threads to do most things in Twisted.  More than that,
> threads aren't /helpful/ for doing most things in Twisted.  More than
> that, most of Twisted was written so that threads could be avoided.
>
> Jean-Paul
>
>
>
> ------------------------------
>
> Message: 10
> Date: Wed, 6 Dec 2006 11:23:24 -0500
> From: James Y Knight <foom at fuhm.net>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <1869B98D-5F03-49E0-9084-80771CE346F2 at fuhm.net>
> Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
>
>
> On Dec 6, 2006, at 4:35 AM, Pieter Grimmerink wrote:
>
> > On Wednesday 06 December 2006 01:54, David Reid wrote:
> >> Why don't you just use self.length when showing the progress?
> >
> > The length is not passed to the Response object.
> >
> > twisted/web2/client/http.py line 168:
> > self.response = http.Response(self.code, self.inHeaders, self.stream)
> >
> > This response object is then passed to the responseDefer callback,
> > which
> > means we only have resultcode, headers and stream to work with.
>
> Sorry for not responding before. The Content-Length is removed from
> the set of headers and moved to an attribute of the stream. This is
> so that if anybody does content transforms before you get the data
> (e.g. transparent uncompressing/etc), the length and the data is in
> the same place, among other reasons.
>
> You're supposed to get the length from the stream object.
> stream.length is an integer if the content length is known, and None
> if it is not known.
>
> James
>
>
>
>
> ------------------------------
>
> Message: 11
> Date: Wed, 6 Dec 2006 18:39:40 +0100
> From: Pieter Grimmerink <mailinglists at grimmerink.nl>
> Subject: Re: [Twisted-Python] web2: http Content-Length header
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <200612061839.40844.mailinglists at grimmerink.nl>
> Content-Type: text/plain;  charset="us-ascii"
>
> On Wednesday 06 December 2006 17:23, James Y Knight wrote:
> > You're supposed to get the length from the stream object.
> > stream.length is an integer if the content length is known, and None
> > if it is not known.
>
> But stream.length is always None, even though the Content-Length is
> specified.
>
> Pasted below is an example which demonstrates what I'm doing.
> This is the response I'm getting:
>
> <twisted.web2.http.Response code=302, streamlen=None>
>
> And this is the response, when I add the line
>
> self.stream.length = self.length
>
> in twisted/web2/client/http.py, line 168:
>
> <twisted.web2.http.Response code=302, streamlen=228>
>
> Rgds, Pieter
>
> ---------------------------------------------------
>
> from twisted.internet import protocol
> from twisted.web2 import stream as stream_mod, http, http_headers,
> responsecode
> from twisted.web2.client.http import ClientRequest, HTTPClientProtocol
>
> def testConn(host):
>     from twisted.internet import reactor
>     d = protocol.ClientCreator(reactor,
> HTTPClientProtocol).connectTCP(host,
> 80)
>     def gotResp(resp):
>         def print_(n):
>             print "DATA"
>         def printdone(n):
>             print "DONE"
>         print "GOT RESPONSE %s" % resp
>         stream_mod.readStream(resp.stream, print_).addCallback(printdone)
>     def sendReqs(proto):
>         proto.submitRequest(ClientRequest("GET", "/index.html",
> {'Host':host}, None)).addCallback(gotResp)
>     d.addCallback(sendReqs)
>     del d
>     reactor.run()
>
> testConn("www.google.com")
>
>
>
> ------------------------------
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest, Vol 33, Issue 6
> *********************************************
>



-- 
Steve Han
Tel:(0531)82704691   13864091826
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061208/60c4a37f/attachment.html>

From hoadley at gmail.com  Thu Dec  7 21:39:24 2006
From: hoadley at gmail.com (Rob Hoadley)
Date: Thu, 7 Dec 2006 20:39:24 -0800
Subject: [Twisted-Python] delay_connect problems in twisted.enterprise.adbapi
Message-ID: <9bb390e70612072039r425951f8g6cc6c39ccd012cc2@mail.gmail.com>

Hello,

I'm having a problem using twisted.enterprise.adbapi.

The problem has to do with the 'delay_connect' option I send with my db
connection kwargs.  I want to send sybase connection appname and hostname
info.  The only way I can do this is using the delayed connect option.

I have the following standalone program example that works just fine:

vrdb = vr_db('billing_db', 'appname')
# vr_db just is a helper class for logical dbname -> db connection info

db_kwargs  = vrdb.return_kwargs()

db_kwargs['cp_min'] = 1  # one thread min
db_kwargs['cp_max'] = 1  # one thread max  = only one db connection
db_kwargs['cp_reconnect'] = 1  # reconnect if die
db_kwargs['cp_noisy'] =  1
db_kwargs['delay_connect'] = 1 #  do the delayed connect
db_kwargs['cp_openfun'] = vrdb._vrdbOptions

print db_kwargs
dbpool = adbapi.ConnectionPool(vrdb.return_import_name(), **db_kwargs)

# _vrdbOptions adds the following two things to the connection
# conn.set_property (Sybase.CS_HOSTNAME, self.hostname)
# conn.set_property(Sybase.CS_APPNAME, self.appname)


a = storage(dbpool, d)
a.run()
reactor.run()

run does a sql query.

   def run(self):
        ''' utility method if the script is called directly '''
        self.get_campaign_info('id', 588103).addCallback( self.print_result
).addErrback(self.error_happened)

This works fine and dandy.  With the hostname and appname showing up in my
sp_who optput (show's you who's logged in from where with what appname )

Now my problem is when I use the database connection part in
makeService(config) and pass a dbpool to a service, my service starts up
fine,  but when
I have a database operation I get this:



2006/12/07 15:46:17 PST [-] [Failure instance: Traceback:
twisted.enterprise.adbapi.ConnectionLost:
        /usr/lib/python2.4/threading.py:422:run

/usr/lib/python2.4/site-packages/twisted/python/threadpool.py:148:_worker

/usr/lib/python2.4/site-packages/twisted/python/context.py:59:callWithContext


/usr/lib/python2.4/site-packages/twisted/python/context.py:37:callWithContext
        --- <exception caught here> ---

/usr/lib/python2.4/site-packages/twisted/internet/threads.py:25:_putResultInDeferred


/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:379:_runInteraction

/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:64:rollback
        ]


So I've reverted my code to pass db_kwargs['delay_connect'] = 0 and it's
working fine as long as I don't try the delay_connect.   I'm  hoping someone
has seen this before and can point me in the right direction.  I'd really
like to have my appname and hostname show up on the db side.

I'm using twisted, sybase 12.5,  and the most recent Sybase module.  The
only difference is the way I'm connecting is one program is a tap created
from mktap and the other a standalone script.

>>> import Sybase
>>> Sybase.__version__
'0.37'
>>> import twisted
>>> twisted.__version__
'2.4.0'

Thanks

-rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061207/f777d907/attachment.html>

From glyph at divmod.com  Fri Dec  8 00:53:47 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Fri, 08 Dec 2006 07:53:47 -0000
Subject: [Twisted-Python] delay_connect problems in
	twisted.enterprise.adbapi
Message-ID: <20061208075347.28587.617754074.divmod.xquotient.539@joule.divmod.com>

On 04:39 am, hoadley at gmail.com wrote:

>I'm using twisted, sybase 12.5,  and the most recent Sybase module.  The
>only difference is the way I'm connecting is one program is a tap created
>from mktap and the other a standalone script.

Sadly, I am totally unfamiliar with the sybase module and so I can't help you myself.  However, if someone else using the sybase module were posting to this list, it would be good to know whether this issue also occurs with the most recent trunk checkout of Twisted SVN.

If so, then at least it might be worthwhile to open a bug (with a minimal example attached) in the tracker.  If not, then at least you could use a recent release of trunk to work around the issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061208/b37881f1/attachment.html>

From cedepaula at yahoo.com.br  Fri Dec  8 06:27:09 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Fri, 8 Dec 2006 13:27:09 +0000 (UTC)
Subject: [Twisted-Python] Perspective Broker Anonymous access..
Message-ID: <loom.20061208T141917-794@post.gmane.org>

Im just learning how to use twisted PB and playing with the chat server...

Im trying to create a way to allow authenticated and anonymous users into the
system but can't figure how to make it.

Here what im trying to do:

----------SERVER------------

    def requestAvatar(self, avatarId, mind, *interfaces):
        assert pb.IPerspective in interfaces
        return pb.IPerspective, MyPerspective(avatarId), lambda:None

p = portal.Portal(MyRealm())
c = checkers.InMemoryUsernamePasswordDatabaseDontUse(user1="pass1",
                                                     user2="pass2")            
                                        

p.registerChecker(checkers.AllowAnonymousAccess(), credentials.Anonymous())
p.registerChecker(c)
reactor.listenTCP(8800, pb.PBServerFactory(p))
reactor.run()

-----------------------------
           CLIENT
    factory = pb.PBClientFactory()
    reactor.connectTCP("localhost", 8800, factory)
    def1 = factory.login(credentials.Anonymous())
    def1.addCallback(connected)
    reactor.run()

-----------------------------

It dont work this way, giving me this error:

Traceback (most recent call last):
Failure: twisted.cred.error.UnauthorizedLogin:


Another way i tried to register only the AllowAnonymousAccess in the server but
the following error popped:

Traceback (most recent call last):
Failure: twisted.cred.error.UnhandledCredentials: No checker for twisted.cred.cr
edentials.IUsernameHashedPassword, twisted.spread.pb.IUsernameMD5Password, twist
ed.spread.interfaces.IJellyable


Looks like PB doesnt support anonymous access but from documentation i saw that
i can do the following:

# anonymous users share one Avatar, named users each get their own
    def requestAvatar(self, avatarID, mind, *interfaces):
        assert pb.IPerspective in interfaces
        if avatarID == checkers.ANONYMOUS:
            return pb.IPerspective, self.anonAvatar, lambda:None
        else:
            return pb.IPerspective, self.avatars[avatarID], lambda:None


Just dont know how.... I already checked the PB internals (pb, portal, checkers,
credentials) and havent figured out how to add anonymous support to PB... if you
guys could help me Im commited to add this support...

Thanks for all,

Carlos Eduardo








From cedepaula at yahoo.com.br  Fri Dec  8 10:17:31 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Fri, 8 Dec 2006 17:17:31 +0000 (UTC)
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
References: <loom.20061208T141917-794@post.gmane.org>
Message-ID: <loom.20061208T181529-289@post.gmane.org>

Carlos Eduardo <cedepaula <at> yahoo.com.br> writes:

> 
> Im just learning how to use twisted PB and playing with the chat server...
> 
> Thanks for all,
> 
> Carlos Eduardo
> 


Just forgot... im based on pb6server.py and pb6client1.py from
twisted\doc\core\howto\pb\

Thanks.




From exarkun at divmod.com  Fri Dec  8 11:08:56 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 8 Dec 2006 13:08:56 -0500
Subject: [Twisted-Python] Perspective Broker Anonymous access..
In-Reply-To: <loom.20061208T141917-794@post.gmane.org>
Message-ID: <20061208180856.20948.1445474335.divmod.quotient.63015@ohm>

On Fri, 8 Dec 2006 13:27:09 +0000 (UTC), Carlos Eduardo <cedepaula at yahoo.com.br> wrote:
>Im just learning how to use twisted PB and playing with the chat server...
>
>Im trying to create a way to allow authenticated and anonymous users into the
>system but can't figure how to make it.

You have to re-implement the login process to support anonymous users.

PBClientFactory.login() cannot be used for this.

Jean-Paul



From cedepaula at yahoo.com.br  Fri Dec  8 13:19:24 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Fri, 8 Dec 2006 20:19:24 +0000 (UTC)
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
References: <loom.20061208T141917-794@post.gmane.org>
	<20061208180856.20948.1445474335.divmod.quotient.63015@ohm>
Message-ID: <loom.20061208T211122-729@post.gmane.org>

Jean-Paul Calderone <exarkun <at> divmod.com> writes:

> 
> You have to re-implement the login process to support anonymous users.
> 
> PBClientFactory.login() cannot be used for this.
> 
> Jean-Paul
> 

So, the examples given in
http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html (below)
doesnt works?

# anonymous users share one Avatar, named users each get their own
    def requestAvatar(self, avatarID, mind, *interfaces):
        assert pb.IPerspective in interfaces
        if avatarID == checkers.ANONYMOUS:
            return pb.IPerspective, self.anonAvatar, lambda:None
        else:
            return pb.IPerspective, self.avatars[avatarID], lambda:None

I was looking at pb.py, portal.py and the way i understood, the whole chain
(login -> cbSendUsername -> remote login -> cb_Response -> remote respond) is
the responsible by the login process... if we send like credentials.Anonymous in
login(), all this chain needs to handle it... right?

Its a little strange why we cant have authenticated and anonymous users sharing
the same process since we can filter in the avatar given the permissions (like
example above).

Another question... is it interesting to twisted project to have this kind of
support? I mean, is it important to provide a way to this support in a patch to
the project or should I do modifications I need (if i learn how to) and keep
them to me?

Thanks for all and sorry if these questions are not in scope...

Carlos




From exarkun at divmod.com  Fri Dec  8 13:43:40 2006
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Fri, 08 Dec 2006 20:43:40 -0000
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
Message-ID: <20061208204340.28587.724311602.divmod.xquotient.658@joule.divmod.com>

On 08:19 pm, cedepaula at yahoo.com.br wrote:
>Jean-Paul Calderone <exarkun <at> divmod.com> writes:
>
>>
>> You have to re-implement the login process to support anonymous users.
>>
>> PBClientFactory.login() cannot be used for this.
>>
>> Jean-Paul
>>
>
>So, the examples given in
>http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html (below)
>doesnt works?
>
># anonymous users share one Avatar, named users each get their own
>    def requestAvatar(self, avatarID, mind, *interfaces):
>        assert pb.IPerspective in interfaces
>        if avatarID == checkers.ANONYMOUS:
>            return pb.IPerspective, self.anonAvatar, lambda:None
>        else:
>            return pb.IPerspective, self.avatars[avatarID], lambda:None

Yes, unfortunately.  Without changing protocol-level code in PB, there is
no way the first branch in that if/else is ever going to be executed. I'm
not sure why the example bothers to cover this case; it seems misleading.

>
>I was looking at pb.py, portal.py and the way i understood, the whole chain
>(login -> cbSendUsername -> remote login -> cb_Response -> remote respond) is
>the responsible by the login process... if we send like credentials.Anonymous in
>login(), all this chain needs to handle it... right?

Yes, that is correct.  Despite the number of steps involved, it's actually
not very much work to adjust.

>
>Its a little strange why we cant have authenticated and anonymous users sharing
>the same process since we can filter in the avatar given the permissions (like
>example above).

It's an unfortunate omission.  Requests for PB logins using a different
kind of credentials object are fairly common.

>
>Another question... is it interesting to twisted project to have this kind of
>support? I mean, is it important to provide a way to this support in a patch to
>the project or should I do modifications I need (if i learn how to) and keep
>them to me?

It would be a very welcome contribution. :)  Take a look at these pages,
if you haven't already seen them, for some guidelines on how to best
contribute the changes, and feel free to ask if you have any other questions.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061208/fcf1d6d9/attachment.html>

From teratorn at twistedmatrix.com  Fri Dec  8 15:21:43 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Fri, 08 Dec 2006 16:21:43 -0600
Subject: [Twisted-Python] What Win32 issues are important to you?
In-Reply-To: <d06a5cd30612071616x70541f2h1ca9f6cf1ad89c09@mail.gmail.com>
References: <op.tj6ogf0xy3d107@office2>
	<d06a5cd30612071616x70541f2h1ca9f6cf1ad89c09@mail.gmail.com>
Message-ID: <op.tj9hqhz8y3d107@office2>

On Thu, 07 Dec 2006 18:16:29 -0600, Jonathan Lange <jml at mumak.net> wrote:

> On 12/7/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>> I'm going to set aside some time to work on win32 issues, and was
>> wondering what tickets are particularly important for the folks out  
>> there?
>>
>
> Hey Eric,
>
> Thanks for showing the Windows love.  The most pressing win32 issue
> for me is the large number of reactor unclean warnings in the
> win32event reactor.
>
>> From #2091:
>     One other thing: the win32-win32er slave had about 250 more errors
>     with this branch merged than without it. win32er may not be a
>     completely supported reactor, but introducing this many new errors
>     to even an unsupported reactor makes me very nervous and I think
>     we should try to avoid doing it.

Great, thanks.

>
> Another very important issue is the buildslaves. As a UNIX[1]
> developer, the buildslaves are my primary point of interaction with
> the Windows world. This leads to two things:
>
>     1. It's hard to care about the win32er and iocp reactors when they
> are always red.[2]

I think this is one instance of a bigger problem: it's hard to care about  
a buildslave that is always red *if you don't know what you changed*. What  
do you guys think.. If buildbot told us which tests passed/failed since  
the last build, would that help at all?

>     2. It would be very nice for the "remove-.pyc" step to always work.

I will see what I can do about this.

> That's it from me. Thanks again for taking the time to look after win32.

Thanks for the ideas.

-Eric

> cheers,
> jml
>
> [1] I feel justified in calling Mac OS X a UNIX. It helps me sleep.
> [2] Perhaps we should have two buildbot pages: "supported" and
> "unsupported". win32er, iocp, tsr, pypy and friends can all hide on
> "unsupported".
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From exarkun at divmod.com  Fri Dec  8 15:36:01 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 8 Dec 2006 17:36:01 -0500
Subject: [Twisted-Python] What Win32 issues are important to you?
In-Reply-To: <op.tj9hqhz8y3d107@office2>
Message-ID: <20061208223601.20948.1492507591.divmod.quotient.63316@ohm>

On Fri, 08 Dec 2006 16:21:43 -0600, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> [snip]
>
>I think this is one instance of a bigger problem: it's hard to care about  a 
>buildslave that is always red *if you don't know what you changed*. What  do 
>you guys think.. If buildbot told us which tests passed/failed since  the 
>last build, would that help at all?

Only if intermittently failing tests are accounted for in some way.

Jean-Paul



From hoadley at gmail.com  Fri Dec  8 16:41:23 2006
From: hoadley at gmail.com (Rob Hoadley)
Date: Fri, 8 Dec 2006 15:41:23 -0800
Subject: [Twisted-Python] delay_connect problems in
	twisted.enterprise.adbapi
In-Reply-To: <20061208075347.28587.617754074.divmod.xquotient.539@joule.divmod.com>
References: <20061208075347.28587.617754074.divmod.xquotient.539@joule.divmod.com>
Message-ID: <9bb390e70612081541q25eae313kc2d5f51f24f87544@mail.gmail.com>

To answer the question "Does this problem exist in trunk?"  The answer is
yes.

I just checked out the trunk and reran my program by sending it a test email
( which calls a sybase db )

Here is the log output with the
<twisted.enterprise.adbapi.ConnectionPoolinstance at 0xb7d230ac> just
to show i've got a adbapi connection:

2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] <
twisted.enterprise.adbapi.ConnectionPool instance at 0xb7d230ac>
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] SELECT convert(char(11),
a.mail_date, 106)
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] FROM campaign a
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] WHERE a.id = b.campaign_id
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] AND a.company_id = c.id AND
a.hash= 'PROTECTED'
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] adbapi connecting: Sybase
{'passwd': 'protected', 'dsn': 'protected', 'auto_commit': 1, 'user':
'cmsc', 'delay_connect': 1}
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] adbapi closing: Sybase
2006/12/08 16:21 -0700 [SMTP,0,127.0.0.1] Connection lost.
2006/12/08 16:21 -0700 [-] Found an exception while processing, I'm just
writing the message safely
2006/12/08 16:21 -0700 [-] [Failure instance: Traceback:
twisted.enterprise.adbapi.ConnectionLost:
        /usr/lib/python2.4/threading.py:422:run

/usr/lib/python2.4/site-packages/twisted/python/threadpool.py:148:_worker

/usr/lib/python2.4/site-packages/twisted/python/context.py:59:callWithContext

/usr/lib/python2.4/site-packages/twisted/python/context.py:37:callWithContext
        --- <exception caught here> ---

/usr/lib/python2.4/site-packages/twisted/internet/threads.py:25:_putResultInDeferred

/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:379:_runInteraction

/usr/lib/python2.4/site-packages/twisted/enterprise/adbapi.py:64:rollback
        ]


If this traceback fails to shake anyone's memory, I'll fill out a bug report
and lend my time/machine as assistance.  It's pretty strange how it works
when I have the db connect code running as a standalone program but not when
it's created via mktap .

Occam's razor says "run it as a standalone program"!.  Yes i'd have to
agree.  However, I would like it to work as a tapfile for simplicity in
packaging and logging etc.

thanks for your help

-rob


Sadly, I am totally unfamiliar with the sybase module and so I can't help
> you myself.  However, if someone else using the sybase module were posting
> to this list, it would be good to know whether this issue also occurs with
> the most recent trunk checkout of Twisted SVN.
>
> If so, then at least it might be worthwhile to open a bug (with a minimal
> example attached) in the tracker.  If not, then at least you could use a
> recent release of trunk to work around the issue.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061208/810bc21f/attachment.html>

From leszczynscy at yahoo.com  Fri Dec  8 19:05:53 2006
From: leszczynscy at yahoo.com (Andy Leszczynski)
Date: Fri, 8 Dec 2006 18:05:53 -0800 (PST)
Subject: [Twisted-Python] NAPTR and some dns.py import issue
Message-ID: <20061209020553.60685.qmail@web50612.mail.yahoo.com>

Hi,

There was a recent discussion: FWIW - I have a patch to dns.py with NAPTR implemented but it is a very hackish solution: I mean it serves very specific application and works fine and basis are there. 

I also faced the issue with the twisted/names/dns.py - specifically with "from twisted.python import components". Since I did not want to overwrite the  twisted/names/dns.py, I just took it, renamed and applied NAPTR patch, saved in my app directory and import it now under new name. Surprisingly it did want to import so in order to fix the problem I had to replace "from twisted.python import components" with  "from zope.interface import interface" and

change:
    class IRecord(components.Interface):

    class IEncodable(components.Interface):

to:
    class IRecord(interface.Interface):

    class IEncodable(interface.Interface):
respectively.

This is what I have - I would be interested in Twisted supporting NAPTR - let me know if I can participate.

-- 
Best regards,
alf
When all you have is XML, every problem looks like a markup :-).








From exarkun at divmod.com  Fri Dec  8 19:50:18 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 8 Dec 2006 21:50:18 -0500
Subject: [Twisted-Python] NAPTR and some dns.py import issue
In-Reply-To: <20061209020553.60685.qmail@web50612.mail.yahoo.com>
Message-ID: <20061209025018.20948.1613069547.divmod.quotient.63587@ohm>

On Fri, 8 Dec 2006 18:05:53 -0800 (PST), Andy Leszczynski <leszczynscy at yahoo.com> wrote:
>Hi,
>
>There was a recent discussion: FWIW - I have a patch to dns.py with NAPTR implemented but it is a very hackish solution: I mean it serves very specific application and works fine and basis are there.
>
>I also faced the issue with the twisted/names/dns.py - specifically with "from twisted.python import components". Since I did not want to overwrite the  twisted/names/dns.py, I just took it, renamed and applied NAPTR patch, saved in my app directory and import it now under new name. Surprisingly it did want to import so in order to fix the problem I had to replace "from twisted.python import components" with  "from zope.interface import interface" and

I'm not sure I understand this issue.  There haven't been any imports of
twisted.python.components in twisted.names.dns in some time.  If you're
going to work on a patch to contribute, it would be best to do it based
on current trunk at HEAD, so that you don't end up writing anything which
will conflict with changes which have already been made.

> [snip]
>
>This is what I have - I would be interested in Twisted supporting NAPTR - let me know if I can participate.

I'd certainly be interested to see what you have.  I don't really have any
driving need for NAPTR support in Twisted myself, though, so it's mostly an
academic interest.  Still, if the functionality works, it comes with good
test coverage, and conforms to the coding standard, there's no reason at all
it shouldn't be added to Twisted.

So, I welcome any contribution you would be willing to make. :)

Jean-Paul



From exarkun at twistedmatrix.com  Sat Dec  9 23:05:02 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 10 Dec 2006 06:05:02 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1165730702.52.430500523@twistedmatrix.com

Bug summary
______________________
Summary for 2006-12-03 through 2006-12-10
Bugs opened: 36    Bugs closed: 29  Total open bugs: 791 (+7)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +3  |Highest:  -2          |Conch:     +0          
|Enhancement:  +7  |High:     -4          |Core:      +6          
|Task:         -1  |Normal:  +14          |Mail:      +2          
                   |Low:      +1          |Names:     +0          
                                          |Trial:     +2          
                                          |Web:       -3          
                                          |Web2:      +1          
                                          |Web2.Dav:  +1          
                                          |Website:   +0          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2286] abstract.FileDescriptor calls pauseProducing even if producer is not streaming (opened by zseil)
    defect          core       http://twistedmatrix.com/trac/ticket/2286

[#2091] Make reactor unclean warnings reported errors (opened by jml)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2091

                    ===== High =====
[#2267] twisted.conch.test.test_conch tests leave the reactor unclean (opened by jml)
    defect          conch      http://twistedmatrix.com/trac/ticket/2267

[#2268] twisted.test.test_socks.Bind.test_simple leaves the reactor unclean (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/2268

[#2269] twisted.test.test_pb.NewStyleCachedTestCase leaves the reactor unclean (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/2269

                    ===== Normal =====
[#2256] test_tcp.HalfClose3TestCase.testReadNotificationRaisesTest fails sometimes on OSX (opened by jerub) (CLOSED, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2256

[#2257] Weak ETag in first second is bogus (opened by wsanchez)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2257

[#2259] stdio fails when output redirected to a file (opened by jknight)
    defect          core       http://twistedmatrix.com/trac/ticket/2259

[#2260] Allow errors and failures to be strings (opened by jml) (CLOSED, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/2260

[#2261] Front Page Sidebar CSS needs some work (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2261

[#2262] Fix Header Search CSS (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2262

[#2263] Fix "logged in as..." CSS (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2263

[#2264] Fix CSS on "Reply" buttons in issue tracker (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2264

[#2265] signal delivery vs reactor.stop (opened by titty)
    defect          core       http://twistedmatrix.com/trac/ticket/2265

[#2266] twisted.mail.test.test_mail.ProcessAliasTestCase leaves the reactor unclean (opened by jml)
    defect          mail       http://twistedmatrix.com/trac/ticket/2266

[#2270] Steal the bzr progress bar / realtime reporter for Trial (opened by jml)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2270

[#2272] epytext errors in svn trunk, set up pydoctor buildbot (opened by mwh)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2272

[#2273] AMP documentation on command errors is reversed or code is (opened by htj) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2273

[#2274] Twisted test suite is too slow (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2274

[#2275] Twisted test suite requires too much memory (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2275

[#2276] Changes to TwistedNames to make it support NAPTR records (opened by agatonsax)
    enhancement     names      http://twistedmatrix.com/trac/ticket/2276

[#2277] getcontenttype property should be explicitly set on PUT (opened by Cyrus Daboo)
    defect          web2.dav   http://twistedmatrix.com/trac/ticket/2277

[#2278] IMAP4 server fails for commands like "11 search uid 2:*" (opened by exarkun)
    defect          mail       http://twistedmatrix.com/trac/ticket/2278

[#2279] Add a link to a Windows build of PyOpenSSL to the WindowsBuild page (opened by exarkun)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2279

[#2280] DigestCredential needs a new interface that supports verifying credentials when given a prehashed user:realm:password (opened by dreid)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2280

[#2283] text color in search box hard to read (opened by itamarst) (CLOSED, duplicate)
    defect          website    http://twistedmatrix.com/trac/ticket/2283

[#2284] web2 submitRequest result does not have content-length (opened by ghazel)
    defect          web2       http://twistedmatrix.com/trac/ticket/2284

[#2287] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2287

[#2288] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2288

[#2289] Page Titles and Metadata (opened by oubiwann)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2289

                    ===== Low =====
[#2258] Use producer/consumer API in POP3 server for list responses (opened by exarkun)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2258

[#2271] Hello! This is a temporary test" appears on localhost:8080 if you "$ twistd web" (opened by jerub)
    enhancement     web        http://twistedmatrix.com/trac/ticket/2271

[#2281] Annotations for Twisted Finger Tutorial (opened by sluggo)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2281

[#2282] Annotations for Twisted Finger Tutorial (opened by sluggo) (CLOSED, duplicate)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2282

[#2285] AMP should have an additional client-specific tag->error mapping (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2285

[#2285] AMP should have an additional client-specific tag->error mapping (opened by radix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2285



Closed Bugs
______________________
                    ===== Highest =====
[#2240] Add twisted.mail SMTP client example which demonstrates TLS and authentication (opened by exarkun, closed by exarkun, fixed)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2240

[#2091] Make reactor unclean warnings reported errors (opened by jml, closed by jml, )
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2091

[#2200] Resource lookup is slow (opened by Cyrus Daboo, closed by wsanchez, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/2200

[#2248] Do error reporting in twisted.names.client.Resolver (opened by exarkun, closed by exarkun, fixed)
    task            names      http://twistedmatrix.com/trac/ticket/2248

[#1199] twisted.test.test_protocols calls reactor.iterate() (opened by exarkun, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1199

                    ===== High =====
[#345 ] twcgi not unregistering producer correctly (possibly related to distrib). (opened by mesozoic, closed by exarkun, worksforme)
    defect          web        http://twistedmatrix.com/trac/ticket/345

[#676 ] twisted.persisted.sob._EverythingEphemeral is totally broken (opened by itamarst, closed by exarkun, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/676

[#681 ] [PATCH] Make microdom preserve boolean of "was there whitespace or not" (opened by Tv, closed by exarkun, duplicate)
    defect          web        http://twistedmatrix.com/trac/ticket/681

[#2141] Twisted Trac Content Re-org (opened by oubiwann, closed by oubiwann, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2141

[#1929] twisted.web2.test.test_xmlrpc should not use twisted.web.xmlrpc.Proxy (opened by dreid, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1929

[#1019] /projects/index.html in website (opened by mikewarren, closed by exarkun, wontfix)
    defect          website    http://twistedmatrix.com/trac/ticket/1019

[#981 ] cgi fails to close stdin of the child process (opened by warner, closed by exarkun, fixed)
    defect          web        http://twistedmatrix.com/trac/ticket/981

                    ===== Normal =====
[#2260] Allow errors and failures to be strings (opened by jml, closed by jml, invalid)
    defect          trial      http://twistedmatrix.com/trac/ticket/2260

[#1677] can't find manpages on the website (opened by synapsis, closed by oubiwann, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/1677

[#492 ] Document bug reporting methods (who to assign bugs to) (opened by hypatia, closed by jknight, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/492

[#2202] The News on the front page is no longer news. (opened by jml, closed by oubiwann, fixed)
    defect          website    http://twistedmatrix.com/trac/ticket/2202

[#2156] New Twisted Site Preparing for Release (opened by oubiwann, closed by oubiwann, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2156

[#995 ] contribpackages are not updated for Python 2.4 (opened by manlio, closed by exarkun, fixed)
    enhancement     website    http://twistedmatrix.com/trac/ticket/995

[#2256] test_tcp.HalfClose3TestCase.testReadNotificationRaisesTest fails sometimes on OSX (opened by jerub, closed by exarkun, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2256

[#2283] text color in search box hard to read (opened by itamarst, closed by exarkun, duplicate)
    defect          website    http://twistedmatrix.com/trac/ticket/2283

[#2287] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley, closed by exarkun, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2287

[#2288] deferredCoroutine using new generator features in Python 2.5 (opened by mneeley, closed by glyph, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2288

[#2273] AMP documentation on command errors is reversed or code is (opened by htj, closed by radix, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2273

                    ===== Low =====
[#307 ] (don't) switch to logging.py / add support for logging.py (opened by glyph, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/307

[#313 ] Convention for accessing TLS certificates from protocols (opened by exarkun, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/313

[#467 ] [PATCH] sandbox/exarkun/tls/record.py (opened by symbiont, closed by exarkun, wontfix)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/467

[#578 ] Problems using twisted.web.client.getPage() (opened by dialtone, closed by exarkun, invalid)
    enhancement     web        http://twistedmatrix.com/trac/ticket/578

[#2282] Annotations for Twisted Finger Tutorial (opened by sluggo, closed by exarkun, duplicate)
    enhancement     website    http://twistedmatrix.com/trac/ticket/2282

[#2285] AMP should have an additional client-specific tag->error mapping (opened by radix, closed by glyph, )
    enhancement     core       http://twistedmatrix.com/trac/ticket/2285





From gavrie.42224911 at bloglines.com  Mon Dec 11 07:03:28 2006
From: gavrie.42224911 at bloglines.com (Gavrie Philipson [Twisted])
Date: Mon, 11 Dec 2006 16:03:28 +0200
Subject: [Twisted-Python] Using D-Bus with Twisted
Message-ID: <bfb564230612110603l5905a778g19a38d1a7126b036@mail.gmail.com>

Hi,

I'm about to start a project which involves adding D-Bus support to an
existing Python application that is based on Twisted.
The latest dbus-python versions include some tantalizing references to
planned support for integrating D-Bus into the Twisted mainloop.
However, I understand that this is not ready yet...?

What would be the easiest way to integrate D-Bus and Twisted right now? I
know that Twisted can use the GLib event loop, but will this work out of the
box? I found some references to doing this with older versions of the
dbus-python API, but nothing recent.

Does anyone have examples available that use the current API?

Please note that I asked on the D-Bus mailing list, and got the advice
to ask here; see:
http://lists.freedesktop.org/archives/dbus/2006-December/006630.html

Thanks,

-- Gavrie Philipson



From anand at soe.ucsc.edu  Mon Dec 11 22:33:23 2006
From: anand at soe.ucsc.edu (Anand Patil)
Date: Tue, 12 Dec 2006 00:33:23 -0500
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
Message-ID: <457E3F23.5090309@cse.ucsc.edu>

Hi all,

Quick question from a pre-beginner with Twisted: Can Cacheable store not 
just the most recent value of a remote object, but the n most recent values?

Thanks,
Anand Patil



From teratorn at twistedmatrix.com  Tue Dec 12 02:27:01 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Tue, 12 Dec 2006 03:27:01 -0600
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
In-Reply-To: <457E3F23.5090309@cse.ucsc.edu>
References: <457E3F23.5090309@cse.ucsc.edu>
Message-ID: <op.tkfwjbvby3d107@office2>

On Mon, 11 Dec 2006 23:33:23 -0600, Anand Patil <anand at soe.ucsc.edu> wrote:

> Hi all,
>
> Quick question from a pre-beginner with Twisted: Can Cacheable store not  
> just the most recent value of a remote object, but the n most recent  
> values?
>
> Thanks,
> Anand Patil

They don't have that capability, no. I guess you could modify them to do  
that, but I can't think of why you would want to.

If you're not sure that's what you want to do, then it might help to  
explain what you're trying to accomplish and someone on this list may be  
able to help you.

-- 
Eric Mangold
Twisted/Win32 Maintainer



From anand at soe.ucsc.edu  Tue Dec 12 12:01:19 2006
From: anand at soe.ucsc.edu (Anand Patil)
Date: Tue, 12 Dec 2006 14:01:19 -0500
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
In-Reply-To: <E1GuBvA-0001qz-00@pyramid.twistedmatrix.com>
References: <E1GuBvA-0001qz-00@pyramid.twistedmatrix.com>
Message-ID: <457EFC7F.1040203@cse.ucsc.edu>


>They don't have that capability, no. I guess you could modify them to do  
>that, but I can't think of why you would want to.
>
>If you're not sure that's what you want to do, then it might help to  
>explain what you're trying to accomplish and someone on this list may be  
>able to help you.
>  
>
This is a statistical algorithm I'm trying to parallelize to run on a 
cluster, and the serial version strongly suggests that the behavior I've 
asked for would be a big help.

I'll try to describe my serial algorithm succinctly, any advice on 
parallelizing it would be extremely welcome.

I have a bunch of objects which are nodes in a  directed acyclic graph. 
I've pseudocoded them in the attached file. What I'd like to do is push 
some of the nodes off to other processes running on the cluster and have 
them retain references to their parents. I'll then make repeated calls 
to all nodes' get_prob() methods and periodically update their values.

It would be nice to make Node.value something like a Cacheable. I'd like 
it to store n remote references, with a timestamp (this just needs to be 
an integer counter, as in the pseudocode) attached to each. When 
queried, it could return its timestamp and value as a tuple.

Thanks again,
Anand

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: node.py
URL: </pipermail/twisted-python/attachments/20061212/2406d85d/attachment.ksh>

From teratorn at twistedmatrix.com  Tue Dec 12 14:38:34 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Tue, 12 Dec 2006 15:38:34 -0600
Subject: [Twisted-Python] pb.cacheable: adjustable cache depth?
In-Reply-To: <457EFC7F.1040203@cse.ucsc.edu>
References: <E1GuBvA-0001qz-00@pyramid.twistedmatrix.com>
	<457EFC7F.1040203@cse.ucsc.edu>
Message-ID: <op.tkguekezy3d107@office2>

On Tue, 12 Dec 2006 13:01:19 -0600, Anand Patil <anand at soe.ucsc.edu> wrote:

>
>> They don't have that capability, no. I guess you could modify them to do
>> that, but I can't think of why you would want to.
>>
>> If you're not sure that's what you want to do, then it might help to
>> explain what you're trying to accomplish and someone on this list may be
>> able to help you.
>>
>>
> This is a statistical algorithm I'm trying to parallelize to run on a
> cluster, and the serial version strongly suggests that the behavior I've
> asked for would be a big help.
>
> I'll try to describe my serial algorithm succinctly, any advice on
> parallelizing it would be extremely welcome.
>
> I have a bunch of objects which are nodes in a  directed acyclic graph.
> I've pseudocoded them in the attached file. What I'd like to do is push
> some of the nodes off to other processes running on the cluster and have
> them retain references to their parents. I'll then make repeated calls
> to all nodes' get_prob() methods and periodically update their values.
>
> It would be nice to make Node.value something like a Cacheable. I'd like
> it to store n remote references, with a timestamp (this just needs to be
> an integer counter, as in the pseudocode) attached to each. When
> queried, it could return its timestamp and value as a tuple.
>
> Thanks again,
> Anand
>

Well without really understanding your algorithm I would say you should  
just implement this at the application level, and leave Cacheables alone.

-- 
Eric Mangold
Twisted/Win32 Maintainer



From magnus at spotify.com  Wed Dec 13 08:19:44 2006
From: magnus at spotify.com (Magnus Hult)
Date: Wed, 13 Dec 2006 16:19:44 +0100
Subject: [Twisted-Python] twisted.web.proxy.ReverseProxyResource forgets to
	quote path?
Message-ID: <71e31fe60612130719k3f1f665bj313e8651c639d201@mail.gmail.com>

Hello,

In a program like this

  from twisted.web import server, proxy, resource
  from twisted.internet import reactor
  from twisted.application import service, strports

  site = server.Site(proxy.ReverseProxyResource('www.example.com', 80, '/path'))
  application = service.Application("accesspoint")
  s = strports.service('tcp:8060', site)
  s.setServiceParent(application)

visiting / on port 8060 leads to www.example.com:80/path as expected.
/test returns the contents of www.example.com:80/path/test as
expected, but going to, for example, /test%20test returns a 400 bad
request.

It seems like t.w.proxy.ReverseProxyResource does not quote its path.
When urllib.quote:ing the rest parameter sent to ProxyClientFactory in
ReverseProxyResource.render, it suddenly works. (I'm using
python-twisted-web from Debian unstable, but it's the same in trunk.)

Am I doing something wrong here or is this a bug?

Regards,
Magnus



From roland.hedberg at adm.umu.se  Thu Dec 14 00:37:11 2006
From: roland.hedberg at adm.umu.se (Roland Hedberg)
Date: Thu, 14 Dec 2006 08:37:11 +0100
Subject: [Twisted-Python] NAPTR and some dns.py import issue
In-Reply-To: <20061209025018.20948.1613069547.divmod.quotient.63587@ohm>
References: <20061209025018.20948.1613069547.divmod.quotient.63587@ohm>
Message-ID: <4580FF27.50801@adm.umu.se>

Jean-Paul Calderone wrote:
> On Fri, 8 Dec 2006 18:05:53 -0800 (PST), Andy Leszczynski
> <leszczynscy at yahoo.com> wrote:
>> Hi,
>>
>> There was a recent discussion: FWIW - I have a patch to dns.py with
>> NAPTR implemented but it is a very hackish solution: I mean it serves
>> very specific application and works fine and basis are there.
>>
>> I also faced the issue with the twisted/names/dns.py - specifically
>> with "from twisted.python import components". Since I did not want to
>> overwrite the  twisted/names/dns.py, I just took it, renamed and
>> applied NAPTR patch, saved in my app directory and import it now under
>> new name. Surprisingly it did want to import so in order to fix the
>> problem I had to replace "from twisted.python import components" with 
>> "from zope.interface import interface" and
> 
> I'm not sure I understand this issue.  There haven't been any imports of
> twisted.python.components in twisted.names.dns in some time.  If you're
> going to work on a patch to contribute, it would be best to do it based
> on current trunk at HEAD, so that you don't end up writing anything which
> will conflict with changes which have already been made.
> 
>> [snip]
>>
>> This is what I have - I would be interested in Twisted supporting
>> NAPTR - let me know if I can participate.
> 
> I'd certainly be interested to see what you have.  I don't really have any
> driving need for NAPTR support in Twisted myself, though, so it's mostly an
> academic interest.  Still, if the functionality works, it comes with good
> test coverage, and conforms to the coding standard, there's no reason at
> all
> it shouldn't be added to Twisted.
> 
> So, I welcome any contribution you would be willing to make. :)

I've submitted a ticket with my patches to names to make it support
NAPTR, so I guess someone has to choose :-)

-- Roland



From jdahlin at async.com.br  Thu Dec 14 17:58:27 2006
From: jdahlin at async.com.br (Johan Dahlin)
Date: Thu, 14 Dec 2006 22:58:27 -0200
Subject: [Twisted-Python] Re: Using D-Bus with Twisted
In-Reply-To: <bfb564230612110603l5905a778g19a38d1a7126b036@mail.gmail.com>
References: <bfb564230612110603l5905a778g19a38d1a7126b036@mail.gmail.com>
Message-ID: <4581F333.9070709@async.com.br>

Gavrie Philipson [Twisted] skrev:
> Hi,
> 
> I'm about to start a project which involves adding D-Bus support to an
> existing Python application that is based on Twisted.
> The latest dbus-python versions include some tantalizing references to
> planned support for integrating D-Bus into the Twisted mainloop.
> However, I understand that this is not ready yet...?
> 
> What would be the easiest way to integrate D-Bus and Twisted right now?
[snip]

* twisted with glib/gobject/gtk2 reactor
* dbus with glib main loop support (dbus.glib)

Johan




From teratorn at twistedmatrix.com  Thu Dec 14 19:05:14 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 14 Dec 2006 20:05:14 -0600
Subject: [Twisted-Python] Trac wiki notification
Message-ID: <op.tkkv20c8y3d107@office2>

Here's a plugin that lets you subscribe to wiki page changes. This  
functionality isn't available in normal Trac yet.

http://wikinotification.ufsoft.org/

I was hoping an admin could set this up (if it doesn't look like it will  
break everything :)

-- 
Eric Mangold
Twisted/Win32 Maintainer



From manlio_perillo at libero.it  Fri Dec 15 03:42:44 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Fri, 15 Dec 2006 11:42:44 +0100
Subject: [Twisted-Python] Shtoom
Message-ID: <45827C24.2090802@libero.it>

Is Shtoom still maintained?


Thanks and regards  Manlio Perillo



From exarkun at divmod.com  Fri Dec 15 18:35:42 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 15 Dec 2006 20:35:42 -0500
Subject: [Twisted-Python] Trac wiki notification
In-Reply-To: <op.tkkv20c8y3d107@office2>
Message-ID: <20061216013542.20948.1051351521.divmod.quotient.74846@ohm>

On Thu, 14 Dec 2006 20:05:14 -0600, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>Here's a plugin that lets you subscribe to wiki page changes. This 
>functionality isn't available in normal Trac yet.
>
>http://wikinotification.ufsoft.org/
>
>I was hoping an admin could set this up (if it doesn't look like it will 
>break everything :)

It would be good to have this functionality.  I have not checked the code
of that plugin yet, but I would rather err on the side of caution and not
make any further changes to our trac deployment, at least until we figure
out how to prevent it from bringing down the server on which it runs.

In the mean time, in case you aren't familiar with it, you can get an RSS
feed of all wiki changes from the timeline view.  Not exactly the same,
but perhaps good enough for the interim.

Jean-Paul



From radix at twistedmatrix.com  Fri Dec 15 18:53:39 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 15 Dec 2006 20:53:39 -0500
Subject: [Twisted-Python] Trac wiki notification
In-Reply-To: <20061216013542.20948.1051351521.divmod.quotient.74846@ohm>
References: <op.tkkv20c8y3d107@office2>
	<20061216013542.20948.1051351521.divmod.quotient.74846@ohm>
Message-ID: <60ed19d40612151753h10a97e78yf1a3fbd4989c693a@mail.gmail.com>

On 12/15/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
> On Thu, 14 Dec 2006 20:05:14 -0600, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> >Here's a plugin that lets you subscribe to wiki page changes. This
> >functionality isn't available in normal Trac yet.
> >
> >http://wikinotification.ufsoft.org/
> >
> >I was hoping an admin could set this up (if it doesn't look like it will
> >break everything :)
>
> It would be good to have this functionality.  I have not checked the code
> of that plugin yet, but I would rather err on the side of caution and not
> make any further changes to our trac deployment, at least until we figure
> out how to prevent it from bringing down the server on which it runs.
>
> In the mean time, in case you aren't familiar with it, you can get an RSS
> feed of all wiki changes from the timeline view.  Not exactly the same,
> but perhaps good enough for the interim.

Also, there are free services which will forward arbitrary RSS feeds
to arbitrary email addresses. Getting closer to what that plugin does,
but it seems there's no way to get an RSS feed for only one page at a
time in Trac.


-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/



From exarkun at twistedmatrix.com  Sat Dec 16 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 17 Dec 2006 06:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1166335501.69.1268307437@twistedmatrix.com

Bug summary
______________________
Summary for 2006-12-10 through 2006-12-17
Bugs opened: 12    Bugs closed: 6  Total open bugs: 797 (+6)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +6  |Highest:  +0          |Core:   +5             
|Enhancement:  +0  |High:     +3          |Ftp:    -1             
|Task:         +1  |Normal:   +3          |Mail:   -1             
                   |Low:      +1          |Names:  +1             
                                          |Pb:     +1             
                                          |Trial:  +1             
                                          |Web:    +1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2291] Add --reactor to zsh completions for twistd and trial (opened by teratorn)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2297] Make rebuild.latestClass more compliant with new style classes (opened by therve)
    defect          core       http://twistedmatrix.com/trac/ticket/2297

[#2298] microdom assigns incorrect parent values to top-level nodes in malformed HTML strings (opened by jml) (CLOSED, fixed)
    enhancement     web        http://twistedmatrix.com/trac/ticket/2298

[#2300] Remove trailing whitespace from Python files (opened by jml)
    task            core       http://twistedmatrix.com/trac/ticket/2300

                    ===== High =====
[#2292] AMP error propagation does not work on subclasses (opened by htj)
    defect          core       http://twistedmatrix.com/trac/ticket/2292

[#2299] twisted.spread.sturdy doesn't work at all, not even a little (opened by exarkun)
    defect          pb         http://twistedmatrix.com/trac/ticket/2299

[#2292] AMP error propagation does not work on subclasses (opened by htj)
    defect          core       http://twistedmatrix.com/trac/ticket/2292

                    ===== Normal =====
[#2290] nameservers resolved in wrong order (opened by ilia)
    defect          names      http://twistedmatrix.com/trac/ticket/2290

[#2293] Integrate PyOpenSSL patches and do a PyOpenSSL release (opened by exarkun)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2293

[#2295] distrib listenUNIX should use the usePID=1 lock system (opened by itamarst)
    defect          web        http://twistedmatrix.com/trac/ticket/2295

[#2296] twisted.web2.stream.FileStream creates an instance of an undefined class in it's sendfile "support" (opened by dreid)
    defect          core       http://twistedmatrix.com/trac/ticket/2296

                    ===== Low =====
[#2294] Fixture for testing the validity of of the contents of a module's __all__ attribute (opened by exarkun)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/2294



Closed Bugs
______________________
                    ===== Highest =====
[#428 ] Update and re-instate FTPClient tests (opened by amberite, closed by exarkun, fixed)
    defect          ftp        http://twistedmatrix.com/trac/ticket/428

[#992 ] session.getComponent doesn't work with 'default' keyword arg (opened by justinj, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/992

[#815 ] t.internet.process.Process should check for valid arguments (opened by marienz, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/815

[#2298] microdom assigns incorrect parent values to top-level nodes in malformed HTML strings (opened by jml, closed by jml, fixed)
    enhancement     web        http://twistedmatrix.com/trac/ticket/2298

                    ===== High =====
[#2292] AMP error propagation does not work on subclasses (opened by htj, closed by glyph, )
    defect          core       http://twistedmatrix.com/trac/ticket/2292

                    ===== Normal =====
[#2250] twisted.mail.pop3.__all__ lacks a comma (opened by mwh, closed by glyph, fixed)
    enhancement     mail       http://twistedmatrix.com/trac/ticket/2250





From ellisonbg.net at gmail.com  Sun Dec 17 15:10:34 2006
From: ellisonbg.net at gmail.com (Brian Granger)
Date: Sun, 17 Dec 2006 15:10:34 -0700
Subject: [Twisted-Python] What deferred can I use to detect when a server or
	client is "running"
Message-ID: <6ce0ac130612171410k3a9138d2v521ffc60d127d8e9@mail.gmail.com>

Hi,

i am writing some tests using trial and in my setUp methods I start
various servers and clients using listenTCP/connectTCP.  The problem I
am having is finding a deferred that will fire when:

1.  A server is actually listening.  I want to use this deferred to
trigger clients to connect...

2.  A client has connected.  I want to return this deferred from my
setUp method so my tests won't actually run until the client has
connected to the server.

I have some hackish ways that I have been getting around this, but
they seem a little fickle.  What is the "standard" way of doing this
in tests?

Thanks

Brian



From twisted at x11.cjb.net  Sun Dec 17 15:25:14 2006
From: twisted at x11.cjb.net (twisted at x11.cjb.net)
Date: Sun, 17 Dec 2006 17:25:14 -0500
Subject: [Twisted-Python] twisted pyQT4 tutorial?
Message-ID: <200612171725.14733.twisted@x11.cjb.net>

I am intrested in doing some stuff with pyQT4 and twisted, and have been 
successful in getting some things to work separately, but am not exactly sure 
how to get the reactor going in the QT4's event loop.

This is the reactor I am trying to use.
http://twistedmatrix.com/trac/attachment/ticket/1770/qt4reactor.py

Is there any kind of tutorial for this, or example code from a simple runnable 
application?

-Brian



From exarkun at divmod.com  Sun Dec 17 15:32:43 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 17 Dec 2006 17:32:43 -0500
Subject: [Twisted-Python] What deferred can I use to detect when a
	server or client is "running"
In-Reply-To: <6ce0ac130612171410k3a9138d2v521ffc60d127d8e9@mail.gmail.com>
Message-ID: <20061217223243.20948.42905055.divmod.quotient.78430@ohm>

On Sun, 17 Dec 2006 15:10:34 -0700, Brian Granger <ellisonbg.net at gmail.com> wrote:
>Hi,
>
>i am writing some tests using trial and in my setUp methods I start
>various servers and clients using listenTCP/connectTCP.  The problem I
>am having is finding a deferred that will fire when:
>
>1.  A server is actually listening.  I want to use this deferred to
>trigger clients to connect...

listenTCP complete synchronously, so you don't need to wait before
connecting to a server started this way.

>
>2.  A client has connected.  I want to return this deferred from my
>setUp method so my tests won't actually run until the client has
>connected to the server.

twisted.internet.protocol.ClientCreator.connectTCP will return a Deferred
which fires with a protocol instance after it is connected.  You can use
that, or look at its implementation to see how to do something similar
yourself.

>
>I have some hackish ways that I have been getting around this, but
>they seem a little fickle.  What is the "standard" way of doing this
>in tests?

You might also consider /not/ using real sockets in your unit tests.  It
is often easier to use a simulated transport.

twisted.protocols.loopback.loopback is going to be deprecated in Twisted
2.5, but it will be replaced with something much the same, loopbackAsync.
You can also just create twisted.test.proto_helpers.StringTransport objects
and attach them to protocols directly.  This gives you very precise control
over what you are testing.

Jean-Paul



From exarkun at divmod.com  Sun Dec 17 15:34:19 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 17 Dec 2006 17:34:19 -0500
Subject: [Twisted-Python] twisted pyQT4 tutorial?
In-Reply-To: <200612171725.14733.twisted@x11.cjb.net>
Message-ID: <20061217223419.20948.678233506.divmod.quotient.78432@ohm>

On Sun, 17 Dec 2006 17:25:14 -0500, twisted at x11.cjb.net wrote:
>I am intrested in doing some stuff with pyQT4 and twisted, and have been
>successful in getting some things to work separately, but am not exactly sure
>how to get the reactor going in the QT4's event loop.
>
>This is the reactor I am trying to use.
>http://twistedmatrix.com/trac/attachment/ticket/1770/qt4reactor.py
>
>Is there any kind of tutorial for this, or example code from a simple runnable
>application?

Not as far as I am aware.  The code you are referring to was contributed
by a third party and hasn't even been accepted for inclusion in Twisted,
it's just attached to an enhancement request in the ticket tracker.  You
might want to contact the author for further assistance.

Jean-Paul



From ellisonbg.net at gmail.com  Sun Dec 17 15:45:39 2006
From: ellisonbg.net at gmail.com (Brian Granger)
Date: Sun, 17 Dec 2006 15:45:39 -0700
Subject: [Twisted-Python] What deferred can I use to detect when a server
	or client is "running"
In-Reply-To: <20061217223243.20948.42905055.divmod.quotient.78430@ohm>
References: <6ce0ac130612171410k3a9138d2v521ffc60d127d8e9@mail.gmail.com>
	<20061217223243.20948.42905055.divmod.quotient.78430@ohm>
Message-ID: <6ce0ac130612171445i1bcfbd6byb5752d89a0a4512c@mail.gmail.com>

Great, this is very helpful.  It turns out the hack I was doing is not
that different from what ClientCreator.connectTCP does - passing a
deferred to my factory that gets fired at the right time.
I think I might just have a bug floating around.

I will have a look at the loopback stuff though.

Brian

On 12/17/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
> On Sun, 17 Dec 2006 15:10:34 -0700, Brian Granger <ellisonbg.net at gmail.com> wrote:
> >Hi,
> >
> >i am writing some tests using trial and in my setUp methods I start
> >various servers and clients using listenTCP/connectTCP.  The problem I
> >am having is finding a deferred that will fire when:
> >
> >1.  A server is actually listening.  I want to use this deferred to
> >trigger clients to connect...
>
> listenTCP complete synchronously, so you don't need to wait before
> connecting to a server started this way.
>
> >
> >2.  A client has connected.  I want to return this deferred from my
> >setUp method so my tests won't actually run until the client has
> >connected to the server.
>
> twisted.internet.protocol.ClientCreator.connectTCP will return a Deferred
> which fires with a protocol instance after it is connected.  You can use
> that, or look at its implementation to see how to do something similar
> yourself.
>
> >
> >I have some hackish ways that I have been getting around this, but
> >they seem a little fickle.  What is the "standard" way of doing this
> >in tests?
>
> You might also consider /not/ using real sockets in your unit tests.  It
> is often easier to use a simulated transport.
>
> twisted.protocols.loopback.loopback is going to be deprecated in Twisted
> 2.5, but it will be replaced with something much the same, loopbackAsync.
> You can also just create twisted.test.proto_helpers.StringTransport objects
> and attach them to protocols directly.  This gives you very precise control
> over what you are testing.
>
> Jean-Paul
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From p.mayers at imperial.ac.uk  Sun Dec 17 18:38:45 2006
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Mon, 18 Dec 2006 01:38:45 +0000
Subject: [Twisted-Python] Writing to a unix FIFO
Message-ID: <4585F125.3010504@imperial.ac.uk>

Does anyone have a notion of what the easiest way of doing this is? I 
feel some combination of wrapping a consumer around a FileDescriptor 
ought to work, or something similar to the stdio support, but I can't 
quite reason it out.

It is somewhat complicated by the weird behaviour of FIFOs depending on 
the state of the other end.



From michele.petrazzo at unipex.it  Tue Dec 19 07:42:11 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Tue, 19 Dec 2006 15:42:11 +0100
Subject: [Twisted-Python] ftp question
Message-ID: <4587FA43.7000407@unipex.it>

I list,
I want to implement a not standard ftp STOR (STOT in the real) command.
It not accept the path, because it create a new one on the server side.
I'm tring to  work with the sendToConnection and SenderProtocol, but I
don't understand where the file (that on storeFile are passed as "path")
are opened (read) for after pass its data to the write method of
SenderProtocol.

I stop myself because I'm not able to send data throw the channel!

Can someone help me?

Thanks,
Michele
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3273 bytes
Desc: S/MIME Cryptographic Signature
URL: </pipermail/twisted-python/attachments/20061219/02cd3757/attachment-0002.bin>

From cedepaula at yahoo.com.br  Tue Dec 19 14:21:47 2006
From: cedepaula at yahoo.com.br (Carlos Eduardo)
Date: Tue, 19 Dec 2006 21:21:47 +0000 (UTC)
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
References: <20061208204340.28587.724311602.divmod.xquotient.658@joule.divmod.com>
Message-ID: <loom.20061219T221058-243@post.gmane.org>

>It would be a very welcome contribution. :)  Take a look at these pages,if you
>haven't already seen them, for some guidelines on how to bestcontribute the
>changes, and feel free to ask if you have any other questions.Jean-Paul
> 

JP,

I made some changes to pb.py and it now supports anonymous logins.

The only file that was changed is pb.py and I tried to make a new support
without changing the existing code as much as I could.

Im new in Twisted.. and dont know if the solution I created was the best or the
most indicated. Suggestions are welcome.

Here follows the patch, the full pb.py file and an example based on pbserver6
and pbclient6 both supporting authenticated and anonymous access(just comment
the correct line in client).

The links to the files:

http://kmm.googlecode.com/files/pb.py
http://kmm.googlecode.com/files/pb_anonymous.patch
http://kmm.googlecode.com/files/pb6client1.py
http://kmm.googlecode.com/files/pb6server.py


Thanks and awaiting a feedback,

Carlos






From glyph at divmod.com  Tue Dec 19 14:41:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 19 Dec 2006 21:41:50 -0000
Subject: [Twisted-Python] Re: Perspective Broker Anonymous access..
Message-ID: <20061219214150.25692.1024823278.divmod.xquotient.225@joule.divmod.com>

On 09:21 pm, cedepaula at yahoo.com.br wrote:
>>It would be a very welcome contribution. :)  Take a look at these pages, if you
>>haven't already seen them, for some guidelines on how to best contribute the
>>changes, and feel free to ask if you have any other questions.

>Thanks and awaiting a feedback,

Please open a ticket in the tracker (accessible at the very front page of twistedmatrix.com), and attach a unified diff to it.  If your code already contains tests and comprehensive docstring coverage of new functionality, then attach the keyword 'review'.

If you haven't already, you'll need to register for an account first before you can open tickets.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061219/df988154/attachment.html>

From Pierre_Rouleau at ImpathNetworks.com  Tue Dec 19 14:53:33 2006
From: Pierre_Rouleau at ImpathNetworks.com (Pierre Rouleau)
Date: Tue, 19 Dec 2006 16:53:33 -0500
Subject: [Twisted-Python] Possible error in core documentation in defer.html
Message-ID: <em9n0q$sel$1@sea.gmane.org>

Hi all,

- Page: 
http://twistedmatrix.com/projects/core/documentation/howto/defer.html

- Section: Multiple callbacks

The example ends with::

   # this series of callbacks and errbacks will print "Result: 12"
   g = Getter()
   d = g.getData(4)
   d.addCallback(printData)
   d.addErrback(printError)


The line::

   d = g.getData(4)

should be::

   d = g.getDummyData(4)



Should I enter this in TRAC?

-- 
Pierre Rouleau





From exarkun at divmod.com  Tue Dec 19 15:12:53 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 19 Dec 2006 17:12:53 -0500
Subject: [Twisted-Python] Possible error in core documentation in
	defer.html
In-Reply-To: <em9n0q$sel$1@sea.gmane.org>
Message-ID: <20061219221253.20948.1126841011.divmod.quotient.82285@ohm>

On Tue, 19 Dec 2006 16:53:33 -0500, Pierre Rouleau <pierre_rouleau at impathnetworks.com> wrote:
>Hi all,
>
>- Page: 
>http://twistedmatrix.com/projects/core/documentation/howto/defer.html
>
>- Section: Multiple callbacks
>
>The example ends with::
>
>   # this series of callbacks and errbacks will print "Result: 12"
>   g = Getter()
>   d = g.getData(4)
>   d.addCallback(printData)
>   d.addErrback(printError)
>
>
>The line::
>
>   d = g.getData(4)
>
>should be::
>
>   d = g.getDummyData(4)
>
>
>
>Should I enter this in TRAC?
>

Please do.

Jean-Paul



From Pierre_Rouleau at ImpathNetworks.com  Tue Dec 19 15:34:54 2006
From: Pierre_Rouleau at ImpathNetworks.com (Pierre Rouleau)
Date: Tue, 19 Dec 2006 17:34:54 -0500
Subject: [Twisted-Python] Re: Possible error in core documentation in
	defer.html
In-Reply-To: <20061219221253.20948.1126841011.divmod.quotient.82285@ohm>
References: <em9n0q$sel$1@sea.gmane.org>
	<20061219221253.20948.1126841011.divmod.quotient.82285@ohm>
Message-ID: <em9peb$bsb$1@sea.gmane.org>

Jean-Paul Calderone wrote:

> On Tue, 19 Dec 2006 16:53:33 -0500, Pierre Rouleau 
> <pierre_rouleau at impathnetworks.com> wrote:
> 
>> Hi all,
>>
>> - Page: 
>> http://twistedmatrix.com/projects/core/documentation/howto/defer.html
>>
>> - Section: Multiple callbacks
>>
>> The example ends with::
>>
>>   # this series of callbacks and errbacks will print "Result: 12"
>>   g = Getter()
>>   d = g.getData(4)
>>   d.addCallback(printData)
>>   d.addErrback(printError)
>>
>>
>> The line::
>>
>>   d = g.getData(4)
>>
>> should be::
>>
>>   d = g.getDummyData(4)
>>
>>
>>
>> Should I enter this in TRAC?
>>
> 
> Please do.
> 

Done. Ticket 2306.  It's the first ticket I enter here.
Let me know if there's any wrong.  I read 
http://twistedmatrix.com/trac/wiki/IssueSubmissionGuidelines but there's 
not much in that page.

I could not find if there's a category for documentation, so I just 
placed documentation in the keywords field.

--

Pierre Rouleau




From ellisonbg.net at gmail.com  Wed Dec 20 10:17:04 2006
From: ellisonbg.net at gmail.com (Brian Granger)
Date: Wed, 20 Dec 2006 10:17:04 -0700
Subject: [Twisted-Python] Transforming Exception -> pb.Error in a remote_foo
	method
Message-ID: <6ce0ac130612200917idd10387t8239fe8899b12c88@mail.gmail.com>

Hi,

In the Twisted docs it is claimed that in order to propagate exceptions over PB:

"The only special thing you do is to define your Exception subclass by
deriving it from pb.Error. "

This seems simple enough, but I am using PB to adapt a general service
that doesn't use pb.Errors (as the service is also adapted to other
protocols).  How can one transform a regular Exception to a pb.Error?
The following does not work:


    def remote_foo(self, f):
        d = self.service.foo(f)
        def raiser():
            raise pb.Error('I pbfailed')
        d.addErrback(lambda reason: raiser())        # reason is an
Exception, not a pb.Error!
        return d

In this case, the server still complains about an unhandled exception.

Any thoughts about how to do this?

Thanks

Brian



From exarkun at divmod.com  Wed Dec 20 10:35:42 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Wed, 20 Dec 2006 12:35:42 -0500
Subject: [Twisted-Python] Transforming Exception -> pb.Error in a
	remote_foo method
In-Reply-To: <6ce0ac130612200917idd10387t8239fe8899b12c88@mail.gmail.com>
Message-ID: <20061220173542.20948.350533793.divmod.quotient.83830@ohm>

On Wed, 20 Dec 2006 10:17:04 -0700, Brian Granger <ellisonbg.net at gmail.com> wrote:
>Hi,
>
>In the Twisted docs it is claimed that in order to propagate exceptions over 
>PB:
>
>"The only special thing you do is to define your Exception subclass by
>deriving it from pb.Error. "
>
>This seems simple enough, but I am using PB to adapt a general service
>that doesn't use pb.Errors (as the service is also adapted to other
>protocols).  How can one transform a regular Exception to a pb.Error?
>The following does not work:
>

This is a bug in PB's handling of Deferreds which fail with an Error.
They are not handled in the same way as Errors which are raised
synchronously by the method to which the PB message is dispatched.

Could you file a ticket in the tracker?

Jean-Paul



From alvinwang at gmail.com  Wed Dec 20 21:45:45 2006
From: alvinwang at gmail.com (Alvin Wang)
Date: Wed, 20 Dec 2006 20:45:45 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
Message-ID: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>

http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html

The documentation above says that credentials should be able to do
authentication with multiple passes.  However, I have not been able to find
any examples of it.

As an alternative, I was going to implement a user object with state that
determined what it was able to do.  I could force the client to conduct
multiple challenge responses to achieve the logged in state.

I figured it would be better to ask the mail list for the proper way to do
it first.

Thanks
-- 
Alvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061220/cdb4cfe0/attachment.html>

From sflist at ihonk.com  Wed Dec 20 23:49:44 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 00:49:44 -0600
Subject: [Twisted-Python] SSL problem
Message-ID: <1166683784.4728.35.camel@infinite-loop>

Hi all.

I'm having trouble getting SSL working properly. I'm running a modified
t.m.pop3.POP3 server and it was running peachy on port 110, no problems
under real-world load, so I thought it'd be simple enough to add SSL
support by changing this...

INTERFACES = ('1.2.3.4','4.5.6.7', etc.)

for iface in INTERFACES:
    reactor.listenTCP(110, myPop3server, interface=iface)
reactor.run()

...to this:

INTERFACES = ('1.2.3.4','4.5.6.7', etc.)

sslContext = ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
SSL_CERTIFICATE_FILE)

for iface in INTERFACES:
    reactor.listenTCP(110, myPop3server, interface=iface)
    reactor.listenSSL(995, myPop3server, interface=iface,
contextFactory=sslContext)
reactor.run()

Which worked fine when hitting it with a single client from my machine,
but failed miserably when hitting it from mail2web.com. Lots of errors
loading the message list and the messages. The log showed mail2web
connecting and then immediately dropping the connection. I tried
changing the code so I instantiated one sslContext per call to
listenSSL. That made it much better, but still not perfect. The errors
persisted.

So I tried dropping the calls to listenSSL, and wrapped the server with
stunnel. That worked perfectly, except since my host doesn't support
transparent proxying, my twisted app doesn't see the connecting client's
IP, and I need that, so that's not an option. It does implicate
twisted's particular flavor of SSL in my problems, though.

I don't know much about SSL, but I searched the twisted list and
couldn't find anything that helped, with the possible exception of a
query about support for SSL session resumption. I don't know what it is,
but it sounds useful. Anyway, if anybody could toss an idea or two my
way, I'd appreciate it.

Thanks,

Steve

P.S. for posterity: I got a tip from this list to use authbind when
trying to bind my twisted server to a privileged port (e.g. < 1024). For
those of you who might have trouble using authbind to allow your
non-root user to bind to ports between 512-1023, you need to get the
authbind source, then comment out helper.c:76 and libauthbind.c:151, at
least for version 1.1.5.2, where it checks the requested port against
IPPORT_RESERVED/2. The man page squawks about prohibiting these ports to
avoid creating a security hole in conjunction with rsh, but since rsh
_is_ a security hole, I'm not overly worried about that.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061221/1aa9086b/attachment.html>

From teratorn at twistedmatrix.com  Thu Dec 21 00:14:16 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 21 Dec 2006 01:14:16 -0600
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
Message-ID: <op.tkwed2cuy3d107@office2>

On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com> wrote:

> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
>
> The documentation above says that credentials should be able to do
> authentication with multiple passes.  However, I have not been able to  
> find
> any examples of it.
>
> As an alternative, I was going to implement a user object with state that
> determined what it was able to do.  I could force the client to conduct
> multiple challenge responses to achieve the logged in state.
>
> I figured it would be better to ask the mail list for the proper way to  
> do
> it first.
>
> Thanks

Excuse me if I'm being dense, but what are you trying to do exactly?

-- 
Eric Mangold
Twisted/Win32 Co-Maintainer



From alvinwang at gmail.com  Thu Dec 21 00:45:07 2006
From: alvinwang at gmail.com (Alvin Wang)
Date: Wed, 20 Dec 2006 23:45:07 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <op.tkwed2cuy3d107@office2>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
Message-ID: <77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>

On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>
> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
> wrote:
>
> > http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
> >
> > The documentation above says that credentials should be able to do
> > authentication with multiple passes.  However, I have not been able to
> > find
> > any examples of it.
> >
> > As an alternative, I was going to implement a user object with state
> that
> > determined what it was able to do.  I could force the client to conduct
> > multiple challenge responses to achieve the logged in state.
> >
> > I figured it would be better to ask the mail list for the proper way to
> > do
> > it first.
> >
> > Thanks
>
> Excuse me if I'm being dense, but what are you trying to do exactly?
>
> --
> Eric Mangold
> Twisted/Win32 Co-Maintainer
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

P2P application
Client logs onto server with Publickey
Since the server does not necessarily have the same IP address, I also want
to authenticate the server's PK also.

Thanks
-- 
Alvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061220/27a58e1c/attachment.html>

From teratorn at twistedmatrix.com  Thu Dec 21 01:24:24 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 21 Dec 2006 02:24:24 -0600
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
	<77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
Message-ID: <op.tkwhmylsy3d107@office2>

On Thu, 21 Dec 2006 01:45:07 -0600, Alvin Wang <alvinwang at gmail.com> wrote:

> On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>>
>> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
>> wrote:
>>
>> >  
>> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
>> >
>> > The documentation above says that credentials should be able to do
>> > authentication with multiple passes.  However, I have not been able to
>> > find
>> > any examples of it.
>> >
>> > As an alternative, I was going to implement a user object with state
>> that
>> > determined what it was able to do.  I could force the client to  
>> conduct
>> > multiple challenge responses to achieve the logged in state.
>> >
>> > I figured it would be better to ask the mail list for the proper way  
>> to
>> > do
>> > it first.
>> >
>> > Thanks
>>
>> Excuse me if I'm being dense, but what are you trying to do exactly?
>>
>> --
>> Eric Mangold
>> Twisted/Win32 Co-Maintainer
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> P2P application
> Client logs onto server with Publickey
> Since the server does not necessarily have the same IP address, I also  
> want
> to authenticate the server's PK also.
>
> Thanks

As far as I know PB doesn't provide any mechanism for the client to  
authenticate the server. But it should be easy to implement.

You could use the normal procedure to log in to the server. The server  
provides various remote methods that you can call in order to have it  
verify itself to you. Once you (the client) are satisifed, then, and only  
then, do you consider yourself "logged in". You should be caution to  
prevent the server from invoking methods on the client, and vise vera,  
prior to authenticating the server.

-- 
Eric Mangold
Twisted/Win32 Co-Maintainer



From alvinwang at gmail.com  Thu Dec 21 02:24:59 2006
From: alvinwang at gmail.com (Alvin Wang)
Date: Thu, 21 Dec 2006 01:24:59 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <op.tkwhmylsy3d107@office2>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
	<77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
	<op.tkwhmylsy3d107@office2>
Message-ID: <77d044440612210124t638ddd9asd6d462d2994d687e@mail.gmail.com>

On 12/21/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>
> On Thu, 21 Dec 2006 01:45:07 -0600, Alvin Wang <alvinwang at gmail.com>
> wrote:
>
> > On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
> >>
> >> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
> >> wrote:
> >>
> >> >
> >> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
> >> >
> >> > The documentation above says that credentials should be able to do
> >> > authentication with multiple passes.  However, I have not been able
> to
> >> > find
> >> > any examples of it.
> >> >
> >> > As an alternative, I was going to implement a user object with state
> >> that
> >> > determined what it was able to do.  I could force the client to
> >> conduct
> >> > multiple challenge responses to achieve the logged in state.
> >> >
> >> > I figured it would be better to ask the mail list for the proper way
> >> to
> >> > do
> >> > it first.
> >> >
> >> > Thanks
> >>
> >> Excuse me if I'm being dense, but what are you trying to do exactly?
> >>
> >> --
> >> Eric Mangold
> >> Twisted/Win32 Co-Maintainer
> >>
> >> _______________________________________________
> >> Twisted-Python mailing list
> >> Twisted-Python at twistedmatrix.com
> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> >>
> >
> > P2P application
> > Client logs onto server with Publickey
> > Since the server does not necessarily have the same IP address, I also
> > want
> > to authenticate the server's PK also.
> >
> > Thanks
>
> As far as I know PB doesn't provide any mechanism for the client to
> authenticate the server. But it should be easy to implement.
>
> You could use the normal procedure to log in to the server. The server
> provides various remote methods that you can call in order to have it
> verify itself to you. Once you (the client) are satisifed, then, and only
> then, do you consider yourself "logged in". You should be caution to
> prevent the server from invoking methods on the client, and vise vera,
> prior to authenticating the server.
>
> --
> Eric Mangold
> Twisted/Win32 Co-Maintainer
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>

I was thinking that there might be something more elegant.

If I am implementing the login procedure by hand anyway, it seems like it
would be simpler to just build it into pb.root.  I could skip the
realms/checker stuff.  I would keep the secure stuff in a
pb.referenceableand not return it unless the user passes all the
tests.  Am I missing
anything?

Thanks
Alvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061221/58173225/attachment.html>

From itamar at itamarst.org  Thu Dec 21 07:20:33 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 21 Dec 2006 09:20:33 -0500
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
Message-ID: <1166710833.21900.57.camel@localhost.localdomain>

On Wed, 2006-12-20 at 20:45 -0800, Alvin Wang wrote:
> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
> 
> The documentation above says that credentials should be able to do
> authentication with multiple passes.  However, I have not been able to
> find any examples of it. 

Cred in general can - credential can have multiple methods that return
Deferreds and need to be called in certain order; but PB doesn't really
have pluggable authentication, so you may have to do it with extra layer
(in mind




From exarkun at divmod.com  Thu Dec 21 07:54:36 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 21 Dec 2006 09:54:36 -0500
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166683784.4728.35.camel@infinite-loop>
Message-ID: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>

On Thu, 21 Dec 2006 00:49:44 -0600, Steve Freitas <sflist at ihonk.com> wrote:
>Hi all.
>
>I'm having trouble getting SSL working properly. I'm running a modified
>t.m.pop3.POP3 server and it was running peachy on port 110, no problems
>under real-world load, so I thought it'd be simple enough to add SSL
>support by changing this...
>
>INTERFACES = ('1.2.3.4','4.5.6.7', etc.)
>
>for iface in INTERFACES:
>    reactor.listenTCP(110, myPop3server, interface=iface)
>reactor.run()
>
>...to this:
>
>INTERFACES = ('1.2.3.4','4.5.6.7', etc.)
>
>sslContext = ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
>SSL_CERTIFICATE_FILE)
>
>for iface in INTERFACES:
>    reactor.listenTCP(110, myPop3server, interface=iface)
>    reactor.listenSSL(995, myPop3server, interface=iface,
>contextFactory=sslContext)
>reactor.run()
>
>Which worked fine when hitting it with a single client from my machine,
>but failed miserably when hitting it from mail2web.com. Lots of errors
>loading the message list and the messages. The log showed mail2web
>connecting and then immediately dropping the connection. I tried
>changing the code so I instantiated one sslContext per call to
>listenSSL. That made it much better, but still not perfect. The errors
>persisted.
>
>So I tried dropping the calls to listenSSL, and wrapped the server with
>stunnel. That worked perfectly, except since my host doesn't support
>transparent proxying, my twisted app doesn't see the connecting client's
>IP, and I need that, so that's not an option. It does implicate
>twisted's particular flavor of SSL in my problems, though.
>
>I don't know much about SSL, but I searched the twisted list and
>couldn't find anything that helped, with the possible exception of a
>query about support for SSL session resumption. I don't know what it is,
>but it sounds useful. Anyway, if anybody could toss an idea or two my
>way, I'd appreciate it.

It's pretty difficult to say what the problem is without knowing the
specific error which is occurring, or having a complete example which
can reproduce it.  I'd _guess_ your context object isn't configured
quite right.  If you can post a complete example which reproduces the
problem, it would be much easier to diagnose.  At the very least, you
should share the SSL errors which are occurring.

Jean-Paul



From sflist at ihonk.com  Thu Dec 21 08:32:22 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 09:32:22 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
References: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
Message-ID: <1166715142.9245.10.camel@infinite-loop>

Thanks for the response, JP.

On Thu, 2006-12-21 at 09:54 -0500, Jean-Paul Calderone wrote:

> It's pretty difficult to say what the problem is without knowing the
> specific error which is occurring, or having a complete example which
> can reproduce it.

Yeah, I understand that. I'm not sure where to go to get the errors,
though. I was trying to avoid putting up a complete example, because it
would be pretty involved, but I'll go that route if trying to dig up the
errors doesn't yield anything.

> I'd _guess_ your context object isn't configured
> quite right.

IOW, there's something wrong with the key/cert I'm feeding it? Calling
ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
>SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
stunnel as well.

> At the very least, you
> should share the SSL errors which are occurring.

How do I get at these? I didn't see any tracebacks being tossed. I'm
using 2.4.0.

Steve




From exarkun at divmod.com  Thu Dec 21 09:04:34 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Thu, 21 Dec 2006 11:04:34 -0500
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166715142.9245.10.camel@infinite-loop>
Message-ID: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>

On Thu, 21 Dec 2006 09:32:22 -0600, Steve Freitas <sflist at ihonk.com> wrote:
>Thanks for the response, JP.
>
>On Thu, 2006-12-21 at 09:54 -0500, Jean-Paul Calderone wrote:
>
> [snip]
>
>> I'd _guess_ your context object isn't configured
>> quite right.
>
>IOW, there's something wrong with the key/cert I'm feeding it? Calling
>ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
>>SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
>wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
>stunnel as well.

It's possible (in fact, likely) you need to do something other than just
create the DefaultOpenSSLContextFactory, too.  There are a lot of dials
and knobs here - the context factory you're using works okay for a lot of
cases, but it isn't appropriate for all cases.

You have two pieces of data which are yours -  your private key and your
certificate (which is a csr signed by RapidSSL).  The client needs (at
least) one more piece of information, though - RapidSSL's certificate.

Try this.  Put RapidSSL's certificate into a file, subclass
DefaultOpenSSLContextFactory, override cacheContext, and on self._context,
call use_certificate_chain_file with the name of the file you put RapidSSL's
certificate into.

This causes the server to include it in the handshake which is often
required for clients to accept your certificate as valid.

>
>> At the very least, you
>> should share the SSL errors which are occurring.
>
>How do I get at these? I didn't see any tracebacks being tossed. I'm
>using 2.4.0.

At some point, I think connectionLost for SSL connections was adjusted
so that the SSL exception would be available.  However, the important
information is going to be on the client side, so unless that is using
Twisted as well (it sounds to me as though it is not), this won't help
you.  How to extract the extra information will depend on what software
is acting as the client.  Hopefully the above suggestion will resolve the
problem, though.

Jean-Paul



From itamar at itamarst.org  Thu Dec 21 10:47:14 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 21 Dec 2006 12:47:14 -0500
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166715142.9245.10.camel@infinite-loop>
References: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
	<1166715142.9245.10.camel@infinite-loop>
Message-ID: <1166723234.21900.73.camel@localhost.localdomain>

On Thu, 2006-12-21 at 09:32 -0600, Steve Freitas wrote:

> IOW, there's something wrong with the key/cert I'm feeding it? Calling
> ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
> >SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
> wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
> stunnel as well.

Perhaps you want TLSv1 instead of SSLv3?




From sflist at ihonk.com  Thu Dec 21 13:57:57 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 14:57:57 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166723234.21900.73.camel@localhost.localdomain>
References: <20061221145436.20948.897025121.divmod.quotient.85453@ohm>
	<1166715142.9245.10.camel@infinite-loop>
	<1166723234.21900.73.camel@localhost.localdomain>
Message-ID: <1166734677.9245.23.camel@infinite-loop>

On Thu, 2006-12-21 at 12:47 -0500, Itamar Shtull-Trauring wrote:
> On Thu, 2006-12-21 at 09:32 -0600, Steve Freitas wrote:
> 
> > IOW, there's something wrong with the key/cert I'm feeding it? Calling
> > ssl.DefaultOpenSSLContextFactory(SSL_PRIVATE_KEY_FILE,
> > >SSL_CERTIFICATE_FILE) is so simple I'm not sure where I'd be going
> > wrong. BTW, the cert was provided by RapidSSL, and it's what I used with
> > stunnel as well.
> 
> Perhaps you want TLSv1 instead of SSLv3?

Thanks for the reply, Itamar.

Gave it a try, and I don't think so -- mail2web simply wouldn't deal
with it at all. Of course, all I did was pass in a third argument to
DefaultOpenSSLContextFactory, SSL.TLSv1_METHOD. Should I have done any
more than that?

In the meantime, I'm gonna give JP's suggestions a try. Thanks, JP.

Steve




From teratorn at twistedmatrix.com  Thu Dec 21 15:37:43 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Thu, 21 Dec 2006 16:37:43 -0600
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612210124t638ddd9asd6d462d2994d687e@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
	<op.tkwed2cuy3d107@office2>
	<77d044440612202345x2af8a7fby688043d444992fd7@mail.gmail.com>
	<op.tkwhmylsy3d107@office2>
	<77d044440612210124t638ddd9asd6d462d2994d687e@mail.gmail.com>
Message-ID: <op.tkxk45mgy3d107@office2>

On Thu, 21 Dec 2006 03:24:59 -0600, Alvin Wang <alvinwang at gmail.com> wrote:

> On 12/21/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>>
>> On Thu, 21 Dec 2006 01:45:07 -0600, Alvin Wang <alvinwang at gmail.com>
>> wrote:
>>
>> > On 12/20/06, Eric Mangold <teratorn at twistedmatrix.com> wrote:
>> >>
>> >> On Wed, 20 Dec 2006 22:45:45 -0600, Alvin Wang <alvinwang at gmail.com>
>> >> wrote:
>> >>
>> >> >
>> >>  
>> http://twistedmatrix.com/projects/core/documentation/howto/pb-cred.html
>> >> >
>> >> > The documentation above says that credentials should be able to do
>> >> > authentication with multiple passes.  However, I have not been able
>> to
>> >> > find
>> >> > any examples of it.
>> >> >
>> >> > As an alternative, I was going to implement a user object with  
>> state
>> >> that
>> >> > determined what it was able to do.  I could force the client to
>> >> conduct
>> >> > multiple challenge responses to achieve the logged in state.
>> >> >
>> >> > I figured it would be better to ask the mail list for the proper  
>> way
>> >> to
>> >> > do
>> >> > it first.
>> >> >
>> >> > Thanks
>> >>
>> >> Excuse me if I'm being dense, but what are you trying to do exactly?
>> >>
>> >> --
>> >> Eric Mangold
>> >> Twisted/Win32 Co-Maintainer
>> >>
>> >> _______________________________________________
>> >> Twisted-Python mailing list
>> >> Twisted-Python at twistedmatrix.com
>> >> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> >>
>> >
>> > P2P application
>> > Client logs onto server with Publickey
>> > Since the server does not necessarily have the same IP address, I also
>> > want
>> > to authenticate the server's PK also.
>> >
>> > Thanks
>>
>> As far as I know PB doesn't provide any mechanism for the client to
>> authenticate the server. But it should be easy to implement.
>>
>> You could use the normal procedure to log in to the server. The server
>> provides various remote methods that you can call in order to have it
>> verify itself to you. Once you (the client) are satisifed, then, and  
>> only
>> then, do you consider yourself "logged in". You should be caution to
>> prevent the server from invoking methods on the client, and vise vera,
>> prior to authenticating the server.
>>
>> --
>> Eric Mangold
>> Twisted/Win32 Co-Maintainer
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> I was thinking that there might be something more elegant.
>
> If I am implementing the login procedure by hand anyway, it seems like it
> would be simpler to just build it into pb.root.  I could skip the
> realms/checker stuff.  I would keep the secure stuff in a
> pb.referenceableand not return it unless the user passes all the
> tests.  Am I missing
> anything?
>
> Thanks
> Alvin

I'm not really sure what that means in concrete implementation terms. But  
it seems like you get the picture. If you need more help it's probably  
time to start posting code.

-- 
Eric Mangold
Twisted/Win32 Co-Maintainer



From sflist at ihonk.com  Thu Dec 21 19:55:14 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 20:55:14 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>
References: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>
Message-ID: <1166756114.4739.11.camel@infinite-loop>

Thanks JP.

On Thu, 2006-12-21 at 11:04 -0500, Jean-Paul Calderone wrote:
> You have two pieces of data which are yours -  your private key and your
> certificate (which is a csr signed by RapidSSL).  The client needs (at
> least) one more piece of information, though - RapidSSL's certificate.

I found it here:

http://www.rapidssl.com/cps/rapidssl_01.cer

At least, I believe that's right, since despite some looking around, I'm
not sure how to verify by hand that my cert was signed by that CA. (I
played with openssl verify but it gave the OK to my cert without
pointing it at RapidSSL's root cert file, so I don't know that it's
doing what I want.) I've attached my cert in case you're interested.

> Try this.  Put RapidSSL's certificate into a file, subclass
> DefaultOpenSSLContextFactory, override cacheContext, and on self._context,
> call use_certificate_chain_file with the name of the file you put RapidSSL's
> certificate into.
> 
> This causes the server to include it in the handshake which is often
> required for clients to accept your certificate as valid.

Okay, I tried that...

class MyOpenSSLContextFactory(ssl.DefaultOpenSSLContextFactory):
    def cacheContext(self):
        ssl.DefaultOpenSSLContextFactory.cacheContext(self)
        self._context.use_certificate_chain_file(CA_CERT_FILE)

...and nothing at all would connect to it. But read on...

> At some point, I think connectionLost for SSL connections was adjusted
> so that the SSL exception would be available.  However, the important
> information is going to be on the client side <snip>

So based on this information, I whipped up a Twisted SSL client to hit
it so see what's wrong, and it tossed this out:

2006/12/21 20:36 CST [POP3Client,client] Traceback (most recent call
last):
        Failure: OpenSSL.SSL.Error: [('SSL routines', 'SSL3_READ_BYTES',
'sslv3 alert handshake failure'), ('SSL routines', 'SSL3_WRITE_BYTES',
'ssl handshake failure')]

Not sure if that's informative enough to suggest a next step!

Thanks for your help,

Steve
-------------- next part --------------
-----BEGIN CERTIFICATE-----
MIIDRTCCAq6gAwIBAgIDBSYeMA0GCSqGSIb3DQEBBAUAMFoxCzAJBgNVBAYTAlVT
MRwwGgYDVQQKExNFcXVpZmF4IFNlY3VyZSBJbmMuMS0wKwYDVQQDEyRFcXVpZmF4
IFNlY3VyZSBHbG9iYWwgZUJ1c2luZXNzIENBLTEwHhcNMDYxMjIwMjA1OTAzWhcN
MDcxMjIxMjA1OTAzWjCBtDELMAkGA1UEBhMCVVMxGjAYBgNVBAoTEW1haWwuaGFt
YmVycnkuY29tMRMwEQYDVQQLEwpHVDAxNzg0NDM4MScwJQYDVQQLEx5TZWUgd3d3
LnJhcGlkc3NsLmNvbS9jcHMgKGMpMDUxLzAtBgNVBAsTJkRvbWFpbiBDb250cm9s
IFZhbGlkYXRlZCAtIFJhcGlkU1NMKFIpMRowGAYDVQQDExFtYWlsLmhhbWJlcnJ5
LmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwhbwBpjWAPoh7RycuNmh
LTPRea2Sn1vBJjOEh4Ykz9ygU9Jg1oYrehcdbE8Kr67sqYmBXP9Cc9E1ggze5MSP
Ah4+LN4HvhrBJejFHL3EIJsw4zNHs5oaQotTESXTcCQaoY0+TYg4F+naFsbIg8wu
bx+d3wTLbD/ra1X2T21fdBMCAwEAAaOBvTCBujAOBgNVHQ8BAf8EBAMCBPAwHQYD
VR0OBBYEFBIbxks9N2DLNItskPfnvkchalyMMDsGA1UdHwQ0MDIwMKAuoCyGKmh0
dHA6Ly9jcmwuZ2VvdHJ1c3QuY29tL2NybHMvZ2xvYmFsY2ExLmNybDAfBgNVHSME
GDAWgBS+qKB0clBrRLfJI9j7qP+zV2tobDAdBgNVHSUEFjAUBggrBgEFBQcDAQYI
KwYBBQUHAwIwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQBmfT5Tzsft
qnvYrK71y7SHnUHM3dlDaRY4uLb1poE/BktG4eYGsKoBi/2bBK3rdgPi0NchaFqq
bJxJOnjYQFSmpMgeFp5jEYlJGIiZalhXh7sPtz+dBfD4sGEd5y3L9Oyu60DokmbL
EqemXOWWeQpa25IKUWcNt9O7jeoHRZSrYg==
-----END CERTIFICATE-----

From sflist at ihonk.com  Thu Dec 21 20:13:32 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Thu, 21 Dec 2006 21:13:32 -0600
Subject: [Twisted-Python] SSL problem
In-Reply-To: <1166756114.4739.11.camel@infinite-loop>
References: <20061221160434.20948.209791580.divmod.quotient.85529@ohm>
	<1166756114.4739.11.camel@infinite-loop>
Message-ID: <1166757212.4739.18.camel@infinite-loop>

On Thu, 2006-12-21 at 20:55 -0600, Steve Freitas wrote:
> At least, I believe that's right, since despite some looking around, I'm
> not sure how to verify by hand that my cert was signed by that CA. (I
> played with openssl verify but it gave the OK to my cert without
> pointing it at RapidSSL's root cert file, so I don't know that it's
> doing what I want.) I've attached my cert in case you're interested.

Never mind, I verified that was the correct root cert file, so now I'm
back to wondering why chaining them didn't seem to work...

Steve




From michele.petrazzo at unipex.it  Fri Dec 22 02:37:16 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Fri, 22 Dec 2006 10:37:16 +0100
Subject: [Twisted-Python] ftp question
In-Reply-To: <4587FA43.7000407@unipex.it>
References: <4587FA43.7000407@unipex.it>
Message-ID: <458BA74C.3090008@unipex.it>

Michele Petrazzo wrote:
> I list,
> I want to implement a not standard ftp STOR (STOT in the real) command.
> It not accept the path, because it create a new one on the server side.
> I'm tring to  work with the sendToConnection and SenderProtocol, but I
> don't understand where the file (that on storeFile are passed as "path")
> are opened (read) for after pass its data to the write method of
> SenderProtocol.
> 
> I stop myself because I'm not able to send data throw the channel!

I reply to myself saying that the reply are here:
http://twistedmatrix.com/pipermail/twisted-python/2003-October/005884.html

Michele
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3273 bytes
Desc: S/MIME Cryptographic Signature
URL: </pipermail/twisted-python/attachments/20061222/3c003207/attachment-0002.bin>

From michele.petrazzo at unipex.it  Fri Dec 22 03:23:33 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Fri, 22 Dec 2006 11:23:33 +0100
Subject: [Twisted-Python] understand the ftp response
Message-ID: <458BB225.1030101@unipex.it>

Hi list,
I'm using ftp client and its storeFile for send a file to the server,
but I'm have some troubles to understand its response.

I receive, after the end of connection (fired by the SenderProtocol),
something that ( pprint.pprint(result) ):

[(True,
   [(True,
     ['150 FILE: /tmp/doc100.tif (Opening new data connection).',
      '226 Transfer complete (FILE: /tmp/doc100.tif).'])]),
  (True, None),
  (True, 'connection done')]

That isn't so readable, for me. I need only the last response (the 150
and 226), so I have to make a: result[0][1][0][1], that work, but is not
so understandable. Is there other soltions?

Thanks,
Michele
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3273 bytes
Desc: S/MIME Cryptographic Signature
URL: </pipermail/twisted-python/attachments/20061222/a13dbdb6/attachment-0002.bin>

From yqiang at gmail.com  Fri Dec 22 08:57:49 2006
From: yqiang at gmail.com (Yi Qiang)
Date: Fri, 22 Dec 2006 07:57:49 -0800
Subject: [Twisted-Python] Authentication with multiple handshakes
In-Reply-To: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
References: <77d044440612202045v2725e63eydf6ef59e861d60f4@mail.gmail.com>
Message-ID: <3af8969a0612220757x57bd1837v4aff6ec069e00f8@mail.gmail.com>

Hi Alvin,

> The documentation above says that credentials should be able to do
> authentication with multiple passes.  However, I have not been able to find
> any examples of it.

twisted.cred can indeed do authentication in multiple passes.  See the
login method defined in twisted.spread.pb.PBClientFactory to see how
it works.


Yi



From exarkun at twistedmatrix.com  Sat Dec 23 23:05:03 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 24 Dec 2006 06:05:03 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1166940303.11.1393106941@twistedmatrix.com

Bug summary
______________________
Summary for 2006-12-17 through 2006-12-24
Bugs opened: 30    Bugs closed: 26  Total open bugs: 801 (+4)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +6  |Highest:  +1          |Conch:               -1  
|Enhancement:  +6  |High:     +1          |Core:                +0  
|Task:         -3  |Normal:   +8          |Lore:                +0  
                   |Low:      -1          |Pb:                  +5  
                                          |Release Management:  +1  
                                          |Runner:              +1  
                                          |Trial:               +0  
                                          |Web2:                +2  
                                          |Words:               +1  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#2301] Improve API documentation for twisted/lore/tree.py (opened by exarkun) (CLOSED, fixed)
    enhancement     lore       http://twistedmatrix.com/trac/ticket/2301

[#2303] setUpClass isn't run on subclasses if it already ran on superclass (opened by jknight)
    defect          trial      http://twistedmatrix.com/trac/ticket/2303

[#2309] trial man page incorrectly explains --coverage behaviour (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/2309

[#2313] procutils.which fails with a KeyError if PATH is not in os.environ (opened by dreid)
    defect          core       http://twistedmatrix.com/trac/ticket/2313

[#2317] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger)
    defect          pb         http://twistedmatrix.com/trac/ticket/2317

[#2319] twisted.spread.banana.decode is stateful (opened by exarkun)
    defect          pb         http://twistedmatrix.com/trac/ticket/2319

[#2125] PB Banana struggles transmitting large ints (opened by engie) (CLOSED, fixed)
    defect          pb         http://twistedmatrix.com/trac/ticket/2125

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2139] test_underUnderPathAlreadyImported and test_listingModules from twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2 reactor (opened by exarkun) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2139

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

                    ===== High =====
[#2324] _threadedselect.py uses uninformative names and has few docstrings (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2324

[#2325] _threadedselect.py duplicates tons of code from selectreactor.py (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2325

[#1083] gtk2reactor thread initialization confuses python-2.3 (opened by loic)
    defect          core       http://twistedmatrix.com/trac/ticket/1083

                    ===== Normal =====
[#2302] t.web2.channel.http.HTTPParser deals with HEAD requests incorrectly (opened by ghazel)
    defect          web2       http://twistedmatrix.com/trac/ticket/2302

[#2304] t.web2.client.http.HTTPClientChannelRequest.connectionLost does nothing (opened by ghazel)
    defect          web2       http://twistedmatrix.com/trac/ticket/2304

[#2305] twisted/internet/process.py leaks file descriptors when os.fork() raises (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/2305

[#2307] rewrite setup.py so it doesn't os.system() other setup.py scripts (opened by radix)
    enhancement     release management http://twistedmatrix.com/trac/ticket/2307

[#2308] Test Twisted's release automation (opened by radix)
    enhancement     release management http://twistedmatrix.com/trac/ticket/2308

[#2310] twisted.spread.banana.b1282int could be faster (opened by exarkun)
    enhancement     pb         http://twistedmatrix.com/trac/ticket/2310

[#2311] Twisted Perspective Broker anonymous login support (opened by carlosedp) (CLOSED, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2311

[#2312] Twisted Perspective Broker anonymous login support (opened by carlosedp)
    enhancement     pb         http://twistedmatrix.com/trac/ticket/2312

[#2314] t.r.procmon.ProcessMonitor should take an environment dictionary in addProcess (opened by dreid)
    enhancement     runner     http://twistedmatrix.com/trac/ticket/2314

[#2315] Request to add int8 string support to basic protocols (opened by metcalfc)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2315

[#2316] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger) (CLOSED, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2316

[#2318] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger) (CLOSED, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2318

[#2320] Implement XMPP server-to-server protocols (opened by ralphm)
    enhancement     words      http://twistedmatrix.com/trac/ticket/2320

[#2321] twisted.test.test_pb.NSPTestCase.tearDown calls stopListening but doesn't return the Deferred (opened by exarkun)
    defect          pb         http://twistedmatrix.com/trac/ticket/2321

[#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result of stopListening() (opened by jml) (CLOSED, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2322

[#2323] support deque in objgrep (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2323

                    ===== Low =====
[#2306] Possible error in documentation, in defer.html (opened by roup) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2306



Closed Bugs
______________________
                    ===== Highest =====
[#2300] Remove trailing whitespace from Python files (opened by jml, closed by jml, wontfix)
    task            core       http://twistedmatrix.com/trac/ticket/2300

[#2301] Improve API documentation for twisted/lore/tree.py (opened by exarkun, closed by exarkun, fixed)
    enhancement     lore       http://twistedmatrix.com/trac/ticket/2301

[#2125] PB Banana struggles transmitting large ints (opened by engie, closed by exarkun, fixed)
    defect          pb         http://twistedmatrix.com/trac/ticket/2125

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn, closed by teratorn, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2024] trial --dry-run fails with real test_suites, because pyunit suites don't have names (opened by spiv, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/2024

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn, closed by teratorn, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#2137] Pointer for end-users to the new location of the Qt reactor (opened by exarkun, closed by exarkun, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/2137

[#2292] AMP error propagation does not work on subclasses (opened by htj, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2292

[#2125] PB Banana struggles transmitting large ints (opened by engie, closed by exarkun, fixed)
    defect          pb         http://twistedmatrix.com/trac/ticket/2125

[#2139] test_underUnderPathAlreadyImported and test_listingModules from twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2 reactor (opened by exarkun, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2139

[#2286] abstract.FileDescriptor calls pauseProducing even if producer is not streaming (opened by zseil, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2286

[#2291] Zshcomp needs various improvements including test coverage (opened by teratorn, closed by teratorn, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2291

[#1835] make main setup.py work with 'build' subcommand (opened by radix, closed by radix, fixed)
    defect          release management http://twistedmatrix.com/trac/ticket/1835

                    ===== High =====
[#1083] gtk2reactor thread initialization confuses python-2.3 (opened by loic, closed by letrigre, )
    defect          core       http://twistedmatrix.com/trac/ticket/1083

[#811 ] Race condition in streaming producers means producer may never be unpaused (opened by itamarst, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/811

[#677 ] widgets don't show with wxreactor and xrc (opened by acapnotic, closed by itamarst, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/677

                    ===== Normal =====
[#2311] Twisted Perspective Broker anonymous login support (opened by carlosedp, closed by carlosedp, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/2311

[#2316] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger, closed by bgranger, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2316

[#2318] Bug in how pb handles synchronous pb.Errors in remote_foo methods (opened by bgranger, closed by bgranger, duplicate)
    defect          pb         http://twistedmatrix.com/trac/ticket/2318

[#1770] Reactor for Qt4 using PyQt4 (opened by grudy, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1770

[#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result of stopListening() (opened by jml, closed by jml, duplicate)
    defect          core       http://twistedmatrix.com/trac/ticket/2322

[#2174] Error in the PullProducer doc (opened by misto, closed by glyph, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2174

[#1942] Fix IOCP buildslave (opened by exarkun, closed by teratorn, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1942

[#619 ] wxPython doesn't render interface components (opened by sdeerwester, closed by itamarst, fixed)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/619

                    ===== Low =====
[#388 ] Tests code coverage display for Twisted (opened by itamarst, closed by exarkun, wontfix)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/388

[#2306] Possible error in documentation, in defer.html (opened by roup, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/2306





From glyph at divmod.com  Sun Dec 24 12:52:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sun, 24 Dec 2006 19:52:50 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <20061224195250.17094.785823955.divmod.xquotient.105@joule.divmod.com>

On 06:05 am, exarkun at twistedmatrix.com wrote:
>Bug summary
>______________________
>Summary for 2006-12-17 through 2006-12-24
>Bugs opened: 30    Bugs closed: 26  Total open bugs: 801 (+4)
>
>|== Type Changes   |== Priority Changes   |== Component Changes
>|Defect:       +6  |Highest:  +1          |Conch:               -1
>|Enhancement:  +6  |High:     +1          |Core:                +0
>|Task:         -3  |Normal:   +8          |Lore:                +0
>                   |Low:      -1          |Pb:                  +5
>                                          |Release Management:  +1
>                                          |Runner:              +1
>                                          |Trial:               +0
>                                          |Web2:                +2
>                                          |Words:               +1
--------------------+----------------------+-----------------------
              = +9           = +9                              = +9

Something looks wrong here.  How did it get 9 in every column but 4 in the summary?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061224/bf07ede5/attachment.html>

From felipe.lessa at gmail.com  Sun Dec 24 14:43:47 2006
From: felipe.lessa at gmail.com (Felipe Almeida Lessa)
Date: Sun, 24 Dec 2006 19:43:47 -0200
Subject: [Twisted-Python] Weekly Bug Summary
In-Reply-To: <20061224195250.17094.785823955.divmod.xquotient.105@joule.divmod.com>
References: <20061224195250.17094.785823955.divmod.xquotient.105@joule.divmod.com>
Message-ID: <c2701f5c0612241343i468448b2h684a9f57618eab7d@mail.gmail.com>

On 12/24/06, glyph at divmod.com <glyph at divmod.com> wrote:
> Something looks wrong here.  How did it get 9 in every column but 4 in the
> summary?

I think not all changes close buugs.


-- 
Felipe.



From teratorn at twistedmatrix.com  Sun Dec 24 15:43:17 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Sun, 24 Dec 2006 16:43:17 -0600
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: <op.tk25efk9y3d107@office2>

Why is #2291 shown twice under the "New / Reopened Bugs" section?

-Eric

On Sun, 24 Dec 2006 00:05:03 -0600, <exarkun at twistedmatrix.com> wrote:

> Bug summary
> ______________________
> Summary for 2006-12-17 through 2006-12-24
> Bugs opened: 30    Bugs closed: 26  Total open bugs: 801 (+4)
>
> |== Type Changes   |== Priority Changes   |== Component Changes
> |Defect:       +6  |Highest:  +1          |Conch:               -1
> |Enhancement:  +6  |High:     +1          |Core:                +0
> |Task:         -3  |Normal:   +8          |Lore:                +0
>                    |Low:      -1          |Pb:                  +5
>                                           |Release Management:  +1
>                                           |Runner:              +1
>                                           |Trial:               +0
>                                           |Web2:                +2
>                                           |Words:               +1
>
>
> New / Reopened Bugs
> ______________________
>                     ===== Highest =====
> [#2301] Improve API documentation for twisted/lore/tree.py (opened by  
> exarkun) (CLOSED, fixed)
>     enhancement     lore       http://twistedmatrix.com/trac/ticket/2301
>
> [#2303] setUpClass isn't run on subclasses if it already ran on  
> superclass (opened by jknight)
>     defect          trial      http://twistedmatrix.com/trac/ticket/2303
>
> [#2309] trial man page incorrectly explains --coverage behaviour (opened  
> by jml)
>     defect          trial      http://twistedmatrix.com/trac/ticket/2309
>
> [#2313] procutils.which fails with a KeyError if PATH is not in  
> os.environ (opened by dreid)
>     defect          core       http://twistedmatrix.com/trac/ticket/2313
>
> [#2317] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2317
>
> [#2319] twisted.spread.banana.decode is stateful (opened by exarkun)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2319
>
> [#2125] PB Banana struggles transmitting large ints (opened by engie)  
> (CLOSED, fixed)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2125
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn) (CLOSED, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#2139] test_underUnderPathAlreadyImported and test_listingModules from  
> twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2  
> reactor (opened by exarkun) (CLOSED, fixed)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2139
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn) (CLOSED, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
>                     ===== High =====
> [#2324] _threadedselect.py uses uninformative names and has few  
> docstrings (opened by exarkun)
>     defect          core       http://twistedmatrix.com/trac/ticket/2324
>
> [#2325] _threadedselect.py duplicates tons of code from selectreactor.py  
> (opened by exarkun)
>     defect          core       http://twistedmatrix.com/trac/ticket/2325
>
> [#1083] gtk2reactor thread initialization confuses python-2.3 (opened by  
> loic)
>     defect          core       http://twistedmatrix.com/trac/ticket/1083
>
>                     ===== Normal =====
> [#2302] t.web2.channel.http.HTTPParser deals with HEAD requests  
> incorrectly (opened by ghazel)
>     defect          web2       http://twistedmatrix.com/trac/ticket/2302
>
> [#2304] t.web2.client.http.HTTPClientChannelRequest.connectionLost does  
> nothing (opened by ghazel)
>     defect          web2       http://twistedmatrix.com/trac/ticket/2304
>
> [#2305] twisted/internet/process.py leaks file descriptors when  
> os.fork() raises (opened by exarkun)
>     defect          core       http://twistedmatrix.com/trac/ticket/2305
>
> [#2307] rewrite setup.py so it doesn't os.system() other setup.py  
> scripts (opened by radix)
>     enhancement     release management  
> http://twistedmatrix.com/trac/ticket/2307
>
> [#2308] Test Twisted's release automation (opened by radix)
>     enhancement     release management  
> http://twistedmatrix.com/trac/ticket/2308
>
> [#2310] twisted.spread.banana.b1282int could be faster (opened by  
> exarkun)
>     enhancement     pb         http://twistedmatrix.com/trac/ticket/2310
>
> [#2311] Twisted Perspective Broker anonymous login support (opened by  
> carlosedp) (CLOSED, duplicate)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2311
>
> [#2312] Twisted Perspective Broker anonymous login support (opened by  
> carlosedp)
>     enhancement     pb         http://twistedmatrix.com/trac/ticket/2312
>
> [#2314] t.r.procmon.ProcessMonitor should take an environment dictionary  
> in addProcess (opened by dreid)
>     enhancement     runner     http://twistedmatrix.com/trac/ticket/2314
>
> [#2315] Request to add int8 string support to basic protocols (opened by  
> metcalfc)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2315
>
> [#2316] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger) (CLOSED, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2316
>
> [#2318] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger) (CLOSED, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2318
>
> [#2320] Implement XMPP server-to-server protocols (opened by ralphm)
>     enhancement     words      http://twistedmatrix.com/trac/ticket/2320
>
> [#2321] twisted.test.test_pb.NSPTestCase.tearDown calls stopListening  
> but doesn't return the Deferred (opened by exarkun)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2321
>
> [#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result  
> of stopListening() (opened by jml) (CLOSED, duplicate)
>     defect          core       http://twistedmatrix.com/trac/ticket/2322
>
> [#2323] support deque in objgrep (opened by glyph)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2323
>
>                     ===== Low =====
> [#2306] Possible error in documentation, in defer.html (opened by roup)  
> (CLOSED, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2306
>
>
>
> Closed Bugs
> ______________________
>                     ===== Highest =====
> [#2300] Remove trailing whitespace from Python files (opened by jml,  
> closed by jml, wontfix)
>     task            core       http://twistedmatrix.com/trac/ticket/2300
>
> [#2301] Improve API documentation for twisted/lore/tree.py (opened by  
> exarkun, closed by exarkun, fixed)
>     enhancement     lore       http://twistedmatrix.com/trac/ticket/2301
>
> [#2125] PB Banana struggles transmitting large ints (opened by engie,  
> closed by exarkun, fixed)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2125
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn, closed by teratorn, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#2024] trial --dry-run fails with real test_suites, because pyunit  
> suites don't have names (opened by spiv, closed by jml, fixed)
>     defect          trial      http://twistedmatrix.com/trac/ticket/2024
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn, closed by teratorn, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#2137] Pointer for end-users to the new location of the Qt reactor  
> (opened by exarkun, closed by exarkun, fixed)
>     task            core       http://twistedmatrix.com/trac/ticket/2137
>
> [#2292] AMP error propagation does not work on subclasses (opened by  
> htj, closed by glyph, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2292
>
> [#2125] PB Banana struggles transmitting large ints (opened by engie,  
> closed by exarkun, fixed)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2125
>
> [#2139] test_underUnderPathAlreadyImported and test_listingModules from  
> twisted.test.test_modules.(Zip)PathModificationTest fail with Gtk2  
> reactor (opened by exarkun, closed by glyph, fixed)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2139
>
> [#2286] abstract.FileDescriptor calls pauseProducing even if producer is  
> not streaming (opened by zseil, closed by glyph, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2286
>
> [#2291] Zshcomp needs various improvements including test coverage  
> (opened by teratorn, closed by teratorn, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2291
>
> [#1835] make main setup.py work with 'build' subcommand (opened by  
> radix, closed by radix, fixed)
>     defect          release management  
> http://twistedmatrix.com/trac/ticket/1835
>
>                     ===== High =====
> [#1083] gtk2reactor thread initialization confuses python-2.3 (opened by  
> loic, closed by letrigre, )
>     defect          core       http://twistedmatrix.com/trac/ticket/1083
>
> [#811 ] Race condition in streaming producers means producer may never  
> be unpaused (opened by itamarst, closed by glyph, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/811
>
> [#677 ] widgets don't show with wxreactor and xrc (opened by acapnotic,  
> closed by itamarst, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/677
>
>                     ===== Normal =====
> [#2311] Twisted Perspective Broker anonymous login support (opened by  
> carlosedp, closed by carlosedp, duplicate)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/2311
>
> [#2316] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger, closed by bgranger, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2316
>
> [#2318] Bug in how pb handles synchronous pb.Errors in remote_foo  
> methods (opened by bgranger, closed by bgranger, duplicate)
>     defect          pb         http://twistedmatrix.com/trac/ticket/2318
>
> [#1770] Reactor for Qt4 using PyQt4 (opened by grudy, closed by exarkun,  
> wontfix)
>     enhancement     core       http://twistedmatrix.com/trac/ticket/1770
>
> [#2322] twisted.test.test_pb.NSPTestCase.tearDown should return result  
> of stopListening() (opened by jml, closed by jml, duplicate)
>     defect          core       http://twistedmatrix.com/trac/ticket/2322
>
> [#2174] Error in the PullProducer doc (opened by misto, closed by glyph,  
> fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2174
>
> [#1942] Fix IOCP buildslave (opened by exarkun, closed by teratorn,  
> fixed)
>     task            core       http://twistedmatrix.com/trac/ticket/1942
>
> [#619 ] wxPython doesn't render interface components (opened by  
> sdeerwester, closed by itamarst, fixed)
>     enhancement     conch      http://twistedmatrix.com/trac/ticket/619
>
>                     ===== Low =====
> [#388 ] Tests code coverage display for Twisted (opened by itamarst,  
> closed by exarkun, wontfix)
>     enhancement     trial      http://twistedmatrix.com/trac/ticket/388
>
> [#2306] Possible error in documentation, in defer.html (opened by roup,  
> closed by exarkun, fixed)
>     defect          core       http://twistedmatrix.com/trac/ticket/2306
>
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From twisted at ralphm.ik.nu  Sun Dec 24 16:13:43 2006
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Mon, 25 Dec 2006 00:13:43 +0100
Subject: [Twisted-Python] Weekly Bug Summary
In-Reply-To: <op.tk25efk9y3d107@office2>
References: <op.tk25efk9y3d107@office2>
Message-ID: <20061224231343.GA63002@ik.nu>

On Sun, Dec 24, 2006 at 04:43:17PM -0600, Eric Mangold wrote:
> Why is #2291 shown twice under the "New / Reopened Bugs" section?

It has been reopened twice this week :-)

-- 
Groetjes,

ralphm



From twisted at koen.nu  Mon Dec 25 09:56:05 2006
From: twisted at koen.nu (Koen Bok)
Date: Mon, 25 Dec 2006 17:56:05 +0100
Subject: [Twisted-Python] Simple PB Example
Message-ID: <84535D81-9804-4DAB-914C-6B5F89C5C0DB@koen.nu>

Dear all,

Happy christmas!

I am trying to get the hang of Twisted and while the documentation is  
pretty clear I cannot figure out some basic things. I tried to build  
a little project to practise. I would love some hints, and I am not  
afraid to read.

Basically I want to write a simple server (Public Broker) which keeps  
a list of all connected clients. When one client sends a message to  
the server, I want the server to relay that message to other specific  
clients, but only those (yes basically an IM server).

So let's say I have a server and three clients:

server: Hello, I am here!
client #1: Yep, me too can I connect, I'm a girl?
server: Sure, I'll add you to my clients list!
client #2: Can I go too, I'm a guy?
server: Yep, you are client number two on my list...
client #3: Me too, me too, I am a guy!
server: Fine, but now let's do some stuff...
client #2: Server, can you please tell all clients that are girls  
that I'd like to see em after this session?
server: Let's find out who are female clients in my list and send  
them the message. Consider it done!
client #1: Thanks for the message, I'll see if I have time...

In the end client #2 would date client #1...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061225/5226e626/attachment.html>

From hxianping at gmail.com  Sat Dec 30 00:35:57 2006
From: hxianping at gmail.com (Steve Han)
Date: Sat, 30 Dec 2006 15:35:57 +0800
Subject: [Twisted-Python] I am not sure where is best to post?
Message-ID: <702805a90612292335i4ec1b3d4r96b7b6cf417abad0@mail.gmail.com>

twisted-python/twisted-python-request or twisted-web??

My questions are about programming-related.

Thanks a lot.
-- 
Steve Han
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061230/1dd1fda2/attachment.html>

From radix at twistedmatrix.com  Sat Dec 30 01:14:41 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 30 Dec 2006 03:14:41 -0500
Subject: [Twisted-Python] I am not sure where is best to post?
In-Reply-To: <702805a90612292335i4ec1b3d4r96b7b6cf417abad0@mail.gmail.com>
References: <702805a90612292335i4ec1b3d4r96b7b6cf417abad0@mail.gmail.com>
Message-ID: <60ed19d40612300014v18f6e4c9nc3c6e079163b029b@mail.gmail.com>

On 12/30/06, Steve Han <hxianping at gmail.com> wrote:
> twisted-python/twisted-python-request or twisted-web??

twisted-python-request isn't a list, it's just the management
interface to the twisted-python list.

twisted-python and twisted-web are both mailing lists for programming;
twisted-web is specifically for web-related discussion, whereas
twisted-python is general discussion for any twisted-related
programming.



-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/



From hxianping at gmail.com  Sat Dec 30 19:34:49 2006
From: hxianping at gmail.com (Steve Han)
Date: Sun, 31 Dec 2006 10:34:49 +0800
Subject: [Twisted-Python] script can be used as namespace?
Message-ID: <702805a90612301834q38ffef77l9c79e1afeaf540fa@mail.gmail.com>

I am working on an example:

from twisted.internet.app import Application
from twisted.internet.protocol import Protocol, Factory

class Fibonacci(Protocol):
    """Serve a sequence of Fibonacci numbers to all requesters"""


def dataReceived(self, data):
        self.factory.new
 = self.factory.a + self.factory.b
        self.transport.write('%d' % self.factory.new)
        self.factory.a = self.factory.b

self.factory.b = self.factory.new

def main():
    import fib_server    # Use script as namespace

    f = Factory()
    f.protocol = fib_server.Fibonacci
    f.a, f.b = 1, 1
    application = Application("Fibonacci")

    application.listenTCP(8888, f)
    application.save()

if'__main__' == __name__:

    main()

I have questions as the following:


   1. Is application.save( ) that make Fibonacci.tap file?
    2. testing on "twistd -f Fibonacci.tap" got message "Failed to load
   application: No module named fib_server".Can we use script as namesp?

-- 
Steve Han
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20061231/46d71be8/attachment.html>

From exarkun at divmod.com  Sat Dec 30 19:52:24 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 30 Dec 2006 21:52:24 -0500
Subject: [Twisted-Python] script can be used as namespace?
In-Reply-To: <702805a90612301834q38ffef77l9c79e1afeaf540fa@mail.gmail.com>
Message-ID: <20061231025224.11447.464390053.divmod.quotient.3113@ohm>

On Sun, 31 Dec 2006 10:34:49 +0800, Steve Han <hxianping at gmail.com> wrote:
>I am working on an example:
>
>from twisted.internet.app import Application
>from twisted.internet.protocol import Protocol, Factory
>
>class Fibonacci(Protocol):
>    """Serve a sequence of Fibonacci numbers to all requesters"""
>
>
>def dataReceived(self, data):
>        self.factory.new
>= self.factory.a + self.factory.b
>        self.transport.write('%d' % self.factory.new)
>        self.factory.a = self.factory.b
>
>self.factory.b = self.factory.new
>
>def main():
>    import fib_server    # Use script as namespace
>
>    f = Factory()
>    f.protocol = fib_server.Fibonacci
>    f.a, f.b = 1, 1
>    application = Application("Fibonacci")
>
>    application.listenTCP(8888, f)
>    application.save()
>
>if'__main__' == __name__:
>
>    main()
>
>I have questions as the following:
>
>
>   1. Is application.save( ) that make Fibonacci.tap file?

Yes.  However, this is not the recommended way to create TAP files,
and TAP files themselves aren't even very highly recommended any more.
You may want to spend your time look at mktap plugins, .tac files, or
twistd plugins (which will be available in Twisted 2.5, which will be out
shortly).

>    2. testing on "twistd -f Fibonacci.tap" got message "Failed to load
>   application: No module named fib_server".Can we use script as namesp?

You need to fix your PYTHONPATH so that fib_server is importable.

http://python.org/doc/tut/node8.html#SECTION008110000000000000000

Jean-Paul



From sflist at ihonk.com  Sat Dec 30 22:30:50 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Sat, 30 Dec 2006 21:30:50 -0800
Subject: [Twisted-Python] script can be used as namespace?
In-Reply-To: <20061231025224.11447.464390053.divmod.quotient.3113@ohm>
References: <20061231025224.11447.464390053.divmod.quotient.3113@ohm>
Message-ID: <1167543050.2328.6.camel@lothar>

On Sat, 2006-12-30 at 21:52 -0500, Jean-Paul Calderone wrote:
> Yes.  However, this is not the recommended way to create TAP files,
> and TAP files themselves aren't even very highly recommended any more.
> You may want to spend your time look at mktap plugins, .tac files, or
> twistd plugins (which will be available in Twisted 2.5, which will be out
> shortly).

When 2.5 is released, what will be the preferred method of daemonizing
Twisted apps on *nix? Still .tac?

Steve




From hanwoody at gmail.com  Sun Dec 31 02:11:28 2006
From: hanwoody at gmail.com (William Hanwoody)
Date: Sun, 31 Dec 2006 17:11:28 +0800
Subject: [Twisted-Python] pidfile in twistd
Message-ID: <200612311711.28478.hanwoody@gmail.com>

when I run a service through twistd
# twistd --pidfile service.pid  -y service.py

in logfile, I see:
 Warning: No permission to delete pid file

Because I run this service as ordinary user, not root:
application = service.Application("serviceMine", uid, gid)
, but the owner of pidfile is still root, not ordinary user!
so when I shutdown this service, this pid file cannot be deleted!

-- 
_______________________________________________________________
William Hanwoody                             hanwoody at gmail.com

A senior Linux engineer, like system integrate
My blog - hanwoody.livejournal.com
_______________________________________________________________



From exarkun at divmod.com  Sun Dec 31 07:21:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 31 Dec 2006 09:21:32 -0500
Subject: [Twisted-Python] pidfile in twistd
In-Reply-To: <200612311711.28478.hanwoody@gmail.com>
Message-ID: <20061231142132.11447.1842070699.divmod.quotient.3351@ohm>

On Sun, 31 Dec 2006 17:11:28 +0800, William Hanwoody <hanwoody at gmail.com> wrote:
>when I run a service through twistd
># twistd --pidfile service.pid  -y service.py
>
>in logfile, I see:
> Warning: No permission to delete pid file
>
>Because I run this service as ordinary user, not root:
>application = service.Application("serviceMine", uid, gid)
>, but the owner of pidfile is still root, not ordinary user!
>so when I shutdown this service, this pid file cannot be deleted!
>

File deletion is allowed or disallowed based on permissions on the
directory containing the file, not the permissions of the file itself.

As long as your user has write permission to the directory containing
service.pid twistd should be able to clean it up.

Jean-Paul



