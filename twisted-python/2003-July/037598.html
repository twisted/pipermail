<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Woven LivePage sendScript works with some scripts but not others
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%20LivePage%20sendScript%20works%20with%20some%20scripts%20but%20not%20others&In-Reply-To=%3C682260F0-B8CB-11D7-951E-000A95864FC4%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037595.html">
   <LINK REL="Next"  HREF="037600.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Woven LivePage sendScript works with some scripts but not others</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%20LivePage%20sendScript%20works%20with%20some%20scripts%20but%20not%20others&In-Reply-To=%3C682260F0-B8CB-11D7-951E-000A95864FC4%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Woven LivePage sendScript works with some scripts but not others">dp at twistedmatrix.com
       </A><BR>
    <I>Thu Jul 17 20:56:19 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037595.html">[Twisted-Python] Woven LivePage sendScript works with some scripts but not others
</A></li>
        <LI>Next message (by thread): <A HREF="037600.html">[Twisted-Python] Woven LivePage sendScript works with some scripts but not others
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37598">[ date ]</a>
              <a href="thread.html#37598">[ thread ]</a>
              <a href="subject.html#37598">[ subject ]</a>
              <a href="author.html#37598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday, July 17, 2003, at 5:37PM, Tim Andrews wrote:

&gt;<i>
</I>&gt;<i> Hi twisted,
</I>&gt;<i>
</I>&gt;<i> I'm trying to use LivePage to send some script to a web page.
</I>&gt;<i>
</I>&gt;<i> All works well if the script is as per the manual example, ie
</I>&gt;<i> sendScript(&quot;alert('Hello world!')&quot;)
</I>&gt;<i> will pop up a window as expected.
</I>&gt;<i>
</I>&gt;<i> However, if i try a script like &quot;document.all.fred.innerHTML='FRED'&quot; I 
</I>&gt;<i> get
</I>&gt;<i> an error on the page &quot;Error: document.all.fred is null or not an 
</I>&gt;<i> object&quot;. I
</I>&gt;<i> know the script is okay because if it is on the on the page it will 
</I>&gt;<i> work.
</I>&gt;<i>
</I>&gt;<i> Any clues?
</I>
This is *probably* because, with the version of LivePage you are 
currently using, the JavaScript is evaluated within the context of the 
Output IFrame. I'm not a regular in-browser javascript expert, but 
something like top.document.all.fred or parent.document.all.fred might 
work better for you.

By the way, if you are trying to do your own innerHTML setting, don't. 
Woven LivePage includes a cross-browser abstraction of this sort of 
in-browser DOM mutation. Just write your Widgets in a way that they 
will always render themselves the way you want them to based on the 
Model data and the state of the session. (For example, you could set 
session.color = 'blue' and it would be different from someone else who 
has session.color = 'green')

Then, use one of the MVC notification APIs to cause Woven to re-render 
your Widget and send the appropriate, abstract JavaScript to the 
browser:

someWidgetReference. modelChanged({'request': request})

or

someModelReference.notify({'request': request})


Why the hideous dictionary-with-the-request-in-it? Ancient historical 
reasons which are entirely irrelevant now. I will change it to simply 
take the request asap, but for now, just do that :-)

dp



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037595.html">[Twisted-Python] Woven LivePage sendScript works with some scripts but not others
</A></li>
	<LI>Next message (by thread): <A HREF="037600.html">[Twisted-Python] Woven LivePage sendScript works with some scripts but not others
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37598">[ date ]</a>
              <a href="thread.html#37598">[ thread ]</a>
              <a href="subject.html#37598">[ subject ]</a>
              <a href="author.html#37598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
