<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] the right way of unit testing protocols
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20the%20right%20way%20of%20unit%20testing%20protocols&In-Reply-To=000001c356cc%243d768340%245591013d%40thilakra">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005266.html">
   <LINK REL="Next"  HREF="005280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] the right way of unit testing protocols</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20the%20right%20way%20of%20unit%20testing%20protocols&In-Reply-To=000001c356cc%243d768340%245591013d%40thilakra"
       TITLE="[Twisted-Python] the right way of unit testing protocols">itamar at itamarst.org
       </A><BR>
    <I>Wed Jul 30 15:10:39 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005266.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
        <LI>Next message: <A HREF="005280.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5267">[ date ]</a>
              <a href="thread.html#5267">[ thread ]</a>
              <a href="subject.html#5267">[ subject ]</a>
              <a href="author.html#5267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 31 Jul 2003 00:26:07 +0530
Jeethu Rao &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jeethur at sancharnet.in</A>&gt; wrote:

&gt;<i> What is the right way of unit testing protocols in twisted ?
</I>&gt;<i> Currently, I'm just subclassing my protocol with unittest.TestCase
</I>&gt;<i> And directly calling the dataRecieved with a string and am checking
</I>&gt;<i> If the overridden callbacks (like dataRecieved) are called.
</I>
That is indeed a good way to test.

&gt;<i> The tests pass, but back when I was writing threaded servers,
</I>&gt;<i> I would actually setup a server on localhost and would connect to
</I>&gt;<i> The server from another thread, for unit testing. That gives me a lot
</I>&gt;<i> more confidence.
</I>
And doing this sort of testing in addition is also a good idea.

&gt;<i> I know that I can setup two reactors, for the client and the server
</I>&gt;<i> and then try to make them talk, But I'm sure there's a shortcut.
</I>&gt;<i> I just could'nt figure out the test suites from the Twisted sources.
</I>
You only need one reactor. (And twisted doesn't support multiple
reactors at the moment anyway.) So don't look for that in the code. Just
look at how the tests are done.

In general you'd just do some variant on:

 reactor.listenTCP(1234, myServerFactory)
 reactor.connectTCP(&quot;127.0.0.1&quot;, 1234, myClientFactory):
 while someConditionIsn'tSet:
     reactor.iterate()
 # at this point some exchange should have finished successfully


-- 
Itamar Shtull-Trauring    <A HREF="http://itamarst.org/">http://itamarst.org/</A>
<A HREF="http://www.zoteca.com">http://www.zoteca.com</A> -- Python &amp; Twisted consulting


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005266.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
	<LI>Next message: <A HREF="005280.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5267">[ date ]</a>
              <a href="thread.html#5267">[ thread ]</a>
              <a href="subject.html#5267">[ subject ]</a>
              <a href="author.html#5267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
