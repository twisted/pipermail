<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] wxPython locking the event processing?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20wxPython%20locking%20the%20event%20processing%3F&In-Reply-To=%3C3F074F36.4030403%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037400.html">
   <LINK REL="Next"  HREF="037404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] wxPython locking the event processing?</H1>
    <B>Chris Liechti</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20wxPython%20locking%20the%20event%20processing%3F&In-Reply-To=%3C3F074F36.4030403%40gmx.net%3E"
       TITLE="[Twisted-Python] wxPython locking the event processing?">cliechti at gmx.net
       </A><BR>
    <I>Sat Jul  5 16:20:38 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037400.html">[Twisted-Python] wxPython locking the event processing?
</A></li>
        <LI>Next message (by thread): <A HREF="037404.html">[Twisted-Python] wxPython locking the event processing?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37401">[ date ]</a>
              <a href="thread.html#37401">[ thread ]</a>
              <a href="subject.html#37401">[ subject ]</a>
              <a href="author.html#37401">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Patrik Blommaskog wrote:
&gt;<i> IÂ´ve got my app working now with the threading method that Philippe
</I>&gt;<i> suggested. 
</I>
it was me that originaly posted that code on this list. and have to say 
that it contains a minor bug. startRunning must be called in the same 
thread as as twisted.mainloop will (otherwise, some nasty things will 
happen, like callFromThread() or stop() not working without an external 
event).
just calling &quot;reactor.run()&quot; in a thread will fail because of the signal 
handlers have to be installed in the main thread, thus these have to be 
disabled.
the stop function can also be improved, so that it does not fail when 
it's called more than once. (wxYield does not like recursive calls to 
itself ;-)

def startTwistedAndWx(app):
     &quot;&quot;&quot;Start twisteds mainloop it its own thread,
     run the wx mainloop in the main thread&quot;&quot;&quot;
     global twistedthread, twistedrunning, twistedapp
     twistedapp = app
     twistedthread = threading.Thread(
         target=reactor.run,
         kwargs={'installSignalHandlers':0}
     )
     twistedthread.start()
     twistedrunning = 1
     app.MainLoop()
     stopTwisted()

def stopTwisted():
     &quot;&quot;&quot;stop the twisted thread, wx still runs&quot;&quot;&quot;
     global twistedthread, twistedrunning
     if twistedrunning:
         twistedrunning = 0
         reactor.stop()
         #wait until reactor has shut down
         while twistedthread.isAlive():
             wxYield()



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037400.html">[Twisted-Python] wxPython locking the event processing?
</A></li>
	<LI>Next message (by thread): <A HREF="037404.html">[Twisted-Python] wxPython locking the event processing?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37401">[ date ]</a>
              <a href="thread.html#37401">[ thread ]</a>
              <a href="subject.html#37401">[ subject ]</a>
              <a href="author.html#37401">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
