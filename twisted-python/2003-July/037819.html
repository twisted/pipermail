<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] the right way of unit testing protocols
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20the%20right%20way%20of%20unit%20testing%20protocols&In-Reply-To=%3C20030731194355.GA32069%40lapdog%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037809.html">
   <LINK REL="Next"  HREF="037824.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] the right way of unit testing protocols</H1>
    <B>Tommi Virtanen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20the%20right%20way%20of%20unit%20testing%20protocols&In-Reply-To=%3C20030731194355.GA32069%40lapdog%3E"
       TITLE="[Twisted-Python] the right way of unit testing protocols">tv at twistedmatrix.com
       </A><BR>
    <I>Thu Jul 31 13:43:55 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037809.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
        <LI>Next message (by thread): <A HREF="037824.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37819">[ date ]</a>
              <a href="thread.html#37819">[ thread ]</a>
              <a href="subject.html#37819">[ subject ]</a>
              <a href="author.html#37819">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jul 31, 2003 at 11:03:07AM -0400, Itamar Shtull-Trauring wrote:
&gt;<i> &gt; 	Opening TCP sockets in unit tests is just not _unit_ testing
</I>&gt;<i> &gt; 	in my book. Please don't do it in unit tests. It just makes it
</I>&gt;<i> &gt; 	harder to run your unit tests in varying environments. (Who
</I>&gt;<i> &gt; 	says I allow you to bind to port 1234? Who says it's free?
</I>&gt;<i> &gt; 	Who says I allow you to listen *at all*?)
</I>&gt;<i> 
</I>&gt;<i> Most of Twisted's unittests listen on 0 and then figure out which port
</I>&gt;<i> was bound to. 
</I>
	Which is mostly the reason why I'm bitch about it on _this_
	mailing list.

	I dislike that method. I really do.

	There have been _months_ during which certain twisted unit
	tests randomly fail; many of those have been due to
	interaction with local TCP stack, networking, firewall and
	miscellanous experimental security features.

	I really think unit tests should touch the underlying
	libraries/OS as little as possible. For the cases where you
	really want to test the OS integration, you want to do things
	like stress tests, and for e.g. mail tests where you randomly
	shut down the power to a machine running a stress test, and
	later check that no messages were lost.

-- 
:<i>(){ :|:&amp;};:
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037809.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
	<LI>Next message (by thread): <A HREF="037824.html">[Twisted-Python] the right way of unit testing protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37819">[ date ]</a>
              <a href="thread.html#37819">[ thread ]</a>
              <a href="subject.html#37819">[ subject ]</a>
              <a href="author.html#37819">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
