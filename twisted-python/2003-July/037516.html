<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Woven: access to submodels
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%3A%20access%20to%20submodels&In-Reply-To=%3C20030713100403.17396.qmail%40green.zadka.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037515.html">
   <LINK REL="Next"  HREF="037614.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Woven: access to submodels</H1>
    <B>Moshe Zadka</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%3A%20access%20to%20submodels&In-Reply-To=%3C20030713100403.17396.qmail%40green.zadka.com%3E"
       TITLE="[Twisted-Python] Woven: access to submodels">m at moshez.org
       </A><BR>
    <I>Sun Jul 13 04:04:03 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037515.html">[Twisted-Python] Woven: access to submodels
</A></li>
        <LI>Next message (by thread): <A HREF="037614.html">[Twisted-Python] Woven: access to submodels
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37516">[ date ]</a>
              <a href="thread.html#37516">[ thread ]</a>
              <a href="subject.html#37516">[ subject ]</a>
              <a href="author.html#37516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 13 Jul 2003, Mary &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mary-twisted at puzzling.org</A>&gt; wrote:

&gt;<i>  1. Pure design issue: There still needs to be a query along the lines
</I>&gt;<i>  of &quot;does this author in fact exist?&quot; so that /author/Mary/ generates a
</I>&gt;<i>  list of my articles and /author/Humphrey/ generates an error page. This
</I>&gt;<i>  was the query I was trying to avoid by passing the submodel around --
</I>&gt;<i>  the &quot;get me all posts by Mary&quot; query was always going to be part of
</I>&gt;<i>  IndividualPage.
</I>
Ah, I see. Well, a somewhat thorny issue in current web code [that
we may fix someday in the future, but you're not interested in that]
is that child-getting is synchronous. This means that an easy answer
is currently beyond us. A non-easy way to do that is to hack around:

from twisted.web import resource, server

class MaybeIndividualPage(resource.Resource):

    isLeaf = 1

    def __init__(self, author):
        resource.Resource.__init__(self)
        self.author = author

    def render(self, request):
        def raiseException():
            raise LookupError
        def simulateServer(value):
            if value == server.NOT_DONE_YET:
                return
            request.write(value)
            request.finish()
        query = deferredWhichIsTrueIfExists(self.author).addCallback(
        lambda x: (x or error.NoResource()) and
             IndividualPage(self.author).getChildForRequest(request
                                            ).render(request)).addCallback(
            simulateServer)
        return server.NOT_DONE_YET

Then, in getDynamicChild, return MaybeIndividualPage(author) instead
of IndividualPage(author).

Basically, this is explicitly asyncing the child-getting mechanism
by going through the async-ready render method. I realize it's not
the best-looking code in the world, but it should get the job done.


&gt;<i>  2. More generally, since I'm unfamiliar with the design pattern(s)
</I>&gt;<i>  associated with Woven, what level of information sharing in this sense
</I>&gt;<i>  is acceptable between parents and children? (Pointers to other sources
</I>&gt;<i>  of information would be welcome, since this question is pretty open
</I>&gt;<i>  ended)?
</I>
Well, we don't have any real understanding of this issue either, since
Woven is not old enough. My gut instinct would be towards &quot;pretty high&quot;,
though.

-- 
Moshe Zadka -- <A HREF="http://moshez.org/">http://moshez.org/</A>
Buffy: I don't like you hanging out with someone that... short.
Riley: Yeah, a lot of young people nowadays are experimenting with shortness.
Agile Programming Language -- <A HREF="http://www.python.org/">http://www.python.org/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037515.html">[Twisted-Python] Woven: access to submodels
</A></li>
	<LI>Next message (by thread): <A HREF="037614.html">[Twisted-Python] Woven: access to submodels
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37516">[ date ]</a>
              <a href="thread.html#37516">[ thread ]</a>
              <a href="subject.html#37516">[ subject ]</a>
              <a href="author.html#37516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
