<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Throttling Factory Problem ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Throttling%20Factory%20Problem%20...&In-Reply-To=200307201346.17206.joel.vennin%40wanadoo.fr">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005113.html">
   <LINK REL="Next"  HREF="005117.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Throttling Factory Problem ...</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Throttling%20Factory%20Problem%20...&In-Reply-To=200307201346.17206.joel.vennin%40wanadoo.fr"
       TITLE="[Twisted-Python] Throttling Factory Problem ...">exarkun at intarweb.us
       </A><BR>
    <I>Sun Jul 20 16:25:37 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005113.html">[Twisted-Python] Throttling Factory Problem ...
</A></li>
        <LI>Next message: <A HREF="005117.html">[Twisted-Python] Guard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5115">[ date ]</a>
              <a href="thread.html#5115">[ thread ]</a>
              <a href="subject.html#5115">[ subject ]</a>
              <a href="author.html#5115">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jul 20, 2003 at 01:46:14PM +0200, Jo?l Vennin wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i> 
</I>&gt;<i> Hello all, 
</I>&gt;<i> 
</I>&gt;<i> I'm making an example to limit bandwidth with ThrottlingFactory. I've a server 
</I>&gt;<i> and a client. Client and server make echo. So it's an infinite process. I've 
</I>&gt;<i> limited the bandwith to 1Ko/s.
</I>&gt;<i> 
</I>&gt;<i> The problem is that the client send a lot's of data  (more than the limited 
</I>&gt;<i> bandwidth) during a little time. The server get all the data (more than the 
</I>&gt;<i> limited bandwith) and after each wait a long of time before send/received 
</I>&gt;<i> something.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Maybe i miss something, can you help me.
</I>&gt;<i> 
</I>
  You've not actually made your protocols *respect* the limits being imposed
on it -- they just print out a message and merrily continue on their way.

  One way to do this correctly would be to set a flag in pauseProducing();
when sendSomething() is called and the flag is set, data should be held in a
buffer instead of written to the transport; when resumeProducing() is
called, any data in the buffer should be written to the transport.

  A couple things I'd like to point out: you cannot limit the number of
bytes per unit time you receive this way; to do proper limiting of that, you
need a router sitting somewhere upstream of your connection.  Second, if you
want to foist throttling onto arbitrary protocols/applications, this may not
be the best way to go about it; an external &quot;wrapper&quot; program can be used to
throttle an application or group of applications, such as trickled, may be
easier.  Of course, if you want to force everyone everywhere to use the
throttled version, doing it in-process is probably the only way to go.

  Hope this helps,

  Jp

-- 
&quot;If you find a neighbor in need, you're responsible for serving that
neighbor in need, you're responsible for loving a neighbor just like you'd
like to love yourself.&quot; -- George W. Bush, Sept. 16, 2002
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20030720/1c09cca3/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20030720/1c09cca3/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005113.html">[Twisted-Python] Throttling Factory Problem ...
</A></li>
	<LI>Next message: <A HREF="005117.html">[Twisted-Python] Guard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5115">[ date ]</a>
              <a href="thread.html#5115">[ thread ]</a>
              <a href="subject.html#5115">[ subject ]</a>
              <a href="author.html#5115">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
