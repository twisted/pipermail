<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How Twisted is This?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20Twisted%20is%20This%3F&In-Reply-To=%3CF44179D9-B8B8-11D7-8336-000A95686CD8%40redivi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="037594.html">
   <LINK REL="Next"  HREF="037566.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How Twisted is This?</H1>
    <B>Bob Ippolito</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20Twisted%20is%20This%3F&In-Reply-To=%3CF44179D9-B8B8-11D7-8336-000A95686CD8%40redivi.com%3E"
       TITLE="[Twisted-Python] How Twisted is This?">bob at redivi.com
       </A><BR>
    <I>Thu Jul 17 18:44:14 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037594.html">[Twisted-Python] How Twisted is This?
</A></li>
        <LI>Next message (by thread): <A HREF="037566.html">[Twisted-Python] How Twisted is This?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37596">[ date ]</a>
              <a href="thread.html#37596">[ thread ]</a>
              <a href="subject.html#37596">[ subject ]</a>
              <a href="author.html#37596">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday, Jul 17, 2003, at 19:11 America/New_York, Greg Fortune 
wrote:

&gt;<i> On Thursday 17 July 2003 02:55 am, Tommi Virtanen wrote:
</I>&gt;&gt;<i> On Wed, Jul 16, 2003 at 06:39:09PM -0400, Bob Ippolito wrote:
</I>&gt;&gt;&gt;<i> watch out for when writing a web spider, for example.  It just 
</I>&gt;&gt;&gt;<i> doesn't
</I>&gt;&gt;&gt;<i> make sense to intentionally design something that behaves like:
</I>&gt;&gt;&gt;<i> ______/\___________/\_____ when you really have an extremely
</I>&gt;&gt;&gt;<i> parallelizable task at hand.  Checking site A is in no way dependent 
</I>&gt;&gt;&gt;<i> on
</I>&gt;&gt;&gt;<i> checking site B, so there's no reason to intentionally make them 
</I>&gt;&gt;&gt;<i> happen
</I>&gt;&gt;&gt;<i> at the same time if you know better.  We're not talking about a whole
</I>&gt;&gt;&gt;<i> lot of code here.  Leveraging the fact that 99% of what needs to be
</I>&gt;&gt;&gt;<i> done is glue code between stuff that's already in twisted, a 
</I>&gt;&gt;&gt;<i> prototype
</I>&gt;&gt;&gt;<i> of his application could be easily be done in less than fifty lines
</I>&gt;&gt;&gt;<i> using the scalable approach.  In fact, I think that the &quot;wake up and 
</I>&gt;&gt;&gt;<i> do
</I>&gt;&gt;&gt;<i> stuff every N minutes&quot; approach would actually end up being a longer
</I>&gt;&gt;&gt;<i> and easier to screw up implementation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 	You all should probably read up on what the Nagios project
</I>&gt;&gt;<i> 	thinks about randomizing monitoring intervals. They have a
</I>&gt;&gt;<i> 	stable open source product that can scale reasonably well,
</I>&gt;&gt;<i> 	and have good opinions on that subject.
</I>&gt;<i>
</I>&gt;<i> I'm pretty sure no one is talking about randomizing...  One solution 
</I>&gt;<i> is a
</I>&gt;<i> fixed interval check and the other is a &quot;as needed&quot; check.  The only 
</I>&gt;<i> ways I
</I>&gt;<i> can imagine that a &quot;as needed&quot; check would be more costly is if the 
</I>&gt;<i> monitors
</I>&gt;<i> were queued very frequently and the controller ended up waking 
</I>&gt;<i> up/sleeping
</I>&gt;<i> very very short intervals or if a huge number of monitors were queued 
</I>&gt;<i> with
</I>&gt;<i> start times far into the future and the controller took a long time to 
</I>&gt;<i> search
</I>&gt;<i> the list for the next pending monitor.  An intelligent insertion 
</I>&gt;<i> routine
</I>&gt;<i> could solve the second issue easily and if a five minute check is 
</I>&gt;<i> sufficient,
</I>&gt;<i> I can't imagine the first issue being a problem...
</I>
Randomizing events is a rather good way to prevent collisions.  
Ethernet, for example, uses randomized delays when a collision happens. 
  This is how it can work without the complications of passing a token 
around or what have you.  Random delays are also often used for 
cryptography (I believe OpenSSL does this now) to prevent a certain 
kind of attacks.  As you said, it's not something strictly necessary at 
all for this sort of application, unless a lot of events are queued to 
fire at the same time (which is the issue I brought up, originally).  
Imagine, for example, the application starts up with a database of 
40,000 hosts to check at a 5 minute interval.  If the application 
starts _all_ of them at the same time, you're going to see much worse 
performance than if it scheduled them all with some random offset.  The 
other thing is that it's rather easy to implement, especially with 
Twisted.

Also, switching between sleeping and waking up isn't the worst thing in 
the world - it means network activity is happening (or you're polling, 
which is silly).

-bob



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037594.html">[Twisted-Python] How Twisted is This?
</A></li>
	<LI>Next message (by thread): <A HREF="037566.html">[Twisted-Python] How Twisted is This?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37596">[ date ]</a>
              <a href="thread.html#37596">[ thread ]</a>
              <a href="subject.html#37596">[ subject ]</a>
              <a href="author.html#37596">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
