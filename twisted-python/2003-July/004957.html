<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Is it just me ....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Is%20it%20just%20me%20....&In-Reply-To=20030710095510.GB92306%40mithrandr.moria.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004956.html">
   <LINK REL="Next"  HREF="004959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Is it just me ....</H1>
    <B>Moshe Zadka</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Is%20it%20just%20me%20....&In-Reply-To=20030710095510.GB92306%40mithrandr.moria.org"
       TITLE="[Twisted-Python] Is it just me ....">m at moshez.org
       </A><BR>
    <I>Thu Jul 10 08:41:25 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004956.html">[Twisted-Python] Is it just me ....
</A></li>
        <LI>Next message: <A HREF="004959.html">[Twisted-Python] My pet peeve ugly coding style
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4957">[ date ]</a>
              <a href="thread.html#4957">[ thread ]</a>
              <a href="subject.html#4957">[ subject ]</a>
              <a href="author.html#4957">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, 10 Jul 2003, Neil Blakey-Milner &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">nbm at mithrandr.moria.org</A>&gt; wrote:

&gt;<i> Bannergrab is at <A HREF="http://mithrandr.moria.org/code/bannergrab/">http://mithrandr.moria.org/code/bannergrab/</A> and it is
</I>&gt;<i> a simple SSH/SMTP banner grabber over a (bunch of) network range(s).
</I>&gt;<i> Not much I'd like done with it, but suggestions on what is good/bad
</I>&gt;<i> about it would be nice.  Also, a &quot;so many concurrent clients&quot; manager
</I>&gt;<i> like I used might be useful in general - what do others think?
</I>
It's not that dissimilar with some code we have in mail. Unfortunately,
a bunch of that code is not that great an example code either.

You probably don't want to call reactor.stop(). Ever.
What you want is for Manager to create a deferred which is callbacked
when there are no more slaves or waiting slaves, and let someone
else call reactor.stop() if he should wish it. I'm not exactly sure
if this is the right way, of if it should be converted to an
ApplicationService -- that depends on what you want to do.

For example, I could see an excellent case for just removing the prints
in favour of saving the data and then callback'ing the deferred, and
wrapping it all in a nice function, which can be called like this:

checkHosts(('moshez.org', 25), ('moshez.org', 22)
).addCallback(util.println
).addCallback(lambda _: reactor.stop())

One nit: protocol.slashr means you are changing a class attribute.
That's probably a bad idea. It would be better to inherit:

class UnixMyProtocol(MyProtocol):
    delimiter = '\n'

and do
  if not slashr:
      slave.protocol = UnixMyProtocol
in the relevant places.
-- 
Moshe Zadka -- <A HREF="http://moshez.org/">http://moshez.org/</A>
Buffy: I don't like you hanging out with someone that... short.
Riley: Yeah, a lot of young people nowadays are experimenting with shortness.
Agile Programming Language -- <A HREF="http://www.python.org/">http://www.python.org/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004956.html">[Twisted-Python] Is it just me ....
</A></li>
	<LI>Next message: <A HREF="004959.html">[Twisted-Python] My pet peeve ugly coding style
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4957">[ date ]</a>
              <a href="thread.html#4957">[ thread ]</a>
              <a href="subject.html#4957">[ subject ]</a>
              <a href="author.html#4957">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
