<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Problems with deferred
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problems%20with%20deferred&In-Reply-To=005201c344d7%2468346ef0%240401a8c0%40razor">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004913.html">
   <LINK REL="Next"  HREF="004922.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Problems with deferred</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Problems%20with%20deferred&In-Reply-To=005201c344d7%2468346ef0%240401a8c0%40razor"
       TITLE="[Twisted-Python] Problems with deferred">andrew-twisted at puzzling.org
       </A><BR>
    <I>Mon Jul  7 21:54:22 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004913.html">[Twisted-Python] Problems with deferred
</A></li>
        <LI>Next message: <A HREF="004922.html">[Twisted-Python] Re: IMAP fixes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4915">[ date ]</a>
              <a href="thread.html#4915">[ thread ]</a>
              <a href="subject.html#4915">[ subject ]</a>
              <a href="author.html#4915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jul 08, 2003 at 12:30:43AM +0200, Thomas Weholt wrote:
&gt;<i> 
</I>&gt;<i>     def execute(self):
</I>&gt;<i>         d = defer.Deferred()
</I>&gt;<i>         reactor.callLater(0, self.action)
</I>&gt;<i> 
</I>&gt;<i>         # Log any errors in downloading or processing
</I>&gt;<i>         d.addErrback(log.err)
</I>&gt;<i> 
</I>&gt;<i>         # Reschedule this function
</I>&gt;<i>         d.addBoth(reactor.callLater, self.refreshInterval, self.execute)
</I>
This function is obviously wrong.  It creates a Deferred, but there is no
reference to it outside of this function.  So there is nowhere else in your
code that could get an opportunity to call d.callback or d.errback, and this
function never calls that, thus this Deferred will never fire.  So this
function is equivalent to:

    def execute(self):
        reactor.callLater(0, action)

I'm guessing this isn't what you meant :)

I think you've possibly confused reactor.callLater with
twisted.internet.threads.deferToThread?

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004913.html">[Twisted-Python] Problems with deferred
</A></li>
	<LI>Next message: <A HREF="004922.html">[Twisted-Python] Re: IMAP fixes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4915">[ date ]</a>
              <a href="thread.html#4915">[ thread ]</a>
              <a href="subject.html#4915">[ subject ]</a>
              <a href="author.html#4915">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
