<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Simultaneously client-server app
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Simultaneously%20client-server%20app&In-Reply-To=005401c34779%24667b5700%240202d90a%40its09455">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004976.html">
   <LINK REL="Next"  HREF="004979.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Simultaneously client-server app</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Simultaneously%20client-server%20app&In-Reply-To=005401c34779%24667b5700%240202d90a%40its09455"
       TITLE="[Twisted-Python] Simultaneously client-server app">andrew-twisted at puzzling.org
       </A><BR>
    <I>Fri Jul 11 03:52:38 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="004976.html">[Twisted-Python] Simultaneously client-server app
</A></li>
        <LI>Next message: <A HREF="004979.html">[Twisted-Python] Simultaneously client-server app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4977">[ date ]</a>
              <a href="thread.html#4977">[ thread ]</a>
              <a href="subject.html#4977">[ subject ]</a>
              <a href="author.html#4977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jul 11, 2003 at 04:55:23PM +1000, Minh Luu wrote:
&gt;<i>    Twisted Masters,
</I>&gt;<i>     
</I>&gt;<i>    Has anyone any suggestion on how I might start on the following task using
</I>&gt;<i>    Twisted?
</I>&gt;<i>     
</I>&gt;<i>    What I would like to do is a type of server that will serve a number of
</I>&gt;<i>    clients and itself is a client of other servers. It requires a spool of
</I>&gt;<i>    worker threads to perform time-consuming tasks and database related
</I>&gt;<i>    tasks.  All the network I/O will be handled by a single async thread using
</I>&gt;<i>    select. A simple diagram below demo the model I would like to implement.
</I>[snip pretty diagram]

I doubt threads and select are actually requirements you have, rather, it's
just how you think it should work.  But if you know how it should work, why
ask us?  ;)

There are lots of blanks in your description, so it's hard to guess what you
need to know.  You effectively have asked a couple of very general
questions, so I'll give some general answers, and hope that's enough.  If it
isn't, try being more specific about what you're doing, and I'll try to give
more specific answers.


* Question: *
&quot;What I would like to do is a type of server that will serve a number of
clients and itself is a client of other servers.&quot;

* Answer: *
Network clients and servers in Twisted are pretty easy, and its very good
at them -- have you seen these HOWTOs?
    <A HREF="http://twistedmatrix.com/documents/howto/servers">http://twistedmatrix.com/documents/howto/servers</A>
    <A HREF="http://twistedmatrix.com/documents/howto/clients">http://twistedmatrix.com/documents/howto/clients</A>

Being a server and a client at once is as easy as:
    reactor.listenTCP(1234, MyServerFactory())
    reactor.connectTCP('host', 4321, MyClientFactory())


* Question: *
&quot;...a spool of worker threads to perform time-consuming tasks...&quot;

* Answer: *
Have you seen the &quot;Using Threads&quot; HOWTO?
    <A HREF="http://twistedmatrix.com/documents/howto/threading">http://twistedmatrix.com/documents/howto/threading</A>

The key tool you probably want to use when working with threads is
twisted.internet.threads.deferToThread.

Also, be aware that threads aren't necessarily the only solution to
&quot;time-consuming tasks&quot;, although it would help to know what these tasks
actually are :)


* Question: *
&quot;...and database related tasks&quot;

* Answer: *
The twisted.enterprise package has support for using standard Python DB-API
2.0 compliant modules.  You probably just want to use
twisted.enterprise.adbapi, which is described here:
    <A HREF="http://twistedmatrix.com/documents/howto/enterprise">http://twistedmatrix.com/documents/howto/enterprise</A>

That document is a little out of date, unfortunately -- it doesn't mention
that you can avoid adbapi.Augmentation if you don't like that approach, and
just use adbapi.ConnectionPool directly, although the its API is fairly ugly
and not very Twisted-like.  That module could probably do with an overhaul,
but that's not your problem ;)


I hope I've helped at least a little.

Regards,

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004976.html">[Twisted-Python] Simultaneously client-server app
</A></li>
	<LI>Next message: <A HREF="004979.html">[Twisted-Python] Simultaneously client-server app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4977">[ date ]</a>
              <a href="thread.html#4977">[ thread ]</a>
              <a href="subject.html#4977">[ subject ]</a>
              <a href="author.html#4977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
