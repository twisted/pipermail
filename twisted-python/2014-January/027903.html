<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted names client.getHostbyName dual-stack	operation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20names%20client.getHostbyName%20dual-stack%0A%09operation&In-Reply-To=%3C5BC8F1AD-0A86-4556-BED4-D4032A8433F7%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027901.html">
   <LINK REL="Next"  HREF="027905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted names client.getHostbyName dual-stack	operation</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20names%20client.getHostbyName%20dual-stack%0A%09operation&In-Reply-To=%3C5BC8F1AD-0A86-4556-BED4-D4032A8433F7%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted names client.getHostbyName dual-stack	operation">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Jan  6 02:03:34 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="027901.html">[Twisted-Python] Twisted names client.getHostbyName dual-stack	operation
</A></li>
        <LI>Next message: <A HREF="027905.html">[Twisted-Python] Twisted names client.getHostbyName dual-stack operation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27903">[ date ]</a>
              <a href="thread.html#27903">[ thread ]</a>
              <a href="subject.html#27903">[ subject ]</a>
              <a href="author.html#27903">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 6, 2014, at 12:26 AM, Maciej Wasilak &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wasilak at gmail.com</A>&gt; wrote:

&gt;<i> After Twisted 13.2 announcement I've checked the new HostnameEndpoint implementation to find possible solution (it seems to be dedicated to solve similar problems, but for TCP-based protocols). However it seems to use deferToThread(), and built-in Python getaddrinfo().
</I>
Sadly, the algorithm HostnameEndpoint uses to determine which host to actually send traffic to depends on TCP connection establishment; if you're doing UDP you're on your own with this.

&gt;<i> My questions:
</I>&gt;<i> 1. Is using deferToThread() a preferred solution?
</I>
You kinda have to use it.  getaddrinfo is actually standardized in an RFC, and that RFC defines no asynchronous version of this API.  So if you want proper 6-or-4 behavior, deferToThread(getaddrinfo) is about as well as you can do for the general case.

(Now, in specific cases you can use the twisted.names DNS client and avoid the trip out to your operating system and also out to a thread, but this is for somewhat specialized configurations, only if the getaddrinfo approach is not scaling for you.)

-glyph


</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027901.html">[Twisted-Python] Twisted names client.getHostbyName dual-stack	operation
</A></li>
	<LI>Next message: <A HREF="027905.html">[Twisted-Python] Twisted names client.getHostbyName dual-stack operation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27903">[ date ]</a>
              <a href="thread.html#27903">[ thread ]</a>
              <a href="subject.html#27903">[ subject ]</a>
              <a href="author.html#27903">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
