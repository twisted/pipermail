<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] strategies for tracking down memory issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20strategies%20for%20tracking%20down%20memory%20issues&In-Reply-To=%3CA59B874E-840C-484D-A526-2A9B598F0501%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027943.html">
   <LINK REL="Next"  HREF="027947.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] strategies for tracking down memory issues</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20strategies%20for%20tracking%20down%20memory%20issues&In-Reply-To=%3CA59B874E-840C-484D-A526-2A9B598F0501%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] strategies for tracking down memory issues">glyph at twistedmatrix.com
       </A><BR>
    <I>Fri Jan 17 17:06:54 MST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="027943.html">[Twisted-Python] strategies for tracking down memory issues
</A></li>
        <LI>Next message: <A HREF="027947.html">[Twisted-Python] strategies for tracking down memory issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27946">[ date ]</a>
              <a href="thread.html#27946">[ thread ]</a>
              <a href="subject.html#27946">[ subject ]</a>
              <a href="author.html#27946">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jan 17, 2014, at 12:43 PM, Jonathan Vanasco &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at 2xlp.com</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> some recent changes to a very-happy twisted daemon have resulted in a process that grows in memory until it crashes the box.  boo!
</I>&gt;<i> 
</I>&gt;<i> looking through the code and logs, i'm wondering if i''ve coded things in such a way that defferds or deferrd lists are somehow not getting cleaned up if an unhandled exception occurs. 
</I>&gt;<i> 
</I>&gt;<i> i've been looking through all my former notes and some questions on stack overflow, and I've seen a lot of info on using heapy and other tools to find issues on a function-by-function basis.  
</I>&gt;<i> 
</I>&gt;<i> i'm wondering if anyone has experience in simply monitoring the lifecycle of deferreds ?
</I>
First off, just manhole in and inspect gc.garbage :-).

Second, I've had pretty good luck with &lt;<A HREF="http://www.aminus.net/wiki/Dowser">http://www.aminus.net/wiki/Dowser</A>&gt;, although it would be nice if it were a little easier to set up without writing a weird little custom code hook and having to decide where to put it.

However, you can sort reachable objects by count and type, so you can see which of your classes or Twisted's classes are hanging around in memory and that will usually very quickly give you an idea of where the issue might be.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140117/c035de1b/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140117/c035de1b/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4124 bytes
Desc: not available
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20140117/c035de1b/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20140117/c035de1b/attachment.bin</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027943.html">[Twisted-Python] strategies for tracking down memory issues
</A></li>
	<LI>Next message: <A HREF="027947.html">[Twisted-Python] strategies for tracking down memory issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27946">[ date ]</a>
              <a href="thread.html#27946">[ thread ]</a>
              <a href="subject.html#27946">[ subject ]</a>
              <a href="author.html#27946">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
