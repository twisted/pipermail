<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] configuration usecases
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20configuration%20usecases&In-Reply-To=E14zAQ5-0003M2-00%40darjeeling">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000082.html">
   <LINK REL="Next"  HREF="000084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] configuration usecases</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20configuration%20usecases&In-Reply-To=E14zAQ5-0003M2-00%40darjeeling"
       TITLE="[Twisted-Python] configuration usecases">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon May 14 03:03:02 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000082.html">[Twisted-Python] configuration usecases
</A></li>
        <LI>Next message: <A HREF="000084.html">[Twisted-Python] userinfo, etc, for twisted.ftp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83">[ date ]</a>
              <a href="thread.html#83">[ thread ]</a>
              <a href="subject.html#83">[ subject ]</a>
              <a href="author.html#83">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sunday 13 May 2001 23:57, you wrote:
&gt;<i> 1. Selector
</I>&gt;<i>    -- a selector will have exactly one configurable parameter:
</I>&gt;<i>       an array of things which conform to the server interface,
</I>&gt;<i>       and an array of things which conform to the delayed interface
</I>
I have to apologise for my design here.  We ought to be pickling (jellying? 
^_^) ServerSets, not Selectors.  (After all, a GTK selector is a different 
class than a regular selector, which means it's not possible to read in a 
selector to a GTK app, or merge two selectors together, without some 
hackery.)  Also, &quot;Selector&quot; conjures up images of Smalltalk and Objective C 
which are wholly inappropriate, as I was not aware of that use of terminology 
when I named it :)

So, to break down this use-case further, a user wishes to configure a set of 
servers.  They can perform one of 4 actions (keep in mind I'm thinking from 
the user/UI perspective, *not* the perspective of the actual config system 
code)

 * view a list of servers currently in the set
 * add a server to the set (this is a big one)
 * remove a server from the set
 * configure a server in that set

these correspond roughly to operations on dictionaries (assuming that 
ServerSets ; roughly,

--------
for servername, server in serverset.items():
    display(servername, server)
----
newServer = somehowCreateAServer()
servers[newServerName] = newServer
----
del servers[someServerName]
----
foo = servers[someServerName]
doConfiguration(foo)
--------


&gt;<i> 2. POP3 Server
</I>&gt;<i>    -- (optionally) a name, a port and something that conforms to the
</I>&gt;<i>    &quot;dictionary&quot; interface (.has_key, [], .get which are consistent)
</I>&gt;<i>    where the keys are strings, and the values are things that
</I>&gt;<i>    conform to the domain interface, and to the POP3 domain extensions
</I>&gt;<i>    (authenticateAPOPUser)
</I>
I think that we're saying similiar things here, again -- dictionary 
operations.

&gt;<i> 3. DomainDictionary
</I>&gt;<i>    -- contents, a mapping of strings to things conforming to the domain
</I>&gt;<i>    interface
</I>
Again, a dictionary...

&gt;<i> 4. MaildirDbmDomain
</I>&gt;<i>    -- add a user/password, remove a user, change a password
</I>
Looks similiar again, &quot;change a password&quot; being similiar to &quot;configure a 
sub-element&quot;... presumably when we have more kinds of users (e.g. the &quot;run a 
shellscript&quot; variety) this will be different.

Presumably a User is a username/password combo (changing the username may 
require some monkeying, since that's also the key that it's stored in the 
domain as); but may be arbitrarily complex, as users do more complex things 
(frex, a web-story-posting interface through email).

&gt;<i> 5. HTTPServer
</I>&gt;<i>    -- something conforming to the resource interface
</I>
This again will probably need some restructuring.  Shouldn't inherit from 
TCPServer, etc.  So &quot;add/remove a port to listen on&quot; will probably be an 
additional case.

&gt;<i> 6. FolderResource
</I>&gt;<i>    -- a mapping of strings to resources, and all those of DataResource
</I>
I don't see any reason why all of them have to be DataResources...?  &quot;Any 
non-abstract subclass of Resource&quot; seems more reasonable.

&gt;<i> 7. DataResource
</I>&gt;<i>    -- code (an int), headers (a mapping of strings to strings) and
</I>&gt;<i>    the data (a long-string)
</I>
I think we're missing FileResource. That encompasses a few other things (a 
mapping of file extensions to MIME-types and processor resources, for 
example), but again, that's just another hash of either strings or classes.

&gt;<i> 8. TelnetServer
</I>&gt;<i>    -- username, password
</I>
Finally, a simple form interface, alone :)

Most of the things that we're talking about here have either an interface 
that specifies some attributes (e.g. a dictionary with a fixed set of string 
keys) or a dictionary which, as far as these cases are concerned, is always 
keyed by strings, and may have values which are either strings, classes, or 
instances of some fixed part of the inheritance (whether through __bases__ or 
__implements__) heirarchy, rooted at a particular class (or interface).

So, having contributed what I can to the discussion of use cases -- I don't 
see that the previous proposal solves this issue in an elegant way; it seems 
like all the things here that require a &quot;dict&quot; parameter are not well-served 
by the getParameters/setParameter interface; the app code will have to 
decompose a &quot;set&quot; of the DictParameter in question by doing a comparison of 
what was there before and what is there now, into a set of add/remove 
operations (in, I might add, indeterminate order).  Since most of both of our 
examples were these sorts of things, it doesn't seem well optimized for the 
common case; although I believe I'm missing something.

-- 
                      ______      __   __  _____  _     _
                     |  ____ |      \_/   |_____] |_____|
                     |_____| |_____  |    |       |     |
                     @ t w i s t e d m a t r i x  . c o m
                     <A HREF="http://twistedmatrix.com/users/glyph">http://twistedmatrix.com/users/glyph</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000082.html">[Twisted-Python] configuration usecases
</A></li>
	<LI>Next message: <A HREF="000084.html">[Twisted-Python] userinfo, etc, for twisted.ftp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#83">[ date ]</a>
              <a href="thread.html#83">[ thread ]</a>
              <a href="subject.html#83">[ subject ]</a>
              <a href="author.html#83">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
