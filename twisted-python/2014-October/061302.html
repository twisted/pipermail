<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Client Logic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Client%20Logic&In-Reply-To=%3C86239168-B127-4EDD-89CC-B1AAA8F94D9C%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="028839.html">
   <LINK REL="Next"  HREF="061321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Client Logic</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Client%20Logic&In-Reply-To=%3C86239168-B127-4EDD-89CC-B1AAA8F94D9C%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Client Logic">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Oct  7 22:58:28 MDT 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="028839.html">[Twisted-Python] Client Logic
</A></li>
        <LI>Next message (by thread): <A HREF="061321.html">[Twisted-Python] client logic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61302">[ date ]</a>
              <a href="thread.html#61302">[ thread ]</a>
              <a href="subject.html#61302">[ subject ]</a>
              <a href="author.html#61302">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Oct 6, 2014, at 5:16 PM, Benjamin Schollnick &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">bschollnick at gmail.com</A>&gt; wrote:

&gt;<i> Now the client works right now, but I’m concerned that I can’t figure out how to immediately read for a reply packet from the server.
</I>
First, if you want to &quot;immediately&quot; do anything, you really need to delete that &quot;time.sleep(.5)&quot; line from your code.  It will block the whole reactor from getting work done :).

&gt;<i> For example, when I send the Set_SiteCode packet, I may receive a reply.  
</I>&gt;<i> 
</I>&gt;<i> But how would that occur in the Twisted framework?
</I>
dataReceived will be called with the data when it arrives.  If you're expecting the data that is being sent to be a reply to some message, you should have the code that sends that message return a Deferred; that's what Deferreds are for, representing request/response patterns.

&gt;<i> In my testing the dataReceived function is not being called, so I can’t trap it there, plus I’m not sure how I would figure that logic.
</I>
If dataReceived is not getting called, you're not getting data, so no reply has been sent.  You haven't included enough of your program for me to tell why no data is getting sent, though.  Presumably you've got some stuff hooking up your serial port and running the reactor, but without seeing how that works, I can't even guess at what's wrong.

&gt;<i> Can anyone suggest a method to do this?
</I>
dataReceived it is :).

&gt;<i> The second question, as far as I can tell, isn’t very solvable.  I’d like to add a “Press Q to quit” type logic to the code.  But I don’t see a way to do this easily in twisted?  (platform unspecific, but it’s running Mac OS X / Unix right now).
</I>
Where do you want to press &quot;Q&quot;?  Do you mean you want to pop up a GUI, or wait for the user to type a &quot;Q&quot; in a Terminal window, or do you mean you want the thing on the other end of the serial port to send a &quot;Q&quot;?  Also, what is &quot;UNIX&quot;?

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20141007/e7d0a73f/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="028839.html">[Twisted-Python] Client Logic
</A></li>
	<LI>Next message (by thread): <A HREF="061321.html">[Twisted-Python] client logic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#61302">[ date ]</a>
              <a href="thread.html#61302">[ thread ]</a>
              <a href="subject.html#61302">[ subject ]</a>
              <a href="author.html#61302">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
