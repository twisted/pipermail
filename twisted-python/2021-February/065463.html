<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2021.2.0rc1%20Release%20Candidate%0A%20Announcement&In-Reply-To=%3CCAG%3DrPVerO14Q%2Bfwbck%2BnWZmMstonputdBsBbR9zWrUrstK9KpQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065462.html">
   <LINK REL="Next"  HREF="065465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement</H1>
    <B>Craig Rodrigues</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%2021.2.0rc1%20Release%20Candidate%0A%20Announcement&In-Reply-To=%3CCAG%3DrPVerO14Q%2Bfwbck%2BnWZmMstonputdBsBbR9zWrUrstK9KpQ%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement">rodrigc at crodrigues.org
       </A><BR>
    <I>Sat Feb 20 18:36:27 MST 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065462.html">[Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement
</A></li>
        <LI>Next message (by thread): <A HREF="065465.html">[Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65463">[ date ]</a>
              <a href="thread.html#65463">[ thread ]</a>
              <a href="subject.html#65463">[ subject ]</a>
              <a href="author.html#65463">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Feb 20, 2021 at 4:32 PM Richard van der Hoff &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">richard at matrix.org</A>&gt;
wrote:

&gt;<i> (env3)<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">rav at faith</A>:~$ python3
</I>&gt;<i> Python 3.5.2 (default, Oct  7 2020, 17:19:02)
</I>&gt;<i> [GCC 5.4.0 20160609] on linux
</I>&gt;<i> Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
</I>&gt;<i> &gt;&gt;&gt; from twisted.python import log
</I>&gt;<i> Traceback (most recent call last):
</I>&gt;<i>   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/synapse/env3/lib/python3.5/site-packages/twisted/python/log.py&quot;,
</I>&gt;<i> line 20, in &lt;module&gt;
</I>&gt;<i>     from twisted.python import reflect
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/synapse/env3/lib/python3.5/site-packages/twisted/python/reflect.py&quot;,
</I>&gt;<i> line 377, in &lt;module&gt;
</I>&gt;<i>     def _safeFormat(formatter: Union[types.FunctionType, Type[str]], o:
</I>&gt;<i> object) -&gt; str:
</I>&gt;<i>   File &quot;/usr/lib/python3.5/typing.py&quot;, line 552, in __getitem__
</I>&gt;<i>     dict(self.__dict__), parameters, _root=True)
</I>&gt;<i>   File &quot;/usr/lib/python3.5/typing.py&quot;, line 512, in __new__
</I>&gt;<i>     for t2 in all_params - {t1} if not isinstance(t2, TypeVar)):
</I>&gt;<i>   File &quot;/usr/lib/python3.5/typing.py&quot;, line 512, in &lt;genexpr&gt;
</I>&gt;<i>     for t2 in all_params - {t1} if not isinstance(t2, TypeVar)):
</I>&gt;<i>   File &quot;/usr/lib/python3.5/typing.py&quot;, line 1077, in __subclasscheck__
</I>&gt;<i>     if super().__subclasscheck__(cls):
</I>&gt;<i>   File &quot;/usr/lib/python3.5/abc.py&quot;, line 225, in __subclasscheck__
</I>&gt;<i>     for scls in cls.__subclasses__():
</I>&gt;<i> TypeError: descriptor '__subclasses__' of 'type' object needs an argument
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>Awww, this is unfortunate.
It looks like our CI on GitHub Actions is testing *Python 3.5.10*.

Over the past year, we have added a lot of type annotations to the
codebase, and it has
been a struggle to still keep things working with Python 3.5, but looks
like between Python 3.5.2 and 3.5.10
there were changes to Python in this area.


On Sat, Feb 20, 2021 at 4:50 PM Richard van der Hoff &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">richard at matrix.org</A>&gt;
wrote:

&gt;<i> It also breaks compat with treq 20.4 and earlier. This may or may not be a
</I>&gt;<i> thing you care about:
</I>&gt;<i>
</I>&gt;<i>   File &quot;/home/rav/work/synapse/synapse/http/client.py&quot;, line 33, in
</I>&gt;<i> &lt;module&gt;
</I>&gt;<i>     import treq
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/rav/work/synapse/env3/lib/python3.8/site-packages/treq/__init__.py&quot;,
</I>&gt;<i> line 5, in &lt;module&gt;
</I>&gt;<i>     from treq.api import head, get, post, put, patch, delete, request
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/rav/work/synapse/env3/lib/python3.8/site-packages/treq/api.py&quot;, line
</I>&gt;<i> 5, in &lt;module&gt;
</I>&gt;<i>     from treq.client import HTTPClient
</I>&gt;<i>   File
</I>&gt;<i> &quot;/home/rav/work/synapse/env3/lib/python3.8/site-packages/treq/client.py&quot;,
</I>&gt;<i> line 11, in &lt;module&gt;
</I>&gt;<i>     from twisted.python.compat import _PY3, unicode
</I>&gt;<i> ImportError: cannot import name '_PY3' from 'twisted.python.compat'
</I>&gt;<i> (unknown location)
</I>&gt;<i>
</I>
This has been fixed in newer versions of treq.   Since _PY3 is prefixed by
an underscore,
theoretically it should not be used outside of Twisted......that means
other subprojects of twisted which
are not twisted/twisted!

Well it looks like we are not 100% hiccup free when people upgrade, but
unfortunately, the show
must go on, and I guess people will have to pin to earlier versions of
Python, or upgrade their
code if they run into things like this.

Thank you very much for testing, and providing feedback!!
--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20210220/312c23a8/attachment-0001.htm&gt;
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065462.html">[Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement
</A></li>
	<LI>Next message (by thread): <A HREF="065465.html">[Twisted-Python] Twisted 21.2.0rc1 Release Candidate Announcement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65463">[ date ]</a>
              <a href="thread.html#65463">[ thread ]</a>
              <a href="subject.html#65463">[ subject ]</a>
              <a href="author.html#65463">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
