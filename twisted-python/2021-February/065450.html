<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Twisted trunk and klein?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20trunk%20and%20klein%3F&In-Reply-To=%3C77C0628F-A7CD-4F92-8C40-6C200527E6F7%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="065449.html">
   <LINK REL="Next"  HREF="065451.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Twisted trunk and klein?</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Twisted%20trunk%20and%20klein%3F&In-Reply-To=%3C77C0628F-A7CD-4F92-8C40-6C200527E6F7%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Twisted trunk and klein?">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Feb 11 15:29:36 MST 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="065449.html">[Twisted-Python] Twisted trunk and klein?
</A></li>
        <LI>Next message (by thread): <A HREF="065451.html">[Twisted-Python] Twisted trunk and klein?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65450">[ date ]</a>
              <a href="thread.html#65450">[ thread ]</a>
              <a href="subject.html#65450">[ subject ]</a>
              <a href="author.html#65450">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&gt;<i> On Feb 11, 2021, at 2:09 PM, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> On Feb 11, 2021, at 1:04 PM, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On Feb 11, 2021, at 11:41 AM, Wilfredo Sánchez Vega &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wsanchez at wsanchez.net</A> &lt;mailto:<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wsanchez at wsanchez.net</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i>  My concern here is that Twisted may have added a dependency on requests, and that dependency means that if you want IDNA==3.1, as Klein’s tox.ini does, that you aren’t allowed to.  That seems weak; I’d say a bug.  No?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>  Note this is only cause when installing treq, so the issue seems to be there, though for some reason, it’s only a problem with Twisted trunk, which kind of confuses me, but I haven’t dug into it beyond trying to figure out a bit about what fails to install.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>  So I agree probably it’s not a blocker for Twisted, and it’s only annoying to Klein for its own testing, not it’s clients, but if I were a client of treq (and Klein is), I’d think this is a bug.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Attempting to reproduce this locally was a real adventure for me.  I had a bunch of failure-to-terminate cases from the new pip resolver, until I gave up, download the newest security update of each release of python, upgraded pip, tox, setuptools, and virtualenv for every python version, fully cleaned my git checkout, and re-ran.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Now everything passes except for coverage-py39-twtrunk, which still fails to terminate.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Under -vvvv, it spends a very long time printing messages like these over and over again:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> INFO: pip is looking at multiple versions of setuptools to determine which version is compatible with other requirements. This could take a while.
</I>&gt;&gt;<i> INFO: This is taking longer than usual. You might need to provide the dependency resolver with stricter constraints to reduce runtime. If you want to abort this run, you can press Ctrl + C to do so. To improve how pip performs, tell us what happened here: <A HREF="https://pip.pypa.io/surveys/backtracking">https://pip.pypa.io/surveys/backtracking</A> &lt;<A HREF="https://pip.pypa.io/surveys/backtracking">https://pip.pypa.io/surveys/backtracking</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> as it installs every version of setuptools and six that has ever existed.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It seems like Klein has backed itself into a very weird and complex corner with the new dependency resolver, but it doesn't appear unique to Twisted trunk, just perhaps tickled ever so slightly worse.
</I>&gt;<i> 
</I>&gt;<i> I've now been running `tox -vvvv -r -e coverage-py39-twtrunk` for well over an hour, so I think we may have some pip resolver bugs to report.
</I>
I filed <A HREF="https://github.com/pypa/pip/issues/9601">https://github.com/pypa/pip/issues/9601</A> &lt;<A HREF="https://github.com/pypa/pip/issues/9601">https://github.com/pypa/pip/issues/9601</A>&gt; for this since it seems like it's well outside of our control.  If anyone else can add more information that would be great.

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20210211/c1d1b040/attachment-0001.htm&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="065449.html">[Twisted-Python] Twisted trunk and klein?
</A></li>
	<LI>Next message (by thread): <A HREF="065451.html">[Twisted-Python] Twisted trunk and klein?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#65450">[ date ]</a>
              <a href="thread.html#65450">[ thread ]</a>
              <a href="subject.html#65450">[ subject ]</a>
              <a href="author.html#65450">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
