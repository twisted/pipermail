<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Conch: multiple commands
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Conch%3A%20multiple%20commands&In-Reply-To=43EB3777.4010400%40BrendanSimon.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012527.html">
   <LINK REL="Next"  HREF="012529.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Conch: multiple commands</H1>
    <B>Gabe Rudy</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Conch%3A%20multiple%20commands&In-Reply-To=43EB3777.4010400%40BrendanSimon.com"
       TITLE="[Twisted-Python] Conch: multiple commands">rudy at goldenhelix.com
       </A><BR>
    <I>Thu Feb  9 11:26:31 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012527.html">[Twisted-Python] Conch: multiple commands
</A></li>
        <LI>Next message: <A HREF="012529.html">[Twisted-Python] Conch: multiple commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12528">[ date ]</a>
              <a href="thread.html#12528">[ thread ]</a>
              <a href="subject.html#12528">[ subject ]</a>
              <a href="author.html#12528">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday 09 February 2006 5:37 am, Brendan Simon wrote:
&gt;<i> The sshsimpleclient.py does send multiple commands (false, true, cat)
</I>&gt;<i> with separate channels.
</I>&gt;<i> Is that the preferred way to send multiple commands?
</I>&gt;<i> Doesn't that require some setup overhead every time I want to issue a
</I>&gt;<i> command to the server?
</I>&gt;<i>
</I>&gt;<i> Is it possible to open _one_ channel, and send commands in a
</I>&gt;<i> synchronously?  ie. wait for commands to return output and then issue
</I>&gt;<i> other commands if necesary??
</I>&gt;<i> Maybe this goes against the grain of the Twisted Asynchronous Framework ???
</I>
The other thing to note is that each time you open a channel, you are getting 
a fresh environment. So if your series of commands depends of env vars or 
directory changes you need to do something to ensure each command is in the 
environment it expects.

So instead of
...
self.openChannel(CommandChannel(d, &quot;svn co blah&quot;))
...(deferred stuff)...
self.openChannel(CommandChannel(d, &quot;cd blah&quot;))
...(deferred stuff)...
self.openChannel(CommandChannel(d, &quot;make&quot;))
...(deferred stuff)...
self.openChannel(CommandChannel(d, &quot;tar -czf ../thing.tar.gz outfile&quot;))

you might want
...
self.openChannel(CommandChannel(d, &quot;svn co blah&quot;))
...(deferred stuff)...
self.openChannel(CommandChannel(d, &quot;cd blah; make&quot;))
...(deferred stuff)...
self.openChannel(CommandChannel(d, &quot;cd blah; tar -czf ../thing.tar.gz 
outfile&quot;))

--gabe



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012527.html">[Twisted-Python] Conch: multiple commands
</A></li>
	<LI>Next message: <A HREF="012529.html">[Twisted-Python] Conch: multiple commands
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12528">[ date ]</a>
              <a href="thread.html#12528">[ thread ]</a>
              <a href="subject.html#12528">[ subject ]</a>
              <a href="author.html#12528">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
