<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Threading and twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Threading%20and%20twisted&In-Reply-To=%3C1139264874.9162.33.camel%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="045025.html">
   <LINK REL="Next"  HREF="045030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Threading and twisted</H1>
    <B>Itamar Shtull-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Threading%20and%20twisted&In-Reply-To=%3C1139264874.9162.33.camel%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] Threading and twisted">itamar at itamarst.org
       </A><BR>
    <I>Mon Feb  6 15:27:53 MST 2006</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="045025.html">[Twisted-Python] Threading and twisted
</A></li>
        <LI>Next message (by thread): <A HREF="045030.html">[Twisted-Python] Weekly Bug Summary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45026">[ date ]</a>
              <a href="thread.html#45026">[ thread ]</a>
              <a href="subject.html#45026">[ subject ]</a>
              <a href="author.html#45026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2006-02-06 at 13:58 -0800, David Hirschfield wrote:

&gt;<i> My question is: can I keep the threaded system as-is and just use the 
</I>&gt;<i> xmlrpc system to add requests to the queue and pull results from it to 
</I>&gt;<i> deliver to clients, as long as the xmlrpc calls maintain thread safety 
</I>&gt;<i> when dealing with the shared queue and results object? Or, is it 
</I>&gt;<i> generally unsafe to use non-twisted threading in conjunction with a 
</I>&gt;<i> twisted app? Should I be using twisted's own thread pool and 
</I>&gt;<i> runInThread() system to do the request processing work?
</I>
Twisted has a built-in thread pool. Lets say you have a function called
runTask(t) which is supposed to run on a specific task, and is known to
be thread-safe (e.g. doesn't call into Twisted). You can then do:

def xmlrpc_runtask(self, t):
    return twisted.internet.threads.deferToThread(runTask, t)

See
<A HREF="http://twistedmatrix.com/projects/core/documentation/howto/threading.html">http://twistedmatrix.com/projects/core/documentation/howto/threading.html</A>

You can do something similar with your own thread pool. The key is that
threads can schedule callables to run in Twisted thread using
reactor.callFromThread(). You don't want to do anything blocking (e.g.
reading from Queue) in the Twisted thread.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="045025.html">[Twisted-Python] Threading and twisted
</A></li>
	<LI>Next message (by thread): <A HREF="045030.html">[Twisted-Python] Weekly Bug Summary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#45026">[ date ]</a>
              <a href="thread.html#45026">[ thread ]</a>
              <a href="subject.html#45026">[ subject ]</a>
              <a href="author.html#45026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
