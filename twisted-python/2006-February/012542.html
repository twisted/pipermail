<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Sqlalchemy + Twisted Ideas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Sqlalchemy%20%2B%20Twisted%20Ideas&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012541.html">
   <LINK REL="Next"  HREF="012543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Sqlalchemy + Twisted Ideas</H1>
    <B>Ed Suominen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Sqlalchemy%20%2B%20Twisted%20Ideas&In-Reply-To="
       TITLE="[Twisted-Python] Sqlalchemy + Twisted Ideas">general at eepatents.com
       </A><BR>
    <I>Tue Feb 14 17:44:31 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012541.html">[Twisted-Python] What can be pickled in the PB?
</A></li>
        <LI>Next message: <A HREF="012543.html">[Twisted-Python] Weekly Bug Summary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12542">[ date ]</a>
              <a href="thread.html#12542">[ thread ]</a>
              <a href="subject.html#12542">[ subject ]</a>
              <a href="author.html#12542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am a new but very enthusiastic user of sqlalchemy and have been
happily banging out some code to use it. Like Valentino Volonghi (but by
no means in the same league), I am also a big fan of Twisted and want to
integrate my use of sqlalchemy into Twisted apps.

Before I get too deep into unit testing (yes, I wrote the code first,
shame on me), I'd like to get some feedback from both sqlalchemy and
twisted users about what they think of the approach in my module
database.py, which I have posted to <A HREF="http://edsuom.pastebin.com/555036.">http://edsuom.pastebin.com/555036.</A>

A use case, for my persistent graph package that's going to rely on all
this, is posted to <A HREF="http://edsuom.pastebin.com/555040.">http://edsuom.pastebin.com/555040.</A> Note how some
database operations are simply encapsulated into a self.transact() call
while others, involving several lines of code, are put into a local
function and encapsulated into a self.transact(thisTransaction) call at
the end of the method.

Some assorted coolness:

* You can use Twisted's deferred result mechanism or block, even on a
case-by-case basis.

* Engines are defined at the class level, for all tables and contexts.
Tables are defined, also at the class level, for all contexts. Cached
selects are defined, however, on a context-by-context basis.

* In all three cases, thread-local storage permits even cranky databases
like sqlite from complaining about connection objects created in one
thread being used in a different thread.

* Overridden attribute access is used to construct, or retrieve from
cache, the needed goodies on the fly. Advantageously, those goodies are
constructed in the context not only of the current Table (in the case of
cached select() objects) but also in the current thread.

Comments welcome -- positive, critical, or utterly disdainful!

- Ed Suominen





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012541.html">[Twisted-Python] What can be pickled in the PB?
</A></li>
	<LI>Next message: <A HREF="012543.html">[Twisted-Python] Weekly Bug Summary
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12542">[ date ]</a>
              <a href="thread.html#12542">[ thread ]</a>
              <a href="subject.html#12542">[ subject ]</a>
              <a href="author.html#12542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
