<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Threading and twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Threading%20and%20twisted&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012516.html">
   <LINK REL="Next"  HREF="012518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Threading and twisted</H1>
    <B>David Hirschfield</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Threading%20and%20twisted&In-Reply-To="
       TITLE="[Twisted-Python] Threading and twisted">davidh at ilm.com
       </A><BR>
    <I>Mon Feb  6 16:58:09 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012516.html">[Twisted-Python] Re: Making DeferredList look like Deferred
</A></li>
        <LI>Next message: <A HREF="012518.html">[Twisted-Python] Threading and twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12517">[ date ]</a>
              <a href="thread.html#12517">[ thread ]</a>
              <a href="subject.html#12517">[ subject ]</a>
              <a href="author.html#12517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have some old server code that runs in multiple threads, and I'm in 
the process of converting the server to a twisted xmlrpc server.

The code basically has multiple worker threads all pulling from a 
thread-safe queue of requests to process. Threads pull requests at will 
from the queue and process them, placing results in a thread-safe object 
which is used to deliver results to clients. The request processing will 
often block doing I/O or sleep while waiting for processes to complete, 
which is why they run in threads.

My question is: can I keep the threaded system as-is and just use the 
xmlrpc system to add requests to the queue and pull results from it to 
deliver to clients, as long as the xmlrpc calls maintain thread safety 
when dealing with the shared queue and results object? Or, is it 
generally unsafe to use non-twisted threading in conjunction with a 
twisted app? Should I be using twisted's own thread pool and 
runInThread() system to do the request processing work?

It probably won't be too much work to change over the current code to 
use twisted's threading framework...but I'm just wondering where I might 
run into trouble if I use the current setup instead. Am I endangering 
the xmlrpc server's ability to respond to requests if I have threads 
that aren't under twisted's control?

Thanks for your help,
-Dave

-- 
Presenting:
mediocre nebula.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012516.html">[Twisted-Python] Re: Making DeferredList look like Deferred
</A></li>
	<LI>Next message: <A HREF="012518.html">[Twisted-Python] Threading and twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12517">[ date ]</a>
              <a href="thread.html#12517">[ thread ]</a>
              <a href="subject.html#12517">[ subject ]</a>
              <a href="author.html#12517">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
