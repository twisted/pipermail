<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Making DeferredList look like Deferred
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Making%20DeferredList%20look%20like%20Deferred&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012489.html">
   <LINK REL="Next"  HREF="012487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Making DeferredList look like Deferred</H1>
    <B>Lenny G Arbage</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Making%20DeferredList%20look%20like%20Deferred&In-Reply-To="
       TITLE="[Twisted-Python] Making DeferredList look like Deferred">alengarbage at yahoo.com
       </A><BR>
    <I>Fri Feb  3 15:18:56 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012489.html">[Twisted-Python] Re: [Twisted-commits] r15819 - Maybe make this	test more robust. Windows sucks.
</A></li>
        <LI>Next message: <A HREF="012487.html">[Twisted-Python] Making DeferredList look like Deferred
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12486">[ date ]</a>
              <a href="thread.html#12486">[ thread ]</a>
              <a href="subject.html#12486">[ subject ]</a>
              <a href="author.html#12486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a need to return a DeferredList or a Deferred
from a function, but I don't want the caller to be
aware of this distinction -- the caller should just
assume that they got a regular Deferred.

The way I'm currently accomplishing this is to 1)
ensure that each Deferred in the List has its own
callback/errback pair hooked up, and 2) add a callback
to the Deferred list from within the called function
which either returns the [possibly sanitized] result
if all the Deferreds called their callbacks, or that
raises a failure.DefaultException if any of the
Deferreds called their errbacks.  This seems to give
me the desired result in all cases.

Is this the right way to go about this?  Is there a
cleaner way?

(The reason I can't just return the DeferredList, as I
understand, is that its callback is *always* invoked,
even if we leave each of the Deferred's errbacks
unhooked and let them trickle up into DeferredList's
addErrback callable.  In the case of a caller who
expects the returned deferred to be a regular
deferred, it would not be expected to have *both* its
callback and errback invoked).

thanks,
Lenny

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012489.html">[Twisted-Python] Re: [Twisted-commits] r15819 - Maybe make this	test more robust. Windows sucks.
</A></li>
	<LI>Next message: <A HREF="012487.html">[Twisted-Python] Making DeferredList look like Deferred
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12486">[ date ]</a>
              <a href="thread.html#12486">[ thread ]</a>
              <a href="subject.html#12486">[ subject ]</a>
              <a href="author.html#12486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
