<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twisted TCP frame size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted%20TCP%20frame%20size&In-Reply-To=1141035641.8811.51.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012581.html">
   <LINK REL="Next"  HREF="012586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twisted TCP frame size</H1>
    <B>Phil Mayers</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twisted%20TCP%20frame%20size&In-Reply-To=1141035641.8811.51.camel%40localhost.localdomain"
       TITLE="[Twisted-Python] twisted TCP frame size">p.mayers at imperial.ac.uk
       </A><BR>
    <I>Mon Feb 27 11:44:18 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012581.html">[Twisted-Python] twisted TCP frame size
</A></li>
        <LI>Next message: <A HREF="012586.html">[Twisted-Python] twisted TCP frame size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12584">[ date ]</a>
              <a href="thread.html#12584">[ thread ]</a>
              <a href="subject.html#12584">[ subject ]</a>
              <a href="author.html#12584">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thys Meintjes wrote:
&gt;<i> 1) is there a way to force dataReceived() to return when a certain data
</I>&gt;<i> length has been received ? 
</I>
dataReceived() is called via doRead() on the file descriptor, which is 
called via a select([fd,], [], []) event in the default reactor.

If you are doing something (executing code) and a TCP segment comes in, 
then another, then another, *then* you exit your code and the reactor 
falls back to select(), it'll return with the fd and doRead() will be 
called, and you'll get everything from the socket - 3 frames worth.

The correct question is, given your test script has a very small 
dataReceived method that returns quickly (I presume), why isn't the 
reactor &quot;beating&quot; the server and getting 49 bytes every time?

...to which I don't have a good answer. Which version of Twisted are you 
running?

&gt;<i> 2) Why is dataReceived() so expensive (if it is) ?
</I>
Between select() returning and dataReceived() being called, the reactor 
does lots of stuff related to running callLater's and stuff. I've found 
that's all quite expensive in earlier versions of Twisted, but it 
doesn't look like you use any of that, so I can't imagine that's it.

&gt;<i> 3) Is Protocol the correct tree or are there other ways to handle small
</I>&gt;<i> time sensitive messages in twisted. 
</I>
Is there a reason you can't use UDP?

&gt;<i> 
</I>&gt;<i> Apologies for the longish post.
</I>&gt;<i> 
</I>&gt;<i> Regards
</I>&gt;<i> Thys
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012581.html">[Twisted-Python] twisted TCP frame size
</A></li>
	<LI>Next message: <A HREF="012586.html">[Twisted-Python] twisted TCP frame size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12584">[ date ]</a>
              <a href="thread.html#12584">[ thread ]</a>
              <a href="subject.html#12584">[ subject ]</a>
              <a href="author.html#12584">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
