<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Writing a wrapper from asynchronous to	synchronous
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20a%20wrapper%20from%20asynchronous%20to%0A%09synchronous&In-Reply-To=200602232246.03126.uwe%40oss4u.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012570.html">
   <LINK REL="Next"  HREF="012572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Writing a wrapper from asynchronous to	synchronous</H1>
    <B>Brett Viren</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20a%20wrapper%20from%20asynchronous%20to%0A%09synchronous&In-Reply-To=200602232246.03126.uwe%40oss4u.com"
       TITLE="[Twisted-Python] Writing a wrapper from asynchronous to	synchronous">bv at bnl.gov
       </A><BR>
    <I>Fri Feb 24 11:20:52 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012570.html">[Twisted-Python] Writing a wrapper from asynchronous to synchronous
</A></li>
        <LI>Next message: <A HREF="012572.html">[Twisted-Python] Writing a wrapper from asynchronous to	synchronous
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12571">[ date ]</a>
              <a href="thread.html#12571">[ thread ]</a>
              <a href="subject.html#12571">[ subject ]</a>
              <a href="author.html#12571">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&quot;Uwe C. Schroeder&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">uwe at oss4u.com</A>&gt; writes:

&gt;<i> 1) module calls some method #1
</I>&gt;<i> 2) #1 depends on certain initializations to finish
</I>&gt;<i> 3) the call to #1 doesn't return unless step 2) is done
</I>
I've not yet learned PB, so maybe this isn't a good fit but what about
having modules run in threads and use Queues for them to send and
receive messages (method calls / return values) to/from the framework?

This way they won't block the framework but will appear to run
synchronously.  You could hide the Queue manipulation in a thin API
that shadows the API of the framework.

The timeline would be:

 Client calls wrapper function

 Function builds message, sends it to nonblocking framework queue and
 then listens on blocking reply queue.

 Framework checks input queue in nonblocking way.  When it recieves a
 message it calls the corresponding asynchronous method and attaches
 code to the callback that will send the reply down the reply queue.

 Wrapper function gets reply, unpacks return and returns it to
 synchronous caller.

I've used a similar pattern for doing the opposite of sending commands
from async framework to syncronous client code.


-Brett.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012570.html">[Twisted-Python] Writing a wrapper from asynchronous to synchronous
</A></li>
	<LI>Next message: <A HREF="012572.html">[Twisted-Python] Writing a wrapper from asynchronous to	synchronous
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12571">[ date ]</a>
              <a href="thread.html#12571">[ thread ]</a>
              <a href="subject.html#12571">[ subject ]</a>
              <a href="author.html#12571">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
