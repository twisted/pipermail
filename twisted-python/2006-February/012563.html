<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Missing feature in detecting stalled PB	connections?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Missing%20feature%20in%20detecting%20stalled%20PB%0A%09connections%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012562.html">
   <LINK REL="Next"  HREF="012565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Missing feature in detecting stalled PB	connections?</H1>
    <B>Luc Stepniewski</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Missing%20feature%20in%20detecting%20stalled%20PB%0A%09connections%3F&In-Reply-To="
       TITLE="[Twisted-Python] Missing feature in detecting stalled PB	connections?">luc.stepniewski at adelux.fr
       </A><BR>
    <I>Mon Feb 20 09:02:00 EST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="012562.html">[Twisted-Python] RE: v2006-2-12 ImportError: IAddress 
</A></li>
        <LI>Next message: <A HREF="012565.html">[Twisted-Python] Missing feature in detecting stalled PB	connections?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12563">[ date ]</a>
              <a href="thread.html#12563">[ thread ]</a>
              <a href="subject.html#12563">[ subject ]</a>
              <a href="author.html#12563">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>While using pb.PBClientFactory() with reactor.connectTCP(), I noticed that the 
specified timeout parameter is only for testing if there is no connection, 
not if the remote PB replies correctly.
I noticed this when one of my remote PB instance was stuck. It was accepting 
requests, but did not answer anything at all. So the connection is 
established, and stays indefinitely!

You can verify this by yourself by just putting netcat (&quot;nc -vv -l -p 9999&quot; 
for example) instead of a PB instance.
The PB on the other side will connect, and then, nothing else. No timeout that 
netcat didn't reply (not even correctly).

I know I could add a timer (callLater) that would wake up and kill the 
connection after some time (because I know one transaction will not exceed 
some precise time), but it's really really trashy, and one not always knows 
what will be the duration of the transaction.

Is there really no other alternative to detect the correct connection to 
another PB instance?

I attached an example code that would show this behaviour.

Thanks,
Luc
-- 
Luc Stepniewski &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">luc.stepniewski at adelux.fr</A>&gt; &lt;sip:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">724766 at fwd.pulver.com</A>&gt;
Adelux - Securite, Linux  Public key: &lt;<A HREF="http://lstep.free.fr/pubkey.txt">http://lstep.free.fr/pubkey.txt</A>&gt;
Key BC0E3C2A fingerprint = A4FA466C68D27E46B427  07D083ED6340BC0E3C2A
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bug.py
Type: application/x-python
Size: 1737 bytes
Desc: not available
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20060220/85ad57b0/attachment.bin">http://twistedmatrix.com/pipermail/twisted-python/attachments/20060220/85ad57b0/attachment.bin</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012562.html">[Twisted-Python] RE: v2006-2-12 ImportError: IAddress 
</A></li>
	<LI>Next message: <A HREF="012565.html">[Twisted-Python] Missing feature in detecting stalled PB	connections?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12563">[ date ]</a>
              <a href="thread.html#12563">[ thread ]</a>
              <a href="subject.html#12563">[ subject ]</a>
              <a href="author.html#12563">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
