<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Fwd: Slow data transfer with Twisted + socat +	Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Fwd%3A%20Slow%20data%20transfer%20with%20Twisted%20%2B%20socat%20%2B%0A%09Windows&In-Reply-To=AANLkTikdbsKHFOmxx_6KZS1O5Onh3aoyPPVsOc-p5c4x%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023647.html">
   <LINK REL="Next"  HREF="023649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Fwd: Slow data transfer with Twisted + socat +	Windows</H1>
    <B>Michael Thompson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Fwd%3A%20Slow%20data%20transfer%20with%20Twisted%20%2B%20socat%20%2B%0A%09Windows&In-Reply-To=AANLkTikdbsKHFOmxx_6KZS1O5Onh3aoyPPVsOc-p5c4x%40mail.gmail.com"
       TITLE="[Twisted-Python] Fwd: Slow data transfer with Twisted + socat +	Windows">michaelnt at gmail.com
       </A><BR>
    <I>Wed Mar  9 02:02:58 EST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="023647.html">[Twisted-Python] txRiakIdx: Twisted Riak library implementing	transparent indexing
</A></li>
        <LI>Next message: <A HREF="023649.html">[Twisted-Python] Fwd: Slow data transfer with Twisted + socat +	Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23648">[ date ]</a>
              <a href="thread.html#23648">[ thread ]</a>
              <a href="subject.html#23648">[ subject ]</a>
              <a href="author.html#23648">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>---------- Forwarded message ----------
From: Michael Thompson &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">michaelnt at gmail.com</A>&gt;
Date: 9 March 2011 07:02
Subject: Re: [Twisted-Python] Slow data transfer with Twisted + socat + Windows
To: Jason Heeris &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jason.heeris at gmail.com</A>&gt;


On 9 March 2011 01:47, Jason Heeris &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jason.heeris at gmail.com</A>&gt; wrote:
&gt;<i> On 9 March 2011 03:49, Michael Thompson &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">michaelnt at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Does you program just write via TCP to this serial device, it doesn't
</I>&gt;&gt;<i> do anything else that could block?
</I>&gt;<i>
</I>&gt;<i> Both the &quot;bare bones&quot; script and the real app writes and reads from
</I>&gt;<i> the device, so I wouldn't expect full speed communications. But I
</I>&gt;<i> can't see anything else in my script that might actually block.
</I>&gt;<i>
</I>&gt;&gt;<i> Have you tried running this under different reactors?
</I>&gt;<i>
</I>&gt;<i> Yep &#8212; no difference under Linux, but the GTK reactor is slower than
</I>&gt;<i> the select reactor under Windows (see original email for times).
</I>&gt;<i>
</I>&gt;&gt;<i> Running the windows program against the Linux socat device might help
</I>&gt;&gt;<i> to reduce the number of variables.
</I>&gt;<i>
</I>&gt;<i> Aha! Didn't think of that, but interesting results...
</I>&gt;<i>
</I>&gt;<i> socat on Linux, socat_test.py on Windows VM:
</I>&gt;<i> &#160;- select reactor: 4s
</I>&gt;<i> &#160;- win32reactor: 4s
</I>&gt;<i> &#160;- gtk reactor: 220s
</I>&gt;<i>
</I>&gt;<i> socat on Windows VM, socat_test.py on Linux:
</I>&gt;<i> &#160;- select reactor: 30s
</I>&gt;<i> &#160;- gtk reactor: 30s
</I>&gt;<i>
</I>&gt;<i> Interesting, but not exactly clarifying...
</I>
And from your first email

socat on Windows, socat_test.py on Windows VM

select 30s
gtk reactor 220s

My read of these results is that socat on windows limits the
performance to 30s and in addition the gtkreactor on windows has
performance problems.

The gtkreactor on windows has a different implementation which seems
to be missing any way for the GTK loop to notify the reactor of IO.
You could try changing the timeout from 0.1 to something smaller, but
that will probably hammer the CPU when idle.

pyserial includes an example that makes a serial port accessible of
TCP you could see if that is any faster than socat.

Perhaps you can write a serial to TCP adaptor that encapsulates the
serial logic so reduce the IO between this application and the GTK app
to a message like start_sync, stop_sync.

Michael

</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023647.html">[Twisted-Python] txRiakIdx: Twisted Riak library implementing	transparent indexing
</A></li>
	<LI>Next message: <A HREF="023649.html">[Twisted-Python] Fwd: Slow data transfer with Twisted + socat +	Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23648">[ date ]</a>
              <a href="thread.html#23648">[ thread ]</a>
              <a href="subject.html#23648">[ subject ]</a>
              <a href="author.html#23648">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
