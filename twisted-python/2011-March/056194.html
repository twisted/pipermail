<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Benchmark of Python WSGI servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Benchmark%20of%20Python%20WSGI%20servers&In-Reply-To=%3C1F2AE701-F431-4647-A15A-0299EF7D740E%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="056189.html">
   <LINK REL="Next"  HREF="056190.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Benchmark of Python WSGI servers</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Benchmark%20of%20Python%20WSGI%20servers&In-Reply-To=%3C1F2AE701-F431-4647-A15A-0299EF7D740E%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Benchmark of Python WSGI servers">glyph at twistedmatrix.com
       </A><BR>
    <I>Sat Mar 19 15:21:18 MDT 2011</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="056189.html">[Twisted-Python] Benchmark of Python WSGI servers
</A></li>
        <LI>Next message (by thread): <A HREF="056190.html">[Twisted-Python] Benchmark of Python WSGI servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56194">[ date ]</a>
              <a href="thread.html#56194">[ thread ]</a>
              <a href="subject.html#56194">[ subject ]</a>
              <a href="author.html#56194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mar 19, 2011, at 8:39 AM, Michael Thompson wrote:

&gt;<i> I agree that threads and processes is going to be the first step to
</I>&gt;<i> scaling but I don't think there's much advantage putting that in
</I>&gt;<i> twisted given that there are other solutions for this.
</I>
Other solutions for what?  If Twisted is going to be a WSGI container, it should (eventually) be a multiprocess container, since that approach scales better to the number of CPUs.  Other options in the arena of single-machine load-balancing require lots of tedious setup and usually subtly affect the semantics of your application (you have to do work to make sure the application gets the correct idea of what URL it's being visited at and who the client is).

It would be even better if Twisted could automatically scale your WSGI application up to multiple hosts, even.  This is exactly the sort of thing that Twisted is good at.

&gt;<i> I was hoping that changing the reactor would give an easy way to make
</I>&gt;<i> Twisted look better, from a PR point of view. To check I ran a
</I>&gt;<i> benchmark on two EC2 m1.small machines using
</I>
Changing the reactor typically affects applications with a high degree of concurrency (more than 1000 concurrent connections) where the bottleneck is the multiplexing mechanism.  It can affect other things sometimes, but that's the usual problem it's meant to address.

The benchmark we're discussing is handling only a few requests at a time.  Itamar's approach to widening the threadpool is a better way to increase concurrency than changing the reactor, since the number of concurrent requests will be bottlenecked on the maximum number of threads anyway.

&gt;<i> So looks like the reactor has nothing to do with it. Here some profile results for the select reactor.
</I>
If you want to turn this profiling project into some optimizations, add a simple WSGI requests-per-second benchmark to a branch of &lt;<A HREF="https://code.launchpad.net/~exarkun/+junk/twisted-benchmarks">https://code.launchpad.net/~exarkun/+junk/twisted-benchmarks</A>&gt;, tell exarkun about it, and then submit a patch which makes that benchmark's number go up.

Thanks for following up on it!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20110319/d88a477c/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="056189.html">[Twisted-Python] Benchmark of Python WSGI servers
</A></li>
	<LI>Next message (by thread): <A HREF="056190.html">[Twisted-Python] Benchmark of Python WSGI servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#56194">[ date ]</a>
              <a href="thread.html#56194">[ thread ]</a>
              <a href="subject.html#56194">[ subject ]</a>
              <a href="author.html#56194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
