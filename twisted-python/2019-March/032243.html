<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20Proposal%20for%20reducing%20the%20burden%20of%0A%20developing%20on%20Twisted%20by%20dropping%20Python%202%20support&In-Reply-To=%3C3F533AD3-7485-42E3-B77B-35024CF918CA%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="032242.html">
   <LINK REL="Next"  HREF="032253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20A%20Proposal%20for%20reducing%20the%20burden%20of%0A%20developing%20on%20Twisted%20by%20dropping%20Python%202%20support&In-Reply-To=%3C3F533AD3-7485-42E3-B77B-35024CF918CA%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Mar 25 22:52:03 MDT 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="032242.html">[Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support
</A></li>
        <LI>Next message (by thread): <A HREF="032253.html">[Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32243">[ date ]</a>
              <a href="thread.html#32243">[ thread ]</a>
              <a href="subject.html#32243">[ subject ]</a>
              <a href="author.html#32243">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Mar 25, 2019, at 3:15 AM, Amber Brown &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">hawkowl at atleastfornow.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi everyone,
</I>&gt;<i> 
</I>&gt;<i> Since the Python 2 EOL date is rapidly approaching, I thought it was time we consider dropping Python 2 support.
</I>&gt;<i> 
</I>&gt;<i> I personally find that Python 2 compat adds a huge amount of overhead when working on and maintaining Twisted, and think that with the current maintainer availability, dropping it sooner rather than later would have a beneficial effect on how much work we spend on shims/compat, complexity, and our ability to ship new features, as well as onboarding people who are interested in the project, but have no interest (or experience!) in Python 2.7.
</I>
Personally, I don't have this problem, but I'm certainly willing to believe it's a bigger deal for others; especially others who perhaps have not even learned Python 2 at this point.

&gt;<i> It is basically summed up by doing a feature freeze on an agreed-upon version of Twisted, that will be the last version released for 2.7. It would be abnormal in that it would get security fixes (our current policy is to only release them for current versions) and critical bugfixes, but would otherwise be frozen.
</I>
Here's my question about this:

Who will do this work?

Personally, I'm not willing to commit to this.  I know from experience both on Twisted and other projects that maintaining multiple release branches, even one that's &quot;maintenance only&quot;, requires at least one point-person for each branch at all times (usually a &quot;release manager&quot;).  And backporting fixes inevitably gets harder and harder as the &quot;maintenance&quot; branch diverges from top-of-tree.  If I have time to work on Twisted in my increasingly scarce spare time, I want it to be on something at least plausibly interesting, and manually backporting manual fixes to an unmaintained py2 branch that I don't even use doesn't qualify.

(&quot;But glyph&quot;, I hear you ask, &quot;then why are you willing to write py2 code as it is?&quot;.  Well, hypothetical reader, it's because I find it easily an order of magnitude easier to fix version discrepancies in the same change where they creep in, and CI is yelling me about them, than it is to fix them in a big tangled morass six months later with no idea which part of the code I'm backporting is the issue.)

Do we have py2-only users who are willing to take ownership of this branch?  Specific people willing to sign up for this responsibility for the next... how long?  Three years?  Five years?

So I'd rather be quite explicit that while we would not object to anyone filling these roles, someone still needs to step forward and fill them, and I'm not willing to commit the current team, such as it is, to work that I myself am unwilling to do.  If nobody does step forward we should not claim to have security support for a dead / unmaintained branch.

&gt;<i> One of my rationales is that from some analysis of PyPI download statistics, the vast majority of Python 2 users are using old versions of Twisted, while nearly all our Python 3 users are on the latest version. As such, I believe freezing a version that will get security updates but no new features would not be a massive loss to those stuck on Python 2 for whatever reason.
</I>
I know that you detailed some of this on IRC, but: how old?

My sense would be that of course users stuck on py2 would have a more conservative upgrade cadence than py3 users, but that doesn't mean they never upgrade.  How far behind are these py2 users, and does the curve suggest they're catching up or are most twisted downloads just like, version 1.3 on python 1.5.2 forever?

&gt;<i> Twisted's compatibility policy would still apply, ensuring that Python 2/3 compatible software using Twisted would be able to use the older Twisted version on Python 2, and the newer version on Python 3, as you would usually expect.
</I>
We have 2 big blockers here right now that would prevent doing this as things stand right now:

Twisted is not yet fully ported to Python 3, so there's no version where you can use all of Twisted on Python 3.  This picture is way, way smaller than it has ever been, though - grab a module and start porting: <A HREF="http://blog.habnab.it/twisted-depgraph/">http://blog.habnab.it/twisted-depgraph/</A> &lt;<A HREF="http://blog.habnab.it/twisted-depgraph/">http://blog.habnab.it/twisted-depgraph/</A>&gt;
We still have Python 2 in production ourselves that requires Twisted; specifically:
Trac and several of our ancillary utilities around it.  Happily this does seem to be fairly actively worked on: &quot;opened 4 years ago, last modified 12 days ago&quot; <A HREF="https://trac.edgewall.org/ticket/12130">https://trac.edgewall.org/ticket/12130</A> &lt;<A HREF="https://trac.edgewall.org/ticket/12130">https://trac.edgewall.org/ticket/12130</A>&gt;
Dogfood DNS: twisted.names doesn't work on python 3: <A HREF="https://twistedmatrix.com/trac/ticket/9496">https://twistedmatrix.com/trac/ticket/9496</A> &lt;<A HREF="https://twistedmatrix.com/trac/ticket/9496">https://twistedmatrix.com/trac/ticket/9496</A>&gt;
Our front-end webserver might work on pypy3, but we have yet to move it over.  Maybe that would be a good place to start?

If this proposal lights a fire under some folks to drive any of these projects to completion, that would be great!

&gt;<i> You can find the proposal here, in this handy-dandy Google Doc: <A HREF="https://docs.google.com/document/d/1S4CGgZC09blLIdk3Zo7wBa75A9_JuuH_3akkyjN0lik/edit">https://docs.google.com/document/d/1S4CGgZC09blLIdk3Zo7wBa75A9_JuuH_3akkyjN0lik/edit</A>
</I>&gt;<i> 
</I>&gt;<i> Comments are welcome, as well as which timeline seems reasonable.
</I>
Personally I feel like Option 1 is the most reasonable.  We can't do option 3 because of the above blockers, and option 2 just seems random to me - why commit to 4 months of additional maintenance beyond when py2 itself is EOL?  Maybe there's an option like, 1.5, where we de-support py2 at max(2020-01-01, &quot;the date at which we no longer have any py2 code in production ourselves&quot;)?

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20190325/b3d2a821/attachment.html&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="032242.html">[Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support
</A></li>
	<LI>Next message (by thread): <A HREF="032253.html">[Twisted-Python] A Proposal for reducing the burden of developing on Twisted by dropping Python 2 support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32243">[ date ]</a>
              <a href="thread.html#32243">[ thread ]</a>
              <a href="subject.html#32243">[ subject ]</a>
              <a href="author.html#32243">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
