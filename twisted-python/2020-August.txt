From moshez at zadka.club  Sat Aug  1 11:14:15 2020
From: moshez at zadka.club (Moshe Zadka)
Date: Sat, 01 Aug 2020 10:14:15 -0700
Subject: [Twisted-Python] Incremental vs. Black
Message-ID: <6806231b-91d1-4c9f-83b8-052c2efb582a@www.fastmail.com>

Hi all,

I opened https://github.com/twisted/incremental/issues/55 a few days ago, and I'm wondering if anyone has any objection to me making a fix. I'm using incremental at work on a project that uses black, so this just means I have to run black each time there is a version update -- not the end of the world, but annoying nonetheless.

Moshe Z.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200801/7bb20281/attachment.htm>

From trac at twistedmatrix.com  Sun Aug  2 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 02 Aug 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1596348317.95.6014826309041992677@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200802/84f620fc/attachment.htm>

From glyph at twistedmatrix.com  Sun Aug  2 15:33:17 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sun, 2 Aug 2020 14:33:17 -0700
Subject: [Twisted-Python] Management of PyPI maintainers (as related to
 qt5reactor)
In-Reply-To: <e56aebcb16c1418f81d63f0206f29058@fstab.net>
References: <1aa65876db2b46619fb88930d3d792d5@fstab.net>
 <CAEeXt4ORxhyPUd=inBXb+=A8b8OywA-qxk0FfzLBcmqwGidevw@mail.gmail.com>
 <e56aebcb16c1418f81d63f0206f29058@fstab.net>
Message-ID: <349712B6-D169-4A84-8A22-FBFC4B55F229@twistedmatrix.com>



> On Jul 30, 2020, at 12:58 PM, Kyle Altendorf <sda at fstab.net> wrote:
> 
> On 2020-07-30 14:10, Jean-Paul Calderone wrote:
> 
>> On Thu, Jul 30, 2020 at 10:34 AM Kyle Altendorf <sda at fstab.net> wrote:
>>> Following up on:
>>> https://github.com/twisted/qt5reactor/issues/50#issuecomment-658432478
>>> qt5reactor has recently been moved into the Twisted organization on
>>> GitHub.  The intent is that being in an org will make it less likely
>>> that existing maintainers disappear and the project is stranded with
>>> nobody having the authority to pass it on to any new maintainers.  If we
>>> happen to get more people interested in maintenance that's a bonus, but
>>> it is not the reason for the move.
>>> The question is, how should the Twisted organization manage PyPI access
>>> for its projects?  Glyph mentioned there is a 1password account that
>>> could be relevant.  I have not used 1password personally so I don't know
>>> any details about how it would fit in here.  Twisted itself has six
>>> maintainers listed on PyPI: exarkun, glyph, hawkowl, itamarst, jml, and
>>> markrwilliams.
>>> Any opinions?  1Password vs.
>>> just-add-a-couple-maintainers-to-the-qt5reactor-pypi vs. ...?
>> Can you clarify this a bit?  PyPI has perfectly serviceable support for multiple maintainers per project.  What benefits come from sharing some kind of credentials (and what credentials) via a tool like 1Password?
>> It seems like folks who should be qt5reactor PyPI maintainers can have their personal PyPI accounts configured as maintainers on PyPI and then the problem's solved.
>> So, if I've missed something, maybe you can help clarify.
> 
> qt5reactor isn't particularly active and and my hope in it moving into the Twisted organization is that if all 'active' maintainers are lost and someone else volunteers later, an organizational maintainer could choose to give the new volunteer the necessary authority.  It may well be that this is a silly reason to make the move but I haven't been corrected about it yet.  :]
> 
> I didn't originate the 1password suggestion but if a Twisted PyPI account were created, as Adi mentioned, and the credentials stored in 1password then that would associate control with the Twisted organization rather than individual developers.  The presently 'active' individual developers would presumably retain their PyPI maintainership rights as well.
> 
> Any more clear now?
> 
> Cheers,
> -kyle

I think I probably made the 1password suggestion.  Let me try to clear this up, since I don't think it's a general-purpose thing to do on PyPI.

However, there's an interaction between Travis's bad (i.e. non-existent) secrets management and PyPI's release tokens: https://travis-ci.community/t/travis-encrypt-data-too-large-for-pypi-tokens-with-older-repos/5792 <https://travis-ci.community/t/travis-encrypt-data-too-large-for-pypi-tokens-with-older-repos/5792> which sometimes necessitates a "release robot" user whose password can be provided to Travis for releases.  (We should be migrating every project to this kind of release, if we can, rather than doing it manually on people's laptops or whatever.)  1password is a good mechanism to share this account among maintainers.

I think that the solution is to use https://github.com/pypa/gh-action-pypi-publish <https://github.com/pypa/gh-action-pypi-publish> instead, and decrease dependency on Travis, since it seems to be unmaintained since the acquisition.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200802/d860ad1c/attachment.htm>

From robert at gormley.me  Wed Aug  5 16:59:58 2020
From: robert at gormley.me (Rob Gormley)
Date: Wed, 5 Aug 2020 15:59:58 -0700
Subject: [Twisted-Python] DNS custom response (NXDOMAIN)
References: <075aad46-0e65-46aa-9458-034ee8290192@Spark>
Message-ID: <3cf9260f-9686-4ec1-84a8-80fa9f69f0bf@Spark>

Hello:

I am trying to implement a custom DNS resolver, using the DNS Howto custom resolver as a boiler plate. I have a database-driven cache that I am reading from, but am unsure how to implement a cache ‘miss’ (i.e. NXDOMAIN).

The ‘hit’ is fine, apropos to:

answer = dns.RRHeader(
    name=name,
    payload=dns.Record_A(address=b’127.0.0.1’))  # for example sake

But I tried with dns.Record_NULL to generate an NXDOMAIN-like response without success. How can I implement this?

Rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200805/c619b761/attachment.htm>

From twm at freecog.net  Wed Aug  5 17:48:04 2020
From: twm at freecog.net (Tom Most)
Date: Wed, 05 Aug 2020 16:48:04 -0700
Subject: [Twisted-Python] DNS custom response (NXDOMAIN)
In-Reply-To: <3cf9260f-9686-4ec1-84a8-80fa9f69f0bf@Spark>
References: <075aad46-0e65-46aa-9458-034ee8290192@Spark>
 <3cf9260f-9686-4ec1-84a8-80fa9f69f0bf@Spark>
Message-ID: <d67bae38-4f01-4e67-b6cd-02f11318be8a@www.fastmail.com>

On Wed, Aug 5, 2020, at 3:59 PM, Rob Gormley wrote:
> But I tried with dns.Record_NULL to generate an NXDOMAIN-like response without success. How can I implement this?

You need to fail with AuthoritativeDomainError. The pieces go together something like this:

from twisted.names import dns, client, common

class MyResolver(ResolverBase):
    def _lookup(self, name, cls, record_type, timeout):
        # This says "my resolver can't handle that name, try somewhere else".
        # DNSServerFactory will try the caches or recurse to clients.
        return defer.fail(dns.DomainError(name))
        # This says "that name definitely doesn't exist".
        # The client will get NXDOMAIN
        return defer.fail(dns.AuthoritativeDomainError(name))


factory = DNSServerFactory(
    authorities=[MyResolver()],
    caches=[...],
   clients=[client.Resolver()],  # used to recurse
)

---Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200805/3c225c23/attachment.htm>

From trac at twistedmatrix.com  Sun Aug  9 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 09 Aug 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1596953117.2.4130522051024813743@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200809/a8bb171f/attachment.htm>

From barry.scott at forcepoint.com  Mon Aug 10 08:29:39 2020
From: barry.scott at forcepoint.com (Barry Scott)
Date: Mon, 10 Aug 2020 15:29:39 +0100
Subject: [Twisted-Python] Incremental vs. Black
In-Reply-To: <6806231b-91d1-4c9f-83b8-052c2efb582a@www.fastmail.com>
References: <6806231b-91d1-4c9f-83b8-052c2efb582a@www.fastmail.com>
Message-ID: <7168089.EvYhyI6sBW@fpbarry>

On Saturday, 1 August 2020 18:14:15 BST Moshe Zadka wrote:
> Hi all,
> 
> I opened https://github.com/twisted/incremental/issues/55 a few days ago, and I'm wondering if anyone has any objection to me making a fix. I'm using incremental at work on a project that uses black, so this just means I have to run black each time there is a version update -- not the end of the world, but annoying nonetheless.

Surely its not appropriate to run black on third party code?

Why not tell black to ignore it?

Barry


> 
> Moshe Z.





From moshez at zadka.club  Mon Aug 10 09:28:10 2020
From: moshez at zadka.club (Moshe Zadka)
Date: Mon, 10 Aug 2020 08:28:10 -0700
Subject: [Twisted-Python] Incremental vs. Black
In-Reply-To: <7168089.EvYhyI6sBW@fpbarry>
References: <6806231b-91d1-4c9f-83b8-052c2efb582a@www.fastmail.com>
 <7168089.EvYhyI6sBW@fpbarry>
Message-ID: <1e5652f6-d5a2-4160-86f6-5b0e87987933@www.fastmail.com>

On Mon, Aug 10, 2020, at 07:29, Barry Scott wrote:
> On Saturday, 1 August 2020 18:14:15 BST Moshe Zadka wrote:
> > Hi all,
> > 
> > I opened https://github.com/twisted/incremental/issues/55 a few days ago, and I'm wondering if anyone has any objection to me making a fix. I'm using incremental at work on a project that uses black, so this just means I have to run black each time there is a version update -- not the end of the world, but annoying nonetheless.
> 
> Surely its not appropriate to run black on third party code?

Because `_version.py` is designed to be checked in to your code, is reviewed in a PR along with other code, etc.

Moshe Z.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200810/955c4e74/attachment.htm>

From trac at twistedmatrix.com  Sun Aug 16 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 16 Aug 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1597557917.92.584833731577793165@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200816/3c808256/attachment.htm>

From borepstein at gmail.com  Fri Aug 21 11:34:58 2020
From: borepstein at gmail.com (Boris Epstein)
Date: Fri, 21 Aug 2020 13:34:58 -0400
Subject: [Twisted-Python] code contribution/participation policy
Message-ID: <CADeF1XGfzb8WYUkCN9pJ20_7fkf=jDehyJkxO92oSO6OFQCrJw@mail.gmail.com>

Hi all,

I have started working with Twisted and found it to be a very powerful
package. That said, some modules are not documented very thoroughly (big
surprise in the world of software, right?) and I also found some
questionable code, too.

If I were to contribute fixes/improvements, what is the submission
procedure?

Thanks.

Boris.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200821/6ef00ad5/attachment.htm>

From colin.dunklau at gmail.com  Fri Aug 21 13:04:40 2020
From: colin.dunklau at gmail.com (Colin Dunklau)
Date: Fri, 21 Aug 2020 21:04:40 +0200
Subject: [Twisted-Python] code contribution/participation policy
In-Reply-To: <CADeF1XGfzb8WYUkCN9pJ20_7fkf=jDehyJkxO92oSO6OFQCrJw@mail.gmail.com>
References: <CADeF1XGfzb8WYUkCN9pJ20_7fkf=jDehyJkxO92oSO6OFQCrJw@mail.gmail.com>
Message-ID: <CAMTx_3BEGy=d8PZ_euzaT1YJgm01Dzgxr1pQAxvFnDSNym4TbQ@mail.gmail.com>

Hi Boris,

Probably the best starting point is
https://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#RequestsandContributing
and specifically
https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs and
https://twistedmatrix.com/trac/wiki/TwistedDevelopment

There are a lot of little details in those documents, please read them
carefully... but overall, the process is (1) Find/make a ticket (on trac,
not github), (2) Make a github pull request, and (3) set the trac ticket up
to be reviewed.

Happy hacking!

Colin

On Fri, Aug 21, 2020 at 7:36 PM Boris Epstein <borepstein at gmail.com> wrote:

> Hi all,
>
> I have started working with Twisted and found it to be a very powerful
> package. That said, some modules are not documented very thoroughly (big
> surprise in the world of software, right?) and I also found some
> questionable code, too.
>
> If I were to contribute fixes/improvements, what is the submission
> procedure?
>
> Thanks.
>
> Boris.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200821/c4ed4760/attachment.htm>

From glyph at twistedmatrix.com  Fri Aug 21 23:53:00 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 21 Aug 2020 22:53:00 -0700
Subject: [Twisted-Python] code contribution/participation policy
In-Reply-To: <CAMTx_3BEGy=d8PZ_euzaT1YJgm01Dzgxr1pQAxvFnDSNym4TbQ@mail.gmail.com>
References: <CADeF1XGfzb8WYUkCN9pJ20_7fkf=jDehyJkxO92oSO6OFQCrJw@mail.gmail.com>
 <CAMTx_3BEGy=d8PZ_euzaT1YJgm01Dzgxr1pQAxvFnDSNym4TbQ@mail.gmail.com>
Message-ID: <92EC7A79-EB92-4517-B0DE-3F3C8DD3237C@twistedmatrix.com>

Welcome, Boris!

If you're looking for stuff to work on, please feel free to discuss on this list.  We absolutely could use more volunteers to maintain stuff, particularly improving the documentation!

-glyph

> On Aug 21, 2020, at 12:04 PM, Colin Dunklau <colin.dunklau at gmail.com> wrote:
> 
> Hi Boris,
> 
> Probably the best starting point is https://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#RequestsandContributing <https://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#RequestsandContributing> and specifically  https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs <https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs> and https://twistedmatrix.com/trac/wiki/TwistedDevelopment <https://twistedmatrix.com/trac/wiki/TwistedDevelopment>
> 
> There are a lot of little details in those documents, please read them carefully... but overall, the process is (1) Find/make a ticket (on trac, not github), (2) Make a github pull request, and (3) set the trac ticket up to be reviewed.
> 
> Happy hacking!
> 
> Colin
> 
> On Fri, Aug 21, 2020 at 7:36 PM Boris Epstein <borepstein at gmail.com <mailto:borepstein at gmail.com>> wrote:
> Hi all,
> 
> I have started working with Twisted and found it to be a very powerful package. That said, some modules are not documented very thoroughly (big surprise in the world of software, right?) and I also found some questionable code, too.
> 
> If I were to contribute fixes/improvements, what is the submission procedure?
> 
> Thanks.
> 
> Boris.
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200821/28054bf6/attachment.htm>

From trac at twistedmatrix.com  Sun Aug 23 00:05:17 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 23 Aug 2020 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1598162717.17.9108179293251347829@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200823/fa171dee/attachment.htm>

From borepstein at gmail.com  Sat Aug 29 07:39:12 2020
From: borepstein at gmail.com (Boris Epstein)
Date: Sat, 29 Aug 2020 09:39:12 -0400
Subject: [Twisted-Python] code contribution/participation policy
In-Reply-To: <92EC7A79-EB92-4517-B0DE-3F3C8DD3237C@twistedmatrix.com>
References: <CADeF1XGfzb8WYUkCN9pJ20_7fkf=jDehyJkxO92oSO6OFQCrJw@mail.gmail.com>
 <CAMTx_3BEGy=d8PZ_euzaT1YJgm01Dzgxr1pQAxvFnDSNym4TbQ@mail.gmail.com>
 <92EC7A79-EB92-4517-B0DE-3F3C8DD3237C@twistedmatrix.com>
Message-ID: <CADeF1XGAWAgrf43G4_8NfvN97mHWcHjWNcT7gGCMLfCC2HrsTQ@mail.gmail.com>

Hi Glyph,

Thanks.

So I presume I should just follow the procedures delineated below, right?

It makes sense - you identify an issue, document it and then work on it.

Regards,

Boris.


On Sat, Aug 22, 2020 at 1:54 AM Glyph <glyph at twistedmatrix.com> wrote:

> Welcome, Boris!
>
> If you're looking for stuff to work on, please feel free to discuss on
> this list.  We *absolutely* could use more volunteers to maintain stuff,
> particularly improving the documentation!
>
> -glyph
>
> On Aug 21, 2020, at 12:04 PM, Colin Dunklau <colin.dunklau at gmail.com>
> wrote:
>
> Hi Boris,
>
> Probably the best starting point is
> https://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#RequestsandContributing
> and specifically
> https://twistedmatrix.com/trac/wiki/ContributingToTwistedLabs and
> https://twistedmatrix.com/trac/wiki/TwistedDevelopment
>
> There are a lot of little details in those documents, please read them
> carefully... but overall, the process is (1) Find/make a ticket (on trac,
> not github), (2) Make a github pull request, and (3) set the trac ticket up
> to be reviewed.
>
> Happy hacking!
>
> Colin
>
> On Fri, Aug 21, 2020 at 7:36 PM Boris Epstein <borepstein at gmail.com>
> wrote:
>
>> Hi all,
>>
>> I have started working with Twisted and found it to be a very powerful
>> package. That said, some modules are not documented very thoroughly (big
>> surprise in the world of software, right?) and I also found some
>> questionable code, too.
>>
>> If I were to contribute fixes/improvements, what is the submission
>> procedure?
>>
>> Thanks.
>>
>> Boris.
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200829/2e7f562b/attachment.htm>

From rodrigc at crodrigues.org  Sat Aug 29 11:56:39 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Sat, 29 Aug 2020 10:56:39 -0700
Subject: [Twisted-Python] Change Trac /login link to point to
 /trac/github/login
Message-ID: <CAG=rPVfUMZY+RnS-GHbY8njgYCJ5qasB4NFnO_F8=pANFM-fOQ@mail.gmail.com>

If I am not logged in, and click on:

https://twistedmatrix.com/trac/newticket

It takes me to a page:

 You are currently not logged in. You may want to do so
<https://twistedmatrix.com/trac/login> now.

If I click on *do so*, it takes me to:

No handler matched request to /login

Can this be fixed on the Trac side so that */login* redirects to:
https://twistedmatrix.com/trac/github/login ?
Or change *do so* to hyperlink to */trac/github/login*?

This is a stumbling block when new contributors are asked to open a ticket
in Trac.

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200829/e8ca747c/attachment.htm>

From trac at twistedmatrix.com  Sun Aug 30 00:05:16 2020
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 30 Aug 2020 06:05:16 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1598767516.74.7172161817418595067@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200830/ef6cf386/attachment.htm>

From glyph at twistedmatrix.com  Sun Aug 30 00:29:30 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 29 Aug 2020 23:29:30 -0700
Subject: [Twisted-Python] Change Trac /login link to point to
 /trac/github/login
In-Reply-To: <CAG=rPVfUMZY+RnS-GHbY8njgYCJ5qasB4NFnO_F8=pANFM-fOQ@mail.gmail.com>
References: <CAG=rPVfUMZY+RnS-GHbY8njgYCJ5qasB4NFnO_F8=pANFM-fOQ@mail.gmail.com>
Message-ID: <C9366256-5C42-4DB0-91AE-E009CE0F748C@twistedmatrix.com>

If you can express this as a PR to Braid, I can promise you I'll merge & apply it, but that's probably the maximum energy I can personally afford to dedicate to it :).

> On Aug 29, 2020, at 10:56 AM, Craig Rodrigues <rodrigc at crodrigues.org> wrote:
> 
> If I am not logged in, and click on:
> 
> https://twistedmatrix.com/trac/newticket <https://twistedmatrix.com/trac/newticket>
> 
> It takes me to a page:
> 
>  You are currently not logged in. You may want to do so <https://twistedmatrix.com/trac/login> now.
> 
> If I click on do so, it takes me to:
> 
> No handler matched request to /login
> 
> Can this be fixed on the Trac side so that /login redirects to:
> https://twistedmatrix.com/trac/github/login <https://twistedmatrix.com/trac/github/login> ?
> Or change do so to hyperlink to /trac/github/login?
> 
> This is a stumbling block when new contributors are asked to open a ticket in Trac.
> 
> --
> Craig
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200829/d19f2a99/attachment.htm>

From rodrigc at crodrigues.org  Sun Aug 30 10:10:38 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Sun, 30 Aug 2020 09:10:38 -0700
Subject: [Twisted-Python] Change Trac /login link to point to
 /trac/github/login
In-Reply-To: <C9366256-5C42-4DB0-91AE-E009CE0F748C@twistedmatrix.com>
References: <CAG=rPVfUMZY+RnS-GHbY8njgYCJ5qasB4NFnO_F8=pANFM-fOQ@mail.gmail.com>
 <C9366256-5C42-4DB0-91AE-E009CE0F748C@twistedmatrix.com>
Message-ID: <CAG=rPVe_Ex5wQfn_jT8e7KmU0CYnMXSAPsdUb=8+fA6Rmu1muQ@mail.gmail.com>

Where in https://github.com/twisted-infra/braid/ does this change need to
be done?

I'm not familiar with how braid works.

--
Craig

On Sat, Aug 29, 2020 at 11:30 PM Glyph <glyph at twistedmatrix.com> wrote:

> If you can express this as a PR to Braid, I can promise you I'll merge &
> apply it, but that's probably the maximum energy I can personally afford to
> dedicate to it :).
>
> On Aug 29, 2020, at 10:56 AM, Craig Rodrigues <rodrigc at crodrigues.org>
> wrote:
>
> If I am not logged in, and click on:
>
> https://twistedmatrix.com/trac/newticket
>
> It takes me to a page:
>
>  You are currently not logged in. You may want to do so
> <https://twistedmatrix.com/trac/login> now.
>
> If I click on *do so*, it takes me to:
>
> No handler matched request to /login
>
> Can this be fixed on the Trac side so that */login* redirects to:
> https://twistedmatrix.com/trac/github/login ?
> Or change *do so* to hyperlink to */trac/github/login*?
>
> This is a stumbling block when new contributors are asked to open a ticket
> in Trac.
>
> --
> Craig
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200830/482051bf/attachment.htm>

From adi at roiban.ro  Sun Aug 30 10:56:21 2020
From: adi at roiban.ro (Adi Roiban)
Date: Sun, 30 Aug 2020 17:56:21 +0100
Subject: [Twisted-Python] Change Trac /login link to point to
 /trac/github/login
In-Reply-To: <CAG=rPVe_Ex5wQfn_jT8e7KmU0CYnMXSAPsdUb=8+fA6Rmu1muQ@mail.gmail.com>
References: <CAG=rPVfUMZY+RnS-GHbY8njgYCJ5qasB4NFnO_F8=pANFM-fOQ@mail.gmail.com>
 <C9366256-5C42-4DB0-91AE-E009CE0F748C@twistedmatrix.com>
 <CAG=rPVe_Ex5wQfn_jT8e7KmU0CYnMXSAPsdUb=8+fA6Rmu1muQ@mail.gmail.com>
Message-ID: <CAFycZ9db2=_qX4Z+MTOZhNhG-5ErhoFrKB9RpGK4wSbu02-qtA@mail.gmail.com>

Hi,


On Sun, 30 Aug 2020 at 17:11, Craig Rodrigues <rodrigc at crodrigues.org>
wrote:

> Where in https://github.com/twisted-infra/braid/ does this change need to
> be done?
>
> I'm not familiar with how braid works.
>
>
I have created a PR here
https://github.com/twisted-infra/braid/pull/263

----

I think that this is a trac-github plugin/extension issue which was fixed
https://github.com/trac-hacks/trac-github/issues/95

The link is created by the extension here:
https://github.com/trac-hacks/trac-github/blob/master/tracext/github/__init__.py#L136

I hope someone could review and apply the change in prod.

Cheers


> --
> Craig
>
> On Sat, Aug 29, 2020 at 11:30 PM Glyph <glyph at twistedmatrix.com> wrote:
>
>> If you can express this as a PR to Braid, I can promise you I'll merge &
>> apply it, but that's probably the maximum energy I can personally afford to
>> dedicate to it :).
>>
>> On Aug 29, 2020, at 10:56 AM, Craig Rodrigues <rodrigc at crodrigues.org>
>> wrote:
>>
>> If I am not logged in, and click on:
>>
>> https://twistedmatrix.com/trac/newticket
>>
>> It takes me to a page:
>>
>>  You are currently not logged in. You may want to do so
>> <https://twistedmatrix.com/trac/login> now.
>>
>> If I click on *do so*, it takes me to:
>>
>> No handler matched request to /login
>>
>> Can this be fixed on the Trac side so that */login* redirects to:
>> https://twistedmatrix.com/trac/github/login ?
>> Or change *do so* to hyperlink to */trac/github/login*?
>>
>> This is a stumbling block when new contributors are asked to open a
>> ticket in Trac.
>>
>> --
>> Craig
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
Adi Roiban
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200830/51c53389/attachment-0001.htm>

From johnaherne at rocs.co.uk  Mon Aug 31 09:47:02 2020
From: johnaherne at rocs.co.uk (John Aherne)
Date: Mon, 31 Aug 2020 16:47:02 +0100
Subject: [Twisted-Python] Block TLS 1.0 and TLS 1.1 support on windows
Message-ID: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>

 I'm using twisted 20.3 and python3.6.8 and Windows 10

I'm using endpoint_description with a tac file to start up a server.

But I need to disable tls 1.0 and 1.1.

I was hoping to find a parameter I could pass in to make the system only
recognise 1.2 and 1.3. But could not find anything that would do that. I
thought sslmethod would be what I wanted but that is limited to :

Must be one of: "SSLv23_METHOD", "SSLv2_METHOD", "SSLv3_METHOD",
"TLSv1_METHOD". If I choose TLSv1_METHOD, TLS1.0 and 1.1 are still enabled
and QUALYS complains and downgrades the rating to B
In the end I found _defaultMinimumTLSVersion in _sslverify.py.

I set this to TLSVersion.TLSv1_2 and that seemed to do the trick.

But I don't think I should be doing that. I think I've missed some obvious
place where I can pass in a value to change this.

Anyone  know where I should be looking.

Thanks for any info

-- 
*John Aherne*




*www.rocs.co.uk <http://www.rocs.co.uk>*
020 7223 7567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/6532a11c/attachment.htm>

From ldanielburr at me.com  Mon Aug 31 09:57:36 2020
From: ldanielburr at me.com (L. Daniel Burr)
Date: Mon, 31 Aug 2020 10:57:36 -0500
Subject: [Twisted-Python] Block TLS 1.0 and TLS 1.1 support on windows
In-Reply-To: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>
References: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>
Message-ID: <A00C9A04-35D7-40FD-82F6-AB729639D100@me.com>

Hi John,

I think you want https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html <https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html>, specifically, you want to pass the "raiseMinimumTo" parameter,

Hope this helps,

L. Daniel Burr

> On Aug 31, 2020, at 10:47 AM, John Aherne <johnaherne at rocs.co.uk> wrote:
> 
>  I'm using twisted 20.3 and python3.6.8 and Windows 10  
> 
> I'm using endpoint_description with a tac file to start up a server.
> 
> But I need to disable tls 1.0 and 1.1. 
> 
> I was hoping to find a parameter I could pass in to make the system only recognise 1.2 and 1.3. But could not find anything that would do that. I thought sslmethod would be what I wanted but that is limited to :
> 
> Must be one of: "SSLv23_METHOD", "SSLv2_METHOD", "SSLv3_METHOD", "TLSv1_METHOD".
> 
> If I choose TLSv1_METHOD, TLS1.0 and 1.1 are still enabled and QUALYS complains and downgrades the rating to B
> 
> In the end I found _defaultMinimumTLSVersion in _sslverify.py.
> 
> I set this to TLSVersion.TLSv1_2 and that seemed to do the trick.
> 
> But I don't think I should be doing that. I think I've missed some obvious place where I can pass in a value to change this.
> 
> Anyone  know where I should be looking.
> 
> Thanks for any info
> 
> -- 
> John Aherne
> 
> 
> 
> www.rocs.co.uk <http://www.rocs.co.uk/>
> 020 7223 7567
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/151f2a5b/attachment.htm>

From johnaherne at rocs.co.uk  Mon Aug 31 11:02:08 2020
From: johnaherne at rocs.co.uk (John Aherne)
Date: Mon, 31 Aug 2020 18:02:08 +0100
Subject: [Twisted-Python] Block TLS 1.0 and TLS 1.1 support on windows
In-Reply-To: <A00C9A04-35D7-40FD-82F6-AB729639D100@me.com>
References: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>
 <A00C9A04-35D7-40FD-82F6-AB729639D100@me.com>
Message-ID: <CAKmUHja9Fb3RctE1Wkaarh8ZsZZLKP+MGi24PUPSeo7-D9LiaQ@mail.gmail.com>

Thanks. That was quick.

Just wondering how I can add that to my endpoint_description create
serverfromstring.

Or will I have to drop that.

Let me  take a look.

Cheers

John

On Mon, Aug 31, 2020 at 4:58 PM L. Daniel Burr <ldanielburr at me.com> wrote:

> Hi John,
>
> I think you want
> https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html,
> specifically, you want to pass the "raiseMinimumTo" parameter,
>
> Hope this helps,
>
> L. Daniel Burr
>
> On Aug 31, 2020, at 10:47 AM, John Aherne <johnaherne at rocs.co.uk> wrote:
>
>  I'm using twisted 20.3 and python3.6.8 and Windows 10
>
> I'm using endpoint_description with a tac file to start up a server.
>
> But I need to disable tls 1.0 and 1.1.
>
> I was hoping to find a parameter I could pass in to make the system only
> recognise 1.2 and 1.3. But could not find anything that would do that. I
> thought sslmethod would be what I wanted but that is limited to :
>
> Must be one of: "SSLv23_METHOD", "SSLv2_METHOD", "SSLv3_METHOD",
> "TLSv1_METHOD". If I choose TLSv1_METHOD, TLS1.0 and 1.1 are still enabled
> and QUALYS complains and downgrades the rating to B
> In the end I found _defaultMinimumTLSVersion in _sslverify.py.
>
> I set this to TLSVersion.TLSv1_2 and that seemed to do the trick.
>
> But I don't think I should be doing that. I think I've missed some obvious
> place where I can pass in a value to change this.
>
> Anyone  know where I should be looking.
>
> Thanks for any info
>
> --
> *John Aherne*
>
>
>
>
> *www.rocs.co.uk <http://www.rocs.co.uk/>*
> 020 7223 7567
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
*John Aherne*




*www.rocs.co.uk <http://www.rocs.co.uk>*
020 7223 7567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/0c7f9d07/attachment-0001.htm>

From rodrigc at crodrigues.org  Mon Aug 31 11:06:25 2020
From: rodrigc at crodrigues.org (Craig Rodrigues)
Date: Mon, 31 Aug 2020 10:06:25 -0700
Subject: [Twisted-Python] Pycodestyle disabled in trunk,
 time to enable black?
Message-ID: <CAG=rPVcv3xTpYvJmdqepqWrQgrqgwrzo-PqWDZdNp3shhoPkUg@mail.gmail.com>

In this PR:
https://github.com/twisted/twisted/pull/1365

pycodestyle was disabled in trunk in order to make it easier to merge
changes
and not have pycodestyle error out, due to the code not meeting existing
Twisted style guidelines.
So this means that the old pycodestyle is not enforced in trunk.

In this PR:
https://github.com/twisted/twisted/pull/1356

a `.git-blame-ignore-revs
<https://github.com/twisted/twisted/pull/1356/commits/294aaf3eeaba41d64a80644bd3355a9b153047e8>`
file was added to the tree.  I guess in future,
if the entire tree is reformatted, then we can add that git SHA for the PR
which reformats
the tree, so that that revision will be ignored during a `git blame`.

There is this pending (over 1 year) PR to add black to CI:

https://github.com/twisted/twisted/pull/1134

There are some comments in there related to documentation changes.
Can the non-documentation changes be pulled out of PR 1134 and merged to
trunk now?

I guess whenever black is merged to trunk, then a follow-up PR to update
`.git-blame-ignore-devs` would be required?

--
Craig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/fd14b34e/attachment.htm>

From ldanielburr at me.com  Mon Aug 31 12:25:41 2020
From: ldanielburr at me.com (L. Daniel Burr)
Date: Mon, 31 Aug 2020 13:25:41 -0500
Subject: [Twisted-Python] Block TLS 1.0 and TLS 1.1 support on windows
In-Reply-To: <CAKmUHja9Fb3RctE1Wkaarh8ZsZZLKP+MGi24PUPSeo7-D9LiaQ@mail.gmail.com>
References: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>
 <A00C9A04-35D7-40FD-82F6-AB729639D100@me.com>
 <CAKmUHja9Fb3RctE1Wkaarh8ZsZZLKP+MGi24PUPSeo7-D9LiaQ@mail.gmail.com>
Message-ID: <7E3D8992-FB27-493E-802E-AC47725B3C56@me.com>

Hi John,

I don't think you can accomplish it via a change to the description string, because serverFromString relies on the existing _parseSSL function is only passing the deprecated ssl method argument to CertificateOptions.

I haven't tried this myself, but I think the solution is to provide your own plugin, implementing IPlugin and IStreamServerEndpointStringParser, e.g. "MyTLSParser" and use your own description string, e.g., "tls:443:raiseMinimumTo=...".

Or maybe there's a ticket somewhere about updating the existing ssl description and parser to handle the new CertificateOptions arguments.  That might be the right thing to implement.

Hope this helps,

L. Daniel Burr

> On Aug 31, 2020, at 12:02 PM, John Aherne <johnaherne at rocs.co.uk> wrote:
> 
> Thanks. That was quick.
> 
> Just wondering how I can add that to my endpoint_description create serverfromstring.
> 
> Or will I have to drop that.
> 
> Let me  take a look.
> 
> Cheers
> 
> John
> 
> On Mon, Aug 31, 2020 at 4:58 PM L. Daniel Burr <ldanielburr at me.com <mailto:ldanielburr at me.com>> wrote:
> Hi John,
> 
> I think you want https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html <https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html>, specifically, you want to pass the "raiseMinimumTo" parameter,
> 
> Hope this helps,
> 
> L. Daniel Burr
> 
>> On Aug 31, 2020, at 10:47 AM, John Aherne <johnaherne at rocs.co.uk <mailto:johnaherne at rocs.co.uk>> wrote:
>> 
>>  I'm using twisted 20.3 and python3.6.8 and Windows 10  
>> 
>> I'm using endpoint_description with a tac file to start up a server.
>> 
>> But I need to disable tls 1.0 and 1.1. 
>> 
>> I was hoping to find a parameter I could pass in to make the system only recognise 1.2 and 1.3. But could not find anything that would do that. I thought sslmethod would be what I wanted but that is limited to :
>> 
>> Must be one of: "SSLv23_METHOD", "SSLv2_METHOD", "SSLv3_METHOD", "TLSv1_METHOD".
>> 
>> If I choose TLSv1_METHOD, TLS1.0 and 1.1 are still enabled and QUALYS complains and downgrades the rating to B
>> 
>> In the end I found _defaultMinimumTLSVersion in _sslverify.py.
>> 
>> I set this to TLSVersion.TLSv1_2 and that seemed to do the trick.
>> 
>> But I don't think I should be doing that. I think I've missed some obvious place where I can pass in a value to change this.
>> 
>> Anyone  know where I should be looking.
>> 
>> Thanks for any info
>> 
>> -- 
>> John Aherne
>> 
>> 
>> 
>> www.rocs.co.uk <http://www.rocs.co.uk/>
>> 020 7223 7567
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> 
> 
> -- 
> John Aherne
> 
> 
> 
> www.rocs.co.uk <http://www.rocs.co.uk/>
> 020 7223 7567
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/696fdf07/attachment.htm>

From johnaherne at rocs.co.uk  Mon Aug 31 14:16:12 2020
From: johnaherne at rocs.co.uk (John Aherne)
Date: Mon, 31 Aug 2020 21:16:12 +0100
Subject: [Twisted-Python] Block TLS 1.0 and TLS 1.1 support on windows
In-Reply-To: <7E3D8992-FB27-493E-802E-AC47725B3C56@me.com>
References: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>
 <A00C9A04-35D7-40FD-82F6-AB729639D100@me.com>
 <CAKmUHja9Fb3RctE1Wkaarh8ZsZZLKP+MGi24PUPSeo7-D9LiaQ@mail.gmail.com>
 <7E3D8992-FB27-493E-802E-AC47725B3C56@me.com>
Message-ID: <CAKmUHjaSzx2V_qMOpFZjZY2VTSUo2kRkdQ4VjL6EbdzcL=Q0vw@mail.gmail.com>

Thanks for looking all this up.

I'd already decided to drop the endpoint server from string.

So I'm using Hynek Schlaweck PEM package to build the certificate options.

That seems to be working. Anyway I'm getting an A from Qualys at the moment
having reset the _defaultMinimumTLSVersion back to its default of tlsv1_0
and passing the raiseMinimumTo as TLSVersion.TLS1_2

Thanks for the pointers.

John



On Mon, Aug 31, 2020 at 7:26 PM L. Daniel Burr <ldanielburr at me.com> wrote:

> Hi John,
>
> I don't think you can accomplish it via a change to the description
> string, because serverFromString relies on the existing _parseSSL function
> is only passing the deprecated ssl method argument to CertificateOptions.
>
> I haven't tried this myself, but I think the solution is to provide your
> own plugin, implementing IPlugin and IStreamServerEndpointStringParser,
> e.g. "MyTLSParser" and use your own description string, e.g.,
> "tls:443:raiseMinimumTo=...".
>
> Or maybe there's a ticket somewhere about updating the existing ssl
> description and parser to handle the new CertificateOptions arguments.
> That might be the right thing to implement.
>
> Hope this helps,
>
> L. Daniel Burr
>
> On Aug 31, 2020, at 12:02 PM, John Aherne <johnaherne at rocs.co.uk> wrote:
>
> Thanks. That was quick.
>
> Just wondering how I can add that to my endpoint_description create
> serverfromstring.
>
> Or will I have to drop that.
>
> Let me  take a look.
>
> Cheers
>
> John
>
> On Mon, Aug 31, 2020 at 4:58 PM L. Daniel Burr <ldanielburr at me.com> wrote:
>
>> Hi John,
>>
>> I think you want
>> https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html,
>> specifically, you want to pass the "raiseMinimumTo" parameter,
>>
>> Hope this helps,
>>
>> L. Daniel Burr
>>
>> On Aug 31, 2020, at 10:47 AM, John Aherne <johnaherne at rocs.co.uk> wrote:
>>
>>  I'm using twisted 20.3 and python3.6.8 and Windows 10
>>
>> I'm using endpoint_description with a tac file to start up a server.
>>
>> But I need to disable tls 1.0 and 1.1.
>>
>> I was hoping to find a parameter I could pass in to make the system only
>> recognise 1.2 and 1.3. But could not find anything that would do that. I
>> thought sslmethod would be what I wanted but that is limited to :
>>
>> Must be one of: "SSLv23_METHOD", "SSLv2_METHOD", "SSLv3_METHOD",
>> "TLSv1_METHOD". If I choose TLSv1_METHOD, TLS1.0 and 1.1 are still enabled
>> and QUALYS complains and downgrades the rating to B
>> In the end I found _defaultMinimumTLSVersion in _sslverify.py.
>>
>> I set this to TLSVersion.TLSv1_2 and that seemed to do the trick.
>>
>> But I don't think I should be doing that. I think I've missed some
>> obvious place where I can pass in a value to change this.
>>
>> Anyone  know where I should be looking.
>>
>> Thanks for any info
>>
>> --
>> *John Aherne*
>>
>>
>>
>>
>> *www.rocs.co.uk <http://www.rocs.co.uk/>*
>> 020 7223 7567
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
>
> --
> *John Aherne*
>
>
>
>
> *www.rocs.co.uk <http://www.rocs.co.uk/>*
> 020 7223 7567
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>


-- 
*John Aherne*




*www.rocs.co.uk <http://www.rocs.co.uk>*
020 7223 7567
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/f4ad5f5e/attachment-0001.htm>

From glyph at twistedmatrix.com  Mon Aug 31 22:47:41 2020
From: glyph at twistedmatrix.com (Glyph)
Date: Mon, 31 Aug 2020 21:47:41 -0700
Subject: [Twisted-Python] Block TLS 1.0 and TLS 1.1 support on windows
In-Reply-To: <CAKmUHjaSzx2V_qMOpFZjZY2VTSUo2kRkdQ4VjL6EbdzcL=Q0vw@mail.gmail.com>
References: <CAKmUHjahRQ6TeG-42adF+RBpGSjMEQ=2SrzRo2-=d791nrBQEw@mail.gmail.com>
 <A00C9A04-35D7-40FD-82F6-AB729639D100@me.com>
 <CAKmUHja9Fb3RctE1Wkaarh8ZsZZLKP+MGi24PUPSeo7-D9LiaQ@mail.gmail.com>
 <7E3D8992-FB27-493E-802E-AC47725B3C56@me.com>
 <CAKmUHjaSzx2V_qMOpFZjZY2VTSUo2kRkdQ4VjL6EbdzcL=Q0vw@mail.gmail.com>
Message-ID: <C779BA3D-E06D-400F-BFDD-8DA3B5915798@twistedmatrix.com>

Super glad you got this working!

However, what L. Daniel Burr suggested is correct - whether there's an existing ticket or not, the string endpoint should support all of these features.

(However, using pem is fine, too.)

-g

> On Aug 31, 2020, at 1:16 PM, John Aherne <johnaherne at rocs.co.uk> wrote:
> 
> Thanks for looking all this up.
> 
> I'd already decided to drop the endpoint server from string.
> 
> So I'm using Hynek Schlaweck PEM package to build the certificate options.
> 
> That seems to be working. Anyway I'm getting an A from Qualys at the moment having reset the _defaultMinimumTLSVersion back to its default of tlsv1_0 and passing the raiseMinimumTo as TLSVersion.TLS1_2
> 
> Thanks for the pointers.
> 
> John
> 
> 
> 
> On Mon, Aug 31, 2020 at 7:26 PM L. Daniel Burr <ldanielburr at me.com <mailto:ldanielburr at me.com>> wrote:
> Hi John,
> 
> I don't think you can accomplish it via a change to the description string, because serverFromString relies on the existing _parseSSL function is only passing the deprecated ssl method argument to CertificateOptions.
> 
> I haven't tried this myself, but I think the solution is to provide your own plugin, implementing IPlugin and IStreamServerEndpointStringParser, e.g. "MyTLSParser" and use your own description string, e.g., "tls:443:raiseMinimumTo=...".
> 
> Or maybe there's a ticket somewhere about updating the existing ssl description and parser to handle the new CertificateOptions arguments.  That might be the right thing to implement.
> 
> Hope this helps,
> 
> L. Daniel Burr
> 
>> On Aug 31, 2020, at 12:02 PM, John Aherne <johnaherne at rocs.co.uk <mailto:johnaherne at rocs.co.uk>> wrote:
>> 
>> Thanks. That was quick.
>> 
>> Just wondering how I can add that to my endpoint_description create serverfromstring.
>> 
>> Or will I have to drop that.
>> 
>> Let me  take a look.
>> 
>> Cheers
>> 
>> John
>> 
>> On Mon, Aug 31, 2020 at 4:58 PM L. Daniel Burr <ldanielburr at me.com <mailto:ldanielburr at me.com>> wrote:
>> Hi John,
>> 
>> I think you want https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html <https://twistedmatrix.com/documents/20.3.0/api/twisted.internet.ssl.CertificateOptions.html>, specifically, you want to pass the "raiseMinimumTo" parameter,
>> 
>> Hope this helps,
>> 
>> L. Daniel Burr
>> 
>>> On Aug 31, 2020, at 10:47 AM, John Aherne <johnaherne at rocs.co.uk <mailto:johnaherne at rocs.co.uk>> wrote:
>>> 
>>>  I'm using twisted 20.3 and python3.6.8 and Windows 10  
>>> 
>>> I'm using endpoint_description with a tac file to start up a server.
>>> 
>>> But I need to disable tls 1.0 and 1.1. 
>>> 
>>> I was hoping to find a parameter I could pass in to make the system only recognise 1.2 and 1.3. But could not find anything that would do that. I thought sslmethod would be what I wanted but that is limited to :
>>> 
>>> Must be one of: "SSLv23_METHOD", "SSLv2_METHOD", "SSLv3_METHOD", "TLSv1_METHOD".
>>> 
>>> If I choose TLSv1_METHOD, TLS1.0 and 1.1 are still enabled and QUALYS complains and downgrades the rating to B
>>> 
>>> In the end I found _defaultMinimumTLSVersion in _sslverify.py.
>>> 
>>> I set this to TLSVersion.TLSv1_2 and that seemed to do the trick.
>>> 
>>> But I don't think I should be doing that. I think I've missed some obvious place where I can pass in a value to change this.
>>> 
>>> Anyone  know where I should be looking.
>>> 
>>> Thanks for any info
>>> 
>>> -- 
>>> John Aherne
>>> 
>>> 
>>> 
>>> www.rocs.co.uk <http://www.rocs.co.uk/>
>>> 020 7223 7567
>>> _______________________________________________
>>> Twisted-Python mailing list
>>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
>> 
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
>> 
>> 
>> -- 
>> John Aherne
>> 
>> 
>> 
>> www.rocs.co.uk <http://www.rocs.co.uk/>
>> 020 7223 7567
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
>> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com <mailto:Twisted-Python at twistedmatrix.com>
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python <https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python>
> 
> 
> -- 
> John Aherne
> 
> 
> 
> www.rocs.co.uk <http://www.rocs.co.uk/>
> 020 7223 7567
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20200831/a0996623/attachment.htm>

