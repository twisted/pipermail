<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Writing unit tests with Trial for Twisted Applications
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20unit%20tests%20with%20Trial%20for%20Twisted%20Applications&In-Reply-To=20031002033810.GA1739%40intarweb.us">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005869.html">
   <LINK REL="Next"  HREF="005868.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Writing unit tests with Trial for Twisted Applications</H1>
    <B>Glyph Lefkowitz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Writing%20unit%20tests%20with%20Trial%20for%20Twisted%20Applications&In-Reply-To=20031002033810.GA1739%40intarweb.us"
       TITLE="[Twisted-Python] Writing unit tests with Trial for Twisted Applications">glyph at twistedmatrix.com
       </A><BR>
    <I>Thu Oct  2 00:29:34 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005869.html">[Twisted-Python] Writing unit tests with Trial for Twisted Applications
</A></li>
        <LI>Next message: <A HREF="005868.html">[Twisted-Python] Writing unit tests with Trial for Twisted Applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5870">[ date ]</a>
              <a href="thread.html#5870">[ thread ]</a>
              <a href="subject.html#5870">[ subject ]</a>
              <a href="author.html#5870">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jp Calderone wrote:
&gt;<i> Only a few of the tests you write should actually go over the
</I>&gt;<i> network -- note that loopback.loopback() and the rest of the fake transport
</I>&gt;<i> bit fall into this category!).  The bulk of your functionality should be
</I>&gt;<i> testable in isolation of the network code.  If it's not, consider trying to
</I>&gt;<i> rewrite it so it is.  This will lead to simpler, more reliable tests as well
</I>&gt;<i> as simpler and more modular code.
</I>
The ideal situation in this case would be to have a briefer answer like 
&quot;Use trial.prototest&quot; or something.  While I appreciate the &quot;Unit&quot; 
aspect of unit tests (test only what you're testing) it's still good to 
actually exercise a little network code under the covers, since the OS 
can do difficult-to-replicate-and-test things in different environments.

I can't think of an easy way to do this, but there should be a 
'listenTest' utility function which can listen over TCP or SSL, or over 
a loopback connection that doesn't consume OS resources, based on a 
switch to the trial commandline.  That way we can exercise both 
interactions of the higher levels with the lower levels and the higher 
levels in effective isolation.

It occurs to me that a test reactor package would be useful for more 
than that - testReactor.run() could monitor the event loop for state 
changes - if no data is sent or received in a given iteration, then you 
know that the reactor is going to hang and you can raise a test failure 
to that effect rather than consuming CPU and hiding the traceback.

(Am I making sense here?)



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005869.html">[Twisted-Python] Writing unit tests with Trial for Twisted Applications
</A></li>
	<LI>Next message: <A HREF="005868.html">[Twisted-Python] Writing unit tests with Trial for Twisted Applications
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5870">[ date ]</a>
              <a href="thread.html#5870">[ thread ]</a>
              <a href="subject.html#5870">[ subject ]</a>
              <a href="author.html#5870">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
