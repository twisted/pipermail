<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Twisted.Names question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Twisted.Names%20question&In-Reply-To=3F81BEAF.1060500%40pandora.be">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005967.html">
   <LINK REL="Next"  HREF="005966.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Twisted.Names question</H1>
    <B>Jp Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20Twisted.Names%20question&In-Reply-To=3F81BEAF.1060500%40pandora.be"
       TITLE="[Twisted-Python] Re: Twisted.Names question">exarkun at twistedmatrix.com
       </A><BR>
    <I>Wed Oct  8 10:59:19 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005967.html">[Twisted-Python] hardcoded SIZE_LIMIT
</A></li>
        <LI>Next message: <A HREF="005966.html">[Twisted-Python] SSL client certificate verification...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5961">[ date ]</a>
              <a href="thread.html#5961">[ thread ]</a>
              <a href="subject.html#5961">[ subject ]</a>
              <a href="author.html#5961">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 06, 2003 at 09:12:47PM +0200, Rudy Schockaert wrote:
&gt;<i> [snip]
</I>&gt;<i>
</I>&gt;<i> I think it may help when I explain the problem.
</I>&gt;<i>
</I> &gt; There are a number of rather large organisations that each have their 
&gt;<i> own connection to the Internet. Besides this they are also connected to 
</I>&gt;<i> a private WAN.
</I>&gt;<i>
</I>&gt;<i> The WAN provider wants to offer a kind of secure mail, in the sense that 
</I>&gt;<i> email between these organisations is not routed over the Internet but 
</I>&gt;<i> over the WAN. All traffic over the WAN is IPSec, thus secure.
</I>&gt;<i> Reconfiguring all mail relay servers of all those organisations is an 
</I>&gt;<i> impossible task and certainly not maintainable.
</I>&gt;<i> The zone definitions for each of the organisations must remain 
</I>&gt;<i> unchanged, other organisations must recieve the normal Internet address 
</I>&gt;<i> as result on a MX query.
</I>&gt;<i>
</I>&gt;<i> The plan is to have a Twisted.Names server with only two caches and no 
</I>&gt;<i> authorative zones or forwarders. The first cache will be preloaded with 
</I>&gt;<i> MX records and A records that route the mail over the WAN. There will be 
</I>&gt;<i> nothing in CacheResolver.cancel() so these entries are never removed. 
</I>&gt;<i> When the records are served, they will be put in the last cache and stay 
</I>&gt;<i> there for as long as the TTL dictates. This way I can override DNS 
</I>&gt;<i> records without creating an authorative zone.
</I>&gt;<i>
</I>&gt;<i> Each organisation would have such a Twisted. Names server on 'the way 
</I>&gt;<i> out'. The preloaded cache would then be synchronised with a centrally 
</I>&gt;<i> managed Master Twisted.server.
</I>&gt;<i> 
</I>&gt;<i> Now, I proposed to have Twisted.Names forward queries it cannot resolv 
</I>&gt;<i> itself  to the internet, but that seems unacceptable. They want that all 
</I>&gt;<i> other queries are directly resolved by Internet DNS servers. They also 
</I>&gt;<i> want the Master Twisted.Names server to act as a backup in case the 
</I>&gt;<i> slave of the company is down or so. But on the other hand they don't 
</I>&gt;<i> want all queries first sent to both Twisted.Names servers and only then 
</I>&gt;<i> to the Internet. So they proposed to return referrals for each record 
</I>&gt;<i> that is not in Twisted.Names.
</I>&gt;<i> 
</I>
  This sounds like a complex problem, and I am by no means an expert,
however, I'll take a stab...

  Returning NS records of the authority for unhandled names is something
t.names doesn't support.  It should not be difficult to add, though.  This
would probably be done by creating a new kind of Resolver, once that just
looked up and return NS records, regardless of query type, and putting it at
the back of the resolver chain.

  Aside from implementing this, everything else for the scenario you
describe is probably already supported, the trick is just configuring all
the pieces properly.

  So, you probably want just two resolvers in a ResolverChain, in a server
running on the internal interface of each of these networks (I'm not sure if
this would be the WAN network, or a private network for each participating
organisation).  The first resolver would be your preloaded CacheResolver,
the second would be the new NS resolver described above.  Arguably the NS
resolver should be present in t.names for it to be a proper nameserver
anyway... but that is a different discussion :)

  I'm not sure I've said anything insightful, but I hope it helps.

  Jp
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20031008/77f3f416/attachment.pgp">http://twistedmatrix.com/pipermail/twisted-python/attachments/20031008/77f3f416/attachment.pgp</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005967.html">[Twisted-Python] hardcoded SIZE_LIMIT
</A></li>
	<LI>Next message: <A HREF="005966.html">[Twisted-Python] SSL client certificate verification...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5961">[ date ]</a>
              <a href="thread.html#5961">[ thread ]</a>
              <a href="subject.html#5961">[ subject ]</a>
              <a href="author.html#5961">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
