<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Woven Model extreme pain
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Woven%20Model%20extreme%20pain&In-Reply-To=uad8iu3gf.fsf%40inout.no">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005904.html">
   <LINK REL="Next"  HREF="005879.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Woven Model extreme pain</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Woven%20Model%20extreme%20pain&In-Reply-To=uad8iu3gf.fsf%40inout.no"
       TITLE="[Twisted-Python] Woven Model extreme pain">dp at twistedmatrix.com
       </A><BR>
    <I>Fri Oct  3 12:49:27 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005904.html">[Twisted-Python] Woven Model extreme pain
</A></li>
        <LI>Next message: <A HREF="005879.html">[Twisted-Python] Can twisted serve java applets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5888">[ date ]</a>
              <a href="thread.html#5888">[ thread ]</a>
              <a href="subject.html#5888">[ subject ]</a>
              <a href="author.html#5888">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 3, 2003, at 4:32 AM, Syver Enstad wrote:

&gt;<i> James Y Knight &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">foom at fuhm.net</A>&gt; writes:
</I>&gt;<i>
</I>&gt;&gt;<i> More ARRRRRRRRRRGGGGGGGH.
</I>
&lt;snip&gt;

I apologize. Woven's Deferred support is only very lightly tested 
because every application I have built in Woven has not been very 
deferred-heavy, and when I have had to use Deferreds I am able to use 
them because I wrote the code.

Writing code which handles Deferreds in every conceivable situation is 
very difficult because it makes the code more verbose and less linear. 
This is mostly due to Python's lack of a block syntax, and there's not 
a lot we can do about it. Woven supports deferreds by checking for 
Deferred results from two woven APIs:

Widget.generate

Controller.handle

If a Deferred is returned from either of these functions, Woven will 
not recurse into the DOM branch which the Widget or Controller was 
handling until the Deferred has fired. Woven will continue rendering 
the rest of the page, and when it gets to the end, if there are 
outstanding Deferreds, it will not send the page to the browser until 
these Deferred tasks have completed.

When a Deferred fires, Woven will then recurse into the DOM branch 
related to the Deferred. If a DOM node below that one contains a 
directive which produces a Widget or Controller which returns a 
Deferred, the process will be repeated.

This is basically how Woven's Deferred support works.

The first thing Widget.generate does is call Model.getData. If 
Model.getData returns a Deferred, it will add a callback to it which 
continues the Widget rendering process when the Deferred has fired.

This is why the layout described below by Syver is required. There is 
no support for Deferreds in lookupSubmodel (the code which parses 
model=&quot;foo/bar&quot;)

Also, the IModel interface was designed about a year and a half ago, at 
the very beginning of DOMTemplate and WebMVC development. It turned out 
to be a fairly cumbersome API to use (one which only existed because of 
python's lack of the concept of a handle) and after Glyph wrote 
submodelFactory and MethodModel, I have mostly relied on using that.

&gt;<i> I've also been down this road James. You can't tunnel through
</I>&gt;<i> deferreds in the submodel path, and you have to specify a view for the
</I>&gt;<i> deferred system to work.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Examples:
</I>
&lt;snip&gt;

All of these examples and explanations seem correct. The fact that such 
an elaborate dance is required I would consider a bug, but 
unfortunately I don't have a lot of time for core woven development 
right now.

Woven was developed over the course of a year, in my spare time, while 
I had a day job.

Now that woven is stable enough for me to use, I have slowed 
development on it because it enables me to get my paying work done, and 
a lot of the quirks in the API don't bother me because I know enough to 
avoid them.

While I believe the core ideas behind Woven are very good, a lot of the 
implementation details are more complicated than they should be (as you 
have noticed). I would very much like to do a ground-up rewrite which 
would simplify the way things work greatly while still supporting the 
best ideas from the current Woven and as much backwards-compatibility 
as is feasible.

I don't have the time to do a ground-up rewrite right now and still get 
paid to do my regular, day job.

Since woven is now good enough to develop very large, complicated web 
applications with, other people have started showing far more interest 
in it. Unfortunately, not everyone has the experience with the internal 
details of Woven to know what to try and what to avoid. Probably the 
best way to proceed in the short term is to come up with some sort of 
&quot;Best practices&quot; documentation which describes how best to get your 
work done with Woven while avoiding pain.

dp



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005904.html">[Twisted-Python] Woven Model extreme pain
</A></li>
	<LI>Next message: <A HREF="005879.html">[Twisted-Python] Can twisted serve java applets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5888">[ date ]</a>
              <a href="thread.html#5888">[ thread ]</a>
              <a href="subject.html#5888">[ subject ]</a>
              <a href="author.html#5888">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
