<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Odd behavior in IRC logbot
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Odd%20behavior%20in%20IRC%20logbot&In-Reply-To=%3C20031025162138.GB32552%40frobozz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="038637.html">
   <LINK REL="Next"  HREF="038641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Odd behavior in IRC logbot</H1>
    <B>Andrew Bennetts</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Odd%20behavior%20in%20IRC%20logbot&In-Reply-To=%3C20031025162138.GB32552%40frobozz%3E"
       TITLE="[Twisted-Python] Odd behavior in IRC logbot">andrew-twisted at puzzling.org
       </A><BR>
    <I>Sat Oct 25 10:21:38 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="038637.html">[Twisted-Python] Odd behavior in IRC logbot
</A></li>
        <LI>Next message (by thread): <A HREF="038641.html">[Twisted-Python] Odd behavior in IRC logbot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38638">[ date ]</a>
              <a href="thread.html#38638">[ thread ]</a>
              <a href="subject.html#38638">[ subject ]</a>
              <a href="author.html#38638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Oct 25, 2003 at 10:07:42AM -0400, Phillip J. Eby wrote:
&gt;<i> I've been using a slightly modified version of the IRC logging bot example 
</I>&gt;<i> to log traffic on #peak.  I've noticed, however, that it occasionally seems 
</I>&gt;<i> to hang, and has to be manually restarted.  As a workaround, I've set up a 
</I>&gt;<i> cronjob to kill and restart it daily, but that seems like a kludge.
</I>&gt;<i> 
</I>&gt;<i> Does anybody know why this happens?  Is there some kind of reconnect 
</I>&gt;<i> timeout such that it'll give up on reconnecting if the server it's trying 
</I>&gt;<i> to connect to is down?  I've noticed that the hang behavior seems to be 
</I>&gt;<i> correlated with global announcements about shutting down the IRC netwrok.
</I>
The ClientFactory subclass in doc/examples/ircLogBot.py is very simple:
    ...
    def clientConnectionLost(self, connector, reason):
        &quot;&quot;&quot;If we get disconnected, reconnect to server.&quot;&quot;&quot;
        connector.connect()

    def clientConnectionFailed(self, connector, reason):
        print &quot;connection failed:&quot;, reason
        reactor.stop()
    ...

Perhaps clientConnectionFailed is being triggered, instead of
clientConnectionLost (which has no delay at all, as you can see)?  (The docs
don't clearly say this, but ccF is called when there was no connection
established, and ccL is called when a connection was made and then
disconnected).

(I'm presuming your slightly modified version hasn't changed the
LogBotFactory...)

-Andrew.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="038637.html">[Twisted-Python] Odd behavior in IRC logbot
</A></li>
	<LI>Next message (by thread): <A HREF="038641.html">[Twisted-Python] Odd behavior in IRC logbot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38638">[ date ]</a>
              <a href="thread.html#38638">[ thread ]</a>
              <a href="subject.html#38638">[ subject ]</a>
              <a href="author.html#38638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
