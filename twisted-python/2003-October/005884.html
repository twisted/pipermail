<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] FTPClient storeFile help.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20FTPClient%20storeFile%20help.&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005930.html">
   <LINK REL="Next"  HREF="005890.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] FTPClient storeFile help.</H1>
    <B>Oisin Mulvihill</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20FTPClient%20storeFile%20help.&In-Reply-To="
       TITLE="[Twisted-Python] FTPClient storeFile help.">oisin at enginesofcreation.ie
       </A><BR>
    <I>Fri Oct  3 06:18:28 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005930.html">[Twisted-Python] woven authentications and connections.
</A></li>
        <LI>Next message: <A HREF="005890.html">[Twisted-Python] FTPClient storeFile help.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5884">[ date ]</a>
              <a href="thread.html#5884">[ thread ]</a>
              <a href="subject.html#5884">[ subject ]</a>
              <a href="author.html#5884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Glyph Lefkowitz wrote:

&gt;<i> Oisin Mulvihill wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I confess I really don't know how to handle the two deferred
</I>&gt;&gt;<i> object that get returned by storeFile. I just add callback/
</I>&gt;&gt;<i> errorback for each, this could be the problem.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If you want to wait for both, use twisted.internet.defer.DeferredList.
</I>&gt;<i>
</I>Why are there two deferred objects returned by storeFile? The documentation
says:

storeFile (self ,path ):

    Store a file at the given path.

    This method issues the 'STOR' FTP command.

    Returns:

    A tuple of two Deferreds:
        
    * Deferred IFinishableConsumer . You must call the finish method on the
        IFinishableConsumer when the file is completely transferred.

    * Deferred list of  control-connection responses.

This really doesn't help me much. I get the impression that storeFile
isn't sending the contents of file, because its waiting for me to stream
the file contents somehow. Maybe via IFinishableConsumer?

In my current program, using ftplib, I do the following to upload a file:

    :
    ftp.storbinary('STOR %s' % (filename), fp)
    :

This has the filename and a file descriptor passed to it. Is something 
like this
needed with storeFile?

Please can someone give me an answer to this, as looking at the code for
twisted.protocols.ftp isn't helping much either. This function seems to be
a mystery to me and I want to understand how to use it properly.

Thanks,

om


&gt;&gt;<i> Can anyone enlighten me as to what I'm doing wrong. I would
</I>&gt;&gt;<i> really like to use proper async behavior for doing the uploads,
</I>&gt;&gt;<i> instead of using threads + ftplib.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The FTP implementation in Twisted is sub-optimal (although that's 
</I>&gt;<i> mostly the server).  If you don't get any satisfactory responses I 
</I>&gt;<i> recommend assigning a bug to spiv in the tracker :).
</I>&gt;<i>
</I>
-- 
Oisin Mulvihill
Engines Of Creation

Email: <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">oisin at enginesofcreation.ie</A>
Work: +353 1 6791602
Mobile: +353 868191540





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005930.html">[Twisted-Python] woven authentications and connections.
</A></li>
	<LI>Next message: <A HREF="005890.html">[Twisted-Python] FTPClient storeFile help.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5884">[ date ]</a>
              <a href="thread.html#5884">[ thread ]</a>
              <a href="subject.html#5884">[ subject ]</a>
              <a href="author.html#5884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
