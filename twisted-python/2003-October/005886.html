<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Adapter%20troubles%20-%20Copying%20Quotient%27s%20DivmodSession&In-Reply-To=20031002143039.784EB3D96E%40www.fastmail.fm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005875.html">
   <LINK REL="Next"  HREF="005935.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession</H1>
    <B>Donovan Preston</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Adapter%20troubles%20-%20Copying%20Quotient%27s%20DivmodSession&In-Reply-To=20031002143039.784EB3D96E%40www.fastmail.fm"
       TITLE="[Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession">dp at twistedmatrix.com
       </A><BR>
    <I>Fri Oct  3 12:15:07 EDT 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="005875.html">[Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession
</A></li>
        <LI>Next message: <A HREF="005935.html">[Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5886">[ date ]</a>
              <a href="thread.html#5886">[ thread ]</a>
              <a href="subject.html#5886">[ subject ]</a>
              <a href="author.html#5886">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Oct 2, 2003, at 10:30 AM, Justin Johnson wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I've created a class called RatControlSession similar to DivmodSession 
</I>&gt;<i> in
</I>&gt;<i> Quotient.  I define IRatControlSession and RatControlSession, and I
</I>&gt;<i> register RatControlSession as an adapter from 
</I>&gt;<i> twisted.web.server.Session
</I>&gt;<i> to IRatControlSession.  However, when I try to do something like...
</I>&gt;<i>
</I>&gt;<i>     prefs = webinterfaces.IRatControlSession(request.getSession())
</I>&gt;<i>
</I>&gt;<i> I get the following error.  This is a cut-n-paste from what appears in
</I>&gt;<i> the browser.
</I>
&lt;snip exception&gt;

&gt;<i> I'm not sure what I'm doing wrong here.  I looked through components.py
</I>&gt;<i> but still don't see what the problem is.
</I>&gt;<i>
</I>&gt;<i> I've attached webinterfaces.py and session.py, setup similar to
</I>&gt;<i> quotient's respective files.  Also attached is pages.py which defines
</I>&gt;<i> wmfactory_action on MenuPage where I try to create an 
</I>&gt;<i> IRatControlSession
</I>&gt;<i> from request.getSession().
</I>
 From looking at the files, it looks like session is not getting 
imported anywhere. You would think it wouldn't be a problem since you 
are not directly using any of the objects in the module, but unless you 
import a module, the code at the top level of that module does not get 
executed. Thus the registerAdapter calls are never happening, and when 
you go to request an adapter none is registered. Try putting &quot;import 
session&quot; at the top of your pages file.

This is a major problem with using components and twisted -- where to 
register the adapters. Of course, the implementation of components as 
pioneered by Zope 3 uses a non-python file to register adapters (a zcml 
file, a form of XML) and twisted should have something similar 
(preferably not xml) but currently does not.

dp



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005875.html">[Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession
</A></li>
	<LI>Next message: <A HREF="005935.html">[Twisted-Python] Adapter troubles - Copying Quotient's DivmodSession
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5886">[ date ]</a>
              <a href="thread.html#5886">[ thread ]</a>
              <a href="subject.html#5886">[ subject ]</a>
              <a href="author.html#5886">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
