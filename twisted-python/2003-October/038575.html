<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deffered question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Deffered%20question&In-Reply-To=%3C1493025718.20031021155957%40libero.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="038576.html">
   <LINK REL="Next"  HREF="038577.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deffered question</H1>
    <B>Matteo Giacomazzi</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Deffered%20question&In-Reply-To=%3C1493025718.20031021155957%40libero.it%3E"
       TITLE="[Twisted-Python] Deffered question">matteo.giacomazzi at libero.it
       </A><BR>
    <I>Tue Oct 21 07:59:57 MDT 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="038576.html">AW: [Twisted-Python] Deffered question
</A></li>
        <LI>Next message (by thread): <A HREF="038577.html">AW: [Twisted-Python] Deffered question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38575">[ date ]</a>
              <a href="thread.html#38575">[ thread ]</a>
              <a href="subject.html#38575">[ subject ]</a>
              <a href="author.html#38575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> I need to implement a command based protocol, that is a client sends
</I>&gt;<i> a  command  to  the  server  and  waits  for the response. Since the
</I>&gt;<i> response  computation  might  be  time  consuming  I  have to choose
</I>&gt;<i> between 2 solutions:
</I>&gt;<i> - use Twisted deffereds
</I>&gt;<i> - or  write my own implementation, a TCP based threaded server. I'm
</I>&gt;<i> not  worried about scaling since it will not be used by more than 10
</I>&gt;<i> clients at a time.
</I>
I'm facing a problem like this.

I  used  to  have  a multithreaded server (fully written using Python)
that  accepted  commands  via  a  TCP  or  UNIX  socket, elaborate the
response  (tipically  querying  some remote servers via HTTP) and then
returned the response: one query, one thread.

This  server  runs  since  2001, I updated it, upgraded and refactored
some parts, but it's still kinda &quot;heavy&quot; to manage.
So, I realized that multithred is not _always_ the solution.

In  my case, the server was running (with a web server and a DB server
too) on a dual Xeon architecture. So, at most, two threads are running
on  the  same time but there are more chances that only one of them is
running while the other CPU is used by the web server or the DB.

That's the solution I'm building:
- there are different _processes_, one for every kind of remote server
I have to query;
- _processes_ may run on different (hardware) servers;
- processes  communicate via a  &quot;message passing process&quot; I wrote with
Twisted;

So:  one  process  accepts commands via TCP or UNIX socket, it quickly
parses  the  command and sends a message to the right ``server''; this
``server''  process  the command, does-whatever-it-needs and then send
the response to the first process that, in turn, quickly translates it
in a ``line oriented'' way and returns to the caller.

All  the servers are single-thread: that's because I need only to call
a  remote  host  and  to compute very very simple operations. Maybe in
your case threads would help - but how many threads?

I  would be interested in hearing opinion about this architecture from
Twisted experts.

Kindest regards,
 Matteo



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="038576.html">AW: [Twisted-Python] Deffered question
</A></li>
	<LI>Next message (by thread): <A HREF="038577.html">AW: [Twisted-Python] Deffered question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38575">[ date ]</a>
              <a href="thread.html#38575">[ thread ]</a>
              <a href="subject.html#38575">[ subject ]</a>
              <a href="author.html#38575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
