<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] change submodel in a form
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20change%20submodel%20in%20a%20form&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006267.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] change submodel in a form</H1>
    <B>vicky lupien</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20change%20submodel%20in%20a%20form&In-Reply-To="
       TITLE="[Twisted-Python] change submodel in a form">vlupien at drummonddesigns.com
       </A><BR>
    <I>Fri Oct 31 09:52:25 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006267.html">[Twisted-Python] More about twistd and win32 service
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6262">[ date ]</a>
              <a href="thread.html#6262">[ thread ]</a>
              <a href="subject.html#6262">[ subject ]</a>
              <a href="author.html#6262">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a web base application.  I want to change the data in the model
so that it will be update in the form when a post my form.
 
Here's my code:
 
from twisted.web.server import Site
from twisted.internet import reactor
from twisted.web.woven.page import Page
from twisted.web.woven.form import FormProcessor
from twisted.python import formmethod as fm
from twisted.web.woven import input, controller
from twisted.web import domhelpers
 
class FormPage(Page):
 
    template = '''&lt;html&gt;
    &lt;head&gt;&lt;title&gt;a form page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body bgcolor=&quot;c0c0c0&quot;&gt;
    &lt;!--&lt;div model=&quot;args&quot; view=&quot;Text&quot;/&gt;--&gt;
    &lt;br/&gt;&lt;br/&gt;
    &lt;form action=&quot;post&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;table border=&quot;0&quot;&gt;
    &lt;tr&gt;
    &lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;Argument #1:&lt;/td&gt;
    &lt;td valign=&quot;top&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;arg1&quot; value=&quot;&quot; size=&quot;60&quot;
controller=&quot;int&quot; /&gt;
    &lt;div class=&quot;formDescription&quot;&gt;Hooray it is an argument.
    &lt;/div&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
    &lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;Integer Field.: *&lt;/td&gt;
    &lt;td valign=&quot;top&quot;&gt;&lt;input type=&quot;text&quot; name=&quot;arg2&quot; value=&quot;&quot;/&gt;
    &lt;div class=&quot;formDescription&quot;&gt;
    &lt;/div&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
    &lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;TEXT PLS:&lt;/td&gt;
    &lt;td valign=&quot;top&quot;&gt;&lt;textarea wrap=&quot;virtual&quot; rows=&quot;10&quot; cols=&quot;60&quot;
name=&quot;arg5&quot;&gt;HERE IS THE DEFAULT OMG!@#!.&lt;/textarea&gt;
    &lt;div class=&quot;formDescription&quot;&gt;it is some text
    &lt;/div&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/table&gt;&lt;input type=&quot;submit&quot; /&gt;
    &lt;/form&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    '''
 
    def __init__(self):
        Page.__init__(self)
      
    def checkName(self, request, name):
        if name is None:
            return None
        return True
 
    #def commitName(self, request, name=&quot;&quot;):
    #    print self.model
        
    def wvupdate_arg1(self, request, widget, model):
        pass
 
    def wmfactory_arg1(self, request):
        return request.args.get('arg1')
    
    def wcfactory_int(self, request, node, model):
        self.submodel = self.model.getSubmodel(request, &quot;arg1&quot;)
        return input.InputHandler(
            model,
            name = &quot;arg1&quot;,
            check = self.checkName,
            submodel = self.submodel)
            #commit = self.commitName
            
    def wchild_post(self, request):
        return self
 
reactor.listenTCP(8585, Site(FormPage()))
reactor.run()
 
 
Here's the error I get:
 
 
exceptions.TypeError: process() keywords must be strings
 
 
I know that the error comes from controller but I don't know how to
correct it.
Maybe the error is because I'm not very familiar with form.
Thx in advance,
Vicky
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20031031/a8eb7bef/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20031031/a8eb7bef/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006267.html">[Twisted-Python] More about twistd and win32 service
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6262">[ date ]</a>
              <a href="thread.html#6262">[ thread ]</a>
              <a href="subject.html#6262">[ subject ]</a>
              <a href="author.html#6262">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
