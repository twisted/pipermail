<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Clean pb solution for two-way object sync?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Clean%20pb%20solution%20for%20two-way%20object%20sync%3F&In-Reply-To=%3C5245B80E.8080501%40ripton.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027481.html">
   <LINK REL="Next"  HREF="027472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Clean pb solution for two-way object sync?</H1>
    <B>David Ripton</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Clean%20pb%20solution%20for%20two-way%20object%20sync%3F&In-Reply-To=%3C5245B80E.8080501%40ripton.net%3E"
       TITLE="[Twisted-Python] Clean pb solution for two-way object sync?">dripton at ripton.net
       </A><BR>
    <I>Fri Sep 27 10:53:34 MDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="027481.html">[Twisted-Python] Clean pb solution for two-way object sync?
</A></li>
        <LI>Next message: <A HREF="027472.html">[Twisted-Python] question about subprocess
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27482">[ date ]</a>
              <a href="thread.html#27482">[ thread ]</a>
              <a href="subject.html#27482">[ subject ]</a>
              <a href="author.html#27482">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/26/2013 02:05 AM, Daniel Sank wrote:

&gt;<i> I want to implement something functionally equivalent to a network chess
</I>&gt;<i> game. I first consider how I would do this on a single computer with no
</I>&gt;<i> network (maybe this is bad thinking). Each piece in the game is
</I>&gt;<i> represented by an instance of class Agent. Each agent has a .graphics
</I>&gt;<i> attribute which is an instance of a class from a GUI toolkit library or
</I>&gt;<i> equivalent. Whenever an agent in the game needs to do something there
</I>&gt;<i> will be business logic executed by the game objects proper (ie the
</I>&gt;<i> agents) which will invoke methods on the .graphics objects to update the
</I>&gt;<i> screen. This sort of structure seems natural as it allows easy
</I>&gt;<i> integration of drag/drop, mouse click detection etc. It also nicely
</I>&gt;<i> separates the real business logic from the GUI.
</I>
I think you have the right idea but that's still a bit too much coupling 
between the logic and the UI for my taste.  I don't want the game logic 
to have a .graphics attribute; I want the game logic to fling game 
events to one or more consumers, each of which may or may not be a GUI. 
  (Maybe it's a headless AI player.  Maybe it's a logging service.  The 
server shouldn't care.)

&gt;<i> Now I want to run over the network. The question is how should I set up
</I>&gt;<i> references between the client and server objects?
</I>
There's more than one way to do it.

Here's my game that uses PB: <A HREF="https://github.com/dripton/Slugathon">https://github.com/dripton/Slugathon</A>

I used PB (because AMP and Foolscap didn't exist yet), but I didn't use 
the fancy bits of PB like Cacheable, because I strongly prefer simple 
remote method calls to fancy remote objects.  But if you grep for 
callRemote, remote_, and perspective_, you can see how I did it.

As noted above, my game server flings events (see Action.py for what 
they look like) to both GUI and AI clients.  The actions are just little 
value objects that happen to inherit from pb.Copyable and pb.RemoteCopy 
for convenience, though they just as easily be JSON blobs.

Of course, it's probably much easier to just use Cacheable.  It comes 
down to programmer preference.

One piece of advice: do the network code first and always exercise it, 
even when playing on a single computer.  Every time I've written a 
single-machine game first then tried to add networking later, the 
networking has been a mess to debug.

-- 
David Ripton    <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">dripton at ripton.net</A>

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027481.html">[Twisted-Python] Clean pb solution for two-way object sync?
</A></li>
	<LI>Next message: <A HREF="027472.html">[Twisted-Python] question about subprocess
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27482">[ date ]</a>
              <a href="thread.html#27482">[ thread ]</a>
              <a href="subject.html#27482">[ subject ]</a>
              <a href="author.html#27482">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
