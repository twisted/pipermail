<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] run python application with twistd -y ifinger.tac, error occurs. please help to check
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20run%20python%20application%20with%20twistd%20-y%20ifinger.tac%2C%0A%20error%20occurs.%20please%20help%20to%20check&In-Reply-To=%3C771db05d.97d1.1412ae91515.Coremail.wuzhigaoem%40163.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="027417.html">
   <LINK REL="Next"  HREF="059882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] run python application with twistd -y ifinger.tac, error occurs. please help to check</H1>
    <B>吴志高</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20run%20python%20application%20with%20twistd%20-y%20ifinger.tac%2C%0A%20error%20occurs.%20please%20help%20to%20check&In-Reply-To=%3C771db05d.97d1.1412ae91515.Coremail.wuzhigaoem%40163.com%3E"
       TITLE="[Twisted-Python] run python application with twistd -y ifinger.tac, error occurs. please help to check">wuzhigaoem at 163.com
       </A><BR>
    <I>Tue Sep 17 01:53:40 MDT 2013</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027417.html">[Twisted-Python] Deferreds / promises as first-class objects for	function calls
</A></li>
        <LI>Next message (by thread): <A HREF="059882.html">[Twisted-Python] run python application with twistd -y ifinger.tac, error occurs. please help to check
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27420">[ date ]</a>
              <a href="thread.html#27420">[ thread ]</a>
              <a href="subject.html#27420">[ subject ]</a>
              <a href="author.html#27420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>





Experts:
&#24744;&#22909;&#65281;

my ifinger.tac file content like following:
fromtwisted.applicationimportinternet, servicefromtwisted.internetimportprotocol, reactor, deferfromtwisted.protocolsimportbasicclassFingerProtocol(basic.LineReceiver):
    deflineReceived(self, user):
        d = self.factory.getUser(user)

        defonError(err):
            return'Internal error in server'd.addErrback(onError)

        defwriteResponse(message):
            self.transport.write(message + '\r\n')
            self.transport.loseConnection()
        d.addCallback(writeResponse)

classFingerFactory(protocol.ServerFactory):
    protocol = FingerProtocoldef__init__(self, **kwargs):
        self.users = kwargsdefgetUser(self, user):
        returndefer.succeed(self.users.get(user, &quot;No such user&quot;))

application = service.Application('finger', uid=1, gid=1)
factory = FingerFactory(moshez='Happy and well')
internet.TCPServer(79, factory).setServiceParent(service.IServiceCollection(application))                   


when running this script with command-line : twistd -y ifinger.tac, error occurs like :


Traceback (most recent call last):
    File &quot;/usr/local/bin/twistd&quot;, line 7, in &lt;module&gt;
        import _preamble
ImportError: No module named '_preamble'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
    File &quot;/usr/local/bin/twistd&quot;, line 9, in &lt;module&gt;
        sys.exc_clear()
AttributeError: 'module' object has no attribute 'exc_clear'


And i run python3 in interactive mode to check if exc_clear method is defined in sys,  command line like :
&gt;&gt;&gt;<i>import sys
</I>&gt;&gt;&gt;<i>sys.__dict__[&quot;exc_clear&quot;]
</I>Traceback (most recent call last):
    File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
        sys.exc_clear()
KeyError: 'exc_clear'
&gt;&gt;&gt;<i>
</I>

Is there any configuration i should do ? please help to give me an answer.


 &#35874;&#35874;&#65281;&#65281;
----------------------------
&#22995;&#21517; : &#21556;&#24535;&#39640;/Charles
&#30005;&#35805; : (+086)13410859946

&#37038;&#31665; : <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">wuzhigaoem at 163.com</A>
================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20130917/0596cad1/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20130917/0596cad1/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027417.html">[Twisted-Python] Deferreds / promises as first-class objects for	function calls
</A></li>
	<LI>Next message (by thread): <A HREF="059882.html">[Twisted-Python] run python application with twistd -y ifinger.tac, error occurs. please help to check
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27420">[ date ]</a>
              <a href="thread.html#27420">[ thread ]</a>
              <a href="subject.html#27420">[ subject ]</a>
              <a href="author.html#27420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
