From ed at unidata.ucar.edu  Tue Feb  3 15:16:02 2004
From: ed at unidata.ucar.edu (Ed Hartnett)
Date: 03 Feb 2004 13:16:02 -0700
Subject: [Twisted-Python] twisted test suite hangs on my Sun - but works on Linux
Message-ID: <wrxptcvor5p.fsf@rodney.unidata.ucar.edu>

Howdy all!

I am using twisted with buildbot to automate testing on a lot of
different platforms.

I'm having some problems on SunOS systems, and the buildbot author
suggested running the twisted test suite. When I run it, it
hangs. Meanwhile, running on Linux it completes just fun.

Here's my output from the tests. At the bottom it just hung. Don't
mind the extra characters around the "OKs", emacs shell mode is just
no rendering colors for me.

zero.unidata.ucar.edu% python /usr/local/bin/trial -v twisted.test
/opt/lib/python2.3/site-packages/twisted/words/__init__.py:21: UserWarning: twisted.words will be undergoing a rewrite at some point in the future.
  warnings.warn("twisted.words will be undergoing a rewrite at some point in the future.")
twisted.test.test_app
  AppTestCase
    testIllegalUnlistens ... 
/opt/lib/python2.3/site-packages/twisted/test/test_app.py:66: exceptions.DeprecationWarning: twisted.internet.app is deprecated, use twisted.application instead.
                                              [32;1m[OK][0m
    testListenUnlistenTCP ...                                              [32;1m[OK][0m
    testListenUnlistenUDP ...                                              [32;1m[OK][0m
    testListenUnlistenUNIX ...                                             [32;1m[OK][0m
  ServiceTestCase
    testRegisterService ...                                                [32;1m[OK][0m
twisted.test.test_application
  TestAppSupport
    testLoadApplication ...                                                [32;1m[OK][0m
    testPassphrase ...                                                     [32;1m[OK][0m
    test_convertStyle ...                                                  [32;1m[OK][0m
    test_getLogFile ...                                                    [32;1m[OK][0m
    test_startApplication ...                                              [32;1m[OK][0m
  TestApplication
    testConstructor ...                                                    [32;1m[OK][0m
    testPersistableComponent ...                                           [32;1m[OK][0m
    testProcessComponent ...                                               [32;1m[OK][0m
    testServiceComponent ...                                               [32;1m[OK][0m
  TestCompat
    testOldApplication ...                                                 [32;1m[OK][0m
    testService ...                                                        [32;1m[OK][0m
  TestConvert
    testSimpleInternet ...                                                 [32;1m[OK][0m
    testSimpleService ...                                                  [32;1m[OK][0m
    testSimpleUNIX ...                                                     [32;1m[OK][0m
  TestInterfaces
    testMultiService ...                                                   [32;1m[OK][0m
    testProcess ...                                                        [32;1m[OK][0m
    testService ...                                                        [32;1m[OK][0m
  TestInternet
    testCalling ...                                                        [32;1m[OK][0m
    testInterface ...                                                      [32;1m[OK][0m
    testServices ...                                                       [32;1m[OK][0m
    testTCP ...                                                            [32;1m[OK][0m
    testUNIX ...                                                           [32;1m[OK][0m
    testUnlistenersCallable ...                                            [32;1m[OK][0m
  TestInternet2
    testConnectionGettingRefused ...                                       [32;1m[OK][0m
    testEverythingThere ...                                                [32;1m[OK][0m
    testPrivileged ...                                                     [32;1m[OK][0m
    testStoppingServer ...                                                 [32;1m[OK][0m
    testTCP ...                                                            [32;1m[OK][0m
    testTimer ...                                                          [32;1m[OK][0m
    testUDP ...                                                            [32;1m[OK][0m
    testUNIX ...                                                           [32;1m[OK][0m
    testVolatile ...                                                       [32;1m[OK][0m
  TestLoading
    test_implicitConversion ...                                            [32;1m[OK][0m
    test_simpleStoreAndLoad ...                                            [32;1m[OK][0m
  TestProcess
    testDefaults ...                                                       [32;1m[OK][0m
    testID ...                                                             [32;1m[OK][0m
    testProcessName ...                                                    [32;1m[OK][0m
  TestService
    testAddingIntoRunning ...                                              [32;1m[OK][0m
    testApplicationAsParent ...                                            [32;1m[OK][0m
    testCopying ...                                                        [32;1m[OK][0m
    testDisowning ...                                                      [32;1m[OK][0m
    testDoublyNamedChild ...                                               [32;1m[OK][0m
    testDuplicateNamedChild ...                                            [32;1m[OK][0m
    testName ...                                                           [32;1m[OK][0m
    testNamedChild ...                                                     [32;1m[OK][0m
    testParent ...                                                         [32;1m[OK][0m
    testPrivileged ...                                                     [32;1m[OK][0m
    testRunning ...                                                        [32;1m[OK][0m
    testRunningChildren ...                                                [32;1m[OK][0m
twisted.test.test_banana
  BananaTestCase
    testCrashString ...                                                    [32;1m[OK][0m
    testFloat ...                                                          [32;1m[OK][0m
    testInteger ...                                                        [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testLong ...                                                           [32;1m[OK][0m
    testNegative ...                                                       [32;1m[OK][0m
    testNegativeLong ...                                                   [32;1m[OK][0m
    testOversizedList ...                                                  [32;1m[OK][0m
    testOversizedString ...                                                [32;1m[OK][0m
    testPartial ...                                                        [32;1m[OK][0m
    testString ...                                                         [32;1m[OK][0m
  CananaTestCase
    testCrashString ...                                                    [32;1m[OK][0m
    testFloat ...                                                          [32;1m[OK][0m
    testInteger ...                                                        [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testLong ...                                                           [32;1m[OK][0m
    testNegative ...                                                       [32;1m[OK][0m
    testNegativeLong ...                                                   [32;1m[OK][0m
    testOversizedList ...                                                  [32;1m[OK][0m
    testOversizedString ...                                                [32;1m[OK][0m
    testPartial ...                                                        [32;1m[OK][0m
    testString ...                                                         [32;1m[OK][0m
  MathTestCase
    testInt2b128 ...                                                       [32;1m[OK][0m
twisted.test.test_bounce
  BounceTestCase
    testBounceFormat ...                                                   [32;1m[OK][0m
    testBounceMIME ...                                                     [32;1m[OK][0m
twisted.test.test_compat
  CompatTestCase
    testBool ...                                                           [32;1m[OK][0m
    testDict ...                                                           [32;1m[OK][0m
    testIsinstance ...                                                     [32;1m[OK][0m
    testIteration ...                                                      [32;1m[OK][0m
    testStrip ...                                                          [32;1m[OK][0m
twisted.test.test_components
  AdapterTestCase
    testAdapterGetComponent ...                                            [32;1m[OK][0m
    testAllowDuplicates ...                                                [32;1m[OK][0m
    testBadRegister ...                                                    [32;1m[OK][0m
    testGetAdapter ...                                                     [32;1m[OK][0m
    testGetAdapterClass ...                                                [32;1m[OK][0m
    testGetSubAdapter ...                                                  [32;1m[OK][0m
    testNoAdapter ...                                                      [32;1m[OK][0m
    testParentInterface ...                                                [32;1m[OK][0m
    testSelfIsAdapter ...                                                  [32;1m[OK][0m
  ComponentizedTestCase
    testComponentized ...                                                  [32;1m[OK][0m
    testInheritanceAdaptation ...                                          [32;1m[OK][0m
    testMultiAdapter ...                                                   [32;1m[OK][0m
  InterfacesTestCase
    testClasses ...                                                        [32;1m[OK][0m
    testGetInterfaces ...                                                  [32;1m[OK][0m
    testInstanceOnlyImplements ...                                         [32;1m[OK][0m
    testInstances ...                                                      [32;1m[OK][0m
    testOther ...                                                          [32;1m[OK][0m
    testSuperInterfaces ...                                                [32;1m[OK][0m
    testTupleTrees ...                                                     [32;1m[OK][0m
  TestInterfaceInterface
    testBasic ...                                                          [32;1m[OK][0m
  TestMetaInterface
    testBasic ...                                                          [32;1m[OK][0m
    testComponentizedInteraction ...                                       [32;1m[OK][0m
    testCustomRegistry ...                                                 [32;1m[OK][0m
    testInterfaceAdaptMethod ...                                           [32;1m[OK][0m
    testRegistryPersistence ...                                            [32;1m[OK][0m
twisted.test.test_context
  ContextTest
    testBasicContext ...                                                   [32;1m[OK][0m
twisted.test.test_cred
  AuthorizerTestCase
    test_addIdent ... 
/opt/lib/python2.3/site-packages/twisted/cred/authorizer.py:115: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:405: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.
                                                     [32;1m[OK][0m
    test_nonExistentIdent ...                                              [32;1m[OK][0m
  FunctionsTestCase
    test_challenge ...                                                     [32;1m[OK][0m
  IdentityTestCase
    testConstruction ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:297: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:300: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.
                                                  [32;1m[OK][0m
    test_addKeyByString ...                                                [32;1m[OK][0m
    test_addKeyForPerspective ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:307: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                         [32;1m[OK][0m
    test_getAllKeys ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:316: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                   [32;1m[OK][0m
    test_removeKey ...                                                     [32;1m[OK][0m
    test_removeKey_invalid ...                                             [32;1m[OK][0m
    test_setPassword_invalid ...                                           [32;1m[OK][0m
    test_verifyPassword ...                                                [32;1m[OK][0m
    test_verifyPlainPassword ...                                           [32;1m[OK][0m
  PerspectiveTestCase
    testConstruction ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:170: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                  [32;1m[OK][0m
    testConstruction_invalidIdentityName ...                               [32;1m[OK][0m
    testConstruction_invalidPerspectiveName ...                            [32;1m[OK][0m
    testConstruction_invalidService ...                                    [32;1m[OK][0m
    test_identityWithNoPassword ... 
/opt/lib/python2.3/site-packages/twisted/cred/authorizer.py:78: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.
                                       [32;1m[OK][0m
    test_identityWithNoPassword_plain ...                                  [32;1m[OK][0m
    testgetService ...                                                     [32;1m[OK][0m
    testmakeIdentity ...                                                   [32;1m[OK][0m
    testmakeIdentity_invalid ...                                           [32;1m[OK][0m
    testsetIdentity ...                                                    [32;1m[OK][0m
    testsetIdentityName ...                                                [32;1m[OK][0m
    testsetIdentityName_invalid ...                                        [32;1m[OK][0m
    testsetIdentity_invalid ...                                            [32;1m[OK][0m
  ServiceTestCase
    testConstruction ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:59: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:59: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:63: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:65: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:66: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:67: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                  [32;1m[OK][0m
    serviceName is frequently used as a key, thus it is expected ... 
/opt/lib/python2.3/site-packages/twisted/python/util.py:460: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
      [32;1m[OK][0m
    testGetSetPerspetiveSanity ...                                         [32;1m[OK][0m
    testParent ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:71: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:72: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                        [32;1m[OK][0m
    testaddPerspective_invalid ...                                         [32;1m[OK][0m
    testgetPerspective ...                                                 [32;1m[OK][0m
    testgetPerspectiveNamed_invalid ...                                    [32;1m[OK][0m
    testgetServiceName ...                                                 [32;1m[OK][0m
    testgetServiceName_hashable ...                                        [32;1m[OK][0m
    testgetServiceType ...                                                 [32;1m[OK][0m
    testsetServiceParent ...                                               [32;1m[OK][0m
twisted.test.test_defer
  AlreadyCalledTestCase
    testAlreadyCalledDebug_CC ...                                          [32;1m[OK][0m
    testAlreadyCalledDebug_CE ...                                          [32;1m[OK][0m
    testAlreadyCalledDebug_EC ...                                          [32;1m[OK][0m
    testAlreadyCalledDebug_EE ...                                          [32;1m[OK][0m
    testAlreadyCalled_CC ...                                               [32;1m[OK][0m
    testAlreadyCalled_CE ...                                               [32;1m[OK][0m
    testAlreadyCalled_EC ...                                               [32;1m[OK][0m
    testAlreadyCalled_EE ...                                               [32;1m[OK][0m
    testNoDebugging ...                                                    [32;1m[OK][0m
  DeferredTestCase
    testCallbackErrors ...                                                 [32;1m[OK][0m
    testCallbackWithArgs ...                                               [32;1m[OK][0m
    testCallbackWithKwArgs ...                                             [32;1m[OK][0m
    testCallbackWithoutArgs ...                                            [32;1m[OK][0m
    testDeferredList ...                                                   [32;1m[OK][0m
    testDeferredListFireOnOneError ...                                     [32;1m[OK][0m
    testEmptyDeferredList ...                                              [32;1m[OK][0m
    testGatherResults ...                                                  [32;1m[OK][0m
    testImmediateFailure ...                                               [32;1m[OK][0m
    testImmediateSuccess ...                                               [32;1m[OK][0m
    testMaybeDeferred ...                                                  [32;1m[OK][0m
    testPausedFailure ...                                                  [32;1m[OK][0m
    testReturnDeferred ...                                                 [32;1m[OK][0m
    testTimeOut ...                                                        [32;1m[OK][0m
    testTwoCallbacks ...                                                   [32;1m[OK][0m
    testUnpauseBeforeCallback ...                                          [32;1m[OK][0m
  DeferredTestCaseII
    Testing empty DeferredList. ...                                        [32;1m[OK][0m
  LogTestCase
    testErrorLog ...                                                       [32;1m[OK][0m
twisted.test.test_dict
  ParamTest
    Testing command response handling ...                                  [32;1m[OK][0m
twisted.test.test_dirdbm
  DirDbmTestCase
    testAll ...                                                            [32;1m[OK][0m
    testDbm ...                                                            [32;1m[OK][0m
    testModificationTime ...                                               [32;1m[OK][0m
    testRebuildInteraction ...                                             [32;1m[OK][0m
    DirDBM: test recovery from directory after a faked crash ...           [32;1m[OK][0m
  ShelfTestCase
    testAll ...                                                            [32;1m[OK][0m
    testDbm ...                                                            [32;1m[OK][0m
    testModificationTime ...                                               [32;1m[OK][0m
    testRebuildInteraction ...                                             [32;1m[OK][0m
    DirDBM: test recovery from directory after a faked crash ...           [32;1m[OK][0m
twisted.test.test_dns
  RoundtripDNSTestCase
    testHashable ...                                                       [32;1m[OK][0m
    testName ...                                                           [32;1m[OK][0m
    testQuery ...                                                          [32;1m[OK][0m
    testRR ...                                                             [32;1m[OK][0m
    testResources ...                                                      [32;1m[OK][0m
twisted.test.test_doc
  DocCoverage
    Looking for docstrings in all modules. ...                        [34;1m[SKIPPED][0m
    Looking for docstrings in all packages. ... 
/opt/lib/python2.3/site-packages/twisted/im/__init__.py:20: exceptions.UserWarning: twisted.im will be undergoing a rewrite at some point in the future.

/opt/lib/python2.3/site-packages/twisted/spread/ui/__init__.py:25: exceptions.DeprecationWarning: twisted.spread.ui is deprecated. Please do not use.
                           [32;1m[OK][0m
twisted.test.test_domhelpers
  DomHelpersTest
    test_clearNode ...                                                     [32;1m[OK][0m
    test_escape ...                                                        [32;1m[OK][0m
    test_findElementsWithAttribute ...                                     [32;1m[OK][0m
    test_findNodesNamed ...                                                [32;1m[OK][0m
    test_gatherTextNodes ...                                               [32;1m[OK][0m
    test_get ...                                                           [32;1m[OK][0m
    test_getAndClear ...                                                   [32;1m[OK][0m
    test_getElementsByTagName ...                                          [32;1m[OK][0m
    test_getIfExists ...                                                   [32;1m[OK][0m
    test_getParents ...                                                    [32;1m[OK][0m
    test_locateNodes ...                                                   [32;1m[OK][0m
    test_unescape ...                                                      [32;1m[OK][0m
twisted.test.test_domish
  DomishStreamTestCase
    testExpatStream ...                                                    [32;1m[OK][0m
    testSuxStream ...                                                      [32;1m[OK][0m
  DomishTestCase
    testChildOps ...                                                       [32;1m[OK][0m
    testElementInit ...                                                    [32;1m[OK][0m
    testEscaping ...                                                       [32;1m[OK][0m
    testNamespaceObject ...                                                [32;1m[OK][0m
    testSerialization ...                                                  [32;1m[OK][0m
    testUnicodeSerialization ...                                           [32;1m[OK][0m
twisted.test.test_enterprise
  GadflyTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  MySQLTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  PostgresTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  QuotingTestCase
    testQuoting ...                                                        [32;1m[OK][0m
  SQLiteTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  XMLReflectorTestCase
    testReflector ...                                                      [32;1m[OK][0m
twisted.test.test_error
  TestStringification
    testThemAll ...                                                        [32;1m[OK][0m
twisted.test.test_ethernet
  EthernetTestCase
    Adding a protocol with a number >=2**16 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a number >=2**16 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a negative number raises an exception. ...      [32;1m[OK][0m
    Adding a wrong level protocol raises an exception. ...                 [32;1m[OK][0m
    testDemuxing ...                                                       [32;1m[OK][0m
    testMultiplePackets ...                                                [32;1m[OK][0m
    testMultipleSameProtos ...                                             [32;1m[OK][0m
    testPacketParsing ...                                                  [32;1m[OK][0m
    testWrongProtoNotSeen ...                                              [32;1m[OK][0m
twisted.test.test_explorer
  TestBrowseFunction
    Basic checks for browse_function. ...                                  [32;1m[OK][0m
    Testing function with crazy signature. ...                             [32;1m[OK][0m
    Testing zero-argument function signature. ...                          [32;1m[OK][0m
    Testing simple function signature. ...                                 [32;1m[OK][0m
    Testing variable-argument function signature. ...                      [32;1m[OK][0m
  TestBrowser
    Following a chain of Explorers. ...                                    [32;1m[OK][0m
twisted.test.test_extensions
  CorrectComments
    testNoSlashSlashComments ...                                        [31;1m[ERROR][0m
twisted.test.test_factories
  ReconnectingFactoryTestCase
    testStopTrying ...                                                     [32;1m[OK][0m
twisted.test.test_failure
  FailureTestCase
    testExplictPass ...                                                    [32;1m[OK][0m
    Trapping a failure. ...                                                [32;1m[OK][0m
    testPrinting ...                                                       [32;1m[OK][0m
    Making sure trap doesn't trap what it shouldn't. ...                   [32;1m[OK][0m
twisted.test.test_finger
  FingerTestCase
    testForwarding ...                                                     [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testSimple ...                                                         [32;1m[OK][0m
    testSimpleW ...                                                        [32;1m[OK][0m
twisted.test.test_flow
  FlowTest
    testBasic ...                                                          [32;1m[OK][0m
    testBasicIterator ...                                                  [32;1m[OK][0m
    testBasicList ...                                                      [32;1m[OK][0m
    testBuildList ...                                                      [32;1m[OK][0m
    testCallable ...                                                       [32;1m[OK][0m
    testCallback ...                                                       [32;1m[OK][0m
    testCallbackFailure ...                                                [32;1m[OK][0m
    testConcurrentCallback ...                                             [32;1m[OK][0m
    testConsumer ...                                                       [32;1m[OK][0m
    testDeferred ...                                                       [32;1m[OK][0m
    testDeferredFailure ...                                                [32;1m[OK][0m
    testDeferredTrap ...                                                   [32;1m[OK][0m
    testDeferredWrapper ...                                                [32;1m[OK][0m
    testDeferredWrapperFail ...                                            [32;1m[OK][0m
    testDeferredWrapperImmediate ...                                       [32;1m[OK][0m
    testFailure ...                                                        [32;1m[OK][0m
    testFilter ...                                                         [32;1m[OK][0m
    testLineBreak ...                                                      [32;1m[OK][0m
    testMerge ...                                                          [32;1m[OK][0m
    testNotReady ...                                                       [32;1m[OK][0m
    testProducer ...                                                       [32;1m[OK][0m
    testProtocol ...                                                       [32;1m[OK][0m
    testProtocolLocalhost ...                                              [32;1m[OK][0m
    testQueryIterator ...                                                  [32;1m[OK][0m
    testThreaded ...                                                       [32;1m[OK][0m
    The goal of this test is to test the callback mechanism with ...       [32;1m[OK][0m
    testThreadedSleep ...                                                  [32;1m[OK][0m
    testZip ...                                                            [32;1m[OK][0m
    testZipFailure ...                                                     [32;1m[OK][0m
twisted.test.test_formmethod
  ArgumentTestCase
    testBoolean ...                                                        [32;1m[OK][0m
    testChoice ...                                                         [32;1m[OK][0m
    testDate ...                                                           [32;1m[OK][0m
    testFlags ...                                                          [32;1m[OK][0m
    testFloat ...                                                          [32;1m[OK][0m
    testInt ...                                                            [32;1m[OK][0m
    testRangedInteger ...                                                  [32;1m[OK][0m
    testString ...                                                         [32;1m[OK][0m
    testVerifiedPassword ...                                               [32;1m[OK][0m
twisted.test.test_ftp
  FTPClientTests
    testFailedRETR ...                                                     [32;1m[OK][0m
  FTPFileListingTests
    testOneLine ...                                                        [32;1m[OK][0m
  TestAnonymousAvatar
    testAnonymousLogin ...                                               [34;1m[TODO][0m
    testCDUP ...                                                         [34;1m[TODO][0m
    testCWD ... 
/opt/lib/python2.3/site-packages/twisted/test/test_ftp.py:601: exceptions.UserWarning: This test is VERY FRAGILE! in fact, its so fragile it won't run on any other computer but mine
                                                         [34;1m[TODO][0m
    testGetUserUIDAndGID ...                                               [32;1m[OK][0m
    testPWDOnLogin ...                                                   [34;1m[TODO][0m
  TestDTPTesting
    testDTPTestingSanityCheck ...                                          [32;1m[OK][0m
  TestFTPFactory
    testBuildProtocol ...                                          [31;1m[SUCCESS!?!][0m
  TestFTPServer
    testBadCmdSequenceReply ...                                            [32;1m[OK][0m
    testBadCmdSequenceReplyPartTwo ...                                     [32;1m[OK][0m
    testCmdNotImplementedForArgErrors ...                                  [32;1m[OK][0m
    testDecodeHostPort ...                                                 [32;1m[OK][0m
    testLIST ...                                                           [32;1m[OK][0m
    testNotLoggedInReply ...                                               [32;1m[OK][0m
    testPASV ...                                                           [32;1m[OK][0m
    testRETR ...                                                           [32;1m[OK][0m
    testSYST ...                                                           [32;1m[OK][0m
    testTYPE ...                                                         [34;1m[TODO][0m
  TestUtilityFunctions
    testCleanPath ...                                              [31;1m[SUCCESS!?!][0m
twisted.test.test_hook
  HookTestCase
    make sure that the base class's hook is called reliably ...            [32;1m[OK][0m
    test interactions between base-class hooks and subclass hooks ...      [32;1m[OK][0m
twisted.test.test_htb
  ConsumerShaperTest
    testBucketRefs ...                                                     [32;1m[OK][0m
    testRate ...                                                           [32;1m[OK][0m
  TestBucket
    Testing the bucket's drain rate. ...                                   [32;1m[OK][0m
    Testing the size of the bucket. ...                                    [32;1m[OK][0m
  TestBucketNesting
    testBucketParentRate ...                                               [32;1m[OK][0m
    testBucketParentSize ...                                               [32;1m[OK][0m
twisted.test.test_http
  ChunkingTestCase
    testChunks ...                                                         [32;1m[OK][0m
    testConcatenatedChunks ...                                             [32;1m[OK][0m
  DateTimeTest
    testRoundtrip ...                                                      [32;1m[OK][0m
  HTTP0_9TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTP1_0TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTP1_1TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTP1_1_close_TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTPLoopbackTestCase
    testLoopback ...                                                       [32;1m[OK][0m
  ParsingTestCase
    testCookies ...                                                        [32;1m[OK][0m
    testGET ...                                                            [32;1m[OK][0m
    testHeaders ...                                                        [32;1m[OK][0m
    testPOST ...                                                           [32;1m[OK][0m
    testTooManyHeaders ...                                                 [32;1m[OK][0m
  PersistenceTestCase
    testAlgorithm ...                                                      [32;1m[OK][0m
  QueryArgumentsTestCase
    testEscchar ...                                                        [32;1m[OK][0m
    testParseqs ...                                                        [32;1m[OK][0m
    testUnquote ...                                                        [32;1m[OK][0m
twisted.test.test_imap
  AuthenticatorTestCase
    testCramMD5 ...                                                        [32;1m[OK][0m
    testFailedCramMD5 ...                                                  [32;1m[OK][0m
    testFailedLOGIN ...                                                    [32;1m[OK][0m
    testFailedPLAIN ...                                                    [32;1m[OK][0m
    testLOGIN ...                                                          [32;1m[OK][0m
    testPLAIN ...                                                          [32;1m[OK][0m
  CopyWorkerTestCase
    testFeaturefulMessage ...                                              [32;1m[OK][0m
    testUnfeaturefulMessage ...                                            [32;1m[OK][0m
  FetchSearchStoreTestCase
    testSearch ...                                                         [32;1m[OK][0m
    testUIDSearch ...                                                      [32;1m[OK][0m
  HandCraftedTestCase
    testPathelogicalScatteringOfLiterals ... 
/opt/lib/python2.3/site-packages/twisted/trial/util.py:40: exceptions.UserWarning: 
pendingTimedCalls still pending:
 <DelayedCall 11893096 [59.963108778s] called=0 cancelled=0 IMAP4Server.__timedOut()>

                            [34;1m[TODO][0m
    testTrailingLiteral ...                                                [32;1m[OK][0m
  IMAP4HelperTestCase
    testFetchParserBody ...                                                [32;1m[OK][0m
    testFetchParserMacros ...                                              [32;1m[OK][0m
    testFetchParserSimple ...                                              [32;1m[OK][0m
    testFileProducer ...                                                   [32;1m[OK][0m
    testFiles ...                                                          [32;1m[OK][0m
    testHeaderFormatter ...                                                [32;1m[OK][0m
    testIdListParser ...                                                   [32;1m[OK][0m
    testLiterals ...                                                       [32;1m[OK][0m
    testMessageSet ...                                                     [32;1m[OK][0m
    testParenParser ...                                                    [32;1m[OK][0m
    testQueryBuilder ...                                                   [32;1m[OK][0m
    testQuoteAvoider ...                                                   [32;1m[OK][0m
    testQuotedSplitter ...                                                 [32;1m[OK][0m
    testStringCollapser ...                                                [32;1m[OK][0m
    testWildcard ...                                                       [32;1m[OK][0m
    testWildcardNoDelim ...                                                [32;1m[OK][0m
  IMAP4ServerTestCase
    testCapability ...                                                     [32;1m[OK][0m
    testCapabilityWithAuth ...                                             [32;1m[OK][0m
    testCheck ...                                                          [32;1m[OK][0m
    testClose ...                                                          [32;1m[OK][0m
    testCreate ...                                                         [32;1m[OK][0m
    testDelete ...                                                         [32;1m[OK][0m
    testExamine ...                                                        [32;1m[OK][0m
    testExpunge ...                                                        [32;1m[OK][0m
    testFailedLogin ...                                                    [32;1m[OK][0m
    testFailedStatus ...                                                   [32;1m[OK][0m
    testFullAppend ...                                                     [32;1m[OK][0m
    testHierarchicalRename ...                                             [32;1m[OK][0m
    testIllegalDelete ...                                                  [32;1m[OK][0m
    testIllegalInboxDelete ...                                             [32;1m[OK][0m
    testIllegalInboxRename ...                                             [32;1m[OK][0m
    testLSub ...                                                           [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testLogin ...                                                          [32;1m[OK][0m
    testLogout ...                                                         [32;1m[OK][0m
    testNamespace ...                                                      [32;1m[OK][0m
    testNonExistentDelete ...                                              [32;1m[OK][0m
    testNoop ...                                                           [32;1m[OK][0m
    testPartialAppend ...                                                  [32;1m[OK][0m
    testRename ...                                                         [32;1m[OK][0m
    testSelect ...                                                         [32;1m[OK][0m
    testStatus ...                                                         [32;1m[OK][0m
    testSubscribe ...                                                      [32;1m[OK][0m
    testUnsubscribe ...                                                    [32;1m[OK][0m
  IMAP4UTF7TestCase
    testDecode ...                                                         [32;1m[OK][0m
    testEncode ...                                                         [32;1m[OK][0m
    testPrintableSingletons ...                                            [32;1m[OK][0m
  MessageProducerTestCase
    testMultipleMultiPart ...                                              [32;1m[OK][0m
    testSingleMultiPart ...                                                [32;1m[OK][0m
    testSinglePart ...                                                     [32;1m[OK][0m
  NewFetchTestCase
    testFetchAll ...                                                       [32;1m[OK][0m
    testFetchAllUID ...                                                    [32;1m[OK][0m
    testFetchBody ...                                                      [32;1m[OK][0m
    testFetchBodyStructure ...                                             [32;1m[OK][0m
    testFetchBodyStructureUID ...                                          [32;1m[OK][0m
    testFetchBodyUID ...                                                   [32;1m[OK][0m
    testFetchEnvelope ...                                                  [32;1m[OK][0m
    testFetchEnvelopeUID ...                                               [32;1m[OK][0m
    testFetchFast ...                                                      [32;1m[OK][0m
    testFetchFastUID ...                                                   [32;1m[OK][0m
    testFetchFlags ...                                                     [32;1m[OK][0m
    testFetchFlagsUID ...                                                  [32;1m[OK][0m
    testFetchFull ...                                                      [32;1m[OK][0m
    testFetchFullUID ...                                                   [32;1m[OK][0m
    testFetchHeaders ...                                                   [32;1m[OK][0m
    testFetchHeadersUID ...                                                [32;1m[OK][0m
    testFetchInternalDate ...                                              [32;1m[OK][0m
    testFetchInternalDateUID ...                                           [32;1m[OK][0m
    testFetchMessage ...                                                   [32;1m[OK][0m
    testFetchMessageUID ...                                                [32;1m[OK][0m
    testFetchSimplifiedBody ...                                            [32;1m[OK][0m
    testFetchSimplifiedBodyRFC822 ...                                      [32;1m[OK][0m
    testFetchSimplifiedBodyRFC822UID ...                                   [32;1m[OK][0m
    testFetchSimplifiedBodyText ...                                        [32;1m[OK][0m
    testFetchSimplifiedBodyTextUID ...                                     [32;1m[OK][0m
    testFetchSimplifiedBodyUID ...                                         [32;1m[OK][0m
    testFetchSize ...                                                      [32;1m[OK][0m
    testFetchSizeUID ...                                                   [32;1m[OK][0m
    testFetchUID ...                                                       [32;1m[OK][0m
  NewStoreTestCase
    testSetFlags ...                                                       [32;1m[OK][0m
  TLSTestCase
    testAPileOfThings ...                                             [34;1m[SKIPPED][0m
    testLoginLogin ...                                                [34;1m[SKIPPED][0m
    testAPileOfThings ...                                             [34;1m[SKIPPED][0m
    testLoginLogin ...                                                [34;1m[SKIPPED][0m
  UnsolicitedResponseTestCase
    testFlagChange ...                                                     [32;1m[OK][0m
    testNewMessages ...                                                    [32;1m[OK][0m
    testNewMessagesAndRecent ...                                           [32;1m[OK][0m
    testNewRecentMessages ...                                              [32;1m[OK][0m
    testReadOnly ...                                                       [32;1m[OK][0m
    testReadWrite ...                                                      [32;1m[OK][0m
twisted.test.test_import
  AtLeastImportTestCase
    test_enterprise ...                                                    [32;1m[OK][0m
    Test importing internet ...                                            [32;1m[OK][0m
    test_lore ...                                                          [32;1m[OK][0m
    Test importing mail ...                                                [32;1m[OK][0m
    Test importing other misc. modules ...                                 [32;1m[OK][0m
    Test importing names ...                                               [32;1m[OK][0m
    Test importing persisted ...                                           [32;1m[OK][0m
    Test importing protocols ...                                           [32;1m[OK][0m
    Test importing spreadables ...                                         [32;1m[OK][0m
    test_test ...                                                          [32;1m[OK][0m
    Test importing twisted.python ...                                      [32;1m[OK][0m
    internet modules for unix. ...                                         [32;1m[OK][0m
    Test importing web ... 
/opt/lib/python2.3/site-packages/twisted/web/widgets.py:22: exceptions.DeprecationWarning: This module is deprecated, please use Woven instead.

/opt/lib/python2.3/site-packages/twisted/test/test_import.py:105: exceptions.DeprecationWarning: Please use twisted.web.woven.guard
                                                [32;1m[OK][0m
    Test importing words ...                                               [32;1m[OK][0m
twisted.test.test_internet
  DelayedTestCase
    testActive ...                                                         [32;1m[OK][0m
    testGetDelayedCalls ...                                                [32;1m[OK][0m
  InterfaceTestCase
    testCallLater ...                                                      [32;1m[OK][0m
    testCallLaterDelayAndReset ...                                         [32;1m[OK][0m
    testCallLaterTime ...                                                  [32;1m[OK][0m
    reactor.wakeUp should terminate reactor.iterate(5) ...                 [32;1m[OK][0m
  MultiServiceTestCase
    testDeferredStopService ...                                            [32;1m[OK][0m
    MutliService.stopService returns Deferred when empty. ...              [32;1m[OK][0m
    MultiService.stopService returns Deferred when service returns None. ... [32;1m[OK][0m
  ProtocolTestCase
    testFactory ...                                                        [32;1m[OK][0m
  ReactorCoreTestCase
    reactor.crash should NOT fire shutdown triggers ...                    [32;1m[OK][0m
    Test that reactor.iterate(0) doesn't block ...                         [32;1m[OK][0m
    Test that reactor.crash terminates reactor.run ...                     [32;1m[OK][0m
  SystemEventTestCase
    testTriggerSystemEvent1 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent2 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent3 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent4 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent5 ...                                            [32;1m[OK][0m
  TestProducer
    testDoubleProducer ...                                                 [32;1m[OK][0m
    testUnconnectedFileDescriptor ...                                      [32;1m[OK][0m
  callFromThreadTestCase
    testCorrectOrder ...                                                   [32;1m[OK][0m
    testNotRunAtOnce ...                                                   [32;1m[OK][0m
    testScheduling ...                                                     [32;1m[OK][0m
twisted.test.test_ip
  IPTestCase
    Adding a protocol with a number >=2**32 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a number >=2**32 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a negative number raises an exception. ...      [32;1m[OK][0m
    Adding a wrong level protocol raises an exception. ...                 [32;1m[OK][0m
    testDemuxing ...                                                       [32;1m[OK][0m
    testMultiplePackets ...                                                [32;1m[OK][0m
    testMultipleSameProtos ...                                             [32;1m[OK][0m
    testPacketParsing ...                                                  [32;1m[OK][0m
    testWrongProtoNotSeen ...                                              [32;1m[OK][0m
twisted.test.test_irc
  BasicServerFunctionalityTestCase
    testAction ...                                                         [32;1m[OK][0m
    testJoin ...                                                           [32;1m[OK][0m
    testNotice ...                                                         [32;1m[OK][0m
    testPart ...                                                           [32;1m[OK][0m
    testPrivmsg ...                                                        [32;1m[OK][0m
  CTCPTest
    Testing CTCP query ERRMSG. ...                                         [32;1m[OK][0m
  ModeTestCase
    test_MODE_CHANGE ...                                                   [32;1m[OK][0m
  QuotingTest
    Testing CTCP message level quote/dequote ...                           [32;1m[OK][0m
    Testing client-server level quote/dequote ...                          [32;1m[OK][0m
twisted.test.test_iutils
  UtilsTestCase
    testOutput ...                                                         [32;1m[OK][0m
    testValue ...                                                          [32;1m[OK][0m
twisted.test.test_jabbercomponent
  ComponentAuthTest
    testAuth ...                                                           [32;1m[OK][0m
  TestJabberServiceManager
    testSM ...                                                             [32;1m[OK][0m
twisted.test.test_jabberjid
  JIDClassTest
    testBasic ...                                                          [32;1m[OK][0m
  JIDParsingTest
    testInvalid ...                                                        [32;1m[OK][0m
    testParse ...                                                          [32;1m[OK][0m
twisted.test.test_jelly
  CircularReferenceTestCase
    testCircleWithInvoker ...                                              [32;1m[OK][0m
    testSimpleCircle ...                                                   [32;1m[OK][0m
  JellyTestCase
    test for class-level security of serialization ...                     [32;1m[OK][0m
    test to make sure that objects retain identity properly ...            [32;1m[OK][0m
    test for all types currently supported in jelly ...                    [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
    testMoreReferences ...                                                 [32;1m[OK][0m
    testNewStyleClasses ...                                                [32;1m[OK][0m
    testPersistentStorage ...                                              [32;1m[OK][0m
    testSetState ...                                                       [32;1m[OK][0m
    simplest test case ...                                                 [32;1m[OK][0m
    testStressReferences ...                                               [32;1m[OK][0m
    test for type-level security of serialization ...                      [32;1m[OK][0m
    testUnicode ...                                                        [32;1m[OK][0m
twisted.test.test_journal
  JournalTestCase
    testCommandExecution ...                                               [32;1m[OK][0m
    testLogging ...                                                        [32;1m[OK][0m
    testRecovery ...                                                       [32;1m[OK][0m
    testTime ...                                                           [32;1m[OK][0m
twisted.test.test_log
  LogTest
    testContext ...                                                        [32;1m[OK][0m
    testErrors ...                                                         [32;1m[OK][0m
    testObservation ...                                                    [32;1m[OK][0m
twisted.test.test_logfile
  DailyLogFileTestCase
    testRotation ...                                                       [32;1m[OK][0m
    testWriting ...                                                        [32;1m[OK][0m
  LogFileTestCase
    testAppend ...                                                         [32;1m[OK][0m
    testLogReader ...                                                      [32;1m[OK][0m
    logfile: check rotated files have same permissions as original. ...    [32;1m[OK][0m
    logfile: check it keeps working when permission on dir changes. ...    [32;1m[OK][0m
    testRotation ...                                                       [32;1m[OK][0m
    testWriting ...                                                        [32;1m[OK][0m
twisted.test.test_loopback
  LoopbackTCPTestCase
    testRegularFunction ...                                                [32;1m[OK][0m
    testSneakyHiddenDoom ...                                               [32;1m[OK][0m
  LoopbackTestCase
    testRegularFunction ...                                                [32;1m[OK][0m
    testSneakyHiddenDoom ...                                               [32;1m[OK][0m
twisted.test.test_mail
  AliasTestCase
    testFileAlias ...                                                      [32;1m[OK][0m
    testFileLoader ...                                                     [32;1m[OK][0m
    testHandle ...                                                         [32;1m[OK][0m
    testMultiWrapper ...                                                   [32;1m[OK][0m
  BounceTestCase
    testAddUser ...                                                        [32;1m[OK][0m
    testExists ...                                                         [32;1m[OK][0m
    testMessage ...                                                        [32;1m[OK][0m
    testRelay ...                                                          [32;1m[OK][0m
  DirectoryQueueTestCase
    testDone ...                                                           [32;1m[OK][0m
    testEnvelope ...                                                       [32;1m[OK][0m
    testRelaying ...                                                       [32;1m[OK][0m
    testWaiting ...                                                        [32;1m[OK][0m
  DomainWithDefaultsTestCase
    testMethods ...                                                        [32;1m[OK][0m
  FileMessageTestCase
    testContents ...                                                       [32;1m[OK][0m
    testFinalName ...                                                      [32;1m[OK][0m
    testInterrupted ...                                                    [32;1m[OK][0m
  LiveFireExercise
    testLocalDelivery ...                                                  [32;1m[OK][0m
    testRelayDelivery ...                                                  [32;1m[OK][0m
  MXTestCase
    testManyRecords ...                                                    [32;1m[OK][0m
    testSimpleFailure ...                                                  [32;1m[OK][0m
    testSimpleFailureWithFallback ...                                      [32;1m[OK][0m
    testSimpleSuccess ...                                                  [32;1m[OK][0m
  MailServiceTestCase
    testFactories ...                                                      [32;1m[OK][0m
    testPortals ...                                                        [32;1m[OK][0m
  MaildirDirdbmDomainTestCase
    testAddUser ...                                                        [32;1m[OK][0m
    testCredentials ...                                                    [32;1m[OK][0m
    testRequestAvatar ...                                                  [32;1m[OK][0m
    testRequestAvatarId ...                                                [32;1m[OK][0m
  MaildirTestCase
    testInitializer ...                                                    [32;1m[OK][0m
    testMailbox ...                                                        [32;1m[OK][0m
  ManagedRelayerTestCase
    testConnectionLost ...                                                 [32;1m[OK][0m
    testFailedSentMail ...                                                 [32;1m[OK][0m
    testSuccessfulSentMail ...                                             [32;1m[OK][0m
  ProcessAliasTestCase
    testAliasResolution ...                                                [32;1m[OK][0m
    testCyclicAlias ...                                                    [32;1m[OK][0m
    testProcessAlias ...                                                [31;1m[ERROR][0m
  RelayTestCase
    testExists ...                                                         [32;1m[OK][0m
  RelayerTestCase
    testMailData ...                                                       [32;1m[OK][0m
    testMailFrom ...                                                       [32;1m[OK][0m
    testMailTo ...                                                         [32;1m[OK][0m
  ServiceDomainTestCase
    testReceivedHeader ...                                                 [32;1m[OK][0m
    testValidateFrom ...                                                   [32;1m[OK][0m
    testValidateTo ...                                                     [32;1m[OK][0m
  VirtualPOP3TestCase
    testAuthenticateAPOP ...                                               [32;1m[OK][0m
    testAuthenticatePASS ...                                               [32;1m[OK][0m
twisted.test.test_manhole
  ManholeTest
    Making sure imported module is the same as one previously loaded. ...  [32;1m[OK][0m
    Trying to import __main__ ...                                          [32;1m[OK][0m
twisted.test.test_mvc
  MVCTestCase
    testControllerConstruction ...                                         [32;1m[OK][0m
    testModelManipulation ...                                              [32;1m[OK][0m
    testMoreModelManipulation ...                                          [32;1m[OK][0m
    When the model updates the view should too ...                         [32;1m[OK][0m
    testViewConstruction ...                                               [32;1m[OK][0m
    When the model updates the view should too ...                         [32;1m[OK][0m
twisted.test.test_names
  HelperTestCase
    testSerialGenerator ...                                                [32;1m[OK][0m
  ServerDNSTestCase
    Test DNS 'A6' record queries (IPv6) ...                                [32;1m[OK][0m
    Test DNS 'AAAA' record queries (IPv6) ...                              [32;1m[OK][0m
    Test DNS 'AFSDB' record queries ...                                    [32;1m[OK][0m
    Test simple DNS 'A' record queries ...                                 [32;1m[OK][0m
    Test DNS 'A' record queries with multiple answers ...                  [32;1m[OK][0m
    Test DNS 'A' record queries with edge cases ...                        [32;1m[OK][0m
    Test DNS 'SOA' record queries ...                                      [32;1m[OK][0m
    Test DNS 'CNAME' record queries ...                                    [32;1m[OK][0m
    Test DNS 'HINFO' record queries ...                                    [32;1m[OK][0m
    Test DNS 'MB' record queries ...                                       [32;1m[OK][0m
    Test DNS 'MG' record queries ...                                       [32;1m[OK][0m
    Test DNS 'MINFO' record queries ...                                    [32;1m[OK][0m
    Test DNS 'MR' record queries ...                                       [32;1m[OK][0m
    Test DNS 'MX' record queries ...                                       [32;1m[OK][0m
    Test DNS 'NS' record queries ...                                       [32;1m[OK][0m
    Test DNS 'PTR' record queries ...                                      [32;1m[OK][0m
    Test DNS 'RP' record queries ...                                       [32;1m[OK][0m
    Test DNS 'SRV' record queries ...                                      [32;1m[OK][0m
    testSomeRecordsWithTTLs ...                                            [32;1m[OK][0m
    Test DNS 'TXT' record queries ...                                      [32;1m[OK][0m
    Test DNS 'WKS' record queries ...                                      [32;1m[OK][0m
    Test DNS 'AXFR' queries (Zone transfer) ...                            [32;1m[OK][0m
twisted.test.test_newcred
  CramMD5CredentialsTestCase
    testCheckPassword ...                                                  [32;1m[OK][0m
    testIdempotentChallenge ...                                            [32;1m[OK][0m
    testWrongPassword ...                                                  [32;1m[OK][0m
  NewCredTest
    testBasicLogin ...                                                     [32;1m[OK][0m
    testFailedLogin ...                                                    [32;1m[OK][0m
    testFailedLoginName ...                                                [32;1m[OK][0m
    testListCheckers ...                                                   [32;1m[OK][0m
  OnDiskDatabaseTestCase
    testCaseInSensitivity ...                                              [32;1m[OK][0m
    testHashedPasswords ...                                                [32;1m[OK][0m
    testRequestAvatarId ...                                                [32;1m[OK][0m
    testUserLookup ...                                                     [32;1m[OK][0m
twisted.test.test_newjelly
  CircularReferenceTestCase
    testCircleWithInvoker ...                                              [32;1m[OK][0m
    testSimpleCircle ...                                                   [32;1m[OK][0m
  JellyTestCase
    test for class-level security of serialization ...                     [32;1m[OK][0m
    test to make sure that objects retain identity properly ...            [32;1m[OK][0m
    test for all types currently supported in jelly ...                    [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
    testMoreReferences ...                                                 [32;1m[OK][0m
    testNewStyleClasses ...                                                [32;1m[OK][0m
    testSetState ...                                                       [32;1m[OK][0m
    simplest test case ...                                                 [32;1m[OK][0m
    testStressReferences ...                                               [32;1m[OK][0m
    test for type-level security of serialization ...                      [32;1m[OK][0m
    testUnicode ...                                                        [32;1m[OK][0m
twisted.test.test_news
  NewsTestCase
    testArticleExists ...                                                  [32;1m[OK][0m
    testArticleRequest ...                                                 [32;1m[OK][0m
    testBodyRequest ...                                                    [32;1m[OK][0m
    testHeadRequest ...                                                    [32;1m[OK][0m
twisted.test.test_nmea
  NMEAReceiverTestCase
    testGPSMessages ...                                                    [32;1m[OK][0m
twisted.test.test_nntp
  NNTPTestCase
    testLoopback ...                                                       [32;1m[OK][0m
twisted.test.test_paths
  FilePathTestCase
    testGetAndSet ...                                                      [32;1m[OK][0m
    testInsecureUNIX ...                                                   [32;1m[OK][0m
    Windows has 'special' filenames like NUL and CON and COM1 and LPR ... [34;1m[SKIPPED][0m
    testInvalidSubdir ...                                                  [32;1m[OK][0m
    testMultiExt ...                                                       [32;1m[OK][0m
    testPersist ...                                                        [32;1m[OK][0m
    testPreauthChild ...                                                   [32;1m[OK][0m
    testStatCache ...                                                      [32;1m[OK][0m
    testValidFiles ...                                                     [32;1m[OK][0m
    testValidSubdir ...                                                    [32;1m[OK][0m
  URLPathTestCase
    testChildString ...                                                    [32;1m[OK][0m
    testHereString ...                                                     [32;1m[OK][0m
    testParentString ...                                                   [32;1m[OK][0m
    testSiblingString ...                                                  [32;1m[OK][0m
    testStringConversion ...                                               [32;1m[OK][0m
twisted.test.test_pb
  BrokerTestCase
    testCache ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:112: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:114: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:117: exceptions.DeprecationWarning: This is deprecated. Use PBServerFactory.
                                                         [32;1m[OK][0m
    testCopy ...                                                           [32;1m[OK][0m
    testDefer ...                                                          [32;1m[OK][0m
    testFactoryCopy ...                                                    [32;1m[OK][0m
    testObserve ...                                                        [32;1m[OK][0m
    testPublishable ...                                                    [32;1m[OK][0m
    testRefcount ...                                                       [32;1m[OK][0m
    testReference ...                                                      [32;1m[OK][0m
    testResult ...                                                         [32;1m[OK][0m
    testTooManyRefs ...                                                    [32;1m[OK][0m
    testViewPoint ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:532: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/internet/defer.py:308: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1111: exceptions.DeprecationWarning: pb.Perspective is deprecated, please use pb.Avatar.
                                                     [32;1m[OK][0m
  ConnectionTestCase
    testConnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:785: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:787: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:790: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:794: exceptions.DeprecationWarning: This is deprecated. Use PBServerFactory.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:815: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1327: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                                       [32;1m[OK][0m
    testDisconnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:861: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                                    [32;1m[OK][0m
    testEmptyPerspective ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:871: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                              [32;1m[OK][0m
    testGetObjectAt ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:809: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.
                                                   [32;1m[OK][0m
    testGoodFailedConnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:853: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                             [32;1m[OK][0m
    testGoodGetObject ...                                                  [32;1m[OK][0m
    testGoodPerspective ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:842: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:846: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                               [32;1m[OK][0m
    testIdentityConnector ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:820: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1441: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1408: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.
                                             [32;1m[OK][0m
    testImmediateClose ...                                                 [32;1m[OK][0m
    testReconnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:883: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:882: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                                     [32;1m[OK][0m
  DisconnectionTestCase
    testBadSerialization ...                                               [32;1m[OK][0m
    testDisconnection ...                                                  [32;1m[OK][0m
  NSPTestCase
    testNSP ...                                                            [32;1m[OK][0m
  NewCredTestCase
    testBadLogin ...                                                       [32;1m[OK][0m
    testLoginLogout ...                                                    [32;1m[OK][0m
    testView ...                                                           [32;1m[OK][0m
  PagingTestCase
    testPagingWithCallback ...                                             [32;1m[OK][0m
    testPagingWithoutCallback ...                                          [32;1m[OK][0m
  SpreadUtilTestCase
    testAsync ...                                                          [32;1m[OK][0m
    testAsyncFail ...                                                      [32;1m[OK][0m
    testRemoteMethod ...                                                   [32;1m[OK][0m
    testSync ...                                                           [32;1m[OK][0m
twisted.test.test_pbfailure
  PBFailureTest
    testPBFailures ...                                                     [32;1m[OK][0m
  PBFailureTestUnsafe
    testPBFailures ...                                                     [32;1m[OK][0m
twisted.test.test_pcp
  BufferedConsumerTest
    testPauseIntercept ...                                                 [32;1m[OK][0m
    testRegisterPull ...                                                   [32;1m[OK][0m
    testResumeIntercept ...                                                [32;1m[OK][0m
    Make sure I say "when." ...                                            [32;1m[OK][0m
    Make sure I resumeProducing when my buffer empties. ...                [32;1m[OK][0m
  BufferedPullTests
    testLateWriteBuffering ...                                             [32;1m[OK][0m
    testResumePull ...                                                     [32;1m[OK][0m
  ConsumerProxyTest
    testFinish ...                                                         [32;1m[OK][0m
    testUnregister ...                                                     [32;1m[OK][0m
    testWrite ...                                                          [32;1m[OK][0m
  PCPII_ConsumerInterfaceTest
    testFinish ...                                                         [32;1m[OK][0m
    testRegisterPush ...                                                   [32;1m[OK][0m
    testUnregister ...                                                     [32;1m[OK][0m
  PCPII_ProducerInterfaceTest
    testPause ...                                                          [32;1m[OK][0m
    testRegistersProducer ...                                              [32;1m[OK][0m
    testResume ...                                                         [32;1m[OK][0m
    testResumeBuffer ...                                                   [32;1m[OK][0m
    testResumeNoEmptyWrite ...                                             [32;1m[OK][0m
    testStop ...                                                           [32;1m[OK][0m
  PCPII_PullProducerTest
    testHoldWrites ...                                                     [32;1m[OK][0m
    testLateWrite ...                                                      [32;1m[OK][0m
    testMergeWrites ...                                                    [32;1m[OK][0m
    testPull ...                                                           [32;1m[OK][0m
  PCP_ConsumerInterfaceTest
    testFinish ...                                                         [32;1m[OK][0m
    testRegisterPush ...                                                   [32;1m[OK][0m
    testUnregister ...                                                     [32;1m[OK][0m
  PCP_ProducerInterfaceTest
    testPause ...                                                          [32;1m[OK][0m
    testRegistersProducer ...                                              [32;1m[OK][0m
    testResume ...                                                         [32;1m[OK][0m
    testResumeBuffer ...                                                   [32;1m[OK][0m
    testResumeNoEmptyWrite ...                                             [32;1m[OK][0m
    testStop ...                                                           [32;1m[OK][0m
  PCP_PullProducerTest
    testHoldWrites ...                                                     [32;1m[OK][0m
    testLateWrite ...                                                      [32;1m[OK][0m
    testMergeWrites ...                                                    [32;1m[OK][0m
    testPull ...                                                           [32;1m[OK][0m
  ProducerProxyTest
    testStop ...                                                           [32;1m[OK][0m
  TransportInterfaceTest
    testWrite ...                                                          [32;1m[OK][0m
twisted.test.test_persisted
  AOTTestCase
    testBasicIdentity ...                                                  [32;1m[OK][0m
    testCopyReg ...                                                        [32;1m[OK][0m
    testFunkyReferences ...                                                [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
    testNonDictState ...                                                   [32;1m[OK][0m
  EphemeralTestCase
    testEphemeral ...                                                      [32;1m[OK][0m
  MarmaladeTestCase
    testBasicIdentity ...                                                  [32;1m[OK][0m
    testCopyReg ...                                                        [32;1m[OK][0m
    testMarmaladeable ...                                                  [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
  PicklingTestCase
    testClassMethod ...                                                    [32;1m[OK][0m
    testInstanceMethod ...                                                 [32;1m[OK][0m
    testModule ...                                                         [32;1m[OK][0m
    testStringIO ...                                                       [32;1m[OK][0m
  VersionTestCase
    testNullVersionUpgrade ...                                             [32;1m[OK][0m
    testVersionUpgrade ...                                                 [32;1m[OK][0m
twisted.test.test_policies
  TestTimeout
    testCancelTimeout ...                                                  [32;1m[OK][0m
    testNoTimeout ...                                                      [32;1m[OK][0m
    testResetTimeout ...                                                   [32;1m[OK][0m
    testReturn ...                                                         [32;1m[OK][0m
    testTimeout ...                                                        [32;1m[OK][0m
  ThrottlingTestCase
    testLimit ...                                                          [32;1m[OK][0m
    testReadLimit ...                                                 [34;1m[SKIPPED][0m
    testWriteLimit ...                                                [34;1m[SKIPPED][0m
  TimeoutTestCase
    testThatReadingDataAvoidsTimeout ...                                   [32;1m[OK][0m
    testThatSendingDataAvoidsTimeout ...                                   [32;1m[OK][0m
    testTimeout ...                                                        [32;1m[OK][0m
twisted.test.test_pop3
  AnotherPOP3TestCase
    testAuthListing ...                                                    [32;1m[OK][0m
    testBuffer ...                                                         [32;1m[OK][0m
    testIllegalPASS ...                                                    [32;1m[OK][0m
    testNoop ...                                                           [32;1m[OK][0m
  CapabilityTestCase
    testEXPIRE ...                                                         [32;1m[OK][0m
    testIMPLEMENTATION ...                                                 [32;1m[OK][0m
    testLOGIN_DELAY ...                                                    [32;1m[OK][0m
    testSASL ...                                                           [32;1m[OK][0m
    testTOP ...                                                            [32;1m[OK][0m
    testUIDL ...                                                           [32;1m[OK][0m
    testUSER ...                                                           [32;1m[OK][0m
  DualFunctionTestCase
    testLIST ...                                                           [32;1m[OK][0m
    testUIDL ...                                                           [32;1m[OK][0m
  GlobalCapabilitiesTestCase
    testEXPIRE ...                                                         [32;1m[OK][0m
    testLOGIN_DELAY ...                                                    [32;1m[OK][0m
  POP3TestCase
    testLoopback ...                                                       [32;1m[OK][0m
    testMessages ...                                                       [32;1m[OK][0m
  SASLTestCase
    testValidLogin ...                                                     [32;1m[OK][0m
twisted.test.test_postfix
  PostfixTCPMapQuoteTestCase
    testData ...                                                           [32;1m[OK][0m
  Valid
    testChat ...                                                           [32;1m[OK][0m
    testDeferredChat ...                                                   [32;1m[OK][0m
twisted.test.test_process
  PosixProcessTestCase
    testAbnormalTermination ...                                          [31;1m[FAIL][0m
    testNormalTermination ...                                              [32;1m[OK][0m
    testProcess ...                                                        [32;1m[OK][0m
    testSignal ...                                                         [32;1m[OK][0m
    testStderr ...                                                         [32;1m[OK][0m
    twisted.internet.stdio test. ...                                       [32;1m[OK][0m
  PosixProcessTestCasePTY
    testAbnormalTermination ...                                          [31;1m[FAIL][0m
    testNormalTermination ... 





Killed by signal 2.
[ed at rodney ~]$ 




From itamar at itamarst.org  Wed Feb  4 13:17:10 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 04 Feb 2004 13:17:10 -0500
Subject: [Twisted-Python] I'm mostly offline for next 2-3 weeks
Message-ID: <1075918562.26533.3.camel@sheriffpony>

if anyone needs to get in touch: 347-866-4456





From itamar at itamarst.org  Wed Feb  4 13:17:25 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 04 Feb 2004 13:17:25 -0500
Subject: [Twisted-Python] I'm mostly offline for next 2-3 weeks
Message-ID: <1075918562.26533.3.camel@sheriffpony>

if anyone needs to get in touch: 347-866-4456





From golux at comcast.net  Wed Feb  4 23:31:33 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Wed, 04 Feb 2004 23:31:33 -0500
Subject: [Twisted-Python] Twisted soap bug (issue 488) + patches
Message-ID: <4021C725.1000006@comcast.net>

Hi gang,

I just posted a bug in t.w.soap today, and just now added
patches for soap.py and test_soap.py.  I'd appreciate it
if someone would have a look at them, since Itamar is
going to be offline for a while.  (I made sure that
Twisted/doc/examples/soap.py works now -- it doesn't with
the current CVS version of t.w.soap, but does with the
patch.)

http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue488

Cheers,
Steve




From radix at twistedmatrix.com  Fri Feb  6 17:32:03 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 06 Feb 2004 17:32:03 -0500
Subject: [Twisted-Python] Twisted PyCon Sprints
Message-ID: <402415E3.70508@twistedmatrix.com>

PyCon is going to have 4 days of sprinting this year: March 20 - 23. 
There will be a lot of Twisted hacking going on.

As pointed out at http://www.python.org/cgi-bin/moinmoin/TwistedSprint , 
I'm not going to be organizing a monolithic "Twisted Sprint" this year. 
Last year's wasn't organized well; there's no use in organizing a single 
sprint around so many topics.

Please see the above URL for sprints related to Twisted that will be 
taking place, and to add any of your own Twisted-related sprints. It 
would also be nice if anybody who wants to participate in any of these 
would mention so on that page. It's a wiki, so anybody can edit it (Use 
the "EditText" link on the bottom-left).

There's a lot of potential for great productivity at sprints, so I 
encourage everyone who's coming to PyCon to participate. It will 
definitely be a lot of fun. :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040206/ce5cb89d/attachment.pgp 

From stephen at thorne.id.au  Fri Feb  6 20:37:17 2004
From: stephen at thorne.id.au (Stephen Thorne)
Date: Sat, 07 Feb 2004 11:37:17 +1000
Subject: [Twisted-Python] Throttling static.File
Message-ID: <1076117837.885.20.camel@shautha.thorne>

Hi,

I wanted to write a http server that would:
  - show progress of all downloads
  - only allow one http connection per file per ip
  - rate limit the connection to 4kb/sec.

now, I don't know enough about producers in order to know what
pauseProducing and resumeProducing are actually supposed to do. That
aside, I know that in the context of static.File and ThrottlingFactory,
they're doing something that doesn't work properly.

static.FileTransfer.pauseProducing is a no-op
static.FileTransfer.resumeProducing sends 63665 bytes down the
connection

policies.ThrottlingFactory relies on how many bytes have been sent down
the connection per-second to work out if it should throttle, and to
throtte, it calls pauseProducing until the bytes/second has dropped
enough to call resumeProducing.

Basically, using these two components together didn't work, so I hacked
stuff until it did. Please bear in mind this patch should not be applied
because it breaks ThrottlingFactory for anything other than
static.File's (calling pauseProducing(pause=1) on something without
kwargs would be bad).

Is there a 'real' solution to this situation, mine is hideous.

(On another note, and this is a nevow thing, NevowSite is broken with
static.File - I had to use site.Site( MyNevowPage() ) instead of
NevowSite( MyNevowPage() - no big hassle)

Stephen.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch
Type: text/x-patch
Size: 3711 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040207/77154921/attachment.bin 

From executer2002 at gmx.net  Wed Feb  4 08:24:23 2004
From: executer2002 at gmx.net (Tobias Philipp)
Date: Wed, 04 Feb 2004 14:24:23 +0100
Subject: [Twisted-Python] Sending data from ConnectionHandler A to Client B
Message-ID: <4020F287.7080003@gmx.net>

Hi!

Just an easy question... Client A connects, Client B connects. Client A 
sends "Hi, there!" to the server and the server now should send "Hi, 
there" do Client B. Whats the best solution for this small problem?

Thank you very much and I hope that you don't have answered this 
question too often ;-)

Bye
Tobias



From radix at twistedmatrix.com  Sun Feb  8 15:39:14 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 08 Feb 2004 15:39:14 -0500
Subject: [Twisted-Python] Sending data from ConnectionHandler A to Client
 B
In-Reply-To: <4020F287.7080003@gmx.net>
References: <4020F287.7080003@gmx.net>
Message-ID: <40269E72.7040908@twistedmatrix.com>

Tobias Philipp wrote:
> Hi!
> 
> Just an easy question... Client A connects, Client B connects. Client A 
> sends "Hi, there!" to the server and the server now should send "Hi, 
> there" do Client B. Whats the best solution for this small problem?

See doc/examples/chatserver.py


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040208/4ab9e88e/attachment.pgp 

From mary-twisted at puzzling.org  Sun Feb  8 16:59:49 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 9 Feb 2004 08:59:49 +1100
Subject: [Twisted-Python] Documentation update: bug filing policy
Message-ID: <20040208215949.GA3565@home.puzzling.org>

Hey everyone,

I've finally dug in and started producing (a little) more documentation
for Twisted. I'd like to encourage people to submit documentation bugs
when they find documentation is inadequate, outdated or missing. (Mark
the topic as "documentation" and assign them to me -- hypatia). Patches
appreciated :)

If you've written an undocumented module that is intended to be used and
is stable (for some arbitary "should be documented" value of stable) a
bug should be filed to the effect that it should be documented. Make me
nosy on docs bugs even if you assign elsewhere. If you assign new docs
to me, I will try and write docs for these bugs, but I probably won't be
able to do this quickly, so don't assign documentation for new modules
to me unless you're prepared to wait. However, if you can't figure out
who to assign to, assign to me by default.

-Mary



From mary-twisted at puzzling.org  Sun Feb  8 17:03:39 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 9 Feb 2004 09:03:39 +1100
Subject: [Twisted-Python] Bug guidelines
Message-ID: <20040208220339.GB3565@home.puzzling.org>

I'm going to write a "bug guidelines" doc for Twisted -- less generic
"please file helpful bugs" and more specific Twisted bug guidelines.

In particular, it's going to say who to assign bugs in particular
modules to. If you own a module or want bugs assigned to you by default,
please add details to
http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue492

If you have questions about Twisted bug reporting or bug fixing process
that you want answered, or answers you want documented, please also add
to http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue492

-Mary



From mcfletch at rogers.com  Mon Feb  9 05:51:45 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Mon, 09 Feb 2004 05:51:45 -0500
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP queries with Twisted...
Message-ID: <40276641.30300@rogers.com>

I've written a UDP-based protocol adaptor (TwistedSNMP) where one of the 
key requirements is the ability to scan thousands of SNMP Agents 
"simultaneously" (i.e. the requests should be asynchronously sent and 
retired as the Agents respond).

http://members.rogers.com/mcfletch/programming/index.htm#TwistedSNMP

Writing a simple asynchronous loop myself (poll on a simple socket, send 
message from queue when writable, read one into other queue when 
readable) allowed for doing a few thousand queries simultaneously), with 
only a few dozen dropped messages.  However, with the Twisted equivalent 
(UDPTransport with my simple protocol object), I was seeing huge drop 
rates, so, gathering that Twisted isn't queueing up the UDP requests, I 
wrote a (byzantine) query-throttling mechanism with Twisted defers.

Problem is, it's a byzantine, fragile (and *slow*) solution to what 
would *seem* to be one of the most common requirements in networked 
development.  Worse yet, because I am seeing such high drop rates I wind 
up having to batch in very small groups, serially (instead of 
parallel-ly), so the primary purpose of the system (fast querying of 
thousands of agents) is lost.  (Instead of taking 1 or 2 minutes to 
query 800 or so Agents it will take on the order of 10 minutes.)

So, the question: is there a simple way to turn on buffered mode in UDP 
transports so that they can deal with queueing up a few thousand 
messages to send, sending them, then having a few thousand computers 
send a reply (within a few seconds of one another)?  Is Twisted just not 
Queue-reliant via use of some mechanism I haven't discovered yet?  Even 
if I do find a decent queueing mechanism, I'm still left with the 
problem that timeouts and the like are going to wind up being measured 
from queueing-time, rather than sending time... not an issue if 
everything gets sent in a half-second or so, but a real problem if it 
takes 8 or 9 seconds just to send the original messages out.

Looking at the udp.Port class, I'm not seeing anything providing a 
queue, seems as though there's a non-blocking write or read, but nothing 
to handle overflows of sends or receives AFAICT, though it looks as 
though a protocol could do some queueing on incoming in its 
datagramReceived... just not sure how that would work.

Thoughts appreciated,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From stephen at thorne.id.au  Mon Feb  9 06:32:18 2004
From: stephen at thorne.id.au (Stephen Thorne)
Date: Mon, 09 Feb 2004 21:32:18 +1000
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
	queries with Twisted...
In-Reply-To: <40276641.30300@rogers.com>
References: <40276641.30300@rogers.com>
Message-ID: <1076326338.1012.4.camel@shautha.thorne>

Have a look at htb.py, you should be able to rate limit the udp
throughput rather easily.

For me doing web stuff it was (in its entirety) like this:


def RateBucket(parent=None):
    bucket = htb.Bucket(parent)
    bucket.rate = 4000
    bucket.maxburst = 12000
    return bucket

bucketFilter = htb.FilterByHost()
bucketFilter.bucketFactory = RateBucket

application = service.Application("simple")
site_factory = server.Site( Directory() )
internet.TCPServer( 
    SERVER_PORT, 
    site_factory
).setServiceParent(application)
site_factory.protocol = htb.ShapedProtocolFactory(
    site_factory.protocol, 
    bucketFilter
)

Hope that helps.

Stephen Thorne

On Mon, 2004-02-09 at 20:51, Mike C. Fletcher wrote:
> I've written a UDP-based protocol adaptor (TwistedSNMP) where one of the 
> key requirements is the ability to scan thousands of SNMP Agents 
> "simultaneously" (i.e. the requests should be asynchronously sent and 
> retired as the Agents respond).
> 
> http://members.rogers.com/mcfletch/programming/index.htm#TwistedSNMP
> 
> Writing a simple asynchronous loop myself (poll on a simple socket, send 
> message from queue when writable, read one into other queue when 
> readable) allowed for doing a few thousand queries simultaneously), with 
> only a few dozen dropped messages.  However, with the Twisted equivalent 
> (UDPTransport with my simple protocol object), I was seeing huge drop 
> rates, so, gathering that Twisted isn't queueing up the UDP requests, I 
> wrote a (byzantine) query-throttling mechanism with Twisted defers.
> 
> Problem is, it's a byzantine, fragile (and *slow*) solution to what 
> would *seem* to be one of the most common requirements in networked 
> development.  Worse yet, because I am seeing such high drop rates I wind 
> up having to batch in very small groups, serially (instead of 
> parallel-ly), so the primary purpose of the system (fast querying of 
> thousands of agents) is lost.  (Instead of taking 1 or 2 minutes to 
> query 800 or so Agents it will take on the order of 10 minutes.)
> 
> So, the question: is there a simple way to turn on buffered mode in UDP 
> transports so that they can deal with queueing up a few thousand 
> messages to send, sending them, then having a few thousand computers 
> send a reply (within a few seconds of one another)?  Is Twisted just not 
> Queue-reliant via use of some mechanism I haven't discovered yet?  Even 
> if I do find a decent queueing mechanism, I'm still left with the 
> problem that timeouts and the like are going to wind up being measured 
> from queueing-time, rather than sending time... not an issue if 
> everything gets sent in a half-second or so, but a real problem if it 
> takes 8 or 9 seconds just to send the original messages out.
> 
> Looking at the udp.Port class, I'm not seeing anything providing a 
> queue, seems as though there's a non-blocking write or read, but nothing 
> to handle overflows of sends or receives AFAICT, though it looks as 
> though a protocol could do some queueing on incoming in its 
> datagramReceived... just not sure how that would work.
> 
> Thoughts appreciated,
> Mike
> 
> _______________________________________
>   Mike C. Fletcher
>   Designer, VR Plumber, Coder
>   http://members.rogers.com/mcfletch/
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From mcfletch at rogers.com  Tue Feb 10 02:24:04 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Tue, 10 Feb 2004 02:24:04 -0500
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
 queries with Twisted...
In-Reply-To: <1076326338.1012.4.camel@shautha.thorne>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne>
Message-ID: <40288714.2040100@rogers.com>

Stephen Thorne wrote:

>Have a look at htb.py, you should be able to rate limit the udp
>throughput rather easily.
>
>For me doing web stuff it was (in its entirety) like this:
>  
>
<bandwidth throttler clipped>

>Hope that helps.
>  
>
If for no other reason than that it convinced me there wasn't a simple 
and elegant solution readily available to be dropped in for a UDP system 
:) .  In the final analysis, what was happening is that individual 
queries were timing out *before the queries were even sent* because it 
was taking so incredibly long to format and send all of the queries.

The manually written system was "pull" based.  It marked the 
time-of-sending for timeout purposes deep in the select loop.  The 
Twisted version is setting the timeout via a callLater when the request 
is *submitted*.  With 2 or 3 thousand queries, the 20 seconds of timeout 
was finishing before any messages were processed from the incoming port, 
then the timeouts would all get called, which kept eating up processing 
time, preventing any messages from getting read, so the port's internal 
buffer would fill up and more timeouts occurred, so basically nothing 
would get through.

Queueing up the outputs before sending didn't help, btw.  Nor would 
simple bandwidth throttling without modifying the timeout characteristics.

My solution, which is rather low tech, is to do an effective "yield" 
after each message is sent, to allow for processing incoming responses.  
This is done with this little method:

    def smallBatch( self, oids, tables, index=0, iterDelay=.01 ):
        if index < len(self.proxies):
            proxy = self.proxies[index]
            self.singleProxy(
                proxy,oids,tables
            )
            reactor.callLater( iterDelay, self.smallBatch, oids, tables, 
index+1 )
        else:
            dl = defer.DeferredList( self.partialDefers )
            dl.addCallback( self.returnFinal )

(which also has a side-effect of introducing a bandwidth throttling), 
but most importantly, it delays setting the timeout on any given query 
until when the query is actually sent (or fairly close to then).  Put 
another way, it gives the system a chance to send the message as soon 
after submitting it as possible.

Have fun all, and thanks, Stephen,
Mike

>Stephen Thorne
>
>On Mon, 2004-02-09 at 20:51, Mike C. Fletcher wrote:
>  
>
...

>>only a few dozen dropped messages.  However, with the Twisted equivalent 
>>(UDPTransport with my simple protocol object), I was seeing huge drop 
>>rates, so, gathering that Twisted isn't queueing up the UDP requests, I 
>>wrote a (byzantine) query-throttling mechanism with Twisted defers.
>>    
>>
...

 
_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From Thomas.Favier at accelance.fr  Tue Feb 10 04:03:56 2004
From: Thomas.Favier at accelance.fr (Thomas Favier)
Date: Tue, 10 Feb 2004 10:03:56 +0100
Subject: [Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous
 UDP queries with Twisted...)
In-Reply-To: <40288714.2040100@rogers.com>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com>
Message-ID: <40289E7C.9000100@accelance.fr>

Mike C. Fletcher wrote:
> If for no other reason than that it convinced me there wasn't a simple 
> and elegant solution readily available to be dropped in for a UDP system 
> :) .  In the final analysis, what was happening is that individual 
> queries were timing out *before the queries were even sent* because it 
> was taking so incredibly long to format and send all of the queries.

You bring my point with SNMP : I've tried to build a SNMP poller based 
on twisted and pySNMP. Main trouble i've had is the decoding time of the 
pure python ASN parser. It spent about 1 full second decoding (packets 
are about 7ko, as i get all values and tables with a GET-BULK, there is 
room for improvement by splitting requests, but that's not significant 
for that matter). So i switched to a threaded implementation using 
yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
for the same requests. Load on the server was more than halved.

Seems that you are hit by the same kind of problems...

I've dug the source of UCD-SNMP but was not able to see a simple hack to 
integrate the UCD packet decoding and the twisted loop, especially with 
the parts dealing with SNMPv3 (UCD- and NET-snmp almost forces you to 
use their select wrapper...) Moreover, the last yapsnmp release is based 
on v4.3 so a little out of date. As my solution works for my (smaller) 
needs, i currently have no plan to improve my solution, but if anyone is 
interested in bringing a full high performance ASN coder-decoder to 
twisted, i'd be willing to help.


-- 
Thomas FAVIER
.accelance msp
Tel. +33 4 26 29 12 22
http://www.accelance.fr




From mcfletch at rogers.com  Tue Feb 10 04:26:54 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Tue, 10 Feb 2004 04:26:54 -0500
Subject: [Twisted-Python] Twisted and SNMP
In-Reply-To: <40289E7C.9000100@accelance.fr>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
Message-ID: <4028A3DE.2020101@rogers.com>

Thomas Favier wrote:

> Mike C. Fletcher wrote:
>
>> If for no other reason than that it convinced me there wasn't a 
>> simple and elegant solution readily available to be dropped in for a 
>> UDP system :) .  In the final analysis, what was happening is that 
>> individual queries were timing out *before the queries were even 
>> sent* because it was taking so incredibly long to format and send all 
>> of the queries.
>
>
> You bring my point with SNMP : I've tried to build a SNMP poller based 
> on twisted and pySNMP. Main trouble i've had is the decoding time of 
> the pure python ASN parser. It spent about 1 full second decoding 
> (packets are about 7ko, as i get all values and tables with a 
> GET-BULK, there is room for improvement by splitting requests, but 
> that's not significant for that matter). So i switched to a threaded 
> implementation using yapsnmp (and ugly deferToThreads). Decoding times 
> are about 0.02 seconds for the same requests. Load on the server was 
> more than halved.
>
> Seems that you are hit by the same kind of problems...

...

> but if anyone is interested in bringing a full high performance ASN 
> coder-decoder to twisted, i'd be willing to help.

Ilya (creator of PySNMP) just released a new version of PySNMP 
yesterday.  It's noticeably faster feeling than the 3.3.x version.  I 
don't have time to do timings with it, but I'd guess it's probably 
taking 3/4 of the time of the previous version.  Still likely not 0.02 
seconds on getbulk requests, but noticeably faster.

Profiling the ASN parser and writing a small accelerator module would 
likely be quite doable.  From what I've seen there's not a lot of 
complex code in there.  It's just hidden deep in the package structure.  
Nice thing about that approach is that it's possible to port to new 
platforms and only worry about the C module being present if you need 
the speed there.

My primary interest here isn't really in speed, we query 8000 agents at 
a time, and only need to query once every few *hours*.  The flexibility 
& robustness of the code is my primary interest.  Too much C gets me 
worried :) , particularly with networking code, where buffer overflows 
and the like are a pain to avoid.

Have fun,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From nico at tekNico.net  Tue Feb 10 06:08:22 2004
From: nico at tekNico.net (Nicola Larosa)
Date: Tue, 10 Feb 2004 12:08:22 +0100
Subject: [Twisted-Python] Re: Twisted and SNMP
In-Reply-To: <4028A3DE.2020101@rogers.com>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr> <4028A3DE.2020101@rogers.com>
Message-ID: <4028BBA6.1060009@tekNico.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

> Ilya (creator of PySNMP) just released a new version of PySNMP
> yesterday.

As a data point, TwistedSNMP just appearead on Daily Python-URL:

Two Python SNMP packages updated
http://www.pycs.net/users/0000231/weblog/2004/02/05.html


- --
Nicola Larosa - nico-NoSp at m-tekNico.net

"Hope" is the thing with feathers -
That perches in the soul -
And sings the tune without the words -
And never stops - at all -
 -- Emily Dickinson

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAKLuGXv0hgDImBm4RAmfeAKCmLWv313qygJ2GLj5vqkPe/7UnxACdGt8Q
fzPd1AEB5PE6HvGVZhsF50E=
=S9cz
-----END PGP SIGNATURE-----

-- 
Nicola Larosa - nico at tekNico.net

"Hope" is the thing with feathers -
That perches in the soul -
And sings the tune without the words -
And never stops - at all -
 -- Emily Dickinson




From anthony at interlink.com.au  Tue Feb 10 08:21:24 2004
From: anthony at interlink.com.au (Anthony Baxter)
Date: Wed, 11 Feb 2004 00:21:24 +1100
Subject: [Twisted-Python] Twisted and SNMP
In-Reply-To: <40289E7C.9000100@accelance.fr>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
Message-ID: <4028DAD4.2020303@interlink.com.au>

Thomas Favier wrote:
> You bring my point with SNMP : I've tried to build a SNMP poller based 
> on twisted and pySNMP. Main trouble i've had is the decoding time of the 
> pure python ASN parser. It spent about 1 full second decoding (packets 
> are about 7ko, as i get all values and tables with a GET-BULK, there is 
> room for improvement by splitting requests, but that's not significant 
> for that matter). So i switched to a threaded implementation using 
> yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
> for the same requests. Load on the server was more than halved.


Considered doing some profiling, then using psyco or pyrex to remove the
bottlenecks? This seems, to me, like something they'd be great at.




From golux at comcast.net  Wed Feb 11 00:00:39 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Wed, 11 Feb 2004 00:00:39 -0500
Subject: [Twisted-Python] For examples:  cred.py example adapted to use a db-based checker
Message-ID: <4029B6F7.6030703@comcast.net>

I don't know if this is of interest, but at least it works.  :)
There are surely some suboptimal (heh) things about it (like
doing separate db accesses for username and passwd, which I'll
work on some more ... but both accesses use a primary key
index, so not *too* bad I guess), so feel free to comment and/or
patch/rewrite -- especially to show more mainstream twisted ways
to do it, which I'm always happy to learn.

Cheers,
Steve
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: credwithdb.py
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040211/4d53b852/attachment.txt 

From andy at thecablelounge.com  Wed Feb 11 07:44:04 2004
From: andy at thecablelounge.com (andy at thecablelounge.com)
Date: Wed, 11 Feb 2004 04:44:04 -0800
Subject: [Twisted-Python] Good(twisted) References for Programming Patterns
Message-ID: <1076503444.402a2394d0360@cablelounge.com>

Hi all,

I'm looking to pick up a reference on programming patterns. Something that
agrees with twisted's flavour would be a big advantage.  Any recommendations
are greatly appreciated.

cheers,
Andy.



From James.Hedden at RANDOLPH.AF.MIL  Wed Feb 11 15:51:02 2004
From: James.Hedden at RANDOLPH.AF.MIL (Hedden James E Contr AFPC/DPDOSC)
Date: Wed, 11 Feb 2004 14:51:02 -0600
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
Message-ID: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>

Hi, 

 

I perform initial evaluations of software for the Air Force Personnel
Center.  In that capacity, I install software to be evaluated onto a test
box solely to ensure the program is compatible with Windows 2000 and our
Network.  Once that's established, the program is installed to the user's
computer (preferably another test computer) for the user-level evaluation
that only the actual user of the program can do.

 

I've downloaded Twisted-1.1.1.win32-py2.3.exe for eval from your website and
also need some information for my eval sheet.  I checked your site, but
couldn't find the following technical specifications / requirements I need.
Can you supply, or point me to this information, please?

 

        Operating Systems supported 

        Type Processor required 

        Memory requirements 

        Hard Drive space required 

        Other Hardware and Software requirements 

 

Is there also a more compact, simpler definition of the program; and a
simple list of functions? 

 

Thank you very much for your time and trouble. 

 

Cheers! 

 

Jim Hedden, AFPC/DPDOSC

Communications Support 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040211/75b2a301/attachment.htm 

From alexander.winston at comcast.net  Wed Feb 11 16:16:28 2004
From: alexander.winston at comcast.net (Alexander Winston)
Date: Wed, 11 Feb 2004 16:16:28 -0500
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
In-Reply-To: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
References: 
	 <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
Message-ID: <1076534187.1582.10.camel@duende>

On Wed, 2004-02-11 at 15:51, Hedden James E Contr AFPC/DPDOSC wrote:
> I've downloaded Twisted-1.1.1.win32-py2.3.exe for eval from your
> website and also need some information for my eval sheet.  I checked
> your site, but couldn't find the following technical specifications /
> requirements I need.  Can you supply, or point me to thisinformation,
> please?
> 
>  
> 
>         Operating Systems supported 
> 
>         Type Processor required 
> 
>         Memory requirements 
> 
>         Hard Drive space required 
> 
>         Other Hardware and Software requirements 
> 
>  
> 
> Is there also a more compact, simpler definition of the program; and a
> simple list of functions? 

As far as operating systems go, I'm fairly certain that Twisted will run
on any operating system on which Python will run. I don't know of any
processor requirements; the only thing that's really required is Python.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040211/4a46db76/attachment.pgp 

From corydodt at twistedmatrix.com  Wed Feb 11 16:19:50 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 11 Feb 2004 13:19:50 -0800
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
In-Reply-To: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
References: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
Message-ID: <402A9C76.8000901@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I think you might be a little confused; Twisted's primary purpose is as an
application development framework.  The installer you downloaded installs
tools and libraries for developing applications in Python.  Although there are
some features that can be used standalone (twistd -f web.tap comes to mind),
it is not an application unto itself and these tools are secondary to the
purpose of Twisted which is as a developers' resource.

As such, any minimum disk requirements would be only for the toolkit, not
including Python (which is required).  Minimum processor specs and memory
requirements are meaningless outside of the context of an application.

That said:
* the installer you downloaded requires 65MB of disk space including the
documentation which takes up most of the space.  There is another installer at
the same site that does not install doco, and requires 12MB installed.
* Any support you get for any operating systems would be on a contract basis
with the developers, as this is an open source project.  However, Linux, Mac
OS X 10.2 and 10.3 and Windows 98 and later are all known to work with
Twisted, as well as various flavors of Unix.  Basically, anywhere Python runs
(http://python.org).



See also:
~  Product page
~    http://twistedmatrix.com/products/twisted
~  FAQ
~    http://twistedmatrix.com/documents/howto/faq

Wiki, etc...

Hedden James E Contr AFPC/DPDOSC wrote:

| Hi,
|
|
|
| I perform initial evaluations of software for the Air Force Personnel
| Center.  In that capacity, I install software to be evaluated onto a
| test box solely to ensure the program is compatible with Windows 2000
| and our Network.  Once that's established, the program is installed to
| the user's computer (preferably another test computer) for the
| user-level evaluation that only the actual user of the program can do.
|
|
|
| I've downloaded *Twisted-1.1.1.win32-py2.3.exe* for eval from your
| website and also need some information for my eval sheet.  I checked
| your site, but couldn't find the following technical specifications /
| requirements I need.  Can you supply, or point me to this information,
| please?
|
|
|
|         Operating Systems supported
|
|         Type Processor required
|
|         Memory requirements
|
|         Hard Drive space required
|
|         Other Hardware and Software requirements
|
|
|
| Is there also a more compact, simpler definition of the program; and a
| simple list of functions?
|
|
|
| Thank you very much for your time and trouble.
|
|
|
| Cheers!
|
|
|
| Jim Hedden, AFPC/DPDOSC
|
| Communications Support
|
|
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAKpx13A5SrXAiHQcRAgqQAJ9xHDmcF0r/MPnLT2AAoDzk08Y5jgCdHRA9
Kpb3S21XVRo9rr32+3QrBQ0=
=rRva
-----END PGP SIGNATURE-----



From James.Hedden at RANDOLPH.AF.MIL  Wed Feb 11 16:47:36 2004
From: James.Hedden at RANDOLPH.AF.MIL (Hedden James E Contr AFPC/DPDOSC)
Date: Wed, 11 Feb 2004 15:47:36 -0600
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
Message-ID: <B952B6C85D68D64BAFD919F68920EF5C08298386@fstymx47.randolph.aetc.ds.af.mil>

Hi Cory,

You're probably very right; I'm sure I am confused.  I'm only the Tech who
installs this once to make sure it will in Win2K and is compatible with our
Network.  What you described, though, does sound like what the folks here
were looking for.  I've cc'd the primary user here so he'll know if I've
gotten the correct software downloaded.

Thanks a lot for the info and for your time and trouble.

Cheers!

Jim

-----Original Message-----
From: Cory Dodt [mailto:corydodt at twistedmatrix.com] 
Sent: Wednesday, February 11, 2004 3:20 PM
To: twisted-python at twistedmatrix.com
Subject: Re: [Twisted-Python] System Requirements Request (Remedy 70699)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I think you might be a little confused; Twisted's primary purpose is as an
application development framework.  The installer you downloaded installs
tools and libraries for developing applications in Python.  Although there
are some features that can be used standalone (twistd -f web.tap comes to
mind), it is not an application unto itself and these tools are secondary to
the purpose of Twisted which is as a developers' resource.

As such, any minimum disk requirements would be only for the toolkit, not
including Python (which is required).  Minimum processor specs and memory
requirements are meaningless outside of the context of an application.

That said:
* the installer you downloaded requires 65MB of disk space including the
documentation which takes up most of the space.  There is another installer
at
the same site that does not install doco, and requires 12MB installed.
* Any support you get for any operating systems would be on a contract basis
with the developers, as this is an open source project.  However, Linux, Mac
OS X 10.2 and 10.3 and Windows 98 and later are all known to work with
Twisted, as well as various flavors of Unix.  Basically, anywhere Python
runs
(http://python.org).



See also:
~  Product page
~    http://twistedmatrix.com/products/twisted
~  FAQ
~    http://twistedmatrix.com/documents/howto/faq

Wiki, etc...

Hedden James E Contr AFPC/DPDOSC wrote:

| Hi,
|
|
|
| I perform initial evaluations of software for the Air Force Personnel
| Center.  In that capacity, I install software to be evaluated onto a
| test box solely to ensure the program is compatible with Windows 2000
| and our Network.  Once that's established, the program is installed to
| the user's computer (preferably another test computer) for the
| user-level evaluation that only the actual user of the program can do.
|
|
|
| I've downloaded *Twisted-1.1.1.win32-py2.3.exe* for eval from your
| website and also need some information for my eval sheet.  I checked
| your site, but couldn't find the following technical specifications /
| requirements I need.  Can you supply, or point me to this information,
| please?
|
|
|
|         Operating Systems supported
|
|         Type Processor required
|
|         Memory requirements
|
|         Hard Drive space required
|
|         Other Hardware and Software requirements
|
|
|
| Is there also a more compact, simpler definition of the program; and a
| simple list of functions?
|
|
|
| Thank you very much for your time and trouble.
|
|
|
| Cheers!
|
|
|
| Jim Hedden, AFPC/DPDOSC
|
| Communications Support
|
|
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAKpx13A5SrXAiHQcRAgqQAJ9xHDmcF0r/MPnLT2AAoDzk08Y5jgCdHRA9
Kpb3S21XVRo9rr32+3QrBQ0=
=rRva
-----END PGP SIGNATURE-----

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040211/56299891/attachment.htm 

From James.Hedden at RANDOLPH.AF.MIL  Wed Feb 11 16:49:35 2004
From: James.Hedden at RANDOLPH.AF.MIL (Hedden James E Contr AFPC/DPDOSC)
Date: Wed, 11 Feb 2004 15:49:35 -0600
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
Message-ID: <B952B6C85D68D64BAFD919F68920EF5C08298387@fstymx47.randolph.aetc.ds.af.mil>

Thanks a lot for the info and for your time and trouble.  I just need to
fill in the squares on the form to satisfy local requirements and regs.

Cheers!

Jim


-----Original Message-----
From: Alexander Winston [mailto:alexander.winston at comcast.net] 
Sent: Wednesday, February 11, 2004 3:16 PM
To: twisted-python at twistedmatrix.com
Cc: Auclair Dianne K Civ AFPC/DPDOSC; Martin Billy P Civ AFPC/DPDOSC;
Bruderer Benjamin Contr AFPC/DPDOSC
Subject: Re: [Twisted-Python] System Requirements Request (Remedy 70699)

On Wed, 2004-02-11 at 15:51, Hedden James E Contr AFPC/DPDOSC wrote:
> I've downloaded Twisted-1.1.1.win32-py2.3.exe for eval from your
> website and also need some information for my eval sheet.  I checked
> your site, but couldn't find the following technical specifications /
> requirements I need.  Can you supply, or point me to thisinformation,
> please?
> 
>  
> 
>         Operating Systems supported 
> 
>         Type Processor required 
> 
>         Memory requirements 
> 
>         Hard Drive space required 
> 
>         Other Hardware and Software requirements 
> 
>  
> 
> Is there also a more compact, simpler definition of the program; and a
> simple list of functions? 

As far as operating systems go, I'm fairly certain that Twisted will run
on any operating system on which Python will run. I don't know of any
processor requirements; the only thing that's really required is Python.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040211/a8e5112e/attachment.htm 

From mcfletch at rogers.com  Thu Feb 12 07:07:24 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Thu, 12 Feb 2004 07:07:24 -0500
Subject: [Twisted-Python] Why twisted.internet.error.TimeoutError and twisted.internet.defer.TimeoutError?
Message-ID: <402B6C7C.6030804@rogers.com>

I realise there's arguments that you want to be able to distinguish 
between the two, so having a DeferredTimeoutError and a regular 
TimeoutError would make sense, but it would still seem that you'd want 
them to have a common base-class that lets you catch them together.

Just a thought,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From andrew-twisted at puzzling.org  Thu Feb 12 07:25:19 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 12 Feb 2004 23:25:19 +1100
Subject: [Twisted-Python] Why twisted.internet.error.TimeoutError and twisted.internet.defer.TimeoutError?
In-Reply-To: <402B6C7C.6030804@rogers.com>
References: <402B6C7C.6030804@rogers.com>
Message-ID: <20040212122519.GA13324@frobozz>

On Thu, Feb 12, 2004 at 07:07:24AM -0500, Mike C. Fletcher wrote:
> I realise there's arguments that you want to be able to distinguish 
> between the two, so having a DeferredTimeoutError and a regular 
> TimeoutError would make sense, but it would still seem that you'd want 
> them to have a common base-class that lets you catch them together.

I suppose the reason is that no-one thought about it very much :)

IIRC, defer.TimeoutError (and the setTimeout method of Deferred) was
originally added by me, and I guess I erred on the side of caution.  Aside
from setTimeout, there's nothing in defer.py that depends on anything else
in the twisted.internet package, and I was probably trying to avoid making
the dependency on twisted.internet any larger than it needed to be...

I'd have no problems with a common base class, although I think I'd lean
towards just using TimeoutError directly from twisted.internet.error.  Does
anyone else have an opinion?

-Andrew.




From michael.l.schneider at ugsplm.com  Thu Feb 12 08:57:07 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 12 Feb 2004 08:57:07 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D521@uscimplm001.net.plm.eds.com>

Hello All,


I am making real progress with twisted.  Thank you very much
for the great project.


I am creating a process launcher that runs on SGI, SUN, IBM AIX,
HPUX, and windows 2000 and XP.


I modified the adbapi.py file to pool jobs.  It works great.

Problem:
Sometimes the launched c program will hang. (standard exe file).
I want to launch a process with timeout value.


Ex.  I know that task X usually take 1200 seconds to run, but it
will sometimes hang.  If the exe has not finished running after
1500 seconds, I want to kill the job and notify the caller that
their job timed out.


What are some options for implementing this with twisted.

NOTE: each process is launched in its own thread, so killing the
thread is an option is that is required.

Thanks,
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state



From exarkun at intarweb.us  Thu Feb 12 10:27:23 2004
From: exarkun at intarweb.us (Jp Calderone)
Date: Thu, 12 Feb 2004 10:27:23 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB538D521@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB538D521@uscimplm001.net.plm.eds.com>
Message-ID: <20040212152723.GA11833@intarweb.us>

On Thu, Feb 12, 2004 at 08:57:07AM -0500, Schneider, Michael wrote:
> Hello All,
> 
> 
> I am making real progress with twisted.  Thank you very much
> for the great project.
> 
> 
> I am creating a process launcher that runs on SGI, SUN, IBM AIX,
> HPUX, and windows 2000 and XP.
> 
> 
> I modified the adbapi.py file to pool jobs.  It works great.
> 
> Problem:
> Sometimes the launched c program will hang. (standard exe file).
> I want to launch a process with timeout value.
> 
> 
> Ex.  I know that task X usually take 1200 seconds to run, but it
> will sometimes hang.  If the exe has not finished running after
> 1500 seconds, I want to kill the job and notify the caller that
> their job timed out.
> 
> 
> What are some options for implementing this with twisted.
> 
> NOTE: each process is launched in its own thread, so killing the
> thread is an option is that is required.
> 

  I don't understand this.  Are you using reactor.spawnProcess() to start
these processes?  If not, you should be.  If so, it should be called from
the main thread, and the process can be killed with the usual means,
os.kill(pid).  The PID is available, though I forget exactly where, probably
as processProtocol.transport.pid.  You can use reactor.callLater to set up a
simple timeout so that processes are killed if they run for too long.

  Jp

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040212/c6f6130b/attachment.pgp 

From michael.l.schneider at ugsplm.com  Thu Feb 12 11:03:52 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 12 Feb 2004 11:03:52 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>

Again, I could be taking the wrong approach:


Here is the scenerao:

1) Why the pooling
Each compute node can run 2 processes at the same time (big processes)
The compute node must accept more jobs then it can run, and hold the
waiting tasks in a queue.  (logically similar problem to database
connections, except, compute connections are used instead).

2) why not spawnProcess
The code said that spawnprocess is broken on windows. (I could be
looking
in the wrong place, twisted is a big codebase :-)

I fell back to using popen2 in a thead managed by the "thread pool"



I am always open to refactoring a design.  Windows is my prime platform,
but I also must support the UNIX platforms.

Hope this helps clairify what I am doing (not saying that I am taking
the correct approach with twisted, but I am trying and willing to change
to do it the twisted way :-)

Thank you very much,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a
non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of 
> Jp Calderone
> Sent: Thursday, February 12, 2004 10:27 AM
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] What is the "Twisted" way to kill stuck
> child process
> 
> 
> On Thu, Feb 12, 2004 at 08:57:07AM -0500, Schneider, Michael wrote:
> > Hello All,
> > 
> > 
> > I am making real progress with twisted.  Thank you very much
> > for the great project.
> > 
> > 
> > I am creating a process launcher that runs on SGI, SUN, IBM AIX,
> > HPUX, and windows 2000 and XP.
> > 
> > 
> > I modified the adbapi.py file to pool jobs.  It works great.
> > 
> > Problem:
> > Sometimes the launched c program will hang. (standard exe file).
> > I want to launch a process with timeout value.
> > 
> > 
> > Ex.  I know that task X usually take 1200 seconds to run, but it
> > will sometimes hang.  If the exe has not finished running after
> > 1500 seconds, I want to kill the job and notify the caller that
> > their job timed out.
> > 
> > 
> > What are some options for implementing this with twisted.
> > 
> > NOTE: each process is launched in its own thread, so killing the
> > thread is an option is that is required.
> > 
> 
>   I don't understand this.  Are you using 
> reactor.spawnProcess() to start
> these processes?  If not, you should be.  If so, it should be 
> called from
> the main thread, and the process can be killed with the usual means,
> os.kill(pid).  The PID is available, though I forget exactly 
> where, probably
> as processProtocol.transport.pid.  You can use 
> reactor.callLater to set up a
> simple timeout so that processes are killed if they run for too long.
> 
>   Jp
> 
> 



From exarkun at intarweb.us  Thu Feb 12 11:50:39 2004
From: exarkun at intarweb.us (Jp Calderone)
Date: Thu, 12 Feb 2004 11:50:39 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>
Message-ID: <20040212165039.GA12303@intarweb.us>

On Thu, Feb 12, 2004 at 11:03:52AM -0500, Schneider, Michael wrote:
> Again, I could be taking the wrong approach:
> 
> 
> Here is the scenerao:
> 
> 1) Why the pooling
> Each compute node can run 2 processes at the same time (big processes)
> The compute node must accept more jobs then it can run, and hold the
> waiting tasks in a queue.  (logically similar problem to database
> connections, except, compute connections are used instead).
> 
> 2) why not spawnProcess
> The code said that spawnprocess is broken on windows. (I could be
> looking
> in the wrong place, twisted is a big codebase :-)
> 
> I fell back to using popen2 in a thead managed by the "thread pool"
> 
> 
> 
> I am always open to refactoring a design.  Windows is my prime platform,
> but I also must support the UNIX platforms.
> 
> Hope this helps clairify what I am doing (not saying that I am taking
> the correct approach with twisted, but I am trying and willing to change
> to do it the twisted way :-)

  I'm not certain of the status of spawnProcess on Windows.  If it really
doesn't work, I suppose popen2 is about all you can do.

  Since you're mainly developing on Windows, I doubt I can offer much more
assistance, having never written any multiprocess Windows apps.

  If popen2 lets you get PIDs on Windows, and os.kill() works with those
PIDs on Windows, I think you should still be able to timeout processes
fairly easily.  If they don't, maybe someone with more Windows experience
can chime in.

  Jp
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040212/32c3d9d3/attachment.pgp 

From daedalus at eigenmagic.com  Thu Feb 12 19:31:55 2004
From: daedalus at eigenmagic.com (Justin Warren)
Date: Fri, 13 Feb 2004 11:31:55 +1100
Subject: [Twisted-Python] Beepy Twisted Library
In-Reply-To: <20040128131342.PAAV5308.smtp1.fuse.net@smtp.fuse.net>
References: <20040128131342.PAAV5308.smtp1.fuse.net@smtp.fuse.net>
Message-ID: <20040213003155.GA30060@snafu.eigenmagic.com>

On Wed, Jan 28, 2004 at 08:13:42AM -0500, Mike Schneider wrote:
> After reading the emails on the list I downloaded the Beepy
> Twisted BEEP library.
> 
> I read the included docs, and looked at the test cases.
> 
> I had a server and client up in less than an hour.
> 
> Thank you for your work on this package.  I am going to
> spend more time prototyping today.

Thanks for the feedback, Mike.

> I like the development style:
>    - simple short tests
>    - test cases that serve as models for code development

I hate writing doco, as I tend to get a bit anal about it, and it's
time consuming to get it 'just so'. Besides, it's usually easier to
show you what I mean than to explain it.

> FYI.  I am running Python2.3 on Windows, so I had to download
> PyOpenSSL from:

Sweet! As far as I know, you're the first person to try it under
Windows. If you could resend me the link to the PyOpenSSL thing you
used, I'll see if I can't add it to the website somewhere to help out
others. 

Cheers,

Justin

-- 
"I'd think a dominatrix would give you a switching power supply."
  -- Eric The Read in a.s.r



From alan at norfolkgraphics.com  Thu Feb 12 19:46:29 2004
From: alan at norfolkgraphics.com (Alan McIntyre)
Date: Thu, 12 Feb 2004 19:46:29 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child
 process
In-Reply-To: <20040212165039.GA12303@intarweb.us>
References: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com> <20040212165039.GA12303@intarweb.us>
Message-ID: <402C1E65.8070302@norfolkgraphics.com>

os.kill() isn't available on Windows, at least not in my version of 
Python 2.3.

I wrote a C extension that would allow me to shut down some programs, 
but I had to get a handle to a process' window before I could get its 
PID.  Since I knew the class names and/or window caption text of the 
windows in the applications I wanted to close, I stopped when I figured 
out how to find the window handles and didn't look into it any more.

If you can get the PID from some other source, you can write an 
extension to use OpenProcess and TerminateProcess to get a handle to the 
process and kill it.

Let me know if you'd like some code samples and I can go dig them up.

Jp Calderone wrote:
>   If popen2 lets you get PIDs on Windows, and os.kill() works with those
> PIDs on Windows, I think you should still be able to timeout processes
> fairly easily.  If they don't, maybe someone with more Windows experience
> can chime in.





From glyph at twistedmatrix.com  Thu Feb 12 22:20:34 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 12 Feb 2004 22:20:34 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child
	process
In-Reply-To: <20040212165039.GA12303@intarweb.us>
References: 
	 <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>
	 <20040212165039.GA12303@intarweb.us>
Message-ID: <1076642434.26555.3.camel@localhost>

On Thu, 2004-02-12 at 11:50, Jp Calderone wrote:

>   I'm not certain of the status of spawnProcess on Windows.  If it really
> doesn't work, I suppose popen2 is about all you can do.
> 
>   Since you're mainly developing on Windows, I doubt I can offer much more
> assistance, having never written any multiprocess Windows apps.
> 
>   If popen2 lets you get PIDs on Windows, and os.kill() works with those
> PIDs on Windows, I think you should still be able to timeout processes
> fairly easily.  If they don't, maybe someone with more Windows experience
> can chime in.

If you want to use spawnProcess on windows, you must use the win32
reactor.  This has some limiting effects (but then, so does windows
itself).  Don't use popen2 with Twisted - the SIGCHLD handler that
twistd installs will cause conflicts and crashes.





From michael.l.schneider at ugsplm.com  Thu Feb 12 23:16:39 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 12 Feb 2004 23:16:39 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck childprocess
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D524@uscimplm001.net.plm.eds.com>

Thank you,

I just found the win32eventreactor code.

Sorry to ask such a simple question,should I
create a process protocol to use with the
win32 reactor with spawnProcess?


Thanks,
Mike




 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Glyph
> Lefkowitz
> Sent: Thursday, February 12, 2004 10:21 PM
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] What is the "Twisted" way to kill stuck
> childprocess
> 
> 
> On Thu, 2004-02-12 at 11:50, Jp Calderone wrote:
> 
> >   I'm not certain of the status of spawnProcess on Windows. 
>  If it really
> > doesn't work, I suppose popen2 is about all you can do.
> > 
> >   Since you're mainly developing on Windows, I doubt I can 
> offer much more
> > assistance, having never written any multiprocess Windows apps.
> > 
> >   If popen2 lets you get PIDs on Windows, and os.kill() 
> works with those
> > PIDs on Windows, I think you should still be able to 
> timeout processes
> > fairly easily.  If they don't, maybe someone with more 
> Windows experience
> > can chime in.
> 
> If you want to use spawnProcess on windows, you must use the win32
> reactor.  This has some limiting effects (but then, so does windows
> itself).  Don't use popen2 with Twisted - the SIGCHLD handler that
> twistd installs will cause conflicts and crashes.
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From Harald.Nyman at astrazeneca.com  Fri Feb 13 03:44:49 2004
From: Harald.Nyman at astrazeneca.com (Harald.Nyman at astrazeneca.com)
Date: Fri, 13 Feb 2004 09:44:49 +0100
Subject: [Twisted-Python] EXIT CGI kludge Sanity Check
Message-ID: <9F028CC77827D611ACEE0002A5F12F0703ECC32C@semldsntmsx208.seml.astrazeneca.net>

We inherited this Apache/CGI app, with ~15 HTML pages, generated by CGI
Python scripts importing a ton of modules each time.
Not exactly lightning fast, plus the code's a total mix of Python with HTML
fragments :(

Awaiting a complete revamp of the app, we replaced Apache/CGI with a
threaded Twisted TCP server, sitting memory-resident with "everything"
imported, and sending back HTML as requested by javascript/tiny applet in
the browser. Form <INPUT>s and cookies are passed from javascript to Python
as text-represented dictionaries.
The modifications to the Python code were minor; the performance boost is
... dramatic (the users are cheering).

Comments? Anyone done something similar? What do we tell the purists?

Thanks,
Harald

_____________________________________________
Harald Nyman MSc, AstraZeneca M?lndal, Sweden





From stenis at stenhard.net  Fri Feb 13 15:57:52 2004
From: stenis at stenhard.net (=?iso-8859-1?Q?Martin_Stenh=E5rd?=)
Date: Fri, 13 Feb 2004 21:57:52 +0100
Subject: [Twisted-Python] pb server how to get client IP address
Message-ID: <E1ArkO0-00008j-00@pyramid.twistedmatrix.com>

Hi

 

I am making a game server using twisted and using the pb both on the server
and client. I have a question on how to get ip address of the clients that
connects to the server. I want to log the client ip address on the server.
Have anyone any idea on how to do this I can?t find any information on this
in the api documents. 

 

Thanks

/Martin

http://stenhard.net <http://stenhard.net/> 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040213/994fc075/attachment.htm 

From bob at redivi.com  Fri Feb 13 16:26:22 2004
From: bob at redivi.com (Bob Ippolito)
Date: Fri, 13 Feb 2004 16:26:22 -0500
Subject: [Twisted-Python] pb server how to get client IP address
In-Reply-To: <E1ArkO0-00008j-00@pyramid.twistedmatrix.com>
References: <E1ArkO0-00008j-00@pyramid.twistedmatrix.com>
Message-ID: <453CEFD6-5E6B-11D8-A4CE-000A95686CD8@redivi.com>

On Feb 13, 2004, at 3:57 PM, Martin Stenh?rd wrote:

> I am making a game server using twisted and using the pb both on the 
> server and client. I have a question on how to get ip address of the 
> clients that connects to the server. I want to log the client ip 
> address on the server. Have anyone any idea on how to do this I can?t 
> find any information on this in the api documents.

protocol.transport.getPeer()

For more information, pydoc twisted.internet.interfaces.ITCPTransport

-bob




From warner at lothar.com  Fri Feb 13 16:45:34 2004
From: warner at lothar.com (Brian Warner)
Date: Fri, 13 Feb 2004 13:45:34 -0800 (PST)
Subject: [Twisted-Python] pb server how to get client IP address
Message-ID: <20040213.134534.41652940.warner@lothar.com>

Martin Stenh?rd <stenis at stenhard.net> writes:
>
> I have a question on how to get ip address of the clients that connects to
> the server.

From the Protocol object, the .transport offers a pair of methods called
getHost() and getPeer(). So something like this should work:

==== BEGIN
from twisted.internet import reactor, protocol

class MyProtocol(protocol.Protocol):
    def connectionMade(self):
        print "connection from", self.transport.getPeer()

f = protocol.ServerFactory()
f.protocol = MyProtocol
reactor.listenTCP(9111, f)
reactor.run()
==== END

When I run this on my system, and connect with 'nc localhost 9111', I get:
  % /tmp/p.py 
  connection from ('INET', '127.0.0.1', 38002)

The value it returns depends upon the kind of transport, but TCP connections
will give you a tuple of ('INET', hostname, port), where 'hostname' is a
dotted-quad IP address.

I'll add this to the FAQ.

cheers,
 -Brian



From stenis at stenhard.net  Fri Feb 13 17:10:14 2004
From: stenis at stenhard.net (=?iso-8859-1?Q?Martin_Stenh=E5rd?=)
Date: Fri, 13 Feb 2004 23:10:14 +0100
Subject: [Twisted-Python] pb server how to get client IP address
In-Reply-To: <20040213.134534.41652940.warner@lothar.com>
Message-ID: <E1ArlW3-0001S9-00@pyramid.twistedmatrix.com>

Hi again

>From the Protocol object, the .transport offers a pair of methods called
>getHost() and getPeer().


Yes this works find in my server for my admin interface (simple telenet
bases) that use protocol.ServerFactory() and then use LineReceiver. 

But how do I use getPeer() in a Perspective Broker server for example
http://www.twistedmatrix.com/documents/examples/pbbenchserver.py

Excuse me questions but I new to Twisted.

/Martin
http://stenhard.net

-----Original Message-----
From: twisted-python-admin at twistedmatrix.com
[mailto:twisted-python-admin at twistedmatrix.com] On Behalf Of Brian Warner
Sent: den 13 februari 2004 22:46
To: twisted-python at twistedmatrix.com
Cc: stenis at stenhard.net
Subject: Re: [Twisted-Python] pb server how to get client IP address

Martin Stenh?rd <stenis at stenhard.net> writes:
>
> I have a question on how to get ip address of the clients that connects to
> the server.

>From the Protocol object, the .transport offers a pair of methods called
getHost() and getPeer(). So something like this should work:

==== BEGIN
from twisted.internet import reactor, protocol

class MyProtocol(protocol.Protocol):
    def connectionMade(self):
        print "connection from", self.transport.getPeer()

f = protocol.ServerFactory()
f.protocol = MyProtocol
reactor.listenTCP(9111, f)
reactor.run()
==== END

When I run this on my system, and connect with 'nc localhost 9111', I get:
  % /tmp/p.py 
  connection from ('INET', '127.0.0.1', 38002)

The value it returns depends upon the kind of transport, but TCP connections
will give you a tuple of ('INET', hostname, port), where 'hostname' is a
dotted-quad IP address.

I'll add this to the FAQ.

cheers,
 -Brian

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python





From warner at lothar.com  Fri Feb 13 19:36:28 2004
From: warner at lothar.com (Brian Warner)
Date: Fri, 13 Feb 2004 16:36:28 -0800 (PST)
Subject: [Twisted-Python] pb server how to get client IP address
Message-ID: <20040213.163628.59491436.warner@lothar.com>

Martin Stenh?rd <stenis at stenhard.net> writes:
>
> Yes this works find in my server for my admin interface (simple telenet
> bases) that use protocol.ServerFactory() and then use LineReceiver. 
>
> But how do I use getPeer() in a Perspective Broker server for example
> http://www.twistedmatrix.com/documents/examples/pbbenchserver.py

Ah, yes, that is trickier. You need to get access to the Broker object (which
is a Protocol subclass), and called methods are not generally given access to
that. The Perspective/ViewPoint -style stuff gives invoked methods access to
some initial Perspective object, but even that doesn't know who the Broker
is. The method which invokes your perspective_* method knows, but it isn't
telling.

I poked around a bit and haven't found any way to get at it. If the client
has given you access to one if its own objects (perhaps as the 'mind'
reference in the realm.requestAvatar() call), then you can use it to get the
Broker:

 mind.broker.transport.getPeer()

Other than that, I don't see how to do it. The details of the connection are
a little *too* abstracted out. Maybe someone else has an idea?

sorry,
 -Brian

PS: and no, inspect.stack()[1][0].f_locals['broker'] doesn't count..



From michaelschneider at fuse.net  Sat Feb 14 00:02:09 2004
From: michaelschneider at fuse.net (Michael Schneider)
Date: Sat, 14 Feb 2004 00:02:09 -0500
Subject: [Twisted-Python] Windows Programming Info
In-Reply-To: <20040211215102.15756.8292.Mailman@twistedmatrix.com>
Message-ID: <DDEBLIGOHANFDMNECHGECECLCAAA.michaelschneider@fuse.net>

Thanks to all for the help with win32eventreactor and spawnprocess.


I came across a great windows package called wmi (for microsoft's
Windows Managment Interface).

It gives you very low level access to your windows system. It uses
win32.

Here is the URL:

http://tgolden.sc.sabren.com/python/wmi.html

Here is some sample code to run


Thanks for the help on this,
I will post my final code for the compute node class

----------------------------------------------------------
import wmi
c = wmi.WMI ()

diskList = [x for x in c.Win32_LogicalDisk (DriveType=3) ]
procList = [proc for proc in  c.Win32_Process () ]

for x in range(10):
    for disk in diskList:
        print disk

    for process in procList:
        print process



----------------------------------------------------------


Note: to kill a job, you can call terminate on a process object

result = process.Terminate ()

------------------------------------------

disk output:
instance of Win32_LogicalDisk
{
        Caption = "G:";
        Compressed = FALSE;
        CreationClassName = "Win32_LogicalDisk";
        Description = "Local Fixed Disk";
        DeviceID = "G:";
        DriveType = 3;
        FileSystem = "FAT32";
        FreeSpace = "9506979840";
        MaximumComponentLength = 255;
        MediaType = 12;
        Name = "G:";
        Size = "12572344320";
        SupportsDiskQuotas = FALSE;
        SupportsFileBasedCompression = FALSE;
        SystemCreationClassName = "Win32_ComputerSystem";
        SystemName = "BDSWXP1";
        VolumeDirty = FALSE;
        VolumeName = "LOCAL DISK";
        VolumeSerialNumber = "ED293D74";
};
-------------------------------------------------
process output

instance of Win32_Process
{
        Caption = "System Idle Process";
        CreationClassName = "Win32_Process";
        CSCreationClassName = "Win32_ComputerSystem";
        CSName = "BDSWXP1";
        Description = "System Idle Process";
        Handle = "0";
        HandleCount = 0;
        KernelModeTime = "7163013906250";
        Name = "System Idle Process";
        OSCreationClassName = "Win32_OperatingSystem";
        OSName = "Microsoft Windows XP
Professional|C:\\WINDOWS|\\Device\\Harddi
sk0\\Partition1";
        OtherOperationCount = "0";
        OtherTransferCount = "0";
        PageFaults = 1;
        PageFileUsage = 0;
        ParentProcessId = 0;
        PeakPageFileUsage = 0;
        PeakVirtualSize = "0";
        PeakWorkingSetSize = 20480;
        Priority = 0;
        PrivatePageCount = "0";
        ProcessId = 0;
        QuotaNonPagedPoolUsage = 0;
        QuotaPagedPoolUsage = 0;
        QuotaPeakNonPagedPoolUsage = 0;
        QuotaPeakPagedPoolUsage = 0;
        ReadOperationCount = "0";
        ReadTransferCount = "0";
        SessionId = 0;
        ThreadCount = 1;
        UserModeTime = "0";
        VirtualSize = "0";
        WindowsVersion = "5.1.2600";
        WorkingSetSize = "20480";
        WriteOperationCount = "0";
        WriteTransferCount = "0";
};





From golux at comcast.net  Sat Feb 14 01:50:28 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Sat, 14 Feb 2004 01:50:28 -0500
Subject: [Twisted-Python] basic auth example with db backend
Message-ID: <402DC534.7050900@comcast.net>

This is a somewhat less trivial (and more robust)
example than the "cred" example I posted earlier.

BasicAuthResource is lifted from moshez's example
in bug 393 with some typos corrected and a notification
to the user if something gets majorly screwed up, so the
auth form doesn't continue to pop up in that case.

UserDbCredChecker borrows radix's approach from a
db auth he wrote for a spike we did a while back.

Again, I'd appreciate any suggestions/comments from
twisted gurus -- especially if you see any security
problems, etc.!

Cheers,
Steve
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: basicauthwithdb.py.txt
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040214/27f95348/attachment.txt 

From nico at rakar.com  Sat Feb 14 05:27:28 2004
From: nico at rakar.com (Nicols Echniz)
Date: Sat, 14 Feb 2004 07:27:28 -0300
Subject: [Twisted-Python] web messenger with ICQ and MSN support
Message-ID: <20040214072728.M42139@rakar.com>

Hi everybody,

This is my first message to the list so I'll briefly introduce myself.
I'm Nicol?s Ech?niz, from Buenos Aires, Argentina.
I've been programing python for 4 or 5 years now and one of my projects is
this instant messenger (www.EcMess.com), which is a web based messenger.
It's based on Sam Rushing's Medusa framework, runs on a Linux server and uses
MySQL for data storage. It works really nice.

The fact is that I'd like to add ICQ and MSN support (it's a much requested
feature) and I've been thinking that the best way might be to rewrite my
server using Twisted as a replacement framework for Medusa.
Now, I've been looking at the notes on 1.1.1 release and found that MSNP 8 is
the supported protocol at this time, but as far as I know, clients using MSNP
8 can't communicate with the MSN network since protocol 9 was released.

So, my question is: Are there any plans to support MSNP 9 in the near future?
I know that Gaim has updated it's protocol support to v.9. Do you mantain any
relation with their development team? Or do you at twisted-matrix hack the
protocol on your own without reusing other project's experience?

If I may be of any help in this matter, please let me know. I'm not a C
programmer, but then I don't know if your MSNP implementation is written in C
and wrapped or written in pure Python.
If the latter is true, then I might be able to help.

I thank you all in advance,

Nicol?s Ech?niz
www.EcMess.com



From teratorn at world-net.net  Sat Feb 14 05:44:01 2004
From: teratorn at world-net.net (Eric Mangold)
Date: Sat, 14 Feb 2004 03:44:01 -0700
Subject: [Twisted-Python] Re: web messenger with ICQ and MSN support
In-Reply-To: <20040214072728.M42139@rakar.com>
References: <20040214072728.M42139@rakar.com>
Message-ID: <opr3cv3nc3i4eeqj@mail.oaktech.net>

On Sat, 14 Feb 2004 07:27:28 -0300, Nicol?s Ech?niz <nico at rakar.com> wrote:

> Hi everybody,
>
> This is my first message to the list so I'll briefly introduce myself.
> I'm Nicol?s Ech?niz, from Buenos Aires, Argentina.

Hi!

> I've been programing python for 4 or 5 years now and one of my projects 
> is
> this instant messenger (www.EcMess.com), which is a web based messenger.
> It's based on Sam Rushing's Medusa framework, runs on a Linux server and 
> uses
> MySQL for data storage. It works really nice.
>
> The fact is that I'd like to add ICQ and MSN support (it's a much 
> requested
> feature) and I've been thinking that the best way might be to rewrite my
> server using Twisted as a replacement framework for Medusa.
> Now, I've been looking at the notes on 1.1.1 release and found that MSNP 
> 8 is
> the supported protocol at this time, but as far as I know, clients using 
> MSNP
> 8 can't communicate with the MSN network since protocol 9 was released.
>
> So, my question is: Are there any plans to support MSNP 9 in the near 
> future?
> I know that Gaim has updated it's protocol support to v.9. Do you 
> mantain any
> relation with their development team? Or do you at twisted-matrix hack 
> the
> protocol on your own without reusing other project's experience?
>
> If I may be of any help in this matter, please let me know. I'm not a C
> programmer, but then I don't know if your MSNP implementation is written 
> in C
> and wrapped or written in pure Python.
> If the latter is true, then I might be able to help.

You can take a look at the implementation in the file 
twisted/protocols/msn.py

If you want to update it to support v9 I'm sure everyone would appreciate 
that :)

I can't answer your other questions, but there are folks here that can.

-Eric




From sam at twistedmatrix.com  Sat Feb 14 20:56:59 2004
From: sam at twistedmatrix.com (Sam Jordan)
Date: Sun, 15 Feb 2004 11:56:59 +1000
Subject: [Twisted-Python] web messenger with ICQ and MSN support
In-Reply-To: <20040214072728.M42139@rakar.com>
References: <20040214072728.M42139@rakar.com>
Message-ID: <20040215015659.GA16210@psychlaw.com.au>

On Sat, Feb 14, 2004 at 07:27:28AM -0300, Nicol?s Ech?niz wrote:
> Now, I've been looking at the notes on 1.1.1 release and found that MSNP 8 is
> the supported protocol at this time, but as far as I know, clients using MSNP
> 8 can't communicate with the MSN network since protocol 9 was released.

It was <= MSNP7 that were the phased out protocol versions. You can access the MSN
network using MSNP8 and onwards (doc/examples/msn_example.py should let you connect).

This isn't to say that support for MSNP9 wouldn't be appreciated :-). I did some research
into it a while back but it was still fairly premature at the time and not much was known.
Considering it mainly consists of eye-candy features (i.e. background images and buddy icons)
I didn't put too much effort into attempting to figure it out, but it would be great if you
wanted to do so, there is probably a bit more information available on it at this stage as
well.

If you're interested, a useful website that attempts to document various parts of the
protocol is: http://www.hypothetic.org/docs/msn/index.php.

Of course, there is now MSNC1 and MSNP10, so it would be worth researching them if you're
wanting to make changes.

Cheers,

Sam Jordan



From stenis at stenhard.net  Sat Feb 14 17:05:10 2004
From: stenis at stenhard.net (=?iso-8859-1?Q?Martin_Stenh=E5rd?=)
Date: Sat, 14 Feb 2004 23:05:10 +0100
Subject: [Twisted-Python] pb server how to get client IP address
In-Reply-To: <20040213.163628.59491436.warner@lothar.com>
Message-ID: <E1As7ue-0000ru-00@pyramid.twistedmatrix.com>


> -----Original Message-----
> From: Brian Warner [mailto:warner at lothar.com]
> I poked around a bit and haven't found any way to get at it. If the client
> has given you access to one if its own objects (perhaps as the 'mind'
> reference in the realm.requestAvatar() call), then you can use it to get
> the
> Broker:
> 
>  mind.broker.transport.getPeer()
> 

Thanks Brian

mind.broker.transport.getPeer() did job I use mind and I get the client IP
successfully now.

class MyPerspective(pb.Avatar):
    connections = 0
    def __init__(self, name):
        self.name = name    
        self.position = [0.0,0.0,0.0]
        self.rotation = [0.0,0.0,0.0]  
        self.rotation2 = [0.0,0.0,0.0]  
        self.velocity = [0.0,0.0,0.0] 
        self.state = 0 
 
    def attached(self, mind):
        ip = mind.broker.transport.getPeer()
	  print ip


Thanks
/Martin
http://stenhard.net





From maoy at cis.upenn.edu  Sun Feb 15 00:12:29 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Sun, 15 Feb 2004 00:12:29 -0500 (EST)
Subject: [Twisted-Python] stopConsuming in abstract.py
In-Reply-To: <E1As7ue-0000ru-00@pyramid.twistedmatrix.com>
Message-ID: <Pine.LNX.4.44.0402150009270.24963-100000@klondike.cis.upenn.edu>

Hi, what's the job of stopConsuming? I ran a grep in twisted dir, and 
didn't find anybody calls it. Besides, since registerProducer only happens 
at the consumer side, so I guess in theory the producers have no idea who 
are their consumers, right? 

Thank in advance for the clarification.

-- 
Yun






From andy at thecablelounge.com  Sun Feb 15 13:18:27 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 16 Feb 2004 04:18:27 +1000
Subject: [Twisted-Python] twisted.names; authority query
Message-ID: <402FB7F3.3090403@thecablelounge.com>

Hi there,

I've extended twisted.names to support tinydns data files.  

names isn't responding with authoritive answers the way I was expecting it to though.  names responds that it is authoritive for my name server, but not for anything else.  This is the tinydns file I'm using:

-----------------------------------
.cablelounge.com::ns1.cablelounge.com:259200
=cablelounge.com:69.10.144.170:86400
+www.cablelounge.com:69.10.144.170:86400
+miles.cablelounge.com:69.10.144.170:86400
+twisted.cablelounge.com:203.113.212.32:900
+ns1.cablelounge.com:69.10.144.170:86400
@cablelounge.com:69.10.144.170:mail.cablelounge.com:0:86400
------------------------------------

names says that it is authoritive for ns1.cablelounge.com, but nothing else.  tinydns responds as authoritive for all of the above names:

#> dig @cablelounge.com cablelounge.com

I ran a standard pyzone file through names and got the same result .. so I'm not sure where I'm going wrong .. .

Here's what I did with the pyzone file:

zones:
-----------------------
zone = [
    SOA(
        "fred.com",
        mname   = "ns1.fred.com",
        rname   = "hostmaster.fred.com",
        serial  = 2004021501,
        refresh = "1H",
        retry   = "1H",
        expire  = "1H",
        minimum = "1H"
    ),

    A("fred.com", "192.168.10.10"),
    NS("ns1.fred.com", "fred.com"),
    A("ns1.fred.com", "192.168.10.10"),
]
------------------------

#> mktap dns --pyzone=zones --port 5053
#> twistd -f dns
#> dig -p 5053 @cablelounge.com fred.com

; <<>> DiG 9.2.1 <<>> -p 5053 @cablelounge.com fred.com
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 48786
;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;fred.com.                      IN      A

;; ANSWER SECTION:
fred.com.               3600    IN      A       192.168.10.10

;; Query time: 2 msec
;; SERVER: 69.10.144.170#5053(cablelounge.com)
;; WHEN: Sun Feb 15 10:01:29 2004
;; MSG SIZE  rcvd: 42

#> dig -p 5053 @cablelounge.com ns1.fred.com

; <<>> DiG 9.2.1 <<>> -p 5053 @cablelounge.com ns1.fred.com
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 63056
;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;ns1.fred.com.                  IN      A

;; ANSWER SECTION:
ns1.fred.com.           3600    IN      A       192.168.10.10

;; AUTHORITY SECTION:
ns1.fred.com.           3600    IN      NS      fred.com.

;; ADDITIONAL SECTION:
fred.com.               3600    IN      A       192.168.10.10

;; Query time: 2 msec
;; SERVER: 69.10.144.170#5053(cablelounge.com)
;; WHEN: Sun Feb 15 10:02:24 2004
;; MSG SIZE  rcvd: 76

twisted.names is showing as authoritive for ns1.fred.com, but not fred.com.

Has anyone had a similiar experience with twisted.names?  What am I overlooking?

regards,
Andy.



From mary-twisted at puzzling.org  Sun Feb 15 17:55:19 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 16 Feb 2004 09:55:19 +1100
Subject: [Twisted-Python] Re: [Twisted-web] twisted.internet.error.CannotListenError
In-Reply-To: <20040215224728.26716.qmail@web13705.mail.yahoo.com>
References: <20040215224728.26716.qmail@web13705.mail.yahoo.com>
Message-ID: <20040215225519.GA19840@home.puzzling.org>

This looks like a question for twisted-python at twistedmatrix.com rather
than twisted-web at twistedmatrix.com

On Sun, Feb 15, 2004, Peter Stradinger wrote:
> Hi,
> 
> I'm fairly new to Twisted and trying to get a twisted reactor to work with wxPython.  I'm trying
> the perspective broker examples, and when I try to do:
>     def OnFileitems0Menu(self, event):
>         self.Close(true)
>         reactor.stop()
> 
> It shuts down the program fine, but then when I try to run it again I get:
> 
> twisted.internet.error.CannotListenError: Couldn't listen on any:8800: (10048, 'Address already in
> use').
> 
> As an error.  I can manually stop the process and then it will work again, but I don't know how to
> release the port when I shut down the program.
> 
> Am I missing something obvious?  A search of the archives hasn't shown me any way out.
> 
> Peter



From emlprime at yahoo.com  Sun Feb 15 18:07:21 2004
From: emlprime at yahoo.com (Peter Stradinger)
Date: Sun, 15 Feb 2004 15:07:21 -0800 (PST)
Subject: [Twisted-Python] twisted.internet.error.CannotListenError
Message-ID: <20040215230721.5153.qmail@web13706.mail.yahoo.com>

Hi,

I'm fairly new to Twisted and trying to get a twisted reactor to work with wxPython.  I'm trying
the perspective broker examples, and when I try to do:
    def OnFileitems0Menu(self, event):
        self.Close(true)
        reactor.stop()

It shuts down the program fine, but then when I try to run it again I get:

twisted.internet.error.CannotListenError: Couldn't listen on any:8800: (10048, 'Address already in
use').

As an error.  I can manually stop the process and then it will work again, but I don't know how to
release the port when I shut down the program.

Am I missing something obvious?  A search of the archives hasn't shown me any way out.

Peter


__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html



From fuka at fuxoft.cz  Sun Feb 15 18:28:04 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Mon, 16 Feb 2004 00:28:04 +0100
Subject: [Twisted-Python] Where are stored the filenames of the files uploaded using www Form?
Message-ID: <40300084.2050201@fuxoft.cz>

I want to use Twisted on my server so that I can upload generic files 
using WWW interface. (I use only the basic Twisted Web bones, no Woven 
etc.) When I upload the files, the session.args dictionary contains the 
names of form elements and the contents of the uploaded files. But how 
can I find out the filenames of the uploaded files, so that 
"picture7.jpg" could be automatically stored as "picture7.jpg"?

Thanks

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855




From andy at thecablelounge.com  Mon Feb 16 02:10:26 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 16 Feb 2004 17:10:26 +1000
Subject: [Twisted-Python] twisted.names; tinydns file format patch
Message-ID: <40306CE2.2000004@thecablelounge.com>

For anyone else who, like me, can't read bind formatted files :)

It seems to work well enough even if twisted.names and tinydns behave slightly differently.

Supports all common data lines from: http://cr.yp.to/djbdns/tinydns-data.html, but doesn't support wildcards, timestamps or client location filtering plus one data file can only contain one SOA.

Generated against Twisted 1.1.2alpha2 using diff -urN

cheers,
Andy.
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: twisted.names.tinydnssupport0.1.diff
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040216/d3001e65/attachment.txt 

From daleedom at hightowergroup.com  Mon Feb 16 10:03:37 2004
From: daleedom at hightowergroup.com (David A. Leedom)
Date: Mon, 16 Feb 2004 10:03:37 -0500
Subject: [Twisted-Python] Backup Agent
Message-ID: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>

OK Guys I Need your help.

I own a small computer consulting firm and am struggling with the basic 
sales and marketing issues.  However, I think I have finally stumbled onto 
a great "no brainer" idea:

         A Remote Backup Service for Small businesses.

Yes I know there are a bunch out their, but I am thinking of the Hundreds 
of Businesses around my general geographic area who don't know how to find 
them and who don't backup their data.  I would charge a monthly fee for a 
given amount of space used ( no more than 500 Meg) and provide a software 
that would backup and restore their data.

My dilemma is that my margins would be to small to make it affordable for 
me to resale someone else's software.  So....I would like to roll my 
own.  Python makes a lot of sense for many reasons that I don't need to get 
into here.

My struggle is that although I have been programming since the mid-70s, I 
am new to Python and feel like a man groping around in the dark.  Also 
being new to Twisted it is like the room is full of chairs as well.  I did 
get some sample code to work over the weekend, but I got a serious brain 
cramp trying to figure it all out.

The basic architecture that I am thinking of is client/server.  There would 
be three basic applications running to make things work.  First, would be 
an Agent program that does most of the work.  The Agent would run as a 
service on each computer being backed up.  Second would be a GUI program 
running locally to control the agents.  Finally there would be a "Web 
Service" that received backup sets from each agent or a designated master 
agent. The Web Service would handle authentication and other house keeping 
things.

Finally the Question!!!!
There are many other details that I have in mind as well (using patches to 
reduce size, compression, encryption...), but right now I am working on 
issues related to the communication between the GUI and Agents.  Assuming 
that I have one or more number of agents running on a network I want to do 
a number of things.  1)  Have the GUI request that the agents identify 
themselves so I don't have to tell the GUI where they are.  2) Transmit a 
catalog list of the file system to the GUI so I can build a TreeView and 
pick which files to backup on each computer.  3)  Finally I may want to 
identify a "Master" agent that collects all the backups on the network and 
transmits them as one session to the Web Service. This would allow for 
local "On Site" backups for fast restores due to normal computer crashes 
and failures.

1.      What would you guys suggest I do to I get the GUI to ask all the 
agents to identify themselves?
2.      What would be the best approach using twisted to transmit a file 
system catalog across the local wire.  I was playing with some remote 
procedure calls over the weekend that seemed to work.  I am thinking I 
could create a class that would gather the local file system and send it 
over the wire as one lump.
3.      If I am going to transmit a backup file (<500meg) over the wire to 
another local computer what is the best Twisted approach to take?  Due to 
WinXP security issues and the desire the run in a cross platform 
environment I don't want to rely on normal file shares.

There are a hundred other questions running though my mind right now, but 
this will due for now,


Thanks for any help you can give,

David A. Leedom




The Hightower Group, Inc.
Custom Software Solutions Designed To Fit Your Business Like A Glove.
165 West Airport Road/Lititz, PA 17543
V:717-560-4002, 877-560-4002 x: 114
F:717-560-2825
www.hightowergroup.com  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040216/1b6e39c3/attachment.htm 

From michal at pasternak.w.lub.pl  Mon Feb 16 12:23:03 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Mon, 16 Feb 2004 18:23:03 +0100
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
References: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
Message-ID: <20040216172303.GA54182@pasternak.w.lub.pl>

David A. Leedom [Mon, Feb 16, 2004 at 10:03:37AM -0500]:
> 1.      What would you guys suggest I do to I get the GUI to ask all the 
> agents to identify themselves?

Well, that's a good question. In some app I did, I used machine's IP address
+ some operating system info it run (sys.platform, os.uname) to build a kind
of machine identifier. You could as well generate some UID, then save it,
then send it together with machine's IP to identify it on server, by hand.

Using OS-specific procedures could help you with this.

> 2.      What would be the best approach using twisted to transmit a file 
> system catalog across the local wire.  I was playing with some remote 
> procedure calls over the weekend that seemed to work.  I am thinking I 
> could create a class that would gather the local file system and send it 
> over the wire as one lump.

Remote procedures have limit of 640 KB for their parameters (because "640 KB
should be enough to anyone"). You should use Pager and Collector.

> 3.      If I am going to transmit a backup file (<500meg) over the wire to 
> another local computer what is the best Twisted approach to take?

See above. Also, please remember, that memory issues matter. If you're
paging the data (send small chunks), you should save them on the backup
server, as they are received. If you are transfering a big file, keeping all
the data received in some buffer is a bad idea. 



From mailinglists at shechen.at  Mon Feb 16 16:00:47 2004
From: mailinglists at shechen.at (stephan)
Date: Mon, 16 Feb 2004 13:00:47 -0800
Subject: [Twisted-Python] p2p, gnutella
Message-ID: <opr3hdzlabwzeeq5@mail.geekmail.cc>


I am looking forward to add p2p functionality to my app. Does anybody know 
what the current status of twisted's gnutella implementation is?

There seems to have been a semi-finished implemention in 1.0.2alpha4 which 
I can't find in 1.1.1 anymore.

I might also be willing to implement missing parts but I would need to get 
a short briefing on how things are.

thanks,

_stephan



From pje at telecommunity.com  Mon Feb 16 18:13:13 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Mon, 16 Feb 2004 18:13:13 -0500
Subject: [Twisted-Python] PEAK 0.5a3 released
Message-ID: <5.1.0.14.0.20040216171628.026173e0@mail.telecommunity.com>

After several months of feature creep, the third alpha release of PEAK 0.5 
is now available for download at:

    http://peak.telecommunity.com/dist/

Some highlights of the changes since 0.5a2 include:

* A simplified and consolidated binding API: there are now only four kinds 
of bindings (Make, Obtain, Require, and Delegate) that provide a wider 
variety of functionality than the old API.  You can also now create your 
own IRecipe or IComponentKey implementations for use with Make and Obtain.

* The 'n2' (namespace navigator) tool provides a handy, extensible shell 
(with completion and history) for exploring PEAK naming systems and SQL 
connections.

* A greatly enhanced configuration file parser, with lots of new 
convenience features such as [Import on Demand], [Named Services], and 
[Component Factories] sections, based on its new extensible parsing 
framework.  You can define new section types of your own, even from inside 
an .ini file.

* New configuration key features, such as multi-keys (similar to some of 
Zope X3's "adaptergeddon" features), the ability to iterate over defined 
keys in a hierarchy (useful for finding/registering various kinds of 
"plugins"), new convenience features for defining wildcard property rules,

* A new 'peak.events' framework that supports event sources, listeners, 
subscriptions, generator-based pseudothreads ("tasks"), scheduling, and I/O 
events.  Using 'peak.events', you can write event-driven code in a more 
natural, sequential, "untwisted" style, but without giving up access to 
Twisted's many great features.  'peak.events' can use PEAK's built-in event 
loop, or adapt a Twisted reactor for use as an event loop.  You can also 
use Twisted's "Deferred" objects as event sources, which means you can use 
them in your Tasks (pseudothreads).

* A new 'peak.ddt' "document-driven testing" framework, similar in form and 
function to the FIT ( http://fit.c2.com/ ) framework, but in Python and 
well-integrated with the rest of PEAK.  'peak.ddt' lets you write test data 
as tables in HTML documents (created with Word, Open Office, Mozilla, or 
virtually any other tool), and then view the results in your 
browser.  Correct results are highlighted in green, incorrect answers are 
highlighted in red, and errors are highlighted in yellow, with a small-font 
traceback added to the table cell.  It's a great way to do data-driven 
acceptance testing, or to manage a project's progress using example data as 
part of a requirements document.

* Many, many more features, both large and small, like a pre-forking 
multiprocess supervisor for FastCGI and other forking servers.  Quick 
access to documentation via the 'peak help' command, which uses pydoc to 
display reference documentation.  Early versions of the 'peak.security' 
(access control), 'peak.web' (Zope X3-based web publishing), and 
'peak.query' (declarative relational and conceptual queries w/SQL 
generation) packages.  The 'whenImported()' function that lets you call a 
hook when a named module is first used.  "Mock" DBAPI and socket 
implementations for testing.  Hooks for "thunking" database-specific SQL 
and functions.  And many, many more examples of unbelievably blatant 
feature creep!

There is also now a nice "Hello World" introduction to PEAK available at:

http://peak.telecommunity.com/DevCenter/IntroToPeak

that presents a guided tour of some of PEAK's "vertical" frameworks, like 
command-line application support, database access, and so on.

For more information about PEAK, and access to community resources 
including documentation, the Wiki, mailing list archives, IRC channel logs, 
CVS access, and more, please visit:

http://peak.telecommunity.com/




From ralf at brainbot.com  Mon Feb 16 20:05:41 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Tue, 17 Feb 2004 02:05:41 +0100
Subject: [Twisted-Python] [PATCH] nasty bug in twisted.names.client.createResolver
Message-ID: <86oeryv7kq.fsf@stronzo.brainbot.com>

The parameter variable 'hosts' gets overwritten by the import statement 
in createResolver. hosts.Resolver constructor is called with a module 
instead of a filename.

- Ralf

===================================================================
RCS file: /cvs/Twisted/twisted/names/client.py,v
retrieving revision 1.45
diff -u -r1.45 client.py
--- twisted/names/client.py     4 Feb 2004 19:55:34 -0000       1.45
+++ twisted/names/client.py     17 Feb 2004 01:01:53 -0000
@@ -303,20 +303,20 @@
         return p
 
 
-def createResolver(servers = None, resolvconf = None, hosts = None):
+def createResolver(servers = None, resolvconf = None, hostsfile = None):
     import resolve, cache, hosts, root
     if platform.getType() == 'posix':
         if resolvconf is None:
             resolvconf = '/etc/resolv.conf'
-        if hosts is None:
-            hosts = '/etc/hosts'
+        if hostsfile is None:
+            hostsfile = '/etc/hosts'
         theResolver = Resolver(resolvconf, servers)
-        hostResolver = hosts.Resolver(hosts)
+        hostResolver = hosts.Resolver(hostsfile)
     else:
-        if hosts is None:
-            hosts = r'c:\windows\hosts'
+        if hostsfile is None:
+            hostsfile = r'c:\windows\hosts'
         bootstrap = ThreadedResolver()
-        hostResolver = hosts.Resolver(hosts)
+        hostResolver = hosts.Resolver(hostsfile)
         theResolver = root.bootstrap(bootstrap)
 
     L = [hostResolver, cache.CacheResolver(), theResolver]

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From itamar at itamarst.org  Mon Feb 16 20:33:55 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 16 Feb 2004 20:33:55 -0500
Subject: [Twisted-Python] [PATCH] nasty bug in
	twisted.names.client.createResolver
In-Reply-To: <86oeryv7kq.fsf@stronzo.brainbot.com>
References: <86oeryv7kq.fsf@stronzo.brainbot.com>
Message-ID: <1076981635.1168.36.camel@sheriffpony>

On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
> The parameter variable 'hosts' gets overwritten by the import statement 
> in createResolver. hosts.Resolver constructor is called with a module 
> instead of a filename.

Please add patches and bugs to twistedmatrix.com/bugs/




From itamar at itamarst.org  Mon Feb 16 20:40:06 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 16 Feb 2004 20:40:06 -0500
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
	queries with Twisted...
In-Reply-To: <40276641.30300@rogers.com>
References: <40276641.30300@rogers.com>
Message-ID: <1076982005.1170.38.camel@sheriffpony>

On Mon, 2004-02-09 at 05:51, Mike C. Fletcher wrote:

> Writing a simple asynchronous loop myself (poll on a simple socket, send 
> message from queue when writable, read one into other queue when 
> readable) allowed for doing a few thousand queries simultaneously), with 
> only a few dozen dropped messages.  However, with the Twisted equivalent 
> (UDPTransport with my simple protocol object), I was seeing huge drop 
> rates, so, gathering that Twisted isn't queueing up the UDP requests,

Possibly we need some generic UDP queuing, rather than current system.
Patches are welcome.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From ralf at brainbot.com  Mon Feb 16 20:47:19 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Tue, 17 Feb 2004 02:47:19 +0100
Subject: [Twisted-Python] [PATCH] twisted.names.hosts not working correct with getHostByName
Message-ID: <86k72mv5nc.fsf@stronzo.brainbot.com>

Even with my prior patch I'm not able to use twisted.names.client.getHostByName.
Seems like twisted.names.hosts.Resolver calls itself with bad parameters
and even doesn't use the ip address it extracted from /etc/hosts. Also the return 
value could not be handled by the code in twisted.names.common.extractRecord.
The following patch seems to solve those problems.

- Ralf




===================================================================
RCS file: /cvs/Twisted/twisted/names/hosts.py,v
retrieving revision 1.14
diff -u -r1.14 hosts.py
--- twisted/names/hosts.py      19 Jul 2003 10:13:50 -0000      1.14
+++ twisted/names/hosts.py      17 Feb 2004 01:45:44 -0000
@@ -49,11 +49,11 @@
 
 
     def query(self, query, timeout = None):
-        return self._lookup(str(query.name), query.type, query.type, timeout)
+        return self._lookup(str(query.name), query.cls, query.type, timeout)
 
 
     def _lookup(self, name, cls, type, timeout):
-        if cls != dns.IN or type != dns.A:
+        if cls != dns.IN or (type != dns.A and type != dns.ALL_RECORDS): # getHostByName passes type==dns.ALL_RECORDS. what else do we need here?
             return defer.fail(failure.Failure(NotImplementedError(type, cls)))
         return self.lookupAddress(
             name, timeout
@@ -64,7 +64,7 @@
         res = searchFileFor(self.file, name)
         if res:
             return defer.succeed([
-                [dns.RRHeader(name, dns.A, dns.IN, self.ttl)], (), ()
+                [dns.RRHeader(name, dns.A, dns.IN, self.ttl, dns.Record_A(res, self.ttl))], [], []
             ])
         return defer.fail(failure.Failure(dns.DomainError(name)))
 
-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From debonzi at gwyddion.com  Mon Feb 16 20:47:47 2004
From: debonzi at gwyddion.com (Daniel Henrique Debonzi)
Date: Mon, 16 Feb 2004 22:47:47 -0300
Subject: [Twisted-Python] Client Prompt
Message-ID: <403172C3.7020803@gwyddion.com>

Hi everybody,

Maybe this is a very stupid question, but I realy couldn't find a way to 
solve it by myself.

Would be enough for my aplication if this example works.

So, I want to have a client that read a string from the stdin and then 
send it to the server. Wich changes should I do in this code to this 
client work like a discrebed

#################################################################
from twisted.internet import reactor, protocol

class EchoClient(protocol.Protocol):

     def connectionMade(self):
	"""I don't want to write it here
	   I want to take data from stdin and send o server,
	   but were and how to do it? Too much dificult?
	"""
         self.transport.write("hello, world!")

     def dataReceived(self, data):
         print data

     def connectionLost(self, reason):
         print "connection lost"
         from twisted.internet import reactor
         reactor.stop()


class EchoFactory(protocol.ClientFactory):
     protocol = EchoClient

     def clientConnectionFailed(self, connector, reason):
         print "Connection failed - goodbye!"
         reactor.stop()

     def clientConnectionLost(self, connector, reason):
         print "Connection lost - goodbye!"
         reactor.stop()


def main():
     f = EchoFactory()
     reactor.connectTCP("localhost", 5555, f)
     reactor.run()

if __name__ == '__main__':
     main()

#################################################################

Thanks for all



-- 
Daniel Henrique Debonzi  Linux user number 166903
Gwyddion Embedded Free-Software Development
www.gwyddion.com
S?o Carlos, S?o Paulo
Brazil




From ralf at brainbot.com  Mon Feb 16 21:20:28 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Tue, 17 Feb 2004 03:20:28 +0100
Subject: [Twisted-Python] [PATCH] nasty bug in
 twisted.names.client.createResolver
In-Reply-To: <1076981635.1168.36.camel@sheriffpony> (Itamar
 Shtull-Trauring's message of "Mon, 16 Feb 2004 20:33:55 -0500")
References: <86oeryv7kq.fsf@stronzo.brainbot.com>
	<1076981635.1168.36.camel@sheriffpony>
Message-ID: <86fzdav443.fsf@stronzo.brainbot.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
>> The parameter variable 'hosts' gets overwritten by the import statement 
>> in createResolver. hosts.Resolver constructor is called with a module 
>> instead of a filename.
>
> Please add patches and bugs to twistedmatrix.com/bugs/
>

Lots of bug reports in the bug tracker have status 'unread'. That's
not very motivating. Just committing this patch -even if it was wrong-
would not make things worse, as the original code is definitely
broken. But, I'll add it to the bugtracker tomorrow.

- Ralf

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From mary-twisted at puzzling.org  Mon Feb 16 21:56:07 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Tue, 17 Feb 2004 13:56:07 +1100
Subject: 'unread' bugs (Re: [Twisted-Python] [PATCH] nasty bug in twisted.names.client.createResolver)
In-Reply-To: <86fzdav443.fsf@stronzo.brainbot.com>
References: <86oeryv7kq.fsf@stronzo.brainbot.com> <1076981635.1168.36.camel@sheriffpony> <86fzdav443.fsf@stronzo.brainbot.com>
Message-ID: <20040217025607.GA28107@home.puzzling.org>

On Tue, Feb 17, 2004, ralf at brainbot.com wrote:
> Lots of bug reports in the bug tracker have status 'unread'.

That doesn't *necessarily* mean 'not read by the relevant developer'. It
just means they haven't actually commented on the bug.  This seems to be
a feature/bug of the bugtrracker, roundup, itself.

I've read all bugs assigned to me, but some of them are still 'unread'
because I haven't felt the need to actually comment on them.

-Mary



From developer at csrules.dyndns.org  Tue Feb 17 00:30:06 2004
From: developer at csrules.dyndns.org (darryl)
Date: Mon, 16 Feb 2004 21:30:06 -0800
Subject: 'unread' bugs (Re: [Twisted-Python] [PATCH] nasty bug in twisted.names.client.createResolver)
In-Reply-To: <20040217025607.GA28107@home.puzzling.org>
References: <86oeryv7kq.fsf@stronzo.brainbot.com> <1076981635.1168.36.camel@sheriffpony> <86fzdav443.fsf@stronzo.brainbot.com> <20040217025607.GA28107@home.puzzling.org>
Message-ID: <4031A6DE.2070709@csrules.dyndns.org>

Mary Gardiner wrote:

>On Tue, Feb 17, 2004, ralf at brainbot.com wrote:
>  
>
>>Lots of bug reports in the bug tracker have status 'unread'.
>>    
>>
>
>That doesn't *necessarily* mean 'not read by the relevant developer'. It
>just means they haven't actually commented on the bug.  This seems to be
>a feature/bug of the bugtrracker, roundup, itself.
>
>I've read all bugs assigned to me, but some of them are still 'unread'
>because I haven't felt the need to actually comment on them.
>
>-Mary
>  
>

Just to confirm. In the default configuration of roundup the unread flag 
ONLY indicates that no-one
has added a comment, or otherwise changed the status. Is has nothing to 
do at all with actually being read.

-darryl

-- 
http://randomthoughts.vandorp.ca/syncato/WK/blog




From radix at twistedmatrix.com  Mon Feb 16 23:57:04 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon, 16 Feb 2004 23:57:04 -0500
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <20040216172303.GA54182@pasternak.w.lub.pl>
References: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com> <20040216172303.GA54182@pasternak.w.lub.pl>
Message-ID: <40319F20.8020901@twistedmatrix.com>

Michal Pasternak wrote:
> David A. Leedom [Mon, Feb 16, 2004 at 10:03:37AM -0500]:

>>2.      What would be the best approach using twisted to transmit a file 
>>system catalog across the local wire.  I was playing with some remote 
>>procedure calls over the weekend that seemed to work.  I am thinking I 
>>could create a class that would gather the local file system and send it 
>>over the wire as one lump.
> 
> 
> Remote procedures have limit of 640 KB for their parameters (because "640 KB
> should be enough to anyone"). You should use Pager and Collector.
> 
> >>3.      If I am going to transmit a backup file (<500meg) over the wire to 
>>another local computer what is the best Twisted approach to take?
> 
> 
> See above. Also, please remember, that memory issues matter. If you're
> paging the data (send small chunks), you should save them on the backup
> server, as they are received. If you are transfering a big file, keeping all
> the data received in some buffer is a bad idea. 

PB probably isn't good for massive file transfer like that. I'd either 
use an existing tool like rsync or http or whatever, or roll a trivial 
protocol that just sends length_of_data:data.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040216/2ccfe6d3/attachment.pgp 

From sam at twistedmatrix.com  Tue Feb 17 10:50:12 2004
From: sam at twistedmatrix.com (Sam Jordan)
Date: Wed, 18 Feb 2004 01:50:12 +1000
Subject: [Twisted-Python] Client Prompt
In-Reply-To: <403172C3.7020803@gwyddion.com>
References: <403172C3.7020803@gwyddion.com>
Message-ID: <20040217155012.GA18427@psychlaw.com.au>

On Mon, Feb 16, 2004 at 10:47:47PM -0300, Daniel Henrique Debonzi wrote:
> So, I want to have a client that read a string from the stdin and then 
> send it to the server. Wich changes should I do in this code to this 
> client work like a discrebed

You most probably want to use twisted.internet.stdio.StandardIO.
I have made a few simple modifications to your code to demonstrate
how this works -- note that this is just to demonstrate functionality
and makes a few assumptions (such as your terminal line-buffering input).

-------------------------------------------------------------------------
from twisted.internet import reactor, protocol, stdio

class InputHandler(protocol.Protocol):

    def __init__(self, realProto):
        self.realProto = realProto

    def dataReceived(self, data):
        self.realProto.transport.write(data)

class EchoClient(protocol.Protocol):

     def connectionMade(self):
        stdio.StandardIO(InputHandler(self))

     def dataReceived(self, data):
         print data

     def connectionLost(self, reason):
         print "connection lost"
         from twisted.internet import reactor
         reactor.stop()

class EchoFactory(protocol.ClientFactory):
     protocol = EchoClient

     def clientConnectionFailed(self, connector, reason):
         print "Connection failed - goodbye!"
         reactor.stop()

     def clientConnectionLost(self, connector, reason):
         print "Connection lost - goodbye!"
         reactor.stop()

def main():
     f = EchoFactory()
     reactor.connectTCP("localhost", 5555, f)
     reactor.run()

if __name__ == '__main__':
     main()

-------------------------------------------------------------------------

You may also want to take a look at doc/examples/cursesclient.py.

Hope this helps,

Sam Jordan.



From lstep at adequat.net  Tue Feb 17 19:15:45 2004
From: lstep at adequat.net (Luc Stepniewski)
Date: Wed, 18 Feb 2004 01:15:45 +0100
Subject: [Twisted-Python] Twisted Weekly News #11
Message-ID: <4032AEB1.2070108@adequat.net>

====================================================================
Twisted Weekly News #11
====================================================================

.. contents::

So many announcements and new Twisted based software! This week's TWN
(especially because it is merged with previous week) is full of really cool
news/articles/software that will keep you busy for at least two months.

If you have any new information, ideas, announcements for the next
TWN, please write to me, <lior at gradstein.info>. TWN is also available
as HTML formated ReST on http://gradstein.info/articles/twisted_news/twn11

The Twisted Weekly News
-------------------------

11th Issue. Tuesday, February 17, 2004

QOTW::

    <moshez> Twisted: Just Because It's Not Documented and Unstable
             Doesn't Mean You Shouldn't Use It

Discussions
-------------

    * http://twistedmatrix.com/pipermail/twisted-python/2003-December/006856.html
      David Bolen asked if there was a way to keep the references to the
      remote PB object when a disconnect happened, and reconnect all
      automatically.
      Jp Calderone replied 
(http://twistedmatrix.com/pipermail/twisted-python/2003-December/006869.html)
      that, in its current shape, it is not possible, because the
      references are reinitialized when the connection is re-enabled. But
      he said this would not be too hard to implement.

    * http://twistedmatrix.com/pipermail/twisted-python/2004-February/007039.html
      Stephen Waterbury posted a code example on how to interface twisted.cred
      with a database where the user/pass is stored. A few days later, Stephen
      posted another example, less trivial, showing web auth against a db, on
      http://twistedmatrix.com/pipermail/twisted-python/2004-February/007063.html

    * http://twistedmatrix.com/pipermail/twisted-python/2004-February/007057.html
      Martin Stenhard asked how to get the remote ip address of a connecting
      client, if the connection is made using PB.

    * http://twistedmatrix.com/pipermail/twisted-python/2004-February/007074.html
      David A. Leedom asked for some advice on how he should design a remote
      backup architecture using Twisted. Michal Pasternak replied that he
      should pay a lot of attention on the size of transmitted data, as Twisted
      limits paramaters to 640KB max.


Articles/Sites related to Twisted
--------------------------------------

  * **Nevow: A Web Application Construction Kit** 
(http://soundfarmer.com/content/nevow.html)
    fzZzy wrote a proposal to give a talk on nevow at this year's PyCon.
    It turns out to be a good overview of what nevow is about.

  * **Planet Twisted** (http://planet.twistedmatrix.com/)
    A new website which is a blog of all the Twisted developers blogs.

  * **Article about Twisted Networking** 
(http://www.onlamp.com/pub/a/python/2004/01/15/twisted_intro.html)
    Itamar wrote an introductory article about Twisted networking.

  * **Understanding Network I/O, Part 2** 
(http://www.onlamp.com/pub/a/python/2004/02/12/advanced_nio.html)
    Article by George Belotsky, on how to achieve network asynchronous I/O
    with examples of code in asyncore,twisted,threads, etc.


Cool Things of the Week
-----------------------

  * **Rebirth of pyx/fzZzy blog** (http://ulaluma.com/pyx/)
    fzZzy has renewed his blog, with information about nevow and the successor
    to LivePage named liveevil. A first (very) impressive example is a chat
    application, located on http://soundfarmer.com/content/code/chatola/ .

  * **Nevow Wiki** (http://divmod.org/users/slyphon.twistd/nevow/moin.cgi/)
    A survey is online showing who's doing what with Nevow today. There are
    many really interesting projects going on!

  * **Beyond2** (http://www.asbahr.com/beyond.html)
    Beyond 2 builds upon the Twisted server and extends it to enable
    arbitrary 3D clients to connect to a common simulation framework.
    Twisted provides object persistence, remote method invocation, database
    integration, and more.  The project seems to restart/continue, with the
    help of Nafai and lstep. A Wiki has been set up on http://www.beyond2.org/

  * **Twisted Forum** (http://twisted.banquise.org/)
    Some new sections have been added to the forum (Snippets, PB),


New/Updated Cool Software
-----------------------------

  * **UpStage** (http://sourceforge.net/projects/upstage/) A complex chat
    application that allows streaming of video.

  * **BEEP protocol** 
(http://freshmeat.net/redir/beepy/31931/url_homepage/beepy.sourceforge.net)
    The BEEPy Python BEEP Library is an implementation of the Blocks
    Extensible Exchange Protocol (RFC3080), written as a Python library.
    The difference with the previous version, is that it is now implemented
    with Twisted! ("It is now implemented using the Twisted framework for
    fast, asynchronous network communications")

  * **Shtoom** (http://shtoom.sourceforge.net/)
    Shtoom is a pure python implementation of a Voice over IP software phone.

  * **Trash** (http://thorne.ath.cx/~stephen/software.html)
    'Trash' a pastebin application written using the Twisted framwork (using
    woven).

  * **GoSiege** (http://www.stranex.com/~perspex/gosiege/)
    A game on the Go game model, but in a online multiplayer (MMOG) mode.
    The code is really a very good example of well written code (at least
    from my point of view). I recommend it if you're looking for PB example
    code.

  * **Twibber** (http://slarty.polito.it:8069/~sciasbat/wiki/moin.cgi/twibber)
    Version 0.2.0pre1, twibber is a Python package aimed at handling the
    Jabber - XMMP protocol in a completely asynchronous way.

  * **Crow's Nest** (http://crowsnest.sourceforge.net/)
    Crow's Nest is a project designed to help collect log information
    from various sources and to apply some filter to them in a very modular
    way.

  * **PETMail** (http://petmail.lothar.com/)
    PETMail is a permission-based anti-spam replacement for SMTP, using
    recipient-defined CAPTCHA challenges for new senders, automatic
    (but revocable) permission-granting for most correspondents, encrypted
    and signed (but pseudonymous) messages, and provisions for easily
    changing addresses or transports (including a mechanism to publish
    remailer SURBs as a destination).

  * **PEAK 0.5a2** (http://peak.telecommunity.com/)
    (Not directly related to Twisted, but allows the developer to use
    the twisted reactor). The third alpha is available.
    That version includes a new framework (peak.events) that allows the
    developer to make his programs more event-driven (in the sense of
    subscribers/observers). The event loop, as usual, can be set to be
    Twisted's reactor.

Current releases
-----------------

   * Twisted: 1.1.1 (released 2003-12-10) (devel version: 1.1.2alpha2)
   * Quotient: 0.8.8 (released 2003-12-12)
   * Twisted Java: 0.6.1 (released 2003-12-02)



Ok, that's it for this week. Thanks for reading!



From itamar at itamarst.org  Tue Feb 17 20:14:06 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 17 Feb 2004 20:14:06 -0500
Subject: [Twisted-Python] [PATCH] nasty bug in
	twisted.names.client.createResolver
In-Reply-To: <86fzdav443.fsf@stronzo.brainbot.com>
References: <86oeryv7kq.fsf@stronzo.brainbot.com>
	 <1076981635.1168.36.camel@sheriffpony>
	 <86fzdav443.fsf@stronzo.brainbot.com>
Message-ID: <1077066846.2587.18.camel@sheriffpony>

On Mon, 2004-02-16 at 21:20, ralf at brainbot.com wrote:

> Lots of bug reports in the bug tracker have status 'unread'. That's
> not very motivating. Just committing this patch -even if it was wrong-
> would not make things worse, as the original code is definitely
> broken. But, I'll add it to the bugtracker tomorrow.

Let me put it this way: If it's in the bug tracker someone will
eventually look at it. If you just post to list you can be pretty much
sure no one will ever look at it again if they forget the first time. 

Please do post to the bug tracker. It won't make it go in fast, but
it'll make sure the patch isn't *lost*.




From glyph at twistedmatrix.com  Wed Feb 18 02:53:13 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 18 Feb 2004 02:53:13 -0500
Subject: [Twisted-Python] Twisted Weekly News #11
In-Reply-To: <4032AEB1.2070108@adequat.net>
References: <4032AEB1.2070108@adequat.net>
Message-ID: <1077090792.3985.14.camel@localhost>

On Tue, 2004-02-17 at 19:15, Luc Stepniewski wrote:

> So many announcements and new Twisted based software! This week's TWN
> (especially because it is merged with previous week) is full of really cool
> news/articles/software that will keep you busy for at least two months.

Luc, this is incredible!! I had no idea that so many people were using
Twisted.  We really need to update the website.

Thanks again for writing it :)




From rdrb at 123.cl  Wed Feb 18 19:37:53 2004
From: rdrb at 123.cl (RITA Y/O RODRIGO DIAZ Y/O BENENSON)
Date: Wed, 18 Feb 2004 21:37:53 -0300
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
Message-ID: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl>

I have been playing with DeferredList if found that his behaviour was not what I expected,

>>> dfl = DeferredList([])
>>> print dfl.called
True
>>> dfl.addDeferred(d)
>>> d.called
0
>>> print dfl.called
True

The workaround it to first create the list of deferred instance and then instanciate with it the DeferredList. But what sense does have the addDeferred method then ? I this behaviour what is supposed to be ?

rodrigob.





From rdrb at 123.cl  Wed Feb 18 19:51:51 2004
From: rdrb at 123.cl (RITA Y/O RODRIGO DIAZ Y/O BENENSON)
Date: Wed, 18 Feb 2004 21:51:51 -0300
Subject: [Twisted-Python] Twisted and P2P (re: p2p, gnutella)
Message-ID: <397cb3900f.3900f397cb@noborrar.co.cl>

Hi,
I'm working on the Twistification of http://thecircle.org.au/ and in the reparation of the broken http://khashmir.sf.net

if you would like to help contact me at the email 

myname at elo dot utfsm dot cl

knowing that myname is rodrigob

(I hate spam)

TheCircle work is just at his begining (design is made, code is starting, slowly), the khashmir reparation is going fine (but no estimation can be done in debugging, because number of critical bugs is unknown).

rodrigob.




<twisted-python at twistedmatrix.com>
> From: stephan <mailinglists at shechen.at>
> Subject: [Twisted-Python] p2p, gnutella
> Reply-To: twisted-python at twistedmatrix.com
> 
> 
> 
> I am looking forward to add p2p functionality to my app. Does 
> anybody know 
> what the current status of twisted's gnutella implementation is?
> 
> There seems to have been a semi-finished implemention in 
> 1.0.2alpha4 which 
> I can't find in 1.1.1 anymore.
> 
> I might also be willing to implement missing parts but I would need 
> to get 
> a short briefing on how things are.
> 
> thanks,
> 
> _stephan
> 




From andrew-twisted at puzzling.org  Wed Feb 18 20:32:45 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 19 Feb 2004 12:32:45 +1100
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
In-Reply-To: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl>
Message-ID: <20040219013245.GG1782@frobozz>

On Wed, Feb 18, 2004 at 09:37:53PM -0300, RITA Y/O RODRIGO DIAZ Y/O BENENSON wrote:
> I have been playing with DeferredList if found that his behaviour was not
> what I expected,
> 
> >>> dfl = DeferredList([])
> >>> print dfl.called
> True
> >>> dfl.addDeferred(d)
> >>> d.called
> 0
> >>> print dfl.called
> True
> 
> The workaround it to first create the list of deferred instance and then
> instanciate with it the DeferredList. But what sense does have the
> addDeferred method then ? I this behaviour what is supposed to be ?

It's not clear to me what the right behaviour here is -- if a DeferredList
has some number of Deferreds that have all been called, then of course the
DeferredList should be marked as called, too.  But if you then add an
uncalled Deferred to it, that sounds like a bug.  I'd be inclined to make
DeferredList.addDeferred raise an exception in this case -- "In the face of
ambiguity, refuse the temptation to guess." (although perhaps a warning
would be better for a release or two, for backwards compatibility)

I'm tempted to go even further and just deprecate addDeferred.  I can't see
a good use-case for it, and grep of the entire Twisted code base finds no
uses outside of the test suite.  It's not obvious or intuitive exactly what
addDeferred should do in at least this situation, and probably others.  I
can't think of any situation where addDeferred is required, and I think
calling it with the final list upfront is more readable, anyway.

Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
you added it, can you remember why?  Is anyone using it?

-Andrew.




From radix at twistedmatrix.com  Wed Feb 18 22:19:43 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 18 Feb 2004 22:19:43 -0500
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
In-Reply-To: <20040219013245.GG1782@frobozz>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz>
Message-ID: <40342B4F.90900@twistedmatrix.com>

Andrew Bennetts wrote:

> On Wed, Feb 18, 2004 at 09:37:53PM -0300, RITA Y/O RODRIGO DIAZ Y/O BENENSON wrote:

>>The workaround it to first create the list of deferred instance and then
>>instanciate with it the DeferredList. But what sense does have the
>>addDeferred method then ? I this behaviour what is supposed to be ?
> 
> 
> It's not clear to me what the right behaviour here is -- if a DeferredList
> has some number of Deferreds that have all been called, then of course the
> DeferredList should be marked as called, too.  But if you then add an
> uncalled Deferred to it, that sounds like a bug.  

Similar to d.result, IMO, d.called is an "invite-only attribute", in the 
words of Glyph. If you want to touch it, don't whine about its 
semantics. :-)

> Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
> you added it, can you remember why?  Is anyone using it?

And addDeferred looks like it should really be _addDeferred.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040218/361605c3/attachment.pgp 

From ilya at glasnet.ru  Wed Feb 11 03:08:24 2004
From: ilya at glasnet.ru (Ilya Etingof)
Date: Wed, 11 Feb 2004 11:08:24 +0300 (MSK)
Subject: [pysnmp-users] Re: [Twisted-Python] Twisted and SNMP
In-Reply-To: <4028A3DE.2020101@rogers.com>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne>
 <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
 <4028A3DE.2020101@rogers.com>
Message-ID: <Pine.LNX.4.58.0402111042030.9048@cray.glas.net>

> > but if anyone is interested in bringing a full high performance ASN
> > coder-decoder to twisted, i'd be willing to help.
>
> Ilya (creator of PySNMP) just released a new version of PySNMP
> yesterday.  It's noticeably faster feeling than the 3.3.x version.  I
> don't have time to do timings with it, but I'd guess it's probably
> taking 3/4 of the time of the previous version.  Still likely not 0.02
> seconds on getbulk requests, but noticeably faster.

Just a little bit of clarification:

My ASN1 decoder is designed in a way similar to a top-down text parser --
it reads octet stream (text) and builds a tree of ASN1 objects (AST).
Depending of the mix-ins to those ASN1 objects, walking the tree may
produce something concrete.

Perhaps the most noticable bottleneck there lays in the fact that building
a tree of ASN1 objects involves massive classes instantiations. In the
latest pysnmp code (3.4.x) I attempted to save on object creation by caching
and reusing once created ASN1 objects.

To make the most of this trick I'd suggest to cache and re-use ASN1
objects (SNMP message objects for example) at your application whenever
possible.

-ilya



From andrew-twisted at puzzling.org  Wed Feb 18 22:33:46 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 19 Feb 2004 14:33:46 +1100
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
In-Reply-To: <40342B4F.90900@twistedmatrix.com>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz> <40342B4F.90900@twistedmatrix.com>
Message-ID: <20040219033346.GH1782@frobozz>

On Wed, Feb 18, 2004 at 10:19:43PM -0500, Christopher Armstrong wrote:
> Andrew Bennetts wrote:
> 
> >It's not clear to me what the right behaviour here is -- if a DeferredList
> >has some number of Deferreds that have all been called, then of course the
> >DeferredList should be marked as called, too.  But if you then add an
> >uncalled Deferred to it, that sounds like a bug.  
> 
> Similar to d.result, IMO, d.called is an "invite-only attribute", in the 
> words of Glyph. If you want to touch it, don't whine about its 
> semantics. :-)

It probably should be _called, then... if nothing else, the API docs should
point this out.  I might fix that when I update the code to deprecate
addDeferred.

> >Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
> >you added it, can you remember why?  Is anyone using it?
> 
> And addDeferred looks like it should really be _addDeferred.

Why not just remove it entirely?  I found Donovan on IRC, his opinion was
"remove it" :)

-Andrew.




From radix at twistedmatrix.com  Wed Feb 18 22:37:40 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 18 Feb 2004 22:37:40 -0500
Subject: [pysnmp-users] Re: [Twisted-Python] Twisted and SNMP
In-Reply-To: <Pine.LNX.4.58.0402111042030.9048@cray.glas.net>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr> <4028A3DE.2020101@rogers.com> <Pine.LNX.4.58.0402111042030.9048@cray.glas.net>
Message-ID: <40342F84.8080000@twistedmatrix.com>

Ilya Etingof wrote:
> In the
> latest pysnmp code (3.4.x) I attempted to save on object creation by caching
> and reusing once created ASN1 objects.
> 
> To make the most of this trick I'd suggest to cache and re-use ASN1
> objects (SNMP message objects for example) at your application whenever
> possible.

Hmm...

http://151.200.36.43:8080/evil/freelist.py

Courtesy of Jp Calderone.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040218/8a4c6407/attachment.pgp 

From uwe at oss4u.com  Thu Feb 19 02:28:37 2004
From: uwe at oss4u.com (Uwe C. Schroeder)
Date: Wed, 18 Feb 2004 23:28:37 -0800
Subject: [SPAM 05.92] [Twisted-Python] Twisted and P2P (re: p2p, gnutella)
In-Reply-To: <397cb3900f.3900f397cb@noborrar.co.cl>
References: <397cb3900f.3900f397cb@noborrar.co.cl>
Message-ID: <200402182328.37975.uwe@oss4u.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Something off the list: If you hate spam, you should probably get a decent 
email account, because the one you have is rated as spam (and actually 
doesn't survive my spamfilter): Reasons:

X-Spam-Report: 
	*  1.1 RCVD_IN_SORBS_HTTP RBL: SORBS: sender is open HTTP proxy server
	*      [200.72.168.145 listed in dnsbl.sorbs.net]
	*  0.1 RCVD_IN_SORBS RBL: SORBS: sender is listed in SORBS
	*      [200.72.168.145 listed in dnsbl.sorbs.net]
	*  1.3 RCVD_IN_NJABL_RELAY RBL: NJABL: sender is confirmed open relay
	*      [200.72.168.145 listed in dnsbl.njabl.org]
	*  0.1 RCVD_IN_NJABL RBL: Received via a relay in dnsbl.njabl.org
	*      [200.72.168.145 listed in dnsbl.njabl.org]
	*  1.1 RCVD_IN_DSBL RBL: Received via a relay in list.dsbl.org
	*      [<http://dsbl.org/listing?ip=200.72.168.145>]
	*  1.1 RCVD_IN_NJABL_PROXY RBL: NJABL: sender is an open proxy
	*      [200.72.168.145 listed in dnsbl.njabl.org]
	*  1.1 RCVD_IN_SORBS_SOCKS RBL: SORBS: sender is open SOCKS proxy server
	*      [200.72.168.145 listed in dnsbl.sorbs.net]


On Wednesday 18 February 2004 04:51 pm, RITA Y/O RODRIGO DIAZ Y/O BENENSON 
wrote:
> Hi,
> I'm working on the Twistification of http://thecircle.org.au/ and in the
> reparation of the broken http://khashmir.sf.net
>
> if you would like to help contact me at the email
>
> myname at elo dot utfsm dot cl
>
> knowing that myname is rodrigob
>
> (I hate spam)
>
> TheCircle work is just at his begining (design is made, code is starting,
> slowly), the khashmir reparation is going fine (but no estimation can be
> done in debugging, because number of critical bugs is unknown).
>
> rodrigob.
>
>
>
>
> <twisted-python at twistedmatrix.com>
>
> > From: stephan <mailinglists at shechen.at>
> > Subject: [Twisted-Python] p2p, gnutella
> > Reply-To: twisted-python at twistedmatrix.com
> >
> >
> >
> > I am looking forward to add p2p functionality to my app. Does
> > anybody know
> > what the current status of twisted's gnutella implementation is?
> >
> > There seems to have been a semi-finished implemention in
> > 1.0.2alpha4 which
> > I can't find in 1.1.1 anymore.
> >
> > I might also be willing to implement missing parts but I would need
> > to get
> > a short briefing on how things are.
> >
> > thanks,
> >
> > _stephan
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

- -- 
	UC

- --
Open Source Solutions 4U, LLC	2570 Fleetwood Drive
Phone:  +1 650 872 2425		San Bruno, CA 94066
Cell:   +1 650 302 2405		United States
Fax:    +1 650 872 2417
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFANGWljqGXBvRToM4RAnV0AKCp4siSQrd1BUDWT17zCWiFHUdDtQCgnNWF
1uEv9Xi2m6VpavHcnsw2nN4=
=rvly
-----END PGP SIGNATURE-----




From daedalus at eigenmagic.com  Thu Feb 19 16:48:37 2004
From: daedalus at eigenmagic.com (Justin Warren)
Date: Fri, 20 Feb 2004 08:48:37 +1100
Subject: [Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)
In-Reply-To: <40289E7C.9000100@accelance.fr>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
Message-ID: <20040219214837.GA19451@snafu.eigenmagic.com>

On Tue, Feb 10, 2004 at 10:03:56AM +0100, Thomas Favier wrote:
> Mike C. Fletcher wrote:

> You bring my point with SNMP : I've tried to build a SNMP poller based 
> on twisted and pySNMP. Main trouble i've had is the decoding time of the 
> pure python ASN parser. It spent about 1 full second decoding (packets 
> are about 7ko, as i get all values and tables with a GET-BULK, there is 
> room for improvement by splitting requests, but that's not significant 
> for that matter). So i switched to a threaded implementation using 
> yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
> for the same requests. Load on the server was more than halved.

Please forgive the self-linking, but you might like to take a look at
libsnmp: http://seafelt.unicity.com.au/libsnmp. I wrote it to replace
pySNMP in a product we're working on, for various reasons, speed being
one of them. The main difference between the two is that libsnmp isn't
a generic ASN.1 decoder; we've hardcoded things specific to SNMP to
make things faster. It seems to scale quite well so far.

-- 
"You've got that exactly backwards.  Windows was a boot loader that was
 mutilated and tortured by sadistic psychopaths of the highest order in
 order to make it superficially resemble an OS."
   -- Paul Tomblin in a.s.r



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 04:48:32 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 09:48:32 +0000
Subject: [Twisted-Python] Problems running Twisted
Message-ID: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>

I'm trying to set up a (very simple) web server using Twisted.
I'm using this example from the documentation:

============================================================
# teg1.py

from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render(self, request):
        return "<html>Hello, world!</html>"

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run()
============================================================

I've stored this as <teg1.py>. When I run:

   $ python teg1.py

Python complains that it can't import twisted.web:

   Traceback (most recent call last):
     File "teg1.py", line 3, in ?
       from twisted.web import server, resource
   ImportError: No module named twisted.web

I've previously installed Twisted by running:

   $ python setup.py install

which I thought would install all the modules and put them correctly
in the PYTHONPATH (tell me if this isn't true).

Am I doing somethnig wrong? I feel I have missed something fundamental, but
don't know what. Should I rename my file to <teg1.rpy> or something? Do I
need to run at the command-line ``mktap'' instead of ``python''?

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From andrew-twisted at puzzling.org  Fri Feb 20 05:06:58 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Fri, 20 Feb 2004 21:06:58 +1100
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
Message-ID: <20040220100658.GA768@frobozz>

On Fri, Feb 20, 2004 at 09:48:32AM +0000, Phil Hunt wrote:
> 
> I'm trying to set up a (very simple) web server using Twisted.
[...]
> 
> Python complains that it can't import twisted.web:
> 
>    Traceback (most recent call last):
>      File "teg1.py", line 3, in ?
>        from twisted.web import server, resource
>    ImportError: No module named twisted.web
> 
> I've previously installed Twisted by running:
> 
>    $ python setup.py install
> 
> which I thought would install all the modules and put them correctly
> in the PYTHONPATH (tell me if this isn't true).

It should... what platform are you on?

In fact, it should've told you where it was installing stuff, and you should
be able to look at that directory (/usr/lib/python2.3/site-packages on
*nix, C:\Python23\Lib\site-packages on Windows, iirc), and see that there is
a twisted directory in there.

> Am I doing somethnig wrong? I feel I have missed something fundamental, but
> don't know what. Should I rename my file to <teg1.rpy> or something? Do I
> need to run at the command-line ``mktap'' instead of ``python''?

No, you're running it the right way -- you can verify that importing is the
problem by doing 'python -c "import twisted.web"'.  If it's installed in
your python's site-packages correctly, it should work, otherwise it should
give the error you saw.

-Andrew.




From radix at twistedmatrix.com  Fri Feb 20 05:09:15 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 20 Feb 2004 05:09:15 -0500
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
Message-ID: <4035DCCB.5090701@twistedmatrix.com>

Phil Hunt wrote:
> I'm trying to set up a (very simple) web server using Twisted.
> I'm using this example from the documentation:

...

>    $ python teg1.py
> 
> Python complains that it can't import twisted.web:
...
> I've previously installed Twisted by running:
> 
>    $ python setup.py install
> 
> which I thought would install all the modules and put them correctly
> in the PYTHONPATH (tell me if this isn't true).

It doesn't actually modify PYTHONPATH, it (hopefully) puts Twisted in a 
directory that's already in sys.path.

Which version of python did you run setup.py? Ensure 
/usr/lib/pythonX.X/site-packages/twisted exists. Make sure you're 
running your script with the same version.

> Am I doing somethnig wrong? I feel I have missed something fundamental, but
> don't know what. Should I rename my file to <teg1.rpy> or something? Do I
> need to run at the command-line ``mktap'' instead of ``python''?

No, the way you're doing it is fine.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040220/566e3f48/attachment.pgp 

From michal at pasternak.w.lub.pl  Fri Feb 20 05:25:50 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 20 Feb 2004 11:25:50 +0100
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
Message-ID: <20040220102550.GB49534@pasternak.w.lub.pl>

Phil Hunt [Fri, Feb 20, 2004 at 09:48:32AM +0000]:
> from twisted.web import server, resource
[...]
>    Traceback (most recent call last):
>      File "teg1.py", line 3, in ?
>        from twisted.web import server, resource
>    ImportError: No module named twisted.web
> 
> I've previously installed Twisted by running:
> 
>    $ python setup.py install

Perhaps you should try to reinstall Twisted, or check how the above line
("from twisted.web ...") works in the interactive mode.



From fuka at fuxoft.cz  Fri Feb 20 05:40:09 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 11:40:09 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <20040220102550.GB49534@pasternak.w.lub.pl>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl>
Message-ID: <4035E409.2090708@fuxoft.cz>

What exactly is the difference between running "python setup.py" and 
just copying the twisted/ directory to site-packages/ directory? I tried 
installing Twisted on old server which has Python 2.2 - the first method 
didn't work, the second did.

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From michal at pasternak.w.lub.pl  Fri Feb 20 05:57:05 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 20 Feb 2004 11:57:05 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <4035E409.2090708@fuxoft.cz>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl> <4035E409.2090708@fuxoft.cz>
Message-ID: <20040220105705.GA50747@pasternak.w.lub.pl>

Frantisek Fuka [Fri, Feb 20, 2004 at 11:40:09AM +0100]:
> What exactly is the difference between running "python setup.py" and 
> just copying the twisted/ directory to site-packages/ directory? I tried 
> installing Twisted on old server which has Python 2.2 - the first method 
> didn't work, the second did.

What exactly didn't work in the first method?

About setup.py, read at http://python.org/doc/2.3.3/lib/module-distutils.html



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 06:04:06 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 11:04:06 +0000
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <20040220100658.GA768@frobozz>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220100658.GA768@frobozz>
Message-ID: <200402201104.06786.phil.hunt@tech.mrc.ac.uk>

On Friday 20 Feb 2004 10:06 am, Andrew Bennetts wrote:
> On Fri, Feb 20, 2004 at 09:48:32AM +0000, Phil Hunt wrote:
> > I'm trying to set up a (very simple) web server using Twisted.
> > Python complains that it can't import twisted.web:
> >
> >    Traceback (most recent call last):
> >      File "teg1.py", line 3, in ?
> >        from twisted.web import server, resource
> >    ImportError: No module named twisted.web
> >
> > I've previously installed Twisted by running:
> >
> >    $ python setup.py install
> >
> > which I thought would install all the modules and put them correctly
> > in the PYTHONPATH (tell me if this isn't true).
>
> It should... what platform are you on?

Python 2.3.3 on Mandrake 9.1.

On further inspection, it appears the situation is more complicated.
When logged in as phunt, I'm running Python 2.3.3 located at 
/opt/local/bin/python 

When running as root I'm running Python 2.2.2 located at /usr/bin/python

I ran setup.py as root (because phunt didn't have the right priviledges).

(Unfortunately I didn't install this box -- lots of stuff is in non-standard
places).

It appears that <setup.py> has set it up in locations appropriate to root.
I've tested this by running <teg1.py> as root and... guess what, it works;
when I point my webserver at <http://localhost:8080/> I get the "Hello 
World" message. 

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From fuka at fuxoft.cz  Fri Feb 20 06:25:38 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 12:25:38 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <20040220105705.GA50747@pasternak.w.lub.pl>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl> <4035E409.2090708@fuxoft.cz> <20040220105705.GA50747@pasternak.w.lub.pl>
Message-ID: <4035EEB2.2010606@fuxoft.cz>

Michal Pasternak wrote:
> Frantisek Fuka [Fri, Feb 20, 2004 at 11:40:09AM +0100]:
> 
>>What exactly is the difference between running "python setup.py" and 
>>just copying the twisted/ directory to site-packages/ directory? I tried 
>>installing Twisted on old server which has Python 2.2 - the first method 
>>didn't work, the second did.
> 
> 
> What exactly didn't work in the first method?

It halted on exception about some directory not found. Because the 
directory name contained some variation of "python2.3" string, I 
presumed that the problem is with the server only having python2.2 
installed.

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From michal at pasternak.w.lub.pl  Fri Feb 20 06:47:06 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 20 Feb 2004 12:47:06 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <4035EEB2.2010606@fuxoft.cz>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl> <4035E409.2090708@fuxoft.cz> <20040220105705.GA50747@pasternak.w.lub.pl> <4035EEB2.2010606@fuxoft.cz>
Message-ID: <20040220114706.GA51194@pasternak.w.lub.pl>

Frantisek Fuka [Fri, Feb 20, 2004 at 12:25:38PM +0100]:
> Michal Pasternak wrote:
> >Frantisek Fuka [Fri, Feb 20, 2004 at 11:40:09AM +0100]:
> >
> >>What exactly is the difference between running "python setup.py" and 
> >>just copying the twisted/ directory to site-packages/ directory? I tried 
> >>installing Twisted on old server which has Python 2.2 - the first method 
> >>didn't work, the second did.
> >
> >
> >What exactly didn't work in the first method?
> 
> It halted on exception about some directory not found. Because the 
> directory name contained some variation of "python2.3" string, I 
> presumed that the problem is with the server only having python2.2 
> installed.

Distutils are a part of Python distribution. When you run interpreter and
"import distutils", they already know, what version of Py you are running,
so if you ran Python 2.2, missing 2.3 is not a real problem.

You didn't provide exact error message, which would of course help to
identify the problem; using my telepathic powers, I bet you're running
Debian without the package for distutils installed. AFAIR, it is included in
pythonX.X-dev.



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 07:02:02 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 12:02:02 +0000
Subject: [Twisted-Python] More problems running examples
Message-ID: <200402201202.02566.phil.hunt@tech.mrc.ac.uk>

OK, I've now been able to get the very simplest webserver running.
I'm trying something slightly more complex, based on the next example
in <Twisted-1.1.1/doc/howto/using-twistedweb.html>.

The Hello class given in the exmaple is not a full program:

#####################################################################
# teg3.py

from twisted.web.resource import Resource

class Hello(Resource):
    def getChild(self, name, request):
        if name == '':
            return self
        return Resource.getChild(
            self, name, request)

        def render(self, request):
            return """<html>
      Hello, world! I am located at %r.
    </html>"""               % (request.prepath) 

resource = Hello()
#####################################################################

When I run this it exits immediately; I assume this is intentional.

I built on the previous example to produce a full program; my code is:

#####################################################################
# teg2.py

from twisted.web import server, resource
from twisted.internet import reactor
from twisted.web.resource import Resource

class Hello(resource.Resource):

   def getChild(self, name, request):
      if name == '':
         result = self
      else:   
         result = Resource.getChild(self, name, request)
      print "in Hello:getChild, result=%r" % (result,)
      return result

   def render(self, request):
      s = """<html>
      Hello, world! I am located at %r.
      </html>""" % (request.prepath) 
      return s

print "===== Running teg2.py (simple webserver) ====="
res = Hello()

site = server.Site(res)
reactor.listenTCP(8011, site)
reactor.run()
#####################################################################


Now, this does actually run, however whenever I point my webserver at it,
all that comes back is a 404 error with the text:

   No Such Resource
   No such child resource.

And my program writes to stdout:

   in Hello:getChild, result=<twisted.web.error.NoResource instance at
   0x406adb0c>

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From joeh at dai.ed.ac.uk  Fri Feb 20 07:41:12 2004
From: joeh at dai.ed.ac.uk (Joe Halliwell)
Date: Fri, 20 Feb 2004 12:41:12 +0000
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <200402201202.02566.phil.hunt@tech.mrc.ac.uk>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk>
Message-ID: <1077280872.11912.2.camel@avant-retard>

The code is fine, so I wonder what URL you're pointing the browser at.
Tried http://127.0.0.1:8011/ ? Anything else will produce a resource
error since res has no child resources.

Cheers,
Joe

> #####################################################################
> # teg2.py
> 
> from twisted.web import server, resource
> from twisted.internet import reactor
> from twisted.web.resource import Resource
> 
> class Hello(resource.Resource):
> 
>    def getChild(self, name, request):
>       if name == '':
>          result = self
>       else:   
>          result = Resource.getChild(self, name, request)
>       print "in Hello:getChild, result=%r" % (result,)
>       return result
> 
>    def render(self, request):
>       s = """<html>
>       Hello, world! I am located at %r.
>       </html>""" % (request.prepath) 
>       return s
> 
> print "===== Running teg2.py (simple webserver) ====="
> res = Hello()
> 
> site = server.Site(res)
> reactor.listenTCP(8011, site)
> reactor.run()
> #####################################################################
> 
> 
> Now, this does actually run, however whenever I point my webserver at it,
> all that comes back is a 404 error with the text:
> 
>    No Such Resource
>    No such child resource.
> 
> And my program writes to stdout:
> 
>    in Hello:getChild, result=<twisted.web.error.NoResource instance at
>    0x406adb0c>
> 
> -- 
> Phil Hunt, phil.hunt at tech.mrc.ac.uk
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040220/c3e1a5b4/attachment.pgp 

From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 08:25:51 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 13:25:51 +0000
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <1077280872.11912.2.camel@avant-retard>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk> <1077280872.11912.2.camel@avant-retard>
Message-ID: <200402201325.51806.phil.hunt@tech.mrc.ac.uk>

On Friday 20 Feb 2004 12:41 pm, Joe Halliwell wrote:
> The code is fine, so I wonder what URL you're pointing the browser at.
> Tried http://127.0.0.1:8011/ ? Anything else will produce a resource
> error since res has no child resources.

Yes, it works for http://127.0.0.1:8011/, but as you say, when I use any other
URL such as http://127.0.0.1:8011/this/is/a/path/ it doesn't work.

What I want to know is how do I make it work with other URLs, and how do I
get it to bring up dynamically-produced web pages. Is this what .rpy files
are for? IOW, is an .rpy file the equivalent of a .php file in that it contains
code for writing one specific web page?

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 08:27:59 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 13:27:59 +0000
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk> <1077280872.11912.2.camel@avant-retard> <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
Message-ID: <200402201327.59899.phil.hunt@tech.mrc.ac.uk>

On Friday 20 Feb 2004 1:25 pm, Phil Hunt wrote:
> On Friday 20 Feb 2004 12:41 pm, Joe Halliwell wrote:
> > The code is fine, so I wonder what URL you're pointing the browser at.
> > Tried http://127.0.0.1:8011/ ? Anything else will produce a resource
> > error since res has no child resources.
>
> Yes, it works for http://127.0.0.1:8011/, but as you say, when I use any
> other URL such as http://127.0.0.1:8011/this/is/a/path/ it doesn't work.
>
> What I want to know is how do I make it work with other URLs, and how do I
> get it to bring up dynamically-produced web pages. Is this what .rpy files
> are for? IOW, is an .rpy file the equivalent of a .php file in that it
> contains code for writing one specific web page?

Furthermore, do I want to start my webserver by running python, twistd
or mktap; and why?

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From mary-twisted at puzzling.org  Fri Feb 20 09:15:12 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sat, 21 Feb 2004 01:15:12 +1100
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk> <1077280872.11912.2.camel@avant-retard> <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
Message-ID: <20040220141512.GA18810@titus.home.puzzling.org>

On Fri, Feb 20, 2004, Phil Hunt wrote:
> What I want to know is how do I make it work with other URLs, and how do I
> get it to bring up dynamically-produced web pages. Is this what .rpy files
> are for? IOW, is an .rpy file the equivalent of a .php file in that it contains
> code for writing one specific web page?

These questions should be asked on the twisted-web mailing list:
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

-Mary



From maoy at cis.upenn.edu  Fri Feb 20 10:24:51 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Fri, 20 Feb 2004 10:24:51 -0500 (EST)
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <20040220114706.GA51194@pasternak.w.lub.pl>
Message-ID: <Pine.LNX.4.44.0402201023230.24963-100000@klondike.cis.upenn.edu>

I encountered the similar problem before with rpm-based distribution. Just 
grab the python-devel-xxx.rpm and install.

HTH
-- 
Yun


> 
> You didn't provide exact error message, which would of course help to
> identify the problem; using my telepathic powers, I bet you're running
> Debian without the package for distutils installed. AFAIR, it is included in
> pythonX.X-dev.
> 




From fuka at fuxoft.cz  Fri Feb 20 10:30:49 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 16:30:49 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <Pine.LNX.4.44.0402201023230.24963-100000@klondike.cis.upenn.edu>
References: <Pine.LNX.4.44.0402201023230.24963-100000@klondike.cis.upenn.edu>
Message-ID: <40362829.2040600@fuxoft.cz>

Yun Mao wrote:

> I encountered the similar problem before with rpm-based distribution. Just 
> grab the python-devel-xxx.rpm and install.

Thanks. But the current question is: I already "installed" twisted by 
simply copying the twisted/ subdirectory into site-packages/ and 
everything seems to run OK. "If it ain't broke..."

Or is it broken?

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From maoy at cis.upenn.edu  Fri Feb 20 13:30:34 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Fri, 20 Feb 2004 13:30:34 -0500 (EST)
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <40362829.2040600@fuxoft.cz>
Message-ID: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu>

I guess the pure python part (which is almost the whole part?) would be 
fine. However, you probably do not have those handy script installed in 
the $PATH, such as twistd, mktap, etc.

-- 
Yun


On Fri, 20 Feb 2004, Frantisek Fuka wrote:

> Yun Mao wrote:
> 
> > I encountered the similar problem before with rpm-based distribution. Just 
> > grab the python-devel-xxx.rpm and install.
> 
> Thanks. But the current question is: I already "installed" twisted by 
> simply copying the twisted/ subdirectory into site-packages/ and 
> everything seems to run OK. "If it ain't broke..."
> 
> Or is it broken?
> 
> 




From fuka at fuxoft.cz  Fri Feb 20 13:55:00 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 19:55:00 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu>
References: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu>
Message-ID: <40365804.80104@fuxoft.cz>

Yun Mao wrote:
> I guess the pure python part (which is almost the whole part?) would be 
> fine. However, you probably do not have those handy script installed in 
> the $PATH, such as twistd, mktap, etc.

That's not a problem, I am just importing Twisted modules into my Python 
application.

Am I correct in thinking that if I installed it "correctly" (using 
setup.py), Twisted would compile some binaries and then be faster/more 
stable etc...?

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From radix at twistedmatrix.com  Fri Feb 20 15:02:03 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 20 Feb 2004 15:02:03 -0500
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <40365804.80104@fuxoft.cz>
References: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu> <40365804.80104@fuxoft.cz>
Message-ID: <403667BB.5030207@twistedmatrix.com>

Frantisek Fuka wrote:
> Yun Mao wrote:
> 
>> I guess the pure python part (which is almost the whole part?) would 
>> be fine. However, you probably do not have those handy script 
>> installed in the $PATH, such as twistd, mktap, etc.
> 
> 
> That's not a problem, I am just importing Twisted modules into my Python 
> application.
> 
> Am I correct in thinking that if I installed it "correctly" (using 
> setup.py), Twisted would compile some binaries and then be faster/more 
> stable etc...?

There are a number of optional C extensions. So, perhaps, depending on 
what parts you're using, it could be faster. They're written in C, 
though, so generally I would assume that the potential for *in*stability 
is higher when you use them, but that's not a comment about any of our C 
extensions specifically. ;-)

So, you get C extensions and bin scripts in $prefix when you use 
setup.py. Nothing critical.

However! Before you forget this topic: you said you had a problem with 
running setup.py, so a real bug report would be very much appreciated.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040220/d52528d0/attachment.pgp 

From fuka at fuxoft.cz  Fri Feb 20 15:35:28 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 21:35:28 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <403667BB.5030207@twistedmatrix.com>
References: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu> <40365804.80104@fuxoft.cz> <403667BB.5030207@twistedmatrix.com>
Message-ID: <40366F90.2060909@fuxoft.cz>

Christopher Armstrong wrote:
> However! Before you forget this topic: you said you had a problem with 
> running setup.py, so a real bug report would be very much appreciated.

I must say the offending server is in VERY bad shape installation-wise 
and I plan to completely re-install it when my application is ready to 
deploy. There are missing libraries, partly-installed packages etc... I 
"inherited" this server, everything was installed by someone else and I 
must confess I am not very much of Linux guru.

Because of this, it's perfectly feasible that it wasn't Twisted's error 
and even in the case it was, I am not brave enough to try to re-install 
twisted now, when I have it running and I can test the application I am 
developing...

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From alfred_salton at hotmail.com  Mon Feb 23 00:03:09 2004
From: alfred_salton at hotmail.com (Alfred Salton)
Date: Sun, 22 Feb 2004 22:03:09 -0700
Subject: [Twisted-Python] Installation assistance needed
Message-ID: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>

Can anyone point me to instructions for installation on RedHat 9? I 
can't find any real installation instructions. What am I supposed to do 
with a 'spec' file? Does an rpm package exist somewhere? I feel 
defeated before I've started.

Alfred
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2379 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040222/320b195f/attachment.bin 

From frank at rollingegg.net  Tue Feb 17 08:08:04 2004
From: frank at rollingegg.net (Frankie Chu)
Date: Tue, 17 Feb 2004 21:08:04 +0800
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <20040217022101.1298.19192.Mailman@twistedmatrix.com>
References: <20040217022101.1298.19192.Mailman@twistedmatrix.com>
Message-ID: <523E314C-614A-11D8-9350-0003938E77E2@rollingegg.net>

On 17 Feb 04, at 10:21 AM, twisted-python-request at twistedmatrix.com 
wrote:

> Message: 1
> Date: Mon, 16 Feb 2004 10:03:37 -0500
> To: twisted-python at twistedmatrix.com
> From: "David A. Leedom" <daleedom at hightowergroup.com>
> Subject: [Twisted-Python] Backup Agent
> Reply-To: twisted-python at twistedmatrix.com
>
> --=====================_580045343==.ALT
> Content-Type: text/plain; charset="us-ascii"; format=flowed
>
> OK Guys I Need your help.
>
> I own a small computer consulting firm and am struggling with the basic
> sales and marketing issues.  However, I think I have finally stumbled 
> onto
> a great "no brainer" idea:
>
>          A Remote Backup Service for Small businesses.
>
> Yes I know there are a bunch out their, but I am thinking of the 
> Hundreds
> of Businesses around my general geographic area who don't know how to 
> find
> them and who don't backup their data.  I would charge a monthly fee 
> for a
> given amount of space used ( no more than 500 Meg) and provide a 
> software
> that would backup and restore their data.
>
> My dilemma is that my margins would be to small to make it affordable 
> for
> me to resale someone else's software.  So....I would like to roll my
> own.  Python makes a lot of sense for many reasons that I don't need 
> to get
> into here.
>
> My struggle is that although I have been programming since the 
> mid-70s, I
> am new to Python and feel like a man groping around in the dark.  Also
> being new to Twisted it is like the room is full of chairs as well.  I 
> did
> get some sample code to work over the weekend, but I got a serious 
> brain
> cramp trying to figure it all out.
>
> The basic architecture that I am thinking of is client/server.  There 
> would
> be three basic applications running to make things work.  First, would 
> be
> an Agent program that does most of the work.  The Agent would run as a
> service on each computer being backed up.  Second would be a GUI 
> program
> running locally to control the agents.  Finally there would be a "Web
> Service" that received backup sets from each agent or a designated 
> master
> agent. The Web Service would handle authentication and other house 
> keeping
> things.
>
> Finally the Question!!!!
> There are many other details that I have in mind as well (using 
> patches to
> reduce size, compression, encryption...), but right now I am working on
> issues related to the communication between the GUI and Agents.  
> Assuming
> that I have one or more number of agents running on a network I want 
> to do
> a number of things.  1)  Have the GUI request that the agents identify
> themselves so I don't have to tell the GUI where they are.  2) 
> Transmit a
> catalog list of the file system to the GUI so I can build a TreeView 
> and
> pick which files to backup on each computer.  3)  Finally I may want to
> identify a "Master" agent that collects all the backups on the network 
> and
> transmits them as one session to the Web Service. This would allow for
> local "On Site" backups for fast restores due to normal computer 
> crashes
> and failures.
>
> 1.      What would you guys suggest I do to I get the GUI to ask all 
> the
> agents to identify themselves?
> 2.      What would be the best approach using twisted to transmit a 
> file
> system catalog across the local wire.  I was playing with some remote
> procedure calls over the weekend that seemed to work.  I am thinking I
> could create a class that would gather the local file system and send 
> it
> over the wire as one lump.
> 3.      If I am going to transmit a backup file (<500meg) over the 
> wire to
> another local computer what is the best Twisted approach to take?  Due 
> to
> WinXP security issues and the desire the run in a cross platform
> environment I don't want to rely on normal file shares.
>
> There are a hundred other questions running though my mind right now, 
> but
> this will due for now,
>
>
> Thanks for any help you can give,
>
> David A. Leedom
>
>
>
>
> The Hightower Group, Inc.
> Custom Software Solutions Designed To Fit Your Business Like A Glove.
> 165 West Airport Road/Lititz, PA 17543
> V:717-560-4002, 877-560-4002 x: 114
> F:717-560-2825
> www.hightowergroup.com
> --=====================_580045343==.ALT
> Content-Type: text/html; charset="us-ascii"
>
> <html>
> <body>
> OK Guys I Need your help.<br><br>
> I own a small computer consulting firm and am struggling with the basic
> sales and marketing issues.&nbsp; However, I think I have finally
> stumbled onto a great &quot;no brainer&quot; idea:&nbsp; <br><br>
> <x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>A Remote
> Backup Service for Small businesses.&nbsp; <br><br>
> Yes I know there are a bunch out their, but I am thinking of the 
> Hundreds
> of Businesses around my general geographic area who don't know how to
> find them and who don't backup their data.&nbsp; I would charge a 
> monthly
> fee for a given amount of space used ( no more than 500 Meg) and 
> provide
> a software that would backup and restore their data.<br><br>
> My dilemma is that my margins would be to small to make it affordable 
> for
> me to resale someone else's software.&nbsp; So....I would like to roll 
> my
> own.&nbsp; Python makes a lot of sense for many reasons that I don't 
> need
> to get into here.<br><br>
> My struggle is that although I have been programming since the 
> mid-70s, I
> am new to Python and feel like a man groping around in the dark.&nbsp;
> Also being new to Twisted it is like the room is full of chairs as
> well.&nbsp; I did get some sample code to work over the weekend, but I
> got a serious brain cramp trying to figure it all out.<br><br>
> The basic architecture that I am thinking of is client/server.&nbsp;
> There would be three basic applications running to make things
> work.&nbsp; First, would be an Agent program that does most of the
> work.&nbsp; The Agent would run as a service on each computer being
> backed up.&nbsp; Second would be a GUI program running locally to 
> control
> the agents.&nbsp; Finally there would be a &quot;Web Service&quot; that
> received backup sets from each agent or a designated master agent. The
> Web Service would handle authentication and other house keeping
> things.<br><br>
> <b>Finally the Question!!!!<br>
> </b>There are many other details that I have in mind as well (using
> patches to reduce size, compression, encryption...), but right now I am
> working on issues related to the communication between the GUI and
> Agents.&nbsp; Assuming that I have one or more number of agents running
> on a network I want to do a number of things.&nbsp; 1)&nbsp; Have the 
> GUI
> request that the agents identify themselves so I don't have to tell the
> GUI where they are.&nbsp; 2) Transmit a catalog list of the file system
> to the GUI so I can build a TreeView and pick which files to backup on
> each computer.&nbsp; 3)&nbsp; Finally I may want to identify a
> &quot;Master&quot; agent that collects all the backups on the network 
> and
> transmits them as one session to the Web Service. This would allow for
> local &quot;On Site&quot; backups for fast restores due to normal
> computer crashes and failures.&nbsp; <br><br>
> 1.<x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>What would you 
> guys
> suggest I do to I get the GUI to ask all the agents to identify
> themselves?<br>
> 2.<x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>What would be the
> best approach using twisted to transmit a file system catalog across 
> the
> local wire.&nbsp; I was playing with some remote procedure calls over 
> the
> weekend that seemed to work.&nbsp; I am thinking I could create a class
> that would gather the local file system and send it over the wire as 
> one
> lump. <br>
> 3.<x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>If I am going to
> transmit a backup file (&lt;500meg) over the wire to another local
> computer what is the best Twisted approach to take?&nbsp; Due to WinXP
> security issues and the desire the run in a cross platform environment 
> I
> don't want to rely on normal file shares.<br><br>
> There are a hundred other questions running though my mind right now, 
> but
> this will due for now,<br><br>
> <br>
> Thanks for any help you can give,<br><br>
> David A. Leedom<br><br>
> <br><br>
> <x-sigsep><p></x-sigsep>
> The Hightower Group, Inc.<br>
> Custom Software Solutions Designed To Fit Your Business Like A
> Glove.<br>
> 165 West Airport Road/Lititz, PA 17543<br>
> V:717-560-4002, 877-560-4002 x: 114<br>
> F:717-560-2825<br>
> <a href="http://www.hightowergroup.com/" 
> eudora="autourl">www.hightowergroup.com</a>
> </body>
> </html>
>
> --=====================_580045343==.ALT--
>
>
>
> --__--__--
>
> Message: 2
> Date: Mon, 16 Feb 2004 18:23:03 +0100
> From: Michal Pasternak <michal at pasternak.w.lub.pl>
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] Backup Agent
> Reply-To: twisted-python at twistedmatrix.com
>
> David A. Leedom [Mon, Feb 16, 2004 at 10:03:37AM -0500]:
>> 1.      What would you guys suggest I do to I get the GUI to ask all 
>> the
>> agents to identify themselves?
>
> Well, that's a good question. In some app I did, I used machine's IP 
> address
> + some operating system info it run (sys.platform, os.uname) to build 
> a kind
> of machine identifier. You could as well generate some UID, then save 
> it,
> then send it together with machine's IP to identify it on server, by 
> hand.
>
> Using OS-specific procedures could help you with this.
>
>> 2.      What would be the best approach using twisted to transmit a 
>> file
>> system catalog across the local wire.  I was playing with some remote
>> procedure calls over the weekend that seemed to work.  I am thinking I
>> could create a class that would gather the local file system and send 
>> it
>> over the wire as one lump.
>
> Remote procedures have limit of 640 KB for their parameters (because 
> "640 KB
> should be enough to anyone"). You should use Pager and Collector.
>
>> 3.      If I am going to transmit a backup file (<500meg) over the 
>> wire to
>> another local computer what is the best Twisted approach to take?
>
> See above. Also, please remember, that memory issues matter. If you're
> paging the data (send small chunks), you should save them on the backup
> server, as they are received. If you are transfering a big file, 
> keeping all
> the data received in some buffer is a bad idea.
>
>
> --__--__--
>
> Message: 3
> Date: Mon, 16 Feb 2004 13:00:47 -0800
> To: Twisted <twisted-python at twistedmatrix.com>
> From: stephan <mailinglists at shechen.at>
> Subject: [Twisted-Python] p2p, gnutella
> Reply-To: twisted-python at twistedmatrix.com
>
>
>
> I am looking forward to add p2p functionality to my app. Does anybody 
> know
> what the current status of twisted's gnutella implementation is?
>
> There seems to have been a semi-finished implemention in 1.0.2alpha4 
> which
> I can't find in 1.1.1 anymore.
>
> I might also be willing to implement missing parts but I would need to 
> get
> a short briefing on how things are.
>
> thanks,
>
> _stephan
>
>
> --__--__--
>
> Message: 4
> Date: Mon, 16 Feb 2004 18:13:13 -0500
> To: peak at eby-sarna.com
> From: "Phillip J. Eby" <pje at telecommunity.com>
> Cc: zope3-dev at zope.org, twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] PEAK 0.5a3 released
> Reply-To: twisted-python at twistedmatrix.com
>
> After several months of feature creep, the third alpha release of PEAK 
> 0.5
> is now available for download at:
>
>     http://peak.telecommunity.com/dist/
>
> Some highlights of the changes since 0.5a2 include:
>
> * A simplified and consolidated binding API: there are now only four 
> kinds
> of bindings (Make, Obtain, Require, and Delegate) that provide a wider
> variety of functionality than the old API.  You can also now create 
> your
> own IRecipe or IComponentKey implementations for use with Make and 
> Obtain.
>
> * The 'n2' (namespace navigator) tool provides a handy, extensible 
> shell
> (with completion and history) for exploring PEAK naming systems and SQL
> connections.
>
> * A greatly enhanced configuration file parser, with lots of new
> convenience features such as [Import on Demand], [Named Services], and
> [Component Factories] sections, based on its new extensible parsing
> framework.  You can define new section types of your own, even from 
> inside
> an .ini file.
>
> * New configuration key features, such as multi-keys (similar to some 
> of
> Zope X3's "adaptergeddon" features), the ability to iterate over 
> defined
> keys in a hierarchy (useful for finding/registering various kinds of
> "plugins"), new convenience features for defining wildcard property 
> rules,
>
> * A new 'peak.events' framework that supports event sources, listeners,
> subscriptions, generator-based pseudothreads ("tasks"), scheduling, 
> and I/O
> events.  Using 'peak.events', you can write event-driven code in a more
> natural, sequential, "untwisted" style, but without giving up access to
> Twisted's many great features.  'peak.events' can use PEAK's built-in 
> event
> loop, or adapt a Twisted reactor for use as an event loop.  You can 
> also
> use Twisted's "Deferred" objects as event sources, which means you can 
> use
> them in your Tasks (pseudothreads).
>
> * A new 'peak.ddt' "document-driven testing" framework, similar in 
> form and
> function to the FIT ( http://fit.c2.com/ ) framework, but in Python and
> well-integrated with the rest of PEAK.  'peak.ddt' lets you write test 
> data
> as tables in HTML documents (created with Word, Open Office, Mozilla, 
> or
> virtually any other tool), and then view the results in your
> browser.  Correct results are highlighted in green, incorrect answers 
> are
> highlighted in red, and errors are highlighted in yellow, with a 
> small-font
> traceback added to the table cell.  It's a great way to do data-driven
> acceptance testing, or to manage a project's progress using example 
> data as
> part of a requirements document.
>
> * Many, many more features, both large and small, like a pre-forking
> multiprocess supervisor for FastCGI and other forking servers.  Quick
> access to documentation via the 'peak help' command, which uses pydoc 
> to
> display reference documentation.  Early versions of the 'peak.security'
> (access control), 'peak.web' (Zope X3-based web publishing), and
> 'peak.query' (declarative relational and conceptual queries w/SQL
> generation) packages.  The 'whenImported()' function that lets you 
> call a
> hook when a named module is first used.  "Mock" DBAPI and socket
> implementations for testing.  Hooks for "thunking" database-specific 
> SQL
> and functions.  And many, many more examples of unbelievably blatant
> feature creep!
>
> There is also now a nice "Hello World" introduction to PEAK available 
> at:
>
> http://peak.telecommunity.com/DevCenter/IntroToPeak
>
> that presents a guided tour of some of PEAK's "vertical" frameworks, 
> like
> command-line application support, database access, and so on.
>
> For more information about PEAK, and access to community resources
> including documentation, the Wiki, mailing list archives, IRC channel 
> logs,
> CVS access, and more, please visit:
>
> http://peak.telecommunity.com/
>
>
>
> --__--__--
>
> Message: 5
> To: twisted-python at twistedmatrix.com
> From: ralf at brainbot.com
> Date: Tue, 17 Feb 2004 02:05:41 +0100
> Subject: [Twisted-Python] [PATCH] nasty bug in 
> twisted.names.client.createResolver
> Reply-To: twisted-python at twistedmatrix.com
>
> The parameter variable 'hosts' gets overwritten by the import statement
> in createResolver. hosts.Resolver constructor is called with a module
> instead of a filename.
>
> - Ralf
>
> ===================================================================
> RCS file: /cvs/Twisted/twisted/names/client.py,v
> retrieving revision 1.45
> diff -u -r1.45 client.py
> --- twisted/names/client.py     4 Feb 2004 19:55:34 -0000       1.45
> +++ twisted/names/client.py     17 Feb 2004 01:01:53 -0000
> @@ -303,20 +303,20 @@
>          return p
>
>
> -def createResolver(servers = None, resolvconf = None, hosts = None):
> +def createResolver(servers = None, resolvconf = None, hostsfile = 
> None):
>      import resolve, cache, hosts, root
>      if platform.getType() == 'posix':
>          if resolvconf is None:
>              resolvconf = '/etc/resolv.conf'
> -        if hosts is None:
> -            hosts = '/etc/hosts'
> +        if hostsfile is None:
> +            hostsfile = '/etc/hosts'
>          theResolver = Resolver(resolvconf, servers)
> -        hostResolver = hosts.Resolver(hosts)
> +        hostResolver = hosts.Resolver(hostsfile)
>      else:
> -        if hosts is None:
> -            hosts = r'c:\windows\hosts'
> +        if hostsfile is None:
> +            hostsfile = r'c:\windows\hosts'
>          bootstrap = ThreadedResolver()
> -        hostResolver = hosts.Resolver(hosts)
> +        hostResolver = hosts.Resolver(hostsfile)
>          theResolver = root.bootstrap(bootstrap)
>
>      L = [hostResolver, cache.CacheResolver(), theResolver]
>
> -- 
> brainbot technologies ag
> boppstrasse 64 . 55118 mainz . germany
> fon +49 6131 211639-1 . fax +49 6131 211639-2
> http://brainbot.com/  mailto:ralf at brainbot.com
>
>
> --__--__--
>
> Message: 6
> Subject: Re: [Twisted-Python] [PATCH] nasty bug in
> 	twisted.names.client.createResolver
> From: Itamar Shtull-Trauring <itamar at itamarst.org>
> To: twisted-python at twistedmatrix.com
> Organization: http://itamarst.org
> Date: Mon, 16 Feb 2004 20:33:55 -0500
> Reply-To: twisted-python at twistedmatrix.com
>
> On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
>> The parameter variable 'hosts' gets overwritten by the import 
>> statement
>> in createResolver. hosts.Resolver constructor is called with a module
>> instead of a filename.
>
> Please add patches and bugs to twistedmatrix.com/bugs/
>
>
>
> --__--__--
>
> Message: 7
> Subject: Re: [Twisted-Python] Advice on doing thousands of 
> simultaneous UDP
> 	queries with Twisted...
> From: Itamar Shtull-Trauring <itamar at itamarst.org>
> To: twisted-python at twistedmatrix.com
> Organization: http://itamarst.org
> Date: Mon, 16 Feb 2004 20:40:06 -0500
> Reply-To: twisted-python at twistedmatrix.com
>
> On Mon, 2004-02-09 at 05:51, Mike C. Fletcher wrote:
>
>> Writing a simple asynchronous loop myself (poll on a simple socket, 
>> send
>> message from queue when writable, read one into other queue when
>> readable) allowed for doing a few thousand queries simultaneously), 
>> with
>> only a few dozen dropped messages.  However, with the Twisted 
>> equivalent
>> (UDPTransport with my simple protocol object), I was seeing huge drop
>> rates, so, gathering that Twisted isn't queueing up the UDP requests,
>
> Possibly we need some generic UDP queuing, rather than current system.
> Patches are welcome.
>
> -- 
> Itamar Shtull-Trauring    http://itamarst.org
> Looking for a job: http://itamarst.org/resume.html
>
>
>
> --__--__--
>
> Message: 8
> To: twisted-python at twistedmatrix.com
> From: ralf at brainbot.com
> Date: Tue, 17 Feb 2004 02:47:19 +0100
> Subject: [Twisted-Python] [PATCH] twisted.names.hosts not working 
> correct with getHostByName
> Reply-To: twisted-python at twistedmatrix.com
>
> Even with my prior patch I'm not able to use 
> twisted.names.client.getHostByName.
> Seems like twisted.names.hosts.Resolver calls itself with bad 
> parameters
> and even doesn't use the ip address it extracted from /etc/hosts. Also 
> the return
> value could not be handled by the code in 
> twisted.names.common.extractRecord.
> The following patch seems to solve those problems.
>
> - Ralf
>
>
>
>
> ===================================================================
> RCS file: /cvs/Twisted/twisted/names/hosts.py,v
> retrieving revision 1.14
> diff -u -r1.14 hosts.py
> --- twisted/names/hosts.py      19 Jul 2003 10:13:50 -0000      1.14
> +++ twisted/names/hosts.py      17 Feb 2004 01:45:44 -0000
> @@ -49,11 +49,11 @@
>
>
>      def query(self, query, timeout = None):
> -        return self._lookup(str(query.name), query.type, query.type, 
> timeout)
> +        return self._lookup(str(query.name), query.cls, query.type, 
> timeout)
>
>
>      def _lookup(self, name, cls, type, timeout):
> -        if cls != dns.IN or type != dns.A:
> +        if cls != dns.IN or (type != dns.A and type != 
> dns.ALL_RECORDS): # getHostByName passes type==dns.ALL_RECORDS. what 
> else do we need here?
>              return 
> defer.fail(failure.Failure(NotImplementedError(type, cls)))
>          return self.lookupAddress(
>              name, timeout
> @@ -64,7 +64,7 @@
>          res = searchFileFor(self.file, name)
>          if res:
>              return defer.succeed([
> -                [dns.RRHeader(name, dns.A, dns.IN, self.ttl)], (), ()
> +                [dns.RRHeader(name, dns.A, dns.IN, self.ttl, 
> dns.Record_A(res, self.ttl))], [], []
>              ])
>          return defer.fail(failure.Failure(dns.DomainError(name)))
>
> -- 
> brainbot technologies ag
> boppstrasse 64 . 55118 mainz . germany
> fon +49 6131 211639-1 . fax +49 6131 211639-2
> http://brainbot.com/  mailto:ralf at brainbot.com
>
>
> --__--__--
>
> Message: 9
> Date: Mon, 16 Feb 2004 22:47:47 -0300
> From: Daniel Henrique Debonzi <debonzi at gwyddion.com>
> To:  twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] Client Prompt
> Reply-To: twisted-python at twistedmatrix.com
>
> Hi everybody,
>
> Maybe this is a very stupid question, but I realy couldn't find a way 
> to
> solve it by myself.
>
> Would be enough for my aplication if this example works.
>
> So, I want to have a client that read a string from the stdin and then
> send it to the server. Wich changes should I do in this code to this
> client work like a discrebed
>
> #################################################################
> from twisted.internet import reactor, protocol
>
> class EchoClient(protocol.Protocol):
>
>      def connectionMade(self):
> 	"""I don't want to write it here
> 	   I want to take data from stdin and send o server,
> 	   but were and how to do it? Too much dificult?
> 	"""
>          self.transport.write("hello, world!")
>
>      def dataReceived(self, data):
>          print data
>
>      def connectionLost(self, reason):
>          print "connection lost"
>          from twisted.internet import reactor
>          reactor.stop()
>
>
> class EchoFactory(protocol.ClientFactory):
>      protocol = EchoClient
>
>      def clientConnectionFailed(self, connector, reason):
>          print "Connection failed - goodbye!"
>          reactor.stop()
>
>      def clientConnectionLost(self, connector, reason):
>          print "Connection lost - goodbye!"
>          reactor.stop()
>
>
> def main():
>      f = EchoFactory()
>      reactor.connectTCP("localhost", 5555, f)
>      reactor.run()
>
> if __name__ == '__main__':
>      main()
>
> #################################################################
>
> Thanks for all
>
>
>
> -- 
> Daniel Henrique Debonzi  Linux user number 166903
> Gwyddion Embedded Free-Software Development
> www.gwyddion.com
> S?o Carlos, S?o Paulo
> Brazil
>
>
>
> --__--__--
>
> Message: 10
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] [PATCH] nasty bug in
>  twisted.names.client.createResolver
> From: ralf at brainbot.com
> Date: Tue, 17 Feb 2004 03:20:28 +0100
> Reply-To: twisted-python at twistedmatrix.com
>
> Itamar Shtull-Trauring <itamar at itamarst.org> writes:
>
>> On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
>>> The parameter variable 'hosts' gets overwritten by the import 
>>> statement
>>> in createResolver. hosts.Resolver constructor is called with a module
>>> instead of a filename.
>>
>> Please add patches and bugs to twistedmatrix.com/bugs/
>>
>
> Lots of bug reports in the bug tracker have status 'unread'. That's
> not very motivating. Just committing this patch -even if it was wrong-
> would not make things worse, as the original code is definitely
> broken. But, I'll add it to the bugtracker tomorrow.
>
> - Ralf
>
> -- 
> brainbot technologies ag
> boppstrasse 64 . 55118 mainz . germany
> fon +49 6131 211639-1 . fax +49 6131 211639-2
> http://brainbot.com/  mailto:ralf at brainbot.com
>
>
>
> --__--__--
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest




From tv at tv.debian.net  Wed Feb 18 10:00:17 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Wed, 18 Feb 2004 17:00:17 +0200
Subject: [Twisted-Python] Re: [Twisted-web] twisted.internet.error.CannotListenError
In-Reply-To: <20040215225519.GA19840@home.puzzling.org>
References: <20040215224728.26716.qmail@web13705.mail.yahoo.com> <20040215225519.GA19840@home.puzzling.org>
Message-ID: <40337E01.5090109@tv.debian.net>

Mary Gardiner wrote:
>>I'm fairly new to Twisted and trying to get a twisted reactor to work with wxPython.  I'm trying
>>the perspective broker examples, and when I try to do:
>>    def OnFileitems0Menu(self, event):
>>        self.Close(true)
>>        reactor.stop()
>>
>>It shuts down the program fine, but then when I try to run it again I get:
>>
>>twisted.internet.error.CannotListenError: Couldn't listen on any:8800: (10048, 'Address already in
>>use').
>>
>>As an error.  I can manually stop the process and then it will work again, but I don't know how to
>>release the port when I shut down the program.
>>
>>Am I missing something obvious?  A search of the archives hasn't shown me any way out.

You are probably missing the existing (now broken) connections waiting
for timeout, as shown by "netstat -tn".

Shut down the clients cleanly, or just wait for the timeout.



From tv at tv.debian.net  Wed Feb 18 10:02:35 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Wed, 18 Feb 2004 17:02:35 +0200
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
References: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
Message-ID: <40337E8B.6030509@tv.debian.net>

David A. Leedom wrote:
> I own a small computer consulting firm and am struggling with the basic 
> sales and marketing issues.  However, I think I have finally stumbled 
> onto a great "no brainer" idea: 
> 
>         A Remote Backup Service for Small businesses. 

You should probably look at rdiff-backup.



From maoy at cis.upenn.edu  Tue Feb 24 13:01:33 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Tue, 24 Feb 2004 13:01:33 -0500 (EST)
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>
Message-ID: <Pine.LNX.4.44.0402241259270.30333-100000@klondike.cis.upenn.edu>

I suggest you just install it from the source. Just one line command: 
python setup.py install

If you really feel like a rpm is necessary, I built one for twisted 1.1.0 
before, and it's available at

http://dharma.cis.upenn.edu/dist/Twisted-1.1.0-1tummy.i386.rpm


HTH

-- Yun


On Sun, 22 Feb 2004, Alfred Salton wrote:

> Can anyone point me to instructions for installation on RedHat 9? I 
> can't find any real installation instructions. What am I supposed to do 
> with a 'spec' file? Does an rpm package exist somewhere? I feel 
> defeated before I've started.
> 
> Alfred




From nbyoung at thuna.com  Tue Feb 24 15:12:19 2004
From: nbyoung at thuna.com (Norman B. Young)
Date: Tue, 24 Feb 2004 15:12:19 -0500
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>
References: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>
Message-ID: <403BB023.8000408@thuna.com>

You don't need an RPM. Just download the tar ball, unpack it, and follow 
the ./INSTALL directions.

Alfred Salton wrote:
> Can anyone point me to instructions for installation on RedHat 9? I 
> can't find any real installation instructions. What am I supposed to do 
> with a 'spec' file? Does an rpm package exist somewhere? I feel defeated 
> before I've started.
> 
> Alfred




From dekonerding at lbl.gov  Tue Feb 24 15:30:49 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Tue, 24 Feb 2004 12:30:49 -0800
Subject: [Twisted-Python] oddness in gtk reactor compred to wx and plain reactor
Message-ID: <403BB479.9000709@lbl.gov>

Hi,

I have been experience a weird problem with the gtk reactor.  I've got a 
simple test case which seems to reproduce the problem, so I'm checking 
with the mailing list to understand if everything is going on properly.
Here's the test code.  I wasn't sure whether the log. calls are 
thread-safe, but I've noticed the same problem with
Python's logging package.  Using the wxPython or plain reactor seems to 
work as expected: messages from the TestThingy are spewed at about 
0.1/sec, while with gtk, messages only come every 2 seconds if at all.

import time, sys, logging

from twisted.internet import gtk2reactor
gtk2reactor.install()

## from wxPython.wx import *
## from twisted.internet import wxsupport


from twisted.internet import reactor

from twisted.python import threadable
threadable.init()

from twisted.python import log
log.startLogging(sys.stdout)

from twisted.internet import app
from twisted.manhole import telnet
from twisted.application import strports


## For testing with wx reactor
## class myWxApp(wxApp):
##     def OnInit(self):
##         return True


## mywxAppInstance = myWxApp(0)
## wxsupport.install(mywxAppInstance)

class TestThingy:
    def __init__(self):
        log.err("TestThingy created")

    def run(self):
        log.err("TestThingy run")
        for i in range(10):
            log.err("TestThingy message")
            time.sleep(0.1)
        log.err("TestThingy done")
       
       
class ThingyManager:
    def __init__(self):
        log.err("ThingyManager")
       
    def submitThingy(self):
        log.err("ThingyManager submitting")
        f = TestThingy()
        log.err("ThingyManager created")
        reactor.callInThread(f.run)
        log.err("ThingyManager calledInThread")

def timer(*args):
    log.err("Timer: %d" % time.time())
    reactor.callLater(1, timer)

log.err("Starting")
t = ThingyManager()
log.err("Starting timer")
reactor.callLater(0, timer)
log.err("Submitting transfer")
reactor.callLater(3, t.submitThingy)
log.err("Running reactor")
reactor.run()
## for starting the wx reactor
##reactor.run(installSignalHandlers=0)
log.err("Reactor done")





From james at james.id.au  Sun Feb 22 20:06:40 2004
From: james at james.id.au (James Gregory)
Date: Mon, 23 Feb 2004 12:06:40 +1100
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402201104.06786.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
	 <20040220100658.GA768@frobozz>
	 <200402201104.06786.phil.hunt@tech.mrc.ac.uk>
Message-ID: <1077498400.7824.4.camel@rachmaninoff>

On Fri, 2004-02-20 at 22:04, Phil Hunt wrote:
> On Friday 20 Feb 2004 10:06 am, Andrew Bennetts wrote:
> > On Fri, Feb 20, 2004 at 09:48:32AM +0000, Phil Hunt wrote:
> > > I'm trying to set up a (very simple) web server using Twisted.
> > > Python complains that it can't import twisted.web:
> > >
> > >    Traceback (most recent call last):
> > >      File "teg1.py", line 3, in ?
> > >        from twisted.web import server, resource
> > >    ImportError: No module named twisted.web
> > >
> > > I've previously installed Twisted by running:
> > >
> > >    $ python setup.py install
> > >
> > > which I thought would install all the modules and put them correctly
> > > in the PYTHONPATH (tell me if this isn't true).
> >
> > It should... what platform are you on?
> 
> Python 2.3.3 on Mandrake 9.1.

Mandrake 9.1 didn't ship with Python 2.3.3, so you're either running a
version that someone compiled (or otherwise installed covertly), or
you're actually running cooker. In the latter case, there's rpms of
Twisted available to you. Try this:

http://mirror.aarnet.edu.au/pub/mandrake-devel/cooker/i586/Mandrake/RPMS2/python-twisted-1.1.1-1mdk.noarch.rpm

(or a mirror near you).

However, I mirror the sentiments later in this thread about filing a
bug.

HTH,

James.





From david.richardson at axxim.net  Tue Feb 24 15:25:53 2004
From: david.richardson at axxim.net (David Richardson)
Date: Tue, 24 Feb 2004 13:25:53 -0700
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <403BB023.8000408@thuna.com>
References: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com> <403BB023.8000408@thuna.com>
Message-ID: <A4CFD791-6707-11D8-9CF0-0003934ECC9C@axxim.net>

Norman,

The ./INSTALL instructions are for a Debian apt-get installation only, 
unless I missed something. There is a reference to a .spec file, for 
rpm-based systems, but that is all. Sorry, I'm an application 
developer, not a system administrator. This is one area where improved 
documentation is needed. The 'python setup.py install' command is 
obvious, in hindsight, but if widespread adoption is a goal, nothing is 
ever 'obvious'.


On Feb 24, 2004, at 1:12 PM, Norman B. Young wrote:

> You don't need an RPM. Just download the tar ball, unpack it, and 
> follow the ./INSTALL directions.
>
> Alfred Salton wrote:
>> Can anyone point me to instructions for installation on RedHat 9? I 
>> can't find any real installation instructions. What am I supposed to 
>> do with a 'spec' file? Does an rpm package exist somewhere? I feel 
>> defeated before I've started.
>> Alfred
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>




From radix at twistedmatrix.com  Tue Feb 24 16:18:21 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 24 Feb 2004 16:18:21 -0500
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <A4CFD791-6707-11D8-9CF0-0003934ECC9C@axxim.net>
References: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com> <403BB023.8000408@thuna.com> <A4CFD791-6707-11D8-9CF0-0003934ECC9C@axxim.net>
Message-ID: <403BBF9D.9030407@twistedmatrix.com>

David Richardson wrote:
> Norman,
> 
> The ./INSTALL instructions are for a Debian apt-get installation only, 
> unless I missed something.

You did.

> There is a reference to a .spec file, for 
> rpm-based systems, but that is all. Sorry, I'm an application developer, 
> not a system administrator. This is one area where improved 
> documentation is needed. The 'python setup.py install' command is 
> obvious, in hindsight, but if widespread adoption is a goal, nothing is 
> ever 'obvious'.

I've changed the INSTALL file to be more clear. It *did* tell you to use 
setup.py install, but in a confusing context.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040224/00190cf2/attachment.pgp 

From mary-twisted at puzzling.org  Tue Feb 24 19:16:04 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 25 Feb 2004 11:16:04 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <E1AvmS0-0001D8-00@wolfwood>
References: <E1AvmS0-0001D8-00@wolfwood>
Message-ID: <20040225001604.GF27161@titus.home.puzzling.org>

On Tue, Feb 24, 2004, radix CVS wrote:
>  copyright="Copyright (c) 2000-2003 Matthew William Lefkowitz, all rights reserved."

Shouldn't this read 2000-2004 now?

-Mary



From radix at twistedmatrix.com  Tue Feb 24 19:42:46 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 24 Feb 2004 19:42:46 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <20040225001604.GF27161@titus.home.puzzling.org>
References: <E1AvmS0-0001D8-00@wolfwood> <20040225001604.GF27161@titus.home.puzzling.org>
Message-ID: <403BEF86.6030303@twistedmatrix.com>

Mary Gardiner wrote:
> On Tue, Feb 24, 2004, radix CVS wrote:
> 
>> copyright="Copyright (c) 2000-2003 Matthew William Lefkowitz, all rights reserved."
> 
> 
> Shouldn't this read 2000-2004 now?


I think the last time this was brought up, Glyph responded with 
something like, "With the way copyright law is going now, I won't lose 
copyright on this *for a million years*."

iow, it's not that big of a deal: with current copyright law, he still 
retains copyright until 2073, or something like that. :)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040224/0f24b532/attachment.pgp 

From mary-twisted at puzzling.org  Tue Feb 24 19:55:08 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 25 Feb 2004 11:55:08 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <403BEF86.6030303@twistedmatrix.com>
References: <E1AvmS0-0001D8-00@wolfwood> <20040225001604.GF27161@titus.home.puzzling.org> <403BEF86.6030303@twistedmatrix.com>
Message-ID: <20040225005508.GB30984@titus.home.puzzling.org>

On Tue, Feb 24, 2004, Christopher Armstrong wrote:
> Mary Gardiner wrote:
> >On Tue, Feb 24, 2004, radix CVS wrote:
> >
> > > copyright="Copyright (c) 2000-2003 Matthew William Lefkowitz, all
> > > rights reserved."
> >
> >Shouldn't this read 2000-2004 now?
> 
> I think the last time this was brought up, Glyph responded with 
> something like, "With the way copyright law is going now, I won't lose 
> copyright on this *for a million years*."

He and the inheritors of the right to exercise copyright, anyway. Until
the development of twisted.elixir, at least.

> iow, it's not that big of a deal: with current copyright law, he still 
> retains copyright until 2073, or something like that. :)

I thought the countdown was from his death, not from the creation of the
work. Or it will be in Australia anyway...

I wasn't suggesting this for legal reasons, simply for accuracy reasons.

-Mary



From radix at twistedmatrix.com  Tue Feb 24 20:01:32 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 24 Feb 2004 20:01:32 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <20040225005508.GB30984@titus.home.puzzling.org>
References: <E1AvmS0-0001D8-00@wolfwood> <20040225001604.GF27161@titus.home.puzzling.org> <403BEF86.6030303@twistedmatrix.com> <20040225005508.GB30984@titus.home.puzzling.org>
Message-ID: <403BF3EC.3050609@twistedmatrix.com>

Mary Gardiner wrote:
> On Tue, Feb 24, 2004, Christopher Armstrong wrote:
>
>>iow, it's not that big of a deal: with current copyright law, he still 
>>retains copyright until 2073, or something like that. :)
> 
> I thought the countdown was from his death, not from the creation of the
> work.

Uh... yes, of course. Of course. Glyph isn't dead. No siree. He's still 
got a long healthy life ahead of him, at the end of which the copyright 
will start counting down, and that won't be for a long time, 
certainly.... There definitely aren't any robotic imposters around here....

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040224/9c992391/attachment.pgp 

From itamar at itamarst.org  Tue Feb 24 23:03:58 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 24 Feb 2004 23:03:58 -0500
Subject: [Twisted-Python] oddness in gtk reactor compred to wx and
	plain reactor
In-Reply-To: <403BB479.9000709@lbl.gov>
References: <403BB479.9000709@lbl.gov>
Message-ID: <1077681837.791.4.camel@sheriffpony>

Don't do  time.sleep() in the main Twisted thread. This totally blocks
*all* twisted code as twisted is single threaded, making scheduled
events run late, network events not be handled, etc..




From glyph at twistedmatrix.com  Wed Feb 25 00:18:38 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 25 Feb 2004 00:18:38 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <403BF3EC.3050609@twistedmatrix.com>
References: <E1AvmS0-0001D8-00@wolfwood>
	 <20040225001604.GF27161@titus.home.puzzling.org>
	 <403BEF86.6030303@twistedmatrix.com>
	 <20040225005508.GB30984@titus.home.puzzling.org>
	 <403BF3EC.3050609@twistedmatrix.com>
Message-ID: <1077686318.3241.3.camel@localhost>

On Tue, 2004-02-24 at 20:01, Christopher Armstrong wrote:

> Uh... yes, of course. Of course. Glyph isn't dead. No siree. He's still 
> got a long healthy life ahead of him, at the end of which the copyright 
> will start counting down, and that won't be for a long time, 
> certainly.... There definitely aren't any robotic imposters around here....

CORRECT SIR
END OF LINE





From dekonerding at lbl.gov  Wed Feb 25 10:35:18 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Wed, 25 Feb 2004 07:35:18 -0800
Subject: [Twisted-Python] oddness in gtk reactor compred to wx and	plain
 reactor
In-Reply-To: <1077681837.791.4.camel@sheriffpony>
References: <403BB479.9000709@lbl.gov> <1077681837.791.4.camel@sheriffpony>
Message-ID: <403CC0B6.80408@lbl.gov>

Itamar Shtull-Trauring wrote:

>Don't do  time.sleep() in the main Twisted thread. This totally blocks
>*all* twisted code as twisted is single threaded, making scheduled
>events run late, network events not be handled, etc..
>  
>

Hi Itamar,

I'm actually only calling time.sleep() from other than the main thread- 
TestThingy is the only routine
that calls time.sleep, and it only does so when run from another thread 
via callInThread

I should point out a few more details:

1) The problem only occurs with the gtk reactor, not the wx or plain 
reactors.  It happens if I actually make a gtk GUI widget, or even if I 
don't.

2) The problem occurs even if I don't use time.sleep()-- anything 
exhibits the behavior (this is just to demonstrate the example)

3) If I hit control-C in the console about half-way through the test, it 
starts work normally- gtk.main() caches the signal, quits,
and then the plain reactor seems to engage (???)

I'm pretty sure my example (posted again below) is a valid one, can you 
please take a closer look?

import time, sys, logging

from twisted.internet import gtk2reactor
gtk2reactor.install()

## for testing with the wx reactor
## from wxPython.wx import *
## from twisted.internet import wxsupport


from twisted.python import threadable
threadable.init()
from twisted.internet import reactor


from twisted.python import log
log.startLogging(sys.stdout)

from twisted.internet import app
from twisted.manhole import telnet
from twisted.application import strports

## class MyFrame(wxFrame):
##     def __init__(self, parent, ID, title):
##         wxFrame.__init__(self, parent, ID, title, wxDefaultPosition, 
wxSize(300, 200))
##         menu = wxMenu()
##         menu.Append(wxID_EXIT, "E&xit", "Terminate the program")
##         menuBar = wxMenuBar()
##         menuBar.Append(menu, "&File");
##         self.SetMenuBar(menuBar)
##         EVT_MENU(self, wxID_EXIT,  self.DoExit)

##     def DoExit(self, event):
##         self.Close(true)
##         reactor.stop()


## class myWxApp(wxApp):

##     def OnInit(self):
##         frame = MyFrame(NULL, -1, "Hello, world")
##         frame.Show(true)
##         self.SetTopWindow(frame)
##         return true

class TestThingy:
    def __init__(self):
        log.err("TestThingy created")

    def run(self):
        log.err("TestThingy run")
        for i in range(10):
            log.err("TestThingy message")
            time.sleep(0.1)
        log.err("TestThingy done")
       
       
class ThingyManager:
    def __init__(self):
        log.err("ThingyManager")
       
    def submitThingy(self):
        log.err("ThingyManager submitting")
        f = TestThingy()
        log.err("ThingyManager created")
        reactor.callInThread(f.run)
        log.err("ThingyManager calledInThread")

def timer(*args):
    log.err("Timer: %d" % time.time())
    reactor.callLater(1, timer)

log.err("Starting")
t = ThingyManager()
log.err("Starting timer")
reactor.callLater(0, timer)
log.err("Submitting transfer")
reactor.callLater(3, t.submitThingy)
log.err("Running reactor")
reactor.run()
## for starting the wx reactor
## mywxAppInstance = myWxApp(0)
## wxsupport.install(mywxAppInstance)
## reactor.run(installSignalHandlers=0)
log.err("Reactor done")




From maoy at cis.upenn.edu  Wed Feb 25 23:08:58 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Wed, 25 Feb 2004 23:08:58 -0500 (EST)
Subject: [Twisted-Python] ReconnectingFactory
In-Reply-To: <403CC0B6.80408@lbl.gov>
Message-ID: <Pine.LNX.4.44.0402252303590.8001-100000@klondike.cis.upenn.edu>

Hi,

  I tried to use the ReconnectingClientFactory for reconnecting purpose. I
found that if the protocol was connected by my ethernet, and got lost
later on by pulling out my ethernet cable, I couldn't get successful
reconnection through my newly enabled wireless card. However, if I put the
cable back and enable ethernet card, it reported success. Is this a
feature or a bug? Why? Thank you!

-- 
Yun






From itamar at itamarst.org  Wed Feb 25 23:12:38 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 25 Feb 2004 23:12:38 -0500
Subject: [Twisted-Python] ANN: Twisted 1.2.0
Message-ID: <1077768758.807.88.camel@sheriffpony>

Twisted is an event-driven networking framework for server and client
applications.

For more information, visit http://www.twistedmatrix.com, join the list
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python or
visit us on #twisted at irc.freenode.net.

The Twisted from Scratch tutorial is a good starting point for learning
Twisted: http://twistedmatrix.com/documents/howto/tutorial


What's New in 1.2.0
===================

- SFTP server implementation for the SSH server.

- Improved wxPython support.

- IMAPv4 enhancements and bug fixes.

- Allow disabling display of tracebacks in error web pages.

- ident protocol implementation (client and server).

- Support mapping arbitrary child FDs when running processes on POSIX.

- Initial SOAP client support (using SOAPpy).

- Partial download support for FTP client.

- Web framework now supports different handlers for different methods
(e.g. GET or POST).

- Coverage support in the trial testing framework.

- Bug fixes and documentation and feature enhancements.





From pf_moore at yahoo.co.uk  Thu Feb 26 09:22:43 2004
From: pf_moore at yahoo.co.uk (Paul Moore)
Date: Thu, 26 Feb 2004 14:22:43 +0000 (UTC)
Subject: [Twisted-Python] Twisted web proxy
Message-ID: <loom.20040226T151141-14@post.gmane.org>

I'm trying to implement a simple web proxy using Twisted. With 3 or 4 web-based 
apps on my machine (moin, roundup, PyDS, ...) I'd like to put them all behind a 
single server on port 80, for ease of access. I could install Apache and use 
ProxyPass[Reverse], something like this:

    ProxyPass         /moin/ http://localhost:8081/
    ProxyPassReverse  /moin/ http://localhost:8081/

    ProxyPass         /roundup/ http://localhost:8082/
    ProxyPassReverse  /roundup/ http://localhost:8082/

But that seems fairly heavyweight. I tried looking at proxy.py in the Twisted 
examples, and it sort-of does what I'm after, but seems to give inconsistent 
results (some proxied pages just don't appear), and the sample code doesn't log 
anything I can scan for problems (and I can't get it to - wherever I put the 
print statements seems to be wrong :-() I suspect that I'm mucking up attaching 
children (the example just proxies everything from the root, I want to hang the 
remote server "lower" in the tree), but I can't see how.

Has anyone got any code that does this sort of thing, that they'd be willing to 
share?

Thanks,
Paul.




From db3l at fitlinxx.com  Thu Feb 26 10:48:12 2004
From: db3l at fitlinxx.com (David Bolen)
Date: 26 Feb 2004 10:48:12 -0500
Subject: [Twisted-Python] Re: DeferredList.addDeferred behaviour
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz>
Message-ID: <uu11dalkz.fsf@fitlinxx.com>

Andrew Bennetts <andrew-twisted at puzzling.org> writes:

> It's not clear to me what the right behaviour here is -- if a DeferredList
> has some number of Deferreds that have all been called, then of course the
> DeferredList should be marked as called, too.  But if you then add an
> uncalled Deferred to it, that sounds like a bug.  I'd be inclined to make
> DeferredList.addDeferred raise an exception in this case -- "In the face of
> ambiguity, refuse the temptation to guess." (although perhaps a warning
> would be better for a release or two, for backwards compatibility)

Well, it's not clear to me that having a mixture of called and
uncalled in a DeferredList is necessarily inconsistent - at least not
until after the DeferredList has actually has had its first callback
assigned.  After all, even if you insert just uncalled Deferreds
initially, during the course of normal events you'll end up with a
mixture as some of the Deferreds fire and others haven't yet.

I do agree that adding an uncalled Deferred to a DeferredList after
that DeferredList has really fired (called actual callbacks) is a
problem.  I think the HowTo warns against this case though, but it
says to check via the called attribute, which of course this thread
seems to point out as potentially a problem.

> Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
> you added it, can you remember why?  Is anyone using it?

I was until I saw this thread and figured out it probably wasn't going
to hold up the way I expected.  It was working for me now but that's
because the existing deferrable objects were returning Deferreds
already called (mostly through defer.succeed and defer.fail) as
placeholders for eventual remote versions, and thus when I was finally
adding the callbacks/errbacks to the DeferredList they were running
synchronously just fine.  But it looks like the problem that started
this thread would break that code when I started having uncalled
results as part of the DeferredList since the callbacks would still
get called as soon as they were added.

As a use case, my scenario is an upper level package function (that
itself returns a deferrable interface) that performs a function across
several target objects as part of its operation - sort of a deferrable
version of map.  I want to use the DeferredList to aggregate/process
the results into a single result, so I want to completely absorb the
individual deferreds.  It seemed to me that this should have been a good
fit for DeferredList.

Because DeferredList itself is just a callback and won't terminate the
original deferred chain (in particular, it doesn't stop the errback),
I also need to add a specific errback to each individual Deferred to
absorb any errors.  Without addDeferred I can't do this in a single loop.

For example, assuming that "func" is a deferrable method on a number
of objects held in an iterable "objs":

With addDeferred (the code I used to have):

    dl = defer.DeferredList([])
    for obj in objs:
        d = obj.func()
        dl.addDeferred(d)
        d.addErrback(lambda _:None)
    dl.addCallback(processResults)
    return dl

without addDeferred (the code I have now):

    deferreds = []
    for obj in objs:
        d = obj.func()
        deferreds.append(d)
    dl = defer.DeferredList([])

    for d in deferreds:
        d.addErrback(lambda _:None)

    dl.addCallback(processResults)
    return dl

Without addDeferred I need to aggregate the underlying deferreds
separately, but more importantly, I need a completely separate loop to
install the suppression errbacks, because that has to be done _after_
the Deferreds are stuck into the DeferredList or else that suppression
will stop the DeferredList from seeing the error.

Maybe not an extreme case, but at the time of writing it I thought
that this was specifically the sort of case that addDeferred was
perfect for.

Although if DeferredList were to grow a way to specify that it should
suppress errors once it has gathered them, I'd probably be just as
happy as having addDeferred fixed, since the separate loop for error
suppression bugs me more than the need to separately aggregate the
Deferreds together before creating the DeferredList.  Actually
suppressing errors might make me even happier, since needing to
suppress the errors separately (noted in the API documentation, but
not the HowTo), while making perfect sense to me now, took a while to
catch on to initially.

-- David





From foom at fuhm.net  Thu Feb 26 11:58:49 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 11:58:49 -0500
Subject: [Twisted-Python] Components
Message-ID: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>

So I want to merge the changes from Nevow that allow lazy adapter  
registration via string arguments to registerAdapter:
registerAdapter("nevow.freeform.StringRenderer","nevow.formless.String", 
"nevow.freeform.ITypedRenderer")

However, doing this necessarily means the removal of the implicit  
super-interface feature, where twisted automatically registers  
StringRenderer for all super-interfaces of ITypedRenderer. As there is  
no way to look up the super-interfaces of a string at registerAdapter  
time (without loading up the module), this feature cannot stay.

I also doubt that's actually used by anyone. I can't think of a reason  
why I'd want to do that. The test suite doesn't even test it: all tests  
pass after removing it. There is a test for the behavior of the  
components.superInterfaces function, but not for actually registering  
adapters.

Also, the current behavior is pretty much arbitrary and wrong:
 >>>>
from twisted.python.components import *

class IFoo(Interface):
   pass

class IBaz(IFoo):
   pass

class MyIFooAdapter(Adapter):
   pass

class MyIBazAdapter(Adapter):
   pass

registerAdapter(MyIBazAdapter, str, IBaz)
registerAdapter(MyIFooAdapter, str, IFoo)
<<<<
Results in:
 >>>>
Traceback (most recent call last):
   File "<stdin>", line 1, in ?
   File "twisted/python/components.py", line 214, in registerAdapter
     raise ValueError(
ValueError: an adapter (__main__.MyIBazAdapter) was already registered.
<<<<

However,
registerAdapter(MyIFooAdapter, str, IFoo)
registerAdapter(MyIBazAdapter, str, IBaz)
works fine.
Depending on the order of adapter registration seems quite fragile to  
me. The only proper way to handle this would be to have a concept of  
'depth' ala PyProtocols.

James




From radix at twistedmatrix.com  Thu Feb 26 12:09:34 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 12:09:34 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E284E.8040408@twistedmatrix.com>

James Y Knight wrote:
> So I want to merge the changes from Nevow that allow lazy adapter  
> registration via string arguments to registerAdapter:
> registerAdapter("nevow.freeform.StringRenderer","nevow.formless.String", 
> "nevow.freeform.ITypedRenderer")
> 
> However, doing this necessarily means the removal of the implicit  
> super-interface feature, where twisted automatically registers  
> StringRenderer for all super-interfaces of ITypedRenderer. As there is  
> no way to look up the super-interfaces of a string at registerAdapter  
> time (without loading up the module), this feature cannot stay.
> 
> I also doubt that's actually used by anyone. I can't think of a reason  
> why I'd want to do that. The test suite doesn't even test it: all tests  
> pass after removing it. There is a test for the behavior of the  
> components.superInterfaces function, but not for actually registering  
> adapters.

Maybe this was the dubious failure that I've heard rumoured in 
NewReality when last someone tried to implement this feature. It'd be 
really nice if glyph or whoever tried implementing it last would explain 
what exactly the backwards-incompatibility problem they ran into was.



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/31d54995/attachment.pgp 

From glyph at twistedmatrix.com  Thu Feb 26 12:14:12 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 26 Feb 2004 12:14:12 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E284E.8040408@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com>
Message-ID: <1077815652.3234.109.camel@localhost>

On Thu, 2004-02-26 at 12:09, Christopher Armstrong wrote:

> Maybe this was the dubious failure that I've heard rumoured in 
> NewReality when last someone tried to implement this feature. It'd be 
> really nice if glyph or whoever tried implementing it last would explain 
> what exactly the backwards-incompatibility problem they ran into was.

I think James makes a compelling argument: if NewReality was the only
thing stopping this fix from going through, forget about it.

But still, make sure that the first version that changes this behaviour
bumps at least a minor version number - a major reason I've been afraid
of changes like this is that folks expect micro-versions to behave
_exactly_ the same.




From radix at twistedmatrix.com  Thu Feb 26 12:19:27 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 12:19:27 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077815652.3234.109.camel@localhost>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
Message-ID: <403E2A9F.908@twistedmatrix.com>

Glyph Lefkowitz wrote:
> I think James makes a compelling argument: if NewReality was the only
> thing stopping this fix from going through, forget about it.
> 
> But still, make sure that the first version that changes this behaviour
> bumps at least a minor version number - a major reason I've been afraid
> of changes like this is that folks expect micro-versions to behave
> _exactly_ the same.

Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
later :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/56df051e/attachment.pgp 

From foom at fuhm.net  Thu Feb 26 14:16:39 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 14:16:39 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E2A9F.908@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com>
Message-ID: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 12:19 PM, Christopher Armstrong wrote:

> Glyph Lefkowitz wrote:
>> I think James makes a compelling argument: if NewReality was the only
>> thing stopping this fix from going through, forget about it.
>> But still, make sure that the first version that changes this 
>> behaviour
>> bumps at least a minor version number - a major reason I've been 
>> afraid
>> of changes like this is that folks expect micro-versions to behave
>> _exactly_ the same.
>
> Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
> later :-)

Anothing few things:
- Does getRegistry's context.get(AdapterRegistry, theAdapterRegistry) 
actually have a use? It seems like it might just be slowing down the 
process without any gain.
- Why hasn't AdapterRegistry.getAdapterClassWithInheritance been 
deprecated yet? Is it because Componentized.locateAdapterClass calls 
it? But then, why does Componentized.locateAdapterClass exist.
- What's Adapter.isuper? Yes it forwards itself but what *IS* it?
- The persist argument is kind of strange. It's a tristate with 3 
options: persist=None means lookup in the persistence table but don't 
add the newly created adapter to the table if one wasn't found, 
persist=False means don't lookup and don't add, and persist=True means 
lookup and add if necessary. Is that complication actually necessary? 
Also it doesn't seem to be documented.

James




From radix at twistedmatrix.com  Thu Feb 26 14:22:45 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 14:22:45 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E4785.7090903@twistedmatrix.com>

James Y Knight wrote:
> On Feb 26, 2004, at 12:19 PM, Christopher Armstrong wrote:
> 
>> Glyph Lefkowitz wrote:
>>
>>> I think James makes a compelling argument: if NewReality was the only
>>> thing stopping this fix from going through, forget about it.
>>> But still, make sure that the first version that changes this behaviour
>>> bumps at least a minor version number - a major reason I've been afraid
>>> of changes like this is that folks expect micro-versions to behave
>>> _exactly_ the same.
>>
>>
>> Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
>> later :-)
> 
> 
> Anothing few things:
> - Does getRegistry's context.get(AdapterRegistry, theAdapterRegistry) 
> actually have a use? It seems like it might just be slowing down the 
> process without any gain.

yeeees! I really like this feature. For example, people who want to 
override the way, say, a String input box is rendered for a formless UI 
rendered with gtk2form (freeform, too, probably), can implement an 
alternative IStringWidget implementor, put it in their own 
AdapterRegistry, and stick it on the context. Then their own widget will 
be used instead of the default, without touching anything in gtk2form.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/3b278058/attachment.pgp 

From bob at redivi.com  Thu Feb 26 14:43:19 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 14:43:19 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 2:16 PM, James Y Knight wrote:

> On Feb 26, 2004, at 12:19 PM, Christopher Armstrong wrote:
>
>> Glyph Lefkowitz wrote:
>>> I think James makes a compelling argument: if NewReality was the only
>>> thing stopping this fix from going through, forget about it.
>>> But still, make sure that the first version that changes this 
>>> behaviour
>>> bumps at least a minor version number - a major reason I've been 
>>> afraid
>>> of changes like this is that folks expect micro-versions to behave
>>> _exactly_ the same.
>>
>> Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
>> later :-)
>
> Anothing few things:
> - Does getRegistry's context.get(AdapterRegistry, theAdapterRegistry) 
> actually have a use? It seems like it might just be slowing down the 
> process without any gain.
> - Why hasn't AdapterRegistry.getAdapterClassWithInheritance been 
> deprecated yet? Is it because Componentized.locateAdapterClass calls 
> it? But then, why does Componentized.locateAdapterClass exist.
> - What's Adapter.isuper? Yes it forwards itself but what *IS* it?
> - The persist argument is kind of strange. It's a tristate with 3 
> options: persist=None means lookup in the persistence table but don't 
> add the newly created adapter to the table if one wasn't found, 
> persist=False means don't lookup and don't add, and persist=True means 
> lookup and add if necessary. Is that complication actually necessary? 
> Also it doesn't seem to be documented.

How about just migrating off of t.p.components and switching to 
PyProtocols?  The license is compatible, it has PEP-backing, it is a 
superset of what t.p.components does, has optional Pyrex acceleration, 
and is compatible with Interfaces from itself, t.p.components, and 
zope.components.  The default Interface implementation does not support 
the __call__ adaptation that we all know and love, but it is actually 
generic enough to allow it.

As a side note, PEAK's peak.util.imports.whenImported hooks, 
importString, and lazyModule might also be pretty useful to Twisted 
(among so many other things).

-bob




From golux at comcast.net  Thu Feb 26 14:47:26 2004
From: golux at comcast.net (Stephen C. Waterbury)
Date: Thu, 26 Feb 2004 14:47:26 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <403E4D4E.8070107@comcast.net>

Bob Ippolito wrote:

> How about just migrating off of t.p.components and switching to 
> PyProtocols?  [lots of good reasons ...]

+1

- Steve




From pje at telecommunity.com  Thu Feb 26 14:59:35 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 14:59:35 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>

At 02:43 PM 2/26/04 -0500, Bob Ippolito wrote:

>How about just migrating off of t.p.components and switching to 
>PyProtocols?  The license is compatible, it has PEP-backing, it is a 
>superset of what t.p.components does, has optional Pyrex acceleration, and 
>is compatible with Interfaces from itself, t.p.components, and 
>zope.components.  The default Interface implementation does not support 
>the __call__ adaptation that we all know and love, but it is actually 
>generic enough to allow it.

Yep, just subclass InterfaceClass and add a __call__ method that calls back 
to adapt() and you'd be all set.  One other benefit to PyProtocols is that 
you can track what interfaces an *instance* supports, independent of what 
its class supports.

The more controversial aspect, however, is transitive adaptation.  IIRC, 
some of the core Twisted developers consider implicit transitive adaptation 
to be dangerous and/or evil.  However, that could possibly also be dealt 
with in a protocols.Interface subclass by disabling the parts that support 
that.

There might be some other issues that could come up, but I'm definitely 
willing to try to "adapt" to Twisted's needs in these areas, especially if 
it means I could get rid of PyProtocols' wrapper code and wrapping tests 
for Twisted's existing interface class.  :)




From foom at fuhm.net  Thu Feb 26 15:09:16 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 15:09:16 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E4785.7090903@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com>
Message-ID: <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 2:22 PM, Christopher Armstrong wrote:
> yeeees! I really like this feature. For example, people who want to 
> override the way, say, a String input box is rendered for a formless 
> UI rendered with gtk2form (freeform, too, probably), can implement an 
> alternative IStringWidget implementor, put it in their own 
> AdapterRegistry, and stick it on the context. Then their own widget 
> will be used instead of the default, without touching anything in 
> gtk2form.

Do you like it enough to have ever used it? Because, it doesn't work 
usefully, AFAICT. You've made an entire new AdapterRegistry with 
entirely new adapterRegistry and  adapterPersistance dicts. So, you 
can't just override one adapter...Perhaps if there was an 
InheritingAdapterRegistry, or an copy method on AdapterRegistry...

But really, what's the point? You can always make a subtype of 
IStringWidget..

This page 
<http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
describes how one would do context-specific protocols with PyProtocols, 
which *doesn't* seem to allow multiple registries. Basically, it seems 
to say: use a per-instance subprotocol. It may not be directly 
applicable to twisted, because of the lack of chained adaptation (A->B 
and B->C gives you A->C automatically), but it does seem to me like a 
nice way to go about it.

James




From radix at twistedmatrix.com  Thu Feb 26 15:14:37 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 15:14:37 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E53AD.2010108@twistedmatrix.com>

James Y Knight wrote:
> But really, what's the point? You can always make a subtype of 
> IStringWidget..
> 
> This page 
> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
> describes how one would do context-specific protocols with PyProtocols, 
[etc]

I'm fine with using PyProtocols, but what did you mean about creating a 
subtype of IStringWidget?


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/c8ce3cc8/attachment.pgp 

From foom at fuhm.net  Thu Feb 26 15:17:31 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 15:17:31 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 2:43 PM, Bob Ippolito wrote:
> How about just migrating off of t.p.components and switching to 
> PyProtocols?  The license is compatible, it has PEP-backing, it is a 
> superset of what t.p.components does, has optional Pyrex acceleration, 
> and is compatible with Interfaces from itself, t.p.components, and 
> zope.components.  The default Interface implementation does not 
> support the __call__ adaptation that we all know and love, but it is 
> actually generic enough to allow it.
>
> As a side note, PEAK's peak.util.imports.whenImported hooks, 
> importString, and lazyModule might also be pretty useful to Twisted 
> (among so many other things).

And, while PyProtocols doesn't seem to support any sort of lazy adapter 
registration, it would probably be doable via a framework built on top 
of whenImported.

James




From radix at twistedmatrix.com  Thu Feb 26 15:22:15 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 15:22:15 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E5577.5010002@twistedmatrix.com>

James Y Knight wrote:
> This page 
> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
> describes how one would do context-specific protocols with PyProtocols, 
> which *doesn't* seem to allow multiple registries. Basically, it seems 
> to say: use a per-instance subprotocol. It may not be directly 
> applicable to twisted, because of the lack of chained adaptation (A->B 
> and B->C gives you A->C automatically), but it does seem to me like a 
> nice way to go about it.

Hmm... I'm reading that page, but I can't tell if it requires the 
framework code to do special things to support context-specific 
adapters. If it does, is there any way to implement context-specific 
adapters that _don't_ require framework-code to know about them? i.e., 
so plain old adaptation calls will look in the context for adapters?

But yeah, if PyProtocols does everything we need and there's a good 
chance it will support our future crazy ideas, I think it's a good idea 
to switch. We'd probably wanna bump to 2.0 for such a switch. maybe?

Of course, IIRC glyph mentioned it being slow, and I think he doesn't 
like the implicit adaptation. ?


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/7f8f879f/attachment.pgp 

From radix at twistedmatrix.com  Thu Feb 26 15:28:52 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 15:28:52 -0500
Subject: [Twisted-Python] PYCON ATTENDERS!
Message-ID: <403E5704.3080100@twistedmatrix.com>

If you plan on coming to a Twisted-related sprint, *PLEASE* add your 
name to the wiki page at

http://www.python.org/cgi-bin/moinmoin/TwistedSprint

If you can't do that, at least reply to this message stating your intent 
to attend.

The PyCon organizers need to know how many people are coming.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/526490f7/attachment.pgp 

From parez at ivsn.com  Wed Feb 25 05:42:19 2004
From: parez at ivsn.com (Paul Reznicek)
Date: Wed, 25 Feb 2004 11:42:19 +0100
Subject: [Twisted-Python] Typo in /twisted/test/test_enterprise.py - Twisted 1.2 RC2
Message-ID: <403C7C0B.5060108@ivsn.com>

An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20040225/e40c5993/attachment.htm 

From tv at tv.debian.net  Wed Feb 25 10:31:42 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Wed, 25 Feb 2004 17:31:42 +0200
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
 queries with Twisted...
In-Reply-To: <40276641.30300@rogers.com>
References: <40276641.30300@rogers.com>
Message-ID: <403CBFDE.6040206@tv.debian.net>

Mike C. Fletcher wrote:
> Writing a simple asynchronous loop myself (poll on a simple socket, send 
> message from queue when writable, read one into other queue when 
> readable) allowed for doing a few thousand queries simultaneously), with 

A word of warning here. Nothing prevents your outgoing socket from
claiming writeability all the time, and the OS from dropping your
packets due to lack of buffer space. UDP just isn't reliable. Been
there, got the T-shirt.

You might be able to do some hacks with SIOCOUTQ, but even that
depends on the OS. IIRC on linux 2.4 it's not useful for UDP.

Your best course of action is to avoid bursts. Here's a nice and simple
algorithm: use a token bucket filter just like suggested elsewhere in
this thred, but add tokens both per time and per received responses.

Don't actually use the TBF as a filter, or even queue packets before it;
use it to see when you should be generating more requests and when not.
As long as there are tokens in bucket, generate reply and send it. When
bucket is empty, return and try again later. With reactor.callLater(),
add tokens to bucket and do the above processing. When receiving a
packet, add a token to bucket and do the above processing.

The more you get replies, the more work gets done; dropped packets slow
things down, as they should. Time-based token adding is there mostly
to be robust against packet loss; in normal case replies should
be the ones filling the bucket. The trick is to continue work as soon as
possible, based on replies (instead of waiting for all n request to
complete before continuing, or until a timer expires).



From bob at redivi.com  Thu Feb 26 15:35:27 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 15:35:27 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com> <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <4F9B46FE-689B-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 3:17 PM, James Y Knight wrote:

> On Feb 26, 2004, at 2:43 PM, Bob Ippolito wrote:
>> How about just migrating off of t.p.components and switching to 
>> PyProtocols?  The license is compatible, it has PEP-backing, it is a 
>> superset of what t.p.components does, has optional Pyrex 
>> acceleration, and is compatible with Interfaces from itself, 
>> t.p.components, and zope.components.  The default Interface 
>> implementation does not support the __call__ adaptation that we all 
>> know and love, but it is actually generic enough to allow it.
>>
>> As a side note, PEAK's peak.util.imports.whenImported hooks, 
>> importString, and lazyModule might also be pretty useful to Twisted 
>> (among so many other things).
>
> And, while PyProtocols doesn't seem to support any sort of lazy 
> adapter registration, it would probably be doable via a framework 
> built on top of whenImported.

Been there, done that, got the t-shirt.

Yes, it's easy.

-bob




From bob at redivi.com  Thu Feb 26 15:41:01 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 15:41:01 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E5577.5010002@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net> <403E5577.5010002@twistedmatrix.com>
Message-ID: <1717F124-689C-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 3:22 PM, Christopher Armstrong wrote:

> James Y Knight wrote:
>> This page 
>> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
>> describes how one would do context-specific protocols with 
>> PyProtocols, which *doesn't* seem to allow multiple registries. 
>> Basically, it seems to say: use a per-instance subprotocol. It may 
>> not be directly applicable to twisted, because of the lack of chained 
>> adaptation (A->B and B->C gives you A->C automatically), but it does 
>> seem to me like a nice way to go about it.
>
> Hmm... I'm reading that page, but I can't tell if it requires the 
> framework code to do special things to support context-specific 
> adapters. If it does, is there any way to implement context-specific 
> adapters that _don't_ require framework-code to know about them? i.e., 
> so plain old adaptation calls will look in the context for adapters?
>
> But yeah, if PyProtocols does everything we need and there's a good 
> chance it will support our future crazy ideas, I think it's a good 
> idea to switch. We'd probably wanna bump to 2.0 for such a switch. 
> maybe?
>
> Of course, IIRC glyph mentioned it being slow, and I think he doesn't 
> like the implicit adaptation. ?

Did he benchmark it?  Last I checked, t.p.components and january 
molasses are neck in neck ;)  PyProtocols has written-in-C code for 
acceleration, I bet it wins, even though it does do more work (which I 
believe happens *up front*, so doesn't really affect runtime 
performance) with transitive adaptation.

-bob




From dp at twistedmatrix.com  Thu Feb 26 15:42:50 2004
From: dp at twistedmatrix.com (Donovan Preston)
Date: Thu, 26 Feb 2004 15:42:50 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com> <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <57C41DD6-689C-11D8-83A5-000A95864FC4@twistedmatrix.com>

On Feb 26, 2004, at 3:17 PM, James Y Knight wrote:

> On Feb 26, 2004, at 2:43 PM, Bob Ippolito wrote:
>> How about just migrating off of t.p.components and switching to 
>> PyProtocols?  The license is compatible, it has PEP-backing, it is a 
>> superset of what t.p.components does, has optional Pyrex 
>> acceleration, and is compatible with Interfaces from itself, 
>> t.p.components, and zope.components.  The default Interface 
>> implementation does not support the __call__ adaptation that we all 
>> know and love, but it is actually generic enough to allow it.
>>
>> As a side note, PEAK's peak.util.imports.whenImported hooks, 
>> importString, and lazyModule might also be pretty useful to Twisted 
>> (among so many other things).
>
> And, while PyProtocols doesn't seem to support any sort of lazy 
> adapter registration, it would probably be doable via a framework 
> built on top of whenImported.

Switching Nevow to PyProtocols would have been my first choice. Since I 
didn't have the time to learn it, and didn't feel like introducing the 
additional dependency at the time, I hacked t.p.c into nevow.compy so 
that I could prevent t.p.c's "import the world" behavior which was 
detrimental to nevow. Unfortunately this means you have to now use 
*two* "global" component registries when you use Nevow.

I am +1000 with using PyProtocols for Nevow since it would reduce my 
headaches. I think that a global component registry is the one central 
important feature of a components system, making the current situation 
less than ideal. twisted.python.components wasn't flexible enough to do 
what I needed to do in Nevow but PyProtocols is, and supports more 
useful things like protocolForURI which will be necessary once people 
start designing interfaces that are useful outside of just one project.

I am less excited about introducing a dependency into Nevow. It would 
be nice if we could distribute PyProtocols in the same tarball as Nevow 
and only install it if needed.

dp




From itamar at itamarst.org  Thu Feb 26 15:44:49 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 26 Feb 2004 15:44:49 -0500
Subject: [Twisted-Python] PYCON ATTENDERS!
In-Reply-To: <403E5704.3080100@twistedmatrix.com>
References: <403E5704.3080100@twistedmatrix.com>
Message-ID: <1077828289.789.288.camel@sheriffpony>

On Thu, 2004-02-26 at 15:28, Christopher Armstrong wrote:

> The PyCon organizers need to know how many people are coming.

And specifically from what dates.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From bob at redivi.com  Thu Feb 26 16:11:08 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 16:11:08 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E5577.5010002@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net> <403E5577.5010002@twistedmatrix.com>
Message-ID: <4BA449B0-68A0-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 3:22 PM, Christopher Armstrong wrote:

> James Y Knight wrote:
>> This page 
>> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
>> describes how one would do context-specific protocols with 
>> PyProtocols, which *doesn't* seem to allow multiple registries. 
>> Basically, it seems to say: use a per-instance subprotocol. It may 
>> not be directly applicable to twisted, because of the lack of chained 
>> adaptation (A->B and B->C gives you A->C automatically), but it does 
>> seem to me like a nice way to go about it.
>
> Hmm... I'm reading that page, but I can't tell if it requires the 
> framework code to do special things to support context-specific 
> adapters. If it does, is there any way to implement context-specific 
> adapters that _don't_ require framework-code to know about them? i.e., 
> so plain old adaptation calls will look in the context for adapters?

I think that all of the cases where Twisted is using contextual 
adaptation are better solved by peak.binding anyway.. in the few, if 
any, cases where peak.binding is not better, then the context-specific 
adapters in the previously mentioned documentation should be enough to 
do it.

In any case, because of __conform__, __adapt__, etc. you can really do 
Whatever You Want with PyProtocols.. even if that means implementing 
the awkward to use component registry stack junk :)

-bob




From dp at twistedmatrix.com  Thu Feb 26 16:28:40 2004
From: dp at twistedmatrix.com (Donovan Preston)
Date: Thu, 26 Feb 2004 16:28:40 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <4BA449B0-68A0-11D8-8DBD-000A95686CD8@redivi.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net> <403E5577.5010002@twistedmatrix.com> <4BA449B0-68A0-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <BF23CA94-68A2-11D8-83A5-000A95864FC4@twistedmatrix.com>

On Feb 26, 2004, at 4:11 PM, Bob Ippolito wrote:

>
> On Feb 26, 2004, at 3:22 PM, Christopher Armstrong wrote:
>
>> James Y Knight wrote:
>>> This page 
>>> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
>>> describes how one would do context-specific protocols with 
>>> PyProtocols, which *doesn't* seem to allow multiple registries. 
>>> Basically, it seems to say: use a per-instance subprotocol. It may 
>>> not be directly applicable to twisted, because of the lack of 
>>> chained adaptation (A->B and B->C gives you A->C automatically), but 
>>> it does seem to me like a nice way to go about it.
>>
>> Hmm... I'm reading that page, but I can't tell if it requires the 
>> framework code to do special things to support context-specific 
>> adapters. If it does, is there any way to implement context-specific 
>> adapters that _don't_ require framework-code to know about them? 
>> i.e., so plain old adaptation calls will look in the context for 
>> adapters?
>
> I think that all of the cases where Twisted is using contextual 
> adaptation are better solved by peak.binding anyway.. in the few, if 
> any, cases where peak.binding is not better, then the context-specific 
> adapters in the previously mentioned documentation should be enough to 
> do it.
>
> In any case, because of __conform__, __adapt__, etc. you can really do 
> Whatever You Want with PyProtocols.. even if that means implementing 
> the awkward to use component registry stack junk :)

And as James pointed out in another message, the context-aware registry 
currently implemented in t.p.c does not seem to do chaining, so radix' 
use case would not be implementable right now... so it would be work to 
do it the way he wants, whether it's fixing up t.p.c to do it or 
PyProtocols.

dp




From pje at telecommunity.com  Thu Feb 26 16:44:30 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 16:44:30 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <57C41DD6-689C-11D8-83A5-000A95864FC4@twistedmatrix.com>
References: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
 <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>

At 03:42 PM 2/26/04 -0500, Donovan Preston wrote:
>I am less excited about introducing a dependency into Nevow. It would be 
>nice if we could distribute PyProtocols in the same tarball as Nevow and 
>only install it if needed.

The (dual PSF/ZPL) license permits that.  And, PyProtocols, is getting 
pretty stable, so it's not like you'd be updating it every day.

But naturally, working on dependency support for distutils seems to be an 
Idea Whose Time Is Coming.  There was a recent Zope3-Dev thread about such 
issues, although it was more specific to bundling subsets of the Zope3 
system, rather than bundling third-party packages.




From pje at telecommunity.com  Thu Feb 26 17:06:09 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 17:06:09 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1717F124-689C-11D8-8DBD-000A95686CD8@redivi.com>
References: <403E5577.5010002@twistedmatrix.com>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E4785.7090903@twistedmatrix.com>
 <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E5577.5010002@twistedmatrix.com>
Message-ID: <5.1.1.6.0.20040226165714.02a844c0@telecommunity.com>

At 03:41 PM 2/26/04 -0500, Bob Ippolito wrote:
>PyProtocols has written-in-C code for acceleration, I bet it wins, even 
>though it does do more work (which I believe happens *up front*, so 
>doesn't really affect runtime performance) with transitive adaptation.

Adapter lookup time in PyProtocols is roughly equivalent to 5 attribute 
lookups: __conform__, __adapt__, __class__, __mro__ or __bases__, and 
finally the adapter itself.  All of the transitive computation occurs up 
front, so the actual adapter lookup consists of looking up each class in 
the adaptee's __mro__ in a single dictionary.  (IOW, it's basically the 
same as a Python attribute lookup, which walks the __mro__ and does a 
dictionary lookup for each base class until the attribute is 
found.)  Adapter execution time is of course dependent on what the adapter 
does.  :)

The C code achieved about a 2-4x speedup over pure Python, mainly by 
cutting out function call and loop overhead, not by changing the 
fundamental algorithm, which can't really be improved upon without making 
assumptions I didn't want to make.  For example, if I were willing to 
assume that classes would never have their __bases__ or __mro__ changed, I 
could cache lookup results and thus occasionally save a few dictionary 
lookups.  However, for a general-purpose Python tool, I thought it better 
to support as much of Python's dynamic nature as practical.  (I *do* assume 
that protocol relationships are not dynamic, however.)




From bob at redivi.com  Thu Feb 26 17:32:01 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 17:32:01 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
References: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com> <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
Message-ID: <98B6152A-68AB-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 4:44 PM, Phillip J. Eby wrote:

> At 03:42 PM 2/26/04 -0500, Donovan Preston wrote:
>> I am less excited about introducing a dependency into Nevow. It would 
>> be nice if we could distribute PyProtocols in the same tarball as 
>> Nevow and only install it if needed.
>
> The (dual PSF/ZPL) license permits that.  And, PyProtocols, is getting 
> pretty stable, so it's not like you'd be updating it every day.
>
> But naturally, working on dependency support for distutils seems to be 
> an Idea Whose Time Is Coming.  There was a recent Zope3-Dev thread 
> about such issues, although it was more specific to bundling subsets 
> of the Zope3 system, rather than bundling third-party packages.

Yeah, the dependency/package management stuff is also brought up every 
so often on the distutils-sig and pythonmac-sig .. the problem is that 
nobody wants to actually hack on the nasty distutils source to finish 
the work.. except maybe amk :)

-bob




From glyph at twistedmatrix.com  Thu Feb 26 17:56:23 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 26 Feb 2004 17:56:23 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
Message-ID: <1077836183.3688.137.camel@localhost>

On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
> At 02:43 PM 2/26/04 -0500, Bob Ippolito wrote:
> 
> >How about just migrating off of t.p.components and switching to 
> >PyProtocols?  The license is compatible, it has PEP-backing, it is a 
> >superset of what t.p.components does, has optional Pyrex acceleration, and 
> >is compatible with Interfaces from itself, t.p.components, and 
> >zope.components.  The default Interface implementation does not support 
> >the __call__ adaptation that we all know and love, but it is actually 
> >generic enough to allow it.
> 
> Yep, just subclass InterfaceClass and add a __call__ method that calls back 
> to adapt() and you'd be all set.  One other benefit to PyProtocols is that 
> you can track what interfaces an *instance* supports, independent of what 
> its class supports.

Would you consider adding this to PyProtocols directly?  If we're going
to maintain a component system as part of Twisted, I would like to at
least get the benefit of having full control over the component system
within Twisted.  I don't want to have some people using PyProtocols and
others using PyProtocols+TwistedHacks.

There are a lot of features I'd add to Twisted's component system if I
had time, such as:

	- implicit context-dependent location of closest running t.a.service
services by interface
	- interface-based context (moshez's context trick)
	- automatic generation of interfaces from any class
	- IComponentized
	- context / interface based log separations

And of course, integrating foom's string-based components would be great
too.  There is a lot of friction even to add something like this to
Twisted.  I imagine that adding something like this to PyProtocols, with
potentially more projects out there depending on the exact specifics of
all its semantics, would be even worse.

The other alternative is to add a bunch of specific hacks to PyProtocols
that get loaded only when Twisted gets loaded, which could potentially
introduce compatibility problems with other PyProtocols-using code,
which would sort of invalidate the whole point of using a common
components system in the first place.

Then we have the issue of the PyProtocols dependency; dependency
management can be quite hairy on windows.

> The more controversial aspect, however, is transitive adaptation.  IIRC, 
> some of the core Twisted developers consider implicit transitive adaptation 
> to be dangerous and/or evil.  However, that could possibly also be dealt 
> with in a protocols.Interface subclass by disabling the parts that support 
> that.

Before veering off into this, I'd like to retract any comments about
performance.  I tried pyprotocols a while ago, on some simple cases, and
it was pretty slow compared to Twisted's dirt-simple code.  I don't
think I was using the C code path, but it was more than a 2-4x
difference at the time.

I will test again with more reasonable cases before saying anything more
specific.  I bet Twisted has gotten slower and PyProtocols has gotten
faster since then, though.

Parts of PyProtocols do strike me as dangerous, evil, and overcomplex,
though :)  In particular,

http://peak.telecommunity.com/protocol_ref/proto-implication.html

The idea of passing numeric priorities for different implementations has
always seemed deeply wrong to me.  I have worked with one or two systems
like this in the past (some MUD code in C++) where, inevitably, someone
will want to make the 'real' default adapter for interface X; then
someone else will want to make the 'really real' default adapter. 
Different developers will eventually keep trying to write comparison
methods that leapfrog each other backwards to get to the correct result
for last-most-from-greater-than-everything, which turns into a
bug-ridden mess (and it's never really clear who should be "winning"
this race to be the final overrider anyway).

More importantly I don't really understand if that's in fact what the
'depth' value is used for, because my eyes glaze over halfway through
the above web page :)  PyProtocols feels to me like it's gone out of
even the upper levels of abstraction that the Twisted team is used to
inhabiting, straight into the Zopeosphere... 4000 lines of code related
to components, whereas t.p.components has 300?  It worries me.

Maybe I'm alone in these concerns, though.  Does anyone else feel that
depending on PyProtocols would increase the learning curve for Twisted
even more?  Or is this common knowledge in the Python community that
could be leveraged to actually make the curve shallower?  I can
certainly learn to wrap my head around the whole thing if nobody else
has trouble with it :)

> There might be some other issues that could come up, but I'm definitely 
> willing to try to "adapt" to Twisted's needs in these areas, especially if 
> it means I could get rid of PyProtocols' wrapper code and wrapping tests 
> for Twisted's existing interface class.  :)

This is clearly something that we need to talk about more.  As many
silly disagreements about design as I can come up with, a common
components system would be beneficial to everyone involved.  Are you
coming to PyCon? :)




From pje at telecommunity.com  Thu Feb 26 17:58:54 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 17:58:54 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <98B6152A-68AB-11D8-8DBD-000A95686CD8@redivi.com>
References: <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
 <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
 <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
Message-ID: <5.1.1.6.0.20040226175056.023ea240@telecommunity.com>

At 05:32 PM 2/26/04 -0500, Bob Ippolito wrote:

>On Feb 26, 2004, at 4:44 PM, Phillip J. Eby wrote:
>
>>At 03:42 PM 2/26/04 -0500, Donovan Preston wrote:
>>>I am less excited about introducing a dependency into Nevow. It would be 
>>>nice if we could distribute PyProtocols in the same tarball as Nevow and 
>>>only install it if needed.
>>
>>The (dual PSF/ZPL) license permits that.  And, PyProtocols, is getting 
>>pretty stable, so it's not like you'd be updating it every day.
>>
>>But naturally, working on dependency support for distutils seems to be an 
>>Idea Whose Time Is Coming.  There was a recent Zope3-Dev thread about 
>>such issues, although it was more specific to bundling subsets of the 
>>Zope3 system, rather than bundling third-party packages.
>
>Yeah, the dependency/package management stuff is also brought up every so 
>often on the distutils-sig and pythonmac-sig .. the problem is that nobody 
>wants to actually hack on the nasty distutils source to finish the work.. 
>except maybe amk :)

The sad thing to me is, that it's not that difficult, at least in 
principle.  For example, I frequently create "pkgsrc" (similar to BSD 
ports) packages wrapping distutils-built Python libraries.  Generally 
speaking, this amounts to writing a short makefile like:

#====
DISTNAME=       mechanize-0.0.7a
PKGNAME=        ${PYPKGPREFIX}-${DISTNAME}
CATEGORIES=     3rdParty
MASTER_SITES=   http://wwwsearch.sourceforge.net/mechanize/src/

PYMODULE_DIRS=  mechanize
MAINTAINER=     pje at eby-sarna.com
HOMEPAGE=       http://wwwsearch.sourceforge.net/mechanize/
COMMENT=        Stateful programmatic web browsing in Python

DEPENDS+=       ${PYPKGPREFIX}-pullparser>=0.0.4b:../../3rdParty/py-pullparser
DEPENDS+= 
${PYPKGPREFIX}-ClientCookie>=0.4.18:../../3rdParty/py-ClientCookie
DEPENDS+=       ${PYPKGPREFIX}-ClientForm>=0.1.14:../../3rdParty/py-ClientForm

PYTHON_VERSION_REQD= 22

.include "../../3rdParty/3p-pkgutils/py-plist.mk"
.include "../../lang/python/extension.mk"
.include "../../mk/bsd.pkg.mk"
#====

This is one of the most *complicated* such files I've written.  But, using 
this I can run 'make' and it will download and install all the dependencies 
for me!  In fact, if I don't have Python installed, it'll download and 
install Python for me, but that's a bit out of scope for the distutils, 
methinks.  :)

Maybe what's really needed is a tool that uses a file like the above to do 
the downloading, extracting, and running of setup.py, et al.  The main 
drawback I see is dealing with binary installers for e.g. Windows.




From radix at twistedmatrix.com  Thu Feb 26 18:51:13 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 18:51:13 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077836183.3688.137.camel@localhost>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost>
Message-ID: <403E8671.1000308@twistedmatrix.com>

Glyph Lefkowitz wrote:
> On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
>>Yep, just subclass InterfaceClass and add a __call__ method that calls back 
>>to adapt() and you'd be all set.  One other benefit to PyProtocols is that 
>>you can track what interfaces an *instance* supports, independent of what 
>>its class supports.
> 
> Would you consider adding this to PyProtocols directly?  If we're going
> to maintain a component system as part of Twisted, I would like to at
> least get the benefit of having full control over the component system
> within Twisted.  I don't want to have some people using PyProtocols and
> others using PyProtocols+TwistedHacks.

Interface calling isn't that big of a deal. It just means for 
*parameterized* interfaces, we can't rely on calling (if we want to 
support non-Twisted interfaces there). But when we're adapting to a 
particular interface that we know subclasses our CallableInterface, we 
can call it.

> There are a lot of features I'd add to Twisted's component system if I
> had time, such as:

In the following, "components system" = "PyProtocols".

> 	- implicit context-dependent location of closest running t.a.service
> services by interface

Doesn't require changes to the components system

> 	- interface-based context (moshez's context trick)

Doesn't require changes to the components system

> 	- automatic generation of interfaces from any class

Doesn't require changes to the components system (afaict)

> 	- IComponentized

Hmm, what exactly is the use case for this anyway? I thought it was 
related to string registration of adapters. It doesn't sound like it 
really requires changes to the components system, either; Componentized 
seems like it could easily be implemented on top of PyProtocols.

> 	- context / interface based log separations

I don't really understand this, but it doesn't sound like it requires 
changes to the components system.

> And of course, integrating foom's string-based components would be great
> too.  There is a lot of friction even to add something like this to
> Twisted.  I imagine that adding something like this to PyProtocols, with
> potentially more projects out there depending on the exact specifics of
> all its semantics, would be even worse.

Well, Bob said in another message that he had already done 
string-registration of adapters successfully. (?)

> The other alternative is to add a bunch of specific hacks to PyProtocols
> that get loaded only when Twisted gets loaded, which could potentially
> introduce compatibility problems with other PyProtocols-using code,
> which would sort of invalidate the whole point of using a common
> components system in the first place.

My previous retorts make this point of yours irrelevant for the moment, 
so I will not respond: if you want, you may debate my retorts and we can 
get to this point once we have worked those out.[1]

[1] I need to figure out a succinct way to say this. Maybe some Latin 
crap. It's way too verbose. spiv suggested "ad nauseum" when I asked 
him... Better look that one up. ;-)

> Then we have the issue of the PyProtocols dependency; dependency
> management can be quite hairy on windows.

Hmm, yeah, I assumed we would include our own (hopefully unhacked) copy 
of PyProtocols in releases.

> Maybe I'm alone in these concerns, though.  Does anyone else feel that
> depending on PyProtocols would increase the learning curve for Twisted
> even more?  Or is this common knowledge in the Python community that
> could be leveraged to actually make the curve shallower?  I can
> certainly learn to wrap my head around the whole thing if nobody else
> has trouble with it :)

I kinda hold this reservation. PyProtocols is VERY complex compared to 
the t.p.c components system. But maintaining our own inadequate version 
is pretty sucky.

>>There might be some other issues that could come up, but I'm definitely 
>>willing to try to "adapt" to Twisted's needs in these areas, especially if 
>>it means I could get rid of PyProtocols' wrapper code and wrapping tests 
>>for Twisted's existing interface class.  :)
> 
> 
> This is clearly something that we need to talk about more.  As many
> silly disagreements about design as I can come up with, a common
> components system would be beneficial to everyone involved.  Are you
> coming to PyCon? :)

PyCon! PyCon! Everybody come to PyCon!

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/9a29e159/attachment.pgp 

From foom at fuhm.net  Thu Feb 26 19:13:04 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 19:13:04 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077836183.3688.137.camel@localhost>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost>
Message-ID: <B67B182E-68B9-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 5:56 PM, Glyph Lefkowitz wrote:
> Parts of PyProtocols do strike me as dangerous, evil, and overcomplex,
> though :)  In particular,
>
> http://peak.telecommunity.com/protocol_ref/proto-implication.html
>
> The idea of passing numeric priorities for different implementations 
> has
> always seemed deeply wrong to me.
I believe you misunderstood -- you don't pass numeric priorities, they 
are used internally to measure the length of a chain of adapters (for 
the transitive adaptation) so that the shortest chain is always used.

> 4000 lines of code related
> to components, whereas t.p.components has 300?  It worries me.

It's actually only non-blank 996 lines, not including testcases (836 
lines), pyrex speedup code (233 lines), or twisted/zope compatibility 
(159 lines).

Compare this to twisted.python.component's 392 lines (+350 lines of 
tests). Not too bad, really. The PyProtocols authors seem to really 
like blank lines, there's 1842 of those compared to twisted's 182. :)

James




From pje at telecommunity.com  Thu Feb 26 19:17:53 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 19:17:53 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077836183.3688.137.camel@localhost>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
Message-ID: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>

At 05:56 PM 2/26/04 -0500, Glyph Lefkowitz wrote:
>On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
> > Yep, just subclass InterfaceClass and add a __call__ method that calls 
> back
> > to adapt() and you'd be all set.  One other benefit to PyProtocols is that
> > you can track what interfaces an *instance* supports, independent of what
> > its class supports.
>
>Would you consider adding this to PyProtocols directly?

I have considered it.  Unfortunately, it runs counter to one PyProtocols 
use case I'd like to support, which is the ability to use an abstract base 
class as a protocol.  That is, somebody should be able to instantiate 
non-abstract subclasses of a protocol.  While I don't personally use this 
except for some stuff in peak.util.fmtparse, I've had some previous 
indications that Guido may favor an ABC-style (Abstract Base Class) for 
interfaces when they eventually land in Python.  So, I'd like to avoid 
making it impossible to instantiate interface subclasses.

Again, this would be easily solved by a Twisted-specific subclass of 
protocols.InterfaceClass, and I don't see that doing it is necessarily a 
bad thing for either Twisted or PyProtocols, although it may be that it 
should be considered simply a transitional, backward-compatibility thing.


>   If we're going
>to maintain a component system as part of Twisted, I would like to at
>least get the benefit of having full control over the component system
>within Twisted.  I don't want to have some people using PyProtocols and
>others using PyProtocols+TwistedHacks.

I'm not sure I follow you here.  Private extensions to PyProtocols' base 
classes is certainly permitted and encouraged, to provide additional 
features needed by particular frameworks, as long as the core interfaces 
are respected (e.g. 'IOpenProtocol').  PyProtocols itself offers several 
specialized protocol implementations, including Protocol, InterfaceClass, 
Variation, URIProtocol, SequenceProtocol, and so on.


>There are a lot of features I'd add to Twisted's component system if I
>had time, such as:
>
>         - implicit context-dependent location of closest running t.a.service
>services by interface
>         - interface-based context (moshez's context trick)
>         - automatic generation of interfaces from any class
>         - IComponentized
>         - context / interface based log separations

Actually, if I understand correctly, these mostly sound like things outside 
PyProtocols' scope.  peak.binding and peak.config implement some of this 
stuff by defining various interfaces they want, and using PyProtocols to 
adapt things to those interfaces.  But that's entirely independent of 
PyProtocols itself.

In other words, PyProtocols isn't tightly coupled to a component 
architecture, but is instead a convenient base for building component 
architectures.


>And of course, integrating foom's string-based components would be great
>too.  There is a lot of friction even to add something like this to
>Twisted.  I imagine that adding something like this to PyProtocols, with
>potentially more projects out there depending on the exact specifics of
>all its semantics, would be even worse.
>
>The other alternative is to add a bunch of specific hacks to PyProtocols
>that get loaded only when Twisted gets loaded, which could potentially
>introduce compatibility problems with other PyProtocols-using code,
>which would sort of invalidate the whole point of using a common
>components system in the first place.

Again, if I understand correctly, these are services you would build atop 
PyProtocols or using PyProtocols, and wouldn't need to extend PyProtocols for.

Let's take a specific example: you mentioned locating nearby services by 
interface.  peak.config does this with two interfaces: IConfigSource and 
IConfigKey:

class IConfigSource(Interface):

     """Something that can be queried for configuration data"""

     def _getConfigData(forObj, configKey):

         """Return a value of 'configKey' for 'forObj' or 'NOT_FOUND'

         Note that 'configKey' is an 'IConfigKey' instance and may therefore be
         a 'PropertyName' or an 'Interface' object."""


class IConfigKey(Interface):

     """Configuration data key, used for 'config.lookup()' et al

     Configuration keys may be polymorphic at registration or lookup time.
     IOW, when looking up a configuration key, you can search multiple values
     that would imply the key being looked for.  And, when registering a value
     for a configuration key, the key can supply alternate keys that it should
     be registered under.  Thus, an 'IConfigKey' is never itself directly used
     as a key, only the values supplied by its 'registrationKeys()' and
     'lookupKeys()' methods are used.  (However, those values must themselves
     be adaptable to 'IConfigKey', and they must be usable as dictionary keys.)
     """

     def registrationKeys(depth=0):
         """Iterate over (key,depth) pairs to be used when registering"""

     def lookupKeys():
         """Iterate over keys that should be used for lookup"""

Now, some of the things we want to use as configuration keys are 
interfaces.  So, we use PyProtocols to declare adapters that implement 
IConfigKey for all the interface types we work with (PyProtocols 
interfaces, Zope interfaces, and Twisted interfaces).  And of course we 
declare our "placeful" components as implementing IConfigSource.

Now, the API to look something up amounts to iterating over parent 
components, adapting them to IConfigSource, and passing them the needed 
configuration key, after having first adapted it to IConfigKey.

Now, let's say somebody wants to use a Twisted placeful component with PEAK 
or vice versa...  they just declare adapters to whichever interfaces aren't 
implemented, and life is good.  There's absolutely no reason you'd need to 
change PyProtocols for this, nor would you need to make Twisted's 
interfaces for component lookup anything like PEAK's.  Heck, if somebody 
wanted to, they could declare an IConfigKey adapter for Twisted's interface 
class, and then PEAK would be able to use all its existing lookup and 
component-binding APIs using Twisted interfaces as keys.    And that's 
*without* Twisted using PyProtocols.  :)


>Then we have the issue of the PyProtocols dependency; dependency
>management can be quite hairy on windows.

Indeed.  I've begun correspondence with Bob off-list about the possibility 
of me helping to port PIMP/PackMan to other platforms, though.


>Parts of PyProtocols do strike me as dangerous, evil, and overcomplex,
>though :)  In particular,
>
>http://peak.telecommunity.com/protocol_ref/proto-implication.html
>
>The idea of passing numeric priorities for different implementations has
>always seemed deeply wrong to me.

I understand.  However, I have yet to encounter a situation where I've 
actually used or needed to use it.  And, I consider passing explicit depth 
arguments to PyProtocols a hack: a side-effect of the implementation rather 
than an intentional design feature.


>   I have worked with one or two systems
>like this in the past (some MUD code in C++) where, inevitably, someone
>will want to make the 'real' default adapter for interface X; then
>someone else will want to make the 'really real' default adapter.
>Different developers will eventually keep trying to write comparison
>methods that leapfrog each other backwards to get to the correct result
>for last-most-from-greater-than-everything, which turns into a
>bug-ridden mess (and it's never really clear who should be "winning"
>this race to be the final overrider anyway).

Right, the proper solution is to:

1) have one protocol per use-case
2) don't reuse a protocol for other use cases that aren't an exact match
3) use transitive adaptation so that similar use cases can reuse adapters, 
while still allowing special cases to declare a direct adapter that 
overrides the transitive one

So far, this strategy has worked out very well for me, without need for 
explicit depth declaration.

By the way, though, I don't know what you mean by "default adapter".  Do 
you mean the adapter for type 'object', perhaps?  I can't imagine why 
somebody would care about that, though.


>More importantly I don't really understand if that's in fact what the
>'depth' value is used for, because my eyes glaze over halfway through
>the above web page :)  PyProtocols feels to me like it's gone out of
>even the upper levels of abstraction that the Twisted team is used to
>inhabiting, straight into the Zopeosphere... 4000 lines of code related
>to components, whereas t.p.components has 300?  It worries me.

Sigh.  I frequently regret having undertaken to document PyProtocols so 
thoroughly.  :(  Ironically, I did so thinking it would encourage 
developers of other frameworks to come on board.  ;)  Seriously, though, 
the only major differences I know of between PyProtocols and Twisted's 
interfaces are:

1) Transitive adaptation is automatic
2) Instances may implement interfaces, and can participate in their adaptation
3) Interface declarations are inherited from all base classes, not just the 
first

So, the "upper levels of abstraction" have solely to do with levels that 
you don't need to know about in order to simply *use* the system.  (See 
also 
http://peak.telecommunity.com/protocol_ref/module-protocols.twistedsupport.html 
for some of the minor details of current PyProtocols/Twisted compatibility.

But anyway, where the heck are you getting 4000 lines from?

pje at pje ~/PyProtocols
$ wc -l src/protocols/*.py
       9 src/protocols/__init__.py
     205 src/protocols/adapters.py  # adapter bases, adapter arithmetic, 
default adapters
     369 src/protocols/advice.py    # stuff to support interface declarations
     287 src/protocols/api.py       # API methods
     246 src/protocols/classic.py   # support for declaring interfaces on 
Python built-ins
     328 src/protocols/generate.py  # auto-generated interfaces, like 
protocolForURI
     410 src/protocols/interfaces.py   # the actual Protocol/Interface 
implementations, and interfaces for them
     205 src/protocols/twisted_support.py   # This would go away, or at 
least get shorter...  :)
     121 src/protocols/zope_support.py      # But we're probably stuck with 
this.  :)
    2180 total

And those files have lots of whitespace and documentation lines in 
'em.  Maybe you're including the tests?


>Maybe I'm alone in these concerns, though.  Does anyone else feel that
>depending on PyProtocols would increase the learning curve for Twisted
>even more?  Or is this common knowledge in the Python community that
>could be leveraged to actually make the curve shallower?  I can
>certainly learn to wrap my head around the whole thing if nobody else
>has trouble with it :)

Stop trying to understand it and just use it.  ;)  Seriously, though, I 
think that Twisted's Interface/Adapter How-To is the kind of documentation 
I *should* have written for PyProtocols.  The PyProtocols docs were biased 
towards proving that its framework is consistent and useful for all sorts 
of tricky edge cases and advanced interface usages, instead of just saying, 
"here, this is what you can do".  In particular, I wanted to show Jim 
Fulton that adaptation is more fundamental than interface implementation, 
because you can represent the latter as a special case of the 
former.  (i.e., the NO_ADAPTER_NEEDED adapter.)

So, as you can see right there, writing docs with Jim Fulton in mind as the 
intended audience is where I made my big mistake.  :)


> > There might be some other issues that could come up, but I'm definitely
> > willing to try to "adapt" to Twisted's needs in these areas, especially if
> > it means I could get rid of PyProtocols' wrapper code and wrapping tests
> > for Twisted's existing interface class.  :)
>
>This is clearly something that we need to talk about more.  As many
>silly disagreements about design as I can come up with, a common
>components system would be beneficial to everyone involved.  Are you
>coming to PyCon? :)

No, but I have an IRC client.  :)




From radix at twistedmatrix.com  Thu Feb 26 19:28:16 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:28:16 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <B67B182E-68B9-11D8-AB59-000A95A50FB2@fuhm.net>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost> <B67B182E-68B9-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E8F20.8040400@twistedmatrix.com>

James Y Knight wrote:
>> 4000 lines of code related
>> to components, whereas t.p.components has 300?  It worries me.
> 
> 
> It's actually only non-blank 996 lines, not including testcases (836 
> lines), pyrex speedup code (233 lines), or twisted/zope compatibility 
> (159 lines).

This makes me feel a lot better.

> Compare this to twisted.python.component's 392 lines (+350 lines of 
> tests). Not too bad, really. The PyProtocols authors seem to really like 
> blank lines, there's 1842 of those compared to twisted's 182. :)

I also hate how little vertical whitespace many Twisted hackers use ;-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/c690ed14/attachment.pgp 

From radix at twistedmatrix.com  Thu Feb 26 19:34:59 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:34:59 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <403E90B3.506@twistedmatrix.com>

Phillip J. Eby wrote:
> Stop trying to understand it and just use it.  ;)  Seriously, though, I 
> think that Twisted's Interface/Adapter How-To is the kind of 
> documentation I *should* have written for PyProtocols.  The PyProtocols 
> docs were biased towards proving that its framework is consistent and 
> useful for all sorts of tricky edge cases and advanced interface usages, 
> instead of just saying, "here, this is what you can do".  In particular, 
> I wanted to show Jim Fulton that adaptation is more fundamental than 
> interface implementation, because you can represent the latter as a 
> special case of the former.  (i.e., the NO_ADAPTER_NEEDED adapter.)
> 
> So, as you can see right there, writing docs with Jim Fulton in mind as 
> the intended audience is where I made my big mistake.  :)

Hmm, yeah, I think it would be helpful to have a document that mixes 1) 
explanation of interfaces/adaptors and why you need them and 2) basic 
introduction to PyProtocols to do what is outlined in #1. This is 
basically what the Twisted components howto is, but the Twisted 
components howto is pretty crappy, IMO :-) There's a lot of room for 
improvement in it even in that limited scope.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/a40d2e82/attachment.pgp 

From bob at redivi.com  Thu Feb 26 19:39:01 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 19:39:01 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E8671.1000308@twistedmatrix.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost> <403E8671.1000308@twistedmatrix.com>
Message-ID: <567EE7FC-68BD-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 6:51 PM, Christopher Armstrong wrote:

> Glyph Lefkowitz wrote:
>> And of course, integrating foom's string-based components would be 
>> great
>> too.  There is a lot of friction even to add something like this to
>> Twisted.  I imagine that adding something like this to PyProtocols, 
>> with
>> potentially more projects out there depending on the exact specifics 
>> of
>> all its semantics, would be even worse.
>
> Well, Bob said in another message that he had already done 
> string-registration of adapters successfully. (?)

Here's an example:

from protocols import *
import peak.utils.imports as imports
# does not depend on other PEAK stuff.. can easily be stolen

mxDateTime = imports.lazyModule('mx.DateTime')
datetime = imports.lazyModule('datetime')
def _hook_mx_DateTime(mxDateTime):
     declareAdapter(
         NO_ADAPTER_NEEDED,
         provides=[IBasicDate],
         forTypes=[mxDateTime.DateTimeType],
     )
     #datetime = imports.lazyModule('datetime')
     def convertToDateTime(obj, protocol):
         msec, second = math.modf(obj.second)
         # handle tzinfo ?
         return datetime.datetime(
             obj.year, obj.month, obj.day,
             obj.hour, obj.minute, int(obj.second),
             int(msec * 1e6), None
         )
     declareAdapter(
         convertToDateTime,
         provides=[IBasicDateTime],
         forTypes=[mxDateTime.DateTimeType],
     )
imports.whenImported('mx.DateTime.mxDateTime.mxDateTime', 
_hook_mx_DateTime)

def _hook_datetime(datetime):
     declareAdapter(
         NO_ADAPTER_NEEDED,
         provides=[IBasicDate],
         forTypes=[datetime.date],
     )
     declareAdapter(
         NO_ADAPTER_NEEDED,
         provides=[IBasicDateTime],
         forTypes=[datetime.datetime],
     )
imports.whenImported('datetime', _hook_datetime)

This could of course be automated a bit more, and there is probably 
even a better way.. but this was the first thing I stumbled across 
without thoroughly reading documentation or asking anyone :)

>> The other alternative is to add a bunch of specific hacks to 
>> PyProtocols
>> that get loaded only when Twisted gets loaded, which could potentially
>> introduce compatibility problems with other PyProtocols-using code,
>> which would sort of invalidate the whole point of using a common
>> components system in the first place.
>
> My previous retorts make this point of yours irrelevant for the 
> moment, so I will not respond: if you want, you may debate my retorts 
> and we can get to this point once we have worked those out.[1]
>
> [1] I need to figure out a succinct way to say this. Maybe some Latin 
> crap. It's way too verbose. spiv suggested "ad nauseum" when I asked 
> him... Better look that one up. ;-)

PyProtocols really is flexible enough to accommodate whatever.

>> Then we have the issue of the PyProtocols dependency; dependency
>> management can be quite hairy on windows.
>
> Hmm, yeah, I assumed we would include our own (hopefully unhacked) 
> copy of PyProtocols in releases.

I would suggest including it beside, not inside, Twisted.  The setup.py 
could check to see if a newer version is already installed, too.

>> Maybe I'm alone in these concerns, though.  Does anyone else feel that
>> depending on PyProtocols would increase the learning curve for Twisted
>> even more?  Or is this common knowledge in the Python community that
>> could be leveraged to actually make the curve shallower?  I can
>> certainly learn to wrap my head around the whole thing if nobody else
>> has trouble with it :)
>
> I kinda hold this reservation. PyProtocols is VERY complex compared to 
> the t.p.c components system. But maintaining our own inadequate 
> version is pretty sucky.

Well my first and last significant experience with a t.p.components 
based project:
== start using t.p.c ==
- Why AREN'T adapters transitive?
- How do I expose an interface that the *class* provides?
- Oh, I *can't do that*, I guess I'll have to patch t.p.c.
- Grudgingly write software on top of patched t.p.c.
== t.p.c gone forever ==
- Rewrite the code on PyProtocols.  It's a lot shorter and cleaner, 
even though I do use adapt(..., IFoo) instead of IFoo(...).
- Still haven't found a use case that PyProtocols can't already do.
- Started looking at PEAK, it solves most of the other problems I have 
(lazy imports, bindings, data modeling, etc.)
- .. hoping Twisted starts assimilating PEAK stuff, because it's better 
:)

>>> There might be some other issues that could come up, but I'm 
>>> definitely willing to try to "adapt" to Twisted's needs in these 
>>> areas, especially if it means I could get rid of PyProtocols' 
>>> wrapper code and wrapping tests for Twisted's existing interface 
>>> class.  :)
>> This is clearly something that we need to talk about more.  As many
>> silly disagreements about design as I can come up with, a common
>> components system would be beneficial to everyone involved.  Are you
>> coming to PyCon? :)
>
> PyCon! PyCon! Everybody come to PyCon!

I'm there!

-bob




From pje at telecommunity.com  Thu Feb 26 19:47:19 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 19:47:19 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E90B3.506@twistedmatrix.com>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>

At 07:34 PM 2/26/04 -0500, Christopher Armstrong wrote:
>Phillip J. Eby wrote:
>>Stop trying to understand it and just use it.  ;)  Seriously, though, I 
>>think that Twisted's Interface/Adapter How-To is the kind of 
>>documentation I *should* have written for PyProtocols.  The PyProtocols 
>>docs were biased towards proving that its framework is consistent and 
>>useful for all sorts of tricky edge cases and advanced interface usages, 
>>instead of just saying, "here, this is what you can do".  In particular, 
>>I wanted to show Jim Fulton that adaptation is more fundamental than 
>>interface implementation, because you can represent the latter as a 
>>special case of the former.  (i.e., the NO_ADAPTER_NEEDED adapter.)
>>So, as you can see right there, writing docs with Jim Fulton in mind as 
>>the intended audience is where I made my big mistake.  :)
>
>Hmm, yeah, I think it would be helpful to have a document that mixes 1) 
>explanation of interfaces/adaptors and why you need them and 2) basic 
>introduction to PyProtocols to do what is outlined in #1. This is 
>basically what the Twisted components howto is, but the Twisted components 
>howto is pretty crappy, IMO :-) There's a lot of room for improvement in 
>it even in that limited scope.

Yeah, my problem is that I don't usually write stuff to solve simple 
problems, because if it was a simple problem, somebody else would probably 
have already written something to solve it, and I could just download their 
implementation and be done with it.  :)

So, when I write something I'm almost invariably thinking about *hard* 
problems, and that tends to carry over into my documentation.  I'm finding 
that it's much better to get other people to draft documentation of my 
stuff, and then edit it for correctness or to show better ways to get the 
job done, because those other people usually have far more modest goals 
than I do, and will therefore use simpler examples.  For example, R.D. 
Murrary wrote a beautiful "Hello World"-driven tutorial for PEAK (at 
http://peak.telecommunity.com/DevCenter/IntroToPeak/ ) that I could never 
have written myself because it wouldn't have occurred to me to layer the 
examples according to complexity of the problem, rather than complexity of 
the solution.  :)  Contrast IntroToPeak with the PyProtocols docs: the 
former builds up solutions to bigger and bigger problems, while completely 
bypassing any discussion of PEAK fundamentals.  Conversely, the PyProtocols 
doc builds up from tiny little pieces and assembles them into a bigger and 
bigger framework.  That type of documentation is more useful for people 
developing and extending the framework itself, than for people who want to 
use it.  So, PyProtocols really needs another R.D. Murray to come along and 
explain how to do "Hello World" in PyProtocols.  :)




From radix at twistedmatrix.com  Thu Feb 26 19:50:25 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:50:25 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <567EE7FC-68BD-11D8-8DBD-000A95686CD8@redivi.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost> <403E8671.1000308@twistedmatrix.com> <567EE7FC-68BD-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <403E9451.4000408@twistedmatrix.com>

Bob Ippolito wrote:
> def _hook_datetime(datetime):
>     declareAdapter(
>         NO_ADAPTER_NEEDED,
>         provides=[IBasicDate],
>         forTypes=[datetime.date],
>     )
>     declareAdapter(
>         NO_ADAPTER_NEEDED,
>         provides=[IBasicDateTime],
>         forTypes=[datetime.datetime],
>     )
> imports.whenImported('datetime', _hook_datetime)
> 
> This could of course be automated a bit more, and there is probably even 
> a better way.. but this was the first thing I stumbled across without 
> thoroughly reading documentation or asking anyone :)

Hmm, yeah, we want something more along the lines of:

   registerAdapter(convertToDateTime,
                   forStringTypes=['mxDateTime.DateTimeType'],
                   provides=[IBasicDateTime])

But your example does show off the crazy crap you can do, which makes me 
believe that something like this would be quite easy to implement.

> On Feb 26, 2004, at 6:51 PM, Christopher Armstrong wrote:
>> Hmm, yeah, I assumed we would include our own (hopefully unhacked) 
>> copy of PyProtocols in releases.
> 
> 
> I would suggest including it beside, not inside, Twisted.  The setup.py 
> could check to see if a newer version is already installed, too.

I didn't mean "inside the 'twisted' Python package", I meant "in the 
Twisted package" ;-). So, yeah, beside Twisted, I guess.

> - .. hoping Twisted starts assimilating PEAK stuff, because it's better :)

:-D



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/87a6b2df/attachment.pgp 

From radix at twistedmatrix.com  Thu Feb 26 19:53:32 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:53:32 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
Message-ID: <403E950C.60501@twistedmatrix.com>

Phillip J. Eby wrote:
> So, when I write something I'm almost invariably thinking about *hard* 
> problems, and that tends to carry over into my documentation.  I'm 
> finding that it's much better to get other people to draft documentation 
> of my stuff, and then edit it for correctness or to show better ways to 
> get the job done, because those other people usually have far more 
> modest goals than I do, and will therefore use simpler examples.  For 
> example, R.D. Murrary wrote a beautiful "Hello World"-driven tutorial 
> for PEAK (at http://peak.telecommunity.com/DevCenter/IntroToPeak/ ) that 
> I could never have written myself because it wouldn't have occurred to 
> me to layer the examples according to complexity of the problem, rather 
> than complexity of the solution.  :)  Contrast IntroToPeak with the 
> PyProtocols docs: the former builds up solutions to bigger and bigger 
> problems, while completely bypassing any discussion of PEAK 
> fundamentals.  Conversely, the PyProtocols doc builds up from tiny 
> little pieces and assembles them into a bigger and bigger framework.  
> That type of documentation is more useful for people developing and 
> extending the framework itself, than for people who want to use it.  So, 
> PyProtocols really needs another R.D. Murray to come along and explain 
> how to do "Hello World" in PyProtocols.  :)

OTOH, I want to say that your documentation does seem very good: when 
the time comes to be go into interstellar abstraction-space, I think it 
will be quite useful. But, indeed, introductory material is very very 
important. :-)


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/6bb4ca39/attachment.pgp 

From rc at pgdn.org  Thu Feb 26 20:01:59 2004
From: rc at pgdn.org (Robert Church)
Date: Thu, 26 Feb 2004 17:01:59 -0800
Subject: [Twisted-Python] Components
In-Reply-To: <403E950C.60501@twistedmatrix.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226193915.023feec0@telecommunity.com> <403E950C.60501@twistedmatrix.com>
Message-ID: <20040227010159.GH29139@pgdn.org>

On Thu, Feb 26, 2004 at 07:53:32PM -0500, Christopher Armstrong quipped:

> OTOH, I want to say that your documentation does seem very good: when 
> the time comes to be go into interstellar abstraction-space, I think it 
> will be quite useful. But, indeed, introductory material is very very 
> important. :-)

I agree. The importance of introductory material cannot be overstated
without difficulty.



From itamar at itamarst.org  Thu Feb 26 20:11:35 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 26 Feb 2004 20:11:35 -0500
Subject: [Twisted-Python] Typo in /twisted/test/test_enterprise.py -
	Twisted 1.2 RC2
In-Reply-To: <403C7C0B.5060108@ivsn.com>
References: <403C7C0B.5060108@ivsn.com>
Message-ID: <1077844295.5807.0.camel@sheriffpony>

Please add bug reports and feature requests to
http://twistedmatrix.com/bugs/.




From john at landahl.org  Thu Feb 26 20:39:29 2004
From: john at landahl.org (John Landahl)
Date: Thu, 26 Feb 2004 17:39:29 -0800
Subject: [Twisted-Python] PB over SSH
Message-ID: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>

I've hacked up a working implementation of PB over SSH (Conch) if anyone
is interested.  It's a convienient way to have both transport security
and authentication for PB sessions.

I've implemented a version in plain Twisted and one using PEAK+Twisted.
The code is a little rough, but if there's any interest I can clean it
up for general consumption.



From mesozoic at polynode.com  Thu Feb 26 21:03:26 2004
From: mesozoic at polynode.com (Alex Levy)
Date: Thu, 26 Feb 2004 21:03:26 -0500
Subject: [Twisted-Python] PB over SSH
In-Reply-To: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
Message-ID: <1077847406.1440.18.camel@hyla>

On Thu, 2004-02-26 at 20:39, John Landahl wrote:
> I've hacked up a working implementation of PB over SSH (Conch) if anyone
> is interested.  It's a convienient way to have both transport security
> and authentication for PB sessions.
> 
> I've implemented a version in plain Twisted and one using PEAK+Twisted.
> The code is a little rough, but if there's any interest I can clean it
> up for general consumption.

Yes, please :)

-- 
Alex Levy
WWW: http://mesozoic.geecs.org

"Never let your sense of morals prevent you from doing what is right."
-- Salvor Hardin, Isaac Asimov's _Foundation_

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040226/0540d599/attachment.pgp 

From andrew-twisted at puzzling.org  Thu Feb 26 21:31:47 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Fri, 27 Feb 2004 13:31:47 +1100
Subject: [Twisted-Python] Re: DeferredList.addDeferred behaviour
In-Reply-To: <uu11dalkz.fsf@fitlinxx.com>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz> <uu11dalkz.fsf@fitlinxx.com>
Message-ID: <20040227023147.GB3468@frobozz>

On Thu, Feb 26, 2004 at 10:48:12AM -0500, David Bolen wrote:
[...]
> 
> Without addDeferred I need to aggregate the underlying deferreds
> separately, but more importantly, I need a completely separate loop to
> install the suppression errbacks, because that has to be done _after_
> the Deferreds are stuck into the DeferredList or else that suppression
> will stop the DeferredList from seeing the error.

Interesting.  I think I'd still rather the two loops than the confusing
semantics of addDeferred.

[...]
> 
> Although if DeferredList were to grow a way to specify that it should
> suppress errors once it has gathered them, I'd probably be just as
> happy as having addDeferred fixed, since the separate loop for error
> suppression bugs me more than the need to separately aggregate the
> Deferreds together before creating the DeferredList.  Actually
> suppressing errors might make me even happier, since needing to
> suppress the errors separately (noted in the API documentation, but
> not the HowTo), while making perfect sense to me now, took a while to
> catch on to initially.

I think adding a 'consumeErrors' or 'suppressErrors' flag might be a good
idea... I've put a patch up at http://twistedmatrix.com/bugs/issue528 --
let's continue discussion there.

In the meantime, I've checked in the change to deprecate addDeferred, and
removed it from the howto.

-Andrew.




From teratorn at world-net.net  Thu Feb 26 20:40:58 2004
From: teratorn at world-net.net (Eric Mangold)
Date: Thu, 26 Feb 2004 18:40:58 -0700
Subject: [Twisted-Python] Re: PB over SSH
In-Reply-To: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
Message-ID: <opr3z9mkvli4eeqj@mail.oaktech.net>

On Thu, 26 Feb 2004 17:39:29 -0800, John Landahl <john at landahl.org> wrote:

> I've hacked up a working implementation of PB over SSH (Conch) if anyone
> is interested.  It's a convienient way to have both transport security
> and authentication for PB sessions.
>
> I've implemented a version in plain Twisted and one using PEAK+Twisted.
> The code is a little rough, but if there's any interest I can clean it
> up for general consumption.

Nice. I would like to use this.

	-Eric




From glyph at twistedmatrix.com  Thu Feb 26 23:55:04 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 26 Feb 2004 23:55:04 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <1077857704.3236.140.camel@localhost>

On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
> But anyway, where the heck are you getting 4000 lines from?

Whoops!  Bad command-line argument to sloccount; I stand corrected and
apologize for FUD!




From glyph at twistedmatrix.com  Fri Feb 27 00:24:54 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 27 Feb 2004 00:24:54 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
Message-ID: <1077859494.3236.171.camel@localhost>

On Thu, 2004-02-26 at 19:47, Phillip J. Eby wrote:

> Yeah, my problem is that I don't usually write stuff to solve simple 
> problems, because if it was a simple problem, somebody else would probably 
> have already written something to solve it, and I could just download their 
> implementation and be done with it.  :)

> So, when I write something I'm almost invariably thinking about *hard* 
> problems, and that tends to carry over into my documentation.

I can understand that inclination myself, having more than once heard
Twisted accused of being "an impressive solution for which there are no
problems".  However, PEAK's documentation has been dense even for me.  I
certainly could not accuse if of not being thorough :).

In a discussion with another Twisted developer, it struck me that we may
be coming at the problem of components from completely different
angles.  I didn't understand why components were interesting at all
until I started to play with using them in the context of separation of
concerns within simulations.  Since these concerns can become
independently quite large, manage independent state, and are largely
interrelated only at relatively few boundary points, they're well-suited
towards collections of stateful adapters.  Compared to the use-cases
I've attempted to satisfy there, every usage of adapters has seemed
trivial.

Looking at PyProtocols, it doesn't seem to me to have taken simulations
or gaming into account as a use-case.  An indication of this is the
seperability of the full component model from the interface / adapters
system.  Without a full understanding of the execution context of an
adapter, I don't know how I could integrate external adapters like TTW
login or email delivery into a simulation.  (Pardon me for not being
terribly specific here.  It's difficult for me to come up with examples
that take less than 5 or 6 pages of dull prose to explain.) 

However, I am not sure, because I can't figure out what PEAK as a whole
is really for.  The likely source of an explanation,
http://peak.telecommunity.com/Articles/WhatisPEAK.html
seems awfully vague.  What is the problem that PEAK was designed to
solve, exactly?  Clearly it was difficult, because there was a lot of
solution :)

        An aside, for any would-be component system or documentation
        authors in the audience: much general literature on the use of
        components - including the Twisted component tutorial, I might
        add - is maddeningly vague, somewhat like "object oriented
        programming" tutorials.  I don't need to simulate simplistic
        bicycles or shapes or electrically incapacitated hairdryers, I
        want to write networked applications and video games, and it's
        not clear which concerns I should separate, how, and when.  Why
        does this stuff help me?






From glyph at twistedmatrix.com  Fri Feb 27 00:40:55 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 27 Feb 2004 00:40:55 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <1077860455.3688.189.camel@localhost>

On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
> At 05:56 PM 2/26/04 -0500, Glyph Lefkowitz wrote:
> >On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
> > > Yep, just subclass InterfaceClass and add a __call__ method that calls 
> > back
> > > to adapt() and you'd be all set.  One other benefit to PyProtocols is that
> > > you can track what interfaces an *instance* supports, independent of what
> > > its class supports.
> >
> >Would you consider adding this to PyProtocols directly?
> 
> I have considered it.  Unfortunately, it runs counter to one PyProtocols 
> use case I'd like to support, which is the ability to use an abstract base 
> class as a protocol.  That is, somebody should be able to instantiate 
> non-abstract subclasses of a protocol.  While I don't personally use this 
> except for some stuff in peak.util.fmtparse, I've had some previous 
> indications that Guido may favor an ABC-style (Abstract Base Class) for 
> interfaces when they eventually land in Python.  So, I'd like to avoid 
> making it impossible to instantiate interface subclasses.

Considering that this is a rather uncommon use-case, can it be made into
the non-default Interface class?  Or an attribute/feature of the default
one, such as

	class MyAbstractSub(IMyAbstract.ABC):
		pass

	class DontUseABC:
		__implements__ = MyAbstractSub.Interface

> Again, this would be easily solved by a Twisted-specific subclass of 
> protocols.InterfaceClass, and I don't see that doing it is necessarily a 
> bad thing for either Twisted or PyProtocols, although it may be that it 
> should be considered simply a transitional, backward-compatibility thing.

The __call__ hack, for me, is more than just syntactic sugar, or a
"transitional, backward-compatibility thing".  It's fundamental to my
personal use of the component system.  One-argument callables are used
_everywhere_ in Twisted, thanks mostly to Deferreds, but also because
"thing which takes one argument" is a very convenient interface for
using for a variety of different kinds of processing.  An idiom I find
tremendously convenient (even, perhaps especially, when debugging) is
"return foo.doSomethingDeferred().addCallback(IWhatever)".  IWhatever is
sometimes a variable, too - and it's quite common to use 'str', 'int',
or 'list' there instead of an interface.

Of course, I like the syntactic sugar quite a bit, too :).  It's
self-documenting.  When I have run tutorials for others on the use of
components, showing them an error on x.what(), and then success on
IWhatever(x).what() is enlightening.  Previously,  our analogue of
"adapt", "getAdapter", was difficult to explain.

(BTW: a common idiom for using interfaces is to scope method names.  An
optimization I want to add to Twisted at some point is stateless
interface-method-call syntax which can do this efficiently, something
like: IWhatever.what(x).  I believe you should be able to avoid a bunch
of Python object allocation overhead by doing it that way.  Does
PyProtocols provide any such facility?)

> >   If we're going
> >to maintain a component system as part of Twisted, I would like to at
> >least get the benefit of having full control over the component system
> >within Twisted.  I don't want to have some people using PyProtocols and
> >others using PyProtocols+TwistedHacks.
> 
> I'm not sure I follow you here.  Private extensions to PyProtocols' base 
> classes is certainly permitted and encouraged, to provide additional 
> features needed by particular frameworks, as long as the core interfaces 
> are respected (e.g. 'IOpenProtocol').  PyProtocols itself offers several 
> specialized protocol implementations, including Protocol, InterfaceClass, 
> Variation, URIProtocol, SequenceProtocol, and so on.
[...]
> Actually, if I understand correctly, these mostly sound like things outside 
> PyProtocols' scope.  peak.binding and peak.config implement some of this 
> stuff by defining various interfaces they want, and using PyProtocols to 
> adapt things to those interfaces.  But that's entirely independent of 
> PyProtocols itself.

> In other words, PyProtocols isn't tightly coupled to a component 
> architecture, but is instead a convenient base for building component 
> architectures.

Perhaps we should be discussing Twisted using PEAK, then?  I don't want
to use half a component system and implement the other half myself. 
Maybe you can come up with a counterexample, but it seems to me that the
benefit of a common protocol system would be lost without the use of a
common component model.

> Let's take a specific example: you mentioned locating nearby services by 
> interface.  peak.config does this with two interfaces: IConfigSource and 
> IConfigKey:

Woah there, sparky!  That looks a lot like the earlier documentation I
was having trouble with.  A brief example, maybe? :)

> >Then we have the issue of the PyProtocols dependency; dependency
> >management can be quite hairy on windows.
> 
> Indeed.  I've begun correspondence with Bob off-list about the possibility 
> of me helping to port PIMP/PackMan to other platforms, though.

Thank goodness.  It needs to be done; Twisted needs to be broken up into
smaller pieces.

> By the way, though, I don't know what you mean by "default adapter".  Do 
> you mean the adapter for type 'object', perhaps?  I can't imagine why 
> somebody would care about that, though.

I mean the adapter for type "Thing", mostly.  The general idea being
that you want to override what happens before someone picks up a
"normal" object when they're under the influence of a particular
enchantment.  It is difficult to specify rules for which enchantment's
hook takes precedence, so authors get into fights by specifying
ever-lower numbers.

> Stop trying to understand it and just use it.  ;)

Really, an interface specification / lookup system is a pretty basic
part of a system which uses it, on par with a function calling
convention.  I want to know _exactly_ what goes on when I use it; I
never want to be surprised by a weird component getting looked up when
that wasn't what I intended.  With so much indirection in place that's
too easy already.

> So, as you can see right there, writing docs with Jim Fulton in mind as the 
> intended audience is where I made my big mistake.  :)

Quite.  But, it seems like for that audience, you wrote it well :).  As
much as I respect his work, I don't think it would be a misnomer to call
me bizarro jim fulton.  I tend to have near-opposite interest in
problems, but to come up with identical-looking solutions more often
than not...

> No, 

Sad to hear that :-(

> but I have an IRC client.  :)

irc.freenode.net/#twisted is always there (and I am often in it)




From radix at twistedmatrix.com  Fri Feb 27 08:16:40 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 08:16:40 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077859494.3236.171.camel@localhost>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com> <1077859494.3236.171.camel@localhost>
Message-ID: <403F4338.9020105@twistedmatrix.com>

Glyph Lefkowitz wrote:
> In a discussion with another Twisted developer, it struck me that we may
> be coming at the problem of components from completely different
> angles.  I didn't understand why components were interesting at all
> until I started to play with using them in the context of separation of
> concerns within simulations.  Since these concerns can become
> independently quite large, manage independent state, and are largely
> interrelated only at relatively few boundary points, they're well-suited
> towards collections of stateful adapters.  Compared to the use-cases
> I've attempted to satisfy there, every usage of adapters has seemed
> trivial.
> 
> Looking at PyProtocols, it doesn't seem to me to have taken simulations
> or gaming into account as a use-case.  An indication of this is the
> seperability of the full component model from the interface / adapters
> system.  Without a full understanding of the execution context of an
> adapter, I don't know how I could integrate external adapters like TTW
> login or email delivery into a simulation.  (Pardon me for not being
> terribly specific here.  It's difficult for me to come up with examples
> that take less than 5 or 6 pages of dull prose to explain.) 

You're right, the developers probably had vastly different applications 
in mind. However, the only technical difference I notice in the 'game 
simulations' arena is Componentized, and that's actually a fairly simple 
thing (In fact, from what I read in the PyProtocols documentation last 
night, it seemed like similar things already exist, or could trivially 
be implemented).

You can talk about 'different philosophies', but that's meaningless 
until you say what technical differencies you actually mean. Maybe you 
could explain what aspects of twisted.python.components you consider are 
more simulation-oriented? I'm sure it's not that hard for you to squeeze 
down your '5 or 6 pages', as I've seen you explain various Reality 
concepts in much less text, and we have an audience that's very familiar 
with component systems, interfaces, and adapters here. Maybe Jp can jump 
in, too, as he was the one who originally brought up the 'difference in 
philosophies' point.

As far as the technical stuff goes, PyProtocols and t.p.c do the same 
thing, and PyProtocols *can* do everything we have and want, at least 
from what I've recently heard people want (string adaptation, 
Componentized, adapter contexts...).

> However, I am not sure, because I can't figure out what PEAK as a whole
> is really for.  The likely source of an explanation,
> http://peak.telecommunity.com/Articles/WhatisPEAK.html
> seems awfully vague.  What is the problem that PEAK was designed to
> solve, exactly?  Clearly it was difficult, because there was a lot of
> solution :)

Yeah, reading PEAK's web site is pretty amusing. otoh, our own web copy, 
while less 'professional', is also pretty lame :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040227/901c2265/attachment.pgp 

From radix at twistedmatrix.com  Fri Feb 27 08:23:59 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 08:23:59 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077860455.3688.189.camel@localhost>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost>
Message-ID: <403F44EF.7040904@twistedmatrix.com>

Glyph Lefkowitz wrote:
> On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
>>In other words, PyProtocols isn't tightly coupled to a component 
>>architecture, but is instead a convenient base for building component 
>>architectures.
> 
> 
> Perhaps we should be discussing Twisted using PEAK, then?  I don't want
> to use half a component system and implement the other half myself. 

Why?

> Maybe you can come up with a counterexample, but it seems to me that the
> benefit of a common protocol system would be lost without the use of a
> common component model.

This whole *thread* has been about the benefits of using only 
PyProtocols without PEAK (Not that I'm opposed to using PEAK -- I don't 
know enough about it yet. I'm just opposed to meaningless arguments :)

>>Let's take a specific example: you mentioned locating nearby services by 
>>interface.  peak.config does this with two interfaces: IConfigSource and 
>>IConfigKey:
> 
> Woah there, sparky!  That looks a lot like the earlier documentation I
> was having trouble with.  A brief example, maybe? :)

Yeah, my eyes kinda glazed over on this one, too, since I have no idea 
what IConfigSource and IConfigKey are.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040227/1b5c3dfa/attachment.pgp 

From pje at telecommunity.com  Fri Feb 27 09:26:56 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 09:26:56 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077859494.3236.171.camel@localhost>
References: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
Message-ID: <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>

At 12:24 AM 2/27/04 -0500, Glyph Lefkowitz wrote:

>Looking at PyProtocols, it doesn't seem to me to have taken simulations
>or gaming into account as a use-case.  An indication of this is the
>seperability of the full component model from the interface / adapters
>system.  Without a full understanding of the execution context of an
>adapter, I don't know how I could integrate external adapters like TTW
>login or email delivery into a simulation.  (Pardon me for not being
>terribly specific here.  It's difficult for me to come up with examples
>that take less than 5 or 6 pages of dull prose to explain.)

There was a recent discussion of writing an interactive fiction game using 
PyProtocols on the PEAK mailing list; the thread started here:

http://www.eby-sarna.com/pipermail/peak/2004-February/001245.html

Mostly, I told the guy what sort of component model sounded like it would 
work for what he was trying to do, and how to do that sort of component 
model with PyProtocols.

To pull out your statement about execution context, though, I should 
mention that in PEAK, some adapters are "contextful" and others are 
not.  The PEAK component model has the simple concept of things having 
parent components.  Adapters that want to know about context make sure to 
set their parent to the thing they're adapting, or perhaps its 
parent.  Whenever you put a component in another component, the container 
adapts the containee to binding.IAttachable if possible, and tells it, 
"hey, I might be your parent", so the containee can know its 
context.  That's really about it for context.  The binding and config 
packages then offers lots of useful APIs to walk up the parent tree to find 
or do things.


>However, I am not sure, because I can't figure out what PEAK as a whole
>is really for.  The likely source of an explanation,
>http://peak.telecommunity.com/Articles/WhatisPEAK.html
>seems awfully vague.  What is the problem that PEAK was designed to
>solve, exactly?  Clearly it was difficult, because there was a lot of
>solution :)

What is Twisted as a whole really for?  ;)  At least PEAK's name says 
exactly what it is: Python Enterprise Application Kit.  It's a kit for 
writing enterprise applications in Python.  Specifically, configurable, 
component-based applications.  The PEAK core (aka peak.core) frameworks are 
a component architecture for building task-specific frameworks.  The rest 
of PEAK is either task-specific frameworks (storage, events, net, commands, 
etc.), utility modules, or development/deployment tools (supervisor, 
version, n2, etc.)




From pje at telecommunity.com  Fri Feb 27 09:58:23 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 09:58:23 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077860455.3688.189.camel@localhost>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <5.1.0.14.0.20040227092743.03091a70@mail.telecommunity.com>

At 12:40 AM 2/27/04 -0500, Glyph Lefkowitz wrote:

>Considering that this is a rather uncommon use-case, can it be made into
>the non-default Interface class?  Or an attribute/feature of the default
>one, such as
>
>         class MyAbstractSub(IMyAbstract.ABC):
>                 pass
>
>         class DontUseABC:
>                 __implements__ = MyAbstractSub.Interface

Hmm.  I suppose it's possible I could have a 'protocols.Abstract' that 
could be subclassed in place of Interface, if you wanted to use the ABC 
style.  But then, couldn't you also use an 'adapt()' method, i.e.:

foo = IWhatever.adapt(bar)

?

> > Again, this would be easily solved by a Twisted-specific subclass of
> > protocols.InterfaceClass, and I don't see that doing it is necessarily a
> > bad thing for either Twisted or PyProtocols, although it may be that it
> > should be considered simply a transitional, backward-compatibility thing.
>
>The __call__ hack, for me, is more than just syntactic sugar, or a
>"transitional, backward-compatibility thing".  It's fundamental to my
>personal use of the component system.  One-argument callables are used
>_everywhere_ in Twisted, thanks mostly to Deferreds, but also because
>"thing which takes one argument" is a very convenient interface for
>using for a variety of different kinds of processing.  An idiom I find
>tremendously convenient (even, perhaps especially, when debugging) is
>"return foo.doSomethingDeferred().addCallback(IWhatever)".  IWhatever is
>sometimes a variable, too - and it's quite common to use 'str', 'int',
>or 'list' there instead of an interface.
>
>Of course, I like the syntactic sugar quite a bit, too :).  It's
>self-documenting.  When I have run tutorials for others on the use of
>components, showing them an error on x.what(), and then success on
>IWhatever(x).what() is enlightening.  Previously,  our analogue of
>"adapt", "getAdapter", was difficult to explain.

Certainly, the convenience is tempting.  I worry more about the lack of 
commonality between 'IFoo(x)' and 'adapt(x,IFoo,somedefault)', from a 
presentation standpoint.

I think I'd like to hear some opinions from some existing PyProtocols users 
who aren't Twisted users before I "pronounce" on this.


>(BTW: a common idiom for using interfaces is to scope method names.  An
>optimization I want to add to Twisted at some point is stateless
>interface-method-call syntax which can do this efficiently, something
>like: IWhatever.what(x).  I believe you should be able to avoid a bunch
>of Python object allocation overhead by doing it that way.  Does
>PyProtocols provide any such facility?)

Not at the moment.  What I'd like to do at some point is add 
single-dispatch generic functions, though.  Then

class IWhatever:

     def what(self,...):
         ....

would be the default behavior for IWhatever.what(x), and you would define 
implementations via something like:

def what_foo(self,...):
     ...

IWhatever.what.add(what_foo, forTypes=[Foo])



> > Actually, if I understand correctly, these mostly sound like things 
> outside
> > PyProtocols' scope.  peak.binding and peak.config implement some of this
> > stuff by defining various interfaces they want, and using PyProtocols to
> > adapt things to those interfaces.  But that's entirely independent of
> > PyProtocols itself.
>
> > In other words, PyProtocols isn't tightly coupled to a component
> > architecture, but is instead a convenient base for building component
> > architectures.
>
>Perhaps we should be discussing Twisted using PEAK, then?  I don't want
>to use half a component system and implement the other half myself.

Okay.  The main issue there is going to be that PEAK is definitely still 
alpha, although the core CA stuff is *beginning* to approach PyProtocols' 
stability.  But it's nowhere near PyProtocols in documentedness, of course.


>Maybe you can come up with a counterexample, but it seems to me that the
>benefit of a common protocol system would be lost without the use of a
>common component model.

I don't really see it that way.  Right now, using PyProtocols, one can 
write components that play in both Zope and PEAK's component 
architectures.  (Granted, that's to some extent because Zope changed their 
CA to be more like PEAK, with interfaces for walking to parents and getting 
config data out of them.)

Not that I'm trying to talk you out of using PEAK's CA, mind.  I'm just 
saying that if you have radically different requirements, you might prefer 
to build your own.  If it's built atop PyProtocols, it'll be even easier to 
integrate your CA with other CAs if people have a need or desire to do so.



> > Let's take a specific example: you mentioned locating nearby services by
> > interface.  peak.config does this with two interfaces: IConfigSource and
> > IConfigKey:
>
>Woah there, sparky!  That looks a lot like the earlier documentation I
>was having trouble with.  A brief example, maybe? :)

Okay, let's say I want to get a hold of the event loop I should be a 
participant of...

class SomethingThatNeedsEvents(binding.Component):

     eventLoop = binding.Obtain(events.IEventLoop)

Okay, that's it.  That's the brief example.  :)  Seriously, this class is a 
component that, when used as part of a larger application, will 
automatically find the IEventLoop it's supposed to be using.  It may be 
defined in an .ini file, like this:

[Component Factories]
peak.events.interfaces.IEventLoop = "peak.events.io_events.EventLoop"

This says that when somebody asks for an IEventLoop, we will look at the 
requester's "service area" (a specially designated parent component), and 
if the service area doesn't already have one, we'll create a "singleton" 
instance of the peak.events.io_events.EventLoop class.

I say "singleton" in quotes because PEAK avoids true singletons like the 
plague.  Services are homed in a "service area", so there is usually one 
service instance per service area.  Typically, an app will do all its work 
in a single service area, but sometimes there are reasons to have 
additional service areas.

The other way you can make a service available (besides configuration for a 
service area) is to "offer" them from other components.  For example:

class SomethingWithACustomEventLoop(binding.Component):

     eventLoop = binding.Make(MyEventLoopClass, offerAs=[events.IEventLoop])

Each instance of this component will have its own private event loop 
instance.  In addition, any child component of an instance of this class 
will receive the instance's event loop whenever it requests an IEventLoop 
service.  So, if an instance of the first example class is made a child of 
an instance of this second example class, it will end up iwth a 
MyEventLoopClass instance as its eventLoop attribute.

Is this the sort of thing you're asking about?


> > By the way, though, I don't know what you mean by "default adapter".  Do
> > you mean the adapter for type 'object', perhaps?  I can't imagine why
> > somebody would care about that, though.
>
>I mean the adapter for type "Thing", mostly.  The general idea being
>that you want to override what happens before someone picks up a
>"normal" object when they're under the influence of a particular
>enchantment.  It is difficult to specify rules for which enchantment's
>hook takes precedence, so authors get into fights by specifying
>ever-lower numbers.

Ah.  That sounds like something that calls for a more explicit chain of 
responsibility that's not adapter driven.  That is, a component 
architecture issue.  Adaptation should be something you do to elements in 
the chain of responsibility in order to see if they want to participate in 
the current event.  But maybe I'm misunderstanding something about your use 
case.


>Really, an interface specification / lookup system is a pretty basic
>part of a system which uses it, on par with a function calling
>convention.  I want to know _exactly_ what goes on when I use it; I
>never want to be surprised by a weird component getting looked up when
>that wasn't what I intended.  With so much indirection in place that's
>too easy already.

There's really an easy solution to that.  If you want to be sure there's no 
confusion, define a new interface when you have a new use case.  And if an 
old interface mostly fits, you can make the new one a Variation of it or 
declare it to be implied by the old one.




From pje at telecommunity.com  Fri Feb 27 10:03:02 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 10:03:02 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403F4338.9020105@twistedmatrix.com>
References: <1077859494.3236.171.camel@localhost>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <1077859494.3236.171.camel@localhost>
Message-ID: <5.1.0.14.0.20040227100025.03dc05d0@mail.telecommunity.com>

At 08:16 AM 2/27/04 -0500, Christopher Armstrong wrote:
>Glyph Lefkowitz wrote:
>>However, I am not sure, because I can't figure out what PEAK as a whole
>>is really for.  The likely source of an explanation,
>>http://peak.telecommunity.com/Articles/WhatisPEAK.html
>>seems awfully vague.  What is the problem that PEAK was designed to
>>solve, exactly?  Clearly it was difficult, because there was a lot of
>>solution :)
>
>Yeah, reading PEAK's web site is pretty amusing. otoh, our own web copy, 
>while less 'professional', is also pretty lame :-)

Pot, I'd like to introduce you to my friend Kettle.  :)

Seriously, all of this boils down to the distutils.  If we could do 
CPAN-like dependencies, neither Zope nor Twisted nor PEAK would have these 
vague handwavy marketing materials.  We'd all have a list of things that 
people could download, each with far-less-handwavy descriptions.  And we'd 
be reusing a lot more of each other's stuff, I imagine.




From itamar at itamarst.org  Fri Feb 27 10:57:02 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 10:57:02 -0500
Subject: [Twisted-Python] PB over SSH
In-Reply-To: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
Message-ID: <1077897420.5802.13.camel@sheriffpony>

On Thu, 2004-02-26 at 20:39, John Landahl wrote:
> I've hacked up a working implementation of PB over SSH (Conch) if anyone
> is interested.  It's a convienient way to have both transport security
> and authentication for PB sessions.

PB over SSH is... a good idea, but not the way to implement this, exactly.

What you'd want is a SSH *transport*. It would allow you to run any
twisted protocol over an existing conch SSH connection, transparently,
just as you can run over TCP or SSL. In addition this transport should
provide a credential object tied to the logged in user so you can use it
with cred transparently. Plus a  SSH-to-TCP gateway transport that lets
you listen or connect using the SSH portforwarding support.

Once you've built this, PB over SSH is probably 10 lines of code.




From itamar at itamarst.org  Fri Feb 27 11:10:28 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 11:10:28 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
References: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
Message-ID: <1077898228.5803.18.camel@sheriffpony>

On Fri, 2004-02-27 at 09:26, Phillip J. Eby wrote:

> What is Twisted as a whole really for?  ;)

Networking applications. That is, programs that involve communicating
with other programs over a network, typically TCP/IP. Whereas
"enterprise" is to me anyway a meaningless word in this context. What is
the definition of an "enterprise application"?

Anyway - I propose we discuss switching to PyProtocols at PyCon. We can
then make a list of necessary changes and problems to make this happen,
or better yet try to implement as a test, and then we can come back to
PJE with specific rather than theoretical problems.




From dekonerding at lbl.gov  Fri Feb 27 11:17:31 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri, 27 Feb 2004 08:17:31 -0800
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
Message-ID: <403F6D9B.3070404@lbl.gov>

Hello, since nobody actually responding with a useful message regarding 
my report, I'm
reposting an extremely simple (1 page) example which exhibits the behavior.
My example creates a gtkreactor and runs it.  A small reporter class is 
run from a second thread.
Under the gtk reactor, the log messages from the second thread are not 
reported in a timely
fashion (only once per second or so).  From my understanding the 
messages should be printed more frequently (about once every 1/10th 
second).  This does work under the wx and plain reactors, so I suspect 
there is a defect in the gtk reactor.
I would simply like to get a confirmation that my example is a valid 
one, that the results I expect are valid, and that other
people can reproduce my experience.  If that is the case then I will 
submit a formal bug report.  All of this should be reproducible using 
Twisted 1.2.0.  Things get even weirder if you remove the logging 
support and replace it with all print statements.

import time, sys

from twisted.internet import gtk2reactor
gtk2reactor.install()
from twisted.python import threadable
threadable.init()
from twisted.internet import reactor
from twisted.python import log
log.startLogging(sys.stdout)

class TestThingy:
    def __init__(self):
        print "TestThingy created"

    def run(self):
        print "TestThingy run"
        for i in range(10):
            print "TestThingy message"
            time.sleep(0.1)
        print "TestThingy done"
       
class ThingyManager:
    def __init__(self):
        pass
       
    def submitThingy(self):
        log.err("ThingyManager submitting")
        f = TestThingy()
        log.err("ThingyManager created")
        reactor.callInThread(f.run)
        log.err("ThingyManager calledInThread")

def ticker(*args):
    log.err("ticker: %d" % time.time())
    reactor.callLater(1, ticker)

t = ThingyManager()
reactor.callLater(0, ticker)
reactor.callLater(3, t.submitThingy)
reactor.run()
log.err("Reactor done")




From db3l at fitlinxx.com  Fri Feb 27 11:17:36 2004
From: db3l at fitlinxx.com (David Bolen)
Date: 27 Feb 2004 11:17:36 -0500
Subject: [Twisted-Python] Re: Components
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost>
Message-ID: <u1xogts2n.fsf@fitlinxx.com>

Glyph Lefkowitz <glyph at twistedmatrix.com> writes:

> On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
(...)
> > I have considered it.  Unfortunately, it runs counter to one PyProtocols 
> > use case I'd like to support, which is the ability to use an abstract base 
> > class as a protocol.  That is, somebody should be able to instantiate 
> > non-abstract subclasses of a protocol.
(...)
>
> Considering that this is a rather uncommon use-case, can it be made into
> the non-default Interface class?  Or an attribute/feature of the default
> one, such as

Since neither Twisted, nor the default interfaces defined in
PyProtocols use the ABC approach, I've been curious about this since I
started using these packages.  Why aren't more interfaces defined in
the ABC style?  When Ifirst started defining some interfaces in my
project with PyProtocols, and had to make the choice between an ABC
interface and a documentation interface, ABC seemed to me as more
desirable.

I'll admit to almost wishing I didn't have the option at the time,
because to be true I didn't really have a good idea of the pros and
cons so it was sort of one of those uncertain feeling decisions (sort
of like picking a Python web or application framework :-)).  What
finally turned it for me was that the ABC approach gave me a clean
failure if the implementation object didn't really fulfill the
interface, as in forgot to override a method or declare an attribute.

Perhaps it was because the first set of things I was defining were
interfaces for specific components I was building, so there was a
natural 1:1 mapping between interface and initial objects.  I suppose
as my work grows I'll find more cases where the interfaces are just
portions of an object, but wouldn't it still be preferable to just use
MI from multiple interfaces to get the same failure handling?

Obviously, the ABC approach doesn't seem to be adopted by Twisted or
PyProtocols (at least for its official interfaces) themselves, but I
haven't really seen references to advantages of the non-ABC variant.

-- David




From Benjamin.Schollnick at usa.xerox.com  Fri Feb 27 11:18:55 2004
From: Benjamin.Schollnick at usa.xerox.com (Schollnick, Benjamin)
Date: Fri, 27 Feb 2004 11:18:55 -0500
Subject: [Twisted-Python] SSH connection
Message-ID: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>

Paul,

	I am attempting to use Twisted, for a simple SSH connection...

	As a example, I am using "The Transport" example from the how
to's...

from twisted.conch import error
from twisted.conch.ssh import transport
from twisted.internet import defer

class ClientTransport(transport.SSHClientTransport):

    def verifyHostKey(self, pubKey, fingerprint):
        if fingerprint != 'b1:94:6a:c9:24:92:d2:34:7c:62:35:b4:d2:61:11:84':
            return defer.fail(error.ConchError('bad key'))
        else:
            return defer.succeed(1)

    def connectionSecure(self):
        self.requestService(ClientUserAuth('user', ClientConnection()))


But....  It appears that something was not installed with the installer?

C:\develope\versions\test_code>ssh_test.py
Traceback (most recent call last):
  File "C:\develope\versions\test_code\ssh_test.py", line 2, in ?
    from twisted.conch.ssh import transport
  File
"C:\develope\Python23\Lib\site-packages\twisted\conch\ssh\transport.py",
line 37, in ?
    from Crypto import Util
ImportError: No module named Crypto

I am assuming that there is a prequiste package that needs to be installed,
presumably one of the multitude of Cryptography packages that I find on the
Vaults of Parnassus....

Is this accurate?

And if so, what package?

On the assumption it is PyCrypto....  I tried to install PyCrypto...

(The sad thing is that I'm running through all these hoops simply because I 
need to be able to make a SSH connection, and be able to read and write
to the stream... (ala Telnetlib))

when I:

	setup.py install

I receive:

	C:\develope\pycrypto-1.9a6>setup.py install
	running install
	running build
	running build_py
	running build_ext
	error: Python was built with version 6 of Visual Studio, and
extensions need to
	be built with the same version of the compiler, but it isn't
installed.

	Now I am running:

	C:\develope\pycrypto-1.9a6>python
	Python 2.3.2 (#49, Oct  2 2003, 20:02:00) [MSC v.1200 32 bit
(Intel)] on win32
	Type "help", "copyright", "credits" or "license" for more
information.
	>>>

I also have win32-157 installed....

Is there some way around this compile issue, does anyone know of a
precompiled
Windows binary for the PyCrypto kit??

		- Benjamin



From radix at twistedmatrix.com  Fri Feb 27 11:24:47 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 11:24:47 -0500
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
In-Reply-To: <403F6D9B.3070404@lbl.gov>
References: <403F6D9B.3070404@lbl.gov>
Message-ID: <403F6F4F.9010100@twistedmatrix.com>

David E. Konerding wrote:
> Hello, since nobody actually responding with a useful message regarding 
> my report, I'm
> reposting an extremely simple (1 page) example which exhibits the behavior.

Hmm, I don't see anything about the gtkreactor on the bug tracker.

http://twistedmatrix.com/bugs/

Please attach your example to the report you make.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040227/e13a5ed3/attachment.pgp 

From dekonerding at lbl.gov  Fri Feb 27 11:32:00 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri, 27 Feb 2004 08:32:00 -0800
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
In-Reply-To: <403F6F4F.9010100@twistedmatrix.com>
References: <403F6D9B.3070404@lbl.gov> <403F6F4F.9010100@twistedmatrix.com>
Message-ID: <403F7100.6080408@lbl.gov>

Christopher Armstrong wrote:

> David E. Konerding wrote:
>
>> Hello, since nobody actually responding with a useful message 
>> regarding my report, I'm
>> reposting an extremely simple (1 page) example which exhibits the 
>> behavior.
>
>
> Hmm, I don't see anything about the gtkreactor on the bug tracker.
>
> http://twistedmatrix.com/bugs/
>
> Please attach your example to the report you make.
>
I'd like to at least confirm that my example is a valid one before 
reported a bug.  So far nobody has reported
they can reproduce my example or that my example is wrong.

Dave



From itamar at itamarst.org  Fri Feb 27 11:36:18 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 11:36:18 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
References: 
	 <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
Message-ID: <1077899778.5802.24.camel@sheriffpony>

Summary - you need to install PyCrypto, and if you do it from source
that means you need to do it with a compiler installed. You can use
mingw compiler with a bit of work (there's a howto somewhere), or you
can find a pre-compiled version.

http://webcleaner.sourceforge.net/ has instructions on compiling
pycrypto on windows.

Anyone have a precompiled exe we can put on the site?




From michal at pasternak.w.lub.pl  Fri Feb 27 11:40:33 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 27 Feb 2004 17:40:33 +0100
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
References: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
Message-ID: <20040227164033.GA28086@pasternak.w.lub.pl>

Schollnick, Benjamin [Fri, Feb 27, 2004 at 11:18:55AM -0500]:
> On the assumption it is PyCrypto....  I tried to install PyCrypto...

Yes, you're right. The package is called py-amkCrypto in pkgsrc, homepage at
http://www.amk.ca/python/code/crypto.html, works with py-twisted on Unix.

> 	error: Python was built with version 6 of Visual Studio, and
> extensions need to
> 	be built with the same version of the compiler, but it isn't
> installed.

... and that's right!

To build python packages you will sometimes need a C compiler. gcc for
Windows is called "mingw" or "mingw32" (mingw.sf.net), but I suggest using
Dev-C++ from Bloodshed.net (http://www.bloodshed.net/).

To "teach" distutils to use mingw, you will need some voodo:
http://sebsauvage.net/python/mingw.html

> Is there some way around this compile issue, does anyone know of a
> precompiled
> Windows binary for the PyCrypto kit??

Propably it exists somewhere. Google! :)



From z3p at twistedmatrix.com  Fri Feb 27 11:44:55 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Fri, 27 Feb 2004 11:44:55 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
References: 
	 <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
Message-ID: <1077900294.1239.14.camel@petra>

On Fri, 2004-02-27 at 11:18, Schollnick, Benjamin wrote:
> Paul,
> 
> 	I am attempting to use Twisted, for a simple SSH connection...
> 
> 	As a example, I am using "The Transport" example from the how
> to's...
> 
> from twisted.conch import error
> from twisted.conch.ssh import transport
> from twisted.internet import defer
> 
> class ClientTransport(transport.SSHClientTransport):
> 
>     def verifyHostKey(self, pubKey, fingerprint):
>         if fingerprint != 'b1:94:6a:c9:24:92:d2:34:7c:62:35:b4:d2:61:11:84':
>             return defer.fail(error.ConchError('bad key'))
>         else:
>             return defer.succeed(1)
> 
>     def connectionSecure(self):
>         self.requestService(ClientUserAuth('user', ClientConnection()))
> 
> 
> But....  It appears that something was not installed with the installer?
> 
> C:\develope\versions\test_code>ssh_test.py
> Traceback (most recent call last):
>   File "C:\develope\versions\test_code\ssh_test.py", line 2, in ?
>     from twisted.conch.ssh import transport
>   File
> "C:\develope\Python23\Lib\site-packages\twisted\conch\ssh\transport.py",
> line 37, in ?
>     from Crypto import Util
> ImportError: No module named Crypto

Yes, it uses several modules, all of which are documented in the README
and INSTALL files.

> On the assumption it is PyCrypto....  I tried to install PyCrypto...
> 
> (The sad thing is that I'm running through all these hoops simply because I 
> need to be able to make a SSH connection, and be able to read and write
> to the stream... (ala Telnetlib))

SSH is considerably more complex than telnet, and so has considerably
more dependencies.

> when I:
> 
> 	setup.py install
> 
> I receive:
> 
> 	C:\develope\pycrypto-1.9a6>setup.py install
> 	running install
> 	running build
> 	running build_py
> 	running build_ext
> 	error: Python was built with version 6 of Visual Studio, and
> extensions need to
> 	be built with the same version of the compiler, but it isn't
> installed.
> 
> 	Now I am running:
> 
> 	C:\develope\pycrypto-1.9a6>python
> 	Python 2.3.2 (#49, Oct  2 2003, 20:02:00) [MSC v.1200 32 bit
> (Intel)] on win32
> 	Type "help", "copyright", "credits" or "license" for more
> information.
> 	>>>
> 
> I also have win32-157 installed....
> 
> Is there some way around this compile issue, does anyone know of a
> precompiled
> Windows binary for the PyCrypto kit??

I had a binary for 1.9a5, I'll try to compile one for current CVS and
put it up somewhere.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040227/ac7f0a55/attachment.pgp 

From itamar at itamarst.org  Fri Feb 27 11:51:55 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 11:51:55 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <1077900294.1239.14.camel@petra>
References: 
	 <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
	 <1077900294.1239.14.camel@petra>
Message-ID: <1077900714.5800.26.camel@sheriffpony>

On Fri, 2004-02-27 at 11:44, Paul Swartz wrote:

> I had a binary for 1.9a5, I'll try to compile one for current CVS and
> put it up somewhere.

Put it on twisted.sf.net/contrib/ and link to it on
twistedmatrix.com/products/downloads/ in the dependencies section, as
radix did for pyOpenSSL.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From Benjamin.Schollnick at usa.xerox.com  Fri Feb 27 11:57:00 2004
From: Benjamin.Schollnick at usa.xerox.com (Schollnick, Benjamin)
Date: Fri, 27 Feb 2004 11:57:00 -0500
Subject: [Twisted-Python] SSH connection
Message-ID: <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.xerox.com>

> Summary - you need to install PyCrypto, and if you do it from source
> that means you need to do it with a compiler installed. You can use
> mingw compiler with a bit of work (there's a howto somewhere), or you
> can find a pre-compiled version.

I have looked and have not yet found a pre-compiled version....

Do you have any suggestions on where to find a pre-compiled version of
PyCrypto.

> http://webcleaner.sourceforge.net/ has instructions on compiling
> pycrypto on windows.

Compiling it, at least in the complicated version of the MingW instructions,

makes me nervous...  

For now, I'll be forced to hold off, or come up with a alternative....

		- Benjamin



From pje at telecommunity.com  Fri Feb 27 12:17:44 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 12:17:44 -0500
Subject: [Twisted-Python] Re: Components
In-Reply-To: <u1xogts2n.fsf@fitlinxx.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <1077860455.3688.189.camel@localhost>
Message-ID: <5.1.1.6.0.20040227120820.023f2100@telecommunity.com>

At 11:17 AM 2/27/04 -0500, David Bolen wrote:

>Obviously, the ABC approach doesn't seem to be adopted by Twisted or
>PyProtocols (at least for its official interfaces) themselves, but I
>haven't really seen references to advantages of the non-ABC variant.

The main advantages I have found to the "pure interface" style are:

* Interfaces may be read as documentation, because there is no behavior in 
the way.  All that's there is just signatures and docstrings.

* It's easier to see what is *really* the expected interface, as opposed to 
an accident of implementation.

ABC's have a tendency to start out clean, but then accrete a bunch of 
implementation junk over time.  With a pure interface, there's no tempation 
to do it, since there's absolutely no benefit to putting any implementation 
in the interface.

So, if you are creating a framework of any significance, your users will in 
all likelihood thank you for using the pure style instead of the ABC style, 
unless you have exceedingly strong discipline as far as being able to keep 
implementation out of the ABC, or are separately specifying/documenting the 
expected behavior anyway.




From exarkun at divmod.com  Fri Feb 27 12:37:41 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Fri, 27 Feb 2004 17:37:41 GMT
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
Message-ID: <20040227173741.26582.1135022928.divmod.quotient.1@erlang.divmod.net>

On Fri, 27 Feb 2004 08:17:31 -0800, "David E. Konerding" <dekonerding at lbl.gov> wrote:
>Hello, since nobody actually responding with a useful message regarding 
> my report, I'm
> reposting an extremely simple (1 page) example which exhibits the behavior.
> My example creates a gtkreactor and runs it.  A small reporter class is 
> run from a second thread.
> Under the gtk reactor, the log messages from the second thread are not 
> reported in a timely
> fashion (only once per second or so).  From my understanding the 
> messages should be printed more frequently (about once every 1/10th 
> second).  This does work under the wx and plain reactors, so I suspect 
> there is a defect in the gtk reactor.
> I would simply like to get a confirmation that my example is a valid 
> one, that the results I expect are valid, and that other
> people can reproduce my experience.  If that is the case then I will 
> submit a formal bug report.  All of this should be reproducible using 
> Twisted 1.2.0.  Things get even weirder if you remove the logging 
> support and replace it with all print statements.

  When I run this program, here is the output:

exarkun at boson:~$ python p.py 
2004/02/27 12:36 EST [-] Log opened.
2004/02/27 12:36 EST [-] 'ticker: 1077903388'
2004/02/27 12:36 EST [-] 'ticker: 1077903389'
2004/02/27 12:36 EST [-] 'ticker: 1077903390'
2004/02/27 12:36 EST [-] 'ThingyManager submitting'
2004/02/27 12:36 EST [-] TestThingy created
2004/02/27 12:36 EST [-] 'ThingyManager created'
2004/02/27 12:36 EST [-] 'ThingyManager calledInThread'
2004/02/27 12:36 EST [-] 'ticker: 1077903391'
2004/02/27 12:36 EST [-] 'ticker: 1077903392'
2004/02/27 12:36 EST [-] 'ticker: 1077903393'
2004/02/27 12:36 EST [-] 'ticker: 1077903394'
2004/02/27 12:36 EST [-] TestThingy run
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] 'ticker: 1077903395'
2004/02/27 12:36 EST [-] 'ticker: 1077903396'
2004/02/27 12:36 EST [-] 'ticker: 1077903397'
2004/02/27 12:36 EST [-] 'ticker: 1077903398'
2004/02/27 12:36 EST [-] 'ticker: 1077903399'
2004/02/27 12:36 EST [-] 'ticker: 1077903400'
2004/02/27 12:36 EST [-] 'ticker: 1077903401'
2004/02/27 12:36 EST [-] 'ticker: 1077903402'  <- I hit ^C here
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy done
2004/02/27 12:36 EST [-] 'Reactor done'

  Jp




From pje at telecommunity.com  Fri Feb 27 12:47:21 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 12:47:21 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.x
 erox.com>
Message-ID: <5.1.1.6.0.20040227123431.01ee6290@telecommunity.com>

At 11:57 AM 2/27/04 -0500, Schollnick, Benjamin wrote:

> > Summary - you need to install PyCrypto, and if you do it from source
> > that means you need to do it with a compiler installed. You can use
> > mingw compiler with a bit of work (there's a howto somewhere), or you
> > can find a pre-compiled version.
>
>I have looked and have not yet found a pre-compiled version....
>
>Do you have any suggestions on where to find a pre-compiled version of
>PyCrypto.
>
> > http://webcleaner.sourceforge.net/ has instructions on compiling
> > pycrypto on windows.
>
>Compiling it, at least in the complicated version of the MingW instructions,
>
>makes me nervous...

Here's a simpler version of the instructions:

1) Get your machine set up to build extensions using the distutils
2) Download PyCrypto and run 'setup.py install'

Step 1 is a bit more complex than step 2, but is worth the trouble because 
it means you can build any Python extension for Windows without the author 
needing to produce a binary package for you.  It amounts to:

a) Install MinGW or Cygwin.  I personally prefer Cygwin because there 
aren't so many things to install.  Just pop over to cygwin.com, click 
"install now", and be sure to include the GCC compiler when you're asked 
what packages you want.  (DON'T install the Cygwin Python, btw, unless you 
have a good reason.  You don't need it if you're building extensions for 
Windows Python.)  Anyway, when you're done with the Cygwin install, you'll 
have a nice icon that opens up a Cygwin shell, which is a convenient prompt 
to run things from.

b) ensure that the MinGW or Cygwin tools are on your system path.  E.g. add 
'C:\cygwin\bin' to your PATH.

c) Do the steps to build a 'libpython2x.a' library.  (Step 2 of "Setup for 
Windows" on the page shown.)

d) add a distutils.cfg file to your C:\Python2x\Lib\distutils directory, 
containing the lines:

[build]
compiler=mingw32

this will make GCC your default compiler for any C extensions you build in 
future, so you won't need to do any of that '-c mingw32' junk.

Once you've done this, you can happily run 'python setup.py install' to 
install C extensions.




From dekonerding at lbl.gov  Fri Feb 27 12:49:47 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri, 27 Feb 2004 09:49:47 -0800
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
In-Reply-To: <20040227173741.26582.1135022928.divmod.quotient.1@erlang.divmod.net>
References: <20040227173741.26582.1135022928.divmod.quotient.1@erlang.divmod.net>
Message-ID: <403F833B.9020608@lbl.gov>

exarkun at divmod.com wrote:

>On Fri, 27 Feb 2004 08:17:31 -0800, "David E. Konerding" <dekonerding at lbl.gov> wrote:
>  
>
>>Hello, since nobody actually responding with a useful message regarding 
>>my report, I'm
>>reposting an extremely simple (1 page) example which exhibits the behavior.
>>My example creates a gtkreactor and runs it.  A small reporter class is 
>>run from a second thread.
>>Under the gtk reactor, the log messages from the second thread are not 
>>reported in a timely
>>fashion (only once per second or so).  From my understanding the 
>>messages should be printed more frequently (about once every 1/10th 
>>second).  This does work under the wx and plain reactors, so I suspect 
>>there is a defect in the gtk reactor.
>>I would simply like to get a confirmation that my example is a valid 
>>one, that the results I expect are valid, and that other
>>people can reproduce my experience.  If that is the case then I will 
>>submit a formal bug report.  All of this should be reproducible using 
>>Twisted 1.2.0.  Things get even weirder if you remove the logging 
>>support and replace it with all print statements.
>>    
>>
>
>  When I run this program, here is the output:
>
>exarkun at boson:~$ python p.py 
>2004/02/27 12:36 EST [-] Log opened.
>2004/02/27 12:36 EST [-] 'ticker: 1077903388'
>2004/02/27 12:36 EST [-] 'ticker: 1077903389'
>2004/02/27 12:36 EST [-] 'ticker: 1077903390'
>2004/02/27 12:36 EST [-] 'ThingyManager submitting'
>2004/02/27 12:36 EST [-] TestThingy created
>2004/02/27 12:36 EST [-] 'ThingyManager created'
>2004/02/27 12:36 EST [-] 'ThingyManager calledInThread'
>2004/02/27 12:36 EST [-] 'ticker: 1077903391'
>2004/02/27 12:36 EST [-] 'ticker: 1077903392'
>2004/02/27 12:36 EST [-] 'ticker: 1077903393'
>2004/02/27 12:36 EST [-] 'ticker: 1077903394'
>2004/02/27 12:36 EST [-] TestThingy run
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] 'ticker: 1077903395'
>2004/02/27 12:36 EST [-] 'ticker: 1077903396'
>2004/02/27 12:36 EST [-] 'ticker: 1077903397'
>2004/02/27 12:36 EST [-] 'ticker: 1077903398'
>2004/02/27 12:36 EST [-] 'ticker: 1077903399'
>2004/02/27 12:36 EST [-] 'ticker: 1077903400'
>2004/02/27 12:36 EST [-] 'ticker: 1077903401'
>2004/02/27 12:36 EST [-] 'ticker: 1077903402'  <- I hit ^C here
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy done
>2004/02/27 12:36 EST [-] 'Reactor done'
>  
>

OK, precisely: you're not seeing TestThingy messages as frequently as 
they are should be generated, and when you
hit ^C they start coming frequently (after the gtk mainloop is exited, I 
believe).

Now the only thing is to determine whether there is any real problem 
with the example. The only remaining
criticism I anticipate is the use of log. calls in the second thread, 
but removing them doesn't
substantially change the problem (actually, it just exhibits a 
*different* kind of unexpected behavior).

Dave



From db3l at fitlinxx.com  Fri Feb 27 14:08:01 2004
From: db3l at fitlinxx.com (David Bolen)
Date: 27 Feb 2004 14:08:01 -0500
Subject: [Twisted-Python] Re: Components
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost> <u1xogts2n.fsf@fitlinxx.com> <5.1.1.6.0.20040227120820.023f2100@telecommunity.com>
Message-ID: <usmgws5m6.fsf@fitlinxx.com>

"Phillip J. Eby" <pje at telecommunity.com> writes:

> * Interfaces may be read as documentation, because there is no
> behavior in the way.  All that's there is just signatures and
> docstrings.
> 
> * It's easier to see what is *really* the expected interface, as
> opposed to an accident of implementation.
> 
> ABC's have a tendency to start out clean, but then accrete a bunch of
> implementation junk over time.  With a pure interface, there's no
> tempation to do it, since there's absolutely no benefit to putting any
> implementation in the interface.

Interesting - wouldn't that stop them from being ABCs at that point?
The only thing in my ABCs with respect to implementatation is the
"raise NotImplementedError" for each method.  Basically the same as
the example in the PyProtocols documentation.  I really hadn't
envisioned ever adding anything other than that (after all, then it
wouldn't be an "Abstract" base class), although I suppose I could see
how someone might let something slip in.

> So, if you are creating a framework of any significance, your users
> will in all likelihood thank you for using the pure style instead of
> the ABC style, unless you have exceedingly strong discipline as far as
> being able to keep implementation out of the ABC, or are separately
> specifying/documenting the expected behavior anyway.

Speaking of documentation and convenience for users, it's nice when
inheriting from an ABC interface lets tools such as epydoc
automatically inherit the documentation strings for the methods as
well for classes that implement them.  Otherwise, do you find yourself
duplicating docstrings in the classes providing the interfaces, or how
do you handle that aspect of things.

I notice that a lot of the Twisted documentation makes use of the
links (such as the L{} epydoc notation) to cross-reference the
appropriate interface for the concrete classes that implement the
interfaces, whereas the ABC approach would seem to simplify that
aspect of things.

-- David




From radix at twistedmatrix.com  Fri Feb 27 14:14:57 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 14:14:57 -0500
Subject: [Twisted-Python] Re: Components
In-Reply-To: <usmgws5m6.fsf@fitlinxx.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost> <u1xogts2n.fsf@fitlinxx.com> <5.1.1.6.0.20040227120820.023f2100@telecommunity.com> <usmgws5m6.fsf@fitlinxx.com>
Message-ID: <403F9731.2010805@twistedmatrix.com>

David Bolen wrote:
> "Phillip J. Eby" <pje at telecommunity.com> writes:
>>So, if you are creating a framework of any significance, your users
>>will in all likelihood thank you for using the pure style instead of
>>the ABC style, unless you have exceedingly strong discipline as far as
>>being able to keep implementation out of the ABC, or are separately
>>specifying/documenting the expected behavior anyway.
> 
> Speaking of documentation and convenience for users, it's nice when
> inheriting from an ABC interface lets tools such as epydoc
> automatically inherit the documentation strings for the methods as
> well for classes that implement them.  Otherwise, do you find yourself
> duplicating docstrings in the classes providing the interfaces, or how
> do you handle that aspect of things.

Hmm. I think the real solution to this is to make epydoc understand 
interfaces, and make it easy to see the interface-documentation when 
looking at its implementation.



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040227/7fb6cbf3/attachment.pgp 

From ralf at brainbot.com  Fri Feb 27 14:42:27 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Fri, 27 Feb 2004 20:42:27 +0100
Subject: [Twisted-Python] PB over SSH
In-Reply-To: <1077897420.5802.13.camel@sheriffpony> (Itamar
 Shtull-Trauring's message of "Fri, 27 Feb 2004 10:57:02 -0500")
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
	<1077897420.5802.13.camel@sheriffpony>
Message-ID: <86fzcw2tss.fsf@stronzo.brainbot.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

>
> PB over SSH is... a good idea, but not the way to implement this, exactly.
>
> What you'd want is a SSH *transport*. It would allow you to run any
> twisted protocol over an existing conch SSH connection, transparently,
> just as you can run over TCP or SSL. In addition this transport should
> provide a credential object tied to the logged in user so you can use it
> with cred transparently. Plus a  SSH-to-TCP gateway transport that lets
> you listen or connect using the SSH portforwarding support.
>

Are there any examples on writing one own's transport? I'd be interested in
a PB transport. Any hints to get started?

> Once you've built this, PB over SSH is probably 10 lines of code.
>
>

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From pje at telecommunity.com  Fri Feb 27 14:56:22 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 14:56:22 -0500
Subject: [Twisted-Python] Distutils dependencies sprint at PyCon?
Message-ID: <5.1.1.6.0.20040227142938.01ea8030@mail.rapidsite.net>

Bob Ippolito and I have been talking about working on distutils dependency 
support while at PyCon.  The subject has recently come up on both the 
Zope3-Dev and Twisted mailing lists, with respect to being able to:

1) break up monolithic systems (PEAK, Zope, Twisted) into smaller package 
sets with dependencies

2) allow dependencies on other systems (e.g. Twisted using PyProtocols, 
PEAK using zope.publisher, etc.)

3) support painless install for end users (single command to download and 
install "everything needed") even at the cost of a little pain for the 
packager(s).

4) allow dependencies on packages that were packaged with the distutils, 
but *not* specifically designed to work with the dependency system.  In 
other words, if I want to depend on package X, I should not need to bug 
package X's author, I should be able to "just do it".

5) Support Python 2.2, while not requiring changes to the distutils, but 
being a possible candidate for upgrades to the distutils in 2.4.

If there's a group that would like to sprint to produce working 
deliverables for one or more aspects of this problem area (and I think 
PIMP/PackMan shows that solutions are within reach), I'd like to get some 
schedule commitments so I can plan a trip.  I wasn't originally planning to 
go to PyCon this year, but I *will* come if it means we can get this thing 
implemented.

If there is sufficient interest, let's take this to an appropriate mailing 
list (perhaps distutils-sig?) and Wiki to put together a detailed set of 
stories, as long as we can prioritize the list according to the needs of 
the folks who will be doing the development.

If you're interested in participating in such a sprint, please let me know 
ASAP, so I can make travel arrangements.  Thanks.

(Please reply to me personally rather than to the list(s); I will summarize 
and post an announcement of where to direct further discussion, if there's 
enough interest to get this off the ground.  Thanks!)





From golux at comcast.net  Fri Feb 27 18:53:32 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Fri, 27 Feb 2004 18:53:32 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077898228.5803.18.camel@sheriffpony>
References: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com> <1077898228.5803.18.camel@sheriffpony>
Message-ID: <403FD87C.4090203@comcast.net>

Itamar Shtull-Trauring wrote:
> On Fri, 2004-02-27 at 09:26, Phillip J. Eby wrote:
> 
>>What is Twisted as a whole really for?  ;)
> 
> 
> Networking applications. That is, programs that involve communicating
> with other programs over a network, typically TCP/IP. Whereas
> "enterprise" is to me anyway a meaningless word in this context. What is
> the definition of an "enterprise application"?

I submit that the term "enterprise" has been over-buzzed to
the point of near-meaninglessness, so it's pretty useless
except in marketing literature, where meaninglessness is
a useful quality.  :)

That said, to me an "enterprise application" is any application
that is specifically designed to interoperate with, and/or
enable interoperability of, other software that is used in the
processes of a "business" (in the most general sense).

I think that's about as specific as you can get.  Like I say,
*almost* meaningless, in that it could apply to almost anything,
given enough "spin".  ;)

- Steve




From pje at telecommunity.com  Fri Feb 27 19:45:19 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 19:45:19 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403FD87C.4090203@comcast.net>
References: <1077898228.5803.18.camel@sheriffpony>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
 <1077898228.5803.18.camel@sheriffpony>
Message-ID: <5.1.1.6.0.20040227193737.02868960@telecommunity.com>

At 06:53 PM 2/27/04 -0500, Stephen Waterbury wrote:
>Itamar Shtull-Trauring wrote:
>>On Fri, 2004-02-27 at 09:26, Phillip J. Eby wrote:
>>
>>>What is Twisted as a whole really for?  ;)
>>
>>Networking applications. That is, programs that involve communicating
>>with other programs over a network, typically TCP/IP. Whereas
>>"enterprise" is to me anyway a meaningless word in this context. What is
>>the definition of an "enterprise application"?
>
>I submit that the term "enterprise" has been over-buzzed to
>the point of near-meaninglessness, so it's pretty useless
>except in marketing literature, where meaninglessness is
>a useful quality.  :)
>
>That said, to me an "enterprise application" is any application
>that is specifically designed to interoperate with, and/or
>enable interoperability of, other software that is used in the
>processes of a "business" (in the most general sense).
>
>I think that's about as specific as you can get.  Like I say,
>*almost* meaningless, in that it could apply to almost anything,
>given enough "spin".  ;)

I'm actually using it a bit more specifically than that; I'm specifically 
targeting applications that have a "shared resource domain" (and whose data 
integrity or availability has fiduciary consequences), or tools needed to 
develop, maintain or support such applications.  IOW, a desktop email 
client (for example) wouldn't count, but a group issue tracker for emailed 
requests would.

By "fiduciary consequences", I mean that if it's not running when it's 
supposed to be, or data integrity isn't maintained, it results in financial 
losses.  By "shared resource domain", I effectively mean a multi-user 
application, or shared processing resources like a mail server.  I think 
you'll find that these two concepts (shared resources and fiduciary 
responsibility) are the common themes underlying what most people mean when 
they talk about "enterprise" applications.  Or at least, I think people who 
*buy* enterprise applications would stress these as defining 
characteristics, whether the people who *sell* such applications really 
fulfill them or not.  :)




From glyph at twistedmatrix.com  Fri Feb 27 20:02:58 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 27 Feb 2004 20:02:58 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040227193737.02868960@telecommunity.com>
References: <1077898228.5803.18.camel@sheriffpony>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
	 <1077898228.5803.18.camel@sheriffpony>
	 <5.1.1.6.0.20040227193737.02868960@telecommunity.com>
Message-ID: <1077930178.3237.226.camel@localhost>

On Fri, 2004-02-27 at 19:45, Phillip J. Eby wrote:

> I'm actually using it a bit more specifically than that; I'm specifically 
> targeting applications that have a "shared resource domain" (and whose data 
> integrity or availability has fiduciary consequences), or tools needed to 
> develop, maintain or support such applications.  IOW, a desktop email 
> client (for example) wouldn't count, but a group issue tracker for emailed 
> requests would.

Philip, thank you for this clarification.  IMHO the world would be a
better place if software developers were legally required to fulfill
your requirements specified here before calling their software
"enterprise" :).




From golux at comcast.net  Fri Feb 27 21:25:25 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Fri, 27 Feb 2004 21:25:25 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077930178.3237.226.camel@localhost>
References: <1077898228.5803.18.camel@sheriffpony>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>	 <1077898228.5803.18.camel@sheriffpony>	 <5.1.1.6.0.20040227193737.02868960@telecommunity.com> <1077930178.3237.226.camel@localhost>
Message-ID: <403FFC15.2040100@comcast.net>

Glyph Lefkowitz wrote:
> On Fri, 2004-02-27 at 19:45, Phillip J. Eby wrote:
> 
> 
>>I'm actually using it a bit more specifically than that; I'm specifically 
>>targeting applications that have a "shared resource domain" (and whose data 
>>integrity or availability has fiduciary consequences), or tools needed to 
>>develop, maintain or support such applications.  IOW, a desktop email 
>>client (for example) wouldn't count, but a group issue tracker for emailed 
>>requests would.
> 
> Philip, thank you for this clarification.  IMHO the world would be a
> better place if software developers were legally required to fulfill
> your requirements specified here before calling their software
> "enterprise" :).

Hmm ... not very realistic in terms of "legally", methinks.
But I don't believe you seriously expect that to ever happen.
For one thing, legality largely hinges on how expensive a
lawyer you can afford, so any legal requirement would
simply be a handicap to small vendors.  ;)

I sure agree that Phillip's definition is useful, but there
is also a sense in which any failure of any software used
by a company will have fiduciary consequences.  After all,
as Einstein proved, Time = Money ;), so if software screws
up while people are using it on the clock, it costs you.

- Steve




From pje at telecommunity.com  Fri Feb 27 23:00:23 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 23:00:23 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403FFC15.2040100@comcast.net>
References: <1077930178.3237.226.camel@localhost>
 <1077898228.5803.18.camel@sheriffpony>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
 <1077898228.5803.18.camel@sheriffpony>
 <5.1.1.6.0.20040227193737.02868960@telecommunity.com>
 <1077930178.3237.226.camel@localhost>
Message-ID: <5.1.0.14.0.20040227225505.02b7e290@mail.telecommunity.com>

At 09:25 PM 2/27/04 -0500, Stephen Waterbury wrote:
>I sure agree that Phillip's definition is useful, but there
>is also a sense in which any failure of any software used
>by a company will have fiduciary consequences.  After all,
>as Einstein proved, Time = Money ;), so if software screws
>up while people are using it on the clock, it costs you.

Perhaps I should have said "directly measurable", or maybe "clear and 
present" fiduciary consequences.  But at this point it becomes pointless 
nitpicking, unless there is in fact a use case for splitting hairs to 
define whether something is or isn't an "enterprise" application.  From a 
practical perspective, what gets into PEAK is heavily influenced by the 
needs of software development and system administration at my "day job", 
dealing with a highly heterogeneous processing environment including 
numerous internal systems and business partner APIs.




From pje at telecommunity.com  Fri Feb 27 23:48:44 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 23:48:44 -0500
Subject: [Twisted-Python] Generic functions using PyProtocols (was Re:
  Components)
In-Reply-To: <5.1.0.14.0.20040227092743.03091a70@mail.telecommunity.com>
References: <1077860455.3688.189.camel@localhost>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>

At 09:58 AM 2/27/04 -0500, Phillip J. Eby wrote:
>At 12:40 AM 2/27/04 -0500, Glyph Lefkowitz wrote:
>>(BTW: a common idiom for using interfaces is to scope method names.  An
>>optimization I want to add to Twisted at some point is stateless
>>interface-method-call syntax which can do this efficiently, something
>>like: IWhatever.what(x).  I believe you should be able to avoid a bunch
>>of Python object allocation overhead by doing it that way.  Does
>>PyProtocols provide any such facility?)
>
>Not at the moment.  What I'd like to do at some point is add 
>single-dispatch generic functions, though.

Just for the heck of it, I thought I'd try whipping up a single-dispatch 
generic function using PyProtocols.  It turned out to be much easier than I 
thought; only 19 lines, in fact!

from protocols import Protocol, adapt, declareAdapter
from new import instancemethod

class GenericFunction(Protocol):

     def __init__(self, defaultFunc=None):
         Protocol.__init__(self)
         if defaultFunc is not None:
             self.add(defaultFunc,[object])

     def __call__(__self, self, *__args,**kw):
         return adapt(self,__self)(*__args,**kw)

     def add(self,func,forTypes=(),forProtocols=()):
         declareAdapter(
             lambda ob,proto: instancemethod(func,ob,type(ob)),
             provides=[self], forTypes=forTypes, forProtocols=forProtocols
         )

# Quick test/demo

def g(ob):
     print ob, "is of unknown type"

g = GenericFunction(g)


class A(object): pass
class B(A): pass
class C(A): pass

def gA(ob):
     print ob, "is an A"

g.add(gA,[A])

def gB(ob):
     print ob, "is a B"

g.add(gB,[B])


# Try it out

g(A())
g(B())
g(C())
g([])

# ====


It could probably do with some kind of 'super()'-like mechanism, but that 
would make for a rather more complex implementation, alas.  Still, it's not 
bad at all and I can think of a few places I might actually use it.  For 
example, it'd be great for writing "visitor" algorithms that need to do 
different behaviors based on the type or interfaces of the nodes.




From radix at twistedmatrix.com  Sat Feb 28 00:21:05 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 28 Feb 2004 00:21:05 -0500
Subject: [Twisted-Python] Generic functions using PyProtocols (was Re:
  Components)
In-Reply-To: <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
References: <1077860455.3688.189.camel@localhost> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
Message-ID: <40402541.9050403@twistedmatrix.com>

Phillip J. Eby wrote:
> At 09:58 AM 2/27/04 -0500, Phillip J. Eby wrote:

>> At 12:40 AM 2/27/04 -0500, Glyph Lefkowitz wrote:
>> Not at the moment.  What I'd like to do at some point is add 
>> single-dispatch generic functions, though.
> 
> Just for the heck of it, I thought I'd try whipping up a single-dispatch 
> generic function using PyProtocols.  It turned out to be much easier 
> than I thought; only 19 lines, in fact!

> # Quick test/demo
...

> def gA(ob):
>     print ob, "is an A"
> g.add(gA,[A])
> def gB(ob):
>     print ob, "is a B"
> g.add(gB,[B])

Wow. glyph explained to me what he wanted before with the 
no-instantiation IFoo.meth(x), but I didn't realize that it really _is_ 
like generic functions. That's awesome. :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040228/705dd4bc/attachment.pgp 

From pje at telecommunity.com  Sat Feb 28 11:01:09 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Sat, 28 Feb 2004 11:01:09 -0500
Subject: [Twisted-Python] Generic functions using PyProtocols (was
  Re: Components)
In-Reply-To: <40402541.9050403@twistedmatrix.com>
References: <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
 <1077860455.3688.189.camel@localhost>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
Message-ID: <5.1.0.14.0.20040228105617.02dd3170@mail.telecommunity.com>

At 12:21 AM 2/28/04 -0500, Christopher Armstrong wrote:

>Wow. glyph explained to me what he wanted before with the no-instantiation 
>IFoo.meth(x), but I didn't realize that it really _is_ like generic 
>functions. That's awesome. :-)

Well, a generic function with a couple of interesting twists, like being 
able to say that a particular signature is based on a protocol rather than 
a specific class, with transitive adaptation taking place.  So, if the 
closer adaptation path is that the object gets adapted to an interface you 
support, then that's what you'll get passed to the function.

The other twist is that you can create a new generic function, and then 
declare that it is "implied by" another generic function.  You'll then 
"inherit" all of the definitions from the old generic function, allowing 
you to then just override certain specific implementations of the function 
in your new function.




From z3p at twistedmatrix.com  Sat Feb 28 14:21:01 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Sat, 28 Feb 2004 14:21:01 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.xerox.com>
References: 
	 <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.xerox.com>
Message-ID: <1077996061.12765.1.camel@petra>

On Fri, 2004-02-27 at 11:57, Schollnick, Benjamin wrote:
> > Summary - you need to install PyCrypto, and if you do it from source
> > that means you need to do it with a compiler installed. You can use
> > mingw compiler with a bit of work (there's a howto somewhere), or you
> > can find a pre-compiled version.
> 
> I have looked and have not yet found a pre-compiled version....

I didn't see a e-mail, so I'll say it.  MFen put up precompiled versions
of PyCrypto for Win32, Python versions 2.2 and 2.3.  They're available
at http://twisted.sf.net/contrib/

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040228/5d09af1d/attachment.pgp 

From dave at krondo.com  Sat Feb 28 16:18:02 2004
From: dave at krondo.com (Dave Peticolas)
Date: Sat, 28 Feb 2004 13:18:02 -0800
Subject: [Twisted-Python] Typo in /twisted/test/test_enterprise.py -
	Twisted 1.2 RC2
In-Reply-To: <403C7C0B.5060108@ivsn.com>
References: <403C7C0B.5060108@ivsn.com>
Message-ID: <1078003082.27347.51.camel@oneiros>

This is fixed in CVS, thanks.

dave

On Wed, 2004-02-25 at 02:42, Paul Reznicek wrote:
> Hi,
> 
> in lines 520-522 is a typo due editor copy of previous section.
> The code is working, but so clear for reading.
> Here the suggestion, original code commented out:
> 
> if psycopg is None: PsycopgTestCase.skip = "psycopg module not
> available"
> else:
>     try:
> #         conn = psycopg.connect(database=PostgresTestCase.DB_NAME,
> #                              user=PostgresTestCase.DB_USER,
> #                              password=PostgresTestCase.DB_PASS)
>         conn = psycopg.connect(database=PsycopgTestCase.DB_NAME,
>                                user=PsycopgTestCase.DB_USER,
>                                password=PsycopgTestCase.DB_PASS)
> 
> TWISTED IS SUPER !!!
> Paul _______________________________________________ Twisted-Python
> mailing list Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20040228/83ddd22f/attachment.pgp 

From itamar at itamarst.org  Sat Feb 28 18:01:11 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sat, 28 Feb 2004 18:01:11 -0500
Subject: [Twisted-Python] Any one available for contract work?
Message-ID: <1078009271.6930.26.camel@sheriffpony>

Knowledge of web services and ebXML would be useful.





From ed at unidata.ucar.edu  Tue Feb  3 13:16:02 2004
From: ed at unidata.ucar.edu (Ed Hartnett)
Date: 03 Feb 2004 13:16:02 -0700
Subject: [Twisted-Python] twisted test suite hangs on my Sun - but works on Linux
Message-ID: <wrxptcvor5p.fsf@rodney.unidata.ucar.edu>

Howdy all!

I am using twisted with buildbot to automate testing on a lot of
different platforms.

I'm having some problems on SunOS systems, and the buildbot author
suggested running the twisted test suite. When I run it, it
hangs. Meanwhile, running on Linux it completes just fun.

Here's my output from the tests. At the bottom it just hung. Don't
mind the extra characters around the "OKs", emacs shell mode is just
no rendering colors for me.

zero.unidata.ucar.edu% python /usr/local/bin/trial -v twisted.test
/opt/lib/python2.3/site-packages/twisted/words/__init__.py:21: UserWarning: twisted.words will be undergoing a rewrite at some point in the future.
  warnings.warn("twisted.words will be undergoing a rewrite at some point in the future.")
twisted.test.test_app
  AppTestCase
    testIllegalUnlistens ... 
/opt/lib/python2.3/site-packages/twisted/test/test_app.py:66: exceptions.DeprecationWarning: twisted.internet.app is deprecated, use twisted.application instead.
                                              [32;1m[OK][0m
    testListenUnlistenTCP ...                                              [32;1m[OK][0m
    testListenUnlistenUDP ...                                              [32;1m[OK][0m
    testListenUnlistenUNIX ...                                             [32;1m[OK][0m
  ServiceTestCase
    testRegisterService ...                                                [32;1m[OK][0m
twisted.test.test_application
  TestAppSupport
    testLoadApplication ...                                                [32;1m[OK][0m
    testPassphrase ...                                                     [32;1m[OK][0m
    test_convertStyle ...                                                  [32;1m[OK][0m
    test_getLogFile ...                                                    [32;1m[OK][0m
    test_startApplication ...                                              [32;1m[OK][0m
  TestApplication
    testConstructor ...                                                    [32;1m[OK][0m
    testPersistableComponent ...                                           [32;1m[OK][0m
    testProcessComponent ...                                               [32;1m[OK][0m
    testServiceComponent ...                                               [32;1m[OK][0m
  TestCompat
    testOldApplication ...                                                 [32;1m[OK][0m
    testService ...                                                        [32;1m[OK][0m
  TestConvert
    testSimpleInternet ...                                                 [32;1m[OK][0m
    testSimpleService ...                                                  [32;1m[OK][0m
    testSimpleUNIX ...                                                     [32;1m[OK][0m
  TestInterfaces
    testMultiService ...                                                   [32;1m[OK][0m
    testProcess ...                                                        [32;1m[OK][0m
    testService ...                                                        [32;1m[OK][0m
  TestInternet
    testCalling ...                                                        [32;1m[OK][0m
    testInterface ...                                                      [32;1m[OK][0m
    testServices ...                                                       [32;1m[OK][0m
    testTCP ...                                                            [32;1m[OK][0m
    testUNIX ...                                                           [32;1m[OK][0m
    testUnlistenersCallable ...                                            [32;1m[OK][0m
  TestInternet2
    testConnectionGettingRefused ...                                       [32;1m[OK][0m
    testEverythingThere ...                                                [32;1m[OK][0m
    testPrivileged ...                                                     [32;1m[OK][0m
    testStoppingServer ...                                                 [32;1m[OK][0m
    testTCP ...                                                            [32;1m[OK][0m
    testTimer ...                                                          [32;1m[OK][0m
    testUDP ...                                                            [32;1m[OK][0m
    testUNIX ...                                                           [32;1m[OK][0m
    testVolatile ...                                                       [32;1m[OK][0m
  TestLoading
    test_implicitConversion ...                                            [32;1m[OK][0m
    test_simpleStoreAndLoad ...                                            [32;1m[OK][0m
  TestProcess
    testDefaults ...                                                       [32;1m[OK][0m
    testID ...                                                             [32;1m[OK][0m
    testProcessName ...                                                    [32;1m[OK][0m
  TestService
    testAddingIntoRunning ...                                              [32;1m[OK][0m
    testApplicationAsParent ...                                            [32;1m[OK][0m
    testCopying ...                                                        [32;1m[OK][0m
    testDisowning ...                                                      [32;1m[OK][0m
    testDoublyNamedChild ...                                               [32;1m[OK][0m
    testDuplicateNamedChild ...                                            [32;1m[OK][0m
    testName ...                                                           [32;1m[OK][0m
    testNamedChild ...                                                     [32;1m[OK][0m
    testParent ...                                                         [32;1m[OK][0m
    testPrivileged ...                                                     [32;1m[OK][0m
    testRunning ...                                                        [32;1m[OK][0m
    testRunningChildren ...                                                [32;1m[OK][0m
twisted.test.test_banana
  BananaTestCase
    testCrashString ...                                                    [32;1m[OK][0m
    testFloat ...                                                          [32;1m[OK][0m
    testInteger ...                                                        [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testLong ...                                                           [32;1m[OK][0m
    testNegative ...                                                       [32;1m[OK][0m
    testNegativeLong ...                                                   [32;1m[OK][0m
    testOversizedList ...                                                  [32;1m[OK][0m
    testOversizedString ...                                                [32;1m[OK][0m
    testPartial ...                                                        [32;1m[OK][0m
    testString ...                                                         [32;1m[OK][0m
  CananaTestCase
    testCrashString ...                                                    [32;1m[OK][0m
    testFloat ...                                                          [32;1m[OK][0m
    testInteger ...                                                        [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testLong ...                                                           [32;1m[OK][0m
    testNegative ...                                                       [32;1m[OK][0m
    testNegativeLong ...                                                   [32;1m[OK][0m
    testOversizedList ...                                                  [32;1m[OK][0m
    testOversizedString ...                                                [32;1m[OK][0m
    testPartial ...                                                        [32;1m[OK][0m
    testString ...                                                         [32;1m[OK][0m
  MathTestCase
    testInt2b128 ...                                                       [32;1m[OK][0m
twisted.test.test_bounce
  BounceTestCase
    testBounceFormat ...                                                   [32;1m[OK][0m
    testBounceMIME ...                                                     [32;1m[OK][0m
twisted.test.test_compat
  CompatTestCase
    testBool ...                                                           [32;1m[OK][0m
    testDict ...                                                           [32;1m[OK][0m
    testIsinstance ...                                                     [32;1m[OK][0m
    testIteration ...                                                      [32;1m[OK][0m
    testStrip ...                                                          [32;1m[OK][0m
twisted.test.test_components
  AdapterTestCase
    testAdapterGetComponent ...                                            [32;1m[OK][0m
    testAllowDuplicates ...                                                [32;1m[OK][0m
    testBadRegister ...                                                    [32;1m[OK][0m
    testGetAdapter ...                                                     [32;1m[OK][0m
    testGetAdapterClass ...                                                [32;1m[OK][0m
    testGetSubAdapter ...                                                  [32;1m[OK][0m
    testNoAdapter ...                                                      [32;1m[OK][0m
    testParentInterface ...                                                [32;1m[OK][0m
    testSelfIsAdapter ...                                                  [32;1m[OK][0m
  ComponentizedTestCase
    testComponentized ...                                                  [32;1m[OK][0m
    testInheritanceAdaptation ...                                          [32;1m[OK][0m
    testMultiAdapter ...                                                   [32;1m[OK][0m
  InterfacesTestCase
    testClasses ...                                                        [32;1m[OK][0m
    testGetInterfaces ...                                                  [32;1m[OK][0m
    testInstanceOnlyImplements ...                                         [32;1m[OK][0m
    testInstances ...                                                      [32;1m[OK][0m
    testOther ...                                                          [32;1m[OK][0m
    testSuperInterfaces ...                                                [32;1m[OK][0m
    testTupleTrees ...                                                     [32;1m[OK][0m
  TestInterfaceInterface
    testBasic ...                                                          [32;1m[OK][0m
  TestMetaInterface
    testBasic ...                                                          [32;1m[OK][0m
    testComponentizedInteraction ...                                       [32;1m[OK][0m
    testCustomRegistry ...                                                 [32;1m[OK][0m
    testInterfaceAdaptMethod ...                                           [32;1m[OK][0m
    testRegistryPersistence ...                                            [32;1m[OK][0m
twisted.test.test_context
  ContextTest
    testBasicContext ...                                                   [32;1m[OK][0m
twisted.test.test_cred
  AuthorizerTestCase
    test_addIdent ... 
/opt/lib/python2.3/site-packages/twisted/cred/authorizer.py:115: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:405: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.
                                                     [32;1m[OK][0m
    test_nonExistentIdent ...                                              [32;1m[OK][0m
  FunctionsTestCase
    test_challenge ...                                                     [32;1m[OK][0m
  IdentityTestCase
    testConstruction ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:297: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:300: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.
                                                  [32;1m[OK][0m
    test_addKeyByString ...                                                [32;1m[OK][0m
    test_addKeyForPerspective ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:307: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                         [32;1m[OK][0m
    test_getAllKeys ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:316: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                   [32;1m[OK][0m
    test_removeKey ...                                                     [32;1m[OK][0m
    test_removeKey_invalid ...                                             [32;1m[OK][0m
    test_setPassword_invalid ...                                           [32;1m[OK][0m
    test_verifyPassword ...                                                [32;1m[OK][0m
    test_verifyPlainPassword ...                                           [32;1m[OK][0m
  PerspectiveTestCase
    testConstruction ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:170: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                  [32;1m[OK][0m
    testConstruction_invalidIdentityName ...                               [32;1m[OK][0m
    testConstruction_invalidPerspectiveName ...                            [32;1m[OK][0m
    testConstruction_invalidService ...                                    [32;1m[OK][0m
    test_identityWithNoPassword ... 
/opt/lib/python2.3/site-packages/twisted/cred/authorizer.py:78: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.
                                       [32;1m[OK][0m
    test_identityWithNoPassword_plain ...                                  [32;1m[OK][0m
    testgetService ...                                                     [32;1m[OK][0m
    testmakeIdentity ...                                                   [32;1m[OK][0m
    testmakeIdentity_invalid ...                                           [32;1m[OK][0m
    testsetIdentity ...                                                    [32;1m[OK][0m
    testsetIdentityName ...                                                [32;1m[OK][0m
    testsetIdentityName_invalid ...                                        [32;1m[OK][0m
    testsetIdentity_invalid ...                                            [32;1m[OK][0m
  ServiceTestCase
    testConstruction ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:59: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:59: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:63: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:65: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:66: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:67: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                  [32;1m[OK][0m
    serviceName is frequently used as a key, thus it is expected ... 
/opt/lib/python2.3/site-packages/twisted/python/util.py:460: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
      [32;1m[OK][0m
    testGetSetPerspetiveSanity ...                                         [32;1m[OK][0m
    testParent ... 
/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:71: exceptions.DeprecationWarning: Authorizers are deprecated, switch to portals/realms/etc.

/opt/lib/python2.3/site-packages/twisted/test/test_cred.py:72: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.
                                                        [32;1m[OK][0m
    testaddPerspective_invalid ...                                         [32;1m[OK][0m
    testgetPerspective ...                                                 [32;1m[OK][0m
    testgetPerspectiveNamed_invalid ...                                    [32;1m[OK][0m
    testgetServiceName ...                                                 [32;1m[OK][0m
    testgetServiceName_hashable ...                                        [32;1m[OK][0m
    testgetServiceType ...                                                 [32;1m[OK][0m
    testsetServiceParent ...                                               [32;1m[OK][0m
twisted.test.test_defer
  AlreadyCalledTestCase
    testAlreadyCalledDebug_CC ...                                          [32;1m[OK][0m
    testAlreadyCalledDebug_CE ...                                          [32;1m[OK][0m
    testAlreadyCalledDebug_EC ...                                          [32;1m[OK][0m
    testAlreadyCalledDebug_EE ...                                          [32;1m[OK][0m
    testAlreadyCalled_CC ...                                               [32;1m[OK][0m
    testAlreadyCalled_CE ...                                               [32;1m[OK][0m
    testAlreadyCalled_EC ...                                               [32;1m[OK][0m
    testAlreadyCalled_EE ...                                               [32;1m[OK][0m
    testNoDebugging ...                                                    [32;1m[OK][0m
  DeferredTestCase
    testCallbackErrors ...                                                 [32;1m[OK][0m
    testCallbackWithArgs ...                                               [32;1m[OK][0m
    testCallbackWithKwArgs ...                                             [32;1m[OK][0m
    testCallbackWithoutArgs ...                                            [32;1m[OK][0m
    testDeferredList ...                                                   [32;1m[OK][0m
    testDeferredListFireOnOneError ...                                     [32;1m[OK][0m
    testEmptyDeferredList ...                                              [32;1m[OK][0m
    testGatherResults ...                                                  [32;1m[OK][0m
    testImmediateFailure ...                                               [32;1m[OK][0m
    testImmediateSuccess ...                                               [32;1m[OK][0m
    testMaybeDeferred ...                                                  [32;1m[OK][0m
    testPausedFailure ...                                                  [32;1m[OK][0m
    testReturnDeferred ...                                                 [32;1m[OK][0m
    testTimeOut ...                                                        [32;1m[OK][0m
    testTwoCallbacks ...                                                   [32;1m[OK][0m
    testUnpauseBeforeCallback ...                                          [32;1m[OK][0m
  DeferredTestCaseII
    Testing empty DeferredList. ...                                        [32;1m[OK][0m
  LogTestCase
    testErrorLog ...                                                       [32;1m[OK][0m
twisted.test.test_dict
  ParamTest
    Testing command response handling ...                                  [32;1m[OK][0m
twisted.test.test_dirdbm
  DirDbmTestCase
    testAll ...                                                            [32;1m[OK][0m
    testDbm ...                                                            [32;1m[OK][0m
    testModificationTime ...                                               [32;1m[OK][0m
    testRebuildInteraction ...                                             [32;1m[OK][0m
    DirDBM: test recovery from directory after a faked crash ...           [32;1m[OK][0m
  ShelfTestCase
    testAll ...                                                            [32;1m[OK][0m
    testDbm ...                                                            [32;1m[OK][0m
    testModificationTime ...                                               [32;1m[OK][0m
    testRebuildInteraction ...                                             [32;1m[OK][0m
    DirDBM: test recovery from directory after a faked crash ...           [32;1m[OK][0m
twisted.test.test_dns
  RoundtripDNSTestCase
    testHashable ...                                                       [32;1m[OK][0m
    testName ...                                                           [32;1m[OK][0m
    testQuery ...                                                          [32;1m[OK][0m
    testRR ...                                                             [32;1m[OK][0m
    testResources ...                                                      [32;1m[OK][0m
twisted.test.test_doc
  DocCoverage
    Looking for docstrings in all modules. ...                        [34;1m[SKIPPED][0m
    Looking for docstrings in all packages. ... 
/opt/lib/python2.3/site-packages/twisted/im/__init__.py:20: exceptions.UserWarning: twisted.im will be undergoing a rewrite at some point in the future.

/opt/lib/python2.3/site-packages/twisted/spread/ui/__init__.py:25: exceptions.DeprecationWarning: twisted.spread.ui is deprecated. Please do not use.
                           [32;1m[OK][0m
twisted.test.test_domhelpers
  DomHelpersTest
    test_clearNode ...                                                     [32;1m[OK][0m
    test_escape ...                                                        [32;1m[OK][0m
    test_findElementsWithAttribute ...                                     [32;1m[OK][0m
    test_findNodesNamed ...                                                [32;1m[OK][0m
    test_gatherTextNodes ...                                               [32;1m[OK][0m
    test_get ...                                                           [32;1m[OK][0m
    test_getAndClear ...                                                   [32;1m[OK][0m
    test_getElementsByTagName ...                                          [32;1m[OK][0m
    test_getIfExists ...                                                   [32;1m[OK][0m
    test_getParents ...                                                    [32;1m[OK][0m
    test_locateNodes ...                                                   [32;1m[OK][0m
    test_unescape ...                                                      [32;1m[OK][0m
twisted.test.test_domish
  DomishStreamTestCase
    testExpatStream ...                                                    [32;1m[OK][0m
    testSuxStream ...                                                      [32;1m[OK][0m
  DomishTestCase
    testChildOps ...                                                       [32;1m[OK][0m
    testElementInit ...                                                    [32;1m[OK][0m
    testEscaping ...                                                       [32;1m[OK][0m
    testNamespaceObject ...                                                [32;1m[OK][0m
    testSerialization ...                                                  [32;1m[OK][0m
    testUnicodeSerialization ...                                           [32;1m[OK][0m
twisted.test.test_enterprise
  GadflyTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  MySQLTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  PostgresTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  QuotingTestCase
    testQuoting ...                                                        [32;1m[OK][0m
  SQLiteTestCase
    testPool ...                                                      [34;1m[SKIPPED][0m
    testReflector ...                                                 [34;1m[SKIPPED][0m
  XMLReflectorTestCase
    testReflector ...                                                      [32;1m[OK][0m
twisted.test.test_error
  TestStringification
    testThemAll ...                                                        [32;1m[OK][0m
twisted.test.test_ethernet
  EthernetTestCase
    Adding a protocol with a number >=2**16 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a number >=2**16 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a negative number raises an exception. ...      [32;1m[OK][0m
    Adding a wrong level protocol raises an exception. ...                 [32;1m[OK][0m
    testDemuxing ...                                                       [32;1m[OK][0m
    testMultiplePackets ...                                                [32;1m[OK][0m
    testMultipleSameProtos ...                                             [32;1m[OK][0m
    testPacketParsing ...                                                  [32;1m[OK][0m
    testWrongProtoNotSeen ...                                              [32;1m[OK][0m
twisted.test.test_explorer
  TestBrowseFunction
    Basic checks for browse_function. ...                                  [32;1m[OK][0m
    Testing function with crazy signature. ...                             [32;1m[OK][0m
    Testing zero-argument function signature. ...                          [32;1m[OK][0m
    Testing simple function signature. ...                                 [32;1m[OK][0m
    Testing variable-argument function signature. ...                      [32;1m[OK][0m
  TestBrowser
    Following a chain of Explorers. ...                                    [32;1m[OK][0m
twisted.test.test_extensions
  CorrectComments
    testNoSlashSlashComments ...                                        [31;1m[ERROR][0m
twisted.test.test_factories
  ReconnectingFactoryTestCase
    testStopTrying ...                                                     [32;1m[OK][0m
twisted.test.test_failure
  FailureTestCase
    testExplictPass ...                                                    [32;1m[OK][0m
    Trapping a failure. ...                                                [32;1m[OK][0m
    testPrinting ...                                                       [32;1m[OK][0m
    Making sure trap doesn't trap what it shouldn't. ...                   [32;1m[OK][0m
twisted.test.test_finger
  FingerTestCase
    testForwarding ...                                                     [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testSimple ...                                                         [32;1m[OK][0m
    testSimpleW ...                                                        [32;1m[OK][0m
twisted.test.test_flow
  FlowTest
    testBasic ...                                                          [32;1m[OK][0m
    testBasicIterator ...                                                  [32;1m[OK][0m
    testBasicList ...                                                      [32;1m[OK][0m
    testBuildList ...                                                      [32;1m[OK][0m
    testCallable ...                                                       [32;1m[OK][0m
    testCallback ...                                                       [32;1m[OK][0m
    testCallbackFailure ...                                                [32;1m[OK][0m
    testConcurrentCallback ...                                             [32;1m[OK][0m
    testConsumer ...                                                       [32;1m[OK][0m
    testDeferred ...                                                       [32;1m[OK][0m
    testDeferredFailure ...                                                [32;1m[OK][0m
    testDeferredTrap ...                                                   [32;1m[OK][0m
    testDeferredWrapper ...                                                [32;1m[OK][0m
    testDeferredWrapperFail ...                                            [32;1m[OK][0m
    testDeferredWrapperImmediate ...                                       [32;1m[OK][0m
    testFailure ...                                                        [32;1m[OK][0m
    testFilter ...                                                         [32;1m[OK][0m
    testLineBreak ...                                                      [32;1m[OK][0m
    testMerge ...                                                          [32;1m[OK][0m
    testNotReady ...                                                       [32;1m[OK][0m
    testProducer ...                                                       [32;1m[OK][0m
    testProtocol ...                                                       [32;1m[OK][0m
    testProtocolLocalhost ...                                              [32;1m[OK][0m
    testQueryIterator ...                                                  [32;1m[OK][0m
    testThreaded ...                                                       [32;1m[OK][0m
    The goal of this test is to test the callback mechanism with ...       [32;1m[OK][0m
    testThreadedSleep ...                                                  [32;1m[OK][0m
    testZip ...                                                            [32;1m[OK][0m
    testZipFailure ...                                                     [32;1m[OK][0m
twisted.test.test_formmethod
  ArgumentTestCase
    testBoolean ...                                                        [32;1m[OK][0m
    testChoice ...                                                         [32;1m[OK][0m
    testDate ...                                                           [32;1m[OK][0m
    testFlags ...                                                          [32;1m[OK][0m
    testFloat ...                                                          [32;1m[OK][0m
    testInt ...                                                            [32;1m[OK][0m
    testRangedInteger ...                                                  [32;1m[OK][0m
    testString ...                                                         [32;1m[OK][0m
    testVerifiedPassword ...                                               [32;1m[OK][0m
twisted.test.test_ftp
  FTPClientTests
    testFailedRETR ...                                                     [32;1m[OK][0m
  FTPFileListingTests
    testOneLine ...                                                        [32;1m[OK][0m
  TestAnonymousAvatar
    testAnonymousLogin ...                                               [34;1m[TODO][0m
    testCDUP ...                                                         [34;1m[TODO][0m
    testCWD ... 
/opt/lib/python2.3/site-packages/twisted/test/test_ftp.py:601: exceptions.UserWarning: This test is VERY FRAGILE! in fact, its so fragile it won't run on any other computer but mine
                                                         [34;1m[TODO][0m
    testGetUserUIDAndGID ...                                               [32;1m[OK][0m
    testPWDOnLogin ...                                                   [34;1m[TODO][0m
  TestDTPTesting
    testDTPTestingSanityCheck ...                                          [32;1m[OK][0m
  TestFTPFactory
    testBuildProtocol ...                                          [31;1m[SUCCESS!?!][0m
  TestFTPServer
    testBadCmdSequenceReply ...                                            [32;1m[OK][0m
    testBadCmdSequenceReplyPartTwo ...                                     [32;1m[OK][0m
    testCmdNotImplementedForArgErrors ...                                  [32;1m[OK][0m
    testDecodeHostPort ...                                                 [32;1m[OK][0m
    testLIST ...                                                           [32;1m[OK][0m
    testNotLoggedInReply ...                                               [32;1m[OK][0m
    testPASV ...                                                           [32;1m[OK][0m
    testRETR ...                                                           [32;1m[OK][0m
    testSYST ...                                                           [32;1m[OK][0m
    testTYPE ...                                                         [34;1m[TODO][0m
  TestUtilityFunctions
    testCleanPath ...                                              [31;1m[SUCCESS!?!][0m
twisted.test.test_hook
  HookTestCase
    make sure that the base class's hook is called reliably ...            [32;1m[OK][0m
    test interactions between base-class hooks and subclass hooks ...      [32;1m[OK][0m
twisted.test.test_htb
  ConsumerShaperTest
    testBucketRefs ...                                                     [32;1m[OK][0m
    testRate ...                                                           [32;1m[OK][0m
  TestBucket
    Testing the bucket's drain rate. ...                                   [32;1m[OK][0m
    Testing the size of the bucket. ...                                    [32;1m[OK][0m
  TestBucketNesting
    testBucketParentRate ...                                               [32;1m[OK][0m
    testBucketParentSize ...                                               [32;1m[OK][0m
twisted.test.test_http
  ChunkingTestCase
    testChunks ...                                                         [32;1m[OK][0m
    testConcatenatedChunks ...                                             [32;1m[OK][0m
  DateTimeTest
    testRoundtrip ...                                                      [32;1m[OK][0m
  HTTP0_9TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTP1_0TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTP1_1TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTP1_1_close_TestCase
    testBuffer ...                                                         [32;1m[OK][0m
  HTTPLoopbackTestCase
    testLoopback ...                                                       [32;1m[OK][0m
  ParsingTestCase
    testCookies ...                                                        [32;1m[OK][0m
    testGET ...                                                            [32;1m[OK][0m
    testHeaders ...                                                        [32;1m[OK][0m
    testPOST ...                                                           [32;1m[OK][0m
    testTooManyHeaders ...                                                 [32;1m[OK][0m
  PersistenceTestCase
    testAlgorithm ...                                                      [32;1m[OK][0m
  QueryArgumentsTestCase
    testEscchar ...                                                        [32;1m[OK][0m
    testParseqs ...                                                        [32;1m[OK][0m
    testUnquote ...                                                        [32;1m[OK][0m
twisted.test.test_imap
  AuthenticatorTestCase
    testCramMD5 ...                                                        [32;1m[OK][0m
    testFailedCramMD5 ...                                                  [32;1m[OK][0m
    testFailedLOGIN ...                                                    [32;1m[OK][0m
    testFailedPLAIN ...                                                    [32;1m[OK][0m
    testLOGIN ...                                                          [32;1m[OK][0m
    testPLAIN ...                                                          [32;1m[OK][0m
  CopyWorkerTestCase
    testFeaturefulMessage ...                                              [32;1m[OK][0m
    testUnfeaturefulMessage ...                                            [32;1m[OK][0m
  FetchSearchStoreTestCase
    testSearch ...                                                         [32;1m[OK][0m
    testUIDSearch ...                                                      [32;1m[OK][0m
  HandCraftedTestCase
    testPathelogicalScatteringOfLiterals ... 
/opt/lib/python2.3/site-packages/twisted/trial/util.py:40: exceptions.UserWarning: 
pendingTimedCalls still pending:
 <DelayedCall 11893096 [59.963108778s] called=0 cancelled=0 IMAP4Server.__timedOut()>

                            [34;1m[TODO][0m
    testTrailingLiteral ...                                                [32;1m[OK][0m
  IMAP4HelperTestCase
    testFetchParserBody ...                                                [32;1m[OK][0m
    testFetchParserMacros ...                                              [32;1m[OK][0m
    testFetchParserSimple ...                                              [32;1m[OK][0m
    testFileProducer ...                                                   [32;1m[OK][0m
    testFiles ...                                                          [32;1m[OK][0m
    testHeaderFormatter ...                                                [32;1m[OK][0m
    testIdListParser ...                                                   [32;1m[OK][0m
    testLiterals ...                                                       [32;1m[OK][0m
    testMessageSet ...                                                     [32;1m[OK][0m
    testParenParser ...                                                    [32;1m[OK][0m
    testQueryBuilder ...                                                   [32;1m[OK][0m
    testQuoteAvoider ...                                                   [32;1m[OK][0m
    testQuotedSplitter ...                                                 [32;1m[OK][0m
    testStringCollapser ...                                                [32;1m[OK][0m
    testWildcard ...                                                       [32;1m[OK][0m
    testWildcardNoDelim ...                                                [32;1m[OK][0m
  IMAP4ServerTestCase
    testCapability ...                                                     [32;1m[OK][0m
    testCapabilityWithAuth ...                                             [32;1m[OK][0m
    testCheck ...                                                          [32;1m[OK][0m
    testClose ...                                                          [32;1m[OK][0m
    testCreate ...                                                         [32;1m[OK][0m
    testDelete ...                                                         [32;1m[OK][0m
    testExamine ...                                                        [32;1m[OK][0m
    testExpunge ...                                                        [32;1m[OK][0m
    testFailedLogin ...                                                    [32;1m[OK][0m
    testFailedStatus ...                                                   [32;1m[OK][0m
    testFullAppend ...                                                     [32;1m[OK][0m
    testHierarchicalRename ...                                             [32;1m[OK][0m
    testIllegalDelete ...                                                  [32;1m[OK][0m
    testIllegalInboxDelete ...                                             [32;1m[OK][0m
    testIllegalInboxRename ...                                             [32;1m[OK][0m
    testLSub ...                                                           [32;1m[OK][0m
    testList ...                                                           [32;1m[OK][0m
    testLogin ...                                                          [32;1m[OK][0m
    testLogout ...                                                         [32;1m[OK][0m
    testNamespace ...                                                      [32;1m[OK][0m
    testNonExistentDelete ...                                              [32;1m[OK][0m
    testNoop ...                                                           [32;1m[OK][0m
    testPartialAppend ...                                                  [32;1m[OK][0m
    testRename ...                                                         [32;1m[OK][0m
    testSelect ...                                                         [32;1m[OK][0m
    testStatus ...                                                         [32;1m[OK][0m
    testSubscribe ...                                                      [32;1m[OK][0m
    testUnsubscribe ...                                                    [32;1m[OK][0m
  IMAP4UTF7TestCase
    testDecode ...                                                         [32;1m[OK][0m
    testEncode ...                                                         [32;1m[OK][0m
    testPrintableSingletons ...                                            [32;1m[OK][0m
  MessageProducerTestCase
    testMultipleMultiPart ...                                              [32;1m[OK][0m
    testSingleMultiPart ...                                                [32;1m[OK][0m
    testSinglePart ...                                                     [32;1m[OK][0m
  NewFetchTestCase
    testFetchAll ...                                                       [32;1m[OK][0m
    testFetchAllUID ...                                                    [32;1m[OK][0m
    testFetchBody ...                                                      [32;1m[OK][0m
    testFetchBodyStructure ...                                             [32;1m[OK][0m
    testFetchBodyStructureUID ...                                          [32;1m[OK][0m
    testFetchBodyUID ...                                                   [32;1m[OK][0m
    testFetchEnvelope ...                                                  [32;1m[OK][0m
    testFetchEnvelopeUID ...                                               [32;1m[OK][0m
    testFetchFast ...                                                      [32;1m[OK][0m
    testFetchFastUID ...                                                   [32;1m[OK][0m
    testFetchFlags ...                                                     [32;1m[OK][0m
    testFetchFlagsUID ...                                                  [32;1m[OK][0m
    testFetchFull ...                                                      [32;1m[OK][0m
    testFetchFullUID ...                                                   [32;1m[OK][0m
    testFetchHeaders ...                                                   [32;1m[OK][0m
    testFetchHeadersUID ...                                                [32;1m[OK][0m
    testFetchInternalDate ...                                              [32;1m[OK][0m
    testFetchInternalDateUID ...                                           [32;1m[OK][0m
    testFetchMessage ...                                                   [32;1m[OK][0m
    testFetchMessageUID ...                                                [32;1m[OK][0m
    testFetchSimplifiedBody ...                                            [32;1m[OK][0m
    testFetchSimplifiedBodyRFC822 ...                                      [32;1m[OK][0m
    testFetchSimplifiedBodyRFC822UID ...                                   [32;1m[OK][0m
    testFetchSimplifiedBodyText ...                                        [32;1m[OK][0m
    testFetchSimplifiedBodyTextUID ...                                     [32;1m[OK][0m
    testFetchSimplifiedBodyUID ...                                         [32;1m[OK][0m
    testFetchSize ...                                                      [32;1m[OK][0m
    testFetchSizeUID ...                                                   [32;1m[OK][0m
    testFetchUID ...                                                       [32;1m[OK][0m
  NewStoreTestCase
    testSetFlags ...                                                       [32;1m[OK][0m
  TLSTestCase
    testAPileOfThings ...                                             [34;1m[SKIPPED][0m
    testLoginLogin ...                                                [34;1m[SKIPPED][0m
    testAPileOfThings ...                                             [34;1m[SKIPPED][0m
    testLoginLogin ...                                                [34;1m[SKIPPED][0m
  UnsolicitedResponseTestCase
    testFlagChange ...                                                     [32;1m[OK][0m
    testNewMessages ...                                                    [32;1m[OK][0m
    testNewMessagesAndRecent ...                                           [32;1m[OK][0m
    testNewRecentMessages ...                                              [32;1m[OK][0m
    testReadOnly ...                                                       [32;1m[OK][0m
    testReadWrite ...                                                      [32;1m[OK][0m
twisted.test.test_import
  AtLeastImportTestCase
    test_enterprise ...                                                    [32;1m[OK][0m
    Test importing internet ...                                            [32;1m[OK][0m
    test_lore ...                                                          [32;1m[OK][0m
    Test importing mail ...                                                [32;1m[OK][0m
    Test importing other misc. modules ...                                 [32;1m[OK][0m
    Test importing names ...                                               [32;1m[OK][0m
    Test importing persisted ...                                           [32;1m[OK][0m
    Test importing protocols ...                                           [32;1m[OK][0m
    Test importing spreadables ...                                         [32;1m[OK][0m
    test_test ...                                                          [32;1m[OK][0m
    Test importing twisted.python ...                                      [32;1m[OK][0m
    internet modules for unix. ...                                         [32;1m[OK][0m
    Test importing web ... 
/opt/lib/python2.3/site-packages/twisted/web/widgets.py:22: exceptions.DeprecationWarning: This module is deprecated, please use Woven instead.

/opt/lib/python2.3/site-packages/twisted/test/test_import.py:105: exceptions.DeprecationWarning: Please use twisted.web.woven.guard
                                                [32;1m[OK][0m
    Test importing words ...                                               [32;1m[OK][0m
twisted.test.test_internet
  DelayedTestCase
    testActive ...                                                         [32;1m[OK][0m
    testGetDelayedCalls ...                                                [32;1m[OK][0m
  InterfaceTestCase
    testCallLater ...                                                      [32;1m[OK][0m
    testCallLaterDelayAndReset ...                                         [32;1m[OK][0m
    testCallLaterTime ...                                                  [32;1m[OK][0m
    reactor.wakeUp should terminate reactor.iterate(5) ...                 [32;1m[OK][0m
  MultiServiceTestCase
    testDeferredStopService ...                                            [32;1m[OK][0m
    MutliService.stopService returns Deferred when empty. ...              [32;1m[OK][0m
    MultiService.stopService returns Deferred when service returns None. ... [32;1m[OK][0m
  ProtocolTestCase
    testFactory ...                                                        [32;1m[OK][0m
  ReactorCoreTestCase
    reactor.crash should NOT fire shutdown triggers ...                    [32;1m[OK][0m
    Test that reactor.iterate(0) doesn't block ...                         [32;1m[OK][0m
    Test that reactor.crash terminates reactor.run ...                     [32;1m[OK][0m
  SystemEventTestCase
    testTriggerSystemEvent1 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent2 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent3 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent4 ...                                            [32;1m[OK][0m
    testTriggerSystemEvent5 ...                                            [32;1m[OK][0m
  TestProducer
    testDoubleProducer ...                                                 [32;1m[OK][0m
    testUnconnectedFileDescriptor ...                                      [32;1m[OK][0m
  callFromThreadTestCase
    testCorrectOrder ...                                                   [32;1m[OK][0m
    testNotRunAtOnce ...                                                   [32;1m[OK][0m
    testScheduling ...                                                     [32;1m[OK][0m
twisted.test.test_ip
  IPTestCase
    Adding a protocol with a number >=2**32 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a number >=2**32 raises an exception. ...       [32;1m[OK][0m
    Adding a protocol with a negative number raises an exception. ...      [32;1m[OK][0m
    Adding a wrong level protocol raises an exception. ...                 [32;1m[OK][0m
    testDemuxing ...                                                       [32;1m[OK][0m
    testMultiplePackets ...                                                [32;1m[OK][0m
    testMultipleSameProtos ...                                             [32;1m[OK][0m
    testPacketParsing ...                                                  [32;1m[OK][0m
    testWrongProtoNotSeen ...                                              [32;1m[OK][0m
twisted.test.test_irc
  BasicServerFunctionalityTestCase
    testAction ...                                                         [32;1m[OK][0m
    testJoin ...                                                           [32;1m[OK][0m
    testNotice ...                                                         [32;1m[OK][0m
    testPart ...                                                           [32;1m[OK][0m
    testPrivmsg ...                                                        [32;1m[OK][0m
  CTCPTest
    Testing CTCP query ERRMSG. ...                                         [32;1m[OK][0m
  ModeTestCase
    test_MODE_CHANGE ...                                                   [32;1m[OK][0m
  QuotingTest
    Testing CTCP message level quote/dequote ...                           [32;1m[OK][0m
    Testing client-server level quote/dequote ...                          [32;1m[OK][0m
twisted.test.test_iutils
  UtilsTestCase
    testOutput ...                                                         [32;1m[OK][0m
    testValue ...                                                          [32;1m[OK][0m
twisted.test.test_jabbercomponent
  ComponentAuthTest
    testAuth ...                                                           [32;1m[OK][0m
  TestJabberServiceManager
    testSM ...                                                             [32;1m[OK][0m
twisted.test.test_jabberjid
  JIDClassTest
    testBasic ...                                                          [32;1m[OK][0m
  JIDParsingTest
    testInvalid ...                                                        [32;1m[OK][0m
    testParse ...                                                          [32;1m[OK][0m
twisted.test.test_jelly
  CircularReferenceTestCase
    testCircleWithInvoker ...                                              [32;1m[OK][0m
    testSimpleCircle ...                                                   [32;1m[OK][0m
  JellyTestCase
    test for class-level security of serialization ...                     [32;1m[OK][0m
    test to make sure that objects retain identity properly ...            [32;1m[OK][0m
    test for all types currently supported in jelly ...                    [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
    testMoreReferences ...                                                 [32;1m[OK][0m
    testNewStyleClasses ...                                                [32;1m[OK][0m
    testPersistentStorage ...                                              [32;1m[OK][0m
    testSetState ...                                                       [32;1m[OK][0m
    simplest test case ...                                                 [32;1m[OK][0m
    testStressReferences ...                                               [32;1m[OK][0m
    test for type-level security of serialization ...                      [32;1m[OK][0m
    testUnicode ...                                                        [32;1m[OK][0m
twisted.test.test_journal
  JournalTestCase
    testCommandExecution ...                                               [32;1m[OK][0m
    testLogging ...                                                        [32;1m[OK][0m
    testRecovery ...                                                       [32;1m[OK][0m
    testTime ...                                                           [32;1m[OK][0m
twisted.test.test_log
  LogTest
    testContext ...                                                        [32;1m[OK][0m
    testErrors ...                                                         [32;1m[OK][0m
    testObservation ...                                                    [32;1m[OK][0m
twisted.test.test_logfile
  DailyLogFileTestCase
    testRotation ...                                                       [32;1m[OK][0m
    testWriting ...                                                        [32;1m[OK][0m
  LogFileTestCase
    testAppend ...                                                         [32;1m[OK][0m
    testLogReader ...                                                      [32;1m[OK][0m
    logfile: check rotated files have same permissions as original. ...    [32;1m[OK][0m
    logfile: check it keeps working when permission on dir changes. ...    [32;1m[OK][0m
    testRotation ...                                                       [32;1m[OK][0m
    testWriting ...                                                        [32;1m[OK][0m
twisted.test.test_loopback
  LoopbackTCPTestCase
    testRegularFunction ...                                                [32;1m[OK][0m
    testSneakyHiddenDoom ...                                               [32;1m[OK][0m
  LoopbackTestCase
    testRegularFunction ...                                                [32;1m[OK][0m
    testSneakyHiddenDoom ...                                               [32;1m[OK][0m
twisted.test.test_mail
  AliasTestCase
    testFileAlias ...                                                      [32;1m[OK][0m
    testFileLoader ...                                                     [32;1m[OK][0m
    testHandle ...                                                         [32;1m[OK][0m
    testMultiWrapper ...                                                   [32;1m[OK][0m
  BounceTestCase
    testAddUser ...                                                        [32;1m[OK][0m
    testExists ...                                                         [32;1m[OK][0m
    testMessage ...                                                        [32;1m[OK][0m
    testRelay ...                                                          [32;1m[OK][0m
  DirectoryQueueTestCase
    testDone ...                                                           [32;1m[OK][0m
    testEnvelope ...                                                       [32;1m[OK][0m
    testRelaying ...                                                       [32;1m[OK][0m
    testWaiting ...                                                        [32;1m[OK][0m
  DomainWithDefaultsTestCase
    testMethods ...                                                        [32;1m[OK][0m
  FileMessageTestCase
    testContents ...                                                       [32;1m[OK][0m
    testFinalName ...                                                      [32;1m[OK][0m
    testInterrupted ...                                                    [32;1m[OK][0m
  LiveFireExercise
    testLocalDelivery ...                                                  [32;1m[OK][0m
    testRelayDelivery ...                                                  [32;1m[OK][0m
  MXTestCase
    testManyRecords ...                                                    [32;1m[OK][0m
    testSimpleFailure ...                                                  [32;1m[OK][0m
    testSimpleFailureWithFallback ...                                      [32;1m[OK][0m
    testSimpleSuccess ...                                                  [32;1m[OK][0m
  MailServiceTestCase
    testFactories ...                                                      [32;1m[OK][0m
    testPortals ...                                                        [32;1m[OK][0m
  MaildirDirdbmDomainTestCase
    testAddUser ...                                                        [32;1m[OK][0m
    testCredentials ...                                                    [32;1m[OK][0m
    testRequestAvatar ...                                                  [32;1m[OK][0m
    testRequestAvatarId ...                                                [32;1m[OK][0m
  MaildirTestCase
    testInitializer ...                                                    [32;1m[OK][0m
    testMailbox ...                                                        [32;1m[OK][0m
  ManagedRelayerTestCase
    testConnectionLost ...                                                 [32;1m[OK][0m
    testFailedSentMail ...                                                 [32;1m[OK][0m
    testSuccessfulSentMail ...                                             [32;1m[OK][0m
  ProcessAliasTestCase
    testAliasResolution ...                                                [32;1m[OK][0m
    testCyclicAlias ...                                                    [32;1m[OK][0m
    testProcessAlias ...                                                [31;1m[ERROR][0m
  RelayTestCase
    testExists ...                                                         [32;1m[OK][0m
  RelayerTestCase
    testMailData ...                                                       [32;1m[OK][0m
    testMailFrom ...                                                       [32;1m[OK][0m
    testMailTo ...                                                         [32;1m[OK][0m
  ServiceDomainTestCase
    testReceivedHeader ...                                                 [32;1m[OK][0m
    testValidateFrom ...                                                   [32;1m[OK][0m
    testValidateTo ...                                                     [32;1m[OK][0m
  VirtualPOP3TestCase
    testAuthenticateAPOP ...                                               [32;1m[OK][0m
    testAuthenticatePASS ...                                               [32;1m[OK][0m
twisted.test.test_manhole
  ManholeTest
    Making sure imported module is the same as one previously loaded. ...  [32;1m[OK][0m
    Trying to import __main__ ...                                          [32;1m[OK][0m
twisted.test.test_mvc
  MVCTestCase
    testControllerConstruction ...                                         [32;1m[OK][0m
    testModelManipulation ...                                              [32;1m[OK][0m
    testMoreModelManipulation ...                                          [32;1m[OK][0m
    When the model updates the view should too ...                         [32;1m[OK][0m
    testViewConstruction ...                                               [32;1m[OK][0m
    When the model updates the view should too ...                         [32;1m[OK][0m
twisted.test.test_names
  HelperTestCase
    testSerialGenerator ...                                                [32;1m[OK][0m
  ServerDNSTestCase
    Test DNS 'A6' record queries (IPv6) ...                                [32;1m[OK][0m
    Test DNS 'AAAA' record queries (IPv6) ...                              [32;1m[OK][0m
    Test DNS 'AFSDB' record queries ...                                    [32;1m[OK][0m
    Test simple DNS 'A' record queries ...                                 [32;1m[OK][0m
    Test DNS 'A' record queries with multiple answers ...                  [32;1m[OK][0m
    Test DNS 'A' record queries with edge cases ...                        [32;1m[OK][0m
    Test DNS 'SOA' record queries ...                                      [32;1m[OK][0m
    Test DNS 'CNAME' record queries ...                                    [32;1m[OK][0m
    Test DNS 'HINFO' record queries ...                                    [32;1m[OK][0m
    Test DNS 'MB' record queries ...                                       [32;1m[OK][0m
    Test DNS 'MG' record queries ...                                       [32;1m[OK][0m
    Test DNS 'MINFO' record queries ...                                    [32;1m[OK][0m
    Test DNS 'MR' record queries ...                                       [32;1m[OK][0m
    Test DNS 'MX' record queries ...                                       [32;1m[OK][0m
    Test DNS 'NS' record queries ...                                       [32;1m[OK][0m
    Test DNS 'PTR' record queries ...                                      [32;1m[OK][0m
    Test DNS 'RP' record queries ...                                       [32;1m[OK][0m
    Test DNS 'SRV' record queries ...                                      [32;1m[OK][0m
    testSomeRecordsWithTTLs ...                                            [32;1m[OK][0m
    Test DNS 'TXT' record queries ...                                      [32;1m[OK][0m
    Test DNS 'WKS' record queries ...                                      [32;1m[OK][0m
    Test DNS 'AXFR' queries (Zone transfer) ...                            [32;1m[OK][0m
twisted.test.test_newcred
  CramMD5CredentialsTestCase
    testCheckPassword ...                                                  [32;1m[OK][0m
    testIdempotentChallenge ...                                            [32;1m[OK][0m
    testWrongPassword ...                                                  [32;1m[OK][0m
  NewCredTest
    testBasicLogin ...                                                     [32;1m[OK][0m
    testFailedLogin ...                                                    [32;1m[OK][0m
    testFailedLoginName ...                                                [32;1m[OK][0m
    testListCheckers ...                                                   [32;1m[OK][0m
  OnDiskDatabaseTestCase
    testCaseInSensitivity ...                                              [32;1m[OK][0m
    testHashedPasswords ...                                                [32;1m[OK][0m
    testRequestAvatarId ...                                                [32;1m[OK][0m
    testUserLookup ...                                                     [32;1m[OK][0m
twisted.test.test_newjelly
  CircularReferenceTestCase
    testCircleWithInvoker ...                                              [32;1m[OK][0m
    testSimpleCircle ...                                                   [32;1m[OK][0m
  JellyTestCase
    test for class-level security of serialization ...                     [32;1m[OK][0m
    test to make sure that objects retain identity properly ...            [32;1m[OK][0m
    test for all types currently supported in jelly ...                    [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
    testMoreReferences ...                                                 [32;1m[OK][0m
    testNewStyleClasses ...                                                [32;1m[OK][0m
    testSetState ...                                                       [32;1m[OK][0m
    simplest test case ...                                                 [32;1m[OK][0m
    testStressReferences ...                                               [32;1m[OK][0m
    test for type-level security of serialization ...                      [32;1m[OK][0m
    testUnicode ...                                                        [32;1m[OK][0m
twisted.test.test_news
  NewsTestCase
    testArticleExists ...                                                  [32;1m[OK][0m
    testArticleRequest ...                                                 [32;1m[OK][0m
    testBodyRequest ...                                                    [32;1m[OK][0m
    testHeadRequest ...                                                    [32;1m[OK][0m
twisted.test.test_nmea
  NMEAReceiverTestCase
    testGPSMessages ...                                                    [32;1m[OK][0m
twisted.test.test_nntp
  NNTPTestCase
    testLoopback ...                                                       [32;1m[OK][0m
twisted.test.test_paths
  FilePathTestCase
    testGetAndSet ...                                                      [32;1m[OK][0m
    testInsecureUNIX ...                                                   [32;1m[OK][0m
    Windows has 'special' filenames like NUL and CON and COM1 and LPR ... [34;1m[SKIPPED][0m
    testInvalidSubdir ...                                                  [32;1m[OK][0m
    testMultiExt ...                                                       [32;1m[OK][0m
    testPersist ...                                                        [32;1m[OK][0m
    testPreauthChild ...                                                   [32;1m[OK][0m
    testStatCache ...                                                      [32;1m[OK][0m
    testValidFiles ...                                                     [32;1m[OK][0m
    testValidSubdir ...                                                    [32;1m[OK][0m
  URLPathTestCase
    testChildString ...                                                    [32;1m[OK][0m
    testHereString ...                                                     [32;1m[OK][0m
    testParentString ...                                                   [32;1m[OK][0m
    testSiblingString ...                                                  [32;1m[OK][0m
    testStringConversion ...                                               [32;1m[OK][0m
twisted.test.test_pb
  BrokerTestCase
    testCache ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:112: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:114: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:117: exceptions.DeprecationWarning: This is deprecated. Use PBServerFactory.
                                                         [32;1m[OK][0m
    testCopy ...                                                           [32;1m[OK][0m
    testDefer ...                                                          [32;1m[OK][0m
    testFactoryCopy ...                                                    [32;1m[OK][0m
    testObserve ...                                                        [32;1m[OK][0m
    testPublishable ...                                                    [32;1m[OK][0m
    testRefcount ...                                                       [32;1m[OK][0m
    testReference ...                                                      [32;1m[OK][0m
    testResult ...                                                         [32;1m[OK][0m
    testTooManyRefs ...                                                    [32;1m[OK][0m
    testViewPoint ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:532: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/internet/defer.py:308: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1111: exceptions.DeprecationWarning: pb.Perspective is deprecated, please use pb.Avatar.
                                                     [32;1m[OK][0m
  ConnectionTestCase
    testConnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:785: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:787: exceptions.DeprecationWarning: Cred services are deprecated, use realms instead.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:790: exceptions.DeprecationWarning: Identities are deprecated, switch to credentialcheckers etc.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:794: exceptions.DeprecationWarning: This is deprecated. Use PBServerFactory.

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:815: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1327: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                                       [32;1m[OK][0m
    testDisconnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:861: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                                    [32;1m[OK][0m
    testEmptyPerspective ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:871: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                              [32;1m[OK][0m
    testGetObjectAt ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:809: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.
                                                   [32;1m[OK][0m
    testGoodFailedConnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:853: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                             [32;1m[OK][0m
    testGoodGetObject ...                                                  [32;1m[OK][0m
    testGoodPerspective ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:842: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:846: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                               [32;1m[OK][0m
    testIdentityConnector ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:820: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1441: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.

/opt/lib/python2.3/site-packages/twisted/spread/pb.py:1408: exceptions.DeprecationWarning: This is deprecated. Use PBClientFactory.
                                             [32;1m[OK][0m
    testImmediateClose ...                                                 [32;1m[OK][0m
    testReconnect ... 
/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:883: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().

/opt/lib/python2.3/site-packages/twisted/test/test_pb.py:882: exceptions.DeprecationWarning: Update your backend to use PBServerFactory, and then use login().
                                                     [32;1m[OK][0m
  DisconnectionTestCase
    testBadSerialization ...                                               [32;1m[OK][0m
    testDisconnection ...                                                  [32;1m[OK][0m
  NSPTestCase
    testNSP ...                                                            [32;1m[OK][0m
  NewCredTestCase
    testBadLogin ...                                                       [32;1m[OK][0m
    testLoginLogout ...                                                    [32;1m[OK][0m
    testView ...                                                           [32;1m[OK][0m
  PagingTestCase
    testPagingWithCallback ...                                             [32;1m[OK][0m
    testPagingWithoutCallback ...                                          [32;1m[OK][0m
  SpreadUtilTestCase
    testAsync ...                                                          [32;1m[OK][0m
    testAsyncFail ...                                                      [32;1m[OK][0m
    testRemoteMethod ...                                                   [32;1m[OK][0m
    testSync ...                                                           [32;1m[OK][0m
twisted.test.test_pbfailure
  PBFailureTest
    testPBFailures ...                                                     [32;1m[OK][0m
  PBFailureTestUnsafe
    testPBFailures ...                                                     [32;1m[OK][0m
twisted.test.test_pcp
  BufferedConsumerTest
    testPauseIntercept ...                                                 [32;1m[OK][0m
    testRegisterPull ...                                                   [32;1m[OK][0m
    testResumeIntercept ...                                                [32;1m[OK][0m
    Make sure I say "when." ...                                            [32;1m[OK][0m
    Make sure I resumeProducing when my buffer empties. ...                [32;1m[OK][0m
  BufferedPullTests
    testLateWriteBuffering ...                                             [32;1m[OK][0m
    testResumePull ...                                                     [32;1m[OK][0m
  ConsumerProxyTest
    testFinish ...                                                         [32;1m[OK][0m
    testUnregister ...                                                     [32;1m[OK][0m
    testWrite ...                                                          [32;1m[OK][0m
  PCPII_ConsumerInterfaceTest
    testFinish ...                                                         [32;1m[OK][0m
    testRegisterPush ...                                                   [32;1m[OK][0m
    testUnregister ...                                                     [32;1m[OK][0m
  PCPII_ProducerInterfaceTest
    testPause ...                                                          [32;1m[OK][0m
    testRegistersProducer ...                                              [32;1m[OK][0m
    testResume ...                                                         [32;1m[OK][0m
    testResumeBuffer ...                                                   [32;1m[OK][0m
    testResumeNoEmptyWrite ...                                             [32;1m[OK][0m
    testStop ...                                                           [32;1m[OK][0m
  PCPII_PullProducerTest
    testHoldWrites ...                                                     [32;1m[OK][0m
    testLateWrite ...                                                      [32;1m[OK][0m
    testMergeWrites ...                                                    [32;1m[OK][0m
    testPull ...                                                           [32;1m[OK][0m
  PCP_ConsumerInterfaceTest
    testFinish ...                                                         [32;1m[OK][0m
    testRegisterPush ...                                                   [32;1m[OK][0m
    testUnregister ...                                                     [32;1m[OK][0m
  PCP_ProducerInterfaceTest
    testPause ...                                                          [32;1m[OK][0m
    testRegistersProducer ...                                              [32;1m[OK][0m
    testResume ...                                                         [32;1m[OK][0m
    testResumeBuffer ...                                                   [32;1m[OK][0m
    testResumeNoEmptyWrite ...                                             [32;1m[OK][0m
    testStop ...                                                           [32;1m[OK][0m
  PCP_PullProducerTest
    testHoldWrites ...                                                     [32;1m[OK][0m
    testLateWrite ...                                                      [32;1m[OK][0m
    testMergeWrites ...                                                    [32;1m[OK][0m
    testPull ...                                                           [32;1m[OK][0m
  ProducerProxyTest
    testStop ...                                                           [32;1m[OK][0m
  TransportInterfaceTest
    testWrite ...                                                          [32;1m[OK][0m
twisted.test.test_persisted
  AOTTestCase
    testBasicIdentity ...                                                  [32;1m[OK][0m
    testCopyReg ...                                                        [32;1m[OK][0m
    testFunkyReferences ...                                                [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
    testNonDictState ...                                                   [32;1m[OK][0m
  EphemeralTestCase
    testEphemeral ...                                                      [32;1m[OK][0m
  MarmaladeTestCase
    testBasicIdentity ...                                                  [32;1m[OK][0m
    testCopyReg ...                                                        [32;1m[OK][0m
    testMarmaladeable ...                                                  [32;1m[OK][0m
    testMethodSelfIdentity ...                                             [32;1m[OK][0m
  PicklingTestCase
    testClassMethod ...                                                    [32;1m[OK][0m
    testInstanceMethod ...                                                 [32;1m[OK][0m
    testModule ...                                                         [32;1m[OK][0m
    testStringIO ...                                                       [32;1m[OK][0m
  VersionTestCase
    testNullVersionUpgrade ...                                             [32;1m[OK][0m
    testVersionUpgrade ...                                                 [32;1m[OK][0m
twisted.test.test_policies
  TestTimeout
    testCancelTimeout ...                                                  [32;1m[OK][0m
    testNoTimeout ...                                                      [32;1m[OK][0m
    testResetTimeout ...                                                   [32;1m[OK][0m
    testReturn ...                                                         [32;1m[OK][0m
    testTimeout ...                                                        [32;1m[OK][0m
  ThrottlingTestCase
    testLimit ...                                                          [32;1m[OK][0m
    testReadLimit ...                                                 [34;1m[SKIPPED][0m
    testWriteLimit ...                                                [34;1m[SKIPPED][0m
  TimeoutTestCase
    testThatReadingDataAvoidsTimeout ...                                   [32;1m[OK][0m
    testThatSendingDataAvoidsTimeout ...                                   [32;1m[OK][0m
    testTimeout ...                                                        [32;1m[OK][0m
twisted.test.test_pop3
  AnotherPOP3TestCase
    testAuthListing ...                                                    [32;1m[OK][0m
    testBuffer ...                                                         [32;1m[OK][0m
    testIllegalPASS ...                                                    [32;1m[OK][0m
    testNoop ...                                                           [32;1m[OK][0m
  CapabilityTestCase
    testEXPIRE ...                                                         [32;1m[OK][0m
    testIMPLEMENTATION ...                                                 [32;1m[OK][0m
    testLOGIN_DELAY ...                                                    [32;1m[OK][0m
    testSASL ...                                                           [32;1m[OK][0m
    testTOP ...                                                            [32;1m[OK][0m
    testUIDL ...                                                           [32;1m[OK][0m
    testUSER ...                                                           [32;1m[OK][0m
  DualFunctionTestCase
    testLIST ...                                                           [32;1m[OK][0m
    testUIDL ...                                                           [32;1m[OK][0m
  GlobalCapabilitiesTestCase
    testEXPIRE ...                                                         [32;1m[OK][0m
    testLOGIN_DELAY ...                                                    [32;1m[OK][0m
  POP3TestCase
    testLoopback ...                                                       [32;1m[OK][0m
    testMessages ...                                                       [32;1m[OK][0m
  SASLTestCase
    testValidLogin ...                                                     [32;1m[OK][0m
twisted.test.test_postfix
  PostfixTCPMapQuoteTestCase
    testData ...                                                           [32;1m[OK][0m
  Valid
    testChat ...                                                           [32;1m[OK][0m
    testDeferredChat ...                                                   [32;1m[OK][0m
twisted.test.test_process
  PosixProcessTestCase
    testAbnormalTermination ...                                          [31;1m[FAIL][0m
    testNormalTermination ...                                              [32;1m[OK][0m
    testProcess ...                                                        [32;1m[OK][0m
    testSignal ...                                                         [32;1m[OK][0m
    testStderr ...                                                         [32;1m[OK][0m
    twisted.internet.stdio test. ...                                       [32;1m[OK][0m
  PosixProcessTestCasePTY
    testAbnormalTermination ...                                          [31;1m[FAIL][0m
    testNormalTermination ... 





Killed by signal 2.
[ed at rodney ~]$ 




From itamar at itamarst.org  Wed Feb  4 11:17:10 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 04 Feb 2004 13:17:10 -0500
Subject: [Twisted-Python] I'm mostly offline for next 2-3 weeks
Message-ID: <1075918562.26533.3.camel@sheriffpony>

if anyone needs to get in touch: 347-866-4456





From itamar at itamarst.org  Wed Feb  4 11:17:25 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 04 Feb 2004 13:17:25 -0500
Subject: [Twisted-Python] I'm mostly offline for next 2-3 weeks
Message-ID: <1075918562.26533.3.camel@sheriffpony>

if anyone needs to get in touch: 347-866-4456





From golux at comcast.net  Wed Feb  4 21:31:33 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Wed, 04 Feb 2004 23:31:33 -0500
Subject: [Twisted-Python] Twisted soap bug (issue 488) + patches
Message-ID: <4021C725.1000006@comcast.net>

Hi gang,

I just posted a bug in t.w.soap today, and just now added
patches for soap.py and test_soap.py.  I'd appreciate it
if someone would have a look at them, since Itamar is
going to be offline for a while.  (I made sure that
Twisted/doc/examples/soap.py works now -- it doesn't with
the current CVS version of t.w.soap, but does with the
patch.)

http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue488

Cheers,
Steve




From radix at twistedmatrix.com  Fri Feb  6 15:32:03 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 06 Feb 2004 17:32:03 -0500
Subject: [Twisted-Python] Twisted PyCon Sprints
Message-ID: <402415E3.70508@twistedmatrix.com>

PyCon is going to have 4 days of sprinting this year: March 20 - 23. 
There will be a lot of Twisted hacking going on.

As pointed out at http://www.python.org/cgi-bin/moinmoin/TwistedSprint , 
I'm not going to be organizing a monolithic "Twisted Sprint" this year. 
Last year's wasn't organized well; there's no use in organizing a single 
sprint around so many topics.

Please see the above URL for sprints related to Twisted that will be 
taking place, and to add any of your own Twisted-related sprints. It 
would also be nice if anybody who wants to participate in any of these 
would mention so on that page. It's a wiki, so anybody can edit it (Use 
the "EditText" link on the bottom-left).

There's a lot of potential for great productivity at sprints, so I 
encourage everyone who's coming to PyCon to participate. It will 
definitely be a lot of fun. :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040206/ce5cb89d/attachment.sig>

From stephen at thorne.id.au  Fri Feb  6 18:37:17 2004
From: stephen at thorne.id.au (Stephen Thorne)
Date: Sat, 07 Feb 2004 11:37:17 +1000
Subject: [Twisted-Python] Throttling static.File
Message-ID: <1076117837.885.20.camel@shautha.thorne>

Hi,

I wanted to write a http server that would:
  - show progress of all downloads
  - only allow one http connection per file per ip
  - rate limit the connection to 4kb/sec.

now, I don't know enough about producers in order to know what
pauseProducing and resumeProducing are actually supposed to do. That
aside, I know that in the context of static.File and ThrottlingFactory,
they're doing something that doesn't work properly.

static.FileTransfer.pauseProducing is a no-op
static.FileTransfer.resumeProducing sends 63665 bytes down the
connection

policies.ThrottlingFactory relies on how many bytes have been sent down
the connection per-second to work out if it should throttle, and to
throtte, it calls pauseProducing until the bytes/second has dropped
enough to call resumeProducing.

Basically, using these two components together didn't work, so I hacked
stuff until it did. Please bear in mind this patch should not be applied
because it breaks ThrottlingFactory for anything other than
static.File's (calling pauseProducing(pause=1) on something without
kwargs would be bad).

Is there a 'real' solution to this situation, mine is hideous.

(On another note, and this is a nevow thing, NevowSite is broken with
static.File - I had to use site.Site( MyNevowPage() ) instead of
NevowSite( MyNevowPage() - no big hassle)

Stephen.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch
Type: text/x-patch
Size: 3711 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040207/77154921/attachment-0002.bin>

From executer2002 at gmx.net  Wed Feb  4 06:24:23 2004
From: executer2002 at gmx.net (Tobias Philipp)
Date: Wed, 04 Feb 2004 14:24:23 +0100
Subject: [Twisted-Python] Sending data from ConnectionHandler A to Client B
Message-ID: <4020F287.7080003@gmx.net>

Hi!

Just an easy question... Client A connects, Client B connects. Client A 
sends "Hi, there!" to the server and the server now should send "Hi, 
there" do Client B. Whats the best solution for this small problem?

Thank you very much and I hope that you don't have answered this 
question too often ;-)

Bye
Tobias



From radix at twistedmatrix.com  Sun Feb  8 13:39:14 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sun, 08 Feb 2004 15:39:14 -0500
Subject: [Twisted-Python] Sending data from ConnectionHandler A to Client
 B
In-Reply-To: <4020F287.7080003@gmx.net>
References: <4020F287.7080003@gmx.net>
Message-ID: <40269E72.7040908@twistedmatrix.com>

Tobias Philipp wrote:
> Hi!
> 
> Just an easy question... Client A connects, Client B connects. Client A 
> sends "Hi, there!" to the server and the server now should send "Hi, 
> there" do Client B. Whats the best solution for this small problem?

See doc/examples/chatserver.py


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040208/4ab9e88e/attachment.sig>

From mary-twisted at puzzling.org  Sun Feb  8 14:59:49 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 9 Feb 2004 08:59:49 +1100
Subject: [Twisted-Python] Documentation update: bug filing policy
Message-ID: <20040208215949.GA3565@home.puzzling.org>

Hey everyone,

I've finally dug in and started producing (a little) more documentation
for Twisted. I'd like to encourage people to submit documentation bugs
when they find documentation is inadequate, outdated or missing. (Mark
the topic as "documentation" and assign them to me -- hypatia). Patches
appreciated :)

If you've written an undocumented module that is intended to be used and
is stable (for some arbitary "should be documented" value of stable) a
bug should be filed to the effect that it should be documented. Make me
nosy on docs bugs even if you assign elsewhere. If you assign new docs
to me, I will try and write docs for these bugs, but I probably won't be
able to do this quickly, so don't assign documentation for new modules
to me unless you're prepared to wait. However, if you can't figure out
who to assign to, assign to me by default.

-Mary



From mary-twisted at puzzling.org  Sun Feb  8 15:03:39 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 9 Feb 2004 09:03:39 +1100
Subject: [Twisted-Python] Bug guidelines
Message-ID: <20040208220339.GB3565@home.puzzling.org>

I'm going to write a "bug guidelines" doc for Twisted -- less generic
"please file helpful bugs" and more specific Twisted bug guidelines.

In particular, it's going to say who to assign bugs in particular
modules to. If you own a module or want bugs assigned to you by default,
please add details to
http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue492

If you have questions about Twisted bug reporting or bug fixing process
that you want answered, or answers you want documented, please also add
to http://www.twistedmatrix.com/users/roundup.twistd/twisted/issue492

-Mary



From mcfletch at rogers.com  Mon Feb  9 03:51:45 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Mon, 09 Feb 2004 05:51:45 -0500
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP queries with Twisted...
Message-ID: <40276641.30300@rogers.com>

I've written a UDP-based protocol adaptor (TwistedSNMP) where one of the 
key requirements is the ability to scan thousands of SNMP Agents 
"simultaneously" (i.e. the requests should be asynchronously sent and 
retired as the Agents respond).

http://members.rogers.com/mcfletch/programming/index.htm#TwistedSNMP

Writing a simple asynchronous loop myself (poll on a simple socket, send 
message from queue when writable, read one into other queue when 
readable) allowed for doing a few thousand queries simultaneously), with 
only a few dozen dropped messages.  However, with the Twisted equivalent 
(UDPTransport with my simple protocol object), I was seeing huge drop 
rates, so, gathering that Twisted isn't queueing up the UDP requests, I 
wrote a (byzantine) query-throttling mechanism with Twisted defers.

Problem is, it's a byzantine, fragile (and *slow*) solution to what 
would *seem* to be one of the most common requirements in networked 
development.  Worse yet, because I am seeing such high drop rates I wind 
up having to batch in very small groups, serially (instead of 
parallel-ly), so the primary purpose of the system (fast querying of 
thousands of agents) is lost.  (Instead of taking 1 or 2 minutes to 
query 800 or so Agents it will take on the order of 10 minutes.)

So, the question: is there a simple way to turn on buffered mode in UDP 
transports so that they can deal with queueing up a few thousand 
messages to send, sending them, then having a few thousand computers 
send a reply (within a few seconds of one another)?  Is Twisted just not 
Queue-reliant via use of some mechanism I haven't discovered yet?  Even 
if I do find a decent queueing mechanism, I'm still left with the 
problem that timeouts and the like are going to wind up being measured 
from queueing-time, rather than sending time... not an issue if 
everything gets sent in a half-second or so, but a real problem if it 
takes 8 or 9 seconds just to send the original messages out.

Looking at the udp.Port class, I'm not seeing anything providing a 
queue, seems as though there's a non-blocking write or read, but nothing 
to handle overflows of sends or receives AFAICT, though it looks as 
though a protocol could do some queueing on incoming in its 
datagramReceived... just not sure how that would work.

Thoughts appreciated,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From stephen at thorne.id.au  Mon Feb  9 04:32:18 2004
From: stephen at thorne.id.au (Stephen Thorne)
Date: Mon, 09 Feb 2004 21:32:18 +1000
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
	queries with Twisted...
In-Reply-To: <40276641.30300@rogers.com>
References: <40276641.30300@rogers.com>
Message-ID: <1076326338.1012.4.camel@shautha.thorne>

Have a look at htb.py, you should be able to rate limit the udp
throughput rather easily.

For me doing web stuff it was (in its entirety) like this:


def RateBucket(parent=None):
    bucket = htb.Bucket(parent)
    bucket.rate = 4000
    bucket.maxburst = 12000
    return bucket

bucketFilter = htb.FilterByHost()
bucketFilter.bucketFactory = RateBucket

application = service.Application("simple")
site_factory = server.Site( Directory() )
internet.TCPServer( 
    SERVER_PORT, 
    site_factory
).setServiceParent(application)
site_factory.protocol = htb.ShapedProtocolFactory(
    site_factory.protocol, 
    bucketFilter
)

Hope that helps.

Stephen Thorne

On Mon, 2004-02-09 at 20:51, Mike C. Fletcher wrote:
> I've written a UDP-based protocol adaptor (TwistedSNMP) where one of the 
> key requirements is the ability to scan thousands of SNMP Agents 
> "simultaneously" (i.e. the requests should be asynchronously sent and 
> retired as the Agents respond).
> 
> http://members.rogers.com/mcfletch/programming/index.htm#TwistedSNMP
> 
> Writing a simple asynchronous loop myself (poll on a simple socket, send 
> message from queue when writable, read one into other queue when 
> readable) allowed for doing a few thousand queries simultaneously), with 
> only a few dozen dropped messages.  However, with the Twisted equivalent 
> (UDPTransport with my simple protocol object), I was seeing huge drop 
> rates, so, gathering that Twisted isn't queueing up the UDP requests, I 
> wrote a (byzantine) query-throttling mechanism with Twisted defers.
> 
> Problem is, it's a byzantine, fragile (and *slow*) solution to what 
> would *seem* to be one of the most common requirements in networked 
> development.  Worse yet, because I am seeing such high drop rates I wind 
> up having to batch in very small groups, serially (instead of 
> parallel-ly), so the primary purpose of the system (fast querying of 
> thousands of agents) is lost.  (Instead of taking 1 or 2 minutes to 
> query 800 or so Agents it will take on the order of 10 minutes.)
> 
> So, the question: is there a simple way to turn on buffered mode in UDP 
> transports so that they can deal with queueing up a few thousand 
> messages to send, sending them, then having a few thousand computers 
> send a reply (within a few seconds of one another)?  Is Twisted just not 
> Queue-reliant via use of some mechanism I haven't discovered yet?  Even 
> if I do find a decent queueing mechanism, I'm still left with the 
> problem that timeouts and the like are going to wind up being measured 
> from queueing-time, rather than sending time... not an issue if 
> everything gets sent in a half-second or so, but a real problem if it 
> takes 8 or 9 seconds just to send the original messages out.
> 
> Looking at the udp.Port class, I'm not seeing anything providing a 
> queue, seems as though there's a non-blocking write or read, but nothing 
> to handle overflows of sends or receives AFAICT, though it looks as 
> though a protocol could do some queueing on incoming in its 
> datagramReceived... just not sure how that would work.
> 
> Thoughts appreciated,
> Mike
> 
> _______________________________________
>   Mike C. Fletcher
>   Designer, VR Plumber, Coder
>   http://members.rogers.com/mcfletch/
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From mcfletch at rogers.com  Tue Feb 10 00:24:04 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Tue, 10 Feb 2004 02:24:04 -0500
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
 queries with Twisted...
In-Reply-To: <1076326338.1012.4.camel@shautha.thorne>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne>
Message-ID: <40288714.2040100@rogers.com>

Stephen Thorne wrote:

>Have a look at htb.py, you should be able to rate limit the udp
>throughput rather easily.
>
>For me doing web stuff it was (in its entirety) like this:
>  
>
<bandwidth throttler clipped>

>Hope that helps.
>  
>
If for no other reason than that it convinced me there wasn't a simple 
and elegant solution readily available to be dropped in for a UDP system 
:) .  In the final analysis, what was happening is that individual 
queries were timing out *before the queries were even sent* because it 
was taking so incredibly long to format and send all of the queries.

The manually written system was "pull" based.  It marked the 
time-of-sending for timeout purposes deep in the select loop.  The 
Twisted version is setting the timeout via a callLater when the request 
is *submitted*.  With 2 or 3 thousand queries, the 20 seconds of timeout 
was finishing before any messages were processed from the incoming port, 
then the timeouts would all get called, which kept eating up processing 
time, preventing any messages from getting read, so the port's internal 
buffer would fill up and more timeouts occurred, so basically nothing 
would get through.

Queueing up the outputs before sending didn't help, btw.  Nor would 
simple bandwidth throttling without modifying the timeout characteristics.

My solution, which is rather low tech, is to do an effective "yield" 
after each message is sent, to allow for processing incoming responses.  
This is done with this little method:

    def smallBatch( self, oids, tables, index=0, iterDelay=.01 ):
        if index < len(self.proxies):
            proxy = self.proxies[index]
            self.singleProxy(
                proxy,oids,tables
            )
            reactor.callLater( iterDelay, self.smallBatch, oids, tables, 
index+1 )
        else:
            dl = defer.DeferredList( self.partialDefers )
            dl.addCallback( self.returnFinal )

(which also has a side-effect of introducing a bandwidth throttling), 
but most importantly, it delays setting the timeout on any given query 
until when the query is actually sent (or fairly close to then).  Put 
another way, it gives the system a chance to send the message as soon 
after submitting it as possible.

Have fun all, and thanks, Stephen,
Mike

>Stephen Thorne
>
>On Mon, 2004-02-09 at 20:51, Mike C. Fletcher wrote:
>  
>
...

>>only a few dozen dropped messages.  However, with the Twisted equivalent 
>>(UDPTransport with my simple protocol object), I was seeing huge drop 
>>rates, so, gathering that Twisted isn't queueing up the UDP requests, I 
>>wrote a (byzantine) query-throttling mechanism with Twisted defers.
>>    
>>
...

 
_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From Thomas.Favier at accelance.fr  Tue Feb 10 02:03:56 2004
From: Thomas.Favier at accelance.fr (Thomas Favier)
Date: Tue, 10 Feb 2004 10:03:56 +0100
Subject: [Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous
 UDP queries with Twisted...)
In-Reply-To: <40288714.2040100@rogers.com>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com>
Message-ID: <40289E7C.9000100@accelance.fr>

Mike C. Fletcher wrote:
> If for no other reason than that it convinced me there wasn't a simple 
> and elegant solution readily available to be dropped in for a UDP system 
> :) .  In the final analysis, what was happening is that individual 
> queries were timing out *before the queries were even sent* because it 
> was taking so incredibly long to format and send all of the queries.

You bring my point with SNMP : I've tried to build a SNMP poller based 
on twisted and pySNMP. Main trouble i've had is the decoding time of the 
pure python ASN parser. It spent about 1 full second decoding (packets 
are about 7ko, as i get all values and tables with a GET-BULK, there is 
room for improvement by splitting requests, but that's not significant 
for that matter). So i switched to a threaded implementation using 
yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
for the same requests. Load on the server was more than halved.

Seems that you are hit by the same kind of problems...

I've dug the source of UCD-SNMP but was not able to see a simple hack to 
integrate the UCD packet decoding and the twisted loop, especially with 
the parts dealing with SNMPv3 (UCD- and NET-snmp almost forces you to 
use their select wrapper...) Moreover, the last yapsnmp release is based 
on v4.3 so a little out of date. As my solution works for my (smaller) 
needs, i currently have no plan to improve my solution, but if anyone is 
interested in bringing a full high performance ASN coder-decoder to 
twisted, i'd be willing to help.


-- 
Thomas FAVIER
.accelance msp
Tel. +33 4 26 29 12 22
http://www.accelance.fr




From mcfletch at rogers.com  Tue Feb 10 02:26:54 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Tue, 10 Feb 2004 04:26:54 -0500
Subject: [Twisted-Python] Twisted and SNMP
In-Reply-To: <40289E7C.9000100@accelance.fr>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
Message-ID: <4028A3DE.2020101@rogers.com>

Thomas Favier wrote:

> Mike C. Fletcher wrote:
>
>> If for no other reason than that it convinced me there wasn't a 
>> simple and elegant solution readily available to be dropped in for a 
>> UDP system :) .  In the final analysis, what was happening is that 
>> individual queries were timing out *before the queries were even 
>> sent* because it was taking so incredibly long to format and send all 
>> of the queries.
>
>
> You bring my point with SNMP : I've tried to build a SNMP poller based 
> on twisted and pySNMP. Main trouble i've had is the decoding time of 
> the pure python ASN parser. It spent about 1 full second decoding 
> (packets are about 7ko, as i get all values and tables with a 
> GET-BULK, there is room for improvement by splitting requests, but 
> that's not significant for that matter). So i switched to a threaded 
> implementation using yapsnmp (and ugly deferToThreads). Decoding times 
> are about 0.02 seconds for the same requests. Load on the server was 
> more than halved.
>
> Seems that you are hit by the same kind of problems...

...

> but if anyone is interested in bringing a full high performance ASN 
> coder-decoder to twisted, i'd be willing to help.

Ilya (creator of PySNMP) just released a new version of PySNMP 
yesterday.  It's noticeably faster feeling than the 3.3.x version.  I 
don't have time to do timings with it, but I'd guess it's probably 
taking 3/4 of the time of the previous version.  Still likely not 0.02 
seconds on getbulk requests, but noticeably faster.

Profiling the ASN parser and writing a small accelerator module would 
likely be quite doable.  From what I've seen there's not a lot of 
complex code in there.  It's just hidden deep in the package structure.  
Nice thing about that approach is that it's possible to port to new 
platforms and only worry about the C module being present if you need 
the speed there.

My primary interest here isn't really in speed, we query 8000 agents at 
a time, and only need to query once every few *hours*.  The flexibility 
& robustness of the code is my primary interest.  Too much C gets me 
worried :) , particularly with networking code, where buffer overflows 
and the like are a pain to avoid.

Have fun,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From nico at tekNico.net  Tue Feb 10 04:08:22 2004
From: nico at tekNico.net (Nicola Larosa)
Date: Tue, 10 Feb 2004 12:08:22 +0100
Subject: [Twisted-Python] Re: Twisted and SNMP
In-Reply-To: <4028A3DE.2020101@rogers.com>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr> <4028A3DE.2020101@rogers.com>
Message-ID: <4028BBA6.1060009@tekNico.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

> Ilya (creator of PySNMP) just released a new version of PySNMP
> yesterday.

As a data point, TwistedSNMP just appearead on Daily Python-URL:

Two Python SNMP packages updated
http://www.pycs.net/users/0000231/weblog/2004/02/05.html


- --
Nicola Larosa - nico-NoSp at m-tekNico.net

"Hope" is the thing with feathers -
That perches in the soul -
And sings the tune without the words -
And never stops - at all -
 -- Emily Dickinson

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAKLuGXv0hgDImBm4RAmfeAKCmLWv313qygJ2GLj5vqkPe/7UnxACdGt8Q
fzPd1AEB5PE6HvGVZhsF50E=
=S9cz
-----END PGP SIGNATURE-----

-- 
Nicola Larosa - nico at tekNico.net

"Hope" is the thing with feathers -
That perches in the soul -
And sings the tune without the words -
And never stops - at all -
 -- Emily Dickinson




From anthony at interlink.com.au  Tue Feb 10 06:21:24 2004
From: anthony at interlink.com.au (Anthony Baxter)
Date: Wed, 11 Feb 2004 00:21:24 +1100
Subject: [Twisted-Python] Twisted and SNMP
In-Reply-To: <40289E7C.9000100@accelance.fr>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
Message-ID: <4028DAD4.2020303@interlink.com.au>

Thomas Favier wrote:
> You bring my point with SNMP : I've tried to build a SNMP poller based 
> on twisted and pySNMP. Main trouble i've had is the decoding time of the 
> pure python ASN parser. It spent about 1 full second decoding (packets 
> are about 7ko, as i get all values and tables with a GET-BULK, there is 
> room for improvement by splitting requests, but that's not significant 
> for that matter). So i switched to a threaded implementation using 
> yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
> for the same requests. Load on the server was more than halved.


Considered doing some profiling, then using psyco or pyrex to remove the
bottlenecks? This seems, to me, like something they'd be great at.




From golux at comcast.net  Tue Feb 10 22:00:39 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Wed, 11 Feb 2004 00:00:39 -0500
Subject: [Twisted-Python] For examples:  cred.py example adapted to use a db-based checker
Message-ID: <4029B6F7.6030703@comcast.net>

I don't know if this is of interest, but at least it works.  :)
There are surely some suboptimal (heh) things about it (like
doing separate db accesses for username and passwd, which I'll
work on some more ... but both accesses use a primary key
index, so not *too* bad I guess), so feel free to comment and/or
patch/rewrite -- especially to show more mainstream twisted ways
to do it, which I'm always happy to learn.

Cheers,
Steve
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: credwithdb.py
URL: </pipermail/twisted-python/attachments/20040211/4d53b852/attachment.ksh>

From andy at thecablelounge.com  Wed Feb 11 05:44:04 2004
From: andy at thecablelounge.com (andy at thecablelounge.com)
Date: Wed, 11 Feb 2004 04:44:04 -0800
Subject: [Twisted-Python] Good(twisted) References for Programming Patterns
Message-ID: <1076503444.402a2394d0360@cablelounge.com>

Hi all,

I'm looking to pick up a reference on programming patterns. Something that
agrees with twisted's flavour would be a big advantage.  Any recommendations
are greatly appreciated.

cheers,
Andy.



From James.Hedden at RANDOLPH.AF.MIL  Wed Feb 11 13:51:02 2004
From: James.Hedden at RANDOLPH.AF.MIL (Hedden James E Contr AFPC/DPDOSC)
Date: Wed, 11 Feb 2004 14:51:02 -0600
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
Message-ID: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>

Hi, 

 

I perform initial evaluations of software for the Air Force Personnel
Center.  In that capacity, I install software to be evaluated onto a test
box solely to ensure the program is compatible with Windows 2000 and our
Network.  Once that's established, the program is installed to the user's
computer (preferably another test computer) for the user-level evaluation
that only the actual user of the program can do.

 

I've downloaded Twisted-1.1.1.win32-py2.3.exe for eval from your website and
also need some information for my eval sheet.  I checked your site, but
couldn't find the following technical specifications / requirements I need.
Can you supply, or point me to this information, please?

 

        Operating Systems supported 

        Type Processor required 

        Memory requirements 

        Hard Drive space required 

        Other Hardware and Software requirements 

 

Is there also a more compact, simpler definition of the program; and a
simple list of functions? 

 

Thank you very much for your time and trouble. 

 

Cheers! 

 

Jim Hedden, AFPC/DPDOSC

Communications Support 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040211/75b2a301/attachment.html>

From alexander.winston at comcast.net  Wed Feb 11 14:16:28 2004
From: alexander.winston at comcast.net (Alexander Winston)
Date: Wed, 11 Feb 2004 16:16:28 -0500
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
In-Reply-To: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
References: 	 <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
Message-ID: <1076534187.1582.10.camel@duende>

On Wed, 2004-02-11 at 15:51, Hedden James E Contr AFPC/DPDOSC wrote:
> I've downloaded Twisted-1.1.1.win32-py2.3.exe for eval from your
> website and also need some information for my eval sheet.  I checked
> your site, but couldn't find the following technical specifications /
> requirements I need.  Can you supply, or point me to thisinformation,
> please?
> 
>  
> 
>         Operating Systems supported 
> 
>         Type Processor required 
> 
>         Memory requirements 
> 
>         Hard Drive space required 
> 
>         Other Hardware and Software requirements 
> 
>  
> 
> Is there also a more compact, simpler definition of the program; and a
> simple list of functions? 

As far as operating systems go, I'm fairly certain that Twisted will run
on any operating system on which Python will run. I don't know of any
processor requirements; the only thing that's really required is Python.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040211/4a46db76/attachment.sig>

From corydodt at twistedmatrix.com  Wed Feb 11 14:19:50 2004
From: corydodt at twistedmatrix.com (Cory Dodt)
Date: Wed, 11 Feb 2004 13:19:50 -0800
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
In-Reply-To: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
References: <B952B6C85D68D64BAFD919F68920EF5C08298384@fstymx47.randolph.aetc.ds.af.mil>
Message-ID: <402A9C76.8000901@twistedmatrix.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I think you might be a little confused; Twisted's primary purpose is as an
application development framework.  The installer you downloaded installs
tools and libraries for developing applications in Python.  Although there are
some features that can be used standalone (twistd -f web.tap comes to mind),
it is not an application unto itself and these tools are secondary to the
purpose of Twisted which is as a developers' resource.

As such, any minimum disk requirements would be only for the toolkit, not
including Python (which is required).  Minimum processor specs and memory
requirements are meaningless outside of the context of an application.

That said:
* the installer you downloaded requires 65MB of disk space including the
documentation which takes up most of the space.  There is another installer at
the same site that does not install doco, and requires 12MB installed.
* Any support you get for any operating systems would be on a contract basis
with the developers, as this is an open source project.  However, Linux, Mac
OS X 10.2 and 10.3 and Windows 98 and later are all known to work with
Twisted, as well as various flavors of Unix.  Basically, anywhere Python runs
(http://python.org).



See also:
~  Product page
~    http://twistedmatrix.com/products/twisted
~  FAQ
~    http://twistedmatrix.com/documents/howto/faq

Wiki, etc...

Hedden James E Contr AFPC/DPDOSC wrote:

| Hi,
|
|
|
| I perform initial evaluations of software for the Air Force Personnel
| Center.  In that capacity, I install software to be evaluated onto a
| test box solely to ensure the program is compatible with Windows 2000
| and our Network.  Once that's established, the program is installed to
| the user's computer (preferably another test computer) for the
| user-level evaluation that only the actual user of the program can do.
|
|
|
| I've downloaded *Twisted-1.1.1.win32-py2.3.exe* for eval from your
| website and also need some information for my eval sheet.  I checked
| your site, but couldn't find the following technical specifications /
| requirements I need.  Can you supply, or point me to this information,
| please?
|
|
|
|         Operating Systems supported
|
|         Type Processor required
|
|         Memory requirements
|
|         Hard Drive space required
|
|         Other Hardware and Software requirements
|
|
|
| Is there also a more compact, simpler definition of the program; and a
| simple list of functions?
|
|
|
| Thank you very much for your time and trouble.
|
|
|
| Cheers!
|
|
|
| Jim Hedden, AFPC/DPDOSC
|
| Communications Support
|
|
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAKpx13A5SrXAiHQcRAgqQAJ9xHDmcF0r/MPnLT2AAoDzk08Y5jgCdHRA9
Kpb3S21XVRo9rr32+3QrBQ0=
=rRva
-----END PGP SIGNATURE-----



From James.Hedden at RANDOLPH.AF.MIL  Wed Feb 11 14:47:36 2004
From: James.Hedden at RANDOLPH.AF.MIL (Hedden James E Contr AFPC/DPDOSC)
Date: Wed, 11 Feb 2004 15:47:36 -0600
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
Message-ID: <B952B6C85D68D64BAFD919F68920EF5C08298386@fstymx47.randolph.aetc.ds.af.mil>

Hi Cory,

You're probably very right; I'm sure I am confused.  I'm only the Tech who
installs this once to make sure it will in Win2K and is compatible with our
Network.  What you described, though, does sound like what the folks here
were looking for.  I've cc'd the primary user here so he'll know if I've
gotten the correct software downloaded.

Thanks a lot for the info and for your time and trouble.

Cheers!

Jim

-----Original Message-----
From: Cory Dodt [mailto:corydodt at twistedmatrix.com] 
Sent: Wednesday, February 11, 2004 3:20 PM
To: twisted-python at twistedmatrix.com
Subject: Re: [Twisted-Python] System Requirements Request (Remedy 70699)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I think you might be a little confused; Twisted's primary purpose is as an
application development framework.  The installer you downloaded installs
tools and libraries for developing applications in Python.  Although there
are some features that can be used standalone (twistd -f web.tap comes to
mind), it is not an application unto itself and these tools are secondary to
the purpose of Twisted which is as a developers' resource.

As such, any minimum disk requirements would be only for the toolkit, not
including Python (which is required).  Minimum processor specs and memory
requirements are meaningless outside of the context of an application.

That said:
* the installer you downloaded requires 65MB of disk space including the
documentation which takes up most of the space.  There is another installer
at
the same site that does not install doco, and requires 12MB installed.
* Any support you get for any operating systems would be on a contract basis
with the developers, as this is an open source project.  However, Linux, Mac
OS X 10.2 and 10.3 and Windows 98 and later are all known to work with
Twisted, as well as various flavors of Unix.  Basically, anywhere Python
runs
(http://python.org).



See also:
~  Product page
~    http://twistedmatrix.com/products/twisted
~  FAQ
~    http://twistedmatrix.com/documents/howto/faq

Wiki, etc...

Hedden James E Contr AFPC/DPDOSC wrote:

| Hi,
|
|
|
| I perform initial evaluations of software for the Air Force Personnel
| Center.  In that capacity, I install software to be evaluated onto a
| test box solely to ensure the program is compatible with Windows 2000
| and our Network.  Once that's established, the program is installed to
| the user's computer (preferably another test computer) for the
| user-level evaluation that only the actual user of the program can do.
|
|
|
| I've downloaded *Twisted-1.1.1.win32-py2.3.exe* for eval from your
| website and also need some information for my eval sheet.  I checked
| your site, but couldn't find the following technical specifications /
| requirements I need.  Can you supply, or point me to this information,
| please?
|
|
|
|         Operating Systems supported
|
|         Type Processor required
|
|         Memory requirements
|
|         Hard Drive space required
|
|         Other Hardware and Software requirements
|
|
|
| Is there also a more compact, simpler definition of the program; and a
| simple list of functions?
|
|
|
| Thank you very much for your time and trouble.
|
|
|
| Cheers!
|
|
|
| Jim Hedden, AFPC/DPDOSC
|
| Communications Support
|
|
|

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3-nr1 (Windows 2000)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFAKpx13A5SrXAiHQcRAgqQAJ9xHDmcF0r/MPnLT2AAoDzk08Y5jgCdHRA9
Kpb3S21XVRo9rr32+3QrBQ0=
=rRva
-----END PGP SIGNATURE-----

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040211/56299891/attachment.html>

From James.Hedden at RANDOLPH.AF.MIL  Wed Feb 11 14:49:35 2004
From: James.Hedden at RANDOLPH.AF.MIL (Hedden James E Contr AFPC/DPDOSC)
Date: Wed, 11 Feb 2004 15:49:35 -0600
Subject: [Twisted-Python] System Requirements Request (Remedy 70699)
Message-ID: <B952B6C85D68D64BAFD919F68920EF5C08298387@fstymx47.randolph.aetc.ds.af.mil>

Thanks a lot for the info and for your time and trouble.  I just need to
fill in the squares on the form to satisfy local requirements and regs.

Cheers!

Jim


-----Original Message-----
From: Alexander Winston [mailto:alexander.winston at comcast.net] 
Sent: Wednesday, February 11, 2004 3:16 PM
To: twisted-python at twistedmatrix.com
Cc: Auclair Dianne K Civ AFPC/DPDOSC; Martin Billy P Civ AFPC/DPDOSC;
Bruderer Benjamin Contr AFPC/DPDOSC
Subject: Re: [Twisted-Python] System Requirements Request (Remedy 70699)

On Wed, 2004-02-11 at 15:51, Hedden James E Contr AFPC/DPDOSC wrote:
> I've downloaded Twisted-1.1.1.win32-py2.3.exe for eval from your
> website and also need some information for my eval sheet.  I checked
> your site, but couldn't find the following technical specifications /
> requirements I need.  Can you supply, or point me to thisinformation,
> please?
> 
>  
> 
>         Operating Systems supported 
> 
>         Type Processor required 
> 
>         Memory requirements 
> 
>         Hard Drive space required 
> 
>         Other Hardware and Software requirements 
> 
>  
> 
> Is there also a more compact, simpler definition of the program; and a
> simple list of functions? 

As far as operating systems go, I'm fairly certain that Twisted will run
on any operating system on which Python will run. I don't know of any
processor requirements; the only thing that's really required is Python.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040211/a8e5112e/attachment.html>

From mcfletch at rogers.com  Thu Feb 12 05:07:24 2004
From: mcfletch at rogers.com (Mike C. Fletcher)
Date: Thu, 12 Feb 2004 07:07:24 -0500
Subject: [Twisted-Python] Why twisted.internet.error.TimeoutError and twisted.internet.defer.TimeoutError?
Message-ID: <402B6C7C.6030804@rogers.com>

I realise there's arguments that you want to be able to distinguish 
between the two, so having a DeferredTimeoutError and a regular 
TimeoutError would make sense, but it would still seem that you'd want 
them to have a common base-class that lets you catch them together.

Just a thought,
Mike

_______________________________________
  Mike C. Fletcher
  Designer, VR Plumber, Coder
  http://members.rogers.com/mcfletch/





From andrew-twisted at puzzling.org  Thu Feb 12 05:25:19 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 12 Feb 2004 23:25:19 +1100
Subject: [Twisted-Python] Why twisted.internet.error.TimeoutError and twisted.internet.defer.TimeoutError?
In-Reply-To: <402B6C7C.6030804@rogers.com>
References: <402B6C7C.6030804@rogers.com>
Message-ID: <20040212122519.GA13324@frobozz>

On Thu, Feb 12, 2004 at 07:07:24AM -0500, Mike C. Fletcher wrote:
> I realise there's arguments that you want to be able to distinguish 
> between the two, so having a DeferredTimeoutError and a regular 
> TimeoutError would make sense, but it would still seem that you'd want 
> them to have a common base-class that lets you catch them together.

I suppose the reason is that no-one thought about it very much :)

IIRC, defer.TimeoutError (and the setTimeout method of Deferred) was
originally added by me, and I guess I erred on the side of caution.  Aside
from setTimeout, there's nothing in defer.py that depends on anything else
in the twisted.internet package, and I was probably trying to avoid making
the dependency on twisted.internet any larger than it needed to be...

I'd have no problems with a common base class, although I think I'd lean
towards just using TimeoutError directly from twisted.internet.error.  Does
anyone else have an opinion?

-Andrew.




From michael.l.schneider at ugsplm.com  Thu Feb 12 06:57:07 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 12 Feb 2004 08:57:07 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D521@uscimplm001.net.plm.eds.com>

Hello All,


I am making real progress with twisted.  Thank you very much
for the great project.


I am creating a process launcher that runs on SGI, SUN, IBM AIX,
HPUX, and windows 2000 and XP.


I modified the adbapi.py file to pool jobs.  It works great.

Problem:
Sometimes the launched c program will hang. (standard exe file).
I want to launch a process with timeout value.


Ex.  I know that task X usually take 1200 seconds to run, but it
will sometimes hang.  If the exe has not finished running after
1500 seconds, I want to kill the job and notify the caller that
their job timed out.


What are some options for implementing this with twisted.

NOTE: each process is launched in its own thread, so killing the
thread is an option is that is required.

Thanks,
Mike

 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state



From exarkun at intarweb.us  Thu Feb 12 08:27:23 2004
From: exarkun at intarweb.us (Jp Calderone)
Date: Thu, 12 Feb 2004 10:27:23 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB538D521@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB538D521@uscimplm001.net.plm.eds.com>
Message-ID: <20040212152723.GA11833@intarweb.us>

On Thu, Feb 12, 2004 at 08:57:07AM -0500, Schneider, Michael wrote:
> Hello All,
> 
> 
> I am making real progress with twisted.  Thank you very much
> for the great project.
> 
> 
> I am creating a process launcher that runs on SGI, SUN, IBM AIX,
> HPUX, and windows 2000 and XP.
> 
> 
> I modified the adbapi.py file to pool jobs.  It works great.
> 
> Problem:
> Sometimes the launched c program will hang. (standard exe file).
> I want to launch a process with timeout value.
> 
> 
> Ex.  I know that task X usually take 1200 seconds to run, but it
> will sometimes hang.  If the exe has not finished running after
> 1500 seconds, I want to kill the job and notify the caller that
> their job timed out.
> 
> 
> What are some options for implementing this with twisted.
> 
> NOTE: each process is launched in its own thread, so killing the
> thread is an option is that is required.
> 

  I don't understand this.  Are you using reactor.spawnProcess() to start
these processes?  If not, you should be.  If so, it should be called from
the main thread, and the process can be killed with the usual means,
os.kill(pid).  The PID is available, though I forget exactly where, probably
as processProtocol.transport.pid.  You can use reactor.callLater to set up a
simple timeout so that processes are killed if they run for too long.

  Jp

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: </pipermail/twisted-python/attachments/20040212/c6f6130b/attachment.sig>

From michael.l.schneider at ugsplm.com  Thu Feb 12 09:03:52 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 12 Feb 2004 11:03:52 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>

Again, I could be taking the wrong approach:


Here is the scenerao:

1) Why the pooling
Each compute node can run 2 processes at the same time (big processes)
The compute node must accept more jobs then it can run, and hold the
waiting tasks in a queue.  (logically similar problem to database
connections, except, compute connections are used instead).

2) why not spawnProcess
The code said that spawnprocess is broken on windows. (I could be
looking
in the wrong place, twisted is a big codebase :-)

I fell back to using popen2 in a thead managed by the "thread pool"



I am always open to refactoring a design.  Windows is my prime platform,
but I also must support the UNIX platforms.

Hope this helps clairify what I am doing (not saying that I am taking
the correct approach with twisted, but I am trying and willing to change
to do it the twisted way :-)

Thank you very much,
Mike
 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a
non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of 
> Jp Calderone
> Sent: Thursday, February 12, 2004 10:27 AM
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] What is the "Twisted" way to kill stuck
> child process
> 
> 
> On Thu, Feb 12, 2004 at 08:57:07AM -0500, Schneider, Michael wrote:
> > Hello All,
> > 
> > 
> > I am making real progress with twisted.  Thank you very much
> > for the great project.
> > 
> > 
> > I am creating a process launcher that runs on SGI, SUN, IBM AIX,
> > HPUX, and windows 2000 and XP.
> > 
> > 
> > I modified the adbapi.py file to pool jobs.  It works great.
> > 
> > Problem:
> > Sometimes the launched c program will hang. (standard exe file).
> > I want to launch a process with timeout value.
> > 
> > 
> > Ex.  I know that task X usually take 1200 seconds to run, but it
> > will sometimes hang.  If the exe has not finished running after
> > 1500 seconds, I want to kill the job and notify the caller that
> > their job timed out.
> > 
> > 
> > What are some options for implementing this with twisted.
> > 
> > NOTE: each process is launched in its own thread, so killing the
> > thread is an option is that is required.
> > 
> 
>   I don't understand this.  Are you using 
> reactor.spawnProcess() to start
> these processes?  If not, you should be.  If so, it should be 
> called from
> the main thread, and the process can be killed with the usual means,
> os.kill(pid).  The PID is available, though I forget exactly 
> where, probably
> as processProtocol.transport.pid.  You can use 
> reactor.callLater to set up a
> simple timeout so that processes are killed if they run for too long.
> 
>   Jp
> 
> 



From exarkun at intarweb.us  Thu Feb 12 09:50:39 2004
From: exarkun at intarweb.us (Jp Calderone)
Date: Thu, 12 Feb 2004 11:50:39 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child process
In-Reply-To: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>
References: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>
Message-ID: <20040212165039.GA12303@intarweb.us>

On Thu, Feb 12, 2004 at 11:03:52AM -0500, Schneider, Michael wrote:
> Again, I could be taking the wrong approach:
> 
> 
> Here is the scenerao:
> 
> 1) Why the pooling
> Each compute node can run 2 processes at the same time (big processes)
> The compute node must accept more jobs then it can run, and hold the
> waiting tasks in a queue.  (logically similar problem to database
> connections, except, compute connections are used instead).
> 
> 2) why not spawnProcess
> The code said that spawnprocess is broken on windows. (I could be
> looking
> in the wrong place, twisted is a big codebase :-)
> 
> I fell back to using popen2 in a thead managed by the "thread pool"
> 
> 
> 
> I am always open to refactoring a design.  Windows is my prime platform,
> but I also must support the UNIX platforms.
> 
> Hope this helps clairify what I am doing (not saying that I am taking
> the correct approach with twisted, but I am trying and willing to change
> to do it the twisted way :-)

  I'm not certain of the status of spawnProcess on Windows.  If it really
doesn't work, I suppose popen2 is about all you can do.

  Since you're mainly developing on Windows, I doubt I can offer much more
assistance, having never written any multiprocess Windows apps.

  If popen2 lets you get PIDs on Windows, and os.kill() works with those
PIDs on Windows, I think you should still be able to timeout processes
fairly easily.  If they don't, maybe someone with more Windows experience
can chime in.

  Jp
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: </pipermail/twisted-python/attachments/20040212/32c3d9d3/attachment.sig>

From daedalus at eigenmagic.com  Thu Feb 12 17:31:55 2004
From: daedalus at eigenmagic.com (Justin Warren)
Date: Fri, 13 Feb 2004 11:31:55 +1100
Subject: [Twisted-Python] Beepy Twisted Library
In-Reply-To: <20040128131342.PAAV5308.smtp1.fuse.net@smtp.fuse.net>
References: <20040128131342.PAAV5308.smtp1.fuse.net@smtp.fuse.net>
Message-ID: <20040213003155.GA30060@snafu.eigenmagic.com>

On Wed, Jan 28, 2004 at 08:13:42AM -0500, Mike Schneider wrote:
> After reading the emails on the list I downloaded the Beepy
> Twisted BEEP library.
> 
> I read the included docs, and looked at the test cases.
> 
> I had a server and client up in less than an hour.
> 
> Thank you for your work on this package.  I am going to
> spend more time prototyping today.

Thanks for the feedback, Mike.

> I like the development style:
>    - simple short tests
>    - test cases that serve as models for code development

I hate writing doco, as I tend to get a bit anal about it, and it's
time consuming to get it 'just so'. Besides, it's usually easier to
show you what I mean than to explain it.

> FYI.  I am running Python2.3 on Windows, so I had to download
> PyOpenSSL from:

Sweet! As far as I know, you're the first person to try it under
Windows. If you could resend me the link to the PyOpenSSL thing you
used, I'll see if I can't add it to the website somewhere to help out
others. 

Cheers,

Justin

-- 
"I'd think a dominatrix would give you a switching power supply."
  -- Eric The Read in a.s.r



From alan at norfolkgraphics.com  Thu Feb 12 17:46:29 2004
From: alan at norfolkgraphics.com (Alan McIntyre)
Date: Thu, 12 Feb 2004 19:46:29 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child
 process
In-Reply-To: <20040212165039.GA12303@intarweb.us>
References: <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com> <20040212165039.GA12303@intarweb.us>
Message-ID: <402C1E65.8070302@norfolkgraphics.com>

os.kill() isn't available on Windows, at least not in my version of 
Python 2.3.

I wrote a C extension that would allow me to shut down some programs, 
but I had to get a handle to a process' window before I could get its 
PID.  Since I knew the class names and/or window caption text of the 
windows in the applications I wanted to close, I stopped when I figured 
out how to find the window handles and didn't look into it any more.

If you can get the PID from some other source, you can write an 
extension to use OpenProcess and TerminateProcess to get a handle to the 
process and kill it.

Let me know if you'd like some code samples and I can go dig them up.

Jp Calderone wrote:
>   If popen2 lets you get PIDs on Windows, and os.kill() works with those
> PIDs on Windows, I think you should still be able to timeout processes
> fairly easily.  If they don't, maybe someone with more Windows experience
> can chime in.





From glyph at twistedmatrix.com  Thu Feb 12 20:20:34 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 12 Feb 2004 22:20:34 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck child
	process
In-Reply-To: <20040212165039.GA12303@intarweb.us>
References: 	 <49199579A2BB32438A7572AF3DBB2FB538D522@uscimplm001.net.plm.eds.com>
	 <20040212165039.GA12303@intarweb.us>
Message-ID: <1076642434.26555.3.camel@localhost>

On Thu, 2004-02-12 at 11:50, Jp Calderone wrote:

>   I'm not certain of the status of spawnProcess on Windows.  If it really
> doesn't work, I suppose popen2 is about all you can do.
> 
>   Since you're mainly developing on Windows, I doubt I can offer much more
> assistance, having never written any multiprocess Windows apps.
> 
>   If popen2 lets you get PIDs on Windows, and os.kill() works with those
> PIDs on Windows, I think you should still be able to timeout processes
> fairly easily.  If they don't, maybe someone with more Windows experience
> can chime in.

If you want to use spawnProcess on windows, you must use the win32
reactor.  This has some limiting effects (but then, so does windows
itself).  Don't use popen2 with Twisted - the SIGCHLD handler that
twistd installs will cause conflicts and crashes.





From michael.l.schneider at ugsplm.com  Thu Feb 12 21:16:39 2004
From: michael.l.schneider at ugsplm.com (Schneider, Michael)
Date: Thu, 12 Feb 2004 23:16:39 -0500
Subject: [Twisted-Python] What is the "Twisted" way to kill stuck childprocess
Message-ID: <49199579A2BB32438A7572AF3DBB2FB538D524@uscimplm001.net.plm.eds.com>

Thank you,

I just found the win32eventreactor code.

Sorry to ask such a simple question,should I
create a process protocol to use with the
win32 reactor with spawnProcess?


Thanks,
Mike




 
----------------------------------------------------------------
Michael Schneider
Senior Software Engineering Consultant
UGS PLM Solutions - an EDS Company
 
"The Greatest Performance Improvement Is the transitioning from a non-working state to the working state"


> -----Original Message-----
> From: twisted-python-admin at twistedmatrix.com
> [mailto:twisted-python-admin at twistedmatrix.com]On Behalf Of Glyph
> Lefkowitz
> Sent: Thursday, February 12, 2004 10:21 PM
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] What is the "Twisted" way to kill stuck
> childprocess
> 
> 
> On Thu, 2004-02-12 at 11:50, Jp Calderone wrote:
> 
> >   I'm not certain of the status of spawnProcess on Windows. 
>  If it really
> > doesn't work, I suppose popen2 is about all you can do.
> > 
> >   Since you're mainly developing on Windows, I doubt I can 
> offer much more
> > assistance, having never written any multiprocess Windows apps.
> > 
> >   If popen2 lets you get PIDs on Windows, and os.kill() 
> works with those
> > PIDs on Windows, I think you should still be able to 
> timeout processes
> > fairly easily.  If they don't, maybe someone with more 
> Windows experience
> > can chime in.
> 
> If you want to use spawnProcess on windows, you must use the win32
> reactor.  This has some limiting effects (but then, so does windows
> itself).  Don't use popen2 with Twisted - the SIGCHLD handler that
> twistd installs will cause conflicts and crashes.
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 



From Harald.Nyman at astrazeneca.com  Fri Feb 13 01:44:49 2004
From: Harald.Nyman at astrazeneca.com (Harald.Nyman at astrazeneca.com)
Date: Fri, 13 Feb 2004 09:44:49 +0100
Subject: [Twisted-Python] EXIT CGI kludge Sanity Check
Message-ID: <9F028CC77827D611ACEE0002A5F12F0703ECC32C@semldsntmsx208.seml.astrazeneca.net>

We inherited this Apache/CGI app, with ~15 HTML pages, generated by CGI
Python scripts importing a ton of modules each time.
Not exactly lightning fast, plus the code's a total mix of Python with HTML
fragments :(

Awaiting a complete revamp of the app, we replaced Apache/CGI with a
threaded Twisted TCP server, sitting memory-resident with "everything"
imported, and sending back HTML as requested by javascript/tiny applet in
the browser. Form <INPUT>s and cookies are passed from javascript to Python
as text-represented dictionaries.
The modifications to the Python code were minor; the performance boost is
... dramatic (the users are cheering).

Comments? Anyone done something similar? What do we tell the purists?

Thanks,
Harald

_____________________________________________
Harald Nyman MSc, AstraZeneca Mölndal, Sweden





From stenis at stenhard.net  Fri Feb 13 13:57:52 2004
From: stenis at stenhard.net (=?iso-8859-1?Q?Martin_Stenh=E5rd?=)
Date: Fri, 13 Feb 2004 21:57:52 +0100
Subject: [Twisted-Python] pb server how to get client IP address
Message-ID: <E1ArkO0-00008j-00@pyramid.twistedmatrix.com>

Hi

 

I am making a game server using twisted and using the pb both on the server
and client. I have a question on how to get ip address of the clients that
connects to the server. I want to log the client ip address on the server.
Have anyone any idea on how to do this I cant find any information on this
in the api documents. 

 

Thanks

/Martin

http://stenhard.net <http://stenhard.net/> 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040213/994fc075/attachment.html>

From bob at redivi.com  Fri Feb 13 14:26:22 2004
From: bob at redivi.com (Bob Ippolito)
Date: Fri, 13 Feb 2004 16:26:22 -0500
Subject: [Twisted-Python] pb server how to get client IP address
In-Reply-To: <E1ArkO0-00008j-00@pyramid.twistedmatrix.com>
References: <E1ArkO0-00008j-00@pyramid.twistedmatrix.com>
Message-ID: <453CEFD6-5E6B-11D8-A4CE-000A95686CD8@redivi.com>

On Feb 13, 2004, at 3:57 PM, Martin Stenhård wrote:

> I am making a game server using twisted and using the pb both on the 
> server and client. I have a question on how to get ip address of the 
> clients that connects to the server. I want to log the client ip 
> address on the server. Have anyone any idea on how to do this I can’t 
> find any information on this in the api documents.

protocol.transport.getPeer()

For more information, pydoc twisted.internet.interfaces.ITCPTransport

-bob




From warner at lothar.com  Fri Feb 13 14:45:34 2004
From: warner at lothar.com (Brian Warner)
Date: Fri, 13 Feb 2004 13:45:34 -0800 (PST)
Subject: [Twisted-Python] pb server how to get client IP address
Message-ID: <20040213.134534.41652940.warner@lothar.com>

Martin Stenhård <stenis at stenhard.net> writes:
>
> I have a question on how to get ip address of the clients that connects to
> the server.

From the Protocol object, the .transport offers a pair of methods called
getHost() and getPeer(). So something like this should work:

==== BEGIN
from twisted.internet import reactor, protocol

class MyProtocol(protocol.Protocol):
    def connectionMade(self):
        print "connection from", self.transport.getPeer()

f = protocol.ServerFactory()
f.protocol = MyProtocol
reactor.listenTCP(9111, f)
reactor.run()
==== END

When I run this on my system, and connect with 'nc localhost 9111', I get:
  % /tmp/p.py 
  connection from ('INET', '127.0.0.1', 38002)

The value it returns depends upon the kind of transport, but TCP connections
will give you a tuple of ('INET', hostname, port), where 'hostname' is a
dotted-quad IP address.

I'll add this to the FAQ.

cheers,
 -Brian



From stenis at stenhard.net  Fri Feb 13 15:10:14 2004
From: stenis at stenhard.net (=?iso-8859-1?Q?Martin_Stenh=E5rd?=)
Date: Fri, 13 Feb 2004 23:10:14 +0100
Subject: [Twisted-Python] pb server how to get client IP address
In-Reply-To: <20040213.134534.41652940.warner@lothar.com>
Message-ID: <E1ArlW3-0001S9-00@pyramid.twistedmatrix.com>

Hi again

>From the Protocol object, the .transport offers a pair of methods called
>getHost() and getPeer().


Yes this works find in my server for my admin interface (simple telenet
bases) that use protocol.ServerFactory() and then use LineReceiver. 

But how do I use getPeer() in a Perspective Broker server for example
http://www.twistedmatrix.com/documents/examples/pbbenchserver.py

Excuse me questions but I new to Twisted.

/Martin
http://stenhard.net

-----Original Message-----
From: twisted-python-admin at twistedmatrix.com
[mailto:twisted-python-admin at twistedmatrix.com] On Behalf Of Brian Warner
Sent: den 13 februari 2004 22:46
To: twisted-python at twistedmatrix.com
Cc: stenis at stenhard.net
Subject: Re: [Twisted-Python] pb server how to get client IP address

Martin Stenhård <stenis at stenhard.net> writes:
>
> I have a question on how to get ip address of the clients that connects to
> the server.

>From the Protocol object, the .transport offers a pair of methods called
getHost() and getPeer(). So something like this should work:

==== BEGIN
from twisted.internet import reactor, protocol

class MyProtocol(protocol.Protocol):
    def connectionMade(self):
        print "connection from", self.transport.getPeer()

f = protocol.ServerFactory()
f.protocol = MyProtocol
reactor.listenTCP(9111, f)
reactor.run()
==== END

When I run this on my system, and connect with 'nc localhost 9111', I get:
  % /tmp/p.py 
  connection from ('INET', '127.0.0.1', 38002)

The value it returns depends upon the kind of transport, but TCP connections
will give you a tuple of ('INET', hostname, port), where 'hostname' is a
dotted-quad IP address.

I'll add this to the FAQ.

cheers,
 -Brian

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python





From warner at lothar.com  Fri Feb 13 17:36:28 2004
From: warner at lothar.com (Brian Warner)
Date: Fri, 13 Feb 2004 16:36:28 -0800 (PST)
Subject: [Twisted-Python] pb server how to get client IP address
Message-ID: <20040213.163628.59491436.warner@lothar.com>

Martin Stenhård <stenis at stenhard.net> writes:
>
> Yes this works find in my server for my admin interface (simple telenet
> bases) that use protocol.ServerFactory() and then use LineReceiver. 
>
> But how do I use getPeer() in a Perspective Broker server for example
> http://www.twistedmatrix.com/documents/examples/pbbenchserver.py

Ah, yes, that is trickier. You need to get access to the Broker object (which
is a Protocol subclass), and called methods are not generally given access to
that. The Perspective/ViewPoint -style stuff gives invoked methods access to
some initial Perspective object, but even that doesn't know who the Broker
is. The method which invokes your perspective_* method knows, but it isn't
telling.

I poked around a bit and haven't found any way to get at it. If the client
has given you access to one if its own objects (perhaps as the 'mind'
reference in the realm.requestAvatar() call), then you can use it to get the
Broker:

 mind.broker.transport.getPeer()

Other than that, I don't see how to do it. The details of the connection are
a little *too* abstracted out. Maybe someone else has an idea?

sorry,
 -Brian

PS: and no, inspect.stack()[1][0].f_locals['broker'] doesn't count..



From michaelschneider at fuse.net  Fri Feb 13 22:02:09 2004
From: michaelschneider at fuse.net (Michael Schneider)
Date: Sat, 14 Feb 2004 00:02:09 -0500
Subject: [Twisted-Python] Windows Programming Info
In-Reply-To: <20040211215102.15756.8292.Mailman@twistedmatrix.com>
Message-ID: <DDEBLIGOHANFDMNECHGECECLCAAA.michaelschneider@fuse.net>

Thanks to all for the help with win32eventreactor and spawnprocess.


I came across a great windows package called wmi (for microsoft's
Windows Managment Interface).

It gives you very low level access to your windows system. It uses
win32.

Here is the URL:

http://tgolden.sc.sabren.com/python/wmi.html

Here is some sample code to run


Thanks for the help on this,
I will post my final code for the compute node class

----------------------------------------------------------
import wmi
c = wmi.WMI ()

diskList = [x for x in c.Win32_LogicalDisk (DriveType=3) ]
procList = [proc for proc in  c.Win32_Process () ]

for x in range(10):
    for disk in diskList:
        print disk

    for process in procList:
        print process



----------------------------------------------------------


Note: to kill a job, you can call terminate on a process object

result = process.Terminate ()

------------------------------------------

disk output:
instance of Win32_LogicalDisk
{
        Caption = "G:";
        Compressed = FALSE;
        CreationClassName = "Win32_LogicalDisk";
        Description = "Local Fixed Disk";
        DeviceID = "G:";
        DriveType = 3;
        FileSystem = "FAT32";
        FreeSpace = "9506979840";
        MaximumComponentLength = 255;
        MediaType = 12;
        Name = "G:";
        Size = "12572344320";
        SupportsDiskQuotas = FALSE;
        SupportsFileBasedCompression = FALSE;
        SystemCreationClassName = "Win32_ComputerSystem";
        SystemName = "BDSWXP1";
        VolumeDirty = FALSE;
        VolumeName = "LOCAL DISK";
        VolumeSerialNumber = "ED293D74";
};
-------------------------------------------------
process output

instance of Win32_Process
{
        Caption = "System Idle Process";
        CreationClassName = "Win32_Process";
        CSCreationClassName = "Win32_ComputerSystem";
        CSName = "BDSWXP1";
        Description = "System Idle Process";
        Handle = "0";
        HandleCount = 0;
        KernelModeTime = "7163013906250";
        Name = "System Idle Process";
        OSCreationClassName = "Win32_OperatingSystem";
        OSName = "Microsoft Windows XP
Professional|C:\\WINDOWS|\\Device\\Harddi
sk0\\Partition1";
        OtherOperationCount = "0";
        OtherTransferCount = "0";
        PageFaults = 1;
        PageFileUsage = 0;
        ParentProcessId = 0;
        PeakPageFileUsage = 0;
        PeakVirtualSize = "0";
        PeakWorkingSetSize = 20480;
        Priority = 0;
        PrivatePageCount = "0";
        ProcessId = 0;
        QuotaNonPagedPoolUsage = 0;
        QuotaPagedPoolUsage = 0;
        QuotaPeakNonPagedPoolUsage = 0;
        QuotaPeakPagedPoolUsage = 0;
        ReadOperationCount = "0";
        ReadTransferCount = "0";
        SessionId = 0;
        ThreadCount = 1;
        UserModeTime = "0";
        VirtualSize = "0";
        WindowsVersion = "5.1.2600";
        WorkingSetSize = "20480";
        WriteOperationCount = "0";
        WriteTransferCount = "0";
};





From golux at comcast.net  Fri Feb 13 23:50:28 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Sat, 14 Feb 2004 01:50:28 -0500
Subject: [Twisted-Python] basic auth example with db backend
Message-ID: <402DC534.7050900@comcast.net>

This is a somewhat less trivial (and more robust)
example than the "cred" example I posted earlier.

BasicAuthResource is lifted from moshez's example
in bug 393 with some typos corrected and a notification
to the user if something gets majorly screwed up, so the
auth form doesn't continue to pop up in that case.

UserDbCredChecker borrows radix's approach from a
db auth he wrote for a spike we did a while back.

Again, I'd appreciate any suggestions/comments from
twisted gurus -- especially if you see any security
problems, etc.!

Cheers,
Steve
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: basicauthwithdb.py.txt
URL: </pipermail/twisted-python/attachments/20040214/27f95348/attachment-0002.txt>

From nico at rakar.com  Sat Feb 14 03:27:28 2004
From: nico at rakar.com (Nicols Echniz)
Date: Sat, 14 Feb 2004 07:27:28 -0300
Subject: [Twisted-Python] web messenger with ICQ and MSN support
Message-ID: <20040214072728.M42139@rakar.com>

Hi everybody,

This is my first message to the list so I'll briefly introduce myself.
I'm Nicolás Echániz, from Buenos Aires, Argentina.
I've been programing python for 4 or 5 years now and one of my projects is
this instant messenger (www.EcMess.com), which is a web based messenger.
It's based on Sam Rushing's Medusa framework, runs on a Linux server and uses
MySQL for data storage. It works really nice.

The fact is that I'd like to add ICQ and MSN support (it's a much requested
feature) and I've been thinking that the best way might be to rewrite my
server using Twisted as a replacement framework for Medusa.
Now, I've been looking at the notes on 1.1.1 release and found that MSNP 8 is
the supported protocol at this time, but as far as I know, clients using MSNP
8 can't communicate with the MSN network since protocol 9 was released.

So, my question is: Are there any plans to support MSNP 9 in the near future?
I know that Gaim has updated it's protocol support to v.9. Do you mantain any
relation with their development team? Or do you at twisted-matrix hack the
protocol on your own without reusing other project's experience?

If I may be of any help in this matter, please let me know. I'm not a C
programmer, but then I don't know if your MSNP implementation is written in C
and wrapped or written in pure Python.
If the latter is true, then I might be able to help.

I thank you all in advance,

Nicolás Echániz
www.EcMess.com



From teratorn at world-net.net  Sat Feb 14 03:44:01 2004
From: teratorn at world-net.net (Eric Mangold)
Date: Sat, 14 Feb 2004 03:44:01 -0700
Subject: [Twisted-Python] Re: web messenger with ICQ and MSN support
In-Reply-To: <20040214072728.M42139@rakar.com>
References: <20040214072728.M42139@rakar.com>
Message-ID: <opr3cv3nc3i4eeqj@mail.oaktech.net>

On Sat, 14 Feb 2004 07:27:28 -0300, Nicolás Echániz <nico at rakar.com> wrote:

> Hi everybody,
>
> This is my first message to the list so I'll briefly introduce myself.
> I'm Nicolás Echániz, from Buenos Aires, Argentina.

Hi!

> I've been programing python for 4 or 5 years now and one of my projects 
> is
> this instant messenger (www.EcMess.com), which is a web based messenger.
> It's based on Sam Rushing's Medusa framework, runs on a Linux server and 
> uses
> MySQL for data storage. It works really nice.
>
> The fact is that I'd like to add ICQ and MSN support (it's a much 
> requested
> feature) and I've been thinking that the best way might be to rewrite my
> server using Twisted as a replacement framework for Medusa.
> Now, I've been looking at the notes on 1.1.1 release and found that MSNP 
> 8 is
> the supported protocol at this time, but as far as I know, clients using 
> MSNP
> 8 can't communicate with the MSN network since protocol 9 was released.
>
> So, my question is: Are there any plans to support MSNP 9 in the near 
> future?
> I know that Gaim has updated it's protocol support to v.9. Do you 
> mantain any
> relation with their development team? Or do you at twisted-matrix hack 
> the
> protocol on your own without reusing other project's experience?
>
> If I may be of any help in this matter, please let me know. I'm not a C
> programmer, but then I don't know if your MSNP implementation is written 
> in C
> and wrapped or written in pure Python.
> If the latter is true, then I might be able to help.

You can take a look at the implementation in the file 
twisted/protocols/msn.py

If you want to update it to support v9 I'm sure everyone would appreciate 
that :)

I can't answer your other questions, but there are folks here that can.

-Eric




From sam at twistedmatrix.com  Sat Feb 14 18:56:59 2004
From: sam at twistedmatrix.com (Sam Jordan)
Date: Sun, 15 Feb 2004 11:56:59 +1000
Subject: [Twisted-Python] web messenger with ICQ and MSN support
In-Reply-To: <20040214072728.M42139@rakar.com>
References: <20040214072728.M42139@rakar.com>
Message-ID: <20040215015659.GA16210@psychlaw.com.au>

On Sat, Feb 14, 2004 at 07:27:28AM -0300, Nicol?s Ech?niz wrote:
> Now, I've been looking at the notes on 1.1.1 release and found that MSNP 8 is
> the supported protocol at this time, but as far as I know, clients using MSNP
> 8 can't communicate with the MSN network since protocol 9 was released.

It was <= MSNP7 that were the phased out protocol versions. You can access the MSN
network using MSNP8 and onwards (doc/examples/msn_example.py should let you connect).

This isn't to say that support for MSNP9 wouldn't be appreciated :-). I did some research
into it a while back but it was still fairly premature at the time and not much was known.
Considering it mainly consists of eye-candy features (i.e. background images and buddy icons)
I didn't put too much effort into attempting to figure it out, but it would be great if you
wanted to do so, there is probably a bit more information available on it at this stage as
well.

If you're interested, a useful website that attempts to document various parts of the
protocol is: http://www.hypothetic.org/docs/msn/index.php.

Of course, there is now MSNC1 and MSNP10, so it would be worth researching them if you're
wanting to make changes.

Cheers,

Sam Jordan



From stenis at stenhard.net  Sat Feb 14 15:05:10 2004
From: stenis at stenhard.net (=?iso-8859-1?Q?Martin_Stenh=E5rd?=)
Date: Sat, 14 Feb 2004 23:05:10 +0100
Subject: [Twisted-Python] pb server how to get client IP address
In-Reply-To: <20040213.163628.59491436.warner@lothar.com>
Message-ID: <E1As7ue-0000ru-00@pyramid.twistedmatrix.com>


> -----Original Message-----
> From: Brian Warner [mailto:warner at lothar.com]
> I poked around a bit and haven't found any way to get at it. If the client
> has given you access to one if its own objects (perhaps as the 'mind'
> reference in the realm.requestAvatar() call), then you can use it to get
> the
> Broker:
> 
>  mind.broker.transport.getPeer()
> 

Thanks Brian

mind.broker.transport.getPeer() did job I use mind and I get the client IP
successfully now.

class MyPerspective(pb.Avatar):
    connections = 0
    def __init__(self, name):
        self.name = name    
        self.position = [0.0,0.0,0.0]
        self.rotation = [0.0,0.0,0.0]  
        self.rotation2 = [0.0,0.0,0.0]  
        self.velocity = [0.0,0.0,0.0] 
        self.state = 0 
 
    def attached(self, mind):
        ip = mind.broker.transport.getPeer()
	  print ip


Thanks
/Martin
http://stenhard.net





From maoy at cis.upenn.edu  Sat Feb 14 22:12:29 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Sun, 15 Feb 2004 00:12:29 -0500 (EST)
Subject: [Twisted-Python] stopConsuming in abstract.py
In-Reply-To: <E1As7ue-0000ru-00@pyramid.twistedmatrix.com>
Message-ID: <Pine.LNX.4.44.0402150009270.24963-100000@klondike.cis.upenn.edu>

Hi, what's the job of stopConsuming? I ran a grep in twisted dir, and 
didn't find anybody calls it. Besides, since registerProducer only happens 
at the consumer side, so I guess in theory the producers have no idea who 
are their consumers, right? 

Thank in advance for the clarification.

-- 
Yun






From andy at thecablelounge.com  Sun Feb 15 11:18:27 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 16 Feb 2004 04:18:27 +1000
Subject: [Twisted-Python] twisted.names; authority query
Message-ID: <402FB7F3.3090403@thecablelounge.com>

Hi there,

I've extended twisted.names to support tinydns data files.  

names isn't responding with authoritive answers the way I was expecting it to though.  names responds that it is authoritive for my name server, but not for anything else.  This is the tinydns file I'm using:

-----------------------------------
.cablelounge.com::ns1.cablelounge.com:259200
=cablelounge.com:69.10.144.170:86400
+www.cablelounge.com:69.10.144.170:86400
+miles.cablelounge.com:69.10.144.170:86400
+twisted.cablelounge.com:203.113.212.32:900
+ns1.cablelounge.com:69.10.144.170:86400
@cablelounge.com:69.10.144.170:mail.cablelounge.com:0:86400
------------------------------------

names says that it is authoritive for ns1.cablelounge.com, but nothing else.  tinydns responds as authoritive for all of the above names:

#> dig @cablelounge.com cablelounge.com

I ran a standard pyzone file through names and got the same result .. so I'm not sure where I'm going wrong .. .

Here's what I did with the pyzone file:

zones:
-----------------------
zone = [
    SOA(
        "fred.com",
        mname   = "ns1.fred.com",
        rname   = "hostmaster.fred.com",
        serial  = 2004021501,
        refresh = "1H",
        retry   = "1H",
        expire  = "1H",
        minimum = "1H"
    ),

    A("fred.com", "192.168.10.10"),
    NS("ns1.fred.com", "fred.com"),
    A("ns1.fred.com", "192.168.10.10"),
]
------------------------

#> mktap dns --pyzone=zones --port 5053
#> twistd -f dns
#> dig -p 5053 @cablelounge.com fred.com

; <<>> DiG 9.2.1 <<>> -p 5053 @cablelounge.com fred.com
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 48786
;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;fred.com.                      IN      A

;; ANSWER SECTION:
fred.com.               3600    IN      A       192.168.10.10

;; Query time: 2 msec
;; SERVER: 69.10.144.170#5053(cablelounge.com)
;; WHEN: Sun Feb 15 10:01:29 2004
;; MSG SIZE  rcvd: 42

#> dig -p 5053 @cablelounge.com ns1.fred.com

; <<>> DiG 9.2.1 <<>> -p 5053 @cablelounge.com ns1.fred.com
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 63056
;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;ns1.fred.com.                  IN      A

;; ANSWER SECTION:
ns1.fred.com.           3600    IN      A       192.168.10.10

;; AUTHORITY SECTION:
ns1.fred.com.           3600    IN      NS      fred.com.

;; ADDITIONAL SECTION:
fred.com.               3600    IN      A       192.168.10.10

;; Query time: 2 msec
;; SERVER: 69.10.144.170#5053(cablelounge.com)
;; WHEN: Sun Feb 15 10:02:24 2004
;; MSG SIZE  rcvd: 76

twisted.names is showing as authoritive for ns1.fred.com, but not fred.com.

Has anyone had a similiar experience with twisted.names?  What am I overlooking?

regards,
Andy.



From mary-twisted at puzzling.org  Sun Feb 15 15:55:19 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Mon, 16 Feb 2004 09:55:19 +1100
Subject: [Twisted-Python] Re: [Twisted-web] twisted.internet.error.CannotListenError
In-Reply-To: <20040215224728.26716.qmail@web13705.mail.yahoo.com>
References: <20040215224728.26716.qmail@web13705.mail.yahoo.com>
Message-ID: <20040215225519.GA19840@home.puzzling.org>

This looks like a question for twisted-python at twistedmatrix.com rather
than twisted-web at twistedmatrix.com

On Sun, Feb 15, 2004, Peter Stradinger wrote:
> Hi,
> 
> I'm fairly new to Twisted and trying to get a twisted reactor to work with wxPython.  I'm trying
> the perspective broker examples, and when I try to do:
>     def OnFileitems0Menu(self, event):
>         self.Close(true)
>         reactor.stop()
> 
> It shuts down the program fine, but then when I try to run it again I get:
> 
> twisted.internet.error.CannotListenError: Couldn't listen on any:8800: (10048, 'Address already in
> use').
> 
> As an error.  I can manually stop the process and then it will work again, but I don't know how to
> release the port when I shut down the program.
> 
> Am I missing something obvious?  A search of the archives hasn't shown me any way out.
> 
> Peter



From emlprime at yahoo.com  Sun Feb 15 16:07:21 2004
From: emlprime at yahoo.com (Peter Stradinger)
Date: Sun, 15 Feb 2004 15:07:21 -0800 (PST)
Subject: [Twisted-Python] twisted.internet.error.CannotListenError
Message-ID: <20040215230721.5153.qmail@web13706.mail.yahoo.com>

Hi,

I'm fairly new to Twisted and trying to get a twisted reactor to work with wxPython.  I'm trying
the perspective broker examples, and when I try to do:
    def OnFileitems0Menu(self, event):
        self.Close(true)
        reactor.stop()

It shuts down the program fine, but then when I try to run it again I get:

twisted.internet.error.CannotListenError: Couldn't listen on any:8800: (10048, 'Address already in
use').

As an error.  I can manually stop the process and then it will work again, but I don't know how to
release the port when I shut down the program.

Am I missing something obvious?  A search of the archives hasn't shown me any way out.

Peter


__________________________________
Do you Yahoo!?
Yahoo! Finance: Get your refund fast by filing online.
http://taxes.yahoo.com/filing.html



From fuka at fuxoft.cz  Sun Feb 15 16:28:04 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Mon, 16 Feb 2004 00:28:04 +0100
Subject: [Twisted-Python] Where are stored the filenames of the files uploaded using www Form?
Message-ID: <40300084.2050201@fuxoft.cz>

I want to use Twisted on my server so that I can upload generic files 
using WWW interface. (I use only the basic Twisted Web bones, no Woven 
etc.) When I upload the files, the session.args dictionary contains the 
names of form elements and the contents of the uploaded files. But how 
can I find out the filenames of the uploaded files, so that 
"picture7.jpg" could be automatically stored as "picture7.jpg"?

Thanks

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855




From andy at thecablelounge.com  Mon Feb 16 00:10:26 2004
From: andy at thecablelounge.com (Andy Gayton)
Date: Mon, 16 Feb 2004 17:10:26 +1000
Subject: [Twisted-Python] twisted.names; tinydns file format patch
Message-ID: <40306CE2.2000004@thecablelounge.com>

For anyone else who, like me, can't read bind formatted files :)

It seems to work well enough even if twisted.names and tinydns behave slightly differently.

Supports all common data lines from: http://cr.yp.to/djbdns/tinydns-data.html, but doesn't support wildcards, timestamps or client location filtering plus one data file can only contain one SOA.

Generated against Twisted 1.1.2alpha2 using diff -urN

cheers,
Andy.
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: twisted.names.tinydnssupport0.1.diff
URL: </pipermail/twisted-python/attachments/20040216/d3001e65/attachment.ksh>

From daleedom at hightowergroup.com  Mon Feb 16 08:03:37 2004
From: daleedom at hightowergroup.com (David A. Leedom)
Date: Mon, 16 Feb 2004 10:03:37 -0500
Subject: [Twisted-Python] Backup Agent
Message-ID: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>

OK Guys I Need your help.

I own a small computer consulting firm and am struggling with the basic 
sales and marketing issues.  However, I think I have finally stumbled onto 
a great "no brainer" idea:

         A Remote Backup Service for Small businesses.

Yes I know there are a bunch out their, but I am thinking of the Hundreds 
of Businesses around my general geographic area who don't know how to find 
them and who don't backup their data.  I would charge a monthly fee for a 
given amount of space used ( no more than 500 Meg) and provide a software 
that would backup and restore their data.

My dilemma is that my margins would be to small to make it affordable for 
me to resale someone else's software.  So....I would like to roll my 
own.  Python makes a lot of sense for many reasons that I don't need to get 
into here.

My struggle is that although I have been programming since the mid-70s, I 
am new to Python and feel like a man groping around in the dark.  Also 
being new to Twisted it is like the room is full of chairs as well.  I did 
get some sample code to work over the weekend, but I got a serious brain 
cramp trying to figure it all out.

The basic architecture that I am thinking of is client/server.  There would 
be three basic applications running to make things work.  First, would be 
an Agent program that does most of the work.  The Agent would run as a 
service on each computer being backed up.  Second would be a GUI program 
running locally to control the agents.  Finally there would be a "Web 
Service" that received backup sets from each agent or a designated master 
agent. The Web Service would handle authentication and other house keeping 
things.

Finally the Question!!!!
There are many other details that I have in mind as well (using patches to 
reduce size, compression, encryption...), but right now I am working on 
issues related to the communication between the GUI and Agents.  Assuming 
that I have one or more number of agents running on a network I want to do 
a number of things.  1)  Have the GUI request that the agents identify 
themselves so I don't have to tell the GUI where they are.  2) Transmit a 
catalog list of the file system to the GUI so I can build a TreeView and 
pick which files to backup on each computer.  3)  Finally I may want to 
identify a "Master" agent that collects all the backups on the network and 
transmits them as one session to the Web Service. This would allow for 
local "On Site" backups for fast restores due to normal computer crashes 
and failures.

1.      What would you guys suggest I do to I get the GUI to ask all the 
agents to identify themselves?
2.      What would be the best approach using twisted to transmit a file 
system catalog across the local wire.  I was playing with some remote 
procedure calls over the weekend that seemed to work.  I am thinking I 
could create a class that would gather the local file system and send it 
over the wire as one lump.
3.      If I am going to transmit a backup file (<500meg) over the wire to 
another local computer what is the best Twisted approach to take?  Due to 
WinXP security issues and the desire the run in a cross platform 
environment I don't want to rely on normal file shares.

There are a hundred other questions running though my mind right now, but 
this will due for now,


Thanks for any help you can give,

David A. Leedom




The Hightower Group, Inc.
Custom Software Solutions Designed To Fit Your Business Like A Glove.
165 West Airport Road/Lititz, PA 17543
V:717-560-4002, 877-560-4002 x: 114
F:717-560-2825
www.hightowergroup.com  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040216/1b6e39c3/attachment.html>

From michal at pasternak.w.lub.pl  Mon Feb 16 10:23:03 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Mon, 16 Feb 2004 18:23:03 +0100
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
References: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
Message-ID: <20040216172303.GA54182@pasternak.w.lub.pl>

David A. Leedom [Mon, Feb 16, 2004 at 10:03:37AM -0500]:
> 1.      What would you guys suggest I do to I get the GUI to ask all the 
> agents to identify themselves?

Well, that's a good question. In some app I did, I used machine's IP address
+ some operating system info it run (sys.platform, os.uname) to build a kind
of machine identifier. You could as well generate some UID, then save it,
then send it together with machine's IP to identify it on server, by hand.

Using OS-specific procedures could help you with this.

> 2.      What would be the best approach using twisted to transmit a file 
> system catalog across the local wire.  I was playing with some remote 
> procedure calls over the weekend that seemed to work.  I am thinking I 
> could create a class that would gather the local file system and send it 
> over the wire as one lump.

Remote procedures have limit of 640 KB for their parameters (because "640 KB
should be enough to anyone"). You should use Pager and Collector.

> 3.      If I am going to transmit a backup file (<500meg) over the wire to 
> another local computer what is the best Twisted approach to take?

See above. Also, please remember, that memory issues matter. If you're
paging the data (send small chunks), you should save them on the backup
server, as they are received. If you are transfering a big file, keeping all
the data received in some buffer is a bad idea. 



From mailinglists at shechen.at  Mon Feb 16 14:00:47 2004
From: mailinglists at shechen.at (stephan)
Date: Mon, 16 Feb 2004 13:00:47 -0800
Subject: [Twisted-Python] p2p, gnutella
Message-ID: <opr3hdzlabwzeeq5@mail.geekmail.cc>


I am looking forward to add p2p functionality to my app. Does anybody know 
what the current status of twisted's gnutella implementation is?

There seems to have been a semi-finished implemention in 1.0.2alpha4 which 
I can't find in 1.1.1 anymore.

I might also be willing to implement missing parts but I would need to get 
a short briefing on how things are.

thanks,

_stephan



From pje at telecommunity.com  Mon Feb 16 16:13:13 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Mon, 16 Feb 2004 18:13:13 -0500
Subject: [Twisted-Python] PEAK 0.5a3 released
Message-ID: <5.1.0.14.0.20040216171628.026173e0@mail.telecommunity.com>

After several months of feature creep, the third alpha release of PEAK 0.5 
is now available for download at:

    http://peak.telecommunity.com/dist/

Some highlights of the changes since 0.5a2 include:

* A simplified and consolidated binding API: there are now only four kinds 
of bindings (Make, Obtain, Require, and Delegate) that provide a wider 
variety of functionality than the old API.  You can also now create your 
own IRecipe or IComponentKey implementations for use with Make and Obtain.

* The 'n2' (namespace navigator) tool provides a handy, extensible shell 
(with completion and history) for exploring PEAK naming systems and SQL 
connections.

* A greatly enhanced configuration file parser, with lots of new 
convenience features such as [Import on Demand], [Named Services], and 
[Component Factories] sections, based on its new extensible parsing 
framework.  You can define new section types of your own, even from inside 
an .ini file.

* New configuration key features, such as multi-keys (similar to some of 
Zope X3's "adaptergeddon" features), the ability to iterate over defined 
keys in a hierarchy (useful for finding/registering various kinds of 
"plugins"), new convenience features for defining wildcard property rules,

* A new 'peak.events' framework that supports event sources, listeners, 
subscriptions, generator-based pseudothreads ("tasks"), scheduling, and I/O 
events.  Using 'peak.events', you can write event-driven code in a more 
natural, sequential, "untwisted" style, but without giving up access to 
Twisted's many great features.  'peak.events' can use PEAK's built-in event 
loop, or adapt a Twisted reactor for use as an event loop.  You can also 
use Twisted's "Deferred" objects as event sources, which means you can use 
them in your Tasks (pseudothreads).

* A new 'peak.ddt' "document-driven testing" framework, similar in form and 
function to the FIT ( http://fit.c2.com/ ) framework, but in Python and 
well-integrated with the rest of PEAK.  'peak.ddt' lets you write test data 
as tables in HTML documents (created with Word, Open Office, Mozilla, or 
virtually any other tool), and then view the results in your 
browser.  Correct results are highlighted in green, incorrect answers are 
highlighted in red, and errors are highlighted in yellow, with a small-font 
traceback added to the table cell.  It's a great way to do data-driven 
acceptance testing, or to manage a project's progress using example data as 
part of a requirements document.

* Many, many more features, both large and small, like a pre-forking 
multiprocess supervisor for FastCGI and other forking servers.  Quick 
access to documentation via the 'peak help' command, which uses pydoc to 
display reference documentation.  Early versions of the 'peak.security' 
(access control), 'peak.web' (Zope X3-based web publishing), and 
'peak.query' (declarative relational and conceptual queries w/SQL 
generation) packages.  The 'whenImported()' function that lets you call a 
hook when a named module is first used.  "Mock" DBAPI and socket 
implementations for testing.  Hooks for "thunking" database-specific SQL 
and functions.  And many, many more examples of unbelievably blatant 
feature creep!

There is also now a nice "Hello World" introduction to PEAK available at:

http://peak.telecommunity.com/DevCenter/IntroToPeak

that presents a guided tour of some of PEAK's "vertical" frameworks, like 
command-line application support, database access, and so on.

For more information about PEAK, and access to community resources 
including documentation, the Wiki, mailing list archives, IRC channel logs, 
CVS access, and more, please visit:

http://peak.telecommunity.com/




From ralf at brainbot.com  Mon Feb 16 18:05:41 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Tue, 17 Feb 2004 02:05:41 +0100
Subject: [Twisted-Python] [PATCH] nasty bug in twisted.names.client.createResolver
Message-ID: <86oeryv7kq.fsf@stronzo.brainbot.com>

The parameter variable 'hosts' gets overwritten by the import statement 
in createResolver. hosts.Resolver constructor is called with a module 
instead of a filename.

- Ralf

===================================================================
RCS file: /cvs/Twisted/twisted/names/client.py,v
retrieving revision 1.45
diff -u -r1.45 client.py
--- twisted/names/client.py     4 Feb 2004 19:55:34 -0000       1.45
+++ twisted/names/client.py     17 Feb 2004 01:01:53 -0000
@@ -303,20 +303,20 @@
         return p
 
 
-def createResolver(servers = None, resolvconf = None, hosts = None):
+def createResolver(servers = None, resolvconf = None, hostsfile = None):
     import resolve, cache, hosts, root
     if platform.getType() == 'posix':
         if resolvconf is None:
             resolvconf = '/etc/resolv.conf'
-        if hosts is None:
-            hosts = '/etc/hosts'
+        if hostsfile is None:
+            hostsfile = '/etc/hosts'
         theResolver = Resolver(resolvconf, servers)
-        hostResolver = hosts.Resolver(hosts)
+        hostResolver = hosts.Resolver(hostsfile)
     else:
-        if hosts is None:
-            hosts = r'c:\windows\hosts'
+        if hostsfile is None:
+            hostsfile = r'c:\windows\hosts'
         bootstrap = ThreadedResolver()
-        hostResolver = hosts.Resolver(hosts)
+        hostResolver = hosts.Resolver(hostsfile)
         theResolver = root.bootstrap(bootstrap)
 
     L = [hostResolver, cache.CacheResolver(), theResolver]

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From itamar at itamarst.org  Mon Feb 16 18:33:55 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 16 Feb 2004 20:33:55 -0500
Subject: [Twisted-Python] [PATCH] nasty bug in
	twisted.names.client.createResolver
In-Reply-To: <86oeryv7kq.fsf@stronzo.brainbot.com>
References: <86oeryv7kq.fsf@stronzo.brainbot.com>
Message-ID: <1076981635.1168.36.camel@sheriffpony>

On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
> The parameter variable 'hosts' gets overwritten by the import statement 
> in createResolver. hosts.Resolver constructor is called with a module 
> instead of a filename.

Please add patches and bugs to twistedmatrix.com/bugs/




From itamar at itamarst.org  Mon Feb 16 18:40:06 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Mon, 16 Feb 2004 20:40:06 -0500
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
	queries with Twisted...
In-Reply-To: <40276641.30300@rogers.com>
References: <40276641.30300@rogers.com>
Message-ID: <1076982005.1170.38.camel@sheriffpony>

On Mon, 2004-02-09 at 05:51, Mike C. Fletcher wrote:

> Writing a simple asynchronous loop myself (poll on a simple socket, send 
> message from queue when writable, read one into other queue when 
> readable) allowed for doing a few thousand queries simultaneously), with 
> only a few dozen dropped messages.  However, with the Twisted equivalent 
> (UDPTransport with my simple protocol object), I was seeing huge drop 
> rates, so, gathering that Twisted isn't queueing up the UDP requests,

Possibly we need some generic UDP queuing, rather than current system.
Patches are welcome.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From ralf at brainbot.com  Mon Feb 16 18:47:19 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Tue, 17 Feb 2004 02:47:19 +0100
Subject: [Twisted-Python] [PATCH] twisted.names.hosts not working correct with getHostByName
Message-ID: <86k72mv5nc.fsf@stronzo.brainbot.com>

Even with my prior patch I'm not able to use twisted.names.client.getHostByName.
Seems like twisted.names.hosts.Resolver calls itself with bad parameters
and even doesn't use the ip address it extracted from /etc/hosts. Also the return 
value could not be handled by the code in twisted.names.common.extractRecord.
The following patch seems to solve those problems.

- Ralf




===================================================================
RCS file: /cvs/Twisted/twisted/names/hosts.py,v
retrieving revision 1.14
diff -u -r1.14 hosts.py
--- twisted/names/hosts.py      19 Jul 2003 10:13:50 -0000      1.14
+++ twisted/names/hosts.py      17 Feb 2004 01:45:44 -0000
@@ -49,11 +49,11 @@
 
 
     def query(self, query, timeout = None):
-        return self._lookup(str(query.name), query.type, query.type, timeout)
+        return self._lookup(str(query.name), query.cls, query.type, timeout)
 
 
     def _lookup(self, name, cls, type, timeout):
-        if cls != dns.IN or type != dns.A:
+        if cls != dns.IN or (type != dns.A and type != dns.ALL_RECORDS): # getHostByName passes type==dns.ALL_RECORDS. what else do we need here?
             return defer.fail(failure.Failure(NotImplementedError(type, cls)))
         return self.lookupAddress(
             name, timeout
@@ -64,7 +64,7 @@
         res = searchFileFor(self.file, name)
         if res:
             return defer.succeed([
-                [dns.RRHeader(name, dns.A, dns.IN, self.ttl)], (), ()
+                [dns.RRHeader(name, dns.A, dns.IN, self.ttl, dns.Record_A(res, self.ttl))], [], []
             ])
         return defer.fail(failure.Failure(dns.DomainError(name)))
 
-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From debonzi at gwyddion.com  Mon Feb 16 18:47:47 2004
From: debonzi at gwyddion.com (Daniel Henrique Debonzi)
Date: Mon, 16 Feb 2004 22:47:47 -0300
Subject: [Twisted-Python] Client Prompt
Message-ID: <403172C3.7020803@gwyddion.com>

Hi everybody,

Maybe this is a very stupid question, but I realy couldn't find a way to 
solve it by myself.

Would be enough for my aplication if this example works.

So, I want to have a client that read a string from the stdin and then 
send it to the server. Wich changes should I do in this code to this 
client work like a discrebed

#################################################################
from twisted.internet import reactor, protocol

class EchoClient(protocol.Protocol):

     def connectionMade(self):
	"""I don't want to write it here
	   I want to take data from stdin and send o server,
	   but were and how to do it? Too much dificult?
	"""
         self.transport.write("hello, world!")

     def dataReceived(self, data):
         print data

     def connectionLost(self, reason):
         print "connection lost"
         from twisted.internet import reactor
         reactor.stop()


class EchoFactory(protocol.ClientFactory):
     protocol = EchoClient

     def clientConnectionFailed(self, connector, reason):
         print "Connection failed - goodbye!"
         reactor.stop()

     def clientConnectionLost(self, connector, reason):
         print "Connection lost - goodbye!"
         reactor.stop()


def main():
     f = EchoFactory()
     reactor.connectTCP("localhost", 5555, f)
     reactor.run()

if __name__ == '__main__':
     main()

#################################################################

Thanks for all



-- 
Daniel Henrique Debonzi  Linux user number 166903
Gwyddion Embedded Free-Software Development
www.gwyddion.com
São Carlos, São Paulo
Brazil




From ralf at brainbot.com  Mon Feb 16 19:20:28 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Tue, 17 Feb 2004 03:20:28 +0100
Subject: [Twisted-Python] [PATCH] nasty bug in
 twisted.names.client.createResolver
In-Reply-To: <1076981635.1168.36.camel@sheriffpony> (Itamar
 Shtull-Trauring's message of "Mon, 16 Feb 2004 20:33:55 -0500")
References: <86oeryv7kq.fsf@stronzo.brainbot.com>
	<1076981635.1168.36.camel@sheriffpony>
Message-ID: <86fzdav443.fsf@stronzo.brainbot.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

> On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
>> The parameter variable 'hosts' gets overwritten by the import statement 
>> in createResolver. hosts.Resolver constructor is called with a module 
>> instead of a filename.
>
> Please add patches and bugs to twistedmatrix.com/bugs/
>

Lots of bug reports in the bug tracker have status 'unread'. That's
not very motivating. Just committing this patch -even if it was wrong-
would not make things worse, as the original code is definitely
broken. But, I'll add it to the bugtracker tomorrow.

- Ralf

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From mary-twisted at puzzling.org  Mon Feb 16 19:56:07 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Tue, 17 Feb 2004 13:56:07 +1100
Subject: 'unread' bugs (Re: [Twisted-Python] [PATCH] nasty bug in twisted.names.client.createResolver)
In-Reply-To: <86fzdav443.fsf@stronzo.brainbot.com>
References: <86oeryv7kq.fsf@stronzo.brainbot.com> <1076981635.1168.36.camel@sheriffpony> <86fzdav443.fsf@stronzo.brainbot.com>
Message-ID: <20040217025607.GA28107@home.puzzling.org>

On Tue, Feb 17, 2004, ralf at brainbot.com wrote:
> Lots of bug reports in the bug tracker have status 'unread'.

That doesn't *necessarily* mean 'not read by the relevant developer'. It
just means they haven't actually commented on the bug.  This seems to be
a feature/bug of the bugtrracker, roundup, itself.

I've read all bugs assigned to me, but some of them are still 'unread'
because I haven't felt the need to actually comment on them.

-Mary



From developer at csrules.dyndns.org  Mon Feb 16 22:30:06 2004
From: developer at csrules.dyndns.org (darryl)
Date: Mon, 16 Feb 2004 21:30:06 -0800
Subject: 'unread' bugs (Re: [Twisted-Python] [PATCH] nasty bug in twisted.names.client.createResolver)
In-Reply-To: <20040217025607.GA28107@home.puzzling.org>
References: <86oeryv7kq.fsf@stronzo.brainbot.com> <1076981635.1168.36.camel@sheriffpony> <86fzdav443.fsf@stronzo.brainbot.com> <20040217025607.GA28107@home.puzzling.org>
Message-ID: <4031A6DE.2070709@csrules.dyndns.org>

Mary Gardiner wrote:

>On Tue, Feb 17, 2004, ralf at brainbot.com wrote:
>  
>
>>Lots of bug reports in the bug tracker have status 'unread'.
>>    
>>
>
>That doesn't *necessarily* mean 'not read by the relevant developer'. It
>just means they haven't actually commented on the bug.  This seems to be
>a feature/bug of the bugtrracker, roundup, itself.
>
>I've read all bugs assigned to me, but some of them are still 'unread'
>because I haven't felt the need to actually comment on them.
>
>-Mary
>  
>

Just to confirm. In the default configuration of roundup the unread flag 
ONLY indicates that no-one
has added a comment, or otherwise changed the status. Is has nothing to 
do at all with actually being read.

-darryl

-- 
http://randomthoughts.vandorp.ca/syncato/WK/blog




From radix at twistedmatrix.com  Mon Feb 16 21:57:04 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Mon, 16 Feb 2004 23:57:04 -0500
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <20040216172303.GA54182@pasternak.w.lub.pl>
References: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com> <20040216172303.GA54182@pasternak.w.lub.pl>
Message-ID: <40319F20.8020901@twistedmatrix.com>

Michal Pasternak wrote:
> David A. Leedom [Mon, Feb 16, 2004 at 10:03:37AM -0500]:

>>2.      What would be the best approach using twisted to transmit a file 
>>system catalog across the local wire.  I was playing with some remote 
>>procedure calls over the weekend that seemed to work.  I am thinking I 
>>could create a class that would gather the local file system and send it 
>>over the wire as one lump.
> 
> 
> Remote procedures have limit of 640 KB for their parameters (because "640 KB
> should be enough to anyone"). You should use Pager and Collector.
> 
> >>3.      If I am going to transmit a backup file (<500meg) over the wire to 
>>another local computer what is the best Twisted approach to take?
> 
> 
> See above. Also, please remember, that memory issues matter. If you're
> paging the data (send small chunks), you should save them on the backup
> server, as they are received. If you are transfering a big file, keeping all
> the data received in some buffer is a bad idea. 

PB probably isn't good for massive file transfer like that. I'd either 
use an existing tool like rsync or http or whatever, or roll a trivial 
protocol that just sends length_of_data:data.


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040216/2ccfe6d3/attachment.sig>

From sam at twistedmatrix.com  Tue Feb 17 08:50:12 2004
From: sam at twistedmatrix.com (Sam Jordan)
Date: Wed, 18 Feb 2004 01:50:12 +1000
Subject: [Twisted-Python] Client Prompt
In-Reply-To: <403172C3.7020803@gwyddion.com>
References: <403172C3.7020803@gwyddion.com>
Message-ID: <20040217155012.GA18427@psychlaw.com.au>

On Mon, Feb 16, 2004 at 10:47:47PM -0300, Daniel Henrique Debonzi wrote:
> So, I want to have a client that read a string from the stdin and then 
> send it to the server. Wich changes should I do in this code to this 
> client work like a discrebed

You most probably want to use twisted.internet.stdio.StandardIO.
I have made a few simple modifications to your code to demonstrate
how this works -- note that this is just to demonstrate functionality
and makes a few assumptions (such as your terminal line-buffering input).

-------------------------------------------------------------------------
from twisted.internet import reactor, protocol, stdio

class InputHandler(protocol.Protocol):

    def __init__(self, realProto):
        self.realProto = realProto

    def dataReceived(self, data):
        self.realProto.transport.write(data)

class EchoClient(protocol.Protocol):

     def connectionMade(self):
        stdio.StandardIO(InputHandler(self))

     def dataReceived(self, data):
         print data

     def connectionLost(self, reason):
         print "connection lost"
         from twisted.internet import reactor
         reactor.stop()

class EchoFactory(protocol.ClientFactory):
     protocol = EchoClient

     def clientConnectionFailed(self, connector, reason):
         print "Connection failed - goodbye!"
         reactor.stop()

     def clientConnectionLost(self, connector, reason):
         print "Connection lost - goodbye!"
         reactor.stop()

def main():
     f = EchoFactory()
     reactor.connectTCP("localhost", 5555, f)
     reactor.run()

if __name__ == '__main__':
     main()

-------------------------------------------------------------------------

You may also want to take a look at doc/examples/cursesclient.py.

Hope this helps,

Sam Jordan.



From lstep at adequat.net  Tue Feb 17 17:15:45 2004
From: lstep at adequat.net (Luc Stepniewski)
Date: Wed, 18 Feb 2004 01:15:45 +0100
Subject: [Twisted-Python] Twisted Weekly News #11
Message-ID: <4032AEB1.2070108@adequat.net>

====================================================================
Twisted Weekly News #11
====================================================================

.. contents::

So many announcements and new Twisted based software! This week's TWN
(especially because it is merged with previous week) is full of really cool
news/articles/software that will keep you busy for at least two months.

If you have any new information, ideas, announcements for the next
TWN, please write to me, <lior at gradstein.info>. TWN is also available
as HTML formated ReST on http://gradstein.info/articles/twisted_news/twn11

The Twisted Weekly News
-------------------------

11th Issue. Tuesday, February 17, 2004

QOTW::

    <moshez> Twisted: Just Because It's Not Documented and Unstable
             Doesn't Mean You Shouldn't Use It

Discussions
-------------

    * http://twistedmatrix.com/pipermail/twisted-python/2003-December/006856.html
      David Bolen asked if there was a way to keep the references to the
      remote PB object when a disconnect happened, and reconnect all
      automatically.
      Jp Calderone replied 
(http://twistedmatrix.com/pipermail/twisted-python/2003-December/006869.html)
      that, in its current shape, it is not possible, because the
      references are reinitialized when the connection is re-enabled. But
      he said this would not be too hard to implement.

    * http://twistedmatrix.com/pipermail/twisted-python/2004-February/007039.html
      Stephen Waterbury posted a code example on how to interface twisted.cred
      with a database where the user/pass is stored. A few days later, Stephen
      posted another example, less trivial, showing web auth against a db, on
      http://twistedmatrix.com/pipermail/twisted-python/2004-February/007063.html

    * http://twistedmatrix.com/pipermail/twisted-python/2004-February/007057.html
      Martin Stenhard asked how to get the remote ip address of a connecting
      client, if the connection is made using PB.

    * http://twistedmatrix.com/pipermail/twisted-python/2004-February/007074.html
      David A. Leedom asked for some advice on how he should design a remote
      backup architecture using Twisted. Michal Pasternak replied that he
      should pay a lot of attention on the size of transmitted data, as Twisted
      limits paramaters to 640KB max.


Articles/Sites related to Twisted
--------------------------------------

  * **Nevow: A Web Application Construction Kit** 
(http://soundfarmer.com/content/nevow.html)
    fzZzy wrote a proposal to give a talk on nevow at this year's PyCon.
    It turns out to be a good overview of what nevow is about.

  * **Planet Twisted** (http://planet.twistedmatrix.com/)
    A new website which is a blog of all the Twisted developers blogs.

  * **Article about Twisted Networking** 
(http://www.onlamp.com/pub/a/python/2004/01/15/twisted_intro.html)
    Itamar wrote an introductory article about Twisted networking.

  * **Understanding Network I/O, Part 2** 
(http://www.onlamp.com/pub/a/python/2004/02/12/advanced_nio.html)
    Article by George Belotsky, on how to achieve network asynchronous I/O
    with examples of code in asyncore,twisted,threads, etc.


Cool Things of the Week
-----------------------

  * **Rebirth of pyx/fzZzy blog** (http://ulaluma.com/pyx/)
    fzZzy has renewed his blog, with information about nevow and the successor
    to LivePage named liveevil. A first (very) impressive example is a chat
    application, located on http://soundfarmer.com/content/code/chatola/ .

  * **Nevow Wiki** (http://divmod.org/users/slyphon.twistd/nevow/moin.cgi/)
    A survey is online showing who's doing what with Nevow today. There are
    many really interesting projects going on!

  * **Beyond2** (http://www.asbahr.com/beyond.html)
    Beyond 2 builds upon the Twisted server and extends it to enable
    arbitrary 3D clients to connect to a common simulation framework.
    Twisted provides object persistence, remote method invocation, database
    integration, and more.  The project seems to restart/continue, with the
    help of Nafai and lstep. A Wiki has been set up on http://www.beyond2.org/

  * **Twisted Forum** (http://twisted.banquise.org/)
    Some new sections have been added to the forum (Snippets, PB),


New/Updated Cool Software
-----------------------------

  * **UpStage** (http://sourceforge.net/projects/upstage/) A complex chat
    application that allows streaming of video.

  * **BEEP protocol** 
(http://freshmeat.net/redir/beepy/31931/url_homepage/beepy.sourceforge.net)
    The BEEPy Python BEEP Library is an implementation of the Blocks
    Extensible Exchange Protocol (RFC3080), written as a Python library.
    The difference with the previous version, is that it is now implemented
    with Twisted! ("It is now implemented using the Twisted framework for
    fast, asynchronous network communications")

  * **Shtoom** (http://shtoom.sourceforge.net/)
    Shtoom is a pure python implementation of a Voice over IP software phone.

  * **Trash** (http://thorne.ath.cx/~stephen/software.html)
    'Trash' a pastebin application written using the Twisted framwork (using
    woven).

  * **GoSiege** (http://www.stranex.com/~perspex/gosiege/)
    A game on the Go game model, but in a online multiplayer (MMOG) mode.
    The code is really a very good example of well written code (at least
    from my point of view). I recommend it if you're looking for PB example
    code.

  * **Twibber** (http://slarty.polito.it:8069/~sciasbat/wiki/moin.cgi/twibber)
    Version 0.2.0pre1, twibber is a Python package aimed at handling the
    Jabber - XMMP protocol in a completely asynchronous way.

  * **Crow's Nest** (http://crowsnest.sourceforge.net/)
    Crow's Nest is a project designed to help collect log information
    from various sources and to apply some filter to them in a very modular
    way.

  * **PETMail** (http://petmail.lothar.com/)
    PETMail is a permission-based anti-spam replacement for SMTP, using
    recipient-defined CAPTCHA challenges for new senders, automatic
    (but revocable) permission-granting for most correspondents, encrypted
    and signed (but pseudonymous) messages, and provisions for easily
    changing addresses or transports (including a mechanism to publish
    remailer SURBs as a destination).

  * **PEAK 0.5a2** (http://peak.telecommunity.com/)
    (Not directly related to Twisted, but allows the developer to use
    the twisted reactor). The third alpha is available.
    That version includes a new framework (peak.events) that allows the
    developer to make his programs more event-driven (in the sense of
    subscribers/observers). The event loop, as usual, can be set to be
    Twisted's reactor.

Current releases
-----------------

   * Twisted: 1.1.1 (released 2003-12-10) (devel version: 1.1.2alpha2)
   * Quotient: 0.8.8 (released 2003-12-12)
   * Twisted Java: 0.6.1 (released 2003-12-02)



Ok, that's it for this week. Thanks for reading!



From itamar at itamarst.org  Tue Feb 17 18:14:06 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 17 Feb 2004 20:14:06 -0500
Subject: [Twisted-Python] [PATCH] nasty bug in
	twisted.names.client.createResolver
In-Reply-To: <86fzdav443.fsf@stronzo.brainbot.com>
References: <86oeryv7kq.fsf@stronzo.brainbot.com>
	 <1076981635.1168.36.camel@sheriffpony>
	 <86fzdav443.fsf@stronzo.brainbot.com>
Message-ID: <1077066846.2587.18.camel@sheriffpony>

On Mon, 2004-02-16 at 21:20, ralf at brainbot.com wrote:

> Lots of bug reports in the bug tracker have status 'unread'. That's
> not very motivating. Just committing this patch -even if it was wrong-
> would not make things worse, as the original code is definitely
> broken. But, I'll add it to the bugtracker tomorrow.

Let me put it this way: If it's in the bug tracker someone will
eventually look at it. If you just post to list you can be pretty much
sure no one will ever look at it again if they forget the first time. 

Please do post to the bug tracker. It won't make it go in fast, but
it'll make sure the patch isn't *lost*.




From glyph at twistedmatrix.com  Wed Feb 18 00:53:13 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 18 Feb 2004 02:53:13 -0500
Subject: [Twisted-Python] Twisted Weekly News #11
In-Reply-To: <4032AEB1.2070108@adequat.net>
References: <4032AEB1.2070108@adequat.net>
Message-ID: <1077090792.3985.14.camel@localhost>

On Tue, 2004-02-17 at 19:15, Luc Stepniewski wrote:

> So many announcements and new Twisted based software! This week's TWN
> (especially because it is merged with previous week) is full of really cool
> news/articles/software that will keep you busy for at least two months.

Luc, this is incredible!! I had no idea that so many people were using
Twisted.  We really need to update the website.

Thanks again for writing it :)




From rdrb at 123.cl  Wed Feb 18 17:37:53 2004
From: rdrb at 123.cl (RITA Y/O RODRIGO DIAZ Y/O BENENSON)
Date: Wed, 18 Feb 2004 21:37:53 -0300
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
Message-ID: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl>

I have been playing with DeferredList if found that his behaviour was not what I expected,

>>> dfl = DeferredList([])
>>> print dfl.called
True
>>> dfl.addDeferred(d)
>>> d.called
0
>>> print dfl.called
True

The workaround it to first create the list of deferred instance and then instanciate with it the DeferredList. But what sense does have the addDeferred method then ? I this behaviour what is supposed to be ?

rodrigob.





From rdrb at 123.cl  Wed Feb 18 17:51:51 2004
From: rdrb at 123.cl (RITA Y/O RODRIGO DIAZ Y/O BENENSON)
Date: Wed, 18 Feb 2004 21:51:51 -0300
Subject: [Twisted-Python] Twisted and P2P (re: p2p, gnutella)
Message-ID: <397cb3900f.3900f397cb@noborrar.co.cl>

Hi,
I'm working on the Twistification of http://thecircle.org.au/ and in the reparation of the broken http://khashmir.sf.net

if you would like to help contact me at the email 

myname at elo dot utfsm dot cl

knowing that myname is rodrigob

(I hate spam)

TheCircle work is just at his begining (design is made, code is starting, slowly), the khashmir reparation is going fine (but no estimation can be done in debugging, because number of critical bugs is unknown).

rodrigob.




<twisted-python at twistedmatrix.com>
> From: stephan <mailinglists at shechen.at>
> Subject: [Twisted-Python] p2p, gnutella
> Reply-To: twisted-python at twistedmatrix.com
> 
> 
> 
> I am looking forward to add p2p functionality to my app. Does 
> anybody know 
> what the current status of twisted's gnutella implementation is?
> 
> There seems to have been a semi-finished implemention in 
> 1.0.2alpha4 which 
> I can't find in 1.1.1 anymore.
> 
> I might also be willing to implement missing parts but I would need 
> to get 
> a short briefing on how things are.
> 
> thanks,
> 
> _stephan
> 




From andrew-twisted at puzzling.org  Wed Feb 18 18:32:45 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 19 Feb 2004 12:32:45 +1100
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
In-Reply-To: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl>
Message-ID: <20040219013245.GG1782@frobozz>

On Wed, Feb 18, 2004 at 09:37:53PM -0300, RITA Y/O RODRIGO DIAZ Y/O BENENSON wrote:
> I have been playing with DeferredList if found that his behaviour was not
> what I expected,
> 
> >>> dfl = DeferredList([])
> >>> print dfl.called
> True
> >>> dfl.addDeferred(d)
> >>> d.called
> 0
> >>> print dfl.called
> True
> 
> The workaround it to first create the list of deferred instance and then
> instanciate with it the DeferredList. But what sense does have the
> addDeferred method then ? I this behaviour what is supposed to be ?

It's not clear to me what the right behaviour here is -- if a DeferredList
has some number of Deferreds that have all been called, then of course the
DeferredList should be marked as called, too.  But if you then add an
uncalled Deferred to it, that sounds like a bug.  I'd be inclined to make
DeferredList.addDeferred raise an exception in this case -- "In the face of
ambiguity, refuse the temptation to guess." (although perhaps a warning
would be better for a release or two, for backwards compatibility)

I'm tempted to go even further and just deprecate addDeferred.  I can't see
a good use-case for it, and grep of the entire Twisted code base finds no
uses outside of the test suite.  It's not obvious or intuitive exactly what
addDeferred should do in at least this situation, and probably others.  I
can't think of any situation where addDeferred is required, and I think
calling it with the final list upfront is more readable, anyway.

Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
you added it, can you remember why?  Is anyone using it?

-Andrew.




From radix at twistedmatrix.com  Wed Feb 18 20:19:43 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 18 Feb 2004 22:19:43 -0500
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
In-Reply-To: <20040219013245.GG1782@frobozz>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz>
Message-ID: <40342B4F.90900@twistedmatrix.com>

Andrew Bennetts wrote:

> On Wed, Feb 18, 2004 at 09:37:53PM -0300, RITA Y/O RODRIGO DIAZ Y/O BENENSON wrote:

>>The workaround it to first create the list of deferred instance and then
>>instanciate with it the DeferredList. But what sense does have the
>>addDeferred method then ? I this behaviour what is supposed to be ?
> 
> 
> It's not clear to me what the right behaviour here is -- if a DeferredList
> has some number of Deferreds that have all been called, then of course the
> DeferredList should be marked as called, too.  But if you then add an
> uncalled Deferred to it, that sounds like a bug.  

Similar to d.result, IMO, d.called is an "invite-only attribute", in the 
words of Glyph. If you want to touch it, don't whine about its 
semantics. :-)

> Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
> you added it, can you remember why?  Is anyone using it?

And addDeferred looks like it should really be _addDeferred.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040218/361605c3/attachment.sig>

From ilya at glasnet.ru  Wed Feb 11 01:08:24 2004
From: ilya at glasnet.ru (Ilya Etingof)
Date: Wed, 11 Feb 2004 11:08:24 +0300 (MSK)
Subject: [pysnmp-users] Re: [Twisted-Python] Twisted and SNMP
In-Reply-To: <4028A3DE.2020101@rogers.com>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne>
 <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
 <4028A3DE.2020101@rogers.com>
Message-ID: <Pine.LNX.4.58.0402111042030.9048@cray.glas.net>

> > but if anyone is interested in bringing a full high performance ASN
> > coder-decoder to twisted, i'd be willing to help.
>
> Ilya (creator of PySNMP) just released a new version of PySNMP
> yesterday.  It's noticeably faster feeling than the 3.3.x version.  I
> don't have time to do timings with it, but I'd guess it's probably
> taking 3/4 of the time of the previous version.  Still likely not 0.02
> seconds on getbulk requests, but noticeably faster.

Just a little bit of clarification:

My ASN1 decoder is designed in a way similar to a top-down text parser --
it reads octet stream (text) and builds a tree of ASN1 objects (AST).
Depending of the mix-ins to those ASN1 objects, walking the tree may
produce something concrete.

Perhaps the most noticable bottleneck there lays in the fact that building
a tree of ASN1 objects involves massive classes instantiations. In the
latest pysnmp code (3.4.x) I attempted to save on object creation by caching
and reusing once created ASN1 objects.

To make the most of this trick I'd suggest to cache and re-use ASN1
objects (SNMP message objects for example) at your application whenever
possible.

-ilya



From andrew-twisted at puzzling.org  Wed Feb 18 20:33:46 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 19 Feb 2004 14:33:46 +1100
Subject: [Twisted-Python] DeferredList.addDeferred behaviour
In-Reply-To: <40342B4F.90900@twistedmatrix.com>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz> <40342B4F.90900@twistedmatrix.com>
Message-ID: <20040219033346.GH1782@frobozz>

On Wed, Feb 18, 2004 at 10:19:43PM -0500, Christopher Armstrong wrote:
> Andrew Bennetts wrote:
> 
> >It's not clear to me what the right behaviour here is -- if a DeferredList
> >has some number of Deferreds that have all been called, then of course the
> >DeferredList should be marked as called, too.  But if you then add an
> >uncalled Deferred to it, that sounds like a bug.  
> 
> Similar to d.result, IMO, d.called is an "invite-only attribute", in the 
> words of Glyph. If you want to touch it, don't whine about its 
> semantics. :-)

It probably should be _called, then... if nothing else, the API docs should
point this out.  I might fix that when I update the code to deprecate
addDeferred.

> >Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
> >you added it, can you remember why?  Is anyone using it?
> 
> And addDeferred looks like it should really be _addDeferred.

Why not just remove it entirely?  I found Donovan on IRC, his opinion was
"remove it" :)

-Andrew.




From radix at twistedmatrix.com  Wed Feb 18 20:37:40 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Wed, 18 Feb 2004 22:37:40 -0500
Subject: [pysnmp-users] Re: [Twisted-Python] Twisted and SNMP
In-Reply-To: <Pine.LNX.4.58.0402111042030.9048@cray.glas.net>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr> <4028A3DE.2020101@rogers.com> <Pine.LNX.4.58.0402111042030.9048@cray.glas.net>
Message-ID: <40342F84.8080000@twistedmatrix.com>

Ilya Etingof wrote:
> In the
> latest pysnmp code (3.4.x) I attempted to save on object creation by caching
> and reusing once created ASN1 objects.
> 
> To make the most of this trick I'd suggest to cache and re-use ASN1
> objects (SNMP message objects for example) at your application whenever
> possible.

Hmm...

http://151.200.36.43:8080/evil/freelist.py

Courtesy of Jp Calderone.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040218/8a4c6407/attachment.sig>

From uwe at oss4u.com  Thu Feb 19 00:28:37 2004
From: uwe at oss4u.com (Uwe C. Schroeder)
Date: Wed, 18 Feb 2004 23:28:37 -0800
Subject: [SPAM 05.92] [Twisted-Python] Twisted and P2P (re: p2p, gnutella)
In-Reply-To: <397cb3900f.3900f397cb@noborrar.co.cl>
References: <397cb3900f.3900f397cb@noborrar.co.cl>
Message-ID: <200402182328.37975.uwe@oss4u.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Something off the list: If you hate spam, you should probably get a decent 
email account, because the one you have is rated as spam (and actually 
doesn't survive my spamfilter): Reasons:

X-Spam-Report: 
	*  1.1 RCVD_IN_SORBS_HTTP RBL: SORBS: sender is open HTTP proxy server
	*      [200.72.168.145 listed in dnsbl.sorbs.net]
	*  0.1 RCVD_IN_SORBS RBL: SORBS: sender is listed in SORBS
	*      [200.72.168.145 listed in dnsbl.sorbs.net]
	*  1.3 RCVD_IN_NJABL_RELAY RBL: NJABL: sender is confirmed open relay
	*      [200.72.168.145 listed in dnsbl.njabl.org]
	*  0.1 RCVD_IN_NJABL RBL: Received via a relay in dnsbl.njabl.org
	*      [200.72.168.145 listed in dnsbl.njabl.org]
	*  1.1 RCVD_IN_DSBL RBL: Received via a relay in list.dsbl.org
	*      [<http://dsbl.org/listing?ip=200.72.168.145>]
	*  1.1 RCVD_IN_NJABL_PROXY RBL: NJABL: sender is an open proxy
	*      [200.72.168.145 listed in dnsbl.njabl.org]
	*  1.1 RCVD_IN_SORBS_SOCKS RBL: SORBS: sender is open SOCKS proxy server
	*      [200.72.168.145 listed in dnsbl.sorbs.net]


On Wednesday 18 February 2004 04:51 pm, RITA Y/O RODRIGO DIAZ Y/O BENENSON 
wrote:
> Hi,
> I'm working on the Twistification of http://thecircle.org.au/ and in the
> reparation of the broken http://khashmir.sf.net
>
> if you would like to help contact me at the email
>
> myname at elo dot utfsm dot cl
>
> knowing that myname is rodrigob
>
> (I hate spam)
>
> TheCircle work is just at his begining (design is made, code is starting,
> slowly), the khashmir reparation is going fine (but no estimation can be
> done in debugging, because number of critical bugs is unknown).
>
> rodrigob.
>
>
>
>
> <twisted-python at twistedmatrix.com>
>
> > From: stephan <mailinglists at shechen.at>
> > Subject: [Twisted-Python] p2p, gnutella
> > Reply-To: twisted-python at twistedmatrix.com
> >
> >
> >
> > I am looking forward to add p2p functionality to my app. Does
> > anybody know
> > what the current status of twisted's gnutella implementation is?
> >
> > There seems to have been a semi-finished implemention in
> > 1.0.2alpha4 which
> > I can't find in 1.1.1 anymore.
> >
> > I might also be willing to implement missing parts but I would need
> > to get
> > a short briefing on how things are.
> >
> > thanks,
> >
> > _stephan
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

- -- 
	UC

- --
Open Source Solutions 4U, LLC	2570 Fleetwood Drive
Phone:  +1 650 872 2425		San Bruno, CA 94066
Cell:   +1 650 302 2405		United States
Fax:    +1 650 872 2417
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)

iD8DBQFANGWljqGXBvRToM4RAnV0AKCp4siSQrd1BUDWT17zCWiFHUdDtQCgnNWF
1uEv9Xi2m6VpavHcnsw2nN4=
=rvly
-----END PGP SIGNATURE-----




From daedalus at eigenmagic.com  Thu Feb 19 14:48:37 2004
From: daedalus at eigenmagic.com (Justin Warren)
Date: Fri, 20 Feb 2004 08:48:37 +1100
Subject: [Twisted-Python] Twisted and SNMP (was: Advice on doing thousands of simultaneous UDP queries with Twisted...)
In-Reply-To: <40289E7C.9000100@accelance.fr>
References: <40276641.30300@rogers.com> <1076326338.1012.4.camel@shautha.thorne> <40288714.2040100@rogers.com> <40289E7C.9000100@accelance.fr>
Message-ID: <20040219214837.GA19451@snafu.eigenmagic.com>

On Tue, Feb 10, 2004 at 10:03:56AM +0100, Thomas Favier wrote:
> Mike C. Fletcher wrote:

> You bring my point with SNMP : I've tried to build a SNMP poller based 
> on twisted and pySNMP. Main trouble i've had is the decoding time of the 
> pure python ASN parser. It spent about 1 full second decoding (packets 
> are about 7ko, as i get all values and tables with a GET-BULK, there is 
> room for improvement by splitting requests, but that's not significant 
> for that matter). So i switched to a threaded implementation using 
> yapsnmp (and ugly deferToThreads). Decoding times are about 0.02 seconds 
> for the same requests. Load on the server was more than halved.

Please forgive the self-linking, but you might like to take a look at
libsnmp: http://seafelt.unicity.com.au/libsnmp. I wrote it to replace
pySNMP in a product we're working on, for various reasons, speed being
one of them. The main difference between the two is that libsnmp isn't
a generic ASN.1 decoder; we've hardcoded things specific to SNMP to
make things faster. It seems to scale quite well so far.

-- 
"You've got that exactly backwards.  Windows was a boot loader that was
 mutilated and tortured by sadistic psychopaths of the highest order in
 order to make it superficially resemble an OS."
   -- Paul Tomblin in a.s.r



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 02:48:32 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 09:48:32 +0000
Subject: [Twisted-Python] Problems running Twisted
Message-ID: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>

I'm trying to set up a (very simple) web server using Twisted.
I'm using this example from the documentation:

============================================================
# teg1.py

from twisted.web import server, resource
from twisted.internet import reactor

class Simple(resource.Resource):
    isLeaf = True
    def render(self, request):
        return "<html>Hello, world!</html>"

site = server.Site(Simple())
reactor.listenTCP(8080, site)
reactor.run()
============================================================

I've stored this as <teg1.py>. When I run:

   $ python teg1.py

Python complains that it can't import twisted.web:

   Traceback (most recent call last):
     File "teg1.py", line 3, in ?
       from twisted.web import server, resource
   ImportError: No module named twisted.web

I've previously installed Twisted by running:

   $ python setup.py install

which I thought would install all the modules and put them correctly
in the PYTHONPATH (tell me if this isn't true).

Am I doing somethnig wrong? I feel I have missed something fundamental, but
don't know what. Should I rename my file to <teg1.rpy> or something? Do I
need to run at the command-line ``mktap'' instead of ``python''?

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From andrew-twisted at puzzling.org  Fri Feb 20 03:06:58 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Fri, 20 Feb 2004 21:06:58 +1100
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
Message-ID: <20040220100658.GA768@frobozz>

On Fri, Feb 20, 2004 at 09:48:32AM +0000, Phil Hunt wrote:
> 
> I'm trying to set up a (very simple) web server using Twisted.
[...]
> 
> Python complains that it can't import twisted.web:
> 
>    Traceback (most recent call last):
>      File "teg1.py", line 3, in ?
>        from twisted.web import server, resource
>    ImportError: No module named twisted.web
> 
> I've previously installed Twisted by running:
> 
>    $ python setup.py install
> 
> which I thought would install all the modules and put them correctly
> in the PYTHONPATH (tell me if this isn't true).

It should... what platform are you on?

In fact, it should've told you where it was installing stuff, and you should
be able to look at that directory (/usr/lib/python2.3/site-packages on
*nix, C:\Python23\Lib\site-packages on Windows, iirc), and see that there is
a twisted directory in there.

> Am I doing somethnig wrong? I feel I have missed something fundamental, but
> don't know what. Should I rename my file to <teg1.rpy> or something? Do I
> need to run at the command-line ``mktap'' instead of ``python''?

No, you're running it the right way -- you can verify that importing is the
problem by doing 'python -c "import twisted.web"'.  If it's installed in
your python's site-packages correctly, it should work, otherwise it should
give the error you saw.

-Andrew.




From radix at twistedmatrix.com  Fri Feb 20 03:09:15 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 20 Feb 2004 05:09:15 -0500
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
Message-ID: <4035DCCB.5090701@twistedmatrix.com>

Phil Hunt wrote:
> I'm trying to set up a (very simple) web server using Twisted.
> I'm using this example from the documentation:

...

>    $ python teg1.py
> 
> Python complains that it can't import twisted.web:
...
> I've previously installed Twisted by running:
> 
>    $ python setup.py install
> 
> which I thought would install all the modules and put them correctly
> in the PYTHONPATH (tell me if this isn't true).

It doesn't actually modify PYTHONPATH, it (hopefully) puts Twisted in a 
directory that's already in sys.path.

Which version of python did you run setup.py? Ensure 
/usr/lib/pythonX.X/site-packages/twisted exists. Make sure you're 
running your script with the same version.

> Am I doing somethnig wrong? I feel I have missed something fundamental, but
> don't know what. Should I rename my file to <teg1.rpy> or something? Do I
> need to run at the command-line ``mktap'' instead of ``python''?

No, the way you're doing it is fine.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040220/566e3f48/attachment.sig>

From michal at pasternak.w.lub.pl  Fri Feb 20 03:25:50 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 20 Feb 2004 11:25:50 +0100
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
Message-ID: <20040220102550.GB49534@pasternak.w.lub.pl>

Phil Hunt [Fri, Feb 20, 2004 at 09:48:32AM +0000]:
> from twisted.web import server, resource
[...]
>    Traceback (most recent call last):
>      File "teg1.py", line 3, in ?
>        from twisted.web import server, resource
>    ImportError: No module named twisted.web
> 
> I've previously installed Twisted by running:
> 
>    $ python setup.py install

Perhaps you should try to reinstall Twisted, or check how the above line
("from twisted.web ...") works in the interactive mode.



From fuka at fuxoft.cz  Fri Feb 20 03:40:09 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 11:40:09 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <20040220102550.GB49534@pasternak.w.lub.pl>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl>
Message-ID: <4035E409.2090708@fuxoft.cz>

What exactly is the difference between running "python setup.py" and 
just copying the twisted/ directory to site-packages/ directory? I tried 
installing Twisted on old server which has Python 2.2 - the first method 
didn't work, the second did.

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From michal at pasternak.w.lub.pl  Fri Feb 20 03:57:05 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 20 Feb 2004 11:57:05 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <4035E409.2090708@fuxoft.cz>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl> <4035E409.2090708@fuxoft.cz>
Message-ID: <20040220105705.GA50747@pasternak.w.lub.pl>

Frantisek Fuka [Fri, Feb 20, 2004 at 11:40:09AM +0100]:
> What exactly is the difference between running "python setup.py" and 
> just copying the twisted/ directory to site-packages/ directory? I tried 
> installing Twisted on old server which has Python 2.2 - the first method 
> didn't work, the second did.

What exactly didn't work in the first method?

About setup.py, read at http://python.org/doc/2.3.3/lib/module-distutils.html



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 04:04:06 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 11:04:06 +0000
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <20040220100658.GA768@frobozz>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220100658.GA768@frobozz>
Message-ID: <200402201104.06786.phil.hunt@tech.mrc.ac.uk>

On Friday 20 Feb 2004 10:06 am, Andrew Bennetts wrote:
> On Fri, Feb 20, 2004 at 09:48:32AM +0000, Phil Hunt wrote:
> > I'm trying to set up a (very simple) web server using Twisted.
> > Python complains that it can't import twisted.web:
> >
> >    Traceback (most recent call last):
> >      File "teg1.py", line 3, in ?
> >        from twisted.web import server, resource
> >    ImportError: No module named twisted.web
> >
> > I've previously installed Twisted by running:
> >
> >    $ python setup.py install
> >
> > which I thought would install all the modules and put them correctly
> > in the PYTHONPATH (tell me if this isn't true).
>
> It should... what platform are you on?

Python 2.3.3 on Mandrake 9.1.

On further inspection, it appears the situation is more complicated.
When logged in as phunt, I'm running Python 2.3.3 located at 
/opt/local/bin/python 

When running as root I'm running Python 2.2.2 located at /usr/bin/python

I ran setup.py as root (because phunt didn't have the right priviledges).

(Unfortunately I didn't install this box -- lots of stuff is in non-standard
places).

It appears that <setup.py> has set it up in locations appropriate to root.
I've tested this by running <teg1.py> as root and... guess what, it works;
when I point my webserver at <http://localhost:8080/> I get the "Hello 
World" message. 

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From fuka at fuxoft.cz  Fri Feb 20 04:25:38 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 12:25:38 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <20040220105705.GA50747@pasternak.w.lub.pl>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl> <4035E409.2090708@fuxoft.cz> <20040220105705.GA50747@pasternak.w.lub.pl>
Message-ID: <4035EEB2.2010606@fuxoft.cz>

Michal Pasternak wrote:
> Frantisek Fuka [Fri, Feb 20, 2004 at 11:40:09AM +0100]:
> 
>>What exactly is the difference between running "python setup.py" and 
>>just copying the twisted/ directory to site-packages/ directory? I tried 
>>installing Twisted on old server which has Python 2.2 - the first method 
>>didn't work, the second did.
> 
> 
> What exactly didn't work in the first method?

It halted on exception about some directory not found. Because the 
directory name contained some variation of "python2.3" string, I 
presumed that the problem is with the server only having python2.2 
installed.

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From michal at pasternak.w.lub.pl  Fri Feb 20 04:47:06 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 20 Feb 2004 12:47:06 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <4035EEB2.2010606@fuxoft.cz>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk> <20040220102550.GB49534@pasternak.w.lub.pl> <4035E409.2090708@fuxoft.cz> <20040220105705.GA50747@pasternak.w.lub.pl> <4035EEB2.2010606@fuxoft.cz>
Message-ID: <20040220114706.GA51194@pasternak.w.lub.pl>

Frantisek Fuka [Fri, Feb 20, 2004 at 12:25:38PM +0100]:
> Michal Pasternak wrote:
> >Frantisek Fuka [Fri, Feb 20, 2004 at 11:40:09AM +0100]:
> >
> >>What exactly is the difference between running "python setup.py" and 
> >>just copying the twisted/ directory to site-packages/ directory? I tried 
> >>installing Twisted on old server which has Python 2.2 - the first method 
> >>didn't work, the second did.
> >
> >
> >What exactly didn't work in the first method?
> 
> It halted on exception about some directory not found. Because the 
> directory name contained some variation of "python2.3" string, I 
> presumed that the problem is with the server only having python2.2 
> installed.

Distutils are a part of Python distribution. When you run interpreter and
"import distutils", they already know, what version of Py you are running,
so if you ran Python 2.2, missing 2.3 is not a real problem.

You didn't provide exact error message, which would of course help to
identify the problem; using my telepathic powers, I bet you're running
Debian without the package for distutils installed. AFAIR, it is included in
pythonX.X-dev.



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 05:02:02 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 12:02:02 +0000
Subject: [Twisted-Python] More problems running examples
Message-ID: <200402201202.02566.phil.hunt@tech.mrc.ac.uk>

OK, I've now been able to get the very simplest webserver running.
I'm trying something slightly more complex, based on the next example
in <Twisted-1.1.1/doc/howto/using-twistedweb.html>.

The Hello class given in the exmaple is not a full program:

#####################################################################
# teg3.py

from twisted.web.resource import Resource

class Hello(Resource):
    def getChild(self, name, request):
        if name == '':
            return self
        return Resource.getChild(
            self, name, request)

        def render(self, request):
            return """<html>
      Hello, world! I am located at %r.
    </html>"""               % (request.prepath) 

resource = Hello()
#####################################################################

When I run this it exits immediately; I assume this is intentional.

I built on the previous example to produce a full program; my code is:

#####################################################################
# teg2.py

from twisted.web import server, resource
from twisted.internet import reactor
from twisted.web.resource import Resource

class Hello(resource.Resource):

   def getChild(self, name, request):
      if name == '':
         result = self
      else:   
         result = Resource.getChild(self, name, request)
      print "in Hello:getChild, result=%r" % (result,)
      return result

   def render(self, request):
      s = """<html>
      Hello, world! I am located at %r.
      </html>""" % (request.prepath) 
      return s

print "===== Running teg2.py (simple webserver) ====="
res = Hello()

site = server.Site(res)
reactor.listenTCP(8011, site)
reactor.run()
#####################################################################


Now, this does actually run, however whenever I point my webserver at it,
all that comes back is a 404 error with the text:

   No Such Resource
   No such child resource.

And my program writes to stdout:

   in Hello:getChild, result=<twisted.web.error.NoResource instance at
   0x406adb0c>

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From joeh at dai.ed.ac.uk  Fri Feb 20 05:41:12 2004
From: joeh at dai.ed.ac.uk (Joe Halliwell)
Date: Fri, 20 Feb 2004 12:41:12 +0000
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <200402201202.02566.phil.hunt@tech.mrc.ac.uk>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk>
Message-ID: <1077280872.11912.2.camel@avant-retard>

The code is fine, so I wonder what URL you're pointing the browser at.
Tried http://127.0.0.1:8011/ ? Anything else will produce a resource
error since res has no child resources.

Cheers,
Joe

> #####################################################################
> # teg2.py
> 
> from twisted.web import server, resource
> from twisted.internet import reactor
> from twisted.web.resource import Resource
> 
> class Hello(resource.Resource):
> 
>    def getChild(self, name, request):
>       if name == '':
>          result = self
>       else:   
>          result = Resource.getChild(self, name, request)
>       print "in Hello:getChild, result=%r" % (result,)
>       return result
> 
>    def render(self, request):
>       s = """<html>
>       Hello, world! I am located at %r.
>       </html>""" % (request.prepath) 
>       return s
> 
> print "===== Running teg2.py (simple webserver) ====="
> res = Hello()
> 
> site = server.Site(res)
> reactor.listenTCP(8011, site)
> reactor.run()
> #####################################################################
> 
> 
> Now, this does actually run, however whenever I point my webserver at it,
> all that comes back is a 404 error with the text:
> 
>    No Such Resource
>    No such child resource.
> 
> And my program writes to stdout:
> 
>    in Hello:getChild, result=<twisted.web.error.NoResource instance at
>    0x406adb0c>
> 
> -- 
> Phil Hunt, phil.hunt at tech.mrc.ac.uk
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040220/c3e1a5b4/attachment.sig>

From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 06:25:51 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 13:25:51 +0000
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <1077280872.11912.2.camel@avant-retard>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk> <1077280872.11912.2.camel@avant-retard>
Message-ID: <200402201325.51806.phil.hunt@tech.mrc.ac.uk>

On Friday 20 Feb 2004 12:41 pm, Joe Halliwell wrote:
> The code is fine, so I wonder what URL you're pointing the browser at.
> Tried http://127.0.0.1:8011/ ? Anything else will produce a resource
> error since res has no child resources.

Yes, it works for http://127.0.0.1:8011/, but as you say, when I use any other
URL such as http://127.0.0.1:8011/this/is/a/path/ it doesn't work.

What I want to know is how do I make it work with other URLs, and how do I
get it to bring up dynamically-produced web pages. Is this what .rpy files
are for? IOW, is an .rpy file the equivalent of a .php file in that it contains
code for writing one specific web page?

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From phil.hunt at tech.mrc.ac.uk  Fri Feb 20 06:27:59 2004
From: phil.hunt at tech.mrc.ac.uk (Phil Hunt)
Date: Fri, 20 Feb 2004 13:27:59 +0000
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk> <1077280872.11912.2.camel@avant-retard> <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
Message-ID: <200402201327.59899.phil.hunt@tech.mrc.ac.uk>

On Friday 20 Feb 2004 1:25 pm, Phil Hunt wrote:
> On Friday 20 Feb 2004 12:41 pm, Joe Halliwell wrote:
> > The code is fine, so I wonder what URL you're pointing the browser at.
> > Tried http://127.0.0.1:8011/ ? Anything else will produce a resource
> > error since res has no child resources.
>
> Yes, it works for http://127.0.0.1:8011/, but as you say, when I use any
> other URL such as http://127.0.0.1:8011/this/is/a/path/ it doesn't work.
>
> What I want to know is how do I make it work with other URLs, and how do I
> get it to bring up dynamically-produced web pages. Is this what .rpy files
> are for? IOW, is an .rpy file the equivalent of a .php file in that it
> contains code for writing one specific web page?

Furthermore, do I want to start my webserver by running python, twistd
or mktap; and why?

-- 
Phil Hunt, phil.hunt at tech.mrc.ac.uk



From mary-twisted at puzzling.org  Fri Feb 20 07:15:12 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Sat, 21 Feb 2004 01:15:12 +1100
Subject: [Twisted-Python] More problems running examples
In-Reply-To: <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
References: <200402201202.02566.phil.hunt@tech.mrc.ac.uk> <1077280872.11912.2.camel@avant-retard> <200402201325.51806.phil.hunt@tech.mrc.ac.uk>
Message-ID: <20040220141512.GA18810@titus.home.puzzling.org>

On Fri, Feb 20, 2004, Phil Hunt wrote:
> What I want to know is how do I make it work with other URLs, and how do I
> get it to bring up dynamically-produced web pages. Is this what .rpy files
> are for? IOW, is an .rpy file the equivalent of a .php file in that it contains
> code for writing one specific web page?

These questions should be asked on the twisted-web mailing list:
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-web

-Mary



From maoy at cis.upenn.edu  Fri Feb 20 08:24:51 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Fri, 20 Feb 2004 10:24:51 -0500 (EST)
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <20040220114706.GA51194@pasternak.w.lub.pl>
Message-ID: <Pine.LNX.4.44.0402201023230.24963-100000@klondike.cis.upenn.edu>

I encountered the similar problem before with rpm-based distribution. Just 
grab the python-devel-xxx.rpm and install.

HTH
-- 
Yun


> 
> You didn't provide exact error message, which would of course help to
> identify the problem; using my telepathic powers, I bet you're running
> Debian without the package for distutils installed. AFAIR, it is included in
> pythonX.X-dev.
> 




From fuka at fuxoft.cz  Fri Feb 20 08:30:49 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 16:30:49 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <Pine.LNX.4.44.0402201023230.24963-100000@klondike.cis.upenn.edu>
References: <Pine.LNX.4.44.0402201023230.24963-100000@klondike.cis.upenn.edu>
Message-ID: <40362829.2040600@fuxoft.cz>

Yun Mao wrote:

> I encountered the similar problem before with rpm-based distribution. Just 
> grab the python-devel-xxx.rpm and install.

Thanks. But the current question is: I already "installed" twisted by 
simply copying the twisted/ subdirectory into site-packages/ and 
everything seems to run OK. "If it ain't broke..."

Or is it broken?

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From maoy at cis.upenn.edu  Fri Feb 20 11:30:34 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Fri, 20 Feb 2004 13:30:34 -0500 (EST)
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <40362829.2040600@fuxoft.cz>
Message-ID: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu>

I guess the pure python part (which is almost the whole part?) would be 
fine. However, you probably do not have those handy script installed in 
the $PATH, such as twistd, mktap, etc.

-- 
Yun


On Fri, 20 Feb 2004, Frantisek Fuka wrote:

> Yun Mao wrote:
> 
> > I encountered the similar problem before with rpm-based distribution. Just 
> > grab the python-devel-xxx.rpm and install.
> 
> Thanks. But the current question is: I already "installed" twisted by 
> simply copying the twisted/ subdirectory into site-packages/ and 
> everything seems to run OK. "If it ain't broke..."
> 
> Or is it broken?
> 
> 




From fuka at fuxoft.cz  Fri Feb 20 11:55:00 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 19:55:00 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu>
References: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu>
Message-ID: <40365804.80104@fuxoft.cz>

Yun Mao wrote:
> I guess the pure python part (which is almost the whole part?) would be 
> fine. However, you probably do not have those handy script installed in 
> the $PATH, such as twistd, mktap, etc.

That's not a problem, I am just importing Twisted modules into my Python 
application.

Am I correct in thinking that if I installed it "correctly" (using 
setup.py), Twisted would compile some binaries and then be faster/more 
stable etc...?

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From radix at twistedmatrix.com  Fri Feb 20 13:02:03 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 20 Feb 2004 15:02:03 -0500
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <40365804.80104@fuxoft.cz>
References: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu> <40365804.80104@fuxoft.cz>
Message-ID: <403667BB.5030207@twistedmatrix.com>

Frantisek Fuka wrote:
> Yun Mao wrote:
> 
>> I guess the pure python part (which is almost the whole part?) would 
>> be fine. However, you probably do not have those handy script 
>> installed in the $PATH, such as twistd, mktap, etc.
> 
> 
> That's not a problem, I am just importing Twisted modules into my Python 
> application.
> 
> Am I correct in thinking that if I installed it "correctly" (using 
> setup.py), Twisted would compile some binaries and then be faster/more 
> stable etc...?

There are a number of optional C extensions. So, perhaps, depending on 
what parts you're using, it could be faster. They're written in C, 
though, so generally I would assume that the potential for *in*stability 
is higher when you use them, but that's not a comment about any of our C 
extensions specifically. ;-)

So, you get C extensions and bin scripts in $prefix when you use 
setup.py. Nothing critical.

However! Before you forget this topic: you said you had a problem with 
running setup.py, so a real bug report would be very much appreciated.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040220/d52528d0/attachment.sig>

From fuka at fuxoft.cz  Fri Feb 20 13:35:28 2004
From: fuka at fuxoft.cz (Frantisek Fuka)
Date: Fri, 20 Feb 2004 21:35:28 +0100
Subject: [Twisted-Python] "installing" Twisted?
In-Reply-To: <403667BB.5030207@twistedmatrix.com>
References: <Pine.LNX.4.44.0402201329060.24963-100000@klondike.cis.upenn.edu> <40365804.80104@fuxoft.cz> <403667BB.5030207@twistedmatrix.com>
Message-ID: <40366F90.2060909@fuxoft.cz>

Christopher Armstrong wrote:
> However! Before you forget this topic: you said you had a problem with 
> running setup.py, so a real bug report would be very much appreciated.

I must say the offending server is in VERY bad shape installation-wise 
and I plan to completely re-install it when my application is ready to 
deploy. There are missing libraries, partly-installed packages etc... I 
"inherited" this server, everything was installed by someone else and I 
must confess I am not very much of Linux guru.

Because of this, it's perfectly feasible that it wasn't Twisted's error 
and even in the case it was, I am not brave enough to try to re-install 
twisted now, when I have it running and I can test the application I am 
developing...

-- 
                                          Frantisek Fuka
(yes, that IS my real name)
(and it's pronounced "Fran-tjee-shek Foo-kah")
----------------------------------------------------
My E-mail:   fuka at fuxoft.cz
My Homepage: http://www.fuxoft.cz
My ICQ:      2745855



From alfred_salton at hotmail.com  Sun Feb 22 22:03:09 2004
From: alfred_salton at hotmail.com (Alfred Salton)
Date: Sun, 22 Feb 2004 22:03:09 -0700
Subject: [Twisted-Python] Installation assistance needed
Message-ID: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>

Can anyone point me to instructions for installation on RedHat 9? I 
can't find any real installation instructions. What am I supposed to do 
with a 'spec' file? Does an rpm package exist somewhere? I feel 
defeated before I've started.

Alfred
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2379 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20040222/320b195f/attachment-0002.bin>

From frank at rollingegg.net  Tue Feb 17 06:08:04 2004
From: frank at rollingegg.net (Frankie Chu)
Date: Tue, 17 Feb 2004 21:08:04 +0800
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <20040217022101.1298.19192.Mailman@twistedmatrix.com>
References: <20040217022101.1298.19192.Mailman@twistedmatrix.com>
Message-ID: <523E314C-614A-11D8-9350-0003938E77E2@rollingegg.net>

On 17 Feb 04, at 10:21 AM, twisted-python-request at twistedmatrix.com 
wrote:

> Message: 1
> Date: Mon, 16 Feb 2004 10:03:37 -0500
> To: twisted-python at twistedmatrix.com
> From: "David A. Leedom" <daleedom at hightowergroup.com>
> Subject: [Twisted-Python] Backup Agent
> Reply-To: twisted-python at twistedmatrix.com
>
> --=====================_580045343==.ALT
> Content-Type: text/plain; charset="us-ascii"; format=flowed
>
> OK Guys I Need your help.
>
> I own a small computer consulting firm and am struggling with the basic
> sales and marketing issues.  However, I think I have finally stumbled 
> onto
> a great "no brainer" idea:
>
>          A Remote Backup Service for Small businesses.
>
> Yes I know there are a bunch out their, but I am thinking of the 
> Hundreds
> of Businesses around my general geographic area who don't know how to 
> find
> them and who don't backup their data.  I would charge a monthly fee 
> for a
> given amount of space used ( no more than 500 Meg) and provide a 
> software
> that would backup and restore their data.
>
> My dilemma is that my margins would be to small to make it affordable 
> for
> me to resale someone else's software.  So....I would like to roll my
> own.  Python makes a lot of sense for many reasons that I don't need 
> to get
> into here.
>
> My struggle is that although I have been programming since the 
> mid-70s, I
> am new to Python and feel like a man groping around in the dark.  Also
> being new to Twisted it is like the room is full of chairs as well.  I 
> did
> get some sample code to work over the weekend, but I got a serious 
> brain
> cramp trying to figure it all out.
>
> The basic architecture that I am thinking of is client/server.  There 
> would
> be three basic applications running to make things work.  First, would 
> be
> an Agent program that does most of the work.  The Agent would run as a
> service on each computer being backed up.  Second would be a GUI 
> program
> running locally to control the agents.  Finally there would be a "Web
> Service" that received backup sets from each agent or a designated 
> master
> agent. The Web Service would handle authentication and other house 
> keeping
> things.
>
> Finally the Question!!!!
> There are many other details that I have in mind as well (using 
> patches to
> reduce size, compression, encryption...), but right now I am working on
> issues related to the communication between the GUI and Agents.  
> Assuming
> that I have one or more number of agents running on a network I want 
> to do
> a number of things.  1)  Have the GUI request that the agents identify
> themselves so I don't have to tell the GUI where they are.  2) 
> Transmit a
> catalog list of the file system to the GUI so I can build a TreeView 
> and
> pick which files to backup on each computer.  3)  Finally I may want to
> identify a "Master" agent that collects all the backups on the network 
> and
> transmits them as one session to the Web Service. This would allow for
> local "On Site" backups for fast restores due to normal computer 
> crashes
> and failures.
>
> 1.      What would you guys suggest I do to I get the GUI to ask all 
> the
> agents to identify themselves?
> 2.      What would be the best approach using twisted to transmit a 
> file
> system catalog across the local wire.  I was playing with some remote
> procedure calls over the weekend that seemed to work.  I am thinking I
> could create a class that would gather the local file system and send 
> it
> over the wire as one lump.
> 3.      If I am going to transmit a backup file (<500meg) over the 
> wire to
> another local computer what is the best Twisted approach to take?  Due 
> to
> WinXP security issues and the desire the run in a cross platform
> environment I don't want to rely on normal file shares.
>
> There are a hundred other questions running though my mind right now, 
> but
> this will due for now,
>
>
> Thanks for any help you can give,
>
> David A. Leedom
>
>
>
>
> The Hightower Group, Inc.
> Custom Software Solutions Designed To Fit Your Business Like A Glove.
> 165 West Airport Road/Lititz, PA 17543
> V:717-560-4002, 877-560-4002 x: 114
> F:717-560-2825
> www.hightowergroup.com
> --=====================_580045343==.ALT
> Content-Type: text/html; charset="us-ascii"
>
> <html>
> <body>
> OK Guys I Need your help.<br><br>
> I own a small computer consulting firm and am struggling with the basic
> sales and marketing issues.&nbsp; However, I think I have finally
> stumbled onto a great &quot;no brainer&quot; idea:&nbsp; <br><br>
> <x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>A Remote
> Backup Service for Small businesses.&nbsp; <br><br>
> Yes I know there are a bunch out their, but I am thinking of the 
> Hundreds
> of Businesses around my general geographic area who don't know how to
> find them and who don't backup their data.&nbsp; I would charge a 
> monthly
> fee for a given amount of space used ( no more than 500 Meg) and 
> provide
> a software that would backup and restore their data.<br><br>
> My dilemma is that my margins would be to small to make it affordable 
> for
> me to resale someone else's software.&nbsp; So....I would like to roll 
> my
> own.&nbsp; Python makes a lot of sense for many reasons that I don't 
> need
> to get into here.<br><br>
> My struggle is that although I have been programming since the 
> mid-70s, I
> am new to Python and feel like a man groping around in the dark.&nbsp;
> Also being new to Twisted it is like the room is full of chairs as
> well.&nbsp; I did get some sample code to work over the weekend, but I
> got a serious brain cramp trying to figure it all out.<br><br>
> The basic architecture that I am thinking of is client/server.&nbsp;
> There would be three basic applications running to make things
> work.&nbsp; First, would be an Agent program that does most of the
> work.&nbsp; The Agent would run as a service on each computer being
> backed up.&nbsp; Second would be a GUI program running locally to 
> control
> the agents.&nbsp; Finally there would be a &quot;Web Service&quot; that
> received backup sets from each agent or a designated master agent. The
> Web Service would handle authentication and other house keeping
> things.<br><br>
> <b>Finally the Question!!!!<br>
> </b>There are many other details that I have in mind as well (using
> patches to reduce size, compression, encryption...), but right now I am
> working on issues related to the communication between the GUI and
> Agents.&nbsp; Assuming that I have one or more number of agents running
> on a network I want to do a number of things.&nbsp; 1)&nbsp; Have the 
> GUI
> request that the agents identify themselves so I don't have to tell the
> GUI where they are.&nbsp; 2) Transmit a catalog list of the file system
> to the GUI so I can build a TreeView and pick which files to backup on
> each computer.&nbsp; 3)&nbsp; Finally I may want to identify a
> &quot;Master&quot; agent that collects all the backups on the network 
> and
> transmits them as one session to the Web Service. This would allow for
> local &quot;On Site&quot; backups for fast restores due to normal
> computer crashes and failures.&nbsp; <br><br>
> 1.<x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>What would you 
> guys
> suggest I do to I get the GUI to ask all the agents to identify
> themselves?<br>
> 2.<x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>What would be the
> best approach using twisted to transmit a file system catalog across 
> the
> local wire.&nbsp; I was playing with some remote procedure calls over 
> the
> weekend that seemed to work.&nbsp; I am thinking I could create a class
> that would gather the local file system and send it over the wire as 
> one
> lump. <br>
> 3.<x-tab>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</x-tab>If I am going to
> transmit a backup file (&lt;500meg) over the wire to another local
> computer what is the best Twisted approach to take?&nbsp; Due to WinXP
> security issues and the desire the run in a cross platform environment 
> I
> don't want to rely on normal file shares.<br><br>
> There are a hundred other questions running though my mind right now, 
> but
> this will due for now,<br><br>
> <br>
> Thanks for any help you can give,<br><br>
> David A. Leedom<br><br>
> <br><br>
> <x-sigsep><p></x-sigsep>
> The Hightower Group, Inc.<br>
> Custom Software Solutions Designed To Fit Your Business Like A
> Glove.<br>
> 165 West Airport Road/Lititz, PA 17543<br>
> V:717-560-4002, 877-560-4002 x: 114<br>
> F:717-560-2825<br>
> <a href="http://www.hightowergroup.com/" 
> eudora="autourl">www.hightowergroup.com</a>
> </body>
> </html>
>
> --=====================_580045343==.ALT--
>
>
>
> --__--__--
>
> Message: 2
> Date: Mon, 16 Feb 2004 18:23:03 +0100
> From: Michal Pasternak <michal at pasternak.w.lub.pl>
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] Backup Agent
> Reply-To: twisted-python at twistedmatrix.com
>
> David A. Leedom [Mon, Feb 16, 2004 at 10:03:37AM -0500]:
>> 1.      What would you guys suggest I do to I get the GUI to ask all 
>> the
>> agents to identify themselves?
>
> Well, that's a good question. In some app I did, I used machine's IP 
> address
> + some operating system info it run (sys.platform, os.uname) to build 
> a kind
> of machine identifier. You could as well generate some UID, then save 
> it,
> then send it together with machine's IP to identify it on server, by 
> hand.
>
> Using OS-specific procedures could help you with this.
>
>> 2.      What would be the best approach using twisted to transmit a 
>> file
>> system catalog across the local wire.  I was playing with some remote
>> procedure calls over the weekend that seemed to work.  I am thinking I
>> could create a class that would gather the local file system and send 
>> it
>> over the wire as one lump.
>
> Remote procedures have limit of 640 KB for their parameters (because 
> "640 KB
> should be enough to anyone"). You should use Pager and Collector.
>
>> 3.      If I am going to transmit a backup file (<500meg) over the 
>> wire to
>> another local computer what is the best Twisted approach to take?
>
> See above. Also, please remember, that memory issues matter. If you're
> paging the data (send small chunks), you should save them on the backup
> server, as they are received. If you are transfering a big file, 
> keeping all
> the data received in some buffer is a bad idea.
>
>
> --__--__--
>
> Message: 3
> Date: Mon, 16 Feb 2004 13:00:47 -0800
> To: Twisted <twisted-python at twistedmatrix.com>
> From: stephan <mailinglists at shechen.at>
> Subject: [Twisted-Python] p2p, gnutella
> Reply-To: twisted-python at twistedmatrix.com
>
>
>
> I am looking forward to add p2p functionality to my app. Does anybody 
> know
> what the current status of twisted's gnutella implementation is?
>
> There seems to have been a semi-finished implemention in 1.0.2alpha4 
> which
> I can't find in 1.1.1 anymore.
>
> I might also be willing to implement missing parts but I would need to 
> get
> a short briefing on how things are.
>
> thanks,
>
> _stephan
>
>
> --__--__--
>
> Message: 4
> Date: Mon, 16 Feb 2004 18:13:13 -0500
> To: peak at eby-sarna.com
> From: "Phillip J. Eby" <pje at telecommunity.com>
> Cc: zope3-dev at zope.org, twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] PEAK 0.5a3 released
> Reply-To: twisted-python at twistedmatrix.com
>
> After several months of feature creep, the third alpha release of PEAK 
> 0.5
> is now available for download at:
>
>     http://peak.telecommunity.com/dist/
>
> Some highlights of the changes since 0.5a2 include:
>
> * A simplified and consolidated binding API: there are now only four 
> kinds
> of bindings (Make, Obtain, Require, and Delegate) that provide a wider
> variety of functionality than the old API.  You can also now create 
> your
> own IRecipe or IComponentKey implementations for use with Make and 
> Obtain.
>
> * The 'n2' (namespace navigator) tool provides a handy, extensible 
> shell
> (with completion and history) for exploring PEAK naming systems and SQL
> connections.
>
> * A greatly enhanced configuration file parser, with lots of new
> convenience features such as [Import on Demand], [Named Services], and
> [Component Factories] sections, based on its new extensible parsing
> framework.  You can define new section types of your own, even from 
> inside
> an .ini file.
>
> * New configuration key features, such as multi-keys (similar to some 
> of
> Zope X3's "adaptergeddon" features), the ability to iterate over 
> defined
> keys in a hierarchy (useful for finding/registering various kinds of
> "plugins"), new convenience features for defining wildcard property 
> rules,
>
> * A new 'peak.events' framework that supports event sources, listeners,
> subscriptions, generator-based pseudothreads ("tasks"), scheduling, 
> and I/O
> events.  Using 'peak.events', you can write event-driven code in a more
> natural, sequential, "untwisted" style, but without giving up access to
> Twisted's many great features.  'peak.events' can use PEAK's built-in 
> event
> loop, or adapt a Twisted reactor for use as an event loop.  You can 
> also
> use Twisted's "Deferred" objects as event sources, which means you can 
> use
> them in your Tasks (pseudothreads).
>
> * A new 'peak.ddt' "document-driven testing" framework, similar in 
> form and
> function to the FIT ( http://fit.c2.com/ ) framework, but in Python and
> well-integrated with the rest of PEAK.  'peak.ddt' lets you write test 
> data
> as tables in HTML documents (created with Word, Open Office, Mozilla, 
> or
> virtually any other tool), and then view the results in your
> browser.  Correct results are highlighted in green, incorrect answers 
> are
> highlighted in red, and errors are highlighted in yellow, with a 
> small-font
> traceback added to the table cell.  It's a great way to do data-driven
> acceptance testing, or to manage a project's progress using example 
> data as
> part of a requirements document.
>
> * Many, many more features, both large and small, like a pre-forking
> multiprocess supervisor for FastCGI and other forking servers.  Quick
> access to documentation via the 'peak help' command, which uses pydoc 
> to
> display reference documentation.  Early versions of the 'peak.security'
> (access control), 'peak.web' (Zope X3-based web publishing), and
> 'peak.query' (declarative relational and conceptual queries w/SQL
> generation) packages.  The 'whenImported()' function that lets you 
> call a
> hook when a named module is first used.  "Mock" DBAPI and socket
> implementations for testing.  Hooks for "thunking" database-specific 
> SQL
> and functions.  And many, many more examples of unbelievably blatant
> feature creep!
>
> There is also now a nice "Hello World" introduction to PEAK available 
> at:
>
> http://peak.telecommunity.com/DevCenter/IntroToPeak
>
> that presents a guided tour of some of PEAK's "vertical" frameworks, 
> like
> command-line application support, database access, and so on.
>
> For more information about PEAK, and access to community resources
> including documentation, the Wiki, mailing list archives, IRC channel 
> logs,
> CVS access, and more, please visit:
>
> http://peak.telecommunity.com/
>
>
>
> --__--__--
>
> Message: 5
> To: twisted-python at twistedmatrix.com
> From: ralf at brainbot.com
> Date: Tue, 17 Feb 2004 02:05:41 +0100
> Subject: [Twisted-Python] [PATCH] nasty bug in 
> twisted.names.client.createResolver
> Reply-To: twisted-python at twistedmatrix.com
>
> The parameter variable 'hosts' gets overwritten by the import statement
> in createResolver. hosts.Resolver constructor is called with a module
> instead of a filename.
>
> - Ralf
>
> ===================================================================
> RCS file: /cvs/Twisted/twisted/names/client.py,v
> retrieving revision 1.45
> diff -u -r1.45 client.py
> --- twisted/names/client.py     4 Feb 2004 19:55:34 -0000       1.45
> +++ twisted/names/client.py     17 Feb 2004 01:01:53 -0000
> @@ -303,20 +303,20 @@
>          return p
>
>
> -def createResolver(servers = None, resolvconf = None, hosts = None):
> +def createResolver(servers = None, resolvconf = None, hostsfile = 
> None):
>      import resolve, cache, hosts, root
>      if platform.getType() == 'posix':
>          if resolvconf is None:
>              resolvconf = '/etc/resolv.conf'
> -        if hosts is None:
> -            hosts = '/etc/hosts'
> +        if hostsfile is None:
> +            hostsfile = '/etc/hosts'
>          theResolver = Resolver(resolvconf, servers)
> -        hostResolver = hosts.Resolver(hosts)
> +        hostResolver = hosts.Resolver(hostsfile)
>      else:
> -        if hosts is None:
> -            hosts = r'c:\windows\hosts'
> +        if hostsfile is None:
> +            hostsfile = r'c:\windows\hosts'
>          bootstrap = ThreadedResolver()
> -        hostResolver = hosts.Resolver(hosts)
> +        hostResolver = hosts.Resolver(hostsfile)
>          theResolver = root.bootstrap(bootstrap)
>
>      L = [hostResolver, cache.CacheResolver(), theResolver]
>
> -- 
> brainbot technologies ag
> boppstrasse 64 . 55118 mainz . germany
> fon +49 6131 211639-1 . fax +49 6131 211639-2
> http://brainbot.com/  mailto:ralf at brainbot.com
>
>
> --__--__--
>
> Message: 6
> Subject: Re: [Twisted-Python] [PATCH] nasty bug in
> 	twisted.names.client.createResolver
> From: Itamar Shtull-Trauring <itamar at itamarst.org>
> To: twisted-python at twistedmatrix.com
> Organization: http://itamarst.org
> Date: Mon, 16 Feb 2004 20:33:55 -0500
> Reply-To: twisted-python at twistedmatrix.com
>
> On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
>> The parameter variable 'hosts' gets overwritten by the import 
>> statement
>> in createResolver. hosts.Resolver constructor is called with a module
>> instead of a filename.
>
> Please add patches and bugs to twistedmatrix.com/bugs/
>
>
>
> --__--__--
>
> Message: 7
> Subject: Re: [Twisted-Python] Advice on doing thousands of 
> simultaneous UDP
> 	queries with Twisted...
> From: Itamar Shtull-Trauring <itamar at itamarst.org>
> To: twisted-python at twistedmatrix.com
> Organization: http://itamarst.org
> Date: Mon, 16 Feb 2004 20:40:06 -0500
> Reply-To: twisted-python at twistedmatrix.com
>
> On Mon, 2004-02-09 at 05:51, Mike C. Fletcher wrote:
>
>> Writing a simple asynchronous loop myself (poll on a simple socket, 
>> send
>> message from queue when writable, read one into other queue when
>> readable) allowed for doing a few thousand queries simultaneously), 
>> with
>> only a few dozen dropped messages.  However, with the Twisted 
>> equivalent
>> (UDPTransport with my simple protocol object), I was seeing huge drop
>> rates, so, gathering that Twisted isn't queueing up the UDP requests,
>
> Possibly we need some generic UDP queuing, rather than current system.
> Patches are welcome.
>
> -- 
> Itamar Shtull-Trauring    http://itamarst.org
> Looking for a job: http://itamarst.org/resume.html
>
>
>
> --__--__--
>
> Message: 8
> To: twisted-python at twistedmatrix.com
> From: ralf at brainbot.com
> Date: Tue, 17 Feb 2004 02:47:19 +0100
> Subject: [Twisted-Python] [PATCH] twisted.names.hosts not working 
> correct with getHostByName
> Reply-To: twisted-python at twistedmatrix.com
>
> Even with my prior patch I'm not able to use 
> twisted.names.client.getHostByName.
> Seems like twisted.names.hosts.Resolver calls itself with bad 
> parameters
> and even doesn't use the ip address it extracted from /etc/hosts. Also 
> the return
> value could not be handled by the code in 
> twisted.names.common.extractRecord.
> The following patch seems to solve those problems.
>
> - Ralf
>
>
>
>
> ===================================================================
> RCS file: /cvs/Twisted/twisted/names/hosts.py,v
> retrieving revision 1.14
> diff -u -r1.14 hosts.py
> --- twisted/names/hosts.py      19 Jul 2003 10:13:50 -0000      1.14
> +++ twisted/names/hosts.py      17 Feb 2004 01:45:44 -0000
> @@ -49,11 +49,11 @@
>
>
>      def query(self, query, timeout = None):
> -        return self._lookup(str(query.name), query.type, query.type, 
> timeout)
> +        return self._lookup(str(query.name), query.cls, query.type, 
> timeout)
>
>
>      def _lookup(self, name, cls, type, timeout):
> -        if cls != dns.IN or type != dns.A:
> +        if cls != dns.IN or (type != dns.A and type != 
> dns.ALL_RECORDS): # getHostByName passes type==dns.ALL_RECORDS. what 
> else do we need here?
>              return 
> defer.fail(failure.Failure(NotImplementedError(type, cls)))
>          return self.lookupAddress(
>              name, timeout
> @@ -64,7 +64,7 @@
>          res = searchFileFor(self.file, name)
>          if res:
>              return defer.succeed([
> -                [dns.RRHeader(name, dns.A, dns.IN, self.ttl)], (), ()
> +                [dns.RRHeader(name, dns.A, dns.IN, self.ttl, 
> dns.Record_A(res, self.ttl))], [], []
>              ])
>          return defer.fail(failure.Failure(dns.DomainError(name)))
>
> -- 
> brainbot technologies ag
> boppstrasse 64 . 55118 mainz . germany
> fon +49 6131 211639-1 . fax +49 6131 211639-2
> http://brainbot.com/  mailto:ralf at brainbot.com
>
>
> --__--__--
>
> Message: 9
> Date: Mon, 16 Feb 2004 22:47:47 -0300
> From: Daniel Henrique Debonzi <debonzi at gwyddion.com>
> To:  twisted-python at twistedmatrix.com
> Subject: [Twisted-Python] Client Prompt
> Reply-To: twisted-python at twistedmatrix.com
>
> Hi everybody,
>
> Maybe this is a very stupid question, but I realy couldn't find a way 
> to
> solve it by myself.
>
> Would be enough for my aplication if this example works.
>
> So, I want to have a client that read a string from the stdin and then
> send it to the server. Wich changes should I do in this code to this
> client work like a discrebed
>
> #################################################################
> from twisted.internet import reactor, protocol
>
> class EchoClient(protocol.Protocol):
>
>      def connectionMade(self):
> 	"""I don't want to write it here
> 	   I want to take data from stdin and send o server,
> 	   but were and how to do it? Too much dificult?
> 	"""
>          self.transport.write("hello, world!")
>
>      def dataReceived(self, data):
>          print data
>
>      def connectionLost(self, reason):
>          print "connection lost"
>          from twisted.internet import reactor
>          reactor.stop()
>
>
> class EchoFactory(protocol.ClientFactory):
>      protocol = EchoClient
>
>      def clientConnectionFailed(self, connector, reason):
>          print "Connection failed - goodbye!"
>          reactor.stop()
>
>      def clientConnectionLost(self, connector, reason):
>          print "Connection lost - goodbye!"
>          reactor.stop()
>
>
> def main():
>      f = EchoFactory()
>      reactor.connectTCP("localhost", 5555, f)
>      reactor.run()
>
> if __name__ == '__main__':
>      main()
>
> #################################################################
>
> Thanks for all
>
>
>
> -- 
> Daniel Henrique Debonzi  Linux user number 166903
> Gwyddion Embedded Free-Software Development
> www.gwyddion.com
> São Carlos, São Paulo
> Brazil
>
>
>
> --__--__--
>
> Message: 10
> To: twisted-python at twistedmatrix.com
> Subject: Re: [Twisted-Python] [PATCH] nasty bug in
>  twisted.names.client.createResolver
> From: ralf at brainbot.com
> Date: Tue, 17 Feb 2004 03:20:28 +0100
> Reply-To: twisted-python at twistedmatrix.com
>
> Itamar Shtull-Trauring <itamar at itamarst.org> writes:
>
>> On Mon, 2004-02-16 at 20:05, ralf at brainbot.com wrote:
>>> The parameter variable 'hosts' gets overwritten by the import 
>>> statement
>>> in createResolver. hosts.Resolver constructor is called with a module
>>> instead of a filename.
>>
>> Please add patches and bugs to twistedmatrix.com/bugs/
>>
>
> Lots of bug reports in the bug tracker have status 'unread'. That's
> not very motivating. Just committing this patch -even if it was wrong-
> would not make things worse, as the original code is definitely
> broken. But, I'll add it to the bugtracker tomorrow.
>
> - Ralf
>
> -- 
> brainbot technologies ag
> boppstrasse 64 . 55118 mainz . germany
> fon +49 6131 211639-1 . fax +49 6131 211639-2
> http://brainbot.com/  mailto:ralf at brainbot.com
>
>
>
> --__--__--
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> End of Twisted-Python Digest




From tv at tv.debian.net  Wed Feb 18 08:00:17 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Wed, 18 Feb 2004 17:00:17 +0200
Subject: [Twisted-Python] Re: [Twisted-web] twisted.internet.error.CannotListenError
In-Reply-To: <20040215225519.GA19840@home.puzzling.org>
References: <20040215224728.26716.qmail@web13705.mail.yahoo.com> <20040215225519.GA19840@home.puzzling.org>
Message-ID: <40337E01.5090109@tv.debian.net>

Mary Gardiner wrote:
>>I'm fairly new to Twisted and trying to get a twisted reactor to work with wxPython.  I'm trying
>>the perspective broker examples, and when I try to do:
>>    def OnFileitems0Menu(self, event):
>>        self.Close(true)
>>        reactor.stop()
>>
>>It shuts down the program fine, but then when I try to run it again I get:
>>
>>twisted.internet.error.CannotListenError: Couldn't listen on any:8800: (10048, 'Address already in
>>use').
>>
>>As an error.  I can manually stop the process and then it will work again, but I don't know how to
>>release the port when I shut down the program.
>>
>>Am I missing something obvious?  A search of the archives hasn't shown me any way out.

You are probably missing the existing (now broken) connections waiting
for timeout, as shown by "netstat -tn".

Shut down the clients cleanly, or just wait for the timeout.



From tv at tv.debian.net  Wed Feb 18 08:02:35 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Wed, 18 Feb 2004 17:02:35 +0200
Subject: [Twisted-Python] Backup Agent
In-Reply-To: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
References: <6.0.1.1.2.20040216080245.02af0dd0@mail.hightowergroup.com>
Message-ID: <40337E8B.6030509@tv.debian.net>

David A. Leedom wrote:
> I own a small computer consulting firm and am struggling with the basic 
> sales and marketing issues.  However, I think I have finally stumbled 
> onto a great "no brainer" idea: 
> 
>         A Remote Backup Service for Small businesses. 

You should probably look at rdiff-backup.



From maoy at cis.upenn.edu  Tue Feb 24 11:01:33 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Tue, 24 Feb 2004 13:01:33 -0500 (EST)
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>
Message-ID: <Pine.LNX.4.44.0402241259270.30333-100000@klondike.cis.upenn.edu>

I suggest you just install it from the source. Just one line command: 
python setup.py install

If you really feel like a rpm is necessary, I built one for twisted 1.1.0 
before, and it's available at

http://dharma.cis.upenn.edu/dist/Twisted-1.1.0-1tummy.i386.rpm


HTH

-- Yun


On Sun, 22 Feb 2004, Alfred Salton wrote:

> Can anyone point me to instructions for installation on RedHat 9? I 
> can't find any real installation instructions. What am I supposed to do 
> with a 'spec' file? Does an rpm package exist somewhere? I feel 
> defeated before I've started.
> 
> Alfred




From nbyoung at thuna.com  Tue Feb 24 13:12:19 2004
From: nbyoung at thuna.com (Norman B. Young)
Date: Tue, 24 Feb 2004 15:12:19 -0500
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>
References: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com>
Message-ID: <403BB023.8000408@thuna.com>

You don't need an RPM. Just download the tar ball, unpack it, and follow 
the ./INSTALL directions.

Alfred Salton wrote:
> Can anyone point me to instructions for installation on RedHat 9? I 
> can't find any real installation instructions. What am I supposed to do 
> with a 'spec' file? Does an rpm package exist somewhere? I feel defeated 
> before I've started.
> 
> Alfred




From dekonerding at lbl.gov  Tue Feb 24 13:30:49 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Tue, 24 Feb 2004 12:30:49 -0800
Subject: [Twisted-Python] oddness in gtk reactor compred to wx and plain reactor
Message-ID: <403BB479.9000709@lbl.gov>

Hi,

I have been experience a weird problem with the gtk reactor.  I've got a 
simple test case which seems to reproduce the problem, so I'm checking 
with the mailing list to understand if everything is going on properly.
Here's the test code.  I wasn't sure whether the log. calls are 
thread-safe, but I've noticed the same problem with
Python's logging package.  Using the wxPython or plain reactor seems to 
work as expected: messages from the TestThingy are spewed at about 
0.1/sec, while with gtk, messages only come every 2 seconds if at all.

import time, sys, logging

from twisted.internet import gtk2reactor
gtk2reactor.install()

## from wxPython.wx import *
## from twisted.internet import wxsupport


from twisted.internet import reactor

from twisted.python import threadable
threadable.init()

from twisted.python import log
log.startLogging(sys.stdout)

from twisted.internet import app
from twisted.manhole import telnet
from twisted.application import strports


## For testing with wx reactor
## class myWxApp(wxApp):
##     def OnInit(self):
##         return True


## mywxAppInstance = myWxApp(0)
## wxsupport.install(mywxAppInstance)

class TestThingy:
    def __init__(self):
        log.err("TestThingy created")

    def run(self):
        log.err("TestThingy run")
        for i in range(10):
            log.err("TestThingy message")
            time.sleep(0.1)
        log.err("TestThingy done")
       
       
class ThingyManager:
    def __init__(self):
        log.err("ThingyManager")
       
    def submitThingy(self):
        log.err("ThingyManager submitting")
        f = TestThingy()
        log.err("ThingyManager created")
        reactor.callInThread(f.run)
        log.err("ThingyManager calledInThread")

def timer(*args):
    log.err("Timer: %d" % time.time())
    reactor.callLater(1, timer)

log.err("Starting")
t = ThingyManager()
log.err("Starting timer")
reactor.callLater(0, timer)
log.err("Submitting transfer")
reactor.callLater(3, t.submitThingy)
log.err("Running reactor")
reactor.run()
## for starting the wx reactor
##reactor.run(installSignalHandlers=0)
log.err("Reactor done")





From james at james.id.au  Sun Feb 22 18:06:40 2004
From: james at james.id.au (James Gregory)
Date: Mon, 23 Feb 2004 12:06:40 +1100
Subject: [Twisted-Python] Problems running Twisted
In-Reply-To: <200402201104.06786.phil.hunt@tech.mrc.ac.uk>
References: <200402200948.32414.phil.hunt@tech.mrc.ac.uk>
	 <20040220100658.GA768@frobozz>
	 <200402201104.06786.phil.hunt@tech.mrc.ac.uk>
Message-ID: <1077498400.7824.4.camel@rachmaninoff>

On Fri, 2004-02-20 at 22:04, Phil Hunt wrote:
> On Friday 20 Feb 2004 10:06 am, Andrew Bennetts wrote:
> > On Fri, Feb 20, 2004 at 09:48:32AM +0000, Phil Hunt wrote:
> > > I'm trying to set up a (very simple) web server using Twisted.
> > > Python complains that it can't import twisted.web:
> > >
> > >    Traceback (most recent call last):
> > >      File "teg1.py", line 3, in ?
> > >        from twisted.web import server, resource
> > >    ImportError: No module named twisted.web
> > >
> > > I've previously installed Twisted by running:
> > >
> > >    $ python setup.py install
> > >
> > > which I thought would install all the modules and put them correctly
> > > in the PYTHONPATH (tell me if this isn't true).
> >
> > It should... what platform are you on?
> 
> Python 2.3.3 on Mandrake 9.1.

Mandrake 9.1 didn't ship with Python 2.3.3, so you're either running a
version that someone compiled (or otherwise installed covertly), or
you're actually running cooker. In the latter case, there's rpms of
Twisted available to you. Try this:

http://mirror.aarnet.edu.au/pub/mandrake-devel/cooker/i586/Mandrake/RPMS2/python-twisted-1.1.1-1mdk.noarch.rpm

(or a mirror near you).

However, I mirror the sentiments later in this thread about filing a
bug.

HTH,

James.





From david.richardson at axxim.net  Tue Feb 24 13:25:53 2004
From: david.richardson at axxim.net (David Richardson)
Date: Tue, 24 Feb 2004 13:25:53 -0700
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <403BB023.8000408@thuna.com>
References: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com> <403BB023.8000408@thuna.com>
Message-ID: <A4CFD791-6707-11D8-9CF0-0003934ECC9C@axxim.net>

Norman,

The ./INSTALL instructions are for a Debian apt-get installation only, 
unless I missed something. There is a reference to a .spec file, for 
rpm-based systems, but that is all. Sorry, I'm an application 
developer, not a system administrator. This is one area where improved 
documentation is needed. The 'python setup.py install' command is 
obvious, in hindsight, but if widespread adoption is a goal, nothing is 
ever 'obvious'.


On Feb 24, 2004, at 1:12 PM, Norman B. Young wrote:

> You don't need an RPM. Just download the tar ball, unpack it, and 
> follow the ./INSTALL directions.
>
> Alfred Salton wrote:
>> Can anyone point me to instructions for installation on RedHat 9? I 
>> can't find any real installation instructions. What am I supposed to 
>> do with a 'spec' file? Does an rpm package exist somewhere? I feel 
>> defeated before I've started.
>> Alfred
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>




From radix at twistedmatrix.com  Tue Feb 24 14:18:21 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 24 Feb 2004 16:18:21 -0500
Subject: [Twisted-Python] Installation assistance needed
In-Reply-To: <A4CFD791-6707-11D8-9CF0-0003934ECC9C@axxim.net>
References: <93640837-65BD-11D8-A37D-0003934ECC9C@hotmail.com> <403BB023.8000408@thuna.com> <A4CFD791-6707-11D8-9CF0-0003934ECC9C@axxim.net>
Message-ID: <403BBF9D.9030407@twistedmatrix.com>

David Richardson wrote:
> Norman,
> 
> The ./INSTALL instructions are for a Debian apt-get installation only, 
> unless I missed something.

You did.

> There is a reference to a .spec file, for 
> rpm-based systems, but that is all. Sorry, I'm an application developer, 
> not a system administrator. This is one area where improved 
> documentation is needed. The 'python setup.py install' command is 
> obvious, in hindsight, but if widespread adoption is a goal, nothing is 
> ever 'obvious'.

I've changed the INSTALL file to be more clear. It *did* tell you to use 
setup.py install, but in a confusing context.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040224/00190cf2/attachment.sig>

From mary-twisted at puzzling.org  Tue Feb 24 17:16:04 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 25 Feb 2004 11:16:04 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <E1AvmS0-0001D8-00@wolfwood>
References: <E1AvmS0-0001D8-00@wolfwood>
Message-ID: <20040225001604.GF27161@titus.home.puzzling.org>

On Tue, Feb 24, 2004, radix CVS wrote:
>  copyright="Copyright (c) 2000-2003 Matthew William Lefkowitz, all rights reserved."

Shouldn't this read 2000-2004 now?

-Mary



From radix at twistedmatrix.com  Tue Feb 24 17:42:46 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 24 Feb 2004 19:42:46 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <20040225001604.GF27161@titus.home.puzzling.org>
References: <E1AvmS0-0001D8-00@wolfwood> <20040225001604.GF27161@titus.home.puzzling.org>
Message-ID: <403BEF86.6030303@twistedmatrix.com>

Mary Gardiner wrote:
> On Tue, Feb 24, 2004, radix CVS wrote:
> 
>> copyright="Copyright (c) 2000-2003 Matthew William Lefkowitz, all rights reserved."
> 
> 
> Shouldn't this read 2000-2004 now?


I think the last time this was brought up, Glyph responded with 
something like, "With the way copyright law is going now, I won't lose 
copyright on this *for a million years*."

iow, it's not that big of a deal: with current copyright law, he still 
retains copyright until 2073, or something like that. :)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040224/0f24b532/attachment.sig>

From mary-twisted at puzzling.org  Tue Feb 24 17:55:08 2004
From: mary-twisted at puzzling.org (Mary Gardiner)
Date: Wed, 25 Feb 2004 11:55:08 +1100
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <403BEF86.6030303@twistedmatrix.com>
References: <E1AvmS0-0001D8-00@wolfwood> <20040225001604.GF27161@titus.home.puzzling.org> <403BEF86.6030303@twistedmatrix.com>
Message-ID: <20040225005508.GB30984@titus.home.puzzling.org>

On Tue, Feb 24, 2004, Christopher Armstrong wrote:
> Mary Gardiner wrote:
> >On Tue, Feb 24, 2004, radix CVS wrote:
> >
> > > copyright="Copyright (c) 2000-2003 Matthew William Lefkowitz, all
> > > rights reserved."
> >
> >Shouldn't this read 2000-2004 now?
> 
> I think the last time this was brought up, Glyph responded with 
> something like, "With the way copyright law is going now, I won't lose 
> copyright on this *for a million years*."

He and the inheritors of the right to exercise copyright, anyway. Until
the development of twisted.elixir, at least.

> iow, it's not that big of a deal: with current copyright law, he still 
> retains copyright until 2073, or something like that. :)

I thought the countdown was from his death, not from the creation of the
work. Or it will be in Australia anyway...

I wasn't suggesting this for legal reasons, simply for accuracy reasons.

-Mary



From radix at twistedmatrix.com  Tue Feb 24 18:01:32 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Tue, 24 Feb 2004 20:01:32 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <20040225005508.GB30984@titus.home.puzzling.org>
References: <E1AvmS0-0001D8-00@wolfwood> <20040225001604.GF27161@titus.home.puzzling.org> <403BEF86.6030303@twistedmatrix.com> <20040225005508.GB30984@titus.home.puzzling.org>
Message-ID: <403BF3EC.3050609@twistedmatrix.com>

Mary Gardiner wrote:
> On Tue, Feb 24, 2004, Christopher Armstrong wrote:
>
>>iow, it's not that big of a deal: with current copyright law, he still 
>>retains copyright until 2073, or something like that. :)
> 
> I thought the countdown was from his death, not from the creation of the
> work.

Uh... yes, of course. Of course. Glyph isn't dead. No siree. He's still 
got a long healthy life ahead of him, at the end of which the copyright 
will start counting down, and that won't be for a long time, 
certainly.... There definitely aren't any robotic imposters around here....

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040224/9c992391/attachment.sig>

From itamar at itamarst.org  Tue Feb 24 21:03:58 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 24 Feb 2004 23:03:58 -0500
Subject: [Twisted-Python] oddness in gtk reactor compred to wx and
	plain reactor
In-Reply-To: <403BB479.9000709@lbl.gov>
References: <403BB479.9000709@lbl.gov>
Message-ID: <1077681837.791.4.camel@sheriffpony>

Don't do  time.sleep() in the main Twisted thread. This totally blocks
*all* twisted code as twisted is single threaded, making scheduled
events run late, network events not be handled, etc..




From glyph at twistedmatrix.com  Tue Feb 24 22:18:38 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 25 Feb 2004 00:18:38 -0500
Subject: [Twisted-Python] Re: [Twisted-commits] Preparing for 1.2.0rc3
In-Reply-To: <403BF3EC.3050609@twistedmatrix.com>
References: <E1AvmS0-0001D8-00@wolfwood>
	 <20040225001604.GF27161@titus.home.puzzling.org>
	 <403BEF86.6030303@twistedmatrix.com>
	 <20040225005508.GB30984@titus.home.puzzling.org>
	 <403BF3EC.3050609@twistedmatrix.com>
Message-ID: <1077686318.3241.3.camel@localhost>

On Tue, 2004-02-24 at 20:01, Christopher Armstrong wrote:

> Uh... yes, of course. Of course. Glyph isn't dead. No siree. He's still 
> got a long healthy life ahead of him, at the end of which the copyright 
> will start counting down, and that won't be for a long time, 
> certainly.... There definitely aren't any robotic imposters around here....

CORRECT SIR
END OF LINE





From dekonerding at lbl.gov  Wed Feb 25 08:35:18 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Wed, 25 Feb 2004 07:35:18 -0800
Subject: [Twisted-Python] oddness in gtk reactor compred to wx and	plain
 reactor
In-Reply-To: <1077681837.791.4.camel@sheriffpony>
References: <403BB479.9000709@lbl.gov> <1077681837.791.4.camel@sheriffpony>
Message-ID: <403CC0B6.80408@lbl.gov>

Itamar Shtull-Trauring wrote:

>Don't do  time.sleep() in the main Twisted thread. This totally blocks
>*all* twisted code as twisted is single threaded, making scheduled
>events run late, network events not be handled, etc..
>  
>

Hi Itamar,

I'm actually only calling time.sleep() from other than the main thread- 
TestThingy is the only routine
that calls time.sleep, and it only does so when run from another thread 
via callInThread

I should point out a few more details:

1) The problem only occurs with the gtk reactor, not the wx or plain 
reactors.  It happens if I actually make a gtk GUI widget, or even if I 
don't.

2) The problem occurs even if I don't use time.sleep()-- anything 
exhibits the behavior (this is just to demonstrate the example)

3) If I hit control-C in the console about half-way through the test, it 
starts work normally- gtk.main() caches the signal, quits,
and then the plain reactor seems to engage (???)

I'm pretty sure my example (posted again below) is a valid one, can you 
please take a closer look?

import time, sys, logging

from twisted.internet import gtk2reactor
gtk2reactor.install()

## for testing with the wx reactor
## from wxPython.wx import *
## from twisted.internet import wxsupport


from twisted.python import threadable
threadable.init()
from twisted.internet import reactor


from twisted.python import log
log.startLogging(sys.stdout)

from twisted.internet import app
from twisted.manhole import telnet
from twisted.application import strports

## class MyFrame(wxFrame):
##     def __init__(self, parent, ID, title):
##         wxFrame.__init__(self, parent, ID, title, wxDefaultPosition, 
wxSize(300, 200))
##         menu = wxMenu()
##         menu.Append(wxID_EXIT, "E&xit", "Terminate the program")
##         menuBar = wxMenuBar()
##         menuBar.Append(menu, "&File");
##         self.SetMenuBar(menuBar)
##         EVT_MENU(self, wxID_EXIT,  self.DoExit)

##     def DoExit(self, event):
##         self.Close(true)
##         reactor.stop()


## class myWxApp(wxApp):

##     def OnInit(self):
##         frame = MyFrame(NULL, -1, "Hello, world")
##         frame.Show(true)
##         self.SetTopWindow(frame)
##         return true

class TestThingy:
    def __init__(self):
        log.err("TestThingy created")

    def run(self):
        log.err("TestThingy run")
        for i in range(10):
            log.err("TestThingy message")
            time.sleep(0.1)
        log.err("TestThingy done")
       
       
class ThingyManager:
    def __init__(self):
        log.err("ThingyManager")
       
    def submitThingy(self):
        log.err("ThingyManager submitting")
        f = TestThingy()
        log.err("ThingyManager created")
        reactor.callInThread(f.run)
        log.err("ThingyManager calledInThread")

def timer(*args):
    log.err("Timer: %d" % time.time())
    reactor.callLater(1, timer)

log.err("Starting")
t = ThingyManager()
log.err("Starting timer")
reactor.callLater(0, timer)
log.err("Submitting transfer")
reactor.callLater(3, t.submitThingy)
log.err("Running reactor")
reactor.run()
## for starting the wx reactor
## mywxAppInstance = myWxApp(0)
## wxsupport.install(mywxAppInstance)
## reactor.run(installSignalHandlers=0)
log.err("Reactor done")




From maoy at cis.upenn.edu  Wed Feb 25 21:08:58 2004
From: maoy at cis.upenn.edu (Yun Mao)
Date: Wed, 25 Feb 2004 23:08:58 -0500 (EST)
Subject: [Twisted-Python] ReconnectingFactory
In-Reply-To: <403CC0B6.80408@lbl.gov>
Message-ID: <Pine.LNX.4.44.0402252303590.8001-100000@klondike.cis.upenn.edu>

Hi,

  I tried to use the ReconnectingClientFactory for reconnecting purpose. I
found that if the protocol was connected by my ethernet, and got lost
later on by pulling out my ethernet cable, I couldn't get successful
reconnection through my newly enabled wireless card. However, if I put the
cable back and enable ethernet card, it reported success. Is this a
feature or a bug? Why? Thank you!

-- 
Yun






From itamar at itamarst.org  Wed Feb 25 21:12:38 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Wed, 25 Feb 2004 23:12:38 -0500
Subject: [Twisted-Python] ANN: Twisted 1.2.0
Message-ID: <1077768758.807.88.camel@sheriffpony>

Twisted is an event-driven networking framework for server and client
applications.

For more information, visit http://www.twistedmatrix.com, join the list
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python or
visit us on #twisted at irc.freenode.net.

The Twisted from Scratch tutorial is a good starting point for learning
Twisted: http://twistedmatrix.com/documents/howto/tutorial


What's New in 1.2.0
===================

- SFTP server implementation for the SSH server.

- Improved wxPython support.

- IMAPv4 enhancements and bug fixes.

- Allow disabling display of tracebacks in error web pages.

- ident protocol implementation (client and server).

- Support mapping arbitrary child FDs when running processes on POSIX.

- Initial SOAP client support (using SOAPpy).

- Partial download support for FTP client.

- Web framework now supports different handlers for different methods
(e.g. GET or POST).

- Coverage support in the trial testing framework.

- Bug fixes and documentation and feature enhancements.





From pf_moore at yahoo.co.uk  Thu Feb 26 07:22:43 2004
From: pf_moore at yahoo.co.uk (Paul Moore)
Date: Thu, 26 Feb 2004 14:22:43 +0000 (UTC)
Subject: [Twisted-Python] Twisted web proxy
Message-ID: <loom.20040226T151141-14@post.gmane.org>

I'm trying to implement a simple web proxy using Twisted. With 3 or 4 web-based 
apps on my machine (moin, roundup, PyDS, ...) I'd like to put them all behind a 
single server on port 80, for ease of access. I could install Apache and use 
ProxyPass[Reverse], something like this:

    ProxyPass         /moin/ http://localhost:8081/
    ProxyPassReverse  /moin/ http://localhost:8081/

    ProxyPass         /roundup/ http://localhost:8082/
    ProxyPassReverse  /roundup/ http://localhost:8082/

But that seems fairly heavyweight. I tried looking at proxy.py in the Twisted 
examples, and it sort-of does what I'm after, but seems to give inconsistent 
results (some proxied pages just don't appear), and the sample code doesn't log 
anything I can scan for problems (and I can't get it to - wherever I put the 
print statements seems to be wrong :-() I suspect that I'm mucking up attaching 
children (the example just proxies everything from the root, I want to hang the 
remote server "lower" in the tree), but I can't see how.

Has anyone got any code that does this sort of thing, that they'd be willing to 
share?

Thanks,
Paul.




From db3l at fitlinxx.com  Thu Feb 26 08:48:12 2004
From: db3l at fitlinxx.com (David Bolen)
Date: 26 Feb 2004 10:48:12 -0500
Subject: [Twisted-Python] Re: DeferredList.addDeferred behaviour
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz>
Message-ID: <uu11dalkz.fsf@fitlinxx.com>

Andrew Bennetts <andrew-twisted at puzzling.org> writes:

> It's not clear to me what the right behaviour here is -- if a DeferredList
> has some number of Deferreds that have all been called, then of course the
> DeferredList should be marked as called, too.  But if you then add an
> uncalled Deferred to it, that sounds like a bug.  I'd be inclined to make
> DeferredList.addDeferred raise an exception in this case -- "In the face of
> ambiguity, refuse the temptation to guess." (although perhaps a warning
> would be better for a release or two, for backwards compatibility)

Well, it's not clear to me that having a mixture of called and
uncalled in a DeferredList is necessarily inconsistent - at least not
until after the DeferredList has actually has had its first callback
assigned.  After all, even if you insert just uncalled Deferreds
initially, during the course of normal events you'll end up with a
mixture as some of the Deferreds fire and others haven't yet.

I do agree that adding an uncalled Deferred to a DeferredList after
that DeferredList has really fired (called actual callbacks) is a
problem.  I think the HowTo warns against this case though, but it
says to check via the called attribute, which of course this thread
seems to point out as potentially a problem.

> Can anyone offer reasons why addDeferred should stay?  Donovan -- CVS says
> you added it, can you remember why?  Is anyone using it?

I was until I saw this thread and figured out it probably wasn't going
to hold up the way I expected.  It was working for me now but that's
because the existing deferrable objects were returning Deferreds
already called (mostly through defer.succeed and defer.fail) as
placeholders for eventual remote versions, and thus when I was finally
adding the callbacks/errbacks to the DeferredList they were running
synchronously just fine.  But it looks like the problem that started
this thread would break that code when I started having uncalled
results as part of the DeferredList since the callbacks would still
get called as soon as they were added.

As a use case, my scenario is an upper level package function (that
itself returns a deferrable interface) that performs a function across
several target objects as part of its operation - sort of a deferrable
version of map.  I want to use the DeferredList to aggregate/process
the results into a single result, so I want to completely absorb the
individual deferreds.  It seemed to me that this should have been a good
fit for DeferredList.

Because DeferredList itself is just a callback and won't terminate the
original deferred chain (in particular, it doesn't stop the errback),
I also need to add a specific errback to each individual Deferred to
absorb any errors.  Without addDeferred I can't do this in a single loop.

For example, assuming that "func" is a deferrable method on a number
of objects held in an iterable "objs":

With addDeferred (the code I used to have):

    dl = defer.DeferredList([])
    for obj in objs:
        d = obj.func()
        dl.addDeferred(d)
        d.addErrback(lambda _:None)
    dl.addCallback(processResults)
    return dl

without addDeferred (the code I have now):

    deferreds = []
    for obj in objs:
        d = obj.func()
        deferreds.append(d)
    dl = defer.DeferredList([])

    for d in deferreds:
        d.addErrback(lambda _:None)

    dl.addCallback(processResults)
    return dl

Without addDeferred I need to aggregate the underlying deferreds
separately, but more importantly, I need a completely separate loop to
install the suppression errbacks, because that has to be done _after_
the Deferreds are stuck into the DeferredList or else that suppression
will stop the DeferredList from seeing the error.

Maybe not an extreme case, but at the time of writing it I thought
that this was specifically the sort of case that addDeferred was
perfect for.

Although if DeferredList were to grow a way to specify that it should
suppress errors once it has gathered them, I'd probably be just as
happy as having addDeferred fixed, since the separate loop for error
suppression bugs me more than the need to separately aggregate the
Deferreds together before creating the DeferredList.  Actually
suppressing errors might make me even happier, since needing to
suppress the errors separately (noted in the API documentation, but
not the HowTo), while making perfect sense to me now, took a while to
catch on to initially.

-- David





From foom at fuhm.net  Thu Feb 26 09:58:49 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 11:58:49 -0500
Subject: [Twisted-Python] Components
Message-ID: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>

So I want to merge the changes from Nevow that allow lazy adapter  
registration via string arguments to registerAdapter:
registerAdapter("nevow.freeform.StringRenderer","nevow.formless.String", 
"nevow.freeform.ITypedRenderer")

However, doing this necessarily means the removal of the implicit  
super-interface feature, where twisted automatically registers  
StringRenderer for all super-interfaces of ITypedRenderer. As there is  
no way to look up the super-interfaces of a string at registerAdapter  
time (without loading up the module), this feature cannot stay.

I also doubt that's actually used by anyone. I can't think of a reason  
why I'd want to do that. The test suite doesn't even test it: all tests  
pass after removing it. There is a test for the behavior of the  
components.superInterfaces function, but not for actually registering  
adapters.

Also, the current behavior is pretty much arbitrary and wrong:
 >>>>
from twisted.python.components import *

class IFoo(Interface):
   pass

class IBaz(IFoo):
   pass

class MyIFooAdapter(Adapter):
   pass

class MyIBazAdapter(Adapter):
   pass

registerAdapter(MyIBazAdapter, str, IBaz)
registerAdapter(MyIFooAdapter, str, IFoo)
<<<<
Results in:
 >>>>
Traceback (most recent call last):
   File "<stdin>", line 1, in ?
   File "twisted/python/components.py", line 214, in registerAdapter
     raise ValueError(
ValueError: an adapter (__main__.MyIBazAdapter) was already registered.
<<<<

However,
registerAdapter(MyIFooAdapter, str, IFoo)
registerAdapter(MyIBazAdapter, str, IBaz)
works fine.
Depending on the order of adapter registration seems quite fragile to  
me. The only proper way to handle this would be to have a concept of  
'depth' ala PyProtocols.

James




From radix at twistedmatrix.com  Thu Feb 26 10:09:34 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 12:09:34 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E284E.8040408@twistedmatrix.com>

James Y Knight wrote:
> So I want to merge the changes from Nevow that allow lazy adapter  
> registration via string arguments to registerAdapter:
> registerAdapter("nevow.freeform.StringRenderer","nevow.formless.String", 
> "nevow.freeform.ITypedRenderer")
> 
> However, doing this necessarily means the removal of the implicit  
> super-interface feature, where twisted automatically registers  
> StringRenderer for all super-interfaces of ITypedRenderer. As there is  
> no way to look up the super-interfaces of a string at registerAdapter  
> time (without loading up the module), this feature cannot stay.
> 
> I also doubt that's actually used by anyone. I can't think of a reason  
> why I'd want to do that. The test suite doesn't even test it: all tests  
> pass after removing it. There is a test for the behavior of the  
> components.superInterfaces function, but not for actually registering  
> adapters.

Maybe this was the dubious failure that I've heard rumoured in 
NewReality when last someone tried to implement this feature. It'd be 
really nice if glyph or whoever tried implementing it last would explain 
what exactly the backwards-incompatibility problem they ran into was.



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/31d54995/attachment.sig>

From glyph at twistedmatrix.com  Thu Feb 26 10:14:12 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 26 Feb 2004 12:14:12 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E284E.8040408@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com>
Message-ID: <1077815652.3234.109.camel@localhost>

On Thu, 2004-02-26 at 12:09, Christopher Armstrong wrote:

> Maybe this was the dubious failure that I've heard rumoured in 
> NewReality when last someone tried to implement this feature. It'd be 
> really nice if glyph or whoever tried implementing it last would explain 
> what exactly the backwards-incompatibility problem they ran into was.

I think James makes a compelling argument: if NewReality was the only
thing stopping this fix from going through, forget about it.

But still, make sure that the first version that changes this behaviour
bumps at least a minor version number - a major reason I've been afraid
of changes like this is that folks expect micro-versions to behave
_exactly_ the same.




From radix at twistedmatrix.com  Thu Feb 26 10:19:27 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 12:19:27 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077815652.3234.109.camel@localhost>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
Message-ID: <403E2A9F.908@twistedmatrix.com>

Glyph Lefkowitz wrote:
> I think James makes a compelling argument: if NewReality was the only
> thing stopping this fix from going through, forget about it.
> 
> But still, make sure that the first version that changes this behaviour
> bumps at least a minor version number - a major reason I've been afraid
> of changes like this is that folks expect micro-versions to behave
> _exactly_ the same.

Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
later :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/56df051e/attachment.sig>

From foom at fuhm.net  Thu Feb 26 12:16:39 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 14:16:39 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E2A9F.908@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com>
Message-ID: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 12:19 PM, Christopher Armstrong wrote:

> Glyph Lefkowitz wrote:
>> I think James makes a compelling argument: if NewReality was the only
>> thing stopping this fix from going through, forget about it.
>> But still, make sure that the first version that changes this 
>> behaviour
>> bumps at least a minor version number - a major reason I've been 
>> afraid
>> of changes like this is that folks expect micro-versions to behave
>> _exactly_ the same.
>
> Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
> later :-)

Anothing few things:
- Does getRegistry's context.get(AdapterRegistry, theAdapterRegistry) 
actually have a use? It seems like it might just be slowing down the 
process without any gain.
- Why hasn't AdapterRegistry.getAdapterClassWithInheritance been 
deprecated yet? Is it because Componentized.locateAdapterClass calls 
it? But then, why does Componentized.locateAdapterClass exist.
- What's Adapter.isuper? Yes it forwards itself but what *IS* it?
- The persist argument is kind of strange. It's a tristate with 3 
options: persist=None means lookup in the persistence table but don't 
add the newly created adapter to the table if one wasn't found, 
persist=False means don't lookup and don't add, and persist=True means 
lookup and add if necessary. Is that complication actually necessary? 
Also it doesn't seem to be documented.

James




From radix at twistedmatrix.com  Thu Feb 26 12:22:45 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 14:22:45 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E4785.7090903@twistedmatrix.com>

James Y Knight wrote:
> On Feb 26, 2004, at 12:19 PM, Christopher Armstrong wrote:
> 
>> Glyph Lefkowitz wrote:
>>
>>> I think James makes a compelling argument: if NewReality was the only
>>> thing stopping this fix from going through, forget about it.
>>> But still, make sure that the first version that changes this behaviour
>>> bumps at least a minor version number - a major reason I've been afraid
>>> of changes like this is that folks expect micro-versions to behave
>>> _exactly_ the same.
>>
>>
>> Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
>> later :-)
> 
> 
> Anothing few things:
> - Does getRegistry's context.get(AdapterRegistry, theAdapterRegistry) 
> actually have a use? It seems like it might just be slowing down the 
> process without any gain.

yeeees! I really like this feature. For example, people who want to 
override the way, say, a String input box is rendered for a formless UI 
rendered with gtk2form (freeform, too, probably), can implement an 
alternative IStringWidget implementor, put it in their own 
AdapterRegistry, and stick it on the context. Then their own widget will 
be used instead of the default, without touching anything in gtk2form.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/3b278058/attachment.sig>

From bob at redivi.com  Thu Feb 26 12:43:19 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 14:43:19 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 2:16 PM, James Y Knight wrote:

> On Feb 26, 2004, at 12:19 PM, Christopher Armstrong wrote:
>
>> Glyph Lefkowitz wrote:
>>> I think James makes a compelling argument: if NewReality was the only
>>> thing stopping this fix from going through, forget about it.
>>> But still, make sure that the first version that changes this 
>>> behaviour
>>> bumps at least a minor version number - a major reason I've been 
>>> afraid
>>> of changes like this is that folks expect micro-versions to behave
>>> _exactly_ the same.
>>
>> Cool! Sounds like a good idea. It just means 1.3 might be sooner than 
>> later :-)
>
> Anothing few things:
> - Does getRegistry's context.get(AdapterRegistry, theAdapterRegistry) 
> actually have a use? It seems like it might just be slowing down the 
> process without any gain.
> - Why hasn't AdapterRegistry.getAdapterClassWithInheritance been 
> deprecated yet? Is it because Componentized.locateAdapterClass calls 
> it? But then, why does Componentized.locateAdapterClass exist.
> - What's Adapter.isuper? Yes it forwards itself but what *IS* it?
> - The persist argument is kind of strange. It's a tristate with 3 
> options: persist=None means lookup in the persistence table but don't 
> add the newly created adapter to the table if one wasn't found, 
> persist=False means don't lookup and don't add, and persist=True means 
> lookup and add if necessary. Is that complication actually necessary? 
> Also it doesn't seem to be documented.

How about just migrating off of t.p.components and switching to 
PyProtocols?  The license is compatible, it has PEP-backing, it is a 
superset of what t.p.components does, has optional Pyrex acceleration, 
and is compatible with Interfaces from itself, t.p.components, and 
zope.components.  The default Interface implementation does not support 
the __call__ adaptation that we all know and love, but it is actually 
generic enough to allow it.

As a side note, PEAK's peak.util.imports.whenImported hooks, 
importString, and lazyModule might also be pretty useful to Twisted 
(among so many other things).

-bob




From golux at comcast.net  Thu Feb 26 12:47:26 2004
From: golux at comcast.net (Stephen C. Waterbury)
Date: Thu, 26 Feb 2004 14:47:26 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <403E4D4E.8070107@comcast.net>

Bob Ippolito wrote:

> How about just migrating off of t.p.components and switching to 
> PyProtocols?  [lots of good reasons ...]

+1

- Steve




From pje at telecommunity.com  Thu Feb 26 12:59:35 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 14:59:35 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>

At 02:43 PM 2/26/04 -0500, Bob Ippolito wrote:

>How about just migrating off of t.p.components and switching to 
>PyProtocols?  The license is compatible, it has PEP-backing, it is a 
>superset of what t.p.components does, has optional Pyrex acceleration, and 
>is compatible with Interfaces from itself, t.p.components, and 
>zope.components.  The default Interface implementation does not support 
>the __call__ adaptation that we all know and love, but it is actually 
>generic enough to allow it.

Yep, just subclass InterfaceClass and add a __call__ method that calls back 
to adapt() and you'd be all set.  One other benefit to PyProtocols is that 
you can track what interfaces an *instance* supports, independent of what 
its class supports.

The more controversial aspect, however, is transitive adaptation.  IIRC, 
some of the core Twisted developers consider implicit transitive adaptation 
to be dangerous and/or evil.  However, that could possibly also be dealt 
with in a protocols.Interface subclass by disabling the parts that support 
that.

There might be some other issues that could come up, but I'm definitely 
willing to try to "adapt" to Twisted's needs in these areas, especially if 
it means I could get rid of PyProtocols' wrapper code and wrapping tests 
for Twisted's existing interface class.  :)




From foom at fuhm.net  Thu Feb 26 13:09:16 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 15:09:16 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E4785.7090903@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com>
Message-ID: <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 2:22 PM, Christopher Armstrong wrote:
> yeeees! I really like this feature. For example, people who want to 
> override the way, say, a String input box is rendered for a formless 
> UI rendered with gtk2form (freeform, too, probably), can implement an 
> alternative IStringWidget implementor, put it in their own 
> AdapterRegistry, and stick it on the context. Then their own widget 
> will be used instead of the default, without touching anything in 
> gtk2form.

Do you like it enough to have ever used it? Because, it doesn't work 
usefully, AFAICT. You've made an entire new AdapterRegistry with 
entirely new adapterRegistry and  adapterPersistance dicts. So, you 
can't just override one adapter...Perhaps if there was an 
InheritingAdapterRegistry, or an copy method on AdapterRegistry...

But really, what's the point? You can always make a subtype of 
IStringWidget..

This page 
<http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
describes how one would do context-specific protocols with PyProtocols, 
which *doesn't* seem to allow multiple registries. Basically, it seems 
to say: use a per-instance subprotocol. It may not be directly 
applicable to twisted, because of the lack of chained adaptation (A->B 
and B->C gives you A->C automatically), but it does seem to me like a 
nice way to go about it.

James




From radix at twistedmatrix.com  Thu Feb 26 13:14:37 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 15:14:37 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E53AD.2010108@twistedmatrix.com>

James Y Knight wrote:
> But really, what's the point? You can always make a subtype of 
> IStringWidget..
> 
> This page 
> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
> describes how one would do context-specific protocols with PyProtocols, 
[etc]

I'm fine with using PyProtocols, but what did you mean about creating a 
subtype of IStringWidget?


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/c8ce3cc8/attachment.sig>

From foom at fuhm.net  Thu Feb 26 13:17:31 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 15:17:31 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 2:43 PM, Bob Ippolito wrote:
> How about just migrating off of t.p.components and switching to 
> PyProtocols?  The license is compatible, it has PEP-backing, it is a 
> superset of what t.p.components does, has optional Pyrex acceleration, 
> and is compatible with Interfaces from itself, t.p.components, and 
> zope.components.  The default Interface implementation does not 
> support the __call__ adaptation that we all know and love, but it is 
> actually generic enough to allow it.
>
> As a side note, PEAK's peak.util.imports.whenImported hooks, 
> importString, and lazyModule might also be pretty useful to Twisted 
> (among so many other things).

And, while PyProtocols doesn't seem to support any sort of lazy adapter 
registration, it would probably be doable via a framework built on top 
of whenImported.

James




From radix at twistedmatrix.com  Thu Feb 26 13:22:15 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 15:22:15 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E5577.5010002@twistedmatrix.com>

James Y Knight wrote:
> This page 
> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
> describes how one would do context-specific protocols with PyProtocols, 
> which *doesn't* seem to allow multiple registries. Basically, it seems 
> to say: use a per-instance subprotocol. It may not be directly 
> applicable to twisted, because of the lack of chained adaptation (A->B 
> and B->C gives you A->C automatically), but it does seem to me like a 
> nice way to go about it.

Hmm... I'm reading that page, but I can't tell if it requires the 
framework code to do special things to support context-specific 
adapters. If it does, is there any way to implement context-specific 
adapters that _don't_ require framework-code to know about them? i.e., 
so plain old adaptation calls will look in the context for adapters?

But yeah, if PyProtocols does everything we need and there's a good 
chance it will support our future crazy ideas, I think it's a good idea 
to switch. We'd probably wanna bump to 2.0 for such a switch. maybe?

Of course, IIRC glyph mentioned it being slow, and I think he doesn't 
like the implicit adaptation. ?


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/7f8f879f/attachment.sig>

From radix at twistedmatrix.com  Thu Feb 26 13:28:52 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 15:28:52 -0500
Subject: [Twisted-Python] PYCON ATTENDERS!
Message-ID: <403E5704.3080100@twistedmatrix.com>

If you plan on coming to a Twisted-related sprint, *PLEASE* add your 
name to the wiki page at

http://www.python.org/cgi-bin/moinmoin/TwistedSprint

If you can't do that, at least reply to this message stating your intent 
to attend.

The PyCon organizers need to know how many people are coming.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/526490f7/attachment.sig>

From parez at ivsn.com  Wed Feb 25 03:42:19 2004
From: parez at ivsn.com (Paul Reznicek)
Date: Wed, 25 Feb 2004 11:42:19 +0100
Subject: [Twisted-Python] Typo in /twisted/test/test_enterprise.py - Twisted 1.2 RC2
Message-ID: <403C7C0B.5060108@ivsn.com>

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20040225/e40c5993/attachment.html>

From tv at tv.debian.net  Wed Feb 25 08:31:42 2004
From: tv at tv.debian.net (Tommi Virtanen)
Date: Wed, 25 Feb 2004 17:31:42 +0200
Subject: [Twisted-Python] Advice on doing thousands of simultaneous UDP
 queries with Twisted...
In-Reply-To: <40276641.30300@rogers.com>
References: <40276641.30300@rogers.com>
Message-ID: <403CBFDE.6040206@tv.debian.net>

Mike C. Fletcher wrote:
> Writing a simple asynchronous loop myself (poll on a simple socket, send 
> message from queue when writable, read one into other queue when 
> readable) allowed for doing a few thousand queries simultaneously), with 

A word of warning here. Nothing prevents your outgoing socket from
claiming writeability all the time, and the OS from dropping your
packets due to lack of buffer space. UDP just isn't reliable. Been
there, got the T-shirt.

You might be able to do some hacks with SIOCOUTQ, but even that
depends on the OS. IIRC on linux 2.4 it's not useful for UDP.

Your best course of action is to avoid bursts. Here's a nice and simple
algorithm: use a token bucket filter just like suggested elsewhere in
this thred, but add tokens both per time and per received responses.

Don't actually use the TBF as a filter, or even queue packets before it;
use it to see when you should be generating more requests and when not.
As long as there are tokens in bucket, generate reply and send it. When
bucket is empty, return and try again later. With reactor.callLater(),
add tokens to bucket and do the above processing. When receiving a
packet, add a token to bucket and do the above processing.

The more you get replies, the more work gets done; dropped packets slow
things down, as they should. Time-based token adding is there mostly
to be robust against packet loss; in normal case replies should
be the ones filling the bucket. The trick is to continue work as soon as
possible, based on replies (instead of waiting for all n request to
complete before continuing, or until a timer expires).



From bob at redivi.com  Thu Feb 26 13:35:27 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 15:35:27 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com> <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <4F9B46FE-689B-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 3:17 PM, James Y Knight wrote:

> On Feb 26, 2004, at 2:43 PM, Bob Ippolito wrote:
>> How about just migrating off of t.p.components and switching to 
>> PyProtocols?  The license is compatible, it has PEP-backing, it is a 
>> superset of what t.p.components does, has optional Pyrex 
>> acceleration, and is compatible with Interfaces from itself, 
>> t.p.components, and zope.components.  The default Interface 
>> implementation does not support the __call__ adaptation that we all 
>> know and love, but it is actually generic enough to allow it.
>>
>> As a side note, PEAK's peak.util.imports.whenImported hooks, 
>> importString, and lazyModule might also be pretty useful to Twisted 
>> (among so many other things).
>
> And, while PyProtocols doesn't seem to support any sort of lazy 
> adapter registration, it would probably be doable via a framework 
> built on top of whenImported.

Been there, done that, got the t-shirt.

Yes, it's easy.

-bob




From bob at redivi.com  Thu Feb 26 13:41:01 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 15:41:01 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E5577.5010002@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net> <403E5577.5010002@twistedmatrix.com>
Message-ID: <1717F124-689C-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 3:22 PM, Christopher Armstrong wrote:

> James Y Knight wrote:
>> This page 
>> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
>> describes how one would do context-specific protocols with 
>> PyProtocols, which *doesn't* seem to allow multiple registries. 
>> Basically, it seems to say: use a per-instance subprotocol. It may 
>> not be directly applicable to twisted, because of the lack of chained 
>> adaptation (A->B and B->C gives you A->C automatically), but it does 
>> seem to me like a nice way to go about it.
>
> Hmm... I'm reading that page, but I can't tell if it requires the 
> framework code to do special things to support context-specific 
> adapters. If it does, is there any way to implement context-specific 
> adapters that _don't_ require framework-code to know about them? i.e., 
> so plain old adaptation calls will look in the context for adapters?
>
> But yeah, if PyProtocols does everything we need and there's a good 
> chance it will support our future crazy ideas, I think it's a good 
> idea to switch. We'd probably wanna bump to 2.0 for such a switch. 
> maybe?
>
> Of course, IIRC glyph mentioned it being slow, and I think he doesn't 
> like the implicit adaptation. ?

Did he benchmark it?  Last I checked, t.p.components and january 
molasses are neck in neck ;)  PyProtocols has written-in-C code for 
acceleration, I bet it wins, even though it does do more work (which I 
believe happens *up front*, so doesn't really affect runtime 
performance) with transitive adaptation.

-bob




From dp at twistedmatrix.com  Thu Feb 26 13:42:50 2004
From: dp at twistedmatrix.com (Donovan Preston)
Date: Thu, 26 Feb 2004 15:42:50 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com> <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <57C41DD6-689C-11D8-83A5-000A95864FC4@twistedmatrix.com>

On Feb 26, 2004, at 3:17 PM, James Y Knight wrote:

> On Feb 26, 2004, at 2:43 PM, Bob Ippolito wrote:
>> How about just migrating off of t.p.components and switching to 
>> PyProtocols?  The license is compatible, it has PEP-backing, it is a 
>> superset of what t.p.components does, has optional Pyrex 
>> acceleration, and is compatible with Interfaces from itself, 
>> t.p.components, and zope.components.  The default Interface 
>> implementation does not support the __call__ adaptation that we all 
>> know and love, but it is actually generic enough to allow it.
>>
>> As a side note, PEAK's peak.util.imports.whenImported hooks, 
>> importString, and lazyModule might also be pretty useful to Twisted 
>> (among so many other things).
>
> And, while PyProtocols doesn't seem to support any sort of lazy 
> adapter registration, it would probably be doable via a framework 
> built on top of whenImported.

Switching Nevow to PyProtocols would have been my first choice. Since I 
didn't have the time to learn it, and didn't feel like introducing the 
additional dependency at the time, I hacked t.p.c into nevow.compy so 
that I could prevent t.p.c's "import the world" behavior which was 
detrimental to nevow. Unfortunately this means you have to now use 
*two* "global" component registries when you use Nevow.

I am +1000 with using PyProtocols for Nevow since it would reduce my 
headaches. I think that a global component registry is the one central 
important feature of a components system, making the current situation 
less than ideal. twisted.python.components wasn't flexible enough to do 
what I needed to do in Nevow but PyProtocols is, and supports more 
useful things like protocolForURI which will be necessary once people 
start designing interfaces that are useful outside of just one project.

I am less excited about introducing a dependency into Nevow. It would 
be nice if we could distribute PyProtocols in the same tarball as Nevow 
and only install it if needed.

dp




From itamar at itamarst.org  Thu Feb 26 13:44:49 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 26 Feb 2004 15:44:49 -0500
Subject: [Twisted-Python] PYCON ATTENDERS!
In-Reply-To: <403E5704.3080100@twistedmatrix.com>
References: <403E5704.3080100@twistedmatrix.com>
Message-ID: <1077828289.789.288.camel@sheriffpony>

On Thu, 2004-02-26 at 15:28, Christopher Armstrong wrote:

> The PyCon organizers need to know how many people are coming.

And specifically from what dates.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From bob at redivi.com  Thu Feb 26 14:11:08 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 16:11:08 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E5577.5010002@twistedmatrix.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net> <403E5577.5010002@twistedmatrix.com>
Message-ID: <4BA449B0-68A0-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 3:22 PM, Christopher Armstrong wrote:

> James Y Knight wrote:
>> This page 
>> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
>> describes how one would do context-specific protocols with 
>> PyProtocols, which *doesn't* seem to allow multiple registries. 
>> Basically, it seems to say: use a per-instance subprotocol. It may 
>> not be directly applicable to twisted, because of the lack of chained 
>> adaptation (A->B and B->C gives you A->C automatically), but it does 
>> seem to me like a nice way to go about it.
>
> Hmm... I'm reading that page, but I can't tell if it requires the 
> framework code to do special things to support context-specific 
> adapters. If it does, is there any way to implement context-specific 
> adapters that _don't_ require framework-code to know about them? i.e., 
> so plain old adaptation calls will look in the context for adapters?

I think that all of the cases where Twisted is using contextual 
adaptation are better solved by peak.binding anyway.. in the few, if 
any, cases where peak.binding is not better, then the context-specific 
adapters in the previously mentioned documentation should be enough to 
do it.

In any case, because of __conform__, __adapt__, etc. you can really do 
Whatever You Want with PyProtocols.. even if that means implementing 
the awkward to use component registry stack junk :)

-bob




From dp at twistedmatrix.com  Thu Feb 26 14:28:40 2004
From: dp at twistedmatrix.com (Donovan Preston)
Date: Thu, 26 Feb 2004 16:28:40 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <4BA449B0-68A0-11D8-8DBD-000A95686CD8@redivi.com>
References: <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <403E4785.7090903@twistedmatrix.com> <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net> <403E5577.5010002@twistedmatrix.com> <4BA449B0-68A0-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <BF23CA94-68A2-11D8-83A5-000A95864FC4@twistedmatrix.com>

On Feb 26, 2004, at 4:11 PM, Bob Ippolito wrote:

>
> On Feb 26, 2004, at 3:22 PM, Christopher Armstrong wrote:
>
>> James Y Knight wrote:
>>> This page 
>>> <http://peak.telecommunity.com/protocol_ref/protocols-context.html> 
>>> describes how one would do context-specific protocols with 
>>> PyProtocols, which *doesn't* seem to allow multiple registries. 
>>> Basically, it seems to say: use a per-instance subprotocol. It may 
>>> not be directly applicable to twisted, because of the lack of 
>>> chained adaptation (A->B and B->C gives you A->C automatically), but 
>>> it does seem to me like a nice way to go about it.
>>
>> Hmm... I'm reading that page, but I can't tell if it requires the 
>> framework code to do special things to support context-specific 
>> adapters. If it does, is there any way to implement context-specific 
>> adapters that _don't_ require framework-code to know about them? 
>> i.e., so plain old adaptation calls will look in the context for 
>> adapters?
>
> I think that all of the cases where Twisted is using contextual 
> adaptation are better solved by peak.binding anyway.. in the few, if 
> any, cases where peak.binding is not better, then the context-specific 
> adapters in the previously mentioned documentation should be enough to 
> do it.
>
> In any case, because of __conform__, __adapt__, etc. you can really do 
> Whatever You Want with PyProtocols.. even if that means implementing 
> the awkward to use component registry stack junk :)

And as James pointed out in another message, the context-aware registry 
currently implemented in t.p.c does not seem to do chaining, so radix' 
use case would not be implementable right now... so it would be work to 
do it the way he wants, whether it's fixing up t.p.c to do it or 
PyProtocols.

dp




From pje at telecommunity.com  Thu Feb 26 14:44:30 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 16:44:30 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <57C41DD6-689C-11D8-83A5-000A95864FC4@twistedmatrix.com>
References: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
 <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>

At 03:42 PM 2/26/04 -0500, Donovan Preston wrote:
>I am less excited about introducing a dependency into Nevow. It would be 
>nice if we could distribute PyProtocols in the same tarball as Nevow and 
>only install it if needed.

The (dual PSF/ZPL) license permits that.  And, PyProtocols, is getting 
pretty stable, so it's not like you'd be updating it every day.

But naturally, working on dependency support for distutils seems to be an 
Idea Whose Time Is Coming.  There was a recent Zope3-Dev thread about such 
issues, although it was more specific to bundling subsets of the Zope3 
system, rather than bundling third-party packages.




From pje at telecommunity.com  Thu Feb 26 15:06:09 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 17:06:09 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1717F124-689C-11D8-8DBD-000A95686CD8@redivi.com>
References: <403E5577.5010002@twistedmatrix.com>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E4785.7090903@twistedmatrix.com>
 <A77B3CA8-6897-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E5577.5010002@twistedmatrix.com>
Message-ID: <5.1.1.6.0.20040226165714.02a844c0@telecommunity.com>

At 03:41 PM 2/26/04 -0500, Bob Ippolito wrote:
>PyProtocols has written-in-C code for acceleration, I bet it wins, even 
>though it does do more work (which I believe happens *up front*, so 
>doesn't really affect runtime performance) with transitive adaptation.

Adapter lookup time in PyProtocols is roughly equivalent to 5 attribute 
lookups: __conform__, __adapt__, __class__, __mro__ or __bases__, and 
finally the adapter itself.  All of the transitive computation occurs up 
front, so the actual adapter lookup consists of looking up each class in 
the adaptee's __mro__ in a single dictionary.  (IOW, it's basically the 
same as a Python attribute lookup, which walks the __mro__ and does a 
dictionary lookup for each base class until the attribute is 
found.)  Adapter execution time is of course dependent on what the adapter 
does.  :)

The C code achieved about a 2-4x speedup over pure Python, mainly by 
cutting out function call and loop overhead, not by changing the 
fundamental algorithm, which can't really be improved upon without making 
assumptions I didn't want to make.  For example, if I were willing to 
assume that classes would never have their __bases__ or __mro__ changed, I 
could cache lookup results and thus occasionally save a few dictionary 
lookups.  However, for a general-purpose Python tool, I thought it better 
to support as much of Python's dynamic nature as practical.  (I *do* assume 
that protocol relationships are not dynamic, however.)




From bob at redivi.com  Thu Feb 26 15:32:01 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 17:32:01 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
References: <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com> <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
Message-ID: <98B6152A-68AB-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 4:44 PM, Phillip J. Eby wrote:

> At 03:42 PM 2/26/04 -0500, Donovan Preston wrote:
>> I am less excited about introducing a dependency into Nevow. It would 
>> be nice if we could distribute PyProtocols in the same tarball as 
>> Nevow and only install it if needed.
>
> The (dual PSF/ZPL) license permits that.  And, PyProtocols, is getting 
> pretty stable, so it's not like you'd be updating it every day.
>
> But naturally, working on dependency support for distutils seems to be 
> an Idea Whose Time Is Coming.  There was a recent Zope3-Dev thread 
> about such issues, although it was more specific to bundling subsets 
> of the Zope3 system, rather than bundling third-party packages.

Yeah, the dependency/package management stuff is also brought up every 
so often on the distutils-sig and pythonmac-sig .. the problem is that 
nobody wants to actually hack on the nasty distutils source to finish 
the work.. except maybe amk :)

-bob




From glyph at twistedmatrix.com  Thu Feb 26 15:56:23 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 26 Feb 2004 17:56:23 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
Message-ID: <1077836183.3688.137.camel@localhost>

On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
> At 02:43 PM 2/26/04 -0500, Bob Ippolito wrote:
> 
> >How about just migrating off of t.p.components and switching to 
> >PyProtocols?  The license is compatible, it has PEP-backing, it is a 
> >superset of what t.p.components does, has optional Pyrex acceleration, and 
> >is compatible with Interfaces from itself, t.p.components, and 
> >zope.components.  The default Interface implementation does not support 
> >the __call__ adaptation that we all know and love, but it is actually 
> >generic enough to allow it.
> 
> Yep, just subclass InterfaceClass and add a __call__ method that calls back 
> to adapt() and you'd be all set.  One other benefit to PyProtocols is that 
> you can track what interfaces an *instance* supports, independent of what 
> its class supports.

Would you consider adding this to PyProtocols directly?  If we're going
to maintain a component system as part of Twisted, I would like to at
least get the benefit of having full control over the component system
within Twisted.  I don't want to have some people using PyProtocols and
others using PyProtocols+TwistedHacks.

There are a lot of features I'd add to Twisted's component system if I
had time, such as:

	- implicit context-dependent location of closest running t.a.service
services by interface
	- interface-based context (moshez's context trick)
	- automatic generation of interfaces from any class
	- IComponentized
	- context / interface based log separations

And of course, integrating foom's string-based components would be great
too.  There is a lot of friction even to add something like this to
Twisted.  I imagine that adding something like this to PyProtocols, with
potentially more projects out there depending on the exact specifics of
all its semantics, would be even worse.

The other alternative is to add a bunch of specific hacks to PyProtocols
that get loaded only when Twisted gets loaded, which could potentially
introduce compatibility problems with other PyProtocols-using code,
which would sort of invalidate the whole point of using a common
components system in the first place.

Then we have the issue of the PyProtocols dependency; dependency
management can be quite hairy on windows.

> The more controversial aspect, however, is transitive adaptation.  IIRC, 
> some of the core Twisted developers consider implicit transitive adaptation 
> to be dangerous and/or evil.  However, that could possibly also be dealt 
> with in a protocols.Interface subclass by disabling the parts that support 
> that.

Before veering off into this, I'd like to retract any comments about
performance.  I tried pyprotocols a while ago, on some simple cases, and
it was pretty slow compared to Twisted's dirt-simple code.  I don't
think I was using the C code path, but it was more than a 2-4x
difference at the time.

I will test again with more reasonable cases before saying anything more
specific.  I bet Twisted has gotten slower and PyProtocols has gotten
faster since then, though.

Parts of PyProtocols do strike me as dangerous, evil, and overcomplex,
though :)  In particular,

http://peak.telecommunity.com/protocol_ref/proto-implication.html

The idea of passing numeric priorities for different implementations has
always seemed deeply wrong to me.  I have worked with one or two systems
like this in the past (some MUD code in C++) where, inevitably, someone
will want to make the 'real' default adapter for interface X; then
someone else will want to make the 'really real' default adapter. 
Different developers will eventually keep trying to write comparison
methods that leapfrog each other backwards to get to the correct result
for last-most-from-greater-than-everything, which turns into a
bug-ridden mess (and it's never really clear who should be "winning"
this race to be the final overrider anyway).

More importantly I don't really understand if that's in fact what the
'depth' value is used for, because my eyes glaze over halfway through
the above web page :)  PyProtocols feels to me like it's gone out of
even the upper levels of abstraction that the Twisted team is used to
inhabiting, straight into the Zopeosphere... 4000 lines of code related
to components, whereas t.p.components has 300?  It worries me.

Maybe I'm alone in these concerns, though.  Does anyone else feel that
depending on PyProtocols would increase the learning curve for Twisted
even more?  Or is this common knowledge in the Python community that
could be leveraged to actually make the curve shallower?  I can
certainly learn to wrap my head around the whole thing if nobody else
has trouble with it :)

> There might be some other issues that could come up, but I'm definitely 
> willing to try to "adapt" to Twisted's needs in these areas, especially if 
> it means I could get rid of PyProtocols' wrapper code and wrapping tests 
> for Twisted's existing interface class.  :)

This is clearly something that we need to talk about more.  As many
silly disagreements about design as I can come up with, a common
components system would be beneficial to everyone involved.  Are you
coming to PyCon? :)




From pje at telecommunity.com  Thu Feb 26 15:58:54 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 17:58:54 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <98B6152A-68AB-11D8-8DBD-000A95686CD8@redivi.com>
References: <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
 <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <072A45F3-6894-11D8-8DBD-000A95686CD8@redivi.com>
 <CE312D0C-6898-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226164137.02deb020@telecommunity.com>
Message-ID: <5.1.1.6.0.20040226175056.023ea240@telecommunity.com>

At 05:32 PM 2/26/04 -0500, Bob Ippolito wrote:

>On Feb 26, 2004, at 4:44 PM, Phillip J. Eby wrote:
>
>>At 03:42 PM 2/26/04 -0500, Donovan Preston wrote:
>>>I am less excited about introducing a dependency into Nevow. It would be 
>>>nice if we could distribute PyProtocols in the same tarball as Nevow and 
>>>only install it if needed.
>>
>>The (dual PSF/ZPL) license permits that.  And, PyProtocols, is getting 
>>pretty stable, so it's not like you'd be updating it every day.
>>
>>But naturally, working on dependency support for distutils seems to be an 
>>Idea Whose Time Is Coming.  There was a recent Zope3-Dev thread about 
>>such issues, although it was more specific to bundling subsets of the 
>>Zope3 system, rather than bundling third-party packages.
>
>Yeah, the dependency/package management stuff is also brought up every so 
>often on the distutils-sig and pythonmac-sig .. the problem is that nobody 
>wants to actually hack on the nasty distutils source to finish the work.. 
>except maybe amk :)

The sad thing to me is, that it's not that difficult, at least in 
principle.  For example, I frequently create "pkgsrc" (similar to BSD 
ports) packages wrapping distutils-built Python libraries.  Generally 
speaking, this amounts to writing a short makefile like:

#====
DISTNAME=       mechanize-0.0.7a
PKGNAME=        ${PYPKGPREFIX}-${DISTNAME}
CATEGORIES=     3rdParty
MASTER_SITES=   http://wwwsearch.sourceforge.net/mechanize/src/

PYMODULE_DIRS=  mechanize
MAINTAINER=     pje at eby-sarna.com
HOMEPAGE=       http://wwwsearch.sourceforge.net/mechanize/
COMMENT=        Stateful programmatic web browsing in Python

DEPENDS+=       ${PYPKGPREFIX}-pullparser>=0.0.4b:../../3rdParty/py-pullparser
DEPENDS+= 
${PYPKGPREFIX}-ClientCookie>=0.4.18:../../3rdParty/py-ClientCookie
DEPENDS+=       ${PYPKGPREFIX}-ClientForm>=0.1.14:../../3rdParty/py-ClientForm

PYTHON_VERSION_REQD= 22

.include "../../3rdParty/3p-pkgutils/py-plist.mk"
.include "../../lang/python/extension.mk"
.include "../../mk/bsd.pkg.mk"
#====

This is one of the most *complicated* such files I've written.  But, using 
this I can run 'make' and it will download and install all the dependencies 
for me!  In fact, if I don't have Python installed, it'll download and 
install Python for me, but that's a bit out of scope for the distutils, 
methinks.  :)

Maybe what's really needed is a tool that uses a file like the above to do 
the downloading, extracting, and running of setup.py, et al.  The main 
drawback I see is dealing with binary installers for e.g. Windows.




From radix at twistedmatrix.com  Thu Feb 26 16:51:13 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 18:51:13 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077836183.3688.137.camel@localhost>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost>
Message-ID: <403E8671.1000308@twistedmatrix.com>

Glyph Lefkowitz wrote:
> On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
>>Yep, just subclass InterfaceClass and add a __call__ method that calls back 
>>to adapt() and you'd be all set.  One other benefit to PyProtocols is that 
>>you can track what interfaces an *instance* supports, independent of what 
>>its class supports.
> 
> Would you consider adding this to PyProtocols directly?  If we're going
> to maintain a component system as part of Twisted, I would like to at
> least get the benefit of having full control over the component system
> within Twisted.  I don't want to have some people using PyProtocols and
> others using PyProtocols+TwistedHacks.

Interface calling isn't that big of a deal. It just means for 
*parameterized* interfaces, we can't rely on calling (if we want to 
support non-Twisted interfaces there). But when we're adapting to a 
particular interface that we know subclasses our CallableInterface, we 
can call it.

> There are a lot of features I'd add to Twisted's component system if I
> had time, such as:

In the following, "components system" = "PyProtocols".

> 	- implicit context-dependent location of closest running t.a.service
> services by interface

Doesn't require changes to the components system

> 	- interface-based context (moshez's context trick)

Doesn't require changes to the components system

> 	- automatic generation of interfaces from any class

Doesn't require changes to the components system (afaict)

> 	- IComponentized

Hmm, what exactly is the use case for this anyway? I thought it was 
related to string registration of adapters. It doesn't sound like it 
really requires changes to the components system, either; Componentized 
seems like it could easily be implemented on top of PyProtocols.

> 	- context / interface based log separations

I don't really understand this, but it doesn't sound like it requires 
changes to the components system.

> And of course, integrating foom's string-based components would be great
> too.  There is a lot of friction even to add something like this to
> Twisted.  I imagine that adding something like this to PyProtocols, with
> potentially more projects out there depending on the exact specifics of
> all its semantics, would be even worse.

Well, Bob said in another message that he had already done 
string-registration of adapters successfully. (?)

> The other alternative is to add a bunch of specific hacks to PyProtocols
> that get loaded only when Twisted gets loaded, which could potentially
> introduce compatibility problems with other PyProtocols-using code,
> which would sort of invalidate the whole point of using a common
> components system in the first place.

My previous retorts make this point of yours irrelevant for the moment, 
so I will not respond: if you want, you may debate my retorts and we can 
get to this point once we have worked those out.[1]

[1] I need to figure out a succinct way to say this. Maybe some Latin 
crap. It's way too verbose. spiv suggested "ad nauseum" when I asked 
him... Better look that one up. ;-)

> Then we have the issue of the PyProtocols dependency; dependency
> management can be quite hairy on windows.

Hmm, yeah, I assumed we would include our own (hopefully unhacked) copy 
of PyProtocols in releases.

> Maybe I'm alone in these concerns, though.  Does anyone else feel that
> depending on PyProtocols would increase the learning curve for Twisted
> even more?  Or is this common knowledge in the Python community that
> could be leveraged to actually make the curve shallower?  I can
> certainly learn to wrap my head around the whole thing if nobody else
> has trouble with it :)

I kinda hold this reservation. PyProtocols is VERY complex compared to 
the t.p.c components system. But maintaining our own inadequate version 
is pretty sucky.

>>There might be some other issues that could come up, but I'm definitely 
>>willing to try to "adapt" to Twisted's needs in these areas, especially if 
>>it means I could get rid of PyProtocols' wrapper code and wrapping tests 
>>for Twisted's existing interface class.  :)
> 
> 
> This is clearly something that we need to talk about more.  As many
> silly disagreements about design as I can come up with, a common
> components system would be beneficial to everyone involved.  Are you
> coming to PyCon? :)

PyCon! PyCon! Everybody come to PyCon!

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/9a29e159/attachment.sig>

From foom at fuhm.net  Thu Feb 26 17:13:04 2004
From: foom at fuhm.net (James Y Knight)
Date: Thu, 26 Feb 2004 19:13:04 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077836183.3688.137.camel@localhost>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost>
Message-ID: <B67B182E-68B9-11D8-AB59-000A95A50FB2@fuhm.net>

On Feb 26, 2004, at 5:56 PM, Glyph Lefkowitz wrote:
> Parts of PyProtocols do strike me as dangerous, evil, and overcomplex,
> though :)  In particular,
>
> http://peak.telecommunity.com/protocol_ref/proto-implication.html
>
> The idea of passing numeric priorities for different implementations 
> has
> always seemed deeply wrong to me.
I believe you misunderstood -- you don't pass numeric priorities, they 
are used internally to measure the length of a chain of adapters (for 
the transitive adaptation) so that the shortest chain is always used.

> 4000 lines of code related
> to components, whereas t.p.components has 300?  It worries me.

It's actually only non-blank 996 lines, not including testcases (836 
lines), pyrex speedup code (233 lines), or twisted/zope compatibility 
(159 lines).

Compare this to twisted.python.component's 392 lines (+350 lines of 
tests). Not too bad, really. The PyProtocols authors seem to really 
like blank lines, there's 1842 of those compared to twisted's 182. :)

James




From pje at telecommunity.com  Thu Feb 26 17:17:53 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 19:17:53 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077836183.3688.137.camel@localhost>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
Message-ID: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>

At 05:56 PM 2/26/04 -0500, Glyph Lefkowitz wrote:
>On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
> > Yep, just subclass InterfaceClass and add a __call__ method that calls 
> back
> > to adapt() and you'd be all set.  One other benefit to PyProtocols is that
> > you can track what interfaces an *instance* supports, independent of what
> > its class supports.
>
>Would you consider adding this to PyProtocols directly?

I have considered it.  Unfortunately, it runs counter to one PyProtocols 
use case I'd like to support, which is the ability to use an abstract base 
class as a protocol.  That is, somebody should be able to instantiate 
non-abstract subclasses of a protocol.  While I don't personally use this 
except for some stuff in peak.util.fmtparse, I've had some previous 
indications that Guido may favor an ABC-style (Abstract Base Class) for 
interfaces when they eventually land in Python.  So, I'd like to avoid 
making it impossible to instantiate interface subclasses.

Again, this would be easily solved by a Twisted-specific subclass of 
protocols.InterfaceClass, and I don't see that doing it is necessarily a 
bad thing for either Twisted or PyProtocols, although it may be that it 
should be considered simply a transitional, backward-compatibility thing.


>   If we're going
>to maintain a component system as part of Twisted, I would like to at
>least get the benefit of having full control over the component system
>within Twisted.  I don't want to have some people using PyProtocols and
>others using PyProtocols+TwistedHacks.

I'm not sure I follow you here.  Private extensions to PyProtocols' base 
classes is certainly permitted and encouraged, to provide additional 
features needed by particular frameworks, as long as the core interfaces 
are respected (e.g. 'IOpenProtocol').  PyProtocols itself offers several 
specialized protocol implementations, including Protocol, InterfaceClass, 
Variation, URIProtocol, SequenceProtocol, and so on.


>There are a lot of features I'd add to Twisted's component system if I
>had time, such as:
>
>         - implicit context-dependent location of closest running t.a.service
>services by interface
>         - interface-based context (moshez's context trick)
>         - automatic generation of interfaces from any class
>         - IComponentized
>         - context / interface based log separations

Actually, if I understand correctly, these mostly sound like things outside 
PyProtocols' scope.  peak.binding and peak.config implement some of this 
stuff by defining various interfaces they want, and using PyProtocols to 
adapt things to those interfaces.  But that's entirely independent of 
PyProtocols itself.

In other words, PyProtocols isn't tightly coupled to a component 
architecture, but is instead a convenient base for building component 
architectures.


>And of course, integrating foom's string-based components would be great
>too.  There is a lot of friction even to add something like this to
>Twisted.  I imagine that adding something like this to PyProtocols, with
>potentially more projects out there depending on the exact specifics of
>all its semantics, would be even worse.
>
>The other alternative is to add a bunch of specific hacks to PyProtocols
>that get loaded only when Twisted gets loaded, which could potentially
>introduce compatibility problems with other PyProtocols-using code,
>which would sort of invalidate the whole point of using a common
>components system in the first place.

Again, if I understand correctly, these are services you would build atop 
PyProtocols or using PyProtocols, and wouldn't need to extend PyProtocols for.

Let's take a specific example: you mentioned locating nearby services by 
interface.  peak.config does this with two interfaces: IConfigSource and 
IConfigKey:

class IConfigSource(Interface):

     """Something that can be queried for configuration data"""

     def _getConfigData(forObj, configKey):

         """Return a value of 'configKey' for 'forObj' or 'NOT_FOUND'

         Note that 'configKey' is an 'IConfigKey' instance and may therefore be
         a 'PropertyName' or an 'Interface' object."""


class IConfigKey(Interface):

     """Configuration data key, used for 'config.lookup()' et al

     Configuration keys may be polymorphic at registration or lookup time.
     IOW, when looking up a configuration key, you can search multiple values
     that would imply the key being looked for.  And, when registering a value
     for a configuration key, the key can supply alternate keys that it should
     be registered under.  Thus, an 'IConfigKey' is never itself directly used
     as a key, only the values supplied by its 'registrationKeys()' and
     'lookupKeys()' methods are used.  (However, those values must themselves
     be adaptable to 'IConfigKey', and they must be usable as dictionary keys.)
     """

     def registrationKeys(depth=0):
         """Iterate over (key,depth) pairs to be used when registering"""

     def lookupKeys():
         """Iterate over keys that should be used for lookup"""

Now, some of the things we want to use as configuration keys are 
interfaces.  So, we use PyProtocols to declare adapters that implement 
IConfigKey for all the interface types we work with (PyProtocols 
interfaces, Zope interfaces, and Twisted interfaces).  And of course we 
declare our "placeful" components as implementing IConfigSource.

Now, the API to look something up amounts to iterating over parent 
components, adapting them to IConfigSource, and passing them the needed 
configuration key, after having first adapted it to IConfigKey.

Now, let's say somebody wants to use a Twisted placeful component with PEAK 
or vice versa...  they just declare adapters to whichever interfaces aren't 
implemented, and life is good.  There's absolutely no reason you'd need to 
change PyProtocols for this, nor would you need to make Twisted's 
interfaces for component lookup anything like PEAK's.  Heck, if somebody 
wanted to, they could declare an IConfigKey adapter for Twisted's interface 
class, and then PEAK would be able to use all its existing lookup and 
component-binding APIs using Twisted interfaces as keys.    And that's 
*without* Twisted using PyProtocols.  :)


>Then we have the issue of the PyProtocols dependency; dependency
>management can be quite hairy on windows.

Indeed.  I've begun correspondence with Bob off-list about the possibility 
of me helping to port PIMP/PackMan to other platforms, though.


>Parts of PyProtocols do strike me as dangerous, evil, and overcomplex,
>though :)  In particular,
>
>http://peak.telecommunity.com/protocol_ref/proto-implication.html
>
>The idea of passing numeric priorities for different implementations has
>always seemed deeply wrong to me.

I understand.  However, I have yet to encounter a situation where I've 
actually used or needed to use it.  And, I consider passing explicit depth 
arguments to PyProtocols a hack: a side-effect of the implementation rather 
than an intentional design feature.


>   I have worked with one or two systems
>like this in the past (some MUD code in C++) where, inevitably, someone
>will want to make the 'real' default adapter for interface X; then
>someone else will want to make the 'really real' default adapter.
>Different developers will eventually keep trying to write comparison
>methods that leapfrog each other backwards to get to the correct result
>for last-most-from-greater-than-everything, which turns into a
>bug-ridden mess (and it's never really clear who should be "winning"
>this race to be the final overrider anyway).

Right, the proper solution is to:

1) have one protocol per use-case
2) don't reuse a protocol for other use cases that aren't an exact match
3) use transitive adaptation so that similar use cases can reuse adapters, 
while still allowing special cases to declare a direct adapter that 
overrides the transitive one

So far, this strategy has worked out very well for me, without need for 
explicit depth declaration.

By the way, though, I don't know what you mean by "default adapter".  Do 
you mean the adapter for type 'object', perhaps?  I can't imagine why 
somebody would care about that, though.


>More importantly I don't really understand if that's in fact what the
>'depth' value is used for, because my eyes glaze over halfway through
>the above web page :)  PyProtocols feels to me like it's gone out of
>even the upper levels of abstraction that the Twisted team is used to
>inhabiting, straight into the Zopeosphere... 4000 lines of code related
>to components, whereas t.p.components has 300?  It worries me.

Sigh.  I frequently regret having undertaken to document PyProtocols so 
thoroughly.  :(  Ironically, I did so thinking it would encourage 
developers of other frameworks to come on board.  ;)  Seriously, though, 
the only major differences I know of between PyProtocols and Twisted's 
interfaces are:

1) Transitive adaptation is automatic
2) Instances may implement interfaces, and can participate in their adaptation
3) Interface declarations are inherited from all base classes, not just the 
first

So, the "upper levels of abstraction" have solely to do with levels that 
you don't need to know about in order to simply *use* the system.  (See 
also 
http://peak.telecommunity.com/protocol_ref/module-protocols.twistedsupport.html 
for some of the minor details of current PyProtocols/Twisted compatibility.

But anyway, where the heck are you getting 4000 lines from?

pje at pje ~/PyProtocols
$ wc -l src/protocols/*.py
       9 src/protocols/__init__.py
     205 src/protocols/adapters.py  # adapter bases, adapter arithmetic, 
default adapters
     369 src/protocols/advice.py    # stuff to support interface declarations
     287 src/protocols/api.py       # API methods
     246 src/protocols/classic.py   # support for declaring interfaces on 
Python built-ins
     328 src/protocols/generate.py  # auto-generated interfaces, like 
protocolForURI
     410 src/protocols/interfaces.py   # the actual Protocol/Interface 
implementations, and interfaces for them
     205 src/protocols/twisted_support.py   # This would go away, or at 
least get shorter...  :)
     121 src/protocols/zope_support.py      # But we're probably stuck with 
this.  :)
    2180 total

And those files have lots of whitespace and documentation lines in 
'em.  Maybe you're including the tests?


>Maybe I'm alone in these concerns, though.  Does anyone else feel that
>depending on PyProtocols would increase the learning curve for Twisted
>even more?  Or is this common knowledge in the Python community that
>could be leveraged to actually make the curve shallower?  I can
>certainly learn to wrap my head around the whole thing if nobody else
>has trouble with it :)

Stop trying to understand it and just use it.  ;)  Seriously, though, I 
think that Twisted's Interface/Adapter How-To is the kind of documentation 
I *should* have written for PyProtocols.  The PyProtocols docs were biased 
towards proving that its framework is consistent and useful for all sorts 
of tricky edge cases and advanced interface usages, instead of just saying, 
"here, this is what you can do".  In particular, I wanted to show Jim 
Fulton that adaptation is more fundamental than interface implementation, 
because you can represent the latter as a special case of the 
former.  (i.e., the NO_ADAPTER_NEEDED adapter.)

So, as you can see right there, writing docs with Jim Fulton in mind as the 
intended audience is where I made my big mistake.  :)


> > There might be some other issues that could come up, but I'm definitely
> > willing to try to "adapt" to Twisted's needs in these areas, especially if
> > it means I could get rid of PyProtocols' wrapper code and wrapping tests
> > for Twisted's existing interface class.  :)
>
>This is clearly something that we need to talk about more.  As many
>silly disagreements about design as I can come up with, a common
>components system would be beneficial to everyone involved.  Are you
>coming to PyCon? :)

No, but I have an IRC client.  :)




From radix at twistedmatrix.com  Thu Feb 26 17:28:16 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:28:16 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <B67B182E-68B9-11D8-AB59-000A95A50FB2@fuhm.net>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost> <B67B182E-68B9-11D8-AB59-000A95A50FB2@fuhm.net>
Message-ID: <403E8F20.8040400@twistedmatrix.com>

James Y Knight wrote:
>> 4000 lines of code related
>> to components, whereas t.p.components has 300?  It worries me.
> 
> 
> It's actually only non-blank 996 lines, not including testcases (836 
> lines), pyrex speedup code (233 lines), or twisted/zope compatibility 
> (159 lines).

This makes me feel a lot better.

> Compare this to twisted.python.component's 392 lines (+350 lines of 
> tests). Not too bad, really. The PyProtocols authors seem to really like 
> blank lines, there's 1842 of those compared to twisted's 182. :)

I also hate how little vertical whitespace many Twisted hackers use ;-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/c690ed14/attachment.sig>

From radix at twistedmatrix.com  Thu Feb 26 17:34:59 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:34:59 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <403E90B3.506@twistedmatrix.com>

Phillip J. Eby wrote:
> Stop trying to understand it and just use it.  ;)  Seriously, though, I 
> think that Twisted's Interface/Adapter How-To is the kind of 
> documentation I *should* have written for PyProtocols.  The PyProtocols 
> docs were biased towards proving that its framework is consistent and 
> useful for all sorts of tricky edge cases and advanced interface usages, 
> instead of just saying, "here, this is what you can do".  In particular, 
> I wanted to show Jim Fulton that adaptation is more fundamental than 
> interface implementation, because you can represent the latter as a 
> special case of the former.  (i.e., the NO_ADAPTER_NEEDED adapter.)
> 
> So, as you can see right there, writing docs with Jim Fulton in mind as 
> the intended audience is where I made my big mistake.  :)

Hmm, yeah, I think it would be helpful to have a document that mixes 1) 
explanation of interfaces/adaptors and why you need them and 2) basic 
introduction to PyProtocols to do what is outlined in #1. This is 
basically what the Twisted components howto is, but the Twisted 
components howto is pretty crappy, IMO :-) There's a lot of room for 
improvement in it even in that limited scope.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/a40d2e82/attachment.sig>

From bob at redivi.com  Thu Feb 26 17:39:01 2004
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 26 Feb 2004 19:39:01 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E8671.1000308@twistedmatrix.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost> <403E8671.1000308@twistedmatrix.com>
Message-ID: <567EE7FC-68BD-11D8-8DBD-000A95686CD8@redivi.com>

On Feb 26, 2004, at 6:51 PM, Christopher Armstrong wrote:

> Glyph Lefkowitz wrote:
>> And of course, integrating foom's string-based components would be 
>> great
>> too.  There is a lot of friction even to add something like this to
>> Twisted.  I imagine that adding something like this to PyProtocols, 
>> with
>> potentially more projects out there depending on the exact specifics 
>> of
>> all its semantics, would be even worse.
>
> Well, Bob said in another message that he had already done 
> string-registration of adapters successfully. (?)

Here's an example:

from protocols import *
import peak.utils.imports as imports
# does not depend on other PEAK stuff.. can easily be stolen

mxDateTime = imports.lazyModule('mx.DateTime')
datetime = imports.lazyModule('datetime')
def _hook_mx_DateTime(mxDateTime):
     declareAdapter(
         NO_ADAPTER_NEEDED,
         provides=[IBasicDate],
         forTypes=[mxDateTime.DateTimeType],
     )
     #datetime = imports.lazyModule('datetime')
     def convertToDateTime(obj, protocol):
         msec, second = math.modf(obj.second)
         # handle tzinfo ?
         return datetime.datetime(
             obj.year, obj.month, obj.day,
             obj.hour, obj.minute, int(obj.second),
             int(msec * 1e6), None
         )
     declareAdapter(
         convertToDateTime,
         provides=[IBasicDateTime],
         forTypes=[mxDateTime.DateTimeType],
     )
imports.whenImported('mx.DateTime.mxDateTime.mxDateTime', 
_hook_mx_DateTime)

def _hook_datetime(datetime):
     declareAdapter(
         NO_ADAPTER_NEEDED,
         provides=[IBasicDate],
         forTypes=[datetime.date],
     )
     declareAdapter(
         NO_ADAPTER_NEEDED,
         provides=[IBasicDateTime],
         forTypes=[datetime.datetime],
     )
imports.whenImported('datetime', _hook_datetime)

This could of course be automated a bit more, and there is probably 
even a better way.. but this was the first thing I stumbled across 
without thoroughly reading documentation or asking anyone :)

>> The other alternative is to add a bunch of specific hacks to 
>> PyProtocols
>> that get loaded only when Twisted gets loaded, which could potentially
>> introduce compatibility problems with other PyProtocols-using code,
>> which would sort of invalidate the whole point of using a common
>> components system in the first place.
>
> My previous retorts make this point of yours irrelevant for the 
> moment, so I will not respond: if you want, you may debate my retorts 
> and we can get to this point once we have worked those out.[1]
>
> [1] I need to figure out a succinct way to say this. Maybe some Latin 
> crap. It's way too verbose. spiv suggested "ad nauseum" when I asked 
> him... Better look that one up. ;-)

PyProtocols really is flexible enough to accommodate whatever.

>> Then we have the issue of the PyProtocols dependency; dependency
>> management can be quite hairy on windows.
>
> Hmm, yeah, I assumed we would include our own (hopefully unhacked) 
> copy of PyProtocols in releases.

I would suggest including it beside, not inside, Twisted.  The setup.py 
could check to see if a newer version is already installed, too.

>> Maybe I'm alone in these concerns, though.  Does anyone else feel that
>> depending on PyProtocols would increase the learning curve for Twisted
>> even more?  Or is this common knowledge in the Python community that
>> could be leveraged to actually make the curve shallower?  I can
>> certainly learn to wrap my head around the whole thing if nobody else
>> has trouble with it :)
>
> I kinda hold this reservation. PyProtocols is VERY complex compared to 
> the t.p.c components system. But maintaining our own inadequate 
> version is pretty sucky.

Well my first and last significant experience with a t.p.components 
based project:
== start using t.p.c ==
- Why AREN'T adapters transitive?
- How do I expose an interface that the *class* provides?
- Oh, I *can't do that*, I guess I'll have to patch t.p.c.
- Grudgingly write software on top of patched t.p.c.
== t.p.c gone forever ==
- Rewrite the code on PyProtocols.  It's a lot shorter and cleaner, 
even though I do use adapt(..., IFoo) instead of IFoo(...).
- Still haven't found a use case that PyProtocols can't already do.
- Started looking at PEAK, it solves most of the other problems I have 
(lazy imports, bindings, data modeling, etc.)
- .. hoping Twisted starts assimilating PEAK stuff, because it's better 
:)

>>> There might be some other issues that could come up, but I'm 
>>> definitely willing to try to "adapt" to Twisted's needs in these 
>>> areas, especially if it means I could get rid of PyProtocols' 
>>> wrapper code and wrapping tests for Twisted's existing interface 
>>> class.  :)
>> This is clearly something that we need to talk about more.  As many
>> silly disagreements about design as I can come up with, a common
>> components system would be beneficial to everyone involved.  Are you
>> coming to PyCon? :)
>
> PyCon! PyCon! Everybody come to PyCon!

I'm there!

-bob




From pje at telecommunity.com  Thu Feb 26 17:47:19 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Thu, 26 Feb 2004 19:47:19 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403E90B3.506@twistedmatrix.com>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>

At 07:34 PM 2/26/04 -0500, Christopher Armstrong wrote:
>Phillip J. Eby wrote:
>>Stop trying to understand it and just use it.  ;)  Seriously, though, I 
>>think that Twisted's Interface/Adapter How-To is the kind of 
>>documentation I *should* have written for PyProtocols.  The PyProtocols 
>>docs were biased towards proving that its framework is consistent and 
>>useful for all sorts of tricky edge cases and advanced interface usages, 
>>instead of just saying, "here, this is what you can do".  In particular, 
>>I wanted to show Jim Fulton that adaptation is more fundamental than 
>>interface implementation, because you can represent the latter as a 
>>special case of the former.  (i.e., the NO_ADAPTER_NEEDED adapter.)
>>So, as you can see right there, writing docs with Jim Fulton in mind as 
>>the intended audience is where I made my big mistake.  :)
>
>Hmm, yeah, I think it would be helpful to have a document that mixes 1) 
>explanation of interfaces/adaptors and why you need them and 2) basic 
>introduction to PyProtocols to do what is outlined in #1. This is 
>basically what the Twisted components howto is, but the Twisted components 
>howto is pretty crappy, IMO :-) There's a lot of room for improvement in 
>it even in that limited scope.

Yeah, my problem is that I don't usually write stuff to solve simple 
problems, because if it was a simple problem, somebody else would probably 
have already written something to solve it, and I could just download their 
implementation and be done with it.  :)

So, when I write something I'm almost invariably thinking about *hard* 
problems, and that tends to carry over into my documentation.  I'm finding 
that it's much better to get other people to draft documentation of my 
stuff, and then edit it for correctness or to show better ways to get the 
job done, because those other people usually have far more modest goals 
than I do, and will therefore use simpler examples.  For example, R.D. 
Murrary wrote a beautiful "Hello World"-driven tutorial for PEAK (at 
http://peak.telecommunity.com/DevCenter/IntroToPeak/ ) that I could never 
have written myself because it wouldn't have occurred to me to layer the 
examples according to complexity of the problem, rather than complexity of 
the solution.  :)  Contrast IntroToPeak with the PyProtocols docs: the 
former builds up solutions to bigger and bigger problems, while completely 
bypassing any discussion of PEAK fundamentals.  Conversely, the PyProtocols 
doc builds up from tiny little pieces and assembles them into a bigger and 
bigger framework.  That type of documentation is more useful for people 
developing and extending the framework itself, than for people who want to 
use it.  So, PyProtocols really needs another R.D. Murray to come along and 
explain how to do "Hello World" in PyProtocols.  :)




From radix at twistedmatrix.com  Thu Feb 26 17:50:25 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:50:25 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <567EE7FC-68BD-11D8-8DBD-000A95686CD8@redivi.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <1077836183.3688.137.camel@localhost> <403E8671.1000308@twistedmatrix.com> <567EE7FC-68BD-11D8-8DBD-000A95686CD8@redivi.com>
Message-ID: <403E9451.4000408@twistedmatrix.com>

Bob Ippolito wrote:
> def _hook_datetime(datetime):
>     declareAdapter(
>         NO_ADAPTER_NEEDED,
>         provides=[IBasicDate],
>         forTypes=[datetime.date],
>     )
>     declareAdapter(
>         NO_ADAPTER_NEEDED,
>         provides=[IBasicDateTime],
>         forTypes=[datetime.datetime],
>     )
> imports.whenImported('datetime', _hook_datetime)
> 
> This could of course be automated a bit more, and there is probably even 
> a better way.. but this was the first thing I stumbled across without 
> thoroughly reading documentation or asking anyone :)

Hmm, yeah, we want something more along the lines of:

   registerAdapter(convertToDateTime,
                   forStringTypes=['mxDateTime.DateTimeType'],
                   provides=[IBasicDateTime])

But your example does show off the crazy crap you can do, which makes me 
believe that something like this would be quite easy to implement.

> On Feb 26, 2004, at 6:51 PM, Christopher Armstrong wrote:
>> Hmm, yeah, I assumed we would include our own (hopefully unhacked) 
>> copy of PyProtocols in releases.
> 
> 
> I would suggest including it beside, not inside, Twisted.  The setup.py 
> could check to see if a newer version is already installed, too.

I didn't mean "inside the 'twisted' Python package", I meant "in the 
Twisted package" ;-). So, yeah, beside Twisted, I guess.

> - .. hoping Twisted starts assimilating PEAK stuff, because it's better :)

:-D



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/87a6b2df/attachment.sig>

From radix at twistedmatrix.com  Thu Feb 26 17:53:32 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Thu, 26 Feb 2004 19:53:32 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
Message-ID: <403E950C.60501@twistedmatrix.com>

Phillip J. Eby wrote:
> So, when I write something I'm almost invariably thinking about *hard* 
> problems, and that tends to carry over into my documentation.  I'm 
> finding that it's much better to get other people to draft documentation 
> of my stuff, and then edit it for correctness or to show better ways to 
> get the job done, because those other people usually have far more 
> modest goals than I do, and will therefore use simpler examples.  For 
> example, R.D. Murrary wrote a beautiful "Hello World"-driven tutorial 
> for PEAK (at http://peak.telecommunity.com/DevCenter/IntroToPeak/ ) that 
> I could never have written myself because it wouldn't have occurred to 
> me to layer the examples according to complexity of the problem, rather 
> than complexity of the solution.  :)  Contrast IntroToPeak with the 
> PyProtocols docs: the former builds up solutions to bigger and bigger 
> problems, while completely bypassing any discussion of PEAK 
> fundamentals.  Conversely, the PyProtocols doc builds up from tiny 
> little pieces and assembles them into a bigger and bigger framework.  
> That type of documentation is more useful for people developing and 
> extending the framework itself, than for people who want to use it.  So, 
> PyProtocols really needs another R.D. Murray to come along and explain 
> how to do "Hello World" in PyProtocols.  :)

OTOH, I want to say that your documentation does seem very good: when 
the time comes to be go into interstellar abstraction-space, I think it 
will be quite useful. But, indeed, introductory material is very very 
important. :-)


-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040226/6bb4ca39/attachment.sig>

From rc at pgdn.org  Thu Feb 26 18:01:59 2004
From: rc at pgdn.org (Robert Church)
Date: Thu, 26 Feb 2004 17:01:59 -0800
Subject: [Twisted-Python] Components
In-Reply-To: <403E950C.60501@twistedmatrix.com>
References: <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226193915.023feec0@telecommunity.com> <403E950C.60501@twistedmatrix.com>
Message-ID: <20040227010159.GH29139@pgdn.org>

On Thu, Feb 26, 2004 at 07:53:32PM -0500, Christopher Armstrong quipped:

> OTOH, I want to say that your documentation does seem very good: when 
> the time comes to be go into interstellar abstraction-space, I think it 
> will be quite useful. But, indeed, introductory material is very very 
> important. :-)

I agree. The importance of introductory material cannot be overstated
without difficulty.



From itamar at itamarst.org  Thu Feb 26 18:11:35 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Thu, 26 Feb 2004 20:11:35 -0500
Subject: [Twisted-Python] Typo in /twisted/test/test_enterprise.py -
	Twisted 1.2 RC2
In-Reply-To: <403C7C0B.5060108@ivsn.com>
References: <403C7C0B.5060108@ivsn.com>
Message-ID: <1077844295.5807.0.camel@sheriffpony>

Please add bug reports and feature requests to
http://twistedmatrix.com/bugs/.




From john at landahl.org  Thu Feb 26 18:39:29 2004
From: john at landahl.org (John Landahl)
Date: Thu, 26 Feb 2004 17:39:29 -0800
Subject: [Twisted-Python] PB over SSH
Message-ID: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>

I've hacked up a working implementation of PB over SSH (Conch) if anyone
is interested.  It's a convienient way to have both transport security
and authentication for PB sessions.

I've implemented a version in plain Twisted and one using PEAK+Twisted.
The code is a little rough, but if there's any interest I can clean it
up for general consumption.



From mesozoic at polynode.com  Thu Feb 26 19:03:26 2004
From: mesozoic at polynode.com (Alex Levy)
Date: Thu, 26 Feb 2004 21:03:26 -0500
Subject: [Twisted-Python] PB over SSH
In-Reply-To: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
Message-ID: <1077847406.1440.18.camel@hyla>

On Thu, 2004-02-26 at 20:39, John Landahl wrote:
> I've hacked up a working implementation of PB over SSH (Conch) if anyone
> is interested.  It's a convienient way to have both transport security
> and authentication for PB sessions.
> 
> I've implemented a version in plain Twisted and one using PEAK+Twisted.
> The code is a little rough, but if there's any interest I can clean it
> up for general consumption.

Yes, please :)

-- 
Alex Levy
WWW: http://mesozoic.geecs.org

"Never let your sense of morals prevent you from doing what is right."
-- Salvor Hardin, Isaac Asimov's _Foundation_

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040226/0540d599/attachment.sig>

From andrew-twisted at puzzling.org  Thu Feb 26 19:31:47 2004
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Fri, 27 Feb 2004 13:31:47 +1100
Subject: [Twisted-Python] Re: DeferredList.addDeferred behaviour
In-Reply-To: <uu11dalkz.fsf@fitlinxx.com>
References: <2d2a32c19b.2c19b2d2a3@noborrar.co.cl> <20040219013245.GG1782@frobozz> <uu11dalkz.fsf@fitlinxx.com>
Message-ID: <20040227023147.GB3468@frobozz>

On Thu, Feb 26, 2004 at 10:48:12AM -0500, David Bolen wrote:
[...]
> 
> Without addDeferred I need to aggregate the underlying deferreds
> separately, but more importantly, I need a completely separate loop to
> install the suppression errbacks, because that has to be done _after_
> the Deferreds are stuck into the DeferredList or else that suppression
> will stop the DeferredList from seeing the error.

Interesting.  I think I'd still rather the two loops than the confusing
semantics of addDeferred.

[...]
> 
> Although if DeferredList were to grow a way to specify that it should
> suppress errors once it has gathered them, I'd probably be just as
> happy as having addDeferred fixed, since the separate loop for error
> suppression bugs me more than the need to separately aggregate the
> Deferreds together before creating the DeferredList.  Actually
> suppressing errors might make me even happier, since needing to
> suppress the errors separately (noted in the API documentation, but
> not the HowTo), while making perfect sense to me now, took a while to
> catch on to initially.

I think adding a 'consumeErrors' or 'suppressErrors' flag might be a good
idea... I've put a patch up at http://twistedmatrix.com/bugs/issue528 --
let's continue discussion there.

In the meantime, I've checked in the change to deprecate addDeferred, and
removed it from the howto.

-Andrew.




From teratorn at world-net.net  Thu Feb 26 18:40:58 2004
From: teratorn at world-net.net (Eric Mangold)
Date: Thu, 26 Feb 2004 18:40:58 -0700
Subject: [Twisted-Python] Re: PB over SSH
In-Reply-To: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
Message-ID: <opr3z9mkvli4eeqj@mail.oaktech.net>

On Thu, 26 Feb 2004 17:39:29 -0800, John Landahl <john at landahl.org> wrote:

> I've hacked up a working implementation of PB over SSH (Conch) if anyone
> is interested.  It's a convienient way to have both transport security
> and authentication for PB sessions.
>
> I've implemented a version in plain Twisted and one using PEAK+Twisted.
> The code is a little rough, but if there's any interest I can clean it
> up for general consumption.

Nice. I would like to use this.

	-Eric




From glyph at twistedmatrix.com  Thu Feb 26 21:55:04 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 26 Feb 2004 23:55:04 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <1077857704.3236.140.camel@localhost>

On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
> But anyway, where the heck are you getting 4000 lines from?

Whoops!  Bad command-line argument to sloccount; I stand corrected and
apologize for FUD!




From glyph at twistedmatrix.com  Thu Feb 26 22:24:54 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 27 Feb 2004 00:24:54 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
Message-ID: <1077859494.3236.171.camel@localhost>

On Thu, 2004-02-26 at 19:47, Phillip J. Eby wrote:

> Yeah, my problem is that I don't usually write stuff to solve simple 
> problems, because if it was a simple problem, somebody else would probably 
> have already written something to solve it, and I could just download their 
> implementation and be done with it.  :)

> So, when I write something I'm almost invariably thinking about *hard* 
> problems, and that tends to carry over into my documentation.

I can understand that inclination myself, having more than once heard
Twisted accused of being "an impressive solution for which there are no
problems".  However, PEAK's documentation has been dense even for me.  I
certainly could not accuse if of not being thorough :).

In a discussion with another Twisted developer, it struck me that we may
be coming at the problem of components from completely different
angles.  I didn't understand why components were interesting at all
until I started to play with using them in the context of separation of
concerns within simulations.  Since these concerns can become
independently quite large, manage independent state, and are largely
interrelated only at relatively few boundary points, they're well-suited
towards collections of stateful adapters.  Compared to the use-cases
I've attempted to satisfy there, every usage of adapters has seemed
trivial.

Looking at PyProtocols, it doesn't seem to me to have taken simulations
or gaming into account as a use-case.  An indication of this is the
seperability of the full component model from the interface / adapters
system.  Without a full understanding of the execution context of an
adapter, I don't know how I could integrate external adapters like TTW
login or email delivery into a simulation.  (Pardon me for not being
terribly specific here.  It's difficult for me to come up with examples
that take less than 5 or 6 pages of dull prose to explain.) 

However, I am not sure, because I can't figure out what PEAK as a whole
is really for.  The likely source of an explanation,
http://peak.telecommunity.com/Articles/WhatisPEAK.html
seems awfully vague.  What is the problem that PEAK was designed to
solve, exactly?  Clearly it was difficult, because there was a lot of
solution :)

        An aside, for any would-be component system or documentation
        authors in the audience: much general literature on the use of
        components - including the Twisted component tutorial, I might
        add - is maddeningly vague, somewhat like "object oriented
        programming" tutorials.  I don't need to simulate simplistic
        bicycles or shapes or electrically incapacitated hairdryers, I
        want to write networked applications and video games, and it's
        not clear which concerns I should separate, how, and when.  Why
        does this stuff help me?






From glyph at twistedmatrix.com  Thu Feb 26 22:40:55 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 27 Feb 2004 00:40:55 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <1077860455.3688.189.camel@localhost>

On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
> At 05:56 PM 2/26/04 -0500, Glyph Lefkowitz wrote:
> >On Thu, 2004-02-26 at 14:59, Phillip J. Eby wrote:
> > > Yep, just subclass InterfaceClass and add a __call__ method that calls 
> > back
> > > to adapt() and you'd be all set.  One other benefit to PyProtocols is that
> > > you can track what interfaces an *instance* supports, independent of what
> > > its class supports.
> >
> >Would you consider adding this to PyProtocols directly?
> 
> I have considered it.  Unfortunately, it runs counter to one PyProtocols 
> use case I'd like to support, which is the ability to use an abstract base 
> class as a protocol.  That is, somebody should be able to instantiate 
> non-abstract subclasses of a protocol.  While I don't personally use this 
> except for some stuff in peak.util.fmtparse, I've had some previous 
> indications that Guido may favor an ABC-style (Abstract Base Class) for 
> interfaces when they eventually land in Python.  So, I'd like to avoid 
> making it impossible to instantiate interface subclasses.

Considering that this is a rather uncommon use-case, can it be made into
the non-default Interface class?  Or an attribute/feature of the default
one, such as

	class MyAbstractSub(IMyAbstract.ABC):
		pass

	class DontUseABC:
		__implements__ = MyAbstractSub.Interface

> Again, this would be easily solved by a Twisted-specific subclass of 
> protocols.InterfaceClass, and I don't see that doing it is necessarily a 
> bad thing for either Twisted or PyProtocols, although it may be that it 
> should be considered simply a transitional, backward-compatibility thing.

The __call__ hack, for me, is more than just syntactic sugar, or a
"transitional, backward-compatibility thing".  It's fundamental to my
personal use of the component system.  One-argument callables are used
_everywhere_ in Twisted, thanks mostly to Deferreds, but also because
"thing which takes one argument" is a very convenient interface for
using for a variety of different kinds of processing.  An idiom I find
tremendously convenient (even, perhaps especially, when debugging) is
"return foo.doSomethingDeferred().addCallback(IWhatever)".  IWhatever is
sometimes a variable, too - and it's quite common to use 'str', 'int',
or 'list' there instead of an interface.

Of course, I like the syntactic sugar quite a bit, too :).  It's
self-documenting.  When I have run tutorials for others on the use of
components, showing them an error on x.what(), and then success on
IWhatever(x).what() is enlightening.  Previously,  our analogue of
"adapt", "getAdapter", was difficult to explain.

(BTW: a common idiom for using interfaces is to scope method names.  An
optimization I want to add to Twisted at some point is stateless
interface-method-call syntax which can do this efficiently, something
like: IWhatever.what(x).  I believe you should be able to avoid a bunch
of Python object allocation overhead by doing it that way.  Does
PyProtocols provide any such facility?)

> >   If we're going
> >to maintain a component system as part of Twisted, I would like to at
> >least get the benefit of having full control over the component system
> >within Twisted.  I don't want to have some people using PyProtocols and
> >others using PyProtocols+TwistedHacks.
> 
> I'm not sure I follow you here.  Private extensions to PyProtocols' base 
> classes is certainly permitted and encouraged, to provide additional 
> features needed by particular frameworks, as long as the core interfaces 
> are respected (e.g. 'IOpenProtocol').  PyProtocols itself offers several 
> specialized protocol implementations, including Protocol, InterfaceClass, 
> Variation, URIProtocol, SequenceProtocol, and so on.
[...]
> Actually, if I understand correctly, these mostly sound like things outside 
> PyProtocols' scope.  peak.binding and peak.config implement some of this 
> stuff by defining various interfaces they want, and using PyProtocols to 
> adapt things to those interfaces.  But that's entirely independent of 
> PyProtocols itself.

> In other words, PyProtocols isn't tightly coupled to a component 
> architecture, but is instead a convenient base for building component 
> architectures.

Perhaps we should be discussing Twisted using PEAK, then?  I don't want
to use half a component system and implement the other half myself. 
Maybe you can come up with a counterexample, but it seems to me that the
benefit of a common protocol system would be lost without the use of a
common component model.

> Let's take a specific example: you mentioned locating nearby services by 
> interface.  peak.config does this with two interfaces: IConfigSource and 
> IConfigKey:

Woah there, sparky!  That looks a lot like the earlier documentation I
was having trouble with.  A brief example, maybe? :)

> >Then we have the issue of the PyProtocols dependency; dependency
> >management can be quite hairy on windows.
> 
> Indeed.  I've begun correspondence with Bob off-list about the possibility 
> of me helping to port PIMP/PackMan to other platforms, though.

Thank goodness.  It needs to be done; Twisted needs to be broken up into
smaller pieces.

> By the way, though, I don't know what you mean by "default adapter".  Do 
> you mean the adapter for type 'object', perhaps?  I can't imagine why 
> somebody would care about that, though.

I mean the adapter for type "Thing", mostly.  The general idea being
that you want to override what happens before someone picks up a
"normal" object when they're under the influence of a particular
enchantment.  It is difficult to specify rules for which enchantment's
hook takes precedence, so authors get into fights by specifying
ever-lower numbers.

> Stop trying to understand it and just use it.  ;)

Really, an interface specification / lookup system is a pretty basic
part of a system which uses it, on par with a function calling
convention.  I want to know _exactly_ what goes on when I use it; I
never want to be surprised by a weird component getting looked up when
that wasn't what I intended.  With so much indirection in place that's
too easy already.

> So, as you can see right there, writing docs with Jim Fulton in mind as the 
> intended audience is where I made my big mistake.  :)

Quite.  But, it seems like for that audience, you wrote it well :).  As
much as I respect his work, I don't think it would be a misnomer to call
me bizarro jim fulton.  I tend to have near-opposite interest in
problems, but to come up with identical-looking solutions more often
than not...

> No, 

Sad to hear that :-(

> but I have an IRC client.  :)

irc.freenode.net/#twisted is always there (and I am often in it)




From radix at twistedmatrix.com  Fri Feb 27 06:16:40 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 08:16:40 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077859494.3236.171.camel@localhost>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com> <1077859494.3236.171.camel@localhost>
Message-ID: <403F4338.9020105@twistedmatrix.com>

Glyph Lefkowitz wrote:
> In a discussion with another Twisted developer, it struck me that we may
> be coming at the problem of components from completely different
> angles.  I didn't understand why components were interesting at all
> until I started to play with using them in the context of separation of
> concerns within simulations.  Since these concerns can become
> independently quite large, manage independent state, and are largely
> interrelated only at relatively few boundary points, they're well-suited
> towards collections of stateful adapters.  Compared to the use-cases
> I've attempted to satisfy there, every usage of adapters has seemed
> trivial.
> 
> Looking at PyProtocols, it doesn't seem to me to have taken simulations
> or gaming into account as a use-case.  An indication of this is the
> seperability of the full component model from the interface / adapters
> system.  Without a full understanding of the execution context of an
> adapter, I don't know how I could integrate external adapters like TTW
> login or email delivery into a simulation.  (Pardon me for not being
> terribly specific here.  It's difficult for me to come up with examples
> that take less than 5 or 6 pages of dull prose to explain.) 

You're right, the developers probably had vastly different applications 
in mind. However, the only technical difference I notice in the 'game 
simulations' arena is Componentized, and that's actually a fairly simple 
thing (In fact, from what I read in the PyProtocols documentation last 
night, it seemed like similar things already exist, or could trivially 
be implemented).

You can talk about 'different philosophies', but that's meaningless 
until you say what technical differencies you actually mean. Maybe you 
could explain what aspects of twisted.python.components you consider are 
more simulation-oriented? I'm sure it's not that hard for you to squeeze 
down your '5 or 6 pages', as I've seen you explain various Reality 
concepts in much less text, and we have an audience that's very familiar 
with component systems, interfaces, and adapters here. Maybe Jp can jump 
in, too, as he was the one who originally brought up the 'difference in 
philosophies' point.

As far as the technical stuff goes, PyProtocols and t.p.c do the same 
thing, and PyProtocols *can* do everything we have and want, at least 
from what I've recently heard people want (string adaptation, 
Componentized, adapter contexts...).

> However, I am not sure, because I can't figure out what PEAK as a whole
> is really for.  The likely source of an explanation,
> http://peak.telecommunity.com/Articles/WhatisPEAK.html
> seems awfully vague.  What is the problem that PEAK was designed to
> solve, exactly?  Clearly it was difficult, because there was a lot of
> solution :)

Yeah, reading PEAK's web site is pretty amusing. otoh, our own web copy, 
while less 'professional', is also pretty lame :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040227/901c2265/attachment.sig>

From radix at twistedmatrix.com  Fri Feb 27 06:23:59 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 08:23:59 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077860455.3688.189.camel@localhost>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost>
Message-ID: <403F44EF.7040904@twistedmatrix.com>

Glyph Lefkowitz wrote:
> On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
>>In other words, PyProtocols isn't tightly coupled to a component 
>>architecture, but is instead a convenient base for building component 
>>architectures.
> 
> 
> Perhaps we should be discussing Twisted using PEAK, then?  I don't want
> to use half a component system and implement the other half myself. 

Why?

> Maybe you can come up with a counterexample, but it seems to me that the
> benefit of a common protocol system would be lost without the use of a
> common component model.

This whole *thread* has been about the benefits of using only 
PyProtocols without PEAK (Not that I'm opposed to using PEAK -- I don't 
know enough about it yet. I'm just opposed to meaningless arguments :)

>>Let's take a specific example: you mentioned locating nearby services by 
>>interface.  peak.config does this with two interfaces: IConfigSource and 
>>IConfigKey:
> 
> Woah there, sparky!  That looks a lot like the earlier documentation I
> was having trouble with.  A brief example, maybe? :)

Yeah, my eyes kinda glazed over on this one, too, since I have no idea 
what IConfigSource and IConfigKey are.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040227/1b5c3dfa/attachment.sig>

From pje at telecommunity.com  Fri Feb 27 07:26:56 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 09:26:56 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077859494.3236.171.camel@localhost>
References: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
Message-ID: <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>

At 12:24 AM 2/27/04 -0500, Glyph Lefkowitz wrote:

>Looking at PyProtocols, it doesn't seem to me to have taken simulations
>or gaming into account as a use-case.  An indication of this is the
>seperability of the full component model from the interface / adapters
>system.  Without a full understanding of the execution context of an
>adapter, I don't know how I could integrate external adapters like TTW
>login or email delivery into a simulation.  (Pardon me for not being
>terribly specific here.  It's difficult for me to come up with examples
>that take less than 5 or 6 pages of dull prose to explain.)

There was a recent discussion of writing an interactive fiction game using 
PyProtocols on the PEAK mailing list; the thread started here:

http://www.eby-sarna.com/pipermail/peak/2004-February/001245.html

Mostly, I told the guy what sort of component model sounded like it would 
work for what he was trying to do, and how to do that sort of component 
model with PyProtocols.

To pull out your statement about execution context, though, I should 
mention that in PEAK, some adapters are "contextful" and others are 
not.  The PEAK component model has the simple concept of things having 
parent components.  Adapters that want to know about context make sure to 
set their parent to the thing they're adapting, or perhaps its 
parent.  Whenever you put a component in another component, the container 
adapts the containee to binding.IAttachable if possible, and tells it, 
"hey, I might be your parent", so the containee can know its 
context.  That's really about it for context.  The binding and config 
packages then offers lots of useful APIs to walk up the parent tree to find 
or do things.


>However, I am not sure, because I can't figure out what PEAK as a whole
>is really for.  The likely source of an explanation,
>http://peak.telecommunity.com/Articles/WhatisPEAK.html
>seems awfully vague.  What is the problem that PEAK was designed to
>solve, exactly?  Clearly it was difficult, because there was a lot of
>solution :)

What is Twisted as a whole really for?  ;)  At least PEAK's name says 
exactly what it is: Python Enterprise Application Kit.  It's a kit for 
writing enterprise applications in Python.  Specifically, configurable, 
component-based applications.  The PEAK core (aka peak.core) frameworks are 
a component architecture for building task-specific frameworks.  The rest 
of PEAK is either task-specific frameworks (storage, events, net, commands, 
etc.), utility modules, or development/deployment tools (supervisor, 
version, n2, etc.)




From pje at telecommunity.com  Fri Feb 27 07:58:23 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 09:58:23 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077860455.3688.189.camel@localhost>
References: <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <5.1.0.14.0.20040227092743.03091a70@mail.telecommunity.com>

At 12:40 AM 2/27/04 -0500, Glyph Lefkowitz wrote:

>Considering that this is a rather uncommon use-case, can it be made into
>the non-default Interface class?  Or an attribute/feature of the default
>one, such as
>
>         class MyAbstractSub(IMyAbstract.ABC):
>                 pass
>
>         class DontUseABC:
>                 __implements__ = MyAbstractSub.Interface

Hmm.  I suppose it's possible I could have a 'protocols.Abstract' that 
could be subclassed in place of Interface, if you wanted to use the ABC 
style.  But then, couldn't you also use an 'adapt()' method, i.e.:

foo = IWhatever.adapt(bar)

?

> > Again, this would be easily solved by a Twisted-specific subclass of
> > protocols.InterfaceClass, and I don't see that doing it is necessarily a
> > bad thing for either Twisted or PyProtocols, although it may be that it
> > should be considered simply a transitional, backward-compatibility thing.
>
>The __call__ hack, for me, is more than just syntactic sugar, or a
>"transitional, backward-compatibility thing".  It's fundamental to my
>personal use of the component system.  One-argument callables are used
>_everywhere_ in Twisted, thanks mostly to Deferreds, but also because
>"thing which takes one argument" is a very convenient interface for
>using for a variety of different kinds of processing.  An idiom I find
>tremendously convenient (even, perhaps especially, when debugging) is
>"return foo.doSomethingDeferred().addCallback(IWhatever)".  IWhatever is
>sometimes a variable, too - and it's quite common to use 'str', 'int',
>or 'list' there instead of an interface.
>
>Of course, I like the syntactic sugar quite a bit, too :).  It's
>self-documenting.  When I have run tutorials for others on the use of
>components, showing them an error on x.what(), and then success on
>IWhatever(x).what() is enlightening.  Previously,  our analogue of
>"adapt", "getAdapter", was difficult to explain.

Certainly, the convenience is tempting.  I worry more about the lack of 
commonality between 'IFoo(x)' and 'adapt(x,IFoo,somedefault)', from a 
presentation standpoint.

I think I'd like to hear some opinions from some existing PyProtocols users 
who aren't Twisted users before I "pronounce" on this.


>(BTW: a common idiom for using interfaces is to scope method names.  An
>optimization I want to add to Twisted at some point is stateless
>interface-method-call syntax which can do this efficiently, something
>like: IWhatever.what(x).  I believe you should be able to avoid a bunch
>of Python object allocation overhead by doing it that way.  Does
>PyProtocols provide any such facility?)

Not at the moment.  What I'd like to do at some point is add 
single-dispatch generic functions, though.  Then

class IWhatever:

     def what(self,...):
         ....

would be the default behavior for IWhatever.what(x), and you would define 
implementations via something like:

def what_foo(self,...):
     ...

IWhatever.what.add(what_foo, forTypes=[Foo])



> > Actually, if I understand correctly, these mostly sound like things 
> outside
> > PyProtocols' scope.  peak.binding and peak.config implement some of this
> > stuff by defining various interfaces they want, and using PyProtocols to
> > adapt things to those interfaces.  But that's entirely independent of
> > PyProtocols itself.
>
> > In other words, PyProtocols isn't tightly coupled to a component
> > architecture, but is instead a convenient base for building component
> > architectures.
>
>Perhaps we should be discussing Twisted using PEAK, then?  I don't want
>to use half a component system and implement the other half myself.

Okay.  The main issue there is going to be that PEAK is definitely still 
alpha, although the core CA stuff is *beginning* to approach PyProtocols' 
stability.  But it's nowhere near PyProtocols in documentedness, of course.


>Maybe you can come up with a counterexample, but it seems to me that the
>benefit of a common protocol system would be lost without the use of a
>common component model.

I don't really see it that way.  Right now, using PyProtocols, one can 
write components that play in both Zope and PEAK's component 
architectures.  (Granted, that's to some extent because Zope changed their 
CA to be more like PEAK, with interfaces for walking to parents and getting 
config data out of them.)

Not that I'm trying to talk you out of using PEAK's CA, mind.  I'm just 
saying that if you have radically different requirements, you might prefer 
to build your own.  If it's built atop PyProtocols, it'll be even easier to 
integrate your CA with other CAs if people have a need or desire to do so.



> > Let's take a specific example: you mentioned locating nearby services by
> > interface.  peak.config does this with two interfaces: IConfigSource and
> > IConfigKey:
>
>Woah there, sparky!  That looks a lot like the earlier documentation I
>was having trouble with.  A brief example, maybe? :)

Okay, let's say I want to get a hold of the event loop I should be a 
participant of...

class SomethingThatNeedsEvents(binding.Component):

     eventLoop = binding.Obtain(events.IEventLoop)

Okay, that's it.  That's the brief example.  :)  Seriously, this class is a 
component that, when used as part of a larger application, will 
automatically find the IEventLoop it's supposed to be using.  It may be 
defined in an .ini file, like this:

[Component Factories]
peak.events.interfaces.IEventLoop = "peak.events.io_events.EventLoop"

This says that when somebody asks for an IEventLoop, we will look at the 
requester's "service area" (a specially designated parent component), and 
if the service area doesn't already have one, we'll create a "singleton" 
instance of the peak.events.io_events.EventLoop class.

I say "singleton" in quotes because PEAK avoids true singletons like the 
plague.  Services are homed in a "service area", so there is usually one 
service instance per service area.  Typically, an app will do all its work 
in a single service area, but sometimes there are reasons to have 
additional service areas.

The other way you can make a service available (besides configuration for a 
service area) is to "offer" them from other components.  For example:

class SomethingWithACustomEventLoop(binding.Component):

     eventLoop = binding.Make(MyEventLoopClass, offerAs=[events.IEventLoop])

Each instance of this component will have its own private event loop 
instance.  In addition, any child component of an instance of this class 
will receive the instance's event loop whenever it requests an IEventLoop 
service.  So, if an instance of the first example class is made a child of 
an instance of this second example class, it will end up iwth a 
MyEventLoopClass instance as its eventLoop attribute.

Is this the sort of thing you're asking about?


> > By the way, though, I don't know what you mean by "default adapter".  Do
> > you mean the adapter for type 'object', perhaps?  I can't imagine why
> > somebody would care about that, though.
>
>I mean the adapter for type "Thing", mostly.  The general idea being
>that you want to override what happens before someone picks up a
>"normal" object when they're under the influence of a particular
>enchantment.  It is difficult to specify rules for which enchantment's
>hook takes precedence, so authors get into fights by specifying
>ever-lower numbers.

Ah.  That sounds like something that calls for a more explicit chain of 
responsibility that's not adapter driven.  That is, a component 
architecture issue.  Adaptation should be something you do to elements in 
the chain of responsibility in order to see if they want to participate in 
the current event.  But maybe I'm misunderstanding something about your use 
case.


>Really, an interface specification / lookup system is a pretty basic
>part of a system which uses it, on par with a function calling
>convention.  I want to know _exactly_ what goes on when I use it; I
>never want to be surprised by a weird component getting looked up when
>that wasn't what I intended.  With so much indirection in place that's
>too easy already.

There's really an easy solution to that.  If you want to be sure there's no 
confusion, define a new interface when you have a new use case.  And if an 
old interface mostly fits, you can make the new one a Variation of it or 
declare it to be implied by the old one.




From pje at telecommunity.com  Fri Feb 27 08:03:02 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 10:03:02 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403F4338.9020105@twistedmatrix.com>
References: <1077859494.3236.171.camel@localhost>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <1077859494.3236.171.camel@localhost>
Message-ID: <5.1.0.14.0.20040227100025.03dc05d0@mail.telecommunity.com>

At 08:16 AM 2/27/04 -0500, Christopher Armstrong wrote:
>Glyph Lefkowitz wrote:
>>However, I am not sure, because I can't figure out what PEAK as a whole
>>is really for.  The likely source of an explanation,
>>http://peak.telecommunity.com/Articles/WhatisPEAK.html
>>seems awfully vague.  What is the problem that PEAK was designed to
>>solve, exactly?  Clearly it was difficult, because there was a lot of
>>solution :)
>
>Yeah, reading PEAK's web site is pretty amusing. otoh, our own web copy, 
>while less 'professional', is also pretty lame :-)

Pot, I'd like to introduce you to my friend Kettle.  :)

Seriously, all of this boils down to the distutils.  If we could do 
CPAN-like dependencies, neither Zope nor Twisted nor PEAK would have these 
vague handwavy marketing materials.  We'd all have a list of things that 
people could download, each with far-less-handwavy descriptions.  And we'd 
be reusing a lot more of each other's stuff, I imagine.




From itamar at itamarst.org  Fri Feb 27 08:57:02 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 10:57:02 -0500
Subject: [Twisted-Python] PB over SSH
In-Reply-To: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
Message-ID: <1077897420.5802.13.camel@sheriffpony>

On Thu, 2004-02-26 at 20:39, John Landahl wrote:
> I've hacked up a working implementation of PB over SSH (Conch) if anyone
> is interested.  It's a convienient way to have both transport security
> and authentication for PB sessions.

PB over SSH is... a good idea, but not the way to implement this, exactly.

What you'd want is a SSH *transport*. It would allow you to run any
twisted protocol over an existing conch SSH connection, transparently,
just as you can run over TCP or SSL. In addition this transport should
provide a credential object tied to the logged in user so you can use it
with cred transparently. Plus a  SSH-to-TCP gateway transport that lets
you listen or connect using the SSH portforwarding support.

Once you've built this, PB over SSH is probably 10 lines of code.




From itamar at itamarst.org  Fri Feb 27 09:10:28 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 11:10:28 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
References: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
Message-ID: <1077898228.5803.18.camel@sheriffpony>

On Fri, 2004-02-27 at 09:26, Phillip J. Eby wrote:

> What is Twisted as a whole really for?  ;)

Networking applications. That is, programs that involve communicating
with other programs over a network, typically TCP/IP. Whereas
"enterprise" is to me anyway a meaningless word in this context. What is
the definition of an "enterprise application"?

Anyway - I propose we discuss switching to PyProtocols at PyCon. We can
then make a list of necessary changes and problems to make this happen,
or better yet try to implement as a test, and then we can come back to
PJE with specific rather than theoretical problems.




From dekonerding at lbl.gov  Fri Feb 27 09:17:31 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri, 27 Feb 2004 08:17:31 -0800
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
Message-ID: <403F6D9B.3070404@lbl.gov>

Hello, since nobody actually responding with a useful message regarding 
my report, I'm
reposting an extremely simple (1 page) example which exhibits the behavior.
My example creates a gtkreactor and runs it.  A small reporter class is 
run from a second thread.
Under the gtk reactor, the log messages from the second thread are not 
reported in a timely
fashion (only once per second or so).  From my understanding the 
messages should be printed more frequently (about once every 1/10th 
second).  This does work under the wx and plain reactors, so I suspect 
there is a defect in the gtk reactor.
I would simply like to get a confirmation that my example is a valid 
one, that the results I expect are valid, and that other
people can reproduce my experience.  If that is the case then I will 
submit a formal bug report.  All of this should be reproducible using 
Twisted 1.2.0.  Things get even weirder if you remove the logging 
support and replace it with all print statements.

import time, sys

from twisted.internet import gtk2reactor
gtk2reactor.install()
from twisted.python import threadable
threadable.init()
from twisted.internet import reactor
from twisted.python import log
log.startLogging(sys.stdout)

class TestThingy:
    def __init__(self):
        print "TestThingy created"

    def run(self):
        print "TestThingy run"
        for i in range(10):
            print "TestThingy message"
            time.sleep(0.1)
        print "TestThingy done"
       
class ThingyManager:
    def __init__(self):
        pass
       
    def submitThingy(self):
        log.err("ThingyManager submitting")
        f = TestThingy()
        log.err("ThingyManager created")
        reactor.callInThread(f.run)
        log.err("ThingyManager calledInThread")

def ticker(*args):
    log.err("ticker: %d" % time.time())
    reactor.callLater(1, ticker)

t = ThingyManager()
reactor.callLater(0, ticker)
reactor.callLater(3, t.submitThingy)
reactor.run()
log.err("Reactor done")




From db3l at fitlinxx.com  Fri Feb 27 09:17:36 2004
From: db3l at fitlinxx.com (David Bolen)
Date: 27 Feb 2004 11:17:36 -0500
Subject: [Twisted-Python] Re: Components
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost>
Message-ID: <u1xogts2n.fsf@fitlinxx.com>

Glyph Lefkowitz <glyph at twistedmatrix.com> writes:

> On Thu, 2004-02-26 at 19:17, Phillip J. Eby wrote:
(...)
> > I have considered it.  Unfortunately, it runs counter to one PyProtocols 
> > use case I'd like to support, which is the ability to use an abstract base 
> > class as a protocol.  That is, somebody should be able to instantiate 
> > non-abstract subclasses of a protocol.
(...)
>
> Considering that this is a rather uncommon use-case, can it be made into
> the non-default Interface class?  Or an attribute/feature of the default
> one, such as

Since neither Twisted, nor the default interfaces defined in
PyProtocols use the ABC approach, I've been curious about this since I
started using these packages.  Why aren't more interfaces defined in
the ABC style?  When Ifirst started defining some interfaces in my
project with PyProtocols, and had to make the choice between an ABC
interface and a documentation interface, ABC seemed to me as more
desirable.

I'll admit to almost wishing I didn't have the option at the time,
because to be true I didn't really have a good idea of the pros and
cons so it was sort of one of those uncertain feeling decisions (sort
of like picking a Python web or application framework :-)).  What
finally turned it for me was that the ABC approach gave me a clean
failure if the implementation object didn't really fulfill the
interface, as in forgot to override a method or declare an attribute.

Perhaps it was because the first set of things I was defining were
interfaces for specific components I was building, so there was a
natural 1:1 mapping between interface and initial objects.  I suppose
as my work grows I'll find more cases where the interfaces are just
portions of an object, but wouldn't it still be preferable to just use
MI from multiple interfaces to get the same failure handling?

Obviously, the ABC approach doesn't seem to be adopted by Twisted or
PyProtocols (at least for its official interfaces) themselves, but I
haven't really seen references to advantages of the non-ABC variant.

-- David




From Benjamin.Schollnick at usa.xerox.com  Fri Feb 27 09:18:55 2004
From: Benjamin.Schollnick at usa.xerox.com (Schollnick, Benjamin)
Date: Fri, 27 Feb 2004 11:18:55 -0500
Subject: [Twisted-Python] SSH connection
Message-ID: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>

Paul,

	I am attempting to use Twisted, for a simple SSH connection...

	As a example, I am using "The Transport" example from the how
to's...

from twisted.conch import error
from twisted.conch.ssh import transport
from twisted.internet import defer

class ClientTransport(transport.SSHClientTransport):

    def verifyHostKey(self, pubKey, fingerprint):
        if fingerprint != 'b1:94:6a:c9:24:92:d2:34:7c:62:35:b4:d2:61:11:84':
            return defer.fail(error.ConchError('bad key'))
        else:
            return defer.succeed(1)

    def connectionSecure(self):
        self.requestService(ClientUserAuth('user', ClientConnection()))


But....  It appears that something was not installed with the installer?

C:\develope\versions\test_code>ssh_test.py
Traceback (most recent call last):
  File "C:\develope\versions\test_code\ssh_test.py", line 2, in ?
    from twisted.conch.ssh import transport
  File
"C:\develope\Python23\Lib\site-packages\twisted\conch\ssh\transport.py",
line 37, in ?
    from Crypto import Util
ImportError: No module named Crypto

I am assuming that there is a prequiste package that needs to be installed,
presumably one of the multitude of Cryptography packages that I find on the
Vaults of Parnassus....

Is this accurate?

And if so, what package?

On the assumption it is PyCrypto....  I tried to install PyCrypto...

(The sad thing is that I'm running through all these hoops simply because I 
need to be able to make a SSH connection, and be able to read and write
to the stream... (ala Telnetlib))

when I:

	setup.py install

I receive:

	C:\develope\pycrypto-1.9a6>setup.py install
	running install
	running build
	running build_py
	running build_ext
	error: Python was built with version 6 of Visual Studio, and
extensions need to
	be built with the same version of the compiler, but it isn't
installed.

	Now I am running:

	C:\develope\pycrypto-1.9a6>python
	Python 2.3.2 (#49, Oct  2 2003, 20:02:00) [MSC v.1200 32 bit
(Intel)] on win32
	Type "help", "copyright", "credits" or "license" for more
information.
	>>>

I also have win32-157 installed....

Is there some way around this compile issue, does anyone know of a
precompiled
Windows binary for the PyCrypto kit??

		- Benjamin



From radix at twistedmatrix.com  Fri Feb 27 09:24:47 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 11:24:47 -0500
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
In-Reply-To: <403F6D9B.3070404@lbl.gov>
References: <403F6D9B.3070404@lbl.gov>
Message-ID: <403F6F4F.9010100@twistedmatrix.com>

David E. Konerding wrote:
> Hello, since nobody actually responding with a useful message regarding 
> my report, I'm
> reposting an extremely simple (1 page) example which exhibits the behavior.

Hmm, I don't see anything about the gtkreactor on the bug tracker.

http://twistedmatrix.com/bugs/

Please attach your example to the report you make.

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040227/e13a5ed3/attachment.sig>

From dekonerding at lbl.gov  Fri Feb 27 09:32:00 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri, 27 Feb 2004 08:32:00 -0800
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
In-Reply-To: <403F6F4F.9010100@twistedmatrix.com>
References: <403F6D9B.3070404@lbl.gov> <403F6F4F.9010100@twistedmatrix.com>
Message-ID: <403F7100.6080408@lbl.gov>

Christopher Armstrong wrote:

> David E. Konerding wrote:
>
>> Hello, since nobody actually responding with a useful message 
>> regarding my report, I'm
>> reposting an extremely simple (1 page) example which exhibits the 
>> behavior.
>
>
> Hmm, I don't see anything about the gtkreactor on the bug tracker.
>
> http://twistedmatrix.com/bugs/
>
> Please attach your example to the report you make.
>
I'd like to at least confirm that my example is a valid one before 
reported a bug.  So far nobody has reported
they can reproduce my example or that my example is wrong.

Dave



From itamar at itamarst.org  Fri Feb 27 09:36:18 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 11:36:18 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
References: 	 <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
Message-ID: <1077899778.5802.24.camel@sheriffpony>

Summary - you need to install PyCrypto, and if you do it from source
that means you need to do it with a compiler installed. You can use
mingw compiler with a bit of work (there's a howto somewhere), or you
can find a pre-compiled version.

http://webcleaner.sourceforge.net/ has instructions on compiling
pycrypto on windows.

Anyone have a precompiled exe we can put on the site?




From michal at pasternak.w.lub.pl  Fri Feb 27 09:40:33 2004
From: michal at pasternak.w.lub.pl (Michal Pasternak)
Date: Fri, 27 Feb 2004 17:40:33 +0100
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
References: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
Message-ID: <20040227164033.GA28086@pasternak.w.lub.pl>

Schollnick, Benjamin [Fri, Feb 27, 2004 at 11:18:55AM -0500]:
> On the assumption it is PyCrypto....  I tried to install PyCrypto...

Yes, you're right. The package is called py-amkCrypto in pkgsrc, homepage at
http://www.amk.ca/python/code/crypto.html, works with py-twisted on Unix.

> 	error: Python was built with version 6 of Visual Studio, and
> extensions need to
> 	be built with the same version of the compiler, but it isn't
> installed.

... and that's right!

To build python packages you will sometimes need a C compiler. gcc for
Windows is called "mingw" or "mingw32" (mingw.sf.net), but I suggest using
Dev-C++ from Bloodshed.net (http://www.bloodshed.net/).

To "teach" distutils to use mingw, you will need some voodo:
http://sebsauvage.net/python/mingw.html

> Is there some way around this compile issue, does anyone know of a
> precompiled
> Windows binary for the PyCrypto kit??

Propably it exists somewhere. Google! :)



From z3p at twistedmatrix.com  Fri Feb 27 09:44:55 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Fri, 27 Feb 2004 11:44:55 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
References: 	 <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
Message-ID: <1077900294.1239.14.camel@petra>

On Fri, 2004-02-27 at 11:18, Schollnick, Benjamin wrote:
> Paul,
> 
> 	I am attempting to use Twisted, for a simple SSH connection...
> 
> 	As a example, I am using "The Transport" example from the how
> to's...
> 
> from twisted.conch import error
> from twisted.conch.ssh import transport
> from twisted.internet import defer
> 
> class ClientTransport(transport.SSHClientTransport):
> 
>     def verifyHostKey(self, pubKey, fingerprint):
>         if fingerprint != 'b1:94:6a:c9:24:92:d2:34:7c:62:35:b4:d2:61:11:84':
>             return defer.fail(error.ConchError('bad key'))
>         else:
>             return defer.succeed(1)
> 
>     def connectionSecure(self):
>         self.requestService(ClientUserAuth('user', ClientConnection()))
> 
> 
> But....  It appears that something was not installed with the installer?
> 
> C:\develope\versions\test_code>ssh_test.py
> Traceback (most recent call last):
>   File "C:\develope\versions\test_code\ssh_test.py", line 2, in ?
>     from twisted.conch.ssh import transport
>   File
> "C:\develope\Python23\Lib\site-packages\twisted\conch\ssh\transport.py",
> line 37, in ?
>     from Crypto import Util
> ImportError: No module named Crypto

Yes, it uses several modules, all of which are documented in the README
and INSTALL files.

> On the assumption it is PyCrypto....  I tried to install PyCrypto...
> 
> (The sad thing is that I'm running through all these hoops simply because I 
> need to be able to make a SSH connection, and be able to read and write
> to the stream... (ala Telnetlib))

SSH is considerably more complex than telnet, and so has considerably
more dependencies.

> when I:
> 
> 	setup.py install
> 
> I receive:
> 
> 	C:\develope\pycrypto-1.9a6>setup.py install
> 	running install
> 	running build
> 	running build_py
> 	running build_ext
> 	error: Python was built with version 6 of Visual Studio, and
> extensions need to
> 	be built with the same version of the compiler, but it isn't
> installed.
> 
> 	Now I am running:
> 
> 	C:\develope\pycrypto-1.9a6>python
> 	Python 2.3.2 (#49, Oct  2 2003, 20:02:00) [MSC v.1200 32 bit
> (Intel)] on win32
> 	Type "help", "copyright", "credits" or "license" for more
> information.
> 	>>>
> 
> I also have win32-157 installed....
> 
> Is there some way around this compile issue, does anyone know of a
> precompiled
> Windows binary for the PyCrypto kit??

I had a binary for 1.9a5, I'll try to compile one for current CVS and
put it up somewhere.

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040227/ac7f0a55/attachment.sig>

From itamar at itamarst.org  Fri Feb 27 09:51:55 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Fri, 27 Feb 2004 11:51:55 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <1077900294.1239.14.camel@petra>
References: 	 <51B62EFFBC83D6118ADA00096BB030A107CADDE0@usamcms7.mc.usa.xerox.com>
	 <1077900294.1239.14.camel@petra>
Message-ID: <1077900714.5800.26.camel@sheriffpony>

On Fri, 2004-02-27 at 11:44, Paul Swartz wrote:

> I had a binary for 1.9a5, I'll try to compile one for current CVS and
> put it up somewhere.

Put it on twisted.sf.net/contrib/ and link to it on
twistedmatrix.com/products/downloads/ in the dependencies section, as
radix did for pyOpenSSL.

-- 
Itamar Shtull-Trauring    http://itamarst.org
Looking for a job: http://itamarst.org/resume.html




From Benjamin.Schollnick at usa.xerox.com  Fri Feb 27 09:57:00 2004
From: Benjamin.Schollnick at usa.xerox.com (Schollnick, Benjamin)
Date: Fri, 27 Feb 2004 11:57:00 -0500
Subject: [Twisted-Python] SSH connection
Message-ID: <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.xerox.com>

> Summary - you need to install PyCrypto, and if you do it from source
> that means you need to do it with a compiler installed. You can use
> mingw compiler with a bit of work (there's a howto somewhere), or you
> can find a pre-compiled version.

I have looked and have not yet found a pre-compiled version....

Do you have any suggestions on where to find a pre-compiled version of
PyCrypto.

> http://webcleaner.sourceforge.net/ has instructions on compiling
> pycrypto on windows.

Compiling it, at least in the complicated version of the MingW instructions,

makes me nervous...  

For now, I'll be forced to hold off, or come up with a alternative....

		- Benjamin



From pje at telecommunity.com  Fri Feb 27 10:17:44 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 12:17:44 -0500
Subject: [Twisted-Python] Re: Components
In-Reply-To: <u1xogts2n.fsf@fitlinxx.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <1077860455.3688.189.camel@localhost>
Message-ID: <5.1.1.6.0.20040227120820.023f2100@telecommunity.com>

At 11:17 AM 2/27/04 -0500, David Bolen wrote:

>Obviously, the ABC approach doesn't seem to be adopted by Twisted or
>PyProtocols (at least for its official interfaces) themselves, but I
>haven't really seen references to advantages of the non-ABC variant.

The main advantages I have found to the "pure interface" style are:

* Interfaces may be read as documentation, because there is no behavior in 
the way.  All that's there is just signatures and docstrings.

* It's easier to see what is *really* the expected interface, as opposed to 
an accident of implementation.

ABC's have a tendency to start out clean, but then accrete a bunch of 
implementation junk over time.  With a pure interface, there's no tempation 
to do it, since there's absolutely no benefit to putting any implementation 
in the interface.

So, if you are creating a framework of any significance, your users will in 
all likelihood thank you for using the pure style instead of the ABC style, 
unless you have exceedingly strong discipline as far as being able to keep 
implementation out of the ABC, or are separately specifying/documenting the 
expected behavior anyway.




From exarkun at divmod.com  Fri Feb 27 10:37:41 2004
From: exarkun at divmod.com (exarkun at divmod.com)
Date: Fri, 27 Feb 2004 17:37:41 GMT
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
Message-ID: <20040227173741.26582.1135022928.divmod.quotient.1@erlang.divmod.net>

On Fri, 27 Feb 2004 08:17:31 -0800, "David E. Konerding" <dekonerding at lbl.gov> wrote:
>Hello, since nobody actually responding with a useful message regarding 
> my report, I'm
> reposting an extremely simple (1 page) example which exhibits the behavior.
> My example creates a gtkreactor and runs it.  A small reporter class is 
> run from a second thread.
> Under the gtk reactor, the log messages from the second thread are not 
> reported in a timely
> fashion (only once per second or so).  From my understanding the 
> messages should be printed more frequently (about once every 1/10th 
> second).  This does work under the wx and plain reactors, so I suspect 
> there is a defect in the gtk reactor.
> I would simply like to get a confirmation that my example is a valid 
> one, that the results I expect are valid, and that other
> people can reproduce my experience.  If that is the case then I will 
> submit a formal bug report.  All of this should be reproducible using 
> Twisted 1.2.0.  Things get even weirder if you remove the logging 
> support and replace it with all print statements.

  When I run this program, here is the output:

exarkun at boson:~$ python p.py 
2004/02/27 12:36 EST [-] Log opened.
2004/02/27 12:36 EST [-] 'ticker: 1077903388'
2004/02/27 12:36 EST [-] 'ticker: 1077903389'
2004/02/27 12:36 EST [-] 'ticker: 1077903390'
2004/02/27 12:36 EST [-] 'ThingyManager submitting'
2004/02/27 12:36 EST [-] TestThingy created
2004/02/27 12:36 EST [-] 'ThingyManager created'
2004/02/27 12:36 EST [-] 'ThingyManager calledInThread'
2004/02/27 12:36 EST [-] 'ticker: 1077903391'
2004/02/27 12:36 EST [-] 'ticker: 1077903392'
2004/02/27 12:36 EST [-] 'ticker: 1077903393'
2004/02/27 12:36 EST [-] 'ticker: 1077903394'
2004/02/27 12:36 EST [-] TestThingy run
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] 'ticker: 1077903395'
2004/02/27 12:36 EST [-] 'ticker: 1077903396'
2004/02/27 12:36 EST [-] 'ticker: 1077903397'
2004/02/27 12:36 EST [-] 'ticker: 1077903398'
2004/02/27 12:36 EST [-] 'ticker: 1077903399'
2004/02/27 12:36 EST [-] 'ticker: 1077903400'
2004/02/27 12:36 EST [-] 'ticker: 1077903401'
2004/02/27 12:36 EST [-] 'ticker: 1077903402'  <- I hit ^C here
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy message
2004/02/27 12:36 EST [-] TestThingy done
2004/02/27 12:36 EST [-] 'Reactor done'

  Jp




From pje at telecommunity.com  Fri Feb 27 10:47:21 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 12:47:21 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.x
 erox.com>
Message-ID: <5.1.1.6.0.20040227123431.01ee6290@telecommunity.com>

At 11:57 AM 2/27/04 -0500, Schollnick, Benjamin wrote:

> > Summary - you need to install PyCrypto, and if you do it from source
> > that means you need to do it with a compiler installed. You can use
> > mingw compiler with a bit of work (there's a howto somewhere), or you
> > can find a pre-compiled version.
>
>I have looked and have not yet found a pre-compiled version....
>
>Do you have any suggestions on where to find a pre-compiled version of
>PyCrypto.
>
> > http://webcleaner.sourceforge.net/ has instructions on compiling
> > pycrypto on windows.
>
>Compiling it, at least in the complicated version of the MingW instructions,
>
>makes me nervous...

Here's a simpler version of the instructions:

1) Get your machine set up to build extensions using the distutils
2) Download PyCrypto and run 'setup.py install'

Step 1 is a bit more complex than step 2, but is worth the trouble because 
it means you can build any Python extension for Windows without the author 
needing to produce a binary package for you.  It amounts to:

a) Install MinGW or Cygwin.  I personally prefer Cygwin because there 
aren't so many things to install.  Just pop over to cygwin.com, click 
"install now", and be sure to include the GCC compiler when you're asked 
what packages you want.  (DON'T install the Cygwin Python, btw, unless you 
have a good reason.  You don't need it if you're building extensions for 
Windows Python.)  Anyway, when you're done with the Cygwin install, you'll 
have a nice icon that opens up a Cygwin shell, which is a convenient prompt 
to run things from.

b) ensure that the MinGW or Cygwin tools are on your system path.  E.g. add 
'C:\cygwin\bin' to your PATH.

c) Do the steps to build a 'libpython2x.a' library.  (Step 2 of "Setup for 
Windows" on the page shown.)

d) add a distutils.cfg file to your C:\Python2x\Lib\distutils directory, 
containing the lines:

[build]
compiler=mingw32

this will make GCC your default compiler for any C extensions you build in 
future, so you won't need to do any of that '-c mingw32' junk.

Once you've done this, you can happily run 'python setup.py install' to 
install C extensions.




From dekonerding at lbl.gov  Fri Feb 27 10:49:47 2004
From: dekonerding at lbl.gov (David E. Konerding)
Date: Fri, 27 Feb 2004 09:49:47 -0800
Subject: [Twisted-Python] Second try at reporting gtk reactor problem
In-Reply-To: <20040227173741.26582.1135022928.divmod.quotient.1@erlang.divmod.net>
References: <20040227173741.26582.1135022928.divmod.quotient.1@erlang.divmod.net>
Message-ID: <403F833B.9020608@lbl.gov>

exarkun at divmod.com wrote:

>On Fri, 27 Feb 2004 08:17:31 -0800, "David E. Konerding" <dekonerding at lbl.gov> wrote:
>  
>
>>Hello, since nobody actually responding with a useful message regarding 
>>my report, I'm
>>reposting an extremely simple (1 page) example which exhibits the behavior.
>>My example creates a gtkreactor and runs it.  A small reporter class is 
>>run from a second thread.
>>Under the gtk reactor, the log messages from the second thread are not 
>>reported in a timely
>>fashion (only once per second or so).  From my understanding the 
>>messages should be printed more frequently (about once every 1/10th 
>>second).  This does work under the wx and plain reactors, so I suspect 
>>there is a defect in the gtk reactor.
>>I would simply like to get a confirmation that my example is a valid 
>>one, that the results I expect are valid, and that other
>>people can reproduce my experience.  If that is the case then I will 
>>submit a formal bug report.  All of this should be reproducible using 
>>Twisted 1.2.0.  Things get even weirder if you remove the logging 
>>support and replace it with all print statements.
>>    
>>
>
>  When I run this program, here is the output:
>
>exarkun at boson:~$ python p.py 
>2004/02/27 12:36 EST [-] Log opened.
>2004/02/27 12:36 EST [-] 'ticker: 1077903388'
>2004/02/27 12:36 EST [-] 'ticker: 1077903389'
>2004/02/27 12:36 EST [-] 'ticker: 1077903390'
>2004/02/27 12:36 EST [-] 'ThingyManager submitting'
>2004/02/27 12:36 EST [-] TestThingy created
>2004/02/27 12:36 EST [-] 'ThingyManager created'
>2004/02/27 12:36 EST [-] 'ThingyManager calledInThread'
>2004/02/27 12:36 EST [-] 'ticker: 1077903391'
>2004/02/27 12:36 EST [-] 'ticker: 1077903392'
>2004/02/27 12:36 EST [-] 'ticker: 1077903393'
>2004/02/27 12:36 EST [-] 'ticker: 1077903394'
>2004/02/27 12:36 EST [-] TestThingy run
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] 'ticker: 1077903395'
>2004/02/27 12:36 EST [-] 'ticker: 1077903396'
>2004/02/27 12:36 EST [-] 'ticker: 1077903397'
>2004/02/27 12:36 EST [-] 'ticker: 1077903398'
>2004/02/27 12:36 EST [-] 'ticker: 1077903399'
>2004/02/27 12:36 EST [-] 'ticker: 1077903400'
>2004/02/27 12:36 EST [-] 'ticker: 1077903401'
>2004/02/27 12:36 EST [-] 'ticker: 1077903402'  <- I hit ^C here
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy message
>2004/02/27 12:36 EST [-] TestThingy done
>2004/02/27 12:36 EST [-] 'Reactor done'
>  
>

OK, precisely: you're not seeing TestThingy messages as frequently as 
they are should be generated, and when you
hit ^C they start coming frequently (after the gtk mainloop is exited, I 
believe).

Now the only thing is to determine whether there is any real problem 
with the example. The only remaining
criticism I anticipate is the use of log. calls in the second thread, 
but removing them doesn't
substantially change the problem (actually, it just exhibits a 
*different* kind of unexpected behavior).

Dave



From db3l at fitlinxx.com  Fri Feb 27 12:08:01 2004
From: db3l at fitlinxx.com (David Bolen)
Date: 27 Feb 2004 14:08:01 -0500
Subject: [Twisted-Python] Re: Components
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost> <u1xogts2n.fsf@fitlinxx.com> <5.1.1.6.0.20040227120820.023f2100@telecommunity.com>
Message-ID: <usmgws5m6.fsf@fitlinxx.com>

"Phillip J. Eby" <pje at telecommunity.com> writes:

> * Interfaces may be read as documentation, because there is no
> behavior in the way.  All that's there is just signatures and
> docstrings.
> 
> * It's easier to see what is *really* the expected interface, as
> opposed to an accident of implementation.
> 
> ABC's have a tendency to start out clean, but then accrete a bunch of
> implementation junk over time.  With a pure interface, there's no
> tempation to do it, since there's absolutely no benefit to putting any
> implementation in the interface.

Interesting - wouldn't that stop them from being ABCs at that point?
The only thing in my ABCs with respect to implementatation is the
"raise NotImplementedError" for each method.  Basically the same as
the example in the PyProtocols documentation.  I really hadn't
envisioned ever adding anything other than that (after all, then it
wouldn't be an "Abstract" base class), although I suppose I could see
how someone might let something slip in.

> So, if you are creating a framework of any significance, your users
> will in all likelihood thank you for using the pure style instead of
> the ABC style, unless you have exceedingly strong discipline as far as
> being able to keep implementation out of the ABC, or are separately
> specifying/documenting the expected behavior anyway.

Speaking of documentation and convenience for users, it's nice when
inheriting from an ABC interface lets tools such as epydoc
automatically inherit the documentation strings for the methods as
well for classes that implement them.  Otherwise, do you find yourself
duplicating docstrings in the classes providing the interfaces, or how
do you handle that aspect of things.

I notice that a lot of the Twisted documentation makes use of the
links (such as the L{} epydoc notation) to cross-reference the
appropriate interface for the concrete classes that implement the
interfaces, whereas the ABC approach would seem to simplify that
aspect of things.

-- David




From radix at twistedmatrix.com  Fri Feb 27 12:14:57 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 27 Feb 2004 14:14:57 -0500
Subject: [Twisted-Python] Re: Components
In-Reply-To: <usmgws5m6.fsf@fitlinxx.com>
References: <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <1077860455.3688.189.camel@localhost> <u1xogts2n.fsf@fitlinxx.com> <5.1.1.6.0.20040227120820.023f2100@telecommunity.com> <usmgws5m6.fsf@fitlinxx.com>
Message-ID: <403F9731.2010805@twistedmatrix.com>

David Bolen wrote:
> "Phillip J. Eby" <pje at telecommunity.com> writes:
>>So, if you are creating a framework of any significance, your users
>>will in all likelihood thank you for using the pure style instead of
>>the ABC style, unless you have exceedingly strong discipline as far as
>>being able to keep implementation out of the ABC, or are separately
>>specifying/documenting the expected behavior anyway.
> 
> Speaking of documentation and convenience for users, it's nice when
> inheriting from an ABC interface lets tools such as epydoc
> automatically inherit the documentation strings for the methods as
> well for classes that implement them.  Otherwise, do you find yourself
> duplicating docstrings in the classes providing the interfaces, or how
> do you handle that aspect of things.

Hmm. I think the real solution to this is to make epydoc understand 
interfaces, and make it easy to see the interface-documentation when 
looking at its implementation.



-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040227/7fb6cbf3/attachment.sig>

From ralf at brainbot.com  Fri Feb 27 12:42:27 2004
From: ralf at brainbot.com (ralf at brainbot.com)
Date: Fri, 27 Feb 2004 20:42:27 +0100
Subject: [Twisted-Python] PB over SSH
In-Reply-To: <1077897420.5802.13.camel@sheriffpony> (Itamar
 Shtull-Trauring's message of "Fri, 27 Feb 2004 10:57:02 -0500")
References: <20040227013929.GA14590@dhcp-172-17-64-77.looksmart.com>
	<1077897420.5802.13.camel@sheriffpony>
Message-ID: <86fzcw2tss.fsf@stronzo.brainbot.com>

Itamar Shtull-Trauring <itamar at itamarst.org> writes:

>
> PB over SSH is... a good idea, but not the way to implement this, exactly.
>
> What you'd want is a SSH *transport*. It would allow you to run any
> twisted protocol over an existing conch SSH connection, transparently,
> just as you can run over TCP or SSL. In addition this transport should
> provide a credential object tied to the logged in user so you can use it
> with cred transparently. Plus a  SSH-to-TCP gateway transport that lets
> you listen or connect using the SSH portforwarding support.
>

Are there any examples on writing one own's transport? I'd be interested in
a PB transport. Any hints to get started?

> Once you've built this, PB over SSH is probably 10 lines of code.
>
>

-- 
brainbot technologies ag
boppstrasse 64 . 55118 mainz . germany
fon +49 6131 211639-1 . fax +49 6131 211639-2
http://brainbot.com/  mailto:ralf at brainbot.com



From pje at telecommunity.com  Fri Feb 27 12:56:22 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 14:56:22 -0500
Subject: [Twisted-Python] Distutils dependencies sprint at PyCon?
Message-ID: <5.1.1.6.0.20040227142938.01ea8030@mail.rapidsite.net>

Bob Ippolito and I have been talking about working on distutils dependency 
support while at PyCon.  The subject has recently come up on both the 
Zope3-Dev and Twisted mailing lists, with respect to being able to:

1) break up monolithic systems (PEAK, Zope, Twisted) into smaller package 
sets with dependencies

2) allow dependencies on other systems (e.g. Twisted using PyProtocols, 
PEAK using zope.publisher, etc.)

3) support painless install for end users (single command to download and 
install "everything needed") even at the cost of a little pain for the 
packager(s).

4) allow dependencies on packages that were packaged with the distutils, 
but *not* specifically designed to work with the dependency system.  In 
other words, if I want to depend on package X, I should not need to bug 
package X's author, I should be able to "just do it".

5) Support Python 2.2, while not requiring changes to the distutils, but 
being a possible candidate for upgrades to the distutils in 2.4.

If there's a group that would like to sprint to produce working 
deliverables for one or more aspects of this problem area (and I think 
PIMP/PackMan shows that solutions are within reach), I'd like to get some 
schedule commitments so I can plan a trip.  I wasn't originally planning to 
go to PyCon this year, but I *will* come if it means we can get this thing 
implemented.

If there is sufficient interest, let's take this to an appropriate mailing 
list (perhaps distutils-sig?) and Wiki to put together a detailed set of 
stories, as long as we can prioritize the list according to the needs of 
the folks who will be doing the development.

If you're interested in participating in such a sprint, please let me know 
ASAP, so I can make travel arrangements.  Thanks.

(Please reply to me personally rather than to the list(s); I will summarize 
and post an announcement of where to direct further discussion, if there's 
enough interest to get this off the ground.  Thanks!)





From golux at comcast.net  Fri Feb 27 16:53:32 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Fri, 27 Feb 2004 18:53:32 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077898228.5803.18.camel@sheriffpony>
References: <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com> <1077898228.5803.18.camel@sheriffpony>
Message-ID: <403FD87C.4090203@comcast.net>

Itamar Shtull-Trauring wrote:
> On Fri, 2004-02-27 at 09:26, Phillip J. Eby wrote:
> 
>>What is Twisted as a whole really for?  ;)
> 
> 
> Networking applications. That is, programs that involve communicating
> with other programs over a network, typically TCP/IP. Whereas
> "enterprise" is to me anyway a meaningless word in this context. What is
> the definition of an "enterprise application"?

I submit that the term "enterprise" has been over-buzzed to
the point of near-meaninglessness, so it's pretty useless
except in marketing literature, where meaninglessness is
a useful quality.  :)

That said, to me an "enterprise application" is any application
that is specifically designed to interoperate with, and/or
enable interoperability of, other software that is used in the
processes of a "business" (in the most general sense).

I think that's about as specific as you can get.  Like I say,
*almost* meaningless, in that it could apply to almost anything,
given enough "spin".  ;)

- Steve




From pje at telecommunity.com  Fri Feb 27 17:45:19 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 19:45:19 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403FD87C.4090203@comcast.net>
References: <1077898228.5803.18.camel@sheriffpony>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
 <1077898228.5803.18.camel@sheriffpony>
Message-ID: <5.1.1.6.0.20040227193737.02868960@telecommunity.com>

At 06:53 PM 2/27/04 -0500, Stephen Waterbury wrote:
>Itamar Shtull-Trauring wrote:
>>On Fri, 2004-02-27 at 09:26, Phillip J. Eby wrote:
>>
>>>What is Twisted as a whole really for?  ;)
>>
>>Networking applications. That is, programs that involve communicating
>>with other programs over a network, typically TCP/IP. Whereas
>>"enterprise" is to me anyway a meaningless word in this context. What is
>>the definition of an "enterprise application"?
>
>I submit that the term "enterprise" has been over-buzzed to
>the point of near-meaninglessness, so it's pretty useless
>except in marketing literature, where meaninglessness is
>a useful quality.  :)
>
>That said, to me an "enterprise application" is any application
>that is specifically designed to interoperate with, and/or
>enable interoperability of, other software that is used in the
>processes of a "business" (in the most general sense).
>
>I think that's about as specific as you can get.  Like I say,
>*almost* meaningless, in that it could apply to almost anything,
>given enough "spin".  ;)

I'm actually using it a bit more specifically than that; I'm specifically 
targeting applications that have a "shared resource domain" (and whose data 
integrity or availability has fiduciary consequences), or tools needed to 
develop, maintain or support such applications.  IOW, a desktop email 
client (for example) wouldn't count, but a group issue tracker for emailed 
requests would.

By "fiduciary consequences", I mean that if it's not running when it's 
supposed to be, or data integrity isn't maintained, it results in financial 
losses.  By "shared resource domain", I effectively mean a multi-user 
application, or shared processing resources like a mail server.  I think 
you'll find that these two concepts (shared resources and fiduciary 
responsibility) are the common themes underlying what most people mean when 
they talk about "enterprise" applications.  Or at least, I think people who 
*buy* enterprise applications would stress these as defining 
characteristics, whether the people who *sell* such applications really 
fulfill them or not.  :)




From glyph at twistedmatrix.com  Fri Feb 27 18:02:58 2004
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Fri, 27 Feb 2004 20:02:58 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <5.1.1.6.0.20040227193737.02868960@telecommunity.com>
References: <1077898228.5803.18.camel@sheriffpony>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>
	 <403E2A9F.908@twistedmatrix.com>
	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
	 <1077898228.5803.18.camel@sheriffpony>
	 <5.1.1.6.0.20040227193737.02868960@telecommunity.com>
Message-ID: <1077930178.3237.226.camel@localhost>

On Fri, 2004-02-27 at 19:45, Phillip J. Eby wrote:

> I'm actually using it a bit more specifically than that; I'm specifically 
> targeting applications that have a "shared resource domain" (and whose data 
> integrity or availability has fiduciary consequences), or tools needed to 
> develop, maintain or support such applications.  IOW, a desktop email 
> client (for example) wouldn't count, but a group issue tracker for emailed 
> requests would.

Philip, thank you for this clarification.  IMHO the world would be a
better place if software developers were legally required to fulfill
your requirements specified here before calling their software
"enterprise" :).




From golux at comcast.net  Fri Feb 27 19:25:25 2004
From: golux at comcast.net (Stephen Waterbury)
Date: Fri, 27 Feb 2004 21:25:25 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <1077930178.3237.226.camel@localhost>
References: <1077898228.5803.18.camel@sheriffpony>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>	 <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost>	 <403E2A9F.908@twistedmatrix.com>	 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>	 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>	 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>	 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>	 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>	 <1077898228.5803.18.camel@sheriffpony>	 <5.1.1.6.0.20040227193737.02868960@telecommunity.com> <1077930178.3237.226.camel@localhost>
Message-ID: <403FFC15.2040100@comcast.net>

Glyph Lefkowitz wrote:
> On Fri, 2004-02-27 at 19:45, Phillip J. Eby wrote:
> 
> 
>>I'm actually using it a bit more specifically than that; I'm specifically 
>>targeting applications that have a "shared resource domain" (and whose data 
>>integrity or availability has fiduciary consequences), or tools needed to 
>>develop, maintain or support such applications.  IOW, a desktop email 
>>client (for example) wouldn't count, but a group issue tracker for emailed 
>>requests would.
> 
> Philip, thank you for this clarification.  IMHO the world would be a
> better place if software developers were legally required to fulfill
> your requirements specified here before calling their software
> "enterprise" :).

Hmm ... not very realistic in terms of "legally", methinks.
But I don't believe you seriously expect that to ever happen.
For one thing, legality largely hinges on how expensive a
lawyer you can afford, so any legal requirement would
simply be a handicap to small vendors.  ;)

I sure agree that Phillip's definition is useful, but there
is also a sense in which any failure of any software used
by a company will have fiduciary consequences.  After all,
as Einstein proved, Time = Money ;), so if software screws
up while people are using it on the clock, it costs you.

- Steve




From pje at telecommunity.com  Fri Feb 27 21:00:23 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 23:00:23 -0500
Subject: [Twisted-Python] Components
In-Reply-To: <403FFC15.2040100@comcast.net>
References: <1077930178.3237.226.camel@localhost>
 <1077898228.5803.18.camel@sheriffpony>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226193915.023feec0@telecommunity.com>
 <5.1.0.14.0.20040227091530.02402750@mail.telecommunity.com>
 <1077898228.5803.18.camel@sheriffpony>
 <5.1.1.6.0.20040227193737.02868960@telecommunity.com>
 <1077930178.3237.226.camel@localhost>
Message-ID: <5.1.0.14.0.20040227225505.02b7e290@mail.telecommunity.com>

At 09:25 PM 2/27/04 -0500, Stephen Waterbury wrote:
>I sure agree that Phillip's definition is useful, but there
>is also a sense in which any failure of any software used
>by a company will have fiduciary consequences.  After all,
>as Einstein proved, Time = Money ;), so if software screws
>up while people are using it on the clock, it costs you.

Perhaps I should have said "directly measurable", or maybe "clear and 
present" fiduciary consequences.  But at this point it becomes pointless 
nitpicking, unless there is in fact a use case for splitting hairs to 
define whether something is or isn't an "enterprise" application.  From a 
practical perspective, what gets into PEAK is heavily influenced by the 
needs of software development and system administration at my "day job", 
dealing with a highly heterogeneous processing environment including 
numerous internal systems and business partner APIs.




From pje at telecommunity.com  Fri Feb 27 21:48:44 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Fri, 27 Feb 2004 23:48:44 -0500
Subject: [Twisted-Python] Generic functions using PyProtocols (was Re:
  Components)
In-Reply-To: <5.1.0.14.0.20040227092743.03091a70@mail.telecommunity.com>
References: <1077860455.3688.189.camel@localhost>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
Message-ID: <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>

At 09:58 AM 2/27/04 -0500, Phillip J. Eby wrote:
>At 12:40 AM 2/27/04 -0500, Glyph Lefkowitz wrote:
>>(BTW: a common idiom for using interfaces is to scope method names.  An
>>optimization I want to add to Twisted at some point is stateless
>>interface-method-call syntax which can do this efficiently, something
>>like: IWhatever.what(x).  I believe you should be able to avoid a bunch
>>of Python object allocation overhead by doing it that way.  Does
>>PyProtocols provide any such facility?)
>
>Not at the moment.  What I'd like to do at some point is add 
>single-dispatch generic functions, though.

Just for the heck of it, I thought I'd try whipping up a single-dispatch 
generic function using PyProtocols.  It turned out to be much easier than I 
thought; only 19 lines, in fact!

from protocols import Protocol, adapt, declareAdapter
from new import instancemethod

class GenericFunction(Protocol):

     def __init__(self, defaultFunc=None):
         Protocol.__init__(self)
         if defaultFunc is not None:
             self.add(defaultFunc,[object])

     def __call__(__self, self, *__args,**kw):
         return adapt(self,__self)(*__args,**kw)

     def add(self,func,forTypes=(),forProtocols=()):
         declareAdapter(
             lambda ob,proto: instancemethod(func,ob,type(ob)),
             provides=[self], forTypes=forTypes, forProtocols=forProtocols
         )

# Quick test/demo

def g(ob):
     print ob, "is of unknown type"

g = GenericFunction(g)


class A(object): pass
class B(A): pass
class C(A): pass

def gA(ob):
     print ob, "is an A"

g.add(gA,[A])

def gB(ob):
     print ob, "is a B"

g.add(gB,[B])


# Try it out

g(A())
g(B())
g(C())
g([])

# ====


It could probably do with some kind of 'super()'-like mechanism, but that 
would make for a rather more complex implementation, alas.  Still, it's not 
bad at all and I can think of a few places I might actually use it.  For 
example, it'd be great for writing "visitor" algorithms that need to do 
different behaviors based on the type or interfaces of the nodes.




From radix at twistedmatrix.com  Fri Feb 27 22:21:05 2004
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Sat, 28 Feb 2004 00:21:05 -0500
Subject: [Twisted-Python] Generic functions using PyProtocols (was Re:
  Components)
In-Reply-To: <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
References: <1077860455.3688.189.camel@localhost> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net> <403E284E.8040408@twistedmatrix.com> <1077815652.3234.109.camel@localhost> <403E2A9F.908@twistedmatrix.com> <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net> <5.1.1.6.0.20040226145050.024bce30@telecommunity.com> <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com> <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
Message-ID: <40402541.9050403@twistedmatrix.com>

Phillip J. Eby wrote:
> At 09:58 AM 2/27/04 -0500, Phillip J. Eby wrote:

>> At 12:40 AM 2/27/04 -0500, Glyph Lefkowitz wrote:
>> Not at the moment.  What I'd like to do at some point is add 
>> single-dispatch generic functions, though.
> 
> Just for the heck of it, I thought I'd try whipping up a single-dispatch 
> generic function using PyProtocols.  It turned out to be much easier 
> than I thought; only 19 lines, in fact!

> # Quick test/demo
...

> def gA(ob):
>     print ob, "is an A"
> g.add(gA,[A])
> def gB(ob):
>     print ob, "is a B"
> g.add(gB,[B])

Wow. glyph explained to me what he wanted before with the 
no-instantiation IFoo.meth(x), but I didn't realize that it really _is_ 
like generic functions. That's awesome. :-)

-- 
  Twisted | Christopher Armstrong: International Man of Twistery
   Radix  |          Release Manager,  Twisted Project
---------+           http://radix.twistedmatrix.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 256 bytes
Desc: OpenPGP digital signature
URL: </pipermail/twisted-python/attachments/20040228/705dd4bc/attachment.sig>

From pje at telecommunity.com  Sat Feb 28 09:01:09 2004
From: pje at telecommunity.com (Phillip J. Eby)
Date: Sat, 28 Feb 2004 11:01:09 -0500
Subject: [Twisted-Python] Generic functions using PyProtocols (was
  Re: Components)
In-Reply-To: <40402541.9050403@twistedmatrix.com>
References: <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
 <1077860455.3688.189.camel@localhost>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <0C875CB8-687D-11D8-AB59-000A95A50FB2@fuhm.net>
 <403E284E.8040408@twistedmatrix.com>
 <1077815652.3234.109.camel@localhost>
 <403E2A9F.908@twistedmatrix.com>
 <4D920CB6-6890-11D8-AB59-000A95A50FB2@fuhm.net>
 <5.1.1.6.0.20040226145050.024bce30@telecommunity.com>
 <5.1.1.6.0.20040226182840.01e90a20@telecommunity.com>
 <5.1.0.14.0.20040227233838.025ddb20@mail.telecommunity.com>
Message-ID: <5.1.0.14.0.20040228105617.02dd3170@mail.telecommunity.com>

At 12:21 AM 2/28/04 -0500, Christopher Armstrong wrote:

>Wow. glyph explained to me what he wanted before with the no-instantiation 
>IFoo.meth(x), but I didn't realize that it really _is_ like generic 
>functions. That's awesome. :-)

Well, a generic function with a couple of interesting twists, like being 
able to say that a particular signature is based on a protocol rather than 
a specific class, with transitive adaptation taking place.  So, if the 
closer adaptation path is that the object gets adapted to an interface you 
support, then that's what you'll get passed to the function.

The other twist is that you can create a new generic function, and then 
declare that it is "implied by" another generic function.  You'll then 
"inherit" all of the definitions from the old generic function, allowing 
you to then just override certain specific implementations of the function 
in your new function.




From z3p at twistedmatrix.com  Sat Feb 28 12:21:01 2004
From: z3p at twistedmatrix.com (Paul Swartz)
Date: Sat, 28 Feb 2004 14:21:01 -0500
Subject: [Twisted-Python] SSH connection
In-Reply-To: <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.xerox.com>
References: 	 <51B62EFFBC83D6118ADA00096BB030A107CADDE2@usamcms7.mc.usa.xerox.com>
Message-ID: <1077996061.12765.1.camel@petra>

On Fri, 2004-02-27 at 11:57, Schollnick, Benjamin wrote:
> > Summary - you need to install PyCrypto, and if you do it from source
> > that means you need to do it with a compiler installed. You can use
> > mingw compiler with a bit of work (there's a howto somewhere), or you
> > can find a pre-compiled version.
> 
> I have looked and have not yet found a pre-compiled version....

I didn't see a e-mail, so I'll say it.  MFen put up precompiled versions
of PyCrypto for Win32, Python versions 2.2 and 2.3.  They're available
at http://twisted.sf.net/contrib/

-p
-- 
      Paul Swartz
(o_   z3p at twistedmatrix dot com
//\   http://www.twistedmatrix.com/users/z3p.twistd/
V_/_  AIM: Z3Penguin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040228/5d09af1d/attachment.sig>

From dave at krondo.com  Sat Feb 28 14:18:02 2004
From: dave at krondo.com (Dave Peticolas)
Date: Sat, 28 Feb 2004 13:18:02 -0800
Subject: [Twisted-Python] Typo in /twisted/test/test_enterprise.py -
	Twisted 1.2 RC2
In-Reply-To: <403C7C0B.5060108@ivsn.com>
References: <403C7C0B.5060108@ivsn.com>
Message-ID: <1078003082.27347.51.camel@oneiros>

This is fixed in CVS, thanks.

dave

On Wed, 2004-02-25 at 02:42, Paul Reznicek wrote:
> Hi,
> 
> in lines 520-522 is a typo due editor copy of previous section.
> The code is working, but so clear for reading.
> Here the suggestion, original code commented out:
> 
> if psycopg is None: PsycopgTestCase.skip = "psycopg module not
> available"
> else:
>     try:
> #         conn = psycopg.connect(database=PostgresTestCase.DB_NAME,
> #                              user=PostgresTestCase.DB_USER,
> #                              password=PostgresTestCase.DB_PASS)
>         conn = psycopg.connect(database=PsycopgTestCase.DB_NAME,
>                                user=PsycopgTestCase.DB_USER,
>                                password=PsycopgTestCase.DB_PASS)
> 
> TWISTED IS SUPER !!!
> Paul _______________________________________________ Twisted-Python
> mailing list Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20040228/83ddd22f/attachment.sig>

From itamar at itamarst.org  Sat Feb 28 16:01:11 2004
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sat, 28 Feb 2004 18:01:11 -0500
Subject: [Twisted-Python] Any one available for contract work?
Message-ID: <1078009271.6930.26.camel@sheriffpony>

Knowledge of web services and ebXML would be useful.





