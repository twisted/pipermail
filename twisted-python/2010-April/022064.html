<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistd and init.d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twistd%20and%20init.d&In-Reply-To=20100421121656.GF15611%40boombah.thristian.org">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022063.html">
   <LINK REL="Next"  HREF="022065.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistd and init.d</H1>
    <B>gary clark</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20twistd%20and%20init.d&In-Reply-To=20100421121656.GF15611%40boombah.thristian.org"
       TITLE="[Twisted-Python] twistd and init.d">burslem2001 at yahoo.com
       </A><BR>
    <I>Wed Apr 21 08:27:29 EDT 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="022063.html">[Twisted-Python] twistd and init.d
</A></li>
        <LI>Next message: <A HREF="022065.html">[Twisted-Python] twistd and init.d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22064">[ date ]</a>
              <a href="thread.html#22064">[ thread ]</a>
              <a href="subject.html#22064">[ subject ]</a>
              <a href="author.html#22064">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have written an init.d script thats starts and stops a twistd. You need to create a .tac file and create a daemon. A wee bit more tricky but you can start twistd fine.

Thanks,
Garyc

--- On Wed, 4/21/10, Tim Allen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">screwtape at froup.com</A>&gt; wrote:

&gt;<i> From: Tim Allen &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">screwtape at froup.com</A>&gt;
</I>&gt;<i> Subject: Re: [Twisted-Python] twistd and init.d
</I>&gt;<i> To: &quot;Twisted general discussion&quot; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
</I>&gt;<i> Date: Wednesday, April 21, 2010, 7:16 AM
</I>&gt;<i> On Wed, Apr 21, 2010 at 01:38:09PM
</I>&gt;<i> +0200, Don Schoeman wrote:
</I>&gt;<i> &gt;&#160; &#160; This works fine when running
</I>&gt;<i> /etc/init.d/ghserver start and
</I>&gt;<i> &gt;&#160; &#160; /etc/init.d/ghserver stop. The script
</I>&gt;<i> also run when I boot since the
</I>&gt;<i> &gt;&#160; &#160; logger actually logs the &quot;GHServer:
</I>&gt;<i> Starting&quot; text to the
</I>&gt;<i> &gt;&#160; &#160; /var/log/messages file. However, my
</I>&gt;<i> service actually does not start. There
</I>&gt;<i> &gt;&#160; &#160; is no pid to be found anywhere, there are
</I>&gt;<i> no error logs anywhere, just
</I>&gt;<i> &gt;&#160; &#160; nothing. I might be doing something wrong
</I>&gt;<i> here but is there someone who's
</I>&gt;<i> &gt;&#160; &#160; gone through this process and can provide
</I>&gt;<i> some samples how they did it?
</I>&gt;<i> 
</I>&gt;<i> I haven't written an init-script for twistd myself, I just
</I>&gt;<i> use the one
</I>&gt;<i> auto-generated by tap2rpm. You can compare your script to
</I>&gt;<i> the template
</I>&gt;<i> tap2rpm uses and see if that gives you any clues:
</I>&gt;<i> 
</I>&gt;<i> &#160; &#160; <A HREF="http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17&#160;">http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17&#160;</A>
</I>&gt;<i> &#160; 
</I>&gt;<i> It surprises me that you say you can tell that the script
</I>&gt;<i> runs at boot
</I>&gt;<i> because you can see it in /var/log/messages - although most
</I>&gt;<i> Linux
</I>&gt;<i> distros hide the boot-script messages by default, they
</I>&gt;<i> usually provide
</I>&gt;<i> a way to display them for debugging purposes such as these
</I>&gt;<i> (different
</I>&gt;<i> distributions use different actions to trigger boot
</I>&gt;<i> messages; if you
</I>&gt;<i> can't find instructions for your distribution online, you
</I>&gt;<i> might try
</I>&gt;<i> hitting Escape a few times at different parts of the boot
</I>&gt;<i> sequence).
</I>&gt;<i> 
</I>&gt;<i> Finally, in my limited experience of diagnosing scripts
</I>&gt;<i> that work from
</I>&gt;<i> an interactive shell but not at boot time, you might want
</I>&gt;<i> to look for
</I>&gt;<i> code that uses environment variables. $EMPLOYER once had
</I>&gt;<i> some scripts
</I>&gt;<i> that got some particular setting from an environment
</I>&gt;<i> variable that was
</I>&gt;<i> only set by interactive shells - so if you ssh'd to the
</I>&gt;<i> machine and ran
</I>&gt;<i> the code, it'd be fine, but it crashed when run at bootup.
</I>&gt;<i> 
</I>&gt;<i> CentOS (and perhaps other Linux distributions) has a tool
</I>&gt;<i> called
</I>&gt;<i> /sbin/service. If you run &quot;/sbin/service ghserver start&quot;
</I>&gt;<i> rather than
</I>&gt;<i> &quot;/etc/init.d/ghserver start&quot;, /sbin/service will start the
</I>&gt;<i> service in
</I>&gt;<i> a clean, boot-like environment and you might get more
</I>&gt;<i> debugging clues
</I>&gt;<i> that way.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> 
</I>

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="022063.html">[Twisted-Python] twistd and init.d
</A></li>
	<LI>Next message: <A HREF="022065.html">[Twisted-Python] twistd and init.d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22064">[ date ]</a>
              <a href="thread.html#22064">[ thread ]</a>
              <a href="subject.html#22064">[ subject ]</a>
              <a href="author.html#22064">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
