<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistd and init.d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20and%20init.d&In-Reply-To=%3C20100421121656.GF15611%40boombah.thristian.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054559.html">
   <LINK REL="Next"  HREF="054561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistd and init.d</H1>
    <B>Tim Allen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20and%20init.d&In-Reply-To=%3C20100421121656.GF15611%40boombah.thristian.org%3E"
       TITLE="[Twisted-Python] twistd and init.d">screwtape at froup.com
       </A><BR>
    <I>Wed Apr 21 06:16:56 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054559.html">[Twisted-Python] twistd and init.d
</A></li>
        <LI>Next message (by thread): <A HREF="054561.html">[Twisted-Python] twistd and init.d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54560">[ date ]</a>
              <a href="thread.html#54560">[ thread ]</a>
              <a href="subject.html#54560">[ subject ]</a>
              <a href="author.html#54560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Apr 21, 2010 at 01:38:09PM +0200, Don Schoeman wrote:
&gt;<i>    This works fine when running /etc/init.d/ghserver start and
</I>&gt;<i>    /etc/init.d/ghserver stop. The script also run when I boot since the
</I>&gt;<i>    logger actually logs the &quot;GHServer: Starting&quot; text to the
</I>&gt;<i>    /var/log/messages file. However, my service actually does not start. There
</I>&gt;<i>    is no pid to be found anywhere, there are no error logs anywhere, just
</I>&gt;<i>    nothing. I might be doing something wrong here but is there someone who's
</I>&gt;<i>    gone through this process and can provide some samples how they did it?
</I>
I haven't written an init-script for twistd myself, I just use the one
auto-generated by tap2rpm. You can compare your script to the template
tap2rpm uses and see if that gives you any clues:

    <A HREF="http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17">http://twistedmatrix.com/trac/browser/trunk/twisted/scripts/tap2rpm.py#L17</A>    
It surprises me that you say you can tell that the script runs at boot
because you can see it in /var/log/messages - although most Linux
distros hide the boot-script messages by default, they usually provide
a way to display them for debugging purposes such as these (different
distributions use different actions to trigger boot messages; if you
can't find instructions for your distribution online, you might try
hitting Escape a few times at different parts of the boot sequence).

Finally, in my limited experience of diagnosing scripts that work from
an interactive shell but not at boot time, you might want to look for
code that uses environment variables. $EMPLOYER once had some scripts
that got some particular setting from an environment variable that was
only set by interactive shells - so if you ssh'd to the machine and ran
the code, it'd be fine, but it crashed when run at bootup.

CentOS (and perhaps other Linux distributions) has a tool called
/sbin/service. If you run &quot;/sbin/service ghserver start&quot; rather than
&quot;/etc/init.d/ghserver start&quot;, /sbin/service will start the service in
a clean, boot-like environment and you might get more debugging clues
that way.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054559.html">[Twisted-Python] twistd and init.d
</A></li>
	<LI>Next message (by thread): <A HREF="054561.html">[Twisted-Python] twistd and init.d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54560">[ date ]</a>
              <a href="thread.html#54560">[ thread ]</a>
              <a href="subject.html#54560">[ subject ]</a>
              <a href="author.html#54560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
