<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] twistd and init.d
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20and%20init.d&In-Reply-To=%3C924638.49082.qm%40web112508.mail.gq1.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="054563.html">
   <LINK REL="Next"  HREF="054565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] twistd and init.d</H1>
    <B>gary clark</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20twistd%20and%20init.d&In-Reply-To=%3C924638.49082.qm%40web112508.mail.gq1.yahoo.com%3E"
       TITLE="[Twisted-Python] twistd and init.d">burslem2001 at yahoo.com
       </A><BR>
    <I>Wed Apr 21 07:15:54 MDT 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="054563.html">[Twisted-Python] twistd and init.d
</A></li>
        <LI>Next message (by thread): <A HREF="054565.html">[Twisted-Python] twistd and init.d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54564">[ date ]</a>
              <a href="thread.html#54564">[ thread ]</a>
              <a href="subject.html#54564">[ subject ]</a>
              <a href="author.html#54564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
My understanding is the twistd will have a default log twistd.log. 
 
Thanks,
Garyc

--- On Wed, 4/21/10, Don Schoeman &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">don at delphexonline.com</A>&gt; wrote:


From: Don Schoeman &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">don at delphexonline.com</A>&gt;
Subject: Re: [Twisted-Python] twistd and init.d
To: &quot;Twisted general discussion&quot; &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at twistedmatrix.com</A>&gt;
Date: Wednesday, April 21, 2010, 7:54 AM


Sorry, I mean't to say I will use the full path to twistd (i.e. /usr/bin/twistd) and see if that works.

Don Schoeman wrote: 
Thanks for the tips guys,

Maartin, I have a feeling that you may be correct. I'm going to see if I can't set the python path within the script.

Tim, the only reason I can see anything in  /var/logs/messages is because I use the &quot;logger&quot; tool to log those messages directly from the bash shell script. See the script below.

Kind Regards,
Don


Don Schoeman wrote: 
Hi guys,

My application is being executed using twistd as per documentation. All is working fine but I need to have the service start automatically at boot time.

So as a test I've created a script in /etc/init.d/ which looks like this:

#! /bin/sh
### BEGIN INIT INFO
# Provides:          ghserver
# Required-Start:    $local_fs $remote_fs $network $syslog
# Required-Stop:     $local_fs $remote_fs $network $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start/stop GHServer server
### END INIT INFO

logger &quot;GHServer: Start script executed&quot;
GH_SERVER_PATH=&quot;/home/myname/Python/ghserver&quot;
export PYTHONPATH=&quot;$GH_SERVER_PATH:$PYTHONPATH&quot;

case &quot;$1&quot; in
  start)
    logger &quot;GHServer: Starting&quot;
    echo &quot;Starting GHServer...&quot;
    twistd -y &quot;$GH_SERVER_PATH/ghserverapp.py&quot; -l &quot;$GH_SERVER_PATH/ghserver.log&quot; --pidfile &quot;$GH_SERVER_PATH/twistd.pid&quot;
    ;;
  stop)
    logger &quot;GHServer: Stopping&quot;
    echo &quot;Stopping GHServer...&quot;
    kill `cat $GH_SERVER_PATH/twistd.pid`
    ;;
  *)
    logger &quot;GHServer: Invalid usage&quot;
    echo &quot;Usage: /etc/init.d/ghserver {start|stop}&quot;
    exit 1
    ;;
esac

exit 0


This works fine when running /etc/init.d/ghserver start and /etc/init.d/ghserver stop. The script also run when I boot since the logger actually logs the &quot;GHServer: Starting&quot; text to the /var/log/messages file. However, my service actually does not start. There is no pid to be found anywhere, there are no error logs anywhere, just nothing. I might be doing something wrong here but is there someone who's gone through this process and can provide some samples how they did it? Any help will be greatly appreciated.

Kind Regards,
Don



_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
  
_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
  
-----Inline Attachment Follows-----


_______________________________________________
Twisted-Python mailing list
<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20100421/4ebbfca5/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="054563.html">[Twisted-Python] twistd and init.d
</A></li>
	<LI>Next message (by thread): <A HREF="054565.html">[Twisted-Python] twistd and init.d
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#54564">[ date ]</a>
              <a href="thread.html#54564">[ thread ]</a>
              <a href="subject.html#54564">[ subject ]</a>
              <a href="author.html#54564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
