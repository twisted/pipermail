<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] schemas (in Zope and Foolscap)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20schemas%20%28in%20Zope%20and%20Foolscap%29&In-Reply-To=%3C87hco088zp.fsf%40lothar.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048192.html">
   <LINK REL="Next"  HREF="048276.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] schemas (in Zope and Foolscap)</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20schemas%20%28in%20Zope%20and%20Foolscap%29&In-Reply-To=%3C87hco088zp.fsf%40lothar.com%3E"
       TITLE="[Twisted-Python] schemas (in Zope and Foolscap)">warner at lothar.com
       </A><BR>
    <I>Thu Jul 19 13:54:34 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048192.html">[Twisted-Python] schemas (in Zope and Foolscap)
</A></li>
        <LI>Next message (by thread): <A HREF="048276.html">[Twisted-Python] schemas (in Zope and Foolscap)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48274">[ date ]</a>
              <a href="thread.html#48274">[ thread ]</a>
              <a href="subject.html#48274">[ subject ]</a>
              <a href="author.html#48274">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
[my apologies if this gets duplicated, I've been having SMTP problems]

Stephen Waterbury &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">waterbug at pangalactic.us</A>&gt; writes:

&gt;<i> I am in the process of converting some of my code to use zope.schema
</I>&gt;<i> instead of a similar thing that I independently invented.  Since I am
</I>&gt;<i> also planning on using Foolscap, and since Foolscap has a schema
</I>&gt;<i> module, I compared zope.schema and foolscap.schema, and to me they
</I>&gt;<i> seem to have much overlap in design intent.  In particular, in the
</I>&gt;<i> zope.schema use cases ...
</I>
&gt;<i> So I was wondering -- would it make sense to use zope.schema
</I>&gt;<i> in Foolscap?
</I>
Yeah, that sounds quite intriguing. The Foolscap schemas serve a number of
similar purposes:

#1: provide a clear place to document a program's remote interfaces. This
    role is aimed at humans, not programs.

#2: make it convenient to enforce those interfaces on the receiving end.. by
    relying upon the guards, the code that actually does stuff is easier to
    read and easier to analyze for other potential problems

#3: enforce those interfaces on the sending end, to bring the discovery of
    programming errors closer to their cause

#4: enforce those interfaces at the receiving *wire*, to mitigate
    resource-exhaustion attacks

#1 is satisfied by pretty much anything, as it's more a set of documentation
#conventions than anything else. The existing zope.interface.Interface class
#does this pretty well.

The rest require that the interfaces be machine-parseable. I enhanced z.i's
Interface (in foolscap.RemoteInterface) to allow the arguments and return
values to have meaning.. if zope.schema does something similar, I'd love to
take a look at it and see if it can capture the same expressiveness.

I'm undecided as to whether #4 is a good idea or not. It seemed like a good
idea when I first started, but I've had some smart people tell me it's not
the best place to attempt to solve DoS problems. Worse yet, the
implementation is so incomplete that I've personally had to disable schema
checking on things that would otherwise be useful (in particular I think a
&quot;PolyConstraint&quot; in which the two branches are both containers fails to match
the tokens on the wire correctly, even though such a thing would be quite
useful just at the post-serialization phase). So I'm tempted to drop #4 as a
design criterion and if z.s can represent enough to make that work, great, if
not, drop the feature.

&gt;<i> A nice practical factor is that zope.schema has been packaged as
</I>&gt;<i> a separate namespace module, similarly to zope.interface.
</I>
I have to admit that I'm slightly hesitant to add a new dependency. But maybe
it isn't too big or too unwieldy. There doesn't seem to be a debian package
for it, though..

But I'll definitely check it out. Thanks for the suggestion!

 -Brian


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048192.html">[Twisted-Python] schemas (in Zope and Foolscap)
</A></li>
	<LI>Next message (by thread): <A HREF="048276.html">[Twisted-Python] schemas (in Zope and Foolscap)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48274">[ date ]</a>
              <a href="thread.html#48274">[ thread ]</a>
              <a href="subject.html#48274">[ subject ]</a>
              <a href="author.html#48274">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
