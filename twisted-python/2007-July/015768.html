<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] schemas (in Zope and Foolscap)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20schemas%20%28in%20Zope%20and%20Foolscap%29&In-Reply-To=87hco088zp.fsf%40lothar.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015766.html">
   <LINK REL="Next"  HREF="015686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] schemas (in Zope and Foolscap)</H1>
    <B>Stephen Waterbury</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20schemas%20%28in%20Zope%20and%20Foolscap%29&In-Reply-To=87hco088zp.fsf%40lothar.com"
       TITLE="[Twisted-Python] schemas (in Zope and Foolscap)">waterbug at pangalactic.us
       </A><BR>
    <I>Thu Jul 19 20:36:36 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015766.html">[Twisted-Python] schemas (in Zope and Foolscap)
</A></li>
        <LI>Next message: <A HREF="015686.html">[Twisted-Python] More general process.Process class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15768">[ date ]</a>
              <a href="thread.html#15768">[ thread ]</a>
              <a href="subject.html#15768">[ subject ]</a>
              <a href="author.html#15768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Brian Warner wrote:
&gt;<i> [my apologies if this gets duplicated, I've been having SMTP problems]
</I>
It appears that this message was relayed twice, once today and once
yesterday, and both times I only received the cc to me, and not the
copy that was addressed to the twisted-python list.  So I'm quoting
the whole message below in case others haven't seen it.

&gt;<i> Stephen Waterbury &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">waterbug at pangalactic.us</A>&gt; writes:
</I>&gt;<i> 
</I>&gt;&gt;<i> I am in the process of converting some of my code to use zope.schema
</I>&gt;&gt;<i> instead of a similar thing that I independently invented.  Since I am
</I>&gt;&gt;<i> also planning on using Foolscap, and since Foolscap has a schema
</I>&gt;&gt;<i> module, I compared zope.schema and foolscap.schema, and to me they
</I>&gt;&gt;<i> seem to have much overlap in design intent.  In particular, in the
</I>&gt;&gt;<i> zope.schema use cases ...
</I>&gt;<i> 
</I>&gt;&gt;<i> So I was wondering -- would it make sense to use zope.schema
</I>&gt;&gt;<i> in Foolscap?
</I>&gt;<i> 
</I>&gt;<i> Yeah, that sounds quite intriguing. The Foolscap schemas serve a number of
</I>&gt;<i> similar purposes:
</I>&gt;<i> 
</I>&gt;<i> #1: provide a clear place to document a program's remote interfaces. This
</I>&gt;<i>     role is aimed at humans, not programs.
</I>&gt;<i> 
</I>&gt;<i> #2: make it convenient to enforce those interfaces on the receiving end.. by
</I>&gt;<i>     relying upon the guards, the code that actually does stuff is easier to
</I>&gt;<i>     read and easier to analyze for other potential problems
</I>&gt;<i> 
</I>&gt;<i> #3: enforce those interfaces on the sending end, to bring the discovery of
</I>&gt;<i>     programming errors closer to their cause
</I>&gt;<i> 
</I>&gt;<i> #4: enforce those interfaces at the receiving *wire*, to mitigate
</I>&gt;<i>     resource-exhaustion attacks
</I>&gt;<i> 
</I>&gt;<i> #1 is satisfied by pretty much anything, as it's more a set of documentation
</I>&gt;<i> #conventions than anything else. The existing zope.interface.Interface class
</I>&gt;<i> #does this pretty well.
</I>&gt;<i> 
</I>&gt;<i> The rest require that the interfaces be machine-parseable. I enhanced z.i's
</I>&gt;<i> Interface (in foolscap.RemoteInterface) to allow the arguments and return
</I>&gt;<i> values to have meaning.. if zope.schema does something similar, I'd love to
</I>&gt;<i> take a look at it and see if it can capture the same expressiveness.
</I>
Yes, that appears to be one of the things zope.schema does.

&gt;<i> I'm undecided as to whether #4 is a good idea or not. It seemed like a good
</I>&gt;<i> idea when I first started, but I've had some smart people tell me it's not
</I>&gt;<i> the best place to attempt to solve DoS problems. Worse yet, the
</I>&gt;<i> implementation is so incomplete that I've personally had to disable schema
</I>&gt;<i> checking on things that would otherwise be useful (in particular I think a
</I>&gt;<i> &quot;PolyConstraint&quot; in which the two branches are both containers fails to match
</I>&gt;<i> the tokens on the wire correctly, even though such a thing would be quite
</I>&gt;<i> useful just at the post-serialization phase). So I'm tempted to drop #4 as a
</I>&gt;<i> design criterion and if z.s can represent enough to make that work, great, if
</I>&gt;<i> not, drop the feature.
</I>&gt;<i> 
</I>&gt;&gt;<i> A nice practical factor is that zope.schema has been packaged as
</I>&gt;&gt;<i> a separate namespace module, similarly to zope.interface.
</I>&gt;<i> 
</I>&gt;<i> I have to admit that I'm slightly hesitant to add a new dependency. But maybe
</I>&gt;<i> it isn't too big or too unwieldy. There doesn't seem to be a debian package
</I>&gt;<i> for it, though..
</I>
Right, and for both of those reasons (extra dependency and the debian
packaging lag) I would like to see zope.schema merged into
zope.interface, since zope.schema depends on zope.interface and I don't
think it would be a big burden on zope.interface to carry along
zope.schema even if zope.interface users don't all use it.  I'll do a
little lobbying for that on interface-dev (which has been extremely
quiet lately ... probably a good sign).

&gt;<i> But I'll definitely check it out. Thanks for the suggestion!
</I>&gt;<i> 
</I>&gt;<i>  -Brian
</I>&gt;<i> 
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015766.html">[Twisted-Python] schemas (in Zope and Foolscap)
</A></li>
	<LI>Next message: <A HREF="015686.html">[Twisted-Python] More general process.Process class
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15768">[ date ]</a>
              <a href="thread.html#15768">[ thread ]</a>
              <a href="subject.html#15768">[ subject ]</a>
              <a href="author.html#15768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
