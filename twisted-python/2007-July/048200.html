<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] producer / consumer question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20producer%20/%20consumer%20question&In-Reply-To=%3C20070704190151.8429.1750810897.divmod.xquotient.764%40joule.divmod.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048199.html">
   <LINK REL="Next"  HREF="048202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] producer / consumer question</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20producer%20/%20consumer%20question&In-Reply-To=%3C20070704190151.8429.1750810897.divmod.xquotient.764%40joule.divmod.com%3E"
       TITLE="[Twisted-Python] producer / consumer question">glyph at divmod.com
       </A><BR>
    <I>Wed Jul  4 13:01:51 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048199.html">[Twisted-Python] producer / consumer question
</A></li>
        <LI>Next message (by thread): <A HREF="048202.html">[Twisted-Python] producer / consumer question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48200">[ date ]</a>
              <a href="thread.html#48200">[ thread ]</a>
              <a href="subject.html#48200">[ subject ]</a>
              <a href="author.html#48200">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04:13 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">markus at bluegap.ch</A> wrote:
&gt;<i>I have yet another question...  a producer has to learn about it's 
</I>&gt;<i>consumer somehow, otherwise it would not know where to write it's data 
</I>&gt;<i>to.
</I>
&gt;<i>Why is that? What's the best way to associate a producer with a 
</I>&gt;<i>consumer? Is something like the following okay:
</I>
This is a really deep problem, unfortunately, and Valentino has 
correctly identified that it's the same one I was going to talk about 
when responding to his twisted-web posting :).

Your solution doesn't really solve anything, since neither producers nor 
consumers are documented to have the attributes you are assigning, nor 
do anything with them.

Consumers are documented to have a &quot;write&quot; method, but the documentation 
is misleading.  The most common type of producer - tcp.Connection - does 
not put data into its consumer's &quot;write&quot; method, it calls its protocol's 
dataReceived method.  Many other producers are actually written 
specifically to call higher-level methods on something other than their 
consumer (such as callRemote) rather than &quot;write&quot;.

The basic use-case here is that the responsibility for producing bytes 
and the responsibility for throttling data production are usually 
separated in an application.  I agree that this is not really the best 
way to separate them.  The API grew up almost by accident, it wasn't 
really designed intentionally, although it has worked surprisingly well 
considering.

In many cases it does seem that we want a high-level API for setting up 
pipelines of producer-to-consumer-to-producer, or (in the case of web2 
streams) end-to-end producer-producer-producer sequences.  While many of 
these use-cases are superficially similar, my own attempts to resolve 
this shows that there is a surprising diversity of requirements which 
are difficult to resolve simultaneously by &quot;simply fixing&quot; the existing 
consumer / producer mess.

Keep in mind, also, that a great deal of code has been written (and will 
be written before everyone has upgraded to the next version of Twisted) 
that uses the current IConsumer/IProducer APIs, and all of that will 
need to keep working for the forseeable future.

You can find some discussion, as well as our attempts to create 
something better, here:

    <A HREF="http://twistedmatrix.com/trac/ticket/1956">http://twistedmatrix.com/trac/ticket/1956</A>

If you have new information, feel free to comment there, but please read 
all the comments and try to understand them first: there has been a 
*lot* of back-and-forth over this issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20070704/2c651125/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048199.html">[Twisted-Python] producer / consumer question
</A></li>
	<LI>Next message (by thread): <A HREF="048202.html">[Twisted-Python] producer / consumer question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48200">[ date ]</a>
              <a href="thread.html#48200">[ thread ]</a>
              <a href="subject.html#48200">[ subject ]</a>
              <a href="author.html#48200">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
