<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: Handling PBConnectionLost errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Handling%20PBConnectionLost%20errors&In-Reply-To=%3C6DA04B2A-6D21-44CC-BD8A-07432CAABB99%40keystonewood.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048315.html">
   <LINK REL="Next"  HREF="048281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: Handling PBConnectionLost errors</H1>
    <B>Daniel Miller</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Re%3A%20Handling%20PBConnectionLost%20errors&In-Reply-To=%3C6DA04B2A-6D21-44CC-BD8A-07432CAABB99%40keystonewood.com%3E"
       TITLE="[Twisted-Python] Re: Handling PBConnectionLost errors">daniel at keystonewood.com
       </A><BR>
    <I>Mon Jul 30 08:00:13 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048315.html">[Twisted-Python] Re: Handling PBConnectionLost errors
</A></li>
        <LI>Next message (by thread): <A HREF="048281.html">[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48319">[ date ]</a>
              <a href="thread.html#48319">[ thread ]</a>
              <a href="subject.html#48319">[ subject ]</a>
              <a href="author.html#48319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David,

You have gone above an beyond my expectations to answer my questions.  
Thank you.

On Jul 28, 2007, at 1:07 AM, David Bolen wrote:

&gt;<i> Daniel Miller &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">daniel at keystonewood.com</A>&gt; writes:
</I>&gt;<i>
</I>&gt;&gt;<i> Is this such a stupid question that it doesn't even warrant a  
</I>&gt;&gt;<i> response?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ~ Daniel
</I>&gt;<i>
</I>&gt;<i> I agree with the other comment to the effect that the lack of response
</I>&gt;<i> may be more due to the underlying complexity of the question as to
</I>&gt;<i> lack of interest. ...
</I>
It's funny, my question was complex, but it nevertheless contained  
too many assumptions about my application and environment to allow  
you to answer easily. Thanks for taking a stab at it anyway.

&gt;<i> For example, your opening point about:
</I>&gt;<i>
</I>&gt;&gt;&gt;<i>                       (...)                                 It
</I>&gt;&gt;&gt;<i> would be nice to implement a fail-safe(er) way of calling remote
</I>&gt;&gt;&gt;<i> methods that would retry when necessary until the remote method has
</I>&gt;&gt;&gt;<i> been called successfully and the result has been returned.  (...)
</I>&gt;<i>
</I>&gt;<i> has an implicit assumption that the remote method will even continue
</I>&gt;<i> to exist once the disconnect has occurred - something that is by no
</I>&gt;<i> means guaranteed with PB.
</I>
I hadn't even thought of that, although now that you point it out  
it's obvious. My (server-side) application is just a singleton facade  
to an accounting system database. I'm posting orders from an order  
entry system to invoices in the accounting system. The server- 
supplied &quot;referenceable&quot; will always be available assuming something  
terrible has not happened to the server (e.g. crashed, hacked or  
physically damaged--none of which are things I'm trying to solve here).

&gt;<i> Perhaps some earlier messages of mine when we had just finished
</I>&gt;<i> putting together the remote wrapping and reconnect support in our
</I>&gt;<i> system.  See my responses to the thread at:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/pipermail/twisted-python/2005-July/">http://twistedmatrix.com/pipermail/twisted-python/2005-July/</A> 
</I>&gt;<i> 011030.html
</I>&gt;<i>
</I>&gt;<i> and
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/pipermail/twisted-python/2005-July/">http://twistedmatrix.com/pipermail/twisted-python/2005-July/</A> 
</I>&gt;<i> 011046.html
</I>
Thanks I'll take a look at them.

&gt;<i> It hits on topics beyond that of just a reliable method call, but the
</I>&gt;<i> second message more specifically talks about the wrapper that
</I>&gt;<i> implements reconnections, and how we dealt with updating references
</I>&gt;<i> post-reconnect.  You can probably see how the design dovetailed with
</I>&gt;<i> our particular server side structure (the registry was persistent as
</I>&gt;<i> were the managers, so they provided the concrete point of
</I>&gt;<i> reattachment).  And the use of the wrappers around references meant we
</I>&gt;<i> could &quot;correct&quot; the wrappers for a new connection without having to
</I>&gt;<i> worry about what parts of the client application may have been holding
</I>&gt;<i> references.  Perhaps it will give you some other ideas in your own
</I>&gt;<i> system.
</I>
This sounds good, I think I have a similar enough setup that I will  
be able to at least gain some good ideas.

&gt;<i> For your other points:
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> I have two questions:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 1. Does something like this already exist?
</I>&gt;<i>
</I>&gt;<i> &lt;snip&gt;
</I>&gt;<i>
</I>&gt;<i> ... I'm not aware of any existing approach that is generally suitable
</I>&gt;<i> for any application.  I rather doubt any single generic approach would
</I>&gt;<i> be possible, since PB provides for many mechanisms of statement
</I>&gt;<i> management and referenceability among servers and clients.
</I>
You're probably right, although the problem domain is interesting  
enough to me that I may try to see what I can do if I ever get enough  
time :)

&gt;&gt;&gt;<i> 2. Is this a totally stupid idea? (would it be better to improve
</I>&gt;&gt;&gt;<i> our physical network than to try to band-aid the problem with
</I>&gt;&gt;&gt;<i> something like this?)
</I>&gt;<i>
</I>&gt;<i> It's never a stupid idea to engineer for network interruptions, but
</I>&gt;<i> like everything else a design must weigh benefits against
</I>&gt;<i> cost/development.  With that said, it might not be a bad idea to also
</I>&gt;<i> look into your network.  TCP connections are rather hard to break just
</I>&gt;<i> due to network transmission problems, and all your PB calls are going
</I>&gt;<i> across a single TCP session.  They might be significantly delayed on a
</I>&gt;<i> bad network, but the connection itself shouldn't fail unless something
</I>&gt;<i> more extreme (and unusual) is happening.  Given the level of problems
</I>&gt;<i> you're encountering, I wouldn't be surprised if something else was
</I>&gt;<i> awry.
</I>
That's what I thought (the connections shouldn't just be dropping for  
no apparent reason, especially since they are all within the bounds  
of a LAN). I know this is getting off topic, but I thought maybe  
you'd know: collisions on the hub should be handled by TCP, and my  
application should not have to worry about them, correct? Even that  
doesn't answer why there are dropped connections on the switched side  
of the network. Maybe we have some bad wiring? FWIW, I am planning to  
eliminate the hub in lieu of another switch (there are other problems  
as well).

Again, thanks very much for your well-thought-out response.

~ Daniel




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048315.html">[Twisted-Python] Re: Handling PBConnectionLost errors
</A></li>
	<LI>Next message (by thread): <A HREF="048281.html">[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48319">[ date ]</a>
              <a href="thread.html#48319">[ thread ]</a>
              <a href="subject.html#48319">[ subject ]</a>
              <a href="author.html#48319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
