<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20achieve%20a%20reliable%20%22connection%22%20over%20UDP%3F&In-Reply-To=1185182621.3331.14.camel%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015774.html">
   <LINK REL="Next"  HREF="015781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?</H1>
    <B>glyph at divmod.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20to%20achieve%20a%20reliable%20%22connection%22%20over%20UDP%3F&In-Reply-To=1185182621.3331.14.camel%40localhost.localdomain"
       TITLE="[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?">glyph at divmod.com
       </A><BR>
    <I>Mon Jul 23 14:57:57 EDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="015774.html">[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
</A></li>
        <LI>Next message: <A HREF="015781.html">[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15776">[ date ]</a>
              <a href="thread.html#15776">[ thread ]</a>
              <a href="subject.html#15776">[ subject ]</a>
              <a href="author.html#15776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09:23 am, <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">p.mayers at imperial.ac.uk</A> wrote:
&gt;<i>
</I>&gt;&gt;<i>I'm thinking basically all p2p applications will need this sort of
</I>&gt;&gt;<i>&quot;reliability&quot; over UDP for e.g. file transfer, so I'm hoping there is
</I>&gt;&gt;<i>something already written.
</I>&gt;<i>
</I>&gt;<i><A HREF="http://divmod.org/trac/wiki/DivmodVertex">http://divmod.org/trac/wiki/DivmodVertex</A>
</I>&gt;<i>
</I>&gt;<i>Haven't used it, so can't comment further onit.
</I>
As it happens, I have, a little, so I can :).

To make a long story short, if you need the features that TCP provides, 
but you want the simplicity (and widespread de-jure &quot;standard&quot; 
implementation in routers) of hole-punching via UDP rather than complex 
dual-connection TCP startup, the easiest thing you can do is just go 
ahead and implement TCP on top of UDP.

We did this for vertex, in the &quot;ptcp&quot; module (pseudo-TCP) which is a 
very literal-minded implementation of the TCP specification on top of 
UDP.

It's a fully-functional proof of concept at this point, but it needs a 
lot of maintenance.  The performance is terrible because we didn't 
implement window sizing yet (the window has a static size), there are a 
few edge-cases on connection tear-down, and the tests aren't quite 
granular enough (for example, rather than testing specific latency 
cases, they just probabilistically test packet loss).  It also used a 
predecessor to the now-standard-in-twisted &quot;AMP&quot; protocol for 
handshaking, and should be upgraded to use the new one.  Plus, my own 
personal bugaboo: it doesn't integrate with cred properly.

However, if you need connection-oriented peer-to-peer traffic, 
contributing to Vertex is going to get you where you need to be faster 
than any ad-hoc solution.  We *have* already implemented the full TCP 
state machine and connection-management logic in Python.  I've 
personally tested that it can transfer an entire 700MB ISO image across 
the real, public internet correctly, even in its current state.

You will find willing assistance from me and probably some other Divmod 
folks &amp; fans, because this is a project that many of us would like to 
see through to completion; we just don't have a lot of spare cycles (or 
business motivation) at the moment.

Depending on what you need, you might want to focus your maintenance 
efforts on improving PTCP's tests and documentation so as to make it an 
independently usable unit from Vertex's connection setup.  Obviously 
we'd like it if you could help us to get the whole thing to work, but I 
have to assume that by the time you're asking this question, you've 
already done some work on an application protocol to set up the 
connection.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015774.html">[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
</A></li>
	<LI>Next message: <A HREF="015781.html">[Twisted-Python] How to achieve a reliable &quot;connection&quot; over UDP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15776">[ date ]</a>
              <a href="thread.html#15776">[ thread ]</a>
              <a href="subject.html#15776">[ subject ]</a>
              <a href="author.html#15776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
