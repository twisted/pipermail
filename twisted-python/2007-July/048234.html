<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] dropin.cache?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20dropin.cache%3F&In-Reply-To=%3C116389FC-C330-43FA-B8CC-D702AE5BD912%40bubblehouse.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] dropin.cache?</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20dropin.cache%3F&In-Reply-To=%3C116389FC-C330-43FA-B8CC-D702AE5BD912%40bubblehouse.org%3E"
       TITLE="[Twisted-Python] dropin.cache?">phil at bubblehouse.org
       </A><BR>
    <I>Tue Jul 10 14:00:01 MDT 2007</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48234">[ date ]</a>
              <a href="thread.html#48234">[ thread ]</a>
              <a href="subject.html#48234">[ subject ]</a>
              <a href="author.html#48234">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So, I've been making great strides with my plugin system, using  
twisted's plugin support, but there's just one small issue I'm having  
that I can't seem to figure out.

Traceback (most recent call last):
   File &quot;/Users/phil/Workspace/modu/modu/web/wsgi.py&quot;, line 16, in  
handler
     application = app.get_application(env)
   File &quot;/Users/phil/Workspace/modu/modu/web/app.py&quot;, line 34, in  
get_application
     _load_plugins(env)
   File &quot;/Users/phil/Workspace/modu/modu/web/app.py&quot;, line 53, in  
_load_plugins
     for site_plugin in plugin.getPlugins(ISite, modu.plugins):
   File &quot;/Users/phil/Workspace/Twisted/twisted/plugin.py&quot;, line 186,  
in getPlugins
     allDropins = getCache(package)
--- &lt;exception caught here&gt; ---
   File &quot;/Users/phil/Workspace/Twisted/twisted/plugin.py&quot;, line 165,  
in getCache
     dropinPath.setContent(pickle.dumps(dropinDotCache))
   File &quot;/Users/phil/Workspace/Twisted/twisted/python/filepath.py&quot;,  
line 525, in setContent
     sib.open('w').write(content)
   File &quot;/Users/phil/Workspace/Twisted/twisted/python/filepath.py&quot;,  
line 369, in open
     return open(self.path, mode+'b')
exceptions.IOError: [Errno 13] Permission denied: '/Users/phil/ 
Workspace/modu/examples/basic/modu/plugins/dropin.cache.new'


The issue is that my app doesn't have write access to the various  
plugin directories by default, as it runs as a restricted user. This  
is basically a configuration detail that my users will have to take  
care of, but I'd like to  be able to catch this error and provide a  
nicer message, or at least not have my logfile filled up with stack  
traces.

The problem is that putting a try/catch around getPlugins doesn't  
work, or doesn't appear to. I've looked at the code in getPlugins,  
and I can't figure out why the exception isn't being caught. Since  
I'm not actually using the reactor, I would assume there's no  
deferred trickery that needs to be done, so I'm at a bit of a loss.

Any help in this matter would be appreciated...

-phil


</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48234">[ date ]</a>
              <a href="thread.html#48234">[ thread ]</a>
              <a href="subject.html#48234">[ subject ]</a>
              <a href="author.html#48234">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
