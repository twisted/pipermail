<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] potential connectSSH workflow
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20potential%20connectSSH%20workflow&In-Reply-To=%3C324cfb540707261447q240cc4b0ve340fed2148a3fe8%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="048305.html">
   <LINK REL="Next"  HREF="048308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] potential connectSSH workflow</H1>
    <B>Paul Swartz</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20potential%20connectSSH%20workflow&In-Reply-To=%3C324cfb540707261447q240cc4b0ve340fed2148a3fe8%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] potential connectSSH workflow">paulswartz at gmail.com
       </A><BR>
    <I>Thu Jul 26 15:47:08 MDT 2007</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="048305.html">[Twisted-Python] potential connectSSH workflow
</A></li>
        <LI>Next message (by thread): <A HREF="048308.html">[Twisted-Python] potential connectSSH workflow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48306">[ date ]</a>
              <a href="thread.html#48306">[ thread ]</a>
              <a href="subject.html#48306">[ subject ]</a>
              <a href="author.html#48306">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/26/07, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A> &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at divmod.com</A>&gt; wrote:
&gt;<i> On 09:14 pm, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">paulswartz at gmail.com</A> wrote:
</I>&gt;<i> &gt;That makes sense: a ConchConnection object which wraps some of the
</I>&gt;<i> &gt;nonsense that currently lives in t.c.scripts.conch like verifying a
</I>&gt;<i> &gt;host key and finding keys to use.
</I>&gt;<i>
</I>&gt;<i> &quot;Connection&quot; seems like a weird name for that to me, as it applies it is
</I>&gt;<i> attached to a particular ... well, connection.  Connector, maybe?
</I>&gt;<i> Client?  ClientStorage?   I guess those names have some pretty serious
</I>&gt;<i> problems too, but it's worth thinking about a better one.
</I>
I actually meant Connector :) There's also Creator (in comparison with
t.i.protocol.ClientCreator).

&gt;<i> &gt;I still think that passing
</I>&gt;<i> &gt;authentication data in connect() is the right idea, but it can default
</I>&gt;<i> &gt;to using the keys that it finds in ~/.ssh or in a key agent.
</I>&gt;<i>
</I>&gt;<i> I agree emphatically, but both the default and non-default cases are
</I>&gt;<i> equally important.  There's a direct analogue in the user interface:
</I>&gt;<i> &quot;ssh foo.com&quot; will use your default key or agent, and your default
</I>&gt;<i> username, and that's 99% of usage.  That, of course, doesn't mean you
</I>&gt;<i> can get rid of &quot;ssh -i mykey.id_rsa foo.com&quot; or &quot;ssh <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">otheruser at foo.com</A>&quot;,
</I>&gt;<i> they're both very necessary use-cases.
</I>
So how about this:

class IConch&lt;C word&gt;(Interface):
    def connect(host, port=22, user=None, knownHosts=None,
authentications=None):

where user defaults to the current username, knownHosts defaults to
the to hosts in known_hosts, and authentications defaults to a key
agent or the keys in .ssh/id_*.

To keep the current use case of verifying a host key with a function,
knownHosts could be a filename string, in which case it would be read
for host keys, or a function in which case it is called with the key
and fingerprint.  authentications would be a list functioning the same
was as in my initial outline.

This would make the default .connect(hostname) work equivalently to
the default 'ssh hostname' but still give options for the other
overrides.

-p
-- 
Paul Swartz
paulswartz at gmail dot com
<A HREF="http://z3p.livejournal.com/">http://z3p.livejournal.com/</A>
AIM: z3penguin


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="048305.html">[Twisted-Python] potential connectSSH workflow
</A></li>
	<LI>Next message (by thread): <A HREF="048308.html">[Twisted-Python] potential connectSSH workflow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48306">[ date ]</a>
              <a href="thread.html#48306">[ thread ]</a>
              <a href="subject.html#48306">[ subject ]</a>
              <a href="author.html#48306">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
