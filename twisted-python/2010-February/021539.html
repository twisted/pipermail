<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] newbie confusion - puzzling reactor response
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20newbie%20confusion%20-%20puzzling%20reactor%20response&In-Reply-To=20100210203957.26099.2137222895.divmod.xquotient.1033%40localhost.localdomain">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021525.html">
   <LINK REL="Next"  HREF="021542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] newbie confusion - puzzling reactor response</H1>
    <B>K. Richard Pixley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20newbie%20confusion%20-%20puzzling%20reactor%20response&In-Reply-To=20100210203957.26099.2137222895.divmod.xquotient.1033%40localhost.localdomain"
       TITLE="[Twisted-Python] newbie confusion - puzzling reactor response">rich at noir.com
       </A><BR>
    <I>Fri Feb 12 14:35:03 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021525.html">[Twisted-Python] newbie confusion - puzzling reactor response
</A></li>
        <LI>Next message: <A HREF="021542.html">[Twisted-Python] newbie confusion - puzzling reactor response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21539">[ date ]</a>
              <a href="thread.html#21539">[ thread ]</a>
              <a href="subject.html#21539">[ subject ]</a>
              <a href="author.html#21539">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A> wrote:
&gt;<i> It isn't `doRead`'s job to close the file descriptor.  At most, it's 
</I>&gt;<i> `doRead`'s job to signal that the descriptor is no longer worth keeping 
</I>&gt;<i> open by returning something like an instance of ConnectionDone or 
</I>&gt;<i> ConnectionLost.  Then the reactor will call connectionLost on your 
</I>&gt;<i> object and you can close the file descriptor there.
</I>&gt;<i>   
</I>Thank you!  That's the info I was looking for.
&gt;<i> The documentation for how this all works could probably be improved. 
</I>&gt;<i> Once you figure it out, would you mind submitting a patch?
</I>&gt;<i>   
</I>I don't think I've even seen mention of ConnectionDone in the doc yet.

I think there's a design decision here about the doc.  It seems to me 
that the return codes are part of the interface and as such should 
probably be documented in twisted.internet.interfaces.py whereas there's 
almost nothing there now.  Instead, some of this is in 
twisted.internet.abstract.  Granted, the distinction between an abstract 
class and a &quot;zope.interface.Interface&quot; is subtle.

As a newbie, the interface is the thing I find first and most easily.  
I'm directed there by the doc and by the reference material.  I have to 
dig around to even notice that the abstract class exists.
&gt;<i> Also, you won't accomplish much by adding a file descriptor for a normal 
</I>&gt;<i> file to the reactor.  Select, poll, etc, will always indicate that such 
</I>&gt;<i> descriptors are both readable and writeable.
</I>I could swear that wasn't true when I first mucked about with select, 
but that was a couple decades ago.  Thanks for the update.

In any case, my point was more about illustration and testing.

--rich

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021525.html">[Twisted-Python] newbie confusion - puzzling reactor response
</A></li>
	<LI>Next message: <A HREF="021542.html">[Twisted-Python] newbie confusion - puzzling reactor response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21539">[ date ]</a>
              <a href="thread.html#21539">[ thread ]</a>
              <a href="subject.html#21539">[ subject ]</a>
              <a href="author.html#21539">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
