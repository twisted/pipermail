<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;) into	a Telnet Server?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20do%20I%20get%20data%20from%20a%20Queue%20%28or%20%22outside%22%29%20into%0A%09a%20Telnet%20Server%3F&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021429.html">
   <LINK REL="Next"  HREF="021434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;) into	a Telnet Server?</H1>
    <B>Mark Bailey</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20How%20do%20I%20get%20data%20from%20a%20Queue%20%28or%20%22outside%22%29%20into%0A%09a%20Telnet%20Server%3F&In-Reply-To="
       TITLE="[Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;) into	a Telnet Server?">mebly5343 at gmail.com
       </A><BR>
    <I>Mon Feb  1 21:15:04 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021429.html">[Twisted-Python] understanding deferreds
</A></li>
        <LI>Next message: <A HREF="021434.html">[Twisted-Python] How do I get data from a Queue (or	&quot;outside&quot;)	into a Telnet Server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21430">[ date ]</a>
              <a href="thread.html#21430">[ thread ]</a>
              <a href="subject.html#21430">[ subject ]</a>
              <a href="author.html#21430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good day, everyone:

I'm trying to learn Python and Twisted at the same time and having fun
(mostly).

I'm writing an application that is collecting data from multiple sources,
filtering the data, and providing it to users through a Telnet server.  I
can set up a polling loop for the server but I can't figure out how to get
send the data to users connected to my server.

I thought I'd put the server in a thread and use a Queue to send data to
it.  But, I could do the work within the server application...

The server I'm playing with, including the polling loop, is:

from twisted.conch.telnet import StatefulTelnetProtocol
from twisted.internet import reactor, protocol

class TelnetEcho(StatefulTelnetProtocol):

    def lineReceived(self, data):
        print &quot;Type of self: &quot; + str(type(self))
        data = data.rstrip('\n\r')
        self.sendLine(&quot;Unrecognized command: %r\r&quot; % (data,))


def checkforspots():
    print &quot;running checkforspots()&quot;
    reactor.callLater(1.0,checkforspots)

def createTelnetServer():
    factory = protocol.ServerFactory()

    instance = TelnetEcho
    factory.protocol = instance

    port = reactor.listenTCP(8023,factory)
    print &quot;Listening on port 8023&quot;

    print &quot;Type of port: &quot; + str(type(port))
    checkforspots()

    return port

if __name__ == &quot;__main__&quot;:
    reactor.callWhenRunning(createTelnetServer)
    reactor.run()


Any suggestions greatly appreciated.  I've been unable to find anything
using my &quot;google-fu&quot; on this issue - I'm stuck.

Thanks.

Mark Bailey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20100201/711a4d3b/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20100201/711a4d3b/attachment.htm</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021429.html">[Twisted-Python] understanding deferreds
</A></li>
	<LI>Next message: <A HREF="021434.html">[Twisted-Python] How do I get data from a Queue (or	&quot;outside&quot;)	into a Telnet Server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21430">[ date ]</a>
              <a href="thread.html#21430">[ thread ]</a>
              <a href="subject.html#21430">[ subject ]</a>
              <a href="author.html#21430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
