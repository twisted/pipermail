<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Need help for structured application	development
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Need%20help%20for%20structured%20application%0A%09development&In-Reply-To=72236ba91002160257x68c623f6n5c8bc0ff1310e66d%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021578.html">
   <LINK REL="Next"  HREF="021601.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Need help for structured application	development</H1>
    <B>Einar S. Ids&#248;</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Need%20help%20for%20structured%20application%0A%09development&In-Reply-To=72236ba91002160257x68c623f6n5c8bc0ff1310e66d%40mail.gmail.com"
       TITLE="[Twisted-Python] Need help for structured application	development">einar.twisted at norsk-esport.no
       </A><BR>
    <I>Wed Feb 17 13:14:37 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021578.html">[Twisted-Python] Need help for structured application	development
</A></li>
        <LI>Next message: <A HREF="021601.html">[Twisted-Python] Need help for structured application	development
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21600">[ date ]</a>
              <a href="thread.html#21600">[ thread ]</a>
              <a href="subject.html#21600">[ subject ]</a>
              <a href="author.html#21600">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yeah, sorry about the long mail. I thought it would be a good idea to
explain my app and its requirements, and thereby get better advice on
how to structure it, than having to iterate to and from this list a
number of times. Perhaps that was the wrong strategy.

Thanks for your assistance. I've looked at t.i.utils.getProcessOutput,
and it is what I need to run my query software. Unfortunately that is
only 5% of the puzzle - my real problem is working out what kind of
top-level classes I should be using to spawn my service-checkers as
they are needed. I guess I need a factory that launches server checker
objects not as a result of a TCP/UDP connection, but as a result of
new servers being detected. This is not how I've seen factories being
used regularly, and I would love to get some input on this.

If I am not making sense at all, please let me know :)

Cheers,
Einar

On Tue, Feb 16, 2010 at 11:57 AM, Alexandre Quessy &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">alexandre at quessy.net</A>&gt; wrote:
&gt;<i> Hello Einar,
</I>&gt;<i> This is a quite long email.
</I>&gt;<i> What I can tell you, is that querying many command line applications
</I>&gt;<i> with t.i.utils.getProcessOutput and gathering them in a DeferredList
</I>&gt;<i> worked for me. Example: the list_cameras in
</I>&gt;<i> <A HREF="http://svn.sat.qc.ca/trac/miville/browser/trunk/py/scenic/devices/cameras.py">http://svn.sat.qc.ca/trac/miville/browser/trunk/py/scenic/devices/cameras.py</A>
</I>&gt;<i>
</I>&gt;<i> Good luck !
</I>&gt;<i>
</I>&gt;<i> a
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2010/2/15 Einar S. Ids&#248; &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">einar.twisted at norsk-esport.no</A>&gt;:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am planning to develop an application that will query a number of
</I>&gt;&gt;<i> services at given intervals, and Twisted seems like a very nice
</I>&gt;&gt;<i> platform to do so. However, because of little previous experience with
</I>&gt;&gt;<i> Twisted, especially with building proper applications, using
</I>&gt;&gt;<i> interfaces and using plugins, I could really need some pointers to get
</I>&gt;&gt;<i> me started.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In the following I will try to explain in broad terms what the
</I>&gt;&gt;<i> application will do, and humbly ask for input on how I may structure
</I>&gt;&gt;<i> it using factories, protocols etc.:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. A number of more-or-less similar server applications (5-10) have a
</I>&gt;&gt;<i> number of concurrent instances/servers (1-30) each.
</I>&gt;&gt;<i> 2. I need to acquire the status of each instance at given intervals.
</I>&gt;&gt;<i> These will typically range from every 20 seconds to every 3 minutes,
</I>&gt;&gt;<i> and depend on the which service the instance is based on.
</I>&gt;&gt;<i> 3. A list of the server instances shall be acquired via an XML-query
</I>&gt;&gt;<i> every few minutes to pick up on new or removed instances.
</I>&gt;&gt;<i> 4. An executable already exists which can be used to status-poll
</I>&gt;&gt;<i> almost all services using different parameters. I will be calling it
</I>&gt;&gt;<i> from my application to do the polling instead of recreating it in
</I>&gt;&gt;<i> Python.
</I>&gt;&gt;<i> 5. I need to be able to create my own polling-protocol for at least
</I>&gt;&gt;<i> one of the service types which is incompatible with the executable.
</I>&gt;&gt;<i> 6. Some services can not only be polled at intervals, but additionally
</I>&gt;&gt;<i> stream information that I am interested in listening to.
</I>&gt;&gt;<i> 7. At a later point in time, I wish to be able to communicate with
</I>&gt;&gt;<i> IRC, MSN and other services/protocols using the queried and streamed
</I>&gt;&gt;<i> data.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My initial general thought is the following:
</I>&gt;&gt;<i> 1. Design a class for each server application, where all classes
</I>&gt;&gt;<i> implement the same interface. The class defines how to deal with
</I>&gt;&gt;<i> server instances of its corresponding server application type. Classes
</I>&gt;&gt;<i> are created as Twisted-plugins.
</I>&gt;&gt;<i> 2. For each new server instance that is discovered, create an object
</I>&gt;&gt;<i> which contains a timer and polls the server at specific intervals,
</I>&gt;&gt;<i> writing the result to a globally accessible data structure.
</I>&gt;&gt;<i> 3. For server instances that stream data continuously in addition to
</I>&gt;&gt;<i> being polled at regular intervals, create a separate object which
</I>&gt;&gt;<i> listens to the server.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I believe I should somehow have a global data structure which contains
</I>&gt;&gt;<i> references to all the server instance objects, regardless of type, and
</I>&gt;&gt;<i> allows them to store data. This is sort of like the factory does for
</I>&gt;&gt;<i> protocols, except in my case I don't think I can use a regular factory
</I>&gt;&gt;<i> since I need both clients (to poll at intervals) and servers (to
</I>&gt;&gt;<i> listen to streaming data). I suppose I could use a ClientFactory for
</I>&gt;&gt;<i> the pollers and a Factory for the stream-listeners, and let them have
</I>&gt;&gt;<i> a common data-store? But is it possible to use a single ClientFactory
</I>&gt;&gt;<i> to spawn all poller-objects regardless of server type? Or do I need
</I>&gt;&gt;<i> one ClientFactory for each server type? Do I perhaps need one
</I>&gt;&gt;<i> ClientFactory per server instance? Or should I just ignore factories
</I>&gt;&gt;<i> all together since it is primarily the timer and asyncronicity of
</I>&gt;&gt;<i> Twisted I need?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am quite certain there is a correct twistified way of handling this
</I>&gt;&gt;<i> sort of problem. I am just not sure what it is, and would sincerely
</I>&gt;&gt;<i> welcome all feedback on how this should be done. Feel free to point to
</I>&gt;&gt;<i> examples of applications that are similar to what I sketched above,
</I>&gt;&gt;<i> and tell me to study the code :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i> Einar
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Alexandre Quessy
</I>&gt;<i> <A HREF="http://alexandre.quessy.net/">http://alexandre.quessy.net/</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021578.html">[Twisted-Python] Need help for structured application	development
</A></li>
	<LI>Next message: <A HREF="021601.html">[Twisted-Python] Need help for structured application	development
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21600">[ date ]</a>
              <a href="thread.html#21600">[ thread ]</a>
              <a href="subject.html#21600">[ subject ]</a>
              <a href="author.html#21600">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
