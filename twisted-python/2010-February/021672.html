<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] multiprocessing capability?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20multiprocessing%20capability%3F&In-Reply-To=1267042271.2532.200.camel%40kratos">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021664.html">
   <LINK REL="Next"  HREF="021677.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] multiprocessing capability?</H1>
    <B>K. Richard Pixley</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20multiprocessing%20capability%3F&In-Reply-To=1267042271.2532.200.camel%40kratos"
       TITLE="[Twisted-Python] multiprocessing capability?">rich at noir.com
       </A><BR>
    <I>Thu Feb 25 13:21:03 EST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="021664.html">[Twisted-Python] multiprocessing capability?
</A></li>
        <LI>Next message: <A HREF="021677.html">[Twisted-Python] multiprocessing capability?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21672">[ date ]</a>
              <a href="thread.html#21672">[ thread ]</a>
              <a href="subject.html#21672">[ subject ]</a>
              <a href="author.html#21672">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Single threaded, event loop based code like twisted rocks hard.

Once upon a time, threads were like that too and the distinction between 
threads and event loops was grey.  But with the advent of mandatory 
preemptive thread scheduling and the ability to run multiple threads on 
separate shared memory processors, the difference between programming 
with threads and programming with parallel heavy weight processes that 
share memory became extremely grey, (aside from the problems debugging 
threads which don't exist for heavy weight processes).

Threads routinely use shared memory and shared memory (generally) 
requires a common kernel.  OTOH, message passing can use a common kernel 
but can also extend out to other machines on the network.  If you use 
twisted for highly efficient &quot;single thread/multiple task&quot; heavy weight 
processes, and something like spread, you end up with the best of all 
worlds.  Highly efficient, symmetric, network based parallelism, with 
fault tolerance thrown in for free.

My point here is that there are other ways to go about exploiting 
symmetric multiprocessor machines, even banks of them, that neither 
require threads, nor the multiprocessing package.

--rich

Darren Govoni wrote:
&gt;<i> Looks interesting. I'm going to check out that package.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My original request was more along the lines of using Python's new 
</I>&gt;<i> support for native CPU core's and processes (the multiprocessing 
</I>&gt;<i> package is for this). Python's built-in thread support has global lock 
</I>&gt;<i> constraints that underperform in some situations.
</I>&gt;<i>
</I>&gt;<i> But I ran into a problem using multiprocessing module with Twisted 
</I>&gt;<i> that was pointed out on the Twisted trac with pickling class methods 
</I>&gt;<i> and apparently Python's CPU threading support attempts to do this in 
</I>&gt;<i> some situations (e.g. when I try to pass a class method to a native 
</I>&gt;<i> thread).
</I>&gt;<i>
</I>&gt;<i> On Wed, 2010-02-24 at 12:04 -0800, K. Richard Pixley wrote:
</I>&gt;&gt;<i> Glyph Lefkowitz wrote:
</I>&gt;&gt;&gt;<i> On Feb 21, 2010, at 8:00 PM, Alexandre Quessy wrote
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;<i> Hello everyone,
</I>&gt;&gt;&gt;&gt;<i> I have done something similar to this, but I used the children IO
</I>&gt;&gt;&gt;&gt;<i> stream to control them. Maybe I should have done that using some
</I>&gt;&gt;&gt;&gt;<i> higher level protocol, such as AMP or PB.
</I>&gt;&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> Using a higher-level protocol is generally better, if for no other reason that it gives you a framework within which to document your design decisions.  It's much easier to say &quot;An AMP command with a 'foo' String argument and a 'bar' Integer argument&quot; than to say &quot;The first two bytes of the message are the length of the first argument.  The next n bytes are the first argument.  The first argument shall be interpreted as... (etc, etc)&quot;
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> I'm working on an interface right now to the spread toolkit, 
</I>&gt;&gt;<i> (<A HREF="http://spread.org">http://spread.org</A>), which implements virtual synchrony, 
</I>&gt;&gt;<i> (<A HREF="http://en.wikipedia.org/wiki/Virtual_synchrony">http://en.wikipedia.org/wiki/Virtual_synchrony</A>).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For distributed, symmetric, fault tolerant parallelism in small to 
</I>&gt;&gt;<i> medium scale with high reliability, this might be an option.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --rich
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A> &lt;mailto:<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>&gt;
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>   
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20100225/3702680b/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20100225/3702680b/attachment.htm</A> 
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021664.html">[Twisted-Python] multiprocessing capability?
</A></li>
	<LI>Next message: <A HREF="021677.html">[Twisted-Python] multiprocessing capability?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21672">[ date ]</a>
              <a href="thread.html#21672">[ thread ]</a>
              <a href="subject.html#21672">[ subject ]</a>
              <a href="author.html#21672">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
