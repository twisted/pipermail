<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] How do I get data from a Queue (or	&quot;outside&quot;)	into a Telnet Server?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20get%20data%20from%20a%20Queue%20%28or%0A%09%22outside%22%29%09into%20a%20Telnet%20Server%3F&In-Reply-To=%3C20100202134743.26099.1216579116.divmod.xquotient.75%40localhost.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="053931.html">
   <LINK REL="Next"  HREF="053936.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] How do I get data from a Queue (or	&quot;outside&quot;)	into a Telnet Server?</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20How%20do%20I%20get%20data%20from%20a%20Queue%20%28or%0A%09%22outside%22%29%09into%20a%20Telnet%20Server%3F&In-Reply-To=%3C20100202134743.26099.1216579116.divmod.xquotient.75%40localhost.localdomain%3E"
       TITLE="[Twisted-Python] How do I get data from a Queue (or	&quot;outside&quot;)	into a Telnet Server?">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Feb  2 06:47:43 MST 2010</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="053931.html">[Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;) into	a Telnet Server?
</A></li>
        <LI>Next message (by thread): <A HREF="053936.html">[Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;)	into a Telnet Server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53935">[ date ]</a>
              <a href="thread.html#53935">[ thread ]</a>
              <a href="subject.html#53935">[ subject ]</a>
              <a href="author.html#53935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02:15 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mebly5343 at gmail.com</A> wrote:
&gt;<i>Good day, everyone:
</I>&gt;<i>
</I>&gt;<i>I'm trying to learn Python and Twisted at the same time and having fun
</I>&gt;<i>(mostly).
</I>&gt;<i>
</I>&gt;<i>I'm writing an application that is collecting data from multiple 
</I>&gt;<i>sources,
</I>&gt;<i>filtering the data, and providing it to users through a Telnet server. 
</I>&gt;<i>I
</I>&gt;<i>can set up a polling loop for the server but I can't figure out how to 
</I>&gt;<i>get
</I>&gt;<i>send the data to users connected to my server.
</I>
What about this specifically are you having difficulty with?  The 
solution should probably be little more than a normal Python method 
call.
&gt;<i>
</I>&gt;<i>I thought I'd put the server in a thread and use a Queue to send data 
</I>&gt;<i>to
</I>&gt;<i>it.  But, I could do the work within the server application...
</I>
I'd skip the thread and the queue.  From what you've said so far, there 
doesn't seem to be any reason to involve either.
&gt;<i>
</I>&gt;<i>The server I'm playing with, including the polling loop, is:
</I>&gt;<i>
</I>&gt;<i>from twisted.conch.telnet import StatefulTelnetProtocol
</I>&gt;<i>from twisted.internet import reactor, protocol
</I>&gt;<i>
</I>&gt;<i>class TelnetEcho(StatefulTelnetProtocol):
</I>&gt;<i>
</I>&gt;<i>    def lineReceived(self, data):
</I>&gt;<i>        print &quot;Type of self: &quot; + str(type(self))
</I>&gt;<i>        data = data.rstrip('\n\r')
</I>&gt;<i>        self.sendLine(&quot;Unrecognized command: %r\r&quot; % (data,))
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>def checkforspots():
</I>&gt;<i>    print &quot;running checkforspots()&quot;
</I>&gt;<i>    reactor.callLater(1.0,checkforspots)
</I>&gt;<i>
</I>&gt;<i>def createTelnetServer():
</I>&gt;<i>    factory = protocol.ServerFactory()
</I>&gt;<i>
</I>&gt;<i>    instance = TelnetEcho
</I>&gt;<i>    factory.protocol = instance
</I>
This isn't exactly wrong, but it's sort of misleading.  You've defined 
the name &quot;instance&quot; here, but it's not bound to an instance.  It's bound 
to the TelnetEcho class.  Since you go on to set &quot;factory.protocol&quot; to 
this, it's right - that attribute is supposed to be a class, not an 
instance - but calling this &quot;instance&quot; suggests you might be confused, 
or it might confuse someone later reading the code.
&gt;<i>
</I>&gt;<i>    port = reactor.listenTCP(8023,factory)
</I>&gt;<i>    print &quot;Listening on port 8023&quot;
</I>&gt;<i>
</I>&gt;<i>    print &quot;Type of port: &quot; + str(type(port))
</I>&gt;<i>    checkforspots()
</I>&gt;<i>
</I>&gt;<i>    return port
</I>&gt;<i>
</I>&gt;<i>if __name__ == &quot;__main__&quot;:
</I>&gt;<i>    reactor.callWhenRunning(createTelnetServer)
</I>&gt;<i>    reactor.run()
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Any suggestions greatly appreciated.  I've been unable to find anything
</I>&gt;<i>using my &quot;google-fu&quot; on this issue - I'm stuck.
</I>
It's possible this FAQ entry will help:

<A HREF="http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother">http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother</A>

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="053931.html">[Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;) into	a Telnet Server?
</A></li>
	<LI>Next message (by thread): <A HREF="053936.html">[Twisted-Python] How do I get data from a Queue (or &quot;outside&quot;)	into a Telnet Server?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#53935">[ date ]</a>
              <a href="thread.html#53935">[ thread ]</a>
              <a href="subject.html#53935">[ subject ]</a>
              <a href="author.html#53935">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
