From michele.petrazzo at unipex.it  Sat Jul  1 12:06:25 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Sat, 01 Jul 2006 18:06:25 +0200
Subject: [Twisted-Python] ftp client question
Message-ID: <44A69D81.6090306@unipex.it>

I have this code:

creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
                          self._passive, fail=self._Fail)
cre = creator.connectTCP(self._host, self._port)
cre.addCallback(self._ConnectionMade)
cre.addErrback(self._Fail)

I see that I can add a deferred on an connection error, that receive
also the commands error ("wrong user", etc..), but is there a solution
for add a callback for "user logged in" (code 230)?
I find one, only that is very bad, so I'm asking if someone has already
wrote this code in a more "twisted manner"

Thanks
Michele




From proclus at gnu-darwin.org  Sat Jul  1 19:02:04 2006
From: proclus at gnu-darwin.org (proclus at gnu-darwin.org)
Date: Sat,  1 Jul 2006 19:02:04 -0400 (EDT)
Subject: [Twisted-Python] FOSS, Science, and Public activism
Message-ID: <20060701230204.BF0A46B0FF1@gnu-darwin.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

(Sorry if you get more than one copy of this message, but I felt
that it was urgent to get this important info out.)

The values of freedom and openness are crucial to understanding 
itself, so that civilization and public welfare now depend on 
them, as I argue below.  These values may find their best 
expression in the free and open source software (FOSS) movement, 
and the foresightful example of FOSS developers should now be
beneficially applied to many other disciplines in the context of a
global and public Internet.

It is crucial that we occasionally take time to discuss the
reasons _why_ we release our source code, and this is one of 
those occasions.  There are good reasons for the freedom and
openness which are characteristics of FOSS development, reasons
which should receive wider attention now that they can be readily
communicated to other arenas.  The consequences of doing otherwise
are often catastrophic.

For example, it incomprehensible that Genentech could consider
withdrawing a cheap cure for blindness (ARMD) from the market.

http://lists.essential.org/pipermail/random-bits/2006-june/001374.html

The mechanism of this drug is public knowledge.

http://sourceforge.net/mailarchive/forum.php?thread_id=14183567&forum_id=6042

This abhorrent situation is a great example of the kind of thing
that will happen if people don't get behind the values of freedom
and openness that we are espousing.  Please let Genentech know
that you find what they are doing offensive.  Publicize the mechanism
so that new compounds can be obtained as replacements.  For the 
future, continued vociferous public activism is required to prevent
such outrages from occurring in the future.

It becomes clear that the compounds which come from common roots,
fruits, and vegetables are a shared human heritage and the free and
open source of the future.  Tannins are another interesting case in
point, because as molecules, and as anti-oxidents, they are similar to
resveratrol (resV), and that molecular mechanism has been anchored to
the public domain via a prior art declaration.  It is a so-called
CR-memetic, which may increase healthy human longevity by many
decades.  Here are some links about it.

Resveratrol mechanism posts from GNU-Darwin list
http://proclus.gnu-darwin.org/gdposts.html

CR protocol for human bodies
http://proclus.gnu-darwin.org/bootstrap.html

Here is some important recent news about it.

http://www.imminst.org/forum/index.php?s=&act=print&client=printer&f=237&t=10749

It is exciting to suppose that people can get off the pharmaceuticals
that they are taking with calorie restriction or CR-memetics.  I
personally am trying to get off the cholesterol drug Pravachol, a
statin compound, starting a few of weeks ago.  Write me, and I'll let
you know how it turns out.  From the article...

"Fontana says ...  evidence of "younger" hearts in people on calorie
restriction, suggest that humans on CR have the same adaptive
responses as did animals whose rates of aging were slowed by CR."

I think that it is time to look at the tannins in tobacco leaves.  
There may be other treasures lurking there too.  As you may be
aware there is ample public research into any possible beneficial
compounds that may be obtained from tobacco leaves.  The mechanisms
are there waiting to be discovered.  If you want to post them, just
reply to me and I'd be delighted to host them.

The public establishment of prior art is a time-honed method of
entering inventions into the public domain.  We now have other
methods at our disposal as well.   If you are planning to establish
prior art against future CR-memetic related patents, you might want
to have a look at www.creativecommons.org.  Perhaps it goes without
saying at this point that you should please choose a license that
provides for free and broad public access to your memetic.

In that way you will assure that the public health is served by 
anchoring them to the public common, where they cannot be exploited
by those who would withhold them for their own profit.  The DRM 
situation is precisely analogous to this.  Can you imagine doing
science in a world where your ability to read and write your data is
filtered through secret protocols that are hidden from you? I
recommend the Defective By Design campaign to fight the outrage of
DRM, which is incompatible with the scientific pursuit.

http://www.defectivebydesign.org/

It is clear that scientific tools must be demonstrably and
penetratingly understood, or else our claims will likely be skewed
and called into question.  Free and open source software is
a great example of how to make your science verifiable to the
public.  Establishing prior art against future patents is 
another good one, which is precisely analogous in method, 
making the result explicit to the public, free and open to all.
Thank goodness for the free and open software movement, which
gave us such a great example of how to serve the public in this
manner.

I am willing to grant that there are particular exceptions to
these rules of freedom and openness, and such exceptions may be
relatively harmless; however, let us posit the opposite, that
freedom and openness are _not_ crucial to understanding.  Think of
the implications.  When people are compelled to learn, they do not
receive the intended message.  It is not understood correctly
or completely.   When crucial facts are withheld from the people
you are trying to teach they become paranoid, possibly unteachable. 
Freedom and openness are obviously the best approach to understanding.

This is not a metaphor for the pursuit of science, but a fact. 
We are learning from nature, and it is ultimately required that
our tools be demonstrably and penetratingly understood, or else
we will receive incorrect lessons from nature.  Clearly this
requires public access to the source code and more.  This 
is why many of us are pressing for public access to scientific
publications.

Moreover FOSS tools are becoming ever more important to the
pursuit of the scientific endeavor itself.  In our biophysics
department we are obsolescing proprietary hardware and software
in favor of open standards and free software, which is a
widespread phenomenon in the science sector, and sure to continue.
We build most of the workstations ourselves with commodity hardware,
but we also have some clusters running Debian and FedoraCore.

Some of you will know that I am the lead developer for the
GNU-Darwin distribution.  GNU-Darwin has a FOSS operating system,
which is getting alot of press these days.  Here is an example

How Apple and Microsoft are advancing desktop Linux
http://www.desktopLinux.com/news/ns7294331817.html

I see the article as counter-productive against building a FOSS
coalition that includes democracy, freedom, and public access 
activists, Apple, GNU-Darwin, GNU, and GNU/Linux all linked
together in spectrum.

It is important to alert the whole FOSS community that Darwin
cannot be classified as a free or open source operation system
as of the Darwin-8 revision, because AppleACPIplatform-39 which
is required to boot the system is proprietary.  It is notable that
only the current version of Darwin from Apple is a non-free OS.
GNU-Darwin has a free version, an earlier revision that includes
the source code.  It is FOSS, and we call upon Apple to maintain
Darwin as such, as it has been in the past.  We hope that the
current situation with the kernel and ACPI driver will soon be
remedied so that Darwin will continue as a FOSS OS.

We are asking for free software developers to please write to the
*nix core of Darwin, which is the core OS for both Mac OS X and
GNU-Darwin OS.  Darwin OS, which underlies both systems, comprises
parts from GNU, the BSD's, mach, plus Apple's substantial
contributions to the free software community.  Be consistent with your
philosophy and avoid linkage to proprietary binaries, such as OpenGL
and CoreAudio, except when it is imperatively required in order to
lead users to the values of software freedom.  Under that principle,
another reason to maintain compatibility with the *nix core, is so
that your code will be readily portable to new platforms and usable
by free-software-only aficionados too.  

GNU-Darwin OS is not an obsolete implementation of Darwin OS, or to be
superseded by Mac OS X.  We are trying to lead users to freedom, not
away from it.  By maintaining Darwin core compatibility your code will
remain valuable as the marketplace and industry continues to evolve
(trust me here), particularly as DRM-related problems continue to come
forward. Of course, that means releasing your source code under a FOSS
license, such as APSL.  Darwin OS is a free and open source operating
system that is not going away, so try to focus your coding towards
supporting that standard instead of proprietary software.

Here is the essence of the current problem with Darwin OS.  Apple
replaced working boot code with the following proprietary drivers, 
which are required for the system to boot.

Darwin-7:
AppleAPIC.kext/
Applei386genericplatform.kext/

Darwin-8:
AppleACPIplatform

In addition the kernel (xnu) has been taken proprietary in the
recent revisions.  We are not asking for Apple to give away such
things, but rather to continue maintaining Darwin OS as FOSS, which
it already was. 

After repeated attempts by many FOSS developers to get this
situation remedied, nothing has happened.  It is now time for us to
better use the measures at our disposal in order to assure that
Darwin OS remains free and open.  If you are unhappy that xnu and 
the boot drivers have not been released, I would encourage you to
spread your dissatisfaction to other forums, so that Apple will take
notice and commit to a workable free and open Darwin OS from now on.  

Moving on to coalition strategy now, some of you may not know that
GNU/Linux system administration is one of my day jobs.  I manage a
wide range of systems.  Here is a screen-shot of my work desktop, so
that you can see I use the same tools at work that I use at home at
night on GNU-Darwin.  (weekends too, so please read I am your friend)

http://proclus.gnu-darwin.org/debian.html

The only time that I ever use proprietary software is when I am trying
to help other users learn free and open source free software.  I'm a 
long time Apple and GNU/Linux user, and here is the old proof doc ;-}.

http://proclus.tripod.com/indulge.html

Now, it is embarrassing but, I want you to have a look at my cv.

http://biophysics.med.jhmi.edu/love/thesis/cv6.html

In all my years I have never used Microsoft Windows.  There are only
two exceptions to this statement, where I was helping Windows users to
access our servers at Hopkins.  Clearly, you can get a few things done
without it ;-}.

One of the primary reasons for founding GNU-Darwin was to help people
to put Microsoft behind them,  and it is definitely possible to do it
now.  You have many resources at your disposal to help you leave
Microsoft behind.  Look at the link below to see what you can do
with free software.  Apple, GNU-Darwin, GNU.org, and GNU/Linux will
all help, and we are largely all helping together, because we have a
shared foundation of free software.

http://www.gnu-darwin.org/gdc/

Microsoft is only one example.  That is why we are so insistent that
Apple keep true to free and open source software principles.  We
should ultimately try to leave all proprietary software behind us, so
that we can participate fully in the freedom and openness of the
internet culture and public domain.  What more do we need, when we
have such a rich store of information and so many capable people at
our sides?

Finally, as a scientist, it is obvious to me that this situation is
relevant current and ongoing discussion in the scientific community,
and as such, it is also clear that many members of the various lists
would be interested in the current state of Darwin with respect to
FOSS and with respect to science.  

Here is the crucial point.

The principles of FOSS and scientific inquiry converge.  In
practical terms, how else can you know is what happening in your
experiments?  Free and open source software, open standards, best
promote the scientific endeavor by mirroring its method, but also
they assure that the work is accessible to the public.

Freedom and openness are crucial to understanding, and foundational
to the scientific endeavor, and they should not be compromised. 
There are a few examples of exceptions, but clearly, this matter
will find further debate in the appropriate forums.  We should not
quell debate because a few people are offended or complaining.  
- From a scientific perspective that would be incorrect.

On that last point, I would suggest that Apple get on the right side
of the debate, and they will make tremendous headway.  Now is the
time.

Some people will find this message annoying and divisive, and the
delete button is ready at hand for them, but other people will find 
it interesting and engaging.  All as you like.  Let us not quell
discussion because a few people are annoyed.

Some will call this a troll, but I hope that folks will see through
such name-calling.  Trolls are mythological creatures, so don't
believe in them.  Everyone has a right to have their opinion
heard, even if those opinions are divisive or unpopular.  It is
clear that the idea of trolls is being used to attack freedom of
expression.  In fact, freedom of expression demands that we
listen to the so-called-trolls sometimes, and if you are civil, it
helps, so don't resort to name-calling. 

On cross-posting; when there are matters of urgent importance that
affect a broad range of subscriber lists, courtesy must sometimes
take a back seat, and cross-posting is an example of that. 
Cross-posting is to be encouraged when the subject of the post is on
topic.  Each of the various lists will respond in the way that seems
appropriate to the people in that forum, and the threads on the
various lists will diverge accordingly.  As the threads diverge, the
cross-posting addresses should be removed as needed.  Relevance to
all people is an unattainable goal, but messages of the broadest
applicability should have the broadest reach, and discussion should
not be stymied because some find it irrelevant.  I have given this
method due consideration; it is not trolling, not spam, not off-topic,
and cross-posting is an example of something that is sometimes
required according to the felt importance and relevance of a given
subject matter.  

In summary, Freedom and openness are now the bedrock of our
civilization and public welfare depends on these values, so that we 
should actively engage ourselves in preserving and making them happen.
In keeping with these principles it is crucial to note that there are
exceptions to etiquette, otherwise free expression will be overly
channeled, damped, and ultimately suppressed in our forums.  This
notion of courtesy will certainly receive additional consideration,
but meanwhile, let us together get to work on the activism now.  

Duly, I am amenable to valid criticism and able to respond, but please
reply with kindness.  Obviously, feel free to write back, copy, or
send these comments along to anyone else as you see fit.

Regards,
Michael L. Love Ph.D
Department of Biophysics and Biophysical Chemistry
School of Medicine
Johns Hopkins University
725 N. Wolfe Street
Room 608B WBSB
Baltimore MD 21205-2185

Interoffice Mail: 608B WBSB, SoM

office: 410-614-2267
lab:    410-614-3179
fax:    410-502-6910
cell:   443-824-3451
http://www.gnu-darwin.org/
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFEpIl6u0oI3iz5oZcRAtpQAJ9X7D6kq1vmWKXkG/3LBvx3gGrK1QCZAbgI
8Ww6QABLiZtmFmS9Ekea5nI=
=a0Oy
-----END PGP SIGNATURE-----



From glyph at divmod.com  Sat Jul  1 20:19:09 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 1 Jul 2006 20:19:09 -0400
Subject: [Twisted-Python] FOSS, Science, and Public activism
In-Reply-To: <20060701230204.BF0A46B0FF1@gnu-darwin.org>
Message-ID: <20060702001911.29014.2052665584.divmod.quotient.18471@ohm>

I just want to be clear that Dr. Love's crusade has nothing to do with Twisted, and while I have no specific comment on the issues he discussed in his message, I do object to the Twisted lists being used for spam of any kind, whether commercial, religious, or political.  I've removed his address from the subscription list and hopefully this won't happen again.

I encourage those of you who agree with his assessment that "courtesy must sometimes take a back seat" to contact him using some of the information he helpfully provided, and discuss his ideas personally.

On Sat,  1 Jul 2006 19:02:04 -0400 (EDT), proclus at gnu-darwin.org wrote:

>cell:   443-824-3451



From bob at redivi.com  Sat Jul  1 21:18:52 2006
From: bob at redivi.com (Bob Ippolito)
Date: Sat, 1 Jul 2006 18:18:52 -0700
Subject: [Twisted-Python] FOSS, Science, and Public activism
In-Reply-To: <20060702001911.29014.2052665584.divmod.quotient.18471@ohm>
References: <20060702001911.29014.2052665584.divmod.quotient.18471@ohm>
Message-ID: <91067F0F-D266-4D89-BBF6-D97AC90754D2@redivi.com>

He's been trolling all of the FOSS lists. Please go ahead and call  
him and tell him how annoying he is.

-bob

On Jul 1, 2006, at 5:19 PM, glyph at divmod.com wrote:

> I just want to be clear that Dr. Love's crusade has nothing to do  
> with Twisted, and while I have no specific comment on the issues he  
> discussed in his message, I do object to the Twisted lists being  
> used for spam of any kind, whether commercial, religious, or  
> political.  I've removed his address from the subscription list and  
> hopefully this won't happen again.
>
> I encourage those of you who agree with his assessment that  
> "courtesy must sometimes take a back seat" to contact him using  
> some of the information he helpfully provided, and discuss his  
> ideas personally.
>
> On Sat,  1 Jul 2006 19:02:04 -0400 (EDT), proclus at gnu-darwin.org  
> wrote:
>
>> cell:   443-824-3451
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From sflist at ihonk.com  Sat Jul  1 21:45:35 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Sat, 01 Jul 2006 18:45:35 -0700
Subject: [Twisted-Python] Status of wxPython support in Twisted 2.1:
	use wxreactor
In-Reply-To: <1151691521.5653.5.camel@localhost.localdomain>
References: <1128956792.9046.9.camel@localhost.localdomain>
	<1151631666.6281.29.camel@lothar>
	<1151683888.5653.1.camel@localhost.localdomain>
	<1151689105.6281.67.camel@lothar>
	<1151691521.5653.5.camel@localhost.localdomain>
Message-ID: <1151804735.6366.23.camel@lothar>

On Fri, 2006-06-30 at 14:18 -0400, Itamar Shtull-Trauring wrote:
> On Fri, 2006-06-30 at 10:38 -0700, Steve Freitas wrote:
> 
> > So it's question of merging rather than further bug fixing?  
> 
> Probably. Maybe I'll get JP to help me with it on the weekend.
> 
> > I looked at
> > the feedback on the corresponding bug report
> > <http://twistedmatrix.com/bugs/issue1235> and it seemed like there was
> > still an issue on the Mac -- did you find a solution for that?
> 
> I think the current version doesn't work on Mac either, so it's
> certainly not worse :)

Well I'm willing to put some effort towards getting this reactor
working, if anybody in the know is willing to put up with a series of
(hopefully) decreasingly stupid questions. Twisted really needs a
reactor that Just Works with a good cross-platform GUI toolkit. (Yeah Tk
and GTK blah blah, but who buys a Mac so they can't lick their apps?)

JP and Itamar, have you got any feel for the difficulty level of making
wxreactor pass the tests?

Steve




From exarkun at twistedmatrix.com  Sun Jul  2 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 02 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1151816701.57.433301142@twistedmatrix.com

Bug summary
______________________
Summary for 2006-06-25 through 2006-07-02
Bugs opened: 32    Bugs closed: 22  Total open bugs: 642 (+10)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +3  |Highest:  -2          |Conch:     +1          
|Enhancement:  +3  |High:     +1          |Core:      +3          
|Task:         +5  |Normal:  +10          |Mail:      -1          
                   |Low:      +1          |Pb:        -1          
                   |Lowest:   +1          |Pydoctor:  +1          
                                          |Trial:     +4          
                                          |Web:       +2          
                                          |Web2:      +1          
                                          |Words:     +1          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1874] urlForResource() returns wrong URL for nested resources (eg, /foo/bar/baz) (opened by wsanchez) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1874

[#1875] twisted.internet.task.deferLater() (opened by mithrandi)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1875

[#1884] Document adjustment to review policy (opened by exarkun)
    task            core       http://twistedmatrix.com/trac/ticket/1884

                    ===== High =====
[#1870] TestCase.setUpClass and TestCase.tearDownClass are undocumented and have confusing behavior (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1870

[#1872] Fix "remove .pycs" step on Win32 builders (opened by exarkun)
    task            core       http://twistedmatrix.com/trac/ticket/1872

                    ===== Normal =====
[#1858] Failure formats exception class names incorrectly in printTraceback (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1858

[#1859] Failure cannot correctly determine the parents of a new-style exception (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1859

[#1860] ISFTPServer underspecifies types of file attributes (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1860

[#1861] newpb failure handling incorrectly deals with new-style exceptions (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1861

[#1862] twisted.test.test_failure raises string exceptions which are actually deprecated in Python 2.5 (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1862

[#1863] twisted.test.test_pbfailure.PBFailureTest.testPBFailures is very difficult to debug. (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1863

[#1864] twisted.test.test_stdio sets up child process improperly (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1864

[#1865] jelly cannot handling new-style classes, including new-style exceptions (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1865

[#1866] twisted.python.zipstream does not work with Python 2.5 (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1866

[#1867] Twisted has numerous problems running with Python 2.5 (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1867

[#1868] I have a win32 machine with python 2.4 to contribute to build server (opened by scmikes) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1868

[#1869] twisted.trial.unittest.TestCase.failUnlessFailure should provide more information (opened by exarkun)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1869

[#1871] Instantiating twisted.trial.unittest.TestCase with no arguments raises nasty exception (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1871

[#1873] Large File Uploads Fail (opened by lennyg)
    defect          web2       http://twistedmatrix.com/trac/ticket/1873

[#1877] Setup Buildbot for Suse 10, 32 bit Python 2.5 (opened by scmikes) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1877

[#1878] twisted.web.monitor traceback, AttributeError: class IChangeNotified has no attribute '__class__' (opened by misc at mandriva.org)
    defect          web        http://twistedmatrix.com/trac/ticket/1878

[#1879] Enable PBClientFactory and PBServerFactory to use custom security options. (opened by pgstudy)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1879

[#1881] test_jabbercomponent, test_jabbererror, test_jabberxmlstream, test_msn fail if pyopenssl is not installed. (opened by spiv)
    defect          words      http://twistedmatrix.com/trac/ticket/1881

[#1882] update the coding standard to require docstrings for all new unit test methods (opened by radix)
    task            core       http://twistedmatrix.com/trac/ticket/1882

[#1883] Remove reactor.iterate calls from do_cleanPending (opened by jml)
    task            core       http://twistedmatrix.com/trac/ticket/1883

[#1885] test_ssh.UtilityTestCase.testCounter emits DeprecationWarning in python2.5 (opened by jknight)
    defect          conch      http://twistedmatrix.com/trac/ticket/1885

[#1886] pydoctor assumes all docs are in the same directory (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1886

[#1887] Trial man page is extremely out of date (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/1887

[#1888] Review man pages (opened by jml)
    task            core       http://twistedmatrix.com/trac/ticket/1888

[#1889] twisted.web.microdom should be moved to twisted.python.microdom (opened by jerub)
    enhancement     web        http://twistedmatrix.com/trac/ticket/1889

                    ===== Low =====
[#1876] IReactorTime.callLater masks the builtin 'callable' in its arglist (opened by jerub)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1876

                    ===== Lowest =====
[#1880] deferreds should let you override the "Unhandled error in Deferred" behaviour (opened by ghazel)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1880



Closed Bugs
______________________
                    ===== Highest =====
[#302 ] client certificate verification (move sslverify into twisted.internet) (opened by jknight, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/302

[#1797] twisted/web/topfiles/setup.py fails during build_scripts (opened by exarkun, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1797

[#1507] trial doesn't gc.collect between test methods (opened by jknight, closed by jml, )
    defect          trial      http://twistedmatrix.com/trac/ticket/1507

[#1874] urlForResource() returns wrong URL for nested resources (eg, /foo/bar/baz) (opened by wsanchez, closed by wsanchez, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1874

[#1636] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm, closed by jknight, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1636

[#1637] many examples use deprecated imports (opened by jerub, closed by stephen, fixed)
    defect          mail       http://twistedmatrix.com/trac/ticket/1637

                    ===== High =====
[#1401] Difference between twisted.spread.jelly and twisted.spread.newjelly undocumented (opened by moof, closed by jknight, invalid)
    defect          pb         http://twistedmatrix.com/trac/ticket/1401

                    ===== Normal =====
[#1868] I have a win32 machine with python 2.4 to contribute to build server (opened by scmikes, closed by radix, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1868

[#1364] [PATCH] re-installation of the same reactor (opened by antony, closed by TimothyFitz, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1364

[#1866] twisted.python.zipstream does not work with Python 2.5 (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1866

[#1859] Failure cannot correctly determine the parents of a new-style exception (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1859

[#1858] Failure formats exception class names incorrectly in printTraceback (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1858

[#1865] jelly cannot handling new-style classes, including new-style exceptions (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1865

[#1864] twisted.test.test_stdio sets up child process improperly (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1864

[#1863] twisted.test.test_pbfailure.PBFailureTest.testPBFailures is very difficult to debug. (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1863

[#1862] twisted.test.test_failure raises string exceptions which are actually deprecated in Python 2.5 (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1862

[#1861] newpb failure handling incorrectly deals with new-style exceptions (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1861

[#1842] Deprecated usage of id in __hash__ methods (opened by therve, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1842

[#1867] Twisted has numerous problems running with Python 2.5 (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1867

[#1877] Setup Buildbot for Suse 10, 32 bit Python 2.5 (opened by scmikes, closed by scmikes, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1877

[#1748] Using twisted.cred.credentials results in deprecation warnings in Twisted 2.4 (opened by szumo, closed by jknight, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1748

[#1599] t.p.c.Interface shouldn't warn when a user inherits from another interface (opened by jknight, closed by jknight, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1599





From jacob at internet24.de  Mon Jul  3 04:52:43 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Mon, 03 Jul 2006 10:52:43 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <44A69D81.6090306@unipex.it>
References: <44A69D81.6090306@unipex.it>
Message-ID: <1151916763.17217.12.camel@localhost.localdomain>

On Sat, 2006-07-01 at 18:06 +0200, Michele Petrazzo wrote:
> I have this code:
> 
> creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
>                           self._passive, fail=self._Fail)
> cre = creator.connectTCP(self._host, self._port)
> cre.addCallback(self._ConnectionMade)
> cre.addErrback(self._Fail)
> 
> I see that I can add a deferred on an connection error, that receive
> also the commands error ("wrong user", etc..), but is there a solution
> for add a callback for "user logged in" (code 230)?

As far as I can see, _ConnectionMade is fired only when 
the login was successful (Code 230), no? Isn't that
all you need?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060703/129779e1/attachment.pgp 

From michele.petrazzo at unipex.it  Mon Jul  3 05:59:44 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Mon, 03 Jul 2006 11:59:44 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <1151916763.17217.12.camel@localhost.localdomain>
References: <44A69D81.6090306@unipex.it>
	<1151916763.17217.12.camel@localhost.localdomain>
Message-ID: <44A8EA90.3080601@unipex.it>

Thomas Jacob wrote:
> On Sat, 2006-07-01 at 18:06 +0200, Michele Petrazzo wrote:
>> I have this code:
>>
>> creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
>>                           self._passive, fail=self._Fail)
>> cre = creator.connectTCP(self._host, self._port)
>> cre.addCallback(self._ConnectionMade)
>> cre.addErrback(self._Fail)
>>
>> I see that I can add a deferred on an connection error, that receive
>> also the commands error ("wrong user", etc..), but is there a solution
>> for add a callback for "user logged in" (code 230)?
> 
> As far as I can see, _ConnectionMade is fired only when 
> the login was successful (Code 230), no? 

Not on my linux-box:

def conn():
   creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
                          self._passive)
   cre = creator.connectTCP(self._host, self._port)
   cre.addCallback(self._ConnectionMade)
   cre.addErrback(self._Fail)

def _ConnectionMade(self, ftpClient):
   print "_ConnectionMade"

def _Fail(self, response):
   print response.getTraceback()

michele:~$ python hylapex.py
_ConnectionMade
Traceback (most recent call last):
Failure: twisted.protocols.ftp.CommandFailed: ["500 'PASS ': Syntax 
error, expecting password."]

May be that my server isn't a "real" server, but an "hylafax" server 
that act like a ftp server?

> Isn't that all you need?
> 

I need a function called after the "queueLogin" successfully called and
ended.
Something like this bad hack:

www.unipex.it/vario/myftp.py

that I use:

def conn():
   creator = ClientCreator(reactor, FClient, self._user, self._passwd,
             self._passive, self._loggedin)
   cre = creator.connectTCP(self._host, self._port)
   cre.addCallback(self._ConnectionMade)
   cre.addErrback(self._Fail)

def _loggedin(self, res):
   print res
   self._loggedin = 1

def _ConnectionMade(self, ftpClient):
   print "_ConnectionMade"
   self._connected = 1

def _Fail(self, response):
   print response.getTraceback()

michele:~$ python hylapex.py
_ConnectionMade
['230 User michele logged in.']

Michele



From jacob at internet24.de  Mon Jul  3 07:35:52 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Mon, 03 Jul 2006 13:35:52 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <44A8EA90.3080601@unipex.it>
References: <44A69D81.6090306@unipex.it>
	<1151916763.17217.12.camel@localhost.localdomain>
	<44A8EA90.3080601@unipex.it>
Message-ID: <1151926552.17217.27.camel@localhost.localdomain>

> May be that my server isn't a "real" server, but an "hylafax" server 
> that act like a ftp server?

I guess that's the problem. Looking at your myftp.py and
your email, maybe the hylafax-ftp-server responds
with a 230 after the USER command, even though
a password is still required, thereby violating
the FTP protocol:

http://cr.yp.to/ftp/user.html

?



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060703/6044a457/attachment.pgp 

From michele.petrazzo at unipex.it  Mon Jul  3 12:12:33 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Mon, 03 Jul 2006 18:12:33 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <1151926552.17217.27.camel@localhost.localdomain>
References: <44A69D81.6090306@unipex.it>	<1151916763.17217.12.camel@localhost.localdomain>	<44A8EA90.3080601@unipex.it>
	<1151926552.17217.27.camel@localhost.localdomain>
Message-ID: <44A941F1.2050700@unipex.it>

Thomas Jacob wrote:
>> May be that my server isn't a "real" server, but an "hylafax" 
>> server that act like a ftp server?
> 
> I guess that's the problem. Looking at your myftp.py and your email, 
> maybe the hylafax-ftp-server responds with a 230 after the USER 
> command, even though a password is still required, thereby violating
>  the FTP protocol:
> 

This isn't true:
at "def cancelPasswordIfNotNeeded(response):", I add: "print response" and:

_ConnectionMade
['331 Password required for michele.'] # send the password
['230 User michele logged in.']

So hylafax (ftp server) work well, like specification!

You can read also the old "user+230" issue:
twistedmatrix.com/trac/ticket/1130

> ?
> 

For me and my project, my patch work, but isn't so beautiful to see, and
I have to control if all work well every time that I update twisted.
(due to the rewrite of some methods)
Another thing if that if the server work like specific (like seem),
twisted lack of that useful function!

Thanks,
Michele



From jml at mumak.net  Tue Jul  4 03:32:38 2006
From: jml at mumak.net (Jonathan Lange)
Date: Tue, 4 Jul 2006 17:32:38 +1000
Subject: [Twisted-Python] Trial ticket priorities
Message-ID: <d06a5cd30607040032k129aee49l4b3971570be94f39@mail.gmail.com>

Hello,

I've just re-prioritized a bunch of my Trial tickets. There are too
many tickets and not enough time, so I've had to make _some_ kind of
change in order to keep things ticking along.  For my purposes I've
defined highest and high as 'likely to get worked on when I next sit
down to hack'.

Please do not adjust the priorities without first discussing your
change with me.  Also, let me know If this violates some unwritten
policy -- I'll figure something else out.

Spending this time defining my work should help me fix more tickets
when I next hack.

cheers,
jml



From mftian at gmail.com  Tue Jul  4 22:17:14 2006
From: mftian at gmail.com (xie marffin&tian)
Date: Wed, 5 Jul 2006 10:17:14 +0800
Subject: [Twisted-Python] Newbie to twisted
Message-ID: <a28ffaac0607041917o1ad6bf73rd6e049f891c7cc7@mail.gmail.com>

hi

I learned python and was a new user to twisted. It's a bit complex. I
tried to start from reading the "core developper guide"(book.pdf) but
I still couldn't find the direction. Is there any advice on how to
start twisted programming or any other friendly tutorial?

many Thanks!



From wgwigw at gmail.com  Tue Jul  4 22:33:13 2006
From: wgwigw at gmail.com (wang wei)
Date: Wed, 5 Jul 2006 10:33:13 +0800
Subject: [Twisted-Python] what's wrong in my code?
Message-ID: <dbeb95830607041933x1fb5f30aq2c766c7f35a1467e@mail.gmail.com>

hi, I got 'twisted.internet.defer.alreadycallederror' error back.
here is my code, what's wrong in it? thanks for help.

class snmpFactory:
    def __init__(self, filename):

        self.deferred = defer.Deferred()

    def readValue(self):
        vol = readValue(self.voltageIp, voltageOid)
        temp = readValue(self.powerIp, temperatureOid)
        self.deferred.callback((vol, temp))
        self.deferred.addCallback(self.handleResult)
    def handleResult(self, (vol, temp)):
        slice = time.strftime("%H:%M:%S")
        print slice, ' the voltage is %s\nthe temperature is %s' % (vol,
temp)

s = snmpFactory()
i = 1
while (i < 10):
    reactor.callLater(5, s.readSnmpValue)
    i += 1
    time.sleep(10)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060705/573af3a4/attachment.htm 

From jml at mumak.net  Tue Jul  4 23:16:49 2006
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 5 Jul 2006 13:16:49 +1000
Subject: [Twisted-Python] what's wrong in my code?
In-Reply-To: <dbeb95830607041933x1fb5f30aq2c766c7f35a1467e@mail.gmail.com>
References: <dbeb95830607041933x1fb5f30aq2c766c7f35a1467e@mail.gmail.com>
Message-ID: <d06a5cd30607042016u2f8394c3kc5bb982e4d854683@mail.gmail.com>

On 05/07/06, wang wei <wgwigw at gmail.com> wrote:
> hi, I got 'twisted.internet.defer.alreadycallederror' error
> back.
> here is my code, what's wrong in it? thanks for help.

There's actually a lot wrong with your code.  I've dumped everything I
can think of here.  Don't worry, I get more helpful as you go further
down the email.

First, the simple stuff:
- reactor is not imported
- time is not imported
- snmpFactory constructor takes an unused filename parameter
- snmpFactory is constructed without passing the filename parameter
- defer is not imported
- the main while loop calls 'readSnmpValue' on an snmpFactory
instance, but there is no readSnmpValue method to be seen anywhere
- the readValue method calls a readValue function which is not defined
- you use a while loop and a counter when 'for i in range(10)' would
do the same thing more simply
- readValue refers to instance variables 'voltageIp' and 'powerIp',
neither of which are defined
- readValue refers to global variables 'voltageOid' and
'temperatureOid', neither of which are defined
- your code runs the reactor but never stops it.

Second, the complex stuff:
- Nothing in the code explains what you are trying to do, or even
specifies the API of the methods that you refer to.
- reactor.callLater(5, s.readValue) roughly means "call s.readValue
with no arguments in 5 seconds time". You probably don't want to do
that.
- You probably don't want to call time.sleep()
- In fact, you probably want a LoopingCall (see the API docs for details)

Third, the AlreadyCalledError:
- You create exactly one instance of snmpFactory. This means that
there is exactly one Deferred.  You fire this Deferred (i.e. run
callback on it) in the first pass of the main while loop. You can only
fire a Deferred once. The next time the loop goes around, you try to
fire it a second time.  This will raise an AlreadyCalledError.

Fourth, a note on asking for help:
Many people on this list are happy to help you learn Twisted.
However, anyone who does help you will be doing so in their spare
time. This means it is your responsibility to make it as easy for us
to help you as possible.  Two specific ways spring to mind:

1. If you are posting code, please post a minimal example that other
people can run.
2. Read http://www.catb.org/~esr/faqs/smart-questions.html

Your example is pretty small -- that's good. You know how to cut out
irrelevant code. However, your example is not even close to being
runnable. Even after I've taken the time to make it run, it doesn't
reproduce the error that you refer to.

Good luck with fixing your error.

jml



From foom at fuhm.net  Tue Jul  4 23:25:26 2006
From: foom at fuhm.net (James Y Knight)
Date: Tue, 4 Jul 2006 23:25:26 -0400
Subject: [Twisted-Python] =?utf-8?q?Re=3A_=5BTwisted-commits=5D_r17484_-_?=
 =?utf-8?q?Branching_to_callQueue=E2=88=9E=C2=88=C2=9E-1741?=
In-Reply-To: <E1Fxp3A-0007a9-00@wolfwood>
References: <E1Fxp3A-0007a9-00@wolfwood>
Message-ID: <25E36AA9-1666-4B61-96F0-4C8C8392BC79@fuhm.net>

For future reference, at least the following things failed to work  
with unicode in the branch/file name:

emacs couldn't open files in the directory using c-x c-f, but could  
from the command line (osx only issue possibly)
buildbot wouldn't build the branch
combinator couldn't make the branch
"svn log --stop-on-copy" couldn't "recode string" and wouldn't  
display anything.
The svn mailer script properly encoded the body in utf8, but the  
subject was marked as encoded in latin-1 while really being in utf8.

So, consider the experiment failed. I'd like to suggest a new rule:  
ascii filenames only. :)

James

On Jul 4, 2006, at 1:51 PM, James Knight wrote:

> Author: foom
> Date: Tue Jul  4 11:51:02 2006
> New Revision: 17484
>
> Added:
>    branches/callQueue?-1741/
>       - copied from r17483, trunk/
> Log:
> Branching to callQueue?-1741
>
> _______________________________________________
> Twisted-commits mailing list
> Twisted-commits at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-commits
>




From flashbuster at gmail.com  Tue Jul  4 23:31:38 2006
From: flashbuster at gmail.com (Sebastian Schulze)
Date: Wed, 5 Jul 2006 05:31:38 +0200
Subject: [Twisted-Python] Newbie to twisted
In-Reply-To: <a28ffaac0607041917o1ad6bf73rd6e049f891c7cc7@mail.gmail.com>
References: <a28ffaac0607041917o1ad6bf73rd6e049f891c7cc7@mail.gmail.com>
Message-ID: <c2959a420607042031v1d982ebhfc0cf5c8132c50@mail.gmail.com>

There is a good book about Twisted by Abe Fettig.
http://www.amazon.com/gp/product/0596100329/sr=8-1/qid=1152070192/ref=pd_bbs_1/104-3365398-9922356?ie=UTF8
If you prefer reading books to reading stuff online (like me) i can
recommend it to you.
It's a good starting point to learn about the asynchronous twistedapproach
and covers
many things.

2006/7/5, xie marffin&tian <mftian at gmail.com>:
>
> hi
>
> I learned python and was a new user to twisted. It's a bit complex. I
> tried to start from reading the "core developper guide"(book.pdf) but
> I still couldn't find the direction. Is there any advice on how to
> start twisted programming or any other friendly tutorial?
>
> many Thanks!
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060705/f3db6c66/attachment.htm 

From wgwigw at gmail.com  Wed Jul  5 22:57:35 2006
From: wgwigw at gmail.com (wang wei)
Date: Thu, 6 Jul 2006 10:57:35 +0800
Subject: [Twisted-Python] Re: what's wrong in my code?
Message-ID: <dbeb95830607051957m56861415te9c1317cc9a35bc4@mail.gmail.com>

thanks for help, I will read the documents of smart-questions soon:)
last night I read the twisted's book on the its web site, and I think there
are 2 major mistake there. 1. the defer should not be inintinitialized  in
the __init__ phase, that's easy to understood why there are
AlreadCalledError. 2. twisted use task to run the loop. :D
that's a sample code here.

from twisted.internet import reactor, defer, task
class snmpFactory:
   def __init__(self):

   def readValue(self):
       self.deferred = defer.Deferred()
       vol = readValue(self.voltageIp, voltageOid)
       temp = readValue(self.powerIp, temperatureOid)
       reactor.callLater(0, self.handleResult, (vol, temp))
       return self.deferred
   def handleResult(self, (vol, temp)):
       slice = time.strftime("%H:%M:%S")
       print slice, ' the voltage is %s\nthe temperature is %s' % (vol,
temp)

s = snmpFactory()
l = task.LoopingCall(s.readSnmpValue)
l.start(2)
reactor.run()

It's my first twisted program, thank for Jonathan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060706/6dc7eef8/attachment.htm 

From yrojass at gmail.com  Fri Jul  7 03:10:20 2006
From: yrojass at gmail.com (=?ISO-8859-1?Q?Yusnel_Rojas_Garc=EDa?=)
Date: Fri, 7 Jul 2006 00:10:20 -0700
Subject: [Twisted-Python] deferred object inside function
Message-ID: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>

how can I make a function which have a deferred object return a value that
depends of the deferred object's result.
example:
how can get the result from the resolver?

from twisted.names import client, dns

def somefunction(somepars):
       r  = client.Resolver('/etc/resolv.conf')
       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
       d.Callbacks(somefunct1, somefunctErr2)
       return ?


cheers one
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060707/44a85ee0/attachment.htm 

From jacob at internet24.de  Fri Jul  7 04:44:37 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Fri, 07 Jul 2006 10:44:37 +0200
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
Message-ID: <1152261878.6899.2.camel@localhost.localdomain>

Do you want to do something like the following?

http://twistedmatrix.com/projects/core/documentation/howto/deferredindepth.html#auto12


On Fri, 2006-07-07 at 00:10 -0700, Yusnel Rojas Garc?a wrote:
> how can I make a function which have a deferred object return a value
> that depends of the deferred object's result.
> example:
> how can get the result from the resolver?
> 
> from twisted.names import client, dns
> 
> def somefunction(somepars):
>        r  = client.Resolver('/etc/resolv.conf')
>        d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>        d.Callbacks(somefunct1, somefunctErr2) 
>        return ?
> 
> 
> cheers one
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060707/607eb2a7/attachment.pgp 

From duncan.mcgreggor at gmail.com  Fri Jul  7 04:48:11 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Fri, 07 Jul 2006 02:48:11 -0600
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
Message-ID: <44AE1FCB.2060004@gmail.com>

Yusnel Rojas Garc?a wrote:

> how can I make a function which have a deferred object return a value that
> depends of the deferred object's result.
> example:
> how can get the result from the resolver?
> 
> from twisted.names import client, dns
> 
> def somefunction(somepars):
>       r  = client.Resolver('/etc/resolv.conf')
>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>       d.Callbacks(somefunct1, somefunctErr2)
>       return ?

Have you read the docs on deferreds? There's a bunch of good ones now,
and you can get to them here:
  http://twistedmatrix.com/projects/core/documentation/howto/index.html

In particular, you want the section on "Low-Level Networking and Event
Loop".

In your example above, you probably want this, instead:

  d.addCallbacks(yourCallback, yourErrback)

As for your question, see if this sums it up:

* You want some data
* The data depends upon the result

If that's correct, then you can only get your data in the callback.
Think about writing a class to handle this, and instead of having a
function return what you want, you could set a class attribute with the
data you're looking for once the callback is fired. Or any other of
hundreds of possible solutions ;-)

d



From robert at gravina.com  Fri Jul  7 05:24:14 2006
From: robert at gravina.com (Robert Gravina)
Date: Fri, 7 Jul 2006 18:24:14 +0900
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <44AE1FCB.2060004@gmail.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
	<44AE1FCB.2060004@gmail.com>
Message-ID: <371DA0C2-3F88-46AA-83A1-13453418528A@gravina.com>

> Yusnel Rojas Garc?a wrote:
>
>> how can I make a function which have a deferred object return a  
>> value that
>> depends of the deferred object's result.
>> example:
>> how can get the result from the resolver?
>>
>> from twisted.names import client, dns
>>
>> def somefunction(somepars):
>>       r  = client.Resolver('/etc/resolv.conf')
>>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>>       d.Callbacks(somefunct1, somefunctErr2)
>>       return ?
>
> Have you read the docs on deferreds? There's a bunch of good ones now,
> and you can get to them here:
>   http://twistedmatrix.com/projects/core/documentation/howto/ 
> index.html
>

Yes, I think http://twistedmatrix.com/projects/core/documentation/ 
howto/defer.html is a good place to start also.

While I'm no Twisted expert, I think the main point of confusion you  
are having is here:

d.Callbacks(somefunct1, somefunctErr2)
return ?

The great thing about Deferreds (and Twisted) is that it is  
asynchronous - that means that calls like your DNS query are non- 
blocking - in other words, your program doesn't sit around and wait  
while the DNS query is happening. I think you are expecting your  
program to wait until the DNS query is finished before getting to the  
"return" line... but it will keep on going, and later (at some time,  
maybe a few seconds later) either your "somefunct1" will be called if  
everything worked out, or your "somefunctErr2" will be called if  
there is an error. But, it will get to the return line probably  
before either of those two methods get called.

I really do suggest working through the Twisted Howtos (they are  
*excellent*) and running the example code to see it in action. It  
helps a lot.

Robert

> In particular, you want the section on "Low-Level Networking and Event
> Loop".
>
> In your example above, you probably want this, instead:
>
>   d.addCallbacks(yourCallback, yourErrback)
>
> As for your question, see if this sums it up:
>
> * You want some data
> * The data depends upon the result
>
> If that's correct, then you can only get your data in the callback.
> Think about writing a class to handle this, and instead of having a
> function return what you want, you could set a class attribute with  
> the
> data you're looking for once the callback is fired. Or any other of
> hundreds of possible solutions ;-)
>
> d
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From eprparadocs at gmail.com  Fri Jul  7 07:07:57 2006
From: eprparadocs at gmail.com (Chaz.)
Date: Fri, 07 Jul 2006 07:07:57 -0400
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <371DA0C2-3F88-46AA-83A1-13453418528A@gravina.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>	<44AE1FCB.2060004@gmail.com>
	<371DA0C2-3F88-46AA-83A1-13453418528A@gravina.com>
Message-ID: <44AE408D.6050202@gmail.com>

Boy no one seemed to offer the answer. What will happen in your code, if
I am not mistaken, is that somefunct1() will be called with the results
of the resolver. In essense r.resolve() when it returns the deferred
promises to invoke one of the callbacks (either the normal one or error
one). To that call back it will supply an appropriate argument.

You should do a 'return d' from your function. Anyone that issues a
Callback against that deferred will be invoked only if your function
somefunct() uses the defer.

Hope that helps. If not, send me a private email and I can help you get it.

Chaz

Robert Gravina wrote:
>> Yusnel Rojas Garc?a wrote:
>>
>>> how can I make a function which have a deferred object return a value
>>> that
>>> depends of the deferred object's result.
>>> example:
>>> how can get the result from the resolver?
>>>
>>> from twisted.names import client, dns
>>>
>>> def somefunction(somepars):
>>>       r  = client.Resolver('/etc/resolv.conf')
>>>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>>>       d.Callbacks(somefunct1, somefunctErr2)
>>>       return ?
>>
>> Have you read the docs on deferreds? There's a bunch of good ones now,
>> and you can get to them here:
>>   http://twistedmatrix.com/projects/core/documentation/howto/index.html
>>
> 
> Yes, I think
> http://twistedmatrix.com/projects/core/documentation/howto/defer.html is
> a good place to start also.
> 
> While I'm no Twisted expert, I think the main point of confusion you are
> having is here:
> 
> d.Callbacks(somefunct1, somefunctErr2)
> return ?
> 
> The great thing about Deferreds (and Twisted) is that it is asynchronous
> - that means that calls like your DNS query are non-blocking - in other
> words, your program doesn't sit around and wait while the DNS query is
> happening. I think you are expecting your program to wait until the DNS
> query is finished before getting to the "return" line... but it will
> keep on going, and later (at some time, maybe a few seconds later)
> either your "somefunct1" will be called if everything worked out, or
> your "somefunctErr2" will be called if there is an error. But, it will
> get to the return line probably before either of those two methods get
> called.
> 
> I really do suggest working through the Twisted Howtos (they are
> *excellent*) and running the example code to see it in action. It helps
> a lot.
> 
> Robert
> 
>> In particular, you want the section on "Low-Level Networking and Event
>> Loop".
>>
>> In your example above, you probably want this, instead:
>>
>>   d.addCallbacks(yourCallback, yourErrback)
>>
>> As for your question, see if this sums it up:
>>
>> * You want some data
>> * The data depends upon the result
>>
>> If that's correct, then you can only get your data in the callback.
>> Think about writing a class to handle this, and instead of having a
>> function return what you want, you could set a class attribute with the
>> data you're looking for once the callback is fired. Or any other of
>> hundreds of possible solutions ;-)
>>
>> d
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 





From sean at twistedmatrix.com  Fri Jul  7 17:01:10 2006
From: sean at twistedmatrix.com (Wilton Conklin)
Date: Fri, 07 Jul 2006 16:01:10 -0500
Subject: [Twisted-Python] Want the degree but can't find the time?
Message-ID: <hqmnznoVZBIHEGsean@twistedmatrix.com>


UNIVERSITY DIPLOMAS

Obtain a prosperous future, money-earning power and the
prestige that comes with having the career position you've
always dreamed of. Diplomas from prestigious non-accredited
universities based on your present knowledge and life experience

If you qualify, no tests, classes, books or examinations will be 
required.

Bachelors', Masters', MBA's, Doctorate & Ph.D. degrees available in 
your field.

CONFIDENTIALITY ASSYRED

CALL NOW TO RECEIVE YOUR DIPLOMA WITHIN 2 WEEKS

1-650-456-2500

Call 24HRS, 7 days a week, including Sundays and holidays







From glyph at divmod.com  Fri Jul  7 20:18:43 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Fri, 7 Jul 2006 20:18:43 -0400
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
Message-ID: <20060708001843.29014.1344444676.divmod.quotient.27203@ohm>

On Fri, 7 Jul 2006 00:10:20 -0700, Yusnel Rojas Garc?a <yrojass at gmail.com> wrote:

>from twisted.names import client, dns
>
>def somefunction(somepars):
>       r  = client.Resolver('/etc/resolv.conf')
                             ^ Resolver takes an IP address here,
                               not a filename.
>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
              ^ Resolver does not have a "resolve" method.
                You can read the API documentation for IResolver here:
    http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IResolver.html
                Perhaps you meant "lookupMailExchange"?
>       d.Callbacks(somefunct1, somefunctErr2)
          ^ Deferreds do not have this method.
            You can read the API documentation for Deferred here:
   http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html
            Perhaps you meant "addCallbacks"?
>       return ?
               ^ what you want to return here is 'd'
               That way callers of this function can get the results, but they have to wait for the results as well.

The main thing you want to do, e.g. stop your program and wait in-place for results to appear, is completely impossible.  I've watched a number of people go through this process, and I can say with some certainty that what you need to do is focus on understanding why it's impossible, not searching for esoteric ways to make it happen.  If you _do_ manage to do something that appears to be what you want, it will be wrong in surprising and upsetting ways fairly quickly.  If you are just looking for a way to mess around interactively with Deferred objects and their results, run twisted/conch/stdio.py.  Here's a screenshot:

http://twistedmatrix.com/users/glyph/screenshots/twisted-shell-resolving-a-name.png

I've also written a brief example of what you want to do that actually works.  Notice the parts of the code where the result does not exist vs. those where it does.  Keep in mind that *the reactor needs to do work*, such as sending and receiving traffic, in order to produce a result; it's impossible to produce one immediately.

# ---- cut here ----

# We don't need to build queries ourselves, just a resolver.
from twisted.names.client import Resolver

theResolver = Resolver("/etc/resolv.conf")

def getMX(hostname="twistedmatrix.com", r=theResolver):
    d = r.lookupMailExchange(hostname)
    # We're going to look up twistedmatrix.com's address, but we don't have a
    # result *now*...
    def showAddress((answers, authority, additional)):
        # but we _do_ have a result *now*.  the Deferred calls this function
        # when it gets a result, because (see below) ...
        print 'Got', len(answers), 'results.'
        for resourceRecordHeader in answers:
            mxRecord = resourceRecordHeader.payload
            dnsName = mxRecord.name
            nameString = dnsName.name
            print "one answer: ", nameString
        # pass through the values we were given in case callers of this
        # function want to use them.
        return (answers, authority, additional)
    # here we tell the Deferred: when you get a successful result, call that
    # function.
    d.addCallback(showAddress)
    # We return the Deferred so that callers of this function can act upon it.
    return d

from twisted.internet import reactor

# Kick off our code: rather than addCallback, we use addBoth here, because we
# want to stop the reactor whether it fails or not.  If we only wanted to act
# in case the DNS operation failed, we could use addErrback instead.
getMX().addBoth(lambda ignored: reactor.stop())

# You don't have to do this in most Twisted programs, because they will be
# running in the reactor already, and you generally don't want to stop the
# reactor if your program is supposed to keep running.

reactor.run()




From glyph at divmod.com  Fri Jul  7 20:36:59 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Fri, 7 Jul 2006 20:36:59 -0400
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <20060708001843.29014.1344444676.divmod.quotient.27203@ohm>
Message-ID: <20060708003659.29014.1957182293.divmod.quotient.27223@ohm>

On Fri, 7 Jul 2006 20:18:43 -0400, glyph at divmod.com wrote:
>On Fri, 7 Jul 2006 00:10:20 -0700, Yusnel Rojas Garc?a <yrojass at gmail.com> 
>wrote:
>>from twisted.names import client, dns
>>
>>def somefunction(somepars):
>>       r  = client.Resolver('/etc/resolv.conf')
>                             ^ Resolver takes an IP address here,
>                               not a filename.
                                ^ this comment is incorrect, please ignore it.



From dreid at dreid.org  Sat Jul  8 01:18:26 2006
From: dreid at dreid.org (David Reid)
Date: Fri, 07 Jul 2006 22:18:26 -0700
Subject: [Twisted-Python] Bay Area Twisted Sprint - July 15th and 16th
Message-ID: <44AF4022.5050002@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

This is the official announcement of the Bay Area Twisted Sprint.  It is
to be held on July 15th and 16th at the offices of Three Rings Design
Inc. (the people who brought you that wonderful tool of procrastination
"Puzzle Pirates")  which are located at:

612 Howard St, Suite 500
San Francisco, CA 94150
Google Map: http://tinyurl.com/pb588

The sprint will last from 10am-8pm on Saturday the 15th and Sunday the
16th, and will focus on closing outstanding bugs (perhaps followed by
some sort of maintenance releases.) If you're going to be attending the
sprint reply to this email so that our gracious hosts have some idea of
what to expect.

Thanks
- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEr0AirsrO6aeULcgRAvgVAKCJkgO7r/4Bstck16GS3VaYArRUnACfXv8s
sE45pM4dGEdPAQ5hok4IyCs=
=gfYe
-----END PGP SIGNATURE-----



From wgwigw at gmail.com  Sat Jul  8 07:22:19 2006
From: wgwigw at gmail.com (wang wei)
Date: Sat, 8 Jul 2006 19:22:19 +0800
Subject: [Twisted-Python] how can I Scheduling a command?
Message-ID: <dbeb95830607080422yd884760vd0ca4ff8acaae37f@mail.gmail.com>

hi, is there any modules in twisted to do such things? at 9:00 am post a
mail, at 4:00 pm, to give me report? thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060708/cfbb7b98/attachment.htm 

From stephane_brault at yahoo.fr  Sat Jul  8 08:17:52 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Sat, 8 Jul 2006 12:17:52 +0000 (GMT)
Subject: [Twisted-Python] how can I Scheduling a command?
In-Reply-To: <dbeb95830607080422yd884760vd0ca4ff8acaae37f@mail.gmail.com>
Message-ID: <20060708121752.42545.qmail@web26511.mail.ukl.yahoo.com>

Hi,
 I did just that, basing my code on the scheduler Stephen Richter has done some months ago to integrate twisted and zope (google twisted zope integration). Its' a little buggy but I debugged it, if you wish I'll send you my code.
 
 St?phane

----- Message d'origine ----
De : wang wei <wgwigw at gmail.com>
? : twisted-python at twistedmatrix.com
Envoy? le : Samedi, 8 Juillet 2006, 1h22mn 19s
Objet : [Twisted-Python] how can I Scheduling a command?

hi, is there any modules in twisted to do such things? at 9:00 am post a mail, at 4:00 pm, to give me report? thanks.
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060708/6773c765/attachment.htm 

From mike at mkp.ca  Sat Jul  8 11:55:55 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Sat, 8 Jul 2006 11:55:55 -0400
Subject: [Twisted-Python] Insults, Can't write from connectionMade?
Message-ID: <200607081155.56186.mike@mkp.ca>

Hello, twisted Twisted coders.  I am trying to get familiarised with 
twisted.conch.insults.  I've run into some behaviour I cannot explain.  
Attached is a .tac including the following excerpt:

class MyTerminalProtocol(insults.TerminalProtocol):
    width = 80
    height = 24
    
    def connectionMade(self):
        self.terminalSize(self.width, self.height)
        self.terminal.write(" world\n")

    def terminalSize(self, width, height):
        self.width, self.height = width, height
        self.terminal.eraseDisplay()
        self.terminal.write("Hello,")

When a connection is made, the screen is cleared and "Hello," is written, 
but " world\n" is not (or at least it never appears on the terminal).  Why 
is "world\n" not written?

Oddly (or perhaps revealingly for someone with more clues than me), when in a 
previous version I did not use TelnetTransport and TelnetBootstrapProtocol, I 
was able to write just fine from connectionMade.

TIA for a liberal and violent application of the clue stick.

Mike.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: insults_proto.tac
Type: application/x-python
Size: 1102 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060708/13b9d5aa/attachment.bin 

From exarkun at divmod.com  Sat Jul  8 12:31:55 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 8 Jul 2006 12:31:55 -0400
Subject: [Twisted-Python] Insults, Can't write from connectionMade?
In-Reply-To: <200607081155.56186.mike@mkp.ca>
Message-ID: <20060708163155.29014.327773380.divmod.quotient.28095@ohm>

On Sat, 8 Jul 2006 11:55:55 -0400, Mike Pelletier <mike at mkp.ca> wrote:
>Hello, twisted Twisted coders.  I am trying to get familiarised with
>twisted.conch.insults.  I've run into some behaviour I cannot explain.
>Attached is a .tac including the following excerpt:
>
>class MyTerminalProtocol(insults.TerminalProtocol):
>    width = 80
>    height = 24
>
>    def connectionMade(self):
>        self.terminalSize(self.width, self.height)
>        self.terminal.write(" world\n")
>
>    def terminalSize(self, width, height):
>        self.width, self.height = width, height
>        self.terminal.eraseDisplay()
>        self.terminal.write("Hello,")
>
>When a connection is made, the screen is cleared and "Hello," is written,
>but " world\n" is not (or at least it never appears on the terminal).  Why
>is "world\n" not written?

It actually is written:

>>> import socket
>>> s = socket.socket()
>>> s.connect(('localhost', 1977))
>>> s.recv(1024)
'\xff\xfd"\xff\xfd\x1f\xff\xfd\x03\xff\xfb\x01\x1b[2JHello, world\r\r\r\n'

I'm not sure why "Hello," shows up in an xterm but " world" doesn't: it
may be a terminal emulation bug or some legitimate interaction between
all the control sequences included there.  But clearly there is a problem
here somewhere - your \n is being translated into \r\r\r\n.

Could you file a ticket in the tracker and attach this tac file?

>
>Oddly (or perhaps revealingly for someone with more clues than me), when in a
>previous version I did not use TelnetTransport and TelnetBootstrapProtocol, I
>was able to write just fine from connectionMade.
>
>TIA for a liberal and violent application of the clue stick.
>

Jean-Paul



From matusis at matusis.com  Sat Jul  8 15:31:51 2006
From: matusis at matusis.com (Alec Matusis)
Date: Sat, 8 Jul 2006 12:31:51 -0700
Subject: [Twisted-Python] UDP question
Message-ID: <E1FzIX0-0006Gi-00@pyramid.twistedmatrix.com>

I have a question about using UDP in twisted. I hope people will forgive my
naivet?, since my background is in physics, not in CS, so I am self-taught
and may be missing something obvious.

I would like a server to send UDP broadcasts to multiple clients, where all
clients receive the same broadcast. 

>From what I understood from
http://twistedmatrix.com/projects/core/documentation/howto/udp.html
Multicast UDP section, one can have a client broadcast the same UDP packet
to multiple servers, each server listening on the same port for this
multicast.
This is unacceptable for me, since all of this must happen on the same
machine, so I cannot bind multiple servers to the same port on one box. So I
am trying to implement a reverse scenario, where the server will do the
multicast to clients, but all clients and the server may (or may not) be
running on the same box.

How can I do this in twisted? Could you give me and example? Thanks.






From jarrod at vertigrated.com  Sat Jul  8 17:57:24 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Sat, 8 Jul 2006 17:57:24 -0400
Subject: [Twisted-Python] UDP question
In-Reply-To: <E1FzIX0-0006Gi-00@pyramid.twistedmatrix.com>
References: <E1FzIX0-0006Gi-00@pyramid.twistedmatrix.com>
Message-ID: <2389d4730607081457k4b5b6879p84f911616cfb18f9@mail.gmail.com>

On 7/8/06, Alec Matusis <matusis at matusis.com> wrote:
>
> I have a question about using UDP in twisted. I hope people will forgive
> my
> naivet?, since my background is in physics, not in CS, so I am self-taught
> and may be missing something obvious.
>
> I would like a server to send UDP broadcasts to multiple clients, where
> all
> clients receive the same broadcast.
>
> >From what I understood from
> http://twistedmatrix.com/projects/core/documentation/howto/udp.html
> Multicast UDP section, one can have a client broadcast the same UDP packet
> to multiple servers, each server listening on the same port for this
> multicast.
> This is unacceptable for me, since all of this must happen on the same
> machine, so I cannot bind multiple servers to the same port on one box. So
> I
> am trying to implement a reverse scenario, where the server will do the
> multicast to clients, but all clients and the server may (or may not) be
> running on the same box.


actually you can, you need to read up on how MULTICAST works.
It isn't the same thing as uni-cast UDP.
You can have as many processes listening on a single MULTICAST UDP port as
you like.

ZeroConf / Apple Bonjour ( formerly Rendezous ) usings multicast udp to do
just that.


How can I do this in twisted? Could you give me and example? Thanks.
>
>


-- 
If you don't know what you want, you probably need a nap.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060708/893c5ca2/attachment.htm 

From matusis at matusis.com  Sat Jul  8 18:54:43 2006
From: matusis at matusis.com (Alec Matusis)
Date: Sat, 8 Jul 2006 15:54:43 -0700
Subject: [Twisted-Python] UDP question
In-Reply-To: <2389d4730607081457k4b5b6879p84f911616cfb18f9@mail.gmail.com>
Message-ID: <E1FzLhL-0000NH-00@pyramid.twistedmatrix.com>

>You can have as many processes listening on a single MULTICAST UDP port as
you like. 

Well, I am trying to run this example multicast UDP server:
 
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer
 
class MulticastServerUDP(DatagramProtocol):
    def startProtocol(self):
        print 'Started Listening'
        # Join a specific multicast group
        self.transport.joinGroup('225.0.0.1')
 
    def datagramReceived(self, datagram, address):
            self.transport.write("data",address)

reactor.listenMulticast(8005, MulticastServerUDP())
reactor.run()
 
when I try running more that one instance of this on the same machine I get
 
twisted.internet.error.CannotListenError: Couldn't listen on any:8005: (98,
'Address already in use').
 
So my quiestion is how can I have multiple processes listening for multicast
on the same machine?

________________________________

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of jarrod
roberson
Sent: Saturday, July 08, 2006 2:57 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] UDP question




On 7/8/06, Alec Matusis <matusis at matusis.com> wrote: 

	I have a question about using UDP in twisted. I hope people will
forgive my
	naivet?, since my background is in physics, not in CS, so I am
self-taught
	and may be missing something obvious.
	
	I would like a server to send UDP broadcasts to multiple clients,
where all 
	clients receive the same broadcast.
	
	>From what I understood from
	http://twistedmatrix.com/projects/core/documentation/howto/udp.html
<http://twistedmatrix.com/projects/core/documentation/howto/udp.html> 
	Multicast UDP section, one can have a client broadcast the same UDP
packet
	to multiple servers, each server listening on the same port for this
	multicast.
	This is unacceptable for me, since all of this must happen on the
same 
	machine, so I cannot bind multiple servers to the same port on one
box. So I
	am trying to implement a reverse scenario, where the server will do
the
	multicast to clients, but all clients and the server may (or may
not) be 
	running on the same box.


actually you can, you need to read up on how MULTICAST works.
It isn't the same thing as uni-cast UDP.
You can have as many processes listening on a single MULTICAST UDP port as
you like. 

ZeroConf / Apple Bonjour ( formerly Rendezous ) usings multicast udp to do
just that.
 


	How can I do this in twisted? Could you give me and example? Thanks.
	
	




-- 
If you don't know what you want, you probably need a nap.





From jarrod at vertigrated.com  Sat Jul  8 20:25:12 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Sat, 8 Jul 2006 20:25:12 -0400
Subject: [Twisted-Python] UDP question
In-Reply-To: <44b037bc.132b9e32.4e1a.ffff8a05SMTPIN_ADDED@mx.gmail.com>
References: <2389d4730607081457k4b5b6879p84f911616cfb18f9@mail.gmail.com>
	<44b037bc.132b9e32.4e1a.ffff8a05SMTPIN_ADDED@mx.gmail.com>
Message-ID: <2389d4730607081725g15df912an87f948809f2d67dc@mail.gmail.com>

On 7/8/06, Alec Matusis <matusis at matusis.com> wrote:
>
> >You can have as many processes listening on a single MULTICAST UDP port
> as
> you like.
>
> Well, I am trying to run this example multicast UDP server:
>
> from twisted.internet.protocol import DatagramProtocol
> from twisted.internet import reactor
> from twisted.application.internet import MulticastServer
>
> class MulticastServerUDP(DatagramProtocol):
>     def startProtocol(self):
>         print 'Started Listening'
>         # Join a specific multicast group
>         self.transport.joinGroup('225.0.0.1')
>
>     def datagramReceived(self, datagram, address):
>             self.transport.write("data",address)
>
> reactor.listenMulticast(8005, MulticastServerUDP())
> reactor.run()
>
> when I try running more that one instance of this on the same machine I
> get
>
> twisted.internet.error.CannotListenError: Couldn't listen on any:8005:
> (98,
> 'Address already in use').
>
> So my quiestion is how can I have multiple processes listening for
> multicast
> on the same machine?
>
> ________________________________
>
> quick google for "udp twisted listen multiple" reveals



def startListening(self):
        reactor.listenMulticast(5353, self, maxPacketSize=1024,
                                listenMultiple=True)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060708/e482c624/attachment.htm 

From wgwigw at gmail.com  Sat Jul  8 22:24:23 2006
From: wgwigw at gmail.com (wang wei)
Date: Sun, 9 Jul 2006 10:24:23 +0800
Subject: [Twisted-Python] how can I Scheduling a command?
Message-ID: <dbeb95830607081924x5689543fu3df06f522125e97f@mail.gmail.com>

hi St?phane, Great! if it doesn't bother you, could I have a look? thanks.
                                         Wang Wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060709/bddd2095/attachment.htm 

From exarkun at twistedmatrix.com  Sun Jul  9 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 09 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1152421501.93.1729040184@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-02 through 2006-07-09
Bugs opened: 18    Bugs closed: 17  Total open bugs: 643 (+1)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +1  |Highest:  -4          |Conch:     +2          
|Enhancement:  -1  |High:     +1          |Core:      -1          
|Task:         +1  |Normal:   +2          |Mail:      +0          
                   |Low:      +2          |Pydoctor:  -1          
                                          |Trial:     -4          
                                          |Web:       +1          
                                          |Web2:      +2          
                                          |Website:   +2          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1891] twisted.mail.smtp.SMTP incorrectly announces itself as ESMTP (opened by exarkun) (CLOSED, fixed)
    defect          mail       http://twistedmatrix.com/trac/ticket/1891

[#1892] Python 2.5 uses "<module>" instead of "?" as the default filename for code objects (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1892

[#1897] Docstrings should not affect test display (opened by jml) (CLOSED, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1897

                    ===== High =====
[#1896] Put giant warnings about obsoleteness on obsolete webpages (opened by exarkun)
    task            website    http://twistedmatrix.com/trac/ticket/1896

[#1906] twisted.web2 tests don't work in cleantests-1883 (opened by jml)
    defect          web2       http://twistedmatrix.com/trac/ticket/1906

                    ===== Normal =====
[#1893] formatFailure cannot deal with exotic variable names (opened by mthuurne)
    defect          web        http://twistedmatrix.com/trac/ticket/1893

[#1894] Need to include web2 in setup.py (opened by edsuom) (CLOSED, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1894

[#1895] Add Native twisted.web2.xmlrpc Proxy Support (opened by oubiwann)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1895

[#1898] web2 installation failure on win32 (opened by ghazel) (CLOSED, invalid)
    defect          web2       http://twistedmatrix.com/trac/ticket/1898

[#1899] twisted still uses old-style classes (opened by wrstlprmpft) (CLOSED, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1899

[#1901] misdefined test method kills trial with an unhandled exception (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1901

[#1902] compatibility work-around for commercial SSH 2.0.12 misbehaviours (opened by matthubb)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/1902

[#1903] Twisted doesn't reset timeout when getting POST data (opened by moshez)
    defect          web        http://twistedmatrix.com/trac/ticket/1903

[#1904] Passive port ranges are not settable in t.p.ftp (opened by krp)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1904

[#1905] twisted.web.client.getPage deferred does not errback in the case of e.g. a 500 error code (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1905

[#1907] Terminal control problem? (opened by Nerdbeard)
    defect          conch      http://twistedmatrix.com/trac/ticket/1907

                    ===== Low =====
[#1890] move examples from core into correct sub-packages (opened by itamarst)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1890

[#1900] Error in documentation online (opened by packo)
    enhancement     website    http://twistedmatrix.com/trac/ticket/1900



Closed Bugs
______________________
                    ===== Highest =====
[#661 ] Remove t.e.xmlreflector before Twisted 2.5 (opened by davep, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/661

[#1891] twisted.mail.smtp.SMTP incorrectly announces itself as ESMTP (opened by exarkun, closed by exarkun, fixed)
    defect          mail       http://twistedmatrix.com/trac/ticket/1891

[#1371] Possible race condition in test_tcp (opened by jml, closed by jml, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1371

[#1892] Python 2.5 uses "<module>" instead of "?" as the default filename for code objects (opened by exarkun, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1892

[#1871] Instantiating twisted.trial.unittest.TestCase with no arguments raises nasty exception (opened by exarkun, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1871

[#1869] twisted.trial.unittest.TestCase.failUnlessFailure should provide more information (opened by exarkun, closed by jml, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1869

[#1897] Docstrings should not affect test display (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1897

                    ===== High =====
[#1887] Trial man page is extremely out of date (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1887

                    ===== Normal =====
[#1889] twisted.web.microdom should be moved to twisted.python.microdom (opened by jerub, closed by exarkun, invalid)
    enhancement     web        http://twistedmatrix.com/trac/ticket/1889

[#1631] Make tables showing listings of members of packages, classes, etc, sortable (opened by moof, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1631

[#103 ] $100 bounty - performance monitoring tool (opened by glyph, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/103

[#1894] Need to include web2 in setup.py (opened by edsuom, closed by exarkun, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1894

[#1787] Last line of trial's traceback output is often difficult to read (opened by jml, closed by jml, invalid)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1787

[#1803] unittest  using adbapi hang on exit (opened by thomasvs, closed by jml, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1803

[#1698] Version option for Trial (opened by jml, closed by jml, worksforme)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1698

[#1898] web2 installation failure on win32 (opened by ghazel, closed by jknight, invalid)
    defect          web2       http://twistedmatrix.com/trac/ticket/1898

[#1899] twisted still uses old-style classes (opened by wrstlprmpft, closed by jknight, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1899





From stephane_brault at yahoo.fr  Sun Jul  9 06:13:33 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Sun, 9 Jul 2006 10:13:33 +0000 (GMT)
Subject: [Twisted-Python] how can I Scheduling a command?
In-Reply-To: <dbeb95830607081924x5689543fu3df06f522125e97f@mail.gmail.com>
Message-ID: <20060709101333.40169.qmail@web26512.mail.ukl.yahoo.com>

Here is the code,
 you'll have Stephen's version in the scheduler folder and mine in the myversion folder.
 My version is essentially Stephen's one but without the interfaces and the cron task debugged. There's also a service example, inspired frome TimeService but able to run several tasks. It can be improved, especially by adding the capacity to add tasks while it's running. Don't hesitate to ask questions.
 
 St?phane

----- Message d'origine ----
De : wang wei <wgwigw at gmail.com>
? : twisted-python at twistedmatrix.com
Envoy? le : Dimanche, 9 Juillet 2006, 4h24mn 23s
Objet : Re : [Twisted-Python] how can I Scheduling a command?

hi St?phane, Great! if it doesn't bother you, could I have a look? thanks.
                                         Wang Wei

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060709/4d6ec54d/attachment.htm 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: scheduler.rar
Type: application/octet-stream
Size: 10977 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060709/4d6ec54d/attachment.obj 

From wgwigw at gmail.com  Mon Jul 10 03:10:23 2006
From: wgwigw at gmail.com (wang wei)
Date: Mon, 10 Jul 2006 15:10:23 +0800
Subject: [Twisted-Python] how can I Scheduling a command?
Message-ID: <dbeb95830607100010o56a38013t1793269d021d2f7a@mail.gmail.com>

hi St?phane, I read codes moring, and I think I catch the idea, if you
permit I will modify the code a little to fit in my program. thanks for
help.:)
                                                         Wang Wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060710/07c29620/attachment.htm 

From stephane_brault at yahoo.fr  Mon Jul 10 05:40:25 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 10 Jul 2006 09:40:25 +0000 (GMT)
Subject: [Twisted-Python] how can I Scheduling a command?
In-Reply-To: <dbeb95830607100010o56a38013t1793269d021d2f7a@mail.gmail.com>
Message-ID: <20060710094025.85599.qmail@web26512.mail.ukl.yahoo.com>

By all means, do whatever you see fit ;-)
 
 St?phane

----- Message d'origine ----
De : wang wei <wgwigw at gmail.com>
? : twisted-python at twistedmatrix.com
Envoy? le : Lundi, 10 Juillet 2006, 9h10mn 23s
Objet : Re : [Twisted-Python] how can I Scheduling a command?

hi St?phane, I read codes moring, and I think I catch the idea, if you permit I will modify the code a little to fit in my program. thanks for help.:)
                                                         Wang Wei
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060710/3330dc3a/attachment.htm 

From michele.petrazzo at unipex.it  Mon Jul 10 10:43:12 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Mon, 10 Jul 2006 16:43:12 +0200
Subject: [Twisted-Python] tcp error
Message-ID: <44B26780.3090602@unipex.it>

Sometime I receive a strange error:

   File "hylaproto_t.pyo", line 209, in _RetrStatus
   File "twisted\protocols\ftp.pyo", line 2190, in list
   File "twisted\protocols\ftp.pyo", line 2006, in receiveFromConnection
   File "twisted\protocols\ftp.pyo", line 2081, in _openDataConnection
   File "twisted\protocols\ftp.pyo", line 1838, in queueCommand
   File "twisted\protocols\ftp.pyo", line 1819, in sendNextCommand
   File "twisted\protocols\ftp.pyo", line 2128, in generatePortCommand
   File "twisted\internet\tcp.pyo", line 591, in getHost
AttributeError: 'Client' object has no attribute 'socket'


At line 209 in hylaproto_t, I have:
self._myClient.list('status', proto)

self._myClient are an FTPClient instance.

What can be the problem?

Thanks,
Michele



From aljosa.mohorovic at gmail.com  Mon Jul 10 11:02:54 2006
From: aljosa.mohorovic at gmail.com (Aljosa Mohorovic)
Date: Mon, 10 Jul 2006 17:02:54 +0200
Subject: [Twisted-Python] streaming video
Message-ID: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>

i'm looking for a way to stream video in python (streaming server for
video captured from camera), any tips/examples/docs for doing this
with twisted?
i'm asking because i have no experience with twisted and any help is
appreciated.

also, is it possible to use py2exe to create executable files. if
using py2exe is not a problem, what is recommended way of using py2exe
& twisted?

Aljosa Mohorovic



From jacob at internet24.de  Mon Jul 10 11:26:12 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Mon, 10 Jul 2006 17:26:12 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B26780.3090602@unipex.it>
References: <44B26780.3090602@unipex.it>
Message-ID: <1152545172.13526.39.camel@localhost.localdomain>

Your line numbers don't seem to match my plain twisted 2.4.0's...but the
problem seems to occur on either of the last two lines of
generatePortCommand
in twisted.protocols.ftp

        factory = FTPDataPortFactory()
        factory.protocol = portCmd.protocol
        listener = reactor.listenTCP(0, factory)
        factory.port = listener

        # Ensure we close the listening port if something goes wrong
        def listenerFail(error, listener=listener):
            if listener.connected:
                listener.loseConnection()
            return error
        portCmd.fail = listenerFail


        # Construct crufty FTP magic numbers that represent host &
port   
        host = self.transport.getHost().host <<<<
        port = listener.getHost().port      <<<<<


Maybe either your control connection is not opened correctly
(or already closed again), tcp.Port.socket only exists
when the Port is actually connected.... 

Or, maybe your client data port couldn't be opened
properly (possibly no more available ports?)....


On Mon, 2006-07-10 at 16:43 +0200, Michele Petrazzo wrote:
> Sometime I receive a strange error:
> 
>    File "hylaproto_t.pyo", line 209, in _RetrStatus
>    File "twisted\protocols\ftp.pyo", line 2190, in list
>    File "twisted\protocols\ftp.pyo", line 2006, in receiveFromConnection
>    File "twisted\protocols\ftp.pyo", line 2081, in _openDataConnection
>    File "twisted\protocols\ftp.pyo", line 1838, in queueCommand
>    File "twisted\protocols\ftp.pyo", line 1819, in sendNextCommand
>    File "twisted\protocols\ftp.pyo", line 2128, in generatePortCommand
>    File "twisted\internet\tcp.pyo", line 591, in getHost
> AttributeError: 'Client' object has no attribute 'socket'
> 
> 
> At line 209 in hylaproto_t, I have:
> self._myClient.list('status', proto)
> 
> self._myClient are an FTPClient instance.
> 
> What can be the problem?
> 
> Thanks,
> Michele
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060710/e81b0d27/attachment.pgp 

From fairwinds at eastlink.ca  Mon Jul 10 14:03:36 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Mon, 10 Jul 2006 15:03:36 -0300
Subject: [Twisted-Python] Starting services
In-Reply-To: <bff8eeef0601191516t52c8960cy451da7dd0fefa30c@mail.gmail.com>
References: <43CF8C95.4070008@pollenation.net>
	<bff8eeef0601191516t52c8960cy451da7dd0fefa30c@mail.gmail.com>
Message-ID: <44B29678.1010406@eastlink.ca>

Hi. I am coming back to resolve a service starting issue and wanted to 
bounce this around to see it this is feasible.

First I want all services contained in a multiservice however my main 
service must be fully initialized before starting the other services. It 
is a pb client and I want to ensure I have a server connection first 
before the other services from the first once it starts.

To do this I am thinking i can attempt start the main service first but 
run as a separate service (not a child of multiservice)

If this main first service starts successfully, I will add it to a 
multiservice with the other services, then start the multiservice.

First issue is that starting a service does not provide a deferred and I
need to know I have made a connection to the pb server. Second is 
whether I can add a running service to a multiservice instance. Can 
someone advise on the feasibility of this approach. Many thanks.

Regards,
David



From michele.petrazzo at unipex.it  Tue Jul 11 02:58:21 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Tue, 11 Jul 2006 08:58:21 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <1152545172.13526.39.camel@localhost.localdomain>
References: <44B26780.3090602@unipex.it>
	<1152545172.13526.39.camel@localhost.localdomain>
Message-ID: <44B34C0D.1090604@unipex.it>

Thomas Jacob wrote:
> Your line numbers don't seem to match my plain twisted 2.4.0's...

Ops, I was at 2.2 on my win machine, sorry.

> but the problem seems to occur on either of the last two lines of 
> generatePortCommand in twisted.protocols.ftp
> 

<-cut->

> 
> Maybe either your control connection is not opened correctly (or 
> already closed again), tcp.Port.socket only exists when the Port is 
> actually connected....
> 

Can be, I think, the connection closed by my code: into it, I close
connection ( self._myClient.quit() ) when I receive an error
(addErrback), but I have a "callLater" that are always running, so when
called, it run the code that can generate that error.
I think that I have to control the "internal connection state" before
make a call to the ftp client. I'm right? Or is there a method for say
to twisted to don't make calls (with the ftp protocol) when it aren't
connected?

P.s. Now I'm switching to twisted 2.4 :)

Thanks,
Michele



From jacob at internet24.de  Tue Jul 11 09:02:08 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Tue, 11 Jul 2006 15:02:08 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B34C0D.1090604@unipex.it>
References: <44B26780.3090602@unipex.it>
	<1152545172.13526.39.camel@localhost.localdomain>
	<44B34C0D.1090604@unipex.it>
Message-ID: <1152622928.13526.58.camel@localhost.localdomain>

> Can be, I think, the connection closed by my code: into it, I close
> connection ( self._myClient.quit() ) when I receive an error
> (addErrback), but I have a "callLater" that are always running, so when
> called, it run the code that can generate that error.
> I think that I have to control the "internal connection state" before
> make a call to the ftp client. I'm right? Or is there a method for say
> to twisted to don't make calls (with the ftp protocol) when it aren't
> connected?

Don't know, I am an (enthusiastic) twisted newbie as well, but
probably you should do the first thing. You could for instance
test whether or not <some tcp port>.connected is set, before
you call ftp client functions functions.... that
is check <ftpclient>.transport.connected...



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060711/a03fd327/attachment.pgp 

From exarkun at divmod.com  Tue Jul 11 09:22:34 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 11 Jul 2006 09:22:34 -0400
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B26780.3090602@unipex.it>
Message-ID: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>

On Mon, 10 Jul 2006 16:43:12 +0200, Michele Petrazzo <michele.petrazzo at unipex.it> wrote:
>Sometime I receive a strange error:
>
>   File "hylaproto_t.pyo", line 209, in _RetrStatus
>   File "twisted\protocols\ftp.pyo", line 2190, in list
>   File "twisted\protocols\ftp.pyo", line 2006, in receiveFromConnection
>   File "twisted\protocols\ftp.pyo", line 2081, in _openDataConnection
>   File "twisted\protocols\ftp.pyo", line 1838, in queueCommand
>   File "twisted\protocols\ftp.pyo", line 1819, in sendNextCommand
>   File "twisted\protocols\ftp.pyo", line 2128, in generatePortCommand
>   File "twisted\internet\tcp.pyo", line 591, in getHost
>AttributeError: 'Client' object has no attribute 'socket'
>
>
>At line 209 in hylaproto_t, I have:
>self._myClient.list('status', proto)
>
>self._myClient are an FTPClient instance.
>
>What can be the problem?

This is most likely a bug in FTPClient.  Could you file a ticket at
http://twistedmatrix.com/trac/ (you need to register an account before
the new ticket link will appear)?

By only looking at the traceback, it is not entirely clear where the
problem lies.  Please include a minimal self-contained example which
reproduces this traceback or a unit test which fails because of this
problem.

Jean-Paul



From anthony at interlink.com.au  Tue Jul 11 10:19:37 2006
From: anthony at interlink.com.au (Anthony Baxter)
Date: Wed, 12 Jul 2006 00:19:37 +1000
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <200607120019.39647.anthony@interlink.com.au>

On Tuesday 11 July 2006 01:02, Aljosa Mohorovic wrote:
> i'm looking for a way to stream video in python (streaming server
> for video captured from camera), any tips/examples/docs for doing
> this with twisted?
> i'm asking because i have no experience with twisted and any help
> is appreciated.

You could use something like RTSP and RTP. RTSP is a pretty easy 
protocol to implement, and there's an RTP implementation that's not 
too awful in the Shtoom codebase. I know of at least 2 other people 
that used the Shtoom RTP code to do this - I don't know if their code 
was ever open sourced.

Anthony
-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.



From itamar at itamarst.org  Tue Jul 11 11:31:08 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 11 Jul 2006 11:31:08 -0400
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <1152631869.5853.1.camel@localhost.localdomain>

On Mon, 2006-07-10 at 17:02 +0200, Aljosa Mohorovic wrote:
> i'm looking for a way to stream video in python (streaming server for
> video captured from camera), any tips/examples/docs for doing this
> with twisted?

http://www.flumotion.net/ is written with Twisted.




From thomas at apestaart.org  Tue Jul 11 11:40:51 2006
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Tue, 11 Jul 2006 17:40:51 +0200
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <1152632451.13106.37.camel@otto.amantes>

Hi,

On Mon, 2006-07-10 at 17:02 +0200, Aljosa Mohorovic wrote:
> i'm looking for a way to stream video in python (streaming server for
> video captured from camera), any tips/examples/docs for doing this
> with twisted?
> i'm asking because i have no experience with twisted and any help is
> appreciated.

Take a look at http://flumotion.net/ which is precisely a streaming
server written in python using Twisted.

Thomas





From michele.petrazzo at unipex.it  Tue Jul 11 13:45:16 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Tue, 11 Jul 2006 19:45:16 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>
References: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>
Message-ID: <44B3E3AC.8030002@unipex.it>

Jean-Paul Calderone wrote:
> This is most likely a bug in FTPClient.  Could you file a ticket at 
> http://twistedmatrix.com/trac/ (you need to register an account
> before the new ticket link will appear)?

Done, ticket 1914.

> 
> By only looking at the traceback, it is not entirely clear where the 
> problem lies.  Please include a minimal self-contained example which 
> reproduces this traceback or a unit test which fails because of this 
> problem.
> 

This is difficult to do, because it's a ftp client library that connect
fax client to an hylafax server (that act like an ftp server), so you
have to setup one for try... Of course, if you have one, I'll send you
all the needs for try.

> Jean-Paul
> 

Thanks,
Michele




From andrew-twisted at puzzling.org  Tue Jul 11 20:14:08 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 12 Jul 2006 10:14:08 +1000
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B3E3AC.8030002@unipex.it>
References: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>
	<44B3E3AC.8030002@unipex.it>
Message-ID: <20060712001408.GN482@steerpike.home.puzzling.org>

On Tue, Jul 11, 2006 at 07:45:16PM +0200, Michele Petrazzo wrote:
[...]
> >By only looking at the traceback, it is not entirely clear where the 
> >problem lies.  Please include a minimal self-contained example which 
> >reproduces this traceback or a unit test which fails because of this 
> >problem.
> >
> 
> This is difficult to do, because it's a ftp client library that connect
> fax client to an hylafax server (that act like an ftp server), so you
> have to setup one for try... Of course, if you have one, I'll send you
> all the needs for try.

FTP client tests don't necessary need a "real" FTP server to connect to -- and
any test that does is certainly not a "unit" test.  Often to test protocol logic
all you need is a transcript of a session from a real server that you can play
back to the client (not even necessarily over a real TCP connection).

See test_ftp.py in Twisted for some examples of tests that don't need a full
client and server on both ends to test behaviour.  (And some that do, as well)

-Andrew.




From mail at ortling.com  Wed Jul 12 04:43:00 2006
From: mail at ortling.com (mail at ortling.com)
Date: Wed, 12 Jul 2006 10:43:00 +0200
Subject: [Twisted-Python] wxreactor ShowModal problem
Message-ID: <3444102.392091152693780498.JavaMail.servlet@kundenserver>

Hi everyone,

I have a problem with a modal dialog blocking wxreactor. If ShowDialog () is called from within a deferred callback which has been started by reactor.callLater everything twisted comes to a halt and continues only after the modal dialog has been closed. The sample script below should demonstrate the problem. I'm using twisted 2.2 for python2.4.

Help! and thanks in advance
Simon

import sys, os
from twisted.internet import wxreactor
wxreactor.install ()
from twisted.internet import reactor, defer
import wx

class Frame (wx.Frame):
    def __init__ (self, parent, id, title):
        wx.Frame.__init__ (self, parent, id, title)

        btn_dlg = wx.Button (self, -1, "Press", size=(240, 180))
        btn_dlg.Bind (wx.EVT_BUTTON, self.click)

    def click (self, event):
        d = defer.Deferred ()
        self.prepare (d)

    def prepare (self, d):
        """
        uncomment reactor.callLater or d.callback to test
        """
        d.addCallback (self.show)
        reactor.callLater (1.0, d.callback, 1) # this will fail
        #d.callback (1) # this will work
        
    def show (self, val):
        for i in range (20):
            reactor.callLater (i*0.2, self.dosth, i) # these will be printed _after_ dialog has been closed
        dlg = wx.MessageDialog (self, "I am a dialog", "Dialog", style=wx.OK|wx.CANCEL)
        ruckgabe = dlg.ShowModal ()
        dlg.Destroy ()
        if ruckgabe == wx.ID_OK:
            print "okay"
        else:
            print "not okay"

    def dosth (self, idx):
        print "doing something nr", idx 

class App (wx.App):
    def OnInit (self):
        self.frame = Frame (None, -1, "Test")
        self.frame.Show (1)
        self.SetTopWindow (self.frame)
        return True

if __name__ == "__main__":
    app = App ()
    reactor.registerWxApp (app)
    reactor.run ()



From bob at redivi.com  Wed Jul 12 05:22:58 2006
From: bob at redivi.com (Bob Ippolito)
Date: Wed, 12 Jul 2006 02:22:58 -0700
Subject: [Twisted-Python] wxreactor ShowModal problem
In-Reply-To: <3444102.392091152693780498.JavaMail.servlet@kundenserver>
References: <3444102.392091152693780498.JavaMail.servlet@kundenserver>
Message-ID: <402627D9-A401-41DE-8D17-90E690AAF719@redivi.com>


On Jul 12, 2006, at 1:43 AM, mail at ortling.com wrote:

> I have a problem with a modal dialog blocking wxreactor. If  
> ShowDialog () is called from within a deferred callback which has  
> been started by reactor.callLater everything twisted comes to a  
> halt and continues only after the modal dialog has been closed. The  
> sample script below should demonstrate the problem. I'm using  
> twisted 2.2 for python2.4.

That's expected.

-bob




From mail at ortling.com  Wed Jul 12 08:04:08 2006
From: mail at ortling.com (mail at ortling.com)
Date: Wed, 12 Jul 2006 14:04:08 +0200
Subject: AW: Re: [Twisted-Python] wxreactor ShowModal problem
Message-ID: <27136945.453101152705848194.JavaMail.servlet@kundenserver>

Well thanks Bob!

btw. wx.FutureCall (ms, func, arg) instead or reactor.callLater works they way i was expecting it to work.

Simon

>
>On Jul 12, 2006, at 1:43 AM, mail at ortling.com wrote:
>
>> I have a problem with a modal dialog blocking wxreactor. If  
>> ShowDialog () is called from within a deferred callback which has  
>> been started by reactor.callLater everything twisted comes to a  
>> halt and continues only after the modal dialog has been closed. The  
>> sample script below should demonstrate the problem. I'm using  
>> twisted 2.2 for python2.4.
>
>That's expected.
>
>-bob
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From teratorn at twistedmatrix.com  Wed Jul 12 08:21:56 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Wed, 12 Jul 2006 22:21:56 +1000
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <op.tcksmub7y3d107@localhost.localdomain>

On Tue, 11 Jul 2006 01:02:54 +1000, Aljosa Mohorovic  
<aljosa.mohorovic at gmail.com> wrote:
[...]
> also, is it possible to use py2exe to create executable files. if
> using py2exe is not a problem, what is recommended way of using py2exe
> & twisted?
>
> Aljosa Mohorovic

That should really be a seperate mailing list post, by the way.

There isn't anything special about a Twisted/py2exe app, at least in my  
experience. If you have a .py file that runs the reactor you should be  
able to use py2exe on it without any problems.

If you want to use twistd to run your app then it's a little more  
complicated because normally you pass command-line arguments to twistd,  
but with py2exe you probably just want to double-click and have it work.  
There are various ways you could handle this, but I will wait for you to  
respond with more information before getting in to any details :)

Hope that helps,
-- 
Eric Mangold - Twisted/Win32 Maintainer
http://twistedmatrix.com/trac/wiki/Windows



From klueska at gmail.com  Thu Jul 13 08:49:57 2006
From: klueska at gmail.com (Kevin Klues)
Date: Thu, 13 Jul 2006 14:49:57 +0200
Subject: [Twisted-Python] SSH Forwading and Database Queries in same
	application
Message-ID: <8e4bf3a90607130549y7ca622fdhf6d34617901e9684@mail.gmail.com>

I am trying to use twisted.conch.ssh to write an application that first sets
up an ssh connection that forwards port 5432 from an external server to my
local machine and then locally connect to a database running on the server
using that port.  I am able to write two separate applications that
accomplish what I want, but I am unable to integrate them into one.  Using
the two application approach, I can first start the application that sets up
my port forwarding and then start the application that connects to my
database.  I can then make queries using the second application and
everything seems to work just fine.  When integrating them into one
application I am still able to connect to the database, but I cannot run any
queries over it.  The queries hang indefinitely, and neither my callback nor
my errback functions that should run after the query has completed ever get
called.  My setup for implementing this is as follows....

I have introduced a deferred when setting up my port forwarding that gets
its callback only once the startFactory() event gets called for my class
derived from forwarding.SSHListenForwardingFactory.  The forwarding is setup
using the following code snippet.....

reactor.listenTCP(PORT, DatabaseForwardingFactory(self.conn, (LOCALHOST,
PORT), DatabaseClientForwardingChannel))

where....

class DatabaseForwardingFactory(forwarding.SSHListenForwardingFactory):
class DatabaseClientForwardingChannel(
forwarding.SSHListenClientForwardingChannel):

Does anyone have any idea why this might not be working?  I tried deferring
my query to a thread to see if this would help matters, but to no avail.
Any help at all would be appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060713/ae735a4c/attachment.htm 

From donwsmith at gmail.com  Thu Jul 13 14:40:48 2006
From: donwsmith at gmail.com (Don Smith)
Date: Thu, 13 Jul 2006 11:40:48 -0700
Subject: [Twisted-Python] Reconnecting PB Client
Message-ID: <24f63c200607131140v2706f24s673c3ccdbcbf4b1e@mail.gmail.com>

Does anyone have some example code for building a reconnecting PB client?

This is what I have now:

from twisted.spread import pb
    from twisted.internet import reactor
    from twisted.python import util

    events = pb.PBClientFactory()
    reactor.connectTCP("localhost", 8789, events)
    queue = events.getRootObject()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060713/82f2f920/attachment.htm 

From thebadbob at gmail.com  Thu Jul 13 15:20:01 2006
From: thebadbob at gmail.com (Bad Bob)
Date: Thu, 13 Jul 2006 15:20:01 -0400
Subject: [Twisted-Python] Is twisted the right tool for this job?
Message-ID: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>

Hi all.

I'm writing a simple image archive program. The program is for indexing a
whole lot of pictures we sell on a CD. The focus of the product is on the
pictures, not the viewer, so it's pretty simple; it just shows the pictures,
sorted by category's, resizes them to whatever size the user wants (with
imagemagick), and searches though the collection.

Right now, the program is using a Twisted webserver in the backend. All the
pages are dynamic, based off one template file. The gui is a very simple
Venster (venster.sf.net) frontend, mainly consisting of a web browser
control, and some code to open a file-save dialog when the user clicks save
to save a picture.

I'm wondering if there is a better way to do this. Perhaps twisted is a bit
too much for all of this? Another problem is when Twisted opens up the
server port, firewalls start complaining. Perhaps there is a better way.
Also, if there is something better then venster for a front end, I'd be glad
to hear about that, too.

-Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060713/1d6eb0c5/attachment.htm 

From bob at redivi.com  Thu Jul 13 16:25:36 2006
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jul 2006 13:25:36 -0700
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
Message-ID: <90A666AF-938E-4DD4-9E62-2FF1E02D35FC@redivi.com>


On Jul 13, 2006, at 12:20 PM, Bad Bob wrote:

> I'm writing a simple image archive program. The program is for  
> indexing a whole lot of pictures we sell on a CD. The focus of the  
> product is on the pictures, not the viewer, so it's pretty simple;  
> it just shows the pictures, sorted by category's, resizes them to  
> whatever size the user wants (with imagemagick), and searches  
> though the collection.
>
> Right now, the program is using a Twisted webserver in the backend.  
> All the pages are dynamic, based off one template file. The gui is  
> a very simple Venster (venster.sf.net) frontend, mainly consisting  
> of a web browser control, and some code to open a file-save dialog  
> when the user clicks save to save a picture.
>
> I'm wondering if there is a better way to do this. Perhaps twisted  
> is a bit too much for all of this? Another problem is when Twisted  
> opens up the server port, firewalls start complaining. Perhaps  
> there is a better way. Also, if there is something better then  
> venster for a front end, I'd be glad to hear about that, too.

It may shut up the firewall apps if you specify interface='127.0.0.1'  
in your listenTCP call.

-bob


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060713/e27dd235/attachment.htm 

From fairwinds at eastlink.ca  Thu Jul 13 17:29:50 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Thu, 13 Jul 2006 18:29:50 -0300
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
Message-ID: <44B6BB4E.7020205@eastlink.ca>

You might want to consider wxPython for the gui also since it is fairly 
mature, stable and cross platform.

Regards,
David

Bad Bob wrote:
> Hi all.
> 
> I'm writing a simple image archive program. The program is for indexing 
> a whole lot of pictures we sell on a CD. The focus of the product is on 
> the pictures, not the viewer, so it's pretty simple; it just shows the 
> pictures, sorted by category's, resizes them to whatever size the user 
> wants (with imagemagick), and searches though the collection.
> 
> Right now, the program is using a Twisted webserver in the backend. All 
> the pages are dynamic, based off one template file. The gui is a very 
> simple Venster (venster.sf.net <http://venster.sf.net>) frontend, mainly 
> consisting of a web browser control, and some code to open a file-save 
> dialog when the user clicks save to save a picture.
> 
> I'm wondering if there is a better way to do this. Perhaps twisted is a 
> bit too much for all of this? Another problem is when Twisted opens up 
> the server port, firewalls start complaining. Perhaps there is a better 
> way. Also, if there is something better then venster for a front end, 
> I'd be glad to hear about that, too.
> 
> -Robert
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From arustad at gmail.com  Thu Jul 13 23:53:22 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Thu, 13 Jul 2006 21:53:22 -0600
Subject: [Twisted-Python] What is the best way to install Twisted on OS X
	10.4?
Message-ID: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>

I'm having a hard time running a TwistedWords example.
[OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of TwistedSumo]

I have installed (correctly I think) zopeinterfaces/core/words/web,
but when I invoke:

/usr/local/bin/python msn_example.py


I get the following error:

Traceback (most recent call last):
  File "msn_example.py", line 11, in ?
    from twisted.protocols import msn
  File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
line 6, in ?
    globals())
  File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
line 725, in moduleMovedForSplit
    raise ImportError("You need to have the Twisted %s "
ImportError: You need to have the Twisted Words package installed to
use twisted.protocols.msn. See
http://twistedmatrix.com/projects/words.



Your help is greatly appreciated [I'm a noob to Python and Twisted,
but I know bit about OS X].
Thanks!
Aaron.



From hsanches at gmail.com  Fri Jul 14 06:02:20 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 11:02:20 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
Message-ID: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>

Hi,

I am new to twisted and I am trying to implement a simple client that needs
to deal with several servers (windows platform).
I would like to send from the client asynchronous requests to all the
server, using TCP
I think that a solution would be to use a reactor per server connection in
the client, but that does not seems possible as the reactor is a singleton.

Could some one give me an idea of how i can deal with this?

Thank You


Miguel Sanches
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060714/c51d3b3f/attachment.htm 

From radix at twistedmatrix.com  Fri Jul 14 08:13:22 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 14 Jul 2006 08:13:22 -0400
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
Message-ID: <60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>

On 7/14/06, Herm?nio Miguel Sanches <hsanches at gmail.com> wrote:
> I am new to twisted and I am trying to implement a simple client that needs
> to deal with several servers (windows platform).
> I would like to send from the client asynchronous requests to all the
> server, using TCP
> I think that a solution would be to use a reactor per server connection in
> the client, but that does not seems possible as the reactor is a singleton.

No, you don't use multiple reactors, you use one reactor and simply
call connectTCP multiple times.

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From fairwinds at eastlink.ca  Fri Jul 14 09:07:27 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Fri, 14 Jul 2006 10:07:27 -0300
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
Message-ID: <44B7970F.7080606@eastlink.ca>

Hi. I would recommend creating a multiservice and adding each server 
connection as a service so you have control over starting and stopping 
the services independently. Look at the documentation for services.

Regards
David

Herm?nio Miguel Sanches wrote:
> Hi,
>  
> I am new to twisted and I am trying to implement a simple client that 
> needs to deal with several servers (windows platform).
> I would like to send from the client asynchronous requests to all the 
> server, using TCP
> I think that a solution would be to use a reactor per server connection 
> in the client, but that does not seems possible as the reactor is a 
> singleton.
>  
> Could some one give me an idea of how i can deal with this?
>  
> Thank You
>  
>  
> Miguel Sanches
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From hsanches at gmail.com  Fri Jul 14 09:49:29 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 14:49:29 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
Message-ID: <f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>

Many Thanks Christopher for the quick answer

I was missing the point with two basic errors:
1) trying to connect multiple times(n) using reactor.connectTCP()  with (n)
calls to reactor.run()
2) trying to instantiate only once the pb.PBClientFactory() for different
calls to reactor.connectTCP()

What I did was:
1) call only once reactor.run() after launching all the callbacks
2) instantiating pb.PBClientFactory() each time before a call to
reactor.connectTCP() (to change the server)

Please advise if I am doing something wrong.

Cheers

Miguel

On 7/14/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>
> On 7/14/06, Herm?nio Miguel Sanches <hsanches at gmail.com> wrote:
> > I am new to twisted and I am trying to implement a simple client that
> needs
> > to deal with several servers (windows platform).
> > I would like to send from the client asynchronous requests to all the
> > server, using TCP
> > I think that a solution would be to use a reactor per server connection
> in
> > the client, but that does not seems possible as the reactor is a
> singleton.
>
> No, you don't use multiple reactors, you use one reactor and simply
> call connectTCP multiple times.
>
> --
> Christopher Armstrong
> International Man of Twistery
> http://radix.twistedmatrix.com/
> http://twistedmatrix.com/
> http://canonical.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060714/5a61af90/attachment.htm 

From radix at twistedmatrix.com  Fri Jul 14 10:10:01 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 14 Jul 2006 10:10:01 -0400
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
	<f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>
Message-ID: <60ed19d40607140710g7dd0cb7dsb97cba7dee1391de@mail.gmail.com>

On 7/14/06, Herm?nio Miguel Sanches <hsanches at gmail.com> wrote:
> Many Thanks Christopher for the quick answer

No worries.

> What I did was:
> 1) call only once reactor.run() after launching all the callbacks
> 2) instantiating pb.PBClientFactory() each time before a call to
> reactor.connectTCP() (to change the server)
>
> Please advise if I am doing something wrong.

That looks right. Is everything working well?

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From hsanches at gmail.com  Fri Jul 14 10:14:58 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 15:14:58 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <44B7970F.7080606@eastlink.ca>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<44B7970F.7080606@eastlink.ca>
Message-ID: <f28267c0607140714k4787f00fpeb3a0fdbbb94b660@mail.gmail.com>

Many Thanks David
For now I am trying to put something very simple to work wich it seems to
do.
Later I will needed to use twisted.application.service.

Cheers

Miguel

On 7/14/06, David Pratt <fairwinds at eastlink.ca> wrote:
>
> Hi. I would recommend creating a multiservice and adding each server
> connection as a service so you have control over starting and stopping
> the services independently. Look at the documentation for services.
>
> Regards
> David
>
> Herm?nio Miguel Sanches wrote:
> > Hi,
> >
> > I am new to twisted and I am trying to implement a simple client that
> > needs to deal with several servers (windows platform).
> > I would like to send from the client asynchronous requests to all the
> > server, using TCP
> > I think that a solution would be to use a reactor per server connection
> > in the client, but that does not seems possible as the reactor is a
> > singleton.
> >
> > Could some one give me an idea of how i can deal with this?
> >
> > Thank You
> >
> >
> > Miguel Sanches
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060714/45ea4fc7/attachment.htm 

From arustad at gmail.com  Fri Jul 14 10:32:49 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Fri, 14 Jul 2006 08:32:49 -0600
Subject: [Twisted-Python] Re: What is the best way to install Twisted on OS
	X 10.4?
In-Reply-To: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
Message-ID: <6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>

Turns out there is a problem with the msn_example.py that is provided
under the documentation section of the Words project.

The import of msn is:

from twisted.protocols import msn

but should read:

from twisted.words.protocols import msn

AR.





On 7/13/06, Aaron Rustad <arustad at gmail.com> wrote:
> I'm having a hard time running a TwistedWords example.
> [OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of TwistedSumo]
>
> I have installed (correctly I think) zopeinterfaces/core/words/web,
> but when I invoke:
>
> /usr/local/bin/python msn_example.py
>
>
> I get the following error:
>
> Traceback (most recent call last):
>   File "msn_example.py", line 11, in ?
>     from twisted.protocols import msn
>   File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
> line 6, in ?
>     globals())
>   File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
> line 725, in moduleMovedForSplit
>     raise ImportError("You need to have the Twisted %s "
> ImportError: You need to have the Twisted Words package installed to
> use twisted.protocols.msn. See
> http://twistedmatrix.com/projects/words.
>
>
>
> Your help is greatly appreciated [I'm a noob to Python and Twisted,
> but I know bit about OS X].
> Thanks!
> Aaron.
>



From radix at twistedmatrix.com  Fri Jul 14 10:40:30 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 14 Jul 2006 10:40:30 -0400
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
	OS X 10.4?
In-Reply-To: <6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
Message-ID: <60ed19d40607140740m38cfc818u1769034dd62fd343@mail.gmail.com>

On 7/14/06, Aaron Rustad <arustad at gmail.com> wrote:
> Turns out there is a problem with the msn_example.py that is provided
> under the documentation section of the Words project.
>
> The import of msn is:
>
> from twisted.protocols import msn
>
> but should read:
>
> from twisted.words.protocols import msn

Strange that this would solve your problem, as twisted.protocol.msn is
just a compatibility wrapper around twisted.words.protocols.msn. The
error you got was to indicate that you actually didn't have words
installed so it couldn't  find twisted.words.protocols.msn.

Did you use the toplevel setup.py file from the Twisted-2.4.0.tar.bz2?

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/



From hsanches at gmail.com  Fri Jul 14 11:03:00 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 16:03:00 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <60ed19d40607140710g7dd0cb7dsb97cba7dee1391de@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
	<f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>
	<60ed19d40607140710g7dd0cb7dsb97cba7dee1391de@mail.gmail.com>
Message-ID: <f28267c0607140803g67fab68bsc7bb4448994610f3@mail.gmail.com>

Yes everything seems working fine but I am still at the beginning and I will
continue my digging phase and with the fast replies that I've just received,
leaves me with no big worries trying to use twisted.

Thanks

Miguel


On 7/14/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>
> On 7/14/06, Herm?nio Miguel Sanches <hsanches at gmail.com> wrote:
> > Many Thanks Christopher for the quick answer
>
> No worries.
>
> > What I did was:
> > 1) call only once reactor.run() after launching all the callbacks
> > 2) instantiating pb.PBClientFactory() each time before a call to
> > reactor.connectTCP() (to change the server)
> >
> > Please advise if I am doing something wrong.
>
> That looks right. Is everything working well?
>
> --
> Christopher Armstrong
> International Man of Twistery
> http://radix.twistedmatrix.com/
> http://twistedmatrix.com/
> http://canonical.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060714/6d29c671/attachment.htm 

From dreid at dreid.org  Fri Jul 14 14:50:00 2006
From: dreid at dreid.org (David Reid)
Date: Fri, 14 Jul 2006 11:50:00 -0700
Subject: [Twisted-Python] What is the best way to install Twisted on OS
	X	10.4?
In-Reply-To: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
Message-ID: <44B7E758.4020901@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Aaron Rustad wrote:
> I'm having a hard time running a TwistedWords example.
> [OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of
> TwistedSumo]
> 
> I have installed (correctly I think) zopeinterfaces/core/words/web,
> but when I invoke:
> 
> /usr/local/bin/python msn_example.py
> 
> 
> I get the following error:
> 
> Traceback (most recent call last):
>  File "msn_example.py", line 11, in ?
>    from twisted.protocols import msn
>  File
> "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
> 
> line 6, in ?
>    globals())
>  File
> "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
> 
> line 725, in moduleMovedForSplit
>    raise ImportError("You need to have the Twisted %s "
> ImportError: You need to have the Twisted Words package installed to
> use twisted.protocols.msn. See
> http://twistedmatrix.com/projects/words.
> 
> 
> 
> Your help is greatly appreciated [I'm a noob to Python and Twisted,
> but I know bit about OS X].
> Thanks!
> Aaron.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

It may make your life generally easier to note that I've built a
meta-package that includes all of twisted and zope, and pycrypto, and
pyopenssl built for MacPython 2.4.  I don't know what you may have
messed up during the install (perhaps you used /usr/bin/python (which
should point to 2.3) for the install.)  But people seem pretty happy
with my packages.

http://dreid.org/twisted/Twisted-2.4.0_py2.4-KitchenSink.dmg

- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEt+dXrsrO6aeULcgRAgqcAJ9w05+bV7TG9crkxffiD0MvwReBqgCggQfw
OhsLTFz8QeOxyPOGeml7LbM=
=nvdi
-----END PGP SIGNATURE-----



From arustad at gmail.com  Fri Jul 14 15:15:20 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Fri, 14 Jul 2006 13:15:20 -0600
Subject: [Twisted-Python] What is the best way to install Twisted on OS X
	10.4?
In-Reply-To: <44B7E758.4020901@dreid.org>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<44B7E758.4020901@dreid.org>
Message-ID: <6b762a990607141215o3793715bk90bc456c059201d8@mail.gmail.com>

OK I shouldn't say that all my problems are solved on my Mac. I am
using Cygwin at work and I went through the same process of installing
Twisted, and Python (minus the MacPython of course), and I receieved
the same errors that I indicated earlier in this thread.

However, when I changed the import for msn on msn_example.py, it
worked. I'll make the change at home on my MBP and let everyone know
if it worked.

Thanks!
AR.

On 7/14/06, David Reid <dreid at dreid.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Aaron Rustad wrote:
> > I'm having a hard time running a TwistedWords example.
> > [OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of
> > TwistedSumo]
> >
> > I have installed (correctly I think) zopeinterfaces/core/words/web,
> > but when I invoke:
> >
> > /usr/local/bin/python msn_example.py
> >
> >
> > I get the following error:
> >
> > Traceback (most recent call last):
> >  File "msn_example.py", line 11, in ?
> >    from twisted.protocols import msn
> >  File
> > "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
> >
> > line 6, in ?
> >    globals())
> >  File
> > "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
> >
> > line 725, in moduleMovedForSplit
> >    raise ImportError("You need to have the Twisted %s "
> > ImportError: You need to have the Twisted Words package installed to
> > use twisted.protocols.msn. See
> > http://twistedmatrix.com/projects/words.
> >
> >
> >
> > Your help is greatly appreciated [I'm a noob to Python and Twisted,
> > but I know bit about OS X].
> > Thanks!
> > Aaron.
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> It may make your life generally easier to note that I've built a
> meta-package that includes all of twisted and zope, and pycrypto, and
> pyopenssl built for MacPython 2.4.  I don't know what you may have
> messed up during the install (perhaps you used /usr/bin/python (which
> should point to 2.3) for the install.)  But people seem pretty happy
> with my packages.
>
> http://dreid.org/twisted/Twisted-2.4.0_py2.4-KitchenSink.dmg
>
> - -David
>
> - --
> "Usually the protocol is this: I appoint someone for a task,
> which they are not qualified to do.  Then, they have to fight
> a bear if they don't want to do it." -- Glyph Lefkowitz
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.3 (Darwin)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFEt+dXrsrO6aeULcgRAgqcAJ9w05+bV7TG9crkxffiD0MvwReBqgCggQfw
> OhsLTFz8QeOxyPOGeml7LbM=
> =nvdi
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From andrew-twisted at puzzling.org  Sat Jul 15 01:40:20 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sat, 15 Jul 2006 15:40:20 +1000
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
	OS X 10.4?
In-Reply-To: <6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
Message-ID: <20060715054020.GF20869@steerpike.home.puzzling.org>

On Fri, Jul 14, 2006 at 08:32:49AM -0600, Aaron Rustad wrote:
> Turns out there is a problem with the msn_example.py that is provided
> under the documentation section of the Words project.
> 
> The import of msn is:
> 
> from twisted.protocols import msn
> 
> but should read:
> 
> from twisted.words.protocols import msn

While the example should be updated to use the non-deprecated import, there
seems to be a bug here.  The only difference between these two statements should
be that the first emits a warning.  They should both work (or not) equally well.

-Andrew.




From stephen at thorne.id.au  Sat Jul 15 10:24:09 2006
From: stephen at thorne.id.au (Stephen Thorne)
Date: Sun, 16 Jul 2006 00:24:09 +1000
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
In-Reply-To: <20060715054020.GF20869@steerpike.home.puzzling.org>
Message-ID: <20060715142409.29014.2105565733.divmod.quotient.38132@ohm>

On Sat, 15 Jul 2006 15:40:20 +1000, Andrew Bennetts <andrew-twisted at puzzling.org> wrote:
>On Fri, Jul 14, 2006 at 08:32:49AM -0600, Aaron Rustad wrote:
>> Turns out there is a problem with the msn_example.py that is provided
>> under the documentation section of the Words project.
>>
>> The import of msn is:
>>
>> from twisted.protocols import msn
>>
>> but should read:
>>
>> from twisted.words.protocols import msn
>
>While the example should be updated to use the non-deprecated import, there
>seems to be a bug here.  The only difference between these two statements should
>be that the first emits a warning.  They should both work (or not) equally well.

Fixed in trunk, see:

http://twistedmatrix.com/trac/ticket/1637
http://twistedmatrix.com/trac/changeset/17455

Regards,
Stephen Thorne.



From arustad at gmail.com  Sat Jul 15 10:26:26 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Sat, 15 Jul 2006 08:26:26 -0600
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
	OS X 10.4?
In-Reply-To: <20060715054020.GF20869@steerpike.home.puzzling.org>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
	<20060715054020.GF20869@steerpike.home.puzzling.org>
Message-ID: <6b762a990607150726q5a037cdfvee50df3b855053df@mail.gmail.com>

OK, I finally got back on to my MacBook, made the change to
msn_example.py, and it works.

So, it turns out is wasn't a OS X/python issue at all.

thanks everyone!
AR.

On 7/14/06, Andrew Bennetts <andrew-twisted at puzzling.org> wrote:
> On Fri, Jul 14, 2006 at 08:32:49AM -0600, Aaron Rustad wrote:
> > Turns out there is a problem with the msn_example.py that is provided
> > under the documentation section of the Words project.
> >
> > The import of msn is:
> >
> > from twisted.protocols import msn
> >
> > but should read:
> >
> > from twisted.words.protocols import msn
>
> While the example should be updated to use the non-deprecated import, there
> seems to be a bug here.  The only difference between these two statements should
> be that the first emits a warning.  They should both work (or not) equally well.
>
> -Andrew.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From exarkun at twistedmatrix.com  Sun Jul 16 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 16 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1153026301.65.1564501977@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-09 through 2006-07-16
Bugs opened: 21    Bugs closed: 6  Total open bugs: 657 (+15)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +8  |Highest:  +0          |Core:   +6             
|Enhancement:  +5  |High:     +0          |Ftp:    +1             
|Task:         +2  |Normal:  +13          |Mail:   +1             
                   |Low:      +2          |Names:  +1             
                   |Lowest:   +0          |Web:    +1             
                                          |Web2:   +4             
                                          |Words:  +1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1915] Value parsing bug in web2.channel.fastcgi (opened by jeremy)
    defect          web2       http://twistedmatrix.com/trac/ticket/1915

                    ===== High =====
[#1926] twisted.web2.scripts.websetroot (opened by dreid) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1926

[#1927] twisted.web2.script (opened by dreid) (CLOSED, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1927

                    ===== Normal =====
[#1908] SRVConnector keeps reconnecting on non-SRV responses (opened by ralphm)
    enhancement     names      http://twistedmatrix.com/trac/ticket/1908

[#1909] [PATCH] add content encoding support to xmlrpc (opened by pythonguy)
    enhancement     web        http://twistedmatrix.com/trac/ticket/1909

[#1910] delete deprecated crud from twisted.python.log (opened by radix)
    task            core       http://twistedmatrix.com/trac/ticket/1910

[#1911] remove usage and references to twisted.python.plugin (opened by radix)
    task            core       http://twistedmatrix.com/trac/ticket/1911

[#1913] twisted.web2.dav fails on copies & directory renaming (opened by krp) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1913

[#1914] FTPClient problem (opened by michele.petrazzo)
    defect          ftp        http://twistedmatrix.com/trac/ticket/1914

[#1916] Pyflakes errors in twisted.web2 need fixing (opened by jerub)
    defect          web2       http://twistedmatrix.com/trac/ticket/1916

[#1917] Typo in twisted.mail.mail.DomainWithDefaultDict (opened by therve)
    defect          mail       http://twistedmatrix.com/trac/ticket/1917

[#1918] Revive KQueue Reactor (opened by dialtone)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1918

[#1919] Watering the twisted.web2 docstring desert (opened by edsuom) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1919

[#1920] dav.resource.py: RedirectResponse takes a full href, not a uri (opened by karpet)
    defect          web2       http://twistedmatrix.com/trac/ticket/1920

[#1921] TestTwoProcessesPosix.tearDown has a gratuitous print statement (opened by spiv)
    defect          core       http://twistedmatrix.com/trac/ticket/1921

[#1922] make twistd pluggable, nerf mktap (opened by tjs)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1922

[#1923] XPath query doesn't always handle namespaces correctly (opened by lewisbaker)
    defect          words      http://twistedmatrix.com/trac/ticket/1923

[#1928] Refactor socket operations from tcp.py/udp.py into the reactor (opened by PenguinOfDoom)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1928

                    ===== Low =====
[#1924] 24 import *s in Twisted (opened by mwh)
    defect          core       http://twistedmatrix.com/trac/ticket/1924

[#1925] 238(!) local imports in Twisted (opened by mwh)
    defect          core       http://twistedmatrix.com/trac/ticket/1925

                    ===== Lowest =====
[#1912] provide logical separation of rendering for files and directories (opened by vincentk)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1912



Closed Bugs
______________________
                    ===== Highest =====
[#1741] threadCallQueue loop can grow list forever (opened by ghazel, closed by ghazel, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1741

                    ===== High =====
[#1926] twisted.web2.scripts.websetroot (opened by dreid, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1926

[#1927] twisted.web2.script (opened by dreid, closed by dreid, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1927

                    ===== Normal =====
[#1913] twisted.web2.dav fails on copies & directory renaming (opened by krp, closed by wsanchez, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1913

[#1919] Watering the twisted.web2 docstring desert (opened by edsuom, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1919

                    ===== Lowest =====
[#1880] deferreds should let you override the "Unhandled error in Deferred" behaviour (opened by ghazel, closed by ghazel, worksforme)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1880





From thebadbob at gmail.com  Sun Jul 16 11:17:40 2006
From: thebadbob at gmail.com (Bad Bob)
Date: Sun, 16 Jul 2006 11:17:40 -0400
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <44B6BB4E.7020205@eastlink.ca>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
	<44B6BB4E.7020205@eastlink.ca>
Message-ID: <dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>

While I understand the benefits of being cross platform, the company I work
for does not, nor do they care about it. If it works well on Windows,
they're happy. I actually wrote most of the program in linux, and worked on
the GUI in windows (emulated, of course).

Also, when I tried wx's html component, it seems to have a few problems. It
doesn't support CSS, it doesn't show the images, and it doesn't follow any
links (perhaps it wants the links to be http://.../page instead of /page?).
Is there a gui system that actually shows the html correctly in windows? (I
don't use windows much, so I'm not familer with this).

And Bob Ippolito; thanks for the tip.

-Robert

On 7/13/06, David Pratt <fairwinds at eastlink.ca> wrote:
>
> You might want to consider wxPython for the gui also since it is fairly
> mature, stable and cross platform.
>
> Regards,
> David
>
> Bad Bob wrote:
> > Hi all.
> >
> > I'm writing a simple image archive program. The program is for indexing
> > a whole lot of pictures we sell on a CD. The focus of the product is on
> > the pictures, not the viewer, so it's pretty simple; it just shows the
> > pictures, sorted by category's, resizes them to whatever size the user
> > wants (with imagemagick), and searches though the collection.
> >
> > Right now, the program is using a Twisted webserver in the backend. All
> > the pages are dynamic, based off one template file. The gui is a very
> > simple Venster (venster.sf.net <http://venster.sf.net>) frontend, mainly
> > consisting of a web browser control, and some code to open a file-save
> > dialog when the user clicks save to save a picture.
> >
> > I'm wondering if there is a better way to do this. Perhaps twisted is a
> > bit too much for all of this? Another problem is when Twisted opens up
> > the server port, firewalls start complaining. Perhaps there is a better
> > way. Also, if there is something better then venster for a front end,
> > I'd be glad to hear about that, too.
> >
> > -Robert
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060716/634cef9d/attachment.htm 

From fairwinds at eastlink.ca  Sun Jul 16 11:43:48 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Sun, 16 Jul 2006 12:43:48 -0300
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
	<44B6BB4E.7020205@eastlink.ca>
	<dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>
Message-ID: <44BA5EB4.7050904@eastlink.ca>

Hi Bob. Please follow this up on the wxPython list to get help with 
wxPython. An IEHtmlWindow should give you what you need if you are 
wanting to display HTML in Windows with CSS. There is a recently 
published book on wxPython and good documentation on the wiki and in the 
source of the wxPython demo . It is capable gui, however you will not 
get far unless you do some reading to better understand its capabilities.

Regards,
David

Bad Bob wrote:
> While I understand the benefits of being cross platform, the company I 
> work for does not, nor do they care about it. If it works well on 
> Windows, they're happy. I actually wrote most of the program in linux, 
> and worked on the GUI in windows (emulated, of course).
> 
> Also, when I tried wx's html component, it seems to have a few problems. 
> It doesn't support CSS, it doesn't show the images, and it doesn't 
> follow any links (perhaps it wants the links to be http://.../page 
> instead of /page?). Is there a gui system that actually shows the html 
> correctly in windows? (I don't use windows much, so I'm not familer with 
> this).
> 
> And Bob Ippolito; thanks for the tip.
> 
> -Robert
> 
> On 7/13/06, *David Pratt* <fairwinds at eastlink.ca 
> <mailto:fairwinds at eastlink.ca> > wrote:
> 
>     You might want to consider wxPython for the gui also since it is fairly
>     mature, stable and cross platform.
> 
>     Regards,
>     David
> 
>     Bad Bob wrote:
>      > Hi all.
>      >
>      > I'm writing a simple image archive program. The program is for
>     indexing
>      > a whole lot of pictures we sell on a CD. The focus of the product
>     is on
>      > the pictures, not the viewer, so it's pretty simple; it just
>     shows the
>      > pictures, sorted by category's, resizes them to whatever size the
>     user
>      > wants (with imagemagick), and searches though the collection.
>      >
>      > Right now, the program is using a Twisted webserver in the
>     backend. All
>      > the pages are dynamic, based off one template file. The gui is a very
>      > simple Venster ( venster.sf.net <http://venster.sf.net>
>     <http://venster.sf.net>) frontend, mainly
>      > consisting of a web browser control, and some code to open a
>     file-save
>      > dialog when the user clicks save to save a picture.
>      >
>      > I'm wondering if there is a better way to do this. Perhaps
>     twisted is a
>      > bit too much for all of this? Another problem is when Twisted
>     opens up
>      > the server port, firewalls start complaining. Perhaps there is a
>     better
>      > way. Also, if there is something better then venster for a front end,
>      > I'd be glad to hear about that, too.
>      >
>      > -Robert
>      >
>      >
>      >
>     ------------------------------------------------------------------------
> 
>      >
>      > _______________________________________________
>      > Twisted-Python mailing list
>      > Twisted-Python at twistedmatrix.com
>     <mailto:Twisted-Python at twistedmatrix.com>
>      > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
>     _______________________________________________
>     Twisted-Python mailing list
>     Twisted-Python at twistedmatrix.com
>     <mailto:Twisted-Python at twistedmatrix.com>
>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From bob at redivi.com  Sun Jul 16 13:03:34 2006
From: bob at redivi.com (Bob Ippolito)
Date: Sun, 16 Jul 2006 10:03:34 -0700
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <44BA5EB4.7050904@eastlink.ca>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
	<44B6BB4E.7020205@eastlink.ca>
	<dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>
	<44BA5EB4.7050904@eastlink.ca>
Message-ID: <4C7D11E0-4832-4A40-9740-B93B79128864@redivi.com>

It seems awfully stupid to use wxPython to draw up an IEHtmlWindow,  
where Venster would do a better job of the same thing in probably the  
same (or less) user code. Venster's only dependency is ctypes, so the  
combination is a few *megabytes* smaller than wxPython. That means  
the Venster based application would load *MUCH MUCH* faster (on the  
order of several seconds), since we're talking about a CD here.  
Neither wxPython nor Venster are cross-platform for embedding the IE  
ActiveX control.

-bob

On Jul 16, 2006, at 8:43 AM, David Pratt wrote:

> Hi Bob. Please follow this up on the wxPython list to get help with  
> wxPython. An IEHtmlWindow should give you what you need if you are  
> wanting to display HTML in Windows with CSS. There is a recently  
> published book on wxPython and good documentation on the wiki and  
> in the source of the wxPython demo . It is capable gui, however you  
> will not get far unless you do some reading to better understand  
> its capabilities.
>
> Regards,
> David
>
> Bad Bob wrote:
>> While I understand the benefits of being cross platform, the  
>> company I work for does not, nor do they care about it. If it  
>> works well on Windows, they're happy. I actually wrote most of the  
>> program in linux, and worked on the GUI in windows (emulated, of  
>> course).
>> Also, when I tried wx's html component, it seems to have a few  
>> problems. It doesn't support CSS, it doesn't show the images, and  
>> it doesn't follow any links (perhaps it wants the links to be  
>> http://.../page instead of /page?). Is there a gui system that  
>> actually shows the html correctly in windows? (I don't use windows  
>> much, so I'm not familer with this).
>> And Bob Ippolito; thanks for the tip.
>> -Robert
>> On 7/13/06, *David Pratt* <fairwinds at eastlink.ca  
>> <mailto:fairwinds at eastlink.ca> > wrote:
>>     You might want to consider wxPython for the gui also since it  
>> is fairly
>>     mature, stable and cross platform.
>>     Regards,
>>     David
>>     Bad Bob wrote:
>>      > Hi all.
>>      >
>>      > I'm writing a simple image archive program. The program is for
>>     indexing
>>      > a whole lot of pictures we sell on a CD. The focus of the  
>> product
>>     is on
>>      > the pictures, not the viewer, so it's pretty simple; it just
>>     shows the
>>      > pictures, sorted by category's, resizes them to whatever  
>> size the
>>     user
>>      > wants (with imagemagick), and searches though the collection.
>>      >
>>      > Right now, the program is using a Twisted webserver in the
>>     backend. All
>>      > the pages are dynamic, based off one template file. The gui  
>> is a very
>>      > simple Venster ( venster.sf.net <http://venster.sf.net>
>>     <http://venster.sf.net>) frontend, mainly
>>      > consisting of a web browser control, and some code to open a
>>     file-save
>>      > dialog when the user clicks save to save a picture.
>>      >
>>      > I'm wondering if there is a better way to do this. Perhaps
>>     twisted is a
>>      > bit too much for all of this? Another problem is when Twisted
>>     opens up
>>      > the server port, firewalls start complaining. Perhaps there  
>> is a
>>     better
>>      > way. Also, if there is something better then venster for a  
>> front end,
>>      > I'd be glad to hear about that, too.
>>      >
>>      > -Robert
>>      >
>>      >
>>      >
>>      
>> --------------------------------------------------------------------- 
>> ---
>>      >
>>      > _______________________________________________
>>      > Twisted-Python mailing list
>>      > Twisted-Python at twistedmatrix.com
>>     <mailto:Twisted-Python at twistedmatrix.com>
>>      > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted- 
>> python
>>     _______________________________________________
>>     Twisted-Python mailing list
>>     Twisted-Python at twistedmatrix.com
>>     <mailto:Twisted-Python at twistedmatrix.com>
>>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> --------------------------------------------------------------------- 
>> ---
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From manlio_perillo at libero.it  Sun Jul 16 14:18:07 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sun, 16 Jul 2006 16:18:07 -0200
Subject: [Twisted-Python] again on nested sequence
Message-ID: <44BA82DF.5020704@libero.it>

Hi.

I want to render a list of <select> controls, each with a list of options.

I have attached the "simple" solution.
Of cource it does (and can't) not work.

The problem is that I can't find a better solution.
Moreover, with this code I obtain a strange error, log file attached.



Thanks  Manlio Perillo
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: nestedsequence.py
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060716/6b85dde7/attachment.txt 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nestedsequence.xhtml
Type: application/xhtml+xml
Size: 866 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060716/6b85dde7/attachment.xhtml 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: log.log
Url: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060716/6b85dde7/attachment-0001.txt 

From factorf2 at yahoo.com  Sun Jul 16 14:36:21 2006
From: factorf2 at yahoo.com (Daniel Yount)
Date: Sun, 16 Jul 2006 11:36:21 -0700 (PDT)
Subject: [Twisted-Python] Need Example of DCC REC/SEND methods.
Message-ID: <20060716183621.84406.qmail@web56611.mail.re3.yahoo.com>

  I have worked with Twisted IRC module that does chat
and response, this works well.  However I was wanting
to use the module for DCC:SEND/REC. How to get the DCC
part of that module to get a file? Does anyone have an
example usage of the DccFileReceiveBasic or
DccFileReceive methods?
http://twistedmatrix.com/documents/current/api/twisted.words.protocols.irc.html

Daniel Yount
factorf2 at yahoo.com

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



From dialtone at divmod.com  Sun Jul 16 18:23:30 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Mon, 17 Jul 2006 00:23:30 +0200
Subject: [Twisted-Python] again on nested sequence
In-Reply-To: <44BA82DF.5020704@libero.it>
Message-ID: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>



On Sun, 16 Jul 2006 16:18:07 -0200, Manlio Perillo <manlio_perillo at libero.it> wrote:

This is off topic here... Twisted-web is the list. Anyway:

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:n="http://nevow.com/ns/nevow/0.1"
      lang="it" xml:lang="it">
  <head>
    <title>Nested sequence</title>
  </head>
  <body>
    <ul n:render="sequence" n:data="control_list">
        # Here you call data_control_list.
        # The result of data_control_list becomes the IContainer implementor
        # from now on inside this <ul> tag.
    
    
      <li n:pattern="item" n:render="control">
        # You call the render_control method on the IRenderer implementor which
        # is the Main instance this method fills 2 slots ctrl_label and ctrl_name.
        # every slot inside this <li> tag that has one of those 2 names will be
        # filled unless an inner tag fills one of those slots with a different
        # value
      
        <label><n:slot name="ctrl_label"/>

          <select n:render="sequence" n:data="option_list">
          # Here you call IContainer(ctx).child('option_list')
          # IContainer(ctx) is what was returned at the beginning with
          # data_control_list.
          # That result of that call is a list and the IContainer adapter 
          # for lists does position lookup.
          # __getitem__ for lists takes integers and since all the values
          # coming from the template are strings they have to be converted
          # to integers. The value coming is 'option_list' and this cannot
          # be converted to an integer. And thus the error.
          # The solution? Fairly simple, although it would have been better that,
          # after I explained how part of the rendering works, YOU tried to find
          # the solution, anyway I'll explain it :).
          #
          # There are 2 solutions (actually more but only 2 that keep using templates):
          # - Return a list of dictionaries from control_list
          # - Return a list of 3-tuples from control_list
          # To avoid changing the template too much let's just see how the
          # previous line should have been for the second option:
          # <select n:render="sequence" n:data="2">
          # That'it.
          # def data_control_list(self, ctx, data):
          #     return [('a', 'first', ('1', 'uno')), ('b', 'second', ('2', 'due'))]
          
          # Of course I hate this solution because it involes too much code...
          # you already wrote 3 methods where one would have been largerly enough.
          
            <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
            <option n:pattern="item" n:render="option">
              <n:attr name="label"><n:slot name="opt_label" /></n:attr>
              <n:attr name="value"><n:slot name="opt_value" /></n:attr>
            </option>
          </select>
        </label>
      </li>

    </ul>
  </body>
</html>


The best solution is the following (NOT TESTED, but should work):

class Main(rend.Page):
    docFactory = loaders.xmlfile('nested.xhtml')
    
    def data_control_list(self, ctx, data):
        return [{'ctrl_name': 'a',
                 'ctrl_label': 'first',
                 'option_list': {'opt_value': '1',
                                 'opt_label': 'uno'}
                },
                {'ctrl_name': 'b',
                 'ctrl_label': 'second',
                 'option_list': {'opt_value': '2',
                                 'opt_label': 'second'}
                }]


# nested.xhtml
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:n="http://nevow.com/ns/nevow/0.1"
      lang="it" xml:lang="it">
  <head>
    <title>Nested sequence</title>
  </head>
  <body>
    <ul n:render="sequence" n:data="control_list">
      <li n:pattern="item" n:render="mapping">
        <label><n:slot name="ctrl_label"/>
          <select>
            <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
            <nevow:invisible n:render="sequence" n:data="option_list">
            # Yes, I added the tag above because I'm unsure about the way
            # n:attr is dealt with when it is between the sequence render and
            # the patterns inside the sequence. This solution removes the
            # uncertainty. It's generally better to keep the slots filled
            # directly inside the interested renderer without crossing any other
            # special renderer tag like this template was doing.
                <option n:pattern="item" n:render="mapping">
                  <n:attr name="label"><n:slot name="opt_label" /></n:attr>
                  <n:attr name="value"><n:slot name="opt_value" /></n:attr>
                </option>
            </nevow:invisible>
          </select>
        </label>
      </li>
    </ul>
  </body>
</html>

As you can see this solution involves a considerably simpler and more generic
Page object that can be reused for a variety of usecases (especially when the
data_* method simply runs a query instead of returning an hardcoded result,
if the query returns a list of dictionaries already simply putting the query as
a Page parameter you'll be able to reuse the whole Page code except the query
and then simply change the templates as needed.



From lists at zopyx.com  Mon Jul 17 03:16:32 2006
From: lists at zopyx.com (Andreas Jung)
Date: Mon, 17 Jul 2006 09:16:32 +0200
Subject: [Twisted-Python] State of XMPP integration?
Message-ID: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>

Hi,

we are looking into XMPP/JEP-60 to be used with Zope. Since Zope can use 
Twisted on the server level I need to figure out what the current state of 
XMPP in Twisted is. I've also read about the Idavoll project (supporting
Jep-60 through Twisted). Anyone having some experience with XMPP in Twisted?

Thanks in advance,
Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060717/d0f34443/attachment.pgp 

From manlio_perillo at libero.it  Mon Jul 17 05:11:26 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 17 Jul 2006 07:11:26 -0200
Subject: [Twisted-Python] again on nested sequence
In-Reply-To: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>
References: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>
Message-ID: <44BB543E.90105@libero.it>

Valentino Volonghi aka Dialtone ha scritto:
> 
> 
> On Sun, 16 Jul 2006 16:18:07 -0200, Manlio Perillo
> <manlio_perillo at libero.it> wrote:
> 
> This is off topic here... Twisted-web is the list. 

Sorry and thanks for the response.

> [...]

>   <li n:pattern="item" n:render="control">
>   # You call the render_control method on the IRenderer implementor which
>   # is the Main instance this method fills 2 slots ctrl_label and ctrl_name.
>   # every slot inside this <li> tag that has one of those 2 names will be
>   # filled unless an inner tag fills one of those slots with a different


Thanks!
Nested slots "was" another of "obscure" points about nevow rendering
machinery.

However, I still want to do more tests on this.



>        # value
>             <label><n:slot name="ctrl_label"/>
> 
>          <select n:render="sequence" n:data="option_list">
>          # Here you call IContainer(ctx).child('option_list')
>          # IContainer(ctx) is what was returned at the beginning with
>          # data_control_list.
>          # That result of that call is a list and the IContainer adapter
>          # for lists does position lookup.
>          # __getitem__ for lists takes integers and since all the values
>          # coming from the template are strings they have to be converted
>          # to integers. The value coming is 'option_list' and this cannot
>          # be converted to an integer. And thus the error.
>          # The solution? Fairly simple, although it would have been
> better that,
>          # after I explained how part of the rendering works, YOU tried
> to find
>          # the solution, anyway I'll explain it :).

Ok.
Yesterday I read some old messages in the archive, so now I (hopefully)
understand better how data directives works.

Anyway thanks for your solutions, it is much simpler
(I have to modify how the query are done, dicts insteads of list).

> [...]
> 
> 
> The best solution is the following (NOT TESTED, but should work):
> 
> class Main(rend.Page):
>    docFactory = loaders.xmlfile('nested.xhtml')
>       def data_control_list(self, ctx, data):
>        return [{'ctrl_name': 'a',
>                 'ctrl_label': 'first',
>                 'option_list': {'opt_value': '1',
>                                 'opt_label': 'uno'}
>                },
>                {'ctrl_name': 'b',
>                 'ctrl_label': 'second',
>                 'option_list': {'opt_value': '2',
>                                 'opt_label': 'second'}
>                }]
> 
> 

Actually option_list is a list of dicts:

    def data_control_list(self, ctx, data):
        option_list = [
            {'opt_value': '1',
             'opt_label': 'uno'
             },
            {'opt_value': '2',
             'opt_label': 'due'
             }
            ]

        return [{'ctrl_name': 'a',
                 'ctrl_label': 'first',
                 'option_list': option_list
                 },
                {'ctrl_name': 'b',
                 'ctrl_label': 'second',
                 'option_list': option_list
                 }]


> [...]
>          <select>
>            <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
>            <nevow:invisible n:render="sequence" n:data="option_list">
>            # Yes, I added the tag above because I'm unsure about the way
>            # n:attr is dealt with when it is between the sequence render
> and
>            # the patterns inside the sequence. This solution removes the
>            # uncertainty. It's generally better to keep the slots filled
>            # directly inside the interested renderer without crossing
> any other
>            # special renderer tag like this template was doing.

I have tried without nevow:invisible and it seems to work.

>                <option n:pattern="item" n:render="mapping">
>                  <n:attr name="label"><n:slot name="opt_label" /></n:attr>
>                  <n:attr name="value"><n:slot name="opt_value" /></n:attr>
>                </option>
>            </nevow:invisible>
>          </select>
>        </label>
>      </li>
>    </ul>
>  </body>
> </html>
> 


Thanks and regards  Manlio Perillo



From twisted at ralphm.ik.nu  Mon Jul 17 05:19:26 2006
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Mon, 17 Jul 2006 11:19:26 +0200
Subject: [Twisted-Python] State of XMPP integration?
In-Reply-To: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>
References: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>
Message-ID: <20060717091926.GA18344@ik.nu>

On Mon, Jul 17, 2006 at 09:16:32AM +0200, Andreas Jung wrote:
> Hi,
> 
> we are looking into XMPP/JEP-60 to be used with Zope. Since Zope can use 
> Twisted on the server level I need to figure out what the current state of 
> XMPP in Twisted is. I've also read about the Idavoll project (supporting
> Jep-60 through Twisted). Anyone having some experience with XMPP in Twisted?

I'm the maintainer of the Jabber bits in Twisted, developer of Idavoll
and JEP-0060 co-author. What is that you want to know?

Cross-posting to twisted-jabber at ik.nu, might be good to continue over
there.

-- 
Groetjes,

ralphm



From manlio_perillo at libero.it  Mon Jul 17 05:40:28 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 17 Jul 2006 07:40:28 -0200
Subject: [Twisted-Python] again on nested sequence
In-Reply-To: <44BB543E.90105@libero.it>
References: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>
	<44BB543E.90105@libero.it>
Message-ID: <44BB5B0C.2000608@libero.it>

Manlio Perillo ha scritto:
> Valentino Volonghi aka Dialtone ha scritto:
>>
>> On Sun, 16 Jul 2006 16:18:07 -0200, Manlio Perillo
>> <manlio_perillo at libero.it> wrote:
>>
>> This is off topic here... Twisted-web is the list. 

I have Cc to twisted-web, hoping this will help the archiving.

> 

Just for future reference, here is an alternate solution.
It contains more code, but it is more database friendly
(and I like this - better performance too?).

It also contains some correction for the HTML code.

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:n="http://nevow.com/ns/nevow/0.1"
      lang="it" xml:lang="it">
  <head>
    <title>Nested sequence II</title>
  </head>
  <body>
    <form action="post" method="post">
      <ul n:render="sequence" n:data="control_list">
        <li n:pattern="item" n:render="control">
          <label><n:slot name="ctrl_label"/>
            <select n:render="option_list">
              <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
              <option n:pattern="item" n:render="option">
                  <n:attr name="value"><n:slot name="opt_value" /></n:attr>
                  <n:slot name="opt_label" />
                </option>
            </select>
          </label>
        </li>
      </ul>
      <input type="submit" value="send" />
    </form>
  </body>
</html>


class Main(rend.Page):
    addSlash = True
    docFactory = loaders.xmlfile('nestedsequence.xhtml')

    def data_control_list(self, ctx, data):
        return [('a', 'first'),  ('b', 'second')]

    def render_option_list(self, ctx, data):
        option_list = [('1', 'uno'), ('2', 'due')]
        tag = ctx.tag

        pattern = inevow.IQ(ctx).patternGenerator("item")
        content = [pattern(data=option) for option in option_list]

        return ctx.tag.clear()[content]

    def render_control(self, ctx, data):
        print '*', data
        ctx.fillSlots('ctrl_label', data[1])
        ctx.fillSlots('ctrl_name', data[0])

        return ctx.tag

    def render_option(self, ctx, data):
        ctx.fillSlots('opt_label', data[1])
        ctx.fillSlots('opt_value', data[0])

        return ctx


Maybe it is not reusable as the previous solution, but it's not a problem.



Regards  Manlio Perillo



From l.allegrucci at gmail.com  Mon Jul 17 06:22:58 2006
From: l.allegrucci at gmail.com (Lorenzo Allegrucci)
Date: Mon, 17 Jul 2006 12:22:58 +0200
Subject: [Twisted-Python] twistd and passphrase
Message-ID: <1153131778.4914.30.camel@odyssey.lan>


Hi, I'm using twistd to run my server as a daemon (by "twistd -y
app.py").
Below is a sample of my code:

----app.py----
class MyService(internet.SSLServer):
    ...

application = service.Application("MyApp")
myService = MyService()
myService.setServiceParent(application)
----app.py----

Now, app.py needs a passphrase to read its SSL key and I wish to prompt
the user to enter such passphrase. I tried getpass() but it doesn't work
because /dev/stdin is already redirected to /dev/null.
How can I ask for a passphrase using twistd?
Thanks





From lists at zopyx.com  Mon Jul 17 06:58:49 2006
From: lists at zopyx.com (Andreas Jung)
Date: Mon, 17 Jul 2006 12:58:49 +0200
Subject: [Twisted-Python] State of XMPP integration?
In-Reply-To: <20060717091926.GA18344@ik.nu>
References: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>
	<20060717091926.GA18344@ik.nu>
Message-ID: <D4C849BE0DCE0EEBB0A22863@[192.168.0.28]>



--On 17. Juli 2006 11:19:26 +0200 Ralph Meijer <twisted at ralphm.ik.nu> wrote:

> On Mon, Jul 17, 2006 at 09:16:32AM +0200, Andreas Jung wrote:
>> Hi,
>>
>> we are looking into XMPP/JEP-60 to be used with Zope. Since Zope can use
>> Twisted on the server level I need to figure out what the current state
>> of  XMPP in Twisted is. I've also read about the Idavoll project
>> (supporting Jep-60 through Twisted). Anyone having some experience with
>> XMPP in Twisted?
>
> I'm the maintainer of the Jabber bits in Twisted, developer of Idavoll
> and JEP-0060 co-author. What is that you want to know?
>
> Cross-posting to twisted-jabber at ik.nu, might be good to continue over
> there.

Our use case is the following. With have heterogeneous apps (Windows based, 
Python based) that need to talk to each other. A Python/Zope app might 
provide an address book service that is used by some Windows application. 
The idea is to use XMPP as communication bus. The apps would register with 
a XMPP server and communicate through XMPP. Since almost all services are 
implemented on the Zope side it would make sense to integrate the XMPP
into Zope. The newest version of Zope can integrate Twisted as server 
(replacing ZServer). So the basic question (before performing implemenation
or deeper evaluation work) is: how  usable is the XMPP stuff in Twisted to 
be used as server component. I know that most Python XMPP solutions are 
client-side solutions and there is almost no stable XMPP server solution 
available for Zope. Is Twised(Words) the right road in this case?

Thanks,
Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060717/ff0c0a00/attachment.pgp 

From duncan.mcgreggor at gmail.com  Mon Jul 17 07:14:18 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Mon, 17 Jul 2006 05:14:18 -0600
Subject: [Twisted-Python] State of XMPP integration?
In-Reply-To: <D4C849BE0DCE0EEBB0A22863@[192.168.0.28]>
References: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>	<20060717091926.GA18344@ik.nu>
	<D4C849BE0DCE0EEBB0A22863@[192.168.0.28]>
Message-ID: <44BB710A.4090107@gmail.com>

Andreas Jung wrote:

> --On 17. Juli 2006 11:19:26 +0200 Ralph Meijer <twisted at ralphm.ik.nu>
>
> So the basic question (before performing implemenation
> or deeper evaluation work) is: how  usable is the XMPP stuff in Twisted
> to be used as server component. I know that most Python XMPP solutions
> are client-side solutions and there is almost no stable XMPP server
> solution available for Zope. Is Twised(Words) the right road in this case?

Hey Andreas,

There's a pretty good example here:

  http://onlinegamegroup.com/projects/palaver/

It looks like they've put together much of the code you'd need. I
haven't actually used their product yet, so I can't speak for it's
strengths/weaknesses.

d



From donwsmith at gmail.com  Mon Jul 17 16:26:29 2006
From: donwsmith at gmail.com (Don Smith)
Date: Mon, 17 Jul 2006 13:26:29 -0700
Subject: [Twisted-Python] PB error
Message-ID: <24f63c200607171326y153541cfl480e364f02af5d33@mail.gmail.com>

I have a PB server, and one of my clients keeps getting this error:

Traceback (most recent call last):
  File "C:\Python24\Lib\site-packages\twisted\python\log.py", line 53, in
callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "C:\Python24\Lib\site-packages\twisted\python\log.py", line 38, in
callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "C:\Python24\Lib\site-packages\twisted\python\context.py", line 59,
in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "C:\Python24\Lib\site-packages\twisted\python\context.py", line 37,
in callWithContext
    return func(*args,**kw)
--- <exception caught here> ---
  File "C:\Python24\Lib\site-packages\twisted\internet\selectreactor.py",
line 139, in _doReadOrWrite
    why = getattr(selectable, method)()
  File "C:\Python24\Lib\site-packages\twisted\internet\tcp.py", line 348, in
doRead
    return self.protocol.dataReceived(data)
  File "C:\Python24\Lib\site-packages\twisted\spread\banana.py", line 184,
in dataReceived
    gotItem(item)
  File "C:\Python24\Lib\site-packages\twisted\spread\banana.py", line 114,
in gotItem
    self.callExpressionReceived(item)
  File "C:\Python24\Lib\site-packages\twisted\spread\banana.py", line 81, in
callExpressionReceived
    self.expressionReceived(obj)
  File "C:\Python24\Lib\site-packages\twisted\spread\pb.py", line 559, in
expressionReceived
    method(*sexp[1:])
  File "C:\Python24\Lib\site-packages\twisted\spread\pb.py", line 926, in
proto_answer
    d = self.waitingForAnswers[requestID]
exceptions.KeyError: 113
connection lost, reason <twisted.python.failure.Failure exceptions.KeyError>

Note that the server and client are on the same machine. The client is
reading log files and sending certain lines to the PB server. This is fairly
high volume, and when it seems to peak this happens.

I'm also using a ReconnectingPBClientFactory, but it doesn't reconnect when
this error occures.

Any ideas out there?

Thanks,

Don
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060717/2661d41f/attachment.htm 

From mwm-keyword-twisted.c54178 at mired.org  Tue Jul 18 10:12:10 2006
From: mwm-keyword-twisted.c54178 at mired.org (Mike Meyer)
Date: Tue, 18 Jul 2006 10:12:10 -0400
Subject: [Twisted-Python] Distributing calls over a time period
Message-ID: <17596.60474.751052.630255@bhuda.mired.org>

I'm writing a capacity test tool for a client's web server. The idea
is to measure count how many requests exceed the spec'ed response time
under various loads, where load is specified as "M requests in N
secs". So I need to generate those M requests spaced relatively evenly
over N seconds, record the start time, and get a reasonably accurate
idea of when each requests ends.

I'm assuming that twisted callbacks will take care of the latter, and
don't have any reason to dobut that. However, the former has turned
out to be harder than I expected. I need to start the requests with
the reactor running so that previous requests will be handled
properly. The obvious solution - task.LoopingCall - isn't precise
enough, taking up to 33% more time than I'd alloted. The second
attempt - a loop using reactor.callLater with a delay based on the
requests and time left. That does slightly better, but only slightly.

Is there some other method that I might use for this? Or is twisted
the wrong tool entirely.

	Thanx,
	<mike
-- 
Mike Meyer <mwm at mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.



From exarkun at divmod.com  Tue Jul 18 10:31:22 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 18 Jul 2006 10:31:22 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <17596.60474.751052.630255@bhuda.mired.org>
Message-ID: <20060718143122.29014.825269123.divmod.quotient.42739@ohm>

On Tue, 18 Jul 2006 10:12:10 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
>I'm writing a capacity test tool for a client's web server. The idea
>is to measure count how many requests exceed the spec'ed response time
>under various loads, where load is specified as "M requests in N
>secs". So I need to generate those M requests spaced relatively evenly
>over N seconds, record the start time, and get a reasonably accurate
>idea of when each requests ends.
>
>I'm assuming that twisted callbacks will take care of the latter, and
>don't have any reason to dobut that. However, the former has turned
>out to be harder than I expected. I need to start the requests with
>the reactor running so that previous requests will be handled
>properly. The obvious solution - task.LoopingCall - isn't precise
>enough, taking up to 33% more time than I'd alloted. The second
>attempt - a loop using reactor.callLater with a delay based on the
>requests and time left. That does slightly better, but only slightly.
>
>Is there some other method that I might use for this? Or is twisted
>the wrong tool entirely.

What platform are you running on?  On any recent Linux system,
LoopingCall should be more than precise enough for this.

Can you be more specific about what you mean by "taking up to 33%
more time"?

What kind of time units are we talking about here?

Jean-Paul



From mwm-keyword-twisted.c54178 at mired.org  Tue Jul 18 10:50:11 2006
From: mwm-keyword-twisted.c54178 at mired.org (Mike Meyer)
Date: Tue, 18 Jul 2006 10:50:11 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <20060718143122.29014.825269123.divmod.quotient.42739@ohm>
References: <17596.60474.751052.630255@bhuda.mired.org>
	<20060718143122.29014.825269123.divmod.quotient.42739@ohm>
Message-ID: <17596.62755.395304.9448@bhuda.mired.org>

In <20060718143122.29014.825269123.divmod.quotient.42739 at ohm>, Jean-Paul Calderone <exarkun at divmod.com> typed:
> On Tue, 18 Jul 2006 10:12:10 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
> >I'm writing a capacity test tool for a client's web server. The idea
> >is to measure count how many requests exceed the spec'ed response time
> >under various loads, where load is specified as "M requests in N
> >secs". So I need to generate those M requests spaced relatively evenly
> >over N seconds, record the start time, and get a reasonably accurate
> >idea of when each requests ends.
> >
> >I'm assuming that twisted callbacks will take care of the latter, and
> >don't have any reason to doubt that. However, the former has turned
> >out to be harder than I expected. I need to start the requests with
> >the reactor running so that previous requests will be handled
> >properly. The obvious solution - task.LoopingCall - isn't precise
> >enough, taking up to 33% more time than I'd alloted. The second
> >attempt - a loop using reactor.callLater with a delay based on the
> >requests and time left. That does slightly better, but only slightly.
> >
> >Is there some other method that I might use for this? Or is twisted
> >the wrong tool entirely.
> 
> What platform are you running on?  On any recent Linux system,
> LoopingCall should be more than precise enough for this.

Development is being done on OSX. The final deployment platform is Red
Hat Egenera, but I'm still waiting on that to materialize.

> Can you be more specific about what you mean by "taking up to 33%
> more time"?

When I set things up to run in 60 seconds, it takes anywhere from 61
to 80 seconds.

> What kind of time units are we talking about here?

10s of seconds, with request counts such that we're getting 10s of
requests a second.

	Thanks,
	<mike
-- 
Mike Meyer <mwm at mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.



From exarkun at divmod.com  Tue Jul 18 11:13:10 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 18 Jul 2006 11:13:10 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <17596.62755.395304.9448@bhuda.mired.org>
Message-ID: <20060718151310.29014.659879015.divmod.quotient.42787@ohm>

On Tue, 18 Jul 2006 10:50:11 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
>In <20060718143122.29014.825269123.divmod.quotient.42739 at ohm>, Jean-Paul Calderone <exarkun at divmod.com> typed:
>> On Tue, 18 Jul 2006 10:12:10 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
>> >I'm writing a capacity test tool for a client's web server. The idea
>> >is to measure count how many requests exceed the spec'ed response time
>> >under various loads, where load is specified as "M requests in N
>> >secs". So I need to generate those M requests spaced relatively evenly
>> >over N seconds, record the start time, and get a reasonably accurate
>> >idea of when each requests ends.
>> >
>> >I'm assuming that twisted callbacks will take care of the latter, and
>> >don't have any reason to doubt that. However, the former has turned
>> >out to be harder than I expected. I need to start the requests with
>> >the reactor running so that previous requests will be handled
>> >properly. The obvious solution - task.LoopingCall - isn't precise
>> >enough, taking up to 33% more time than I'd alloted. The second
>> >attempt - a loop using reactor.callLater with a delay based on the
>> >requests and time left. That does slightly better, but only slightly.
>> >
>> >Is there some other method that I might use for this? Or is twisted
>> >the wrong tool entirely.
>>
>> What platform are you running on?  On any recent Linux system,
>> LoopingCall should be more than precise enough for this.
>
>Development is being done on OSX. The final deployment platform is Red
>Hat Egenera, but I'm still waiting on that to materialize.
>
>> Can you be more specific about what you mean by "taking up to 33%
>> more time"?
>
>When I set things up to run in 60 seconds, it takes anywhere from 61
>to 80 seconds.
>
>> What kind of time units are we talking about here?
>
>10s of seconds, with request counts such that we're getting 10s of
>requests a second.

This is orders of magnitude out from where you should be having any
problems.  Can you share a brief example of how you're doing the
scheduling?

Jean-Paul



From mwm-keyword-twisted.c54178 at mired.org  Tue Jul 18 12:53:31 2006
From: mwm-keyword-twisted.c54178 at mired.org (Mike Meyer)
Date: Tue, 18 Jul 2006 12:53:31 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <20060718151310.29014.659879015.divmod.quotient.42787@ohm>
References: <17596.62755.395304.9448@bhuda.mired.org>
	<20060718151310.29014.659879015.divmod.quotient.42787@ohm>
Message-ID: <17597.4619.583520.39791@bhuda.mired.org>

In <20060718151310.29014.659879015.divmod.quotient.42787 at ohm>, Jean-Paul Calderone <exarkun at divmod.com> typed:
> >> Can you be more specific about what you mean by "taking up to 33%
> >> more time"?
> >
> >When I set things up to run in 60 seconds, it takes anywhere from 61
> >to 80 seconds.
> >
> >> What kind of time units are we talking about here?
> >
> >10s of seconds, with request counts such that we're getting 10s of
> >requests a second.
> 
> This is orders of magnitude out from where you should be having any
> problems.  Can you share a brief example of how you're doing the
> scheduling?


Sure. Here's the start method that's responsible for starting self.counter
requests in self.opts.send seconds:

    def start(self):
        """Start a page fetch."""

        launch = time()
        defer = getPage('http://%s:8080/axis2/services/RadarWebService' %
                        self.host, postdata=payload, method='POST')
        defer.addCallback(self.check_response)
        defer.addCallbacks(self.good, self.bad, callbackArgs=(launch,),
                           errbackArgs=(launch,))
        self.actions.append(defer)
        if not hasattr(self, 'started'):
            self.started = launch

        self.counter -= 1
        if self.counter <= 0:
            self.done()
        else:
            delay = (self.started + self.opts.send - time()) / self.counter
            if delay < 0:
                delay = 0
            reactor.callLater(delay, self.start)


done uses self.started and time() to calcuate the time that's passed
and print it:

    def done(self):
            print 'Started %d requests in %f seconds.' % \
                  (self.reqs, time() - self.started)


	Thanks,
	<mike
-- 
Mike Meyer <mwm at mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.



From naked at iki.fi  Wed Jul 19 04:09:35 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Wed, 19 Jul 2006 11:09:35 +0300
Subject: [Twisted-Python] Improving spawnProcess and friends
Message-ID: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>

Hi,

I'd like to write an improvement to spawnProcess - but I thought I
should check with the devs here first to get comments and to see if it
would be something that could be merged to the mainline at some point.

The primary thing I want to do is to improve the childFDs
handling. Instead of the childFDs being a dictionary, I'd like to make
it be an object that is set up beforehand.

In addition to the current functionality of duplicating one of the
parent's fds and providing simple pipes, I'd like to add features to
configure arbitrary PTYs to be set up, for socketpairs to be set up
and to allow the duplication of some pipe into multiple child fds. To
clarify a bit, I'd like for a way to be able to start a process and
say that a socketpair should be created, it should be dup'd to fd 0
and fd 1 on the child and a pipe should be created for reading and it
should be dup'd to fd 2 on the child. The same with PTYs as well, so
this change would unify Process and PTYProcess.

Also, I would want to make it possible for each created reader,
writer, PTY, socketpair, whatever to have a separate protocol. That
is, I want to be able to say that this PTY should be handled by my
protocol here that inherits from LineReceiver - instead of having to
implement all of those in the ProcessProtocol.

Backwards compatibility would be obtained by still allowing the dict
type in childFDs and just mapping them to the new object inside
spawnProcess. Also the custom protocols would be optional and the
default protocol would just call childDataReceived and
childConnectionLost on the ProcessProtocol.

The other feature I would like to implement while mucking around with
the process module is the preexec_fn feature of the subprocess
module. That is, a function that gets executed just before the child
is exec'd. There can probably be other uses for this as well, but the
main usage for this would be a chroot call. I'm considering if it
should be a list of functions executed in order - since there might be
a need to do a chroot, a chdir and another chroot or something similar
- but of course the user can just supply a function that does that.

The actual API for these isn't finalized, I was thinking of making it
up as I go and seeing how it turns out.

So, what do you think?

-- Naked

PS. I'm Hadaka in #twisted at OPN - just to make the connection in case
you've seen me.




From p.mayers at imperial.ac.uk  Wed Jul 19 05:33:31 2006
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 19 Jul 2006 10:33:31 +0100
Subject: [Twisted-Python] Improving spawnProcess and friends
In-Reply-To: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
Message-ID: <44BDFC6B.3020401@imperial.ac.uk>

> writer, PTY, socketpair, whatever to have a separate protocol. That
> is, I want to be able to say that this PTY should be handled by my
> protocol here that inherits from LineReceiver - instead of having to
> implement all of those in the ProcessProtocol.

Yes, that is particularly irritating.



From stephane_brault at yahoo.fr  Wed Jul 19 08:50:05 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 12:50:05 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
Message-ID: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>

Hi, 
 I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?
 
 Thanks,
 
 St?phane





From exarkun at divmod.com  Wed Jul 19 09:08:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Wed, 19 Jul 2006 09:08:32 -0400
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>
Message-ID: <20060719130832.29014.1889998959.divmod.quotient.44184@ohm>

On Wed, 19 Jul 2006 12:50:05 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Hi,
> I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?

storeFile returns a two-tuple of Deferreds.  The first Deferred fires with an
L{IFinishableConsumer}.  You put the data to uploda into that consumer.  You
do this using a producer, eg twisted.protocols.basic.FileSender.

Jean-Paul



From jacob at internet24.de  Wed Jul 19 09:16:12 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Wed, 19 Jul 2006 15:16:12 +0200
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>
References: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>
Message-ID: <1153314972.4837.24.camel@localhost.localdomain>

Sort of like this:

def upload_sendfile(consumer, fileObj);
  FileSender().beginFileTransfer(fileObj, consumer).addCallback(  
                lambda _: consumer.finish()).addCallback(
                lambda _: fileObj.close())

dC,dL = ftpClient.storeFile(target_file)
dC.addCallback(upload_sendfile, open(source_file,'rb'))

Unfortunately though, this only works with a patched Twisted 2.4.0 
(http://twistedmatrix.com/trac/ticket/1794)

On Wed, 2006-07-19 at 12:50 +0000, St?phane Brault wrote:
> Hi, 
>  I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?
>  
>  Thanks,
>  
>  St?phane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060719/b367ae2b/attachment.pgp 

From stephane_brault at yahoo.fr  Wed Jul 19 09:50:07 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 13:50:07 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719130832.29014.1889998959.divmod.quotient.44184@ohm>
Message-ID: <20060719135007.61521.qmail@web26512.mail.ukl.yahoo.com>

Thanks Jean-Paul,
 there was a bug in the SenderProtocol, but I found the answer in the ticket #1794.
 
 St?phane

----- Message d'origine ----
De : Jean-Paul Calderone <exarkun at divmod.com>
? : twisted-python at twistedmatrix.com
Envoy? le : Mercredi, 19 Juillet 2006, 3h08mn 32s
Objet : Re: [Twisted-Python] using ftpclient storeFile question

On Wed, 19 Jul 2006 12:50:05 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Hi,
> I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?

storeFile returns a two-tuple of Deferreds.  The first Deferred fires with an
L{IFinishableConsumer}.  You put the data to uploda into that consumer.  You
do this using a producer, eg twisted.protocols.basic.FileSender.

Jean-Paul

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From stephane_brault at yahoo.fr  Wed Jul 19 09:53:55 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 13:53:55 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <1153314972.4837.24.camel@localhost.localdomain>
Message-ID: <20060719135355.7342.qmail@web26509.mail.ukl.yahoo.com>

Thanks Thomas,
 as I ran in the bug, almost got crazy, I searched and found the ticket ;-) 
 
 St?phane

----- Message d'origine ----
De : Thomas Jacob <jacob at internet24.de>
? : Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Mercredi, 19 Juillet 2006, 3h16mn 12s
Objet : Re: [Twisted-Python] using ftpclient storeFile question

Sort of like this:

def upload_sendfile(consumer, fileObj);
  FileSender().beginFileTransfer(fileObj, consumer).addCallback(  
                lambda _: consumer.finish()).addCallback(
                lambda _: fileObj.close())

dC,dL = ftpClient.storeFile(target_file)
dC.addCallback(upload_sendfile, open(source_file,'rb'))

Unfortunately though, this only works with a patched Twisted 2.4.0 
(http://twistedmatrix.com/trac/ticket/1794)

On Wed, 2006-07-19 at 12:50 +0000, St?phane Brault wrote:
> Hi, 
>  I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?
>  
>  Thanks,
>  
>  St?phane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From dialtone at divmod.com  Wed Jul 19 10:17:24 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Wed, 19 Jul 2006 16:17:24 +0200
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719135007.61521.qmail@web26512.mail.ukl.yahoo.com>
Message-ID: <20060719141724.29014.958471635.divmod.quotient.44252@ohm>

On Wed, 19 Jul 2006 13:50:07 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> there was a bug in the SenderProtocol, but I found the answer in the ticket #1794.
>

There is also this ticket:
http://twistedmatrix.com/trac/ticket/1357

That provides a better API to upload a file.



From stephane_brault at yahoo.fr  Wed Jul 19 10:35:26 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 14:35:26 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719141724.29014.958471635.divmod.quotient.44252@ohm>
Message-ID: <20060719143526.87807.qmail@web26510.mail.ukl.yahoo.com>

Thanks Valentino,
 
 St?phane

----- Message d'origine ----
De : Valentino Volonghi aka Dialtone <dialtone at divmod.com>
? : St?phane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Mercredi, 19 Juillet 2006, 4h17mn 24s
Objet : Re: Re : [Twisted-Python] using ftpclient storeFile question

On Wed, 19 Jul 2006 13:50:07 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> there was a bug in the SenderProtocol, but I found the answer in the ticket #1794.
>

There is also this ticket:
http://twistedmatrix.com/trac/ticket/1357

That provides a better API to upload a file.






From andrew-twisted at puzzling.org  Wed Jul 19 10:46:05 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 20 Jul 2006 00:46:05 +1000
Subject: [Twisted-Python] Improving spawnProcess and friends
In-Reply-To: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
Message-ID: <20060719144605.GA21888@steerpike.home.puzzling.org>

On Wed, Jul 19, 2006 at 11:09:35AM +0300, Nuutti Kotivuori wrote:
> Hi,
> 
> I'd like to write an improvement to spawnProcess - but I thought I
> should check with the devs here first to get comments and to see if it
> would be something that could be merged to the mainline at some point.

Your proposed features sound interesting, but with a patch or even a proposed
API it's hard to say if it would be mergeable :)

[...]
> 
> The actual API for these isn't finalized, I was thinking of making it
> up as I go and seeing how it turns out.

That's a reasonable strategy.  I strongly recommend writing tests as you go
along (or first, even), so that when you're happy with it, you already have
patch with tests to offer.  It won't get merged without tests :)

Once you have a patch, file it on the twistedmatrix.com Trac.  Or if you want to
discuss an API proposal, feel free to follow up on this list.

I think the odds are good that it would be merged, but it depends on the 
details.

-Andrew.




From glyph at divmod.com  Wed Jul 19 11:54:14 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Wed, 19 Jul 2006 11:54:14 -0400
Subject: [Twisted-Python] Improving spawnProcess and friends
In-Reply-To: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
Message-ID: <20060719155414.29014.863402158.divmod.quotient.44373@ohm>

On Wed, 19 Jul 2006 11:09:35 +0300, Nuutti Kotivuori <naked at iki.fi> wrote:

>I'd like to write an improvement to spawnProcess - but I thought I
>should check with the devs here first to get comments and to see if it
>would be something that could be merged to the mainline at some point.

Thanks :).

It's probably worth mentioning these:
   http://twistedmatrix.com/trac/ticket/1218
   http://twistedmatrix.com/trac/ticket/950
   http://twistedmatrix.com/trac/ticket/1478
as long as we're talking about this API.

>The primary thing I want to do is to improve the childFDs
>handling. Instead of the childFDs being a dictionary, I'd like to make
>it be an object that is set up beforehand.

I'd like to see a proposed API for setting up this object.  A different way of doing this (which I think I prefer) would be to add a feature to ProcessProtocol rather than modifying the behavior of the childFDs argument.  After all, it's generally a particular process protocol that wants to be able to communicate on various channels.  This way it would be possible - although not necessarily easy - to allow your ProcessProtocol object to have a few of its methods called post-fork, but pre-exec.

>In addition to the current functionality of duplicating one of the
>parent's fds and providing simple pipes, I'd like to add features to
>configure arbitrary PTYs to be set up, for socketpairs to be set up
>and to allow the duplication of some pipe into multiple child fds. To
>clarify a bit, I'd like for a way to be able to start a process and
>say that a socketpair should be created, it should be dup'd to fd 0
>and fd 1 on the child and a pipe should be created for reading and it
>should be dup'd to fd 2 on the child. The same with PTYs as well, so
>this change would unify Process and PTYProcess.

>Also, I would want to make it possible for each created reader,
>writer, PTY, socketpair, whatever to have a separate protocol. That
>is, I want to be able to say that this PTY should be handled by my
>protocol here that inherits from LineReceiver - instead of having to
>implement all of those in the ProcessProtocol.

I believe that putting this into spawnProcess is operating at the wrong layer of abstraction.  The feature you're describing is highly useful though, so providing a utility implementation of ProcessProtocol that allows you to hook up regular protocols to various FDs would be very good.  IMHO ProcessProtocol looks deceptively like a regular protocol, and probably its dataReceived and connectionLost methods should be (softly) deprecated.  The right way to write a ProcessProtocol is to override childDataReceived, childConnectionLost and processEnded.  A ProcessProtocol that could hook up _arbitrary_ FDs as input and output to a Protocol would be incredibly useful but it would be a good start just to have a better-defined way to deal with separating process control from protocol logic; so useful it might even be worth putting this functionality on the base ProcessProtocol.

It seems like a good first step here would be refactoring the various flavors of file descriptor (including the mess in _pollingfile and _dumbwin32proc) so that they can be easily and portably invoked by users wanting to create out-of-band (non stdin/stdout) channels of communication between their processes.  I think it would be best if these channels could have a "flavor requirement" specified (i.e. pipe, socketpair, PTY), but also have a general stream-based transport API that would work the same from a high-level application's point of view on Windows and Mac and Linux; for example, use pipes if available, numeric unix sockets if not, localdomain sockets if that's not available either, depending on platform.

All of this is leaning towards making 0,1,2 as un-special as possible, which I like very much.  That also implies that you'll need to clean up stdio.StandardIO, and instead add an API like reactor.connectParentFD(factory, fileno, flavor=None).  On my first read through I started trying to describe a way to communicate the expected list of file descriptors and their settings to the child process but that seems best left up to the application.

>Backwards compatibility would be obtained by still allowing the dict
>type in childFDs and just mapping them to the new object inside
>spawnProcess. Also the custom protocols would be optional and the
>default protocol would just call childDataReceived and
>childConnectionLost on the ProcessProtocol.

This is why I'd strongly prefer the logic remain in ProcessProtocol.  There should be _one_ location for dealing with the state of a running subprocess and its shared FD map; the ProcessProtocol seems the logical place.  We could hide it all inside the reactor, but I am pretty sure that important aspects will forget to be exposed.

>The other feature I would like to implement while mucking around with
>the process module is the preexec_fn feature of the subprocess
>module. That is, a function that gets executed just before the child
>is exec'd. There can probably be other uses for this as well, but the
>main usage for this would be a chroot call. I'm considering if it
>should be a list of functions executed in order - since there might be
>a need to do a chroot, a chdir and another chroot or something similar
>- but of course the user can just supply a function that does that.

This gives me another good idea.  Right now there's a bunch of stuff that happens in the guts of the process module; chdir, setuid, fdmap setup.  Most of this could be factored into an UNIX-specific ProcessProtocol, centralized in "beforeFork" and "beforeExec" methods.  I'm not really sure how to best clearly expose that non-portable features are required when invoking spawnProcess, but the obvious idea is that if IUNIXProcessProtocol.providedBy(yourProtocol), barf on Windows, Jython (if they ever do another release and we add support for it again), etc.  Then you could explicitly  subclass either UNIXProcessProtocol if you explicitly needed nonportable features (which would still allow you to use them on UNIX; UNIXProcessProtocol == ProcessProtocol, on platforms which support it); but subclassing ProcessProtocol would select a more platform-appropriate method.

Originally I thought that the process-communication logic would be specific to a reactor, which is why it's factored as it is; after a few years of working with process spawning closely though it is clear to me that differences are entirely a feature of the OS and not of the reactor.

>The actual API for these isn't finalized, I was thinking of making it
>up as I go and seeing how it turns out.

I'd certainly like to see how a stab at this which can actually run turns out.

>So, what do you think?

Well, I liked your ideas, and then they made me think of some ideas that I liked even more :).  I hope that you'll continue to work on this.  Please feel free to copy and paste chunks of this (both your ideas and mine) into a ticket.

I'm working on at least 3 projects right now which use process spawning and these changes would improve all of them; although only one will be running long enough to actually see any of these implemented, I'm still pretty excited about the idea.



From naked at iki.fi  Wed Jul 19 17:25:01 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Thu, 20 Jul 2006 00:25:01 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
Message-ID: <87wta9nv82.fsf@aka.i.naked.iki.fi>

glyph at divmod.com wrote:
> On Wed, 19 Jul 2006 11:09:35 +0300, Nuutti Kotivuori <naked at iki.fi> wrote:
>> I'd like to write an improvement to spawnProcess - but I thought I
>> should check with the devs here first to get comments and to see if it
>> would be something that could be merged to the mainline at some point.
>
> Thanks :).
>
> It's probably worth mentioning these:
> http://twistedmatrix.com/trac/ticket/1218
> http://twistedmatrix.com/trac/ticket/950
> http://twistedmatrix.com/trac/ticket/1478
> as long as we're talking about this API.

Hopefully all of those will get fixed while we are at it.

>> The primary thing I want to do is to improve the childFDs
>> handling. Instead of the childFDs being a dictionary, I'd like to make
>> it be an object that is set up beforehand.
>
> I'd like to see a proposed API for setting up this object.  A
> different way of doing this (which I think I prefer) would be to add
> a feature to ProcessProtocol rather than modifying the behavior of
> the childFDs argument.  After all, it's generally a particular
> process protocol that wants to be able to communicate on various
> channels.  This way it would be possible - although not necessarily
> easy - to allow your ProcessProtocol object to have a few of its
> methods called post-fork, but pre-exec.

Hmmh. Well, firstly, actually I don't think I explained the object
idea properly. My original idea there was just to use the object as a
holder for the configuration - and nothing more. A syntax extension to
allow a nicely readable way of specifying childFDs instead of mappings
from integer to tuple of lists or whatever a complex set up like that
would end up being. But, now I'm not sure if I want the object at all
there.

I'm not sure if I understand what you are saying, though - atleast not
in a concrete way. I agree that generally a particular process
protocol is coded to explicitly read and write in certain
communication channels - so it is reasonable that the process protocol
would specify these communication channels.

However, I'm not sure I like the idea of methods firing from
ProcessProtocol post-fork but pre-exec. We are living on the child
side there - and calling any methods from the transport, reactor or
many other places would be a bad idea. I'd like the parts that get
executed on the child side be very well defined and generally not
supplied by the user.

>> In addition to the current functionality of duplicating one of the
>> parent's fds and providing simple pipes, I'd like to add features to
>> configure arbitrary PTYs to be set up, for socketpairs to be set up
>> and to allow the duplication of some pipe into multiple child fds. To
>> clarify a bit, I'd like for a way to be able to start a process and
>> say that a socketpair should be created, it should be dup'd to fd 0
>> and fd 1 on the child and a pipe should be created for reading and it
>> should be dup'd to fd 2 on the child. The same with PTYs as well, so
>> this change would unify Process and PTYProcess.
>
>> Also, I would want to make it possible for each created reader,
>> writer, PTY, socketpair, whatever to have a separate protocol. That
>> is, I want to be able to say that this PTY should be handled by my
>> protocol here that inherits from LineReceiver - instead of having to
>> implement all of those in the ProcessProtocol.
>
> I believe that putting this into spawnProcess is operating at the
> wrong layer of abstraction.  The feature you're describing is highly
> useful though, so providing a utility implementation of
> ProcessProtocol that allows you to hook up regular protocols to
> various FDs would be very good.  IMHO ProcessProtocol looks
> deceptively like a regular protocol, and probably its dataReceived
> and connectionLost methods should be (softly) deprecated.  The right
> way to write a ProcessProtocol is to override childDataReceived,
> childConnectionLost and processEnded.  A ProcessProtocol that could
> hook up _arbitrary_ FDs as input and output to a Protocol would be
> incredibly useful but it would be a good start just to have a
> better-defined way to deal with separating process control from
> protocol logic; so useful it might even be worth putting this
> functionality on the base ProcessProtocol.

Yes - the outReceived, errReceived, write, writeSequence, closeStdin,
closeStdout, closeStderr etc. methods seem to be a cause of a lot of
grief. It would be nice if childDataReceived, childConnectionLost,
processEnded, transport.writeToChild, transport.closeChildFD,
transport.signalProcess would be the only thing to worry about.

I was thinking about having the process readers and writers directly
connected to separate Protocols - and having those readers and writers
be the transports for those Protocols. And ProcessProtocol would kind
of just miss out on the communication that is happening and basically
be just a holder for signalProcess and processEnded.

Were you thinking of building the forwarding logic into
ProcessProtocol so that the readers and writers talk to the
ProcessProtocol which then forwards the commands onwards to different
Protocols? If so, what would be the transport for those Protocols? I'd
like for them to be able to say transport.loseConnection() to close
the communication channel they are using? If so, atleast some kind of
new transport forwarding these is needed. Or would they have the
readers and writers as transports - and those readers and writers just
communicate to them through the processProtocol. I'm not sure I'd like
an asymmetric set up like that.

> It seems like a good first step here would be refactoring the
> various flavors of file descriptor (including the mess in
> _pollingfile and _dumbwin32proc) so that they can be easily and
> portably invoked by users wanting to create out-of-band (non
> stdin/stdout) channels of communication between their processes.  I
> think it would be best if these channels could have a "flavor
> requirement" specified (i.e. pipe, socketpair, PTY), but also have a
> general stream-based transport API that would work the same from a
> high-level application's point of view on Windows and Mac and Linux;
> for example, use pipes if available, numeric unix sockets if not,
> localdomain sockets if that's not available either, depending on
> platform.
>
> All of this is leaning towards making 0,1,2 as un-special as
> possible, which I like very much.  That also implies that you'll
> need to clean up stdio.StandardIO, and instead add an API like
> reactor.connectParentFD(factory, fileno, flavor=None).  On my first
> read through I started trying to describe a way to communicate the
> expected list of file descriptors and their settings to the child
> process but that seems best left up to the application.

Okay, I didn't get most of the stuff here. I need more explanation to
understand what's going on. I remember fighting with stdio.StandardIO
at some point, so cleaning that up sounds something that should be
done.

When I'm narrowly looking at this process spawning stuff, I see a
communication channel as a single object that has three places it does
its magic at.

There is the setupPrefork() stage which is called at first, before
anything special is done. This does not return anything, it just does
stuff, if necessary. Then we fork. On the child side we call
setupChild(). This will do all the things necessary for setting up a
communication channel for the child process to use, and it will return
that a single filedescriptor (a file descriptor is just about the only
reasonable thing to survive an exec, so there is no need for variance
here). On the parent side we call setupParent(). This will set up the
communication channel on the parent side, and it will return a
transport that is capable of reading and/or writing the channel.

As an example, for ReadPipe(), setupPrefork() would call os.pipe() and
mark down the read and write file descriptors. Then setupChild() would
close the read fd and return the write fd. And setupParent() would
close the write fd and set up a ProcessReader handing the read fd.

Another example, say ReadNamedPipe('/tmp/namedpipe'), setupPrefork()
would call mknod to create the named pipe if necessary, but would open
no file descriptors. Then setupChild() would open the pipe for writing
and return the fd. And setupParent() would open the pipe for reading
and set up a ProcessReader handling the fd.

>> Backwards compatibility would be obtained by still allowing the dict
>> type in childFDs and just mapping them to the new object inside
>> spawnProcess. Also the custom protocols would be optional and the
>> default protocol would just call childDataReceived and
>> childConnectionLost on the ProcessProtocol.
>
> This is why I'd strongly prefer the logic remain in ProcessProtocol.
> There should be _one_ location for dealing with the state of a
> running subprocess and its shared FD map; the ProcessProtocol seems
> the logical place.  We could hide it all inside the reactor, but I
> am pretty sure that important aspects will forget to be exposed.

I'm still not entirely sure what you mean here. The Process object
(the "transport" or so) would hold the *state* of the running
subprocess and all its communication channels. The ProcessProtocol
would contain the stuff *dealing* with the state. And the initial
configuration of what to set up would either come from spawnProcess
(Process object initializer arguments) or from ProcessProtocol somehow
- or actually both.

It is obvious that ProcessProtocol can't be responsible for all the
configuration the Process needs - it shouldn't, for example, say the
name of the executable being executed. And I don't think it should be
responsible for the chdirs, chroots and such either - those should be
changeable at execution time without touching the
ProcessProtocol. Just as it is possible to change the address a TCP
connection is made without changing the Protocol of that
connection. But I do think it could be responsible for the FD mapping
for the process, since that is intimately tied with the logic of the
ProcessProtocol.

>> The other feature I would like to implement while mucking around
>> with the process module is the preexec_fn feature of the subprocess
>> module. That is, a function that gets executed just before the
>> child is exec'd. There can probably be other uses for this as well,
>> but the main usage for this would be a chroot call. I'm considering
>> if it should be a list of functions executed in order - since there
>> might be a need to do a chroot, a chdir and another chroot or
>> something similar - but of course the user can just supply a
>> function that does that.
>
> This gives me another good idea.  Right now there's a bunch of stuff
> that happens in the guts of the process module; chdir, setuid, fdmap
> setup.  Most of this could be factored into an UNIX-specific
> ProcessProtocol, centralized in "beforeFork" and "beforeExec"
> methods.  I'm not really sure how to best clearly expose that
> non-portable features are required when invoking spawnProcess, but
> the obvious idea is that if
> IUNIXProcessProtocol.providedBy(yourProtocol), barf on Windows,
> Jython (if they ever do another release and we add support for it
> again), etc.  Then you could explicitly subclass either
> UNIXProcessProtocol if you explicitly needed nonportable features
> (which would still allow you to use them on UNIX;
> UNIXProcessProtocol == ProcessProtocol, on platforms which support
> it); but subclassing ProcessProtocol would select a more
> platform-appropriate method.
>
> Originally I thought that the process-communication logic would be
> specific to a reactor, which is why it's factored as it is; after a
> few years of working with process spawning closely though it is
> clear to me that differences are entirely a feature of the OS and
> not of the reactor.

Most of this went past me as well.

If the setup stuff like chdir, setuid, fdmap, etc. is factored into an
UNIX-specific ProcessProtocol, then how are those configured when
spawning the process? I'd hate to have to make a new ProcessProtocol
or chance one every time I wanted to spawn an executable in a
different path.

I have no idea what so ever on what is the best way to expose the
non-portability of many of the things. As it stands now, some
communication channels obviously are non-portable - and in my mind
it's perfectly fine that SocketPair() throws an exception on
instantiation if the platform doesn't support it ;-)

In general I see it such that creating processes is such an OS
specific thing that there are more differences than not. The feature
sets are just too disjoint. So I see this thing as just allowing the
user to pick the features he wants and if they can't be supported, we
can boom.

> Well, I liked your ideas, and then they made me think of some ideas
> that I liked even more :).  I hope that you'll continue to work on
> this.  Please feel free to copy and paste chunks of this (both your
> ideas and mine) into a ticket.

I created an issue #1939 for this and added some of the conversation
here there.

> I'm working on at least 3 projects right now which use process
> spawning and these changes would improve all of them; although only
> one will be running long enough to actually see any of these
> implemented, I'm still pretty excited about the idea.

Running long enough? I intend to be finished by the night ;-)

Well, not really, but I do hope to finish this whole thing rather fast
and not let it linger.

On that note, I created my first try at some of the features. It's
filled with FIXMEs, no documentation, bad class names and no specific
test cases. But, it provides a compatible API and the process test
suite passes with it.

What it does is that it defines a set of communication channel helper
objects. Right now there's PassthroughFD, ReadPipe, WritePipe, PTY and
SocketPair. SocketPair is not implemented.

The API for using these is *really* convoluted now, but it does
support all the features.

The childFDs dictionary in its native form now should contain:

  { <name>: (<helper instance>, <list or tuple of fd numbers>) }

The name part is what the communication channel will be known with in
the ProcessProtocol. That is, the thing returned in childDataReceived
and childConnectionLost etc. The helper instance is an instance of one
of the helper classes. The list or tuple of fd numbers is the child
file descriptor numbers the channel should be ultimately mapped
to. Additionally, a name of '_defaultWriter' specifies the target name
transport.write() calls should write to. There are a few shorthands:

 { <name>: <helper instance> } is mapped to:
 { <name>: (<helper instance>, (<name>,)) }

 { <name>: 'r' } is mapped to:
 { <name> (ReadPipe(), (<name>,)) }

 { <name>: <int> } is mapped to:
 { <name>: (PassthroughFD(<int>), (<name>,)) }

So, to achieve a behaviour that is similar to the old PTYProcess
behaviour, you can say:

 { '_defaultWriter': 1,
   1: (PTY(), (0, 1, 2)) }

That is, make a PTY helper creating a new PTY, name it 1 in the
ProcessProtocol and map it to file descriptors 0, 1 and 2 on the
child. Also, make the default write method write to helper named 1.

This way, the outReceived() method is called on the ProcessProtocol
when data is received from the PTY - and transport.write() will write
data to the PTY.

I shall ponder these things for a while - and start implementing the
next phase when I have a good idea on what it should be.

-- Naked





From naked at iki.fi  Sat Jul 22 11:44:16 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Sat, 22 Jul 2006 18:44:16 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
	<87wta9nv82.fsf@aka.i.naked.iki.fi>
Message-ID: <87ejwdod9r.fsf@aka.i.naked.iki.fi>

Nuutti Kotivuori wrote:
> I shall ponder these things for a while - and start implementing the
> next phase when I have a good idea on what it should be.

Okay. I think I have some sort of an idea now. But, first, a problem.

If we are to use ProcessProtocol as having some logic that sets up the
communication channels for a child process, there needs to be some
function called before the process starts. But.

If there's a function in ProcessProtocol that is called before
makeConnection() (and hence connectionMade()) is called, there is no
self.transport in the ProcessProtocol. That would mean that the
current Process instance would need to be given as an argument, or
assigned separately (something else than makeConnection() called
before?). Both approaches do seem a bit yuckupucky to me.

Or, we could call makeConnection() on the ProcessProtocol before the
child process is started. But that sounds even worse. It is a change
from the current behavior and the child's pid isn't known at that
time. And then we would have to have another method called when the
child is spawned. And in general, I think connectionMade() should mean
connection made, and not pre-setup starting.

So, how about we bring the same thing that is in every other protocol
to processes as well? Factories.

Let's say that there is a ProcessProtocolFactory class. That
ProcessProtocolFactory is responsible for setting up the communication
pipes. That ProcessProtocolFactory determines which Protocol instances
are to be created for handling the communication pipes. The actual
ProcessProtocol behaves the same as it used to - no change there.

And perhaps UNIXProcessProtocolFactory, that would be responsible for
the setuid, setsid, etc. things, would be the platform abstraction
method that glyph was wanting for?

Heck, there might even be a RestartingProcessProtocolFactory, that
would automatically restart the child process when it dies, with an
exponential backoff? And a ProcessProtocolCreator that could be
similar to ClientCreator. Or, perhaps even the factory can return a
Deferred from some setup method if setting up communication pipes
require things that cannot be done synchronously? The flexibility just
seems so much better here.

Backward compatibility with reactor.spawnProcess() would be achieved
simply by having that function create a ProcessProtocolFactory that is
able to handle the old childFDs arguments and such - and all
compatibility glue would be in that function alone and it could be
deprecated. New code would use an interface that would take a
ProcessProtocolFactory instance as a parameter.

How does this sound? If nobody yells murder, I'll be starting to build
a rudimentary implementation of this to see how the API would
naturally turn out to be and then submit it here for review.

-- Naked







From exarkun at twistedmatrix.com  Sun Jul 23 01:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 23 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1153631101.8.2099179670@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-16 through 2006-07-23
Bugs opened: 20    Bugs closed: 5  Total open bugs: 672 (+15)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +5  |Highest:  +3          |Core:  +11             
|Enhancement:  +9  |High:     +0          |Trial:  +4             
|Task:         +1  |Normal:  +11          |Web:    +1             
                   |Low:      +1          |Web2:   +0             
                                          |Words:  -1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1936] loopback.loopback blocks, should return Deferred (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/1936

[#1938] web.Session.checkExpired and web.Site.makeSession do not keep DelayedCall handles (opened by acapnotic)
    defect          web        http://twistedmatrix.com/trac/ticket/1938

[#1940] make Twisted tests runnable from within a zipfile (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1940

[#1942] Fix IOCP buildslave (opened by exarkun)
    task            core       http://twistedmatrix.com/trac/ticket/1942

                    ===== High =====
[#1937] change twisted.web2.stream to use regular consumer/producer/protocol API, rather than "read() -> Deferred" (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1937

                    ===== Normal =====
[#1929] twisted.web2.test.test_xmlrpc should not use twisted.web.xmlrpc.Proxy (opened by dreid)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1929

[#1931] Rename "Efficient High-Volume Streaming" doc to "Producers and Consumers: Efficient High-Volume Streaming" (opened by spiv)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1931

[#1932] Setuptools support (opened by philn)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1932

[#1933] Add 'disconnecting' to the ITransport interface. (opened by spiv)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1933

[#1934] twisted.web2.auth.wrapper.HTTPAuthResource problem (opened by yasusii) (CLOSED, duplicate)
    defect          web2       http://twistedmatrix.com/trac/ticket/1934

[#1935] Calling reactor.iterate inside the reactor should raise an error (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/1935

[#1939] improve process module with generic support for pipes, PTYs, socketpairs etc. (opened by naked)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1939

[#1941] Add LineReceiver.loseConnection (opened by spiv)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1941

[#1943] better epytext in twisted.application and twisted.conch (opened by mwh)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1943

[#1944] trial --coverage makes some tests fail spuriously (opened by washort)
    defect          trial      http://twistedmatrix.com/trac/ticket/1944

[#1945] Gather Twisted testing patterns into a common module (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/1945

[#1946] ErrorHolder is basically untested (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/1946

[#1947] Update twisted.trial.runner and friends to use t.p.modules (opened by jml)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1947

[#1948] TestLoader's sorting is a mess (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/1948

                    ===== Low =====
[#1930] create a libevent reactor (opened by PenguinOfDoom)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1930



Closed Bugs
______________________
                    ===== Highest =====
[#1928] Refactor socket operations from tcp.py/udp.py into the reactor (opened by PenguinOfDoom, closed by PenguinOfDoom, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1928

                    ===== High =====
[#1365] select.error: (10022, 'Windows Error 0x2726') (opened by ghazel, closed by teratorn, wontfix)
    defect          core       http://twistedmatrix.com/trac/ticket/1365

                    ===== Normal =====
[#1814] twisted.web2.auth should provide an UnauthorizedResponse (opened by dreid, closed by dreid, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1814

[#1934] twisted.web2.auth.wrapper.HTTPAuthResource problem (opened by yasusii, closed by dreid, duplicate)
    defect          web2       http://twistedmatrix.com/trac/ticket/1934

[#1923] XPath query doesn't always handle namespaces correctly (opened by lewisbaker, closed by ralphm, worksforme)
    defect          words      http://twistedmatrix.com/trac/ticket/1923





From sflist at ihonk.com  Sun Jul 23 05:17:59 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Sun, 23 Jul 2006 02:17:59 -0700
Subject: [Twisted-Python] Can a Viewable be custom unjellied on the
	receiving end?
Message-ID: <1153646279.20767.5.camel@lothar>

Hi,

I'm using a pb.Viewable, and I'd like to send it to a client, using it
the way a Viewable typically would be used. However, on top of that, I
want it to be unjellied on the receiver's end as an instance of a
particular class of my own definition. However, using
pb.setUnjellyableForClass seems to be ignored in this case, and the
Viewable is arriving at the client as a vanilla RemoteReference.

Any way around that short of adding my custom class as a super to the
RemoteReference and calling its __init__() by hand?

Twisted 2.2.0 on Debian Sid.

Thanks!

Steve




From itamar at itamarst.org  Sun Jul 23 12:17:25 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 23 Jul 2006 12:17:25 -0400
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
In-Reply-To: <87ejwdod9r.fsf@aka.i.naked.iki.fi>
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
	<87wta9nv82.fsf@aka.i.naked.iki.fi> <87ejwdod9r.fsf@aka.i.naked.iki.fi>
Message-ID: <1153671445.5665.1.camel@localhost.localdomain>

On Sat, 2006-07-22 at 18:44 +0300, Nuutti Kotivuori wrote:

... adding factory object to process spawning ...

> How does this sound? If nobody yells murder, I'll be starting to build
> a rudimentary implementation of this to see how the API would
> naturally turn out to be and then submit it here for review.

Seems... over-engineered. I'm not sure adding a whole new object is the
way to go on this.




From naked at iki.fi  Sun Jul 23 16:15:49 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Sun, 23 Jul 2006 23:15:49 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
	<87wta9nv82.fsf@aka.i.naked.iki.fi>
	<87ejwdod9r.fsf@aka.i.naked.iki.fi>
	<1153671445.5665.1.camel@localhost.localdomain>
Message-ID: <878xmknklm.fsf@aka.i.naked.iki.fi>

Itamar Shtull-Trauring wrote:
> On Sat, 2006-07-22 at 18:44 +0300, Nuutti Kotivuori wrote:
>
> ... adding factory object to process spawning ...
>
>> How does this sound? If nobody yells murder, I'll be starting to build
>> a rudimentary implementation of this to see how the API would
>> naturally turn out to be and then submit it here for review.
>
> Seems... over-engineered. I'm not sure adding a whole new object is the
> way to go on this.

A valid concern, it did cross my mind as well. However, I have yet to
think of a better way to achieve all the features that are wished
for. Any suggestions?

Anyway, I have implemented some of the changes already. The patch is
again attached to the issue. Everything is still subject to change,
however. But, this is how setting up a process would look like at the
moment:

  class MyProcessProtocolFactory(process.ProcessProtocolFactory):
      def processSetup(self, proc):
           proc.addHelper(SetuidHelper(1000, 1000))
           proc.addHelper(ChdirHelper('/tmp'))
           proc.addHelper(PTY('pty', [0, 1]))
           proc.addHelper(PassthroughFD(sys.stderr.fileno(), [2]))
           proc.addHelper(WritePipe('passphrase', [3]))

This would configure the process to have uid 1000 and gid 1000, the
executable to be started in path /tmp, file descriptors 0 and 1 would
map to a PTY on the child, which would come in as
childDataReceived('pty', data) on the process protocol, file
descriptor 2 would be the parent's stderr and file descriptor 3 would
be a write pipe by the name of passphrase, that would be written as
transport.writeToChild('passphrase', 'foobar').

This is still lacking the ability to give different protocols to
different communication channels and the chdir/chroot/whatever helper
logic is hackish.

So, feedback is very much appreciated, as always. Regardless, I'll
holler on the list again when I think of where to go next with this
thing.

-- Naked





From exarkun at divmod.com  Sun Jul 23 22:01:38 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 23 Jul 2006 22:01:38 -0400
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
In-Reply-To: <878xmknklm.fsf@aka.i.naked.iki.fi>
Message-ID: <20060724020138.29014.2130740880.divmod.quotient.51436@ohm>

On Sun, 23 Jul 2006 23:15:49 +0300, Nuutti Kotivuori <naked at iki.fi> wrote:
>Itamar Shtull-Trauring wrote:
>> On Sat, 2006-07-22 at 18:44 +0300, Nuutti Kotivuori wrote:
>>
>> ... adding factory object to process spawning ...
>>
>>> How does this sound? If nobody yells murder, I'll be starting to build
>>> a rudimentary implementation of this to see how the API would
>>> naturally turn out to be and then submit it here for review.
>>
>> Seems... over-engineered. I'm not sure adding a whole new object is the
>> way to go on this.
>
>A valid concern, it did cross my mind as well. However, I have yet to
>think of a better way to achieve all the features that are wished
>for. Any suggestions?
>
>Anyway, I have implemented some of the changes already. The patch is
>again attached to the issue. Everything is still subject to change,
>however. But, this is how setting up a process would look like at the
>moment:
>
>  class MyProcessProtocolFactory(process.ProcessProtocolFactory):
>      def processSetup(self, proc):
>           proc.addHelper(SetuidHelper(1000, 1000))
>           proc.addHelper(ChdirHelper('/tmp'))
>           proc.addHelper(PTY('pty', [0, 1]))
>           proc.addHelper(PassthroughFD(sys.stderr.fileno(), [2]))
>           proc.addHelper(WritePipe('passphrase', [3]))

I think this probably isn't the best API.

Jean-Paul



From naked at iki.fi  Mon Jul 24 01:40:24 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Mon, 24 Jul 2006 08:40:24 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <878xmknklm.fsf@aka.i.naked.iki.fi>
	<20060724020138.29014.2130740880.divmod.quotient.51436@ohm>
Message-ID: <874px7o913.fsf@aka.i.naked.iki.fi>

Jean-Paul Calderone wrote:
> I think this probably isn't the best API.

Okay. But now I'm going to need some pointers on where to go from
here. I don't need a fully thought out suggestion, just a nudge in the
right direction and I'll see where I end up again.

I don't really care about the API - you guys know what fits in to
twisted and ultimately it's you who have to maintain it - I just care
about getting the features I need.

So, just give me a pointer - or holler me (Hadaka) on IRC for a chat.

-- Naked




From exarkun at divmod.com  Mon Jul 24 09:59:52 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 24 Jul 2006 09:59:52 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
 code, so in making the transition I have to add lots of docs
In-Reply-To: <E1G4oyO-0002u3-00@wolfwood>
Message-ID: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>

On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz <glyph at wolfwood.twistedmatrix.com> wrote:
>Author: glyph
>Date: Sun Jul 23 19:11:03 2006
>New Revision: 17664
>
>Modified:
>   branches/addamp-1715/twisted/protocols/amp.py
>Log:
>This was pre-UQDS code, so in making the transition I have to add lots of docs
>
> [snip]
>
> class Argument:
>+    """ Base-class of all objects that take values from Amp packets and convert
>+    them into objects for Python functions.
>+    """

Blech.  Does this style of docstring formatting make anyone else barf?
I notice that jml pointed out on the review of #1940 that the coding
standard nominally requires this.  Two points:

  * I think the coding standard is unclear in what it is trying to
communicate.  It gives an example of a docstring with no leading newline
and from this one might infer that all docstrings should omit leading
newlines, when really it is suggesting that simple, single-line lead-ins
to docstrings belong on the same line as the opening triple quotes.

  * I don't think what the coding standard says is actually relevant
anymore.  This was a display hack to appease a very old version of epydoc.
pydoctor and even the current version of epydoc don't care about this
whitespace.

I think the style prevalent throughout the unit tests is ideal:

    """
    Blah.
    """

This is the easiest to read.  It is unfortunate the emacs has such a hard
time with this construct, but I think it is what we should adopt anyway.

Jean-Paul



From foom at fuhm.net  Mon Jul 24 12:12:35 2006
From: foom at fuhm.net (James Y Knight)
Date: Mon, 24 Jul 2006 12:12:35 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <9AA0E206-09A7-4C43-A4AE-1B3E38593963@fuhm.net>


On Jul 24, 2006, at 9:59 AM, Jean-Paul Calderone wrote:
>> class Argument:
>> +    """ Base-class of all objects that take values from Amp  
>> packets and convert
>> +    them into objects for Python functions.
>> +    """
>
> Blech.  Does this style of docstring formatting make anyone else barf?

No, I can't say it does. However, it does make me usually miss the  
first line the first time through and then have to back up and read  
it again. So in that respect, it's non-optimal.

James





From glyph at divmod.com  Mon Jul 24 13:12:56 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 24 Jul 2006 13:12:56 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <20060724171256.29014.1358444585.divmod.quotient.52303@ohm>

On Mon, 24 Jul 2006 09:59:52 -0400, Jean-Paul Calderone <exarkun at divmod.com> wrote:

>This is the easiest to read.

I agree, and I'll gladly change that branch, but I didn't think it made sense to change the coding standard for the previous one.

Do you want to update the coding standard to be a bit less vague in this area?

>It is unfortunate the emacs has such a hard
>time with this construct, but I think it is what we should adopt anyway.

Emacs actually does a better job with the additional newline, because if you ask it to *without* the additional newline, it wraps the first line of the _docstring_ to 80 chars, it ignores indentation.  I've been ignoring that for the moment because it is seldom actually an issue, but it still bothers me.




From ppergame at gmail.com  Mon Jul 24 15:45:56 2006
From: ppergame at gmail.com (Pavel Pergamenshchik)
Date: Mon, 24 Jul 2006 12:45:56 -0700
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <E1G4oyO-0002u3-00@wolfwood>
	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <4a5c1b500607241245u610f01bhf76a46dc181d219@mail.gmail.com>

On 7/24/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
>
> I think the style prevalent throughout the unit tests is ideal:
>
>     """
>     Blah.
>     """
>
> This is the easiest to read.  It is unfortunate the emacs has such a hard
> time with this construct, but I think it is what we should adopt anyway.
>

I disagree. I don't think this style is a lot more readable, and it adds to
the line count. Extra lines make things not fit into a pageful, and it shows
-- our unit tests are a pain to scroll through.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060724/8aae7bc5/attachment.htm 

From duncan.mcgreggor at gmail.com  Mon Jul 24 16:03:03 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Mon, 24 Jul 2006 14:03:03 -0600
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <44C52777.1000802@gmail.com>

Jean-Paul Calderone wrote:

> On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz
>> class Argument:
>> +    """ Base-class of all objects that take values from Amp packets
>> and convert
>> +    them into objects for Python functions.
>> +    """
> 
> Blech.  Does this style of docstring formatting make anyone else barf?

I'll cast my vote:

Yes, it does induce nausea. I actually can't stand it and much prefer
your proposed syntax. In fact, my behavior verges on obsessive,
including the need to change it in code I am contributing when I see it
otherwise.

d



From stephane_brault at yahoo.fr  Mon Jul 24 16:50:24 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 22:50:24 +0200 (CEST)
Subject: [Twisted-Python] twistd question
Message-ID: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>

Hi,
 
 I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
 installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
 it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?
 
 Thanks,
 
 St?phane





From fairwinds at eastlink.ca  Mon Jul 24 17:06:56 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Mon, 24 Jul 2006 18:06:56 -0300
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
References: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
Message-ID: <44C53670.2090906@eastlink.ca>

Hi Stephane

I'm not sure this is really a twisted question. If you have a python2.3 
and a python2.4 you should have a corresponding site-packages for each. 
I'd check to ensure twisted is in the site-packages for the version of 
python driving your app if you expect to use it.

Regards,
David

St?phane Brault wrote:
> Hi,
>  
>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?
>  
>  Thanks,
>  
>  St?phane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From mithrandi-twisted-python at mithrandi.za.net  Mon Jul 24 17:17:12 2006
From: mithrandi-twisted-python at mithrandi.za.net (Tristan Seligmann)
Date: Mon, 24 Jul 2006 23:17:12 +0200
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
References: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
Message-ID: <20060724211712.GE16966@mithrandi.za.net>

* St?phane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://twistedmatrix.com/pipermail/twisted-python/attachments/20060724/981ba940/attachment.pgp 

From stephane_brault at yahoo.fr  Mon Jul 24 17:49:47 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 21:49:47 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <44C53670.2090906@eastlink.ca>
Message-ID: <20060724214947.49566.qmail@web26505.mail.ukl.yahoo.com>

Thanks David,
 I already ensured that, my problem is I don't know how to run twistd with python2.4 and I can't get rid of
 python2.3. 
 
 St?phane

----- Message d'origine ----
De : David Pratt <fairwinds at eastlink.ca>
? : St?phane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Lundi, 24 Juillet 2006, 11h06mn 56s
Objet : Re: [Twisted-Python] twistd question

Hi Stephane

I'm not sure this is really a twisted question. If you have a python2.3 
and a python2.4 you should have a corresponding site-packages for each. 
I'd check to ensure twisted is in the site-packages for the version of 
python driving your app if you expect to use it.

Regards,
David

St?phane Brault wrote:
> Hi,
>  
>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?
>  
>  Thanks,
>  
>  St?phane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 






From stephane_brault at yahoo.fr  Mon Jul 24 18:20:39 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 22:20:39 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724211712.GE16966@mithrandi.za.net>
Message-ID: <20060724222039.52507.qmail@web26512.mail.ukl.yahoo.com>

Thanks Tristan,
 so I installed python2.4-twisted (debian sarge 3.1 by the way), but I don't have twistd2.4.
 Now if I run twistd -y myserv.py it tells me I've got the wrong number of arguments. I must say
 I'm quite new to twisted, even if I succeede in writing y servers and managed to have them run
 on my dev computer (windows), but I wouldn't deploy on windows.
 
 St?phane

----- Message d'origine ----
De : Tristan Seligmann <mithrandi-twisted-python at mithrandi.za.net>
? : St?phane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Lundi, 24 Juillet 2006, 11h17mn 12s
Objet : Re: [Twisted-Python] twistd question

* St?phane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar






From stephane_brault at yahoo.fr  Mon Jul 24 18:23:00 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 22:23:00 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724211712.GE16966@mithrandi.za.net>
Message-ID: <20060724222300.60729.qmail@web26506.mail.ukl.yahoo.com>

Hi again,
 in fact despite the new installation, twistd still doesn't find my packages.
 
 St?phane

----- Message d'origine ----
De : Tristan Seligmann <mithrandi-twisted-python at mithrandi.za.net>
? : St?phane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Lundi, 24 Juillet 2006, 11h17mn 12s
Objet : Re: [Twisted-Python] twistd question

* St?phane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar






From golux at comcast.net  Mon Jul 24 19:55:03 2006
From: golux at comcast.net (Stephen Waterbury)
Date: Mon, 24 Jul 2006 19:55:03 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <44C52777.1000802@gmail.com>
References: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
	<44C52777.1000802@gmail.com>
Message-ID: <44C55DD7.4020308@comcast.net>

Duncan McGreggor wrote:
> Jean-Paul Calderone wrote:
> 
>> On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz
>>> class Argument:
>>> +    """ Base-class of all objects that take values from Amp packets
>>> and convert
>>> +    them into objects for Python functions.
>>> +    """
>> Blech.  Does this style of docstring formatting make anyone else barf?
> 
> I'll cast my vote:
> 
> Yes, it does induce nausea. I actually can't stand it and much prefer
> your proposed syntax. In fact, my behavior verges on obsessive,

OK, it appears that the voting has begun in earnest ... I actually
thought everyone would agree with Jp, but since they don't
(shocking!) ... I also vote for the

"""
Blah ...
"""

format (which I have always used).

Steve



From jml at mumak.net  Mon Jul 24 20:07:44 2006
From: jml at mumak.net (Jonathan Lange)
Date: Tue, 25 Jul 2006 10:07:44 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <E1G4oyO-0002u3-00@wolfwood>
	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>

On 7/24/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
> On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz <glyph at wolfwood.twistedmatrix.com> wrote:
> >Author: glyph
> >Date: Sun Jul 23 19:11:03 2006
> >New Revision: 17664
> >
> >Modified:
> >   branches/addamp-1715/twisted/protocols/amp.py
> >Log:
> >This was pre-UQDS code, so in making the transition I have to add lots of docs
> >
> > [snip]
> >
> > class Argument:
> >+    """ Base-class of all objects that take values from Amp packets and convert
> >+    them into objects for Python functions.
> >+    """
>
> Blech.  Does this style of docstring formatting make anyone else barf?
> I notice that jml pointed out on the review of #1940 that the coding
> standard nominally requires this.

The standard is definitely unclear.

I don't have strong feelings about how docstrings should be formatted.
 However I would prefer it if we used PEP 257 formatting.

Also, I strongly object to using
"""
Blah.
"""
for one line docstrings.


-0 on changing docstring format
+1 on updating coding standard to be clearer

jml



From andrew-twisted at puzzling.org  Mon Jul 24 21:19:10 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 25 Jul 2006 11:19:10 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
References: <E1G4oyO-0002u3-00@wolfwood>
	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
	<d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
Message-ID: <20060725011910.GB6112@steerpike.home.puzzling.org>

On Tue, Jul 25, 2006 at 10:07:44AM +1000, Jonathan Lange wrote:
[...]
> 
> Also, I strongly object to using
> """
> Blah.
> """
> for one line docstrings.

I agree with this sentiment.

For multi-line docstrings, I don't care.  Both formats are equally readable to
me.

> +1 on updating coding standard to be clearer

More clarity is more good!

-Andrew.




From golux at comcast.net  Mon Jul 24 22:03:12 2006
From: golux at comcast.net (Stephen Waterbury)
Date: Mon, 24 Jul 2006 22:03:12 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
References: <E1G4oyO-0002u3-00@wolfwood>	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
	<d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
Message-ID: <44C57BE0.8090202@comcast.net>

Jonathan Lange wrote:
> The standard is definitely unclear.
> 
> I don't have strong feelings about how docstrings should be formatted.
> However I would prefer it if we used PEP 257 formatting.

Just for the record, the multi-line docstring format

"""
Blah blah blah blah blah
blah.
"""

is consistent with PEP 257's recommendations.

> Also, I strongly object to using
> """
> Blah.
> """
> for one line docstrings.

It doesn't bother me, but

"""Blah."""

doesn't either, for one-liners.



From exarkun at divmod.com  Mon Jul 24 22:40:44 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 24 Jul 2006 22:40:44 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <44C57BE0.8090202@comcast.net>
Message-ID: <20060725024044.29014.857136159.divmod.quotient.52976@ohm>

On Mon, 24 Jul 2006 22:03:12 -0400, Stephen Waterbury <golux at comcast.net> wrote:
>Jonathan Lange wrote:
>>The standard is definitely unclear.
>>
>>I don't have strong feelings about how docstrings should be formatted.
>>However I would prefer it if we used PEP 257 formatting.
>
>Just for the record, the multi-line docstring format
>
>"""
>Blah blah blah blah blah
>blah.
>"""
>
>is consistent with PEP 257's recommendations.
>>Also, I strongly object to using
>>"""
>>Blah.
>>"""
>>for one line docstrings.
>
>It doesn't bother me, but
>
>"""Blah."""
>
>doesn't either, for one-liners.
>

This one doesn't really bother me either, although I very slightly prefer
the long form.

This bothers me a lot, though:

""" Blah. """

Jean-Paul



From jml at mumak.net  Mon Jul 24 22:43:45 2006
From: jml at mumak.net (Jonathan Lange)
Date: Tue, 25 Jul 2006 12:43:45 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060725024044.29014.857136159.divmod.quotient.52976@ohm>
References: <44C57BE0.8090202@comcast.net>
	<20060725024044.29014.857136159.divmod.quotient.52976@ohm>
Message-ID: <d06a5cd30607241943y7c1702a3ocac6411d6fe84b2c@mail.gmail.com>

On 7/25/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
>
> This bothers me a lot, though:
>
> """ Blah. """
>

Me too.



From stephane_brault at yahoo.fr  Tue Jul 25 07:56:20 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Tue, 25 Jul 2006 11:56:20 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724222300.60729.qmail@web26506.mail.ukl.yahoo.com>
Message-ID: <20060725115620.84021.qmail@web26513.mail.ukl.yahoo.com>

Hi all,
 so I tried different things (uninstalling and reinstalling just python2.4) and I can't solve the
 problem. Would it be possible to try something like:
 python2.4 /../twistd.py -y /../myServer.py
 It works on windows but doesn't seem to do anything on Linux, but maybe there is
 something on that line that might work ?
 Thanks,
 
 St?phane

----- Message d'origine ----
De : St?phane Brault <stephane_brault at yahoo.fr>
? : Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Mardi, 25 Juillet 2006, 12h23mn 00s
Objet : Re : [Twisted-Python] twistd question

Hi again,
 in fact despite the new installation, twistd still doesn't find my packages.
 
 St?phane

----- Message d'origine ----
De : Tristan Seligmann <mithrandi-twisted-python at mithrandi.za.net>
? : St?phane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Lundi, 24 Juillet 2006, 11h17mn 12s
Objet : Re: [Twisted-Python] twistd question

* St?phane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar




_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From exarkun at divmod.com  Tue Jul 25 08:36:43 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 25 Jul 2006 08:36:43 -0400
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725115620.84021.qmail@web26513.mail.ukl.yahoo.com>
Message-ID: <20060725123643.29014.2000412372.divmod.quotient.53635@ohm>

On Tue, 25 Jul 2006 11:56:20 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Hi all,
> so I tried different things (uninstalling and reinstalling just python2.4) and I can't solve the
> problem. Would it be possible to try something like:
> python2.4 /../twistd.py -y /../myServer.py
> It works on windows but doesn't seem to do anything on Linux, but maybe there is
> something on that line that might work ?
> Thanks,

This problem and its solution depend entire on how Python and Twisted
are installed on your platform and how packages are generally dealt with.

You would have the most luck finding help by asking in a forum dedicated
to the distribution of Linux you are using.  Even if someone on this
mailing list gives you an answer which seems to work, it most likely will
not be the most appropriate solution for the distribution you are using.

Jean-Paul



From stephane_brault at yahoo.fr  Tue Jul 25 09:24:17 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Tue, 25 Jul 2006 13:24:17 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725123643.29014.2000412372.divmod.quotient.53635@ohm>
Message-ID: <20060725132417.20852.qmail@web26509.mail.ukl.yahoo.com>

Thanks Jean-Paul,
 you're right.
 Anyway, for those who might be interrested, it seems the only way is to 
 remove all python packages and install from the sources.
 
 St?phane
 
 

----- Message d'origine ----
De : Jean-Paul Calderone <exarkun at divmod.com>
? : St?phane Brault <stephane_brault at yahoo.fr>; twisted-python at twistedmatrix.com
Envoy? le : Mardi, 25 Juillet 2006, 2h36mn 43s
Objet : Re: Re : Re : [Twisted-Python] twistd question

On Tue, 25 Jul 2006 11:56:20 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Hi all,
> so I tried different things (uninstalling and reinstalling just python2.4) and I can't solve the
> problem. Would it be possible to try something like:
> python2.4 /../twistd.py -y /../myServer.py
> It works on windows but doesn't seem to do anything on Linux, but maybe there is
> something on that line that might work ?
> Thanks,

This problem and its solution depend entire on how Python and Twisted
are installed on your platform and how packages are generally dealt with.

You would have the most luck finding help by asking in a forum dedicated
to the distribution of Linux you are using.  Even if someone on this
mailing list gives you an answer which seems to work, it most likely will
not be the most appropriate solution for the distribution you are using.

Jean-Paul






From glyph at divmod.com  Tue Jul 25 10:42:29 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 25 Jul 2006 10:42:29 -0400
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725132417.20852.qmail@web26509.mail.ukl.yahoo.com>
Message-ID: <20060725144229.29014.1867996346.divmod.quotient.53783@ohm>

On Tue, 25 Jul 2006 13:24:17 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> you're right.
> Anyway, for those who might be interrested, it seems the only way is to
> remove all python packages and install from the sources.

St?phane, although this approach may have worked for you, this is definitely not the right way to deal with installation difficulties, on any system I've ever used, Linux or no.

If you've come across this message while searching the web for solutions to Twisted installation difficulties, please don't think you have to delete your system-installed Python.



From stephane_brault at yahoo.fr  Tue Jul 25 11:13:32 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Tue, 25 Jul 2006 15:13:32 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725144229.29014.1867996346.divmod.quotient.53783@ohm>
Message-ID: <20060725151332.89762.qmail@web26504.mail.ukl.yahoo.com>

Well, you are probably right, since I no longer have troubles with twistd, but I have some installing
 other packages (such as pyOpenSSL), but these are not related directly to twisted so I won't bother
 you with them ;-). I must say that I had no troubles in the installation per se, my problems were
 related to the fact that running twistd would not take any python 2.4 packages into account and that
 I really need this distribution (because I'm a bad guy using functions decorators ;-)).
 Anyway, thanks to all of you for your answers,
 
 St?phane

----- Message d'origine ----
De : glyph at divmod.com
? : Twisted general discussion <twisted-python at twistedmatrix.com>
Envoy? le : Mardi, 25 Juillet 2006, 4h42mn 29s
Objet : Re: Re : Re : Re : [Twisted-Python] twistd question

On Tue, 25 Jul 2006 13:24:17 +0000 (GMT), St?phane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> you're right.
> Anyway, for those who might be interrested, it seems the only way is to
> remove all python packages and install from the sources.

St?phane, although this approach may have worked for you, this is definitely not the right way to deal with installation difficulties, on any system I've ever used, Linux or no.

If you've come across this message while searching the web for solutions to Twisted installation difficulties, please don't think you have to delete your system-installed Python.

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From glyph at divmod.com  Tue Jul 25 11:16:42 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 25 Jul 2006 11:16:42 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
Message-ID: <20060725151642.29014.1847638387.divmod.quotient.53822@ohm>

On Tue, 25 Jul 2006 10:07:44 +1000, Jonathan Lange <jml at mumak.net> wrote:
>I don't have strong feelings about how docstrings should be formatted.
>However I would prefer it if we used PEP 257 formatting.

I just read PEP 257.  What features in particular are you referring to?  Most of it seems to be about encoding redundant information.

By section:

"What is a Docstring?"
 - I think we all know
 - "Use triple quotes", sure.

"One Line Docstrings"  Hopefully we should have only a few of these, it seems odd to dedicate so much verbiage to them.

"Multi-Line Docstrings"
 - One-line summary: not always possible.  Following another aspect of our coding standard, a "line", in a method-level docstring, is at most 72 characters, you've burned a minimum of 8 in indentation, and that's often not enough space to summarize.  One sentence summary?  Sure.
 - Blank line before and after class docstrings?  I don't see this followed anywhere.  Especially not *before* docstrings: the convention is:
    class X:
        """ ...
pretty much everywhere.  I don't see any reason to change it.
 - "docstring of a script..." not applicable because of t.p.u.O
 - "list the classes..." not applicable because of pydoctor
 - "docstring for a function..." ... yes, it should describe arguments, side effects, return values; what else would it do?
 - "docstring for a class..." not applicable again because of pydoctor; this information is redundant
 - "if a class subclasses another class..." not applicable again because of pydoctor's inheritance listing
 - "DO NOT use the Emacs convention..." uh yeah, also don't spell all your method names wrong or use synonyms for them

"handling docstring indentation" 
 - this whole section is about docstring processing tools, which, unless I manage to convince mwh to embed pydoctor in lore for some reason, Twisted is not :).



From mwh at python.net  Tue Jul 25 11:29:39 2006
From: mwh at python.net (Michael Hudson)
Date: Tue, 25 Jul 2006 16:29:39 +0100
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
 code, so in making the transition I have to add lots of docs
References: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
	<20060725151642.29014.1847638387.divmod.quotient.53822@ohm>
Message-ID: <2m4px5zorg.fsf@starship.python.net>

glyph at divmod.com writes:

>  - One-line summary: not always possible.  Following another aspect
>  of our coding standard, a "line", in a method-level docstring, is
>  at most 72 characters, you've burned a minimum of 8 in indentation,
>  and that's often not enough space to summarize.  One sentence
>  summary?  Sure.

As we've just discussed on #twisted, these one line summaries are
currently used by pydoctor -- it uses the first non-blank line of the
docstring(in terms of "lines in the source file") in the "summary
table" at the top of each page.  The long term solution is probably to
fix pydoctor to have some cleverer way of finding this summary, while
still not ending up with vast reams of text in the summary table if
someone neglects to add a summary.  Patches welcome :-) -- it's a job
that can be very easily localized to a single function, so you don't
need to try to wrap your head around any crazy code I've written...

Cheers,
mwh

-- 
  python py.py ~/Source/python/dist/src/Lib/test/pystone.py
  Pystone(1.1) time for 5000 passes = 19129.1
  This machine benchmarks at 0.261381 pystones/second




From general at eepatents.com  Tue Jul 25 12:47:06 2006
From: general at eepatents.com (Ed Suominen)
Date: Tue, 25 Jul 2006 09:47:06 -0700
Subject: [Twisted-Python] What bothers ME about docstrings...
In-Reply-To: <E1G5OrN-0006Rj-02@pyramid.twistedmatrix.com>
References: <E1G5OrN-0006Rj-02@pyramid.twistedmatrix.com>
Message-ID: <44C64B0A.8080100@eepatents.com>

What bothers ME most about docstrings is when they are absent!

I agree with some others in not liking when they start on the same line
as the triple quotes, but that's much further down my ample list of gripes.

By the way, David Reid did some work on docstrings for twisted.web2 and
earned the Twisted project $45 of my $2-per-docstring, $200 challenge.
(Hmmm...how did that odd number get there; did he write half a docstring
or something?) The money doesn't have to go to the Twisted project, but
that was his preference. There is another $200 available if my challenge
is met, as I understand it.

Any other takers?

Best regards, Ed

> From: Jean-Paul Calderone <exarkun at divmod.com>
> Subject: Re: [Twisted-Python] Re: [Twisted-commits] r17664 - This was
> 	pre-UQDS	code, so in making the transition I have to add lots of docs
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <20060725024044.29014.857136159.divmod.quotient.52976 at ohm>
> Content-Type: text/plain; format=flowed
> 
> On Mon, 24 Jul 2006 22:03:12 -0400, Stephen Waterbury <golux at comcast.net> wrote:
>> Jonathan Lange wrote:
>>> The standard is definitely unclear.
>>>
>>> I don't have strong feelings about how docstrings should be formatted.
>>> However I would prefer it if we used PEP 257 formatting.
>> Just for the record, the multi-line docstring format
>>
>> """
>> Blah blah blah blah blah
>> blah.
>> """
>>
>> is consistent with PEP 257's recommendations.
>>> Also, I strongly object to using
>>> """
>>> Blah.
>>> """
>>> for one line docstrings.
>> It doesn't bother me, but
>>
>> """Blah."""
>>
>> doesn't either, for one-liners.
>>
> 
> This one doesn't really bother me either, although I very slightly prefer
> the long form.
> 
> This bothers me a lot, though:
> 
> """ Blah. """
> 
> Jean-Paul




From stephane_brault at yahoo.fr  Wed Jul 26 08:58:01 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 26 Jul 2006 12:58:01 +0000 (GMT)
Subject: [Twisted-Python] strange twistd behaviour
Message-ID: <20060726125801.48335.qmail@web26508.mail.ukl.yahoo.com>

Hi,
 I created a twisted server but when I run it with twistd I don't get the same behaviour
 that I get when I use reactor.run()
 Here what I do with reactor:
 
 import communication.update
  import communication.updateXMLRPC
 from twisted.internet import reactor
  from twisted.web import resource, server as webserver
  
  communications = communication.update.communications("mysql://....")
  comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
  rootResource = resource.Resource()
  rootResource.putChild('RPC2', comXMLRPC)
 reactor.listenTCP(8000, webserver.Site(rootResource))
 reactor.run()
 
 
 Here is the server:
 
 import communication.update
 import communication.updateXMLRPC
 from twisted.application import service, internet
 from twisted.web import resource, server as webserver
 
 communications = communication.update.communications("mysql://....")
 comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
 rootResource = resource.Resource()
 rootResource.putChild('RPC2', comXMLRPC)
 webService = internet.TCPServer(8000, webserver.Site(rootResource))
 webService.setName('web')
 application = service.Application('communication')
 webService.setServiceParent(application)
 
 The communications class looks like that:
 
 class communications(object):
     
     def __init__(self, url):
         self.databaseReady = False
         self.databaseBroker = DatabaseBroker(url)
         d = self.databaseBroker.startup()  #line 1
         d.addCallback(self.serverReady).addErrback(self.serverError) #line 2
         
         
     def serverReady(self, result):
         self.databaseReady = True
 
     def serverError(self, error):
 ....
 
 The server works fine on WinXP, the code with the reactor works fine everywhere but the server, called by twistd -y /../server.py,
 starts but has problems with line 1 and line 2 (doesn't seem to call them) on my debian distribution (3.1).
 Any hints ?
 
 Thanks,
 
 St?phane





From wgwigw at gmail.com  Wed Jul 26 22:50:50 2006
From: wgwigw at gmail.com (wang wei)
Date: Thu, 27 Jul 2006 10:50:50 +0800
Subject: [Twisted-Python] is twisted suitable for rfb protocol implement?
Message-ID: <dbeb95830607261950u63784632j48253a6f935caf26@mail.gmail.com>

hi, I want to implement a rfb server using twisted, but I find  rfb protocol
maybe hard to code in twisted, since it needs read  blocks of data and
depend on the readed value to read the next blocks. is there a good solution
for twisted? thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060727/f9122a67/attachment.htm 

From eric.faurot at gmail.com  Thu Jul 27 03:06:00 2006
From: eric.faurot at gmail.com (Eric Faurot)
Date: Thu, 27 Jul 2006 09:06:00 +0200
Subject: [Twisted-Python] is twisted suitable for rfb protocol implement?
In-Reply-To: <dbeb95830607261950u63784632j48253a6f935caf26@mail.gmail.com>
References: <dbeb95830607261950u63784632j48253a6f935caf26@mail.gmail.com>
Message-ID: <e012d6b50607270006q571f5d37w6fa9ad22730b2f15@mail.gmail.com>

On 7/27/06, wang wei <wgwigw at gmail.com> wrote:
> hi, I want to implement a rfb server using twisted, but I find  rfb protocol
> maybe hard to code in twisted, since it needs read  blocks of data and
> depend on the readed value to read the next blocks. is there a good solution
> for twisted? thanks.

Twisted cannot make the protocol itself simpler to write. All it does
is to give you a framework in which you don't have to worry about
plumbing details. All you really have to do is to focus on the
protocol logic.

I don't know about this specific protocol, but you should try to think
of your protocol handler as a automaton: consider that you receive
input data that you must (usually in slices) dispatch to a specific
handler depending on your current state. The handler processes the
data, does whatever it has to, then adapts the current state as
necessary. The point is that you should define your states so that you
know how much data they need to consume to do something useful (that
is in the protocol description).

Designing your handler like this makes it very flexible, because it
naturally handles partial data, so it can be plugged on top of
anything that streams, for example a twisted connection. All you have
to do then is to write a glue Protocol that will connect
dataReceived() to your decoder input. Furthermore, it will probably be
more correct and easier to maintain, because it will very much match
the way your protocol is described on the paper.

For example, you can look at how my OggDecoder works:

http://pyogg.python-hosting.com/file/trunk/PyOgg/ogg/bitstream.py

The code is not always brilliant and polished, but it should give you
the idea.

Eric.



From exarkun at divmod.com  Fri Jul 28 08:13:52 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 28 Jul 2006 08:13:52 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17716 - Switch of the order
	the words
In-Reply-To: <E1G6KmH-0000uF-00@wolfwood>
Message-ID: <20060728121352.1717.1486540780.divmod.quotient.4064@ohm>

On Thu, 27 Jul 2006 23:20:49 -0600, Jonathan Lange <jml at wolfwood.twistedmatrix.com> wrote:
>Author: jml
>Date: Thu Jul 27 23:20:45 2006
>New Revision: 17716
>
>Modified:
>   trunk/twisted/protocols/amp.py
>Log:
>Switch of the order the words
>

Please don't do this.

Jean-Paul



From stephane_brault at yahoo.fr  Fri Jul 28 10:53:42 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Fri, 28 Jul 2006 14:53:42 +0000 (GMT)
Subject: [Twisted-Python] strange twistd behaviour
In-Reply-To: <20060726125801.48335.qmail@web26508.mail.ukl.yahoo.com>
Message-ID: <20060728145342.15774.qmail@web26504.mail.ukl.yahoo.com>

Hi,
 It seems that the problem comes from my databaseBroker objet which inherits from the AccessBroker class
 from the sasync library which does'nt seem to fire startup when run as a daemon process. It therefore doesn't
 has anything to do with twistd per se. Sorry to pollute this mailing list with irrelevant posts ;-)
 
 St?phane
 
 
 ----- Message d'origine ----
De : St?phane Brault <stephane_brault at yahoo.fr>
? : twisted-python at twistedmatrix.com
Envoy? le : Mercredi, 26 Juillet 2006, 2h58mn 01s
Objet : [Twisted-Python] strange twistd behaviour

Hi,
 I created a twisted server but when I run it with twistd I don't get the same behaviour
 that I get when I use reactor.run()
 Here what I do with reactor:
 
 import communication.update
  import communication.updateXMLRPC
 from twisted.internet import reactor
  from twisted.web import resource, server as webserver
  
  communications = communication.update.communications("mysql://....")
  comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
  rootResource = resource.Resource()
  rootResource.putChild('RPC2', comXMLRPC)
 reactor.listenTCP(8000, webserver.Site(rootResource))
 reactor.run()
 
 
 Here is the server:
 
 import communication.update
 import communication.updateXMLRPC
 from twisted.application import service, internet
 from twisted.web import resource, server as webserver
 
 communications = communication.update.communications("mysql://....")
 comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
 rootResource = resource.Resource()
 rootResource.putChild('RPC2', comXMLRPC)
 webService = internet.TCPServer(8000, webserver.Site(rootResource))
 webService.setName('web')
 application = service.Application('communication')
 webService.setServiceParent(application)
 
 The communications class looks like that:
 
 class communications(object):
     
     def __init__(self, url):
         self.databaseReady = False
         self.databaseBroker = DatabaseBroker(url)
         d = self.databaseBroker.startup()  #line 1
         d.addCallback(self.serverReady).addErrback(self.serverError) #line 2
         
         
     def serverReady(self, result):
         self.databaseReady = True
 
     def serverError(self, error):
 ....
 
 The server works fine on WinXP, the code with the reactor works fine everywhere but the server, called by twistd -y /../server.py,
 starts but has problems with line 1 and line 2 (doesn't seem to call them) on my debian distribution (3.1).
 Any hints ?
 
 Thanks,
 
 St?phane



_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From bussieremaillist at gmail.com  Fri Jul 28 16:20:10 2006
From: bussieremaillist at gmail.com (bussiere maillist)
Date: Fri, 28 Jul 2006 22:20:10 +0200
Subject: [Twisted-Python] smtpgoogle.py
Message-ID: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>

excuse me
does anyone know where it could be possible to download the examples of the
twisted book ?
Like this one smtpgoogle.py

Regards
Bussiere
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060728/3f27381b/attachment.htm 

From duncan.mcgreggor at gmail.com  Fri Jul 28 16:30:02 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Fri, 28 Jul 2006 14:30:02 -0600
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
Message-ID: <44CA73CA.8040808@gmail.com>

bussiere maillist wrote:

> excuse me
> does anyone know where it could be possible to download the examples of the
> twisted book ?
> Like this one smtpgoogle.py


Should be available from the publisher's site (O'Reilly).

d



From bussieremaillist at gmail.com  Fri Jul 28 16:37:05 2006
From: bussieremaillist at gmail.com (bussiere maillist)
Date: Fri, 28 Jul 2006 22:37:05 +0200
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <44CA73CA.8040808@gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
	<44CA73CA.8040808@gmail.com>
Message-ID: <8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>

i've looked on it but i didn't find it ...
regards
Bussiere

On 7/28/06, Duncan McGreggor <duncan.mcgreggor at gmail.com> wrote:
>
> bussiere maillist wrote:
>
> > excuse me
> > does anyone know where it could be possible to download the examples of
> the
> > twisted book ?
> > Like this one smtpgoogle.py
>
>
> Should be available from the publisher's site (O'Reilly).
>
> d
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060728/8ac7e62f/attachment.htm 

From duncan.mcgreggor at gmail.com  Fri Jul 28 16:51:32 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Fri, 28 Jul 2006 14:51:32 -0600
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>	<44CA73CA.8040808@gmail.com>
	<8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>
Message-ID: <44CA78D4.4050101@gmail.com>

bussiere maillist wrote:

> i've looked on it but i didn't find it ...
> regards
> Bussiere


I just did a google search with "twisted book examples o'reilly" and it
came up as the first hit. There's a link on that page called "Examples"
-- is that not what you are looking for?

d



From bussieremaillist at gmail.com  Fri Jul 28 17:54:17 2006
From: bussieremaillist at gmail.com (bussiere maillist)
Date: Fri, 28 Jul 2006 23:54:17 +0200
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <44CA78D4.4050101@gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
	<44CA73CA.8040808@gmail.com>
	<8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>
	<44CA78D4.4050101@gmail.com>
Message-ID: <8a8f62c80607281454h118cfbdve4b412b2f907c537@mail.gmail.com>

yes it was ...
i was searching whit smtpgoogle.py on google :/
regards

On 7/28/06, Duncan McGreggor <duncan.mcgreggor at gmail.com> wrote:
>
> bussiere maillist wrote:
>
> > i've looked on it but i didn't find it ...
> > regards
> > Bussiere
>
>
> I just did a google search with "twisted book examples o'reilly" and it
> came up as the first hit. There's a link on that page called "Examples"
> -- is that not what you are looking for?
>
> d
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://twistedmatrix.com/pipermail/twisted-python/attachments/20060728/49dd3281/attachment.htm 

From feldmatrix at gmx.de  Sat Jul 29 09:49:09 2006
From: feldmatrix at gmx.de (Torsten =?iso-8859-1?Q?Irl=E4nder?=)
Date: Sat, 29 Jul 2006 15:49:09 +0200
Subject: [Twisted-Python] Basic twisted question
Message-ID: <20060729134907.GA20631@lastpferd.irlaender.de>

Hi,
I'm new to twisted and I have some problems on understandins some
basic concepts on building applications upon the twisted framework. 

The examples in Fettig's book brought me on the right track I think
but I'm not sure. So I would like to ask you for some hints and
advices.

I try to build a small IMAP client which shoul be able so do some
very basic operations lke mailboxlisting and fetch some images.
Nothing more for the first. Based on Fettig's IMAP examples I did the
following:

For each operation I want to do I wrote a own protocol. I started
with a basic protocol which simply connects to the server. Then in
the next step I wrote the protocol which lists the users mailbox.
This protocol is inheritated from the first exentend this with the
methods to list the mailbox. As you can see I planned to build some
kind of inhertance tree for the protcols. Continuing this way I
would end up with many small protocols doing one single task, and
I'm not sure If this is a good approach. Do you have any comments on
this?

If it is not clear to you what I meant I can provide some code of
course. At the moment this things is pretty small :)

best regards 
Torsten



From feldmatrix at gmx.de  Sat Jul 29 09:57:57 2006
From: feldmatrix at gmx.de (Torsten =?iso-8859-1?Q?Irl=E4nder?=)
Date: Sat, 29 Jul 2006 15:57:57 +0200
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <44CA73CA.8040808@gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
	<44CA73CA.8040808@gmail.com>
Message-ID: <20060729135757.GB18833@lastpferd.irlaender.de>

On Fri, Jul 28, 2006 at 02:30:02PM -0600, Duncan McGreggor wrote:
> bussiere maillist wrote:
> 
> > excuse me
> > does anyone know where it could be possible to download the examples of the
> > twisted book ?
> > Like this one smtpgoogle.py

Hi, 
this can be found at http://examples.oreilly.com/twistedadn/.

HTH

best regards 
Torsten 



From johann.borck at densedata.com  Sat Jul 29 13:04:39 2006
From: johann.borck at densedata.com (Johann Borck)
Date: Sat, 29 Jul 2006 19:04:39 +0200
Subject: [Twisted-Python] Basic twisted question
In-Reply-To: <20060729134907.GA20631@lastpferd.irlaender.de>
References: <20060729134907.GA20631@lastpferd.irlaender.de>
Message-ID: <44CB9527.7000207@densedata.com>

Torsten Irl?nder wrote:

>Continuing this way I
>would end up with many small protocols doing one single task, and
>I'm not sure If this is a good approach. 
>  
>
It sounds like you'd need to switch between those protocols while beeing
connected if you want to be able to do several operations, this is not
the way to use twisted protocol classes - of course it's ok to work with
inheritance,  but for one protocol, like IMAP, you'll want one protocol
class that does all operations (inherited or else). The http protocol
class in twisted for example is responsible for GET, POST, HEAD and all
other Request types, and is not split up into different classes for each
of these cases. Mind that the protocol usually will, once instatiated
from the Factory, stay till the end of that connection, serving
subsequent requests, and it'd be of great overhead and hard to implement
to exchange it each time another operation is requested. So, one
class/leaf of your inheritance tree will have to be able to do all the
operations of the protocol you implement.
A different use case would be switching from one protocol to another,
juice is a protocol that supports this explicitly, you can establish the
connection using juice and then switch to a protocol of your choice, fex
after authentication is done, but each, juice and the other protocol
will be responsible for the whole set of their operations.

hth, Johann





From feldmatrix at gmx.de  Sat Jul 29 15:54:38 2006
From: feldmatrix at gmx.de (Torsten =?iso-8859-1?Q?Irl=E4nder?=)
Date: Sat, 29 Jul 2006 21:54:38 +0200
Subject: [Twisted-Python] Basic twisted question
In-Reply-To: <44CB9527.7000207@densedata.com>
References: <20060729134907.GA20631@lastpferd.irlaender.de>
	<44CB9527.7000207@densedata.com>
Message-ID: <20060729195438.GA22197@lastpferd.irlaender.de>

On Sat, Jul 29, 2006 at 07:04:39PM +0200, Johann Borck wrote:
> Torsten Irl?nder wrote:
> 
> >Continuing this way I
> >would end up with many small protocols doing one single task, and
> >I'm not sure If this is a good approach. 
> >  
> >
> It sounds like you'd need to switch between those protocols while beeing
> connected if you want to be able to do several operations, this is not
> the way to use twisted protocol classes - of course it's ok to work with
> inheritance,  but for one protocol, like IMAP, you'll want one protocol
> class that does all operations (inherited or else). 

I agree with you. One single protocol class which handles all
operations might be the better way. I think my problem is a very
basic one and the examples I saw so far all did the following:

Build the factory client class wich instanciates the protocol. Within
this protcol class all steps to do a single task are more or less
automatic. That means that it is triggered by an eventhandler function and then in a
series of deferreds and callbacks the task is solved. I.e selecting
a Mailbox.
This way it is clear to me how to implement a protocol which does
one single task, but I'm missing a way how to implement more than
one action. I think my problem is that don't know who to start
an action in the protocol class which is not triggered by an
eventhandler like the "serverGreeting" method in the IMAP examples. 

> Mind that the protocol usually will, once instatiated
> from the Factory, stay till the end of that connection, serving
> subsequent requests, 

Yes that is what I want :) But at the moment I connect and
disconned to the server for each operation which is indeed a bad
way! But as described above it seems that I have some basic
problems in understandinding how to do this :(

best regards
Torsten




From exarkun at twistedmatrix.com  Sun Jul 30 01:05:02 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Jul 2006 05:05:02 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1154235902.52.627219510@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-23 through 2006-07-30
Bugs opened: 23    Bugs closed: 16  Total open bugs: 683 (+7)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +5  |Highest:  -1          |Conch:               +1  
|Enhancement:  +6  |High:     +3          |Core:               +10  
|Task:         +0  |Normal:   +2          |Pb:                  +0  
                   |Low:      +7          |Release Management:  +1  
                                          |Trial:               +0  
                                          |Web:                 -1  
                                          |Web2:                +0  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1952] twisted.python.zippath is inconsistent in its use of path separators (opened by glyph) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1952

[#1956] Make a less sucky producer/consumer API (opened by jknight)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1956

[#1963] getPassword unit test incorrectly uses popen3() (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1963

[#1965] AMP "LiveFire" unit test setup contains race condition (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1965

[#1966] web2 static.Data forgets to include a Content-Type header. (opened by yacc) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1966

                    ===== High =====
[#1951] twisted.plugin should use twisted.python.modules (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1951

[#1954] Remove erroneous usage of popen3 from GetPasswordTest.testStdin (opened by exarkun) (CLOSED, duplicate)
    task            core       http://twistedmatrix.com/trac/ticket/1954

[#1957] AMP needs protocol specification document in doc/core/specifications (opened by jknight)
    defect          core       http://twistedmatrix.com/trac/ticket/1957

[#1968] twisted.python.versions uses implementation detail of SVN, broken on 1.4 (opened by jknight)
    defect          core       http://twistedmatrix.com/trac/ticket/1968

[#1969] Give moshez commit privileges (opened by jml)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1969

                    ===== Normal =====
[#1949] can't run trial with Python that requires LD_LIBRARY_PATH set (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1949

[#1950] PyUnitTestCase.id is redundant and should be removed (opened by glyph)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1950

[#1964] Cleaning up the reactorin unit tests is hard (opened by moof)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1964

[#1967] twisted.conch.telnet dies in conjunction with PuTTY (opened by sam)
    defect          conch      http://twistedmatrix.com/trac/ticket/1967

[#1970] "admin/release-twisted --help" contains typo (opened by exarkun)
    defect          release management http://twistedmatrix.com/trac/ticket/1970

[#1971] Links in SEE ALSO section of lore-man.xhtml are bogus (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1971

                    ===== Low =====
[#1953] Epoll reactor (opened by therve)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1953

[#1955] a forgotten resetTimeout in twisted.protocols.postfix (opened by quakelee)
    defect          core       http://twistedmatrix.com/trac/ticket/1955

[#1958] AMP implementation: PLT (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1958

[#1959] AMP implementation: OCaml (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1959

[#1960] AMP implementation: Java (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1960

[#1961] AMP implementation: Erlang (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1961

[#1962] AMP implementation: Haskell (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1962



Closed Bugs
______________________
                    ===== Highest =====
[#1940] make Twisted tests runnable from within a zipfile (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1940

[#1514] twisted.spread.banana check for INT vs. LONGINT will fail on some 64-bit platforms (opened by itamarst, closed by glyph, )
    defect          pb         http://twistedmatrix.com/trac/ticket/1514

[#1940] make Twisted tests runnable from within a zipfile (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1940

[#1952] twisted.python.zippath is inconsistent in its use of path separators (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1952

[#1715] move vertex.juice into twisted core, as twisted.protocols.amp (asynchronous messaging protocol) (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1715

[#1966] web2 static.Data forgets to include a Content-Type header. (opened by yacc, closed by exarkun, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1966

[#1837] trial -e doesn't work with pyunit test cases (opened by radix, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1837

[#1646] trial should support color output on win32 as well (opened by glyph, closed by jml, )
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1646

[#1726] Enhanced docstring for callFromThread (opened by moonfallen, closed by moonfallen, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1726

                    ===== High =====
[#883 ] [PATCH] [TEST] twisted.web.client thinks ConnectionLost pages are successful (opened by Tv, closed by glyph, fixed)
    defect          web        http://twistedmatrix.com/trac/ticket/883

[#1954] Remove erroneous usage of popen3 from GetPasswordTest.testStdin (opened by exarkun, closed by jknight, duplicate)
    task            core       http://twistedmatrix.com/trac/ticket/1954

                    ===== Normal =====
[#1276] loadPackage (recurse or otherwise) should respect __path__ (opened by jml, closed by glyph, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1276

[#1943] better epytext in twisted.application and twisted.conch (opened by mwh, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1943

[#1905] twisted.web.client.getPage deferred does not errback in the case of e.g. a 500 error code (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1905

[#1276] loadPackage (recurse or otherwise) should respect __path__ (opened by jml, closed by glyph, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1276

[#632 ] Mapped resultsets for adbapi (opened by waterbug, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/632





From alex.greif at gmail.com  Mon Jul 31 06:42:26 2006
From: alex.greif at gmail.com (Alex Greif)
Date: Mon, 31 Jul 2006 12:42:26 +0200
Subject: [Twisted-Python] twisted web question
Message-ID: <778770d80607310342x6f1ed6ddyb7f50f18b9591ae7@mail.gmail.com>

Hi NG,
I am completely new to twisted, but want to give it a try :)

I have a small website running, serving dynamic content with Pylons.
For switching to twisted, do I have to use the web or the web2 module?

thanks,

Alex.



From gah at research.att.com  Mon Jul 31 11:24:55 2006
From: gah at research.att.com (Glenn Hochberg)
Date: Mon, 31 Jul 2006 11:24:55 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
Message-ID: <3F892FD1-F4C6-4AEC-8AE6-4C86B4B12090@research.att.com>

I ran into a problem on HP-UX (B.11.23 U ia64) using Python 2.4.3,  
whereby processes started via reactor.spawnProcess() never seem to  
get the completion event.
I fished around via Google and found that this is ticket #608, which  
has been hanging around for over 2 years.

I'd be willing to help troubleshoot this if someone could provide  
some guidance.  I'd really like to get this fixed ASAP, so any help  
is appreciated.

Thanks.  Please reply to me directly in addition to the list, as I'm  
not subscribed.

   -Glenn Hochberg



From glyph at divmod.com  Mon Jul 31 11:43:06 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 31 Jul 2006 11:43:06 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <3F892FD1-F4C6-4AEC-8AE6-4C86B4B12090@research.att.com>
Message-ID: <20060731154306.1717.1179468454.divmod.quotient.9314@ohm>

On Mon, 31 Jul 2006 11:24:55 -0400, Glenn Hochberg <gah at research.att.com> wrote:
>I ran into a problem on HP-UX (B.11.23 U ia64) using Python 2.4.3,  whereby 
>processes started via reactor.spawnProcess() never seem to  get the 
>completion event.
>I fished around via Google and found that this is ticket #608, which  has 
>been hanging around for over 2 years.
>
>I'd be willing to help troubleshoot this if someone could provide  some 
>guidance.  I'd really like to get this fixed ASAP, so any help  is 
>appreciated.

I've commented on #608.  Long story short: we need a buildbot, and probably a maintainer for HP/UX.  Interested in volunteering?

You probably want to add yourself as "cc" specifically on that bug, if you don't want to subscribe to the mailing list.



From gah at research.att.com  Mon Jul 31 12:05:16 2006
From: gah at research.att.com (Glenn Hochberg)
Date: Mon, 31 Jul 2006 12:05:16 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <20060731154306.1717.1179468454.divmod.quotient.9314@ohm>
References: <20060731154306.1717.1179468454.divmod.quotient.9314@ohm>
Message-ID: <7E43A375-B36A-47DF-AED7-C4F20833E5FC@research.att.com>


On Jul 31, 2006, at 11:43 AM, glyph at divmod.com wrote:

> On Mon, 31 Jul 2006 11:24:55 -0400, Glenn Hochberg  
> <gah at research.att.com> wrote:
>> I ran into a problem on HP-UX (B.11.23 U ia64) using Python  
>> 2.4.3,  whereby processes started via reactor.spawnProcess() never  
>> seem to  get the completion event.
>> I fished around via Google and found that this is ticket #608,  
>> which  has been hanging around for over 2 years.
>>
>> I'd be willing to help troubleshoot this if someone could provide   
>> some guidance.  I'd really like to get this fixed ASAP, so any  
>> help  is appreciated.
>
> I've commented on #608.  Long story short: we need a buildbot, and  
> probably a maintainer for HP/UX.  Interested in volunteering?
>
> You probably want to add yourself as "cc" specifically on that bug,  
> if you don't want to subscribe to the mailing list.

Actually, I had to subscribe anyway (my email was rejected the first  
time),

Pardon my ignorance, but what is a "buildbot" exactly--obviously  
something that builds Twisted, but is it something I'd run myself, or  
something that needs to be accessible from the Internet?  I could  
help out in the short term, but I'm no HP-UX wiz; I'm only using it  
for one particular project because that's the hardware they run it on  
(to my dismay).

   -Glenn



From exarkun at divmod.com  Mon Jul 31 12:57:48 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 31 Jul 2006 12:57:48 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <7E43A375-B36A-47DF-AED7-C4F20833E5FC@research.att.com>
Message-ID: <20060731165748.1717.227371768.divmod.quotient.9412@ohm>

On Mon, 31 Jul 2006 12:05:16 -0400, Glenn Hochberg <gah at research.att.com> wrote:
>
>On Jul 31, 2006, at 11:43 AM, glyph at divmod.com wrote:
>>On Mon, 31 Jul 2006 11:24:55 -0400, Glenn Hochberg  <gah at research.att.com> 
>>wrote:
>>>I ran into a problem on HP-UX (B.11.23 U ia64) using Python  2.4.3, 
>>>whereby processes started via reactor.spawnProcess() never  seem to  get 
>>>the completion event.
>>>I fished around via Google and found that this is ticket #608,  which  has 
>>>been hanging around for over 2 years.
>>>
>>>I'd be willing to help troubleshoot this if someone could provide   some 
>>>guidance.  I'd really like to get this fixed ASAP, so any  help  is 
>>>appreciated.
>>
>>I've commented on #608.  Long story short: we need a buildbot, and 
>>probably a maintainer for HP/UX.  Interested in volunteering?
>>
>>You probably want to add yourself as "cc" specifically on that bug,  if you 
>>don't want to subscribe to the mailing list.
>
>Actually, I had to subscribe anyway (my email was rejected the first  time),
>
>Pardon my ignorance, but what is a "buildbot" exactly--obviously  something 
>that builds Twisted, but is it something I'd run myself, or  something that 
>needs to be accessible from the Internet?  I could  help out in the short 
>term, but I'm no HP-UX wiz; I'm only using it  for one particular project 
>because that's the hardware they run it on  (to my dismay).

It's the thing driving this page:

  http://twistedmatrix.com/buildbot/

It's how we can tell if Twisted works on various platforms or not.  Without
a buildslave running on a particular platform, we have no way to keep track
of whether changes being made are correct on that platform.

Jean-Paul



From eprparadocs at gmail.com  Mon Jul 31 12:59:06 2006
From: eprparadocs at gmail.com (Chaz.)
Date: Mon, 31 Jul 2006 12:59:06 -0400
Subject: [Twisted-Python] XMLRPC and timeout...
Message-ID: <44CE36DA.4030202@gmail.com>

I am not sure my original message made it to the list, so I thought I 
would reissue it. If you have seen it before, I am sorry for issuing it 
again.

I have an XMLRPC server and client. I am trying to build both of them 
defensively - in other words I would like to cancel the client request 
should a time period be exceeded. I would also like to give the server a 
specific time to answer. Can anyone give me an idea how to do them?

Peace, and thanks in advance,
Chaz.



From glyph at divmod.com  Mon Jul 31 13:51:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 31 Jul 2006 13:51:50 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <20060731165748.1717.227371768.divmod.quotient.9412@ohm>
Message-ID: <20060731175150.1717.1959347394.divmod.quotient.9480@ohm>

On Mon, 31 Jul 2006 12:57:48 -0400, Jean-Paul Calderone <exarkun at divmod.com> wrote:

>>Pardon my ignorance, but what is a "buildbot" exactly--obviously  something 
>>that builds Twisted, but is it something I'd run myself, or  something that 
>>needs to be accessible from the Internet?  I could  help out in the short 
>>term, but I'm no HP-UX wiz; I'm only using it  for one particular project 
>>because that's the hardware they run it on  (to my dismay).
>
>It's the thing driving this page:
>
>  http://twistedmatrix.com/buildbot/
>
>It's how we can tell if Twisted works on various platforms or not.  Without
>a buildslave running on a particular platform, we have no way to keep track
>of whether changes being made are correct on that platform.

If you're interested in setting up a build slave, http://buildbot.sourceforge.net/README would be a good place to start: see the "setting up a build slave" section.

IIRC, you'll need some cooperation from our end as well but that should get you started.



From gah at research.att.com  Mon Jul 31 15:58:40 2006
From: gah at research.att.com (Glenn Hochberg)
Date: Mon, 31 Jul 2006 15:58:40 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <20060731175150.1717.1959347394.divmod.quotient.9480@ohm>
References: <20060731175150.1717.1959347394.divmod.quotient.9480@ohm>
Message-ID: <C05E9996-DA00-4C0E-A3F1-5C7FD49C0DC1@research.att.com>

On Jul 31, 2006, at 1:51 PM, glyph at divmod.com wrote:

> On Mon, 31 Jul 2006 12:57:48 -0400, Jean-Paul Calderone  
> <exarkun at divmod.com> wrote:
>
>>> Pardon my ignorance, but what is a "buildbot" exactly--obviously   
>>> something that builds Twisted, but is it something I'd run  
>>> myself, or  something that needs to be accessible from the  
>>> Internet?  I could  help out in the short term, but I'm no HP-UX  
>>> wiz; I'm only using it  for one particular project because that's  
>>> the hardware they run it on  (to my dismay).
>>
>> It's the thing driving this page:
>>
>>  http://twistedmatrix.com/buildbot/
>>
>> It's how we can tell if Twisted works on various platforms or  
>> not.  Without
>> a buildslave running on a particular platform, we have no way to  
>> keep track
>> of whether changes being made are correct on that platform.
>
> If you're interested in setting up a build slave, http:// 
> buildbot.sourceforge.net/README would be a good place to start: see  
> the "setting up a build slave" section.
>
> IIRC, you'll need some cooperation from our end as well but that  
> should get you started.

Sadly, I will not be able to set up a build slave, as I do not have a  
machine that is accessible from the general internet.  Also, the HP  
testdrive machines cannot make outgoing connections, so they would  
not be able to do checkouts.

However, I am still interested in finding a solution to #608.  If we  
can come up with a patch that fixes the problem on HP-UX w/o breaking  
anything on any other platform, would that be sufficient?  You could  
then test that it does no harm, at least, and I could test whether  
the fix actually works on HP-UX.

What approach would you recommend in troubleshooting the problem--is  
there built-in debugging that can be turned on that might give me  
some more detailed information, or do I need to start adding log or  
print statements?

Again, any help would be appreciated.

   -Glenn





From exarkun at divmod.com  Mon Jul 31 16:36:30 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 31 Jul 2006 16:36:30 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <C05E9996-DA00-4C0E-A3F1-5C7FD49C0DC1@research.att.com>
Message-ID: <20060731203630.1717.666824456.divmod.quotient.9688@ohm>

On Mon, 31 Jul 2006 15:58:40 -0400, Glenn Hochberg <gah at research.att.com> wrote:
>
>What approach would you recommend in troubleshooting the problem--is  there 
>built-in debugging that can be turned on that might give me  some more 
>detailed information, or do I need to start adding log or  print statements?
>
>Again, any help would be appreciated.
>

Run one of the unit tests which fails in debug mode.  For example,

  trial -b twisted.trial.test.test_process.ProcessTestCase.testProcess

If none of the existing unit tests fail, write a new one :)

Jean-Paul



From exarkun at divmod.com  Mon Jul 31 22:26:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 31 Jul 2006 22:26:32 -0400
Subject: [Twisted-Python] IOCP reactor
In-Reply-To: 0
Message-ID: <20060801022632.1717.894031155.divmod.quotient.10143@ohm>


IOCP reactor has been offline for almost a month now.  

Hey, Windows developers, think we can do something about this?



From michele.petrazzo at unipex.it  Sat Jul  1 10:06:25 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Sat, 01 Jul 2006 18:06:25 +0200
Subject: [Twisted-Python] ftp client question
Message-ID: <44A69D81.6090306@unipex.it>

I have this code:

creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
                          self._passive, fail=self._Fail)
cre = creator.connectTCP(self._host, self._port)
cre.addCallback(self._ConnectionMade)
cre.addErrback(self._Fail)

I see that I can add a deferred on an connection error, that receive
also the commands error ("wrong user", etc..), but is there a solution
for add a callback for "user logged in" (code 230)?
I find one, only that is very bad, so I'm asking if someone has already
wrote this code in a more "twisted manner"

Thanks
Michele




From proclus at gnu-darwin.org  Sat Jul  1 17:02:04 2006
From: proclus at gnu-darwin.org (proclus at gnu-darwin.org)
Date: Sat,  1 Jul 2006 19:02:04 -0400 (EDT)
Subject: [Twisted-Python] FOSS, Science, and Public activism
Message-ID: <20060701230204.BF0A46B0FF1@gnu-darwin.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

(Sorry if you get more than one copy of this message, but I felt
that it was urgent to get this important info out.)

The values of freedom and openness are crucial to understanding 
itself, so that civilization and public welfare now depend on 
them, as I argue below.  These values may find their best 
expression in the free and open source software (FOSS) movement, 
and the foresightful example of FOSS developers should now be
beneficially applied to many other disciplines in the context of a
global and public Internet.

It is crucial that we occasionally take time to discuss the
reasons _why_ we release our source code, and this is one of 
those occasions.  There are good reasons for the freedom and
openness which are characteristics of FOSS development, reasons
which should receive wider attention now that they can be readily
communicated to other arenas.  The consequences of doing otherwise
are often catastrophic.

For example, it incomprehensible that Genentech could consider
withdrawing a cheap cure for blindness (ARMD) from the market.

http://lists.essential.org/pipermail/random-bits/2006-june/001374.html

The mechanism of this drug is public knowledge.

http://sourceforge.net/mailarchive/forum.php?thread_id=14183567&forum_id=6042

This abhorrent situation is a great example of the kind of thing
that will happen if people don't get behind the values of freedom
and openness that we are espousing.  Please let Genentech know
that you find what they are doing offensive.  Publicize the mechanism
so that new compounds can be obtained as replacements.  For the 
future, continued vociferous public activism is required to prevent
such outrages from occurring in the future.

It becomes clear that the compounds which come from common roots,
fruits, and vegetables are a shared human heritage and the free and
open source of the future.  Tannins are another interesting case in
point, because as molecules, and as anti-oxidents, they are similar to
resveratrol (resV), and that molecular mechanism has been anchored to
the public domain via a prior art declaration.  It is a so-called
CR-memetic, which may increase healthy human longevity by many
decades.  Here are some links about it.

Resveratrol mechanism posts from GNU-Darwin list
http://proclus.gnu-darwin.org/gdposts.html

CR protocol for human bodies
http://proclus.gnu-darwin.org/bootstrap.html

Here is some important recent news about it.

http://www.imminst.org/forum/index.php?s=&act=print&client=printer&f=237&t=10749

It is exciting to suppose that people can get off the pharmaceuticals
that they are taking with calorie restriction or CR-memetics.  I
personally am trying to get off the cholesterol drug Pravachol, a
statin compound, starting a few of weeks ago.  Write me, and I'll let
you know how it turns out.  From the article...

"Fontana says ...  evidence of "younger" hearts in people on calorie
restriction, suggest that humans on CR have the same adaptive
responses as did animals whose rates of aging were slowed by CR."

I think that it is time to look at the tannins in tobacco leaves.  
There may be other treasures lurking there too.  As you may be
aware there is ample public research into any possible beneficial
compounds that may be obtained from tobacco leaves.  The mechanisms
are there waiting to be discovered.  If you want to post them, just
reply to me and I'd be delighted to host them.

The public establishment of prior art is a time-honed method of
entering inventions into the public domain.  We now have other
methods at our disposal as well.   If you are planning to establish
prior art against future CR-memetic related patents, you might want
to have a look at www.creativecommons.org.  Perhaps it goes without
saying at this point that you should please choose a license that
provides for free and broad public access to your memetic.

In that way you will assure that the public health is served by 
anchoring them to the public common, where they cannot be exploited
by those who would withhold them for their own profit.  The DRM 
situation is precisely analogous to this.  Can you imagine doing
science in a world where your ability to read and write your data is
filtered through secret protocols that are hidden from you? I
recommend the Defective By Design campaign to fight the outrage of
DRM, which is incompatible with the scientific pursuit.

http://www.defectivebydesign.org/

It is clear that scientific tools must be demonstrably and
penetratingly understood, or else our claims will likely be skewed
and called into question.  Free and open source software is
a great example of how to make your science verifiable to the
public.  Establishing prior art against future patents is 
another good one, which is precisely analogous in method, 
making the result explicit to the public, free and open to all.
Thank goodness for the free and open software movement, which
gave us such a great example of how to serve the public in this
manner.

I am willing to grant that there are particular exceptions to
these rules of freedom and openness, and such exceptions may be
relatively harmless; however, let us posit the opposite, that
freedom and openness are _not_ crucial to understanding.  Think of
the implications.  When people are compelled to learn, they do not
receive the intended message.  It is not understood correctly
or completely.   When crucial facts are withheld from the people
you are trying to teach they become paranoid, possibly unteachable. 
Freedom and openness are obviously the best approach to understanding.

This is not a metaphor for the pursuit of science, but a fact. 
We are learning from nature, and it is ultimately required that
our tools be demonstrably and penetratingly understood, or else
we will receive incorrect lessons from nature.  Clearly this
requires public access to the source code and more.  This 
is why many of us are pressing for public access to scientific
publications.

Moreover FOSS tools are becoming ever more important to the
pursuit of the scientific endeavor itself.  In our biophysics
department we are obsolescing proprietary hardware and software
in favor of open standards and free software, which is a
widespread phenomenon in the science sector, and sure to continue.
We build most of the workstations ourselves with commodity hardware,
but we also have some clusters running Debian and FedoraCore.

Some of you will know that I am the lead developer for the
GNU-Darwin distribution.  GNU-Darwin has a FOSS operating system,
which is getting alot of press these days.  Here is an example

How Apple and Microsoft are advancing desktop Linux
http://www.desktopLinux.com/news/ns7294331817.html

I see the article as counter-productive against building a FOSS
coalition that includes democracy, freedom, and public access 
activists, Apple, GNU-Darwin, GNU, and GNU/Linux all linked
together in spectrum.

It is important to alert the whole FOSS community that Darwin
cannot be classified as a free or open source operation system
as of the Darwin-8 revision, because AppleACPIplatform-39 which
is required to boot the system is proprietary.  It is notable that
only the current version of Darwin from Apple is a non-free OS.
GNU-Darwin has a free version, an earlier revision that includes
the source code.  It is FOSS, and we call upon Apple to maintain
Darwin as such, as it has been in the past.  We hope that the
current situation with the kernel and ACPI driver will soon be
remedied so that Darwin will continue as a FOSS OS.

We are asking for free software developers to please write to the
*nix core of Darwin, which is the core OS for both Mac OS X and
GNU-Darwin OS.  Darwin OS, which underlies both systems, comprises
parts from GNU, the BSD's, mach, plus Apple's substantial
contributions to the free software community.  Be consistent with your
philosophy and avoid linkage to proprietary binaries, such as OpenGL
and CoreAudio, except when it is imperatively required in order to
lead users to the values of software freedom.  Under that principle,
another reason to maintain compatibility with the *nix core, is so
that your code will be readily portable to new platforms and usable
by free-software-only aficionados too.  

GNU-Darwin OS is not an obsolete implementation of Darwin OS, or to be
superseded by Mac OS X.  We are trying to lead users to freedom, not
away from it.  By maintaining Darwin core compatibility your code will
remain valuable as the marketplace and industry continues to evolve
(trust me here), particularly as DRM-related problems continue to come
forward. Of course, that means releasing your source code under a FOSS
license, such as APSL.  Darwin OS is a free and open source operating
system that is not going away, so try to focus your coding towards
supporting that standard instead of proprietary software.

Here is the essence of the current problem with Darwin OS.  Apple
replaced working boot code with the following proprietary drivers, 
which are required for the system to boot.

Darwin-7:
AppleAPIC.kext/
Applei386genericplatform.kext/

Darwin-8:
AppleACPIplatform

In addition the kernel (xnu) has been taken proprietary in the
recent revisions.  We are not asking for Apple to give away such
things, but rather to continue maintaining Darwin OS as FOSS, which
it already was. 

After repeated attempts by many FOSS developers to get this
situation remedied, nothing has happened.  It is now time for us to
better use the measures at our disposal in order to assure that
Darwin OS remains free and open.  If you are unhappy that xnu and 
the boot drivers have not been released, I would encourage you to
spread your dissatisfaction to other forums, so that Apple will take
notice and commit to a workable free and open Darwin OS from now on.  

Moving on to coalition strategy now, some of you may not know that
GNU/Linux system administration is one of my day jobs.  I manage a
wide range of systems.  Here is a screen-shot of my work desktop, so
that you can see I use the same tools at work that I use at home at
night on GNU-Darwin.  (weekends too, so please read I am your friend)

http://proclus.gnu-darwin.org/debian.html

The only time that I ever use proprietary software is when I am trying
to help other users learn free and open source free software.  I'm a 
long time Apple and GNU/Linux user, and here is the old proof doc ;-}.

http://proclus.tripod.com/indulge.html

Now, it is embarrassing but, I want you to have a look at my cv.

http://biophysics.med.jhmi.edu/love/thesis/cv6.html

In all my years I have never used Microsoft Windows.  There are only
two exceptions to this statement, where I was helping Windows users to
access our servers at Hopkins.  Clearly, you can get a few things done
without it ;-}.

One of the primary reasons for founding GNU-Darwin was to help people
to put Microsoft behind them,  and it is definitely possible to do it
now.  You have many resources at your disposal to help you leave
Microsoft behind.  Look at the link below to see what you can do
with free software.  Apple, GNU-Darwin, GNU.org, and GNU/Linux will
all help, and we are largely all helping together, because we have a
shared foundation of free software.

http://www.gnu-darwin.org/gdc/

Microsoft is only one example.  That is why we are so insistent that
Apple keep true to free and open source software principles.  We
should ultimately try to leave all proprietary software behind us, so
that we can participate fully in the freedom and openness of the
internet culture and public domain.  What more do we need, when we
have such a rich store of information and so many capable people at
our sides?

Finally, as a scientist, it is obvious to me that this situation is
relevant current and ongoing discussion in the scientific community,
and as such, it is also clear that many members of the various lists
would be interested in the current state of Darwin with respect to
FOSS and with respect to science.  

Here is the crucial point.

The principles of FOSS and scientific inquiry converge.  In
practical terms, how else can you know is what happening in your
experiments?  Free and open source software, open standards, best
promote the scientific endeavor by mirroring its method, but also
they assure that the work is accessible to the public.

Freedom and openness are crucial to understanding, and foundational
to the scientific endeavor, and they should not be compromised. 
There are a few examples of exceptions, but clearly, this matter
will find further debate in the appropriate forums.  We should not
quell debate because a few people are offended or complaining.  
- From a scientific perspective that would be incorrect.

On that last point, I would suggest that Apple get on the right side
of the debate, and they will make tremendous headway.  Now is the
time.

Some people will find this message annoying and divisive, and the
delete button is ready at hand for them, but other people will find 
it interesting and engaging.  All as you like.  Let us not quell
discussion because a few people are annoyed.

Some will call this a troll, but I hope that folks will see through
such name-calling.  Trolls are mythological creatures, so don't
believe in them.  Everyone has a right to have their opinion
heard, even if those opinions are divisive or unpopular.  It is
clear that the idea of trolls is being used to attack freedom of
expression.  In fact, freedom of expression demands that we
listen to the so-called-trolls sometimes, and if you are civil, it
helps, so don't resort to name-calling. 

On cross-posting; when there are matters of urgent importance that
affect a broad range of subscriber lists, courtesy must sometimes
take a back seat, and cross-posting is an example of that. 
Cross-posting is to be encouraged when the subject of the post is on
topic.  Each of the various lists will respond in the way that seems
appropriate to the people in that forum, and the threads on the
various lists will diverge accordingly.  As the threads diverge, the
cross-posting addresses should be removed as needed.  Relevance to
all people is an unattainable goal, but messages of the broadest
applicability should have the broadest reach, and discussion should
not be stymied because some find it irrelevant.  I have given this
method due consideration; it is not trolling, not spam, not off-topic,
and cross-posting is an example of something that is sometimes
required according to the felt importance and relevance of a given
subject matter.  

In summary, Freedom and openness are now the bedrock of our
civilization and public welfare depends on these values, so that we 
should actively engage ourselves in preserving and making them happen.
In keeping with these principles it is crucial to note that there are
exceptions to etiquette, otherwise free expression will be overly
channeled, damped, and ultimately suppressed in our forums.  This
notion of courtesy will certainly receive additional consideration,
but meanwhile, let us together get to work on the activism now.  

Duly, I am amenable to valid criticism and able to respond, but please
reply with kindness.  Obviously, feel free to write back, copy, or
send these comments along to anyone else as you see fit.

Regards,
Michael L. Love Ph.D
Department of Biophysics and Biophysical Chemistry
School of Medicine
Johns Hopkins University
725 N. Wolfe Street
Room 608B WBSB
Baltimore MD 21205-2185

Interoffice Mail: 608B WBSB, SoM

office: 410-614-2267
lab:    410-614-3179
fax:    410-502-6910
cell:   443-824-3451
http://www.gnu-darwin.org/
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFEpIl6u0oI3iz5oZcRAtpQAJ9X7D6kq1vmWKXkG/3LBvx3gGrK1QCZAbgI
8Ww6QABLiZtmFmS9Ekea5nI=
=a0Oy
-----END PGP SIGNATURE-----



From glyph at divmod.com  Sat Jul  1 18:19:09 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Sat, 1 Jul 2006 20:19:09 -0400
Subject: [Twisted-Python] FOSS, Science, and Public activism
In-Reply-To: <20060701230204.BF0A46B0FF1@gnu-darwin.org>
Message-ID: <20060702001911.29014.2052665584.divmod.quotient.18471@ohm>

I just want to be clear that Dr. Love's crusade has nothing to do with Twisted, and while I have no specific comment on the issues he discussed in his message, I do object to the Twisted lists being used for spam of any kind, whether commercial, religious, or political.  I've removed his address from the subscription list and hopefully this won't happen again.

I encourage those of you who agree with his assessment that "courtesy must sometimes take a back seat" to contact him using some of the information he helpfully provided, and discuss his ideas personally.

On Sat,  1 Jul 2006 19:02:04 -0400 (EDT), proclus at gnu-darwin.org wrote:

>cell:   443-824-3451



From bob at redivi.com  Sat Jul  1 19:18:52 2006
From: bob at redivi.com (Bob Ippolito)
Date: Sat, 1 Jul 2006 18:18:52 -0700
Subject: [Twisted-Python] FOSS, Science, and Public activism
In-Reply-To: <20060702001911.29014.2052665584.divmod.quotient.18471@ohm>
References: <20060702001911.29014.2052665584.divmod.quotient.18471@ohm>
Message-ID: <91067F0F-D266-4D89-BBF6-D97AC90754D2@redivi.com>

He's been trolling all of the FOSS lists. Please go ahead and call  
him and tell him how annoying he is.

-bob

On Jul 1, 2006, at 5:19 PM, glyph at divmod.com wrote:

> I just want to be clear that Dr. Love's crusade has nothing to do  
> with Twisted, and while I have no specific comment on the issues he  
> discussed in his message, I do object to the Twisted lists being  
> used for spam of any kind, whether commercial, religious, or  
> political.  I've removed his address from the subscription list and  
> hopefully this won't happen again.
>
> I encourage those of you who agree with his assessment that  
> "courtesy must sometimes take a back seat" to contact him using  
> some of the information he helpfully provided, and discuss his  
> ideas personally.
>
> On Sat,  1 Jul 2006 19:02:04 -0400 (EDT), proclus at gnu-darwin.org  
> wrote:
>
>> cell:   443-824-3451
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From sflist at ihonk.com  Sat Jul  1 19:45:35 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Sat, 01 Jul 2006 18:45:35 -0700
Subject: [Twisted-Python] Status of wxPython support in Twisted 2.1:
	use wxreactor
In-Reply-To: <1151691521.5653.5.camel@localhost.localdomain>
References: <1128956792.9046.9.camel@localhost.localdomain>
	<1151631666.6281.29.camel@lothar>
	<1151683888.5653.1.camel@localhost.localdomain>
	<1151689105.6281.67.camel@lothar>
	<1151691521.5653.5.camel@localhost.localdomain>
Message-ID: <1151804735.6366.23.camel@lothar>

On Fri, 2006-06-30 at 14:18 -0400, Itamar Shtull-Trauring wrote:
> On Fri, 2006-06-30 at 10:38 -0700, Steve Freitas wrote:
> 
> > So it's question of merging rather than further bug fixing?  
> 
> Probably. Maybe I'll get JP to help me with it on the weekend.
> 
> > I looked at
> > the feedback on the corresponding bug report
> > <http://twistedmatrix.com/bugs/issue1235> and it seemed like there was
> > still an issue on the Mac -- did you find a solution for that?
> 
> I think the current version doesn't work on Mac either, so it's
> certainly not worse :)

Well I'm willing to put some effort towards getting this reactor
working, if anybody in the know is willing to put up with a series of
(hopefully) decreasingly stupid questions. Twisted really needs a
reactor that Just Works with a good cross-platform GUI toolkit. (Yeah Tk
and GTK blah blah, but who buys a Mac so they can't lick their apps?)

JP and Itamar, have you got any feel for the difficulty level of making
wxreactor pass the tests?

Steve




From exarkun at twistedmatrix.com  Sat Jul  1 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 02 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1151816701.57.433301142@twistedmatrix.com

Bug summary
______________________
Summary for 2006-06-25 through 2006-07-02
Bugs opened: 32    Bugs closed: 22  Total open bugs: 642 (+10)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +3  |Highest:  -2          |Conch:     +1          
|Enhancement:  +3  |High:     +1          |Core:      +3          
|Task:         +5  |Normal:  +10          |Mail:      -1          
                   |Low:      +1          |Pb:        -1          
                   |Lowest:   +1          |Pydoctor:  +1          
                                          |Trial:     +4          
                                          |Web:       +2          
                                          |Web2:      +1          
                                          |Words:     +1          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1874] urlForResource() returns wrong URL for nested resources (eg, /foo/bar/baz) (opened by wsanchez) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1874

[#1875] twisted.internet.task.deferLater() (opened by mithrandi)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1875

[#1884] Document adjustment to review policy (opened by exarkun)
    task            core       http://twistedmatrix.com/trac/ticket/1884

                    ===== High =====
[#1870] TestCase.setUpClass and TestCase.tearDownClass are undocumented and have confusing behavior (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1870

[#1872] Fix "remove .pycs" step on Win32 builders (opened by exarkun)
    task            core       http://twistedmatrix.com/trac/ticket/1872

                    ===== Normal =====
[#1858] Failure formats exception class names incorrectly in printTraceback (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1858

[#1859] Failure cannot correctly determine the parents of a new-style exception (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1859

[#1860] ISFTPServer underspecifies types of file attributes (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1860

[#1861] newpb failure handling incorrectly deals with new-style exceptions (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1861

[#1862] twisted.test.test_failure raises string exceptions which are actually deprecated in Python 2.5 (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1862

[#1863] twisted.test.test_pbfailure.PBFailureTest.testPBFailures is very difficult to debug. (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1863

[#1864] twisted.test.test_stdio sets up child process improperly (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1864

[#1865] jelly cannot handling new-style classes, including new-style exceptions (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1865

[#1866] twisted.python.zipstream does not work with Python 2.5 (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1866

[#1867] Twisted has numerous problems running with Python 2.5 (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1867

[#1868] I have a win32 machine with python 2.4 to contribute to build server (opened by scmikes) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1868

[#1869] twisted.trial.unittest.TestCase.failUnlessFailure should provide more information (opened by exarkun)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1869

[#1871] Instantiating twisted.trial.unittest.TestCase with no arguments raises nasty exception (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1871

[#1873] Large File Uploads Fail (opened by lennyg)
    defect          web2       http://twistedmatrix.com/trac/ticket/1873

[#1877] Setup Buildbot for Suse 10, 32 bit Python 2.5 (opened by scmikes) (CLOSED, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1877

[#1878] twisted.web.monitor traceback, AttributeError: class IChangeNotified has no attribute '__class__' (opened by misc at mandriva.org)
    defect          web        http://twistedmatrix.com/trac/ticket/1878

[#1879] Enable PBClientFactory and PBServerFactory to use custom security options. (opened by pgstudy)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1879

[#1881] test_jabbercomponent, test_jabbererror, test_jabberxmlstream, test_msn fail if pyopenssl is not installed. (opened by spiv)
    defect          words      http://twistedmatrix.com/trac/ticket/1881

[#1882] update the coding standard to require docstrings for all new unit test methods (opened by radix)
    task            core       http://twistedmatrix.com/trac/ticket/1882

[#1883] Remove reactor.iterate calls from do_cleanPending (opened by jml)
    task            core       http://twistedmatrix.com/trac/ticket/1883

[#1885] test_ssh.UtilityTestCase.testCounter emits DeprecationWarning in python2.5 (opened by jknight)
    defect          conch      http://twistedmatrix.com/trac/ticket/1885

[#1886] pydoctor assumes all docs are in the same directory (opened by mwh)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1886

[#1887] Trial man page is extremely out of date (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/1887

[#1888] Review man pages (opened by jml)
    task            core       http://twistedmatrix.com/trac/ticket/1888

[#1889] twisted.web.microdom should be moved to twisted.python.microdom (opened by jerub)
    enhancement     web        http://twistedmatrix.com/trac/ticket/1889

                    ===== Low =====
[#1876] IReactorTime.callLater masks the builtin 'callable' in its arglist (opened by jerub)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1876

                    ===== Lowest =====
[#1880] deferreds should let you override the "Unhandled error in Deferred" behaviour (opened by ghazel)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1880



Closed Bugs
______________________
                    ===== Highest =====
[#302 ] client certificate verification (move sslverify into twisted.internet) (opened by jknight, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/302

[#1797] twisted/web/topfiles/setup.py fails during build_scripts (opened by exarkun, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1797

[#1507] trial doesn't gc.collect between test methods (opened by jknight, closed by jml, )
    defect          trial      http://twistedmatrix.com/trac/ticket/1507

[#1874] urlForResource() returns wrong URL for nested resources (eg, /foo/bar/baz) (opened by wsanchez, closed by wsanchez, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1874

[#1636] Completely replace t.p.c.Interface with z.i.Interface (opened by ralphm, closed by jknight, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1636

[#1637] many examples use deprecated imports (opened by jerub, closed by stephen, fixed)
    defect          mail       http://twistedmatrix.com/trac/ticket/1637

                    ===== High =====
[#1401] Difference between twisted.spread.jelly and twisted.spread.newjelly undocumented (opened by moof, closed by jknight, invalid)
    defect          pb         http://twistedmatrix.com/trac/ticket/1401

                    ===== Normal =====
[#1868] I have a win32 machine with python 2.4 to contribute to build server (opened by scmikes, closed by radix, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1868

[#1364] [PATCH] re-installation of the same reactor (opened by antony, closed by TimothyFitz, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1364

[#1866] twisted.python.zipstream does not work with Python 2.5 (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1866

[#1859] Failure cannot correctly determine the parents of a new-style exception (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1859

[#1858] Failure formats exception class names incorrectly in printTraceback (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1858

[#1865] jelly cannot handling new-style classes, including new-style exceptions (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1865

[#1864] twisted.test.test_stdio sets up child process improperly (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1864

[#1863] twisted.test.test_pbfailure.PBFailureTest.testPBFailures is very difficult to debug. (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1863

[#1862] twisted.test.test_failure raises string exceptions which are actually deprecated in Python 2.5 (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1862

[#1861] newpb failure handling incorrectly deals with new-style exceptions (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1861

[#1842] Deprecated usage of id in __hash__ methods (opened by therve, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1842

[#1867] Twisted has numerous problems running with Python 2.5 (opened by exarkun, closed by foom, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1867

[#1877] Setup Buildbot for Suse 10, 32 bit Python 2.5 (opened by scmikes, closed by scmikes, fixed)
    task            core       http://twistedmatrix.com/trac/ticket/1877

[#1748] Using twisted.cred.credentials results in deprecation warnings in Twisted 2.4 (opened by szumo, closed by jknight, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1748

[#1599] t.p.c.Interface shouldn't warn when a user inherits from another interface (opened by jknight, closed by jknight, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1599





From jacob at internet24.de  Mon Jul  3 02:52:43 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Mon, 03 Jul 2006 10:52:43 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <44A69D81.6090306@unipex.it>
References: <44A69D81.6090306@unipex.it>
Message-ID: <1151916763.17217.12.camel@localhost.localdomain>

On Sat, 2006-07-01 at 18:06 +0200, Michele Petrazzo wrote:
> I have this code:
> 
> creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
>                           self._passive, fail=self._Fail)
> cre = creator.connectTCP(self._host, self._port)
> cre.addCallback(self._ConnectionMade)
> cre.addErrback(self._Fail)
> 
> I see that I can add a deferred on an connection error, that receive
> also the commands error ("wrong user", etc..), but is there a solution
> for add a callback for "user logged in" (code 230)?

As far as I can see, _ConnectionMade is fired only when 
the login was successful (Code 230), no? Isn't that
all you need?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20060703/129779e1/attachment.sig>

From michele.petrazzo at unipex.it  Mon Jul  3 03:59:44 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Mon, 03 Jul 2006 11:59:44 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <1151916763.17217.12.camel@localhost.localdomain>
References: <44A69D81.6090306@unipex.it>
	<1151916763.17217.12.camel@localhost.localdomain>
Message-ID: <44A8EA90.3080601@unipex.it>

Thomas Jacob wrote:
> On Sat, 2006-07-01 at 18:06 +0200, Michele Petrazzo wrote:
>> I have this code:
>>
>> creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
>>                           self._passive, fail=self._Fail)
>> cre = creator.connectTCP(self._host, self._port)
>> cre.addCallback(self._ConnectionMade)
>> cre.addErrback(self._Fail)
>>
>> I see that I can add a deferred on an connection error, that receive
>> also the commands error ("wrong user", etc..), but is there a solution
>> for add a callback for "user logged in" (code 230)?
> 
> As far as I can see, _ConnectionMade is fired only when 
> the login was successful (Code 230), no? 

Not on my linux-box:

def conn():
   creator = ClientCreator(reactor, FTPClient, self._user, self._passwd,
                          self._passive)
   cre = creator.connectTCP(self._host, self._port)
   cre.addCallback(self._ConnectionMade)
   cre.addErrback(self._Fail)

def _ConnectionMade(self, ftpClient):
   print "_ConnectionMade"

def _Fail(self, response):
   print response.getTraceback()

michele:~$ python hylapex.py
_ConnectionMade
Traceback (most recent call last):
Failure: twisted.protocols.ftp.CommandFailed: ["500 'PASS ': Syntax 
error, expecting password."]

May be that my server isn't a "real" server, but an "hylafax" server 
that act like a ftp server?

> Isn't that all you need?
> 

I need a function called after the "queueLogin" successfully called and
ended.
Something like this bad hack:

www.unipex.it/vario/myftp.py

that I use:

def conn():
   creator = ClientCreator(reactor, FClient, self._user, self._passwd,
             self._passive, self._loggedin)
   cre = creator.connectTCP(self._host, self._port)
   cre.addCallback(self._ConnectionMade)
   cre.addErrback(self._Fail)

def _loggedin(self, res):
   print res
   self._loggedin = 1

def _ConnectionMade(self, ftpClient):
   print "_ConnectionMade"
   self._connected = 1

def _Fail(self, response):
   print response.getTraceback()

michele:~$ python hylapex.py
_ConnectionMade
['230 User michele logged in.']

Michele



From jacob at internet24.de  Mon Jul  3 05:35:52 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Mon, 03 Jul 2006 13:35:52 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <44A8EA90.3080601@unipex.it>
References: <44A69D81.6090306@unipex.it>
	<1151916763.17217.12.camel@localhost.localdomain>
	<44A8EA90.3080601@unipex.it>
Message-ID: <1151926552.17217.27.camel@localhost.localdomain>

> May be that my server isn't a "real" server, but an "hylafax" server 
> that act like a ftp server?

I guess that's the problem. Looking at your myftp.py and
your email, maybe the hylafax-ftp-server responds
with a 230 after the USER command, even though
a password is still required, thereby violating
the FTP protocol:

http://cr.yp.to/ftp/user.html

?



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20060703/6044a457/attachment.sig>

From michele.petrazzo at unipex.it  Mon Jul  3 10:12:33 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Mon, 03 Jul 2006 18:12:33 +0200
Subject: [Twisted-Python] ftp client question
In-Reply-To: <1151926552.17217.27.camel@localhost.localdomain>
References: <44A69D81.6090306@unipex.it>	<1151916763.17217.12.camel@localhost.localdomain>	<44A8EA90.3080601@unipex.it>
	<1151926552.17217.27.camel@localhost.localdomain>
Message-ID: <44A941F1.2050700@unipex.it>

Thomas Jacob wrote:
>> May be that my server isn't a "real" server, but an "hylafax" 
>> server that act like a ftp server?
> 
> I guess that's the problem. Looking at your myftp.py and your email, 
> maybe the hylafax-ftp-server responds with a 230 after the USER 
> command, even though a password is still required, thereby violating
>  the FTP protocol:
> 

This isn't true:
at "def cancelPasswordIfNotNeeded(response):", I add: "print response" and:

_ConnectionMade
['331 Password required for michele.'] # send the password
['230 User michele logged in.']

So hylafax (ftp server) work well, like specification!

You can read also the old "user+230" issue:
twistedmatrix.com/trac/ticket/1130

> ?
> 

For me and my project, my patch work, but isn't so beautiful to see, and
I have to control if all work well every time that I update twisted.
(due to the rewrite of some methods)
Another thing if that if the server work like specific (like seem),
twisted lack of that useful function!

Thanks,
Michele



From jml at mumak.net  Tue Jul  4 01:32:38 2006
From: jml at mumak.net (Jonathan Lange)
Date: Tue, 4 Jul 2006 17:32:38 +1000
Subject: [Twisted-Python] Trial ticket priorities
Message-ID: <d06a5cd30607040032k129aee49l4b3971570be94f39@mail.gmail.com>

Hello,

I've just re-prioritized a bunch of my Trial tickets. There are too
many tickets and not enough time, so I've had to make _some_ kind of
change in order to keep things ticking along.  For my purposes I've
defined highest and high as 'likely to get worked on when I next sit
down to hack'.

Please do not adjust the priorities without first discussing your
change with me.  Also, let me know If this violates some unwritten
policy -- I'll figure something else out.

Spending this time defining my work should help me fix more tickets
when I next hack.

cheers,
jml



From mftian at gmail.com  Tue Jul  4 20:17:14 2006
From: mftian at gmail.com (xie marffin&tian)
Date: Wed, 5 Jul 2006 10:17:14 +0800
Subject: [Twisted-Python] Newbie to twisted
Message-ID: <a28ffaac0607041917o1ad6bf73rd6e049f891c7cc7@mail.gmail.com>

hi

I learned python and was a new user to twisted. It's a bit complex. I
tried to start from reading the "core developper guide"(book.pdf) but
I still couldn't find the direction. Is there any advice on how to
start twisted programming or any other friendly tutorial?

many Thanks!



From wgwigw at gmail.com  Tue Jul  4 20:33:13 2006
From: wgwigw at gmail.com (wang wei)
Date: Wed, 5 Jul 2006 10:33:13 +0800
Subject: [Twisted-Python] what's wrong in my code?
Message-ID: <dbeb95830607041933x1fb5f30aq2c766c7f35a1467e@mail.gmail.com>

hi, I got 'twisted.internet.defer.alreadycallederror' error back.
here is my code, what's wrong in it? thanks for help.

class snmpFactory:
    def __init__(self, filename):

        self.deferred = defer.Deferred()

    def readValue(self):
        vol = readValue(self.voltageIp, voltageOid)
        temp = readValue(self.powerIp, temperatureOid)
        self.deferred.callback((vol, temp))
        self.deferred.addCallback(self.handleResult)
    def handleResult(self, (vol, temp)):
        slice = time.strftime("%H:%M:%S")
        print slice, ' the voltage is %s\nthe temperature is %s' % (vol,
temp)

s = snmpFactory()
i = 1
while (i < 10):
    reactor.callLater(5, s.readSnmpValue)
    i += 1
    time.sleep(10)
reactor.run()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060705/573af3a4/attachment.html>

From jml at mumak.net  Tue Jul  4 21:16:49 2006
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 5 Jul 2006 13:16:49 +1000
Subject: [Twisted-Python] what's wrong in my code?
In-Reply-To: <dbeb95830607041933x1fb5f30aq2c766c7f35a1467e@mail.gmail.com>
References: <dbeb95830607041933x1fb5f30aq2c766c7f35a1467e@mail.gmail.com>
Message-ID: <d06a5cd30607042016u2f8394c3kc5bb982e4d854683@mail.gmail.com>

On 05/07/06, wang wei <wgwigw at gmail.com> wrote:
> hi, I got 'twisted.internet.defer.alreadycallederror' error
> back.
> here is my code, what's wrong in it? thanks for help.

There's actually a lot wrong with your code.  I've dumped everything I
can think of here.  Don't worry, I get more helpful as you go further
down the email.

First, the simple stuff:
- reactor is not imported
- time is not imported
- snmpFactory constructor takes an unused filename parameter
- snmpFactory is constructed without passing the filename parameter
- defer is not imported
- the main while loop calls 'readSnmpValue' on an snmpFactory
instance, but there is no readSnmpValue method to be seen anywhere
- the readValue method calls a readValue function which is not defined
- you use a while loop and a counter when 'for i in range(10)' would
do the same thing more simply
- readValue refers to instance variables 'voltageIp' and 'powerIp',
neither of which are defined
- readValue refers to global variables 'voltageOid' and
'temperatureOid', neither of which are defined
- your code runs the reactor but never stops it.

Second, the complex stuff:
- Nothing in the code explains what you are trying to do, or even
specifies the API of the methods that you refer to.
- reactor.callLater(5, s.readValue) roughly means "call s.readValue
with no arguments in 5 seconds time". You probably don't want to do
that.
- You probably don't want to call time.sleep()
- In fact, you probably want a LoopingCall (see the API docs for details)

Third, the AlreadyCalledError:
- You create exactly one instance of snmpFactory. This means that
there is exactly one Deferred.  You fire this Deferred (i.e. run
callback on it) in the first pass of the main while loop. You can only
fire a Deferred once. The next time the loop goes around, you try to
fire it a second time.  This will raise an AlreadyCalledError.

Fourth, a note on asking for help:
Many people on this list are happy to help you learn Twisted.
However, anyone who does help you will be doing so in their spare
time. This means it is your responsibility to make it as easy for us
to help you as possible.  Two specific ways spring to mind:

1. If you are posting code, please post a minimal example that other
people can run.
2. Read http://www.catb.org/~esr/faqs/smart-questions.html

Your example is pretty small -- that's good. You know how to cut out
irrelevant code. However, your example is not even close to being
runnable. Even after I've taken the time to make it run, it doesn't
reproduce the error that you refer to.

Good luck with fixing your error.

jml



From foom at fuhm.net  Tue Jul  4 21:25:26 2006
From: foom at fuhm.net (James Y Knight)
Date: Tue, 4 Jul 2006 23:25:26 -0400
Subject: [Twisted-Python] =?utf-8?q?Re=3A_=5BTwisted-commits=5D_r17484_-_?=
 =?utf-8?q?Branching_to_callQueue=E2=88=9E=C2=88=C2=9E-1741?=
In-Reply-To: <E1Fxp3A-0007a9-00@wolfwood>
References: <E1Fxp3A-0007a9-00@wolfwood>
Message-ID: <25E36AA9-1666-4B61-96F0-4C8C8392BC79@fuhm.net>

For future reference, at least the following things failed to work  
with unicode in the branch/file name:

emacs couldn't open files in the directory using c-x c-f, but could  
from the command line (osx only issue possibly)
buildbot wouldn't build the branch
combinator couldn't make the branch
"svn log --stop-on-copy" couldn't "recode string" and wouldn't  
display anything.
The svn mailer script properly encoded the body in utf8, but the  
subject was marked as encoded in latin-1 while really being in utf8.

So, consider the experiment failed. I'd like to suggest a new rule:  
ascii filenames only. :)

James

On Jul 4, 2006, at 1:51 PM, James Knight wrote:

> Author: foom
> Date: Tue Jul  4 11:51:02 2006
> New Revision: 17484
>
> Added:
>    branches/callQueue�-1741/
>       - copied from r17483, trunk/
> Log:
> Branching to callQueue�-1741
>
> _______________________________________________
> Twisted-commits mailing list
> Twisted-commits at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-commits
>




From flashbuster at gmail.com  Tue Jul  4 21:31:38 2006
From: flashbuster at gmail.com (Sebastian Schulze)
Date: Wed, 5 Jul 2006 05:31:38 +0200
Subject: [Twisted-Python] Newbie to twisted
In-Reply-To: <a28ffaac0607041917o1ad6bf73rd6e049f891c7cc7@mail.gmail.com>
References: <a28ffaac0607041917o1ad6bf73rd6e049f891c7cc7@mail.gmail.com>
Message-ID: <c2959a420607042031v1d982ebhfc0cf5c8132c50@mail.gmail.com>

There is a good book about Twisted by Abe Fettig.
http://www.amazon.com/gp/product/0596100329/sr=8-1/qid=1152070192/ref=pd_bbs_1/104-3365398-9922356?ie=UTF8
If you prefer reading books to reading stuff online (like me) i can
recommend it to you.
It's a good starting point to learn about the asynchronous twistedapproach
and covers
many things.

2006/7/5, xie marffin&tian <mftian at gmail.com>:
>
> hi
>
> I learned python and was a new user to twisted. It's a bit complex. I
> tried to start from reading the "core developper guide"(book.pdf) but
> I still couldn't find the direction. Is there any advice on how to
> start twisted programming or any other friendly tutorial?
>
> many Thanks!
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060705/f3db6c66/attachment.html>

From wgwigw at gmail.com  Wed Jul  5 20:57:35 2006
From: wgwigw at gmail.com (wang wei)
Date: Thu, 6 Jul 2006 10:57:35 +0800
Subject: [Twisted-Python] Re: what's wrong in my code?
Message-ID: <dbeb95830607051957m56861415te9c1317cc9a35bc4@mail.gmail.com>

thanks for help, I will read the documents of smart-questions soon:)
last night I read the twisted's book on the its web site, and I think there
are 2 major mistake there. 1. the defer should not be inintinitialized  in
the __init__ phase, that's easy to understood why there are
AlreadCalledError. 2. twisted use task to run the loop. :D
that's a sample code here.

from twisted.internet import reactor, defer, task
class snmpFactory:
   def __init__(self):

   def readValue(self):
       self.deferred = defer.Deferred()
       vol = readValue(self.voltageIp, voltageOid)
       temp = readValue(self.powerIp, temperatureOid)
       reactor.callLater(0, self.handleResult, (vol, temp))
       return self.deferred
   def handleResult(self, (vol, temp)):
       slice = time.strftime("%H:%M:%S")
       print slice, ' the voltage is %s\nthe temperature is %s' % (vol,
temp)

s = snmpFactory()
l = task.LoopingCall(s.readSnmpValue)
l.start(2)
reactor.run()

It's my first twisted program, thank for Jonathan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060706/6dc7eef8/attachment.html>

From yrojass at gmail.com  Fri Jul  7 01:10:20 2006
From: yrojass at gmail.com (=?ISO-8859-1?Q?Yusnel_Rojas_Garc=EDa?=)
Date: Fri, 7 Jul 2006 00:10:20 -0700
Subject: [Twisted-Python] deferred object inside function
Message-ID: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>

how can I make a function which have a deferred object return a value that
depends of the deferred object's result.
example:
how can get the result from the resolver?

from twisted.names import client, dns

def somefunction(somepars):
       r  = client.Resolver('/etc/resolv.conf')
       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
       d.Callbacks(somefunct1, somefunctErr2)
       return ?


cheers one
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060707/44a85ee0/attachment.html>

From jacob at internet24.de  Fri Jul  7 02:44:37 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Fri, 07 Jul 2006 10:44:37 +0200
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
Message-ID: <1152261878.6899.2.camel@localhost.localdomain>

Do you want to do something like the following?

http://twistedmatrix.com/projects/core/documentation/howto/deferredindepth.html#auto12


On Fri, 2006-07-07 at 00:10 -0700, Yusnel Rojas García wrote:
> how can I make a function which have a deferred object return a value
> that depends of the deferred object's result.
> example:
> how can get the result from the resolver?
> 
> from twisted.names import client, dns
> 
> def somefunction(somepars):
>        r  = client.Resolver('/etc/resolv.conf')
>        d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>        d.Callbacks(somefunct1, somefunctErr2) 
>        return ?
> 
> 
> cheers one
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20060707/607eb2a7/attachment.sig>

From duncan.mcgreggor at gmail.com  Fri Jul  7 02:48:11 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Fri, 07 Jul 2006 02:48:11 -0600
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
Message-ID: <44AE1FCB.2060004@gmail.com>

Yusnel Rojas García wrote:

> how can I make a function which have a deferred object return a value that
> depends of the deferred object's result.
> example:
> how can get the result from the resolver?
> 
> from twisted.names import client, dns
> 
> def somefunction(somepars):
>       r  = client.Resolver('/etc/resolv.conf')
>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>       d.Callbacks(somefunct1, somefunctErr2)
>       return ?

Have you read the docs on deferreds? There's a bunch of good ones now,
and you can get to them here:
  http://twistedmatrix.com/projects/core/documentation/howto/index.html

In particular, you want the section on "Low-Level Networking and Event
Loop".

In your example above, you probably want this, instead:

  d.addCallbacks(yourCallback, yourErrback)

As for your question, see if this sums it up:

* You want some data
* The data depends upon the result

If that's correct, then you can only get your data in the callback.
Think about writing a class to handle this, and instead of having a
function return what you want, you could set a class attribute with the
data you're looking for once the callback is fired. Or any other of
hundreds of possible solutions ;-)

d



From robert at gravina.com  Fri Jul  7 03:24:14 2006
From: robert at gravina.com (Robert Gravina)
Date: Fri, 7 Jul 2006 18:24:14 +0900
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <44AE1FCB.2060004@gmail.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
	<44AE1FCB.2060004@gmail.com>
Message-ID: <371DA0C2-3F88-46AA-83A1-13453418528A@gravina.com>

> Yusnel Rojas García wrote:
>
>> how can I make a function which have a deferred object return a  
>> value that
>> depends of the deferred object's result.
>> example:
>> how can get the result from the resolver?
>>
>> from twisted.names import client, dns
>>
>> def somefunction(somepars):
>>       r  = client.Resolver('/etc/resolv.conf')
>>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>>       d.Callbacks(somefunct1, somefunctErr2)
>>       return ?
>
> Have you read the docs on deferreds? There's a bunch of good ones now,
> and you can get to them here:
>   http://twistedmatrix.com/projects/core/documentation/howto/ 
> index.html
>

Yes, I think http://twistedmatrix.com/projects/core/documentation/ 
howto/defer.html is a good place to start also.

While I'm no Twisted expert, I think the main point of confusion you  
are having is here:

d.Callbacks(somefunct1, somefunctErr2)
return ?

The great thing about Deferreds (and Twisted) is that it is  
asynchronous - that means that calls like your DNS query are non- 
blocking - in other words, your program doesn't sit around and wait  
while the DNS query is happening. I think you are expecting your  
program to wait until the DNS query is finished before getting to the  
"return" line... but it will keep on going, and later (at some time,  
maybe a few seconds later) either your "somefunct1" will be called if  
everything worked out, or your "somefunctErr2" will be called if  
there is an error. But, it will get to the return line probably  
before either of those two methods get called.

I really do suggest working through the Twisted Howtos (they are  
*excellent*) and running the example code to see it in action. It  
helps a lot.

Robert

> In particular, you want the section on "Low-Level Networking and Event
> Loop".
>
> In your example above, you probably want this, instead:
>
>   d.addCallbacks(yourCallback, yourErrback)
>
> As for your question, see if this sums it up:
>
> * You want some data
> * The data depends upon the result
>
> If that's correct, then you can only get your data in the callback.
> Think about writing a class to handle this, and instead of having a
> function return what you want, you could set a class attribute with  
> the
> data you're looking for once the callback is fired. Or any other of
> hundreds of possible solutions ;-)
>
> d
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From eprparadocs at gmail.com  Fri Jul  7 05:07:57 2006
From: eprparadocs at gmail.com (Chaz.)
Date: Fri, 07 Jul 2006 07:07:57 -0400
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <371DA0C2-3F88-46AA-83A1-13453418528A@gravina.com>
References: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>	<44AE1FCB.2060004@gmail.com>
	<371DA0C2-3F88-46AA-83A1-13453418528A@gravina.com>
Message-ID: <44AE408D.6050202@gmail.com>

Boy no one seemed to offer the answer. What will happen in your code, if
I am not mistaken, is that somefunct1() will be called with the results
of the resolver. In essense r.resolve() when it returns the deferred
promises to invoke one of the callbacks (either the normal one or error
one). To that call back it will supply an appropriate argument.

You should do a 'return d' from your function. Anyone that issues a
Callback against that deferred will be invoked only if your function
somefunct() uses the defer.

Hope that helps. If not, send me a private email and I can help you get it.

Chaz

Robert Gravina wrote:
>> Yusnel Rojas García wrote:
>>
>>> how can I make a function which have a deferred object return a value
>>> that
>>> depends of the deferred object's result.
>>> example:
>>> how can get the result from the resolver?
>>>
>>> from twisted.names import client, dns
>>>
>>> def somefunction(somepars):
>>>       r  = client.Resolver('/etc/resolv.conf')
>>>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
>>>       d.Callbacks(somefunct1, somefunctErr2)
>>>       return ?
>>
>> Have you read the docs on deferreds? There's a bunch of good ones now,
>> and you can get to them here:
>>   http://twistedmatrix.com/projects/core/documentation/howto/index.html
>>
> 
> Yes, I think
> http://twistedmatrix.com/projects/core/documentation/howto/defer.html is
> a good place to start also.
> 
> While I'm no Twisted expert, I think the main point of confusion you are
> having is here:
> 
> d.Callbacks(somefunct1, somefunctErr2)
> return ?
> 
> The great thing about Deferreds (and Twisted) is that it is asynchronous
> - that means that calls like your DNS query are non-blocking - in other
> words, your program doesn't sit around and wait while the DNS query is
> happening. I think you are expecting your program to wait until the DNS
> query is finished before getting to the "return" line... but it will
> keep on going, and later (at some time, maybe a few seconds later)
> either your "somefunct1" will be called if everything worked out, or
> your "somefunctErr2" will be called if there is an error. But, it will
> get to the return line probably before either of those two methods get
> called.
> 
> I really do suggest working through the Twisted Howtos (they are
> *excellent*) and running the example code to see it in action. It helps
> a lot.
> 
> Robert
> 
>> In particular, you want the section on "Low-Level Networking and Event
>> Loop".
>>
>> In your example above, you probably want this, instead:
>>
>>   d.addCallbacks(yourCallback, yourErrback)
>>
>> As for your question, see if this sums it up:
>>
>> * You want some data
>> * The data depends upon the result
>>
>> If that's correct, then you can only get your data in the callback.
>> Think about writing a class to handle this, and instead of having a
>> function return what you want, you could set a class attribute with the
>> data you're looking for once the callback is fired. Or any other of
>> hundreds of possible solutions ;-)
>>
>> d
>>
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 





From sean at twistedmatrix.com  Fri Jul  7 15:01:10 2006
From: sean at twistedmatrix.com (Wilton Conklin)
Date: Fri, 07 Jul 2006 16:01:10 -0500
Subject: [Twisted-Python] Want the degree but can't find the time?
Message-ID: <hqmnznoVZBIHEGsean@twistedmatrix.com>


UNIVERSITY DIPLOMAS

Obtain a prosperous future, money-earning power and the
prestige that comes with having the career position you've
always dreamed of. Diplomas from prestigious non-accredited
universities based on your present knowledge and life experience

If you qualify, no tests, classes, books or examinations will be 
required.

Bachelors', Masters', MBA's, Doctorate & Ph.D. degrees available in 
your field.

CONFIDENTIALITY ASSYRED

CALL NOW TO RECEIVE YOUR DIPLOMA WITHIN 2 WEEKS

1-650-456-2500

Call 24HRS, 7 days a week, including Sundays and holidays







From glyph at divmod.com  Fri Jul  7 18:18:43 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Fri, 7 Jul 2006 20:18:43 -0400
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <7f9d04fe0607070010r1ab1c3e6nb8999ee8871e76d0@mail.gmail.com>
Message-ID: <20060708001843.29014.1344444676.divmod.quotient.27203@ohm>

On Fri, 7 Jul 2006 00:10:20 -0700, Yusnel Rojas García <yrojass at gmail.com> wrote:

>from twisted.names import client, dns
>
>def somefunction(somepars):
>       r  = client.Resolver('/etc/resolv.conf')
                             ^ Resolver takes an IP address here,
                               not a filename.
>       d = r.resolve(dns.Query('www.example.com', dns.MX, dns.IN))
              ^ Resolver does not have a "resolve" method.
                You can read the API documentation for IResolver here:
    http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IResolver.html
                Perhaps you meant "lookupMailExchange"?
>       d.Callbacks(somefunct1, somefunctErr2)
          ^ Deferreds do not have this method.
            You can read the API documentation for Deferred here:
   http://twistedmatrix.com/documents/current/api/twisted.internet.defer.html
            Perhaps you meant "addCallbacks"?
>       return ?
               ^ what you want to return here is 'd'
               That way callers of this function can get the results, but they have to wait for the results as well.

The main thing you want to do, e.g. stop your program and wait in-place for results to appear, is completely impossible.  I've watched a number of people go through this process, and I can say with some certainty that what you need to do is focus on understanding why it's impossible, not searching for esoteric ways to make it happen.  If you _do_ manage to do something that appears to be what you want, it will be wrong in surprising and upsetting ways fairly quickly.  If you are just looking for a way to mess around interactively with Deferred objects and their results, run twisted/conch/stdio.py.  Here's a screenshot:

http://twistedmatrix.com/users/glyph/screenshots/twisted-shell-resolving-a-name.png

I've also written a brief example of what you want to do that actually works.  Notice the parts of the code where the result does not exist vs. those where it does.  Keep in mind that *the reactor needs to do work*, such as sending and receiving traffic, in order to produce a result; it's impossible to produce one immediately.

# ---- cut here ----

# We don't need to build queries ourselves, just a resolver.
from twisted.names.client import Resolver

theResolver = Resolver("/etc/resolv.conf")

def getMX(hostname="twistedmatrix.com", r=theResolver):
    d = r.lookupMailExchange(hostname)
    # We're going to look up twistedmatrix.com's address, but we don't have a
    # result *now*...
    def showAddress((answers, authority, additional)):
        # but we _do_ have a result *now*.  the Deferred calls this function
        # when it gets a result, because (see below) ...
        print 'Got', len(answers), 'results.'
        for resourceRecordHeader in answers:
            mxRecord = resourceRecordHeader.payload
            dnsName = mxRecord.name
            nameString = dnsName.name
            print "one answer: ", nameString
        # pass through the values we were given in case callers of this
        # function want to use them.
        return (answers, authority, additional)
    # here we tell the Deferred: when you get a successful result, call that
    # function.
    d.addCallback(showAddress)
    # We return the Deferred so that callers of this function can act upon it.
    return d

from twisted.internet import reactor

# Kick off our code: rather than addCallback, we use addBoth here, because we
# want to stop the reactor whether it fails or not.  If we only wanted to act
# in case the DNS operation failed, we could use addErrback instead.
getMX().addBoth(lambda ignored: reactor.stop())

# You don't have to do this in most Twisted programs, because they will be
# running in the reactor already, and you generally don't want to stop the
# reactor if your program is supposed to keep running.

reactor.run()




From glyph at divmod.com  Fri Jul  7 18:36:59 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Fri, 7 Jul 2006 20:36:59 -0400
Subject: [Twisted-Python] deferred object inside function
In-Reply-To: <20060708001843.29014.1344444676.divmod.quotient.27203@ohm>
Message-ID: <20060708003659.29014.1957182293.divmod.quotient.27223@ohm>

On Fri, 7 Jul 2006 20:18:43 -0400, glyph at divmod.com wrote:
>On Fri, 7 Jul 2006 00:10:20 -0700, Yusnel Rojas García <yrojass at gmail.com> 
>wrote:
>>from twisted.names import client, dns
>>
>>def somefunction(somepars):
>>       r  = client.Resolver('/etc/resolv.conf')
>                             ^ Resolver takes an IP address here,
>                               not a filename.
                                ^ this comment is incorrect, please ignore it.



From dreid at dreid.org  Fri Jul  7 23:18:26 2006
From: dreid at dreid.org (David Reid)
Date: Fri, 07 Jul 2006 22:18:26 -0700
Subject: [Twisted-Python] Bay Area Twisted Sprint - July 15th and 16th
Message-ID: <44AF4022.5050002@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

This is the official announcement of the Bay Area Twisted Sprint.  It is
to be held on July 15th and 16th at the offices of Three Rings Design
Inc. (the people who brought you that wonderful tool of procrastination
"Puzzle Pirates")  which are located at:

612 Howard St, Suite 500
San Francisco, CA 94150
Google Map: http://tinyurl.com/pb588

The sprint will last from 10am-8pm on Saturday the 15th and Sunday the
16th, and will focus on closing outstanding bugs (perhaps followed by
some sort of maintenance releases.) If you're going to be attending the
sprint reply to this email so that our gracious hosts have some idea of
what to expect.

Thanks
- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEr0AirsrO6aeULcgRAvgVAKCJkgO7r/4Bstck16GS3VaYArRUnACfXv8s
sE45pM4dGEdPAQ5hok4IyCs=
=gfYe
-----END PGP SIGNATURE-----



From wgwigw at gmail.com  Sat Jul  8 05:22:19 2006
From: wgwigw at gmail.com (wang wei)
Date: Sat, 8 Jul 2006 19:22:19 +0800
Subject: [Twisted-Python] how can I Scheduling a command?
Message-ID: <dbeb95830607080422yd884760vd0ca4ff8acaae37f@mail.gmail.com>

hi, is there any modules in twisted to do such things? at 9:00 am post a
mail, at 4:00 pm, to give me report? thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060708/cfbb7b98/attachment.html>

From stephane_brault at yahoo.fr  Sat Jul  8 06:17:52 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Sat, 8 Jul 2006 12:17:52 +0000 (GMT)
Subject: [Twisted-Python] how can I Scheduling a command?
In-Reply-To: <dbeb95830607080422yd884760vd0ca4ff8acaae37f@mail.gmail.com>
Message-ID: <20060708121752.42545.qmail@web26511.mail.ukl.yahoo.com>

Hi,
 I did just that, basing my code on the scheduler Stephen Richter has done some months ago to integrate twisted and zope (google twisted zope integration). Its' a little buggy but I debugged it, if you wish I'll send you my code.
 
 Stéphane

----- Message d'origine ----
De : wang wei <wgwigw at gmail.com>
À : twisted-python at twistedmatrix.com
Envoyé le : Samedi, 8 Juillet 2006, 1h22mn 19s
Objet : [Twisted-Python] how can I Scheduling a command?

hi, is there any modules in twisted to do such things? at 9:00 am post a mail, at 4:00 pm, to give me report? thanks.
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060708/6773c765/attachment.html>

From mike at mkp.ca  Sat Jul  8 09:55:55 2006
From: mike at mkp.ca (Mike Pelletier)
Date: Sat, 8 Jul 2006 11:55:55 -0400
Subject: [Twisted-Python] Insults, Can't write from connectionMade?
Message-ID: <200607081155.56186.mike@mkp.ca>

Hello, twisted Twisted coders.  I am trying to get familiarised with 
twisted.conch.insults.  I've run into some behaviour I cannot explain.  
Attached is a .tac including the following excerpt:

class MyTerminalProtocol(insults.TerminalProtocol):
    width = 80
    height = 24
    
    def connectionMade(self):
        self.terminalSize(self.width, self.height)
        self.terminal.write(" world\n")

    def terminalSize(self, width, height):
        self.width, self.height = width, height
        self.terminal.eraseDisplay()
        self.terminal.write("Hello,")

When a connection is made, the screen is cleared and "Hello," is written, 
but " world\n" is not (or at least it never appears on the terminal).  Why 
is "world\n" not written?

Oddly (or perhaps revealingly for someone with more clues than me), when in a 
previous version I did not use TelnetTransport and TelnetBootstrapProtocol, I 
was able to write just fine from connectionMade.

TIA for a liberal and violent application of the clue stick.

Mike.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: insults_proto.tac
Type: application/x-python
Size: 1102 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20060708/13b9d5aa/attachment-0002.bin>

From exarkun at divmod.com  Sat Jul  8 10:31:55 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sat, 8 Jul 2006 12:31:55 -0400
Subject: [Twisted-Python] Insults, Can't write from connectionMade?
In-Reply-To: <200607081155.56186.mike@mkp.ca>
Message-ID: <20060708163155.29014.327773380.divmod.quotient.28095@ohm>

On Sat, 8 Jul 2006 11:55:55 -0400, Mike Pelletier <mike at mkp.ca> wrote:
>Hello, twisted Twisted coders.  I am trying to get familiarised with
>twisted.conch.insults.  I've run into some behaviour I cannot explain.
>Attached is a .tac including the following excerpt:
>
>class MyTerminalProtocol(insults.TerminalProtocol):
>    width = 80
>    height = 24
>
>    def connectionMade(self):
>        self.terminalSize(self.width, self.height)
>        self.terminal.write(" world\n")
>
>    def terminalSize(self, width, height):
>        self.width, self.height = width, height
>        self.terminal.eraseDisplay()
>        self.terminal.write("Hello,")
>
>When a connection is made, the screen is cleared and "Hello," is written,
>but " world\n" is not (or at least it never appears on the terminal).  Why
>is "world\n" not written?

It actually is written:

>>> import socket
>>> s = socket.socket()
>>> s.connect(('localhost', 1977))
>>> s.recv(1024)
'\xff\xfd"\xff\xfd\x1f\xff\xfd\x03\xff\xfb\x01\x1b[2JHello, world\r\r\r\n'

I'm not sure why "Hello," shows up in an xterm but " world" doesn't: it
may be a terminal emulation bug or some legitimate interaction between
all the control sequences included there.  But clearly there is a problem
here somewhere - your \n is being translated into \r\r\r\n.

Could you file a ticket in the tracker and attach this tac file?

>
>Oddly (or perhaps revealingly for someone with more clues than me), when in a
>previous version I did not use TelnetTransport and TelnetBootstrapProtocol, I
>was able to write just fine from connectionMade.
>
>TIA for a liberal and violent application of the clue stick.
>

Jean-Paul



From matusis at matusis.com  Sat Jul  8 13:31:51 2006
From: matusis at matusis.com (Alec Matusis)
Date: Sat, 8 Jul 2006 12:31:51 -0700
Subject: [Twisted-Python] UDP question
Message-ID: <E1FzIX0-0006Gi-00@pyramid.twistedmatrix.com>

I have a question about using UDP in twisted. I hope people will forgive my
naiveté, since my background is in physics, not in CS, so I am self-taught
and may be missing something obvious.

I would like a server to send UDP broadcasts to multiple clients, where all
clients receive the same broadcast. 

>From what I understood from
http://twistedmatrix.com/projects/core/documentation/howto/udp.html
Multicast UDP section, one can have a client broadcast the same UDP packet
to multiple servers, each server listening on the same port for this
multicast.
This is unacceptable for me, since all of this must happen on the same
machine, so I cannot bind multiple servers to the same port on one box. So I
am trying to implement a reverse scenario, where the server will do the
multicast to clients, but all clients and the server may (or may not) be
running on the same box.

How can I do this in twisted? Could you give me and example? Thanks.






From jarrod at vertigrated.com  Sat Jul  8 15:57:24 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Sat, 8 Jul 2006 17:57:24 -0400
Subject: [Twisted-Python] UDP question
In-Reply-To: <E1FzIX0-0006Gi-00@pyramid.twistedmatrix.com>
References: <E1FzIX0-0006Gi-00@pyramid.twistedmatrix.com>
Message-ID: <2389d4730607081457k4b5b6879p84f911616cfb18f9@mail.gmail.com>

On 7/8/06, Alec Matusis <matusis at matusis.com> wrote:
>
> I have a question about using UDP in twisted. I hope people will forgive
> my
> naiveté, since my background is in physics, not in CS, so I am self-taught
> and may be missing something obvious.
>
> I would like a server to send UDP broadcasts to multiple clients, where
> all
> clients receive the same broadcast.
>
> >From what I understood from
> http://twistedmatrix.com/projects/core/documentation/howto/udp.html
> Multicast UDP section, one can have a client broadcast the same UDP packet
> to multiple servers, each server listening on the same port for this
> multicast.
> This is unacceptable for me, since all of this must happen on the same
> machine, so I cannot bind multiple servers to the same port on one box. So
> I
> am trying to implement a reverse scenario, where the server will do the
> multicast to clients, but all clients and the server may (or may not) be
> running on the same box.


actually you can, you need to read up on how MULTICAST works.
It isn't the same thing as uni-cast UDP.
You can have as many processes listening on a single MULTICAST UDP port as
you like.

ZeroConf / Apple Bonjour ( formerly Rendezous ) usings multicast udp to do
just that.


How can I do this in twisted? Could you give me and example? Thanks.
>
>


-- 
If you don't know what you want, you probably need a nap.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060708/893c5ca2/attachment.html>

From matusis at matusis.com  Sat Jul  8 16:54:43 2006
From: matusis at matusis.com (Alec Matusis)
Date: Sat, 8 Jul 2006 15:54:43 -0700
Subject: [Twisted-Python] UDP question
In-Reply-To: <2389d4730607081457k4b5b6879p84f911616cfb18f9@mail.gmail.com>
Message-ID: <E1FzLhL-0000NH-00@pyramid.twistedmatrix.com>

>You can have as many processes listening on a single MULTICAST UDP port as
you like. 

Well, I am trying to run this example multicast UDP server:
 
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
from twisted.application.internet import MulticastServer
 
class MulticastServerUDP(DatagramProtocol):
    def startProtocol(self):
        print 'Started Listening'
        # Join a specific multicast group
        self.transport.joinGroup('225.0.0.1')
 
    def datagramReceived(self, datagram, address):
            self.transport.write("data",address)

reactor.listenMulticast(8005, MulticastServerUDP())
reactor.run()
 
when I try running more that one instance of this on the same machine I get
 
twisted.internet.error.CannotListenError: Couldn't listen on any:8005: (98,
'Address already in use').
 
So my quiestion is how can I have multiple processes listening for multicast
on the same machine?

________________________________

From: twisted-python-bounces at twistedmatrix.com
[mailto:twisted-python-bounces at twistedmatrix.com] On Behalf Of jarrod
roberson
Sent: Saturday, July 08, 2006 2:57 PM
To: Twisted general discussion
Subject: Re: [Twisted-Python] UDP question




On 7/8/06, Alec Matusis <matusis at matusis.com> wrote: 

	I have a question about using UDP in twisted. I hope people will
forgive my
	naiveté, since my background is in physics, not in CS, so I am
self-taught
	and may be missing something obvious.
	
	I would like a server to send UDP broadcasts to multiple clients,
where all 
	clients receive the same broadcast.
	
	>From what I understood from
	http://twistedmatrix.com/projects/core/documentation/howto/udp.html
<http://twistedmatrix.com/projects/core/documentation/howto/udp.html> 
	Multicast UDP section, one can have a client broadcast the same UDP
packet
	to multiple servers, each server listening on the same port for this
	multicast.
	This is unacceptable for me, since all of this must happen on the
same 
	machine, so I cannot bind multiple servers to the same port on one
box. So I
	am trying to implement a reverse scenario, where the server will do
the
	multicast to clients, but all clients and the server may (or may
not) be 
	running on the same box.


actually you can, you need to read up on how MULTICAST works.
It isn't the same thing as uni-cast UDP.
You can have as many processes listening on a single MULTICAST UDP port as
you like. 

ZeroConf / Apple Bonjour ( formerly Rendezous ) usings multicast udp to do
just that.
 


	How can I do this in twisted? Could you give me and example? Thanks.
	
	




-- 
If you don't know what you want, you probably need a nap.





From jarrod at vertigrated.com  Sat Jul  8 18:25:12 2006
From: jarrod at vertigrated.com (jarrod roberson)
Date: Sat, 8 Jul 2006 20:25:12 -0400
Subject: [Twisted-Python] UDP question
In-Reply-To: <44b037bc.132b9e32.4e1a.ffff8a05SMTPIN_ADDED@mx.gmail.com>
References: <2389d4730607081457k4b5b6879p84f911616cfb18f9@mail.gmail.com>
	<44b037bc.132b9e32.4e1a.ffff8a05SMTPIN_ADDED@mx.gmail.com>
Message-ID: <2389d4730607081725g15df912an87f948809f2d67dc@mail.gmail.com>

On 7/8/06, Alec Matusis <matusis at matusis.com> wrote:
>
> >You can have as many processes listening on a single MULTICAST UDP port
> as
> you like.
>
> Well, I am trying to run this example multicast UDP server:
>
> from twisted.internet.protocol import DatagramProtocol
> from twisted.internet import reactor
> from twisted.application.internet import MulticastServer
>
> class MulticastServerUDP(DatagramProtocol):
>     def startProtocol(self):
>         print 'Started Listening'
>         # Join a specific multicast group
>         self.transport.joinGroup('225.0.0.1')
>
>     def datagramReceived(self, datagram, address):
>             self.transport.write("data",address)
>
> reactor.listenMulticast(8005, MulticastServerUDP())
> reactor.run()
>
> when I try running more that one instance of this on the same machine I
> get
>
> twisted.internet.error.CannotListenError: Couldn't listen on any:8005:
> (98,
> 'Address already in use').
>
> So my quiestion is how can I have multiple processes listening for
> multicast
> on the same machine?
>
> ________________________________
>
> quick google for "udp twisted listen multiple" reveals



def startListening(self):
        reactor.listenMulticast(5353, self, maxPacketSize=1024,
                                listenMultiple=True)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060708/e482c624/attachment.html>

From wgwigw at gmail.com  Sat Jul  8 20:24:23 2006
From: wgwigw at gmail.com (wang wei)
Date: Sun, 9 Jul 2006 10:24:23 +0800
Subject: [Twisted-Python] how can I Scheduling a command?
Message-ID: <dbeb95830607081924x5689543fu3df06f522125e97f@mail.gmail.com>

hi Stéphane, Great! if it doesn't bother you, could I have a look? thanks.
                                         Wang Wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060709/bddd2095/attachment.html>

From exarkun at twistedmatrix.com  Sat Jul  8 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 09 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1152421501.93.1729040184@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-02 through 2006-07-09
Bugs opened: 18    Bugs closed: 17  Total open bugs: 643 (+1)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +1  |Highest:  -4          |Conch:     +2          
|Enhancement:  -1  |High:     +1          |Core:      -1          
|Task:         +1  |Normal:   +2          |Mail:      +0          
                   |Low:      +2          |Pydoctor:  -1          
                                          |Trial:     -4          
                                          |Web:       +1          
                                          |Web2:      +2          
                                          |Website:   +2          


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1891] twisted.mail.smtp.SMTP incorrectly announces itself as ESMTP (opened by exarkun) (CLOSED, fixed)
    defect          mail       http://twistedmatrix.com/trac/ticket/1891

[#1892] Python 2.5 uses "<module>" instead of "?" as the default filename for code objects (opened by exarkun) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1892

[#1897] Docstrings should not affect test display (opened by jml) (CLOSED, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1897

                    ===== High =====
[#1896] Put giant warnings about obsoleteness on obsolete webpages (opened by exarkun)
    task            website    http://twistedmatrix.com/trac/ticket/1896

[#1906] twisted.web2 tests don't work in cleantests-1883 (opened by jml)
    defect          web2       http://twistedmatrix.com/trac/ticket/1906

                    ===== Normal =====
[#1893] formatFailure cannot deal with exotic variable names (opened by mthuurne)
    defect          web        http://twistedmatrix.com/trac/ticket/1893

[#1894] Need to include web2 in setup.py (opened by edsuom) (CLOSED, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1894

[#1895] Add Native twisted.web2.xmlrpc Proxy Support (opened by oubiwann)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1895

[#1898] web2 installation failure on win32 (opened by ghazel) (CLOSED, invalid)
    defect          web2       http://twistedmatrix.com/trac/ticket/1898

[#1899] twisted still uses old-style classes (opened by wrstlprmpft) (CLOSED, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1899

[#1901] misdefined test method kills trial with an unhandled exception (opened by exarkun)
    defect          trial      http://twistedmatrix.com/trac/ticket/1901

[#1902] compatibility work-around for commercial SSH 2.0.12 misbehaviours (opened by matthubb)
    enhancement     conch      http://twistedmatrix.com/trac/ticket/1902

[#1903] Twisted doesn't reset timeout when getting POST data (opened by moshez)
    defect          web        http://twistedmatrix.com/trac/ticket/1903

[#1904] Passive port ranges are not settable in t.p.ftp (opened by krp)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1904

[#1905] twisted.web.client.getPage deferred does not errback in the case of e.g. a 500 error code (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1905

[#1907] Terminal control problem? (opened by Nerdbeard)
    defect          conch      http://twistedmatrix.com/trac/ticket/1907

                    ===== Low =====
[#1890] move examples from core into correct sub-packages (opened by itamarst)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1890

[#1900] Error in documentation online (opened by packo)
    enhancement     website    http://twistedmatrix.com/trac/ticket/1900



Closed Bugs
______________________
                    ===== Highest =====
[#661 ] Remove t.e.xmlreflector before Twisted 2.5 (opened by davep, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/661

[#1891] twisted.mail.smtp.SMTP incorrectly announces itself as ESMTP (opened by exarkun, closed by exarkun, fixed)
    defect          mail       http://twistedmatrix.com/trac/ticket/1891

[#1371] Possible race condition in test_tcp (opened by jml, closed by jml, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1371

[#1892] Python 2.5 uses "<module>" instead of "?" as the default filename for code objects (opened by exarkun, closed by exarkun, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1892

[#1871] Instantiating twisted.trial.unittest.TestCase with no arguments raises nasty exception (opened by exarkun, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1871

[#1869] twisted.trial.unittest.TestCase.failUnlessFailure should provide more information (opened by exarkun, closed by jml, fixed)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1869

[#1897] Docstrings should not affect test display (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1897

                    ===== High =====
[#1887] Trial man page is extremely out of date (opened by jml, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1887

                    ===== Normal =====
[#1889] twisted.web.microdom should be moved to twisted.python.microdom (opened by jerub, closed by exarkun, invalid)
    enhancement     web        http://twistedmatrix.com/trac/ticket/1889

[#1631] Make tables showing listings of members of packages, classes, etc, sortable (opened by moof, closed by mwh, fixed)
    enhancement     pydoctor   http://twistedmatrix.com/trac/ticket/1631

[#103 ] $100 bounty - performance monitoring tool (opened by glyph, closed by glyph, invalid)
    enhancement     core       http://twistedmatrix.com/trac/ticket/103

[#1894] Need to include web2 in setup.py (opened by edsuom, closed by exarkun, invalid)
    defect          core       http://twistedmatrix.com/trac/ticket/1894

[#1787] Last line of trial's traceback output is often difficult to read (opened by jml, closed by jml, invalid)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1787

[#1803] unittest  using adbapi hang on exit (opened by thomasvs, closed by jml, duplicate)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1803

[#1698] Version option for Trial (opened by jml, closed by jml, worksforme)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1698

[#1898] web2 installation failure on win32 (opened by ghazel, closed by jknight, invalid)
    defect          web2       http://twistedmatrix.com/trac/ticket/1898

[#1899] twisted still uses old-style classes (opened by wrstlprmpft, closed by jknight, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1899





From stephane_brault at yahoo.fr  Sun Jul  9 04:13:33 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Sun, 9 Jul 2006 10:13:33 +0000 (GMT)
Subject: [Twisted-Python] how can I Scheduling a command?
In-Reply-To: <dbeb95830607081924x5689543fu3df06f522125e97f@mail.gmail.com>
Message-ID: <20060709101333.40169.qmail@web26512.mail.ukl.yahoo.com>

Here is the code,
 you'll have Stephen's version in the scheduler folder and mine in the myversion folder.
 My version is essentially Stephen's one but without the interfaces and the cron task debugged. There's also a service example, inspired frome TimeService but able to run several tasks. It can be improved, especially by adding the capacity to add tasks while it's running. Don't hesitate to ask questions.
 
 Stéphane

----- Message d'origine ----
De : wang wei <wgwigw at gmail.com>
À : twisted-python at twistedmatrix.com
Envoyé le : Dimanche, 9 Juillet 2006, 4h24mn 23s
Objet : Re : [Twisted-Python] how can I Scheduling a command?

hi Stéphane, Great! if it doesn't bother you, could I have a look? thanks.
                                         Wang Wei

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060709/4d6ec54d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: scheduler.rar
Type: application/octet-stream
Size: 10977 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20060709/4d6ec54d/attachment-0002.obj>

From wgwigw at gmail.com  Mon Jul 10 01:10:23 2006
From: wgwigw at gmail.com (wang wei)
Date: Mon, 10 Jul 2006 15:10:23 +0800
Subject: [Twisted-Python] how can I Scheduling a command?
Message-ID: <dbeb95830607100010o56a38013t1793269d021d2f7a@mail.gmail.com>

hi Stéphane, I read codes moring, and I think I catch the idea, if you
permit I will modify the code a little to fit in my program. thanks for
help.:)
                                                         Wang Wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060710/07c29620/attachment.html>

From stephane_brault at yahoo.fr  Mon Jul 10 03:40:25 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 10 Jul 2006 09:40:25 +0000 (GMT)
Subject: [Twisted-Python] how can I Scheduling a command?
In-Reply-To: <dbeb95830607100010o56a38013t1793269d021d2f7a@mail.gmail.com>
Message-ID: <20060710094025.85599.qmail@web26512.mail.ukl.yahoo.com>

By all means, do whatever you see fit ;-)
 
 Stéphane

----- Message d'origine ----
De : wang wei <wgwigw at gmail.com>
À : twisted-python at twistedmatrix.com
Envoyé le : Lundi, 10 Juillet 2006, 9h10mn 23s
Objet : Re : [Twisted-Python] how can I Scheduling a command?

hi Stéphane, I read codes moring, and I think I catch the idea, if you permit I will modify the code a little to fit in my program. thanks for help.:)
                                                         Wang Wei
_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060710/3330dc3a/attachment.html>

From michele.petrazzo at unipex.it  Mon Jul 10 08:43:12 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Mon, 10 Jul 2006 16:43:12 +0200
Subject: [Twisted-Python] tcp error
Message-ID: <44B26780.3090602@unipex.it>

Sometime I receive a strange error:

   File "hylaproto_t.pyo", line 209, in _RetrStatus
   File "twisted\protocols\ftp.pyo", line 2190, in list
   File "twisted\protocols\ftp.pyo", line 2006, in receiveFromConnection
   File "twisted\protocols\ftp.pyo", line 2081, in _openDataConnection
   File "twisted\protocols\ftp.pyo", line 1838, in queueCommand
   File "twisted\protocols\ftp.pyo", line 1819, in sendNextCommand
   File "twisted\protocols\ftp.pyo", line 2128, in generatePortCommand
   File "twisted\internet\tcp.pyo", line 591, in getHost
AttributeError: 'Client' object has no attribute 'socket'


At line 209 in hylaproto_t, I have:
self._myClient.list('status', proto)

self._myClient are an FTPClient instance.

What can be the problem?

Thanks,
Michele



From aljosa.mohorovic at gmail.com  Mon Jul 10 09:02:54 2006
From: aljosa.mohorovic at gmail.com (Aljosa Mohorovic)
Date: Mon, 10 Jul 2006 17:02:54 +0200
Subject: [Twisted-Python] streaming video
Message-ID: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>

i'm looking for a way to stream video in python (streaming server for
video captured from camera), any tips/examples/docs for doing this
with twisted?
i'm asking because i have no experience with twisted and any help is
appreciated.

also, is it possible to use py2exe to create executable files. if
using py2exe is not a problem, what is recommended way of using py2exe
& twisted?

Aljosa Mohorovic



From jacob at internet24.de  Mon Jul 10 09:26:12 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Mon, 10 Jul 2006 17:26:12 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B26780.3090602@unipex.it>
References: <44B26780.3090602@unipex.it>
Message-ID: <1152545172.13526.39.camel@localhost.localdomain>

Your line numbers don't seem to match my plain twisted 2.4.0's...but the
problem seems to occur on either of the last two lines of
generatePortCommand
in twisted.protocols.ftp

        factory = FTPDataPortFactory()
        factory.protocol = portCmd.protocol
        listener = reactor.listenTCP(0, factory)
        factory.port = listener

        # Ensure we close the listening port if something goes wrong
        def listenerFail(error, listener=listener):
            if listener.connected:
                listener.loseConnection()
            return error
        portCmd.fail = listenerFail


        # Construct crufty FTP magic numbers that represent host &
port   
        host = self.transport.getHost().host <<<<
        port = listener.getHost().port      <<<<<


Maybe either your control connection is not opened correctly
(or already closed again), tcp.Port.socket only exists
when the Port is actually connected.... 

Or, maybe your client data port couldn't be opened
properly (possibly no more available ports?)....


On Mon, 2006-07-10 at 16:43 +0200, Michele Petrazzo wrote:
> Sometime I receive a strange error:
> 
>    File "hylaproto_t.pyo", line 209, in _RetrStatus
>    File "twisted\protocols\ftp.pyo", line 2190, in list
>    File "twisted\protocols\ftp.pyo", line 2006, in receiveFromConnection
>    File "twisted\protocols\ftp.pyo", line 2081, in _openDataConnection
>    File "twisted\protocols\ftp.pyo", line 1838, in queueCommand
>    File "twisted\protocols\ftp.pyo", line 1819, in sendNextCommand
>    File "twisted\protocols\ftp.pyo", line 2128, in generatePortCommand
>    File "twisted\internet\tcp.pyo", line 591, in getHost
> AttributeError: 'Client' object has no attribute 'socket'
> 
> 
> At line 209 in hylaproto_t, I have:
> self._myClient.list('status', proto)
> 
> self._myClient are an FTPClient instance.
> 
> What can be the problem?
> 
> Thanks,
> Michele
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20060710/e81b0d27/attachment.sig>

From fairwinds at eastlink.ca  Mon Jul 10 12:03:36 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Mon, 10 Jul 2006 15:03:36 -0300
Subject: [Twisted-Python] Starting services
In-Reply-To: <bff8eeef0601191516t52c8960cy451da7dd0fefa30c@mail.gmail.com>
References: <43CF8C95.4070008@pollenation.net>
	<bff8eeef0601191516t52c8960cy451da7dd0fefa30c@mail.gmail.com>
Message-ID: <44B29678.1010406@eastlink.ca>

Hi. I am coming back to resolve a service starting issue and wanted to 
bounce this around to see it this is feasible.

First I want all services contained in a multiservice however my main 
service must be fully initialized before starting the other services. It 
is a pb client and I want to ensure I have a server connection first 
before the other services from the first once it starts.

To do this I am thinking i can attempt start the main service first but 
run as a separate service (not a child of multiservice)

If this main first service starts successfully, I will add it to a 
multiservice with the other services, then start the multiservice.

First issue is that starting a service does not provide a deferred and I
need to know I have made a connection to the pb server. Second is 
whether I can add a running service to a multiservice instance. Can 
someone advise on the feasibility of this approach. Many thanks.

Regards,
David



From michele.petrazzo at unipex.it  Tue Jul 11 00:58:21 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Tue, 11 Jul 2006 08:58:21 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <1152545172.13526.39.camel@localhost.localdomain>
References: <44B26780.3090602@unipex.it>
	<1152545172.13526.39.camel@localhost.localdomain>
Message-ID: <44B34C0D.1090604@unipex.it>

Thomas Jacob wrote:
> Your line numbers don't seem to match my plain twisted 2.4.0's...

Ops, I was at 2.2 on my win machine, sorry.

> but the problem seems to occur on either of the last two lines of 
> generatePortCommand in twisted.protocols.ftp
> 

<-cut->

> 
> Maybe either your control connection is not opened correctly (or 
> already closed again), tcp.Port.socket only exists when the Port is 
> actually connected....
> 

Can be, I think, the connection closed by my code: into it, I close
connection ( self._myClient.quit() ) when I receive an error
(addErrback), but I have a "callLater" that are always running, so when
called, it run the code that can generate that error.
I think that I have to control the "internal connection state" before
make a call to the ftp client. I'm right? Or is there a method for say
to twisted to don't make calls (with the ftp protocol) when it aren't
connected?

P.s. Now I'm switching to twisted 2.4 :)

Thanks,
Michele



From jacob at internet24.de  Tue Jul 11 07:02:08 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Tue, 11 Jul 2006 15:02:08 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B34C0D.1090604@unipex.it>
References: <44B26780.3090602@unipex.it>
	<1152545172.13526.39.camel@localhost.localdomain>
	<44B34C0D.1090604@unipex.it>
Message-ID: <1152622928.13526.58.camel@localhost.localdomain>

> Can be, I think, the connection closed by my code: into it, I close
> connection ( self._myClient.quit() ) when I receive an error
> (addErrback), but I have a "callLater" that are always running, so when
> called, it run the code that can generate that error.
> I think that I have to control the "internal connection state" before
> make a call to the ftp client. I'm right? Or is there a method for say
> to twisted to don't make calls (with the ftp protocol) when it aren't
> connected?

Don't know, I am an (enthusiastic) twisted newbie as well, but
probably you should do the first thing. You could for instance
test whether or not <some tcp port>.connected is set, before
you call ftp client functions functions.... that
is check <ftpclient>.transport.connected...



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20060711/a03fd327/attachment.sig>

From exarkun at divmod.com  Tue Jul 11 07:22:34 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 11 Jul 2006 09:22:34 -0400
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B26780.3090602@unipex.it>
Message-ID: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>

On Mon, 10 Jul 2006 16:43:12 +0200, Michele Petrazzo <michele.petrazzo at unipex.it> wrote:
>Sometime I receive a strange error:
>
>   File "hylaproto_t.pyo", line 209, in _RetrStatus
>   File "twisted\protocols\ftp.pyo", line 2190, in list
>   File "twisted\protocols\ftp.pyo", line 2006, in receiveFromConnection
>   File "twisted\protocols\ftp.pyo", line 2081, in _openDataConnection
>   File "twisted\protocols\ftp.pyo", line 1838, in queueCommand
>   File "twisted\protocols\ftp.pyo", line 1819, in sendNextCommand
>   File "twisted\protocols\ftp.pyo", line 2128, in generatePortCommand
>   File "twisted\internet\tcp.pyo", line 591, in getHost
>AttributeError: 'Client' object has no attribute 'socket'
>
>
>At line 209 in hylaproto_t, I have:
>self._myClient.list('status', proto)
>
>self._myClient are an FTPClient instance.
>
>What can be the problem?

This is most likely a bug in FTPClient.  Could you file a ticket at
http://twistedmatrix.com/trac/ (you need to register an account before
the new ticket link will appear)?

By only looking at the traceback, it is not entirely clear where the
problem lies.  Please include a minimal self-contained example which
reproduces this traceback or a unit test which fails because of this
problem.

Jean-Paul



From anthony at interlink.com.au  Tue Jul 11 08:19:37 2006
From: anthony at interlink.com.au (Anthony Baxter)
Date: Wed, 12 Jul 2006 00:19:37 +1000
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <200607120019.39647.anthony@interlink.com.au>

On Tuesday 11 July 2006 01:02, Aljosa Mohorovic wrote:
> i'm looking for a way to stream video in python (streaming server
> for video captured from camera), any tips/examples/docs for doing
> this with twisted?
> i'm asking because i have no experience with twisted and any help
> is appreciated.

You could use something like RTSP and RTP. RTSP is a pretty easy 
protocol to implement, and there's an RTP implementation that's not 
too awful in the Shtoom codebase. I know of at least 2 other people 
that used the Shtoom RTP code to do this - I don't know if their code 
was ever open sourced.

Anthony
-- 
Anthony Baxter     <anthony at interlink.com.au>
It's never too late to have a happy childhood.



From itamar at itamarst.org  Tue Jul 11 09:31:08 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Tue, 11 Jul 2006 11:31:08 -0400
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <1152631869.5853.1.camel@localhost.localdomain>

On Mon, 2006-07-10 at 17:02 +0200, Aljosa Mohorovic wrote:
> i'm looking for a way to stream video in python (streaming server for
> video captured from camera), any tips/examples/docs for doing this
> with twisted?

http://www.flumotion.net/ is written with Twisted.




From thomas at apestaart.org  Tue Jul 11 09:40:51 2006
From: thomas at apestaart.org (Thomas Vander Stichele)
Date: Tue, 11 Jul 2006 17:40:51 +0200
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <1152632451.13106.37.camel@otto.amantes>

Hi,

On Mon, 2006-07-10 at 17:02 +0200, Aljosa Mohorovic wrote:
> i'm looking for a way to stream video in python (streaming server for
> video captured from camera), any tips/examples/docs for doing this
> with twisted?
> i'm asking because i have no experience with twisted and any help is
> appreciated.

Take a look at http://flumotion.net/ which is precisely a streaming
server written in python using Twisted.

Thomas





From michele.petrazzo at unipex.it  Tue Jul 11 11:45:16 2006
From: michele.petrazzo at unipex.it (Michele Petrazzo)
Date: Tue, 11 Jul 2006 19:45:16 +0200
Subject: [Twisted-Python] tcp error
In-Reply-To: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>
References: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>
Message-ID: <44B3E3AC.8030002@unipex.it>

Jean-Paul Calderone wrote:
> This is most likely a bug in FTPClient.  Could you file a ticket at 
> http://twistedmatrix.com/trac/ (you need to register an account
> before the new ticket link will appear)?

Done, ticket 1914.

> 
> By only looking at the traceback, it is not entirely clear where the 
> problem lies.  Please include a minimal self-contained example which 
> reproduces this traceback or a unit test which fails because of this 
> problem.
> 

This is difficult to do, because it's a ftp client library that connect
fax client to an hylafax server (that act like an ftp server), so you
have to setup one for try... Of course, if you have one, I'll send you
all the needs for try.

> Jean-Paul
> 

Thanks,
Michele




From andrew-twisted at puzzling.org  Tue Jul 11 18:14:08 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Wed, 12 Jul 2006 10:14:08 +1000
Subject: [Twisted-Python] tcp error
In-Reply-To: <44B3E3AC.8030002@unipex.it>
References: <20060711132234.29014.183882384.divmod.quotient.31748@ohm>
	<44B3E3AC.8030002@unipex.it>
Message-ID: <20060712001408.GN482@steerpike.home.puzzling.org>

On Tue, Jul 11, 2006 at 07:45:16PM +0200, Michele Petrazzo wrote:
[...]
> >By only looking at the traceback, it is not entirely clear where the 
> >problem lies.  Please include a minimal self-contained example which 
> >reproduces this traceback or a unit test which fails because of this 
> >problem.
> >
> 
> This is difficult to do, because it's a ftp client library that connect
> fax client to an hylafax server (that act like an ftp server), so you
> have to setup one for try... Of course, if you have one, I'll send you
> all the needs for try.

FTP client tests don't necessary need a "real" FTP server to connect to -- and
any test that does is certainly not a "unit" test.  Often to test protocol logic
all you need is a transcript of a session from a real server that you can play
back to the client (not even necessarily over a real TCP connection).

See test_ftp.py in Twisted for some examples of tests that don't need a full
client and server on both ends to test behaviour.  (And some that do, as well)

-Andrew.




From mail at ortling.com  Wed Jul 12 02:43:00 2006
From: mail at ortling.com (mail at ortling.com)
Date: Wed, 12 Jul 2006 10:43:00 +0200
Subject: [Twisted-Python] wxreactor ShowModal problem
Message-ID: <3444102.392091152693780498.JavaMail.servlet@kundenserver>

Hi everyone,

I have a problem with a modal dialog blocking wxreactor. If ShowDialog () is called from within a deferred callback which has been started by reactor.callLater everything twisted comes to a halt and continues only after the modal dialog has been closed. The sample script below should demonstrate the problem. I'm using twisted 2.2 for python2.4.

Help! and thanks in advance
Simon

import sys, os
from twisted.internet import wxreactor
wxreactor.install ()
from twisted.internet import reactor, defer
import wx

class Frame (wx.Frame):
    def __init__ (self, parent, id, title):
        wx.Frame.__init__ (self, parent, id, title)

        btn_dlg = wx.Button (self, -1, "Press", size=(240, 180))
        btn_dlg.Bind (wx.EVT_BUTTON, self.click)

    def click (self, event):
        d = defer.Deferred ()
        self.prepare (d)

    def prepare (self, d):
        """
        uncomment reactor.callLater or d.callback to test
        """
        d.addCallback (self.show)
        reactor.callLater (1.0, d.callback, 1) # this will fail
        #d.callback (1) # this will work
        
    def show (self, val):
        for i in range (20):
            reactor.callLater (i*0.2, self.dosth, i) # these will be printed _after_ dialog has been closed
        dlg = wx.MessageDialog (self, "I am a dialog", "Dialog", style=wx.OK|wx.CANCEL)
        ruckgabe = dlg.ShowModal ()
        dlg.Destroy ()
        if ruckgabe == wx.ID_OK:
            print "okay"
        else:
            print "not okay"

    def dosth (self, idx):
        print "doing something nr", idx 

class App (wx.App):
    def OnInit (self):
        self.frame = Frame (None, -1, "Test")
        self.frame.Show (1)
        self.SetTopWindow (self.frame)
        return True

if __name__ == "__main__":
    app = App ()
    reactor.registerWxApp (app)
    reactor.run ()



From bob at redivi.com  Wed Jul 12 03:22:58 2006
From: bob at redivi.com (Bob Ippolito)
Date: Wed, 12 Jul 2006 02:22:58 -0700
Subject: [Twisted-Python] wxreactor ShowModal problem
In-Reply-To: <3444102.392091152693780498.JavaMail.servlet@kundenserver>
References: <3444102.392091152693780498.JavaMail.servlet@kundenserver>
Message-ID: <402627D9-A401-41DE-8D17-90E690AAF719@redivi.com>


On Jul 12, 2006, at 1:43 AM, mail at ortling.com wrote:

> I have a problem with a modal dialog blocking wxreactor. If  
> ShowDialog () is called from within a deferred callback which has  
> been started by reactor.callLater everything twisted comes to a  
> halt and continues only after the modal dialog has been closed. The  
> sample script below should demonstrate the problem. I'm using  
> twisted 2.2 for python2.4.

That's expected.

-bob




From mail at ortling.com  Wed Jul 12 06:04:08 2006
From: mail at ortling.com (mail at ortling.com)
Date: Wed, 12 Jul 2006 14:04:08 +0200
Subject: AW: Re: [Twisted-Python] wxreactor ShowModal problem
Message-ID: <27136945.453101152705848194.JavaMail.servlet@kundenserver>

Well thanks Bob!

btw. wx.FutureCall (ms, func, arg) instead or reactor.callLater works they way i was expecting it to work.

Simon

>
>On Jul 12, 2006, at 1:43 AM, mail at ortling.com wrote:
>
>> I have a problem with a modal dialog blocking wxreactor. If  
>> ShowDialog () is called from within a deferred callback which has  
>> been started by reactor.callLater everything twisted comes to a  
>> halt and continues only after the modal dialog has been closed. The  
>> sample script below should demonstrate the problem. I'm using  
>> twisted 2.2 for python2.4.
>
>That's expected.
>
>-bob
>
>
>_______________________________________________
>Twisted-Python mailing list
>Twisted-Python at twistedmatrix.com
>http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From teratorn at twistedmatrix.com  Wed Jul 12 06:21:56 2006
From: teratorn at twistedmatrix.com (Eric Mangold)
Date: Wed, 12 Jul 2006 22:21:56 +1000
Subject: [Twisted-Python] streaming video
In-Reply-To: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
References: <87d364ab0607100802je0d53bfr1cf5705f3fd71b2b@mail.gmail.com>
Message-ID: <op.tcksmub7y3d107@localhost.localdomain>

On Tue, 11 Jul 2006 01:02:54 +1000, Aljosa Mohorovic  
<aljosa.mohorovic at gmail.com> wrote:
[...]
> also, is it possible to use py2exe to create executable files. if
> using py2exe is not a problem, what is recommended way of using py2exe
> & twisted?
>
> Aljosa Mohorovic

That should really be a seperate mailing list post, by the way.

There isn't anything special about a Twisted/py2exe app, at least in my  
experience. If you have a .py file that runs the reactor you should be  
able to use py2exe on it without any problems.

If you want to use twistd to run your app then it's a little more  
complicated because normally you pass command-line arguments to twistd,  
but with py2exe you probably just want to double-click and have it work.  
There are various ways you could handle this, but I will wait for you to  
respond with more information before getting in to any details :)

Hope that helps,
-- 
Eric Mangold - Twisted/Win32 Maintainer
http://twistedmatrix.com/trac/wiki/Windows



From klueska at gmail.com  Thu Jul 13 06:49:57 2006
From: klueska at gmail.com (Kevin Klues)
Date: Thu, 13 Jul 2006 14:49:57 +0200
Subject: [Twisted-Python] SSH Forwading and Database Queries in same
	application
Message-ID: <8e4bf3a90607130549y7ca622fdhf6d34617901e9684@mail.gmail.com>

I am trying to use twisted.conch.ssh to write an application that first sets
up an ssh connection that forwards port 5432 from an external server to my
local machine and then locally connect to a database running on the server
using that port.  I am able to write two separate applications that
accomplish what I want, but I am unable to integrate them into one.  Using
the two application approach, I can first start the application that sets up
my port forwarding and then start the application that connects to my
database.  I can then make queries using the second application and
everything seems to work just fine.  When integrating them into one
application I am still able to connect to the database, but I cannot run any
queries over it.  The queries hang indefinitely, and neither my callback nor
my errback functions that should run after the query has completed ever get
called.  My setup for implementing this is as follows....

I have introduced a deferred when setting up my port forwarding that gets
its callback only once the startFactory() event gets called for my class
derived from forwarding.SSHListenForwardingFactory.  The forwarding is setup
using the following code snippet.....

reactor.listenTCP(PORT, DatabaseForwardingFactory(self.conn, (LOCALHOST,
PORT), DatabaseClientForwardingChannel))

where....

class DatabaseForwardingFactory(forwarding.SSHListenForwardingFactory):
class DatabaseClientForwardingChannel(
forwarding.SSHListenClientForwardingChannel):

Does anyone have any idea why this might not be working?  I tried deferring
my query to a thread to see if this would help matters, but to no avail.
Any help at all would be appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060713/ae735a4c/attachment.html>

From donwsmith at gmail.com  Thu Jul 13 12:40:48 2006
From: donwsmith at gmail.com (Don Smith)
Date: Thu, 13 Jul 2006 11:40:48 -0700
Subject: [Twisted-Python] Reconnecting PB Client
Message-ID: <24f63c200607131140v2706f24s673c3ccdbcbf4b1e@mail.gmail.com>

Does anyone have some example code for building a reconnecting PB client?

This is what I have now:

from twisted.spread import pb
    from twisted.internet import reactor
    from twisted.python import util

    events = pb.PBClientFactory()
    reactor.connectTCP("localhost", 8789, events)
    queue = events.getRootObject()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060713/82f2f920/attachment.html>

From thebadbob at gmail.com  Thu Jul 13 13:20:01 2006
From: thebadbob at gmail.com (Bad Bob)
Date: Thu, 13 Jul 2006 15:20:01 -0400
Subject: [Twisted-Python] Is twisted the right tool for this job?
Message-ID: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>

Hi all.

I'm writing a simple image archive program. The program is for indexing a
whole lot of pictures we sell on a CD. The focus of the product is on the
pictures, not the viewer, so it's pretty simple; it just shows the pictures,
sorted by category's, resizes them to whatever size the user wants (with
imagemagick), and searches though the collection.

Right now, the program is using a Twisted webserver in the backend. All the
pages are dynamic, based off one template file. The gui is a very simple
Venster (venster.sf.net) frontend, mainly consisting of a web browser
control, and some code to open a file-save dialog when the user clicks save
to save a picture.

I'm wondering if there is a better way to do this. Perhaps twisted is a bit
too much for all of this? Another problem is when Twisted opens up the
server port, firewalls start complaining. Perhaps there is a better way.
Also, if there is something better then venster for a front end, I'd be glad
to hear about that, too.

-Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060713/1d6eb0c5/attachment.html>

From bob at redivi.com  Thu Jul 13 14:25:36 2006
From: bob at redivi.com (Bob Ippolito)
Date: Thu, 13 Jul 2006 13:25:36 -0700
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
Message-ID: <90A666AF-938E-4DD4-9E62-2FF1E02D35FC@redivi.com>


On Jul 13, 2006, at 12:20 PM, Bad Bob wrote:

> I'm writing a simple image archive program. The program is for  
> indexing a whole lot of pictures we sell on a CD. The focus of the  
> product is on the pictures, not the viewer, so it's pretty simple;  
> it just shows the pictures, sorted by category's, resizes them to  
> whatever size the user wants (with imagemagick), and searches  
> though the collection.
>
> Right now, the program is using a Twisted webserver in the backend.  
> All the pages are dynamic, based off one template file. The gui is  
> a very simple Venster (venster.sf.net) frontend, mainly consisting  
> of a web browser control, and some code to open a file-save dialog  
> when the user clicks save to save a picture.
>
> I'm wondering if there is a better way to do this. Perhaps twisted  
> is a bit too much for all of this? Another problem is when Twisted  
> opens up the server port, firewalls start complaining. Perhaps  
> there is a better way. Also, if there is something better then  
> venster for a front end, I'd be glad to hear about that, too.

It may shut up the firewall apps if you specify interface='127.0.0.1'  
in your listenTCP call.

-bob


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060713/e27dd235/attachment.html>

From fairwinds at eastlink.ca  Thu Jul 13 15:29:50 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Thu, 13 Jul 2006 18:29:50 -0300
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
Message-ID: <44B6BB4E.7020205@eastlink.ca>

You might want to consider wxPython for the gui also since it is fairly 
mature, stable and cross platform.

Regards,
David

Bad Bob wrote:
> Hi all.
> 
> I'm writing a simple image archive program. The program is for indexing 
> a whole lot of pictures we sell on a CD. The focus of the product is on 
> the pictures, not the viewer, so it's pretty simple; it just shows the 
> pictures, sorted by category's, resizes them to whatever size the user 
> wants (with imagemagick), and searches though the collection.
> 
> Right now, the program is using a Twisted webserver in the backend. All 
> the pages are dynamic, based off one template file. The gui is a very 
> simple Venster (venster.sf.net <http://venster.sf.net>) frontend, mainly 
> consisting of a web browser control, and some code to open a file-save 
> dialog when the user clicks save to save a picture.
> 
> I'm wondering if there is a better way to do this. Perhaps twisted is a 
> bit too much for all of this? Another problem is when Twisted opens up 
> the server port, firewalls start complaining. Perhaps there is a better 
> way. Also, if there is something better then venster for a front end, 
> I'd be glad to hear about that, too.
> 
> -Robert
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From arustad at gmail.com  Thu Jul 13 21:53:22 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Thu, 13 Jul 2006 21:53:22 -0600
Subject: [Twisted-Python] What is the best way to install Twisted on OS X
	10.4?
Message-ID: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>

I'm having a hard time running a TwistedWords example.
[OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of TwistedSumo]

I have installed (correctly I think) zopeinterfaces/core/words/web,
but when I invoke:

/usr/local/bin/python msn_example.py


I get the following error:

Traceback (most recent call last):
  File "msn_example.py", line 11, in ?
    from twisted.protocols import msn
  File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
line 6, in ?
    globals())
  File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
line 725, in moduleMovedForSplit
    raise ImportError("You need to have the Twisted %s "
ImportError: You need to have the Twisted Words package installed to
use twisted.protocols.msn. See
http://twistedmatrix.com/projects/words.



Your help is greatly appreciated [I'm a noob to Python and Twisted,
but I know bit about OS X].
Thanks!
Aaron.



From hsanches at gmail.com  Fri Jul 14 04:02:20 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 11:02:20 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
Message-ID: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>

Hi,

I am new to twisted and I am trying to implement a simple client that needs
to deal with several servers (windows platform).
I would like to send from the client asynchronous requests to all the
server, using TCP
I think that a solution would be to use a reactor per server connection in
the client, but that does not seems possible as the reactor is a singleton.

Could some one give me an idea of how i can deal with this?

Thank You


Miguel Sanches
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060714/c51d3b3f/attachment.html>

From radix at twistedmatrix.com  Fri Jul 14 06:13:22 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 14 Jul 2006 08:13:22 -0400
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
Message-ID: <60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>

On 7/14/06, Hermínio Miguel Sanches <hsanches at gmail.com> wrote:
> I am new to twisted and I am trying to implement a simple client that needs
> to deal with several servers (windows platform).
> I would like to send from the client asynchronous requests to all the
> server, using TCP
> I think that a solution would be to use a reactor per server connection in
> the client, but that does not seems possible as the reactor is a singleton.

No, you don't use multiple reactors, you use one reactor and simply
call connectTCP multiple times.

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From fairwinds at eastlink.ca  Fri Jul 14 07:07:27 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Fri, 14 Jul 2006 10:07:27 -0300
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
Message-ID: <44B7970F.7080606@eastlink.ca>

Hi. I would recommend creating a multiservice and adding each server 
connection as a service so you have control over starting and stopping 
the services independently. Look at the documentation for services.

Regards
David

Hermínio Miguel Sanches wrote:
> Hi,
>  
> I am new to twisted and I am trying to implement a simple client that 
> needs to deal with several servers (windows platform).
> I would like to send from the client asynchronous requests to all the 
> server, using TCP
> I think that a solution would be to use a reactor per server connection 
> in the client, but that does not seems possible as the reactor is a 
> singleton.
>  
> Could some one give me an idea of how i can deal with this?
>  
> Thank You
>  
>  
> Miguel Sanches
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From hsanches at gmail.com  Fri Jul 14 07:49:29 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 14:49:29 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
Message-ID: <f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>

Many Thanks Christopher for the quick answer

I was missing the point with two basic errors:
1) trying to connect multiple times(n) using reactor.connectTCP()  with (n)
calls to reactor.run()
2) trying to instantiate only once the pb.PBClientFactory() for different
calls to reactor.connectTCP()

What I did was:
1) call only once reactor.run() after launching all the callbacks
2) instantiating pb.PBClientFactory() each time before a call to
reactor.connectTCP() (to change the server)

Please advise if I am doing something wrong.

Cheers

Miguel

On 7/14/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>
> On 7/14/06, Hermínio Miguel Sanches <hsanches at gmail.com> wrote:
> > I am new to twisted and I am trying to implement a simple client that
> needs
> > to deal with several servers (windows platform).
> > I would like to send from the client asynchronous requests to all the
> > server, using TCP
> > I think that a solution would be to use a reactor per server connection
> in
> > the client, but that does not seems possible as the reactor is a
> singleton.
>
> No, you don't use multiple reactors, you use one reactor and simply
> call connectTCP multiple times.
>
> --
> Christopher Armstrong
> International Man of Twistery
> http://radix.twistedmatrix.com/
> http://twistedmatrix.com/
> http://canonical.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060714/5a61af90/attachment.html>

From radix at twistedmatrix.com  Fri Jul 14 08:10:01 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 14 Jul 2006 10:10:01 -0400
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
	<f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>
Message-ID: <60ed19d40607140710g7dd0cb7dsb97cba7dee1391de@mail.gmail.com>

On 7/14/06, Hermínio Miguel Sanches <hsanches at gmail.com> wrote:
> Many Thanks Christopher for the quick answer

No worries.

> What I did was:
> 1) call only once reactor.run() after launching all the callbacks
> 2) instantiating pb.PBClientFactory() each time before a call to
> reactor.connectTCP() (to change the server)
>
> Please advise if I am doing something wrong.

That looks right. Is everything working well?

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/

From hsanches at gmail.com  Fri Jul 14 08:14:58 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 15:14:58 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <44B7970F.7080606@eastlink.ca>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<44B7970F.7080606@eastlink.ca>
Message-ID: <f28267c0607140714k4787f00fpeb3a0fdbbb94b660@mail.gmail.com>

Many Thanks David
For now I am trying to put something very simple to work wich it seems to
do.
Later I will needed to use twisted.application.service.

Cheers

Miguel

On 7/14/06, David Pratt <fairwinds at eastlink.ca> wrote:
>
> Hi. I would recommend creating a multiservice and adding each server
> connection as a service so you have control over starting and stopping
> the services independently. Look at the documentation for services.
>
> Regards
> David
>
> Hermínio Miguel Sanches wrote:
> > Hi,
> >
> > I am new to twisted and I am trying to implement a simple client that
> > needs to deal with several servers (windows platform).
> > I would like to send from the client asynchronous requests to all the
> > server, using TCP
> > I think that a solution would be to use a reactor per server connection
> > in the client, but that does not seems possible as the reactor is a
> > singleton.
> >
> > Could some one give me an idea of how i can deal with this?
> >
> > Thank You
> >
> >
> > Miguel Sanches
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060714/45ea4fc7/attachment.html>

From arustad at gmail.com  Fri Jul 14 08:32:49 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Fri, 14 Jul 2006 08:32:49 -0600
Subject: [Twisted-Python] Re: What is the best way to install Twisted on OS
	X 10.4?
In-Reply-To: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
Message-ID: <6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>

Turns out there is a problem with the msn_example.py that is provided
under the documentation section of the Words project.

The import of msn is:

from twisted.protocols import msn

but should read:

from twisted.words.protocols import msn

AR.





On 7/13/06, Aaron Rustad <arustad at gmail.com> wrote:
> I'm having a hard time running a TwistedWords example.
> [OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of TwistedSumo]
>
> I have installed (correctly I think) zopeinterfaces/core/words/web,
> but when I invoke:
>
> /usr/local/bin/python msn_example.py
>
>
> I get the following error:
>
> Traceback (most recent call last):
>   File "msn_example.py", line 11, in ?
>     from twisted.protocols import msn
>   File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
> line 6, in ?
>     globals())
>   File "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
> line 725, in moduleMovedForSplit
>     raise ImportError("You need to have the Twisted %s "
> ImportError: You need to have the Twisted Words package installed to
> use twisted.protocols.msn. See
> http://twistedmatrix.com/projects/words.
>
>
>
> Your help is greatly appreciated [I'm a noob to Python and Twisted,
> but I know bit about OS X].
> Thanks!
> Aaron.
>



From radix at twistedmatrix.com  Fri Jul 14 08:40:30 2006
From: radix at twistedmatrix.com (Christopher Armstrong)
Date: Fri, 14 Jul 2006 10:40:30 -0400
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
	OS X 10.4?
In-Reply-To: <6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
Message-ID: <60ed19d40607140740m38cfc818u1769034dd62fd343@mail.gmail.com>

On 7/14/06, Aaron Rustad <arustad at gmail.com> wrote:
> Turns out there is a problem with the msn_example.py that is provided
> under the documentation section of the Words project.
>
> The import of msn is:
>
> from twisted.protocols import msn
>
> but should read:
>
> from twisted.words.protocols import msn

Strange that this would solve your problem, as twisted.protocol.msn is
just a compatibility wrapper around twisted.words.protocols.msn. The
error you got was to indicate that you actually didn't have words
installed so it couldn't  find twisted.words.protocols.msn.

Did you use the toplevel setup.py file from the Twisted-2.4.0.tar.bz2?

-- 
Christopher Armstrong
International Man of Twistery
http://radix.twistedmatrix.com/
http://twistedmatrix.com/
http://canonical.com/



From hsanches at gmail.com  Fri Jul 14 09:03:00 2006
From: hsanches at gmail.com (=?ISO-8859-1?Q?Herm=EDnio_Miguel_Sanches?=)
Date: Fri, 14 Jul 2006 16:03:00 +0100
Subject: [Twisted-Python] Client to deal with multiple servers (Multiple
	Reactors?)
In-Reply-To: <60ed19d40607140710g7dd0cb7dsb97cba7dee1391de@mail.gmail.com>
References: <f28267c0607140302m788cdc1ib4bff03ec0be4eb2@mail.gmail.com>
	<60ed19d40607140513i239cb121i2cdbc3a47cdd715c@mail.gmail.com>
	<f28267c0607140649w1ed3e3b6k39704f3d410663be@mail.gmail.com>
	<60ed19d40607140710g7dd0cb7dsb97cba7dee1391de@mail.gmail.com>
Message-ID: <f28267c0607140803g67fab68bsc7bb4448994610f3@mail.gmail.com>

Yes everything seems working fine but I am still at the beginning and I will
continue my digging phase and with the fast replies that I've just received,
leaves me with no big worries trying to use twisted.

Thanks

Miguel


On 7/14/06, Christopher Armstrong <radix at twistedmatrix.com> wrote:
>
> On 7/14/06, Hermínio Miguel Sanches <hsanches at gmail.com> wrote:
> > Many Thanks Christopher for the quick answer
>
> No worries.
>
> > What I did was:
> > 1) call only once reactor.run() after launching all the callbacks
> > 2) instantiating pb.PBClientFactory() each time before a call to
> > reactor.connectTCP() (to change the server)
> >
> > Please advise if I am doing something wrong.
>
> That looks right. Is everything working well?
>
> --
> Christopher Armstrong
> International Man of Twistery
> http://radix.twistedmatrix.com/
> http://twistedmatrix.com/
> http://canonical.com/
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060714/6d29c671/attachment.html>

From dreid at dreid.org  Fri Jul 14 12:50:00 2006
From: dreid at dreid.org (David Reid)
Date: Fri, 14 Jul 2006 11:50:00 -0700
Subject: [Twisted-Python] What is the best way to install Twisted on OS
	X	10.4?
In-Reply-To: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
Message-ID: <44B7E758.4020901@dreid.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Aaron Rustad wrote:
> I'm having a hard time running a TwistedWords example.
> [OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of
> TwistedSumo]
> 
> I have installed (correctly I think) zopeinterfaces/core/words/web,
> but when I invoke:
> 
> /usr/local/bin/python msn_example.py
> 
> 
> I get the following error:
> 
> Traceback (most recent call last):
>  File "msn_example.py", line 11, in ?
>    from twisted.protocols import msn
>  File
> "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
> 
> line 6, in ?
>    globals())
>  File
> "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
> 
> line 725, in moduleMovedForSplit
>    raise ImportError("You need to have the Twisted %s "
> ImportError: You need to have the Twisted Words package installed to
> use twisted.protocols.msn. See
> http://twistedmatrix.com/projects/words.
> 
> 
> 
> Your help is greatly appreciated [I'm a noob to Python and Twisted,
> but I know bit about OS X].
> Thanks!
> Aaron.
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

It may make your life generally easier to note that I've built a
meta-package that includes all of twisted and zope, and pycrypto, and
pyopenssl built for MacPython 2.4.  I don't know what you may have
messed up during the install (perhaps you used /usr/bin/python (which
should point to 2.3) for the install.)  But people seem pretty happy
with my packages.

http://dreid.org/twisted/Twisted-2.4.0_py2.4-KitchenSink.dmg

- -David

- --
"Usually the protocol is this: I appoint someone for a task,
which they are not qualified to do.  Then, they have to fight
a bear if they don't want to do it." -- Glyph Lefkowitz
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFEt+dXrsrO6aeULcgRAgqcAJ9w05+bV7TG9crkxffiD0MvwReBqgCggQfw
OhsLTFz8QeOxyPOGeml7LbM=
=nvdi
-----END PGP SIGNATURE-----



From arustad at gmail.com  Fri Jul 14 13:15:20 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Fri, 14 Jul 2006 13:15:20 -0600
Subject: [Twisted-Python] What is the best way to install Twisted on OS X
	10.4?
In-Reply-To: <44B7E758.4020901@dreid.org>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<44B7E758.4020901@dreid.org>
Message-ID: <6b762a990607141215o3793715bk90bc456c059201d8@mail.gmail.com>

OK I shouldn't say that all my problems are solved on my Mac. I am
using Cygwin at work and I went through the same process of installing
Twisted, and Python (minus the MacPython of course), and I receieved
the same errors that I indicated earlier in this thread.

However, when I changed the import for msn on msn_example.py, it
worked. I'll make the change at home on my MBP and let everyone know
if it worked.

Thanks!
AR.

On 7/14/06, David Reid <dreid at dreid.org> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Aaron Rustad wrote:
> > I'm having a hard time running a TwistedWords example.
> > [OS X 10.4, MacPython 2.4, Python 2.3.5, latest stable build of
> > TwistedSumo]
> >
> > I have installed (correctly I think) zopeinterfaces/core/words/web,
> > but when I invoke:
> >
> > /usr/local/bin/python msn_example.py
> >
> >
> > I get the following error:
> >
> > Traceback (most recent call last):
> >  File "msn_example.py", line 11, in ?
> >    from twisted.protocols import msn
> >  File
> > "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/protocols/msn.py",
> >
> > line 6, in ?
> >    globals())
> >  File
> > "/Library/Frameworks/Python.framework/Versions/2.4/lib/python2.4/site-packages/twisted/python/util.py",
> >
> > line 725, in moduleMovedForSplit
> >    raise ImportError("You need to have the Twisted %s "
> > ImportError: You need to have the Twisted Words package installed to
> > use twisted.protocols.msn. See
> > http://twistedmatrix.com/projects/words.
> >
> >
> >
> > Your help is greatly appreciated [I'm a noob to Python and Twisted,
> > but I know bit about OS X].
> > Thanks!
> > Aaron.
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> It may make your life generally easier to note that I've built a
> meta-package that includes all of twisted and zope, and pycrypto, and
> pyopenssl built for MacPython 2.4.  I don't know what you may have
> messed up during the install (perhaps you used /usr/bin/python (which
> should point to 2.3) for the install.)  But people seem pretty happy
> with my packages.
>
> http://dreid.org/twisted/Twisted-2.4.0_py2.4-KitchenSink.dmg
>
> - -David
>
> - --
> "Usually the protocol is this: I appoint someone for a task,
> which they are not qualified to do.  Then, they have to fight
> a bear if they don't want to do it." -- Glyph Lefkowitz
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.3 (Darwin)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFEt+dXrsrO6aeULcgRAgqcAJ9w05+bV7TG9crkxffiD0MvwReBqgCggQfw
> OhsLTFz8QeOxyPOGeml7LbM=
> =nvdi
> -----END PGP SIGNATURE-----
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From andrew-twisted at puzzling.org  Fri Jul 14 23:40:20 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Sat, 15 Jul 2006 15:40:20 +1000
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
	OS X 10.4?
In-Reply-To: <6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
Message-ID: <20060715054020.GF20869@steerpike.home.puzzling.org>

On Fri, Jul 14, 2006 at 08:32:49AM -0600, Aaron Rustad wrote:
> Turns out there is a problem with the msn_example.py that is provided
> under the documentation section of the Words project.
> 
> The import of msn is:
> 
> from twisted.protocols import msn
> 
> but should read:
> 
> from twisted.words.protocols import msn

While the example should be updated to use the non-deprecated import, there
seems to be a bug here.  The only difference between these two statements should
be that the first emits a warning.  They should both work (or not) equally well.

-Andrew.




From stephen at thorne.id.au  Sat Jul 15 08:24:09 2006
From: stephen at thorne.id.au (Stephen Thorne)
Date: Sun, 16 Jul 2006 00:24:09 +1000
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
In-Reply-To: <20060715054020.GF20869@steerpike.home.puzzling.org>
Message-ID: <20060715142409.29014.2105565733.divmod.quotient.38132@ohm>

On Sat, 15 Jul 2006 15:40:20 +1000, Andrew Bennetts <andrew-twisted at puzzling.org> wrote:
>On Fri, Jul 14, 2006 at 08:32:49AM -0600, Aaron Rustad wrote:
>> Turns out there is a problem with the msn_example.py that is provided
>> under the documentation section of the Words project.
>>
>> The import of msn is:
>>
>> from twisted.protocols import msn
>>
>> but should read:
>>
>> from twisted.words.protocols import msn
>
>While the example should be updated to use the non-deprecated import, there
>seems to be a bug here.  The only difference between these two statements should
>be that the first emits a warning.  They should both work (or not) equally well.

Fixed in trunk, see:

http://twistedmatrix.com/trac/ticket/1637
http://twistedmatrix.com/trac/changeset/17455

Regards,
Stephen Thorne.



From arustad at gmail.com  Sat Jul 15 08:26:26 2006
From: arustad at gmail.com (Aaron Rustad)
Date: Sat, 15 Jul 2006 08:26:26 -0600
Subject: [Twisted-Python] Re: What is the best way to install Twisted on
	OS X 10.4?
In-Reply-To: <20060715054020.GF20869@steerpike.home.puzzling.org>
References: <6b762a990607132053m1b98f950j4c987fa35f718b7c@mail.gmail.com>
	<6b762a990607140732q5b6de518v52cd7df3946c8af6@mail.gmail.com>
	<20060715054020.GF20869@steerpike.home.puzzling.org>
Message-ID: <6b762a990607150726q5a037cdfvee50df3b855053df@mail.gmail.com>

OK, I finally got back on to my MacBook, made the change to
msn_example.py, and it works.

So, it turns out is wasn't a OS X/python issue at all.

thanks everyone!
AR.

On 7/14/06, Andrew Bennetts <andrew-twisted at puzzling.org> wrote:
> On Fri, Jul 14, 2006 at 08:32:49AM -0600, Aaron Rustad wrote:
> > Turns out there is a problem with the msn_example.py that is provided
> > under the documentation section of the Words project.
> >
> > The import of msn is:
> >
> > from twisted.protocols import msn
> >
> > but should read:
> >
> > from twisted.words.protocols import msn
>
> While the example should be updated to use the non-deprecated import, there
> seems to be a bug here.  The only difference between these two statements should
> be that the first emits a warning.  They should both work (or not) equally well.
>
> -Andrew.
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>



From exarkun at twistedmatrix.com  Sat Jul 15 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 16 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1153026301.65.1564501977@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-09 through 2006-07-16
Bugs opened: 21    Bugs closed: 6  Total open bugs: 657 (+15)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +8  |Highest:  +0          |Core:   +6             
|Enhancement:  +5  |High:     +0          |Ftp:    +1             
|Task:         +2  |Normal:  +13          |Mail:   +1             
                   |Low:      +2          |Names:  +1             
                   |Lowest:   +0          |Web:    +1             
                                          |Web2:   +4             
                                          |Words:  +1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1915] Value parsing bug in web2.channel.fastcgi (opened by jeremy)
    defect          web2       http://twistedmatrix.com/trac/ticket/1915

                    ===== High =====
[#1926] twisted.web2.scripts.websetroot (opened by dreid) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1926

[#1927] twisted.web2.script (opened by dreid) (CLOSED, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1927

                    ===== Normal =====
[#1908] SRVConnector keeps reconnecting on non-SRV responses (opened by ralphm)
    enhancement     names      http://twistedmatrix.com/trac/ticket/1908

[#1909] [PATCH] add content encoding support to xmlrpc (opened by pythonguy)
    enhancement     web        http://twistedmatrix.com/trac/ticket/1909

[#1910] delete deprecated crud from twisted.python.log (opened by radix)
    task            core       http://twistedmatrix.com/trac/ticket/1910

[#1911] remove usage and references to twisted.python.plugin (opened by radix)
    task            core       http://twistedmatrix.com/trac/ticket/1911

[#1913] twisted.web2.dav fails on copies & directory renaming (opened by krp) (CLOSED, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1913

[#1914] FTPClient problem (opened by michele.petrazzo)
    defect          ftp        http://twistedmatrix.com/trac/ticket/1914

[#1916] Pyflakes errors in twisted.web2 need fixing (opened by jerub)
    defect          web2       http://twistedmatrix.com/trac/ticket/1916

[#1917] Typo in twisted.mail.mail.DomainWithDefaultDict (opened by therve)
    defect          mail       http://twistedmatrix.com/trac/ticket/1917

[#1918] Revive KQueue Reactor (opened by dialtone)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1918

[#1919] Watering the twisted.web2 docstring desert (opened by edsuom) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1919

[#1920] dav.resource.py: RedirectResponse takes a full href, not a uri (opened by karpet)
    defect          web2       http://twistedmatrix.com/trac/ticket/1920

[#1921] TestTwoProcessesPosix.tearDown has a gratuitous print statement (opened by spiv)
    defect          core       http://twistedmatrix.com/trac/ticket/1921

[#1922] make twistd pluggable, nerf mktap (opened by tjs)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1922

[#1923] XPath query doesn't always handle namespaces correctly (opened by lewisbaker)
    defect          words      http://twistedmatrix.com/trac/ticket/1923

[#1928] Refactor socket operations from tcp.py/udp.py into the reactor (opened by PenguinOfDoom)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1928

                    ===== Low =====
[#1924] 24 import *s in Twisted (opened by mwh)
    defect          core       http://twistedmatrix.com/trac/ticket/1924

[#1925] 238(!) local imports in Twisted (opened by mwh)
    defect          core       http://twistedmatrix.com/trac/ticket/1925

                    ===== Lowest =====
[#1912] provide logical separation of rendering for files and directories (opened by vincentk)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1912



Closed Bugs
______________________
                    ===== Highest =====
[#1741] threadCallQueue loop can grow list forever (opened by ghazel, closed by ghazel, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1741

                    ===== High =====
[#1926] twisted.web2.scripts.websetroot (opened by dreid, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1926

[#1927] twisted.web2.script (opened by dreid, closed by dreid, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1927

                    ===== Normal =====
[#1913] twisted.web2.dav fails on copies & directory renaming (opened by krp, closed by wsanchez, fixed)
    defect          core       http://twistedmatrix.com/trac/ticket/1913

[#1919] Watering the twisted.web2 docstring desert (opened by edsuom, closed by dreid, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1919

                    ===== Lowest =====
[#1880] deferreds should let you override the "Unhandled error in Deferred" behaviour (opened by ghazel, closed by ghazel, worksforme)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1880





From thebadbob at gmail.com  Sun Jul 16 09:17:40 2006
From: thebadbob at gmail.com (Bad Bob)
Date: Sun, 16 Jul 2006 11:17:40 -0400
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <44B6BB4E.7020205@eastlink.ca>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
	<44B6BB4E.7020205@eastlink.ca>
Message-ID: <dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>

While I understand the benefits of being cross platform, the company I work
for does not, nor do they care about it. If it works well on Windows,
they're happy. I actually wrote most of the program in linux, and worked on
the GUI in windows (emulated, of course).

Also, when I tried wx's html component, it seems to have a few problems. It
doesn't support CSS, it doesn't show the images, and it doesn't follow any
links (perhaps it wants the links to be http://.../page instead of /page?).
Is there a gui system that actually shows the html correctly in windows? (I
don't use windows much, so I'm not familer with this).

And Bob Ippolito; thanks for the tip.

-Robert

On 7/13/06, David Pratt <fairwinds at eastlink.ca> wrote:
>
> You might want to consider wxPython for the gui also since it is fairly
> mature, stable and cross platform.
>
> Regards,
> David
>
> Bad Bob wrote:
> > Hi all.
> >
> > I'm writing a simple image archive program. The program is for indexing
> > a whole lot of pictures we sell on a CD. The focus of the product is on
> > the pictures, not the viewer, so it's pretty simple; it just shows the
> > pictures, sorted by category's, resizes them to whatever size the user
> > wants (with imagemagick), and searches though the collection.
> >
> > Right now, the program is using a Twisted webserver in the backend. All
> > the pages are dynamic, based off one template file. The gui is a very
> > simple Venster (venster.sf.net <http://venster.sf.net>) frontend, mainly
> > consisting of a web browser control, and some code to open a file-save
> > dialog when the user clicks save to save a picture.
> >
> > I'm wondering if there is a better way to do this. Perhaps twisted is a
> > bit too much for all of this? Another problem is when Twisted opens up
> > the server port, firewalls start complaining. Perhaps there is a better
> > way. Also, if there is something better then venster for a front end,
> > I'd be glad to hear about that, too.
> >
> > -Robert
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Twisted-Python mailing list
> > Twisted-Python at twistedmatrix.com
> > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060716/634cef9d/attachment.html>

From fairwinds at eastlink.ca  Sun Jul 16 09:43:48 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Sun, 16 Jul 2006 12:43:48 -0300
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
	<44B6BB4E.7020205@eastlink.ca>
	<dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>
Message-ID: <44BA5EB4.7050904@eastlink.ca>

Hi Bob. Please follow this up on the wxPython list to get help with 
wxPython. An IEHtmlWindow should give you what you need if you are 
wanting to display HTML in Windows with CSS. There is a recently 
published book on wxPython and good documentation on the wiki and in the 
source of the wxPython demo . It is capable gui, however you will not 
get far unless you do some reading to better understand its capabilities.

Regards,
David

Bad Bob wrote:
> While I understand the benefits of being cross platform, the company I 
> work for does not, nor do they care about it. If it works well on 
> Windows, they're happy. I actually wrote most of the program in linux, 
> and worked on the GUI in windows (emulated, of course).
> 
> Also, when I tried wx's html component, it seems to have a few problems. 
> It doesn't support CSS, it doesn't show the images, and it doesn't 
> follow any links (perhaps it wants the links to be http://.../page 
> instead of /page?). Is there a gui system that actually shows the html 
> correctly in windows? (I don't use windows much, so I'm not familer with 
> this).
> 
> And Bob Ippolito; thanks for the tip.
> 
> -Robert
> 
> On 7/13/06, *David Pratt* <fairwinds at eastlink.ca 
> <mailto:fairwinds at eastlink.ca> > wrote:
> 
>     You might want to consider wxPython for the gui also since it is fairly
>     mature, stable and cross platform.
> 
>     Regards,
>     David
> 
>     Bad Bob wrote:
>      > Hi all.
>      >
>      > I'm writing a simple image archive program. The program is for
>     indexing
>      > a whole lot of pictures we sell on a CD. The focus of the product
>     is on
>      > the pictures, not the viewer, so it's pretty simple; it just
>     shows the
>      > pictures, sorted by category's, resizes them to whatever size the
>     user
>      > wants (with imagemagick), and searches though the collection.
>      >
>      > Right now, the program is using a Twisted webserver in the
>     backend. All
>      > the pages are dynamic, based off one template file. The gui is a very
>      > simple Venster ( venster.sf.net <http://venster.sf.net>
>     <http://venster.sf.net>) frontend, mainly
>      > consisting of a web browser control, and some code to open a
>     file-save
>      > dialog when the user clicks save to save a picture.
>      >
>      > I'm wondering if there is a better way to do this. Perhaps
>     twisted is a
>      > bit too much for all of this? Another problem is when Twisted
>     opens up
>      > the server port, firewalls start complaining. Perhaps there is a
>     better
>      > way. Also, if there is something better then venster for a front end,
>      > I'd be glad to hear about that, too.
>      >
>      > -Robert
>      >
>      >
>      >
>     ------------------------------------------------------------------------
> 
>      >
>      > _______________________________________________
>      > Twisted-Python mailing list
>      > Twisted-Python at twistedmatrix.com
>     <mailto:Twisted-Python at twistedmatrix.com>
>      > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
>     _______________________________________________
>     Twisted-Python mailing list
>     Twisted-Python at twistedmatrix.com
>     <mailto:Twisted-Python at twistedmatrix.com>
>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python



From bob at redivi.com  Sun Jul 16 11:03:34 2006
From: bob at redivi.com (Bob Ippolito)
Date: Sun, 16 Jul 2006 10:03:34 -0700
Subject: [Twisted-Python] Is twisted the right tool for this job?
In-Reply-To: <44BA5EB4.7050904@eastlink.ca>
References: <dd0bfff20607131220y2099f614nd77927fdc2b035af@mail.gmail.com>
	<44B6BB4E.7020205@eastlink.ca>
	<dd0bfff20607160817waf20039h667d57bb5374658b@mail.gmail.com>
	<44BA5EB4.7050904@eastlink.ca>
Message-ID: <4C7D11E0-4832-4A40-9740-B93B79128864@redivi.com>

It seems awfully stupid to use wxPython to draw up an IEHtmlWindow,  
where Venster would do a better job of the same thing in probably the  
same (or less) user code. Venster's only dependency is ctypes, so the  
combination is a few *megabytes* smaller than wxPython. That means  
the Venster based application would load *MUCH MUCH* faster (on the  
order of several seconds), since we're talking about a CD here.  
Neither wxPython nor Venster are cross-platform for embedding the IE  
ActiveX control.

-bob

On Jul 16, 2006, at 8:43 AM, David Pratt wrote:

> Hi Bob. Please follow this up on the wxPython list to get help with  
> wxPython. An IEHtmlWindow should give you what you need if you are  
> wanting to display HTML in Windows with CSS. There is a recently  
> published book on wxPython and good documentation on the wiki and  
> in the source of the wxPython demo . It is capable gui, however you  
> will not get far unless you do some reading to better understand  
> its capabilities.
>
> Regards,
> David
>
> Bad Bob wrote:
>> While I understand the benefits of being cross platform, the  
>> company I work for does not, nor do they care about it. If it  
>> works well on Windows, they're happy. I actually wrote most of the  
>> program in linux, and worked on the GUI in windows (emulated, of  
>> course).
>> Also, when I tried wx's html component, it seems to have a few  
>> problems. It doesn't support CSS, it doesn't show the images, and  
>> it doesn't follow any links (perhaps it wants the links to be  
>> http://.../page instead of /page?). Is there a gui system that  
>> actually shows the html correctly in windows? (I don't use windows  
>> much, so I'm not familer with this).
>> And Bob Ippolito; thanks for the tip.
>> -Robert
>> On 7/13/06, *David Pratt* <fairwinds at eastlink.ca  
>> <mailto:fairwinds at eastlink.ca> > wrote:
>>     You might want to consider wxPython for the gui also since it  
>> is fairly
>>     mature, stable and cross platform.
>>     Regards,
>>     David
>>     Bad Bob wrote:
>>      > Hi all.
>>      >
>>      > I'm writing a simple image archive program. The program is for
>>     indexing
>>      > a whole lot of pictures we sell on a CD. The focus of the  
>> product
>>     is on
>>      > the pictures, not the viewer, so it's pretty simple; it just
>>     shows the
>>      > pictures, sorted by category's, resizes them to whatever  
>> size the
>>     user
>>      > wants (with imagemagick), and searches though the collection.
>>      >
>>      > Right now, the program is using a Twisted webserver in the
>>     backend. All
>>      > the pages are dynamic, based off one template file. The gui  
>> is a very
>>      > simple Venster ( venster.sf.net <http://venster.sf.net>
>>     <http://venster.sf.net>) frontend, mainly
>>      > consisting of a web browser control, and some code to open a
>>     file-save
>>      > dialog when the user clicks save to save a picture.
>>      >
>>      > I'm wondering if there is a better way to do this. Perhaps
>>     twisted is a
>>      > bit too much for all of this? Another problem is when Twisted
>>     opens up
>>      > the server port, firewalls start complaining. Perhaps there  
>> is a
>>     better
>>      > way. Also, if there is something better then venster for a  
>> front end,
>>      > I'd be glad to hear about that, too.
>>      >
>>      > -Robert
>>      >
>>      >
>>      >
>>      
>> --------------------------------------------------------------------- 
>> ---
>>      >
>>      > _______________________________________________
>>      > Twisted-Python mailing list
>>      > Twisted-Python at twistedmatrix.com
>>     <mailto:Twisted-Python at twistedmatrix.com>
>>      > http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted- 
>> python
>>     _______________________________________________
>>     Twisted-Python mailing list
>>     Twisted-Python at twistedmatrix.com
>>     <mailto:Twisted-Python at twistedmatrix.com>
>>     http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>> --------------------------------------------------------------------- 
>> ---
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python




From manlio_perillo at libero.it  Sun Jul 16 12:18:07 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Sun, 16 Jul 2006 16:18:07 -0200
Subject: [Twisted-Python] again on nested sequence
Message-ID: <44BA82DF.5020704@libero.it>

Hi.

I want to render a list of <select> controls, each with a list of options.

I have attached the "simple" solution.
Of cource it does (and can't) not work.

The problem is that I can't find a better solution.
Moreover, with this code I obtain a strange error, log file attached.



Thanks  Manlio Perillo
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: nestedsequence.py
URL: </pipermail/twisted-python/attachments/20060716/6b85dde7/attachment.ksh>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nestedsequence.xhtml
Type: application/xhtml+xml
Size: 867 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20060716/6b85dde7/attachment-0002.xhtml>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: log.log
URL: </pipermail/twisted-python/attachments/20060716/6b85dde7/attachment-0001.ksh>

From factorf2 at yahoo.com  Sun Jul 16 12:36:21 2006
From: factorf2 at yahoo.com (Daniel Yount)
Date: Sun, 16 Jul 2006 11:36:21 -0700 (PDT)
Subject: [Twisted-Python] Need Example of DCC REC/SEND methods.
Message-ID: <20060716183621.84406.qmail@web56611.mail.re3.yahoo.com>

  I have worked with Twisted IRC module that does chat
and response, this works well.  However I was wanting
to use the module for DCC:SEND/REC. How to get the DCC
part of that module to get a file? Does anyone have an
example usage of the DccFileReceiveBasic or
DccFileReceive methods?
http://twistedmatrix.com/documents/current/api/twisted.words.protocols.irc.html

Daniel Yount
factorf2 at yahoo.com

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



From dialtone at divmod.com  Sun Jul 16 16:23:30 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Mon, 17 Jul 2006 00:23:30 +0200
Subject: [Twisted-Python] again on nested sequence
In-Reply-To: <44BA82DF.5020704@libero.it>
Message-ID: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>



On Sun, 16 Jul 2006 16:18:07 -0200, Manlio Perillo <manlio_perillo at libero.it> wrote:

This is off topic here... Twisted-web is the list. Anyway:

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:n="http://nevow.com/ns/nevow/0.1"
      lang="it" xml:lang="it">
  <head>
    <title>Nested sequence</title>
  </head>
  <body>
    <ul n:render="sequence" n:data="control_list">
        # Here you call data_control_list.
        # The result of data_control_list becomes the IContainer implementor
        # from now on inside this <ul> tag.
    
    
      <li n:pattern="item" n:render="control">
        # You call the render_control method on the IRenderer implementor which
        # is the Main instance this method fills 2 slots ctrl_label and ctrl_name.
        # every slot inside this <li> tag that has one of those 2 names will be
        # filled unless an inner tag fills one of those slots with a different
        # value
      
        <label><n:slot name="ctrl_label"/>

          <select n:render="sequence" n:data="option_list">
          # Here you call IContainer(ctx).child('option_list')
          # IContainer(ctx) is what was returned at the beginning with
          # data_control_list.
          # That result of that call is a list and the IContainer adapter 
          # for lists does position lookup.
          # __getitem__ for lists takes integers and since all the values
          # coming from the template are strings they have to be converted
          # to integers. The value coming is 'option_list' and this cannot
          # be converted to an integer. And thus the error.
          # The solution? Fairly simple, although it would have been better that,
          # after I explained how part of the rendering works, YOU tried to find
          # the solution, anyway I'll explain it :).
          #
          # There are 2 solutions (actually more but only 2 that keep using templates):
          # - Return a list of dictionaries from control_list
          # - Return a list of 3-tuples from control_list
          # To avoid changing the template too much let's just see how the
          # previous line should have been for the second option:
          # <select n:render="sequence" n:data="2">
          # That'it.
          # def data_control_list(self, ctx, data):
          #     return [('a', 'first', ('1', 'uno')), ('b', 'second', ('2', 'due'))]
          
          # Of course I hate this solution because it involes too much code...
          # you already wrote 3 methods where one would have been largerly enough.
          
            <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
            <option n:pattern="item" n:render="option">
              <n:attr name="label"><n:slot name="opt_label" /></n:attr>
              <n:attr name="value"><n:slot name="opt_value" /></n:attr>
            </option>
          </select>
        </label>
      </li>

    </ul>
  </body>
</html>


The best solution is the following (NOT TESTED, but should work):

class Main(rend.Page):
    docFactory = loaders.xmlfile('nested.xhtml')
    
    def data_control_list(self, ctx, data):
        return [{'ctrl_name': 'a',
                 'ctrl_label': 'first',
                 'option_list': {'opt_value': '1',
                                 'opt_label': 'uno'}
                },
                {'ctrl_name': 'b',
                 'ctrl_label': 'second',
                 'option_list': {'opt_value': '2',
                                 'opt_label': 'second'}
                }]


# nested.xhtml
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:n="http://nevow.com/ns/nevow/0.1"
      lang="it" xml:lang="it">
  <head>
    <title>Nested sequence</title>
  </head>
  <body>
    <ul n:render="sequence" n:data="control_list">
      <li n:pattern="item" n:render="mapping">
        <label><n:slot name="ctrl_label"/>
          <select>
            <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
            <nevow:invisible n:render="sequence" n:data="option_list">
            # Yes, I added the tag above because I'm unsure about the way
            # n:attr is dealt with when it is between the sequence render and
            # the patterns inside the sequence. This solution removes the
            # uncertainty. It's generally better to keep the slots filled
            # directly inside the interested renderer without crossing any other
            # special renderer tag like this template was doing.
                <option n:pattern="item" n:render="mapping">
                  <n:attr name="label"><n:slot name="opt_label" /></n:attr>
                  <n:attr name="value"><n:slot name="opt_value" /></n:attr>
                </option>
            </nevow:invisible>
          </select>
        </label>
      </li>
    </ul>
  </body>
</html>

As you can see this solution involves a considerably simpler and more generic
Page object that can be reused for a variety of usecases (especially when the
data_* method simply runs a query instead of returning an hardcoded result,
if the query returns a list of dictionaries already simply putting the query as
a Page parameter you'll be able to reuse the whole Page code except the query
and then simply change the templates as needed.



From lists at zopyx.com  Mon Jul 17 01:16:32 2006
From: lists at zopyx.com (Andreas Jung)
Date: Mon, 17 Jul 2006 09:16:32 +0200
Subject: [Twisted-Python] State of XMPP integration?
Message-ID: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>

Hi,

we are looking into XMPP/JEP-60 to be used with Zope. Since Zope can use 
Twisted on the server level I need to figure out what the current state of 
XMPP in Twisted is. I've also read about the Idavoll project (supporting
Jep-60 through Twisted). Anyone having some experience with XMPP in Twisted?

Thanks in advance,
Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20060717/d0f34443/attachment.sig>

From manlio_perillo at libero.it  Mon Jul 17 03:11:26 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 17 Jul 2006 07:11:26 -0200
Subject: [Twisted-Python] again on nested sequence
In-Reply-To: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>
References: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>
Message-ID: <44BB543E.90105@libero.it>

Valentino Volonghi aka Dialtone ha scritto:
> 
> 
> On Sun, 16 Jul 2006 16:18:07 -0200, Manlio Perillo
> <manlio_perillo at libero.it> wrote:
> 
> This is off topic here... Twisted-web is the list. 

Sorry and thanks for the response.

> [...]

>   <li n:pattern="item" n:render="control">
>   # You call the render_control method on the IRenderer implementor which
>   # is the Main instance this method fills 2 slots ctrl_label and ctrl_name.
>   # every slot inside this <li> tag that has one of those 2 names will be
>   # filled unless an inner tag fills one of those slots with a different


Thanks!
Nested slots "was" another of "obscure" points about nevow rendering
machinery.

However, I still want to do more tests on this.



>        # value
>             <label><n:slot name="ctrl_label"/>
> 
>          <select n:render="sequence" n:data="option_list">
>          # Here you call IContainer(ctx).child('option_list')
>          # IContainer(ctx) is what was returned at the beginning with
>          # data_control_list.
>          # That result of that call is a list and the IContainer adapter
>          # for lists does position lookup.
>          # __getitem__ for lists takes integers and since all the values
>          # coming from the template are strings they have to be converted
>          # to integers. The value coming is 'option_list' and this cannot
>          # be converted to an integer. And thus the error.
>          # The solution? Fairly simple, although it would have been
> better that,
>          # after I explained how part of the rendering works, YOU tried
> to find
>          # the solution, anyway I'll explain it :).

Ok.
Yesterday I read some old messages in the archive, so now I (hopefully)
understand better how data directives works.

Anyway thanks for your solutions, it is much simpler
(I have to modify how the query are done, dicts insteads of list).

> [...]
> 
> 
> The best solution is the following (NOT TESTED, but should work):
> 
> class Main(rend.Page):
>    docFactory = loaders.xmlfile('nested.xhtml')
>       def data_control_list(self, ctx, data):
>        return [{'ctrl_name': 'a',
>                 'ctrl_label': 'first',
>                 'option_list': {'opt_value': '1',
>                                 'opt_label': 'uno'}
>                },
>                {'ctrl_name': 'b',
>                 'ctrl_label': 'second',
>                 'option_list': {'opt_value': '2',
>                                 'opt_label': 'second'}
>                }]
> 
> 

Actually option_list is a list of dicts:

    def data_control_list(self, ctx, data):
        option_list = [
            {'opt_value': '1',
             'opt_label': 'uno'
             },
            {'opt_value': '2',
             'opt_label': 'due'
             }
            ]

        return [{'ctrl_name': 'a',
                 'ctrl_label': 'first',
                 'option_list': option_list
                 },
                {'ctrl_name': 'b',
                 'ctrl_label': 'second',
                 'option_list': option_list
                 }]


> [...]
>          <select>
>            <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
>            <nevow:invisible n:render="sequence" n:data="option_list">
>            # Yes, I added the tag above because I'm unsure about the way
>            # n:attr is dealt with when it is between the sequence render
> and
>            # the patterns inside the sequence. This solution removes the
>            # uncertainty. It's generally better to keep the slots filled
>            # directly inside the interested renderer without crossing
> any other
>            # special renderer tag like this template was doing.

I have tried without nevow:invisible and it seems to work.

>                <option n:pattern="item" n:render="mapping">
>                  <n:attr name="label"><n:slot name="opt_label" /></n:attr>
>                  <n:attr name="value"><n:slot name="opt_value" /></n:attr>
>                </option>
>            </nevow:invisible>
>          </select>
>        </label>
>      </li>
>    </ul>
>  </body>
> </html>
> 


Thanks and regards  Manlio Perillo



From twisted at ralphm.ik.nu  Mon Jul 17 03:19:26 2006
From: twisted at ralphm.ik.nu (Ralph Meijer)
Date: Mon, 17 Jul 2006 11:19:26 +0200
Subject: [Twisted-Python] State of XMPP integration?
In-Reply-To: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>
References: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>
Message-ID: <20060717091926.GA18344@ik.nu>

On Mon, Jul 17, 2006 at 09:16:32AM +0200, Andreas Jung wrote:
> Hi,
> 
> we are looking into XMPP/JEP-60 to be used with Zope. Since Zope can use 
> Twisted on the server level I need to figure out what the current state of 
> XMPP in Twisted is. I've also read about the Idavoll project (supporting
> Jep-60 through Twisted). Anyone having some experience with XMPP in Twisted?

I'm the maintainer of the Jabber bits in Twisted, developer of Idavoll
and JEP-0060 co-author. What is that you want to know?

Cross-posting to twisted-jabber at ik.nu, might be good to continue over
there.

-- 
Groetjes,

ralphm



From manlio_perillo at libero.it  Mon Jul 17 03:40:28 2006
From: manlio_perillo at libero.it (Manlio Perillo)
Date: Mon, 17 Jul 2006 07:40:28 -0200
Subject: [Twisted-Python] again on nested sequence
In-Reply-To: <44BB543E.90105@libero.it>
References: <20060716222330.29014.966665754.divmod.quotient.40221@ohm>
	<44BB543E.90105@libero.it>
Message-ID: <44BB5B0C.2000608@libero.it>

Manlio Perillo ha scritto:
> Valentino Volonghi aka Dialtone ha scritto:
>>
>> On Sun, 16 Jul 2006 16:18:07 -0200, Manlio Perillo
>> <manlio_perillo at libero.it> wrote:
>>
>> This is off topic here... Twisted-web is the list. 

I have Cc to twisted-web, hoping this will help the archiving.

> 

Just for future reference, here is an alternate solution.
It contains more code, but it is more database friendly
(and I like this - better performance too?).

It also contains some correction for the HTML code.

<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:n="http://nevow.com/ns/nevow/0.1"
      lang="it" xml:lang="it">
  <head>
    <title>Nested sequence II</title>
  </head>
  <body>
    <form action="post" method="post">
      <ul n:render="sequence" n:data="control_list">
        <li n:pattern="item" n:render="control">
          <label><n:slot name="ctrl_label"/>
            <select n:render="option_list">
              <n:attr name="name"><n:slot name="ctrl_name" /></n:attr>
              <option n:pattern="item" n:render="option">
                  <n:attr name="value"><n:slot name="opt_value" /></n:attr>
                  <n:slot name="opt_label" />
                </option>
            </select>
          </label>
        </li>
      </ul>
      <input type="submit" value="send" />
    </form>
  </body>
</html>


class Main(rend.Page):
    addSlash = True
    docFactory = loaders.xmlfile('nestedsequence.xhtml')

    def data_control_list(self, ctx, data):
        return [('a', 'first'),  ('b', 'second')]

    def render_option_list(self, ctx, data):
        option_list = [('1', 'uno'), ('2', 'due')]
        tag = ctx.tag

        pattern = inevow.IQ(ctx).patternGenerator("item")
        content = [pattern(data=option) for option in option_list]

        return ctx.tag.clear()[content]

    def render_control(self, ctx, data):
        print '*', data
        ctx.fillSlots('ctrl_label', data[1])
        ctx.fillSlots('ctrl_name', data[0])

        return ctx.tag

    def render_option(self, ctx, data):
        ctx.fillSlots('opt_label', data[1])
        ctx.fillSlots('opt_value', data[0])

        return ctx


Maybe it is not reusable as the previous solution, but it's not a problem.



Regards  Manlio Perillo



From l.allegrucci at gmail.com  Mon Jul 17 04:22:58 2006
From: l.allegrucci at gmail.com (Lorenzo Allegrucci)
Date: Mon, 17 Jul 2006 12:22:58 +0200
Subject: [Twisted-Python] twistd and passphrase
Message-ID: <1153131778.4914.30.camel@odyssey.lan>


Hi, I'm using twistd to run my server as a daemon (by "twistd -y
app.py").
Below is a sample of my code:

----app.py----
class MyService(internet.SSLServer):
    ...

application = service.Application("MyApp")
myService = MyService()
myService.setServiceParent(application)
----app.py----

Now, app.py needs a passphrase to read its SSL key and I wish to prompt
the user to enter such passphrase. I tried getpass() but it doesn't work
because /dev/stdin is already redirected to /dev/null.
How can I ask for a passphrase using twistd?
Thanks





From lists at zopyx.com  Mon Jul 17 04:58:49 2006
From: lists at zopyx.com (Andreas Jung)
Date: Mon, 17 Jul 2006 12:58:49 +0200
Subject: [Twisted-Python] State of XMPP integration?
In-Reply-To: <20060717091926.GA18344@ik.nu>
References: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>
	<20060717091926.GA18344@ik.nu>
Message-ID: <D4C849BE0DCE0EEBB0A22863@[192.168.0.28]>



--On 17. Juli 2006 11:19:26 +0200 Ralph Meijer <twisted at ralphm.ik.nu> wrote:

> On Mon, Jul 17, 2006 at 09:16:32AM +0200, Andreas Jung wrote:
>> Hi,
>>
>> we are looking into XMPP/JEP-60 to be used with Zope. Since Zope can use
>> Twisted on the server level I need to figure out what the current state
>> of  XMPP in Twisted is. I've also read about the Idavoll project
>> (supporting Jep-60 through Twisted). Anyone having some experience with
>> XMPP in Twisted?
>
> I'm the maintainer of the Jabber bits in Twisted, developer of Idavoll
> and JEP-0060 co-author. What is that you want to know?
>
> Cross-posting to twisted-jabber at ik.nu, might be good to continue over
> there.

Our use case is the following. With have heterogeneous apps (Windows based, 
Python based) that need to talk to each other. A Python/Zope app might 
provide an address book service that is used by some Windows application. 
The idea is to use XMPP as communication bus. The apps would register with 
a XMPP server and communicate through XMPP. Since almost all services are 
implemented on the Zope side it would make sense to integrate the XMPP
into Zope. The newest version of Zope can integrate Twisted as server 
(replacing ZServer). So the basic question (before performing implemenation
or deeper evaluation work) is: how  usable is the XMPP stuff in Twisted to 
be used as server component. I know that most Python XMPP solutions are 
client-side solutions and there is almost no stable XMPP server solution 
available for Zope. Is Twised(Words) the right road in this case?

Thanks,
Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 186 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20060717/ff0c0a00/attachment.sig>

From duncan.mcgreggor at gmail.com  Mon Jul 17 05:14:18 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Mon, 17 Jul 2006 05:14:18 -0600
Subject: [Twisted-Python] State of XMPP integration?
In-Reply-To: <D4C849BE0DCE0EEBB0A22863@[192.168.0.28]>
References: <96CA328C102FE5C126FEA9F4@[192.168.0.28]>	<20060717091926.GA18344@ik.nu>
	<D4C849BE0DCE0EEBB0A22863@[192.168.0.28]>
Message-ID: <44BB710A.4090107@gmail.com>

Andreas Jung wrote:

> --On 17. Juli 2006 11:19:26 +0200 Ralph Meijer <twisted at ralphm.ik.nu>
>
> So the basic question (before performing implemenation
> or deeper evaluation work) is: how  usable is the XMPP stuff in Twisted
> to be used as server component. I know that most Python XMPP solutions
> are client-side solutions and there is almost no stable XMPP server
> solution available for Zope. Is Twised(Words) the right road in this case?

Hey Andreas,

There's a pretty good example here:

  http://onlinegamegroup.com/projects/palaver/

It looks like they've put together much of the code you'd need. I
haven't actually used their product yet, so I can't speak for it's
strengths/weaknesses.

d



From donwsmith at gmail.com  Mon Jul 17 14:26:29 2006
From: donwsmith at gmail.com (Don Smith)
Date: Mon, 17 Jul 2006 13:26:29 -0700
Subject: [Twisted-Python] PB error
Message-ID: <24f63c200607171326y153541cfl480e364f02af5d33@mail.gmail.com>

I have a PB server, and one of my clients keeps getting this error:

Traceback (most recent call last):
  File "C:\Python24\Lib\site-packages\twisted\python\log.py", line 53, in
callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "C:\Python24\Lib\site-packages\twisted\python\log.py", line 38, in
callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "C:\Python24\Lib\site-packages\twisted\python\context.py", line 59,
in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "C:\Python24\Lib\site-packages\twisted\python\context.py", line 37,
in callWithContext
    return func(*args,**kw)
--- <exception caught here> ---
  File "C:\Python24\Lib\site-packages\twisted\internet\selectreactor.py",
line 139, in _doReadOrWrite
    why = getattr(selectable, method)()
  File "C:\Python24\Lib\site-packages\twisted\internet\tcp.py", line 348, in
doRead
    return self.protocol.dataReceived(data)
  File "C:\Python24\Lib\site-packages\twisted\spread\banana.py", line 184,
in dataReceived
    gotItem(item)
  File "C:\Python24\Lib\site-packages\twisted\spread\banana.py", line 114,
in gotItem
    self.callExpressionReceived(item)
  File "C:\Python24\Lib\site-packages\twisted\spread\banana.py", line 81, in
callExpressionReceived
    self.expressionReceived(obj)
  File "C:\Python24\Lib\site-packages\twisted\spread\pb.py", line 559, in
expressionReceived
    method(*sexp[1:])
  File "C:\Python24\Lib\site-packages\twisted\spread\pb.py", line 926, in
proto_answer
    d = self.waitingForAnswers[requestID]
exceptions.KeyError: 113
connection lost, reason <twisted.python.failure.Failure exceptions.KeyError>

Note that the server and client are on the same machine. The client is
reading log files and sending certain lines to the PB server. This is fairly
high volume, and when it seems to peak this happens.

I'm also using a ReconnectingPBClientFactory, but it doesn't reconnect when
this error occures.

Any ideas out there?

Thanks,

Don
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060717/2661d41f/attachment.html>

From mwm-keyword-twisted.c54178 at mired.org  Tue Jul 18 08:12:10 2006
From: mwm-keyword-twisted.c54178 at mired.org (Mike Meyer)
Date: Tue, 18 Jul 2006 10:12:10 -0400
Subject: [Twisted-Python] Distributing calls over a time period
Message-ID: <17596.60474.751052.630255@bhuda.mired.org>

I'm writing a capacity test tool for a client's web server. The idea
is to measure count how many requests exceed the spec'ed response time
under various loads, where load is specified as "M requests in N
secs". So I need to generate those M requests spaced relatively evenly
over N seconds, record the start time, and get a reasonably accurate
idea of when each requests ends.

I'm assuming that twisted callbacks will take care of the latter, and
don't have any reason to dobut that. However, the former has turned
out to be harder than I expected. I need to start the requests with
the reactor running so that previous requests will be handled
properly. The obvious solution - task.LoopingCall - isn't precise
enough, taking up to 33% more time than I'd alloted. The second
attempt - a loop using reactor.callLater with a delay based on the
requests and time left. That does slightly better, but only slightly.

Is there some other method that I might use for this? Or is twisted
the wrong tool entirely.

	Thanx,
	<mike
-- 
Mike Meyer <mwm at mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.



From exarkun at divmod.com  Tue Jul 18 08:31:22 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 18 Jul 2006 10:31:22 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <17596.60474.751052.630255@bhuda.mired.org>
Message-ID: <20060718143122.29014.825269123.divmod.quotient.42739@ohm>

On Tue, 18 Jul 2006 10:12:10 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
>I'm writing a capacity test tool for a client's web server. The idea
>is to measure count how many requests exceed the spec'ed response time
>under various loads, where load is specified as "M requests in N
>secs". So I need to generate those M requests spaced relatively evenly
>over N seconds, record the start time, and get a reasonably accurate
>idea of when each requests ends.
>
>I'm assuming that twisted callbacks will take care of the latter, and
>don't have any reason to dobut that. However, the former has turned
>out to be harder than I expected. I need to start the requests with
>the reactor running so that previous requests will be handled
>properly. The obvious solution - task.LoopingCall - isn't precise
>enough, taking up to 33% more time than I'd alloted. The second
>attempt - a loop using reactor.callLater with a delay based on the
>requests and time left. That does slightly better, but only slightly.
>
>Is there some other method that I might use for this? Or is twisted
>the wrong tool entirely.

What platform are you running on?  On any recent Linux system,
LoopingCall should be more than precise enough for this.

Can you be more specific about what you mean by "taking up to 33%
more time"?

What kind of time units are we talking about here?

Jean-Paul



From mwm-keyword-twisted.c54178 at mired.org  Tue Jul 18 08:50:11 2006
From: mwm-keyword-twisted.c54178 at mired.org (Mike Meyer)
Date: Tue, 18 Jul 2006 10:50:11 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <20060718143122.29014.825269123.divmod.quotient.42739@ohm>
References: <17596.60474.751052.630255@bhuda.mired.org>
	<20060718143122.29014.825269123.divmod.quotient.42739@ohm>
Message-ID: <17596.62755.395304.9448@bhuda.mired.org>

In <20060718143122.29014.825269123.divmod.quotient.42739 at ohm>, Jean-Paul Calderone <exarkun at divmod.com> typed:
> On Tue, 18 Jul 2006 10:12:10 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
> >I'm writing a capacity test tool for a client's web server. The idea
> >is to measure count how many requests exceed the spec'ed response time
> >under various loads, where load is specified as "M requests in N
> >secs". So I need to generate those M requests spaced relatively evenly
> >over N seconds, record the start time, and get a reasonably accurate
> >idea of when each requests ends.
> >
> >I'm assuming that twisted callbacks will take care of the latter, and
> >don't have any reason to doubt that. However, the former has turned
> >out to be harder than I expected. I need to start the requests with
> >the reactor running so that previous requests will be handled
> >properly. The obvious solution - task.LoopingCall - isn't precise
> >enough, taking up to 33% more time than I'd alloted. The second
> >attempt - a loop using reactor.callLater with a delay based on the
> >requests and time left. That does slightly better, but only slightly.
> >
> >Is there some other method that I might use for this? Or is twisted
> >the wrong tool entirely.
> 
> What platform are you running on?  On any recent Linux system,
> LoopingCall should be more than precise enough for this.

Development is being done on OSX. The final deployment platform is Red
Hat Egenera, but I'm still waiting on that to materialize.

> Can you be more specific about what you mean by "taking up to 33%
> more time"?

When I set things up to run in 60 seconds, it takes anywhere from 61
to 80 seconds.

> What kind of time units are we talking about here?

10s of seconds, with request counts such that we're getting 10s of
requests a second.

	Thanks,
	<mike
-- 
Mike Meyer <mwm at mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.



From exarkun at divmod.com  Tue Jul 18 09:13:10 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 18 Jul 2006 11:13:10 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <17596.62755.395304.9448@bhuda.mired.org>
Message-ID: <20060718151310.29014.659879015.divmod.quotient.42787@ohm>

On Tue, 18 Jul 2006 10:50:11 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
>In <20060718143122.29014.825269123.divmod.quotient.42739 at ohm>, Jean-Paul Calderone <exarkun at divmod.com> typed:
>> On Tue, 18 Jul 2006 10:12:10 -0400, Mike Meyer <mwm-keyword-twisted.c54178 at mired.org> wrote:
>> >I'm writing a capacity test tool for a client's web server. The idea
>> >is to measure count how many requests exceed the spec'ed response time
>> >under various loads, where load is specified as "M requests in N
>> >secs". So I need to generate those M requests spaced relatively evenly
>> >over N seconds, record the start time, and get a reasonably accurate
>> >idea of when each requests ends.
>> >
>> >I'm assuming that twisted callbacks will take care of the latter, and
>> >don't have any reason to doubt that. However, the former has turned
>> >out to be harder than I expected. I need to start the requests with
>> >the reactor running so that previous requests will be handled
>> >properly. The obvious solution - task.LoopingCall - isn't precise
>> >enough, taking up to 33% more time than I'd alloted. The second
>> >attempt - a loop using reactor.callLater with a delay based on the
>> >requests and time left. That does slightly better, but only slightly.
>> >
>> >Is there some other method that I might use for this? Or is twisted
>> >the wrong tool entirely.
>>
>> What platform are you running on?  On any recent Linux system,
>> LoopingCall should be more than precise enough for this.
>
>Development is being done on OSX. The final deployment platform is Red
>Hat Egenera, but I'm still waiting on that to materialize.
>
>> Can you be more specific about what you mean by "taking up to 33%
>> more time"?
>
>When I set things up to run in 60 seconds, it takes anywhere from 61
>to 80 seconds.
>
>> What kind of time units are we talking about here?
>
>10s of seconds, with request counts such that we're getting 10s of
>requests a second.

This is orders of magnitude out from where you should be having any
problems.  Can you share a brief example of how you're doing the
scheduling?

Jean-Paul



From mwm-keyword-twisted.c54178 at mired.org  Tue Jul 18 10:53:31 2006
From: mwm-keyword-twisted.c54178 at mired.org (Mike Meyer)
Date: Tue, 18 Jul 2006 12:53:31 -0400
Subject: [Twisted-Python] Distributing calls over a time period
In-Reply-To: <20060718151310.29014.659879015.divmod.quotient.42787@ohm>
References: <17596.62755.395304.9448@bhuda.mired.org>
	<20060718151310.29014.659879015.divmod.quotient.42787@ohm>
Message-ID: <17597.4619.583520.39791@bhuda.mired.org>

In <20060718151310.29014.659879015.divmod.quotient.42787 at ohm>, Jean-Paul Calderone <exarkun at divmod.com> typed:
> >> Can you be more specific about what you mean by "taking up to 33%
> >> more time"?
> >
> >When I set things up to run in 60 seconds, it takes anywhere from 61
> >to 80 seconds.
> >
> >> What kind of time units are we talking about here?
> >
> >10s of seconds, with request counts such that we're getting 10s of
> >requests a second.
> 
> This is orders of magnitude out from where you should be having any
> problems.  Can you share a brief example of how you're doing the
> scheduling?


Sure. Here's the start method that's responsible for starting self.counter
requests in self.opts.send seconds:

    def start(self):
        """Start a page fetch."""

        launch = time()
        defer = getPage('http://%s:8080/axis2/services/RadarWebService' %
                        self.host, postdata=payload, method='POST')
        defer.addCallback(self.check_response)
        defer.addCallbacks(self.good, self.bad, callbackArgs=(launch,),
                           errbackArgs=(launch,))
        self.actions.append(defer)
        if not hasattr(self, 'started'):
            self.started = launch

        self.counter -= 1
        if self.counter <= 0:
            self.done()
        else:
            delay = (self.started + self.opts.send - time()) / self.counter
            if delay < 0:
                delay = 0
            reactor.callLater(delay, self.start)


done uses self.started and time() to calcuate the time that's passed
and print it:

    def done(self):
            print 'Started %d requests in %f seconds.' % \
                  (self.reqs, time() - self.started)


	Thanks,
	<mike
-- 
Mike Meyer <mwm at mired.org>		http://www.mired.org/consulting.html
Independent Network/Unix/Perforce consultant, email for more information.



From naked at iki.fi  Wed Jul 19 02:09:35 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Wed, 19 Jul 2006 11:09:35 +0300
Subject: [Twisted-Python] Improving spawnProcess and friends
Message-ID: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>

Hi,

I'd like to write an improvement to spawnProcess - but I thought I
should check with the devs here first to get comments and to see if it
would be something that could be merged to the mainline at some point.

The primary thing I want to do is to improve the childFDs
handling. Instead of the childFDs being a dictionary, I'd like to make
it be an object that is set up beforehand.

In addition to the current functionality of duplicating one of the
parent's fds and providing simple pipes, I'd like to add features to
configure arbitrary PTYs to be set up, for socketpairs to be set up
and to allow the duplication of some pipe into multiple child fds. To
clarify a bit, I'd like for a way to be able to start a process and
say that a socketpair should be created, it should be dup'd to fd 0
and fd 1 on the child and a pipe should be created for reading and it
should be dup'd to fd 2 on the child. The same with PTYs as well, so
this change would unify Process and PTYProcess.

Also, I would want to make it possible for each created reader,
writer, PTY, socketpair, whatever to have a separate protocol. That
is, I want to be able to say that this PTY should be handled by my
protocol here that inherits from LineReceiver - instead of having to
implement all of those in the ProcessProtocol.

Backwards compatibility would be obtained by still allowing the dict
type in childFDs and just mapping them to the new object inside
spawnProcess. Also the custom protocols would be optional and the
default protocol would just call childDataReceived and
childConnectionLost on the ProcessProtocol.

The other feature I would like to implement while mucking around with
the process module is the preexec_fn feature of the subprocess
module. That is, a function that gets executed just before the child
is exec'd. There can probably be other uses for this as well, but the
main usage for this would be a chroot call. I'm considering if it
should be a list of functions executed in order - since there might be
a need to do a chroot, a chdir and another chroot or something similar
- but of course the user can just supply a function that does that.

The actual API for these isn't finalized, I was thinking of making it
up as I go and seeing how it turns out.

So, what do you think?

-- Naked

PS. I'm Hadaka in #twisted at OPN - just to make the connection in case
you've seen me.




From p.mayers at imperial.ac.uk  Wed Jul 19 03:33:31 2006
From: p.mayers at imperial.ac.uk (Phil Mayers)
Date: Wed, 19 Jul 2006 10:33:31 +0100
Subject: [Twisted-Python] Improving spawnProcess and friends
In-Reply-To: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
Message-ID: <44BDFC6B.3020401@imperial.ac.uk>

> writer, PTY, socketpair, whatever to have a separate protocol. That
> is, I want to be able to say that this PTY should be handled by my
> protocol here that inherits from LineReceiver - instead of having to
> implement all of those in the ProcessProtocol.

Yes, that is particularly irritating.



From stephane_brault at yahoo.fr  Wed Jul 19 06:50:05 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 12:50:05 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
Message-ID: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>

Hi, 
 I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?
 
 Thanks,
 
 Stéphane





From exarkun at divmod.com  Wed Jul 19 07:08:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Wed, 19 Jul 2006 09:08:32 -0400
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>
Message-ID: <20060719130832.29014.1889998959.divmod.quotient.44184@ohm>

On Wed, 19 Jul 2006 12:50:05 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Hi,
> I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?

storeFile returns a two-tuple of Deferreds.  The first Deferred fires with an
L{IFinishableConsumer}.  You put the data to uploda into that consumer.  You
do this using a producer, eg twisted.protocols.basic.FileSender.

Jean-Paul



From jacob at internet24.de  Wed Jul 19 07:16:12 2006
From: jacob at internet24.de (Thomas Jacob)
Date: Wed, 19 Jul 2006 15:16:12 +0200
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>
References: <20060719125005.52383.qmail@web26505.mail.ukl.yahoo.com>
Message-ID: <1153314972.4837.24.camel@localhost.localdomain>

Sort of like this:

def upload_sendfile(consumer, fileObj);
  FileSender().beginFileTransfer(fileObj, consumer).addCallback(  
                lambda _: consumer.finish()).addCallback(
                lambda _: fileObj.close())

dC,dL = ftpClient.storeFile(target_file)
dC.addCallback(upload_sendfile, open(source_file,'rb'))

Unfortunately though, this only works with a patched Twisted 2.4.0 
(http://twistedmatrix.com/trac/ticket/1794)

On Wed, 2006-07-19 at 12:50 +0000, Stéphane Brault wrote:
> Hi, 
>  I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?
>  
>  Thanks,
>  
>  Stéphane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 191 bytes
Desc: This is a digitally signed message part
URL: </pipermail/twisted-python/attachments/20060719/b367ae2b/attachment.sig>

From stephane_brault at yahoo.fr  Wed Jul 19 07:50:07 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 13:50:07 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719130832.29014.1889998959.divmod.quotient.44184@ohm>
Message-ID: <20060719135007.61521.qmail@web26512.mail.ukl.yahoo.com>

Thanks Jean-Paul,
 there was a bug in the SenderProtocol, but I found the answer in the ticket #1794.
 
 Stéphane

----- Message d'origine ----
De : Jean-Paul Calderone <exarkun at divmod.com>
À : twisted-python at twistedmatrix.com
Envoyé le : Mercredi, 19 Juillet 2006, 3h08mn 32s
Objet : Re: [Twisted-Python] using ftpclient storeFile question

On Wed, 19 Jul 2006 12:50:05 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Hi,
> I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?

storeFile returns a two-tuple of Deferreds.  The first Deferred fires with an
L{IFinishableConsumer}.  You put the data to uploda into that consumer.  You
do this using a producer, eg twisted.protocols.basic.FileSender.

Jean-Paul

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From stephane_brault at yahoo.fr  Wed Jul 19 07:53:55 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 13:53:55 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <1153314972.4837.24.camel@localhost.localdomain>
Message-ID: <20060719135355.7342.qmail@web26509.mail.ukl.yahoo.com>

Thanks Thomas,
 as I ran in the bug, almost got crazy, I searched and found the ticket ;-) 
 
 Stéphane

----- Message d'origine ----
De : Thomas Jacob <jacob at internet24.de>
À : Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Mercredi, 19 Juillet 2006, 3h16mn 12s
Objet : Re: [Twisted-Python] using ftpclient storeFile question

Sort of like this:

def upload_sendfile(consumer, fileObj);
  FileSender().beginFileTransfer(fileObj, consumer).addCallback(  
                lambda _: consumer.finish()).addCallback(
                lambda _: fileObj.close())

dC,dL = ftpClient.storeFile(target_file)
dC.addCallback(upload_sendfile, open(source_file,'rb'))

Unfortunately though, this only works with a patched Twisted 2.4.0 
(http://twistedmatrix.com/trac/ticket/1794)

On Wed, 2006-07-19 at 12:50 +0000, Stéphane Brault wrote:
> Hi, 
>  I'm using twisted to create a ftp client. The only problem I have is I don't understand how to upload a file (using storeFile), since the only parameters this function has is the path where to store the file. How do I indicate which file to upload ?
>  
>  Thanks,
>  
>  Stéphane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From dialtone at divmod.com  Wed Jul 19 08:17:24 2006
From: dialtone at divmod.com (Valentino Volonghi aka Dialtone)
Date: Wed, 19 Jul 2006 16:17:24 +0200
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719135007.61521.qmail@web26512.mail.ukl.yahoo.com>
Message-ID: <20060719141724.29014.958471635.divmod.quotient.44252@ohm>

On Wed, 19 Jul 2006 13:50:07 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> there was a bug in the SenderProtocol, but I found the answer in the ticket #1794.
>

There is also this ticket:
http://twistedmatrix.com/trac/ticket/1357

That provides a better API to upload a file.



From stephane_brault at yahoo.fr  Wed Jul 19 08:35:26 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 19 Jul 2006 14:35:26 +0000 (GMT)
Subject: [Twisted-Python] using ftpclient storeFile question
In-Reply-To: <20060719141724.29014.958471635.divmod.quotient.44252@ohm>
Message-ID: <20060719143526.87807.qmail@web26510.mail.ukl.yahoo.com>

Thanks Valentino,
 
 Stéphane

----- Message d'origine ----
De : Valentino Volonghi aka Dialtone <dialtone at divmod.com>
À : Stéphane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Mercredi, 19 Juillet 2006, 4h17mn 24s
Objet : Re: Re : [Twisted-Python] using ftpclient storeFile question

On Wed, 19 Jul 2006 13:50:07 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> there was a bug in the SenderProtocol, but I found the answer in the ticket #1794.
>

There is also this ticket:
http://twistedmatrix.com/trac/ticket/1357

That provides a better API to upload a file.






From andrew-twisted at puzzling.org  Wed Jul 19 08:46:05 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Thu, 20 Jul 2006 00:46:05 +1000
Subject: [Twisted-Python] Improving spawnProcess and friends
In-Reply-To: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
Message-ID: <20060719144605.GA21888@steerpike.home.puzzling.org>

On Wed, Jul 19, 2006 at 11:09:35AM +0300, Nuutti Kotivuori wrote:
> Hi,
> 
> I'd like to write an improvement to spawnProcess - but I thought I
> should check with the devs here first to get comments and to see if it
> would be something that could be merged to the mainline at some point.

Your proposed features sound interesting, but with a patch or even a proposed
API it's hard to say if it would be mergeable :)

[...]
> 
> The actual API for these isn't finalized, I was thinking of making it
> up as I go and seeing how it turns out.

That's a reasonable strategy.  I strongly recommend writing tests as you go
along (or first, even), so that when you're happy with it, you already have
patch with tests to offer.  It won't get merged without tests :)

Once you have a patch, file it on the twistedmatrix.com Trac.  Or if you want to
discuss an API proposal, feel free to follow up on this list.

I think the odds are good that it would be merged, but it depends on the 
details.

-Andrew.




From glyph at divmod.com  Wed Jul 19 09:54:14 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Wed, 19 Jul 2006 11:54:14 -0400
Subject: [Twisted-Python] Improving spawnProcess and friends
In-Reply-To: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
Message-ID: <20060719155414.29014.863402158.divmod.quotient.44373@ohm>

On Wed, 19 Jul 2006 11:09:35 +0300, Nuutti Kotivuori <naked at iki.fi> wrote:

>I'd like to write an improvement to spawnProcess - but I thought I
>should check with the devs here first to get comments and to see if it
>would be something that could be merged to the mainline at some point.

Thanks :).

It's probably worth mentioning these:
   http://twistedmatrix.com/trac/ticket/1218
   http://twistedmatrix.com/trac/ticket/950
   http://twistedmatrix.com/trac/ticket/1478
as long as we're talking about this API.

>The primary thing I want to do is to improve the childFDs
>handling. Instead of the childFDs being a dictionary, I'd like to make
>it be an object that is set up beforehand.

I'd like to see a proposed API for setting up this object.  A different way of doing this (which I think I prefer) would be to add a feature to ProcessProtocol rather than modifying the behavior of the childFDs argument.  After all, it's generally a particular process protocol that wants to be able to communicate on various channels.  This way it would be possible - although not necessarily easy - to allow your ProcessProtocol object to have a few of its methods called post-fork, but pre-exec.

>In addition to the current functionality of duplicating one of the
>parent's fds and providing simple pipes, I'd like to add features to
>configure arbitrary PTYs to be set up, for socketpairs to be set up
>and to allow the duplication of some pipe into multiple child fds. To
>clarify a bit, I'd like for a way to be able to start a process and
>say that a socketpair should be created, it should be dup'd to fd 0
>and fd 1 on the child and a pipe should be created for reading and it
>should be dup'd to fd 2 on the child. The same with PTYs as well, so
>this change would unify Process and PTYProcess.

>Also, I would want to make it possible for each created reader,
>writer, PTY, socketpair, whatever to have a separate protocol. That
>is, I want to be able to say that this PTY should be handled by my
>protocol here that inherits from LineReceiver - instead of having to
>implement all of those in the ProcessProtocol.

I believe that putting this into spawnProcess is operating at the wrong layer of abstraction.  The feature you're describing is highly useful though, so providing a utility implementation of ProcessProtocol that allows you to hook up regular protocols to various FDs would be very good.  IMHO ProcessProtocol looks deceptively like a regular protocol, and probably its dataReceived and connectionLost methods should be (softly) deprecated.  The right way to write a ProcessProtocol is to override childDataReceived, childConnectionLost and processEnded.  A ProcessProtocol that could hook up _arbitrary_ FDs as input and output to a Protocol would be incredibly useful but it would be a good start just to have a better-defined way to deal with separating process control from protocol logic; so useful it might even be worth putting this functionality on the base ProcessProtocol.

It seems like a good first step here would be refactoring the various flavors of file descriptor (including the mess in _pollingfile and _dumbwin32proc) so that they can be easily and portably invoked by users wanting to create out-of-band (non stdin/stdout) channels of communication between their processes.  I think it would be best if these channels could have a "flavor requirement" specified (i.e. pipe, socketpair, PTY), but also have a general stream-based transport API that would work the same from a high-level application's point of view on Windows and Mac and Linux; for example, use pipes if available, numeric unix sockets if not, localdomain sockets if that's not available either, depending on platform.

All of this is leaning towards making 0,1,2 as un-special as possible, which I like very much.  That also implies that you'll need to clean up stdio.StandardIO, and instead add an API like reactor.connectParentFD(factory, fileno, flavor=None).  On my first read through I started trying to describe a way to communicate the expected list of file descriptors and their settings to the child process but that seems best left up to the application.

>Backwards compatibility would be obtained by still allowing the dict
>type in childFDs and just mapping them to the new object inside
>spawnProcess. Also the custom protocols would be optional and the
>default protocol would just call childDataReceived and
>childConnectionLost on the ProcessProtocol.

This is why I'd strongly prefer the logic remain in ProcessProtocol.  There should be _one_ location for dealing with the state of a running subprocess and its shared FD map; the ProcessProtocol seems the logical place.  We could hide it all inside the reactor, but I am pretty sure that important aspects will forget to be exposed.

>The other feature I would like to implement while mucking around with
>the process module is the preexec_fn feature of the subprocess
>module. That is, a function that gets executed just before the child
>is exec'd. There can probably be other uses for this as well, but the
>main usage for this would be a chroot call. I'm considering if it
>should be a list of functions executed in order - since there might be
>a need to do a chroot, a chdir and another chroot or something similar
>- but of course the user can just supply a function that does that.

This gives me another good idea.  Right now there's a bunch of stuff that happens in the guts of the process module; chdir, setuid, fdmap setup.  Most of this could be factored into an UNIX-specific ProcessProtocol, centralized in "beforeFork" and "beforeExec" methods.  I'm not really sure how to best clearly expose that non-portable features are required when invoking spawnProcess, but the obvious idea is that if IUNIXProcessProtocol.providedBy(yourProtocol), barf on Windows, Jython (if they ever do another release and we add support for it again), etc.  Then you could explicitly  subclass either UNIXProcessProtocol if you explicitly needed nonportable features (which would still allow you to use them on UNIX; UNIXProcessProtocol == ProcessProtocol, on platforms which support it); but subclassing ProcessProtocol would select a more platform-appropriate method.

Originally I thought that the process-communication logic would be specific to a reactor, which is why it's factored as it is; after a few years of working with process spawning closely though it is clear to me that differences are entirely a feature of the OS and not of the reactor.

>The actual API for these isn't finalized, I was thinking of making it
>up as I go and seeing how it turns out.

I'd certainly like to see how a stab at this which can actually run turns out.

>So, what do you think?

Well, I liked your ideas, and then they made me think of some ideas that I liked even more :).  I hope that you'll continue to work on this.  Please feel free to copy and paste chunks of this (both your ideas and mine) into a ticket.

I'm working on at least 3 projects right now which use process spawning and these changes would improve all of them; although only one will be running long enough to actually see any of these implemented, I'm still pretty excited about the idea.



From naked at iki.fi  Wed Jul 19 15:25:01 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Thu, 20 Jul 2006 00:25:01 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
Message-ID: <87wta9nv82.fsf@aka.i.naked.iki.fi>

glyph at divmod.com wrote:
> On Wed, 19 Jul 2006 11:09:35 +0300, Nuutti Kotivuori <naked at iki.fi> wrote:
>> I'd like to write an improvement to spawnProcess - but I thought I
>> should check with the devs here first to get comments and to see if it
>> would be something that could be merged to the mainline at some point.
>
> Thanks :).
>
> It's probably worth mentioning these:
> http://twistedmatrix.com/trac/ticket/1218
> http://twistedmatrix.com/trac/ticket/950
> http://twistedmatrix.com/trac/ticket/1478
> as long as we're talking about this API.

Hopefully all of those will get fixed while we are at it.

>> The primary thing I want to do is to improve the childFDs
>> handling. Instead of the childFDs being a dictionary, I'd like to make
>> it be an object that is set up beforehand.
>
> I'd like to see a proposed API for setting up this object.  A
> different way of doing this (which I think I prefer) would be to add
> a feature to ProcessProtocol rather than modifying the behavior of
> the childFDs argument.  After all, it's generally a particular
> process protocol that wants to be able to communicate on various
> channels.  This way it would be possible - although not necessarily
> easy - to allow your ProcessProtocol object to have a few of its
> methods called post-fork, but pre-exec.

Hmmh. Well, firstly, actually I don't think I explained the object
idea properly. My original idea there was just to use the object as a
holder for the configuration - and nothing more. A syntax extension to
allow a nicely readable way of specifying childFDs instead of mappings
from integer to tuple of lists or whatever a complex set up like that
would end up being. But, now I'm not sure if I want the object at all
there.

I'm not sure if I understand what you are saying, though - atleast not
in a concrete way. I agree that generally a particular process
protocol is coded to explicitly read and write in certain
communication channels - so it is reasonable that the process protocol
would specify these communication channels.

However, I'm not sure I like the idea of methods firing from
ProcessProtocol post-fork but pre-exec. We are living on the child
side there - and calling any methods from the transport, reactor or
many other places would be a bad idea. I'd like the parts that get
executed on the child side be very well defined and generally not
supplied by the user.

>> In addition to the current functionality of duplicating one of the
>> parent's fds and providing simple pipes, I'd like to add features to
>> configure arbitrary PTYs to be set up, for socketpairs to be set up
>> and to allow the duplication of some pipe into multiple child fds. To
>> clarify a bit, I'd like for a way to be able to start a process and
>> say that a socketpair should be created, it should be dup'd to fd 0
>> and fd 1 on the child and a pipe should be created for reading and it
>> should be dup'd to fd 2 on the child. The same with PTYs as well, so
>> this change would unify Process and PTYProcess.
>
>> Also, I would want to make it possible for each created reader,
>> writer, PTY, socketpair, whatever to have a separate protocol. That
>> is, I want to be able to say that this PTY should be handled by my
>> protocol here that inherits from LineReceiver - instead of having to
>> implement all of those in the ProcessProtocol.
>
> I believe that putting this into spawnProcess is operating at the
> wrong layer of abstraction.  The feature you're describing is highly
> useful though, so providing a utility implementation of
> ProcessProtocol that allows you to hook up regular protocols to
> various FDs would be very good.  IMHO ProcessProtocol looks
> deceptively like a regular protocol, and probably its dataReceived
> and connectionLost methods should be (softly) deprecated.  The right
> way to write a ProcessProtocol is to override childDataReceived,
> childConnectionLost and processEnded.  A ProcessProtocol that could
> hook up _arbitrary_ FDs as input and output to a Protocol would be
> incredibly useful but it would be a good start just to have a
> better-defined way to deal with separating process control from
> protocol logic; so useful it might even be worth putting this
> functionality on the base ProcessProtocol.

Yes - the outReceived, errReceived, write, writeSequence, closeStdin,
closeStdout, closeStderr etc. methods seem to be a cause of a lot of
grief. It would be nice if childDataReceived, childConnectionLost,
processEnded, transport.writeToChild, transport.closeChildFD,
transport.signalProcess would be the only thing to worry about.

I was thinking about having the process readers and writers directly
connected to separate Protocols - and having those readers and writers
be the transports for those Protocols. And ProcessProtocol would kind
of just miss out on the communication that is happening and basically
be just a holder for signalProcess and processEnded.

Were you thinking of building the forwarding logic into
ProcessProtocol so that the readers and writers talk to the
ProcessProtocol which then forwards the commands onwards to different
Protocols? If so, what would be the transport for those Protocols? I'd
like for them to be able to say transport.loseConnection() to close
the communication channel they are using? If so, atleast some kind of
new transport forwarding these is needed. Or would they have the
readers and writers as transports - and those readers and writers just
communicate to them through the processProtocol. I'm not sure I'd like
an asymmetric set up like that.

> It seems like a good first step here would be refactoring the
> various flavors of file descriptor (including the mess in
> _pollingfile and _dumbwin32proc) so that they can be easily and
> portably invoked by users wanting to create out-of-band (non
> stdin/stdout) channels of communication between their processes.  I
> think it would be best if these channels could have a "flavor
> requirement" specified (i.e. pipe, socketpair, PTY), but also have a
> general stream-based transport API that would work the same from a
> high-level application's point of view on Windows and Mac and Linux;
> for example, use pipes if available, numeric unix sockets if not,
> localdomain sockets if that's not available either, depending on
> platform.
>
> All of this is leaning towards making 0,1,2 as un-special as
> possible, which I like very much.  That also implies that you'll
> need to clean up stdio.StandardIO, and instead add an API like
> reactor.connectParentFD(factory, fileno, flavor=None).  On my first
> read through I started trying to describe a way to communicate the
> expected list of file descriptors and their settings to the child
> process but that seems best left up to the application.

Okay, I didn't get most of the stuff here. I need more explanation to
understand what's going on. I remember fighting with stdio.StandardIO
at some point, so cleaning that up sounds something that should be
done.

When I'm narrowly looking at this process spawning stuff, I see a
communication channel as a single object that has three places it does
its magic at.

There is the setupPrefork() stage which is called at first, before
anything special is done. This does not return anything, it just does
stuff, if necessary. Then we fork. On the child side we call
setupChild(). This will do all the things necessary for setting up a
communication channel for the child process to use, and it will return
that a single filedescriptor (a file descriptor is just about the only
reasonable thing to survive an exec, so there is no need for variance
here). On the parent side we call setupParent(). This will set up the
communication channel on the parent side, and it will return a
transport that is capable of reading and/or writing the channel.

As an example, for ReadPipe(), setupPrefork() would call os.pipe() and
mark down the read and write file descriptors. Then setupChild() would
close the read fd and return the write fd. And setupParent() would
close the write fd and set up a ProcessReader handing the read fd.

Another example, say ReadNamedPipe('/tmp/namedpipe'), setupPrefork()
would call mknod to create the named pipe if necessary, but would open
no file descriptors. Then setupChild() would open the pipe for writing
and return the fd. And setupParent() would open the pipe for reading
and set up a ProcessReader handling the fd.

>> Backwards compatibility would be obtained by still allowing the dict
>> type in childFDs and just mapping them to the new object inside
>> spawnProcess. Also the custom protocols would be optional and the
>> default protocol would just call childDataReceived and
>> childConnectionLost on the ProcessProtocol.
>
> This is why I'd strongly prefer the logic remain in ProcessProtocol.
> There should be _one_ location for dealing with the state of a
> running subprocess and its shared FD map; the ProcessProtocol seems
> the logical place.  We could hide it all inside the reactor, but I
> am pretty sure that important aspects will forget to be exposed.

I'm still not entirely sure what you mean here. The Process object
(the "transport" or so) would hold the *state* of the running
subprocess and all its communication channels. The ProcessProtocol
would contain the stuff *dealing* with the state. And the initial
configuration of what to set up would either come from spawnProcess
(Process object initializer arguments) or from ProcessProtocol somehow
- or actually both.

It is obvious that ProcessProtocol can't be responsible for all the
configuration the Process needs - it shouldn't, for example, say the
name of the executable being executed. And I don't think it should be
responsible for the chdirs, chroots and such either - those should be
changeable at execution time without touching the
ProcessProtocol. Just as it is possible to change the address a TCP
connection is made without changing the Protocol of that
connection. But I do think it could be responsible for the FD mapping
for the process, since that is intimately tied with the logic of the
ProcessProtocol.

>> The other feature I would like to implement while mucking around
>> with the process module is the preexec_fn feature of the subprocess
>> module. That is, a function that gets executed just before the
>> child is exec'd. There can probably be other uses for this as well,
>> but the main usage for this would be a chroot call. I'm considering
>> if it should be a list of functions executed in order - since there
>> might be a need to do a chroot, a chdir and another chroot or
>> something similar - but of course the user can just supply a
>> function that does that.
>
> This gives me another good idea.  Right now there's a bunch of stuff
> that happens in the guts of the process module; chdir, setuid, fdmap
> setup.  Most of this could be factored into an UNIX-specific
> ProcessProtocol, centralized in "beforeFork" and "beforeExec"
> methods.  I'm not really sure how to best clearly expose that
> non-portable features are required when invoking spawnProcess, but
> the obvious idea is that if
> IUNIXProcessProtocol.providedBy(yourProtocol), barf on Windows,
> Jython (if they ever do another release and we add support for it
> again), etc.  Then you could explicitly subclass either
> UNIXProcessProtocol if you explicitly needed nonportable features
> (which would still allow you to use them on UNIX;
> UNIXProcessProtocol == ProcessProtocol, on platforms which support
> it); but subclassing ProcessProtocol would select a more
> platform-appropriate method.
>
> Originally I thought that the process-communication logic would be
> specific to a reactor, which is why it's factored as it is; after a
> few years of working with process spawning closely though it is
> clear to me that differences are entirely a feature of the OS and
> not of the reactor.

Most of this went past me as well.

If the setup stuff like chdir, setuid, fdmap, etc. is factored into an
UNIX-specific ProcessProtocol, then how are those configured when
spawning the process? I'd hate to have to make a new ProcessProtocol
or chance one every time I wanted to spawn an executable in a
different path.

I have no idea what so ever on what is the best way to expose the
non-portability of many of the things. As it stands now, some
communication channels obviously are non-portable - and in my mind
it's perfectly fine that SocketPair() throws an exception on
instantiation if the platform doesn't support it ;-)

In general I see it such that creating processes is such an OS
specific thing that there are more differences than not. The feature
sets are just too disjoint. So I see this thing as just allowing the
user to pick the features he wants and if they can't be supported, we
can boom.

> Well, I liked your ideas, and then they made me think of some ideas
> that I liked even more :).  I hope that you'll continue to work on
> this.  Please feel free to copy and paste chunks of this (both your
> ideas and mine) into a ticket.

I created an issue #1939 for this and added some of the conversation
here there.

> I'm working on at least 3 projects right now which use process
> spawning and these changes would improve all of them; although only
> one will be running long enough to actually see any of these
> implemented, I'm still pretty excited about the idea.

Running long enough? I intend to be finished by the night ;-)

Well, not really, but I do hope to finish this whole thing rather fast
and not let it linger.

On that note, I created my first try at some of the features. It's
filled with FIXMEs, no documentation, bad class names and no specific
test cases. But, it provides a compatible API and the process test
suite passes with it.

What it does is that it defines a set of communication channel helper
objects. Right now there's PassthroughFD, ReadPipe, WritePipe, PTY and
SocketPair. SocketPair is not implemented.

The API for using these is *really* convoluted now, but it does
support all the features.

The childFDs dictionary in its native form now should contain:

  { <name>: (<helper instance>, <list or tuple of fd numbers>) }

The name part is what the communication channel will be known with in
the ProcessProtocol. That is, the thing returned in childDataReceived
and childConnectionLost etc. The helper instance is an instance of one
of the helper classes. The list or tuple of fd numbers is the child
file descriptor numbers the channel should be ultimately mapped
to. Additionally, a name of '_defaultWriter' specifies the target name
transport.write() calls should write to. There are a few shorthands:

 { <name>: <helper instance> } is mapped to:
 { <name>: (<helper instance>, (<name>,)) }

 { <name>: 'r' } is mapped to:
 { <name> (ReadPipe(), (<name>,)) }

 { <name>: <int> } is mapped to:
 { <name>: (PassthroughFD(<int>), (<name>,)) }

So, to achieve a behaviour that is similar to the old PTYProcess
behaviour, you can say:

 { '_defaultWriter': 1,
   1: (PTY(), (0, 1, 2)) }

That is, make a PTY helper creating a new PTY, name it 1 in the
ProcessProtocol and map it to file descriptors 0, 1 and 2 on the
child. Also, make the default write method write to helper named 1.

This way, the outReceived() method is called on the ProcessProtocol
when data is received from the PTY - and transport.write() will write
data to the PTY.

I shall ponder these things for a while - and start implementing the
next phase when I have a good idea on what it should be.

-- Naked





From naked at iki.fi  Sat Jul 22 09:44:16 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Sat, 22 Jul 2006 18:44:16 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
	<87wta9nv82.fsf@aka.i.naked.iki.fi>
Message-ID: <87ejwdod9r.fsf@aka.i.naked.iki.fi>

Nuutti Kotivuori wrote:
> I shall ponder these things for a while - and start implementing the
> next phase when I have a good idea on what it should be.

Okay. I think I have some sort of an idea now. But, first, a problem.

If we are to use ProcessProtocol as having some logic that sets up the
communication channels for a child process, there needs to be some
function called before the process starts. But.

If there's a function in ProcessProtocol that is called before
makeConnection() (and hence connectionMade()) is called, there is no
self.transport in the ProcessProtocol. That would mean that the
current Process instance would need to be given as an argument, or
assigned separately (something else than makeConnection() called
before?). Both approaches do seem a bit yuckupucky to me.

Or, we could call makeConnection() on the ProcessProtocol before the
child process is started. But that sounds even worse. It is a change
from the current behavior and the child's pid isn't known at that
time. And then we would have to have another method called when the
child is spawned. And in general, I think connectionMade() should mean
connection made, and not pre-setup starting.

So, how about we bring the same thing that is in every other protocol
to processes as well? Factories.

Let's say that there is a ProcessProtocolFactory class. That
ProcessProtocolFactory is responsible for setting up the communication
pipes. That ProcessProtocolFactory determines which Protocol instances
are to be created for handling the communication pipes. The actual
ProcessProtocol behaves the same as it used to - no change there.

And perhaps UNIXProcessProtocolFactory, that would be responsible for
the setuid, setsid, etc. things, would be the platform abstraction
method that glyph was wanting for?

Heck, there might even be a RestartingProcessProtocolFactory, that
would automatically restart the child process when it dies, with an
exponential backoff? And a ProcessProtocolCreator that could be
similar to ClientCreator. Or, perhaps even the factory can return a
Deferred from some setup method if setting up communication pipes
require things that cannot be done synchronously? The flexibility just
seems so much better here.

Backward compatibility with reactor.spawnProcess() would be achieved
simply by having that function create a ProcessProtocolFactory that is
able to handle the old childFDs arguments and such - and all
compatibility glue would be in that function alone and it could be
deprecated. New code would use an interface that would take a
ProcessProtocolFactory instance as a parameter.

How does this sound? If nobody yells murder, I'll be starting to build
a rudimentary implementation of this to see how the API would
naturally turn out to be and then submit it here for review.

-- Naked







From exarkun at twistedmatrix.com  Sat Jul 22 23:05:01 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 23 Jul 2006 05:05:01 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1153631101.8.2099179670@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-16 through 2006-07-23
Bugs opened: 20    Bugs closed: 5  Total open bugs: 672 (+15)

|== Type Changes   |== Priority Changes   |== Component Changes   
|Defect:       +5  |Highest:  +3          |Core:  +11             
|Enhancement:  +9  |High:     +0          |Trial:  +4             
|Task:         +1  |Normal:  +11          |Web:    +1             
                   |Low:      +1          |Web2:   +0             
                                          |Words:  -1             


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1936] loopback.loopback blocks, should return Deferred (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/1936

[#1938] web.Session.checkExpired and web.Site.makeSession do not keep DelayedCall handles (opened by acapnotic)
    defect          web        http://twistedmatrix.com/trac/ticket/1938

[#1940] make Twisted tests runnable from within a zipfile (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1940

[#1942] Fix IOCP buildslave (opened by exarkun)
    task            core       http://twistedmatrix.com/trac/ticket/1942

                    ===== High =====
[#1937] change twisted.web2.stream to use regular consumer/producer/protocol API, rather than "read() -> Deferred" (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1937

                    ===== Normal =====
[#1929] twisted.web2.test.test_xmlrpc should not use twisted.web.xmlrpc.Proxy (opened by dreid)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1929

[#1931] Rename "Efficient High-Volume Streaming" doc to "Producers and Consumers: Efficient High-Volume Streaming" (opened by spiv)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1931

[#1932] Setuptools support (opened by philn)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1932

[#1933] Add 'disconnecting' to the ITransport interface. (opened by spiv)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1933

[#1934] twisted.web2.auth.wrapper.HTTPAuthResource problem (opened by yasusii) (CLOSED, duplicate)
    defect          web2       http://twistedmatrix.com/trac/ticket/1934

[#1935] Calling reactor.iterate inside the reactor should raise an error (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/1935

[#1939] improve process module with generic support for pipes, PTYs, socketpairs etc. (opened by naked)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1939

[#1941] Add LineReceiver.loseConnection (opened by spiv)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1941

[#1943] better epytext in twisted.application and twisted.conch (opened by mwh)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1943

[#1944] trial --coverage makes some tests fail spuriously (opened by washort)
    defect          trial      http://twistedmatrix.com/trac/ticket/1944

[#1945] Gather Twisted testing patterns into a common module (opened by jml)
    defect          core       http://twistedmatrix.com/trac/ticket/1945

[#1946] ErrorHolder is basically untested (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/1946

[#1947] Update twisted.trial.runner and friends to use t.p.modules (opened by jml)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1947

[#1948] TestLoader's sorting is a mess (opened by jml)
    defect          trial      http://twistedmatrix.com/trac/ticket/1948

                    ===== Low =====
[#1930] create a libevent reactor (opened by PenguinOfDoom)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1930



Closed Bugs
______________________
                    ===== Highest =====
[#1928] Refactor socket operations from tcp.py/udp.py into the reactor (opened by PenguinOfDoom, closed by PenguinOfDoom, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1928

                    ===== High =====
[#1365] select.error: (10022, 'Windows Error 0x2726') (opened by ghazel, closed by teratorn, wontfix)
    defect          core       http://twistedmatrix.com/trac/ticket/1365

                    ===== Normal =====
[#1814] twisted.web2.auth should provide an UnauthorizedResponse (opened by dreid, closed by dreid, fixed)
    enhancement     web2       http://twistedmatrix.com/trac/ticket/1814

[#1934] twisted.web2.auth.wrapper.HTTPAuthResource problem (opened by yasusii, closed by dreid, duplicate)
    defect          web2       http://twistedmatrix.com/trac/ticket/1934

[#1923] XPath query doesn't always handle namespaces correctly (opened by lewisbaker, closed by ralphm, worksforme)
    defect          words      http://twistedmatrix.com/trac/ticket/1923





From sflist at ihonk.com  Sun Jul 23 03:17:59 2006
From: sflist at ihonk.com (Steve Freitas)
Date: Sun, 23 Jul 2006 02:17:59 -0700
Subject: [Twisted-Python] Can a Viewable be custom unjellied on the
	receiving end?
Message-ID: <1153646279.20767.5.camel@lothar>

Hi,

I'm using a pb.Viewable, and I'd like to send it to a client, using it
the way a Viewable typically would be used. However, on top of that, I
want it to be unjellied on the receiver's end as an instance of a
particular class of my own definition. However, using
pb.setUnjellyableForClass seems to be ignored in this case, and the
Viewable is arriving at the client as a vanilla RemoteReference.

Any way around that short of adding my custom class as a super to the
RemoteReference and calling its __init__() by hand?

Twisted 2.2.0 on Debian Sid.

Thanks!

Steve




From itamar at itamarst.org  Sun Jul 23 10:17:25 2006
From: itamar at itamarst.org (Itamar Shtull-Trauring)
Date: Sun, 23 Jul 2006 12:17:25 -0400
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
In-Reply-To: <87ejwdod9r.fsf@aka.i.naked.iki.fi>
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
	<87wta9nv82.fsf@aka.i.naked.iki.fi> <87ejwdod9r.fsf@aka.i.naked.iki.fi>
Message-ID: <1153671445.5665.1.camel@localhost.localdomain>

On Sat, 2006-07-22 at 18:44 +0300, Nuutti Kotivuori wrote:

... adding factory object to process spawning ...

> How does this sound? If nobody yells murder, I'll be starting to build
> a rudimentary implementation of this to see how the API would
> naturally turn out to be and then submit it here for review.

Seems... over-engineered. I'm not sure adding a whole new object is the
way to go on this.




From naked at iki.fi  Sun Jul 23 14:15:49 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Sun, 23 Jul 2006 23:15:49 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <87zmf6ow1s.fsf@aka.i.naked.iki.fi>
	<20060719155414.29014.863402158.divmod.quotient.44373@ohm>
	<87wta9nv82.fsf@aka.i.naked.iki.fi>
	<87ejwdod9r.fsf@aka.i.naked.iki.fi>
	<1153671445.5665.1.camel@localhost.localdomain>
Message-ID: <878xmknklm.fsf@aka.i.naked.iki.fi>

Itamar Shtull-Trauring wrote:
> On Sat, 2006-07-22 at 18:44 +0300, Nuutti Kotivuori wrote:
>
> ... adding factory object to process spawning ...
>
>> How does this sound? If nobody yells murder, I'll be starting to build
>> a rudimentary implementation of this to see how the API would
>> naturally turn out to be and then submit it here for review.
>
> Seems... over-engineered. I'm not sure adding a whole new object is the
> way to go on this.

A valid concern, it did cross my mind as well. However, I have yet to
think of a better way to achieve all the features that are wished
for. Any suggestions?

Anyway, I have implemented some of the changes already. The patch is
again attached to the issue. Everything is still subject to change,
however. But, this is how setting up a process would look like at the
moment:

  class MyProcessProtocolFactory(process.ProcessProtocolFactory):
      def processSetup(self, proc):
           proc.addHelper(SetuidHelper(1000, 1000))
           proc.addHelper(ChdirHelper('/tmp'))
           proc.addHelper(PTY('pty', [0, 1]))
           proc.addHelper(PassthroughFD(sys.stderr.fileno(), [2]))
           proc.addHelper(WritePipe('passphrase', [3]))

This would configure the process to have uid 1000 and gid 1000, the
executable to be started in path /tmp, file descriptors 0 and 1 would
map to a PTY on the child, which would come in as
childDataReceived('pty', data) on the process protocol, file
descriptor 2 would be the parent's stderr and file descriptor 3 would
be a write pipe by the name of passphrase, that would be written as
transport.writeToChild('passphrase', 'foobar').

This is still lacking the ability to give different protocols to
different communication channels and the chdir/chroot/whatever helper
logic is hackish.

So, feedback is very much appreciated, as always. Regardless, I'll
holler on the list again when I think of where to go next with this
thing.

-- Naked





From exarkun at divmod.com  Sun Jul 23 20:01:38 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Sun, 23 Jul 2006 22:01:38 -0400
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
In-Reply-To: <878xmknklm.fsf@aka.i.naked.iki.fi>
Message-ID: <20060724020138.29014.2130740880.divmod.quotient.51436@ohm>

On Sun, 23 Jul 2006 23:15:49 +0300, Nuutti Kotivuori <naked at iki.fi> wrote:
>Itamar Shtull-Trauring wrote:
>> On Sat, 2006-07-22 at 18:44 +0300, Nuutti Kotivuori wrote:
>>
>> ... adding factory object to process spawning ...
>>
>>> How does this sound? If nobody yells murder, I'll be starting to build
>>> a rudimentary implementation of this to see how the API would
>>> naturally turn out to be and then submit it here for review.
>>
>> Seems... over-engineered. I'm not sure adding a whole new object is the
>> way to go on this.
>
>A valid concern, it did cross my mind as well. However, I have yet to
>think of a better way to achieve all the features that are wished
>for. Any suggestions?
>
>Anyway, I have implemented some of the changes already. The patch is
>again attached to the issue. Everything is still subject to change,
>however. But, this is how setting up a process would look like at the
>moment:
>
>  class MyProcessProtocolFactory(process.ProcessProtocolFactory):
>      def processSetup(self, proc):
>           proc.addHelper(SetuidHelper(1000, 1000))
>           proc.addHelper(ChdirHelper('/tmp'))
>           proc.addHelper(PTY('pty', [0, 1]))
>           proc.addHelper(PassthroughFD(sys.stderr.fileno(), [2]))
>           proc.addHelper(WritePipe('passphrase', [3]))

I think this probably isn't the best API.

Jean-Paul



From naked at iki.fi  Sun Jul 23 23:40:24 2006
From: naked at iki.fi (Nuutti Kotivuori)
Date: Mon, 24 Jul 2006 08:40:24 +0300
Subject: [Twisted-Python] Re: Improving spawnProcess and friends
References: <878xmknklm.fsf@aka.i.naked.iki.fi>
	<20060724020138.29014.2130740880.divmod.quotient.51436@ohm>
Message-ID: <874px7o913.fsf@aka.i.naked.iki.fi>

Jean-Paul Calderone wrote:
> I think this probably isn't the best API.

Okay. But now I'm going to need some pointers on where to go from
here. I don't need a fully thought out suggestion, just a nudge in the
right direction and I'll see where I end up again.

I don't really care about the API - you guys know what fits in to
twisted and ultimately it's you who have to maintain it - I just care
about getting the features I need.

So, just give me a pointer - or holler me (Hadaka) on IRC for a chat.

-- Naked




From exarkun at divmod.com  Mon Jul 24 07:59:52 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 24 Jul 2006 09:59:52 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
 code, so in making the transition I have to add lots of docs
In-Reply-To: <E1G4oyO-0002u3-00@wolfwood>
Message-ID: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>

On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz <glyph at wolfwood.twistedmatrix.com> wrote:
>Author: glyph
>Date: Sun Jul 23 19:11:03 2006
>New Revision: 17664
>
>Modified:
>   branches/addamp-1715/twisted/protocols/amp.py
>Log:
>This was pre-UQDS code, so in making the transition I have to add lots of docs
>
> [snip]
>
> class Argument:
>+    """ Base-class of all objects that take values from Amp packets and convert
>+    them into objects for Python functions.
>+    """

Blech.  Does this style of docstring formatting make anyone else barf?
I notice that jml pointed out on the review of #1940 that the coding
standard nominally requires this.  Two points:

  * I think the coding standard is unclear in what it is trying to
communicate.  It gives an example of a docstring with no leading newline
and from this one might infer that all docstrings should omit leading
newlines, when really it is suggesting that simple, single-line lead-ins
to docstrings belong on the same line as the opening triple quotes.

  * I don't think what the coding standard says is actually relevant
anymore.  This was a display hack to appease a very old version of epydoc.
pydoctor and even the current version of epydoc don't care about this
whitespace.

I think the style prevalent throughout the unit tests is ideal:

    """
    Blah.
    """

This is the easiest to read.  It is unfortunate the emacs has such a hard
time with this construct, but I think it is what we should adopt anyway.

Jean-Paul



From foom at fuhm.net  Mon Jul 24 10:12:35 2006
From: foom at fuhm.net (James Y Knight)
Date: Mon, 24 Jul 2006 12:12:35 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <9AA0E206-09A7-4C43-A4AE-1B3E38593963@fuhm.net>


On Jul 24, 2006, at 9:59 AM, Jean-Paul Calderone wrote:
>> class Argument:
>> +    """ Base-class of all objects that take values from Amp  
>> packets and convert
>> +    them into objects for Python functions.
>> +    """
>
> Blech.  Does this style of docstring formatting make anyone else barf?

No, I can't say it does. However, it does make me usually miss the  
first line the first time through and then have to back up and read  
it again. So in that respect, it's non-optimal.

James





From glyph at divmod.com  Mon Jul 24 11:12:56 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 24 Jul 2006 13:12:56 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <20060724171256.29014.1358444585.divmod.quotient.52303@ohm>

On Mon, 24 Jul 2006 09:59:52 -0400, Jean-Paul Calderone <exarkun at divmod.com> wrote:

>This is the easiest to read.

I agree, and I'll gladly change that branch, but I didn't think it made sense to change the coding standard for the previous one.

Do you want to update the coding standard to be a bit less vague in this area?

>It is unfortunate the emacs has such a hard
>time with this construct, but I think it is what we should adopt anyway.

Emacs actually does a better job with the additional newline, because if you ask it to *without* the additional newline, it wraps the first line of the _docstring_ to 80 chars, it ignores indentation.  I've been ignoring that for the moment because it is seldom actually an issue, but it still bothers me.




From ppergame at gmail.com  Mon Jul 24 13:45:56 2006
From: ppergame at gmail.com (Pavel Pergamenshchik)
Date: Mon, 24 Jul 2006 12:45:56 -0700
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <E1G4oyO-0002u3-00@wolfwood>
	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <4a5c1b500607241245u610f01bhf76a46dc181d219@mail.gmail.com>

On 7/24/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
>
> I think the style prevalent throughout the unit tests is ideal:
>
>     """
>     Blah.
>     """
>
> This is the easiest to read.  It is unfortunate the emacs has such a hard
> time with this construct, but I think it is what we should adopt anyway.
>

I disagree. I don't think this style is a lot more readable, and it adds to
the line count. Extra lines make things not fit into a pageful, and it shows
-- our unit tests are a pain to scroll through.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060724/8aae7bc5/attachment.html>

From duncan.mcgreggor at gmail.com  Mon Jul 24 14:03:03 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Mon, 24 Jul 2006 14:03:03 -0600
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <44C52777.1000802@gmail.com>

Jean-Paul Calderone wrote:

> On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz
>> class Argument:
>> +    """ Base-class of all objects that take values from Amp packets
>> and convert
>> +    them into objects for Python functions.
>> +    """
> 
> Blech.  Does this style of docstring formatting make anyone else barf?

I'll cast my vote:

Yes, it does induce nausea. I actually can't stand it and much prefer
your proposed syntax. In fact, my behavior verges on obsessive,
including the need to change it in code I am contributing when I see it
otherwise.

d



From stephane_brault at yahoo.fr  Mon Jul 24 14:50:24 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 22:50:24 +0200 (CEST)
Subject: [Twisted-Python] twistd question
Message-ID: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>

Hi,
 
 I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
 installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
 it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?
 
 Thanks,
 
 Stéphane





From fairwinds at eastlink.ca  Mon Jul 24 15:06:56 2006
From: fairwinds at eastlink.ca (David Pratt)
Date: Mon, 24 Jul 2006 18:06:56 -0300
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
References: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
Message-ID: <44C53670.2090906@eastlink.ca>

Hi Stephane

I'm not sure this is really a twisted question. If you have a python2.3 
and a python2.4 you should have a corresponding site-packages for each. 
I'd check to ensure twisted is in the site-packages for the version of 
python driving your app if you expect to use it.

Regards,
David

Stéphane Brault wrote:
> Hi,
>  
>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?
>  
>  Thanks,
>  
>  Stéphane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 




From mithrandi-twisted-python at mithrandi.za.net  Mon Jul 24 15:17:12 2006
From: mithrandi-twisted-python at mithrandi.za.net (Tristan Seligmann)
Date: Mon, 24 Jul 2006 23:17:12 +0200
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
References: <20060724205024.20411.qmail@web26512.mail.ukl.yahoo.com>
Message-ID: <20060724211712.GE16966@mithrandi.za.net>

* Stéphane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: </pipermail/twisted-python/attachments/20060724/981ba940/attachment.sig>

From stephane_brault at yahoo.fr  Mon Jul 24 15:49:47 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 21:49:47 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <44C53670.2090906@eastlink.ca>
Message-ID: <20060724214947.49566.qmail@web26505.mail.ukl.yahoo.com>

Thanks David,
 I already ensured that, my problem is I don't know how to run twistd with python2.4 and I can't get rid of
 python2.3. 
 
 Stéphane

----- Message d'origine ----
De : David Pratt <fairwinds at eastlink.ca>
À : Stéphane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Lundi, 24 Juillet 2006, 11h06mn 56s
Objet : Re: [Twisted-Python] twistd question

Hi Stephane

I'm not sure this is really a twisted question. If you have a python2.3 
and a python2.4 you should have a corresponding site-packages for each. 
I'd check to ensure twisted is in the site-packages for the version of 
python driving your app if you expect to use it.

Regards,
David

Stéphane Brault wrote:
> Hi,
>  
>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?
>  
>  Thanks,
>  
>  Stéphane
> 
> 
> 
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
> 






From stephane_brault at yahoo.fr  Mon Jul 24 16:20:39 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 22:20:39 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724211712.GE16966@mithrandi.za.net>
Message-ID: <20060724222039.52507.qmail@web26512.mail.ukl.yahoo.com>

Thanks Tristan,
 so I installed python2.4-twisted (debian sarge 3.1 by the way), but I don't have twistd2.4.
 Now if I run twistd -y myserv.py it tells me I've got the wrong number of arguments. I must say
 I'm quite new to twisted, even if I succeede in writing y servers and managed to have them run
 on my dev computer (windows), but I wouldn't deploy on windows.
 
 Stéphane

----- Message d'origine ----
De : Tristan Seligmann <mithrandi-twisted-python at mithrandi.za.net>
À : Stéphane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Lundi, 24 Juillet 2006, 11h17mn 12s
Objet : Re: [Twisted-Python] twistd question

* Stéphane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar






From stephane_brault at yahoo.fr  Mon Jul 24 16:23:00 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Mon, 24 Jul 2006 22:23:00 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724211712.GE16966@mithrandi.za.net>
Message-ID: <20060724222300.60729.qmail@web26506.mail.ukl.yahoo.com>

Hi again,
 in fact despite the new installation, twistd still doesn't find my packages.
 
 Stéphane

----- Message d'origine ----
De : Tristan Seligmann <mithrandi-twisted-python at mithrandi.za.net>
À : Stéphane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Lundi, 24 Juillet 2006, 11h17mn 12s
Objet : Re: [Twisted-Python] twistd question

* Stéphane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar






From golux at comcast.net  Mon Jul 24 17:55:03 2006
From: golux at comcast.net (Stephen Waterbury)
Date: Mon, 24 Jul 2006 19:55:03 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <44C52777.1000802@gmail.com>
References: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
	<44C52777.1000802@gmail.com>
Message-ID: <44C55DD7.4020308@comcast.net>

Duncan McGreggor wrote:
> Jean-Paul Calderone wrote:
> 
>> On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz
>>> class Argument:
>>> +    """ Base-class of all objects that take values from Amp packets
>>> and convert
>>> +    them into objects for Python functions.
>>> +    """
>> Blech.  Does this style of docstring formatting make anyone else barf?
> 
> I'll cast my vote:
> 
> Yes, it does induce nausea. I actually can't stand it and much prefer
> your proposed syntax. In fact, my behavior verges on obsessive,

OK, it appears that the voting has begun in earnest ... I actually
thought everyone would agree with Jp, but since they don't
(shocking!) ... I also vote for the

"""
Blah ...
"""

format (which I have always used).

Steve



From jml at mumak.net  Mon Jul 24 18:07:44 2006
From: jml at mumak.net (Jonathan Lange)
Date: Tue, 25 Jul 2006 10:07:44 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
References: <E1G4oyO-0002u3-00@wolfwood>
	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
Message-ID: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>

On 7/24/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
> On Sun, 23 Jul 2006 19:11:04 -0600, Glyph Lefkowitz <glyph at wolfwood.twistedmatrix.com> wrote:
> >Author: glyph
> >Date: Sun Jul 23 19:11:03 2006
> >New Revision: 17664
> >
> >Modified:
> >   branches/addamp-1715/twisted/protocols/amp.py
> >Log:
> >This was pre-UQDS code, so in making the transition I have to add lots of docs
> >
> > [snip]
> >
> > class Argument:
> >+    """ Base-class of all objects that take values from Amp packets and convert
> >+    them into objects for Python functions.
> >+    """
>
> Blech.  Does this style of docstring formatting make anyone else barf?
> I notice that jml pointed out on the review of #1940 that the coding
> standard nominally requires this.

The standard is definitely unclear.

I don't have strong feelings about how docstrings should be formatted.
 However I would prefer it if we used PEP 257 formatting.

Also, I strongly object to using
"""
Blah.
"""
for one line docstrings.


-0 on changing docstring format
+1 on updating coding standard to be clearer

jml



From andrew-twisted at puzzling.org  Mon Jul 24 19:19:10 2006
From: andrew-twisted at puzzling.org (Andrew Bennetts)
Date: Tue, 25 Jul 2006 11:19:10 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
References: <E1G4oyO-0002u3-00@wolfwood>
	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
	<d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
Message-ID: <20060725011910.GB6112@steerpike.home.puzzling.org>

On Tue, Jul 25, 2006 at 10:07:44AM +1000, Jonathan Lange wrote:
[...]
> 
> Also, I strongly object to using
> """
> Blah.
> """
> for one line docstrings.

I agree with this sentiment.

For multi-line docstrings, I don't care.  Both formats are equally readable to
me.

> +1 on updating coding standard to be clearer

More clarity is more good!

-Andrew.




From golux at comcast.net  Mon Jul 24 20:03:12 2006
From: golux at comcast.net (Stephen Waterbury)
Date: Mon, 24 Jul 2006 22:03:12 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
References: <E1G4oyO-0002u3-00@wolfwood>	<20060724135952.29014.1247355277.divmod.quotient.52120@ohm>
	<d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
Message-ID: <44C57BE0.8090202@comcast.net>

Jonathan Lange wrote:
> The standard is definitely unclear.
> 
> I don't have strong feelings about how docstrings should be formatted.
> However I would prefer it if we used PEP 257 formatting.

Just for the record, the multi-line docstring format

"""
Blah blah blah blah blah
blah.
"""

is consistent with PEP 257's recommendations.

> Also, I strongly object to using
> """
> Blah.
> """
> for one line docstrings.

It doesn't bother me, but

"""Blah."""

doesn't either, for one-liners.



From exarkun at divmod.com  Mon Jul 24 20:40:44 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 24 Jul 2006 22:40:44 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <44C57BE0.8090202@comcast.net>
Message-ID: <20060725024044.29014.857136159.divmod.quotient.52976@ohm>

On Mon, 24 Jul 2006 22:03:12 -0400, Stephen Waterbury <golux at comcast.net> wrote:
>Jonathan Lange wrote:
>>The standard is definitely unclear.
>>
>>I don't have strong feelings about how docstrings should be formatted.
>>However I would prefer it if we used PEP 257 formatting.
>
>Just for the record, the multi-line docstring format
>
>"""
>Blah blah blah blah blah
>blah.
>"""
>
>is consistent with PEP 257's recommendations.
>>Also, I strongly object to using
>>"""
>>Blah.
>>"""
>>for one line docstrings.
>
>It doesn't bother me, but
>
>"""Blah."""
>
>doesn't either, for one-liners.
>

This one doesn't really bother me either, although I very slightly prefer
the long form.

This bothers me a lot, though:

""" Blah. """

Jean-Paul



From jml at mumak.net  Mon Jul 24 20:43:45 2006
From: jml at mumak.net (Jonathan Lange)
Date: Tue, 25 Jul 2006 12:43:45 +1000
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <20060725024044.29014.857136159.divmod.quotient.52976@ohm>
References: <44C57BE0.8090202@comcast.net>
	<20060725024044.29014.857136159.divmod.quotient.52976@ohm>
Message-ID: <d06a5cd30607241943y7c1702a3ocac6411d6fe84b2c@mail.gmail.com>

On 7/25/06, Jean-Paul Calderone <exarkun at divmod.com> wrote:
>
> This bothers me a lot, though:
>
> """ Blah. """
>

Me too.



From stephane_brault at yahoo.fr  Tue Jul 25 05:56:20 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Tue, 25 Jul 2006 11:56:20 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060724222300.60729.qmail@web26506.mail.ukl.yahoo.com>
Message-ID: <20060725115620.84021.qmail@web26513.mail.ukl.yahoo.com>

Hi all,
 so I tried different things (uninstalling and reinstalling just python2.4) and I can't solve the
 problem. Would it be possible to try something like:
 python2.4 /../twistd.py -y /../myServer.py
 It works on windows but doesn't seem to do anything on Linux, but maybe there is
 something on that line that might work ?
 Thanks,
 
 Stéphane

----- Message d'origine ----
De : Stéphane Brault <stephane_brault at yahoo.fr>
À : Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Mardi, 25 Juillet 2006, 12h23mn 00s
Objet : Re : [Twisted-Python] twistd question

Hi again,
 in fact despite the new installation, twistd still doesn't find my packages.
 
 Stéphane

----- Message d'origine ----
De : Tristan Seligmann <mithrandi-twisted-python at mithrandi.za.net>
À : Stéphane Brault <stephane_brault at yahoo.fr>; Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Lundi, 24 Juillet 2006, 11h17mn 12s
Objet : Re: [Twisted-Python] twistd question

* Stéphane Brault <stephane_brault at yahoo.fr> [2006-07-24 22:50:24 +0200]:

>  I'm using sasync and sqlalchemy. I'm deploying my application on a debian distribution,
>  installing python 2.4. The trouble is that it also installs python 2.3 and when I use twistd
>  it doesn't recognize packages in the 2.4 distribution. Is there a way around this ?

As python2.3 is currently still the "default" version of python in
Debian, "twistd" runs twistd with python2.3. You should be able to use
"twistd2.4" in order to run twisted with python2.4, however; if this
binary is not available, make sure you have the "python2.4-twisted"
package installed. (You don't mention which debian distribution you are
using, so that package may or may not be necessary...)
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar




_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From exarkun at divmod.com  Tue Jul 25 06:36:43 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Tue, 25 Jul 2006 08:36:43 -0400
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725115620.84021.qmail@web26513.mail.ukl.yahoo.com>
Message-ID: <20060725123643.29014.2000412372.divmod.quotient.53635@ohm>

On Tue, 25 Jul 2006 11:56:20 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Hi all,
> so I tried different things (uninstalling and reinstalling just python2.4) and I can't solve the
> problem. Would it be possible to try something like:
> python2.4 /../twistd.py -y /../myServer.py
> It works on windows but doesn't seem to do anything on Linux, but maybe there is
> something on that line that might work ?
> Thanks,

This problem and its solution depend entire on how Python and Twisted
are installed on your platform and how packages are generally dealt with.

You would have the most luck finding help by asking in a forum dedicated
to the distribution of Linux you are using.  Even if someone on this
mailing list gives you an answer which seems to work, it most likely will
not be the most appropriate solution for the distribution you are using.

Jean-Paul



From stephane_brault at yahoo.fr  Tue Jul 25 07:24:17 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Tue, 25 Jul 2006 13:24:17 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725123643.29014.2000412372.divmod.quotient.53635@ohm>
Message-ID: <20060725132417.20852.qmail@web26509.mail.ukl.yahoo.com>

Thanks Jean-Paul,
 you're right.
 Anyway, for those who might be interrested, it seems the only way is to 
 remove all python packages and install from the sources.
 
 Stéphane
 
 

----- Message d'origine ----
De : Jean-Paul Calderone <exarkun at divmod.com>
À : Stéphane Brault <stephane_brault at yahoo.fr>; twisted-python at twistedmatrix.com
Envoyé le : Mardi, 25 Juillet 2006, 2h36mn 43s
Objet : Re: Re : Re : [Twisted-Python] twistd question

On Tue, 25 Jul 2006 11:56:20 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Hi all,
> so I tried different things (uninstalling and reinstalling just python2.4) and I can't solve the
> problem. Would it be possible to try something like:
> python2.4 /../twistd.py -y /../myServer.py
> It works on windows but doesn't seem to do anything on Linux, but maybe there is
> something on that line that might work ?
> Thanks,

This problem and its solution depend entire on how Python and Twisted
are installed on your platform and how packages are generally dealt with.

You would have the most luck finding help by asking in a forum dedicated
to the distribution of Linux you are using.  Even if someone on this
mailing list gives you an answer which seems to work, it most likely will
not be the most appropriate solution for the distribution you are using.

Jean-Paul






From glyph at divmod.com  Tue Jul 25 08:42:29 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 25 Jul 2006 10:42:29 -0400
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725132417.20852.qmail@web26509.mail.ukl.yahoo.com>
Message-ID: <20060725144229.29014.1867996346.divmod.quotient.53783@ohm>

On Tue, 25 Jul 2006 13:24:17 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> you're right.
> Anyway, for those who might be interrested, it seems the only way is to
> remove all python packages and install from the sources.

Stéphane, although this approach may have worked for you, this is definitely not the right way to deal with installation difficulties, on any system I've ever used, Linux or no.

If you've come across this message while searching the web for solutions to Twisted installation difficulties, please don't think you have to delete your system-installed Python.



From stephane_brault at yahoo.fr  Tue Jul 25 09:13:32 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Tue, 25 Jul 2006 15:13:32 +0000 (GMT)
Subject: [Twisted-Python] twistd question
In-Reply-To: <20060725144229.29014.1867996346.divmod.quotient.53783@ohm>
Message-ID: <20060725151332.89762.qmail@web26504.mail.ukl.yahoo.com>

Well, you are probably right, since I no longer have troubles with twistd, but I have some installing
 other packages (such as pyOpenSSL), but these are not related directly to twisted so I won't bother
 you with them ;-). I must say that I had no troubles in the installation per se, my problems were
 related to the fact that running twistd would not take any python 2.4 packages into account and that
 I really need this distribution (because I'm a bad guy using functions decorators ;-)).
 Anyway, thanks to all of you for your answers,
 
 Stéphane

----- Message d'origine ----
De : glyph at divmod.com
À : Twisted general discussion <twisted-python at twistedmatrix.com>
Envoyé le : Mardi, 25 Juillet 2006, 4h42mn 29s
Objet : Re: Re : Re : Re : [Twisted-Python] twistd question

On Tue, 25 Jul 2006 13:24:17 +0000 (GMT), Stéphane Brault <stephane_brault at yahoo.fr> wrote:
>Thanks Jean-Paul,
> you're right.
> Anyway, for those who might be interrested, it seems the only way is to
> remove all python packages and install from the sources.

Stéphane, although this approach may have worked for you, this is definitely not the right way to deal with installation difficulties, on any system I've ever used, Linux or no.

If you've come across this message while searching the web for solutions to Twisted installation difficulties, please don't think you have to delete your system-installed Python.

_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From glyph at divmod.com  Tue Jul 25 09:16:42 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Tue, 25 Jul 2006 11:16:42 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
	code, so in making the transition I have to add lots of docs
In-Reply-To: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
Message-ID: <20060725151642.29014.1847638387.divmod.quotient.53822@ohm>

On Tue, 25 Jul 2006 10:07:44 +1000, Jonathan Lange <jml at mumak.net> wrote:
>I don't have strong feelings about how docstrings should be formatted.
>However I would prefer it if we used PEP 257 formatting.

I just read PEP 257.  What features in particular are you referring to?  Most of it seems to be about encoding redundant information.

By section:

"What is a Docstring?"
 - I think we all know
 - "Use triple quotes", sure.

"One Line Docstrings"  Hopefully we should have only a few of these, it seems odd to dedicate so much verbiage to them.

"Multi-Line Docstrings"
 - One-line summary: not always possible.  Following another aspect of our coding standard, a "line", in a method-level docstring, is at most 72 characters, you've burned a minimum of 8 in indentation, and that's often not enough space to summarize.  One sentence summary?  Sure.
 - Blank line before and after class docstrings?  I don't see this followed anywhere.  Especially not *before* docstrings: the convention is:
    class X:
        """ ...
pretty much everywhere.  I don't see any reason to change it.
 - "docstring of a script..." not applicable because of t.p.u.O
 - "list the classes..." not applicable because of pydoctor
 - "docstring for a function..." ... yes, it should describe arguments, side effects, return values; what else would it do?
 - "docstring for a class..." not applicable again because of pydoctor; this information is redundant
 - "if a class subclasses another class..." not applicable again because of pydoctor's inheritance listing
 - "DO NOT use the Emacs convention..." uh yeah, also don't spell all your method names wrong or use synonyms for them

"handling docstring indentation" 
 - this whole section is about docstring processing tools, which, unless I manage to convince mwh to embed pydoctor in lore for some reason, Twisted is not :).



From mwh at python.net  Tue Jul 25 09:29:39 2006
From: mwh at python.net (Michael Hudson)
Date: Tue, 25 Jul 2006 16:29:39 +0100
Subject: [Twisted-Python] Re: [Twisted-commits] r17664 - This was pre-UQDS
 code, so in making the transition I have to add lots of docs
References: <d06a5cd30607241707mfe09b9evc6f1878271f70925@mail.gmail.com>
	<20060725151642.29014.1847638387.divmod.quotient.53822@ohm>
Message-ID: <2m4px5zorg.fsf@starship.python.net>

glyph at divmod.com writes:

>  - One-line summary: not always possible.  Following another aspect
>  of our coding standard, a "line", in a method-level docstring, is
>  at most 72 characters, you've burned a minimum of 8 in indentation,
>  and that's often not enough space to summarize.  One sentence
>  summary?  Sure.

As we've just discussed on #twisted, these one line summaries are
currently used by pydoctor -- it uses the first non-blank line of the
docstring(in terms of "lines in the source file") in the "summary
table" at the top of each page.  The long term solution is probably to
fix pydoctor to have some cleverer way of finding this summary, while
still not ending up with vast reams of text in the summary table if
someone neglects to add a summary.  Patches welcome :-) -- it's a job
that can be very easily localized to a single function, so you don't
need to try to wrap your head around any crazy code I've written...

Cheers,
mwh

-- 
  python py.py ~/Source/python/dist/src/Lib/test/pystone.py
  Pystone(1.1) time for 5000 passes = 19129.1
  This machine benchmarks at 0.261381 pystones/second




From general at eepatents.com  Tue Jul 25 10:47:06 2006
From: general at eepatents.com (Ed Suominen)
Date: Tue, 25 Jul 2006 09:47:06 -0700
Subject: [Twisted-Python] What bothers ME about docstrings...
In-Reply-To: <E1G5OrN-0006Rj-02@pyramid.twistedmatrix.com>
References: <E1G5OrN-0006Rj-02@pyramid.twistedmatrix.com>
Message-ID: <44C64B0A.8080100@eepatents.com>

What bothers ME most about docstrings is when they are absent!

I agree with some others in not liking when they start on the same line
as the triple quotes, but that's much further down my ample list of gripes.

By the way, David Reid did some work on docstrings for twisted.web2 and
earned the Twisted project $45 of my $2-per-docstring, $200 challenge.
(Hmmm...how did that odd number get there; did he write half a docstring
or something?) The money doesn't have to go to the Twisted project, but
that was his preference. There is another $200 available if my challenge
is met, as I understand it.

Any other takers?

Best regards, Ed

> From: Jean-Paul Calderone <exarkun at divmod.com>
> Subject: Re: [Twisted-Python] Re: [Twisted-commits] r17664 - This was
> 	pre-UQDS	code, so in making the transition I have to add lots of docs
> To: Twisted general discussion <twisted-python at twistedmatrix.com>
> Message-ID: <20060725024044.29014.857136159.divmod.quotient.52976 at ohm>
> Content-Type: text/plain; format=flowed
> 
> On Mon, 24 Jul 2006 22:03:12 -0400, Stephen Waterbury <golux at comcast.net> wrote:
>> Jonathan Lange wrote:
>>> The standard is definitely unclear.
>>>
>>> I don't have strong feelings about how docstrings should be formatted.
>>> However I would prefer it if we used PEP 257 formatting.
>> Just for the record, the multi-line docstring format
>>
>> """
>> Blah blah blah blah blah
>> blah.
>> """
>>
>> is consistent with PEP 257's recommendations.
>>> Also, I strongly object to using
>>> """
>>> Blah.
>>> """
>>> for one line docstrings.
>> It doesn't bother me, but
>>
>> """Blah."""
>>
>> doesn't either, for one-liners.
>>
> 
> This one doesn't really bother me either, although I very slightly prefer
> the long form.
> 
> This bothers me a lot, though:
> 
> """ Blah. """
> 
> Jean-Paul




From stephane_brault at yahoo.fr  Wed Jul 26 06:58:01 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Wed, 26 Jul 2006 12:58:01 +0000 (GMT)
Subject: [Twisted-Python] strange twistd behaviour
Message-ID: <20060726125801.48335.qmail@web26508.mail.ukl.yahoo.com>

Hi,
 I created a twisted server but when I run it with twistd I don't get the same behaviour
 that I get when I use reactor.run()
 Here what I do with reactor:
 
 import communication.update
  import communication.updateXMLRPC
 from twisted.internet import reactor
  from twisted.web import resource, server as webserver
  
  communications = communication.update.communications("mysql://....")
  comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
  rootResource = resource.Resource()
  rootResource.putChild('RPC2', comXMLRPC)
 reactor.listenTCP(8000, webserver.Site(rootResource))
 reactor.run()
 
 
 Here is the server:
 
 import communication.update
 import communication.updateXMLRPC
 from twisted.application import service, internet
 from twisted.web import resource, server as webserver
 
 communications = communication.update.communications("mysql://....")
 comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
 rootResource = resource.Resource()
 rootResource.putChild('RPC2', comXMLRPC)
 webService = internet.TCPServer(8000, webserver.Site(rootResource))
 webService.setName('web')
 application = service.Application('communication')
 webService.setServiceParent(application)
 
 The communications class looks like that:
 
 class communications(object):
     
     def __init__(self, url):
         self.databaseReady = False
         self.databaseBroker = DatabaseBroker(url)
         d = self.databaseBroker.startup()  #line 1
         d.addCallback(self.serverReady).addErrback(self.serverError) #line 2
         
         
     def serverReady(self, result):
         self.databaseReady = True
 
     def serverError(self, error):
 ....
 
 The server works fine on WinXP, the code with the reactor works fine everywhere but the server, called by twistd -y /../server.py,
 starts but has problems with line 1 and line 2 (doesn't seem to call them) on my debian distribution (3.1).
 Any hints ?
 
 Thanks,
 
 Stéphane





From wgwigw at gmail.com  Wed Jul 26 20:50:50 2006
From: wgwigw at gmail.com (wang wei)
Date: Thu, 27 Jul 2006 10:50:50 +0800
Subject: [Twisted-Python] is twisted suitable for rfb protocol implement?
Message-ID: <dbeb95830607261950u63784632j48253a6f935caf26@mail.gmail.com>

hi, I want to implement a rfb server using twisted, but I find  rfb protocol
maybe hard to code in twisted, since it needs read  blocks of data and
depend on the readed value to read the next blocks. is there a good solution
for twisted? thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060727/f9122a67/attachment.html>

From eric.faurot at gmail.com  Thu Jul 27 01:06:00 2006
From: eric.faurot at gmail.com (Eric Faurot)
Date: Thu, 27 Jul 2006 09:06:00 +0200
Subject: [Twisted-Python] is twisted suitable for rfb protocol implement?
In-Reply-To: <dbeb95830607261950u63784632j48253a6f935caf26@mail.gmail.com>
References: <dbeb95830607261950u63784632j48253a6f935caf26@mail.gmail.com>
Message-ID: <e012d6b50607270006q571f5d37w6fa9ad22730b2f15@mail.gmail.com>

On 7/27/06, wang wei <wgwigw at gmail.com> wrote:
> hi, I want to implement a rfb server using twisted, but I find  rfb protocol
> maybe hard to code in twisted, since it needs read  blocks of data and
> depend on the readed value to read the next blocks. is there a good solution
> for twisted? thanks.

Twisted cannot make the protocol itself simpler to write. All it does
is to give you a framework in which you don't have to worry about
plumbing details. All you really have to do is to focus on the
protocol logic.

I don't know about this specific protocol, but you should try to think
of your protocol handler as a automaton: consider that you receive
input data that you must (usually in slices) dispatch to a specific
handler depending on your current state. The handler processes the
data, does whatever it has to, then adapts the current state as
necessary. The point is that you should define your states so that you
know how much data they need to consume to do something useful (that
is in the protocol description).

Designing your handler like this makes it very flexible, because it
naturally handles partial data, so it can be plugged on top of
anything that streams, for example a twisted connection. All you have
to do then is to write a glue Protocol that will connect
dataReceived() to your decoder input. Furthermore, it will probably be
more correct and easier to maintain, because it will very much match
the way your protocol is described on the paper.

For example, you can look at how my OggDecoder works:

http://pyogg.python-hosting.com/file/trunk/PyOgg/ogg/bitstream.py

The code is not always brilliant and polished, but it should give you
the idea.

Eric.



From exarkun at divmod.com  Fri Jul 28 06:13:52 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Fri, 28 Jul 2006 08:13:52 -0400
Subject: [Twisted-Python] Re: [Twisted-commits] r17716 - Switch of the order
	the words
In-Reply-To: <E1G6KmH-0000uF-00@wolfwood>
Message-ID: <20060728121352.1717.1486540780.divmod.quotient.4064@ohm>

On Thu, 27 Jul 2006 23:20:49 -0600, Jonathan Lange <jml at wolfwood.twistedmatrix.com> wrote:
>Author: jml
>Date: Thu Jul 27 23:20:45 2006
>New Revision: 17716
>
>Modified:
>   trunk/twisted/protocols/amp.py
>Log:
>Switch of the order the words
>

Please don't do this.

Jean-Paul



From stephane_brault at yahoo.fr  Fri Jul 28 08:53:42 2006
From: stephane_brault at yahoo.fr (=?utf-8?q?St=C3=A9phane=20Brault?=)
Date: Fri, 28 Jul 2006 14:53:42 +0000 (GMT)
Subject: [Twisted-Python] strange twistd behaviour
In-Reply-To: <20060726125801.48335.qmail@web26508.mail.ukl.yahoo.com>
Message-ID: <20060728145342.15774.qmail@web26504.mail.ukl.yahoo.com>

Hi,
 It seems that the problem comes from my databaseBroker objet which inherits from the AccessBroker class
 from the sasync library which does'nt seem to fire startup when run as a daemon process. It therefore doesn't
 has anything to do with twistd per se. Sorry to pollute this mailing list with irrelevant posts ;-)
 
 Stéphane
 
 
 ----- Message d'origine ----
De : Stéphane Brault <stephane_brault at yahoo.fr>
À : twisted-python at twistedmatrix.com
Envoyé le : Mercredi, 26 Juillet 2006, 2h58mn 01s
Objet : [Twisted-Python] strange twistd behaviour

Hi,
 I created a twisted server but when I run it with twistd I don't get the same behaviour
 that I get when I use reactor.run()
 Here what I do with reactor:
 
 import communication.update
  import communication.updateXMLRPC
 from twisted.internet import reactor
  from twisted.web import resource, server as webserver
  
  communications = communication.update.communications("mysql://....")
  comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
  rootResource = resource.Resource()
  rootResource.putChild('RPC2', comXMLRPC)
 reactor.listenTCP(8000, webserver.Site(rootResource))
 reactor.run()
 
 
 Here is the server:
 
 import communication.update
 import communication.updateXMLRPC
 from twisted.application import service, internet
 from twisted.web import resource, server as webserver
 
 communications = communication.update.communications("mysql://....")
 comXMLRPC = communication.updateXMLRPC.communicationsXMLRPC(communications)
 rootResource = resource.Resource()
 rootResource.putChild('RPC2', comXMLRPC)
 webService = internet.TCPServer(8000, webserver.Site(rootResource))
 webService.setName('web')
 application = service.Application('communication')
 webService.setServiceParent(application)
 
 The communications class looks like that:
 
 class communications(object):
     
     def __init__(self, url):
         self.databaseReady = False
         self.databaseBroker = DatabaseBroker(url)
         d = self.databaseBroker.startup()  #line 1
         d.addCallback(self.serverReady).addErrback(self.serverError) #line 2
         
         
     def serverReady(self, result):
         self.databaseReady = True
 
     def serverError(self, error):
 ....
 
 The server works fine on WinXP, the code with the reactor works fine everywhere but the server, called by twistd -y /../server.py,
 starts but has problems with line 1 and line 2 (doesn't seem to call them) on my debian distribution (3.1).
 Any hints ?
 
 Thanks,
 
 Stéphane



_______________________________________________
Twisted-Python mailing list
Twisted-Python at twistedmatrix.com
http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python






From bussieremaillist at gmail.com  Fri Jul 28 14:20:10 2006
From: bussieremaillist at gmail.com (bussiere maillist)
Date: Fri, 28 Jul 2006 22:20:10 +0200
Subject: [Twisted-Python] smtpgoogle.py
Message-ID: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>

excuse me
does anyone know where it could be possible to download the examples of the
twisted book ?
Like this one smtpgoogle.py

Regards
Bussiere
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060728/3f27381b/attachment.html>

From duncan.mcgreggor at gmail.com  Fri Jul 28 14:30:02 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Fri, 28 Jul 2006 14:30:02 -0600
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
Message-ID: <44CA73CA.8040808@gmail.com>

bussiere maillist wrote:

> excuse me
> does anyone know where it could be possible to download the examples of the
> twisted book ?
> Like this one smtpgoogle.py


Should be available from the publisher's site (O'Reilly).

d



From bussieremaillist at gmail.com  Fri Jul 28 14:37:05 2006
From: bussieremaillist at gmail.com (bussiere maillist)
Date: Fri, 28 Jul 2006 22:37:05 +0200
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <44CA73CA.8040808@gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
	<44CA73CA.8040808@gmail.com>
Message-ID: <8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>

i've looked on it but i didn't find it ...
regards
Bussiere

On 7/28/06, Duncan McGreggor <duncan.mcgreggor at gmail.com> wrote:
>
> bussiere maillist wrote:
>
> > excuse me
> > does anyone know where it could be possible to download the examples of
> the
> > twisted book ?
> > Like this one smtpgoogle.py
>
>
> Should be available from the publisher's site (O'Reilly).
>
> d
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060728/8ac7e62f/attachment.html>

From duncan.mcgreggor at gmail.com  Fri Jul 28 14:51:32 2006
From: duncan.mcgreggor at gmail.com (Duncan McGreggor)
Date: Fri, 28 Jul 2006 14:51:32 -0600
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>	<44CA73CA.8040808@gmail.com>
	<8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>
Message-ID: <44CA78D4.4050101@gmail.com>

bussiere maillist wrote:

> i've looked on it but i didn't find it ...
> regards
> Bussiere


I just did a google search with "twisted book examples o'reilly" and it
came up as the first hit. There's a link on that page called "Examples"
-- is that not what you are looking for?

d



From bussieremaillist at gmail.com  Fri Jul 28 15:54:17 2006
From: bussieremaillist at gmail.com (bussiere maillist)
Date: Fri, 28 Jul 2006 23:54:17 +0200
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <44CA78D4.4050101@gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
	<44CA73CA.8040808@gmail.com>
	<8a8f62c80607281337u4990a446k58e3255fe56cc170@mail.gmail.com>
	<44CA78D4.4050101@gmail.com>
Message-ID: <8a8f62c80607281454h118cfbdve4b412b2f907c537@mail.gmail.com>

yes it was ...
i was searching whit smtpgoogle.py on google :/
regards

On 7/28/06, Duncan McGreggor <duncan.mcgreggor at gmail.com> wrote:
>
> bussiere maillist wrote:
>
> > i've looked on it but i didn't find it ...
> > regards
> > Bussiere
>
>
> I just did a google search with "twisted book examples o'reilly" and it
> came up as the first hit. There's a link on that page called "Examples"
> -- is that not what you are looking for?
>
> d
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20060728/49dd3281/attachment.html>

From feldmatrix at gmx.de  Sat Jul 29 07:49:09 2006
From: feldmatrix at gmx.de (Torsten =?iso-8859-1?Q?Irl=E4nder?=)
Date: Sat, 29 Jul 2006 15:49:09 +0200
Subject: [Twisted-Python] Basic twisted question
Message-ID: <20060729134907.GA20631@lastpferd.irlaender.de>

Hi,
I'm new to twisted and I have some problems on understandins some
basic concepts on building applications upon the twisted framework. 

The examples in Fettig's book brought me on the right track I think
but I'm not sure. So I would like to ask you for some hints and
advices.

I try to build a small IMAP client which shoul be able so do some
very basic operations lke mailboxlisting and fetch some images.
Nothing more for the first. Based on Fettig's IMAP examples I did the
following:

For each operation I want to do I wrote a own protocol. I started
with a basic protocol which simply connects to the server. Then in
the next step I wrote the protocol which lists the users mailbox.
This protocol is inheritated from the first exentend this with the
methods to list the mailbox. As you can see I planned to build some
kind of inhertance tree for the protcols. Continuing this way I
would end up with many small protocols doing one single task, and
I'm not sure If this is a good approach. Do you have any comments on
this?

If it is not clear to you what I meant I can provide some code of
course. At the moment this things is pretty small :)

best regards 
Torsten



From feldmatrix at gmx.de  Sat Jul 29 07:57:57 2006
From: feldmatrix at gmx.de (Torsten =?iso-8859-1?Q?Irl=E4nder?=)
Date: Sat, 29 Jul 2006 15:57:57 +0200
Subject: [Twisted-Python] smtpgoogle.py
In-Reply-To: <44CA73CA.8040808@gmail.com>
References: <8a8f62c80607281320y1c882255q1f8410233fc913a0@mail.gmail.com>
	<44CA73CA.8040808@gmail.com>
Message-ID: <20060729135757.GB18833@lastpferd.irlaender.de>

On Fri, Jul 28, 2006 at 02:30:02PM -0600, Duncan McGreggor wrote:
> bussiere maillist wrote:
> 
> > excuse me
> > does anyone know where it could be possible to download the examples of the
> > twisted book ?
> > Like this one smtpgoogle.py

Hi, 
this can be found at http://examples.oreilly.com/twistedadn/.

HTH

best regards 
Torsten 



From johann.borck at densedata.com  Sat Jul 29 11:04:39 2006
From: johann.borck at densedata.com (Johann Borck)
Date: Sat, 29 Jul 2006 19:04:39 +0200
Subject: [Twisted-Python] Basic twisted question
In-Reply-To: <20060729134907.GA20631@lastpferd.irlaender.de>
References: <20060729134907.GA20631@lastpferd.irlaender.de>
Message-ID: <44CB9527.7000207@densedata.com>

Torsten Irländer wrote:

>Continuing this way I
>would end up with many small protocols doing one single task, and
>I'm not sure If this is a good approach. 
>  
>
It sounds like you'd need to switch between those protocols while beeing
connected if you want to be able to do several operations, this is not
the way to use twisted protocol classes - of course it's ok to work with
inheritance,  but for one protocol, like IMAP, you'll want one protocol
class that does all operations (inherited or else). The http protocol
class in twisted for example is responsible for GET, POST, HEAD and all
other Request types, and is not split up into different classes for each
of these cases. Mind that the protocol usually will, once instatiated
from the Factory, stay till the end of that connection, serving
subsequent requests, and it'd be of great overhead and hard to implement
to exchange it each time another operation is requested. So, one
class/leaf of your inheritance tree will have to be able to do all the
operations of the protocol you implement.
A different use case would be switching from one protocol to another,
juice is a protocol that supports this explicitly, you can establish the
connection using juice and then switch to a protocol of your choice, fex
after authentication is done, but each, juice and the other protocol
will be responsible for the whole set of their operations.

hth, Johann





From feldmatrix at gmx.de  Sat Jul 29 13:54:38 2006
From: feldmatrix at gmx.de (Torsten =?iso-8859-1?Q?Irl=E4nder?=)
Date: Sat, 29 Jul 2006 21:54:38 +0200
Subject: [Twisted-Python] Basic twisted question
In-Reply-To: <44CB9527.7000207@densedata.com>
References: <20060729134907.GA20631@lastpferd.irlaender.de>
	<44CB9527.7000207@densedata.com>
Message-ID: <20060729195438.GA22197@lastpferd.irlaender.de>

On Sat, Jul 29, 2006 at 07:04:39PM +0200, Johann Borck wrote:
> Torsten Irländer wrote:
> 
> >Continuing this way I
> >would end up with many small protocols doing one single task, and
> >I'm not sure If this is a good approach. 
> >  
> >
> It sounds like you'd need to switch between those protocols while beeing
> connected if you want to be able to do several operations, this is not
> the way to use twisted protocol classes - of course it's ok to work with
> inheritance,  but for one protocol, like IMAP, you'll want one protocol
> class that does all operations (inherited or else). 

I agree with you. One single protocol class which handles all
operations might be the better way. I think my problem is a very
basic one and the examples I saw so far all did the following:

Build the factory client class wich instanciates the protocol. Within
this protcol class all steps to do a single task are more or less
automatic. That means that it is triggered by an eventhandler function and then in a
series of deferreds and callbacks the task is solved. I.e selecting
a Mailbox.
This way it is clear to me how to implement a protocol which does
one single task, but I'm missing a way how to implement more than
one action. I think my problem is that don't know who to start
an action in the protocol class which is not triggered by an
eventhandler like the "serverGreeting" method in the IMAP examples. 

> Mind that the protocol usually will, once instatiated
> from the Factory, stay till the end of that connection, serving
> subsequent requests, 

Yes that is what I want :) But at the moment I connect and
disconned to the server for each operation which is indeed a bad
way! But as described above it seems that I have some basic
problems in understandinding how to do this :(

best regards
Torsten




From exarkun at twistedmatrix.com  Sat Jul 29 23:05:02 2006
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 30 Jul 2006 05:05:02 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1154235902.52.627219510@twistedmatrix.com

Bug summary
______________________
Summary for 2006-07-23 through 2006-07-30
Bugs opened: 23    Bugs closed: 16  Total open bugs: 683 (+7)

|== Type Changes   |== Priority Changes   |== Component Changes     
|Defect:       +5  |Highest:  -1          |Conch:               +1  
|Enhancement:  +6  |High:     +3          |Core:               +10  
|Task:         +0  |Normal:   +2          |Pb:                  +0  
                   |Low:      +7          |Release Management:  +1  
                                          |Trial:               +0  
                                          |Web:                 -1  
                                          |Web2:                +0  


New / Reopened Bugs
______________________
                    ===== Highest =====
[#1952] twisted.python.zippath is inconsistent in its use of path separators (opened by glyph) (CLOSED, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1952

[#1956] Make a less sucky producer/consumer API (opened by jknight)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1956

[#1963] getPassword unit test incorrectly uses popen3() (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1963

[#1965] AMP "LiveFire" unit test setup contains race condition (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1965

[#1966] web2 static.Data forgets to include a Content-Type header. (opened by yacc) (CLOSED, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1966

                    ===== High =====
[#1951] twisted.plugin should use twisted.python.modules (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1951

[#1954] Remove erroneous usage of popen3 from GetPasswordTest.testStdin (opened by exarkun) (CLOSED, duplicate)
    task            core       http://twistedmatrix.com/trac/ticket/1954

[#1957] AMP needs protocol specification document in doc/core/specifications (opened by jknight)
    defect          core       http://twistedmatrix.com/trac/ticket/1957

[#1968] twisted.python.versions uses implementation detail of SVN, broken on 1.4 (opened by jknight)
    defect          core       http://twistedmatrix.com/trac/ticket/1968

[#1969] Give moshez commit privileges (opened by jml)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1969

                    ===== Normal =====
[#1949] can't run trial with Python that requires LD_LIBRARY_PATH set (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1949

[#1950] PyUnitTestCase.id is redundant and should be removed (opened by glyph)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1950

[#1964] Cleaning up the reactorin unit tests is hard (opened by moof)
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1964

[#1967] twisted.conch.telnet dies in conjunction with PuTTY (opened by sam)
    defect          conch      http://twistedmatrix.com/trac/ticket/1967

[#1970] "admin/release-twisted --help" contains typo (opened by exarkun)
    defect          release management http://twistedmatrix.com/trac/ticket/1970

[#1971] Links in SEE ALSO section of lore-man.xhtml are bogus (opened by exarkun)
    defect          core       http://twistedmatrix.com/trac/ticket/1971

                    ===== Low =====
[#1953] Epoll reactor (opened by therve)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1953

[#1955] a forgotten resetTimeout in twisted.protocols.postfix (opened by quakelee)
    defect          core       http://twistedmatrix.com/trac/ticket/1955

[#1958] AMP implementation: PLT (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1958

[#1959] AMP implementation: OCaml (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1959

[#1960] AMP implementation: Java (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1960

[#1961] AMP implementation: Erlang (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1961

[#1962] AMP implementation: Haskell (opened by glyph)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1962



Closed Bugs
______________________
                    ===== Highest =====
[#1940] make Twisted tests runnable from within a zipfile (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1940

[#1514] twisted.spread.banana check for INT vs. LONGINT will fail on some 64-bit platforms (opened by itamarst, closed by glyph, )
    defect          pb         http://twistedmatrix.com/trac/ticket/1514

[#1940] make Twisted tests runnable from within a zipfile (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1940

[#1952] twisted.python.zippath is inconsistent in its use of path separators (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1952

[#1715] move vertex.juice into twisted core, as twisted.protocols.amp (asynchronous messaging protocol) (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1715

[#1966] web2 static.Data forgets to include a Content-Type header. (opened by yacc, closed by exarkun, fixed)
    defect          web2       http://twistedmatrix.com/trac/ticket/1966

[#1837] trial -e doesn't work with pyunit test cases (opened by radix, closed by jml, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1837

[#1646] trial should support color output on win32 as well (opened by glyph, closed by jml, )
    enhancement     trial      http://twistedmatrix.com/trac/ticket/1646

[#1726] Enhanced docstring for callFromThread (opened by moonfallen, closed by moonfallen, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1726

                    ===== High =====
[#883 ] [PATCH] [TEST] twisted.web.client thinks ConnectionLost pages are successful (opened by Tv, closed by glyph, fixed)
    defect          web        http://twistedmatrix.com/trac/ticket/883

[#1954] Remove erroneous usage of popen3 from GetPasswordTest.testStdin (opened by exarkun, closed by jknight, duplicate)
    task            core       http://twistedmatrix.com/trac/ticket/1954

                    ===== Normal =====
[#1276] loadPackage (recurse or otherwise) should respect __path__ (opened by jml, closed by glyph, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1276

[#1943] better epytext in twisted.application and twisted.conch (opened by mwh, closed by exarkun, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1943

[#1905] twisted.web.client.getPage deferred does not errback in the case of e.g. a 500 error code (opened by glyph, closed by glyph, fixed)
    enhancement     core       http://twistedmatrix.com/trac/ticket/1905

[#1276] loadPackage (recurse or otherwise) should respect __path__ (opened by jml, closed by glyph, fixed)
    defect          trial      http://twistedmatrix.com/trac/ticket/1276

[#632 ] Mapped resultsets for adbapi (opened by waterbug, closed by exarkun, wontfix)
    enhancement     core       http://twistedmatrix.com/trac/ticket/632





From alex.greif at gmail.com  Mon Jul 31 04:42:26 2006
From: alex.greif at gmail.com (Alex Greif)
Date: Mon, 31 Jul 2006 12:42:26 +0200
Subject: [Twisted-Python] twisted web question
Message-ID: <778770d80607310342x6f1ed6ddyb7f50f18b9591ae7@mail.gmail.com>

Hi NG,
I am completely new to twisted, but want to give it a try :)

I have a small website running, serving dynamic content with Pylons.
For switching to twisted, do I have to use the web or the web2 module?

thanks,

Alex.



From gah at research.att.com  Mon Jul 31 09:24:55 2006
From: gah at research.att.com (Glenn Hochberg)
Date: Mon, 31 Jul 2006 11:24:55 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
Message-ID: <3F892FD1-F4C6-4AEC-8AE6-4C86B4B12090@research.att.com>

I ran into a problem on HP-UX (B.11.23 U ia64) using Python 2.4.3,  
whereby processes started via reactor.spawnProcess() never seem to  
get the completion event.
I fished around via Google and found that this is ticket #608, which  
has been hanging around for over 2 years.

I'd be willing to help troubleshoot this if someone could provide  
some guidance.  I'd really like to get this fixed ASAP, so any help  
is appreciated.

Thanks.  Please reply to me directly in addition to the list, as I'm  
not subscribed.

   -Glenn Hochberg



From glyph at divmod.com  Mon Jul 31 09:43:06 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 31 Jul 2006 11:43:06 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <3F892FD1-F4C6-4AEC-8AE6-4C86B4B12090@research.att.com>
Message-ID: <20060731154306.1717.1179468454.divmod.quotient.9314@ohm>

On Mon, 31 Jul 2006 11:24:55 -0400, Glenn Hochberg <gah at research.att.com> wrote:
>I ran into a problem on HP-UX (B.11.23 U ia64) using Python 2.4.3,  whereby 
>processes started via reactor.spawnProcess() never seem to  get the 
>completion event.
>I fished around via Google and found that this is ticket #608, which  has 
>been hanging around for over 2 years.
>
>I'd be willing to help troubleshoot this if someone could provide  some 
>guidance.  I'd really like to get this fixed ASAP, so any help  is 
>appreciated.

I've commented on #608.  Long story short: we need a buildbot, and probably a maintainer for HP/UX.  Interested in volunteering?

You probably want to add yourself as "cc" specifically on that bug, if you don't want to subscribe to the mailing list.



From gah at research.att.com  Mon Jul 31 10:05:16 2006
From: gah at research.att.com (Glenn Hochberg)
Date: Mon, 31 Jul 2006 12:05:16 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <20060731154306.1717.1179468454.divmod.quotient.9314@ohm>
References: <20060731154306.1717.1179468454.divmod.quotient.9314@ohm>
Message-ID: <7E43A375-B36A-47DF-AED7-C4F20833E5FC@research.att.com>


On Jul 31, 2006, at 11:43 AM, glyph at divmod.com wrote:

> On Mon, 31 Jul 2006 11:24:55 -0400, Glenn Hochberg  
> <gah at research.att.com> wrote:
>> I ran into a problem on HP-UX (B.11.23 U ia64) using Python  
>> 2.4.3,  whereby processes started via reactor.spawnProcess() never  
>> seem to  get the completion event.
>> I fished around via Google and found that this is ticket #608,  
>> which  has been hanging around for over 2 years.
>>
>> I'd be willing to help troubleshoot this if someone could provide   
>> some guidance.  I'd really like to get this fixed ASAP, so any  
>> help  is appreciated.
>
> I've commented on #608.  Long story short: we need a buildbot, and  
> probably a maintainer for HP/UX.  Interested in volunteering?
>
> You probably want to add yourself as "cc" specifically on that bug,  
> if you don't want to subscribe to the mailing list.

Actually, I had to subscribe anyway (my email was rejected the first  
time),

Pardon my ignorance, but what is a "buildbot" exactly--obviously  
something that builds Twisted, but is it something I'd run myself, or  
something that needs to be accessible from the Internet?  I could  
help out in the short term, but I'm no HP-UX wiz; I'm only using it  
for one particular project because that's the hardware they run it on  
(to my dismay).

   -Glenn



From exarkun at divmod.com  Mon Jul 31 10:57:48 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 31 Jul 2006 12:57:48 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <7E43A375-B36A-47DF-AED7-C4F20833E5FC@research.att.com>
Message-ID: <20060731165748.1717.227371768.divmod.quotient.9412@ohm>

On Mon, 31 Jul 2006 12:05:16 -0400, Glenn Hochberg <gah at research.att.com> wrote:
>
>On Jul 31, 2006, at 11:43 AM, glyph at divmod.com wrote:
>>On Mon, 31 Jul 2006 11:24:55 -0400, Glenn Hochberg  <gah at research.att.com> 
>>wrote:
>>>I ran into a problem on HP-UX (B.11.23 U ia64) using Python  2.4.3, 
>>>whereby processes started via reactor.spawnProcess() never  seem to  get 
>>>the completion event.
>>>I fished around via Google and found that this is ticket #608,  which  has 
>>>been hanging around for over 2 years.
>>>
>>>I'd be willing to help troubleshoot this if someone could provide   some 
>>>guidance.  I'd really like to get this fixed ASAP, so any  help  is 
>>>appreciated.
>>
>>I've commented on #608.  Long story short: we need a buildbot, and 
>>probably a maintainer for HP/UX.  Interested in volunteering?
>>
>>You probably want to add yourself as "cc" specifically on that bug,  if you 
>>don't want to subscribe to the mailing list.
>
>Actually, I had to subscribe anyway (my email was rejected the first  time),
>
>Pardon my ignorance, but what is a "buildbot" exactly--obviously  something 
>that builds Twisted, but is it something I'd run myself, or  something that 
>needs to be accessible from the Internet?  I could  help out in the short 
>term, but I'm no HP-UX wiz; I'm only using it  for one particular project 
>because that's the hardware they run it on  (to my dismay).

It's the thing driving this page:

  http://twistedmatrix.com/buildbot/

It's how we can tell if Twisted works on various platforms or not.  Without
a buildslave running on a particular platform, we have no way to keep track
of whether changes being made are correct on that platform.

Jean-Paul



From eprparadocs at gmail.com  Mon Jul 31 10:59:06 2006
From: eprparadocs at gmail.com (Chaz.)
Date: Mon, 31 Jul 2006 12:59:06 -0400
Subject: [Twisted-Python] XMLRPC and timeout...
Message-ID: <44CE36DA.4030202@gmail.com>

I am not sure my original message made it to the list, so I thought I 
would reissue it. If you have seen it before, I am sorry for issuing it 
again.

I have an XMLRPC server and client. I am trying to build both of them 
defensively - in other words I would like to cancel the client request 
should a time period be exceeded. I would also like to give the server a 
specific time to answer. Can anyone give me an idea how to do them?

Peace, and thanks in advance,
Chaz.



From glyph at divmod.com  Mon Jul 31 11:51:50 2006
From: glyph at divmod.com (glyph at divmod.com)
Date: Mon, 31 Jul 2006 13:51:50 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <20060731165748.1717.227371768.divmod.quotient.9412@ohm>
Message-ID: <20060731175150.1717.1959347394.divmod.quotient.9480@ohm>

On Mon, 31 Jul 2006 12:57:48 -0400, Jean-Paul Calderone <exarkun at divmod.com> wrote:

>>Pardon my ignorance, but what is a "buildbot" exactly--obviously  something 
>>that builds Twisted, but is it something I'd run myself, or  something that 
>>needs to be accessible from the Internet?  I could  help out in the short 
>>term, but I'm no HP-UX wiz; I'm only using it  for one particular project 
>>because that's the hardware they run it on  (to my dismay).
>
>It's the thing driving this page:
>
>  http://twistedmatrix.com/buildbot/
>
>It's how we can tell if Twisted works on various platforms or not.  Without
>a buildslave running on a particular platform, we have no way to keep track
>of whether changes being made are correct on that platform.

If you're interested in setting up a build slave, http://buildbot.sourceforge.net/README would be a good place to start: see the "setting up a build slave" section.

IIRC, you'll need some cooperation from our end as well but that should get you started.



From gah at research.att.com  Mon Jul 31 13:58:40 2006
From: gah at research.att.com (Glenn Hochberg)
Date: Mon, 31 Jul 2006 15:58:40 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <20060731175150.1717.1959347394.divmod.quotient.9480@ohm>
References: <20060731175150.1717.1959347394.divmod.quotient.9480@ohm>
Message-ID: <C05E9996-DA00-4C0E-A3F1-5C7FD49C0DC1@research.att.com>

On Jul 31, 2006, at 1:51 PM, glyph at divmod.com wrote:

> On Mon, 31 Jul 2006 12:57:48 -0400, Jean-Paul Calderone  
> <exarkun at divmod.com> wrote:
>
>>> Pardon my ignorance, but what is a "buildbot" exactly--obviously   
>>> something that builds Twisted, but is it something I'd run  
>>> myself, or  something that needs to be accessible from the  
>>> Internet?  I could  help out in the short term, but I'm no HP-UX  
>>> wiz; I'm only using it  for one particular project because that's  
>>> the hardware they run it on  (to my dismay).
>>
>> It's the thing driving this page:
>>
>>  http://twistedmatrix.com/buildbot/
>>
>> It's how we can tell if Twisted works on various platforms or  
>> not.  Without
>> a buildslave running on a particular platform, we have no way to  
>> keep track
>> of whether changes being made are correct on that platform.
>
> If you're interested in setting up a build slave, http:// 
> buildbot.sourceforge.net/README would be a good place to start: see  
> the "setting up a build slave" section.
>
> IIRC, you'll need some cooperation from our end as well but that  
> should get you started.

Sadly, I will not be able to set up a build slave, as I do not have a  
machine that is accessible from the general internet.  Also, the HP  
testdrive machines cannot make outgoing connections, so they would  
not be able to do checkouts.

However, I am still interested in finding a solution to #608.  If we  
can come up with a patch that fixes the problem on HP-UX w/o breaking  
anything on any other platform, would that be sufficient?  You could  
then test that it does no harm, at least, and I could test whether  
the fix actually works on HP-UX.

What approach would you recommend in troubleshooting the problem--is  
there built-in debugging that can be turned on that might give me  
some more detailed information, or do I need to start adding log or  
print statements?

Again, any help would be appreciated.

   -Glenn





From exarkun at divmod.com  Mon Jul 31 14:36:30 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 31 Jul 2006 16:36:30 -0400
Subject: [Twisted-Python] Process completion not detected on HP-UX (#608)
In-Reply-To: <C05E9996-DA00-4C0E-A3F1-5C7FD49C0DC1@research.att.com>
Message-ID: <20060731203630.1717.666824456.divmod.quotient.9688@ohm>

On Mon, 31 Jul 2006 15:58:40 -0400, Glenn Hochberg <gah at research.att.com> wrote:
>
>What approach would you recommend in troubleshooting the problem--is  there 
>built-in debugging that can be turned on that might give me  some more 
>detailed information, or do I need to start adding log or  print statements?
>
>Again, any help would be appreciated.
>

Run one of the unit tests which fails in debug mode.  For example,

  trial -b twisted.trial.test.test_process.ProcessTestCase.testProcess

If none of the existing unit tests fail, write a new one :)

Jean-Paul



From exarkun at divmod.com  Mon Jul 31 20:26:32 2006
From: exarkun at divmod.com (Jean-Paul Calderone)
Date: Mon, 31 Jul 2006 22:26:32 -0400
Subject: [Twisted-Python] IOCP reactor
In-Reply-To: 0
Message-ID: <20060801022632.1717.894031155.divmod.quotient.10143@ohm>


IOCP reactor has been offline for almost a month now.  

Hey, Windows developers, think we can do something about this?



