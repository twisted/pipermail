<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Coverage exceptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Coverage%20exceptions&In-Reply-To=%3CCAEeXt4PyX_kavaZ4JG9BHHozA8pBsAY5LYva4dFRprZ98oqS%2Bw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="030487.html">
   <LINK REL="Next"  HREF="062953.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Coverage exceptions</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Coverage%20exceptions&In-Reply-To=%3CCAEeXt4PyX_kavaZ4JG9BHHozA8pBsAY5LYva4dFRprZ98oqS%2Bw%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Coverage exceptions">exarkun at twistedmatrix.com
       </A><BR>
    <I>Thu Jun 30 05:13:52 MDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="030487.html">[Twisted-Python] Coverage exceptions
</A></li>
        <LI>Next message (by thread): <A HREF="062953.html">[Twisted-Python] Coverage exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62951">[ date ]</a>
              <a href="thread.html#62951">[ thread ]</a>
              <a href="subject.html#62951">[ subject ]</a>
              <a href="author.html#62951">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Jun 30, 2016 at 6:43 AM, Adi Roiban &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Recently we have introduced a hard check of 100% coverage for all changes.
</I>&gt;<i> This is done via coverage + codecov + github protected branches.
</I>&gt;<i>
</I>&gt;<i> Now, if your patch is not 100% covered github will not let you merge it.
</I>&gt;<i>
</I>&gt;<i> See for example this change:
</I>&gt;<i> <A HREF="https://github.com/twisted/twisted/pull/261/files#diff-0fea8a8ca713deb7ea6a10053273319aR2360">https://github.com/twisted/twisted/pull/261/files#diff-0fea8a8ca713deb7ea6a10053273319aR2360</A>
</I>&gt;<i>
</I>&gt;<i> The errback is there to help with test failures ... but the test should
</I>&gt;<i> never fail, so that errback is never called... and that line is not covered.
</I>&gt;<i>
</I>&gt;<i>
</I>It doesn't always make sense to require 100% execution of all test code.
It's not at all uncommon to only have code in a test suite that runs when a
test fails.  Historically, Twisted has never had a requirement of 100%
execution of test code.  The only test suite coverage requirements that
have commonly been requested or enforced is for coverage of implementation
code.

I'd suggest removing the coverage enforcement for test suite code.


&gt;<i> How should we proceed with these changes?
</I>&gt;<i>
</I>&gt;<i> Maybe this is not the best example and that code could be refactored...
</I>&gt;<i> but I think that the topic of ignoring missing coverage is still valid.
</I>&gt;<i>
</I>&gt;<i> I suggest to introduce `  # pragma: no cover`
</I>&gt;<i>
</I>&gt;<i> and update the coverage config with
</I>&gt;<i>
</I>&gt;<i> [report]
</I>&gt;<i> exclude_lines =
</I>&gt;<i>     pragma: no cover
</I>&gt;<i>
</I>&gt;<i>
</I>This seems like the wrong solution to me.  It forces contributors to do
extra work to mark their test code as an exception *and* provides a
mechanism for incorrectly bypassing the check by using a no-cover pragma in
implementation code.

Jean-Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20160630/4f9e5eab/attachment-0002.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="030487.html">[Twisted-Python] Coverage exceptions
</A></li>
	<LI>Next message (by thread): <A HREF="062953.html">[Twisted-Python] Coverage exceptions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62951">[ date ]</a>
              <a href="thread.html#62951">[ thread ]</a>
              <a href="subject.html#62951">[ subject ]</a>
              <a href="author.html#62951">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
