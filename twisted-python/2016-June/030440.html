<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Deprecating classes and writing tests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Deprecating%20classes%20and%20writing%20tests&In-Reply-To=%3CEC6A7BBB-2011-4A0F-BC8D-E855801CEF82%40twistedmatrix.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030438.html">
   <LINK REL="Next"  HREF="030454.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Deprecating classes and writing tests</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Deprecating%20classes%20and%20writing%20tests&In-Reply-To=%3CEC6A7BBB-2011-4A0F-BC8D-E855801CEF82%40twistedmatrix.com%3E"
       TITLE="[Twisted-Python] Deprecating classes and writing tests">glyph at twistedmatrix.com
       </A><BR>
    <I>Mon Jun 13 15:46:29 MDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="030438.html">[Twisted-Python] Deprecating classes and writing tests
</A></li>
        <LI>Next message: <A HREF="030454.html">[Twisted-Python] Deprecating classes and writing tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30440">[ date ]</a>
              <a href="thread.html#30440">[ thread ]</a>
              <a href="subject.html#30440">[ subject ]</a>
              <a href="author.html#30440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Jun 13, 2016, at 4:26 AM, Adi Roiban &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">adi at roiban.ro</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> What is the best practice for deprecating a class in Twisted and writing tests for it ... and updating existing tests.
</I>
We appear to have 'assertDeprecated' type methods scattered around the codebase.  These should be refactored into a single location.

&gt;<i> I think that the part in which the deprecation code is written, is well understood and documented here
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://twistedmatrix.com/documents/current/core/development/policy/compatibility-policy.html#classes">http://twistedmatrix.com/documents/current/core/development/policy/compatibility-policy.html#classes</A> &lt;<A HREF="http://twistedmatrix.com/documents/current/core/development/policy/compatibility-policy.html#classes">http://twistedmatrix.com/documents/current/core/development/policy/compatibility-policy.html#classes</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> What is missing, is the part talking about how to test these changes and how to update existing tests.
</I>
The thing that ends up being deprecated with the recommended technique here is the import of the class itself. So I think what's missing is the explanation that the import needs to be moved to test scope, not module scope within the tests.  The tests should also be separated out and dated so it's clear what to delete when the deprecation period expires, and removals are easy.

Does that answer your question sufficiently?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20160613/d4a59bd5/attachment.html">http://twistedmatrix.com/pipermail/twisted-python/attachments/20160613/d4a59bd5/attachment.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030438.html">[Twisted-Python] Deprecating classes and writing tests
</A></li>
	<LI>Next message: <A HREF="030454.html">[Twisted-Python] Deprecating classes and writing tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30440">[ date ]</a>
              <a href="thread.html#30440">[ thread ]</a>
              <a href="subject.html#30440">[ subject ]</a>
              <a href="author.html#30440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
