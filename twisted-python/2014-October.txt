From glyph at twistedmatrix.com  Wed Oct  1 23:17:18 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 1 Oct 2014 22:17:18 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
In-Reply-To: <CABZk45z2skB=z-ztnNsLx1Q9gkWVNSZEZV7Qubpxmxwn=-DhGg@mail.gmail.com>
References: <8E367ECE-C3E2-4CEC-A5B6-5419B603D453@twistedmatrix.com>
 <CABZk45xUQwZp4d1t87zOB=WzZ1_EWrz_tOyNGK0FZZpSsoLhdA@mail.gmail.com>
 <DC21EE49-2253-46C8-882A-A06E6EA2619D@twistedmatrix.com>
 <CABZk45z2skB=z-ztnNsLx1Q9gkWVNSZEZV7Qubpxmxwn=-DhGg@mail.gmail.com>
Message-ID: <32379ECF-3D82-4773-A3FA-BEB43FCD6FD1@twistedmatrix.com>


On Sep 30, 2014, at 10:12 PM, Joshua Bartlett <josh at bartletts.id.au> wrote:

> On 1 October 2014 14:09, Glyph <glyph at twistedmatrix.com> wrote:
> 
> That said: why did you need a threadpool of daemon threads?
> 
> That's a very good question. One of my comaintainers thinks the answer is, "My codebase is old enough to vote and to answer your question I'd probably have to turn our SVN server back on. Please don't make me." :-)
> 
> I think the real reason is that the third-party library that we're calling from the threads sometimes takes a really long time to return, which means that unless we use daemon threads the only timely way to shut down / restart the service is kill -9, which is not ideal.

Aah.  That's a very good reason, come to think of it.  Maybe we should default to daemon threads at some point in the future, for that matter; it would make exiting easier, by allowing us to still join() all the threads, but still exit if attempting to do so times out.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141001/d3b7777f/attachment.html>

From orbitus at orbitusrobotics.com  Thu Oct  2 20:55:24 2014
From: orbitus at orbitusrobotics.com (Orbitus)
Date: Thu, 2 Oct 2014 21:55:24 -0500
Subject: [Twisted-Python] 'module' object has no attribute
	'optionsForClientTLS'
Message-ID: <9C0BC677-30D1-4F00-8B74-4DC225F098E2@orbitusrobotics.com>

I am trying to execute the check_server_certificate.py and I am getting this error? can you guys help me figure out whats going on? its the exact sample code on the website running on Ubuntu 14.04.


Here is the error output:

Traceback (most recent call last):
  File "check_server_certificate.py", line 28, in <module>
    task.react(main, sys.argv[1:])
  File "/usr/lib/python2.7/dist-packages/twisted/internet/task.py", line 867, in react
    finished = main(_reactor, *argv)
  File "check_server_certificate.py", line 6, in main
    options = ssl.optionsForClientTLS(hostname=host.decode('utf-8'))
AttributeError: 'module' object has no attribute 'optionsForClientTLS'


Here is the code (check_server_certificate.py):


from __future__ import print_function
import sys
from twisted.internet import defer, endpoints, protocol, ssl, task, error

def main(reactor, host, port=443):
    options = ssl.optionsForClientTLS(hostname=host.decode('utf-8'))
    port = int(port)

    class ShowCertificate(protocol.Protocol):
        def connectionMade(self):
            self.transport.write(b"GET / HTTP/1.0\r\n\r\n")
            self.done = defer.Deferred()
        def dataReceived(self, data):
            certificate = ssl.Certificate(self.transport.getPeerCertificate())
            print("OK:", certificate)
            self.transport.abortConnection()
        def connectionLost(self, reason):
            print("Lost.")
            if not reason.check(error.ConnectionClosed):
                print("BAD:", reason.value)
            self.done.callback(None)

    return endpoints.connectProtocol(
        endpoints.SSL4ClientEndpoint(reactor, host, port, options),
        ShowCertificate()
    ).addCallback(lambda protocol: protocol.done)

task.react(main, sys.argv[1:])



Rudy Aramayo | Developer | OrbitusRobotics LLC
Direct: 626.386.8329 | Email: orbitus at orbitusrobotics.com | Web: www.orbitusrobotics.com

           

"This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to which they are addressed. If you have received this email in error please notify me (orbitus at orbitusrobotics.com). If you are not the named addressee you should not disseminate, distribute or copy this e-mail and should delete this e-mail from your system. If you are not the intended recipient you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.?




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OrbitusRobotics_white-logo.png
Type: image/png
Size: 16993 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 2323 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 2617 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 2536 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0006.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.jpg
Type: image/jpeg
Size: 1917 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0007.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0001.pgp>

From hs at ox.cx  Fri Oct  3 00:28:19 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Fri, 3 Oct 2014 08:28:19 +0200
Subject: [Twisted-Python] 'module' object has no attribute
	'optionsForClientTLS'
In-Reply-To: <9C0BC677-30D1-4F00-8B74-4DC225F098E2@orbitusrobotics.com>
References: <9C0BC677-30D1-4F00-8B74-4DC225F098E2@orbitusrobotics.com>
Message-ID: <A1F952B9-173F-4038-AF81-E2D753990974@ox.cx>


> I am trying to execute the check_server_certificate.py and I am getting this error? can you guys help me figure out whats going on? its the exact sample code on the website running on Ubuntu 14.04.

Trusty is shipping Twisted 13.2 which doesn't have vital TLS improvements that arrived with 14.0 and that are used in said example.

I strongly recommend against using Twisted older than 14.0 for code involving TLS.  Please use the version from PyPI (14.0.2).

From wolfgang.kde at rohdewald.de  Fri Oct  3 17:09:40 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sat, 04 Oct 2014 01:09:40 +0200
Subject: [Twisted-Python] porting twisted.spread to Python3
Message-ID: <4121201.VS1rzsEyV3@i5>

I now have a local git branch with about 70 commits, always 
rebased onto current trunk.

Those test suites pass with Python2 and Python3:

test_banana, test_jelly, test_pb, test_pbfailure, test_persisted

I also have a real app using PB (kajongg, a KDE game). Running
the server and the client with any combination of Python 2 and
Python 3 works but more testing is needed there. Especially
transferring failures with non-ascii test, so I need to inject
random errors.

spread.banana is now fully covered by tests (was at 85% before).
There is still a lot of code in twisted.spread which has no
tests yet.
I do not think I want to add missing tests for everything,
only for those regions where I do changes or where it is not
too difficult. And of course if an application triggers a bug
yet uncovered by tests.

Can you point me to other PB applications I could use for testing?
Preferrably ones that are already mostly compatible with PY3
themselves, but that is not a _must_, I would try porting them
unless it turns out to be too much work. And preferrably ones
developed by people with a non-ascii native language. I do not
yet trust Failures and logging with non-ascii.


Below is the current list of commits. Everything you see
there is still much in flux. This includes shuffling code
between commits, combining and splitting commits, changing order.
I want to open one ticket per commit. Simple things hopefully 
not needing much discussion first.

Estimating one week per review/commit to trunk, this process 
will take more than one year. Often I can only add a new ticket
after the previous one has been integrated because they 
depend on each other.

So if it really seems to take that long, at some point I might
just decide to put what I have to github and not care anymore.
Which of course means I might have to distribute a patched
twisted version with my application. I really want to leave
Python2 behind, and only twisted is in the way. Latest versions
of KDE do not have Python2 bindings anymore (KDE Frameworks 5).

This log of course includes things being in tickets up for review.

git log --pretty='format:%s' --reverse trunk..pb3
spread.banana: selecting an unsupported dialect now raises an Exception
spread.banana now raises BananaError when receiving pb messages without pb being the selected dialect
spread.banana: specific error message about unicode objects
spread.banana: test coverage goes up from 85% to 100%
test.test_banana: eliminate duplicate code
twisted.python.reflect.safe_str on Python 3 converts utf-8 encoded bytes to clean str instead of "b'a'"
test.test_{failure,banana,persisted,reflect}: consistently name all test methods test_*
test.test_jelly: add tests for yet untested code
spread.jelly: support the sets module only for Python 2
twisted.spread: Assume that Python always has unicode support enabled
Ticket 7653. spread.jelly: deprecate unjellying instances
spread.jelly can now transfer objects with new style classes
cred.credentials: implements->implementer
cred.checkers: implements->implementer
test.test_pb: implements->implementer
persisted.styles: add new tests
persisted.styles.unpickleMethod: remove dead code
spread.flavors: fix import paths, making them work with Python 3 too
spread: Python 3: add from __future__
do not use argument tuple unpacking anymore, not available in Python 3
spread.publish and test.test_pb: replace file by open
test.test_pb: use a constant for "BRAINS!"
python.compat: get_im_func, get_im_self, get_im_class and use them in spread
persisted.styles: simplify unpickleMethod
persisted.styles: Port to Python 3
python.compat: for PY3, define long=int and xrange=range
spread.banana: replace StringIO.StringIO by io.BytesIO
python.compat.networkChar: New, and use it in spread.banana
python.compat.networkString: improve Exception message
spread.banana: change literals from "" to b"" where appropriate
test.test_banana: fix a wrong assertion message
test.test_banana: use itertools.chain
test.test_banana: Python 3 does not know type long
spread: Python 3 does not have sys.maxint
spread.banana and test: Complete port to Python 3: handling of data
spread.jelly: Unjellying instance is not supported with Python 3
spread.jelly: unify usage of the types module
spread.jelly: consistently use _atom identifiers
spread.jelly: complete port to Python 3
spread.pb, test.test_pbfailure: new syntax for except
spread.pb: do not use argument tuple unpacking anymore, not available in Python 3
test.test_jelly now passes all tests with Python 3
cred.credentials.updateHash accepts unicode
add ported modules to python/dist3.py
spread.flavors: consistently use _atom identifiers
spread.flavors: Python 3: eliminate __cmp__. Only support __eq__ and __ne__
spread: Use networkString/nativeString where appropriate
spread.flavors: switch atoms from str to b""
test.test_pb: improve test_concurrentLogin: use a non-ascii password
spread.pb: eliminate __cmp__, using FancyEqMixin
test.test_pb: add comment to test_tooManyRefs: too slow
spread.pb: introduce *_atom constants
spread.pb: Python 3: use list() around some generators
spread.pb.Broker: improve Exception message
spread.pb and test: Python 3: xrange = range
spread.pb and test: Python 3: use byte literals
spread.pb: failure2Copyable: use _newInstance from jelly
spread.pb: replace types.ListType with list
spread.pb and test: use networkChar where appropriate
test.test_pb: change from StringIO to io.BytesIO
spread.pb: Python 3: make *_atom bytes
python.logger.formatWithCall: support non-ascii strings. Why exactly does kajongg need this?
python.compat: networkIdentifier, nativeIdentifier. Not yet used. SQUASH
spread.pb: CopiedFailure now handles non-ascii strings. TEST MISSING
spread.flavors: RemoteCopy supports non-ascii identifiers. TEST MISSING. Why does kajongg need this?
python.reflect: _safeFormat must handle unicode
python.util: new debug function stack(). REMOVE AGAIN
python.compat: nativeIdentifier accepts non-unicode. NEEDED WHY? TEST CASE MISSING
test.test_{banana,jelly,pb,pbfailure,persisted}: from __future__
test.test_pbfailure: make literal strings bytes
test.test_pbfailure: replace StringIO with io.BytesIO
spread.flavors: translate keys of received dict into nativeString. INCOMPLETE


-- 

Wolfgang


From trac at twistedmatrix.com  Sun Oct  5 00:05:15 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 05 Oct 2014 06:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1412489115.51.8991047638926914038@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141005/d3690f25/attachment.html>

From wolfgang.kde at rohdewald.de  Sun Oct  5 03:59:40 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 11:59:40 +0200
Subject: [Twisted-Python] my branches merged by you (itamar)
Message-ID: <2059527.qlDuKEiMrr@i5>

Thanks for fixing my mistakes!

Based on your fixes I started a personal checklist, see below.
Is that list correct so far? (it will not include things I already
did right)

I noticed that you also changed 'x' to b'x' in some places. I did
not do that yet because it is not needed for those tickets, I wanted
to keep them small and focussed.

Instead I am planning tickets for just that: (after minimizing the
number of places to be fixed)
twisted.spread.banana and tests: literal strings become bytes where appropriate
twisted.spread.jelly and tests: define *_atom consistently for all atoms, change them to bytes
twisted.spread.pb and tests: literal strings become bytes where appropriate

The current checklist:

Line length max. 79
*.rst doc: One line per sentence, no length limit
fully qualified names in doc and news, twisted.*
no __ in Twisted. Everything in a test case is private anyway.
if possible __execute__ (not __define__) only one assert per test
document changed API like raising more or different exceptions
use new print() formatting syntax
Document and isolate test code using the private API of the module to be tested.
test everything with PY2.6 too
did twistedchecker add new warnings?
news: most frequent form: Qualified now does ...
news about spread belong into twisted/topfiles
doc: not pb but PB
Epydoc
docstring ends with point
break docstring lines not sooner than needed
avoid the word ?test? in test docstrings
do not use the ?I am? form in docstrings
test docstring: describe what happens, including exceptions
doc: avoid mentioning the private API

-- 
Wolfgang


From wolfgang.kde at rohdewald.de  Sun Oct  5 06:00:52 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 14:00:52 +0200
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <2059527.qlDuKEiMrr@i5>
References: <2059527.qlDuKEiMrr@i5>
Message-ID: <3508470.GpgFgNaMdt@i5>

That should have been exarkun, not itamar. Sorry for that.

Am Sonntag, 5. Oktober 2014, 11:59:40 schrieb Wolfgang Rohdewald:
> Thanks for fixing my mistakes!
> 
> Based on your fixes I started a personal checklist, see below.
> Is that list correct so far? (it will not include things I already
> did right)
> 
> I noticed that you also changed 'x' to b'x' in some places. I did
> not do that yet because it is not needed for those tickets, I wanted
> to keep them small and focussed.
> 
> Instead I am planning tickets for just that: (after minimizing the
> number of places to be fixed)
> twisted.spread.banana and tests: literal strings become bytes where appropriate
> twisted.spread.jelly and tests: define *_atom consistently for all atoms, change them to bytes
> twisted.spread.pb and tests: literal strings become bytes where appropriate
> 
> The current checklist:
> 
> Line length max. 79
> *.rst doc: One line per sentence, no length limit
> fully qualified names in doc and news, twisted.*
> no __ in Twisted. Everything in a test case is private anyway.
> if possible __execute__ (not __define__) only one assert per test
> document changed API like raising more or different exceptions
> use new print() formatting syntax
> Document and isolate test code using the private API of the module to be tested.
> test everything with PY2.6 too
> did twistedchecker add new warnings?
> news: most frequent form: Qualified now does ...
> news about spread belong into twisted/topfiles
> doc: not pb but PB
> Epydoc
> docstring ends with point
> break docstring lines not sooner than needed
> avoid the word ?test? in test docstrings
> do not use the ?I am? form in docstrings
> test docstring: describe what happens, including exceptions
> doc: avoid mentioning the private API
> 
> 

-- 
Wolfgang


From exarkun at twistedmatrix.com  Sun Oct  5 07:48:12 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 13:48:12 -0000
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <4121201.VS1rzsEyV3@i5>
References: <4121201.VS1rzsEyV3@i5>
Message-ID: <20141005134812.17800.1576310986.divmod.xquotient.1112@top>

On 3 Oct, 11:09 pm, wolfgang.kde at rohdewald.de wrote:
>I now have a local git branch with about 70 commits, always
>rebased onto current trunk.

It makes me sad to learn you're carrying so many patches to Twisted.  It 
might be useful to the project if you could share why this development 
was easier to do outside the tree rather than contributing it to the 
project as you developed it.
>Those test suites pass with Python2 and Python3:
>
>test_banana, test_jelly, test_pb, test_pbfailure, test_persisted
>
>I also have a real app using PB (kajongg, a KDE game). Running
>the server and the client with any combination of Python 2 and
>Python 3 works but more testing is needed there. Especially
>transferring failures with non-ascii test, so I need to inject
>random errors.

For testing?  Probably not random - instead, comprehensive.
>spread.banana is now fully covered by tests (was at 85% before).
>There is still a lot of code in twisted.spread which has no
>tests yet.
>I do not think I want to add missing tests for everything,
>only for those regions where I do changes or where it is not
>too difficult. And of course if an application triggers a bug
>yet uncovered by tests.

The coding standard only requires you to add tests for code you're 
changing.  Python 3 mixes things up a bit though - by changing 
everything.  Calling a module "Python 3 compatible" without changing it 
at all still changes lots of things how about it works.

I think that before the Twisted project wants to call a particular 
module ported, we want it to have test coverage that can run on Python 
3.
>Can you point me to other PB applications I could use for testing?
>Preferrably ones that are already mostly compatible with PY3
>themselves,

I'll let other people volunteer projects they know of - but I strongly 
suspect there are few or no such applications.
>but that is not a _must_, I would try porting them
>unless it turns out to be too much work. And preferrably ones
>developed by people with a non-ascii native language. I do not
>yet trust Failures and logging with non-ascii.
>
>
>Below is the current list of commits. Everything you see
>there is still much in flux. This includes shuffling code
>between commits, combining and splitting commits, changing order.
>I want to open one ticket per commit. Simple things hopefully
>not needing much discussion first.
>
>Estimating one week per review/commit to trunk, this process
>will take more than one year. Often I can only add a new ticket
>after the previous one has been integrated because they
>depend on each other.

If twisted.spread were completely supported on Python 3 in only another 
year I'll be very impressed. :)
>So if it really seems to take that long, at some point I might
>just decide to put what I have to github and not care anymore.
>Which of course means I might have to distribute a patched
>twisted version with my application. I really want to leave
>Python2 behind, and only twisted is in the way. Latest versions
>of KDE do not have Python2 bindings anymore (KDE Frameworks 5).

That's too bad.
>This log of course includes things being in tickets up for review.
>
>git log --pretty='format:%s' --reverse trunk..pb3
><snip>

Again, it seems unfortunate that you have all of this work ... 
somewhere.  Somewhere only you  (as far as I can tell) can see it. 
Somewhere only you can test it.  Somewhere only you can work on it and 
get it contributed to Twisted.

Jean-Paul


From exarkun at twistedmatrix.com  Sun Oct  5 08:20:35 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 14:20:35 -0000
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <3508470.GpgFgNaMdt@i5>
References: <2059527.qlDuKEiMrr@i5>
	<3508470.GpgFgNaMdt@i5>
Message-ID: <20141005142035.17800.1927364738.divmod.xquotient.1121@top>

On 12:00 pm, wolfgang.kde at rohdewald.de wrote:
>That should have been exarkun, not itamar. Sorry for that.
>
>Am Sonntag, 5. Oktober 2014, 11:59:40 schrieb Wolfgang Rohdewald:
>>Thanks for fixing my mistakes!
>>
>>Based on your fixes I started a personal checklist, see below.
>>Is that list correct so far? (it will not include things I already
>>did right)
>>
>>I noticed that you also changed 'x' to b'x' in some places. I did
>>not do that yet because it is not needed for those tickets, I wanted
>>to keep them small and focussed.

I think I only did this where new uses of 'x' was being introduced to 
represent a bytes object.  My goal is for new code being added to be as 
correct as possible so that it doesn't increase the burden of making 
these fixes later.  The time when the code is being first introduced is 
the time when it's easiest to make sure these things are correct.
>>Instead I am planning tickets for just that: (after minimizing the
>>number of places to be fixed)
>>twisted.spread.banana and tests: literal strings become bytes where 
>>appropriate
>>twisted.spread.jelly and tests: define *_atom consistently for all 
>>atoms, change them to bytes
>>twisted.spread.pb and tests: literal strings become bytes where 
>>appropriate
>>
>>The current checklist:
>>
>>Line length max. 79
>>*.rst doc: One line per sentence, no length limit
>>fully qualified names in doc and news, twisted.*
>>no __ in Twisted. Everything in a test case is private anyway.
>>if possible __execute__ (not __define__) only one assert per test

Hmm.  Yes?  I'm not sure.  What do you have in mind here?
>>document changed API like raising more or different exceptions
>>use new print() formatting syntax
>>Document and isolate test code using the private API of the module to 
>>be tested.

I'm also unsure about this one.
>>test everything with PY2.6 too
>>did twistedchecker add new warnings?
>>news: most frequent form: Qualified now does ...
>>news about spread belong into twisted/topfiles
>>doc: not pb but PB
>>Epydoc
>>docstring ends with point
>>break docstring lines not sooner than needed
>>avoid the word ?test? in test docstrings
>>do not use the ?I am? form in docstrings
>>test docstring: describe what happens, including exceptions
>>doc: avoid mentioning the private API

Apart from those two items, the rest of these look great.

Jean-Paul


From wolfgang.kde at rohdewald.de  Sun Oct  5 10:23:35 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 18:23:35 +0200
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
References: <4121201.VS1rzsEyV3@i5>
 <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
Message-ID: <12076355.cZLe9KzarU@i5>

Am Sonntag, 5. Oktober 2014, 13:48:12 schrieb exarkun at twistedmatrix.com:
> On 3 Oct, 11:09 pm, wolfgang.kde at rohdewald.de wrote:
> >I now have a local git branch with about 70 commits, always
> >rebased onto current trunk.
> 
> It makes me sad to learn you're carrying so many patches to Twisted.  It 
> might be useful to the project if you could share why this development 
> was easier to do outside the tree rather than contributing it to the 
> project as you developed it.

This is just my personal style of development. A bit chaotic. Sometimes
trial and error. And really a lot of git rebase -i. Whenever I find
some necessary or helpful change that could be done before porting,
put that at the top of the patch list and readjust everything.
The methodic part comes last: Look at what I changed, rethink why that
is really needed, and look for similar places I overlooked. Then generate
tickets for things that seem ready.

BTW what about Ticket 7628, news extension "port"? I could soon start
feeding porting tickets but if this extension is useful, I guess it
should be applied first.


> I think that before the Twisted project wants to call a particular 
> module ported, we want it to have test coverage that can run on Python 
> 3.

I was afraid you'd say that.
https://twistedmatrix.com/trac/wiki/Plan/Python3 does not explicitly
say so, maybe this should be changed. I can do that, but then I
have no write permission for the wiki.


> I'll let other people volunteer projects they know of - but I strongly 
> suspect there are few or no such applications.

That makes me wonder if I really should have used PB at all. But
now I do and have no plans to change that.


> Again, it seems unfortunate that you have all of this work ... 
> somewhere.  Somewhere only you  (as far as I can tell) can see it. 
> Somewhere only you can test it.  Somewhere only you can work on it and 
> get it contributed to Twisted.

I believe I saw some mailing list posts where many years ago somebody
said he has spread running with PY3 but as it seems nothing of that
got into trunk. Be assured that I want to avoid that.

What is the preferred place for Twisted public repositories?
No svn please, only git.

But first I want to do some more cleaning and reshuffling, I cannot
really do that anymore with commits already pushed to a public
repository. Maybe 2 or 3 weeks.

-- 
Wolfgang


From wolfgang.kde at rohdewald.de  Sun Oct  5 10:26:00 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 18:26 +0200
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <20141005142035.17800.1927364738.divmod.xquotient.1121@top>
References: <2059527.qlDuKEiMrr@i5> <3508470.GpgFgNaMdt@i5>
 <20141005142035.17800.1927364738.divmod.xquotient.1121@top>
Message-ID: <1732400.V7WMTxfrEr@i5>

Am Sonntag, 5. Oktober 2014, 14:20:35 schrieb exarkun at twistedmatrix.com:
> >>I noticed that you also changed 'x' to b'x' in some places. I did
> >>not do that yet because it is not needed for those tickets, I wanted
> >>to keep them small and focussed.
> 
> I think I only did this where new uses of 'x' was being introduced to 
> represent a bytes object.

Then I would not have mentioned this. Three such changes in svn r43220.
b'remote' and two banana encoded strings. I knowingly left it at 'remote'
because I wanted to change that everywhere together.

> My goal is for new code being added to be as 
> correct as possible so that it doesn't increase the burden of making 
> these fixes later.  The time when the code is being first introduced is 
> the time when it's easiest to make sure these things are correct.

I fully agree. Excluding cases where you just re-use an existing string
in one more place because then you have both 'remote' and b'remote'
in the source until you change them all (for that you have to grep
everything anyway). On the other hand, not adapting existing code
to changed guidelines right when they are changed always generates
a lot of such inconsistencies, so this one is really peanuts.
(I know - more manpower is always needed). This is actually a small
problem for me because I rather copy the style of existing code 
instead of reading boring guidelines.


> >>if possible __execute__ (not __define__) only one assert per test
> 
> Hmm.  Yes?  I'm not sure.  What do you have in mind here?

svn r43207 Split up the test with multiple assertions into several tests

There you unfolded the loop. If the real reason was the different 
constructions of the type names (like "__builtin__.type"), I would
have expected a different commit text, and of course you could have
left the loop, like

for obj, name in ((type, '__builtin__.typ'), ...)

So I assumed that you really want as few assertions executed in one
test as possible. I cannot think of any other reason than those two.

BTW your commit "epytext" fixes most but not all. There are still a
few ``xxx`` left. What markup language did you have in mind there?

> >>Document and isolate test code using the private API of the module to 
> >>be tested.
> 
> I'm also unsure about this one.

Cases like svn r43221

Hoist the use of this private API to a single location in a helper function.

which explains why we need to use the private API.



-- 
Wolfgang


From exarkun at twistedmatrix.com  Sun Oct  5 13:58:29 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 19:58:29 -0000
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <12076355.cZLe9KzarU@i5>
References: <4121201.VS1rzsEyV3@i5>
 <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
 <12076355.cZLe9KzarU@i5>
Message-ID: <20141005195829.17800.1945780271.divmod.xquotient.1155@top>

On 04:23 pm, wolfgang.kde at rohdewald.de wrote:
>Am Sonntag, 5. Oktober 2014, 13:48:12 schrieb 
>exarkun at twistedmatrix.com:
>>On 3 Oct, 11:09 pm, wolfgang.kde at rohdewald.de wrote:
>> >I now have a local git branch with about 70 commits, always
>> >rebased onto current trunk.
>>
>>It makes me sad to learn you're carrying so many patches to Twisted. 
>>It
>>might be useful to the project if you could share why this development
>>was easier to do outside the tree rather than contributing it to the
>>project as you developed it.
>
>This is just my personal style of development. A bit chaotic. Sometimes
>trial and error. And really a lot of git rebase -i. Whenever I find
>some necessary or helpful change that could be done before porting,
>put that at the top of the patch list and readjust everything.
>The methodic part comes last: Look at what I changed, rethink why that
>is really needed, and look for similar places I overlooked. Then 
>generate
>tickets for things that seem ready.
>
>BTW what about Ticket 7628, news extension "port"? I could soon start
>feeding porting tickets but if this extension is useful, I guess it
>should be applied first.

Looks like Kevin is working on it.  I'll review it when it comes up.
>
>>I think that before the Twisted project wants to call a particular
>>module ported, we want it to have test coverage that can run on Python
>>3.
>
>I was afraid you'd say that.
>https://twistedmatrix.com/trac/wiki/Plan/Python3 does not explicitly
>say so, maybe this should be changed. I can do that, but then I
>have no write permission for the wiki.

Ah.  I didn't think anyone was paying any attention to the plan anymore 
(and I've run out of energy to try to get people to stick to it).

For example, following the plan, I would have expected to see perhaps 
two patches to port the banana module: one to add the missing test 
coverage and one to make any and all changes necessary to get the test 
suite to pass on Python 3.

(Note, I'm just pointing this out for the sake of clarity.  I'm not 
complaining about the tickets/patches you recently contributed.  As I 
said, I'm out of energy for that).

As far as wiki access goes, I'm not clear on how those permissions work 
anymore.  Perhaps someone else can chime in.  If not, consider asking on 
#twisted-dev.
>
>>I'll let other people volunteer projects they know of - but I strongly
>>suspect there are few or no such applications.
>
>That makes me wonder if I really should have used PB at all. But
>now I do and have no plans to change that.

Sorry about this.  For anyone who's reading and thinking about starting 
a project, I personally recommend you not use PB.  It's almost certainly 
not the right tool to solve the problem you have (if you think your 
problem is so unique and challenging it needs a tool like PB, maybe it 
is!  Feel free to start a discussion about the specifics on this list. 
Maybe you've got one of the rare problems where PB makes sense.)
>
>>Again, it seems unfortunate that you have all of this work ...
>>somewhere.  Somewhere only you  (as far as I can tell) can see it.
>>Somewhere only you can test it.  Somewhere only you can work on it and
>>get it contributed to Twisted.
>
>I believe I saw some mailing list posts where many years ago somebody
>said he has spread running with PY3 but as it seems nothing of that
>got into trunk. Be assured that I want to avoid that.
>
>What is the preferred place for Twisted public repositories?
>No svn please, only git.

Anywhere public.  Collaboration can't take place when things are 
private.
>
>But first I want to do some more cleaning and reshuffling, I cannot
>really do that anymore with commits already pushed to a public
>repository. Maybe 2 or 3 weeks.

Pushing something isn't a promise not to abandoning, screw it up, rebase 
it, delete it later, whatever.

I think that the notion that before something is shared it has to be 
carefully arranged and re-arranged to make it look like it was developed 
by an all-knowing, all-programming super being.

Real software doesn't get built one perfect, self-contained step at a 
time.  The construction of real software is messy.

Jean-Paul


From exarkun at twistedmatrix.com  Sun Oct  5 14:17:49 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 20:17:49 -0000
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <1732400.V7WMTxfrEr@i5>
References: <2059527.qlDuKEiMrr@i5> <3508470.GpgFgNaMdt@i5>
 <20141005142035.17800.1927364738.divmod.xquotient.1121@top>
 <1732400.V7WMTxfrEr@i5>
Message-ID: <20141005201749.17800.132318757.divmod.xquotient.1188@top>

On 04:26 pm, wolfgang.kde at rohdewald.de wrote:
>Am Sonntag, 5. Oktober 2014, 14:20:35 schrieb 
>exarkun at twistedmatrix.com:
>> >>I noticed that you also changed 'x' to b'x' in some places. I did
>> >>not do that yet because it is not needed for those tickets, I wanted
>> >>to keep them small and focussed.
>>
>>I think I only did this where new uses of 'x' was being introduced to
>>represent a bytes object.
>
>Then I would not have mentioned this. Three such changes in svn r43220.
>b'remote' and two banana encoded strings. I knowingly left it at 
>'remote'
>because I wanted to change that everywhere together.

Hm.  You're right on two counts.  The lines:

    undecodable = b'\x7f' * 65 + b'\x85'
and

    decodable = b'\x01\x81'

were not related to the change.  I'm not sure why I decided to make 
those changes.  If I were doing it again now, I wouldn't.

But I'll stick by the decision to write `b'remote'` instead of 
`'remote'` on the line:

    vocab = b'remote'
>>My goal is for new code being added to be as
>>correct as possible so that it doesn't increase the burden of making
>>these fixes later.  The time when the code is being first introduced 
>>is
>>the time when it's easiest to make sure these things are correct.
>
>I fully agree. Excluding cases where you just re-use an existing string
>in one more place because then you have both 'remote' and b'remote'
>in the source until you change them all (for that you have to grep
>everything anyway). On the other hand, not adapting existing code
>to changed guidelines right when they are changed always generates
>a lot of such inconsistencies, so this one is really peanuts.
>(I know - more manpower is always needed). This is actually a small
>problem for me because I rather copy the style of existing code
>instead of reading boring guidelines.

I'm glad we're mostly in agreement and I'll take that as a win. :)
>
>> >>if possible __execute__ (not __define__) only one assert per test
>>
>>Hmm.  Yes?  I'm not sure.  What do you have in mind here?
>
>svn r43207 Split up the test with multiple assertions into several 
>tests
>
>There you unfolded the loop. If the real reason was the different
>constructions of the type names (like "__builtin__.type"), I would
>have expected a different commit text, and of course you could have
>left the loop, like
>
>for obj, name in ((type, '__builtin__.typ'), ...)
>
>So I assumed that you really want as few assertions executed in one
>test as possible. I cannot think of any other reason than those two.

Ah.  I understand now, and you divined my intent correctly.
>BTW your commit "epytext" fixes most but not all. There are still a
>few ``xxx`` left. What markup language did you have in mind there?

sigh... reStructuredText... which Twisted uses for the other half of its 
documentation.
>> >>Document and isolate test code using the private API of the module 
>>to
>> >>be tested.
>>
>>I'm also unsure about this one.
>
>Cases like svn r43221
>
>Hoist the use of this private API to a single location in a helper 
>function.
>
>which explains why we need to use the private API.

Ah.  Great.

Jean-Paul


From wolfgang.kde at rohdewald.de  Sun Oct  5 14:28:42 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 22:28:42 +0200
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
References: <4121201.VS1rzsEyV3@i5> <12076355.cZLe9KzarU@i5>
 <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
Message-ID: <12729075.bzi8kv4GWd@i5>

Am Sonntag, 5. Oktober 2014, 19:58:29 schrieb exarkun at twistedmatrix.com:
> For example, following the plan, I would have expected to see perhaps 
> two patches to port the banana module: one to add the missing test 
> coverage and one to make any and all changes necessary to get the test 
> suite to pass on Python 3.

Impossible. test_jelly imports pb, test_pb imports jelly.

But I can of course reduce the number of tickets related to porting and
put more than one patchfile into them.


-- 
Wolfgang


From exarkun at twistedmatrix.com  Sun Oct  5 15:59:01 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 21:59:01 -0000
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <12729075.bzi8kv4GWd@i5>
References: <4121201.VS1rzsEyV3@i5> <12076355.cZLe9KzarU@i5>
 <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
 <12729075.bzi8kv4GWd@i5>
Message-ID: <20141005215901.17800.1371773274.divmod.xquotient.1192@top>

On 08:28 pm, wolfgang.kde at rohdewald.de wrote:
>Am Sonntag, 5. Oktober 2014, 19:58:29 schrieb 
>exarkun at twistedmatrix.com:
>>For example, following the plan, I would have expected to see perhaps
>>two patches to port the banana module: one to add the missing test
>>coverage and one to make any and all changes necessary to get the test
>>suite to pass on Python 3.
>
>Impossible. test_jelly imports pb, test_pb imports jelly.

That doesn't mean it's impossible.  It just means you may also have to 
shuffle some files around.
>But I can of course reduce the number of tickets related to porting and
>put more than one patchfile into them.

Note that my point isn't that we need to reduce the number of tickets 
related to porting or that there should be more than one patch to 
resolve any one ticket (there shouldn't be).

The point is that the documented porting plan is to port module by 
module, not Python 3 incompatible change by Python 3 incompatible 
change.

Jean-Paul


From bschollnick at gmail.com  Mon Oct  6 18:16:49 2014
From: bschollnick at gmail.com (Benjamin Schollnick)
Date: Mon, 6 Oct 2014 20:16:49 -0400
Subject: [Twisted-Python] Client Logic
Message-ID: <786CDC73-43AA-4811-B992-B3817BC5D843@gmail.com>

Folks,

I?m writing an client using twisted, and I?m basing it off the Poetry client from http://krondo.com/wp-content/uploads/2009/08/twisted-intro.html.
I am porting a previous pyserial based client, so I?m running into new territory here.

And it?s working fine, there are two ?issues" that I am running into.

class WT_Protocol(Protocol):

   tag = ''

   def to_bytes(self, seq):
       """convert a sequence to a bytes type"""
       #
       #   from pyserial.util
       if isinstance(seq, bytes):
           return seq
       elif isinstance(seq, bytearray):
           return bytes(seq)
       elif isinstance(seq, memoryview):
           return seq.tobytes()
       else:
           b = bytearray()
           for item in seq:
               b.append(item)  # this one handles int and str for our emulation and ints for Python 3.x
           return bytes(b)

   def connectionMade(self):
       print "Reseting the network"
       reset = self.to_bytes(packets.network_reset() )
       self.transport.write ( reset )
       self.transport.write ( self.to_bytes(packets.Set_SiteCode(NodeID=255, SC1=0, SC2=0, SC3=0) ))
       self.transport.write ( self.to_bytes(packets.Set_Gain_Packet(NodeID=255, Gain=1) ))    # high gain
       self.transport.write ( self.to_bytes(packets.Set_Protocol_No_Nulls (NetworkID=0, ReceiverID=0, NodeID=1) ))    # high gain
       time.sleep (.5)

Now the client works right now, but I?m concerned that I can?t figure out how to immediately read for a reply packet from the server.

For example, when I send the Set_SiteCode packet, I may receive a reply.  

But how would that occur in the Twisted framework?  In my testing the dataReceived function is not being called, so I can?t trap it there, plus I?m not sure how I would figure that logic.

Can anyone suggest a method to do this?

The second question, as far as I can tell, isn?t very solvable.  I?d like to add a ?Press Q to quit? type logic to the code.  But I don?t see a way to do this easily in twisted?  (platform unspecific, but it?s running Mac OS X / Unix right now).

		- Ben	
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141006/53a9f84f/attachment.html>

From camrdale at gmail.com  Tue Oct  7 20:32:54 2014
From: camrdale at gmail.com (Cameron Dale)
Date: Wed, 8 Oct 2014 04:32:54 +0200
Subject: [Twisted-Python] from: Cameron Dale
Message-ID: <74E788F0-CDDE-4AF8-DA86-E6ADE9FBC2AE@finansdesign.dk>




Hiya

http://minakow.ru/iron.php?pull=aqddrmtvcs3630rwfzrcp

camrdale at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/537036d6/attachment.html>

From glyph at twistedmatrix.com  Tue Oct  7 22:58:28 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 7 Oct 2014 21:58:28 -0700
Subject: [Twisted-Python] Client Logic
In-Reply-To: <786CDC73-43AA-4811-B992-B3817BC5D843@gmail.com>
References: <786CDC73-43AA-4811-B992-B3817BC5D843@gmail.com>
Message-ID: <86239168-B127-4EDD-89CC-B1AAA8F94D9C@twistedmatrix.com>


On Oct 6, 2014, at 5:16 PM, Benjamin Schollnick <bschollnick at gmail.com> wrote:

> Now the client works right now, but I?m concerned that I can?t figure out how to immediately read for a reply packet from the server.

First, if you want to "immediately" do anything, you really need to delete that "time.sleep(.5)" line from your code.  It will block the whole reactor from getting work done :).

> For example, when I send the Set_SiteCode packet, I may receive a reply.  
> 
> But how would that occur in the Twisted framework?

dataReceived will be called with the data when it arrives.  If you're expecting the data that is being sent to be a reply to some message, you should have the code that sends that message return a Deferred; that's what Deferreds are for, representing request/response patterns.

> In my testing the dataReceived function is not being called, so I can?t trap it there, plus I?m not sure how I would figure that logic.

If dataReceived is not getting called, you're not getting data, so no reply has been sent.  You haven't included enough of your program for me to tell why no data is getting sent, though.  Presumably you've got some stuff hooking up your serial port and running the reactor, but without seeing how that works, I can't even guess at what's wrong.

> Can anyone suggest a method to do this?

dataReceived it is :).

> The second question, as far as I can tell, isn?t very solvable.  I?d like to add a ?Press Q to quit? type logic to the code.  But I don?t see a way to do this easily in twisted?  (platform unspecific, but it?s running Mac OS X / Unix right now).

Where do you want to press "Q"?  Do you mean you want to pop up a GUI, or wait for the user to type a "Q" in a Terminal window, or do you mean you want the thing on the other end of the serial port to send a "Q"?  Also, what is "UNIX"?

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141007/e7d0a73f/attachment.html>

From glyph at twistedmatrix.com  Wed Oct  8 01:18:32 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 8 Oct 2014 00:18:32 -0700
Subject: [Twisted-Python] naming question before we end up committed...
In-Reply-To: <A680FCCC-0567-490F-8565-55D8F3C9E63A@gmail.com>
References: <FB5047BF-9EB6-45F4-9B25-B82276C64086@twistedmatrix.com>
 <A7B1154B-01AE-429D-8784-4EA6DE344F48@ox.cx>
 <A680FCCC-0567-490F-8565-55D8F3C9E63A@gmail.com>
Message-ID: <F33B5D44-D33A-4DB4-96EB-6005DA3415AD@twistedmatrix.com>

On Sep 28, 2014, at 8:36 AM, Chris <chriswwolfe at gmail.com> wrote:

> +1 for twisted.logger.

Since everyone seemed to agree, this is now in review: <https://twistedmatrix.com/trac/ticket/7652#comment:3>.

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/68e616d2/attachment.html>

From glyph at twistedmatrix.com  Wed Oct  8 01:32:28 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 8 Oct 2014 00:32:28 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
Message-ID: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>

<https://twistedmatrix.com/trac/ticket/7633> is keeping one of the buildbots persistently red.  It's in review.  There's some discussion on the ticket, 

If anyone has some free time to review it, this would make other code-reviews go just a little bit faster, since reviewers wouldn't need to keep looking at the logs for that builder to make sure that the failures are the "expected" ones; all the builders should be consistently green except for the pesky windows XP one.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/06ef9e6d/attachment.html>

From jml at mumak.net  Wed Oct  8 03:13:08 2014
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 08 Oct 2014 09:13:08 +0000
Subject: [Twisted-Python] a review to speed up other reviews?
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
Message-ID: <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>

Done. Not reviewed for style guide compliance, and I haven't run it locally
or on the build slaves. Hope this helps.

On Wed Oct 08 2014 at 8:32:59 AM Glyph <glyph at twistedmatrix.com> wrote:

> <https://twistedmatrix.com/trac/ticket/7633> is keeping one of the
> buildbots persistently red.  It's in review.  There's some discussion on
> the ticket,
>
> If anyone has some free time to review it, this would make other
> code-reviews go just a little bit faster, since reviewers wouldn't need to
> keep looking at the logs for that builder to make sure that the failures
> are the "expected" ones; all the builders should be consistently green
> except for the pesky windows XP one.
>
> -glyph
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/a2865556/attachment.html>

From glyph at twistedmatrix.com  Wed Oct  8 12:36:33 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 8 Oct 2014 11:36:33 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
In-Reply-To: <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
Message-ID: <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>

On Oct 8, 2014, at 2:13 AM, Jonathan Lange <jml at mumak.net> wrote:

> Done. Not reviewed for style guide compliance, and I haven't run it locally or on the build slaves. Hope this helps.

Thanks very much for having a look at this!  I'll address the feedback.

You shouldn't need to review for style-guide compliance, as that's the twistedchecker buildbot's job.  Which, I should mention, is green on the branch :).

Also, I already ran the buildbots.  You can quickly investigate their results by looking at the "buildbot" link in the "branch" field of the ticket description.

Armed with these two additional pieces of information, would you be willing to turn this comment into a passing review? ;-)

-glyph

From jml at mumak.net  Wed Oct  8 12:50:15 2014
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 08 Oct 2014 18:50:15 +0000
Subject: [Twisted-Python] a review to speed up other reviews?
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
Message-ID: <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>

Comments are on the ticket:
https://twistedmatrix.com/trac/ticket/7633#comment:14. I forgot to reassign
when I did the review earlier today.

On Wed Oct 08 2014 at 7:37:38 PM Glyph Lefkowitz <glyph at twistedmatrix.com>
wrote:

> On Oct 8, 2014, at 2:13 AM, Jonathan Lange <jml at mumak.net> wrote:
>
> > Done. Not reviewed for style guide compliance, and I haven't run it
> locally or on the build slaves. Hope this helps.
>
> Thanks very much for having a look at this!  I'll address the feedback.
>
> You shouldn't need to review for style-guide compliance, as that's the
> twistedchecker buildbot's job.  Which, I should mention, is green on the
> branch :).
>
> Also, I already ran the buildbots.  You can quickly investigate their
> results by looking at the "buildbot" link in the "branch" field of the
> ticket description.
>
> Armed with these two additional pieces of information, would you be
> willing to turn this comment into a passing review? ;-)
>
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/ec4057a9/attachment.html>

From glyph at twistedmatrix.com  Wed Oct  8 12:54:03 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 8 Oct 2014 11:54:03 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
In-Reply-To: <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
 <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
Message-ID: <5016ACAE-705A-4B21-A923-47B877294690@twistedmatrix.com>


On Oct 8, 2014, at 11:50 AM, Jonathan Lange <jml at mumak.net> wrote:

> Comments are on the ticket: https://twistedmatrix.com/trac/ticket/7633#comment:14. I forgot to reassign when I did the review earlier today.

Thanks again.

If that was intended to be a full review though, you did leave out one important step:

As documented in <https://twistedmatrix.com/trac/wiki/ReviewProcess#Howtobeagoodreviewer>,

When you're done with the review, always say what the next step should be: for example, if the author is a committer, can they commit after making a few minor fixes? If your review feedback is more substantial, should they re-submit for another review?

It looks like a "address these minor issues and merge" review, but given that you said you didn't have time to look at certain things, I don't want to make any assumptions.

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/3a3f10d7/attachment.html>

From jml at mumak.net  Wed Oct  8 13:04:09 2014
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 08 Oct 2014 19:04:09 +0000
Subject: [Twisted-Python] a review to speed up other reviews?
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
 <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
 <5016ACAE-705A-4B21-A923-47B877294690@twistedmatrix.com>
Message-ID: <CAHZ8tnZ9dyDY2vqky6i4Aeu_LhJGW=3=OF9ZDKi0meTCCRGN5Q@mail.gmail.com>

On Wed Oct 08 2014 at 7:54:57 PM Glyph Lefkowitz <glyph at twistedmatrix.com>
wrote:

>
> On Oct 8, 2014, at 11:50 AM, Jonathan Lange <jml at mumak.net> wrote:
>
> Comments are on the ticket:
> https://twistedmatrix.com/trac/ticket/7633#comment:14. I forgot to
> reassign when I did the review earlier today.
>
>
> ...
>


> It *looks* like a "address these minor issues and merge" review, but
> given that you said you didn't have time to look at certain things, I don't
> want to make any assumptions.
>
>
Done. Thanks for the reminders.

jml
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/a264254a/attachment.html>

From exarkun at twistedmatrix.com  Wed Oct  8 13:23:41 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 08 Oct 2014 19:23:41 -0000
Subject: [Twisted-Python] Boston Area Twisted Sprint
Message-ID: <20141008192341.17800.2053172312.divmod.xquotient.1235@top>

Hello all,

I'm happy to invite you to a Twisted sprint on Saturday, November 1st
in Cambridge, Massachusetts.  ClusterHQ will be hosting up to twenty
(20) Twisted sprinters at the Cambridge Innovation Center ("Coronet
City" room) in Kendall Square from 10AM until 11PM.  The sprint topics
are attendee choice - hacking on any part of Twisted is welcome.  A
large part of the ClusterHQ team will be taking part in the sprint.

ClusterHQ is developing Flocker, a data management tool for use with
Docker written in Python and based on Twisted.  Follow us on Github:

    https://github.com/clusterhq/flocker

ClusterHQ will provide lunch and dinner (something like delivery
pizza, comment on the meetup page if you'd like to suggest
something!).

Find details and chat about sprint topics at the Boston Twisted Python
meetup page:

    http://www.meetup.com/Boston-Twisted-Python/

Early birds, feel free to contact me off-list about meeting up for 
coffee at
around 9AM before the sprint starts.

Space at CIC is limited.  Please RSVP on the Meetup page!

See you there,
Jean-Paul


From kevin.horn at gmail.com  Wed Oct  8 17:13:10 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 8 Oct 2014 18:13:10 -0500
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
References: <4121201.VS1rzsEyV3@i5>
 <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
 <12076355.cZLe9KzarU@i5>
 <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
Message-ID: <CA+U=zK0DcxMCMt0sNujfKNrAfyv=ZNsaJDd2Sx7UFuue0tmiVA@mail.gmail.com>

On Sun, Oct 5, 2014 at 2:58 PM, <exarkun at twistedmatrix.com> wrote:

> On 04:23 pm, wolfgang.kde at rohdewald.de wrote:
>
>>
>> BTW what about Ticket 7628, news extension "port"? I could soon start
>> feeding porting tickets but if this extension is useful, I guess it
>> should be applied first.
>>
>
> Looks like Kevin is working on it.  I'll review it when it comes up


Apologies.  I got sidetracked preparing for PyTexas (which was last
weekend).  I'll try to get back to it ASAP.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141008/bb0a2f5e/attachment.html>

From glyph at twistedmatrix.com  Thu Oct  9 16:56:14 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 15:56:14 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before the
	race!
Message-ID: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>

On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.

One of the things that tends to put a damper on such events is the perpetual backlog of tickets in review, many of which have been there seemingly forever.

I would like to propose that we - the whole Twisted community, but especially Twisted committers - give these sprinters a morale boost, by giving them a clean slate, review-queue wise.  This will let them focus on developing cool new stuff, getting a release out, fixing gnarly old bugs, or whatever strikes their fancy, instead of just grinding through reviews the whole time, or feeling bad about leaving those reviews outstanding.

Right now, we have 58 tickets in review.

<https://twistedmatrix.com/trac/report/25>

Here's my proposal:

I am looking for at least 4 volunteers for a "review rally" starting on Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself) can review 2 tickets per day for one week, until Sunday, October 19, we can clear 70 tickets, which should take care of the existing 58 tickets currently queued up, plus any that get resubmitted during that week.

While some volunteers should be Twisted committers since we have plenty of pending contributions from non-committers that need review, there are at least 11 tickets in review from core contributors right now, so non-committer volunteers are equally appreciated!

Of course, if we get 9 volunteers, then each reviewer only has to do one ticket per day, an even more tractable goal.  And so on into the higher numbers :-).

Who is with me?!?!

-glyph

P.S.: While you should of course do this out of its self-evident merit, I do plan to recognize participation in some way, at least with a commemorative page on twistedmatrix.com, and possibly also with something a little goofy like a Mozilla Open Badge :-).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/b184e0b5/attachment.html>

From glyph at twistedmatrix.com  Thu Oct  9 17:17:21 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 16:17:21 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
In-Reply-To: <CAHZ8tnZ9dyDY2vqky6i4Aeu_LhJGW=3=OF9ZDKi0meTCCRGN5Q@mail.gmail.com>
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
 <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
 <5016ACAE-705A-4B21-A923-47B877294690@twistedmatrix.com>
 <CAHZ8tnZ9dyDY2vqky6i4Aeu_LhJGW=3=OF9ZDKi0meTCCRGN5Q@mail.gmail.com>
Message-ID: <EB04ED8B-ED0C-4FFF-B2B3-149CF986F2D7@twistedmatrix.com>


On Oct 8, 2014, at 12:04 PM, Jonathan Lange <jml at mumak.net> wrote:

> Done. Thanks for the reminders.

No problem.  Thank you for the review!  It's been landed.

Now the only remaining persistent build failure issue is <https://twistedmatrix.com/trac/ticket/3404>...

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/f866b478/attachment.html>

From hawkowl at atleastfornow.net  Thu Oct  9 17:18:43 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Fri, 10 Oct 2014 07:18:43 +0800
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>

On 10 Oct 2014, at 6:56, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.
> 
> One of the things that tends to put a damper on such events is the perpetual backlog of tickets in review, many of which have been there seemingly forever.
> 
> I would like to propose that we - the whole Twisted community, but especially Twisted committers - give these sprinters a morale boost, by giving them a clean slate, review-queue wise.  This will let them focus on developing cool new stuff, getting a release out, fixing gnarly old bugs, or whatever strikes their fancy, instead of just grinding through reviews the whole time, or feeling bad about leaving those reviews outstanding.
> 
> Right now, we have 58 tickets in review.
> 
> <https://twistedmatrix.com/trac/report/25>
> 
> Here's my proposal:
> 
> I am looking for at least 4 volunteers for a "review rally" starting on Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself) can review 2 tickets per day for one week, until Sunday, October 19, we can clear 70 tickets, which should take care of the existing 58 tickets currently queued up, plus any that get resubmitted during that week.
> 
> While some volunteers should be Twisted committers since we have plenty of pending contributions from non-committers that need review, there are at least 11 tickets in review from core contributors right now, so non-committer volunteers are equally appreciated!
> 
> Of course, if we get 9 volunteers, then each reviewer only has to do one ticket per day, an even more tractable goal.  And so on into the higher numbers :-).
> 
> Who is with me?!?!
> 
> -glyph
> 
> P.S.: While you should of course do this out of its self-evident merit, I do plan to recognize participation in some way, at least with a commemorative page on twistedmatrix.com, and possibly also with something a little goofy like a Mozilla Open Badge :-).
> 

Sure ? I should be doing reviews anyway :)

-hawkie

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/683d9b6c/attachment.pgp>

From chriswwolfe at gmail.com  Thu Oct  9 17:39:40 2014
From: chriswwolfe at gmail.com (Chris Wolfe)
Date: Thu, 9 Oct 2014 18:39:40 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
Message-ID: <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>

Sure - I'm not a committer, but I'll do my best.
Am 09.10.2014 18:21 schrieb "HawkOwl" <hawkowl at atleastfornow.net>:

> On 10 Oct 2014, at 6:56, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:
>
> > On November 1, ClusterHQ is going to be hosting a Twisted sprint in
> Boston.
> >
> > One of the things that tends to put a damper on such events is the
> perpetual backlog of tickets in review, many of which have been there
> seemingly forever.
> >
> > I would like to propose that we - the whole Twisted community, but
> especially Twisted committers - give these sprinters a morale boost, by
> giving them a clean slate, review-queue wise.  This will let them focus on
> developing cool new stuff, getting a release out, fixing gnarly old bugs,
> or whatever strikes their fancy, instead of just grinding through reviews
> the whole time, or feeling bad about leaving those reviews outstanding.
> >
> > Right now, we have 58 tickets in review.
> >
> > <https://twistedmatrix.com/trac/report/25>
> >
> > Here's my proposal:
> >
> > I am looking for at least 4 volunteers for a "review rally" starting on
> Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself)
> can review 2 tickets per day for one week, until Sunday, October 19, we can
> clear 70 tickets, which should take care of the existing 58 tickets
> currently queued up, plus any that get resubmitted during that week.
> >
> > While some volunteers should be Twisted committers since we have plenty
> of pending contributions from non-committers that need review, there are at
> least 11 tickets in review from core contributors right now, so
> non-committer volunteers are equally appreciated!
> >
> > Of course, if we get 9 volunteers, then each reviewer only has to do one
> ticket per day, an even more tractable goal.  And so on into the higher
> numbers :-).
> >
> > Who is with me?!?!
> >
> > -glyph
> >
> > P.S.: While you should of course do this out of its self-evident merit,
> I do plan to recognize participation in some way, at least with a
> commemorative page on twistedmatrix.com, and possibly also with something
> a little goofy like a Mozilla Open Badge :-).
> >
>
> Sure ? I should be doing reviews anyway :)
>
> -hawkie
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/06befd42/attachment.html>

From glyph at twistedmatrix.com  Thu Oct  9 17:43:18 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 16:43:18 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
Message-ID: <032C939A-FB61-4198-9B9F-C0AF41AE500B@twistedmatrix.com>


On Oct 9, 2014, at 4:18 PM, HawkOwl <hawkowl at atleastfornow.net> wrote:

> Sure ? I should be doing reviews anyway :)

Thanks HawkOwl!  I'm looking forward to it.  Congrats on being the fastest volunteer :-).

You should be doing reviews anyway (shouldn't we all?) and part of my hope for this is that if we make a periodic concerted push to get the numbers down from the dizzying heights they've jumped to, it will be a lot more satisfying to do reviews more informally later, because there won't be such a discouragingly long list that it's hard to make a dent in.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/2c7f3e68/attachment-0001.html>

From glyph at twistedmatrix.com  Thu Oct  9 17:45:07 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 16:45:07 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
 <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
Message-ID: <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>

On Oct 9, 2014, at 4:39 PM, Chris Wolfe <chriswwolfe at gmail.com> wrote:
> Sure - I'm not a committer, but I'll do my best.\
> 

Thanks Chris, your participation is much appreciated!

Now we've got:

1. me
2. hawkowl
3. chris wolfe

Have you done reviews before?  Before the week starts you should definitely familiarize yourself with <https://twistedmatrix.com/trac/wiki/ReviewProcess> and make sure you know what to do.  Please feel free to reach out if this documentation is in any way unclear (we definitely know it's not the best).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/21f49467/attachment.html>

From chriswwolfe at gmail.com  Thu Oct  9 17:48:31 2014
From: chriswwolfe at gmail.com (Chris Wolfe)
Date: Thu, 9 Oct 2014 18:48:31 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
 <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
 <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>
Message-ID: <CAEKSqktmBkjYq6D_P4zLK+hTBL5bef4FtOUo7-TVfMbTNxHz4A@mail.gmail.com>

Yes - I have, I'm herrwolfe
Am 09.10.2014 18:47 schrieb "Glyph Lefkowitz" <glyph at twistedmatrix.com>:

> On Oct 9, 2014, at 4:39 PM, Chris Wolfe <chriswwolfe at gmail.com> wrote:
>
> Sure - I'm not a committer, but I'll do my best.\
>
> Thanks Chris, your participation is much appreciated!
>
> Now we've got:
>
> 1. me
> 2. hawkowl
> 3. chris wolfe
>
> Have you done reviews before?  Before the week starts you should
> definitely familiarize yourself with <
> https://twistedmatrix.com/trac/wiki/ReviewProcess> and make sure you know
> what to do.  Please feel free to reach out if this documentation is in any
> way unclear (we definitely know it's not the best).
>
> -glyph
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/c874bad5/attachment.html>

From glyph at twistedmatrix.com  Thu Oct  9 18:03:00 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 17:03:00 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <CAEKSqktmBkjYq6D_P4zLK+hTBL5bef4FtOUo7-TVfMbTNxHz4A@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
 <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
 <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>
 <CAEKSqktmBkjYq6D_P4zLK+hTBL5bef4FtOUo7-TVfMbTNxHz4A@mail.gmail.com>
Message-ID: <99965CA2-A187-40D0-8A9C-E2CE5388DAB1@twistedmatrix.com>

On Oct 9, 2014, at 4:48 PM, Chris Wolfe <chriswwolfe at gmail.com> wrote:

> Yes - I have, I'm herrwolfe
> 

Oh, cool!  Hard to draw the lines between handles and names sometimes :).

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/332b4bc9/attachment.html>

From paul at eventuallyanyway.com  Thu Oct  9 18:45:34 2014
From: paul at eventuallyanyway.com (Paul Hummer)
Date: Thu, 09 Oct 2014 18:45:34 -0600
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <1412901934.1221022.177272397.1DEDD6FF@webmail.messagingengine.com>



On Thu, Oct 9, 2014, at 04:56 PM, Glyph Lefkowitz wrote:

I am looking for at least 4 volunteers for a "review rally"
starting on Monday, October 13.  If each of 5 reviewers (the 4
volunteers, plus myself) can review 2 tickets per day for one
week, until Sunday, October 19, we can clear 70 tickets, which
should take care of the existing 58 tickets currently queued
up, plus any that get resubmitted during that week.



1. It's been a while since I helped out.

2. I'm free that week.

3. I could use the karma.



That is all to say, I can help out.



Cheers,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/a2419c67/attachment.html>

From bschollnick at gmail.com  Thu Oct  9 19:33:35 2014
From: bschollnick at gmail.com (Benjamin Schollnick)
Date: Thu, 9 Oct 2014 21:33:35 -0400
Subject: [Twisted-Python] client logic
Message-ID: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>

I?m sorry if this is a duplicate?  I sent this earlier, but I don?t see it in the archives?

Folks,

I?m writing an client using twisted, and I?m basing it off the Poetry client from http://krondo.com/wp-content/uploads/2009/08/twisted-intro.html.
I am porting a previous pyserial based client, so I?m running into new territory here.

And it?s working fine, there are two ?issues" that I am running into.

class WT_Protocol(Protocol):

   tag = ''

   def to_bytes(self, seq):
       """convert a sequence to a bytes type"""
       #
       #   from pyserial.util
       if isinstance(seq, bytes):
           return seq
       elif isinstance(seq, bytearray):
           return bytes(seq)
       elif isinstance(seq, memoryview):
           return seq.tobytes()
       else:
           b = bytearray()
           for item in seq:
               b.append(item)  # this one handles int and str for our emulation and ints for Python 3.x
           return bytes(b)

   def connectionMade(self):
       print "Reseting the network"
       reset = self.to_bytes(packets.network_reset() )
       self.transport.write ( reset )
       self.transport.write ( self.to_bytes(packets.Set_SiteCode(NodeID=255, SC1=0, SC2=0, SC3=0) ))
       self.transport.write ( self.to_bytes(packets.Set_Gain_Packet(NodeID=255, Gain=1) ))    # high gain
       self.transport.write ( self.to_bytes(packets.Set_Protocol_No_Nulls (NetworkID=0, ReceiverID=0, NodeID=1) ))    # high gain
       time.sleep (.5)

Now the client works right now, but I?m concerned that I can?t figure out how to immediately read for a reply packet from the server.

For example, when I send the Set_SiteCode packet, I may receive a reply.  

But how would that occur in the Twisted framework?  In my testing the dataReceived function is not being called, so I can?t trap it there, plus I?m not sure how I would figure that logic.

Can anyone suggest a method to do this?

The second question, as far as I can tell, isn?t very solvable.  I?d like to add a ?Press Q to quit? type logic to the code.  But I don?t see a way to do this easily in twisted?  (platform unspecific, but it?s running Mac OS X / Unix right now).

		- Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141009/ceb99df5/attachment.html>

From _ at habnab.it  Thu Oct  9 20:12:44 2014
From: _ at habnab.it (Aaron Gallagher)
Date: Thu, 09 Oct 2014 19:12:44 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the	race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <m2k34865b7.fsf@ender.habnabit.org>

Glyph Lefkowitz <glyph at twistedmatrix.com> writes:

> I am looking for at least 4 volunteers for a "review rally" starting
> on Monday, October 13. If each of 5 reviewers (the 4 volunteers, plus
> myself) can review 2 tickets per day for one week, until Sunday,
> October 19, we can clear 70 tickets, which should take care of the
> existing 58 tickets currently queued up, plus any that get resubmitted
> during that week.

I'd been planning on getting into doing more reviews, and this is as
good an excuse as any to get started. Monday I'll be travelling, but
I'll try to participate for the rest of the week.


From hs at ox.cx  Thu Oct  9 23:32:50 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Fri, 10 Oct 2014 07:32:50 +0200
Subject: [Twisted-Python] client logic
In-Reply-To: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>
References: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>
Message-ID: <75ff4beb-b8f6-47c0-96a3-bc7d425a590e@Hyneks-iPhone>

Hi Benjamin,

> I?m sorry if this is a duplicate? ?I sent this earlier, but I don?t see it in the archives?
>  

I can see it in the archives along with this reply by glyph: http://twistedmatrix.com/pipermail/twisted-python/2014-October/028841.html

?h
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/4949d2e9/attachment.html>

From jml at mumak.net  Fri Oct 10 00:21:09 2014
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 10 Oct 2014 06:21:09 +0000
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <m2k34865b7.fsf@ender.habnabit.org>
Message-ID: <CAHZ8tnaFwFt+4j=H1SmytbkACk2mTnfa1cb2-RSFrd_FXcc7Lw@mail.gmail.com>

Sure. I'll do it.

On Fri Oct 10 2014 at 3:13:18 AM Aaron Gallagher <_ at habnab.it> wrote:

> Glyph Lefkowitz <glyph at twistedmatrix.com> writes:
>
> > I am looking for at least 4 volunteers for a "review rally" starting
> > on Monday, October 13. If each of 5 reviewers (the 4 volunteers, plus
> > myself) can review 2 tickets per day for one week, until Sunday,
> > October 19, we can clear 70 tickets, which should take care of the
> > existing 58 tickets currently queued up, plus any that get resubmitted
> > during that week.
>
> I'd been planning on getting into doing more reviews, and this is as
> good an excuse as any to get started. Monday I'll be travelling, but
> I'll try to participate for the rest of the week.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/56143f78/attachment.html>

From bschollnick at gmail.com  Fri Oct 10 02:55:59 2014
From: bschollnick at gmail.com (Benjamin Schollnick)
Date: Fri, 10 Oct 2014 04:55:59 -0400
Subject: [Twisted-Python] client logic
In-Reply-To: <75ff4beb-b8f6-47c0-96a3-bc7d425a590e@Hyneks-iPhone>
References: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>
 <75ff4beb-b8f6-47c0-96a3-bc7d425a590e@Hyneks-iPhone>
Message-ID: <8C7E6477-B8D9-4364-8B84-F4C0EFE85A94@gmail.com>

> I can see it in the archives along with this reply by glyph: http://twistedmatrix.com/pipermail/twisted-python/2014-October/028841.html

Interesting.  Sorry about that.

I need to confirm this, but I believe I see what is happening now.  Glyph?s reply was quite helpful, I?ll look into the defers.

Thanks for the help.

> ?h



From glyph at twistedmatrix.com  Fri Oct 10 20:15:02 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:15:02 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <1412901934.1221022.177272397.1DEDD6FF@webmail.messagingengine.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <1412901934.1221022.177272397.1DEDD6FF@webmail.messagingengine.com>
Message-ID: <3E7299A4-27A9-4842-B2E5-F0667D9D4FB3@twistedmatrix.com>


On Oct 9, 2014, at 5:45 PM, Paul Hummer <paul at eventuallyanyway.com> wrote:

> That is all to say, I can help out.


Thanks Paul, I'm glad to hear it!

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/9beabcf9/attachment.html>

From glyph at twistedmatrix.com  Fri Oct 10 20:15:29 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:15:29 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the	race!
In-Reply-To: <m2k34865b7.fsf@ender.habnabit.org>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <m2k34865b7.fsf@ender.habnabit.org>
Message-ID: <CE8A7F20-1398-47F5-9E32-427645CFAEE1@twistedmatrix.com>


On Oct 9, 2014, at 7:12 PM, Aaron Gallagher <_ at habnab.it> wrote:

> I'd been planning on getting into doing more reviews, and this is as
> good an excuse as any to get started. Monday I'll be travelling, but
> I'll try to participate for the rest of the week.

Every little bit helps - and you can always review 4 tickets on Tuesday to catch up ;-).

Thanks a lot for volunteering!

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/b5bf0984/attachment.html>

From glyph at twistedmatrix.com  Fri Oct 10 20:17:57 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:17:57 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <CAHZ8tnaFwFt+4j=H1SmytbkACk2mTnfa1cb2-RSFrd_FXcc7Lw@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <m2k34865b7.fsf@ender.habnabit.org>
 <CAHZ8tnaFwFt+4j=H1SmytbkACk2mTnfa1cb2-RSFrd_FXcc7Lw@mail.gmail.com>
Message-ID: <9A9C633E-8B5C-44CC-B6D9-93FA6E78EF89@twistedmatrix.com>


On Oct 9, 2014, at 11:21 PM, Jonathan Lange <jml at mumak.net> wrote:

> Sure. I'll do it.

Fantastic.  I much appreciate it.

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/b60c894e/attachment.html>

From glyph at twistedmatrix.com  Fri Oct 10 20:22:43 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:22:43 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>


On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> Who is with me?!?!

So right now, it looks like the roster is:

me
HawkOwl
Chris Wolfe
Paul Hummer
Aaron Gallagher
Jonathan Lange

This is awesome.  Thanks again to everyone for volunteering.  I am looking forward to a big leap forward in contributor responsiveness next week :-D.

But it would be even more awesome if you added your name to this list!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/a3d66e82/attachment.html>

From glyph at twistedmatrix.com  Sat Oct 11 00:26:56 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 23:26:56 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool -
	time to test!
Message-ID: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>

Again as per <https://twistedmatrix.com/trac/wiki/CompatibilityPolicy#ProcedureforExceptionstothisPolicy>, in order to conclude this discussion, I need to provide Twisted users with a branch to test their code against.  Well, now you have it - and as per the policy you have a week from the sending of this message to register any objections :).

The ticket <https://twistedmatrix.com/trac/ticket/2673> is in review now, and the branch is <desynchronize-2673-2>.

Many of the existing tests used some of the compatibility features that we discussed previously, so I just left the existing tests intact.  However, if you need any more compatibility features, please let me know and I can implement them in the branch.  Feel free to reply here, or comment there.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141010/cf07613e/attachment.html>

From weykent at weasyl.com  Sat Oct 11 12:17:17 2014
From: weykent at weasyl.com (weykent)
Date: Sat, 11 Oct 2014 11:17:17 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
	- time to test!
In-Reply-To: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>
References: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>
Message-ID: <3312D584-3630-4F67-A4F4-6DDB0C3A65CC@weasyl.com>

On Oct 10, 2014, at 11:26 PM, Glyph <glyph at twistedmatrix.com> wrote:

> The ticket <https://twistedmatrix.com/trac/ticket/2673> is in review now, and the branch is <desynchronize-2673-2>.

I just tested my threadpool statistics collection code against that branch, and it works perfectly! Thanks a lot for your effort in this branch.



From wolfgang.kde at rohdewald.de  Sat Oct 11 15:30:56 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sat, 11 Oct 2014 23:30:56 +0200
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
Message-ID: <27709999.CuWcHncEeD@i5>

Hi,

while trying to isolate a bug in my app, I found some strange
differences between the implementations of remote_* and perspective_*.

1. in pb.Broker.serialize(), those attributes are set and restored:
   jellyMethod, jellyArgs, jellyKw. Within twisted
   Those attributes are not used anywhere. I grepped, and I ran the
   test suite without those. Is there some code outside of twisted
   using this? What for? Or is there a need for avoiding garbage
   collection? (which would need some explanation).

   My theory is that it was forgotten to remove them when doing
   svn commit 1448: Before, they were actually used in 
   _NetJellier._jelly_instance, but no more after this commit.


2. Those implementations differ:
	remote_*: return broker.serialize(state, self.perspective)
   	perspective_*: return broker.serialize(state, self, method, args, kw)
   	view_*: return broker.serialize(state, self.perspective, method, args, kw)
   	observe_*: return broker.serialize(state, None, method, args, kw)

   Can you please explain why remote_* is implemented differently?
   This goes back to before the first import to svn, so I cannot 
   browse the history.


3. They all raise AttributeError for undefined method except remote_*
   which raises MethodNotFound. Both are not documented in the API.
   Could this be unified to MethodNotFound?

   My theory is that svn commit 13473 was incomplete. Commit message was:

	Raise NoSuchMethod instead of AttributeError when call is made to remote_
   	method that doesn't exist


-- 
Wolfgang


From wolfgang.kde at rohdewald.de  Sat Oct 11 15:34:22 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sat, 11 Oct 2014 23:34:22 +0200
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
In-Reply-To: <27709999.CuWcHncEeD@i5>
References: <27709999.CuWcHncEeD@i5>
Message-ID: <21093377.tTsfqhGN2B@i5>

Am Samstag, 11. Oktober 2014, 23:30:56 schrieb Wolfgang Rohdewald:
> 2. Those implementations differ:
>         remote_*: return broker.serialize(state, self.perspective)
>         perspective_*: return broker.serialize(state, self, method, args, kw)
>         view_*: return broker.serialize(state, self.perspective, method, args, kw)
>         observe_*: return broker.serialize(state, None, method, args, kw)
> 
>    Can you please explain why remote_* is implemented differently?
>    This goes back to before the first import to svn, so I cannot 
>    browse the history.

I was unclear, what I want to know is only why args, kw are not passed for remote_*. 

-- 
Wolfgang


From glyph at twistedmatrix.com  Sat Oct 11 21:16:06 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 11 Oct 2014 20:16:06 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
	- time to test!
In-Reply-To: <3312D584-3630-4F67-A4F4-6DDB0C3A65CC@weasyl.com>
References: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>
 <3312D584-3630-4F67-A4F4-6DDB0C3A65CC@weasyl.com>
Message-ID: <DF28C4A5-940F-4455-BFD3-43E8D514F421@twistedmatrix.com>

On Oct 11, 2014, at 11:17 AM, weykent <weykent at weasyl.com> wrote:

> On Oct 10, 2014, at 11:26 PM, Glyph <glyph at twistedmatrix.com> wrote:
> 
>> The ticket <https://twistedmatrix.com/trac/ticket/2673> is in review now, and the branch is <desynchronize-2673-2>.
> 
> I just tested my threadpool statistics collection code against that branch, and it works perfectly! Thanks a lot for your effort in this branch.

Thank you for testing it so promptly!

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141011/7d246b4a/attachment.html>

From trac at twistedmatrix.com  Sun Oct 12 00:05:15 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 12 Oct 2014 06:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1413093915.73.6944052177967651045@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141012/54ec5abd/attachment.html>

From jmp at justinmp.org  Mon Oct 13 06:46:32 2014
From: jmp at justinmp.org (Justin Mazzola Paluska)
Date: Mon, 13 Oct 2014 08:46:32 -0400
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
Message-ID: <CAAk1W6ir7M9Jbx3FfX=BsgAxsvx5uXgMQGqWnv4ag9ZPnzgOhg@mail.gmail.com>

On 10/09/2014 06:56 PM, Glyph Lefkowitz wrote:

On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.

...

I am looking for at least 4 volunteers for a "review rally" starting on
Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself)
can review 2 tickets per day for one week, until Sunday, October 19, we can
clear 70 tickets, which should take care of the existing 58 tickets
currently queued up, plus any that get resubmitted during that week.


I'm curious if any Boston-area Twisted developers or reviewers are going to
be going to the Boston Python User Group Meetup tomorrow [Tuesday] at MS
NERD.  I ask because I'd like to get into helping out with Twisted?maybe by
joining the review rally?and it's always more fun to get started with
others.

Either way, I am interested in reviewing code, if there is a way for a
long-time Twisted user, but list lurker, to get started reviewing code.
     --Justin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141013/dc8212b4/attachment.html>

From jmp at justinmp.com  Mon Oct 13 06:52:15 2014
From: jmp at justinmp.com (Justin Mazzola Paluska)
Date: Mon, 13 Oct 2014 08:52:15 -0400
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <CAAk1W6ir7M9Jbx3FfX=BsgAxsvx5uXgMQGqWnv4ag9ZPnzgOhg@mail.gmail.com>
References: <CAAk1W6ir7M9Jbx3FfX=BsgAxsvx5uXgMQGqWnv4ag9ZPnzgOhg@mail.gmail.com>
Message-ID: <CAAk1W6iefXk=mx7xqcKngvLOrFqCxjbtqdgTem=vTUPbEj52Tw@mail.gmail.com>

And sending from the correct domain this time...
     --Justin

On Mon, Oct 13, 2014 at 8:46 AM, Justin Mazzola Paluska <jmp at justinmp.org>
wrote:

>
> On 10/09/2014 06:56 PM, Glyph Lefkowitz wrote:
>
> On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.
>
> ...
>
> I am looking for at least 4 volunteers for a "review rally" starting on
> Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself)
> can review 2 tickets per day for one week, until Sunday, October 19, we can
> clear 70 tickets, which should take care of the existing 58 tickets
> currently queued up, plus any that get resubmitted during that week.
>
>
> I'm curious if any Boston-area Twisted developers or reviewers are going
> to be going to the Boston Python User Group Meetup tomorrow [Tuesday] at MS
> NERD.  I ask because I'd like to get into helping out with Twisted?maybe by
> joining the review rally?and it's always more fun to get started with
> others.
>
> Either way, I am interested in reviewing code, if there is a way for a
> long-time Twisted user, but list lurker, to get started reviewing code.
>      --Justin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141013/f50f3cdf/attachment.html>

From kevin.horn at gmail.com  Mon Oct 13 10:31:13 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Mon, 13 Oct 2014 11:31:13 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
Message-ID: <CA+U=zK2tB+TNmDizgjgCNrCUxS8MOu-wDUEE_hJvSXom4Ev79g@mail.gmail.com>

I'll see if I can crank through a couple of tickets, but this week is...not
a good week for me.

Of course, Twisted might be a good distraction from work annoyances.

It's unlikely I'll get through more than a handful over the week, but I
figure a handful is better than none.

On Fri, Oct 10, 2014 at 9:22 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>
> wrote:
>
> Who is with me?!?!
>
>
> So right now, it looks like the roster is:
>
>
>    - me
>    - HawkOwl
>    - Chris Wolfe
>    - Paul Hummer
>    - Aaron Gallagher
>    - Jonathan Lange
>
>
> This is awesome.  Thanks again to everyone for volunteering.  I am looking
> forward to a big leap forward in contributor responsiveness next week :-D.
>
> But it would be even more awesome if you added *your* name to this list!
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141013/8491aca8/attachment.html>

From jon at multani.info  Mon Oct 13 11:07:52 2014
From: jon at multani.info (Jonathan Ballet)
Date: Mon, 13 Oct 2014 19:07:52 +0200
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <543C06E8.3000207@multani.info>

On 10/10/2014 12:56 AM, Glyph Lefkowitz wrote:
>
> I am looking for at least 4 volunteers for a "review rally" starting on
> Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus
> myself) can review 2 tickets per day for one week, until Sunday, October
> 19, we can clear 70 tickets, which should take care of the existing 58
> tickets currently queued up, plus any that get resubmitted during that week.
>
> While some volunteers should be Twisted committers since we have plenty
> of pending contributions from non-committers that need review, there are
> at least 11 tickets in review from core contributors right now, so
> non-committer volunteers are equally appreciated!

Although I'm a non-committer, I'll pop-in during the week :)
I wanted to give Adiroiban's cleanup tickets a review anyway.

  Jonathan (multani)


From Axel.Rau at chaos1.de  Tue Oct 14 00:02:01 2014
From: Axel.Rau at chaos1.de (Axel Rau)
Date: Tue, 14 Oct 2014 08:02:01 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
Message-ID: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>

I have adapted t.c.s.cftp and one of the ssh examples to transfer files to a remote host and than execute some commands there.
Both has to be done for several remote hosts in sequence.
Start of the ssh session has to wait until the cftp sessions are complete and after that has completed, the cftp session for the next host has to be started . . .

The cftp part begins so:

def distributeStuff(host, tasks):
    . . .
    doConnect(reactor, options, tasks)


def doConnect(reactor, options, tasks):
    . . .
    conn.tasks = tasks
    vhk = verifyHostKey
    uao = SSHUserAuthClient(options['user'], options, conn)
    connect(host, port, options, vhk, uao).addErrback(_ebExit)

class SSHConn(connection.SSHConnection):
    def serviceStarted(self):
        self.openChannel(SSHSession())

I played with inlineCallbacks but could not find a point where to place my yielded function.
I tried to overwrite channelClosed in SSHConn:

    def channelClosed(self, channel):
        super(SSHConn, self).channelClosed(channel)
        if len(self.channels) == 0:
            print ?[Last channel closed.]'
            # open ssh ssession:
            . . .
 but that gave an unhandled error:
2014-10-14 07:54:34+0200 [SSHService ssh-connection on SSHClientTransport,client] Unhandled Error
	Traceback (most recent call last):
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/internet/tcp.py", line 214, in doRead
	    return self._dataReceived(data)
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/internet/tcp.py", line 220, in _dataReceived
	    rval = self.protocol.dataReceived(data)
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/conch/ssh/transport.py", line 461, in dataReceived
	    self.dispatchMessage(messageNum, packet[1:])
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/conch/ssh/transport.py", line 483, in dispatchMessage
	    messageNum, payload)
	--- <exception caught here> ---
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/python/log.py", line 88, in callWithLogger
	    return callWithContext({"system": lp}, func, *args, **kw)
	  File ?/usr/local/py_venv/p27/lib/python2.7/site-p
(bt stopped here).

Please advise!

Thanks, Axel
?
PGP-Key:29E99DD6  ? +49 151 2300 9283  ? computing @ chaos claudius



From nispray at gmail.com  Tue Oct 14 02:06:13 2014
From: nispray at gmail.com (Ni Wesley)
Date: Tue, 14 Oct 2014 16:06:13 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
Message-ID: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>

Hi all,
   I don't know if here is the right place.
I hit a problem with pyapns which is based on twisted.

So, I get code from our parter and setup up env involving interacting with
APNS for IOS pushing work.

I hit the problem that twisted hangs after a while's idle, I mean, when I
start twisted with command:
twistd -r epoll web --class=pyapns.server.APNSServer --port=7077

Then, raise an notification to IOS device by pyapns(
https://github.com/samuraisam/pyapns),it's OK.

However, if I let the system alone for a while, then, new raised
notifications are all failed, what's more, if now I kill twisted process,
and restart with the above command again, push operations are successful
again.

I use python2.7 and twisted 14.0.0 on Redhat6.4.

So, anyone has hit this problem?

Thanks.
Wesley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141014/a32f593e/attachment.html>

From jonas.brunsgaard at gmail.com  Tue Oct 14 03:14:30 2014
From: jonas.brunsgaard at gmail.com (Jonas Brunsgaard)
Date: Tue, 14 Oct 2014 11:14:30 +0200
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
Message-ID: <CACVXvXrjT69OBZVRE2TKDV4UmtRn+YbVtY-b2b-YVC5LKsk5EA@mail.gmail.com>

Hey  Ni

I can not relate to your specific problem. But where I work, we have a
pyapns server in place for push notifications. What we have learned is
that the v50 branch of the repo is much more stable than the code in
master. So maybe give v50 a try, notice that a new rest api is used in
v50.


From nispray at gmail.com  Tue Oct 14 05:32:34 2014
From: nispray at gmail.com (Ni Wesley)
Date: Tue, 14 Oct 2014 19:32:34 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACVXvXrjT69OBZVRE2TKDV4UmtRn+YbVtY-b2b-YVC5LKsk5EA@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <CACVXvXrjT69OBZVRE2TKDV4UmtRn+YbVtY-b2b-YVC5LKsk5EA@mail.gmail.com>
Message-ID: <CACL3mTCXYAW6UEXHvOdnTNLKzqnBiDrekJJ7DQ-fZ-o=Uo_CGw@mail.gmail.com>

Hi,
   Pyapns has v50?
Could you please put a link here?

Thanks.

Wesley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141014/5fb30b91/attachment.html>

From exarkun at twistedmatrix.com  Tue Oct 14 06:22:19 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 14 Oct 2014 12:22:19 -0000
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
References: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
Message-ID: <20141014122219.5924.1425058572.divmod.xquotient.1@top>

On 06:02 am, axel.rau at chaos1.de wrote:
>I have adapted t.c.s.cftp and one of the ssh examples to transfer files 
>to a remote host and than execute some commands there.
>Both has to be done for several remote hosts in sequence.
>Start of the ssh session has to wait until the cftp sessions are 
>complete and after that has completed, the cftp session for the next 
>host has to be started . . .
>
>The cftp part begins so:

We might need more to go on.  Do you have a complete, minimal example? 
(See http://sscce.org/)

Jean-Paul


From Axel.Rau at Chaos1.DE  Tue Oct 14 09:07:28 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Tue, 14 Oct 2014 17:07:28 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <20141014122219.5924.1425058572.divmod.xquotient.1@top>
References: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
 <20141014122219.5924.1425058572.divmod.xquotient.1@top>
Message-ID: <0E8CD855-9E6A-4E7B-87EC-7D7A0BB6AFAF@Chaos1.DE>


Am 14.10.2014 um 14:22 schrieb exarkun at twistedmatrix.com:

> 
> We might need more to go on.  Do you have a complete, minimal example? (See http://sscce.org/)
The attached zip archive  
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ml.zip
Type: application/zip
Size: 3099 bytes
Desc: not available
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141014/5e35dacd/attachment.zip>
-------------- next part --------------
 contains:
	sftp.py, ssh.py and test.py
To run it, you need to prepare some files in /tmp and select a host to which you have ssh access via public key.
If you comment out the call to ssh.executeRemoteCommands in test, sftp.distributeFiles should complete successfully if you run test.
Commenting out the call to sftp.distributeFiles, allows the call to ssh.executeRemoteCommands to do its work, but it does not exit.

Axel

---
PGP-Key:29E99DD6  ? +49 151 2300 9283  ? computing @ chaos claudius


From glyph at twistedmatrix.com  Tue Oct 14 16:38:06 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 14 Oct 2014 15:38:06 -0700
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
Message-ID: <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>


On Oct 14, 2014, at 1:06 AM, Ni Wesley <nispray at gmail.com> wrote:

> Hi all,
>    I don't know if here is the right place. 
> I hit a problem with pyapns which is based on twisted.
> 
> So, I get code from our parter and setup up env involving interacting with APNS for IOS pushing work.
> 
> I hit the problem that twisted hangs after a while's idle, I mean, when I start twisted with command: 
> twistd -r epoll web --class=pyapns.server.APNSServer --port=7077
> 
> Then, raise an notification to IOS device by pyapns(https://github.com/samuraisam/pyapns),it's OK.
> 
> However, if I let the system alone for a while, then, new raised notifications are all failed, what's more, if now I kill twisted process, and restart with the above command again, push operations are successful again.
> 
> I use python2.7 and twisted 14.0.0 on Redhat6.4.
> 
> So, anyone has hit this problem?

pyapns uses threads very heavily, and so my guess would be most likely that you're calling a Twisted API from a non-main thread.  Without seeing the code it's impossible to say.

There's some Twisted-based apache2-licensed APNS integration code available here: <https://trac.calendarserver.org/browser/CalendarServer/trunk/calendarserver/push/applepush.py>.  Unfortunately it is a little bound up with internal implementation details of calendar server, but it's almost generic and it might be worth the effort to extract, since it will almost certainly give you more robust behavior than integrating pyapns and Twisted.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141014/9c0e3595/attachment.html>

From glyph at twistedmatrix.com  Tue Oct 14 16:41:38 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 14 Oct 2014 15:41:38 -0700
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
In-Reply-To: <27709999.CuWcHncEeD@i5>
References: <27709999.CuWcHncEeD@i5>
Message-ID: <1A307A15-A9FB-4D2E-B270-921CFB132F7C@twistedmatrix.com>


On Oct 11, 2014, at 2:30 PM, Wolfgang Rohdewald <wolfgang.kde at rohdewald.de> wrote:

>   Can you please explain why remote_* is implemented differently?
>   This goes back to before the first import to svn, so I cannot 
>   browse the history.

I honestly have no idea.  If you think this is buggy and you'd like to change it, please feel free to propose a change which does so, as long as it's within the bounds of <https://twistedmatrix.com/trac/wiki/CompatibilityPolicy>.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141014/9561eb1c/attachment.html>

From glyph at twistedmatrix.com  Tue Oct 14 16:42:20 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 14 Oct 2014 15:42:20 -0700
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
In-Reply-To: <27709999.CuWcHncEeD@i5>
References: <27709999.CuWcHncEeD@i5>
Message-ID: <7AC4EFC1-DF03-48F3-BF3F-0377AC2D906D@twistedmatrix.com>


On Oct 11, 2014, at 2:30 PM, Wolfgang Rohdewald <wolfgang.kde at rohdewald.de> wrote:

> 3. They all raise AttributeError for undefined method except remote_*
>   which raises MethodNotFound. Both are not documented in the API.
>   Could this be unified to MethodNotFound?

Simply changing this is not OK, because code may be relying upon the existing behavior and we can't just break it.  Again, see <https://twistedmatrix.com/trac/wiki/CompatibilityPolicy>.

That said, we could expose a new public name (something other than Broker, for example) which fixes these bugs, then deprecate the existing name.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141014/b172e46e/attachment.html>

From nispray at gmail.com  Tue Oct 14 19:27:18 2014
From: nispray at gmail.com (Ni Wesley)
Date: Wed, 15 Oct 2014 09:27:18 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
Message-ID: <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>

Hi,
   The code is from our partner, so currently I won't change their code
until I address this issue.
The used pyapns code is here:  https://github.com/samuraisam/pyapns
And start twisted service by command :  twistd -r epoll web
--class=pyapns.server.APNSServer --port=7077

And start twisted service by command :  twistd -r epoll web
--class=pyapns.server.APNSServer --port=7077

And here is function of our code to do push action:
def __send_push(push_app_id, org_apns_cert, device_apns_token, payload):
    """
    This method will send the actual push to the device, it will first try
to send assuming we already have
    provisioned this org cert, if it fails if will provision, this way we
don't create too many connections
    """
    pyapns.configure({'HOST': MDM_PYAPNS_HOST})
    try:
        pyapns.notify(push_app_id, device_apns_token, payload)
    except UnknownAppID as e:
        # this is an expected exception where connection to this cert is
killed or we are sending this push
        # for the first time, in this case we need to provision first and
then try notify again
        current_app.logger.info(u"Couldn't find app_id for this push, retry
")
        try:
            pyapns.provision(push_app_id, org_apns_cert, 'production')
            pyapns.notify(push_app_id, device_apns_token, payload)
        except Exception as exc:
            current_app.logger.exception(exc)
    except Exception as exc:
        current_app.logger.exception(exc)

Could you please help have a look?

Thanks.
Wesley

2014-10-15 6:38 GMT+08:00 Glyph Lefkowitz <glyph at twistedmatrix.com>:

>
> On Oct 14, 2014, at 1:06 AM, Ni Wesley <nispray at gmail.com> wrote:
>
> Hi all,
>    I don't know if here is the right place.
> I hit a problem with pyapns which is based on twisted.
>
> So, I get code from our parter and setup up env involving interacting with
> APNS for IOS pushing work.
>
> I hit the problem that twisted hangs after a while's idle, I mean, when I
> start twisted with command:
> twistd -r epoll web --class=pyapns.server.APNSServer --port=7077
>
> Then, raise an notification to IOS device by pyapns(
> https://github.com/samuraisam/pyapns),it's OK.
>
> However, if I let the system alone for a while, then, new raised
> notifications are all failed, what's more, if now I kill twisted process,
> and restart with the above command again, push operations are successful
> again.
>
> I use python2.7 and twisted 14.0.0 on Redhat6.4.
>
> So, anyone has hit this problem?
>
>
> pyapns uses threads very heavily, and so my guess would be most likely
> that you're calling a Twisted API from a non-main thread.  Without seeing
> the code it's impossible to say.
>
> There's some Twisted-based apache2-licensed APNS integration code
> available here: <
> https://trac.calendarserver.org/browser/CalendarServer/trunk/calendarserver/push/applepush.py>.
> Unfortunately it is a little bound up with internal implementation details
> of calendar server, but it's *almost* generic and it might be worth the
> effort to extract, since it will almost certainly give you more robust
> behavior than integrating pyapns and Twisted.
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
??nispray??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141015/9da4b907/attachment-0001.html>

From glyph at twistedmatrix.com  Wed Oct 15 23:39:40 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 15 Oct 2014 22:39:40 -0700
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
 <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
Message-ID: <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>


> On Oct 14, 2014, at 6:27 PM, Ni Wesley <nispray at gmail.com> wrote:
> 
> Hi,
>    The code is from our partner, so currently I won't change their code until I address this issue.
> The used pyapns code is here:  https://github.com/samuraisam/pyapns <>
> And start twisted service by command : ?twistd -r epoll web --class=pyapns.server.APNSServer --port=7077 <>
> Could you please help have a look?

OK, you made me curious ;).

I looked through the code, and as it stands, I doubt my original hypothesis (a threading problem) is correct.  Threads are used only in the client talking to the pyapns server, not the pyapns server's client talking to APNS, so they're probably not interfering with it.

As far as I can tell, the ReconnectingClientFactory is set up properly.  Have you looked at the logs?  The one possibility I can think of just from examining the code is that the log messages before calling up to ReconnectingClientFactory.clientConnectionLost are raising an exception, causing the reconnection not to proceed.  That would most likely show a traceback in the logs, though.

<https://github.com/samuraisam/pyapns/blob/master/pyapns/server.py#L157-L164 <https://github.com/samuraisam/pyapns/blob/master/pyapns/server.py#L157-L164>>

Any clue?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141015/7c07ca90/attachment.html>

From nispray at gmail.com  Thu Oct 16 00:42:51 2014
From: nispray at gmail.com (Ni Wesley)
Date: Thu, 16 Oct 2014 14:42:51 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
 <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
 <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>
Message-ID: <CACL3mTB_TReNUQCQT=PK6-h1hUVH1+JEMHCMm-DtOxQPNVSiEQ@mail.gmail.com>

I got the point.
server.py:
def write(self, notifications):
    "Connect to the APNS service and send notifications"
    if True: #not self.factory:
      log.msg('APNSService write (connecting)')
      with open('/tmp/wniapns.log','a') as f:
          f.write("#"*20+"\n")
          f.write("apns server1\n")
          f.write("#"*20+"\n")
      server, port = ((APNS_SERVER_SANDBOX_HOSTNAME
                      if self.environment == 'sandbox'
                      else APNS_SERVER_HOSTNAME), APNS_SERVER_PORT)
      self.factory = self.clientProtocolFactory()
      context = self.getContextFactory()
      reactor.connectSSL(server, port, self.factory, context)

    client = self.factory.clientProtocol
   * if client:*
      with open('/tmp/wniapns.log','a') as f:
          f.write("#"*20+"\n")
          f.write("apns server2\n")
          f.write("#"*20+"\n")
      return client.sendMessage(notifications)
    else:
Problem is for twice push to one device, client is not None the second
time, code goes here and error then.

BTW, what I wanna ask is where is the default log file? I didn't see any
exception raised.

I haven't used pyapns and twisted before, I see twisted has lines like
log.msg("xx"), where is the default log file?

Thanks.
Wesley

2014-10-16 13:39 GMT+08:00 Glyph <glyph at twistedmatrix.com>:

>
> On Oct 14, 2014, at 6:27 PM, Ni Wesley <nispray at gmail.com> wrote:
>
> Hi,
>    The code is from our partner, so currently I won't change their code
> until I address this issue.
> The used pyapns code is here:  https://github.com/samuraisam/pyapns
> And start twisted service by command :  twistd -r epoll web
> --class=pyapns.server.APNSServer --port=7077
>
>
> Could you please help have a look?
>
>
> OK, you made me curious ;).
>
> I looked through the code, and as it stands, I doubt my original
> hypothesis (a threading problem) is correct.  Threads are used only in the
> client talking to the pyapns server, not the pyapns server's client talking
> to APNS, so they're probably not interfering with it.
>
> As far as I can tell, the ReconnectingClientFactory is set up properly.
> Have you looked at the logs?  The one possibility I can think of just from
> examining the code is that the log messages before calling up to
> ReconnectingClientFactory.clientConnectionLost are raising an exception,
> causing the reconnection not to proceed.  That would most likely show a
> traceback in the logs, though.
>
> <
> https://github.com/samuraisam/pyapns/blob/master/pyapns/server.py#L157-L164
> >
>
> Any clue?
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
??nispray??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141016/0d49ad2c/attachment.html>

From glyph at twistedmatrix.com  Thu Oct 16 01:52:03 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 16 Oct 2014 00:52:03 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
Message-ID: <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>




On Oct 10, 2014, at 7:22 PM, Glyph <glyph at twistedmatrix.com> wrote:

> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:
> 
>> Who is with me?!?!
> 
> So right now, it looks like the roster is:
> 
> me
> HawkOwl
> Chris Wolfe
> Paul Hummer
> Aaron Gallagher
> Jonathan Lange
> 
> This is awesome.  Thanks again to everyone for volunteering.  I am looking forward to a big leap forward in contributor responsiveness next week :-D.

We're about halfway through the week, so I thought it would be a good opportunity to check in.  Querying Kenaan's declarations from my IRC logs (because I'm lazy and didn't really want to dig into the highscores code to go to the real database), I see:

2014-10-13 11:57:44 hawkowl reviewed <https://tm.tl/#7000> - Fix pyflakes for web (assigned to adiroiban)
2014-10-13 12:29:44 hawkowl reviewed <https://tm.tl/#7229> - Add Travis CI configration file (assigned to hawkowl)
2014-10-13 13:41:58 hawkowl reviewed <https://tm.tl/#7083> - Update echoserv_ssl.py to use react (assigned to hawkowl)
2014-10-14 06:57:01 glyph reviewed <https://tm.tl/#6686> - twisted.web.client.readBody Deferred should be cancellable (assigned to mithrandi)
2014-10-14 07:45:23 glyph reviewed <https://tm.tl/#7015> - Fix iosim so that it only declares it implements ITLSTransport if pyOpenSSL is available (assigned to adiroiban)
2014-10-14 07:47:25 glyph reviewed <https://tm.tl/#7679> - __traceback__ for spread.pb.CopyableFailure received by a Python3 process (unassigned)
2014-10-14 07:54:16 glyph reviewed <https://tm.tl/#7626> - file is not defined in python 3.4 (assigned to wolfgang61)
2014-10-14 10:20:07 hawkowl reviewed <https://tm.tl/#7680> - Improve test stability of t.w.test.ContentDecoderAgentTests.test_existingHeaders (assigned to hawkowl)
2014-10-14 12:08:18 multani reviewed <https://tm.tl/#7007> - Fix pyflakes for twisted/test (unassigned)
2014-10-14 14:29:26 hynek reviewed <https://tm.tl/#7008> - Fix pyflakes for remaining core (assigned to adiroiban)
2014-10-14 14:58:46 hawkowl reviewed <https://tm.tl/#6395> - Deprecate twisted.words.protocols.msn (assigned to hawkowl)
2014-10-14 21:35:37 herrwolfe reviewed <https://tm.tl/#6686> - twisted.web.client.readBody Deferred should be cancellable (assigned to mithrandi)
2014-10-15 04:48:24 habnabit reviewed <https://tm.tl/#7252> - topy identifies many many typos in twisted (assigned to Alex)
2014-10-15 04:55:51 habnabit reviewed <https://tm.tl/#7252> - topy identifies many many typos in twisted (assigned to habnabit)
2014-10-15 05:23:28 habnabit reviewed <https://tm.tl/#4398> - PBServerFactory should support plain password credentials (assigned to spalax)
2014-10-15 07:34:52 glyph reviewed <https://tm.tl/#5704> - mkdir -p for FilePath (assigned to joelverhagen)
2014-10-15 08:23:33 glyph reviewed <https://tm.tl/#6951> - twisted.web.static.File should allow customizing the ForbiddenResource (assigned to adiroiban)
2014-10-16 06:56:34 glyph reviewed <https://tm.tl/#6686> - twisted.web.client.readBody Deferred should be cancellable (assigned to mithrandi)
2014-10-16 07:33:44 glyph reviewed <https://tm.tl/#7295> - howto: pb-usage does not adhere to style guide (assigned to danielsank)

This is a fairly strong showing - the queue is down to 44 now, down from 58 when this was announced, which is a significant dent - but it does look like we have a little catching up to do!  I would particularly like to nudge Paul and Jonathan to throw their respective hats into the ring, since it looks like we don't have any reviews from them in the official rally period just yet :-).  Sorry if I missed something because this may not be the most reliable data source!

Thanks everyone,

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141016/79791435/attachment-0001.html>

From jml at mumak.net  Thu Oct 16 02:01:52 2014
From: jml at mumak.net (Jonathan Lange)
Date: Thu, 16 Oct 2014 08:01:52 +0000
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
 <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>
Message-ID: <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>

Don't worry, I know I need to do reviews. Have just been running into
intermittent test failures and a local dev environment snafu.

On Thu Oct 16 2014 at 8:52:58 AM Glyph <glyph at twistedmatrix.com> wrote:

>
>
>
> On Oct 10, 2014, at 7:22 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>
> wrote:
>
> Who is with me?!?!
>
>
> So right now, it looks like the roster is:
>
>
>    - me
>    - HawkOwl
>    - Chris Wolfe
>    - Paul Hummer
>    - Aaron Gallagher
>    - Jonathan Lange
>
>
> This is awesome.  Thanks again to everyone for volunteering.  I am looking
> forward to a big leap forward in contributor responsiveness next week :-D.
>
>
> We're about halfway through the week, so I thought it would be a good
> opportunity to check in.  Querying Kenaan's declarations from my IRC logs
> (because I'm lazy and didn't really want to dig into the highscores code to
> go to the real database), I see:
>
> 2014-10-13 11:57:44 hawkowl reviewed <https://tm.tl/#7000> - Fix pyflakes
> for web (assigned to adiroiban)
> 2014-10-13 12:29:44 hawkowl reviewed <https://tm.tl/#7229> - Add Travis
> CI configration file (assigned to hawkowl)
> 2014-10-13 13:41:58 hawkowl reviewed <https://tm.tl/#7083> - Update
> echoserv_ssl.py to use react (assigned to hawkowl)
> 2014-10-14 06:57:01 glyph reviewed <https://tm.tl/#6686>
> - twisted.web.client.readBody Deferred should be cancellable (assigned to
> mithrandi)
> 2014-10-14 07:45:23 glyph reviewed <https://tm.tl/#7015> - Fix iosim so
> that it only declares it implements ITLSTransport if pyOpenSSL is available
> (assigned to adiroiban)
> 2014-10-14 07:47:25 glyph reviewed <https://tm.tl/#7679> - __traceback__
> for spread.pb.CopyableFailure received by a Python3 process (unassigned)
> 2014-10-14 07:54:16 glyph reviewed <https://tm.tl/#7626> - file is not
> defined in python 3.4 (assigned to wolfgang61)
> 2014-10-14 10:20:07 hawkowl reviewed <https://tm.tl/#7680> - Improve test
> stability of t.w.test.ContentDecoderAgentTests.test_existingHeaders
> (assigned to hawkowl)
> 2014-10-14 12:08:18 multani reviewed <https://tm.tl/#7007> - Fix pyflakes
> for twisted/test (unassigned)
> 2014-10-14 14:29:26 hynek reviewed <https://tm.tl/#7008> - Fix pyflakes
> for remaining core (assigned to adiroiban)
> 2014-10-14 14:58:46 hawkowl reviewed <https://tm.tl/#6395> -
> Deprecate twisted.words.protocols.msn (assigned to hawkowl)
> 2014-10-14 21:35:37 herrwolfe reviewed <https://tm.tl/#6686>
> - twisted.web.client.readBody Deferred should be cancellable (assigned to
> mithrandi)
> 2014-10-15 04:48:24 habnabit reviewed <https://tm.tl/#7252> - topy
> identifies many many typos in twisted (assigned to Alex)
> 2014-10-15 04:55:51 habnabit reviewed <https://tm.tl/#7252> - topy
> identifies many many typos in twisted (assigned to habnabit)
> 2014-10-15 05:23:28 habnabit reviewed <https://tm.tl/#4398> -
> PBServerFactory should support plain password credentials (assigned to
> spalax)
> 2014-10-15 07:34:52 glyph reviewed <https://tm.tl/#5704> - mkdir -p for
> FilePath (assigned to joelverhagen)
> 2014-10-15 08:23:33 glyph reviewed <https://tm.tl/#6951> -
> twisted.web.static.File should allow customizing the ForbiddenResource
> (assigned to adiroiban)
> 2014-10-16 06:56:34 glyph reviewed <https://tm.tl/#6686>
> - twisted.web.client.readBody Deferred should be cancellable (assigned to
> mithrandi)
> 2014-10-16 07:33:44 glyph reviewed <https://tm.tl/#7295> - howto:
> pb-usage does not adhere to style guide (assigned to danielsank)
>
> This is a fairly strong showing - the queue is down to 44 now, down from
> 58 when this was announced, which is a significant dent - but it does look
> like we have a little catching up to do!  I would particularly like to
> nudge Paul and Jonathan to throw their respective hats into the ring, since
> it looks like we don't have any reviews from them in the official rally
> period just yet :-).  Sorry if I missed something because this may not be
> the most reliable data source!
>
> Thanks everyone,
>
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141016/d5e71dd0/attachment.html>

From nhw at me.com  Thu Oct 16 07:05:09 2014
From: nhw at me.com (Nick Williams)
Date: Thu, 16 Oct 2014 18:35:09 +0530
Subject: [Twisted-Python] Spambayes problem with trac
Message-ID: <71AAF4AF-18BA-4913-9C7A-EF2574409609@me.com>

Is there a secret method to get trac to accept a new ticket? I can't get the spam recognition percentage below 85% for my bug report, which looks very much unlike any spam I've ever seen. 



From kevin.horn at gmail.com  Thu Oct 16 08:50:10 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 16 Oct 2014 09:50:10 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
 <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>
 <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>
Message-ID: <CA+U=zK0gq87d9i-VPxWEOxYzp1mEsbgWqDtEo_B+mxk8ou_3mQ@mail.gmail.com>

I'm afraid I'm slacking as well.  Worksplosion.

On Thu, Oct 16, 2014 at 3:01 AM, Jonathan Lange <jml at mumak.net> wrote:

> Don't worry, I know I need to do reviews. Have just been running into
> intermittent test failures and a local dev environment snafu.
>
> On Thu Oct 16 2014 at 8:52:58 AM Glyph <glyph at twistedmatrix.com> wrote:
>
>>
>>
>>
>> On Oct 10, 2014, at 7:22 PM, Glyph <glyph at twistedmatrix.com> wrote:
>>
>> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>
>> wrote:
>>
>> Who is with me?!?!
>>
>>
>> So right now, it looks like the roster is:
>>
>>
>>    - me
>>    - HawkOwl
>>    - Chris Wolfe
>>    - Paul Hummer
>>    - Aaron Gallagher
>>    - Jonathan Lange
>>
>>
>> This is awesome.  Thanks again to everyone for volunteering.  I am
>> looking forward to a big leap forward in contributor responsiveness next
>> week :-D.
>>
>>
>> We're about halfway through the week, so I thought it would be a good
>> opportunity to check in.  Querying Kenaan's declarations from my IRC logs
>> (because I'm lazy and didn't really want to dig into the highscores code to
>> go to the real database), I see:
>>
>> 2014-10-13 11:57:44 hawkowl reviewed <https://tm.tl/#7000> - Fix
>> pyflakes for web (assigned to adiroiban)
>> 2014-10-13 12:29:44 hawkowl reviewed <https://tm.tl/#7229> - Add Travis
>> CI configration file (assigned to hawkowl)
>> 2014-10-13 13:41:58 hawkowl reviewed <https://tm.tl/#7083> - Update
>> echoserv_ssl.py to use react (assigned to hawkowl)
>> 2014-10-14 06:57:01 glyph reviewed <https://tm.tl/#6686>
>> - twisted.web.client.readBody Deferred should be cancellable (assigned to
>> mithrandi)
>> 2014-10-14 07:45:23 glyph reviewed <https://tm.tl/#7015> - Fix iosim so
>> that it only declares it implements ITLSTransport if pyOpenSSL is available
>> (assigned to adiroiban)
>> 2014-10-14 07:47:25 glyph reviewed <https://tm.tl/#7679> - __traceback__
>> for spread.pb.CopyableFailure received by a Python3 process (unassigned)
>> 2014-10-14 07:54:16 glyph reviewed <https://tm.tl/#7626> - file is not
>> defined in python 3.4 (assigned to wolfgang61)
>> 2014-10-14 10:20:07 hawkowl reviewed <https://tm.tl/#7680> - Improve
>> test stability of t.w.test.ContentDecoderAgentTests.test_existingHeaders
>> (assigned to hawkowl)
>> 2014-10-14 12:08:18 multani reviewed <https://tm.tl/#7007> - Fix
>> pyflakes for twisted/test (unassigned)
>> 2014-10-14 14:29:26 hynek reviewed <https://tm.tl/#7008> - Fix pyflakes
>> for remaining core (assigned to adiroiban)
>> 2014-10-14 14:58:46 hawkowl reviewed <https://tm.tl/#6395> -
>> Deprecate twisted.words.protocols.msn (assigned to hawkowl)
>> 2014-10-14 21:35:37 herrwolfe reviewed <https://tm.tl/#6686>
>> - twisted.web.client.readBody Deferred should be cancellable (assigned to
>> mithrandi)
>> 2014-10-15 04:48:24 habnabit reviewed <https://tm.tl/#7252> - topy
>> identifies many many typos in twisted (assigned to Alex)
>> 2014-10-15 04:55:51 habnabit reviewed <https://tm.tl/#7252> - topy
>> identifies many many typos in twisted (assigned to habnabit)
>> 2014-10-15 05:23:28 habnabit reviewed <https://tm.tl/#4398> -
>> PBServerFactory should support plain password credentials (assigned to
>> spalax)
>> 2014-10-15 07:34:52 glyph reviewed <https://tm.tl/#5704> - mkdir -p for
>> FilePath (assigned to joelverhagen)
>> 2014-10-15 08:23:33 glyph reviewed <https://tm.tl/#6951> -
>> twisted.web.static.File should allow customizing the ForbiddenResource
>> (assigned to adiroiban)
>> 2014-10-16 06:56:34 glyph reviewed <https://tm.tl/#6686>
>> - twisted.web.client.readBody Deferred should be cancellable (assigned to
>> mithrandi)
>> 2014-10-16 07:33:44 glyph reviewed <https://tm.tl/#7295> - howto:
>> pb-usage does not adhere to style guide (assigned to danielsank)
>>
>> This is a fairly strong showing - the queue is down to 44 now, down from
>> 58 when this was announced, which is a significant dent - but it does look
>> like we have a little catching up to do!  I would particularly like to
>> nudge Paul and Jonathan to throw their respective hats into the ring, since
>> it looks like we don't have any reviews from them in the official rally
>> period just yet :-).  Sorry if I missed something because this may not be
>> the most reliable data source!
>>
>> Thanks everyone,
>>
>> -glyph
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141016/e71dedd8/attachment-0001.html>

From glyph at twistedmatrix.com  Thu Oct 16 16:11:58 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 16 Oct 2014 15:11:58 -0700
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTB_TReNUQCQT=PK6-h1hUVH1+JEMHCMm-DtOxQPNVSiEQ@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
 <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
 <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>
 <CACL3mTB_TReNUQCQT=PK6-h1hUVH1+JEMHCMm-DtOxQPNVSiEQ@mail.gmail.com>
Message-ID: <D685CD30-81D1-4A27-82EF-2541E7457330@twistedmatrix.com>


> On Oct 15, 2014, at 11:42 PM, Ni Wesley <nispray at gmail.com> wrote:
> 
> Problem is for twice push to one device, client is not None the second time, code goes here and error then.

Great, glad you could figure it out.

> BTW, what I wanna ask is where is the default log file? I didn't see any exception raised.

With the command line you mentioned previously, it should be in a file called "twistd.log".

-glyph



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141016/13ae6abf/attachment.html>

From Axel.Rau at Chaos1.DE  Fri Oct 17 02:50:34 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Fri, 17 Oct 2014 10:50:34 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <0E8CD855-9E6A-4E7B-87EC-7D7A0BB6AFAF@Chaos1.DE>
References: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
 <20141014122219.5924.1425058572.divmod.xquotient.1@top>
 <0E8CD855-9E6A-4E7B-87EC-7D7A0BB6AFAF@Chaos1.DE>
Message-ID: <3F275303-4137-43AA-B77D-03D99F7C093B@Chaos1.DE>


Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:

>> We might need more to go on.  Do you have a complete, minimal example? (See http://sscce.org/)
> The attached zip archive  
Did someone could spend the time to look at it?
Is my goal utopian?

Axel
---
PGP-Key:29E99DD6  ? +49 151 2300 9283  ? computing @ chaos claudius



From trac at twistedmatrix.com  Sun Oct 19 00:05:17 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 19 Oct 2014 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1413698717.02.8405048443288825391@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141019/e50b69b7/attachment.html>

From jml at mumak.net  Sun Oct 19 05:24:05 2014
From: jml at mumak.net (Jonathan Lange)
Date: Sun, 19 Oct 2014 11:24:05 +0000
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
 <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>
 <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>
Message-ID: <CAHZ8tnZfRqJQc+ggnQ8KsnQndK2qnRWwXBWAxAwTT76Wv7Cq2A@mail.gmail.com>

On Thu Oct 16 2014 at 9:01:52 AM Jonathan Lange <jml at mumak.net> wrote:

> Don't worry, I know I need to do reviews. Have just been running into
> intermittent test failures and a local dev environment snafu.


Well, I haven't done as many as I would have liked to have done, but I've
done some.

I hope this helps. May your sprint be of great success.

jml
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141019/4a22f770/attachment.html>

From exarkun at twistedmatrix.com  Sun Oct 19 14:44:19 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 19 Oct 2014 20:44:19 -0000
Subject: [Twisted-Python] Serializing cftp and ssh sessions
Message-ID: <20141019204419.5924.649190178.divmod.xquotient.7@top>

On 17 Oct, 08:50 am, axel.rau at chaos1.de wrote:
>
>Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:
>>>We might need more to go on.  Do you have a complete, minimal 
>>>example? (See http://sscce.org/)
>>The attached zip archive
>Did someone could spend the time to look at it?
>Is my goal utopian?

I can't tell if this represents a bug in Twisted or not.  After a quick 
look through the code, I'm not really clear on why the program would 
ever exit (I didn't find the calls to `reactor.stop`, I guess they're 
hidden somewhere in conch "library" code), nor quite which code paths 
you expect to work and which you expect to fail.


What is the expected behavior if I run test.py after editing it to point 
at a host I have access to?

Is that the desired behavior?

If there is a second case, what one edit can I make to observe that 
behavior?  How does the behavior differ from what you're trying to 
achieve?

Separately:

  * You should rewrite this code to not use twisted.conch.client.connect. 
That's some random library code no one ever expected application code to 
use.  It's public, so you can use it if you want, but that's no promise 
it's any good.

  * Use twisted.conch.endpoints.SSHCommandClientEndpoint to perform 
`exec` requests

  * Consider pitching in to complete 
https://twistedmatrix.com/trac/ticket/6617 so you can use the new 
`SSHSubsystemClientEndpoint` API that ticket introduces to set up your 
SFTP connections.

Jean-Paul


From aftnix at gmail.com  Mon Oct 20 05:55:03 2014
From: aftnix at gmail.com (aft)
Date: Mon, 20 Oct 2014 17:55:03 +0600
Subject: [Twisted-Python] Mysql and adbapi
Message-ID: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>

Hi,

I'm trying to run the following program :

from twisted.enterprise import adbapi

dbpool = adbapi.ConnectionPool("MySQLdb", "khalid_sultaln", "root", "mysql")

def xmlValues() :
    return dbpool.runQuery("SELECt * from xml_vaules limit 1")

def printResult(l):
    print type(l)
    print l[0][0]



xmlValues().addCallback(printResult)


But its not printing anything. What exactly i'm doing wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141020/4684ec1a/attachment.html>

From hawkowl at atleastfornow.net  Mon Oct 20 06:02:13 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Mon, 20 Oct 2014 20:02:13 +0800
Subject: [Twisted-Python] Mysql and adbapi
In-Reply-To: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>
References: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>
Message-ID: <936822E2-6865-4BAF-9308-2D8618CCEBEE@atleastfornow.net>


On 20 Oct 2014, at 19:55, aft <aftnix at gmail.com> wrote:
> 
> But its not printing anything. What exactly i'm doing wrong?

Hi,

You haven?t started the reactor, so nothing has ?started?. It?s just sitting there, waiting for it to be ?spun off?.

http://twistedmatrix.com/documents/current/_downloads/echoclient_ssl.py

Try using react, as detailed in this example ? you should put your code in a similar main() block.

-hawkie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141020/39c231ef/attachment.pgp>

From aftnix at gmail.com  Mon Oct 20 06:58:29 2014
From: aftnix at gmail.com (aft)
Date: Mon, 20 Oct 2014 18:58:29 +0600
Subject: [Twisted-Python] Mysql and adbapi
In-Reply-To: <936822E2-6865-4BAF-9308-2D8618CCEBEE@atleastfornow.net>
References: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>
 <936822E2-6865-4BAF-9308-2D8618CCEBEE@atleastfornow.net>
Message-ID: <CAGuaRCvWk9y+fkhHZb0CZX692Ji3KH-eesQfFbzd4MoWu5uAgg@mail.gmail.com>

On Mon, Oct 20, 2014 at 6:02 PM, HawkOwl <hawkowl at atleastfornow.net> wrote:

>
> On 20 Oct 2014, at 19:55, aft <aftnix at gmail.com> wrote:
> >
> > But its not printing anything. What exactly i'm doing wrong?
>
> Hi,
>
> You haven?t started the reactor, so nothing has ?started?. It?s just
> sitting there, waiting for it to be ?spun off?.
>
> http://twistedmatrix.com/documents/current/_downloads/echoclient_ssl.py
>
> Try using react, as detailed in this example ? you should put your code in
> a similar main() block.
>

I see. I should have understood it. Thanks for the reply.

Arif

>
> -hawkie
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141020/eca46c5d/attachment.html>

From Axel.Rau at Chaos1.DE  Mon Oct 20 08:05:20 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Mon, 20 Oct 2014 16:05:20 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <20141019204419.5924.649190178.divmod.xquotient.7@top>
References: <20141019204419.5924.649190178.divmod.xquotient.7@top>
Message-ID: <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>


Am 19.10.2014 um 22:44 schrieb exarkun at twistedmatrix.com:

> On 17 Oct, 08:50 am, axel.rau at chaos1.de wrote:
>> 
>> Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:
>>>> We might need more to go on.  Do you have a complete, minimal example? (See http://sscce.org/)
>>> The attached zip archive
>> Did someone could spend the time to look at it?
>> Is my goal utopian?
> 
> I can't tell if this represents a bug in Twisted or not.  After a quick look through the code, I?m not really clear on why the program would ever exit (I didn?t find the calls to `reactor.stop`, I guess they?re hidden somewhere in conch ?library? code),
I must prevent this stopping of the reactor, because I?m unable to start it again.
I?m always getting twisted.internet.error.ReactorNotRestartable after trying it while reactor.running is False.

>  nor quite which code paths you expect to work and which you expect to fail.
> 
> 
> What is the expected behavior if I run test.py after editing it to point at a host I have access to?
If you put a reactor.stop() at the end of ssh._ebExit, test.py should run to completion after doing the remote file operations and executing the remote commands.
> 
> Is that the desired behavior?
No.
I need a solution where the call to executeRemoteCommands() is delayed until all remote file operations are complete. Similar the next call to distributeFiles (with a different host) must wait until the previous call to executeRemoteCommands has no outstanding operations.

> 
> If there is a second case, what one edit can I make to observe that behavior?
No.
>  How does the behavior differ from what you?re trying to achieve?
See above. I must synchronize operations at 2 points in a loop.
I tried to do this with callbacks, called at connection shutdown.
What do you think about this?
> 
> Separately:
> 
> * You should rewrite this code to not use twisted.conch.client.connect. That's some random library code no one ever expected application code to use.  It's public, so you can use it if you want, but that's no promise it's any good.
> 
> * Use twisted.conch.endpoints.SSHCommandClientEndpoint to perform `exec` requests
> 
> * Consider pitching in to complete https://twistedmatrix.com/trac/ticket/6617 so you can use the new `SSHSubsystemClientEndpoint` API that ticket introduces to set up your SFTP connections.
I looked at endpoints before, but failed to implement public key authentication and a callback when complete.

Thanks for looking into this,
Axel
??-
PGP-Key:29E99DD6  ? +49 151 2300 9283  ? computing @ chaos claudius



From exarkun at twistedmatrix.com  Mon Oct 20 08:28:12 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 20 Oct 2014 14:28:12 -0000
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>
References: <20141019204419.5924.649190178.divmod.xquotient.7@top>
 <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>
Message-ID: <20141020142812.5924.2109308014.divmod.xquotient.9@top>

On 02:05 pm, axel.rau at chaos1.de wrote:
>
>Am 19.10.2014 um 22:44 schrieb exarkun at twistedmatrix.com:
>>On 17 Oct, 08:50 am, axel.rau at chaos1.de wrote:
>>>
>>>Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:
>>>>>We might need more to go on.  Do you have a complete, minimal 
>>>>>example? (See http://sscce.org/)
>>>>The attached zip archive
>>>Did someone could spend the time to look at it?
>>>Is my goal utopian?
>>
>>I can't tell if this represents a bug in Twisted or not.  After a 
>>quick look through the code, I?m not really clear on why the program 
>>would ever exit (I didn?t find the calls to `reactor.stop`, I guess 
>>they?re hidden somewhere in conch ?library? code),
>I must prevent this stopping of the reactor, because I?m unable to 
>start it again.
>I?m always getting twisted.internet.error.ReactorNotRestartable after 
>trying it while reactor.running is False.

Okay.  I guess I misunderstood part of the problem statement.  I thought 
you wanted it to stop at some point.
>>  nor quite which code paths you expect to work and which you expect to 
>>fail.
>>
>>
>>What is the expected behavior if I run test.py after editing it to 
>>point at a host I have access to?
>If you put a reactor.stop() at the end of ssh._ebExit, test.py should 
>run to completion after doing the remote file operations and executing 
>the remote commands.
>>
>>Is that the desired behavior?
>No.
>I need a solution where the call to executeRemoteCommands() is delayed 
>until all remote file operations are complete. Similar the next call to 
>distributeFiles (with a different host) must wait until the previous 
>call to executeRemoteCommands has no outstanding operations.
>>
>>If there is a second case, what one edit can I make to observe that 
>>behavior?
>No.
>>  How does the behavior differ from what you?re trying to achieve?
>See above. I must synchronize operations at 2 points in a loop.
>I tried to do this with callbacks, called at connection shutdown.
>What do you think about this?

That sounds like the correct solution to me.  The simplest way to 
structure your code is to make the APIs for starting these two 
operations return a Deferred that fires when the operation is complete. 
Then you can use these Deferreds to construct the desired control flow 
for starting the operations.
>>
>>Separately:
>>
>>* You should rewrite this code to not use 
>>twisted.conch.client.connect. That's some random library code no one 
>>ever expected application code to use.  It's public, so you can use it 
>>if you want, but that's no promise it's any good.
>>
>>* Use twisted.conch.endpoints.SSHCommandClientEndpoint to perform 
>>`exec` requests
>>
>>* Consider pitching in to complete 
>>https://twistedmatrix.com/trac/ticket/6617 so you can use the new 
>>`SSHSubsystemClientEndpoint` API that ticket introduces to set up your 
>>SFTP connections.
>I looked at endpoints before, but failed to implement public key 
>authentication and a callback when complete.

You should be able to do key-based authentication with the endpoint. 
SSHCommandClientEndpoint.newConnection accepts a `keys` argument if you 
want to specify the keys to use explicitly.  It also accepts an 
`agentEndpoint` argument if you instead want to point it at an SSH key 
agent which will perform key operations for it.

Jean-Paul


From Axel.Rau at Chaos1.DE  Wed Oct 22 03:59:49 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Wed, 22 Oct 2014 11:59:49 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <20141020142812.5924.2109308014.divmod.xquotient.9@top>
References: <20141019204419.5924.649190178.divmod.xquotient.7@top>
 <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>
 <20141020142812.5924.2109308014.divmod.xquotient.9@top>
Message-ID: <A3A22E83-9A77-4489-A7DB-499320071C5B@Chaos1.DE>


Am 20.10.2014 um 16:28 schrieb exarkun at twistedmatrix.com:

>> See above. I must synchronize operations at 2 points in a loop.
>> I tried to do this with callbacks, called at connection shutdown.
>> What do you think about this?
> 
> That sounds like the correct solution to me.  The simplest way to structure your code is to make the APIs for starting these two operations return a Deferred that fires when the operation is complete. Then you can use these Deferreds to construct the desired control flow for starting the operations.
> 
I have implemented this in a prototype, which does what I want, simply by calling the next top level operation when one has completed.
Your suggestion would require to handle the Deferred down to the point of connection termination.

Thanks for your support,
Axel
---
PGP-Key:29E99DD6  ? +49 151 2300 9283  ? computing @ chaos claudius



From topjetboy at yahoo.com  Thu Oct 23 07:04:47 2014
From: topjetboy at yahoo.com (topjetboy)
Date: Thu, 23 Oct 2014 06:04:47 -0700
Subject: [Twisted-Python] adding twisted to anaconda
Message-ID: <1414069487.4691.YahooMailNeo@web122406.mail.ne1.yahoo.com>

Anaconda is a python distribution with many modules already installed. The whole distro installs to a separate root folder named 'anaconda'. How do i install twisted to this? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141023/ca54f1a3/attachment.html>

From itamar at itamarst.org  Thu Oct 23 07:40:35 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 23 Oct 2014 09:40:35 -0400
Subject: [Twisted-Python] Announcing Eliot 0.5.0: Structured Logging as
	Storytelling
Message-ID: <2e29454d10d1a02cf4f7e55d38703713@itamarst.org>

 

Eliot provides a structured logging and tracing system for Python that
generates log messages describing a forest of nested actions. Actions
start and eventually finish, successfully or not. Log messages thus tell
a story: what happened and what caused it. 

Eliot has first class support for Twisted, including integration with
Trial. 

Eliot is released by ClusterHQ [2], the Data People for Docker(tm), and
is available at https://pypi.python.org/pypi/eliot [3]. Documentation is
available at https://eliot.readthedocs.org [4]. 

Here's what your logs might look like before using Eliot: 

Going to validate http://example.com/index.html [1].
Started download attempted.
Download succeeded!
Missing <title> element in "/html/body".
Bad HTML entity in "/html/body/p[2]".
2 validation errors found!

After switching to Eliot you'll get a tree of messages with both message
contents and causal relationships encoded in a structured format: 

	* {"action_type": "validate_page", "action_status": "started", "url":
"http://example.com/index.html [1]"} 

 	* {"action_type": "download", "action_status": "started"}
 	* {"action_type": "download", "action_status": "succeeded"}

	* {"action_type": "validate_html", "action_status": "started"} 

 	* {"message_type": "validation_error", "error_type": "missing_title",
"xpath": "/html/head"}
 	* {"message_type": "validation_error", "error_type": "bad_entity",
"xpath": "/html/body/p[2]"}

 	* {"action_type": "validate_html", "action_status": "failed",
"exception": "validator.ValidationFailed"}

 	* {"action_type": "validate_page", "action_status": "failed",
"exception": "validator.ValidationFailed"}

What's New in 0.5.0: 

 	* Added support for Python 3.4.
 	* Most public methods and functions now have underscore-based
equivalents to the camel case versions, e.g. eliot.write_traceback and
eliot.writeTraceback, for use in PEP 8 styled programs. Twisted-facing
APIs and pyunit assertions do not provide these additional APIs, as
camel-case is the native idiom.
 	* eliot.to_file outputs log messages to a file.
 	* Documented how to load Eliot logging into ElasticSearch via
Logstash.
 	* Documentation has been significantly reorganized.

 

Links:
------
[1] http://example.com/index.html
[2] https://docs.clusterhq.com
[3] https://pypi.python.org/pypi/eliot
[4] https://eliot.readthedocs.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141023/47ad2947/attachment.html>

From topjetboy at yahoo.com  Thu Oct 23 11:58:08 2014
From: topjetboy at yahoo.com (Topjetboy@Y)
Date: Thu, 23 Oct 2014 13:58:08 -0400
Subject: [Twisted-Python] Installing into anaconda
Message-ID: <857955F7-0B41-4DB1-BA4B-23EA96E4A831@yahoo.com>

Anaconda is a python distro. It comes in many flavors depending on the desired interpreter (2.7, 3.4, etc) how does one select and install the correct version of twisted?

From trac at twistedmatrix.com  Sun Oct 26 00:05:17 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 26 Oct 2014 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1414303517.52.8997344419816263682@twistedmatrix.com

An HTML attachment was scrubbed...
URL: <http://twistedmatrix.com/pipermail/twisted-python/attachments/20141026/5f0440f9/attachment.html>

From glyph at twistedmatrix.com  Wed Oct  1 23:17:18 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 1 Oct 2014 22:17:18 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
In-Reply-To: <CABZk45z2skB=z-ztnNsLx1Q9gkWVNSZEZV7Qubpxmxwn=-DhGg@mail.gmail.com>
References: <8E367ECE-C3E2-4CEC-A5B6-5419B603D453@twistedmatrix.com>
 <CABZk45xUQwZp4d1t87zOB=WzZ1_EWrz_tOyNGK0FZZpSsoLhdA@mail.gmail.com>
 <DC21EE49-2253-46C8-882A-A06E6EA2619D@twistedmatrix.com>
 <CABZk45z2skB=z-ztnNsLx1Q9gkWVNSZEZV7Qubpxmxwn=-DhGg@mail.gmail.com>
Message-ID: <32379ECF-3D82-4773-A3FA-BEB43FCD6FD1@twistedmatrix.com>


On Sep 30, 2014, at 10:12 PM, Joshua Bartlett <josh at bartletts.id.au> wrote:

> On 1 October 2014 14:09, Glyph <glyph at twistedmatrix.com> wrote:
> 
> That said: why did you need a threadpool of daemon threads?
> 
> That's a very good question. One of my comaintainers thinks the answer is, "My codebase is old enough to vote and to answer your question I'd probably have to turn our SVN server back on. Please don't make me." :-)
> 
> I think the real reason is that the third-party library that we're calling from the threads sometimes takes a really long time to return, which means that unless we use daemon threads the only timely way to shut down / restart the service is kill -9, which is not ideal.

Aah.  That's a very good reason, come to think of it.  Maybe we should default to daemon threads at some point in the future, for that matter; it would make exiting easier, by allowing us to still join() all the threads, but still exit if attempting to do so times out.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141001/d3b7777f/attachment-0002.html>

From orbitus at orbitusrobotics.com  Thu Oct  2 20:55:24 2014
From: orbitus at orbitusrobotics.com (Orbitus)
Date: Thu, 2 Oct 2014 21:55:24 -0500
Subject: [Twisted-Python] 'module' object has no attribute
	'optionsForClientTLS'
Message-ID: <9C0BC677-30D1-4F00-8B74-4DC225F098E2@orbitusrobotics.com>

I am trying to execute the check_server_certificate.py and I am getting this error can you guys help me figure out whats going on? its the exact sample code on the website running on Ubuntu 14.04.


Here is the error output:

Traceback (most recent call last):
  File "check_server_certificate.py", line 28, in <module>
    task.react(main, sys.argv[1:])
  File "/usr/lib/python2.7/dist-packages/twisted/internet/task.py", line 867, in react
    finished = main(_reactor, *argv)
  File "check_server_certificate.py", line 6, in main
    options = ssl.optionsForClientTLS(hostname=host.decode('utf-8'))
AttributeError: 'module' object has no attribute 'optionsForClientTLS'


Here is the code (check_server_certificate.py):


from __future__ import print_function
import sys
from twisted.internet import defer, endpoints, protocol, ssl, task, error

def main(reactor, host, port=443):
    options = ssl.optionsForClientTLS(hostname=host.decode('utf-8'))
    port = int(port)

    class ShowCertificate(protocol.Protocol):
        def connectionMade(self):
            self.transport.write(b"GET / HTTP/1.0\r\n\r\n")
            self.done = defer.Deferred()
        def dataReceived(self, data):
            certificate = ssl.Certificate(self.transport.getPeerCertificate())
            print("OK:", certificate)
            self.transport.abortConnection()
        def connectionLost(self, reason):
            print("Lost.")
            if not reason.check(error.ConnectionClosed):
                print("BAD:", reason.value)
            self.done.callback(None)

    return endpoints.connectProtocol(
        endpoints.SSL4ClientEndpoint(reactor, host, port, options),
        ShowCertificate()
    ).addCallback(lambda protocol: protocol.done)

task.react(main, sys.argv[1:])



Rudy Aramayo | Developer | OrbitusRobotics LLC
Direct: 626.386.8329 | Email: orbitus at orbitusrobotics.com | Web: www.orbitusrobotics.com

           

"This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to which they are addressed. If you have received this email in error please notify me (orbitus at orbitusrobotics.com). If you are not the named addressee you should not disseminate, distribute or copy this e-mail and should delete this e-mail from your system. If you are not the intended recipient you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OrbitusRobotics_white-logo.png
Type: image/png
Size: 16993 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 2323 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0008.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 2617 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0009.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 2536 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0010.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.jpg
Type: image/jpeg
Size: 1917 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment-0011.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20141002/1864a75c/attachment.sig>

From hs at ox.cx  Fri Oct  3 00:28:19 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Fri, 3 Oct 2014 08:28:19 +0200
Subject: [Twisted-Python] 'module' object has no attribute
	'optionsForClientTLS'
In-Reply-To: <9C0BC677-30D1-4F00-8B74-4DC225F098E2@orbitusrobotics.com>
References: <9C0BC677-30D1-4F00-8B74-4DC225F098E2@orbitusrobotics.com>
Message-ID: <A1F952B9-173F-4038-AF81-E2D753990974@ox.cx>


> I am trying to execute the check_server_certificate.py and I am getting this error can you guys help me figure out whats going on? its the exact sample code on the website running on Ubuntu 14.04.

Trusty is shipping Twisted 13.2 which doesn't have vital TLS improvements that arrived with 14.0 and that are used in said example.

I strongly recommend against using Twisted older than 14.0 for code involving TLS.  Please use the version from PyPI (14.0.2).


From wolfgang.kde at rohdewald.de  Fri Oct  3 17:09:40 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sat, 04 Oct 2014 01:09:40 +0200
Subject: [Twisted-Python] porting twisted.spread to Python3
Message-ID: <4121201.VS1rzsEyV3@i5>

I now have a local git branch with about 70 commits, always 
rebased onto current trunk.

Those test suites pass with Python2 and Python3:

test_banana, test_jelly, test_pb, test_pbfailure, test_persisted

I also have a real app using PB (kajongg, a KDE game). Running
the server and the client with any combination of Python 2 and
Python 3 works but more testing is needed there. Especially
transferring failures with non-ascii test, so I need to inject
random errors.

spread.banana is now fully covered by tests (was at 85% before).
There is still a lot of code in twisted.spread which has no
tests yet.
I do not think I want to add missing tests for everything,
only for those regions where I do changes or where it is not
too difficult. And of course if an application triggers a bug
yet uncovered by tests.

Can you point me to other PB applications I could use for testing?
Preferrably ones that are already mostly compatible with PY3
themselves, but that is not a _must_, I would try porting them
unless it turns out to be too much work. And preferrably ones
developed by people with a non-ascii native language. I do not
yet trust Failures and logging with non-ascii.


Below is the current list of commits. Everything you see
there is still much in flux. This includes shuffling code
between commits, combining and splitting commits, changing order.
I want to open one ticket per commit. Simple things hopefully 
not needing much discussion first.

Estimating one week per review/commit to trunk, this process 
will take more than one year. Often I can only add a new ticket
after the previous one has been integrated because they 
depend on each other.

So if it really seems to take that long, at some point I might
just decide to put what I have to github and not care anymore.
Which of course means I might have to distribute a patched
twisted version with my application. I really want to leave
Python2 behind, and only twisted is in the way. Latest versions
of KDE do not have Python2 bindings anymore (KDE Frameworks 5).

This log of course includes things being in tickets up for review.

git log --pretty='format:%s' --reverse trunk..pb3
spread.banana: selecting an unsupported dialect now raises an Exception
spread.banana now raises BananaError when receiving pb messages without pb being the selected dialect
spread.banana: specific error message about unicode objects
spread.banana: test coverage goes up from 85% to 100%
test.test_banana: eliminate duplicate code
twisted.python.reflect.safe_str on Python 3 converts utf-8 encoded bytes to clean str instead of "b'a'"
test.test_{failure,banana,persisted,reflect}: consistently name all test methods test_*
test.test_jelly: add tests for yet untested code
spread.jelly: support the sets module only for Python 2
twisted.spread: Assume that Python always has unicode support enabled
Ticket 7653. spread.jelly: deprecate unjellying instances
spread.jelly can now transfer objects with new style classes
cred.credentials: implements->implementer
cred.checkers: implements->implementer
test.test_pb: implements->implementer
persisted.styles: add new tests
persisted.styles.unpickleMethod: remove dead code
spread.flavors: fix import paths, making them work with Python 3 too
spread: Python 3: add from __future__
do not use argument tuple unpacking anymore, not available in Python 3
spread.publish and test.test_pb: replace file by open
test.test_pb: use a constant for "BRAINS!"
python.compat: get_im_func, get_im_self, get_im_class and use them in spread
persisted.styles: simplify unpickleMethod
persisted.styles: Port to Python 3
python.compat: for PY3, define long=int and xrange=range
spread.banana: replace StringIO.StringIO by io.BytesIO
python.compat.networkChar: New, and use it in spread.banana
python.compat.networkString: improve Exception message
spread.banana: change literals from "" to b"" where appropriate
test.test_banana: fix a wrong assertion message
test.test_banana: use itertools.chain
test.test_banana: Python 3 does not know type long
spread: Python 3 does not have sys.maxint
spread.banana and test: Complete port to Python 3: handling of data
spread.jelly: Unjellying instance is not supported with Python 3
spread.jelly: unify usage of the types module
spread.jelly: consistently use _atom identifiers
spread.jelly: complete port to Python 3
spread.pb, test.test_pbfailure: new syntax for except
spread.pb: do not use argument tuple unpacking anymore, not available in Python 3
test.test_jelly now passes all tests with Python 3
cred.credentials.updateHash accepts unicode
add ported modules to python/dist3.py
spread.flavors: consistently use _atom identifiers
spread.flavors: Python 3: eliminate __cmp__. Only support __eq__ and __ne__
spread: Use networkString/nativeString where appropriate
spread.flavors: switch atoms from str to b""
test.test_pb: improve test_concurrentLogin: use a non-ascii password
spread.pb: eliminate __cmp__, using FancyEqMixin
test.test_pb: add comment to test_tooManyRefs: too slow
spread.pb: introduce *_atom constants
spread.pb: Python 3: use list() around some generators
spread.pb.Broker: improve Exception message
spread.pb and test: Python 3: xrange = range
spread.pb and test: Python 3: use byte literals
spread.pb: failure2Copyable: use _newInstance from jelly
spread.pb: replace types.ListType with list
spread.pb and test: use networkChar where appropriate
test.test_pb: change from StringIO to io.BytesIO
spread.pb: Python 3: make *_atom bytes
python.logger.formatWithCall: support non-ascii strings. Why exactly does kajongg need this?
python.compat: networkIdentifier, nativeIdentifier. Not yet used. SQUASH
spread.pb: CopiedFailure now handles non-ascii strings. TEST MISSING
spread.flavors: RemoteCopy supports non-ascii identifiers. TEST MISSING. Why does kajongg need this?
python.reflect: _safeFormat must handle unicode
python.util: new debug function stack(). REMOVE AGAIN
python.compat: nativeIdentifier accepts non-unicode. NEEDED WHY? TEST CASE MISSING
test.test_{banana,jelly,pb,pbfailure,persisted}: from __future__
test.test_pbfailure: make literal strings bytes
test.test_pbfailure: replace StringIO with io.BytesIO
spread.flavors: translate keys of received dict into nativeString. INCOMPLETE


-- 

Wolfgang



From trac at twistedmatrix.com  Sun Oct  5 00:05:15 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 05 Oct 2014 06:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1412489115.51.8991047638926914038@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141005/d3690f25/attachment-0002.html>

From wolfgang.kde at rohdewald.de  Sun Oct  5 03:59:40 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 11:59:40 +0200
Subject: [Twisted-Python] my branches merged by you (itamar)
Message-ID: <2059527.qlDuKEiMrr@i5>

Thanks for fixing my mistakes!

Based on your fixes I started a personal checklist, see below.
Is that list correct so far? (it will not include things I already
did right)

I noticed that you also changed 'x' to b'x' in some places. I did
not do that yet because it is not needed for those tickets, I wanted
to keep them small and focussed.

Instead I am planning tickets for just that: (after minimizing the
number of places to be fixed)
twisted.spread.banana and tests: literal strings become bytes where appropriate
twisted.spread.jelly and tests: define *_atom consistently for all atoms, change them to bytes
twisted.spread.pb and tests: literal strings become bytes where appropriate

The current checklist:

Line length max. 79
*.rst doc: One line per sentence, no length limit
fully qualified names in doc and news, twisted.*
no __ in Twisted. Everything in a test case is private anyway.
if possible __execute__ (not __define__) only one assert per test
document changed API like raising more or different exceptions
use new print() formatting syntax
Document and isolate test code using the private API of the module to be tested.
test everything with PY2.6 too
did twistedchecker add new warnings?
news: most frequent form: Qualified now does ...
news about spread belong into twisted/topfiles
doc: not pb but PB
Epydoc
docstring ends with point
break docstring lines not sooner than needed
avoid the word test in test docstrings
do not use the I am form in docstrings
test docstring: describe what happens, including exceptions
doc: avoid mentioning the private API

-- 
Wolfgang



From wolfgang.kde at rohdewald.de  Sun Oct  5 06:00:52 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 14:00:52 +0200
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <2059527.qlDuKEiMrr@i5>
References: <2059527.qlDuKEiMrr@i5>
Message-ID: <3508470.GpgFgNaMdt@i5>

That should have been exarkun, not itamar. Sorry for that.

Am Sonntag, 5. Oktober 2014, 11:59:40 schrieb Wolfgang Rohdewald:
> Thanks for fixing my mistakes!
> 
> Based on your fixes I started a personal checklist, see below.
> Is that list correct so far? (it will not include things I already
> did right)
> 
> I noticed that you also changed 'x' to b'x' in some places. I did
> not do that yet because it is not needed for those tickets, I wanted
> to keep them small and focussed.
> 
> Instead I am planning tickets for just that: (after minimizing the
> number of places to be fixed)
> twisted.spread.banana and tests: literal strings become bytes where appropriate
> twisted.spread.jelly and tests: define *_atom consistently for all atoms, change them to bytes
> twisted.spread.pb and tests: literal strings become bytes where appropriate
> 
> The current checklist:
> 
> Line length max. 79
> *.rst doc: One line per sentence, no length limit
> fully qualified names in doc and news, twisted.*
> no __ in Twisted. Everything in a test case is private anyway.
> if possible __execute__ (not __define__) only one assert per test
> document changed API like raising more or different exceptions
> use new print() formatting syntax
> Document and isolate test code using the private API of the module to be tested.
> test everything with PY2.6 too
> did twistedchecker add new warnings?
> news: most frequent form: Qualified now does ...
> news about spread belong into twisted/topfiles
> doc: not pb but PB
> Epydoc
> docstring ends with point
> break docstring lines not sooner than needed
> avoid the word test in test docstrings
> do not use the I am form in docstrings
> test docstring: describe what happens, including exceptions
> doc: avoid mentioning the private API
> 
> 

-- 
Wolfgang



From exarkun at twistedmatrix.com  Sun Oct  5 07:48:12 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 13:48:12 -0000
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <4121201.VS1rzsEyV3@i5>
References: <4121201.VS1rzsEyV3@i5>
Message-ID: <20141005134812.17800.1576310986.divmod.xquotient.1112@top>

On 3 Oct, 11:09 pm, wolfgang.kde at rohdewald.de wrote:
>I now have a local git branch with about 70 commits, always
>rebased onto current trunk.

It makes me sad to learn you're carrying so many patches to Twisted.  It 
might be useful to the project if you could share why this development 
was easier to do outside the tree rather than contributing it to the 
project as you developed it.
>Those test suites pass with Python2 and Python3:
>
>test_banana, test_jelly, test_pb, test_pbfailure, test_persisted
>
>I also have a real app using PB (kajongg, a KDE game). Running
>the server and the client with any combination of Python 2 and
>Python 3 works but more testing is needed there. Especially
>transferring failures with non-ascii test, so I need to inject
>random errors.

For testing?  Probably not random - instead, comprehensive.
>spread.banana is now fully covered by tests (was at 85% before).
>There is still a lot of code in twisted.spread which has no
>tests yet.
>I do not think I want to add missing tests for everything,
>only for those regions where I do changes or where it is not
>too difficult. And of course if an application triggers a bug
>yet uncovered by tests.

The coding standard only requires you to add tests for code you're 
changing.  Python 3 mixes things up a bit though - by changing 
everything.  Calling a module "Python 3 compatible" without changing it 
at all still changes lots of things how about it works.

I think that before the Twisted project wants to call a particular 
module ported, we want it to have test coverage that can run on Python 
3.
>Can you point me to other PB applications I could use for testing?
>Preferrably ones that are already mostly compatible with PY3
>themselves,

I'll let other people volunteer projects they know of - but I strongly 
suspect there are few or no such applications.
>but that is not a _must_, I would try porting them
>unless it turns out to be too much work. And preferrably ones
>developed by people with a non-ascii native language. I do not
>yet trust Failures and logging with non-ascii.
>
>
>Below is the current list of commits. Everything you see
>there is still much in flux. This includes shuffling code
>between commits, combining and splitting commits, changing order.
>I want to open one ticket per commit. Simple things hopefully
>not needing much discussion first.
>
>Estimating one week per review/commit to trunk, this process
>will take more than one year. Often I can only add a new ticket
>after the previous one has been integrated because they
>depend on each other.

If twisted.spread were completely supported on Python 3 in only another 
year I'll be very impressed. :)
>So if it really seems to take that long, at some point I might
>just decide to put what I have to github and not care anymore.
>Which of course means I might have to distribute a patched
>twisted version with my application. I really want to leave
>Python2 behind, and only twisted is in the way. Latest versions
>of KDE do not have Python2 bindings anymore (KDE Frameworks 5).

That's too bad.
>This log of course includes things being in tickets up for review.
>
>git log --pretty='format:%s' --reverse trunk..pb3
><snip>

Again, it seems unfortunate that you have all of this work ... 
somewhere.  Somewhere only you  (as far as I can tell) can see it. 
Somewhere only you can test it.  Somewhere only you can work on it and 
get it contributed to Twisted.

Jean-Paul



From exarkun at twistedmatrix.com  Sun Oct  5 08:20:35 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 14:20:35 -0000
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <3508470.GpgFgNaMdt@i5>
References: <2059527.qlDuKEiMrr@i5>
	<3508470.GpgFgNaMdt@i5>
Message-ID: <20141005142035.17800.1927364738.divmod.xquotient.1121@top>

On 12:00 pm, wolfgang.kde at rohdewald.de wrote:
>That should have been exarkun, not itamar. Sorry for that.
>
>Am Sonntag, 5. Oktober 2014, 11:59:40 schrieb Wolfgang Rohdewald:
>>Thanks for fixing my mistakes!
>>
>>Based on your fixes I started a personal checklist, see below.
>>Is that list correct so far? (it will not include things I already
>>did right)
>>
>>I noticed that you also changed 'x' to b'x' in some places. I did
>>not do that yet because it is not needed for those tickets, I wanted
>>to keep them small and focussed.

I think I only did this where new uses of 'x' was being introduced to 
represent a bytes object.  My goal is for new code being added to be as 
correct as possible so that it doesn't increase the burden of making 
these fixes later.  The time when the code is being first introduced is 
the time when it's easiest to make sure these things are correct.
>>Instead I am planning tickets for just that: (after minimizing the
>>number of places to be fixed)
>>twisted.spread.banana and tests: literal strings become bytes where 
>>appropriate
>>twisted.spread.jelly and tests: define *_atom consistently for all 
>>atoms, change them to bytes
>>twisted.spread.pb and tests: literal strings become bytes where 
>>appropriate
>>
>>The current checklist:
>>
>>Line length max. 79
>>*.rst doc: One line per sentence, no length limit
>>fully qualified names in doc and news, twisted.*
>>no __ in Twisted. Everything in a test case is private anyway.
>>if possible __execute__ (not __define__) only one assert per test

Hmm.  Yes?  I'm not sure.  What do you have in mind here?
>>document changed API like raising more or different exceptions
>>use new print() formatting syntax
>>Document and isolate test code using the private API of the module to 
>>be tested.

I'm also unsure about this one.
>>test everything with PY2.6 too
>>did twistedchecker add new warnings?
>>news: most frequent form: Qualified now does ...
>>news about spread belong into twisted/topfiles
>>doc: not pb but PB
>>Epydoc
>>docstring ends with point
>>break docstring lines not sooner than needed
>>avoid the word test in test docstrings
>>do not use the I am form in docstrings
>>test docstring: describe what happens, including exceptions
>>doc: avoid mentioning the private API

Apart from those two items, the rest of these look great.

Jean-Paul



From wolfgang.kde at rohdewald.de  Sun Oct  5 10:23:35 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 18:23:35 +0200
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
References: <4121201.VS1rzsEyV3@i5>
 <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
Message-ID: <12076355.cZLe9KzarU@i5>

Am Sonntag, 5. Oktober 2014, 13:48:12 schrieb exarkun at twistedmatrix.com:
> On 3 Oct, 11:09 pm, wolfgang.kde at rohdewald.de wrote:
> >I now have a local git branch with about 70 commits, always
> >rebased onto current trunk.
> 
> It makes me sad to learn you're carrying so many patches to Twisted.  It 
> might be useful to the project if you could share why this development 
> was easier to do outside the tree rather than contributing it to the 
> project as you developed it.

This is just my personal style of development. A bit chaotic. Sometimes
trial and error. And really a lot of git rebase -i. Whenever I find
some necessary or helpful change that could be done before porting,
put that at the top of the patch list and readjust everything.
The methodic part comes last: Look at what I changed, rethink why that
is really needed, and look for similar places I overlooked. Then generate
tickets for things that seem ready.

BTW what about Ticket 7628, news extension "port"? I could soon start
feeding porting tickets but if this extension is useful, I guess it
should be applied first.


> I think that before the Twisted project wants to call a particular 
> module ported, we want it to have test coverage that can run on Python 
> 3.

I was afraid you'd say that.
https://twistedmatrix.com/trac/wiki/Plan/Python3 does not explicitly
say so, maybe this should be changed. I can do that, but then I
have no write permission for the wiki.


> I'll let other people volunteer projects they know of - but I strongly 
> suspect there are few or no such applications.

That makes me wonder if I really should have used PB at all. But
now I do and have no plans to change that.


> Again, it seems unfortunate that you have all of this work ... 
> somewhere.  Somewhere only you  (as far as I can tell) can see it. 
> Somewhere only you can test it.  Somewhere only you can work on it and 
> get it contributed to Twisted.

I believe I saw some mailing list posts where many years ago somebody
said he has spread running with PY3 but as it seems nothing of that
got into trunk. Be assured that I want to avoid that.

What is the preferred place for Twisted public repositories?
No svn please, only git.

But first I want to do some more cleaning and reshuffling, I cannot
really do that anymore with commits already pushed to a public
repository. Maybe 2 or 3 weeks.

-- 
Wolfgang



From wolfgang.kde at rohdewald.de  Sun Oct  5 10:26:00 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 18:26 +0200
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <20141005142035.17800.1927364738.divmod.xquotient.1121@top>
References: <2059527.qlDuKEiMrr@i5> <3508470.GpgFgNaMdt@i5>
 <20141005142035.17800.1927364738.divmod.xquotient.1121@top>
Message-ID: <1732400.V7WMTxfrEr@i5>

Am Sonntag, 5. Oktober 2014, 14:20:35 schrieb exarkun at twistedmatrix.com:
> >>I noticed that you also changed 'x' to b'x' in some places. I did
> >>not do that yet because it is not needed for those tickets, I wanted
> >>to keep them small and focussed.
> 
> I think I only did this where new uses of 'x' was being introduced to 
> represent a bytes object.

Then I would not have mentioned this. Three such changes in svn r43220.
b'remote' and two banana encoded strings. I knowingly left it at 'remote'
because I wanted to change that everywhere together.

> My goal is for new code being added to be as 
> correct as possible so that it doesn't increase the burden of making 
> these fixes later.  The time when the code is being first introduced is 
> the time when it's easiest to make sure these things are correct.

I fully agree. Excluding cases where you just re-use an existing string
in one more place because then you have both 'remote' and b'remote'
in the source until you change them all (for that you have to grep
everything anyway). On the other hand, not adapting existing code
to changed guidelines right when they are changed always generates
a lot of such inconsistencies, so this one is really peanuts.
(I know - more manpower is always needed). This is actually a small
problem for me because I rather copy the style of existing code 
instead of reading boring guidelines.


> >>if possible __execute__ (not __define__) only one assert per test
> 
> Hmm.  Yes?  I'm not sure.  What do you have in mind here?

svn r43207 Split up the test with multiple assertions into several tests

There you unfolded the loop. If the real reason was the different 
constructions of the type names (like "__builtin__.type"), I would
have expected a different commit text, and of course you could have
left the loop, like

for obj, name in ((type, '__builtin__.typ'), ...)

So I assumed that you really want as few assertions executed in one
test as possible. I cannot think of any other reason than those two.

BTW your commit "epytext" fixes most but not all. There are still a
few ``xxx`` left. What markup language did you have in mind there?

> >>Document and isolate test code using the private API of the module to 
> >>be tested.
> 
> I'm also unsure about this one.

Cases like svn r43221

Hoist the use of this private API to a single location in a helper function.

which explains why we need to use the private API.



-- 
Wolfgang



From exarkun at twistedmatrix.com  Sun Oct  5 13:58:29 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 19:58:29 -0000
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <12076355.cZLe9KzarU@i5>
References: <4121201.VS1rzsEyV3@i5>
 <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
 <12076355.cZLe9KzarU@i5>
Message-ID: <20141005195829.17800.1945780271.divmod.xquotient.1155@top>

On 04:23 pm, wolfgang.kde at rohdewald.de wrote:
>Am Sonntag, 5. Oktober 2014, 13:48:12 schrieb 
>exarkun at twistedmatrix.com:
>>On 3 Oct, 11:09 pm, wolfgang.kde at rohdewald.de wrote:
>> >I now have a local git branch with about 70 commits, always
>> >rebased onto current trunk.
>>
>>It makes me sad to learn you're carrying so many patches to Twisted. 
>>It
>>might be useful to the project if you could share why this development
>>was easier to do outside the tree rather than contributing it to the
>>project as you developed it.
>
>This is just my personal style of development. A bit chaotic. Sometimes
>trial and error. And really a lot of git rebase -i. Whenever I find
>some necessary or helpful change that could be done before porting,
>put that at the top of the patch list and readjust everything.
>The methodic part comes last: Look at what I changed, rethink why that
>is really needed, and look for similar places I overlooked. Then 
>generate
>tickets for things that seem ready.
>
>BTW what about Ticket 7628, news extension "port"? I could soon start
>feeding porting tickets but if this extension is useful, I guess it
>should be applied first.

Looks like Kevin is working on it.  I'll review it when it comes up.
>
>>I think that before the Twisted project wants to call a particular
>>module ported, we want it to have test coverage that can run on Python
>>3.
>
>I was afraid you'd say that.
>https://twistedmatrix.com/trac/wiki/Plan/Python3 does not explicitly
>say so, maybe this should be changed. I can do that, but then I
>have no write permission for the wiki.

Ah.  I didn't think anyone was paying any attention to the plan anymore 
(and I've run out of energy to try to get people to stick to it).

For example, following the plan, I would have expected to see perhaps 
two patches to port the banana module: one to add the missing test 
coverage and one to make any and all changes necessary to get the test 
suite to pass on Python 3.

(Note, I'm just pointing this out for the sake of clarity.  I'm not 
complaining about the tickets/patches you recently contributed.  As I 
said, I'm out of energy for that).

As far as wiki access goes, I'm not clear on how those permissions work 
anymore.  Perhaps someone else can chime in.  If not, consider asking on 
#twisted-dev.
>
>>I'll let other people volunteer projects they know of - but I strongly
>>suspect there are few or no such applications.
>
>That makes me wonder if I really should have used PB at all. But
>now I do and have no plans to change that.

Sorry about this.  For anyone who's reading and thinking about starting 
a project, I personally recommend you not use PB.  It's almost certainly 
not the right tool to solve the problem you have (if you think your 
problem is so unique and challenging it needs a tool like PB, maybe it 
is!  Feel free to start a discussion about the specifics on this list. 
Maybe you've got one of the rare problems where PB makes sense.)
>
>>Again, it seems unfortunate that you have all of this work ...
>>somewhere.  Somewhere only you  (as far as I can tell) can see it.
>>Somewhere only you can test it.  Somewhere only you can work on it and
>>get it contributed to Twisted.
>
>I believe I saw some mailing list posts where many years ago somebody
>said he has spread running with PY3 but as it seems nothing of that
>got into trunk. Be assured that I want to avoid that.
>
>What is the preferred place for Twisted public repositories?
>No svn please, only git.

Anywhere public.  Collaboration can't take place when things are 
private.
>
>But first I want to do some more cleaning and reshuffling, I cannot
>really do that anymore with commits already pushed to a public
>repository. Maybe 2 or 3 weeks.

Pushing something isn't a promise not to abandoning, screw it up, rebase 
it, delete it later, whatever.

I think that the notion that before something is shared it has to be 
carefully arranged and re-arranged to make it look like it was developed 
by an all-knowing, all-programming super being.

Real software doesn't get built one perfect, self-contained step at a 
time.  The construction of real software is messy.

Jean-Paul



From exarkun at twistedmatrix.com  Sun Oct  5 14:17:49 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 20:17:49 -0000
Subject: [Twisted-Python] my branches merged by you (exarkun)
In-Reply-To: <1732400.V7WMTxfrEr@i5>
References: <2059527.qlDuKEiMrr@i5> <3508470.GpgFgNaMdt@i5>
 <20141005142035.17800.1927364738.divmod.xquotient.1121@top>
 <1732400.V7WMTxfrEr@i5>
Message-ID: <20141005201749.17800.132318757.divmod.xquotient.1188@top>

On 04:26 pm, wolfgang.kde at rohdewald.de wrote:
>Am Sonntag, 5. Oktober 2014, 14:20:35 schrieb 
>exarkun at twistedmatrix.com:
>> >>I noticed that you also changed 'x' to b'x' in some places. I did
>> >>not do that yet because it is not needed for those tickets, I wanted
>> >>to keep them small and focussed.
>>
>>I think I only did this where new uses of 'x' was being introduced to
>>represent a bytes object.
>
>Then I would not have mentioned this. Three such changes in svn r43220.
>b'remote' and two banana encoded strings. I knowingly left it at 
>'remote'
>because I wanted to change that everywhere together.

Hm.  You're right on two counts.  The lines:

    undecodable = b'\x7f' * 65 + b'\x85'
and

    decodable = b'\x01\x81'

were not related to the change.  I'm not sure why I decided to make 
those changes.  If I were doing it again now, I wouldn't.

But I'll stick by the decision to write `b'remote'` instead of 
`'remote'` on the line:

    vocab = b'remote'
>>My goal is for new code being added to be as
>>correct as possible so that it doesn't increase the burden of making
>>these fixes later.  The time when the code is being first introduced 
>>is
>>the time when it's easiest to make sure these things are correct.
>
>I fully agree. Excluding cases where you just re-use an existing string
>in one more place because then you have both 'remote' and b'remote'
>in the source until you change them all (for that you have to grep
>everything anyway). On the other hand, not adapting existing code
>to changed guidelines right when they are changed always generates
>a lot of such inconsistencies, so this one is really peanuts.
>(I know - more manpower is always needed). This is actually a small
>problem for me because I rather copy the style of existing code
>instead of reading boring guidelines.

I'm glad we're mostly in agreement and I'll take that as a win. :)
>
>> >>if possible __execute__ (not __define__) only one assert per test
>>
>>Hmm.  Yes?  I'm not sure.  What do you have in mind here?
>
>svn r43207 Split up the test with multiple assertions into several 
>tests
>
>There you unfolded the loop. If the real reason was the different
>constructions of the type names (like "__builtin__.type"), I would
>have expected a different commit text, and of course you could have
>left the loop, like
>
>for obj, name in ((type, '__builtin__.typ'), ...)
>
>So I assumed that you really want as few assertions executed in one
>test as possible. I cannot think of any other reason than those two.

Ah.  I understand now, and you divined my intent correctly.
>BTW your commit "epytext" fixes most but not all. There are still a
>few ``xxx`` left. What markup language did you have in mind there?

sigh... reStructuredText... which Twisted uses for the other half of its 
documentation.
>> >>Document and isolate test code using the private API of the module 
>>to
>> >>be tested.
>>
>>I'm also unsure about this one.
>
>Cases like svn r43221
>
>Hoist the use of this private API to a single location in a helper 
>function.
>
>which explains why we need to use the private API.

Ah.  Great.

Jean-Paul



From wolfgang.kde at rohdewald.de  Sun Oct  5 14:28:42 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sun, 05 Oct 2014 22:28:42 +0200
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
References: <4121201.VS1rzsEyV3@i5> <12076355.cZLe9KzarU@i5>
 <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
Message-ID: <12729075.bzi8kv4GWd@i5>

Am Sonntag, 5. Oktober 2014, 19:58:29 schrieb exarkun at twistedmatrix.com:
> For example, following the plan, I would have expected to see perhaps 
> two patches to port the banana module: one to add the missing test 
> coverage and one to make any and all changes necessary to get the test 
> suite to pass on Python 3.

Impossible. test_jelly imports pb, test_pb imports jelly.

But I can of course reduce the number of tickets related to porting and
put more than one patchfile into them.


-- 
Wolfgang



From exarkun at twistedmatrix.com  Sun Oct  5 15:59:01 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 05 Oct 2014 21:59:01 -0000
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <12729075.bzi8kv4GWd@i5>
References: <4121201.VS1rzsEyV3@i5> <12076355.cZLe9KzarU@i5>
 <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
 <12729075.bzi8kv4GWd@i5>
Message-ID: <20141005215901.17800.1371773274.divmod.xquotient.1192@top>

On 08:28 pm, wolfgang.kde at rohdewald.de wrote:
>Am Sonntag, 5. Oktober 2014, 19:58:29 schrieb 
>exarkun at twistedmatrix.com:
>>For example, following the plan, I would have expected to see perhaps
>>two patches to port the banana module: one to add the missing test
>>coverage and one to make any and all changes necessary to get the test
>>suite to pass on Python 3.
>
>Impossible. test_jelly imports pb, test_pb imports jelly.

That doesn't mean it's impossible.  It just means you may also have to 
shuffle some files around.
>But I can of course reduce the number of tickets related to porting and
>put more than one patchfile into them.

Note that my point isn't that we need to reduce the number of tickets 
related to porting or that there should be more than one patch to 
resolve any one ticket (there shouldn't be).

The point is that the documented porting plan is to port module by 
module, not Python 3 incompatible change by Python 3 incompatible 
change.

Jean-Paul



From bschollnick at gmail.com  Mon Oct  6 18:16:49 2014
From: bschollnick at gmail.com (Benjamin Schollnick)
Date: Mon, 6 Oct 2014 20:16:49 -0400
Subject: [Twisted-Python] Client Logic
Message-ID: <786CDC73-43AA-4811-B992-B3817BC5D843@gmail.com>

Folks,

Im writing an client using twisted, and Im basing it off the Poetry client from http://krondo.com/wp-content/uploads/2009/08/twisted-intro.html.
I am porting a previous pyserial based client, so Im running into new territory here.

And its working fine, there are two issues" that I am running into.

class WT_Protocol(Protocol):

   tag = ''

   def to_bytes(self, seq):
       """convert a sequence to a bytes type"""
       #
       #   from pyserial.util
       if isinstance(seq, bytes):
           return seq
       elif isinstance(seq, bytearray):
           return bytes(seq)
       elif isinstance(seq, memoryview):
           return seq.tobytes()
       else:
           b = bytearray()
           for item in seq:
               b.append(item)  # this one handles int and str for our emulation and ints for Python 3.x
           return bytes(b)

   def connectionMade(self):
       print "Reseting the network"
       reset = self.to_bytes(packets.network_reset() )
       self.transport.write ( reset )
       self.transport.write ( self.to_bytes(packets.Set_SiteCode(NodeID=255, SC1=0, SC2=0, SC3=0) ))
       self.transport.write ( self.to_bytes(packets.Set_Gain_Packet(NodeID=255, Gain=1) ))    # high gain
       self.transport.write ( self.to_bytes(packets.Set_Protocol_No_Nulls (NetworkID=0, ReceiverID=0, NodeID=1) ))    # high gain
       time.sleep (.5)

Now the client works right now, but Im concerned that I cant figure out how to immediately read for a reply packet from the server.

For example, when I send the Set_SiteCode packet, I may receive a reply.  

But how would that occur in the Twisted framework?  In my testing the dataReceived function is not being called, so I cant trap it there, plus Im not sure how I would figure that logic.

Can anyone suggest a method to do this?

The second question, as far as I can tell, isnt very solvable.  Id like to add a Press Q to quit type logic to the code.  But I dont see a way to do this easily in twisted?  (platform unspecific, but its running Mac OS X / Unix right now).

		- Ben	
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141006/53a9f84f/attachment-0002.html>

From camrdale at gmail.com  Tue Oct  7 20:32:54 2014
From: camrdale at gmail.com (Cameron Dale)
Date: Wed, 8 Oct 2014 04:32:54 +0200
Subject: [Twisted-Python] from: Cameron Dale
Message-ID: <74E788F0-CDDE-4AF8-DA86-E6ADE9FBC2AE@finansdesign.dk>




Hiya

http://minakow.ru/iron.php?pull=aqddrmtvcs3630rwfzrcp

camrdale at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/537036d6/attachment-0002.html>

From glyph at twistedmatrix.com  Tue Oct  7 22:58:28 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Tue, 7 Oct 2014 21:58:28 -0700
Subject: [Twisted-Python] Client Logic
In-Reply-To: <786CDC73-43AA-4811-B992-B3817BC5D843@gmail.com>
References: <786CDC73-43AA-4811-B992-B3817BC5D843@gmail.com>
Message-ID: <86239168-B127-4EDD-89CC-B1AAA8F94D9C@twistedmatrix.com>


On Oct 6, 2014, at 5:16 PM, Benjamin Schollnick <bschollnick at gmail.com> wrote:

> Now the client works right now, but Im concerned that I cant figure out how to immediately read for a reply packet from the server.

First, if you want to "immediately" do anything, you really need to delete that "time.sleep(.5)" line from your code.  It will block the whole reactor from getting work done :).

> For example, when I send the Set_SiteCode packet, I may receive a reply.  
> 
> But how would that occur in the Twisted framework?

dataReceived will be called with the data when it arrives.  If you're expecting the data that is being sent to be a reply to some message, you should have the code that sends that message return a Deferred; that's what Deferreds are for, representing request/response patterns.

> In my testing the dataReceived function is not being called, so I cant trap it there, plus Im not sure how I would figure that logic.

If dataReceived is not getting called, you're not getting data, so no reply has been sent.  You haven't included enough of your program for me to tell why no data is getting sent, though.  Presumably you've got some stuff hooking up your serial port and running the reactor, but without seeing how that works, I can't even guess at what's wrong.

> Can anyone suggest a method to do this?

dataReceived it is :).

> The second question, as far as I can tell, isnt very solvable.  Id like to add a Press Q to quit type logic to the code.  But I dont see a way to do this easily in twisted?  (platform unspecific, but its running Mac OS X / Unix right now).

Where do you want to press "Q"?  Do you mean you want to pop up a GUI, or wait for the user to type a "Q" in a Terminal window, or do you mean you want the thing on the other end of the serial port to send a "Q"?  Also, what is "UNIX"?

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141007/e7d0a73f/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Oct  8 01:18:32 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 8 Oct 2014 00:18:32 -0700
Subject: [Twisted-Python] naming question before we end up committed...
In-Reply-To: <A680FCCC-0567-490F-8565-55D8F3C9E63A@gmail.com>
References: <FB5047BF-9EB6-45F4-9B25-B82276C64086@twistedmatrix.com>
 <A7B1154B-01AE-429D-8784-4EA6DE344F48@ox.cx>
 <A680FCCC-0567-490F-8565-55D8F3C9E63A@gmail.com>
Message-ID: <F33B5D44-D33A-4DB4-96EB-6005DA3415AD@twistedmatrix.com>

On Sep 28, 2014, at 8:36 AM, Chris <chriswwolfe at gmail.com> wrote:

> +1 for twisted.logger.

Since everyone seemed to agree, this is now in review: <https://twistedmatrix.com/trac/ticket/7652#comment:3>.

-glyph


-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/68e616d2/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Oct  8 01:32:28 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 8 Oct 2014 00:32:28 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
Message-ID: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>

<https://twistedmatrix.com/trac/ticket/7633> is keeping one of the buildbots persistently red.  It's in review.  There's some discussion on the ticket, 

If anyone has some free time to review it, this would make other code-reviews go just a little bit faster, since reviewers wouldn't need to keep looking at the logs for that builder to make sure that the failures are the "expected" ones; all the builders should be consistently green except for the pesky windows XP one.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/06ef9e6d/attachment-0002.html>

From jml at mumak.net  Wed Oct  8 03:13:08 2014
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 08 Oct 2014 09:13:08 +0000
Subject: [Twisted-Python] a review to speed up other reviews?
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
Message-ID: <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>

Done. Not reviewed for style guide compliance, and I haven't run it locally
or on the build slaves. Hope this helps.

On Wed Oct 08 2014 at 8:32:59 AM Glyph <glyph at twistedmatrix.com> wrote:

> <https://twistedmatrix.com/trac/ticket/7633> is keeping one of the
> buildbots persistently red.  It's in review.  There's some discussion on
> the ticket,
>
> If anyone has some free time to review it, this would make other
> code-reviews go just a little bit faster, since reviewers wouldn't need to
> keep looking at the logs for that builder to make sure that the failures
> are the "expected" ones; all the builders should be consistently green
> except for the pesky windows XP one.
>
> -glyph
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/a2865556/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Oct  8 12:36:33 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 8 Oct 2014 11:36:33 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
In-Reply-To: <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
Message-ID: <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>

On Oct 8, 2014, at 2:13 AM, Jonathan Lange <jml at mumak.net> wrote:

> Done. Not reviewed for style guide compliance, and I haven't run it locally or on the build slaves. Hope this helps.

Thanks very much for having a look at this!  I'll address the feedback.

You shouldn't need to review for style-guide compliance, as that's the twistedchecker buildbot's job.  Which, I should mention, is green on the branch :).

Also, I already ran the buildbots.  You can quickly investigate their results by looking at the "buildbot" link in the "branch" field of the ticket description.

Armed with these two additional pieces of information, would you be willing to turn this comment into a passing review? ;-)

-glyph


From jml at mumak.net  Wed Oct  8 12:50:15 2014
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 08 Oct 2014 18:50:15 +0000
Subject: [Twisted-Python] a review to speed up other reviews?
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
Message-ID: <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>

Comments are on the ticket:
https://twistedmatrix.com/trac/ticket/7633#comment:14. I forgot to reassign
when I did the review earlier today.

On Wed Oct 08 2014 at 7:37:38 PM Glyph Lefkowitz <glyph at twistedmatrix.com>
wrote:

> On Oct 8, 2014, at 2:13 AM, Jonathan Lange <jml at mumak.net> wrote:
>
> > Done. Not reviewed for style guide compliance, and I haven't run it
> locally or on the build slaves. Hope this helps.
>
> Thanks very much for having a look at this!  I'll address the feedback.
>
> You shouldn't need to review for style-guide compliance, as that's the
> twistedchecker buildbot's job.  Which, I should mention, is green on the
> branch :).
>
> Also, I already ran the buildbots.  You can quickly investigate their
> results by looking at the "buildbot" link in the "branch" field of the
> ticket description.
>
> Armed with these two additional pieces of information, would you be
> willing to turn this comment into a passing review? ;-)
>
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/ec4057a9/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Oct  8 12:54:03 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Wed, 8 Oct 2014 11:54:03 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
In-Reply-To: <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
 <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
Message-ID: <5016ACAE-705A-4B21-A923-47B877294690@twistedmatrix.com>


On Oct 8, 2014, at 11:50 AM, Jonathan Lange <jml at mumak.net> wrote:

> Comments are on the ticket: https://twistedmatrix.com/trac/ticket/7633#comment:14. I forgot to reassign when I did the review earlier today.

Thanks again.

If that was intended to be a full review though, you did leave out one important step:

As documented in <https://twistedmatrix.com/trac/wiki/ReviewProcess#Howtobeagoodreviewer>,

When you're done with the review, always say what the next step should be: for example, if the author is a committer, can they commit after making a few minor fixes? If your review feedback is more substantial, should they re-submit for another review?

It looks like a "address these minor issues and merge" review, but given that you said you didn't have time to look at certain things, I don't want to make any assumptions.

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/3a3f10d7/attachment-0002.html>

From jml at mumak.net  Wed Oct  8 13:04:09 2014
From: jml at mumak.net (Jonathan Lange)
Date: Wed, 08 Oct 2014 19:04:09 +0000
Subject: [Twisted-Python] a review to speed up other reviews?
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
 <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
 <5016ACAE-705A-4B21-A923-47B877294690@twistedmatrix.com>
Message-ID: <CAHZ8tnZ9dyDY2vqky6i4Aeu_LhJGW=3=OF9ZDKi0meTCCRGN5Q@mail.gmail.com>

On Wed Oct 08 2014 at 7:54:57 PM Glyph Lefkowitz <glyph at twistedmatrix.com>
wrote:

>
> On Oct 8, 2014, at 11:50 AM, Jonathan Lange <jml at mumak.net> wrote:
>
> Comments are on the ticket:
> https://twistedmatrix.com/trac/ticket/7633#comment:14. I forgot to
> reassign when I did the review earlier today.
>
>
> ...
>


> It *looks* like a "address these minor issues and merge" review, but
> given that you said you didn't have time to look at certain things, I don't
> want to make any assumptions.
>
>
Done. Thanks for the reminders.

jml
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/a264254a/attachment-0002.html>

From exarkun at twistedmatrix.com  Wed Oct  8 13:23:41 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Wed, 08 Oct 2014 19:23:41 -0000
Subject: [Twisted-Python] Boston Area Twisted Sprint
Message-ID: <20141008192341.17800.2053172312.divmod.xquotient.1235@top>

Hello all,

I'm happy to invite you to a Twisted sprint on Saturday, November 1st
in Cambridge, Massachusetts.  ClusterHQ will be hosting up to twenty
(20) Twisted sprinters at the Cambridge Innovation Center ("Coronet
City" room) in Kendall Square from 10AM until 11PM.  The sprint topics
are attendee choice - hacking on any part of Twisted is welcome.  A
large part of the ClusterHQ team will be taking part in the sprint.

ClusterHQ is developing Flocker, a data management tool for use with
Docker written in Python and based on Twisted.  Follow us on Github:

    https://github.com/clusterhq/flocker

ClusterHQ will provide lunch and dinner (something like delivery
pizza, comment on the meetup page if you'd like to suggest
something!).

Find details and chat about sprint topics at the Boston Twisted Python
meetup page:

    http://www.meetup.com/Boston-Twisted-Python/

Early birds, feel free to contact me off-list about meeting up for 
coffee at
around 9AM before the sprint starts.

Space at CIC is limited.  Please RSVP on the Meetup page!

See you there,
Jean-Paul



From kevin.horn at gmail.com  Wed Oct  8 17:13:10 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Wed, 8 Oct 2014 18:13:10 -0500
Subject: [Twisted-Python] porting twisted.spread to Python3
In-Reply-To: <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
References: <4121201.VS1rzsEyV3@i5>
 <20141005134812.17800.1576310986.divmod.xquotient.1112@top>
 <12076355.cZLe9KzarU@i5>
 <20141005195829.17800.1945780271.divmod.xquotient.1155@top>
Message-ID: <CA+U=zK0DcxMCMt0sNujfKNrAfyv=ZNsaJDd2Sx7UFuue0tmiVA@mail.gmail.com>

On Sun, Oct 5, 2014 at 2:58 PM, <exarkun at twistedmatrix.com> wrote:

> On 04:23 pm, wolfgang.kde at rohdewald.de wrote:
>
>>
>> BTW what about Ticket 7628, news extension "port"? I could soon start
>> feeding porting tickets but if this extension is useful, I guess it
>> should be applied first.
>>
>
> Looks like Kevin is working on it.  I'll review it when it comes up


Apologies.  I got sidetracked preparing for PyTexas (which was last
weekend).  I'll try to get back to it ASAP.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141008/bb0a2f5e/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct  9 16:56:14 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 15:56:14 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before the
	race!
Message-ID: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>

On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.

One of the things that tends to put a damper on such events is the perpetual backlog of tickets in review, many of which have been there seemingly forever.

I would like to propose that we - the whole Twisted community, but especially Twisted committers - give these sprinters a morale boost, by giving them a clean slate, review-queue wise.  This will let them focus on developing cool new stuff, getting a release out, fixing gnarly old bugs, or whatever strikes their fancy, instead of just grinding through reviews the whole time, or feeling bad about leaving those reviews outstanding.

Right now, we have 58 tickets in review.

<https://twistedmatrix.com/trac/report/25>

Here's my proposal:

I am looking for at least 4 volunteers for a "review rally" starting on Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself) can review 2 tickets per day for one week, until Sunday, October 19, we can clear 70 tickets, which should take care of the existing 58 tickets currently queued up, plus any that get resubmitted during that week.

While some volunteers should be Twisted committers since we have plenty of pending contributions from non-committers that need review, there are at least 11 tickets in review from core contributors right now, so non-committer volunteers are equally appreciated!

Of course, if we get 9 volunteers, then each reviewer only has to do one ticket per day, an even more tractable goal.  And so on into the higher numbers :-).

Who is with me?!?!

-glyph

P.S.: While you should of course do this out of its self-evident merit, I do plan to recognize participation in some way, at least with a commemorative page on twistedmatrix.com, and possibly also with something a little goofy like a Mozilla Open Badge :-).

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/b184e0b5/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct  9 17:17:21 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 16:17:21 -0700
Subject: [Twisted-Python] a review to speed up other reviews?
In-Reply-To: <CAHZ8tnZ9dyDY2vqky6i4Aeu_LhJGW=3=OF9ZDKi0meTCCRGN5Q@mail.gmail.com>
References: <CA811DC7-CFFD-4200-A44A-0E30DF41FBB5@twistedmatrix.com>
 <CAHZ8tnZeVCz0nDjkBoGi09D5UaVZVtQiD2VU4VUvV9k3x1nccw@mail.gmail.com>
 <7A2553E4-D049-4F76-8FC3-28264C94A4E5@twistedmatrix.com>
 <CAHZ8tnaOvPQ3Xok0wrDuhVm1kwa8Sb5eMzmxbfu1QSe=50vqww@mail.gmail.com>
 <5016ACAE-705A-4B21-A923-47B877294690@twistedmatrix.com>
 <CAHZ8tnZ9dyDY2vqky6i4Aeu_LhJGW=3=OF9ZDKi0meTCCRGN5Q@mail.gmail.com>
Message-ID: <EB04ED8B-ED0C-4FFF-B2B3-149CF986F2D7@twistedmatrix.com>


On Oct 8, 2014, at 12:04 PM, Jonathan Lange <jml at mumak.net> wrote:

> Done. Thanks for the reminders.

No problem.  Thank you for the review!  It's been landed.

Now the only remaining persistent build failure issue is <https://twistedmatrix.com/trac/ticket/3404>...

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/f866b478/attachment-0002.html>

From hawkowl at atleastfornow.net  Thu Oct  9 17:18:43 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Fri, 10 Oct 2014 07:18:43 +0800
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>

On 10 Oct 2014, at 6:56, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.
> 
> One of the things that tends to put a damper on such events is the perpetual backlog of tickets in review, many of which have been there seemingly forever.
> 
> I would like to propose that we - the whole Twisted community, but especially Twisted committers - give these sprinters a morale boost, by giving them a clean slate, review-queue wise.  This will let them focus on developing cool new stuff, getting a release out, fixing gnarly old bugs, or whatever strikes their fancy, instead of just grinding through reviews the whole time, or feeling bad about leaving those reviews outstanding.
> 
> Right now, we have 58 tickets in review.
> 
> <https://twistedmatrix.com/trac/report/25>
> 
> Here's my proposal:
> 
> I am looking for at least 4 volunteers for a "review rally" starting on Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself) can review 2 tickets per day for one week, until Sunday, October 19, we can clear 70 tickets, which should take care of the existing 58 tickets currently queued up, plus any that get resubmitted during that week.
> 
> While some volunteers should be Twisted committers since we have plenty of pending contributions from non-committers that need review, there are at least 11 tickets in review from core contributors right now, so non-committer volunteers are equally appreciated!
> 
> Of course, if we get 9 volunteers, then each reviewer only has to do one ticket per day, an even more tractable goal.  And so on into the higher numbers :-).
> 
> Who is with me?!?!
> 
> -glyph
> 
> P.S.: While you should of course do this out of its self-evident merit, I do plan to recognize participation in some way, at least with a commemorative page on twistedmatrix.com, and possibly also with something a little goofy like a Mozilla Open Badge :-).
> 

Sure  I should be doing reviews anyway :)

-hawkie

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20141010/683d9b6c/attachment.sig>

From chriswwolfe at gmail.com  Thu Oct  9 17:39:40 2014
From: chriswwolfe at gmail.com (Chris Wolfe)
Date: Thu, 9 Oct 2014 18:39:40 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
Message-ID: <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>

Sure - I'm not a committer, but I'll do my best.
Am 09.10.2014 18:21 schrieb "HawkOwl" <hawkowl at atleastfornow.net>:

> On 10 Oct 2014, at 6:56, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:
>
> > On November 1, ClusterHQ is going to be hosting a Twisted sprint in
> Boston.
> >
> > One of the things that tends to put a damper on such events is the
> perpetual backlog of tickets in review, many of which have been there
> seemingly forever.
> >
> > I would like to propose that we - the whole Twisted community, but
> especially Twisted committers - give these sprinters a morale boost, by
> giving them a clean slate, review-queue wise.  This will let them focus on
> developing cool new stuff, getting a release out, fixing gnarly old bugs,
> or whatever strikes their fancy, instead of just grinding through reviews
> the whole time, or feeling bad about leaving those reviews outstanding.
> >
> > Right now, we have 58 tickets in review.
> >
> > <https://twistedmatrix.com/trac/report/25>
> >
> > Here's my proposal:
> >
> > I am looking for at least 4 volunteers for a "review rally" starting on
> Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself)
> can review 2 tickets per day for one week, until Sunday, October 19, we can
> clear 70 tickets, which should take care of the existing 58 tickets
> currently queued up, plus any that get resubmitted during that week.
> >
> > While some volunteers should be Twisted committers since we have plenty
> of pending contributions from non-committers that need review, there are at
> least 11 tickets in review from core contributors right now, so
> non-committer volunteers are equally appreciated!
> >
> > Of course, if we get 9 volunteers, then each reviewer only has to do one
> ticket per day, an even more tractable goal.  And so on into the higher
> numbers :-).
> >
> > Who is with me?!?!
> >
> > -glyph
> >
> > P.S.: While you should of course do this out of its self-evident merit,
> I do plan to recognize participation in some way, at least with a
> commemorative page on twistedmatrix.com, and possibly also with something
> a little goofy like a Mozilla Open Badge :-).
> >
>
> Sure  I should be doing reviews anyway :)
>
> -hawkie
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/06befd42/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct  9 17:43:18 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 16:43:18 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
Message-ID: <032C939A-FB61-4198-9B9F-C0AF41AE500B@twistedmatrix.com>


On Oct 9, 2014, at 4:18 PM, HawkOwl <hawkowl at atleastfornow.net> wrote:

> Sure  I should be doing reviews anyway :)

Thanks HawkOwl!  I'm looking forward to it.  Congrats on being the fastest volunteer :-).

You should be doing reviews anyway (shouldn't we all?) and part of my hope for this is that if we make a periodic concerted push to get the numbers down from the dizzying heights they've jumped to, it will be a lot more satisfying to do reviews more informally later, because there won't be such a discouragingly long list that it's hard to make a dent in.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/2c7f3e68/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct  9 17:45:07 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 16:45:07 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
 <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
Message-ID: <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>

On Oct 9, 2014, at 4:39 PM, Chris Wolfe <chriswwolfe at gmail.com> wrote:
> Sure - I'm not a committer, but I'll do my best.\
> 

Thanks Chris, your participation is much appreciated!

Now we've got:

1. me
2. hawkowl
3. chris wolfe

Have you done reviews before?  Before the week starts you should definitely familiarize yourself with <https://twistedmatrix.com/trac/wiki/ReviewProcess> and make sure you know what to do.  Please feel free to reach out if this documentation is in any way unclear (we definitely know it's not the best).

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/21f49467/attachment-0002.html>

From chriswwolfe at gmail.com  Thu Oct  9 17:48:31 2014
From: chriswwolfe at gmail.com (Chris Wolfe)
Date: Thu, 9 Oct 2014 18:48:31 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
 <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
 <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>
Message-ID: <CAEKSqktmBkjYq6D_P4zLK+hTBL5bef4FtOUo7-TVfMbTNxHz4A@mail.gmail.com>

Yes - I have, I'm herrwolfe
Am 09.10.2014 18:47 schrieb "Glyph Lefkowitz" <glyph at twistedmatrix.com>:

> On Oct 9, 2014, at 4:39 PM, Chris Wolfe <chriswwolfe at gmail.com> wrote:
>
> Sure - I'm not a committer, but I'll do my best.\
>
> Thanks Chris, your participation is much appreciated!
>
> Now we've got:
>
> 1. me
> 2. hawkowl
> 3. chris wolfe
>
> Have you done reviews before?  Before the week starts you should
> definitely familiarize yourself with <
> https://twistedmatrix.com/trac/wiki/ReviewProcess> and make sure you know
> what to do.  Please feel free to reach out if this documentation is in any
> way unclear (we definitely know it's not the best).
>
> -glyph
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/c874bad5/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct  9 18:03:00 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 9 Oct 2014 17:03:00 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <CAEKSqktmBkjYq6D_P4zLK+hTBL5bef4FtOUo7-TVfMbTNxHz4A@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <928A8C87-5F18-42E4-9609-22EDB09D4D08@atleastfornow.net>
 <CAEKSqks85i0c6agVrzaLR0keNowcXgLZPhmXM-5GfJmwb96rfw@mail.gmail.com>
 <9700DB1D-A349-4C72-8757-7B5BE6CD72E5@twistedmatrix.com>
 <CAEKSqktmBkjYq6D_P4zLK+hTBL5bef4FtOUo7-TVfMbTNxHz4A@mail.gmail.com>
Message-ID: <99965CA2-A187-40D0-8A9C-E2CE5388DAB1@twistedmatrix.com>

On Oct 9, 2014, at 4:48 PM, Chris Wolfe <chriswwolfe at gmail.com> wrote:

> Yes - I have, I'm herrwolfe
> 

Oh, cool!  Hard to draw the lines between handles and names sometimes :).

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/332b4bc9/attachment-0002.html>

From paul at eventuallyanyway.com  Thu Oct  9 18:45:34 2014
From: paul at eventuallyanyway.com (Paul Hummer)
Date: Thu, 09 Oct 2014 18:45:34 -0600
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <1412901934.1221022.177272397.1DEDD6FF@webmail.messagingengine.com>



On Thu, Oct 9, 2014, at 04:56 PM, Glyph Lefkowitz wrote:

I am looking for at least 4 volunteers for a "review rally"
starting on Monday, October 13.  If each of 5 reviewers (the 4
volunteers, plus myself) can review 2 tickets per day for one
week, until Sunday, October 19, we can clear 70 tickets, which
should take care of the existing 58 tickets currently queued
up, plus any that get resubmitted during that week.



1. It's been a while since I helped out.

2. I'm free that week.

3. I could use the karma.



That is all to say, I can help out.



Cheers,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/a2419c67/attachment-0002.html>

From bschollnick at gmail.com  Thu Oct  9 19:33:35 2014
From: bschollnick at gmail.com (Benjamin Schollnick)
Date: Thu, 9 Oct 2014 21:33:35 -0400
Subject: [Twisted-Python] client logic
Message-ID: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>

Im sorry if this is a duplicate?  I sent this earlier, but I dont see it in the archives?

Folks,

Im writing an client using twisted, and Im basing it off the Poetry client from http://krondo.com/wp-content/uploads/2009/08/twisted-intro.html.
I am porting a previous pyserial based client, so Im running into new territory here.

And its working fine, there are two issues" that I am running into.

class WT_Protocol(Protocol):

   tag = ''

   def to_bytes(self, seq):
       """convert a sequence to a bytes type"""
       #
       #   from pyserial.util
       if isinstance(seq, bytes):
           return seq
       elif isinstance(seq, bytearray):
           return bytes(seq)
       elif isinstance(seq, memoryview):
           return seq.tobytes()
       else:
           b = bytearray()
           for item in seq:
               b.append(item)  # this one handles int and str for our emulation and ints for Python 3.x
           return bytes(b)

   def connectionMade(self):
       print "Reseting the network"
       reset = self.to_bytes(packets.network_reset() )
       self.transport.write ( reset )
       self.transport.write ( self.to_bytes(packets.Set_SiteCode(NodeID=255, SC1=0, SC2=0, SC3=0) ))
       self.transport.write ( self.to_bytes(packets.Set_Gain_Packet(NodeID=255, Gain=1) ))    # high gain
       self.transport.write ( self.to_bytes(packets.Set_Protocol_No_Nulls (NetworkID=0, ReceiverID=0, NodeID=1) ))    # high gain
       time.sleep (.5)

Now the client works right now, but Im concerned that I cant figure out how to immediately read for a reply packet from the server.

For example, when I send the Set_SiteCode packet, I may receive a reply.  

But how would that occur in the Twisted framework?  In my testing the dataReceived function is not being called, so I cant trap it there, plus Im not sure how I would figure that logic.

Can anyone suggest a method to do this?

The second question, as far as I can tell, isnt very solvable.  Id like to add a Press Q to quit type logic to the code.  But I dont see a way to do this easily in twisted?  (platform unspecific, but its running Mac OS X / Unix right now).

		- Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141009/ceb99df5/attachment-0002.html>

From _ at habnab.it  Thu Oct  9 20:12:44 2014
From: _ at habnab.it (Aaron Gallagher)
Date: Thu, 09 Oct 2014 19:12:44 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the	race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <m2k34865b7.fsf@ender.habnabit.org>

Glyph Lefkowitz <glyph at twistedmatrix.com> writes:

> I am looking for at least 4 volunteers for a "review rally" starting
> on Monday, October 13. If each of 5 reviewers (the 4 volunteers, plus
> myself) can review 2 tickets per day for one week, until Sunday,
> October 19, we can clear 70 tickets, which should take care of the
> existing 58 tickets currently queued up, plus any that get resubmitted
> during that week.

I'd been planning on getting into doing more reviews, and this is as
good an excuse as any to get started. Monday I'll be travelling, but
I'll try to participate for the rest of the week.



From hs at ox.cx  Thu Oct  9 23:32:50 2014
From: hs at ox.cx (Hynek Schlawack)
Date: Fri, 10 Oct 2014 07:32:50 +0200
Subject: [Twisted-Python] client logic
In-Reply-To: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>
References: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>
Message-ID: <75ff4beb-b8f6-47c0-96a3-bc7d425a590e@Hyneks-iPhone>

Hi Benjamin,

> Im sorry if this is a duplicate? I sent this earlier, but I dont see it in the archives?
>  

I can see it in the archives along with this reply by glyph: http://twistedmatrix.com/pipermail/twisted-python/2014-October/028841.html

h
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/4949d2e9/attachment-0002.html>

From jml at mumak.net  Fri Oct 10 00:21:09 2014
From: jml at mumak.net (Jonathan Lange)
Date: Fri, 10 Oct 2014 06:21:09 +0000
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <m2k34865b7.fsf@ender.habnabit.org>
Message-ID: <CAHZ8tnaFwFt+4j=H1SmytbkACk2mTnfa1cb2-RSFrd_FXcc7Lw@mail.gmail.com>

Sure. I'll do it.

On Fri Oct 10 2014 at 3:13:18 AM Aaron Gallagher <_ at habnab.it> wrote:

> Glyph Lefkowitz <glyph at twistedmatrix.com> writes:
>
> > I am looking for at least 4 volunteers for a "review rally" starting
> > on Monday, October 13. If each of 5 reviewers (the 4 volunteers, plus
> > myself) can review 2 tickets per day for one week, until Sunday,
> > October 19, we can clear 70 tickets, which should take care of the
> > existing 58 tickets currently queued up, plus any that get resubmitted
> > during that week.
>
> I'd been planning on getting into doing more reviews, and this is as
> good an excuse as any to get started. Monday I'll be travelling, but
> I'll try to participate for the rest of the week.
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/56143f78/attachment-0002.html>

From bschollnick at gmail.com  Fri Oct 10 02:55:59 2014
From: bschollnick at gmail.com (Benjamin Schollnick)
Date: Fri, 10 Oct 2014 04:55:59 -0400
Subject: [Twisted-Python] client logic
In-Reply-To: <75ff4beb-b8f6-47c0-96a3-bc7d425a590e@Hyneks-iPhone>
References: <EADCB268-13A7-46D9-9B0C-D1441B7E5F9D@schollnick.net>
 <75ff4beb-b8f6-47c0-96a3-bc7d425a590e@Hyneks-iPhone>
Message-ID: <8C7E6477-B8D9-4364-8B84-F4C0EFE85A94@gmail.com>

> I can see it in the archives along with this reply by glyph: http://twistedmatrix.com/pipermail/twisted-python/2014-October/028841.html

Interesting.  Sorry about that.

I need to confirm this, but I believe I see what is happening now.  Glyphs reply was quite helpful, Ill look into the defers.

Thanks for the help.

> h




From glyph at twistedmatrix.com  Fri Oct 10 20:15:02 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:15:02 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <1412901934.1221022.177272397.1DEDD6FF@webmail.messagingengine.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <1412901934.1221022.177272397.1DEDD6FF@webmail.messagingengine.com>
Message-ID: <3E7299A4-27A9-4842-B2E5-F0667D9D4FB3@twistedmatrix.com>


On Oct 9, 2014, at 5:45 PM, Paul Hummer <paul at eventuallyanyway.com> wrote:

> That is all to say, I can help out.


Thanks Paul, I'm glad to hear it!

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/9beabcf9/attachment-0002.html>

From glyph at twistedmatrix.com  Fri Oct 10 20:15:29 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:15:29 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the	race!
In-Reply-To: <m2k34865b7.fsf@ender.habnabit.org>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <m2k34865b7.fsf@ender.habnabit.org>
Message-ID: <CE8A7F20-1398-47F5-9E32-427645CFAEE1@twistedmatrix.com>


On Oct 9, 2014, at 7:12 PM, Aaron Gallagher <_ at habnab.it> wrote:

> I'd been planning on getting into doing more reviews, and this is as
> good an excuse as any to get started. Monday I'll be travelling, but
> I'll try to participate for the rest of the week.

Every little bit helps - and you can always review 4 tickets on Tuesday to catch up ;-).

Thanks a lot for volunteering!

-g

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/b5bf0984/attachment-0002.html>

From glyph at twistedmatrix.com  Fri Oct 10 20:17:57 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:17:57 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <CAHZ8tnaFwFt+4j=H1SmytbkACk2mTnfa1cb2-RSFrd_FXcc7Lw@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <m2k34865b7.fsf@ender.habnabit.org>
 <CAHZ8tnaFwFt+4j=H1SmytbkACk2mTnfa1cb2-RSFrd_FXcc7Lw@mail.gmail.com>
Message-ID: <9A9C633E-8B5C-44CC-B6D9-93FA6E78EF89@twistedmatrix.com>


On Oct 9, 2014, at 11:21 PM, Jonathan Lange <jml at mumak.net> wrote:

> Sure. I'll do it.

Fantastic.  I much appreciate it.

-g
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/b60c894e/attachment-0002.html>

From glyph at twistedmatrix.com  Fri Oct 10 20:22:43 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 19:22:43 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>


On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:

> Who is with me?!?!

So right now, it looks like the roster is:

me
HawkOwl
Chris Wolfe
Paul Hummer
Aaron Gallagher
Jonathan Lange

This is awesome.  Thanks again to everyone for volunteering.  I am looking forward to a big leap forward in contributor responsiveness next week :-D.

But it would be even more awesome if you added your name to this list!

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/a3d66e82/attachment-0002.html>

From glyph at twistedmatrix.com  Sat Oct 11 00:26:56 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Fri, 10 Oct 2014 23:26:56 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool -
	time to test!
Message-ID: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>

Again as per <https://twistedmatrix.com/trac/wiki/CompatibilityPolicy#ProcedureforExceptionstothisPolicy>, in order to conclude this discussion, I need to provide Twisted users with a branch to test their code against.  Well, now you have it - and as per the policy you have a week from the sending of this message to register any objections :).

The ticket <https://twistedmatrix.com/trac/ticket/2673> is in review now, and the branch is <desynchronize-2673-2>.

Many of the existing tests used some of the compatibility features that we discussed previously, so I just left the existing tests intact.  However, if you need any more compatibility features, please let me know and I can implement them in the branch.  Feel free to reply here, or comment there.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141010/cf07613e/attachment-0002.html>

From weykent at weasyl.com  Sat Oct 11 12:17:17 2014
From: weykent at weasyl.com (weykent)
Date: Sat, 11 Oct 2014 11:17:17 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
	- time to test!
In-Reply-To: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>
References: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>
Message-ID: <3312D584-3630-4F67-A4F4-6DDB0C3A65CC@weasyl.com>

On Oct 10, 2014, at 11:26 PM, Glyph <glyph at twistedmatrix.com> wrote:

> The ticket <https://twistedmatrix.com/trac/ticket/2673> is in review now, and the branch is <desynchronize-2673-2>.

I just tested my threadpool statistics collection code against that branch, and it works perfectly! Thanks a lot for your effort in this branch.




From wolfgang.kde at rohdewald.de  Sat Oct 11 15:30:56 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sat, 11 Oct 2014 23:30:56 +0200
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
Message-ID: <27709999.CuWcHncEeD@i5>

Hi,

while trying to isolate a bug in my app, I found some strange
differences between the implementations of remote_* and perspective_*.

1. in pb.Broker.serialize(), those attributes are set and restored:
   jellyMethod, jellyArgs, jellyKw. Within twisted
   Those attributes are not used anywhere. I grepped, and I ran the
   test suite without those. Is there some code outside of twisted
   using this? What for? Or is there a need for avoiding garbage
   collection? (which would need some explanation).

   My theory is that it was forgotten to remove them when doing
   svn commit 1448: Before, they were actually used in 
   _NetJellier._jelly_instance, but no more after this commit.


2. Those implementations differ:
	remote_*: return broker.serialize(state, self.perspective)
   	perspective_*: return broker.serialize(state, self, method, args, kw)
   	view_*: return broker.serialize(state, self.perspective, method, args, kw)
   	observe_*: return broker.serialize(state, None, method, args, kw)

   Can you please explain why remote_* is implemented differently?
   This goes back to before the first import to svn, so I cannot 
   browse the history.


3. They all raise AttributeError for undefined method except remote_*
   which raises MethodNotFound. Both are not documented in the API.
   Could this be unified to MethodNotFound?

   My theory is that svn commit 13473 was incomplete. Commit message was:

	Raise NoSuchMethod instead of AttributeError when call is made to remote_
   	method that doesn't exist


-- 
Wolfgang



From wolfgang.kde at rohdewald.de  Sat Oct 11 15:34:22 2014
From: wolfgang.kde at rohdewald.de (Wolfgang Rohdewald)
Date: Sat, 11 Oct 2014 23:34:22 +0200
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
In-Reply-To: <27709999.CuWcHncEeD@i5>
References: <27709999.CuWcHncEeD@i5>
Message-ID: <21093377.tTsfqhGN2B@i5>

Am Samstag, 11. Oktober 2014, 23:30:56 schrieb Wolfgang Rohdewald:
> 2. Those implementations differ:
>         remote_*: return broker.serialize(state, self.perspective)
>         perspective_*: return broker.serialize(state, self, method, args, kw)
>         view_*: return broker.serialize(state, self.perspective, method, args, kw)
>         observe_*: return broker.serialize(state, None, method, args, kw)
> 
>    Can you please explain why remote_* is implemented differently?
>    This goes back to before the first import to svn, so I cannot 
>    browse the history.

I was unclear, what I want to know is only why args, kw are not passed for remote_*. 

-- 
Wolfgang



From glyph at twistedmatrix.com  Sat Oct 11 21:16:06 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Sat, 11 Oct 2014 20:16:06 -0700
Subject: [Twisted-Python] INCOMPATIBLE CHANGE: twisted.python.threadpool
	- time to test!
In-Reply-To: <3312D584-3630-4F67-A4F4-6DDB0C3A65CC@weasyl.com>
References: <C94F4AC7-BB7A-4D3C-9830-0FADD7092ACC@twistedmatrix.com>
 <3312D584-3630-4F67-A4F4-6DDB0C3A65CC@weasyl.com>
Message-ID: <DF28C4A5-940F-4455-BFD3-43E8D514F421@twistedmatrix.com>

On Oct 11, 2014, at 11:17 AM, weykent <weykent at weasyl.com> wrote:

> On Oct 10, 2014, at 11:26 PM, Glyph <glyph at twistedmatrix.com> wrote:
> 
>> The ticket <https://twistedmatrix.com/trac/ticket/2673> is in review now, and the branch is <desynchronize-2673-2>.
> 
> I just tested my threadpool statistics collection code against that branch, and it works perfectly! Thanks a lot for your effort in this branch.

Thank you for testing it so promptly!

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141011/7d246b4a/attachment-0002.html>

From trac at twistedmatrix.com  Sun Oct 12 00:05:15 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 12 Oct 2014 06:05:15 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1413093915.73.6944052177967651045@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141012/54ec5abd/attachment-0002.html>

From jmp at justinmp.org  Mon Oct 13 06:46:32 2014
From: jmp at justinmp.org (Justin Mazzola Paluska)
Date: Mon, 13 Oct 2014 08:46:32 -0400
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
Message-ID: <CAAk1W6ir7M9Jbx3FfX=BsgAxsvx5uXgMQGqWnv4ag9ZPnzgOhg@mail.gmail.com>

On 10/09/2014 06:56 PM, Glyph Lefkowitz wrote:

On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.

...

I am looking for at least 4 volunteers for a "review rally" starting on
Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself)
can review 2 tickets per day for one week, until Sunday, October 19, we can
clear 70 tickets, which should take care of the existing 58 tickets
currently queued up, plus any that get resubmitted during that week.


I'm curious if any Boston-area Twisted developers or reviewers are going to
be going to the Boston Python User Group Meetup tomorrow [Tuesday] at MS
NERD.  I ask because I'd like to get into helping out with Twistedmaybe by
joining the review rallyand it's always more fun to get started with
others.

Either way, I am interested in reviewing code, if there is a way for a
long-time Twisted user, but list lurker, to get started reviewing code.
     --Justin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141013/dc8212b4/attachment-0002.html>

From jmp at justinmp.com  Mon Oct 13 06:52:15 2014
From: jmp at justinmp.com (Justin Mazzola Paluska)
Date: Mon, 13 Oct 2014 08:52:15 -0400
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <CAAk1W6ir7M9Jbx3FfX=BsgAxsvx5uXgMQGqWnv4ag9ZPnzgOhg@mail.gmail.com>
References: <CAAk1W6ir7M9Jbx3FfX=BsgAxsvx5uXgMQGqWnv4ag9ZPnzgOhg@mail.gmail.com>
Message-ID: <CAAk1W6iefXk=mx7xqcKngvLOrFqCxjbtqdgTem=vTUPbEj52Tw@mail.gmail.com>

And sending from the correct domain this time...
     --Justin

On Mon, Oct 13, 2014 at 8:46 AM, Justin Mazzola Paluska <jmp at justinmp.org>
wrote:

>
> On 10/09/2014 06:56 PM, Glyph Lefkowitz wrote:
>
> On November 1, ClusterHQ is going to be hosting a Twisted sprint in Boston.
>
> ...
>
> I am looking for at least 4 volunteers for a "review rally" starting on
> Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus myself)
> can review 2 tickets per day for one week, until Sunday, October 19, we can
> clear 70 tickets, which should take care of the existing 58 tickets
> currently queued up, plus any that get resubmitted during that week.
>
>
> I'm curious if any Boston-area Twisted developers or reviewers are going
> to be going to the Boston Python User Group Meetup tomorrow [Tuesday] at MS
> NERD.  I ask because I'd like to get into helping out with Twistedmaybe by
> joining the review rallyand it's always more fun to get started with
> others.
>
> Either way, I am interested in reviewing code, if there is a way for a
> long-time Twisted user, but list lurker, to get started reviewing code.
>      --Justin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141013/f50f3cdf/attachment-0002.html>

From kevin.horn at gmail.com  Mon Oct 13 10:31:13 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Mon, 13 Oct 2014 11:31:13 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
Message-ID: <CA+U=zK2tB+TNmDizgjgCNrCUxS8MOu-wDUEE_hJvSXom4Ev79g@mail.gmail.com>

I'll see if I can crank through a couple of tickets, but this week is...not
a good week for me.

Of course, Twisted might be a good distraction from work annoyances.

It's unlikely I'll get through more than a handful over the week, but I
figure a handful is better than none.

On Fri, Oct 10, 2014 at 9:22 PM, Glyph <glyph at twistedmatrix.com> wrote:

>
> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>
> wrote:
>
> Who is with me?!?!
>
>
> So right now, it looks like the roster is:
>
>
>    - me
>    - HawkOwl
>    - Chris Wolfe
>    - Paul Hummer
>    - Aaron Gallagher
>    - Jonathan Lange
>
>
> This is awesome.  Thanks again to everyone for volunteering.  I am looking
> forward to a big leap forward in contributor responsiveness next week :-D.
>
> But it would be even more awesome if you added *your* name to this list!
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141013/8491aca8/attachment-0002.html>

From jon at multani.info  Mon Oct 13 11:07:52 2014
From: jon at multani.info (Jonathan Ballet)
Date: Mon, 13 Oct 2014 19:07:52 +0200
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
Message-ID: <543C06E8.3000207@multani.info>

On 10/10/2014 12:56 AM, Glyph Lefkowitz wrote:
>
> I am looking for at least 4 volunteers for a "review rally" starting on
> Monday, October 13.  If each of 5 reviewers (the 4 volunteers, plus
> myself) can review 2 tickets per day for one week, until Sunday, October
> 19, we can clear 70 tickets, which should take care of the existing 58
> tickets currently queued up, plus any that get resubmitted during that week.
>
> While some volunteers should be Twisted committers since we have plenty
> of pending contributions from non-committers that need review, there are
> at least 11 tickets in review from core contributors right now, so
> non-committer volunteers are equally appreciated!

Although I'm a non-committer, I'll pop-in during the week :)
I wanted to give Adiroiban's cleanup tickets a review anyway.

  Jonathan (multani)



From Axel.Rau at chaos1.de  Tue Oct 14 00:02:01 2014
From: Axel.Rau at chaos1.de (Axel Rau)
Date: Tue, 14 Oct 2014 08:02:01 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
Message-ID: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>

I have adapted t.c.s.cftp and one of the ssh examples to transfer files to a remote host and than execute some commands there.
Both has to be done for several remote hosts in sequence.
Start of the ssh session has to wait until the cftp sessions are complete and after that has completed, the cftp session for the next host has to be started . . .

The cftp part begins so:

def distributeStuff(host, tasks):
    . . .
    doConnect(reactor, options, tasks)


def doConnect(reactor, options, tasks):
    . . .
    conn.tasks = tasks
    vhk = verifyHostKey
    uao = SSHUserAuthClient(options['user'], options, conn)
    connect(host, port, options, vhk, uao).addErrback(_ebExit)

class SSHConn(connection.SSHConnection):
    def serviceStarted(self):
        self.openChannel(SSHSession())

I played with inlineCallbacks but could not find a point where to place my yielded function.
I tried to overwrite channelClosed in SSHConn:

    def channelClosed(self, channel):
        super(SSHConn, self).channelClosed(channel)
        if len(self.channels) == 0:
            print [Last channel closed.]'
            # open ssh ssession:
            . . .
 but that gave an unhandled error:
2014-10-14 07:54:34+0200 [SSHService ssh-connection on SSHClientTransport,client] Unhandled Error
	Traceback (most recent call last):
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/internet/tcp.py", line 214, in doRead
	    return self._dataReceived(data)
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/internet/tcp.py", line 220, in _dataReceived
	    rval = self.protocol.dataReceived(data)
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/conch/ssh/transport.py", line 461, in dataReceived
	    self.dispatchMessage(messageNum, packet[1:])
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/conch/ssh/transport.py", line 483, in dispatchMessage
	    messageNum, payload)
	--- <exception caught here> ---
	  File "/usr/local/py_venv/p27/lib/python2.7/site-packages/twisted/python/log.py", line 88, in callWithLogger
	    return callWithContext({"system": lp}, func, *args, **kw)
	  File /usr/local/py_venv/p27/lib/python2.7/site-p
(bt stopped here).

Please advise!

Thanks, Axel

PGP-Key:29E99DD6   +49 151 2300 9283   computing @ chaos claudius




From nispray at gmail.com  Tue Oct 14 02:06:13 2014
From: nispray at gmail.com (Ni Wesley)
Date: Tue, 14 Oct 2014 16:06:13 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
Message-ID: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>

Hi all,
   I don't know if here is the right place.
I hit a problem with pyapns which is based on twisted.

So, I get code from our parter and setup up env involving interacting with
APNS for IOS pushing work.

I hit the problem that twisted hangs after a while's idle, I mean, when I
start twisted with command:
twistd -r epoll web --class=pyapns.server.APNSServer --port=7077

Then, raise an notification to IOS device by pyapns(
https://github.com/samuraisam/pyapns),it's OK.

However, if I let the system alone for a while, then, new raised
notifications are all failed, what's more, if now I kill twisted process,
and restart with the above command again, push operations are successful
again.

I use python2.7 and twisted 14.0.0 on Redhat6.4.

So, anyone has hit this problem?

Thanks.
Wesley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141014/a32f593e/attachment-0002.html>

From jonas.brunsgaard at gmail.com  Tue Oct 14 03:14:30 2014
From: jonas.brunsgaard at gmail.com (Jonas Brunsgaard)
Date: Tue, 14 Oct 2014 11:14:30 +0200
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
Message-ID: <CACVXvXrjT69OBZVRE2TKDV4UmtRn+YbVtY-b2b-YVC5LKsk5EA@mail.gmail.com>

Hey  Ni

I can not relate to your specific problem. But where I work, we have a
pyapns server in place for push notifications. What we have learned is
that the v50 branch of the repo is much more stable than the code in
master. So maybe give v50 a try, notice that a new rest api is used in
v50.



From nispray at gmail.com  Tue Oct 14 05:32:34 2014
From: nispray at gmail.com (Ni Wesley)
Date: Tue, 14 Oct 2014 19:32:34 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACVXvXrjT69OBZVRE2TKDV4UmtRn+YbVtY-b2b-YVC5LKsk5EA@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <CACVXvXrjT69OBZVRE2TKDV4UmtRn+YbVtY-b2b-YVC5LKsk5EA@mail.gmail.com>
Message-ID: <CACL3mTCXYAW6UEXHvOdnTNLKzqnBiDrekJJ7DQ-fZ-o=Uo_CGw@mail.gmail.com>

Hi,
   Pyapns has v50?
Could you please put a link here?

Thanks.

Wesley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141014/5fb30b91/attachment-0002.html>

From exarkun at twistedmatrix.com  Tue Oct 14 06:22:19 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Tue, 14 Oct 2014 12:22:19 -0000
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
References: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
Message-ID: <20141014122219.5924.1425058572.divmod.xquotient.1@top>

On 06:02 am, axel.rau at chaos1.de wrote:
>I have adapted t.c.s.cftp and one of the ssh examples to transfer files 
>to a remote host and than execute some commands there.
>Both has to be done for several remote hosts in sequence.
>Start of the ssh session has to wait until the cftp sessions are 
>complete and after that has completed, the cftp session for the next 
>host has to be started . . .
>
>The cftp part begins so:

We might need more to go on.  Do you have a complete, minimal example? 
(See http://sscce.org/)

Jean-Paul



From Axel.Rau at Chaos1.DE  Tue Oct 14 09:07:28 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Tue, 14 Oct 2014 17:07:28 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <20141014122219.5924.1425058572.divmod.xquotient.1@top>
References: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
 <20141014122219.5924.1425058572.divmod.xquotient.1@top>
Message-ID: <0E8CD855-9E6A-4E7B-87EC-7D7A0BB6AFAF@Chaos1.DE>


Am 14.10.2014 um 14:22 schrieb exarkun at twistedmatrix.com:

> 
> We might need more to go on.  Do you have a complete, minimal example? (See http://sscce.org/)
The attached zip archive  
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ml.zip
Type: application/zip
Size: 3099 bytes
Desc: not available
URL: </pipermail/twisted-python/attachments/20141014/5e35dacd/attachment-0002.zip>
-------------- next part --------------
 contains:
	sftp.py, ssh.py and test.py
To run it, you need to prepare some files in /tmp and select a host to which you have ssh access via public key.
If you comment out the call to ssh.executeRemoteCommands in test, sftp.distributeFiles should complete successfully if you run test.
Commenting out the call to sftp.distributeFiles, allows the call to ssh.executeRemoteCommands to do its work, but it does not exit.

Axel

---
PGP-Key:29E99DD6   +49 151 2300 9283   computing @ chaos claudius


From glyph at twistedmatrix.com  Tue Oct 14 16:38:06 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 14 Oct 2014 15:38:06 -0700
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
Message-ID: <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>


On Oct 14, 2014, at 1:06 AM, Ni Wesley <nispray at gmail.com> wrote:

> Hi all,
>    I don't know if here is the right place. 
> I hit a problem with pyapns which is based on twisted.
> 
> So, I get code from our parter and setup up env involving interacting with APNS for IOS pushing work.
> 
> I hit the problem that twisted hangs after a while's idle, I mean, when I start twisted with command: 
> twistd -r epoll web --class=pyapns.server.APNSServer --port=7077
> 
> Then, raise an notification to IOS device by pyapns(https://github.com/samuraisam/pyapns),it's OK.
> 
> However, if I let the system alone for a while, then, new raised notifications are all failed, what's more, if now I kill twisted process, and restart with the above command again, push operations are successful again.
> 
> I use python2.7 and twisted 14.0.0 on Redhat6.4.
> 
> So, anyone has hit this problem?

pyapns uses threads very heavily, and so my guess would be most likely that you're calling a Twisted API from a non-main thread.  Without seeing the code it's impossible to say.

There's some Twisted-based apache2-licensed APNS integration code available here: <https://trac.calendarserver.org/browser/CalendarServer/trunk/calendarserver/push/applepush.py>.  Unfortunately it is a little bound up with internal implementation details of calendar server, but it's almost generic and it might be worth the effort to extract, since it will almost certainly give you more robust behavior than integrating pyapns and Twisted.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141014/9c0e3595/attachment-0002.html>

From glyph at twistedmatrix.com  Tue Oct 14 16:41:38 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 14 Oct 2014 15:41:38 -0700
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
In-Reply-To: <27709999.CuWcHncEeD@i5>
References: <27709999.CuWcHncEeD@i5>
Message-ID: <1A307A15-A9FB-4D2E-B270-921CFB132F7C@twistedmatrix.com>


On Oct 11, 2014, at 2:30 PM, Wolfgang Rohdewald <wolfgang.kde at rohdewald.de> wrote:

>   Can you please explain why remote_* is implemented differently?
>   This goes back to before the first import to svn, so I cannot 
>   browse the history.

I honestly have no idea.  If you think this is buggy and you'd like to change it, please feel free to propose a change which does so, as long as it's within the bounds of <https://twistedmatrix.com/trac/wiki/CompatibilityPolicy>.

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141014/9561eb1c/attachment-0002.html>

From glyph at twistedmatrix.com  Tue Oct 14 16:42:20 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Tue, 14 Oct 2014 15:42:20 -0700
Subject: [Twisted-Python] spread: differences between remote_ and
	perspective_ needing an explanation
In-Reply-To: <27709999.CuWcHncEeD@i5>
References: <27709999.CuWcHncEeD@i5>
Message-ID: <7AC4EFC1-DF03-48F3-BF3F-0377AC2D906D@twistedmatrix.com>


On Oct 11, 2014, at 2:30 PM, Wolfgang Rohdewald <wolfgang.kde at rohdewald.de> wrote:

> 3. They all raise AttributeError for undefined method except remote_*
>   which raises MethodNotFound. Both are not documented in the API.
>   Could this be unified to MethodNotFound?

Simply changing this is not OK, because code may be relying upon the existing behavior and we can't just break it.  Again, see <https://twistedmatrix.com/trac/wiki/CompatibilityPolicy>.

That said, we could expose a new public name (something other than Broker, for example) which fixes these bugs, then deprecate the existing name.

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141014/b172e46e/attachment-0002.html>

From nispray at gmail.com  Tue Oct 14 19:27:18 2014
From: nispray at gmail.com (Ni Wesley)
Date: Wed, 15 Oct 2014 09:27:18 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
Message-ID: <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>

Hi,
   The code is from our partner, so currently I won't change their code
until I address this issue.
The used pyapns code is here:  https://github.com/samuraisam/pyapns
And start twisted service by command :  twistd -r epoll web
--class=pyapns.server.APNSServer --port=7077

And start twisted service by command :  twistd -r epoll web
--class=pyapns.server.APNSServer --port=7077

And here is function of our code to do push action:
def __send_push(push_app_id, org_apns_cert, device_apns_token, payload):
    """
    This method will send the actual push to the device, it will first try
to send assuming we already have
    provisioned this org cert, if it fails if will provision, this way we
don't create too many connections
    """
    pyapns.configure({'HOST': MDM_PYAPNS_HOST})
    try:
        pyapns.notify(push_app_id, device_apns_token, payload)
    except UnknownAppID as e:
        # this is an expected exception where connection to this cert is
killed or we are sending this push
        # for the first time, in this case we need to provision first and
then try notify again
        current_app.logger.info(u"Couldn't find app_id for this push, retry
")
        try:
            pyapns.provision(push_app_id, org_apns_cert, 'production')
            pyapns.notify(push_app_id, device_apns_token, payload)
        except Exception as exc:
            current_app.logger.exception(exc)
    except Exception as exc:
        current_app.logger.exception(exc)

Could you please help have a look?

Thanks.
Wesley

2014-10-15 6:38 GMT+08:00 Glyph Lefkowitz <glyph at twistedmatrix.com>:

>
> On Oct 14, 2014, at 1:06 AM, Ni Wesley <nispray at gmail.com> wrote:
>
> Hi all,
>    I don't know if here is the right place.
> I hit a problem with pyapns which is based on twisted.
>
> So, I get code from our parter and setup up env involving interacting with
> APNS for IOS pushing work.
>
> I hit the problem that twisted hangs after a while's idle, I mean, when I
> start twisted with command:
> twistd -r epoll web --class=pyapns.server.APNSServer --port=7077
>
> Then, raise an notification to IOS device by pyapns(
> https://github.com/samuraisam/pyapns),it's OK.
>
> However, if I let the system alone for a while, then, new raised
> notifications are all failed, what's more, if now I kill twisted process,
> and restart with the above command again, push operations are successful
> again.
>
> I use python2.7 and twisted 14.0.0 on Redhat6.4.
>
> So, anyone has hit this problem?
>
>
> pyapns uses threads very heavily, and so my guess would be most likely
> that you're calling a Twisted API from a non-main thread.  Without seeing
> the code it's impossible to say.
>
> There's some Twisted-based apache2-licensed APNS integration code
> available here: <
> https://trac.calendarserver.org/browser/CalendarServer/trunk/calendarserver/push/applepush.py>.
> Unfortunately it is a little bound up with internal implementation details
> of calendar server, but it's *almost* generic and it might be worth the
> effort to extract, since it will almost certainly give you more robust
> behavior than integrating pyapns and Twisted.
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
nispray
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141015/9da4b907/attachment-0002.html>

From glyph at twistedmatrix.com  Wed Oct 15 23:39:40 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Wed, 15 Oct 2014 22:39:40 -0700
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
 <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
Message-ID: <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>


> On Oct 14, 2014, at 6:27 PM, Ni Wesley <nispray at gmail.com> wrote:
> 
> Hi,
>    The code is from our partner, so currently I won't change their code until I address this issue.
> The used pyapns code is here:  https://github.com/samuraisam/pyapns <>
> And start twisted service by command : twistd -r epoll web --class=pyapns.server.APNSServer --port=7077 <>
> Could you please help have a look?

OK, you made me curious ;).

I looked through the code, and as it stands, I doubt my original hypothesis (a threading problem) is correct.  Threads are used only in the client talking to the pyapns server, not the pyapns server's client talking to APNS, so they're probably not interfering with it.

As far as I can tell, the ReconnectingClientFactory is set up properly.  Have you looked at the logs?  The one possibility I can think of just from examining the code is that the log messages before calling up to ReconnectingClientFactory.clientConnectionLost are raising an exception, causing the reconnection not to proceed.  That would most likely show a traceback in the logs, though.

<https://github.com/samuraisam/pyapns/blob/master/pyapns/server.py#L157-L164 <https://github.com/samuraisam/pyapns/blob/master/pyapns/server.py#L157-L164>>

Any clue?

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141015/7c07ca90/attachment-0002.html>

From nispray at gmail.com  Thu Oct 16 00:42:51 2014
From: nispray at gmail.com (Ni Wesley)
Date: Thu, 16 Oct 2014 14:42:51 +0800
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
 <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
 <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>
Message-ID: <CACL3mTB_TReNUQCQT=PK6-h1hUVH1+JEMHCMm-DtOxQPNVSiEQ@mail.gmail.com>

I got the point.
server.py:
def write(self, notifications):
    "Connect to the APNS service and send notifications"
    if True: #not self.factory:
      log.msg('APNSService write (connecting)')
      with open('/tmp/wniapns.log','a') as f:
          f.write("#"*20+"\n")
          f.write("apns server1\n")
          f.write("#"*20+"\n")
      server, port = ((APNS_SERVER_SANDBOX_HOSTNAME
                      if self.environment == 'sandbox'
                      else APNS_SERVER_HOSTNAME), APNS_SERVER_PORT)
      self.factory = self.clientProtocolFactory()
      context = self.getContextFactory()
      reactor.connectSSL(server, port, self.factory, context)

    client = self.factory.clientProtocol
   * if client:*
      with open('/tmp/wniapns.log','a') as f:
          f.write("#"*20+"\n")
          f.write("apns server2\n")
          f.write("#"*20+"\n")
      return client.sendMessage(notifications)
    else:
Problem is for twice push to one device, client is not None the second
time, code goes here and error then.

BTW, what I wanna ask is where is the default log file? I didn't see any
exception raised.

I haven't used pyapns and twisted before, I see twisted has lines like
log.msg("xx"), where is the default log file?

Thanks.
Wesley

2014-10-16 13:39 GMT+08:00 Glyph <glyph at twistedmatrix.com>:

>
> On Oct 14, 2014, at 6:27 PM, Ni Wesley <nispray at gmail.com> wrote:
>
> Hi,
>    The code is from our partner, so currently I won't change their code
> until I address this issue.
> The used pyapns code is here:  https://github.com/samuraisam/pyapns
> And start twisted service by command :  twistd -r epoll web
> --class=pyapns.server.APNSServer --port=7077
>
>
> Could you please help have a look?
>
>
> OK, you made me curious ;).
>
> I looked through the code, and as it stands, I doubt my original
> hypothesis (a threading problem) is correct.  Threads are used only in the
> client talking to the pyapns server, not the pyapns server's client talking
> to APNS, so they're probably not interfering with it.
>
> As far as I can tell, the ReconnectingClientFactory is set up properly.
> Have you looked at the logs?  The one possibility I can think of just from
> examining the code is that the log messages before calling up to
> ReconnectingClientFactory.clientConnectionLost are raising an exception,
> causing the reconnection not to proceed.  That would most likely show a
> traceback in the logs, though.
>
> <
> https://github.com/samuraisam/pyapns/blob/master/pyapns/server.py#L157-L164
> >
>
> Any clue?
>
> -glyph
>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
nispray
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141016/0d49ad2c/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct 16 01:52:03 2014
From: glyph at twistedmatrix.com (Glyph)
Date: Thu, 16 Oct 2014 00:52:03 -0700
Subject: [Twisted-Python] Call For Participation: a review rally before
	the race!
In-Reply-To: <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
Message-ID: <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>




On Oct 10, 2014, at 7:22 PM, Glyph <glyph at twistedmatrix.com> wrote:

> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com> wrote:
> 
>> Who is with me?!?!
> 
> So right now, it looks like the roster is:
> 
> me
> HawkOwl
> Chris Wolfe
> Paul Hummer
> Aaron Gallagher
> Jonathan Lange
> 
> This is awesome.  Thanks again to everyone for volunteering.  I am looking forward to a big leap forward in contributor responsiveness next week :-D.

We're about halfway through the week, so I thought it would be a good opportunity to check in.  Querying Kenaan's declarations from my IRC logs (because I'm lazy and didn't really want to dig into the highscores code to go to the real database), I see:

2014-10-13 11:57:44 hawkowl reviewed <https://tm.tl/#7000> - Fix pyflakes for web (assigned to adiroiban)
2014-10-13 12:29:44 hawkowl reviewed <https://tm.tl/#7229> - Add Travis CI configration file (assigned to hawkowl)
2014-10-13 13:41:58 hawkowl reviewed <https://tm.tl/#7083> - Update echoserv_ssl.py to use react (assigned to hawkowl)
2014-10-14 06:57:01 glyph reviewed <https://tm.tl/#6686> - twisted.web.client.readBody Deferred should be cancellable (assigned to mithrandi)
2014-10-14 07:45:23 glyph reviewed <https://tm.tl/#7015> - Fix iosim so that it only declares it implements ITLSTransport if pyOpenSSL is available (assigned to adiroiban)
2014-10-14 07:47:25 glyph reviewed <https://tm.tl/#7679> - __traceback__ for spread.pb.CopyableFailure received by a Python3 process (unassigned)
2014-10-14 07:54:16 glyph reviewed <https://tm.tl/#7626> - file is not defined in python 3.4 (assigned to wolfgang61)
2014-10-14 10:20:07 hawkowl reviewed <https://tm.tl/#7680> - Improve test stability of t.w.test.ContentDecoderAgentTests.test_existingHeaders (assigned to hawkowl)
2014-10-14 12:08:18 multani reviewed <https://tm.tl/#7007> - Fix pyflakes for twisted/test (unassigned)
2014-10-14 14:29:26 hynek reviewed <https://tm.tl/#7008> - Fix pyflakes for remaining core (assigned to adiroiban)
2014-10-14 14:58:46 hawkowl reviewed <https://tm.tl/#6395> - Deprecate twisted.words.protocols.msn (assigned to hawkowl)
2014-10-14 21:35:37 herrwolfe reviewed <https://tm.tl/#6686> - twisted.web.client.readBody Deferred should be cancellable (assigned to mithrandi)
2014-10-15 04:48:24 habnabit reviewed <https://tm.tl/#7252> - topy identifies many many typos in twisted (assigned to Alex)
2014-10-15 04:55:51 habnabit reviewed <https://tm.tl/#7252> - topy identifies many many typos in twisted (assigned to habnabit)
2014-10-15 05:23:28 habnabit reviewed <https://tm.tl/#4398> - PBServerFactory should support plain password credentials (assigned to spalax)
2014-10-15 07:34:52 glyph reviewed <https://tm.tl/#5704> - mkdir -p for FilePath (assigned to joelverhagen)
2014-10-15 08:23:33 glyph reviewed <https://tm.tl/#6951> - twisted.web.static.File should allow customizing the ForbiddenResource (assigned to adiroiban)
2014-10-16 06:56:34 glyph reviewed <https://tm.tl/#6686> - twisted.web.client.readBody Deferred should be cancellable (assigned to mithrandi)
2014-10-16 07:33:44 glyph reviewed <https://tm.tl/#7295> - howto: pb-usage does not adhere to style guide (assigned to danielsank)

This is a fairly strong showing - the queue is down to 44 now, down from 58 when this was announced, which is a significant dent - but it does look like we have a little catching up to do!  I would particularly like to nudge Paul and Jonathan to throw their respective hats into the ring, since it looks like we don't have any reviews from them in the official rally period just yet :-).  Sorry if I missed something because this may not be the most reliable data source!

Thanks everyone,

-glyph
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141016/79791435/attachment-0002.html>

From jml at mumak.net  Thu Oct 16 02:01:52 2014
From: jml at mumak.net (Jonathan Lange)
Date: Thu, 16 Oct 2014 08:01:52 +0000
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
 <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>
Message-ID: <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>

Don't worry, I know I need to do reviews. Have just been running into
intermittent test failures and a local dev environment snafu.

On Thu Oct 16 2014 at 8:52:58 AM Glyph <glyph at twistedmatrix.com> wrote:

>
>
>
> On Oct 10, 2014, at 7:22 PM, Glyph <glyph at twistedmatrix.com> wrote:
>
> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>
> wrote:
>
> Who is with me?!?!
>
>
> So right now, it looks like the roster is:
>
>
>    - me
>    - HawkOwl
>    - Chris Wolfe
>    - Paul Hummer
>    - Aaron Gallagher
>    - Jonathan Lange
>
>
> This is awesome.  Thanks again to everyone for volunteering.  I am looking
> forward to a big leap forward in contributor responsiveness next week :-D.
>
>
> We're about halfway through the week, so I thought it would be a good
> opportunity to check in.  Querying Kenaan's declarations from my IRC logs
> (because I'm lazy and didn't really want to dig into the highscores code to
> go to the real database), I see:
>
> 2014-10-13 11:57:44 hawkowl reviewed <https://tm.tl/#7000> - Fix pyflakes
> for web (assigned to adiroiban)
> 2014-10-13 12:29:44 hawkowl reviewed <https://tm.tl/#7229> - Add Travis
> CI configration file (assigned to hawkowl)
> 2014-10-13 13:41:58 hawkowl reviewed <https://tm.tl/#7083> - Update
> echoserv_ssl.py to use react (assigned to hawkowl)
> 2014-10-14 06:57:01 glyph reviewed <https://tm.tl/#6686>
> - twisted.web.client.readBody Deferred should be cancellable (assigned to
> mithrandi)
> 2014-10-14 07:45:23 glyph reviewed <https://tm.tl/#7015> - Fix iosim so
> that it only declares it implements ITLSTransport if pyOpenSSL is available
> (assigned to adiroiban)
> 2014-10-14 07:47:25 glyph reviewed <https://tm.tl/#7679> - __traceback__
> for spread.pb.CopyableFailure received by a Python3 process (unassigned)
> 2014-10-14 07:54:16 glyph reviewed <https://tm.tl/#7626> - file is not
> defined in python 3.4 (assigned to wolfgang61)
> 2014-10-14 10:20:07 hawkowl reviewed <https://tm.tl/#7680> - Improve test
> stability of t.w.test.ContentDecoderAgentTests.test_existingHeaders
> (assigned to hawkowl)
> 2014-10-14 12:08:18 multani reviewed <https://tm.tl/#7007> - Fix pyflakes
> for twisted/test (unassigned)
> 2014-10-14 14:29:26 hynek reviewed <https://tm.tl/#7008> - Fix pyflakes
> for remaining core (assigned to adiroiban)
> 2014-10-14 14:58:46 hawkowl reviewed <https://tm.tl/#6395> -
> Deprecate twisted.words.protocols.msn (assigned to hawkowl)
> 2014-10-14 21:35:37 herrwolfe reviewed <https://tm.tl/#6686>
> - twisted.web.client.readBody Deferred should be cancellable (assigned to
> mithrandi)
> 2014-10-15 04:48:24 habnabit reviewed <https://tm.tl/#7252> - topy
> identifies many many typos in twisted (assigned to Alex)
> 2014-10-15 04:55:51 habnabit reviewed <https://tm.tl/#7252> - topy
> identifies many many typos in twisted (assigned to habnabit)
> 2014-10-15 05:23:28 habnabit reviewed <https://tm.tl/#4398> -
> PBServerFactory should support plain password credentials (assigned to
> spalax)
> 2014-10-15 07:34:52 glyph reviewed <https://tm.tl/#5704> - mkdir -p for
> FilePath (assigned to joelverhagen)
> 2014-10-15 08:23:33 glyph reviewed <https://tm.tl/#6951> -
> twisted.web.static.File should allow customizing the ForbiddenResource
> (assigned to adiroiban)
> 2014-10-16 06:56:34 glyph reviewed <https://tm.tl/#6686>
> - twisted.web.client.readBody Deferred should be cancellable (assigned to
> mithrandi)
> 2014-10-16 07:33:44 glyph reviewed <https://tm.tl/#7295> - howto:
> pb-usage does not adhere to style guide (assigned to danielsank)
>
> This is a fairly strong showing - the queue is down to 44 now, down from
> 58 when this was announced, which is a significant dent - but it does look
> like we have a little catching up to do!  I would particularly like to
> nudge Paul and Jonathan to throw their respective hats into the ring, since
> it looks like we don't have any reviews from them in the official rally
> period just yet :-).  Sorry if I missed something because this may not be
> the most reliable data source!
>
> Thanks everyone,
>
> -glyph
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141016/d5e71dd0/attachment-0002.html>

From nhw at me.com  Thu Oct 16 07:05:09 2014
From: nhw at me.com (Nick Williams)
Date: Thu, 16 Oct 2014 18:35:09 +0530
Subject: [Twisted-Python] Spambayes problem with trac
Message-ID: <71AAF4AF-18BA-4913-9C7A-EF2574409609@me.com>

Is there a secret method to get trac to accept a new ticket? I can't get the spam recognition percentage below 85% for my bug report, which looks very much unlike any spam I've ever seen. 




From kevin.horn at gmail.com  Thu Oct 16 08:50:10 2014
From: kevin.horn at gmail.com (Kevin Horn)
Date: Thu, 16 Oct 2014 09:50:10 -0500
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
In-Reply-To: <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
 <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>
 <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>
Message-ID: <CA+U=zK0gq87d9i-VPxWEOxYzp1mEsbgWqDtEo_B+mxk8ou_3mQ@mail.gmail.com>

I'm afraid I'm slacking as well.  Worksplosion.

On Thu, Oct 16, 2014 at 3:01 AM, Jonathan Lange <jml at mumak.net> wrote:

> Don't worry, I know I need to do reviews. Have just been running into
> intermittent test failures and a local dev environment snafu.
>
> On Thu Oct 16 2014 at 8:52:58 AM Glyph <glyph at twistedmatrix.com> wrote:
>
>>
>>
>>
>> On Oct 10, 2014, at 7:22 PM, Glyph <glyph at twistedmatrix.com> wrote:
>>
>> On Oct 9, 2014, at 3:56 PM, Glyph Lefkowitz <glyph at twistedmatrix.com>
>> wrote:
>>
>> Who is with me?!?!
>>
>>
>> So right now, it looks like the roster is:
>>
>>
>>    - me
>>    - HawkOwl
>>    - Chris Wolfe
>>    - Paul Hummer
>>    - Aaron Gallagher
>>    - Jonathan Lange
>>
>>
>> This is awesome.  Thanks again to everyone for volunteering.  I am
>> looking forward to a big leap forward in contributor responsiveness next
>> week :-D.
>>
>>
>> We're about halfway through the week, so I thought it would be a good
>> opportunity to check in.  Querying Kenaan's declarations from my IRC logs
>> (because I'm lazy and didn't really want to dig into the highscores code to
>> go to the real database), I see:
>>
>> 2014-10-13 11:57:44 hawkowl reviewed <https://tm.tl/#7000> - Fix
>> pyflakes for web (assigned to adiroiban)
>> 2014-10-13 12:29:44 hawkowl reviewed <https://tm.tl/#7229> - Add Travis
>> CI configration file (assigned to hawkowl)
>> 2014-10-13 13:41:58 hawkowl reviewed <https://tm.tl/#7083> - Update
>> echoserv_ssl.py to use react (assigned to hawkowl)
>> 2014-10-14 06:57:01 glyph reviewed <https://tm.tl/#6686>
>> - twisted.web.client.readBody Deferred should be cancellable (assigned to
>> mithrandi)
>> 2014-10-14 07:45:23 glyph reviewed <https://tm.tl/#7015> - Fix iosim so
>> that it only declares it implements ITLSTransport if pyOpenSSL is available
>> (assigned to adiroiban)
>> 2014-10-14 07:47:25 glyph reviewed <https://tm.tl/#7679> - __traceback__
>> for spread.pb.CopyableFailure received by a Python3 process (unassigned)
>> 2014-10-14 07:54:16 glyph reviewed <https://tm.tl/#7626> - file is not
>> defined in python 3.4 (assigned to wolfgang61)
>> 2014-10-14 10:20:07 hawkowl reviewed <https://tm.tl/#7680> - Improve
>> test stability of t.w.test.ContentDecoderAgentTests.test_existingHeaders
>> (assigned to hawkowl)
>> 2014-10-14 12:08:18 multani reviewed <https://tm.tl/#7007> - Fix
>> pyflakes for twisted/test (unassigned)
>> 2014-10-14 14:29:26 hynek reviewed <https://tm.tl/#7008> - Fix pyflakes
>> for remaining core (assigned to adiroiban)
>> 2014-10-14 14:58:46 hawkowl reviewed <https://tm.tl/#6395> -
>> Deprecate twisted.words.protocols.msn (assigned to hawkowl)
>> 2014-10-14 21:35:37 herrwolfe reviewed <https://tm.tl/#6686>
>> - twisted.web.client.readBody Deferred should be cancellable (assigned to
>> mithrandi)
>> 2014-10-15 04:48:24 habnabit reviewed <https://tm.tl/#7252> - topy
>> identifies many many typos in twisted (assigned to Alex)
>> 2014-10-15 04:55:51 habnabit reviewed <https://tm.tl/#7252> - topy
>> identifies many many typos in twisted (assigned to habnabit)
>> 2014-10-15 05:23:28 habnabit reviewed <https://tm.tl/#4398> -
>> PBServerFactory should support plain password credentials (assigned to
>> spalax)
>> 2014-10-15 07:34:52 glyph reviewed <https://tm.tl/#5704> - mkdir -p for
>> FilePath (assigned to joelverhagen)
>> 2014-10-15 08:23:33 glyph reviewed <https://tm.tl/#6951> -
>> twisted.web.static.File should allow customizing the ForbiddenResource
>> (assigned to adiroiban)
>> 2014-10-16 06:56:34 glyph reviewed <https://tm.tl/#6686>
>> - twisted.web.client.readBody Deferred should be cancellable (assigned to
>> mithrandi)
>> 2014-10-16 07:33:44 glyph reviewed <https://tm.tl/#7295> - howto:
>> pb-usage does not adhere to style guide (assigned to danielsank)
>>
>> This is a fairly strong showing - the queue is down to 44 now, down from
>> 58 when this was announced, which is a significant dent - but it does look
>> like we have a little catching up to do!  I would particularly like to
>> nudge Paul and Jonathan to throw their respective hats into the ring, since
>> it looks like we don't have any reviews from them in the official rally
>> period just yet :-).  Sorry if I missed something because this may not be
>> the most reliable data source!
>>
>> Thanks everyone,
>>
>> -glyph
>> _______________________________________________
>> Twisted-Python mailing list
>> Twisted-Python at twistedmatrix.com
>> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>>
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>


-- 
--
Kevin Horn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141016/e71dedd8/attachment-0002.html>

From glyph at twistedmatrix.com  Thu Oct 16 16:11:58 2014
From: glyph at twistedmatrix.com (Glyph Lefkowitz)
Date: Thu, 16 Oct 2014 15:11:58 -0700
Subject: [Twisted-Python] Twisted hangs when using pyapns
In-Reply-To: <CACL3mTB_TReNUQCQT=PK6-h1hUVH1+JEMHCMm-DtOxQPNVSiEQ@mail.gmail.com>
References: <CACL3mTA9wxFoSwy0DYPB-29A_+3ycfz0X7Q3FmzKPh03zkuZcw@mail.gmail.com>
 <6391312B-9BC4-49B5-AD77-468F8A10A9BC@twistedmatrix.com>
 <CACL3mTBT=kzRTEE=oaQSohFphGFB3ttw-tKM2k3AxcY=rRpZyA@mail.gmail.com>
 <F6EF3231-ED8B-4A2C-94D4-9C2FB49B56A3@twistedmatrix.com>
 <CACL3mTB_TReNUQCQT=PK6-h1hUVH1+JEMHCMm-DtOxQPNVSiEQ@mail.gmail.com>
Message-ID: <D685CD30-81D1-4A27-82EF-2541E7457330@twistedmatrix.com>


> On Oct 15, 2014, at 11:42 PM, Ni Wesley <nispray at gmail.com> wrote:
> 
> Problem is for twice push to one device, client is not None the second time, code goes here and error then.

Great, glad you could figure it out.

> BTW, what I wanna ask is where is the default log file? I didn't see any exception raised.

With the command line you mentioned previously, it should be in a file called "twistd.log".

-glyph



-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141016/13ae6abf/attachment-0002.html>

From Axel.Rau at Chaos1.DE  Fri Oct 17 02:50:34 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Fri, 17 Oct 2014 10:50:34 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <0E8CD855-9E6A-4E7B-87EC-7D7A0BB6AFAF@Chaos1.DE>
References: <86A36C5B-6A8A-4A7C-AF45-8D6D6E324B31@Chaos1.DE>
 <20141014122219.5924.1425058572.divmod.xquotient.1@top>
 <0E8CD855-9E6A-4E7B-87EC-7D7A0BB6AFAF@Chaos1.DE>
Message-ID: <3F275303-4137-43AA-B77D-03D99F7C093B@Chaos1.DE>


Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:

>> We might need more to go on.  Do you have a complete, minimal example? (See http://sscce.org/)
> The attached zip archive  
Did someone could spend the time to look at it?
Is my goal utopian?

Axel
---
PGP-Key:29E99DD6   +49 151 2300 9283   computing @ chaos claudius




From trac at twistedmatrix.com  Sun Oct 19 00:05:17 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 19 Oct 2014 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1413698717.02.8405048443288825391@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141019/e50b69b7/attachment-0002.html>

From jml at mumak.net  Sun Oct 19 05:24:05 2014
From: jml at mumak.net (Jonathan Lange)
Date: Sun, 19 Oct 2014 11:24:05 +0000
Subject: [Twisted-Python] Call For Participation: a review rally before
 the race!
References: <B7B4598E-7098-48EC-A1F2-7907E67C52AE@twistedmatrix.com>
 <94B09A3B-536D-471B-A259-6655047CF68B@twistedmatrix.com>
 <067D906F-946D-4359-B410-1B9BBE6F2912@twistedmatrix.com>
 <CAHZ8tnYHe_x_ixpbwJJ11jzj3nK3UBA60k0Lm46=d=wLWcnUcQ@mail.gmail.com>
Message-ID: <CAHZ8tnZfRqJQc+ggnQ8KsnQndK2qnRWwXBWAxAwTT76Wv7Cq2A@mail.gmail.com>

On Thu Oct 16 2014 at 9:01:52 AM Jonathan Lange <jml at mumak.net> wrote:

> Don't worry, I know I need to do reviews. Have just been running into
> intermittent test failures and a local dev environment snafu.


Well, I haven't done as many as I would have liked to have done, but I've
done some.

I hope this helps. May your sprint be of great success.

jml
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141019/4a22f770/attachment-0002.html>

From exarkun at twistedmatrix.com  Sun Oct 19 14:44:19 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Sun, 19 Oct 2014 20:44:19 -0000
Subject: [Twisted-Python] Serializing cftp and ssh sessions
Message-ID: <20141019204419.5924.649190178.divmod.xquotient.7@top>

On 17 Oct, 08:50 am, axel.rau at chaos1.de wrote:
>
>Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:
>>>We might need more to go on.  Do you have a complete, minimal 
>>>example? (See http://sscce.org/)
>>The attached zip archive
>Did someone could spend the time to look at it?
>Is my goal utopian?

I can't tell if this represents a bug in Twisted or not.  After a quick 
look through the code, I'm not really clear on why the program would 
ever exit (I didn't find the calls to `reactor.stop`, I guess they're 
hidden somewhere in conch "library" code), nor quite which code paths 
you expect to work and which you expect to fail.


What is the expected behavior if I run test.py after editing it to point 
at a host I have access to?

Is that the desired behavior?

If there is a second case, what one edit can I make to observe that 
behavior?  How does the behavior differ from what you're trying to 
achieve?

Separately:

  * You should rewrite this code to not use twisted.conch.client.connect. 
That's some random library code no one ever expected application code to 
use.  It's public, so you can use it if you want, but that's no promise 
it's any good.

  * Use twisted.conch.endpoints.SSHCommandClientEndpoint to perform 
`exec` requests

  * Consider pitching in to complete 
https://twistedmatrix.com/trac/ticket/6617 so you can use the new 
`SSHSubsystemClientEndpoint` API that ticket introduces to set up your 
SFTP connections.

Jean-Paul



From aftnix at gmail.com  Mon Oct 20 05:55:03 2014
From: aftnix at gmail.com (aft)
Date: Mon, 20 Oct 2014 17:55:03 +0600
Subject: [Twisted-Python] Mysql and adbapi
Message-ID: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>

Hi,

I'm trying to run the following program :

from twisted.enterprise import adbapi

dbpool = adbapi.ConnectionPool("MySQLdb", "khalid_sultaln", "root", "mysql")

def xmlValues() :
    return dbpool.runQuery("SELECt * from xml_vaules limit 1")

def printResult(l):
    print type(l)
    print l[0][0]



xmlValues().addCallback(printResult)


But its not printing anything. What exactly i'm doing wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141020/4684ec1a/attachment-0002.html>

From hawkowl at atleastfornow.net  Mon Oct 20 06:02:13 2014
From: hawkowl at atleastfornow.net (HawkOwl)
Date: Mon, 20 Oct 2014 20:02:13 +0800
Subject: [Twisted-Python] Mysql and adbapi
In-Reply-To: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>
References: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>
Message-ID: <936822E2-6865-4BAF-9308-2D8618CCEBEE@atleastfornow.net>


On 20 Oct 2014, at 19:55, aft <aftnix at gmail.com> wrote:
> 
> But its not printing anything. What exactly i'm doing wrong?

Hi,

You havent started the reactor, so nothing has started. Its just sitting there, waiting for it to be spun off.

http://twistedmatrix.com/documents/current/_downloads/echoclient_ssl.py

Try using react, as detailed in this example  you should put your code in a similar main() block.

-hawkie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 455 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: </pipermail/twisted-python/attachments/20141020/39c231ef/attachment.sig>

From aftnix at gmail.com  Mon Oct 20 06:58:29 2014
From: aftnix at gmail.com (aft)
Date: Mon, 20 Oct 2014 18:58:29 +0600
Subject: [Twisted-Python] Mysql and adbapi
In-Reply-To: <936822E2-6865-4BAF-9308-2D8618CCEBEE@atleastfornow.net>
References: <CAGuaRCva9Q9pHA7E=8yzOjRy0qRK4ZzPvCaVj+DwygS8-OWuuw@mail.gmail.com>
 <936822E2-6865-4BAF-9308-2D8618CCEBEE@atleastfornow.net>
Message-ID: <CAGuaRCvWk9y+fkhHZb0CZX692Ji3KH-eesQfFbzd4MoWu5uAgg@mail.gmail.com>

On Mon, Oct 20, 2014 at 6:02 PM, HawkOwl <hawkowl at atleastfornow.net> wrote:

>
> On 20 Oct 2014, at 19:55, aft <aftnix at gmail.com> wrote:
> >
> > But its not printing anything. What exactly i'm doing wrong?
>
> Hi,
>
> You havent started the reactor, so nothing has started. Its just
> sitting there, waiting for it to be spun off.
>
> http://twistedmatrix.com/documents/current/_downloads/echoclient_ssl.py
>
> Try using react, as detailed in this example  you should put your code in
> a similar main() block.
>

I see. I should have understood it. Thanks for the reply.

Arif

>
> -hawkie
>
> _______________________________________________
> Twisted-Python mailing list
> Twisted-Python at twistedmatrix.com
> http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141020/eca46c5d/attachment-0002.html>

From Axel.Rau at Chaos1.DE  Mon Oct 20 08:05:20 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Mon, 20 Oct 2014 16:05:20 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <20141019204419.5924.649190178.divmod.xquotient.7@top>
References: <20141019204419.5924.649190178.divmod.xquotient.7@top>
Message-ID: <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>


Am 19.10.2014 um 22:44 schrieb exarkun at twistedmatrix.com:

> On 17 Oct, 08:50 am, axel.rau at chaos1.de wrote:
>> 
>> Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:
>>>> We might need more to go on.  Do you have a complete, minimal example? (See http://sscce.org/)
>>> The attached zip archive
>> Did someone could spend the time to look at it?
>> Is my goal utopian?
> 
> I can't tell if this represents a bug in Twisted or not.  After a quick look through the code, Im not really clear on why the program would ever exit (I didnt find the calls to `reactor.stop`, I guess theyre hidden somewhere in conch library code),
I must prevent this stopping of the reactor, because Im unable to start it again.
Im always getting twisted.internet.error.ReactorNotRestartable after trying it while reactor.running is False.

>  nor quite which code paths you expect to work and which you expect to fail.
> 
> 
> What is the expected behavior if I run test.py after editing it to point at a host I have access to?
If you put a reactor.stop() at the end of ssh._ebExit, test.py should run to completion after doing the remote file operations and executing the remote commands.
> 
> Is that the desired behavior?
No.
I need a solution where the call to executeRemoteCommands() is delayed until all remote file operations are complete. Similar the next call to distributeFiles (with a different host) must wait until the previous call to executeRemoteCommands has no outstanding operations.

> 
> If there is a second case, what one edit can I make to observe that behavior?
No.
>  How does the behavior differ from what youre trying to achieve?
See above. I must synchronize operations at 2 points in a loop.
I tried to do this with callbacks, called at connection shutdown.
What do you think about this?
> 
> Separately:
> 
> * You should rewrite this code to not use twisted.conch.client.connect. That's some random library code no one ever expected application code to use.  It's public, so you can use it if you want, but that's no promise it's any good.
> 
> * Use twisted.conch.endpoints.SSHCommandClientEndpoint to perform `exec` requests
> 
> * Consider pitching in to complete https://twistedmatrix.com/trac/ticket/6617 so you can use the new `SSHSubsystemClientEndpoint` API that ticket introduces to set up your SFTP connections.
I looked at endpoints before, but failed to implement public key authentication and a callback when complete.

Thanks for looking into this,
Axel
-
PGP-Key:29E99DD6   +49 151 2300 9283   computing @ chaos claudius




From exarkun at twistedmatrix.com  Mon Oct 20 08:28:12 2014
From: exarkun at twistedmatrix.com (exarkun at twistedmatrix.com)
Date: Mon, 20 Oct 2014 14:28:12 -0000
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>
References: <20141019204419.5924.649190178.divmod.xquotient.7@top>
 <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>
Message-ID: <20141020142812.5924.2109308014.divmod.xquotient.9@top>

On 02:05 pm, axel.rau at chaos1.de wrote:
>
>Am 19.10.2014 um 22:44 schrieb exarkun at twistedmatrix.com:
>>On 17 Oct, 08:50 am, axel.rau at chaos1.de wrote:
>>>
>>>Am 14.10.2014 um 17:07 schrieb Axel Rau <Axel.Rau at chaos1.de>:
>>>>>We might need more to go on.  Do you have a complete, minimal 
>>>>>example? (See http://sscce.org/)
>>>>The attached zip archive
>>>Did someone could spend the time to look at it?
>>>Is my goal utopian?
>>
>>I can't tell if this represents a bug in Twisted or not.  After a 
>>quick look through the code, Im not really clear on why the program 
>>would ever exit (I didnt find the calls to `reactor.stop`, I guess 
>>theyre hidden somewhere in conch library code),
>I must prevent this stopping of the reactor, because Im unable to 
>start it again.
>Im always getting twisted.internet.error.ReactorNotRestartable after 
>trying it while reactor.running is False.

Okay.  I guess I misunderstood part of the problem statement.  I thought 
you wanted it to stop at some point.
>>  nor quite which code paths you expect to work and which you expect to 
>>fail.
>>
>>
>>What is the expected behavior if I run test.py after editing it to 
>>point at a host I have access to?
>If you put a reactor.stop() at the end of ssh._ebExit, test.py should 
>run to completion after doing the remote file operations and executing 
>the remote commands.
>>
>>Is that the desired behavior?
>No.
>I need a solution where the call to executeRemoteCommands() is delayed 
>until all remote file operations are complete. Similar the next call to 
>distributeFiles (with a different host) must wait until the previous 
>call to executeRemoteCommands has no outstanding operations.
>>
>>If there is a second case, what one edit can I make to observe that 
>>behavior?
>No.
>>  How does the behavior differ from what youre trying to achieve?
>See above. I must synchronize operations at 2 points in a loop.
>I tried to do this with callbacks, called at connection shutdown.
>What do you think about this?

That sounds like the correct solution to me.  The simplest way to 
structure your code is to make the APIs for starting these two 
operations return a Deferred that fires when the operation is complete. 
Then you can use these Deferreds to construct the desired control flow 
for starting the operations.
>>
>>Separately:
>>
>>* You should rewrite this code to not use 
>>twisted.conch.client.connect. That's some random library code no one 
>>ever expected application code to use.  It's public, so you can use it 
>>if you want, but that's no promise it's any good.
>>
>>* Use twisted.conch.endpoints.SSHCommandClientEndpoint to perform 
>>`exec` requests
>>
>>* Consider pitching in to complete 
>>https://twistedmatrix.com/trac/ticket/6617 so you can use the new 
>>`SSHSubsystemClientEndpoint` API that ticket introduces to set up your 
>>SFTP connections.
>I looked at endpoints before, but failed to implement public key 
>authentication and a callback when complete.

You should be able to do key-based authentication with the endpoint. 
SSHCommandClientEndpoint.newConnection accepts a `keys` argument if you 
want to specify the keys to use explicitly.  It also accepts an 
`agentEndpoint` argument if you instead want to point it at an SSH key 
agent which will perform key operations for it.

Jean-Paul



From Axel.Rau at Chaos1.DE  Wed Oct 22 03:59:49 2014
From: Axel.Rau at Chaos1.DE (Axel Rau)
Date: Wed, 22 Oct 2014 11:59:49 +0200
Subject: [Twisted-Python] Serializing cftp and ssh sessions
In-Reply-To: <20141020142812.5924.2109308014.divmod.xquotient.9@top>
References: <20141019204419.5924.649190178.divmod.xquotient.7@top>
 <0979672B-CB29-40DA-95B7-37C46C3AD1FB@Chaos1.DE>
 <20141020142812.5924.2109308014.divmod.xquotient.9@top>
Message-ID: <A3A22E83-9A77-4489-A7DB-499320071C5B@Chaos1.DE>


Am 20.10.2014 um 16:28 schrieb exarkun at twistedmatrix.com:

>> See above. I must synchronize operations at 2 points in a loop.
>> I tried to do this with callbacks, called at connection shutdown.
>> What do you think about this?
> 
> That sounds like the correct solution to me.  The simplest way to structure your code is to make the APIs for starting these two operations return a Deferred that fires when the operation is complete. Then you can use these Deferreds to construct the desired control flow for starting the operations.
> 
I have implemented this in a prototype, which does what I want, simply by calling the next top level operation when one has completed.
Your suggestion would require to handle the Deferred down to the point of connection termination.

Thanks for your support,
Axel
---
PGP-Key:29E99DD6   +49 151 2300 9283   computing @ chaos claudius




From topjetboy at yahoo.com  Thu Oct 23 07:04:47 2014
From: topjetboy at yahoo.com (topjetboy)
Date: Thu, 23 Oct 2014 06:04:47 -0700
Subject: [Twisted-Python] adding twisted to anaconda
Message-ID: <1414069487.4691.YahooMailNeo@web122406.mail.ne1.yahoo.com>

Anaconda is a python distribution with many modules already installed. The whole distro installs to a separate root folder named 'anaconda'. How do i install twisted to this? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141023/ca54f1a3/attachment-0002.html>

From itamar at itamarst.org  Thu Oct 23 07:40:35 2014
From: itamar at itamarst.org (Itamar Turner-Trauring)
Date: Thu, 23 Oct 2014 09:40:35 -0400
Subject: [Twisted-Python] Announcing Eliot 0.5.0: Structured Logging as
	Storytelling
Message-ID: <2e29454d10d1a02cf4f7e55d38703713@itamarst.org>

 

Eliot provides a structured logging and tracing system for Python that
generates log messages describing a forest of nested actions. Actions
start and eventually finish, successfully or not. Log messages thus tell
a story: what happened and what caused it. 

Eliot has first class support for Twisted, including integration with
Trial. 

Eliot is released by ClusterHQ [2], the Data People for Docker(tm), and
is available at https://pypi.python.org/pypi/eliot [3]. Documentation is
available at https://eliot.readthedocs.org [4]. 

Here's what your logs might look like before using Eliot: 

Going to validate http://example.com/index.html [1].
Started download attempted.
Download succeeded!
Missing <title> element in "/html/body".
Bad HTML entity in "/html/body/p[2]".
2 validation errors found!

After switching to Eliot you'll get a tree of messages with both message
contents and causal relationships encoded in a structured format: 

	* {"action_type": "validate_page", "action_status": "started", "url":
"http://example.com/index.html [1]"} 

 	* {"action_type": "download", "action_status": "started"}
 	* {"action_type": "download", "action_status": "succeeded"}

	* {"action_type": "validate_html", "action_status": "started"} 

 	* {"message_type": "validation_error", "error_type": "missing_title",
"xpath": "/html/head"}
 	* {"message_type": "validation_error", "error_type": "bad_entity",
"xpath": "/html/body/p[2]"}

 	* {"action_type": "validate_html", "action_status": "failed",
"exception": "validator.ValidationFailed"}

 	* {"action_type": "validate_page", "action_status": "failed",
"exception": "validator.ValidationFailed"}

What's New in 0.5.0: 

 	* Added support for Python 3.4.
 	* Most public methods and functions now have underscore-based
equivalents to the camel case versions, e.g. eliot.write_traceback and
eliot.writeTraceback, for use in PEP 8 styled programs. Twisted-facing
APIs and pyunit assertions do not provide these additional APIs, as
camel-case is the native idiom.
 	* eliot.to_file outputs log messages to a file.
 	* Documented how to load Eliot logging into ElasticSearch via
Logstash.
 	* Documentation has been significantly reorganized.

 

Links:
------
[1] http://example.com/index.html
[2] https://docs.clusterhq.com
[3] https://pypi.python.org/pypi/eliot
[4] https://eliot.readthedocs.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141023/47ad2947/attachment-0002.html>

From topjetboy at yahoo.com  Thu Oct 23 11:58:08 2014
From: topjetboy at yahoo.com (Topjetboy@Y)
Date: Thu, 23 Oct 2014 13:58:08 -0400
Subject: [Twisted-Python] Installing into anaconda
Message-ID: <857955F7-0B41-4DB1-BA4B-23EA96E4A831@yahoo.com>

Anaconda is a python distro. It comes in many flavors depending on the desired interpreter (2.7, 3.4, etc) how does one select and install the correct version of twisted?


From trac at twistedmatrix.com  Sun Oct 26 00:05:17 2014
From: trac at twistedmatrix.com (trac at twistedmatrix.com)
Date: Sun, 26 Oct 2014 06:05:17 -0000
Subject: [Twisted-Python] Weekly Bug Summary
Message-ID: 1414303517.52.8997344419816263682@twistedmatrix.com

An HTML attachment was scrubbed...
URL: </pipermail/twisted-python/attachments/20141026/5f0440f9/attachment-0002.html>

