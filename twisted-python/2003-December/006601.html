<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Memory usage in large file transfers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Memory%20usage%20in%20large%20file%20transfers&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006600.html">
   <LINK REL="Next"  HREF="006602.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Memory usage in large file transfers</H1>
    <B>Nikolaos Krontiris</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Memory%20usage%20in%20large%20file%20transfers&In-Reply-To="
       TITLE="[Twisted-Python] Memory usage in large file transfers">nkrontir at hotmail.com
       </A><BR>
    <I>Mon Dec  1 04:25:13 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006600.html">[Twisted-Python] Re: using twisted web server as a type of REST server
</A></li>
        <LI>Next message: <A HREF="006602.html">[Twisted-Python] Memory usage in large file transfers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6601">[ date ]</a>
              <a href="thread.html#6601">[ thread ]</a>
              <a href="subject.html#6601">[ subject ]</a>
              <a href="author.html#6601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there.
I am writing a file transfer program using twisted as my framework. 
I have been having some problems as far as memory usage is concerned (i.e. both client and server just eat through available memory without ever releasing it back to the kernel while transfering data). I am aware that in theory, the client and server will consume at least as much memory as the file to be transferred, but this memory should also be made available to the O/S after the operation has completed.
I also use a garbage collector, which makes things just marginally better and the only TWISTED operations I use are a few transport write and callLater commands.
The only culprits responsible for this I can imagine to be a difference between the hardcoded buffer sizes in TWISTED and the amount of data I send (I send 64Kb of data per request for faster delivery in LANs) and/or possibly that this memory lost is in many small chunks of data -- in this case no O/S can free this data, since there are always limits only above which the kernel will deem an amount of memory worth the trouble to be released (I think glibc has around a 2MB limit)...
As professional network programmers, do you believe my diagnosis is correct? Have you encountered such problems in the past? Are there workarounds for this?

Many thanks,

Nick.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20031201/539eaa2b/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20031201/539eaa2b/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006600.html">[Twisted-Python] Re: using twisted web server as a type of REST server
</A></li>
	<LI>Next message: <A HREF="006602.html">[Twisted-Python] Memory usage in large file transfers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6601">[ date ]</a>
              <a href="thread.html#6601">[ thread ]</a>
              <a href="subject.html#6601">[ subject ]</a>
              <a href="author.html#6601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
