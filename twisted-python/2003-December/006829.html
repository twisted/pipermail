<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] [WISH] pygame reactor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%5BWISH%5D%20pygame%20reactor&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006828.html">
   <LINK REL="Next"  HREF="006833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] [WISH] pygame reactor</H1>
    <B>Brian Warner</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20%5BWISH%5D%20pygame%20reactor&In-Reply-To="
       TITLE="[Twisted-Python] [WISH] pygame reactor">warner at lothar.com
       </A><BR>
    <I>Wed Dec 17 17:51:01 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006828.html">[Twisted-Python] [WISH] pygame reactor
</A></li>
        <LI>Next message: <A HREF="006833.html">[Twisted-Python] twisted.web performance hacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6829">[ date ]</a>
              <a href="thread.html#6829">[ thread ]</a>
              <a href="subject.html#6829">[ subject ]</a>
              <a href="author.html#6829">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> My hope is, now that pyui is somewhat death or windows only, to have a
</I>&gt;<i> pygame reactor maybe using pygame.event.wait() which idles till a
</I>&gt;<i> pygame event comes.
</I>
Perhaps as a way of getting started, Paul Boehm posted the following code to
this list in October of 2002. Unlike Twisted, pygame isn't very quiescent, so
there isn't a way to just sleep until something needs to be done. Instead, in
this code, twisted runs the pygame update routine as frequently as necessary
to achieve the desired frame rate. This probably has implications for
response latency to joystick events, etc.. I haven't actually tried to run
this in a long time (since about November of 2002 :).

 -Brian

# MyGame embedded in Twisted

from pygame import time
from twisted.internet import reactor

import mygame

class PygameTimer:
    def __init__(self, game):
        self.clock = time.Clock()
        self.game = game
        self.update()

    def update(self):
        self.clock.tick()
        self.ms = self.clock.get_rawtime()

        framespeed = (1.0/100.0) * 1000
        lastspeed = self.ms
        next = framespeed - lastspeed

        print &quot;framespeed&quot;, framespeed, &quot;ms&quot;, self.ms, &quot;next&quot;, next, &quot;fps&quot;, self.clock.get_fps()

        self.game.iterate()

        if self.game.want_quit:
            self.game.cleanup()
            reactor.stop()
        else:
            reactor.callLater(next/1000.0*2.0, self.update)


if __name__ == &quot;__main__&quot;:
    pt = PygameTimer(mygame.Game())
    reactor.run()


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006828.html">[Twisted-Python] [WISH] pygame reactor
</A></li>
	<LI>Next message: <A HREF="006833.html">[Twisted-Python] twisted.web performance hacks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6829">[ date ]</a>
              <a href="thread.html#6829">[ thread ]</a>
              <a href="subject.html#6829">[ subject ]</a>
              <a href="author.html#6829">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
