<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] long-lived database transaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20long-lived%20database%20transaction&In-Reply-To=%3C1071352250.1263.177.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039271.html">
   <LINK REL="Next"  HREF="039281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] long-lived database transaction</H1>
    <B>Federico Di Gregorio</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20long-lived%20database%20transaction&In-Reply-To=%3C1071352250.1263.177.camel%40localhost%3E"
       TITLE="[Twisted-Python] long-lived database transaction">fog at initd.org
       </A><BR>
    <I>Sat Dec 13 14:50:50 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039271.html">[Twisted-Python] long-lived database transaction
</A></li>
        <LI>Next message (by thread): <A HREF="039281.html">[Twisted-Python] long-lived database transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39275">[ date ]</a>
              <a href="thread.html#39275">[ thread ]</a>
              <a href="subject.html#39275">[ subject ]</a>
              <a href="author.html#39275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Il sab, 2003-12-13 alle 21:55, Christopher Armstrong ha scritto:
&gt;<i> Federico Di Gregorio wrote:
</I>&gt;<i> &gt; Hi *,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; attached to this mail there are two files that implement long-lived
</I>&gt;<i> &gt; database transactions for twisted (xdbapi.py, to be dropped in
</I>&gt;<i> &gt; twisted.enterprise) and the necessary unit tests (test_xdbapi.py). 
</I>&gt;<i> 
</I>&gt;<i> This looks like a gigantic rape'n'paste of adbapi.py. Isn't there a way 
</I>&gt;<i> you can integrate with/refactor adbapi such that you don't duplicate all 
</I>&gt;<i> that code?
</I>
the original code was very different from adbapi, but i wanted to
provide a similar interface. that's why i rape'n'pasted. :)

unfortunately the adbapi code is based on a *thread* pool and the
connection pool is just a side-effect of using one connection per thread
(this is completely wrong, imho, see my comments of about one year ago
about adbapi on this very list.) anyway, this obviously makes impossible
to have long-lived transactions. 

i would be very happy to convert adbapi to a *real connection pool* and
add long-lived transactions to it (very much like xdbapi incorporates
one-shot transactions that mimic ConnectionPool.runXXX, look at the
code) but i tought it was less invasive to first provide a completely
separate implementation, starting with xdbapi.

&gt;<i> Also, please create a &quot;Feature&quot;-level issue on the bug tracker for this 
</I>&gt;<i> patch (especially since the patch needs discussion):
</I>
ok. let's discuss it and i'll resubmit the patch after.

federico

-- 
Federico Di Gregorio                         <A HREF="http://people.initd.org/fog">http://people.initd.org/fog</A>
Debian GNU/Linux Developer                                <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">fog at debian.org</A>
INIT.D Developer                                           <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">fog at initd.org</A>
   Lasciate che i furetti vengano a me. -- Maria Luisa Benedetta Panzani
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: Questa parte del messaggio Ã¨ firmata
URL: &lt;/pipermail/twisted-python/attachments/20031213/79ff44bd/attachment.sig&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039271.html">[Twisted-Python] long-lived database transaction
</A></li>
	<LI>Next message (by thread): <A HREF="039281.html">[Twisted-Python] long-lived database transaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39275">[ date ]</a>
              <a href="thread.html#39275">[ thread ]</a>
              <a href="subject.html#39275">[ subject ]</a>
              <a href="author.html#39275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
