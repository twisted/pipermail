<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Session trouble
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Session%20trouble&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006817.html">
   <LINK REL="Next"  HREF="006819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Session trouble</H1>
    <B>Michal Pasternak</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Session%20trouble&In-Reply-To="
       TITLE="[Twisted-Python] Session trouble">michal at pasternak.w.lub.pl
       </A><BR>
    <I>Tue Dec 16 17:42:08 EST 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="006817.html">[Twisted-Python] Twisted Web sessions
</A></li>
        <LI>Next message: <A HREF="006819.html">[Twisted-Python] Session trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6818">[ date ]</a>
              <a href="thread.html#6818">[ thread ]</a>
              <a href="subject.html#6818">[ subject ]</a>
              <a href="author.html#6818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On a page of the site I've got a form. The user enters values and submits
the form. Entered values are saved to session. If s/he gets back to the page
(=&gt; encounters the same form), values are loaded from the session and the
form is filled with them. Everything worked okay, until I turned on caching.
Now, even if the test machine is on different subnet, the filled values are
presented to all connected users by default (eg. my friend, while testing
it, enters some data; I open a &quot;clean&quot; browser, without any cookies or such,
enter the page with the form - and I get the same data he entered!).

My question is simple: how do I get around this? Should I turn off the
caching (which speeds up page generation significantly, so I'd rather say
it's required)? Is it known issue? What am I doing wrong? Where should I RTFM?

I run the site server with twistd and RPY script.

This is my RPY script:

	cache()
	import myWeb
	resource = myWeb.RootPage()

This is how I save / load session values in myWeb:

     I have declared:
     
	class IPreferences(components.Interface):
    		pass
	class Preferences(components.Adapter):
    		__implements__ = IPreferences
	components.registerAdapter(Preferences, server.Session, IPreferences)

     Then, when I'm loading/saving values from/to session, I use:
     
        prefs = req.getSession(IPreferences)
	
-- 
Michal Pasternak :: <A HREF="http://pasternak.w.lub.pl">http://pasternak.w.lub.pl</A> :: <A HREF="http://winsrc.sf.net">http://winsrc.sf.net</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006817.html">[Twisted-Python] Twisted Web sessions
</A></li>
	<LI>Next message: <A HREF="006819.html">[Twisted-Python] Session trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6818">[ date ]</a>
              <a href="thread.html#6818">[ thread ]</a>
              <a href="subject.html#6818">[ subject ]</a>
              <a href="author.html#6818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
