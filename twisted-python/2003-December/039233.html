<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Woven: can't get view notification to work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%3A%20can%27t%20get%20view%20notification%20to%20work&In-Reply-To=%3C7B4DD91F9C5D474898E5F4E43B9213F5C98787%40santarosa.dsnt.disksites.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="039232.html">
   <LINK REL="Next"  HREF="039236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Woven: can't get view notification to work</H1>
    <B>Gavrie Philipson</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Woven%3A%20can%27t%20get%20view%20notification%20to%20work&In-Reply-To=%3C7B4DD91F9C5D474898E5F4E43B9213F5C98787%40santarosa.dsnt.disksites.com%3E"
       TITLE="[Twisted-Python] Woven: can't get view notification to work">gavrie at disksites.com
       </A><BR>
    <I>Wed Dec 10 03:20:02 MST 2003</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039232.html">[Twisted-Python] Begginner discovering Emacs as a python	debugger
</A></li>
        <LI>Next message (by thread): <A HREF="039236.html">[Twisted-Python] Woven: can't get view notification to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39233">[ date ]</a>
              <a href="thread.html#39233">[ thread ]</a>
              <a href="subject.html#39233">[ subject ]</a>
              <a href="author.html#39233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to use the notify method of a model to update its views while a page is being rendered. For sake of simplicity, let's assume there's a global data structure which is updated while the page is rendered. A view which renders this data structure should then be called again so that it'll render the updated version.

Unfortunately, I can't get it to work: even though the view is being called again by the notify method, the new view doesn't show up on the final page -- as if it ran only once.

I have attached a small test program (test_notify.py).
Here's a log of what happens when running it, and connecting from a Web browser:

&gt;<i> twistd -ny test_notify.py
</I>2003/12/10 12:08 IST [-] Log opened.
2003/12/10 12:08 IST [-] twistd 1.1.0 (/usr/bin/python 2.3.2) starting up
2003/12/10 12:08 IST [-] reactor class: twisted.internet.default.SelectReactor
2003/12/10 12:08 IST [-] Loading test_notify.py...
2003/12/10 12:08 IST [-] Loaded.
2003/12/10 12:08 IST [-] twisted.web.server.Site starting on 8000
2003/12/10 12:08 IST [-] Starting factory &lt;twisted.web.server.Site instance at 0xbf04f02c&gt;
2003/12/10 12:08 IST [HTTPChannel,0,192.168.1.124] ### mydict: {'hello': 'world'}
2003/12/10 12:08 IST [HTTPChannel,0,192.168.1.124] ### mydict: {'foo': 'bar', 'hello': 'world'}
2003/12/10 12:08 IST [HTTPChannel,0,192.168.1.124] 192.168.1.124 - - [10/Dec/2003:10:08:47 +0000] &quot;GET / HTTP/1.1&quot; 200 88 &quot;-&quot; &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.5) Gecko/20031007 Firebird/0.7&quot;

The 'mydict' data structure is being updated by one of the models on the page, and it is rendered by one of the views. The model notifies the view, and the view is run on the updated data -- as is evident from the second &quot;## mydict:&quot; line. 

However, the final page just shows {'hello': 'world'} instead of the expected {'foo': 'bar', 'hello': 'world'}.

Any ideas as to why this happens?

My platform: Twisted 1.1.0 with Python 2.3.2 on a Linux machine.

Thanks,

-- Gavrie Philipson.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_notify.py
Type: application/octet-stream
Size: 1000 bytes
Desc: test_notify.py
URL: &lt;/pipermail/twisted-python/attachments/20031210/30353ed2/attachment-0002.obj&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039232.html">[Twisted-Python] Begginner discovering Emacs as a python	debugger
</A></li>
	<LI>Next message (by thread): <A HREF="039236.html">[Twisted-Python] Woven: can't get view notification to work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39233">[ date ]</a>
              <a href="thread.html#39233">[ thread ]</a>
              <a href="subject.html#39233">[ subject ]</a>
              <a href="author.html#39233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
