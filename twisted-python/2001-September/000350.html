<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] tcp.GetHost in twisted.web.server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20tcp.GetHost%20in%20twisted.web.server&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000348.html">
   <LINK REL="Next"  HREF="000349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] tcp.GetHost in twisted.web.server</H1>
    <B>Benjamin Bruheim</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20tcp.GetHost%20in%20twisted.web.server&In-Reply-To="
       TITLE="[Twisted-Python] tcp.GetHost in twisted.web.server">grolgh at online.no
       </A><BR>
    <I>Sat Sep  8 15:34:44 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000348.html">[Twisted-Python] tcp.GetHost in twisted.web.server
</A></li>
        <LI>Next message: <A HREF="000349.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/web widgets.py,1.6,1.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#350">[ date ]</a>
              <a href="thread.html#350">[ thread ]</a>
              <a href="subject.html#350">[ subject ]</a>
              <a href="author.html#350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt;     def getHost(self):
</I>&gt;<i> &gt;         return self.transport.GetHost()
</I>&gt;<i> Can't recall any reason for it at the moment except for the fact that your
</I>&gt;<i> capitalization is wrong and those methods do subtly different things... :-)
</I>
Well, it wasn't just that. :) With the correct casing it went nuts (because I 
didn't bother to check if it was run at all; it is only used in connection with
cgi):

    def getHost(self):
        return socket.gethostbyaddr(self.transport.getHost()[1])

works better :) 

&gt;<i> &gt; This at least doesn't make the crash go bad in win98
</I>&gt;<i> What crash?
</I>
The bug was that it used the network socket which isn't your only choice all the time.
Now the routine works for localhost too. The reason it went bad under win98 was
because I wasn't always online (modem), and gethostbyaddr couldn't find eg.
the machinename 'phed' :P The big difference is that _host was generated only at 
the creation of the Request-class.

// phed





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000348.html">[Twisted-Python] tcp.GetHost in twisted.web.server
</A></li>
	<LI>Next message: <A HREF="000349.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/web widgets.py,1.6,1.7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#350">[ date ]</a>
              <a href="thread.html#350">[ thread ]</a>
              <a href="subject.html#350">[ subject ]</a>
              <a href="author.html#350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
