<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Another tcp.Client question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Another%20tcp.Client%20question&In-Reply-To=%3C007001c13402%24a6129860%24bdc5d9c1%40phed%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="032832.html">
   <LINK REL="Next"  HREF="032836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Another tcp.Client question</H1>
    <B>Benjamin Bruheim</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Another%20tcp.Client%20question&In-Reply-To=%3C007001c13402%24a6129860%24bdc5d9c1%40phed%3E"
       TITLE="[Twisted-Python] Another tcp.Client question">grolgh at online.no
       </A><BR>
    <I>Sun Sep  2 16:57:31 MDT 2001</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="032832.html">[Twisted-Python] Another tcp.Client question
</A></li>
        <LI>Next message (by thread): <A HREF="032836.html">[Twisted-Python] Another tcp.Client question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32833">[ date ]</a>
              <a href="thread.html#32833">[ thread ]</a>
              <a href="subject.html#32833">[ subject ]</a>
              <a href="author.html#32833">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; No, it was just a test. Calling DTPLoseConnection actually would remove the
</I>&gt;<i> &gt; server since it would call Port.loseConnection, though trigging some unwanted
</I>&gt;<i> &gt; effects.
</I>&gt;<i> Is the dtpPort supposed to accept more than one connection?  I was under the
</I>&gt;<i> impression that anywhere one would bind port 0 would be a place that one or
</I>&gt;<i> only a few connections would be accepted.
</I>
yes, it shall accept one connection, and after the transfer is done, it shall close the connection (and in this way tell the user that the transfer is done). it shall let the tcp time-out, and that's why we change the port; less time is wasted between each new file. I am thinking of letting the user define a range of ports, and cycle through that instead of using port 0.

&gt;<i> &gt; The port is created in FTP.createPassiveServer, and loseConnection is called
</I>&gt;<i> &gt; in DTP.finishGet (or DTP.finish, I don't think I've commited the namechange).
</I>&gt;<i> You have committed it.  Still: I see no loseConnection being called on a
</I>&gt;<i> *Port*, only on a *Server*, which is a connection that got accepted from a
</I>&gt;<i> port.
</I>
Isn't 'self.dtpPort = tcp.Port(0, self)' a Port? self.dtp.transport is self.dtpPort, and its method loseConnection is used. Besides, isn't Port the same as a server?

&gt;<i> That's as a result of seeing connectionLost, loseConnection is never
</I>&gt;<i> necessarily called.
</I>Figured :)

&gt;<i> &gt; BTW, The point with my last reply was that I can't see that some of the code
</I>&gt;<i> &gt; changed are ever run, and that makes it hard to test ;)
</I>&gt;<i> Yes, and my point is that, as far as I understand FTP, you *should* be
</I>&gt;<i> exercising that code.  I still don't understand why you're not.
</I>
Well, if I could. And how come nobody ever have run into that removeReader with an NameError or something?

// phed





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="032832.html">[Twisted-Python] Another tcp.Client question
</A></li>
	<LI>Next message (by thread): <A HREF="032836.html">[Twisted-Python] Another tcp.Client question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32833">[ date ]</a>
              <a href="thread.html#32833">[ thread ]</a>
              <a href="subject.html#32833">[ subject ]</a>
              <a href="author.html#32833">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
