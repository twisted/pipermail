<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Reality Servers - diffs included
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reality%20Servers%20-%20diffs%20included&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000340.html">
   <LINK REL="Next"  HREF="000338.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Reality Servers - diffs included</H1>
    <B>Chris.Hadgis at mincom.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Reality%20Servers%20-%20diffs%20included&In-Reply-To="
       TITLE="[Twisted-Python] Reality Servers - diffs included">Chris.Hadgis at mincom.com
       </A><BR>
    <I>Wed Sep  5 19:51:25 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000340.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/python otp.py,NONE,1.1
</A></li>
        <LI>Next message: <A HREF="000338.html">[Twisted-Python] Reality Servers - diffs included
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Here is a diff for tkfaucet for inclusion in 0.10.2

Changes made are (1) shortcuts, (2) word-wrapped, logically-sized  frames, 
(3) errors in a message box

--- C:\TMLold\Twisted-0.10.0\twisted\reality\ui\tkfaucet.py     Sun Aug 19 
17:52:46 2001
+++ C:\TML\Twisted-0.10.0\twisted\reality\ui\tkfaucet.py        Tue Aug 28 
22:18:54 2001
@@ -20,25 +20,39 @@
 
 from Tkinter import *
 from ScrolledText import *
+from tkMessageBox import *
 
 from twisted.spread import pb
 from twisted.internet import tkinternet, main, tcp
 
 class MainWindow(Toplevel, pb.Referenced):
+
+    shortcuts = {&quot;n&quot;:&quot;go north&quot;,
+                 &quot;s&quot;:&quot;go south&quot;,
+                 &quot;e&quot;:&quot;go east&quot;,
+                 &quot;w&quot;:&quot;go west&quot;,
+                 &quot;l&quot;:&quot;look&quot;,
+                 &quot;ne&quot;:&quot;go northeast&quot;,
+                 &quot;nw&quot;:&quot;go northwest&quot;,
+                 &quot;sw&quot;:&quot;go southwest&quot;,
+                 &quot;se&quot;:&quot;go southeast&quot;,
+                 &quot;u&quot;:&quot;go up&quot;,
+                 &quot;d&quot;:&quot;go down&quot;}
+
     def __init__(self, *args,**kw):
         self.descriptions = {}
         self.items = {}
         self.exits = []
         apply(Toplevel.__init__,(self,)+args,kw)
         self.title(&quot;Reality Faucet&quot;)
-        self.happenings = ScrolledText(self, height=5, width=5)
+        self.happenings = ScrolledText(self, height=6, width=72, 
wrap='word')
 
         midf = Frame(self)
         ddf = Frame(midf)
         idf = Frame(midf)
 
-        a = self.descriptionField = ScrolledText(ddf, height=5, width=5)
-        b = self.itemsField = ScrolledText(idf, height=5, width=30)
+        a = self.descriptionField = ScrolledText(ddf, height=12, 
width=72, wrap='word')
+        b = self.itemsField = ScrolledText(idf, height=12, width=36, 
wrap='word')
         a.pack(fill=BOTH, expand=YES)
         b.pack(fill=BOTH, expand=YES)
         ddf.pack(side=LEFT, fill=BOTH, expand=YES)
@@ -72,6 +86,7 @@
 
     def tryAgain(self, er):
         print 'oops',er
+        showerror('Oops', er)
 
     def disco(self):
         print 'disconnected'
@@ -128,6 +143,9 @@
 
     def doSend(self, *evstuf):
         sentence = self.entry.get()
+        possible_shortcut = self.shortcuts.get(sentence)
+        if possible_shortcut:
+            sentence = possible_shortcut
         self.doNow(sentence)
         self.entry.delete('0','end')
 


Here is a diff for trdemo for inclusion in 0.10.2

Changes made are (1) correct broadcast for John Romero &quot;pull&quot;, (2) correct 
broadcast for John Romero &quot;drop&quot;

--- C:\TMLold\Twisted-0.10.0\trdemo\trdemo\trdemo.py    Mon Aug 20 
21:46:14 2001
+++ C:\TML\Twisted-0.10.0\trdemo\trdemo\trdemo.py       Mon Sep 03 
23:20:02 2001
@@ -175,15 +175,19 @@
         &quot;&quot;&quot;
         self.broadcastToPair(sentence.subject,
                              to_subject=&quot;&quot;,
                              to_target=(&quot;You pull &quot;,self,&quot;'s string.&quot;),
                              to_other =(sentence.subject,&quot; pulls 
&quot;,self,&quot;'s string.&quot;))
         f = whrandom.random()
         if f &lt; 0.3:
-            self.broadcast(self,&quot;'s string reels back in, and it chirps 
\&quot;&quot;,whrandom.choice(self.dollSpeech),&quot;\&quot; in a faint, high-pitched voice.&quot;)
+            s = (self,&quot;'s string reels back in, and it chirps 
\&quot;&quot;,whrandom.choice(self.dollSpeech),&quot;\&quot; in a faint, high-pitched voice.&quot;)
         elif f &lt; 0.7:
-            self.broadcast(self,&quot;'s string reels itself back in, and it 
says, \&quot;&quot;,whrandom.choice(self.dollSpeech),&quot;\&quot; in a faint, high-pitched 
voice.&quot;)
+            s = (self,&quot;'s string reels itself back in, and it says, 
\&quot;&quot;,whrandom.choice(self.dollSpeech),&quot;\&quot; in a faint, high-pitched voice.&quot;)
         else:
-            self.broadcast(&quot;As &quot;,self,&quot;'s string reels in, it squeaks 
\&quot;&quot;,whrandom.choice(self.dollSpeech),&quot;\&quot;&quot;)
+            s = (&quot;As &quot;,self,&quot;'s string reels in, it squeaks 
\&quot;&quot;,whrandom.choice(self.dollSpeech),&quot;\&quot;&quot;)
+        self.broadcastToPair(sentence.subject,
+                             to_subject=&quot;&quot;,
+                             to_target=s,
+                             to_other=&quot;&quot;)
 
 
     def verb_squeeze(self, sentence):
@@ -202,7 +206,11 @@
 
         Now you can be just like eidos!
         &quot;&quot;&quot;
-        self.broadcast(self,&quot; emits a faint squeak as it lands on the 
floor.&quot;)
+        if self.location._hasIntelligence():
+            # self.broadcast(self,&quot; emits a faint squeak as it lands on 
the floor.&quot;)
+            self.broadcastToPair(sentence.subject, to_subject='',
+                                 to_target = (self,&quot; emits a faint squeak 
as it lands on the floor.&quot;),
+                                 to_other = '')
         raise error.InappropriateVerb()
 
 class Fountain(thing.Thing):



I will make fixing up the broadcast() and hears() routines my priority 
unless someone else wants to do it. I have not submitted any patches for 
this yet because I am still working on it.

I suggest renaming InappropriateVerb to PassVerb. TADS uses pass when a verb has been &quot;over-written&quot; as in 
this case.

What is the story behind the brass cockroach :)

Cheers,
ChrisH



-- 
This transmission is for the intended addressee only and is confidential
information.  If you have received this transmission in error, please
delete it and notify the sender.  The contents of this e-mail are the
opinion of the writer only and are not endorsed by the Mincom Group
of companies unless expressly stated otherwise.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000340.html">[Twisted-Python] Re: [Twisted-commits] CVS: Twisted/twisted/python otp.py,NONE,1.1
</A></li>
	<LI>Next message: <A HREF="000338.html">[Twisted-Python] Reality Servers - diffs included
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#336">[ date ]</a>
              <a href="thread.html#336">[ thread ]</a>
              <a href="subject.html#336">[ subject ]</a>
              <a href="author.html#336">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
