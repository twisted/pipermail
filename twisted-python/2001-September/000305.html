<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] remove a tcp.Port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20remove%20a%20tcp.Port&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000304.html">
   <LINK REL="Next"  HREF="000308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] remove a tcp.Port</H1>
    <B>Maj-Britt Bruheim</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20remove%20a%20tcp.Port&In-Reply-To="
       TITLE="[Twisted-Python] remove a tcp.Port">bruheim at c2i.net
       </A><BR>
    <I>Sat Sep  1 12:49:48 EDT 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000304.html">[Twisted-Python] twisted.ftp status, and metadatafs
</A></li>
        <LI>Next message: <A HREF="000308.html">[Twisted-Python] remove a tcp.Port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#305">[ date ]</a>
              <a href="thread.html#305">[ thread ]</a>
              <a href="subject.html#305">[ subject ]</a>
              <a href="author.html#305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, 

The first bug I ran into with twisted.ftp is that after 15 tcp.Ports has been opened and closed, skt.Listen starts to fail. This is due to the fact that when calling Port.loseConnection, the actual code called is Server.loseConnection which does not removeReader (actually, the Port.loseConnection is broken, since it calls removeReader and not main.removeReader). Well, there's seems to be two types of behaviour intended with the code, and of course, calling a loseConnection to the server shouldn't remove it entirely, but there should be a function doing that. Another thing, the limit for maximum Ports, where is it? And can shouldn't it be configurable?

And here follows the somewhat confusing traceback. Note that this is upon re-connecting the ftp-server. When the client can't connect to the server, there's nothing on the log.
01/09/2001 18:38 [FTP,1,127.0.0.1] Traceback (most recent call last):
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\internet\main.py&quot;, line 267, in doSelect
01/09/2001 18:38 [FTP,1,127.0.0.1] why = getattr(selectable, method)()
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\internet\tcp.py&quot;, line 82, in doRead
01/09/2001 18:38 [FTP,1,127.0.0.1] return self.protocol.dataReceived(data)
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\protocols\ftp.py&quot;, line 590, in dataReceived
01/09/2001 18:38 [FTP,1,127.0.0.1] self.processLine(line)
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\protocols\ftp.py&quot;, line 583, in processLine
01/09/2001 18:38 [FTP,1,127.0.0.1] n = method(params)
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\protocols\ftp.py&quot;, line 433, in ftp_Pasv
01/09/2001 18:38 [FTP,1,127.0.0.1] self.createPassiveServer()
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\protocols\ftp.py&quot;, line 379, in createPassiveServer
01/09/2001 18:38 [FTP,1,127.0.0.1] self.dtpPort.startListening()
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;c:\dev\twisted\twisted\internet\tcp.py&quot;, line 297, in startListening
01/09/2001 18:38 [FTP,1,127.0.0.1] skt.listen(self.backlog)
01/09/2001 18:38 [FTP,1,127.0.0.1] File &quot;&lt;string&gt;&quot;, line 1, in listen
01/09/2001 18:38 [FTP,1,127.0.0.1] error: (10055, 'No buffer space available')





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000304.html">[Twisted-Python] twisted.ftp status, and metadatafs
</A></li>
	<LI>Next message: <A HREF="000308.html">[Twisted-Python] remove a tcp.Port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#305">[ date ]</a>
              <a href="thread.html#305">[ thread ]</a>
              <a href="subject.html#305">[ subject ]</a>
              <a href="author.html#305">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
