<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] untwisting twistd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20untwisting%20twistd&In-Reply-To=0C40B34038FD824FACDB387E7788728702C6C4E1%40seaxch08.desktop.isilon.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019861.html">
   <LINK REL="Next"  HREF="019865.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] untwisting twistd</H1>
    <B>Phil Christensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20untwisting%20twistd&In-Reply-To=0C40B34038FD824FACDB387E7788728702C6C4E1%40seaxch08.desktop.isilon.com"
       TITLE="[Twisted-Python] untwisting twistd">phil at bubblehouse.org
       </A><BR>
    <I>Wed Jun 24 11:18:29 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019861.html">[Twisted-Python] untwisting twistd
</A></li>
        <LI>Next message: <A HREF="019865.html">[Twisted-Python] untwisting twistd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19867">[ date ]</a>
              <a href="thread.html#19867">[ thread ]</a>
              <a href="subject.html#19867">[ subject ]</a>
              <a href="author.html#19867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jun 23, 2009, at 11:27 AM, Jared Gisin wrote:
&gt;<i> In order to fire up the app with sane default, I should be able to  
</I>&gt;<i> issue one command with no arguments as the defaults for all of those  
</I>&gt;<i> should be baked into the system.
</I>[snip]
&gt;<i> I guess in the mean time, I'll just write my own custom  
</I>&gt;<i> ServerOptions, which oddly, will mirror a bunch of code that already  
</I>&gt;<i> exists.
</I>
Based on your use case, you really shouldn't need to duplicate much  
functionality at all.

Here's one way to make a custom runner that uses all the guts of the  
twistd stuff, but overrides various options. This example sets the  
pidfile to 'web.pid' and automatically runs the 'web' sub-command:

     from twisted.application import app
     from twisted.scripts.twistd import runApp

     from twisted.python.runtime import platformType
     if platformType == &quot;win32&quot;:
         from twisted.scripts._twistw import ServerOptions
     else:
         from twisted.scripts._twistd_unix import ServerOptions

     class CustomServerOptions(ServerOptions):
         defaultSubCommand = 'web'
         optParameters = [
                          ['pidfile','','web.pid',
                           &quot;Name of the pidfile&quot;],
                         ]

     if __name__ == '__main__':
         app.run(runApp, CustomServerOptions)

The biggest complication here is selecting the correct ServerOptions  
file to use as a base. As it is, this example will pick the correct  
ServerOptions base, but sets the pidfile default no matter what, which  
isn't applicable to the windows options, AFAIK.

I'm not suggesting it couldn't be better, but I don't know what  
specific changes would need to be made to satisfy everyone (or mostly  
everyone).

-phil


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019861.html">[Twisted-Python] untwisting twistd
</A></li>
	<LI>Next message: <A HREF="019865.html">[Twisted-Python] untwisting twistd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19867">[ date ]</a>
              <a href="thread.html#19867">[ thread ]</a>
              <a href="subject.html#19867">[ subject ]</a>
              <a href="author.html#19867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
