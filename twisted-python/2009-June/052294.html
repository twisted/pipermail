<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Application Design help - Concurrent but	not	Protocols based.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Application%20Design%20help%20-%20Concurrent%20but%0A%09not%09Protocols%20based.&In-Reply-To=%3C20090610073318.GA7144%40ubuntu.ubuntu-domain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052270.html">
   <LINK REL="Next"  HREF="052264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Application Design help - Concurrent but	not	Protocols based.</H1>
    <B>Senthil Kumaran</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Application%20Design%20help%20-%20Concurrent%20but%0A%09not%09Protocols%20based.&In-Reply-To=%3C20090610073318.GA7144%40ubuntu.ubuntu-domain%3E"
       TITLE="[Twisted-Python] Application Design help - Concurrent but	not	Protocols based.">orsenthil at gmail.com
       </A><BR>
    <I>Wed Jun 10 01:33:18 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052270.html">[Twisted-Python] Application Design help - Concurrent but	not	Protocols based.
</A></li>
        <LI>Next message (by thread): <A HREF="052264.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52294">[ date ]</a>
              <a href="thread.html#52294">[ thread ]</a>
              <a href="subject.html#52294">[ subject ]</a>
              <a href="author.html#52294">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jun 03, 2009 at 10:43:34AM -0700, Minesh Patel wrote:

&gt;<i> For this, since your data is huge and seems like it will need a lot of
</I>&gt;<i> CPU utilization, you might have to deferToThread, since Twisted runs
</I>&gt;<i> in a single thread and will block AFAIK.
</I>&gt;<i> 
</I>&gt;<i> d = threads.deferToThread(do_a, arg1_to_do_a, arg2...)
</I>&gt;<i> d.addCallback(do_a2, ...)
</I>&gt;<i> 
</I>
I delayed and forgot to respond to this thread. Sorry for that.
Actually, I had asked the question on doing asynchronous monitoring of
new file arrival and then based on the file contents, doing tasks
a,b,c asynchronously.

Thank you for your responses. I got a number of pointers to look at.

* As a newbie to this world, I just started studying further.

I realized that in my application, I have the control form the client
on when I can notify that a particular file can be looked at.
So, for the time being, I just skipped the inotify linux system
related calls ( BTW, Twsited + inotify works great) and when ahead
with just implementing a Twisted a Server which listens to a
particular port and when receives data, will either read the file or
parse the data to do some activity (like fetch logs from database).

threads.deferToThread(func,[args]) is what I am using.

<A HREF="http://paste.pocoo.org/show/122155/">http://paste.pocoo.org/show/122155/</A>


I am still working out more details as doing this
threads.deferToThread calls effectively, because there could be number
of clients parallely requesting it and the data from my query
(internal function) could be so big that it might take 30 minutes to
service a request.

* Another thing is when using something like 
&quot;from datasources import query&quot;

I could not make it to application (.tac to run it from twistd), it
could nto find datasources in its PYTHONPATH. Got to figure out how to
do it, which I might pretty soon.


Thanks again,
Senthil



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052270.html">[Twisted-Python] Application Design help - Concurrent but	not	Protocols based.
</A></li>
	<LI>Next message (by thread): <A HREF="052264.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52294">[ date ]</a>
              <a href="thread.html#52294">[ thread ]</a>
              <a href="subject.html#52294">[ subject ]</a>
              <a href="author.html#52294">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
