<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Question about a custom byte oriented TCP protocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20about%20a%20custom%20byte%20oriented%20TCP%0A%20protocol&In-Reply-To=4d6ba3de0906020809g4a0a773bsdedaeb57273a627e%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019742.html">
   <LINK REL="Next"  HREF="019743.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Question about a custom byte oriented TCP protocol</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Question%20about%20a%20custom%20byte%20oriented%20TCP%0A%20protocol&In-Reply-To=4d6ba3de0906020809g4a0a773bsdedaeb57273a627e%40mail.gmail.com"
       TITLE="[Twisted-Python] Question about a custom byte oriented TCP protocol">exarkun at divmod.com
       </A><BR>
    <I>Tue Jun  2 12:40:08 EDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019742.html">[Twisted-Python] Question about a custom byte oriented TCP protocol
</A></li>
        <LI>Next message: <A HREF="019743.html">[Twisted-Python] wxreactor and win32eventreactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19744">[ date ]</a>
              <a href="thread.html#19744">[ thread ]</a>
              <a href="subject.html#19744">[ subject ]</a>
              <a href="author.html#19744">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2 Jun 2009 16:09:00 +0100, Michael Thompson &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">michaelnt at gmail.com</A>&gt; wrote:
&gt;<i>Hi,
</I>&gt;<i>   I'm trying to use twisted to talk to an existing system that uses a byte
</I>&gt;<i>oriented protocol stuffed inside a TCP packet. I have implemented this using
</I>&gt;<i>the IntNStringReceiver modified to look at some bytes to calculate the size
</I>&gt;<i>of the string to receive.
</I>&gt;<i>
</I>&gt;<i>For simple test cases where I send a single packet this works but if I send
</I>&gt;<i>multiple requests they all end up in the same tcp packet which the existing
</I>&gt;<i>server doesn't like. How can I ensure that only a single command\string is
</I>&gt;<i>sent per tcp packet?
</I>
In general, this is impossible.  TCP does not work that way.

For a specific application, you may be able to achieve this by only sending
another message after you *know* the server has received an earlier message.
You can probably achieve this if the server sends you back an acknowledgment
of each message - then you wait to receive an acknowledgment before sending
another message.

However, the purpose of IntNStringReceiver - arguably the sole purpose - is
to provide a &quot;framing&quot; layer for the messages being exchanged with it.  This
framing layer exists so that if messages do get squished together (or broken
up, as may also happen) by TCP, they can still be properly interpreted.  If
the server breaks when multiple commands/strings are received by it at once,
then perhaps it is broken and needs to be fixed.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019742.html">[Twisted-Python] Question about a custom byte oriented TCP protocol
</A></li>
	<LI>Next message: <A HREF="019743.html">[Twisted-Python] wxreactor and win32eventreactor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19744">[ date ]</a>
              <a href="thread.html#19744">[ thread ]</a>
              <a href="subject.html#19744">[ subject ]</a>
              <a href="author.html#19744">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
