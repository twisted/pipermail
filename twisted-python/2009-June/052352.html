<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] AsyncQueue is still unavailable
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AsyncQueue%20is%20still%20unavailable&In-Reply-To=%3Cm2k538gi2f.fsf%40valheru.db3l.homeip.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052351.html">
   <LINK REL="Next"  HREF="052354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] AsyncQueue is still unavailable</H1>
    <B>David Bolen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20AsyncQueue%20is%20still%20unavailable&In-Reply-To=%3Cm2k538gi2f.fsf%40valheru.db3l.homeip.net%3E"
       TITLE="[Twisted-Python] AsyncQueue is still unavailable">db3l.net at gmail.com
       </A><BR>
    <I>Fri Jun 19 13:05:44 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052351.html">[Twisted-Python] AsyncQueue is still unavailable
</A></li>
        <LI>Next message (by thread): <A HREF="052354.html">[Twisted-Python] adbapi : sqlite3.OperationalError : database is	locked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52352">[ date ]</a>
              <a href="thread.html#52352">[ thread ]</a>
              <a href="subject.html#52352">[ subject ]</a>
              <a href="author.html#52352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>mardiros &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mardiros at laposte.net</A>&gt; writes:

&gt;<i> I am looking in Storm for the moment.
</I>&gt;<i> I have copy the driver in the twisted-integration,
</I>&gt;<i> but it tries with the both driver pymssql and adodbapi,
</I>&gt;<i> and i think only the mxodbc worked.
</I>&gt;<i>
</I>&gt;<i> Now i execute deferred queryÂ  with a modified one,
</I>&gt;<i> and it work's fine.
</I>&gt;<i>
</I>&gt;<i> I will try orm feature now :-)
</I>
While it looks like there's some specific Twisted integration work
going on in a branch, from what I can see, the current mechanisms you
will need to use Storm with Twisted are the same as those you would
need to use to use SQLAlchemy with Twisted, so if you like the latter,
I don't see a big reason to switch.

That is, defer the ORM related (blocking) operations to their own
thread (ala deferToThread), and remember to detach any ORM objects
being returned to Twisted from the ORM itself.  With SQLAlchemy you'd
call expunge() on the objects or expunge_all() on the session.

If you need to make changes and save them, you would need to re-attach
the objects to a session before flushing to the database (also in a
dedicated thread).  With SQLAlchemy, this can be done with add() or
add_all() on a session.

I suspect you could wrap this behavior up in a fairly simple wrapper
class, without necessarily needing a third party library or package.

For me, I find SQLAlchemy very impressive, and I think it's
flexibility in defining how and when the ORM accesses the database and
clear management of the association of objects to sessions to be
helpful in this sort of integration. For example, you could still work
with defined relations at the object level as long as you ensured that
they were eager loaded while still running in the SA thread.  That
could either be by disabling lazy loading entirely for specific
relations, or by forcing an eager load for specific queries through
the eagerload() option.

It's also not quite clear what sort of transactions are involved from
your original post.  Although you mention preferring an ORM, if you
just need to issue some basic queries/updates against an existing
database schema, you might at least also consider straight SQL.  In
that case, SQLAlchemy's SQL layer can still provide a lot of support
(to avoid writing raw SQL) but not bring in all the ORM overhead.

-- David

PS: Even if you found a current copy of sAsync, based on some comments
the author posted in a thread back in March, I don't think sAsync
supports the ORM features of SQLAlchemy, but just the SQL layer.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052351.html">[Twisted-Python] AsyncQueue is still unavailable
</A></li>
	<LI>Next message (by thread): <A HREF="052354.html">[Twisted-Python] adbapi : sqlite3.OperationalError : database is	locked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52352">[ date ]</a>
              <a href="thread.html#52352">[ thread ]</a>
              <a href="subject.html#52352">[ subject ]</a>
              <a href="author.html#52352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
