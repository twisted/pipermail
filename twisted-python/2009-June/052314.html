<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Need working examples of imap4 client.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Need%20working%20examples%20of%20imap4%20client.&In-Reply-To=%3Cb3a40fea0906121842kb549322mcf32aac8066580d3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="052310.html">
   <LINK REL="Next"  HREF="052307.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Need working examples of imap4 client.</H1>
    <B>Pywinder Singh</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Need%20working%20examples%20of%20imap4%20client.&In-Reply-To=%3Cb3a40fea0906121842kb549322mcf32aac8066580d3%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Need working examples of imap4 client.">pywinder at monkeydriveengine.com
       </A><BR>
    <I>Fri Jun 12 19:42:55 MDT 2009</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="052310.html">[Twisted-Python] Need working examples of imap4 client.
</A></li>
        <LI>Next message (by thread): <A HREF="052307.html">[Twisted-Python] Need working examples of imap4 client.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52314">[ date ]</a>
              <a href="thread.html#52314">[ thread ]</a>
              <a href="subject.html#52314">[ subject ]</a>
              <a href="author.html#52314">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alex,

That link was invaluable.

Twisted docs + project deadlines + my own ignorance = I completely had the
wrong idea about how to set up SSL. Code worked like a charm, and now I'm
very happy not to have to finish the project using python's native imaplib.

I'll certainly share the fruits of my labour with this list.

Thanks again....


On Fri, Jun 12, 2009 at 4:40 AM, Alex Clemesha &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">clemesha at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I've wondered myself how to do this, so thanks Phil.
</I>&gt;<i>
</I>&gt;<i> I extended Phil's solution to work with Gmail, which boils
</I>&gt;<i> down to using SSL and setting the correct servername and port, see here:
</I>&gt;<i> <A HREF="http://gist.github.com/128521">http://gist.github.com/128521</A>
</I>&gt;<i>
</I>&gt;<i> Pywinder, you should be able to just change the username/password
</I>&gt;<i> and it will work for you (you might have to have the python ssl module
</I>&gt;<i> installed - post again if that is the case and it's not working for you)
</I>&gt;<i>
</I>&gt;<i> How to do useful stuff with the 'mailboxes' function in the script is
</I>&gt;<i> another question (which I dont know the answer to).  Maybe post
</I>&gt;<i> your usage if you have a chance.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -Alex
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Thu, Jun 11, 2009 at 5:45 PM, Pywinder
</I>&gt;<i> Singh&lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">pywinder at monkeydriveengine.com</A>&gt; wrote:
</I>&gt;<i> &gt; Phil,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Much obliged.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Was able to isolate and confirm that the real issue is that login is
</I>&gt;<i> hanging
</I>&gt;<i> &gt; for some reason, and causing the timeout message. I suspect SSL/TLS
</I>&gt;<i> issues,
</I>&gt;<i> &gt; which at least gives me a decided place to start investigating.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks again for the code, it was sanity inducing to say the least. ;)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Phil Mayers wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Pywinder Singh wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Ideally, I'd love to see a snipped which is able to log into an imap
</I>&gt;<i> &gt;&gt; &gt; server and gets a list of mailboxes.  If the example on the site works
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Here you go:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; #!/usr/bin/python
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; from twisted.internet import reactor, protocol, defer
</I>&gt;<i> &gt;&gt; from twisted.mail import imap4
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; # change these...
</I>&gt;<i> &gt;&gt; username = '?'
</I>&gt;<i> &gt;&gt; password = '?'
</I>&gt;<i> &gt;&gt; servername = '?'
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; def mailboxes(list):
</I>&gt;<i> &gt;&gt;      for flags,sep,mbox in list:
</I>&gt;<i> &gt;&gt;          print mbox
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; def loggedin(res, proto):
</I>&gt;<i> &gt;&gt;      d = proto.list('','*')
</I>&gt;<i> &gt;&gt;      d.addCallback(mailboxes)
</I>&gt;<i> &gt;&gt;      return d
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; def connected(proto):
</I>&gt;<i> &gt;&gt;      print &quot;connected&quot;, proto
</I>&gt;<i> &gt;&gt;      d = proto.login(username, password)
</I>&gt;<i> &gt;&gt;      d.addCallback(loggedin, proto)
</I>&gt;<i> &gt;&gt;      return d
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; def failed(f):
</I>&gt;<i> &gt;&gt;      print &quot;failed&quot;, f
</I>&gt;<i> &gt;&gt;      return f
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; def done(_):
</I>&gt;<i> &gt;&gt;      reactor.callLater(0, reactor.stop)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; def main():
</I>&gt;<i> &gt;&gt;      c = protocol.ClientCreator(reactor, imap4.IMAP4Client)
</I>&gt;<i> &gt;&gt;      d = c.connectTCP(servername, 143)
</I>&gt;<i> &gt;&gt;      d.addCallbacks(connected, failed)
</I>&gt;<i> &gt;&gt;      d.addBoth(done)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; reactor.callLater(0, main)
</I>&gt;<i> &gt;&gt; reactor.run()
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This example makes use of deferred chaining i.e. returning a deferred
</I>&gt;<i> &gt;&gt; from a callback handler, so you'll want to understand that.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; Twisted-Python mailing list
</I>&gt;<i> &gt; <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> &gt; <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Alex Clemesha
</I>&gt;<i> clemesha.org
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20090612/22b8829b/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="052310.html">[Twisted-Python] Need working examples of imap4 client.
</A></li>
	<LI>Next message (by thread): <A HREF="052307.html">[Twisted-Python] Need working examples of imap4 client.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#52314">[ date ]</a>
              <a href="thread.html#52314">[ thread ]</a>
              <a href="subject.html#52314">[ subject ]</a>
              <a href="author.html#52314">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
