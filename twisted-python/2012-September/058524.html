<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] implementing NAMES in IRC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=%3C20120911134317.27659.2034342639.divmod.xquotient.7%40localhost6.localdomain6%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058523.html">
   <LINK REL="Next"  HREF="058525.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] implementing NAMES in IRC</H1>
    <B>exarkun at twistedmatrix.com</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=%3C20120911134317.27659.2034342639.divmod.xquotient.7%40localhost6.localdomain6%3E"
       TITLE="[Twisted-Python] implementing NAMES in IRC">exarkun at twistedmatrix.com
       </A><BR>
    <I>Tue Sep 11 07:43:17 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058523.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
        <LI>Next message (by thread): <A HREF="058525.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58524">[ date ]</a>
              <a href="thread.html#58524">[ thread ]</a>
              <a href="subject.html#58524">[ subject ]</a>
              <a href="author.html#58524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10:49 am, <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A> wrote:
&gt;<i>On Tue, Sep 11, 2012 at 6:05 AM, Glyph &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">glyph at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i>Such a bug may already exist - if you wouldn't mind, would you search 
</I>&gt;&gt;<i>for
</I>&gt;&gt;<i>it, and if you can't find it, file a new one?
</I>&gt;<i>
</I>&gt;<i>I don't know if there's an existing bug or not, but implementing a
</I>&gt;<i>names() method is problematic. The natural API would be something like
</I>&gt;<i>names('#foo') -&gt; Deferred firing with a list of names in the channel.
</I>&gt;<i>The difficulty in implementing this comes from the fact that there are
</I>&gt;<i>two possible results from issuing a NAMES command on IRC: a serious of
</I>&gt;<i>zero or more RPL_NAMREPLY messages followed by an RPL_ENDOFNAMES
</I>&gt;<i>message, *or* any error message the IRC server feels like. There are a
</I>&gt;<i>number of partial workarounds for this, involving various combinations
</I>&gt;<i>of queues, timeouts, and unreliable detection of responses, but none
</I>&gt;<i>of them seem particularly satisfactory to me.
</I>
This is the excuse that is always given for not implementing a new 
feature on `IRCClient`.  However, here's another equivalent way of 
stating the objection:

  IRC is a terrible protocol and it is very difficult to implement a
  method like `names` reliably, due to the various vague and obscure
  corner cases presented.  Therefore, instead of Twisted tackling this
  problem and providing a single (perhaps imperfect) implementation,
  every single IRC application developer should instead rediscover this
  sad reality for themselves and then implement their own uniquely buggy
  version of this functionality.

Hopefully, cast in that light, it's a bit more clear why this might not 
be a reasonable argument.

I can think of other arguments against adding a `names` (or similar) 
method to `IRCClient`, but since it's not likely anyone is actually 
going to step up and do any work on `irc.py` anyway, I don't feel the 
need to make them (and I'd much rather someone actually maintain 
`irc.py`).

Jean-Paul
&gt;<i>(On the other hand, a method that just sends NAMES #foo without any
</I>&gt;<i>response handling would be pretty straightforward to implement, maybe
</I>&gt;<i>that's what you meant?)
</I>&gt;<i>--
</I>&gt;<i>mithrandi, i Ainil en-Balandor, a faer Ambar
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Twisted-Python mailing list
</I>&gt;<i><A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i><A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058523.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
	<LI>Next message (by thread): <A HREF="058525.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58524">[ date ]</a>
              <a href="thread.html#58524">[ thread ]</a>
              <a href="subject.html#58524">[ subject ]</a>
              <a href="author.html#58524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
