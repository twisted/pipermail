<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Fitting cred into my application
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Fitting%20cred%20into%20my%20application&In-Reply-To=%3CCAOp9P3pxPypiBr-DbfC13pF%2BBwOAptCiu-Nc1%3DApC%3DLNMKevTA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058541.html">
   <LINK REL="Next"  HREF="058543.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Fitting cred into my application</H1>
    <B>Itamar Turner-Trauring</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20Fitting%20cred%20into%20my%20application&In-Reply-To=%3CCAOp9P3pxPypiBr-DbfC13pF%2BBwOAptCiu-Nc1%3DApC%3DLNMKevTA%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] Fitting cred into my application">itamar at futurefoundries.com
       </A><BR>
    <I>Sat Sep 22 19:36:22 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058541.html">[Twisted-Python] Fitting cred into my application
</A></li>
        <LI>Next message (by thread): <A HREF="058543.html">[Twisted-Python] Fitting cred into my application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58542">[ date ]</a>
              <a href="thread.html#58542">[ thread ]</a>
              <a href="subject.html#58542">[ subject ]</a>
              <a href="author.html#58542">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Sep 22, 2012 at 4:37 PM, Matthew Pounsett &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">matt at conundrum.com</A>&gt;wrote:

&gt;<i> Hi.  I've been trying to wrap my head around the cred implementation for a
</I>&gt;<i> while now, but either I'm missing something, or there's some piece of
</I>&gt;<i> documentation that could be better.  Probably at least a bit of both.
</I>&gt;<i>
</I>&gt;<i> My application is an XMLRPC server, and an authenticated client should
</I>&gt;<i> have rights to run some RPC methods, but not others.  Some methods will
</I>&gt;<i> give access to limited data based on authentication.
</I>&gt;<i>
</I>&gt;<i> The documentation for cred is clear in the case where the server has its
</I>&gt;<i> own protocol implementation, but in the case of XMLRPC, where the protocol
</I>&gt;<i> isn't subclassed, how to link it in is far less clear.  Also, since the
</I>&gt;<i> design suggests that it's the RPC methods that need to talk to the avatar,
</I>&gt;<i> not the protocol, how to implement cred seems even less obvious.
</I>&gt;<i>
</I>&gt;<i> Are there some other examples of cred implementations floating around that
</I>&gt;<i> I can look at, where lack of authentication does not block all access to
</I>&gt;<i> the protocol?  In particular an example combining XMLRPC and cred would
</I>&gt;<i> make my day.  Does any documentation or example code along those lines
</I>&gt;<i> exist that I just haven't found yet?
</I>&gt;<i>
</I>
There's three parts to doing this:

   1. When setting up the portal, in addition to the credential checker
   that knows about regular users, also register a
   twisted.cred.checkers.AllowAnonymousAccess.
   2. When you have no credentials, the xml-rpc layer should login to the
   portal using a twisted.cred.credentials.Anonymous credential. When you do
   have credentials, pass them in as you normally.
   3. Now as part of a login your realm gets either a username, or a
   twisted.cred.checkers.ANONYMOUS as the avatar id that is being requested.
   Based on what it gets your realm should return a different business logic
   implementation (aka &quot;avatar&quot;); the anonymous one can do less, say.

twisted.web.guard does #2; the way it is implemented, the business logic
object (avatar) that is returned is a web Resource, so the realm can return
a different Resource depending on whether there's HTTP credentials or not
(the latter case being avatar id of ANONYMOUS). It's possible you just want
to use guard, if you're relying on HTTP authentication - just return
different XMLRPC objects. Alternatively, the XMLRPC layer could log-in to
the portal, in which case it would get back different business logic
objects with different capabilities.

An example of a full setup is twisted.protocols.ftp combined with
twisted.tap.ftp, the ftp plugin for twistd, but the details are a bit
spread out. You should be able to find all three of those parts though.

-- 
Itamar Turner-Trauring, Future Foundries LLC
<A HREF="http://futurefoundries.com/">http://futurefoundries.com/</A> â€” Twisted consulting, training and support.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;/pipermail/twisted-python/attachments/20120922/9914f811/attachment.html&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058541.html">[Twisted-Python] Fitting cred into my application
</A></li>
	<LI>Next message (by thread): <A HREF="058543.html">[Twisted-Python] Fitting cred into my application
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58542">[ date ]</a>
              <a href="thread.html#58542">[ thread ]</a>
              <a href="subject.html#58542">[ subject ]</a>
              <a href="author.html#58542">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
