<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] unhandled exception in deferred has a delayed	logging ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unhandled%20exception%20in%20deferred%20has%20a%20delayed%0A%09logging%20%3F&In-Reply-To=%3C79DEDF8C-7918-4209-8849-CC04F5DFE6BE%402xlp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058554.html">
   <LINK REL="Next"  HREF="058556.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] unhandled exception in deferred has a delayed	logging ?</H1>
    <B>Jonathan Vanasco</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20unhandled%20exception%20in%20deferred%20has%20a%20delayed%0A%09logging%20%3F&In-Reply-To=%3C79DEDF8C-7918-4209-8849-CC04F5DFE6BE%402xlp.com%3E"
       TITLE="[Twisted-Python] unhandled exception in deferred has a delayed	logging ?">twisted-python at 2xlp.com
       </A><BR>
    <I>Wed Sep 26 20:47:06 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058554.html">[Twisted-Python] unhandled exception in deferred has a delayed logging ?
</A></li>
        <LI>Next message (by thread): <A HREF="058556.html">[Twisted-Python] unhandled exception in deferred has a delayed logging ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58555">[ date ]</a>
              <a href="thread.html#58555">[ thread ]</a>
              <a href="subject.html#58555">[ subject ]</a>
              <a href="author.html#58555">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>thanks so much for the quick response, and i wish i thought of looking in the FAQ ( just searched online, and nothing relevant came up )

Will defer.setDebugging(True) make these errors print/log sooner ?   i'm in the process of getting all the addErrback() commands and making this app &quot;proper&quot;, which is how i found this out in the first place.  


On Sep 26, 2012, at 8:20 PM, Itamar Turner-Trauring wrote:

&gt;<i> On Wed, Sep 26, 2012 at 7:46 PM, Jonathan Vanasco &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">twisted-python at 2xlp.com</A>&gt; wrote:
</I>&gt;<i> while migrating some functionality to a deferred callback chain and debugging my app, i noticed this oddity...
</I>&gt;<i> 
</I>&gt;<i> if a function doesn't have the proper args/kwargs definition, no error is raised and everything just hangs
</I>&gt;<i> 
</I>&gt;<i> ...
</I>&gt;<i>  
</I>&gt;<i> then the reactor just seems to hang.
</I>&gt;<i> 
</I>&gt;<i> if i kill the process, then the Unhandled Error and Traceback message prints.
</I>&gt;<i> If i wait until the next interval that the timerservice runs, then the Unhandled Error and Traceback message will print then ( but that could be minutes/hours later ).
</I>&gt;<i> 
</I>&gt;<i> has anyone else noticed this before ?
</I>&gt;<i> 
</I>&gt;<i> The reactor isn't hanging, it's running just fine. The problem is you expect the Deferred's error to be logged immediately, which is not guaranteed; the error is only logged if the object is garbage collected, which may take a while, or never happen if you've kept extra references around. The latter can happen by accident.
</I>&gt;<i>  
</I>&gt;<i> are there any good ways around this , other than setting the timer service to be within seconds during bugtesting ?
</I>&gt;<i> 	• Add a logging errback to all Deferreds at the end of the callback chain: d.addErrback(log.err).
</I>&gt;<i> 	• Less effective, but also helpful, is making sure you delete all unnecessary references to a Deferred once you've fired it, to make sure it gets garbage collected:
</I>&gt;<i>    self.d.callback(None)
</I>&gt;<i>    del self.d # remove extra reference that prevents garbage collection
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://bit.ly/NS6ptj">http://bit.ly/NS6ptj</A> explains the issue.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Itamar Turner-Trauring, Future Foundries LLC
</I>&gt;<i> <A HREF="http://futurefoundries.com/">http://futurefoundries.com/</A> — Twisted consulting, training and support.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Twisted-Python mailing list
</I>&gt;<i> <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>
// Jonathan Vanasco

c. 646.729.6436  |  415.501.9815
e. <A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jonathan at 2xlp.com</A>
w. <A HREF="http://findmeon.com/user/jvanasco">http://findmeon.com/user/jvanasco</A> 
linkedin. <A HREF="http://linkedin.com/in/jonathanvanasco">http://linkedin.com/in/jonathanvanasco</A>
blog. <A HREF="http://destructuring.net">http://destructuring.net</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058554.html">[Twisted-Python] unhandled exception in deferred has a delayed logging ?
</A></li>
	<LI>Next message (by thread): <A HREF="058556.html">[Twisted-Python] unhandled exception in deferred has a delayed logging ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58555">[ date ]</a>
              <a href="thread.html#58555">[ thread ]</a>
              <a href="subject.html#58555">[ subject ]</a>
              <a href="author.html#58555">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
