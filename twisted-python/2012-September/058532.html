<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] implementing NAMES in IRC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=%3CCAMcKhMSJvV92RzgoRvG2maRwDHirr4bfgz9gOKyUd77qTYVNSg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="058531.html">
   <LINK REL="Next"  HREF="058528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] implementing NAMES in IRC</H1>
    <B>Tristan Seligmann</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=Re%3A%20%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=%3CCAMcKhMSJvV92RzgoRvG2maRwDHirr4bfgz9gOKyUd77qTYVNSg%40mail.gmail.com%3E"
       TITLE="[Twisted-Python] implementing NAMES in IRC">mithrandi at mithrandi.net
       </A><BR>
    <I>Tue Sep 11 18:29:47 MDT 2012</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="058531.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
        <LI>Next message (by thread): <A HREF="058528.html">[Twisted-Python] interface kombu with twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58532">[ date ]</a>
              <a href="thread.html#58532">[ thread ]</a>
              <a href="subject.html#58532">[ subject ]</a>
              <a href="author.html#58532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Sep 12, 2012 at 2:12 AM, Adrian Overbury &lt;<A HREF="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">skaarjj at gmail.com</A>&gt; wrote:
&gt;<i> However it is entirely possible to sanely parse and store replies in a reactionary system because the first component of an RPL_NAMREPLY message is the name of the channel it applies to.
</I>&gt;<i>
</I>&gt;<i> You can log or quietly drop replies that aren't for channels you're currently following, and use the others to build out some kind of structure that maintains an active list of users in that channel and their status (maintained through subsequent joins and parts).  Is this not so?  It doesn't sound that complicated to me.
</I>
Handling RPL_NAMREPLY/RPL_ENDOFNAMES responses in order to update a
list of users is perfectly feasible (most user-interactive IRC clients
do something of this nature); the problem is directly associating a
response with a request. If you send NAMES #code, there are three
possibilities: 1) the ircd sends you a sequence of
RPL_NAMREPLY/RPL_ENDOFNAMES with the list of users, 2) you get an
error response, 3) nothing happens. While 3) is unlikely, there's no
particular reason an ircd couldn't behave that way (I don't
specifically know of one, but in general, the IRC protocol and ircds
are written and designed with primarily the interactive use case in
mind, not automated agents). However, the real fly in the ointment is
2); there is no way to know what errors might be returned in response
to a NAMES message, and many of those responses will not even mention
the channel name, thus giving you no way to recognize that the request
will never &quot;complete&quot;. If you're keeping a deferred around to fire
with the response, then unless something else intervenes (a
cancellation timer?), the deferred will just hang around, which also
means keeping its callbacks and the objects they reference alive.

Thus, the problem is not with tracking the users in a channel in
general (although there are issues with tracking the channel modes of
those users...), but rather with specifically implementing an API like
names(channel) -&gt; Deferred firing with a list of names. If you're
willing to accept an arbitrary timeout and use that as the only (or at
least the primary) mechanism of failure detection, as well as a few
other compromises (in the area of &quot;overlapping&quot; requests for the same
channel), it would be possible, I just don't feel that the base
IRCClient class is the right place to implement things like this, and
I'd also discourage designing IRC clients (whether they are bots or
user-interactive clients) in a way that requires such an API.
-- 
mithrandi, i Ainil en-Balandor, a faer Ambar


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="058531.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
	<LI>Next message (by thread): <A HREF="058528.html">[Twisted-Python] interface kombu with twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#58532">[ date ]</a>
              <a href="thread.html#58532">[ thread ]</a>
              <a href="subject.html#58532">[ subject ]</a>
              <a href="author.html#58532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
