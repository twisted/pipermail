<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] implementing NAMES in IRC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=CAMcKhMRkpfXHW1rs54PkkuCrxmQR1T5GXD%2Bj4pSvUFyNPuQQYg%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026052.html">
   <LINK REL="Next"  HREF="026054.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] implementing NAMES in IRC</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=CAMcKhMRkpfXHW1rs54PkkuCrxmQR1T5GXD%2Bj4pSvUFyNPuQQYg%40mail.gmail.com"
       TITLE="[Twisted-Python] implementing NAMES in IRC">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Sep 11 12:46:47 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="026052.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
        <LI>Next message: <A HREF="026054.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26053">[ date ]</a>
              <a href="thread.html#26053">[ thread ]</a>
              <a href="subject.html#26053">[ subject ]</a>
              <a href="author.html#26053">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sep 11, 2012, at 9:12 AM, Tristan Seligmann &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">mithrandi at mithrandi.net</A>&gt; wrote:

&gt;<i> On Tue, Sep 11, 2012 at 3:43 PM,  &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at twistedmatrix.com</A>&gt; wrote:
</I>&gt;&gt;<i> This is the excuse that is always given for not implementing a new
</I>&gt;&gt;<i> feature on `IRCClient`.  However, here's another equivalent way of
</I>&gt;&gt;<i> stating the objection:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>  IRC is a terrible protocol and it is very difficult to implement a
</I>&gt;&gt;<i>  method like `names` reliably, due to the various vague and obscure
</I>&gt;&gt;<i>  corner cases presented.  Therefore, instead of Twisted tackling this
</I>&gt;&gt;<i>  problem and providing a single (perhaps imperfect) implementation,
</I>&gt;&gt;<i>  every single IRC application developer should instead rediscover this
</I>&gt;&gt;<i>  sad reality for themselves and then implement their own uniquely buggy
</I>&gt;&gt;<i>  version of this functionality.
</I>&gt;<i> 
</I>&gt;<i> Actually, my recommendation would be to avoid trying to implement
</I>&gt;<i> functionality of this nature in any application at all. The only way
</I>&gt;<i> to reliably use the NAMES command is the way
</I>&gt;<i> twisted.words.im.ircsupport and real IRC clients do: handle
</I>&gt;<i> RPL_NAMREPLY / RPL_ENDOFNAMES without regard to any NAMES command you
</I>&gt;<i> may or may not have issued, and then issue a NAMES command at certain
</I>&gt;<i> points without any regard for a response that may or may not be sent
</I>&gt;<i> to you by the IRC server. Having said that, I guess IRCClient could
</I>&gt;<i> handle the parsing of RPL_NAMREPLY / RPL_ENDOFNAMES messages into a
</I>&gt;<i> single list of names, which could then be delivered as a single event.
</I>
So... you're recommending exactly what twisted.words.im already does? :)  (This is another area of the code that could use a maintainer, but its design is less horrible than its lack of testing and lack of coding standard compliance might imply.)

Keep in mind that we can assume to have control over outgoing traffic on our own IRC connection.  If you've already issued one .names(), then another outgoing one doesn't have to send an additional command and try to do weird Deferred-stacking stuff.  It just has to delay sending the actual NAMES request until the previous one has come back, or perhaps just fire both Deferreds with a single response.

-glyph
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026052.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
	<LI>Next message: <A HREF="026054.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26053">[ date ]</a>
              <a href="thread.html#26053">[ thread ]</a>
              <a href="subject.html#26053">[ subject ]</a>
              <a href="author.html#26053">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
