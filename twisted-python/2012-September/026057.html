<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] implementing NAMES in IRC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=CAA0H%2BQQm0UXQoZAXuZ3ihdo-xvvO%3DOz5fe_rfKF%2B73j-QWi_EQ%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026056.html">
   <LINK REL="Next"  HREF="026058.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] implementing NAMES in IRC</H1>
    <B>Glyph</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20implementing%20NAMES%20in%20IRC&In-Reply-To=CAA0H%2BQQm0UXQoZAXuZ3ihdo-xvvO%3DOz5fe_rfKF%2B73j-QWi_EQ%40mail.gmail.com"
       TITLE="[Twisted-Python] implementing NAMES in IRC">glyph at twistedmatrix.com
       </A><BR>
    <I>Tue Sep 11 19:58:25 EDT 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="026056.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
        <LI>Next message: <A HREF="026058.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26057">[ date ]</a>
              <a href="thread.html#26057">[ thread ]</a>
              <a href="subject.html#26057">[ subject ]</a>
              <a href="author.html#26057">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Sep 11, 2012, at 3:01 PM, Jasper St. Pierre &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jstpierre at mecheye.net</A>&gt; wrote:

&gt;<i> Additionally, IRC daemons may play tricks and send out &quot;replies&quot; that
</I>&gt;<i> doesn't associate with any request you've sent, as a means to have a
</I>&gt;<i> client perform a specific action; for instance, bouncers usually send
</I>&gt;<i> join replies without any associated requests method of forcing a
</I>&gt;<i> client to open a buffer for a particular channel, and certain networks
</I>&gt;<i> also use this same technique to force users on specific channels all
</I>&gt;<i> the time (and they will also make a PART request on this particular
</I>&gt;<i> channel fail).
</I>
It's not exactly that they're &quot;forcing&quot; users (or clients) to do anything. They're just notifying the user that they're in a particular channel.  In other words, the &quot;forcing&quot; is all done server-side, not in the protocol itself.

&gt;<i> These two things mean that you cannot have a Deferred-based API for
</I>&gt;<i> IRC, where each request correlates to one response, and instead need
</I>&gt;<i> to have a reactionary system where you cast a NAMES out to the wind,
</I>&gt;<i> and just implement some sane behavior on every RPL_NAMREPLY you get,
</I>&gt;<i> independent of what triggered it.
</I>
This is actually a better way to structure applications in general, even for much more sanely structured protocols than IRC.

One subtle point about Twisted is that while Deferreds make it a lot easier to manage sequential work-flow in an event driven system, it is sequential work-flow itself that is the problem in many cases.  You should always try to write your protocols so they can react to any valid input at any time, not rigidly structure everything so that your state is always shoehorned into a request/response structure so all your state is encapsulated in stack frames in closures that are added as callbacks on Deferreds.

If I were designing a new chat protocol today, I'd definitely make sure it had a &quot;you joined a conversation&quot; message that did not have to be a response to any particular &quot;I'd like to join a conversation&quot; message :-).

-glyph

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20120911/1ab4156b/attachment-0001.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20120911/1ab4156b/attachment-0001.htm</A> 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026056.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
	<LI>Next message: <A HREF="026058.html">[Twisted-Python] implementing NAMES in IRC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26057">[ date ]</a>
              <a href="thread.html#26057">[ thread ]</a>
              <a href="subject.html#26057">[ subject ]</a>
              <a href="author.html#26057">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
