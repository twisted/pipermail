<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Couched 0.1: CouchDB twisted client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Couched%200.1%3A%20CouchDB%20twisted%20client&In-Reply-To=20080905105116.29191.1735349546.divmod.quotient.21964%40ohm">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018342.html">
   <LINK REL="Next"  HREF="018358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Couched 0.1: CouchDB twisted client</H1>
    <B>Henrik Thostrup Jensen</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Couched%200.1%3A%20CouchDB%20twisted%20client&In-Reply-To=20080905105116.29191.1735349546.divmod.quotient.21964%40ohm"
       TITLE="[Twisted-Python] Couched 0.1: CouchDB twisted client">thostrup at gmail.com
       </A><BR>
    <I>Fri Sep  5 19:25:36 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018342.html">[Twisted-Python] Couched 0.1: CouchDB twisted client
</A></li>
        <LI>Next message: <A HREF="018358.html">[Twisted-Python] Couched 0.1: CouchDB twisted client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18356">[ date ]</a>
              <a href="thread.html#18356">[ thread ]</a>
              <a href="subject.html#18356">[ subject ]</a>
              <a href="author.html#18356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2008/9/5 Jean-Paul Calderone &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">exarkun at divmod.com</A>&gt;

&gt;<i> On Fri, 5 Sep 2008 09:48:08 +0200, Henrik Thostrup Jensen &lt;
</I>&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">thostrup at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> [snip]
</I>&gt;&gt;<i> Twisted web is currently not an option (I need request pipelining and http
</I>&gt;&gt;<i> 1.1).
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Which other HTTP 1.1 features do you need?
</I>&gt;<i>
</I>
HTTP 1.1 status codes, notable 303 (see other). I could probably use 302,
but 303 is the &quot;correct&quot; behaviour for my case. This should be relatively
easy to implement.

Furthermore I need the server to support large uploads (last i checked the
640K limitation was still there) and downloads, and with reasonable
efficiancy.  I'm not saying streams are the answer but it works for me
(actually I use the producer/consumer interface in my lower level code and
then adapt it in the web layer). Unfortunately I've had to rewrite a lot of
the producer/consumer code and stream stuff and glue it together, as some of
the stuff in twisted (not just in web2) is rather broken. For complete
insanity (sorry to whoever wrote it ) see
twisted.protocols.basic.FileSender, which implements its own magic method
beginFileTransfer, which takes BOTH a file and a consumer as argument. This
makes is impossible to seperate the construction of the producer and
starting the transfer.

Ticket #1956 fixes some of these things. I'm not quite sure how it handles
errors (which can happen both ways), but I've just had a quick look. It's
been a whlie since i've had a look at all this. I write a bit about it,
which I've placed here: <A HREF="http://www.cs.aau.dk/~htj/prodcons.txt">http://www.cs.aau.dk/~htj/prodcons.txt</A>

IMHO, getting (and deciding on) a proper producer/consumer interface need to
happen, to make whatever web things twisted will have usefull. Changing the
producer/consumer might be massive API break, however it is a needed one.
There are simply things the current API cannot do (i usually return a
deferred along with any producer/consumer object to indiciate how the data
moving went). I might be interested in participating in this, however I'm
rather work struck as I have to hand my ph.d. thesis at the end of this
year.

Btw. I really am a huge fan of twisted, however the web and
producer/consumer is a rather dark spot in an otherwise bright world :-)


-- 
- Henrik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20080906/8bbc5c3a/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20080906/8bbc5c3a/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018342.html">[Twisted-Python] Couched 0.1: CouchDB twisted client
</A></li>
	<LI>Next message: <A HREF="018358.html">[Twisted-Python] Couched 0.1: CouchDB twisted client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18356">[ date ]</a>
              <a href="thread.html#18356">[ thread ]</a>
              <a href="subject.html#18356">[ subject ]</a>
              <a href="author.html#18356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
