<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Re: DOUBTS PLEASE SOLVE
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20DOUBTS%20PLEASE%20SOLVE&In-Reply-To=d13e157d0809300842q70838c3ex55c09e56c57c6213%40mail.gmail.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018450.html">
   <LINK REL="Next"  HREF="018452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Re: DOUBTS PLEASE SOLVE</H1>
    <B>shweta mani</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Re%3A%20DOUBTS%20PLEASE%20SOLVE&In-Reply-To=d13e157d0809300842q70838c3ex55c09e56c57c6213%40mail.gmail.com"
       TITLE="[Twisted-Python] Re: DOUBTS PLEASE SOLVE">shweta3230 at gmail.com
       </A><BR>
    <I>Tue Sep 30 11:54:03 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018450.html">[Twisted-Python] Re: DOUBTS PLEASE SOLVE
</A></li>
        <LI>Next message: <A HREF="018452.html">[Twisted-Python] Re: DOUBTS PLEASE SOLVE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18451">[ date ]</a>
              <a href="thread.html#18451">[ thread ]</a>
              <a href="subject.html#18451">[ subject ]</a>
              <a href="author.html#18451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>from twisted.conch import error

from twisted.conch.ssh import transport, connection, keys, userauth,
channel, common

from twisted.internet import defer, protocol, reactor
import re
import Tkinter
from Tkinter import *
from tkMessageBox import *
from os.path import exists
from Tkinter import *
import commands
#from DT import demo
import shutil
from os.path import exists
import ftplib
import sys
from ftplib import FTP
from tkMessageBox import *
from tkFileDialog import asksaveasfilename
import string
from os import popen
from re import split
import Tkinter
import os

win = Tkinter.Tk();
Label(win,text='CARD UPLOAD UTILITY').pack(side=TOP)








        #btn=Tkinter.Button(win,text='LIST ALL SUB FILES',command =(lambda :
slist()))
        #btn.pack(side=BOTTOM)



def submit():
    login=textlog.get()
    password=textpass.get()
    if login==&quot;&quot; or password==&quot;&quot;:
        showinfo('ERROR','PLEASE FILL THE NECESSARY DETAILS ')
    elif login=='m' and password=='m':

        print 'HELLO USER'
        top.withdraw()#closes current window
        import sys, getpass

        server = '10.144.17.2'

        command = 'ls -l'

        username = 'cteam'

        password = 'cteam'



        factory = ClientCommandFactory( username, password, command)

        reactor.connectTCP(server, 22, factory)

        reactor.run( )



class ClientCommandTransport(transport.SSHClientTransport):


    def __init__(self, username, password, command):

        self.username = username

        self.password = password

        self.command = command
        print &quot;username&quot;,username
        print &quot;password&quot;,password
        print &quot;command&quot;,command


    def verifyHostKey(self, pubKey, fingerprint):

        # in a real app, you should verify that the fingerprint matches

        # the one you expected to get from this server

        return defer.succeed(True)



    def connectionSecure(self):

        self.requestService(

            PasswordAuth(self.username, self.password,

                         ClientConnection(self.command)))



class PasswordAuth(userauth.SSHUserAuthClient):

    def __init__(self, user, password, connection):

        userauth.SSHUserAuthClient.__init__(self, user, connection)

        self.password = password



    def getPassword(self, prompt=None):

        return defer.succeed(self.password)



class ClientConnection(connection.SSHConnection):

    def __init__(self, cmd, *args, **kwargs):

        connection.SSHConnection.__init__(self)

        self.command = cmd



    def serviceStarted(self):

        self.openChannel(CommandChannel(self.command, conn=self))



class CommandChannel(channel.SSHChannel):

    name = 'session'



    def __init__(self, command, *args, **kwargs):

        channel.SSHChannel.__init__(self, *args, **kwargs)

        self.command = command



    def channelOpen(self, data):

        self.conn.sendRequest(

            self, 'exec', common.NS(self.command),
wantReply=True).addCallback(

            self._gotResponse)



    def _gotResponse(self, _):

        self.conn.sendEOF(self)

    def dataReceived(self, data):
        #self.dat=date
        print &quot;nenu&quot;,data
        dat=data
        #print&quot;nenu1&quot;,dat
        lis(dat)
def lis(m):


        Label(win,text='%s'%m).pack(side=TOP)

        dirfm = Frame(win)
        dirsa=Scrollbar(dirfm)
        dirsb= Scrollbar(dirfm)
        dirsb.pack(side = RIGHT, fill =Y)

        dirs = Listbox(dirfm,height = 50, width = 70, yscrollcommand =
dirsb.set)
        textsfile = Entry(dirfm)
        def closed(self):

            reactor.stop( )
            print &quot;nenuclose&quot;


        #print&quot;nenu&quot; ,data[56]
        #print&quot;nenu&quot; ,data[57]
        #print&quot;nenu&quot; ,data[58]
        #print&quot;nenu&quot; ,data[59]
        #print&quot;nenu&quot; ,data[63]
        '''p=1
        for i in range(40,100):
            if(data[i]=='-' or data[i]=='x'):
                p=i
        print&quot;nenu&quot; ,data[p-9]
        #ClientCommandFactory(username, password, command)



        #__init__(self, username, password, command)'''






class ClientCommandFactory(protocol.ClientFactory):

    def __init__(self, username, password, command):

            self.username = username

            self.password = password

            self.command = command



    def buildProtocol(self, addr):

            protocol = ClientCommandTransport(

                self.username, self.password, self.command)

            return protocol



if __name__ == &quot;__main__&quot;:
    top = Tkinter.Tk()
#to draw Label in the main page

    label = Tkinter.Label(top, text=' CARD UPLOAD UTILITY ' )
    label.pack()

#to draw Label

    label = Tkinter.Label(top, text='ENTER LOGIN  ')
    label.pack(side=LEFT,fill=X)

#to draw Textbox
    tv = Tkinter.StringVar( )
    textlog=Entry(top,width=20,textvariable=tv)
    textlog.pack(side=LEFT)


#to draw Label

    label = Tkinter.Label(top, text=' ENTER PASSWORD  ')
    label.pack(side=LEFT)

#to draw Textbox
    tv1 = Tkinter.StringVar( )
    textpass=Entry(top,width=20,textvariable=tv1)
    textpass.pack(side=LEFT)

#to draw submit
    submit=Tkinter.Button(top, text=' SUBMIT ',command=submit)
    submit.pack(side=LEFT)
    top.bind_all('&lt;Return&gt;',(lambda event: submit()))



#to draw Quit
    quit = Tkinter.Button(top, text='  QUIT  ',command=top.quit)
    quit.pack(side=LEFT)




    Tkinter.mainloop()


#put m as username and m as password

On Tue, Sep 30, 2008 at 9:12 PM, shweta mani &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">shweta3230 at gmail.com</A>&gt; wrote:

&gt;<i>  hi friends thanks for immediate reply.
</I>&gt;<i> i have referred the book twisted..........
</I>&gt;<i> currently i am facing the problem.
</I>&gt;<i> i have to show ls -l output in a listbox using Tkinter
</I>&gt;<i> but because of TCP it first stores information in a window or some packet
</I>&gt;<i> format.
</I>&gt;<i> so it doesnot show the output in a continuous manner.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Sep 30, 2008 at 2:07 AM, Jack Whitham &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jack-tp at cs.york.ac.uk</A>&gt;wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Sun, Sep 28, 2008 at 02:11:49AM +0200, paul wrote:
</I>&gt;&gt;<i> &gt; Hope this isn't too offensive but last time I checked conch didn't work
</I>&gt;&gt;<i> &gt; on win32 (<A HREF="http://twistedmatrix.com/trac/ticket/50">http://twistedmatrix.com/trac/ticket/50</A>). I guess most users
</I>&gt;&gt;<i> &gt; would be happy with a basic &quot;secure RPC&quot; implementation, no console
</I>&gt;&gt;<i> &gt; stuff. No idea how much work that is though ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Conch does work on Win32, I have written an application that uses
</I>&gt;&gt;<i> it (not the command line client). You have to install pycrypto
</I>&gt;&gt;<i> in addition to Twisted.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Jack Whitham
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">jack at cs.york.ac.uk</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Twisted-Python mailing list
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">Twisted-Python at twistedmatrix.com</A>
</I>&gt;&gt;<i> <A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: <A HREF="http://twistedmatrix.com/pipermail/twisted-python/attachments/20080930/909ab3b1/attachment.htm">http://twistedmatrix.com/pipermail/twisted-python/attachments/20080930/909ab3b1/attachment.htm</A> 
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018450.html">[Twisted-Python] Re: DOUBTS PLEASE SOLVE
</A></li>
	<LI>Next message: <A HREF="018452.html">[Twisted-Python] Re: DOUBTS PLEASE SOLVE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18451">[ date ]</a>
              <a href="thread.html#18451">[ thread ]</a>
              <a href="subject.html#18451">[ subject ]</a>
              <a href="author.html#18451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
