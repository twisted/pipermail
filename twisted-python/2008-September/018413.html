<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] failure to connect to sshsimpleserver.py
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20failure%20to%20connect%20to%20sshsimpleserver.py&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018416.html">
   <LINK REL="Next"  HREF="018414.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] failure to connect to sshsimpleserver.py</H1>
    <B>Glen Mabey</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20failure%20to%20connect%20to%20sshsimpleserver.py&In-Reply-To="
       TITLE="[Twisted-Python] failure to connect to sshsimpleserver.py">glen.mabey at swri.org
       </A><BR>
    <I>Tue Sep 23 17:58:48 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018416.html">[Twisted-Python] Multi-service install
</A></li>
        <LI>Next message: <A HREF="018414.html">[Twisted-Python] failure to connect to sshsimpleserver.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18413">[ date ]</a>
              <a href="thread.html#18413">[ thread ]</a>
              <a href="subject.html#18413">[ subject ]</a>
              <a href="author.html#18413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I'm just starting to use twisted (having quickly read through the book  
&quot;Twisted: Network Programming Essentials&quot;), and I am unable to  
successfully use one of the example scripts:  doc/conch/examples/ 
sshsimpleserver.py .

I am using python 2.5.2 and today's svn of twisted and pycrypto on  
RedHat AS5 x84-64.  I experienced similar results with 8.1.0 .

I am able to start the server with no problem, but when I start a  
client that connects to it, I get:


2008-09-23 21:51:08+0000 [-] Log opened.
2008-09-23 21:51:08+0000 [-] __main__.ExampleFactory starting on 5022
2008-09-23 21:51:08+0000 [-] Starting factory &lt;__main__.ExampleFactory  
instance at 0x17e60a28&gt;
2008-09-23 21:51:10+0000 [__main__.ExampleFactory] disabling diffie- 
hellman-group-exchange because we cannot find moduli file
2008-09-23 21:51:10+0000 [SSHServerTransport,0,127.0.0.1] kex alg, key  
alg: diffie-hellman-group1-sha1 ssh-rsa
2008-09-23 21:51:10+0000 [SSHServerTransport,0,127.0.0.1] outgoing:  
aes256-ctr hmac-sha1 none
2008-09-23 21:51:10+0000 [SSHServerTransport,0,127.0.0.1] incoming:  
aes256-ctr hmac-sha1 none
2008-09-23 21:51:10+0000 [SSHServerTransport,0,127.0.0.1] Unhandled  
Error
	Traceback (most recent call last):
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/python/log.py&quot;, line 51, in  
callWithLogger
	    return callWithContext({&quot;system&quot;: lp}, func, *args, **kw)
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/python/log.py&quot;, line 36, in  
callWithContext
	    return context.call({ILogContext: newCtx}, func, *args, **kw)
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/python/context.py&quot;, line 59, in  
callWithContext
	    return self.currentContext().callWithContext(ctx, func, *args,  
**kw)
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/python/context.py&quot;, line 37, in  
callWithContext
	    return func(*args,**kw)
	--- &lt;exception caught here&gt; ---
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/internet/selectreactor.py&quot;, line 146,  
in _doReadOrWrite
	    why = getattr(selectable, method)()
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/internet/tcp.py&quot;, line 463, in doRead
	    return self.protocol.dataReceived(data)
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/conch/ssh/transport.py&quot;, line 314, in  
dataReceived
	    self.dispatchMessage(messageNum, packet[1:])
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/conch/ssh/transport.py&quot;, line 329, in  
dispatchMessage
	    f(payload)
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/conch/ssh/transport.py&quot;, line 740, in  
ssh_KEX_DH_GEX_REQUEST_OLD
	    NS(self.factory.privateKeys[self.keyAlg].sign(exchangeHash)))
	  File &quot;/usr/DiamondBack/stow/twisted-20080923_svn-py2.5/lib/ 
python2.5/site-packages/twisted/conch/ssh/keys.py&quot;, line 659, in sign
	    signature = self.keyObject.sign(digest, '')[0]
	  File &quot;/usr/DiamondBack/stow/pycrypto-20080923_git-py2.5/lib/ 
python2.5/site-packages/Crypto/PublicKey/pubkey.py&quot;, line 76, in sign
	    return self._sign(M, K)
	exceptions.TypeError: _sign() takes exactly 2 arguments (3 given)
	
2008-09-23 21:51:10+0000 [SSHServerTransport,0,127.0.0.1] connection  
lost



I have tried starting the client both as 'ssh localhost -p 5022' as  
well as running the sshsimpleclient.py script with the same results.

I have also tried connecting from a different host into the server,  
with the same results.

Any help in resolving this issue and realizing a working example of an  
ssh server would be greatly appreciated.

Thank you,
Glen Mabey


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018416.html">[Twisted-Python] Multi-service install
</A></li>
	<LI>Next message: <A HREF="018414.html">[Twisted-Python] failure to connect to sshsimpleserver.py
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18413">[ date ]</a>
              <a href="thread.html#18413">[ thread ]</a>
              <a href="subject.html#18413">[ subject ]</a>
              <a href="author.html#18413">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
