<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Twisted-Python] Moderately-long running processes timing out	in Twisted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Moderately-long%20running%20processes%20timing%20out%0A%09in%20Twisted&In-Reply-To=202751.42289.qm%40web33701.mail.mud.yahoo.com">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018349.html">
   <LINK REL="Next"  HREF="018351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Twisted-Python] Moderately-long running processes timing out	in Twisted</H1>
    <B>Jean-Paul Calderone</B> 
    <A HREF="mailto:twisted-python%40twistedmatrix.com?Subject=%5BTwisted-Python%5D%20Moderately-long%20running%20processes%20timing%20out%0A%09in%20Twisted&In-Reply-To=202751.42289.qm%40web33701.mail.mud.yahoo.com"
       TITLE="[Twisted-Python] Moderately-long running processes timing out	in Twisted">exarkun at divmod.com
       </A><BR>
    <I>Fri Sep  5 14:20:01 EDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="018349.html">[Twisted-Python] Moderately-long running processes timing out in	Twisted
</A></li>
        <LI>Next message: <A HREF="018351.html">[Twisted-Python] Moderately-long running processes timing out in	Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18350">[ date ]</a>
              <a href="thread.html#18350">[ thread ]</a>
              <a href="subject.html#18350">[ subject ]</a>
              <a href="author.html#18350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 5 Sep 2008 11:06:25 -0700 (PDT), Steve Lewis &lt;<A HREF="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">spiritualmechanic at yahoo.com</A>&gt; wrote:
&gt;<i>I looked at the adbapi code and it appears the ConnectionLost exception is coming from there, not from cx_Oracle. At least that's what is in the error log:
</I>&gt;<i>
</I>&gt;<i>2008-09-05 12:25:48-0400 [HTTPChannel,9003,127.0.0.1] adbapi closing: cx_Oracle
</I>&gt;<i>2008-09-05 12:25:48-0400 [HTTPChannel,9003,127.0.0.1] Connection lost.
</I>&gt;<i>2008-09-05 12:25:48-0400 [-] Unhandled Error
</I>&gt;<i>        Traceback (most recent call last):
</I>&gt;<i>          File &quot;/opt/Python25/lib/python2.5/threading.py&quot;, line 440, in run
</I>&gt;<i>            self.__target(*self.__args, **self.__kwargs)
</I>&gt;<i>          File &quot;/opt/python/lib/python2.5/site-packages/twisted/python/threadpool.py&quot;, line 161, in _worker
</I>&gt;<i>            context.call(ctx, function, *args, **kwargs)
</I>&gt;<i>          File &quot;/opt/python/lib/python2.5/site-packages/twisted/python/context.py&quot;, line 59, in callWithContext
</I>&gt;<i>            return self.currentContext().callWithContext(ctx, func, *args, **kw)
</I>&gt;<i>          File &quot;/opt/python/lib/python2.5/site-packages/twisted/python/context.py&quot;, line 37, in callWithContext
</I>&gt;<i>            return func(*args,**kw)
</I>&gt;<i>        --- &lt;exception caught here&gt; ---
</I>&gt;<i>          File &quot;/opt/python/lib/python2.5/site-packages/twisted/internet/threads.py&quot;, line 24, in _putResultInDeferred
</I>&gt;<i>            result = f(*args, **kwargs)
</I>&gt;<i>          File &quot;/opt/python/lib/python2.5/site-packages/twisted/enterprise/adbapi.py&quot;, line 380, in _runInteraction
</I>&gt;<i>            conn.rollback()
</I>&gt;<i>          File &quot;/opt/python/lib/python2.5/site-packages/twisted/enterprise/adbapi.py&quot;, line 65, in rollback
</I>&gt;<i>            raise ConnectionLost()
</I>&gt;<i>        twisted.enterprise.adbapi.ConnectionLost:
</I>&gt;<i>
</I>&gt;<i>I don't know what
</I>&gt;<i>
</I>&gt;<i>        --- &lt;exception caught here&gt; ---
</I>&gt;<i>
</I>&gt;<i>means. I'm guessing there's some sort of issue with Oracle but our DBA didn't see anything obvious in his logs. Is there a way for me to tell what exactly the &quot;exception caught here&quot; is?
</I>&gt;<i>
</I>
&quot;exception caught here&quot; is telling you where in the call stack the exception
was caught. Frames above it weren't escaped by the exception. Frames below
it were.

I think you're seeing an example of poor error reporting in adbapi.  This
has recently been improved and the improvements will be included in the
next release of Twisted.  If you can somehow test a recent trunk revision
of Twisted, you might find that it reports a more specific problem which
points to the actual cause of the failure.

What this does indicate, I think, is that you had a transaction which
could not be committed for some reason.  adbapi is rolling back the
transaction before reporting the reason the commit failed.  However,
the ConnectionLost exception, which is boring and not really relevant
to anything you're doing, is happening before the real exception can be
reported.

Jean-Paul


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018349.html">[Twisted-Python] Moderately-long running processes timing out in	Twisted
</A></li>
	<LI>Next message: <A HREF="018351.html">[Twisted-Python] Moderately-long running processes timing out in	Twisted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18350">[ date ]</a>
              <a href="thread.html#18350">[ thread ]</a>
              <a href="subject.html#18350">[ subject ]</a>
              <a href="author.html#18350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://twistedmatrix.com/cgi-bin/mailman/listinfo/twisted-python">More information about the Twisted-Python
mailing list</a><br>
</body></html>
